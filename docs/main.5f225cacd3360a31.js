(self.webpackChunkcompare_video_sdks=self.webpackChunkcompare_video_sdks||[]).push([[179],{6436:(we,Pe,$)=>{"use strict";function F(n){return"function"==typeof n}function re(n){const e=n(s=>{Error.call(s),s.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const oe=re(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((s,d)=>`${d+1}) ${s.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function H(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class j{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const f of e)f.remove(this);else e.remove(this);const{initialTeardown:s}=this;if(F(s))try{s()}catch(f){t=f instanceof oe?f.errors:[f]}const{_teardowns:d}=this;if(d){this._teardowns=null;for(const f of d)try{x(f)}catch(b){t=t??[],b instanceof oe?t=[...t,...b.errors]:t.push(b)}}if(t)throw new oe(t)}}add(t){var e;if(t&&t!==this)if(this.closed)x(t);else{if(t instanceof j){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&H(e,t)}remove(t){const{_teardowns:e}=this;e&&H(e,t),t instanceof j&&t._removeParent(this)}}j.EMPTY=(()=>{const n=new j;return n.closed=!0,n})();const M=j.EMPTY;function P(n){return n instanceof j||n&&"closed"in n&&F(n.remove)&&F(n.add)&&F(n.unsubscribe)}function x(n){F(n)?n():n.unsubscribe()}const U={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(...n){const{delegate:t}=Z;return(t?.setTimeout||setTimeout)(...n)},clearTimeout(n){const{delegate:t}=Z;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ae(n){Z.setTimeout(()=>{const{onUnhandledError:t}=U;if(!t)throw n;t(n)})}function ue(){}const pe=K("C",void 0,void 0);function K(n,t,e){return{kind:n,value:t,error:e}}let ce=null;function ye(n){if(U.useDeprecatedSynchronousErrorHandling){const t=!ce;if(t&&(ce={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:s}=ce;if(ce=null,e)throw s}}else n()}class fe extends j{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,P(t)&&t.add(this)):this.destination=he}static create(t,e,s){return new Ae(t,e,s)}next(t){this.isStopped?le(function Y(n){return K("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?le(function ee(n){return K("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?le(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ae extends fe{constructor(t,e,s){let d;if(super(),F(t))d=t;else if(t){let f;({next:d,error:e,complete:s}=t),this&&U.useDeprecatedNextContext?(f=Object.create(t),f.unsubscribe=()=>this.unsubscribe()):f=t,d=d?.bind(f),e=e?.bind(f),s=s?.bind(f)}this.destination={next:d?Ee(d):ue,error:Ee(e??ve),complete:s?Ee(s):ue}}}function Ee(n,t){return(...e)=>{try{n(...e)}catch(s){U.useDeprecatedSynchronousErrorHandling?function ke(n){U.useDeprecatedSynchronousErrorHandling&&ce&&(ce.errorThrown=!0,ce.error=n)}(s):ae(s)}}}function ve(n){throw n}function le(n,t){const{onStoppedNotification:e}=U;e&&Z.setTimeout(()=>e(n,t))}const he={closed:!0,next:ue,error:ve,complete:ue},Oe="function"==typeof Symbol&&Symbol.observable||"@@observable";function je(n){return n}let rt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const s=new n;return s.source=this,s.operator=e,s}subscribe(e,s,d){const f=function Nt(n){return n&&n instanceof fe||function Ke(n){return n&&F(n.next)&&F(n.error)&&F(n.complete)}(n)&&P(n)}(e)?e:new Ae(e,s,d);return ye(()=>{const{operator:b,source:E}=this;f.add(b?b.call(f,E):E?this._subscribe(f):this._trySubscribe(f))}),f}_trySubscribe(e){try{return this._subscribe(e)}catch(s){e.error(s)}}forEach(e,s){return new(s=nt(s))((d,f)=>{let b;b=this.subscribe(E=>{try{e(E)}catch(T){f(T),b?.unsubscribe()}},f,d)})}_subscribe(e){var s;return null===(s=this.source)||void 0===s?void 0:s.subscribe(e)}[Oe](){return this}pipe(...e){return function He(n){return 0===n.length?je:1===n.length?n[0]:function(e){return n.reduce((s,d)=>d(s),e)}}(e)(this)}toPromise(e){return new(e=nt(e))((s,d)=>{let f;this.subscribe(b=>f=b,b=>d(b),()=>s(f))})}}return n.create=t=>new n(t),n})();function nt(n){var t;return null!==(t=n??U.Promise)&&void 0!==t?t:Promise}const Ht=re(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Et=(()=>{class n extends rt{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const s=new Je(this,this);return s.operator=e,s}_throwIfClosed(){if(this.closed)throw new Ht}next(e){ye(()=>{if(this._throwIfClosed(),!this.isStopped){const s=this.observers.slice();for(const d of s)d.next(e)}})}error(e){ye(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:s}=this;for(;s.length;)s.shift().error(e)}})}complete(){ye(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:s,isStopped:d,observers:f}=this;return s||d?M:(f.push(e),new j(()=>H(f,e)))}_checkFinalizedStatuses(e){const{hasError:s,thrownError:d,isStopped:f}=this;s?e.error(d):f&&e.complete()}asObservable(){const e=new rt;return e.source=this,e}}return n.create=(t,e)=>new Je(t,e),n})();class Je extends Et{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===s||s.call(e,t)}error(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===s||s.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,s;return null!==(s=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==s?s:M}}function $e(n){return t=>{if(function Ve(n){return F(n?.lift)}(t))return t.lift(function(e){try{return n(e,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}class De extends fe{constructor(t,e,s,d,f){super(t),this.onFinalize=f,this._next=e?function(b){try{e(b)}catch(E){t.error(E)}}:super._next,this._error=d?function(b){try{d(b)}catch(E){t.error(E)}finally{this.unsubscribe()}}:super._error,this._complete=s?function(){try{s()}catch(b){t.error(b)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function ot(n,t){return $e((e,s)=>{let d=0;e.subscribe(new De(s,f=>{s.next(n.call(t,f,d++))}))})}function Gt(n){return this instanceof Gt?(this.v=n,this):new Gt(n)}function ln(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,s=e.apply(n,t||[]),f=[];return d={},b("next"),b("throw"),b("return"),d[Symbol.asyncIterator]=function(){return this},d;function b(Ie){s[Ie]&&(d[Ie]=function(xe){return new Promise(function(qe,ft){f.push([Ie,xe,qe,ft])>1||E(Ie,xe)})})}function E(Ie,xe){try{!function T(Ie){Ie.value instanceof Gt?Promise.resolve(Ie.value.v).then(k,Q):ie(f[0][2],Ie)}(s[Ie](xe))}catch(qe){ie(f[0][3],qe)}}function k(Ie){E("next",Ie)}function Q(Ie){E("throw",Ie)}function ie(Ie,xe){Ie(xe),f.shift(),f.length&&E(f[0][0],f[0][1])}}function Be(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function Xi(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],s=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(f){e[f]=n[f]&&function(b){return new Promise(function(E,T){!function d(f,b,E,T){Promise.resolve(T).then(function(k){f({value:k,done:E})},b)}(E,T,(b=n[f](b)).done,b.value)})}}}const yo=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function oa(n){return F(n?.then)}function fo(n){return F(n[Oe])}function Rc(n){return Symbol.asyncIterator&&F(n?.[Symbol.asyncIterator])}function $n(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const tt=function Tn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ue(n){return F(n?.[tt])}function sn(n){return ln(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:s,done:d}=yield Gt(e.read());if(d)return yield Gt(void 0);yield yield Gt(s)}}finally{e.releaseLock()}})}function an(n){return F(n?.getReader)}function Sn(n){if(n instanceof rt)return n;if(null!=n){if(fo(n))return function ii(n){return new rt(t=>{const e=n[Oe]();if(F(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(yo(n))return function mo(n){return new rt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(oa(n))return function Ns(n){return new rt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ae)})}(n);if(Rc(n))return go(n);if(Ue(n))return function xs(n){return new rt(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(an(n))return function To(n){return go(sn(n))}(n)}throw $n(n)}function go(n){return new rt(t=>{(function Tr(n,t){var e,s,d,f;return function vr(n,t,e,s){return new(e||(e=Promise))(function(f,b){function E(Q){try{k(s.next(Q))}catch(ie){b(ie)}}function T(Q){try{k(s.throw(Q))}catch(ie){b(ie)}}function k(Q){Q.done?f(Q.value):function d(f){return f instanceof e?f:new e(function(b){b(f)})}(Q.value).then(E,T)}k((s=s.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Be(n);!(s=yield e.next()).done;)if(t.next(s.value),t.closed)return}catch(b){d={error:b}}finally{try{s&&!s.done&&(f=e.return)&&(yield f.call(e))}finally{if(d)throw d.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function co(n,t,e,s=0,d=!1){const f=t.schedule(function(){e(),d?n.add(this.schedule(null,s)):this.unsubscribe()},s);if(n.add(f),!d)return f}function Ld(n,t,e=1/0){return F(t)?Ld((s,d)=>ot((f,b)=>t(s,f,d,b))(Sn(n(s,d))),e):("number"==typeof t&&(e=t),$e((s,d)=>function ju(n,t,e,s,d,f,b,E){const T=[];let k=0,Q=0,ie=!1;const Ie=()=>{ie&&!T.length&&!k&&t.complete()},xe=ft=>k<s?qe(ft):T.push(ft),qe=ft=>{f&&t.next(ft),k++;let Qt=!1;Sn(e(ft,Q++)).subscribe(new De(t,Kt=>{d?.(Kt),f?xe(Kt):t.next(Kt)},()=>{Qt=!0},void 0,()=>{if(Qt)try{for(k--;T.length&&k<s;){const Kt=T.shift();b?co(t,b,()=>qe(Kt)):qe(Kt)}Ie()}catch(Kt){t.error(Kt)}}))};return n.subscribe(new De(t,xe,()=>{ie=!0,Ie()})),()=>{E?.()}}(s,d,n,e)))}function ls(n=1/0){return Ld(je,n)}const uE=new rt(n=>n.complete());function p0(n){return n&&F(n.schedule)}function h0(n){return n[n.length-1]}function kn(n){return F(h0(n))?n.pop():void 0}function Ii(n){return p0(h0(n))?n.pop():void 0}function KP(n,t=0){return $e((e,s)=>{e.subscribe(new De(s,d=>co(s,n,()=>s.next(d),t),()=>co(s,n,()=>s.complete(),t),d=>co(s,n,()=>s.error(d),t)))})}function oc(n,t=0){return $e((e,s)=>{s.add(n.schedule(()=>e.subscribe(s),t))})}function Bn(n,t){if(!n)throw new Error("Iterable cannot be null");return new rt(e=>{co(e,t,()=>{const s=n[Symbol.asyncIterator]();co(e,t,()=>{s.next().then(d=>{d.done?e.complete():e.next(d.value)})},0,!0)})})}function kg(n,t){return t?function f0(n,t){if(null!=n){if(fo(n))return function JT(n,t){return Sn(n).pipe(oc(t),KP(t))}(n,t);if(yo(n))return function XT(n,t){return new rt(e=>{let s=0;return t.schedule(function(){s===n.length?e.complete():(e.next(n[s++]),e.closed||this.schedule())})})}(n,t);if(oa(n))return function TB(n,t){return Sn(n).pipe(oc(t),KP(t))}(n,t);if(Rc(n))return Bn(n,t);if(Ue(n))return function zP(n,t){return new rt(e=>{let s;return co(e,t,()=>{s=n[tt](),co(e,t,()=>{let d,f;try{({value:d,done:f}=s.next())}catch(b){return void e.error(b)}f?e.complete():e.next(d)},0,!0)}),()=>F(s?.return)&&s.return()})}(n,t);if(an(n))return function Og(n,t){return Bn(sn(n),t)}(n,t)}throw $n(n)}(n,t):Sn(n)}function No(...n){const t=Ii(n),e=function Fh(n,t){return"number"==typeof h0(n)?n.pop():t}(n,1/0),s=n;return s.length?1===s.length?Sn(s[0]):ls(e)(kg(s,t)):uE}function Qu(n){return n<=0?()=>uE:$e((t,e)=>{let s=0;t.subscribe(new De(e,d=>{++s<=n&&(e.next(d),n<=s&&e.complete())}))})}function ZT(n={}){const{connector:t=(()=>new Et),resetOnError:e=!0,resetOnComplete:s=!0,resetOnRefCountZero:d=!0}=n;return f=>{let b=null,E=null,T=null,k=0,Q=!1,ie=!1;const Ie=()=>{E?.unsubscribe(),E=null},xe=()=>{Ie(),b=T=null,Q=ie=!1},qe=()=>{const ft=b;xe(),ft?.unsubscribe()};return $e((ft,Qt)=>{k++,!ie&&!Q&&Ie();const Kt=T=T??t();Qt.add(()=>{k--,0===k&&!ie&&!Q&&(E=hn(qe,d))}),Kt.subscribe(Qt),b||(b=new Ae({next:pn=>Kt.next(pn),error:pn=>{ie=!0,Ie(),E=hn(xe,e,pn),Kt.error(pn)},complete:()=>{Q=!0,Ie(),E=hn(xe,s),Kt.complete()}}),kg(ft).subscribe(b))})(f)}}function hn(n,t,...e){return!0===t?(n(),null):!1===t?null:t(...e).pipe(Qu(1)).subscribe(()=>n())}function xo(n){for(let t in n)if(n[t]===xo)return t;throw Error("Could not find renamed property on target object.")}function qf(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Eo(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Eo).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function e1(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const RB=xo({__forward_ref__:xo});function es(n){return n.__forward_ref__=es,n.toString=function(){return Eo(this())},n}function ur(n){return Pg(n)?n():n}function Pg(n){return"function"==typeof n&&n.hasOwnProperty(RB)&&n.__forward_ref__===es}function Bd(n){return n&&!!n.\u0275providers}const Mp="https://g.co/ng/security#xss";class un extends Error{constructor(t,e){super(function m0(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function oi(n){return"string"==typeof n?n:null==n?"":String(n)}function Ea(n,t){throw new un(-201,!1)}function Zl(n,t){null==n&&function Zi(n,t,e,s){throw new Error(`ASSERTION ERROR: ${n}`+(null==s?"":` [Expected=> ${e} ${s} ${t} <=Actual]`))}(t,n,null,"!=")}function yr(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ti(n){return{providers:n.providers||[],imports:n.imports||[]}}function bv(n){return t1(n,Uh)||t1(n,Vd)}function t1(n,t){return n.hasOwnProperty(t)?n[t]:null}function fE(n){return n&&(n.hasOwnProperty(Vh)||n.hasOwnProperty(Sv))?n[Vh]:null}const Uh=xo({\u0275prov:xo}),Vh=xo({\u0275inj:xo}),Vd=xo({ngInjectableDef:xo}),Sv=xo({ngInjectorDef:xo});var jr=(()=>((jr=jr||{})[jr.Default=0]="Default",jr[jr.Host=1]="Host",jr[jr.Self=2]="Self",jr[jr.SkipSelf=4]="SkipSelf",jr[jr.Optional=8]="Optional",jr))();let jd;function Gu(n){const t=jd;return jd=n,t}function _0(n,t,e){const s=bv(n);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:e&jr.Optional?null:void 0!==t?t:void Ea(Eo(n))}const Lo=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),lo={},Yf="__NG_DI_FLAG__",Cv="ngTempTokenPath",PB=/\n/gm,A0="__source";let xg;function Iv(n){const t=xg;return xg=n,t}function NB(n,t=jr.Default){if(void 0===xg)throw new un(-203,!1);return null===xg?_0(n,void 0,t):xg.get(n,t&jr.Optional?null:void 0,t)}function cn(n,t=jr.Default){return(function Mg(){return jd}()||NB)(ur(n),t)}function Xc(n,t=jr.Default){return cn(n,eu(t))}function eu(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gE(n){const t=[];for(let e=0;e<n.length;e++){const s=ur(n[e]);if(Array.isArray(s)){if(0===s.length)throw new un(900,!1);let d,f=jr.Default;for(let b=0;b<s.length;b++){const E=s[b],T=YP(E);"number"==typeof T?-1===T?d=E.token:f|=T:d=E}t.push(cn(d,f))}else t.push(cn(s))}return t}function Lg(n,t){return n[Yf]=t,n.prototype[Yf]=t,n}function YP(n){return n[Yf]}function xp(n){return{toString:n}.toString()}var Bo=(()=>((Bo=Bo||{})[Bo.OnPush=0]="OnPush",Bo[Bo.Default=1]="Default",Bo))(),tu=(()=>{return(n=tu||(tu={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",tu;var n})();const Qd={},li=[],$f=xo({\u0275cmp:xo}),_E=xo({\u0275dir:xo}),nu=xo({\u0275pipe:xo}),o1=xo({\u0275mod:xo}),el=xo({\u0275fac:xo}),vE=xo({__NG_ELEMENT_ID__:xo});let JP=0;function aa(n){return xp(()=>{const e=!0===n.standalone,s={},d={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Bo.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||li,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||tu.Emulated,id:"c"+JP++,styles:n.styles||li,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},f=n.dependencies,b=n.features;return d.inputs=AE(n.inputs,s),d.outputs=AE(n.outputs),b&&b.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Dl).filter(Bg):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(ac).filter(Bg):null,d})}function Dl(n){return zi(n)||sc(n)}function Bg(n){return null!==n}function Pi(n){return xp(()=>({type:n.type,bootstrap:n.bootstrap||li,declarations:n.declarations||li,imports:n.imports||li,exports:n.exports||li,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function AE(n,t){if(null==n)return Qd;const e={};for(const s in n)if(n.hasOwnProperty(s)){let d=n[s],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),e[d]=s,t&&(t[d]=f)}return e}const mr=aa;function Oc(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function zi(n){return n[$f]||null}function sc(n){return n[_E]||null}function ac(n){return n[nu]||null}function iu(n){return Array.isArray(n)&&"object"==typeof n[1]}function Wo(n){return Array.isArray(n)&&!0===n[1]}function b0(n){return 0!=(4&n.flags)}function SE(n){return n.componentOffset>-1}function Vg(n){return 1==(1&n.flags)}function Ol(n){return null!==n.template}function a1(n){return 0!=(256&n[2])}function Bp(n,t){return n.hasOwnProperty(el)?n[el]:null}class As{constructor(t,e,s){this.previousValue=t,this.currentValue=e,this.firstChange=s}isFirstChange(){return this.firstChange}}function Bs(){return I0}function I0(n){return n.type.prototype.ngOnChanges&&(n.setInput=su),w0}function w0(){const n=Zf(this),t=n?.current;if(t){const e=n.previous;if(e===Qd)n.previous=t;else for(let s in t)e[s]=t[s];n.current=null,this.ngOnChanges(t)}}function su(n,t,e,s){const d=this.declaredInputs[e],f=Zf(n)||function l1(n,t){return n[c1]=t}(n,{previous:Qd,current:null}),b=f.current||(f.current={}),E=f.previous,T=E[d];b[d]=new As(T&&T.currentValue,t,E===Qd),n[s]=t}Bs.ngInherit=!0;const c1="__ngSimpleChanges__";function Zf(n){return n[c1]||null}function ua(n){for(;Array.isArray(n);)n=n[0];return n}function jg(n,t){return ua(t[n])}function da(n,t){return ua(t[n.index])}function Fp(n,t){return n.data[t]}function kv(n,t){return n[t]}function Ca(n,t){const e=t[n];return iu(e)?e:e[0]}function Pv(n){return 64==(64&n[2])}function zu(n,t){return null==t?null:n[t]}function wE(n){n[18]=0}function TE(n,t){n[5]+=t;let e=n,s=n[3];for(;null!==s&&(1===t&&1===e[5]||-1===t&&0===e[5]);)s[5]+=t,e=s,s=s[3]}const ti={lFrame:Hg(null),bindingsEnabled:!0};function D0(){return ti.bindingsEnabled}function Rn(){return ti.lFrame.lView}function Ri(){return ti.lFrame.tView}function Qa(n){return ti.lFrame.contextLView=n,n[8]}function Ko(n){return ti.lFrame.contextLView=null,n}function cc(){let n=iM();for(;null!==n&&64===n.type;)n=n.parent;return n}function iM(){return ti.lFrame.currentTNode}function Up(n,t){const e=ti.lFrame;e.currentTNode=n,e.isParent=t}function h1(){return ti.lFrame.isParent}function O0(){ti.lFrame.isParent=!1}function nm(){return ti.lFrame.bindingIndex++}function jp(n){const t=ti.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function m1(n,t){const e=ti.lFrame;e.bindingIndex=e.bindingRootIndex=n,OE(t)}function OE(n){ti.lFrame.currentDirectiveIndex=n}function P0(n){const t=ti.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}function g1(){return ti.lFrame.currentQueryIndex}function Gh(n){ti.lFrame.currentQueryIndex=n}function aM(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function _1(n,t,e){if(e&jr.SkipSelf){let d=t,f=n;for(;!(d=d.parent,null!==d||e&jr.Host||(d=aM(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;t=d,n=f}const s=ti.lFrame=M0();return s.currentTNode=t,s.lView=n,!0}function rm(n){const t=M0(),e=n[1];ti.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function M0(){const n=ti.lFrame,t=null===n?null:n.child;return null===t?Hg(n):t}function Hg(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function im(){const n=ti.lFrame;return ti.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const N0=im;function om(){const n=im();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ws(){return ti.lFrame.selectedIndex}function Wh(n){ti.lFrame.selectedIndex=n}function bo(){const n=ti.lFrame;return Fp(n.tView,n.selectedIndex)}function Do(){ti.lFrame.currentNamespace="svg"}function Ks(){!function Mi(){ti.lFrame.currentNamespace=null}()}function zo(n,t){for(let e=t.directiveStart,s=t.directiveEnd;e<s;e++){const f=n.data[e].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:k,ngOnDestroy:Q}=f;b&&(n.contentHooks||(n.contentHooks=[])).push(-e,b),E&&((n.contentHooks||(n.contentHooks=[])).push(e,E),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,E)),T&&(n.viewHooks||(n.viewHooks=[])).push(-e,T),k&&((n.viewHooks||(n.viewHooks=[])).push(e,k),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,k)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(e,Q)}}function xv(n,t,e){lM(n,t,3,e)}function kl(n,t,e,s){(3&n[2])===e&&lM(n,t,e,s)}function x0(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function lM(n,t,e,s){const f=s??-1,b=t.length-1;let E=0;for(let T=void 0!==s?65535&n[18]:0;T<b;T++)if("number"==typeof t[T+1]){if(E=t[T],null!=s&&E>=s)break}else t[T]<0&&(n[18]+=65536),(E<f||-1==f)&&(uM(n,e,t,T),n[18]=(4294901760&n[18])+T+2),T++}function uM(n,t,e,s){const d=e[s]<0,f=e[s+1],E=n[d?-e[s]:e[s]];if(d){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class qo{constructor(t,e,s){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=s}}function ro(n,t,e){let s=0;for(;s<e.length;){const d=e[s];if("number"==typeof d){if(0!==d)break;s++;const f=e[s++],b=e[s++],E=e[s++];n.setAttribute(t,b,E,f)}else{const f=d,b=e[++s];sm(f)?n.setProperty(t,f,b):n.setAttribute(t,f,b),s++}}return s}function U0(n){return 3===n||4===n||6===n}function sm(n){return 64===n.charCodeAt(0)}function Yu(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let s=0;s<t.length;s++){const d=t[s];"number"==typeof d?e=d:0===e||pM(n,e,d,null,-1===e||2===e?t[++s]:null)}}return n}function pM(n,t,e,s,d){let f=0,b=n.length;if(-1===t)b=-1;else for(;f<n.length;){const E=n[f++];if("number"==typeof E){if(E===t){b=-1;break}if(E>t){b=f-1;break}}}for(;f<n.length;){const E=n[f];if("number"==typeof E)break;if(E===e){if(null===s)return void(null!==d&&(n[f+1]=d));if(s===n[f+1])return void(n[f+2]=d)}f++,null!==s&&f++,null!==d&&f++}-1!==b&&(n.splice(b,0,t),f=b+1),n.splice(f++,0,e),null!==s&&n.splice(f++,0,s),null!==d&&n.splice(f++,0,d)}function Ia(n){return-1!==n}function Lv(n){return 32767&n}function So(n,t){let e=function V0(n){return n>>16}(n),s=t;for(;e>0;)s=s[15],e--;return s}let uc=!0;function Qp(n){const t=uc;return uc=n,t}let ME=0;const cu={};function kc(n,t){const e=Hp(n,t);if(-1!==e)return e;const s=t[1];s.firstCreatePass&&(n.injectorIndex=t.length,Hi(s.data,n),Hi(t,null),Hi(s.blueprint,null));const d=Kg(n,t),f=n.injectorIndex;if(Ia(d)){const b=Lv(d),E=So(d,t),T=E[1].data;for(let k=0;k<8;k++)t[f+k]=E[b+k]|T[b+k]}return t[f+8]=d,f}function Hi(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Hp(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Kg(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,s=null,d=t;for(;null!==d;){if(s=H0(d),null===s)return-1;if(e++,d=d[15],-1!==s.injectorIndex)return s.injectorIndex|e<<16}return-1}function NE(n,t,e){!function Co(n,t,e){let s;"string"==typeof e?s=e.charCodeAt(0)||0:e.hasOwnProperty(vE)&&(s=e[vE]),null==s&&(s=e[vE]=ME++);const d=255&s;t.data[n+(d>>5)]|=1<<d}(n,t,e)}function Fv(n,t,e){if(e&jr.Optional||void 0!==n)return n;Ea()}function y1(n,t,e,s){if(e&jr.Optional&&void 0===s&&(s=null),0==(e&(jr.Self|jr.Host))){const d=n[9],f=Gu(void 0);try{return d?d.get(t,s,e&jr.Optional):_0(t,s,e&jr.Optional)}finally{Gu(f)}}return Fv(s,0,e)}function Uv(n,t,e,s=jr.Default,d){if(null!==n){if(1024&t[2]){const b=function Q0(n,t,e,s,d){let f=n,b=t;for(;null!==f&&null!==b&&1024&b[2]&&!(256&b[2]);){const E=zg(f,b,e,s|jr.Self,cu);if(E!==cu)return E;let T=f.parent;if(!T){const k=b[21];if(k){const Q=k.get(e,cu,s);if(Q!==cu)return Q}T=H0(b),b=b[15]}f=T}return d}(n,t,e,s,cu);if(b!==cu)return b}const f=zg(n,t,e,s,cu);if(f!==cu)return f}return y1(t,e,s,d)}function zg(n,t,e,s,d){const f=function pa(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(vE)?n[vE]:void 0;return"number"==typeof t?t>=0?255&t:fM:t}(e);if("function"==typeof f){if(!_1(t,n,s))return s&jr.Host?Fv(d,0,s):y1(t,e,s,d);try{const b=f(s);if(null!=b||s&jr.Optional)return b;Ea()}finally{N0()}}else if("number"==typeof f){let b=null,E=Hp(n,t),T=-1,k=s&jr.Host?t[16][6]:null;for((-1===E||s&jr.SkipSelf)&&(T=-1===E?Kg(n,t):t[E+8],-1!==T&&hM(s,!1)?(b=t[1],E=Lv(T),t=So(T,t)):E=-1);-1!==E;){const Q=t[1];if(lu(f,E,Q.data)){const ie=JB(E,t,e,b,s,k);if(ie!==cu)return ie}T=t[E+8],-1!==T&&hM(s,t[1].data[E+8]===k)&&lu(f,E,t)?(b=Q,E=Lv(T),t=So(T,t)):E=-1}}return d}function JB(n,t,e,s,d,f){const b=t[1],E=b.data[n+8],Q=Gp(E,b,e,null==s?SE(E)&&uc:s!=b&&0!=(3&E.type),d&jr.Host&&f===E);return null!==Q?Ts(t,b,Q,E):cu}function Gp(n,t,e,s,d){const f=n.providerIndexes,b=t.data,E=1048575&f,T=n.directiveStart,Q=f>>20,Ie=d?E+Q:n.directiveEnd;for(let xe=s?E:E+Q;xe<Ie;xe++){const qe=b[xe];if(xe<T&&e===qe||xe>=T&&qe.type===e)return xe}if(d){const xe=b[T];if(xe&&Ol(xe)&&xe.type===e)return T}return null}function Ts(n,t,e,s){let d=n[e];const f=t.data;if(function dM(n){return n instanceof qo}(d)){const b=d;b.resolving&&function Hu(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new un(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Ut(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():oi(n)}(f[e]));const E=Qp(b.canSeeViewProviders);b.resolving=!0;const T=b.injectImpl?Gu(b.injectImpl):null;_1(n,s,jr.Default);try{d=n[e]=b.factory(void 0,f,n,s),t.firstCreatePass&&e>=s.directiveStart&&function Yr(n,t,e){const{ngOnChanges:s,ngOnInit:d,ngDoCheck:f}=t.type.prototype;if(s){const b=I0(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,b),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,b)}d&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,d),f&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,f),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,f))}(e,f[e],t)}finally{null!==T&&Gu(T),Qp(E),b.resolving=!1,N0()}}return d}function lu(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function hM(n,t){return!(n&jr.Self||n&jr.Host&&t)}class qs{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,s){return Uv(this._tNode,this._lView,t,eu(s),e)}}function fM(){return new qs(cc(),Rn())}function kr(n){return xp(()=>{const t=n.prototype.constructor,e=t[el]||j0(t),s=Object.prototype;let d=Object.getPrototypeOf(n.prototype).constructor;for(;d&&d!==s;){const f=d[el]||j0(d);if(f&&f!==e)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function j0(n){return Pg(n)?()=>{const t=j0(ur(n));return t&&t()}:Bp(n)}function H0(n){const t=n[1],e=t.type;return 2===e?t.declTNode:1===e?n[6]:null}function Kh(n){return function A1(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const s=e.length;let d=0;for(;d<s;){const f=e[d];if(U0(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<s&&"string"==typeof e[d];)d++;else{if(f===t)return e[d+1];d+=2}}}return null}(cc(),n)}const ys="__parameters__";function wa(n,t,e){return xp(()=>{const s=function cm(n){return function(...e){if(n){const s=n(...e);for(const d in s)this[d]=s[d]}}}(t);function d(...f){if(this instanceof d)return s.apply(this,f),this;const b=new d(...f);return E.annotation=b,E;function E(T,k,Q){const ie=T.hasOwnProperty(ys)?T[ys]:Object.defineProperty(T,ys,{value:[]})[ys];for(;ie.length<=Q;)ie.push(null);return(ie[Q]=ie[Q]||[]).push(b),T}}return e&&(d.prototype=Object.create(e.prototype)),d.prototype.ngMetadataName=n,d.annotationCls=d,d})}class Qn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=yr({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Pc(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let s=n[e];Array.isArray(s)?(t===n&&(t=n.slice(0,e)),Pc(s,t)):t!==n&&t.push(s)}return t}function um(n,t){n.forEach(e=>Array.isArray(e)?um(e,t):t(e))}function dm(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function zh(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function pm(n,t){const e=[];for(let s=0;s<n;s++)e.push(t);return e}function rl(n,t,e){let s=hm(n,t);return s>=0?n[1|s]=e:(s=~s,function G0(n,t,e,s){let d=n.length;if(d==t)n.push(e,s);else if(1===d)n.push(s,n[0]),n[0]=e;else{for(d--,n.push(n[d-1],n[d]);d>t;)n[d]=n[d-2],d--;n[t]=e,n[t+1]=s}}(n,s,t,e)),s}function xE(n,t){const e=hm(n,t);if(e>=0)return n[1|e]}function hm(n,t){return function Ys(n,t,e){let s=0,d=n.length>>e;for(;d!==s;){const f=s+(d-s>>1),b=n[f<<e];if(t===b)return f<<e;b>t?d=f:s=f+1}return~(d<<e)}(n,t,1)}const Fs=Lg(wa("Optional"),8),Cn=Lg(wa("SkipSelf"),4);var Mc=(()=>((Mc=Mc||{})[Mc.Important=1]="Important",Mc[Mc.DashCase=2]="DashCase",Mc))();const jE=new Map;let eC=0;const qv="__ngContext__";function Ra(n,t){iu(t)?(n[qv]=t[20],function Fo(n){jE.set(n[20],n)}(t)):n[qv]=t}function Xu(n,t){return undefined(n,t)}function qp(n){const t=n[3];return Wo(t)?t[3]:t}function x1(n){return QE(n[13])}function Yv(n){return QE(n[4])}function QE(n){for(;null!==n&&!Wo(n);)n=n[4];return n}function vm(n,t,e,s,d){if(null!=s){let f,b=!1;Wo(s)?f=s:iu(s)&&(b=!0,s=s[0]);const E=ua(s);0===n&&null!==e?null==d?Xd(t,e,E):Bc(t,e,E,d||null,!0):1===n&&null!==e?Bc(t,e,E,d||null,!0):2===n?function eA(n,t,e){const s=$v(n,t);s&&function F1(n,t,e,s){n.removeChild(t,e,s)}(n,s,t,e)}(t,E,b):3===n&&t.destroyNode(E),null!=f&&function hC(n,t,e,s,d){const f=e[7];f!==ua(e)&&vm(t,n,s,f,d);for(let E=10;E<e.length;E++){const T=e[E];o_(T[1],T,n,t,s,f)}}(t,n,f,e,d)}}function Jd(n,t,e){return n.createElement(t,e)}function aC(n,t){const e=n[9],s=e.indexOf(t),d=t[3];512&t[2]&&(t[2]&=-513,TE(d,-1)),e.splice(s,1)}function Ml(n,t){if(n.length<=10)return;const e=10+t,s=n[e];if(s){const d=s[17];null!==d&&d!==n&&aC(d,s),t>0&&(n[e-1][4]=s[4]);const f=zh(n,10+t);!function yM(n,t){o_(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(s[1],s);const b=f[19];null!==b&&b.detachView(f[1]),s[3]=null,s[4]=null,s[2]&=-65}return s}function Jh(n,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&o_(n,t,e,3,null,null),function oC(n){let t=n[13];if(!t)return HE(n[1],n);for(;t;){let e=null;if(iu(t))e=t[13];else{const s=t[10];s&&(e=s)}if(!e){for(;t&&!t[4]&&t!==n;)iu(t)&&HE(t[1],t),t=t[3];null===t&&(t=n),iu(t)&&HE(t[1],t),e=t&&t[4]}t=e}}(t)}}function HE(n,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function i_(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let s=0;s<e.length;s+=2){const d=t[e[s]];if(!(d instanceof qo)){const f=e[s+1];if(Array.isArray(f))for(let b=0;b<f.length;b+=2){const E=d[f[b]],T=f[b+1];try{T.call(E)}finally{}}else try{f.call(d)}finally{}}}}(n,t),function cC(n,t){const e=n.cleanup,s=t[7];let d=-1;if(null!==e)for(let f=0;f<e.length-1;f+=2)if("string"==typeof e[f]){const b=e[f+3];b>=0?s[d=b]():s[d=-b].unsubscribe(),f+=2}else{const b=s[d=e[f+1]];e[f].call(b)}if(null!==s){for(let f=d+1;f<s.length;f++)(0,s[f])();t[7]=null}}(n,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Wo(t[3])){e!==t[3]&&aC(e,t);const s=t[19];null!==s&&s.detachView(n)}!function Kv(n){jE.delete(n[20])}(t)}}function GE(n,t,e){return function lC(n,t,e){let s=t;for(;null!==s&&40&s.type;)s=(t=s).parent;if(null===s)return e[0];{const{componentOffset:d}=s;if(d>-1){const{encapsulation:f}=n.data[s.directiveStart+d];if(f===tu.None||f===tu.Emulated)return null}return da(s,e)}}(n,t.parent,e)}function Bc(n,t,e,s,d){n.insertBefore(t,e,s,d)}function Xd(n,t,e){n.appendChild(t,e)}function B1(n,t,e,s,d){null!==s?Bc(n,t,e,s,d):Xd(n,t,e)}function $v(n,t){return n.parentNode(t)}function WE(n,t,e){return V1(n,t,e)}let s_,nn,V1=function U1(n,t,e){return 40&n.type?da(n,e):null};function Xv(n,t,e,s){const d=GE(n,s,t),f=t[11],E=WE(s.parent||t[6],s,t);if(null!=d)if(Array.isArray(e))for(let T=0;T<e.length;T++)B1(f,d,e[T],E,!1);else B1(f,d,e,E,!1)}function Am(n,t){if(null!==t){const e=t.type;if(3&e)return da(t,n);if(4&e)return Zv(-1,n[t.index]);if(8&e){const s=t.child;if(null!==s)return Am(n,s);{const d=n[t.index];return Wo(d)?Zv(-1,d):ua(d)}}if(32&e)return Xu(t,n)()||ua(n[t.index]);{const s=j1(n,t);return null!==s?Array.isArray(s)?s[0]:Am(qp(n[16]),s):Am(n,t.next)}}return null}function j1(n,t){return null!==t?n[16][6].projection[t.projection]:null}function Zv(n,t){const e=10+n+1;if(e<t.length){const s=t[e],d=s[1].firstChild;if(null!==d)return Am(s,d)}return t[7]}function hc(n,t,e,s,d,f,b){for(;null!=e;){const E=s[e.index],T=e.type;if(b&&0===t&&(E&&Ra(ua(E),s),e.flags|=2),32!=(32&e.flags))if(8&T)hc(n,t,e.child,s,d,f,!1),vm(t,n,d,E,f);else if(32&T){const k=Xu(e,s);let Q;for(;Q=k();)vm(t,n,d,Q,f);vm(t,n,d,E,f)}else 16&T?KE(n,t,s,e,d,f):vm(t,n,d,E,f);e=b?e.projectionNext:e.next}}function o_(n,t,e,s,d,f){hc(e,s,n.firstChild,t,d,f,!1)}function KE(n,t,e,s,d,f){const b=e[16],T=b[6].projection[s.projection];if(Array.isArray(T))for(let k=0;k<T.length;k++)vm(t,n,d,T[k],f);else hc(n,t,T,b[3],d,f,!0)}function tA(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Xh(n,t,e){const{mergedAttrs:s,classes:d,styles:f}=e;null!==s&&ro(n,t,s),null!==d&&tA(n,t,d),null!==f&&function Q1(n,t,e){n.setAttribute(t,"style",e)}(n,t,f)}function $s(n){return function mC(){if(void 0===s_&&(s_=null,Lo.trustedTypes))try{s_=Lo.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return s_}()?.createHTML(n)||n}class Zp{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Mp})`}}class SM extends Zp{getTypeName(){return"HTML"}}class CM extends Zp{getTypeName(){return"Style"}}class _C extends Zp{getTypeName(){return"Script"}}class IM extends Zp{getTypeName(){return"URL"}}class K1 extends Zp{getTypeName(){return"ResourceURL"}}function al(n){return n instanceof Zp?n.changingThisBreaksApplicationSecurity:n}function cl(n,t){const e=function Em(n){return n instanceof Zp&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Mp})`)}return e===t}class Y1{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString($s(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class aF{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const s=this.inertDocument.createElement("body");e.appendChild(s)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=$s(t),e;const s=this.inertDocument.createElement("body");return s.innerHTML=$s(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(s),s}stripCustomNsAttrs(t){const e=t.attributes;for(let d=e.length-1;0<d;d--){const b=e.item(d).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&t.removeAttribute(b)}let s=t.firstChild;for(;s;)s.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(s),s=s.nextSibling}}const AC=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function nA(n){return(n=String(n)).match(AC)?n:"unsafe:"+n}function Zd(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function rA(...n){const t={};for(const e of n)for(const s in e)e.hasOwnProperty(s)&&(t[s]=!0);return t}const iA=Zd("area,br,col,hr,img,wbr"),zE=Zd("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zh=Zd("rp,rt"),qE=rA(iA,rA(zE,Zd("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rA(Zh,Zd("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rA(Zh,zE)),yC=Zd("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),EC=rA(yC,Zd("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zd("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lF=Zd("script,style,template");class J1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,s=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?s=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,s&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let d=this.checkClobberedElement(e,e.nextSibling);if(d){e=d;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!qE.hasOwnProperty(e))return this.sanitizedSomething=!0,!lF.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const s=t.attributes;for(let d=0;d<s.length;d++){const f=s.item(d),b=f.name,E=b.toLowerCase();if(!EC.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let T=f.value;yC[E]&&(T=nA(T)),this.buf.push(" ",b,'="',X1(T),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();qE.hasOwnProperty(e)&&!iA.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(X1(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const uF=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,OM=/([^\#-~ |!])/g;function X1(n){return n.replace(/&/g,"&amp;").replace(uF,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(OM,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let bC;function oA(n,t){let e=null;try{bC=bC||function vC(n){const t=new aF(n);return function RM(){try{return!!(new window.DOMParser).parseFromString($s(""),"text/html")}catch{return!1}}()?new Y1(t):t}(n);let s=t?String(t):"";e=bC.getInertBodyElement(s);let d=5,f=s;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,s=f,f=e.innerHTML,e=bC.getInertBodyElement(s)}while(s!==f);return $s((new J1).sanitizeChildren(Z1(e)||e))}finally{if(e){const s=Z1(e)||e;for(;s.firstChild;)s.removeChild(s.firstChild)}}}function Z1(n){return"content"in n&&function sA(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Di=(()=>((Di=Di||{})[Di.NONE=0]="NONE",Di[Di.HTML=1]="HTML",Di[Di.STYLE=2]="STYLE",Di[Di.SCRIPT=3]="SCRIPT",Di[Di.URL=4]="URL",Di[Di.RESOURCE_URL=5]="RESOURCE_URL",Di))();const nR=new Qn("ENVIRONMENT_INITIALIZER"),rR=new Qn("INJECTOR",-1),ll=new Qn("INJECTOR_DEF_TYPES");class iR{get(t,e=lo){if(e===lo){const s=new Error(`NullInjectorError: No provider for ${Eo(t)}!`);throw s.name="NullInjectorError",s}return e}}function NM(...n){return{\u0275providers:tf(0,n),\u0275fromNgModule:!0}}function tf(n,...t){const e=[],s=new Set;let d;return um(t,f=>{const b=f;oR(b,e,[],s)&&(d||(d=[]),d.push(b))}),void 0!==d&&aA(d,e),e}function aA(n,t){for(let e=0;e<n.length;e++){const{providers:d}=n[e];SC(d,f=>{t.push(f)})}}function oR(n,t,e,s){if(!(n=ur(n)))return!1;let d=null,f=fE(n);const b=!f&&zi(n);if(f||b){if(b&&!b.standalone)return!1;d=n}else{const T=n.ngModule;if(f=fE(T),!f)return!1;d=T}const E=s.has(d);if(b){if(E)return!1;if(s.add(d),b.dependencies){const T="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const k of T)oR(k,t,e,s)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let k;s.add(d);try{um(f.imports,Q=>{oR(Q,t,e,s)&&(k||(k=[]),k.push(Q))})}finally{}void 0!==k&&aA(k,t)}if(!E){const k=Bp(d)||(()=>new d);t.push({provide:d,useFactory:k,deps:li},{provide:ll,useValue:d,multi:!0},{provide:nR,useValue:()=>cn(d),multi:!0})}const T=f.providers;null==T||E||SC(T,Q=>{t.push(Q)})}}return d!==n&&void 0!==n.providers}function SC(n,t){for(let e of n)Bd(e)&&(e=e.\u0275providers),Array.isArray(e)?SC(e,t):t(e)}const Rs=xo({provide:String,useValue:xo});function l_(n){return null!==n&&"object"==typeof n&&Rs in n}function hu(n){return"function"==typeof n}const Sm=new Qn("Set Injector scope."),cA={},lA={};let uA;function Ds(){return void 0===uA&&(uA=new iR),uA}class tp{}class Jr extends tp{constructor(t,e,s,d){super(),this.parent=e,this.source=s,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cR(t,b=>this.processProvider(b)),this.records.set(rR,Yn(void 0,this)),d.has("environment")&&this.records.set(tp,Yn(void 0,this));const f=this.records.get(Sm);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(ll.multi,li,jr.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Iv(this),s=Gu(void 0);try{return t()}finally{Iv(e),Gu(s)}}get(t,e=lo,s=jr.Default){this.assertNotDestroyed(),s=eu(s);const d=Iv(this),f=Gu(void 0);try{if(!(s&jr.SkipSelf)){let E=this.records.get(t);if(void 0===E){const T=function p_(n){return"function"==typeof n||"object"==typeof n&&n instanceof Qn}(t)&&bv(t);E=T&&this.injectableDefInScope(T)?Yn(IC(t),cA):null,this.records.set(t,E)}if(null!=E)return this.hydrate(t,E)}return(s&jr.Self?Ds():this.parent).get(t,e=s&jr.Optional&&e===lo?null:e)}catch(b){if("NullInjectorError"===b.name){if((b[Cv]=b[Cv]||[]).unshift(Eo(t)),d)throw b;return function wv(n,t,e,s){const d=n[Cv];throw t[A0]&&d.unshift(t[A0]),n.message=function Zc(n,t,e,s=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let d=Eo(t);if(Array.isArray(t))d=t.map(Eo).join(" -> ");else if("object"==typeof t){let f=[];for(let b in t)if(t.hasOwnProperty(b)){let E=t[b];f.push(b+":"+("string"==typeof E?JSON.stringify(E):Eo(E)))}d=`{${f.join(", ")}}`}return`${e}${s?"("+s+")":""}[${d}]: ${n.replace(PB,"\n  ")}`}("\n"+n.message,d,e,s),n.ngTokenPath=d,n[Cv]=null,n}(b,t,"R3InjectorError",this.source)}throw b}finally{Gu(f),Iv(d)}}resolveInjectorInitializers(){const t=Iv(this),e=Gu(void 0);try{const s=this.get(nR.multi,li,jr.Self);for(const d of s)d()}finally{Iv(t),Gu(e)}}toString(){const t=[],e=this.records;for(const s of e.keys())t.push(Eo(s));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new un(205,!1)}processProvider(t){let e=hu(t=ur(t))?t:ur(t&&t.provide);const s=function d_(n){return l_(n)?Yn(void 0,n.useValue):Yn(th(n),cA)}(t);if(hu(t)||!0!==t.multi)this.records.get(e);else{let d=this.records.get(e);d||(d=Yn(void 0,cA,!0),d.factory=()=>gE(d.multi),this.records.set(e,d)),e=t,d.multi.push(t)}this.records.set(e,s)}hydrate(t,e){return e.value===cA&&(e.value=lA,e.value=e.factory()),"object"==typeof e.value&&e.value&&function dF(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ur(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function IC(n){const t=bv(n),e=null!==t?t.factory:Bp(n);if(null!==e)return e;if(n instanceof Qn)throw new un(204,!1);if(n instanceof Function)return function fr(n){const t=n.length;if(t>0)throw pm(t,"?"),new un(204,!1);const e=function Wn(n){const t=n&&(n[Uh]||n[Vd]);if(t){const e=function Ud(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new un(204,!1)}function th(n,t,e){let s;if(hu(n)){const d=ur(n);return Bp(d)||IC(d)}if(l_(n))s=()=>ur(n.useValue);else if(function CC(n){return!(!n||!n.useFactory)}(n))s=()=>n.useFactory(...gE(n.deps||[]));else if(function aR(n){return!(!n||!n.useExisting)}(n))s=()=>cn(ur(n.useExisting));else{const d=ur(n&&(n.useClass||n.provide));if(!function fu(n){return!!n.deps}(n))return Bp(d)||IC(d);s=()=>new d(...gE(n.deps))}return s}function Yn(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function cR(n,t){for(const e of n)Array.isArray(e)?cR(e,t):e&&Bd(e)?cR(e.\u0275providers,t):t(e)}class Uo{}class xM{}class pF{resolveComponentFactory(t){throw function np(n){const t=Error(`No component factory found for ${Eo(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let qi=(()=>{class n{}return n.NULL=new pF,n})();function Fc(){return Cm(cc(),Rn())}function Cm(n,t){return new Ni(da(n,t))}let Ni=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=Fc,n})();function BM(n){return n instanceof Ni?n.nativeElement:n}class Im{}let mu=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function FM(){const n=Rn(),e=Ca(cc().index,n);return(iu(e)?e:n)[11]}(),n})(),uR=(()=>{class n{}return n.\u0275prov=yr({token:n,providedIn:"root",factory:()=>null}),n})();class h_{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const dR=new h_("15.0.2"),Nl={};function YE(n){return n.ngOriginalError}class gu{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&YE(t);for(;e&&YE(e);)e=YE(e);return e||null}}function ul(n){return n.ownerDocument.defaultView}function gR(n,t,e){let s=n.length;for(;;){const d=n.indexOf(t,e);if(-1===d)return d;if(0===d||n.charCodeAt(d-1)<=32){const f=t.length;if(d+f===s||n.charCodeAt(d+f)<=32)return d}e=d+1}}const RC="ng-template";function jM(n,t,e){let s=0;for(;s<n.length;){let d=n[s++];if(e&&"class"===d){if(d=n[s],-1!==gR(d.toLowerCase(),t,0))return!0}else if(1===d){for(;s<n.length&&"string"==typeof(d=n[s++]);)if(d.toLowerCase()===t)return!0;return!1}}return!1}function _R(n){return 4===n.type&&n.value!==RC}function vR(n,t,e){return t===(4!==n.type||e?n.value:RC)}function AR(n,t,e){let s=4;const d=n.attrs||[],f=function ER(n){for(let t=0;t<n.length;t++)if(U0(n[t]))return t;return n.length}(d);let b=!1;for(let E=0;E<t.length;E++){const T=t[E];if("number"!=typeof T){if(!b)if(4&s){if(s=2|1&s,""!==T&&!vR(n,T,e)||""===T&&1===t.length){if(dl(s))return!1;b=!0}}else{const k=8&s?T:t[++E];if(8&s&&null!==n.attrs){if(!jM(n.attrs,k,e)){if(dl(s))return!1;b=!0}continue}const ie=yR(8&s?"class":T,d,_R(n),e);if(-1===ie){if(dl(s))return!1;b=!0;continue}if(""!==k){let Ie;Ie=ie>f?"":d[ie+1].toLowerCase();const xe=8&s?Ie:null;if(xe&&-1!==gR(xe,k,0)||2&s&&k!==Ie){if(dl(s))return!1;b=!0}}}}else{if(!b&&!dl(s)&&!dl(T))return!1;if(b&&dl(T))continue;b=!1,s=T|1&s}}return dl(s)||b}function dl(n){return 0==(1&n)}function yR(n,t,e,s){if(null===t)return-1;let d=0;if(s||!e){let f=!1;for(;d<t.length;){const b=t[d];if(b===n)return d;if(3===b||6===b)f=!0;else{if(1===b||2===b){let E=t[++d];for(;"string"==typeof E;)E=t[++d];continue}if(4===b)break;if(0===b){d+=4;continue}}d+=f?1:2}return-1}return function DC(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const s=n[e];if("number"==typeof s)return-1;if(s===t)return e;e++}return-1}(t,n)}function nh(n,t,e=!1){for(let s=0;s<t.length;s++)if(AR(n,t[s],e))return!0;return!1}function OC(n,t){e:for(let e=0;e<t.length;e++){const s=t[e];if(n.length===s.length){for(let d=0;d<n.length;d++)if(n[d]!==s[d])continue e;return!0}}return!1}function kC(n,t){return n?":not("+t.trim()+")":t}function PC(n){let t=n[0],e=1,s=2,d="",f=!1;for(;e<n.length;){let b=n[e];if("string"==typeof b)if(2&s){const E=n[++e];d+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&s?d+="."+b:4&s&&(d+=" "+b);else""!==d&&!dl(b)&&(t+=kC(f,d),d=""),s=b,f=f||!dl(s);e++}return""!==d&&(t+=kC(f,d)),t}const ni={};function Ft(n){MC(Ri(),Rn(),Ws()+n,!1)}function MC(n,t,e,s){if(!s)if(3==(3&t[2])){const f=n.preOrderCheckHooks;null!==f&&xv(t,f,e)}else{const f=n.preOrderHooks;null!==f&&kl(t,f,0,e)}Wh(e)}function mA(n,t=null,e=null,s){const d=CR(n,t,e,s);return d.resolveInjectorInitializers(),d}function CR(n,t=null,e=null,s,d=new Set){const f=[e||li,NM(n)];return s=s||("object"==typeof n?void 0:Eo(n)),new Jr(f,t||Ds(),s||null,d)}let Uc=(()=>{class n{static create(e,s){if(Array.isArray(e))return mA({name:""},s,e,"");{const d=e.name??"";return mA({name:d},e.parent,e.providers,d)}}}return n.THROW_IF_NOT_FOUND=lo,n.NULL=new iR,n.\u0275prov=yr({token:n,providedIn:"any",factory:()=>cn(rR)}),n.__NG_ELEMENT_ID__=-1,n})();function yt(n,t=jr.Default){const e=Rn();return null===e?cn(n,t):Uv(cc(),e,ur(n),t)}function AA(){throw new Error("invalid")}function DR(n,t){const e=n.contentQueries;if(null!==e)for(let s=0;s<e.length;s+=2){const d=e[s],f=e[s+1];if(-1!==f){const b=n.data[f];Gh(d),b.contentQueries(2,t[f],f)}}}function Rm(n,t,e,s,d,f,b,E,T,k,Q){const ie=t.blueprint.slice();return ie[0]=d,ie[2]=76|s,(null!==Q||n&&1024&n[2])&&(ie[2]|=1024),wE(ie),ie[3]=ie[15]=n,ie[8]=e,ie[10]=b||n&&n[10],ie[11]=E||n&&n[11],ie[12]=T||n&&n[12]||null,ie[9]=k||n&&n[9]||null,ie[6]=f,ie[20]=function k1(){return eC++}(),ie[21]=Q,ie[16]=2==t.type?n[16]:ie,ie}function af(n,t,e,s,d){let f=n.data[t];if(null===f)f=function yA(n,t,e,s,d){const f=iM(),b=h1(),T=n.data[t]=function PR(n,t,e,s,d,f){return{type:e,index:s,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?f:f&&f.parent,e,t,s,d);return null===n.firstChild&&(n.firstChild=T),null!==f&&(b?null==f.child&&null!==T.parent&&(f.child=T):null===f.next&&(f.next=T)),T}(n,t,e,s,d),function oM(){return ti.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=e,f.value=s,f.attrs=d;const b=function Qg(){const n=ti.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();f.injectorIndex=null===b?-1:b.injectorIndex}return Up(f,!0),f}function Dm(n,t,e,s){if(0===e)return-1;const d=t.length;for(let f=0;f<e;f++)t.push(s),n.blueprint.push(s),n.data.push(null);return d}function EA(n,t,e){rm(t);try{const s=n.viewQuery;null!==s&&t2(1,s,e);const d=n.template;null!==d&&kR(n,t,d,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&DR(n,t),n.staticViewQueries&&t2(2,n.viewQuery,e);const f=n.components;null!==f&&function OR(n,t){for(let e=0;e<t.length;e++)db(n,t[e])}(t,f)}catch(s){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),s}finally{t[2]&=-5,om()}}function cf(n,t,e,s){const d=t[2];if(128!=(128&d)){rm(t);try{wE(t),function tm(n){return ti.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&kR(n,t,e,2,s);const b=3==(3&d);if(b){const k=n.preOrderCheckHooks;null!==k&&xv(t,k,null)}else{const k=n.preOrderHooks;null!==k&&kl(t,k,0,null),x0(t,0)}if(function e2(n){for(let t=x1(n);null!==t;t=Yv(t)){if(!t[2])continue;const e=t[9];for(let s=0;s<e.length;s++){const d=e[s],f=d[3];0==(512&d[2])&&TE(f,1),d[2]|=512}}}(t),function ub(n){for(let t=x1(n);null!==t;t=Yv(t))for(let e=10;e<t.length;e++){const s=t[e],d=s[1];Pv(s)&&cf(d,s,d.template,s[8])}}(t),null!==n.contentQueries&&DR(n,t),b){const k=n.contentCheckHooks;null!==k&&xv(t,k)}else{const k=n.contentHooks;null!==k&&kl(t,k,1),x0(t,1)}!function jC(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let s=0;s<e.length;s++){const d=e[s];if(d<0)Wh(~d);else{const f=d,b=e[++s],E=e[++s];m1(b,f),E(2,t[f])}}}finally{Wh(-1)}}(n,t);const E=n.components;null!==E&&function QC(n,t){for(let e=0;e<t.length;e++)A_(n,t[e])}(t,E);const T=n.viewQuery;if(null!==T&&t2(2,T,s),b){const k=n.viewCheckHooks;null!==k&&xv(t,k)}else{const k=n.viewHooks;null!==k&&kl(t,k,2),x0(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,TE(t[3],-1))}finally{om()}}}function kR(n,t,e,s,d){const f=Ws(),b=2&s;try{Wh(-1),b&&t.length>22&&MC(n,t,22,!1),e(s,d)}finally{Wh(f)}}function ob(n,t,e){if(b0(t)){const d=t.directiveEnd;for(let f=t.directiveStart;f<d;f++){const b=n.data[f];b.contentQueries&&b.contentQueries(1,e[f],f)}}}function HC(n,t,e){!D0()||(function $M(n,t,e,s){const d=e.directiveStart,f=e.directiveEnd;n.firstCreatePass||kc(e,t),Ra(s,t);const b=e.initialInputs;for(let E=d;E<f;E++){const T=n.data[E],k=Ol(T);k&&MR(t,e,T);const Q=Ts(t,n,E,e);Ra(Q,t),null!==b&&NR(0,E-d,Q,T,0,b),k&&(Ca(e.index,t)[8]=Q)}}(n,t,e,da(e,t)),64==(64&e.flags)&&JM(n,t,e))}function __(n,t,e=da){const s=t.localNames;if(null!==s){let d=t.index+1;for(let f=0;f<s.length;f+=2){const b=s[f+1],E=-1===b?e(t,n):n[b];n[d++]=E}}}function sb(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=GC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function GC(n,t,e,s,d,f,b,E,T,k){const Q=22+s,ie=Q+d,Ie=function ab(n,t){const e=[];for(let s=0;s<t;s++)e.push(s<n?null:ni);return e}(Q,ie),xe="function"==typeof k?k():k;return Ie[1]={type:n,blueprint:Ie,template:e,queries:null,viewQuery:E,declTNode:t,data:Ie.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:T,consts:xe,incompleteFirstPass:!1}}function KC(n,t,e,s){const d=n2(t);null===e?d.push(s):(d.push(e),n.firstCreatePass&&$C(n).push(s,d.length-1))}function cb(n,t,e,s){for(let d in n)if(n.hasOwnProperty(d)){e=null===e?{}:e;const f=n[d];null===s?lb(e,t,d,f):s.hasOwnProperty(d)&&lb(e,t,s[d],f)}return e}function lb(n,t,e,s){n.hasOwnProperty(e)?n[e].push(t,s):n[e]=[t,s]}function pl(n,t,e,s,d,f,b,E){const T=da(t,e);let Q,k=t.inputs;!E&&null!=k&&(Q=k[s])?(r2(n,e,Q,s,d),SE(t)&&bA(e,t.index)):3&t.type&&(s=function zC(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(s),d=null!=b?b(d,t.value||"",s):d,f.setProperty(T,s,d))}function bA(n,t){const e=Ca(t,n);16&e[2]||(e[2]|=32)}function lf(n,t,e,s){let d=!1;if(D0()){const f=null===s?null:{"":-1},b=function j4(n,t){const e=n.directiveRegistry;let s=null,d=null;if(e)for(let f=0;f<e.length;f++){const b=e[f];if(nh(t,b.selectors,!1))if(s||(s=[]),Ol(b))if(null!==b.findHostDirectiveDefs){const E=[];d=d||new Map,b.findHostDirectiveDefs(b,E,d),s.unshift(...E,b),XM(n,t,E.length)}else s.unshift(b),XM(n,t,0);else d=d||new Map,b.findHostDirectiveDefs?.(b,s,d),s.push(b)}return null===s?null:[s,d]}(n,e);let E,T;null===b?E=T=null:[E,T]=b,null!==E&&(d=!0,YM(n,t,e,E,f,T)),f&&function Q4(n,t,e){if(t){const s=n.localNames=[];for(let d=0;d<t.length;d+=2){const f=e[t[d+1]];if(null==f)throw new un(-301,!1);s.push(t[d],f)}}}(e,s,f)}return e.mergedAttrs=Yu(e.mergedAttrs,e.attrs),d}function YM(n,t,e,s,d,f){for(let k=0;k<s.length;k++)NE(kc(e,t),n,s[k].type);!function H4(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,s.length);for(let k=0;k<s.length;k++){const Q=s[k];Q.providersResolver&&Q.providersResolver(Q)}let b=!1,E=!1,T=Dm(n,t,s.length,null);for(let k=0;k<s.length;k++){const Q=s[k];e.mergedAttrs=Yu(e.mergedAttrs,Q.hostAttrs),_F(n,e,t,T,Q),gF(T,Q,d),null!==Q.contentQueries&&(e.flags|=4),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(e.flags|=64);const ie=Q.type.prototype;!b&&(ie.ngOnChanges||ie.ngOnInit||ie.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),b=!0),!E&&(ie.ngOnChanges||ie.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),E=!0),T++}!function fF(n,t,e){const d=t.directiveEnd,f=n.data,b=t.attrs,E=[];let T=null,k=null;for(let Q=t.directiveStart;Q<d;Q++){const ie=f[Q],Ie=e?e.get(ie):null,qe=Ie?Ie.outputs:null;T=cb(ie.inputs,Q,T,Ie?Ie.inputs:null),k=cb(ie.outputs,Q,k,qe);const ft=null===T||null===b||_R(t)?null:ZM(T,Q,b);E.push(ft)}null!==T&&(T.hasOwnProperty("class")&&(t.flags|=8),T.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=E,t.inputs=T,t.outputs=k}(n,e,f)}function JM(n,t,e){const s=e.directiveStart,d=e.directiveEnd,f=e.index,b=function sM(){return ti.lFrame.currentDirectiveIndex}();try{Wh(f);for(let E=s;E<d;E++){const T=n.data[E],k=t[E];OE(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&mF(T,k)}}finally{Wh(-1),OE(b)}}function mF(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function XM(n,t,e){t.componentOffset=e,(n.components||(n.components=[])).push(t.index)}function gF(n,t,e){if(e){if(t.exportAs)for(let s=0;s<t.exportAs.length;s++)e[t.exportAs[s]]=n;Ol(t)&&(e[""]=n)}}function _F(n,t,e,s,d){n.data[s]=d;const f=d.factory||(d.factory=Bp(d.type)),b=new qo(f,Ol(d),yt);n.blueprint[s]=b,e[s]=b,function U4(n,t,e,s,d){const f=d.hostBindings;if(f){let b=n.hostBindingOpCodes;null===b&&(b=n.hostBindingOpCodes=[]);const E=~t.index;(function V4(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(b)!=E&&b.push(E),b.push(e,s,f)}}(n,t,s,Dm(n,e,d.hostVars,ni),d)}function MR(n,t,e){const s=da(t,n),d=sb(e),f=n[10],b=CA(n,Rm(n,d,null,e.onPush?32:16,s,t,f,f.createRenderer(s,e),null,null,null));n[t.index]=b}function Zu(n,t,e,s,d,f){const b=da(n,t);!function uf(n,t,e,s,d,f,b){if(null==f)n.removeAttribute(t,d,e);else{const E=null==b?oi(f):b(f,s||"",d);n.setAttribute(t,d,E,e)}}(t[11],b,f,n.value,e,s,d)}function NR(n,t,e,s,d,f){const b=f[t];if(null!==b){const E=s.setInput;for(let T=0;T<b.length;){const k=b[T++],Q=b[T++],ie=b[T++];null!==E?s.setInput(e,ie,k,Q):e[Q]=ie}}}function ZM(n,t,e){let s=null,d=0;for(;d<e.length;){const f=e[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(n.hasOwnProperty(f)){null===s&&(s=[]);const b=n[f];for(let E=0;E<b.length;E+=2)if(b[E]===t){s.push(f,b[E+1],e[d+1]);break}}d+=2}else d+=2;else d+=4}return s}function qC(n,t,e,s){return[n,!0,!1,t,null,0,s,e,null,null]}function A_(n,t){const e=Ca(t,n);if(Pv(e)){const s=e[1];48&e[2]?cf(s,e,s.template,e[8]):e[5]>0&&Us(e)}}function Us(n){for(let s=x1(n);null!==s;s=Yv(s))for(let d=10;d<s.length;d++){const f=s[d];if(Pv(f))if(512&f[2]){const b=f[1];cf(b,f,b.template,f[8])}else f[5]>0&&Us(f)}const e=n[1].components;if(null!==e)for(let s=0;s<e.length;s++){const d=Ca(e[s],n);Pv(d)&&d[5]>0&&Us(d)}}function db(n,t){const e=Ca(t,n),s=e[1];(function YC(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(s,e),EA(s,e,e[8])}function CA(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function IA(n){for(;n;){n[2]|=32;const t=qp(n);if(a1(n)&&!t)return n;n=t}return null}function y_(n,t,e,s=!0){const d=t[10];d.begin&&d.begin();try{cf(n,t,n.template,e)}catch(b){throw s&&JC(t,b),b}finally{d.end&&d.end()}}function t2(n,t,e){Gh(0),t(n,e)}function n2(n){return n[7]||(n[7]=[])}function $C(n){return n.cleanup||(n.cleanup=[])}function vF(n,t,e){return(null===n||Ol(n))&&(e=function R0(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(e[t.index])),e[11]}function JC(n,t){const e=n[9],s=e?e.get(gu,null):null;s&&s.handleError(t)}function r2(n,t,e,s,d){for(let f=0;f<e.length;){const b=e[f++],E=e[f++],T=t[b],k=n.data[b];null!==k.setInput?k.setInput(T,d,s,E):T[E]=d}}function LR(n,t,e){let s=e?n.styles:null,d=e?n.classes:null,f=0;if(null!==t)for(let b=0;b<t.length;b++){const E=t[b];"number"==typeof E?f=E:1==f?d=e1(d,E):2==f&&(s=e1(s,E+": "+t[++b]+";"))}e?n.styles=s:n.stylesWithoutHost=s,e?n.classes=d:n.classesWithoutHost=d}function BR(n,t,e,s,d=!1){for(;null!==e;){const f=t[e.index];if(null!==f&&s.push(ua(f)),Wo(f))for(let E=10;E<f.length;E++){const T=f[E],k=T[1].firstChild;null!==k&&BR(T[1],T,k,s)}const b=e.type;if(8&b)BR(n,t,e.child,s);else if(32&b){const E=Xu(e,t);let T;for(;T=E();)s.push(T)}else if(16&b){const E=j1(t,e);if(Array.isArray(E))s.push(...E);else{const T=qp(t[16]);BR(T[1],T,E,s,!0)}}e=d?e.projectionNext:e.next}return s}class pb{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return BR(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Wo(t)){const e=t[8],s=e?e.indexOf(this):-1;s>-1&&(Ml(t,s),zh(e,s))}this._attachedToViewContainer=!1}Jh(this._lView[1],this._lView)}onDestroy(t){KC(this._lView[1],this._lView,null,t)}markForCheck(){IA(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){y_(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new un(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $p(n,t){o_(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new un(902,!1);this._appRef=t}}class G4 extends pb{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;y_(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class FR extends qi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=zi(t);return new wA(e,this.ngModule)}}function AF(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class UR{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,s){s=eu(s);const d=this.injector.get(t,Nl,s);return d!==Nl||e===Nl?d:this.parentInjector.get(t,e,s)}}class wA extends xM{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function bR(n){return n.map(PC).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return AF(this.componentDef.inputs)}get outputs(){return AF(this.componentDef.outputs)}create(t,e,s,d){let f=(d=d||this.ngModule)instanceof tp?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const b=f?new UR(t,f):t,E=b.get(Im,null);if(null===E)throw new un(407,!1);const T=b.get(uR,null),k=E.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",ie=s?function WC(n,t,e){return n.selectRootElement(t,e===tu.ShadowDom)}(k,s,this.componentDef.encapsulation):Jd(k,Q,function yF(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(Q)),Ie=this.componentDef.onPush?288:272,xe=GC(0,null,null,1,0,null,null,null,null,null),qe=Rm(null,xe,null,Ie,null,null,E,k,T,b,null);let ft,Qt;rm(qe);try{const Kt=this.componentDef;let pn,Vt=null;Kt.findHostDirectiveDefs?(pn=[],Vt=new Map,Kt.findHostDirectiveDefs(Kt,pn,Vt),pn.push(Kt)):pn=[Kt];const zn=function VR(n,t){const e=n[1];return n[22]=t,af(e,22,2,"#host",null)}(qe,ie),pi=function jR(n,t,e,s,d,f,b,E){const T=d[1];!function s2(n,t,e,s){for(const d of n)t.mergedAttrs=Yu(t.mergedAttrs,d.hostAttrs);null!==t.mergedAttrs&&(LR(t,t.mergedAttrs,!0),null!==e&&Xh(s,e,t))}(s,n,t,b);const k=f.createRenderer(t,e),Q=Rm(d,sb(e),null,e.onPush?32:16,d[n.index],n,f,k,E||null,null,null);return T.firstCreatePass&&XM(T,n,s.length-1),CA(d,Q),d[n.index]=Q}(zn,ie,Kt,pn,qe,E,k);Qt=Fp(xe,22),ie&&function ZC(n,t,e,s){if(s)ro(n,e,["ng-version",dR.full]);else{const{attrs:d,classes:f}=function Ll(n){const t=[],e=[];let s=1,d=2;for(;s<n.length;){let f=n[s];if("string"==typeof f)2===d?""!==f&&t.push(f,n[++s]):8===d&&e.push(f);else{if(!dl(d))break;d=f}s++}return{attrs:t,classes:e}}(t.selectors[0]);d&&ro(n,e,d),f&&f.length>0&&tA(n,e,f.join(" "))}}(k,Kt,ie,s),void 0!==e&&function E_(n,t,e){const s=n.projection=[];for(let d=0;d<t.length;d++){const f=e[d];s.push(null!=f?Array.from(f):null)}}(Qt,this.ngContentSelectors,e),ft=function XC(n,t,e,s,d,f){const b=cc(),E=d[1],T=da(b,d);YM(E,d,b,e,null,s);for(let Q=0;Q<e.length;Q++)Ra(Ts(d,E,b.directiveStart+Q,b),d);JM(E,d,b),T&&Ra(T,d);const k=Ts(d,E,b.directiveStart+b.componentOffset,b);if(n[8]=d[8]=k,null!==f)for(const Q of f)Q(k,t);return ob(E,b,n),k}(pi,Kt,pn,Vt,qe,[QR]),EA(xe,qe,null)}finally{om()}return new hb(this.componentType,ft,Cm(Qt,qe),qe,Qt)}}class hb extends Uo{constructor(t,e,s,d,f){super(),this.location=s,this._rootLView=d,this._tNode=f,this.instance=e,this.hostView=this.changeDetectorRef=new G4(d),this.componentType=t}setInput(t,e){const s=this._tNode.inputs;let d;if(null!==s&&(d=s[t])){const f=this._rootLView;r2(f[1],f,d,t,e),bA(f,this._tNode.index)}}get injector(){return new qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function QR(){const n=cc();zo(Rn()[1],n)}function Or(n){let t=function fb(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const s=[n];for(;t;){let d;if(Ol(n))d=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new un(903,!1);d=t.\u0275dir}if(d){if(e){s.push(d);const b=n;b.inputs=tI(n.inputs),b.declaredInputs=tI(n.declaredInputs),b.outputs=tI(n.outputs);const E=d.hostBindings;E&&km(n,E);const T=d.viewQuery,k=d.contentQueries;if(T&&nI(n,T),k&&mb(n,k),qf(n.inputs,d.inputs),qf(n.declaredInputs,d.declaredInputs),qf(n.outputs,d.outputs),Ol(d)&&d.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let b=0;b<f.length;b++){const E=f[b];E&&E.ngInherit&&E(n),E===Or&&(e=!1)}}t=Object.getPrototypeOf(t)}!function eI(n){let t=0,e=null;for(let s=n.length-1;s>=0;s--){const d=n[s];d.hostVars=t+=d.hostVars,d.hostAttrs=Yu(d.hostAttrs,e=Yu(e,d.hostAttrs))}}(s)}function tI(n){return n===Qd?{}:n===li?[]:n}function nI(n,t){const e=n.viewQuery;n.viewQuery=e?(s,d)=>{t(s,d),e(s,d)}:t}function mb(n,t){const e=n.contentQueries;n.contentQueries=e?(s,d,f)=>{t(s,d,f),e(s,d,f)}:t}function km(n,t){const e=n.hostBindings;n.hostBindings=e?(s,d)=>{t(s,d),e(s,d)}:t}let DA=null;function ih(){if(!DA){const n=Lo.Symbol;if(n&&n.iterator)DA=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const s=t[e];"entries"!==s&&"size"!==s&&Map.prototype[s]===Map.prototype.entries&&(DA=s)}}}return DA}function Mm(n){return!!gb(n)&&(Array.isArray(n)||!(n instanceof Map)&&ih()in n)}function gb(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function fc(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function io(n,t,e,s){const d=Rn();return fc(d,nm(),t)&&(Ri(),Zu(bo(),d,n,t,e,s)),io}function b_(n,t,e,s){return fc(n,nm(),e)?t+oi(e)+s:ni}function Kn(n,t,e,s,d,f,b,E){const T=Rn(),k=Ri(),Q=n+22,ie=k.firstCreatePass?function SF(n,t,e,s,d,f,b,E,T){const k=t.consts,Q=af(t,n,4,b||null,zu(k,E));lf(t,e,Q,zu(k,T)),zo(t,Q);const ie=Q.tViews=GC(2,Q,s,d,f,t.directiveRegistry,t.pipeRegistry,null,t.schemas,k);return null!==t.queries&&(t.queries.template(t,Q),ie.queries=t.queries.embeddedTView(Q)),Q}(Q,k,T,t,e,s,d,f,b):k.data[Q];Up(ie,!1);const Ie=T[11].createComment("");Xv(k,T,Ie,ie),Ra(Ie,T),CA(T,T[Q]=qC(Ie,T,Ie,ie)),Vg(ie)&&HC(k,T,ie),null!=b&&__(T,ie,E)}function ah(n){return kv(function qu(){return ti.lFrame.contextLView}(),22+n)}function fn(n,t,e){const s=Rn();return fc(s,nm(),t)&&pl(Ri(),bo(),s,n,t,s[11],e,!1),fn}function Ab(n,t,e,s,d){const b=d?"class":"style";r2(n,e,t.inputs[b],b,s)}function jt(n,t,e,s){const d=Rn(),f=Ri(),b=22+n,E=d[11],T=d[b]=Jd(E,t,function cM(){return ti.lFrame.currentNamespace}()),k=f.firstCreatePass?function sI(n,t,e,s,d,f,b){const E=t.consts,k=af(t,n,2,d,zu(E,f));return lf(t,e,k,zu(E,b)),null!==k.attrs&&LR(k,k.attrs,!1),null!==k.mergedAttrs&&LR(k,k.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,k),k}(b,f,d,0,t,e,s):f.data[b];return Up(k,!0),Xh(E,T,k),32!=(32&k.flags)&&Xv(f,d,T,k),0===function rM(){return ti.lFrame.elementDepthCount}()&&Ra(T,d),function p1(){ti.lFrame.elementDepthCount++}(),Vg(k)&&(HC(f,d,k),ob(f,k,d)),null!==s&&__(d,k),jt}function Yt(){let n=cc();h1()?O0():(n=n.parent,Up(n,!1));const t=n;!function Nv(){ti.lFrame.elementDepthCount--}();const e=Ri();return e.firstCreatePass&&(zo(e,n),b0(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function PE(n){return 0!=(8&n.flags)}(t)&&Ab(e,t,Rn(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function zs(n){return 0!=(16&n.flags)}(t)&&Ab(e,t,Rn(),t.stylesWithoutHost,!1),Yt}function Ui(n,t,e,s){return jt(n,t,e,s),Yt(),Ui}function za(n,t,e){const s=Rn(),d=Ri(),f=n+22,b=d.firstCreatePass?function l2(n,t,e,s,d){const f=t.consts,b=zu(f,s),E=af(t,n,8,"ng-container",b);return null!==b&&LR(E,b,!0),lf(t,e,E,zu(f,d)),null!==t.queries&&t.queries.elementStart(t,E),E}(f,d,s,t,e):d.data[f];Up(b,!0);const E=s[f]=s[11].createComment("");return Xv(d,s,E,b),Ra(E,s),Vg(b)&&(HC(d,s,b),ob(d,b,s)),null!=e&&__(s,b),za}function Da(){let n=cc();const t=Ri();return h1()?O0():(n=n.parent,Up(n,!1)),t.firstCreatePass&&(zo(t,n),b0(n)&&t.queries.elementEnd(n)),Da}function yb(n,t,e){return za(n,t,e),Da(),yb}function qa(){return Rn()}function Eb(n){return!!n&&"function"==typeof n.then}const u2=function hf(n){return!!n&&"function"==typeof n.subscribe};function eo(n,t,e,s){const d=Rn(),f=Ri(),b=cc();return ZR(f,d,d[11],b,n,t,s),eo}function bb(n,t){const e=cc(),s=Rn(),d=Ri();return ZR(d,s,vF(P0(d.data),e,s),e,n,t),bb}function ZR(n,t,e,s,d,f,b){const E=Vg(s),k=n.firstCreatePass&&$C(n),Q=t[8],ie=n2(t);let Ie=!0;if(3&s.type||b){const ft=da(s,t),Qt=b?b(ft):ft,Kt=ie.length,pn=b?zn=>b(ua(zn[s.index])):s.index;let Vt=null;if(!b&&E&&(Vt=function d2(n,t,e,s){const d=n.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const b=d[f];if(b===e&&d[f+1]===s){const E=t[7],T=d[f+2];return E.length>T?E[T]:null}"string"==typeof b&&(f+=2)}return null}(n,t,d,s.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=f,Vt.__ngLastListenerFn__=f,Ie=!1;else{f=NA(s,t,Q,f,!1);const zn=e.listen(Qt,d,f);ie.push(f,zn),k&&k.push(d,pn,Kt,Kt+1)}}else f=NA(s,t,Q,f,!1);const xe=s.outputs;let qe;if(Ie&&null!==xe&&(qe=xe[d])){const ft=qe.length;if(ft)for(let Qt=0;Qt<ft;Qt+=2){const pi=t[qe[Qt]][qe[Qt+1]].subscribe(f),hi=ie.length;ie.push(f,pi),k&&k.push(d,s.index,hi,-(hi+1))}}}function eD(n,t,e,s){try{return!1!==e(s)}catch(d){return JC(n,d),!1}}function NA(n,t,e,s,d){return function f(b){if(b===Function)return s;IA(n.componentOffset>-1?Ca(n.index,t):t);let T=eD(t,0,s,b),k=f.__ngNextListenerFn__;for(;k;)T=eD(t,0,k,b)&&T,k=k.__ngNextListenerFn__;return d&&!1===T&&(b.preventDefault(),b.returnValue=!1),T}}function Cr(n=1){return function v1(n){return(ti.lFrame.contextLView=function Ha(n,t){for(;n>0;)t=t[15],n--;return t}(n,ti.lFrame.contextLView))[8]}(n)}function C_(n,t){let e=null;const s=function hA(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let d=0;d<t.length;d++){const f=t[d];if("*"!==f){if(null===s?nh(n,f,!0):OC(s,f))return d}else e=d}return e}function Vc(n){const t=Rn()[16][6];if(!t.projection){const s=t.projection=pm(n?n.length:1,null),d=s.slice();let f=t.child;for(;null!==f;){const b=n?C_(f,n):0;null!==b&&(d[b]?d[b].projectionNext=f:s[b]=f,d[b]=f),f=f.next}}}function oo(n,t=0,e){const s=Rn(),d=Ri(),f=af(d,22+n,16,null,e||null);null===f.projection&&(f.projection=t),O0(),32!=(32&f.flags)&&function pC(n,t,e){KE(t[11],0,t,e,GE(n,e,t),WE(e.parent||t[6],e,t))}(d,s,f)}function LA(n,t){return n<<17|t<<2}function Os(n){return n>>17&32767}function BA(n){return 2|n}function ch(n){return(131068&n)>>2}function R_(n,t){return-131069&n|t<<2}function ff(n){return 1|n}function D_(n,t,e,s,d){const f=n[e+1],b=null===t;let E=s?Os(f):ch(f),T=!1;for(;0!==E&&(!1===T||b);){const Q=n[E+1];h2(n[E],t)&&(T=!0,n[E+1]=s?ff(Q):BA(Q)),E=s?Os(Q):ch(Q)}T&&(n[e+1]=s?BA(f):ff(f))}function h2(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&hm(n,t)>=0}const ds={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function iD(n){return n.substring(ds.key,ds.keyEnd)}function sD(n,t){const e=ds.textEnd;return e===t?-1:(t=ds.keyEnd=function lh(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,ds.key=t,e),mf(n,t,e))}function mf(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function gf(n,t,e){return sp(n,t,e,!1),gf}function is(n,t){return sp(n,t,null,!0),is}function vu(n,t){for(let e=function oD(n){return function ps(n){ds.key=0,ds.keyEnd=0,ds.value=0,ds.valueEnd=0,ds.textEnd=n.length}(n),sD(n,mf(n,0,ds.textEnd))}(t);e>=0;e=sD(t,e))rl(n,iD(t),!0)}function sp(n,t,e,s){const d=Rn(),f=Ri(),b=jp(2);f.firstUpdatePass&&m2(f,n,b,s),t!==ni&&fc(d,b,t)&&_2(f,f.data[Ws()],d,d[11],n,d[b+1]=function pD(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=Eo(al(n)))),n}(t,e),s,b)}function lD(n,t){return t>=n.expandoStartIndex}function m2(n,t,e,s){const d=n.data;if(null===d[e+1]){const f=d[Ws()],b=lD(n,e);A2(f,s)&&null===t&&!b&&(t=!1),t=function wF(n,t,e,s){const d=P0(n);let f=s?t.residualClasses:t.residualStyles;if(null===d)0===(s?t.classBindings:t.styleBindings)&&(e=VA(e=fI(null,n,t,e,s),t.attrs,s),f=null);else{const b=t.directiveStylingLast;if(-1===b||n[b]!==d)if(e=fI(d,n,t,e,s),null===f){let T=function pI(n,t,e){const s=e?t.classBindings:t.styleBindings;if(0!==ch(s))return n[Os(s)]}(n,t,s);void 0!==T&&Array.isArray(T)&&(T=fI(null,n,t,T[1],s),T=VA(T,t.attrs,s),function hI(n,t,e,s){n[Os(e?t.classBindings:t.styleBindings)]=s}(n,t,s,T))}else f=function g2(n,t,e){let s;const d=t.directiveEnd;for(let f=1+t.directiveStylingLast;f<d;f++)s=VA(s,n[f].hostAttrs,e);return VA(s,t.attrs,e)}(n,t,s)}return void 0!==f&&(s?t.residualClasses=f:t.residualStyles=f),e}(d,f,t,s),function uI(n,t,e,s,d,f){let b=f?t.classBindings:t.styleBindings,E=Os(b),T=ch(b);n[s]=e;let Q,k=!1;if(Array.isArray(e)){const ie=e;Q=ie[1],(null===Q||hm(ie,Q)>0)&&(k=!0)}else Q=e;if(d)if(0!==T){const Ie=Os(n[E+1]);n[s+1]=LA(Ie,E),0!==Ie&&(n[Ie+1]=R_(n[Ie+1],s)),n[E+1]=function nD(n,t){return 131071&n|t<<17}(n[E+1],s)}else n[s+1]=LA(E,0),0!==E&&(n[E+1]=R_(n[E+1],s)),E=s;else n[s+1]=LA(T,0),0===E?E=s:n[T+1]=R_(n[T+1],s),T=s;k&&(n[s+1]=BA(n[s+1])),D_(n,Q,s,!0),D_(n,Q,s,!1),function rD(n,t,e,s,d){const f=d?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof t&&hm(f,t)>=0&&(e[s+1]=ff(e[s+1]))}(t,Q,n,s,f),b=LA(E,T),f?t.classBindings=b:t.styleBindings=b}(d,f,t,e,b,s)}}function fI(n,t,e,s,d){let f=null;const b=e.directiveEnd;let E=e.directiveStylingLast;for(-1===E?E=e.directiveStart:E++;E<b&&(f=t[E],s=VA(s,f.hostAttrs,d),f!==n);)E++;return null!==n&&(e.directiveStylingLast=E),s}function VA(n,t,e){const s=e?1:2;let d=-1;if(null!==t)for(let f=0;f<t.length;f++){const b=t[f];"number"==typeof b?d=b:d===s&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),rl(n,b,!!e||t[++f]))}return void 0===n?null:n}function _2(n,t,e,s,d,f,b,E){if(!(3&t.type))return;const T=n.data,k=T[E+1],Q=function FA(n){return 1==(1&n)}(k)?v2(T,t,e,d,ch(k),b):void 0;ap(Q)||(ap(f)||function T_(n){return 2==(2&n)}(k)&&(f=v2(T,null,e,d,E,b)),function fC(n,t,e,s,d){if(t)d?n.addClass(e,s):n.removeClass(e,s);else{let f=-1===s.indexOf("-")?void 0:Mc.DashCase;null==d?n.removeStyle(e,s,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Mc.Important),n.setStyle(e,s,d,f))}}(s,b,jg(Ws(),e),d,f))}function v2(n,t,e,s,d,f){const b=null===t;let E;for(;d>0;){const T=n[d],k=Array.isArray(T),Q=k?T[1]:T,ie=null===Q;let Ie=e[d+1];Ie===ni&&(Ie=ie?li:void 0);let xe=ie?xE(Ie,s):Q===s?Ie:void 0;if(k&&!ap(xe)&&(xe=xE(T,s)),ap(xe)&&(E=xe,b))return E;const qe=n[d+1];d=b?Os(qe):ch(qe)}if(null!==t){let T=f?t.residualClasses:t.residualStyles;null!=T&&(E=xE(T,s))}return E}function ap(n){return void 0!==n}function A2(n,t){return 0!=(n.flags&(t?8:16))}function bn(n,t=""){const e=Rn(),s=Ri(),d=n+22,f=s.firstCreatePass?af(s,d,1,t,null):s.data[d],b=e[d]=function Yp(n,t){return n.createText(t)}(e[11],t);Xv(s,e,b,f),Up(f,!1)}function td(n){return _i("",n,""),td}function _i(n,t,e){const s=Rn(),d=b_(s,n,t,e);return d!==ni&&function Om(n,t,e){const s=jg(t,n);!function iC(n,t,e){n.setValue(t,e)}(n[11],s,e)}(s,Ws(),d),_i}function gD(n,t,e){!function Bl(n,t,e,s){const d=Ri(),f=jp(2);d.firstUpdatePass&&m2(d,null,f,s);const b=Rn();if(e!==ni&&fc(b,f,e)){const E=d.data[Ws()];if(A2(E,s)&&!lD(d,f)){let T=s?E.classesWithoutHost:E.stylesWithoutHost;null!==T&&(e=e1(T,e||"")),Ab(d,E,b,e,s)}else!function dD(n,t,e,s,d,f,b,E){d===ni&&(d=li);let T=0,k=0,Q=0<d.length?d[0]:null,ie=0<f.length?f[0]:null;for(;null!==Q||null!==ie;){const Ie=T<d.length?d[T+1]:void 0,xe=k<f.length?f[k+1]:void 0;let ft,qe=null;Q===ie?(T+=2,k+=2,Ie!==xe&&(qe=ie,ft=xe)):null===ie||null!==Q&&Q<ie?(T+=2,qe=Q):(k+=2,qe=ie,ft=xe),null!==qe&&_2(n,t,e,s,qe,ft,b,E),Q=T<d.length?d[T]:null,ie=k<f.length?f[k]:null}}(d,E,b,b[11],b[f+1],b[f+1]=function uD(n,t,e){if(null==e||""===e)return li;const s=[],d=al(e);if(Array.isArray(d))for(let f=0;f<d.length;f++)n(s,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&n(s,f,d[f]);else"string"==typeof d&&t(s,d);return s}(n,t,e),s,f)}}(rl,vu,b_(Rn(),n,t,e),!0)}function kb(n,t,e){const s=Rn();return fc(s,nm(),t)&&pl(Ri(),bo(),s,n,t,s[11],e,!0),kb}function bD(n,t,e){const s=Rn();if(fc(s,nm(),t)){const f=Ri(),b=bo();pl(f,b,s,n,t,vF(P0(f.data),b,s),e,!0)}return bD}const jc="en-US";let CD=jc;function Wm(n,t,e,s,d){if(n=ur(n),Array.isArray(n))for(let f=0;f<n.length;f++)Wm(n[f],t,e,s,d);else{const f=Ri(),b=Rn();let E=hu(n)?n:ur(n.provide),T=th(n);const k=cc(),Q=1048575&k.providerIndexes,ie=k.directiveStart,Ie=k.providerIndexes>>20;if(hu(n)||!n.multi){const xe=new qo(T,d,yt),qe=sy(E,t,d?Q:Q+Ie,ie);-1===qe?(NE(kc(k,b),f,E),x_(f,n,t.length),t.push(E),k.directiveStart++,k.directiveEnd++,d&&(k.providerIndexes+=1048576),e.push(xe),b.push(xe)):(e[qe]=xe,b[qe]=xe)}else{const xe=sy(E,t,Q+Ie,ie),qe=sy(E,t,Q,Q+Ie),ft=xe>=0&&e[xe],Qt=qe>=0&&e[qe];if(d&&!Qt||!d&&!ft){NE(kc(k,b),f,E);const Kt=function UD(n,t,e,s,d){const f=new qo(n,e,yt);return f.multi=[],f.index=t,f.componentProviders=0,kI(f,d,s&&!e),f}(d?sd:Km,e.length,d,s,T);!d&&Qt&&(e[qe].providerFactory=Kt),x_(f,n,t.length,0),t.push(E),k.directiveStart++,k.directiveEnd++,d&&(k.providerIndexes+=1048576),e.push(Kt),b.push(Kt)}else x_(f,n,xe>-1?xe:qe,kI(e[d?qe:xe],T,!d&&s));!d&&s&&Qt&&e[qe].componentProviders++}}}function x_(n,t,e,s){const d=hu(t),f=function u_(n){return!!n.useClass}(t);if(d||f){const T=(f?ur(t.useClass):t).prototype.ngOnDestroy;if(T){const k=n.destroyHooks||(n.destroyHooks=[]);if(!d&&t.multi){const Q=k.indexOf(e);-1===Q?k.push(e,[s,T]):k[Q+1].push(s,T)}else k.push(e,T)}}}function kI(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function sy(n,t,e,s){for(let d=e;d<s;d++)if(t[d]===n)return d;return-1}function Km(n,t,e,s){return FD(this.multi,[])}function sd(n,t,e,s){const d=this.multi;let f;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=Ts(e,e[1],this.providerFactory.index,s);f=E.slice(0,b),FD(d,f);for(let T=b;T<E.length;T++)f.push(E[T])}else f=[],FD(d,f);return f}function FD(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function po(n,t=[]){return e=>{e.providersResolver=(s,d)=>function oy(n,t,e){const s=Ri();if(s.firstCreatePass){const d=Ol(n);Wm(e,s.data,s.blueprint,d,!0),Wm(t,s.data,s.blueprint,d,!1)}}(s,d?d(n):n,t)}}class zm{}class VD{}class ml extends zm{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new FR(this);const s=function tl(n,t){const e=n[o1]||null;if(!e&&!0===t)throw new Error(`Type ${Eo(n)} does not have '\u0275mod' property.`);return e}(t);this._bootstrapComponents=function xl(n){return n instanceof Function?n():n}(s.bootstrap),this._r3Injector=CR(t,e,[{provide:zm,useValue:this},{provide:qi,useValue:this.componentFactoryResolver}],Eo(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Vb extends VD{constructor(t){super(),this.moduleType=t}create(t){return new ml(this.moduleType,t)}}function H2(n,t,e,s,d,f){const b=t+e;return fc(n,b,d)?function ip(n,t,e){return n[t]=e}(n,b+1,f?s.call(f,d):s(d)):function ly(n,t){const e=n[t];return e===ni?void 0:e}(n,b+1)}function JD(n,t,e){const s=n+22,d=Rn(),f=kv(d,s);return function $m(n,t){return n[1].data[t].pure}(d,s)?H2(d,function lc(){const n=ti.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}(),t,f.transform,e,f):f.transform(e)}function py(n){return t=>{setTimeout(n,void 0,t)}}const Yi=class dy extends Et{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,s){let d=t,f=e||(()=>null),b=s;if(t&&"object"==typeof t){const T=t;d=T.next?.bind(T),f=T.error?.bind(T),b=T.complete?.bind(T)}this.__isAsync&&(f=py(f),d&&(d=py(d)),b&&(b=py(b)));const E=super.subscribe({next:d,error:f,complete:b});return t instanceof j&&t.add(E),E}};function XD(){return this._results[ih()]()}class Su{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=ih(),s=Su.prototype;s[e]||(s[e]=XD)}get changes(){return this._changes||(this._changes=new Yi)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const s=this;s.dirty=!1;const d=Pc(t);(this._changesDetected=!function S1(n,t,e){if(n.length!==t.length)return!1;for(let s=0;s<n.length;s++){let d=n[s],f=t[s];if(e&&(d=e(d),f=e(f)),f!==d)return!1}return!0}(s._results,d,e))&&(s._results=d,s.length=d.length,s.last=d[this.length-1],s.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let _l=(()=>{class n{}return n.__NG_ELEMENT_ID__=fh,n})();const BI=_l,K2=class extends BI{constructor(t,e,s){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=s}createEmbeddedView(t,e){const s=this._declarationTContainer.tViews,d=Rm(this._declarationLView,s,t,16,null,s.declTNode,null,null,null,null,e||null);d[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(d[19]=b.createEmbeddedView(s)),EA(s,d,t),new pb(d)}};function fh(){return Hb(cc(),Rn())}function Hb(n,t){return 4&n.type?new K2(t,n,Cm(n,t)):null}let vl=(()=>{class n{}return n.__NG_ELEMENT_ID__=ZD,n})();function ZD(){return Jm(cc(),Rn())}const U_=vl,up=class extends U_{constructor(t,e,s){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=s}get element(){return Cm(this._hostTNode,this._hostLView)}get injector(){return new qs(this._hostTNode,this._hostLView)}get parentInjector(){const t=Kg(this._hostTNode,this._hostLView);if(Ia(t)){const e=So(t,this._hostLView),s=Lv(t);return new qs(e[1].data[s+8],e)}return new qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=_c(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,s){let d,f;"number"==typeof s?d=s:null!=s&&(d=s.index,f=s.injector);const b=t.createEmbeddedView(e||{},f);return this.insert(b,d),b}createComponent(t,e,s,d,f){const b=t&&!function dc(n){return"function"==typeof n}(t);let E;if(b)E=e;else{const ie=e||{};E=ie.index,s=ie.injector,d=ie.projectableNodes,f=ie.environmentInjector||ie.ngModuleRef}const T=b?t:new wA(zi(t)),k=s||this.parentInjector;if(!f&&null==T.ngModule){const Ie=(b?k:this.parentInjector).get(tp,null);Ie&&(f=Ie)}const Q=T.create(k,d,void 0,f);return this.insert(Q.hostView,E),Q}insert(t,e){const s=t._lView,d=s[1];if(function qB(n){return Wo(n[3])}(s)){const Q=this.indexOf(t);if(-1!==Q)this.detach(Q);else{const ie=s[3],Ie=new up(ie,ie[6],ie[3]);Ie.detach(Ie.indexOf(t))}}const f=this._adjustIndex(e),b=this._lContainer;!function sC(n,t,e,s){const d=10+s,f=e.length;s>0&&(e[d-1][4]=t),s<f-10?(t[4]=e[d],dm(e,10+s,t)):(e.push(t),t[4]=null),t[3]=e;const b=t[17];null!==b&&e!==b&&function EM(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(b,t);const E=t[19];null!==E&&E.insertView(n),t[2]|=64}(d,s,b,f);const E=Zv(f,b),T=s[11],k=$v(T,b[7]);return null!==k&&function Pl(n,t,e,s,d,f){s[0]=d,s[6]=t,o_(n,s,e,1,d,f)}(d,b[6],T,s,k,E),t.attachToViewContainerRef(),dm(Gb(b),f,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=_c(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),s=Ml(this._lContainer,e);s&&(zh(Gb(this._lContainer),e),Jh(s[1],s))}detach(t){const e=this._adjustIndex(t,-1),s=Ml(this._lContainer,e);return s&&null!=zh(Gb(this._lContainer),e)?new pb(s):null}_adjustIndex(t,e=0){return t??this.length+e}};function _c(n){return n[8]}function Gb(n){return n[8]||(n[8]=[])}function Jm(n,t){let e;const s=t[n.index];if(Wo(s))e=s;else{let d;if(8&n.type)d=ua(s);else{const f=t[11];d=f.createComment("");const b=da(n,t);Bc(f,$v(f,b),d,function bM(n,t){return n.nextSibling(t)}(f,b),!1)}t[n.index]=e=qC(s,t,d,n),CA(t,e)}return new up(e,n,t)}class Wb{constructor(t){this.queryList=t,this.matches=null}clone(){return new Wb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const s=null!==t.contentQueries?t.contentQueries[0]:e.length,d=[];for(let f=0;f<s;f++){const b=e.getByIndex(f);d.push(this.queries[b.indexInDeclarationView].clone())}return new Cu(d)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Xm(t,e).matches&&this.queries[e].setDirty()}}class FI{constructor(t,e,s=null){this.predicate=t,this.flags=e,this.read=s}}class eO{constructor(t=[]){this.queries=t}elementStart(t,e){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let s=0;s<this.length;s++){const d=null!==e?e.length:0,f=this.getByIndex(s).embeddedTView(t,d);f&&(f.indexInDeclarationView=s,null!==e?e.push(f):e=[f])}return null!==e?new eO(e):null}template(t,e){for(let s=0;s<this.queries.length;s++)this.queries[s].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class tO{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new tO(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let s=t.parent;for(;null!==s&&8&s.type&&s.index!==e;)s=s.parent;return e===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const s=this.metadata.predicate;if(Array.isArray(s))for(let d=0;d<s.length;d++){const f=s[d];this.matchTNodeWithReadOption(t,e,WF(e,f)),this.matchTNodeWithReadOption(t,e,Gp(e,t,f,!1,!1))}else s===_l?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Gp(e,t,s,!1,!1))}matchTNodeWithReadOption(t,e,s){if(null!==s){const d=this.metadata.read;if(null!==d)if(d===Ni||d===vl||d===_l&&4&e.type)this.addMatch(e.index,-2);else{const f=Gp(e,t,d,!1,!1);null!==f&&this.addMatch(e.index,f)}else this.addMatch(e.index,s)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function WF(n,t){const e=n.localNames;if(null!==e)for(let s=0;s<e.length;s+=2)if(e[s]===t)return e[s+1];return null}function VI(n,t,e,s){return-1===e?function UI(n,t){return 11&n.type?Cm(n,t):4&n.type?Hb(n,t):null}(t,n):-2===e?function bf(n,t,e){return e===Ni?Cm(t,n):e===_l?Hb(t,n):e===vl?Jm(t,n):void 0}(n,t,s):Ts(n,n[1],e,t)}function V_(n,t,e,s){const d=t[19].queries[s];if(null===d.matches){const f=n.data,b=e.matches,E=[];for(let T=0;T<b.length;T+=2){const k=b[T];E.push(k<0?null:VI(t,f[k],b[T+1],e.metadata.read))}d.matches=E}return d.matches}function jI(n,t,e,s){const d=n.queries.getByIndex(e),f=d.matches;if(null!==f){const b=V_(n,t,d,e);for(let E=0;E<f.length;E+=2){const T=f[E];if(T>0)s.push(b[E/2]);else{const k=f[E+1],Q=t[-T];for(let ie=10;ie<Q.length;ie++){const Ie=Q[ie];Ie[17]===Ie[3]&&jI(Ie[1],Ie,k,s)}if(null!==Q[9]){const ie=Q[9];for(let Ie=0;Ie<ie.length;Ie++){const xe=ie[Ie];jI(xe[1],xe,k,s)}}}}}return s}function vo(n){const t=Rn(),e=Ri(),s=g1();Gh(s+1);const d=Xm(e,s);if(n.dirty&&function IE(n){return 4==(4&n[2])}(t)===(2==(2&d.metadata.flags))){if(null===d.matches)n.reset([]);else{const f=d.crossesNgTemplate?jI(e,t,s,[]):V_(e,t,d,s);n.reset(f,BM),n.notifyOnChanges()}return!0}return!1}function Hc(n,t,e){const s=Ri();s.firstCreatePass&&(rO(s,new FI(n,t,e),-1),2==(2&t)&&(s.staticViewQueries=!0)),z2(s,Rn(),t)}function Oa(n,t,e,s){const d=Ri();if(d.firstCreatePass){const f=cc();rO(d,new FI(t,e,s),f.index),function my(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(d,n),2==(2&e)&&(d.staticContentQueries=!0)}z2(d,Rn(),e)}function Ao(){return function nO(n,t){return n[19].queries[t].queryList}(Rn(),g1())}function z2(n,t,e){const s=new Su(4==(4&e));KC(n,t,s,s.destroy),null===t[19]&&(t[19]=new Cu),t[19].queries.push(new Wb(s))}function rO(n,t,e){null===n.queries&&(n.queries=new eO),n.queries.track(new tO(t,e))}function Xm(n,t){return n.queries.getByIndex(t)}function j_(n,t){return Hb(n,t)}function dp(...n){}const gO=new Qn("Application Initializer");let tS=(()=>{class n{constructor(e){this.appInits=e,this.resolve=dp,this.reject=dp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,d)=>{this.resolve=s,this.reject=d})}runInitializers(){if(this.initialized)return;const e=[],s=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Eb(f))e.push(f);else if(u2(f)){const b=new Promise((E,T)=>{f.subscribe({complete:E,error:T})});e.push(b)}}Promise.all(e).then(()=>{s()}).catch(d=>{this.reject(d)}),0===e.length&&s(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(cn(gO,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const H_=new Qn("AppId",{providedIn:"root",factory:function qI(){return`${nS()}${nS()}${nS()}`}});function nS(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _O=new Qn("Platform Initializer"),rS=new Qn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sN=new Qn("appBootstrapListener"),ld=new Qn("AnimationModuleType"),ud=new Qn("LocaleId",{providedIn:"root",factory:()=>Xc(ud,jr.Optional|jr.SkipSelf)||function lN(){return typeof $localize<"u"&&$localize.locale||jc}()}),$I=(()=>Promise.resolve(0))();function iS(n){typeof Zone>"u"?$I.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ri{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yi(!1),this.onMicrotaskEmpty=new Yi(!1),this.onStable=new Yi(!1),this.onError=new Yi(!1),typeof Zone>"u")throw new un(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!s&&e,d.shouldCoalesceRunChangeDetection=s,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function tU(){let n=Lo.requestAnimationFrame,t=Lo.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function rU(n){const t=()=>{!function JI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Lo,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,bO(n),n.isCheckStableRunning=!0,EO(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),bO(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,s,d,f,b,E)=>{try{return SO(n),e.invokeTask(d,f,b,E)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&t(),CO(n)}},onInvoke:(e,s,d,f,b,E,T)=>{try{return SO(n),e.invoke(d,f,b,E,T)}finally{n.shouldCoalesceRunChangeDetection&&t(),CO(n)}},onHasTask:(e,s,d,f)=>{e.hasTask(d,f),s===d&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,bO(n),EO(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(e,s,d,f)=>(e.handleError(d,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ri.isInAngularZone())throw new un(909,!1)}static assertNotInAngularZone(){if(ri.isInAngularZone())throw new un(909,!1)}run(t,e,s){return this._inner.run(t,e,s)}runTask(t,e,s,d){const f=this._inner,b=f.scheduleEventTask("NgZoneEvent: "+d,t,nU,dp,dp);try{return f.runTask(b,e,s)}finally{f.cancelTask(b)}}runGuarded(t,e,s){return this._inner.runGuarded(t,e,s)}runOutsideAngular(t){return this._outer.run(t)}}const nU={};function EO(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bO(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function SO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CO(n){n._nesting--,EO(n)}class G_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yi,this.onMicrotaskEmpty=new Yi,this.onStable=new Yi,this.onError=new Yi}run(t,e,s){return t.apply(e,s)}runGuarded(t,e,s){return t.apply(e,s)}runOutsideAngular(t){return t()}runTask(t,e,s,d){return t.apply(e,s)}}const XI=new Qn(""),oS=new Qn("");let W_,sS=(()=>{class n{constructor(e,s,d){this._ngZone=e,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,W_||(function fN(n){W_=n}(d),d.addToWindow(s)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ri.assertNotInAngularZone(),iS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())iS(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(e)||(clearTimeout(s.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,s,d){let f=-1;s&&s>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==f),e(this._didWork,this.getPendingTasks())},s)),this._callbacks.push({doneCb:e,timeoutId:f,updateCb:d})}whenStable(e,s,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,s,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,s,d){return[]}}return n.\u0275fac=function(e){return new(e||n)(cn(ri),cn(ng),cn(oS))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})(),ng=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,s){this._applications.set(e,s)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,s=!0){return W_?.findTestabilityInTree(this,e,s)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ka=null;const IO=new Qn("AllowMultipleToken"),aS=new Qn("PlatformDestroyListeners");function RO(n,t,e=[]){const s=`Platform: ${t}`,d=new Qn(s);return(f=[])=>{let b=Iu();if(!b||b.injector.get(IO,!1)){const E=[...e,...f,{provide:d,useValue:!0}];n?n(E):function ew(n){if(ka&&!ka.get(IO,!1))throw new un(400,!1);ka=n;const t=n.get(dd);(function cS(n){const t=n.get(_O,null);t&&t.forEach(e=>e())})(n)}(function K_(n=[],t){return Uc.create({name:t,providers:[{provide:Sm,useValue:"platform"},{provide:aS,useValue:new Set([()=>ka=null])},...n]})}(E,s))}return function _N(n){const t=Iu();if(!t)throw new un(401,!1);return t}()}}function Iu(){return ka?.get(dd)??null}let dd=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,s){const d=function tw(n,t){let e;return e="noop"===n?new G_:("zone.js"===n?void 0:n)||new ri(t),e}(s?.ngZone,function gh(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(s)),f=[{provide:ri,useValue:d}];return d.run(()=>{const b=Uc.create({providers:f,parent:this.injector,name:e.moduleType.name}),E=e.create(b),T=E.injector.get(gu,null);if(!T)throw new un(402,!1);return d.runOutsideAngular(()=>{const k=d.onError.subscribe({next:Q=>{T.handleError(Q)}});E.onDestroy(()=>{z_(this._modules,E),k.unsubscribe()})}),function nw(n,t,e){try{const s=e();return Eb(s)?s.catch(d=>{throw t.runOutsideAngular(()=>n.handleError(d)),d}):s}catch(s){throw t.runOutsideAngular(()=>n.handleError(s)),s}}(T,d,()=>{const k=E.injector.get(tS);return k.runInitializers(),k.donePromise.then(()=>(function Vm(n){Zl(n,"Expected localeId to be defined"),"string"==typeof n&&(CD=n.toLowerCase().replace(/_/g,"-"))}(E.injector.get(ud,jc)||jc),this._moduleDoBootstrap(E),E))})})}bootstrapModule(e,s=[]){const d=ig({},s);return function mN(n,t,e){const s=new Vb(e);return Promise.resolve(s)}(0,0,e).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(e){const s=e.injector.get(If);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(d=>s.bootstrap(d));else{if(!e.instance.ngDoBootstrap)throw new un(403,!1);e.instance.ngDoBootstrap(s)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new un(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const e=this._injector.get(aS,null);e&&(e.forEach(s=>s()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(cn(Uc))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function ig(n,t){return Array.isArray(t)?t.reduce(ig,n):{...n,...t}}let If=(()=>{class n{constructor(e,s,d){this._zone=e,this._injector=s,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new rt(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),b=new rt(E=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{ri.assertNotInAngularZone(),iS(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{ri.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{T.unsubscribe(),k.unsubscribe()}});this.isStable=No(f,b.pipe(ZT()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,s){const d=e instanceof xM;if(!this._injector.get(tS).done)throw!d&&function Wu(n){const t=zi(n)||sc(n)||ac(n);return null!==t&&t.standalone}(e),new un(405,false);let b;b=d?e:this._injector.get(qi).resolveComponentFactory(e),this.componentTypes.push(b.componentType);const E=function ZI(n){return n.isBoundToModule}(b)?void 0:this._injector.get(zm),k=b.create(Uc.NULL,[],s||b.selector,E),Q=k.location.nativeElement,ie=k.injector.get(XI,null);return ie?.registerApplication(Q),k.onDestroy(()=>{this.detachView(k.hostView),z_(this.components,k),ie?.unregisterApplication(Q)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new un(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const s=e;this._views.push(s),s.attachToAppRef(this)}detachView(e){const s=e;z_(this._views,s),s.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(sN,[]).concat(this._bootstrapListeners).forEach(d=>d(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>z_(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new un(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(cn(ri),cn(tp),cn(gu))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z_(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let ma=(()=>{class n{}return n.__NG_ELEMENT_ID__=rw,n})();function rw(n){return function iw(n,t,e){if(SE(n)&&!e){const s=Ca(n.index,t);return new pb(s,s)}return 47&n.type?new pb(t[16],t):null}(cc(),Rn(),16==(16&n))}class bN{constructor(){}supports(t){return Mm(t)}create(t){return new aU(t)}}const SN=(n,t)=>t;class aU{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||SN}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,s=this._removalsHead,d=0,f=null;for(;e||s;){const b=!s||e&&e.currentIndex<tr(s,d,f)?e:s,E=tr(b,d,f),T=b.currentIndex;if(b===s)d--,s=s._nextRemoved;else if(e=e._next,null==b.previousIndex)d++;else{f||(f=[]);const k=E-d,Q=T-d;if(k!=Q){for(let Ie=0;Ie<k;Ie++){const xe=Ie<f.length?f[Ie]:f[Ie]=0,qe=xe+Ie;Q<=qe&&qe<k&&(f[Ie]=xe+1)}f[b.previousIndex]=Q-k}}E!==T&&t(b,E,T)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Mm(t))throw new un(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let d,f,b,e=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let E=0;E<this.length;E++)f=t[E],b=this._trackByFn(E,f),null!==e&&Object.is(e.trackById,b)?(s&&(e=this._verifyReinsertion(e,f,b,E)),Object.is(e.item,f)||this._addIdentityChange(e,f)):(e=this._mismatch(e,f,b,E),s=!0),e=e._next}else d=0,function OA(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[ih()]();let s;for(;!(s=e.next()).done;)t(s.value)}}(t,E=>{b=this._trackByFn(d,E),null!==e&&Object.is(e.trackById,b)?(s&&(e=this._verifyReinsertion(e,E,b,d)),Object.is(e.item,E)||this._addIdentityChange(e,E)):(e=this._mismatch(e,E,b,d),s=!0),e=e._next,d++}),this.length=d;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,s,d){let f;return null===t?f=this._itTail:(f=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,f,d)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(s,d))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,f,d)):t=this._addAfter(new PO(e,s),f,d),t}_verifyReinsertion(t,e,s,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==f?t=this._reinsertAfter(f,t._prev,d):t.currentIndex!=d&&(t.currentIndex=d,this._addToMoves(t,d)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const d=t._prevRemoved,f=t._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(t,e,s),this._addToMoves(t,s),t}_moveAfter(t,e,s){return this._unlink(t),this._insertAfter(t,e,s),this._addToMoves(t,s),t}_addAfter(t,e,s){return this._insertAfter(t,e,s),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,s){const d=null===e?this._itHead:e._next;return t._next=d,t._prev=e,null===d?this._itTail=t:d._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Vo),this._linkedRecords.put(t),t.currentIndex=s,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,s=t._next;return null===e?this._itHead=s:e._next=s,null===s?this._itTail=e:s._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class PO{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class En{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===e||e<=s.currentIndex)&&Object.is(s.trackById,t))return s;return null}remove(t){const e=t._prevDup,s=t._nextDup;return null===e?this._head=s:e._nextDup=s,null===s?this._tail=e:s._prevDup=e,null===this._head}}class Vo{constructor(){this.map=new Map}put(t){const e=t.trackById;let s=this.map.get(e);s||(s=new En,this.map.set(e,s)),s.add(t)}get(t,e){const d=this.map.get(t);return d?d.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tr(n,t,e){const s=n.previousIndex;if(null===s)return s;let d=0;return e&&s<e.length&&(d=e[s]),s+t+d}class Vs{constructor(){}supports(t){return t instanceof Map||gb(t)}create(){return new Iy}}class Iy{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||gb(t)))throw new un(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(s,d)=>{if(e&&e.key===d)this._maybeAddToChanges(e,s),this._appendAfter=e,e=e._next;else{const f=this._getOrCreateRecordForKey(d,s);e=this._insertBeforeOrAppend(e,f)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let s=e;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const s=t._prev;return e._next=t,e._prev=s,t._prev=e,s&&(s._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const d=this._records.get(t);this._maybeAddToChanges(d,e);const f=d._prev,b=d._next;return f&&(f._next=b),b&&(b._prev=f),d._next=null,d._prev=null,d}const s=new mn(t);return this._records.set(t,s),s.currentValue=e,this._addToAdditions(s),s}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(s=>e(t[s],s))}}class mn{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function An(){return new Al([new bN])}let Al=(()=>{class n{constructor(e){this.factories=e}static create(e,s){if(null!=s){const d=s.factories.slice();e=e.concat(d)}return new n(e)}static extend(e){return{provide:n,useFactory:s=>n.create(e,s||An()),deps:[[n,new Cn,new Fs]]}}find(e){const s=this.factories.find(d=>d.supports(e));if(null!=s)return s;throw new un(901,!1)}}return n.\u0275prov=yr({token:n,providedIn:"root",factory:An}),n})();function er(){return new wy([new Vs])}let wy=(()=>{class n{constructor(e){this.factories=e}static create(e,s){if(s){const d=s.factories.slice();e=e.concat(d)}return new n(e)}static extend(e){return{provide:n,useFactory:s=>n.create(e,s||er()),deps:[[n,new Cn,new Fs]]}}find(e){const s=this.factories.find(d=>d.supports(e));if(s)return s;throw new un(901,!1)}}return n.\u0275prov=yr({token:n,providedIn:"root",factory:er}),n})();const CN=RO(null,"core",[]);let vh=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(cn(If))},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({}),n})(),Ah=null;function wu(){return Ah}class NO{}const Ei=new Qn("DocumentToken");let hw=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=yr({token:n,factory:function(){return function wN(){return cn(xO)}()},providedIn:"platform"}),n})(),xO=(()=>{class n extends hw{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wu().getBaseHref(this._doc)}onPopState(e){const s=wu().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",e,!1),()=>s.removeEventListener("popstate",e)}onHashChange(e){const s=wu().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",e,!1),()=>s.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,s,d){Y_()?this._history.pushState(e,s,d):this.location.hash=d}replaceState(e,s,d){Y_()?this._history.replaceState(e,s,d):this.location.hash=d}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei))},n.\u0275prov=yr({token:n,factory:function(){return function ag(){return new xO(cn(Ei))}()},providedIn:"platform"}),n})();function Y_(){return!!window.history.pushState}function fw(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function hS(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Tu(n){return n&&"?"!==n[0]?"?"+n:n}let Ry=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=yr({token:n,factory:function(){return Xc(gw)},providedIn:"root"}),n})();const mw=new Qn("appBaseHref");let gw=(()=>{class n extends Ry{constructor(e,s){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??Xc(Ei).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return fw(this._baseHref,e)}path(e=!1){const s=this._platformLocation.pathname+Tu(this._platformLocation.search),d=this._platformLocation.hash;return d&&e?`${s}${d}`:s}pushState(e,s,d,f){const b=this.prepareExternalUrl(d+Tu(f));this._platformLocation.pushState(e,s,b)}replaceState(e,s,d,f){const b=this.prepareExternalUrl(d+Tu(f));this._platformLocation.replaceState(e,s,b)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(cn(hw),cn(mw,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RN=(()=>{class n{constructor(e){this._subject=new Yi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const s=this._locationStrategy.getBaseHref();this._baseHref=hS(BO(s)),this._locationStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,s=""){return this.path()==this.normalize(e+Tu(s))}normalize(e){return n.stripTrailingSlash(function ON(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,BO(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,s="",d=null){this._locationStrategy.pushState(d,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Tu(s)),d)}replaceState(e,s="",d=null){this._locationStrategy.replaceState(d,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Tu(s)),d)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)})),()=>{const s=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(s,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",s){this._urlChangeListeners.forEach(d=>d(e,s))}subscribe(e,s,d){return this._subject.subscribe({next:e,error:s,complete:d})}}return n.normalizeQueryParams=Tu,n.joinWithSlash=fw,n.stripTrailingSlash=hS,n.\u0275fac=function(e){return new(e||n)(cn(Ry))},n.\u0275prov=yr({token:n,factory:function(){return function DN(){return new RN(cn(Ry))}()},providedIn:"root"}),n})();function BO(n){return n.replace(/\/index.html$/,"")}function Rw(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const s=e.indexOf("="),[d,f]=-1==s?[e,""]:[e.slice(0,s),e.slice(s+1)];if(d.trim()===t)return decodeURIComponent(f)}return null}let ES=(()=>{class n{constructor(e,s,d,f){this._iterableDiffers=e,this._keyValueDiffers=s,this._ngEl=d,this._renderer=f,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Mm(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Eo(s.item)}`);this._toggleClass(s.item,!0)}),e.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!0)):Object.keys(e).forEach(s=>this._toggleClass(s,!!e[s])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!1)):Object.keys(e).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(e,s){(e=e.trim())&&e.split(/\s+/g).forEach(d=>{s?this._renderer.addClass(this._ngEl.nativeElement,d):this._renderer.removeClass(this._ngEl.nativeElement,d)})}}return n.\u0275fac=function(e){return new(e||n)(yt(Al),yt(wy),yt(Ni),yt(mu))},n.\u0275dir=mr({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ZO{constructor(t,e,s,d){this.$implicit=t,this.ngForOf=e,this.index=s,this.count=d}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kw=(()=>{class n{constructor(e,s,d){this._viewContainer=e,this._template=s,this._differs=d,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const s=this._viewContainer;e.forEachOperation((d,f,b)=>{if(null==d.previousIndex)s.createEmbeddedView(this._template,new ZO(d.item,this._ngForOf,-1,-1),null===b?void 0:b);else if(null==b)s.remove(null===f?void 0:f);else if(null!==f){const E=s.get(f);s.move(E,b),ek(E,d)}});for(let d=0,f=s.length;d<f;d++){const E=s.get(d).context;E.index=d,E.count=f,E.ngForOf=this._ngForOf}e.forEachIdentityChange(d=>{ek(s.get(d.currentIndex),d)})}static ngTemplateContextGuard(e,s){return!0}}return n.\u0275fac=function(e){return new(e||n)(yt(vl),yt(_l),yt(Al))},n.\u0275dir=mr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ek(n,t){n.context.$implicit=t.item}let J_=(()=>{class n{constructor(e,s){this._viewContainer=e,this._context=new tk,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){xy("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){xy("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,s){return!0}}return n.\u0275fac=function(e){return new(e||n)(yt(vl),yt(_l))},n.\u0275dir=mr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class tk{constructor(){this.$implicit=null,this.ngIf=null}}function xy(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Eo(t)}'.`)}class Pw{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Ly=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const s=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||s,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),s}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let s=0;s<this._defaultViews.length;s++)this._defaultViews[s].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=mr({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),By=(()=>{class n{constructor(e,s,d){this.ngSwitch=d,d._addCase(),this._view=new Pw(e,s)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(yt(vl),yt(_l),yt(Ly,9))},n.\u0275dir=mr({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),nk=(()=>{class n{constructor(e,s,d){d._addDefault(new Pw(e,s))}}return n.\u0275fac=function(e){return new(e||n)(yt(vl),yt(_l),yt(Ly,9))},n.\u0275dir=mr({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),Mw=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const s=this._viewContainerRef;if(this._viewRef&&s.remove(s.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:d,ngTemplateOutletContext:f,ngTemplateOutletInjector:b}=this;this._viewRef=s.createEmbeddedView(d,f,b?{injector:b}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(yt(vl))},n.\u0275dir=mr({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Bs]}),n})(),Xo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({}),n})();const yc="browser";class Hw{}class vd extends NO{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ms extends vd{static makeCurrent(){!function IN(n){Ah||(Ah=n)}(new Ms)}onAndCancel(t,e,s){return t.addEventListener(e,s,!1),()=>{t.removeEventListener(e,s,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function ko(){return Rh=Rh||document.querySelector("base"),Rh?Rh.getAttribute("href"):null}();return null==e?null:function Te(n){Of=Of||document.createElement("a"),Of.setAttribute("href",n);const t=Of.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Rh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Rw(document.cookie,t)}}let Of,Rh=null;const Le=new Qn("TRANSITION_ID"),Ek=[{provide:gO,useFactory:function wo(n,t,e){return()=>{e.get(tS).donePromise.then(()=>{const s=wu(),d=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let f=0;f<d.length;f++)s.remove(d[f])})}},deps:[Le,Ei,Uc],multi:!0}];let Xw=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();const Gc=new Qn("EventManagerPlugins");let ev=(()=>{class n{constructor(e,s){this._zone=s,this._eventNameToPlugin=new Map,e.forEach(d=>d.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,s,d){return this._findPluginFor(s).addEventListener(e,s,d)}addGlobalEventListener(e,s,d){return this._findPluginFor(s).addGlobalEventListener(e,s,d)}getZone(){return this._zone}_findPluginFor(e){const s=this._eventNameToPlugin.get(e);if(s)return s;const d=this._plugins;for(let f=0;f<d.length;f++){const b=d[f];if(b.supports(e))return this._eventNameToPlugin.set(e,b),b}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(cn(Gc),cn(ri))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();class Li{constructor(t){this._doc=t}addGlobalEventListener(t,e,s){const d=wu().getGlobalEventTarget(this._doc,t);if(!d)throw new Error(`Unsupported event target ${d} for event ${e}`);return this.addEventListener(d,e,s)}}let se=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const s=new Set;e.forEach(d=>{this._stylesSet.has(d)||(this._stylesSet.add(d),s.add(d))}),this.onStylesAdded(s)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})(),bc=(()=>{class n extends se{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,s,d){e.forEach(f=>{const b=this._doc.createElement("style");b.textContent=f,d.push(s.appendChild(b))})}addHost(e){const s=[];this._addStylesToHost(this._stylesSet,e,s),this._hostNodes.set(e,s)}removeHost(e){const s=this._hostNodes.get(e);s&&s.forEach(PS),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((s,d)=>{this._addStylesToHost(e,d,s)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(PS))}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();function PS(n){wu().remove(n)}const bk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qy=/%COMP%/g;function Pf(n,t,e){for(let s=0;s<t.length;s++){let d=t[s];Array.isArray(d)?Pf(n,d,e):(d=d.replace(Qy,n),e.push(d))}return e}function mg(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Mf=(()=>{class n{constructor(e,s,d){this.eventManager=e,this.sharedStylesHost=s,this.appId=d,this.rendererByCompId=new Map,this.defaultRenderer=new Ou(e)}createRenderer(e,s){if(!e||!s)return this.defaultRenderer;switch(s.encapsulation){case tu.Emulated:{let d=this.rendererByCompId.get(s.id);return d||(d=new ku(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,d)),d.applyToHost(e),d}case 1:case tu.ShadowDom:return new Wl(this.eventManager,this.sharedStylesHost,e,s);default:if(!this.rendererByCompId.has(s.id)){const d=Pf(s.id,s.styles,[]);this.sharedStylesHost.addStyles(d),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(cn(ev),cn(bc),cn(H_))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();class Ou{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(bk[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(ji(t)?t.content:t).appendChild(e)}insertBefore(t,e,s){t&&(ji(t)?t.content:t).insertBefore(e,s)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let s="string"==typeof t?document.querySelector(t):t;if(!s)throw new Error(`The selector "${t}" did not match any elements`);return e||(s.textContent=""),s}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,s,d){if(d){e=d+":"+e;const f=bk[d];f?t.setAttributeNS(f,e,s):t.setAttribute(e,s)}else t.setAttribute(e,s)}removeAttribute(t,e,s){if(s){const d=bk[s];d?t.removeAttributeNS(d,e):t.removeAttribute(`${s}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,s,d){d&(Mc.DashCase|Mc.Important)?t.style.setProperty(e,s,d&Mc.Important?"important":""):t.style[e]=s}removeStyle(t,e,s){s&Mc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,s){t[e]=s}setValue(t,e){t.nodeValue=e}listen(t,e,s){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,mg(s)):this.eventManager.addEventListener(t,e,mg(s))}}function ji(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ku extends Ou{constructor(t,e,s,d){super(t),this.component=s;const f=Pf(d+"-"+s.id,s.styles,[]);e.addStyles(f),this.contentAttr=function MS(n){return"_ngcontent-%COMP%".replace(Qy,n)}(d+"-"+s.id),this.hostAttr=function Ad(n){return"_nghost-%COMP%".replace(Qy,n)}(d+"-"+s.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const s=super.createElement(t,e);return super.setAttribute(s,this.contentAttr,""),s}}class Wl extends Ou{constructor(t,e,s,d){super(t),this.sharedStylesHost=e,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=Pf(d.id,d.styles,[]);for(let b=0;b<f.length;b++){const E=document.createElement("style");E.textContent=f[b],this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,s){return super.insertBefore(this.nodeOrShadowRoot(t),e,s)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let $t=(()=>{class n extends Li{constructor(e){super(e)}supports(e){return!0}addEventListener(e,s,d){return e.addEventListener(s,d,!1),()=>this.removeEventListener(e,s,d)}removeEventListener(e,s,d){return e.removeEventListener(s,d)}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();const gg=["alt","control","meta","shift"],cr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Po=(()=>{class n extends Li{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,s,d){const f=n.parseEventName(s),b=n.eventCallback(f.fullKey,d,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wu().onAndCancel(e,f.domEventName,b))}static parseEventName(e){const s=e.toLowerCase().split("."),d=s.shift();if(0===s.length||"keydown"!==d&&"keyup"!==d)return null;const f=n._normalizeKey(s.pop());let b="",E=s.indexOf("code");if(E>-1&&(s.splice(E,1),b="code."),gg.forEach(k=>{const Q=s.indexOf(k);Q>-1&&(s.splice(Q,1),b+=k+".")}),b+=f,0!=s.length||0===f.length)return null;const T={};return T.domEventName=d,T.fullKey=b,T}static matchEventFullKeyCode(e,s){let d=cr[e.key]||e.key,f="";return s.indexOf("code.")>-1&&(d=e.code,f="code."),!(null==d||!d)&&(d=d.toLowerCase()," "===d?d="space":"."===d&&(d="dot"),gg.forEach(b=>{b!==d&&(0,xa[b])(e)&&(f+=b+".")}),f+=d,f===s)}static eventCallback(e,s,d){return f=>{n.matchEventFullKeyCode(f,e)&&d.runGuarded(()=>s(f))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();const nT=RO(CN,"browser",[{provide:rS,useValue:yc},{provide:_O,useValue:function gx(){Ms.makeCurrent()},multi:!0},{provide:Ei,useFactory:function Nf(){return function Xp(n){nn=n}(document),document},deps:[]}]),NS=new Qn(""),_x=[{provide:oS,useClass:class Ss{addToWindow(t){Lo.getAngularTestability=(s,d=!0)=>{const f=t.findTestabilityInTree(s,d);if(null==f)throw new Error("Could not find testability for element.");return f},Lo.getAllAngularTestabilities=()=>t.getAllTestabilities(),Lo.getAllAngularRootElements=()=>t.getAllRootElements(),Lo.frameworkStabilizers||(Lo.frameworkStabilizers=[]),Lo.frameworkStabilizers.push(s=>{const d=Lo.getAllAngularTestabilities();let f=d.length,b=!1;const E=function(T){b=b||T,f--,0==f&&s(b)};d.forEach(function(T){T.whenStable(E)})})}findTestabilityInTree(t,e,s){return null==e?null:t.getTestability(e)??(s?wu().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:XI,useClass:sS,deps:[ri,ng,oS]},{provide:sS,useClass:sS,deps:[ri,ng,oS]}],xf=[{provide:Sm,useValue:"root"},{provide:gu,useFactory:function OU(){return new gu},deps:[]},{provide:Gc,useClass:$t,multi:!0,deps:[Ei,ri,rS]},{provide:Gc,useClass:Po,multi:!0,deps:[Ei]},{provide:Mf,useClass:Mf,deps:[ev,bc,H_]},{provide:Im,useExisting:Mf},{provide:se,useExisting:bc},{provide:bc,useClass:bc,deps:[Ei]},{provide:ev,useClass:ev,deps:[Gc,ri]},{provide:Hw,useClass:Xw,deps:[]},[]];let La=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:H_,useValue:e.appId},{provide:Le,useExisting:H_},Ek]}}}return n.\u0275fac=function(e){return new(e||n)(cn(NS,12))},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({providers:[...xf,..._x],imports:[Xo,vh]}),n})();typeof window<"u"&&window;let dn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=yr({token:n,factory:function(e){let s=null;return s=e?new(e||n):cn(Ix),s},providedIn:"root"}),n})(),Ix=(()=>{class n extends dn{constructor(e){super(),this._doc=e}sanitize(e,s){if(null==s)return null;switch(e){case Di.NONE:return s;case Di.HTML:return cl(s,"HTML")?al(s):oA(this._doc,String(s)).toString();case Di.STYLE:return cl(s,"Style")?al(s):s;case Di.SCRIPT:if(cl(s,"Script"))return al(s);throw new Error("unsafe value used in a script context");case Di.URL:return cl(s,"URL")?al(s):nA(String(s));case Di.RESOURCE_URL:if(cl(s,"ResourceURL"))return al(s);throw new Error(`unsafe value used in a resource URL context (see ${Mp})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${Mp})`)}}bypassSecurityTrustHtml(e){return function z1(n){return new SM(n)}(e)}bypassSecurityTrustStyle(e){return function wM(n){return new CM(n)}(e)}bypassSecurityTrustScript(e){return function us(n){return new _C(n)}(e)}bypassSecurityTrustUrl(e){return function TM(n){return new IM(n)}(e)}bypassSecurityTrustResourceUrl(e){return function q1(n){return new K1(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei))},n.\u0275prov=yr({token:n,factory:function(e){let s=null;return s=e?new e:function Cx(n){return new Ix(n.get(Ei))}(cn(Uc)),s},providedIn:"root"}),n})();const{isArray:NU}=Array,{getPrototypeOf:yp,prototype:Ik,keys:wk}=Object;function wx(n){if(1===n.length){const t=n[0];if(NU(t))return{args:t,keys:null};if(function Tx(n){return n&&"object"==typeof n&&yp(n)===Ik}(t)){const e=wk(t);return{args:e.map(s=>t[s]),keys:e}}}return{args:n,keys:null}}const{isArray:xU}=Array;function sT(n){return ot(t=>function Ba(n,t){return xU(t)?n(...t):n(t)}(n,t))}function Aa(n,t){return n.reduce((e,s,d)=>(e[s]=t[d],e),{})}function Tk(...n){const t=kn(n),{args:e,keys:s}=wx(n),d=new rt(f=>{const{length:b}=e;if(!b)return void f.complete();const E=new Array(b);let T=b,k=b;for(let Q=0;Q<b;Q++){let ie=!1;Sn(e[Q]).subscribe(new De(f,Ie=>{ie||(ie=!0,k--),E[Q]=Ie},()=>T--,void 0,()=>{(!T||!ie)&&(k||f.next(s?Aa(s,E):E),f.complete())}))}});return t?d.pipe(sT(t)):d}let iv=(()=>{class n{constructor(e,s){this._renderer=e,this._elementRef=s,this.onChange=d=>{},this.onTouched=()=>{}}setProperty(e,s){this._renderer.setProperty(this._elementRef.nativeElement,e,s)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(yt(mu),yt(Ni))},n.\u0275dir=mr({type:n}),n})(),ov=(()=>{class n extends iv{}return n.\u0275fac=function(){let t;return function(s){return(t||(t=kr(n)))(s||n)}}(),n.\u0275dir=mr({type:n,features:[Or]}),n})();const zl=new Qn("NgValueAccessor"),Rx={provide:zl,useExisting:es(()=>Ky),multi:!0},aT=new Qn("CompositionEventMode");let Ky=(()=>{class n extends iv{constructor(e,s,d){super(e,s),this._compositionMode=d,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function to(){const n=wu()?wu().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(yt(mu),yt(Ni),yt(aT,8))},n.\u0275dir=mr({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,s){1&e&&eo("input",function(f){return s._handleInput(f.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(f){return s._compositionEnd(f.target.value)})},features:[po([Rx]),Or]}),n})();function i(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function u(n){return null!=n&&"number"==typeof n.length}const l=new Qn("NgValidators"),h=new Qn("NgAsyncValidators"),g=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class y{static min(t){return function C(n){return t=>{if(i(t.value)||i(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function w(n){return t=>{if(i(t.value)||i(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function D(n){return i(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function N(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function L(n){return i(n.value)||g.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function V(n){return t=>i(t.value)||!u(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function G(n){return t=>u(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function W(n){if(!n)return X;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),s=>{if(i(s.value))return null;const d=s.value;return t.test(d)?null:{pattern:{requiredPattern:e,actualValue:d}}}}(t)}static nullValidator(t){return null}static compose(t){return ht(t)}static composeAsync(t){return Qe(t)}}function X(n){return null}function ne(n){return null!=n}function me(n){return Eb(n)?kg(n):n}function _e(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Re(n,t){return t.map(e=>e(n))}function et(n){return n.map(t=>function Ne(n){return!n.validate}(t)?t:e=>t.validate(e))}function ht(n){if(!n)return null;const t=n.filter(ne);return 0==t.length?null:function(e){return _e(Re(e,t))}}function ze(n){return null!=n?ht(et(n)):null}function Qe(n){if(!n)return null;const t=n.filter(ne);return 0==t.length?null:function(e){return Tk(Re(e,t).map(me)).pipe(ot(_e))}}function wt(n){return null!=n?Qe(et(n)):null}function Xt(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function _t(n){return n._rawValidators}function it(n){return n._rawAsyncValidators}function Ce(n){return n?Array.isArray(n)?n:[n]:[]}function Ye(n,t){return Array.isArray(n)?n.includes(t):n===t}function Ge(n,t){const e=Ce(t);return Ce(n).forEach(d=>{Ye(e,d)||e.push(d)}),e}function ut(n,t){return Ce(t).filter(e=>!Ye(n,e))}class mt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ze(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=wt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class St extends mt{get formDirective(){return null}get path(){return null}}class Wt extends mt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class en{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hr=(()=>{class n extends en{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(yt(Wt,2))},n.\u0275dir=mr({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,s){2&e&&is("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Or]}),n})(),Hn=(()=>{class n extends en{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(yt(St,10))},n.\u0275dir=mr({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,s){2&e&&is("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Or]}),n})();const Qi="VALID",Bi="INVALID",Fi="PENDING",Ki="DISABLED";function Nr(n){return(Cs(n)?n.validators:n)||null}function ho(n,t){return(Cs(t)?t.asyncValidators:n)||null}function Cs(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Is{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Qi}get invalid(){return this.status===Bi}get pending(){return this.status==Fi}get disabled(){return this.status===Ki}get enabled(){return this.status!==Ki}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ge(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ge(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ut(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ut(t,this._rawAsyncValidators))}hasValidator(t){return Ye(this._rawValidators,t)}hasAsyncValidator(t){return Ye(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Fi,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ki,this.errors=null,this._forEachChild(s=>{s.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Qi,this._forEachChild(s=>{s.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qi||this.status===Fi)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ki:Qi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Fi,this._hasOwnPendingAsyncValidator=!0;const e=me(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((s,d)=>s&&s._find(d),this)}getError(t,e){const s=e?this.get(e):this;return s&&s.errors?s.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Yi,this.statusChanges=new Yi}_calculateStatus(){return this._allControlsDisabled()?Ki:this.errors?Bi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fi)?Fi:this._anyControlsHaveStatus(Bi)?Bi:Qi}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Cs(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function Sl(n){return Array.isArray(n)?ze(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function zc(n){return Array.isArray(n)?wt(n):n||null}(this._rawAsyncValidators)}}class jo extends Is{constructor(t,e,s){super(Nr(e),ho(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,s={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function Zo(n,t,e){n._forEachChild((s,d)=>{if(void 0===e[d])throw new un(1002,"")})})(this,0,t),Object.keys(t).forEach(s=>{(function Oh(n,t,e){const s=n.controls;if(!(t?Object.keys(s):s).length)throw new un(1e3,"");if(!s[e])throw new un(1001,"")})(this,!0,s),this.controls[s].setValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(s=>{const d=this.controls[s];d&&d.patchValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((s,d)=>{s.reset(t[d],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,s)=>(t[s]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,s)=>!!s._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const s=this.controls[e];s&&t(s,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,s]of Object.entries(this.controls))if(this.contains(e)&&t(s))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,s,d)=>((s.enabled||this.disabled)&&(e[d]=s.value),e))}_reduceChildren(t,e){let s=t;return this._forEachChild((d,f)=>{s=e(s,d,f)}),s}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const _r=jo,Ep=new Qn("CallSetDisabledState",{providedIn:"root",factory:()=>sv}),sv="always";function cT(n,t,e=sv){Ok(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function oj(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Un(n,t)})}(n,t),function bd(n,t){const e=(s,d)=>{t.valueAccessor.writeValue(s),d&&t.viewToModelUpdate(s)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Xr(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Un(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Zs(n,t){if(t.valueAccessor.setDisabledState){const e=s=>{t.valueAccessor.setDisabledState(s)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Dk(n,t,e=!0){const s=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(s),t.valueAccessor.registerOnTouched(s)),zy(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Dx(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Ok(n,t){const e=_t(n);null!==t.validator?n.setValidators(Xt(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const s=it(n);null!==t.asyncValidator?n.setAsyncValidators(Xt(s,t.asyncValidator)):"function"==typeof s&&n.setAsyncValidators([s]);const d=()=>n.updateValueAndValidity();Dx(t._rawValidators,d),Dx(t._rawAsyncValidators,d)}function zy(n,t){let e=!1;if(null!==n){if(null!==t.validator){const d=_t(n);if(Array.isArray(d)&&d.length>0){const f=d.filter(b=>b!==t.validator);f.length!==d.length&&(e=!0,n.setValidators(f))}}if(null!==t.asyncValidator){const d=it(n);if(Array.isArray(d)&&d.length>0){const f=d.filter(b=>b!==t.asyncValidator);f.length!==d.length&&(e=!0,n.setAsyncValidators(f))}}}const s=()=>{};return Dx(t._rawValidators,s),Dx(t._rawAsyncValidators,s),e}function Un(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gi(n,t){Ok(n,t)}function os(n,t){n._syncPendingControls(),t.forEach(e=>{const s=e.control;"submit"===s.updateOn&&s._pendingChange&&(e.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}const LQ={provide:St,useExisting:es(()=>Pk)},kk=(()=>Promise.resolve())();let Pk=(()=>{class n extends St{constructor(e,s,d){super(),this.callSetDisabledState=d,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Yi,this.form=new jo({},ze(e),wt(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){kk.then(()=>{const s=this._findContainer(e.path);e.control=s.registerControl(e.name,e.control),cT(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){kk.then(()=>{const s=this._findContainer(e.path);s&&s.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){kk.then(()=>{const s=this._findContainer(e.path),d=new jo({});gi(d,e),s.registerControl(e.name,d),d.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){kk.then(()=>{const s=this._findContainer(e.path);s&&s.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,s){kk.then(()=>{this.form.get(e.path).setValue(s)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,os(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(yt(l,10),yt(h,10),yt(Ep,8))},n.\u0275dir=mr({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,s){1&e&&eo("submit",function(f){return s.onSubmit(f)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[po([LQ]),Or]}),n})();function UU(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function aj(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const VU=class extends Is{constructor(t=null,e,s){super(Nr(e),ho(s,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cs(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=aj(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){UU(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){UU(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){aj(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Sp=VU;let dj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=mr({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Mk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({}),n})();const kx=new Qn("NgModelWithFormControlWarning"),Mx={provide:St,useExisting:es(()=>uT)};let uT=(()=>{class n extends St{constructor(e,s,d){super(),this.callSetDisabledState=d,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Yi,this._setValidators(e),this._setAsyncValidators(s)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const s=this.form.get(e.path);return cT(s,e,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),s}getControl(e){return this.form.get(e.path)}removeControl(e){Dk(e.control||null,e,!1),function Yc(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,s){this.form.get(e.path).setValue(s)}onSubmit(e){return this.submitted=!0,os(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const s=e.control,d=this.form.get(e.path);s!==d&&(Dk(s||null,e),(n=>n instanceof VU)(d)&&(cT(d,e,this.callSetDisabledState),e.control=d))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const s=this.form.get(e.path);gi(s,e),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const s=this.form.get(e.path);s&&function ql(n,t){return zy(n,t)}(s,e)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ok(this.form,this),this._oldForm&&zy(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(yt(l,10),yt(h,10),yt(Ep,8))},n.\u0275dir=mr({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,s){1&e&&eo("submit",function(f){return s.onSubmit(f)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[po([Mx]),Or,Bs]}),n})();const KQ={provide:Wt,useExisting:es(()=>KU)};let KU=(()=>{class n extends Wt{constructor(e,s,d,f,b){super(),this._ngModelWarningConfig=b,this._added=!1,this.update=new Yi,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(s),this._setAsyncValidators(d),this.valueAccessor=function Sc(n,t){if(!t)return null;let e,s,d;return Array.isArray(t),t.forEach(f=>{f.constructor===Ky?e=f:function Nu(n){return Object.getPrototypeOf(n.constructor)===ov}(f)?s=f:d=f}),d||s||e||null}(0,f)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function Yl(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function si(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(yt(St,13),yt(l,10),yt(h,10),yt(zl,10),yt(kx,8))},n.\u0275dir=mr({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[po([KQ]),Or,Bs]}),n})(),e3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[Mk]}),n})(),bj=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ep,useValue:e.callSetDisabledState??sv}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[e3]}),n})(),Bx=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:kx,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ep,useValue:e.callSetDisabledState??sv}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[e3]}),n})();var t9=$(1648),n3=$.n(t9),r3=$(3890),hT=$.n(r3),Ij=$(6021);let o3;try{o3=typeof Intl<"u"&&Intl.v8BreakIterator}catch{o3=!1}let Ff,$c=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function uk(n){return n===yc}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!o3)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(cn(rS))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({}),n})();const xk=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Uf(){if(Ff)return Ff;if("object"!=typeof document||!document)return Ff=new Set(xk),Ff;let n=document.createElement("input");return Ff=new Set(xk.filter(t=>(n.setAttribute("type",t),n.type===t))),Ff}let Lk,cv,a3;function Cc(n){return function s3(){if(null==Lk&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Lk=!0}))}finally{Lk=Lk||!1}return Lk}()?n:!!n.capture}function HS(){if(null==cv){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return cv=!1,cv;if("scrollBehavior"in document.documentElement.style)cv=!0;else{const n=Element.prototype.scrollTo;cv=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return cv}function GS(n){return n.composedPath?n.composedPath()[0]:n.target}function Fk(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Lu(...n){return kg(n,Ii(n))}function Vf(n,t){return $e((e,s)=>{let d=0;e.subscribe(new De(s,f=>n.call(t,f,d++)&&s.next(f)))})}class WS{}class Uk{}class _g{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const s=e.indexOf(":");if(s>0){const d=e.slice(0,s),f=d.toLowerCase(),b=e.slice(s+1).trim();this.maybeSetNormalizedName(d,f),this.headers.has(f)?this.headers.get(f).push(b):this.headers.set(f,[b])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let s=t[e];const d=e.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(d,s),this.maybeSetNormalizedName(e,d))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof _g?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new _g;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof _g?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let s=t.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(t.name,e);const d=("a"===t.op?this.headers.get(e):void 0)||[];d.push(...s),this.headers.set(e,d);break;case"d":const f=t.value;if(f){let b=this.headers.get(e);if(!b)return;b=b.filter(E=>-1===f.indexOf(E)),0===b.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,b)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class vg{encodeKey(t){return d3(t)}encodeValue(t){return d3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const i9=/%(\d[a-f0-9])/gi,u3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function d3(n){return encodeURIComponent(n).replace(i9,(t,e)=>u3[e]??t)}function fT(n){return`${n}`}class Ag{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new vg,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function jf(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(d=>{const f=d.indexOf("="),[b,E]=-1==f?[t.decodeKey(d),""]:[t.decodeKey(d.slice(0,f)),t.decodeValue(d.slice(f+1))],T=e.get(b)||[];T.push(E),e.set(b,T)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const s=t.fromObject[e],d=Array.isArray(s)?s.map(fT):[fT(s)];this.map.set(e,d)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(s=>{const d=t[s];Array.isArray(d)?d.forEach(f=>{e.push({param:s,value:f,op:"a"})}):e.push({param:s,value:d,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(s=>e+"="+this.encoder.encodeValue(s)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Ag({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(fT(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let s=this.map.get(t.param)||[];const d=s.indexOf(fT(t.value));-1!==d&&s.splice(d,1),s.length>0?this.map.set(t.param,s):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Tj{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Fx(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function p3(n){return typeof Blob<"u"&&n instanceof Blob}function Yy(n){return typeof FormData<"u"&&n instanceof FormData}class KS{constructor(t,e,s,d){let f;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function lv(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||d?(this.body=void 0!==s?s:null,f=d):f=s,f&&(this.reportProgress=!!f.reportProgress,this.withCredentials=!!f.withCredentials,f.responseType&&(this.responseType=f.responseType),f.headers&&(this.headers=f.headers),f.context&&(this.context=f.context),f.params&&(this.params=f.params)),this.headers||(this.headers=new _g),this.context||(this.context=new Tj),this.params){const b=this.params.toString();if(0===b.length)this.urlWithParams=e;else{const E=e.indexOf("?");this.urlWithParams=e+(-1===E?"?":E<e.length-1?"&":"")+b}}else this.params=new Ag,this.urlWithParams=e}serializeBody(){return null===this.body?null:Fx(this.body)||p3(this.body)||Yy(this.body)||function Rj(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ag?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Yy(this.body)?null:p3(this.body)?this.body.type||null:Fx(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ag?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,s=t.url||this.url,d=t.responseType||this.responseType,f=void 0!==t.body?t.body:this.body,b=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,E=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let T=t.headers||this.headers,k=t.params||this.params;const Q=t.context??this.context;return void 0!==t.setHeaders&&(T=Object.keys(t.setHeaders).reduce((ie,Ie)=>ie.set(Ie,t.setHeaders[Ie]),T)),t.setParams&&(k=Object.keys(t.setParams).reduce((ie,Ie)=>ie.set(Ie,t.setParams[Ie]),k)),new KS(e,s,f,{params:k,headers:T,context:Q,reportProgress:E,responseType:d,withCredentials:b})}}var Xa=(()=>((Xa=Xa||{})[Xa.Sent=0]="Sent",Xa[Xa.UploadProgress=1]="UploadProgress",Xa[Xa.ResponseHeader=2]="ResponseHeader",Xa[Xa.DownloadProgress=3]="DownloadProgress",Xa[Xa.Response=4]="Response",Xa[Xa.User=5]="User",Xa))();class h3{constructor(t,e=200,s="OK"){this.headers=t.headers||new _g,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||s,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class f3 extends h3{constructor(t={}){super(t),this.type=Xa.ResponseHeader}clone(t={}){return new f3({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class yg extends h3{constructor(t={}){super(t),this.type=Xa.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new yg({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Dj extends h3{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function m3(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ux=(()=>{class n{constructor(e){this.handler=e}request(e,s,d={}){let f;if(e instanceof KS)f=e;else{let T,k;T=d.headers instanceof _g?d.headers:new _g(d.headers),d.params&&(k=d.params instanceof Ag?d.params:new Ag({fromObject:d.params})),f=new KS(e,s,void 0!==d.body?d.body:null,{headers:T,context:d.context,params:k,reportProgress:d.reportProgress,responseType:d.responseType||"json",withCredentials:d.withCredentials})}const b=Lu(f).pipe(function n9(n,t){return F(t)?Ld(n,t,1):Ld(n,1)}(T=>this.handler.handle(T)));if(e instanceof KS||"events"===d.observe)return b;const E=b.pipe(Vf(T=>T instanceof yg));switch(d.observe||"body"){case"body":switch(f.responseType){case"arraybuffer":return E.pipe(ot(T=>{if(null!==T.body&&!(T.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return T.body}));case"blob":return E.pipe(ot(T=>{if(null!==T.body&&!(T.body instanceof Blob))throw new Error("Response is not a Blob.");return T.body}));case"text":return E.pipe(ot(T=>{if(null!==T.body&&"string"!=typeof T.body)throw new Error("Response is not a string.");return T.body}));default:return E.pipe(ot(T=>T.body))}case"response":return E;default:throw new Error(`Unreachable: unhandled observe type ${d.observe}}`)}}delete(e,s={}){return this.request("DELETE",e,s)}get(e,s={}){return this.request("GET",e,s)}head(e,s={}){return this.request("HEAD",e,s)}jsonp(e,s){return this.request("JSONP",e,{params:(new Ag).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,s={}){return this.request("OPTIONS",e,s)}patch(e,s,d={}){return this.request("PATCH",e,m3(d,s))}post(e,s,d={}){return this.request("POST",e,m3(d,s))}put(e,s,d={}){return this.request("PUT",e,m3(d,s))}}return n.\u0275fac=function(e){return new(e||n)(cn(WS))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();function Oj(n,t){return t(n)}function o9(n,t){return(e,s)=>t.intercept(e,{handle:d=>n(d,s)})}const a9=new Qn("HTTP_INTERCEPTORS"),Vk=new Qn("HTTP_INTERCEPTOR_FNS");function kj(){let n=null;return(t,e)=>(null===n&&(n=(Xc(a9,{optional:!0})??[]).reduceRight(o9,Oj)),n(t,e))}let Pj=(()=>{class n extends WS{constructor(e,s){super(),this.backend=e,this.injector=s,this.chain=null}handle(e){if(null===this.chain){const s=Array.from(new Set(this.injector.get(Vk)));this.chain=s.reduceRight((d,f)=>function s9(n,t,e){return(s,d)=>e.runInContext(()=>t(s,f=>n(f,d)))}(d,f,this.injector),Oj)}return this.chain(e,s=>this.backend.handle(s))}}return n.\u0275fac=function(e){return new(e||n)(cn(Uk),cn(tp))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();const p9=/^\)\]\}',?\n/;let Nj=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new rt(s=>{const d=this.xhrFactory.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((xe,qe)=>d.setRequestHeader(xe,qe.join(","))),e.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const xe=e.detectContentTypeHeader();null!==xe&&d.setRequestHeader("Content-Type",xe)}if(e.responseType){const xe=e.responseType.toLowerCase();d.responseType="json"!==xe?xe:"text"}const f=e.serializeBody();let b=null;const E=()=>{if(null!==b)return b;const xe=d.statusText||"OK",qe=new _g(d.getAllResponseHeaders()),ft=function h9(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(d)||e.url;return b=new f3({headers:qe,status:d.status,statusText:xe,url:ft}),b},T=()=>{let{headers:xe,status:qe,statusText:ft,url:Qt}=E(),Kt=null;204!==qe&&(Kt=typeof d.response>"u"?d.responseText:d.response),0===qe&&(qe=Kt?200:0);let pn=qe>=200&&qe<300;if("json"===e.responseType&&"string"==typeof Kt){const Vt=Kt;Kt=Kt.replace(p9,"");try{Kt=""!==Kt?JSON.parse(Kt):null}catch(zn){Kt=Vt,pn&&(pn=!1,Kt={error:zn,text:Kt})}}pn?(s.next(new yg({body:Kt,headers:xe,status:qe,statusText:ft,url:Qt||void 0})),s.complete()):s.error(new Dj({error:Kt,headers:xe,status:qe,statusText:ft,url:Qt||void 0}))},k=xe=>{const{url:qe}=E(),ft=new Dj({error:xe,status:d.status||0,statusText:d.statusText||"Unknown Error",url:qe||void 0});s.error(ft)};let Q=!1;const ie=xe=>{Q||(s.next(E()),Q=!0);let qe={type:Xa.DownloadProgress,loaded:xe.loaded};xe.lengthComputable&&(qe.total=xe.total),"text"===e.responseType&&!!d.responseText&&(qe.partialText=d.responseText),s.next(qe)},Ie=xe=>{let qe={type:Xa.UploadProgress,loaded:xe.loaded};xe.lengthComputable&&(qe.total=xe.total),s.next(qe)};return d.addEventListener("load",T),d.addEventListener("error",k),d.addEventListener("timeout",k),d.addEventListener("abort",k),e.reportProgress&&(d.addEventListener("progress",ie),null!==f&&d.upload&&d.upload.addEventListener("progress",Ie)),d.send(f),s.next({type:Xa.Sent}),()=>{d.removeEventListener("error",k),d.removeEventListener("abort",k),d.removeEventListener("load",T),d.removeEventListener("timeout",k),e.reportProgress&&(d.removeEventListener("progress",ie),null!==f&&d.upload&&d.upload.removeEventListener("progress",Ie)),d.readyState!==d.DONE&&d.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(cn(Hw))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();const Vx=new Qn("XSRF_ENABLED"),xj="XSRF-TOKEN",Lj=new Qn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>xj}),Bj="X-XSRF-TOKEN",Fj=new Qn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Bj});class Uj{}let f9=(()=>{class n{constructor(e,s,d){this.doc=e,this.platform=s,this.cookieName=d,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Rw(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei),cn(rS),cn(Lj))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();function Vj(n,t){const e=n.url.toLowerCase();if(!Xc(Vx)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const s=Xc(Uj).getToken(),d=Xc(Fj);return null!=s&&!n.headers.has(d)&&(n=n.clone({headers:n.headers.set(d,s)})),t(n)}var Fa=(()=>((Fa=Fa||{})[Fa.Interceptors=0]="Interceptors",Fa[Fa.LegacyInterceptors=1]="LegacyInterceptors",Fa[Fa.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Fa[Fa.NoXsrfProtection=3]="NoXsrfProtection",Fa[Fa.JsonpSupport=4]="JsonpSupport",Fa[Fa.RequestsMadeViaParent=5]="RequestsMadeViaParent",Fa))();function qS(n,t){return{\u0275kind:n,\u0275providers:t}}function jj(...n){const t=[Ux,Nj,Pj,{provide:WS,useExisting:Pj},{provide:Uk,useExisting:Nj},{provide:Vk,useValue:Vj,multi:!0},{provide:Vx,useValue:!0},{provide:Uj,useClass:f9}];for(const e of n)t.push(...e.\u0275providers);return function MM(n){return{\u0275providers:n}}(t)}const Qj=new Qn("LEGACY_INTERCEPTOR_FN");function YS({cookieName:n,headerName:t}){const e=[];return void 0!==n&&e.push({provide:Lj,useValue:n}),void 0!==t&&e.push({provide:Fj,useValue:t}),qS(Fa.CustomXsrfConfiguration,e)}let A9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({providers:[jj(qS(Fa.LegacyInterceptors,[{provide:Qj,useFactory:kj},{provide:Vk,useExisting:Qj,multi:!0}]),YS({cookieName:xj,headerName:Bj}))]}),n})();class g3 extends Et{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:s}=this;if(t)throw e;return this._throwIfClosed(),s}next(t){super.next(this._value=t)}}function gT(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Xx(n,t,e){const s=F(n)||t||e?{next:n,error:t,complete:e}:n;return s?$e((d,f)=>{var b;null===(b=s.subscribe)||void 0===b||b.call(s);let E=!0;d.subscribe(new De(f,T=>{var k;null===(k=s.next)||void 0===k||k.call(s,T),f.next(T)},()=>{var T;E=!1,null===(T=s.complete)||void 0===T||T.call(s),f.complete()},T=>{var k;E=!1,null===(k=s.error)||void 0===k||k.call(s,T),f.error(T)},()=>{var T,k;E&&(null===(T=s.unsubscribe)||void 0===T||T.call(s)),null===(k=s.finalize)||void 0===k||k.call(s)}))}):je}class e7 extends j{constructor(t,e){super()}schedule(t,e=0){return this}}const Zx={setInterval(...n){const{delegate:t}=Zx;return(t?.setInterval||setInterval)(...n)},clearInterval(n){const{delegate:t}=Zx;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class E3 extends e7{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const s=this.id,d=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(d,s,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(d,this.id,e),this}requestAsyncId(t,e,s=0){return Zx.setInterval(t.flush.bind(t,this),s)}recycleAsyncId(t,e,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return e;Zx.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(t,e);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let d,s=!1;try{this.work(t)}catch(f){s=!0,d=f||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),d}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:s}=e;this.work=this.state=this.scheduler=null,this.pending=!1,H(s,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const b3={now:()=>(b3.delegate||Date).now(),delegate:void 0};class Hk{constructor(t,e=Hk.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,s){return new this.schedulerActionCtor(this,t).schedule(s,e)}}Hk.now=b3.now;class S3 extends Hk{constructor(t,e=Hk.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let s;this._active=!0;do{if(s=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,s){for(;t=e.shift();)t.unsubscribe();throw s}}}const C3=new S3(E3),eL=C3;function I3(n,t=C3){return $e((e,s)=>{let d=null,f=null,b=null;const E=()=>{if(d){d.unsubscribe(),d=null;const k=f;f=null,s.next(k)}};function T(){const k=b+n,Q=t.now();if(Q<k)return d=this.schedule(void 0,k-Q),void s.add(d);E()}e.subscribe(new De(s,k=>{f=k,b=t.now(),d||(d=t.schedule(T,n),s.add(d))},()=>{E(),s.complete()},void 0,()=>{f=d=null}))})}function o5(n){return Vf((t,e)=>n<=e)}function s5(n,t=je){return n=n??t7,$e((e,s)=>{let d,f=!0;e.subscribe(new De(s,b=>{const E=t(b);(f||!n(d,E))&&(f=!1,d=E,s.next(b))}))})}function t7(n,t){return n===t}function Cl(n){return $e((t,e)=>{Sn(n).subscribe(new De(e,()=>e.complete(),ue)),!e.closed&&t.subscribe(e)})}function ya(n){return null!=n&&"false"!=`${n}`}function uv(n,t=0){return function a5(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function tL(n){return Array.isArray(n)?n:[n]}function Za(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Eg(n){return n instanceof Ni?n.nativeElement:n}let c5=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),n7=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,s)=>this._cleanupObserver(s))}observe(e){const s=Eg(e);return new rt(d=>{const b=this._observeElement(s).subscribe(d);return()=>{b.unsubscribe(),this._unobserveElement(s)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const s=new Et,d=this._mutationObserverFactory.create(f=>s.next(f));d&&d.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:d,stream:s,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:s,stream:d}=this._observedElements.get(e);s&&s.disconnect(),d.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(cn(c5))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),r7=(()=>{class n{constructor(e,s,d){this._contentObserver=e,this._elementRef=s,this._ngZone=d,this.event=new Yi,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=ya(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=uv(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(I3(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(yt(n7),yt(Ni),yt(ri))},n.\u0275dir=mr({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),l5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({providers:[c5]}),n})();function nL(n,t,e){n?co(e,n,t):t()}function rL(...n){return function s7(){return ls(1)}()(kg(n,Ii(n)))}function _T(...n){const t=Ii(n);return $e((e,s)=>{(t?rL(n,e,t):rL(n,e)).subscribe(s)})}const iL=new Set;let vT,rr=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):c7}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function a7(n){if(!iL.has(n))try{vT||(vT=document.createElement("style"),vT.setAttribute("type","text/css"),document.head.appendChild(vT)),vT.sheet&&(vT.sheet.insertRule(`@media ${n} {body{ }}`,0),iL.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(cn($c))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function c7(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let w3=(()=>{class n{constructor(e,s){this._mediaMatcher=e,this._zone=s,this._queries=new Map,this._destroySubject=new Et}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return u5(tL(e)).some(d=>this._registerQuery(d).mql.matches)}observe(e){let f=function i7(...n){const t=Ii(n),e=kn(n),{args:s,keys:d}=wx(n);if(0===s.length)return kg([],t);const f=new rt(function o7(n,t,e=je){return s=>{nL(t,()=>{const{length:d}=n,f=new Array(d);let b=d,E=d;for(let T=0;T<d;T++)nL(t,()=>{const k=kg(n[T],t);let Q=!1;k.subscribe(new De(s,ie=>{f[T]=ie,Q||(Q=!0,E--),E||s.next(e(f.slice()))},()=>{--b||s.complete()}))},s)},s)}}(s,t,d?b=>Aa(d,b):je));return e?f.pipe(sT(e)):f}(u5(tL(e)).map(b=>this._registerQuery(b).observable));return f=rL(f.pipe(Qu(1)),f.pipe(o5(1),I3(0))),f.pipe(ot(b=>{const E={matches:!1,breakpoints:{}};return b.forEach(({matches:T,query:k})=>{E.matches=E.matches||T,E.breakpoints[k]=T}),E}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const s=this._mediaMatcher.matchMedia(e),f={observable:new rt(b=>{const E=T=>this._zone.run(()=>b.next(T));return s.addListener(E),()=>{s.removeListener(E)}}).pipe(_T(s),ot(({matches:b})=>({query:e,matches:b})),Cl(this._destroySubject)),mql:s};return this._queries.set(e,f),f}}return n.\u0275fac=function(e){return new(e||n)(cn(rr),cn(ri))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function u5(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function sL(n,t){return(n.getAttribute(t)||"").match(/\S+/g)||[]}const d5="cdk-describedby-message",aL="cdk-describedby-host";let T3=0,R3=(()=>{class n{constructor(e,s){this._platform=s,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+T3++,this._document=e,this._id=Xc(H_)+"-"+T3++}describe(e,s,d){if(!this._canBeDescribed(e,s))return;const f=D3(s,d);"string"!=typeof s?($y(s,this._id),this._messageRegistry.set(f,{messageElement:s,referenceCount:0})):this._messageRegistry.has(f)||this._createMessageElement(s,d),this._isElementDescribedByMessage(e,f)||this._addMessageReference(e,f)}removeDescription(e,s,d){if(!s||!this._isElementNode(e))return;const f=D3(s,d);if(this._isElementDescribedByMessage(e,f)&&this._removeMessageReference(e,f),"string"==typeof s){const b=this._messageRegistry.get(f);b&&0===b.referenceCount&&this._deleteMessageElement(f)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${aL}="${this._id}"]`);for(let s=0;s<e.length;s++)this._removeCdkDescribedByReferenceIds(e[s]),e[s].removeAttribute(aL);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,s){const d=this._document.createElement("div");$y(d,this._id),d.textContent=e,s&&d.setAttribute("role",s),this._createMessagesContainer(),this._messagesContainer.appendChild(d),this._messageRegistry.set(D3(e,s),{messageElement:d,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",s=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let f=0;f<s.length;f++)s[f].remove();const d=this._document.createElement("div");d.style.visibility="hidden",d.classList.add(e),d.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&d.setAttribute("platform","server"),this._document.body.appendChild(d),this._messagesContainer=d}_removeCdkDescribedByReferenceIds(e){const s=sL(e,"aria-describedby").filter(d=>0!=d.indexOf(d5));e.setAttribute("aria-describedby",s.join(" "))}_addMessageReference(e,s){const d=this._messageRegistry.get(s);(function u7(n,t,e){const s=sL(n,t);s.some(d=>d.trim()==e.trim())||(s.push(e.trim()),n.setAttribute(t,s.join(" ")))})(e,"aria-describedby",d.messageElement.id),e.setAttribute(aL,this._id),d.referenceCount++}_removeMessageReference(e,s){const d=this._messageRegistry.get(s);d.referenceCount--,function dv(n,t,e){const d=sL(n,t).filter(f=>f!=e.trim());d.length?n.setAttribute(t,d.join(" ")):n.removeAttribute(t)}(e,"aria-describedby",d.messageElement.id),e.removeAttribute(aL)}_isElementDescribedByMessage(e,s){const d=sL(e,"aria-describedby"),f=this._messageRegistry.get(s),b=f&&f.messageElement.id;return!!b&&-1!=d.indexOf(b)}_canBeDescribed(e,s){if(!this._isElementNode(e))return!1;if(s&&"object"==typeof s)return!0;const d=null==s?"":`${s}`.trim(),f=e.getAttribute("aria-label");return!(!d||f&&f.trim()===d)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei),cn($c))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function D3(n,t){return"string"==typeof n?`${t||""}/${n}`:n}function $y(n,t){n.id||(n.id=`${d5}-${t}-${T3++}`)}class O3{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Et,this._typeaheadSubscription=j.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Et,this.change=new Et,t instanceof Su&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const d=e.toArray().indexOf(this._activeItem);d>-1&&d!==this._activeItemIndex&&(this._activeItemIndex=d)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Xx(e=>this._pressedLetters.push(e)),I3(t),Vf(()=>this._pressedLetters.length>0),ot(()=>this._pressedLetters.join(""))).subscribe(e=>{const s=this._getItemsArray();for(let d=1;d<s.length+1;d++){const f=(this._activeItemIndex+d)%s.length,b=s[f];if(!this._skipPredicateFn(b)&&0===b.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(f);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,d=["altKey","ctrlKey","metaKey","shiftKey"].every(f=>!t[f]||this._allowedModifierKeys.indexOf(f)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&d){this.setNextItemActive();break}return;case 38:if(this._vertical&&d){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&d){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&d){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&d){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&d){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&d){const f=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(f>0?f:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&d){const f=this._activeItemIndex+this._pageUpAndDown.delta,b=this._getItemsArray().length;this._setActiveItemByIndex(f<b?f:b-1,-1);break}return;default:return void((d||gT(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),s="number"==typeof t?t:e.indexOf(t);this._activeItem=e[s]??null,this._activeItemIndex=s}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let s=1;s<=e.length;s++){const d=(this._activeItemIndex+t*s+e.length)%e.length;if(!this._skipPredicateFn(e[d]))return void this.setActiveItem(d)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const s=this._getItemsArray();if(s[t]){for(;this._skipPredicateFn(s[t]);)if(!s[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Su?this._items.toArray():this._items}}class p5 extends O3{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class cL extends O3{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function Il(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Jy(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const N3=new Qn("cdk-input-modality-detector-options"),x3={ignoreKeys:[18,17,224,91,16]},JS=Cc({passive:!0,capture:!0});let Id=(()=>{class n{constructor(e,s,d,f){this._platform=e,this._mostRecentTarget=null,this._modality=new g3(null),this._lastTouchMs=0,this._onKeydown=b=>{this._options?.ignoreKeys?.some(E=>E===b.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=GS(b))},this._onMousedown=b=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Il(b)?"keyboard":"mouse"),this._mostRecentTarget=GS(b))},this._onTouchstart=b=>{Jy(b)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=GS(b))},this._options={...x3,...f},this.modalityDetected=this._modality.pipe(o5(1)),this.modalityChanged=this.modalityDetected.pipe(s5()),e.isBrowser&&s.runOutsideAngular(()=>{d.addEventListener("keydown",this._onKeydown,JS),d.addEventListener("mousedown",this._onMousedown,JS),d.addEventListener("touchstart",this._onTouchstart,JS)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,JS),document.removeEventListener("mousedown",this._onMousedown,JS),document.removeEventListener("touchstart",this._onTouchstart,JS))}}return n.\u0275fac=function(e){return new(e||n)(cn($c),cn(ri),cn(Ei),cn(N3,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qr=new Qn("liveAnnouncerElement",{providedIn:"root",factory:function m7(){return null}}),zk=new Qn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let qk=0,Yk=(()=>{class n{constructor(e,s,d,f){this._ngZone=s,this._defaultOptions=f,this._document=d,this._liveElement=e||this._createLiveElement()}announce(e,...s){const d=this._defaultOptions;let f,b;return 1===s.length&&"number"==typeof s[0]?b=s[0]:[f,b]=s,this.clear(),clearTimeout(this._previousTimeout),f||(f=d&&d.politeness?d.politeness:"polite"),null==b&&d&&(b=d.duration),this._liveElement.setAttribute("aria-live",f),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(E=>this._currentResolve=E)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof b&&(this._previousTimeout=setTimeout(()=>this.clear(),b)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",s=this._document.getElementsByClassName(e),d=this._document.createElement("div");for(let f=0;f<s.length;f++)s[f].remove();return d.classList.add(e),d.classList.add("cdk-visually-hidden"),d.setAttribute("aria-atomic","true"),d.setAttribute("aria-live","polite"),d.id="cdk-live-announcer-"+qk++,this._document.body.appendChild(d),d}_exposeAnnouncerToModals(e){const s=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let d=0;d<s.length;d++){const f=s[d],b=f.getAttribute("aria-owns");b?-1===b.indexOf(e)&&f.setAttribute("aria-owns",b+" "+e):f.setAttribute("aria-owns",e)}}}return n.\u0275fac=function(e){return new(e||n)(cn(qr,8),cn(ri),cn(Ei),cn(zk,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xy=new Qn("cdk-focus-monitor-default-options"),lL=Cc({passive:!0,capture:!0});let uL=(()=>{class n{constructor(e,s,d,f,b){this._ngZone=e,this._platform=s,this._inputModalityDetector=d,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Et,this._rootNodeFocusAndBlurListener=E=>{for(let k=GS(E);k;k=k.parentElement)"focus"===E.type?this._onFocus(E,k):this._onBlur(E,k)},this._document=f,this._detectionMode=b?.detectionMode||0}monitor(e,s=!1){const d=Eg(e);if(!this._platform.isBrowser||1!==d.nodeType)return Lu(null);const f=function l3(n){if(function c3(){if(null==a3){const n=typeof document<"u"?document.head:null;a3=!(!n||!n.createShadowRoot&&!n.attachShadow)}return a3}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(d)||this._getDocument(),b=this._elementInfo.get(d);if(b)return s&&(b.checkChildren=!0),b.subject;const E={checkChildren:s,subject:new Et,rootNode:f};return this._elementInfo.set(d,E),this._registerGlobalListeners(E),E.subject}stopMonitoring(e){const s=Eg(e),d=this._elementInfo.get(s);d&&(d.subject.complete(),this._setClasses(s),this._elementInfo.delete(s),this._removeGlobalListeners(d))}focusVia(e,s,d){const f=Eg(e);f===this._getDocument().activeElement?this._getClosestElementsInfo(f).forEach(([E,T])=>this._originChanged(E,s,T)):(this._setOrigin(s),"function"==typeof f.focus&&f.focus(d))}ngOnDestroy(){this._elementInfo.forEach((e,s)=>this.stopMonitoring(s))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,s){e.classList.toggle("cdk-focused",!!s),e.classList.toggle("cdk-touch-focused","touch"===s),e.classList.toggle("cdk-keyboard-focused","keyboard"===s),e.classList.toggle("cdk-mouse-focused","mouse"===s),e.classList.toggle("cdk-program-focused","program"===s)}_setOrigin(e,s=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&s,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,s){const d=this._elementInfo.get(s),f=GS(e);!d||!d.checkChildren&&s!==f||this._originChanged(s,this._getFocusOrigin(f),d)}_onBlur(e,s){const d=this._elementInfo.get(s);!d||d.checkChildren&&e.relatedTarget instanceof Node&&s.contains(e.relatedTarget)||(this._setClasses(s),this._emitOrigin(d,null))}_emitOrigin(e,s){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(s))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const s=e.rootNode,d=this._rootNodeFocusListenerCount.get(s)||0;d||this._ngZone.runOutsideAngular(()=>{s.addEventListener("focus",this._rootNodeFocusAndBlurListener,lL),s.addEventListener("blur",this._rootNodeFocusAndBlurListener,lL)}),this._rootNodeFocusListenerCount.set(s,d+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Cl(this._stopInputModalityDetector)).subscribe(f=>{this._setOrigin(f,!0)}))}_removeGlobalListeners(e){const s=e.rootNode;if(this._rootNodeFocusListenerCount.has(s)){const d=this._rootNodeFocusListenerCount.get(s);d>1?this._rootNodeFocusListenerCount.set(s,d-1):(s.removeEventListener("focus",this._rootNodeFocusAndBlurListener,lL),s.removeEventListener("blur",this._rootNodeFocusAndBlurListener,lL),this._rootNodeFocusListenerCount.delete(s))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,s,d){this._setClasses(e,s),this._emitOrigin(d,s),this._lastFocusOrigin=s}_getClosestElementsInfo(e){const s=[];return this._elementInfo.forEach((d,f)=>{(f===e||d.checkChildren&&f.contains(e))&&s.push([f,d])}),s}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:s,mostRecentModality:d}=this._inputModalityDetector;if("mouse"!==d||!s||s===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const f=e.labels;if(f)for(let b=0;b<f.length;b++)if(f[b].contains(s))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(cn(ri),cn($c),cn(Id),cn(Ei,8),cn(Xy,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const L3="cdk-high-contrast-black-on-white",dL="cdk-high-contrast-white-on-black",B3="cdk-high-contrast-active";let pL=(()=>{class n{constructor(e,s){this._platform=e,this._document=s,this._breakpointSubscription=Xc(w3).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const s=this._document.defaultView||window,d=s&&s.getComputedStyle?s.getComputedStyle(e):null,f=(d&&d.backgroundColor||"").replace(/ /g,"");switch(e.remove(),f){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(B3,L3,dL),this._hasCheckedHighContrastMode=!0;const s=this.getHighContrastMode();1===s?e.add(B3,L3):2===s&&e.add(B3,dL)}}}return n.\u0275fac=function(e){return new(e||n)(cn($c),cn(Ei))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v5=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(cn(pL))},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[l5]}),n})();const F3=new Qn("cdk-dir-doc",{providedIn:"root",factory:function hL(){return Xc(Ei)}}),A5=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let XS=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new Yi,e){const d=e.documentElement?e.documentElement.dir:null;this.value=function U3(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?A5.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||d||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(cn(F3,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$l=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({}),n})();const mL=["text"];function AT(n,t){if(1&n&&Ui(0,"mat-pseudo-checkbox",5),2&n){const e=Cr();fn("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function Bu(n,t){if(1&n&&(jt(0,"span",6),bn(1),Yt()),2&n){const e=Cr();Ft(1),_i("(",e.group.label,")")}}const E5=[[["mat-icon"]],"*"],v7=["mat-icon","*"],C5=new Qn("mat-sanity-checks",{providedIn:"root",factory:function S5(){return!0}});let gs=(()=>{class n{constructor(e,s,d){this._sanityChecks=s,this._document=d,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Fk()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(cn(pL),cn(C5,8),cn(Ei))},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[$l,$l]}),n})();function $k(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=ya(t)}}}function gL(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const s=e||this.defaultColor;s!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),s&&this._elementRef.nativeElement.classList.add(`mat-${s}`),this._color=s)}}}function _L(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ya(t)}}}function I5(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?uv(e):this.defaultTabIndex}}}function V3(n){return class extends n{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,f=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);f!==t&&(this.errorState=f,this.stateChanges.next())}}}let j3=(()=>{class n{isErrorState(e,s){return!!(e&&e.invalid&&(e.touched||s&&s.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Q3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[gs,gs]}),n})();class T5{constructor(t,e,s,d=!1){this._renderer=t,this.element=e,this.config=s,this._animationForciblyDisabledThroughCss=d,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const vL={enterDuration:225,exitDuration:150},ZS=Cc({passive:!0}),R5=["mousedown","touchstart"],Td=["mouseup","mouseleave","touchend","touchcancel"];class M7{constructor(t,e,s,d){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,d.isBrowser&&(this._containerElement=Eg(s))}fadeInRipple(t,e,s={}){const d=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),f={...vL,...s.animation};s.centered&&(t=d.left+d.width/2,e=d.top+d.height/2);const b=s.radius||function N7(n,t,e){const s=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),d=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(s*s+d*d)}(t,e,d),E=t-d.left,T=e-d.top,k=f.enterDuration,Q=document.createElement("div");Q.classList.add("mat-ripple-element"),Q.style.left=E-b+"px",Q.style.top=T-b+"px",Q.style.height=2*b+"px",Q.style.width=2*b+"px",null!=s.color&&(Q.style.backgroundColor=s.color),Q.style.transitionDuration=`${k}ms`,this._containerElement.appendChild(Q);const ie=window.getComputedStyle(Q),xe=ie.transitionDuration,qe="none"===ie.transitionProperty||"0s"===xe||"0s, 0s"===xe||0===d.width&&0===d.height,ft=new T5(this,Q,s,qe);Q.style.transform="scale3d(1, 1, 1)",ft.state=0,s.persistent||(this._mostRecentTransientRipple=ft);let Qt=null;return!qe&&(k||f.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Kt=()=>this._finishRippleTransition(ft),pn=()=>this._destroyRipple(ft);Q.addEventListener("transitionend",Kt),Q.addEventListener("transitioncancel",pn),Qt={onTransitionEnd:Kt,onTransitionCancel:pn}}),this._activeRipples.set(ft,Qt),(qe||!k)&&this._finishRippleTransition(ft),ft}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,s={...vL,...t.config.animation};e.style.transitionDuration=`${s.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!s.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Eg(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(R5))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Td),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:s}=t.config;t.state=1,!s&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=Il(t),s=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!s&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Jy(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let s=0;s<e.length;s++)this.fadeInRipple(e[s].clientX,e[s].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,ZS)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(R5.forEach(t=>{this._triggerElement.removeEventListener(t,this,ZS)}),this._pointerUpEventsRegistered&&Td.forEach(t=>{this._triggerElement.removeEventListener(t,this,ZS)}))}}const x7=new Qn("mat-ripple-global-options");let ET=(()=>{class n{constructor(e,s,d,f,b){this._elementRef=e,this._animationMode=b,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=f||{},this._rippleRenderer=new M7(this,s,e,d)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,s=0,d){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,s,{...this.rippleConfig,...d}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(ri),yt($c),yt(x7,8),yt(ld,8))},n.\u0275dir=mr({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,s){2&e&&is("mat-ripple-unbounded",s.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Fu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[gs,gs]}),n})(),D5=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(yt(ld,8))},n.\u0275cmp=aa({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,s){2&e&&is("mat-pseudo-checkbox-indeterminate","indeterminate"===s.state)("mat-pseudo-checkbox-checked","checked"===s.state)("mat-pseudo-checkbox-disabled",s.disabled)("_mat-animation-noopable","NoopAnimations"===s._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,s){},styles:['.mat-pseudo-checkbox{border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}.mat-pseudo-checkbox-checked::after{top:2.7px;width:10px;height:4px}'],encapsulation:2,changeDetection:0}),n})(),e0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[gs]}),n})();const t0=new Qn("MAT_OPTION_PARENT_COMPONENT"),AL=new Qn("MatOptgroup");let Zy=0;class O5{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let k5=(()=>{class n{constructor(e,s,d,f){this._element=e,this._changeDetectorRef=s,this._parent=d,this.group=f,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Zy++,this.onSelectionChange=new Yi,this._stateChanges=new Et}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=ya(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,s){const d=this._getHostElement();"function"==typeof d.focus&&d.focus(s)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!gT(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new O5(this,e))}}return n.\u0275fac=function(e){AA()},n.\u0275dir=mr({type:n,viewQuery:function(e,s){if(1&e&&Hc(mL,7),2&e){let d;vo(d=Ao())&&(s._text=d.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),G3=(()=>{class n extends k5{constructor(e,s,d,f){super(e,s,d,f)}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(ma),yt(t0,8),yt(AL,8))},n.\u0275cmp=aa({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mat-mdc-focus-indicator","mdc-list-item"],hostVars:12,hostBindings:function(e,s){1&e&&eo("click",function(){return s._selectViaInteraction()})("keydown",function(f){return s._handleKeydown(f)}),2&e&&(kb("id",s.id),io("tabindex",s._getTabIndex())("aria-selected",s._getAriaSelected())("aria-disabled",s.disabled.toString()),is("mdc-list-item--selected",s.selected)("mat-mdc-option-multiple",s.multiple)("mat-mdc-option-active",s.active)("mdc-list-item--disabled",s.disabled))},exportAs:["matOption"],features:[Or],ngContentSelectors:v7,decls:7,vars:4,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,s){1&e&&(Vc(E5),Kn(0,AT,1,2,"mat-pseudo-checkbox",0),oo(1),jt(2,"span",1,2),oo(4,1),Yt(),Kn(5,Bu,2,1,"span",3),Ui(6,"div",4)),2&e&&(fn("ngIf",s.multiple),Ft(5),fn("ngIf",s.group&&s.group._inert),Ft(1),fn("matRippleTrigger",s._getHostElement())("matRippleDisabled",s.disabled||s.disableRipple))},dependencies:[ET,J_,D5],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox{margin-right:0;margin-left:16px}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),yL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[Fu,Xo,gs,e0]}),n})();const U7=["mat-button",""],pv=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],K3=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Ic=["mat-fab",""],Qo=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],eE=gL($k(_L(class{constructor(n){this._elementRef=n}})));let CT=(()=>{class n extends eE{constructor(e,s,d,f){super(e),this._platform=s,this._ngZone=d,this._animationMode=f,this._focusMonitor=Xc(uL),this._isFab=!1;const b=e.nativeElement.classList;for(const E of Qo)this._hasHostAttributes(E.selector)&&E.mdcClasses.forEach(T=>{b.add(T)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",s){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,s):this._elementRef.nativeElement.focus(s)}_hasHostAttributes(...e){return e.some(s=>this._elementRef.nativeElement.hasAttribute(s))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(e){AA()},n.\u0275dir=mr({type:n,viewQuery:function(e,s){if(1&e&&Hc(ET,5),2&e){let d;vo(d=Ao())&&(s.ripple=d.first)}},features:[Or]}),n})(),nc=(()=>{class n extends CT{constructor(e,s,d,f){super(e,s,d,f)}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt($c),yt(ri),yt(ld,8))},n.\u0275cmp=aa({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,s){2&e&&(io("disabled",s.disabled||null),is("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Or],attrs:U7,ngContentSelectors:K3,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,s){1&e&&(Vc(pv),Ui(0,"span",0),oo(1),jt(2,"span",1),oo(3,1),Yt(),oo(4,2),Ui(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(is("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab),Ft(6),fn("matRippleDisabled",s._isRippleDisabled())("matRippleTrigger",s._elementRef.nativeElement))},dependencies:[ET],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})();const Xk=new Qn("mat-mdc-fab-default-options",{providedIn:"root",factory:EL});function EL(){return{color:"accent"}}const Zk=EL();let P5=(()=>{class n extends CT{constructor(e,s,d,f,b){super(e,s,d,f),this._options=b,this._isFab=!0,this._options=this._options||Zk,this.color=this.defaultColor=this._options.color||Zk.color}get extended(){return this._extended}set extended(e){this._extended=ya(e)}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt($c),yt(ri),yt(ld,8),yt(Xk,8))},n.\u0275cmp=aa({type:n,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(e,s){2&e&&(io("disabled",s.disabled||null),is("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0)("mdc-fab--extended",s.extended)("mat-mdc-extended-fab",s.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[Or],attrs:Ic,ngContentSelectors:K3,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,s){1&e&&(Vc(pv),Ui(0,"span",0),oo(1),jt(2,"span",1),oo(3,1),Yt(),oo(4,2),Ui(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(is("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab),Ft(6),fn("matRippleDisabled",s._isRippleDisabled())("matRippleTrigger",s._elementRef.nativeElement))},dependencies:[ET],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),n})(),Y3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[gs,Fu,gs]}),n})();class M5{}class z7{}const hv="*";function bg(n,t){return{type:7,name:n,definitions:t,options:{}}}function Sg(n,t=null){return{type:4,styles:t,timings:n}}function N5(n,t=null){return{type:2,steps:n,options:t}}function wc(n){return{type:6,styles:n,offset:null}}function Uu(n,t,e){return{type:0,name:n,styles:t,options:e}}function Qf(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Y7(n=null){return{type:9,options:n}}function $7(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function x5(n){Promise.resolve().then(n)}class eP{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){x5(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class L5{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,s=0,d=0;const f=this.players.length;0==f?x5(()=>this._onFinish()):this.players.forEach(b=>{b.onDone(()=>{++e==f&&this._onFinish()}),b.onDestroy(()=>{++s==f&&this._onDestroy()}),b.onStart(()=>{++d==f&&this._onStart()})}),this.totalTime=this.players.reduce((b,E)=>Math.max(b,E.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(s=>{const d=s.totalTime?Math.min(1,e/s.totalTime):1;s.setPosition(d)})}getPosition(){const t=this.players.reduce((e,s)=>null===e||s.totalTime>e.totalTime?s:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class tP{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class J3 extends tP{constructor(t,e,s,d,f){super(),this.component=t,this.viewContainerRef=e,this.injector=s,this.componentFactoryResolver=d,this.projectableNodes=f}}class nP extends tP{constructor(t,e,s,d){super(),this.templateRef=t,this.viewContainerRef=e,this.context=s,this.injector=d}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class B5 extends tP{constructor(t){super(),this.element=t instanceof Ni?t.nativeElement:t}}class bL{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof J3?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof nP?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof B5?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class TT extends bL{constructor(t,e,s,d,f){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=s,this._defaultInjector=d,this.attachDomPortal=b=>{const E=b.element,T=this._document.createComment("dom-portal");E.parentNode.insertBefore(T,E),this.outletElement.appendChild(E),this._attachedPortal=b,super.setDisposeFn(()=>{T.parentNode&&T.parentNode.replaceChild(E,T)})},this._document=f}attachComponentPortal(t){const s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let d;return t.viewContainerRef?(d=t.viewContainerRef.createComponent(s,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>d.destroy())):(d=s.create(t.injector||this._defaultInjector||Uc.NULL),this._appRef.attachView(d.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(d.hostView),d.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(d)),this._attachedPortal=t,d}attachTemplatePortal(t){let e=t.viewContainerRef,s=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return s.rootNodes.forEach(d=>this.outletElement.appendChild(d)),s.detectChanges(),this.setDisposeFn(()=>{let d=e.indexOf(s);-1!==d&&e.remove(d)}),this._attachedPortal=t,s}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let fv=(()=>{class n extends bL{constructor(e,s,d){super(),this._componentFactoryResolver=e,this._viewContainerRef=s,this._isInitialized=!1,this.attached=new Yi,this.attachDomPortal=f=>{const b=f.element,E=this._document.createComment("dom-portal");f.setAttachedHost(this),b.parentNode.insertBefore(E,b),this._getRootNode().appendChild(b),this._attachedPortal=f,super.setDisposeFn(()=>{E.parentNode&&E.parentNode.replaceChild(b,E)})},this._document=d}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const s=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,f=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),b=s.createComponent(f,s.length,e.injector||s.injector,e.projectableNodes||void 0);return s!==this._viewContainerRef&&this._getRootNode().appendChild(b.hostView.rootNodes[0]),super.setDisposeFn(()=>b.destroy()),this._attachedPortal=e,this._attachedRef=b,this.attached.emit(b),b}attachTemplatePortal(e){e.setAttachedHost(this);const s=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(yt(qi),yt(vl),yt(Ei))},n.\u0275dir=mr({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Or]}),n})(),X3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({}),n})();const U5=["addListener","removeListener"],tH=["addEventListener","removeEventListener"],nH=["on","off"];function Z3(n,t,e,s){if(F(e)&&(s=e,e=void 0),s)return Z3(n,t,e).pipe(sT(s));const[d,f]=function IL(n){return F(n.addEventListener)&&F(n.removeEventListener)}(n)?tH.map(b=>E=>n[b](t,E,e)):function CL(n){return F(n.addListener)&&F(n.removeListener)}(n)?U5.map(SL(n,t)):function eV(n){return F(n.on)&&F(n.off)}(n)?nH.map(SL(n,t)):[];if(!d&&yo(n))return Ld(b=>Z3(b,t,e))(Sn(n));if(!d)throw new TypeError("Invalid event target");return new rt(b=>{const E=(...T)=>b.next(1<T.length?T:T[0]);return d(E),()=>f(E)})}function SL(n,t){return e=>s=>n[e](t,s)}const Rd={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:s}=Rd;s&&(t=s.requestAnimationFrame,e=s.cancelAnimationFrame);const d=t(f=>{e=void 0,n(f)});return new j(()=>e?.(d))},requestAnimationFrame(...n){const{delegate:t}=Rd;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Rd;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class j5 extends S3{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let s,d=-1;t=t||e.shift();const f=e.length;do{if(s=t.execute(t.state,t.delay))break}while(++d<f&&(t=e.shift()));if(this._active=!1,s){for(;++d<f&&(t=e.shift());)t.unsubscribe();throw s}}}(class V5 extends E3{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=Rd.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);0===t.actions.length&&(Rd.cancelAnimationFrame(e),t._scheduled=void 0)}});let rP,iH=1;const iP={};function wL(n){return n in iP&&(delete iP[n],!0)}const oH={setImmediate(n){const t=iH++;return iP[t]=!0,rP||(rP=Promise.resolve()),rP.then(()=>wL(t)&&n()),t},clearImmediate(n){wL(n)}},{setImmediate:sH,clearImmediate:aH}=oH,oP={setImmediate(...n){const{delegate:t}=oP;return(t?.setImmediate||sH)(...n)},clearImmediate(n){const{delegate:t}=oP;return(t?.clearImmediate||aH)(n)},delegate:void 0},TL=new class cH extends S3{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let s,d=-1;t=t||e.shift();const f=e.length;do{if(s=t.execute(t.state,t.delay))break}while(++d<f&&(t=e.shift()));if(this._active=!1,s){for(;++d<f&&(t=e.shift());)t.unsubscribe();throw s}}}(class wp extends E3{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=oP.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);0===t.actions.length&&(oP.clearImmediate(e),t._scheduled=void 0)}});function H5(n=0,t,e=eL){let s=-1;return null!=t&&(p0(t)?e=t:s=t),new rt(d=>{let f=function RT(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;f<0&&(f=0);let b=0;return e.schedule(function(){d.closed||(d.next(b++),0<=s?this.schedule(void 0,s):d.complete())},f)})}function G5(n,t=eL){return function lH(n){return $e((t,e)=>{let s=!1,d=null,f=null,b=!1;const E=()=>{if(f?.unsubscribe(),f=null,s){s=!1;const k=d;d=null,e.next(k)}b&&e.complete()},T=()=>{f=null,b&&e.complete()};t.subscribe(new De(e,k=>{s=!0,d=k,f||Sn(n(k)).subscribe(f=new De(e,E,T))},()=>{b=!0,(!s||!f||f.closed)&&e.complete()}))})}(()=>H5(n,t))}let sP=(()=>{class n{constructor(e,s,d){this._ngZone=e,this._platform=s,this._scrolled=new Et,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=d}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const s=this.scrollContainers.get(e);s&&(s.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new rt(s=>{this._globalSubscription||this._addGlobalListener();const d=e>0?this._scrolled.pipe(G5(e)).subscribe(s):this._scrolled.subscribe(s);return this._scrolledCount++,()=>{d.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Lu()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,s)=>this.deregister(s)),this._scrolled.complete()}ancestorScrolled(e,s){const d=this.getAncestorScrollContainers(e);return this.scrolled(s).pipe(Vf(f=>!f||d.indexOf(f)>-1))}getAncestorScrollContainers(e){const s=[];return this.scrollContainers.forEach((d,f)=>{this._scrollableContainsElement(f,e)&&s.push(f)}),s}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,s){let d=Eg(s),f=e.getElementRef().nativeElement;do{if(d==f)return!0}while(d=d.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Z3(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(cn(ri),cn($c),cn(Ei,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nV=(()=>{class n{constructor(e,s,d){this._platform=e,this._change=new Et,this._changeListener=f=>{this._change.next(f)},this._document=d,s.runOutsideAngular(()=>{if(e.isBrowser){const f=this._getWindow();f.addEventListener("resize",this._changeListener),f.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:s,height:d}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+d,right:e.left+s,height:d,width:s}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,s=this._getWindow(),d=e.documentElement,f=d.getBoundingClientRect();return{top:-f.top||e.body.scrollTop||s.scrollY||d.scrollTop||0,left:-f.left||e.body.scrollLeft||s.scrollX||d.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(G5(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(cn($c),cn(ri),cn(Ei,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({}),n})(),q5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[$l,aP,$l,aP]}),n})();const rV=HS();class _H{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Za(-this._previousScrollPosition.left),t.style.top=Za(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,s=t.style,d=this._document.body.style,f=s.scrollBehavior||"",b=d.scrollBehavior||"";this._isEnabled=!1,s.left=this._previousHTMLStyles.left,s.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),rV&&(s.scrollBehavior=d.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),rV&&(s.scrollBehavior=f,d.scrollBehavior=b)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,s=this._viewportRuler.getViewportSize();return e.scrollHeight>s.height||e.scrollWidth>s.width}}class Y5{constructor(t,e,s,d){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=s,this._config=d,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class $5{enable(){}disable(){}attach(){}}function iV(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function J5(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class X5{constructor(t,e,s,d){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=s,this._config=d,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:s,height:d}=this._viewportRuler.getViewportSize();iV(e,[{width:s,height:d,bottom:d,right:s,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let oV=(()=>{class n{constructor(e,s,d,f){this._scrollDispatcher=e,this._viewportRuler=s,this._ngZone=d,this.noop=()=>new $5,this.close=b=>new Y5(this._scrollDispatcher,this._ngZone,this._viewportRuler,b),this.block=()=>new _H(this._viewportRuler,this._document),this.reposition=b=>new X5(this._scrollDispatcher,this._viewportRuler,this._ngZone,b),this._document=f}}return n.\u0275fac=function(e){return new(e||n)(cn(sP),cn(nV),cn(ri),cn(Ei))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cP{constructor(t){if(this.scrollStrategy=new $5,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const s of e)void 0!==t[s]&&(this[s]=t[s])}}}class vH{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let OL=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const s=this._attachedOverlays.indexOf(e);s>-1&&this._attachedOverlays.splice(s,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mh=(()=>{class n extends OL{constructor(e,s){super(e),this._ngZone=s,this._keydownListener=d=>{const f=this._attachedOverlays;for(let b=f.length-1;b>-1;b--)if(f[b]._keydownEvents.observers.length>0){const E=f[b]._keydownEvents;this._ngZone?this._ngZone.run(()=>E.next(d)):E.next(d);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei),cn(ri,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yH=(()=>{class n extends OL{constructor(e,s,d){super(e),this._platform=s,this._ngZone=d,this._cursorStyleIsSet=!1,this._pointerDownListener=f=>{this._pointerDownEventTarget=GS(f)},this._clickListener=f=>{const b=GS(f),E="click"===f.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:b;this._pointerDownEventTarget=null;const T=this._attachedOverlays.slice();for(let k=T.length-1;k>-1;k--){const Q=T[k];if(Q._outsidePointerEvents.observers.length<1||!Q.hasAttached())continue;if(Q.overlayElement.contains(b)||Q.overlayElement.contains(E))break;const ie=Q._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>ie.next(f)):ie.next(f)}}}add(e){if(super.add(e),!this._isAttached){const s=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(s)):this._addEventListeners(s),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=s.style.cursor,s.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei),cn($c),cn(ri,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Z5=(()=>{class n{constructor(e,s){this._platform=s,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Fk()){const d=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let f=0;f<d.length;f++)d[f].remove()}const s=this._document.createElement("div");s.classList.add(e),Fk()?s.setAttribute("platform","test"):this._platform.isBrowser||s.setAttribute("platform","server"),this._document.body.appendChild(s),this._containerElement=s}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei),cn($c))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aV{constructor(t,e,s,d,f,b,E,T,k,Q=!1){this._portalOutlet=t,this._host=e,this._pane=s,this._config=d,this._ngZone=f,this._keyboardDispatcher=b,this._document=E,this._location=T,this._outsideClickDispatcher=k,this._animationsDisabled=Q,this._backdropElement=null,this._backdropClick=new Et,this._attachments=new Et,this._detachments=new Et,this._locationChanges=j.EMPTY,this._backdropClickHandler=ie=>this._backdropClick.next(ie),this._backdropTransitionendHandler=ie=>{this._disposeBackdrop(ie.target)},this._keydownEvents=new Et,this._outsidePointerEvents=new Et,d.scrollStrategy&&(this._scrollStrategy=d.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=d.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Qu(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Za(this._config.width),t.height=Za(this._config.height),t.minWidth=Za(this._config.minWidth),t.minHeight=Za(this._config.minHeight),t.maxWidth=Za(this._config.maxWidth),t.maxHeight=Za(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,s){const d=tL(e||[]).filter(f=>!!f);d.length&&(s?t.classList.add(...d):t.classList.remove(...d))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Cl(No(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const e8="cdk-overlay-connected-position-bounding-box",cV=/([A-Za-z%]+)$/;class t8{constructor(t,e,s,d,f){this._viewportRuler=e,this._document=s,this._platform=d,this._overlayContainer=f,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Et,this._resizeSubscription=j.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(e8),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,s=this._viewportRect,d=this._containerRect,f=[];let b;for(let E of this._preferredPositions){let T=this._getOriginPoint(t,d,E),k=this._getOverlayPoint(T,e,E),Q=this._getOverlayFit(k,e,s,E);if(Q.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(E,T);this._canFitWithFlexibleDimensions(Q,k,s)?f.push({position:E,origin:T,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(T,E)}):(!b||b.overlayFit.visibleArea<Q.visibleArea)&&(b={overlayFit:Q,overlayPoint:k,originPoint:T,position:E,overlayRect:e})}if(f.length){let E=null,T=-1;for(const k of f){const Q=k.boundingBoxRect.width*k.boundingBoxRect.height*(k.position.weight||1);Q>T&&(T=Q,E=k)}return this._isPushed=!1,void this._applyPosition(E.position,E.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(b.position,b.originPoint);this._applyPosition(b.position,b.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Jc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(e8),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,s){let d,f;if("center"==s.originX)d=t.left+t.width/2;else{const b=this._isRtl()?t.right:t.left,E=this._isRtl()?t.left:t.right;d="start"==s.originX?b:E}return e.left<0&&(d-=e.left),f="center"==s.originY?t.top+t.height/2:"top"==s.originY?t.top:t.bottom,e.top<0&&(f-=e.top),{x:d,y:f}}_getOverlayPoint(t,e,s){let d,f;return d="center"==s.overlayX?-e.width/2:"start"===s.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,f="center"==s.overlayY?-e.height/2:"top"==s.overlayY?0:-e.height,{x:t.x+d,y:t.y+f}}_getOverlayFit(t,e,s,d){const f=lP(e);let{x:b,y:E}=t,T=this._getOffset(d,"x"),k=this._getOffset(d,"y");T&&(b+=T),k&&(E+=k);let Ie=0-E,xe=E+f.height-s.height,qe=this._subtractOverflows(f.width,0-b,b+f.width-s.width),ft=this._subtractOverflows(f.height,Ie,xe),Qt=qe*ft;return{visibleArea:Qt,isCompletelyWithinViewport:f.width*f.height===Qt,fitsInViewportVertically:ft===f.height,fitsInViewportHorizontally:qe==f.width}}_canFitWithFlexibleDimensions(t,e,s){if(this._hasFlexibleDimensions){const d=s.bottom-e.y,f=s.right-e.x,b=n8(this._overlayRef.getConfig().minHeight),E=n8(this._overlayRef.getConfig().minWidth),k=t.fitsInViewportHorizontally||null!=E&&E<=f;return(t.fitsInViewportVertically||null!=b&&b<=d)&&k}return!1}_pushOverlayOnScreen(t,e,s){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const d=lP(e),f=this._viewportRect,b=Math.max(t.x+d.width-f.width,0),E=Math.max(t.y+d.height-f.height,0),T=Math.max(f.top-s.top-t.y,0),k=Math.max(f.left-s.left-t.x,0);let Q=0,ie=0;return Q=d.width<=f.width?k||-b:t.x<this._viewportMargin?f.left-s.left-t.x:0,ie=d.height<=f.height?T||-E:t.y<this._viewportMargin?f.top-s.top-t.y:0,this._previousPushAmount={x:Q,y:ie},{x:t.x+Q,y:t.y+ie}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const s=this._getScrollVisibility(),d=new vH(t,s);this._positionChanges.next(d)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let s,d=t.overlayY;s="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let f=0;f<e.length;f++)e[f].style.transformOrigin=`${s} ${d}`}_calculateBoundingBoxRect(t,e){const s=this._viewportRect,d=this._isRtl();let f,b,E,Q,ie,Ie;if("top"===e.overlayY)b=t.y,f=s.height-b+this._viewportMargin;else if("bottom"===e.overlayY)E=s.height-t.y+2*this._viewportMargin,f=s.height-E+this._viewportMargin;else{const xe=Math.min(s.bottom-t.y+s.top,t.y),qe=this._lastBoundingBoxSize.height;f=2*xe,b=t.y-xe,f>qe&&!this._isInitialRender&&!this._growAfterOpen&&(b=t.y-qe/2)}if("end"===e.overlayX&&!d||"start"===e.overlayX&&d)Ie=s.width-t.x+this._viewportMargin,Q=t.x-this._viewportMargin;else if("start"===e.overlayX&&!d||"end"===e.overlayX&&d)ie=t.x,Q=s.right-t.x;else{const xe=Math.min(s.right-t.x+s.left,t.x),qe=this._lastBoundingBoxSize.width;Q=2*xe,ie=t.x-xe,Q>qe&&!this._isInitialRender&&!this._growAfterOpen&&(ie=t.x-qe/2)}return{top:b,left:ie,bottom:E,right:Ie,width:Q,height:f}}_setBoundingBoxStyles(t,e){const s=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(s.height=Math.min(s.height,this._lastBoundingBoxSize.height),s.width=Math.min(s.width,this._lastBoundingBoxSize.width));const d={};if(this._hasExactPosition())d.top=d.left="0",d.bottom=d.right=d.maxHeight=d.maxWidth="",d.width=d.height="100%";else{const f=this._overlayRef.getConfig().maxHeight,b=this._overlayRef.getConfig().maxWidth;d.height=Za(s.height),d.top=Za(s.top),d.bottom=Za(s.bottom),d.width=Za(s.width),d.left=Za(s.left),d.right=Za(s.right),d.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",d.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",f&&(d.maxHeight=Za(f)),b&&(d.maxWidth=Za(b))}this._lastBoundingBoxSize=s,Jc(this._boundingBox.style,d)}_resetBoundingBoxStyles(){Jc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Jc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const s={},d=this._hasExactPosition(),f=this._hasFlexibleDimensions,b=this._overlayRef.getConfig();if(d){const Q=this._viewportRuler.getViewportScrollPosition();Jc(s,this._getExactOverlayY(e,t,Q)),Jc(s,this._getExactOverlayX(e,t,Q))}else s.position="static";let E="",T=this._getOffset(e,"x"),k=this._getOffset(e,"y");T&&(E+=`translateX(${T}px) `),k&&(E+=`translateY(${k}px)`),s.transform=E.trim(),b.maxHeight&&(d?s.maxHeight=Za(b.maxHeight):f&&(s.maxHeight="")),b.maxWidth&&(d?s.maxWidth=Za(b.maxWidth):f&&(s.maxWidth="")),Jc(this._pane.style,s)}_getExactOverlayY(t,e,s){let d={top:"",bottom:""},f=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(f=this._pushOverlayOnScreen(f,this._overlayRect,s)),"bottom"===t.overlayY?d.bottom=this._document.documentElement.clientHeight-(f.y+this._overlayRect.height)+"px":d.top=Za(f.y),d}_getExactOverlayX(t,e,s){let b,d={left:"",right:""},f=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(f=this._pushOverlayOnScreen(f,this._overlayRect,s)),b=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===b?d.right=this._document.documentElement.clientWidth-(f.x+this._overlayRect.width)+"px":d.left=Za(f.x),d}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),s=this._scrollables.map(d=>d.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:J5(t,s),isOriginOutsideView:iV(t,s),isOverlayClipped:J5(e,s),isOverlayOutsideView:iV(e,s)}}_subtractOverflows(t,...e){return e.reduce((s,d)=>s-Math.max(d,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,s=this._viewportRuler.getViewportScrollPosition();return{top:s.top+this._viewportMargin,left:s.left+this._viewportMargin,right:s.left+t-this._viewportMargin,bottom:s.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&tL(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Ni)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,s=t.height||0;return{top:t.y,bottom:t.y+s,left:t.x,right:t.x+e,height:s,width:e}}}function Jc(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function n8(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(cV);return e&&"px"!==e?null:parseFloat(t)}return n||null}function lP(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const kL="cdk-global-overlay-wrapper";class OT{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(kL),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,s=this._overlayRef.getConfig(),{width:d,height:f,maxWidth:b,maxHeight:E}=s,T=!("100%"!==d&&"100vw"!==d||b&&"100%"!==b&&"100vw"!==b),k=!("100%"!==f&&"100vh"!==f||E&&"100%"!==E&&"100vh"!==E),Q=this._xPosition,ie=this._xOffset,Ie="rtl"===this._overlayRef.getConfig().direction;let xe="",qe="",ft="";T?ft="flex-start":"center"===Q?(ft="center",Ie?qe=ie:xe=ie):Ie?"left"===Q||"end"===Q?(ft="flex-end",xe=ie):("right"===Q||"start"===Q)&&(ft="flex-start",qe=ie):"left"===Q||"start"===Q?(ft="flex-start",xe=ie):("right"===Q||"end"===Q)&&(ft="flex-end",qe=ie),t.position=this._cssPosition,t.marginLeft=T?"0":xe,t.marginTop=k?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=T?"0":qe,e.justifyContent=ft,e.alignItems=k?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,s=e.style;e.classList.remove(kL),s.justifyContent=s.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Hf=(()=>{class n{constructor(e,s,d,f){this._viewportRuler=e,this._document=s,this._platform=d,this._overlayContainer=f}global(){return new OT}flexibleConnectedTo(e){return new t8(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(cn(nV),cn(Ei),cn($c),cn(Z5))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EH=0,tE=(()=>{class n{constructor(e,s,d,f,b,E,T,k,Q,ie,Ie,xe){this.scrollStrategies=e,this._overlayContainer=s,this._componentFactoryResolver=d,this._positionBuilder=f,this._keyboardDispatcher=b,this._injector=E,this._ngZone=T,this._document=k,this._directionality=Q,this._location=ie,this._outsideClickDispatcher=Ie,this._animationsModuleType=xe}create(e){const s=this._createHostElement(),d=this._createPaneElement(s),f=this._createPortalOutlet(d),b=new cP(e);return b.direction=b.direction||this._directionality.value,new aV(f,s,d,b,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const s=this._document.createElement("div");return s.id="cdk-overlay-"+EH++,s.classList.add("cdk-overlay-pane"),e.appendChild(s),s}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(If)),new TT(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(cn(oV),cn(Z5),cn(qi),cn(Hf),cn(Mh),cn(Uc),cn(ri),cn(Ei),cn(XS),cn(RN),cn(yH),cn(ld,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mv=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i8=new Qn("cdk-connected-overlay-scroll-strategy");let PL=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni))},n.\u0275dir=mr({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),lV=(()=>{class n{constructor(e,s,d,f,b){this._overlay=e,this._dir=b,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=j.EMPTY,this._attachSubscription=j.EMPTY,this._detachSubscription=j.EMPTY,this._positionSubscription=j.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Yi,this.positionChange=new Yi,this.attach=new Yi,this.detach=new Yi,this.overlayKeydown=new Yi,this.overlayOutsideClick=new Yi,this._templatePortal=new nP(s,d),this._scrollStrategyFactory=f,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ya(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=ya(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=ya(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=ya(e)}get push(){return this._push}set push(e){this._push=ya(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=mv);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(s=>{this.overlayKeydown.next(s),27===s.keyCode&&!this.disableClose&&!gT(s)&&(s.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(s=>{this.overlayOutsideClick.next(s)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),s=new cP({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(s.width=this.width),(this.height||0===this.height)&&(s.height=this.height),(this.minWidth||0===this.minWidth)&&(s.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(s.minHeight=this.minHeight),this.backdropClass&&(s.backdropClass=this.backdropClass),this.panelClass&&(s.panelClass=this.panelClass),s}_updatePositionStrategy(e){const s=this.positions.map(d=>({originX:d.originX,originY:d.originY,overlayX:d.overlayX,overlayY:d.overlayY,offsetX:d.offsetX||this.offsetX,offsetY:d.offsetY||this.offsetY,panelClass:d.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(s).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof PL?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function gH(n,t=!1){return $e((e,s)=>{let d=0;e.subscribe(new De(s,f=>{const b=n(f,d++);(b||t)&&s.next(f),!b&&s.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(yt(tE),yt(_l),yt(vl),yt(i8),yt(XS,8))},n.\u0275dir=mr({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Bs]}),n})();const ML={provide:i8,deps:[tE],useFactory:function bH(n){return()=>n.scrollStrategies.reposition()}};let uV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({providers:[tE,ML],imports:[$l,X3,q5,q5]}),n})();function uP(n,t){if(1&n){const e=qa();jt(0,"div",2)(1,"button",3),eo("click",function(){return Qa(e),Ko(Cr().action())}),bn(2),Yt()()}if(2&n){const e=Cr();Ft(2),_i(" ",e.data.action," ")}}const dV=["label"];function NL(n,t){}const SH=Math.pow(2,31)-1;class xL{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Et,this._afterOpened=new Et,this._onAction=new Et,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,SH))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const Tp=new Qn("MatSnackBarData");class Dd{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let dP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=mr({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),n})(),CH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=mr({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),n})(),IH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=mr({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),n})(),kT=(()=>{class n{constructor(e,s){this.snackBarRef=e,this.data=s}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(yt(xL),yt(Tp))},n.\u0275cmp=aa({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,s){1&e&&(jt(0,"div",0),bn(1),Yt(),Kn(2,uP,3,1,"div",1)),2&e&&(Ft(1),_i(" ",s.data.message,"\n"),Ft(1),fn("ngIf",s.hasAction))},dependencies:[J_,nc,dP,CH,IH],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),n})();const o8={snackBarState:bg("state",[Uu("void, hidden",wc({transform:"scale(0.8)",opacity:0})),Uu("visible",wc({transform:"scale(1)",opacity:1})),Qf("* => visible",Sg("150ms cubic-bezier(0, 0, 0.2, 1)")),Qf("* => void, * => hidden",Sg("75ms cubic-bezier(0.4, 0.0, 1, 1)",wc({opacity:0})))])};let wH=(()=>{class n extends bL{constructor(e,s,d,f,b){super(),this._ngZone=e,this._elementRef=s,this._changeDetectorRef=d,this._platform=f,this.snackBarConfig=b,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Et,this._onExit=new Et,this._onEnter=new Et,this._animationState="void",this.attachDomPortal=E=>{this._assertNotAttached();const T=this._portalOutlet.attachDomPortal(E);return this._afterPortalAttached(),T},this._live="assertive"!==b.politeness||b.announcementMessage?"off"===b.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const s=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),s}attachTemplatePortal(e){this._assertNotAttached();const s=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),s}onAnimationEnd(e){const{fromState:s,toState:d}=e;if(("void"===d&&"void"!==s||"hidden"===d)&&this._completeExit(),"visible"===d){const f=this._onEnter;this._ngZone.run(()=>{f.next(),f.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Qu(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,s=this.snackBarConfig.panelClass;s&&(Array.isArray(s)?s.forEach(d=>e.classList.add(d)):e.classList.add(s))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),s=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&s){let d=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(d=document.activeElement),e.removeAttribute("aria-hidden"),s.appendChild(e),d?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(yt(ri),yt(Ni),yt(ma),yt($c),yt(Dd))},n.\u0275dir=mr({type:n,viewQuery:function(e,s){if(1&e&&Hc(fv,7),2&e){let d;vo(d=Ao())&&(s._portalOutlet=d.first)}},features:[Or]}),n})(),TH=(()=>{class n extends wH{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,s="mdc-snackbar__label";e.classList.toggle(s,!e.querySelector(`.${s}`))}}return n.\u0275fac=function(){let t;return function(s){return(t||(t=kr(n)))(s||n)}}(),n.\u0275cmp=aa({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,s){if(1&e&&Hc(dV,7),2&e){let d;vo(d=Ao())&&(s._label=d.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,s){1&e&&bb("@state.done",function(f){return s.onAnimationEnd(f)}),2&e&&bD("@state",s._animationState)},features:[Or],decls:6,vars:2,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,s){1&e&&(jt(0,"div",0)(1,"div",1,2)(3,"div",3),Kn(4,NL,0,0,"ng-template",4),Yt(),Ui(5,"div"),Yt()()),2&e&&(Ft(5),io("aria-live",s._live)("role",s._role))},dependencies:[fv],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.cdk-high-contrast-active .mat-mdc-snack-bar-container{border:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[o8.snackBarState]}}),n})(),PT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[uV,X3,Xo,Y3,gs,gs]}),n})();const s8=new Qn("mat-snack-bar-default-options",{providedIn:"root",factory:function LL(){return new Dd}});let pV=(()=>{class n{constructor(e,s,d,f,b,E){this._overlay=e,this._live=s,this._injector=d,this._breakpointObserver=f,this._parentSnackBar=b,this._defaultConfig=E,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,s){return this._attach(e,s)}openFromTemplate(e,s){return this._attach(e,s)}open(e,s="",d){const f={...this._defaultConfig,...d};return f.data={message:e,action:s},f.announcementMessage===e&&(f.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,f)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,s){const f=Uc.create({parent:s&&s.viewContainerRef&&s.viewContainerRef.injector||this._injector,providers:[{provide:Dd,useValue:s}]}),b=new J3(this.snackBarContainerComponent,s.viewContainerRef,f),E=e.attach(b);return E.instance.snackBarConfig=s,E.instance}_attach(e,s){const d={...new Dd,...this._defaultConfig,...s},f=this._createOverlay(d),b=this._attachSnackBarContainer(f,d),E=new xL(b,f);if(e instanceof _l){const T=new nP(e,null,{$implicit:d.data,snackBarRef:E});E.instance=b.attachTemplatePortal(T)}else{const T=this._createInjector(d,E),k=new J3(e,void 0,T),Q=b.attachComponentPortal(k);E.instance=Q.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Cl(f.detachments())).subscribe(T=>{f.overlayElement.classList.toggle(this.handsetCssClass,T.matches)}),d.announcementMessage&&b._onAnnounce.subscribe(()=>{this._live.announce(d.announcementMessage,d.politeness)}),this._animateSnackBar(E,d),this._openedSnackBarRef=E,this._openedSnackBarRef}_animateSnackBar(e,s){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),s.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),s.duration&&s.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(s.duration))}_createOverlay(e){const s=new cP;s.direction=e.direction;let d=this._overlay.position().global();const f="rtl"===e.direction,b="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!f||"end"===e.horizontalPosition&&f,E=!b&&"center"!==e.horizontalPosition;return b?d.left("0"):E?d.right("0"):d.centerHorizontally(),"top"===e.verticalPosition?d.top("0"):d.bottom("0"),s.positionStrategy=d,this._overlay.create(s)}_createInjector(e,s){return Uc.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:xL,useValue:s},{provide:Tp,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(cn(tE),cn(Yk),cn(Uc),cn(w3),cn(n,12),cn(s8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})(),n0=(()=>{class n extends pV{constructor(e,s,d,f,b,E){super(e,s,d,f,b,E),this.simpleSnackBarComponent=kT,this.snackBarContainerComponent=TH,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(cn(tE),cn(Yk),cn(Uc),cn(w3),cn(n,12),cn(s8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:PT}),n})();const hV=["*"];class DH{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(s=>this._trackTile(s))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new OH(this.rowIndex,e)}_findMatchingGap(t){let e=-1,s=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),s=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(s=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),s=this._findGapEndIndex(e)))}while(s-e<t||0==s);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let s=0;s<e.colspan;s++)this.tracker[t+s]=e.rowspan}}class OH{constructor(t,e){this.row=t,this.col=e}}const a8=new Qn("MAT_GRID_LIST");let mV=(()=>{class n{constructor(e,s){this._element=e,this._gridList=s,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(uv(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(uv(e))}_setStyle(e,s){this._element.nativeElement.style[e]=s}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(a8,8))},n.\u0275cmp=aa({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,s){2&e&&io("rowspan",s.rowspan)("colspan",s.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:hV,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,s){1&e&&(Vc(),jt(0,"div",0),oo(1),Yt())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),n})();const pP=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class MT{constructor(){this._rows=0,this._rowspan=0}init(t,e,s,d){this._gutterSize=hP(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=s,this._direction=d}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":Od(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,s){let d=100/this._cols,f=(this._cols-1)/this._cols;this.setColStyles(t,s,d,f),this.setRowStyles(t,e,d,f)}setColStyles(t,e,s,d){let f=this.getBaseTileSize(s,d);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(f,e)),t._setStyle("width",Od(this.getTileSize(f,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class c8 extends MT{constructor(t){super(),this.fixedRowHeight=t}init(t,e,s,d){super.init(t,e,s,d),this.fixedRowHeight=hP(this.fixedRowHeight),pP.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",Od(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",Od(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class l8 extends MT{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,s,d){this.baseTileHeight=this.getBaseTileSize(s/this.rowHeightRatio,d),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",Od(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",Od(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class gV extends MT{setRowStyles(t,e){let f=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(f,e)),t._setStyle("height",Od(this.getTileSize(f,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function Od(n){return`calc(${n})`}function hP(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let u8=(()=>{class n{constructor(e,s){this._element=e,this._dir=s,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(uv(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const s=`${e??""}`;s!==this._rowHeight&&(this._rowHeight=s,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new gV:e&&e.indexOf(":")>-1?new l8(e):new c8(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new DH);const e=this._tileCoordinator,s=this._tiles.filter(f=>!f._gridList||f._gridList===this),d=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,s),this._tileStyler.init(this.gutterSize,e,this.cols,d),s.forEach((f,b)=>{const E=e.positions[b];this._tileStyler.setStyle(f,E.row,E.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(XS,8))},n.\u0275cmp=aa({type:n,selectors:[["mat-grid-list"]],contentQueries:function(e,s,d){if(1&e&&Oa(d,mV,5),2&e){let f;vo(f=Ao())&&(s._tiles=f)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,s){2&e&&io("cols",s.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[po([{provide:a8,useExisting:n}])],ngContentSelectors:hV,decls:2,vars:0,template:function(e,s){1&e&&(Vc(),jt(0,"div"),oo(1),Yt())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),n})(),kH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[Q3,gs,Q3,gs]}),n})();const p8=["matFormFieldNotchedOutline",""],_V=["*"],h8=["textField"],f8=["iconPrefixContainer"],vV=["textPrefixContainer"];function m8(n,t){1&n&&Ui(0,"span",19)}function g8(n,t){if(1&n){const e=qa();jt(0,"label",17),eo("cdkObserveContent",function(){return Qa(e),Ko(Cr(2)._refreshOutlineNotchWidth())}),oo(1,1),Kn(2,m8,1,0,"span",18),Yt()}if(2&n){const e=Cr(2);fn("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),io("for",e._control.id)("aria-owns",e._control.id),Ft(2),fn("ngIf",!e.hideRequiredMarker&&e._control.required)}}function BL(n,t){1&n&&Kn(0,g8,3,6,"label",16),2&n&&fn("ngIf",Cr()._hasFloatingLabel())}function FL(n,t){1&n&&Ui(0,"div",20)}function AV(n,t){}function yV(n,t){1&n&&Kn(0,AV,0,0,"ng-template",22),2&n&&(Cr(2),fn("ngTemplateOutlet",ah(1)))}function EV(n,t){if(1&n&&(jt(0,"div",21),Kn(1,yV,1,1,"ng-template",9),Yt()),2&n){const e=Cr();fn("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),Ft(1),fn("ngIf",!e._forceDisplayInfixLabel())}}function bV(n,t){1&n&&(jt(0,"div",23,24),oo(2,2),Yt())}function _8(n,t){1&n&&(jt(0,"div",25,26),oo(2,3),Yt())}function SV(n,t){}function NT(n,t){1&n&&Kn(0,SV,0,0,"ng-template",22),2&n&&(Cr(),fn("ngTemplateOutlet",ah(1)))}function Ig(n,t){1&n&&(jt(0,"div",27),oo(1,4),Yt())}function v8(n,t){1&n&&(jt(0,"div",28),oo(1,5),Yt())}function r0(n,t){1&n&&Ui(0,"div",29)}function gv(n,t){1&n&&(jt(0,"div",30),oo(1,6),Yt()),2&n&&fn("@transitionMessages",Cr()._subscriptAnimationState)}function CV(n,t){if(1&n&&(jt(0,"mat-hint",34),bn(1),Yt()),2&n){const e=Cr(2);fn("id",e._hintLabelId),Ft(1),td(e.hintLabel)}}function xT(n,t){if(1&n&&(jt(0,"div",31),Kn(1,CV,2,2,"mat-hint",32),oo(2,7),Ui(3,"div",33),oo(4,8),Yt()),2&n){const e=Cr();fn("@transitionMessages",e._subscriptAnimationState),Ft(1),fn("ngIf",e.hintLabel)}}const UL=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Nh=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let VL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=mr({type:n,selectors:[["mat-label"]]}),n})();const A8=new Qn("MatError");let mP=0,IV=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+mP++}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=mr({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,s){2&e&&(kb("id",s.id),io("align",null),is("mat-mdc-form-field-hint-end","end"===s.align))},inputs:{align:"align",id:"id"}}),n})();const wV=new Qn("MatPrefix"),y8=new Qn("MatSuffix");let TV=(()=>{class n{constructor(e){this._isText=!1,this._isText=e.nativeElement.hasAttribute("matTextSuffix")}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni))},n.\u0275dir=mr({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],features:[po([{provide:y8,useExisting:n}])]}),n})(),wg=(()=>{class n{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function NH(n){if(null!==n.offsetParent)return n.scrollWidth;const e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const s=e.scrollWidth;return e.remove(),s}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni))},n.\u0275dir=mr({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,s){2&e&&is("mdc-floating-label--float-above",s.floating)},inputs:{floating:"floating"}}),n})();const jL="mdc-line-ripple--active",gP="mdc-line-ripple--deactivating";let E8=(()=>{class n{constructor(e,s){this._elementRef=e,this._handleTransitionEnd=d=>{const f=this._elementRef.nativeElement.classList,b=f.contains(gP);"opacity"===d.propertyName&&b&&f.remove(jL,gP)},s.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(gP),e.add(jL)}deactivate(){this._elementRef.nativeElement.classList.add(gP)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(ri))},n.\u0275dir=mr({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),b8=(()=>{class n{constructor(e,s){this._elementRef=e,this._ngZone=s,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(ri))},n.\u0275cmp=aa({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,s){2&e&&is("mdc-notched-outline--notched",s.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:p8,ngContentSelectors:_V,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,s){1&e&&(Vc(),Ui(0,"div",0),jt(1,"div",1),oo(2),Yt(),Ui(3,"div",2)),2&e&&(Ft(1),gf("width",s._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const xH={transitionMessages:bg("transitionMessages",[Uu("enter",wc({opacity:1,transform:"translateY(0%)"})),Qf("void => enter",[wc({opacity:0,transform:"translateY(-5px)"}),Sg("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let RV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=mr({type:n}),n})();const QL=new Qn("MatFormField"),C8=new Qn("MAT_FORM_FIELD_DEFAULT_OPTIONS");let o0=0,D8=(()=>{class n{constructor(e,s,d,f,b,E,T,k){this._elementRef=e,this._changeDetectorRef=s,this._ngZone=d,this._dir=f,this._platform=b,this._defaults=E,this._animationMode=T,this._document=k,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+o0++,this._hintLabelId="mat-mdc-hint-"+o0++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Et,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,E&&(E.appearance&&(this.appearance=E.appearance),this._hideRequiredMarker=Boolean(E?.hideRequiredMarker),E.color&&(this.color=E.color))}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=ya(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const s=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==s&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Cl(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),No(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Cl(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Cl(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const s=this._control?this._control.ngControl:null;return s&&s[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const s=this._hintChildren?this._hintChildren.find(f=>"start"===f.align):null,d=this._hintChildren?this._hintChildren.find(f=>"end"===f.align):null;s?e.push(s.id):this._hintLabel&&e.push(this._hintLabelId),d&&e.push(d.id)}else this._errorChildren&&e.push(...this._errorChildren.map(s=>s.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const s=this._iconPrefixContainer?.nativeElement,d=this._textPrefixContainer?.nativeElement,f=s?.getBoundingClientRect().width??0,b=d?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${f+b}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const s=e.getRootNode();return s&&s!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(ma),yt(ri),yt(XS),yt($c),yt(C8,8),yt(ld,8),yt(Ei))},n.\u0275cmp=aa({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,s,d){if(1&e&&(Oa(d,VL,5),Oa(d,VL,7),Oa(d,RV,5),Oa(d,wV,5),Oa(d,y8,5),Oa(d,A8,5),Oa(d,IV,5)),2&e){let f;vo(f=Ao())&&(s._labelChildNonStatic=f.first),vo(f=Ao())&&(s._labelChildStatic=f.first),vo(f=Ao())&&(s._formFieldControl=f.first),vo(f=Ao())&&(s._prefixChildren=f),vo(f=Ao())&&(s._suffixChildren=f),vo(f=Ao())&&(s._errorChildren=f),vo(f=Ao())&&(s._hintChildren=f)}},viewQuery:function(e,s){if(1&e&&(Hc(h8,5),Hc(f8,5),Hc(vV,5),Hc(wg,5),Hc(b8,5),Hc(E8,5)),2&e){let d;vo(d=Ao())&&(s._textField=d.first),vo(d=Ao())&&(s._iconPrefixContainer=d.first),vo(d=Ao())&&(s._textPrefixContainer=d.first),vo(d=Ao())&&(s._floatingLabel=d.first),vo(d=Ao())&&(s._notchedOutline=d.first),vo(d=Ao())&&(s._lineRipple=d.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,s){2&e&&is("mat-mdc-form-field-label-always-float",s._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",s._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",s._hasIconSuffix)("mat-form-field-invalid",s._control.errorState)("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===s._animationMode)("mat-form-field-appearance-fill","fill"==s.appearance)("mat-form-field-appearance-outline","outline"==s.appearance)("mat-form-field-hide-placeholder",s._hasFloatingLabel()&&!s._shouldLabelFloat())("mat-focused",s._control.focused)("mat-primary","accent"!==s.color&&"warn"!==s.color)("mat-accent","accent"===s.color)("mat-warn","warn"===s.color)("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[po([{provide:QL,useExisting:n}])],ngContentSelectors:Nh,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,s){1&e&&(Vc(UL),Kn(0,BL,1,1,"ng-template",null,0,j_),jt(2,"div",1,2),eo("click",function(f){return s._control.onContainerClick&&s._control.onContainerClick(f)}),Kn(4,FL,1,0,"div",3),jt(5,"div",4),Kn(6,EV,2,3,"div",5),Kn(7,bV,3,0,"div",6),Kn(8,_8,3,0,"div",7),jt(9,"div",8),Kn(10,NT,1,1,"ng-template",9),oo(11),Yt(),Kn(12,Ig,2,0,"div",10),Kn(13,v8,2,0,"div",11),Yt(),Kn(14,r0,1,0,"div",12),Yt(),jt(15,"div",13),Kn(16,gv,2,1,"div",14),Kn(17,xT,5,2,"div",15),Yt()),2&e&&(Ft(2),is("mdc-text-field--filled",!s._hasOutline())("mdc-text-field--outlined",s._hasOutline())("mdc-text-field--no-label",!s._hasFloatingLabel())("mdc-text-field--disabled",s._control.disabled)("mdc-text-field--invalid",s._control.errorState),Ft(2),fn("ngIf",!s._hasOutline()&&!s._control.disabled),Ft(2),fn("ngIf",s._hasOutline()),Ft(1),fn("ngIf",s._hasIconPrefix),Ft(1),fn("ngIf",s._hasTextPrefix),Ft(2),fn("ngIf",!s._hasOutline()||s._forceDisplayInfixLabel()),Ft(2),fn("ngIf",s._hasTextSuffix),Ft(1),fn("ngIf",s._hasIconSuffix),Ft(1),fn("ngIf",!s._hasOutline()),Ft(1),is("mat-mdc-form-field-subscript-dynamic-size","dynamic"===s.subscriptSizing),fn("ngSwitch",s._getDisplayedMessages()),Ft(1),fn("ngSwitchCase","error"),Ft(1),fn("ngSwitchCase","hint"))},dependencies:[J_,Mw,Ly,By,r7,IV,wg,b8,E8],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required::after,.mdc-floating-label--required[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[xH.transitionMessages]},changeDetection:0}),n})(),_v=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[gs,Xo,l5,gs]}),n})();class FH{constructor(t=!1,e,s=!0,d){this._multiple=t,this._emitChanges=s,this.compareWith=d,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Et,e&&e.length&&(t?e.forEach(f=>this._markSelected(f)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(s=>this._markSelected(s));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(s=>this._unmarkSelected(s));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,s=new Set(t);t.forEach(f=>this._markSelected(f)),e.filter(f=>!s.has(f)).forEach(f=>this._unmarkSelected(f));const d=this._hasQueuedChanges();return this._emitChangeEvent(),d}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}function _P(n,t){return $e((e,s)=>{let d=null,f=0,b=!1;const E=()=>b&&!d&&s.complete();e.subscribe(new De(s,T=>{d?.unsubscribe();let k=0;const Q=f++;Sn(n(T,Q)).subscribe(d=new De(s,ie=>s.next(t?t(T,ie,Q,k++):ie),()=>{d=null,E()}))},()=>{b=!0,E()}))})}const jH=["trigger"],N8=["panel"];function QH(n,t){if(1&n&&(jt(0,"span",10),bn(1),Yt()),2&n){const e=Cr();Ft(1),td(e.placeholder)}}function DV(n,t){if(1&n&&(jt(0,"span",14),bn(1),Yt()),2&n){const e=Cr(2);Ft(1),td(e.triggerValue)}}function vP(n,t){1&n&&oo(0,0,["*ngSwitchCase","true"])}function HH(n,t){1&n&&(jt(0,"span",11),Kn(1,DV,2,1,"span",12),Kn(2,vP,1,0,"ng-content",13),Yt()),2&n&&(fn("ngSwitch",!!Cr().customTrigger),Ft(2),fn("ngSwitchCase",!0))}function HL(n,t){if(1&n){const e=qa();Do(),Ks(),jt(0,"div",15,16),eo("@transformPanel.done",function(d){return Qa(e),Ko(Cr()._panelDoneAnimatingStream.next(d.toState))})("keydown",function(d){return Qa(e),Ko(Cr()._handleKeydown(d))}),oo(2,1),Yt()}if(2&n){const e=Cr();gD("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),fn("ngClass",e.panelClass)("@transformPanel","showing"),io("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const OV=[[["mat-select-trigger"]],"*"],x8=["mat-select-trigger","*"],GH={transformPanelWrap:bg("transformPanelWrap",[Qf("* => void",$7("@transformPanel",[Y7()],{optional:!0}))]),transformPanel:bg("transformPanel",[Uu("void",wc({opacity:0,transform:"scale(1, 0.8)"})),Qf("void => showing",Sg("120ms cubic-bezier(0, 0, 0.2, 1)",wc({opacity:1,transform:"scale(1, 1)"}))),Qf("* => void",Sg("100ms linear",wc({opacity:0})))])};let GL=0;const WL=new Qn("mat-select-scroll-strategy"),KL=new Qn("MAT_SELECT_CONFIG"),PV={provide:WL,deps:[tE],useFactory:function kV(n){return()=>n.scrollStrategies.reposition()}},WH=new Qn("MatSelectTrigger");class MV{constructor(t,e){this.source=t,this.value=e}}const F8=_L(I5($k(V3(class{constructor(n,t,e,s,d){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=s,this.ngControl=d,this.stateChanges=new Et}}))));let NV=(()=>{class n extends F8{constructor(e,s,d,f,b,E,T,k,Q,ie,Ie,xe,qe,ft){super(b,f,T,k,ie),this._viewportRuler=e,this._changeDetectorRef=s,this._ngZone=d,this._dir=E,this._parentFormField=Q,this._liveAnnouncer=qe,this._defaultOptions=ft,this._panelOpen=!1,this._compareWith=(Qt,Kt)=>Qt===Kt,this._uid="mat-select-"+GL++,this._triggerAriaLabelledBy=null,this._destroy=new Et,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+GL++,this._panelDoneAnimatingStream=new Et,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=function M8(n){return new rt(t=>{Sn(n()).subscribe(t)})}(()=>{const Qt=this.options;return Qt?Qt.changes.pipe(_T(Qt),_P(()=>No(...Qt.map(Kt=>Kt.onSelectionChange)))):this._ngZone.onStable.pipe(Qu(1),_P(()=>this.optionSelectionChanges))}),this.openedChange=new Yi,this._openedStream=this.openedChange.pipe(Vf(Qt=>Qt),ot(()=>{})),this._closedStream=this.openedChange.pipe(Vf(Qt=>!Qt),ot(()=>{})),this.selectionChange=new Yi,this.valueChange=new Yi,this.ngControl&&(this.ngControl.valueAccessor=this),null!=ft?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=ft.typeaheadDebounceInterval),this._scrollStrategyFactory=xe,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Ie)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(y.required)??!1}set required(e){this._required=ya(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=ya(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=ya(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=uv(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new FH(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(s5(),Cl(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Cl(this._destroy)).subscribe(e=>{e.added.forEach(s=>s.select()),e.removed.forEach(s=>s.deselect())}),this.options.changes.pipe(_T(null),Cl(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),s=this.ngControl;if(e!==this._triggerAriaLabelledBy){const d=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?d.setAttribute("aria-labelledby",e):d.removeAttribute("aria-labelledby")}s&&(this._previousControl!==s.control&&(void 0!==this._previousControl&&null!==s.disabled&&s.disabled!==this.disabled&&(this.disabled=s.disabled),this._previousControl=s.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(s=>s.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const s=e.keyCode,d=40===s||38===s||37===s||39===s,f=13===s||32===s,b=this._keyManager;if(!b.isTyping()&&f&&!gT(e)||(this.multiple||e.altKey)&&d)e.preventDefault(),this.open();else if(!this.multiple){const E=this.selected;b.onKeydown(e);const T=this.selected;T&&E!==T&&this._liveAnnouncer.announce(T.viewValue,1e4)}}_handleOpenKeydown(e){const s=this._keyManager,d=e.keyCode,f=40===d||38===d,b=s.isTyping();if(f&&e.altKey)e.preventDefault(),this.close();else if(b||13!==d&&32!==d||!s.activeItem||gT(e))if(!b&&this._multiple&&65===d&&e.ctrlKey){e.preventDefault();const E=this.options.some(T=>!T.disabled&&!T.selected);this.options.forEach(T=>{T.disabled||(E?T.select():T.deselect())})}else{const E=s.activeItemIndex;s.onKeydown(e),this._multiple&&f&&e.shiftKey&&s.activeItem&&s.activeItemIndex!==E&&s.activeItem._selectViaInteraction()}else e.preventDefault(),s.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Qu(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(s=>s.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(s=>this._selectOptionByValue(s)),this._sortValues();else{const s=this._selectOptionByValue(e);s?this._keyManager.updateActiveItem(s):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const s=this.options.find(d=>{if(this._selectionModel.isSelected(d))return!1;try{return null!=d.value&&this._compareWith(d.value,e)}catch{return!1}});return s&&this._selectionModel.select(s),s}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new p5(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=No(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Cl(e)).subscribe(s=>{this._onSelect(s.source,s.isUserInput),s.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),No(...this.options.map(s=>s._stateChanges)).pipe(Cl(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,s){const d=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(d!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),s&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),s&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),d!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((s,d)=>this.sortComparator?this.sortComparator(s,d,e):e.indexOf(s)-e.indexOf(d)),this.stateChanges.next()}}_propagateChanges(e){let s=null;s=this.multiple?this.selected.map(d=>d.value):this.selected?this.selected.value:e,this._value=s,this.valueChange.emit(s),this._onChange(s),this.selectionChange.emit(this._getChangeEvent(s)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let s=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(s+=" "+this.ariaLabelledby),s}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(yt(nV),yt(ma),yt(ri),yt(j3),yt(Ni),yt(XS,8),yt(Pk,8),yt(uT,8),yt(QL,8),yt(Wt,10),Kh("tabindex"),yt(WL),yt(Yk),yt(KL,8))},n.\u0275dir=mr({type:n,viewQuery:function(e,s){if(1&e&&(Hc(jH,5),Hc(N8,5),Hc(lV,5)),2&e){let d;vo(d=Ao())&&(s.trigger=d.first),vo(d=Ao())&&(s.panel=d.first),vo(d=Ao())&&(s._overlayDir=d.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Or,Bs]}),n})(),xV=(()=>{class n extends NV{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}]}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Cl(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const s=this.options.toArray()[e];if(s){const d=this.panel.nativeElement,f=function W3(n,t,e){if(e.length){let s=t.toArray(),d=e.toArray(),f=0;for(let b=0;b<n+1;b++)s[b].group&&s[b].group===d[f]&&f++;return f}return 0}(e,this.options,this.optionGroups),b=s._getHostElement();d.scrollTop=0===e&&1===f?0:function F7(n,t,e,s){return n<e?n:n+t>e+s?Math.max(0,n-s+t):e}(b.offsetTop,b.offsetHeight,d.scrollTop,d.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new MV(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof PL?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}}return n.\u0275fac=function(){let t;return function(s){return(t||(t=kr(n)))(s||n)}}(),n.\u0275cmp=aa({type:n,selectors:[["mat-select"]],contentQueries:function(e,s,d){if(1&e&&(Oa(d,WH,5),Oa(d,G3,5),Oa(d,AL,5)),2&e){let f;vo(f=Ao())&&(s.customTrigger=f.first),vo(f=Ao())&&(s.options=f),vo(f=Ao())&&(s.optionGroups=f)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,s){1&e&&eo("keydown",function(f){return s._handleKeydown(f)})("focus",function(){return s._onFocus()})("blur",function(){return s._onBlur()}),2&e&&(io("id",s.id)("tabindex",s.tabIndex)("aria-controls",s.panelOpen?s.id+"-panel":null)("aria-expanded",s.panelOpen)("aria-label",s.ariaLabel||null)("aria-required",s.required.toString())("aria-disabled",s.disabled.toString())("aria-invalid",s.errorState)("aria-activedescendant",s._getAriaActiveDescendant()),is("mat-mdc-select-disabled",s.disabled)("mat-mdc-select-invalid",s.errorState)("mat-mdc-select-required",s.required)("mat-mdc-select-empty",s.empty)("mat-mdc-select-multiple",s.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[po([{provide:RV,useExisting:n},{provide:t0,useExisting:n}]),Or],ngContentSelectors:x8,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,s){if(1&e&&(Vc(OV),jt(0,"div",0,1),eo("click",function(){return s.toggle()}),jt(3,"div",2),Kn(4,QH,2,1,"span",3),Kn(5,HH,3,2,"span",4),Yt(),jt(6,"div",5)(7,"div",6),Do(),jt(8,"svg",7),Ui(9,"path",8),Yt()()()(),Kn(10,HL,3,9,"ng-template",9),eo("backdropClick",function(){return s.close()})("attach",function(){return s._onAttached()})("detach",function(){return s.close()})),2&e){const d=ah(1);io("aria-owns",s.panelOpen?s.id+"-panel":null),Ft(3),fn("ngSwitch",s.empty),io("id",s._valueId),Ft(1),fn("ngSwitchCase",!0),Ft(1),fn("ngSwitchCase",!1),Ft(5),fn("cdkConnectedOverlayPanelClass",s._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",s._scrollStrategy)("cdkConnectedOverlayOrigin",s._preferredOverlayOrigin||d)("cdkConnectedOverlayOpen",s.panelOpen)("cdkConnectedOverlayPositions",s._positions)("cdkConnectedOverlayWidth",s._overlayWidth)}},dependencies:[ES,Ly,By,nk,lV,PL],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[GH.transformPanel]},changeDetection:0}),n})(),zH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({providers:[PV],imports:[Xo,uV,yL,gs,aP,_v,yL,gs]}),n})();const zL=Cc({passive:!0});let qH=(()=>{class n{constructor(e,s){this._platform=e,this._ngZone=s,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return uE;const s=Eg(e),d=this._monitoredElements.get(s);if(d)return d.subject;const f=new Et,b="cdk-text-field-autofilled",E=T=>{"cdk-text-field-autofill-start"!==T.animationName||s.classList.contains(b)?"cdk-text-field-autofill-end"===T.animationName&&s.classList.contains(b)&&(s.classList.remove(b),this._ngZone.run(()=>f.next({target:T.target,isAutofilled:!1}))):(s.classList.add(b),this._ngZone.run(()=>f.next({target:T.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{s.addEventListener("animationstart",E,zL),s.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(s,{subject:f,unlisten:()=>{s.removeEventListener("animationstart",E,zL)}}),f}stopMonitoring(e){const s=Eg(e),d=this._monitoredElements.get(s);d&&(d.unlisten(),d.subject.complete(),s.classList.remove("cdk-text-field-autofill-monitored"),s.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(s))}ngOnDestroy(){this._monitoredElements.forEach((e,s)=>this.stopMonitoring(s))}}return n.\u0275fac=function(e){return new(e||n)(cn($c),cn(ri))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({}),n})();const JH=new Qn("MAT_INPUT_VALUE_ACCESSOR"),j8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let yP=0;const XH=V3(class{constructor(n,t,e,s){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=s,this.stateChanges=new Et}});let Q8=(()=>{class n extends XH{constructor(e,s,d,f,b,E,T,k,Q,ie){super(E,f,b,d),this._elementRef=e,this._platform=s,this._autofillMonitor=k,this._formField=ie,this._uid="mat-input-"+yP++,this.focused=!1,this.stateChanges=new Et,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(qe=>Uf().has(qe)),this._iOSKeyupListener=qe=>{const ft=qe.target;!ft.value&&0===ft.selectionStart&&0===ft.selectionEnd&&(ft.setSelectionRange(1,1),ft.setSelectionRange(0,0))};const Ie=this._elementRef.nativeElement,xe=Ie.nodeName.toLowerCase();this._inputValueAccessor=T||Ie,this._previousNativeValue=this.value,this.id=this.id,s.IOS&&Q.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===xe,this._isTextarea="textarea"===xe,this._isInFormField=!!ie,this._isNativeSelect&&(this.controlType=Ie.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this._disabled}set disabled(e){this._disabled=ya(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(y.required)??!1}set required(e){this._required=ya(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Uf().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=ya(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=e,e?s.setAttribute("placeholder",e):s.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){j8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,s=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&s&&s.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt($c),yt(Wt,10),yt(Pk,8),yt(uT,8),yt(j3),yt(JH,10),yt(qH),yt(ri),yt(QL,8))},n.\u0275dir=mr({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,s){1&e&&eo("focus",function(){return s._focusChanged(!0)})("blur",function(){return s._focusChanged(!1)})("input",function(){return s._onInput()}),2&e&&(kb("id",s.id)("disabled",s.disabled)("required",s.required),io("name",s.name||null)("readonly",s.readonly&&!s._isNativeSelect||null)("aria-invalid",s.empty&&s.required?null:s.errorState)("aria-required",s.required)("id",s.id),is("mat-input-server",s._isServer)("mat-mdc-form-field-textarea-control",s._isInFormField&&s._isTextarea)("mat-mdc-form-field-input-control",s._isInFormField)("mdc-text-field__input",s._isInFormField)("mat-mdc-native-select-inline",s._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[po([{provide:RV,useExisting:n}]),Or,Bs]}),n})(),wl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[gs,_v,_v,V8,gs]}),n})();function LV(n){return $e((t,e)=>{let f,s=null,d=!1;s=t.subscribe(new De(e,void 0,void 0,b=>{f=Sn(n(b,LV(n)(t))),s?(s.unsubscribe(),s=null,f.subscribe(e)):d=!0})),d&&(s.unsubscribe(),s=null,f.subscribe(e))})}const eG=["*"];let qL;function LT(n){return function BV(){if(void 0===qL&&(qL=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(qL=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return qL}()?.createHTML(n)||n}function FV(n){return Error(`Unable to find icon with the name "${n}"`)}function UV(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function VV(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class s0{constructor(t,e,s){this.url=t,this.svgText=e,this.options=s}}let YL=(()=>{class n{constructor(e,s,d,f){this._httpClient=e,this._sanitizer=s,this._errorHandler=f,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=d}addSvgIcon(e,s,d){return this.addSvgIconInNamespace("",e,s,d)}addSvgIconLiteral(e,s,d){return this.addSvgIconLiteralInNamespace("",e,s,d)}addSvgIconInNamespace(e,s,d,f){return this._addSvgIconConfig(e,s,new s0(d,null,f))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,s,d,f){const b=this._sanitizer.sanitize(Di.HTML,d);if(!b)throw VV(d);const E=LT(b);return this._addSvgIconConfig(e,s,new s0("",E,f))}addSvgIconSet(e,s){return this.addSvgIconSetInNamespace("",e,s)}addSvgIconSetLiteral(e,s){return this.addSvgIconSetLiteralInNamespace("",e,s)}addSvgIconSetInNamespace(e,s,d){return this._addSvgIconSetConfig(e,new s0(s,null,d))}addSvgIconSetLiteralInNamespace(e,s,d){const f=this._sanitizer.sanitize(Di.HTML,s);if(!f)throw VV(s);const b=LT(f);return this._addSvgIconSetConfig(e,new s0("",b,d))}registerFontClassAlias(e,s=e){return this._fontCssClassesByAlias.set(e,s),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const s=this._sanitizer.sanitize(Di.RESOURCE_URL,e);if(!s)throw UV(e);const d=this._cachedIconsByUrl.get(s);return d?Lu(EP(d)):this._loadSvgIconFromConfig(new s0(e,null)).pipe(Xx(f=>this._cachedIconsByUrl.set(s,f)),ot(f=>EP(f)))}getNamedSvgIcon(e,s=""){const d=K8(s,e);let f=this._svgIconConfigs.get(d);if(f)return this._getSvgFromConfig(f);if(f=this._getIconConfigFromResolvers(s,e),f)return this._svgIconConfigs.set(d,f),this._getSvgFromConfig(f);const b=this._iconSetConfigs.get(s);return b?this._getSvgFromIconSetConfigs(e,b):function ZH(n,t){const e=F(n)?n:()=>n,s=d=>d.error(e());return new rt(t?d=>t.schedule(s,0,d):s)}(FV(d))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Lu(EP(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(ot(s=>EP(s)))}_getSvgFromIconSetConfigs(e,s){const d=this._extractIconWithNameFromAnySet(e,s);return d?Lu(d):Tk(s.filter(b=>!b.svgText).map(b=>this._loadSvgIconSetFromConfig(b).pipe(LV(E=>{const k=`Loading icon set URL: ${this._sanitizer.sanitize(Di.RESOURCE_URL,b.url)} failed: ${E.message}`;return this._errorHandler.handleError(new Error(k)),Lu(null)})))).pipe(ot(()=>{const b=this._extractIconWithNameFromAnySet(e,s);if(!b)throw FV(e);return b}))}_extractIconWithNameFromAnySet(e,s){for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.svgText&&f.svgText.toString().indexOf(e)>-1){const b=this._svgElementFromConfig(f),E=this._extractSvgIconFromSet(b,e,f.options);if(E)return E}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Xx(s=>e.svgText=s),ot(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Lu(null):this._fetchIcon(e).pipe(Xx(s=>e.svgText=s))}_extractSvgIconFromSet(e,s,d){const f=e.querySelector(`[id="${s}"]`);if(!f)return null;const b=f.cloneNode(!0);if(b.removeAttribute("id"),"svg"===b.nodeName.toLowerCase())return this._setSvgAttributes(b,d);if("symbol"===b.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(b),d);const E=this._svgElementFromString(LT("<svg></svg>"));return E.appendChild(b),this._setSvgAttributes(E,d)}_svgElementFromString(e){const s=this._document.createElement("DIV");s.innerHTML=e;const d=s.querySelector("svg");if(!d)throw Error("<svg> tag not found");return d}_toSvgElement(e){const s=this._svgElementFromString(LT("<svg></svg>")),d=e.attributes;for(let f=0;f<d.length;f++){const{name:b,value:E}=d[f];"id"!==b&&s.setAttribute(b,E)}for(let f=0;f<e.childNodes.length;f++)e.childNodes[f].nodeType===this._document.ELEMENT_NODE&&s.appendChild(e.childNodes[f].cloneNode(!0));return s}_setSvgAttributes(e,s){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),s&&s.viewBox&&e.setAttribute("viewBox",s.viewBox),e}_fetchIcon(e){const{url:s,options:d}=e,f=d?.withCredentials??!1;if(!this._httpClient)throw function G8(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==s)throw Error(`Cannot fetch icon from URL "${s}".`);const b=this._sanitizer.sanitize(Di.RESOURCE_URL,s);if(!b)throw UV(s);const E=this._inProgressUrlFetches.get(b);if(E)return E;const T=this._httpClient.get(b,{responseType:"text",withCredentials:f}).pipe(ot(k=>LT(k)),function H8(n){return $e((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}(()=>this._inProgressUrlFetches.delete(b)),ZT());return this._inProgressUrlFetches.set(b,T),T}_addSvgIconConfig(e,s,d){return this._svgIconConfigs.set(K8(e,s),d),this}_addSvgIconSetConfig(e,s){const d=this._iconSetConfigs.get(e);return d?d.push(s):this._iconSetConfigs.set(e,[s]),this}_svgElementFromConfig(e){if(!e.svgElement){const s=this._svgElementFromString(e.svgText);this._setSvgAttributes(s,e.options),e.svgElement=s}return e.svgElement}_getIconConfigFromResolvers(e,s){for(let d=0;d<this._resolvers.length;d++){const f=this._resolvers[d](s,e);if(f)return z8(f)?new s0(f.url,null,f.options):new s0(f,null)}}}return n.\u0275fac=function(e){return new(e||n)(cn(Ux,8),cn(dn),cn(Ei,8),cn(gu))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function EP(n){return n.cloneNode(!0)}function K8(n,t){return n+":"+t}function z8(n){return!(!n.url||!n.options)}const vv=gL(class{constructor(n){this._elementRef=n}}),tG=new Qn("MAT_ICON_DEFAULT_OPTIONS"),nG=new Qn("mat-icon-location",{providedIn:"root",factory:function rG(){const n=Xc(Ei),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),q8=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],iG=q8.map(n=>`[${n}]`).join(", "),oG=/^url\(['"]?#(.*?)['"]?\)$/;let sG=(()=>{class n extends vv{constructor(e,s,d,f,b,E){super(e),this._iconRegistry=s,this._location=f,this._errorHandler=b,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=j.EMPTY,E&&(E.color&&(this.color=this.defaultColor=E.color),E.fontSet&&(this.fontSet=E.fontSet)),d||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=ya(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const s=this._cleanupFontValue(e);s!==this._fontSet&&(this._fontSet=s,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const s=this._cleanupFontValue(e);s!==this._fontIcon&&(this._fontIcon=s,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const s=e.split(":");switch(s.length){case 1:return["",s[0]];case 2:return s;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const s=this._location.getPathname();s!==this._previousPath&&(this._previousPath=s,this._prependPathToReferences(s))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const s=this._location.getPathname();this._previousPath=s,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(s),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let s=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();s--;){const d=e.childNodes[s];(1!==d.nodeType||"svg"===d.nodeName.toLowerCase())&&d.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,s=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(d=>d.length>0);this._previousFontSetClass.forEach(d=>e.classList.remove(d)),s.forEach(d=>e.classList.add(d)),this._previousFontSetClass=s,this.fontIcon!==this._previousFontIconClass&&!s.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const s=this._elementsWithExternalReferences;s&&s.forEach((d,f)=>{d.forEach(b=>{f.setAttribute(b.name,`url('${e}#${b.value}')`)})})}_cacheChildrenWithExternalReferences(e){const s=e.querySelectorAll(iG),d=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let f=0;f<s.length;f++)q8.forEach(b=>{const E=s[f],T=E.getAttribute(b),k=T?T.match(oG):null;if(k){let Q=d.get(E);Q||(Q=[],d.set(E,Q)),Q.push({name:b,value:k[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[s,d]=this._splitIconName(e);s&&(this._svgNamespace=s),d&&(this._svgName=d),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(d,s).pipe(Qu(1)).subscribe(f=>this._setSvgElement(f),f=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${s}:${d}! ${f.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(YL),Kh("aria-hidden"),yt(nG),yt(gu),yt(tG,8))},n.\u0275cmp=aa({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,s){2&e&&(io("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),is("mat-icon-inline",s.inline)("mat-icon-no-color","primary"!==s.color&&"accent"!==s.color&&"warn"!==s.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Or],ngContentSelectors:eG,decls:1,vars:0,template:function(e,s){1&e&&(Vc(),oo(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),aG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[gs,gs]}),n})();const Y8=["determinateSpinner"];function cG(n,t){if(1&n&&(Do(),jt(0,"svg",11),Ui(1,"circle",12),Yt()),2&n){const e=Cr();io("viewBox",e._viewBox()),Ft(1),gf("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),io("r",e._circleRadius())}}const lG=gL(class{constructor(n){this._elementRef=n}},"primary"),uG=new Qn("mat-progress-spinner-default-options",{providedIn:"root",factory:function dG(){return{diameter:$8}}}),$8=100;let pG=(()=>{class n extends lG{constructor(e,s,d){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=$8,this._noopAnimations="NoopAnimations"===s&&!!d&&!d._forceAnimations,d&&(d.color&&(this.color=this.defaultColor=d.color),d.diameter&&(this.diameter=d.diameter),d.strokeWidth&&(this.strokeWidth=d.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,uv(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=uv(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=uv(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(ld,8),yt(uG))},n.\u0275cmp=aa({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,s){if(1&e&&Hc(Y8,5),2&e){let d;vo(d=Ao())&&(s._determinateCircle=d.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,s){2&e&&(io("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===s.mode?s.value:null)("mode",s.mode),gf("width",s.diameter,"px")("height",s.diameter,"px"),is("_mat-animation-noopable",s._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===s.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Or],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,s){if(1&e&&(Kn(0,cG,2,8,"ng-template",null,0,j_),jt(2,"div",1,2),Do(),jt(4,"svg",3),Ui(5,"circle",4),Yt()(),Ks(),jt(6,"div",5)(7,"div",6)(8,"div",7),yb(9,8),Yt(),jt(10,"div",9),yb(11,8),Yt(),jt(12,"div",10),yb(13,8),Yt()()()),2&e){const d=ah(1);Ft(4),io("viewBox",s._viewBox()),Ft(1),gf("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeDashOffset(),"px")("stroke-width",s._circleStrokeWidth(),"%"),io("r",s._circleRadius()),Ft(4),fn("ngTemplateOutlet",d),Ft(2),fn("ngTemplateOutlet",d),Ft(2),fn("ngTemplateOutlet",d)}},dependencies:[Mw],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),n})(),BT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[Xo,gs]}),n})(),$L=0;const J8=$k(class{}),QV="mat-badge-content";let X8=(()=>{class n extends J8{constructor(e,s,d,f,b){super(),this._ngZone=e,this._elementRef=s,this._ariaDescriber=d,this._renderer=f,this._animationMode=b,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=$L++,this._isInitialized=!1}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=ya(e)}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateHostAriaDescription(e)}get hidden(){return this._hidden}set hidden(e){this._hidden=ya(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&this._renderer.destroyNode(this._badgeElement),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_createBadgeElement(){const e=this._renderer.createElement("span"),s="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(QV),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(s)})}):e.classList.add(s),e}_updateRenderedContent(e){const s=`${e??""}`.trim();this._isInitialized&&s&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=s),this._content=s}_updateHostAriaDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),e&&this._ariaDescriber.describe(this._elementRef.nativeElement,e),this._description=e}_setColor(e){const s=this._elementRef.nativeElement.classList;s.remove(`mat-badge-${this._color}`),e&&s.add(`mat-badge-${e}`)}_clearExistingBadges(){const e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${QV}`);for(const s of Array.from(e))s!==this._badgeElement&&s.remove()}}return n.\u0275fac=function(e){return new(e||n)(yt(ri),yt(Ni),yt(R3),yt(mu),yt(ld,8))},n.\u0275dir=mr({type:n,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,s){2&e&&is("mat-badge-overlap",s.overlap)("mat-badge-above",s.isAbove())("mat-badge-below",!s.isAbove())("mat-badge-before",!s.isAfter())("mat-badge-after",s.isAfter())("mat-badge-small","small"===s.size)("mat-badge-medium","medium"===s.size)("mat-badge-large","large"===s.size)("mat-badge-hidden",s.hidden||!s.content)("mat-badge-disabled",s.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[Or]}),n})(),Z8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[v5,gs,gs]}),n})();function HV(n,t){return t?e=>rL(t.pipe(Qu(1),function e6(){return $e((n,t)=>{n.subscribe(new De(t,ue))})}()),e.pipe(HV(n))):Ld((e,s)=>n(e,s).pipe(Qu(1),function t6(n){return ot(()=>n)}(e)))}function GV(n,t=C3){const e=H5(n,t);return HV(()=>e)}const n6=["mat-menu-item",""];function r6(n,t){1&n&&(Do(),jt(0,"svg",3),Ui(1,"polygon",4),Yt())}const i6=[[["mat-icon"]],"*"],o6=["mat-icon","*"];function s6(n,t){if(1&n){const e=qa();jt(0,"div",0),eo("keydown",function(d){return Qa(e),Ko(Cr()._handleKeydown(d))})("click",function(){return Qa(e),Ko(Cr().closed.emit("click"))})("@transformMenu.start",function(d){return Qa(e),Ko(Cr()._onAnimationStart(d))})("@transformMenu.done",function(d){return Qa(e),Ko(Cr()._onAnimationDone(d))}),jt(1,"div",1),oo(2),Yt()()}if(2&n){const e=Cr();fn("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),io("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const a6=["*"],JL=new Qn("MAT_MENU_PANEL"),c6=_L($k(class{}));let Ji=(()=>{class n extends c6{constructor(e,s,d,f,b){super(),this._elementRef=e,this._document=s,this._focusMonitor=d,this._parentMenu=f,this._changeDetectorRef=b,this.role="menuitem",this._hovered=new Et,this._focused=new Et,this._highlighted=!1,this._triggersSubmenu=!1,f?.addItem?.(this)}focus(e,s){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,s):this._getHostElement().focus(s),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),s=e.querySelectorAll("mat-icon, .material-icons");for(let d=0;d<s.length;d++)s[d].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(Ei),yt(uL),yt(JL,8),yt(ma))},n.\u0275cmp=aa({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,s){1&e&&eo("click",function(f){return s._checkDisabled(f)})("mouseenter",function(){return s._handleMouseEnter()}),2&e&&(io("role",s.role)("tabindex",s._getTabIndex())("aria-disabled",s.disabled)("disabled",s.disabled||null),is("mat-mdc-menu-item-highlighted",s._highlighted)("mat-mdc-menu-item-submenu-trigger",s._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Or],attrs:n6,ngContentSelectors:o6,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,s){1&e&&(Vc(i6),oo(0),jt(1,"span",0),oo(2,1),Yt(),Ui(3,"div",1),Kn(4,r6,2,0,"svg",2)),2&e&&(Ft(3),fn("matRippleDisabled",s.disableRipple||s.disabled)("matRippleTrigger",s._getHostElement()),Ft(1),fn("ngIf",s._triggersSubmenu))},dependencies:[J_,ET],encapsulation:2,changeDetection:0}),n})();const l6=new Qn("MatMenuContent"),Rp={transformMenu:bg("transformMenu",[Uu("void",wc({opacity:0,transform:"scale(0.8)"})),Qf("void => enter",Sg("120ms cubic-bezier(0, 0, 0.2, 1)",wc({opacity:1,transform:"scale(1)"}))),Qf("* => void",Sg("100ms 25ms linear",wc({opacity:0})))]),fadeInItems:bg("fadeInItems",[Uu("showing",wc({opacity:1})),Qf("void => *",[wc({opacity:0}),Sg("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let FT=0;const Hs=new Qn("mat-menu-default-options",{providedIn:"root",factory:function u6(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let bP=(()=>{class n{constructor(e,s,d,f){this._elementRef=e,this._ngZone=s,this._defaultOptions=d,this._changeDetectorRef=f,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Su,this._classList={},this._panelAnimationState="void",this._animationDone=new Et,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Yi,this.close=this.closed,this.panelId="mat-menu-panel-"+FT++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=ya(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ya(e)}set panelClass(e){const s=this._previousPanelClass;s&&s.length&&s.split(" ").forEach(d=>{this._classList[d]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(d=>{this._classList[d]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new cL(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(_T(this._directDescendantItems),_P(e=>No(...e.map(s=>s._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const s=this._keyManager;if("enter"===this._panelAnimationState&&s.activeItem?._hasFocus()){const d=e.toArray(),f=Math.max(0,Math.min(d.length-1,s.activeItemIndex||0));d[f]&&!d[f].disabled?s.setActiveItem(f):s.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(_T(this._directDescendantItems),_P(s=>No(...s.map(d=>d._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const s=e.keyCode,d=this._keyManager;switch(s){case 27:gT(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===s||40===s)&&d.setFocusOrigin("keyboard"),void d.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Qu(1)).subscribe(()=>{let s=null;if(this._directDescendantItems.length&&(s=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!s||!s.contains(document.activeElement)){const d=this._keyManager;d.setFocusOrigin(e).setFirstItemActive(),!d.activeItem&&s&&s.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const s=Math.min(this._baseElevation+e,24),d=`${this._elevationPrefix}${s}`,f=Object.keys(this._classList).find(b=>b.startsWith(this._elevationPrefix));(!f||f===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[d]=!0,this._previousElevation=d)}setPositionClasses(e=this.xPosition,s=this.yPosition){const d=this._classList;d["mat-menu-before"]="before"===e,d["mat-menu-after"]="after"===e,d["mat-menu-above"]="above"===s,d["mat-menu-below"]="below"===s,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(_T(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(s=>s._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(ri),yt(Hs),yt(ma))},n.\u0275dir=mr({type:n,contentQueries:function(e,s,d){if(1&e&&(Oa(d,l6,5),Oa(d,Ji,5),Oa(d,Ji,4)),2&e){let f;vo(f=Ao())&&(s.lazyContent=f.first),vo(f=Ao())&&(s._allItems=f),vo(f=Ao())&&(s.items=f)}},viewQuery:function(e,s){if(1&e&&Hc(_l,5),2&e){let d;vo(d=Ao())&&(s.templateRef=d.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),EG=(()=>{class n extends bP{constructor(e,s,d,f){super(e,s,d,f),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return n.\u0275fac=function(e){return new(e||n)(yt(Ni),yt(ri),yt(Hs),yt(ma))},n.\u0275cmp=aa({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,s){2&e&&io("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[po([{provide:JL,useExisting:n}]),Or],ngContentSelectors:a6,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,s){1&e&&(Vc(),Kn(0,s6,3,6,"ng-template"))},dependencies:[ES],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Rp.transformMenu,Rp.fadeInItems]},changeDetection:0}),n})();const XL=new Qn("mat-menu-scroll-strategy"),SG={provide:XL,deps:[tE],useFactory:function bG(n){return()=>n.scrollStrategies.reposition()}},d6=Cc({passive:!0});let CG=(()=>{class n{constructor(e,s,d,f,b,E,T,k,Q){this._overlay=e,this._element=s,this._viewContainerRef=d,this._menuItemInstance=E,this._dir=T,this._focusMonitor=k,this._ngZone=Q,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=j.EMPTY,this._hoverSubscription=j.EMPTY,this._menuCloseSubscription=j.EMPTY,this._handleTouchStart=ie=>{Jy(ie)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Yi,this.onMenuOpen=this.menuOpened,this.menuClosed=new Yi,this.onMenuClose=this.menuClosed,this._scrollStrategy=f,this._parentMaterialMenu=b instanceof bP?b:void 0,s.nativeElement.addEventListener("touchstart",this._handleTouchStart,d6)}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(s=>{this._destroyMenu(s),("click"===s||"tab"===s)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(s)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,d6),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const s=this._createOverlay(e),d=s.getConfig(),f=d.positionStrategy;this._setPosition(e,f),d.hasBackdrop=e.hasBackdrop??!this.triggersSubmenu(),s.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof bP&&(e._startAnimation(),e._directDescendantItems.changes.pipe(Cl(e.close)).subscribe(()=>{f.withLockedPosition(!1).reapplyLastPosition(),f.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,s){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,s):this._element.nativeElement.focus(s)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const s=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,s instanceof bP?(s._resetAnimation(),s.lazyContent?s._animationDone.pipe(Vf(d=>"void"===d.toState),Qu(1),Cl(s.lazyContent._attached)).subscribe({next:()=>s.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),s?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let s=0,d=e.parentMenu;for(;d;)s++,d=d.parentMenu;e.setElevation(s)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_createOverlay(e){if(!this._overlayRef){const s=this._getOverlayConfig(e);this._subscribeToPositions(e,s.positionStrategy),this._overlayRef=this._overlay.create(s),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new cP({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,s){e.setPositionClasses&&s.positionChanges.subscribe(d=>{const f="start"===d.connectionPair.overlayX?"after":"before",b="top"===d.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(f,b)):e.setPositionClasses(f,b)})}_setPosition(e,s){let[d,f]="before"===e.xPosition?["end","start"]:["start","end"],[b,E]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[T,k]=[b,E],[Q,ie]=[d,f],Ie=0;if(this.triggersSubmenu()){if(ie=d="before"===e.xPosition?"start":"end",f=Q="end"===d?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const xe=this._parentMaterialMenu.items.first;this._parentInnerPadding=xe?xe._getHostElement().offsetTop:0}Ie="bottom"===b?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(T="top"===b?"bottom":"top",k="top"===E?"bottom":"top");s.withPositions([{originX:d,originY:T,overlayX:Q,overlayY:b,offsetY:Ie},{originX:f,originY:T,overlayX:ie,overlayY:b,offsetY:Ie},{originX:d,originY:k,overlayX:Q,overlayY:E,offsetY:-Ie},{originX:f,originY:k,overlayX:ie,overlayY:E,offsetY:-Ie}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),s=this._overlayRef.detachments();return No(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:Lu(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Vf(b=>b!==this._menuItemInstance),Vf(()=>this._menuOpen)):Lu(),s)}_handleMousedown(e){Il(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const s=e.keyCode;(13===s||32===s)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===s&&"ltr"===this.dir||37===s&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Vf(e=>e===this._menuItemInstance&&!e.disabled),GV(0,TL)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof bP&&this.menu._isAnimating?this.menu._animationDone.pipe(Qu(1),GV(0,TL),Cl(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new nP(e.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(yt(tE),yt(Ni),yt(vl),yt(XL),yt(JL,8),yt(Ji,10),yt(XS,8),yt(uL),yt(ri))},n.\u0275dir=mr({type:n,hostVars:3,hostBindings:function(e,s){1&e&&eo("click",function(f){return s._handleClick(f)})("mousedown",function(f){return s._handleMousedown(f)})("keydown",function(f){return s._handleKeydown(f)}),2&e&&io("aria-haspopup",s.menu?"menu":null)("aria-expanded",s.menuOpen)("aria-controls",s.menuOpen?s.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),IG=(()=>{class n extends CG{}return n.\u0275fac=function(){let t;return function(s){return(t||(t=kr(n)))(s||n)}}(),n.\u0275dir=mr({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[Or]}),n})(),wG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({providers:[SG],imports:[Xo,Fu,gs,uV,aP,gs]}),n})();class ZL{transform(t,...e){return Array.from(t,([s,d])=>({name:s,value:d}))}static#e=this.\u0275fac=function(e){return new(e||ZL)};static#t=this.\u0275pipe=Oc({name:"twilio",type:ZL,pure:!1})}function TG(n,t){1&n&&(jt(0,"mat-form-field",8)(1,"mat-label"),bn(2,"Geo Regions (Zoom only)"),Yt(),Ui(3,"input",19),jt(4,"mat-hint"),bn(5,"Comma separeted list of "),jt(6,"a",20),bn(7,"country codes"),Yt(),bn(8,"."),Yt(),jt(9,"mat-icon",14),bn(10,"public"),Yt()())}function RG(n,t){1&n&&(jt(0,"button",21)(1,"mat-icon"),bn(2,"login"),Yt()())}function DG(n,t){if(1&n){const e=qa();jt(0,"form",7),eo("ngSubmit",function(){Qa(e);const d=Cr();return Ko(d.authorize(d.configForm.value))}),jt(1,"mat-form-field",8)(2,"mat-label"),bn(3,"Video SDK Provider"),Yt(),jt(4,"mat-select",9)(5,"mat-option",10),bn(6,"Zoom Video SDK"),Yt(),jt(7,"mat-option",11),bn(8,"Twilio Video SDK"),Yt(),jt(9,"mat-option",12),bn(10,"Agora Video SDK"),Yt()()(),jt(11,"mat-form-field",8)(12,"mat-label"),bn(13,"Your Name"),Yt(),Ui(14,"input",13),jt(15,"mat-icon",14),bn(16,"face"),Yt()(),jt(17,"mat-form-field",8)(18,"mat-label"),bn(19,"Session Name"),Yt(),Ui(20,"input",15),jt(21,"mat-icon",14),bn(22,"meeting_room"),Yt()(),jt(23,"mat-form-field",8)(24,"mat-label"),bn(25,"Session Passcode"),Yt(),Ui(26,"input",16),jt(27,"mat-icon",14),bn(28,"vpn_key"),Yt()(),Kn(29,TG,11,0,"mat-form-field",17),Kn(30,RG,3,0,"button",18),Yt()}if(2&n){const e=Cr();fn("formGroup",e.configForm),Ft(29),fn("ngIf","zoom"===e.configForm.value.videoSDKProvider),Ft(1),fn("ngIf",!e.session)}}function h6(n,t){if(1&n&&(jt(0,"div",22)(1,"h1"),bn(2),Yt()()),2&n){const e=Cr();Ft(2),_i("",e.videoSDKProvider," Video SDK")}}function OG(n,t){if(1&n){const e=qa();jt(0,"button",27),eo("click",function(){return Qa(e),Ko(Cr(2).startAudio())}),jt(1,"mat-icon"),bn(2,"volume_off"),Yt()()}}function kG(n,t){if(1&n){const e=qa();jt(0,"button",27),eo("click",function(){return Qa(e),Ko(Cr(2).mute())}),jt(1,"mat-icon"),bn(2,"mic"),Yt()()}}function PG(n,t){if(1&n){const e=qa();jt(0,"button",27),eo("click",function(){return Qa(e),Ko(Cr(2).unmute())}),jt(1,"mat-icon"),bn(2,"mic_off"),Yt()()}}function f6(n,t){if(1&n){const e=qa();jt(0,"button",27),eo("click",function(){return Qa(e),Ko(Cr(2).stopCamera())}),jt(1,"mat-icon"),bn(2,"videocam"),Yt()()}}function m6(n,t){if(1&n){const e=qa();jt(0,"button",27),eo("click",function(){return Qa(e),Ko(Cr(2).startCamera())}),jt(1,"mat-icon"),bn(2,"videocam_off"),Yt()()}}function g6(n,t){if(1&n&&(jt(0,"button",31),bn(1),Yt()),2&n){const e=t.$implicit;Ft(1),td(e.displayName)}}function _6(n,t){if(1&n&&(za(0),jt(1,"button",28)(2,"mat-icon"),bn(3,"people"),Yt()(),jt(4,"mat-menu",null,29),Kn(6,g6,2,1,"button",30),Yt(),Da()),2&n){const e=ah(5),s=Cr(2);Ft(1),fn("matMenuTriggerFor",e)("matBadge",s.zoomVideo.getAllUser().length),Ft(5),fn("ngForOf",s.zoomVideo.getAllUser())}}function MG(n,t){if(1&n&&(jt(0,"button",31),bn(1),Yt()),2&n){const e=t.$implicit;Ft(1),td(e.value.identity)}}function NG(n,t){if(1&n&&(za(0),jt(1,"button",28)(2,"mat-icon"),bn(3,"people"),Yt()(),jt(4,"mat-menu",null,29)(6,"button",31),bn(7),Yt(),Kn(8,MG,2,1,"button",30),function W2(n,t){const e=Ri();let s;const d=n+22;e.firstCreatePass?(s=function $D(n,t){if(t)for(let e=t.length-1;e>=0;e--){const s=t[e];if(n===s.name)return s}}(t,e.pipeRegistry),e.data[d]=s,s.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(d,s.onDestroy)):s=e.data[d];const f=s.factory||(s.factory=Bp(s.type)),b=Gu(yt);try{const E=Qp(!1),T=f();return Qp(E),function XR(n,t,e,s){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=s}(e,Rn(),d,T),T}finally{Gu(b)}}(9,"twilio"),Yt(),Da()),2&n){const e=ah(5),s=Cr(2);Ft(1),fn("matMenuTriggerFor",e)("matBadge",s.twilioSession.participants.size+1),Ft(6),td(s.twilioSession.localParticipant.identity),Ft(1),fn("ngForOf",JD(9,4,s.twilioSession.participants))}}function xG(n,t){if(1&n&&(jt(0,"button",31),bn(1),Yt()),2&n){const e=t.$implicit;Ft(1),td(e.uid)}}function v6(n,t){if(1&n&&(za(0),jt(1,"button",28)(2,"mat-icon"),bn(3,"people"),Yt()(),jt(4,"mat-menu",null,29)(6,"button",31),bn(7),Yt(),Kn(8,xG,2,1,"button",30),Yt(),Da()),2&n){const e=ah(5),s=Cr(2);Ft(1),fn("matMenuTriggerFor",e)("matBadge",s.agoraClient.remoteUsers.length+1),Ft(6),td(s.configForm.value.yourName),Ft(1),fn("ngForOf",s.agoraClient.remoteUsers)}}function LG(n,t){if(1&n&&(jt(0,"ul")(1,"li"),bn(2),Yt()()),2&n){const e=Cr(3);Ft(2),_i("",e.zoomNetworkQosUplink.level," / 5")}}function BG(n,t){if(1&n&&(jt(0,"ul")(1,"li"),bn(2),Yt()()),2&n){const e=Cr(3);Ft(2),_i("",e.zoomNetworkQosDownlink.level," / 5")}}function A6(n,t){if(1&n&&(jt(0,"ul")(1,"li"),bn(2),Yt(),jt(3,"li"),bn(4),Yt(),jt(5,"li"),bn(6),Yt(),jt(7,"li"),bn(8),Yt(),jt(9,"li"),bn(10),Yt(),jt(11,"li"),bn(12),Yt(),jt(13,"li"),bn(14),Yt(),jt(15,"li"),bn(16),Yt()()),2&n){const e=Cr(3);Ft(2),_i("avg_loss: ",e.zoomVideoQosSend.data.avg_loss,""),Ft(2),_i("jitter: ",e.zoomVideoQosSend.data.jitter,""),Ft(2),_i("max_loss: ",e.zoomVideoQosSend.data.max_loss,""),Ft(2),_i("rtt: ",e.zoomVideoQosSend.data.rtt,""),Ft(2),_i("sample_rate: ",e.zoomVideoQosSend.data.sample_rate,""),Ft(2),_i("width: ",e.zoomVideoQosSend.data.width,""),Ft(2),_i("height: ",e.zoomVideoQosSend.data.height,""),Ft(2),_i("fps: ",e.zoomVideoQosSend.data.fps,"")}}function FG(n,t){if(1&n&&(jt(0,"ul")(1,"li"),bn(2),Yt(),jt(3,"li"),bn(4),Yt(),jt(5,"li"),bn(6),Yt(),jt(7,"li"),bn(8),Yt(),jt(9,"li"),bn(10),Yt(),jt(11,"li"),bn(12),Yt(),jt(13,"li"),bn(14),Yt(),jt(15,"li"),bn(16),Yt()()),2&n){const e=Cr(3);Ft(2),_i("avg_loss: ",e.zoomVideoQosReceive.data.avg_loss,""),Ft(2),_i("jitter: ",e.zoomVideoQosReceive.data.jitter,""),Ft(2),_i("max_loss: ",e.zoomVideoQosReceive.data.max_loss,""),Ft(2),_i("rtt: ",e.zoomVideoQosReceive.data.rtt,""),Ft(2),_i("sample_rate: ",e.zoomVideoQosReceive.data.sample_rate,""),Ft(2),_i("width: ",e.zoomVideoQosReceive.data.width,""),Ft(2),_i("height: ",e.zoomVideoQosReceive.data.height,""),Ft(2),_i("fps: ",e.zoomVideoQosReceive.data.fps,"")}}function y6(n,t){if(1&n&&(jt(0,"ul")(1,"li"),bn(2),Yt(),jt(3,"li"),bn(4),Yt(),jt(5,"li"),bn(6),Yt(),jt(7,"li"),bn(8),Yt(),jt(9,"li"),bn(10),Yt()()),2&n){const e=Cr(3);Ft(2),_i("avg_loss: ",e.zoomAudioQosSend.data.avg_loss,""),Ft(2),_i("jitter: ",e.zoomAudioQosSend.data.jitter,""),Ft(2),_i("max_loss: ",e.zoomAudioQosSend.data.max_loss,""),Ft(2),_i("rtt: ",e.zoomAudioQosSend.data.rtt,""),Ft(2),_i("sample_rate: ",e.zoomAudioQosSend.data.sample_rate,"")}}function SP(n,t){if(1&n&&(jt(0,"ul")(1,"li"),bn(2),Yt(),jt(3,"li"),bn(4),Yt(),jt(5,"li"),bn(6),Yt(),jt(7,"li"),bn(8),Yt(),jt(9,"li"),bn(10),Yt()()),2&n){const e=Cr(3);Ft(2),_i("avg_loss: ",e.zoomAudioQosReceive.data.avg_loss,""),Ft(2),_i("jitter: ",e.zoomAudioQosReceive.data.jitter,""),Ft(2),_i("max_loss: ",e.zoomAudioQosReceive.data.max_loss,""),Ft(2),_i("rtt: ",e.zoomAudioQosReceive.data.rtt,""),Ft(2),_i("sample_rate: ",e.zoomAudioQosReceive.data.sample_rate,"")}}function UG(n,t){if(1&n&&(za(0),jt(1,"button",32)(2,"mat-icon"),bn(3,"signal_cellular_alt"),Yt()(),jt(4,"mat-menu",null,29)(6,"h3"),bn(7,"Quality of Service"),Yt(),jt(8,"h4"),bn(9,"Network"),Yt(),jt(10,"h5"),bn(11,"My Uplink"),Yt(),Kn(12,LG,3,1,"ul",6),jt(13,"h5"),bn(14,"My Downlink"),Yt(),Kn(15,BG,3,1,"ul",6),jt(16,"h4"),bn(17,"Video"),Yt(),jt(18,"h5"),bn(19,"Sending"),Yt(),Kn(20,A6,17,8,"ul",6),jt(21,"h5"),bn(22,"Receiving"),Yt(),Kn(23,FG,17,8,"ul",6),jt(24,"h4"),bn(25,"Audio"),Yt(),jt(26,"h5"),bn(27,"Sending"),Yt(),Kn(28,y6,11,5,"ul",6),jt(29,"h5"),bn(30,"Receiving"),Yt(),Kn(31,SP,11,5,"ul",6),Yt(),Da()),2&n){const e=ah(5),s=Cr(2);Ft(1),fn("matMenuTriggerFor",e),Ft(11),fn("ngIf",s.zoomNetworkQosUplink),Ft(3),fn("ngIf",s.zoomNetworkQosDownlink),Ft(5),fn("ngIf",s.zoomVideoQosSend),Ft(3),fn("ngIf",s.zoomVideoQosReceive),Ft(5),fn("ngIf",s.zoomAudioQosSend),Ft(3),fn("ngIf",s.zoomAudioQosReceive)}}function E6(n,t){if(1&n){const e=qa();jt(0,"div",23),Kn(1,OG,3,0,"button",24),Kn(2,kG,3,0,"button",24),Kn(3,PG,3,0,"button",24),Kn(4,f6,3,0,"button",24),Kn(5,m6,3,0,"button",24),jt(6,"button",25),eo("click",function(){return Qa(e),Ko(Cr().switchCamera())}),jt(7,"mat-icon"),bn(8,"cameraswitch"),Yt()(),Kn(9,_6,7,3,"ng-container",6),Kn(10,NG,10,6,"ng-container",6),Kn(11,v6,9,4,"ng-container",6),Kn(12,UG,32,7,"ng-container",6),jt(13,"button",26),eo("click",function(){return Qa(e),Ko(Cr().leave())}),jt(14,"mat-icon"),bn(15,"logout"),Yt()()()}if(2&n){const e=Cr();Ft(1),fn("ngIf",!e.mic&&!e.audio),Ft(1),fn("ngIf",e.mic&&e.audio),Ft(1),fn("ngIf",!e.mic&&e.audio),Ft(1),fn("ngIf",e.camera),Ft(1),fn("ngIf",!e.camera),Ft(1),fn("disabled",!e.camera),Ft(3),fn("ngIf","zoom"===e.videoSDKProvider),Ft(1),fn("ngIf","twilio"===e.videoSDKProvider&&e.twilioSession.participants),Ft(1),fn("ngIf","agora"===e.videoSDKProvider&&e.agoraClient.remoteUsers),Ft(1),fn("ngIf","zoom"===e.videoSDKProvider)}}function VG(n,t){1&n&&(jt(0,"div",33),Ui(1,"mat-spinner"),Yt())}function jG(n,t){1&n&&Ui(0,"mat-spinner")}function QG(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_off"),Yt())}function Va(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_on"),Yt())}function UT(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"volume_off"),Yt())}function WV(n,t){if(1&n&&(jt(0,"p"),Kn(1,QG,2,0,"mat-icon",6),Kn(2,Va,2,0,"mat-icon",6),Kn(3,UT,2,0,"mat-icon",6),bn(4),Yt()),2&n){const e=Cr(2);Ft(1),fn("ngIf",e.audio&&!e.mic),Ft(1),fn("ngIf",e.audio&&e.mic),Ft(1),fn("ngIf",!e.audio),Ft(1),_i(" ",e.zoomVideo.getCurrentUserInfo().displayName," (me) ")}}function HG(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"sentiment_satisfied_alt"),Yt())}function GG(n,t){if(1&n&&(za(0),Kn(1,WV,5,4,"p",6),Kn(2,HG,2,0,"mat-icon",6),Ui(3,"video",34)(4,"canvas",35),Da()),2&n){const e=Cr();Ft(1),fn("ngIf",e.zoomVideo&&e.zoomVideo.getCurrentUserInfo()),Ft(1),fn("ngIf",!e.camera&&!e.cameraLoading),Ft(1),fn("hidden",!e.useVideoElementForZoom),Ft(1),fn("hidden",!e.useCanvasElementForZoom)}}function CP(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_off"),Yt())}function WG(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_on"),Yt())}function VT(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"volume_off"),Yt())}function a0(n,t){if(1&n&&(jt(0,"p"),Kn(1,CP,2,0,"mat-icon",6),Kn(2,WG,2,0,"mat-icon",6),Kn(3,VT,2,0,"mat-icon",6),bn(4),Yt()),2&n){const e=Cr(2);Ft(1),fn("ngIf",e.audio&&!e.mic),Ft(1),fn("ngIf",e.audio&&e.mic),Ft(1),fn("ngIf",!e.audio),Ft(1),_i(" ",e.twilioSession.localParticipant.identity," (me) ")}}function KV(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"sentiment_satisfied_alt"),Yt())}function rc(n,t){if(1&n&&(za(0),Kn(1,a0,5,4,"p",6),Kn(2,KV,2,0,"mat-icon",6),Ui(3,"div",36),Da()),2&n){const e=Cr();Ft(1),fn("ngIf",e.twilioSession),Ft(1),fn("ngIf",!e.camera&&!e.cameraLoading),Ft(1),fn("hidden",!e.camera)}}function KG(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_off"),Yt())}function zG(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_on"),Yt())}function qG(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"volume_off"),Yt())}function YG(n,t){if(1&n&&(jt(0,"p"),Kn(1,KG,2,0,"mat-icon",6),Kn(2,zG,2,0,"mat-icon",6),Kn(3,qG,2,0,"mat-icon",6),bn(4),Yt()),2&n){const e=Cr(2);Ft(1),fn("ngIf",e.audio&&!e.mic),Ft(1),fn("ngIf",e.audio&&e.mic),Ft(1),fn("ngIf",!e.audio),Ft(1),_i(" ",e.configForm.value.yourName," (me) ")}}function zV(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"sentiment_satisfied_alt"),Yt())}function qV(n,t){if(1&n&&(za(0),Kn(1,YG,5,4,"p",6),Kn(2,zV,2,0,"mat-icon",6),Ui(3,"div",37),Da()),2&n){const e=Cr();Ft(1),fn("ngIf",e.session),Ft(1),fn("ngIf",!e.camera&&!e.cameraLoading),Ft(1),fn("hidden",!e.camera)}}function $G(n,t){1&n&&(jt(0,"p"),bn(1,"Waiting for others to join..."),Yt())}function eB(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_off"),Yt())}function YV(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_on"),Yt())}function b6(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"volume_off"),Yt())}function $V(n,t){if(1&n&&(jt(0,"p"),Kn(1,eB,2,0,"mat-icon",6),Kn(2,YV,2,0,"mat-icon",6),Kn(3,b6,2,0,"mat-icon",6),bn(4),Yt()),2&n){const e=Cr(2);Ft(1),fn("ngIf",e.activeSpeaker.audio&&e.activeSpeaker.muted),Ft(1),fn("ngIf",e.activeSpeaker.audio&&!e.activeSpeaker.muted),Ft(1),fn("ngIf",!e.activeSpeaker.audio),Ft(1),_i(" ",e.activeSpeaker.displayName," ")}}function IP(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"insert_emoticon"),Yt())}function S6(n,t){if(1&n&&Ui(0,"canvas",39),2&n){const e=Cr(2);fn("hidden",!e.activeSpeaker||!e.activeSpeaker.bVideoOn)}}function JG(n,t){if(1&n&&(za(0),Kn(1,$V,5,4,"p",6),Kn(2,IP,2,0,"mat-icon",6),Kn(3,S6,1,1,"canvas",38),Da()),2&n){const e=Cr();Ft(1),fn("ngIf",e.activeSpeaker),Ft(1),fn("ngIf",e.activeSpeaker&&!e.activeSpeaker.bVideoOn),Ft(1),fn("ngIf",e.zoomVideo)}}function C6(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_off"),Yt())}function JV(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_on"),Yt())}function I6(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"volume_off"),Yt())}function w6(n,t){if(1&n&&(jt(0,"p"),Kn(1,C6,2,0,"mat-icon",6),Kn(2,JV,2,0,"mat-icon",6),Kn(3,I6,2,0,"mat-icon",6),bn(4),Yt()),2&n){const e=Cr(2);Ft(1),fn("ngIf",e.activeSpeaker.value.audioTracks.size&&e.activeSpeaker.value.muted),Ft(1),fn("ngIf",e.activeSpeaker.value.audioTracks.size&&!e.activeSpeaker.value.muted),Ft(1),fn("ngIf",!e.activeSpeaker.value.audioTracks.size),Ft(1),_i(" ",e.activeSpeaker.value.identity," ")}}function XG(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"insert_emoticon"),Yt())}function T6(n,t){if(1&n&&(za(0),Kn(1,w6,5,4,"p",6),Kn(2,XG,2,0,"mat-icon",6),Ui(3,"div",40),Da()),2&n){const e=Cr();Ft(1),fn("ngIf",e.activeSpeaker&&e.activeSpeaker.value),Ft(1),fn("ngIf",e.activeSpeaker&&!e.activeSpeaker.value.videoTracks.size),Ft(1),fn("hidden",!e.activeSpeaker||!e.activeSpeaker.value.videoTracks.size)}}function ZG(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_off"),Yt())}function XV(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"mic_on"),Yt())}function wP(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"volume_off"),Yt())}function R6(n,t){if(1&n&&(jt(0,"p"),Kn(1,ZG,2,0,"mat-icon",6),Kn(2,XV,2,0,"mat-icon",6),Kn(3,wP,2,0,"mat-icon",6),bn(4),Yt()),2&n){const e=Cr(2);Ft(1),fn("ngIf",e.activeSpeaker._audio_added_&&e.activeSpeaker._audio_muted_),Ft(1),fn("ngIf",e.activeSpeaker._audio_added_&&!e.activeSpeaker._audio_muted_),Ft(1),fn("ngIf",!e.activeSpeaker._audio_added_),Ft(1),_i(" ",e.activeSpeaker.uid," ")}}function D6(n,t){1&n&&(jt(0,"mat-icon"),bn(1,"insert_emoticon"),Yt())}function O6(n,t){if(1&n&&(za(0),Kn(1,R6,5,4,"p",6),Kn(2,D6,2,0,"mat-icon",6),Ui(3,"div",41),Da()),2&n){const e=Cr();Ft(1),fn("ngIf",e.activeSpeaker),Ft(1),fn("ngIf",e.activeSpeaker&&!e.activeSpeaker._video_added_),Ft(1),fn("hidden",!e.activeSpeaker||!e.activeSpeaker._video_added_)}}class tB{constructor(t,e,s,d,f){this.platform=t,this.locationStrategy=e,this.httpClient=s,this._snackBar=f,this.zoomAudioDecode=!1,this.zoomAudioEncode=!1,this.useVideoElementForZoom=!1,this.useCanvasElementForZoom=!1,this.twilioVideo=Ij,this.session=!1,this.sessionLoading=!1,this.sessionError=!1,this.camera=!1,this.cameraLoading=!1,this.cameraError=!1,this.mic=!1,this.micLoading=!1,this.micError=!1,this.audio=!1,this.audioLoading=!1,this.audioError=!1,this.cameraSwitchCycle=0,this.videoSDKProvider="zoom",console.log("Desktop Safri?",this.platform.SAFARI),this.configForm=new _r({videoSDKProvider:new Sp("zoom"),yourName:new Sp("User A"),sessionName:new Sp("testsdk"),sessionPasscode:new Sp("zoom123"),geoRegions:new Sp("")}),history.pushState(null,"",window.location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,"",window.location.href)}),this.breakpoint=window.innerWidth<=700?1:2}onResize(t){this.breakpoint=t.target.innerWidth<=700?1:2}authorize(t){this.sessionLoading=!0,console.log(t),this.videoSDKProvider=t.videoSDKProvider,"zoom"===this.videoSDKProvider?this.httpClient.post("https://or116ttpz8.execute-api.us-west-1.amazonaws.com/default/videosdk",JSON.stringify({sessionName:t.sessionName,role:0,geoRegions:t.geoRegions})).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"twilio"===this.videoSDKProvider?this.httpClient.post("https://r6q7q3xd4a.execute-api.us-west-1.amazonaws.com/default/twiliosdk",JSON.stringify({sessionName:t.sessionName,identity:t.yourName})).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&this.httpClient.post("https://cjth3g96g3.execute-api.us-west-1.amazonaws.com/default/agorasdk",JSON.stringify({sessionName:t.sessionName,role:"1"})).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1})}join(t,e){"zoom"===this.videoSDKProvider?(this.zoomVideo=n3().createClient(),this.zoomVideo.init("en-US","Global",{patchJsMedia:!0}).then(()=>{this.zoomVideo.join(e.sessionName,t,e.yourName,e.sessionPasscode).then(s=>{console.log(s),console.log(this.zoomVideo.getSessionInfo()),this.zoomSession=this.zoomVideo.getMediaStream(),this.sessionLoading=!1,this.session=!0,this.zoomSession.subscribeAudioStatisticData().then(()=>{console.log("test"),this.zoomVideo.on("audio-statistic-data-change",d=>{!0===d.data.encoding?this.zoomAudioQosSend=d:!1===d.data.encoding&&(this.zoomAudioQosReceive=d),console.log(d)})}),this.zoomSession.subscribeVideoStatisticData().then(()=>{console.log("test"),this.zoomVideo.on("video-statistic-data-change",d=>{!0===d.data.encoding?this.zoomVideoQosSend=d:!1===d.data.encoding&&(this.zoomVideoQosReceive=d),console.log(d)})}),this.zoomVideo.on("network-quality-change",d=>{console.log(d),"uplink"===d.type&&d.userId===this.zoomVideo.getCurrentUserInfo().userId?this.zoomNetworkQosUplink=d:"downlink"===d.type&&d.userId===this.zoomVideo.getCurrentUserInfo().userId&&(this.zoomNetworkQosDownlink=d)}),console.log(this.zoomVideo.getAllUser()),this.zoomVideo.getAllUser().length>1&&(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&(console.log("loading particpant video"),this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,3).then(d=>{console.log(d)})),console.log("active speaker",this.activeSpeaker)),this.zoomVideo.on("media-sdk-change",d=>{"audio"===d.type&&"success"===d.result&&("encode"===d.action?this.zoomAudioEncode=!0:"decode"===d.action&&(this.zoomAudioDecode=!0))}),this.zoomVideo.on("user-added",d=>{this._snackBar.open(d[0].displayName+" joined","",{verticalPosition:"top",duration:2e3}),this.activeSpeaker||(console.log("second user joined",d),console.log(this.zoomVideo.getAllUser()),this.activeSpeaker=this.zoomVideo.getAllUser().filter(f=>d[0].userId===f.userId)[0])}),this.zoomVideo.on("user-updated",d=>{this.zoomVideo.getCurrentUserInfo()&&this.zoomVideo.getCurrentUserInfo().userId!==d[0].userId&&d[0].userId===this.activeSpeaker.userId&&("audio"in d[0]?this.activeSpeaker.audio=d[0].audio:"muted"in d[0]&&(this.activeSpeaker.muted=d[0].muted))}),this.zoomVideo.on("user-removed",d=>{this.activeSpeaker.userId===d[0].userId&&(console.log("active speaker left"),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.zoomVideo.getAllUser().length>1?(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,3).then(()=>{console.log(s)})):this.activeSpeaker=null),this._snackBar.open(d[0].displayName+" left","",{verticalPosition:"top",duration:2e3})}),this.zoomVideo.on("active-speaker",d=>{this.activeSpeaker.userId!==d[0].userId&&this.zoomVideo.getCurrentUserInfo().userId!==d[0].userId&&(console.log("new active speaker",d),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.activeSpeaker=this.zoomVideo.getAllUser().filter(f=>d[0].userId===f.userId)[0],console.log(this.activeSpeaker),this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,3).then(()=>{console.log(s)}))}),this.zoomVideo.on("peer-video-state-change",d=>{(!this.activeSpeaker||d.userId===this.activeSpeaker.userId)&&("Start"===d.action?this.zoomSession.renderVideo(document.getElementById("participant-canvas"),d.userId,1920,1080,0,0,3).then(f=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(b=>d.userId===b.userId)[0]}).catch(f=>{console.log(f)}):"Stop"===d.action&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),d.userId).then(f=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(b=>d.userId===b.userId)[0]}).catch(f=>{console.log(f)}))})})}).catch(s=>{console.log(s),this.sessionLoading=!1})):"twilio"===this.videoSDKProvider?this.twilioVideo.connect(t,{name:e.sessionName,audio:!1,video:!1,dominantSpeaker:!0}).then(s=>{this.twilioSession=s,console.log(`Successfully joined a Room: ${this.twilioSession}`),this.sessionLoading=!1,this.session=!0,console.log(this.twilioSession.participants),console.log(),Array.from(this.twilioSession.participants,([f,b])=>({name:f,value:b})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([f,b])=>({name:f,value:b}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),this.twilioSession.participants.forEach(f=>{console.log(f),f.tracks.forEach(b=>{console.log(b),b.track&&(console.log("render the particpant video"),document.getElementById("twilio-user-view-div").appendChild(b.track.attach()),b.track.on("disabled",()=>{console.log("did I mute?")}),b.track.on("enabled",()=>{console.log("did I unmute?")}))}),f.on("trackSubscribed",b=>{console.log(b),f.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(b.attach())),b.on("disabled",()=>{f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0),console.log("did I mute again?")}),b.on("enabled",()=>{f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1),console.log("did I unmute again?")})}),f.on("trackUnsubscribed",b=>{console.log("a video was stopped"),f.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantConnected",f=>{console.log(f),this._snackBar.open(f.identity+" joined","",{verticalPosition:"top",duration:2e3}),Array.from(this.twilioSession.participants,([b,E])=>({name:b,value:E})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([b,E])=>({name:b,value:E}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),f.tracks.forEach(b=>{console.log(b),b.track&&(document.getElementById("twilio-user-view-div").appendChild(b.track.attach()),b.track.on("disabled",()=>{console.log("did I mute? 2"),console.log(f)}),b.track.on("enabled",()=>{console.log("did I unmute? 2"),f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}))}),f.on("trackSubscribed",b=>{console.log(b),f.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(b.attach())),b.on("disabled",()=>{console.log("did I mute again? 2"),f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}),b.on("enabled",()=>{console.log("did I unmute again? 2"),f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1)})}),f.on("trackUnsubscribed",b=>{console.log("a video was stopped"),console.log("removing video?"),f.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantDisconnected",f=>{console.log("someone left",f),f.sid===this.activeSpeaker.value.sid&&(document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker=this.activeSpeaker=Array.from(this.twilioSession.participants,([E,T])=>({name:E,value:T}))[0],console.log("new user talking change view",this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([E,T])=>({name:E,value:T}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([E,T])=>({name:E,value:T}))[0].value.track.attach()))),this._snackBar.open(f.identity+" left","",{verticalPosition:"top",duration:2e3})}),this.twilioSession.on("dominantSpeakerChanged",f=>{console.log(f),console.log(f.identity,f.sid),console.log(f.sid===this.activeSpeaker.value.sid),f&&f.sid!==this.activeSpeaker.value.sid&&(console.log("swicth video"),document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker.value=f,this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([E,T])=>({name:E,value:T}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([E,T])=>({name:E,value:T}))[0].value.track.attach())),setTimeout(()=>{console.log(this.activeSpeaker)}))}),console.log(this.twilioSession.localParticipant);let d=Array.from(this.twilioSession.participants,([f,b])=>({name:f,value:b}));console.log(d)}).catch(s=>{console.log(s),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&(console.log(e),this.agoraClient=hT().createClient({codec:"vp8",mode:"rtc"}),this.agoraClient.join("59dcf92e250b4392839cf3c7ea2818d0",e.sessionName,t,e.yourName).then(s=>{console.log(s),this.sessionLoading=!1,this.session=!0,console.log(this.agoraClient.remoteUsers),this.agoraClient.remoteUsers.length&&(this.activeSpeaker=this.agoraClient.remoteUsers[0],console.log(this.activeSpeaker)),this.agoraClient.on("user-joined",d=>{console.log("user joined",d),console.log("check current users",this.agoraClient.remoteUsers[0].uid),this.activeSpeaker||(this.activeSpeaker=d,console.log(this.activeSpeaker.lX))}),this.agoraClient.on("user-left",d=>{console.log("user left",d),this.activeSpeaker.uid===d.uid&&(this.activeSpeaker=this.agoraClient.remoteUsers.length?this.agoraClient.remoteUsers[0]:null)}),this.agoraClient.on("user-published",(d,f)=>{this.agoraClient.subscribe(d,f).then(()=>{if("audio"===f&&(this.remoteAgoraAudio=d.audioTrack,this.remoteAgoraAudio.play()),"video"===f&&this.activeSpeaker.uid===d.uid){this.remoteAgoraVideo=d.videoTrack;const b=document.getElementById("agora-user-view-div");this.remoteAgoraVideo.play(b)}})}),this.agoraClient.on("user-unpublished",(d,f)=>{"video"===f&&this.activeSpeaker.uid===d.uid&&document.getElementById("agora-user-view-div")?.querySelector("div")?.remove()})}).catch(s=>{console.log(s),this.sessionLoading=!1}))}startAudio(){this.audioLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.startAudio(),this.mic=!0,this.audio=!0,this.audioLoading=!1):"twilio"===this.videoSDKProvider?this.twilioVideo.createLocalAudioTrack().then(t=>{this.twilioSession.localParticipant.publishTrack(t);const e=t.attach();document.body.appendChild(e),console.log("twilio mic"),this.micLoading=!1,this.mic=!0,this.audio=!0}):"agora"===this.videoSDKProvider&&hT().createMicrophoneAudioTrack().then(t=>{console.log(t),this.selfAgoraAudio=t,this.agoraClient.publish([this.selfAgoraAudio]),this.micLoading=!1,this.mic=!0,this.audio=!0})}unmute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.unmuteAudio(),console.log("zoom mic"),this.micLoading=!1,this.mic=!0):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.enable()}),this.micLoading=!1,this.mic=!0):"agora"===this.videoSDKProvider&&(this.selfAgoraAudio.setEnabled(!0),this.micLoading=!1,this.mic=!0)}mute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.muteAudio(),this.micLoading=!1,this.mic=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.disable()}),this.micLoading=!1,this.mic=!1):"agora"===this.videoSDKProvider&&(this.selfAgoraAudio.setEnabled(!1),this.micLoading=!1,this.mic=!1)}switchCamera(){console.log("switch camera"),"zoom"===this.videoSDKProvider?(console.log("current",this.cameraSwitchCycle),this.zoomSession.switchCamera(this.zoomSession.getCameraList()[this.cameraSwitchCycle].deviceId),this.zoomSession.getCameraList().length-1<=this.cameraSwitchCycle?this.cameraSwitchCycle=0:this.cameraSwitchCycle+=1,console.log("new",this.cameraSwitchCycle)):"twilio"===this.videoSDKProvider?console.log("not implemented for Twilio, ask Tommy to add if needed"):"agora"===this.videoSDKProvider&&(console.log(hT().getCameras()),hT().getCameras().then(t=>{console.log(t),this.selfAgoraVideo.setDevice(t[this.cameraSwitchCycle].deviceId),t.length-1<=this.cameraSwitchCycle?this.cameraSwitchCycle=0:this.cameraSwitchCycle+=1}).catch(t=>{console.log(t)}))}startCamera(){this.cameraLoading=!0,"zoom"===this.videoSDKProvider?this.zoomSession.isRenderSelfViewWithVideoElement()?this.zoomSession.startVideo({videoElement:document.getElementById("self-view-video"),hd:!0}).then(()=>{this.useVideoElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)}):this.zoomSession.startVideo({hd:!0}).then(()=>{this.zoomSession.renderVideo(document.getElementById("self-view-canvas"),this.zoomVideo.getCurrentUserInfo().userId,1920,1080,0,0,3).then(()=>{this.useCanvasElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)}):"twilio"===this.videoSDKProvider?(console.log(this.twilioSession.participants),console.log(this.twilioSession.participants.values()),this.twilioVideo.createLocalVideoTrack({height:{ideal:720,min:480,max:1080},width:{ideal:1280,min:640,max:1920},aspectRatio:16/9}).then(t=>{this.twilioSession.localParticipant.publishTrack(t),document.getElementById("twilio-self-view-div").appendChild(t.attach()),this.cameraLoading=!1,this.camera=!0})):"agora"===this.videoSDKProvider&&hT().createCameraVideoTrack({encoderConfig:"720p_2"}).then(t=>{console.log(t),this.selfAgoraVideo=t,this.agoraClient.publish([this.selfAgoraVideo]);const e=document.getElementById("agora-self-view-div");this.selfAgoraVideo.play(e),this.cameraLoading=!1,this.camera=!0})}stopCamera(){this.cameraLoading=!0,this.camera=!1,"zoom"===this.videoSDKProvider?(this.zoomSession.stopVideo(),this.cameraLoading=!1,this.camera=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1):"twilio"===this.videoSDKProvider?this.twilioSession.localParticipant.videoTracks.forEach(e=>{e.unpublish(),e.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove(),console.log("video stopped"),this.cameraLoading=!1,this.camera=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient.unpublish([this.selfAgoraVideo]),this.selfAgoraVideo.close(),document.getElementById("agora-self-view-div")?.querySelector("div")?.remove(),this.selfAgoraVideo=null,this.cameraLoading=!1,this.camera=!1,this.cameraSwitchCycle=0)}leave(){this.sessionLoading=!0,this.camera=!1,this.mic=!1,this.audio=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1,this.activeSpeaker=null,this.cameraSwitchCycle=0,setTimeout(()=>{"zoom"===this.videoSDKProvider?(this.zoomVideo.leave(),this.sessionLoading=!1,this.session=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.videoTracks.forEach(e=>{e.unpublish(),e.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove()}),this.twilioSession.localParticipant.audioTracks.forEach(e=>{e.unpublish(),e.track.stop(),document.querySelector("audio")?.remove()}),this.twilioSession.disconnect(),this.sessionLoading=!1,this.session=!1):"agora"===this.videoSDKProvider&&(this.selfAgoraVideo&&(this.agoraClient.unpublish([this.selfAgoraVideo]),this.selfAgoraVideo.close(),document.getElementById("agora-self-view-div")?.querySelector("div")?.remove()),this.selfAgoraAudio&&(this.agoraClient.unpublish([this.selfAgoraAudio]),this.selfAgoraAudio.close()),this.agoraClient.leave(),this.sessionLoading=!1,this.session=!1)},500)}static#e=this.\u0275fac=function(e){return new(e||tB)(yt($c),yt(Ry),yt(Ux),yt(Ei),yt(n0))};static#t=this.\u0275cmp=aa({type:tB,selectors:[["app-root"]],decls:16,vars:15,consts:[["class","config",3,"formGroup","ngSubmit",4,"ngIf"],["class","videoSDKProvider",4,"ngIf"],["class","controls",4,"ngIf"],["class","sessionLoading",4,"ngIf"],[1,"view"],["rowHeight","16:9",3,"cols","resize"],[4,"ngIf"],[1,"config",3,"formGroup","ngSubmit"],["appearance","outline"],["formControlName","videoSDKProvider"],["value","zoom"],["value","twilio"],["value","agora"],["matInput","","formControlName","yourName","autocomplete","off"],["matSuffix",""],["matInput","","formControlName","sessionName","autocomplete","off"],["matInput","","formControlName","sessionPasscode","autocomplete","off"],["appearance","outline",4,"ngIf"],["mat-fab","","color","primary",4,"ngIf"],["matInput","","formControlName","geoRegions","autocomplete","off"],["href","https://developers.zoom.us/docs/video-sdk/auth/#payload","target","_blank"],["mat-fab","","color","primary"],[1,"videoSDKProvider"],[1,"controls"],["mat-fab","","color","primary",3,"click",4,"ngIf"],["mat-fab","","color","primary",3,"disabled","click"],["mat-fab","","color","warn",3,"click"],["mat-fab","","color","primary",3,"click"],["mat-fab","","color","primary",3,"matMenuTriggerFor","matBadge"],["menu","matMenu"],["mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item",""],["mat-fab","","color","primary",3,"matMenuTriggerFor"],[1,"sessionLoading"],["id","self-view-video","width","1920","height","1080",3,"hidden"],["id","self-view-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-self-view-div",3,"hidden"],["id","agora-self-view-div",3,"hidden"],["id","participant-canvas","width","1920","height","1080",3,"hidden",4,"ngIf"],["id","participant-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-user-view-div",3,"hidden"],["id","agora-user-view-div",3,"hidden"]],template:function(e,s){1&e&&(Kn(0,DG,31,3,"form",0),Kn(1,h6,3,1,"div",1),Kn(2,E6,16,10,"div",2),Kn(3,VG,2,0,"div",3),jt(4,"div",4)(5,"mat-grid-list",5),eo("resize",function(f){return s.onResize(f)},0,ul),jt(6,"mat-grid-tile"),Kn(7,jG,1,0,"mat-spinner",6),Kn(8,GG,5,4,"ng-container",6),Kn(9,rc,4,3,"ng-container",6),Kn(10,qV,4,3,"ng-container",6),Yt(),jt(11,"mat-grid-tile"),Kn(12,$G,2,0,"p",6),Kn(13,JG,4,3,"ng-container",6),Kn(14,T6,4,3,"ng-container",6),Kn(15,O6,4,3,"ng-container",6),Yt()()()),2&e&&(fn("ngIf",!s.session&&!s.sessionLoading),Ft(1),fn("ngIf",s.session&&!s.sessionLoading),Ft(1),fn("ngIf",s.session&&!s.sessionLoading),Ft(1),fn("ngIf",s.sessionLoading),Ft(1),gf("display",s.session?"flex":"none"),Ft(1),fn("cols",s.breakpoint),Ft(2),fn("ngIf",s.cameraLoading),Ft(1),fn("ngIf","zoom"===s.videoSDKProvider),Ft(1),fn("ngIf","twilio"===s.videoSDKProvider),Ft(1),fn("ngIf","agora"===s.videoSDKProvider),Ft(2),fn("ngIf",!s.activeSpeaker),Ft(1),fn("ngIf","zoom"===s.videoSDKProvider),Ft(1),fn("ngIf","twilio"===s.videoSDKProvider),Ft(1),fn("ngIf","agora"===s.videoSDKProvider))},dependencies:[kw,J_,dj,Ky,hr,Hn,uT,KU,u8,mV,D8,VL,IV,TV,xV,G3,Q8,P5,sG,pG,X8,EG,Ji,IG,ZL],styles:["mat-grid-list[_ngcontent-%COMP%]{position:unset}mat-grid-tile[_ngcontent-%COMP%]{background:lightblue}mat-grid-tile[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:17px;vertical-align:middle;height:17px;font-size:15px}p[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:10px;left:10px;color:#fff;z-index:1}.view[_ngcontent-%COMP%]{height:100vh;align-items:center}.sessionLoading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}#twilio-self-view-div[_ngcontent-%COMP%], #twilio-user-view-div[_ngcontent-%COMP%], #agora-self-view-div[_ngcontent-%COMP%], #agora-user-view-div[_ngcontent-%COMP%]{width:100%;height:100%}#self-view-video[_ngcontent-%COMP%], #self-view-canvas[_ngcontent-%COMP%]{transform:scaleX(-1);height:100%!important}video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{width:100%;height:auto;aspect-ratio:16/9;background-color:#add8e6}.config[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;height:100vh}.config[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:300px}.videoSDKProvider[_ngcontent-%COMP%]{position:fixed;top:20px;display:flex;justify-content:center;width:100%;z-index:2;text-transform:capitalize}.controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;display:flex;justify-content:center;width:100%;z-index:2}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]})}function k6(n){return new un(3e3,!1)}function oW(){return typeof window<"u"&&typeof window.document<"u"}function oB(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function xh(n){switch(n.length){case 0:return new eP;case 1:return n[0];default:return new L5(n)}}function jT(n,t,e,s,d=new Map,f=new Map){const b=[],E=[];let T=-1,k=null;if(s.forEach(Q=>{const ie=Q.get("offset"),Ie=ie==T,xe=Ie&&k||new Map;Q.forEach((qe,ft)=>{let Qt=ft,Kt=qe;if("offset"!==ft)switch(Qt=t.normalizePropertyName(Qt,b),Kt){case"!":Kt=d.get(ft);break;case hv:Kt=f.get(ft);break;default:Kt=t.normalizeStyleValue(ft,Qt,Kt,b)}xe.set(Qt,Kt)}),Ie||E.push(xe),k=xe,T=ie}),b.length)throw function n4(n){return new un(3502,!1)}();return E}function ss(n,t,e,s){switch(t){case"start":n.onStart(()=>s(e&&a4(e,"start",n)));break;case"done":n.onDone(()=>s(e&&a4(e,"done",n)));break;case"destroy":n.onDestroy(()=>s(e&&a4(e,"destroy",n)))}}function a4(n,t,e){const f=sB(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),b=n._data;return null!=b&&(f._data=b),f}function sB(n,t,e,s,d="",f=0,b){return{element:n,triggerName:t,fromState:e,toState:s,phaseName:d,totalTime:f,disabled:!!b}}function Dp(n,t,e){let s=n.get(t);return s||n.set(t,s=e),s}function H6(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let c4=(n,t)=>!1,G6=(n,t,e)=>[],DP=null;function l4(n){const t=n.parentNode||n.host;return t===DP?null:t}(oB()||typeof Element<"u")&&(oW()?(DP=(()=>document.documentElement)(),c4=(n,t)=>{for(;t;){if(t===n)return!0;t=l4(t)}return!1}):c4=(n,t)=>n.contains(t),G6=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const s=n.querySelector(t);return s?[s]:[]});let l0=null,W6=!1;const u4=c4,OP=G6;let K6=(()=>{class n{validateStyleProperty(e){return function aW(n){l0||(l0=function u0(){return typeof document<"u"?document.body:null}()||{},W6=!!l0.style&&"WebkitAppearance"in l0.style);let t=!0;return l0.style&&!function sW(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in l0.style,!t&&W6&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in l0.style)),t}(e)}matchesElement(e,s){return!1}containsElement(e,s){return u4(e,s)}getParentElement(e){return l4(e)}query(e,s,d){return OP(e,s,d)}computeStyle(e,s,d){return d||""}animate(e,s,d,f,b,E=[],T){return new eP(d,f)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})(),d4=(()=>{class n{}return n.NOOP=new K6,n})();const Vu="ng-enter",kP="ng-leave",PP="ng-trigger",QT=".ng-trigger",MP="ng-animating",aB=".ng-animating";function Pd(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:HT(parseFloat(t[1]),t[2])}function HT(n,t){return"s"===t?1e3*n:n}function NP(n,t,e){return n.hasOwnProperty("duration")?n:function q6(n,t,e){let d,f=0,b="";if("string"==typeof n){const E=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===E)return t.push(k6()),{duration:0,delay:0,easing:""};d=HT(parseFloat(E[1]),E[2]);const T=E[3];null!=T&&(f=HT(parseFloat(T),E[4]));const k=E[5];k&&(b=k)}else d=n;if(!e){let E=!1,T=t.length;d<0&&(t.push(function P6(){return new un(3100,!1)}()),E=!0),f<0&&(t.push(function nB(){return new un(3101,!1)}()),E=!0),E&&t.splice(T,0,k6())}return{duration:d,delay:f,easing:b}}(n,t,e)}function GT(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function xP(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Tc(n,t=new Map,e){if(e)for(let[s,d]of e)t.set(s,d);for(let[s,d]of n)t.set(s,d);return t}function p4(n,t,e){return e?t+":"+e+";":""}function cB(n){let t="";for(let e=0;e<n.style.length;e++){const s=n.style.item(e);t+=p4(0,s,n.style.getPropertyValue(s))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=p4(0,X6(e),n.style[e]));n.setAttribute("style",t)}function Wf(n,t,e){n.style&&(t.forEach((s,d)=>{const f=lB(d);e&&!e.has(d)&&e.set(d,n.style[f]),n.style[f]=s}),oB()&&cB(n))}function yv(n,t){n.style&&(t.forEach((e,s)=>{const d=lB(s);n.style[d]=""}),oB()&&cB(n))}function Kf(n){return Array.isArray(n)?1==n.length?n[0]:N5(n):n}const LP=new RegExp("{{\\s*(.+?)\\s*}}","g");function Op(n){let t=[];if("string"==typeof n){let e;for(;e=LP.exec(n);)t.push(e[1]);LP.lastIndex=0}return t}function WT(n,t,e){const s=n.toString(),d=s.replace(LP,(f,b)=>{let E=t[b];return null==E&&(e.push(function rB(n){return new un(3003,!1)}()),E=""),E.toString()});return d==s?n:d}function oE(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const J6=/-+([a-z0-9])/g;function lB(n){return n.replace(J6,(...t)=>t[1].toUpperCase())}function X6(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kp(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function M6(n){return new un(3004,!1)}()}}function Ai(n,t){return window.getComputedStyle(n)[t]}function dB(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(s=>function rQ(n,t,e){if(":"==n[0]){const T=function uW(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,s)=>parseFloat(s)>parseFloat(e);case":decrement":return(e,s)=>parseFloat(s)<parseFloat(e);default:return t.push(function RP(n){return new un(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof T)return void t.push(T);n=T}const s=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return e.push(function Av(n){return new un(3015,!1)}()),t;const d=s[1],f=s[2],b=s[3];t.push(m4(d,b));"<"==f[0]&&!("*"==d&&"*"==b)&&t.push(m4(b,d))}(s,e,t)):e.push(n),e}const UP=new Set(["true","1"]),di=new Set(["false","0"]);function m4(n,t){const e=UP.has(n)||di.has(n),s=UP.has(t)||di.has(t);return(d,f)=>{let b="*"==n||n==d,E="*"==t||t==f;return!b&&e&&"boolean"==typeof d&&(b=d?UP.has(n):di.has(n)),!E&&s&&"boolean"==typeof f&&(E=f?UP.has(t):di.has(t)),b&&E}}const dW=new RegExp("s*:selfs*,?","g");function Jl(n,t,e,s){return new iQ(n).build(t,e,s)}class iQ{constructor(t){this._driver=t}build(t,e,s){const d=new pB(e);return this._resetContextStyleTimingState(d),kp(this,Kf(t),d)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let s=e.queryCount=0,d=e.depCount=0;const f=[],b=[];return"@"==t.name.charAt(0)&&e.errors.push(function N6(){return new un(3006,!1)}()),t.definitions.forEach(E=>{if(this._resetContextStyleTimingState(e),0==E.type){const T=E,k=T.name;k.toString().split(/\s*,\s*/).forEach(Q=>{T.name=Q,f.push(this.visitState(T,e))}),T.name=k}else if(1==E.type){const T=this.visitTransition(E,e);s+=T.queryCount,d+=T.depCount,b.push(T)}else e.errors.push(function Gf(){return new un(3007,!1)}())}),{type:7,name:t.name,states:f,transitions:b,queryCount:s,depCount:d,options:null}}visitState(t,e){const s=this.visitStyle(t.styles,e),d=t.options&&t.options.params||null;if(s.containsDynamicStyles){const f=new Set,b=d||{};s.styles.forEach(E=>{E instanceof Map&&E.forEach(T=>{Op(T).forEach(k=>{b.hasOwnProperty(k)||f.add(k)})})}),f.size&&(oE(f.values()),e.errors.push(function nE(n,t){return new un(3008,!1)}()))}return{type:0,name:t.name,style:s,options:d?{params:d}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const s=kp(this,Kf(t.animation),e);return{type:1,matchers:dB(t.expr,e.errors),animation:s,queryCount:e.queryCount,depCount:e.depCount,options:Tg(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(s=>kp(this,s,e)),options:Tg(t.options)}}visitGroup(t,e){const s=e.currentTime;let d=0;const f=t.steps.map(b=>{e.currentTime=s;const E=kp(this,b,e);return d=Math.max(d,e.currentTime),E});return e.currentTime=d,{type:3,steps:f,options:Tg(t.options)}}visitAnimate(t,e){const s=function hB(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return fB(NP(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(f=>"{"==f.charAt(0)&&"{"==f.charAt(1))){const f=fB(0,0,"");return f.dynamic=!0,f.strValue=e,f}const d=NP(e,t);return fB(d.duration,d.delay,d.easing)}(t.timings,e.errors);e.currentAnimateTimings=s;let d,f=t.styles?t.styles:wc({});if(5==f.type)d=this.visitKeyframes(f,e);else{let b=t.styles,E=!1;if(!b){E=!0;const k={};s.easing&&(k.easing=s.easing),b=wc(k)}e.currentTime+=s.duration+s.delay;const T=this.visitStyle(b,e);T.isEmptyStep=E,d=T}return e.currentAnimateTimings=null,{type:4,timings:s,style:d,options:null}}visitStyle(t,e){const s=this._makeStyleAst(t,e);return this._validateStyleAst(s,e),s}_makeStyleAst(t,e){const s=[],d=Array.isArray(t.styles)?t.styles:[t.styles];for(let E of d)"string"==typeof E?E===hv?s.push(E):e.errors.push(new un(3002,!1)):s.push(xP(E));let f=!1,b=null;return s.forEach(E=>{if(E instanceof Map&&(E.has("easing")&&(b=E.get("easing"),E.delete("easing")),!f))for(let T of E.values())if(T.toString().indexOf("{{")>=0){f=!0;break}}),{type:6,styles:s,easing:b,offset:t.offset,containsDynamicStyles:f,options:null}}_validateStyleAst(t,e){const s=e.currentAnimateTimings;let d=e.currentTime,f=e.currentTime;s&&f>0&&(f-=s.duration+s.delay),t.styles.forEach(b=>{"string"!=typeof b&&b.forEach((E,T)=>{const k=e.collectedStyles.get(e.currentQuerySelector),Q=k.get(T);let ie=!0;Q&&(f!=d&&f>=Q.startTime&&d<=Q.endTime&&(e.errors.push(function ZV(n,t,e,s,d){return new un(3010,!1)}()),ie=!1),f=Q.startTime),ie&&k.set(T,{startTime:f,endTime:d}),e.options&&function h4(n,t,e){const s=t.params||{},d=Op(n);d.length&&d.forEach(f=>{s.hasOwnProperty(f)||e.push(function kd(n){return new un(3001,!1)}())})}(E,e.options,e.errors)})})}visitKeyframes(t,e){const s={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function TP(){return new un(3011,!1)}()),s;let f=0;const b=[];let E=!1,T=!1,k=0;const Q=t.steps.map(Kt=>{const pn=this._makeStyleAst(Kt,e);let Vt=null!=pn.offset?pn.offset:function aQ(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const s=e;t=parseFloat(s.get("offset")),s.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(pn.styles),zn=0;return null!=Vt&&(f++,zn=pn.offset=Vt),T=T||zn<0||zn>1,E=E||zn<k,k=zn,b.push(zn),pn});T&&e.errors.push(function x6(){return new un(3012,!1)}()),E&&e.errors.push(function rE(){return new un(3200,!1)}());const ie=t.steps.length;let Ie=0;f>0&&f<ie?e.errors.push(function L6(){return new un(3202,!1)}()):0==f&&(Ie=1/(ie-1));const xe=ie-1,qe=e.currentTime,ft=e.currentAnimateTimings,Qt=ft.duration;return Q.forEach((Kt,pn)=>{const Vt=Ie>0?pn==xe?1:Ie*pn:b[pn],zn=Vt*Qt;e.currentTime=qe+ft.delay+zn,ft.duration=zn,this._validateStyleAst(Kt,e),Kt.offset=Vt,s.styles.push(Kt)}),s}visitReference(t,e){return{type:8,animation:kp(this,Kf(t.animation),e),options:Tg(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Tg(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Tg(t.options)}}visitQuery(t,e){const s=e.currentQuerySelector,d=t.options||{};e.queryCount++,e.currentQuery=t;const[f,b]=function oQ(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(dW,"")),n=n.replace(/@\*/g,QT).replace(/@\w+/g,e=>QT+"-"+e.slice(1)).replace(/:animating/g,aB),[n,t]}(t.selector);e.currentQuerySelector=s.length?s+" "+f:f,Dp(e.collectedStyles,e.currentQuerySelector,new Map);const E=kp(this,Kf(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=s,{type:11,selector:f,limit:d.limit||0,optional:!!d.optional,includeSelf:b,animation:E,originalSelector:t.selector,options:Tg(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function nW(){return new un(3013,!1)}());const s="full"===t.timings?{duration:0,delay:0,easing:"full"}:NP(t.timings,e.errors,!0);return{type:12,animation:kp(this,Kf(t.animation),e),timings:s,options:null}}}class pB{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Tg(n){return n?(n=GT(n)).params&&(n.params=function sQ(n){return n?GT(n):null}(n.params)):n={},n}function fB(n,t,e){return{duration:n,delay:t,easing:e}}function mB(n,t,e,s,d,f,b=null,E=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:s,duration:d,delay:f,totalTime:d+f,easing:b,subTimeline:E}}class gB{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let s=this._map.get(t);s||this._map.set(t,s=[]),s.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const lQ=new RegExp(":enter","g"),uQ=new RegExp(":leave","g");function VP(n,t,e,s,d,f=new Map,b=new Map,E,T,k=[]){return(new pW).buildKeyframes(n,t,e,s,d,f,b,E,T,k)}class pW{buildKeyframes(t,e,s,d,f,b,E,T,k,Q=[]){k=k||new gB;const ie=new Md(t,e,k,d,f,Q,[]);ie.options=T;const Ie=T.delay?Pd(T.delay):0;ie.currentTimeline.delayNextStep(Ie),ie.currentTimeline.setStyles([b],null,ie.errors,T),kp(this,s,ie);const xe=ie.timelines.filter(qe=>qe.containsAnimation());if(xe.length&&E.size){let qe;for(let ft=xe.length-1;ft>=0;ft--){const Qt=xe[ft];if(Qt.element===e){qe=Qt;break}}qe&&!qe.allowOnlyTimelineStyles()&&qe.setStyles([E],null,ie.errors,T)}return xe.length?xe.map(qe=>qe.buildKeyframes()):[mB(e,[],[],[],0,Ie,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const s=e.subInstructions.get(e.element);if(s){const d=e.createSubContext(t.options),f=e.currentTimeline.currentTime,b=this._visitSubInstructions(s,d,d.options);f!=b&&e.transformIntoNewTimeline(b)}e.previousNode=t}visitAnimateRef(t,e){const s=e.createSubContext(t.options);s.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,s),this.visitReference(t.animation,s),e.transformIntoNewTimeline(s.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,s){for(const d of t){const f=d?.delay;if(f){const b="number"==typeof f?f:Pd(WT(f,d?.params??{},e.errors));s.delayNextStep(b)}}}_visitSubInstructions(t,e,s){let f=e.currentTimeline.currentTime;const b=null!=s.duration?Pd(s.duration):null,E=null!=s.delay?Pd(s.delay):null;return 0!==b&&t.forEach(T=>{const k=e.appendInstructionToTimeline(T,b,E);f=Math.max(f,k.duration+k.delay)}),f}visitReference(t,e){e.updateOptions(t.options,!0),kp(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const s=e.subContextCount;let d=e;const f=t.options;if(f&&(f.params||f.delay)&&(d=e.createSubContext(f),d.transformIntoNewTimeline(),null!=f.delay)){6==d.previousNode.type&&(d.currentTimeline.snapshotCurrentStyles(),d.previousNode=Tl);const b=Pd(f.delay);d.delayNextStep(b)}t.steps.length&&(t.steps.forEach(b=>kp(this,b,d)),d.currentTimeline.applyStylesToKeyframe(),d.subContextCount>s&&d.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const s=[];let d=e.currentTimeline.currentTime;const f=t.options&&t.options.delay?Pd(t.options.delay):0;t.steps.forEach(b=>{const E=e.createSubContext(t.options);f&&E.delayNextStep(f),kp(this,b,E),d=Math.max(d,E.currentTimeline.currentTime),s.push(E.currentTimeline)}),s.forEach(b=>e.currentTimeline.mergeTimelineCollectedStyles(b)),e.transformIntoNewTimeline(d),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const s=t.strValue;return NP(e.params?WT(s,e.params,e.errors):s,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const s=e.currentAnimateTimings=this._visitTiming(t.timings,e),d=e.currentTimeline;s.delay&&(e.incrementTime(s.delay),d.snapshotCurrentStyles());const f=t.style;5==f.type?this.visitKeyframes(f,e):(e.incrementTime(s.duration),this.visitStyle(f,e),d.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const s=e.currentTimeline,d=e.currentAnimateTimings;!d&&s.hasCurrentStyleProperties()&&s.forwardFrame();const f=d&&d.easing||t.easing;t.isEmptyStep?s.applyEmptyStep(f):s.setStyles(t.styles,f,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const s=e.currentAnimateTimings,d=e.currentTimeline.duration,f=s.duration,E=e.createSubContext().currentTimeline;E.easing=s.easing,t.styles.forEach(T=>{E.forwardTime((T.offset||0)*f),E.setStyles(T.styles,T.easing,e.errors,e.options),E.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(E),e.transformIntoNewTimeline(d+f),e.previousNode=t}visitQuery(t,e){const s=e.currentTimeline.currentTime,d=t.options||{},f=d.delay?Pd(d.delay):0;f&&(6===e.previousNode.type||0==s&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Tl);let b=s;const E=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!d.optional,e.errors);e.currentQueryTotal=E.length;let T=null;E.forEach((k,Q)=>{e.currentQueryIndex=Q;const ie=e.createSubContext(t.options,k);f&&ie.delayNextStep(f),k===e.element&&(T=ie.currentTimeline),kp(this,t.animation,ie),ie.currentTimeline.applyStylesToKeyframe(),b=Math.max(b,ie.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(b),T&&(e.currentTimeline.mergeTimelineCollectedStyles(T),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const s=e.parentContext,d=e.currentTimeline,f=t.timings,b=Math.abs(f.duration),E=b*(e.currentQueryTotal-1);let T=b*e.currentQueryIndex;switch(f.duration<0?"reverse":f.easing){case"reverse":T=E-T;break;case"full":T=s.currentStaggerTime}const Q=e.currentTimeline;T&&Q.delayNextStep(T);const ie=Q.currentTime;kp(this,t.animation,e),e.previousNode=t,s.currentStaggerTime=d.currentTime-ie+(d.startTime-s.currentTimeline.startTime)}}const Tl={};class Md{constructor(t,e,s,d,f,b,E,T){this._driver=t,this.element=e,this.subInstructions=s,this._enterClassName=d,this._leaveClassName=f,this.errors=b,this.timelines=E,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Tl,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=T||new ai(this._driver,e,0),E.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const s=t;let d=this.options;null!=s.duration&&(d.duration=Pd(s.duration)),null!=s.delay&&(d.delay=Pd(s.delay));const f=s.params;if(f){let b=d.params;b||(b=this.options.params={}),Object.keys(f).forEach(E=>{(!e||!b.hasOwnProperty(E))&&(b[E]=WT(f[E],b,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const s=t.params={};Object.keys(e).forEach(d=>{s[d]=e[d]})}}return t}createSubContext(t=null,e,s){const d=e||this.element,f=new Md(this._driver,d,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(d,s||0));return f.previousNode=this.previousNode,f.currentAnimateTimings=this.currentAnimateTimings,f.options=this._copyOptions(),f.updateOptions(t),f.currentQueryIndex=this.currentQueryIndex,f.currentQueryTotal=this.currentQueryTotal,f.parentContext=this,this.subContextCount++,f}transformIntoNewTimeline(t){return this.previousNode=Tl,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,s){const d={duration:e??t.duration,delay:this.currentTimeline.currentTime+(s??0)+t.delay,easing:""},f=new dQ(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,d,t.stretchStartingKeyframe);return this.timelines.push(f),d}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,s,d,f,b){let E=[];if(d&&E.push(this.element),t.length>0){t=(t=t.replace(lQ,"."+this._enterClassName)).replace(uQ,"."+this._leaveClassName);let k=this._driver.query(this.element,t,1!=s);0!==s&&(k=s<0?k.slice(k.length+s,k.length):k.slice(0,s)),E.push(...k)}return!f&&0==E.length&&b.push(function B6(n){return new un(3014,!1)}()),E}}class ai{constructor(t,e,s,d){this._driver=t,this.element=e,this.startTime=s,this._elementTimelineStylesLookup=d,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ai(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,s]of this._globalTimelineStyles)this._backFill.set(e,s||hv),this._currentKeyframe.set(e,hv);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,s,d){e&&this._previousKeyframe.set("easing",e);const f=d&&d.params||{},b=function pQ(n,t){const e=new Map;let s;return n.forEach(d=>{if("*"===d){s=s||t.keys();for(let f of s)e.set(f,hv)}else Tc(d,e)}),e}(t,this._globalTimelineStyles);for(let[E,T]of b){const k=WT(T,f,s);this._pendingStyles.set(E,k),this._localTimelineStyles.has(E)||this._backFill.set(E,this._globalTimelineStyles.get(E)??hv),this._updateStyle(E,k)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,s)=>{const d=this._styleSummary.get(s);(!d||e.time>d.time)&&this._updateStyle(s,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,s=1===this._keyframes.size&&0===this.duration;let d=[];this._keyframes.forEach((E,T)=>{const k=Tc(E,new Map,this._backFill);k.forEach((Q,ie)=>{"!"===Q?t.add(ie):Q===hv&&e.add(ie)}),s||k.set("offset",T/this.duration),d.push(k)});const f=t.size?oE(t.values()):[],b=e.size?oE(e.values()):[];if(s){const E=d[0],T=new Map(E);E.set("offset",0),T.set("offset",1),d=[E,T]}return mB(this.element,d,f,b,this.duration,this.startTime,this.easing,!1)}}class dQ extends ai{constructor(t,e,s,d,f,b,E=!1){super(t,e,b.delay),this.keyframes=s,this.preStyleProps=d,this.postStyleProps=f,this._stretchStartingKeyframe=E,this.timings={duration:b.duration,delay:b.delay,easing:b.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:s,easing:d}=this.timings;if(this._stretchStartingKeyframe&&e){const f=[],b=s+e,E=e/b,T=Tc(t[0]);T.set("offset",0),f.push(T);const k=Tc(t[0]);k.set("offset",_B(E)),f.push(k);const Q=t.length-1;for(let ie=1;ie<=Q;ie++){let Ie=Tc(t[ie]);const xe=Ie.get("offset");Ie.set("offset",_B((e+xe*s)/b)),f.push(Ie)}s=b,e=0,d="",t=f}return mB(this.element,t,this.preStyleProps,this.postStyleProps,s,e,d,!0)}}function _B(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class vB{}const ar=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class fW extends vB{normalizePropertyName(t,e){return lB(t)}normalizeStyleValue(t,e,s,d){let f="";const b=s.toString().trim();if(ar.has(e)&&0!==s&&"0"!==s)if("number"==typeof s)f="px";else{const E=s.match(/^[+-]?[\d\.]+([a-z]*)$/);E&&0==E[1].length&&d.push(function eW(n,t){return new un(3005,!1)}())}return b+f}}function jP(n,t,e,s,d,f,b,E,T,k,Q,ie,Ie){return{type:0,element:n,triggerName:t,isRemovalTransition:d,fromState:e,fromStyles:f,toState:s,toStyles:b,timelines:E,queriedElements:T,preStyleProps:k,postStyleProps:Q,totalTime:ie,errors:Ie}}const v4={};class A4{constructor(t,e,s){this._triggerName=t,this.ast=e,this._stateStyles=s}match(t,e,s,d){return function mW(n,t,e,s,d){return n.some(f=>f(t,e,s,d))}(this.ast.matchers,t,e,s,d)}buildStyles(t,e,s){let d=this._stateStyles.get("*");return void 0!==t&&(d=this._stateStyles.get(t?.toString())||d),d?d.buildStyles(e,s):new Map}build(t,e,s,d,f,b,E,T,k,Q){const ie=[],Ie=this.ast.options&&this.ast.options.params||v4,qe=this.buildStyles(s,E&&E.params||v4,ie),ft=T&&T.params||v4,Qt=this.buildStyles(d,ft,ie),Kt=new Set,pn=new Map,Vt=new Map,zn="void"===d,pi={params:gW(ft,Ie),delay:this.ast.options?.delay},hi=Q?[]:VP(t,e,this.ast.animation,f,b,qe,Qt,pi,k,ie);let cs=0;if(hi.forEach(zf=>{cs=Math.max(zf.duration+zf.delay,cs)}),ie.length)return jP(e,this._triggerName,s,d,zn,qe,Qt,[],[],pn,Vt,cs,ie);hi.forEach(zf=>{const gt=zf.element,be=Dp(pn,gt,new Set);zf.preStyleProps.forEach(Rt=>be.add(Rt));const st=Dp(Vt,gt,new Set);zf.postStyleProps.forEach(Rt=>st.add(Rt)),gt!==e&&Kt.add(gt)});const ao=oE(Kt.values());return jP(e,this._triggerName,s,d,zn,qe,Qt,hi,ao,pn,Vt,cs)}}function gW(n,t){const e=GT(t);for(const s in n)n.hasOwnProperty(s)&&null!=n[s]&&(e[s]=n[s]);return e}class _W{constructor(t,e,s){this.styles=t,this.defaultParams=e,this.normalizer=s}buildStyles(t,e){const s=new Map,d=GT(this.defaultParams);return Object.keys(t).forEach(f=>{const b=t[f];null!==b&&(d[f]=b)}),this.styles.styles.forEach(f=>{"string"!=typeof f&&f.forEach((b,E)=>{b&&(b=WT(b,d,e));const T=this.normalizer.normalizePropertyName(E,e);b=this.normalizer.normalizeStyleValue(E,T,b,e),s.set(T,b)})}),s}}class AW{constructor(t,e,s){this.name=t,this.ast=e,this._normalizer=s,this.transitionFactories=[],this.states=new Map,e.states.forEach(d=>{this.states.set(d.name,new _W(d.style,d.options&&d.options.params||{},s))}),hQ(this.states,"true","1"),hQ(this.states,"false","0"),e.transitions.forEach(d=>{this.transitionFactories.push(new A4(t,d,this.states))}),this.fallbackTransition=function yW(n,t,e){return new A4(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(b,E)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,s,d){return this.transitionFactories.find(b=>b.match(t,e,s,d))||null}matchStyles(t,e,s){return this.fallbackTransition.buildStyles(t,e,s)}}function hQ(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const fQ=new gB;class EW{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const s=[],f=Jl(this._driver,e,s,[]);if(s.length)throw function r4(n){return new un(3503,!1)}();this._animations.set(t,f)}_buildPlayer(t,e,s){const d=t.element,f=jT(0,this._normalizer,0,t.keyframes,e,s);return this._driver.animate(d,f,t.duration,t.delay,t.easing,[],!0)}create(t,e,s={}){const d=[],f=this._animations.get(t);let b;const E=new Map;if(f?(b=VP(this._driver,e,f,Vu,kP,new Map,new Map,s,fQ,d),b.forEach(Q=>{const ie=Dp(E,Q.element,new Map);Q.postStyleProps.forEach(Ie=>ie.set(Ie,null))})):(d.push(function i4(){return new un(3300,!1)}()),b=[]),d.length)throw function iB(n){return new un(3504,!1)}();E.forEach((Q,ie)=>{Q.forEach((Ie,xe)=>{Q.set(xe,this._driver.computeStyle(ie,xe,hv))})});const k=xh(b.map(Q=>{const ie=E.get(Q.element);return this._buildPlayer(Q,new Map,ie)}));return this._playersById.set(t,k),k.onDestroy(()=>this.destroy(t)),this.players.push(k),k}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const s=this.players.indexOf(e);s>=0&&this.players.splice(s,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function o4(n){return new un(3301,!1)}();return e}listen(t,e,s,d){const f=sB(e,"","","");return ss(this._getPlayer(t),s,f,d),()=>{}}command(t,e,s,d){if("register"==s)return void this.register(t,d[0]);if("create"==s)return void this.create(t,e,d[0]||{});const f=this._getPlayer(t);switch(s){case"play":f.play();break;case"pause":f.pause();break;case"reset":f.reset();break;case"restart":f.restart();break;case"finish":f.finish();break;case"init":f.init();break;case"setPosition":f.setPosition(parseFloat(d[0]));break;case"destroy":this.destroy(t)}}}const AB="ng-animate-queued",aE="ng-animate-disabled",y4=[],E4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},KT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Nd="__ng_removed";class yB{constructor(t,e=""){this.namespaceId=e;const s=t&&t.hasOwnProperty("value");if(this.value=function Rg(n){return n??null}(s?t.value:t),s){const f=GT(t);delete f.value,this.options=f}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const s=this.options.params;Object.keys(e).forEach(d=>{null==s[d]&&(s[d]=e[d])})}}}const xd="void",b4=new yB(xd);class _Q{constructor(t,e,s){this.id=t,this.hostElement=e,this._engine=s,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Lh(e,this._hostClassName)}listen(t,e,s,d){if(!this._triggers.has(e))throw function F6(n,t){return new un(3302,!1)}();if(null==s||0==s.length)throw function U6(n){return new un(3303,!1)}();if(!function cE(n){return"start"==n||"done"==n}(s))throw function V6(n,t){return new un(3400,!1)}();const f=Dp(this._elementListeners,t,[]),b={name:e,phase:s,callback:d};f.push(b);const E=Dp(this._engine.statesByElement,t,new Map);return E.has(e)||(Lh(t,PP),Lh(t,PP+"-"+e),E.set(e,b4)),()=>{this._engine.afterFlush(()=>{const T=f.indexOf(b);T>=0&&f.splice(T,1),this._triggers.has(e)||E.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function s4(n){return new un(3401,!1)}();return e}trigger(t,e,s,d=!0){const f=this._getTrigger(e),b=new QP(this.id,e,t);let E=this._engine.statesByElement.get(t);E||(Lh(t,PP),Lh(t,PP+"-"+e),this._engine.statesByElement.set(t,E=new Map));let T=E.get(e);const k=new yB(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&T&&k.absorbOptions(T.options),E.set(e,k),T||(T=b4),k.value!==xd&&T.value===k.value){if(!function yQ(n,t){const e=Object.keys(n),s=Object.keys(t);if(e.length!=s.length)return!1;for(let d=0;d<e.length;d++){const f=e[d];if(!t.hasOwnProperty(f)||n[f]!==t[f])return!1}return!0}(T.params,k.params)){const ft=[],Qt=f.matchStyles(T.value,T.params,ft),Kt=f.matchStyles(k.value,k.params,ft);ft.length?this._engine.reportError(ft):this._engine.afterFlush(()=>{yv(t,Qt),Wf(t,Kt)})}return}const Ie=Dp(this._engine.playersByElement,t,[]);Ie.forEach(ft=>{ft.namespaceId==this.id&&ft.triggerName==e&&ft.queued&&ft.destroy()});let xe=f.matchTransition(T.value,k.value,t,k.params),qe=!1;if(!xe){if(!d)return;xe=f.fallbackTransition,qe=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:xe,fromState:T,toState:k,player:b,isFallbackTransition:qe}),qe||(Lh(t,AB),b.onStart(()=>{d0(t,AB)})),b.onDone(()=>{let ft=this.players.indexOf(b);ft>=0&&this.players.splice(ft,1);const Qt=this._engine.playersByElement.get(t);if(Qt){let Kt=Qt.indexOf(b);Kt>=0&&Qt.splice(Kt,1)}}),this.players.push(b),Ie.push(b),b}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,s)=>{this._elementListeners.set(s,e.filter(d=>d.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(s=>s.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const s=this._engine.driver.query(t,QT,!0);s.forEach(d=>{if(d[Nd])return;const f=this._engine.fetchNamespacesByElement(d);f.size?f.forEach(b=>b.triggerLeaveAnimation(d,e,!1,!0)):this.clearElementCache(d)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(d=>this.clearElementCache(d)))}triggerLeaveAnimation(t,e,s,d){const f=this._engine.statesByElement.get(t),b=new Map;if(f){const E=[];if(f.forEach((T,k)=>{if(b.set(k,T.value),this._triggers.has(k)){const Q=this.trigger(t,k,xd,d);Q&&E.push(Q)}}),E.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,b),s&&xh(E).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),s=this._engine.statesByElement.get(t);if(e&&s){const d=new Set;e.forEach(f=>{const b=f.name;if(d.has(b))return;d.add(b);const T=this._triggers.get(b).fallbackTransition,k=s.get(b)||b4,Q=new yB(xd),ie=new QP(this.id,b,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:b,transition:T,fromState:k,toState:Q,player:ie,isFallbackTransition:!0})})}}removeNode(t,e){const s=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let d=!1;if(s.totalAnimations){const f=s.players.length?s.playersByQueriedElement.get(t):[];if(f&&f.length)d=!0;else{let b=t;for(;b=b.parentNode;)if(s.statesByElement.get(b)){d=!0;break}}}if(this.prepareLeaveAnimationListeners(t),d)s.markElementAsRemoved(this.id,t,!1,e);else{const f=t[Nd];(!f||f===E4)&&(s.afterFlush(()=>this.clearElementCache(t)),s.destroyInnerAnimations(t),s._onRemovalComplete(t,e))}}insertNode(t,e){Lh(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(s=>{const d=s.player;if(d.destroyed)return;const f=s.element,b=this._elementListeners.get(f);b&&b.forEach(E=>{if(E.name==s.triggerName){const T=sB(f,s.triggerName,s.fromState.value,s.toState.value);T._data=t,ss(s.player,E.phase,T,E.callback)}}),d.markedForDestroy?this._engine.afterFlush(()=>{d.destroy()}):e.push(s)}),this._queue=[],e.sort((s,d)=>{const f=s.transition.ast.depCount,b=d.transition.ast.depCount;return 0==f||0==b?f-b:this._engine.driver.containsElement(s.element,d.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(s=>s.element===t)||e,e}}class vQ{constructor(t,e,s){this.bodyNode=t,this.driver=e,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(d,f)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(s=>{s.queued&&t.push(s)})}),t}createNamespace(t,e){const s=new _Q(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(s,e):(this.newHostElements.set(e,s),this.collectEnterElement(e)),this._namespaceLookup[t]=s}_balanceNamespaceList(t,e){const s=this._namespaceList,d=this.namespacesByHostElement;if(s.length-1>=0){let b=!1,E=this.driver.getParentElement(e);for(;E;){const T=d.get(E);if(T){const k=s.indexOf(T);s.splice(k+1,0,t),b=!0;break}E=this.driver.getParentElement(E)}b||s.unshift(t)}else s.push(t);return d.set(e,t),t}register(t,e){let s=this._namespaceLookup[t];return s||(s=this.createNamespace(t,e)),s}registerTrigger(t,e,s){let d=this._namespaceLookup[t];d&&d.register(e,s)&&this.totalAnimations++}destroy(t,e){if(!t)return;const s=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[t];const d=this._namespaceList.indexOf(s);d>=0&&this._namespaceList.splice(d,1)}),this.afterFlushAnimationsDone(()=>s.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,s=this.statesByElement.get(t);if(s)for(let d of s.values())if(d.namespaceId){const f=this._fetchNamespace(d.namespaceId);f&&e.add(f)}return e}trigger(t,e,s,d){if(ci(e)){const f=this._fetchNamespace(t);if(f)return f.trigger(e,s,d),!0}return!1}insertNode(t,e,s,d){if(!ci(e))return;const f=e[Nd];if(f&&f.setForRemoval){f.setForRemoval=!1,f.setForMove=!0;const b=this.collectedLeaveElements.indexOf(e);b>=0&&this.collectedLeaveElements.splice(b,1)}if(t){const b=this._fetchNamespace(t);b&&b.insertNode(e,s)}d&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Lh(t,aE)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),d0(t,aE))}removeNode(t,e,s,d){if(ci(e)){const f=t?this._fetchNamespace(t):null;if(f?f.removeNode(e,d):this.markElementAsRemoved(t,e,!1,d),s){const b=this.namespacesByHostElement.get(e);b&&b.id!==t&&b.removeNode(e,d)}}else this._onRemovalComplete(e,d)}markElementAsRemoved(t,e,s,d,f){this.collectedLeaveElements.push(e),e[Nd]={namespaceId:t,setForRemoval:d,hasAnimation:s,removedBeforeQueried:!1,previousTriggersValues:f}}listen(t,e,s,d,f){return ci(e)?this._fetchNamespace(t).listen(e,s,d,f):()=>{}}_buildInstruction(t,e,s,d,f){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,s,d,t.fromState.options,t.toState.options,e,f)}destroyInnerAnimations(t){let e=this.driver.query(t,QT,!0);e.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,aB,!0),e.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return xh(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Nd];if(e&&e.setForRemoval){if(t[Nd]=E4,e.namespaceId){this.destroyInnerAnimations(t);const s=this._fetchNamespace(e.namespaceId);s&&s.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(aE)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,d)=>this._balanceNamespaceList(s,d)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)Lh(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{e=this._flushAnimations(s,t)}finally{for(let d=0;d<s.length;d++)s[d]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],e.length?xh(e).onDone(()=>{s.forEach(d=>d())}):s.forEach(d=>d())}}reportError(t){throw function iW(n){return new un(3402,!1)}()}_flushAnimations(t,e){const s=new gB,d=[],f=new Map,b=[],E=new Map,T=new Map,k=new Map,Q=new Set;this.disabledNodes.forEach(Dt=>{Q.add(Dt);const tn=this.driver.query(Dt,".ng-animate-queued",!0);for(let On=0;On<tn.length;On++)Q.add(tn[On])});const ie=this.bodyNode,Ie=Array.from(this.statesByElement.keys()),xe=AQ(Ie,this.collectedEnterElements),qe=new Map;let ft=0;xe.forEach((Dt,tn)=>{const On=Vu+ft++;qe.set(tn,On),Dt.forEach(Xn=>Lh(Xn,On))});const Qt=[],Kt=new Set,pn=new Set;for(let Dt=0;Dt<this.collectedLeaveElements.length;Dt++){const tn=this.collectedLeaveElements[Dt],On=tn[Nd];On&&On.setForRemoval&&(Qt.push(tn),Kt.add(tn),On.hasAnimation?this.driver.query(tn,".ng-star-inserted",!0).forEach(Xn=>Kt.add(Xn)):pn.add(tn))}const Vt=new Map,zn=AQ(Ie,Array.from(Kt));zn.forEach((Dt,tn)=>{const On=kP+ft++;Vt.set(tn,On),Dt.forEach(Xn=>Lh(Xn,On))}),t.push(()=>{xe.forEach((Dt,tn)=>{const On=qe.get(tn);Dt.forEach(Xn=>d0(Xn,On))}),zn.forEach((Dt,tn)=>{const On=Vt.get(tn);Dt.forEach(Xn=>d0(Xn,On))}),Qt.forEach(Dt=>{this.processLeaveNode(Dt)})});const pi=[],hi=[];for(let Dt=this._namespaceList.length-1;Dt>=0;Dt--)this._namespaceList[Dt].drainQueuedTransitions(e).forEach(On=>{const Xn=On.player,_n=On.element;if(pi.push(Xn),this.collectedEnterElements.length){const Mn=_n[Nd];if(Mn&&Mn.setForMove){if(Mn.previousTriggersValues&&Mn.previousTriggersValues.has(On.triggerName)){const Sr=Mn.previousTriggersValues.get(On.triggerName),ei=this.statesByElement.get(On.element);if(ei&&ei.has(On.triggerName)){const ws=ei.get(On.triggerName);ws.value=Sr,ei.set(On.triggerName,ws)}}return void Xn.destroy()}}const Gn=!ie||!this.driver.containsElement(ie,_n),lr=Vt.get(_n),Ur=qe.get(_n),Zr=this._buildInstruction(On,s,Ur,lr,Gn);if(Zr.errors&&Zr.errors.length)return void hi.push(Zr);if(Gn)return Xn.onStart(()=>yv(_n,Zr.fromStyles)),Xn.onDestroy(()=>Wf(_n,Zr.toStyles)),void d.push(Xn);if(On.isFallbackTransition)return Xn.onStart(()=>yv(_n,Zr.fromStyles)),Xn.onDestroy(()=>Wf(_n,Zr.toStyles)),void d.push(Xn);const ic=[];Zr.timelines.forEach(Mn=>{Mn.stretchStartingKeyframe=!0,this.disabledNodes.has(Mn.element)||ic.push(Mn)}),Zr.timelines=ic,s.append(_n,Zr.timelines),b.push({instruction:Zr,player:Xn,element:_n}),Zr.queriedElements.forEach(Mn=>Dp(E,Mn,[]).push(Xn)),Zr.preStyleProps.forEach((Mn,Sr)=>{if(Mn.size){let ei=T.get(Sr);ei||T.set(Sr,ei=new Set),Mn.forEach((ws,Bh)=>ei.add(Bh))}}),Zr.postStyleProps.forEach((Mn,Sr)=>{let ei=k.get(Sr);ei||k.set(Sr,ei=new Set),Mn.forEach((ws,Bh)=>ei.add(Bh))})});if(hi.length){const Dt=[];hi.forEach(tn=>{Dt.push(function j6(n,t){return new un(3505,!1)}())}),pi.forEach(tn=>tn.destroy()),this.reportError(Dt)}const cs=new Map,ao=new Map;b.forEach(Dt=>{const tn=Dt.element;s.has(tn)&&(ao.set(tn,tn),this._beforeAnimationBuild(Dt.player.namespaceId,Dt.instruction,cs))}),d.forEach(Dt=>{const tn=Dt.element;this._getPreviousPlayers(tn,!1,Dt.namespaceId,Dt.triggerName,null).forEach(Xn=>{Dp(cs,tn,[]).push(Xn),Xn.destroy()})});const zf=Qt.filter(Dt=>T4(Dt,T,k)),gt=new Map;I4(gt,this.driver,pn,k,hv).forEach(Dt=>{T4(Dt,T,k)&&zf.push(Dt)});const st=new Map;xe.forEach((Dt,tn)=>{I4(st,this.driver,new Set(Dt),T,"!")}),zf.forEach(Dt=>{const tn=gt.get(Dt),On=st.get(Dt);gt.set(Dt,new Map([...Array.from(tn?.entries()??[]),...Array.from(On?.entries()??[])]))});const Rt=[],vt=[],gn={};b.forEach(Dt=>{const{element:tn,player:On,instruction:Xn}=Dt;if(s.has(tn)){if(Q.has(tn))return On.onDestroy(()=>Wf(tn,Xn.toStyles)),On.disabled=!0,On.overrideTotalTime(Xn.totalTime),void d.push(On);let _n=gn;if(ao.size>1){let lr=tn;const Ur=[];for(;lr=lr.parentNode;){const Zr=ao.get(lr);if(Zr){_n=Zr;break}Ur.push(lr)}Ur.forEach(Zr=>ao.set(Zr,_n))}const Gn=this._buildAnimation(On.namespaceId,Xn,cs,f,st,gt);if(On.setRealPlayer(Gn),_n===gn)Rt.push(On);else{const lr=this.playersByElement.get(_n);lr&&lr.length&&(On.parentPlayer=xh(lr)),d.push(On)}}else yv(tn,Xn.fromStyles),On.onDestroy(()=>Wf(tn,Xn.toStyles)),vt.push(On),Q.has(tn)&&d.push(On)}),vt.forEach(Dt=>{const tn=f.get(Dt.element);if(tn&&tn.length){const On=xh(tn);Dt.setRealPlayer(On)}}),d.forEach(Dt=>{Dt.parentPlayer?Dt.syncPlayerEvents(Dt.parentPlayer):Dt.destroy()});for(let Dt=0;Dt<Qt.length;Dt++){const tn=Qt[Dt],On=tn[Nd];if(d0(tn,kP),On&&On.hasAnimation)continue;let Xn=[];if(E.size){let Gn=E.get(tn);Gn&&Gn.length&&Xn.push(...Gn);let lr=this.driver.query(tn,aB,!0);for(let Ur=0;Ur<lr.length;Ur++){let Zr=E.get(lr[Ur]);Zr&&Zr.length&&Xn.push(...Zr)}}const _n=Xn.filter(Gn=>!Gn.destroyed);_n.length?SW(this,tn,_n):this.processLeaveNode(tn)}return Qt.length=0,Rt.forEach(Dt=>{this.players.push(Dt),Dt.onDone(()=>{Dt.destroy();const tn=this.players.indexOf(Dt);this.players.splice(tn,1)}),Dt.play()}),Rt}elementContainsData(t,e){let s=!1;const d=e[Nd];return d&&d.setForRemoval&&(s=!0),this.playersByElement.has(e)&&(s=!0),this.playersByQueriedElement.has(e)&&(s=!0),this.statesByElement.has(e)&&(s=!0),this._fetchNamespace(t).elementContainsData(e)||s}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,s,d,f){let b=[];if(e){const E=this.playersByQueriedElement.get(t);E&&(b=E)}else{const E=this.playersByElement.get(t);if(E){const T=!f||f==xd;E.forEach(k=>{k.queued||!T&&k.triggerName!=d||b.push(k)})}}return(s||d)&&(b=b.filter(E=>!(s&&s!=E.namespaceId||d&&d!=E.triggerName))),b}_beforeAnimationBuild(t,e,s){const f=e.element,b=e.isRemovalTransition?void 0:t,E=e.isRemovalTransition?void 0:e.triggerName;for(const T of e.timelines){const k=T.element,Q=k!==f,ie=Dp(s,k,[]);this._getPreviousPlayers(k,Q,b,E,e.toState).forEach(xe=>{const qe=xe.getRealPlayer();qe.beforeDestroy&&qe.beforeDestroy(),xe.destroy(),ie.push(xe)})}yv(f,e.fromStyles)}_buildAnimation(t,e,s,d,f,b){const E=e.triggerName,T=e.element,k=[],Q=new Set,ie=new Set,Ie=e.timelines.map(qe=>{const ft=qe.element;Q.add(ft);const Qt=ft[Nd];if(Qt&&Qt.removedBeforeQueried)return new eP(qe.duration,qe.delay);const Kt=ft!==T,pn=function EB(n){const t=[];return w4(n,t),t}((s.get(ft)||y4).map(cs=>cs.getRealPlayer())).filter(cs=>!!cs.element&&cs.element===ft),Vt=f.get(ft),zn=b.get(ft),pi=jT(0,this._normalizer,0,qe.keyframes,Vt,zn),hi=this._buildPlayer(qe,pi,pn);if(qe.subTimeline&&d&&ie.add(ft),Kt){const cs=new QP(t,E,ft);cs.setRealPlayer(hi),k.push(cs)}return hi});k.forEach(qe=>{Dp(this.playersByQueriedElement,qe.element,[]).push(qe),qe.onDone(()=>function S4(n,t,e){let s=n.get(t);if(s){if(s.length){const d=s.indexOf(e);s.splice(d,1)}0==s.length&&n.delete(t)}return s}(this.playersByQueriedElement,qe.element,qe))}),Q.forEach(qe=>Lh(qe,MP));const xe=xh(Ie);return xe.onDestroy(()=>{Q.forEach(qe=>d0(qe,MP)),Wf(T,e.toStyles)}),ie.forEach(qe=>{Dp(d,qe,[]).push(xe)}),xe}_buildPlayer(t,e,s){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,s):new eP(t.duration,t.delay)}}class QP{constructor(t,e,s){this.namespaceId=t,this.triggerName=e,this.element=s,this._player=new eP,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,s)=>{e.forEach(d=>ss(t,s,void 0,d))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Dp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function ci(n){return n&&1===n.nodeType}function C4(n,t){const e=n.style.display;return n.style.display=t??"none",e}function I4(n,t,e,s,d){const f=[];e.forEach(T=>f.push(C4(T)));const b=[];s.forEach((T,k)=>{const Q=new Map;T.forEach(ie=>{const Ie=t.computeStyle(k,ie,d);Q.set(ie,Ie),(!Ie||0==Ie.length)&&(k[Nd]=KT,b.push(k))}),n.set(k,Q)});let E=0;return e.forEach(T=>C4(T,f[E++])),b}function AQ(n,t){const e=new Map;if(n.forEach(E=>e.set(E,[])),0==t.length)return e;const d=new Set(t),f=new Map;function b(E){if(!E)return 1;let T=f.get(E);if(T)return T;const k=E.parentNode;return T=e.has(k)?k:d.has(k)?1:b(k),f.set(E,T),T}return t.forEach(E=>{const T=b(E);1!==T&&e.get(T).push(E)}),e}function Lh(n,t){n.classList?.add(t)}function d0(n,t){n.classList?.remove(t)}function SW(n,t,e){xh(e).onDone(()=>n.processLeaveNode(t))}function w4(n,t){for(let e=0;e<n.length;e++){const s=n[e];s instanceof L5?w4(s.players,t):t.push(s)}}function T4(n,t,e){const s=e.get(n);if(!s)return!1;let d=t.get(n);return d?s.forEach(f=>d.add(f)):t.set(n,s),e.delete(n),!0}class HP{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(d,f)=>{},this._transitionEngine=new vQ(t,e,s),this._timelineEngine=new EW(t,e,s),this._transitionEngine.onRemovalComplete=(d,f)=>this.onRemovalComplete(d,f)}registerTrigger(t,e,s,d,f){const b=t+"-"+d;let E=this._triggerCache[b];if(!E){const T=[],Q=Jl(this._driver,f,T,[]);if(T.length)throw function rW(n,t){return new un(3404,!1)}();E=function vW(n,t,e){return new AW(n,t,e)}(d,Q,this._normalizer),this._triggerCache[b]=E}this._transitionEngine.registerTrigger(e,d,E)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,s,d){this._transitionEngine.insertNode(t,e,s,d)}onRemove(t,e,s,d){this._transitionEngine.removeNode(t,e,d||!1,s)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,s,d){if("@"==s.charAt(0)){const[f,b]=H6(s);this._timelineEngine.command(f,e,b,d)}else this._transitionEngine.trigger(t,e,s,d)}listen(t,e,s,d,f){if("@"==s.charAt(0)){const[b,E]=H6(s);return this._timelineEngine.listen(b,e,E,f)}return this._transitionEngine.listen(t,e,s,d,f)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let bQ=(()=>{class n{constructor(e,s,d){this._element=e,this._startStyles=s,this._endStyles=d,this._state=0;let f=n.initialStylesByElement.get(e);f||n.initialStylesByElement.set(e,f=new Map),this._initialStyles=f}start(){this._state<1&&(this._startStyles&&Wf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Wf(this._element,this._initialStyles),this._endStyles&&(Wf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(yv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(yv(this._element,this._endStyles),this._endStyles=null),Wf(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function bB(n){let t=null;return n.forEach((e,s)=>{(function SQ(n){return"display"===n||"position"===n})(s)&&(t=t||new Map,t.set(s,e))}),t}class R4{constructor(t,e,s,d){this.element=t,this.keyframes=e,this.options=s,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(s=>{e.push(Object.fromEntries(s))}),e}_triggerWebAnimation(t,e,s){return t.animate(this._convertKeyframesToObject(e),s)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((s,d)=>{"offset"!==d&&t.set(d,this._finished?s:Ai(this.element,d))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class CQ{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return u4(t,e)}getParentElement(t){return l4(t)}query(t,e,s){return OP(t,e,s)}computeStyle(t,e,s){return window.getComputedStyle(t)[e]}animate(t,e,s,d,f,b=[]){const T={duration:s,delay:d,fill:0==d?"both":"forwards"};f&&(T.easing=f);const k=new Map,Q=b.filter(xe=>xe instanceof R4);(function Z6(n,t){return 0===n||0===t})(s,d)&&Q.forEach(xe=>{xe.currentSnapshot.forEach((qe,ft)=>k.set(ft,qe))});let ie=function Y6(n){return n.length?n[0]instanceof Map?n:n.map(t=>xP(t)):[]}(e).map(xe=>Tc(xe));ie=function f4(n,t,e){if(e.size&&t.length){let s=t[0],d=[];if(e.forEach((f,b)=>{s.has(b)||d.push(b),s.set(b,f)}),d.length)for(let f=1;f<t.length;f++){let b=t[f];d.forEach(E=>b.set(E,Ai(n,E)))}}return t}(t,ie,k);const Ie=function EQ(n,t){let e=null,s=null;return Array.isArray(t)&&t.length?(e=bB(t[0]),t.length>1&&(s=bB(t[t.length-1]))):t instanceof Map&&(e=bB(t)),e||s?new bQ(n,e,s):null}(t,ie);return new R4(t,ie,T,Ie)}}let IQ=(()=>{class n extends M5{constructor(e,s){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(s.body,{id:"0",encapsulation:tu.None,styles:[],data:{animation:[]}})}build(e){const s=this._nextAnimationId.toString();this._nextAnimationId++;const d=Array.isArray(e)?N5(e):e;return zT(this._renderer,null,s,"register",[d]),new as(s,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(cn(Im),cn(Ei))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();class as extends z7{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new wQ(this._id,t,e||{},this._renderer)}}class wQ{constructor(t,e,s,d){this.id=t,this.element=e,this._renderer=d,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return zT(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function zT(n,t,e,s,d){return n.setProperty(t,`@@${e}:${s}`,d)}const TQ="@.disabled";let RQ=(()=>{class n{constructor(e,s,d){this.delegate=e,this.engine=s,this._zone=d,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(f,b)=>{const E=b?.parentNode(f);E&&b.removeChild(E,f)}}createRenderer(e,s){const f=this.delegate.createRenderer(e,s);if(!(e&&s&&s.data&&s.data.animation)){let Q=this._rendererCache.get(f);return Q||(Q=new DQ("",f,this.engine,()=>this._rendererCache.delete(f)),this._rendererCache.set(f,Q)),Q}const b=s.id,E=s.id+"-"+this._currentId;this._currentId++,this.engine.register(E,e);const T=Q=>{Array.isArray(Q)?Q.forEach(T):this.engine.registerTrigger(b,E,e,Q.name,Q)};return s.data.animation.forEach(T),new D4(this,E,f,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,s,d){e>=0&&e<this._microtaskId?this._zone.run(()=>s(d)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(f=>{const[b,E]=f;b(E)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,d]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(cn(Im),cn(HP),cn(ri))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();class DQ{constructor(t,e,s,d){this.namespaceId=t,this.delegate=e,this.engine=s,this._onDestroy=d,this.destroyNode=this.delegate.destroyNode?f=>e.destroyNode(f):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,s,d=!0){this.delegate.insertBefore(t,e,s),this.engine.onInsert(this.namespaceId,e,t,d)}removeChild(t,e,s){this.engine.onRemove(this.namespaceId,e,this.delegate,s)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,s,d){this.delegate.setAttribute(t,e,s,d)}removeAttribute(t,e,s){this.delegate.removeAttribute(t,e,s)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,s,d){this.delegate.setStyle(t,e,s,d)}removeStyle(t,e,s){this.delegate.removeStyle(t,e,s)}setProperty(t,e,s){"@"==e.charAt(0)&&e==TQ?this.disableAnimations(t,!!s):this.delegate.setProperty(t,e,s)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,s){return this.delegate.listen(t,e,s)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class D4 extends DQ{constructor(t,e,s,d,f){super(e,s,d,f),this.factory=t,this.namespaceId=e}setProperty(t,e,s){"@"==e.charAt(0)?"."==e.charAt(1)&&e==TQ?this.disableAnimations(t,s=void 0===s||!!s):this.engine.process(this.namespaceId,t,e.slice(1),s):this.delegate.setProperty(t,e,s)}listen(t,e,s){if("@"==e.charAt(0)){const d=function OQ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let f=e.slice(1),b="";return"@"!=f.charAt(0)&&([f,b]=function CB(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(f)),this.engine.listen(this.namespaceId,d,f,b,E=>{this.factory.scheduleListenerCallback(E._data||-1,s,E)})}return this.delegate.listen(t,e,s)}}const qT=[{provide:M5,useClass:IQ},{provide:vB,useFactory:function CW(){return new fW}},{provide:HP,useClass:(()=>{class n extends HP{constructor(e,s,d,f){super(e.body,s,d)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(cn(Ei),cn(d4),cn(vB),cn(If))},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})()},{provide:Im,useFactory:function IW(n,t,e){return new RQ(n,t,e)},deps:[Mf,HP,ri]}],IB=[{provide:d4,useFactory:()=>new CQ},{provide:ld,useValue:"BrowserAnimations"},...qT],GP=[{provide:d4,useClass:K6},{provide:ld,useValue:"NoopAnimations"},...qT];let wW=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?GP:IB}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({providers:IB,imports:[La]}),n})(),m=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({}),n})(),We=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Pi({type:n}),n.\u0275inj=Ti({imports:[Xo,gs,m,X3]}),n})();class lt{static#e=this.\u0275fac=function(e){return new(e||lt)};static#t=this.\u0275mod=Pi({type:lt,bootstrap:[tB]});static#n=this.\u0275inj=Ti({imports:[La,wW,Sd,bj,Bx,A9,kH,_v,zH,wl,Y3,aG,BT,Z8,wG,PT,We]})}nT().bootstrapModule(lt).catch(n=>console.error(n))},1648:function(we,Pe,$){we=$.nmd(we);var F=$(7156).default;!function(re){"use strict";function oe(i,u){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);u&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(i,g).enumerable})),l.push.apply(l,h)}return l}function H(i){for(var u=1;u<arguments.length;u++){var l=null!=arguments[u]?arguments[u]:{};u%2?oe(Object(l),!0).forEach(function(h){U(i,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):oe(Object(l)).forEach(function(h){Object.defineProperty(i,h,Object.getOwnPropertyDescriptor(l,h))})}return i}function j(i){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(i)}function M(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function P(i,u){for(var l=0;l<u.length;l++){var h=u[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,ae(h.key),h)}}function x(i,u,l){return u&&P(i.prototype,u),l&&P(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}function U(i,u,l){return(u=ae(u))in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i}function Z(i,u){if(null==i)return{};var l,h,g=function(C,w){if(null==C)return{};var D,N,L={},V=Object.keys(C);for(N=0;N<V.length;N++)w.indexOf(D=V[N])>=0||(L[D]=C[D]);return L}(i,u);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);for(h=0;h<y.length;h++)u.indexOf(l=y[h])>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(g[l]=i[l])}return g}function ae(i){var u=function(l,h){if("object"!=typeof l||null===l)return l;var g=l[Symbol.toPrimitive];if(void 0!==g){var y=g.call(l,h);if("object"!=typeof y)return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}(i,"string");return"symbol"==typeof u?u:String(u)}var ue=function(i,u){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g])})(i,u)};function pe(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=i}ue(i,u),i.prototype=null===u?Object.create(u):(l.prototype=u.prototype,new l)}var ee=function(){return ee=Object.assign||function(i){for(var u,l=1,h=arguments.length;l<h;l++)for(var g in u=arguments[l])Object.prototype.hasOwnProperty.call(u,g)&&(i[g]=u[g]);return i},ee.apply(this,arguments)};function Y(i,u){var l,h,g,y,C={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return y={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function w(D){return function(N){return function(L){if(l)throw new TypeError("Generator is already executing.");for(;y&&(y=0,L[0]&&(C=0)),C;)try{if(l=1,h&&(g=2&L[0]?h.return:L[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,L[1])).done)return g;switch(h=0,g&&(L=[2&L[0],g.value]),L[0]){case 0:case 1:g=L;break;case 4:return C.label++,{value:L[1],done:!1};case 5:C.label++,h=L[1],L=[0];continue;case 7:L=C.ops.pop(),C.trys.pop();continue;default:if(!((g=(g=C.trys).length>0&&g[g.length-1])||6!==L[0]&&2!==L[0])){C=0;continue}if(3===L[0]&&(!g||L[1]>g[0]&&L[1]<g[3])){C.label=L[1];break}if(6===L[0]&&C.label<g[1]){C.label=g[1],g=L;break}if(g&&C.label<g[2]){C.label=g[2],C.ops.push(L);break}g[2]&&C.ops.pop(),C.trys.pop();continue}L=u.call(i,C)}catch(V){L=[6,V],h=0}finally{l=g=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([D,N])}}}function K(i){var u="function"==typeof Symbol&&Symbol.iterator,l=u&&i[u],h=0;if(l)return l.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&h>=i.length&&(i=void 0),{value:i&&i[h++],done:!i}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(i,u){var l="function"==typeof Symbol&&i[Symbol.iterator];if(!l)return i;var h,g,y=l.call(i),C=[];try{for(;(void 0===u||u-- >0)&&!(h=y.next()).done;)C.push(h.value)}catch(w){g={error:w}}finally{try{h&&!h.done&&(l=y.return)&&l.call(y)}finally{if(g)throw g.error}}return C}function ye(i,u,l){if(l||2===arguments.length)for(var h,g=0,y=u.length;g<y;g++)!h&&g in u||(h||(h=Array.prototype.slice.call(u,0,g)),h[g]=u[g]);return i.concat(h||Array.prototype.slice.call(u))}function ke(i){return this instanceof ke?(this.v=i,this):new ke(i)}function Ae(i){return"function"==typeof i}function Ee(i){var u=i(function(l){Error.call(l),l.stack=(new Error).stack});return u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u}var ve=Ee(function(i){return function(u){i(this),this.message=u?u.length+" errors occurred during unsubscription:\n"+u.map(function(l,h){return h+1+") "+l.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=u}});function le(i,u){if(i){var l=i.indexOf(u);0<=l&&i.splice(l,1)}}var he=function(){function i(l){this.initialTeardown=l,this.closed=!1,this._parentage=null,this._finalizers=null}var u;return i.prototype.unsubscribe=function(){var l,h,g,y,C;if(!this.closed){this.closed=!0;var w=this._parentage;if(w)if(this._parentage=null,Array.isArray(w))try{for(var D=K(w),N=D.next();!N.done;N=D.next())N.value.remove(this)}catch(ne){l={error:ne}}finally{try{N&&!N.done&&(h=D.return)&&h.call(D)}finally{if(l)throw l.error}}else w.remove(this);var L=this.initialTeardown;if(Ae(L))try{L()}catch(ne){C=ne instanceof ve?ne.errors:[ne]}var V=this._finalizers;if(V){this._finalizers=null;try{for(var G=K(V),W=G.next();!W.done;W=G.next()){var X=W.value;try{Fe(X)}catch(ne){C=C??[],ne instanceof ve?C=ye(ye([],ce(C)),ce(ne.errors)):C.push(ne)}}}catch(ne){g={error:ne}}finally{try{W&&!W.done&&(y=G.return)&&y.call(G)}finally{if(g)throw g.error}}}if(C)throw new ve(C)}},i.prototype.add=function(l){var h;if(l&&l!==this)if(this.closed)Fe(l);else{if(l instanceof i){if(l.closed||l._hasParent(this))return;l._addParent(this)}(this._finalizers=null!==(h=this._finalizers)&&void 0!==h?h:[]).push(l)}},i.prototype._hasParent=function(l){var h=this._parentage;return h===l||Array.isArray(h)&&h.includes(l)},i.prototype._addParent=function(l){var h=this._parentage;this._parentage=Array.isArray(h)?(h.push(l),h):h?[h,l]:l},i.prototype._removeParent=function(l){var h=this._parentage;h===l?this._parentage=null:Array.isArray(h)&&le(h,l)},i.prototype.remove=function(l){var h=this._finalizers;h&&le(h,l),l instanceof i&&l._removeParent(this)},i.EMPTY=((u=new i).closed=!0,u),i}(),Oe=he.EMPTY;function je(i){return i instanceof he||i&&"closed"in i&&Ae(i.remove)&&Ae(i.add)&&Ae(i.unsubscribe)}function Fe(i){Ae(i)?i():i.unsubscribe()}var nt={setTimeout:function(i,u){for(var l=[],h=2;h<arguments.length;h++)l[h-2]=arguments[h];var g=nt.delegate;return g?.setTimeout?g.setTimeout.apply(g,ye([i,u],ce(l))):setTimeout.apply(void 0,ye([i,u],ce(l)))},clearTimeout:function(i){return clearTimeout(i)},delegate:void 0};function Ke(i){nt.setTimeout(function(){throw i})}function Nt(){}function Ht(i){i()}var Et=function(i){function u(l){var h=i.call(this)||this;return h.isStopped=!1,l?(h.destination=l,je(l)&&l.add(h)):h.destination=Pt,h}return pe(u,i),u.create=function(l,h,g){return new De(l,h,g)},u.prototype.next=function(l){this.isStopped||this._next(l)},u.prototype.error=function(l){this.isStopped||(this.isStopped=!0,this._error(l))},u.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},u.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this),this.destination=null)},u.prototype._next=function(l){this.destination.next(l)},u.prototype._error=function(l){try{this.destination.error(l)}finally{this.unsubscribe()}},u.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},u}(he);var $e=function(){function i(u){this.partialObserver=u}return i.prototype.next=function(u){var l=this.partialObserver;if(l.next)try{l.next(u)}catch(h){ot(h)}},i.prototype.error=function(u){var l=this.partialObserver;if(l.error)try{l.error(u)}catch(h){ot(h)}else ot(u)},i.prototype.complete=function(){var u=this.partialObserver;if(u.complete)try{u.complete()}catch(l){ot(l)}},i}(),De=function(i){function u(l,h,g){var y,w=i.call(this)||this;return y=Ae(l)||!l?{next:l??void 0,error:h??void 0,complete:g??void 0}:l,w.destination=new $e(y),w}return pe(u,i),u}(Et);function ot(i){Ke(i)}var Pt={closed:!0,next:Nt,error:function(i){throw i},complete:Nt},qt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ot(i){return i}function Jt(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return Zn(i)}function Zn(i){return 0===i.length?Ot:1===i.length?i[0]:function(u){return i.reduce(function(l,h){return h(l)},u)}}var Pn=function(){function i(u){u&&(this._subscribe=u)}return i.prototype.lift=function(u){var l=new i;return l.source=this,l.operator=u,l},i.prototype.subscribe=function(u,l,h){var g,w,y=this,C=(g=u)&&g instanceof Et||(w=g)&&Ae(w.next)&&Ae(w.error)&&Ae(w.complete)&&je(g)?u:new De(u,l,h);return Ht(function(){var D=y.operator,N=y.source;C.add(D?D.call(C,N):N?y._subscribe(C):y._trySubscribe(C))}),C},i.prototype._trySubscribe=function(u){try{return this._subscribe(u)}catch(l){u.error(l)}},i.prototype.forEach=function(u,l){var h=this;return new(l=Dr(l))(function(g,y){var C=new De({next:function(w){try{u(w)}catch(D){y(D),C.unsubscribe()}},error:y,complete:g});h.subscribe(C)})},i.prototype._subscribe=function(u){var l;return null===(l=this.source)||void 0===l?void 0:l.subscribe(u)},i.prototype[qt]=function(){return this},i.prototype.pipe=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return Zn(u)(this)},i.prototype.toPromise=function(u){var l=this;return new(u=Dr(u))(function(h,g){var y;l.subscribe(function(C){return y=C},function(C){return g(C)},function(){return h(y)})})},i.create=function(u){return new i(u)},i}();function Dr(i){var u;return null!==(u=i??undefined)&&void 0!==u?u:Promise}function vr(i){return function(u){if(Ae(u?.lift))return u.lift(function(l){try{return i(l,this)}catch(h){this.error(h)}});throw new TypeError("Unable to lift unknown Observable type")}}function ir(i,u,l,h,g){return new wr(i,u,l,h,g)}var Ir,wr=function(i){function u(l,h,g,y,C,w){var D=i.call(this,l)||this;return D.onFinalize=C,D.shouldUnsubscribe=w,D._next=h?function(N){try{h(N)}catch(L){l.error(L)}}:i.prototype._next,D._error=y?function(N){try{y(N)}catch(L){l.error(L)}finally{this.unsubscribe()}}:i.prototype._error,D._complete=g?function(){try{g()}catch(N){l.error(N)}finally{this.unsubscribe()}}:i.prototype._complete,D}return pe(u,i),u.prototype.unsubscribe=function(){var l;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var h=this.closed;i.prototype.unsubscribe.call(this),!h&&(null===(l=this.onFinalize)||void 0===l||l.call(this))}},u}(Et),Xi=Ee(function(i){return function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Vr=function(i){function u(){var l=i.call(this)||this;return l.closed=!1,l.currentObservers=null,l.observers=[],l.isStopped=!1,l.hasError=!1,l.thrownError=null,l}return pe(u,i),u.prototype.lift=function(l){var h=new Mo(this,this);return h.operator=l,h},u.prototype._throwIfClosed=function(){if(this.closed)throw new Xi},u.prototype.next=function(l){var h=this;Ht(function(){var g,y;if(h._throwIfClosed(),!h.isStopped){h.currentObservers||(h.currentObservers=Array.from(h.observers));try{for(var C=K(h.currentObservers),w=C.next();!w.done;w=C.next())w.value.next(l)}catch(D){g={error:D}}finally{try{w&&!w.done&&(y=C.return)&&y.call(C)}finally{if(g)throw g.error}}}})},u.prototype.error=function(l){var h=this;Ht(function(){if(h._throwIfClosed(),!h.isStopped){h.hasError=h.isStopped=!0,h.thrownError=l;for(var g=h.observers;g.length;)g.shift().error(l)}})},u.prototype.complete=function(){var l=this;Ht(function(){if(l._throwIfClosed(),!l.isStopped){l.isStopped=!0;for(var h=l.observers;h.length;)h.shift().complete()}})},u.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(u.prototype,"observed",{get:function(){var l;return(null===(l=this.observers)||void 0===l?void 0:l.length)>0},enumerable:!1,configurable:!0}),u.prototype._trySubscribe=function(l){return this._throwIfClosed(),i.prototype._trySubscribe.call(this,l)},u.prototype._subscribe=function(l){return this._throwIfClosed(),this._checkFinalizedStatuses(l),this._innerSubscribe(l)},u.prototype._innerSubscribe=function(l){var h=this,g=this,w=g.observers;return g.hasError||g.isStopped?Oe:(this.currentObservers=null,w.push(l),new he(function(){h.currentObservers=null,le(w,l)}))},u.prototype._checkFinalizedStatuses=function(l){var h=this,C=h.isStopped;h.hasError?l.error(h.thrownError):C&&l.complete()},u.prototype.asObservable=function(){var l=new Pn;return l.source=this,l},u.create=function(l,h){return new Mo(l,h)},u}(Pn),Mo=function(i){function u(l,h){var g=i.call(this)||this;return g.destination=l,g.source=h,g}return pe(u,i),u.prototype.next=function(l){var h,g;null===(g=null===(h=this.destination)||void 0===h?void 0:h.next)||void 0===g||g.call(h,l)},u.prototype.error=function(l){var h,g;null===(g=null===(h=this.destination)||void 0===h?void 0:h.error)||void 0===g||g.call(h,l)},u.prototype.complete=function(){var l,h;null===(h=null===(l=this.destination)||void 0===l?void 0:l.complete)||void 0===h||h.call(l)},u.prototype._subscribe=function(l){var h,g;return null!==(g=null===(h=this.source)||void 0===h?void 0:h.subscribe(l))&&void 0!==g?g:Oe},u}(Vr),ra=function(i){function u(l){var h=i.call(this)||this;return h._value=l,h}return pe(u,i),Object.defineProperty(u.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),u.prototype._subscribe=function(l){var h=i.prototype._subscribe.call(this,l);return!h.closed&&l.next(this._value),h},u.prototype.getValue=function(){var l=this,y=l._value;if(l.hasError)throw l.thrownError;return this._throwIfClosed(),y},u.prototype.next=function(l){i.prototype.next.call(this,this._value=l)},u}(Vr),bt={now:function(){return(bt.delegate||Date).now()},delegate:void 0},Gt=function(i){function u(l,h,g){void 0===l&&(l=1/0),void 0===h&&(h=1/0),void 0===g&&(g=bt);var y=i.call(this)||this;return y._bufferSize=l,y._windowTime=h,y._timestampProvider=g,y._buffer=[],y._infiniteTimeWindow=!0,y._infiniteTimeWindow=h===1/0,y._bufferSize=Math.max(1,l),y._windowTime=Math.max(1,h),y}return pe(u,i),u.prototype.next=function(l){var h=this,y=h._buffer,C=h._infiniteTimeWindow,w=h._timestampProvider,D=h._windowTime;h.isStopped||(y.push(l),!C&&y.push(w.now()+D)),this._trimBuffer(),i.prototype.next.call(this,l)},u.prototype._subscribe=function(l){this._throwIfClosed(),this._trimBuffer();for(var h=this._innerSubscribe(l),g=this._infiniteTimeWindow,y=this._buffer.slice(),C=0;C<y.length&&!l.closed;C+=g?1:2)l.next(y[C]);return this._checkFinalizedStatuses(l),h},u.prototype._trimBuffer=function(){var l=this,h=l._bufferSize,g=l._timestampProvider,y=l._buffer,C=l._infiniteTimeWindow,w=(C?1:2)*h;if(h<1/0&&w<y.length&&y.splice(0,y.length-w),!C){for(var D=g.now(),N=0,L=1;L<y.length&&y[L]<=D;L+=2)N=L;N&&y.splice(0,N+1)}},u}(Vr),ln=function(i){function u(l,h){return i.call(this)||this}return pe(u,i),u.prototype.schedule=function(l,h){return this},u}(he),Xe={setInterval:function(i,u){for(var l=[],h=2;h<arguments.length;h++)l[h-2]=arguments[h];var g=Xe.delegate;return g?.setInterval?g.setInterval.apply(g,ye([i,u],ce(l))):setInterval.apply(void 0,ye([i,u],ce(l)))},clearInterval:function(i){return clearInterval(i)},delegate:void 0},Be=function(i){function u(l,h){var g=i.call(this,l,h)||this;return g.scheduler=l,g.work=h,g.pending=!1,g}return pe(u,i),u.prototype.schedule=function(l,h){var g;if(void 0===h&&(h=0),this.closed)return this;this.state=l;var y=this.id,C=this.scheduler;return null!=y&&(this.id=this.recycleAsyncId(C,y,h)),this.pending=!0,this.delay=h,this.id=null!==(g=this.id)&&void 0!==g?g:this.requestAsyncId(C,this.id,h),this},u.prototype.requestAsyncId=function(l,h,g){return void 0===g&&(g=0),Xe.setInterval(l.flush.bind(l,this),g)},u.prototype.recycleAsyncId=function(l,h,g){if(void 0===g&&(g=0),null!=g&&this.delay===g&&!1===this.pending)return h;null!=h&&Xe.clearInterval(h)},u.prototype.execute=function(l,h){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var g=this._execute(l,h);if(g)return g;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},u.prototype._execute=function(l,h){var g,y=!1;try{this.work(l)}catch(C){y=!0,g=C||new Error("Scheduled action threw falsy error")}if(y)return this.unsubscribe(),g},u.prototype.unsubscribe=function(){if(!this.closed){var l=this.id,h=this.scheduler,g=h.actions;this.work=this.state=this.scheduler=null,this.pending=!1,le(g,this),null!=l&&(this.id=this.recycleAsyncId(h,l,null)),this.delay=null,i.prototype.unsubscribe.call(this)}},u}(ln),pt=1,Fn={};function vn(i){return i in Fn&&(delete Fn[i],!0)}var no=function(i){var u=pt++;return Fn[u]=!0,Ir||(Ir=Promise.resolve()),Ir.then(function(){return vn(u)&&i()}),u},Ho={setImmediate:function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return(Ho.delegate?.setImmediate||no).apply(void 0,ye([],ce(i)))},clearImmediate:function(i){vn(i)},delegate:void 0},ia=function(i){function u(l,h){var g=i.call(this,l,h)||this;return g.scheduler=l,g.work=h,g}return pe(u,i),u.prototype.requestAsyncId=function(l,h,g){return void 0===g&&(g=0),null!==g&&g>0?i.prototype.requestAsyncId.call(this,l,h,g):(l.actions.push(this),l._scheduled||(l._scheduled=Ho.setImmediate(l.flush.bind(l,void 0))))},u.prototype.recycleAsyncId=function(l,h,g){var y;if(void 0===g&&(g=0),null!=g?g>0:this.delay>0)return i.prototype.recycleAsyncId.call(this,l,h,g);var C=l.actions;null!=h&&(null===(y=C[C.length-1])||void 0===y?void 0:y.id)!==h&&(Ho.clearImmediate(h),l._scheduled===h&&(l._scheduled=void 0))},u}(Be),yo=function(){function i(u,l){void 0===l&&(l=i.now),this.schedulerActionCtor=u,this.now=l}return i.prototype.schedule=function(u,l,h){return void 0===l&&(l=0),new this.schedulerActionCtor(this,u).schedule(h,l)},i.now=bt.now,i}(),oa=function(i){function u(l,h){void 0===h&&(h=yo.now);var g=i.call(this,l,h)||this;return g.actions=[],g._active=!1,g}return pe(u,i),u.prototype.flush=function(l){var h=this.actions;if(this._active)h.push(l);else{var g;this._active=!0;do{if(g=l.execute(l.state,l.delay))break}while(l=h.shift());if(this._active=!1,g){for(;l=h.shift();)l.unsubscribe();throw g}}},u}(yo),fo=new(function(i){function u(){return null!==i&&i.apply(this,arguments)||this}return pe(u,i),u.prototype.flush=function(l){this._active=!0;var h=this._scheduled;this._scheduled=void 0;var g,y=this.actions;l=l||y.shift();do{if(g=l.execute(l.state,l.delay))break}while((l=y[0])&&l.id===h&&y.shift());if(this._active=!1,g){for(;(l=y[0])&&l.id===h&&y.shift();)l.unsubscribe();throw g}},u}(oa))(ia),Rc=new oa(Be),$n=Rc,Tn=function(i){function u(l,h){var g=i.call(this,l,h)||this;return g.scheduler=l,g.work=h,g}return pe(u,i),u.prototype.schedule=function(l,h){return void 0===h&&(h=0),h>0?i.prototype.schedule.call(this,l,h):(this.delay=h,this.state=l,this.scheduler.flush(this),this)},u.prototype.execute=function(l,h){return h>0||this.closed?i.prototype.execute.call(this,l,h):this._execute(l,h)},u.prototype.requestAsyncId=function(l,h,g){return void 0===g&&(g=0),null!=g&&g>0||null==g&&this.delay>0?i.prototype.requestAsyncId.call(this,l,h,g):(l.flush(this),0)},u}(Be),tt=new(function(i){function u(){return null!==i&&i.apply(this,arguments)||this}return pe(u,i),u}(oa))(Tn),Ue=new Pn(function(i){return i.complete()});function sn(i){return i&&Ae(i.schedule)}function an(i){return i[i.length-1]}function Sn(i){return Ae(an(i))?i.pop():void 0}function ii(i){return sn(an(i))?i.pop():void 0}var mo=function(i){return i&&"number"==typeof i.length&&"function"!=typeof i};function Ns(i){return Ae(i?.then)}function xs(i){return Ae(i[qt])}function go(i){return Symbol.asyncIterator&&Ae(i?.[Symbol.asyncIterator])}function To(i){return new TypeError("You provided "+(null!==i&&"object"==typeof i?"an invalid object":"'"+i+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Tr="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function co(i){return Ae(i?.[Tr])}function ju(i){return function(u,l,h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,y=function(){var u,l,h;return Y(this,function(g){switch(g.label){case 0:u=i.getReader(),g.label=1;case 1:g.trys.push([1,,9,10]),g.label=2;case 2:return[4,ke(u.read())];case 3:return l=g.sent(),h=l.value,l.done?[4,ke(void 0)]:[3,5];case 4:return[2,g.sent()];case 5:return[4,ke(h)];case 6:return[4,g.sent()];case 7:return g.sent(),[3,2];case 8:return[3,10];case 9:return u.releaseLock(),[7];case 10:return[2]}})}.apply(u,l||[]),C=[];return g={},w("next"),w("throw"),w("return"),g[Symbol.asyncIterator]=function(){return this},g;function w(G){y[G]&&(g[G]=function(W){return new Promise(function(X,ne){C.push([G,W,X,ne])>1||D(G,W)})})}function D(G,W){try{(X=y[G](W)).value instanceof ke?Promise.resolve(X.value.v).then(N,L):V(C[0][2],X)}catch(X){V(C[0][3],X)}var X}function N(G){D("next",G)}function L(G){D("throw",G)}function V(G,W){G(W),C.shift(),C.length&&D(C[0][0],C[0][1])}}(this,arguments)}function Ld(i){return Ae(i?.getReader)}function ls(i){if(i instanceof Pn)return i;if(null!=i){if(xs(i))return g=i,new Pn(function(y){var C=g[qt]();if(Ae(C.subscribe))return C.subscribe(y);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(mo(i))return h=i,new Pn(function(y){for(var C=0;C<h.length&&!y.closed;C++)y.next(h[C]);y.complete()});if(Ns(i))return l=i,new Pn(function(y){l.then(function(C){y.closed||(y.next(C),y.complete())},function(C){return y.error(C)}).then(null,Ke)});if(go(i))return uE(i);if(co(i))return u=i,new Pn(function(y){var C,w;try{for(var D=K(u),N=D.next();!N.done;N=D.next())if(y.next(N.value),y.closed)return}catch(V){C={error:V}}finally{try{N&&!N.done&&(w=D.return)&&w.call(D)}finally{if(C)throw C.error}}y.complete()});if(Ld(i))return uE(ju(i))}var u,l,h,g;throw To(i)}function uE(i){return new Pn(function(u){(function(l,h){var g,y,C,w,D,L,V;return D=this,void 0,V=function(){var N;return Y(this,function(L){switch(L.label){case 0:L.trys.push([0,5,6,11]),g=function fe(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,l=i[Symbol.asyncIterator];return l?l.call(i):(i=K(i),u={},h("next"),h("throw"),h("return"),u[Symbol.asyncIterator]=function(){return this},u);function h(g){u[g]=i[g]&&function(y){return new Promise(function(C,w){var D,N,L;D=C,N=w,L=(y=i[g](y)).done,Promise.resolve(y.value).then(function(G){D({value:G,done:L})},N)})}}}(l),L.label=1;case 1:return[4,g.next()];case 2:if((y=L.sent()).done)return[3,4];if(h.next(y.value),h.closed)return[2];L.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return N=L.sent(),C={error:N},[3,11];case 6:return L.trys.push([6,,9,10]),y&&!y.done&&(w=g.return)?[4,w.call(g)]:[3,8];case 7:L.sent(),L.label=8;case 8:return[3,10];case 9:if(C)throw C.error;return[7];case 10:return[7];case 11:return h.complete(),[2]}})},new((L=void 0)||(L=Promise))(function(G,W){function X(_e){try{me(V.next(_e))}catch(Re){W(Re)}}function ne(_e){try{me(V.throw(_e))}catch(Re){W(Re)}}function me(_e){var Re;_e.done?G(_e.value):(Re=_e.value,Re instanceof L?Re:new L(function(Ne){Ne(Re)})).then(X,ne)}me((V=V.apply(D,[])).next())})})(i,u).catch(function(l){return u.error(l)})})}function Dg(i,u,l,h,g){void 0===h&&(h=0),void 0===g&&(g=!1);var y=u.schedule(function(){l(),g?i.add(this.schedule(null,h)):this.unsubscribe()},h);if(i.add(y),!g)return y}function _o(i,u){return void 0===u&&(u=0),vr(function(l,h){l.subscribe(ir(h,function(g){return Dg(h,i,function(){return h.next(g)},u)},function(){return Dg(h,i,function(){return h.complete()},u)},function(g){return Dg(h,i,function(){return h.error(g)},u)}))})}function p0(i,u){return void 0===u&&(u=0),vr(function(l,h){h.add(i.schedule(function(){return l.subscribe(h)},u))})}function h0(i,u){if(!i)throw new Error("Iterable cannot be null");return new Pn(function(l){Dg(l,u,function(){var h=i[Symbol.asyncIterator]();Dg(l,u,function(){h.next().then(function(g){g.done?l.complete():l.next(g.value)})},0,!0)})})}function kn(i,u){return u?function(l,h){if(null!=l){if(xs(l))return y=h,ls(l).pipe(p0(y),_o(y));if(mo(l))return function(g,y){return new Pn(function(C){var w=0;return y.schedule(function(){w===g.length?C.complete():(C.next(g[w++]),C.closed||this.schedule())})})}(l,h);if(Ns(l))return function(g,y){return ls(g).pipe(p0(y),_o(y))}(l,h);if(go(l))return h0(l,h);if(co(l))return function(g,y){return new Pn(function(C){var w;return Dg(C,y,function(){w=g[Tr](),Dg(C,y,function(){var D,N,L;try{N=(D=w.next()).value,L=D.done}catch(V){return void C.error(V)}L?C.complete():C.next(N)},0,!0)}),function(){return Ae(w?.return)&&w.return()}})}(l,h);if(Ld(l))return function(g,y){return h0(ju(g),y)}(l,h)}var y;throw To(l)}(i,u):ls(i)}function Ii(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return kn(i,ii(i))}function Fh(i,u){var l=Ae(i)?i:function(){return i},h=function(g){return g.error(l())};return new Pn(u?function(g){return u.schedule(h,0,g)}:h)}var KP=Ee(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}});function oc(i,u){var l="object"==typeof u;return new Promise(function(h,g){var y=new De({next:function(C){h(C),y.unsubscribe()},error:g,complete:function(){l?h(u.defaultValue):g(new KP)}});i.subscribe(y)})}function JT(i){return i instanceof Date&&!isNaN(i)}var TB=Ee(function(i){return function(u){void 0===u&&(u=null),i(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=u}});function XT(i,u){var l=JT(i)?{first:i}:"number"==typeof i?{each:i}:i,h=l.first,g=l.each,y=l.with,C=void 0===y?zP:y,w=l.scheduler,D=void 0===w?u??Rc:w,N=l.meta,L=void 0===N?null:N;if(null==h&&null==g)throw new TypeError("No timeout provided.");return vr(function(V,G){var W,X,ne=null,me=0,_e=function(Re){X=Dg(G,D,function(){try{W.unsubscribe(),ls(C({meta:L,lastValue:ne,seen:me})).subscribe(G)}catch(Ne){G.error(Ne)}},Re)};W=V.subscribe(ir(G,function(Re){X?.unsubscribe(),me++,G.next(ne=Re),g>0&&_e(g)},void 0,void 0,function(){X?.closed||null==X||X.unsubscribe(),ne=null})),!me&&_e(null!=h?"number"==typeof h?h:+h-D.now():g)})}function zP(i){throw new TB(i)}function Bn(i,u){return vr(function(l,h){var g=0;l.subscribe(ir(h,function(y){h.next(i.call(u,y,g++))}))})}var Og=Array.isArray;function f0(i){return Bn(function(u){return l=i,Og(h=u)?l.apply(void 0,ye([],ce(h))):l(h);var l,h})}var kg=Array.isArray,No=Object.getPrototypeOf,Qu=Object.prototype,ZT=Object.keys;function hn(i,u,l){return void 0===l&&(l=1/0),Ae(u)?hn(function(h,g){return Bn(function(y,C){return u(h,y,g,C)})(ls(i(h,g)))},l):("number"==typeof u&&(l=u),vr(function(h,g){return w=i,D=l,W=[],X=0,ne=0,me=!1,_e=function(){!me||W.length||X||C.complete()},Re=function(et){return X<D?Ne(et):W.push(et)},Ne=function(et){X++;var ht=!1;ls(w(et,ne++)).subscribe(ir(C,function(ze){C.next(ze)},function(){ht=!0},void 0,function(){if(ht)try{X--;for(;W.length&&X<D;)Qe=void 0,Qe=W.shift(),Ne(Qe);_e()}catch(Qe){C.error(Qe)}var Qe}))},h.subscribe(ir(C=g,Re,function(){me=!0,_e()})),function(){};var C,w,D,W,X,ne,me,_e,Re,Ne}))}function xo(i){return void 0===i&&(i=1/0),hn(Ot,i)}function qf(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return xo(1)(kn(i,ii(i)))}function Eo(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];var l=Sn(i),h=function(w){if(1===w.length){var D=w[0];if(kg(D))return{args:D,keys:null};if((L=D)&&"object"==typeof L&&No(L)===Qu){var N=ZT(D);return{args:N.map(function(V){return D[V]}),keys:N}}}var L;return{args:w,keys:null}}(i),g=h.args,y=h.keys,C=new Pn(function(w){var D=g.length;if(D)for(var N=new Array(D),L=D,V=D,G=function(X){var ne=!1;ls(g[X]).subscribe(ir(w,function(me){ne||(ne=!0,V--),N[X]=me},function(){return L--},void 0,function(){var _e;L&&ne||(V||w.next(y?(_e=N,y.reduce(function(Re,Ne,et){return Re[Ne]=_e[et],Re},{})):N),w.complete())}))},W=0;W<D;W++)G(W);else w.complete()});return l?C.pipe(f0(l)):C}var e1=["addListener","removeListener"],RB=["addEventListener","removeEventListener"],es=["on","off"];function ur(i,u,l,h){if(Ae(l)&&(h=l,l=void 0),h)return ur(i,u,l).pipe(f0(h));var w,g=ce(Ae((w=i).addEventListener)&&Ae(w.removeEventListener)?RB.map(function(w){return function(D){return i[w](u,D,l)}}):function(w){return Ae(w.addListener)&&Ae(w.removeListener)}(i)?e1.map(Pg(i,u)):function(w){return Ae(w.on)&&Ae(w.off)}(i)?es.map(Pg(i,u)):[],2),y=g[0],C=g[1];if(!y&&mo(i))return hn(function(w){return ur(w,u,l)})(ls(i));if(!y)throw new TypeError("Invalid event target");return new Pn(function(w){var D=function(){for(var N=[],L=0;L<arguments.length;L++)N[L]=arguments[L];return w.next(1<N.length?N:N[0])};return y(D),function(){return C(D)}})}function Pg(i,u){return function(l){return function(h){return i[l](u,h)}}}function Bd(i,u,l){return l?Bd(i,u).pipe(f0(l)):new Pn(function(h){var g=function(){for(var C=[],w=0;w<arguments.length;w++)C[w]=arguments[w];return h.next(1===C.length?C[0]:C)},y=i(g);return Ae(u)?function(){return u(g,y)}:void 0})}function sa(i,u,l){void 0===i&&(i=0),void 0===l&&(l=$n);var h=-1;return null!=u&&(sn(u)?l=u:h=u),new Pn(function(g){var y=JT(i)?+i-l.now():i;y<0&&(y=0);var C=0;return l.schedule(function(){g.closed||(g.next(C++),0<=h?this.schedule(void 0,h):g.complete())},y)})}function Mp(i,u){return void 0===i&&(i=0),void 0===u&&(u=Rc),i<0&&(i=0),sa(i,i,u)}function un(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];var y,l=ii(i),h="number"==typeof an(y=i)?y.pop():1/0,g=i;return g.length?1===g.length?ls(g[0]):xo(h)(kn(g,l)):Ue}var m0=Array.isArray;function oi(i,u){return function(l,h){return!i.call(u,l,h)}}function Ut(i,u){return vr(function(l,h){var g=0;l.subscribe(ir(h,function(y){return i.call(u,y,g++)&&h.next(y)}))})}function Hu(){for(var i,u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return 1===(u=1===(i=u).length&&m0(i[0])?i[0]:i).length?ls(u[0]):new Pn((h=u,function(g){for(var y=[],C=function(D){y.push(ls(h[D]).subscribe(ir(g,function(N){if(y){for(var L=0;L<y.length;L++)L!==D&&y[L].unsubscribe();y=null}g.next(N)})))},w=0;y&&!g.closed&&w<h.length;w++)C(w)}));var h}function Np(i){return vr(function(u,l){var h,g=null,y=!1;g=u.subscribe(ir(l,void 0,void 0,function(C){h=ls(i(C,Np(i)(u))),g?(g.unsubscribe(),g=null,h.subscribe(l)):y=!0})),y&&(g.unsubscribe(),g=null,h.subscribe(l))})}function ki(i){return i<=0?function(){return Ue}:vr(function(u,l){var h=0;u.subscribe(ir(l,function(g){++h<=i&&(l.next(g),i<=h&&l.complete())}))})}function Ea(i){return Bn(function(){return i})}function Rl(i,u){return u?function(l){return qf(u.pipe(ki(1),vr(function(h,g){h.subscribe(ir(g,Nt))})),l.pipe(Rl(i)))}:hn(function(l,h){return ls(i(l,h)).pipe(ki(1),Ea(l))})}function dE(i,u){void 0===u&&(u=Rc);var l=sa(i,u);return Rl(function(){return l})}function Ar(i,u,l){return void 0===l&&(l=1/0),Ae(u)?hn(function(){return i},u,l):("number"==typeof u&&(l=u),hn(function(){return i},l))}function DB(i,u){return vr((l=i,h=u,g=arguments.length>=2,function(w,D){var N=g,L=h,V=0;w.subscribe(ir(D,function(G){var W=V++;L=N?l(L,G,W):(N=!0,G),D.next(L)},void 0))}));var l,h,g}function ts(i){return vr(function(u,l){var h=!1,g=0;u.subscribe(ir(l,function(y){return(h||(h=!i(y,g++)))&&l.next(y)}))})}function Fd(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];var l=ii(i);return vr(function(h,g){(l?qf(i,h,l):qf(i,h)).subscribe(g)})}function wi(i,u){return vr(function(l,h){var g=null,y=0,C=!1,w=function(){return C&&!g&&h.complete()};l.subscribe(ir(h,function(D){g?.unsubscribe();var N=0,L=y++;ls(i(D,L)).subscribe(g=ir(h,function(V){return h.next(u?u(D,V,L,N++):V)},function(){g=null,w()}))},function(){C=!0,w()}))})}function pE(i){return vr(function(u,l){ls(i).subscribe(ir(l,function(){return l.complete()},Nt)),!l.closed&&u.subscribe(l)})}function Ev(i,u){return void 0===u&&(u=!1),vr(function(l,h){var g=0;l.subscribe(ir(h,function(y){var C=i(y,g++);(C||u)&&h.next(y),!C&&h.complete()}))})}function Jn(i,u,l){var h=Ae(i)||u||l?{next:i,error:u,complete:l}:i;return h?vr(function(g,y){var C;null===(C=h.subscribe)||void 0===C||C.call(h);var w=!0;g.subscribe(ir(y,function(D){var N;null===(N=h.next)||void 0===N||N.call(h,D),y.next(D)},function(){var D;w=!1,null===(D=h.complete)||void 0===D||D.call(h),y.complete()},function(D){var N;w=!1,null===(N=h.error)||void 0===N||N.call(h,D),y.error(D)},function(){var D,N;w&&(null===(D=h.unsubscribe)||void 0===D||D.call(h)),null===(N=h.finalize)||void 0===N||N.call(h)}))}):Ot}function Nn(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];var l=Sn(i);return vr(function(h,g){for(var y=i.length,C=new Array(y),w=i.map(function(){return!1}),D=!1,N=function(V){ls(i[V]).subscribe(ir(g,function(G){C[V]=G,D||w[V]||(w[V]=!0,(D=w.every(Ot))&&(w=null))},Nt))},L=0;L<y;L++)N(L);h.subscribe(ir(g,function(V){if(D){var G=ye([V],ce(C));g.next(l?l.apply(void 0,ye([],ce(G))):G)}}))})}function hE(i){return(hE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(i)}function k4(i,u,l){return g=function(y,C){if("object"!==hE(y)||null===y)return y;var w=y[Symbol.toPrimitive];if(void 0!==w){var D=w.call(y,"string");if("object"!==hE(D))return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(u),(u="symbol"===hE(g)?g:String(g))in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i;var g}function Zl(i,u){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);u&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(i,g).enumerable})),l.push.apply(l,h)}return l}function Zi(i){for(var u=1;u<arguments.length;u++){var l=null!=arguments[u]?arguments[u]:{};u%2?Zl(Object(l),!0).forEach(function(h){k4(i,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Zl(Object(l)).forEach(function(h){Object.defineProperty(i,h,Object.getOwnPropertyDescriptor(l,h))})}return i}function Dc(i){return"Minified Redux error #"+i+"; visit https://redux.js.org/Errors?code="+i+" for the full message or use the non-minified dev environment for full errors. "}var OB="function"==typeof Symbol&&Symbol.observable||"@@observable",g0=function(){return Math.random().toString(36).substring(7).split("").join(".")},yr={INIT:"@@redux/INIT"+g0(),REPLACE:"@@redux/REPLACE"+g0(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+g0()}};function kB(i,u,l){var h;if("function"==typeof u&&"function"==typeof l||"function"==typeof l&&"function"==typeof arguments[3])throw new Error(Dc(0));if("function"==typeof u&&void 0===l&&(l=u,u=void 0),void 0!==l){if("function"!=typeof l)throw new Error(Dc(1));return l(kB)(i,u)}if("function"!=typeof i)throw new Error(Dc(2));var g=i,y=u,C=[],w=C,D=!1;function N(){w===C&&(w=C.slice())}function L(){if(D)throw new Error(Dc(3));return y}function V(W){if("function"!=typeof W)throw new Error(Dc(4));if(D)throw new Error(Dc(5));var X=!0;return N(),w.push(W),function(){if(X){if(D)throw new Error(Dc(6));X=!1,N();var ne=w.indexOf(W);w.splice(ne,1),C=null}}}function G(W){if(!function(me){if("object"!=typeof me||null===me)return!1;for(var _e=me;null!==Object.getPrototypeOf(_e);)_e=Object.getPrototypeOf(_e);return Object.getPrototypeOf(me)===_e}(W))throw new Error(Dc(7));if(void 0===W.type)throw new Error(Dc(8));if(D)throw new Error(Dc(9));try{D=!0,y=g(y,W)}finally{D=!1}for(var X=C=w,ne=0;ne<X.length;ne++)(0,X[ne])();return W}return G({type:yr.INIT}),(h={dispatch:G,subscribe:V,getState:L,replaceReducer:function(W){if("function"!=typeof W)throw new Error(Dc(10));g=W,G({type:yr.REPLACE})}})[OB]=function(){var W,X=V;return(W={subscribe:function(ne){if("object"!=typeof ne||null===ne)throw new Error(Dc(11));function me(){ne.next&&ne.next(L())}return me(),{unsubscribe:X(me)}}})[OB]=function(){return this},W},h}function Ti(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];return 0===u.length?function(h){return h}:1===u.length?u[0]:u.reduce(function(h,g){return function(){return h(g.apply(void 0,arguments))}})}var bv=function(i,u){return(bv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g])})(i,u)},P4=function(i){function u(l,h){var g=i.call(this,function(y){var C=g.__notifier.subscribe(y);return C&&!C.closed&&y.next(g.value),C})||this;return g.__notifier=new Vr,g.value=h,l.subscribe(function(y){y!==g.value&&(g.value=y,g.__notifier.next(y))}),g}return function(l,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function g(){this.constructor=l}bv(l,h),l.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}(u,i),u}(Pn),t1=function(i,u){return i===u||"function"==typeof u&&i===u.toString()};function Wn(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];var l=i.length;return Ut(1===l?function(h){return t1(h.type,i[0])}:function(h){for(var g=0;g<l;g++)if(t1(h.type,i[g]))return!0;return!1})}var Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function fE(i,u){i.super_=u,i.prototype=Object.create(u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}function Uh(i,u){Object.defineProperty(this,"kind",{value:i,enumerable:!0}),u&&u.length&&Object.defineProperty(this,"path",{value:u,enumerable:!0})}"object"===(typeof global>"u"?"undefined":Ud(global))&&global&&global,fE(function i(u,l,h){i.super_.call(this,"E",u),Object.defineProperty(this,"lhs",{value:l,enumerable:!0}),Object.defineProperty(this,"rhs",{value:h,enumerable:!0})},Uh),fE(function i(u,l){i.super_.call(this,"N",u),Object.defineProperty(this,"rhs",{value:l,enumerable:!0})},Uh),fE(function i(u,l){i.super_.call(this,"D",u),Object.defineProperty(this,"lhs",{value:l,enumerable:!0})},Uh),fE(function i(u,l,h){i.super_.call(this,"A",u),Object.defineProperty(this,"index",{value:l,enumerable:!0}),Object.defineProperty(this,"item",{value:h,enumerable:!0})},Uh);const Vh=!1;var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function jr(i){if(i.__esModule)return i;var u=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(l){var h=Object.getOwnPropertyDescriptor(i,l);Object.defineProperty(u,l,h.get?h:{enumerable:!0,get:function(){return i[l]}})}),u}var jd=function(i,u,l,h,g,y,C,w){if(!i){var D;if(void 0===u)D=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var N=[l,h,g,y,C,w],L=0;(D=new Error(u.replace(/%s/g,function(){return N[L++]}))).name="Invariant Violation"}throw D.framesToPop=1,D}},Mg=function(i){return"function"==typeof i},Gu=function(i){return 0===i.length},_0=function(i){return i.toString()},qP=function(i){return"string"==typeof i},Ng=function(i){return i},r1=function(i){return null===i};function lo(i,u,l){void 0===u&&(u=Ng),jd(Mg(u)||r1(u),"Expected payloadCreator to be a function, undefined or null");var h=r1(u)||u===Ng?Ng:function(w){for(var D=arguments.length,N=new Array(D>1?D-1:0),L=1;L<D;L++)N[L-1]=arguments[L];return w instanceof Error?w:u.apply(void 0,[w].concat(N))},g=Mg(l),y=i.toString(),C=function(){var w=h.apply(void 0,arguments),D={type:i};return w instanceof Error&&(D.error=!0),void 0!==w&&(D.payload=w),g&&(D.meta=l.apply(void 0,arguments)),D};return C.toString=function(){return y},C}var Yf=function(i){if("object"!=typeof i||null===i)return!1;for(var u=i;null!==Object.getPrototypeOf(u);)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(i)===u},Cv=function(i){return Array.isArray(i)},v0=function(i){return null==i},PB=/\s/,MB=/(_|-|\.|:)/,A0=/([a-z][A-Z]|[A-Z][a-z])/,xg=/[\W_]+(.|$)/g,Iv=/(.)([A-Z]+)/g,cn=function(i){return(u=i,function(i){return PB.test(i)?i.toLowerCase():MB.test(i)?(u=i,u.replace(xg,function(l,h){return h?" "+h:""})||i).toLowerCase():A0.test(i)?function(u){return u.replace(Iv,function(l,h,g){return h+" "+g.toLowerCase().split("").join(" ")})}(i).toLowerCase():i.toLowerCase();var u}(u).replace(/[\W_]+(.|$)/g,function(l,h){return h?" "+h:""}).trim()).replace(/\s(\w)/g,function(u,l){return l.toUpperCase()});var u},mE=function(i){return-1===i.indexOf("/")?cn(i):i.split("/").map(cn).join("/")},Xc=function(i,u){return i.reduce(function(l,h){return u(l,h)},{})},eu=function(i){return typeof Map<"u"&&i instanceof Map};function gE(i){if(eu(i))return Array.from(i.keys());if(typeof Reflect<"u"&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(i);var u=Object.getOwnPropertyNames(i);return"function"==typeof Object.getOwnPropertySymbols&&(u=u.concat(Object.getOwnPropertySymbols(i))),u}function Lg(i,u){return eu(u)?u.get(i):u[i]}var YP=function(i){return function u(l,h,g,y){var C=void 0===h?{}:h,w=C.namespace,D=void 0===w?"/":w,N=C.prefix;return void 0===g&&(g={}),void 0===y&&(y=""),gE(l).forEach(function(L){var W,V=(W=function(W){var X;if(!y)return W;var ne=W.toString().split("||"),me=y.split("||");return(X=[]).concat.apply(X,me.map(function(_e){return ne.map(function(Re){return""+_e+D+Re})})).join("||")}(L),y||!N||N&&new RegExp("^"+N+D).test(W)?W:""+N+D+W),G=Lg(L,l);i(G)?u(G,{namespace:D,prefix:N},g,V):g[V]=G}),g}},wv=YP(Yf);function Zc(i){for(var u=1;u<arguments.length;u++){var l=null!=arguments[u]?arguments[u]:{},h=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(h=h.concat(Object.getOwnPropertySymbols(l).filter(function(g){return Object.getOwnPropertyDescriptor(l,g).enumerable}))),h.forEach(function(g){xp(i,g,l[g])})}return i}function xp(i,u,l){return u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i}function Bo(i){for(var u=arguments.length,l=new Array(u>1?u-1:0),h=1;h<u;h++)l[h-1]=arguments[h];var g,w,y=Yf((g=l)[g.length-1])?l.pop():{};return jd(l.every(qP)&&(qP(i)||Yf(i)),"Expected optional object followed by string action types"),qP(i)?xB([i].concat(l),y):Zc({},function(D,N){var L=void 0===N?{}:N,V=L.namespace,G=void 0===V?"/":V,W=L.prefix;function X(me,_e,Re){var Ne=mE(Re.shift());Gu(Re)?_e[Ne]=D[me]:(_e[Ne]||(_e[Ne]={}),X(me,_e[Ne],Re))}var ne={};return Object.getOwnPropertyNames(D).forEach(function(me){var _e=W?me.replace(""+W+G,""):me;return X(me,ne,_e.split(G))}),ne}($P(wv(i,w=y)),w),xB(l,y))}function $P(i,u){var l=void 0===u?{}:u,h=l.prefix,g=l.namespace,y=void 0===g?"/":g;return Xc(Object.keys(i),function(C,w){var D,N=i[w];jd(function(G){if(Mg(G)||v0(G))return!0;if(Cv(G)){var W=G[0],ne=G[1];return Mg(void 0===W?Ng:W)&&Mg(ne)}return!1}(N),"Expected function, undefined, null, or array with payload and meta functions for "+w);var L=h?""+h+y+w:w,V=Cv(N)?lo.apply(void 0,[L].concat(N)):lo(L,N);return Zc({},C,((D={})[w]=V,D))})}function xB(i,u){var l=$P(Xc(i,function(h,g){var y;return Zc({},h,((y={})[g]=Ng,y))}),u);return Xc(Object.keys(l),function(h,g){var y;return Zc({},h,((y={})[mE(g)]=l[g],y))})}var tu=function(){for(var i=arguments.length,u=Array(i),l=0;l<i;l++)u[l]=arguments[l];var h="function"!=typeof u[u.length-1]&&u.pop(),g=u;if(void 0===h)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(y,C){for(var w=arguments.length,D=Array(w>2?w-2:0),N=2;N<w;N++)D[N-2]=arguments[N];var L=void 0===y,V=void 0===C;return L&&V&&h?h:g.reduce(function(G,W){return W.apply(void 0,[G,C].concat(D))},L&&!V&&h?h:y)}},Qd=YP(function(i){return(Yf(i)||eu(i))&&(h=(l=gE(i)).every(function(g){return"next"===g||"throw"===g}),!(l.length&&l.length<=2&&h));var l,h});function li(i,u,l){void 0===l&&(l={}),jd(Yf(i)||eu(i),"Expected handlers to be a plain object.");var h=Qd(i,l),g=gE(h).map(function(C){return function(w,D,N){void 0===D&&(D=Ng);var L=_0(w).split("||");jd(!(void 0===N),"defaultState for reducer handling "+L.join(", ")+" should be defined"),jd(Mg(D)||Yf(D),"Expected reducer to be a function or object with next and throw reducers");var V=Mg(D)?[D,D]:[D.next,D.throw].map(function(X){return v0(X)?Ng:X}),G=V[0],W=V[1];return function(X,ne){void 0===X&&(X=N);var me=ne.type;return me&&-1!==L.indexOf(_0(me))?(!0===ne.error?W:G)(X,ne):X}}(C,Lg(C,h),u)}),y=tu.apply(void 0,g.concat([u]));return function(C,w){return void 0===C&&(C=u),y(C,w)}}const $f=lo("CONNECT_ZOOM_SOCKET"),_E=lo("CONNECT_XMPP_SOCKET"),nu=lo("CLOSE_ZOOM_SOCKET"),o1=lo("CLOSE_XMPP_SOCKET"),el=lo("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),vE=lo("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),JP=lo("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),aa=lo("CONNECT_MAIN_SESSION_SOCKET"),XP=lo("CLOSE_MAIN_SESSION_SOCKET"),Dl=lo("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:Bg,setRwgServersList:Pi,setRwgRetryCount:jh,setXmppSocketStatus:AE,setMainSessionSocketStatus:mr,resetSocket:Oc}=Bo("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","RESET_SOCKET"),zi=lo("CONNECT_TO_MEDIA_STREAM"),sc=lo("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:ac,setAudioDecodeStatus:Wu,setVideoEncodeStatus:tl,setVideoDecodeStatus:ba,setSharingEncodeStatus:gr,setSharingDecodeStatus:ui,setMediaConstraints:vs,setMediaEncryptKey:ru,setIsEnableDecoderInWorklet:Jf,setPatchedMediaSdkStatus:Gs,setMediaAssetsPath:Fg,setIsEnableVideoAudioQos:Ls,setIsAudioBridgeReceiveReady:yE,setIsAudioBridgeSendReady:Tv,setIsMediaAgentInitialized:fi,resetMedia:Rv}=Bo("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","SET_IS_ENABLE_DECODER_IN_WORKLET","SET_PATCHED_MEDIA_SDK_STATUS","SET_MEDIA_ASSETS_PATH","SET_IS_ENABLE_VIDEO_AUDIO_QOS","SET_IS_AUDIO_BRIDGE_RECEIVE_READY","SET_IS_AUDIO_BRIDGE_SEND_READY","SET_IS_MEDIA_AGENT_INITIALIZED","RESET_MEDIA");function EE(i,u){for(var l=arguments.length,h=new Array(l>2?l-2:0),g=2;g<l;g++)h[g-2]=arguments[g];return i(Ii(...h||[]),u,null)}function s1(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];const h=function(){for(var g=arguments.length,y=new Array(g),C=0;C<g;C++)y[C]=arguments[C];return un(...u.map(w=>{const D=w(...y);if(!D)throw new TypeError(`combineEpics: one of the provided Epics "${w.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return D.pipe(Np((N,L)=>(setTimeout(()=>{throw N},0),L)))}))};try{Object.defineProperty(h,"name",{value:`combineEpics(${u.map(g=>g.name||"<anonymous>").join(", ")})`})}catch{}return h}function ca(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];return s1(...u.flatMap(h=>Object.values(h)))}function Dn(i,u){return i.pipe(Wn(`${el}`),Ut(l=>l.payload.evt===u))}function Lp(i,u){return i.pipe(Wn(`${Dl}`),Ut(l=>l.payload.evt===u))}function Hd(i,u){return i.pipe(Wn(`${JP}`),Ut(l=>l.payload.evt===u))}function la(i,u){return i.pipe(Wn(`${el}`,`${Dl}`),Ut(l=>l.payload.evt===u))}function Rr(i,u){return i.pipe(Wn(`${sc}`),Ut(l=>Array.isArray(u)?u.indexOf(l.payload.type)>-1:l.payload.type===u))}function y0(i,u){return i.pipe(Wn(`${zi}`),Ut(()=>{const{media:{assetsPath:l,mediaConstraints:h}}=u.value;return void 0!==l&&void 0!==h}),wi(()=>{const{media:{isMediaAgentInitialized:l}}=u.value;return l?kn([0]):i.pipe(Wn(`${fi}`),Ut(h=>!!h.payload),ki(1))}))}const E0="function"==typeof atob,ZP="function"==typeof btoa,Gd="function"==typeof Buffer,bE="function"==typeof TextDecoder?new TextDecoder:void 0,Ug="function"==typeof TextEncoder?new TextEncoder:void 0,Sa=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Xf=(i=>{let u={};return Sa.forEach((l,h)=>u[l]=h),u})(),iu=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Wo=String.fromCharCode.bind(String),b0="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):i=>new Uint8Array(Array.prototype.slice.call(i,0)),SE=i=>i.replace(/=/g,"").replace(/[+\/]/g,u=>"+"==u?"-":"_"),Vg=i=>i.replace(/[^A-Za-z0-9\+\/]/g,""),Ol=i=>{let u,l,h,g,y="";const C=i.length%3;for(let w=0;w<i.length;){if((l=i.charCodeAt(w++))>255||(h=i.charCodeAt(w++))>255||(g=i.charCodeAt(w++))>255)throw new TypeError("invalid character found");u=l<<16|h<<8|g,y+=Sa[u>>18&63]+Sa[u>>12&63]+Sa[u>>6&63]+Sa[63&u]}return C?y.slice(0,C-3)+"===".substring(C):y},a1=ZP?i=>btoa(i):Gd?i=>Buffer.from(i,"binary").toString("base64"):Ol,eM=Gd?i=>Buffer.from(i).toString("base64"):i=>{let u=[];for(let l=0,h=i.length;l<h;l+=4096)u.push(Wo.apply(null,i.subarray(l,l+4096)));return a1(u.join(""))},S0=(i,u=!1)=>u?SE(eM(i)):eM(i),BB=i=>{if(i.length<2)return(u=i.charCodeAt(0))<128?i:u<2048?Wo(192|u>>>6)+Wo(128|63&u):Wo(224|u>>>12&15)+Wo(128|u>>>6&63)+Wo(128|63&u);var u=65536+1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320);return Wo(240|u>>>18&7)+Wo(128|u>>>12&63)+Wo(128|u>>>6&63)+Wo(128|63&u)},M4=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,FB=i=>i.replace(M4,BB),ou=Gd?i=>Buffer.from(i,"utf8").toString("base64"):Ug?i=>eM(Ug.encode(i)):i=>a1(FB(i)),Dv=(i,u=!1)=>u?SE(ou(i)):ou(i),VB=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,jB=i=>{switch(i.length){case 4:var u=((7&i.charCodeAt(0))<<18|(63&i.charCodeAt(1))<<12|(63&i.charCodeAt(2))<<6|63&i.charCodeAt(3))-65536;return Wo(55296+(u>>>10))+Wo(56320+(1023&u));case 3:return Wo((15&i.charCodeAt(0))<<12|(63&i.charCodeAt(1))<<6|63&i.charCodeAt(2));default:return Wo((31&i.charCodeAt(0))<<6|63&i.charCodeAt(1))}},QB=i=>i.replace(VB,jB),HB=i=>{if(i=i.replace(/\s+/g,""),!iu.test(i))throw new TypeError("malformed base64.");i+="==".slice(2-(3&i.length));let u,l,h,g="";for(let y=0;y<i.length;)u=Xf[i.charAt(y++)]<<18|Xf[i.charAt(y++)]<<12|(l=Xf[i.charAt(y++)])<<6|(h=Xf[i.charAt(y++)]),g+=64===l?Wo(u>>16&255):64===h?Wo(u>>16&255,u>>8&255):Wo(u>>16&255,u>>8&255,255&u);return g},tM=E0?i=>atob(Vg(i)):Gd?i=>Buffer.from(i,"base64").toString("binary"):HB,GB=Gd?i=>b0(Buffer.from(i,"base64")):i=>b0(tM(i).split("").map(u=>u.charCodeAt(0))),N4=Gd?i=>Buffer.from(i,"base64").toString("utf8"):bE?i=>bE.decode(GB(i)):i=>QB(tM(i)),Qh=i=>Vg(i.replace(/[-_]/g,u=>"-"==u?"+":"/")),C0=i=>N4(Qh(i)),Bp_encode=Dv,Bp_decode=C0,Bp_fromUint8Array=S0;function As(i){return Bp_encode(i,!0)}function Bs(i){return Bp_decode(i)}function I0(i){return Bp_encode(i,!1)}const w0={"-":"+",_:"/",".":"="};function su(i){const u=i.replace(/[-_.]/g,l=>w0[l]);return Uint8Array.from(window.atob(u),l=>l.charCodeAt(0))}const c1=i=>{const u=i.charCodeAt(0);return u<=parseInt("0x7F",16)?1:u<=parseInt("0x7FF",16)?2:u<=parseInt("0xFFFF",16)?3:u<=parseInt("0x1FFFFF",16)?4:u<=parseInt("0x3FFFFFF",16)?5:6};function Zf(i,u){return Object.keys(i).find(l=>i[l]===u)}const l1=(i,u)=>{const l=i.split(".").map(y=>Number(y)).slice(0,3),h=u.split(".").map(y=>Number(y)).slice(0,3);let g=0;for(let y=0;y<3;y++){const C=y<l.length?l[y]:0,w=y<h.length?h[y]:0;if(C<w){g=-1;break}if(C>w){g=1;break}}return g},Ov=i=>{var u;let l=(new Date).getTime(),h=1e3*(null===(u=performance)||void 0===u?void 0:u.now())||0;const g="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,y=>{let C=16*Math.random();return l>0?(C=(l+C)%16|0,l=Math.floor(l/16)):(C=(h+C)%16|0,h=Math.floor(h/16)),("x"===y?C:3&C|8).toString(16)});return"string"==typeof i||"number"==typeof i?g+":"+i:g+""};function T0(i,u){if(i===u)return!0;if(!i||!u)return!1;const l=Object.keys(i),h=Object.keys(u),g=l.length;if(h.length!==g)return!1;for(let y=0;y<g;y++){const C=l[y];if(i[C]!==u[C]||!Object.prototype.hasOwnProperty.call(u,C))return!1}return!0}const Ro=(i,u)=>i>>10==u>>10,em=(i,u)=>new Promise(l=>{setTimeout(()=>{l(i())},u)}),Hh=i=>{const u=`${Math.floor(1e4*Math.random())}`;return i.indexOf("@")>-1?i.replace("@",u):`${i}${u}`},au=i=>{try{const u=new URL(i);return!("data:"===u.protocol&&"null"===u.origin)&&u.origin!==location.origin}catch{return!0}},u1=i=>{const u=i.split(".")[1];if("string"==typeof u){let l=u.replace(/-/g,"+").replace(/_/g,"/");switch(l.length%4){case 0:break;case 2:l+="==";break;case 3:l+="=";break;default:throw new Error("base64 string is not of the correct length")}try{const h=decodeURIComponent(window.atob(l).replace(/(.)/g,function(g,y){let C=y.charCodeAt(0).toString(16).toUpperCase();return C.length<2&&(C="0"+C),"%"+C}));return JSON.parse(h)}catch{console.error("Invalid token specified: invalid base64")}}};function d1(i){return i&&i.endsWith("/")?i.slice(0,i.length-1):i}const ua={default:{"apac.errorcodes_success":"Successfully joined the meeting.","apac.errorcodes_fail":"Fail to join the meeting.","apac.errorcodes_not_init":"Meeting not initialized.","apac.errorcodes_register":"This webinar requires registration.","apac.errorcodes_email_require":"Email is missing to attend webinar.","apac.errorcodes_not_exist":"Meeting does not exist.","apac.errorcodes_not_host":"You are not the meeting host.","apac.errorcodes_wrong_pass":"Meeting Passcode wrong.","apac.errorcodes_role_type":"Role type is required.","apac.errorcodes_not_start":"Meeting has not started","apac.errorcodes_host_email_as_attendee":"Host email as attendee","apac.errorcodes_re_connect":"Meeting is reconnecting.","apac.errorcodes_be_removed":"Be removed.","apac.errorcodes_disconnect":"Meeting has been disconnected.","apac.errorcodes_denied_register_with_panelist":"Denied register use panelist email.","apac.errorcodes_web_has_in_progress":"Already has other meetings in progress.","apac.errorcodes_web_require_email":"User email is required.","apac.errorcodes_web_not_support_webinar_pac":"Not support webinar and personal audio conference","apac.errorcodes_web_host_not_exit":"The meeting host does not exist.","apac.errorcodes_web_not_support_webclient":"Not support start or join meeting from web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"The current sdk version doesn't support webinar, please upgrade to the latest version.","apac.errorcodes_web_invalid_id":"Invalid meeting ID.","apac.errorcodes_web_not_support_registration_webinar":"Not support registration webinar","apac.errorcodes_web_not_support_tsp":"Not support start or join meeting from web, when you chose TSP as his audio in a meeting.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Not allow to start webinar from web.","apac.errorcodes_pac_api_wrong":"The accounts API Key is not valid.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"Incorrect role.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The accounts API Key is deactivated.","apac.errorcodes_pac_cant_host_other_mn":"Cannot not host another meeting concurrently.","apac.errorcodes_pac_invalid_signature":"Signature is invalid.","apac.errorcodes_pac_no_permission":"No permission.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unable join from browser, please join using the Zoom desktop client or mobile app.","apac.errorcodes_rwc_empty":"Could not get a response from the web server.","apac.errorcodes_rwc_error":"Could not connect to Web Server error.","apac.errorcodes_frequent_call":"You have reached the API limit for this call.","apac.errorcodes_frequent_join":"You be limit by zoom, need to check recaptcha.","apac.errorcodes_offline":"The service is temporarily offline.","apac.errorcodes_wasm_fail":"Download wasm files error, please check your network and firewall.","apac.errorcodes_denied_email":"Email is blocked by Administrator.","apac.errorcodes_host_inactive":"Meeting host is inactive.","apac.errorcodes_tk_expired":"Token has expired.","apac.invalid_parameter":"Invalid Parameter","apac.errorcodes_login_required":"Require login","apac.errorcodes_upgrade":"Your sdk version needs to be {0} or higher to join the meeting","apac.errorcodes_no_response_from_web":"No response from web, try again later.","apac.errorcodes_host_email":"Please use host/alternative host to start the webinar.","apac.errorcodes_meeting_websdk_version_need_update":"The current sdk version is no longer supported, please upgrade to the latest version.","apac.websdk_update_content":"Update MeetingSDK-Web to the latest version to optimize meeting experience","apac.videosdk_update_content":"Update VideoSDK-Web to the latest version to optimize meeting experience"},"de-DE":{"apac.errorcodes_web_has_in_progress":"Hat bereits andere laufende Meetings.","apac.errorcodes_web_require_email":"E-Mail-Adresse von Benutzer erforderlich.","apac.errorcodes_web_not_support_webinar_pac":"Unterst\xfctzen Webinar und pers\xf6nliche Audiokonferenz nicht","apac.errorcodes_web_host_not_exit":"Der Meeting-Host ist nicht vorhanden.","apac.errorcodes_web_not_support_webclient":"Start nicht unterst\xfctzt bzw. starten Sie das Meeting aus dem Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Ihre aktuelle SDK-Version unterst\xfctzt keine Webinare. Aktualisieren Sie bitte auf die neueste Version.","apac.errorcodes_web_invalid_id":"Ung\xfcltige Meeting-ID.","apac.errorcodes_web_not_support_registration_webinar":"Registrierung f\xfcr Webinar wird nicht unterst\xfctzt","apac.errorcodes_web_not_support_tsp":"Sie unterst\xfctzen nicht den Start oder die Teilnahme an einem Meeting aus dem Web, wenn Sie den Telefonieanbieter als seinen Audiobeitrag in einem Meeting gew\xe4hlt haben.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Das Starten eines Webinars vom Internet aus ist nicht zul\xe4ssig.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unf\xe4hig beitreten aus Browser, verbinden Sie bitte den Zoom-Desktop-Client oder mobile App.","apac.errorcodes_meeting_websdk_version_need_update":"Ihre aktuelle SDK-Version wird nicht mehr unterst\xfctzt. Aktualisieren Sie bitte auf die neueste Version.","apac.websdk_update_content":"Update MeetingSDK-Web auf die neueste Version zu optimieren Meeting-Erlebnis","apac.videosdk_update_content":"Update VideoSDK-Web auf die neueste Version zu optimieren Meeting-Erlebnis"},"es-ES":{"apac.errorcodes_web_has_in_progress":"Ya posee otras reuniones en curso.","apac.errorcodes_web_require_email":"Se requiere correo electr\xf3nico del usuario.","apac.errorcodes_web_not_support_webinar_pac":"No soporta seminario web o conferencia de audio personal","apac.errorcodes_web_host_not_exit":"El anfitri\xf3n de la reuni\xf3n no existe.","apac.errorcodes_web_not_support_webclient":"No se puede iniciar ni entrar a una reuni\xf3n desde la web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versi\xf3n actual de sdk no es compatible con el seminario web, actualice a la \xfaltima versi\xf3n.","apac.errorcodes_web_invalid_id":"ID de reuni\xf3n no v\xe1lida.","apac.errorcodes_web_not_support_registration_webinar":"Seminario web que no es compatible con la inscripci\xf3n","apac.errorcodes_web_not_support_tsp":"Cuando eligi\xf3 el proveedor de servicios telef\xf3nicos como audio en una reuni\xf3n, no se puede iniciar o unirse una reuni\xf3n desde el sitio web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"No se permite comenzar un seminario web desde la web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"No puede unirse desde el navegador, por favor unirse usando el cliente de escritorio Zoom o aplicaci\xf3n m\xf3vil.","apac.errorcodes_meeting_websdk_version_need_update":"La versi\xf3n actual de sdk ya no es compatible actualice a la versi\xf3n m\xe1s reciente.","apac.websdk_update_content":"Actualizaci\xf3n MeetingSDK-Web a la \xfaltima versi\xf3n para optimizar la experiencia de la reuni\xf3n","apac.videosdk_update_content":"Actualizaci\xf3n VideoSDK-Web a la \xfaltima versi\xf3n para optimizar la experiencia de la reuni\xf3n"},"fr-FR":{"apac.errorcodes_web_has_in_progress":"Il a d\xe9j\xe0 d\u2019autres r\xe9unions en cours.","apac.errorcodes_web_require_email":"Le courriel de l\u2019utilisateur est requis.","apac.errorcodes_web_not_support_webinar_pac":"Ne prend pas en charge le webinaire ni la conf\xe9rence audio personnelle","apac.errorcodes_web_host_not_exit":"L\u2019animateur de la r\xe9union n\u2019existe pas.","apac.errorcodes_web_not_support_webclient":"Ne supporte pas d\xe9marrer ou rejoindre une r\xe9union \xe0 partir du web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La version actuelle du SDK ne prend pas en charge le webinaire, veuillez passer \xe0 la derni\xe8re version.","apac.errorcodes_web_invalid_id":"N\xba de r\xe9union non valide.","apac.errorcodes_web_not_support_registration_webinar":"Ne prend pas en charge le webinaire d\u2019inscription","apac.errorcodes_web_not_support_tsp":"Ne peut pas d\xe9marrer ou rejoindre la r\xe9union depuis Internet, lorsque vous s\xe9lectionnez le fournisseur de service en t\xe9l\xe9phonie comma sa sortie audio dans une r\xe9union.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Ne pas permettre de d\xe9marrer des webinaires \xe0 partir du Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossible de rejoindre le navigateur, s'il vous pla\xeet rejoindre en utilisant le client de bureau Zoom ou une application mobile.","apac.errorcodes_meeting_websdk_version_need_update":"La version actuelle du SDK n\u2019est plus prise en charge, veuillez passer \xe0 la derni\xe8re version.","apac.websdk_update_content":"Mise \xe0 jour MeetingSDK-Web \xe0 la derni\xe8re version pour optimiser l'exp\xe9rience de r\xe9union","apac.videosdk_update_content":"Mise \xe0 jour VideoSDK-Web \xe0 la derni\xe8re version pour optimiser l'exp\xe9rience de r\xe9union"},"jp-JP":{"apac.errorcodes_web_has_in_progress":"\u3059\u3067\u306b\u4ed6\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u304c\u59cb\u307e\u3063\u3066\u3044\u307e\u3059\u3002","apac.errorcodes_web_require_email":"\u30e6\u30fc\u30b6\u30fc\u30e1\u30fc\u30eb\u306f\u5fc5\u8981\u3067\u3059\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3068\u30d1\u30fc\u30bd\u30ca\u30eb\u97f3\u58f0\u4f1a\u8b70\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093","apac.errorcodes_web_host_not_exit":"\u3053\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30db\u30b9\u30c8\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_support_webclient":"\u30a6\u30a7\u30d6\u304b\u3089\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u958b\u59cb/\u53c2\u52a0\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u305b\u3093\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u73fe\u5728\u306eSDK\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002","apac.errorcodes_web_invalid_id":"\u7121\u52b9\u306a\u30df\u30fc\u30c6\u30a3\u30f3\u30b0ID\u3067\u3059\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u767b\u9332\u30a6\u30a7\u30d3\u30ca\u30fc\u975e\u5bfe\u5fdc","apac.errorcodes_web_not_support_tsp":"\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30aa\u30fc\u30c7\u30a3\u30aa\u306b\u30c6\u30ec\u30d5\u30a9\u30cb\u30fc\u30b5\u30fc\u30d3\u30b9\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u9078\u629e\u3057\u305f\u5834\u5408\u3001\u30a6\u30a7\u30d6\u304b\u3089\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u958b\u59cb\u3057\u305f\u308a\u3001\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u53c2\u52a0\u3057\u305f\u308a\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30a6\u30a7\u30d6\u304b\u3089\u958b\u59cb\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u53c2\u52a0\u3057\u3001\u30ba\u30fc\u30e0\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3084\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3092\u4f7f\u7528\u3057\u3066\u53c2\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002","apac.errorcodes_meeting_websdk_version_need_update":"\u73fe\u5728\u306e SDK \u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002","apac.websdk_update_content":"\u6700\u9069\u5316\u4f1a\u8b70\u306e\u7d4c\u9a13\u3092\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u66f4\u65b0\u3057MeetingSDK-Web","apac.videosdk_update_content":"\u6700\u9069\u5316\u4f1a\u8b70\u306e\u7d4c\u9a13\u3092\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u66f4\u65b0\u3057VideoSDK-Web"},"pt-PT":{"apac.errorcodes_web_has_in_progress":"J\xe1 h\xe1 outras reuni\xf5es em andamento.","apac.errorcodes_web_require_email":"O e-mail do usu\xe1rio \xe9 obrigat\xf3rio.","apac.errorcodes_web_not_support_webinar_pac":"N\xe3o h\xe1 suporte para webinar e audioconfer\xeancia pessoal","apac.errorcodes_web_host_not_exit":"O anfitri\xe3o da reuni\xe3o n\xe3o existe.","apac.errorcodes_web_not_support_webclient":"N\xe3o h\xe1 suporte para iniciar ou entrar na reuni\xe3o pela web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"A vers\xe3o sdk atual n\xe3o oferece suporte para webinar. Atualize para a vers\xe3o mais recente.","apac.errorcodes_web_invalid_id":"ID da reuni\xe3o inv\xe1lido.","apac.errorcodes_web_not_support_registration_webinar":"O registro do webinar n\xe3o \xe9 compat\xedvel","apac.errorcodes_web_not_support_tsp":"N\xe3o \xe9 compat\xedvel iniciar ou ingressar na reuni\xe3o pela web ao escolher o \xe1udio do provedor de servi\xe7os de telefonia em uma reuni\xe3o.","apac.errorcodes_web_not_allow_start_webinar_from_web":"N\xe3o \xe9 permitido iniciar o webinar na web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Incapaz juntar-se a partir do navegador, por favor, junte-se usando o cliente de desktop Zoom ou aplicativo m\xf3vel.","apac.errorcodes_meeting_websdk_version_need_update":"O servi\xe7o de valida\xe7\xe3o de n\xfamero ABN est\xe1 temporariamente indispon\xedvel.","apac.websdk_update_content":"Atualiza\xe7\xe3o MeetingSDK-Web para a vers\xe3o mais recente a experi\xeancia de reuni\xe3o otimizar","apac.videosdk_update_content":"Atualiza\xe7\xe3o VideoSDK-Web para a vers\xe3o mais recente a experi\xeancia de reuni\xe3o otimizar"},"ru-RU":{"apac.errorcodes_web_has_in_progress":"\u0423\u0436\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f\u0445.","apac.errorcodes_web_require_email":"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0447\u0442\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.","apac.errorcodes_web_not_support_webinar_pac":"\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440 \u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e","apac.errorcodes_web_host_not_exit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.","apac.errorcodes_web_not_support_webclient":"\u0417\u0430\u043f\u0443\u0441\u043a \u0438\u043b\u0438 \u0432\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0442\u044c \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 SDK \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u044b. \u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438.","apac.errorcodes_web_invalid_id":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438.","apac.errorcodes_web_not_support_registration_webinar":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f","apac.errorcodes_web_not_support_tsp":"\u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0441\u043b\u0443\u0436\u0431\u044b \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438, \u0442\u0430\u043a\u0443\u044e \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0447\u0430\u0442\u044c \u0438\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u0417\u0430\u043f\u0443\u0441\u043a \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440\u0430 \u0447\u0435\u0440\u0435\u0437 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u0438\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043d\u0430\u0441\u0442\u043e\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0438\u043b\u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.","apac.errorcodes_meeting_websdk_version_need_update":"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 SDK \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f. \u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438.","apac.websdk_update_content":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 MeetingSDK-Web \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u043f\u044b\u0442 \u0432\u0441\u0442\u0440\u0435\u0447\u0438","apac.videosdk_update_content":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 VideoSDK-Web \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u043f\u044b\u0442 \u0432\u0441\u0442\u0440\u0435\u0447\u0438"},"zh-CN":{"apac.errorcodes_web_has_in_progress":"\u5df2\u7ecf\u6709\u53e6\u4e00\u573a\u4f1a\u8bae\u6b63\u5728\u8fdb\u884c\u3002","apac.errorcodes_web_require_email":"\u5fc5\u987b\u63d0\u4f9b\u7528\u6237\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u975e\u652f\u6301\u7684\u7f51\u7edc\u7814\u8ba8\u4f1a\u548c\u4e2a\u4eba\u97f3\u9891\u4f1a\u8bae","apac.errorcodes_web_host_not_exit":"\u4f1a\u8bae\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u6301\u4ece Web \u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u5f53\u524d sdk \u7248\u672c\u4e0d\u652f\u6301\u7f51\u7edc\u7814\u8ba8\u4f1a\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u65e0\u6548\u7684\u4f1a\u8baeID\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u6301\u6ce8\u518c\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_web_not_support_tsp":"\u5982\u679c\u9009\u62e9\u7535\u8bdd\u8bed\u97f3\u670d\u52a1\u63d0\u4f9b\u5546\u4f5c\u4e3a\u4f1a\u8bae\u97f3\u9891\uff0c\u5219\u4e0d\u652f\u6301\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8bb8\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u4ece\u6d4f\u89c8\u5668\u65e0\u6cd5\u52a0\u5165\uff0c\u8bf7\u52a0\u5165\u4f7f\u7528\u7f29\u653e\u684c\u9762\u5ba2\u6237\u7aef\u6216\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002","apac.errorcodes_meeting_websdk_version_need_update":"\u5f53\u524dSDK\u7248\u672c\u4e0d\u518d\u53d7\u5230\u652f\u6301\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002","apac.websdk_update_content":"\u66f4\u65b0MeetingSDK-Web\u5230\u6700\u65b0\u7248\u672c\uff0c\u4ee5\u4f18\u5316\u4f1a\u8bae\u4f53\u9a8c","apac.videosdk_update_content":"\u66f4\u65b0VideoSDK-Web\u5230\u6700\u65b0\u7248\u672c\uff0c\u4ee5\u4f18\u5316\u4f1a\u8bae\u4f53\u9a8c"},"zh-TW":{"apac.errorcodes_web_has_in_progress":"\u5df2\u6709\u5176\u4ed6\u6703\u8b70\u6b63\u5728\u9032\u884c\u4e2d\u3002","apac.errorcodes_web_require_email":"\u5fc5\u9808\u63d0\u4f9b\u4f7f\u7528\u8005\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\u548c\u500b\u4eba\u97f3\u8a0a\u6703\u8b70","apac.errorcodes_web_host_not_exit":"\u6703\u8b70\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u63f4\u5f9e Web \u958b\u59cb\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u76ee\u524d\u7684 SDK \u7248\u672c\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\uff0c\u8acb\u5347\u7d1a\u81f3\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u7121\u6548\u7684\u6703\u8b70 ID \u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u63f4\u8a3b\u518a\u7db2\u8def\u7814\u8a0e\u6703","apac.errorcodes_web_not_support_tsp":"\u7576\u60a8\u9078\u64c7\u96fb\u8a71\u8a9e\u97f3\u670d\u52d9\u4f9b\u61c9\u5546\u505a\u70ba\u6703\u8b70\u8a9e\u97f3\u4f7f\u7528\u6642\uff0c\u4e0d\u652f\u63f4\u7d93\u7531\u7db2\u9801\u53ec\u958b\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8a31\u5f9e Web \u958b\u59cb\u7db2\u8def\u7814\u8a0e\u6703\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u5f9e\u700f\u89bd\u5668\u7121\u6cd5\u52a0\u5165\uff0c\u8acb\u52a0\u5165\u4f7f\u7528\u7e2e\u653e\u684c\u9762\u5ba2\u6236\u7aef\u6216\u79fb\u52d5\u61c9\u7528\u7a0b\u5e8f\u3002","apac.errorcodes_meeting_websdk_version_need_update":"\u76ee\u524d\u7684SDK\u7248\u672c\u5df2\u4e0d\u518d\u53d7\u5230\u652f\u63f4\uff0c\u8acb\u5347\u7d1a\u81f3\u6700\u65b0\u7248\u672c\u3002","apac.websdk_update_content":"\u66f4\u65b0MeetingSDK-Web\u5230\u6700\u65b0\u7248\u672c\uff0c\u4ee5\u512a\u5316\u6703\u8b70\u9ad4\u9a57","apac.videosdk_update_content":"\u66f4\u65b0VideoSDK-Web\u5230\u6700\u65b0\u7248\u672c\uff0c\u4ee5\u512a\u5316\u6703\u8b70\u9ad4\u9a57"},"ko-KO":{"apac.errorcodes_web_has_in_progress":"\uc774\ubbf8 \ub2e4\ub978 \ud68c\uc758\uac00 \uc9c4\ud589 \uc911\uc785\ub2c8\ub2e4.","apac.errorcodes_web_require_email":"\uc0ac\uc6a9\uc790 \uc774\uba54\uc77c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webinar_pac":"\uc6e8\ube44\ub098 \ubc0f \uac1c\uc778 \uc624\ub514\uc624 \uc804\ud654 \ud68c\uc758\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_host_not_exit":"\ud68c\uc758 \ud638\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webclient":"\uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ucc38\uc5ec\ud558\ub294 \uac83\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\ud604\uc7ac SDK \ubc84\uc804\uc740 \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uc2ed\uc2dc\uc624.","apac.errorcodes_web_invalid_id":"\ud68c\uc758 ID\uac00 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_registration_webinar":"\ub4f1\ub85d \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_not_support_tsp":"\ud68c\uc758\uc5d0\uc11c Telephony Service Provider\ub97c \uc624\ub514\uc624\ub85c \uc120\ud0dd\ud55c \uacbd\uc6b0 \uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ud68c\uc758\uc5d0 \ucc38\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\uc6f9\uc5d0\uc11c \uc6e8\ube44\ub098\ub97c \uc2dc\uc791\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\uc218 \uc5c6\uc2b5\ub2c8\ub2e4 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc870\uc778 \uc90c \ub370\uc2a4\ud06c\ud1b1 \ud074\ub77c\uc774\uc5b8\ud2b8 \ub610\ub294 \ubaa8\ubc14\uc77c \uc571\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac00\uc785\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.","apac.errorcodes_meeting_websdk_version_need_update":"\ud604\uc7ac SDK \ubc84\uc804\uc740 \ub354 \uc774\uc0c1 \uc9c0\uc6d0\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uc2ed\uc2dc\uc624.","apac.websdk_update_content":"\ucd5c\uc801\ud654 \ud68c\uc758 \uacbd\ud5d8\uc744 \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8 MeetingSDK-Web","apac.videosdk_update_content":"\ucd5c\uc801\ud654 \ud68c\uc758 \uacbd\ud5d8\uc744 \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8 VideoSDK-Web"},"vi-VN":{"apac.errorcodes_web_has_in_progress":"\u0110\xe3 c\xf3 cu\u1ed9c h\u1ecdp kh\xe1c \u0111ang di\u1ec5n ra.","apac.errorcodes_web_require_email":"Email ng\u01b0\u1eddi d\xf9ng l\xe0 b\u1eaft bu\u1ed9c.","apac.errorcodes_web_not_support_webinar_pac":"Kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3ovideo v\xe0 h\u1ed9i ngh\u1ecb \xe2m thanh c\xe1 nh\xe2n","apac.errorcodes_web_host_not_exit":"Ng\u01b0\u1eddi ch\u1ee7 tr\xec cu\u1ed9c h\u1ecdp kh\xf4ng t\u1ed3n t\u1ea1i.","apac.errorcodes_web_not_support_webclient":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Phi\xean b\u1ea3n sdk hi\u1ec7n t\u1ea1i kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn, h\xe3y n\xe2ng c\u1ea5p l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t.","apac.errorcodes_web_invalid_id":"ID cu\u1ed9c h\u1ecdp kh\xf4ng h\u1ee3p l\u1ec7.","apac.errorcodes_web_not_support_registration_webinar":"Kh\xf4ng h\u1ed7 tr\u1ee3 \u0111\u0103ng k\xfd h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn","apac.errorcodes_web_not_support_tsp":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web, khi b\u1ea1n ch\u1ecdn Nh\xe0 cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111i\u1ec7n tho\u1ea1i l\xe0m ngu\u1ed3n \xe2m thanh trong cu\u1ed9c h\u1ecdp.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Kh\xf4ng cho ph\xe9p b\u1eaft \u0111\u1ea7u h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn t\u1eeb web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Kh\xf4ng th\u1ec3 tham gia t\u1eeb tr\xecnh duy\u1ec7t, h\xe3y tham gia b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng client desktop Ph\xf3ng to ho\u1eb7c \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng.","apac.errorcodes_meeting_websdk_version_need_update":"Phi\xean b\u1ea3n sdk hi\u1ec7n t\u1ea1i kh\xf4ng c\xf2n \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3, vui l\xf2ng n\xe2ng c\u1ea5p l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t.","apac.websdk_update_content":"C\u1eadp nh\u1eadt MeetingSDK-Web l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t \u0111\u1ec3 t\u1ed1i \u01b0u h\xf3a tr\u1ea3i nghi\u1ec7m cu\u1ed9c h\u1ecdp","apac.videosdk_update_content":"C\u1eadp nh\u1eadt VideoSDK-Web l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t \u0111\u1ec3 t\u1ed1i \u01b0u h\xf3a tr\u1ea3i nghi\u1ec7m cu\u1ed9c h\u1ecdp"},"it-IT":{"apac.errorcodes_web_has_in_progress":"Sta partecipando a un\u2019altra riunione in corso.","apac.errorcodes_web_require_email":"\xc8 richiesta l\u2019email dell\u2019utente.","apac.errorcodes_web_not_support_webinar_pac":"Non supporta webinar e conferenza audio personale","apac.errorcodes_web_host_not_exit":"L\u2019ospite della riunione non esiste.","apac.errorcodes_web_not_support_webclient":"Non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versione sdk corrente non supporta i webinar. Effettua l\u2019aggiornamento alla versione pi\xf9 recente.","apac.errorcodes_web_invalid_id":"ID riunione non valido.","apac.errorcodes_web_not_support_registration_webinar":"Non supporta webinar con iscrizione","apac.errorcodes_web_not_support_tsp":"In caso che hai selezionato il fornitore di servizio telefonico come l\u2019audio in riunione, non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Non \xe8 consentito avviare il webinar dal Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossibile unirsi dal browser, si prega di unirsi con il client desktop Zoom o app mobile.","apac.errorcodes_meeting_websdk_version_need_update":"La versione sdk corrente non \xe8 pi\xf9 supportata. Aggiorna alla versione pi\xf9 recente.","apac.websdk_update_content":"Aggiornamento MeetingSDK-Web alla versione pi\xf9 recente per ottimizzare l'esperienza di incontro","apac.videosdk_update_content":"Aggiornamento VideoSDK-Web alla versione pi\xf9 recente per ottimizzare l'esperienza di incontro"},"id-ID":{"apac.errorcodes_web_has_in_progress":"Sudah mengadakan pertemuan lain.","apac.errorcodes_web_require_email":"Email pengguna diperlukan.","apac.errorcodes_web_not_support_webinar_pac":"Tidak mendukung konferensi webinar dan audio pribadi","apac.errorcodes_web_host_not_exit":"Tuan rumah pertemuan tidak ada.","apac.errorcodes_web_not_support_webclient":"Tidak mendukung mulai atau bergabung dengan rapat dari web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Versi SDK saat ini tidak mendukung webinar, silakan tingkatkan ke versi terbaru.","apac.errorcodes_web_invalid_id":"ID pertemuan tidak valid.","apac.errorcodes_web_not_support_registration_webinar":"Tidak mendukung webinar pendaftaran","apac.errorcodes_web_not_support_tsp":"Tidak mendukung mulai atau bergabung dengan rapat dari web, saat Anda memilih TSP sebagai audionya dalam rapat.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Tidak mengizinkan untuk memulai webinar dari web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Tidak dapat bergabung dari browser, silakan bergabung menggunakan klien zoom desktop atau aplikasi seluler.","apac.errorcodes_meeting_websdk_version_need_update":"Versi sdk saat ini tidak lagi didukung. Tingkatkan ke versi terbaru.","apac.websdk_update_content":"Perbarui MeetingSDK-Web ke versi terbaru untuk mengoptimalkan pengalaman pertemuan","apac.videosdk_update_content":"Perbarui VideoSDK-Web ke versi terbaru untuk mengoptimalkan pengalaman pertemuan"},"nl-NL":{"apac.errorcodes_web_has_in_progress":"Heeft al andere vergaderingen in uitvoering.","apac.errorcodes_web_require_email":"E -mail van gebruikers is vereist.","apac.errorcodes_web_not_support_webinar_pac":"Ondersteun niet webinar en persoonlijke audioconferentie","apac.errorcodes_web_host_not_exit":"De vergadergastheer bestaat niet.","apac.errorcodes_web_not_support_webclient":"Ondersteuning niet starten of deelnemen aan de vergadering van Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"De huidige SDK -versie ondersteunt Webinar niet, upgrade naar de nieuwste versie.","apac.errorcodes_web_invalid_id":"Ongeldige vergadering -ID.","apac.errorcodes_web_not_support_registration_webinar":"Ondersteun geen registratie -webinar","apac.errorcodes_web_not_support_tsp":"Start niet of deel aan de vergadering van Web, wanneer u TSP koos als zijn audio tijdens een vergadering.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Niet toestaan \u200b\u200bom webinar te starten vanaf het web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Niet in staat om mee te doen vanuit de browser, doe mee met behulp van de Zoom Desktop -client of mobiele app.","apac.errorcodes_meeting_websdk_version_need_update":"De huidige SDK-versie wordt niet langer ondersteund. Voer een upgrade uit naar de nieuwste versie.","apac.websdk_update_content":"MeetingSDK-Web bijwerken naar de nieuwste versie om de vergaderervaring te optimaliseren","apac.videosdk_update_content":"VideoSDK-Web bijwerken naar de nieuwste versie om de vergaderervaring te optimaliseren"},"tr-TR":{"apac.errorcodes_web_has_in_progress":"Zaten devam eden ba\u015fka toplant\u0131lara sahip.","apac.errorcodes_web_require_email":"Kullan\u0131c\u0131 e-postas\u0131 gereklidir.","apac.errorcodes_web_not_support_webinar_pac":"Web'in ve ki\u015fisel ses konferans\u0131n\u0131 desteklememek","apac.errorcodes_web_host_not_exit":"Toplant\u0131 ana bilgisayar mevcut de\u011fil.","apac.errorcodes_web_not_support_webclient":"Desteklemeyi denememek veya web'den toplant\u0131ya kat\u0131l\u0131n.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Mevcut SDK s\xfcr\xfcm\xfc WebInar'\u0131 desteklemiyor, l\xfctfen en son s\xfcr\xfcme y\xfckseltin.","apac.errorcodes_web_invalid_id":"Ge\xe7ersiz Toplant\u0131 Kimli\u011fi.","apac.errorcodes_web_not_support_registration_webinar":"Kay\u0131t web seminerini desteklememek","apac.errorcodes_web_not_support_tsp":"TSP'yi bir toplant\u0131da ses olarak se\xe7ti\u011finizde, web'den toplant\u0131y\u0131 ba\u015flatmay\u0131n veya kat\u0131lmay\u0131n.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Web'in web'den ba\u015flamas\u0131na izin vermeyin.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Taray\u0131c\u0131dan kat\u0131lam\u0131yorsan\u0131z, l\xfctfen Zoom Masa\xfcst\xfc \u0130stemcisi veya Mobil Uygulamay\u0131 kullanarak kat\u0131l\u0131n.","apac.errorcodes_meeting_websdk_version_need_update":"Mevcut sdk s\xfcr\xfcm\xfc art\u0131k desteklenmiyor, l\xfctfen en son s\xfcr\xfcme y\xfckseltin.","apac.websdk_update_content":"Toplant\u0131 deneyimini optimize etmek i\xe7in MeetingSDK-Web en son s\xfcr\xfcme g\xfcncelleyin","apac.videosdk_update_content":"Toplant\u0131 deneyimini optimize etmek i\xe7in VideoSDK-Web en son s\xfcr\xfcme g\xfcncelleyin"},"pl-PL":{"apac.errorcodes_web_has_in_progress":"Ma ju\u017c inne spotkania.","apac.errorcodes_web_require_email":"Wymagany jest e-mail u\u017cytkownika.","apac.errorcodes_web_not_support_webinar_pac":"Nie obs\u0142uguje seminarium i osobistej konferencji audio","apac.errorcodes_web_host_not_exit":"Gospodarz spotkania nie istnieje.","apac.errorcodes_web_not_support_webclient":"Nie obs\u0142uguje uruchomienia ani do\u0142\u0105czania do spotkania z sieci.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Aktualna wersja SDK nie obs\u0142uguje webinarium, prosz\u0119 uaktualni\u0107 do najnowszej wersji.","apac.errorcodes_web_invalid_id":"Nieprawid\u0142owy identyfikator spotkania.","apac.errorcodes_web_not_support_registration_webinar":"Nie wspieraj rejestracji webinarium internetowego","apac.errorcodes_web_not_support_tsp":"Nie obs\u0142uguje uruchomienia ani do\u0142\u0105czania do spotkania z Internetu, gdy wybra\u0142e\u015b TSP jako jego audio na spotkaniu.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Nie pozw\xf3l, aby rozpocz\u0105\u0107 sie\u0107 webinarn\u0105 od sieci.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Nie mo\u017cna do\u0142\u0105czy\u0107 z przegl\u0105darki, do\u0142\u0105cz do Klienta Klient Desktop lub Mobile App.","apac.errorcodes_meeting_websdk_version_need_update":"Bie\u017c\u0105ca wersja sdk nie jest ju\u017c obs\u0142ugiwana; uaktualnij do najnowszej wersji.","apac.websdk_update_content":"Zaktualizuj MeetingSDK-Web do najnowszej wersji, aby optymalizowa\u0107 do\u015bwiadczenie spotkania","apac.videosdk_update_content":"Zaktualizuj VideoSDK-Web do najnowszej wersji, aby optymalizowa\u0107 do\u015bwiadczenie spotkania"}},R0=ua.default;function zB(i){return"en-US"===i&&(i="default"),ua[i]||ua.default}const jg=-3e3;let Ku=((i={})[i.CONF_SUCCESS=0]="CONF_SUCCESS",i[i.CONF_FAIL_MEETING_OVER=6]="CONF_FAIL_MEETING_OVER",i[i.CONF_FAIL_CONF_USER_FULL=9]="CONF_FAIL_CONF_USER_FULL",i[i.CONF_FAIL_CONFLOCKED=12]="CONF_FAIL_CONFLOCKED",i[i.CONF_FAIL_WEBINAR_DENIED_EMAIL=3033]="CONF_FAIL_WEBINAR_DENIED_EMAIL",i[i.CONF_FAIL_MEETING_HAS_CLOSED=103003]="CONF_FAIL_MEETING_HAS_CLOSED",i[i.CONF_FAIL_HAS_BEEN_REMOVED=103039]="CONF_FAIL_HAS_BEEN_REMOVED",i[i.CONF_RESULT_MMR_IB_REJECT=103043]="CONF_RESULT_MMR_IB_REJECT",i[i.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS=103044]="CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS",i),Fp=function(i){return i[i.Unknown=0]="Unknown",i[i.Normal=1]="Normal",i[i.Userrequest=2]="Userrequest",i[i.SdkConnection=3]="SdkConnection",i[i.Reconnect=5]="Reconnect",i[i.PtRequest=6]="PtRequest",i[i.KickedByHost=7]="KickedByHost",i[i.EndByHost=8]="EndByHost",i[i.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",i[i.FreeMeetingTimeout=10]="FreeMeetingTimeout",i[i.JBHTimeout=11]="JBHTimeout",i[i.EndBySingleStatus=12]="EndBySingleStatus",i[i.WebinarNeedRegister=13]="WebinarNeedRegister",i[i.ArchiveFail=14]="ArchiveFail",i[i.EndByNone=15]="EndByNone",i[i.EndByAdmin=16]="EndByAdmin",i[i.DuplicateSession=17]="DuplicateSession",i[i.MeetingTransfer=18]="MeetingTransfer",i}({}),kv=function(i){return i[i.WaitingRoomFailover=1]="WaitingRoomFailover",i[i.WebEndAndRejoin=2]="WebEndAndRejoin",i}({});var i;function Ca(i,u){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";if("en-US"!==l){const h=zB(l);return u in h?h[u]:i}return u in R0?R0[u]:i}const Pv={ANOTHER_MEETING_RUNNING:3e3,ERROR_NOT_EXIST:3001,ERROR_NOT_HOST:3003,WRONG_MEETING_PASSWORD:3004,ROLE_TYPE_IS_REQUIRE:3010,EMAIL_REQUIRED:3005,MEETING_NOT_START:3008,BE_REMOVED:3009,ERROR_WEBINAR_ENFORCE_LOGIN:3034,NEED_REAL_NAME:3082,REGISTER_REQUIRED:3099,SSO_LOGIN_WINDOW:6024,ZOOM_LOGIN_WINDOW:3051,ZOOM_SPECIFIC_LOGIN_WINDOW:3052,LOGIN_REQUIRED:3100,RE_CONNECTING:4e3,DISCONNECT:4001,INVALID_PARAMETER:4003,DENIED_REGISTER_WITH_PANELIST:3032,SERVICE_OFFLINE:403,RWC_EMPTY:3621,RWC_ERROR:3622,FREQUENT_CALL:3633,FREQUENT_JOIN:3634,WASM_FAIL:3635,COMMON_ERROR:200,COMMON_SUCCESS:0,UPGRADE:1e4},qB={SUCCESS:"apac.errorcodes_success",FAIL:"apac.errorcodes_fail",MEETING_NOT_INIT:"apac.errorcodes_not_init",REGISTER_REQUIRED:"apac.errorcodes_register",LOGIN_REQUIRED:"apac.errorcodes_login_required",SSO_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_SPECIFIC_LOGIN_WINDOW:"apac.errorcodes_login_required",EMAIL_REQUIRED:"apac.errorcodes_email_require",ERROR_NOT_EXIST:"apac.errorcodes_not_exist",ERROR_NOT_HOST:"apac.errorcodes_not_host",WRONG_MEETING_PASSWORD:"apac.errorcodes_wrong_pass",ROLE_TYPE_IS_REQUIRE:"apac.errorcodes_role_type",ANOTHER_MEETING_RUNNING:"apac.errorcodes_meeting_has_in_progress",MEETING_NOT_START:"apac.errorcodes_not_start",INVALID_PARAMETER:"apac.invalid_parameter",RE_CONNECTING:"apac.errorcodes_re_connect",BE_REMOVED:"apac.errorcodes_be_removed",ERROR_WEBINAR_ENFORCE_LOGIN:"apac.errorcodes_webinar_enforce_login",DISCONNECT:"apac.errorcodes_disconnect",DENIED_REGISTER_WITH_PANELIST:"apac.errorcodes_denied_register_with_panelist",RWC_EMPTY:"apac.errorcodes_rwc_empty",RWC_ERROR:"apac.errorcodes_rwc_error",FREQUENT_CALL:"apac.errorcodes_frequent_call",FREQUENT_JOIN:"apac.errorcodes_frequent_join",WASM_FAIL:"apac.errorcodes_wasm_fail",UPGRADE:"apac.errorcodes_meeting_websdk_version_need_update"},zu={3e3:{"apac.errorcodes_web_has_in_progress":3e3,"apac.errorcodes_web_require_email":3005,"apac.errorcodes_web_not_support_webinar_pac":3701,"apac.errorcodes_web_host_not_exit":3702,"apac.errorcodes_web_not_support_webclient":3603,"apac.errorcodes_web_should_support_webinar_with_latest_version":3604,"apac.errorcodes_web_invalid_id":3703,"apac.errorcodes_web_not_support_registration_webinar":3606,"apac.errorcodes_web_not_support_tsp":3608,"apac.errorcodes_web_not_allow_start_webinar_from_web":3609,"apac.errorcodes_need_use_zoom_desktop_or_mobile":3611,"apac.errorcodes_meeting_websdk_version_need_update":1e4},3001:{"apac.errorcodes_not_exist":3610},200:{"apac.errorcodes_pac_api_wrong":3704,"apac.errorcodes_pac_signature_expired":3705,"apac.errorcodes_pac_mn_wrong":3706,"apac.errorcodes_pac_mn_not_fount":3707,"apac.errorcodes_pac_role_error":3708,"apac.errorcodes_pac_host_not_found":3709,"apac.errorcodes_pac_api_disabled":3710,"apac.errorcodes_pac_cant_host_other_mn":3711,"apac.errorcodes_pac_invalid_signature":3712,"apac.errorcodes_pac_no_permission":3713},3099:{"apac.errorcodes_register":3099},3100:{"apac.errorcodes_login_required":3100},3003:{"apac.errorcodes_not_host":3003},3004:{"apac.errorcodes_wrong_pass":3004},3008:{"apac.errorcodes_not_start":3008},3129:{"apac.errorcodes_not_start":3008},3009:{"apac.errorcodes_be_removed":3009},3501:{"apac.errorcodes_login_required":3082},3502:{"apac.errorcodes_login_required":3082},3032:{"apac.errorcodes_denied_register_with_panelist":3100},3033:{"apac.errorcodes_denied_email":3620},3059:{"apac.errorcodes_not_support_simulive":3630},1001:{"apac.errorcodes_host_inactive":3625},3136:{"apac.errorcodes_zak":3623,"apac.errorcodes_host_email":3624,"apac.errorcodes_zak2":3265,"apac.errorcodes_require_host":3709},3082:{"apac.errorcodes_real_name":3082},403:{"apac.errorcodes_offline":403},404:{"apac.errorcodes_offline":403},4003:{"apac.invalid_parameter":4003},124:{"apac.errorcodes_tk_expired":3610}},wE={3004:{"apac.errorcodes_pac_mn_wrong":3714},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3027:{"apac.errorcodes_host_email_as_attendee":3627},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_no_response_from_web":3621},131005:{"apac.errorcodes_no_response_from_web":3621},1001:{"apac.errorcodes_host_inactive":3625},131001:{"apac.errorcodes_host_inactive":3625},131013:{"meeting ended":4004},103039:{"apac.errorcodes_be_removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};let TE;function ti(i,u){const{key:l,value:h}=function(y,C){let w=!1;if(-1===y)return{key:"apac.errorcodes_offline",value:403};if(3e3===y){const L=["en-US","de-DE","es-ES","fr-FR","jp-JP","pt-PT","ru-RU","zh-CN","zh-TW","ko_KO","vi-VN","it-IT","id-ID","nl-NL","tr-TR","pl-PL"];let V={};if(TE)V=TE;else{const G=Object.keys(zu[3e3]);L.forEach(W=>{const X=zB(W);V[W]={},G.forEach(ne=>{V[W][ne]=X[ne]})}),TE=V}return L.forEach(G=>{if(w)return;const W=Zf(V[G],C);W&&(w={key:W,value:zu[y][W]})}),w||(w={key:"apac.errorcodes_fail",value:200}),w}if(200===y){const L=Zf({"apac.errorcodes_pac_api_wrong":"The api key is wrong.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"The role is not applicable.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The account don't enable API.","apac.errorcodes_pac_cant_host_other_mn":"Can not be host in other account's meeting.","apac.errorcodes_pac_invalid_signature":"Invalid signature.","apac.errorcodes_pac_no_permission":"No permission"},C);return w=L?{key:L,value:zu[y][L]}:{key:"apac.errorcodes_fail",value:200},w}if(void 0!==zu[y]){const L=zu[y],V=Object.keys(L)[0];w={key:V,value:L[V]}}if(w)return w;const D=Zf(Pv,y),N=qB[D];return N?{key:N,value:y}:{key:"apac.errorcodes_fail",value:200}}(i,u),g=Ca(l,l);return l!==g?{reason:g,errorCode:h}:{reason:R0[l],errorCode:h}}function Mv(i){let u=!1;const l="number"==typeof i?i:i.body.res;if(void 0!==wE[l]){const g=wE[l],y=Object.keys(g)[0];u={key:y,value:g[y]}}if(u){const{key:g,value:y}=u,C=Ca(g,g);return Object.assign({},i,g!==C?{reason:C,errorCode:y}:{reason:R0[g],errorCode:y})}const h=ti(l);return Object.assign({},i,{reason:h.reason,errorCode:h.errorCode})}const x4=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],rM={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:i=>({meetingTopic:Bs(i)}),gatewayKey:i=>{const[,u,l]=i.split(".");return u&&l?{gatewayUser:{userId:Number(u),sn:l}}:{}},encryptKey:i=>({gcmSessinKey:su(i)})},p1=lo("GET_MEETING_INFO"),Nv=lo("GET_INSTANT_MEETING_INFO");lo("LOGON_ZOOM_DOMAIN"),lo("VERIFY_ZOOM_RECAPTCHA"),lo("LOGON_THIRD_PARTY_DOMAIN");const D0=lo("PING_RWC_SERVER"),ja=lo("MEETING_FAILOVER"),RE=lo("LEAVE_MEETING"),Rn=lo("LEAVE_WAITING_ROOM"),Ri=lo("END_MEETING");lo("REGISTER_WEBINAR");const Qa=lo("TRIGGER_IDLE_CHECK"),{setMeetingInfo:Ko,setMeetingJoinInfo:cc,setWindownOpen:iM,setAppidSignature:Qg,setZtk:Up,setZsk:h1,setTkMtkguid:O0,setPingRwcTimestamp:YB,setInMeetingInfo:qu,setMeetingAttribute:f1,resetMeeting:DE,setIsHost:lc,setIsCohost:Vp,setMeetingIsOnHold:tm,setIsMeetingReset:nm,setAudioVideoBeforeOnHold:jp,setCurrentUserAudioBeforeReset:oM,setIsCurrentUserMutedBeforeReset:k0,setMeetingStatus:m1,setMeetingRegion:sM,setIsCurrentUserStartVideoBeforeReset:OE,setJoinMeetingTimeStamp:P0,setActiveAppInfo:g1,setMeetingIdleStartTime:Gh,setSessionIdleTimeoutMinutes:aM,setIsAudioBridgeEnabled:_1,addDiscardedRwcHost:rm,setSharePronounType:M0,setIsStayAwakeDuringTheSession:Hg,setMeetingJoinSuccessTimestamp:im,resetFailoverRecord:N0,setFailoverReason:om,setIsQuicklyLeaveMeetingAfterRefresh:v1}=Bo({SET_MEETING_INFO:i=>i,SET_MEETING_JOIN_INFO:i=>i,SET_WINDOWN_OPEN:i=>i,SET_APPID_SIGNATURE:i=>i,SET_ZTK:i=>i,SET_ZSK:i=>i,SET_TK_MTKGUID:i=>i,SET_PING_RWC_TIMESTAMP:i=>i,SET_IN_MEETING_INFO:i=>i,SET_MEETING_ATTRIBUTE:i=>{if(x4.some(u=>i&&void 0!==i[u])){let u=i;return Object.keys(rM).some(l=>void 0!==i[l])&&(u=Object.keys(i).reduce((l,h)=>{const g=rM[h];return"function"==typeof g?Object.assign(l,g(i[h])):"string"==typeof g&&(l[g]=i[h]),l},{})),u}return{}},SET_IS_HOST:i=>i&&i.bHost,SET_IS_COHOST:i=>i&&i.bCoHost,RESET_MEETING:i=>i,SET_MEETING_IS_ON_HOLD:i=>i,SET_IS_MEETING_RESET:i=>i,SET_AUDIO_VIDEO_BEFORE_ON_HOLD:i=>i,SET_CURRENT_USER_AUDIO_BEFORE_RESET:i=>i,SET_IS_CURRENT_USER_MUTED_BEFORE_RESET:i=>i,SET_MEETING_STATUS:i=>i,SET_MEETING_REGION:i=>i,SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET:i=>i,SET_JOIN_MEETING_TIME_STAMP:i=>i,SET_ACTIVE_APP_INFO:i=>i,SET_MEETING_IDLE_START_TIME:i=>i,SET_SESSION_IDLE_TIMEOUT_MINUTES:i=>i,SET_IS_AUDIO_BRIDGE_ENABLED:i=>i,ADD_DISCARDED_RWC_HOST:i=>i,SET_SHARE_PRONOUN_TYPE:i=>i,SET_IS_STAY_AWAKE_DURING_THE_SESSION:i=>i,SET_MEETING_JOIN_SUCCESS_TIMESTAMP:i=>i,RESET_FAILOVER_RECORD:i=>i,SET_FAILOVER_REASON:i=>i,SET_IS_QUICKLY_LEAVE_MEETING_AFTER_REFRESH:i=>i});let Ha=function(i){return i.Failover="failover",i.OnHold="on hold",i.Promote="promote",i.Depromote="depromote",i.JoinBreakoutRoom="join breakout room",i.MoveToBreakoutRoom="move to breakout room",i.BackToMainSession="back to main session",i}({});const Ws="js_media.min.js";let Wh=function(i){return i.CDN="CDN",i.Global="Global",i.CN="CN",i}({}),bo=function(i){return i.Connected="Connected",i.Reconnecting="Reconnecting",i.Closed="Closed",i.Fail="Fail",i}({}),Do=function(i){return i.Initial="initial",i.Joined="joined",i.Closed="closed",i}({}),kE=function(i){return i.AudioBridgeEnable="M:1,2;V:1,2",i.AudioDecodeInWorklet="M:6;V:3",i}({}),Ks=function(i){return i[i.NormalCase=-1]="NormalCase",i[i.NoHeartbeat=0]="NoHeartbeat",i[i.NoHeartbeatMChannel=1]="NoHeartbeatMChannel",i[i.NetworkChange=2]="NetworkChange",i[i.NotifyUiFailover=3]="NotifyUiFailover",i[i.InvalidParameters=4]="InvalidParameters",i[i.OnError=5]="OnError",i[i.OnErrorMChannel=6]="OnErrorMChannel",i[i.Disconnect=7]="Disconnect",i[i.DisconnectMChannel=8]="DisconnectMChannel",i[i.DisconnectXmpp=9]="DisconnectXmpp",i[i.RefreshPage=10]="RefreshPage",i}({}),Mi=function(i){return i.LocalStorage="LocalStorage",i.SessionStorage="SessionStorage",i.Memory="Memory",i}({});const cM=As("{}");class Yr{constructor(u){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=As(`zoom-storage-${u}`),this.localStorageKey=As("zoom-local-storage"),this.memoryCache={};try{this.sessionCache=JSON.parse(Bs(sessionStorage.getItem(this.sessionStorageKey)||cM)),this.localCache=JSON.parse(Bs(localStorage.getItem(this.localStorageKey)||cM))}catch(l){console.error(l),this.sessionCache={},this.localCache={}}}static init(u){this.instance=new Yr(u)}static get(u){if(void 0===this.instance)throw new Error("read before initial");return this.instance.getValue(u).value}static set(u,l,h){if(void 0===this.instance)throw new Error("set before initial");return this.instance.setValue(u,l,h)}static remove(u){if(void 0===this.instance)throw new Error("remove before initial");return this.instance.removeValue(u)}static clearSession(){if(void 0===this.instance)throw new Error("clear before initial");return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey)}getValue(u){return this.sessionCache.hasOwnProperty(u)?{value:this.sessionCache[u],type:Mi.SessionStorage}:this.localCache.hasOwnProperty(u)?{value:this.localCache[u],type:Mi.LocalStorage}:{value:this.memoryCache[u],type:Mi.Memory}}setValue(u,l,h){if(!u)throw new Error("key is null");switch(h){case Mi.SessionStorage:{const g=this.sessionCache[u];let y=l;return"function"==typeof l&&(y=l(g)),g!==y&&(this.sessionCache[u]=y,this.flushValue(Mi.SessionStorage)),y}case Mi.LocalStorage:{const g=this.localCache[u];let y=l;return"function"==typeof l&&(y=l(g)),g!==y&&(this.localCache[u]=y,this.flushValue(Mi.LocalStorage)),y}case Mi.Memory:{const g=this.memoryCache[u];let y=l;return"function"==typeof l&&(y=l(g)),this.memoryCache[u]=y,y}default:return null}}removeValue(u){const{type:l}=this.getValue(u);switch(l){case Mi.SessionStorage:delete this.sessionCache[u],this.flushValue(Mi.SessionStorage);break;case Mi.LocalStorage:delete this.localCache[u],this.flushValue(Mi.LocalStorage);break;case Mi.Memory:delete this.memoryCache[u]}}flushValue(u){u===Mi.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,As(JSON.stringify(this.sessionCache))):u===Mi.LocalStorage&&localStorage.setItem(this.localStorageKey,As(JSON.stringify(this.localCache)))}}function zo(i,u){const l=u.match(i);return l&&l.length>0&&l[1]||""}function xv(i,u){const l=u.match(i);return l&&l.length>1&&l[2]||""}Yr.instance=void 0;const kl=/version\/(\d+(\.?_?\d+)+)/i,x0=[{test:[/opera/i],describe:i=>["Opera(Legacy)",zo(kl,i)||zo(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,i)]},{test:[/opr\/|opios/i],describe:i=>["Opera",zo(/(?:opr|opios)[\s/](\S+)/i,i)||zo(kl,i)]},{test:[/SamsungBrowser/i],describe:i=>["Samsung Internet for Android",zo(kl,i)||zo(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,i)]},{test:[/micromessenger/i],describe:i=>["WeChat",zo(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,i)||zo(kl,i)]},{test:[/qqbrowser/i],describe:i=>[/qqbrowserlite/i.test(i)?"QQ Browser Lite":"QQ Browser",zo(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,i)||zo(kl,i)]},{test:[/msie|trident/i],describe:i=>["Internet Explorer",zo(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,i)]},{test:[/\sedg\//i],describe:i=>["Microsoft Edge",zo(/\sedg\/(\d+(\.?_?\d+)+)/i,i)]},{test:[/edg([ea]|ios)/i],describe:i=>["Microsoft Edge(Legacy)",xv(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,i)]},{test:[/firefox|iceweasel|fxios/i],describe:i=>["Firefox",zo(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,i)]},{test:[/electron/i],describe:i=>["Electron",zo(/(?:electron)\/(\d+(\.?_?\d+)+)/i,i)]},{test:[/chromium/i],describe:i=>["Chromium",zo(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,i)||zo(kl,i)]},{test:[/chrome|crios|crmo/i],describe:i=>["Chrome",zo(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,i)]},{test:i=>!/like android/i.test(i)&&/android/i.test(i),describe:i=>["Android Browser",zo(kl,i)]},{test:[/safari|applewebkit/i],describe:i=>["Safari",zo(kl,i)]}],lM=[{test:[/windows /i],describe:i=>["Windows",zo(/Windows ((NT|XP)( \d\d?.\d)?)/i,i)]},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:i=>["iOS",xv(/(Version\/)(\d[\d.]+)/,i)]},{test:[/macintosh/i],describe:i=>["macOS",zo(/mac os x (\d+(\.?_?\d+)+)/i,i).replace(/[_\s]/g,".")]},{test:[/(ipod|iphone|ipad)/i],describe:i=>["iOS",zo(/os (\d+([_\s]\d+)*) like mac os x/i,i).replace(/[_\s]/g,".")]},{test:i=>!/like android/i.test(i)&&/android/i.test(i),describe:i=>["Android",zo(/android[\s/-](\d+(\.\d+)*)/i,i)]},{test:[/linux/i],describe:()=>["Linux"]},{test:[/CrOS/],describe:()=>["Chrome OS"]}];class uM{constructor(){this.value=void 0,this.gpu=void 0}get isSupported(){if(void 0===this.value)if("function"==typeof window.OffscreenCanvas){const u=new OffscreenCanvas(1,1);u.addEventListener("webglcontextlost",h=>{h.preventDefault()});const l=u.getContext("webgl");if(this.value=!!l,l){const h=l.getExtension("WEBGL_debug_renderer_info");h&&(this.gpu=l.getParameter(h.UNMASKED_RENDERER_WEBGL))}}else this.value=!1;return this.value}}const dr=new class{constructor(){this._browser=void 0,this._os=void 0,this._browserVersion=void 0,this._osVersion=void 0,this._offscreenCanvasCapality=void 0,this._clientHintsData=void 0,this._offscreenCanvasCapality=new uM,"userAgentData"in navigator&&navigator.userAgentData.getHighEntropyValues(["architecture","bitness","formFactor","model","platformVersion","wow64"]).then(i=>{this._clientHintsData=i,this._os&&this._osVersion&&this._clientHintsData.platform&&this._clientHintsData.platformVersion&&(this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion)}).catch(i=>{console.warn(i)})}_getBrowserVersion(){var i,u;if(null!==(i=this._clientHintsData)&&void 0!==i&&null!==(u=i.brands)&&void 0!==u&&u.length){const l=this._clientHintsData.brands.filter(g=>!/(Chromium|Not.*Brand)/i.test(g.brand))[0];this._browser=l.brand;const h=this._clientHintsData.brands.find(g=>{var y;return"chromium"===(null===(y=g.brand)||void 0===y?void 0:y.toLowerCase())});this._browserVersion=h?h.version:l.version}else{const l=navigator.userAgent,h=x0.find(g=>"function"==typeof g.test?g.test(l):g.test.some(y=>y.test(l)));if(h){const g=h.describe(l);this._browser=g[0],this._browserVersion=g[1],this.isIOSMobile&&(this._browser="ios-safari")}else this._browser="unknown",this._browserVersion="0"}}_getOSVersion(){var i,u;if(null!==(i=this._clientHintsData)&&void 0!==i&&i.platform&&null!==(u=this._clientHintsData)&&void 0!==u&&u.platformVersion)this._os=this._clientHintsData.platform,this._osVersion=this._clientHintsData.platformVersion;else{const l=navigator.userAgent,h=lM.find(g=>"function"==typeof g.test?g.test(l):g.test.some(y=>y.test(l)));if(h){const g=h.describe(l);this._os=g[0],this._osVersion=g[1]}else this._os="unknown",this._osVersion="0"}}get browser(){return this._browser||this._getBrowserVersion(),this._browser}get browserVersion(){return this._browserVersion||this._getBrowserVersion(),this._browserVersion}get os(){return this._os||this._getOSVersion(),this._os}get osVersion(){return this._osVersion||this._getOSVersion(),this._osVersion}get isIE(){return"Internet Explorer"===this.browser}get isLegacyEdge(){return"Microsoft Edge(Legacy)"===this.browser}get isLegacyOpera(){return"Opera(Legacy)"===this.browser}get isFirefox(){return"Firefox"===this.browser}get isSafari(){return"Safari"===this.browser}get isChrome(){var i,u;if(null!==(i=this._clientHintsData)&&void 0!==i&&i.brands)return null===(u=this._clientHintsData)||void 0===u?void 0:u.brands.some(h=>{var g;return"chromium"===(null===(g=h.brand)||void 0===g?void 0:g.toLocaleLowerCase())});const{userAgent:l}=navigator;return!this.isLegacyOpera&&!this.isLegacyEdge&&/chrome/i.test(l)&&/webkit/i.test(l)}get isLegacyChrome(){var i;return this.isChrome&&"function"!=typeof(null===(i=navigator.mediaDevices)||void 0===i?void 0:i.getDisplayMedia)}get isMacOS(){return"macOS"===this.os}get isIPad(){var i;return/iPad/i.test(navigator.userAgent)||this.isMacOS&&(null===(i=navigator)||void 0===i?void 0:i.maxTouchPoints)>2}get isIOSMobile(){return"iOS"===this.os||this.isIPad}get architecture(){var i,u;return null!==(i=null===(u=this._clientHintsData)||void 0===u?void 0:u.architecture)&&void 0!==i?i:""}get isArm(){return this.architecture?"arm"===this.architecture:/arm/i.test(navigator.userAgent)}get isChromeOS(){return"Chrome OS"===this.os}get isAndroidBrowser(){var i;return"android"===(null===(i=this.os)||void 0===i?void 0:i.toLowerCase())}get isArmChromeOS(){return this.isArm&&this.isChromeOS}get isAndroidOrIOSBrowser(){return this.isAndroidBrowser||this.isIOSMobile}get isSupportEssentialAudioAndVideoAbility(){return"object"==typeof WebAssembly&&"function"==typeof Worker}get isSupportAudioWorklet(){return"function"==typeof AudioWorklet}get isSupportImageCapture(){return"ImageCapture"in window}get isSupportMediaStreamTrackProcessor(){return"MediaStreamTrackProcessor"in window}get isSupportOffscreenCanvas(){return this._offscreenCanvasCapality.isSupported}get gpu(){return this._offscreenCanvasCapality.isSupported?this._offscreenCanvasCapality.gpu:""}get bitness(){var i,u;return null!==(i=null===(u=this._clientHintsData)||void 0===u?void 0:u.bitness)&&void 0!==i?i:""}get model(){var i,u;return null!==(i=null===(u=this._clientHintsData)||void 0===u?void 0:u.model)&&void 0!==i?i:""}get wow64(){var i;if("windows"===this.os.toLowerCase())return null===(i=this._clientHintsData)||void 0===i?void 0:i.wow64}};function qo(){return dr.isAndroidOrIOSBrowser}const dM=()=>dr.isIE,L0=()=>{var i;return dr.isSupportOffscreenCanvas&&(null===(i=navigator)||void 0===i?void 0:i.hardwareConcurrency)>=4&&"function"==typeof requestAnimationFrame&&"function"==typeof SharedArrayBuffer},Gg=i=>{var u;const{isSafari:l,isIOSMobile:h,isSupportMediaStreamTrackProcessor:g,isAndroidOrIOSBrowser:y,isArmChromeOS:C,isChromeOS:w,isArm:D,isSupportOffscreenCanvas:N}=dr;if(!L0()){const L=l||h,V="function"!=typeof window.SharedArrayBuffer&&(!!L||g&&N);return i&&V?4:1}return y?4:C||w&&!D?navigator.hardwareConcurrency>=4?9:4:(null===(u=navigator)||void 0===u?void 0:u.hardwareConcurrency)<4?9:25};function B0(){var i;return"webkit"in window&&!("chrome"in window)&&!(null===(i=window.webkit.messageHandlers)||void 0===i||!i.jsOCHelper)}function PE(){var i;const{isAndroidBrowser:u,isIOSMobile:l,osVersion:h,browserVersion:g,isChrome:y,isFirefox:C,isSafari:w}=dr;var D,N;if(l)return Number(null===(D=h.match(/^\d+/))||void 0===D?void 0:D[0])>=15;if(u)return Number(null===(N=h.match(/^\d+/))||void 0===N?void 0:N[0])>=10;const L=Number(null===(i=g.match(/^\d+/))||void 0===i?void 0:i[0]);return!!(y&&L>=69)||!!(w&&L>14)||!!(C&&L>=76)}let zs=function(i){return i.VIDEO_ENCODE="0",i.VIDEO_DECODE="1",i.AUDIO_ENCODE="2",i.AUDIO_DECODE="3",i.SHARING_ENCODE="4",i.SHARING_DECODE="5",i}({}),F0=function(i){return i[i.NONE=0]="NONE",i[i.AES_256=1]="AES_256",i[i.AES_GCM=2]="AES_GCM",i}({});const Ga=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"},CHAT_FILE:{gcmType:2,sessionType:"CHAT_FILE"},CHAT_FILE_INFO:{gcmType:1,sessionType:"CHAT_FILE_INFO"}});let ro=function(i){return i.WebclientOpt="WEB_CLIENT_OPT",i.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",i.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",i.WebclientZtk="WEB_CLIENT_ZTK",i.WebclientZsk="WEB_CLIENT_ZSK",i.WebclientTk="WEB_CLIENT_TK",i.WebclientIVState="WEB_CLIENT_IV_STATE",i.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",i.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",i.WebclientZoomId="WEB_CLIENT_ZOOM_ID",i.WebclientUserName="WEB_CLIENT_USER_NAME",i.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",i.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",i.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",i.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",i.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",i.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY",i.WebclientFailoverCount="WEB_CLIENT_FAILOVER_COUNT",i.WebclientRecordingToken="WEB_CLIENT_RECORDING_TOKEN",i}({}),U0=function(i){return i.WebclientDeviceId="WEBCLIENT_DEVICE_ID",i.VSDKLogTrackingId="ZM_VSDK_LOG_TRACKING_IDS",i}({});const sm=(window.crypto||window.msCrypto).subtle,Yu=ro.WebclientIVState,pM=Object.keys(Ga).map(i=>Ga[i].sessionType);let Ia=(()=>{class i{constructor(l,h,g){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(l,h,g),Yr.set(Yu,{},Mi.SessionStorage)}static init(l,h,g){this.instance?this.instance.resetParameters(l,h,g):this.instance=new i(l,h,g)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(l,h,g){this.isGCMEnabled=!(dr.isIE||!dr.isSupportEssentialAudioAndVideoAbility)&&g===F0.AES_GCM,this.gcmSessionKey=su(h),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(l)}beginCrypto(l,h,g){const y=new Uint32Array(1);y[0]=9,y[0]+=Number(g);const C=new Uint8Array(y.buffer);let w=new Uint8Array(132);const D=su(h);return w.set(D,0),w.set(C,D.length),w=w.subarray(0,D.length+4),sm.importKey("raw",l,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then(N=>sm.sign({name:"HMAC"},N,w)).then(N=>sm.importKey("raw",N,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))}getNextIV(l){const h=Yr.get(Yu);return void 0===h[l]?(h[l]=0,Yr.set(Yu,h,Mi.SessionStorage)):Yr.set(Yu,g=>({...g,[l]:g[l]+1}),Mi.SessionStorage)}resetIVState(){const l=Yr.get(Yu);if(void 0!==l){const h=Object.keys(l).filter(g=>pM.indexOf(g)>-1);h.length>0&&(h.forEach(g=>{l[g]+=1e6}),Yr.set(Yu,l,Mi.SessionStorage))}}static resetIV(){if(void 0===this.instance)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt(l){let{text:h,type:g}=l;const y=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const D=this.instance.getNextIV(g.sessionType),N=new ArrayBuffer(12),L=new Uint8Array(N);new DataView(N).setUint32(0,D,!0);let V=null;return V="BO_BROADCAST"===g.sessionType||"XMPP_CHAT"===g.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(V,this.instance.zoomId,g.gcmType).then(G=>{const W=ArrayBuffer.isView(h)?h:(new TextEncoder).encode(h);return sm.encrypt({name:"AES-GCM",iv:L,additionalData:y,tagLength:128},G,W)}).then(G=>{const X=new ArrayBuffer(1+L.byteLength+2+y.byteLength+4+G.byteLength);if(new Uint8Array(X)[0]=L.length,new Uint8Array(X,1,L.byteLength).set(L),new DataView(X).setUint16(1+L.byteLength,y.length,!0),new Uint8Array(X,3+L.byteLength).set(y),new DataView(X).setUint32(1+L.byteLength+2+y.byteLength,G.byteLength-16,!0),new Uint8Array(X,1+L.byteLength+2+y.byteLength+4).set(new Uint8Array(G)),g.sessionType===Ga.CHAT_FILE.sessionType)return X;const ne=new Uint8Array(X).reduce((me,_e)=>me+String.fromCharCode(_e),"");return window.btoa(ne).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")})}return Promise.resolve(ArrayBuffer.isView(h)?h:As(h))}static beginDecrypt(l){let{decryptedText:h,type:g,zoomId:y}=l;if(this.instance&&this.instance.isGCMEnabled){const C=ArrayBuffer.isView(h)||h instanceof ArrayBuffer?new Uint8Array(h):function(_e){let Re;const Ne=_e.length,et=new Array(Ne);for(Re=0;Re<Ne;++Re)et[Re]=255&_e.charCodeAt(Re);return new Uint8Array(et)}(atob(h.replace(/_/g,"/").replace(/-/g,"+"))),w=C[0],D=C.slice(1,w+1),N=C.slice(1+w,3+w),L=new DataView(N.buffer).getUint16(0,!0),V=C.slice(1+w+2,1+w+2+L),G=C.slice(1+w+2+L,1+w+2+L+4),W=new DataView(G.buffer).getUint32(0,!0),X=C.slice(1+w+2+L+4,1+w+2+L+4+W),ne=C.slice(1+w+2+L+4+W);let me=null;return me="BO_BROADCAST"===g.sessionType||"XMPP_CHAT"===g.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(me,y,g.gcmType).then(_e=>{const Re=function(Ne,et){Ne=new Uint8Array(Ne),et=new Uint8Array(et);const ht=new Uint8Array(Ne.length+et.length);return ht.set(Ne),ht.set(et,Ne.length),ht}(X,ne);return sm.decrypt({name:"AES-GCM",iv:D,additionalData:V,tagLength:8*ne.length},_e,Re.buffer)}).then(_e=>({message:g.sessionType===Ga.CHAT_FILE.sessionType?_e:(new TextDecoder).decode(_e),iv:D,aad:V})).catch(_e=>({message:"[This is an encrypted message]",iv:D,aad:V}))}{const C=new TextDecoder("utf-8");return Promise.resolve({message:ArrayBuffer.isView(h)||h instanceof ArrayBuffer?h:C.decode(su(h))})}}}return i.instance=void 0,i})();const V0=20234,So=7937,uc=7938,Qp=12039,$B=16138;let Co=function(i){return i[i.NoAttendee=0]="NoAttendee",i[i.All=1]="All",i[i.AllPanelist=2]="AllPanelist",i[i.Host=3]="Host",i[i.NoOne=4]="NoOne",i[i.EveryonePublicly=5]="EveryonePublicly",i}({}),kc=function(i){return i[i.AllPanelist=1]="AllPanelist",i[i.Everyone=2]="Everyone",i[i.Invalid=0]="Invalid",i}({}),Hi=function(i){return i[i.All=0]="All",i[i.Panelist=1]="Panelist",i[i.IndividualCcPanelist=2]="IndividualCcPanelist",i[i.Individual=3]="Individual",i[i.SilentModeUsers=4]="SilentModeUsers",i}({}),Hp=function(i){return i[i.None=0]="None",i[i.Delete=1]="Delete",i[i.Modify=2]="Modify",i}({}),Kg=function(i){return i[i.Success=0]="Success",i[i.Delete=1]="Delete",i[i.Block=3]="Block",i}({});const NE=[Co.All,Co.Host,Co.NoOne,Co.EveryonePublicly],A1=[Co.NoOne,Co.All,Co.AllPanelist],Fv={AllPanelist:11,Everyone:12},y1={[Fv.AllPanelist]:kc.AllPanelist,[Fv.Everyone]:kc.Everyone},Uv={userId:Hi.All,displayName:"Everyone",isHost:!1,isCoHost:!1},zg={userId:Hi.Panelist,displayName:"All panelists"},JB={userId:Hi.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let Gp=function(i){return i[i.Local=0]="Local",i[i.ThirdParty=1]="ThirdParty",i}({}),Ts=function(i){return i[i.ChunkSize=20971520]="ChunkSize",i[i.EncodeBlockSize=32768]="EncodeBlockSize",i[i.DecodeBlockSize=32803]="DecodeBlockSize",i[i.MaxSize=2147483648]="MaxSize",i[i.ReaderChunkSize=1073741824]="ReaderChunkSize",i}({}),pa=function(i){return i[i.Init=0]="Init",i[i.InProgress=1]="InProgress",i[i.Success=2]="Success",i[i.Fail=3]="Fail",i[i.Cancel=4]="Cancel",i[i.Complete=5]="Complete",i}({}),lu=function(i){return i[i.InProgress=1]="InProgress",i[i.Success=2]="Success",i[i.Fail=3]="Fail",i[i.Cancel=4]="Cancel",i}({});const hM={"7z":"application/x-7z-compressed",avi:"video/x-msvideo",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",gif:"image/gif",gz:"application/gzip",html:"text/html",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",mid:"audio/midi",mov:"video/*",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/*",mpg:"video/*",pdf:"application/pdf",png:"image/png",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/wav",webp:"image/webp",wma:"audio/*",wmv:"video/*",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",zip:"application/zip"};let qs=function(i){return i.Open="open",i.Message="message",i.Error="error",i.Close="close",i.Inactive="inactive",i}({});class fM{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.isAlive=!1,this.eventHandlers=new Map,this.websocket=null,this.seq=1}on(u,l){let h=this.eventHandlers.get(u);h||(h=[]),h.push(l),this.eventHandlers.set(u,h)}off(u,l){const h=this.eventHandlers.get(u);if(h){const g=h.filter(y=>y!==l);this.eventHandlers.set(u,g)}}emit(u,l){const h=this.eventHandlers.get(u);h&&h instanceof Array&&h.slice(0).forEach(g=>{try{g(l)}catch(y){console.error(y)}})}sendMessageToRwg(u){this.seq+=1;const l=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(u,{seq:l}))),l}connect(u){this.websocket=new WebSocket(u),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var u;null===(u=this.websocket)||void 0===u||u.close()}addHeartBeat(){const l=setInterval(()=>{this.isAlive||this.emit(qs.Inactive,{}),this.sendMessageToRwg({evt:0}),this.isAlive=!1},dr.isAndroidOrIOSBrowser?15e3:6e4);this.intervalsToBeCleardWhenSocketClose.push(l)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach(u=>clearInterval(u)),this.isAlive=!1}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",u=>{this.addHeartBeat(),this.emit(qs.Open,u)}),this.websocket.addEventListener("message",u=>{this.isAlive=!0,this.emit(qs.Message,u)}),this.websocket.addEventListener("close",u=>{this.clearIntervals(),this.emit(qs.Close,u)}),this.websocket.addEventListener("error",u=>{this.clearIntervals(),this.emit(qs.Error,u)}))}sendLaunchParams(u){return{seq:this.sendMessageToRwg({evt:4301,body:{localRecordToken:u}})}}joinMeeting(u){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:u}})}}lockMeeting(u){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:u}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(){return{seq:this.sendMessageToRwg({evt:4103,body:{}})}}recordMeeting(u,l){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:u,bPause:l}})}}localRecordingGrantPermission(u,l,h){return{seq:this.sendMessageToRwg({evt:4343,body:{cmdType:"permission_request_answer",userId:u,agreed:l,saveAgreed:h}})}}hostGrantPermission(u,l){return{seq:this.sendMessageToRwg({evt:4343,body:{cmdType:"grant_permission",userId:u,grant:l}})}}localRecordingRequestPermission(){return{seq:this.sendMessageToRwg({evt:4343,body:{cmdType:"request_permission"}})}}localRecordingMeeting(u){return{seq:this.sendMessageToRwg({evt:4343,body:{cmdType:"change_recording_status",status:u}})}}summaryMeeting(u){return{seq:this.sendMessageToRwg({evt:8009,body:{type:u?"start":"stop"}})}}allowSelfRecord(u){return{seq:this.sendMessageToRwg({evt:4325,body:{bAllowISORecord:u}})}}enableZoomIQRecord(u){return{seq:this.sendMessageToRwg({evt:4318,body:{check:u}})}}expel(u){return{seq:this.sendMessageToRwg({evt:4107,body:{id:u}})}}expelAttendee(u){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:u}})}}rename(u,l,h){return{seq:this.sendMessageToRwg({evt:4109,body:{id:u,dn2:l,olddn2:h}})}}assignHost(u,l){return{seq:this.sendMessageToRwg({evt:4111,body:{id:u,bCoHost:l}})}}reclaimHost(u){return{seq:this.sendMessageToRwg({evt:4133,body:{id:u,bCoHost:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}})}}revokeCoHost(u){return{seq:this.sendMessageToRwg({evt:4195,body:{id:u}})}}putOnHold(u,l){return{seq:this.sendMessageToRwg({evt:4113,body:{id:u,bHold:l}})}}setMuteOnEntry(u){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:u}})}}setHoldOnEntry(u){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:u}})}}inviteCRCDevice(u,l){return{seq:this.sendMessageToRwg({evt:4119,body:{ip:u,type:l,encrypt:arguments.length>2&&void 0!==arguments[2]?arguments[2]:2}})}}cancelInviteCRCDevice(u){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:u}})}}sendCloseCaption(u){return{seq:this.sendMessageToRwg({evt:4125,body:{...u}})}}allowViewParticipantNumber(u){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:u}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(u,l){return{seq:this.sendMessageToRwg({evt:4131,body:{id:u,bOn:l}})}}chat(u,l,h,g){const y={text:u,destNodeID:l};return h&&Object.assign(y,{sn:h}),g&&Object.assign(y,{attendeeNodeID:g}),{seq:this.sendMessageToRwg({evt:4135,body:y})}}assignCC(u,l){return{seq:this.sendMessageToRwg({evt:4137,body:{id:u,bCCEditor:l}})}}enableLT(u){return{seq:this.sendMessageToRwg({evt:4227,body:{op:u?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}disableCaptions(u){return{seq:this.sendMessageToRwg({evt:4305,body:{type:4,disableNewLtt:u}})}}enableManualCaption(u){return{seq:this.sendMessageToRwg({evt:4291,body:{op:u?1:0}})}}setTranslationLanguage(u){return void 0!==u?{seq:this.sendMessageToRwg({evt:4305,body:{type:1,lang:u}})}:{seq:this.sendMessageToRwg({evt:4305,body:{type:3}})}}setSpokenLanguage(u){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:u}})}}allowAskLT(u){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:u}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(u){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:u}})}}setChatPriviledge(u){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:u}})}}setPanelistChatPrivilege(u){if(!Object.values(Fv).includes(u))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:u}})}}sendFeedback(u){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:u}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(u){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:u}})}}allowUnmuteAudio(u){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:u}})}}allowRaiseHand(u){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:u}})}}boToken(u){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:u}})}}startBO(u){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:u}})}}stopBO(u){return{seq:this.sendMessageToRwg({evt:4177,body:{status:u}})}}assignToBO(u,l){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:u,targetBID:l}})}}switchBO(u,l){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:u,targetBID:l}})}}wantJoinBO(u,l){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:u,targetBID:l}})}}joinBO(u){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:u}})}}leaveBO(){return{seq:this.sendMessageToRwg({evt:4185,body:{reason:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}broadcastBO(u){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:u}})}}askForHelpBO(u){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:u}})}}askForHelpResultBO(u,l){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:u,helpResult:l}})}}allowParticipantRename(u){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:u}})}}allowMessageFeedbackNotify(u,l){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:u,id:l}})}}setPlayChime(u,l){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:u,id:l}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(u,l,h){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:u,targetUserID:l,bBind:h}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(u,l,h,g){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:l,userID:h,clientCap:g,bPromote:u}})}}sendPromoteConsent(u,l){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:u,req_id:l}})}}batchCreateBOToken(u){const l=u.map((h,g)=>({topic:h,index:g}));return{seq:this.sendMessageToRwg({evt:4211,body:l})}}mute(u,l){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:l,id:u}})}}audioDrop(u){return{seq:this.sendMessageToRwg({evt:8195,body:{id:u}})}}audioDialout(u,l,h,g,y){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:u,dn2:As(l),bCallme:h,bPressOne:g,bGreeting:y}})}}audioCancelDialout(u,l){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:u,bCallme:l}})}}audioMuteAll(u){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:u}})}}allowToTalk(u,l){return{seq:this.sendMessageToRwg({evt:8204,body:{id:u,bAllowTalk:l}})}}subscribeVideo(){return{seq:this.sendMessageToRwg({evt:12289,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,size:arguments.length>1?arguments[1]:void 0,bOn:arguments.length>2?arguments[2]:void 0}})}}unsubscribeVideo(){return{seq:this.sendMessageToRwg({evt:12291,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}muteAttendeeVideo(u,l){return{seq:this.sendMessageToRwg({evt:12297,body:{id:u,bOn:l}})}}notifyRwgIsMuteVideo(u,l){return this.muteAttendeeVideo(u,l)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(u,l){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:u,bOn:l}})}}allowViewAll(u,l){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:u,bOn:l}})}}allowVote(u,l){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:u,bOn:l}})}}allowComment(u,l){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:u,bOn:l}})}}sharingRequestRemoteControl(u,l){return{seq:this.sendMessageToRwg({evt:16389,body:{id:u,bOn:l}})}}subscribeGrabRemoteControl(u,l){return{seq:this.sendMessageToRwg({evt:16393,body:{id:u,bOn:l}})}}subscribeSharing(u,l,h,g){const y={id:u,size:l};return h&&Object.assign(y,{bShareToBO:!0}),void 0!==g&&Object.assign(y,{bVideoShare:g}),{seq:this.sendMessageToRwg({evt:16415,body:y})}}unsubscribeSharing(u,l){const h={id:u};return l&&Object.assign(h,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16417,body:h})}}sendRWGConnectionPerformance(u){return{seq:this.sendMessageToRwg({evt:4167,body:{data:u}})}}sendSdkKeyToMonitor(u,l,h){return{seq:this.sendMessageToRwg({evt:4167,body:{data:`ZoomConferenceClient,videoapp_HTML5_sdk_web_join,${h},2,${l},${u}`}})}}sendDatachannelOffer(u){return{seq:this.sendMessageToRwg({evt:24321,offer:u})}}joinOrLeaveVoip(u){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:u}})}}startSharing(u,l){return{seq:this.sendMessageToRwg({evt:16409,body:{id:u,boOn:!1,...l??{}}})}}stopSharing(u){return{seq:this.sendMessageToRwg({evt:16409,body:{id:u,bOn:!0}})}}lockSharing(u){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:u}})}}startShareToBreakoutRoom(u){return{seq:this.sendMessageToRwg({evt:16425,body:{id:u,bShareToBO:!0}})}}stopShareToBreakoutRoom(u){return{seq:this.sendMessageToRwg({evt:16425,body:{id:u,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(u){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:u}})}}allowMultiplePin(u,l){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:u,bOn:l}})}}spotlightVideo(u,l){return{seq:this.sendMessageToRwg({evt:4219,body:{id:u,...l}})}}connectCamera(u,l){return{seq:this.sendMessageToRwg({evt:12307,body:{id:u,bOn:l}})}}followHostLayout(u){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:u}})}}setVideoDragLayout(u){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:u}})}}chatCmdReq(u,l){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:u,cmd:l}})}}activeAppLinkReq(u){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:u}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(u){return{seq:this.sendMessageToRwg({evt:16423,body:{bOn:!0,bShareAudio:!u}})}}localMuteAudio(u,l){return{seq:this.sendMessageToRwg({evt:8209,body:{id:u,bMute:l}})}}changeSharePronoun(u,l){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:u,strPronoun:l}})}}sendReceivingSharingReady(u){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:u}})}}sendManualCaption(u){return{seq:this.sendMessageToRwg({evt:4289,body:{...u}})}}sendPollingAction(u,l,h){return{seq:this.sendMessageToRwg({evt:4224,body:{action:u,PollingId:l,...h}})}}broadcastUserNetworkQuality(u){return{seq:this.sendMessageToRwg({evt:4331,body:{type:u.isUplink,level:u.level,bwLevel:u.bwLevel}})}}sendFarEndCameraControl(u,l,h){return{seq:this.sendMessageToRwg({evt:4329,body:{cmd:u,userID:l,buttonID:h}})}}sendCameraAblity(u){return{seq:this.sendMessageToRwg({evt:4330,body:{...u,focus:!1}})}}sendReaction(u){return{seq:this.sendMessageToRwg({evt:4259,body:{...u}})}}remoteControlConsent(u,l,h,g){let y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{deviceId:C,...w}=g;return{seq:this.sendMessageToRwg({evt:16427,body:{DeviceID:C,op:u,SendUserID:h,AssignUserID:l,...w,bAutoDelete:y}})}}takeBackRemoteControlPermission(u,l){return{seq:this.sendMessageToRwg({evt:16431,body:{SendUserID:u,ReceiverUserID:l}})}}syncSharedContentMetaWithRcApp(u){const{deviceId:l,...h}=u;return{seq:this.sendMessageToRwg({evt:16429,body:{DeviceID:l,...h}})}}startLiveStream(u,l,h){return{seq:this.sendMessageToRwg({evt:7977,body:{action:1,streamingURL:u,streamingKey:l,broadcastURL:h}})}}stopLiveStream(){return{seq:this.sendMessageToRwg({evt:7977,body:{action:0}})}}sendRemoteControlAuth(u){return{seq:this.sendMessageToRwg({evt:16433,body:{auth:u}})}}chatFileTransfer(u){return{seq:this.sendMessageToRwg({evt:4307,body:{...u,fileType:0,receiverType:0}})}}}let kr=(()=>{class i extends fM{static createAgent(){return this.rwgInstance||(this.rwgInstance=new i),this.rwgInstance}}return i.rwgInstance=null,i})(),j0=(()=>{class i extends fM{static getInstance(){return this.instance||(this.instance=new i),this.instance}}return i.instance=null,i})();const H0=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"js_audio_worklet_simd.min.js",category:"audio",type:"worklet",tag:"simd",alias:"audioWorkletSIMDPath"},{name:"js_audio_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletProcessPath"},{name:"js_sharing_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"sharingAudioWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"video_share_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"vsmiworkerpath"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"}],am=(i,u)=>H0.reduce((l,h)=>{const{name:g,alias:y}=h;return Object.assign(l,{[`${y}`]:`${i}/${u?"1504_":""}${g}`}),l},{});let ys=function(i){return i.VideoEncode="0",i.VideoDecode="1",i.AudioEncode="2",i.AudioDecode="3",i.SharingEncode="4",i.SharingDecode="5",i}({});const Wd=ro.WebclientIVState;let Qr=(()=>{class i{static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new i),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.mediaSocketAddress=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}init(l){if(!this.instance&&window.JsMediaSDK_Instance){const h={ivObj:{[zs.AUDIO_ENCODE]:Yr.get(Wd)&&Yr.get(Wd)[zs.AUDIO_ENCODE],[zs.VIDEO_ENCODE]:Yr.get(Wd)&&Yr.get(Wd)[zs.VIDEO_ENCODE],[zs.SHARING_ENCODE]:Yr.get(Wd)&&Yr.get(Wd)[zs.SHARING_ENCODE]},globalTracingLogger:l};this.instance=new window.JsMediaSDK_Instance(h),this.instance.setRWGAgent(kr.createAgent())}}setAssetsAndConstraint(l,h,g,y){var C;this.assetsPath=l,this.constraints=h,this.mediaWorkersPath=am(this.assetsPath,!!g),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=y,null===(C=this.instance)||void 0===C||C.JsMediaSDK_PreLoad(this.mediaWorkersPath,this.onMediaSDKCallback,y)}onMediaSDKCallback(l,h){this.callbackList.length>0&&this.callbackList.forEach(g=>g(l,h))}registerCallback(l){this.callbackList.push(l)}unregisterCallback(l){this.callbackList=this.callbackList.filter(h=>h!==l)}static isSupportVideoEncodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return window.JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){var l;return dr.isSupportOffscreenCanvas&&0==(null===(l=window.JsMediaSDK_Instance)||void 0===l?void 0:l.util.AdapterWhiteListCheckForEncoder())}static getPTZCapability(){var l,h,g,y,C,w,D,N,L;return{pan:!(null===(l=window.JsMediaSDK_Instance)||void 0===l||null===(h=l.util)||void 0===h||null===(g=h.isSupportCameraPan)||void 0===g||!g.call(h)),tilt:!(null===(y=window.JsMediaSDK_Instance)||void 0===y||null===(C=y.util)||void 0===C||null===(w=C.isSupportCameraTilt)||void 0===w||!w.call(C)),zoom:!(null===(D=window.JsMediaSDK_Instance)||void 0===D||null===(N=D.util)||void 0===N||null===(L=N.isSupportCameraZoom)||void 0===L||!L.call(N))}}static isSupportVideoShare(){var l,h,g;return!(null===(l=window.JsMediaSDK_Instance)||void 0===l||null===(h=l.util)||void 0===h||null===(g=h.isSupportVideoShareReceive)||void 0===g||!g.call(h))}static isSupportVideoShareSend(){var l,h,g;return!(null===(l=window.JsMediaSDK_Instance)||void 0===l||null===(h=l.util)||void 0===h||null===(g=h.isSupportVideoShareSend)||void 0===g||!g.call(h))}static isSupportSending720P(){var l,h;return!(null===(l=window.JsMediaSDK_Instance)||void 0===l||null===(h=l.util)||void 0===h||!h.get720pcapacity())}static isSupportSubscribing1080P(){var l,h;return!(null===(l=window.JsMediaSDK_Instance)||void 0===l||null===(h=l.util)||void 0===h||!h.getsub1080pcapacity())}static isSupportOpenMicWhenShareAudio(){var l;return!(null===(l=window.JsMediaSDK_Instance)||void 0===l||!l.util.isSupportOpenMicWhenShareAudio())}static isSupportMediaPlaybackAsVideoInput(){var l,h;return!(null===(l=window.JsMediaSDK_Instance)||void 0===l||null===(h=l.util.videoToMediaStreamManager)||void 0===h||!h.isSupported())}static isSupportMediaPlaybackAsAudioInput(){var l,h;return!(null===(l=window.JsMediaSDK_Instance)||void 0===l||null===(h=l.util.audioToMediaStreamMananger)||void 0===h||!h.isSupported())}static isSupportAudioDenoise(){var l;return!(null===(l=window.JsMediaSDK_Instance)||void 0===l||!l.util.isSupportAudioDenoise())}static isSupportAudioBridgeAVSync(){var l;return!(null===(l=window.JsMediaSDK_Instance)||void 0===l||!l.util.isSupportAudioBridgeAvsync())}static getAudioFeatureFlag(){var l;return null===(l=window.JsMediaSDK_Instance)||void 0===l?void 0:l.util.getAudioFeatureFlags()}static isSupportShareMultiStream(){var l;return null===(l=window.JsMediaSDK_Instance)||void 0===l?void 0:l.util.isSupportShareMultiStream()}static isSupportVideoLTR(){var l;return null===(l=window.JsMediaSDK_Instance)||void 0===l?void 0:l.util.isSupportVideoLTR()}connect(l){var h,g,y,C,w,D;let{svcUrl:N,meetingNumber:L,conId:V,e2eEncrypt:G,isViewOnly:W,currentUserId:X,isWebinar:ne,enableAudioQos:me,enableVideoQos:_e=!1,enableWebtransport:Re=!1,webtransportPort:Ne}=l;const{isSupportEssentialAudioAndVideoAbility:et,isAndroidOrIOSBrowser:ht,isSupportAudioWorklet:ze}=dr;this.svcUrl=N,this.meetingNumber=L,this.confId=V;const Qe={videoSocketAddress:`wss://${en=N}/wc/media/${rn=L}?type=v&cid=${on=V}`,audioSocketAddress:`wss://${en}/wc/media/${rn}?type=a&cid=${on}`,sharingSocketAddress:`wss://${en}/wc/media/${rn}?type=${dM()?"j":"s"}&cid=${on}`};var en,rn,on;this.mediaSocketAddress=Qe,this.currentUserId=X;const wt=Gg(null===(h=this.mediaOptions)||void 0===h?void 0:h.enableMultiDecodeVideoWithoutSAB);var Xt,_t,it,Ce,Ye,Ge,ut,mt,St,Wt;null===(g=this.instance)||void 0===g||g.setPropsBeforeInit({callback:this.onMediaSDKCallback,audioWorkerPath:et?null===(y=this.mediaWorkersPath)||void 0===y?void 0:y.audioWorkletPath:void 0,e2eEncrypt:G,isEnableListenInitEvent:!0,enableWebtransport:Re,webtransportPort:Ne}),!0===(null===(C=this.constraints)||void 0===C?void 0:C.audio)&&et&&!ht&&((ne||ze)&&(null===(Xt=this.instance)||void 0===Xt||Xt.initAudioDecode(this.mediaWorkersPath,Qe.audioSocketAddress,X,Vh,V,L,wt,me)),!ze||ne&&W||null===(_t=this.instance)||void 0===_t||_t.initAudioEncode(this.mediaWorkersPath,Qe.audioSocketAddress,X,Vh,V,L,wt,me)),!0===(null===(w=this.constraints)||void 0===w?void 0:w.video)&&et&&(null===(it=this.instance)||void 0===it||it.initVideoDecode(this.mediaWorkersPath,Qe.videoSocketAddress,X,Vh,V,L,wt,null===(Ce=null===(Ye=window.JsMediaSDK_Instance)||void 0===Ye||null===(Ge=Ye.util)||void 0===Ge?void 0:Ge.isGraphicShouldUseHardwareAccelerationDecode())||void 0===Ce||Ce,_e),ne&&W||null===(ut=this.instance)||void 0===ut||ut.initVideoEncode(this.mediaWorkersPath,Qe.videoSocketAddress,X,Vh,V,L,wt,!1,_e,!0,!0)),!0===(null===(D=this.constraints)||void 0===D?void 0:D.screen)&&(et?(null===(mt=this.instance)||void 0===mt||mt.initSharingDecode(this.mediaWorkersPath,Qe.sharingSocketAddress,X,Vh,V,L,wt),ne&&W||null===(St=this.instance)||void 0===St||St.initSharingEncode(this.mediaWorkersPath,Qe.sharingSocketAddress,X,Vh,V,L,wt)):null===(Wt=this.instance)||void 0===Wt||Wt.initSharingDecode(Qe.sharingSocketAddress)),this.inProgress=!0}destroy(){var l;null===(l=this.instance)||void 0===l||l.destroy(),this.instance=null,this.callbackList=[],[ys.AudioDecode,ys.AudioEncode,ys.VideoDecode,ys.VideoEncode].forEach(h=>{var g;null===(g=this.instance)||void 0===g||g.updateQosSubscription(!1,h)}),this.inProgress=!1}disconnect(){var l,h;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(17,{}),null===(h=this.instance)||void 0===h||h.JsMediaSDK_UnInit()}muteAudio(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(l,h,g,y,C,w,D){var N;const L=D?{...D,enableHID:!0}:{enableHID:!1};return null===(N=this.instance)||void 0===N?void 0:N.Notify_MeidaSDK(22,{CaptureAudio:y,CaptureAudioInfo:{ssrc:l,AudioSelectValue:"default"===h?null:h,...L},speakerInfo:{defaultDeviceId:g},denoiseSwitch:!!w,...C?{useAudioBridge:!0,audioBridge:C}:{}})}leaveComputerAudio(){var l;return null===(l=this.instance)||void 0===l?void 0:l.Notify_MeidaSDK(21,null)}joinSharingAudio(l){var h;let{ssrc:g,microphoneDeviceId:y,speakerDeviceId:C,isCaptureAudio:w}=l;return null===(h=this.instance)||void 0===h?void 0:h.Notify_MeidaSDK(72,{CaptureAudio:w,CaptureAudioInfo:{ssrc:g,AudioSelectValue:"default"===y?null:y},speakerInfo:{defaultDeviceId:C},checkAutoplay:!1})}leaveSharingAudio(l){var h;return null===(h=this.instance)||void 0===h?void 0:h.Notify_MeidaSDK(73,{isPause:l?1:0})}changeSpeaker(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:l})}changeMicrophone(l,h,g){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:"default"===l?null:l,microphoneLabel:h??"default",defaultMuted:g})}restoreWebRTC(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:"default"===l?null:l})}renderVideo(l,h,g,y,C,w,D,N,L,V,G){var W;null===(W=this.instance)||void 0===W||W.Notify_MeidaSDK(1,{userId:h,width:y,height:C,x:w,y:D,quality:N,isMyself:L,canvas:l,enableWaterMark:G,waterMarkText:V,zone:g})}stopRenderVideo(l,h,g,y){var C;null===(C=this.instance)||void 0===C||C.Notify_MeidaSDK(2,{canvas:l,userId:h,RGBA:y,doNotClean:arguments.length>4&&void 0!==arguments[4]&&arguments[4],zone:g})}startCaptureVideo(l,h,g,y,C,w){var D;let N=arguments.length>6&&void 0!==arguments[6]&&arguments[6],L=arguments.length>8?arguments[8]:void 0;const V=arguments.length>7&&arguments[7]?i.getPTZCapability():void 0;null===(D=this.instance)||void 0===D||D.Notify_MeidaSDK(3,{ssid:l,width:g,height:y,fps:L,video:C,usingFacingMode:w,VideoSelectValue:"default"===h?null:h,disableOriginalRatio:N,...V})}stopCaptureVideo(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(l,h){var g;null===(g=this.instance)||void 0===g||g.Notify_MeidaSDK(12,{VideoSelectValue:"default"===l?null:l,...h||{}})}switchCanvasForVideoCapture(l){var h;let g=l;Array.isArray(l)||(g=[l]),null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(25,g)}renderSharing(l,h){var g;let y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.receivedSharingCanvas=h,null===(g=this.instance)||void 0===g||g.Notify_MeidaSDK(23,{width:0,height:0,ssrc:l,canvas:h,enableWaterMark:y,waterMarkText:C,isFromMainSession:w})}stopRenderSharing(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(24,{})}switchSharingSource(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(36,{ssrc:l,isFromMainSession:Number(arguments.length>1&&void 0!==arguments[1]&&arguments[1])})}ajustmentReceivedSharingCanvas(l,h){if(this.receivedSharingCanvas)try{this.receivedSharingCanvas.width=l,this.receivedSharingCanvas.height=h}catch{}}startRemoteControl(l,h,g){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(26,{socketURL:`wss://${this.svcUrl}`,meetingID:this.meetingNumber,condID:this.confId,os:h,dom:l,...g})}stopRemoteControl(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(41)}updateRemoteControlProperties(l){var h;const{dimension:g,...y}=l;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(27,{...g,...y})}startDesktopSharing(l,h,g,y){var C;let w=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],D=arguments.length>5?arguments[5]:void 0,N=arguments.length>6?arguments[6]:void 0,L=arguments.length>7?arguments[7]:void 0;this.sharingCanvas=document.querySelector(`#${h}`);const V={};y&&Object.assign(V,{share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:"default"===y.cameraId?null:y.cameraId,width:y.width,height:y.height}}),void 0!==D&&Object.assign(V,{videoParams:{displaySurface:D}}),void 0!==L&&Object.assign(V,{otherParams:{...L}}),null===(C=this.instance)||void 0===C||C.Notify_MeidaSDK(30,{ssid:l,canvas:h,video:g,...V,showShareAudioOption:w,sourceId:N})}stopDesktopSharing(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(32,{})}resumeDesktopSharing(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(57,{lang:l})}changeSharingSecondCamera(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(49,{VideoSelectValue:l})}ajustmentSharingCanvas(l,h){if(this.sharingCanvas)try{this.sharingCanvas.width=l,this.sharingCanvas.height=h}catch{}}checkChromeSharingExtension(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(34,{})}enableAudioEncode(){var l,h;null===(l=this.instance)||void 0===l||l.initAudioEncode(this.mediaWorkersPath,this.mediaSocketAddress.audioSocketAddress,this.currentUserId,Vh,this.confId,this.meetingNumber,Gg(null===(h=this.mediaOptions)||void 0===h?void 0:h.enableMultiDecodeVideoWithoutSAB))}sendUserNodeList(l,h){var g;null===(g=this.instance)||void 0===g||g.Notify_MeidaSDK(43,{userList:l,encryptKey:h})}updateRenderedSharingDimension(l,h){var g;null===(g=this.instance)||void 0===g||g.Notify_MeidaSDK(44,{width:l,height:h})}pauseOrResumeAudio(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(45,{bPause:l})}updateRenderedVideoCanvasDimension(l,h,g){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(46,{canvas:l,width:h,height:g})}clearVideoCanvas(l,h){var g;null===(g=this.instance)||void 0===g||g.Notify_MeidaSDK(47,{id:l,RGBA:h})}adjustRenderedVideoPosition(l,h,g,y,C,w,D,N){var L;null===(L=this.instance)||void 0===L||L.Notify_MeidaSDK(48,{userId:h,x:y,y:C,width:w,height:D,canvas:l,zone:g,RGBA:N})}mirrorVideo(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(75,{isMirrorMyVideo:l})}updateUserMediaSN(l){var h,g,y;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(80,{isFromMainSession:Number(l.isFromMainSession),mediaActionType:l.iVType,body:{add:null!==(g=l.added)&&void 0!==g?g:[],remove:null!==(y=l.removed)&&void 0!==y?y:[]}})}updateMediaParams(l){var h;const{iVType:g,isFromMainSession:y,updateParams:C}=l;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(81,{mediaActionType:g,isFromMainSession:Number(y),updateParams:C})}createMainSessionChannel(l,h){var g,y;"sharing"===l?null===(g=this.instance)||void 0===g||g.Notify_MeidaSDK(84,h):null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(85,h)}addReceivedSharingChannelType(l){var h;const{isFromMainSession:g,...y}=l;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(82,{isFromMainSession:Number(g),...y})}removeReceivedSharingChannelType(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(83,{isFromMainSession:Number(l.isFromMainSession),ssrc:l.ssrc})}enableHardwareAccelerationForVideoDecode(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(70,{enable:l})}enableHardwareAccelerationForVideoEncode(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(71,{enable:l})}setSharingAudioVolume(l,h,g){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(74,{userid:l>>10,shareVolume:h?0:100,isFromMainSession:g})}subscribeToQos(l,h){l.forEach(g=>{var y;null===(y=this.instance)||void 0===y||y.updateQosSubscription(!0,g,h)})}unsubscribeFromQos(l){l.forEach(h=>{var g;null===(g=this.instance)||void 0===g||g.updateQosSubscription(!1,h)})}passThroughRWGMessage(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(40,l)}startVirtualBackgroundSetting(l,h,g,y,C,w){var D;null===(D=this.instance)||void 0===D||D.Notify_MeidaSDK(91,{canvas:l,bgdom:h,width:C,height:w,ssid:g,VideoSelectValue:"default"===y?null:y,disableOriginalRatio:arguments.length>6&&void 0!==arguments[6]&&arguments[6]})}updateVirtualBackgroundImage(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(92,{bgdom:l})}stopVirtualBackgroundSetting(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(93,{isSwitch:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})}startMaskSetting(l,h,g,y,C,w,D,N,L){var V;null===(V=this.instance)||void 0===V||V.Notify_MeidaSDK(62,{canvas:l,maskdom:g,bgdom:h,dx:0,dy:0,dWidth:w,dHeight:D,width:N,height:L,ssid:y,VideoSelectValue:"default"===C?null:C})}updateMaskBackgroundImage(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(63,{bgdom:l})}updateMaskClip(l,h,g){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(64,{maskdom:l,dx:0,dy:0,dWidth:h,dHeight:g})}stopMaskSetting(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(65,{isSwitch:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})}enableVideoObserver(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(99,{enable:l,fpsdisbale:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}enableShareAudioToBreakoutRoom(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(86,{enable:l})}sendUserAudioStatus(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(51,l)}muteOrUnmuteOtherAudio(l,h){var g;null===(g=this.instance)||void 0===g||g.Notify_MeidaSDK(50,{userId:l,volume:h?0:100})}adjustOtherAudioVolume(l,h){var g;null===(g=this.instance)||void 0===g||g.Notify_MeidaSDK(50,{userId:l,volume:h})}notifySDKMeetingReady(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(113)}movePTZCamera(l){var h,g;return null===(h=window.JsMediaSDK_Instance)||void 0===h||null===(g=h.util)||void 0===g?void 0:g.queryPTZPermisson().then(y=>{var C;return y?(null===(C=this.instance)||void 0===C||C.Notify_MeidaSDK(53,l),Promise.resolve("")):Promise.reject("Cannot move camera without permission granted")})}switchSharingMode(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(101,{mode:l})}updateVideoHDValue(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK("update_videohd_value",{videohd:l})}enableAudioDenoise(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(121,{switch:l})}enableSyncButtonsOnHeadset(l,h,g){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(100,{enable:l,microphoneLabel:h,defaultMuted:g})}stopAllIncomingAudio(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(123,l)}isSharingEntireScreen(){var l,h;const g=null===(l=this.instance)||void 0===l||null===(h=l.getShareStreamInfo)||void 0===h?void 0:h.call(l);if(g){const{displaySurface:y}=g;return!y||"monitor"===y}return!1}getShareStreamInfo(){var l,h;const g=null===(l=this.instance)||void 0===l||null===(h=l.getShareStreamInfo)||void 0===h?void 0:h.call(l);if(g){const{deviceId:y,width:C,height:w}=g;return{deviceId:y,width:C,height:w}}return{}}preInitAudioBridge(l){var h;null===(h=this.instance)||void 0===h||h.previewInit({audioBridge:{...l}})}prefetchVideoSsrc(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(110,{ssrc:l})}cancelPrefetchVideoSsrc(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(112,{ssrc:l,haddata:!1})}setMobileRotateMode(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(124,{isLandScape:l})}changeActiveVideoSsrc(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(13,{ssrc:l})}setAudioCodecMode(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(122,{mode:l})}startRemoteControlQRCheck(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(54,{enable:l})}}return i.agentInstance=void 0,i})();const cm="ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",wa="UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",XB="ADD_USER_PARTICIPANT_ATTRIBUTE",Wp="UPDATE_USER_PARTICIPANT_ATTRIBUTE",Qn="REMOVE_USER_PARTICIPANT_ATTRIBUTE",lm="UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",ZB="REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE",mM="JOIN_MEETING_SUCCESS",Ta="JOIN_MEETING_FAILED",nl="RECONNECTING_MEETING",qg="LEAVING_MEETING",E1="MEETING_IN_WAITING_ROOM",Yg="UPDATE_MEETING_ATTRIBUTE",eF="SHARE_PRONOUN_TYPE_UPDATE";var uu=function(i){return i.ConnectionChange="connection-change",i.OnHoldChange="on-hold-change",i.UserAdd="user-added",i.UserUpdate="user-updated",i.UserRemove="user-removed",i.AttendeeUpdate="attendee-updated",i.MeetingAttributeUpdate="meeting-attribute-updated",i.PromoteAttendeeConsent="promote-attendee-consent",i.ActiveAppsUpdate="active-apps-updated",i.SharePronounTypeUpdate="share-pronoun-type-update",i}(uu||{});const Yo={JoinMeeting:{success:cm,fail:[Ta]}},b1={[uu.ConnectionChange]:[{event:mM,payload:()=>({state:bo.Connected})},{event:Ta,payload:i=>({state:bo.Fail,...i})},{event:nl,payload:i=>({state:bo.Reconnecting,...i})},{event:qg,payload:i=>({state:bo.Closed,...i})}],[uu.OnHoldChange]:[{event:E1,payload:i=>({isOnHold:i})}],[uu.UserAdd]:[{event:cm,payload:i=>[i]},{event:XB,payload:i=>i}],[uu.UserUpdate]:[{event:wa,payload:i=>[i]},{event:Wp,payload:i=>i}],[uu.UserRemove]:[{event:Qn,payload:i=>i}],[uu.AttendeeUpdate]:[{event:lm,payload:i=>i},{event:ZB,payload:i=>i}],[uu.MeetingAttributeUpdate]:[{event:Yg,payload:i=>"bNoHostTimeOut"in i?{isHostLost:i.bNoHostTimeOut}:null}],[uu.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:i=>{let{req_id:u,sender_id:l}=i;return{reqId:u,senderId:l}}}],[uu.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[uu.SharePronounTypeUpdate]:[{event:eF,payload:i=>i}]},dc="LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",$u="LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",S1="LIVE_TRANSCRIPTION_STATUS_CHANGE",Pc="LIVE_TRANSCRIPTION_HOST_DISABLE_CHANGE",um={"caption-message":[{event:dc,payload:i=>i}],"caption-status":[{event:$u,payload:i=>i}],"caption-enable":[{event:S1,payload:i=>i}],"caption-host-disable":[{event:Pc,payload:i=>i}]},dm="CHAT_RECEIVE_MESSAGE_EVENTS",zh="CHAT_PRIVILEGE_CHANGE",pm="CHAT_MESSAGE_RESPONSE",qh="CHAT_DELETE_MESSAGE_REPONSE",$g="CHAT_FILE_CHAT_UPLOAD_PROGRESS",G0="CHAT_FILE_CHAT_DOWNLOAD_PROGRESS";let W0=function(i){return i.ChatOnMessage="chat-on-message",i.ChatPrivilegeChange="chat-privilege-change",i.ChatDeleteMessage="chat-delete-message",i.ChatFileUploadProgress="chat-file-upload-progress",i.ChatFileDownloadProgress="chat-file-download-progress",i}({});const tF={[W0.ChatOnMessage]:[{event:dm,payload:i=>i}],[W0.ChatPrivilegeChange]:[{event:zh,payload:i=>i}],[W0.ChatDeleteMessage]:[{event:qh,payload:i=>i}],[W0.ChatFileUploadProgress]:[{event:$g,payload:i=>i}],[W0.ChatFileDownloadProgress]:[{event:G0,payload:i=>i}]},C1="COMMAND_RECEIVE_MESSAGE_EVENTS",rl="COMMAND_STATUS_EVENTS";let xE=function(i){return i.CommandChannelStatus="command-channel-status",i.CommandChannelMessage="command-channel-message",i}({});const hm={[xE.CommandChannelStatus]:[{event:rl,payload:i=>i}],[xE.CommandChannelMessage]:[{event:C1,payload:i=>i}]};let Kd=function(i){return i.Recording="Recording",i.Paused="Paused",i.Stopped="Stopped",i.Ask="Ask",i.Accept="Accept",i.Decline="Decline",i}({}),Ys=function(i){return i[i.None=0]="None",i[i.Init=1]="Init",i[i.Start=2]="Start",i[i.Pause=3]="Pause",i[i.Stop=4]="Stop",i}({}),Vv=function(i){return i[i.Stop=0]="Stop",i[i.Start=1]="Start",i[i.Pause=2]="Pause",i}({}),pc=function(i){return i[i.None=0]="None",i[i.Deny=1]="Deny",i[i.Allow=2]="Allow",i}({}),nF=function(i){return i[i.None=0]="None",i[i.DenyAllRequest=1]="DenyAllRequest",i[i.AllowAllRequest=2]="AllowAllRequest",i}({});const Jg="CLOUD_RECORDING_STATUS_CHANGE",K0="CLOUD_RECORDING_ISO_STATUS_CHANGE",z0="LOCAL_RECORDING_CHANGE",il="LOCAL_RECORDING_PERMISSION_CHANGE",jv="RECORDING_FOR_IQ_STATUS_CHANGE",q0="RECORDING_FOR_IQ_OPERATION_CHANGE";let Fs=function(i){return i.RecordingChange="recording-change",i.IndividualRecordingChange="individual-recording-change",i.LocalRecordingChange="local-recording-change",i.LocalRecordingPermissionChange="local-recording-permission-change",i.MediaCaptureStatusChange="media-capture-status-change",i.MediaCapturePermissionChange="media-capture-permission-change",i.RecordingIqChange="recording-iq-change",i}({});const I1={[Fs.RecordingChange]:[{event:Jg,payload:i=>{const{cmrServerStatus:u}=i;return u===Ys.Start?Kd.Recording:u===Ys.Pause?Kd.Paused:Kd.Stopped}}],[Fs.IndividualRecordingChange]:[{event:K0,payload:i=>i}],[Fs.LocalRecordingChange]:[{event:z0,payload:i=>i}],[Fs.LocalRecordingPermissionChange]:[{event:il,payload:i=>i}],[Fs.MediaCaptureStatusChange]:[{event:z0,payload:i=>i}],[Fs.MediaCapturePermissionChange]:[{event:il,payload:i=>i}],[Fs.RecordingIqChange]:[{event:jv,payload:i=>i}]};let Cn=function(i){return i[i.InitSuccess=1]="InitSuccess",i[i.InitSuccessVideo=1.1]="InitSuccessVideo",i[i.InitSuccessAudio=1.2]="InitSuccessAudio",i[i.InitSuccessSharing=1.3]="InitSuccessSharing",i[i.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",i[i.CurrentVideoResolution=3]="CurrentVideoResolution",i[i.JpegDecThreadOk=4]="JpegDecThreadOk",i[i.JpegData=5]="JpegData",i[i.SharingPara=6]="SharingPara",i[i.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",i[i.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",i[i.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",i[i.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",i[i.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",i[i.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",i[i.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",i[i.MonitorLog=14]="MonitorLog",i[i.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",i[i.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",i[i.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",i[i.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",i[i.DataChannelOffer=19]="DataChannelOffer",i[i.AesGcmIvResponse=21]="AesGcmIvResponse",i[i.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",i[i.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",i[i.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",i[i.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",i[i.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",i[i.HidStatusMute=28]="HidStatusMute",i[i.AudioStreamFailed=31]="AudioStreamFailed",i[i.VideoStreamFailed=32]="VideoStreamFailed",i[i.SendRemoteControlQrCode=55]="SendRemoteControlQrCode",i[i.StartVideoStreamInMaskSettingSuccess=66]="StartVideoStreamInMaskSettingSuccess",i[i.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",i[i.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",i[i.VbModelPreloading_3S=96]="VbModelPreloading_3S",i[i.VbModelPreloading_10S=97]="VbModelPreloading_10S",i[i.VbModelPreloadingOk=98]="VbModelPreloadingOk",i[i.NewActiveSpeakerFirstFrameCallback=111]="NewActiveSpeakerFirstFrameCallback",i[i.AudioBridgeFirstRecvData=114]="AudioBridgeFirstRecvData",i[i.AudioBridgeCanSendData=115]="AudioBridgeCanSendData",i[i.InitFailed=-1]="InitFailed",i[i.InitFailedVideo=-1.1]="InitFailedVideo",i[i.InitFailedAudio=-1.2]="InitFailedAudio",i[i.InitFailedSharing=-1.3]="InitFailedSharing",i[i.UserForbiddedCaptureAudio=-2]="UserForbiddedCaptureAudio",i[i.AudioWebsocketBroken=-3]="AudioWebsocketBroken",i[i.VideoWebsocketBroken=-4]="VideoWebsocketBroken",i[i.SharingDecThreadFailed=-5]="SharingDecThreadFailed",i[i.AudioZeroData=-6]="AudioZeroData",i[i.AudioCtxSamplerate=-7]="AudioCtxSamplerate",i[i.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",i[i.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",i[i.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",i[i.StartRemoteControlFailed=-11]="StartRemoteControlFailed",i[i.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",i[i.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",i[i.UserStopDesktopSharing=-15]="UserStopDesktopSharing",i[i.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",i[i.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",i[i.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",i[i.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",i[i.DesktopSharingError=-20]="DesktopSharingError",i[i.AudioSpeakerSetError=-21]="AudioSpeakerSetError",i[i.DesktopSharingSystemError=-22]="DesktopSharingSystemError",i[i.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",i.AudioQosData="AUDIO_QOS_DATA",i.VideoQosData="VIDEO_QOS_DATA",i.ShareQosData="VIDEOSHARE_QOS_DATA",i.NetworkQualityChange="NETWORK_QUALITY_CHANGE",i[i.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",i[i.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",i[i.MaskSettingParaError=-33]="MaskSettingParaError",i[i.VbSettingParaError=-34]="VbSettingParaError",i[i.NotifyUIFailover=-35]="NotifyUIFailover",i[i.RecoverWebrtcAudio=-36]="RecoverWebrtcAudio",i}({}),ns=function(i){return i[i.EncodeSuccess=1]="EncodeSuccess",i[i.DecodeSuccess=2]="DecodeSuccess",i[i.EncodeFailed=-1]="EncodeFailed",i[i.DecodeFailed=-2]="DecodeFailed",i}({}),Kp=function(i){return i.Spotlight="Spotlight",i.Unmute="Unmute",i.AllowToTalk="Allow to talk",i}({}),Es=function(i){return i.Inherited="inherited",i.Active="active",i.PassiveByMuteOne="passive(mute one)",i.PassiveByMuteAll="passive(mute all)",i.SharingAudio="sharing audio",i}({}),Ju=function(i){return i.Inherited="inherited",i.Active="active",i.Passive="passive",i.SharingAudio="sharing audio",i}({}),fm=function(i){return i.Join="join",i.Leave="leave",i.Muted="muted",i.Unmuted="unmuted",i}({}),du=function(i){return i[i.Calling=1]="Calling",i[i.Ringing=2]="Ringing",i[i.Accepted=3]="Accepted",i[i.Busy=4]="Busy",i[i.NotAvailable=5]="NotAvailable",i[i.HangUp=6]="HangUp",i[i.Fail=7]="Fail",i[i.Success=8]="Success",i[i.Timeout=9]="Timeout",i[i.Canceling=10]="Canceling",i[i.Canceled=11]="Canceled",i[i.CancelFailed=12]="CancelFailed",i}({});const w1=(()=>{const i=new ArrayBuffer(684),u=new Uint32Array(i);return u.set([1179011410,676,1163280727,544501094,16,65539,16e3,64e3,2097156,1635017060,640],0),new Blob([u],{type:"audio/wav"})})(),zd=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),LE=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let pu=function(i){return i[i.HostGrab=0]="HostGrab",i[i.OnlyHost=1]="OnlyHost",i[i.AnyoneGrab=2]="AnyoneGrab",i[i.MultipleShare=3]="MultipleShare",i}({}),yi=function(i){return i.Sharing="sharing",i.Paused="paused",i.End="ended",i}({}),ol=function(i){return i[i.Video_90P=0]="Video_90P",i[i.Video_180P=1]="Video_180P",i[i.Video_360P=2]="Video_360P",i[i.Video_720P=3]="Video_720P",i[i.Video_1080P=4]="Video_1080P",i}({}),Y0=function(i){return i.Active="Active",i.Inactive="Inactive",i}({}),Xg=function(i){return i.Muted="Muted",i.Unmuted="Unmuted",i}({}),$0=function(i){return i.Started="Started",i.Stopped="Stopped",i.Failed="Failed",i}({}),J0=function(i){return i.Approved="Approved",i.Rejected="Rejected",i}({}),BE=function(i){return i.PrivilegeChange="PrivilegeChange",i.StopScreenCapture="StopScreenCapture",i.ShareFromMainSession="ShareFromMainSession",i}({}),Qv=function(i){return i[i.ImageNotMatch=2]="ImageNotMatch",i[i.CanvasNotMatch=3]="CanvasNotMatch",i[i.VBModelNotMatch=4]="VBModelNotMatch",i}({});const mm="blur";let Hv=function(i){return i.User="user",i.Environment="environment",i.Left="left",i.Right="right",i}({});const zp=1e3,gM="__ZOOM_SDK_SHARING_VIDEO__",Yh="__ZOOM_SDK_VIDEO_ZONE__",FE="__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__",T1="__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__",rF="__ZOOM_SDK_MASK_CLIP_@__",X0="__ZOOM_SDK_MEDIA_PLAYBACK_SOURCE_VIDEO__",R1={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}},qd={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}};let Wa=function(i){return i[i.Request=11]="Request",i[i.Decline=12]="Decline",i[i.Approve=13]="Approve",i[i.GiveUp=14]="GiveUp",i[i.StartControl=15]="StartControl",i[i.ContinueControl=16]="ContinueControl",i[i.StopControl=17]="StopControl",i[i.SwitchCamera=20]="SwitchCamera",i}({}),Zg=function(i){return i[i.Bk=0]="Bk",i[i.Center=1]="Center",i[i.ZoomIn=2]="ZoomIn",i[i.ZoomOut=3]="ZoomOut",i[i.Left=4]="Left",i[i.Right=5]="Right",i[i.Up=6]="Up",i[i.Down=7]="Down",i[i.SwitchCamera=8]="SwitchCamera",i}({}),gm=function(i){return i[i.Pan=192]="Pan",i[i.Tilt=48]="Tilt",i[i.Zoom=12]="Zoom",i[i.Focus=3]="Focus",i}({}),D1=function(i){return i[i.ZoomIn=2]="ZoomIn",i[i.ZoomOut=3]="ZoomOut",i[i.Left=4]="Left",i[i.Right=5]="Right",i[i.Up=6]="Up",i[i.Down=7]="Down",i[i.SwitchCamera=8]="SwitchCamera",i}({}),iF=function(i){return i[i.None=0]="None",i[i.ApproveAnother=3]="ApproveAnother",i[i.Stop=5]="Stop",i}({}),_M=function(i){return i[i.Null=0]="Null",i[i.Normal=1]="Normal",i[i.VideoMode=2]="VideoMode",i}({}),Yd=function(i){return i[i.Null=0]="Null",i[i.VirtualBackground=1]="VirtualBackground",i[i.Mask=2]="Mask",i}({}),uo=function(i){return i.Computer="computer",i.Phone="phone",i}({}),Gv=function(i){return i[i.Decline=0]="Decline",i[i.Approve=1]="Approve",i[i.CacheClean=2]="CacheClean",i}({}),ha=function(i){return i.Unknown="unknown",i.Uninstalled="uninstalled",i.Installed="installed",i}({}),Wv=function(i){return i.Unlaunched="unlaunched",i.Launched="launched",i}({}),UE=function(i){return i.Started="started",i.Ended="ended",i}({}),Mc=function(i){return i[i.Max=30]="Max",i[i.Min=10]="Min",i[i.Default=24]="Default",i}({}),rs=function(i){return i[i.Loading=1]="Loading",i[i.Done=2]="Done",i}({});const VE="RECEIVE_VIDEO_ACTIVE_INDICATION",O1="RECEIVE_VIDEO_MUTE_INDICATION",Z0="ASK_FOR_START_VIDEO_CONSENT",jE="RECEIVE_VIDEO_DIMENSION_CHANGE",eC="CAPTURED_VIDEO_DIMENSION_CHANGE",k1="CAN_NOT_DETECT_CAMERA",Fo="CAN_NOT_FIND_CAMERA",Nc="VIDEO_USER_FORBIDDEN_CAPTURE",Kv="VIDEO_CAMERA_IS_TAKEN",$r="VIDEO_BACKGROUND_FAILED",sl="VIDEO_ESTABLISH_STREAM_ERROR",zv="VIDEO_CAPTURE_START_SUCCESS",$h="VIDEO_CAPTURE_STOP_RESULT",qv="VIDEO_SPOTLIGHT_CHANGE",Ra="VIDEO_FOLLOW_HOST_ORDER_CHANGE",bs="VIDEO_HOST_DRAG_LAYOUT_CHANGE",e_="VIDEO_NEW_USER_START",xc="VIDEO_OLD_USER_STOP",tC="VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",t_="VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",Lc="VIDEO_STATISTIC_DATA",n_="VIDEO_CELL_DETAILED_DATA",nC="VIDEO_NETWORK_QUALITY_CHANGE",rC="VIDEO_FAR_END_CAMERA_CONTROL_REQUEST",P1="VIDEO_FAR_END_CAMERA_CONTROL_RESPONSE",$d="VIDEO_FAR_END_CAMERA_IN_CONTROL_CHANGE",r_="VIDEO_FAR_END_CAMERA_CAPABILITY_CHANGE",Xu="VIDEO_MASK_SETTING_SUCCESS",M1="VIDEO_CAPTURE_SDK_SUCCESS",N1="VIDEO_PREFETCH_VIDEO_FRAME_CALLBACK",vM="VIDEO_CURRENT_USER_SSRC",qp="VIDEO_RENDER_ASPECT_RATIO_CHANGE",AM={startCaptureVideo:{success:zv,fail:[k1,Fo,Nc,sl,Kv,$r]},switchCameraVideo:{success:M1,fail:[k1,Fo,Nc,Kv]},stopCaptureVideo:{success:$h}};let Ka=function(i){return i.VideoActiveChange="video-active-change",i.PeerVideoStateChange="peer-video-state-change",i.VideoSpotlightChange="video-spotlight-change",i.VideoMutedChange="video-muted-change",i.VideoCapturingChange="video-capturing-change",i.AskForStartVideoConsent="ask-for-start-video-consent",i.VideoDimensionChange="video-dimension-change",i.VideoFollowHostOrder="video-follow-host-order-change",i.VideoHostLayoutChange="video-host-layout-change",i.VideoVBPreloadChange="video-virtual-background-preload-change",i.VideoStatisticDataChange="video-statistic-data-change",i.VideoDetailedDataChange="video-detailed-data-change",i.VideoAspectRatioChange="video-aspect-ratio-change",i.NetworkQualityChange="network-quality-change",i.FarEndCameraRequestControl="far-end-camera-request-control",i.FarEndCameraResponseControl="far-end-camera-response-control",i.FarEndCameraInControlChange="far-end-camera-in-control-change",i.FarEndCameraCapabilityChange="far-end-camera-capability-change",i}({});const x1={[Ka.VideoActiveChange]:[{event:VE,payload:i=>({state:i.bVideoOn?Y0.Active:Y0.Inactive,userId:i.userId})}],[Ka.VideoCapturingChange]:[{event:zv,payload:()=>({state:$0.Started})},{event:$h,payload:i=>({state:null!=i&&i.failed?$0.Failed:$0.Stopped})}],[Ka.VideoMutedChange]:[{event:O1,payload:i=>({state:i.isVideoMuted?Xg.Muted:Xg.Unmuted,userId:i.id})}],[Ka.AskForStartVideoConsent]:[{event:Z0,payload:i=>({state:i.isVideoMuted?Xg.Muted:Xg.Unmuted,userId:i.id})}],[Ka.VideoSpotlightChange]:[{event:qv,payload:i=>({spotlightList:i.spotlightList&&i.spotlightList.map(u=>({userId:u}))})}],[Ka.VideoDimensionChange]:[{event:jE,payload:i=>({type:"received",width:i.width,height:i.height})},{event:eC,payload:i=>({type:"captured",width:i.width,height:i.height})}],[Ka.VideoFollowHostOrder]:[{event:Ra,payload:i=>({isFollowHostOrder:i.bOn})}],[Ka.VideoHostLayoutChange]:[{event:bs,payload:i=>Array.isArray(i.layout)?i.layout.map(u=>({userId:u})):[]}],[Ka.PeerVideoStateChange]:[{event:e_,payload:i=>({action:"Start",...i})},{event:xc,payload:i=>({action:"Stop",...i})}],[Ka.VideoVBPreloadChange]:[{event:tC,payload:i=>({isReady:i})}],[Ka.VideoStatisticDataChange]:[{event:Lc,payload:i=>i}],[Ka.VideoDetailedDataChange]:[{event:n_,payload:i=>i}],[Ka.VideoAspectRatioChange]:[{event:qp,payload:i=>i}],[Ka.NetworkQualityChange]:[{event:nC,payload:i=>i}],[Ka.FarEndCameraRequestControl]:[{event:rC,payload:i=>i}],[Ka.FarEndCameraResponseControl]:[{event:P1,payload:i=>i}],[Ka.FarEndCameraInControlChange]:[{event:$d,payload:i=>i}],[Ka.FarEndCameraCapabilityChange]:[{event:r_,payload:i=>i}]},Yv="AUDIO_ACTIVE_SPEAKER",QE="AUDIO_UNMUTE_CONSENT",_m="AUDIO_CURRENT_USER_JOIN_BY_VOIP",vm="AUDIO_CURRENT_USER_JOIN_BY_PHONE",Yp="AUDIO_CURRENT_USER_LEAVE_AUDIO",iC="AUDIO_CURRENT_USER_MUTED",L1="AUDIO_CURRENT_USER_UNMUTED",Jd="AUDIO_PARTICIPANT_AUDIO_UPDATE",yM="AUDIO_DIALOUT_RESULT_CODE",Pl="AUDIO_DIALOUT_RESULT_SUCCESS",$p="DIALOUT_FAIL",oC="AUDIO_DIALOUT_CANCEL_SUCCESS",sC="DIALOUT_CANCEL_FAIL",EM="AUDIO_MERGE_AUDIO_INDICATION",aC="USER_FORBIDDEN_MICROPHONE",Ml="ESTABLISH_AUDIO_STREAM_ERROR",Jh="AUDIO_AUTO_PLAY_FAILED",HE="INVALID_DEVICE_ID",cC="AUDIO_ALLOW_TALK_CHANGE",i_="SHARE_AUDIO_STATE_CHANGE",GE="AUDIO_STATISTIC_DATA",lC="AUDIO_CURRENT_USER_SSRC";let Bc=function(i){return i.ActiveSpeaker="active-speaker",i.UnmuteAudioConsent="unmute-audio-consent",i.CurrentAudioChange="current-audio-change",i.DialoutStateChange="dialout-state-change",i.MergeAudio="merged-audio",i.AutoPlayFailed="auto-play-audio-failed",i.AllowTalkChange="allow-talk-change",i.ShareAudioChange="share-audio-change",i.AudioStatisticDataChange="audio-statistic-data-change",i}({});const Xd={JoinComputerAudio:{success:_m,fail:[aC,Ml]},LeaveComputerAudio:{success:Yp},JoinAudioByCallMe:{success:Pl,fail:[$p]},cancelDialOut:{success:oC,fail:[sC]},hangup:{success:Yp}},B1={[Bc.ActiveSpeaker]:[{event:Yv,payload:i=>i}],[Bc.UnmuteAudioConsent]:[{event:QE,payload:i=>({reason:i})}],[Bc.CurrentAudioChange]:[{event:vm,payload:()=>({action:fm.Join,type:uo.Phone})},{event:_m,payload:()=>({action:fm.Join,type:uo.Computer})},{event:Yp,payload:()=>({action:fm.Leave})},{event:iC,payload:i=>{let{source:u}=i;return{action:fm.Muted,source:u}}},{event:L1,payload:i=>{let{source:u}=i;return{action:fm.Unmuted,source:u}}}],[Bc.DialoutStateChange]:[{event:yM,payload:i=>i}],[Bc.MergeAudio]:[{event:EM,payload:i=>i}],[Bc.AutoPlayFailed]:[{event:Jh,payload:()=>{}}],[Bc.AllowTalkChange]:[{event:cC,payload:i=>({enabled:i})}],[Bc.ShareAudioChange]:[{event:i_,payload:i=>i}],[Bc.AudioStatisticDataChange]:[{event:GE,payload:i=>i}]},F1="SHARE_ACTIVE_INDICATION",uC="SHARE_CHECK_CHROME_SHARING_EXTENSION",$v="SHARE_START_DESKTOP_SHARE_FAILED",bM="SHARE_DIMENSION_CHANGE",WE="SHARE_RECEIVED_DIMENSION_CHANGE",U1="SHARE_VIDEO_STREAMS_END",V1="SHARE_PASSIVE_STOP_SHARE",dC="SHARE_PASSIVE_BO_STOP",Jv="SHARE_NEW_USER_ADD",Xv="SHARE_USER_REMOVE",Am="SHARE_USER_PAUSED",j1="SHARE_USER_RESUMED",Zv="SHARE_AUTO_CHANGE_SOURCE",eA="SHARE_REMOTE_CONTROL_APPROVE",hc="SHARE_GRAB_REMOTE_CONTROL_CHANGE",o_="SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",pC="SHARE_REMOTE_CONTROL_SUCCESS",KE="SHARE_REMOTE_CONTROL_FAILED",hC="SHARE_PRIVILEGE_CHANGE",fC="SHARE_READ_RECEIPT",Q1="SHARE_STATISTIC_DATA",tA="SHARE_REMOTE_CONTROL_REQUEST",Xh="SHARE_REMOTE_CONTROL_APP_STATUS",s_="SHARE_REMOTE_CONTROL_SESSION_STATUS",mC="SHARE_REMOTE_CONTROL_APP_SCHEME";let $s=function(i){return i.ShareActiveChange="active-share-change",i.ShareDimensionChange="share-content-dimension-change",i.SharePassiveStop="passively-stop-share",i.SharePeerStateChange="peer-share-state-change",i.ShareContentChange="share-content-change",i.SharePrivilegeChange="share-privilege-change",i.ShareReadReceipt="share-can-see-screen",i.ShareStatisticDataChange="share-statistic-data-change",i.RemoteControlApprovedChange="remote-control-approved-change",i.RemoteControlInControlChange="remote-control-in-control-change",i.RemoteControlClipboardChange="remote-control-clipboard-change",i.RemoteControlRequestChange="remote-control-request-change",i.RemoteControlAppStatusChange="remote-control-app-status-change",i.RemoteControlControlledStatusChange="remote-control-controlled-status-change",i}({});const H1={[$s.ShareActiveChange]:[{event:F1,payload:i=>{const{isActive:u,activeUserId:l,...h}=i;return{state:u?"Active":"Inactive",userId:l,...h}}}],[$s.ShareDimensionChange]:[{event:bM,payload:i=>({type:"sended",width:i.width,height:i.height})},{event:WE,payload:i=>({type:"received",width:i.width,height:i.height})}],[$s.SharePassiveStop]:[{event:U1,payload:()=>({reason:BE.StopScreenCapture})},{event:V1,payload:()=>({reason:BE.PrivilegeChange})},{event:dC,payload:()=>({reason:BE.ShareFromMainSession})}],[$s.SharePeerStateChange]:[{event:Jv,payload:i=>({userId:i.id,action:"Start"})},{event:Xv,payload:i=>({userId:i.id,action:"Stop"})},{event:Am,payload:i=>({userId:i.id,action:"Pause"})},{event:j1,payload:i=>({userId:i.id,action:"Resume"})}],[$s.ShareContentChange]:[{event:Zv,payload:i=>i}],[$s.SharePrivilegeChange]:[{event:hC,payload:i=>({privilege:i})}],[$s.ShareReadReceipt]:[{event:fC,payload:()=>{}}],[$s.ShareStatisticDataChange]:[{event:Q1,payload:i=>i}],[$s.RemoteControlApprovedChange]:[{event:eA,payload:i=>({state:i?J0.Approved:J0.Rejected})}],[$s.RemoteControlInControlChange]:[{event:hc,payload:i=>({isControlling:i})}],[$s.RemoteControlClipboardChange]:[{event:o_,payload:i=>i}],[$s.RemoteControlRequestChange]:[{event:tA,payload:i=>i}],[$s.RemoteControlAppStatusChange]:[{event:Xh,payload:i=>i}],[$s.RemoteControlControlledStatusChange]:[{event:s_,payload:i=>i}]};let Jp=function(i){return i.Question="question",i.UpdateQuestion="updateQuestion",i.Answer="answer",i.DeleteComment="deleteComment",i.DeleteQuestion="deleteQuestion",i.Dismiss="dismiss",i.Reopen="reopen",i.Upvote="upvote",i.AnswerLive="answerLive",i}({}),oF=function(i){return i.QaSettingChange="qa-setting-change",i.QaActionChange="qa-action-change",i}({});const sF={[oF.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:i=>i}],[oF.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:i=>({action:Jp.Question,data:i})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:i=>({action:Jp.UpdateQuestion,data:i})},{event:"QA_ANSWER_QUESTION",payload:i=>({action:Jp.Answer,data:i})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:i=>({action:Jp.DeleteComment,data:i})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:i=>({action:Jp.DeleteQuestion,data:i})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:i=>({action:Jp.Dismiss,data:i})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:i=>({action:Jp.Reopen,data:i})},{event:"QA_ANSWER_VOTE_QUESTION",payload:i=>({action:Jp.Upvote,data:i})},{event:"QA_ANSWER_QUESTION_LIVE",payload:i=>({action:Jp.AnswerLive,data:i})}]},nn="INVALID_OPERATION",Xp="INTERNAL_ERROR",gC="OPERATION_TIMEOUT",Gi="INSUFFICIENT_PRIVILEGES",ym="IMPROPER_MEETING_STATE",Pr="INVALID_PARAMETERS",G1="AUDIO_ENCODE_SUCCESS",W1="AUDIO_DECODE_SUCCESS",Zp="VIDEO_ENCODE_SUCCESS",SM="VIDEO_DECODE_SUCCESS",CM="SHARING_ENCODE_SUCCESS",_C="SHARING_DECODE_SUCCESS",IM="AUDIO_ENCODE_FAIL",K1="AUDIO_DECODE_FAIL",al="VIDEO_ENCODE_FAIL",cl="VIDEO_DECODE_FAIL",Em="SHARING_ENCODE_FAIL",z1="SHARING_DECODE_FAIL",wM="MEDIA_DEVICE_CHANGE",us="MEDIS_SDK_PATHCH_LOADED",TM="AUDIO_BRIDGE_PEER_CONNECTION_RECEIVE_READY",q1="AUDIO_BRIDGE_PEER_CONNECTION_SEND_READY",vC="DEVICE_PERMISSION_CHANGE";let Y1=function(i){return i.DeviceChange="device-change",i.MediaSDKChange="media-sdk-change",i.DevicePermissionChange="device-permission-change",i}({});const aF={[Y1.DeviceChange]:[{event:wM,payload:()=>({})}],[Y1.MediaSDKChange]:[{event:G1,payload:()=>({type:"audio",action:"encode",result:"success"})},{event:IM,payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:W1,payload:()=>({type:"audio",action:"decode",result:"success"})},{event:K1,payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:Zp,payload:()=>({type:"video",action:"encode",result:"success"})},{event:al,payload:()=>({type:"video",action:"encode",result:"fail"})},{event:SM,payload:()=>({type:"video",action:"decode",result:"success"})},{event:cl,payload:()=>({type:"video",action:"decode",result:"fail"})},{event:CM,payload:()=>({type:"share",action:"encode",result:"success"})},{event:Em,payload:()=>({type:"share",action:"encode",result:"fail"})},{event:_C,payload:()=>({type:"share",action:"decode",result:"success"})},{event:z1,payload:()=>({type:"share",action:"decode",result:"fail"})}],[Y1.DevicePermissionChange]:[{event:vC,payload:i=>i}]},RM="BREAKOUT_ROOM_ADD_TOKEN",AC="BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",nA="BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",Zd="BREAKOUT_ROOM_ROOM_COUTDOWN",rA="BREAKOUT_ROOM_BROADCAST_MESSAGE",iA="BREAKOUT_ROOM_ASK_HELP_REQUEST",zE="BREAKOUT_ROOM_ASK_HELP_RESPONSE",Zh="BREAKOUT_ROOM_ATTRIBUTE_INDICATION",cF="BREAKOUT_ROOM_JOIN_BO_RESPONSE",$1="BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",DM="BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",qE="BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",yC="BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE";let bm=function(i){return i.InviteToJoin="invite-to-join",i.RoomCountdown="room-countdown",i.RoomTimeUp="room-time-up",i.ClosingRoomCountdown="closing-room-countdown",i.BroadcastMessage="broadcast-message",i.AskForHelp="ask-for-help",i.AskForHelpResponse="ask-for-help-response",i.RoomStateChange="room-state-change",i.MainSessionUserUpdate="main-session-user-updated",i}({});const L4={[bm.InviteToJoin]:[{event:AC,payload:i=>i}],[bm.RoomCountdown]:[{event:Zd,payload:i=>i}],[bm.RoomTimeUp]:[{event:$1,payload:i=>i}],[bm.ClosingRoomCountdown]:[{event:nA,payload:i=>i}],[bm.BroadcastMessage]:[{event:rA,payload:i=>i}],[bm.AskForHelp]:[{event:iA,payload:i=>i}],[bm.AskForHelpResponse]:[{event:zE,payload:i=>i}],[bm.RoomStateChange]:[{event:Zh,payload:i=>({status:i.controlStatus})}],[bm.MainSessionUserUpdate]:[{event:yC,payload:()=>({})}]};var EC=function(i){return i.StatusUpdate="archiving-status-update",i.OptionsUpdate="archiving-options-update",i}(EC||{});const lF={[EC.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:i=>i}],[EC.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:i=>i}]};let J1=function(i){return i.PollDataChange="poll-data-change",i.PollSizeUpdate="poll-size-update",i.PollStatusUpdate="poll-status-update",i}({});const uF={[J1.PollDataChange]:[{event:"POLL_DATA_CHANGE",payload:i=>i}],[J1.PollSizeUpdate]:[{event:"POLL_SIZE_UPDATE",payload:i=>i}],[J1.PollStatusUpdate]:[{event:"POLL_STATUS_UPDATE",payload:i=>i}]};let OM=function(i){return i.ReactionReceived="reaction-received",i.ReactionRemoved="reaction-removed",i}({});const X1={[OM.ReactionReceived]:[{event:"REACTION_RECEIVED",payload:i=>i}],[OM.ReactionRemoved]:[{event:"REACTION_REMOVED",payload:i=>i}]},bC={[function(i){return i.SummaryChange="summary-status-change",i}({}).SummaryChange]:[{event:"SMART_SUMMARY_STATUS_CHANGE",payload:i=>i}]},oA="LIVE_STREAM_STATUS_CHANGE",sA={...b1,...um,...tF,...hm,...I1,...B1,...x1,...sF,...H1,...aF,...L4,...lF,"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:i=>i}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:i=>i}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:i=>i}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:i=>i},{event:"CC_STATUS_CHANGE",payload:i=>i}],...uF,...X1,...bC,"live-stream-status":[{event:oA,payload:i=>i}]},Di=function(i){return{all:i=i||new Map,on:function(u,l){var h=i.get(u);h?h.push(l):i.set(u,[l])},off:function(u,l){var h=i.get(u);h&&(l?h.splice(h.indexOf(l)>>>0,1):i.set(u,[]))},emit:function(u,l){var h=i.get(u);h&&h.slice().map(function(g){g(l)}),(h=i.get("*"))&&h.slice().map(function(g){g(u,l)})}}}(),a_=new Map,eR=new Array,Ze=function(i){Di.emit(i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)},ef=i=>new Promise((u,l)=>{i.fail&&i.fail.length>0?Hu(ur(Di,i.success).pipe(ki(1)),un(...i.fail.map(h=>ur(Di,h).pipe(ki(1),hn(g=>Fh({type:h,payload:g})))))).subscribe(h=>u(h),h=>{l("object"==typeof h.payload?{type:h.type,...h.payload}:void 0===h.payload?{type:h.type}:h)}):ur(Di,i.success).pipe(ki(1)).subscribe(h=>u(h))}),Lr=function(i,u){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return new Promise((h,g)=>{let y=Ue;"string"==typeof i?y=ur(Di,i).pipe(ki(1)):(y=ur(Di,i.event),i.operations&&(y=i.operations.reduce((C,w)=>C.pipe(w),y))),Hu(y,sa(l).pipe(Ar(Fh("timeout")))).subscribe(C=>{if(u){const w=u(C);"boolean"==typeof w?w?h(""):g({type:Xp}):0===w.ret?h(w.body):g({type:Xp,reason:w.body})}else h(C)},()=>{g({type:gC})})})},Oo=(i,u)=>void 0!==u?ur(Di,i).pipe(ki(u)):ur(Di,i),tR=()=>{eR.forEach(i=>{i.unsubscribe()}),eR.length=0,a_.clear()},{setAttendeesList:ep,setIsAdmitAllSilentUsers:kM,resetParticipants:PM,addFailoverAttendees:c_,removeFailoverAttendees:nR,setClearRaiseHand:rR,setClearAttendeeFeedback:ll,updateAttendeeDisplayName:iR,removeXmppAttendeeUser:MM,updateXmppAttendeeList:NM,setAttendeeExtraKey:tf}=Bo({SET_ATTENDEES_LIST:i=>i,SET_ASSISTANT_LIST:i=>i,UPDATE_XMPP_ATTENDEE_LIST:i=>i,RESET_PARTICIPANTS:()=>({}),SET_IS_ADMIT_ALL_SILENT_USERS:i=>i,REMOVE_FAILOVER_ATTENDEES:i=>i,ADD_FAILOVER_ATTENDEES:i=>i,SET_CLEAR_RAISE_HAND:()=>({}),SET_CLEAR_ATTENDEE_FEEDBACK:()=>({}),UPDATE_ATTENDEE_DISPLAY_NAME:i=>i,REMOVE_XMPP_ATTENDEE_USER:i=>i,SET_ATTENDEE_EXTRA_KEY:i=>i});var aA="NOT_FOUND",oR=function(i,u){return i===u};function sR(i,u){var l,h,W,g="object"==typeof u?u:{equalityCheck:u},y=g.equalityCheck,w=g.maxSize,D=void 0===w?1:w,N=g.resultEqualityCheck,L=(W=void 0===y?oR:y,function(X,ne){if(null===X||null===ne||X.length!==ne.length)return!1;for(var me=X.length,_e=0;_e<me;_e++)if(!W(X[_e],ne[_e]))return!1;return!0}),V=1===D?(l=L,{get:function(W){return h&&l(h.key,W)?h.value:aA},put:function(W,X){h={key:W,value:X}},getEntries:function(){return h?[h]:[]},clear:function(){h=void 0}}):function(W,X){var ne=[];function me(_e){var Re=ne.findIndex(function(et){return X(_e,et.key)});if(Re>-1){var Ne=ne[Re];return Re>0&&(ne.splice(Re,1),ne.unshift(Ne)),Ne.value}return aA}return{get:me,put:function(_e,Re){me(_e)===aA&&(ne.unshift({key:_e,value:Re}),ne.length>W&&ne.pop())},getEntries:function(){return ne},clear:function(){ne=[]}}}(D,L);function G(){var W=V.get(arguments);if(W===aA){if(W=i.apply(null,arguments),N){var X=V.getEntries().find(function(ne){return N(ne.value,W)});X&&(W=X.value)}V.put(arguments,W)}return W}return G.clearCache=function(){return V.clear()},G}function SC(i){for(var u=arguments.length,l=new Array(u>1?u-1:0),h=1;h<u;h++)l[h-1]=arguments[h];return function(){for(var g=arguments.length,y=new Array(g),C=0;C<g;C++)y[C]=arguments[C];var w,D=0,N={memoizeOptions:void 0},L=y.pop();if("object"==typeof L&&(N=L,L=y.pop()),"function"!=typeof L)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof L+"]");var V=N.memoizeOptions,G=void 0===V?l:V,W=Array.isArray(G)?G:[G],X=function(_e){var Re=Array.isArray(_e[0])?_e[0]:_e;if(!Re.every(function(et){return"function"==typeof et})){var Ne=Re.map(function(et){return"function"==typeof et?"function "+(et.name||"unnamed")+"()":typeof et}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+Ne+"]")}return Re}(y),ne=i.apply(void 0,[function(){return D++,L.apply(null,arguments)}].concat(W)),me=i(function(){for(var _e=[],Re=X.length,Ne=0;Ne<Re;Ne++)_e.push(X[Ne].apply(null,arguments));return w=ne.apply(null,_e)});return Object.assign(me,{resultFunc:L,memoizedResultFunc:ne,dependencies:X,lastResult:function(){return w},recomputations:function(){return D},resetRecomputations:function(){return D=0}}),me}}var Rs=SC(sR);const l_=i=>{let{participants:{attendeesList:u}}=i;return u},aR=i=>{let{meeting:{userId:u}}=i;return u},CC=i=>{let{participants:{xmppAttendeeList:u}}=i;return u};let hu=function(i){return i[i.Attendee=0]="Attendee",i[i.Host=1]="Host",i[i.Owner=4]="Owner",i[i.ViewOnly=8]="ViewOnly",i[i.HostOwner=5]="HostOwner",i[i.ViewOnlyCanTalk=24]="ViewOnlyCanTalk",i}({}),u_=function(i){return i[i.Host=10]="Host",i[i.Panelist=20]="Panelist",i[i.Attendee=30]="Attendee",i}({}),Sm=function(i){return i[i.Client=9]="Client",i[i.Phone=5]="Phone",i[i.H323=15]="H323",i[i.Assitant=51]="Assitant",i}({});const cA=i=>(i&hu.Host)===hu.Host,lA=i=>(i&Sm.Phone)===Sm.Phone,uA=i=>i===hu.ViewOnlyCanTalk,Ds=i=>(i&hu.ViewOnly)===hu.ViewOnly;let tp=function(i){return i[i.Automatically=1]="Automatically",i[i.Manually=2]="Manually",i}({}),Jr=function(i){return i[i.NotStarted=1]="NotStarted",i[i.InProgress=2]="InProgress",i[i.Closing=3]="Closing",i[i.Closed=4]="Closed",i}({}),IC=function(i){return i[i.NoToken=1]="NoToken",i[i.GotToken=2]="GotToken",i[i.Started=3]="Started",i[i.Closing=4]="Closing",i[i.Closed=5]="Closed",i}({}),fr=function(i){return i.Initial="initial",i.Invited="invited",i.Joining="joining",i.InRoom="in room",i.Leaving="leaving",i.TimeUp="time up",i.MainSession="main session",i}({}),d_=function(i){return i.Join="joinRequest",i.Switch="switchRequest",i.Leave="leaveRequest",i.Broadcast="messageText",i.HelpReq="helpRequest",i.HelpRes="helpResponse",i.CoHostWantJoinThisBo="wantJoinThisBO",i}({}),th=function(i){return i[i.Received=0]="Received",i[i.Busy=1]="Busy",i[i.Ignore=2]="Ignore",i[i.AlreadyInRoom=3]="AlreadyInRoom",i}({});const Yn=Rs([aR,l_],(i,u)=>u.find(l=>l.userId===i)),fu=Rs([Yn],i=>i?.isHost||i?.bCoHost),dF=Rs([Yn],i=>i?.isHost),p_=Rs([CC],i=>i.filter(u=>u.userRole===u_.Attendee)),cR=Rs([l_],i=>i.filter(u=>u.bHold&&!u.bid)),Uo=Rs([l_,i=>{let{breakoutRoom:u}=i;return u&&u.controlStatus},i=>{let{breakoutRoom:u}=i;return u&&u.currentRoom.status}],(i,u,l)=>i.filter(u!==Jr.InProgress&&u!==Jr.Closing||l!==fr.InRoom?h=>!h.bHold&&!h.bid:h=>!h.bHold)),xM=Rs([i=>{let{participants:{assistantList:u}}=i;return u}],i=>i),np=Rs([Uo],i=>i.find(u=>u.isHost)),lR=Rs([Uo],i=>i.filter(u=>u.bCoHost)),LM=Rs([Yn,Uo],(i,u)=>u.filter(l=>l.userId!==i?.userId));Rs([CC],i=>i.reduce((u,l)=>{const{jid:h}=l;return Object.assign(u,{[h]:l}),u},{})),Rs([CC,i=>{let{meeting:{jid:u}}=i;return u}],(i,u)=>{var l;return null===(l=i.find(h=>h.jid===u))||void 0===l?void 0:l.userId});const pF=Rs([l_],function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).some(i=>i?.bLocalRecord===Vv.Start)});let qi=function(i){return i.Closed="closed",i.Connecting="connecting",i.Connected="connected",i}({}),Fc=function(i){return i[i.SupportASL=1]="SupportASL",i[i.SidecarPhase2=2]="SidecarPhase2",i[i.SupportBroadcastVoice=8]="SupportBroadcastVoice",i[i.SendMeetingTokenSeparately=16]="SendMeetingTokenSeparately",i[i.SupportPreview=32]="SupportPreview",i[i.WebCameraIndication=64]="WebCameraIndication",i[i.SupportFarEndCameraControl=256]="SupportFarEndCameraControl",i[i.SupportVideoShare=512]="SupportVideoShare",i[i.UnifyErrorType=1024]="UnifyErrorType",i[i.WhiteBoard=2048]="WhiteBoard",i[i.RequestRemoteControl=8192]="RequestRemoteControl",i[i.SmartSummary=16384]="SmartSummary",i[i.ShareMultiStream=131072]="ShareMultiStream",i[i.VideoLTR=262144]="VideoLTR",i[i.WebrtcAudioRtcpTime=524288]="WebrtcAudioRtcpTime",i[i.LocalRecording=32768]="LocalRecording",i[i.LocalRecordingGrantPermission=65536]="LocalRecordingGrantPermission",i[i.LocalRecordingGrantPermissionOption=1048576]="LocalRecordingGrantPermissionOption",i}({});const{setAsnIds:Cm,setIsCanUnmute:Ni,setDialoutSequence:BM,setDialoutResultCode:Im,setIsAllowToTalk:mu,setAudioSsrc:FM,setIsMutedUponEntry:uR,setIsUserGrantCaptureAudio:h_,setIsMicrophoneForbidden:dR,setWebrtcRestartCount:Nl,setMicrophoneList:wC,setSpeakerList:UM,setActiveMicrophone:YE,setActiveSpeaker:gu,setCanPlayAudio:f_,resetAudio:nf,setIsComputerAudioLoading:m_,setIsAllowToTalkAttendeeConnected:pR,setIsMuteBeforeSharingAudio:ul,addLocalShareAudioUser:VM,updateLocalShareAudioUser:hR,setIsJoinComputerAudioBeforeSharingAudio:_u,setIsShareAudioEnabled:xl,setIsShareAudioMuted:dA,setIsSharingAudio:pA,setAudioDataEncoding:TC,setAudioDataDecoding:$E,addLocallyMutedAudio:fR,removeLocallyMutedAudio:mR,updateUserAudioVolumeLocally:gR,removeLocalUserAudioVolume:hF,setCustomizedAudioOption:RC,setIsBackgroundNoiseSuppression:jM,setIsHidEnabled:_R,setAudioMediaPlaybackFile:vR,setIsStopAllIncomingAudio:AR,setIsVerifiedAudioPermissionOnIosMobile:dl,setIsAudioBridgeSignalReconnecting:yR,setAudioMutedSource:nh,setAudioUnmutedSource:hA}=Bo("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME","SET_CUSTOMIZED_AUDIO_OPTION","SET_IS_BACKGROUND_NOISE_SUPPRESSION","SET_IS_HID_ENABLED","SET_AUDIO_MEDIA_PLAYBACK_FILE","SET_IS_STOP_ALL_INCOMING_AUDIO","SET_IS_VERIFIED_AUDIO_PERMISSION_ON_IOS_MOBILE","SET_IS_AUDIO_BRIDGE_SIGNAL_RECONNECTING","SET_AUDIO_MUTED_SOURCE","SET_AUDIO_UNMUTED_SOURCE"),{setSharePrivilege:ER,setShareActiveNode:DC,setIsReceiveSharing:OC,setIsChromeExtensionInstalled:kC,setIsScreenShareForbidden:PC,setShareDimension:bR,setShareStatus:Ll,setShareSsrc:ni,setShareQuality:Ft,setReceivedShareDimension:MC,setIsGrabRemoteControl:JE,setIsSdkGrabControl:XE,setIsReceiveSharingFromMainSession:QM,setIsSharingToBreakoutRoom:fA,setIsSharingWithSecondCamera:SR,setShringSecondCameraId:wm,setIsRequireReadReceipt:ZE,setIsOptimizedForSharedVideo:NC,setShareDataEncoding:HM,setShareDataDecoding:mA,addShareCapturedEnsuredCanvas:CR,addShareRenderedEnsuredCanvas:Uc,setRemoteControllingSsrc:g_,setApprovedRemoteControlSsrc:Tm,setRemoteControlAppDownloadUrl:GM,setRemoteControlAppInstallStatus:rf,remoteControlAppStatusFallbackCheck:IR,remoteControlAppLaunchedCheck:WM,setRemoteControlAppLaunchSheme:rp,addSharingUserIdSsrcMapping:xC,addRemoteControlledUser:LC,removeRemoteControlledUser:sf,setRemoteControlSetting:eb,setRemoteControlViewportDomSelector:gA,resetShare:tb}=Bo("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_CHROME_EXTENSION_INSTALLED","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","SET_IS_OPTIMIZED_FOR_SHARED_VIDEO","SET_SHARE_DATA_ENCODING","SET_SHARE_DATA_DECODING","ADD_SHARE_CAPTURED_ENSURED_CANVAS","ADD_SHARE_RENDERED_ENSURED_CANVAS","SET_REMOTE_CONTROL_CURRENT_SSRC","SET_REMOTE_CONTROLLING_SSRC","SET_APPROVED_REMOTE_CONTROL_SSRC","SET_REMOTE_CONTROL_APP_DOWNLOAD_URL","SET_REMOTE_CONTROL_APP_INSTALL_STATUS","REMOTE_CONTROL_APP_STATUS_FALLBACK_CHECK","REMOTE_CONTROL_APP_LAUNCHED_CHECK","SET_IS_ENABLE_AUTO_DELETE_RC_APP","SET_REMOTE_CONTROL_APP_LAUNCH_SHEME","ADD_SHARING_USER_ID_SSRC_MAPPING","ADD_REMOTE_CONTROLLED_USER","REMOVE_REMOTE_CONTROLLED_USER","SET_REMOTE_CONTROL_SETTING","SET_REMOTE_CONTROL_VIEWPORT_DOM_SELECTOR","RESET_SHARE"),{setVideoSsrc:KM,setActiveVideoId:nb,setCameraList:rb,setActiveCamera:rh,setIsCurrentUserStartedVideo:wR,setSpotlightVideo:BC,setIsCaptureForbidden:FC,setVideoMaxQuality:TR,setIsVideoMuted:zM,setIsCaptureCameraLoading:_A,setIsCameraTaken:ib,resetVideo:UC,setReceivedVideoDimension:RR,addSubscribedVideoId:vA,removeSubscribedVideoId:qM,setIsFollowHostVideoLayout:VC,setHostDragLayout:yt,addRenderedVideoId:AA,removeRenderedVideoId:jC,setIsSupportHdVideo:DR,setMaximumNumbeOfHdSubscriptions:QC,setIsCanUnmuteVideo:OR,setIsVbPreloadReady:Rm,setIsVbConfiged:af,setVbImageSrc:yA,setVideoDataEncoding:Dm,setVideoDataDecoding:EA,setHardwareAccelerationState:cf,setVideoCaptureCustomizedOption:kR,setNetworkQuality:ob,setVideoCameraPtzCapabilities:HC,setIsCurrentUserRequestCameraControlled:__,setIsCurrentUserCameraInControl:sb,addVideoFarEndCameraControlUser:GC,removeVideoFarEndCameraControlUser:ab,setVideoPtzCameraMoving:WC,setVideoPtzCameraValue:KC,setIsControllingFarEndCamera:PR,setNetworkQualityBroadcastTime:cb,setIsMaskConfiged:lb,setVideoBackgroundMode:fF,setVideoMask:zC,setVideoCapturedDimension:pl,addVideoRenderedEnsuredCanvas:bA,setVideoMediaPlaybackFile:v_,setPrefetchedVideoUser:SA,setVideoQosSubscriptionStatus:lf}=Bo("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_MAXIMUM_NUMBE_OF_HD_SUBSCRIPTIONS","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION","SET_NETWORK_QUALITY","SET_VIDEO_CAMERA_PTZ_CAPABILITIES","SET_IS_CURRENT_USER_REQUEST_CAMERA_CONTROLLED","SET_IS_CURRENT_USER_CAMERA_IN_CONTROL","ADD_VIDEO_FAR_END_CAMERA_CONTROL_USER","REMOVE_VIDEO_FAR_END_CAMERA_CONTROL_USER","SET_VIDEO_PTZ_CAMERA_MOVING","SET_VIDEO_PTZ_CAMERA_VALUE","SET_IS_CONTROLLING_FAR_END_CAMERA","SET_NETWORK_QUALITY_BROADCAST_TIME","SET_IS_MASK_CONFIGED","SET_VIDEO_BACKGROUND_MODE","SET_VIDEO_MASK","SET_VIDEO_CAPTURED_DIMENSION","ADD_VIDEO_RENDERED_ENSURED_CANVAS","SET_VIDEO_MEDIA_PLAYBACK_FILE","SET_PREFETCHED_VIDEO_USER","SET_VIDEO_QOS_SUBSCRIPTION_STATUS"),{resetQa:_F}=Bo("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:MR,setPanelistChatPrivilege:Zu,addChatMessageHistory:uf,resetChat:NR,setIsAllowAttendeeChat:ZM,setLatestChatMessageId:qC,removeChatMessage:ub,setFileChatSetting:e2,addChatFileRecord:A_,updateChatFileRecord:Us,cancelSendFileChat:db,addFailedChatFileTransfer:YC,removeFailedChatFileTransfer:CA,setChatFileMessageId:IA,cancelDownloadFileChat:y_}=Bo("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE","SET_FILE_CHAT_SETTING","ADD_CHAT_FILE_RECORD","UPDATE_CHAT_FILE_RECORD","CANCEL_SEND_FILE_CHAT","ADD_FAILED_CHAT_FILE_TRANSFER","REMOVE_FAILED_CHAT_FILE_TRANSFER","SET_CHAT_FILE_MESSAGE_ID","CANCEL_DOWNLOAD_FILE_CHAT"),{setCcEditorInfo:xR,resetClosedCaption:yF}=Bo("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:UR,setBreakoutRoomAllocationPattern:wA,setBreakoutRoomSequenceId:hb,setMeetingElapsedTime:o2,setStartRoomElapsedTime:VR,setBreakoutRoomOptions:jR,setBreakoutRoomControlStatus:s2,setBreakoutRooms:XC,setCurrentBreakoutRoom:ZC,setBreakoutRoomAttendeeStatus:E_,setBreakoutRoomConfId:QR,setBreakoutRoomToken:fb,resetBreakoutRoom:Or,setBreakoutRoomClosingRoomTime:eI,setBreakoutRoomBroadcastMessage:tI,setBreakoutRoomHostReplyType:nI,setBreakoutRoomHostReplyRequestId:mb,setMainSessionAttendeeList:km,setIsHugeBreakoutRoom:rI,setBreakoutRoomPreAssignedRoomList:iI,setBreakoutRoomUserRoleUpdated:oI,setBreakoutRoomMeetingOptions:TA}=Bo("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS"),{setCloudRecordingStatus:Pm,setCloudRecordingEnable:HR,setCloudIsoRecordingEnable:a2,setAllowStopAutoRecording:GR,setAutomaticCloudRecordingEnable:RA,setIsZoomIQ:DA,setZoomIQChanging:ih,setLocalRecordStatus:WR,setSupportLocalRecording:Mm,setLocalGrantPermissionOption:c2,setLocalPermissionUserList:OA,resetRecording:gb}=Bo("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_CLOUD_ISO_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","SET_IS_ZOOM_I_Q","SET_ZOOM_I_Q_CHANGING","SET_LOCAL_RECORD_STATUS","SET_SUPPORT_LOCAL_RECORDING","SET_LOCAL_GRANT_PERMISSION_OPTION","SET_LOCAL_PERMISSION_USER_LIST","RESET_RECORDING"),{updateCmdJid:_b,removeCmdJid:ip,setCmdChannelConnectionStatus:kA,resetCmdChannel:fc}=Bo("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),{resetArchiving:io}=Bo({SET_ARCHIVING_STATUS:i=>i,SET_ARCHIVING_SESSION_READY:i=>i,SET_ARCHIVING_OPTIONS:i=>i,RESET_ARCHIVING:()=>{}}),{setIsLiveTranscriptionEnabled:df,setLiveTranscriptionMeetingOptions:b_,setIsLiveTranscriptionManualCaptionerEnabled:oh,setLiveTranscriptionGatewayId:Nm,setLiveTranscriptionSupportedLanguage:S_,setIsLiveTranscriptionSubscribed:xm,setCurrentTranscriptionLang:sh,setCurrentTranslationLang:pf,addLiveTranscriptionMessage:Lm,updateLiveTranscriptionMessage:zR,reduceLiveTranscriptionMessages:qR,setLiveTranscriptionEngineType:MA,removeLiveTranscriptionFailoverState:YR,setLiveTranscriptionLastCaptionMessage:$R,resetLiveTranscription:JR,setIsHostDisableCaptions:vb}=Bo("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"," SET_IS_HOST_DISABLE_CAPTIONS"),{resetPoll:fn}=Bo("SET_POLL_DATA","SET_POLLING_ID","SET_POLLING_WEB_LINKS","SET_POLLING_DOC_MAX_SIZE","SET_POLLING_DOC_SIZE","SET_POLLING_DOC_LIBRARY_MAX_SIZE","SET_POLLING_DOC_LIBRARY_SIZE","RESET_POLL"),{setLoggerInitOptions:Ab,setIsLaplaceInitialized:sI,resetLogger:jt}=Bo("SET_LOGGER_INIT_OPTIONS","SET_IS_LAPLACE_INITIALIZED","RESET_LOGGER"),{setIsLiveStreamEnable:Yt,setLiveStreamStatus:Ui,resetLiveStream:l2}=Bo("SET_IS_LIVE_STREAM_ENABLE","SET_LIVE_STREAM_STATUS","RESET_LIVE_STREAM"),za=function(i){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{socket:{zoomSocketStatus:l,xmppSocketStatus:h,mainSessionSocketStatus:g},meeting:{meetingStatus:y}}=i,C=[];if(y===Do.Joined){var w;const D=Qr.getInstance(),N=kr.createAgent();if((null===(w=Yn(i))||void 0===w?void 0:w.audio)===uo.Computer&&D.leaveComputerAudio(),D.disconnect(),D.destroy(),i.video&&(i.video.subscribedVideoList.length>0&&i.video.subscribedVideoList.forEach(L=>{N.unsubscribeVideo(L)}),i.video.isCurrentUserStartedVideo&&Ze($h)),i.share&&i.share.isReceiveSharing){const L=i.share.activeNodeId;i.share.remoteControlledUserList.length>0&&i.share.remoteControlledUserList.forEach(V=>{N.sharingRequestRemoteControl(V,!1)}),N.unsubscribeSharing(L)}}if(u||(Yr.clearSession(),[ro.WebclientTk,ro.WebclientZsk,ro.WebclientZtk,ro.WebclientRecordingToken].forEach(D=>{sessionStorage.removeItem(D)}),Ia.destroy()),l!==qi.Closed&&C.push(nu()),h!==qi.Closed&&C.push(o1()),g!==qi.Closed&&C.push(XP()),u){const D=Yn(i);C.push(DE({audio:D?.audio,muted:D?.muted,video:D?.bVideoOn,isFailover:u}))}else C.push(DE({audio:!1,muted:void 0,video:!1,isFailover:u}));return C.push(Oc(),Rv(),PM(),nf(u),tb(),UC(u),_F(),NR(),gb(),yF(),Or(),fc(),io(),JR(u),fn(),jt(u),l2(u),m1(Do.Closed)),C},Da=function(i){for(var u=arguments.length,l=new Array(u>1?u-1:0),h=1;h<u;h++)l[h-1]=arguments[h];return Lr({event:Wp,operations:[Bn(g=>g.find(y=>y.userId===i)),Ut(g=>!!g),ki(1)]},...l)},yb={[`${kE.AudioBridgeEnable}`]:{mask:240,action:_1},[`${kE.AudioDecodeInWorklet}`]:{mask:15,action:Jf}};function qa(i){return Jt(Bn((u,l)=>i(u,l)),Ut(u=>null!=u))}function Eb(i){return Jt(hn((u,l)=>i(u,l)||Ue))}function hf(i){return Jt(hn((u,l)=>i(u,l)),hn(u=>Array.isArray(u)?kn(u):Ii(u)))}const u2={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},eo={[`${So}`]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(i){i.add&&this.payloads.add.push(...i.add),i.update&&this.payloads.update.push(...i.update),i.remove&&this.payloads.remove.push(...i.remove)}})};function bb(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u2;return u=>new Pn(l=>{const h=new Map;let g=0,y=null;const{period:C,rules:w}=i;let D=null;y||(y=((V,G)=>{const W=performance.now();let X=0,ne=!1;return setTimeout(function me(){X+=G,g=0;const _e=performance.now()-W-X,Re=setTimeout(me,Math.max(G-_e,0));ne&&clearTimeout(Re)},G),()=>{ne=!0}})(0,C));const N=Object.keys(eo),L=u.subscribe({next(V){if(V&&V.evt&&null!==y){g+=1;const{evt:G,body:W}=V,X=String(G);if(N.indexOf(X)>=0)if(D){const ne=h.get(X);if(ne)ne.onThrottle(W);else{const me=eo[X]();me.onThrottle(W),h.set(X,me)}}else{let ne=0;if(w.forEach(me=>{g>me.peak&&(ne=me.throttle)}),ne>0){const me=eo[X]();me.onThrottle(W),h.set(X,me),D=setTimeout(()=>{h.forEach((_e,Re)=>{const Ne={evt:Number(Re),body:_e.payloads};l.next(Ne)}),h.clear(),D=null},ne)}else l.next(V)}else l.next(V)}else l.next(V)},error(V){l.error(V)},complete(){l.complete()}});return()=>{L.unsubscribe(),y&&(y(),y=null),g=0}})}let d2=function(i){return i[i.Unknown=0]="Unknown",i[i.Windows=1]="Windows",i[i.Mac=2]="Mac",i[i.Pad=3]="Pad",i[i.Mobile=4]="Mobile",i[i.CallIn=5]="CallIn",i[i.Linux=6]="Linux",i[i.WebClient=7]="WebClient",i[i.ChromeOs=8]="ChromeOs",i}({});const eD=i=>{let{share:{isReceiveSharing:u}}=i;return u},NA=i=>{let{share:{activeNodeId:u}}=i;return u},Cr=Rs([Uo,eD,NA],function(){let i=arguments.length>2?arguments[2]:void 0;if(arguments.length>1&&arguments[1]){const u=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(l=>l.userId===i&&!0===l.sharerOn);if(u){let{os:l}=u;const{pwaOS:h}=u;return"mac"===h?l=d2.Mac:"win"===h&&(l=d2.Windows),{...u,os:l}}}return null}),C_=Rs([Uo],i=>i.filter(u=>u.sharerOn)),Vc=Rs([C_],i=>i.some(u=>!!u.bVideoShare)),oo=Rs([i=>{let{share:{remoteControlledUserList:u}}=i;return u},eD,NA],(i,u,l)=>!!u&&i.some(h=>Ro(h,l)));var aI={exports:{}},Sb={};(function(i,u){var l=function(Bt,Tt){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,Zt){at.__proto__=Zt}||function(at,Zt){for(var xn in Zt)Zt.hasOwnProperty(xn)&&(at[xn]=Zt[xn])})(Bt,Tt)};function h(Bt,Tt){function at(){this.constructor=Bt}l(Bt,Tt),Bt.prototype=null===Tt?Object.create(Tt):(at.prototype=Tt.prototype,new at)}var y,g=function(){return g=Object.assign||function(Bt){for(var Tt,at=1,Zt=arguments.length;at<Zt;at++)for(var xn in Tt=arguments[at])Object.prototype.hasOwnProperty.call(Tt,xn)&&(Bt[xn]=Tt[xn]);return Bt},g.apply(this,arguments)},C=function(Bt,Tt){var at=new Uint8Array(Bt.byteLength+Tt.byteLength);return at.set(new Uint8Array(Bt),0),at.set(new Uint8Array(Tt),Bt.byteLength),at.buffer},w="/";(y=i.TransformDataFormat||(i.TransformDataFormat={})).STRING="string",y.BLOB="blob",y.ARRAY_BUFFER="arraybuffer";var D=function(Bt){return Blob&&Bt instanceof Blob?"blob":ArrayBuffer&&Bt instanceof ArrayBuffer?"arrayBuffer":typeof Bt},N=[],L=function(){for(var Bt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Tt="",at=0;at<32;at++)Tt+=Bt[Math.round(61*Math.random())];return-1!==N.indexOf(Tt)?L():(N.push(Tt),Tt)},V=function(Bt){return Bt.arrayBuffer?Bt.arrayBuffer():new Promise(function(Tt,at){var Zt=new FileReader;Zt.readAsArrayBuffer(Bt),Zt.onload=function(xn){Tt(xn.target&&xn.target.result)},Zt.onerror=function(xn){at(xn)}})},G=function(Bt){return Bt.text?Bt.text():new Promise(function(Tt,at){var Zt=new FileReader;Zt.readAsText(Bt),Zt.onload=function(xn){Tt(xn.target&&xn.target.result)},Zt.onerror=function(xn){at(xn)}})},W=function(Bt,Tt){return Promise.resolve(new Blob([new Uint8Array(Bt)],{type:Tt}))},X=function(Bt,Tt){var at=new Blob([Bt],{type:Tt||"text/plain"});return G(at)},ne=function(Bt,Tt){return Promise.resolve(new Blob([Bt],{type:Tt||"text/plain"}))},me=function(Bt,Tt){return V(new Blob([Bt],{type:Tt||"text/plain"}))};function _e(Bt){var Tt=(Bt||"").split(".");return Tt[Tt.length-1]||""}function Re(Bt){var Tt=(Bt||"").lastIndexOf(w);return Tt<0?"":Bt.slice(0,Tt)}function Ne(Bt){var Tt=(Bt||"").lastIndexOf(w),at=Tt<0?Bt:Bt.slice(Tt+1),Zt=(at||"").lastIndexOf(".");return Zt<0?at:at.slice(0,Zt)}function et(Bt){return["png","jpg","jpeg","svg"].includes(_e(Bt))}function ht(Bt){return"json"===_e(Bt)}function ze(Bt){return"version"===_e(Bt)}function wt(Bt,Tt){return u.loadAsync(Bt).then(function(at){return Promise.all(at.filter(function(Zt,xn){return!xn.dir}).map(function(Zt){var sr,xn=ht((sr=Zt).name)?"string":et(sr.name)?"base64":ze(sr.name)?"text":"blob";return Tt?.setUnZipFormat&&(xn=Tt.setUnZipFormat(Zt)||xn),Zt.async(xn).then(function(sr){var br=sr,In=_e(Zt.name),nr="svg"===In?"svg+xml":In;return"base64"===xn&&et(Zt.name)&&!sr.startsWith("data")&&(br="data:image/"+nr+";base64,"+br),{data:br,file:Zt}})}))}).then(function(at){return function Qe(Bt,Tt){return Bt.reduce(function(at,Zt){var xn,sr=Zt.data,br=Zt.file,In=_e(br.name),nr=Re(br.name),Mr=Ne(br.name),Kr=(Tt?.combineExtNames||[]).includes(In)&&"string"==typeof sr,Fr=Kr?""+(nr?""+nr+w+In:In):br.name;return Kr&&at.some(function($i){return $i.path===Fr&&($i.data[Mr]=sr,!0)})||at.push({path:Fr,extName:In,data:Kr?(xn={},xn[Mr]=sr,xn):sr,shouldCombine:Kr}),at},[]).map(function(at){var Zt=at.data,xn=at.shouldCombine,sr=function(br,In){var nr={};for(var Mr in br)Object.prototype.hasOwnProperty.call(br,Mr)&&In.indexOf(Mr)<0&&(nr[Mr]=br[Mr]);if(null!=br&&"function"==typeof Object.getOwnPropertySymbols){var Kr=0;for(Mr=Object.getOwnPropertySymbols(br);Kr<Mr.length;Kr++)In.indexOf(Mr[Kr])<0&&Object.prototype.propertyIsEnumerable.call(br,Mr[Kr])&&(nr[Mr[Kr]]=br[Mr[Kr]])}return nr}(at,["data","shouldCombine"]);return g(g({},sr),{data:xn?JSON.stringify(Zt):Zt})})}(at,Tt)})}function Xt(Bt,Tt){var Qi,at=Tt||{},Zt=at.encoding,xn=at.blobType,sr=at.unZipOptions;if("blob"===D(Qi=Bt)&&(Qi.type.includes("compressed")||Qi.type.includes("zip"))&&!sr?.disableUnZip)return wt(Bt,sr);if(!Zt)return Promise.resolve(Bt);var br=D(Bt),In="string"===br,nr="blob"===br,Mr="arrayBuffer"===br;if(Zt===i.TransformDataFormat.BLOB){var Kr=Bt;if(In)return G(Kr);if(Mr)return V(Kr)}else if(Zt===i.TransformDataFormat.ARRAY_BUFFER){var Fr=Bt;if(In)return X(Fr,xn);if(nr)return W(Fr,xn)}else if(Zt===i.TransformDataFormat.STRING){var $i=Bt;if(nr)return ne($i,xn);if(Mr)return me($i,xn)}return Promise.resolve(Bt)}function _t(Bt){var Tt=0,at=!1,Zt=function(){Tt>90||at||(Bt(Tt+=(100-Tt)/50),requestAnimationFrame(Zt))};return Zt(),{finish:function(){100===Tt||at||(Tt=100,Bt(100))},abort:function(){100===Tt||at||(at=!0)},get curProgress(){return Tt}}}function it(){}function Ce(){Ce.init.call(this)}function Ye(Bt){return void 0===Bt._maxListeners?Ce.defaultMaxListeners:Bt._maxListeners}function Ge(Bt,Tt,at,Zt){var xn,sr,br,nr;if("function"!=typeof at)throw new TypeError('"listener" argument must be a function');if((sr=Bt._events)?(sr.newListener&&(Bt.emit("newListener",Tt,at.listener?at.listener:at),sr=Bt._events),br=sr[Tt]):(sr=Bt._events=new it,Bt._eventsCount=0),br){if("function"==typeof br?br=sr[Tt]=Zt?[at,br]:[br,at]:Zt?br.unshift(at):br.push(at),!br.warned&&(xn=Ye(Bt))&&xn>0&&br.length>xn){br.warned=!0;var In=new Error("Possible EventEmitter memory leak detected. "+br.length+" "+Tt+" listeners added. Use emitter.setMaxListeners() to increase limit");In.name="MaxListenersExceededWarning",In.emitter=Bt,In.type=Tt,In.count=br.length,nr=In,"function"==typeof console.warn?console.warn(nr):console.log(nr)}}else br=sr[Tt]=at,++Bt._eventsCount;return Bt}function ut(Bt,Tt,at){var Zt=!1;function xn(){Bt.removeListener(Tt,xn),Zt||(Zt=!0,at.apply(Bt,arguments))}return xn.listener=at,xn}function mt(Bt){var Tt=this._events;if(Tt){var at=Tt[Bt];if("function"==typeof at)return 1;if(at)return at.length}return 0}function St(Bt,Tt){for(var at=new Array(Tt);Tt--;)at[Tt]=Bt[Tt];return at}it.prototype=Object.create(null),Ce.EventEmitter=Ce,Ce.usingDomains=!1,Ce.prototype.domain=void 0,Ce.prototype._events=void 0,Ce.prototype._maxListeners=void 0,Ce.defaultMaxListeners=10,Ce.init=function(){this.domain=null,Ce.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new it,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ce.prototype.setMaxListeners=function(Bt){if("number"!=typeof Bt||Bt<0||isNaN(Bt))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=Bt,this},Ce.prototype.getMaxListeners=function(){return Ye(this)},Ce.prototype.emit=function(Bt){var Tt,at,Zt,xn,sr,br,In,nr="error"===Bt;if(br=this._events)nr=nr&&null==br.error;else if(!nr)return!1;if(In=this.domain,nr){if(Tt=arguments[1],!In){if(Tt instanceof Error)throw Tt;var Mr=new Error('Uncaught, unspecified "error" event. ('+Tt+")");throw Mr.context=Tt,Mr}return Tt||(Tt=new Error('Uncaught, unspecified "error" event')),Tt.domainEmitter=this,Tt.domain=In,Tt.domainThrown=!1,In.emit("error",Tt),!1}if(!(at=br[Bt]))return!1;var Kr="function"==typeof at;switch(Zt=arguments.length){case 1:!function(Fr,$i,Qi){if($i)Fr.call(Qi);else for(var Bi=Fr.length,Fi=St(Fr,Bi),Ki=0;Ki<Bi;++Ki)Fi[Ki].call(Qi)}(at,Kr,this);break;case 2:!function(Fr,$i,Qi,Bi){if($i)Fr.call(Qi,Bi);else for(var Fi=Fr.length,Ki=St(Fr,Fi),Nr=0;Nr<Fi;++Nr)Ki[Nr].call(Qi,Bi)}(at,Kr,this,arguments[1]);break;case 3:!function(Fr,$i,Qi,Bi,Fi){if($i)Fr.call(Qi,Bi,Fi);else for(var Ki=Fr.length,Nr=St(Fr,Ki),Sl=0;Sl<Ki;++Sl)Nr[Sl].call(Qi,Bi,Fi)}(at,Kr,this,arguments[1],arguments[2]);break;case 4:!function(Fr,$i,Qi,Bi,Fi,Ki){if($i)Fr.call(Qi,Bi,Fi,Ki);else for(var Nr=Fr.length,Sl=St(Fr,Nr),ho=0;ho<Nr;++ho)Sl[ho].call(Qi,Bi,Fi,Ki)}(at,Kr,this,arguments[1],arguments[2],arguments[3]);break;default:for(xn=new Array(Zt-1),sr=1;sr<Zt;sr++)xn[sr-1]=arguments[sr];!function(Fr,$i,Qi,Bi){if($i)Fr.apply(Qi,Bi);else for(var Fi=Fr.length,Ki=St(Fr,Fi),Nr=0;Nr<Fi;++Nr)Ki[Nr].apply(Qi,Bi)}(at,Kr,this,xn)}return!0},Ce.prototype.on=Ce.prototype.addListener=function(Bt,Tt){return Ge(this,Bt,Tt,!1)},Ce.prototype.prependListener=function(Bt,Tt){return Ge(this,Bt,Tt,!0)},Ce.prototype.once=function(Bt,Tt){if("function"!=typeof Tt)throw new TypeError('"listener" argument must be a function');return this.on(Bt,ut(this,Bt,Tt)),this},Ce.prototype.prependOnceListener=function(Bt,Tt){if("function"!=typeof Tt)throw new TypeError('"listener" argument must be a function');return this.prependListener(Bt,ut(this,Bt,Tt)),this},Ce.prototype.removeListener=function(Bt,Tt){var at,Zt,xn,sr,br;if("function"!=typeof Tt)throw new TypeError('"listener" argument must be a function');if(!(Zt=this._events))return this;if(!(at=Zt[Bt]))return this;if(at===Tt||at.listener&&at.listener===Tt)0==--this._eventsCount?this._events=new it:(delete Zt[Bt],Zt.removeListener&&this.emit("removeListener",Bt,at.listener||Tt));else if("function"!=typeof at){for(xn=-1,sr=at.length;sr-- >0;)if(at[sr]===Tt||at[sr].listener&&at[sr].listener===Tt){br=at[sr].listener,xn=sr;break}if(xn<0)return this;if(1===at.length){if(at[0]=void 0,0==--this._eventsCount)return this._events=new it,this;delete Zt[Bt]}else!function(In,nr){for(var Mr=nr,Kr=Mr+1,Fr=In.length;Kr<Fr;Mr+=1,Kr+=1)In[Mr]=In[Kr];In.pop()}(at,xn);Zt.removeListener&&this.emit("removeListener",Bt,br||Tt)}return this},Ce.prototype.removeAllListeners=function(Bt){var Tt,at;if(!(at=this._events))return this;if(!at.removeListener)return 0===arguments.length?(this._events=new it,this._eventsCount=0):at[Bt]&&(0==--this._eventsCount?this._events=new it:delete at[Bt]),this;if(0===arguments.length){for(var Zt,xn=Object.keys(at),sr=0;sr<xn.length;++sr)"removeListener"!==(Zt=xn[sr])&&this.removeAllListeners(Zt);return this.removeAllListeners("removeListener"),this._events=new it,this._eventsCount=0,this}if("function"==typeof(Tt=at[Bt]))this.removeListener(Bt,Tt);else if(Tt)do{this.removeListener(Bt,Tt[Tt.length-1])}while(Tt[0]);return this},Ce.prototype.listeners=function(Bt){var Tt,at=this._events;return at&&(Tt=at[Bt])?"function"==typeof Tt?[Tt.listener||Tt]:function(Zt){for(var xn=new Array(Zt.length),sr=0;sr<xn.length;++sr)xn[sr]=Zt[sr].listener||Zt[sr];return xn}(Tt):[]},Ce.listenerCount=function(Bt,Tt){return"function"==typeof Bt.listenerCount?Bt.listenerCount(Tt):mt.call(Bt,Tt)},Ce.prototype.listenerCount=mt,Ce.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Wt=function(Bt){function Tt(at){var Zt=Bt.call(this)||this;return Zt.timeout=at?.timeout||3e4,Zt}return h(Tt,Bt),Tt.prototype.clearTimeoutCheck=function(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)},Tt.prototype.startTimeoutCheck=function(){var at=this;!this.timeoutTimer&&!this.finished&&this.timeout>0&&(this.timeoutTimer=setTimeout(function(){at.finished||(at.finished=!0,at.data=null,at.emit("timeout")),at.clearTimeoutCheck()},this.timeout))},Tt}(Ce),en=function(Bt){function Tt(at){var Zt=Bt.call(this,at)||this;return Zt.uuid=L(),Zt.domParams=at||{},Zt}return h(Tt,Bt),Tt.prototype.jsonp=function(){var at=this;if(!this.finished){var Zt=this.domParams,xn=Zt.url,sr=Zt.jsonpCallbackName,br=void 0===sr?"callback":sr,In=Zt.body,nr=Zt.integrity;this.script=document.createElement("script"),nr&&(this.script.integrity=nr,this.script.crossOrigin="anonymous");var Mr="";In&&Object.entries(In).forEach(function(Kr){Mr+=(Mr?"&":"")+Kr[0]+"="+Kr[1]}),Mr+=(Mr?"&":"")+br+"="+this.uuid,this.script.src=xn+(xn.includes("?")?"":"?")+Mr,this.jsonpCallback(),this.progressMonitory=_t(function(Kr){at.finished||at.emit("progressUpdated",Kr)}),document.body.appendChild(this.script)}},Tt.prototype.clearSideEffect=function(at){if(void 0===at&&(at=!1),document.body.removeChild(this.script),at){var Zt=this.uuid;window[this.uuid]=function(){window[Zt]&&delete window[Zt]}}else delete window[this.uuid];this.script=null,this.uuid=null,this.finished=!0,this.data=null,this.clearTimeoutCheck()},Tt.prototype.jsonpCallback=function(){var at=this;this.script.onerror=function(Zt){var xn;at.finished||(at.clearSideEffect(),null===(xn=at.progressMonitory)||void 0===xn||xn.abort(),at.emit("error",new Error("string"==typeof Zt?Zt:"load jsonp script failed")))},window[this.uuid]=function(Zt){var xn;if(!at.finished){var sr=at.domParams,br=sr.encoding,In=sr.blobType,nr=sr.unZipOptions,Mr=sr.beforeTransformData,Kr=sr.afterTransformData;null===(xn=at.progressMonitory)||void 0===xn||xn.finish(),at.clearSideEffect(),(Mr?Mr(Zt||""):Promise.resolve(Zt||"")).then(function(Fr){return Xt(Fr,{encoding:br,blobType:In,unZipOptions:nr}).then(function($i){return(Kr?Kr($i):Promise.resolve($i)).then(function(Qi){return at.emit("finished",Qi)})})}).catch(function(Fr){return at.emit("error",Fr)})}}},Tt.prototype.abort=function(){this.clearSideEffect(!0)},Tt}(Wt),rn=function(Bt){function Tt(at){var Zt=Bt.call(this,at)||this;return Zt.socketParams=at||{},Zt}return h(Tt,Bt),Tt.prototype.write=function(at,Zt){at&&!this.finished&&(at instanceof Error?this.handleError(at):(this.data?this.appendData(at):this.data=at,this.handlePerCentUpdate(Zt)))},Tt.prototype.handlePerCentUpdate=function(at){void 0===at||this.finished||this.emit("progressUpdated",at)},Tt.prototype.handleError=function(at){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.emit("error",at)},Tt.prototype.appendData=function(at){D(at)===D(this.data)?"string"==typeof at?this.data+=at:Blob&&at instanceof Blob?this.data=new Blob([this.data,at],{type:at.type}):ArrayBuffer&&at instanceof ArrayBuffer&&(this.data=C(this.data,at)):this.handleError(new Error("every piece of the data format must be the same"))},Tt.prototype.end=function(at){var Zt=this;if(!this.finished){this.handlePerCentUpdate(100),at&&this.write(at);var xn=this.socketParams,sr=xn.encoding,br=xn.blobType,In=xn.unZipOptions,nr=xn.beforeTransformData,Mr=xn.afterTransformData;(nr?nr(this.data):Promise.resolve(this.data)).then(function(Kr){return Xt(Kr,{encoding:sr,blobType:br,unZipOptions:In}).then(function(Fr){return(Mr?Mr(Fr):Promise.resolve(Fr)).then(function($i){return Zt.emit("finished",$i)})})}).catch(function(Kr){return Zt.emit("error",Kr)}),this.data=null,this.finished=!0,this.clearTimeoutCheck()}},Tt.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck()},Tt}(Wt),on=function(Bt){function Tt(at){var Zt=Bt.call(this,at)||this;return Zt.xhrParams=at||{},Zt.xhrParams.headers=g({},Zt.xhrParams.headers||{}),Zt}return h(Tt,Bt),Tt.prototype.supportFetch=function(){return!!window.fetch&&window.AbortController&&window.Request},Tt.prototype.ajax=function(){var at=this;if(!this.finished)if(this.xhrParams.url){var Zt=this.xhrParams,xn=Zt.headers,sr=void 0===xn?{}:xn,br=Zt.url,In=Zt.body,nr=void 0===In?{}:In,Mr=Zt.method,Kr=void 0===Mr?"POST":Mr,Fr=Zt.encoding,$i=Zt.integrity;this.controller=this.supportFetch()?new AbortController:new XMLHttpRequest;var Qi=this.supportFetch()?_t(function(Bi){at.finished||at.emit("progressUpdated",Bi)}):null;(this.supportFetch()?fetch(new Request(br,g({method:Kr,headers:sr,body:"GET"===Kr?void 0:JSON.stringify(nr),signal:this.controller.signal},$i?{integrity:$i,mode:"cors"}:{}))).then(function(Bi){return Bi.ok?Fr===i.TransformDataFormat.STRING?Bi.text():Fr===i.TransformDataFormat.ARRAY_BUFFER?Bi.arrayBuffer():Bi.blob():Promise.reject(new Error("xhr download "+br+" failed!"))}):new Promise(function(Bi,Fi){var Ki=new XMLHttpRequest;at.controller=Ki,Ki.open(Kr,br),Ki.responseType=Fr===i.TransformDataFormat.STRING?"text":Fr===i.TransformDataFormat.ARRAY_BUFFER?"arraybuffer":"blob",Object.entries(sr).forEach(function(Nr){Ki.setRequestHeader(Nr[0],Nr[1])}),Ki.onload=function(){var Nr=Ki.status,ho=Ki.statusText;Nr>=200&&Nr<300||304===Nr?Bi(Ki.response):Fi(new Error(Nr+": "+ho))},Ki.onprogress=function(Nr){var Sl=Nr||{},ho=Sl.total,zc=Sl.loaded;void 0===zc||at.finished||(ho?at.emit("progressUpdated",zc/ho*100):zc&&!Qi&&(Qi=_t(function(Cs){at.finished||at.emit("progressUpdated",Cs)})))},Ki.onerror=function(){Fi(new Error("xhr download "+br+" failed!"))},Ki.send(JSON.stringify(nr))})).then(function(Bi){if(!at.finished){var Fi=at.xhrParams,Ki=Fi.encoding,Nr=Fi.blobType,Sl=Fi.unZipOptions,ho=Fi.beforeTransformData,zc=Fi.afterTransformData;Qi?.finish(),at.finished=!0,at.clearTimeoutCheck(),(ho?ho(Bi):Promise.resolve(Bi)).then(function(Cs){return Xt(Cs,{encoding:Ki,blobType:Nr,unZipOptions:Sl}).then(function(Oh){return(zc?zc(Oh):Promise.resolve(Oh)).then(function(Zo){return at.emit("finished",Zo)})})}).catch(function(Cs){return at.emit("error",Cs)})}}).catch(function(Bi){at.finished||(at.finished=!0,at.clearTimeoutCheck(),Qi?.abort(),at.emit("error",Bi))})}else this.emit("error",new Error("xhrDownloader url params invalid!"))},Tt.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.controller.abort()},Tt}(Wt),hr=0;Ce.defaultMaxListeners=500;var Hn,Er=new Ce,or="ThreadPoolReady",xr=function(){hr-=1,Er.emit(or)};(Hn=i.DownloaderType||(i.DownloaderType={})).XHR="xhr",Hn.DOM="dom",Hn.SOCKET="socket";var Wi=function(Bt){function Tt(at){var Zt=Bt.call(this)||this;return Zt.aborted=!1,Zt.downloadParmas=g({type:i.DownloaderType.XHR},at),Zt.id=L(),Zt}return h(Tt,Bt),Tt.prototype.start=function(){var at=this;hr+=1,this.progress=0,this.emit("downloadStart"),this.onDownloadStartCallback&&this.onDownloadStartCallback();var Zt=this.downloadParmas,sr=Zt.xhrParams,br=Zt.domParams,In=Zt.socketParams;switch(Zt.type){case i.DownloaderType.DOM:this.downloader=new en(br),this.downloader.jsonp();break;case i.DownloaderType.SOCKET:this.downloader=new rn(In);break;default:this.downloader=new on(sr),this.downloader.ajax()}return this.downloader.startTimeoutCheck(),this.downloader.on("error",function(nr){at.emit("error",nr),at.onErrorCallback&&at.onErrorCallback(nr),xr()}).on("finished",function(nr){at.emit("complete",nr),at.onCompleteCallback&&at.onCompleteCallback(nr),xr()}).on("progressUpdated",function(nr){at.progress=nr,at.emit("progressUpdated",nr),at.onProgressUpdatedCallback&&at.onProgressUpdatedCallback(nr)}).on("timeout",function(){at.emit("timeout"),at.onTimeoutCallback&&at.onTimeoutCallback(),xr()}),this},Tt.prototype.abort=function(){if(this.aborted)return this;this.aborted=!0,this.downloader&&!this.downloader.finished&&this.downloader.abort();var at=new Error("file download has been aborted");return this.emit("abort",at),this.onAbortCallback&&this.onAbortCallback(at),xr(),this},Tt.prototype.onDownloadStart=function(at){return this.onDownloadStartCallback=at,this},Tt.prototype.onProgressUpdated=function(at){return this.onProgressUpdatedCallback=at,this},Tt.prototype.onError=function(at){return this.onErrorCallback=at,this},Tt.prototype.onComplete=function(at){return this.onCompleteCallback=at,this},Tt.prototype.onAbort=function(at){return this.onAbortCallback=at,this},Tt.prototype.onTimeout=function(at){return this.onTimeoutCallback=at,this},Tt.prototype.isInProgress=function(){return void 0!==this.progress},Tt.prototype.isFinished=function(){return 100===this.progress},Tt}(Ce),Si=function(){function Bt(Tt){this.taskList=[],this.options=Tt||{};var at=this.options.threadLimit;if((void 0===at?6:at)>6)throw new Error("threadLimit must be lower than 6");Er.on(or,this.startNextTask.bind(this))}return Bt.prototype.download=function(Tt){var at=new Wi(Tt),Zt=this.removeTask.bind(this,at);return at.on("abort",Zt),this.taskList.push(at),this.checkTaskReady(at),at},Bt.prototype.startNextTask=function(){var Tt=this.taskList.find(function(at){return!at.isInProgress()});Tt&&this.checkTaskReady(Tt)},Bt.prototype.checkTaskReady=function(Tt){var at=this.options.threadLimit,Zt=void 0===at?6:at;if(!(this.taskList.findIndex(function(sr){return!sr.isInProgress()})>=Zt||hr+1>6)){var xn=this.removeTask.bind(this,Tt);Tt.on("complete",xn),Tt.on("error",xn),Tt.on("timeout",xn),setTimeout(function(){return Tt.start()},0)}},Bt.prototype.removeTask=function(Tt){var at=this;this.taskList.some(function(Zt,xn){return Zt===Tt&&(setTimeout(function(){return Tt.removeAllListeners()},0),at.taskList.splice(xn,1),!0)})},Bt}();i.DownloadTask=Wi,i.IDownloadManager=Si,i.appendBuffer=C,i.arrayBufferToBlob=W,i.arrayBufferToString=X,i.blobToArrayBuffer=V,i.blobToText=G,i.genUuid=L,i.getDataFormat=D,i.getExtName=_e,i.getFileName=Ne,i.getFullPathName=Re,i.isImgFile=et,i.isJsonFile=ht,i.isVersionFile=ze,i.monitorProgress=_t,i.sep=w,i.stringToArrayBuffer=me,i.stringToBlob=ne,i.transformData=Xt,Object.defineProperty(i,"__esModule",{value:!0})})(Sb,jr(Object.freeze({__proto__:null,default:{}}))),Sv(Sb),function(i,u){var l=function(_t,it){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ce,Ye){Ce.__proto__=Ye}||function(Ce,Ye){for(var Ge in Ye)Ye.hasOwnProperty(Ge)&&(Ce[Ge]=Ye[Ge])})(_t,it)};function h(_t,it){function Ce(){this.constructor=_t}l(_t,it),_t.prototype=null===it?Object.create(it):(Ce.prototype=it.prototype,new Ce)}var g=function(){return g=Object.assign||function(_t){for(var it,Ce=1,Ye=arguments.length;Ce<Ye;Ce++)for(var Ge in it=arguments[Ce])Object.prototype.hasOwnProperty.call(it,Ge)&&(_t[Ge]=it[Ge]);return _t},g.apply(this,arguments)};function y(){}function C(){C.init.call(this)}function w(_t){return void 0===_t._maxListeners?C.defaultMaxListeners:_t._maxListeners}function D(_t,it,Ce,Ye){var Ge,ut,mt,Wt;if("function"!=typeof Ce)throw new TypeError('"listener" argument must be a function');if((ut=_t._events)?(ut.newListener&&(_t.emit("newListener",it,Ce.listener?Ce.listener:Ce),ut=_t._events),mt=ut[it]):(ut=_t._events=new y,_t._eventsCount=0),mt){if("function"==typeof mt?mt=ut[it]=Ye?[Ce,mt]:[mt,Ce]:Ye?mt.unshift(Ce):mt.push(Ce),!mt.warned&&(Ge=w(_t))&&Ge>0&&mt.length>Ge){mt.warned=!0;var St=new Error("Possible EventEmitter memory leak detected. "+mt.length+" "+it+" listeners added. Use emitter.setMaxListeners() to increase limit");St.name="MaxListenersExceededWarning",St.emitter=_t,St.type=it,St.count=mt.length,Wt=St,"function"==typeof console.warn?console.warn(Wt):console.log(Wt)}}else mt=ut[it]=Ce,++_t._eventsCount;return _t}function N(_t,it,Ce){var Ye=!1;function Ge(){_t.removeListener(it,Ge),Ye||(Ye=!0,Ce.apply(_t,arguments))}return Ge.listener=Ce,Ge}function L(_t){var it=this._events;if(it){var Ce=it[_t];if("function"==typeof Ce)return 1;if(Ce)return Ce.length}return 0}function V(_t,it){for(var Ce=new Array(it);it--;)Ce[it]=_t[it];return Ce}y.prototype=Object.create(null),C.EventEmitter=C,C.usingDomains=!1,C.prototype.domain=void 0,C.prototype._events=void 0,C.prototype._maxListeners=void 0,C.defaultMaxListeners=10,C.init=function(){this.domain=null,C.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new y,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(_t){if("number"!=typeof _t||_t<0||isNaN(_t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=_t,this},C.prototype.getMaxListeners=function(){return w(this)},C.prototype.emit=function(_t){var it,Ce,Ye,Ge,ut,mt,St,Wt="error"===_t;if(mt=this._events)Wt=Wt&&null==mt.error;else if(!Wt)return!1;if(St=this.domain,Wt){if(it=arguments[1],!St){if(it instanceof Error)throw it;var en=new Error('Uncaught, unspecified "error" event. ('+it+")");throw en.context=it,en}return it||(it=new Error('Uncaught, unspecified "error" event')),it.domainEmitter=this,it.domain=St,it.domainThrown=!1,St.emit("error",it),!1}if(!(Ce=mt[_t]))return!1;var rn="function"==typeof Ce;switch(Ye=arguments.length){case 1:!function(on,hr,Hn){if(hr)on.call(Hn);else for(var Er=on.length,or=V(on,Er),xr=0;xr<Er;++xr)or[xr].call(Hn)}(Ce,rn,this);break;case 2:!function(on,hr,Hn,Er){if(hr)on.call(Hn,Er);else for(var or=on.length,xr=V(on,or),Wi=0;Wi<or;++Wi)xr[Wi].call(Hn,Er)}(Ce,rn,this,arguments[1]);break;case 3:!function(on,hr,Hn,Er,or){if(hr)on.call(Hn,Er,or);else for(var xr=on.length,Wi=V(on,xr),Si=0;Si<xr;++Si)Wi[Si].call(Hn,Er,or)}(Ce,rn,this,arguments[1],arguments[2]);break;case 4:!function(on,hr,Hn,Er,or,xr){if(hr)on.call(Hn,Er,or,xr);else for(var Wi=on.length,Si=V(on,Wi),Bt=0;Bt<Wi;++Bt)Si[Bt].call(Hn,Er,or,xr)}(Ce,rn,this,arguments[1],arguments[2],arguments[3]);break;default:for(Ge=new Array(Ye-1),ut=1;ut<Ye;ut++)Ge[ut-1]=arguments[ut];!function(on,hr,Hn,Er){if(hr)on.apply(Hn,Er);else for(var or=on.length,xr=V(on,or),Wi=0;Wi<or;++Wi)xr[Wi].apply(Hn,Er)}(Ce,rn,this,Ge)}return!0},C.prototype.on=C.prototype.addListener=function(_t,it){return D(this,_t,it,!1)},C.prototype.prependListener=function(_t,it){return D(this,_t,it,!0)},C.prototype.once=function(_t,it){if("function"!=typeof it)throw new TypeError('"listener" argument must be a function');return this.on(_t,N(this,_t,it)),this},C.prototype.prependOnceListener=function(_t,it){if("function"!=typeof it)throw new TypeError('"listener" argument must be a function');return this.prependListener(_t,N(this,_t,it)),this},C.prototype.removeListener=function(_t,it){var Ce,Ye,Ge,ut,mt;if("function"!=typeof it)throw new TypeError('"listener" argument must be a function');if(!(Ye=this._events))return this;if(!(Ce=Ye[_t]))return this;if(Ce===it||Ce.listener&&Ce.listener===it)0==--this._eventsCount?this._events=new y:(delete Ye[_t],Ye.removeListener&&this.emit("removeListener",_t,Ce.listener||it));else if("function"!=typeof Ce){for(Ge=-1,ut=Ce.length;ut-- >0;)if(Ce[ut]===it||Ce[ut].listener&&Ce[ut].listener===it){mt=Ce[ut].listener,Ge=ut;break}if(Ge<0)return this;if(1===Ce.length){if(Ce[0]=void 0,0==--this._eventsCount)return this._events=new y,this;delete Ye[_t]}else!function(St,Wt){for(var en=Wt,rn=en+1,on=St.length;rn<on;en+=1,rn+=1)St[en]=St[rn];St.pop()}(Ce,Ge);Ye.removeListener&&this.emit("removeListener",_t,mt||it)}return this},C.prototype.removeAllListeners=function(_t){var it,Ce;if(!(Ce=this._events))return this;if(!Ce.removeListener)return 0===arguments.length?(this._events=new y,this._eventsCount=0):Ce[_t]&&(0==--this._eventsCount?this._events=new y:delete Ce[_t]),this;if(0===arguments.length){for(var Ye,Ge=Object.keys(Ce),ut=0;ut<Ge.length;++ut)"removeListener"!==(Ye=Ge[ut])&&this.removeAllListeners(Ye);return this.removeAllListeners("removeListener"),this._events=new y,this._eventsCount=0,this}if("function"==typeof(it=Ce[_t]))this.removeListener(_t,it);else if(it)do{this.removeListener(_t,it[it.length-1])}while(it[0]);return this},C.prototype.listeners=function(_t){var it,Ce=this._events;return Ce&&(it=Ce[_t])?"function"==typeof it?[it.listener||it]:function(Ye){for(var Ge=new Array(Ye.length),ut=0;ut<Ge.length;++ut)Ge[ut]=Ye[ut].listener||Ye[ut];return Ge}(it):[]},C.listenerCount=function(_t,it){return"function"==typeof _t.listenerCount?_t.listenerCount(it):L.call(_t,it)},C.prototype.listenerCount=L,C.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var G="ZipInfo:";function W(_t){var it;return null===(it=_t?.path)||void 0===it?void 0:it.startsWith(G)}function X(_t){return"string"==typeof _t&&_t.startsWith(G)}function ne(_t,it){return(Array.isArray(_t)?_t:[_t]).some(function(Ce){if("number"!=typeof Ce.version)throw new Error("file version must be an int number");return Ce.version<it})}function me(_t,it){return _t.reduce(function(Ce,Ye){return Ce.then(function(Ge){return it(Ge,Ye)}).catch(function(){return it(void 0,Ye)})},Promise.resolve(void 0))}var _e,Re=function(_t){function it(){return null!==_t&&_t.apply(this,arguments)||this}return h(it,_t),it}(C),Ne="resource",et=function(_t){function it(Ce){var Wt,Ye=_t.call(this)||this;if(Ye.ready=!1,Ye.openError=!1,Ye.isEnable()){var Ge=Ce||{},mt=Ge.indexDbVersion;Ye.dbName="resource-manager"+((Wt=Ge.nameSpaceId)?"-"+Wt:"");var St=indexedDB.open(Ye.dbName,mt||1);St.addEventListener("error",function(){Ye.openError=!0,Ye.checkReady(),Ye.emit("error",new Error("failed to open indexedDB"))}),St.addEventListener("success",function(){Ye.db=St.result,Ye.checkReady()}),St.addEventListener("upgradeneeded",function(){Ye.db=St.result,Ye.handleSuccess()}),setTimeout(function(){Ye.checkReady()},5e3)}else Ye.checkReady();return Ye}return h(it,_t),it.prototype.checkReady=function(){this.ready||(this.ready=!0,this.emit("ready"))},it.prototype.handleSuccess=function(){if(!this.db.objectStoreNames||0===this.db.objectStoreNames.length||!this.db.objectStoreNames.contains(Ne)){var Ce=this.db.createObjectStore(Ne,{keyPath:"path",autoIncrement:!1});Ce.createIndex("path","path"),Ce.createIndex("sourceURL","sourceURL",{unique:!1})}},it.prototype.createAction=function(Ce){var Ye=this.db.transaction([Ne],Ce||"readonly");return{trans:Ye,store:Ye.objectStore(Ne)}},it.prototype.handleAction=function(Ce,Ye){return new Promise(function(Ge,ut){var mt=Ye();Ce.addEventListener("complete",function(){Ge(mt.result)}),Ce.addEventListener("error",function(){ut(Ce.error||new Error("transaction error"))}),Ce.addEventListener("abort",function(){ut(Ce.error||new Error("transaction aborted"))})})},it.prototype.put=function(){for(var Ce=[],Ye=0;Ye<arguments.length;Ye++)Ce[Ye]=arguments[Ye];var Ge=this.createAction("readwrite"),mt=Ge.store;return this.handleAction(Ge.trans,function(){return mt.put.apply(mt,Ce)})},it.prototype.getAllKeysFromIndex=function(Ce){for(var Ye=[],Ge=1;Ge<arguments.length;Ge++)Ye[Ge-1]=arguments[Ge];if(IDBObjectStore.prototype.getAllKeys){var ut=this.createAction(),St=ut.store;return this.handleAction(ut.trans,function(){var Wt;return(Wt=St.index(Ce)).getAllKeys.apply(Wt,Ye)})}return this.openKeyCursor(Ce)},it.prototype.getAllFromIndex=function(Ce){for(var Ye=[],Ge=1;Ge<arguments.length;Ge++)Ye[Ge-1]=arguments[Ge];var ut=this.createAction(),St=ut.store;return IDBObjectStore.prototype.getAll?this.handleAction(ut.trans,function(){var Wt;return(Wt=St.index(Ce)).getAll.apply(Wt,Ye)}):this.openCursor(Ce)},it.prototype.getFromIndex=function(Ce){for(var Ye=[],Ge=1;Ge<arguments.length;Ge++)Ye[Ge-1]=arguments[Ge];var ut=this.createAction(),St=ut.store;return this.handleAction(ut.trans,function(){var Wt;return(Wt=St.index(Ce)).get.apply(Wt,Ye)})},it.prototype.deleteKey=function(){for(var Ce=[],Ye=0;Ye<arguments.length;Ye++)Ce[Ye]=arguments[Ye];var Ge=this.createAction("readwrite"),mt=Ge.store;return this.handleAction(Ge.trans,function(){return mt.delete.apply(mt,Ce)})},it.prototype.handleCursorAction=function(Ce,Ye,Ge,ut){return new Promise(function(mt,St){Ye.addEventListener("success",function(){Ye.result?(Ge(ut,Ye.result),Ye.result.continue()):mt(ut)}),Ye.addEventListener("error",function(){St(Ce.error||new Error("transaction error"))})})},it.prototype.openKeyCursor=function(Ce){for(var Ye,Ge=[],ut=1;ut<arguments.length;ut++)Ge[ut-1]=arguments[ut];var mt=this.createAction("readwrite");return this.handleCursorAction(mt.trans,(Ye=mt.store.index(Ce)).openKeyCursor.apply(Ye,Ge),function(en,rn){return en.push(rn.key),en},[])},it.prototype.openCursor=function(Ce){for(var Ye,Ge=[],ut=1;ut<arguments.length;ut++)Ge[ut-1]=arguments[ut];var mt=this.createAction("readwrite");return this.handleCursorAction(mt.trans,(Ye=mt.store.index(Ce)).openCursor.apply(Ye,Ge),function(en,rn){return en.push(rn.value),en},[])},it.prototype.isEnable=function(){return!!window.indexedDB&&!this.openError},it.prototype.saveFile=function(Ce){return this.db?this.put(Ce).then(function(){return!0}):Promise.resolve(!1)},it.prototype.removeFile=function(Ce){var Ye=this;return this.db?"string"==typeof Ce?this.getAllKeysFromIndex("path").then(function(Ge){var ut=(Ge||[]).filter(function(mt){return mt===Ce||mt.startsWith(""+Ce+u.sep)});return Promise.all(ut.map(function(mt){return Ye.deleteKey(mt)}))}).then(function(){return!0}):this.deleteKey(Ce.path).then(function(){return!0}):Promise.resolve(!1)},it.prototype.clear=function(){if(!this.db)return Promise.resolve(!1);var Ce=this.createAction("readwrite"),Ge=Ce.store;return this.handleAction(Ce.trans,function(){return Ge.clear()}).then(function(){return!0})},it.prototype.findFileByPath=function(Ce){return this.db&&Ce?this.getFromIndex("path",Ce):Promise.resolve(void 0)},it.prototype.findFileBySourceURL=function(Ce){return this.db&&Ce?this.getAllFromIndex("sourceURL",Ce):Promise.resolve([])},it.prototype.isDirectory=function(Ce){var Ye=this;return this.db?new Promise(function(Ge){X(Ce)?Ge(!1):Ye.getAllKeysFromIndex("path").then(function(ut){return(ut||[]).some(function(mt){return mt.startsWith(""+Ce+u.sep)})}).then(Ge).catch(function(){return Ge(!1)})}):Promise.resolve(!1)},it.prototype.ls=function(Ce){var Ye=this;return this.db?this.getAllKeysFromIndex("path").then(function(Ge){var ut=[];return Promise.all((Ge||[]).map(function(mt){if(X(mt))return Promise.resolve(void 0);if(Ce){if(mt.startsWith(""+Ce+u.sep)){var St=mt.split(""+Ce+u.sep)[1]||"";if(St.includes(u.sep)){var Wt=""+Ce+u.sep+St.split(u.sep)[0];return Wt&&!ut.includes(Wt)?(ut.push(Wt),Promise.resolve(Wt)):Promise.resolve(void 0)}return Ye.getFromIndex("path",mt)}return Promise.resolve(void 0)}if(mt.includes(u.sep)){var en=mt.split(u.sep)[0]||"";return en&&!ut.includes(en)?(ut.push(en),Promise.resolve(en)):Promise.resolve(void 0)}return Ye.getFromIndex("path",mt)})).then(function(mt){return mt.filter(function(St){return!!St})})}):Promise.resolve([])},it}(Re),ht=function(_t){function it(){var Ce=null!==_t&&_t.apply(this,arguments)||this;return Ce.memoryFiles=[],Ce}return h(it,_t),it.prototype.isEnable=function(){return!0},it.prototype.saveFile=function(Ce){var Ye=this;return new Promise(function(Ge){Ye.memoryFiles.some(function(ut,mt){return ut.path===Ce.path&&(Ye.memoryFiles.splice(mt,1,Ce),!0)})||Ye.memoryFiles.push(Ce),Ge(!0)})},it.prototype.removeFile=function(Ce){var Ye=this;return new Promise(function(Ge){for(var ut=Ye.memoryFiles.length-1;ut>=0;ut--){var mt=Ye.memoryFiles[ut];("string"==typeof Ce&&(mt.path===Ce||mt.path.startsWith(""+Ce+u.sep))||Ce.path===mt.path)&&Ye.memoryFiles.splice(ut,1)}Ge(!0)})},it.prototype.clear=function(){var Ce=this;return new Promise(function(Ye){Ce.memoryFiles=[],Ye(!0)})},it.prototype.findFileByPath=function(Ce){var Ye=this;return new Promise(function(Ge){Ge(Ye.memoryFiles.filter(function(ut){return ut.path===Ce})[0])})},it.prototype.findFileBySourceURL=function(Ce){var Ye=this;return new Promise(function(Ge){Ge(Ye.memoryFiles.filter(function(ut){return ut.sourceURL===Ce}))})},it.prototype.isDirectory=function(Ce){var Ye=this;return new Promise(function(Ge){X(Ce)?Ge(!1):Ge(Ye.memoryFiles.some(function(ut){return ut.path.startsWith(""+Ce+u.sep)}))})},it.prototype.ls=function(Ce){var Ye=this;return new Promise(function(Ge){var ut=[];Ye.memoryFiles.forEach(function(mt){if(!W(mt))if(Ce){if(mt.path.startsWith(""+Ce+u.sep)){var St=mt.path.split(""+Ce+u.sep)[1]||"";if(St.includes(u.sep)){var Wt=""+Ce+u.sep+St.split(u.sep)[0];return void(Wt&&!ut.includes(Wt)&&ut.push(Wt))}ut.push(mt)}}else if(mt.path.includes(u.sep)){var en=mt.path.split(u.sep)[0]||"";en&&!ut.includes(en)&&ut.push(en)}else ut.push(mt)}),Ge(ut)})},it}(Re),ze=function(_t){function it(Ce){var ut,Ye=_t.call(this)||this;return Ye.isLocalAvaliable=void 0,Ye.isEnable()&&(Ye.storageName="resource-manager"+((ut=(Ce||{}).nameSpaceId)?"-"+ut:"")),Ye}return h(it,_t),it.prototype.isEnable=function(){if(void 0!==this.isLocalAvaliable)return this.isLocalAvaliable;try{this.isLocalAvaliable=!0,localStorage.setItem("privateTest","")}catch{this.isLocalAvaliable=!1}return this.isLocalAvaliable},it.prototype.saveFile=function(Ce){var Ye=this;return this.isEnable()?new Promise(function(Ge){var ut=Ye.getLocalFile();ut.some(function(mt,St){return mt.path===Ce.path&&(ut.splice(St,1,Ce),!0)})||ut.push(Ce),localStorage.setItem(Ye.storageName,JSON.stringify(ut)),Ge(!0)}):Promise.resolve(!1)},it.prototype.getLocalFile=function(){var Ce=localStorage.getItem(this.storageName),Ye=[];if(Ce)try{Ye=JSON.parse(Ce)||"[]"}catch(Ge){console.log(Ge)}return Ye},it.prototype.removeFile=function(Ce){var Ye=this;return this.isEnable()?new Promise(function(Ge){for(var ut=Ye.getLocalFile(),mt=ut.length-1;mt>=0;mt--){var St=ut[mt];("string"==typeof Ce&&(St.path===Ce||St.path.startsWith(""+Ce+u.sep))||Ce.path===St.path)&&ut.splice(mt,1)}localStorage.setItem(Ye.storageName,JSON.stringify(ut)),Ge(!0)}):Promise.resolve(!1)},it.prototype.clear=function(){var Ce=this;return this.isEnable()?new Promise(function(Ye){localStorage.removeItem(Ce.storageName),Ye(!0)}):Promise.resolve(!1)},it.prototype.findFileByPath=function(Ce){var Ye=this;return this.isEnable()?new Promise(function(Ge){Ge(Ye.getLocalFile().filter(function(ut){return ut.path===Ce})[0])}):Promise.resolve(void 0)},it.prototype.findFileBySourceURL=function(Ce){var Ye=this;return this.isEnable()?new Promise(function(Ge){Ge(Ye.getLocalFile().filter(function(ut){return ut.sourceURL===Ce}))}):Promise.resolve([])},it.prototype.isDirectory=function(Ce){var Ye=this;return this.isEnable()?new Promise(function(Ge){X(Ce)?Ge(!1):Ge(Ye.getLocalFile().some(function(ut){return ut.path.startsWith(""+Ce+u.sep)}))}):Promise.resolve(!1)},it.prototype.ls=function(Ce){var Ye=this;return this.isEnable()?new Promise(function(Ge){var ut=[];Ye.getLocalFile().forEach(function(mt){if(!W(mt))if(Ce){if(mt.path.startsWith(""+Ce+u.sep)){var St=mt.path.split(""+Ce+u.sep)[1]||"";if(St.includes(u.sep)){var Wt=""+Ce+u.sep+St.split(u.sep)[0];return void(Wt&&!ut.includes(Wt)&&ut.push(Wt))}ut.push(mt)}}else if(mt.path.includes(u.sep)){var en=mt.path.split(u.sep)[0]||"";en&&!ut.includes(en)&&ut.push(en)}else ut.push(mt)}),Ge(ut)}):Promise.resolve([])},it}(Re);(_e=i.FileStoreEnum||(i.FileStoreEnum={})).MEMORY="memoryStore",_e.INDEX_DB="indexedDBStore",_e.STORAGE="storageStore";var Qe=function(_t){function it(Ce){var Ye=_t.call(this)||this;return Ye.indexedDBStore=new et(Ce),Ye.memoryStore=new ht,Ye.storageStore=new ze(Ce),Ye}return h(it,_t),it.prototype.saveFile=function(Ce,Ye,Ge){var ut=this;void 0===Ye&&(Ye=!0);var mt=(Ge||{}).forceSpecifyStore;return(Ye?this.findFileByPath(Ce.path,Ge):Promise.resolve(void 0)).then(function(St){if(St?.version&&ne(Ce,St.version))throw new Error("there is an higher version file existed already");var Wt=g(g({},Ce),{createTime:St&&St.createTime||Date.now(),updateTime:Date.now()});return mt&&ut[mt]&&ut[mt].isEnable()&&(mt!==i.FileStoreEnum.STORAGE||ut.isLocalStorageAvaliable(Wt))?ut[mt].saveFile(Wt):ut[ut.saveToTargetStoreRule(Wt)].saveFile(Wt)})},it.prototype.isLocalStorageAvaliable=function(Ce){var Ye=Ce.data;return"string"===u.getDataFormat(Ye)&&Ye.length<=102400&&this.storageStore.isEnable()},it.prototype.saveToTargetStoreRule=function(Ce){return this.indexedDBStore.isEnable()?i.FileStoreEnum.INDEX_DB:this.isLocalStorageAvaliable(Ce)?i.FileStoreEnum.STORAGE:i.FileStoreEnum.MEMORY},it.prototype.removeFile=function(Ce,Ye){var Ge=(Ye||{}).forceSpecifyStore;return Ge&&this[Ge]?this[Ge].removeFile(Ce):Promise.all([this.indexedDBStore.removeFile(Ce),this.storageStore.removeFile(Ce),this.memoryStore.removeFile(Ce)]).then(function(){return!0})},it.prototype.clear=function(Ce){var Ye=(Ce||{}).forceSpecifyStore;return Ye&&this[Ye]?this[Ye].clear():Promise.all([this.indexedDBStore.clear(),this.storageStore.clear(),this.memoryStore.clear()]).then(function(){return!0})},it.prototype.findFileByPath=function(Ce,Ye){var Ge=this,ut=(Ye||{}).forceSpecifyStore;return ut&&this[ut]?this[ut].findFileByPath(Ce):me(this.searchInTargetStoreRule(),function(mt,St){return mt?Promise.resolve(mt):Ge[St].findFileByPath(Ce)})},it.prototype.findFileBySourceURL=function(Ce,Ye){var Ge=this,ut=(Ye||{}).forceSpecifyStore;return ut&&this[ut]?this[ut].findFileBySourceURL(Ce):me(this.searchInTargetStoreRule(),function(mt,St){return Ge[St].findFileBySourceURL(Ce).then(function(Wt){return mt?mt.filter(function(en){return!Wt.some(function(rn){return rn.path===en.path})}).concat(Wt||[]):Wt||[]})})},it.prototype.searchInTargetStoreRule=function(){return[i.FileStoreEnum.INDEX_DB,i.FileStoreEnum.STORAGE,i.FileStoreEnum.MEMORY]},it.prototype.isDirectory=function(Ce){var Ye=this;return Ce?me(this.searchInTargetStoreRule(),function(Ge,ut){return Ge?Promise.resolve(!0):Ye[ut].isDirectory(Ce)}):Promise.resolve(!0)},it.prototype.ls=function(Ce){var Ye=this;return this.isDirectory(Ce).then(function(Ge){if(!Ge)throw new Error("path: "+Ce+" is an invalid directory path");return me(Ye.searchInTargetStoreRule(),function(ut,mt){return Ye[mt].ls(Ce).then(function(St){return ut?(St||[]).concat(ut.filter(function(Wt){return!St.some(function(en){return"string"==typeof Wt?en===Wt:"string"!=typeof en&&en.path===Wt.path})})):St})})})},it}(C),wt=function(_t){function it(){return null!==_t&&_t.apply(this,arguments)||this}return h(it,_t),it}(C),Xt=function(_t){function it(Ce){var Ye=_t.call(this)||this,Ge=Ce||{},ut=Ge.storeOptions;return Ye.downloadManager=new u.IDownloadManager(Ge.downloadManagerOptions),Ye.store=new Qe(ut),Ye.store.indexedDBStore.on("ready",function(){return Ye.emit("ready")}),Ye}return h(it,_t),it.prototype.getFile=function(Ce,Ye,Ge){var ut=this,mt=new wt,St=Promise.resolve(void 0),Wt=Ye||{},en=Wt.downloadOptions,on=Wt.saveRootPath;Wt.forceDownload?St=Promise.resolve(void 0):"string"==typeof Ce?St=this.store.findFileByPath(Ce,Ge):Ce?.sourceURL?St=this.store.findFileBySourceURL(Ce.sourceURL):en&&(en.domParams||en.socketParams||en.xhrParams)&&(St=this.store.findFileBySourceURL(this.genSourceURL(en)));var hr=null,Hn=new Promise(function(Er){hr=Er});return mt.getDownloadTask=function(){return Hn},St=St.then(function(Er){if(Er&&(!Array.isArray(Er)||Er.length)){var or=Er;if(Array.isArray(or)){var xr=or.find(function(Si){return W(Si)});if(!xr)return;or=or.filter(function(Si){return!W(Si)});var Wi=xr.data;if("string"!=typeof Wi||!JSON.parse(Wi||"[]").every(function(Si){return or.some(function(Bt){return Bt.path===Si})}))return}if(!Ge?.targetVersion||!ne(or,Ge.targetVersion))return mt.emit("checkExpire",!1),or;mt.emit("checkExpire",!0)}}).then(function(Er){if(!Er&&en){var or=ut.downloadManager.download(en);return hr(or),new Promise(function(xr,Wi){or.on("complete",function(Si){setTimeout(function(){var Bt=Array.isArray(Si)?Si.map(function(at){var Zt=at.data,sr=at.extName;return{path:ut.genFilePath(on,at.path),sourceURL:ut.genSourceURL(en),data:Zt,fileFormat:sr||ut.getFileFormat(en),version:Ge?.targetVersion||1}}):{path:ut.genFilePath(on,void 0),sourceURL:ut.genSourceURL(en),data:Si,fileFormat:ut.getFileFormat(en),version:Ge?.targetVersion||1};if(Array.isArray(Bt)&&"string"==typeof Ce&&Ce){var Tt=Bt.find(function(at){return at.path===Ce});xr(Tt||Bt)}else xr(Bt);mt.emit("beforeSet",Bt),ut.beforeWrite(Bt,Ge).then(function(){mt.emit("afterSet")}).catch(function(at){return mt.emit("afterSet",at)})},0)}),or.on("abort",Wi),or.on("error",Wi),or.on("timeout",function(){return Wi(new Error("download timeout"))})})}return hr(void 0),Er}).catch(function(Er){return hr(void 0),Promise.reject(Er)}),mt.getResult=function(){return St},mt},it.prototype.genSourceURL=function(Ce){var Ge=Ce.type;if(Ge===u.DownloaderType.SOCKET)return null;var mt=(Ge===u.DownloaderType.DOM?Ce.domParams:Ce.xhrParams)||{},St=mt.url,Wt=void 0===St?"":St,en=mt.body;return en&&Object.keys(en).length?Wt+(Wt.includes("?")?"&":"?")+"downloadBodyParams="+JSON.stringify(en):Wt},it.prototype.updateFile=function(Ce,Ye){return this.saveStore(Ce,!0,Ye)},it.prototype.beforeWrite=function(Ce,Ye){var ut,mt,Ge=this;return Array.isArray(Ce)?Promise.all(Ce.concat((ut=Ce,mt=ut[0].sourceURL||"",{path:""+G+mt,sourceURL:mt,data:JSON.stringify(ut.map(function(St){return St.path}))})).map(function(ut){return Ge.saveStore(ut,!1,Ye)})).then(function(ut){return ut.filter(function(mt){return!W(mt)})}):this.saveStore(Ce,!0,Ye)},it.prototype.getFileFormat=function(Ce){var Ye=Ce||{},Ge=Ye.xhrParams,ut=Ye.domParams,mt=Ye.socketParams,St=Ye.type;return St===u.DownloaderType.DOM&&ut?.fileFormat?ut.fileFormat:St===u.DownloaderType.SOCKET&&mt?.fileFormat?mt.fileFormat:Ge?.fileFormat?Ge.fileFormat:"unknow"},it.prototype.genFilePath=function(Ce,Ye){return Ye?""+(Ce||"")+(Ce?u.sep:"")+Ye:Ce||""},it.prototype.saveStore=function(Ce,Ye,Ge){return void 0===Ye&&(Ye=!0),this.store.saveFile(Ce,Ye,Ge).then(function(ut){if(ut)return Ce;throw new Error("fail to save file in local store")})},it.prototype.remove=function(Ce,Ye){return this.store.removeFile(Ce,Ye)},it.prototype.clear=function(Ce){return this.store.clear(Ce)},it.prototype.list=function(Ce){return this.store.ls(Ce)},it.prototype.updateVersion=function(Ce,Ye){var Ge=this;return this.store.findFileByPath(Ce).then(function(ut){if(ut)return Ge.saveStore(g(g({},ut),{version:Ye})).then(function(){});throw new Error("the target path: "+Ce+" isn't existed")})},it.prototype.updateSourceURL=function(Ce,Ye){var Ge=this;return this.store.findFileByPath(Ce).then(function(ut){if(ut)return Ge.saveStore(g(g({},ut),{sourceURL:Ye})).then(function(){});throw new Error("the target path: "+Ce+" isn't existed")})},it}(C);i.IResourceManager=Xt,Object.defineProperty(i,"__esModule",{value:!0})}(aI.exports,Sb),Sv(aI.exports);class tD{constructor(u){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,u&&(this._cancelError=u),this._locked=!1}acquire(){const u=this.isLocked(),l=new Promise((h,g)=>this._queue.push({resolve:h,reject:g}));return u||this._dispatch(),l}runExclusive(u){var l=this;return F(function*(){const h=yield l.acquire();try{return yield u()}finally{h()}})()}waitForUnlock(){var u=this;return F(function*(){return u.isLocked()?new Promise(l=>u._waiters.push({resolve:l})):Promise.resolve()})()}isLocked(){return this._locked}release(){if(this._currentReleaser){const u=this._currentReleaser;this._currentReleaser=void 0,u()}}cancel(){this._queue.forEach(u=>u.reject(this._cancelError)),this._queue=[]}_dispatch(){const u=this._queue.shift();if(!u)return;let l=!1;this._currentReleaser=()=>{l||(l=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,u.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach(u=>u.resolve()),this._waiters=[]}}function cI(i,u,l){const h=document.createElement("script");h.type="text/javascript",h.readyState?h.onreadystatechange=()=>{"loaded"!==h.readyState&&"complete"!==h.readyState||(h.onreadystatechange=null,u())}:(h.onload=()=>{u()},h.onerror=()=>{l()}),h.src=i,window.crossOriginIsolated&&(h.crossOrigin="anonymous"),"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(h):document.getElementsByTagName("head")[0].appendChild(h)}function xA(i){if(i){var u;const l=document.getElementById(i);null==l||null===(u=l.parentNode)||void 0===u||u.removeChild(l)}}function I_(i){return`${i.tagName}${i.id?`#${i.id}`:""}${i.className?`.${i.className}`:""}`}let w_="zoom.us";const Cb="3.0.0",lI="https://dmogdx0jrul3u.cloudfront.net/3.0.0/lib/av",Bm="https://source.zoom.us/3.0.0/lib/av",LA="https://jssdk.zoomus.cn/3.0.0/lib/av",Os=(i,u,l)=>Eo(...[u,l].map((h,g)=>{if("initial"!==h)return kn(["success"===h]);{const y=0===g?"ENCODE":"DECODE";return Hu(Oo(`${i.toUpperCase()}_${y}_SUCCESS`,1).pipe(Ea(!0)),Oo(`${i.toUpperCase()}_${y}_FAIL`,1).pipe(Ea(!1)))}})),T_=i=>{const u=Yn(i.value);return u?Ii(u):Oo(cm,1).pipe(_o(fo),Nn(i),Bn(l=>{let[,h]=l;return Yn(h)}))};function nD(i,u){var l,h;const g="audio"===i?null===(l=u.audio)||void 0===l?void 0:l.audioSsrc:null===(h=u.video)||void 0===h?void 0:h.videoSsrc,y="audio"===i?lC:vM;return"audio"===i&&qo()||g?Promise.resolve():Lr(y)}const BA=()=>kn(navigator.mediaDevices.enumerateDevices()).pipe(Bn(i=>{const u=[],l=[],h=[];return i.forEach(g=>{const{kind:y,deviceId:C,label:w}=g,D=w.replace(/\([\w,\d]+:[\w,\d]+\)/i,"").trim();switch(y){case"audioinput":"communications"===C||/ZoomAudioDevice/i.test(D)||/Zoom-\S*/.test(D)||/CubebAggregateDevice\S*/.test(D)||/Microsoft Teams Audio/i.test(D)||u.push({deviceId:C,label:D});break;case"audiooutput":"communications"===C||/ZoomAudioDevice/i.test(D)||/Microsoft Teams Audio/i.test(D)||l.push({deviceId:C,label:D});break;case"videoinput":h.push({deviceId:C,label:D})}}),{microphones:u,speakers:l,cameras:h}}));function ch(i){const{x:u,y:l,width:h,height:g}=i.getBoundingClientRect();return{scaleWidth:h,scaleHeight:g,srcOffsetX:u,srcOffsetY:l}}function R_(i){if(i){let l=i;try{i.width=i.width}catch{var u;l=i.cloneNode(!0),null===(u=i.parentNode)||void 0===u||u.replaceChild(l,i)}return l}return i}function FA(){try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(zd)}catch{return!1}}function ff(){var i;return null===(i=WebAssembly)||void 0===i?void 0:i.validate(LE)}const CF=(()=>{const i=new tD;return{withAudioAction:u=>function(){for(var l=arguments.length,h=new Array(l),g=0;g<l;g++)h[g]=arguments[g];return new Promise(function(){var y=F(function*(C,w){let D=!1;const N=setTimeout(()=>{D=!0,i.release()},3e4);try{yield i.acquire(),D||clearTimeout(N),C(u(...h))}catch(L){D||(clearTimeout(N),w(L))}});return function(C,w){return y.apply(this,arguments)}}())},processAudioAction:u=>i.acquire().then(()=>u()),completeAudioAction:()=>{i.release()},cancelAllAudioAction:()=>{i.cancel()}}})();function p2(i){const u=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(i,{get:(l,h)=>"string"==typeof h&&u.includes(h)?function(){return CF.withAudioAction(l[h].bind(l))(...arguments)}:Reflect.get(l,h)})}function uI(i){var u;const{browserVersion:l,isChrome:h,isFirefox:g,isAndroidBrowser:y,isSupportMediaStreamTrackProcessor:C,isSupportOffscreenCanvas:w}=dr,D=Number(null==l||null===(u=l.match(/^\d+/))||void 0===u?void 0:u[0]),N=h&&D>=91,L=g&&D>=89,V=navigator.hardwareConcurrency>2;let G=L0();return i&&!G&&(G=w&&C),!y&&G&&(N||L)&&V}const rD=(i,u)=>{const l=document.createElement("link");return l.rel="preload",l.href=i,l.as=u,l.crossOrigin="anonymous",l},D_=(i,u,l)=>{const h=[],g=[],y=Array.isArray(i)?i:[i];return H0.filter(C=>y.includes(C.category)&&C.tag===u).forEach(C=>{"worker"===C.type?h.push(`${l}${C.name}`):"wasm"===C.type&&g.push(`${l}${C.name}`)}),{workers:h,wasms:g}};function h2(i,u,l){const h={};return"function"!=typeof window.SharedArrayBuffer&&(Object.assign(h,{enableMultiDecodeVideoWithoutSAB:!!u}),dr.isSupportOffscreenCanvas&&Object.assign(h,{enableVirtualBackgroundWithoutSAB:!!l})),uI(l)&&Object.assign(h,{resourceManager:aI.exports.IResourceManager,file:[{path:`${i}/vb-resource/dualModel.bin`,type:"bin"},{path:`${i}/vb-resource/tf.min.js`,type:"js"}]}),h}function ds(i,u){const{media:{isAudioBridgeReceiveReady:l,isAudioBridgeSendReady:h},audio:{customizeAudioOption:g}}=i,y=void 0!==u?u:!(null==g||!g.speakerOnly);return Eo([l?kn([!0]):Oo(TM,1).pipe(Ea(!0)),h||y?kn([!0]):Oo(q1,1).pipe(Ea(!0))])}function iD(i,u,l){if(i.deviceId===u)return!0;if("default"===u){const h=l.find(g=>g.deviceId===u);if(h)return h.label.indexOf(i.label)>-1}return!1}function Ib(i){return i.find(u=>"default"===u.deviceId)}var oD,sD=new Uint8Array(16);function f2(){if(!oD&&!(oD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oD(sD)}for(var Js,ps,mf,lh,dI=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ya=[],aD=0;aD<256;++aD)Ya.push((aD+256).toString(16).substr(1));function cD(i,u,l){var h=(i=i||{}).random||(i.rng||f2)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,u){l=l||0;for(var g=0;g<16;++g)u[l+g]=h[g];return u}return function(y){var D,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,w=(Ya[y[C+0]]+Ya[y[C+1]]+Ya[y[C+2]]+Ya[y[C+3]]+"-"+Ya[y[C+4]]+Ya[y[C+5]]+"-"+Ya[y[C+6]]+Ya[y[C+7]]+"-"+Ya[y[C+8]]+Ya[y[C+9]]+"-"+Ya[y[C+10]]+Ya[y[C+11]]+Ya[y[C+12]]+Ya[y[C+13]]+Ya[y[C+14]]+Ya[y[C+15]]).toLowerCase();if("string"!=typeof(D=w)||!dI.test(D))throw TypeError("Stringified UUID is invalid");return w}(h)}(function(i){i[i.PLAIN=0]="PLAIN",i[i.RSA=1]="RSA",i[i.AESGCM256=2]="AESGCM256"})(Js||(Js={})),function(i){i[i.info=0]="info",i[i.debug=1]="debug",i[i.log=2]="log",i[i.warn=3]="warn",i[i.error=4]="error"}(ps||(ps={})),function(i){i[i.PROTECT_LOCAL_KEY=0]="PROTECT_LOCAL_KEY"}(mf||(mf={})),function(i){i.beforeInit="beforeInit",i.afterInit="afterInit",i.beforeLog="beforeLog",i.hitSizeLimit="hitSizeLimit",i.afterLog="afterLog",i.beforeReport="beforeReport",i.afterReport="afterReport"}(lh||(lh={}));class uh{constructor(){}}var gf,is={exports:{}},ed={exports:{}},IF=jr(Object.freeze({__proto__:null,default:{}}));ed.exports=(gf=gf||function(i,u){var l;if(typeof window<"u"&&window.crypto&&(l=window.crypto),typeof self<"u"&&self.crypto&&(l=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(l=globalThis.crypto),!l&&typeof window<"u"&&window.msCrypto&&(l=window.msCrypto),!l&&void 0!==Vd&&Vd.crypto&&(l=Vd.crypto),!l)try{l=IF}catch{}var h=function(){if(l){if("function"==typeof l.getRandomValues)try{return l.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof l.randomBytes)try{return l.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},g=Object.create||function(){function ne(){}return function(me){var _e;return ne.prototype=me,_e=new ne,ne.prototype=null,_e}}(),y={},C=y.lib={},w=C.Base={extend:function(ne){var me=g(this);return ne&&me.mixIn(ne),me.hasOwnProperty("init")&&this.init!==me.init||(me.init=function(){me.$super.init.apply(this,arguments)}),me.init.prototype=me,me.$super=this,me},create:function(){var ne=this.extend();return ne.init.apply(ne,arguments),ne},init:function(){},mixIn:function(ne){for(var me in ne)ne.hasOwnProperty(me)&&(this[me]=ne[me]);ne.hasOwnProperty("toString")&&(this.toString=ne.toString)},clone:function(){return this.init.prototype.extend(this)}},D=C.WordArray=w.extend({init:function(ne,me){ne=this.words=ne||[],this.sigBytes=me??4*ne.length},toString:function(ne){return(ne||L).stringify(this)},concat:function(ne){var me=this.words,_e=ne.words,Re=this.sigBytes,Ne=ne.sigBytes;if(this.clamp(),Re%4)for(var et=0;et<Ne;et++)me[Re+et>>>2]|=(_e[et>>>2]>>>24-et%4*8&255)<<24-(Re+et)%4*8;else for(var ze=0;ze<Ne;ze+=4)me[Re+ze>>>2]=_e[ze>>>2];return this.sigBytes+=Ne,this},clamp:function(){var ne=this.words,me=this.sigBytes;ne[me>>>2]&=4294967295<<32-me%4*8,ne.length=i.ceil(me/4)},clone:function(){var ne=w.clone.call(this);return ne.words=this.words.slice(0),ne},random:function(ne){for(var me=[],_e=0;_e<ne;_e+=4)me.push(h());return new D.init(me,ne)}}),N=y.enc={},L=N.Hex={stringify:function(ne){for(var me=ne.words,_e=ne.sigBytes,Re=[],Ne=0;Ne<_e;Ne++){var et=me[Ne>>>2]>>>24-Ne%4*8&255;Re.push((et>>>4).toString(16)),Re.push((15&et).toString(16))}return Re.join("")},parse:function(ne){for(var me=ne.length,_e=[],Re=0;Re<me;Re+=2)_e[Re>>>3]|=parseInt(ne.substr(Re,2),16)<<24-Re%8*4;return new D.init(_e,me/2)}},V=N.Latin1={stringify:function(ne){for(var me=ne.words,_e=ne.sigBytes,Re=[],Ne=0;Ne<_e;Ne++)Re.push(String.fromCharCode(me[Ne>>>2]>>>24-Ne%4*8&255));return Re.join("")},parse:function(ne){for(var me=ne.length,_e=[],Re=0;Re<me;Re++)_e[Re>>>2]|=(255&ne.charCodeAt(Re))<<24-Re%4*8;return new D.init(_e,me)}},G=N.Utf8={stringify:function(ne){try{return decodeURIComponent(escape(V.stringify(ne)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(ne){return V.parse(unescape(encodeURIComponent(ne)))}},W=C.BufferedBlockAlgorithm=w.extend({reset:function(){this._data=new D.init,this._nDataBytes=0},_append:function(ne){"string"==typeof ne&&(ne=G.parse(ne)),this._data.concat(ne),this._nDataBytes+=ne.sigBytes},_process:function(ne){var me,_e=this._data,Re=_e.words,Ne=_e.sigBytes,et=this.blockSize,ht=Ne/(4*et),ze=(ht=ne?i.ceil(ht):i.max((0|ht)-this._minBufferSize,0))*et,Qe=i.min(4*ze,Ne);if(ze){for(var wt=0;wt<ze;wt+=et)this._doProcessBlock(Re,wt);me=Re.splice(0,ze),_e.sigBytes-=Qe}return new D.init(me,Qe)},clone:function(){var ne=w.clone.call(this);return ne._data=this._data.clone(),ne},_minBufferSize:0});C.Hasher=W.extend({cfg:w.extend(),init:function(ne){this.cfg=this.cfg.extend(ne),this.reset()},reset:function(){W.reset.call(this),this._doReset()},update:function(ne){return this._append(ne),this._process(),this},finalize:function(ne){return ne&&this._append(ne),this._doFinalize()},blockSize:16,_createHelper:function(ne){return function(me,_e){return new ne.init(_e).finalize(me)}},_createHmacHelper:function(ne){return function(me,_e){return new X.HMAC.init(ne,_e).finalize(me)}}});var X=y.algo={};return y}(Math),gf),is.exports=function(i){return i.enc.Utf8}(ed.exports);var UA={exports:{}};UA.exports=function(i){return l=i.lib.WordArray,i.enc.Base64={stringify:function(g){var y=g.words,C=g.sigBytes,w=this._map;g.clamp();for(var D=[],N=0;N<C;N+=3)for(var L=(y[N>>>2]>>>24-N%4*8&255)<<16|(y[N+1>>>2]>>>24-(N+1)%4*8&255)<<8|y[N+2>>>2]>>>24-(N+2)%4*8&255,V=0;V<4&&N+.75*V<C;V++)D.push(w.charAt(L>>>6*(3-V)&63));var G=w.charAt(64);if(G)for(;D.length%4;)D.push(G);return D.join("")},parse:function(g){var y=g.length,C=this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var D=0;D<C.length;D++)w[C.charCodeAt(D)]=D}var N=C.charAt(64);if(N){var L=g.indexOf(N);-1!==L&&(y=L)}return function h(g,y,C){for(var w=[],D=0,N=0;N<y;N++)if(N%4){var L=C[g.charCodeAt(N-1)]<<N%4*2|C[g.charCodeAt(N)]>>>6-N%4*2;w[D>>>2]|=L<<24-D%4*8,D++}return l.create(w,D)}(g,y,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.enc.Base64;var l}(ed.exports);var vu=function(i,u,l,h){return new(l||(l=Promise))(function(g,y){function C(N){try{D(h.next(N))}catch(L){y(L)}}function w(N){try{D(h.throw(N))}catch(L){y(L)}}function D(N){var L;N.done?g(N.value):(L=N.value,L instanceof l?L:new l(function(V){V(L)})).then(C,w)}D((h=h.apply(i,u||[])).next())})};const sp=i=>{try{const u=UA.exports.parse(i);return is.exports.stringify(u)}catch{return i}},Bl=i=>{for(var u=i.length,l=i.length-1;l>=0;l--){var h=i.charCodeAt(l);h>127&&h<=2047?u++:h>2047&&h<=65535&&(u+=2),h>=56320&&h<=57343&&l--}return u},lD=()=>vu(void 0,void 0,void 0,function*(){return yield self.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}),m2=(i,u,l)=>vu(void 0,void 0,void 0,function*(){try{return yield self.crypto.subtle.encrypt({name:"AES-GCM",iv:l},u,i)}catch(h){throw h}}),wF=(i,u)=>{const l="string"==typeof i?function(h){const g=new ArrayBuffer(h.length),y=new Uint8Array(g);for(let C=0,w=h.length;C<w;C++)y[C]=h.charCodeAt(C);return g}(i):i;return self.crypto.subtle.encrypt({name:"RSA-OAEP"},u,l)},pI={},hI=(i,u)=>{pI[u]=i},g2=pI,fI=i=>{let u=0;return u+=Bl(i.message),i.tags.forEach(l=>{u+=Bl(l)}),u};class VA{constructor(u){this.uuid=self.crypto.randomUUID();const{databaseName:l,maxSize:h,publicKey:g,reportUrl:y,plugins:C,idbManager:w,logManager:D,currentSize:N,externalKeys:L}=u;this.databaseName=l,this.maxSize=h,this.publicKey=g??"",this.reportUrl=y??"",this.plugins=C??[],this.idbManager=w,this.logManager=D,this.currentSize=N??0,this.externalKeys=L,this.commonMethods=Object.assign({},g2)}getLocalAESGCM256Key(){var u,l,g,y;return l=this,void 0,y=function*(){if(this.localAESGCM256Key)return this.localAESGCM256Key;this.localAESGCM256Key=yield lD();const l=this.externalKeys?null===(u=this.externalKeys.filter(h=>h.usage===mf.PROTECT_LOCAL_KEY)[0])||void 0===u?void 0:u.key:void 0;return yield this.idbManager.saveAESGCM256Key(this.uuid,this.localAESGCM256Key,l),this.localAESGCM256Key},new((g=void 0)||(g=Promise))(function(C,w){function D(V){try{L(y.next(V))}catch(G){w(G)}}function N(V){try{L(y.throw(V))}catch(G){w(G)}}function L(V){var G;V.done?C(V.value):(G=V.value,G instanceof g?G:new g(function(W){W(G)})).then(D,N)}L((y=y.apply(l,[])).next())})}updateCurrentSize(u){var l;let h=null!==(l=this.currentSize)&&void 0!==l?l:0;if(u instanceof Map)for(const[g,y]of u)h+=fI(y);else h+=fI(u);return this.currentSize=h,h>=this.maxSize}}const uD=(...i)=>{const u={},l=[];for(const g of i)g.forEach(y=>{u[y.id]||(u[y.id]=!0,l.push(y))});const h=new Map;return l.sort((g,y)=>g?.id-y?.id).forEach(g=>{h.set(g.id,g)}),h},wb=(i,u)=>{const l=new Map;return u.forEach(h=>{i(h)&&l.set(h.id,h)}),l},dD=i=>{try{return JSON.stringify(i)}catch{return"json stringify failed"}},_2=i=>{try{return JSON.parse(i)}catch{return i}};class v2{constructor(){this.getStore=()=>({byTag:Object.assign({},this.store.byTag),byTime:new Map(this.store.byTime)}),this.pushByTime=u=>{for(const l of u)this.store.byTime.set(l.id,l)},this.pushByTag=u=>{u.forEach(l=>{const h=l.tags;Array.isArray(h)&&h.forEach(g=>{this.store.byTag[g]||(this.store.byTag[g]=new Map),this.store.byTag[g].set(l.id,l)})})},this.addLog=u=>{let l=u;Array.isArray(u)||(l=[u]),this.pushByTime(l),this.pushByTag(l)},this.syncFromIDB=u=>{return l=this,void 0,y=function*(){const l=yield u.getAllLogs();this.addLog(l)},new((g=void 0)||(g=Promise))(function(C,w){function D(V){try{L(y.next(V))}catch(G){w(G)}}function N(V){try{L(y.throw(V))}catch(G){w(G)}}function L(V){var G;V.done?C(V.value):(G=V.value,G instanceof g?G:new g(function(W){W(G)})).then(D,N)}L((y=y.apply(l,[])).next())});var l,g,y},this.reset=()=>{this.store={byTag:{},byTime:new Map}},this.deleteLogs=u=>{for(const l of u){const h=this.store.byTime.get(l);if(!h)continue;const{tags:g}=h;for(const y of g)this.store.byTag[y].delete(l);this.store.byTime.delete(l)}},this.filterStore=u=>{const l=((g,y)=>{if(!y)return g.byTime;if("string"==typeof y)return g.byTag[y]||new Map;if(Array.isArray(y)){if(y.every(C=>"string"==typeof C))return uD(...y.map(C=>g.byTag[C]).filter(C=>Boolean(C)))}else{if("function"==typeof y)return wb(y,g.byTime);if("object"==typeof y)if(y.tags&&y.filter){if("string"==typeof y.tags)return wb(y.filter,g.byTag[y.tags]);if(Array.isArray(y.tags)&&y.tags.every(C=>"string"==typeof C))return uD(...y.tags.map(C=>{const w=g.byTag[C];return w?wb(y.filter,w):new Map}))}else{if(y.filter)return wb(y.filter,g.byTime);if(y.tags){if("string"==typeof y)return g.byTag[y]||new Map;if(Array.isArray(y)&&y.every(C=>"string"==typeof C))return uD(...y.map(C=>g.byTag[C]))}}else console.error("Wrong filter type")}return new Map})(this.store,u),h=new Map;for(const[g,y]of l){const C=Object.assign(Object.assign({},y),{message:_2(sp(y.message))});h.set(g,C)}return h},this.store={byTag:{},byTime:new Map}}}function ap(i,u,l){const h=i.plugins;if(!Array.isArray(h))return l;let g=l;return h.forEach(y=>{const C=y[u];if("function"==typeof C){const w=C(i,g);w&&(g=w)}}),g}const pD=(i,u,l,h,g,y={})=>{return void 0,void 0,N=function*(){const{noCache:C,extraProperties:w={}}=y,D=((L,V,G,W,X,ne)=>{const me=Array.isArray(V)?V:[V],_e=Date.now();return Object.assign({message:L,logLevel:G,tags:me,encryptMode:W,timestamp:_e,laplaceSessionId:X},ne)})(`${u}`,l,h,g,i.uuid,w),N=ap(i,lh.beforeLog,D);if(C)ap(i,lh.afterLog,D);else{const{idbManager:L,logManager:V}=i,G=yield L.makeNextId();N.message=(X=>{try{const ne=is.exports.parse(X);return UA.exports.stringify(ne)}catch{return X}})(N.message);const W=Object.assign(Object.assign({},N),{id:G});i.updateCurrentSize(W)&&ap(i,lh.hitSizeLimit,W),V.addLog(W),yield L.addLog(W),ap(i,lh.afterLog,W)}},new((D=void 0)||(D=Promise))(function(L,V){function G(ne){try{X(N.next(ne))}catch(me){V(me)}}function W(ne){try{X(N.throw(ne))}catch(me){V(me)}}function X(ne){var me;ne.done?L(ne.value):(me=ne.value,me instanceof D?me:new D(function(_e){_e(me)})).then(G,W)}X((N=N.apply(undefined,[])).next())});var D,N};hI(pD,"commonLog");const A2=i=>new Promise(u=>{const l=new XMLHttpRequest;l.open(i.type||"GET",i.url,!0),l.withCredentials=i.withCredentials,l.onerror=h=>{u({error:h,report:i.reportItem})},l.onreadystatechange=function(){if(4===l.readyState){const h=l.status;u(h>=200&&h<300?{report:i.reportItem}:{error:`Request failed, status: ${h}, responseText: ${l.responseText}`,report:i.reportItem})}},Object.entries(i.headers).forEach(([h,g])=>{g&&h&&l.setRequestHeader(h,g)}),l.send(i.data)}),bn=(i,u=2)=>{let l=`${i}`;for(;l.length<u;)l=`0${l}`;return l},td=i=>{const u=new Date(i);return`${u.getUTCFullYear()}-${bn(u.getUTCMonth()+1)}-${bn(u.getUTCDate())} ${bn(u.getUTCHours())}:${bn(u.getUTCMinutes())}:${bn(u.getUTCSeconds())}.${bn(u.getUTCMilliseconds(),3)}`},_i={version:"000001",flag:"0"},mI=(i,u,l)=>{return(h=i,g=u.reportUrl,y=l,Promise.all(h.map(C=>Object.assign({url:g||"",type:"POST",withCredentials:!1,headers:{},data:dD({messages:C.messages,meta:C.meta}),reportItem:C},y)).map(A2))).then(h=>{h.forEach(g=>{var y;ap(u,lh.afterReport,{report:g.report,error:null!==(y=g.error)&&void 0!==y?y:null})})});var h,g,y},jA=(i,u,l)=>{return void 0,void 0,C=function*(){const h=i.logManager.filterStore(u);if(!h||0===h?.size||!l)return;const{xhrOptions:g={},additionalContext:y}=l,w=((i,u)=>Array.from(i.values()).reduce((l,h)=>{const g=((w,D)=>{const{message:N,logLevel:L,tags:V,timestamp:G}=w,ne=function(_e,Re){var Ne={};for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&Re.indexOf(et)<0&&(Ne[et]=_e[et]);if(null!=_e&&"function"==typeof Object.getOwnPropertySymbols){var ht=0;for(et=Object.getOwnPropertySymbols(_e);ht<et.length;ht++)Re.indexOf(et[ht])<0&&Object.prototype.propertyIsEnumerable.call(_e,et[ht])&&(Ne[et[ht]]=_e[et[ht]])}return Ne}(w,["message","logLevel","tags","timestamp","encryptMode","id"]),me=Object.assign(Object.assign({time:td(G),logLevel:ps[L],message:N,tags:V},D),ne);return dD(me)})(h,u),y=Bl(g),C=l[l.length-1];return C.currentSize+y>30720?l.push({messages:[g],ids:[h.id],currentSize:y}):(C.messages.push(g),C.ids.push(h.id),C.currentSize+=y),l},[{messages:[],ids:[],currentSize:0}]).filter(l=>l.currentSize>0).map(l=>({messages:l.messages.join("\n"),ids:l.ids,meta:_i})))(ap(i,lh.beforeReport,h),y);mI(w,i,g)},new((y=void 0)||(y=Promise))(function(w,D){function N(G){try{V(C.next(G))}catch(W){D(W)}}function L(G){try{V(C.throw(G))}catch(W){D(W)}}function V(G){var W;G.done?w(G.value):(W=G.value,W instanceof y?W:new y(function(X){X(W)})).then(N,L)}V((C=C.apply(undefined,[])).next())});var y,C};hI(jA,"commonReport");var hD=function(i,u,l,h){return new(l||(l=Promise))(function(g,y){function C(N){try{D(h.next(N))}catch(L){y(L)}}function w(N){try{D(h.throw(N))}catch(L){y(L)}}function D(N){var L;N.done?g(N.value):(L=N.value,L instanceof l?L:new l(function(V){V(L)})).then(C,w)}D((h=h.apply(i,u||[])).next())})};const fD=(i,u,l)=>hD(void 0,void 0,void 0,function*(){const{idbManager:h,logManager:g}=i;if(Array.isArray(l)&&(yield h.deleteLogs(l),g.deleteLogs(l),!u))return;const y=i.logManager.filterStore(u),C=[];for(const[D,N]of y)C.push(N.id);let w=C;Array.isArray(C)||(w=[C]),yield h.deleteLogs(w),g.deleteLogs(w)}),dh=i=>hD(void 0,void 0,void 0,function*(){const{idbManager:u,logManager:l}=i;yield u.reset(),l.reset()});function mD(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,h=new Array(u);l<u;l++)h[l]=i[l];return h}function _f(i){return new Promise(function(u,l){i.oncomplete=i.onsuccess=function(){return u(i.result)},i.onabort=i.onerror=function(){return l(i.error)}})}function gD(i,u){var l=indexedDB.open(i);l.onupgradeneeded=function(){return l.result.createObjectStore(u)};var h=_f(l);return function(g,y){return h.then(function(C){return y(C.transaction(u,g).objectStore(u))})}}var _D;function Rb(){return _D||(_D=gD("keyval-store","keyval")),_D}function y2(i){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rb())("readwrite",function(u){return i.forEach(function(l){return u.delete(l)}),_f(u.transaction)})}hI(fD,"commonDelete"),hI(dh,"commonReset");const E2={default:{queue:[],isRunning:!1,listeners:[]}},_I=i=>{let u=E2[i];return u||(u={queue:[],isRunning:!1,listeners:[]},E2[i]=u),u};function Db(i){return function(i,u,l,h){return new(l||(l=Promise))(function(g,y){function C(N){try{D(h.next(N))}catch(L){y(L)}}function w(N){try{D(h.throw(N))}catch(L){y(L)}}function D(N){var L;N.done?g(N.value):(L=N.value,L instanceof l?L:new l(function(V){V(L)})).then(C,w)}D((h=h.apply(i,u||[])).next())})}(this,void 0,void 0,function*(){const u=_I(i),{queue:l,listeners:h}=u;for(;l.length>0&&!u.isRunning;){const g=l.shift();u.isRunning=!0;try{const y=yield g.task();g.resolution(y)}catch(y){g.rejection(y)}u.isRunning=!1,Db(i)}h.length&&h.forEach(g=>{g()})})}function QA(i,u){const l=_I(u);try{return new Promise((h,g)=>{l.queue.push({task:i,resolution:h,rejection:g}),Db(u)})}catch(h){return Promise.reject(h)}}const b2=(i,u)=>{_I(i).listeners.push(u)};var Au=function(i,u,l,h){return new(l||(l=Promise))(function(g,y){function C(N){try{D(h.next(N))}catch(L){y(L)}}function w(N){try{D(h.throw(N))}catch(L){y(L)}}function D(N){var L;N.done?g(N.value):(L=N.value,L instanceof l?L:new l(function(V){V(L)})).then(C,w)}D((h=h.apply(i,u||[])).next())})};const vD="change_meta",AD="change_log",HA=()=>Promise.resolve();class RF{constructor(u){this.waitingForReset=!1,this.resetting=!1,this.isChangingMeta=!1,this.isChangingLog=!1,this.dbFailCount={read:0,write:0},this.get=l=>function(h){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rb())("readonly",function(g){return _f(g.get(h))})}(l,this.store),this.set=(l,h)=>Au(this,void 0,void 0,function*(){try{return!(this.dbFailCount.write>3)&&(yield function(g,y){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rb())("readwrite",function(C){return C.put(y,g),_f(C.transaction)})}(l,h,this.store))}catch(g){g instanceof DOMException&&(g&&"QuotaExceededError"===g.name?(yield this.deleteOldLogsForSetNewOne(),yield this.set(l,h)):this.dbFailCount.write+=1),console.error(g)}}),this.deleteOldLogsForSetNewOne=()=>Au(this,void 0,void 0,function*(){var l;const h=yield this.getAllLogs(),g=[];for(let y=0;y<13;y++){const C=null===(l=h[y])||void 0===l?void 0:l.id;(C||0===C)&&g.push(`${C}`)}return y2(g,this.store)}),this.adjustMaxId=()=>Au(this,void 0,void 0,function*(){return this.resetting?HA():(this.isChangingMeta=!0,yield QA(()=>Au(this,void 0,void 0,function*(){var l;const h=yield this.getAllLogs(),y=null!==(l=h[h.length-1]?.id)&&void 0!==l?l:0;return yield this.set("maxId",y),y}),vD))}),this.makeNextId=()=>Au(this,void 0,void 0,function*(){return this.resetting?HA():(this.isChangingMeta=!0,yield QA(()=>Au(this,void 0,void 0,function*(){const l=yield this.get("maxId");if(!l&&0!==l)return yield this.set("maxId",0),0;const h=l+1;return yield this.set("maxId",h),h}),vD))}),this.addLog=l=>Au(this,void 0,void 0,function*(){if(this.resetting)return HA();this.isChangingLog=!0,yield QA(()=>Au(this,void 0,void 0,function*(){const{id:h}=l;return this.set(`${h}`,l)}),AD)}),this.getAllLogs=()=>Au(this,void 0,void 0,function*(){return(yield function TF(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rb();return i("readonly",function(u){if(u.getAll&&u.getAllKeys)return Promise.all([_f(u.getAllKeys()),_f(u.getAll())]).then(function(h){var w,g=function(N){if(Array.isArray(N))return N}(w=h)||function(N,L){var V=null==N?null:typeof Symbol<"u"&&N[Symbol.iterator]||N["@@iterator"];if(null!=V){var G,W,X=[],ne=!0,me=!1;try{for(V=V.call(N);!(ne=(G=V.next()).done)&&(X.push(G.value),2!==X.length);ne=!0);}catch(_e){me=!0,W=_e}finally{try{ne||null==V.return||V.return()}finally{if(me)throw W}}return X}}(w)||function(N,L){if(N){if("string"==typeof N)return mD(N,2);var V=Object.prototype.toString.call(N).slice(8,-1);return"Object"===V&&N.constructor&&(V=N.constructor.name),"Map"===V||"Set"===V?Array.from(N):"Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?mD(N,2):void 0}}(w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),C=g[1];return g[0].map(function(w,D){return[w,C[D]]})});var l=[];return i("readonly",function(h){return(g=h,g.openCursor().onsuccess=function(){var C;this.result&&(l.push([(C=this.result).key,C.value]),this.result.continue())},_f(g.transaction)).then(function(){return l});var g})})}(this.store)).filter(([l])=>"maxId"!==l).sort((l,h)=>{var g,y;return(null===(g=l[1])||void 0===g?void 0:g.id)-(null===(y=h[1])||void 0===y?void 0:y.id)}).map(([,l])=>l)}),this.deleteLogs=l=>Au(this,void 0,void 0,function*(){if(this.resetting)return HA();this.isChangingLog=!0,yield QA(()=>Au(this,void 0,void 0,function*(){return y2(l.map(h=>`${h}`),this.store)}),AD),yield this.adjustMaxId()}),this.saveAESGCM256Key=(l,h,g)=>Au(this,void 0,void 0,function*(){if(g){const y=yield self.crypto.subtle.exportKey("raw",h),C=yield(w=y,D=g,N=new Uint8Array(16),vu(void 0,void 0,void 0,function*(){return new Promise((L,V)=>{requestAnimationFrame(()=>vu(void 0,void 0,void 0,function*(){var G;const W=null===(G=D?.algorithm)||void 0===G?void 0:G.name;let X;if("RSA-OAEP"===W?X=wF:"AES-GCM"===W&&(X=m2),!X)throw new Error("Unsupported encrypt key type");if("string"==typeof w){const ne=new TextEncoder,me=yield X(ne.encode(w),D,N);L(me)}else{const ne=yield X(w,D,N);L(ne)}}))})}));yield this.set(`aes-gcm-256-${l}`,C)}else yield this.set(`aes-gcm-256-${l}`,h);var w,D,N}),this.reset=()=>Au(this,void 0,void 0,function*(){return this.resetting?HA():(this.waitingForReset=!0,this.isChangingLog||this.isChangingMeta?HA():(this.resetting=!0,yield function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rb())("readwrite",function(l){return l.clear(),_f(l.transaction)})}(this.store),this.resetting=!1,void(this.waitingForReset=!1)))}),this.store=gD(u,u+"-store"),b2(vD,()=>{if(this.isChangingMeta=!1,this.waitingForReset)return this.reset()}),b2(AD,()=>{if(this.isChangingLog=!1,this.waitingForReset)return this.reset()})}}var $o=function(i,u,l,h){return new(l||(l=Promise))(function(g,y){function C(N){try{D(h.next(N))}catch(L){y(L)}}function w(N){try{D(h.throw(N))}catch(L){y(L)}}function D(N){var L;N.done?g(N.value):(L=N.value,L instanceof l?L:new l(function(V){V(L)})).then(C,w)}D((h=h.apply(i,u||[])).next())})};const DF={databaseName:"laplace-default-db",maxSize:49283072};let GA=(()=>{class i{constructor(l){this.commonLogWithContext=(g,y,C,w,D)=>$o(this,void 0,void 0,function*(){yield pD(this.runtimeMetaManager,g,y,C,w,D)}),this.commonReportWithContext=(g,y)=>$o(this,void 0,void 0,function*(){yield jA(this.runtimeMetaManager,g,y)}),this.commonDeleteWithContext=g=>$o(this,void 0,void 0,function*(){yield fD(this.runtimeMetaManager,g)}),this.resetWithContext=()=>$o(this,void 0,void 0,function*(){yield dh(this.runtimeMetaManager)}),this.initLocalAESGCM256Key=()=>$o(this,void 0,void 0,function*(){return yield lD()}),this.doNotUseDirtyGetStore=()=>this.runtimeMetaManager.logManager.getStore(),this.log=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.log,Js.PLAIN,{extraProperties:C})}),this.info=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.info,Js.PLAIN,{extraProperties:C})}),this.warn=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.warn,Js.PLAIN,{extraProperties:C})}),this.debug=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.debug,Js.PLAIN,{extraProperties:C})}),this.error=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.error,Js.PLAIN,{extraProperties:C})}),this.logWithEncryption=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.log,Js.AESGCM256,{extraProperties:C})}),this.infoWithEncryption=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.info,Js.AESGCM256,{extraProperties:C})}),this.debugWithEncryption=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.debug,Js.AESGCM256,{extraProperties:C})}),this.warnWithEncryption=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.warn,Js.AESGCM256,{extraProperties:C})}),this.errorWithEncryption=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.error,Js.AESGCM256,{extraProperties:C})}),this.logWithoutCache=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.log,Js.PLAIN,{extraProperties:C,noCache:!0})}),this.infoWithoutCache=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.info,Js.PLAIN,{extraProperties:C,noCache:!0})}),this.warnWithoutCache=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.warn,Js.PLAIN,{extraProperties:C,noCache:!0})}),this.debugWithoutCache=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.debug,Js.PLAIN,{extraProperties:C,noCache:!0})}),this.errorWithoutCache=(g,y,C)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(g,y,ps.error,Js.PLAIN,{extraProperties:C,noCache:!0})}),this.getLogs=g=>{const y=this.runtimeMetaManager.logManager;return y?y.filterStore(g):new Map},this.report=(...g)=>((y,C,w={})=>{return void 0,void 0,V=function*(){var D,N;const L=null!==(D=w.sampleRate)&&void 0!==D?D:1;if(Math.random()>L)return;if(Bl(C)>30720)throw new Error("ERROR: Laplace .report(strMsg) size bigger than 30KB is NOT allowed.");const V=Object.assign({message:Object.assign({strMsg:C},w.extraMsg),time:td(Date.now())},w.extraData);return!(null===(N=w?.tags)||void 0===N)&&N.length&&(V.tags=w?.tags),mI([{messages:JSON.stringify(V),meta:_i}],y,w.xhrOptions)},new((L=void 0)||(L=Promise))(function(G,W){function X(_e){try{me(V.next(_e))}catch(Re){W(Re)}}function ne(_e){try{me(V.throw(_e))}catch(Re){W(Re)}}function me(_e){var Re;_e.done?G(_e.value):(Re=_e.value,Re instanceof L?Re:new L(function(Ne){Ne(Re)})).then(X,ne)}me((V=V.apply(undefined,[])).next())});var L,V})(this.runtimeMetaManager,...g),this.reportByHttps=(g,y)=>$o(this,void 0,void 0,function*(){yield this.commonReportWithContext(g,y)}),this.deleteLog=g=>$o(this,void 0,void 0,function*(){yield this.commonDeleteWithContext(g)}),this.deleteAll=()=>$o(this,void 0,void 0,function*(){yield this.resetWithContext()});const{runtimeMetaManager:h}=l;this.runtimeMetaManager=h}}return i.init=u=>$o(void 0,void 0,void 0,function*(){const{databaseName:l="laplace-default-db"}=u,h=new RF(l),g=new v2,y=new VA(Object.assign(Object.assign(Object.assign({},DF),u),{idbManager:h,logManager:g}));ap(y,lh.beforeInit),yield g.syncFromIDB(y.idbManager);const C=new i({runtimeMetaManager:y});return ap(y,lh.afterInit),C}),i})();class vI extends uh{constructor(u){super(),this.config={verbose:!1},this.beforeLog=(l,h)=>{const{verbose:g}=this.config;switch(g&&console.log("beforeLog, ","state: ",h,"meta: ",l),h.logLevel){case ps.error:console.error(h.message);break;case ps.warn:console.warn(h.message);break;case ps.log:console.log(h.message);break;case ps.debug:console.debug(h.message);break;case ps.info:console.info(h.message)}},this.afterLog=(l,h)=>{const{verbose:g}=this.config;g&&console.log("afterLog, ","state: ",h,"meta: ",l)},this.beforeReport=(l,h)=>{const{verbose:g}=this.config;g&&console.log("beforeReport, ","pluginParams: ",h,"meta: ",l)},this.afterReport=(l,h)=>{const{verbose:g}=this.config;g&&console.log("afterReport, ","pluginParams: ",h,"runtimeMetaManager: ",l)},u&&(this.config=u)}}const yD=i=>{const u=[];for(const[l,h]of i)u.push(h);return u};class AI extends uh{constructor(u){super(),this.config={debug:!1},this.debugLog=l=>{const{debug:h}=this.config;h&&console.log(`[AutoCleanLogPlugin]: ${l}`)},this.afterInit=l=>{const{expireBefore:h}=this.config;if(!h)return void this.debugLog("early return on beforeInit because expireBefore is falsy");const{logManager:g,commonMethods:{commonDelete:y}}=l,C=g.getStore().byTime,w=("function"==typeof h?yD(C).filter(h):yD(C).filter(D=>D.timestamp<h)).map(D=>D.id);y(l,void 0,w),this.debugLog(`afterInit, clean log id: ${w}`)},this.afterReport=(l,{report:h,error:g})=>{if(g)return this.debugLog("error"),void console.error(g);const{cleanAfterReport:y}=this.config;if(!y)return void this.debugLog("early return on afterReport because cleanAfterReport is falsy");const{commonMethods:{commonDelete:C}}=l;C(l,void 0,h.ids),this.debugLog(`afterReport, clean log id: ${h.ids}`)},u&&(this.config=u)}}var ED="Expected a function",Ob=/^\s+|\s+$/g,yI=/^[-+]0x[0-9a-f]+$/i,kb=/^0b[01]+$/i,bD=/^0o[0-7]+$/i,Fm=parseInt,S2="object"==typeof self&&self&&self.Object===Object&&self,Um="object"==typeof Vd&&Vd&&Vd.Object===Object&&Vd||S2||Function("return this")(),K4=Object.prototype.toString,hl=Math.max,C2=Math.min,zA=function(){return Um.Date.now()};function Pb(i){var u=typeof i;return!!i&&("object"==u||"function"==u)}function kF(i){if("number"==typeof i)return i;if("symbol"==typeof(h=i)||(g=h)&&"object"==typeof g&&"[object Symbol]"==K4.call(h))return NaN;var h,g;if(Pb(i)){var u="function"==typeof i.valueOf?i.valueOf():i;i=Pb(u)?u+"":u}if("string"!=typeof i)return 0===i?i:+i;i=i.replace(Ob,"");var l=kb.test(i);return l||bD.test(i)?Fm(i.slice(2),l?2:8):yI.test(i)?NaN:+i}const SD=["RESOURCE_ERROR","JS_ERROR","UNHANDLED_PROMISE_REJECTION"];class PF extends uh{constructor(u){super(),this.config={debug:!1,publicTags:[]},this.errorCount=0,this.hashErrors={},this.runtimeMetaManager=null,this.addPublicTags=l=>{var h;return null===(h=this.config.publicTags)||void 0===h?void 0:h.concat(l).filter(g=>g)},this.debugLog=l=>{const{debug:h}=this.config;h&&console.log("[AutoLogErrorPlugin]:",l)},this.ignore=l=>{var h,g,y,C,w;return void 0!==(null===(h=this.config)||void 0===h?void 0:h.maxErrorCount)&&this.errorCount>=(null===(g=this.config)||void 0===g?void 0:g.maxErrorCount)||!(null===(y=this.config)||void 0===y||!y.ignoredErrorMsgKeywords)&&l&&(null===(w=null===(C=this.config)||void 0===C?void 0:C.ignoredErrorMsgKeywords)||void 0===w?void 0:w.some(D=>l?.includes(D)))},this.report=function(i,u,l){var h=!0,g=!0;if("function"!=typeof i)throw new TypeError(ED);return Pb(l)&&(h="leading"in l?!!l.leading:h,g="trailing"in l?!!l.trailing:g),function(y,C,w){var D,N,L,V,G,W,X=0,ne=!1,me=!1,_e=!0;if("function"!=typeof y)throw new TypeError(ED);function Re(Qe){var wt=D,Xt=N;return D=N=void 0,X=Qe,V=y.apply(Xt,wt)}function Ne(Qe){var wt=Qe-W;return void 0===W||wt>=C||wt<0||me&&Qe-X>=L}function et(){var wt,Xt,Qe=zA();if(Ne(Qe))return ht(Qe);G=setTimeout(et,(Xt=C-((wt=Qe)-W),me?C2(Xt,L-(wt-X)):Xt))}function ht(Qe){return G=void 0,_e&&D?Re(Qe):(D=N=void 0,V)}function ze(){var Xt,Qe=zA(),wt=Ne(Qe);if(D=arguments,N=this,W=Qe,wt){if(void 0===G)return X=Xt=W,G=setTimeout(et,C),ne?Re(Xt):V;if(me)return G=setTimeout(et,C),Re(W)}return void 0===G&&(G=setTimeout(et,C)),V}return C=kF(C)||0,Pb(w)&&(ne=!!w.leading,L=(me="maxWait"in w)?hl(kF(w.maxWait)||0,C):L,_e="trailing"in w?!!w.trailing:_e),ze.cancel=function(){void 0!==G&&clearTimeout(G),X=0,D=W=N=G=void 0},ze.flush=function(){return void 0===G?V:ht(zA())},ze}(i,u,{leading:h,maxWait:u,trailing:g})}(()=>{if(null===this.runtimeMetaManager)return;const{autoReport:l}=this.config,{commonMethods:{commonReport:h}}=this.runtimeMetaManager;return h(this.runtimeMetaManager,SD,l)},600,{trailing:!0,leading:!1}),this.afterInit=l=>{if(this.runtimeMetaManager=l,!self.addEventListener)return;const{commonMethods:{commonLog:h}}=l,g=(y,C,w)=>{this.debugLog(w),this.errorCount+=1;try{return function(D){const N=(new TextEncoder).encode(D);return crypto.subtle.digest("SHA-1",N).then(L=>Array.from(new Uint8Array(L)).map(V=>V.toString(16).padStart(2,"0")).join(""))}(y).then(D=>this.hashErrors[D]?"dismissed":(this.hashErrors[D]=!0,h(l,y,this.addPublicTags([].concat(C)),ps.error,Js.PLAIN,{extraProperties:{messageHash:D}}).then(this.report))).catch(console.error)}catch(D){return console.error(D),Promise.resolve(D)}};try{self.addEventListener("error",y=>{var C,w,D,N,L,V,G;if(!this.ignore(y?.message)){if(y?.target&&((null===(C=y?.target)||void 0===C?void 0:C.src)||(null===(w=y?.target)||void 0===w?void 0:w.href))){const W=`Load Resource Error in ${null===(D=y?.target)||void 0===D?void 0:D.tagName} element: ${(null===(N=y?.target)||void 0===N?void 0:N.src)||(null===(L=y?.target)||void 0===L?void 0:L.href)}`;return g(W,"RESOURCE_ERROR",y)}{const W=`Javascript Runtime Error in ${y?.filename} (${y?.lineno}:${y?.colno}): ${y?.message}\nStack: ${null!==(G=null===(V=y?.error)||void 0===V?void 0:V.stack)&&void 0!==G?G:y?.stack}`;return g(W,"JS_ERROR",y)}}}),self.addEventListener("unhandledrejection",y=>{var C;if(this.ignore(null===(C=y?.reason)||void 0===C?void 0:C.message))return;let w;const D=y?.reason;return w="string"==typeof D?`Promise Error: ${D}`:D instanceof Error?`Promise Error: ${D.message} ${D.name} ${D.stack}`:"object"==typeof D?`Promise Error with reason: ${dD(D)}`:`Promise Error with unrecognized reason: ${D}`,g(w,"UNHANDLED_PROMISE_REJECTION",y)})}catch(y){console.error(y)}this.debugLog("afterInit, add listener")},u&&(this.config=u),this.config.publicTags=[].concat(u?.publicTags)}}let mc=function(i){return i.AudioEncodeSuccess="init audio encode success",i.AudioDecodeSuccess="init audio decode success",i.AudioEncodeFailed="init audio encode failed",i.AudioDecodeFailed="init audio decode failed",i.DeviceAudioStreamCaptured="device audio stream captured",i.AudioJoinComplete="audio join complete",i.AudioLeaveComplete="audio leave complete",i.SharingAudioStartComplete="sharing audio start complete",i.SharingAudioStopComplete="sharing audio stop complete",i.AudioBridgeReconnectStart="audio bridge reconnect start",i.AudioBridgeReconnectEnd="audio bridge reconnect end",i}({}),jc=function(i){return i.VideoEncodeSuccess="init video encode success",i.VideoDecodeSuccess="init video decode success",i.VideoEncodeFailed="init video encode failed",i.VideoDecodeFailed="init video decode failed",i.VBSettingSuccess="video VB setting success",i.VBSettingFailed="init video VB failed",i.VBPreloadSuccess="preload video VB success",i.VBPreloading3S="preload video VB 3s",i.VBPreloading10S="preload video VB 10s",i.StartCaptureVideoSuccess="start capture video success",i.StopCaptureVideoSuccess="stop capture video success",i}({}),qA=function(i){return i.SharingEncodeSuccess="init sharing encode success",i.SharingDecodeSuccess="init sharing decode success",i.SharingEncodeFailed="init sharing encode failed",i.SharingDecodeFailed="init sharing decode failed",i}({});const EI={enable:!1,enableReport:!1,gatewayEndPoint:"",logLevel:{debug:!1,log:!1,info:!1,print:!1,warn:!1,error:!1},performanceReportRatio:.25,trackingCount:7},ph=["debug","log","info","print","warn","error"],so=(i,u)=>[...i,...u].filter(l=>!!l);let nd=(()=>{class i{static getInstance(){return this.agentInstance||(this.agentInstance=new i),this.agentInstance}constructor(){var l=this,h=this;this.laplace=void 0,this.trackingId=void 0,this.logConfig=void 0,this.reportUrl=void 0,this.publicTags=void 0,this.initConfig=function(){var g=F(function*(y){let C,w=EI;try{y.logConfig&&(w=JSON.parse(y.logConfig),w.gatewayEndPoint&&(l.reportUrl=w.gatewayEndPoint));const{enable:V,enableReport:G,reportUrl:W,logLevel:X,encryptKeys:ne,trackingId:me}=y;if(void 0!==V&&(w={...w,enable:!!V}),void 0!==G&&(w={...w,enableReport:!!G}),W&&(l.reportUrl=W),"string"==typeof X){const _e=ph.indexOf(X),Re=ph.reduce((Ne,et,ht)=>ht<_e?{...Ne,[`${et}`]:!1}:{...Ne,[`${et}`]:!0},{});w={...w,logLevel:Re}}else void 0!==X&&(w={...w,logLevel:X});if(me&&(l.trackingId=me,w={...w,enable:!0,enableReport:!0}),void 0!==ne){const _e=Array.isArray(ne)?ne:[ne];C=yield Promise.all(_e.map(Re=>{return(Ne=Re,window.crypto.subtle.importKey("raw",(new TextEncoder).encode(Ne.slice(0,32)),"AES-GCM",!1,["encrypt","decrypt"])).then(Ne=>({usage:mf.PROTECT_LOCAL_KEY,key:Ne}));var Ne}))}}catch(V){console.error("parse log config error",V)}const D=(new Date).getTime()-6048e5,N=w.enableReport&&l.reportUrl?{gzip:!1,encrypt:!1,additionalContext:{trackingId:l.trackingId}}:void 0;l.publicTags=["VideoSDK",l.trackingId];const L=[y.debugMode&&new vI({verbose:!1}),new AI({debug:!1,cleanAfterReport:!0,expireBefore:D}),new PF({debug:!1,autoReport:N,ignoredErrorMsgKeywords:["table index is out of bounds"],maxErrorCount:223,publicTags:l.publicTags})].filter(Boolean);return{laplaceConfig:{databaseName:"ZM-VSDK-LOG-DATABASE",maxSize:49283072,publicKey:y.logEncryptionPubKey,reportUrl:l.reportUrl,externalKeys:C,plugins:L},logConfig:w}});return function(y){return g.apply(this,arguments)}}(),this.handleInitLaplaceSuccess=(g,y)=>{var C;this.laplace=g;const w=Yr.get(U0.VSDKLogTrackingId);let D=[];try{D=JSON.parse(w?window.atob(w):"[]")}catch{}(null===(C=D.length>=y?.trackingCount)||void 0===C||C)&&D.shift();const N=D.reduce((L,V)=>({...L,[`${V}`]:!0}),{});g.deleteLog(L=>{var V;return!(null!==(V=L.tags)&&void 0!==V&&V.some(G=>N[G]))}),D.push(this.trackingId),Yr.set(U0.VSDKLogTrackingId,window.btoa(JSON.stringify(D)),Mi.LocalStorage)},this.init=function(){var g=F(function*(y){const{laplaceConfig:C,logConfig:w}=yield l.initConfig(y);return w.enable?(l.logConfig=w,GA.init(C).then(D=>{l.handleInitLaplaceSuccess(D,w)}).catch(D=>{throw{type:Xp,reason:"Logger init failed.",error:D}})):Promise.reject({type:nn,reason:"Logger feature is not enabled."})});return function(y){return g.apply(this,arguments)}}(),this.check=g=>{var y,C;return!(!this.checkLaplace()||(null===(y=this.logConfig)||void 0===y||null===(C=y.logLevel)||void 0===C||!C[g])&&(console.warn(`Logger ${g} is not enabled.`),1))},this.log=(g,y,C)=>{if(this.check("log"))try{var w;return null===(w=this.laplace.logWithEncryption(g,so(y,C)))||void 0===w?void 0:w.catch(()=>{})}catch{return}},this.warn=(g,y,C)=>{if(this.check("warn"))try{var w;return null===(w=this.laplace.warnWithEncryption(g,so(y,C)))||void 0===w?void 0:w.catch(()=>{})}catch{return}},this.info=(g,y,C)=>{if(this.check("info"))try{var w;return null===(w=this.laplace.infoWithEncryption(g,so(y,C)))||void 0===w?void 0:w.catch(()=>{})}catch{return}},this.debug=(g,y,C)=>{if(this.check("debug"))try{var w;return null===(w=this.laplace.debugWithEncryption(g,so(y,C)))||void 0===w?void 0:w.catch(()=>{})}catch{return}},this.error=(g,y,C)=>{if(this.check("error"))try{var w;return null===(w=this.laplace.errorWithEncryption(g,so(y,C)))||void 0===w?void 0:w.catch(()=>{})}catch{return}},this.checkLaplace=()=>{var g;return!(null===(g=this.laplace)||void 0===g||!g.log)},this.makeLogger=g=>{var y;const C=so(null!==(y=this.publicTags)&&void 0!==y?y:[],g);return{log:(w,D)=>this.log(w,C,D??[]),warn:(w,D)=>this.warn(w,C,D??[]),info:(w,D)=>this.info(w,C,D??[]),debug:(w,D)=>this.debug(w,C,D??[]),error:(w,D)=>this.error(w,C,D??[])}},this.reportToGlobalTracing=g=>{var y;return this.checkLaplace()?null!==(y=this.logConfig)&&void 0!==y&&y.enableReport&&this.reportUrl?this.laplace.reportByHttps(g,{gzip:!1,encrypt:!1,xhrOptions:{url:this.reportUrl},additionalContext:{trackingId:this.trackingId}}):Promise.reject({type:nn,reason:"Please use getLogs to obtain log data and report by yourself."}):Promise.reject({type:nn,reason:"Logger has not been enabled or initialized."})},this.report=function(g,y){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"warn";if(h.checkLaplace()&&h.logConfig.enableReport&&h.reportUrl){var w,D;const N=Array.isArray(y)?y:[y];null===(w=(D=h.makeLogger(N))[`${C}`])||void 0===w||w.call(D,g).then(()=>{h.reportToGlobalTracing(N)})}},this.getLogs=(g,y)=>{if(!this.checkLaplace())return console.warn("Logger has not been enabled or initialized."),[];const C=g.getState(),{meeting:{meetingNumber:w,userId:D,userEmail:N,userName:L}}=C,V={meetingNumber:w,userId:D,userEmail:N,userName:L},G=this.laplace.getLogs(y),W=[];for(const[,X]of G)W.push({...X,...V});return W},this.doNotUseDirtyGetStore=()=>this.checkLaplace()?this.laplace.doNotUseDirtyGetStore():(console.warn("Logger has not been enabled or initialized."),{byTag:{},byTime:new Map}),this.trackingId=cD()}}return i.agentInstance=void 0,i})();const CD=nd.getInstance(),Vm=[{type:"MediaMeta",methods:["sendUserNodeList","updateUserMediaSN","updateMediaParams","subscribeToQos","unsubscribeFromQos","sendUserAudioStatus","muteOrUnmuteOtherAudio","adjustOtherAudioVolume"]},{type:"Audio",methods:["joinComputerAudio","leaveComputerAudio","joinSharingAudio","leaveSharingAudio","changeSpeaker","changeMicrophone","enableAudioEncode","pauseOrResumeAudio","setSharingAudioVolume","enableShareAudioToBreakoutRoom","enableAudioDenoise","enableSyncButtonsOnHeadset","stopAllIncomingAudio","preInitAudioBridge","setAudioCodecMode"]},{type:"Video",methods:["startCaptureVideo","stopCaptureVideo","renderVideo","stopRenderVideo","changeCamera","updateRenderedVideoCanvasDimension","adjustRenderedVideoPosition","mirrorVideo","enableHardwareAccelerationForVideoDecode","enableHardwareAccelerationForVideoEncode","startVirtualBackgroundSetting","updateVirtualBackgroundImage","stopVirtualBackgroundSetting","startMaskSetting","updateMaskBackgroundImage","updateMaskClip","stopMaskSetting","enableVideoObserver","prefetchVideoSsrc","cancelPrefetchVideoSsrc","setMobileRotateMode","changeActiveVideoSsrc"]},{type:"Sharing",methods:["stopDesktopSharing","startDesktopSharing","pauseDesktopSharing","resumeDesktopSharing","renderSharing","stopRenderSharing","switchSharingSource","ajustmentReceivedSharingCanvas","changeSharingSecondCamera","updateRenderedSharingDimension","addReceivedSharingChannelType","removeReceivedSharingChannelType","switchSharingMode"]},{type:"RemoteControl",methods:["startRemoteControl","stopRemoteControl","resendRemoteControlPositionPDU","updateRemoteControlProperties","renderSharing","stopRenderSharing","switchSharingSource","ajustmentReceivedSharingCanvas"]},{type:"RemoteCamera",methods:["movePTZCamera"]}].reduce((i,u)=>{const{type:l,methods:h}=u;return[...i,...h.map(g=>({name:g,type:l}))]},[]),ID=Vm.map(i=>i.name),I2=function(i){const u=Vm.find(y=>y.name===i);if(u){const{type:y}=u;for(var l=arguments.length,h=new Array(l>1?l-1:0),g=1;g<l;g++)h[g-1]=arguments[g];const C=h?.map(w=>w instanceof HTMLElement?I_(w):w);CD.makeLogger([y,`${y} Media SDK`]).info(`${i},params:${JSON.stringify(C)}`)}};function gc(i){return new Proxy(i,{get:(u,l)=>"string"==typeof l&&ID.includes(l)?function(){for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];try{Reflect.apply(I2,void 0,[l,...g])}catch{}return Reflect.apply(Reflect.get(u,l),u,g)}:Reflect.get(u,l)})}function fl(i){return`{E}${i}{/E}`}const O_=nd.getInstance().makeLogger(["Remote Control"]),w2=gc(Qr.getInstance());function YA(i,u,l,h){let{share:{activeNodeId:g,shareQuality:y}}=u;const{share:{isReceiveSharingFromMainSession:C}}=u;l&&(g=l),void 0!==h&&(y=h);const w=Vc(u);i.subscribeSharing(g,y,C,w)}class k_{constructor(){this.checkerSubject=void 0,this.checkerSubscription=void 0}startCheck(u){return this.checkerSubject&&this.stopCheck(),this.checkerSubject=new Vr,this.checkerSubscription=sa(u).subscribe(this.checkerSubject),this.checkerSubject}stopCheck(){var u;this.checkerSubject&&(this.checkerSubject.complete(),null===(u=this.checkerSubscription)||void 0===u||u.unsubscribe(),this.checkerSubject=void 0)}}const $A=new k_,T2=new k_;function Mb(){return $A.stopCheck()}function bI(){return T2.stopCheck()}function P_(i,u){Mb(),bI();const{share:{remoteControllingSsrc:l},meeting:{userId:h}}=i;l&&(wD(),u.takeBackRemoteControlPermission(h,l))}function Nb(i,u,l,h,g){return xb.apply(this,arguments)}function xb(){return xb=F(function*(i,u,l,h,g){const{share:{isSDKGrabControl:y,isGrabRemoteControl:C}}=l;C||(h.subscribeGrabRemoteControl(i,!0),yield oc(Oo(hc,1).pipe(Ut(D=>!!D))));const w=Cr(l);w&&(y?(g.resendRemoteControlPositionPDU(),g.updateRemoteControlProperties({os:w.os,isControllerNow:!0,dimension:u&&ch(u)})):u&&g.startRemoteControl(u,w.os,ch(u)))}),xb.apply(this,arguments)}function wD(){O_.log("qr scanning stop"),w2.startRemoteControlQRCheck(!1)}const rd=kr.createAgent(),fa=gc(Qr.getInstance()),yu=kr.createAgent(),vf=gc(Qr.getInstance());function cp(i){for(var u=arguments.length,l=Array(u>1?u-1:0),h=1;h<u;h++)l[h-1]=arguments[h];throw Error("[Immer] minified error nr: "+i+(l.length?" "+l.map(function(g){return"'"+g+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function JA(i){return!!i&&!!i[Fl]}function jm(i){var u;return!!i&&(function(l){if(!l||"object"!=typeof l)return!1;var h=Object.getPrototypeOf(l);if(null===h)return!0;var g=Object.hasOwnProperty.call(h,"constructor")&&h.constructor;return g===Object||"function"==typeof g&&Function.toString.call(g)===M2}(i)||Array.isArray(i)||!!i[P2]||!(null===(u=i.constructor)||void 0===u||!u[P2])||RD(i)||DD(i))}function XA(i,u,l){void 0===l&&(l=!1),0===Qm(i)?(l?Object.keys:DI)(i).forEach(function(h){l&&"symbol"==typeof h||u(h,i[h],i)}):i.forEach(function(h,g){return u(g,h,i)})}function Qm(i){var u=i[Fl];return u?u.i>3?u.i-4:u.i:Array.isArray(i)?1:RD(i)?2:DD(i)?3:0}function Af(i,u){return 2===Qm(i)?i.has(u):Object.prototype.hasOwnProperty.call(i,u)}function TD(i,u,l){var h=Qm(i);2===h?i.set(u,l):3===h?(i.delete(u),i.add(l)):i[u]=l}function RD(i){return NF&&i instanceof Map}function DD(i){return LD&&i instanceof Set}function ZA(i){return i.o||i.t}function R2(i){if(Array.isArray(i))return Array.prototype.slice.call(i);var u=xF(i);delete u[Fl];for(var l=DI(u),h=0;h<l.length;h++){var g=l[h],y=u[g];!1===y.writable&&(y.writable=!0,y.configurable=!0),(y.get||y.set)&&(u[g]={configurable:!0,writable:!0,enumerable:y.enumerable,value:i[g]})}return Object.create(Object.getPrototypeOf(i),u)}function D2(i,u){return void 0===u&&(u=!1),O2(i)||JA(i)||!jm(i)||(Qm(i)>1&&(i.set=i.add=i.clear=i.delete=MF),Object.freeze(i),u&&XA(i,function(l,h){return D2(h,!0)},!0)),i}function MF(){cp(2)}function O2(i){return null==i||"object"!=typeof i||Object.isFrozen(i)}function yf(i){var u=LF[i];return u||cp(18,i),u}function OD(){return ry}function ey(i,u){u&&(yf("Patches"),i.u=[],i.s=[],i.v=u)}function SI(i){CI(i),i.p.forEach(Lb),i.p=null}function CI(i){i===ry&&(ry=i.l)}function II(i){return ry={p:[],l:ry,h:i,m:!0,_:0}}function Lb(i){var u=i[Fl];0===u.i||1===u.i?u.j():u.O=!0}function ty(i,u){u._=u.p.length;var l=u.p[0],h=void 0!==i&&i!==l;return u.h.g||yf("ES5").S(u,i,h),h?(l[Fl].P&&(SI(u),cp(4)),jm(i)&&(i=ny(u,i),u.l||M_(u,i)),u.u&&yf("Patches").M(l[Fl].t,i,u.u,u.s)):i=ny(u,l,[]),SI(u),u.u&&u.v(u.u,u.s),i!==Bb?i:void 0}function ny(i,u,l){if(O2(u))return u;var h=u[Fl];if(!h)return XA(u,function(y,C){return kD(i,h,u,y,C,l)},!0),u;if(h.A!==i)return u;if(!h.P)return M_(i,h.t,!0),h.t;if(!h.I){h.I=!0,h.A._--;var g=4===h.i||5===h.i?h.o=R2(h.k):h.o;XA(3===h.i?new Set(g):g,function(y,C){return kD(i,h,g,y,C,l)}),M_(i,g,!1),l&&i.u&&yf("Patches").R(h,l,i.u,i.s)}return h.o}function kD(i,u,l,h,g,y){if(JA(g)){var C=ny(i,g,y&&u&&3!==u.i&&!Af(u.D,h)?y.concat(h):void 0);if(TD(l,h,C),!JA(C))return;i.m=!1}if(jm(g)&&!O2(g)){if(!i.h.F&&i._<1)return;ny(i,g),u&&u.A.l||M_(i,g)}}function M_(i,u,l){void 0===l&&(l=!1),i.h.F&&i.m&&D2(u,l)}function wI(i,u){var l=i[Fl];return(l?ZA(l):i)[u]}function PD(i,u){if(u in i)for(var l=Object.getPrototypeOf(i);l;){var h=Object.getOwnPropertyDescriptor(l,u);if(h)return h;l=Object.getPrototypeOf(l)}}function TI(i){i.P||(i.P=!0,i.l&&TI(i.l))}function MD(i){i.o||(i.o=R2(i.t))}function Hm(i,u,l){var h=RD(u)?yf("MapSet").N(u,l):DD(u)?yf("MapSet").T(u,l):i.g?function(g,y){var C=Array.isArray(g),w={i:C?1:0,A:y?y.A:OD(),P:!1,I:!1,D:{},l:y,t:g,k:null,o:null,j:null,C:!1},D=w,N=N_;C&&(D=[w],N=iy);var L=Proxy.revocable(D,N),V=L.revoke,G=L.proxy;return w.k=G,w.j=V,G}(u,l):yf("ES5").J(u,l);return(l?l.A:OD()).p.push(h),h}function ND(i,u){switch(u){case 2:return new Map(i);case 3:return Array.from(i)}return R2(i)}var xD,ry,RI=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),NF=typeof Map<"u",LD=typeof Set<"u",k2=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",Bb=RI?Symbol.for("immer-nothing"):((xD={})["immer-nothing"]=!0,xD),P2=RI?Symbol.for("immer-draftable"):"__$immer_draftable",Fl=RI?Symbol.for("immer-state"):"__$immer_state",M2=""+Object.prototype.constructor,DI=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:Object.getOwnPropertyNames,xF=Object.getOwnPropertyDescriptors||function(i){var u={};return DI(i).forEach(function(l){u[l]=Object.getOwnPropertyDescriptor(i,l)}),u},LF={},N_={get:function(i,u){if(u===Fl)return i;var g,w,D,l=ZA(i);if(!Af(l,u))return g=i,(D=PD(l,u))?"value"in D?D.value:null===(w=D.get)||void 0===w?void 0:w.call(g.k):void 0;var h=l[u];return i.I||!jm(h)?h:h===wI(i.t,u)?(MD(i),i.o[u]=Hm(i.A.h,h,i)):h},has:function(i,u){return u in ZA(i)},ownKeys:function(i){return Reflect.ownKeys(ZA(i))},set:function(i,u,l){var C,w,h=PD(ZA(i),u);if(h?.set)return h.set.call(i.k,l),!0;if(!i.P){var g=wI(ZA(i),u),y=g?.[Fl];if(y&&y.t===l)return i.o[u]=l,i.D[u]=!1,!0;if(((C=l)===(w=g)?0!==C||1/C==1/w:C!=C&&w!=w)&&(void 0!==l||Af(i.t,u)))return!0;MD(i),TI(i)}return i.o[u]===l&&"number"!=typeof l&&(void 0!==l||u in i.o)||(i.o[u]=l,i.D[u]=!0,!0)},deleteProperty:function(i,u){return void 0!==wI(i.t,u)||u in i.t?(i.D[u]=!1,MD(i),TI(i)):delete i.D[u],i.o&&delete i.o[u],!0},getOwnPropertyDescriptor:function(i,u){var l=ZA(i),h=Reflect.getOwnPropertyDescriptor(l,u);return h&&{writable:!0,configurable:1!==i.i||"length"!==u,enumerable:h.enumerable,value:l[u]}},defineProperty:function(){cp(11)},getPrototypeOf:function(i){return Object.getPrototypeOf(i.t)},setPrototypeOf:function(){cp(12)}},iy={};XA(N_,function(i,u){iy[i]=function(){return arguments[0]=arguments[0][0],u.apply(this,arguments)}}),iy.deleteProperty=function(i,u){return iy.set.call(this,i,u,void 0)},iy.set=function(i,u,l){return N_.set.call(this,i[0],u,l,i[0])};var BD=function(){function i(l){var h=this;this.g=k2,this.F=!0,this.produce=function(g,y,C){if("function"==typeof g&&"function"!=typeof y){var w=y;y=g;var D=h;return function(ne){var me=this;void 0===ne&&(ne=w);for(var _e=arguments.length,Re=Array(_e>1?_e-1:0),Ne=1;Ne<_e;Ne++)Re[Ne-1]=arguments[Ne];return D.produce(ne,function(et){var ht;return(ht=y).call.apply(ht,[me,et].concat(Re))})}}var N;if("function"!=typeof y&&cp(6),void 0!==C&&"function"!=typeof C&&cp(7),jm(g)){var L=II(h),V=Hm(h,g,void 0),G=!0;try{N=y(V),G=!1}finally{G?SI(L):CI(L)}return typeof Promise<"u"&&N instanceof Promise?N.then(function(ne){return ey(L,C),ty(ne,L)},function(ne){throw SI(L),ne}):(ey(L,C),ty(N,L))}if(!g||"object"!=typeof g){if(void 0===(N=y(g))&&(N=g),N===Bb&&(N=void 0),h.F&&D2(N,!0),C){var W=[],X=[];yf("Patches").M(g,N,W,X),C(W,X)}return N}cp(21,g)},this.produceWithPatches=function(g,y){if("function"==typeof g)return function(N){for(var L=arguments.length,V=Array(L>1?L-1:0),G=1;G<L;G++)V[G-1]=arguments[G];return h.produceWithPatches(N,function(W){return g.apply(void 0,[W].concat(V))})};var C,w,D=h.produce(g,y,function(N,L){C=N,w=L});return typeof Promise<"u"&&D instanceof Promise?D.then(function(N){return[N,C,w]}):[D,C,w]},"boolean"==typeof l?.useProxies&&this.setUseProxies(l.useProxies),"boolean"==typeof l?.autoFreeze&&this.setAutoFreeze(l.autoFreeze)}var u=i.prototype;return u.createDraft=function(l){var y;jm(l)||cp(8),JA(l)&&(JA(y=l)||cp(22,y),l=function C(w){if(!jm(w))return w;var D,N=w[Fl],L=Qm(w);if(N){if(!N.P&&(N.i<4||!yf("ES5").K(N)))return N.t;N.I=!0,D=ND(w,L),N.I=!1}else D=ND(w,L);return XA(D,function(V,G){var W,X;N&&(X=V,(2===Qm(W=N.t)?W.get(X):W[X])===G)||TD(D,V,C(G))}),3===L?new Set(D):D}(y));var h=II(this),g=Hm(this,l,void 0);return g[Fl].C=!0,CI(h),g},u.finishDraft=function(l,h){var g=(l&&l[Fl]).A;return ey(g,h),ty(void 0,g)},u.setAutoFreeze=function(l){this.F=l},u.setUseProxies=function(l){l&&!k2&&cp(20),this.g=l},u.applyPatches=function(l,h){var g;for(g=h.length-1;g>=0;g--){var y=h[g];if(0===y.path.length&&"replace"===y.op){l=y.value;break}}g>-1&&(h=h.slice(g+1));var C=yf("Patches").$;return JA(l)?C(l,h):this.produce(l,function(w){return C(w,h)})},i}(),Eu=new BD,ct=Eu.produce;Eu.produceWithPatches.bind(Eu),Eu.setAutoFreeze.bind(Eu),Eu.setUseProxies.bind(Eu),Eu.applyPatches.bind(Eu),Eu.createDraft.bind(Eu),Eu.finishDraft.bind(Eu);const N2={ssrc:0,status:yi.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:pu.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isChromeExtensionInstalled:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1,capturedEnsuredCanvas:[],renderedEnsuredCanvas:[],remoteControllingSsrc:0,remoteControlApprovedSsrc:0,remoteControlAppDownloadUrl:"",remoteControlAppInstallStatus:ha.Unknown,isEnableAutoDeleteRcApp:!1,remoteControlledUserList:[],isRemoteControlEnabled:!1,userSsrcMapping:{},statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}}},BF=li({[`${ER}`]:ct((i,u)=>{let{payload:l}=u;i.sharePrivilege=l}),[`${DC}`]:ct((i,u)=>{let{payload:l}=u;i.isRemoteSharingActive=1===l.bStatus,i.activeNodeId=l.activeNodeID,i.activeSsrc=l.ssrc}),[`${OC}`]:ct((i,u)=>{let{payload:l}=u;i.isReceiveSharing=l}),[`${kC}`]:ct((i,u)=>{let{payload:l}=u;i.isChromeExtensionInstalled=l}),[`${bR}`]:ct((i,u)=>{let{payload:l}=u;i.shareDimension={...l}}),[`${Ll}`]:ct((i,u)=>{let{payload:l}=u;i.status=l}),[`${ni}`]:ct((i,u)=>{let{payload:l}=u;i.ssrc=l}),[`${Ft}`]:ct((i,u)=>{let{payload:l}=u;i.shareQuality=l}),[`${MC}`]:ct((i,u)=>{let{payload:l}=u;i.receivedShareDimension={...l}}),[`${LC}`]:ct((i,u)=>{let{payload:l}=u;i.remoteControlledUserList.includes(l)||i.remoteControlledUserList.push(l)}),[`${sf}`]:ct((i,u)=>{let{payload:l}=u;const h=i.remoteControlledUserList.indexOf(l);h>=0&&i.remoteControlledUserList.splice(h,1)}),[`${JE}`]:ct((i,u)=>{let{payload:l}=u;i.isGrabRemoteControl=l,!1===l&&(i.remoteControlViewportDomSelector=void 0)}),[`${XE}`]:ct((i,u)=>{let{payload:l}=u;i.isSDKGrabControl=l}),[`${QM}`]:ct((i,u)=>{let{payload:l}=u;i.isReceiveSharingFromMainSession=l}),[`${fA}`]:ct((i,u)=>{let{payload:l}=u;i.isSharingToBreakoutRoom=l}),[`${SR}`]:ct((i,u)=>{let{payload:l}=u;i.isSharingWithSecondCamera=l}),[`${wm}`]:ct((i,u)=>{let{payload:l}=u;i.secondCameraId=l}),[`${ZE}`]:ct((i,u)=>{let{payload:l}=u;i.isRequireReadReceipt=l}),[`${NC}`]:ct((i,u)=>{let{payload:l}=u;i.isOptimizedForSharedVideo=l}),[`${HM}`]:ct((i,u)=>{let{payload:l}=u;i.statistic.encode=l.data}),[`${mA}`]:ct((i,u)=>{let{payload:l}=u;i.statistic.decode=l.data}),[`${CR}`]:ct((i,u)=>{let{payload:l}=u;i.capturedEnsuredCanvas.includes(l)||i.capturedEnsuredCanvas.push(l)}),[`${Uc}`]:ct((i,u)=>{let{payload:l}=u;i.renderedEnsuredCanvas.includes(l)||i.renderedEnsuredCanvas.push(l)}),[`${g_}`]:ct((i,u)=>{let{payload:l}=u;i.remoteControllingSsrc=l}),[`${Tm}`]:ct((i,u)=>{let{payload:l}=u;i.remoteControlApprovedSsrc=l}),[`${GM}`]:ct((i,u)=>{let{payload:l}=u;i.remoteControlAppDownloadUrl=l}),[`${rf}`]:ct((i,u)=>{let{payload:l}=u;(i.remoteControlAppInstallStatus!==ha.Installed||ha.Unknown)&&(i.remoteControlAppInstallStatus=l)}),[`${rp}`]:ct((i,u)=>{let{payload:l}=u;i.remoteControlAppLaunchSheme=l}),[`${xC}`]:ct((i,u)=>{let{payload:l}=u;const{userId:h,ssrc:g}=l;Object.assign(i.userSsrcMapping,{[`${h}`]:g})}),[`${eb}`]:ct((i,u)=>{let{payload:l}=u;Object.assign(i,l)}),[`${gA}`]:ct((i,u)=>{let{payload:l}=u;i.remoteControlViewportDomSelector=l}),[`${tb}`]:()=>({...N2})},N2),x2={remoteControlEpics0:i=>i.pipe(Wn(`${Ko}`),Bn(u=>{const{payload:{meetingOptions:l,rcAutoDelete:h,jwtRc:g,opRc:y}}=u;return eb({isRemoteControlEnabled:l?.isRemoteControlEnbaled&&y&&1===g,isEnableAutoDeleteRcApp:1===h})})),remoteControlEpics1:(i,u)=>Dn(i,16391).pipe(hn(l=>{const{payload:{body:{bOn:h,sendID:g,receiveID:y}}}=l,{meeting:{userId:C},share:{status:w,activeNodeId:D,isGrabRemoteControl:N}}=u.value,L=[];if(w===yi.End&&L.push(g_(0)),w!==yi.End)if(Ro(C,g))if(h){Mb(),bI(),w===yi.Paused&&(yu.resumeSharing(),vf.resumeDesktopSharing(),L.push(Ll(yi.Sharing))),L.push(g_(y));const G=Uo(u.value).find(W=>Ro(W.userId,y));G&&L.push(xC({userId:G.userId,ssrc:y}))}else L.push(g_(0));else{var V;const G=null===(V=Uo(u.value))||void 0===V?void 0:V.find(W=>Ro(W.userId,g));G&&(L.push(xC({userId:G.userId,ssrc:g})),Ze(tA,{userId:G.userId,displayName:G.displayName,isSharingEntireScreen:vf.isSharingEntireScreen()}))}else if(!y||Ro(y,C)){const G=Yn(u.value);if(!Ds(G.userRole)&&!dr.isAndroidOrIOSBrowser){const W=g&&Ro(D,g);h?(L.push(LC(D)),W&&(N||yu.subscribeGrabRemoteControl(D,!0))):(L.push(sf(D)),W&&(N&&(yu.subscribeGrabRemoteControl(D,!1),L.push(JE(!1)),Ze(hc,!1)),vf.updateRemoteControlProperties({isControllerNow:!1}))),Ze(eA,h)}}return kn(L)})),remoteControlEpics2:(i,u)=>Dn(i,16395).pipe(Nn(u),Ut(l=>{let[h,g]=l;return h.payload.body.id===g.meeting.userId}),Bn(l=>{let[h]=l;const{payload:{body:{bOn:g}}}=h;return vf.updateRemoteControlProperties({isControllerNow:g}),Ze(hc,g),JE(g)})),remoteControlEpics3:i=>Rr(i,[Cn.StartRemoteControlSuccess,Cn.StartRemoteControlFailed,Cn.CancelRemoteControlSuccess]).pipe(qa(u=>u.payload.type===Cn.StartRemoteControlSuccess?(Ze(pC),XE(!0)):u.payload.type===Cn.CancelRemoteControlSuccess?XE(!1):void(u.payload.type===Cn.StartRemoteControlFailed&&Ze(KE)))),remoteControlEpics4:i=>Rr(i,[Cn.RemoteControlCopiedTextNotify,Cn.RemoteControlPasteTextLengthOverflow]).pipe(Jn(u=>{if(u.payload.type===Cn.RemoteControlCopiedTextNotify){const{payload:{data:l}}=u;Ze(o_,{content:l.data,x:l.x,y:l.y})}else Ze(o_,{error:"length of pasted text is too long"})}),Ar(Ue)),remoteControlEpics5:(i,u)=>Dn(i,4342).pipe(Ut(l=>0===l.payload.body.result),hn(l=>{const{payload:{body:{downloadUrl:h,ssrc:g,urlScheme:y}}}=l,{share:{remoteControlApprovedSsrc:C,status:w}}=u.value,D=[],{isMacOS:N}=dr;if(w!==yi.End){if(!C||C===g){Mb();try{const X=JSON.parse(h||"{}");D.push(GM(N?X.macDownloadUrl:X.winDownloadUrl))}catch(X){console.warn("unsupported JSON string",X)}}const L={};N||Object.assign(L,{runAsAdmin:1});const V=Uo(u.value).find(X=>Ro(X.userId,g));V&&Object.assign(L,{controllerName:As(V.displayName)}),Object.assign(L,{ssrc:g});const{deviceId:G}=vf.getShareStreamInfo();G&&Object.assign(L,{DeviceID:G});const W=`${y}&${new URLSearchParams(L).toString()}`;D.push(rp(W),rf(ha.Unknown)),Ze(mC,W)}return kn(D)})),remoteControlEpics6:i=>i.pipe(Wn(`${IR}`),hn(()=>$A.startCheck(1e4).pipe(Bn(()=>(Ze(Xh,ha.Unknown),rf(ha.Unknown)))))),remoteControlEpics7:(i,u)=>i.pipe(Wn(`${WM}`),Ut(()=>{const{share:{remoteControlAppInstallStatus:l}}=u.value;return l===ha.Installed}),hn(()=>T2.startCheck(6e4).pipe(hn(()=>{Ze(Xh,Wv.Unlaunched);const{share:{remoteControlApprovedSsrc:l,isEnableAutoDeleteRcApp:h},meeting:{userId:g}}=u.value,y=[],{isMacOS:C}=dr;return l&&(yu.remoteControlConsent(Gv.CacheClean,l,g,{...vf.getShareStreamInfo(),platform:C?"mac":"win"},h),y.push(rp(""),Tm(0))),kn(y)})))),remoteControlEpics8:(i,u)=>i.pipe(Wn(`${rp}`),Ut(l=>!!l.payload),hn(l=>{const{payload:h}=l,g=[];let y;if(h){(function(w){if(!w.startsWith("zoomprc://"))return;const D=Hh("__ZOOM_SDK_RC_APP_SCHEME_@__");let N=document.getElementById(D);N||(N=document.createElement("iframe"),N.id=D,N.style.display="none",document.body.appendChild(N)),N.contentWindow.location.href=w})(h),g.push(WM());const C=performance.now();document.hasFocus()?y=Mp(25).pipe(Ev(()=>{const w=performance.now()-C<500;return w||Ze(Xh,ha.Uninstalled),w&&u.value.share.remoteControlAppInstallStatus===ha.Unknown}),wi(()=>{const w=performance.now()-C,D=[];return document.hasFocus()||(w>75?D.push(IR()):Mb(),Ze(Xh,ha.Installed),D.push(rf(ha.Installed),WM())),kn(D)}),function(){for(var w=[],D=0;D<arguments.length;D++)w[D]=arguments[D];return function(N){return qf(N,Ii.apply(void 0,ye([],ce(w))))}}(rf(ha.Uninstalled))):(Ze(Xh,ha.Unknown),g.push(rf(ha.Unknown)))}return y?un(y,kn(g)):kn(g)})),remoteControlEpics9:(i,u)=>Dn(i,16428).pipe(hn(()=>(Ze(s_,UE.Ended),P_(u.value,yu),kn([rp(""),Tm(0)])))),remoteControlEpics10:(i,u)=>i.pipe(Wn(`${Ll}`),Ut(l=>{const{share:{remoteControllingSsrc:h,remoteControlApprovedSsrc:g}}=u.value;return!(l.payload!==yi.End||!h&&!g)}),Jn(()=>{const{share:{remoteControllingSsrc:l,remoteControlApprovedSsrc:h,isEnableAutoDeleteRcApp:g},meeting:{userId:y}}=u.value,{isMacOS:C}=dr;l&&P_(u.value,yu),h!==l&&yu.remoteControlConsent(Gv.Decline,h,y,{...vf.getShareStreamInfo(),platform:C?"mac":"win"},g)}),Ar(Ue)),remoteControlEpics11:(i,u)=>Dn(i,16430).pipe(hn(()=>{return Mb(),bI(),Ze(Xh,Wv.Launched),u.value.share.status!==yi.End&&(l=u.value,h=vf,(g=F(function*(y){const{media:{assetsPath:C}}=y,w=`${C}/qrscanner.min.js`;return"WebQrscanner"in window?Promise.resolve(""):new Promise((D,N)=>{O_.log(`load qr scanner script start. url:${w}`),cI(w,()=>{O_.log("load qr scanner script done."),D("")},N)})}),function(y){return g.apply(this,arguments)})(l).then(()=>{O_.log("qr scanning start"),h.startRemoteControlQRCheck(!0)})),kn([rp(""),Tm(0)]);var l,h,g})),remoteControlEpics12:i=>Rr(i,Cn.CurrentDesktopSharingWidthHeight).pipe(Jn(()=>{yu.syncSharedContentMetaWithRcApp(vf.getShareStreamInfo())}),Ar(Ue)),remoteControlEpics13:(i,u)=>Rr(i,Cn.SendRemoteControlQrCode).pipe(Jn(l=>{const{payload:{data:h}}=l,{share:{status:g}}=u.value;g!==yi.End&&Array.isArray(h)&&h.length>0&&h.forEach(y=>{null!=y&&y.startsWith("zrc_")&&yu.sendRemoteControlAuth(y)})}),Ar(Ue)),remoteControlEpics14:i=>Dn(i,16434).pipe(Jn(u=>{const{payload:{body:{result:l}}}=u;0===l&&(wD(),Ze(s_,UE.Started))}),Ar(Ue)),remoteControlEpics15:(i,u)=>Dn(i,So).pipe(Ut(l=>{var h,g;const{meeting:{userId:y},share:{remoteControlledUserList:C}}=u.value,{payload:{body:w}}=l;return C.length>0&&((null===(h=w.update)||void 0===h?void 0:h.some(D=>D.id!==y&&!1===D.bShareOn))||(null===(g=w.remove)||void 0===g?void 0:g.some(D=>D.id!==y)))}),hn(l=>{var h,g,y,C;const{payload:{body:w}}=l,{share:{remoteControlledUserList:D,activeNodeId:N,isGrabRemoteControl:L},meeting:{userId:V}}=u.value,G=(null!==(h=null===(g=w.update)||void 0===g?void 0:g.filter(X=>X.id!==V&&!1===X.bShareOn))&&void 0!==h?h:[]).concat(null!==(y=null===(C=w.remove)||void 0===C?void 0:C.filter(X=>X.id!==V))&&void 0!==y?y:[]),W=[];return D.forEach(X=>{G.find(ne=>ne.id===X)&&(W.push(sf(X)),X===N&&L&&(W.push(JE(!1)),Ze(hc,!1)))}),kn(W)})),remoteControlEpics16:(i,u)=>i.pipe(Wn(`${ja}`),Jn(()=>{const{share:{remoteControllingSsrc:l,status:h}}=u.value;h===yi.Sharing&&l&&Ze(s_,UE.Ended)}),Ar(Ue))},UF=ca({epics0:(i,u)=>Dn(i,uc).pipe(Ut(l=>{var h;return void 0!==(null===(h=l.payload.body)||void 0===h?void 0:h.lockShare)}),Nn(u),Jn(l=>{let[h,g]=l;const{share:{sharePrivilege:y}}=g,{payload:{body:{lockShare:C}}}=h;y!==C&&Ze(hC,C)}),Bn(l=>{let[h]=l;return ER(h.payload.body.lockShare)})),epics1:i=>Dn(i,20227).pipe(Bn(u=>ni(u.payload.body.ssrc))),epics2:(i,u)=>Dn(i,20225).pipe(Nn(u),Ut(l=>{let[h,g]=l;const{payload:{body:y}}=h,{share:{isReceiveSharingFromMainSession:C}}=g;return!C||C&&y.fromMainSession}),Bn(l=>{let[h,g]=l;const{share:{isReceiveSharing:y,activeNodeId:C,isReceiveSharingFromMainSession:w},breakoutRoom:D}=g,{payload:{body:N}}=h;if(y&&1===N.bStatus){let L=!1;D?.currentRoom.status===fr.InRoom&&D.mainSessionAttendeeList.length>0&&(L=D.mainSessionAttendeeList.findIndex(V=>V.userId===C)>-1),rd.unsubscribeSharing(C,L),YA(rd,g,N.activeNodeID),fa.switchSharingSource(N.ssrc,w),Ze(Zv,{userId:N.activeNodeID})}else if(1===N.bStatus){const L={activeUserId:N.activeNodeID,isActive:!0};w&&Object.assign(L,{isFromMainSession:!0}),Ze(F1,L)}else if(y){const L={activeUserId:N.activeNodeID,isActive:!1};w&&Object.assign(L,{isFromMainSession:!0}),Ze(F1,L)}return DC(N)})),epics3:i=>Rr(i,Cn.CheckChromeSharingExtensionResponse).pipe(Bn(u=>(Ze(uC,u.payload.data),kC(u.payload.data)))),epics4:(i,u)=>Rr(i,[Cn.SharingDesktopStreamHaveAudio,Cn.SharingDesktopStreamHaveNoAudio]).pipe(Nn(u),Bn(l=>{let[h,g]=l;const{meeting:{userId:y},share:{isSharingToBreakoutRoom:C,isOptimizedForSharedVideo:w}}=g,{payload:{type:D}}=h;return rd.startSharing(y,{bShareToBO:C,bShareAudio:D===Cn.SharingDesktopStreamHaveAudio,bShareVideo:!!w}),PC(!1)})),epics5:i=>Rr(i,[Cn.DesktopSharingError,Cn.DesktopSharingChromeExtensionUninstalled,Cn.DesktopSharingPermissionDenied,Cn.DesktopSharingSystemError]).pipe(hn(u=>{const l=[];let h="";return[Cn.DesktopSharingPermissionDenied,Cn.DesktopSharingSystemError].includes(u.payload.type)&&(l.push(PC(!0)),u.payload.type===Cn.DesktopSharingSystemError?dr.isMacOS&&(h="To use screen share on Chrome, please allow screen recording access in system setting."):h="To use screen share, please allow the permission request."),Ze($v,{reason:h}),kn(l)})),epics6:i=>Rr(i,Cn.CurrentDesktopSharingWidthHeight).pipe(Ut(u=>!!u.payload.data),Bn(u=>{Ze(bM,u.payload.data);const{payload:{data:{width:l,height:h}}}=u;return fa.ajustmentSharingCanvas(l,h),bR(u.payload.data)})),epics7:(i,u)=>Rr(i,Cn.SharingDecodeMaxSize).pipe(Ut(l=>!!l.payload.data),Nn(u),qa(l=>{let[h,g]=l;const{share:{shareQuality:y,activeNodeId:C}}=g,{payload:{data:{fps:w}}}=h,D=Number(w);if(y!==D)return YA(rd,g,C,D),Ft(D)})),epics8:i=>Dn(i,20226).pipe(Jn(u=>{var l,h;if(Ze(WE,null===(l=u.payload)||void 0===l?void 0:l.body),null!==(h=u.payload)&&void 0!==h&&h.body){const{payload:{body:{width:g,height:y}}}=u;fa.ajustmentReceivedSharingCanvas(g,y)}}),Bn(u=>MC(u.payload.body))),epics9:i=>Rr(i,Cn.SharingPara).pipe(Jn(u=>{var l,h;if(Ze(WE,null===(l=u.payload.data)||void 0===l?void 0:l.body),null!==(h=u.payload.data)&&void 0!==h&&h.body){const{payload:{data:{body:{width:g,height:y}}}}=u;fa.ajustmentReceivedSharingCanvas(g,y)}}),Bn(u=>{var l;return MC(null===(l=u.payload.data)||void 0===l?void 0:l.body)})),epics10:(i,u)=>Rr(i,Cn.UserStopDesktopSharing).pipe(Nn(u),Bn(l=>{let[,h]=l;const{meeting:{userId:g},share:{status:y}}=h;return y!==yi.End&&(rd.stopSharing(g),fa.stopDesktopSharing(),Ze(U1)),Ll(yi.End)})),epics11:(i,u)=>Dn(i,So).pipe(Nn(u),Ut(l=>{let[h,g]=l;const{meeting:{userId:y}}=g,C=h.payload.body.update;return C&&C.length>0&&C.findIndex(w=>w.id===y&&void 0!==w.bShareOn)>-1}),hn(l=>{let[h,g]=l;const{meeting:{userId:y},share:{status:C,isReceiveSharing:w,activeNodeId:D}}=g,{payload:{body:{update:N}}}=h,L=N.find(W=>W.id===y&&!1===W.bShareOn),V=N.find(W=>W.id===y&&!0===W.bShareOn),G=[];return L&&C!==yi.End&&(rd.stopSharing(y),fa.stopDesktopSharing(),G.push(Ll(yi.End)),Ze(V1)),V&&C===yi.End&&(w&&(fa.stopRenderSharing(),rd.unsubscribeSharing(D),G.push(OC(!1))),G.push(Ll(yi.Sharing))),kn(G)})),epics12:(i,u)=>Dn(i,So).pipe(Nn(u),Ut(l=>{let[h,g]=l;const{meeting:{userId:y}}=g,C=h.payload.body.update;return C&&C.length>0&&C.findIndex(w=>w.id!==y&&void 0!==w.bShareOn)>-1}),hn(l=>{let[h,g]=l;const{payload:{body:{update:y}}}=h,{share:{activeNodeId:C,isReceiveSharing:w}}=g,D=C_(g),N=y.filter(G=>!0===G.bShareOn&&!1===G.bSharePause),L=y.filter(G=>!0===G.bShareOn&&!0===G.bSharePause),V=y.filter(G=>!1===G.bShareOn);return N.length>0&&N.forEach(G=>{-1===D.findIndex(W=>W.userId===G.id)?Ze(Jv,G):Ze(j1,G)}),L.length>0&&L.forEach(G=>{Ze(Am,G)}),V.length>0&&(V.forEach(G=>{Ze(Xv,G)}),w&&V.some(G=>G.id===C))?Hu(Dn(i,20225).pipe(ki(1),Ar(Ue)),sa(50).pipe(Ar(Fh("timeout")))).pipe(Np(()=>{const{share:{activeNodeId:G,isReceiveSharingFromMainSession:W},audio:X}=u.value,ne=D.filter(me=>me.userId!==G);if(ne.length>0){const me=ne[0],{userId:_e}=me;return rd.unsubscribeSharing(G,W),YA(rd,u.value,_e),fa.switchSharingSource(_e,W),X?.localShareAudioUserMutedList.forEach(Re=>{fa.setSharingAudioVolume(_e,Re.userId!==_e||Re.muted,Re.isFromMainSession)}),Ze(Zv,{userId:_e}),Ii(DC({activeNodeID:_e,bStatus:1,ssrc:_e}))}return Ue})):Ue})),epics13:(i,u)=>Dn(i,V0).pipe(Nn(u),wi(l=>{let[h,g]=l;const{payload:{body:{encryptKey:y,additionalType:C}}}=h,{media:{sharingDecodeStatus:w,sharingEncodeStatus:D},meeting:{confId:N,userId:L,zoomId:V,meetingId:G,meetingNumber:W,isWebinar:X}}=g;return T_(u).pipe(wi(ne=>{let me=D;return X&&ne&&Ds(ne.userRole)&&(me="failed"),Os("sharing",me,w).pipe(Jn(_e=>{let[Re,Ne]=_e;const et={userId:L,sn:su(V),confId:N,encryptKey:su(y),encryptType:C,meetingId:G,meetingNumber:W};if(Re&&fa?.updateMediaParams({iVType:zs.SHARING_ENCODE,isFromMainSession:!1,updateParams:et}),Ne){fa.updateMediaParams({iVType:zs.SHARING_DECODE,isFromMainSession:!1,updateParams:et});const{participants:{attendeesList:ht}}=u.value;if(ht.length>0){const ze=ht.map(Qe=>({userid:Qe.userId,sn:Qe.zoomID&&su(Qe.zoomID)}));fa.updateUserMediaSN({added:ze,isFromMainSession:!1,iVType:zs.SHARING_DECODE})}}}),Ar(Ue))}))})),epics14:(i,u)=>la(i,20235).pipe(Nn(u),Jn(l=>{let[h,g]=l;const{media:{sharingDecodeStatus:y}}=g,{type:C,payload:{body:w}}=h,D=C===`${Dl}`;Os("sharing","success",y).subscribe(N=>{let[,L]=N;L&&fa.addReceivedSharingChannelType({isFromMainSession:D,...w})})}),Ar(Ue)),epics15:(i,u)=>la(i,20236).pipe(Nn(u),Jn(l=>{let[h,g]=l;const{media:{sharingDecodeStatus:y}}=g,{type:C,payload:{body:{ssrc:w}}}=h,D=C===`${Dl}`;Os("sharing","success",y).subscribe(N=>{let[,L]=N;L&&fa.removeReceivedSharingChannelType({isFromMainSession:D,ssrc:w})})}),Ar(Ue)),epics16:i=>Rr(i,Cn.SharingFirstDecodeFrameReceivedSsrc).pipe(Ut(u=>!!u.payload.data),Jn(u=>{const{payload:{data:{ssrc:l}}}=u;rd.sendReceivingSharingReady(l)}),Ar(Ue)),epics17:(i,u)=>Dn(i,20233).pipe(Ut(()=>!!u.value.share.isRequireReadReceipt),Jn(l=>{const{payload:{body:{bReceiveOk:h}}}=l;h&&Ze(fC)}),Ar(Ue)),epics18:(i,u)=>Dn(i,uc).pipe(Ut(l=>{var h;return void 0!==(null===(h=l.payload.body)||void 0===h?void 0:h.lockShare)}),hn(l=>{const{payload:{body:{lockShare:h}}}=l,{share:{isOptimizedForSharedVideo:g,isSharingToBreakoutRoom:y},audio:{isSharingAudio:C},meeting:{userId:w}}=u.value,D=[];return h===pu.MultipleShare&&g&&(rd.startSharing(w,{bShareAudio:C,bShareToBO:y,bShareVideo:!1}),fa.switchSharingMode(_M.Normal),D.push(NC(!1))),kn(D)})),epics19:(i,u)=>Rr(i,Cn.ShareQosData).pipe(Nn(u),Bn(l=>{var h;let[g,y]=l;const{meeting:{isWebinar:C},media:{sharingEncodeStatus:w,sharingDecodeStatus:D},share:{status:N,isReceiveSharing:L},participants:{xmppAttendeeList:V}}=y;let G=LM(y).length>0;C&&(G=G||Boolean(V.length));const X=L&&"success"===D;return null!==(h=g.payload.data)&&void 0!==h&&h.encoding?N!==yi.End&&"success"===w&&G?(Ze(Q1,g.payload),HM(g.payload)):HM(qd):X?(Ze(Q1,g.payload),mA(g.payload)):mA(qd)}))},x2),id=kr.createAgent();let Gm,OI,od=function(i){return i.Add="add",i.List="list",i.Remove="memberremove",i.rename="rename",i.update="UPDATE",i}({}),Ef=function(i){return i.Open="open",i.Message="message",i.Error="error",i.Close="close",i}({}),Fb=(()=>{class i{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new i),this.xmppInstance}on(l,h){let g=this.eventHandlers.get(l);g||(g=[]),g.push(h),this.eventHandlers.set(l,g)}off(l,h){const g=this.eventHandlers.get(l);if(g){const y=g.filter(C=>C!==h);this.eventHandlers.set(l,y)}}emit(l,h){const g=this.eventHandlers.get(l);g&&g instanceof Array&&g.slice(0).forEach(y=>{try{y(h)}catch(C){console.error(C)}})}sendMessageToRwg(l){this.seq+=1;const h=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(l,{seq:h}))),h}connect(l){this.websocket=new WebSocket(l),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var l;null===(l=this.websocket)||void 0===l||l.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",l=>{this.emit(Ef.Open,l)}),this.websocket.addEventListener("message",l=>{const{data:h}=l;var g;if(h instanceof ArrayBuffer)0===new Uint8Array(h)[0]&&(null===(g=this.websocket)||void 0===g||g.send(h));else try{this.emit(Ef.Message,JSON.parse(h))}catch{console.warn("Unsupported format",h)}}),this.websocket.addEventListener("close",l=>{this.emit(Ef.Close,l)}),this.websocket.addEventListener("error",l=>{this.emit(Ef.Error,l)}))}join(l){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:l}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(l){return{seq:this.sendMessageToRwg({evt:24578,jids:l||[]})}}sendWebinarMseeage(l,h,g){return{seq:this.sendMessageToRwg({evt:24582,body:{msg:l,jid:h?[h]:[],type:g,bcm:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}})}}sendAnswer(l,h,g){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:h.jid,question_attendeename:h.displayName,question_text:h.questionText,question_id:h.questionId,question_anonymous:h.isAnonymous,question_time:h.questionTime,text:l,isPrivate:g}})}}answerOnline(l,h){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:l.jid,question_attendeename:l.displayName,question_text:l.questionText,question_id:l.questionId,question_anonymous:l.isAnonymous,question_time:l.questionTime,isLiveStart:h}})}}dismissQuestion(l){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:l.jid,question_attendeename:l.displayName,question_text:l.questionText,question_id:l.questionId,question_anonymous:l.isAnonymous,question_time:l.questionTime,bOpen:!1}})}}deleteQuestion(l){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:l,bDelete:!0}})}}deleteComment(l){return{seq:this.sendMessageToRwg({body:{comment_id:l,bDelete:!0},evt:24616})}}reopenQuestion(l){return{seq:this.sendMessageToRwg({body:{question_attendeejid:l.jid,question_attendeename:l.displayName,question_text:l.questionText,question_id:l.questionId,question_anonymous:l.isAnonymous,question_time:l.questionTime,bOpen:!0},evt:24590})}}askQuestion(l,h){let g=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=arguments.length>3?arguments[3]:void 0;const C=Ov();return{seq:this.sendMessageToRwg({body:{id:C,text:l,isAnonymous:g,bAllowAttendeeViewAllQuestion:y,name:h},evt:24592}),questionId:C}}upOrDownVote(l,h){return{seq:this.sendMessageToRwg({body:{question_attendeejid:l.jid,question_attendeename:l.displayName,question_text:l.questionText,question_id:l.questionId,question_anonymous:l.isAnonymous,question_time:l.questionTime,bUpVote:h},evt:24598})}}rename(l,h){return{seq:this.sendMessageToRwg({body:{jid:l,displayName:h},evt:24600})}}setSkinTome(l){return{seq:this.sendMessageToRwg({body:{skinTone:l},evt:24618})}}}return i.xmppInstance=null,i})();const Ub=kr.createAgent();let Qc=null;function oy(i){switch(i.responseType){case"json":if("response"in i)return i.response;var u=i;return JSON.parse(u.responseText);case"document":return i.responseXML;default:return"response"in i?i.response:(u=i).responseText}}var Km,Wm=function(i,u,l,h){void 0===h&&(h="download_load"),this.originalEvent=i,this.xhr=u,this.request=l,this.type=h;var y=u.responseType;this.status=u.status??0,this.responseType=y??"";var C=u.getAllResponseHeaders();this.responseHeaders=C?C.split("\n").reduce(function(N,L){var V=L.indexOf(": ");return N[L.slice(0,V)]=L.slice(V+2),N},{}):{},this.response=oy(u);var D=i.total;this.loaded=i.loaded,this.total=D},x_=Ee(function(i){return function(u,l,h){var g;this.message=u,this.name="AjaxError",this.xhr=l,this.request=h,this.status=l.status,this.responseType=l.responseType;try{g=oy(l)}catch{g=l.responseText}this.response=g}}),kI=function(){function i(u,l){return x_.call(this,"ajax timeout",u,l),this.name="AjaxTimeoutError",this}return i.prototype=Object.create(x_.prototype),i}(),sy=Bn(function(i){return i.response}),sd=((Km=function(i){var u;return u="string"==typeof i?{url:i}:i,new Pn(function(l){var h,g,y,C=ee({async:!0,crossDomain:!1,withCredentials:!1,method:"GET",timeout:0,responseType:"json"},u),w=C.queryParams,D=C.body,N=C.headers,L=C.url;if(!L)throw new TypeError("url is required");if(w)if(L.includes("?")){var V=L.split("?");if(2<V.length)throw new TypeError("invalid url");y=new URLSearchParams(V[1]),new URLSearchParams(w).forEach(function(Wt,en){return y.set(en,Wt)}),L=V[0]+"?"+y}else L=L+"?"+(y=new URLSearchParams(w));var G={};if(N)for(var W in N)N.hasOwnProperty(W)&&(G[W.toLowerCase()]=N[W]);var X=C.crossDomain;X||"x-requested-with"in G||(G["x-requested-with"]="XMLHttpRequest");var me=C.xsrfCookieName,_e=C.xsrfHeaderName;if((C.withCredentials||!X)&&me&&_e){var Re=null!==(g=null===(h=document?.cookie.match(new RegExp("(^|;\\s*)("+me+")=([^;]*)")))||void 0===h?void 0:h.pop())&&void 0!==g?g:"";Re&&(G[_e]=Re)}var Ne,et=function(Wt,en){var rn;if(!Wt||"string"==typeof Wt||typeof FormData<"u"&&Wt instanceof FormData||function(on){return typeof URLSearchParams<"u"&&on instanceof URLSearchParams}(Wt)||function(on){return QD(on,"ArrayBuffer")}(Wt)||function(on){return QD(on,"File")}(Wt)||function(on){return QD(on,"Blob")}(Wt)||function(on){return typeof ReadableStream<"u"&&on instanceof ReadableStream}(Wt))return Wt;if(function(on){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(on)}(Wt))return Wt.buffer;if("object"==typeof Wt)return en["content-type"]=null!==(rn=en["content-type"])&&void 0!==rn?rn:"application/json;charset=utf-8",JSON.stringify(Wt);throw new TypeError("Unknown body type")}(D,G),ht=ee(ee({},C),{url:L,headers:G,body:et});Ne=u.createXHR?u.createXHR():new XMLHttpRequest;var ze=u.progressSubscriber,Qe=u.includeDownloadProgress,wt=void 0!==Qe&&Qe,Xt=u.includeUploadProgress,_t=void 0!==Xt&&Xt,it=function(Wt,en){Ne.addEventListener(Wt,function(){var rn,on=en();null===(rn=ze?.error)||void 0===rn||rn.call(ze,on),l.error(on)})};it("timeout",function(){return new kI(Ne,ht)}),it("abort",function(){return new x_("aborted",Ne,ht)});var Ce=function(Wt,en){return new Wm(en,Ne,ht,Wt+"_"+en.type)},Ye=function(Wt,en,rn){Wt.addEventListener(en,function(on){l.next(Ce(rn,on))})};_t&&[po,zm,VD].forEach(function(Wt){return Ye(Ne.upload,Wt,FD)}),ze&&[po,zm].forEach(function(Wt){return Ne.upload.addEventListener(Wt,function(en){var rn;return null===(rn=ze?.next)||void 0===rn?void 0:rn.call(ze,en)})}),wt&&[po,zm].forEach(function(Wt){return Ye(Ne,Wt,UD)});var Ge=function(Wt){l.error(new x_("ajax error"+(Wt?" "+Wt:""),Ne,ht))};Ne.addEventListener("error",function(Wt){var en;null===(en=ze?.error)||void 0===en||en.call(ze,Wt),Ge()}),Ne.addEventListener(VD,function(Wt){var en,rn,on=Ne.status;if(on<400){null===(en=ze?.complete)||void 0===en||en.call(ze);var hr=void 0;try{hr=Ce(UD,Wt)}catch(Hn){return void l.error(Hn)}l.next(hr),l.complete()}else null===(rn=ze?.error)||void 0===rn||rn.call(ze,Wt),Ge(on)});var ut=ht.user,mt=ht.method,St=ht.async;for(var W in ut?Ne.open(mt,L,St,ut,ht.password):Ne.open(mt,L,St),St&&(Ne.timeout=ht.timeout,Ne.responseType=ht.responseType),"withCredentials"in Ne&&(Ne.withCredentials=ht.withCredentials),G)G.hasOwnProperty(W)&&Ne.setRequestHeader(W,G[W]);return et?Ne.send(et):Ne.send(),function(){Ne&&4!==Ne.readyState&&Ne.abort()}})}).get=function(i,u){return sd({method:"GET",url:i,headers:u})},Km.post=function(i,u,l){return sd({method:"POST",url:i,body:u,headers:l})},Km.delete=function(i,u){return sd({method:"DELETE",url:i,headers:u})},Km.put=function(i,u,l){return sd({method:"PUT",url:i,body:u,headers:l})},Km.patch=function(i,u,l){return sd({method:"PATCH",url:i,body:u,headers:l})},Km.getJSON=function(i,u){return sy(sd({method:"GET",url:i,headers:u}))},Km),FD="upload",UD="download",po="loadstart",zm="progress",VD="load",jD=Object.prototype.toString;function QD(i,u){return jD.call(i)==="[object "+u+"]"}const ml=nd.getInstance(),Vb=i=>{const{meeting:{encryptedRWC:u,encryptedGEORWC:l,discardedRwcList:h,meetingOptions:g}}=i;let y=[];return g?.isEnableGeoFenceRWC&&l&&l?.length>0?y=l.filter(C=>!h.includes(C.rwc)).reduce((C,w)=>{const{dl:D,rwc:N,rwcToken:L}=w,V=C.find(G=>G.dl===D);if(V)V.items.push({rwc:N,rwcToken:L});else{const G={dl:D,items:[]};G.items.push({rwc:N,rwcToken:L}),C.push(G)}return C},[]):u&&(y=[{dl:0,items:Object.keys(u).map(C=>({rwc:C,rwcToken:u[C]}))}]),y},HD=i=>un(...i.map(u=>0===u.dl?kn(u.items):sa(u.dl).pipe(hn(()=>kn(u.items))))),PI=(i,u)=>i.pipe(Wn(`${D0}`),Nn(u),Ut(l=>{let[,h]=l;return void 0!==h.meeting.encryptedRWC||void 0!==h.meeting.encryptedGEORWC&&h.meeting.encryptedGEORWC.length>0}),wi(l=>{let[,h]=l;const{meeting:{ts:g,auth:y,meetingNumber:C,meetingOptions:w,meetingId:D,userName:N},breakoutRoom:L}=h,V=w?.isEnableGeoFenceRWC,G=Vb(h);if(G.length>0){const W={serversLength:G.reduce((ne,me)=>ne+me.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0,retryCounts:0};let X;return V&&(X=new Gt,HD(G).subscribe(ne=>{var me;return null===(me=X)||void 0===me?void 0:me.next(ne)})),(V?X:HD(G)).pipe(Ev(()=>{const{meeting:{meetingStatus:ne}}=u.value,me=ne===Do.Initial&&W.pingFailedServerList.length<W.serversLength&&W.serversLength>0;return!me&&X&&X.complete(),me}),Jn(()=>{if(W.pingRwcServerCounts=W.pingRwcServerCounts+1,V&&W.pingRwcServerCounts===W.serversLength){const ne=1e3*Math.floor(5*Math.pow(2,W.retryCounts));W.retryCounts=W.retryCounts+1,ml.makeLogger(["Join Meeting Flow"]).info(`ping rwc retry,current rwc list:${JSON.stringify(Vb(u.value))},retry counts:${W.retryCounts}, ${JSON.stringify({meetingId:D,meetingNumber:fl(C),userName:fl(N)})}`,["Ping RWC Retry"]),sa(ne).pipe(Bn(()=>{const me=Vb(u.value);return Object.assign(W,{serversLength:me.reduce((_e,Re)=>_e+Re.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0}),me})).subscribe(me=>{HD(me).subscribe(_e=>{X.next(_e)})})}}),hn(ne=>{const{rwc:me,rwcToken:_e}=ne,Re=((Ne,et,ht,ze,Qe,wt)=>{const Xt={ts:ze,auth:Qe,rwcToken:ht,dmz:1};return wt&&Object.assign(Xt,{confID:wt}),`https://${Ne}/wc/ping/${et}?${new URLSearchParams(Xt).toString()}`})(me,C,_e,g,y,L?.currentRoom.boConfId);return sd({url:Re,crossDomain:au(Re)}).pipe(hn(Ne=>{let et={};return et=Ne.response?{...Ne.response,rwc:me,fromNginx:!1}:{rwc:me,rwg:me,rwcToken:_e,fromNginx:!0},kn([Pi(et),$f()])}),Np(()=>{const{pingFailedServerList:Ne,serversLength:et}=W;return Ne.push(Re),Ne.length===et&&(V&&X&&X.complete(),ml.report(`ping rwc error, ${JSON.stringify({meetingId:D,meetingNumber:fl(C),userName:fl(N)})}`,["Join Meeting Flow","Ping RWC Error"],"error"),Ze(Ta,{reason:"connection error",errorCode:jg})),Ue}))}),Fd(YB(performance.now())))}return Ue}));let L2=0;const VF=nd.getInstance(),ay={meetingStatus:Do.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",isAudioBridgeEnabled:!0,discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},meetingInfo:{},isNewJoinFlow:!1,gatewayUserList:[],logConfig:"",logEncryptionPubKey:"",failover:{count:0,isCurrentFailoverRecorded:!1,reason:-1,interval:0,joinMeetingSuccessTimestamp:0}},B2=li({[`${Ko}`]:ct((i,u)=>{let{payload:l}=u;l.customerKey=i.customerKey||l.customerKey||"",Object.assign(i,l),i.meetingStatus=Do.Initial}),[`${cc}`]:ct((i,u)=>{let{payload:l}=u;l.customerKey=i.customerKey||l.customerKey||"",Object.assign(i,l)}),[`${iM}`]:ct((i,u)=>{let{payload:l}=u;i.isWindowOpen=l}),[`${Qg}`]:ct((i,u)=>{let{payload:l}=u;i.signatureType=l.useSDK?"sdk":"api",i.apiKey=l.apiKey,i.signature=l.signature,i.lang=l.language}),[`${Up}`]:ct((i,u)=>{let{payload:l}=u;i.ztk=l}),[`${h1}`]:ct((i,u)=>{let{payload:l}=u;i.zsk=l}),[`${O0}`]:ct((i,u)=>{let{payload:l}=u;i.tk=l.tk,i.mtkGuid=l.mtkGuid}),[`${YB}`]:ct((i,u)=>{let{payload:l}=u;i.pingRWCTimestamp=l}),[`${qu}`]:ct((i,u)=>{let{payload:l}=u;i.confId=l.confID,i.conId=l.conID,i.e2eEncrypt=l.e2eEncrypt,i.meetingNumber=parseInt(l.mn,10),i.zoomId=l.zoomID,i.meetingStatus=Do.Joined,i.jid=l.jid,i.xtoken=l.xtoken,i.groups=l.groups,i.svcUrl=l.svcUrl,i.encType=l.encType,i.userGUID=l.userGUID,i.userId=l.userID,i.role=l.role,i.participantID=l.participantID,i.reportDomain=l.reportDomain,i.abToken=l.ABtoken,i.supportLocalAB=!!l.supportLocalAB,l.enableWebTransport&&(i.enableWebtransport=l.enableWebTransport,i.webtransportPort=l.WebTransportPort)}),[`${f1}`]:ct((i,u)=>{let{payload:l}=u;if(l.gatewayUser){var h;const{userId:y,sn:C}=l.gatewayUser,w=null===(h=i.gatewayUserList)||void 0===h?void 0:h.find(D=>D.userId===y);var g;w?w.sn=C:null===(g=i.gatewayUserList)||void 0===g||g.push(l.gatewayUser)}else Object.assign(i,l)}),[`${lc}`]:ct((i,u)=>{let{payload:l}=u;i.isHost=l}),[`${Vp}`]:ct((i,u)=>{let{payload:l}=u;i.isCoHost=l}),[`${tm}`]:ct((i,u)=>{let{payload:l}=u;i.isOnHold=l}),[`${nm}`]:ct((i,u)=>{let{payload:l}=u;i.isMeetingReset=l}),[`${jp}`]:ct((i,u)=>{let{payload:l}=u;i.audioVideoBeforeOnHold=l}),[`${oM}`]:ct((i,u)=>{let{payload:l}=u;i.currentUserAudioBeforeReset=l}),[`${k0}`]:ct((i,u)=>{let{payload:l}=u;i.isCurrentUserMutedBeforeReset=l}),[`${m1}`]:ct((i,u)=>{let{payload:l}=u;i.meetingStatus=l}),[`${sM}`]:ct((i,u)=>{let{payload:l}=u;i.region=l.region,i.network=l.network}),[`${OE}`]:ct((i,u)=>{let{payload:l}=u;i.isCurrentUserStartVideoBeforeReset=l}),[`${P0}`]:ct((i,u)=>{let{payload:l}=u;i.joinMeetingTimeStamp=l}),[`${g1}`]:ct((i,u)=>{let{payload:l}=u;i.activeAppInfo=l}),[`${Gh}`]:ct((i,u)=>{let{payload:l}=u;i.idleStartTime=l}),[`${aM}`]:ct((i,u)=>{let{payload:l}=u;i.sessionIdleTimeoutMins=l}),[`${_1}`]:ct((i,u)=>{let{payload:l}=u;i.isAudioBridgeEnabled=l}),[`${rm}`]:ct((i,u)=>{var l,h;let{payload:g}=u;const y=null===(l=i.encryptedGEORWC)||void 0===l||null===(h=l.find(w=>w.rwc===g))||void 0===h?void 0:h.dc;if(y){var C;const w=null===(C=i.encryptedGEORWC)||void 0===C?void 0:C.filter(D=>D.dc===y);w&&i.discardedRwcList.some(D=>w?.findIndex(N=>N.rwc===D)>=0)&&i.discardedRwcList.push(...w.map(D=>D.rwc)),i.discardedRwcList.push(g)}}),[`${M0}`]:ct((i,u)=>{let{payload:l}=u;i.sharePronounType=l}),[`${Hg}`]:ct((i,u)=>{let{payload:l}=u;i.stayAwake=l}),[`${im}`]:ct((i,u)=>{let{payload:l}=u;i.failover.joinMeetingSuccessTimestamp=l}),[`${N0}`]:ct(i=>{Object.assign(i.failover,{...ay.failover,count:i.failover.count,joinMeetingSuccessTimestamp:i.failover.joinMeetingSuccessTimestamp})}),[`${om}`]:ct((i,u)=>{let{payload:l}=u;const{count:h,reason:g,interval:y}=l;i.failover.count=h,i.failover.reason=g,i.failover.interval=y,i.failover.isCurrentFailoverRecorded=!0}),[`${v1}`]:ct((i,u)=>{let{payload:l}=u;i.quicklyLeave=l}),[`${DE}`]:(i,u)=>{let{payload:l}=u;const{isFailover:h}=l,g={isMeetingReset:!0,apiKey:i.apiKey,signatureType:i.signatureType,signature:i.signature,lang:i.lang,proxy:1,stayAwake:i.stayAwake};return h&&Object.assign(g,{currentUserAudioBeforeReset:i.audioVideoBeforeOnHold?i.audioVideoBeforeOnHold.audio:l.audio,isCurrentUserMutedBeforeReset:i.audioVideoBeforeOnHold?i.audioVideoBeforeOnHold.muted:l.muted,isCurrentUserStartVideoBeforeReset:i.audioVideoBeforeOnHold?i.audioVideoBeforeOnHold.video:l.video,meetingNumber:i.meetingNumber,userName:i.userName,passWord:i.passWord,userEmail:i.userEmail,sdkUrl:i.sdkUrl,sdkOrigin:i.sdkOrigin,cv:i.cv,zsk:i.zsk,ztk:i.ztk,idleStartTime:i.idleStartTime,sessionIdleTimeoutMins:i.sessionIdleTimeoutMins,customerKey:i.customerKey,failover:i.failover,stayAwake:i.stayAwake,quicklyLeave:i.quicklyLeave}),{...ay,...g}}},ay),WD=ca({meetingMainEpics0:i=>Dn(i,0).pipe(Jn(u=>{var l;if("READY"===(null===(l=u.payload.body)||void 0===l?void 0:l.status)){const h=Yr.get(ro.WebclientMeetingToken);h&&id.joinMeeting(h)}}),Ar(Ue)),meetingMainEpics1:(i,u)=>{return Dn(i,4098).pipe(Nn(u),(l=h=>{let[g,y]=h;const{payload:{body:{res:C,userID:w,zoomID:D,mn:N,participantID:L,meetingtoken:V,role:G}}}=g,{meeting:{userEmail:W,userName:X,isMeetingReset:ne,apiKey:me,zsk:_e,signatureType:Re}}=y;if(Ku.CONF_SUCCESS===C){const{WebclientParticipantId:Ne,WebclientZoomId:et,WebclientUserEmail:ht,WebclientUserName:ze,WebclientMeetingToken:Qe}=ro;Yr.set(et,D,Mi.SessionStorage),Yr.set(Ne,L,Mi.SessionStorage),W&&Yr.set(ht,W,Mi.SessionStorage),Yr.set(ze,X,Mi.SessionStorage),V&&Yr.set(Qe,V,Mi.SessionStorage),_e&&id.sendSdkKeyToMonitor(Re,me,w);const wt=[qu(g.payload.body),P0(performance.now())];return ne&&wt.push(nm(!1)),(G&hu.Owner)===hu.Owner&&(Ze(Ta,{reason:"dont support assisnt join through widget",errorCode:-1}),id.leaveMeeting()),Ze(mM,{meetingNumber:N}),kn(wt)}return Ku.CONF_FAIL_CONFLOCKED===C?Ze(Ta,Mv(C)):Ku.CONF_FAIL_CONF_USER_FULL===C?Ze(Ta,Object.assign({},Mv(C),{lmUrl:g.payload.body.lmURL})):(Ku.CONF_FAIL_MEETING_OVER===C||Ku.CONF_RESULT_MMR_IB_REJECT===C||Ku.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS===C||[Ku.CONF_FAIL_HAS_BEEN_REMOVED,Ku.CONF_FAIL_WEBINAR_DENIED_EMAIL].includes(C),Ze(Ta,Mv(C))),kn(za(y,!1))},Jt(wi((h,g)=>l(h)||Ue))));var l},meetingMainEpics2:(i,u)=>Dn(i,uc).pipe(Nn(u),Bn(l=>{let[h,g]=l;const{payload:{body:y}}=h,{meeting:{zoomId:C,encType:w,gcmSessinKey:D}}=g;if(void 0!==y?.encryptKey&&Ia.init(C,y.encryptKey,w),void 0!==y?.gatewayKey){const N=Qr.getInstance(),[,L,V]=y.gatewayKey.split(".");N.sendUserNodeList([{userid:Number(L),sn:V&&su(V)}],D)}return Ze(Yg,y),f1(y)})),meetingMainEpics3:(i,u)=>Dn(i,7939).pipe(Nn(u),hn(l=>{let[h,g]=l;const{payload:{body:y}}=h;if(void 0!==y.reason){if(Fp.Reconnect===y.reason)return Ze(nl,kv.WaitingRoomFailover===y.subReason?{reason:Ha.OnHold}:{reason:Ha.Failover}),Ii(ja(Ks.NormalCase));Fp.KickedByHost===y.reason?Ze(qg,{reason:"kicked by host"}):[Fp.EndByHost,Fp.EndByNone,Fp.EndByAdmin,Fp.EndByHostStartAnotherMeeting].includes(y.reason)?Ze(qg,{reason:"ended by host"}):Fp.FreeMeetingTimeout===y.reason?Ze(qg,{reason:"free meeting ended"}):[Fp.DuplicateSession,Fp.MeetingTransfer].includes(y.reason)&&Ze(qg,{reason:"duplicated session"})}return g.meeting.isMeetingReset?Ue:kn(za(g,!1))})),meetingMainEpics4:(i,u)=>i.pipe(Wn(`${ja}`),Nn(u),hn(l=>{let[,h]=l;const g=za(h,!0);let y;if(h.meeting.zlkJwtToken){const C=function(D){if(D){const{meeting:{topic:N,passWord:L,userName:V,zlkJwtToken:G,lang:W,cv:X,customerKey:ne}}=D;return{topic:N,passWord:L,userName:V,zlkJwtToken:G,lang:W,cv:X,customerKey:ne}}return null}(h);y=Ii(Nv({topic:C?.topic,password:C?.passWord,userName:C?.userName,zlk:C?.zlkJwtToken,lang:C?.lang,cv:C?.cv,customerKey:C?.customerKey})).pipe(dE(1e3))}else{const C=function(w){var D;const{meeting:{apiKey:N,signature:L,signatureType:V,meetingNumber:G,userName:W,lang:X,passWord:ne,userEmail:me,sdkUrl:_e,sdkOrigin:Re,proxy:Ne,cv:et,ztk:ht,zsk:ze,tk:Qe}}=w;let wt=ht||sessionStorage.getItem(ro.WebclientZtk),Xt=ze||sessionStorage.getItem(ro.WebclientZsk);const _t=1===Number(null===(D=u1(L))||void 0===D?void 0:D.role);return _t||(wt=Xt,Xt=""),{apiKey:N,signature:L,signatureType:V,meetingNumber:G,userName:W,lang:X,passWord:ne,userEmail:me,sdkUrl:_e,sdkOrigin:Re,proxy:Ne,cv:et,ztk:wt,zsk:Xt,tk:Qe||sessionStorage.getItem(ro.WebclientTk),ulsm:_t&&Xt?1:0}}(h);y=Ii(p1(C)).pipe(dE(1e3))}return qf(kn(g),y)})),meetingMainEpics5:i=>la(i,7940).pipe(Jn(u=>{Ze("MEETING_HOST_CHANGE_INDICATION",u.payload.body.bHost)}),Bn(u=>lc(u.payload.body))),meetingMainEpics6:i=>la(i,7941).pipe(Jn(u=>{Ze("MEETING_COHOST_CHANGE_INDICATION",u.payload.body.bCoHost)}),Bn(u=>Vp(u.payload.body))),meetingMainEpics7:i=>la(i,7945).pipe(Jn(u=>{const{payload:{body:{opt:l}}}=u;Yr.set(ro.WebclientOpt,l,Mi.SessionStorage)}),Ar(Ue)),meetingMainEpics8:(i,u)=>Dn(i,7942).pipe(Jn(l=>{const{payload:{body:{bHold:h}}}=l;Yr.set(ro.WebclientIsOnHold,h?1:0,Mi.SessionStorage),Ze(E1,h)}),Nn(u),hn(l=>{let[h,g]=l;const y=[tm(h.payload.body.bHold)];if(h.payload.body.bHold){const C=Yn(g);if(C){y.push(jp({audio:C.audio,video:C.bVideoOn,muted:C.muted}));const w=gc(Qr.getInstance());if("computer"===C.audio&&(w.leaveComputerAudio(),id.joinOrLeaveVoip(!1)),C.bVideoOn&&w.stopCaptureVideo(),C.sharerOn&&(id.stopSharing(C.userId),w.stopDesktopSharing(),y.push(Ll(yi.End))),g.video&&g.video.subscribedVideoList.length>0&&g.video.subscribedVideoList.forEach(D=>{id.unsubscribeVideo(D)}),g.share&&g.share.isReceiveSharing){const D=g.share.activeNodeId;g.share.remoteControlledUserList.length>0&&(g.share.remoteControlledUserList.forEach(N=>{id.sharingRequestRemoteControl(N,!1)}),oo(g)&&w.stopRemoteControl()),id.unsubscribeSharing(D),w.stopRenderSharing()}}}return kn(y)})),meetingMainEpics9:i=>Dn(i,7954).pipe(Bn(u=>sM(u.payload.body))),meetingMainEpics10:i=>Dn(i,4216).pipe(Jn(u=>{Ze("MEETING_CLAIM_HOST_KEY_RESPONSE",u.payload.body.bresult)}),Ar(Ue)),meetingMainEpics11:(i,u)=>i.pipe(Wn(`${RE}`,`${Ri}`),Nn(u),hn(l=>{let[h,g]=l;return h.type===`${RE}`?(id.leaveMeeting(),Ze(qg,{})):h.type===`${Ri}`&&(id.endMeeting(),Ze(qg,{})),kn(za(g,!1))})),meetingMainEpics12:(i,u)=>i.pipe(Wn(`${Rn}`),Nn(u),hn(l=>{let[h,g]=l;if(h.type===`${Rn}`&&g.meeting.meetingNumber&&!g.meeting.zlkJwtToken){const y={mn:g.meeting.meetingNumber.toString(),name:g.meeting.userName,customerKey:g.meeting.customerKey?As(g.meeting.customerKey):""},{jbhLeave:C}={jbhLeave:`https://${w_}/wc/jbhLeave`},w=`${C}/?${new URLSearchParams(y).toString()}`;fetch(w,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"}})}return Ue})),meetingMainEpics13:i=>Dn(i,2).pipe(Jn(()=>{console.warn("Upgrade to latest version to optimize meeting experience")}),Ar(Ue)),meetingMainEpics14:i=>Dn(i,1).pipe(Jn(u=>{const{payload:{body:{upgradeVersion:l}}}=u,h=Mv(1e4);if(h&&h.reason){const g=h.reason.replace(/{(\d+)}/g,()=>l);h.reason=g}Ze(Ta,h)}),Ar(Ue)),meetingMainEpics15:i=>Dn(i,4265).pipe(Bn(u=>{const{payload:{body:l}}=u,{nShareType:h}=l;return Ze(eF,{userSharePronounType:h}),M0(h)})),meetingMainEpics16:i=>Dn(i,4128).pipe(Jn(u=>{const{payload:{body:{meetingtoken:l}}}=u,{WebclientMeetingToken:h}=ro;l&&Yr.set(h,l,Mi.SessionStorage)}),Ar(Ue)),meetingMainEpics17:(i,u)=>i.pipe(Wn(`${qu}`),Ut(()=>!!u.value.meeting.quicklyLeave),wi(()=>ur(window,"beforeunload").pipe(Jn(()=>{id.leaveMeeting()}),Ar(Ue))))},{wakeLockEpic0:(i,u)=>i.pipe(Wn(`${qu}`),Nn(u),Ut(l=>{let[,h]=l;return!!h.meeting.stayAwake}),Jn(F(function*(){try{const{isSafari:l,isIOSMobile:h}=dr;Qc&&Qc.release().then(()=>{Qc=null}),"wakeLock"in navigator&&((l||h)&&(yield oc(Hu(ur(document,"click").pipe(ki(1)),ur(document,"touchend").pipe(ki(1))))),Qc=yield navigator.wakeLock.request("screen"),Qc.addEventListener("release",()=>{}))}catch{}})),wi(()=>ur(document,"visibilitychange").pipe(hn(F(function*(){if("visible"===document.visibilityState){const{isSafari:l,isIOSMobile:h}=dr;Qc&&Qc.release().then(()=>{Qc=null}),"wakeLock"in navigator&&((l||h)&&(yield oc(Hu(ur(document,"click").pipe(ki(1)),ur(document,"touchend").pipe(ki(1))))),Qc=yield navigator.wakeLock.request("screen"))}else Qc&&Qc.release().then(()=>{Qc=null})})),Ar(Ue)))),wakeLockEpic1:i=>i.pipe(Wn(`${nu}`)).pipe(Jn(()=>{Qc&&Qc.release().then(()=>{Qc=null})}),Ar(Ue))},{meetingFailoverReportEpic0:(i,u)=>i.pipe(Wn(`${Ko}`),wi(()=>{const l=0===u.value.meeting.failover.joinMeetingSuccessTimestamp&&!!Yr.get(ro.WebclientZoomId);return i.pipe(Wn(`${qu}`),ki(1),hn(()=>{const h=[],g=Yr.get(ro.WebclientFailoverCount)||0;let{meeting:{failover:{count:y,reason:C,interval:w}}}=u.value;const{meeting:{pingRWCTimestamp:D}}=u.value;l&&(y=g+1,C=Ks.RefreshPage,w=0,Yr.set(ro.WebclientFailoverCount,y,Mi.SessionStorage),h.push(om({count:y,reason:C,interval:w})));const N=performance.now();let L=`WCL_M, JMCT(${N-D})`;return y>0&&C!==Ks.NormalCase&&(L=`${L},FAILOVER(${y},${C},${(w/1e3).toFixed(1)})`),Ub.sendRWGConnectionPerformance(L),h.push(N0(),im(N)),kn(h)}))})),meetingFailoverReportEpic1:(i,u)=>i.pipe(Wn(`${ja}`),hn(l=>{const{payload:h}=l,{meeting:{failover:{joinMeetingSuccessTimestamp:g,isCurrentFailoverRecorded:y}}}=u.value,C=[];if(!y){let w=Yr.get(ro.WebclientFailoverCount)||0;h!==Ks.NormalCase&&(w+=1,Yr.set(ro.WebclientFailoverCount,w,Mi.SessionStorage));const D=performance.now()-g;C.push(om({reason:h,count:w,interval:D}))}return kn(C)}))},{sessionIdleEpic0:(i,u)=>i.pipe(Wn(`${qu}`),Nn(u),Ut(l=>{let[,h]=l;return void 0!==h.meeting.zlkJwtToken}),wi(()=>(Gm&&Gm.complete(),Gm=new Vr,OI=Mp(6e4).pipe(Bn(()=>performance.now())).subscribe(Gm),Gm.pipe(Bn(l=>Qa(l)))))),sessionIdleEpic1:i=>i.pipe(Wn(`${nu}`)).pipe(Jn(()=>{Gm&&(Gm.complete(),OI.unsubscribe())}),Ar(Ue)),sessionIdleEpic2:(i,u)=>i.pipe(Wn(`${Qa}`),Nn(u),hn(l=>{var h;let[g,y]=l;const{meeting:{idleStartTime:C,sessionIdleTimeoutMins:w,isOriginHost:D},participants:{attendeesList:N,xmppAttendeeList:L},recording:V,breakoutRoom:G}=y,W=g.payload,X=[];if(1===N.length&&0===L.length&&(null==G||null===(h=G.currentRoom)||void 0===h?void 0:h.status)!==fr.InRoom&&V?.cmrStatus!==Ys.Start)if(C){const ne=D&&cA(N[0].userRole)?w:40;W-C>60*ne*1e3&&(console.warn(`No active for ${ne} minutes, will end the session.`),X.push(Ri()),sa(500).subscribe(()=>{tR()}))}else X.push(Gh(W));else X.push(Gh(void 0));return kn(X)})),sessionIdleEpic3:(i,u)=>i.pipe(Wn(`${el}`),Ut(l=>[So,uc].includes(l.payload.evt)&&void 0!==u.value.meeting.idleStartTime),_o(Rc),hn(()=>{var l;const{participants:{attendeesList:h,xmppAttendeeList:g},recording:y,breakoutRoom:C}=u.value,w=[];return(h.length>1||g.length>0||y?.cmrStatus===Ys.Start||(null==C||null===(l=C.currentRoom)||void 0===l?void 0:l.status)===fr.InRoom)&&w.push(Gh(void 0)),kn(w)})),sessionIdleEpic4:i=>i.pipe(Wn(`${RE}`,`${Ri}`),Ea(Gh(void 0)))},{meetingInfoEpic:(i,u)=>i.pipe(Wn(`${Nv}`),wi(l=>{const h=Object.assign({},l.payload,{password:As(l.payload.password),topic:As(l.payload.topic)}),{videoSDKUrl:g}={meetingSDKUrl:`https://${w_}/api/v1/wc/info`,videoSDKUrl:`https://${w_}/wc/lsdk`};return function(y,C){let w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"zoomsdkjsonpcallback";return new Pn(D=>{L2++;const N=`${w}${L2}`,L=document.createElement("script");Object.keys(C).forEach(V=>null==C[V]&&delete C[V]),L.src=`${y}?${new URLSearchParams(Object.assign(C,{callback:N})).toString()}`,L.async=!0,L.onerror=V=>D.error(V),document.getElementsByTagName("head")[0].appendChild(L),window[N]=V=>{L.parentNode&&L.parentNode.removeChild(L),delete window[N],D.next(V),D.complete()}})}(g,h).pipe(Np(y=>Ii({status:!1,result:y.toString(),errorCode:jg})),hn(y=>{const[C,w]=(D=Ii(y),[Ut(N=V=>!0===V.status&&void 0!==V.result,L)(ls(D)),Ut(oi(N,L))(ls(D))]);var D,N,L;return w.subscribe(V=>{VF.report(`get meeting info error, ${JSON.stringify(V)}`,["Join Meeting Flow","Get Meeting Info Error"],"error"),V.state||(3e3===V.errorCode&&"Meeting password is incorrect"===V.errorMessage?Ze(Ta,ti(3004)):3e3===V.errorCode&&"The role type error"===V.errorMessage?Ze(Ta,ti(3010)):V.errorCode===jg?Ze(Ta,{reason:"connection error"}):3e3===V.errorCode?Ze(Ta,{reason:V.errorMessage,errorCode:200}):300===V.errorCode?Ze(Ta,{reason:"This account does not exist or does not belong to you",errorCode:200}):124===V.errorCode&&"Parse lite sdk topic and pwd fail"===V.errorMessage?Ze(Ta,{reason:"Parse topic and pwd fail",errorCode:200}):124===V.errorCode&&"The java web token is expired or more than 2 days or ineffective."===V.errorMessage?Ze(Ta,{reason:"The token has expired, is over 2 days old, or is ineffective.",errorCode:200}):124===V.errorCode&&Ze(Ta,{reason:"Verify JWT failed",errorCode:200}))}),C.pipe(Eb(V=>{if(!0===V.status){const{result:{mid:X,websdkClientFeatureOptions:ne,showRecommendVersion:me}}=V;Yr.init(X);const _e=((et,ht)=>{if(et.result){const{result:{mn:ze,ts:Qe,auth:wt,track_auth:Xt,mid:_t,tid:it,encryptedRWC:Ce,encryptedGEORWC:Ye,user_identity:Ge,meetingOptions:ut,can_recording:mt,wcXMPPConfig:St,call_out_country_json:Wt,isOriginalHost:en,support_call_out:rn,liveTranscription:on,logConfig:hr,logEncryptionPubKey:Hn,toll_numbers_json:Er,h323Password:or,liveStreamInfo:xr,rc_auto_delete:Wi,jwt_rc:Si,op_rc:Bt,mediaSDKVersion:Tt,mediaSDKPathPrefix:at,zmk:Zt,fileTransfer:xn,fileServerDomain:sr}}=et,{lang:br,password:In,topic:nr,zlk:Mr,cv:Kr,userName:Fr}=ht;return{meetingNumber:ze,meetingId:_t,tid:it,ts:Qe,auth:wt,passWord:In,trackAuth:Xt,customerKey:Ge,encryptedRWC:JSON.parse(Ce||"{}"),encryptedGEORWC:JSON.parse(Ye||"{}"),meetingOptions:JSON.parse(ut||"{}"),recordingEnable:"1"===mt,topic:nr,userName:Yr.get(ro.WebclientUserName)||Fr,cv:Kr,zlkJwtToken:Mr,xmppConfig:JSON.parse(St||"{}"),callOutCountry:JSON.parse(Wt||"{}"),lang:br,isOriginHost:en,isSupportCallOut:"1"===rn,liveTranscription:JSON.parse(on||"{}"),logConfig:hr,logEncryptionPubKey:Hn,tollNumbers:void 0===Er?void 0:JSON.parse(Er),h323Password:or,liveStreamInfo:JSON.parse(xr||"{}"),rcAutoDelete:Wi,jwtRc:Si,opRc:Bt,mediaSDKPath:Tt&&at?`${d1(at)}/${Tt}`:void 0,zmk:Zt,fileTransfer:JSON.parse(xn||"{}"),fileServerDomain:sr}}return et})(V,l.payload);var G;me&&(W=null==l||null===(G=l.payload)||void 0===G?void 0:G.lang,console.log(Ca("Update VideoSDK-Web to the latest version to optimize meeting experience","apac.videosdk_update_content",W),"https://devsupport.zoom.us/hc/en-us/sections/9481948737421-web"));const Re=[Ii(Ko(_e)),EE(PI,u,D0())],Ne=((et,ht)=>{const ze=[];if(et){const Qe=et.split("").reverse();Object.keys(kE).filter(wt=>/M:\d(,\d)*;V:\d(,\d)*/.test(kE[wt])).forEach(wt=>{const Xt=kE[wt];let[_t,it]=Xt.split(";");_t.startsWith("V:")&&([_t,it]=[it,_t]);const Ce=it.slice(2).split(",").map(ut=>Qe[Number(ut)-1]).reverse().join(""),Ye=parseInt(Ce,16),Ge=yb[Xt];Ge&&ze.push(Ii(Ge.action((Ye&Ge.mask)>0)))})}return ze})(ne);return Ne.length>0&&Re.unshift(...Ne),qf(...Re)}var W}))}))})),pingRWCEpic:PI});var MI={exports:{}};MI.exports=function(){function i(u){for(var l=1;l<arguments.length;l++){var h=arguments[l];for(var g in h)u[g]=h[g]}return u}return function u(l,h){function g(y,C,w){if(typeof document<"u"){"number"==typeof(w=i({},h,w)).expires&&(w.expires=new Date(Date.now()+864e5*w.expires)),w.expires&&(w.expires=w.expires.toUTCString()),y=encodeURIComponent(y).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var D="";for(var N in w)w[N]&&(D+="; "+N,!0!==w[N]&&(D+="="+w[N].split(";")[0]));return document.cookie=y+"="+l.write(C,y)+D}}return Object.create({set:g,get:function(y){if(typeof document<"u"&&(!arguments.length||y)){for(var C=document.cookie?document.cookie.split("; "):[],w={},D=0;D<C.length;D++){var N=C[D].split("="),L=N.slice(1).join("=");try{var V=decodeURIComponent(N[0]);if(w[V]=l.read(L,V),y===V)break}catch{}}return y?w[y]:w}},remove:function(y,C){g(y,"",i({},C,{expires:-1}))},withAttributes:function(y){return u(this.converter,i({},this.attributes,y))},withConverter:function(y){return u(i({},this.converter,y),this.attributes)}},{attributes:{value:Object.freeze(h)},converter:{value:Object.freeze(l)}})}({read:function(u){return'"'===u[0]&&(u=u.slice(1,-1)),u.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(u){return encodeURIComponent(u).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}();var jF=MI.exports;const{WebclientIsOnHold:KD,WebclientOpt:V2,WebclientParticipantId:QF,WebclientZoomId:j2,WebclientWebinarToken:zD,WebclientMeetingToken:jb}=ro,{WebclientDeviceId:HF}=U0;function NI(i){let{retryCount:u,rwgServerList:l,userName:h,auth:g,trackAuth:y,meetingId:C,customerKey:w,tid:D,lang:N,ts:L,bid:V,botk:G,confID:W,isAudioBridgeEnabled:X,isMeetingReset:ne,cameraDevicesList:me}=i;const _e=jF.get("_zm_mtk_guid");let Re=Yr.get(HF);if(Re||(Re=cD(),Yr.set(HF,Re,Mi.LocalStorage)),l.length>u){var Ne;const et=l[u],ht={dn2:As(h),auth:g,browser:`${dr.browser}${dr.browserVersion} ${null!==(Ne=window)&&void 0!==Ne&&Ne.crossOriginIsolated?"SAB":""}`,trackAuth:y,mid:C,tid:D,lang:N,ts:L,"ZM-CID":Re,_ZM_MTG_TRACK_ID:_e||"",customer_key:As(w),cfs:0};et.rwcAuth?Object.assign(ht,{rwcAuth:et.rwcAuth}):et.rwcToken&&Object.assign(ht,{rwcToken:et.rwcToken});const ze=dM()?1:dr.isIE||dr.isSupportEssentialAudioAndVideoAbility?2:0;Object.assign(ht,{as_type:ze}),[{key:V2,queryKey:"opt"},{key:QF,queryKey:"participantID"},{key:j2,queryKey:"zoomid"}].forEach(Xt=>{const _t=Yr.get(Xt.key);void 0!==_t&&(ht[Xt.queryKey]=_t)});const Qe=V&&G&&W;return Qe&&Object.assign(ht,{bid:As(V),botk:G,confID:W}),Yr.get(jb)&&Object.assign(ht,{isdj:1}),qo()&&(Object.assign(ht,{from:dr.isAndroidBrowser?"android":"ios"}),X&&Object.assign(ht,{useABAudio:1})),Object.assign(ht,{clientCaps:qD(X&&qo(),Qe)}),Object.assign(ht,{isCamera:ne?me.length>0?1:0:1}),Object.assign(ht,{clientOS:dr.isMacOS?"mac":"win"}),Object.assign(ht,{audioFeature:Qr.getAudioFeatureFlag()}),{queryObject:{...ht},rwgServer:et}}return null}function qD(i,u){let l=Fc.WebCameraIndication|Fc.SendMeetingTokenSeparately|Fc.SmartSummary|Fc.LocalRecording|Fc.LocalRecordingGrantPermission;const h=Qr.getPTZCapability();return(h.pan||h.tilt||h.zoom)&&(l|=Fc.SupportFarEndCameraControl),Qr.isSupportVideoShare()&&(l|=Fc.SupportVideoShare),i&&Qr.isSupportAudioBridgeAVSync()&&(l|=Fc.WebrtcAudioRtcpTime),Qr.isSupportShareMultiStream()&&(l|=Fc.ShareMultiStream),Qr.isSupportVideoLTR()&&(l|=Fc.VideoLTR),l|=Fc.UnifyErrorType,u||(l|=Fc.RequestRemoteControl),l}function L_(i,u){return u?Jt(dE(u),Ut(()=>{const{socket:{zoomSocketStatus:l},meeting:{meetingStatus:h,isMeetingReset:g}}=i.value;return l!==qi.Closed&&h===Do.Joined&&!g})):Jt(Ut(()=>{const{socket:{zoomSocketStatus:l},meeting:{meetingStatus:h,isMeetingReset:g}}=i.value;return l!==qi.Closed&&h===Do.Joined&&!g}))}const B_=kr.createAgent();let qm;const bu=Fb.getInstance();let Ym;const lp=j0.getInstance();let cy;const xI={zoomSocketStatus:qi.Closed,xmppSocketStatus:qi.Closed,mainSessionSocketStatus:qi.Closed,retryCount:0,rwgServerList:[]},YD=li({[`${Bg}`]:ct((i,u)=>{let{payload:l}=u;i.zoomSocketStatus=l.status}),[`${Pi}`]:ct((i,u)=>{let{payload:l}=u;const{rwgServerList:h}=i;h.find(g=>g.rwg===l.rwg)||h.push(l)}),[`${jh}`]:ct((i,u)=>{let{payload:l}=u;i.retryCount=l}),[`${AE}`]:ct((i,u)=>{let{payload:l}=u;i.xmppSocketStatus=l}),[`${mr}`]:ct((i,u)=>{let{payload:l}=u;i.mainSessionSocketStatus=l}),[`${Oc}`]:()=>xI},xI),ly=ca({epics0:(i,u)=>i.pipe(Wn(`${$f}`),Nn(u),Ut(l=>{let[,h]=l;return h.socket.zoomSocketStatus===qi.Closed}),wi(l=>{let[,h]=l;const{media:{patchedMediaSDKStatus:g}}=h;return(g===rs.Loading?Oo(us,1):kn([0])).pipe(wi(()=>{const{socket:{retryCount:y,rwgServerList:C},meeting:w,breakoutRoom:D,video:{cameraDevicesList:N}}=u.value;let L,V={...w,retryCount:y,rwgServerList:C,cameraDevicesList:N};if(D&&D.currentRoom.status===fr.Joining){const{currentRoom:{boId:W,boConfId:X,boToken:ne}}=D;V={...V,bid:W,botk:ne,confID:X}}if(L=w.zlkJwtToken?function(W){const X=NI(W);if(X){const{queryObject:ne,rwgServer:me}=X,{topic:_e,cv:Re,zlkJwtToken:Ne,meetingNumber:et,passWord:ht}=W;return Object.assign(ne,{topic:As(_e),iccv:Re,zlkJwtToken:Ne}),""!==ht&&Object.assign(ne,{mpwd:As(ht)}),`wss://${me.rwg}/instantsdk/${et}?${new URLSearchParams(ne).toString()}`}return null}(V):function(W){const X=NI(W);if(X){const{queryObject:ne,rwgServer:me}=X,{signatureType:_e,userEmail:Re,ztk:Ne,tk:et,cv:ht,zsk:ze,sign:Qe,meetingNumber:wt,isHost:Xt,isOriginHost:_t,passWord:it}=W;Object.assign(ne,{signType:_e,email:Re,zak:Ne||"",tk:et||"",jscv:ht,sign:Qe,browser:ne.browser+" ComponentView"}),Xt&&_t||""===it||Object.assign(ne,{mpwd:it}),(sessionStorage.getItem(ro.WebclientZsk)||ze)&&Object.assign(ne,{zak:ze});let Ce=0;return sessionStorage.getItem(ro.WebclientRecordingToken)&&(Ce=1),Object.assign(ne,{islch:Ce}),[{key:KD,queryKey:"cfs"},{key:zD,queryKey:"tk"}].forEach(Ye=>{const Ge=Yr.get(Ye.key);void 0!==Ge&&(ne[Ye.queryKey]=Ge)}),`wss://${me.rwg}/wc/api/${wt}?${new URLSearchParams(ne).toString()}`}return null}(V),L){const W=(B_.connect(L),qm=new Vr,Bd(X=>B_.on(qs.Message,X),X=>B_.off(qs.Message,X),X=>X.data).subscribe(qm),qm);return un(W.pipe(Ut(X=>"string"==typeof X),Bn(X=>{try{return JSON.parse(X)}catch(ne){return console.error(ne),{evt:0}}}),bb(),qa(X=>{if(0!==X.evt||!X.body||"invalid parameters!"!==X.body.test)return el(X);Ze(Ta,ti(Pv.INVALID_PARAMETER))}),Fd(Bg({status:qi.Connecting,rwgUrl:L}))),W.pipe(Ut(X=>X instanceof ArrayBuffer),Bn(X=>vE(X))))}return Ue}))})),epics1:(i,u)=>i.pipe(Wn(`${$f}`),Nn(u),Ut(l=>{let[,h]=l;return h.socket.zoomSocketStatus===qi.Closed}),wi(()=>{const[l,h,g,y]=[qs.Open,qs.Close,qs.Error,qs.Inactive].map(C=>Bd(w=>B_.on(C,w),w=>B_.on(C,w)));return un(l.pipe(hn(()=>un(Ii(Bg({status:qi.Connected})),sa(6e4).pipe(Nn(u),Ut(C=>{let[,w]=C;return w.meeting.meetingStatus===Do.Initial&&!w.meeting.isMeetingReset}),Bn(()=>(Ze(nl,{reason:Ha.Failover}),ja(Ks.NoHeartbeat))))))),h.pipe(L_(u),Bn(()=>(Ze(nl,{reason:Ha.Failover}),ja(Ks.Disconnect)))),y.pipe(L_(u),Bn(()=>(Ze(nl,{reason:Ha.Failover}),ja(Ks.NoHeartbeat)))),g.pipe(Nn(u),hn(C=>{let[,w]=C;const{meeting:{meetingStatus:D,isMeetingReset:N},socket:{rwgServerList:L,retryCount:V}}=w,G=[];if(D===Do.Initial&&null!=L&&L.length){const W=L[V];return sa(5e3).pipe(Ut(()=>u.value.meeting.meetingStatus===Do.Initial),hn(()=>{const{socket:{rwgServerList:X,retryCount:ne}}=u.value,me=[];return X.length>ne+1?me.push(jh(ne+1),nu({retry:!0})):(Ze(Ta,{reason:"connection error",errorCode:jg}),me.push(...za(u.value))),kn(me)}),Fd(rm(W?.rwc)))}return N||D!==Do.Joined||(Ze(nl,{reason:Ha.Failover}),G.push(ja(Ks.OnError))),kn(G)})))})),epics2:(i,u)=>i.pipe(Wn(`${nu}`),wi(l=>l.payload&&l.payload.retry?Ii($f()).pipe(dE(1e3),Fd(Bg({status:qi.Closed}))):Ii(Bg({status:qi.Closed}))),dE(100),Jn(()=>{var l;u.value.socket.zoomSocketStatus===qi.Closed&&(B_.close(),null===(l=qm)||void 0===l||l.complete())}))},{xmppEpics0:(i,u)=>i.pipe(Wn(`${qu}`),hn(()=>{const{meeting:{meetingOptions:l,zlkJwtToken:h,isWebinar:g}}=u.value,y=[];return(l.isPollingEnabled||h||g)&&y.push(_E()),kn(y)})),xmppEpics1:(i,u)=>i.pipe(Wn(`${_E}`),Nn(u),Ut(l=>{let[,h]=l;return"closed"===h.socket.xmppSocketStatus}),wi(l=>{let[,h]=l;const{meeting:{svcUrl:g,meetingNumber:y,conId:C}}=h;return(D=`wss://${g}/wc/media/${y}?type=x&cid=${C}`,bu.connect(D),Ym=new Vr,Bd(N=>bu.on(Ef.Message,N),N=>bu.off(Ef.Message,N)).subscribe(Ym),Ym).pipe(Ut(D=>void 0!==D?.evt),Bn(D=>JP(D)),Fd(AE(qi.Connecting)));var D})),xmppEpics2:(i,u)=>i.pipe(Wn(`${_E}`),wi(()=>{const[l,h,g]=[Ef.Open,Ef.Close,Ef.Error].map(y=>Bd(C=>bu.on(y,C),C=>bu.on(y,C)));return un(l.pipe(Jn(()=>{const y=function(){const{isSupportEssentialAudioAndVideoAbility:C,isSupportAudioWorklet:w}=dr;return C&&w?11:10}();bu.join(y)}),Ea(AE(qi.Connected))),h.pipe(L_(u,500),Bn(()=>(Ze(nl,{reason:Ha.Failover}),ja(Ks.DisconnectXmpp)))),g.pipe(L_(u,500),Bn(()=>(Ze(nl,{reason:Ha.Failover}),ja(Ks.OnError)))))})),xmppEpics3:i=>i.pipe(Wn(`${o1}`),Ea(AE(qi.Closed)),dE(100),Jn(()=>{var u;bu.close(),null===(u=Ym)||void 0===u||u.complete()}))},{mainSessionEpics0:(i,u)=>i.pipe(Wn(`${aa}`),Nn(u),Ut(l=>{let[,h]=l;return"closed"===h.socket.mainSessionSocketStatus}),wi(l=>{let[,h]=l;const{meeting:{svcUrl:g,meetingNumber:y,conId:C}}=h;return(D=`wss://${g}/wc/media/${y}?type=m&cid=${C}&mode=2`,lp.connect(D),cy=new Vr,Bd(N=>lp.on(qs.Message,N),N=>lp.off(qs.Message,N)).pipe(Bn(N=>N.data)).subscribe(cy),cy).pipe(Bn(D=>{try{return JSON.parse(D)}catch(N){return console.error(N),{evt:0}}}),Ut(D=>0!==D.evt),bb(),Bn(D=>Dl(D)),Fd(mr(qi.Connecting)));var D})),mainSessionEpics1:(i,u)=>i.pipe(Wn(`${aa}`),wi(()=>{const[l,h,g]=[qs.Open,qs.Close,qs.Error].map(y=>Bd(C=>lp.on(y,C),C=>lp.on(y,C)));return un(l.pipe(Ea(mr(qi.Connected))),h.pipe(L_(u,500),Bn(()=>(Ze(nl,{reason:Ha.Failover}),ja(Ks.DisconnectMChannel)))),g.pipe(L_(u,500),Bn(()=>(Ze(nl,{reason:Ha.Failover}),ja(Ks.OnErrorMChannel)))))})),mainSessionEpics2:i=>i.pipe(Wn(`${XP}`),Ea(mr(qi.Closed)),Jn(()=>{var u;lp.close(),null===(u=cy)||void 0===u||u.complete()}))}),H2={id:"userId",type:i=>lA(i)?{userType:i,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:i},role:i=>({userRole:i,isHost:cA(i)}),dn2:i=>({displayName:Bs(i)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:i=>({bLocalRecord:i}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT",customerKey:"userIdentity"},Qb=i=>{const u={};return["add","remove","update"].forEach(l=>{const g=i[l];null!=g&&(u[l]=g.reduce((y,C)=>{const w=Object.keys(C).reduce((N,L)=>{const V=H2[L];return Object.assign(N,"function"==typeof V?V(C[L]):"string"==typeof V?{[`${V}`]:C[L]}:{[`${L}`]:C[L]}),N},{}),D=y.find(N=>N.userId===w.userId);return void 0!==D?Object.assign(D,w):y.push(w),y},[]))}),u},G2={name:"displayName",node:i=>({userId:Number(i)}),role:i=>({userRole:Number(i)})},hh=i=>Object.keys(i).reduce((u,l)=>{const h=G2[l];return Object.assign(u,"function"==typeof h?h(i[l]):"string"==typeof h?{[`${h}`]:i[l]}:{[`${l}`]:i[l]}),u},{}),LI={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},W2=li({[`${ep}`]:ct((i,u)=>{let{payload:l}=u;void 0!==l.add&&l.add.length>0&&l.add.forEach(h=>{if(h.userType===Sm.Assitant){const g=i.assistantList.find(y=>y.userId===h.userId);void 0!==g?Object.assign(g,h):i.assistantList.push(h)}else if(uA(h.userRole)){const g=i.allowTalkAttendeesList.find(y=>y.userId===h.userId);void 0!==g?Object.assign(g,h):i.allowTalkAttendeesList.push(h)}else{const g=i.attendeesList.find(y=>y.userId===h.userId);void 0!==g?Object.assign(g,h):i.attendeesList.push(h)}}),void 0!==l.update&&l.update.length>0&&l.update.forEach(h=>{const g=i.attendeesList.find(y=>y.userId===h.userId);if(void 0!==g)Object.assign(g,h);else{const y=i.allowTalkAttendeesList.find(C=>C.userId===h.userId);if(void 0!==y)Object.assign(y,h);else{const C=i.assistantList.find(w=>w.userId===h.userId);void 0!==C&&Object.assign(C,h)}}}),void 0!==l.remove&&l.remove.length>0&&l.remove.forEach(h=>{const g=i.attendeesList.findIndex(y=>y.userId===h.userId);if(-1!==g)i.attendeesList.splice(g,1);else{const y=i.allowTalkAttendeesList.findIndex(C=>C.userId===h.userId);if(-1!==y)i.allowTalkAttendeesList.splice(y,1);else{const C=i.assistantList.findIndex(w=>w.userId===h.userId);-1!==C&&i.assistantList.splice(C,1)}}})}),[`${NM}`]:ct((i,u)=>{let{payload:l}=u;const{xmppAttendeeList:h}=i,g=h.map(y=>y.jid);l.forEach(y=>{const{jid:C}=y,w=g.indexOf(C);-1!==w?Object.assign(h[w],y):h.push(y)})}),[`${kM}`]:ct((i,u)=>{let{payload:l}=u;i.isAdmitAllSilentUsers=l}),[`${rR}`]:ct(i=>{i.attendeesList.forEach(u=>{u.bRaiseHand&&(u.bRaiseHand=!1)})}),[`${ll}`]:ct(i=>{i.attendeesList.forEach(u=>{u.feedback>0&&(u.feedback=0)})}),[`${c_}`]:ct((i,u)=>{let{payload:l}=u;i.failoverAttendeesList.push(l)}),[`${nR}`]:ct((i,u)=>{let{payload:l}=u;l.forEach(h=>{const g=i.failoverAttendeesList.findIndex(y=>y.zoomID===h.zoomID);-1!==g&&i.failoverAttendeesList.splice(g,1)})}),[`${iR}`]:ct((i,u)=>{let{payload:l}=u;const{jid:h,name:g}=l,y=i.xmppAttendeeList.find(C=>C.jid===h);y&&(y.displayName=g)}),[`${MM}`]:ct((i,u)=>{let{payload:l}=u;const{jid:h}=l,g=i.xmppAttendeeList.findIndex(y=>y.jid===h);-1!==h&&i.xmppAttendeeList.splice(g,1)}),[`${tf}`]:ct((i,u)=>{let{payload:l}=u;const{userId:h,key:g,value:y}=l,C=i.attendeesList.find(w=>w.userId===h);C&&(C[`${g}`]=y)}),[`${PM}`]:()=>LI},LI),z4=ca({epics0:(i,u)=>Dn(i,So).pipe(Bn(l=>Qb(l.payload.body)),Nn(u),hn(l=>{let[h,g]=l,y=[ep(h)];const{meeting:{userId:C,isWebinar:w,isOnHold:D},participants:{attendeesList:N,failoverAttendeesList:L,allowTalkAttendeesList:V}}=g,G=V.map(X=>X.userId);if(h.add){const X=h.add.find(me=>me.userId===C);void 0!==X&&(void 0!==X.bHold&&y.push(tm(X.bHold)),Ze(cm,X));const ne=h.add.filter(me=>me.userId!==C);if(ne.length>0){const me=ne.filter(Re=>!uA(Re.userRole)).map(Re=>{const Ne={...Re};if(lA(Re.userType)){var et;const ze=null===(et=g.audio)||void 0===et?void 0:et.dialout.find(Qe=>Qe.phoneNodeId===Re.userId);ze&&Object.assign(Ne,{phoneNumber:ze.phoneNumber})}const ht=L.find(ze=>ze.zoomID===Re.zoomID);return ht&&Object.assign(Ne,{source:ht.isOnHold?"on hold":"failover"}),Ne}),_e=me.filter(Re=>!!Re.source).map(Re=>({zoomID:Re.zoomID}));if(y.push(nR(_e)),Ze(XB,me),w){const Re=ne.filter(Ne=>uA(Ne.userRole));Re.length>0&&Ze(lm,Re.map(Ne=>({userId:Ne.userId,isAllowToTalk:!0})))}}}if(h.update){const X=h.update.find(me=>me.userId===C);void 0!==X&&(Ze(wa,X),void 0!==X.bHold&&y.push(tm(X.bHold)));const ne=h.update.filter(me=>!(me.userId===C||G.includes(me.userId)));if(ne.length>0&&Ze(Wp,ne),w){const me=h.update.filter(_e=>_e.userId!==C&&G.includes(_e.userId));me.length>0&&Ze(lm,me)}}if(h.remove){const X=h.remove.map(ne=>{const me=N.find(_e=>_e.userId===ne.userId);return me?2===ne.action&&1===ne.nUserStatus?me.bHold?(y.push(c_({zoomID:me.zoomID,isOnHold:!0})),{...ne,...me,reason:"on hold"}):(y.push(c_({zoomID:me.zoomID,isOnHold:!1})),{...ne,...me,reason:"failover"}):{...ne,...me}:null}).filter(ne=>!!ne);if(Ze(Qn,X),w){const ne=h.remove.filter(me=>G.includes(me.userId));ne.length>0&&Ze(lm,ne.map(me=>({userId:me.userId,isAllowToTalk:!1})))}}const W=y.filter(X=>X.type===`${tm}`);if(W.length>0){const X=W[W.length-1];y=y.filter(ne=>ne.type!==`${tm}`),X.payload!==D&&(y.push(X),Ze(E1,!D))}return kn(y)})),epics1:(i,u)=>Hd(i,24595).pipe(hn(l=>{const{payload:{body:{action:h,data:g}}}=l,{meeting:{jid:y},participants:{xmppAttendeeList:C}}=u.value,w=[];if(h===od.rename){g.forEach(N=>{w.push(iR(N))});const D=g.map(N=>hh(N));Ze(lm,D)}if(h===od.Remove){g.forEach(N=>{w.push(MM(N))});const D=g.map(N=>({...hh(N),removed:!0}));Ze(ZB,D)}if([od.Add,od.List,od.update].includes(h)){const D=g.map(N=>{const L=hh(N);return Object.keys(L).reduce((V,G)=>(""!==L[G]&&Object.assign(V,{[G]:L[G]}),V),{})});if(Ze(lm,D),w.push(NM(D)),h===od.update){const N=g.find(L=>L.jid===y);N&&void 0!==N.bRaiseHand&&C.find(V=>V.jid===y)?.bRaiseHand!==N.bRaiseHand&&Ze("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:N.bRaiseHand})}}return kn(w)})),epics2:i=>Dn(i,7951).pipe(Jn(u=>{!1===u.payload.body.bStarted&&Ze("ADMIT_ALL_SILENT_USERS_END",u.payload.body.bStarted)}),Bn(u=>kM(u.payload.body.bStarted))),epics3:i=>Dn(i,7946).pipe(Ut(u=>{var l;return["bRaiseHand","feedback"].includes(null===(l=u.payload.body)||void 0===l?void 0:l.key)&&0===u.payload.body.value}),Bn(u=>(Ze(Wp,{}),"bRaiseHand"===u.payload.body.key?rR():ll())))}),JD={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,fileWithVersion:!1,enforceMultipleVideos:!1,enforceVirtualBackground:!1,enableAudioQos:!0,enableVideoQos:!0,isAudioBridgeReceiveReady:!1,isAudioBridgeSendReady:!1,isMediaAgentInitialized:!1},GF=li({[`${Wu}`]:ct((i,u)=>{let{payload:l}=u;i.audioDecodeStatus=l}),[`${ac}`]:ct((i,u)=>{let{payload:l}=u;i.audioEncodeStatus=l}),[`${ui}`]:ct((i,u)=>{let{payload:l}=u;i.sharingDecodeStatus=l}),[`${gr}`]:ct((i,u)=>{let{payload:l}=u;i.sharingEncodeStatus=l}),[`${ba}`]:ct((i,u)=>{let{payload:l}=u;i.videoDecodeStatus=l}),[`${tl}`]:ct((i,u)=>{let{payload:l}=u;i.videoEncodeStatus=l}),[`${vs}`]:ct((i,u)=>{let{payload:l}=u;i.mediaConstraints=l.mediaConstraints,i.assetsPath=l.assetsPath,i.fileWithVersion=l.fileWithVersion,i.enforceMultipleVideos=l.enforceMultipleVideos,i.enforceVirtualBackground=l.enforceVirtualBackground,i.skipJsMedia=l.skipJsMedia,i.patchJsMedia=l.patchJsMedia}),[`${ru}`]:ct((i,u)=>{let{payload:l}=u;const{type:h,encrypeKey:g,additionalType:y}=l,C={encrypeKey:g,additionalType:y};"audio"===h?i.audioEncrypt=C:"video"===h?i.videoEncrypt=C:"sharing"===h&&(i.sharingEncrypt=C)}),[`${Jf}`]:ct((i,u)=>{let{payload:l}=u;i.isEnableDecoderInWorklet=l}),[`${Gs}`]:ct((i,u)=>{let{payload:l}=u;i.patchedMediaSDKStatus=l}),[`${Fg}`]:ct((i,u)=>{let{payload:l}=u;i.assetsPath=l}),[`${Ls}`]:ct((i,u)=>{let{payload:l}=u;i.enableAudioQos=l.audioQos,i.enableVideoQos=l.videoQos}),[`${yE}`]:ct((i,u)=>{let{payload:l}=u;i.isAudioBridgeReceiveReady=l}),[`${Tv}`]:ct((i,u)=>{let{payload:l}=u;i.isAudioBridgeSendReady=l}),[`${fi}`]:ct((i,u)=>{let{payload:l}=u;i.isMediaAgentInitialized=l}),[`${Rv}`]:i=>({...JD,mediaConstraints:i.mediaConstraints,assetsPath:i.assetsPath,fileWithVersion:i.fileWithVersion,enforceMultipleVideos:i.enforceMultipleVideos,enforceVirtualBackground:i.enforceVirtualBackground})},JD);class gl{constructor(){this.audioPlaybackUrl=void 0,this.videoPlaybackUrl=void 0,this._audioElement=void 0,this._videoElement=void 0,this.videoSrc=void 0,this.isUsingSameFile=void 0}static getInstance(){return void 0===this.instance&&(this.instance=new gl),this.instance}setAudioElement(u){return void 0===this._audioElement&&(this._audioElement=new Audio),new Promise((l,h)=>{if(this.videoSrc===u.url)this._audioElement.pause(),this.isUsingSameFile=!0,this._videoElement.muted=!1,(y=this._videoElement).currentTime>0&&!y.paused&&!y.ended&&y.readyState>2?l(""):this._videoElement.play().then(()=>{l("")}).catch(()=>{h()});else{var g;this.isUsingSameFile=!1;const C=dr.isFirefox?"canplay":"canplaythrough",w=()=>{this._audioElement.play().then(()=>{this._audioElement.removeEventListener(C,w),l("")})},D=()=>{this._audioElement.removeEventListener(C,w),this._audioElement.removeEventListener("error",D),h()};this._audioElement.addEventListener(C,w),this._audioElement.addEventListener("error",D),this._audioElement.src=u.url,this._audioElement.loop=!!u.loop,au(u.url)&&this._audioElement.setAttribute("crossorigin",""),this._audioElement.currentTime=Math.max(null!==(g=u.currentTime)&&void 0!==g?g:0,1e-4)}var y})}setVideoElement(u){return void 0===this._videoElement&&(this._videoElement=document.createElement("video")),new Promise((l,h)=>{var g;this.videoSrc=u.url;const y=dr.isFirefox?"canplay":"canplaythrough",C=()=>{this._videoElement.play().then(()=>{this._videoElement.removeEventListener(y,C),l("")})},w=()=>{this._videoElement.removeEventListener(y,C),this._videoElement.removeEventListener("error",w),h()};this._videoElement.addEventListener(y,C),this._videoElement.addEventListener("error",w),this._videoElement.src=u.url,this.isUsingSameFile||(this._videoElement.muted=!0),this._videoElement.loop=!!u.loop,this._videoElement.currentTime=null!==(g=u.currentTime)&&void 0!==g?g:0,au(u.url)&&this._videoElement.setAttribute("crossorigin",""),dr.isSafari&&!document.getElementById(X0)&&(this._videoElement.id=X0,this._videoElement.setAttribute("style","position:fixed;top:-10000px;left:-10000px"),document.body.appendChild(this._videoElement))})}get audioElement(){return this.isUsingSameFile?this._videoElement:this._audioElement}get videoElement(){return this._videoElement}stopAudioElement(){this.isUsingSameFile||this._audioElement&&(this._audioElement.currentTime=0,this._audioElement.pause())}stopVideoElement(){this._videoElement&&this._videoElement.pause(),this.videoSrc=void 0}}function uy(i,u,l,h){const{meeting:{userId:g},audio:{localShareAudioUserMutedList:y},share:{isReceiveSharingFromMainSession:C}}=h;return y.filter(w=>w.userId!==u).forEach(w=>{i.setSharingAudioVolume(w.userId,!0,w.isFromMainSession)}),i.setSharingAudioVolume(u,l,!!C),u===g?dA(l):hR({userId:u,muted:l})}function F_(i,u,l){return $m.apply(this,arguments)}function $m(){return $m=F(function*(i,u,l){var h,g;const{audio:{audioSsrc:y,activeMicrophone:C,activeSpeaker:w,isAllowToTalk:D,customizeAudioOption:{speakerOnly:N,mute:L},isUsingMediaPlayback:V,mediaPlaybackFile:G,isBackgroundNoiseSuppression:W,isHIDEnabled:X,microphoneDevicesList:ne,isVerifiedAudioPermissionOnIOSMobile:me},meeting:{svcUrl:_e,conId:Re,reportDomain:Ne,isAudioBridgeEnabled:et,userId:ht,supportLocalAB:ze,abToken:Qe}}=u,wt=Yn(u),Xt=!!N||Ds(wt.userRole)&&!D,_t=l??!Xt;qo()&&(et||console.warn("Cannot start audio due to the service is not ready."),yield oc(ds(u,!_t)).then(Ce=>{let[Ye,Ge]=Ce;return Ye&&Ge?Promise.resolve():Promise.reject()}));let it=C;if(V&&null!=G&&G.url){const Ce=gl.getInstance();yield Ce.setAudioElement(G),it=Ce.audioElement}else gl.getInstance().stopAudioElement();return Xt&&!me&&dr.isIOSMobile&&(yield F(function*(){yield navigator.mediaDevices.getUserMedia({audio:!0})})()),null===(h=i.joinComputerAudio(y,it,w,_t,qo()?{rwgHost:_e,cid:Re,nginxHost:Ne,abToken:Qe,supportLocalAB:ze}:void 0,W,X?{microphoneLabel:null===(g=ne.find(Ce=>Ce.deviceId===C))||void 0===g?void 0:g.label,defaultMuted:!(null==wt||!wt.muted)}:void 0))||void 0===h?void 0:h.then(()=>{L&&(kr.createAgent().mute(ht,!0),i.muteAudio()),null!=wt&&wt.muted?i.muteAudio():i.unmuteAudio()})}),$m.apply(this,arguments)}function dy(i,u,l){return py.apply(this,arguments)}function py(){return py=F(function*(i,u,l){const h=[],{audio:{isJoinComputerAudioBeforeSharingAudio:g,mutedBeforeSharingAudio:y}}=l,C=Yn(l);return!0===g&&(yield F_(i,l),h.push(_u(void 0)),!1===y&&(h.push(hA(Ju.SharingAudio)),u.mute(C.userId,!1)),h.push(ul(void 0))),h}),py.apply(this,arguments)}function Yi(i,u,l){return XD.apply(this,arguments)}function XD(){return XD=F(function*(i,u,l){const{audio:{isSharingAudio:h},meeting:{userId:g}}=l,y=[];if(y.push(uy(i,g,!0,l)),h){yield i.leaveSharingAudio(!1),y.push(pA(!1));const C=yield dy(i,u,l);y.push(...C),setTimeout(()=>{Ze(i_,{state:"off"})},0)}return y.push(xl(!1)),y}),XD.apply(this,arguments)}function Su(i,u,l){return _l.apply(this,arguments)}function _l(){return _l=F(function*(i,u,l){const{audio:{audioSsrc:h,activeMicrophone:g,activeSpeaker:y}}=l,C=Yn(l),w=[];if(!fh()){const D=yield(N=F(function*(L,V){const G=[],W=Yn(V),{audio:{isMicrophoneForbidden:X}}=V;return W?.audio===uo.Computer&&(G.push(_u(!0)),G.push(ul(W.muted)),W.muted||L.muteAudio(),yield L.leaveComputerAudio(),G.push(Nl(0)),X&&G.push(dR(!1))),G}),function(L,V){return N.apply(this,arguments)})(i,l);w.push(...D)}var N;return yield i.leaveSharingAudio(!0),yield i.joinSharingAudio({ssrc:h,microphoneDeviceId:g,speakerDeviceId:y,isCaptureAudio:Ds(C.userRole)}),w.push(xl(!0)),w.push(pA(!0)),w.push(uy(i,C.userId,!1,l)),w.findIndex(D=>D.type===`${_u}`&&!0===D.payload)>-1&&(w.push(nh(Es.SharingAudio)),u.mute(l.meeting.userId,!0)),setTimeout(()=>{Ze(i_,{state:"on"})},0),w}),_l.apply(this,arguments)}gl.instance=void 0;const BI=()=>{if(B0())return!0;{var i;let{browser:l}=dr;if(l=null===(i=l)||void 0===i?void 0:i.toLocaleLowerCase(),l.indexOf("safari")>-1&&-1===l.indexOf("ios-safari")){var u;const h=null===(u=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))||void 0===u?void 0:u[1];return l1(h||"","15.2")>=0}return!1}};function K2(i,u,l){for(let h=0;h<l.length&&0!==u.length;h++){const{userId:g,displayName:y}=l[h];if(u.includes(g)){const C=i.find(w=>w.userId===g);C&&(C.displayName=y,u.splice(u.indexOf(g),1))}}}function fh(){return Qr.isSupportOpenMicWhenShareAudio()}function Hb(){return Qr.isSupportAudioDenoise()}function vl(){var i;return"function"==typeof(null===(i=window.navigator.hid)||void 0===i?void 0:i.requestDevice)}function ZD(i,u,l){const{audio:{isAllowToTalk:h,customizeAudioOption:g},media:{audioDecodeStatus:y,audioEncodeStatus:C}}=i;return{encodeInitStatus:Ds(u.userRole)&&!h||l||null!=g&&g.speakerOnly||qo()?"success":C,decodeInitStatus:qo()?"success":y}}function U_(i,u,l){qo()?ds(u,l).subscribe(h=>{let[g,y]=h;g&&y&&i.joinOrLeaveVoip(!0)}):i.joinOrLeaveVoip(!0)}const up=kr.createAgent(),_c=p2(gc(Qr.getInstance())),Gb=i=>!i.muted,Jm=kr.createAgent(),hy=p2(gc(Qr.getInstance())),fy=kr.createAgent(),ad=gc(Qr.getInstance()),Wb=qo(),Cu={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:[],canPlayAudio:!1,mutedSource:void 0,unmutedSource:void 0,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isUsingMediaPlayback:!1,customizeAudioOption:{},localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],isStopAllImcomingAudio:!1,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}}},FI=li({[`${Cm}`]:ct((i,u)=>{let{payload:l}=u;i.asnIds={...l}}),[`${Ni}`]:ct((i,u)=>{let{payload:l}=u;i.bCanUnmute=l}),[`${BM}`]:ct((i,u)=>{let{payload:l}=u;const{sequence:h,phoneNumber:g}=l;-1===i.dialout.findIndex(y=>y.sequence===h)&&i.dialout.push({sequence:h,phoneNumber:g,returnCode:-1})}),[`${Im}`]:ct((i,u)=>{let{payload:l}=u;const{sequence:h,code:g,nodeId:y}=l,C=i.dialout.find(w=>w.sequence===h);C&&(C.returnCode=g,y&&(C.phoneNodeId=y))}),[`${mu}`]:ct((i,u)=>{let{payload:l}=u;i.isAllowToTalk=l,i.isAllowToTalkAttendeeConnected=!1}),[`${nh}`]:ct((i,u)=>{let{payload:l}=u;i.mutedSource=l}),[`${hA}`]:ct((i,u)=>{let{payload:l}=u;i.unmutedSource=l}),[`${FM}`]:ct((i,u)=>{let{payload:l}=u;i.audioSsrc=l}),[`${uR}`]:ct((i,u)=>{let{payload:l}=u;i.bMutedUponEntry=l}),[`${h_}`]:ct((i,u)=>{let{payload:l}=u;i.isUserGrantCaptureAudio=l}),[`${dR}`]:ct((i,u)=>{let{payload:l}=u;i.isMicrophoneForbidden=l}),[`${Nl}`]:ct((i,u)=>{let{payload:l}=u;i.webrtcRestartCount=l}),[`${wC}`]:ct((i,u)=>{let{payload:l}=u;i.microphoneDevicesList=l}),[`${UM}`]:ct((i,u)=>{let{payload:l}=u;i.speakerDevicesList=l}),[`${YE}`]:ct((i,u)=>{let{payload:l}=u;i.activeMicrophone=l}),[`${gu}`]:ct((i,u)=>{let{payload:l}=u;i.activeSpeaker=l}),[`${f_}`]:ct((i,u)=>{let{payload:l}=u;i.canPlayAudio=l}),[`${m_}`]:ct((i,u)=>{let{payload:l}=u;i.isComputerAudioLoading=l}),[`${RC}`]:ct((i,u)=>{let{payload:l}=u;if(l){const{speakerOnly:h,mute:g,backgroundNoiseSuppression:y,syncButtonsOnHeadset:C,mediaFile:w}=l;i.customizeAudioOption.speakerOnly=h,i.customizeAudioOption.mute=g,i.isBackgroundNoiseSuppression=!!y,i.isHIDEnabled=!!C,T0(i.mediaPlaybackFile,w)||(i.mediaPlaybackFile=w,i.isUsingMediaPlayback=!(null==w||!w.url)),g&&(i.mutedSource=Es.Inherited)}}),[`${pR}`]:ct((i,u)=>{let{payload:l}=u;i.isAllowToTalkAttendeeConnected=l}),[`${ul}`]:ct((i,u)=>{let{payload:l}=u;i.mutedBeforeSharingAudio=l}),[`${pA}`]:ct((i,u)=>{let{payload:l}=u;i.isSharingAudio=l}),[`${dA}`]:ct((i,u)=>{let{payload:l}=u;i.isShareAudioMuted=l}),[`${VM}`]:ct((i,u)=>{let{payload:l}=u;const{userId:h,isFromMainSession:g}=l;-1===i.localShareAudioUserMutedList.findIndex(y=>y.userId===h)&&i.localShareAudioUserMutedList.push({userId:h,isFromMainSession:g,muted:!1})}),[`${hR}`]:ct((i,u)=>{let{payload:l}=u;const h=i.localShareAudioUserMutedList.find(g=>g.userId===l.userId);h&&(h.muted=l.muted)}),[`${_u}`]:ct((i,u)=>{let{payload:l}=u;i.isJoinComputerAudioBeforeSharingAudio=l}),[`${xl}`]:ct((i,u)=>{let{payload:l}=u;i.isShareAudioEnabled=l}),[`${TC}`]:ct((i,u)=>{let{payload:l}=u;i.statistic.encode=l.data}),[`${$E}`]:ct((i,u)=>{let{payload:l}=u;i.statistic.decode=l.data}),[`${fR}`]:ct((i,u)=>{let{payload:l}=u;-1===i.locallyMutedAudioList.findIndex(h=>h===l)&&i.locallyMutedAudioList.push(l)}),[`${mR}`]:ct((i,u)=>{let{payload:l}=u;const h=i.locallyMutedAudioList.findIndex(g=>g===l);-1!==h&&i.locallyMutedAudioList.splice(h,1)}),[`${gR}`]:ct((i,u)=>{let{payload:l}=u;const h=i.localUserAudioVolumeList.find(g=>g.userId===l.userId);h?h.volume=l.volume:i.localUserAudioVolumeList.push(l)}),[`${hF}`]:ct((i,u)=>{let{payload:l}=u;const h=i.localUserAudioVolumeList.findIndex(g=>g.userId===l.userId);-1!==h&&i.localUserAudioVolumeList.splice(h,1)}),[`${jM}`]:ct((i,u)=>{let{payload:l}=u;i.isBackgroundNoiseSuppression=l}),[`${_R}`]:ct((i,u)=>{let{payload:l}=u;i.isHIDEnabled=l}),[`${vR}`]:ct((i,u)=>{let{payload:l}=u;i.mediaPlaybackFile=l,i.isUsingMediaPlayback=!(null==l||!l.url)}),[`${AR}`]:ct((i,u)=>{let{payload:l}=u;i.isStopAllImcomingAudio=l}),[`${dl}`]:ct((i,u)=>{let{payload:l}=u;i.isVerifiedAudioPermissionOnIOSMobile=l}),[`${yR}`]:ct((i,u)=>{let{payload:l}=u;i.isAudioBridgeSignalReconnecting=l}),[`${nf}`]:(i,u)=>{let{dialout:l,locallyMutedAudioList:h,localUserAudioVolumeList:g,customizeAudioOption:y,mediaPlaybackFile:C,isUsingMediaPlayback:w,isVerifiedAudioPermissionOnIOSMobile:D,isHIDEnabled:N,isBackgroundNoiseSuppression:L,isStopAllImcomingAudio:V}=i,{payload:G}=u;return G?{...Cu,dialout:l,locallyMutedAudioList:h,localUserAudioVolumeList:g,customizeAudioOption:{...Cu.customizeAudioOption,speakerOnly:y.speakerOnly},isHIDEnabled:N,isBackgroundNoiseSuppression:L,isStopAllImcomingAudio:V,mediaPlaybackFile:C,isUsingMediaPlayback:w,isVerifiedAudioPermissionOnIOSMobile:D}:{...Cu}}},Cu),tO={epics0:(i,u)=>Dn(i,12033).pipe(Nn(u),Bn(l=>{let[h,g]=l;const{participants:{allowTalkAttendeesList:y}}=g,C=h.payload.body;let w={};if(C){const D=Uo(g),N=Object.keys(C).map(V=>({key:V,userId:C[V]})),L=N.map(V=>V.userId);K2(N,L,D),y.length>0&&L.length>0&&K2(N,L,y),w=N.reduce((V,G)=>({...V,[`${G.key}`]:{userId:G.userId,displayName:G.displayName}}),{}),Ze(Yv,Object.values(w))}return Cm(w)})),epics1:(i,u)=>Dn(i,16135).pipe(Nn(u),Jn(l=>{let[h,g]=l;const{payload:{body:{id:y,bLeadershipOn:C}}}=h,{audio:{bCanUnmute:w}}=g,D=Yn(g);if(D){const{isHost:N,bCoHost:L,userId:V,audio:G,muted:W}=D,X=N||L;C&&Ro(V,y)&&(null!==G&&""!==G&&!0!==W||!X&&!w||Ze(QE,Kp.Spotlight))}}),Ar(Ue)),epics2:(i,u)=>Dn(i,12037).pipe(Nn(u),Jn(l=>{let[,h]=l;const g=Yn(h);null!==g?.audio&&""!==g?.audio&&1==g?.muted&&Ze(QE,Kp.Unmute)}),Ar(Ue)),epics3:(i,u)=>Dn(i,uc).pipe(Ut(l=>l.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some(h=>void 0!==l.payload.body[h])),hn(l=>{const{payload:{body:{bCanUnmute:h,bMutedAll:g,bMutedUponEntry:y}}}=l,C=[];if(void 0!==h&&C.push(Ni(l.payload.body.bCanUnmute)),void 0!==g){const w=Yn(u.value);w?.audio!==uo.Computer&&w?.audio!==uo.Phone||0!=w.muted||l.payload.body.bMutedAll&&C.push(nh(Es.PassiveByMuteAll))}return void 0!==y&&C.push(uR(l.payload.body.bMutedUponEntry)),kn(C)})),epics4:(i,u)=>Dn(i,So).pipe(Nn(u),Ut(l=>{let[,h]=l;return h.socket.zoomSocketStatus===qi.Connected}),hn(l=>{let[h,g]=l;const{payload:{body:{update:y}}}=h;if(null!=y&&y.some(C=>void 0!==C.audio||void 0!==C.muted)){const{meeting:{userId:C}}=g,w=y.filter(N=>N.id!==C),D=y.filter(N=>N.id===C);if(w&&w.forEach(N=>{Ze(Jd,N)}),D.length>0)return T_(u).pipe(hn(N=>{const{audio:{mutedSource:L,unmutedSource:V,isAllowToTalk:G,isShareAudioEnabled:W,isSharingAudio:X,isAudioBridgeSignalReconnecting:ne,customizeAudioOption:{speakerOnly:me}}}=u.value,_e=N;return kn(D).pipe(hf(function(){var Re=F(function*(Ne){const et=[];if(Ne.audio!==_e.audio)if(""===Ne.audio)Ze(Yp);else if(Ne.audio===uo.Computer){const ht=Ds(_e.userRole)&&!G||!!me;X&&Ze(_m),ht&&(Ze(_m),dr.isIOSMobile&&et.push(dl(!0))),ne&&(Ze(_m),et.push(yR(!1)))}else Ne.audio===uo.Phone&&(_e.audio===uo.Computer&&(yield _c.leaveComputerAudio(),up.joinOrLeaveVoip(!1)),Ze(vm));return""!==_e.audio&&Ne.muted!==_e.muted&&(Ne.muted!==_e.muted&&(!0===Ne.muted?(L!==Es.Inherited&&Ze(iC,{source:L??Es.PassiveByMuteOne}),_e.audio!==uo.Computer||W&&!fh()||_c.muteAudio()):!1===Ne.muted&&(V!==Ju.Inherited&&Ze(L1,{source:V??Ju.Passive}),_e.audio===uo.Computer&&_c.unmuteAudio())),void 0!==Ne.muted&&et.push(nh(void 0),hA(void 0))),et});return function(Ne){return Re.apply(this,arguments)}}()))}))}return Ue})),epics5:(i,u)=>Dn(i,12036).pipe(Nn(u),hn(l=>{let[h,g]=l;const y=Yn(g),{media:{audioEncodeStatus:C}}=g,{promoterID:w,bAllowTalk:D}=h.payload.body;if(y?.userId===w){if(Ze(cC,D),D)return"success"!==C&&_c.enableAudioEncode(),Os("audio",C,"success").pipe(hn(N=>(N&&Ze(QE,Kp.AllowToTalk),Ue)),Fd(mu(!0)));if(up.mute(w,!0),y?.audio===uo.Computer)return _c.leaveComputerAudio(),sa(300).pipe(Jn(F(function*(){(BI()?oc(Hu(ur(document,"click").pipe(ki(1)),ur(document,"touchend").pipe(ki(1)))):Promise.resolve(!0)).then(()=>{F_(_c,g,!1)})})),Ar(Ue),Fd(mu(!1),nh(Es.Inherited)))}return Ue})),epics6:i=>Dn(i,8205).pipe(Jn(u=>{Ze("AUDIO_ALLOW_TO_TALK_RESPONSE",u.payload.body)}),Ar(Ue)),epics7:(i,u)=>Hd(i,24597).pipe(Nn(u),Jn(l=>{let[h,g]=l;const y=Yn(g);y?.audio===uo.Phone&&up.audioDrop(y.userId)}),Ar(Ue)),epics8:(i,u)=>Dn(i,12035).pipe(Nn(u),wi(l=>{let[h,g]=l;const{meeting:{currentUserAudioBeforeReset:y}}=g,{payload:{body:{ssrc:C}}}=h,w=T_(u).pipe(hn(D=>{if(y===uo.Computer&&(null==D||!D.audio)){const{encodeInitStatus:N,decodeInitStatus:L}=ZD(u.value,D);return Os("audio",N,L).pipe(Ut(V=>{let[G,W]=V;return G&&W}),Jn(()=>{(BI()?oc(Hu(ur(document,"click").pipe(ki(1)),ur(document,"touchend").pipe(ki(1)))):Promise.resolve(!0)).then(()=>{U_(up,u.value),F_(_c,u.value)});const{audio:{locallyMutedAudioList:V,localUserAudioVolumeList:G,isStopAllImcomingAudio:W}}=u.value;V.length>0&&V.forEach(X=>{_c.muteOrUnmuteOtherAudio(X,!0)}),G.length>0&&G.forEach(X=>{_c.adjustOtherAudioVolume(X.userId,X.volume)}),W&&_c.stopAllIncomingAudio(!0)}),Ea(oM(void 0)))}return Ue}));return Ze(lC,C),un(Ii(FM(C)),w)})),epics9:(i,u)=>Dn(i,7952).pipe(wi(l=>Oo(vm,1).pipe(Nn(u),Jn(h=>{let[,g]=h;const{BindStatus:y,nOperatorUserId:C}=l.payload.body,w=g.participants.attendeesList.find(D=>D.userId===C);!0===y&&Ze(EM,{operatorName:w?.displayName,operatorUserId:C,operatorRole:w?.userRole})}),Ar(Ue)))),epics10:(i,u)=>Rr(i,Cn.UserGrantCaptureAudio).pipe(Nn(u),hn(l=>{let[,h]=l;const g=Yn(h);var y;(y=g,y?.audio===uo.Computer?Promise.resolve():Lr({event:wa,operations:[Ut(V=>void 0!==V.audio),ki(1)]},V=>{let{audio:G}=V;return G===uo.Phone||G===uo.Computer})).then(()=>{Ze(_m)});const{meeting:{isCurrentUserMutedBeforeReset:C},audio:{bMutedUponEntry:w,isUserGrantCaptureAudio:D,isAllowToTalk:N}}=h,L=[h_(!0)];if(g){!0===g.muted&&!1===N&&(L.push(nh(Es.Inherited)),up.mute(g.userId,!0));const V=D||g.isHost||N;(!0===C||!V&&w)&&(L.push(nh(Es.Inherited)),up.mute(g.userId,!0),C&&L.push(k0(void 0)))}return kn(L)})),epics11:i=>Rr(i,Cn.UserForbiddedCaptureAudio).pipe(Jn(()=>{Ze(aC)}),Ea(dR(!0))),epics12:i=>Rr(i,Cn.AudioWebsocketBroken).pipe(Jn(()=>{Ze(Ml)}),Ar(Ue)),epics13:(i,u)=>Rr(i,Cn.AudioZeroData).pipe(Nn(u),qa(l=>{let[,h]=l;const{audio:{webrtcRestartCount:g,activeMicrophone:y}}=h;if(g<3)return _c.restoreWebRTC(y),Nl(g+1)})),epics14:(i,u)=>i.pipe(Wn(`${f_}`),Ut(l=>!1===l.payload),hn(()=>(Ze(Jh),Hu(ur(document,"click").pipe(ki(1)),ur(document,"touchend").pipe(ki(1))).pipe(Jn(()=>{U_(up,u.value),F_(_c,u.value)}),Ea(f_(!0)))))),epics15:i=>Rr(i,[Cn.JoinComputerAudioComplete,Cn.JoinSharingAudioComplete,Cn.LeaveComputerAudioComplete,Cn.LeaveSharingAudioComplete]).pipe(Jn(()=>{CF.completeAudioAction()}),Ar(Ue)),epics16:(i,u)=>Rr(i,Cn.AudioQosData).pipe(Nn(u),Bn(l=>{var h;let[g,y]=l;const{meeting:{isWebinar:C},media:{audioEncodeStatus:w,audioDecodeStatus:D},participants:{xmppAttendeeList:N,allowTalkAttendeesList:L}}=y,V=Yn(y),G=LM(y);let W=G.length>0,X=G.some(Gb);C&&(W=W||Boolean(N.length),X=X||L.some(Gb));const me=(V?.audio===uo.Computer||V?.audio===uo.Phone)&&"success"===D&&W&&X;return null!==(h=g.payload.data)&&void 0!==h&&h.encoding?V?.audio!==uo.Computer&&V?.audio!==uo.Phone||"success"!==w||null!=V&&V.muted||!W?TC(R1):(Ze(GE,g.payload),TC(g.payload)):me?(Ze(GE,g.payload),$E(g.payload)):$E(R1)})),epics17:(i,u)=>Dn(i,So).pipe(Nn(u),Ut(l=>{let[h,g]=l;const{payload:{body:y}}=h,{audio:{locallyMutedAudioList:C,localUserAudioVolumeList:w}}=g;return(C.length>0||w.length>0)&&y?.remove&&y.remove.length>0}),hn(l=>{let[h,g]=l;const{payload:{body:{remove:y}}}=h,{audio:{locallyMutedAudioList:C,localUserAudioVolumeList:w}}=g,D=C.concat(w.map(N=>N.userId)).filter(N=>-1!==y.indexOf(L=>L.id===N));return D.length>0?(D.forEach(N=>{_c.muteOrUnmuteOtherAudio(N,!1)}),kn(D.map(N=>[mR(N),hF({userId:N})]).flat())):Ue})),epics18:(i,u)=>Rr(i,Cn.HidStatusMute).pipe(hn(l=>{const{payload:{data:h}}=l,g=u.value,{meeting:{userId:y},audio:{isShareAudioEnabled:C,bCanUnmute:w}}=g,D=[];if(h)C&&!fh()&&D.push(ul(!0)),D.push(nh(Es.Active)),up.mute(y,!0);else if(!C||fh()){C&&D.push(ul(!1));const N=Yn(g);(w||null!=N&&N.isHost||null!=N&&N.bCoHost)&&(D.push(hA(Ju.Active)),up.mute(y,!1))}return kn(D)})),epics19:i=>Dn(i,12040).pipe(Jn(u=>{const{payload:{body:{mode:l}}}=u;_c.setAudioCodecMode(l)}),Ar(Ue))},WF=ca(tO,{shareAudioEpics0:(i,u)=>la(i,So).pipe(Ut(l=>{const h=l.payload.body.update;return h&&h.length>0&&h.findIndex(g=>void 0!==g.bShareOn)>-1}),Nn(u),hn(l=>{let[h,g]=l;const{payload:{body:{update:y}}}=h,{audio:{localShareAudioUserMutedList:C}}=g,w=y.filter(N=>!0===N.bShareOn&&!0===N.bShareAudioOn),D=[];return w.length>0&&w.forEach(N=>{-1===C.findIndex(L=>L.userId===N.id)&&D.push(VM({userId:N.id,isFromMainSession:!!N.bShareToBORooms}))}),kn(D)})),shareAudioEpics1:(i,u)=>Rr(i,Cn.SharingDesktopStreamHaveAudio).pipe(wi(()=>Dn(i,So).pipe(Ut(l=>{var h;const{payload:{body:g}}=l,{meeting:{userId:y}}=u.value;return(null==g||null===(h=g.update)||void 0===h?void 0:h.findIndex(C=>C.id===y&&!0===C.bShareOn))>-1}),ki(1),hf(F(function*(){const l=u.value;return yield Su(hy,Jm,l)})),Fd(xl(!0))))),shareAudioEpics2:(i,u)=>Rr(i,Cn.SharingDesktopStreamHaveNoAudio).pipe(Nn(u),Ut(l=>{var h;let[,g]=l;return!0===(null===(h=g.audio)||void 0===h?void 0:h.isShareAudioEnabled)}),hf(function(){var l=F(function*(h){let[,g]=h;return yield Yi(hy,Jm,g)});return function(h){return l.apply(this,arguments)}}())),shareAudioEpics3:(i,u)=>Dn(i,So).pipe(Nn(u),Ut(l=>{let[,h]=l;return h.socket.zoomSocketStatus===qi.Connected&&!0===h.audio.isSharingAudio}),hn(l=>{var h;let[g,y]=l;if(null!==(h=g.payload.body.update)&&void 0!==h&&h.some(C=>void 0!==C.audio||void 0!==C.muted)){const{meeting:{userId:C}}=y,w=g.payload.body.update.filter(D=>D.id===C);return T_(u).pipe(hn(D=>{const N=[];return w.findIndex(L=>L.audio===uo.Computer)>-1&&D?.audio!==uo.Computer&&!fh()&&(N.push(_u(!0)),N.push(ul(!0))),kn(N)}))}return Ue})),shareAudioEpics4:(i,u)=>i.pipe(Wn(`${Ll}`),_o(Rc),Nn(u),Ut(l=>{var h;let[,g]=l;return!0===(null===(h=g.audio)||void 0===h?void 0:h.isShareAudioEnabled)}),hf(function(){var l=F(function*(h){let[g,y]=h;const{payload:C}=g,{audio:{isShareAudioMuted:w,isSharingAudio:D}}=y,N=[];if(C===yi.End){const L=yield Yi(hy,Jm,y);N.push(...L)}else if(C===yi.Paused){if(!1===w&&!0===D){yield hy.leaveSharingAudio(!0),N.push(pA(!1));const L=yield dy(hy,Jm,y);N.push(...L),setTimeout(()=>{Ze(i_,{state:"off"})},0)}}else if(C===yi.Sharing&&!1===w&&!1===D){const L=yield Su(hy,Jm,y);N.push(...L)}return N});return function(h){return l.apply(this,arguments)}}()))},{audioBridgEpics0:i=>Dn(i,4299).pipe(Jn(u=>{const{payload:l}=u;ad.passThroughRWGMessage(l)}),Ar(Ue)),audioBridgEpics1:i=>Rr(i,Cn.AudioBridgeReconnectStart).pipe(Bn(()=>(fy.joinOrLeaveVoip(!1),yR(!0)))),audioBridgEpics2:(i,u)=>Rr(i,Cn.AudioBridgeReconnectEnd).pipe(Jn(()=>{U_(fy,u.value)}),Ar(Ue)),audioBridgEpics3:i=>Dn(i,So).pipe(Ut(u=>{var l,h;return Wb&&((null===(l=u.payload.body.update)||void 0===l?void 0:l.some(g=>void 0!==g.muted))||(null===(h=u.payload.body.remove)||void 0===h?void 0:h.length)>0)}),Jn(u=>{const{payload:{body:{update:l,remove:h}}}=u;ad.sendUserAudioStatus({update:(l||[]).filter(g=>void 0!==g.muted).map(g=>({userId:g.id,muted:g.muted})),remove:(h||[]).map(g=>({userId:g.id}))})}),Ar(Ue)),audioBridgEpics4:(i,u)=>Rr(i,Cn.NotifyUIFailover).pipe(Ut(()=>!u.value.meeting.isMeetingReset&&u.value.meeting.meetingStatus===Do.Joined),Bn(()=>(Ze(nl,{reason:Ha.Failover}),ja(Ks.NotifyUiFailover)))),audioBridgEpics5:(i,u)=>y0(i,u).pipe(Ut(()=>{const{meeting:{isAudioBridgeEnabled:l,abToken:h}}=u.value;return l&&Wb&&!!h}),Jn(()=>{const{meeting:{abToken:l,svcUrl:h,reportDomain:g,conId:y}}=u.value;ad.preInitAudioBridge({abToken:l,rwgHost:h,cid:y,nginxHost:g})}),Ar(Ue)),audioBridgEpics6:(i,u)=>Dn(i,16129).pipe(Ut(l=>{const{payload:{body:{bVideoOn:h}}}=l,{meeting:{isAudioBridgeEnabled:g}}=u.value;return g&&Wb&&!!h}),Jn(l=>{const{payload:{body:{id:h}}}=l;ad.changeActiveVideoSsrc(h)}),Ar(Ue)),audioBridgEpics7:(i,u)=>Rr(i,[Cn.RecoverWebrtcAudio,Cn.AudioStreamFailed]).pipe(hn(()=>{const h=[];return Yn(u.value)?.audio===uo.Computer&&(ad.leaveComputerAudio(),fy.joinOrLeaveVoip(!1),h.push(Nl(0))),kn(h)})),audioBridgEpics8:i=>Rr(i,[Cn.AudioBridgeFirstRecvData,Cn.AudioBridgeCanSendData]).pipe(Bn(u=>{const{payload:{type:l}}=u;return l===Cn.AudioBridgeFirstRecvData?(Ze(TM),yE(!0)):(Ze(q1),Tv(!0))}))},{dialEpics0:(i,u)=>Dn(i,8198).pipe(Nn(u),Ut(l=>{let[h,g]=l;return g.audio.dialout.map(y=>y.sequence).includes(h.payload.seq)}),hn(l=>{let[h,g]=l;const{payload:{seq:y,body:{phoneNodeID:C,result:w}}}=h,D=[Im({code:w,sequence:y,nodeId:C})];if(Ze(yM,{code:w}),w===du.Success){if(Ze(Pl),C&&Uo(g).findIndex(L=>L.userId===C)>-1){var N;const L=null===(N=g.audio.dialout.find(V=>V.sequence===y))||void 0===N?void 0:N.phoneNumber;L&&(D.push(tf({userId:C,key:"phoneNumber",value:L})),Ze(Wp,[{userId:C,phoneNumber:L}]))}}else[du.Canceling,du.Canceled,du.CancelFailed].includes(w)?w===du.Canceled?Ze(oC):w===du.CancelFailed&&Ze(sC):-1===[du.Calling,du.Ringing,du.Accepted,du.Success].indexOf(w)&&Ze($p);return kn(D)}))});var UI="object"==typeof global&&global&&global.Object===Object&&global,VI="object"==typeof self&&self&&self.Object===Object&&self,bf=UI||VI||Function("return this")(),V_=bf.Symbol,jI=Object.prototype,vo=jI.hasOwnProperty,Hc=jI.toString,Oa=V_?V_.toStringTag:void 0,Ao=Object.prototype.toString,rO=V_?V_.toStringTag:void 0;function my(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":rO&&rO in Object(i)?function(u){var l=vo.call(u,Oa),h=u[Oa];try{u[Oa]=void 0;var g=!0}catch{}var y=Hc.call(u);return g&&(l?u[Oa]=h:delete u[Oa]),y}(i):Ao.call(i)}function Xm(i){return null!=i&&"object"==typeof i}var j_=Array.isArray;function $a(i){var u=typeof i;return null!=i&&("object"==u||"function"==u)}function qF(i){if(!$a(i))return!1;var u=my(i);return"[object Function]"==u||"[object GeneratorFunction]"==u||"[object AsyncFunction]"==u||"[object Proxy]"==u}var cd,Kb=bf["__core-js_shared__"],_y=(cd=/[^.]+$/.exec(Kb&&Kb.keys&&Kb.keys.IE_PROTO||""))?"Symbol(src)_1."+cd:"",YF=Function.prototype.toString;function Sf(i){if(null!=i){try{return YF.call(i)}catch{}try{return i+""}catch{}}return""}var mh=/^\[object .+?Constructor\]$/,Zm=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Q_(i,u){var h,g,l=i?.[u];return $a(h=l)&&(g=h,!_y||!(_y in g))&&(qF(h)?Zm:mh).test(Sf(h))?l:void 0}var HI=Q_(bf,"WeakMap"),GI=/^(?:0|[1-9]\d*)$/;function sO(i,u){var l=typeof i;return!!(u=u??9007199254740991)&&("number"==l||"symbol"!=l&&GI.test(i))&&i>-1&&i%1==0&&i<u}function aO(i,u){return i===u||i!=i&&u!=u}function WI(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}function eg(i){return null!=i&&WI(i.length)&&!qF(i)}var $2=Object.prototype;function cO(i){var u=i&&i.constructor;return i===("function"==typeof u&&u.prototype||$2)}function Yb(i){return Xm(i)&&"[object Arguments]"==my(i)}var $F=Object.prototype,vy=$F.hasOwnProperty,$b=$F.propertyIsEnumerable,KI=Yb(function(){return arguments}())?Yb:function(i){return Xm(i)&&vy.call(i,"callee")&&!$b.call(i,"callee")},J2="object"==typeof re&&re&&!re.nodeType&&re,X2=J2&&we&&!we.nodeType&&we,lO=X2&&X2.exports===J2?bf.Buffer:void 0,Jb=(lO?lO.isBuffer:void 0)||function(){return!1},hs={};hs["[object Float32Array]"]=hs["[object Float64Array]"]=hs["[object Int8Array]"]=hs["[object Int16Array]"]=hs["[object Int32Array]"]=hs["[object Uint8Array]"]=hs["[object Uint8ClampedArray]"]=hs["[object Uint16Array]"]=hs["[object Uint32Array]"]=!0,hs["[object Arguments]"]=hs["[object Array]"]=hs["[object ArrayBuffer]"]=hs["[object Boolean]"]=hs["[object DataView]"]=hs["[object Date]"]=hs["[object Error]"]=hs["[object Function]"]=hs["[object Map]"]=hs["[object Number]"]=hs["[object Object]"]=hs["[object RegExp]"]=hs["[object Set]"]=hs["[object String]"]=hs["[object WeakMap]"]=!1;var uO,dO="object"==typeof re&&re&&!re.nodeType&&re,Xb=dO&&we&&!we.nodeType&&we,pO=Xb&&Xb.exports===dO&&UI.process,hO=function(){try{return Xb&&Xb.require&&Xb.require("util").types||pO&&pO.binding&&pO.binding("util")}catch{}}(),Z2=hO&&hO.isTypedArray,Zb=Z2?(uO=Z2,function(i){return uO(i)}):function(i){return Xm(i)&&WI(i.length)&&!!hs[my(i)]},fO=Object.prototype.hasOwnProperty,eN=function(i,u){return function(l){return i(u(l))}}(Object.keys,Object),tN=Object.prototype.hasOwnProperty;function nN(i){if(!cO(i))return eN(i);var u=[];for(var l in Object(i))tN.call(i,l)&&"constructor"!=l&&u.push(l);return u}var Ay=Q_(Object,"create"),iN=Object.prototype.hasOwnProperty,q4=Object.prototype.hasOwnProperty;function yy(i){var u=-1,l=null==i?0:i.length;for(this.clear();++u<l;){var h=i[u];this.set(h[0],h[1])}}function mO(i,u){for(var l=i.length;l--;)if(aO(i[l][0],u))return l;return-1}yy.prototype.clear=function(){this.__data__=Ay?Ay(null):{},this.size=0},yy.prototype.delete=function(i){var u=this.has(i)&&delete this.__data__[i];return this.size-=u?1:0,u},yy.prototype.get=function(i){var u=this.__data__;if(Ay){var l=u[i];return"__lodash_hash_undefined__"===l?void 0:l}return iN.call(u,i)?u[i]:void 0},yy.prototype.has=function(i){var u=this.__data__;return Ay?void 0!==u[i]:q4.call(u,i)},yy.prototype.set=function(i,u){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=Ay&&void 0===u?"__lodash_hash_undefined__":u,this};var JF=Array.prototype.splice;function tg(i){var u=-1,l=null==i?0:i.length;for(this.clear();++u<l;){var h=i[u];this.set(h[0],h[1])}}tg.prototype.clear=function(){this.__data__=[],this.size=0},tg.prototype.delete=function(i){var u=this.__data__,l=mO(u,i);return!(l<0||(l==u.length-1?u.pop():JF.call(u,l,1),--this.size,0))},tg.prototype.get=function(i){var u=this.__data__,l=mO(u,i);return l<0?void 0:u[l][1]},tg.prototype.has=function(i){return mO(this.__data__,i)>-1},tg.prototype.set=function(i,u){var l=this.__data__,h=mO(l,i);return h<0?(++this.size,l.push([i,u])):l[h][1]=u,this};var eS=Q_(bf,"Map");function zI(i,u){var l,h,g=i.__data__;return("string"==(h=typeof(l=u))||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==l:null===l)?g["string"==typeof u?"string":"hash"]:g.map}function Ey(i){var u=-1,l=null==i?0:i.length;for(this.clear();++u<l;){var h=i[u];this.set(h[0],h[1])}}function dp(i){var u=this.__data__=new tg(i);this.size=u.size}Ey.prototype.clear=function(){this.size=0,this.__data__={hash:new yy,map:new(eS||tg),string:new yy}},Ey.prototype.delete=function(i){var u=zI(this,i).delete(i);return this.size-=u?1:0,u},Ey.prototype.get=function(i){return zI(this,i).get(i)},Ey.prototype.has=function(i){return zI(this,i).has(i)},Ey.prototype.set=function(i,u){var l=zI(this,i),h=l.size;return l.set(i,u),this.size+=l.size==h?0:1,this},dp.prototype.clear=function(){this.__data__=new tg,this.size=0},dp.prototype.delete=function(i){var u=this.__data__,l=u.delete(i);return this.size=u.size,l},dp.prototype.get=function(i){return this.__data__.get(i)},dp.prototype.has=function(i){return this.__data__.has(i)},dp.prototype.set=function(i,u){var l=this.__data__;if(l instanceof tg){var h=l.__data__;if(!eS||h.length<199)return h.push([i,u]),this.size=++l.size,this;l=this.__data__=new Ey(h)}return l.set(i,u),this.size=l.size,this};var XF=Object.prototype.propertyIsEnumerable,gO=Object.getOwnPropertySymbols,tS=gO?function(i){return null==i?[]:(i=Object(i),function(u,l){for(var h=-1,g=null==u?0:u.length,y=0,C=[];++h<g;){var w=u[h];l(w)&&(C[y++]=w)}return C}(gO(i),function(u){return XF.call(i,u)}))}:function(){return[]};function H_(i){return h=tS,g=function rN(i){return eg(i)?function(u,l){var h=j_(u),g=!h&&KI(u),y=!h&&!g&&Jb(u),C=!h&&!g&&!y&&Zb(u),w=h||g||y||C,D=w?function(V,G){for(var W=-1,X=Array(V);++W<V;)X[W]=G(W);return X}(u.length,String):[],N=D.length;for(var L in u)!fO.call(u,L)||w&&("length"==L||y&&("offset"==L||"parent"==L)||C&&("buffer"==L||"byteLength"==L||"byteOffset"==L)||sO(L,N))||D.push(L);return D}(i):nN(i)}(u=i),j_(u)?g:function(y,C){for(var w=-1,D=C.length,N=y.length;++w<D;)y[N+w]=C[w];return y}(g,h(u));var u,h,g}var qI=Q_(bf,"DataView"),oN=Q_(bf,"Promise"),nS=Q_(bf,"Set"),_O="[object Map]",rS="[object Promise]",sN="[object Set]",aN="[object WeakMap]",ld="[object DataView]",cN=Sf(qI),lN=Sf(eS),ud=Sf(oN),uN=Sf(nS),qn=Sf(HI),by=my;(qI&&by(new qI(new ArrayBuffer(1)))!=ld||eS&&by(new eS)!=_O||oN&&by(oN.resolve())!=rS||nS&&by(new nS)!=sN||HI&&by(new HI)!=aN)&&(by=function(i){var u=my(i),l="[object Object]"==u?i.constructor:void 0,h=l?Sf(l):"";if(h)switch(h){case cN:return ld;case lN:return _O;case ud:return rS;case uN:return sN;case qn:return aN}return u});var dN=by,pN=bf.Uint8Array;function vO(i){var u=-1,l=null==i?0:i.length;for(this.__data__=new Ey;++u<l;)this.add(i[u])}function ZF(i,u){for(var l=-1,h=null==i?0:i.length;++l<h;)if(u(i[l],l,i))return!0;return!1}vO.prototype.add=vO.prototype.push=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},vO.prototype.has=function(i){return this.__data__.has(i)};function AO(i,u,l,h,g,y){var C=1&l,w=i.length,D=u.length;if(w!=D&&!(C&&D>w))return!1;var N=y.get(i),L=y.get(u);if(N&&L)return N==u&&L==i;var V=-1,G=!0,W=2&l?new vO:void 0;for(y.set(i,u),y.set(u,i);++V<w;){var X=i[V],ne=u[V];if(h)var me=C?h(ne,X,V,u,i,y):h(X,ne,V,i,u,y);if(void 0!==me){if(me)continue;G=!1;break}if(W){if(!ZF(u,function(_e,Re){if(!W.has(Re)&&(X===_e||g(X,_e,l,h,y)))return W.push(Re)})){G=!1;break}}else if(X!==ne&&!g(X,ne,l,h,y)){G=!1;break}}return y.delete(i),y.delete(u),G}function yO(i){var u=-1,l=Array(i.size);return i.forEach(function(h,g){l[++u]=[g,h]}),l}function Y4(i){var u=-1,l=Array(i.size);return i.forEach(function(h){l[++u]=h}),l}var G_=V_?V_.prototype:void 0,XI=G_?G_.valueOf:void 0,sS=Object.prototype.hasOwnProperty,fN="[object Arguments]",W_="[object Array]",ka="[object Object]",IO=Object.prototype.hasOwnProperty;function aS(i,u,l,h,g){return i===u||(null==i||null==u||!Xm(i)&&!Xm(u)?i!=i&&u!=u:function(y,C,w,D,N,L){var V=j_(y),G=j_(C),W=V?W_:dN(y),X=G?W_:dN(C),ne=(W=W==fN?ka:W)==ka,me=(X=X==fN?ka:X)==ka,_e=W==X;if(_e&&Jb(y)){if(!Jb(C))return!1;V=!0,ne=!1}if(_e&&!ne)return L||(L=new dp),V||Zb(y)?AO(y,C,w,D,N,L):function(ze,Qe,wt,Xt,_t,it,Ce){switch(wt){case"[object DataView]":if(ze.byteLength!=Qe.byteLength||ze.byteOffset!=Qe.byteOffset)return!1;ze=ze.buffer,Qe=Qe.buffer;case"[object ArrayBuffer]":return!(ze.byteLength!=Qe.byteLength||!it(new pN(ze),new pN(Qe)));case"[object Boolean]":case"[object Date]":case"[object Number]":return aO(+ze,+Qe);case"[object Error]":return ze.name==Qe.name&&ze.message==Qe.message;case"[object RegExp]":case"[object String]":return ze==Qe+"";case"[object Map]":var Ye=yO;case"[object Set]":if(Ye||(Ye=Y4),ze.size!=Qe.size&&!(1&Xt))return!1;var ut=Ce.get(ze);if(ut)return ut==Qe;Xt|=2,Ce.set(ze,Qe);var mt=AO(Ye(ze),Ye(Qe),Xt,_t,it,Ce);return Ce.delete(ze),mt;case"[object Symbol]":if(XI)return XI.call(ze)==XI.call(Qe)}return!1}(y,C,W,w,D,N,L);if(!(1&w)){var Re=ne&&IO.call(y,"__wrapped__"),Ne=me&&IO.call(C,"__wrapped__");if(Re||Ne){var et=Re?y.value():y,ht=Ne?C.value():C;return L||(L=new dp),N(et,ht,w,D,L)}}return!!_e&&(L||(L=new dp),function(ze,Qe,wt,Xt,_t,it){var Ce=1&wt,Ye=H_(ze),Ge=Ye.length;if(Ge!=H_(Qe).length&&!Ce)return!1;for(var ut=Ge;ut--;){var mt=Ye[ut];if(!(Ce?mt in Qe:sS.call(Qe,mt)))return!1}var St=it.get(ze),Wt=it.get(Qe);if(St&&Wt)return St==Qe&&Wt==ze;var en=!0;it.set(ze,Qe),it.set(Qe,ze);for(var rn=Ce;++ut<Ge;){var on=ze[mt=Ye[ut]],hr=Qe[mt];if(Xt)var Hn=Ce?Xt(hr,on,mt,Qe,ze,it):Xt(on,hr,mt,ze,Qe,it);if(!(void 0===Hn?on===hr||_t(on,hr,wt,Xt,it):Hn)){en=!1;break}rn||(rn="constructor"==mt)}if(en&&!rn){var Er=ze.constructor,or=Qe.constructor;Er==or||!("constructor"in ze)||!("constructor"in Qe)||"function"==typeof Er&&Er instanceof Er&&"function"==typeof or&&or instanceof or||(en=!1)}return it.delete(ze),it.delete(Qe),en}(y,C,w,D,N,L))}(i,u,l,h,aS,g))}var Cf=Object.prototype.hasOwnProperty;const mN=i=>4294966272&i,gN=i=>{let u={R:0,G:0,B:0,A:0};if("string"==typeof i&&i.startsWith("#")){const w=i.slice(1);try{if(3===w.length){const D=Array.from(w).map(N=>N.repeat(2)).map(N=>parseInt(N,16));u={R:D[0]/255,G:D[1]/255,B:D[2]/255,A:1}}else if(6===w.length||8===w.length){var l,h,g,y,C;const D=null===(l=w.match(/\S{2}/g))||void 0===l?void 0:l.map(N=>parseInt(N,16));u={R:(null!==(h=D?.[0])&&void 0!==h?h:0)/255,G:(null!==(g=D?.[1])&&void 0!==g?g:0)/255,B:(null!==(y=D?.[2])&&void 0!==y?y:0)/255,A:null!=D&&D[3]?(null!==(C=D?.[3])&&void 0!==C?C:0)/255:1}}}catch{console.warn("error color representation:",i)}}else"object"==typeof i&&(u={R:i.R/255,G:i.G/255,B:i.B/255,A:i.A||1});return u};function ZI(i){let{captureWidth:u=0,captureHeight:l=0}=i||{};const{hd:h}=i||{};return 0!==u&&0!==l||(h&&Qr.isSupportSending720P()?(u=1280,l=720):(u=640,l=360)),{captureWidth:u,captureHeight:l}}function wO(i,u){return"default"===i||u.some(l=>l.deviceId===i)||[Hv.Environment,Hv.User,Hv.Left,Hv.Right].includes(i)}function ew(i,u,l){const h=[],{video:{videoSsrc:g,activeCamera:y}}=u,{cameraId:C=y,videoElement:w,originalRatio:D,ptz:N,hd:L,mediaFile:V,fps:G}=l||{};let W;w&&(w.id?W=w.id:(W=Hh("__ZOOM_SDK_SELF_VIDEO_@__"),w.id=W));let X=G??Mc.Default;X=Math.max(Mc.Min,X),X=Math.min(Mc.Max,X);const{captureWidth:ne,captureHeight:me}=ZI(l);let _e=Promise.resolve(C);if(V&&V.url){const Re=gl.getInstance();_e=Re.setVideoElement(V).then(()=>Re.videoElement)}else gl.getInstance().stopVideoElement();return _e.then(Re=>{i.startCaptureVideo(g,Re,ne,me,W,dr.isAndroidOrIOSBrowser,!D&&function(){var Ne,et;const{isAndroidOrIOSBrowser:ht,isFirefox:ze,isSafari:Qe}=dr;return ht||!(null!==(Ne=navigator.mediaDevices)&&void 0!==Ne&&null!==(et=Ne.getSupportedConstraints)&&void 0!==et&&et.call(Ne).aspectRatio)||ze||Qe||B0()}(),N,X)}),h.push(kR({cameraId:C,captureWidth:ne,captureHeight:me,videoDOMId:W,originalRatio:D,ptz:N,hd:L,mediaFile:V,fps:X})),h}function TO(i,u,l){const{max:h,min:g,step:y}=i;let C=l/100*(h-g);y&&(C=Math.min(Math.floor(C/y)*y,Math.floor(C)));let w=u+C;return w=Math.min(h,w),w=Math.max(g,w),w}function cS(i,u){let l="",h=u;switch(i){case Zg.Down:h=-u,l="tilt";break;case Zg.Up:l="tilt";break;case Zg.Left:h=-u,l="pan";break;case Zg.Right:l="pan";break;case Zg.ZoomIn:l="zoom";break;case Zg.ZoomOut:h=-u,l="zoom"}return{key:l,range:h}}function Sy(i){const u=["pan","tilt","zoom"].reduce((l,h)=>i[h]&&0!==i[h].value?{...l,[h]:i[h].value}:l,{});return function(l){if(null==l)return!0;if(eg(l)&&(j_(l)||"string"==typeof l||"function"==typeof l.splice||Jb(l)||Zb(l)||KI(l)))return!l.length;var h=dN(l);if("[object Map]"==h||"[object Set]"==h)return!l.size;if(cO(l))return!nN(l).length;for(var g in l)if(Cf.call(l,g))return!1;return!0}(u)?null:u}function RO(i){return{pan:(i&gm.Pan)===gm.Pan,tilt:(i&gm.Tilt)===gm.Tilt,zoom:(i&gm.Zoom)===gm.Zoom}}function _N(i){const{isAndroidBrowser:u,isIOSMobile:l,isFirefox:h,isSupportImageCapture:g,isSupportMediaStreamTrackProcessor:y,isSupportOffscreenCanvas:C}=dr,D="function"!=typeof window.SharedArrayBuffer&&u&&!h;return l&&l1(dr.browserVersion||"","16.4")>=0||D||!L0()&&!i&&!FA()&&(g||y)&&C}function K_(){var i,u;return"orientation"in window.screen?null===(i=screen.orientation.type)||void 0===i?void 0:i.startsWith("landscape"):"orientation"in window?90===Math.abs(window.orientation):"matchMedia"in window?!(null===(u=window.matchMedia("(orientation: landscape)"))||void 0===u||!u.matches):screen.availWidth>screen.availHeight}const rg=kr.createAgent(),Iu=gc(Qr.getInstance());let dd,gh;function tw(i,u,l){return nw.apply(this,arguments)}function nw(){return nw=F(function*(i,u,l){const h=Hh(i),g=document.createElement("img");return g.src=u,g.id=h,g.style.display="none",au(u)&&g.setAttribute("crossorigin",""),yield new Promise((y,C)=>{g.onload=()=>{l&&URL.revokeObjectURL(u),y("")},g.onerror=()=>{l&&URL.revokeObjectURL(u),C("Cannot load  image.")}}),{imageId:h,imgElement:g}}),nw.apply(this,arguments)}function ig(i,u,l){return If.apply(this,arguments)}function If(){return If=F(function*(i,u,l){if(i===mm)return mm;{let h=i;if(u){const g=yield(y=i,new Promise((C,w)=>{try{dd&&gh||(dd=document.createElement("canvas"),gh=dd.getContext("2d"));const D=dd,N=gh;if(N){N.clearRect(0,0,dd.width,dd.height);const L=new Image;L.src=y,au(y)&&(L.crossOrigin="");const V=16/9,G=1280,W=Math.floor(G/V);D.width=G,D.height=W,L.onload=()=>{const{width:X,height:ne}=L,me=ne*V;if(me>X){const _e=X,Re=Math.floor(X/V);N?.drawImage(L,0,(ne-Re)/2,_e,Re,0,0,G,W)}else N.drawImage(L,(X-me)/2,0,me,ne,0,0,G,W);try{D.toBlob(_e=>{C(_e)})}catch(_e){_e instanceof DOMException&&_e.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),w(_e)}},L.onerror=X=>{w("Cannot load  image.")}}}catch(D){w(D)}}));h=URL.createObjectURL(g)}if(h){const{imageId:g,imgElement:y}=yield tw(T1,h,!!u);return(l??document.body).appendChild(y),g}}var y;return null}),If.apply(this,arguments)}function z_(i,u,l){return lS.apply(this,arguments)}function lS(){return lS=F(function*(i,u,l){var h;const g=null!==(h=l&&l.parentNode)&&void 0!==h?h:document.body,{imageUrl:y,cropped:C,rootWidth:w,rootHeight:D}=i;let N=i;!u.video.customizedVideoOption||i.captureWidth&&i.captureHeight||(N=u.video.customizedVideoOption);const{captureWidth:L,captureHeight:V}=ZI(N),G=document.createElement("div");let W;G.style.display="none",W=y?yield ig(y,C,G):null;let X=Hh(FE);if(l){const ne=R_(l);ne.id?X=ne.id:ne.id=X;try{w&&l.width!==w&&(l.width=w),D&&l.height!==D&&(l.height=D)}catch{console.warn("Cannot set the canvas width/height, and pay attention the canvas dimension is different from the setting")}}else{const ne=document.createElement("canvas");ne.width=w??380,ne.height=D??214,ne.id=X,G.appendChild(ne)}return g?.appendChild(G),{captureWidth:L,captureHeight:V,imageId:W,canvasId:X,divElement:G}}),lS.apply(this,arguments)}function vN(i,u,l,h){return AN.apply(this,arguments)}function AN(){return AN=F(function*(i,u,l,h){const g=Array.isArray(i)?i:i&&[i];if(g?.length>0){dd&&gh||(dd=document.createElement("canvas"),gh=dd.getContext("2d"));const y=dd,C=gh;if(y.width=u,y.height=l,C)try{C.fillStyle="#fff",C.clearRect(0,0,u,l);for(let D=0;D<g.length;D++){const N=g[D],{type:L,x:V,y:G}=N;if("rectangle"===L){const{width:W,height:X}=N;C.fillRect(V,G,W,X)}else if("square"===L){const{length:W}=N;C.fillRect(V,G,W,W)}else if("circle"===L){const{radius:W}=N;C.beginPath(),C.arc(V,G,W,0,2*Math.PI),C.fill()}else if("svg"===L){const{svg:W,width:X,height:ne}=N,me=new Image;me.src=W,au(W)&&(me.crossOrigin=""),yield new Promise((Ne,et)=>{me.onload=()=>{Ne("")},me.onerror=()=>{et()}});const{width:_e,height:Re}=me;C.drawImage(me,0,0,_e,Re,V,G,X,ne)}}const w=yield new Promise(D=>{y?.toBlob(N=>{D(N)})});if(w){const D=URL.createObjectURL(w),{imageId:N,imgElement:L}=yield tw(rF,D,!0);return(h??document.body).appendChild(L),N}}catch(w){w instanceof DOMException&&w.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue")}}return null}),AN.apply(this,arguments)}function yN(i,u){if(i===u||null==i&&null==u)return!0;const l=Array.isArray(i)?[...i]:[i],h=Array.isArray(u)?[...u]:[u];if(l.length!==h.length)return!1;const g=(y,C)=>y.type<C.type?-1:y.type===C.type?0:1;l.sort(g),h.sort(g);for(let y=0;y<l.length;y++)if(!T0(l[y],h[y]))return!1;return!0}function uS(i,u,l,h){const{video:{isCurrentUserStartedVideo:g,virtualBackground:{isVBPreloadReady:y,isVBConfigured:C,imageSrc:w},backgroundMode:D},meeting:{isCurrentUserStartVideoBeforeReset:N}}=l;return oc((L=y,void 0!==L?kn([L]):Oo(tC,1).pipe(Bn(V=>V)))).then(L=>{return L?h||!C&&i.imageUrl!==mm&&i.imageUrl?(V=F(function*(G,W,X,ne){const{canvasId:me,imageId:_e,captureHeight:Re,captureWidth:Ne,divElement:et}=yield z_(G,X,ne),{cameraId:ht}=G,{video:{videoSsrc:ze,activeCamera:Qe}}=X;return W.startVirtualBackgroundSetting(me,_e,ze,ht??Qe,Ne,Re),et}),function(G,W,X,ne){return V.apply(this,arguments)})(i,u,l,h).then(V=>g?af(!0):oc(Oo(t_,1)).then(G=>{var W;return h||u.stopVirtualBackgroundSetting(),G?(null==V||null===(W=V.parentNode)||void 0===W||W.removeChild(V),!0):Promise.reject("Cannot access the virtual background image.")})):w===i.imageUrl&&D===Yd.VirtualBackground&&!N||function(){var V=F(function*(G,W,X){const{imageUrl:ne,cropped:me}=G;if(ne){const _e=yield ig(ne,me);_e&&(X.video.backgroundMode===Yd.Mask&&(W.stopMaskSetting(!0),yield em(()=>{W.stopVirtualBackgroundSetting()},0)),W.updateVirtualBackgroundImage(_e),_e!==mm&&setTimeout(()=>{xA(_e)},0))}else W.updateVirtualBackgroundImage(null)});return function(G,W,X){return V.apply(this,arguments)}}()(i,u,l):Promise.reject("Cannot load virtual background model.");var V});var L}function DO(i,u,l,h){const{video:{mask:{isMaskConfigured:g,imageSrc:y,clip:C},backgroundMode:w,isCurrentUserStartedVideo:D},meeting:{isCurrentUserStartVideoBeforeReset:N}}=l;return h||!g&&i.imageUrl?(L=F(function*(V,G,W,X){const{canvasId:ne,imageId:me,captureHeight:_e,captureWidth:Re,divElement:Ne}=yield z_(V,W,X),{cameraId:et,clip:ht,rootWidth:ze=1280,rootHeight:Qe=720}=V,wt=ht?yield vN(ht,ze,Qe,Ne):null,{video:{videoSsrc:Xt,activeCamera:_t}}=W;return wt?(G.startMaskSetting(ne,me,wt,Xt,et??_t,ze,Qe,Re,_e),Ne):Promise.reject("Clip is empty")}),function(V,G,W,X){return L.apply(this,arguments)})(i,u,l,h).then(L=>D?lb(!0):oc(Oo(Xu,1)).then(V=>{var G;return h||u.stopMaskSetting(),V?(null==L||null===(G=L.parentNode)||void 0===G||G.removeChild(L),!0):Promise.reject("Cannot set video mask")})):w===Yd.Mask&&i.imageUrl===y&&yN(i.clip,C)&&!N?Promise.resolve(!0):function(){var L=F(function*(V,G,W){const{imageUrl:X,cropped:ne,clip:me,rootWidth:_e,rootHeight:Re}=V,{video:{mask:{imageSrc:Ne,cropped:et,clip:ht},backgroundMode:ze}}=W;if(X){if(ze===Yd.VirtualBackground&&(G.stopVirtualBackgroundSetting(!0),yield em(()=>{G.stopMaskSetting()},0)),X!==Ne||ne!==et){const Qe=yield ig(X,ne);Qe&&(G.updateMaskBackgroundImage(Qe),setTimeout(()=>{xA(Qe)},0))}if((!yN(me,ht)||!Ne)&&me&&_e&&Re){const Qe=yield vN(me,_e,Re);Qe&&(G.updateMaskClip(Qe,_e,Re),setTimeout(()=>{xA(Qe)},0))}}else G.updateMaskBackgroundImage(null),G.updateMaskClip(null,_e,Re)});return function(V,G,W){return L.apply(this,arguments)}}()(i,u,l);var L}const og=kr.createAgent(),ma=gc(Qr.getInstance()),rw=kr.createAgent(),iw=gc(Qr.getInstance()),iU={videoSsrc:0,cameraDevicesList:[],activeCamera:dr.isAndroidOrIOSBrowser?Hv.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,receivedVideoMaxQuality:navigator.hardwareConcurrency>=8?ol.Video_720P:ol.Video_360P,subscribedVideoList:[],renderedVideoList:[],ensuredCanvas:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,isUsingMediaPlayback:!1,receivedVideoDimension:{width:0,height:0},capturedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},mask:{imageSrc:void 0,cropped:void 0,clip:void 0},backgroundMode:Yd.Null,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}},hardwareAcceleration:{encode:!1,decode:!1},networkQuality:{},ptz:{},currentCameraControlStatus:{isRequested:!1,isInControl:!1,isCameraMoving:!1},farEndCameraControlStatus:{controlledUserList:[],isControlling:!1},subscriptionStatus:{encode:!1,decode:!1,detailed:!1}},$4=li({[`${KM}`]:ct((i,u)=>{let{payload:l}=u;i.videoSsrc=l}),[`${rb}`]:ct((i,u)=>{let{payload:l}=u;i.cameraDevicesList=l}),[`${rh}`]:ct((i,u)=>{let{payload:l}=u;const h=i.activeCamera;if(h in i.ptz){const g=i.ptz[h];["pan","tilt","zoom"].forEach(y=>{g[y]&&(g[y].value=0)})}i.activeCamera=l}),[`${nb}`]:ct((i,u)=>{let{payload:l}=u;i.activeVideoId=l.userId}),[`${wR}`]:ct((i,u)=>{let{payload:l}=u;i.isCurrentUserStartedVideo=l}),[`${BC}`]:ct((i,u)=>{let{payload:l}=u;i.spotlightUserList=l}),[`${FC}`]:ct((i,u)=>{let{payload:l}=u;i.isCaptureForbidden=l}),[`${TR}`]:ct((i,u)=>{let{payload:l}=u;i.receivedVideoMaxQuality=l}),[`${zM}`]:ct((i,u)=>{let{payload:l}=u;i.isVideoMuted=l}),[`${_A}`]:ct((i,u)=>{let{payload:l}=u;i.isCaptureCameraLoading=l}),[`${ib}`]:ct((i,u)=>{let{payload:l}=u;i.isCameraTaken=l}),[`${RR}`]:ct((i,u)=>{let{payload:l}=u;i.receivedVideoDimension=l}),[`${vA}`]:ct((i,u)=>{let{payload:l}=u;i.subscribedVideoList.includes(l)||i.subscribedVideoList.push(l)}),[`${qM}`]:ct((i,u)=>{let{payload:l}=u;const h=i.subscribedVideoList.indexOf(l);h>=0&&i.subscribedVideoList.splice(h,1)}),[`${AA}`]:ct((i,u)=>{let{payload:l}=u;const h=i.renderedVideoList.find(g=>g.userId===l.userId&&g.key===l.key&&g.canvasId===l.canvasId);h?(void 0!==l.videoQuality&&(h.videoQuality=l.videoQuality),void 0!==l.aspectRatio&&(h.aspectRatio=l.aspectRatio)):i.renderedVideoList.push({...l})}),[`${jC}`]:ct((i,u)=>{let{payload:l}=u;const h=i.renderedVideoList.findIndex(g=>g.userId===l.userId&&g.key===l.key&&g.canvasId===l.canvasId);h>=0&&i.renderedVideoList.splice(h,1)}),[`${VC}`]:ct((i,u)=>{let{payload:l}=u;i.isFollowHostVideoLayout=l}),[`${yt}`]:ct((i,u)=>{let{payload:l}=u;i.hostDragLayout=l}),[`${DR}`]:ct((i,u)=>{let{payload:l}=u;i.isSupportHDVideo=l}),[`${QC}`]:ct((i,u)=>{let{payload:l}=u;i.maximumNumbeOfHDSubscriptions=l}),[`${OR}`]:ct((i,u)=>{let{payload:l}=u;i.bCanUnmuteVideo=l}),[`${Rm}`]:ct((i,u)=>{let{payload:l}=u;i.virtualBackground.isVBPreloadReady=l}),[`${af}`]:ct((i,u)=>{let{payload:l}=u;i.virtualBackground.isVBConfigured=l}),[`${yA}`]:ct((i,u)=>{let{payload:l}=u;i.virtualBackground.imageSrc=l.imageUrl,i.virtualBackground.cropped=l.cropped,i.backgroundMode=Yd.VirtualBackground}),[`${cf}`]:ct((i,u)=>{let{payload:l}=u;const{encode:h,decode:g}=l;void 0!==h&&(i.hardwareAcceleration.encode=h),void 0!==g&&(i.hardwareAcceleration.decode=g)}),[`${Dm}`]:ct((i,u)=>{let{payload:l}=u;i.statistic.encode=l.data}),[`${EA}`]:ct((i,u)=>{let{payload:l}=u;i.statistic.decode=l.data}),[`${kR}`]:ct((i,u)=>{let{payload:l}=u;const{cameraId:h,captureWidth:g,captureHeight:y,videoDOMId:C,originalRatio:w,ptz:D,hd:N,mediaFile:L,fps:V}=l;i.activeCamera=h,i.customizedVideoOption={captureWidth:g,captureHeight:y,videoDOMId:C,originalRatio:w,ptz:D,hd:N,fps:V},T0(i.mediaPlaybackFile,L)||(i.mediaPlaybackFile=L,i.isUsingMediaPlayback=!(null==L||!L.url))}),[`${ob}`]:ct((i,u)=>{let{payload:l}=u;const{userId:h,level:g,bwLevel:y,type:C}=l;Object.prototype.hasOwnProperty.call(i.networkQuality,`${h}`)?i.networkQuality[`${h}`][`${C}`]={level:g,bwLevel:y}:Object.assign(i.networkQuality,{[`${h}`]:{[C]:{level:g,bwLevel:y}}})}),[`${HC}`]:ct((i,u)=>{let{payload:l}=u;const{deviceId:h,ptzRange:g}=l;if(Object.prototype.hasOwnProperty.call(i.ptz,h)){const y=i.ptz[h];y&&["pan","tilt","zoom"].forEach(C=>{const w=g[C];if(w){var D;const N=null===(D=y[C])||void 0===D?void 0:D.capability;N?Object.assign(N,{...w}):y[C]={capability:{...w},value:0}}})}else Object.assign(i.ptz,{[h]:{pan:g.pan?{capability:{...g.pan},value:0}:null,tilt:g.tilt?{capability:{...g.tilt},value:0}:null,zoom:g.zoom?{capability:{...g.zoom},value:0}:null}})}),[`${__}`]:ct((i,u)=>{let{payload:l}=u;i.currentCameraControlStatus.isRequested=l}),[`${sb}`]:ct((i,u)=>{let{payload:l}=u;const{isInControl:h,userId:g}=l;i.currentCameraControlStatus.isInControl=h,i.currentCameraControlStatus.controllingUserId=g}),[`${GC}`]:ct((i,u)=>{let{payload:l}=u;i.farEndCameraControlStatus.controlledUserList.includes(l)||i.farEndCameraControlStatus.controlledUserList.push(l)}),[`${ab}`]:ct((i,u)=>{let{payload:l}=u;const h=i.farEndCameraControlStatus.controlledUserList.indexOf(l);-1!==h&&i.farEndCameraControlStatus.controlledUserList.splice(h,1)}),[`${WC}`]:ct((i,u)=>{let{payload:l}=u;i.currentCameraControlStatus.isCameraMoving="start"===l.cmd}),[`${KC}`]:ct((i,u)=>{let{payload:l}=u;const{constraints:h,deviceId:g}=l,y=i.ptz[g];["pan","tilt","zoom"].forEach(C=>{void 0!==h[C]&&(y[C].value=h[C])})}),[`${PR}`]:ct((i,u)=>{let{payload:l}=u;i.farEndCameraControlStatus.isControlling=l}),[`${cb}`]:ct((i,u)=>{let{payload:l}=u;i.networkQualityBroadcastTime=l}),[`${lb}`]:ct((i,u)=>{let{payload:l}=u;i.mask.isMaskConfigured=l}),[`${zC}`]:ct((i,u)=>{let{payload:l}=u;const{imageUrl:h,cropped:g,rootHeight:y,rootWidth:C,clip:w}=l;i.mask.imageSrc=h,i.mask.cropped=g,i.mask.clip=w,i.mask.rootWidth=C,i.mask.rootHeight=y,i.backgroundMode=Yd.Mask}),[`${fF}`]:ct((i,u)=>{let{payload:l}=u;i.backgroundMode=l}),[`${pl}`]:ct((i,u)=>{let{payload:l}=u;i.capturedVideoDimension=l}),[`${bA}`]:ct((i,u)=>{let{payload:l}=u;i.ensuredCanvas.includes(l)||i.ensuredCanvas.push(l)}),[`${v_}`]:ct((i,u)=>{let{payload:l}=u;i.mediaPlaybackFile=l,i.isUsingMediaPlayback=!(null==l||!l.url)}),[`${SA}`]:ct((i,u)=>{let{payload:l}=u;if(l){const{lastCopy:h,...g}=l;i.prefetchedVideo=g}else i.prefetchedVideo=l}),[`${lf}`]:ct((i,u)=>{let{payload:l}=u;Object.assign(i.subscriptionStatus,l)}),[`${UC}`]:(i,u)=>{let{payload:l}=u;const h={cameraDevicesList:i.cameraDevicesList};return l&&Object.assign(h,{activeCamera:i.activeCamera,customizedVideoOption:i.customizedVideoOption,virtualBackground:{imageSrc:i.virtualBackground.imageSrc,cropped:i.virtualBackground.cropped},mask:{imageSrc:i.mask.imageSrc,cropped:i.mask.cropped,rootWidth:i.mask.rootWidth,rootHeight:i.mask.rootHeight,clip:i.mask.clip},backgroundMode:i.backgroundMode,ptz:i.ptz,subscriptionStatus:i.subscriptionStatus}),{...iU,...h}}},iU),EN=ca({videoRenderEpics0:i=>Dn(i,16129).pipe(Bn(u=>{const{payload:{body:{id:l,bVideoOn:h}}}=u,g=mN(l);return Ze(VE,{bVideoOn:h,userId:g}),nb({bVideoOn:h,userId:g})})),videoRenderEpics1:(i,u)=>Rr(i,Cn.VideoDecodeMaxSize).pipe(Ut(l=>{var h;return null==l||null===(h=l.payload)||void 0===h?void 0:h.data}),Bn(l=>{const{size:h}=l.payload.data,{video:{renderedVideoList:g,receivedVideoMaxQuality:y}}=u.value,C=g.filter(w=>w.videoQuality>=ol.Video_720P);return y!==h&&C.length>0&&(h!==ol.Video_720P&&y!==ol.Video_720P||C.forEach(w=>{rg.subscribeVideo(w.userId,w.videoQuality,!1)})),TR(h)})),videoRenderEpics2:i=>Dn(i,16135).pipe(Bn(u=>{const{payload:{body:{bLeadershipOn:l,id:h}}}=u,g=[];return l&&g.push(mN(h)),Ze(qv,{spotlightList:g}),BC(g)})),videoRenderEpics3:(i,u)=>Dn(i,7958).pipe(Nn(u),Bn(l=>{let[h,g]=l;const{payload:{body:y}}=h;let C=[];y&&y.group_list&&y.group_list[0]&&(C=y.group_list[0].map(D=>D.id));const w=Uo(g);return C=C.filter(D=>w.findIndex(N=>N.userId===D)>=0),Ze(qv,{spotlightList:C}),BC(C)})),videoRenderEpics4:i=>Rr(i,Cn.CurrentVideoResolution).pipe(qa(u=>(Ze(jE,u.payload.data),RR(u.payload.data)))),videoRenderEpics5:i=>Rr(i,[Cn.CurrentVideoResolution,Cn.CurrentCaptureVideoWidthHeight]).pipe(Ut(u=>!!u.payload.data),Bn(u=>{const{payload:{data:l,type:h}}=u;return h===Cn.CurrentVideoResolution?(Ze(jE,l),RR(l)):(Ze(eC,l),pl(l))})),videoRenderEpics6:i=>Dn(i,uc).pipe(Ut(u=>{const{payload:{body:l}}=u;return["bFollowHostVideo","VideoHd","bCanUnmuteVideo"].some(h=>void 0!==l[h])}),Bn(u=>{const{payload:{body:{bFollowHostVideo:l,VideoHd:h,bCanUnmuteVideo:g}}}=u;if(void 0!==l)return Ze(Ra,{bOn:l}),VC(l);if(void 0!==g)return OR(g);{const y=1===h;return Iu.updateVideoHDValue(y),Iu.enableHardwareAccelerationForVideoEncode(!1),DR(y)}})),videoRenderEpics7:(i,u)=>Dn(i,7957).pipe(Nn(u),Bn(l=>{let[h,g]=l;const{video:{isFollowHostVideoLayout:y}}=g,{payload:{body:C}}=h,w=C&&C.drag_list&&C.drag_list.map(D=>D.id);return y&&Ze(bs,{layout:w}),yt(w)})),videoRenderEpics8:(i,u)=>Dn(i,So).pipe(Nn(u),Ut(l=>{let[h,g]=l;const{meeting:{userId:y},video:{subscribedVideoList:C}}=g,w=h.payload.body.update,D=h.payload.body.remove;return w&&w.length>0&&w.findIndex(N=>N.id!==y&&(void 0!==N.bVideoOn||N.bHold))>-1||D&&D.some(N=>C.includes(N.id))}),Jn(l=>{let[h,g]=l;const{payload:{body:{remove:y,update:C}}}=h,{video:{subscribedVideoList:w}}=g,D=cR(g);if(y&&y.length>0&&y.filter(N=>w.includes(N.id)).forEach(N=>{Ze(xc,{userId:N.id})}),C&&C.length>0){const N=C.filter(V=>void 0!==V.bVideoOn).filter(V=>-1===D.findIndex(G=>G.userId===V.id)),L=C.filter(V=>!0===V.bHold);L.length>0&&L.filter(V=>w.includes(V.id)).forEach(V=>{Ze(xc,{userId:V.id})}),N.forEach(V=>{V.bVideoOn?Ze(e_,{userId:V.id}):w.includes(V.id)&&Ze(xc,{userId:V.id})})}}),Ar(Ue)),videoRenderEpics9:(i,u)=>Rr(i,Cn.VideoQosData).pipe(Nn(u),Bn(l=>{var h;let[g,y]=l;const{video:{isCaptureForbidden:C,isCameraTaken:w},media:{videoEncodeStatus:D,videoDecodeStatus:N}}=y,L=Yn(y),V=LM(y),G=V.length>0,W=L?.bVideoOn&&!C&&!w,X=V.some(_e=>_e.bVideoOn),me="success"===N&&G&&X;return null!==(h=g.payload.data)&&void 0!==h&&h.encoding?"success"===D&&W&&G?(Ze(Lc,g.payload),Dm(g.payload)):Dm(qd):me?(Ze(Lc,g.payload),EA(g.payload)):EA(qd)})),videoRenderEpics10:(i,u)=>Rr(i,[66.5,66.6]).pipe(Jn(l=>{const{payload:{type:h,data:g}}=l,{video:{subscriptionStatus:y}}=u.value;if(y.detailed)if(66.5===h){const{ssrc:C,width:w,height:D,quality:N}=g;Ze(n_,{userId:C,width:w,height:D,quality:N})}else if(66.6===h){const{ssrc:C,fps:w}=g;Ze(n_,{userId:C,fps:w})}}),Ar(Ue)),videoRenderEpics11:(i,u)=>y0(i,u).pipe(hn(F(function*(){return dr.isAndroidOrIOSBrowser?1:(yield Qr.isSupportVideoDecodeHardwareAcceleration())?4:1})),Bn(l=>QC(l))),videoRenderEpics12:(i,u)=>Rr(i,Cn.NetworkQualityChange).pipe(Ut(l=>!!l.payload.data),hn(l=>{var h;const{payload:{data:{bwLevel:g,isUplink:y,networkLevel:C}}}=l,w=[],{meeting:{userId:D},video:{networkQuality:N,subscribedVideoList:L,networkQualityBroadcastTime:V}}=u.value,G=y?"uplink":"downlink";w.push(ob({userId:D,level:C,bwLevel:g,type:G}));const W=T0(null===(h=N[`${D}`])||void 0===h?void 0:h[G],{level:C,bwLevel:g});if(!W&&-1!==C&&(!y&&L.filter(X=>X!==D).length>0||y)&&Ze(nC,{userId:D,type:G,level:C}),y){const X=performance.now();(!W||X-(V??0)>3e4)&&(rg.broadcastUserNetworkQuality({isUplink:y,level:C,bwLevel:g}),w.push(cb(X)))}return kn(w)})),videoRenderEpics13:(i,u)=>la(i,8005).pipe(Ut(l=>{var h;return!(null===(h=l.payload.body)||void 0===h||!h.nUserID)}),hn(l=>{const{payload:{body:{nLevel:h,nUserID:g}}}=l,{video:{networkQuality:y}}=u.value,C=y[`${g}`],w=[];return C&&C.uplink.level===h||(Ze(nC,{userId:g,level:h,type:"uplink"}),w.push(ob({userId:g,level:h,type:"uplink"}))),kn(w)})),videoRenderEpics14:(i,u)=>Dn(i,So).pipe(Ut(l=>{const{payload:{body:h}}=l,{video:{prefetchedVideo:g}}=u.value;return g?.userId&&(h.update||h.remove)}),hn(l=>{const{payload:{body:h}}=l,g=[],{video:{prefetchedVideo:y}}=u.value;let C=!1;return h.remove&&(C=-1!==h.remove.findIndex(w=>w.id===y?.userId)),h.update&&(C=-1!==h.update.findIndex(w=>w.id===y?.userId&&!1===w.bVideoOn)),C&&y&&(y.loaded||Iu.cancelPrefetchVideoSsrc(y.userId),rg.unsubscribeVideo(y.userId),g.push(SA(void 0))),kn(g)})),videoRenderEpics15:(i,u)=>i.pipe(Wn(`${SA}`),Ut(l=>!!l.payload),Jn(l=>{const{payload:{lastCopy:h}}=l,{video:{prefetchedVideo:g}}=u.value;!g||h&&h.userId===g.userId||(null!=h&&h.userId&&(h.loaded&&Iu.cancelPrefetchVideoSsrc(h.userId),rg.unsubscribeVideo(h.userId)),rg.subscribeVideo(g.userId,ol.Video_360P,!1),Iu.prefetchVideoSsrc(g.userId))}),Ar(Ue)),videoRenderEpics16:(i,u)=>Rr(i,Cn.NewActiveSpeakerFirstFrameCallback).pipe(Ut(()=>!!u.value.video.prefetchedVideo),hn(l=>{const{payload:{data:{ssrc:h}}}=l,{video:{prefetchedVideo:g}}=u.value,y=[];return g&&(Ro(g.userId,h)?(y.push(SA({userId:g.userId,loaded:!0,lastCopy:g})),Ze(N1,{userId:g.userId})):rg.unsubscribeVideo(g.userId)),kn(y)})),videoRenderEpics17:(i,u)=>Dn(i,16131).pipe(Ut(l=>void 0!==l.payload.body.ssrc),Jn(()=>{const{media:{videoDecodeStatus:l,videoEncodeStatus:h}}=u.value;Os("video",h,l).subscribe(g=>{let[y,C]=g;const{video:{subscriptionStatus:w}}=u.value;y&&w.encode&&Iu.subscribeToQos([ys.VideoEncode],zp),C&&(w.decode&&Iu.subscribeToQos([ys.VideoDecode],zp),w.detailed&&Iu.enableVideoObserver(!0))})}),Ar(Ue)),videoRenderEpics18:(i,u)=>i.pipe(Wn(`${AA}`,`${jC}`),Ut(()=>[0,1].includes(u.value.video.renderedVideoList.length)),Jn(()=>{const l=u.value.video.renderedVideoList.length;1===l?Iu.enableVideoObserver(!0,!0):0===l&&Iu.enableVideoObserver(!1)}),Ar(Ue)),videoRenderEpics19:(i,u)=>Rr(i,66.5).pipe(Jn(l=>{const{payload:{data:h}}=l,{video:{renderedVideoList:g}}=u.value,{ssrc:y,width:C,height:w}=h,D=w?C/w:0;g.filter(L=>Ro(L.userId,y)).some(L=>Math.abs(L.aspectRatio-D)>.2)&&Ze(qp,{userId:y,aspectRatio:D})}),Ar(Ue))},{videoCaptureEpics0:(i,u)=>Rr(i,Cn.StartVideoCaptureSuccess).pipe(hn(l=>{const{video:{cameraDevicesList:h,activeCamera:g,ptz:y,isCurrentUserStartedVideo:C,isUsingMediaPlayback:w},meeting:{userId:D}}=u.value,{payload:{data:{currentDeviceID:N,PTZRange:L}}}=l,V=[];if(h.length<1&&!w&&(Ze(k1,{reason:"Cannot detect camera devices"}),ma.stopCaptureVideo()),wO(g,h)||w){if(C||og.muteAttendeeVideo(D,!1),Ze(M1),w)V.push(rh("default"));else if(N&&L&&V.push(HC({deviceId:N,ptzRange:L})),g!==N&&V.push(rh(N)),Object.prototype.hasOwnProperty.call(y,N)){const G=y[N];if(G){const W=Sy(G);W&&ma.movePTZCamera(W)}}}else Ze(Fo,{reason:"cannot find target camera"}),ma.stopCaptureVideo();return kn(V)})),videoCaptureEpics1:(i,u)=>Dn(i,So).pipe(Ut(l=>{const{payload:{body:{update:h}}}=l,{meeting:{userId:g}}=u.value;return h?.some(y=>y.id===g&&void 0!==y.bVideoOn)}),Bn(l=>{const{payload:{body:{update:h}}}=l,{meeting:{userId:g}}=u.value,y=h.find(C=>C.id===g);return Ze(!0===y.bVideoOn?zv:$h),wR(!!y.bVideoOn)})),videoCaptureEpics2:i=>Rr(i,[Cn.UserForbiddedCaptureVideo,Cn.UserCameraIsTakenByOtherPrograms,Cn.VideoWebsocketBroken,Cn.StopVideoCaptureFailed]).pipe(hn(u=>{const{payload:{type:l}}=u,h=[];switch(l){case Cn.UserForbiddedCaptureVideo:Ze(Nc),h.push(FC(!0));break;case Cn.UserCameraIsTakenByOtherPrograms:Ze(Kv,{reason:"User camera is taken by other programs."}),h.push(ib(!0));break;case Cn.VideoWebsocketBroken:Ze(sl,{reason:"Video websocket broken."});break;case Cn.StopVideoCaptureFailed:Ze($h,{failed:!0,reason:"Unknown."})}return kn(h)})),videoCaptureEpics3:(i,u)=>Rr(i,Cn.StopVideoCaptureSuccess).pipe(Nn(u),qa(l=>{let[,h]=l;const{meeting:{userId:g},video:{isCurrentUserStartedVideo:y}}=h;y||Ze($h),og.muteAttendeeVideo(g,!0)})),videoCaptureEpics4:(i,u)=>Dn(i,16133).pipe(Nn(u),Ut(l=>{var h,g;let[y,C]=l;return(null==y||null===(h=y.payload)||void 0===h||null===(g=h.body)||void 0===g?void 0:g.id)===C.meeting.userId}),qa(l=>{let[h]=l;const{id:g,bVideoMute:y}=h.payload.body;return Ze(O1,{id:g,isVideoMuted:y}),!0===y&&ma.stopCaptureVideo(),!1===y&&Ze(Z0,{id:g,isVideoMuted:y}),zM(y)})),videoCaptureEpics5:(i,u)=>Dn(i,16131).pipe(Ut(l=>void 0!==l.payload.body.ssrc),wi(l=>{const{payload:{body:{ssrc:h}}}=l;return Ze(vM,h),un(Ii(KM(h)),T_(u).pipe(hn(g=>{const{meeting:{isCurrentUserStartVideoBeforeReset:y},media:{videoEncodeStatus:C}}=u.value;return!0!==g?.bVideoOn&&!0===y?Os("video",C,"success").pipe(Ut(w=>{let[D,N]=w;return D&&N}),Bn(()=>{const w=u.value,{video:{backgroundMode:D,mask:N,virtualBackground:L,activeCamera:V,customizedVideoOption:G}}=w;let W=Promise.resolve(!0);return D===Yd.VirtualBackground&&L.imageSrc?W=uS({imageUrl:L.imageSrc,cropped:L.cropped},ma,w):D===Yd.Mask&&N.imageSrc&&N.clip&&(W=DO({imageUrl:N.imageSrc,cropped:N.cropped,clip:N.clip,rootHeight:N.rootHeight,rootWidth:N.rootWidth},ma,w)),W.then(()=>{ew(ma,w,{cameraId:V,...G})}),OE(void 0)})):Ue})))})),videoCaptureEpics6:(i,u)=>i.pipe(Wn(`${rb}`),Jn(l=>{const{payload:h}=l,g=u.value,{meeting:{userId:y}}=g,C=Yn(g);0===h.length?C&&!C.bVideoConnect||og.connectCamera(y,!1):null!=C&&C.bVideoConnect||og.connectCamera(y,!0)}),Ar(Ue)),videoCaptureEpics7:i=>Rr(i,Cn.InitSuccessVideo).pipe(Ut(u=>!dr.isIPad&&dr.isAndroidOrIOSBrowser&&u.payload.data===ns.EncodeSuccess),wi(()=>"orientation"in window.screen?ur(screen.orientation,"change").pipe(hn(()=>(ma.setMobileRotateMode(K_()),Ue))):ur(window,"orientationchange").pipe(hn(u=>{var l,h,g;const y=null===(l=u.target)||void 0===l||null===(h=l.screen)||void 0===h||null===(g=h.orientation)||void 0===g?void 0:g.angle,C=90===Math.abs(y);return ma.setMobileRotateMode(C),Ue})))),videoCaptureEpics8:i=>Rr(i,Cn.StartVideoCaptureSuccess).pipe(Ut(()=>!dr.isIPad&&dr.isAndroidOrIOSBrowser),Jn(()=>{ma.setMobileRotateMode(K_())}),Ar(Ue)),videoCaptureEpics9:(i,u)=>Rr(i,Cn.VideoStreamFailed).pipe(Ut(()=>!!u.value.video.isCurrentUserStartedVideo),Jn(()=>{ma.stopCaptureVideo()}),Ar(Ue))},{vbEpics0:i=>Rr(i,[Cn.VbModelPreloadingOk,Cn.VbModelPreloading_3S,Cn.VbModelPreloading_10S,Cn.VbSettingParaError]).pipe(hn(u=>{const{payload:{type:l,data:h}}=u,g=[];return[Cn.VbModelPreloadingOk,Cn.VbModelPreloading_3S,Cn.VbModelPreloading_10S].includes(l)?(g.push(Rm(!0)),Ze(tC,!0),l===Cn.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):l===Cn.VbSettingParaError&&(h===Qv.VBModelNotMatch?(Ze(tC,!1),g.push(Rm(!1))):(Ze(t_,!1),g.push(af(!1)))),kn(g)})),vbEpics1:i=>Rr(i,Cn.StartVideoStreamInVbSettingSuccess).pipe(Bn(()=>(Ze(t_,!0),af(!0)))),vbEpics2:i=>Rr(i,Cn.StartVideoStreamInMaskSettingSuccess).pipe(Bn(()=>(Ze(Xu,!0),lb(!0)))),vbEpics3:i=>Rr(i,Cn.MaskSettingParaError).pipe(Bn(()=>(Ze(Xu,!1),lb(!1))))},{cameraPtzEpics0:(i,u)=>Dn(i,8004).pipe(hn(l=>{const{payload:{body:{nCmd:h,nUserID:g,nReason:y,nButtonID:C}}}=l,w=u.value,D=Uo(w),{video:{currentCameraControlStatus:{isInControl:N,controllingUserId:L},cameraDevicesList:V,activeCamera:G}}=w,W=D.find(ne=>Ro(ne.userId,g)),X=[];if(X.push(__(!0)),h===Wa.Request){const ne={userId:W?.userId,displayName:W?.displayName};if(N){const me=D.find(_e=>_e.userId===L);Object.assign(ne,{currentControllingUserId:me?.userId,currentControllingDisplayName:me?.displayName})}Ze(rC,ne)}else if(h===Wa.Approve)X.push(GC(W?.userId)),Ze(P1,{isApproved:!0,userId:W?.userId,displayName:W?.displayName});else if(h===Wa.Decline)X.push(ab(W?.userId)),Ze(P1,{isApproved:!1,userId:W?.userId,displayName:W?.displayName,reason:y});else if(h===Wa.GiveUp)X.push(sb({isInControl:!1,userId:0})),Ze($d,{isControlled:!1});else if(h===Wa.StartControl||h===Wa.StopControl)X.push(WC({cmd:h===Wa.StartControl?"start":"stop",type:C}));else if(h===Wa.SwitchCamera){const ne=V.findIndex(_e=>_e.deviceId===G),me=ne+1===V.length?0:ne+1;me!==ne&&iw.changeCamera(V[me].deviceId)}return kn(X)})),cameraPtzEpics1:(i,u)=>Dn(i,So).pipe(Ut(l=>{var h;const{payload:{body:g}}=l;return null==g||null===(h=g.update)||void 0===h?void 0:h.some(y=>void 0!==y.nFECC||void 0!==y.nFECCExecutive)}),Jn(l=>{const{payload:{body:{update:h}}}=l,g=h.find(y=>void 0!==y.nFECC||void 0!==y.nFECCExecutive);if(g){const{meeting:{userId:y}}=u.value;Ro(g.nFECCExecutive,y)&&Ze(r_,{userId:g.id,ptz:RO(g.nFECC)})}}),Ar(Ue)),cameraPtzEpics2:(i,u)=>Dn(i,So).pipe(Ut(l=>{var h;const{payload:{body:g}}=l,{video:{farEndCameraControlStatus:{controlledUserList:y}}}=u.value;return null==g||null===(h=g.remove)||void 0===h?void 0:h.some(C=>y.includes(C.id))}),hn(l=>{var h;const{payload:{body:g}}=l,y=[],{video:{farEndCameraControlStatus:{controlledUserList:C}}}=u.value,w=null==g||null===(h=g.remove)||void 0===h?void 0:h.find(D=>C.includes(D.id));return w&&y.push(ab(w.id)),kn(y)})),cameraPtzEpics3:(i,u)=>i.pipe(Wn(`${WC}`),wi(l=>{const{payload:{cmd:h,type:g}}=l;return"start"===h?sa(0,200).pipe(Ev(()=>!!u.value.video.currentCameraControlStatus.isCameraMoving),hn(()=>{const{video:{ptz:y,activeCamera:C}}=u.value,w=y[C],D=Sy(w)||{},{key:N,range:L}=cS(g,2);return w[N]?(Object.assign(D,{[N]:TO(w[N].capability,w[N].value,L)}),iw.movePTZCamera(D).then(()=>KC({deviceId:C,constraints:D}))):Promise.resolve(void 0)}),hn(y=>"object"==typeof y&&void 0!==y.type?Ii(y):Ue)):Ue})),cameraPtzEpics4:(i,u)=>i.pipe(Wn(`${rh}`),hn(l=>{const{payload:h}=l,{video:{customizedVideoOption:g,ptz:y}}=u.value;if(null!=g&&g.ptz){const C=y?.[h];void 0!==C&&rw.sendCameraAblity({pan:!!C.pan,tilt:!!C.tilt,zoom:!!C.zoom})}return Ue}))});let pd=(()=>{class i{constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.mediaOptions=void 0,this.inProgress=void 0,this.callbackList=[]}static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new i),this.agentInstance}init(l,h){var g,y,C,w,D;!this.instance&&window.JsMediaSDK_Instance&&(this.instance=new window.JsMediaSDK_Instance({ivObj:{[zs.AUDIO_ENCODE]:void 0,[zs.VIDEO_ENCODE]:void 0,[zs.SHARING_ENCODE]:void 0}})),this.mediaWorkersPath=am(l,!1),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=h,null===(g=this.instance)||void 0===g||g.JsMediaSDK_PreLoad(this.mediaWorkersPath,this.onMediaSDKCallback,h);const N=Gg(null===(y=this.mediaOptions)||void 0===y?void 0:y.enableMultiDecodeVideoWithoutSAB);null===(C=this.instance)||void 0===C||C.setPropsBeforeInit({callback:this.onMediaSDKCallback,audioWorkerPath:null===(w=this.mediaWorkersPath)||void 0===w?void 0:w.audioWorkletPath,isEnableListenInitEvent:!0}),null===(D=this.instance)||void 0===D||D.initVideoEncode(this.mediaWorkersPath,"",0,!1,"",0,N,!1,!1,!0,!0,!1,!0),this.inProgress=!0}onMediaSDKCallback(l,h){this.callbackList.length>0&&this.callbackList.forEach(g=>g(l,h))}registerCallback(l){this.callbackList.push(l)}unregisterCallback(l){this.callbackList=this.callbackList.filter(h=>h!==l)}destroy(){var l;null===(l=this.instance)||void 0===l||l.destroy(),this.instance=null,this.callbackList=[],this.inProgress=!1}disconnect(){var l,h;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(17,{}),null===(h=this.instance)||void 0===h||h.JsMediaSDK_UnInit()}startVirtualBackgroundSetting(l,h,g,y,C,w){var D;null===(D=this.instance)||void 0===D||D.Notify_MeidaSDK(91,{canvas:l,bgdom:h,width:C,height:w,ssid:0,VideoSelectValue:"default"===y?null:y,disableOriginalRatio:arguments.length>6&&void 0!==arguments[6]&&arguments[6]})}updateVirtualBackgroundImage(l){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(92,{bgdom:l})}stopVirtualBackgroundSetting(){var l;null===(l=this.instance)||void 0===l||l.Notify_MeidaSDK(93,{isSwitch:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})}}return i.agentInstance=void 0,i})();const OO="PREVIEW_VIDEO_ENCODE_SUCCESS",sw="PREVIEW_VIDEO_VB_MODEL_READY";function aw(i,u,l){return _h.apply(this,arguments)}function _h(){return _h=F(function*(i,u,l){const{imageUrl:h,cropped:g,deviceId:y}=l;if(h){const C=yield ig(h,g);if(C){let w=Hh("__ZOOM_SDK_PREVIEW_VIRTUAL_BACKGROUND_CANVAS_@__");u.id?w=u.id:u.id=w;let[D,N]=[640,360];Qr.isSupportSending720P()&&(D=1280,N=720),i.startVirtualBackgroundSetting(w,C,0,y??"default",D,N),C!==mm&&setTimeout(()=>{xA(C)},0)}}}),_h.apply(this,arguments)}let cw=(()=>{class i{constructor(){this.previewMediaAgent=pd.getInstance(),this.isInit=void 0,this.isVideoEncoded=void 0,this.isVBModelReady=void 0,this.eventHandler=(l,h)=>{switch(l){case Cn.InitSuccessVideo:h===ns.EncodeSuccess&&(this.isVideoEncoded=!0,Ze(OO));break;case Cn.VbModelPreloadingOk:case Cn.VbModelPreloading_3S:case Cn.VbModelPreloading_10S:this.isVBModelReady=!0,Ze(sw,!0);break;case Cn.VbSettingParaError:h===Qv.VBModelNotMatch&&(this.isVBModelReady=!1,Ze(sw,!1))}}}static setMediaOption(l){i.mediaOption=l}setup(){if(i.mediaOption){if(Qr.getInstance().inProgress)return Promise.resolve("");if(!pd.getInstance().inProgress){this.isVideoEncoded=void 0,this.isVBModelReady=void 0,this.previewMediaAgent.unregisterCallback(this.eventHandler);const{assetsPath:l,enforceMultipleVideos:h,enforceVirtualBackground:g}=i.mediaOption,y={...h2(l,h,g)};this.previewMediaAgent.init(l,y),this.previewMediaAgent.registerCallback(this.eventHandler)}return Promise.resolve("")}return Promise.reject({type:nn,reason:"Cannot preview video with virtual background before `client.init` method."})}startPreview(l,h){var g=this;return F(function*(){Qr.getInstance().inProgress?aw(Qr.getInstance(),l,h):(void 0!==g.isVBModelReady?kn([g.isVBModelReady]):Oo(sw,1)).subscribe(y=>{y&&(g.isVideoEncoded?kn([!0]):Oo(OO,1)).subscribe(()=>{aw(pd.getInstance(),l,h)})})})()}stopPreview(){return F(function*(){Qr.getInstance().inProgress?Qr.getInstance().stopVirtualBackgroundSetting():pd.getInstance().stopVirtualBackgroundSetting()})()}updatePreview(l,h){return F(function*(){const g=Qr.getInstance().inProgress?Qr.getInstance():pd.getInstance();if(l){const y=yield ig(l,h);y&&(g.updateVirtualBackgroundImage(y),y!==mm&&setTimeout(()=>{xA(y)},0))}else g.updateVirtualBackgroundImage(null)})()}}return i.mediaOption=void 0,i})();const{InitSuccessVideo:dS,InitSuccessAudio:Cy,InitSuccessSharing:lw,InitFailedVideo:uw,InitFailedAudio:dw,InitFailedSharing:q_}=Cn,vc=gc(Qr.getInstance()),sU=nd.getInstance().makeLogger(["Media Agent"]),kO=[],bN=ca({epics0:(i,u)=>i.pipe(Wn(`${Ko}`),wi(()=>{const{meeting:{isMeetingReset:l}}=u.value;return i.pipe(Wn(`${qu}`),ki(1),hf(h=>{var g;const{logger:y,media:{mediaConstraints:C,assetsPath:w},meeting:{zlkJwtToken:D,cv:N}}=u.value,{payload:{disableAqos:L,disableVqos:V}}=h,G=null!=y&&null!==(g=y.options)&&void 0!==g&&g.enable?nd.getInstance().makeLogger(["MEDIA SDK"]):void 0;return function(W){const{media:{patchedMediaSDKStatus:X}}=W;return X===rs.Loading?oc(Oo(us,1)):Promise.resolve()}(u.value).then(()=>{const W=[];let X=!V;const ne=!L;return D&&l1(N,"1.3.0")<0&&(X=!1),W.push(Ls({audioQos:ne,videoQos:X})),vc.init(G),W.push(fi(!0)),l&&void 0!==C&&void 0!==w&&W.push(zi()),W})}))})),epics1:(i,u)=>i.pipe(Wn(`${Ko}`),Ut(l=>{const{payload:{mediaSDKPath:h}}=l,{media:{skipJsMedia:g,patchJsMedia:y,assetsPath:C},meeting:{isMeetingReset:w}}=u.value;return!g&&["dmogdx0jrul3u.cloudfront.net","source.zoom.us","jssdk.zoomus.cn"].some(D=>new RegExp(`^https://${D}`).test(C??""))&&!!y&&!!h&&!w}),wi(l=>{const{payload:{mediaSDKPath:h}}=l,g=d1(h);return kn(new Promise((y,C)=>{const w=`${g}/${Ws}`;"JsMediaSDK_Instance"in window&&(window.JsMediaSDK_Instance_backup=window.JsMediaSDK_Instance,delete window.JsMediaSDK_Instance),cI(w,()=>{"JsMediaSDK_Instance_backup"in window&&delete window.JsMediaSDK_Instance_backup,sU.info(`patched media sdk url:${w}`),y("")},()=>{"JsMediaSDK_Instance_backup"in window&&(window.JsMediaSDK_Instance=window.JsMediaSDK_Instance_backup,delete window.JsMediaSDK_Instance_backup),sU.error(`cannot load patched media sdk :${w}`),C()})})).pipe(hn(()=>(Ze(us),kn([Gs(rs.Done),Fg(g)]))),Np(()=>(Ze(us),kn([Gs(rs.Done)]))),Fd(Gs(rs.Loading)))})),epics2:(i,u)=>y0(i,u).pipe(Jn(()=>{const{media:{assetsPath:l,mediaConstraints:h,fileWithVersion:g,enforceMultipleVideos:y,enforceVirtualBackground:C,isEnableDecoderInWorklet:w},meeting:{isAudioBridgeEnabled:D}}=u.value;if(vc.notifySDKMeetingReady(),l&&h){const N={enableDecoderInWorklet:w,enableAudioBridge:D&&qo()};Object.assign(N,h2(l,y,C)),vc.setAssetsAndConstraint(l,h,g,N)}T_(u).pipe(Nn(u)).subscribe(N=>{let[L,V]=N;const{meeting:{svcUrl:G,meetingNumber:W,conId:X,e2eEncrypt:ne,userId:me,isWebinar:_e,enableWebtransport:Re,webtransportPort:Ne},media:{enableAudioQos:et,enableVideoQos:ht}}=V;L&&vc.connect({svcUrl:G,meetingNumber:W,conId:X,e2eEncrypt:ne,isViewOnly:Ds(L.userRole),currentUserId:me,isWebinar:_e,enableAudioQos:et,enableVideoQos:ht,enableWebtransport:Re,webtransportPort:Ne})})}),wi(()=>Bd(l=>vc.registerCallback(l),l=>vc.unregisterCallback(l),(l,h)=>({type:l,data:h})).pipe(Bn(l=>sc(l))))),epics3:i=>Rr(i,[dS,Cy,lw,uw,dw,q_]).pipe(Eb(u=>{const{payload:{type:l,data:h}}=u;if(l===Cy||l===dw){if(h===ns.EncodeSuccess)return Ze(G1),Ii(ac("success"));if(h===ns.DecodeSuccess)return Ze(W1),Ii(Wu("success"));if(h===ns.EncodeFailed)return Ze(IM),Ii(ac("failed"));if(h===ns.DecodeFailed)return Ze(K1),Ii(Wu("failed"))}else if(l===dS||l===uw){if(h===ns.EncodeSuccess)return Ze(Zp),Ii(tl("success"));if(h===ns.DecodeSuccess)return Ze(SM),Ii(ba("success"));if(h===ns.EncodeFailed)return Ze(al),Ii(tl("failed"));if(h===ns.DecodeFailed)return Ze(cl),Ii(ba("failed"))}else if(l===lw||l===q_){if(h===ns.EncodeSuccess)return Ze(CM),Ii(gr("success"));if(h===ns.DecodeSuccess)return Ze(_C),Ii(ui("success"));if(h===ns.EncodeFailed)return Ze(Em),Ii(gr("failed"));if(h===ns.DecodeFailed)return Ze(z1),Ii(ui("failed"));if(l===lw&&void 0===h)return Ze(_C),Ii(ui("success"))}})),epics4:(i,u)=>Rr(i,[dS,Cy]).pipe(wi(()=>"object"==typeof navigator.mediaDevices?un(BA(),un(Rr(i,Cn.StartVideoCaptureSuccess),ur(navigator.mediaDevices,"devicechange"),Rr(i,Cn.UserGrantCaptureAudio).pipe(Ut(()=>!u.value.audio.isUserGrantCaptureAudio))).pipe(hn(()=>BA().pipe(Jn(()=>{setTimeout(()=>{Ze(wM)},50)}))))).pipe(Nn(u),hn(l=>{let[h,g]=l;const y=[wC(h.microphones),UM(h.speakers),rb(h.cameras)];if(g.audio){const{audio:{activeMicrophone:D,activeSpeaker:N,microphoneDevicesList:L,speakerDevicesList:V}}=g,G=Yn(g),{microphones:W,speakers:X}=h,ne=L.filter(_e=>-1===W.findIndex(Re=>Re.deviceId===_e.deviceId)),me=V.filter(_e=>-1===X.findIndex(Re=>Re.deviceId===_e.deviceId));if(ne.length>0){if(iD(ne[0],D,L)){const _e=Ib(W);vc.changeMicrophone("default",_e?.label,!(null==G||!G.muted)),y.push(YE("default"))}}else if("default"===D){const _e=Ib(L),Re=Ib(W);L.length>0&&_e?.label!==Re?.label&&vc.changeMicrophone("default",Re?.label,!(null==G||!G.muted))}var C,w;me.length>0?iD(me[0],N,V)&&(vc.changeSpeaker("default"),y.push(gu("default"))):"default"===N&&V.length>0&&(null===(C=Ib(V))||void 0===C?void 0:C.label)!==(null===(w=Ib(X))||void 0===w?void 0:w.label)&&vc.changeSpeaker("default")}return kn(y)})):Ue)),epics5:(i,u)=>la(i,So).pipe(Jn(l=>{const{type:h,payload:{body:g}}=l,y=h===`${Dl}`;if(g.add){const C=g.add.map(w=>({userid:w.id,sn:w.zoomID&&su(w.zoomID)}));if(!y){const{meeting:{gcmSessinKey:w}}=u.value;vc.sendUserNodeList(C,w)}vc.updateUserMediaSN({added:C,isFromMainSession:y,iVType:zs.SHARING_DECODE}),y&&vc.updateUserMediaSN({added:C,isFromMainSession:y,iVType:zs.AUDIO_DECODE})}if(g.remove){if(!y){const{meeting:{gcmSessinKey:C}}=u.value;vc.sendUserNodeList(g.remove.map(w=>({userid:w.id,bremove:!0})),C)}vc.updateUserMediaSN({removed:g.remove.map(C=>C.id),isFromMainSession:y,iVType:zs.SHARING_DECODE}),y&&vc.updateUserMediaSN({removed:g.remove.map(C=>C.id),isFromMainSession:y,iVType:zs.AUDIO_DECODE})}}),Ar(Ue)),epics6:i=>Rr(i,Cn.AesGcmIvResponse).pipe(Jn(u=>{const{payload:{data:{workerType:l,iv:h}}}=u,g=Yr.get(ro.WebclientIVState);if(g){const y={...g,[l]:h};Yr.set(ro.WebclientIVState,y,Mi.SessionStorage)}}),Ar(Ue)),epics7:i=>i.pipe(Wn(`${el}`),Ut(u=>[Qp,$B,V0].includes(u.payload.evt)),Bn(u=>{const{payload:{evt:l,body:{encryptKey:h,additionalType:g}}}=u;return ru({type:l===Qp?"audio":l===$B?"video":"sharing",encryptKey:h,additionalType:g})})),epics8:i=>i.pipe(Wn(`${vs}`),Jn(u=>{const{payload:l}=u;cw.setMediaOption({assetsPath:l.assetsPath,enforceMultipleVideos:l.enforceMultipleVideos,enforceVirtualBackground:l.enforceVirtualBackground})}),Ar(Ue)),epics9:i=>i.pipe(Wn(`${Nv}`,`${p1}`),Jn(()=>{pd.getInstance().inProgress&&(pd.getInstance().disconnect(),pd.getInstance().destroy())}),Ar(Ue)),epics10:i=>i.pipe(Wn(`${Nv}`,`${p1}`),wi(()=>"permissions"in navigator?["microphone","camera"].map(u=>{navigator.permissions.query({name:u}).then(l=>{const h=()=>{Ze(vC,{name:u,state:l.state})};h(),l.addEventListener("change",h),kO.push(()=>{l.removeEventListener("change",h)})}).catch(()=>{})}):Ue),Ar(Ue)),epics11:i=>i.pipe(Wn(`${m1}`),Ut(u=>u.payload===Do.Closed),Jn(()=>{kO.length>0&&(kO.forEach(u=>u()),kO.length=0)}),Ar(Ue))}),SN={meeting:B2,socket:YD,participants:W2,media:GF},aU=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ti;function PO(i){return function(u){for(var l=Object.keys(u),h={},g=0;g<l.length;g++){var y=l[g];"function"==typeof u[y]&&(h[y]=u[y])}var C,D,w=Object.keys(h);try{D=h,Object.keys(D).forEach(function(N){var L=D[N];if(void 0===L(void 0,{type:yr.INIT}))throw new Error(Dc(12));if(void 0===L(void 0,{type:yr.PROBE_UNKNOWN_ACTION()}))throw new Error(Dc(13))})}catch(D){C=D}return function(D,N){if(void 0===D&&(D={}),C)throw C;for(var L=!1,V={},G=0;G<w.length;G++){var W=w[G],ne=D[W],me=(0,h[W])(ne,N);if(void 0===me)throw new Error(Dc(14));V[W]=me,L=L||me!==ne}return(L=L||w.length!==Object.keys(D).length)?V:D}}({...SN,...i})}function En(i,u,l,h,g){var y={};return Object.keys(h).forEach(function(C){y[C]=h[C]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=l.slice().reverse().reduce(function(C,w){return w(i,u,C)||C},y),g&&void 0!==y.initializer&&(y.value=y.initializer?y.initializer.call(g):void 0,y.initializer=void 0),void 0===y.initializer&&(Object.defineProperty(i,u,y),y=null),y}const Vo=Symbol("store"),tr=Symbol("getState"),Vs=Symbol("dispatch"),Iy=Symbol("additionFeatures"),mn=Symbol("mediaContext");function An(i,u,l){const h=l.value;l.value=function(){const g=this[Vo];if(g){const{meeting:{isOnHold:D,isMeetingReset:N,meetingStatus:L}}=g.getState();if(L!==Do.Joined)return Promise.reject({type:ym,reason:"closed"});if(N)return Promise.reject({type:ym,reason:"reconnecting"});if(D)return Promise.reject({type:ym,reason:"on hold"})}for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];return h.apply(this,C)}}function Al(i,u,l){const h=l.value;l.value=function(){const g=this[Vo];if(g){const D=g.getState();if(!fu(D))return Promise.reject({type:Gi,reason:"only host or co-host can do the operation"})}for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];return h.apply(this,C)}}function Pa(i,u,l){const h=l.value;l.value=function(){const g=this[Vo];if(g){const D=g.getState();if(!dF(D))return Promise.reject({type:Gi,reason:"only host can do the operation"})}for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];return h.apply(this,C)}}function er(i){return function(u,l,h){const g=h.value;h.value=function(){const y=this[Vo];if(y&&void 0===y.getState()[i])return Promise.reject({type:nn,reason:`Module:${i} is not enabled`});for(var C=arguments.length,w=new Array(C),D=0;D<C;D++)w[D]=arguments[D];return g.apply(this,w)}}}function wy(i){return function(u,l,h){const g=h.value;h.value=function(){const y=this[Vo];if(y){const{meeting:{meetingOptions:N}}=y.getState();if(!0===N[i])return Promise.reject({type:"OPERATION_LOCKED",reason:`${i} is locked`})}for(var C=arguments.length,w=new Array(C),D=0;D<C;D++)w[D]=arguments[D];return g.apply(this,w)}}}let sg=function(i){return i.Self="Self",i.Other="Other",i.Client="Client",i.Phone="Phone",i.Attendee="Attendee",i}({});function MO(i){return function(u,l,h){const g=h.value;h.value=function(y){const C=this[Vo];if(C){const V=C.getState(),G=Array.isArray(i)?i:[i];let W=Uo(V).find(X=>X.userId===y);if(G.findIndex(X=>X===sg.Attendee)>-1&&(W=p_(V).find(X=>X.userId===y)),!W)return Promise.reject({type:Pr,reason:"no matching user"});{const{meeting:{userId:X}}=C.getState();for(let ne=0;ne<G.length;ne++){const me=G[ne];if(me===sg.Other&&y===X)return Promise.reject({type:nn,reason:"operation is not applicable to self"});if(me===sg.Self&&y!==X)return Promise.reject({type:nn,reason:"operation is only applicable to self "});if(me===sg.Client&&lA(W.userType)||me===sg.Phone&&!lA(W.userType))return Promise.reject({types:nn,reason:"improper target client"})}}}for(var w=arguments.length,D=new Array(w>1?w-1:0),N=1;N<w;N++)D[N-1]=arguments[N];const L=[y,...D];return g.apply(this,L)}}}const cU=nd.getInstance();function hp(i,u){return function(l,h,g){const y=g.value;g.value=function(){for(var C=arguments.length,w=new Array(C),D=0;D<C;D++)w[D]=arguments[D];if(cU.checkLaplace())try{var N;const L=cU.makeLogger([i]),V=null===(N=u?w.map((G,W)=>u.includes(W+1)?fl(G):G):w)||void 0===N?void 0:N.map(G=>{return"object"==typeof(W=G)&&null!==W?W instanceof HTMLElement?I_(W):Object.keys(W).reduce((X,ne)=>({...X,[`${ne}`]:W[ne]instanceof HTMLElement?I_(W[ne]):W[ne]}),{}):W;var W});return L.info(`${h},params:${JSON.stringify(V)}`),y.apply(this,w).then(G=>(L.info(`${h} success`),G)).catch(G=>{let W=`${h} failed,`;return"object"==typeof G&&(W=`${W},${G.type?`type:${G.type},`:""}${G.reason?`reason:${G.reason}`:""}`),L.error(W),Promise.reject(G)})}catch{}return y.apply(this,w)}}}function CN(i,u,l){return function(h,g,y){const C=y.value;y.value=function(){for(var w,D=arguments.length,N=new Array(D),L=0;L<D;L++)N[L]=arguments[L];const V=N[u];return V instanceof i&&(!l||l.every(G=>!!V[G]))?C.apply(this,N):Promise.reject({type:Pr,reason:`Expected to accept ${i?.name}, but actual it is ${"object"==typeof V&&null!==V?null===(w=Object.getPrototypeOf(V))||void 0===w?void 0:w.constructor.name:V}`})}}}class vh{constructor(u){this[Vo]=void 0,this[Vs]=void 0,this[tr]=void 0,this[Iy]=void 0,this[Vo]=u,this[Vs]=u.dispatch,this[tr]=u.getState}}const Ty=["userId","displayName","audio","isHost","avatar","bRaiseHand","bHold","bVideoOn","sharerOn","sharerPause","feedback","bLocalRecord","strPronoun","sdkKey","audioConnectionStatus","caps","bAllowISORecord","bVideoConnect","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","bShareToBORooms",{from:"bInFailover",to:"isInFailover"},{from:"userGUID",to:"userGuid"},{from:"bGuest",to:"isGuest"},{from:"sharerPause",to:"sharePause"},{from:"bCoHost",to:i=>({isCoHost:!!i})},{from:"muted",to:(i,u)=>({muted:null!=u&&u.isSpeakerOnly||""===u?.audio?void 0:i})},{from:"userType",to:(i,u)=>{const l=lA(i),h={isPhoneUser:l};return l&&null!=u&&u.phoneNumber&&Object.assign(h,{phoneNumber:u.phoneNumber}),h}}];function pS(i){return Ty.reduce((u,l)=>({...u,...function(y,C,w){if("string"==typeof y)return{[`${y}`]:C};if("object"==typeof y&&void 0!==y.from){const{to:D}=y;return"string"==typeof D?{[`${D}`]:C}:D(C,w)}}(l,i["string"==typeof l?l:l.from],i)}),{})}function lU(){var i;const{isSupportAudioWorklet:u,isSupportEssentialAudioAndVideoAbility:l}=dr;return{audio:l&&u||qo(),video:l&&void 0!==navigator.mediaDevices&&void 0!==navigator.mediaCapabilities,screen:l&&"function"==typeof(null===(i=navigator.mediaDevices)||void 0===i?void 0:i.getDisplayMedia)}}var uU,dU,pU,ga;const fp=kr.createAgent();let Z4=(uU=MO(sg.Other),dU=MO(sg.Other),pU=MO(sg.Other),En((ga=class extends vh{constructor(i){super(i),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(i,u,l){return this.useSDK=!0,this.init(i,u,l)}init(i,u,l){const{audio:h,video:g}=lU();if(!h||!g)return console.error("https://developers.zoom.us/docs/video-sdk/web/browser-support"),Promise.reject({type:nn,reason:"Please update to the latest Chrome, Edge, Safari, or Firefox, as your current browser doesn't support audio/video. Retry after the upgrade."});const{[Vs]:y,[Vo]:C}=this;let w=Bm;const D=l?.fileWithVersion||!1;let N="en-US",L=`${Bm}/${Ws}`;if(l){const{dependentAssets:V,additionalFeatures:G,constraints:W,language:X,webEndpoint:ne}=l;X&&(N=X),ne&&(w_=function(_e,Re){let Ne=_e;/^https?:\/\//.test(Ne)||(Ne=`https://${_e}`);try{const et=new URL(Ne);if(!Re)return et.href;if(Re.hostname)return et.hostname;if(Re.path)return et.pathname}catch{return""}return""}(ne,{hostname:!0})),V===Wh.CDN||V===lI?(w=lI,L=`${lI}/${Ws}`):V===Wh.Global||V===Bm?(w=Bm,L=`${Bm}/${Ws}`):V===Wh.CN||V===LA?(w=LA,L=`${LA}/${Ws}`):V&&/^https?:\/\//.test(V)&&(w=d1(V),L=D?`${w}/1504_js_media.min.js`:`${w}/${Ws}`),G&&Array.isArray(G)&&G.forEach(me=>{if(this[Iy][me]&&void 0===C.getState()[me]){const{epic:_e,reducer:Re,Client:Ne}=this[Iy][me];C.injectReducer(me,Re),C.injectEpic(_e);const et=new Ne(C);this.modules.set(me,et)}}),null!=W&&W.audio&&void 0===C.getState().audio&&(C.injectReducer("audio",FI),C.injectEpic(WF)),null!=W&&W.video&&void 0===C.getState().video&&(C.injectReducer("video",$4),C.injectEpic(EN)),null!=W&&W.screen&&void 0===C.getState().share&&(C.injectReducer("share",BF),C.injectEpic(UF))}return y(Qg({apiKey:i,signature:u,language:N,useSDK:this.useSDK})),y(vs({mediaConstraints:l&&l.constraints||{},assetsPath:w,fileWithVersion:D,enforceMultipleVideos:l?.enforceMultipleVideos,enforceVirtualBackground:l?.enforceVirtualBackground,skipJsMedia:l?.skipJsMedia,patchJsMedia:l?.patchJsMedia})),void 0!==l?.stayAwake&&y(Hg(l.stayAwake)),void 0!==l?.quicklyLeaveMeeting&&y(v1(l.quicklyLeaveMeeting)),new Promise((V,G)=>{null!=l&&l.skipJsMedia?V(""):cI(L,()=>{V("")},()=>{G({type:Pr,reason:"dependent assets are not accessible"})})})}on(i,u){((l,h)=>{const g=sA[l];if(g){const y=a_.get(l);if(y)y.push(h),a_.set(l,y);else{a_.set(l,[h]);const w=un(...g.map(D=>{const{event:N,payload:L}=D;return ur(Di,N).pipe(Bn(V=>L(V)),_o(fo))})).subscribe(D=>{const N=a_.get(l);N&&N.forEach(L=>{L(D)})});eR.push(w)}}})(i,u)}off(i,u){((l,h)=>{if(sA[l]){const g=a_.get(l);if(Array.isArray(g)){const y=g.filter(C=>C!==h);a_.set(l,y)}}})(i,u)}getFeatureModule(i){return this.modules.get(i)}leave(){const{[tr]:i,[Vs]:u}=this;return"connected"===i().socket.zoomSocketStatus?u(RE()):u(Rn()),oc(sa(500).pipe(Ea("")))}end(){const{[tr]:i,[Vs]:u}=this;return"connected"===i().socket.zoomSocketStatus?(u(Ri()),oc(sa(500).pipe(Jn(()=>{tR()}),Ea("")))):Promise.resolve("")}changeName(i,u){const l=this[Vo].getState(),{meeting:{bAllowAttendeeRename:h}}=l,g=Yn(l),y=Ds(g.userRole),C=fu(l);if(y)return Promise.reject({type:Gi});if(u&&u!==g?.userId){if(C){const{participants:{attendeesList:w}}=l,D=w.find(N=>N.userId===u);if(D)return fp.rename(u,As(i),As(D.displayName)),Da(u,N=>N.displayName===i);{const N=p_(l).find(L=>L.userId===u);if(N){const L=Fb.getInstance();return fp.rename(N.userId,As(i),As(N.displayName)),L.rename(N.jid,i),Lr(lm,V=>{const G=V.find(W=>W.jid===N.jid);return G&&G.displayName===i})}return Promise.reject({type:Pr,reason:"no matching user"})}}return Promise.reject({type:Gi})}return i===g.displayName?Promise.resolve():C||h?(fp.rename(g.userId,As(i),As(g.displayName)),Lr(wa,w=>w.displayName===i)):Promise.reject({type:Gi,reason:"host disallow rename themselves"})}makeHost(i){return fp.assignHost(i,!1),Da(i,u=>!0===u.isHost)}makeCoHost(i){const u=this[Vo].getState();return!0===Uo(u).find(h=>h.userId===i)?.bCoHost?Promise.reject({type:Pr,reason:`user:[${i}] is already co-host `}):(fp.assignHost(i,!0),Da(i,h=>!0===h.bCoHost))}revokeCoHost(i){const u=this[Vo].getState();return!1===Uo(u).find(h=>h.userId===i)?.bCoHost?Promise.reject({type:Pr,reason:`user:[${i}] is not a co-host`}):(fp.revokeCoHost(i),Da(i,h=>!1===h.bCoHost))}reclaimHost(){const i=this[tr](),{meeting:{isOriginHost:u}}=i,l=Yn(i);return null!=l&&l.isHost?Promise.resolve(""):u?(fp.reclaimHost(l.userId,!1),Lr(wa,h=>!0===h.isHost)):Promise.reject({type:Gi,reason:"You are not the origin host"})}isHost(){const i=this[Vo].getState(),u=Yn(i);return!!u&&u.isHost}isCoHost(){const i=this[Vo].getState(),u=Yn(i);return!!u&&!!u.bCoHost}isOriginHost(){const{meeting:{isOriginHost:i}}=this[tr]();return i}getCurrentUserInfo(){const i=this[Vo].getState(),u=Yn(i);if(u){const l=pS(u);if(i.meeting.isWebinar&&Ds(u.userRole)){const{audio:h}=i,g=h?.isAllowToTalk;Object.assign(l,{isAllowToTalk:g})}return l}return null}getParticipantsList(){const i=this[Vo].getState(),{meeting:{meetingStatus:u}}=i,l=Yn(i);return u===Do.Joined&&l&&!l.bHold?Uo(i).map(h=>pS(h)):[]}getAssistantsList(){const i=this[Vo].getState(),{meeting:{meetingStatus:u}}=i,l=Yn(i);return u===Do.Joined&&l?xM(i).map(h=>({userId:h.userId,displayName:h.displayName,isNewAst:!0})):[]}getMeetingHost(){var i;const u=this[tr]();let l=np(u);return l||(null===(i=u.breakoutRoom)||void 0===i?void 0:i.currentRoom.status)!==fr.InRoom||(l=u.breakoutRoom.mainSessionAttendeeList.find(h=>h.isHost)),void 0!==l?pS(l):null}getMeetingInfo(){const{meeting:{meetingStatus:i,isOnHold:u,meetingNumber:l,passWord:h,userName:g,userEmail:y,meetingTopic:C,meetingOptions:w,encType:D,region:N,network:L,topic:V,zlkJwtToken:G,userId:W,lang:X,inviteEmail:ne,meetingId:me,participantID:_e,h323Password:Re,recordingDisclaimer:Ne,recordingDisclaimerForRecorder:et,wrInfo:ht,meetingInfo:ze,isNewJoinFlow:Qe}}=this[tr](),wt=i===Do.Joined&&!u;if(G)return{topic:V,password:h,userName:g,isInMeeting:wt,userId:W,meetingId:me};{let Xt="";return 0===D?Xt="None":1===D?Xt="AES ECB":2===D&&(Xt="AES GCM"),{meetingNumber:l,password:h,userName:g,userEmail:y,inviteEmail:ne,meetingTopic:C,encryptionType:Xt,region:N,network:L,isInMeeting:wt,userId:W,lang:X,webEndpoint:w_,meetingId:me,participantId:_e,telPwd:Re,recordingInfo:{recordingDisclaimer:Ne,recordingDisclaimerForRecorder:et,isUserEnableRecordingReminder:w?.isUserEnableRecordingReminder},wrInfo:Object.assign({},ht,{isNew:Qe}),scheduleInfo:ze}}}}).prototype,"end",[Pa,An],Object.getOwnPropertyDescriptor(ga.prototype,"end"),ga.prototype),En(ga.prototype,"changeName",[An],Object.getOwnPropertyDescriptor(ga.prototype,"changeName"),ga.prototype),En(ga.prototype,"makeHost",[uU,Pa,An],Object.getOwnPropertyDescriptor(ga.prototype,"makeHost"),ga.prototype),En(ga.prototype,"makeCoHost",[dU,Pa,An],Object.getOwnPropertyDescriptor(ga.prototype,"makeCoHost"),ga.prototype),En(ga.prototype,"revokeCoHost",[pU,Pa,An],Object.getOwnPropertyDescriptor(ga.prototype,"revokeCoHost"),ga.prototype),En(ga.prototype,"reclaimHost",[An],Object.getOwnPropertyDescriptor(ga.prototype,"reclaimHost"),ga.prototype),ga);const ej=kr.createAgent(),tj=Fb.getInstance(),hU=(i,u,l)=>{const h=u?.userId;if(null==i||!i.zoomID||null==u||!u.displayName||h===i.userId)return{type:Pr,reason:"invalid target user"};const{chat:{chatPrivilege:g,panelistChatPrivilege:y},meeting:{isWebinar:C}}=l,w=fu(l),D=u.isHost||u.bCoHost;let N=!1;if(!w){if(C)if(Ds(i.userRole))(g===Co.NoAttendee||g===Co.AllPanelist&&h!==Hi.Panelist||g===Co.All&&h!==Hi.All&&h!==Hi.Panelist)&&(N=!0);else{const L=Ds(u?.userRole);(y===kc.Invalid||y===kc.AllPanelist&&(L||h===Hi.All))&&(N=!0)}else(g===Co.NoAttendee||g===Co.Host&&!D||h===Hi.SilentModeUsers||g===Co.EveryonePublicly&&h!==Hi.All&&!D)&&(N=!0);if(N)return{type:Gi,reason:"Insufficient chat privilege"}}return null};function fU(i,u){if(u===Hi.All)return Uv;if(u===Hi.Panelist)return zg;if(u===Hi.SilentModeUsers)return JB;{const{meeting:{isWebinar:l},participants:{xmppAttendeeList:h,attendeesList:g}}=i;return l?g.find(y=>y.userId===u)||h.find(y=>y.userId===u):g.find(y=>y.userId===u)}}function Ah(i,u,l){if(null!=l&&l.host)return[np(i),...lR(i)].filter(h=>h?.userId!==u).map(h=>({userId:h?.userId,displayName:h?.displayName,isHost:h?.isHost,isCoHost:h?.bCoHost}));{let h=[np(i),...lR(i),...i.participants.attendeesList.filter(g=>!(g.bCoHost||g.isHost||g.bHold))];if(null!=l&&l.includeAttendee){const g=p_(i).filter(y=>!lA(y.userType));h=[...h,...g]}return h.filter(g=>void 0!==g&&g.userId!==u).map(g=>({userId:g?.userId,displayName:g?.displayName,isHost:g?.isHost,isCoHost:g?.bCoHost}))}}function wu(i){const{text:u,destId:l,sn:h,attendeeId:g}=i;return Ia.beginEncrypt({text:u,type:Ga.RWG_CHAT}).then(y=>{ej.chat(y,l,h,g)})}function pw(i,u){const{chat:{chatHistory:l}}=u;return l.find(h=>{var g,y;return(null===(g=h.file)||void 0===g||null===(y=g.upload)||void 0===y?void 0:y.uniqueId)===i})}function IN(i,u){const{meeting:{isWebinar:l},participants:{attendeesList:h}}=u,{destNodeID:g,senderName:y,attendeeNodeID:C}=i,w=h.find(G=>G.userId===g),D=i.sn?i.sn:w?.zoomID,N=y?Bs(y):w?.displayName;let L,V="";if(C===Hi.SilentModeUsers)return{sender:{name:"Host",userId:g},receiver:{name:"Everyone (in Waiting Room)",userId:C},timestamp:(new Date).getTime()};if(C===Hi.All)V=l?"All panelists and attendees":"Everyone";else if(C===Hi.Panelist)V="All panelists";else{if(l){const G=p_(u).find(W=>W.userId===C);G&&(V=G.displayName)}if(!V){const G=h.find(W=>W.userId===C);G&&(V=G.displayName,L=G.userGUID)}}return{sn:D,sender:{name:N,userId:g,userGuid:w?.userGUID,avatar:w?.avatar},receiver:{name:V,userId:C,userGuid:L},timestamp:(new Date).getTime()}}function NO(i){var u;const[l]=i.split(".").reverse();return null!==(u=hM[l])&&void 0!==u?u:""}function Ei(i,u){const l=[];for(let h=i.length-1;h>=0;h--){const g=i[h];if(!g.file&&(!g.id&&g.sender.userId===u.userId&&[Hi.All,Hi.Panelist,Hi.IndividualCcPanelist,u.destNodeID].includes(g.receiver.userId)&&l.unshift(g),g.id))break}return l.length>0?l[0]:null}const hw=nd.getInstance(),wN=hw.makeLogger(["File Transfer"]);function TN(i,u,l){const{name:h,size:g}=i,{meeting:{reportDomain:y,svcUrl:C,conId:w}}=l;return`https://${y}${u}?${new URLSearchParams({filename:h,filesize:g,rwg:C,cid:w}).toString()}`}function xO(i,u){return u.fileObj?`${i}/zoomfile/download?objkey=${u.fileObj}`:`${i}/file/${u.fileID}`}function Y_(i,u){return{fileName:i.name,fileSize:i.size,receiverId:u?.userId,receiverGuid:u?.userGuid}}function ag(i,u,l){hw.report(`${i}. file name:${fl(u.name)},file size:${u.size}, ${"type"in u?`file type:${u.type}`:""}, error:${l.name};${l.message}`,["File Transfer"])}function fw(i){var u,l,h;return{id:i.id,fileName:null===(u=i.file)||void 0===u?void 0:u.name,fileSize:null===(l=i.file)||void 0===l?void 0:l.size,fileUrl:null===(h=i.file)||void 0===h?void 0:h.fileUrl,senderId:i.sender.userId,senderGuid:i.sender.userGuid}}function hS(i,u,l){return new Promise((h,g)=>{const y=new FileReader;y.readAsArrayBuffer(i.slice(u,l)),y.onload=C=>{var w;return h(null===(w=C.target)||void 0===w?void 0:w.result)},y.onerror=C=>g(C)})}function Tu(i,u){return Ry.apply(this,arguments)}function Ry(){return Ry=F(function*(i,u){let[l,h]=[i.size,0];null!=u&&(l=Math.min(Ts.ChunkSize,i.size-u),h=u);const g=i.size-h<=Ts.ChunkSize,y=Math.ceil(l/Ts.EncodeBlockSize);try{return function(C){const w=C.reduce((L,V)=>L+V.byteLength,0),D=new Uint8Array(w);let N=0;for(const L of C)D.set(new Uint8Array(L),N),N+=L.byteLength;return D}(yield Promise.all(Array.from({length:g?Math.max(y-1,1):y},(C,w)=>({start:w*Ts.EncodeBlockSize+h,end:(g&&w===y-2?w+2:w+1)*Ts.EncodeBlockSize+h})).map(function(){var C=F(function*(w){let{start:D,end:N}=w;try{const L=yield hS(i,D,N);return L?yield Ia.beginEncrypt({text:new Uint8Array(L),type:Ga.CHAT_FILE}):Promise.reject(null)}catch(L){return ag(`encrypt file buffer error. offset:${u},`,i,L),Promise.reject(L)}});return function(w){return C.apply(this,arguments)}}())))}catch(C){console.warn(C)}return null}),Ry.apply(this,arguments)}function mw(i,u,l,h){return h.pipe(Wn(`${db}`,`${nu}`),Ut(g=>{if(g.type===`${nu}`)return!0;const{payload:{uniqueId:y,fileName:C,userId:w}}=g;return u===y&&i.name===C&&l.userId===w}),Jn(()=>{wN.info(`Cancel file upload. file name:${fl(i.name)},file size:${i.size},receiver id:${l.userId}`),Ze($g,{...Y_(i,l),progress:0,status:pa.Cancel})}))}function gw(i,u){if(null!=i&&i.file){const{file:l,receiver:h}=i,{upload:{chunkIndex:g,totalChunks:y,uniqueId:C}}=l;return Ze($g,{...Y_(u,h),progress:Math.floor((g??0)/(y??1)*100),status:pa.Fail,retryToken:C}),kn([Us({upload:{status:pa.Fail,progress:0,uniqueId:C}}),YC({uniqueId:C,file:u})])}return Ue}function LO(i,u){return Ze($g,{...Y_(i),progress:0,status:pa.Fail}),Ii(Us({upload:{status:pa.Fail,progress:0,uniqueId:u}}))}const RN=(()=>{const i=new tD;return u=>F(function*(){yield i.acquire(),u(...arguments),setTimeout(()=>{i.release()},3e3)})})(),DN=function(i){const u=["chatFileTransfer"];return new Proxy(i,{get:(l,h)=>"string"==typeof h&&u.includes(h)?function(){return RN(l[h].bind(l))(...arguments)}:Reflect.get(l,h)})}(kr.createAgent()),ON={chatHistory:[],chatPrivilege:Co.All,panelistChatPrivilege:kc.AllPanelist,isAllowAttendeeChat:!0,isFileTransferEnable:!0,isEnableFileTransferEncrypted:!0,fileTransferFileType:[],fileDownloadPromptIgnoreList:[],fileTransferSizeLimit:0,fileServerDomain:"",failedFileTransfer:{}},BO=li({[`${uf}`]:ct((i,u)=>{let{payload:l}=u;i.chatHistory.push(l)}),[`${MR}`]:ct((i,u)=>{let{payload:l}=u;i.chatPrivilege=l}),[`${Zu}`]:ct((i,u)=>{let{payload:l}=u;i.panelistChatPrivilege=l}),[`${ZM}`]:ct((i,u)=>{let{payload:l}=u;i.isAllowAttendeeChat=l}),[`${qC}`]:ct((i,u)=>{let{payload:l}=u;const{destNodeID:h,msgID:g,userId:y}=l,C=Ei(i.chatHistory,{userId:y,destNodeID:h});C&&Object.assign(C,{id:g})}),[`${ub}`]:ct((i,u)=>{let{payload:l}=u;const{msgId:h}=l,g=i.chatHistory.findIndex(y=>y.id===h);g>=0&&i.chatHistory.splice(g,1)}),[`${e2}`]:ct((i,u)=>{let{payload:l}=u;Object.assign(i,l)}),[`${A_}`]:ct((i,u)=>{let{payload:l}=u;const{originFile:h,...g}=l;i.chatHistory.push(g)}),[`${Us}`]:ct((i,u)=>{let{payload:l}=u;const{upload:h,download:g,originFile:y,...C}=l;if(h){var w;const{uniqueId:D,...N}=h,L=i.chatHistory.find(V=>{var G;return V.file&&(null===(G=V.file.upload)||void 0===G?void 0:G.uniqueId)===D});null!=L&&null!==(w=L.file)&&void 0!==w&&w.upload&&(Object.assign(L.file.upload,{...N}),Object.assign(L.file,{...C}))}else if(g){const{id:D,fileUrl:N}=C,L=i.chatHistory.find(V=>{var G;return V.id===D&&(null===(G=V.file)||void 0===G?void 0:G.fileUrl)===N});null!=L&&L.file&&(L.file.download?Object.assign(L.file.download,{...g}):Object.assign(L.file,{download:g}))}}),[`${db}`]:ct((i,u)=>{let{payload:l}=u;const{uniqueId:h,fileName:g,userId:y}=l,C=i.chatHistory.find(D=>D.file&&D.file.name==g&&D.file.upload.uniqueId===h&&D.file.upload.status===pa.InProgress&&D.receiver.userId===y);var w;null!=C&&C.file&&Object.assign(null===(w=C.file)||void 0===w?void 0:w.upload,{status:pa.Cancel,progress:0})}),[`${YC}`]:ct((i,u)=>{let{payload:l}=u;const{uniqueId:h,file:g}=l;i.failedFileTransfer[`${h}`]||Object.assign(i.failedFileTransfer,{[`${h}`]:g})}),[`${CA}`]:ct((i,u)=>{let{payload:l}=u;const{uniqueId:h}=l;i.failedFileTransfer[`${h}`]&&delete i.failedFileTransfer[`${h}`]}),[`${IA}`]:ct((i,u)=>{let{payload:l}=u;const{fileID:h,msgID:g,senderId:y}=l,C=i.chatHistory.find(w=>{var D;return(null===(D=w.file)||void 0===D?void 0:D.fileID)===h&&w.sender.userId===y});C&&Object.assign(C,{id:g})}),[`${y_}`]:ct((i,u)=>{let{payload:l}=u;const{id:h,fileUrl:g}=l,y=i.chatHistory.find(w=>{var D,N;return w.id===h&&(null===(D=w.file)||void 0===D?void 0:D.fileUrl)===g&&(null===(N=w.file)||void 0===N?void 0:N.download.status)===lu.InProgress});var C;null!=y&&y.file&&Object.assign(null===(C=y.file)||void 0===C?void 0:C.download,{status:lu.Cancel,progress:0})}),[`${NR}`]:()=>({...ON})},ON),_w=Rs([i=>{let{breakoutRoom:{controlStatus:u}}=i;return u},i=>{let{breakoutRoom:{currentRoom:{status:u}}}=i;return u},i=>{let{breakoutRoom:{currentRoom:{boId:u}}}=i;return u}],(i,u,l)=>!(i!==Jr.InProgress&&i!==Jr.Closing||u!==fr.InRoom&&u!==fr.TimeUp||!l)),Ac=Rs([i=>{let{breakoutRoom:{rooms:u}}=i;return u},l_,i=>{let{meeting:{zoomId:u}}=i;return u},i=>{let{breakoutRoom:{mainSessionAttendeeList:u}}=i;return u},_w,i=>{let{breakoutRoom:{isHugeBO:u}}=i;return u}],(i,u,l,h,g,y)=>{const C=i.reduce((w,D)=>{const{attendeeGuidList:N}=D;return w.concat(N)},[]);return(g?h:u).filter(w=>{return!(w.bHold||w.isHost||w.zoomID===l||w.bid||C.includes(w.userGUID)||y&&(D=w.caps,4!=(4&D)));var D})});var vi;const fs=kr.createAgent();let Vi=(En((vi=class extends vh{send(i,u){if(!i)return Promise.reject({type:Pr,reason:"Text is empty"});const{[tr]:l,[Vs]:h}=this,g=l(),y=Yn(g),C=fU(g,u),w=hU(y,C,g);if(w)return Promise.reject(w);const{meeting:{isWebinar:D,encType:N}}=g,L=N===F0.AES_GCM;let V=Promise.resolve(),G=!1;const W=D&&Ds(C.userRole);return u===Hi.SilentModeUsers?fs.chat(As(i),u):D?W?8==(8&C.clientCap)?V=wu({text:i,destId:Hi.IndividualCcPanelist,sn:y?.zoomID,attendeeId:u}):(V=wu({text:i,destId:Hi.Panelist,sn:y?.zoomID,attendeeId:u}).then(()=>function(X){const{text:ne,jid:me,isGCMEnabled:_e}=X;return Ia.beginEncrypt({text:ne,type:Ga.XMPP_CHAT}).then(Re=>{tj.sendWebinarMseeage(Re,me,Hi.IndividualCcPanelist,_e)})}({text:i,jid:C.jid,isGCMEnabled:L})),G=!0):C&&(V=wu({text:i,destId:C.userId,sn:y?.zoomID})):V=wu({text:i,destId:C.userId,sn:y?.zoomID}),V.then(()=>{const X=function(ne,me,_e,Re){const Ne=(new Date).getTime(),et=performance.now();return{message:ne,sender:{name:me.displayName,userId:me.userId,userGuid:me.userGUID,avatar:me.avatar},receiver:{name:_e?.displayName,userId:Re?Hi.IndividualCcPanelist:_e?.userId,userGuid:_e?.userGUID},timestamp:Ne,highResTimeStampForIdentification:et}}(i,y,C,W);return h(uf(X)),G?(Ze(dm,X),X):new Promise((ne,me)=>{Oo(pm).pipe(XT(5e3),ts(_e=>X.highResTimeStampForIdentification!==_e.identification||!([_e.receiverId,Hi.All,Hi.Panelist].includes(u)||_e.receiverId===Hi.IndividualCcPanelist)),ki(1)).subscribe(_e=>{const{msgId:Re}=_e,{highResTimeStampForIdentification:Ne,...et}=X,ht={id:Re,...et,...W&&{receiver:{name:C?.displayName,userId:C?.userId}}};Ze(dm,ht),ne(ht)},()=>{me({type:gC})})})})}setPrivilege(i){const u=this[tr](),{meeting:{isWebinar:l},chat:{chatPrivilege:h},breakoutRoom:g}=u;return h===i?Promise.resolve(""):g?.controlStatus===Jr.InProgress&&_w(u)?Promise.reject({type:nn,reason:"Cannot update chat privilege in a subsession"}):!l&&!NE.includes(i)||l&&!A1.includes(i)?Promise.reject({type:Pr,reason:"invalid privilege value of parameter"}):(fs.setChatPriviledge(i),Lr(zh,y=>y.chatPrivilege===i))}setPanelistPrivilege(i){const u=this[tr](),{chat:{panelistChatPrivilege:l}}=u,h=y1[i];return l===h?Promise.resolve(""):Object.values(Fv).includes(i)?(fs.setPanelistChatPrivilege(i),Lr(zh,g=>g.panelistChatPrivilege===h)):Promise.reject({type:Pr,reason:"Panelist privilege value is invalid"})}deleteMessage(i){const u=this[tr](),{chat:{chatHistory:l},meeting:{meetingOptions:h,userId:g}}=u;if(null!=h&&h.isEnableDeleteChatMsg){const y=fu(u),C=l.find(w=>w.id===i);if(C){const{sender:w}=C;if(y)fs.chatCmdReq(i,Hp.Delete);else{if(w.userId!==g)return Promise.reject({type:Gi,reason:"can not delete message"});fs.chatCmdReq(i,Hp.Delete)}return Lr(qh,D=>D.id===i).then(()=>({id:i}))}return Promise.reject({type:Pr,reason:"msgId is wrong"})}return Promise.reject({type:nn,reason:"can not delete messages"})}lockChat(i){const u=this[tr](),{meeting:{meetingOptions:l}}=u;return this.setPrivilege(i?Co.NoOne:null!=l&&l.isPrivateChatEnabled?Co.All:Co.EveryonePublicly)}sendFile(i,u){if(!i)return Promise.reject({type:Pr,reason:"File is empty"});const{[tr]:l,[Vs]:h}=this,g=l(),{chat:{isFileTransferEnable:y,fileTransferFileType:C,fileTransferSizeLimit:w,failedFileTransfer:D}}=g;if(!y)return Promise.reject({type:nn,reason:"Send files via in-session chat is not enabled"});if("string"==typeof i){const N=pw(i,g);if(null!=N&&N.file&&D[i]){const{file:{upload:L,...V}}=N,{file:{name:G,upload:{uniqueId:W}},receiver:{userId:X}}=N;return h(Us({originFile:D[i],...V,upload:{...L,status:pa.InProgress}})),h(CA({uniqueId:W})),Promise.resolve(()=>{h(db({uniqueId:W,fileName:G,userId:X}))})}return Promise.reject({type:Pr,reason:"Retry token is not correct."})}{const{name:N}=i;if(C.length>0){const[X]=N.split(".").reverse();if(!C.some(ne=>ne===X))return Promise.reject({type:nn,reason:"File is not in the allow list"})}if(i.size>w)return Promise.reject({type:nn,reason:"File size exceeds the maximum limit."});const L=Yn(g),V=fU(g,u),G=hU(L,V,g);if(G)return Promise.reject(G);const W=Ov();return h(A_(function(X,ne,me,_e,Re){const Ne=(new Date).getTime();return{file:{name:X.name,size:X.size,type:X.type,upload:{progress:0,uniqueId:ne,totalChunks:0,chunkIndex:0}},originFile:X,sender:{name:me.displayName,userId:me.userId,userGuid:me.userGUID,avatar:me.avatar},receiver:{name:_e?.displayName,userId:_e?.userId,attendeeId:void 0,userGuid:_e?.userGUID},timestamp:Ne}}(i,W,L,V))),Promise.resolve(()=>{h(db({uniqueId:W,fileName:N,userId:V?.userId}))})}}downloadFile(i,u,l){const{[tr]:h,[Vs]:g}=this,{chat:{chatHistory:y}}=h();return i&&u&&y.find(w=>{var D;return w.id===i&&(null===(D=w.file)||void 0===D?void 0:D.fileUrl)===u})?(g(Us({id:i,fileUrl:u,download:{status:lu.InProgress,progress:0,blob:l}})),Promise.resolve(()=>g(y_({id:i,fileUrl:u})))):Promise.reject({type:Pr,reason:"Invalid message id or file url!"})}getPrivilege(){const{chat:{chatPrivilege:i,isAllowAttendeeChat:u}}=this[tr]();return u?i:Co.NoAttendee}getReceivers(){const i=this[tr](),{chat:{chatPrivilege:u,panelistChatPrivilege:l,isAllowAttendeeChat:h},meeting:{isWebinar:g}}=i;if(!g&&!h)return[];const y=Yn(i),C=fu(i);if(y)if(g)if(Ds(y.userRole)){if(!h)return[];if(u===Co.All)return[zg,Uv];if(u===Co.AllPanelist)return[zg];if(u===Co.NoOne)return[]}else{if(C||l===kc.Everyone){const w=Ah(i,y.userId,{includeAttendee:!0});return[zg,Uv,...w]}if(l===kc.AllPanelist){const w=Ah(i,y.userId);return[zg,...w]}}else{const w=fu(i);if(u===Co.All||w){const D=Ah(i,y.userId);return[Uv,...D]}if(u===Co.Host)return Ah(i,y.userId,{host:!0});if(u===Co.EveryonePublicly){const D=Ah(i,y.userId,{host:!0});return[Uv,...D]}if(u===Co.NoOne)return[]}return[]}getHistory(){return this[tr]().chat.chatHistory.map(i=>{const{highResTimeStampForIdentification:u,...l}=i;if(l.file){const{name:h,size:g,type:y,fileUrl:C,upload:w,download:D}=l.file,N={name:h,size:g,type:y,fileUrl:C};return w&&Object.assign(N,{upload:{status:w.status,progress:w.progress}}),D&&Object.assign(N,{download:{status:D.status,progress:D.progress}}),{...l,file:N}}return l})}isAllowToDeleteMessages(){const i=this[tr](),{meeting:{meetingOptions:u}}=i;return u?.isEnableDeleteChatMsg}isFileTransferEnabled(){return this[tr]().chat.isFileTransferEnable}getFileTransferSetting(){const i=this[tr](),{chat:{fileTransferFileType:u,fileTransferSizeLimit:l}}=i;return{typeLimit:(u??[]).map(h=>`.${h}`).join(","),sizeLimit:l}}}).prototype,"send",[An],Object.getOwnPropertyDescriptor(vi.prototype,"send"),vi.prototype),En(vi.prototype,"setPrivilege",[Al,An],Object.getOwnPropertyDescriptor(vi.prototype,"setPrivilege"),vi.prototype),En(vi.prototype,"setPanelistPrivilege",[Al,An,function(i,u,l){const h=l.value;l.value=function(){const g=this[Vo];if(g){const{meeting:{isWebinar:D}}=g.getState();if(!D)return Promise.reject({type:ym,reason:"non-webinar"})}for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];return h.apply(this,C)}}],Object.getOwnPropertyDescriptor(vi.prototype,"setPanelistPrivilege"),vi.prototype),En(vi.prototype,"deleteMessage",[An],Object.getOwnPropertyDescriptor(vi.prototype,"deleteMessage"),vi.prototype),En(vi.prototype,"lockChat",[Al,An],Object.getOwnPropertyDescriptor(vi.prototype,"lockChat"),vi.prototype),En(vi.prototype,"sendFile",[An],Object.getOwnPropertyDescriptor(vi.prototype,"sendFile"),vi.prototype),En(vi.prototype,"downloadFile",[An],Object.getOwnPropertyDescriptor(vi.prototype,"downloadFile"),vi.prototype),vi);const Br=ca({epics0:(i,u)=>Hd(i,24583).pipe(Nn(u),hn(l=>{let[h,g]=l;if(g.meeting.zlkJwtToken)return Ue;const{payload:{body:{sn:y,senderName:C,senderJid:w,receiver:D,text:N,type:L}}}=h,V=Yn(g),G=p_(g),{meeting:{jid:W,userId:X},participants:{xmppAttendeeList:ne}}=g;return Ia.beginDecrypt({decryptedText:N,type:Ga.XMPP_CHAT,zoomId:y}).then(me=>{var _e;let{message:Re}=me,Ne=null,et=0,ht="";V&&Ds(V.userRole)&&W===D?(Ne=ne.find(Qe=>Qe.jid===w),et=X,ht=V.displayName):L===Hi.Panelist&&(Ne=G.find(Qe=>Qe.jid===w),et=Hi.Panelist,ht=zg.displayName);const ze={message:Re,sender:{name:C,userId:(null===(_e=Ne)||void 0===_e?void 0:_e.userId)||0,avatar:""},receiver:{name:ht,userId:et},timestamp:(new Date).getTime()};return Ze(dm,ze),uf(ze)})})),epics1:(i,u)=>Dn(i,7944).pipe(Nn(u),hn(l=>{let[h,g]=l;const{meeting:{bIbDisableChat:y}}=g,{payload:{body:{attendeeNodeID:C,sn:w,destNodeID:D,text:N,senderName:L,msgID:V}}}=h,G=Yn(g);if(G){const W=Ds(G?.userRole)&&C===G.userId&&!V;if(!y&&!W){const{sn:X,...ne}=IN({destNodeID:D,attendeeNodeID:C,senderName:L,sn:w},g);return(C===Hi.SilentModeUsers?Promise.resolve({id:V,message:Bs(N),...ne}):Ia.beginDecrypt({decryptedText:N,zoomId:X,type:Ga.RWG_CHAT}).then(me=>{let{message:_e}=me;return{id:V,message:_e,...ne}})).then(me=>(Ze(dm,me),uf(me)))}}return Ue})),epics2:(i,u)=>Dn(i,uc).pipe(Ut(l=>{var h,g;return void 0!==(null===(h=l.payload.body)||void 0===h?void 0:h.chatPriviledge)||void 0!==(null===(g=l.payload.body)||void 0===g?void 0:g.bAllowAttendeeChat)}),Nn(u),Bn(l=>{let[h,g]=l;const{payload:{body:{chatPriviledge:y,bAllowAttendeeChat:C}}}=h,{chat:{chatPrivilege:w}}=g;return void 0!==C?(Ze(zh,!0===C?{chatPrivilege:w}:{chatPrivilege:Co.NoAttendee}),ZM(C)):(Ze(zh,{chatPrivilege:y}),MR(y))})),epics3:i=>Dn(i,uc).pipe(Ut(u=>{var l;return void 0!==(null===(l=u.payload.body)||void 0===l?void 0:l.panelistChatPriviledge)}),Bn(u=>{const{payload:{body:{panelistChatPriviledge:l}}}=u;return Ze(zh,{panelistChatPrivilege:l}),Zu(l)})),epics4:(i,u)=>Dn(i,4136).pipe(Nn(u),hn(l=>{let[h,g]=l;const{payload:{body:{result:y,destNodeID:C,msgID:w,fileID:D}}}=h,{meeting:{userId:N},chat:{chatHistory:L}}=g,V=[];if(y===Kg.Success)if(D){const W=L.find(X=>{var ne;return(null===(ne=X.file)||void 0===ne?void 0:ne.fileID)===D});if(W){const{file:X,receiver:ne,...me}=W,{name:_e,size:Re,type:Ne,fileUrl:et}=X??{},{attendeeId:ht,...ze}=ne;Ze(dm,{id:w,file:{name:_e,size:Re,type:Ne,fileUrl:et,upload:{status:pa.Complete,progress:100}},receiver:{...ze},...me}),V.push(IA({fileID:D,msgID:w,senderId:N}))}}else{const W=Ei(L,{userId:N,destNodeID:C});var G;W&&(Ze(pm,{msgId:w,receiverId:C,identification:null!==(G=W.highResTimeStampForIdentification)&&void 0!==G?G:0}),V.push(qC({destNodeID:C,msgID:w,userId:N})))}else y!==Kg.Delete&&y!==Kg.Block||V.push(ub({msgId:w}));return kn(V)})),epics5:i=>Dn(i,4238).pipe(hn(u=>{const{payload:{body:{bSuccess:l,cmd:h,msgID:g}}}=u,y=[];return l&&h===Hp.Delete&&(y.push(ub({msgId:g})),Ze(qh,{id:g})),kn(y)})),epics6:i=>Dn(i,7960).pipe(hn(u=>{const{payload:{body:{cmd:l,msgID:h}}}=u,g=[];return l===Hp.Delete&&(g.push(ub({msgId:h})),Ze(qh,{id:h})),kn(g)}))},{chatFileEpics0:i=>i.pipe(Wn(`${Ko}`),Bn(u=>{var l,h,g;const{payload:{fileTransfer:y,fileServerDomain:C}}=u;return e2({isFileTransferEnable:y?.isEnable,isEnableFileTransferEncrypted:y?.isEnableFileTransferEncrypted,fileTransferFileType:(null!==(l=y?.fileType)&&void 0!==l?l:"").replace(/\./g,"").split(",").filter(Boolean),fileTransferSizeLimit:1024*(null!==(h=y?.sizeLimit)&&void 0!==h?h:0)*1024||Ts.MaxSize,fileDownloadPromptIgnoreList:(null!==(g=y?.fileDownloadPromptIgnoreList)&&void 0!==g?g:"").replace(/\./g,"").split(","),fileServerDomain:`https://${C}`})})),chatFileEpics1:(i,u)=>i.pipe(Wn(`${A_}`),hn(function(){var l=F(function*(h){const{payload:{originFile:g,file:{upload:{uniqueId:y}}}}=h;return g.size>Ts.ChunkSize?yield(C=F(function*(w,D,N,L){const V=TN(w,"/wc/multiupload/init",L.value),G=yield(me=F(function*(_e){const Re=Math.ceil(_e.size/Ts.ReaderChunkSize);return(yield Promise.all(Array.from({length:Re},(et,ht)=>({start:ht*Ts.ReaderChunkSize,end:(ht+1)*Ts.ReaderChunkSize})).map(function(){var et=F(function*(ht){let{start:ze,end:Qe}=ht;try{const wt=yield hS(_e,ze,Qe),Xt=yield window.crypto.subtle.digest("SHA-256",wt);return[...new Uint8Array(Xt)].map(_t=>_t.toString(16).padStart(2,"0")).join("")}catch(wt){return ag("calculate file hash error.",_e,wt),Promise.reject(wt)}});return function(ht){return et.apply(this,arguments)}}()))).join("")}),function(_e){return me.apply(this,arguments)})(w),{meeting:{zmk:W,meetingId:X}}=L.value,ne=pw(D,L.value);var me;if(G&&ne){const{receiver:me}=ne,_e={fileName:w.name,length:w.size,channelType:4,digest:G,shareJid:X};return sd({url:V,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:W},crossDomain:au(V),body:_e}).pipe(pE(mw(w,D,me,N)),Bn(Re=>{var Ne;const{responseHeaders:et,response:ht}=Re,ze=null===(Ne=et["x-zm-trackingid"])||void 0===Ne?void 0:Ne.trim(),{uploadid:Qe,path:wt,metadata:Xt}=ht,_t=Math.ceil(w.size/Ts.ChunkSize);return Us({originFile:w,upload:{uniqueId:D,status:pa.InProgress,progress:0,chunkIndex:0,totalChunks:_t,uploadid:Qe,trackingId:ze,path:wt,metadata:Xt}})}),Np(Re=>(console.warn(Re),ag("Upload file meta error.",w,Re),gw(ne,w))),Fd(Us({upload:{uniqueId:D,status:pa.Init}})))}return LO(w,D)}),function(w,D,N,L){return C.apply(this,arguments)})(g,y,i,u):yield function(){var C=F(function*(w,D,N,L){const V=TN(w,"/wc/fileupload",L.value),G=new FormData;try{const W=yield Tu(w),X=pw(D,L.value);if(W&&X){G.append("file",new File([W],w.name));const{meeting:{zmk:ne}}=L.value,{receiver:me}=X;return sd({url:V,method:"POST",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:ne},crossDomain:au(V),body:G,includeUploadProgress:!0}).pipe(pE(mw(w,D,me,N)),hn(_e=>{const{type:Re,loaded:Ne,responseHeaders:et,total:ht}=_e;let ze=0,Qe=pa.InProgress;const wt={upload:{uniqueId:D}},Xt=[];if("upload_loadstart"===Re)ze=0;else if("upload_progress"===Re)ze=Math.floor(Ne/ht*100*.9);else if("upload_load"===Re)ze=90;else if("download_load"===Re){var _t,it;ze=100,Qe=pa.Success;const{chat:{fileServerDomain:Ce}}=L.value,Ye=null===(_t=et["zoom-file-id"])||void 0===_t?void 0:_t.trim(),Ge=null===(it=et["zoom-file-obj"])||void 0===it?void 0:it.trim(),ut=xO(Ce,{fileObj:Ge});Object.assign(wt,{fileID:Ye,fileObj:Ge,fileUrl:ut})}return Object.assign(wt.upload,{progress:ze,status:Qe}),(ze>0||"upload_loadstart"===Re)&&(Ze($g,{...Y_(w,me),progress:ze,status:Qe}),Xt.push(Us(wt))),kn(Xt)}),Np(_e=>(console.warn(_e),ag("Upload small file error.",w,_e),gw(X,w))))}}catch(W){console.warn(W)}return LO(w,D)});return function(w,D,N,L){return C.apply(this,arguments)}}()(g,y,i,u);var C});return function(h){return l.apply(this,arguments)}}()),hn(l=>l)),chatFileEpics2:(i,u)=>i.pipe(Wn(`${Us}`),Ut(l=>{var h;return(null===(h=l.payload.upload)||void 0===h?void 0:h.status)===pa.Success}),hf(function(){var l=F(function*(h){const{payload:{upload:{uniqueId:g}}}=h,{chat:{isEnableFileTransferEncrypted:y,chatHistory:C}}=u.value,w=C.find(N=>{var L,V;return(null===(L=N.file)||void 0===L||null===(V=L.upload)||void 0===V?void 0:V.uniqueId)===g}),D=[];if(w&&w.file){const{file:{name:N,size:L,fileObj:V,fileID:G,type:W},receiver:{userId:X,attendeeId:ne}}=w;let[me,_e]=["",""];if(y){const[Re,Ne]=yield Promise.all([N,`${L}`].map(et=>Ia.beginEncrypt({text:et,type:Ga.RWG_CHAT})));[me,_e]=[Re,Ne]}else[me,_e]=[N,`${L}`].map(Re=>As(Re));yield DN.chatFileTransfer({fileID:G,fileSize:_e,fileName:me,fileObj:V,type:W,destNodeID:X,attendeeNodeID:ne}),D.push(Us({upload:{uniqueId:g,status:pa.Complete}}))}return D});return function(h){return l.apply(this,arguments)}}())),chatFileEpics3:(i,u)=>i.pipe(Wn(`${Us}`),Ut(l=>{const{payload:{upload:h}}=l;return!!h&&!!h.uniqueId&&h.totalChunks>0&&h.chunkIndex!==h.totalChunks}),hn(function(){var l=F(function*(h){const{payload:{originFile:g,upload:{uniqueId:y}}}=h;return yield(C=F(function*(w,D,N,L){const V=pw(D,L.value);if(null!=V&&V.file){const{file:{upload:{chunkIndex:G,totalChunks:W,uploadid:X,path:ne,trackingId:me,etags:_e},size:Re},receiver:Ne}=V,et=G*Ts.ChunkSize,ht=yield Tu(w,et);if(ht){const{chat:{fileServerDomain:ze},meeting:{zmk:Qe}}=L.value,wt=`${ze}/upload/parts?${new URLSearchParams({uploadid:X,partNumber:G+1}).toString()}`,Xt=new FormData,_t=new File([ht],w.name);return Xt.append("file",_t),sd({url:wt,method:"POST",headers:{"Zoom-File-Size":_t.size,"Zoom-File-Path":ne,"x-zm-trackingid":me,"Zoom-File-Origin":"redirect=support_auth",zmk:Qe},crossDomain:au(wt),body:Xt,includeUploadProgress:!0}).pipe(pE(mw(w,D,Ne,N)),hn(it=>{const{type:Ce,loaded:Ye,total:Ge,responseHeaders:ut}=it;let mt=0;const St={upload:{uniqueId:D,status:pa.InProgress}},Wt=[];if("upload_loadstart"===Ce)mt=Math.floor(G/W*100);else if("upload_progress"===Ce)mt=Math.floor((G*Ts.ChunkSize+.9*Ye)/Re*100);else if("upload_load"===Ce)mt=Math.floor((G*Ts.ChunkSize+.9*Ge)/Re*100);else if("download_load"===Ce){mt=Math.floor((G+1)/W*100);const en=ut["x-zm-etag"].trim(),rn=_e?{..._e,[`${G+1}`]:en}:{[`${G+1}`]:en};Object.assign(St.upload,{etags:rn,chunkIndex:G+1,totalChunks:W}),Object.assign(St,{originFile:w})}return(mt>0||"upload_loadstart"===Ce)&&(Object.assign(St.upload,{progress:mt}),Ze($g,{...Y_(w,Ne),progress:mt,status:pa.InProgress}),Wt.push(Us(St))),kn(Wt)}),Np(it=>(console.warn(it),ag(`Upload file chunk error. chunk:${G},total chunks:${W},uploadid:${X},trackingId:${me}`,w,it),gw(V,w))))}}return LO(w,D)}),function(w,D,N,L){return C.apply(this,arguments)})(g,y,i,u);var C});return function(h){return l.apply(this,arguments)}}()),hn(l=>l)),chatFileEpics4:(i,u)=>i.pipe(Wn(`${Us}`),Ut(l=>{const{payload:{upload:h}}=l;return!!h&&!!h.uniqueId&&h.totalChunks>0&&h.chunkIndex==h.totalChunks}),hn(l=>{const{payload:{originFile:h,upload:{uniqueId:g}}}=l;return function(y,C,w,D){const{chat:{fileServerDomain:N},meeting:{zmk:L}}=D.value,V=pw(C,D.value);if(null!=V&&V.file){const{file:{upload:{uploadid:G,metadata:W,etags:X,trackingId:ne}},receiver:me}=V,_e=`${N}/upload/complete?uploadid=${G}`;return sd({url:_e,method:"POST",headers:{"x-zm-trackingid":ne,"Zoom-File-Origin":"redirect=support_auth",zmk:L},crossDomain:au(_e),body:{metadata:W,etags:X}}).pipe(pE(mw(y,C,me,w)),Bn(Re=>{var Ne,et;const{chat:{fileServerDomain:ht}}=D.value,{responseHeaders:ze}=Re,Qe=null===(Ne=ze["zoom-file-id"])||void 0===Ne?void 0:Ne.trim(),wt=null===(et=ze["zoom-file-obj"])||void 0===et?void 0:et.trim(),Xt=`${ht}/zoomfile/download?objkey=${wt}`;return Ze($g,{...Y_(y,me),progress:100,status:pa.Success}),Us({fileID:Qe,fileObj:wt,fileUrl:Xt,upload:{uniqueId:C,progress:100,status:pa.Success}})}),Np(Re=>(console.warn(Re),ag(`Upload chunks checksum error.uploadid${G},trackingId${ne}`,y,Re),gw(V,y))))}return LO(y,C)}(h,g,i,u)})),chatFileEpics5:(i,u)=>Dn(i,4308).pipe(hf(function(){var l=F(function*(h){const{payload:{body:{attendeeNodeID:g,destNodeID:y,fileID:C,fileName:w,fileObj:D,fileSize:N,fileType:L,msgID:V,senderName:G}}}=h,{meeting:{bIbDisableChat:W},chat:{fileServerDomain:X,isEnableFileTransferEncrypted:ne}}=u.value,me=[];if(!W){const _e=xO(X,{fileObj:D,fileID:C});if(L===Gp.Local){const{sn:Re,...Ne}=IN({destNodeID:y,attendeeNodeID:g,senderName:G},u.value);let[et,ht]=["",0];if(ne){const[Qe,wt]=yield Promise.all([w,N].map(Xt=>Ia.beginDecrypt({decryptedText:Xt,zoomId:Re,type:Ga.RWG_CHAT})));et=Qe.message,ht=Number(wt.message)}else et=Bs(w),ht=Number(Bs(N));const ze={id:V,file:{name:et,size:ht,fileUrl:_e},...Ne};me.push(uf({...ze,file:{...ze.file,fileID:C,fileObj:D}})),setTimeout(()=>{Ze(dm,ze)},0)}}return me});return function(h){return l.apply(this,arguments)}}())),chatFileEpics6:(i,u)=>i.pipe(Wn(`${Us}`),Ut(l=>{var h,g;const{payload:y}=l;return y.id&&y.fileUrl&&(null===(h=y.download)||void 0===h?void 0:h.status)===lu.InProgress&&0===(null===(g=y.download)||void 0===g?void 0:g.progress)}),hn(l=>function(h,g,y){var C;const{chat:{chatHistory:w},meeting:{zmk:D},participants:{attendeesList:N}}=y.value,L=w.find(V=>V.id===h);if(null!=L&&null!==(C=L.file)&&void 0!==C&&C.fileUrl){const{file:{fileUrl:V}}=L;return sd({url:V,method:"GET",headers:{"Zoom-File-Origin":"redirect=support_auth",zmk:D},crossDomain:au(V),responseType:"arraybuffer",includeDownloadProgress:!0}).pipe(pE((G=L,g.pipe(Wn(`${y_}`,`${nu}`),Ut(X=>{if(X.type===`${nu}`)return!0;const{payload:{id:ne}}=X;return G.id===ne}),Jn(()=>{var X,ne,me;wN.info(`Cancel file download. file name:${fl(null===(X=G.file)||void 0===X?void 0:X.name)},file size:${null===(ne=G.file)||void 0===ne?void 0:ne.size},sender id:${null===(me=G.sender)||void 0===me?void 0:me.userId}`),Ze(G0,{...fw(G),progress:0,status:lu.Cancel})})))),hf(function(){var G=F(function*(W){const{type:X,loaded:ne,total:me}=W,_e=[],Re={...fw(L),progress:0,status:lu.InProgress};if("download_loadstart"===X&&Object.assign(Re,{progress:0}),"download_progress"===X){var Ne;const Xt=Math.floor(ne/me*100);_e.push(Us({id:h,fileUrl:null===(Ne=L.file)||void 0===Ne?void 0:Ne.fileUrl,download:{progress:Xt}})),Object.assign(Re,{progress:Xt})}else if("download_load"===X){var et,ht,ze;const _t=lu.Success;Object.assign(Re,{progress:100,status:_t}),_e.push(Us({id:h,fileUrl:null===(et=L.file)||void 0===et?void 0:et.fileUrl,download:{progress:100,status:_t}}));const it=null===(ht=N.find(Ye=>Ye.userId===L.sender.userId))||void 0===ht?void 0:ht.zoomID,Ce=yield(Ye=F(function*(Ge,ut,mt){const St=Math.ceil(Ge.byteLength/Ts.DecodeBlockSize);try{const Wt=yield Promise.all(Array.from({length:Math.max(St-1,1)},(en,rn)=>({start:rn*Ts.DecodeBlockSize,end:(rn===St-2?rn+2:rn+1)*Ts.DecodeBlockSize})).map(function(){var en=F(function*(rn){let{start:on,end:hr}=rn;try{const Hn=Ge.slice(on,hr),{message:Er}=yield Ia.beginDecrypt({decryptedText:Hn,zoomId:mt,type:Ga.CHAT_FILE});return Er}catch(Hn){return ag("decrypt file buffer error.",{name:ut,size:Ge.byteLength},Hn),Promise.reject(Hn)}});return function(rn){return en.apply(this,arguments)}}()));return new Blob(Wt,{type:NO(ut)})}catch{return null}}),function(Ge,ut,mt){return Ye.apply(this,arguments)})(W.response,null===(ze=L.file)||void 0===ze?void 0:ze.name,it);var Qe,wt;Ce&&(null!==(Qe=L.file)&&void 0!==Qe&&Qe.download.blob?Object.assign(Re,{fileBlob:Ce}):function(Ye,Ge){const ut=document.createElement("a"),mt=window.URL.createObjectURL(Ye);ut.href=mt,ut.download=Ge,ut.click(),window.URL.revokeObjectURL(mt)}(Ce,null===(wt=L.file)||void 0===wt?void 0:wt.name))}var Ye;return(Re.progress>0||"download_loadstart"===X)&&Ze(G0,Re),_e});return function(W){return G.apply(this,arguments)}}()),Np(G=>(console.warn(G),ag(`download file error. file url:${V}`,{name:void 0,size:void 0},G),Ze(G0,{...fw(L),progress:0,status:lu.Fail}),Ii(Us({id:h,fileUrl:V,download:{status:lu.Fail,progress:0}})))))}var G;return Ue}(l.payload.id,i,u)))});function fS(i){const{meeting:{isMeetingReset:u,meetingId:l,meetingNumber:h,userName:g,userEmail:y,tid:C,userId:w},breakoutRoom:D}=i;let N="";var L;return N=u?null!=D&&null!==(L=D.currentRoom)&&void 0!==L&&L.boConfId?"join breakout room":"meeting failover":"join meeting",{label:N,payload:{meetingId:l,tid:C,userId:w,meetingNumber:fl(h),userName:fl(g),userEmail:fl(y)}}}function Ru(i,u,l){return Jt(wi(h=>{let g=!1;try{var y,C;const{logger:{options:w},meeting:{logConfig:D}}=u.value;g=null!==(y=w?.enable)&&void 0!==y?y:null===(C=JSON.parse(D||"{}"))||void 0===C?void 0:C.enable}catch{}try{if(g){const{logger:{isLaplaceInitialized:w}}=u.value;if(!w)return i.pipe(Wn(`${sI}`),ki(1),hn(D=>(D.payload&&l(h),Ue)));l(h)}}catch(w){console.warn(w)}return Ue}))}function cg(i,u,l,h){return Rr(i,l).pipe(Ru(i,u,h))}function hd(i,u,l,h){return Dn(i,l).pipe(Ru(i,u,h))}function lg(i){var u,l;const{audio:{activeMicrophone:h,activeSpeaker:g,microphoneDevicesList:y,speakerDevicesList:C}}=i;return`microphone: [${h} - ${null==y||null===(u=y.find(w=>w.deviceId===h))||void 0===u?void 0:u.label}]; speaker: [${g} - ${null==C||null===(l=C.find(w=>w.deviceId===g))||void 0===l?void 0:l.label}]`}function kN(i){var u;const{video:{activeCamera:l,cameraDevicesList:h}}=i;return`camera: [${l} - ${null==h||null===(u=h.find(g=>g.deviceId===l))||void 0===u?void 0:u.label}]`}function vw(i,u){return u?` ,${i}:${u}`:""}const yh=nd.getInstance(),wf=()=>{if("connection"in navigator){const{effectiveType:i,rtt:u,downlink:l}=navigator.connection;yh.makeLogger(["Network Connection Type"]).info(`Network connection. ect:${i},rtt:${u},downlink:${l}`)}},fd=nd.getInstance().makeLogger(["Remote Control"]),Dy=gc(Qr.getInstance()),FO=[{event:Cn.StartVideoCaptureSuccess,message:i=>`${jc.StartCaptureVideoSuccess}, ${kN(i)}`,logType:"info",additionalTags:["Video Join Flow"]},{event:Cn.StopVideoCaptureSuccess,message:jc.StopCaptureVideoSuccess,logType:"info",additionalTags:["Video Join Flow"]},{event:Cn.StartVideoStreamInVbSettingSuccess,message:jc.VBSettingSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:Cn.VbModelPreloadingOk,message:jc.VBPreloadSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:Cn.VbModelPreloading_3S,message:jc.VBPreloading3S,logType:"warn",additionalTags:["Video VB Flow"]},{event:Cn.VbModelPreloading_10S,message:jc.VBPreloading10S,logType:"warn",additionalTags:["Video VB Flow"]},{event:Cn.VbSettingParaError,message:jc.VBSettingFailed,logType:"error",additionalTags:["Video VB Flow"]}],$_=[{event:Cn.AudioBridgeReconnectStart,message:mc.AudioBridgeReconnectStart,logType:"info",additionalTags:["Audio Join Flow"]},{event:Cn.AudioBridgeReconnectEnd,message:mc.AudioBridgeReconnectEnd,logType:"info",additionalTags:["Audio Join Flow"]},{event:Cn.UserGrantCaptureAudio,message:i=>`${mc.DeviceAudioStreamCaptured},${lg(i)}`,logType:"info",additionalTags:["Audio Capture Flow"]},{event:Cn.JoinComputerAudioComplete,message:mc.AudioJoinComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:Cn.LeaveComputerAudioComplete,message:mc.AudioLeaveComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:Cn.JoinSharingAudioComplete,message:mc.SharingAudioStartComplete,logType:"info",additionalTags:["Audio Sharing Flow"]},{event:Cn.LeaveSharingAudioComplete,message:mc.SharingAudioStopComplete,logType:"info",additionalTags:["Audio Sharing Flow"]}].map(i=>({...i,tag:"Audio"})).concat(FO.map(i=>({...i,tag:"Video"}))),mp=nd.getInstance(),{InitSuccessVideo:mU,InitSuccessAudio:UO,InitSuccessSharing:VO,InitFailedVideo:jO,InitFailedAudio:Tf,InitFailedSharing:PN,RecoverWebrtcAudio:gU,AudioBridgeFirstRecvData:Ul,AudioBridgeCanSendData:QO,UserForbiddedCaptureAudio:MN,AudioWebsocketBroken:_U,AudioZeroData:NN,UserForbiddedCaptureVideo:xN,UserCameraIsTakenByOtherPrograms:Oy,VideoWebsocketBroken:LN,StopVideoCaptureFailed:Ma,DesktopSharingPermissionDenied:Hr,DesktopSharingSystemError:mi,AudioSpeakerSetError:HO,VbSettingParaError:mS,MaskSettingParaError:Eh}=Cn,ug=nd.getInstance(),Vl={options:void 0,isLaplaceInitialized:!1},BN=li({[`${Ab}`]:ct((i,u)=>{let{payload:l}=u;i.options=l}),[`${sI}`]:ct((i,u)=>{let{payload:l}=u;i.isLaplaceInitialized=l}),[`${jt}`]:(i,u)=>{let{options:l}=i,{payload:h}=u;return h?{...Vl,options:l}:{...Vl}}},Vl),FN=ca({epics0:(i,u)=>i.pipe(Wn(`${Ko}`),hn(F(function*(){const{meeting:{logConfig:l,logEncryptionPubKey:h,zlkJwtToken:g},logger:{options:y}}=u.value;let C=y||{};if(l)try{const{enable:w,enableReport:D}=JSON.parse(l);C={...C,enable:w,enableReport:D}}catch{}if(g){const{telemetry_tracking_id:w}=u1(g);w&&(C={...C,enable:!0,enableReport:!0,trackingId:w})}return yh.init({...C,logConfig:l,logEncryptionPubKey:h}).then(()=>[sI(!0),Ab(C)]).catch(()=>[sI(!1)])})),hn(l=>kn(l))),epics1:(i,u)=>hd(i,u,4098,l=>{var h,g;const{payload:{body:y}}=l,w=["jid","mn","participantID","zoomID"];if(y&&y.res===Ku.CONF_SUCCESS){let D=["conID","confID","mmrFeature","mmrFeatureEx","reportDomain","res","role","svcUrl","userID"].reduce((X,ne)=>void 0!==y[ne]?{...X,[`${ne}`]:y[ne]}:X,{});D=w.reduce((X,ne)=>void 0!==y[ne]?{...X,[`${ne}`]:fl(y[ne])}:X,D),yh.makeLogger(["A/V Performance Info"]).info(`CPU cores:${navigator.hardwareConcurrency}, SharedArrayBuffer:${!!window.crossOriginIsolated}, browser:${dr.browser} ${dr.browserVersion}, OS:${dr.os} ${dr.osVersion}${vw("wow64",dr.wow64)}${vw("GPU",dr.gpu)}${vw("architecture",dr.architecture)}${vw("bitness",dr.bitness)}${vw("model",dr.model)}`,["CPU_CORES"]);const{media:{enforceMultipleVideos:N,enforceVirtualBackground:L,assetsPath:V},meeting:{stayAwake:G,quicklyLeave:W}}=u.value;yh.makeLogger(["Init Option"]).info(`Init option:${JSON.stringify({enforceMultipleVideos:N,enforceVirtualBackground:L,assetsPath:V,stayAwake:G,leaveOnPageUnload:W})}`),yh.makeLogger(["Command Socket Event"]).info(`join meeting info ${JSON.stringify(D)}`,["User Info Map"]),"connection"in navigator&&(wf(),navigator.connection.addEventListener("change",wf))}else yh.report(`join meeting failed, error:${JSON.stringify(Mv(y?.res))}, rwg error code:${y?.res}, rwg conID:${y?.conID}, error message:${y?.error_desc}, rwg url:${y?.svcUrl},mid:${u.value.meeting.meetingId}`,"JOIN_MEETING_FAILED","error");kr.createAgent().sendRWGConnectionPerformance(`WCL_M, conId: ${y?.conID}, trackingId: ${null===(h=u.value.logger)||void 0===h||null===(g=h.options)||void 0===g?void 0:g.trackingId}`)}),epics2:(i,u)=>i.pipe(Wn(`${D0}`),Nn(u),Ut(l=>{let[,h]=l;return void 0===h.meeting.encryptedRWC&&(void 0===h.meeting.encryptedGEORWC||0===h.meeting.encryptedGEORWC.length)}),Ru(i,u,()=>{const{label:l,payload:h}=fS(u.value);yh.report(`${l} ${JSON.stringify(h)}`,["Join Meeting Flow","Ping RWC Domain Empty"],"error")})),epics3:(i,u)=>i.pipe(Wn(`${ja}`),Ut(l=>l.payload===Ks.OnError||l.payload===Ks.Disconnect||l.payload===Ks.NoHeartbeat),Ru(i,u,l=>{const{payload:h}=l,{socket:{rwgServerList:g,retryCount:y}}=u.value,{payload:C}=fS(u.value);yh.report(`websocket unexpected disconnected,${JSON.stringify({code:h,rwgHost:g[y],...C})}`,["Join Meeting Flow","RWG Disconnect"])})),epics4:(i,u)=>i.pipe(Wn(`${om}`),Ru(i,u,l=>{const{payload:{reason:h,count:g,interval:y}}=l,{payload:C}=fS(u.value);yh.makeLogger(["Join Meeting Flow"]).info(`meeting failover,${JSON.stringify({reason:h,count:g,interval:y,...C})}`,["Failover"]),"connection"in navigator&&navigator.connection.removeEventListener("change",wf)})),epics5:(i,u)=>i.pipe(Wn(`${Bg}`),Ut(l=>l.payload.status===qi.Connecting),Ru(i,u,l=>{const{payload:{rwgUrl:h}}=l;let g=h.replace(/(\d+)\?/,`${fl("$1")}?`);g=["email","zoomid","participantID","dn2","customer_key","mpwd","topic"].reduce((C,w)=>C.indexOf(w)>-1?C.replace(new RegExp(`${w}=([^&]+)`,"g"),`${w}=${fl("$1")}`):C,g);const{payload:y}=fS(u.value);yh.makeLogger(["Join Meeting Flow"]).info(`RWG URL,${JSON.stringify({rwgUrl:g,...y})}`,["RWG Url"])})),epics6:(i,u)=>i.pipe(Wn(`${nu}`),Ut(l=>{const{payload:h}=l;return h?h.retry:u.value.meeting.meetingStatus===Do.Initial}),Ru(i,u,()=>{const{meeting:{meetingStatus:l},socket:{rwgServerList:h,retryCount:g}}=u.value;if(l!==Do.Joined){const{payload:y}=fS(u.value),C=h?.length>0?h[g]:void 0;yh.report(JSON.stringify({...y,rwc:C?.rwc,rwg:C?.rwg}),["meeting_connection_details"])}}))},{rmclEpics0:(i,u)=>i.pipe(Wn(`${eb}`),Ru(i,u,l=>{const{payload:{isRemoteControlEnabled:h,isEnableAutoDeleteRcApp:g}}=l;fd.log(`isRemoteControlEnabled:${h},auto delete:${g}`)})),rmclEpics1:(i,u)=>i.pipe(Wn(`${rp}`),Ut(l=>!!l.payload),Ru(i,u,l=>{fd.log(`Launch Remote control app, scheme:${l.payload}`)})),rmclEpics2:(i,u)=>i.pipe(Wn(`${g_}`),Ut(l=>!!l.payload),Ru(i,u,l=>{fd.log(`Remote control session starts, controlling ssrc:${l.payload}`)})),rmclEpics3:(i,u)=>hd(i,u,16430,()=>{fd.log("Remote control app connected to rwg.")}),rmclEpics4:(i,u)=>hd(i,u,16428,()=>{fd.log("Remote control app disconnected to rwg.")}),rmclEpics5:(i,u)=>hd(i,u,16428,l=>{const{share:{status:h,isRemoteControlEnabled:g}}=u.value;g&&h!==yi.End&&l.payload.body.bOn&&fd.log(`Remote control sharing device info.${JSON.stringify(Dy.getShareStreamInfo())}`)}),rmclEpics6:(i,u)=>cg(i,u,Cn.CurrentDesktopSharingWidthHeight,()=>{const{share:{isRemoteControlEnabled:l}}=u.value;l&&fd.log(`Remote control sharing device info changes.${JSON.stringify(Dy.getShareStreamInfo())}`)}),rmclEpics7:(i,u)=>cg(i,u,Cn.SendRemoteControlQrCode,l=>{const{share:{status:h}}=u.value,{payload:{data:g}}=l;fd.log(`Remote control QR code result. sharing status:${h}, result${JSON.stringify(g)}`)})},{mlEpics0:(i,u)=>Rr(i,[mU,UO,VO,jO,Tf,PN]).pipe(Ru(i,u,l=>{const{payload:{type:h,data:g}}=l,y=mp.makeLogger(["Audio","Audio Init Flow"]),C=mp.makeLogger(["Video","Video Init Flow"]),w=mp.makeLogger(["Sharing","Sharing Init Flow"]);h===UO||h===Tf?g===ns.EncodeSuccess?y.info(mc.AudioEncodeSuccess):g===ns.DecodeSuccess?y.info(mc.AudioDecodeSuccess):g===ns.EncodeFailed?y.warn(mc.AudioEncodeFailed):g===ns.DecodeFailed&&y.warn(mc.AudioDecodeFailed):h===mU||h===jO?g===ns.EncodeSuccess?C.info(jc.VideoEncodeSuccess):g===ns.DecodeSuccess?C.info(jc.VideoDecodeSuccess):g===ns.EncodeFailed?C.warn(jc.VideoEncodeFailed):g===ns.DecodeFailed&&C.warn(jc.VideoDecodeFailed):h!==VO&&h!==PN||(g===ns.EncodeSuccess?w.info(qA.SharingEncodeSuccess):g===ns.DecodeSuccess?w.info(qA.SharingDecodeSuccess):g===ns.EncodeFailed?w.warn(qA.SharingEncodeFailed):g===ns.DecodeFailed?w.warn(qA.SharingDecodeFailed):h===VO&&void 0===g&&w.info(qA.SharingDecodeSuccess))})),mlEpics1:(i,u)=>cg(i,u,$_.map(l=>l.event),l=>{const{payload:{type:h}}=l,g=$_.find(y=>y.event===h);if(g){const{message:y,logType:C,additionalTags:w,tag:D}=g;let N=y;"function"==typeof y&&(N=y(u.value)),N&&mp.makeLogger([D])[C](N,w)}}),mlEpics2:(i,u)=>i.pipe(Wn(`${f_}`),Ut(l=>!l.payload),Ru(i,u,()=>{mp.makeLogger(["Audio"]).warn(`Auto play audio failed,${lg(u.value)}`)})),mlEpics3:(i,u)=>cg(i,u,gU,()=>{mp.report("Audio bridge, recover audio failed, need to rejoin the audio",["Audio exception flow"])}),mlEpics4:(i,u)=>cg(i,u,[Ul,QO],l=>{const{payload:{type:h}}=l;mp.makeLogger(["Audio"]).log("Audio bridge connection: "+(h===Ul?"first receive data":"can send data"))}),mlEpics5:(i,u)=>cg(i,u,[MN,_U,NN,HO],l=>{const{payload:{type:h}}=l;let g=`Audio error case:${h}`;h===MN?g="Audio capture is forbidden by the user":h===NN?u.value.audio.webrtcRestartCount<3&&(g="audio capture zero data, auto failover"):h===HO&&(g="audio change speaker error"),mp.report(`${g},${lg(u.value)}`,["Audio exception flow"])}),mlEpics6:(i,u)=>cg(i,u,[xN,Oy,LN,Ma],l=>{const{payload:{type:h}}=l;let g=`Video error case:${h}`;if(h===xN)g="Video capture is forbidden by the user";else if(h===Oy)g="Camera is taken by other programs";else if(h===mS){var y;g=`VB setting error, param:${JSON.stringify(null!==(y=u.value.video.virtualBackground)&&void 0!==y?y:{})}`}else if(h===Eh){var C;g=`Mask setting error, param:${JSON.stringify(null!==(C=u.value.video.mask)&&void 0!==C?C:{})}`}mp.report(`${g},${kN(u.value)}`,["Video exception flow"])}),mlEpics7:(i,u)=>cg(i,u,[Hr,mi],l=>{const{payload:{type:h}}=l;let g="";h===mi?dr.isMacOS&&(g="Need to allow screen recording access in system setting on MacOS"):g="Need to allow the permission request",mp.report(`${g}`,["Sharing exception flow"])})}),ky=kr.createAgent(),Gr={cmrStatus:Ys.Stop,recordingEnable:!1,recordingIsoEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1,isZoomIQ:!1,zoomIQChanging:!1,localStatus:Vv.Stop,supportLocalRecording:pc.None,localGrantPermissionOption:nF.None,localPermissionUserList:[]},gS=li({[`${Pm}`]:ct((i,u)=>{let{payload:l}=u;i.cmrStatus=l}),[`${HR}`]:ct((i,u)=>{let{payload:l}=u;i.recordingEnable=l}),[`${a2}`]:ct((i,u)=>{let{payload:l}=u;i.recordingIsoEnable=l}),[`${GR}`]:ct((i,u)=>{let{payload:l}=u;i.allowStopAutoRecording=l}),[`${RA}`]:ct((i,u)=>{let{payload:l}=u;i.automaticCloudRecordingEnable=l}),[`${DA}`]:ct((i,u)=>{let{payload:l}=u;i.isZoomIQ=l}),[`${ih}`]:ct((i,u)=>{let{payload:l}=u;i.zoomIQChanging=l}),[`${WR}`]:ct((i,u)=>{let{payload:l}=u;i.localStatus=l}),[`${Mm}`]:ct((i,u)=>{let{payload:l}=u;i.supportLocalRecording=l}),[`${c2}`]:ct((i,u)=>{let{payload:l}=u;i.localGrantPermissionOption=l}),[`${OA}`]:ct((i,u)=>{let{payload:l}=u;i.localPermissionUserList=l}),[`${gb}`]:()=>({...Gr})},Gr);var _S,Aw,Py,_a,yw,WO,Ew,bw,KO,Io;const gp=kr.createAgent(),bh=hp("Recording");let vU=(_S=er("recording"),Aw=er("recording"),Py=er("recording"),_a=er("recording"),yw=er("recording"),WO=er("recording"),Ew=er("recording"),bw=er("recording"),KO=er("recording"),En((Io=class extends vh{startRecording(){const i=this[tr](),{meeting:{bIbDisableRecording:u,recordingEnable:l},recording:{cmrStatus:h}}=i;return u?Promise.reject({type:nn,reason:"Rejected by Information Barrier"}):l?h===Ys.Start?Promise.resolve(""):(gp.recordMeeting(!0,!1),Lr(Jg,g=>g.cmrServerStatus===Ys.Start)):Promise.reject({type:nn,reason:"The account of the meeting disabled the cloud recording"})}pauseRecording(){const i=this[tr](),{recording:{cmrStatus:u}}=i;return u===Ys.Pause?Promise.resolve(""):u!==Ys.Start?Promise.reject({type:nn,reason:"Recording is not started"}):(gp.recordMeeting(!1,!0),Lr(Jg,l=>l.cmrServerStatus===Ys.Pause))}stopRecording(){const i=this[tr](),{recording:{cmrStatus:u}}=i;return u===Ys.Stop?Promise.resolve(""):(gp.recordMeeting(!1,!1),Lr(Jg,l=>l.cmrServerStatus===Ys.Stop))}accept(){const i=this[tr](),{recording:{cmrStatus:u,recordingIsoEnable:l}}=i,h=Yn(i);return l?u!==Ys.Start&&u!==Ys.Pause?Promise.reject({type:nn,reason:"Recording is not started"}):null!=h&&h.bAllowISORecord?Promise.resolve("You accepted ISO recording"):(gp.allowSelfRecord(!0),Lr(K0,g=>g?.userId===h?.userId&&g?.status===Kd.Accept)):Promise.reject({type:nn,reason:"ISO Recording is not enabled"})}decline(){const i=this[tr](),{recording:{cmrStatus:u,recordingIsoEnable:l}}=i,h=Yn(i);return l?u!==Ys.Start&&u!==Ys.Pause?Promise.reject({type:nn,reason:"Recording is not started"}):!0===h?.bAllowISORecord?Promise.reject({type:nn,reason:"You had accept ISO recording, cant change it"}):(gp.allowSelfRecord(!1),Promise.resolve("")):Promise.reject({type:nn,reason:"ISO Recording is not enabled"})}getRecordingStatus(){const i=this[tr](),{recording:{cmrStatus:u}}=i,l=pF(i);return u===Ys.Start?Kd.Recording:u===Ys.Pause?Kd.Paused:l?Kd.Recording:Kd.Stopped}isRecordingEnabled(){const i=this[tr](),{recording:{recordingEnable:u}}=i;return u}isAllowedToStopAutoRecording(){const i=this[tr](),{recording:{allowStopAutoRecording:u}}=i;return u}isAutomaticCloudRecordingEnabled(){const i=this[tr](),{recording:{automaticCloudRecordingEnable:u}}=i;return u}enableRecordingWithIQ(i){const{[tr]:u,[Vs]:l}=this,h=u(),{recording:{isZoomIQ:g,zoomIQChanging:y},meeting:{meetingOptions:C}}=u();return C.isEnableKiwiRecording?fu(h)?y?Promise.reject({type:nn,reason:"We are changing, please wait"}):i===g?Promise.reject({type:nn,reason:`You have ${i?"enable":"disable"} Zoom IQ, don't need change`}):(l(ih(!y)),l(DA(!g)),gp.enableZoomIQRecord(i),Lr(q0,w=>w?.success)):Promise.reject({type:nn,reason:"Only Host or co-host can enable/disable Zoom IQ"}):Promise.reject({type:nn,reason:"You not have zoom IQ license or not enable zoom IQ, please check and retry"})}isSupportLocalRecording(){const i=this[tr](),{meeting:{meetingOptions:u,isWebinar:l},breakoutRoom:h}=i;if(h?.currentRoom.status===fr.InRoom)return!1;const g=Yn(i);return(!l||!Ds(g.userRole))&&u?.isLocalRecordingEnabled}isSupportLocalRecordingPermission(){const i=this[tr](),{recording:{supportLocalRecording:u}}=i;if(!this.isSupportLocalRecording())return!1;const l=Yn(i);return!(null==l||!l.isHost)||u===pc.Allow}askLocalRecordingPermission(){const{[tr]:i}=this,{recording:{supportLocalRecording:u}}=i();return this.isSupportLocalRecording()?u===pc.None?(gp.localRecordingRequestPermission(),Promise.resolve("")):u===pc.Allow?Promise.resolve(""):Promise.reject("permission is denied"):Promise.reject("not support")}startLocalRecording(i){const{[tr]:u,[Vs]:l}=this,h=u(),{recording:{localStatus:g,supportLocalRecording:y},meeting:{userId:C}}=h;if(!(i in Vv))return Promise.reject({type:nn,reason:"not support you parameter, only support type are 0(stop)/1(start)/2(pause)."});if(!this.isSupportLocalRecording())return Promise.reject({type:nn,reason:"not support local recording"});if(i===g)return Promise.resolve(`you currently status is ${g}, do nothing`);const w=Yn(h);return y===pc.Allow||null!=w&&w.isHost?(gp.localRecordingMeeting(i),Lr(z0,D=>D?.userId===C&&(l(WR(D.bLocalRecord)),D.bLocalRecord===i),1e3)):Promise.reject({type:nn,reason:"you not have local recording permission, please use askLocalRecordingPermission request it first"})}isSupportLocalRecordingGrantPermission(){const i=this[tr]();if(!this.isSupportLocalRecording())return!1;const u=Yn(i);return!(null==u||!u.isHost||!Boolean(u?.caps&Fc.LocalRecordingGrantPermissionOption))}grantLocalRecordingPermission(i,u,l){const{[tr]:h,[Vs]:g}=this,y=h(),{recording:{localPermissionUserList:C}}=y;if(!this.isSupportLocalRecording())return Promise.resolve(!1);const w=Yn(y);if(!Boolean(w?.caps&Fc.LocalRecordingGrantPermissionOption))return Promise.reject({type:nn,reason:"you can not grant permission"});let D=!1;if(l&&(D=!0),C.filter(N=>N===i).length>0){if(u===pc.Allow)gp.localRecordingGrantPermission(i,!0,D);else{if(u!==pc.Deny)return Promise.reject({type:nn,reason:"only support DENY(1)/ALLOW(2)"});gp.localRecordingGrantPermission(i,!1,D)}return g(OA(C.filter(N=>N!==i))),Ze(il,{type:"answer",value:u===pc.Allow}),Promise.resolve(!1)}return u!==pc.Deny?Promise.reject({type:nn,reason:"Direct grant only support DENY(1)"}):(gp.hostGrantPermission(i,!1),Lr(il,N=>N?.value===i&&(u===pc.Allow?(g(OA([...C,i])),!0===N?.canRecord):(g(OA(C.filter(L=>L!==i))),!1===N?.canRecord)),1e3))}getLocalRecordingPermissionUserList(){const i=this[tr](),{recording:{localPermissionUserList:u}}=i;if(!this.isSupportLocalRecording())return Promise.resolve(!1);const l=Yn(i);return Boolean(l?.caps&Fc.LocalRecordingGrantPermissionOption)?u:Promise.reject({type:nn,reason:"you can not grant permission"})}getLocalRecordingPermissionOperation(){const i=this[tr](),{recording:{localGrantPermissionOption:u}}=i;if(!this.isSupportLocalRecording())return null;const l=Yn(i);return Boolean(l?.caps&Fc.LocalRecordingGrantPermissionOption)?u:null}}).prototype,"startRecording",[Al,An,_S,bh],Object.getOwnPropertyDescriptor(Io.prototype,"startRecording"),Io.prototype),En(Io.prototype,"pauseRecording",[Al,An,Aw,bh],Object.getOwnPropertyDescriptor(Io.prototype,"pauseRecording"),Io.prototype),En(Io.prototype,"stopRecording",[Al,An,Py,bh],Object.getOwnPropertyDescriptor(Io.prototype,"stopRecording"),Io.prototype),En(Io.prototype,"accept",[An,_a,bh],Object.getOwnPropertyDescriptor(Io.prototype,"accept"),Io.prototype),En(Io.prototype,"decline",[An,yw,bh],Object.getOwnPropertyDescriptor(Io.prototype,"decline"),Io.prototype),En(Io.prototype,"askLocalRecordingPermission",[An,WO],Object.getOwnPropertyDescriptor(Io.prototype,"askLocalRecordingPermission"),Io.prototype),En(Io.prototype,"startLocalRecording",[An,Ew],Object.getOwnPropertyDescriptor(Io.prototype,"startLocalRecording"),Io.prototype),En(Io.prototype,"grantLocalRecordingPermission",[An,Pa,bw],Object.getOwnPropertyDescriptor(Io.prototype,"grantLocalRecordingPermission"),Io.prototype),En(Io.prototype,"getLocalRecordingPermissionUserList",[An,Pa,KO],Object.getOwnPropertyDescriptor(Io.prototype,"getLocalRecordingPermissionUserList"),Io.prototype),Io);const vS=ca({moduleEpics0:i=>Dn(i,0).pipe(Jn(u=>{var l;if("READY"===(null===(l=u.payload.body)||void 0===l?void 0:l.status)){const h=sessionStorage.getItem(ro.WebclientRecordingToken);sessionStorage.removeItem(ro.WebclientRecordingToken),h&&ky.sendLaunchParams(h)}}),Ar(Ue)),moduleEpics1:i=>i.pipe(Wn(`${Ko}`),Bn(u=>{const{payload:{recordingEnable:l}}=u;return HR(l)})),moduleEpics2:(i,u)=>Dn(i,uc).pipe(Ut(l=>{var h,g,y;return void 0!==(null===(h=l.payload.body)||void 0===h?void 0:h.cmrServerStatus)||void 0!==(null===(g=l.payload.body)||void 0===g?void 0:g.disAllowClientStopAutoCmr)||void 0!==(null===(y=l.payload.body)||void 0===y?void 0:y.enableAutomicRecordingCloud)}),Nn(u),hn(l=>{let[h,g]=l;const{cmrServerStatus:y,disAllowClientStopAutoCmr:C,enableAutomicRecordingCloud:w}=h.payload.body,D=[];return void 0!==y&&(y!==Ys.Init&&(Ze(Jg,{cmrServerStatus:y}),g.recording.recordingIsoEnable&&y===Ys.Start&&Ze(K0,{status:Kd.Ask})),D.push(Pm(y))),void 0!==C&&D.push(GR(!C)),void 0!==w&&D.push(RA(w)),kn(D)})),moduleEpics3:i=>Dn(i,uc).pipe(Ut(u=>{var l;return void 0!==(null===(l=u.payload.body)||void 0===l?void 0:l.bCmrIsoEnble)}),Bn(u=>{const{bCmrIsoEnble:l}=u.payload.body;return a2(l)})),moduleEpics4:(i,u)=>Dn(i,So).pipe(Nn(u),Ut(l=>{let[h]=l;const{payload:{body:{update:g,add:y}}}=h;return g?.some(C=>void 0!==C.bLocalRecordStatus||void 0!==C.canRecord)||y?.some(C=>void 0!==C.bLocalRecordStatus||void 0!==C.canRecord)}),hn(l=>{let[h,g]=l;const{payload:{body:{update:y,add:C}}}=h,{meeting:{userId:w,isHost:D},recording:{supportLocalRecording:N},participants:{attendeesList:L}}=g,V=[];return y?.concat(C||[]).filter(G=>void 0!==G.bLocalRecordStatus||void 0!==G.canRecord).forEach(G=>{if(void 0!==G.canRecord){const W=Boolean(G.canRecord);if(w===G.id||D){const X=L.find(ne=>ne.userId===w);!W&&null!=X&&X.bLocalRecord&&(Ze(il,{type:"revoke",value:G.id,canRecord:W}),ky.localRecordingMeeting(Vv.Stop)),!W||null!=X&&X.bLocalRecord||Ze(il,{type:"grant",value:G.id,canRecord:W})}w===G.id&&((N!==pc.None||W)&&V.push(Mm(W?pc.Allow:pc.Deny)),W||V.push(WR(Vv.Stop)))}else Ze(z0,{userId:G.id,bLocalRecord:G.bLocalRecordStatus})}),kn(V)})),moduleEpics5:(i,u)=>Dn(i,So).pipe(Bn(l=>Qb(l.payload.body)),Nn(u),hn(l=>{let[h,g]=l;const y=[],{recording:{localPermissionUserList:C}}=g;return h.remove&&h.remove.forEach(w=>{C.filter(D=>D===w?.userId)&&(y.push(OA(C.filter(D=>D!==w?.userId))),Ze(il,{type:"remove",value:w?.userId}))}),kn(y)})),moduleEpics6:i=>Dn(i,So).pipe(Ut(u=>{const{payload:{body:{update:l}}}=u;return l?.some(h=>void 0!==h.bAllowISORecord)}),Jn(u=>{const{payload:{body:{update:l}}}=u;l.filter(h=>void 0!==h.bAllowISORecord).forEach(h=>{Ze(K0,{userId:h.id,status:h.bAllowISORecord?Kd.Accept:Kd.Decline})})}),Ar(Ue)),moduleEpics7:i=>Dn(i,uc).pipe(Ut(u=>{var l;return void 0!==(null===(l=u.payload.body)||void 0===l?void 0:l.SalesRecordingAnalytics)}),Bn(u=>{const{SalesRecordingAnalytics:l}=u.payload.body;return Ze(jv,{isZoomIQ:l}),DA(l)})),moduleEpics8:(i,u)=>Dn(i,4319).pipe(Nn(u),Ut(l=>{var h;let[g]=l;return void 0!==(null===(h=g.payload.body)||void 0===h?void 0:h.success)}),hn(l=>{let[h,g]=l;const y=[],{success:C}=h.payload.body,{recording:{zoomIQChanging:w}}=g;return Ze(q0,{success:C}),C&&y.push(ih(!w)),kn(y)})),moduleEpics9:(i,u)=>Dn(i,4344).pipe(Nn(u),Ut(l=>{var h;let[g]=l;return void 0!==(null===(h=g.payload.body)||void 0===h?void 0:h.cmdType)}),hn(l=>{var h;let[g,y]=l;const C=[],{cmdType:w}=g.payload.body,{recording:{localPermissionUserList:D},meeting:{isHost:N}}=y;var L,V,G,W;return"permission_req_option"===w&&(Ze(il,{type:"option",value:null===(L=g.payload.body)||void 0===L?void 0:L.option}),C.push(c2(null===(V=g.payload.body)||void 0===V?void 0:V.option))),"request_permission"===w&&null!==(h=g.payload.body)&&void 0!==h&&h.userId&&(N&&Ze(il,{type:"request",value:null===(W=g.payload.body)||void 0===W?void 0:W.userId}),C.push(OA([...D,null===(G=g.payload.body)||void 0===G?void 0:G.userId]))),"permission_request_answer"===w&&(Ze(il,{type:"answer",value:g.payload.body.agreed}),C.push(Mm(g.payload.body.agreed?pc.Allow:pc.Deny))),kn(C)}))});let dg=function(i){return i[i.All=1]="All",i[i.Private=2]="Private",i}({}),qO=function(i){return i.SUCCESS="success",i}({}),Sw=function(i){return i.CustomizedKey="__zoom_internal_message_customized_key__@@",i.SpeakerOnly="__zoom_internal_message_speaker_only__@@",i}({});const AS=Fb.getInstance(),My=(i,u,l)=>{const{meeting:{encType:h}}=l,g=u,y=I0(i),C=g?dg.Private:dg.All;return h===F0.AES_GCM?Ia.beginEncrypt({text:y,type:Ga.XMPP_CHAT}).then(w=>{AS.sendWebinarMseeage(w,g,C,!0)}):AS.sendWebinarMseeage(y,g,C,!1)};function YO(i,u){const{cmd:{jids:l}}=u;return Object.prototype.hasOwnProperty.call(l,i)?Promise.resolve():oc(Oo(lm).pipe(ts(h=>-1===h.findIndex(g=>Number(g.userId)===i)),ki(1),_o(Rc)))}function Ny(i){const{cmd:{connectionStatus:u}}=i;return u===qO.SUCCESS?Promise.resolve(!0):oc(Oo(rl,1)).then(l=>l===bo.Connected||Promise.reject({type:nn,reason:"Cannot establish the command channel"}))}function Cw(i,u){for(const[l,h]of Object.entries(i))if(h.jid===u)return l}const $O={connectionStatus:"initial",jids:{}},UN=li({[`${fc}`]:()=>({...$O}),[`${_b}`]:ct((i,u)=>{let{payload:l}=u;const{data:h,attendees:g}=l;h.forEach(y=>{const{jid:C,node:w}=y;if(!i.jids[w]||i.jids[w].jid!==C){const D=g.find(N=>N.userId===Number(w));i.jids[w]={jid:C,userGuid:D?.userGUID}}})}),[`${ip}`]:ct((i,u)=>{let{payload:l}=u;l.forEach(h=>{const{jid:g}=h,y=Cw(i.jids,g);y&&delete i.jids[y]})}),[`${kA}`]:ct((i,u)=>{let{payload:l}=u;i.connectionStatus=l})},$O);var pg;let VN=(En((pg=class extends vh{send(i,u){if(!i)return Promise.reject({type:Pr,reason:"Text is empty"});if("string"!=typeof i)return Promise.reject({type:Pr,reason:"Text is not a string"});if(i.length>512)return Promise.reject({type:Pr,reason:"Text exceeds the max length(512)."});const{[tr]:l}=this,h=l(),{socket:{xmppSocketStatus:g},meeting:{userId:y}}=h;return g!==qi.Connected?Promise.reject({type:ym,reason:"Command channel is not ready"}):Ny(h).then(()=>u?-1!==Uo(l()).findIndex(C=>C.userId===u)?YO(u,h).then(()=>{const{cmd:{jids:C}}=l();return C[u]?(My(i,C[u].jid,l()),{timestamp:(new Date).getTime(),text:i,receiverId:u,senderId:y}):Promise.reject({type:Xp})}):Promise.reject({type:Pr,reason:"Cannot find the user"}):(My(i,"",h),{timestamp:(new Date).getTime(),text:i,receiverId:0,senderId:y}))}getJids(){const{[tr]:i}=this,u=i(),{cmd:{jids:l}}=u;return l}}).prototype,"send",[An],Object.getOwnPropertyDescriptor(pg.prototype,"send"),pg.prototype),pg);const jN={extraEpics0:(i,u)=>i.pipe(Wn(`${RC}`),wi(l=>{const{payload:{speakerOnly:h}}=l,g=Yn(u.value);return(void 0!==g?.audio?kn([g.audio]):Oo(wa).pipe(Ut(y=>void 0!==y.audio),ki(1))).pipe(Jn(()=>{Ny(u.value).then(()=>{My(`${Sw.SpeakerOnly}${h?1:0}`,"",u.value)})}),Ar(Ue))})),extraEpics1:(i,u)=>Dn(i,So).pipe(Ut(l=>{var h,g;const{payload:{body:y}}=l;return!!y.add&&!(null===(h=u.value.audio)||void 0===h||null===(g=h.customizeAudioOption)||void 0===g||!g.speakerOnly)}),_o(Rc),Jn(function(){var l=F(function*(h){const{payload:{body:{add:g}}}=h,y=u.value,{meeting:{userId:C}}=y;for(let w=0;w<g.length;w++){const{id:D}=g[w];if(D!==C){yield YO(D,u.value);const{cmd:{jids:N},participants:{attendeesList:L}}=u.value;N[D]&&setTimeout(()=>{My(`${Sw.SpeakerOnly}1`,N[D].jid,u.value)},Math.floor(Math.random()*Math.log10(L.length)*1e3))}}});return function(h){return l.apply(this,arguments)}}()),Ar(Ue))},Iw=ca({epics0:(i,u)=>Hd(i,24577).pipe(Nn(u),Bn(l=>{let[h]=l;const{payload:{body:{status:g}}}=h;return g===qO.SUCCESS&&Ze(rl,bo.Connected),kA(g)})),epics1:(i,u)=>Hd(i,24583).pipe(Nn(u),hn(l=>{let[h,g]=l;const{meeting:{userId:y,encType:C},cmd:{jids:w}}=g,{payload:{body:{senderName:D,senderJid:N,text:L,type:V,receiver:G,msgid:W,sn:X}}}=h,ne=Cw(w,G),me=C===F0.AES_GCM,_e=Cw(w,N),Re=(new Date).getTime();let Ne=Promise.resolve({message:L});return me&&(Ne=Ia.beginDecrypt({decryptedText:L,type:Ga.XMPP_CHAT,zoomId:X})),Ne.then(et=>{let{message:ht}=et;if(V===dg.Private&&Number(ne)===y||V===dg.All){const Qe=Bs(ht);if(null!=Qe&&Qe.startsWith(Sw.SpeakerOnly)){const wt=Qe.substring(Sw.SpeakerOnly.length),Xt=1===Number(wt);return tf({userId:Number(_e),key:"isSpeakerOnly",value:Xt})}{var ze;const wt=_e&&(null===(ze=w[_e])||void 0===ze?void 0:ze.userGuid);Ze(C1,{senderId:_e,senderName:D,senderGuid:wt,text:Qe,timestamp:Re,msgid:W})}}return""})}),Ut(l=>"object"==typeof l&&null!==l&&void 0!==l.type),Jn(l=>{const{payload:{userId:h,key:g,value:y}}=l;Ze(Wp,[{userId:h,[`${g}`]:y}])})),epics2:(i,u)=>Hd(i,24595).pipe(hn(l=>{const{payload:{body:{action:h,data:g}}}=l,y=[];if([od.List,od.Add,od.update].includes(h)&&g){const{breakoutRoom:C,participants:{attendeesList:w}}=u.value,D=C?.currentRoom.status===fr.InRoom?w.concat(C.mainSessionAttendeeList):w;y.push(_b({data:g,attendees:D}))}return h===od.Remove&&g&&y.push(ip(g)),kn(y)}))},jN),yS=(i,u,l,h)=>{const{getState:g,dispatch:y}=l,C=g(),{participants:{attendeesList:w},audio:{localShareAudioUserMutedList:D},share:{isReceiveSharingFromMainSession:N},breakoutRoom:L}=C,V=(N?L?.mainSessionAttendeeList:w).find(G=>G.userId==i);if(V){if(V.bShareAudioOn){const G=D.find(W=>W.userId===i);return G&&G.muted===!u&&y(uy(h,i,u,C)),Promise.resolve("")}return Promise.reject({type:nn,reason:`Cannot ${u?"mute":"unmute"} share audio when the user's share audio is not enable.`})}return Promise.reject({type:Pr,reason:"Cannot find the user"})},ww=(i,u)=>{const{store:{getState:l},rwgAgent:h}=i,{share:{sharePrivilege:g}}=l();return g===u?Promise.resolve(""):Object.values(pu).includes(u)?(h.lockSharing(u),Lr(Yg,y=>y.lockShare===u)):Promise.reject({type:Pr})},Tw=Rs([Uo],i=>i.filter(u=>u.bVideoOn)),JO=Rs([Tw],i=>i.filter(u=>262144==(262144&u.caps))),Rw=(i,u)=>{const l=i.store.getState(),h=C_(l).find(g=>g.userId===u);if(h){const{caps:g}=h;return 512==(512&g)}return!1};var ES,XO,Dw,Ow,ZO,kw,ek,HN,J_,tk,xy,Pw,Ly,By,nk,AU,rk,ik,GN,Mw,yU,gd,Nw,hg,WN,ok,bS,SS,Fy,Uy,xw,Lw,CS,KN,js,bi,Bw,Fw,Sh,xi,zN,sk,qN,ak,IS,Uw,Vw,jw,jl,Xo,yc,ck,X_,lk,uk,dk,Rf,YN,$N,Vy,JN,Qw,XN,EU,Hw,ZN,Gw,ex,J,It;const Ql=hp("Audio"),Na=hp("Video"),Ec=hp("Sharing"),Hl=hp("CameraControl"),Ch=hp("Remote Control"),wS=CN(HTMLCanvasElement,0),Ww=CN(HTMLCanvasElement,0,["id"]);let Kw=(ES=er("audio"),XO=er("audio"),Dw=er("audio"),Ow=er("audio"),ZO=er("audio"),kw=hp("Audio",[1,2,3]),ek=er("audio"),HN=hp("Audio",[1,2]),J_=er("audio"),tk=er("audio"),xy=er("audio"),Pw=er("audio"),Ly=er("share"),By=er("audio"),nk=er("share"),AU=er("audio"),rk=er("audio"),ik=er("audio"),GN=er("audio"),Mw=er("video"),yU=er("video"),gd=er("video"),Nw=er("video"),hg=er("video"),WN=er("video"),ok=er("video"),bS=er("video"),SS=er("video"),Fy=er("video"),Uy=er("video"),xw=er("video"),Lw=er("video"),CS=er("video"),KN=er("video"),js=er("video"),bi=er("video"),Bw=er("video"),Fw=er("video"),Sh=er("video"),xi=er("video"),zN=er("video"),sk=er("video"),qN=er("video"),ak=er("share"),IS=er("share"),Uw=er("share"),Vw=er("share"),jw=er("share"),jl=er("share"),Xo=er("share"),yc=er("share"),ck=wy("isShareOptionLocked"),X_=wy("isShareOptionLocked"),lk=er("share"),uk=er("share"),dk=er("share"),Rf=er("share"),YN=er("share"),$N=er("share"),Vy=er("share"),JN=er("share"),Qw=er("share"),XN=er("share"),EU=er("share"),Hw=er("share"),ZN=er("share"),Gw=er("share"),ex=er("share"),J=er("share"),It=class extends vh{constructor(i){super(i),this[Vo].dispatch(zi()),this[mn]={store:i,mediaAgent:p2(gc(Qr.getInstance())),rwgAgent:kr.createAgent()}}startAudio(i){return((u,l)=>{const{store:{getState:h,dispatch:g},rwgAgent:y,mediaAgent:C}=u,w=h(),{speakerOnly:D,autoStartAudioInSafari:N}=l||{},L=Yn(w);if(L?.audio===uo.Computer)return Promise.resolve();if(L?.audio===uo.Phone)return Promise.reject({type:nn,reason:"joined by phone"});{const{audio:{isAllowToTalk:V,isComputerAudioLoading:G,canPlayAudio:W,customizeAudioOption:{speakerOnly:X}},media:{audioDecodeStatus:ne,audioEncodeStatus:me}}=w;if(G)return Promise.reject({type:nn,reason:"Computer audio has been loading, please wait."});if(Hb()||!0!==l?.backgroundNoiseSuppression||(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on Chromium-like browser"),Object.assign(l,{backgroundNoiseSuppression:void 0})),vl()||!0!==l?.syncButtonsOnHeadset||(console.warn("Sync buttons on headset is not supported on the current platform"),Object.assign(l,{syncButtonsOnHeadset:void 0})),null!=l&&l.mediaFile&&!Qr.isSupportMediaPlaybackAsVideoInput()&&(console.warn("Cannot use media file as audio input due to the browser limitation"),Object.assign(l,{mediaFile:void 0})),g(RC(l??{})),!!X!=!!D&&g(tf({userId:w.meeting.userId,key:"isSpeakerOnly",value:!!D})),!L)return Promise.reject({type:nn,reason:"Please call `startAudio` method after the `join` has been resolved"});{const _e=Ds(L.userRole)&&!V||D,{encodeInitStatus:Re,decodeInitStatus:Ne}=ZD(w,L,D);if(BI()&&("success"!==Ne||"success"!==Re))return Promise.reject({type:nn,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method"});g(m_(!0)),Os("audio",Re,Ne).subscribe(et=>{let[ht,ze]=et;if(ht&&ze){let Qe=W||(BI()||dr.isIOSMobile)&&!N?Promise.resolve():function(){const wt=URL.createObjectURL(w1),Xt=new Audio(wt);return Xt.muted=!1,dr.isIOSMobile?new Promise((_t,it)=>{var Ce;Xt.addEventListener("canplaythrough",()=>{Xt.play().then(()=>{_t(!0)}).catch(Ye=>{it(Ye)}).finally(()=>{URL.revokeObjectURL(wt)})}),null===(Ce=Xt.load)||void 0===Ce||Ce.call(Xt)}):Promise.race([Xt.play(),new Promise((_t,it)=>{window.setTimeout(()=>{it()},3e3)})]).finally(()=>{URL.revokeObjectURL(wt)})}();void 0===Qe&&(Qe=Promise.resolve()),Qe.then(()=>nD("audio",h())).then(()=>{const wt=h(),{audio:{isSharingAudio:Xt}}=wt;U_(y,wt,_e),Xt&&!fh()||F_(C,wt,!_e),Ds(L.userRole)&&V&&g(pR(!0)),g(f_(!0))}).catch(()=>{g(f_(!1)),g(m_(!1))})}else g(m_(!1))})}return"failed"===me||"failed"===ne?(g(m_(!1)),Promise.reject({type:Xp,reason:"audio encode or decode error"})):new Promise((_e,Re)=>{Hu(Oo(Xd.JoinComputerAudio.success,1),un(...Xd.JoinComputerAudio.fail.map(Ne=>Oo(Ne,1).pipe(hn(()=>Fh({type:Gi,reason:Ne}))))),sa(45e3).pipe(hn(()=>Fh({type:gC})))).subscribe(()=>{g(m_(!1)),_e("")},Ne=>{C.leaveComputerAudio(),Yn(h())?.audio===uo.Computer&&y.joinOrLeaveVoip(!1),g(m_(!1)),Re(Ne)})})}})(this[mn],i)}stopAudio(){return function(){var i=F(function*(u){const{store:{getState:l,dispatch:h},mediaAgent:g,rwgAgent:y}=u,C=l(),{audio:{isComputerAudioLoading:w,isShareAudioEnabled:D,isSharingAudio:N,isUsingMediaPlayback:L,customizeAudioOption:{speakerOnly:V}}}=C,G=Yn(C);if(w)return Promise.reject({type:nn,reason:"Computer audio has not finished joining, please wait."});if(D){if(N&&!fh())return Promise.reject({type:nn,reason:"Cannot stop audio during sharing with audio"});h(_u(void 0)),h(ul(void 0))}return G?.audio===uo.Computer?(yield g.leaveComputerAudio(),y.joinOrLeaveVoip(!1),V&&h(tf({userId:C.meeting.userId,key:"isSpeakerOnly",value:void 0})),L&&gl.getInstance().stopAudioElement(),h(Nl(0)),Lr(Yp)):Promise.resolve("")});return function(u){return i.apply(this,arguments)}}()(this[mn])}muteAudio(i){return((u,l)=>{const{store:{getState:h,dispatch:g},rwgAgent:y,mediaAgent:C}=u,w=h(),D=Yn(w);if(null==l||l===D?.userId)return""===D?.audio||null===D?.audio?Promise.reject({type:nn,reason:"no audio joined"}):!0===D?.muted?Promise.resolve(""):(g(nh(Es.Active)),y.mute(D.userId,!0),C.muteAudio(),w.audio.isShareAudioEnabled&&!fh()&&g(ul(!0)),Lr(iC).then(()=>""));if(fu(w)){const{participants:{allowTalkAttendeesList:N,attendeesList:L}}=w,V=N.concat(L).find(G=>G.userId===l);return V?""===V.audio||null===V?Promise.reject({type:nn,reason:"no audio joined"}):!1===V.muted?(y.mute(l,!0),Lr(Jd,G=>G.id===l&&1==G.muted)):Promise.resolve(""):Promise.reject({type:Pr,reason:"no matching user"})}return Promise.reject({type:Gi})})(this[mn],i)}unmuteAudio(i){return(u=F(function*(l,h){const{store:{getState:g,dispatch:y},rwgAgent:C,mediaAgent:w}=l,D=g(),N=Yn(D);if(void 0===h||h===N?.userId){if(""===N?.audio||null===N?.audio)return Promise.reject({type:nn,reason:"no audio joined"});if(!1===N?.muted)return Promise.resolve("");if(D.audio.isShareAudioEnabled&&!fh()){if(D.audio.isSharingAudio)return Promise.reject({type:nn,reason:"Cannot unmute audio during sharing with audio"});y(ul(!1))}if(D.audio.bCanUnmute||null!=N&&N.isHost||null!=N&&N.bCoHost){if(Ds(N.userRole)){const{audio:{isAllowToTalk:L,isAllowToTalkAttendeeConnected:V}}=D;L?V||(yield w.leaveComputerAudio(),yield F_(w,D,!0),y(pR(!0))):Promise.reject({type:nn,reason:"Webinar attendee cannot unmute self audio."})}return y(hA(Ju.Active)),C.mute(N.userId,!1),w.unmuteAudio(),Lr(L1).then(()=>"")}return Promise.reject({type:Gi,reason:"host not allow unmute themselves"})}if(fu(D)){const{participants:{allowTalkAttendeesList:L,attendeesList:V}}=D,G=L.concat(V).find(W=>W.userId===h);return G?""===G.audio||null===G?Promise.reject({type:nn,reason:"no audio joined"}):(!0===G.muted&&C.mute(h,!1),Promise.resolve("")):Promise.reject({type:Pr,reason:"no matching user"})}return Promise.reject({type:Gi})}),function(l,h){return u.apply(this,arguments)})(this[mn],i);var u}dialOut(i,u,l,h){return((g,y,C,w,D)=>{const{store:{getState:N,dispatch:L},rwgAgent:V}=g,G=N(),{meeting:{callOutCountry:W,isSupportCallOut:X}}=G;if(X&&Array.isArray(W)&&W.findIndex(ne=>ne.code===y)>-1){const{seq:ne}=V.audioDialout(y+C,w,!(null==D||!D.callMe),!(null==D||!D.pressingOne),!(null==D||!D.greeting));return L(BM({sequence:ne,phoneNumber:y+C})),ef(Xd.JoinAudioByCallMe)}return Promise.reject({type:Pr,reason:"no matching country code"})})(this[mn],i,u,l,h)}cancelDialOut(i,u,l){return((h,g,y,C)=>{const{rwgAgent:w}=h;return w.audioCancelDialout(g+y,!(null==C||!C.callMe)),ef(Xd.cancelDialOut)})(this[mn],i,u,l)}hangup(){return(i=>{const{store:{getState:u},rwgAgent:l}=i,h=u(),g=Yn(h);return g?.audio===uo.Phone&&null!==g.userId?(l.audioDrop(g.userId),ef(Xd.hangup)):Promise.reject({type:nn,reason:"not joined audio by phone"})})(this[mn])}switchMicrophone(i){return((u,l)=>{const{store:{getState:h,dispatch:g},mediaAgent:y}=u,C=h(),{audio:{microphoneDevicesList:w,activeMicrophone:D,mediaPlaybackFile:N,isUsingMediaPlayback:L}}=C,V=w.find(G=>G.deviceId===l);if("default"===l||"string"!=typeof l||V){const G=Yn(C);if("string"==typeof l)l!==D&&(y.changeMicrophone(l,V?.label,!(null==G||!G.muted)),g(YE(l)),g(vR(void 0)),gl.getInstance().stopAudioElement());else if(l&&(!L||N?.url!==l.url)){const W=gl.getInstance();W.setAudioElement(l).then(()=>{y.changeMicrophone(W.audioElement,void 0,!(null==G||!G.muted)),g(vR(l))})}return Promise.resolve("")}return Promise.reject({type:HE})})(this[mn],i)}switchSpeaker(i){return((u,l)=>{const{store:{getState:h,dispatch:g},mediaAgent:y}=u,{audio:{speakerDevicesList:C,activeSpeaker:w}}=h();return"default"!==l&&-1==C.findIndex(D=>D.deviceId===l)?Promise.reject({type:HE}):(l!==w&&(y.changeSpeaker(l),g(gu(l))),Promise.resolve(""))})(this[mn],i)}muteShareAudio(i){return((u,l)=>{const{mediaAgent:h,rwgAgent:g,store:{getState:y,dispatch:C}}=u,w=y(),{meeting:{userId:D}}=w;if(l&&l!==D)return yS(l,!0,u.store,h);{const{audio:{isSharingAudio:L,isShareAudioEnabled:V,isShareAudioMuted:G}}=w;if(!V)return Promise.reject({type:nn,reason:"Cannot mute sharing audio when sharing audio is not enable"});if(G)return Promise.resolve("");{g.muteShareAudio(!0);let W=Promise.resolve();var N;return L&&(W=null===(N=h.leaveSharingAudio(!0))||void 0===N?void 0:N.then(()=>dy(h,g,w).then(X=>{X.forEach(ne=>C(ne))}))),uy(h,D,!0,w),Promise.all([Lr({event:wa,operations:[Ut(X=>void 0!==X.bShareAudioOn),ki(1)]},X=>!1===X.bShareAudioOn),W]).then(()=>(C(dA(!0)),L&&(C(pA(!1)),Ze(i_,{state:"off"})),""))}}})(this[mn],i)}unmuteShareAudio(i){return((u,l)=>{const{mediaAgent:h,rwgAgent:g,store:{getState:y,dispatch:C}}=u,w=y(),{meeting:{userId:D}}=w;if(l&&l!==D)return yS(l,!1,u.store,h);{const{audio:{isSharingAudio:N,isShareAudioEnabled:L,isShareAudioMuted:V},share:{status:G}}=w;if(!L)return Promise.reject({type:nn,reason:"Cannot unmute sharing audio when sharing audio is not enable"});if(!1===V)return Promise.resolve("");{g.muteShareAudio(!1);let W=Promise.resolve();return!1===N&&G===yi.Sharing&&(W=Su(h,g,w).then(X=>{X.forEach(ne=>C(ne))})),uy(h,D,!1,w),Promise.all([Lr({event:wa,operations:[Ut(X=>void 0!==X.bShareAudioOn),ki(1)]},X=>!0===X.bShareAudioOn),W]).then(()=>(C(dA(!1)),!1===N&&G===yi.Sharing&&(C(pA(!0)),Ze(i_,{state:"on"})),""))}}})(this[mn],i)}subscribeAudioStatisticData(i){return(u=F(function*(l,h){const{mediaAgent:g,store:{getState:y}}=l,C=y(),w=Yn(C),D=!h||h.decode,N=!h||h.encode;if(!w)return Promise.reject({type:nn,reason:"Call this function after the 'join' method resolved."});{const{encodeInitStatus:L,decodeInitStatus:V}=ZD(C,w);Os("audio",L,V).subscribe(G=>{let[W,X]=G;W&&X&&(D&&g.subscribeToQos([ys.AudioDecode],zp),N&&g.subscribeToQos([ys.AudioEncode],zp))})}return""}),function(l,h){return u.apply(this,arguments)})(this[mn],i);var u}unsubscribeAudioStatisticData(i){return(u=F(function*(l,h){const{mediaAgent:g,store:{dispatch:y}}=l,w=!h||h.encode;return(!h||h.decode)&&(g.unsubscribeFromQos([ys.AudioDecode]),y(TC(R1))),w&&(g.unsubscribeFromQos([ys.AudioEncode]),y($E(R1))),null}),function(l,h){return u.apply(this,arguments)})(this[mn],i);var u}enableBackgroundNoiseSuppression(i){return((u,l)=>{const{mediaAgent:h,store:{getState:g,dispatch:y}}=u,{audio:{isBackgroundNoiseSuppression:C}}=g();return l===!!C||(l&&!Hb()?console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on Chromium-like browser"):(h.enableAudioDenoise(l),y(jM(l)))),Promise.resolve("")})(this[mn],i)}enableSyncButtonsOnHeadset(i){return((u,l)=>{const{mediaAgent:h,store:{getState:g,dispatch:y}}=u,C=g(),{audio:{isHIDEnabled:w,microphoneDevicesList:D,activeMicrophone:N}}=C;if(l===!!w)return Promise.resolve("");{const V=Yn(C);var L;return V?(l&&!vl()?console.warn("Sync buttons on headset is not supported on the current platform"):(h.enableSyncButtonsOnHeadset(l,null===(L=D.find(G=>G.deviceId===N))||void 0===L?void 0:L.label,V.muted),y(_R(l))),Promise.resolve("")):Promise.reject({type:nn,reason:"Please call `enableSyncButtonsOnHeadset` method after the `join` has been resolved"})}})(this[mn],i)}getMicList(){return(i=>{let{store:{getState:u}}=i;const l=u();return l.audio?[...l.audio.microphoneDevicesList]:[]})(this[mn])}getSpeakerList(){return(i=>{let{store:{getState:u}}=i;const l=u();return l.audio?[...l.audio.speakerDevicesList]:[]})(this[mn])}getAudioState(i){return((u,l)=>{let{store:{getState:h}}=u;const g=h(),{meeting:{isWebinar:y}}=g;let C=null;return null==l?C=Yn(g):(C=g.participants.attendeesList.find(w=>w.userId===l),y&&!C&&(C=g.participants.xmppAttendeeList.find(w=>w.userId===l))),C?C.audio:null})(this[mn],i)}isAudioMuted(i){return((u,l)=>{let{store:{getState:h}}=u;const g=h(),{meeting:{isWebinar:y}}=g;let C=null;return void 0===l?C=Yn(g):(C=g.participants.attendeesList.find(w=>w.userId===l),y&&!C&&(C=g.participants.xmppAttendeeList.find(w=>w.userId===l))),!!C&&!!C.muted})(this[mn],i)}getActiveMicrophone(){return(i=>{let{store:{getState:u}}=i;const l=u();return l.audio?l.audio.activeMicrophone:null})(this[mn])}getActiveSpeaker(){return(i=>{let{store:{getState:u}}=i;const l=u();return l.audio?l.audio.activeSpeaker:null})(this[mn])}isSupportCallOut(){return(i=>{let{store:{getState:u}}=i;const{meeting:{isSupportCallOut:l,callOutCountry:h}}=u();return l&&Array.isArray(h)&&h?.length>0})(this[mn])}getDialOutStatus(){return(i=>{let{store:{getState:u}}=i;const{audio:l}=u();return l?.dialout[l.dialout.length-1].returnCode})(this[mn])}getDialOutCountries(){return(i=>{let{store:{getState:u}}=i;const{meeting:{callOutCountry:l}}=u();return Array.isArray(l)?l:[]})(this[mn])}getShareAudioStatus(){return(i=>{let{store:{getState:u}}=i;const{audio:{isShareAudioEnabled:l,isShareAudioMuted:h,isSharingAudio:g}}=u();return{isShareAudioEnabled:l,isShareAudioMuted:h,isSharingAudio:g}})(this[mn])}isOthersShareAudioMutedLocally(i){return((u,l)=>{var h;let{store:{getState:g}}=u;const{audio:{localShareAudioUserMutedList:y}}=g();return null===(h=y.find(C=>C.userId===l))||void 0===h?void 0:h.muted})(this[mn],i)}getAudioStatisticData(){return(i=>{let{store:{getState:u}}=i;const{audio:{statistic:l}}=u();return{...l}})(this[mn])}getDialInInfo(){return(i=>{let{store:{getState:u}}=i;const{meeting:{meetingNumber:l,tollNumbers:h,participantID:g,h323Password:y}}=u();return void 0===h?null:{meetingId:l,participantId:g,password:y||"",tollNumbers:h.map(C=>({...C}))}})(this[mn])}isSupportMicrophoneAndShareAudioSimultaneously(){return fh()}startVideo(i){return((u,l)=>{const{store:{getState:h,dispatch:g},mediaAgent:y}=u,C=h(),{media:{videoDecodeStatus:w,videoEncodeStatus:D,enforceVirtualBackground:N},video:{isCaptureCameraLoading:L,isCurrentUserStartedVideo:V,isVideoMuted:G}}=C;return V?Promise.reject({type:nn,reason:"Video is started"}):L?Promise.reject({type:nn,reason:"Camera is starting,please wait."}):G&&!fu(C)?Promise.reject({type:nn,reason:"Video is muted by the host"}):!_N(N)||dr.isIOSMobile||l?.videoElement instanceof HTMLVideoElement?!uI(N)&&null!=l&&l.virtualBackground?Promise.reject({type:Pr,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled."}):(g(_A(!0)),Os("video",D,w).subscribe(W=>{let[X]=W;if(X){const ne=h(),{video:{activeCamera:me,isSupportHDVideo:_e,virtualBackground:{imageSrc:Re},mask:{imageSrc:Ne}}}=ne,{cameraId:et=me,captureWidth:ht=0,captureHeight:ze=0,mirrored:Qe,hd:wt,virtualBackground:Xt,mask:_t}=l||{};Qe&&y.mirrorVideo(Qe),wt&&(console.log("HD support is currently limited, and comes with a number of restrictions and limitations. Please visit https://developers.zoom.us/docs/video-sdk/web/video/#720p-video for more details"),_e&&Qr.isCompatibleHardwareForEncode()&&Qr.isSupportVideoEncodeHardwareAcceleration().then(Ge=>{Ge&&(y.enableHardwareAccelerationForVideoEncode(!0),g(cf({encode:Ge})))}),_e||console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation"));const it=Xt||void 0===Xt&&!!Re&&void 0===_t,Ce=_t||void 0===_t&&!!Ne;let Ye=Promise.resolve({});if(it){const Ge=Xt||{imageUrl:void 0,cropped:void 0};Ye=uS({...Ge,captureWidth:ht,captureHeight:ze,cameraId:et,hd:wt},y,ne).then(()=>Ge)}else if(Ce){const Ge=_t||{imageUrl:void 0,cropped:void 0,clip:void 0,rootWidth:void 0,rootHeight:void 0};Ge.rootWidth||Object.assign(Ge,{rootWidth:1280}),Ge.rootHeight||Object.assign(Ge,{rootHeight:720}),Ye=DO({...Ge,captureWidth:ht,captureHeight:ze,cameraId:et,hd:wt},y,ne).then(()=>Ge)}null!=l&&l.mediaFile&&!Qr.isSupportMediaPlaybackAsVideoInput()&&(console.warn("Cannot use media file as video input due to the browser limitation."),Object.assign(l,{mediaFile:void 0})),Ye.then(Ge=>nD("video",h()).then(()=>Ge)).then(Ge=>{ew(y,ne,l).forEach(ut=>{g(ut)}),it?g(yA(Ge)):Ce&&g(zC(Ge))}).catch(Ge=>{g(_A(!1)),Ze($r,{reason:Ge})})}else g(_A(!1))}),ef(AM.startCaptureVideo).then(()=>{g(ib(!1)),g(FC(!1))}).finally(()=>{g(_A(!1))})):Promise.reject({type:Pr,reason:"You must pass a <video> element to start video capture for Chromium browser, Android browser, and Chrome without SharedArrayBuffer support."})})(this[mn],i)}stopVideo(){return(i=>{const{store:{getState:u},mediaAgent:l}=i,{video:{isCaptureCameraLoading:h,isCurrentUserStartedVideo:g,isUsingMediaPlayback:y}}=u();return h?Promise.reject({type:nn,reason:"Camera is starting,please wait."}):g?(l.stopCaptureVideo(),y&&gl.getInstance().stopVideoElement(),Lr($h,C=>!0!==C?.failed)):Promise.reject({type:nn,reason:"camera is closed"})})(this[mn])}switchCamera(i){return((u,l)=>{const{store:{getState:h,dispatch:g},mediaAgent:y}=u,C=h(),{video:{cameraDevicesList:w,isCurrentUserStartedVideo:D,virtualBackground:N,mask:L,mediaPlaybackFile:V,isUsingMediaPlayback:G,customizedVideoOption:W}}=C;if("string"==typeof l&&!wO(l,w))return Promise.reject({type:Pr,reason:"Cannot find cameraDeviceId in camera devices list."});if(D||null!=N&&N.isVBConfigured||L.isMaskConfigured){if("string"==typeof l){const{captureWidth:X,captureHeight:ne}=ZI(W);y.changeCamera(l,{width:X,height:ne}),g(v_(void 0)),gl.getInstance().stopVideoElement()}else if(l&&(!G||V?.url!==l.url)){const X=gl.getInstance();X.setVideoElement(l).then(()=>{y.changeCamera(X.videoElement),g(v_(l))})}return ef(AM.switchCameraVideo).then(()=>{g(ib(!1)),g(FC(!1))})}return Promise.resolve()})(this[mn],i)}renderVideo(i,u,l,h,g,y,C,w,D){return((N,L,V,G,W,X,ne,me,_e,Re)=>{const{store:{getState:Ne,dispatch:et},mediaAgent:ht,rwgAgent:ze}=N,Qe=Ne(),{meeting:{userId:wt},media:{enforceMultipleVideos:Xt},video:{subscribedVideoList:_t,renderedVideoList:it}}=Qe,Ce=Gg(!!Xt);if(!_t.includes(V)&&_t.length>=Ce&&new Set(it.map(ut=>ut.canvasId)).has(L.id))return Promise.reject({type:nn,reason:`subscribe video counts greater than maximum size (${Ce})`});if(-1===Tw(Qe).findIndex(ut=>ut.userId===V))return Promise.reject({type:Pr,reason:"user is not send video"});const Ye=!!Re,{media:{videoDecodeStatus:Ge}}=Qe;return L.id||(L.id=Hh("__ZOOM_SDK_VIDEO_CANVAS_@__")),Os("video","success",Ge).subscribe(function(){var ut=F(function*(mt){let[St]=mt;if(St){const{video:{ensuredCanvas:Wt,maximumNumbeOfHDSubscriptions:en,isSupportHDVideo:rn,renderedVideoList:on,receivedVideoMaxQuality:hr}}=Ne();let Hn=L;Wt.includes(L.id)||(Hn=R_(L),et(bA(L.id)));const Er=V===wt,or=_e||Yh;let xr=me;if(me===ol.Video_720P)if(rn){const Tt=on.filter(Zt=>Zt.videoQuality===ol.Video_720P).map(Zt=>Zt.userId);Tt.length>=(en??1)&&(Tt.includes(V)||Er||(console.warn("Warning: Web Video SDK currently only supports subscribing to one 720p video stream, so quality has been downgraded to 360p"),xr=ol.Video_360P))}else console.warn("Can not subscribe 720P video stream,will downgrade to 360P stream"),xr=ol.Video_360P;const Wi=yield(Tt=F(function*(at,Zt){const{video:{prefetchedVideo:xn}}=Zt;return xn?.userId!==at||xn.loaded?"":oc(Hu(Oo(N1,1),sa(1e3).pipe(Ea(""))))}),function(at,Zt){return Tt.apply(this,arguments)})(V,Ne());on.some(Tt=>Tt.userId===V&&Tt.key===or&&Tt.canvasId===Hn.id)||ht.renderVideo(Hn.id,V,or,G,W,X,ne,xr,Er,Re||"",Ye);const Si=Math.max(hr,ol.Video_360P),Bt=Math.min(xr,Si);V!==wt&&ze.subscribeVideo(V,Bt,!1),_t.includes(V)||et(vA(V)),Wi&&et(SA(void 0)),et(AA({userId:V,key:or,canvasId:Hn.id,videoQuality:xr,aspectRatio:W?G/W:0}))}var Tt});return function(mt){return ut.apply(this,arguments)}}()),"failed"===Ge?Promise.reject({type:Xp,reason:"Video  decode status is failed"}):Promise.resolve("")})(this[mn],i,u,l,h,g,y,C,w,D)}stopRenderVideo(i,u,l,h){return function(C,w,D,N,L){let V=arguments.length>5&&void 0!==arguments[5]&&arguments[5],G=arguments.length>6?arguments[6]:void 0;const{store:{getState:W,dispatch:X},mediaAgent:ne,rwgAgent:me}=C,_e=W(),{video:{subscribedVideoList:Re,renderedVideoList:Ne},meeting:{userId:et}}=_e;if(Re.includes(D)){const ht=N||Yh;if(Ne.find(ze=>ze.userId===D&&ze.key===ht&&ze.canvasId===w.id)&&(ne.stopRenderVideo(w.id,D,ht,gN(L),V),1==Ne.filter(ze=>ze.userId===D).length&&(D!==et&&me.unsubscribeVideo(D),X(qM(D))),X(jC({userId:D,key:ht,canvasId:w.id}))),G){const{video:{subscribedVideoList:ze,prefetchedVideo:Qe}}=W();Tw(_e).find(wt=>wt.userId===G)&&!ze.includes(G)&&Qe?.userId!==G&&X(SA({userId:G,lastCopy:Qe}))}}return Promise.resolve("")}(this[mn],i,u,l,h,arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}updateVideoCanvasDimension(i,u,l){return((h,g,y,C)=>{const{mediaAgent:w}=h;return w.updateRenderedVideoCanvasDimension(g.id,y,C),Promise.resolve("")})(this[mn],i,u,l)}adjustRenderedVideoPosition(i,u,l,h,g,y,C){return((w,D,N,L,V,G,W,X)=>{const{store:{getState:ne,dispatch:me},mediaAgent:_e}=w,{video:{subscribedVideoList:Re}}=ne();if(!Re.includes(N))return Promise.reject({type:Pr,reason:"userId is not correct"});{const Ne=X||Yh;_e.adjustRenderedVideoPosition(D.id,N,Ne,G,W,L,V,gN("#000")),me(AA({userId:N,key:Ne,canvasId:D.id,aspectRatio:V?L/V:0}))}return Promise.resolve("")})(this[mn],i,u,l,h,g,y,C)}clearVideoCanvas(i,u){return((l,h,g)=>{const{mediaAgent:y}=l;return y.clearVideoCanvas(h.id,gN(g)),Promise.resolve("")})(this[mn],i,u)}mirrorVideo(i){return((u,l)=>{const{store:{getState:h},mediaAgent:g}=u,{video:{isCurrentUserStartedVideo:y,virtualBackground:C}}=h();return(y||null!=C&&C.isVBConfigured)&&g.mirrorVideo(l),Promise.resolve("")})(this[mn],i)}enableHardwareAcceleration(i){return((u,l)=>{const{store:{getState:h,dispatch:g},mediaAgent:y}=u,{video:{isSupportHDVideo:C}}=h();if("boolean"==typeof l||void 0!==l.decode){const w="boolean"==typeof l?l:!!l.decode;return w?Qr.isSupportVideoDecodeHardwareAcceleration().then(D=>(D&&y.enableHardwareAccelerationForVideoDecode(D),g(cf({decode:D})),D)):(y.enableHardwareAccelerationForVideoDecode(w),g(cf({decode:w})),Promise.resolve(!0))}if("boolean"==typeof l||void 0!==l.encode){const w="boolean"==typeof l?l:!!l.encode;if(C){if(!w)return y.enableHardwareAccelerationForVideoEncode(!1),g(cf({encode:!1})),Promise.resolve(!0);if(Qr.isCompatibleHardwareForEncode())return Qr.isSupportVideoEncodeHardwareAcceleration().then(D=>(D&&y.enableHardwareAccelerationForVideoEncode(D),g(cf({encode:D})),D));console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation")}else"boolean"!=typeof l&&null!=l&&l.encode&&console.warn("Can not use the hardware acceleration for video encoding due to the account restriction")}return Promise.resolve(!1)})(this[mn],i)}subscribeVideoStatisticData(i){return(u=F(function*(l,h){const{mediaAgent:g,store:{getState:y,dispatch:C}}=l,{media:{videoDecodeStatus:w,videoEncodeStatus:D},video:{subscriptionStatus:N}}=y(),L=!h||h.decode,V=!h||h.encode;return Os("video",D,w).subscribe(G=>{let[W,X]=G;const ne={};L&&X&&!N.decode&&(g.subscribeToQos([ys.VideoDecode],zp),Object.assign(ne,{decode:!0})),V&&W&&!N.encode&&(g.subscribeToQos([ys.VideoEncode],zp),Object.assign(ne,{encode:!0})),null!=h&&h.detailed&&X&&!N.detailed&&(g.enableVideoObserver(!0),Object.assign(ne,{detailed:!0})),C(lf(ne))}),null}),function(l,h){return u.apply(this,arguments)})(this[mn],i);var u}unsubscribeVideoStatisticData(i){return(u=F(function*(l,h){const{mediaAgent:g,store:{dispatch:y}}=l,w=!h||h.encode,D={};return(!h||h.decode)&&(g.unsubscribeFromQos([ys.VideoDecode]),y(Dm(qd)),Object.assign(D,{decode:!1})),w&&(g.unsubscribeFromQos([ys.VideoEncode]),y(EA(qd)),Object.assign(D,{encode:!1})),null!=h&&h.detailed&&(g.enableVideoObserver(!1),Object.assign(D,{detailed:!1})),y(lf(D)),null}),function(l,h){return u.apply(this,arguments)})(this[mn],i);var u}previewVirtualBackground(i,u,l){return((h,g,y,C)=>{const{store:{getState:w,dispatch:D},mediaAgent:N}=h,L=w();return uS({imageUrl:y,cropped:C},N,L,g).then(V=>("object"==typeof V&&null!=V&&V.type&&D(V),D(yA({imageUrl:y,cropped:C})),!0)).catch(V=>Promise.reject({type:nn,reason:V}))})(this[mn],i,u,l)}updateVirtualBackgroundImage(i,u){return((l,h,g)=>{const{store:{getState:y,dispatch:C},mediaAgent:w}=l,D=y(),{video:{virtualBackground:{imageSrc:N,cropped:L},backgroundMode:V}}=D;return h===N&&g===L?Promise.resolve(!0):V===Yd.Mask?Promise.reject({type:nn,reason:"Cannot update virtual background in the mask mode"}):uS({imageUrl:h,cropped:g},w,D).then(G=>("object"==typeof G&&null!=G&&G.type&&C(G),C(yA({imageUrl:h,cropped:g})),!0)).catch(G=>Promise.reject({type:nn,reason:G}))})(this[mn],i,u)}stopPreviewVirtualBackground(){return(i=>{const{store:{getState:u},mediaAgent:l}=i,{video:{virtualBackground:{isVBConfigured:h}}}=u();return h?(l.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:nn,reason:"Cannot stop preview virtual background before start"})})(this[mn])}previewVideoMask(i,u){return((l,h,g)=>{const{store:{getState:y,dispatch:C},mediaAgent:w}=l,D=y();return g.rootWidth&&g.rootHeight||Object.assign(g,{rootWidth:h.width,rootHeight:h.height}),DO(g,w,D,h).then(N=>("object"==typeof N&&null!=N&&N.type&&C(N),C(zC(g)),!0)).catch(N=>Promise.reject({type:nn,reason:N}))})(this[mn],i,u)}updateVideoMask(i){return((u,l)=>{const{store:{getState:h,dispatch:g},mediaAgent:y}=u,C=h(),{video:{mask:w,backgroundMode:D}}=C,{isMaskConfigured:N}=w;if(D===Yd.VirtualBackground)return Promise.reject({type:nn,reason:"Cannot update mask in the virtual background mode"});if(N){const L={...l};return["imageUrl","cropped","clip","rootHeight","rootWidth"].forEach(V=>{void 0===l?.[V]&&Object.assign(L,"imageUrl"===V?{imageUrl:w.imageSrc}:{[`${V}`]:w[V]})}),DO(L,y,C).then(V=>("object"==typeof V&&null!=V&&V.type&&g(V),g(zC(L)),!0)).catch(V=>Promise.reject({type:nn,reason:V}))}return Promise.reject({type:nn,reason:"Cannot update mask"})})(this[mn],i)}stopPreviewVideoMask(){return(i=>{const{store:{getState:u},mediaAgent:l}=i,{video:{mask:{isMaskConfigured:h}}}=u();return h?(l.stopMaskSetting(),Promise.resolve(!0)):Promise.reject({type:nn,reason:"Cannot stop preview mask before start"})})(this[mn])}requestFarEndCameraControl(i){return((u,l)=>{const{store:{getState:h},rwgAgent:g}=u,y=h(),{meeting:{userId:C},video:{farEndCameraControlStatus:{controlledUserList:w}}}=y;return C===l?Promise.reject({type:nn,reason:'Using "stream.controlCamera" method to control self camera'}):-1!==JO(y).findIndex(D=>D.userId===l)?(w.includes(l)||g.sendFarEndCameraControl(Wa.Request,l),Promise.resolve("")):Promise.reject({type:Pr,reason:"Cannot request control camera with video off"})})(this[mn],i)}approveFarEndCameraControl(i){return((u,l)=>{const{store:{getState:h,dispatch:g},rwgAgent:y}=u,{video:{currentCameraControlStatus:{isRequested:C,isInControl:w,controllingUserId:D},ptz:N,activeCamera:L}}=h();if(C){if(w&&(!D||l===D))return Promise.resolve("");y.sendFarEndCameraControl(Wa.Approve,l);const V=N?.[L];return void 0!==V&&y.sendCameraAblity({pan:!!V.pan,tilt:!!V.tilt,zoom:!!V.zoom}),g(__(!1)),g(sb({isInControl:!0,userId:l})),Ze($d,{isControlled:!0,userId:l}),Promise.resolve("")}return Promise.reject({type:nn,reason:"Cannot approve before request"})})(this[mn],i)}declineFarEndCameraControl(i){return((u,l)=>{const{store:{getState:h,dispatch:g},rwgAgent:y}=u,{video:{currentCameraControlStatus:{isInControl:C,isRequested:w}}}=h();return w||C?(y.sendFarEndCameraControl(Wa.Decline,l),g(__(!1)),g(sb({isInControl:!1,userId:0})),Ze($d,{isControlled:!1}),Promise.resolve("")):Promise.reject({type:nn,reason:"Cannot decline before request"})})(this[mn],i)}giveUpFarEndCameraControl(i){return((u,l)=>{const{store:{getState:h,dispatch:g},rwgAgent:y}=u,{video:{farEndCameraControlStatus:{controlledUserList:C}}}=h();return C.includes(l)?(y.sendFarEndCameraControl(Wa.GiveUp,l),g(ab(l)),Promise.resolve("")):Promise.reject({type:nn,reason:"Cannot give up control befire aquired"})})(this[mn],i)}controlCamera(i){return((u,l)=>{const{store:{getState:h,dispatch:g},mediaAgent:y}=u,{video:{isCurrentUserStartedVideo:C,ptz:w,activeCamera:D}}=h();if(C){const{cmd:N,range:L,reset:V}=l,G=w[D];if(G){const W=Sy(G)||{},{key:X,range:ne}=cS(N,L);if(G[X])return Object.assign(W,{[X]:V?0:TO(G[X].capability,G[X].value,ne)}),y.movePTZCamera(W).then(()=>{g(KC({constraints:W,deviceId:D}))}).catch(me=>Promise.reject({type:nn,reason:me}))}return Promise.resolve("")}return Promise.reject({type:nn,reason:"Cannot control the camera before it's started"})})(this[mn],i)}controlFarEndCamera(i){return((u,l)=>{const{store:{getState:h,dispatch:g},rwgAgent:y}=u,C=h(),{video:{farEndCameraControlStatus:{controlledUserList:w,isControlling:D}}}=C,{userId:N,cmd:L,range:V}=l;if(D)return Promise.reject({type:nn,reason:"Cannot send new command while the previous control is not done"});if(w.includes(N)){if(L===Zg.SwitchCamera)return y.sendFarEndCameraControl(Wa.SwitchCamera,N,Zg.SwitchCamera),Promise.resolve("");{const G=JO(C).find(W=>W.userId===N);if(null==G||!G.nFECC)return Promise.reject({type:nn,reason:"The far end camera does not support PTZ"});if(V&&V>0){const W=V/100*1e4;return y.sendFarEndCameraControl(Wa.StartControl,N,L),g(PR(!0)),Mp(200).pipe(pE(sa(W-100))).subscribe(()=>{y.sendFarEndCameraControl(Wa.ContinueControl,N,L)}),oc(sa(W).pipe(Jn(()=>{y.sendFarEndCameraControl(Wa.StopControl,N,L),g(PR(!1))}))).then(()=>"")}return Promise.reject({type:Pr,reason:"Range cannot be negative or 0"})}}return Promise.reject({type:nn,reason:"Cannot control before request granted"})})(this[mn],i)}isCapturingVideo(){return(i=>{const{store:{getState:u}}=i,l=u();return!!l.video&&l.video.isCurrentUserStartedVideo})(this[mn])}isCameraTaken(){return(i=>{const{store:{getState:u}}=i,l=u();return!!l.video&&l.video.isCameraTaken})(this[mn])}isCaptureForbidden(){return(i=>{const{store:{getState:u}}=i,l=u();return!!l.video&&l.video.isCaptureForbidden})(this[mn])}getCameraList(){return(i=>{const{store:{getState:u}}=i,l=u();if(!l.video)return[];const{video:{cameraDevicesList:h}}=l;return h.map(g=>Object.assign({},g))})(this[mn])}getActiveCamera(){return(i=>{const{store:{getState:u}}=i,l=u();return l.video?l.video.activeCamera:""})(this[mn])}getActiveVideoId(){return(i=>{const{store:{getState:u}}=i,l=u();return l.video?l.video.activeVideoId:0})(this[mn])}getVideoMaxQuality(){return(i=>{const{store:{getState:u}}=i,l=u();return l.video?l.video.receivedVideoMaxQuality:ol.Video_90P})(this[mn])}getReceivedVideoDimension(){return(i=>{const{store:{getState:u}}=i,l=u();return l.video?l.video.receivedVideoDimension:null})(this[mn])}getCapturedVideoResolution(){return(i=>{const{store:{getState:u}}=i;return{...u().video.capturedVideoDimension}})(this[mn])}isSupportMultipleVideos(){return L0()}isSupportHDVideo(){return(i=>{var u;const{store:{getState:l}}=i;return null===(u=l().video)||void 0===u?void 0:u.isSupportHDVideo})(this[mn])}getHardwareAccelerationStatus(){return(i=>{var u;const{store:{getState:l}}=i;return null===(u=l().video)||void 0===u?void 0:u.hardwareAcceleration})(this[mn])}getVideoStatisticData(){return(i=>{let{store:{getState:u}}=i;const{video:{statistic:l}}=u();return{...l}})(this[mn])}isSupportVirtualBackground(){return(i=>{const{store:{getState:u}}=i;return uI(u().media.enforceVirtualBackground)})(this[mn])}getVirtualbackgroundStatus(){return(i=>{const{store:{getState:u}}=i;return{...u().video.virtualBackground}})(this[mn])}isRenderSelfViewWithVideoElement(){return _N(this[Vo].getState().media.enforceVirtualBackground)}getNetworkQuality(i){return((u,l)=>{var h;const{store:{getState:g}}=u,y=g(),{video:C,meeting:{userId:w}}=y,N=null==C||null===(h=C.networkQuality)||void 0===h?void 0:h[`${l??w}`];if(N){const L={};return N.uplink&&Object.assign(L,{uplink:N.uplink.level}),N.downlink&&Object.assign(L,{downlink:N.downlink.level}),L}return null})(this[mn],i)}getFarEndCameraPTZCapability(i){return((u,l)=>{const{store:{getState:h}}=u,g=JO(h()).find(y=>y.userId===l);return void 0!==g?.nFECC?RO(g?.nFECC):{pan:!1,tilt:!1,zoom:!1}})(this[mn],i)}getCameraPTZCapability(i){return((u,l)=>{const{store:{getState:h}}=u,{video:{ptz:g,activeCamera:y}}=h(),C=g[l??y];return{pan:!(null==C||!C.pan),tilt:!(null==C||!C.tilt),zoom:!(null==C||!C.zoom)}})(this[mn],i)}isBrowserSupportPTZ(){const{pan:i,tilt:u,zoom:l}=Qr.getPTZCapability();return i||u||l}getVideoMaskStatus(){return(i=>{var u;const{store:{getState:l}}=i,h=l(),{isMaskConfigured:g,imageSrc:y,...C}=(null===(u=h.video)||void 0===u?void 0:u.mask)||{};return{...C,imageUrl:y}})(this[mn])}startShareView(i,u,l){return((h,g,y,C)=>{const{store:{getState:w,dispatch:D},mediaAgent:N,rwgAgent:L}=h,{share:{isReceiveSharing:V,isRemoteSharingActive:G,activeNodeId:W,activeSsrc:X,status:ne,renderedEnsuredCanvas:me,isReceiveSharingFromMainSession:_e},media:{sharingDecodeStatus:Re}}=w();if(!g||y!==W)return Promise.reject({type:Pr,reason:""});if(!G||V||ne!==yi.End)return Promise.reject({type:nn,reason:""});g.id||(g.id=Hh("__ZOOM_SDK_SHARE_CANVAS_@__"));const Ne=!!C;return Os("sharing","success",Re).subscribe(et=>{let[,ht]=et;if(ht){let ze=g;me.includes(g.id)||(ze=R_(g),D(Uc(g.id))),D(OC(!0)),YA(L,w(),y),N.renderSharing(X,ze,Ne,C,_e);const{audio:Qe}=w();if(null!=Qe&&Qe.localShareAudioUserMutedList){const wt=Qe.localShareAudioUserMutedList.find(Xt=>Xt.userId===y);wt&&N.setSharingAudioVolume(y,wt.muted,wt.isFromMainSession)}}}),"failed"===Re?Promise.reject({type:Xp,reason:""}):Lr(WE,et=>!!et,6e4)})(this[mn],i,u,l)}stopShareView(){return(i=>{const{store:{dispatch:u,getState:l},rwgAgent:h,mediaAgent:g}=i,{share:{isReceiveSharing:y,activeNodeId:C},breakoutRoom:w}=l();if(!y)return Promise.resolve("");let D=!1;return w?.currentRoom.status===fr.InRoom&&w.mainSessionAttendeeList.length>0&&(D=w.mainSessionAttendeeList.findIndex(N=>N.userId===C)>-1),g.stopRenderSharing(),h.unsubscribeSharing(C,D),u(OC(!1)),Promise.resolve("")})(this[mn])}switchShareView(i){return((u,l)=>{const{store:{getState:h,dispatch:g},rwgAgent:y,mediaAgent:C}=u,w=h(),{share:{isReceiveSharing:D,activeNodeId:N,isReceiveSharingFromMainSession:L,remoteControlledUserList:V,isGrabRemoteControl:G},audio:W,breakoutRoom:X}=w;if(!D)return Promise.reject({type:nn});if(l===N)return Promise.resolve("");let ne=[];return ne=L?X.mainSessionAttendeeList.filter(me=>me.bShareToBORooms&&me.sharerOn):C_(w),ne.findIndex(me=>me.userId===N)>-1?(V.includes(N)&&(G&&y.subscribeGrabRemoteControl(N,!1),C.updateRemoteControlProperties({isControllerNow:!1})),y.unsubscribeSharing(N,L),YA(y,h(),l),C.switchSharingSource(l,L),V.includes(l)&&Nb(l,void 0,w,y,C),W?.localShareAudioUserMutedList.forEach(me=>{C.setSharingAudioVolume(l,me.userId!==l||me.muted,me.isFromMainSession)}),g(DC({bStatus:1,activeNodeID:l,ssrc:l})),Ze(Zv,{userId:l}),Promise.resolve("")):Promise.reject({type:Pr,reason:"no matching user id"})})(this[mn],i)}updateSharingCanvasDimension(i,u){return((l,h,g)=>{const{store:{getState:y},mediaAgent:C}=l,w=y(),{share:{isReceiveSharing:D,isGrabRemoteControl:N,remoteControlViewportDomSelector:L}}=w;if(D&&(C.updateRenderedSharingDimension(h,g),N&&L)){const V=document.querySelector(L);C.updateRemoteControlProperties({dimension:V&&ch(V)})}return Promise.resolve("")})(this[mn],i,u)}startShareScreen(i,u){return((l,h,g)=>{var y;const{store:{getState:C,dispatch:w},mediaAgent:D}=l,N=C(),{meeting:{bIbDisableShare:L,meetingOptions:V},share:{sharePrivilege:G,ssrc:W,isChromeExtensionInstalled:X,capturedEnsuredCanvas:ne,isReceiveSharingFromMainSession:me},media:{sharingEncodeStatus:_e},breakoutRoom:Re}=N,{isSupportMediaStreamTrackProcessor:Ne,isLegacyChrome:et}=dr;if(L)return Promise.reject({type:nn,reason:"information barrier"});if("function"!=typeof(null===(y=navigator.mediaDevices)||void 0===y?void 0:y.getDisplayMedia))return Promise.reject({type:nn,reason:"Unable to share your screen due to the technical limitation"});if(me)return Promise.reject({type:nn,reason:"Unable to share your screen while someone is sharing from the main session"});var ht;if(Ne){if(!(h instanceof HTMLVideoElement))return Promise.reject({type:Pr,reason:"Use Video element instead of Canvas element when WebCodecs enabled"})}else if(!(h instanceof HTMLCanvasElement))return Promise.reject({type:Pr,reason:`Expected to accept HTMLCanvasElement, but actual it is ${"object"==typeof h&&null!==h?null===(ht=Object.getPrototypeOf(h))||void 0===ht?void 0:ht.constructor.name:h}`});const ze=fu(N);if(null!=g&&g.broadcastToBreakoutRoom){if(!ze||Re?.currentRoom.status===fr.InRoom)return Promise.reject(ze?{type:nn,reason:"Unable to share screen to breakout room when in the room"}:{type:Gi});w(fA(!0))}else w(fA(!1));void 0!==g?.requestReadReceipt&&w(ZE(g?.requestReadReceipt)),void 0!==g?.optimizedForSharedVideo&&G!==pu.MultipleShare&&w(NC(g?.optimizedForSharedVideo&&Qr.isSupportVideoShareSend()));const Qe=C_(N);if(G===pu.OnlyHost&&!ze)return Promise.reject({type:Gi,reason:"only host can start screen share"});if(G===pu.HostGrab&&!ze&&Qe.length>0)return Promise.reject({type:Gi,reason:"only host can grab screen share"});if(!0===Yn(N)?.sharerOn)return Promise.reject({type:nn,reason:"you have already started screen share."});let Xt=Ii(!0);return et&&!X&&(D.checkChromeSharingExtension(),Xt=Oo(uC,1)),h.id||(h.id=Hh("__ZOOM_SDK_SELF_SHARE_CANVAS_@__")),Eo([Os("sharing",_e,"success"),Xt]).subscribe(_t=>{let[it,Ce]=_t;const[Ye]=it;if(Ye&&Ce){ne.includes(h.id)||(R_(h),w(CR(h.id)));let Ge=document.querySelector(`#${gM}`);Ge&&"VIDEO"===Ge.tagName||(Ge=document.createElement("video"),Ge.id=gM,Ge.style.display="none",document.body.appendChild(Ge));const ut=null!=g&&g.secondaryCameraId?{cameraId:g.secondaryCameraId,width:g.captureWidth,height:g.captureHeight}:void 0,mt=!(null!=g&&g.hideShareAudioOption);D.startDesktopSharing(W,h.id,gM,ut,null!=V&&V.isDisableShareAudioIntoBo?mt&&!(null!=g&&g.broadcastToBreakoutRoom):mt,g?.displaySurface,g?.sourceId,g?.controls),w(SR(!!ut))}}),new Promise((_t,it)=>{Hu(Oo(wa).pipe(Ut(Ce=>void 0!==Ce.sharerOn),ki(1)),Oo(uC).pipe(Ut(Ce=>!Ce),ki(1),Ar(Fh({reason:"required extension",extensionUrl:"https://chrome.google.com/webstore/detail/zoom-scheduler/kgjfgplpablkjnlkjmjdecgdpfankdle"}))),Oo($v,1).pipe(hn(Ce=>Fh({reason:Ce.reason||"user deny screen share"})))).subscribe(Ce=>{if(!0===Ce.sharerOn){const{share:{isSharingToBreakoutRoom:Ye},meeting:{meetingOptions:Ge}}=C();D.enableShareAudioToBreakoutRoom(!(null!=Ge&&Ge.isDisableShareAudioIntoBo||!Ye)),_t("")}else it({type:Xp})},Ce=>{it({type:nn,...Ce})})})})(this[mn],i,u)}stopShareScreen(){return(i=>{const{store:{getState:u,dispatch:l},rwgAgent:h,mediaAgent:g}=i,{share:{status:y},meeting:{userId:C}}=u();return y===yi.End?Promise.resolve(""):(l(Ll(yi.End)),h.stopSharing(C),g.stopDesktopSharing(),Lr(wa,w=>!1===w.sharerOn))})(this[mn])}pauseShareScreen(){return(i=>{const{store:{getState:u,dispatch:l},rwgAgent:h,mediaAgent:g}=i,{share:{status:y}}=u();return y===yi.Sharing?(h.pauseSharing(),g.pauseDesktopSharing(),Lr(wa,C=>!0===C.sharerPause).then(()=>(l(Ll(yi.Paused)),""))):Promise.reject({type:nn})})(this[mn])}resumeShareScreen(){return(i=>{const{store:{getState:u,dispatch:l},rwgAgent:h,mediaAgent:g}=i,{share:{status:y}}=u();return y===yi.Paused?(h.resumeSharing(),g.resumeDesktopSharing(),Lr(wa,C=>!0===C.sharerOn&&!1===C.sharerPause).then(()=>(l(Ll(yi.Sharing)),""))):Promise.reject({type:nn})})(this[mn])}setSharePrivilege(i){return ww(this[mn],i)}lockShare(i){return ww(this[mn],i?pu.OnlyHost:pu.HostGrab)}shareToBreakoutRoom(){return(i=>{const{store:{getState:u,dispatch:l},rwgAgent:h,mediaAgent:g}=i,{meeting:{userId:y},breakoutRoom:C,share:{isSharingToBreakoutRoom:w,status:D}}=u();return D===yi.End?Promise.reject({type:nn,reason:"Invalid sharing status"}):w?Promise.resolve(""):C.currentRoom.status===fr.InRoom?Promise.reject({type:nn,reason:"Unable to share screen to breakout room when in the room"}):(h.startShareToBreakoutRoom(y),l(fA(!0)),g.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[mn])}stopShareToBreakoutRoom(){return(i=>{const{store:{getState:u,dispatch:l},rwgAgent:h,mediaAgent:g}=i,{meeting:{userId:y},share:{isSharingToBreakoutRoom:C}}=u();return C&&(h.stopShareToBreakoutRoom(y),l(fA(!1)),g.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[mn])}muteOthersScreenShare(i){return((u,l)=>{const{store:{getState:h},rwgAgent:g}=u,y=h(),{meeting:{userId:C}}=y,w=C_(y);return l===C?Promise.reject({type:nn,reason:"Cannot mute self share, use 'stopScreenShare' instead"}):-1===w.findIndex(D=>D.userId===l)?Promise.reject({type:Pr,reason:"Target user is not sharing"}):(g.stopSharing(l),Lr(Wp,D=>D.some(N=>N.userId===l&&!1===N.sharerOn)))})(this[mn],i)}enableOptimizeForSharedVideo(i){return((u,l)=>{const{store:{getState:h,dispatch:g},mediaAgent:y,rwgAgent:C}=u,{share:{status:w,isOptimizedForSharedVideo:D,isSharingToBreakoutRoom:N,sharePrivilege:L},audio:{isSharingAudio:V},meeting:{userId:G}}=h();return w!==yi.End?D===l?Promise.resolve(""):L!==pu.MultipleShare?l&&!Qr.isSupportVideoShareSend()?Promise.reject({type:nn,reason:"Cannot enable optimize for shared video due to the platform is not supported "}):(C.startSharing(G,{bShareAudio:V,bShareToBO:N,bShareVideo:l}),y.switchSharingMode(l?_M.VideoMode:_M.Normal),Lr({event:wa,operations:[Ut(W=>void 0!==W.bVideoShare),ki(1)]},W=>W.bVideoShare===l).then(()=>(g(NC(l)),""))):Promise.reject({type:nn,reason:"Cannot enable optimize for shared video when enabling multiple screen shares"}):Promise.reject({type:nn,reason:"Cannot enable optimize for shared video when screen share is not started"})})(this[mn],i)}updateSharedVideoQuality(i){return((u,l)=>{const{store:{getState:h,dispatch:g},rwgAgent:y}=u,C=h(),{share:{shareQuality:w,activeNodeId:D,isReceiveSharing:N}}=C,L=Vc(C);return N&&0!==D?(L&&w!==l&&(YA(y,C,D,l),g(Ft(l))),Promise.resolve("")):Promise.reject({type:nn,reason:"Cannot update shared video quality when screen share is not started"})})(this[mn],i)}subscribeShareStatisticData(i){return(u=F(function*(l,h){const{mediaAgent:g,store:{getState:y}}=l,C=y(),{media:{sharingEncodeStatus:w,sharingDecodeStatus:D}}=y(),N=Yn(C),L=!h||h.decode,V=!h||h.encode;if(!N)return Promise.reject({type:nn,reason:"Call this function after the 'join' method resolved."});{const G=Ds(N.userRole)?"success":w;Os("sharing",G,D).subscribe(W=>{let[X,ne]=W;X&&ne&&(L&&g.subscribeToQos([ys.SharingDecode],zp),V&&g.subscribeToQos([ys.SharingEncode],zp))})}return""}),function(l,h){return u.apply(this,arguments)})(this[mn],i);var u}unsubscribeShareStatisticData(i){return(u=F(function*(l,h){const{mediaAgent:g,store:{dispatch:y}}=l,w=!h||h.encode;return(!h||h.decode)&&(g.unsubscribeFromQos([ys.SharingDecode]),y(mA(qd))),w&&(g.unsubscribeFromQos([ys.SharingEncode]),y(mA(qd))),null}),function(l,h){return u.apply(this,arguments)})(this[mn],i);var u}getShareUserList(){return(i=>{const{store:{getState:u}}=i,l=u();if(!l.share)return[];const{share:{isReceiveSharingFromMainSession:h}}=l;if(h){const{breakoutRoom:{mainSessionAttendeeList:g}}=l;return g.filter(y=>y.bShareToBORooms&&(y.sharerOn||y.sharerPause)).map(y=>pS(y))}return C_(l).map(g=>pS(g))})(this[mn])}getActiveShareUserId(){return(i=>{const{store:{getState:u}}=i,l=u();return l.share&&l.share.isRemoteSharingActive?l.share.activeNodeId:0})(this[mn])}isReceiveSharing(){return(i=>{const{store:{getState:u}}=i,l=u();return!!l.share&&l.share.isReceiveSharing})(this[mn])}getShareViewDimension(){return(i=>{const{store:{getState:u}}=i,l=u();if(l.share){if(l.share.status!==yi.End)return{...l.share.shareDimension};{const{share:{receivedShareDimension:h}}=l;return{width:h.width,height:h.height}}}return null})(this[mn])}getShareStatus(){return(i=>{const{store:{getState:u}}=i,l=u();return l.share?l.share.status:null})(this[mn])}isShareLocked(){return(i=>{const{store:{getState:u}}=i,l=u();return!!l.share&&l.share.sharePrivilege===pu.OnlyHost})(this[mn])}isReceiveSharingFromMainSession(){return(i=>{const{store:{getState:u}}=i,l=u();return!!l.share&&l.share.isReceiveSharingFromMainSession})(this[mn])}getSharePrivilege(){return(i=>{const{store:{getState:u}}=i,l=u();return l.share?l.share.sharePrivilege:null})(this[mn])}isStartShareScreenWithVideoElement(){return dr.isSupportMediaStreamTrackProcessor}isOptimizeForSharedVideoEnabled(){return(i=>{const{store:{getState:u}}=i,l=u();return!!l.share&&l.share.isOptimizedForSharedVideo})(this[mn])}isSupportOptimizedForSharedVideo(){return Qr.isSupportVideoShareSend()}getShareStatisticData(){return(i=>{let{store:{getState:u}}=i;const{share:{statistic:l}}=u();return{...l}})(this[mn])}requestRemoteControl(){return(i=>{const{store:{getState:u},rwgAgent:l}=i,{share:{isReceiveSharing:h,activeNodeId:g,isRemoteControlEnabled:y}}=u();return y?Rw(i,g)?h?oo(u())?Promise.reject({type:nn,reason:"Already get the approval"}):(l.sharingRequestRemoteControl(g,!0),new Promise(C=>{Oo(eA,1).subscribe(w=>{C(w)})})):Promise.reject({type:nn,reason:"Cannot request control due to no sharing available"}):Promise.reject({type:Pr}):Promise.reject({type:nn,reason:"Cannot request control due to the feature is not enabled."})})(this[mn])}giveUpRemoteControl(){return(i=>{const{store:{getState:u},rwgAgent:l}=i,{share:{isGrabRemoteControl:h,activeNodeId:g}}=u();return oo(u())?(h&&l.subscribeGrabRemoteControl(g,!1),l.sharingRequestRemoteControl(g,!1),Lr(eA,y=>!1===y)):Promise.reject({type:nn})})(this[mn])}startRemoteControl(i){return(u=F(function*(l,h){const{store:{getState:g,dispatch:y},mediaAgent:C,rwgAgent:w}=l,{share:{isSDKGrabControl:D,activeNodeId:N}}=g();return oo(g())?(yield Nb(N,h,g(),w,C),h.dataset.zmrvId||h.setAttribute("data-zmrv-id",Hh("__ZOOM_SDK_RC_VIEWPORT_DATA_ID_@__")),y(gA(`${h.tagName}[data-zmrv-id="${h.dataset.zmrvId}"]`)),D?Lr(hc,L=>!!L):ef({success:pC,fail:[KE]})):Promise.reject({type:nn,reason:"required to be approved"})}),function(l,h){return u.apply(this,arguments)})(this[mn],i);var u}grabRemotoControl(){return(i=>{const{store:{getState:u},rwgAgent:l}=i,{share:{isGrabRemoteControl:h,activeNodeId:g}}=u();return oo(u())?h?Promise.resolve(""):(l.subscribeGrabRemoteControl(g,!0),Lr(hc,y=>!!y)):Promise.reject({type:nn,reason:"should be approved before grab"})})(this[mn])}updateRemoteControlViewportDimension(i){return((u,l)=>{const{store:{getState:h},mediaAgent:g}=u;return oo(h())&&g.updateRemoteControlProperties({dimension:{scaleWidth:l.width,scaleHeight:l.height,srcOffsetX:l.left,srcOffsetY:l.top}}),Promise.resolve("")})(this[mn],i)}approveRemoteControl(i){return((u,l)=>{const{store:{getState:h,dispatch:g},rwgAgent:y,mediaAgent:C}=u,w=h(),{share:{status:D,isEnableAutoDeleteRcApp:N,remoteControllingSsrc:L,userSsrcMapping:V},meeting:{userId:G}}=w;if(D===yi.End)return Promise.reject({type:nn,reason:"Cannot approve remote control when sharing is not ongoing."});if(D===yi.Paused&&(y.resumeSharing(),C.resumeDesktopSharing(),g(Ll(yi.Sharing))),C.isSharingEntireScreen()){var W;L&&!Ro(L,l)&&(P_(w,y),g(rp("")));const X=null!==(W=V[`${l}`])&&void 0!==W?W:l;return y.remoteControlConsent(Gv.Approve,X,G,{...C.getShareStreamInfo(),platform:dr.isMacOS?"mac":"win"},N),g(Tm(X)),Lr(mC)}return Promise.reject({type:nn,reason:"Cannot approve remote control when not sharing entire screen."})})(this[mn],i)}declineRemoteControl(i){return((u,l)=>{var h;const{store:{getState:g},rwgAgent:y,mediaAgent:C}=u,w=g(),{meeting:{userId:D},share:{isEnableAutoDeleteRcApp:N,userSsrcMapping:L}}=w,V=null!==(h=L[`${l}`])&&void 0!==h?h:l;return y.remoteControlConsent(Gv.Decline,V,D,{...C.getShareStreamInfo(),platform:dr.isMacOS?"mac":"win"},N),Promise.resolve("")})(this[mn],i)}stopRemoteControl(){return(i=>{const{store:{getState:u,dispatch:l},rwgAgent:h}=i;return P_(u(),h),l(rp("")),l(Tm(0)),Promise.resolve("")})(this[mn])}launchRemoteControlApp(i){return((u,l)=>{const{store:{getState:h,dispatch:g}}=u,y=h(),{share:{remoteControlAppLaunchSheme:C}}=y;return C?(g(rp(l?`${C}&bAutoDelete=1`:C)),g(rf(ha.Unknown)),Promise.resolve("")):Promise.reject({type:nn,reason:"Cannot launch app due to no permission"})})(this[mn],i)}isRemoteControlEnabled(){return(i=>{var u;const{store:{getState:l}}=i;return!(null===(u=l().share)||void 0===u||!u.isRemoteControlEnabled)})(this[mn])}getRemoteControlAppDownloadUrl(){return(i=>{const{store:{getState:u}}=i,l=u();return l.share?l.share.remoteControlAppDownloadUrl:null})(this[mn])}isTargetShareSupportRemoteControl(i){return Rw(this[mn],i)}isRemotelyControlApproved(){return(i=>{const{store:{getState:u}}=i,l=u();return!!l.share&&oo(l)})(this[mn])}isControllingUserRemotely(){return(i=>{const{store:{getState:u}}=i,l=u();return!!l.share&&l.share.isGrabRemoteControl})(this[mn])}getRemotelyControllingUser(){return(i=>{const{store:{getState:u}}=i,l=u();if(l.share){const{remoteControllingSsrc:h}=l.share;if(h)return Uo(l).find(g=>Ro(g.userId,h))}return null})(this[mn])}},En(It.prototype,"startAudio",[An,ES,Ql],Object.getOwnPropertyDescriptor(It.prototype,"startAudio"),It.prototype),En(It.prototype,"stopAudio",[An,XO,Ql],Object.getOwnPropertyDescriptor(It.prototype,"stopAudio"),It.prototype),En(It.prototype,"muteAudio",[An,Dw,Ql],Object.getOwnPropertyDescriptor(It.prototype,"muteAudio"),It.prototype),En(It.prototype,"unmuteAudio",[An,Ow,Ql],Object.getOwnPropertyDescriptor(It.prototype,"unmuteAudio"),It.prototype),En(It.prototype,"dialOut",[An,ZO,kw],Object.getOwnPropertyDescriptor(It.prototype,"dialOut"),It.prototype),En(It.prototype,"cancelDialOut",[An,ek,HN],Object.getOwnPropertyDescriptor(It.prototype,"cancelDialOut"),It.prototype),En(It.prototype,"hangup",[An,J_,Ql],Object.getOwnPropertyDescriptor(It.prototype,"hangup"),It.prototype),En(It.prototype,"switchMicrophone",[An,tk,Ql],Object.getOwnPropertyDescriptor(It.prototype,"switchMicrophone"),It.prototype),En(It.prototype,"switchSpeaker",[An,xy,Ql],Object.getOwnPropertyDescriptor(It.prototype,"switchSpeaker"),It.prototype),En(It.prototype,"muteShareAudio",[An,Pw,Ly,Ql],Object.getOwnPropertyDescriptor(It.prototype,"muteShareAudio"),It.prototype),En(It.prototype,"unmuteShareAudio",[An,By,nk,Ql],Object.getOwnPropertyDescriptor(It.prototype,"unmuteShareAudio"),It.prototype),En(It.prototype,"subscribeAudioStatisticData",[An,AU,Ql],Object.getOwnPropertyDescriptor(It.prototype,"subscribeAudioStatisticData"),It.prototype),En(It.prototype,"unsubscribeAudioStatisticData",[An,rk,Ql],Object.getOwnPropertyDescriptor(It.prototype,"unsubscribeAudioStatisticData"),It.prototype),En(It.prototype,"enableBackgroundNoiseSuppression",[An,ik,Ql],Object.getOwnPropertyDescriptor(It.prototype,"enableBackgroundNoiseSuppression"),It.prototype),En(It.prototype,"enableSyncButtonsOnHeadset",[An,GN,Ql],Object.getOwnPropertyDescriptor(It.prototype,"enableSyncButtonsOnHeadset"),It.prototype),En(It.prototype,"startVideo",[An,Mw,Na],Object.getOwnPropertyDescriptor(It.prototype,"startVideo"),It.prototype),En(It.prototype,"stopVideo",[An,yU,Na],Object.getOwnPropertyDescriptor(It.prototype,"stopVideo"),It.prototype),En(It.prototype,"switchCamera",[An,gd,Na],Object.getOwnPropertyDescriptor(It.prototype,"switchCamera"),It.prototype),En(It.prototype,"renderVideo",[wS,An,Nw,Na],Object.getOwnPropertyDescriptor(It.prototype,"renderVideo"),It.prototype),En(It.prototype,"stopRenderVideo",[Ww,An,hg,Na],Object.getOwnPropertyDescriptor(It.prototype,"stopRenderVideo"),It.prototype),En(It.prototype,"updateVideoCanvasDimension",[Ww,An,WN,Na],Object.getOwnPropertyDescriptor(It.prototype,"updateVideoCanvasDimension"),It.prototype),En(It.prototype,"adjustRenderedVideoPosition",[Ww,An,ok,Na],Object.getOwnPropertyDescriptor(It.prototype,"adjustRenderedVideoPosition"),It.prototype),En(It.prototype,"clearVideoCanvas",[Ww,An,bS,Na],Object.getOwnPropertyDescriptor(It.prototype,"clearVideoCanvas"),It.prototype),En(It.prototype,"mirrorVideo",[An,SS,Na],Object.getOwnPropertyDescriptor(It.prototype,"mirrorVideo"),It.prototype),En(It.prototype,"enableHardwareAcceleration",[An,Fy,Na],Object.getOwnPropertyDescriptor(It.prototype,"enableHardwareAcceleration"),It.prototype),En(It.prototype,"subscribeVideoStatisticData",[An,Uy,Na],Object.getOwnPropertyDescriptor(It.prototype,"subscribeVideoStatisticData"),It.prototype),En(It.prototype,"unsubscribeVideoStatisticData",[An,xw,Na],Object.getOwnPropertyDescriptor(It.prototype,"unsubscribeVideoStatisticData"),It.prototype),En(It.prototype,"previewVirtualBackground",[wS,An,Lw,Na],Object.getOwnPropertyDescriptor(It.prototype,"previewVirtualBackground"),It.prototype),En(It.prototype,"updateVirtualBackgroundImage",[An,CS,Na],Object.getOwnPropertyDescriptor(It.prototype,"updateVirtualBackgroundImage"),It.prototype),En(It.prototype,"stopPreviewVirtualBackground",[An,KN,Na],Object.getOwnPropertyDescriptor(It.prototype,"stopPreviewVirtualBackground"),It.prototype),En(It.prototype,"previewVideoMask",[wS,An,js,Na],Object.getOwnPropertyDescriptor(It.prototype,"previewVideoMask"),It.prototype),En(It.prototype,"updateVideoMask",[An,bi,Na],Object.getOwnPropertyDescriptor(It.prototype,"updateVideoMask"),It.prototype),En(It.prototype,"stopPreviewVideoMask",[An,Bw,Na],Object.getOwnPropertyDescriptor(It.prototype,"stopPreviewVideoMask"),It.prototype),En(It.prototype,"requestFarEndCameraControl",[An,Fw,Hl],Object.getOwnPropertyDescriptor(It.prototype,"requestFarEndCameraControl"),It.prototype),En(It.prototype,"approveFarEndCameraControl",[An,Sh,Hl],Object.getOwnPropertyDescriptor(It.prototype,"approveFarEndCameraControl"),It.prototype),En(It.prototype,"declineFarEndCameraControl",[An,xi,Hl],Object.getOwnPropertyDescriptor(It.prototype,"declineFarEndCameraControl"),It.prototype),En(It.prototype,"giveUpFarEndCameraControl",[An,zN,Hl],Object.getOwnPropertyDescriptor(It.prototype,"giveUpFarEndCameraControl"),It.prototype),En(It.prototype,"controlCamera",[An,sk,Hl],Object.getOwnPropertyDescriptor(It.prototype,"controlCamera"),It.prototype),En(It.prototype,"controlFarEndCamera",[An,qN,Hl],Object.getOwnPropertyDescriptor(It.prototype,"controlFarEndCamera"),It.prototype),En(It.prototype,"startShareView",[wS,An,ak,Ec],Object.getOwnPropertyDescriptor(It.prototype,"startShareView"),It.prototype),En(It.prototype,"stopShareView",[An,IS,Ec],Object.getOwnPropertyDescriptor(It.prototype,"stopShareView"),It.prototype),En(It.prototype,"switchShareView",[An,Uw,Ec],Object.getOwnPropertyDescriptor(It.prototype,"switchShareView"),It.prototype),En(It.prototype,"updateSharingCanvasDimension",[An,Vw,Ec],Object.getOwnPropertyDescriptor(It.prototype,"updateSharingCanvasDimension"),It.prototype),En(It.prototype,"startShareScreen",[An,jw,Ec],Object.getOwnPropertyDescriptor(It.prototype,"startShareScreen"),It.prototype),En(It.prototype,"stopShareScreen",[An,jl,Ec],Object.getOwnPropertyDescriptor(It.prototype,"stopShareScreen"),It.prototype),En(It.prototype,"pauseShareScreen",[An,Xo,Ec],Object.getOwnPropertyDescriptor(It.prototype,"pauseShareScreen"),It.prototype),En(It.prototype,"resumeShareScreen",[An,yc,Ec],Object.getOwnPropertyDescriptor(It.prototype,"resumeShareScreen"),It.prototype),En(It.prototype,"setSharePrivilege",[Al,ck,An,Ec],Object.getOwnPropertyDescriptor(It.prototype,"setSharePrivilege"),It.prototype),En(It.prototype,"lockShare",[Al,X_,An,Ec],Object.getOwnPropertyDescriptor(It.prototype,"lockShare"),It.prototype),En(It.prototype,"shareToBreakoutRoom",[An,Al,lk,Ec],Object.getOwnPropertyDescriptor(It.prototype,"shareToBreakoutRoom"),It.prototype),En(It.prototype,"stopShareToBreakoutRoom",[An,Al,uk,Ec],Object.getOwnPropertyDescriptor(It.prototype,"stopShareToBreakoutRoom"),It.prototype),En(It.prototype,"muteOthersScreenShare",[An,Al,dk,Ec],Object.getOwnPropertyDescriptor(It.prototype,"muteOthersScreenShare"),It.prototype),En(It.prototype,"enableOptimizeForSharedVideo",[An,Rf,Ec],Object.getOwnPropertyDescriptor(It.prototype,"enableOptimizeForSharedVideo"),It.prototype),En(It.prototype,"updateSharedVideoQuality",[An,YN,Ec],Object.getOwnPropertyDescriptor(It.prototype,"updateSharedVideoQuality"),It.prototype),En(It.prototype,"subscribeShareStatisticData",[An,$N,Ec],Object.getOwnPropertyDescriptor(It.prototype,"subscribeShareStatisticData"),It.prototype),En(It.prototype,"unsubscribeShareStatisticData",[An,Vy,Ec],Object.getOwnPropertyDescriptor(It.prototype,"unsubscribeShareStatisticData"),It.prototype),En(It.prototype,"requestRemoteControl",[An,JN,Ch],Object.getOwnPropertyDescriptor(It.prototype,"requestRemoteControl"),It.prototype),En(It.prototype,"giveUpRemoteControl",[An,Qw,Ch],Object.getOwnPropertyDescriptor(It.prototype,"giveUpRemoteControl"),It.prototype),En(It.prototype,"startRemoteControl",[An,XN,Ch],Object.getOwnPropertyDescriptor(It.prototype,"startRemoteControl"),It.prototype),En(It.prototype,"grabRemotoControl",[An,EU,Ch],Object.getOwnPropertyDescriptor(It.prototype,"grabRemotoControl"),It.prototype),En(It.prototype,"updateRemoteControlViewportDimension",[An,Hw,Ch],Object.getOwnPropertyDescriptor(It.prototype,"updateRemoteControlViewportDimension"),It.prototype),En(It.prototype,"approveRemoteControl",[An,ZN,Ch],Object.getOwnPropertyDescriptor(It.prototype,"approveRemoteControl"),It.prototype),En(It.prototype,"declineRemoteControl",[An,Gw,Ch],Object.getOwnPropertyDescriptor(It.prototype,"declineRemoteControl"),It.prototype),En(It.prototype,"stopRemoteControl",[An,ex,Ch],Object.getOwnPropertyDescriptor(It.prototype,"stopRemoteControl"),It.prototype),En(It.prototype,"launchRemoteControlApp",[An,J,Ch],Object.getOwnPropertyDescriptor(It.prototype,"launchRemoteControlApp"),It.prototype),It);var Gl,Z_,pk,tx,nx,TS,va;const RS=hp("Audio"),bU=hp("Sharing");let SU=(Gl=er("share"),Z_=er("audio"),pk=er("audio"),tx=er("audio"),nx=er("audio"),TS=er("audio"),En((va=class extends Kw{switchSharingSecondaryCamera(i){return((u,l)=>{const{store:{getState:h,dispatch:g},mediaAgent:y}=u,C=h(),{video:{cameraDevicesList:w},share:{status:D,isSharingWithSecondCamera:N}}=C;return"default"!==l&&-1===w.map(L=>L.deviceId).indexOf(l)?Promise.reject({type:Pr,reason:"Cannot find cameraDeviceId in camera devices list."}):(D===yi.Sharing&&N&&y.changeSharingSecondCamera(l),g(wm(l)),Promise.resolve())})(this[mn],i)}muteUserAudioLocally(i){return((u,l)=>{const{mediaAgent:h,store:{getState:g,dispatch:y}}=u,C=g(),{audio:{locallyMutedAudioList:w}}=C,D=Uo(C).filter(N=>N.audio===uo.Computer);return w.includes(l)||-1===D.findIndex(N=>N.userId===l)||(h.muteOrUnmuteOtherAudio(l,!0),y(fR(l))),Promise.resolve("")})(this[mn],i)}unmuteUserAudioLocally(i){return((u,l)=>{const{mediaAgent:h,store:{getState:g,dispatch:y}}=u,{audio:{locallyMutedAudioList:C}}=g();return C.includes(l)&&(h.muteOrUnmuteOtherAudio(l,!1),y(mR(l))),Promise.resolve("")})(this[mn],i)}adjustUserAudioVolumeLocally(i,u){return((l,h,g)=>{const{mediaAgent:y,store:{getState:C,dispatch:w}}=l,D=C();return-1!==Uo(D).findIndex(N=>N.userId===h)&&(y.adjustOtherAudioVolume(h,g),w(gR({userId:h,volume:g}))),Promise.resolve("")})(this[mn],i,u)}muteAllUserAudioLocally(){return(i=>{const{mediaAgent:u,store:{getState:l,dispatch:h}}=i,{audio:{isStopAllImcomingAudio:g}}=l();return g||(u.stopAllIncomingAudio(!0),h(AR(!0))),Promise.resolve("")})(this[mn])}unmuteAllUserAudioLocally(){return(i=>{const{mediaAgent:u,store:{getState:l,dispatch:h}}=i,{audio:{isStopAllImcomingAudio:g,locallyMutedAudioList:y}}=l();return g&&(u.stopAllIncomingAudio(!1),h(AR(!1)),y.length>0&&y.forEach(C=>{u.muteOrUnmuteOtherAudio(C,!1),h(mR(C))})),Promise.resolve("")})(this[mn])}isUserAudioMutedLocally(i){return((u,l)=>{let{store:{getState:h}}=u;const{audio:{locallyMutedAudioList:g}}=h();return g.includes(l)})(this[mn],i)}getUserVolumeLocally(i){return((u,l)=>{var h,g;let{store:{getState:y}}=u;const{audio:{localUserAudioVolumeList:C,locallyMutedAudioList:w}}=y();return null!==(h=null===(g=C.find(D=>D.userId===l))||void 0===g?void 0:g.volume)&&void 0!==h?h:w.includes(l)?0:100})(this[mn],i)}}).prototype,"switchSharingSecondaryCamera",[An,Gl,bU],Object.getOwnPropertyDescriptor(va.prototype,"switchSharingSecondaryCamera"),va.prototype),En(va.prototype,"muteUserAudioLocally",[An,Z_,RS],Object.getOwnPropertyDescriptor(va.prototype,"muteUserAudioLocally"),va.prototype),En(va.prototype,"unmuteUserAudioLocally",[An,pk,RS],Object.getOwnPropertyDescriptor(va.prototype,"unmuteUserAudioLocally"),va.prototype),En(va.prototype,"adjustUserAudioVolumeLocally",[An,tx,RS],Object.getOwnPropertyDescriptor(va.prototype,"adjustUserAudioVolumeLocally"),va.prototype),En(va.prototype,"muteAllUserAudioLocally",[An,nx,RS],Object.getOwnPropertyDescriptor(va.prototype,"muteAllUserAudioLocally"),va.prototype),En(va.prototype,"unmuteAllUserAudioLocally",[An,TS,RS],Object.getOwnPropertyDescriptor(va.prototype,"unmuteAllUserAudioLocally"),va.prototype),va);const zw={controlStatus:Jr.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:tp.Automatically,currentRoom:{status:fr.Initial,boStatus:IC.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1},rx=li({[`${UR}`]:ct((i,u)=>{let{payload:l}=u;Array.isArray(l)?i.rooms.push(...l):i.rooms.push(l)}),[`${wA}`]:ct((i,u)=>{let{payload:l}=u;i.allocationPattern=l}),[`${hb}`]:ct((i,u)=>{let{payload:l}=u;i.sequenceId=l}),[`${o2}`]:ct((i,u)=>{let{payload:l}=u;i.meetingElapsedTime=l}),[`${VR}`]:ct((i,u)=>{let{payload:l}=u;i.startRoomElapsedTime=l}),[`${jR}`]:ct((i,u)=>{let{payload:l}=u;const{options:h}=i;Object.assign(h,l)}),[`${s2}`]:ct((i,u)=>{let{payload:l}=u;i.controlStatus=l}),[`${XC}`]:ct((i,u)=>{let{payload:l}=u;i.rooms=l}),[`${ZC}`]:ct((i,u)=>{let{payload:l}=u;const{currentRoom:h}=i;Object.assign(h,l)}),[`${E_}`]:ct((i,u)=>{let{payload:l}=u;const{currentRoom:h}=i;h.status=l}),[`${QR}`]:ct((i,u)=>{let{payload:l}=u;const{currentRoom:h}=i;h.boConfId=l}),[`${fb}`]:ct((i,u)=>{let{payload:l}=u;const{currentRoom:h}=i;h.boToken=l}),[`${eI}`]:ct((i,u)=>{let{payload:l}=u;i.closingRoomTime=l}),[`${tI}`]:ct((i,u)=>{let{payload:l}=u;i.broadcastMessage=l}),[`${nI}`]:ct((i,u)=>{let{payload:l}=u;i.hostReplyToQuestionerType=l}),[`${mb}`]:ct((i,u)=>{let{payload:l}=u;i.hostReplyToRequestId=l}),[`${km}`]:ct((i,u)=>{let{payload:l}=u;void 0!==l.add&&l.add.length>0&&l.add.forEach(h=>{const g=i.mainSessionAttendeeList.find(y=>y.userId===h.userId);void 0!==g?Object.assign(g,h):uA(h.userRole)||i.mainSessionAttendeeList.push(h)}),void 0!==l.update&&l.update.length>0&&l.update.forEach(h=>{const g=i.mainSessionAttendeeList.find(y=>y.userId===h.userId);void 0!==g&&Object.assign(g,h)}),void 0!==l.remove&&l.remove.length>0&&l.remove.forEach(h=>{const g=i.mainSessionAttendeeList.findIndex(y=>y.userId===h.userId);-1!==g&&i.mainSessionAttendeeList.splice(g,1)})}),[`${rI}`]:ct((i,u)=>{let{payload:l}=u;i.isHugeBO=l}),[`${oI}`]:ct((i,u)=>{let{payload:l}=u;i.isUserRoleUpdated=l}),[`${iI}`]:ct((i,u)=>{let{payload:l}=u;i.preAssignedRooms=l}),[`${TA}`]:ct((i,u)=>{let{payload:l}=u;i.isEnableBreakoutRoom=l.isEnableBreakoutRoom,i.isEnableBOBroadcast=l.isEnableBOBroadcast}),[`${Or}`]:i=>{const{currentRoom:{status:u}}=i;return u===fr.Joining?{...zw,preAssignedRooms:i.preAssignedRooms,currentRoom:i.currentRoom,closingRoomTime:i.closingRoomTime}:u===fr.Leaving?{...zw,preAssignedRooms:i.preAssignedRooms,closingRoomTime:i.closingRoomTime}:{...zw,preAssignedRooms:i.preAssignedRooms}}},zw);var Ja=Uint8Array,yl=Uint16Array,qw=Uint32Array,Ps=new Ja([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hk=new Ja([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),DS=new Ja([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),CU=function(i,u){for(var l=new yl(31),h=0;h<31;++h)l[h]=u+=1<<i[h-1];var g=new qw(l[30]);for(h=1;h<30;++h)for(var y=l[h];y<l[h+1];++y)g[y]=y-l[h]<<5|h;return[l,g]},fk=CU(Ps,2),IU=fk[0],ix=fk[1];IU[28]=258,ix[258]=28;for(var ox=CU(hk,0),nj=ox[0],mk=ox[1],sx=new yl(32768),Oi=0;Oi<32768;++Oi){var fg=(43690&Oi)>>>1|(21845&Oi)<<1;fg=(61680&(fg=(52428&fg)>>>2|(13107&fg)<<2))>>>4|(3855&fg)<<4,sx[Oi]=((65280&fg)>>>8|(255&fg)<<8)>>>1}var Ih=function(i,u,l){for(var h=i.length,g=0,y=new yl(u);g<h;++g)i[g]&&++y[i[g]-1];var C,w=new yl(u);for(g=0;g<u;++g)w[g]=w[g-1]+y[g-1]<<1;if(l){C=new yl(1<<u);var D=15-u;for(g=0;g<h;++g)if(i[g])for(var N=g<<4|i[g],L=u-i[g],V=w[i[g]-1]++<<L,G=V|(1<<L)-1;V<=G;++V)C[sx[V]>>>D]=N}else for(C=new yl(h),g=0;g<h;++g)i[g]&&(C[g]=sx[w[i[g]-1]++]>>>15-i[g]);return C},_p=new Ja(288);for(Oi=0;Oi<144;++Oi)_p[Oi]=8;for(Oi=144;Oi<256;++Oi)_p[Oi]=9;for(Oi=256;Oi<280;++Oi)_p[Oi]=7;for(Oi=280;Oi<288;++Oi)_p[Oi]=8;var wh=new Ja(32);for(Oi=0;Oi<32;++Oi)wh[Oi]=5;var gk=Ih(_p,9,0),wU=Ih(_p,9,1),_k=Ih(wh,5,0),Yw=Ih(wh,5,1),vk=function(i){for(var u=i[0],l=1;l<i.length;++l)i[l]>u&&(u=i[l]);return u},_d=function(i,u,l){var h=u/8|0;return(i[h]|i[h+1]<<8)>>(7&u)&l},ax=function(i,u){var l=u/8|0;return(i[l]|i[l+1]<<8|i[l+2]<<16)>>(7&u)},cx=function(i){return(i+7)/8|0},OS=function(i,u,l){(null==u||u<0)&&(u=0),(null==l||l>i.length)&&(l=i.length);var h=new(2==i.BYTES_PER_ELEMENT?yl:4==i.BYTES_PER_ELEMENT?qw:Ja)(l-u);return h.set(i.subarray(u,l)),h},jy=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Th=function(i,u,l){var h=new Error(u||jy[i]);if(h.code=i,Error.captureStackTrace&&Error.captureStackTrace(h,Th),!l)throw h;return h},vp=function(i,u,l){var h=u/8|0;i[h]|=l<<=7&u,i[h+1]|=l>>>8},$w=function(i,u,l){var h=u/8|0;i[h]|=l<<=7&u,i[h+1]|=l>>>8,i[h+2]|=l>>>16},Ak=function(i,u){for(var l=[],h=0;h<i.length;++h)i[h]&&l.push({s:h,f:i[h]});var g=l.length,y=l.slice();if(!g)return[hx,0];if(1==g){var C=new Ja(l[0].s+1);return C[l[0].s]=1,[C,1]}l.sort(function(ht,ze){return ht.f-ze.f}),l.push({s:-1,f:25001});var w=l[0],D=l[1],N=0,L=1,V=2;for(l[0]={s:-1,f:w.f+D.f,l:w,r:D};L!=g-1;)w=l[l[N].f<l[V].f?N++:V++],D=l[N!=L&&l[N].f<l[V].f?N++:V++],l[L++]={s:-1,f:w.f+D.f,l:w,r:D};var G=y[0].s;for(h=1;h<g;++h)y[h].s>G&&(G=y[h].s);var W=new yl(G+1),X=lx(l[L-1],W,0);if(X>u){h=0;var ne=0,me=X-u,_e=1<<me;for(y.sort(function(ht,ze){return W[ze.s]-W[ht.s]||ht.f-ze.f});h<g;++h){var Re=y[h].s;if(!(W[Re]>u))break;ne+=_e-(1<<X-W[Re]),W[Re]=u}for(ne>>>=me;ne>0;){var Ne=y[h].s;W[Ne]<u?ne-=1<<u-W[Ne]++-1:++h}for(;h>=0&&ne;--h){var et=y[h].s;W[et]==u&&(--W[et],++ne)}X=u}return[new Ja(W),X]},lx=function(i,u,l){return-1==i.s?Math.max(lx(i.l,u,l+1),lx(i.r,u,l+1)):u[i.s]=l},ux=function(i){for(var u=i.length;u&&!i[--u];);for(var l=new yl(++u),h=0,g=i[0],y=1,C=function(D){l[h++]=D},w=1;w<=u;++w)if(i[w]==g&&w!=u)++y;else{if(!g&&y>2){for(;y>138;y-=138)C(32754);y>2&&(C(y>10?y-11<<5|28690:y-3<<5|12305),y=0)}else if(y>3){for(C(g),--y;y>6;y-=6)C(8304);y>2&&(C(y-3<<5|8208),y=0)}for(;y--;)C(g);y=1,g=i[w]}return[l.subarray(0,h),u]},Df=function(i,u){for(var l=0,h=0;h<u.length;++h)l+=i[h]*u[h];return l},dx=function(i,u,l){var h=l.length,g=cx(u+2);i[g]=255&h,i[g+1]=h>>>8,i[g+2]=255^i[g],i[g+3]=255^i[g+1];for(var y=0;y<h;++y)i[g+y+4]=l[y];return 8*(g+4+h)},Jw=function(i,u,l,h,g,y,C,w,D,N,L){vp(u,L++,l),++g[256];for(var V=Ak(g,15),G=V[0],W=V[1],X=Ak(y,15),ne=X[0],me=X[1],_e=ux(G),Re=_e[0],Ne=_e[1],et=ux(ne),ht=et[0],ze=et[1],Qe=new yl(19),wt=0;wt<Re.length;++wt)Qe[31&Re[wt]]++;for(wt=0;wt<ht.length;++wt)Qe[31&ht[wt]]++;for(var Xt=Ak(Qe,7),_t=Xt[0],it=Xt[1],Ce=19;Ce>4&&!_t[DS[Ce-1]];--Ce);var Ye,Ge,ut,mt,St=N+5<<3,Wt=Df(g,_p)+Df(y,wh)+C,en=Df(g,G)+Df(y,ne)+C+14+3*Ce+Df(Qe,_t)+(2*Qe[16]+3*Qe[17]+7*Qe[18]);if(St<=Wt&&St<=en)return dx(u,L,i.subarray(D,D+N));if(vp(u,L,1+(en<Wt)),L+=2,en<Wt){Ye=Ih(G,W,0),Ge=G,ut=Ih(ne,me,0),mt=ne;var rn=Ih(_t,it,0);for(vp(u,L,Ne-257),vp(u,L+5,ze-1),vp(u,L+10,Ce-4),L+=14,wt=0;wt<Ce;++wt)vp(u,L+3*wt,_t[DS[wt]]);L+=3*Ce;for(var on=[Re,ht],hr=0;hr<2;++hr){var Hn=on[hr];for(wt=0;wt<Hn.length;++wt){var Er=31&Hn[wt];vp(u,L,rn[Er]),L+=_t[Er],Er>15&&(vp(u,L,Hn[wt]>>>5&127),L+=Hn[wt]>>>12)}}}else Ye=gk,Ge=_p,ut=_k,mt=wh;for(wt=0;wt<w;++wt)if(h[wt]>255){$w(u,L,Ye[257+(Er=h[wt]>>>18&31)]),L+=Ge[Er+257],Er>7&&(vp(u,L,h[wt]>>>23&31),L+=Ps[Er]);var or=31&h[wt];$w(u,L,ut[or]),L+=mt[or],or>3&&($w(u,L,h[wt]>>>5&8191),L+=hk[or])}else $w(u,L,Ye[h[wt]]),L+=Ge[h[wt]];return $w(u,L,Ye[256]),L+Ge[256]},px=new qw([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hx=new Ja(0),yk=function(){for(var i=new Int32Array(256),u=0;u<256;++u){for(var l=u,h=9;--h;)l=(1&l&&-306674912)^l>>>1;i[u]=l}return i}(),fx=function(i,u,l){for(;l;++u)i[u]=l,l>>>=8};var RU=typeof TextEncoder<"u"&&new TextEncoder,kS=typeof TextDecoder<"u"&&new TextDecoder;try{kS.decode(hx,{stream:!0})}catch{}const{WebclientBreakoutRoomAttendeeStatus:mx,WebclientBreakoutRoomCommand:DU}=ro,vd=gc(Qr.getInstance());function Ms(i,u){let l=0;for(;l<i.length;l++){const h=i[l],{attendeeGuidList:g}=h;if(null!=g&&g.includes(u))break}return l<i.length?i[l]:void 0}function Rh(){Yr.remove(mx),Yr.remove(DU)}function ko(){return kr.createAgent().leaveBO(1),Ze(nl,{reason:Ha.BackToMainSession}),Rh(),[E_(fr.Leaving),ja(Ks.NormalCase)]}function Of(i,u){return Ze(nl,{reason:Ha.JoinBreakoutRoom,roomName:i}),u===fr.InRoom&&kr.createAgent().leaveBO(1),[E_(fr.Joining),ja(Ks.NormalCase)]}function Te(i){return Ze(nl,{reason:Ha.MoveToBreakoutRoom,roomName:i}),kr.createAgent().leaveBO(1),[E_(fr.Joining),ja(Ks.NormalCase)]}function Le(i){const u=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?fr.InRoom:fr.Invited;return Yr.set(mx,JSON.stringify({status:u,boId:i.boId}),Mi.SessionStorage),ZC({status:u,boId:i.boId,name:i.name,boStatus:i.boStatus})}function wo(i){const{breakoutRoom:{isUserRoleUpdated:u,currentRoom:{boConfId:l}}}=i.value,h=Yn(i.value);return h&&(!l||l&&u)?Ii(h.isHost):(l?Oo(DM,1):Oo(cm,2).pipe(vr(function(y,C){var w=[];y.subscribe(ir(C,function(D){w.push(D),1<w.length&&w.shift()},function(){var D,N;try{for(var L=K(w),V=L.next();!V.done;V=L.next())C.next(V.value)}catch(W){D={error:W}}finally{try{V&&!V.done&&(N=L.return)&&N.call(L)}finally{if(D)throw D.error}}C.complete()},void 0,function(){w=null}))}))).pipe(_o(fo),Nn(i),Bn(y=>{let[,C]=y;return Yn(C).isHost}))}function Ek(i){return Eo({boIdList:Oo(RM).pipe(DB((u,l)=>[...u,l],[]),ki(i))}).pipe(XT(1e4))}const Ss=kr.createAgent(),Xw=["userRole","bCoHost","bCCEditor","bHold"],Gc=kr.createAgent(),ev=gc(Qr.getInstance());var Li;const se=kr.createAgent(),bc=hp("Breakout Room");let PS=(En((Li=class extends vh{createRooms(i,u){const l=this[tr](),h=this[Vs],{breakoutRoom:{isHugeBO:g,sequenceId:y,rooms:C,controlStatus:w,isEnableBreakoutRoom:D}}=l;if(!D)return Promise.reject({type:nn,reason:"Breakout room feature is not enabled."});if(w===Jr.InProgress||w===Jr.Closing)return Promise.resolve({type:nn,reason:"breakout room has started!"});let N;return N="string"==typeof i?[i]:"number"==typeof i?Array.from({length:i}).map((V,G)=>`Subsession ${G+y}`):i,N.length<1||C.length+N.length>(g?100:50)?Promise.reject({type:Pr,reason:"exceed maximum size"}):(se.batchCreateBOToken(N),new Promise((V,G)=>{Ek(N.length).subscribe(W=>{let{boIdList:X}=W,ne=X.map((_e,Re)=>({boId:_e,name:N[Re]}));if(u===tp.Automatically){const _e=Ac(l),Re=ne.length,Ne=_e.length;ne=ne.map((et,ht)=>{const ze=[];let Qe=ht;for(;Qe<Ne;)ze.push(_e[Qe]),Qe+=Re;return{...et,attendeeList:ze}})}const me=ne.map(_e=>{let{boId:Re,name:Ne,attendeeList:et}=_e;return{boId:Re,name:Ne,attendeeGuidList:et&&et.map(ht=>ht.userGUID)}});if(h(UR(me)),h(wA(u)),h(hb(y+ne.length)),u===tp.Automatically){const _e=ne.map(Re=>({roomId:Re.boId,name:Re.name,attendeeList:Re.attendeeList.map(Ne=>({userId:Ne.userId,avatar:Ne.avatar,displayName:Ne.displayName}))}));V(_e)}else V(ne.map(_e=>({roomId:_e.boId,name:_e.name,attendeeList:[]})))},()=>{G({type:Xp})})}))}openRooms(i,u){const l=this[tr](),h={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},{breakoutRoom:{controlStatus:g,rooms:y,sequenceId:C,isHugeBO:w}}=l;if(g===Jr.InProgress||g===Jr.Closing)return Promise.resolve({type:nn,reason:"breakout room has started!"});if(i.some(W=>-1===y.findIndex(X=>X.boId===W.roomId)))return Promise.reject({type:Pr,reason:"roomId is wrong"});const D=Uo(l);if(i.reduce((W,X)=>W.concat(X.attendeeList),[]).some(W=>-1===D.findIndex(X=>X.userId===W.userId)))return Promise.reject({type:Pr,reason:"bad user"});const N=i.map(W=>{const{attendeeList:X}=W,ne=X.map(me=>D.find(Re=>Re.userId===me.userId)?.userGUID);return{BID:W.roomId,MeetingTitle:W.name,MeetingToken:void 0,Status:IC.Started,HostID:"",ParticipantList:ne}}),L=u?{...h,...u}:h;let G=I0(JSON.stringify({ControlStatus:Jr.InProgress,NameIndex:C,IsAutoJoinEnabled:+L.isAutoJoinRoom,IsBackToMainSessionEnabled:+L.isBackToMainSessionEnabled,IsTimerEnabled:+L.isTimerEnabled,TimerDuration:L.timerDuration,IsTimerAutoEndEnabled:+L.isTimerAutoEnabled,WaitSeconds:L.waitSeconds<0?0:L.waitSeconds,StartTimeOnMMR:void 0,ItemList:N}));return w&&(G=Bp_fromUint8Array(function TU(i,u){u||(u={});var C,l=(C=-1,{p:function(w){for(var D=C,N=0;N<w.length;++N)D=yk[255&D^w[N]]^D>>>8;C=D},d:function(){return~C}}),h=i.length;l.p(i);var g=function(C,w,D,N,L){return function(V,G,W,X,ne,me){var _e=V.length,Re=new Ja(X+_e+5*(1+Math.ceil(_e/7e3))+8),Ne=Re.subarray(X,Re.length-8),et=0;if(!G||_e<8)for(var ht=0;ht<=_e;ht+=65535){var ze=ht+65535;ze>=_e&&(Ne[et>>3]=!0),et=dx(Ne,et+1,V.subarray(ht,ze))}else{for(var Qe=px[G-1],wt=Qe>>>13,Xt=8191&Qe,_t=(1<<W)-1,it=new yl(32768),Ce=new yl(_t+1),Ye=Math.ceil(W/3),Ge=2*Ye,ut=function(Bi){return(V[Bi]^V[Bi+1]<<Ye^V[Bi+2]<<Ge)&_t},mt=new qw(25e3),St=new yl(288),Wt=new yl(32),en=0,rn=0,on=(ht=0,0),hr=0,Hn=0;ht<_e;++ht){var Er=ut(ht),or=32767&ht,xr=Ce[Er];if(it[or]=xr,Ce[Er]=or,hr<=ht){var Wi=_e-ht;if((en>7e3||on>24576)&&Wi>423){et=Jw(V,Ne,0,mt,St,Wt,rn,on,Hn,ht-Hn,et),on=en=rn=0,Hn=ht;for(var Si=0;Si<286;++Si)St[Si]=0;for(Si=0;Si<30;++Si)Wt[Si]=0}var Bt=2,Tt=0,at=Xt,Zt=or-xr&32767;if(Wi>2&&Er==ut(ht-Zt))for(var xn=Math.min(wt,Wi)-1,sr=Math.min(32767,ht),br=Math.min(258,Wi);Zt<=sr&&--at&&or!=xr;){if(V[ht+Bt]==V[ht+Bt-Zt]){for(var In=0;In<br&&V[ht+In]==V[ht+In-Zt];++In);if(In>Bt){if(Bt=In,Tt=Zt,In>xn)break;var nr=Math.min(Zt,In-2),Mr=0;for(Si=0;Si<nr;++Si){var Kr=ht-Zt+Si+32768&32767,Fr=Kr-it[Kr]+32768&32767;Fr>Mr&&(Mr=Fr,xr=Kr)}}}Zt+=(or=xr)-(xr=it[or])+32768&32767}if(Tt){mt[on++]=268435456|ix[Bt]<<18|mk[Tt];var $i=31&ix[Bt],Qi=31&mk[Tt];rn+=Ps[$i]+hk[Qi],++St[257+$i],++Wt[Qi],hr=ht+Bt,++en}else mt[on++]=V[ht],++St[V[ht]]}}et=Jw(V,Ne,!0,mt,St,Wt,rn,on,Hn,ht-Hn,et)}return OS(Re,0,X+cx(et)+8)}(C,w.level??6,null==w.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(C.length)))):12+w.mem,D)}(i,u,function(C){return 10+(C.filename&&C.filename.length+1||0)}(u)),y=g.length;return function(C,w){var D=w.filename;if(C[0]=31,C[1]=139,C[2]=8,C[8]=w.level<2?4:9==w.level?2:0,C[9]=3,0!=w.mtime&&fx(C,4,Math.floor(new Date(w.mtime||Date.now())/1e3)),D){C[3]=8;for(var N=0;N<=D.length;++N)C[N+10]=D.charCodeAt(N)}}(g,u),fx(g,y-8,l.d()),fx(g,y-4,h),g}(function(X,ne){var me;if(RU)return RU.encode(X);var _e=X.length,Re=new Ja(X.length+(X.length>>1)),Ne=0,et=function(Qe){Re[Ne++]=Qe};for(me=0;me<_e;++me){if(Ne+5>Re.length){var ht=new Ja(Ne+8+(_e-me<<1));ht.set(Re),Re=ht}var ze=X.charCodeAt(me);ze<128?et(ze):ze<2048?(et(192|ze>>6),et(128|63&ze)):ze>55295&&ze<57344?(et(240|(ze=65536+(1047552&ze)|1023&X.charCodeAt(++me))>>18),et(128|ze>>12&63),et(128|ze>>6&63),et(128|63&ze)):(et(224|ze>>12),et(128|ze>>6&63),et(128|63&ze))}return OS(Re,0,Ne)}(G)))),se.startBO(G),Lr(Zh,W=>W.controlStatus===Jr.InProgress)}joinRoom(i){const u=this[tr](),l=Yn(u),{breakoutRoom:{controlStatus:h,rooms:g,mainSessionAttendeeList:y,currentRoom:{status:C,boId:w}},meeting:{userGUID:D}}=u;if(h!==Jr.InProgress)return Promise.reject({type:ym,reason:"breakout room is not started"});if(null!=l&&l.isHost){const N=g.find(L=>L.boId===i);if(!N)return Promise.reject({type:Pr,reason:"room id is not correct"});se.joinBO(N.boId)}else if(null!=l&&l.bCoHost&&C===fr.InRoom){if(!g.find(N=>N.boId===i))return Promise.reject({type:Pr,reason:"room id is not correct"});{const N=y.find(L=>L.isHost);N&&se.wantJoinBO(N?.userId,i)}}else{if(C===fr.InRoom&&w===i)return Promise.reject({type:nn,reason:"You are in room"});{const N=Ms(g,D);if(!N||N.boId!==i)return Promise.reject({type:Pr,reason:"room id is not correct"});se.joinBO(N.boId)}}return Lr(cF,N=>N.boId===i)}leaveRoom(){const i=this[tr](),u=this[Vs],{breakoutRoom:{controlStatus:l,options:h,currentRoom:{status:g}}}=i;if(l!==Jr.InProgress&&l!==Jr.Closing||g!==fr.InRoom)return Promise.reject({type:nn});{const y=fu(i);if(!h.isBackToMainSessionEnabled&&!y)return Promise.reject({type:Gi,reason:"can not return main session during the breakout room"});ko().forEach(C=>u(C))}return Promise.resolve("")}askForHelp(){const i=this[tr](),{breakoutRoom:{controlStatus:u,mainSessionAttendeeList:l,currentRoom:{status:h}},participants:{attendeesList:g}}=i,y=fu(i);if(u!==Jr.InProgress||h!==fr.InRoom)return Promise.reject({type:nn,reason:"you are not in breakout room"});if(y)return Promise.reject({type:nn,reason:"host or co-host can not ask for help"});{const C=l.find(w=>w.isHost);if(C){if(g.findIndex(w=>w.zoomID===C.zoomID)>-1)return Promise.reject({type:nn,reason:"host is in room"});se.askForHelpBO(C.userId)}}return Lr(zE,C=>C.result===th.Received)}postponeHelping(i){const u=this[tr](),l=this[Vs],{breakoutRoom:{mainSessionAttendeeList:h,currentRoom:{status:g}},participants:{attendeesList:y}}=u;let C=y;return g===fr.InRoom&&(C=h),C.findIndex(w=>w.userId===i)>-1?(se.askForHelpResultBO(i,th.Ignore),l(nI(th.Ignore)),Promise.resolve("")):Promise.reject({type:Pr,reason:"user id is not correct"})}broadcast(i){const{breakoutRoom:{isEnableBOBroadcast:u}}=this[tr]();return u?i?Ia.beginEncrypt({text:i,type:Ga.BO_BROADCAST}).then(l=>(se.broadcastBO(l),Promise.resolve(""))):Promise.reject({type:Pr,reason:"content empty"}):Promise.reject({type:nn,reason:"Cannot broadcast message due to the feature is not enable"})}assignUserToRoom(i,u){const l=this[tr](),{breakoutRoom:{rooms:h}}=l,g=Ac(l).find(y=>y.userId===i);return g&&h.findIndex(y=>y.boId===u)>-1?(se.assignToBO(i,u),Lr(Zh,y=>{const{controlStatus:C,roomList:w}=y,D=w.find(N=>N.boId===u);return C===Jr.InProgress&&D&&D.attendeeGuidList.includes(g.userGUID)})):Promise.reject({type:Pr,reason:""})}moveUserToRoom(i,u){const l=this[tr](),{breakoutRoom:{rooms:h,mainSessionAttendeeList:g},participants:{attendeesList:y}}=l,C=(_w(l)?g:y).find(w=>w.userId===i);if(!C)return Promise.reject({type:Pr,reason:"user id not correct"});{const w=Ms(h,C.userGUID);if(!w)return Promise.reject({type:nn,reason:"user not in a room"});if(w.boId===u)return Promise.reject({type:nn,reason:"user already in the target room"});{const D=h.find(N=>N.boId===u);if(!D)return Promise.reject({type:Pr,reason:"invalid room id"});se.switchBO(i,D.boId)}}return Lr(Zh,w=>{const{controlStatus:D,roomList:N}=w,L=N.find(V=>V.boId===u);return D===Jr.InProgress&&L&&L.attendeeGuidList.includes(C.userGUID)})}closeRoom(){const i=this[tr](),{breakoutRoom:{controlStatus:u}}=i;return u!==Jr.InProgress?Promise.reject({type:nn,reason:"room is not started"}):(se.stopBO(Jr.Closing),Lr(Zh,l=>l.controlStatus===Jr.Closing))}loadPreAssignedRooms(){const i=this[tr](),{meeting:{meetingOptions:u},breakoutRoom:{controlStatus:l}}=i;return!u.isAllowBreakoutRoomPreAssign||l!==Jr.NotStarted&&l!==Jr.Closed?Promise.reject({type:nn}):(se.preAssignBreakoutRoom(),Lr(qE))}getUnassignedAttendeeList(){const i=this[tr](),{meeting:{isHost:u}}=i;return u?Ac(i).map(l=>pS(l)):[]}getRoomList(){const i=this[tr](),{breakoutRoom:{rooms:u,currentRoom:{status:l,boId:h},mainSessionAttendeeList:g},participants:{attendeesList:y}}=i,C=Yn(i);if(C&&(C.isHost||l===fr.InRoom&&C.bCoHost)){const w=l===fr.InRoom,D=w?g:y;return u.map(N=>{const{attendeeGuidList:L,boId:V,name:G}=N,W=(L||[]).map(X=>D.find(ne=>ne.userGUID===X)).filter(X=>!!X&&X.userGUID!==C.userGUID);return w&&C.isHost&&V===h&&W.unshift(C),{roomId:V,name:G,attendeeList:W.filter(X=>!!X).map(X=>({userId:X.userId,displayName:X.displayName,avatar:X.avatar,isInRoom:X.bid===V,userGuid:X.userGUID}))}})}return i.breakoutRoom.rooms.map(w=>{const{boId:D,name:N}=w;return{roomId:D,name:N,attendeeList:[]}})}getAttendeeStatus(){return this[tr]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[tr]().breakoutRoom.controlStatus}getCurrentRoom(){const i=this[tr](),{breakoutRoom:{currentRoom:{status:u,name:l,boId:h}}}=i;return{attendeeStatus:u,name:l,roomId:h}}getRoomOptions(){const i=this[tr](),{breakoutRoom:{options:u}}=i;return{...u}}}).prototype,"createRooms",[An,Pa,bc],Object.getOwnPropertyDescriptor(Li.prototype,"createRooms"),Li.prototype),En(Li.prototype,"openRooms",[An,Pa,bc],Object.getOwnPropertyDescriptor(Li.prototype,"openRooms"),Li.prototype),En(Li.prototype,"joinRoom",[An,bc],Object.getOwnPropertyDescriptor(Li.prototype,"joinRoom"),Li.prototype),En(Li.prototype,"leaveRoom",[An,bc],Object.getOwnPropertyDescriptor(Li.prototype,"leaveRoom"),Li.prototype),En(Li.prototype,"askForHelp",[An,bc],Object.getOwnPropertyDescriptor(Li.prototype,"askForHelp"),Li.prototype),En(Li.prototype,"postponeHelping",[Pa,An,bc],Object.getOwnPropertyDescriptor(Li.prototype,"postponeHelping"),Li.prototype),En(Li.prototype,"broadcast",[Pa,An],Object.getOwnPropertyDescriptor(Li.prototype,"broadcast"),Li.prototype),En(Li.prototype,"assignUserToRoom",[Pa,An,bc],Object.getOwnPropertyDescriptor(Li.prototype,"assignUserToRoom"),Li.prototype),En(Li.prototype,"moveUserToRoom",[Pa,An,bc],Object.getOwnPropertyDescriptor(Li.prototype,"moveUserToRoom"),Li.prototype),En(Li.prototype,"closeRoom",[Pa,An,bc],Object.getOwnPropertyDescriptor(Li.prototype,"closeRoom"),Li.prototype),En(Li.prototype,"loadPreAssignedRooms",[Pa,An,bc],Object.getOwnPropertyDescriptor(Li.prototype,"loadPreAssignedRooms"),Li.prototype),Li);const Zw=ca({epics0:(i,u)=>i.pipe(Wn(`${qu}`),wi(l=>{const{breakoutRoom:h,meeting:{meetingOptions:g}}=u.value,{payload:{hugeBO:y,elapsed:C}}=l,w=[];return h&&(g&&(w.push(rI(y&&!0===g.isBO100Enabled)),w.push(TA({isEnableBreakoutRoom:g.isEnableBreakoutRoom,isEnableBOBroadcast:g.isEnableBOBroadcast}))),h.currentRoom.boConfId&&w.push(aa()),void 0!==C&&w.push(o2(C))),kn(w)})),epics1:i=>Dn(i,4174).pipe(Jn(u=>{Ze(RM,u.payload.body.bid)}),Ar(Ue)),epics2:(i,u)=>la(i,7950).pipe(Nn(u),wi(l=>{let[h,g]=l;const{payload:{body:{proto:y}}}=h,{breakoutRoom:{isHugeBO:C,currentRoom:{status:w,boId:D}},meeting:{userGUID:N}}=g;let L=y;var W,ne,me;C&&(L=function(W,X){if(kS)return kS.decode(W);var _e=function(Ne){for(var et="",ht=0;;){var ze=Ne[ht++],Qe=(ze>127)+(ze>223)+(ze>239);if(ht+Qe>Ne.length)return[et,OS(Ne,ht-1)];Qe?3==Qe?(ze=((15&ze)<<18|(63&Ne[ht++])<<12|(63&Ne[ht++])<<6|63&Ne[ht++])-65536,et+=String.fromCharCode(55296|ze>>10,56320|1023&ze)):et+=String.fromCharCode(1&Qe?(31&ze)<<6|63&Ne[ht++]:(15&ze)<<12|(63&Ne[ht++])<<6|63&Ne[ht++]):et+=String.fromCharCode(ze)}}(W),Re=_e[0];return _e[1].length&&Th(8),Re}(function(ne,me,_e){var Re=ne.length;if(!Re||_e&&_e.f&&!_e.l)return me||new Ja(0);var Ne=!me||_e,et=!_e||_e.i;_e||(_e={}),me||(me=new Ja(3*Re));var ht=function($i){var Qi=me.length;if($i>Qi){var Bi=new Ja(Math.max(2*Qi,$i));Bi.set(me),me=Bi}},ze=_e.f||0,Qe=_e.p||0,wt=_e.b||0,Xt=_e.l,_t=_e.d,it=_e.m,Ce=_e.n,Ye=8*Re;do{if(!Xt){ze=_d(ne,Qe,1);var Ge=_d(ne,Qe+1,3);if(Qe+=3,!Ge){var ut=ne[(xr=cx(Qe)+4)-4]|ne[xr-3]<<8,mt=xr+ut;if(mt>Re){et&&Th(0);break}Ne&&ht(wt+ut),me.set(ne.subarray(xr,mt),wt),_e.b=wt+=ut,_e.p=Qe=8*mt,_e.f=ze;continue}if(1==Ge)Xt=wU,_t=Yw,it=9,Ce=5;else if(2==Ge){var St=_d(ne,Qe,31)+257,Wt=_d(ne,Qe+10,15)+4,en=St+_d(ne,Qe+5,31)+1;Qe+=14;for(var rn=new Ja(en),on=new Ja(19),hr=0;hr<Wt;++hr)on[DS[hr]]=_d(ne,Qe+3*hr,7);Qe+=3*Wt;var Hn=vk(on),Er=(1<<Hn)-1,or=Ih(on,Hn,1);for(hr=0;hr<en;){var xr,Wi=or[_d(ne,Qe,Er)];if(Qe+=15&Wi,(xr=Wi>>>4)<16)rn[hr++]=xr;else{var Si=0,Bt=0;for(16==xr?(Bt=3+_d(ne,Qe,3),Qe+=2,Si=rn[hr-1]):17==xr?(Bt=3+_d(ne,Qe,7),Qe+=3):18==xr&&(Bt=11+_d(ne,Qe,127),Qe+=7);Bt--;)rn[hr++]=Si}}var Tt=rn.subarray(0,St),at=rn.subarray(St);it=vk(Tt),Ce=vk(at),Xt=Ih(Tt,it,1),_t=Ih(at,Ce,1)}else Th(1);if(Qe>Ye){et&&Th(0);break}}Ne&&ht(wt+131072);for(var Zt=(1<<it)-1,xn=(1<<Ce)-1,sr=Qe;;sr=Qe){var br=(Si=Xt[ax(ne,Qe)&Zt])>>>4;if((Qe+=15&Si)>Ye){et&&Th(0);break}if(Si||Th(2),br<256)me[wt++]=br;else{if(256==br){sr=Qe,Xt=null;break}var In=br-254;if(br>264){var nr=Ps[hr=br-257];In=_d(ne,Qe,(1<<nr)-1)+IU[hr],Qe+=nr}var Mr=_t[ax(ne,Qe)&xn],Kr=Mr>>>4;if(Mr||Th(3),Qe+=15&Mr,at=nj[Kr],Kr>3&&(nr=hk[Kr],at+=ax(ne,Qe)&(1<<nr)-1,Qe+=nr),Qe>Ye){et&&Th(0);break}Ne&&ht(wt+131072);for(var Fr=wt+In;wt<Fr;wt+=4)me[wt]=me[wt-at],me[wt+1]=me[wt+1-at],me[wt+2]=me[wt+2-at],me[wt+3]=me[wt+3-at];wt=Fr}}_e.l=Xt,_e.p=sr,_e.b=wt,_e.f=ze,Xt&&(ze=1,_e.m=it,_e.d=_t,_e.n=Ce)}while(!ze);return wt==me.length?me:OS(me,0,wt)}((W=su(y)).subarray(function(ne){31==ne[0]&&139==ne[1]&&8==ne[2]||Th(6,"invalid gzip data");var me=ne[3],_e=10;4&me&&(_e+=ne[10]|2+(ne[11]<<8));for(var Re=(me>>3&1)+(me>>4&1);Re>0;Re-=!ne[_e++]);return _e+(2&me)}(W),-8),new Ja(((ne=W)[(me=ne.length)-4]|ne[me-3]<<8|ne[me-2]<<16|ne[me-1]<<24)>>>0))));const V=[];let G;try{const W=JSON.parse(Bs(L)),{ControlStatus:X,NameIndex:ne,IsAutoJoinEnabled:me,IsBackToMainSessionEnabled:_e,IsTimerEnabled:Re,TimerDuration:Ne,IsTimerAutoEndEnabled:et,WaitSeconds:ht,StartTimeOnMMR:ze,ItemList:Qe}=W,wt={isAutoJoinRoom:me,isBackToMainSessionEnabled:_e,isTimerEnabled:Re,timerDuration:Ne,isTimerAutoEnabled:et,waitSeconds:ht};V.push(jR(wt)),V.push(VR(ze)),V.push(hb(ne)),V.push(s2(X));const Xt=Qe&&Qe.map(_t=>({boId:_t.BID,name:_t.MeetingTitle,boStatus:_t.Status,hostId:_t.HostID,attendeeGuidList:_t.ParticipantList||[]}))||[];switch(V.push(XC(Xt)),Ze(Zh,{controlStatus:X,roomList:Xt}),X){case Jr.InProgress:if(w!==fr.InRoom&&w!==fr.Joining){const _t=function(it,Ce){const{meeting:{isHost:Ye,userGUID:Ge}}=Ce.value,ut=Yr.get(mx),mt=[];if(ut)try{const{status:St,boId:Wt}=JSON.parse(ut);if(St===fr.Invited)if(Ye)Rh();else{const en=Ms(it,Ge);en&&(mt.push(Le(en)),Ze(AC,{roomId:en.boId,name:en.name}))}else if(St===fr.InRoom){let en;if(en=Ye?it.find(rn=>rn.boId===Wt):Ms(it,Ge),en){mt.push(Le(en));const rn=en.boId;T_(Ce).subscribe(()=>{kr.createAgent().joinBO(rn)})}Rh()}}catch(St){console.error(St)}return mt}(Xt,u);if(0===_t.length){const it=Ms(Xt,N);it&&V.push(Le(it))}else V.push(..._t)}else if(w===fr.InRoom&&h.type===`${Dl}`){const _t=Ms(Xt,N);_t&&wo(u).subscribe(it=>{D===_t.boId||it||Ss.joinBO(_t.boId)})}wt.isTimerEnabled&&wt.timerDuration>0&&(it=wt.timerDuration,Ce=ze,G=wo(_t=u).pipe(Nn(_t),wi(Ye=>{let[Ge,ut]=Ye;const{breakoutRoom:{currentRoom:{status:mt},meetingElapsedTime:St},meeting:{joinMeetingTimeStamp:Wt}}=ut,en=Wt-1e3*St+1e3*Ce+1e3*it;if(performance.now()<en){if(Ge)return Mp(1e3).pipe(Bn(()=>Math.floor((en-performance.now())/1e3)),Nn(_t),Ev(rn=>{let[on,hr]=rn;const{breakoutRoom:{controlStatus:Hn,currentRoom:{status:Er}},socket:{zoomSocketStatus:or},meeting:{isHost:xr}}=hr;return on>=0&&xr&&Hn===Jr.InProgress&&(Er===fr.InRoom||Er===fr.MainSession||Er===fr.Initial)&&or===qi.Connected}),Jn(rn=>{let[on]=rn;Ze(Zd,{countdown:on})}),Ut(rn=>{let[on]=rn;return 0===on}),Jn(rn=>{let[,on]=rn;const{breakoutRoom:{options:hr}}=on;hr.isTimerAutoEnabled?kr.createAgent().stopBO(Jr.Closing):Ze($1)}),Ar(Ue));if(mt===fr.InRoom)return Mp(1e3).pipe(Bn(()=>Math.floor((en-performance.now())/1e3)),Nn(_t),Ev(rn=>{let[on,hr]=rn;const{breakoutRoom:{currentRoom:{status:Hn}},meeting:{isHost:Er},socket:{zoomSocketStatus:or}}=hr;return on>=0&&Hn===fr.InRoom&&!Er&&or===qi.Connected}),Jn(rn=>{let[on]=rn;Ze(Zd,{countdown:on})}),Ar(Ue))}return Ue})));break;case Jr.Closing:G=wo(u).pipe(Ut(_t=>_t),hn(()=>{const _t=[],{breakoutRoom:{closingRoomTime:it,currentRoom:{status:Ce}},participants:{attendeesList:Ye}}=g;let Ge=wt.waitSeconds;if(0!==it&&wt.waitSeconds>0){const ut=Math.floor((performance.now()-it)/1e3);Ge=Math.max(wt.waitSeconds-ut,0)}if(0===Ge)return Ss.stopBO(Jr.Closed),Ue;{if(Ce!==fr.InRoom&&Ye.length>1&&Ye.every(mt=>!mt.bid))return Ss.stopBO(Jr.Closed),Ue;it||_t.push(eI(performance.now()));const ut=performance.now()+1e3*Ge;return un(kn(_t),Mp(1e3).pipe(Bn(()=>Math.floor((ut-performance.now())/1e3)),Nn(u),Ev(mt=>{let[St,Wt]=mt;const{breakoutRoom:{controlStatus:en},meeting:{isHost:rn},socket:{zoomSocketStatus:on}}=Wt;return St>=0&&en===Jr.Closing&&on===qi.Connected&&rn}),Jn(mt=>{let[St]=mt;St>=0&&Ze(nA,{countdown:St})}),Ut(mt=>{let[St]=mt;return 0===St}),Jn(()=>{Ss.stopBO(Jr.Closed)}),Ar(Ue)))}}));break;case Jr.Closed:V.push(eI(0)),w===fr.Leaving?V.push(E_(fr.MainSession)):w===fr.Invited?V.push(E_(fr.Initial)):w!==fr.InRoom&&w!==fr.Joining||V.push(...ko()),Rh()}}catch(W){console.error(W)}var _t,it,Ce;return G?un(kn(V),G):kn(V)})),epics3:(i,u)=>la(i,4194).pipe(Nn(u),wi(l=>{let[h,g]=l;const{payload:{body:{bid:y,botoken:C,confID:w}}}=h,{meeting:{isHost:D},breakoutRoom:{rooms:N,currentRoom:{status:L}}}=g,V=[],G=N.find(W=>W.boId===y);return G&&(V.push(Le(G,D)),V.push(QR(w)),V.push(fb(C)),D||L!==fr.InRoom?V.push(...Of(G.name,L)):V.push(...Te(G.name))),Ze(cF,{boId:y}),kn(V)})),epics4:(i,u)=>i.pipe(Wn(`${el}`,`${Dl}`),Ut(l=>7949===l.payload.evt),Nn(u),hn(l=>{let[h,g]=l;const{payload:{body:y}}=h,{meeting:{userGUID:C},breakoutRoom:{rooms:w,options:{isAutoJoinRoom:D},currentRoom:{status:N}}}=g,{commandType:L}=y,V=[];let G;switch(L){case d_.Join:{const{targetBID:X,botoken:ne,confID:me}=y,_e=Ms(w,C);_e&&_e.boId===X&&(V.push(QR(me)),V.push(fb(ne)),D?V.push(...Of(_e.name)):(Yr.set(ro.WebclientBreakoutRoomCommand,L,Mi.SessionStorage),Ze(AC,{roomId:X,name:_e.name})));break}case d_.Switch:{const{targetBID:X,botoken:ne,confID:me}=y,_e=Ms(w,C);_e&&_e.boId===X&&(V.push(ZC({boId:_e.boId,boToken:ne,boConfId:me,name:_e.name})),N===fr.Invited?(Yr.set(ro.WebclientBreakoutRoomCommand,L,Mi.SessionStorage),D?V.push(...Of(_e.name)):Ze(AC,{roomId:X,name:_e.name})):V.push(...Te(_e.name)));break}case d_.Leave:{const{waitTime:X}=y;if((W=N)!==fr.InRoom&&W!==fr.Joining&&W!==fr.Leaving)V.push(ZC({boId:"",boToken:"",boConfId:"",status:fr.Initial}));else{const ne=Number(X);if(ne>0){const me=performance.now()+1e3*ne;G=Mp(1e3).pipe(Bn(()=>Math.floor((me-performance.now())/1e3)),Nn(u),Ev(_e=>{let[Re,Ne]=_e;const{breakoutRoom:{controlStatus:et,currentRoom:{status:ht}},meeting:{isHost:ze},socket:{zoomSocketStatus:Qe}}=Ne;return Re>=0&&Qe===qi.Connected&&et===Jr.Closing&&ht===fr.InRoom&&!ze}),Jn(_e=>{let[Re]=_e;Re>=0&&Ze(nA,{countdown:Re})}),Ar(Ue))}else V.push(...ko());Rh()}break}case d_.Broadcast:{const{textContent:X}=y;if(X){const{meeting:{encType:ne},participants:{attendeesList:me},breakoutRoom:{mainSessionAttendeeList:_e}}=g;let Re="";if(ne===F0.AES_GCM){const Ne=me.concat(_e).find(et=>cA(et.userRole));Ne&&(Re=Ne.zoomID)}G=kn(Ia.beginDecrypt({decryptedText:X,type:Ga.BO_BROADCAST,zoomId:Re}).then(Ne=>{let{message:et}=Ne;return Ze(rA,{message:et}),tI(et)}))}break}case d_.HelpReq:{const{requestID:X}=y,{breakoutRoom:{mainSessionAttendeeList:ne,rooms:me,currentRoom:{boId:_e},hostReplyToQuestionerType:Re,hostReplyToRequestId:Ne},participants:{attendeesList:et}}=g;if(X){if(N===fr.InRoom){const ht=ne.find(ze=>ze.userId===X);if(ht&&ht.bid===_e){Ss.askForHelpResultBO(X,th.AlreadyInRoom);break}}if(Re===th.Received&&Ne!==X)Ss.askForHelpResultBO(X,th.Busy);else{Ss.askForHelpResultBO(X,th.Received),V.push(nI(th.Received),mb(X));const ht=(N===fr.InRoom?ne:et).find(ze=>ze.userId===X);if(ht){const ze=ht.bid,Qe=me.find(wt=>wt.boId===ze);Qe&&Ze(iA,{userId:X,userGuid:ht.userGUID,displayName:ht.displayName,roomName:Qe.name,roomId:Qe.boId})}}}break}case d_.HelpRes:{const{helpResult:X}=y;Ze(zE,{result:Number(X)});break}}var W;return G?un(kn(V),G):kn(V)})),epics5:(i,u)=>Lp(i,4098).pipe(Nn(u),wi(l=>{let[h,g]=l;const{payload:{body:{res:y,elapsed:C}}}=h,w=[];return y===Ku.CONF_FAIL_MEETING_HAS_CLOSED||y===Ku.CONF_FAIL_HAS_BEEN_REMOVED?(Rh(),w.push(...za(g,!1))):y===Ku.CONF_SUCCESS&&(w.push(o2(C)),w.push(E_(fr.InRoom)),Yr.set(ro.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:fr.InRoom,boId:g.breakoutRoom.currentRoom.boId}),Mi.SessionStorage)),kn(w)})),epics6:(i,u)=>Lp(i,So).pipe(Bn(l=>Qb(l.payload.body)),Nn(u),hn(l=>{let[h,g]=l;const y=[km(h)],{participants:{attendeesList:C},breakoutRoom:{mainSessionAttendeeList:w,isUserRoleUpdated:D},meeting:{userId:N}}=g;let L=[];return["add","update"].forEach(V=>h[V]&&L.push(...h[V])),L=L.filter(V=>Xw.some(G=>void 0!==V[G])).map(V=>{const G=w.find(W=>W.userId===V.userId);if(G){const W=C.find(X=>X.zoomID===G.zoomID);if(W)return void 0===V.userRole||D||W.userId!==N||(y.push(oI(!0)),Ze(DM,V)),void 0!==V.bCCEditor&&y.push(xR({editorId:V.bCCEditor?W.userId:"",isEditor:!!V.bCCEditor,editorZoomId:V.bCCEditor?W.zoomID:""})),delete V.bRaiseHand,delete V.bCapsPinMultiVideo,{...V,userId:W.userId}}return null}).filter(V=>!!V),L.length>0&&(Ze(Wp,L),y.push(ep({update:L}))),Ze(yC),kn(y)})),epics7:i=>Lp(i,uc).pipe(Ut(u=>{const{payload:{body:l}}=u;return void 0!==l?.bAllowAttendeeRename||void 0!==l?.chatPriviledge||void 0!==l?.lockShare}),Bn(u=>{const{payload:{body:l}}=u;return void 0!==l.bAllowAttendeeRename?f1(u.payload.body):void 0!==l.chatPriviledge?MR(l.chatPriviledge):void 0!==l.lockShare?ER(l.lockShare):void 0})),epics8:(i,u)=>Dn(i,So).pipe(Nn(u),Ut(l=>{let[,h]=l;const{meeting:{isHost:g},breakoutRoom:{controlStatus:y,currentRoom:{status:C}}}=h;return g&&y===Jr.Closing&&C!==fr.InRoom}),_o(fo),Jn(()=>{const{participants:{attendeesList:l}}=u.value;l.every(h=>!h.bid)&&l.length>1&&Ss.stopBO(Jr.Closed)}),Ar(Ue)),epics9:(i,u)=>Dn(i,4214).pipe(Nn(u),wi(l=>{let[h,g]=l;const{payload:{body:{proto:y}}}=h,{breakoutRoom:{rooms:C,isHugeBO:w}}=g;try{const D=JSON.parse(Bs(y)),N=[];if(D&&D.PreAssignBoList&&Array.isArray(D.PreAssignBoList)){const L=D.PreAssignBoList.map(G=>({name:G.BoName,emails:G.email}));if(N.push(iI(L)),C.length+L.length<(w?100:50)){const G=L.map(W=>W.name);return Ss.batchCreateBOToken(G),un(kn(N),Ek(G.length).pipe(Nn(u),hn(W=>{let[{boIdList:X},ne]=W;const me=Uo(ne),_e=L.map((Ne,et)=>{const{emails:ht,name:ze}=Ne;let Qe=[];return ht&&Array.isArray(ht)&&(Qe=ht.map(wt=>me.filter(Xt=>Xt.userEmail===wt).map(Xt=>Xt.userGUID)).reduce((wt,Xt)=>[...wt,...Xt],[])),{boId:X[et],name:ze,attendeeGuidList:Qe}}),Re=_e.map((Ne,et)=>({roomId:Ne.boId,name:Ne.name,emails:L[et].emails}));return Ze(qE,{rooms:Re}),kn([XC(_e),iI(Re)])})))}return kn(N)}}catch{console.error("pre assign proto is not valid")}return Ue})),epics10:(i,u)=>la(i,So).pipe(Nn(u),Ut(l=>{let[h,g]=l;const{meeting:{isHost:y,meetingStatus:C,meetingOptions:w},breakoutRoom:{controlStatus:D}}=g,{payload:{body:N}}=h;return C===Do.Joined&&w?.isAllowBreakoutRoomPreAssign&&y&&(D===Jr.NotStarted||D===Jr.InProgress)&&Array.isArray(N.add)}),hn(l=>{let[h,g]=l;const{breakoutRoom:{controlStatus:y,rooms:C,preAssignedRooms:w,currentRoom:{status:D}},participants:{failoverAttendeesList:N}}=g,L=w?.filter(W=>C.findIndex(X=>X.boId===W.roomId)>-1),{payload:{body:{add:V}}}=h,G=[];return L.length>0&&V.filter(W=>W.userEmail&&W.userGUID).filter(W=>-1===N.findIndex(X=>X.zoomID===W.zoomID)).forEach(W=>{if(!Ms(C,W.userGUID))for(let X=0;X<L?.length;X++){const ne=L[X];if(ne.emails.includes(W.userEmail)){if(y===Jr.NotStarted){const me=ct(C,_e=>{_e.find(Ne=>Ne.boId===ne.roomId)?.attendeeGuidList.push(W.userGUID)});G.push(XC(me))}else y===Jr.InProgress&&(D===fr.InRoom&&h.type===`${Dl}`?Ss.assignToBO(W.id,String(ne.roomId)):D!==fr.Initial&&D!==fr.MainSession||Ss.assignToBO(W.id,String(ne.roomId)));break}}}),kn(G)})),epics11:(i,u)=>Dn(i,So).pipe(Ut(l=>{const{breakoutRoom:{mainSessionAttendeeList:h}}=u.value,{payload:{body:g}}=l;return h.length>0&&(void 0!==g.add||void 0!==g.update)}),_o(Rc),Bn(l=>Qb(l.payload.body)),hn(l=>{const{breakoutRoom:{mainSessionAttendeeList:h,isUserRoleUpdated:g},participants:{attendeesList:y}}=u.value;let C=[];const w=[];["add","update"].forEach(L=>l[L]&&C.push(...l[L]));const D=[...Xw,"isHost"];C=C.filter(L=>D.some(V=>void 0!==L[V]));const N=C.filter(L=>void 0!==L.zoomID);return C=C.map(L=>{var V,G,W,X;const ne=null!==(V=null!==(G=L.zoomID)&&void 0!==G?G:null===(W=N.find(me=>me.userId===L.userId))||void 0===W?void 0:W.zoomID)&&void 0!==V?V:null===(X=y.find(me=>me.userId===L.userId))||void 0===X?void 0:X.zoomID;if(ne){const me=h.find(_e=>_e.zoomID===ne);if(me)return g||(w.push(oI(!0)),Ze(DM,me)),Object.keys(L).filter(_e=>Object.prototype.hasOwnProperty.call(L,_e)).filter(_e=>D.includes(_e)).reduce((_e,Re)=>{const Ne=me[Re];return void 0===Ne&&"bCoHost"!==Re||Object.assign(_e,{[Re]:"boolean"==typeof L[Re]?!!Ne:Ne}),_e},{userId:L.userId})}}).filter(Boolean),C.length>0&&(Ze(Wp,C),w.push(ep({update:C}))),kn(w)}))},{breakoutRoomSharingEpics0:(i,u)=>Lp(i,So).pipe(Ut(l=>{var h;const{payload:{body:g}}=l;return null==g||null===(h=g.update)||void 0===h?void 0:h.some(y=>void 0!==y.bShareToBORooms||void 0!==y.bShareOn)}),Nn(u),Bn(l=>{let[h,g]=l;const{payload:{body:{update:y}}}=h,{breakoutRoom:{mainSessionAttendeeList:C}}=g,w=y.filter(L=>L.bShareOn&&L.bShareToBORooms),D=y.filter(L=>!L.bShareOn||!L.bShareToBORooms),N=C.filter(L=>L.sharerOn&&L.bShareToBORooms);return w.length>0&&w.forEach(L=>{-1===N.findIndex(V=>V.userId===L.id)&&Ze(Jv,{...L,isFromMainSession:!0})}),D.length>0&&D.forEach(L=>{Ze(Xv,{...L,isFromMainSession:!0})}),y.map(L=>{if(L.bShareOn&&L.bShareToBORooms){if(0===C.filter(V=>V.sharerOn&&V.bShareToBORooms&&V.userId!==L.id).length)return{activeNodeID:L.id,bStatus:1,ssrc:L.shareSsrc};{const V=C.find(G=>G.userId===L.id);if(null!=V&&V.isHost)return{activeNodeID:L.id,bStatus:1,ssrc:L.shareSsrc}}}else if(!L.bShareOn||!L.bShareToBORooms){const V=C.filter(G=>G.bShareToBORooms&&G.sharerOn);if(1===V.length&&V[0].userId===L.id)return{activeNodeID:L.id,bStatus:0,ssrc:0};{const G=V.filter(X=>X.userId!==L.id),W=G.find(X=>X.isHost);if(W)return{activeNodeID:W.userId,bStatus:1,ssrc:W.shareSsrc};{const X=G[0];if(X)return{activeNodeID:X.userId,bStatus:1,ssrc:X.shareSsrc}}}}}).filter(Boolean)}),hn(l=>{const{share:{status:h},meeting:{userId:g}}=u.value,y=[];return l.map(C=>{const{activeNodeID:w,bStatus:D,ssrc:N}=C,L=1===D;y.push(QM(L)),L&&h!==yi.End&&(Gc.stopSharing(g),ev.stopDesktopSharing(),y.push(Ll(yi.End)),Ze(dC));let V={activeNodeID:w,bStatus:D,ssrc:N,fromMainSession:!0};if(!L){const{participants:{attendeesList:G}}=u.value,W=G.filter(X=>X.sharerOn);if(W.length>0){const X=W[0];V={activeNodeID:X.userId,bStatus:1,ssrc:X.shareSsrc||0}}}y.push(el({evt:20225,body:V}))}),kn(y)})),breakoutRoomSharingEpics1:(i,u)=>Lp(i,4098).pipe(wi(l=>{const{payload:{body:{userID:h,confID:g}}}=l;return un(...["sharing","audio"].map(y=>{return D=u,N=h,L=g,Lp(i,"audio"===(C=y)?Qp:V0).pipe(ki(1),Jn(V=>{const{payload:{body:{encryptKey:G,additionalType:W}}}=V,{media:{sharingDecodeStatus:X,audioDecodeStatus:ne},meeting:{svcUrl:me,meetingNumber:_e,conId:Re,zoomId:Ne,meetingId:et}}=D.value;Os(C,"success","audio"===C?ne:X).subscribe(ht=>{let[,ze]=ht;if(ze){vd.createMainSessionChannel(C,`wss://${me}/wc/media/${_e}?type=${"audio"===C?"ma":"ms"}&cid=${Re}&mode=1`),vd.updateMediaParams({iVType:"audio"===C?zs.AUDIO_DECODE:zs.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:N,sn:su(Ne),confId:L,encryptType:W,encryptKey:su(G),meetingId:et,meetingNumber:_e}});const{breakoutRoom:{mainSessionAttendeeList:wt}}=D.value;if(wt?.length>0){const Xt=wt.map(_t=>({userid:_t.userId,sn:_t.zoomID&&su(_t.zoomID)}));vd.updateUserMediaSN({added:Xt,isFromMainSession:!0,iVType:"audio"===C?zs.AUDIO_DECODE:zs.SHARING_DECODE})}}})}),Ar(Ue));var C,D,N,L}))}))});let Hy=function(i){return i[i.Ready=0]="Ready",i[i.UserSub=1]="UserSub",i[i.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",i[i.ManualCaptionerDisabled=3]="ManualCaptionerDisabled",i}({}),Du=function(i){return i[i.Unspecified=-1]="Unspecified",i[i.English=0]="English",i[i["Chinese (Simplified)"]=1]="Chinese (Simplified)",i[i.Japanese=2]="Japanese",i[i.German=3]="German",i[i.French=4]="French",i[i.Russian=5]="Russian",i[i.Portuguese=6]="Portuguese",i[i.Spanish=7]="Spanish",i[i.Korean=8]="Korean",i[i.Italian=9]="Italian",i[i.Reserved=10]="Reserved",i[i.Vietnamese=11]="Vietnamese",i[i.Dutch=12]="Dutch",i[i.Ukrainian=13]="Ukrainian",i[i.Arabic=14]="Arabic",i[i.Bengali=15]="Bengali",i[i["Chinese (Traditional)"]=16]="Chinese (Traditional)",i[i.Czech=17]="Czech",i[i.Estonian=18]="Estonian",i[i.Finnish=19]="Finnish",i[i.Greek=20]="Greek",i[i.Hebrew=21]="Hebrew",i[i.Hindi=22]="Hindi",i[i.Hungarian=23]="Hungarian",i[i.Indonesian=24]="Indonesian",i[i.Malay=25]="Malay",i[i.Persian=26]="Persian",i[i.Polish=27]="Polish",i[i.Romanian=28]="Romanian",i[i.Swedish=29]="Swedish",i[i.Tamil=30]="Tamil",i[i.Telugu=31]="Telugu",i[i.Tagalog=32]="Tagalog",i[i.Turkish=33]="Turkish",i[i.NoTranslation=400]="NoTranslation",i[i.DefaultManualInput=401]="DefaultManualInput",i[i.Customized=500]="Customized",i}({}),kf=function(i){return i[i.Unknown=0]="Unknown",i[i.Close=1]="Close",i[i.New=2]="New",i[i.Insert=3]="Insert",i[i.Delete=4]="Delete",i[i.Reset=5]="Reset",i[i.Audiodesc=6]="Audiodesc",i[i.Speaker=7]="Speaker",i[i.Error=8]="Error",i}({}),MS=function(i){return i[i.TranslateNotSupport=1]="TranslateNotSupport",i}({}),Ad=function(i){return i[i.Unspecified=0]="Unspecified",i[i.InMeetingManual=1]="InMeetingManual",i[i.ExternalCaptioner=2]="ExternalCaptioner",i[i.ASR=4]="ASR",i}({});const Pf={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,bn:15,"zh-hant":16,cs:17,et:18,fi:19,el:20,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33},mg=Object.keys(Du).filter(i=>/\d+/.test(Du[i])).reduce((i,u)=>({...i,[`${Du[u]}`]:u}),{}),eT=Object.keys(Pf).reduce((i,u)=>(Object.assign(i,{[`${Pf[`${u}`]}`]:u}),i),{}),Mf="zoom-sdk-live-trasncription",Ou="live-trasncription";let tv=function(i){return i[i.English=0]="English",i[i.Chinese=1]="Chinese",i[i.Japanese=2]="Japanese",i[i.German=3]="German",i[i.French=4]="French",i[i.Russian=5]="Russian",i[i.Portuguese=6]="Portuguese",i[i.Spanish=7]="Spanish",i[i.Korean=8]="Korean",i[i.Italian=9]="Italian",i[i.Reserved=10]="Reserved",i[i.Vietnamese=11]="Vietnamese",i[i.Dutch=12]="Dutch",i[i.Ukrainian=13]="Ukrainian",i[i.Arabic=14]="Arabic",i[i.Bengali=15]="Bengali",i[i["Chinese (Traditional)"]=16]="Chinese (Traditional)",i[i.Czech=17]="Czech",i[i.Estonian=18]="Estonian",i[i.Finnish=19]="Finnish",i[i.Greek=20]="Greek",i[i.Hebrew=21]="Hebrew",i[i.Hindi=22]="Hindi",i[i.Hungarian=23]="Hungarian",i[i.Indonesian=24]="Indonesian",i[i.Malay=25]="Malay",i[i.Persian=26]="Persian",i[i.Polish=27]="Polish",i[i.Romanian=28]="Romanian",i[i.Swedish=29]="Swedish",i[i.Tamil=30]="Tamil",i[i.Telugu=31]="Telugu",i[i.Tagalog=32]="Tagalog",i[i.Turkish=33]="Turkish",i[i.NoTranslation=400]="NoTranslation",i[i.DefaultManualInput=401]="DefaultManualInput",i}({}),jn=function(i){return i.English="en",i["Chinese (Simplified)"]="zh",i.Japanese="ja",i.German="de",i.French="fr",i.Russian="ru",i.Portuguese="pt",i.Spanish="es",i.Korean="ko",i.Italian="it",i.Reserved="en1",i.Vietnamese="vi",i.Dutch="nl",i.Ukrainian="uk",i.Arabic="ar",i.Bengali="bn",i["Chinese (Traditional)"]="zh-hant",i.Czech="cs",i.Estonian="et",i.Finnish="fi",i.Greek="el",i.Hebrew="he",i.Hindi="hi",i.Hungarian="hu",i.Indonesian="id",i.Malay="ms",i.Persian="fa",i.Polish="pl",i.Romanian="ro",i.Swedish="sv",i.Tamil="ta",i.Telugu="te",i.Tagalog="tl",i.Turkish="tr",i}({});function ji(i){const u=i===Du.Unspecified?Du.Reserved:i;Qr.getInstance().selectLanguageChannelForNewLTT(u)}const ku=SC(sR,function(i,u){return aS(i,u)})([Uo,i=>{let{meeting:{gatewayUserList:u}}=i;return u}],(i,u)=>{const l={};return i.forEach(h=>{Object.assign(l,{[`${h.userId}`]:h.zoomID})}),u?.forEach(h=>{Object.assign(l,{[`${h.userId}`]:h.sn})}),l}),Wl=Rs([Uo],i=>i.find(u=>!0===u.bCCEditor)),$t=Rs([Uo,aR],(i,u)=>i.some(l=>!0===l.bCCEditor&&l.userId===u)),gg=kr.createAgent(),cr={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isHostDisableCaptions:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0},xa=li({[`${df}`]:ct((i,u)=>{let{payload:l}=u;i.isLiveTranscriptionEnabled=l}),[`${b_}`]:ct((i,u)=>{let{payload:l}=u;const{transcriptionLang:h,translatedSetting:g,...y}=l;h&&(i.transcriptionLang=h.split(";").map(C=>{const w=C&&Pf[C];return void 0!==w?{lang:C,code:w}:null}).filter(Boolean)),g&&(i.translatedSetting=Object.keys(g).map(C=>{const w=g[C];if(w){const D=w.split(";").map(N=>{const L=N&&Pf[N];return void 0!==L?{lang:N,code:L}:null}).filter(Boolean);return{lang:C,code:Pf[C],translatedToLanguage:D}}return null}).filter(Boolean)),Object.assign(i,y)}),[`${oh}`]:ct((i,u)=>{let{payload:l}=u;i.isManualCaptionerEnabled=l}),[`${Nm}`]:ct((i,u)=>{let{payload:l}=u;i.gatewayId=l}),[`${vb}`]:ct((i,u)=>{let{payload:l}=u;i.isHostDisableCaptions=l}),[`${S_}`]:ct((i,u)=>{let{payload:l}=u;i.supportedTranscriptionLanguage=l}),[`${sh}`]:ct((i,u)=>{let{payload:l}=u;i.currentTranscriptionLang=l}),[`${pf}`]:ct((i,u)=>{let{payload:l}=u;i.currentTranslationLang=l}),[`${Lm}`]:ct((i,u)=>{let{payload:l}=u;i.messageRecords.push(l)}),[`${zR}`]:ct((i,u)=>{let{payload:l}=u;const h=i.messageRecords.find(g=>g.msgId===l.msgId);h&&Object.assign(h,l)}),[`${qR}`]:ct((i,u)=>{let{payload:l}=u;const{remains:h,reducedRecordsCount:g}=l,y=i.messageRecords.length-h;i.isRecordsReduced=!0,i.reducedRecordsCount=g,i.messageRecords.splice(0,y)}),[`${xm}`]:ct((i,u)=>{let{payload:l}=u;i.isLiveTranscriptionSubscribed=l}),[`${MA}`]:ct((i,u)=>{let{payload:l}=u;i.liveTransEngineType=l}),[`${YR}`]:ct(i=>{i.stateBeforeFailover=void 0}),[`${$R}`]:ct((i,u)=>{let{payload:l}=u;i.lastManualCaption=l}),[`${JR}`]:(i,u)=>{let{payload:l}=u;return l?{...cr,stateBeforeFailover:{currentTranscriptionLang:i.currentTranscriptionLang,currentTranslationLang:i.currentTranslationLang,isLiveTranscriptionSubscribed:i.isLiveTranscriptionSubscribed},messageRecords:i.messageRecords,isRecordsReduced:i.isRecordsReduced,reducedRecordsCount:i.reducedRecordsCount}:{...cr}}},cr);var Po;const Wc=kr.createAgent(),Dh=hp("Live transcription");let El=(En((Po=class extends vh{startLiveTranscription(){const{[tr]:i,[Vs]:u}=this,{liveTranscription:{isLiveTranscriptionEnabled:l,isEnableTranslatedCaptions:h,isLiveTranscriptionSubscribed:g,isHostLockSpeakingLanguage:y,isHostDisableCaptions:C}}=i();return g?Promise.resolve(""):C?Promise.reject({type:nn,reason:"Captions has been disabled by host."}):l?(Wc.enableNewLLT(),Lr($u).then(()=>{y?Wc.setSpokenLanguage(Du.English):ji(Du.Unspecified),u(sh(Du.English)),h&&Wc.setTranslationLanguage()})):Promise.reject({type:nn,reason:"Live transcription is not enabled."})}disableCaptions(i){const{[tr]:u}=this,{liveTranscription:{isHostDisableCaptions:l}}=u();return i?l?Promise.resolve():(Wc.disableCaptions(!0),Lr(Pc)):l?(Wc.disableCaptions(!1),Lr(Pc)):Promise.resolve()}setSpeakingLanguage(i){const{[tr]:u,[Vs]:l}=this,{liveTranscription:{isLiveTranscriptionSubscribed:h,isHostLockSpeakingLanguage:g,transcriptionLang:y}}=u(),C=y.find(w=>w.lang===i);if(C){const{code:w}=C;return h?(g?Wc.setSpokenLanguage(w):ji(w),l(sh(w)),Promise.resolve("")):Promise.reject({type:nn,reason:"Cannot set speaking language before starting live transcription"})}return Promise.reject({type:Pr,reason:"Unsupported transcription language"})}setTranslationLanguage(i){const{[tr]:u,[Vs]:l}=this,h=u(),{liveTranscription:{isEnableTranslatedCaptions:g,isLiveTranscriptionSubscribed:y,translatedSetting:C,currentTranscriptionLang:w}}=h;if(!g)return Promise.reject({type:nn,reason:"Live translation is not enabled."});if(!y)return Promise.reject({type:nn,reason:"Cannot set translation language before starting live transcription"});if(i){const D=C?.find(N=>N.code===w);if(D){const{translatedToLanguage:N}=D,L=N.find(V=>V.lang===i);if(L)return Wc.setTranslationLanguage(L.code),Lr({event:$u,operations:[Ut(V=>!0===V.autoCaption&&V.lang===L.code),ki(1)]},V=>{let{lang:G}=V;return G===L.code})}return Promise.reject({type:nn,reason:`Cannot support translating ${mg[w||0]} to ${i}`})}return Wc.setTranslationLanguage(),l(pf(void 0)),Promise.resolve("")}enableManualCaptioner(){const{[tr]:i}=this,{meeting:{meetingOptions:u},liveTranscription:{isManualCaptionerEnabled:l,isHostDisableCaptions:h}}=i();if(h)return Promise.reject({type:nn,reason:"Captions has been disabled by host."});const{isEnableManualCaptions:g,isEnableClosedCaption:y}=u;return g??y?l?Promise.resolve():(Wc.enableManualCaption(!0),Lr($u,C=>{let{autoCaption:w}=C;return!1===w})):Promise.reject({type:nn,reason:"Manual caption is not enabled."})}disableManualCaptioner(){const{[tr]:i}=this,{liveTranscription:{isManualCaptionerEnabled:u}}=i();return u?(Wc.enableManualCaption(!1),Lr($u,l=>{let{autoCaption:h}=l;return!0===h})):Promise.resolve()}assignManualCaption(i){var u;const{[tr]:l}=this,h=l(),{liveTranscription:{isManualCaptionerEnabled:g},participants:{attendeesList:y},meeting:{userId:C}}=h;return g?(null===(u=Wl(h))||void 0===u?void 0:u.userId)===i?Promise.resolve(""):y.find(D=>D.userId===i)?(Wc.assignCC(i,!0),Lr({event:C===i?wa:Wp,operations:[Ut(D=>D.userId===i),ki(1)]},D=>!0===D.bCCEditor)):Promise.reject({type:Pr,reason:"Cannot find the user"}):Promise.reject({type:nn,reason:"Cannot assign caption editor due to the manual captioner is not enabled."})}sendCaptionTextManually(i,u){var l;const{[tr]:h,[Vs]:g}=this,y=h(),{liveTranscription:{lastManualCaption:C},meeting:{userId:w}}=y,D=Yn(y);let N=Promise.resolve();const L=null===(l=Wl(y))||void 0===l?void 0:l.userId;return null!=D&&D.isHost&&L!==w&&(N=this.assignManualCaption(w)),N.then(()=>$t(h())?function(V,G,W){const X=V.length,ne=[];var me;if(W)ne.push({op:"close",text:V,msgId:null!==(me=G?.msgId)&&void 0!==me?me:Ov()});else if(G&&null!=G&&G.text){const _e=G.text.length;let Re=0,Ne=0;for(;V[Re]===G.text[Re]&&Re<X;)Ne+=c1(V[Re]),Re+=1;Re===_e&&Re===X?ne.push({op:"same"}):Re===_e&&Re<X?ne.push({op:"insert",text:V.slice(Re),size:0,pos:Ne,msgId:G.msgId}):Re<_e&&Re===X?ne.push({op:"delete",size:0,pos:Ne,msgId:G.msgId}):(ne.push({op:"delete",size:0,pos:Ne,msgId:G.msgId}),ne.push({op:"insert",text:V.slice(Re),pos:Ne,msgId:G.msgId}))}else X>0&&ne.push({op:"start",text:V,pos:0,size:0,msgId:Ov()});return ne.filter(_e=>"same"!==_e.op)}(i,C,u):Promise.reject({type:Gi,reason:"Cannot type caption "})).then(V=>Array.isArray(V)?(V.forEach(G=>{const{text:W,...X}=G;Ia.beginEncrypt({text:W??"",type:Ga.CC_MESSAGE}).then(ne=>{Wc.sendManualCaption({text:ne,...X}),g($R(u?void 0:{text:W,msgId:G.msgId}))})}),Lr(dc,G=>G.source===Ad.InMeetingManual)):"")}getLiveTranscriptionStatus(){const{[tr]:i}=this,{liveTranscription:{isLiveTranscriptionEnabled:u,isEnableTranslatedCaptions:l,isManualCaptionerEnabled:h,transcriptionLang:g,translatedSetting:y,isHostDisableCaptions:C}}=i();return{isLiveTranscriptionEnabled:u,isLiveTranslationEnabled:l,isHostDisableCaptions:C,isManualCaptionerEnabled:h,transcriptionLanguage:g.map(w=>w.lang).join(";"),translationLanguage:y?.map(w=>({speakingLanguage:w.lang,translatedToLanguage:w.translatedToLanguage.map(D=>D.lang).join(";")}))}}getLiveTranscriptionSetting(){const{[tr]:i}=this,{meeting:{meetingOptions:u}}=i(),{isEnableManualCaptions:l,isEnableLiveTranscription:h,isEnableClosedCaption:g,isEnableAllowThirdPartyCCToken:y,isEnableViewFullTranscript:C,isEnableSaveCaptions:w}=u||{};return{isEnableManualCaptions:l,isEnableLiveTranscription:h,isEnableClosedCaption:g,isEnableAllowThirdPartyCCToken:y,isEnableViewFullTranscript:C,isEnableSaveCaptions:w}}getCurrentTranscriptionLanguage(){const{[tr]:i}=this,{liveTranscription:{currentTranscriptionLang:u}}=i();return void 0!==u?{code:eT[u],name:mg[u]}:null}getCurrentTranslationLanguage(){const{[tr]:i}=this,{liveTranscription:{currentTranslationLang:u}}=i();return void 0!==u?{code:eT[u],name:mg[u]}:null}getLatestTranscription(){const{[tr]:i}=this,{liveTranscription:{messageRecords:u,isManualCaptionerEnabled:l}}=i(),h=l?Du.DefaultManualInput:Du.NoTranslation,g=u.filter(y=>y.language===h);return g.length?g[g.length-1].text:""}getLatestTranslation(){const{[tr]:i}=this,{liveTranscription:{messageRecords:u,currentTranslationLang:l,isEnableTranslatedCaptions:h}}=i();if(h||void 0!==l){const g=u.filter(y=>y.language===l);return g.length?g[g.length-1].text:""}return""}getFullTranscriptionHistory(){const{[tr]:i}=this,u=i(),{liveTranscription:{messageRecords:l,isRecordsReduced:h}}=u;return h?(g=u,void 0!==window.indexedDB?new Promise(y=>{const C=window.indexedDB.open(Mf,1);C.addEventListener("success",()=>{const w=C.result;if(w.objectStoreNames.contains(Ou)){const D=w.transaction([Ou],"readonly").objectStore(Ou),N=[],L=g.meeting.meetingId,V=D.openCursor();V.onsuccess=()=>{const G=V.result;G?(G.value.mid===L&&N.push(...G.value.records),G.continue()):(y(N),w.close())}}else y("")})}):Promise.resolve("")).then(g=>Array.isArray(g)?g.concat(l):[...l]):[...l];var g}getManualCaptionEditor(){const{[tr]:i}=this,u=i(),{closedCaption:{editorId:l}}=u;let h;if(!l)return{};if(h=Uo(u).find(L=>L.userId===l),!h)return{};const{userId:g,isHost:y,displayName:C,avatar:w,bCoHost:D,zoomID:N}=h;return{userId:g,isHost:y,displayName:C,avatar:w,bCoHost:D,zoomID:N}}getManualCaptionUrl(){const{[tr]:i}=this,{meeting:{meetingOptions:u,ccUrl:l}}=i(),{isEnableManualCaptions:h}=u||{};return h?l:(console.warn("you not enable manual caption"),"")}}).prototype,"startLiveTranscription",[An,Dh],Object.getOwnPropertyDescriptor(Po.prototype,"startLiveTranscription"),Po.prototype),En(Po.prototype,"disableCaptions",[Pa,An,Dh],Object.getOwnPropertyDescriptor(Po.prototype,"disableCaptions"),Po.prototype),En(Po.prototype,"setSpeakingLanguage",[An,Dh],Object.getOwnPropertyDescriptor(Po.prototype,"setSpeakingLanguage"),Po.prototype),En(Po.prototype,"setTranslationLanguage",[An,Dh],Object.getOwnPropertyDescriptor(Po.prototype,"setTranslationLanguage"),Po.prototype),En(Po.prototype,"enableManualCaptioner",[Pa,An,Dh],Object.getOwnPropertyDescriptor(Po.prototype,"enableManualCaptioner"),Po.prototype),En(Po.prototype,"disableManualCaptioner",[Pa,An,Dh],Object.getOwnPropertyDescriptor(Po.prototype,"disableManualCaptioner"),Po.prototype),En(Po.prototype,"assignManualCaption",[An,Pa,Dh],Object.getOwnPropertyDescriptor(Po.prototype,"assignManualCaption"),Po.prototype),En(Po.prototype,"sendCaptionTextManually",[An,Dh],Object.getOwnPropertyDescriptor(Po.prototype,"sendCaptionTextManually"),Po.prototype),Po);const Qs=ca({epics0:i=>i.pipe(Wn(`${Ko}`),Bn(u=>{const{payload:{liveTranscription:l}}=u;return b_(l)})),epics1:(i,u)=>Dn(i,uc).pipe(Ut(l=>{var h,g;return void 0!==(null===(h=l.payload.body)||void 0===h?void 0:h.NewLttAvaliable)||void 0!==(null===(g=l.payload.body)||void 0===g?void 0:g.LiveTransEngineType)}),Bn(l=>{const{payload:{body:{NewLttAvaliable:h,LiveTransEngineType:g}}}=l,{liveTranscription:{isEnableAutomatedCaptions:y}}=u.value;return void 0!==h?(Ze(S1,!!h),df(y&&!!h)):MA(g)})),epics2:(i,u)=>Dn(i,7982).pipe(hn(l=>{const{payload:{body:{status:h,gwId:g}}}=l,y=[];switch(h){case Hy.Ready:y.push(Nm(g));break;case Hy.ManualCaptionerEnabled:Ze($u,{autoCaption:!1}),y.push(oh(!0));break;case Hy.ManualCaptionerDisabled:Ze($u,{autoCaption:!0}),y.push(xR({editorId:"",isEditor:!1,editorZoomId:""})),y.push(oh(!1));break;case Hy.UserSub:{Ze($u,{autoCaption:u.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:w}}=u.value;if(null!=w&&w.isLiveTranscriptionSubscribed){var C;gg.enableNewLLT();const D=null!==(C=w.currentTranscriptionLang)&&void 0!==C?C:Du.Unspecified;ji(D),y.push(sh(D)),void 0!==w.currentTranslationLang&&gg.setTranslationLanguage(w.currentTranslationLang),y.push(YR())}break}}return kn(y)})),epics3:i=>Dn(i,7984).pipe(Bn(u=>{const{payload:{body:{langs:l}}}=u;return S_(l)})),epics4:i=>Dn(i,8011).pipe(hn(u=>{const{payload:{body:{disabled:l}}}=u,h=[];return Ze(Pc,l),h.push(vb(l)),l&&h.push(xm(!1)),kn(h)})),epics5:i=>Dn(i,7985).pipe(Ut(u=>{var l;return!0===(null===(l=u.payload.body)||void 0===l?void 0:l.success)}),hn(u=>{const{payload:{body:{src:l,lang:h,success:g}}}=u,y=[];return g&&y.push(xm(!0)),l===Ad.ASR?(y.push(pf(h===Du.NoTranslation?void 0:h)),Ze($u,{autoCaption:!0,lang:h})):[Ad.InMeetingManual,Ad.ExternalCaptioner].includes(l)&&Ze($u,{autoCaption:!1}),kn(y)})),epics6:(i,u)=>Dn(i,7986).pipe(Nn(u),hn(l=>{let[h,g]=l;const y=Yn(g),{liveTranscription:{currentTranscriptionLang:C}}=g,{payload:{body:w}}=h,D=[];if(void 0!==w?.lang){const{lang:N}=w;"computer"===y?.audio&&C!==N&&ji(N),D.push(sh(N))}return kn(D)})),epics7:(i,u)=>Rr(i,Cn.JoinComputerAudioComplete).pipe(Ut(()=>u.value.liveTranscription.isLiveTranscriptionSubscribed),Jn(()=>{const{liveTranscription:{currentTranscriptionLang:l}}=u.value;l&&ji(l)}),Ar(Ue)),epics8:(i,u)=>Dn(i,7983).pipe(Ut(l=>void 0!==l.payload.body),hn(l=>{const{payload:{body:{msgType:h,errorCode:g,language:y,source:C,content:w,keyNodeId:D,msgId:N,nodeId:L,pos:V,size:G,audioLanguage:W}}}=l;if(h===kf.Error){if(g===MS.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:X}}=u.value;X&&Ze(dc,{error:MS.TranslateNotSupport,errorMessage:`${mg[W]} to ${mg[X]} translation is not supported!`,audioLanguage:W,translationLang:X})}}else{const X=u.value,ne=Uo(X),{liveTranscription:{isManualCaptionerEnabled:me}}=X;if(me&&C===Ad.ASR)return Promise.resolve();if(function(_e,Re){const{liveTranscription:{isEnableTranslatedCaptions:Ne,isLiveTranscriptionEnabled:et},meeting:{meetingOptions:ht}}=Re,{isEnableManualCaptions:ze,isEnableAllowHostAssignTypeCC:Qe,isEnableClosedCaption:wt,isEnableAllowThirdPartyCCToken:Xt}=ht;return _e===Ad.ASR?Ne||et:_e===Ad.InMeetingManual?ze&&Qe||void 0===ze&&wt:_e===Ad.ExternalCaptioner?Xt:void 0}(C,X)&&w&&D){const _e=ku(X)[D];if(_e)return Ia.beginDecrypt({decryptedText:w,type:Ga.CC_MESSAGE,zoomId:_e}).then(Re=>{let{message:Ne}=Re;const{liveTranscription:{messageRecords:et}}=u.value,ht=[],ze=et.find(Qe=>Qe.msgId===N);if(ze){const{text:Qe}=ze,wt=((_t,it)=>{if(!_t||0===it)return"";let Ce=0;for(let Ye=0;Ye<_t.length;Ye++)if(Ce+=c1(_t[Ye]),Ce===it)return _t.slice(0,Ye+1);return _t})(Qe,V);let Xt;h===kf.Insert&&0===G||h===kf.Delete&&0===G?Xt={...ze,text:wt+Ne,msgType:h}:h===kf.Close&&(Xt={...ze,text:Ne,msgType:h,done:!0}),Xt&&(ht.push(zR(Xt)),Ze(dc,Xt))}else if([kf.New,kf.Close].includes(h)||me&&h===kf.Insert){const Qe=ne.find(Xt=>Xt.userId===L),wt={msgId:N,userId:L,displayName:Qe?.displayName,avatar:Qe?.avatar,text:Ne,source:C,language:y,timestamp:(new Date).getTime(),done:h===kf.Close};ht.push(Lm({...wt,msgType:h})),Ze(dc,wt)}return ht})}}return Promise.resolve()}),hn(l=>Array.isArray(l)?kn(l):Ue)),epics9:(i,u)=>i.pipe(Wn(`${Lm}`),_o(fo),hn(()=>{const{liveTranscription:{messageRecords:l}}=u.value;return l.length>=1e5?function(h){const{meeting:{meetingId:g},liveTranscription:{messageRecords:y,reducedRecordsCount:C}}=h;return void 0!==window.indexedDB?new Promise(w=>{const D=window.indexedDB.open(Mf,1);D.addEventListener("upgradeneeded",()=>{const N=D.result;if(!N.objectStoreNames.contains(Ou)){const L=N.createObjectStore(Ou,{keyPath:["startIndex","mid"],autoIncrement:!1});L.createIndex("mid","mid",{unique:!1}),L.transaction.oncomplete=()=>{console.log(`Create objectStore [${Ou}] complete`)}}}),D.addEventListener("success",()=>{const N=D.result,L=y.length,V=.9*L,G=L-V,W=y.slice(0,V),X=C+W.length,ne=N.transaction([Ou],"readwrite");ne.objectStore(Ou).put({startIndex:C,mid:g,records:W}),ne.oncomplete=()=>{w(qR({remains:G,reducedRecordsCount:X})),N.close()},ne.onerror=()=>{w(""),N.close()}})}):Promise.resolve("")}(u.value):Promise.resolve("")}),Ut(l=>"object"==typeof l)),epics10:(i,u)=>i.pipe(Wn(`${RE}`,`${Ri}`),Ut(()=>u.value.liveTranscription.isRecordsReduced),Jn(()=>{!function(){if(void 0!==window.indexedDB){const l=window.indexedDB.open(Mf,1);l.addEventListener("success",()=>{const h=l.result;h.objectStoreNames.contains(Ou)&&(window.indexedDB.deleteDatabase(Mf),h.close())})}}()}),Ar(Ue))}),gx={isLiveStreamEnable:!1,status:0},OU=li({[`${Yt}`]:ct((i,u)=>{let{payload:l}=u;i.isLiveStreamEnable=l}),[`${Ui}`]:ct((i,u)=>{let{payload:l}=u;i.status=l}),[`${l2}`]:(i,u)=>{let{payload:l}=u;return l?{...i}:{...gx}}},gx);let Nf=function(i){return i[i.Ended=0]="Ended",i[i.InProgress=1]="InProgress",i[i.Connecting=2]="Connecting",i[i.Timeout=3]="Timeout",i}({});var Pu;const nT=kr.createAgent();let NS=(En((Pu=class extends vh{startLiveStream(i,u,l){const{[tr]:h,[Vs]:g}=this,{liveStream:{isLiveStreamEnable:y,status:C}}=h();return C===Nf.InProgress?Promise.reject({type:nn,reason:"Live stream is already on"}):y?i&&u&&l?(nT.startLiveStream(i,u,l),Lr({event:oA,operations:[Ut(w=>w===Nf.InProgress),ki(1)]},void 0,3e4).then(()=>"").catch(()=>{const{liveStream:{status:w}}=h();return w===Nf.Connecting?(Ze(oA,Nf.Timeout),g(Ui(Nf.Timeout)),Promise.reject({type:Xp})):Promise.resolve("")})):Promise.resolve({type:Pr,reason:"parameter cannot be empty"}):Promise.reject({type:nn,reason:"Live stream is not enabled"})}stopLiveStream(){const{[tr]:i,[Vs]:u}=this,{liveStream:{status:l}}=i();return l===Nf.InProgress&&(nT.stopLiveStream(),Ze(oA,Nf.Ended),u(Ui(Nf.Ended))),Promise.resolve("")}isLiveStreamEnabled(){var i;const{[tr]:u}=this;return!(null===(i=u().liveStream)||void 0===i||!i.isLiveStreamEnable)}getLiveStreamStatus(){var i;const{[tr]:u}=this;return null===(i=u().liveStream)||void 0===i?void 0:i.status}}).prototype,"startLiveStream",[Pa],Object.getOwnPropertyDescriptor(Pu.prototype,"startLiveStream"),Pu.prototype),En(Pu.prototype,"stopLiveStream",[Pa],Object.getOwnPropertyDescriptor(Pu.prototype,"stopLiveStream"),Pu.prototype),Pu);const _x=ca({epics0:i=>i.pipe(Wn(`${Ko}`),Bn(u=>{const{payload:{liveStreamInfo:l}}=u;return Yt(!(null==l||!l.isEnabledLiveStream))})),epics1:i=>Dn(i,7970).pipe(Bn(u=>{const{payload:{body:{status:y}}}=u;return Ze(oA,y),Ui(y)}))});var xf;const La={chat:{epic:Br,reducer:BO,Client:Vi},logger:{epic:FN,reducer:BN,Client:class extends vh{getLogs(i){return ug.getLogs(this[Vo],i)}getStore(){return ug.doNotUseDirtyGetStore()}setLogOptions(i){i&&this[Vo].dispatch(Ab(i))}reportToGlobalTracing(i){return ug.reportToGlobalTracing(i)}reportRating(i,u){const{meeting:l,media:h,socket:g}=this[Vo].getState();if(l){var y,C,w,D,N;const{zlkJwtToken:L,meetingStatus:V}=l,{assetsPath:G,enforceMultipleVideos:W,enforceVirtualBackground:X}=h;ug.report(`rating:${i}, feedback:${u}, appKey:${L?null===(y=u1(L))||void 0===y?void 0:y.app_key:""}, CPU:${navigator.hardwareConcurrency}, GPU:${null!==(C=dr.gpu)&&void 0!==C?C:""}, browser:${dr.browser} ${dr.browserVersion}, OS:${dr.os} ${dr.osVersion}, SharedArrayBuffer:${!!window.crossOriginIsolated}, assetPath:${G}, enforceMultipleVideos:${W}, enforceVirtualBackground:${X}, ${V===Do.Joined?`session duration:${Math.floor((null!==(w=performance.now()-l?.pingRWCTimestamp)&&void 0!==w?w:0)/1e3)}, rwg:${null==g||null===(D=g.rwgServerList)||void 0===D||null===(N=D[g.retryCount])||void 0===N?void 0:N.rwg}, failover count:${l?.failover.count}`:""}`,"User Rating","info"),Number(i)<=2&&this.reportToGlobalTracing()}return Promise.resolve()}}},recording:{epic:vS,reducer:gS,Client:vU},cmd:{epic:Iw,reducer:UN,Client:VN},breakoutRoom:{epic:Zw,reducer:rx,Client:PS},liveTranscription:{epic:Qs,reducer:xa,Client:El},liveStream:{epic:_x,reducer:OU,Client:NS}},xt=kr.createAgent();let Kc=(En((xf=class extends Z4{constructor(i){super(i),this.mediaStream=void 0,this[Iy]=La}getMediaStream(){return void 0===this.mediaStream&&(this.mediaStream=new SU(this[Vo])),this.mediaStream}joinInstant(i,u,l,h,g,y){const{[tr]:C,[Vs]:w}=this,{meeting:{lang:D,meetingStatus:N},socket:{zoomSocketStatus:L}}=C();return u?N!==Do.Joined&&L===qi.Closed?(w(Nv({topic:i,password:g||"",userName:l,zlk:u,lang:D,cv:h})),y&&w(aM(y)),ef(Yo.JoinMeeting)):Promise.reject({type:nn,reason:"duplicated operation"}):Promise.reject({type:nn,reason:"invalid  signature"})}removeUser(i){const u=this[Vo].getState(),{participants:{attendeesList:l}}=u;return l.find(g=>g.userId===i)?(xt.expel(i),Lr(Qn,g=>g.some(y=>y.userId===i))):Promise.reject({type:Pr,reason:"no matched user"})}}).prototype,"removeUser",[Al,An],Object.getOwnPropertyDescriptor(xf.prototype,"removeUser"),xf.prototype),xf);class vx{constructor(u){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=u,this.mic=null,this.script=u.createScriptProcessor(2048,1,1),this.script.onaudioprocess=l=>{const h=l.inputBuffer.getChannelData(0);let g,y=0;for(g=0;g<h.length;++g)y+=h[g]*h[g];this.instant=Math.sqrt(y/h.length)}}connectToSource(u){console.log("InputMicDetector is listening");try{var l;this.mic=this.context.createMediaStreamSource(u),this.mic.connect(this.script),null===(l=this.script)||void 0===l||l.connect(this.context.destination)}catch(h){console.error(h)}}stop(){var u,l;console.log("Audio Previewer stopped"),null===(u=this.mic)||void 0===u||u.disconnect(),this.mic=null,null===(l=this.script)||void 0===l||l.disconnect(),this.script=null}getMicVolume(){return this.instant}}const xS="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class Wr{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(u){var l;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:h,sampleAudioUrl:g=xS,onAnalyseFrequency:y}=u||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),((null===(l=this.sampleAudio)||void 0===l?void 0:l.url)===g&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(g).then(w=>w.arrayBuffer()).then(w=>this.audioCtx.decodeAudioData(w)).then(w=>(this.sampleAudio={url:g,data:w},w))).then(w=>{var D,N,L;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=w,this.sourceNode.loop=!0,h&&null!==(D=this.audioPlayer)&&void 0!==D&&D.setSinkId&&this.audioPlayer.setSinkId(h),y?"function"==typeof AudioContext.prototype.createAnalyser?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=y,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),"running"!==(null===(N=this.audioCtx)||void 0===N?void 0:N.state)&&(null===(L=this.audioCtx)||void 0===L||L.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())});const C=()=>{this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0)};return{stop:C,destroy:()=>{var w;C(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(w=this.audioCtx)||void 0===w||w.close(),this.audioCtx=void 0}}}testMicrophone(u){var l;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||"function"!=typeof AudioContext.prototype.createMediaStreamSource||"function"!=typeof(null===(l=navigator.mediaDevices)||void 0===l?void 0:l.getUserMedia))return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:h,speakerId:g,recordAndPlay:y,maxRecordDuration:C,onAnalyseFrequency:w,onStartRecording:D,onStopRecording:N,onStartPlayRecording:L,onStopPlayRecording:V}=u||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const G=()=>{y&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!h||{deviceId:h}}).then(X=>{var ne,me,_e,Re;this.mAudioStream=X,this.mSourceNode=null===(ne=this.audioCtx)||void 0===ne?void 0:ne.createMediaStreamSource(X),this.audioPlayer.muted=!0,w?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=w,this.initAnalyserNode(),this.analyserNode&&(null===(_e=this.mSourceNode)||void 0===_e||_e.connect(this.analyserNode))):this.analyserCallback=void 0,y&&("function"==typeof MediaRecorder?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=Ne=>{Ne.data&&this.recorderChunks.push(Ne.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),N?.(),this.recorderChunks.length>0){var Ne;const et=new Blob(this.recorderChunks,{type:(null===(Ne=this.recorderChunks[0])||void 0===Ne?void 0:Ne.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(et),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,g,L,V).catch(ht=>{this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),console.warn(ht)}),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,D?.(),this.maximumRecordingTimer=window.setTimeout(()=>{G()},C||1e4)):console.warn("Cannot record the sound due to the browser capability")),"running"!==(null===(me=this.audioCtx)||void 0===me?void 0:me.state)&&(null===(Re=this.audioCtx)||void 0===Re||Re.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())});const W=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(w&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach(X=>{X.stop()}),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:W,stopRecording:G,destroy:()=>{var X;W(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(X=this.audioCtx)||void 0===X||X.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024),this.analyserNodeBufferDataArray=new Uint8Array(this.analyserNode.frequencyBinCount),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let u=0;for(const h of this.analyserNodeBufferDataArray)u+=h;this.analyserCallback(u/this.analyserNodeBufferDataArray.length)}}playRecording(u,l,h,g){this.recorderPlayer=new Audio,this.recorderPlayer.src=u,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&l&&this.recorderPlayer.setSinkId(l);const y=()=>{g?.(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};return new Promise((C,w)=>{this.recorderPlayer&&(this.recorderPlayer.onpause=()=>{C(!0)},this.recorderPlayer.onended=()=>{C(!0)},this.recorderPlayer.onerror=w,h?.(),this.recorderPlayer.play().catch(w))}).finally(()=>{window.URL.revokeObjectURL(u),y()})}}const Kl="AudioNotStartedError";class Sk{constructor(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=u,this.tester=new Wr}start(){var u=this;return F(function*(){if(u.audioStream||u.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const l=yield navigator.mediaDevices.getUserMedia(u.getAudioConstraints());u.audioStream=l,u.isAudioStarted=!0}catch(l){throw l}})()}unmute(){var u=this;return F(function*(){if(!u.audioStream||!u.isAudioStarted)throw new Error(Kl);if(u.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return u.toggleMicIsMuted(!0)})()}mute(){var u=this;return F(function*(){if(!u.audioStream||!u.isAudioStarted)throw new Error(Kl);if(!u.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return u.toggleMicIsMuted(!1)})()}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}stop(){var u=this;return F(function*(){if(!u.audioStream||!u.isAudioStarted)throw new Error(Kl);u.audioStream.getAudioTracks().forEach(l=>l.stop()),u.audioStream=null,u.isAudioStarted=!1})()}toggleMicIsMuted(u){var l=this;return F(function*(){if(u){if(!l.audioContext){const h=window.AudioContext||window.webkitAudioContext;l.audioContext=new h}l.inputMicDetector=new vx(l.audioContext),l.inputMicDetector.connectToSource(l.audioStream)}else l.inputMicDetector&&l.inputMicDetector.stop(),l.inputMicDetector=null;l.isMicUnmuted=u})()}getAudioConstraints(){return{audio:""===this.deviceId||{deviceId:this.deviceId},video:!1}}testSpeaker(u){return this.tester.testSpeaker(u)}testMicrophone(u){return this.tester.testMicrophone(u)}}const rj={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class LS{constructor(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.localPreview=void 0,this.vbPreviewInProgress=void 0,this.videoParams=void 0,this.isVideoStarted=!1,this.videoStream=null,this.vbPreviewInProgress=!1,this.deviceId=u,this.localPreview=new cw}start(u,l){var h=this;return F(function*(){if(!u)throw new Error("Video DOM element is falsy");if(h.isVideoStarted||h.videoStream)throw new Error("VideoAlreadyStartedError");h.videoParams={videoDOMElement:u,virtualBackground:l};const g=function(){var y=F(function*(C){if(!C||"OverconstrainedError"!==C.name&&"ConstraintNotSatisfiedError"!==C.name)throw C;console.log(`Warning: detected ${C.name} -- trying to fall back to lower aspect ratio`);try{const w=yield navigator.mediaDevices.getUserMedia(h.getVideoConstraints(!0));return h.tryPlayVideo(u,w)}catch(w){throw w}});return function(w){return y.apply(this,arguments)}}();if(u instanceof HTMLVideoElement)try{const y=yield navigator.mediaDevices.getUserMedia(h.getVideoConstraints());return h.tryPlayVideo(u,y)}catch(y){return g(y)}else{if(!(u instanceof HTMLCanvasElement&&null!=l&&l.imageUrl))throw new Error("Cannot start video with virtual background");h.localPreview.setup().then(()=>h.localPreview.startPreview(u,{...l,deviceId:h.deviceId})).then(()=>{h.vbPreviewInProgress=!0})}})()}stop(){var u=this;return F(function*(){if(u.vbPreviewInProgress)yield u.localPreview.stopPreview(),u.vbPreviewInProgress=!1;else{if(!u.videoStream||!u.isVideoStarted)throw new Error("VideoNotStartedError");u.videoStream.getVideoTracks().forEach(l=>l.stop()),u.videoStream=null,u.isVideoStarted=!1}})()}switchCamera(u){var l=this;return F(function*(){u!==l.deviceId&&(l.deviceId=u,yield l.stop(),l.videoParams&&(yield l.start(l.videoParams.videoDOMElement,l.videoParams.virtualBackground)))})()}updateVirtualBackground(u,l){var h=this;return F(function*(){h.vbPreviewInProgress&&(yield h.localPreview.updatePreview(u,l))})()}getVideoConstraints(){let u=rj;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?u=""===this.deviceId||{deviceId:this.deviceId}:""!==this.deviceId&&(u.deviceId=this.deviceId),{audio:!1,video:u}}tryPlayVideo(u,l){var h=this;return F(function*(){if(!u)throw new Error("Video DOM element is falsy");try{h.videoStream=l,u.srcObject=h.videoStream,yield u.play(),h.isVideoStarted=!0}catch(g){throw g}})()}}class bl{static createClient(){if(!this.meetingClient){const u=function(){const l=function(w){void 0===w&&(w={});var D,N=new tt.constructor(tt.schedulerActionCtor),L=new Vr,V=function(G){D=G;var W=new Vr,X=new Vr,ne=W.asObservable().pipe(_o(N)),me=new P4(X.pipe(_o(N)),D.getState());return L.pipe(Bn(function(_e){var Re=_e(ne,me,w.dependencies);if(!Re)throw new TypeError('Your root Epic "'+(_e.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return Re}),hn(function(_e){return kn(_e).pipe(p0(N),_o(N))})).subscribe(D.dispatch),function(_e){return function(Re){var Ne=_e(Re);return X.next(D.getState()),W.next(Re),Ne}}};return V.run=function(G){L.next(G)},V}(),{epicSubject:h,rootEpic:g}=function(){const w=new ra(s1(WD,ly,z4,bN));return{epicSubject:w,rootEpic:(D,N,L)=>w.pipe(hn(V=>V(D,N,L)))}}(),y=[l],C=kB(PO(),aU(function(){for(var w=arguments.length,D=new Array(w),N=0;N<w;N++)D[N]=arguments[N];return function(L){return function(){var V=L.apply(void 0,arguments),G=function(){throw new Error(Dc(15))},W={getState:V.getState,dispatch:function(){return G.apply(void 0,arguments)}},X=D.map(function(ne){return ne(W)});return G=Ti.apply(void 0,X)(V.dispatch),Zi(Zi({},V),{},{dispatch:G})}}}(...y)));return C.asyncReducers={},C.injectReducer=(w,D)=>{void 0===C.asyncReducers[w]&&(C.asyncReducers[w]=D,C.replaceReducer(PO(C.asyncReducers)))},C.injectEpic=w=>{h.next(w)},l.run(g),C}();this.meetingClient=new Kc(u)}return this.meetingClient}static destroyClient(){this.meetingClient&&(this.meetingClient.leave().then(()=>{sa(500).subscribe(()=>{tR()})}),this.meetingClient=null)}static checkFeatureRequirements(){return function(){const u=[],l=[],{isAndroidOrIOSBrowser:h,browser:g,browserVersion:y,os:C,osVersion:w,isChrome:D,isFirefox:N}=dr;!h&&(D||N)&&PE()?u.push("Virtual Background"):l.push("Virtual Background"),(h||D)&&PE()?(u.push("720p Video (send)"),u.push("Share Chrome Tab Audio")):(l.push("720p Video (send)"),l.push("Share Chrome Tab Audio")),(h||D||N)&&PE()?u.push("Render Multiple Videos"):l.push("Render Multiple Videos"),!h&&PE()?(u.push("Screen Share (send)"),u.push("720p Video (receive)"),u.push("Share 2nd Camera")):(l.push("Screen Share (send)"),l.push("720p Video (receive)"),l.push("Share 2nd Camera")),PE()?(u.push("Audio"),u.push("Video"),u.push("Screen Share (receive)"),u.push("Chat"),u.push("Closed Captioning"),u.push("Live Transcription"),u.push("Live Translation"),u.push("Cloud Recording"),u.push("Call Out (PSTN)"),u.push("Command Channel"),u.push("RTMP Live Streaming"),u.push("Encryption")):(l.push("Audio"),l.push("Video"),l.push("Screen Share (receive)"),l.push("Chat"),l.push("Closed Captioning"),l.push("Live Transcription"),l.push("Live Translation"),l.push("Cloud Recording"),l.push("Call Out (PSTN)"),l.push("Command Channel"),l.push("RTMP Live Streaming"),l.push("Encryption"));const L=h?`${C}${w}`:`${g}${y}`;return l.length>0&&console.log("Some features are not supported on your platform, please refer to https://developers.zoom.us/docs/video-sdk/web/browser-support/"),{platform:L,supportFeatures:u,unSupportFeatures:l}}()}static checkSystemRequirements(){return lU()}static getDevices(u){return u?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(l=>(l.getTracks().forEach(h=>h.stop()),navigator.mediaDevices.enumerateDevices()))}static createLocalAudioTrack(){return new Sk(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static createLocalVideoTrack(){return new LS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static preloadDependentAssets(u){var l;(l=F(function*(h){var g;const y=h||Bm,C=`${y}/${Ws}`,w=[],D=[],N=`${y}/`;if(ff()){const{workers:G,wasms:W}=D_("audio","simd",N);w.push(...G),D.push(...W)}else{const{workers:G,wasms:W}=D_("audio","",N);w.push(...G),D.push(...W)}if(ff()&&FA()){const{workers:G,wasms:W}=D_(["video","sharing"],"simd,thread",N);w.push(...G),D.push(...W)}else if(FA()){const{workers:G,wasms:W}=D_(["video","sharing"],"thread",N);w.push(...G),D.push(...W)}else if(ff()){const{workers:G,wasms:W}=D_(["video","sharing"],"simd",N);w.push(...G),D.push(...W)}else{const{workers:G,wasms:W}=D_(["video","sharing"],"",N);w.push(...G),D.push(...W)}const L=[rD(C,"script")];w.forEach(G=>{L.push(rD(G,"fetch"))});let V=!1;if(null!==(g=window.indexedDB)&&void 0!==g&&g.databases)try{const G=yield window.indexedDB.databases(),W='"audio:897;video:897"'.split(";").map(X=>{const[ne,me]=X.split(":");return{[`${ne}`]:Number(me)}}).reduce((X,ne)=>({...X,...ne}),{});W&&(V=["AUDIO_FILE","VIDEO_FILE"].every(X=>{const ne="AUDIO_FILE"===X?W.audio:W.video;return-1!==G.findIndex(me=>me.name===X&&me.version===ne)}))}catch{}V||D.forEach(G=>{L.push(rD(G,"fetch"))});try{document.head.append(...L)}catch{}}),function(h){return l.apply(this,arguments)})(u)}}bl.meetingClient=void 0,bl.VERSION=Cb;var yd="1.10.0",rT="INVALID_PARAMETERS",kU="https://dmogdx0jrul3u.cloudfront.net/videosdk/".concat(yd,"/lib"),Gy="https://source.zoom.us/videosdk/".concat(yd,"/lib"),Ck="https://jssdk.zoomus.cn/videosdk/".concat(yd,"/lib"),Ax=function(i){return"string"==typeof i&&i.length>0},PU=function(i){var u="";switch(i){case"Global":u=Gy;break;case"CN":u=Ck;break;case"CDN":u=kU;break;default:u=i}return u},MU=["userId","avatar","displayName","isHost","audio","muted","bVideoOn","sharerOn","sharerPause","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","userGuid","isPhoneUser","isInFailover",{from:"isCoHost",to:"isManager"},{from:"bAllowISORecord",to:"isAllowIndividualRecording"},{from:"bVideoConnect",to:"isVideoConnect"},{from:"bShareToBORooms",to:"bShareToSubsession"},{from:"phoneNumber",to:function(i){return void 0===i?{}:{phoneNumber:i}}}],yx=[].concat(MU,[{from:"userGUID",to:"userGuid"},{from:"bCoHost",to:function(i){return{isManager:!!i}}},{from:"userType",to:function(i){return{isPhoneUser:5==(5&i)}}},{from:"bid",to:function(i){return i?{subsessionId:i}:{}}}]),Ex=yx.map(function(i){return"string"==typeof i?i:i.from});function bx(i,u){return"string"==typeof i?U({},"".concat(i),u):"string"==typeof i.to?U({},"".concat(i.to),u):i.to(u)}function BS(i){if(i)return MU.reduce(function(u,l){var g=bx(l,i["string"==typeof l?l:l.from]);return H(H({},u),g)},{})}function iT(i){if(i)return Object.keys(i).reduce(function(u,l){var h=Ex.indexOf(l);if(h>-1){var g=yx[h],C=bx(g,i["string"==typeof g?g:g.from]);return H(H({},u),C)}return u},{})}var FS,Sx,oT,Ed,nv,rv,Wy,Lf,dn=Symbol("stream"),Cx=function(){function i(u){M(this,i),this[dn]=void 0,this[dn]=u}return x(i,[{key:"startAudio",value:function(u){return this[dn].startAudio(u)}},{key:"stopAudio",value:function(){return this[dn].stopAudio()}},{key:"muteAudio",value:function(u){return this[dn].muteAudio(u)}},{key:"unmuteAudio",value:function(u){return this[dn].unmuteAudio(u)}},{key:"inviteByPhone",value:function(u,l,h,g){return this[dn].dialOut(u,l,h,g)}},{key:"cancelInviteByPhone",value:function(u,l,h){return this[dn].cancelDialOut(u,l,h)}},{key:"hangup",value:function(){return this[dn].hangup()}},{key:"getCurrentSessionCallinInfo",value:function(){return this[dn].getDialInInfo()}},{key:"muteShareAudio",value:function(u){return this[dn].muteShareAudio(u)}},{key:"unmuteShareAudio",value:function(u){return this[dn].unmuteShareAudio(u)}},{key:"subscribeAudioStatisticData",value:function(u){return this[dn].subscribeAudioStatisticData(u)}},{key:"unsubscribeAudioStatisticData",value:function(u){return this[dn].unsubscribeAudioStatisticData(u)}},{key:"muteUserAudioLocally",value:function(u){return this[dn].muteUserAudioLocally(u)}},{key:"unmuteUserAudioLocally",value:function(u){return this[dn].unmuteUserAudioLocally(u)}},{key:"adjustUserAudioVolumeLocally",value:function(u,l){return this[dn].adjustUserAudioVolumeLocally(u,l)}},{key:"enableBackgroundNoiseSuppression",value:function(u){return this[dn].enableBackgroundNoiseSuppression(u)}},{key:"enableSyncButtonsOnHeadset",value:function(u){return this[dn].enableSyncButtonsOnHeadset(u)}},{key:"muteAllUserAudioLocally",value:function(){return this[dn].muteAllUserAudioLocally()}},{key:"unmuteAllUserAudioLocally",value:function(){return this[dn].unmuteAllUserAudioLocally()}},{key:"isAudioMuted",value:function(u){return this[dn].isAudioMuted(u)}},{key:"getMicList",value:function(){return this[dn].getMicList()}},{key:"getSpeakerList",value:function(){return this[dn].getSpeakerList()}},{key:"getActiveMicrophone",value:function(){return this[dn].getActiveMicrophone()}},{key:"getActiveSpeaker",value:function(){return this[dn].getActiveSpeaker()}},{key:"switchMicrophone",value:function(u){return this[dn].switchMicrophone(u)}},{key:"switchSpeaker",value:function(u){return this[dn].switchSpeaker(u)}},{key:"isSupportPhoneFeature",value:function(){return this[dn].isSupportCallOut()}},{key:"getSupportCountryInfo",value:function(){return this[dn].getDialOutCountries()}},{key:"getInviteByPhoneStatus",value:function(){return this[dn].getDialOutStatus()}},{key:"getShareAudioStatus",value:function(){return this[dn].getShareAudioStatus()}},{key:"isOthersShareAudioMutedLocally",value:function(u){return this[dn].isOthersShareAudioMutedLocally(u)}},{key:"getAudioStatisticData",value:function(){return this[dn].getAudioStatisticData()}},{key:"isUserAudioMutedLocally",value:function(u){return this[dn].isUserAudioMutedLocally(u)}},{key:"getUserVolumeLocally",value:function(u){return this[dn].getUserVolumeLocally(u)}},{key:"isSupportMicrophoneAndShareAudioSimultaneously",value:function(){return this[dn].isSupportMicrophoneAndShareAudioSimultaneously()}},{key:"startVideo",value:function(u){return this[dn].startVideo(u)}},{key:"stopVideo",value:function(){return this[dn].stopVideo()}},{key:"renderVideo",value:function(u,l,h,g,y,C,w,D){return this[dn].renderVideo(u,l,h,g,y,C,w,D)}},{key:"stopRenderVideo",value:function(u,l,h,g){return this[dn].stopRenderVideo(u,l,h,g,arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}},{key:"updateVideoCanvasDimension",value:function(u,l,h){return this[dn].updateVideoCanvasDimension(u,l,h)}},{key:"adjustRenderedVideoPosition",value:function(u,l,h,g,y,C,w){return this[dn].adjustRenderedVideoPosition(u,l,h,g,y,C,w)}},{key:"clearVideoCanvas",value:function(u,l){return this[dn].clearVideoCanvas(u,l)}},{key:"mirrorVideo",value:function(u){return this[dn].mirrorVideo(u)}},{key:"enableHardwareAcceleration",value:function(u){return this[dn].enableHardwareAcceleration(u)}},{key:"previewVirtualBackground",value:function(u,l,h){return this[dn].previewVirtualBackground(u,l,h)}},{key:"updateVirtualBackgroundImage",value:function(u,l){return this[dn].updateVirtualBackgroundImage(u,l)}},{key:"stopPreviewVirtualBackground",value:function(){return this[dn].stopPreviewVirtualBackground()}},{key:"previewVideoMask",value:function(u,l){return this[dn].previewVideoMask(u,l)}},{key:"updateVideoMask",value:function(u){return this[dn].updateVideoMask(u)}},{key:"stopPreviewVideoMask",value:function(){return this[dn].stopPreviewVideoMask()}},{key:"switchCamera",value:function(u){return this[dn].switchCamera(u)}},{key:"subscribeVideoStatisticData",value:function(u){return this[dn].subscribeVideoStatisticData(u)}},{key:"unsubscribeVideoStatisticData",value:function(u){return this[dn].unsubscribeVideoStatisticData(u)}},{key:"isCapturingVideo",value:function(){return this[dn].isCapturingVideo()}},{key:"isCameraTaken",value:function(){return this[dn].isCameraTaken()}},{key:"getActiveVideoId",value:function(){return this[dn].getActiveVideoId()}},{key:"getActiveCamera",value:function(){return this[dn].getActiveCamera()}},{key:"getCameraList",value:function(){return this[dn].getCameraList()}},{key:"isCaptureForbidden",value:function(){return this[dn].isCaptureForbidden()}},{key:"getVideoMaxQuality",value:function(){return this[dn].getVideoMaxQuality()}},{key:"getReceivedVideoDimension",value:function(){return this[dn].getReceivedVideoDimension()}},{key:"isSupportMultipleVideos",value:function(){return this[dn].isSupportMultipleVideos()}},{key:"isSupportHDVideo",value:function(){return this[dn].isSupportHDVideo()}},{key:"isSupportVirtualBackground",value:function(){return this[dn].isSupportVirtualBackground()}},{key:"getVirtualbackgroundStatus",value:function(){return this[dn].getVirtualbackgroundStatus()}},{key:"getVideoStatisticData",value:function(){return this[dn].getVideoStatisticData()}},{key:"isRenderSelfViewWithVideoElement",value:function(){return this[dn].isRenderSelfViewWithVideoElement()}},{key:"getCapturedVideoResolution",value:function(){return this[dn].getCapturedVideoResolution()}},{key:"getVideoMaskStatus",value:function(){return this[dn].getVideoMaskStatus()}},{key:"startShareView",value:function(u,l){return this[dn].startShareView(u,l)}},{key:"stopShareView",value:function(){return this[dn].stopShareView()}},{key:"switchShareView",value:function(u){return this[dn].switchShareView(u)}},{key:"startShareScreen",value:function(u,l){return void 0!==l?.broadcastToSubsession&&Object.assign(l||{},{broadcastToBreakoutRoom:l?.broadcastToSubsession}),this[dn].startShareScreen(u,l)}},{key:"pauseShareScreen",value:function(){return this[dn].pauseShareScreen()}},{key:"resumeShareScreen",value:function(){return this[dn].resumeShareScreen()}},{key:"stopShareScreen",value:function(){return this[dn].stopShareScreen()}},{key:"lockShare",value:function(u){return this[dn].lockShare(u)}},{key:"updateSharingCanvasDimension",value:function(u,l){return this[dn].updateSharingCanvasDimension(u,l)}},{key:"switchSharingSecondaryCamera",value:function(u){return this[dn].switchSharingSecondaryCamera(u)}},{key:"setSharePrivilege",value:function(u){return this[dn].setSharePrivilege(u)}},{key:"shareToSubsession",value:function(){return this[dn].shareToBreakoutRoom()}},{key:"stopShareToSubsession",value:function(){return this[dn].stopShareToBreakoutRoom()}},{key:"enableOptimizeForSharedVideo",value:function(u){return this[dn].enableOptimizeForSharedVideo(u)}},{key:"updateSharedVideoQuality",value:function(u){return this[dn].updateSharedVideoQuality(u)}},{key:"subscribeShareStatisticData",value:function(u){return this[dn].subscribeShareStatisticData(u)}},{key:"unsubscribeShareStatisticData",value:function(u){return this[dn].unsubscribeShareStatisticData(u)}},{key:"isShareLocked",value:function(){return this[dn].isShareLocked()}},{key:"getSharePrivilege",value:function(){return this[dn].getSharePrivilege()}},{key:"getActiveShareUserId",value:function(){return this[dn].getActiveShareUserId()}},{key:"getShareStatus",value:function(){return this[dn].getShareStatus()}},{key:"getShareUserList",value:function(){return this[dn].getShareUserList().map(function(u){return BS(u)})}},{key:"isStartShareScreenWithVideoElement",value:function(){return this[dn].isStartShareScreenWithVideoElement()}},{key:"isOptimizeForSharedVideoEnabled",value:function(){return this[dn].isOptimizeForSharedVideoEnabled()}},{key:"isSupportOptimizedForSharedVideo",value:function(){return this[dn].isSupportOptimizedForSharedVideo()}},{key:"getShareStatisticData",value:function(){return this[dn].getShareStatisticData()}},{key:"requestFarEndCameraControl",value:function(u){return this[dn].requestFarEndCameraControl(u)}},{key:"approveFarEndCameraControl",value:function(u){return this[dn].approveFarEndCameraControl(u)}},{key:"declineFarEndCameraControl",value:function(u){return this[dn].declineFarEndCameraControl(u)}},{key:"giveUpFarEndCameraControl",value:function(u){return this[dn].giveUpFarEndCameraControl(u)}},{key:"controlCamera",value:function(u){return this[dn].controlCamera(u)}},{key:"controlFarEndCamera",value:function(u){return this[dn].controlFarEndCamera(u)}},{key:"getFarEndCameraPTZCapability",value:function(u){return this[dn].getFarEndCameraPTZCapability(u)}},{key:"getCameraPTZCapability",value:function(u){return this[dn].getCameraPTZCapability(u)}},{key:"isBrowserSupportPTZ",value:function(){return this[dn].isBrowserSupportPTZ()}},{key:"getNetworkQuality",value:function(u){return this[dn].getNetworkQuality(u)}},{key:"requestRemoteControl",value:function(){return this[dn].requestRemoteControl()}},{key:"giveUpRemoteControl",value:function(){return this[dn].giveUpRemoteControl()}},{key:"startRemoteControl",value:function(u){return this[dn].startRemoteControl(u)}},{key:"grabRemotoControl",value:function(){return this[dn].grabRemotoControl()}},{key:"approveRemoteControl",value:function(u){return this[dn].approveRemoteControl(u)}},{key:"declineRemoteControl",value:function(u){return this[dn].declineRemoteControl(u)}},{key:"stopRemoteControl",value:function(){return this[dn].stopRemoteControl()}},{key:"launchRemoteControlApp",value:function(u){return this[dn].launchRemoteControlApp(u)}},{key:"isRemotelyControlApproved",value:function(){return this[dn].isRemotelyControlApproved()}},{key:"isControllingUserRemotely",value:function(){return this[dn].isControllingUserRemotely()}},{key:"isTargetShareSupportRemoteControl",value:function(u){return this[dn].isTargetShareSupportRemoteControl(u)}},{key:"getRemoteControlAppDownloadUrl",value:function(){return this[dn].getRemoteControlAppDownloadUrl()}},{key:"getRemotelyControllingUser",value:function(){return this[dn].getRemotelyControllingUser()}},{key:"isRemoteControlEnabled",value:function(){return this[dn].isRemoteControlEnabled()}}]),i}(),Ix=["isCoHost"],Ap=Symbol("chat"),NU=function(){function i(u){M(this,i),this[Ap]=void 0,this[Ap]=u}return x(i,[{key:"send",value:function(u,l){return this[Ap].send(u,l)}},{key:"sendToAll",value:function(u){return this[Ap].send(u,Hi.All)}},{key:"sendFile",value:function(u,l){return this[Ap].sendFile(u,l)}},{key:"downloadFile",value:function(u,l,h){return this[Ap].downloadFile(u,l,h)}},{key:"setPrivilege",value:function(u){return this[Ap].setPrivilege(u)}},{key:"getPrivilege",value:function(){return this[Ap].getPrivilege()}},{key:"getReceivers",value:function(){return this[Ap].getReceivers().map(function(u){return H({isManager:u.isCoHost},Z(u,Ix))})}},{key:"getHistory",value:function(){return this[Ap].getHistory()}},{key:"isFileTransferEnabled",value:function(){return this[Ap].isFileTransferEnabled()}},{key:"getFileTransferSetting",value:function(){return this[Ap].getFileTransferSetting()}}]),i}(),yp=Symbol("recording"),Ik=function(){function i(u){M(this,i),this[yp]=void 0,this[yp]=u}return x(i,[{key:"canStartRecording",value:function(){return this[yp].isRecordingEnabled()}},{key:"startCloudRecording",value:function(){return this[yp].startRecording()}},{key:"pauseCloudRecording",value:function(){return this[yp].pauseRecording()}},{key:"resumeCloudRecording",value:function(){return this[yp].startRecording()}},{key:"stopCloudRecording",value:function(){return this[yp].stopRecording()}},{key:"getCloudRecordingStatus",value:function(){return this[yp].getRecordingStatus()}},{key:"acceptIndividualRecording",value:function(){return this[yp].accept()}},{key:"declineIndividualRecording",value:function(){return this[yp].decline()}}]),i}(),wk=Symbol("command"),wx=function(){function i(u){M(this,i),this[wk]=void 0,this[wk]=u}return x(i,[{key:"send",value:function(u,l){return this[wk].send(u,l)}}]),i}(),Tx=["isInRoom"],xU=["isAutoJoinRoom"],Ba=Symbol("breakout-room"),sT=function(){function i(u){M(this,i),this[Ba]=void 0,this[Ba]=u}return x(i,[{key:"createSubsessions",value:function(u,l){return this[Ba].createRooms(u,l).then(function(h){return h.map(function(g){return{subsessionId:g.roomId,subsessionName:g.name,userList:g.attendeeList}})})}},{key:"openSubsessions",value:function(u,l){var h=l?H(H({},l),{},{isAutoJoinRoom:l.isAutoJoinSubsession}):void 0,g=u.map(function(y){return{roomId:y.subsessionId,name:y.subsessionName,attendeeList:y.userList}});return this[Ba].openRooms(g,h)}},{key:"joinSubsession",value:function(u){return this[Ba].joinRoom(u)}},{key:"leaveSubsession",value:function(){return this[Ba].leaveRoom()}},{key:"askForHelp",value:function(){return this[Ba].askForHelp()}},{key:"postponeHelping",value:function(u){return this[Ba].postponeHelping(u)}},{key:"broadcast",value:function(u){return this[Ba].broadcast(u)}},{key:"assignUserToSubsession",value:function(u,l){return this[Ba].assignUserToRoom(u,l)}},{key:"moveUserToSubsession",value:function(u,l){return this[Ba].moveUserToRoom(u,l)}},{key:"closeAllSubsessions",value:function(){return this[Ba].closeRoom()}},{key:"getUnassignedUserList",value:function(){return this[Ba].getUnassignedAttendeeList().map(function(u){return BS(u)})}},{key:"getSubsessionList",value:function(){return this[Ba].getRoomList().map(function(u){return{subsessionId:u.roomId,subsessionName:u.name,userList:u.attendeeList.map(function(l){return H({isInSubsession:l.isInRoom},Z(l,Tx))})}})}},{key:"getUserStatus",value:function(){return this[Ba].getAttendeeStatus()}},{key:"getSubsessionStatus",value:function(){return this[Ba].getRoomStatus()}},{key:"getCurrentSubsession",value:function(){var u=this[Ba].getCurrentRoom();return{userStatus:u.attendeeStatus,subsessionName:u.name,subsessionId:u.roomId}}},{key:"getSubsessionOptions",value:function(){var u=this[Ba].getRoomOptions();return H({isAutoJoinSubsession:u.isAutoJoinRoom},Z(u,xU))}}]),i}(),Aa=Symbol("liveTranscription"),Tk=function(){function i(u){M(this,i),this[Aa]=void 0,this[Aa]=u}return x(i,[{key:"startLiveTranscription",value:function(){return this[Aa].startLiveTranscription()}},{key:"setSpeakingLanguage",value:function(u){return this[Aa].setSpeakingLanguage(u)}},{key:"setTranslationLanguage",value:function(u){return this[Aa].setTranslationLanguage(u)}},{key:"getLiveTranscriptionStatus",value:function(){return this[Aa].getLiveTranscriptionStatus()}},{key:"getCurrentTranscriptionLanguage",value:function(){return this[Aa].getCurrentTranscriptionLanguage()}},{key:"getCurrentTranslationLanguage",value:function(){return this[Aa].getCurrentTranslationLanguage()}},{key:"getLatestTranscription",value:function(){return this[Aa].getLatestTranscription()}},{key:"getLatestTranslation",value:function(){return this[Aa].getLatestTranslation()}},{key:"getFullTranscriptionHistory",value:function(){return this[Aa].getFullTranscriptionHistory()}},{key:"disableCaptions",value:function(u){return this[Aa].disableCaptions(u)}}]),i}(),iv=Symbol("liveStream"),ov=function(){function i(u){M(this,i),this[iv]=void 0,this[iv]=u}return x(i,[{key:"startLiveStream",value:function(u,l,h){return this[iv].startLiveStream(u,l,h)}},{key:"stopLiveStream",value:function(){return this[iv].stopLiveStream()}},{key:"isLiveStreamEnabled",value:function(){return this[iv].isLiveStreamEnabled()}},{key:"getLiveStreamStatus",value:function(){return this[iv].getLiveStreamStatus()}}]),i}(),zl=Symbol("logger"),LU=function(){function i(u,l){M(this,i),this[zl]=void 0,this[zl]=u,l&&this[zl].setLogOptions({debugMode:l.debugMode,trackingId:l.trackingId})}return x(i,[{key:"reportToGlobalTracing",value:function(u){return this[zl].reportToGlobalTracing(u)}},{key:"reportRating",value:function(u,l){return this[zl].reportRating(u,l)}}]),i}(),Rk=["roomName"],Rx=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:function(i){var u=i.roomName,l=Z(i,Rk);return u?H(H({},l),{},{subsessionName:u}):i}},{event:"user-added",originalEvent:"user-added",payloadTransform:function(i){return i.map(function(u){return iT(u)})}},{event:"user-updated",originalEvent:"user-updated",payloadTransform:function(i){return i.map(function(u){return iT(u)})}},{event:"user-removed",originalEvent:"user-removed",payloadTransform:function(i){return i.map(function(u){return iT(u)})}},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:function(i){return{subsessionId:i.roomId,subsessionName:i.name}}},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:function(i){return{userId:i.userId,userGuid:i.userGuid,displayName:i.displayName,subsessionId:i.roomId,subsessionName:i.roomName}}},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"}],to=Symbol("Client"),aT=new WeakMap,Ky=function(){function i(){M(this,i),this[to]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this.logger=void 0,this.liveStream=void 0,this[to]=bl.createClient(),aT.set(this,new Map)}return x(i,[{key:"init",value:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",l=arguments.length>2?arguments[2]:void 0,h=PU(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global");return!1===window.isSecureContext&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),function(){var g="__ZOOM_VIDEO_SDK_DOM_STORAGE_TEST__";try{return localStorage.setItem(g,g),localStorage.removeItem(g),sessionStorage.setItem(g,g),sessionStorage.removeItem(g),!0}catch{return!1}}()||console.warn("localstorage or sessionstorage is not enabled, please enable to use the video sdk,"),this[to].init("","",{language:u,dependentAssets:h,constraints:H(H({},bl.checkSystemRequirements()),{},{screen:"object"===(typeof WebAssembly>"u"?"undefined":j(WebAssembly))&&"function"==typeof Worker}),additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription","logger","liveStream"],webEndpoint:l?.webEndpoint||"zoom.us",skipJsMedia:l?.skipJsMedia,enforceMultipleVideos:l?.enforceMultipleVideos,stayAwake:l?.stayAwake,enforceVirtualBackground:l?.enforceVirtualBackground,quicklyLeaveMeeting:l?.leaveOnPageUnload,patchJsMedia:l?.patchJsMedia})}},{key:"join",value:function(u,l,h,g,y){return Ax(u)&&Ax(l)&&Ax(h)?u.length>200?Promise.reject({type:rT,reason:"The maximum length of topic is 200"}):h.length>200?Promise.reject({type:rT,reason:"The maximum length of username is 200"}):g&&("string"!=typeof g||g.length>10)?Promise.reject({type:rT,reason:"The maximum length of password is 10"}):this[to].joinInstant(u,l,h,yd,g,y):Promise.reject({type:rT,reason:"Topic, token and userName must be string and required"})}},{key:"leave",value:function(){var u;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(null===(u=aT.get(this))||void 0===u||u.clear(),this[to].end()):this[to].leave()}},{key:"on",value:function(u,l){var h=Rx.find(function(N){return N.event===u});if(h){var g=h.originalEvent,y=h.payloadTransform;if(y){var C=function(N){var L=y(N);l(L)};this[to].on(g,C);var w=aT.get(this);w&&(w.has(u)||w.set(u,[]),w.get(u)?.push({originalCb:l,newCb:C}))}else this[to].on(g,l)}else this[to].on(u,l)}},{key:"off",value:function(u,l){var h=Rx.find(function(N){return N.event===u});if(h){var g=h.originalEvent;if(h.payloadTransform){var y=aT.get(this);if(y){var C=y.get(u),w=C?.find(function(N){return N.originalCb===l});if(w&&C){this[to].off(g,w.newCb);var D=C?.filter(function(N){return N.originalCb!==l});y.set(u,D)}}}else this[to].off(g,l)}else this[to].off(u,l)}},{key:"getMediaStream",value:function(){return this.stream||(this.stream=new Cx(this[to].getMediaStream())),this.stream}},{key:"getChatClient",value:function(){return this.chat||(this.chat=new NU(this[to].getFeatureModule("chat"))),this.chat}},{key:"getRecordingClient",value:function(){return this.recording||(this.recording=new Ik(this[to].getFeatureModule("recording"))),this.recording}},{key:"getCommandClient",value:function(){return this.command||(this.command=new wx(this[to].getFeatureModule("cmd"))),this.command}},{key:"getSubsessionClient",value:function(){return this.subsession||(this.subsession=new sT(this[to].getFeatureModule("breakoutRoom"))),this.subsession}},{key:"getLiveTranscriptionClient",value:function(){return this.liveTranscription||(this.liveTranscription=new Tk(this[to].getFeatureModule("liveTranscription"))),this.liveTranscription}},{key:"getLoggerClient",value:function(u){return this.logger||(this.logger=new LU(this[to].getFeatureModule("logger"),u)),this.logger}},{key:"getLiveStreamClient",value:function(){return this.liveStream||(this.liveStream=new ov(this[to].getFeatureModule("liveStream"))),this.liveStream}},{key:"getSessionInfo",value:function(){var u=this[to].getMeetingInfo();return{isInMeeting:u.isInMeeting||!1,password:u.password||"",topic:u.topic,userName:u.userName,userId:u.userId,sessionId:u.meetingId}}},{key:"getCurrentUserInfo",value:function(){return BS(this[to].getCurrentUserInfo())}},{key:"getUser",value:function(u){return BS(this[to].getParticipantsList().find(function(l){return l.userId===u}))}},{key:"getAllUser",value:function(){return this[to].getParticipantsList().map(function(u){return BS(u)})}},{key:"changeName",value:function(u,l){return this[to].changeName(u,l)}},{key:"makeHost",value:function(u){return this[to].makeHost(u)}},{key:"removeUser",value:function(u){return this[to].removeUser(u)}},{key:"makeManager",value:function(u){return this[to].makeCoHost(u)}},{key:"revokeManager",value:function(u){return this[to].revokeCoHost(u)}},{key:"reclaimHost",value:function(){return this[to].reclaimHost()}},{key:"isHost",value:function(){return this[to].isHost()}},{key:"isOriginalHost",value:function(){return this[to].isOriginHost()}},{key:"getSessionHost",value:function(){return BS(this[to].getMeetingHost())}},{key:"isManager",value:function(){return this[to].isCoHost()}}]),i}(),US=function(){function i(){M(this,i)}return x(i,null,[{key:"createClient",value:function(){return this.videoClient||(this.videoClient=new Ky),this.videoClient}},{key:"destroyClient",value:function(){this.videoClient&&(this.videoClient.leave(),this.videoClient=null)}},{key:"checkSystemRequirements",value:function(){return bl.checkSystemRequirements()}},{key:"checkFeatureRequirements",value:function(){return bl.checkFeatureRequirements()}},{key:"getDevices",value:function(u){return bl.getDevices(u)}},{key:"createLocalAudioTrack",value:function(){return bl.createLocalAudioTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"createLocalVideoTrack",value:function(){return bl.createLocalVideoTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"preloadDependentAssets",value:function(){bl.preloadDependentAssets(PU(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global"))}}]),i}();US.videoClient=void 0,US.VERSION=yd,re.ChatPrivilege=void 0,(FS=re.ChatPrivilege||(re.ChatPrivilege={}))[FS.All=1]="All",FS[FS.NoOne=4]="NoOne",FS[FS.EveryonePublicly=5]="EveryonePublicly",re.ChatMsgType=void 0,(Sx=re.ChatMsgType||(re.ChatMsgType={}))[Sx.All=0]="All",re.SubsessionAllocationPattern=void 0,(oT=re.SubsessionAllocationPattern||(re.SubsessionAllocationPattern={}))[oT.Automatically=tp.Automatically]="Automatically",oT[oT.Manually=tp.Manually]="Manually",re.SubsessionUserStatus=void 0,(Ed=re.SubsessionUserStatus||(re.SubsessionUserStatus={}))[Ed.Initial=fr.Initial]="Initial",Ed[Ed.Invited=fr.Invited]="Invited",Ed[Ed.Joining=fr.Joining]="Joining",Ed[Ed.InSubsession=fr.InRoom]="InSubsession",Ed[Ed.Leaving=fr.Leaving]="Leaving",Ed[Ed.MainSession=fr.MainSession]="MainSession",re.SubsessionStatus=void 0,(nv=re.SubsessionStatus||(re.SubsessionStatus={}))[nv.NotStarted=Jr.NotStarted]="NotStarted",nv[nv.InProgress=Jr.InProgress]="InProgress",nv[nv.Closing=Jr.Closing]="Closing",nv[nv.Closed=Jr.Closed]="Closed",re.ReconnectReason=void 0,(rv=re.ReconnectReason||(re.ReconnectReason={}))[rv.Failover=Ha.Failover]="Failover",rv[rv.JoinSubsession=Ha.JoinBreakoutRoom]="JoinSubsession",rv[rv.MoveToSubsession=Ha.MoveToBreakoutRoom]="MoveToSubsession",rv[rv.BackToMainSession=Ha.BackToMainSession]="BackToMainSession",re.SharePrivilege=void 0,(Wy=re.SharePrivilege||(re.SharePrivilege={}))[Wy.Unlocked=pu.HostGrab]="Unlocked",Wy[Wy.Locked=pu.OnlyHost]="Locked",Wy[Wy.MultipleShare=pu.MultipleShare]="MultipleShare",re.RemoteControlAppStatus=void 0,(Lf=re.RemoteControlAppStatus||(re.RemoteControlAppStatus={}))[Lf.Unknown=ha.Unknown]="Unknown",Lf[Lf.Uninstalled=ha.Uninstalled]="Uninstalled",Lf[Lf.Installed=ha.Installed]="Installed",Lf[Lf.Unlaunched=Wv.Unlaunched]="Unlaunched",Lf[Lf.Launched=Wv.Launched]="Launched",re.ApprovedState=J0,re.AskHostHelpResponse=th,re.AudioChangeAction=fm,re.CameraControlCmd=D1,re.ChatFileDownloadStatus=lu,re.ChatFileUploadStatus=pa,re.ConnectionState=bo,re.DialoutState=du,re.FarEndCameraControlDeclinedReason=iF,re.LiveStreamStatus=Nf,re.LiveTranscriptionLanguage=jn,re.LiveTranscriptionLanguageCode=tv,re.LiveTranscriptionMessageSource=Ad,re.MobileVideoFacingMode=Hv,re.MutedSource=Es,re.PassiveStopShareReason=BE,re.RecordingStatus=Kd,re.RemoteControlSessionStatus=UE,re.ShareStatus=yi,re.VideoActiveState=Y0,re.VideoCapturingState=$0,re.VideoQuality=ol,re.default=US,Object.defineProperty(re,"__esModule",{value:!0})}(Pe)},3890:function(we,Pe,$){var F=$(7156).default;we.exports=function(){"use strict";var re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe=function(r){return r&&r.Math==Math&&r},H=oe("object"==typeof globalThis&&globalThis)||oe("object"==typeof window&&window)||oe("object"==typeof self&&self)||oe("object"==typeof re&&re)||function(){return this}()||Function("return this")(),j={},M=function(r){try{return!!r()}catch{return!0}},P=!M(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),x=!M(function(){var r=function(){}.bind();return"function"!=typeof r||r.hasOwnProperty("prototype")}),Z=Function.prototype.call,ae=x?Z.bind(Z):function(){return Z.apply(Z,arguments)},ue={},pe={}.propertyIsEnumerable,ee=Object.getOwnPropertyDescriptor,Y=ee&&!pe.call({1:2},1);ue.f=Y?function(r){var o=ee(this,r);return!!o&&o.enumerable}:pe;var K,ce,ye=function(r,o){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:o}},ke=x,fe=Function.prototype,Ee=fe.call,ve=ke&&fe.bind.bind(Ee,Ee),le=ke?function(r){return r&&ve(r)}:function(r){return r&&function(){return Ee.apply(r,arguments)}},he=le,Oe=he({}.toString),je=he("".slice),Fe=function(r){return je(Oe(r),8,-1)},rt=M,nt=Fe,Ke=H.Object,Nt=le("".split),Ht=rt(function(){return!Ke("z").propertyIsEnumerable(0)})?function(r){return"String"==nt(r)?Nt(r,""):Ke(r)}:Ke,Et=H.TypeError,Je=function(r){if(null==r)throw Et("Can't call method on "+r);return r},Ve=Ht,$e=Je,De=function(r){return Ve($e(r))},ot=function(r){return"function"==typeof r},Pt=ot,qt=function(r){return"object"==typeof r?null!==r:Pt(r)},Ot=H,Jt=ot,Zn=function(r){return Jt(r)?r:void 0},Pn=function(r,o){return arguments.length<2?Zn(Ot[r]):Ot[r]&&Ot[r][o]},Dr=le({}.isPrototypeOf),vr=Pn("navigator","userAgent")||"",Ir=vr,wr=H.process,Xi=H.Deno,Vr=wr&&wr.versions||Xi&&Xi.version,Mo=Vr&&Vr.v8;Mo&&(ce=(K=Mo.split("."))[0]>0&&K[0]<4?1:+(K[0]+K[1])),!ce&&Ir&&(!(K=Ir.match(/Edge\/(\d+)/))||K[1]>=74)&&(K=Ir.match(/Chrome\/(\d+)/))&&(ce=+K[1]);var ra=ce,bt=ra,ln=!!Object.getOwnPropertySymbols&&!M(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&bt&&bt<41}),Xe=ln&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Be=Pn,pt=ot,Fn=Dr,no=H.Object,Ho=Xe?function(r){return"symbol"==typeof r}:function(r){var o=Be("Symbol");return pt(o)&&Fn(o.prototype,no(r))},ia=H.String,yo=function(r){try{return ia(r)}catch{return"Object"}},oa=ot,fo=yo,Rc=H.TypeError,$n=function(r){if(oa(r))return r;throw Rc(fo(r)+" is not a function")},Tn=$n,tt=function(r,o){var a=r[o];return null==a?void 0:Tn(a)},Ue=ae,sn=ot,an=qt,Sn=H.TypeError,ii={exports:{}},mo=H,Ns=Object.defineProperty,xs=function(r,o){try{Ns(mo,r,{value:o,configurable:!0,writable:!0})}catch{mo[r]=o}return o},To="__core-js_shared__",Tr=H[To]||xs(To,{}),co=Tr;(ii.exports=function(r,o){return co[r]||(co[r]=void 0!==o?o:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var ju=Je,Ld=H.Object,ls=function(r){return Ld(ju(r))},uE=ls,Dg=le({}.hasOwnProperty),_o=Object.hasOwn||function(r,o){return Dg(uE(r),o)},p0=le,h0=0,kn=Math.random(),Ii=p0(1..toString),Fh=function(r){return"Symbol("+(void 0===r?"":r)+")_"+Ii(++h0+kn,36)},KP=H,JT=_o,TB=Fh,XT=ln,zP=Xe,Bn=(0,ii.exports)("wks"),Og=KP.Symbol,f0=Og&&Og.for,kg=zP?Og:Og&&Og.withoutSetter||TB,No=function(r){if(!JT(Bn,r)||!XT&&"string"!=typeof Bn[r]){var o="Symbol."+r;Bn[r]=XT&&JT(Og,r)?Og[r]:zP&&f0?f0(o):kg(o)}return Bn[r]},Qu=ae,ZT=qt,hn=Ho,xo=tt,e1=H.TypeError,RB=No("toPrimitive"),es=function(r,o){if(!ZT(r)||hn(r))return r;var a,c=xo(r,RB);if(c){if(void 0===o&&(o="default"),a=Qu(c,r,o),!ZT(a)||hn(a))return a;throw e1("Can't convert object to primitive value")}return void 0===o&&(o="number"),function(r,o){var a,c;if("string"===o&&sn(a=r.toString)&&!an(c=Ue(a,r))||sn(a=r.valueOf)&&!an(c=Ue(a,r))||"string"!==o&&sn(a=r.toString)&&!an(c=Ue(a,r)))return c;throw Sn("Can't convert object to primitive value")}(r,o)},ur=Ho,Pg=function(r){var o=es(r,"string");return ur(o)?o:o+""},Bd=qt,sa=H.document,Mp=Bd(sa)&&Bd(sa.createElement),un=function(r){return Mp?sa.createElement(r):{}},m0=un,oi=!P&&!M(function(){return 7!=Object.defineProperty(m0("div"),"a",{get:function(){return 7}}).a}),Hu=ae,Np=ue,ki=ye,Ea=De,Rl=Pg,dE=_o,Ar=oi,DB=Object.getOwnPropertyDescriptor;j.f=P?DB:function(r,o){if(r=Ea(r),o=Rl(o),Ar)try{return DB(r,o)}catch{}if(dE(r,o))return ki(!Hu(Np.f,r,o),r[o])};var ts={},Fd=P&&M(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),pE=qt,Ev=H.String,Jn=H.TypeError,Nn=function(r){if(pE(r))return r;throw Jn(Ev(r)+" is not an object")},k4=oi,Zi=Nn,Dc=Pg,OB=H.TypeError,g0=Object.defineProperty,yr=Object.getOwnPropertyDescriptor;ts.f=P?Fd?function(r,o,a){if(Zi(r),o=Dc(o),Zi(a),"function"==typeof r&&"prototype"===o&&"value"in a&&"writable"in a&&!a.writable){var c=yr(r,o);c&&c.writable&&(r[o]=a.value,a={configurable:"configurable"in a?a.configurable:c.configurable,enumerable:"enumerable"in a?a.enumerable:c.enumerable,writable:!1})}return g0(r,o,a)}:g0:function(r,o,a){if(Zi(r),o=Dc(o),Zi(a),k4)try{return g0(r,o,a)}catch{}if("get"in a||"set"in a)throw OB("Accessors not supported");return"value"in a&&(r[o]=a.value),r};var P4=ts,t1=ye,Wn=P?function(r,o,a){return P4.f(r,o,t1(1,a))}:function(r,o,a){return r[o]=a,r},Ud={exports:{}},fE=ot,Uh=Tr,Vh=le(Function.toString);fE(Uh.inspectSource)||(Uh.inspectSource=function(r){return Vh(r)});var Vd,Sv,jr,jd=Uh.inspectSource,Gu=jd,_0=H.WeakMap,qP=ot(_0)&&/native code/.test(Gu(_0)),n1=Fh,Ng=(0,ii.exports)("keys"),r1=function(r){return Ng[r]||(Ng[r]=n1(r))},lo={},v0=le,PB=qt,MB=Wn,A0=_o,Iv=r1,NB=lo,cn="Object already initialized",mE=H.TypeError;if(qP||Tr.state){var eu=Tr.state||(Tr.state=new(0,H.WeakMap)),gE=v0(eu.get),Lg=v0(eu.has),YP=v0(eu.set);Vd=function(r,o){if(Lg(eu,r))throw new mE(cn);return o.facade=r,YP(eu,r,o),o},Sv=function(r){return gE(eu,r)||{}},jr=function(r){return Lg(eu,r)}}else{var wv=Iv("state");NB[wv]=!0,Vd=function(r,o){if(A0(r,wv))throw new mE(cn);return o.facade=r,MB(r,wv,o),o},Sv=function(r){return A0(r,wv)?r[wv]:{}},jr=function(r){return A0(r,wv)}}var Zc={set:Vd,get:Sv,has:jr,enforce:function(r){return jr(r)?Sv(r):Vd(r,{})},getterFor:function(r){return function(o){var a;if(!PB(o)||(a=Sv(o)).type!==r)throw mE("Incompatible receiver, "+r+" required");return a}}},xp=P,$P=Function.prototype,xB=xp&&Object.getOwnPropertyDescriptor,tu=_o($P,"name"),Qd={EXISTS:tu,PROPER:tu&&"something"===function(){}.name,CONFIGURABLE:tu&&(!xp||xp&&xB($P,"name").configurable)},li=H,$f=ot,_E=_o,nu=Wn,o1=xs,el=jd,vE=Qd.CONFIGURABLE,JP=Zc.get,aa=Zc.enforce,XP=String(String).split("String");(Ud.exports=function(r,o,a,c){var p,_=!!c&&!!c.unsafe,m=!!c&&!!c.enumerable,A=!!c&&!!c.noTargetGet,v=c&&void 0!==c.name?c.name:o;$f(a)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!_E(a,"name")||vE&&a.name!==v)&&nu(a,"name",v),(p=aa(a)).source||(p.source=XP.join("string"==typeof v?v:""))),r!==li?(_?!A&&r[o]&&(m=!0):delete r[o],m?r[o]=a:nu(r,o,a)):m?r[o]=a:o1(o,a)})(Function.prototype,"toString",function(){return $f(this)&&JP(this).source||el(this)});var Dl={},Bg=Math.ceil,Pi=Math.floor,jh=function(r){var o=+r;return o!=o||0===o?0:(o>0?Pi:Bg)(o)},AE=jh,mr=Math.max,Oc=Math.min,zi=function(r,o){var a=AE(r);return a<0?mr(a+o,0):Oc(a,o)},sc=jh,ac=Math.min,Wu=function(r){return r>0?ac(sc(r),9007199254740991):0},tl=Wu,ba=function(r){return tl(r.length)},gr=De,ui=zi,vs=ba,ru=function(r){return function(o,a,c){var p,_=gr(o),m=vs(_),A=ui(c,m);if(r&&a!=a){for(;m>A;)if((p=_[A++])!=p)return!0}else for(;m>A;A++)if((r||A in _)&&_[A]===a)return r||A||0;return!r&&-1}},Jf={includes:ru(!0),indexOf:ru(!1)},Gs=_o,Fg=De,Ls=Jf.indexOf,yE=lo,Tv=le([].push),fi=function(r,o){var a,c=Fg(r),p=0,_=[];for(a in c)!Gs(yE,a)&&Gs(c,a)&&Tv(_,a);for(;o.length>p;)Gs(c,a=o[p++])&&(~Ls(_,a)||Tv(_,a));return _},Rv=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],EE=fi,s1=Rv.concat("length","prototype");Dl.f=Object.getOwnPropertyNames||function(r){return EE(r,s1)};var ca={};ca.f=Object.getOwnPropertySymbols;var Dn=Pn,Lp=Dl,Hd=ca,la=Nn,Rr=le([].concat),y0=Dn("Reflect","ownKeys")||function(r){var o=Lp.f(la(r)),a=Hd.f;return a?Rr(o,a(r)):o},Go=_o,LB=y0,E0=j,ZP=ts,Gd=function(r,o,a){for(var c=LB(o),p=ZP.f,_=E0.f,m=0;m<c.length;m++){var A=c[m];Go(r,A)||a&&Go(a,A)||p(r,A,_(o,A))}},bE=M,Ug=ot,Sa=/#|\.prototype\./,Xf=function(r,o){var a=Wo[iu(r)];return a==SE||a!=b0&&(Ug(o)?bE(o):!!o)},iu=Xf.normalize=function(r){return String(r).replace(Sa,".").toLowerCase()},Wo=Xf.data={},b0=Xf.NATIVE="N",SE=Xf.POLYFILL="P",Vg=Xf,Ol=H,a1=j.f,eM=Wn,S0=Ud.exports,BB=xs,M4=Gd,FB=Vg,ou=function(r,o){var a,c,p,_,m,A=r.target,v=r.global,S=r.stat;if(a=v?Ol:S?Ol[A]||BB(A,{}):(Ol[A]||{}).prototype)for(c in o){if(_=o[c],p=r.noTargetGet?(m=a1(a,c))&&m.value:a[c],!FB(v?c:A+(S?".":"#")+c,r.forced)&&void 0!==p){if(typeof _==typeof p)continue;M4(_,p)}(r.sham||p&&p.sham)&&eM(_,"sham",!0),S0(a,c,_,r)}},Dv=H.Promise,UB=Ud.exports,VB=function(r,o,a){for(var c in o)UB(r,c,o[c],a);return r},QB=ot,HB=H.String,tM=H.TypeError,GB=le,WB=Nn,Qh=Object.setPrototypeOf||("__proto__"in{}?function(){var r,o=!1,a={};try{(r=GB(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(a,[]),o=a instanceof Array}catch{}return function(c,p){return WB(c),function(r){if("object"==typeof r||QB(r))return r;throw tM("Can't set "+HB(r)+" as a prototype")}(p),o?r(c,p):c.__proto__=p,c}}():void 0),C0=ts.f,KB=_o,nM=No("toStringTag"),CE=function(r,o,a){r&&!a&&(r=r.prototype),r&&!KB(r,nM)&&C0(r,nM,{configurable:!0,value:o})},Bp=Pn,As=ts,Bs=P,I0=No("species"),w0=function(r){var o=Bp(r);Bs&&o&&!o[I0]&&(0,As.f)(o,I0,{configurable:!0,get:function(){return this}})},su=Dr,c1=H.TypeError,Zf=function(r,o){if(su(o,r))return r;throw c1("Incorrect invocation")},l1=$n,Ov=x,T0=le(le.bind),Ro=function(r,o){return l1(r),void 0===o?r:Ov?T0(r,o):function(){return r.apply(o,arguments)}},em={},Hh=em,au=No("iterator"),u1=Array.prototype,d1=function(r){return void 0!==r&&(Hh.Array===r||u1[au]===r)},ua={};ua[No("toStringTag")]="z";var R0=H,zB="[object z]"===String(ua),jg=ot,da=Fe,Ku=No("toStringTag"),Fp=R0.Object,kv="Arguments"==da(function(){return arguments}()),Ca=zB?da:function(r){var o,a,c;return void 0===r?"Undefined":null===r?"Null":"string"==typeof(a=function(p,_){try{return p[_]}catch{}}(o=Fp(r),Ku))?a:kv?da(o):"Object"==(c=da(o))&&jg(o.callee)?"Arguments":c},IE=Ca,Pv=tt,qB=em,zu=No("iterator"),wE=function(r){if(null!=r)return Pv(r,zu)||Pv(r,"@@iterator")||qB[IE(r)]},TE=ae,ti=$n,Mv=Nn,x4=yo,rM=wE,p1=H.TypeError,Nv=function(r,o){var a=arguments.length<2?rM(r):o;if(ti(a))return Mv(TE(a,r));throw p1(x4(r)+" is not iterable")},D0=ae,ja=Nn,RE=tt,Rn=Ro,Ri=ae,Qa=Nn,Ko=yo,cc=d1,iM=ba,Qg=Dr,Up=Nv,h1=wE,O0=function(r,o,a){var c,p;ja(r);try{if(!(c=RE(r,"return"))){if("throw"===o)throw a;return a}c=D0(c,r)}catch(_){p=!0,c=_}if("throw"===o)throw a;if(p)throw c;return ja(c),a},YB=H.TypeError,qu=function(r,o){this.stopped=r,this.result=o},f1=qu.prototype,DE=No("iterator"),lc=!1;try{var Vp=0,tm={next:function(){return{done:!!Vp++}},return:function(){lc=!0}};tm[DE]=function(){return this},Array.from(tm,function(){throw 2})}catch{}var nm=function(r,o){if(!o&&!lc)return!1;var a=!1;try{var c={};c[DE]=function(){return{next:function(){return{done:a=!0}}}},r(c)}catch{}return a},jp=le,oM=M,k0=ot,m1=Ca,sM=jd,OE=function(){},P0=[],g1=Pn("Reflect","construct"),Gh=/^\s*(?:class|function)\b/,aM=jp(Gh.exec),_1=!Gh.exec(OE),rm=function(r){if(!k0(r))return!1;try{return g1(OE,P0,r),!0}catch{return!1}},M0=function(r){if(!k0(r))return!1;switch(m1(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return _1||!!aM(Gh,sM(r))}catch{return!0}};M0.sham=!0;var Hg,im,N0,om,v1=!g1||oM(function(){var r;return rm(rm.call)||!rm(Object)||!rm(function(){r=!0})||r})?M0:rm,Ha=v1,Ws=yo,Wh=H.TypeError,bo=function(r){if(Ha(r))return r;throw Wh(Ws(r)+" is not a constructor")},Do=Nn,kE=bo,Ks=No("species"),Mi=function(r,o){var a,c=Do(r).constructor;return void 0===c||null==(a=Do(c)[Ks])?o:kE(a)},Yr=Function.prototype,zo=Yr.apply,xv=Yr.call,kl="object"==typeof Reflect&&Reflect.apply||(x?xv.bind(zo):function(){return xv.apply(zo,arguments)}),x0=Pn("document","documentElement"),lM=le([].slice),uM=/(?:ipad|iphone|ipod).*applewebkit/i.test(vr),dr="process"==Fe(H.process),qo=H,dM=kl,L0=Ro,Gg=ot,B0=_o,PE=M,zs=x0,F0=lM,Ga=un,ro=uM,U0=dr,sm=qo.setImmediate,Yu=qo.clearImmediate,pM=qo.process,Ia=qo.Dispatch,Lv=qo.Function,V0=qo.MessageChannel,So=qo.String,uc=0,Qp={};try{Hg=qo.location}catch{}var Wg=function(r){if(B0(Qp,r)){var o=Qp[r];delete Qp[r],o()}},Bv=function(r){return function(){Wg(r)}},ME=function(r){Wg(r.data)},cu=function(r){qo.postMessage(So(r),Hg.protocol+"//"+Hg.host)};sm&&Yu||(sm=function(r){var o=F0(arguments,1);return Qp[++uc]=function(){dM(Gg(r)?r:Lv(r),void 0,o)},im(uc),uc},Yu=function(r){delete Qp[r]},U0?im=function(r){pM.nextTick(Bv(r))}:Ia&&Ia.now?im=function(r){Ia.now(Bv(r))}:V0&&!ro?(om=(N0=new V0).port2,N0.port1.onmessage=ME,im=L0(om.postMessage,om)):qo.addEventListener&&Gg(qo.postMessage)&&!qo.importScripts&&Hg&&"file:"!==Hg.protocol&&!PE(cu)?(im=cu,qo.addEventListener("message",ME,!1)):im="onreadystatechange"in Ga("script")?function(r){zs.appendChild(Ga("script")).onreadystatechange=function(){zs.removeChild(this),Wg(r)}}:function(r){setTimeout(Bv(r),0)});var Co,kc,Hi,Hp,Kg,NE,A1,Fv,y1={set:sm,clear:Yu},Uv=H,zg=/ipad|iphone|ipod/i.test(vr)&&void 0!==Uv.Pebble,JB=/web0s(?!.*chrome)/i.test(vr),Gp=H,Ts=Ro,lu=y1.set,hM=uM,qs=zg,fM=JB,kr=dr,j0=Gp.MutationObserver||Gp.WebKitMutationObserver,Q0=Gp.document,H0=Gp.process,Kh=Gp.Promise,am=(0,j.f)(Gp,"queueMicrotask"),ys=am&&am.value;ys||(Co=function(){var r,o;for(kr&&(r=H0.domain)&&r.exit();kc;){o=kc.fn,kc=kc.next;try{o()}catch(a){throw kc?Hp():Hi=void 0,a}}Hi=void 0,r&&r.enter()},hM||kr||fM||!j0||!Q0?!qs&&Kh&&Kh.resolve?((A1=Kh.resolve(void 0)).constructor=Kh,Fv=Ts(A1.then,A1),Hp=function(){Fv(Co)}):kr?Hp=function(){H0.nextTick(Co)}:(lu=Ts(lu,Gp),Hp=function(){lu(Co)}):(Kg=!0,NE=Q0.createTextNode(""),new j0(Co).observe(NE,{characterData:!0}),Hp=function(){NE.data=Kg=!Kg}));var Wd=ys||function(r){var o={fn:r,next:void 0};Hi&&(Hi.next=o),kc||(kc=o,Hp()),Hi=o},Qr={},cm=$n,wa=function(r){var o,a;this.promise=new r(function(c,p){if(void 0!==o||void 0!==a)throw TypeError("Bad Promise constructor");o=c,a=p}),this.resolve=cm(o),this.reject=cm(a)};Qr.f=function(r){return new wa(r)};var XB=Nn,Wp=qt,Qn=Qr,lm=function(r,o){if(XB(r),Wp(o)&&o.constructor===r)return o;var a=Qn.f(r);return(0,a.resolve)(o),a.promise},ZB=H,mM=function(){this.head=null,this.tail=null};mM.prototype={add:function(r){var o={item:r,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var r=this.head;if(r)return this.head=r.next,this.tail===r&&(this.tail=null),r.item}};var Ta,nl,qg,E1,eF="object"==typeof window,uu=ou,Yo=H,b1=Pn,dc=ae,$u=Dv,S1=Ud.exports,Pc=VB,um=Qh,dm=CE,zh=w0,pm=$n,qh=ot,$g=qt,G0=Zf,W0=jd,tF=function(r,o,a){var c,p,_,m,A,v,S,R=!(!a||!a.AS_ENTRIES),O=!(!a||!a.IS_ITERATOR),B=!(!a||!a.INTERRUPTED),q=Rn(o,a&&a.that),z=function(de){return c&&O0(c,"normal",de),new qu(!0,de)},te=function(de){return R?(Qa(de),B?q(de[0],de[1],z):q(de[0],de[1])):B?q(de,z):q(de)};if(O)c=r;else{if(!(p=h1(r)))throw YB(Ko(r)+" is not iterable");if(cc(p)){for(_=0,m=iM(r);m>_;_++)if((A=te(r[_]))&&Qg(f1,A))return A;return new qu(!1)}c=Up(r,p)}for(v=c.next;!(S=Ri(v,c)).done;){try{A=te(S.value)}catch(de){O0(c,"throw",de)}if("object"==typeof A&&A&&Qg(f1,A))return A}return new qu(!1)},C1=nm,rl=Mi,xE=y1.set,hm=Wd,Kd=lm,Vv=Qr,pc=function(r){try{return{error:!1,value:r()}}catch(o){return{error:!0,value:o}}},nF=mM,Jg=Zc,K0=Vg,z0=eF,il=dr,jv=ra,q0=No("species"),Fs="Promise",I1=Jg.getterFor(Fs),Cn=Jg.set,ns=Jg.getterFor(Fs),Kp=$u&&$u.prototype,Es=$u,Ju=Kp,fm=Yo.TypeError,du=Yo.document,w1=Yo.process,zd=Vv.f,LE=zd,pu=!!(du&&du.createEvent&&Yo.dispatchEvent),yi=qh(Yo.PromiseRejectionEvent),ol="unhandledrejection",Y0=!1,Xg=K0(Fs,function(){var r=W0(Es),o=r!==String(Es);if(!o&&66===jv)return!0;if(jv>=51&&/native code/.test(r))return!1;var a=new Es(function(p){p(1)}),c=function(p){p(function(){},function(){})};return(a.constructor={})[q0]=c,!(Y0=a.then(function(){})instanceof c)||!o&&z0&&!yi}),$0=Xg||!C1(function(r){Es.all(r).catch(function(){})}),J0=function(r){var o;return!(!$g(r)||!qh(o=r.then))&&o},BE=function(r,o){var a,c,p,_=o.value,m=1==o.state,A=m?r.ok:r.fail,v=r.resolve,S=r.reject,I=r.domain;try{A?(m||(2===o.rejection&&gM(o),o.rejection=1),!0===A?a=_:(I&&I.enter(),a=A(_),I&&(I.exit(),p=!0)),a===r.promise?S(fm("Promise-chain cycle")):(c=J0(a))?dc(c,a,v,S):v(a)):S(_)}catch(R){I&&!p&&I.exit(),S(R)}},Qv=function(r,o){r.notified||(r.notified=!0,hm(function(){for(var a,c=r.reactions;a=c.get();)BE(a,r);r.notified=!1,o&&!r.rejection&&Hv(r)}))},mm=function(r,o,a){var c,p;pu?((c=du.createEvent("Event")).promise=o,c.reason=a,c.initEvent(r,!1,!0),Yo.dispatchEvent(c)):c={promise:o,reason:a},!yi&&(p=Yo["on"+r])?p(c):r===ol&&function(r,o){var a=ZB.console;a&&a.error&&(1==arguments.length?a.error(r):a.error(r,o))}("Unhandled promise rejection",a)},Hv=function(r){dc(xE,Yo,function(){var o,a=r.facade,c=r.value;if(zp(r)&&(o=pc(function(){il?w1.emit("unhandledRejection",c,a):mm(ol,a,c)}),r.rejection=il||zp(r)?2:1,o.error))throw o.value})},zp=function(r){return 1!==r.rejection&&!r.parent},gM=function(r){dc(xE,Yo,function(){var o=r.facade;il?w1.emit("rejectionHandled",o):mm("rejectionhandled",o,r.value)})},Yh=function(r,o,a){return function(c){r(o,c,a)}},FE=function(r,o,a){r.done||(r.done=!0,a&&(r=a),r.value=o,r.state=2,Qv(r,!0))},T1=function(r,o,a){if(!r.done){r.done=!0,a&&(r=a);try{if(r.facade===o)throw fm("Promise can't be resolved itself");var c=J0(o);c?hm(function(){var p={done:!1};try{dc(c,o,Yh(T1,p,r),Yh(FE,p,r))}catch(_){FE(p,_,r)}}):(r.value=o,r.state=1,Qv(r,!1))}catch(p){FE({done:!1},p,r)}}};if(Xg&&(Ju=(Es=function(r){G0(this,Ju),pm(r),dc(Ta,this);var o=I1(this);try{r(Yh(T1,o),Yh(FE,o))}catch(a){FE(o,a)}}).prototype,(Ta=function(r){Cn(this,{type:Fs,done:!1,notified:!1,parent:!1,reactions:new nF,rejection:!1,state:0,value:void 0})}).prototype=Pc(Ju,{then:function(r,o){var a=ns(this),c=zd(rl(this,Es));return a.parent=!0,c.ok=!qh(r)||r,c.fail=qh(o)&&o,c.domain=il?w1.domain:void 0,0==a.state?a.reactions.add(c):hm(function(){BE(c,a)}),c.promise},catch:function(r){return this.then(void 0,r)}}),nl=function(){var r=new Ta,o=I1(r);this.promise=r,this.resolve=Yh(T1,o),this.reject=Yh(FE,o)},Vv.f=zd=function(r){return r===Es||r===qg?new nl(r):LE(r)},qh($u)&&Kp!==Object.prototype)){E1=Kp.then,Y0||(S1(Kp,"then",function(r,o){var a=this;return new Es(function(c,p){dc(E1,a,c,p)}).then(r,o)},{unsafe:!0}),S1(Kp,"catch",Ju.catch,{unsafe:!0}));try{delete Kp.constructor}catch{}um&&um(Kp,Ju)}uu({global:!0,wrap:!0,forced:Xg},{Promise:Es}),dm(Es,Fs,!1),zh(Fs),qg=b1(Fs),uu({target:Fs,stat:!0,forced:Xg},{reject:function(r){var o=zd(this);return dc(o.reject,void 0,r),o.promise}}),uu({target:Fs,stat:!0,forced:Xg},{resolve:function(r){return Kd(this,r)}}),uu({target:Fs,stat:!0,forced:$0},{all:function(r){var o=this,a=zd(o),c=a.resolve,p=a.reject,_=pc(function(){var m=pm(o.resolve),A=[],v=0,S=1;tF(r,function(I){var R=v++,O=!1;S++,dc(m,o,I).then(function(B){O||(O=!0,A[R]=B,--S||c(A))},p)}),--S||c(A)});return _.error&&p(_.value),a.promise},race:function(r){var o=this,a=zd(o),c=a.reject,p=pc(function(){var _=pm(o.resolve);tF(r,function(m){dc(_,o,m).then(a.resolve,c)})});return p.error&&c(p.value),a.promise}});var rF=ou,R1=kl,qd=le,Wa=M,Zg=H.Array,gm=Pn("JSON","stringify"),D1=qd(/./.exec),iF=qd("".charAt),_M=qd("".charCodeAt),Yd=qd("".replace),uo=qd(1..toString),Gv=/[\uD800-\uDFFF]/g,ha=/^[\uD800-\uDBFF]$/,Wv=/^[\uDC00-\uDFFF]$/,UE=function(r,o,a){var c=iF(a,o-1),p=iF(a,o+1);return D1(ha,r)&&!D1(Wv,p)||D1(Wv,r)&&!D1(ha,c)?"\\u"+uo(_M(r,0),16):r},Mc=Wa(function(){return'"\\udf06\\ud834"'!==gm("\udf06\ud834")||'"\\udead"'!==gm("\udead")});gm&&rF({target:"JSON",stat:!0,forced:Mc},{stringify:function(r,o,a){for(var c=0,p=arguments.length,_=Zg(p);c<p;c++)_[c]=arguments[c];var m=R1(gm,null,_);return"string"==typeof m?Yd(m,Gv,UE):m}});var rs=function(r){try{return!!r()}catch{return!0}},VE=!rs(function(){var r=function(){}.bind();return"function"!=typeof r||r.hasOwnProperty("prototype")}),O1=VE,Z0=Function.prototype,eC=Z0.call,k1=O1&&Z0.bind.bind(eC,eC),Fo=O1?function(r){return r&&k1(r)}:function(r){return r&&function(){return eC.apply(r,arguments)}},Nc=Fo({}.isPrototypeOf),Kv=function(r){return r&&r.Math==Math&&r},$r=Kv("object"==typeof globalThis&&globalThis)||Kv("object"==typeof window&&window)||Kv("object"==typeof self&&self)||Kv("object"==typeof re&&re)||function(){return this}()||Function("return this")(),zv=Function.prototype,$h=zv.apply,qv=zv.call,Ra="object"==typeof Reflect&&Reflect.apply||(VE?qv.bind($h):function(){return qv.apply($h,arguments)}),bs=function(r){return"function"==typeof r},e_={},xc=!rs(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),t_=Function.prototype.call,Lc=VE?t_.bind(t_):function(){return t_.apply(t_,arguments)},n_={},nC={}.propertyIsEnumerable,rC=Object.getOwnPropertyDescriptor,P1=rC&&!nC.call({1:2},1);n_.f=P1?function(r){var o=rC(this,r);return!!o&&o.enumerable}:nC;var $d,r_,Xu=function(r,o){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:o}},M1=Fo,N1=M1({}.toString),vM=M1("".slice),qp=function(r){return vM(N1(r),8,-1)},Ka=rs,x1=qp,Yv=$r.Object,QE=Fo("".split),_m=Ka(function(){return!Yv("z").propertyIsEnumerable(0)})?function(r){return"String"==x1(r)?QE(r,""):Yv(r)}:Yv,vm=$r.TypeError,Yp=function(r){if(null==r)throw vm("Can't call method on "+r);return r},iC=_m,L1=Yp,Jd=function(r){return iC(L1(r))},yM=bs,Pl=function(r){return"object"==typeof r?null!==r:yM(r)},$p={},oC=$p,sC=$r,EM=bs,aC=function(r){return EM(r)?r:void 0},Ml=function(r,o){return arguments.length<2?aC(oC[r])||aC(sC[r]):oC[r]&&oC[r][o]||sC[r]&&sC[r][o]},Jh=Ml("navigator","userAgent")||"",cC=Jh,i_=$r.process,GE=$r.Deno,lC=i_&&i_.versions||GE&&GE.version,Bc=lC&&lC.v8;Bc&&(r_=($d=Bc.split("."))[0]>0&&$d[0]<4?1:+($d[0]+$d[1])),!r_&&cC&&(!($d=cC.match(/Edge\/(\d+)/))||$d[1]>=74)&&($d=cC.match(/Chrome\/(\d+)/))&&(r_=+$d[1]);var Xd=r_,B1=Xd,uC=!!Object.getOwnPropertySymbols&&!rs(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&B1&&B1<41}),$v=uC&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,bM=Ml,WE=bs,U1=Nc,dC=$r.Object,Jv=$v?function(r){return"symbol"==typeof r}:function(r){var o=bM("Symbol");return WE(o)&&U1(o.prototype,dC(r))},Xv=$r.String,Am=function(r){try{return Xv(r)}catch{return"Object"}},j1=bs,Zv=Am,eA=$r.TypeError,hc=function(r){if(j1(r))return r;throw eA(Zv(r)+" is not a function")},o_=hc,pC=function(r,o){var a=r[o];return null==a?void 0:o_(a)},KE=Lc,hC=bs,fC=Pl,Q1=$r.TypeError,tA={exports:{}},Xh=$r,s_=Object.defineProperty,$s="__core-js_shared__",H1=$r[$s]||function(r,o){try{s_(Xh,r,{value:o,configurable:!0,writable:!0})}catch{Xh[r]=o}return o}($s,{}),Jp=H1;(tA.exports=function(r,o){return Jp[r]||(Jp[r]=void 0!==o?o:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var oF=Yp,sF=$r.Object,nn=function(r){return sF(oF(r))},Xp=nn,gC=Fo({}.hasOwnProperty),Gi=Object.hasOwn||function(r,o){return gC(Xp(r),o)},ym=Fo,Pr=0,G1=Math.random(),W1=ym(1..toString),Zp=function(r){return"Symbol("+(void 0===r?"":r)+")_"+W1(++Pr+G1,36)},SM=$r,_C=Gi,IM=Zp,K1=uC,al=$v,cl=(0,tA.exports)("wks"),Em=SM.Symbol,z1=Em&&Em.for,wM=al?Em:Em&&Em.withoutSetter||IM,us=function(r){if(!_C(cl,r)||!K1&&"string"!=typeof cl[r]){var o="Symbol."+r;cl[r]=K1&&_C(Em,r)?Em[r]:al&&z1?z1(o):wM(o)}return cl[r]},TM=Lc,q1=Pl,vC=Jv,Y1=pC,AC=$r.TypeError,nA=us("toPrimitive"),Zd=function(r,o){if(!q1(r)||vC(r))return r;var a,c=Y1(r,nA);if(c){if(void 0===o&&(o="default"),a=TM(c,r,o),!q1(a)||vC(a))return a;throw AC("Can't convert object to primitive value")}return void 0===o&&(o="number"),function(r,o){var a,c;if("string"===o&&hC(a=r.toString)&&!fC(c=KE(a,r))||hC(a=r.valueOf)&&!fC(c=KE(a,r))||"string"!==o&&hC(a=r.toString)&&!fC(c=KE(a,r)))return c;throw Q1("Can't convert object to primitive value")}(r,o)},rA=Jv,iA=function(r){var o=Zd(r,"string");return rA(o)?o:o+""},zE=Pl,Zh=$r.document,cF=zE(Zh)&&zE(Zh.createElement),$1=function(r){return cF?Zh.createElement(r):{}},DM=$1,qE=!xc&&!rs(function(){return 7!=Object.defineProperty(DM("div"),"a",{get:function(){return 7}}).a}),bm=Lc,L4=n_,EC=Xu,lF=Jd,J1=iA,uF=Gi,OM=qE,X1=Object.getOwnPropertyDescriptor;e_.f=xc?X1:function(r,o){if(r=lF(r),o=J1(o),OM)try{return X1(r,o)}catch{}if(uF(r,o))return EC(!bm(L4.f,r,o),r[o])};var bC=rs,oA=bs,Z1=/#|\.prototype\./,sA=function(r,o){var a=a_[Di(r)];return a==Ze||a!=eR&&(oA(o)?bC(o):!!o)},Di=sA.normalize=function(r){return String(r).replace(Z1,".").toLowerCase()},a_=sA.data={},eR=sA.NATIVE="N",Ze=sA.POLYFILL="P",ef=sA,Lr=hc,Oo=VE,tR=Fo(Fo.bind),ep=function(r,o){return Lr(r),void 0===o?r:Oo?tR(r,o):function(){return r.apply(o,arguments)}},eh={},kM=xc&&rs(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),c_=Pl,nR=$r.String,rR=$r.TypeError,ll=function(r){if(c_(r))return r;throw rR(nR(r)+" is not an object")},MM=qE,tf=ll,aA=iA,oR=$r.TypeError,sR=Object.defineProperty,SC=Object.getOwnPropertyDescriptor;eh.f=xc?kM?function(r,o,a){if(tf(r),o=aA(o),tf(a),"function"==typeof r&&"prototype"===o&&"value"in a&&"writable"in a&&!a.writable){var c=SC(r,o);c&&c.writable&&(r[o]=a.value,a={configurable:"configurable"in a?a.configurable:c.configurable,enumerable:"enumerable"in a?a.enumerable:c.enumerable,writable:!1})}return sR(r,o,a)}:sR:function(r,o,a){if(tf(r),o=aA(o),tf(a),MM)try{return sR(r,o,a)}catch{}if("get"in a||"set"in a)throw oR("Accessors not supported");return"value"in a&&(r[o]=a.value),r};var CC=eh,hu=Xu,u_=xc?function(r,o,a){return CC.f(r,o,hu(1,a))}:function(r,o,a){return r[o]=a,r},Sm=$r,cA=Ra,lA=Fo,uA=bs,Ds=e_.f,tp=ef,Jr=$p,IC=ep,fr=u_,d_=Gi,th=function(r){var o=function(a,c,p){if(this instanceof o){switch(arguments.length){case 0:return new r;case 1:return new r(a);case 2:return new r(a,c)}return new r(a,c,p)}return cA(r,this,arguments)};return o.prototype=r.prototype,o},Yn=function(r,o){var a,c,p,_,m,A,v,S,I=r.target,R=r.global,O=r.stat,B=r.proto,q=R?Sm:O?Sm[I]:(Sm[I]||{}).prototype,z=R?Jr:Jr[I]||fr(Jr,I,{})[I],te=z.prototype;for(p in o)a=!tp(R?p:I+(O?".":"#")+p,r.forced)&&q&&d_(q,p),m=z[p],a&&(A=r.noTargetGet?(S=Ds(q,p))&&S.value:q[p]),_=a&&A?A:o[p],a&&typeof m==typeof _||(v=r.bind&&a?IC(_,Sm):r.wrap&&a?th(_):B&&uA(_)?lA(_):_,(r.sham||_&&_.sham||m&&m.sham)&&fr(v,"sham",!0),fr(z,p,v),B&&(d_(Jr,c=I+"Prototype")||fr(Jr,c,{}),fr(Jr[c],p,_),r.real&&te&&!te[p]&&fr(te,p,_)))},fu=Math.ceil,dF=Math.floor,p_=function(r){var o=+r;return o!=o||0===o?0:(o>0?dF:fu)(o)},cR=p_,Uo=Math.min,np=function(r){return function(r){return r>0?Uo(cR(r),9007199254740991):0}(r.length)},lR=hc,LM=nn,pF=_m,qi=np,Fc=$r.TypeError,Cm=function(r){return function(o,a,c,p){lR(a);var _=LM(o),m=pF(_),A=qi(_),v=r?A-1:0,S=r?-1:1;if(c<2)for(;;){if(v in m){p=m[v],v+=S;break}if(v+=S,r?v<0:A<=v)throw Fc("Reduce of empty array with no initial value")}for(;r?v>=0:A>v;v+=S)v in m&&(p=a(p,m[v],v,_));return p}},Ni={left:Cm(!1),right:Cm(!0)},BM=rs,Im=function(r,o){var a=[][r];return!!a&&BM(function(){a.call(null,o||function(){throw 1},1)})},mu="process"==qp($r.process),FM=Ni.left,uR=Xd,h_=mu;Yn({target:"Array",proto:!0,forced:!Im("reduce")||!h_&&uR>79&&uR<83},{reduce:function(r){var o=arguments.length;return FM(this,r,o,o>1?arguments[1]:void 0)}});var dR=$p,Nl=function(r){return dR[r+"Prototype"]},wC=Nl("Array").reduce,UM=Nc,YE=wC,gu=Array.prototype,f_=function(r){var o=r.reduce;return r===gu||UM(gu,r)&&o===gu.reduce?YE:o},nf=f_,m_=Ca,pR=H.String,ul=function(r){if("Symbol"===m_(r))throw TypeError("Cannot convert a Symbol value to a string");return pR(r)},VM=Nn,hR=function(){var r=VM(this),o="";return r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.dotAll&&(o+="s"),r.unicode&&(o+="u"),r.sticky&&(o+="y"),o},_u=M,xl=H.RegExp,dA=_u(function(){var r=xl("a","y");return r.lastIndex=2,null!=r.exec("abcd")}),pA=dA||_u(function(){return!xl("a","y").sticky}),TC={BROKEN_CARET:dA||_u(function(){var r=xl("^r","gy");return r.lastIndex=2,null!=r.exec("str")}),MISSED_STICKY:pA,UNSUPPORTED_Y:dA},$E={},fR=fi,mR=Rv,jM=ts,_R=Nn,vR=De,AR=Object.keys||function(r){return fR(r,mR)};$E.f=P&&!Fd?Object.defineProperties:function(r,o){_R(r);for(var a,c=vR(o),p=AR(o),_=p.length,m=0;_>m;)jM.f(r,a=p[m++],c[a]);return r};var dl,yR=Nn,nh=$E,hA=Rv,ER=lo,DC=x0,OC=un,kC=r1("IE_PROTO"),PC=function(){},bR=function(r){return"<script>"+r+"<\/script>"},Ll=function(r){r.write(bR("")),r.close();var o=r.parentWindow.Object;return r=null,o},ni=function(){try{dl=new ActiveXObject("htmlfile")}catch{}var r,o;ni=typeof document<"u"?document.domain&&dl?Ll(dl):((o=OC("iframe")).style.display="none",DC.appendChild(o),o.src=String("javascript:"),(r=o.contentWindow.document).open(),r.write(bR("document.F=Object")),r.close(),r.F):Ll(dl);for(var a=hA.length;a--;)delete ni.prototype[hA[a]];return ni()};ER[kC]=!0;var r,o,Ft=Object.create||function(r,o){var a;return null!==r?(PC.prototype=yR(r),a=new PC,PC.prototype=null,a[kC]=r):a=ni(),void 0===o?a:nh.f(a,o)},JE=H.RegExp,XE=M(function(){var r=JE(".","s");return!(r.dotAll&&r.exec("\n")&&"s"===r.flags)}),fA=H.RegExp,SR=M(function(){var r=fA("(?<a>b)","g");return"b"!==r.exec("b").groups.a||"bc"!=="b".replace(r,"$<a>c")}),wm=ae,ZE=le,NC=ul,HM=hR,mA=TC,Uc=Ft,B4=Zc.get,g_=XE,Tm=SR,GM=(0,ii.exports)("native-string-replace",String.prototype.replace),rf=RegExp.prototype.exec,IR=rf,WM=ZE("".charAt),F4=ZE("".indexOf),rp=ZE("".replace),xC=ZE("".slice),LC=(o=/b*/g,wm(rf,r=/a/,"a"),wm(rf,o,"a"),0!==r.lastIndex||0!==o.lastIndex),sf=mA.BROKEN_CARET,eb=void 0!==/()??/.exec("")[1];(LC||eb||sf||g_||Tm)&&(IR=function(r){var o,a,c,p,_,m,A,v=this,S=B4(v),I=NC(r),R=S.raw;if(R)return R.lastIndex=v.lastIndex,o=wm(IR,R,I),v.lastIndex=R.lastIndex,o;var O=S.groups,B=sf&&v.sticky,q=wm(HM,v),z=v.source,te=0,de=I;if(B&&(q=rp(q,"y",""),-1===F4(q,"g")&&(q+="g"),de=xC(I,v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&"\n"!==WM(I,v.lastIndex-1))&&(z="(?: "+z+")",de=" "+de,te++),a=new RegExp("^(?:"+z+")",q)),eb&&(a=new RegExp("^"+z+"$(?!\\s)",q)),LC&&(c=v.lastIndex),p=wm(rf,B?a:v,de),B?p?(p.input=xC(p.input,te),p[0]=xC(p[0],te),p.index=v.lastIndex,v.lastIndex+=p[0].length):v.lastIndex=0:LC&&p&&(v.lastIndex=v.global?p.index+p[0].length:c),eb&&p&&p.length>1&&wm(GM,p[0],a,function(){for(_=1;_<arguments.length-2;_++)void 0===arguments[_]&&(p[_]=void 0)}),p&&O)for(p.groups=m=Uc(null),_=0;_<O.length;_++)m[(A=O[_])[0]]=p[A[1]];return p});var gA=IR;ou({target:"RegExp",proto:!0,forced:/./.exec!==gA},{exec:gA});var tb=Ft,KM=ts,nb=No("unscopables"),rb=Array.prototype;null==rb[nb]&&KM.f(rb,nb,{configurable:!0,value:tb(null)});var rh,wR,BC,FC=!M(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),TR=H,zM=_o,_A=ot,ib=ls,UC=FC,RR=r1("IE_PROTO"),vA=TR.Object,qM=vA.prototype,VC=UC?vA.getPrototypeOf:function(r){var o=ib(r);if(zM(o,RR))return o[RR];var a=o.constructor;return _A(a)&&o instanceof a?a.prototype:o instanceof vA?qM:null},yt=M,AA=ot,jC=VC,DR=Ud.exports,QC=No("iterator"),OR=!1;[].keys&&("next"in(BC=[].keys())?(wR=jC(jC(BC)))!==Object.prototype&&(rh=wR):OR=!0),(null==rh||yt(function(){var r={};return rh[QC].call(r)!==r}))&&(rh={}),AA(rh[QC])||DR(rh,QC,function(){return this});var Rm={IteratorPrototype:rh,BUGGY_SAFARI_ITERATORS:OR},af=Rm.IteratorPrototype,yA=Ft,Dm=ye,EA=CE,cf=em,kR=function(){return this},ob=ou,HC=ae,sb=ot,ab=VC,WC=Qh,KC=CE,PR=Wn,cb=Ud.exports,lb=em,fF=Qd.PROPER,zC=Qd.CONFIGURABLE,pl=Rm.IteratorPrototype,bA=Rm.BUGGY_SAFARI_ITERATORS,v_=No("iterator"),lf="values",YM="entries",U4=function(){return this},V4=De,$M=function(r){rb[nb][r]=!0},JM=em,j4=ts.f,Q4=P,gF="Array Iterator",H4=Zc.set,_F=Zc.getterFor(gF),MR=function(r,o,a,c,p,_,m){!function(r,o,a,c){var p=o+" Iterator";r.prototype=yA(af,{next:Dm(+!c,a)}),EA(r,p,!1),cf[p]=kR}(a,o,c);var A,v,S,I=function(de){if(de===p&&z)return z;if(!bA&&de in B)return B[de];switch(de){case"keys":case lf:case YM:return function(){return new a(this,de)}}return function(){return new a(this)}},R=o+" Iterator",O=!1,B=r.prototype,q=B[v_]||B["@@iterator"]||p&&B[p],z=!bA&&q||I(p),te="Array"==o&&B.entries||q;if(te&&(A=ab(te.call(new r)))!==Object.prototype&&A.next&&(ab(A)!==pl&&(WC?WC(A,pl):sb(A[v_])||cb(A,v_,U4)),KC(A,R,!0)),fF&&p==lf&&q&&q.name!==lf&&(zC?PR(B,"name",lf):(O=!0,z=function(){return HC(q,this)})),p)if(v={values:I(lf),keys:_?z:I("keys"),entries:I(YM)},m)for(S in v)(bA||O||!(S in B))&&cb(B,S,v[S]);else ob({target:o,proto:!0,forced:bA||O},v);return B[v_]!==z&&cb(B,v_,z,{name:p}),lb[o]=z,v}(Array,"Array",function(r,o){H4(this,{type:gF,target:V4(r),index:0,kind:o})},function(){var r=_F(this),o=r.target,a=r.kind,c=r.index++;return!o||c>=o.length?(r.target=void 0,{value:void 0,done:!0}):"keys"==a?{value:c,done:!1}:"values"==a?{value:o[c],done:!1}:{value:[c,o[c]],done:!1}},"values"),Zu=JM.Arguments=JM.Array;if($M("keys"),$M("values"),$M("entries"),Q4&&"values"!==Zu.name)try{j4(Zu,"name",{value:"values"})}catch{}var uf=un("span").classList,NR=uf&&uf.constructor&&uf.constructor.prototype,qC=H,ub={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},e2=NR===Object.prototype?void 0:NR,A_=MR,Us=Wn,db=No,YC=db("iterator"),CA=db("toStringTag"),IA=A_.values,y_=function(r,o){if(r){if(r[YC]!==IA)try{Us(r,YC,IA)}catch{r[YC]=IA}if(r[CA]||Us(r,CA,o),ub[o])for(var a in A_)if(r[a]!==A_[a])try{Us(r,a,A_[a])}catch{r[a]=A_[a]}}};for(var xR in ub)y_(qC[xR]&&qC[xR].prototype,xR);y_(e2,"DOMTokenList");var t2=ot,NQ=qt,n2=Qh,$C=function(r,o,a){var c,p;return n2&&t2(c=o.constructor)&&c!==a&&NQ(p=c.prototype)&&p!==a.prototype&&n2(r,p),r},vF=ul,JC=function(r,o){return void 0===r?arguments.length<2?"":o:vF(r)},r2=qt,Om=Wn,LR=le("".replace),BR=String(Error("zxcasd").stack),pb=/\n\s*at [^:]*:[^\n]*/,G4=pb.test(BR),FR=function(r,o){if(G4&&"string"==typeof r)for(;o--;)r=LR(r,pb,"");return r},AF=ye,yF=!M(function(){var r=Error("a");return!("stack"in r)||(Object.defineProperty(r,"stack",AF(1,7)),7!==r.stack)}),UR=Pn,wA=_o,hb=Wn,o2=Dr,VR=Qh,jR=Gd,s2=$C,XC=JC,ZC=function(r,o){r2(o)&&"cause"in o&&Om(r,"cause",o.cause)},E_=FR,QR=yF,fb=ou,Or=kl,eI=function(r,o,a,c){var p=c?2:1,_=r.split("."),m=_[_.length-1],A=UR.apply(null,_);if(A){var v=A.prototype;if(wA(v,"cause")&&delete v.cause,!a)return A;var S=UR("Error"),I=o(function(R,O){var B=XC(c?O:R,void 0),q=c?new A(R):new A;return void 0!==B&&hb(q,"message",B),QR&&hb(q,"stack",E_(q.stack,2)),this&&o2(v,this)&&s2(q,this,I),arguments.length>p&&ZC(q,arguments[p]),q});I.prototype=v,"Error"!==m&&(VR?VR(I,S):jR(I,S,{name:!0})),jR(I,A);try{v.name!==m&&hb(v,"name",m),v.constructor=I}catch{}return I}},nI=H.WebAssembly,mb=7!==Error("e",{cause:7}).cause,km=function(r,o){var a={};a[r]=eI(r,o,mb),fb({global:!0,forced:mb},a)},rI=function(r,o){if(nI&&nI[r]){var a={};a[r]=eI("WebAssembly."+r,o,mb),fb({target:"WebAssembly",stat:!0,forced:mb},a)}};km("Error",function(r){return function(o){return Or(r,this,arguments)}}),km("EvalError",function(r){return function(o){return Or(r,this,arguments)}}),km("RangeError",function(r){return function(o){return Or(r,this,arguments)}}),km("ReferenceError",function(r){return function(o){return Or(r,this,arguments)}}),km("SyntaxError",function(r){return function(o){return Or(r,this,arguments)}}),km("TypeError",function(r){return function(o){return Or(r,this,arguments)}}),km("URIError",function(r){return function(o){return Or(r,this,arguments)}}),rI("CompileError",function(r){return function(o){return Or(r,this,arguments)}}),rI("LinkError",function(r){return function(o){return Or(r,this,arguments)}}),rI("RuntimeError",function(r){return function(o){return Or(r,this,arguments)}});let iI=!0,oI=!0;function TA(r,o,a){const c=r.match(o);return c&&c.length>=a&&parseInt(c[a],10)}function Pm(r,o,a){if(!r.RTCPeerConnection)return;const c=r.RTCPeerConnection.prototype,p=c.addEventListener;c.addEventListener=function(m,A){if(m!==o)return p.apply(this,arguments);const v=S=>{const I=a(S);I&&(A.handleEvent?A.handleEvent(I):A(I))};return this._eventMap=this._eventMap||{},this._eventMap[o]||(this._eventMap[o]=new Map),this._eventMap[o].set(A,v),p.apply(this,[m,v])};const _=c.removeEventListener;c.removeEventListener=function(m,A){if(m!==o||!this._eventMap||!this._eventMap[o])return _.apply(this,arguments);if(!this._eventMap[o].has(A))return _.apply(this,arguments);const v=this._eventMap[o].get(A);return this._eventMap[o].delete(A),0===this._eventMap[o].size&&delete this._eventMap[o],0===Object.keys(this._eventMap).length&&delete this._eventMap,_.apply(this,[m,v])},Object.defineProperty(c,"on"+o,{get(){return this["_on"+o]},set(m){this["_on"+o]&&(this.removeEventListener(o,this["_on"+o]),delete this["_on"+o]),m&&this.addEventListener(o,this["_on"+o]=m)},enumerable:!0,configurable:!0})}function HR(r){return"boolean"!=typeof r?new Error("Argument type: "+typeof r+". Please use a boolean."):(iI=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function a2(r){return"boolean"!=typeof r?new Error("Argument type: "+typeof r+". Please use a boolean."):(oI=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function GR(){if("object"==typeof window){if(iI)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function RA(r,o){oI&&console.warn(r+" is deprecated, please use "+o+" instead.")}function DA(r){const o={browser:null,version:null};if(void 0===r||!r.navigator)return o.browser="Not a browser.",o;const{navigator:a}=r;if(a.mozGetUserMedia)o.browser="firefox",o.version=TA(a.userAgent,/Firefox\/(\d+)\./,1);else if(a.webkitGetUserMedia||!1===r.isSecureContext&&r.webkitRTCPeerConnection&&!r.RTCIceGatherer)o.browser="chrome",o.version=TA(a.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.mediaDevices&&a.userAgent.match(/Edge\/(\d+).(\d+)$/))o.browser="edge",o.version=TA(a.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!r.RTCPeerConnection||!a.userAgent.match(/AppleWebKit\/(\d+)\./))return o.browser="Not a supported browser.",o;o.browser="safari",o.version=TA(a.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype}return o}function ih(r){return"[object Object]"===Object.prototype.toString.call(r)}function WR(r){var o;return ih(r)?nf(o=Object.keys(r)).call(o,function(a,c){const p=ih(r[c]),_=p?WR(r[c]):r[c],m=p&&!Object.keys(_).length;return void 0===_||m?a:Object.assign(a,{[c]:_})},{}):r}function Mm(r,o,a){const c=a?"outbound-rtp":"inbound-rtp",p=new Map;if(null===o)return p;const _=[];return r.forEach(m=>{"track"===m.type&&m.trackIdentifier===o.id&&_.push(m)}),_.forEach(m=>{r.forEach(A=>{A.type===c&&A.trackId===m.id&&function v(S,I,R){I&&!R.has(I.id)&&(R.set(I.id,I),Object.keys(I).forEach(O=>{O.endsWith("Id")?v(S,S.get(I[O]),R):O.endsWith("Ids")&&I[O].forEach(B=>{v(S,S.get(B),R)})}))}(r,A,p)})}),p}var OA=Zp,gb=(0,tA.exports)("keys"),_b=function(r){return gb[r]||(gb[r]=OA(r))},ip=!rs(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),kA=$r,fc=Gi,PA=bs,KR=nn,op=ip,io=_b("IE_PROTO"),df=kA.Object,b_=df.prototype,oh=op?df.getPrototypeOf:function(r){var o=KR(r);if(fc(o,io))return o[io];var a=o.constructor;return PA(a)&&o instanceof a?a.prototype:o instanceof df?b_:null},S_=bs,xm=$r.String,sh=$r.TypeError,pf=Fo,Lm=ll,qR=Object.setPrototypeOf||("__proto__"in{}?function(){var r,o=!1,a={};try{(r=pf(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(a,[]),o=a instanceof Array}catch{}return function(c,p){return Lm(c),function(r){if("object"==typeof r||S_(r))return r;throw sh("Can't set "+xm(r)+" as a prototype")}(p),o?r(c,p):c.__proto__=p,c}}():void 0),MA={},YR=p_,$R=Math.max,JR=Math.min,vb=function(r,o){var a=YR(r);return a<0?$R(a+o,0):JR(a,o)},EF=Jd,bF=vb,W4=np,SF=function(r){return function(o,a,c){var p,_=EF(o),m=W4(_),A=bF(c,m);if(r&&a!=a){for(;m>A;)if((p=_[A++])!=p)return!0}else for(;m>A;A++)if((r||A in _)&&_[A]===a)return r||A||0;return!r&&-1}},Kn={includes:SF(!0),indexOf:SF(!1)},XR={},ah=Gi,fn=Jd,Ab=Kn.indexOf,sI=XR,jt=Fo([].push),Yt=function(r,o){var a,c=fn(r),p=0,_=[];for(a in c)!ah(sI,a)&&ah(c,a)&&jt(_,a);for(;o.length>p;)ah(c,a=o[p++])&&(~Ab(_,a)||jt(_,a));return _},Ui=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],l2=Yt,za=Ui.concat("length","prototype");MA.f=Object.getOwnPropertyNames||function(r){return l2(r,za)};var Da={};Da.f=Object.getOwnPropertySymbols;var yb=Ml,qa=MA,Eb=Da,hf=ll,u2=Fo([].concat),eo=yb("Reflect","ownKeys")||function(r){var o=qa.f(hf(r)),a=Eb.f;return a?u2(o,a(r)):o},bb=Gi,d2=eo,ZR=e_,eD=eh,NA={},Cr=Yt,C_=Ui,Vc=Object.keys||function(r){return Cr(r,C_)},Sb=eh,tD=ll,cI=Jd,xA=Vc;NA.f=xc&&!kM?Object.defineProperties:function(r,o){tD(r);for(var a,c=cI(o),p=xA(o),_=p.length,m=0;_>m;)Sb.f(r,a=p[m++],c[a]);return r};var I_,w_=Ml("document","documentElement"),Cb=ll,lI=NA,Bm=Ui,LA=XR,Os=w_,T_=$1,nD=_b("IE_PROTO"),BA=function(){},ch=function(r){return"<script>"+r+"<\/script>"},R_=function(r){r.write(ch("")),r.close();var o=r.parentWindow.Object;return r=null,o},FA=function(){try{I_=new ActiveXObject("htmlfile")}catch{}var r,o;FA=typeof document<"u"?document.domain&&I_?R_(I_):((o=T_("iframe")).style.display="none",Os.appendChild(o),o.src=String("javascript:"),(r=o.contentWindow.document).open(),r.write(ch("document.F=Object")),r.close(),r.F):R_(I_);for(var a=Bm.length;a--;)delete FA.prototype[Bm[a]];return FA()};LA[nD]=!0;var ff=Object.create||function(r,o){var a;return null!==r?(BA.prototype=Cb(r),a=new BA,BA.prototype=null,a[nD]=r):a=FA(),void 0===o?a:lI.f(a,o)},CF=Fo("".replace),p2=String(Error("zxcasd").stack),uI=/\n\s*at [^:]*:[^\n]*/,rD=uI.test(p2),D_=Pl,h2=u_,ds={},iD=ds,Ib=us("iterator"),oD=Array.prototype,sD=function(r){return void 0!==r&&(iD.Array===r||oD[Ib]===r)},f2={};f2[us("toStringTag")]="z";var Js="[object z]"===String(f2),ps=$r,mf=Js,lh=bs,dI=qp,Ya=us("toStringTag"),aD=ps.Object,cD="Arguments"==dI(function(){return arguments}()),uh=mf?dI:function(r){var o,a,c;return void 0===r?"Undefined":null===r?"Null":"string"==typeof(a=function(p,_){try{return p[_]}catch{}}(o=aD(r),Ya))?a:cD?dI(o):"Object"==(c=dI(o))&&lh(o.callee)?"Arguments":c},gf=uh,is=pC,ed=ds,IF=us("iterator"),UA=function(r){if(null!=r)return is(r,IF)||is(r,"@@iterator")||ed[gf(r)]},vu=Lc,sp=hc,Bl=ll,lD=Am,m2=UA,wF=$r.TypeError,pI=function(r,o){var a=arguments.length<2?m2(r):o;if(sp(a))return Bl(vu(a,r));throw wF(lD(r)+" is not iterable")},hI=Lc,g2=ll,fI=pC,VA=function(r,o,a){var c,p;g2(r);try{if(!(c=fI(r,"return"))){if("throw"===o)throw a;return a}c=hI(c,r)}catch(_){p=!0,c=_}if("throw"===o)throw a;if(p)throw c;return g2(c),a},uD=ep,wb=Lc,dD=ll,_2=Am,v2=sD,ap=np,pD=Nc,A2=pI,bn=UA,td=VA,_i=$r.TypeError,Tb=function(r,o){this.stopped=r,this.result=o},mI=Tb.prototype,jA=function(r,o,a){var c,p,_,m,A,v,S,R=!(!a||!a.AS_ENTRIES),O=!(!a||!a.IS_ITERATOR),B=!(!a||!a.INTERRUPTED),q=uD(o,a&&a.that),z=function(de){return c&&td(c,"normal",de),new Tb(!0,de)},te=function(de){return R?(dD(de),B?q(de[0],de[1],z):q(de[0],de[1])):B?q(de,z):q(de)};if(O)c=r;else{if(!(p=bn(r)))throw _i(_2(r)+" is not iterable");if(v2(p)){for(_=0,m=ap(r);m>_;_++)if((A=te(r[_]))&&pD(mI,A))return A;return new Tb(!1)}c=A2(r,p)}for(v=c.next;!(S=wb(v,c)).done;){try{A=te(S.value)}catch(de){td(c,"throw",de)}if("object"==typeof A&&A&&pD(mI,A))return A}return new Tb(!1)},hD=uh,fD=$r.String,dh=function(r){if("Symbol"===hD(r))throw TypeError("Cannot convert a Symbol value to a string");return fD(r)},mD=dh,_f=Xu,gD=!rs(function(){var r=Error("a");return!("stack"in r)||(Object.defineProperty(r,"stack",_f(1,7)),7!==r.stack)}),_D=Yn,Rb=$r,y2=Nc,TF=oh,gI=qR,_I=ff,Db=u_,QA=Xu,b2=function(r,o){if(rD&&"string"==typeof r)for(;o--;)r=CF(r,uI,"");return r},Au=function(r,o){D_(o)&&"cause"in o&&h2(r,"cause",o.cause)},vD=jA,AD=function(r,o){return void 0===r?arguments.length<2?"":o:mD(r)},HA=gD,RF=us("toStringTag"),$o=Rb.Error,DF=[].push,GA=function(r,o){var a,c=arguments.length>2?arguments[2]:void 0,p=y2(vI,this);gI?a=gI(new $o,p?TF(this):vI):(a=p?this:_I(vI),Db(a,RF,"Error")),void 0!==o&&Db(a,"message",AD(o)),HA&&Db(a,"stack",b2(a.stack,1)),Au(a,c);var _=[];return vD(r,DF,{that:_}),Db(a,"errors",_),a};gI?gI(GA,$o):function(r,o,a){for(var c=d2(o),p=eD.f,_=ZR.f,m=0;m<c.length;m++){var A=c[m];bb(r,A)||a&&bb(a,A)||p(r,A,_(o,A))}}(GA,$o,{name:!0});var vI=GA.prototype=_I($o.prototype,{constructor:QA(1,GA),message:QA(1,""),name:QA(1,"AggregateError")});_D({global:!0},{AggregateError:GA});var yD=bs,AI=H1,ED=Fo(Function.toString);yD(AI.inspectSource)||(AI.inspectSource=function(r){return ED(r)});var WA,KA,Ob,yI=AI.inspectSource,bD=yI,Fm=$r.WeakMap,OF=bs(Fm)&&/native code/.test(bD(Fm)),Um=Fo,K4=Pl,hl=u_,C2=Gi,Pb=_b,kF=XR,pr="Object already initialized",SD=$r.TypeError;if(OF||H1.state){var mc=H1.state||(H1.state=new(0,$r.WeakMap)),jc=Um(mc.get),qA=Um(mc.has),EI=Um(mc.set);WA=function(r,o){if(qA(mc,r))throw new SD(pr);return o.facade=r,EI(mc,r,o),o},KA=function(r){return jc(mc,r)||{}},Ob=function(r){return qA(mc,r)}}else{var ph=Pb("state");kF[ph]=!0,WA=function(r,o){if(C2(r,ph))throw new SD(pr);return o.facade=r,hl(r,ph,o),o},KA=function(r){return C2(r,ph)?r[ph]:{}},Ob=function(r){return C2(r,ph)}}var so,nd,CD,Vm={set:WA,get:KA,has:Ob,enforce:function(r){return Ob(r)?KA(r):WA(r,{})},getterFor:function(r){return function(o){var a;if(!K4(o)||(a=KA(o)).type!==r)throw SD("Incompatible receiver, "+r+" required");return a}}},ID=xc,gc=Function.prototype,fl=ID&&Object.getOwnPropertyDescriptor,O_=Gi(gc,"name"),w2={EXISTS:O_,PROPER:O_&&"something"===function(){}.name,CONFIGURABLE:O_&&(!ID||ID&&fl(gc,"name").configurable)},YA=u_,k_=function(r,o,a,c){c&&c.enumerable?r[o]=a:YA(r,o,a)},$A=rs,T2=bs,Mb=ff,bI=oh,P_=k_,Nb=us("iterator"),xb=!1;[].keys&&("next"in(CD=[].keys())?(nd=bI(bI(CD)))!==Object.prototype&&(so=nd):xb=!0);var wD=null==so||$A(function(){var r={};return so[Nb].call(r)!==r});T2((so=wD?{}:Mb(so))[Nb])||P_(so,Nb,function(){return this});var rd={IteratorPrototype:so,BUGGY_SAFARI_ITERATORS:xb},fa=uh,vf=Js,cp=eh.f,JA=u_,jm=Gi,XA=Js?{}.toString:function(){return"[object "+fa(this)+"]"},Qm=us("toStringTag"),Af=function(r,o,a,c){if(r){var p=a?r:r.prototype;jm(p,Qm)||cp(p,Qm,{configurable:!0,value:o}),c&&!vf&&JA(p,"toString",XA)}},TD=rd.IteratorPrototype,RD=ff,DD=Xu,ZA=Af,R2=ds,D2=function(){return this},MF=function(r,o,a,c){var p=o+" Iterator";return r.prototype=RD(TD,{next:DD(+!c,a)}),ZA(r,p,!1,!0),R2[p]=D2,r},O2=Yn,yf=Lc,OD=MF,ey=oh,SI=Af,CI=k_,II=ds,Lb=w2.PROPER,ty=rd.BUGGY_SAFARI_ITERATORS,ny=us("iterator"),M_="values",wI="entries",PD=function(){return this},TI=function(r,o,a,c,p,_,m){OD(a,o,c);var A,v,S,I=function(de){if(de===p&&z)return z;if(!ty&&de in B)return B[de];switch(de){case"keys":case M_:case wI:return function(){return new a(this,de)}}return function(){return new a(this)}},R=o+" Iterator",O=!1,B=r.prototype,q=B[ny]||B["@@iterator"]||p&&B[p],z=!ty&&q||I(p),te="Array"==o&&B.entries||q;if(te&&(A=ey(te.call(new r)))!==Object.prototype&&A.next&&(SI(A,R,!0,!0),II[R]=PD),Lb&&p==M_&&q&&q.name!==M_&&(O=!0,z=function(){return yf(q,this)}),p)if(v={values:I(M_),keys:_?z:I("keys"),entries:I(wI)},m)for(S in v)(ty||O||!(S in B))&&CI(B,S,v[S]);else O2({target:o,proto:!0,forced:ty||O},v);return m&&B[ny]!==z&&CI(B,ny,z,{name:p}),II[o]=z,v},MD=Jd,Hm=ds,xD=TI,ry="Array Iterator",RI=Vm.set,NF=Vm.getterFor(ry);xD(Array,"Array",function(r,o){RI(this,{type:ry,target:MD(r),index:0,kind:o})},function(){var r=NF(this),o=r.target,a=r.kind,c=r.index++;return!o||c>=o.length?(r.target=void 0,{value:void 0,done:!0}):"keys"==a?{value:c,done:!1}:"values"==a?{value:o[c],done:!1}:{value:[c,o[c]],done:!1}},"values"),Hm.Arguments=Hm.Array;var LD=$r.Promise,k2=k_,Bb=function(r,o,a){for(var c in o)a&&a.unsafe&&r[c]?r[c]=o[c]:k2(r,c,o[c],a);return r},P2=Ml,Fl=eh,M2=xc,DI=us("species"),xF=Nc,LF=$r.TypeError,N_=function(r,o){if(xF(o,r))return r;throw LF("Incorrect invocation")},iy=us("iterator"),BD=!1;try{var Eu=0,ct={next:function(){return{done:!!Eu++}},return:function(){BD=!0}};ct[iy]=function(){return this},Array.from(ct,function(){throw 2})}catch{}var N2=Fo,BF=rs,x2=bs,FF=uh,UF=yI,id=function(){},Gm=[],OI=Ml("Reflect","construct"),od=/^\s*(?:class|function)\b/,Ef=N2(od.exec),Fb=!od.exec(id),Ub=function(r){if(!x2(r))return!1;try{return OI(id,Gm,r),!0}catch{return!1}},Qc=function(r){if(!x2(r))return!1;switch(FF(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Fb||!!Ef(od,UF(r))}catch{return!0}};Qc.sham=!0;var oy,Wm,x_,kI,sy=!OI||BF(function(){var r;return Ub(Ub.call)||!Ub(Object)||!Ub(function(){r=!0})||r})?Qc:Ub,Km=sy,sd=Am,FD=$r.TypeError,UD=ll,zm=us("species"),VD=function(r,o){var a,c=UD(r).constructor;return void 0===c||null==(a=UD(c)[zm])?o:function(r){if(Km(r))return r;throw FD(sd(r)+" is not a constructor")}(a)},jD=Fo([].slice),QD=/(?:ipad|iphone|ipod).*applewebkit/i.test(Jh),ml=$r,Vb=Ra,HD=ep,PI=bs,L2=Gi,VF=rs,ay=w_,B2=jD,GD=$1,F2=QD,U2=mu,WD=ml.setImmediate,MI=ml.clearImmediate,jF=ml.process,KD=ml.Dispatch,V2=ml.Function,QF=ml.MessageChannel,j2=ml.String,zD=0,jb={};try{oy=ml.location}catch{}var NI=function(r){if(L2(jb,r)){var o=jb[r];delete jb[r],o()}},qD=function(r){return function(){NI(r)}},L_=function(r){NI(r.data)},B_=function(r){ml.postMessage(j2(r),oy.protocol+"//"+oy.host)};WD&&MI||(WD=function(r){var o=B2(arguments,1);return jb[++zD]=function(){Vb(PI(r)?r:V2(r),void 0,o)},Wm(zD),zD},MI=function(r){delete jb[r]},U2?Wm=function(r){jF.nextTick(qD(r))}:KD&&KD.now?Wm=function(r){KD.now(qD(r))}:QF&&!F2?(kI=(x_=new QF).port2,x_.port1.onmessage=L_,Wm=HD(kI.postMessage,kI)):ml.addEventListener&&PI(ml.postMessage)&&!ml.importScripts&&oy&&"file:"!==oy.protocol&&!VF(B_)?(Wm=B_,ml.addEventListener("message",L_,!1)):Wm="onreadystatechange"in GD("script")?function(r){ay.appendChild(GD("script")).onreadystatechange=function(){ay.removeChild(this),NI(r)}}:function(r){setTimeout(qD(r),0)});var qm,bu,Ym,lp,cy,xI,YD,Q2,ly={set:WD,clear:MI},H2=$r,Qb=/ipad|iphone|ipod/i.test(Jh)&&void 0!==H2.Pebble,G2=/web0s(?!.*chrome)/i.test(Jh),hh=$r,LI=ep,$D=ly.set,z4=QD,JD=Qb,GF=G2,gl=mu,uy=hh.MutationObserver||hh.WebKitMutationObserver,F_=hh.document,$m=hh.process,dy=hh.Promise,py=(0,e_.f)(hh,"queueMicrotask"),Yi=py&&py.value;Yi||(qm=function(){var r,o;for(gl&&(r=$m.domain)&&r.exit();bu;){o=bu.fn,bu=bu.next;try{o()}catch(a){throw bu?lp():Ym=void 0,a}}Ym=void 0,r&&r.enter()},z4||gl||GF||!uy||!F_?!JD&&dy&&dy.resolve?((YD=dy.resolve(void 0)).constructor=dy,Q2=LI(YD.then,YD),lp=function(){Q2(qm)}):gl?lp=function(){$m.nextTick(qm)}:($D=LI($D,hh),lp=function(){$D(qm)}):(cy=!0,xI=F_.createTextNode(""),new uy(qm).observe(xI,{characterData:!0}),lp=function(){xI.data=cy=!cy}));var XD=Yi||function(r){var o={fn:r,next:void 0};Ym&&(Ym.next=o),bu||(bu=o,lp()),Ym=o},Su={},_l=hc,BI=function(r){var o,a;this.promise=new r(function(c,p){if(void 0!==o||void 0!==a)throw TypeError("Bad Promise constructor");o=c,a=p}),this.resolve=_l(o),this.reject=_l(a)};Su.f=function(r){return new BI(r)};var K2=ll,fh=Pl,Hb=Su,vl=function(r,o){if(K2(r),fh(o)&&o.constructor===r)return o;var a=Hb.f(r);return(0,a.resolve)(o),a.promise},ZD=$r,U_=function(r){try{return{error:!1,value:r()}}catch(o){return{error:!0,value:o}}},up=function(){this.head=null,this.tail=null};up.prototype={add:function(r){var o={item:r,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var r=this.head;if(r)return this.head=r.next,this.tail===r&&(this.tail=null),r.item}};var _c,Gb,Jm,hy="object"==typeof window,fy=Yn,ad=$r,Wb=Ml,Cu=Lc,FI=LD,eO=Bb,tO=Af,UI=hc,VI=bs,bf=Pl,V_=N_,jI=yI,vo=jA,Oa=VD,Ao=ly.set,nO=XD,z2=vl,my=Su,Xm=U_,j_=up,$a=Vm,gy=ef,KF=hy,QI=mu,zF=Xd,qF=us("species"),cd="Promise",Kb=$a.getterFor(cd),_y=$a.set,YF=$a.getterFor(cd),mh=FI,zb=FI&&FI.prototype,q2=ad.TypeError,iO=ad.document,oO=ad.process,Zm=my.f,Q_=Zm,HI=!!(iO&&iO.createEvent&&ad.dispatchEvent),qb=VI(ad.PromiseRejectionEvent),GI="unhandledrejection",sO=gy(cd,function(){var r=jI(mh),o=r!==String(mh);if(!o&&66===zF||!zb.finally)return!0;if(zF>=51&&/native code/.test(r))return!1;var a=new mh(function(p){p(1)}),c=function(p){p(function(){},function(){})};return(a.constructor={})[qF]=c,!(a.then(function(){})instanceof c)||!o&&KF&&!qb}),aO=sO||!function(r,o){if(!o&&!BD)return!1;var a=!1;try{var c={};c[iy]=function(){return{next:function(){return{done:a=!0}}}},r(c)}catch{}return a}(function(r){mh.all(r).catch(function(){})}),Y2=function(r){var o;return!(!bf(r)||!VI(o=r.then))&&o},WI=function(r,o){var a,c,p,_=o.value,m=1==o.state,A=m?r.ok:r.fail,v=r.resolve,S=r.reject,I=r.domain;try{A?(m||(2===o.rejection&&$F(o),o.rejection=1),!0===A?a=_:(I&&I.enter(),a=A(_),I&&(I.exit(),p=!0)),a===r.promise?S(q2("Promise-chain cycle")):(c=Y2(a))?Cu(c,a,v,S):v(a)):S(_)}catch(R){I&&!p&&I.exit(),S(R)}},eg=function(r,o){r.notified||(r.notified=!0,nO(function(){for(var a,c=r.reactions;a=c.get();)WI(a,r);r.notified=!1,o&&!r.rejection&&cO(r)}))},$2=function(r,o,a){var c,p;HI?((c=iO.createEvent("Event")).promise=o,c.reason=a,c.initEvent(r,!1,!0),ad.dispatchEvent(c)):c={promise:o,reason:a},!qb&&(p=ad["on"+r])?p(c):r===GI&&function(r,o){var a=ZD.console;a&&a.error&&(1==arguments.length?a.error(r):a.error(r,o))}("Unhandled promise rejection",a)},cO=function(r){Cu(Ao,ad,function(){var o,a=r.facade,c=r.value;if(Yb(r)&&(o=Xm(function(){QI?oO.emit("unhandledRejection",c,a):$2(GI,a,c)}),r.rejection=QI||Yb(r)?2:1,o.error))throw o.value})},Yb=function(r){return 1!==r.rejection&&!r.parent},$F=function(r){Cu(Ao,ad,function(){var o=r.facade;QI?oO.emit("rejectionHandled",o):$2("rejectionhandled",o,r.value)})},vy=function(r,o,a){return function(c){r(o,c,a)}},$b=function(r,o,a){r.done||(r.done=!0,a&&(r=a),r.value=o,r.state=2,eg(r,!0))},KI=function(r,o,a){if(!r.done){r.done=!0,a&&(r=a);try{if(r.facade===o)throw q2("Promise can't be resolved itself");var c=Y2(o);c?nO(function(){var p={done:!1};try{Cu(c,o,vy(KI,p,r),vy($b,p,r))}catch(_){$b(p,_,r)}}):(r.value=o,r.state=1,eg(r,!1))}catch(p){$b({done:!1},p,r)}}};sO&&(zb=(mh=function(r){V_(this,zb),UI(r),Cu(_c,this);var o=Kb(this);try{r(vy(KI,o),vy($b,o))}catch(a){$b(o,a)}}).prototype,(_c=function(r){_y(this,{type:cd,done:!1,notified:!1,parent:!1,reactions:new j_,rejection:!1,state:0,value:void 0})}).prototype=eO(zb,{then:function(r,o){var a=YF(this),c=Zm(Oa(this,mh));return a.parent=!0,c.ok=!VI(r)||r,c.fail=VI(o)&&o,c.domain=QI?oO.domain:void 0,0==a.state?a.reactions.add(c):nO(function(){WI(c,a)}),c.promise},catch:function(r){return this.then(void 0,r)}}),Gb=function(){var r=new _c,o=Kb(r);this.promise=r,this.resolve=vy(KI,o),this.reject=vy($b,o)},my.f=Zm=function(r){return r===mh||r===Jm?new Gb(r):Q_(r)}),fy({global:!0,wrap:!0,forced:sO},{Promise:mh}),tO(mh,cd,!1,!0),function(r){var o=P2(r);M2&&o&&!o[DI]&&(0,Fl.f)(o,DI,{configurable:!0,get:function(){return this}})}(cd),Jm=Wb(cd),fy({target:cd,stat:!0,forced:sO},{reject:function(r){var o=Zm(this);return Cu(o.reject,void 0,r),o.promise}}),fy({target:cd,stat:!0,forced:!0},{resolve:function(r){return z2(this===Jm?mh:this,r)}}),fy({target:cd,stat:!0,forced:aO},{all:function(r){var o=this,a=Zm(o),c=a.resolve,p=a.reject,_=Xm(function(){var m=UI(o.resolve),A=[],v=0,S=1;vo(r,function(I){var R=v++,O=!1;S++,Cu(m,o,I).then(function(B){O||(O=!0,A[R]=B,--S||c(A))},p)}),--S||c(A)});return _.error&&p(_.value),a.promise},race:function(r){var o=this,a=Zm(o),c=a.reject,p=Xm(function(){var _=UI(o.resolve);vo(r,function(m){Cu(_,o,m).then(a.resolve,c)})});return p.error&&c(p.value),a.promise}});var J2=Lc,X2=hc,lO=Su,Jb=U_,hs=jA;Yn({target:"Promise",stat:!0},{allSettled:function(r){var o=this,a=lO.f(o),c=a.resolve,p=a.reject,_=Jb(function(){var m=X2(o.resolve),A=[],v=0,S=1;hs(r,function(I){var R=v++,O=!1;S++,J2(m,o,I).then(function(B){O||(O=!0,A[R]={status:"fulfilled",value:B},--S||c(A))},function(B){O||(O=!0,A[R]={status:"rejected",reason:B},--S||c(A))})}),--S||c(A)});return _.error&&p(_.value),a.promise}});var uO=hc,dO=Ml,Xb=Lc,pO=Su,hO=U_,Z2=jA,Zb="No one promise resolved";Yn({target:"Promise",stat:!0},{any:function(r){var o=this,a=dO("AggregateError"),c=pO.f(o),p=c.resolve,_=c.reject,m=hO(function(){var A=uO(o.resolve),v=[],S=0,I=1,R=!1;Z2(r,function(O){var B=S++,q=!1;I++,Xb(A,o,O).then(function(z){q||R||(R=!0,p(z))},function(z){q||R||(q=!0,v[B]=z,--I||_(new a(v,Zb)))})}),--I||_(new a(v,Zb))});return m.error&&_(m.value),c.promise}});var fO=LD,eN=Ml,tN=bs,nN=VD,rN=vl;Yn({target:"Promise",proto:!0,real:!0,forced:!!fO&&rs(function(){fO.prototype.finally.call({then:function(){}},function(){})})},{finally:function(r){var o=nN(this,eN("Promise")),a=tN(r);return this.then(a?function(c){return rN(o,r()).then(function(){return c})}:r,a?function(c){return rN(o,r()).then(function(){throw c})}:r)}});var Ay=Fo,iN=p_,q4=dh,yy=Yp,mO=Ay("".charAt),JF=Ay("".charCodeAt),tg=Ay("".slice),eS=function(r){return function(o,a){var c,p,_=q4(yy(o)),m=iN(a),A=_.length;return m<0||m>=A?r?"":void 0:(c=JF(_,m))<55296||c>56319||m+1===A||(p=JF(_,m+1))<56320||p>57343?r?mO(_,m):c:r?tg(_,m,m+2):p-56320+(c-55296<<10)+65536}},zI={codeAt:eS(!1),charAt:eS(!0)},Ey=zI.charAt,dp=dh,gO=TI,tS="String Iterator",H_=Vm.set,qI=Vm.getterFor(tS);gO(String,"String",function(r){H_(this,{type:tS,string:dp(r),index:0})},function(){var r,o=qI(this),a=o.string,c=o.index;return c>=a.length?{value:void 0,done:!0}:(r=Ey(a,c),o.index+=r.length,{value:r,done:!1})});var oN=$p.Promise,_O=$r,rS=uh,sN=u_,aN=ds,ld=us("toStringTag");for(var cN in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var lN=_O[cN],ud=lN&&lN.prototype;ud&&rS(ud)!==ld&&sN(ud,ld,cN),aN[cN]=aN.Array}var uN=oN,qn=uN,by=dr,dN=P,vO=Nn,ZF=Ft,eU=JC,YI=Error.prototype.toString,AO=M(function(){if(dN){var r=ZF(Object.defineProperty({},"name",{get:function(){return this===r}}));if("true"!==YI.call(r))return!0}return"2: 1"!==YI.call({message:1,name:2})||"Error"!==YI.call({})})?function(){var r=vO(this),o=eU(r.name,"Error"),a=eU(r.message);return o?a?o+": "+a:o:a}:YI,yO={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},Y4=ou,$I=Pn,iS=M,tU=Ft,hN=ye,ri=ts.f,nU=$E.f,EO=Ud.exports,JI=_o,rU=Zf,bO=Nn,SO=AO,CO=JC,G_=yO,XI=FR,oS=Zc,sS=P,ng="DOMException",W_=$I("Error"),ka=$I(ng)||function(){try{(new($I("MessageChannel")||function(r){try{if(by)return Function('return require("'+r+'")')()}catch{}}("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(r){if("DATA_CLONE_ERR"==r.name&&25==r.code)return r.constructor}}(),aS=W_.prototype,Cf=oS.set,mN=oS.getterFor(ng),gN="stack"in W_(ng),ZI=function(r){return JI(G_,r)&&G_[r].m?G_[r].c:0},wO=function(){rU(this,ew);var r=arguments.length,o=CO(r<1?void 0:arguments[0]),a=CO(r<2?void 0:arguments[1],"Error"),c=ZI(a);if(Cf(this,{type:ng,name:a,message:o,code:c}),sS||(this.name=a,this.message=o,this.code=c),gN){var p=W_(o);p.name=ng,ri(this,"stack",hN(1,XI(p.stack,1)))}},ew=wO.prototype=tU(aS),TO=function(r){return{enumerable:!0,configurable:!0,get:r}},cS=function(r){return TO(function(){return mN(this)[r]})};sS&&nU(ew,{name:cS("name"),message:cS("message"),code:cS("code")}),ri(ew,"constructor",hN(1,wO));var Sy=iS(function(){return!(new ka instanceof W_)}),RO=Sy||iS(function(){return aS.toString!==SO||"2: 1"!==String(new ka(1,2))}),_N=Sy||iS(function(){return 25!==new ka(1,"DataCloneError").code});Y4({global:!0,forced:Sy},{DOMException:Sy?wO:ka});var K_=$I(ng),rg=K_.prototype;for(var Iu in RO&&ka===K_&&EO(rg,"toString",SO),_N&&sS&&ka===K_&&ri(rg,"code",TO(function(){return ZI(bO(this).name)})),G_)if(JI(G_,Iu)){var dd=G_[Iu],gh=dd.s,tw=hN(6,dd.c);JI(K_,gh)||ri(K_,gh,tw),JI(rg,gh)||ri(rg,gh,tw)}var nw=ou,ig=Pn,If=ye,z_=ts.f,lS=_o,vN=Zf,AN=$C,yN=JC,uS=yO,DO=FR,og="DOMException",ma=ig("Error"),rw=ig(og),iw=function(){vN(this,iU);var r=arguments.length,o=yN(r<1?void 0:arguments[0]),a=yN(r<2?void 0:arguments[1],"Error"),c=new rw(o,a),p=ma(o);return p.name=og,z_(c,"stack",If(1,DO(p.stack,1))),AN(c,this,iw),c},iU=iw.prototype=rw.prototype,$4="stack"in ma(og),J4="stack"in new rw(1,2),oU=$4&&!J4;nw({global:!0,forced:oU},{DOMException:oU?iw:rw});var ow=ig(og),EN=ow.prototype;if(EN.constructor!==ow)for(var pd in z_(EN,"constructor",If(1,ow)),uS)if(lS(uS,pd)){var OO=uS[pd],sw=OO.s;lS(ow,sw)||z_(ow,sw,If(6,OO.c))}var aw="DOMException";CE(Pn(aw),aw);var _h=le,cw=Ud.exports,dS=gA,Cy=M,lw=No,uw=Wn,dw=lw("species"),q_=RegExp.prototype,vc=le,sU=jh,kO=ul,X4=Je,bN=vc("".charAt),SN=vc("".charCodeAt),aU=vc("".slice),PO=function(r){return function(o,a){var c,p,_=kO(X4(o)),m=sU(a),A=_.length;return m<0||m>=A?r?"":void 0:(c=SN(_,m))<55296||c>56319||m+1===A||(p=SN(_,m+1))<56320||p>57343?r?bN(_,m):c:r?aU(_,m,m+2):p-56320+(c-55296<<10)+65536}},En=(PO(!1),PO(!0)),Vo=le,tr=ls,Vs=Math.floor,Iy=Vo("".charAt),mn=Vo("".replace),An=Vo("".slice),Al=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Pa=/\$([$&'`]|\d{1,2})/g,er=ae,wy=Nn,sg=ot,MO=Fe,cU=gA,hp=H.TypeError,CN=kl,vh=ae,Ty=le,lU=M,uU=Nn,dU=ot,pU=jh,ga=Wu,fp=ul,Z4=Je,ej=function(r,o,a){return o+(a?En(r,o).length:1)},tj=tt,hU=function(r,o,a,c,p,_){var m=a+r.length,A=c.length,v=Pa;return void 0!==p&&(p=tr(p),v=Al),mn(_,v,function(S,I){var R;switch(Iy(I,0)){case"$":return"$";case"&":return r;case"`":return An(o,0,a);case"'":return An(o,m);case"<":R=p[An(I,1,-1)];break;default:var O=+I;if(0===O)return S;if(O>A){var B=Vs(O/10);return 0===B?S:B<=A?void 0===c[B-1]?Iy(I,1):c[B-1]+Iy(I,1):S}R=c[O-1]}return void 0===R?"":R})},fU=function(r,o){var a=r.exec;if(sg(a)){var c=er(a,r,o);return null!==c&&wy(c),c}if("RegExp"===MO(r))return er(cU,r,o);throw hp("RegExp#exec called on incompatible receiver")},Ah=No("replace"),wu=Math.max,pw=Math.min,IN=Ty([].concat),NO=Ty([].push),Ei=Ty("".indexOf),hw=Ty("".slice),wN="$0"==="a".replace(/./,"$0"),TN=!!/./[Ah]&&""===/./[Ah]("a","$0");!function(r,o,a,c){var p=lw(r),_=!Cy(function(){var S={};return S[p]=function(){return 7},7!=""[r](S)}),m=_&&!Cy(function(){var S=!1,I=/a/;return"split"===r&&((I={}).constructor={},I.constructor[dw]=function(){return I},I.flags="",I[p]=/./[p]),I.exec=function(){return S=!0,null},I[p](""),!S});if(!_||!m||a){var A=_h(/./[p]),v=o(p,""[r],function(S,I,R,O,B){var q=_h(S),z=I.exec;return z===dS||z===q_.exec?_&&!B?{done:!0,value:A(I,R,O)}:{done:!0,value:q(R,I,O)}:{done:!1}});cw(String.prototype,r,v[0]),cw(q_,p,v[1])}c&&uw(q_[p],"sham",!0)}("replace",function(r,o,a){var c=TN?"$":"$0";return[function(p,_){var m=Z4(this),A=null==p?void 0:tj(p,Ah);return A?vh(A,p,m,_):vh(o,fp(m),p,_)},function(p,_){var m=uU(this),A=fp(p);if("string"==typeof _&&-1===Ei(_,c)&&-1===Ei(_,"$<")){var v=a(o,m,A,_);if(v.done)return v.value}var S=dU(_);S||(_=fp(_));var I=m.global;if(I){var R=m.unicode;m.lastIndex=0}for(var O=[];;){var B=fU(m,A);if(null===B||(NO(O,B),!I))break;""===fp(B[0])&&(m.lastIndex=ej(A,ga(m.lastIndex),R))}for(var q,z="",te=0,de=0;de<O.length;de++){for(var ge=fp((B=O[de])[0]),Se=wu(pw(pU(B.index),A.length),0),Me=[],dt=1;dt<B.length;dt++)NO(Me,void 0===(q=B[dt])?q:String(q));var kt=B.groups;if(S){var Mt=IN([ge],Me,Se,A);void 0!==kt&&NO(Mt,kt);var Lt=fp(CN(_,void 0,Mt))}else Lt=hU(ge,A,Se,Me,kt,_);Se>=te&&(z+=hw(A,te,Se)+Lt,te=Se+ge.length)}return z+hw(A,te)}]},!!lU(function(){var r=/./;return r.exec=function(){var o=[];return o.groups={a:"7"},o},"7"!=="".replace(r,"$<a>")})||!wN||TN);var xO=qt,Y_=Fe,ag=No("match"),fw=P,hS=H,Tu=le,Ry=Vg,mw=$C,gw=Wn,LO=ts.f,RN=Dl.f,DN=Dr,BO=ul,_w=hR,Ac=TC,vi=Ud.exports,fs=M,Vi=_o,ks=Zc.enforce,Br=w0,fS=XE,Ru=SR,cg=No("match"),hd=hS.RegExp,lg=hd.prototype,kN=hS.SyntaxError,vw=Tu(_w),yh=Tu(lg.exec),wf=Tu("".charAt),fd=Tu("".replace),Dy=Tu("".indexOf),md=Tu("".slice),FO=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$_=/a/g,mp=/a/g,mU=new hd($_)!==$_,UO=Ac.MISSED_STICKY,VO=Ac.UNSUPPORTED_Y;if(Ry("RegExp",fw&&(!mU||UO||fS||Ru||fs(function(){return mp[cg]=!1,hd($_)!=$_||hd(mp)==mp||"/a/i"!=hd($_,"i")})))){for(var Tf=function(r,o){var a,c,p,_,m,A,v=DN(lg,this),S=function(r){var o;return xO(r)&&(void 0!==(o=r[ag])?!!o:"RegExp"==Y_(r))}(r),I=void 0===o,R=[],O=r;if(!v&&S&&I&&r.constructor===Tf)return r;if((S||DN(lg,r))&&(r=r.source,I&&(o="flags"in O?O.flags:vw(O))),r=void 0===r?"":BO(r),o=void 0===o?"":BO(o),O=r,fS&&"dotAll"in $_&&(c=!!o&&Dy(o,"s")>-1)&&(o=fd(o,/s/g,"")),a=o,UO&&"sticky"in $_&&(p=!!o&&Dy(o,"y")>-1)&&VO&&(o=fd(o,/y/g,"")),Ru&&(r=(_=function(B){for(var q,z=B.length,te=0,de="",ge=[],Se={},Me=!1,dt=!1,kt=0,Mt="";te<=z;te++){if("\\"===(q=wf(B,te)))q+=wf(B,++te);else if("]"===q)Me=!1;else if(!Me)switch(!0){case"["===q:Me=!0;break;case"("===q:yh(FO,md(B,te+1))&&(te+=2,dt=!0),de+=q,kt++;continue;case">"===q&&dt:if(""===Mt||Vi(Se,Mt))throw new kN("Invalid capture group name");Se[Mt]=!0,ge[ge.length]=[Mt,kt],dt=!1,Mt="";continue}dt?Mt+=q:de+=q}return[de,ge]}(r))[0],R=_[1]),m=mw(hd(r,o),v?this:lg,Tf),(c||p||R.length)&&(A=ks(m),c&&(A.dotAll=!0,A.raw=Tf(function(B){for(var q,z=B.length,te=0,de="",ge=!1;te<=z;te++)"\\"!==(q=wf(B,te))?ge||"."!==q?("["===q?ge=!0:"]"===q&&(ge=!1),de+=q):de+="[\\s\\S]":de+=q+wf(B,++te);return de}(r),a)),p&&(A.sticky=!0),R.length&&(A.groups=R)),r!==O)try{gw(m,"source",""===O?"(?:)":O)}catch{}return m},PN=function(r){r in Tf||LO(Tf,r,{configurable:!0,get:function(){return hd[r]},set:function(o){hd[r]=o}})},gU=RN(hd),Ul=0;gU.length>Ul;)PN(gU[Ul++]);lg.constructor=Tf,Tf.prototype=lg,vi(hS,"RegExp",Tf)}Br("RegExp");var NN=Fe,Oy=Zc.get,LN=RegExp.prototype,Ma=H.TypeError;P&&XE&&(0,ts.f)(LN,"dotAll",{configurable:!0,get:function(){if(this!==LN){if("RegExp"===NN(this))return!!Oy(this).dotAll;throw Ma("Incompatible receiver, RegExp required")}}});const Hr=GR;function mi(r,o){const a=r&&r.navigator;if(!a.mediaDevices)return;const c=function(m){if("object"!=typeof m||m.mandatory||m.optional)return m;const A={};return Object.keys(m).forEach(v=>{if("require"===v||"advanced"===v||"mediaSource"===v)return;const S="object"==typeof m[v]?m[v]:{ideal:m[v]};void 0!==S.exact&&"number"==typeof S.exact&&(S.min=S.max=S.exact);const I=function(R,O){return R?R+O.charAt(0).toUpperCase()+O.slice(1):"deviceId"===O?"sourceId":O};if(void 0!==S.ideal){A.optional=A.optional||[];let R={};"number"==typeof S.ideal?(R[I("min",v)]=S.ideal,A.optional.push(R),R={},R[I("max",v)]=S.ideal,A.optional.push(R)):(R[I("",v)]=S.ideal,A.optional.push(R))}void 0!==S.exact&&"number"!=typeof S.exact?(A.mandatory=A.mandatory||{},A.mandatory[I("",v)]=S.exact):["min","max"].forEach(R=>{void 0!==S[R]&&(A.mandatory=A.mandatory||{},A.mandatory[I(R,v)]=S[R])})}),m.advanced&&(A.optional=(A.optional||[]).concat(m.advanced)),A},p=function(m,A){if(o.version>=61)return A(m);if((m=JSON.parse(JSON.stringify(m)))&&"object"==typeof m.audio){const v=function(S,I,R){I in S&&!(R in S)&&(S[R]=S[I],delete S[I])};v((m=JSON.parse(JSON.stringify(m))).audio,"autoGainControl","googAutoGainControl"),v(m.audio,"noiseSuppression","googNoiseSuppression"),m.audio=c(m.audio)}if(m&&"object"==typeof m.video){let v=m.video.facingMode;v=v&&("object"==typeof v?v:{ideal:v});const S=o.version<66;if(v&&("user"===v.exact||"environment"===v.exact||"user"===v.ideal||"environment"===v.ideal)&&(!a.mediaDevices.getSupportedConstraints||!a.mediaDevices.getSupportedConstraints().facingMode||S)){let I;if(delete m.video.facingMode,"environment"===v.exact||"environment"===v.ideal?I=["back","rear"]:"user"!==v.exact&&"user"!==v.ideal||(I=["front"]),I)return a.mediaDevices.enumerateDevices().then(R=>{let O=(R=R.filter(B=>"videoinput"===B.kind)).find(B=>I.some(q=>B.label.toLowerCase().includes(q)));return!O&&R.length&&I.includes("back")&&(O=R[R.length-1]),O&&(m.video.deviceId=v.exact?{exact:O.deviceId}:{ideal:O.deviceId}),m.video=c(m.video),Hr("chrome: "+JSON.stringify(m)),A(m)})}m.video=c(m.video)}return Hr("chrome: "+JSON.stringify(m)),A(m)},_=function(m){return o.version>=64?m:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[m.name]||m.name,message:m.message,constraint:m.constraint||m.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(a.getUserMedia=function(m,A,v){p(m,S=>{a.webkitGetUserMedia(S,A,I=>{v&&v(_(I))})})}.bind(a),a.mediaDevices.getUserMedia){const m=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(A){return p(A,v=>m(v).then(S=>{if(v.audio&&!S.getAudioTracks().length||v.video&&!S.getVideoTracks().length)throw S.getTracks().forEach(I=>{I.stop()}),new DOMException("","NotFoundError");return S},S=>qn.reject(_(S))))}}}function HO(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function mS(r){if("object"==typeof r&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(a){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=a)},enumerable:!0,configurable:!0});const o=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=a=>{a.stream.addEventListener("addtrack",c=>{let p;p=r.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(m=>m.track&&m.track.id===c.track.id):{track:c.track};const _=new Event("track");_.track=c.track,_.receiver=p,_.transceiver={receiver:p},_.streams=[a.stream],this.dispatchEvent(_)}),a.stream.getTracks().forEach(c=>{let p;p=r.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(m=>m.track&&m.track.id===c.id):{track:c};const _=new Event("track");_.track=c,_.receiver=p,_.transceiver={receiver:p},_.streams=[a.stream],this.dispatchEvent(_)})},this.addEventListener("addstream",this._ontrackpoly)),o.apply(this,arguments)}}else Pm(r,"track",o=>(o.transceiver||Object.defineProperty(o,"transceiver",{value:{receiver:o.receiver}}),o))}function Eh(r){if("object"==typeof r&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const o=function(p,_){return{track:_,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===_.kind?p.createDTMFSender(_):null),this._dtmf},_pc:p}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const p=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(m,A){let v=p.apply(this,arguments);return v||(v=o(this,m),this._senders.push(v)),v};const _=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(m){_.apply(this,arguments);const A=this._senders.indexOf(m);-1!==A&&this._senders.splice(A,1)}}const a=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(p){this._senders=this._senders||[],a.apply(this,[p]),p.getTracks().forEach(_=>{this._senders.push(o(this,_))})};const c=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(p){this._senders=this._senders||[],c.apply(this,[p]),p.getTracks().forEach(_=>{const m=this._senders.find(A=>A.track===_);m&&this._senders.splice(this._senders.indexOf(m),1)})}}else if("object"==typeof r&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const o=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const a=o.apply(this,[]);return a.forEach(c=>c._pc=this),a},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function ug(r){if(!r.RTCPeerConnection)return;const o=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[a,c,p]=arguments;if(arguments.length>0&&"function"==typeof a)return o.apply(this,arguments);if(0===o.length&&(0===arguments.length||"function"!=typeof a))return o.apply(this,[]);const _=function(A){const v={};return A.result().forEach(S=>{const I={id:S.id,timestamp:S.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[S.type]||S.type};S.names().forEach(R=>{I[R]=S.stat(R)}),v[I.id]=I}),v},m=function(A){return new Map(Object.keys(A).map(v=>[v,A[v]]))};return arguments.length>=2?o.apply(this,[function(v){c(m(_(v)))},a]):new qn((A,v)=>{o.apply(this,[function(S){A(m(_(S)))},v])}).then(c,p)}}function Vl(r){if(!("object"==typeof r&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const a=r.RTCPeerConnection.prototype.getSenders;a&&(r.RTCPeerConnection.prototype.getSenders=function(){const p=a.apply(this,[]);return p.forEach(_=>_._pc=this),p});const c=r.RTCPeerConnection.prototype.addTrack;c&&(r.RTCPeerConnection.prototype.addTrack=function(){const p=c.apply(this,arguments);return p._pc=this,p}),r.RTCRtpSender.prototype.getStats=function(){const p=this;return this._pc.getStats().then(_=>Mm(_,p.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const a=r.RTCPeerConnection.prototype.getReceivers;a&&(r.RTCPeerConnection.prototype.getReceivers=function(){const c=a.apply(this,[]);return c.forEach(p=>p._pc=this),c}),Pm(r,"track",c=>(c.receiver._pc=c.srcElement,c)),r.RTCRtpReceiver.prototype.getStats=function(){const c=this;return this._pc.getStats().then(p=>Mm(p,c.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype)||!("getStats"in r.RTCRtpReceiver.prototype))return;const o=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const a=arguments[0];let c,p,_;return this.getSenders().forEach(m=>{m.track===a&&(c?_=!0:c=m)}),this.getReceivers().forEach(m=>(m.track===a&&(p?_=!0:p=m),m.track===a)),_||c&&p?qn.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):c?c.getStats():p?p.getStats():qn.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}function BN(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(_=>this._shimmedLocalStreams[_][0])};const o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(_,m){if(!m)return o.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const A=o.apply(this,arguments);return this._shimmedLocalStreams[m.id]?-1===this._shimmedLocalStreams[m.id].indexOf(A)&&this._shimmedLocalStreams[m.id].push(A):this._shimmedLocalStreams[m.id]=[m,A],A};const a=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(_){this._shimmedLocalStreams=this._shimmedLocalStreams||{},_.getTracks().forEach(v=>{if(this.getSenders().find(S=>S.track===v))throw new DOMException("Track already exists.","InvalidAccessError")});const m=this.getSenders();a.apply(this,arguments);const A=this.getSenders().filter(v=>-1===m.indexOf(v));this._shimmedLocalStreams[_.id]=[_].concat(A)};const c=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(_){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[_.id],c.apply(this,arguments)};const p=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(_){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},_&&Object.keys(this._shimmedLocalStreams).forEach(m=>{const A=this._shimmedLocalStreams[m].indexOf(_);-1!==A&&this._shimmedLocalStreams[m].splice(A,1),1===this._shimmedLocalStreams[m].length&&delete this._shimmedLocalStreams[m]}),p.apply(this,arguments)}}function Xs(r,o){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&o.version>=65)return BN(r);const a=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const S=a.apply(this);return this._reverseStreams=this._reverseStreams||{},S.map(I=>this._reverseStreams[I.id])};const c=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(S){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},S.getTracks().forEach(I=>{if(this.getSenders().find(R=>R.track===I))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[S.id]){const I=new r.MediaStream(S.getTracks());this._streams[S.id]=I,this._reverseStreams[I.id]=S,S=I}c.apply(this,[S])};const p=r.RTCPeerConnection.prototype.removeStream;function _(S,I){let R=I.sdp;return Object.keys(S._reverseStreams||[]).forEach(O=>{const B=S._reverseStreams[O];R=R.replace(new RegExp(S._streams[B.id].id,"g"),B.id)}),new RTCSessionDescription({type:I.type,sdp:R})}function m(S,I){let R=I.sdp;return Object.keys(S._reverseStreams||[]).forEach(O=>{const B=S._reverseStreams[O],q=S._streams[B.id];R=R.replace(new RegExp(B.id,"g"),q.id)}),new RTCSessionDescription({type:I.type,sdp:R})}r.RTCPeerConnection.prototype.removeStream=function(S){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.apply(this,[this._streams[S.id]||S]),delete this._reverseStreams[this._streams[S.id]?this._streams[S.id].id:S.id],delete this._streams[S.id]},r.RTCPeerConnection.prototype.addTrack=function(S,I){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const R=[].slice.call(arguments,1);if(1!==R.length||!R[0].getTracks().find(q=>q===S))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(q=>q.track===S))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const B=this._streams[I.id];if(B)B.addTrack(S),qn.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const q=new r.MediaStream([S]);this._streams[I.id]=q,this._reverseStreams[q.id]=I,this.addStream(q)}return this.getSenders().find(q=>q.track===S)},["createOffer","createAnswer"].forEach(function(S){const I=r.RTCPeerConnection.prototype[S],R={[S](){const O=arguments;return arguments.length&&"function"==typeof arguments[0]?I.apply(this,[B=>{const q=_(this,B);O[0].apply(null,[q])},B=>{O[1]&&O[1].apply(null,B)},arguments[2]]):I.apply(this,arguments).then(B=>_(this,B))}};r.RTCPeerConnection.prototype[S]=R[S]});const A=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=m(this,arguments[0]),A.apply(this,arguments)):A.apply(this,arguments)};const v=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const S=v.get.apply(this);return""===S.type?S:_(this,S)}}),r.RTCPeerConnection.prototype.removeTrack=function(S){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!S._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(S._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let I;this._streams=this._streams||{},Object.keys(this._streams).forEach(R=>{this._streams[R].getTracks().find(O=>S.track===O)&&(I=this._streams[R])}),I&&(1===I.getTracks().length?this.removeStream(this._reverseStreams[I.id]):I.removeTrack(S.track),this.dispatchEvent(new Event("negotiationneeded")))}}function GO(r,o){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&o.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const c=r.RTCPeerConnection.prototype[a],p={[a](){return arguments[0]=new("addIceCandidate"===a?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};r.RTCPeerConnection.prototype[a]=p[a]})}function Jo(r,o){Pm(r,"negotiationneeded",a=>{const c=a.target;if(!(o.version<72||c.getConfiguration&&"plan-b"===c.getConfiguration().sdpSemantics)||"stable"===c.signalingState)return a})}var FN=Object.freeze({__proto__:null,shimMediaStream:HO,shimOnTrack:mS,shimGetSendersWithDtmf:Eh,shimGetStats:ug,shimSenderReceiverGetStats:Vl,shimAddTrackRemoveTrackWithNative:BN,shimAddTrackRemoveTrack:Xs,shimPeerConnection:GO,fixNegotiationNeeded:Jo,shimGetUserMedia:mi,shimGetDisplayMedia:function(r,o){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&("function"==typeof o?r.navigator.mediaDevices.getDisplayMedia=function(a){return o(a).then(c=>{const p=a.video&&a.video.width,_=a.video&&a.video.height;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c,maxFrameRate:a.video&&a.video.frameRate||3}},p&&(a.video.mandatory.maxWidth=p),_&&(a.video.mandatory.maxHeight=_),r.navigator.mediaDevices.getUserMedia(a)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),ky={exports:{}};!function(r){var o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(a){return a.trim().split("\n").map(function(c){return c.trim()})},o.splitSections=function(a){return a.split("\nm=").map(function(c,p){return(p>0?"m="+c:c).trim()+"\r\n"})},o.getDescription=function(a){var c=o.splitSections(a);return c&&c[0]},o.getMediaSections=function(a){var c=o.splitSections(a);return c.shift(),c},o.matchPrefix=function(a,c){return o.splitLines(a).filter(function(p){return 0===p.indexOf(c)})},o.parseCandidate=function(a){for(var c,p={foundation:(c=0===a.indexOf("a=candidate:")?a.substring(12).split(" "):a.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},_=8;_<c.length;_+=2)switch(c[_]){case"raddr":p.relatedAddress=c[_+1];break;case"rport":p.relatedPort=parseInt(c[_+1],10);break;case"tcptype":p.tcpType=c[_+1];break;case"ufrag":p.ufrag=c[_+1],p.usernameFragment=c[_+1];break;default:p[c[_]]=c[_+1]}return p},o.writeCandidate=function(a){var c=[];c.push(a.foundation),c.push(a.component),c.push(a.protocol.toUpperCase()),c.push(a.priority),c.push(a.address||a.ip),c.push(a.port);var p=a.type;return c.push("typ"),c.push(p),"host"!==p&&a.relatedAddress&&a.relatedPort&&(c.push("raddr"),c.push(a.relatedAddress),c.push("rport"),c.push(a.relatedPort)),a.tcpType&&"tcp"===a.protocol.toLowerCase()&&(c.push("tcptype"),c.push(a.tcpType)),(a.usernameFragment||a.ufrag)&&(c.push("ufrag"),c.push(a.usernameFragment||a.ufrag)),"candidate:"+c.join(" ")},o.parseIceOptions=function(a){return a.substr(14).split(" ")},o.parseRtpMap=function(a){var c=a.substr(9).split(" "),p={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),p.name=c[0],p.clockRate=parseInt(c[1],10),p.channels=3===c.length?parseInt(c[2],10):1,p.numChannels=p.channels,p},o.writeRtpMap=function(a){var c=a.payloadType;void 0!==a.preferredPayloadType&&(c=a.preferredPayloadType);var p=a.channels||a.numChannels||1;return"a=rtpmap:"+c+" "+a.name+"/"+a.clockRate+(1!==p?"/"+p:"")+"\r\n"},o.parseExtmap=function(a){var c=a.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},o.writeExtmap=function(a){return"a=extmap:"+(a.id||a.preferredId)+(a.direction&&"sendrecv"!==a.direction?"/"+a.direction:"")+" "+a.uri+"\r\n"},o.parseFmtp=function(a){for(var c,p={},_=a.substr(a.indexOf(" ")+1).split(";"),m=0;m<_.length;m++)p[(c=_[m].trim().split("="))[0].trim()]=c[1];return p},o.writeFmtp=function(a){var c="",p=a.payloadType;if(void 0!==a.preferredPayloadType&&(p=a.preferredPayloadType),a.parameters&&Object.keys(a.parameters).length){var _=[];Object.keys(a.parameters).forEach(function(m){_.push(a.parameters[m]?m+"="+a.parameters[m]:m)}),c+="a=fmtp:"+p+" "+_.join(";")+"\r\n"}return c},o.parseRtcpFb=function(a){var c=a.substr(a.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},o.writeRtcpFb=function(a){var c="",p=a.payloadType;return void 0!==a.preferredPayloadType&&(p=a.preferredPayloadType),a.rtcpFeedback&&a.rtcpFeedback.length&&a.rtcpFeedback.forEach(function(_){c+="a=rtcp-fb:"+p+" "+_.type+(_.parameter&&_.parameter.length?" "+_.parameter:"")+"\r\n"}),c},o.parseSsrcMedia=function(a){var c=a.indexOf(" "),p={ssrc:parseInt(a.substr(7,c-7),10)},_=a.indexOf(":",c);return _>-1?(p.attribute=a.substr(c+1,_-c-1),p.value=a.substr(_+1)):p.attribute=a.substr(c+1),p},o.parseSsrcGroup=function(a){var c=a.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(p){return parseInt(p,10)})}},o.getMid=function(a){var c=o.matchPrefix(a,"a=mid:")[0];if(c)return c.substr(6)},o.parseFingerprint=function(a){var c=a.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},o.getDtlsParameters=function(a,c){return{role:"auto",fingerprints:o.matchPrefix(a+c,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(a,c){var p="a=setup:"+c+"\r\n";return a.fingerprints.forEach(function(_){p+="a=fingerprint:"+_.algorithm+" "+_.value+"\r\n"}),p},o.getIceParameters=function(a,c){var p=o.splitLines(a);return{usernameFragment:(p=p.concat(o.splitLines(c))).filter(function(_){return 0===_.indexOf("a=ice-ufrag:")})[0].substr(12),password:p.filter(function(_){return 0===_.indexOf("a=ice-pwd:")})[0].substr(10)}},o.writeIceParameters=function(a){return"a=ice-ufrag:"+a.usernameFragment+"\r\na=ice-pwd:"+a.password+"\r\n"},o.parseRtpParameters=function(a){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},p=o.splitLines(a)[0].split(" "),_=3;_<p.length;_++){var m=p[_],A=o.matchPrefix(a,"a=rtpmap:"+m+" ")[0];if(A){var v=o.parseRtpMap(A),S=o.matchPrefix(a,"a=fmtp:"+m+" ");switch(v.parameters=S.length?o.parseFmtp(S[0]):{},v.rtcpFeedback=o.matchPrefix(a,"a=rtcp-fb:"+m+" ").map(o.parseRtcpFb),c.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(v.name.toUpperCase())}}}return o.matchPrefix(a,"a=extmap:").forEach(function(I){c.headerExtensions.push(o.parseExtmap(I))}),c},o.writeRtpDescription=function(a,c){var p="";p+="m="+a+" ",p+=c.codecs.length>0?"9":"0",p+=" UDP/TLS/RTP/SAVPF ",p+=c.codecs.map(function(m){return void 0!==m.preferredPayloadType?m.preferredPayloadType:m.payloadType}).join(" ")+"\r\n",p+="c=IN IP4 0.0.0.0\r\n",p+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(m){p+=o.writeRtpMap(m),p+=o.writeFmtp(m),p+=o.writeRtcpFb(m)});var _=0;return c.codecs.forEach(function(m){m.maxptime>_&&(_=m.maxptime)}),_>0&&(p+="a=maxptime:"+_+"\r\n"),p+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(m){p+=o.writeExtmap(m)}),p},o.parseRtpEncodingParameters=function(a){var c,p=[],_=o.parseRtpParameters(a),m=-1!==_.fecMechanisms.indexOf("RED"),A=-1!==_.fecMechanisms.indexOf("ULPFEC"),v=o.matchPrefix(a,"a=ssrc:").map(function(O){return o.parseSsrcMedia(O)}).filter(function(O){return"cname"===O.attribute}),S=v.length>0&&v[0].ssrc,I=o.matchPrefix(a,"a=ssrc-group:FID").map(function(O){return O.substr(17).split(" ").map(function(B){return parseInt(B,10)})});I.length>0&&I[0].length>1&&I[0][0]===S&&(c=I[0][1]),_.codecs.forEach(function(O){if("RTX"===O.name.toUpperCase()&&O.parameters.apt){var B={ssrc:S,codecPayloadType:parseInt(O.parameters.apt,10)};S&&c&&(B.rtx={ssrc:c}),p.push(B),m&&((B=JSON.parse(JSON.stringify(B))).fec={ssrc:S,mechanism:A?"red+ulpfec":"red"},p.push(B))}}),0===p.length&&S&&p.push({ssrc:S});var R=o.matchPrefix(a,"b=");return R.length&&(R=0===R[0].indexOf("b=TIAS:")?parseInt(R[0].substr(7),10):0===R[0].indexOf("b=AS:")?1e3*parseInt(R[0].substr(5),10)*.95-16e3:void 0,p.forEach(function(O){O.maxBitrate=R})),p},o.parseRtcpParameters=function(a){var c={},p=o.matchPrefix(a,"a=ssrc:").map(function(A){return o.parseSsrcMedia(A)}).filter(function(A){return"cname"===A.attribute})[0];p&&(c.cname=p.value,c.ssrc=p.ssrc);var _=o.matchPrefix(a,"a=rtcp-rsize");c.reducedSize=_.length>0,c.compound=0===_.length;var m=o.matchPrefix(a,"a=rtcp-mux");return c.mux=m.length>0,c},o.parseMsid=function(a){var c,p=o.matchPrefix(a,"a=msid:");if(1===p.length)return{stream:(c=p[0].substr(7).split(" "))[0],track:c[1]};var _=o.matchPrefix(a,"a=ssrc:").map(function(m){return o.parseSsrcMedia(m)}).filter(function(m){return"msid"===m.attribute});return _.length>0?{stream:(c=_[0].value.split(" "))[0],track:c[1]}:void 0},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(a,c,p){var _=void 0!==c?c:2;return"v=0\r\no="+(p||"thisisadapterortc")+" "+(a||o.generateSessionId())+" "+_+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.writeMediaSection=function(a,c,p,_){var m=o.writeRtpDescription(a.kind,c);if(m+=o.writeIceParameters(a.iceGatherer.getLocalParameters()),m+=o.writeDtlsParameters(a.dtlsTransport.getLocalParameters(),"offer"===p?"actpass":"active"),m+="a=mid:"+a.mid+"\r\n",m+=a.direction?"a="+a.direction+"\r\n":a.rtpSender&&a.rtpReceiver?"a=sendrecv\r\n":a.rtpSender?"a=sendonly\r\n":a.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",a.rtpSender){var A="msid:"+_.id+" "+a.rtpSender.track.id+"\r\n";m+="a="+A,m+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" "+A,a.sendEncodingParameters[0].rtx&&(m+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" "+A,m+="a=ssrc-group:FID "+a.sendEncodingParameters[0].ssrc+" "+a.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return m+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",a.rtpSender&&a.sendEncodingParameters[0].rtx&&(m+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),m},o.getDirection=function(a,c){for(var p=o.splitLines(a),_=0;_<p.length;_++)switch(p[_]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return p[_].substr(2)}return c?o.getDirection(c):"sendrecv"},o.getKind=function(a){return o.splitLines(a)[0].split(" ")[0].substr(2)},o.isRejected=function(a){return"0"===a.split(" ",2)[1]},o.parseMLine=function(a){var c=o.splitLines(a)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},o.parseOLine=function(a){var c=o.matchPrefix(a,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},o.isValidSDP=function(a){if("string"!=typeof a||0===a.length)return!1;for(var c=o.splitLines(a),p=0;p<c.length;p++)if(c[p].length<2||"="!==c[p].charAt(1))return!1;return!0},r.exports=o}(ky);var Gr=ky.exports;function gS(r,o,a,c,p){var _=Gr.writeRtpDescription(r.kind,o);if(_+=Gr.writeIceParameters(r.iceGatherer.getLocalParameters()),_+=Gr.writeDtlsParameters(r.dtlsTransport.getLocalParameters(),"offer"===a?"actpass":p||"active"),_+="a=mid:"+r.mid+"\r\n",_+=r.rtpSender&&r.rtpReceiver?"a=sendrecv\r\n":r.rtpSender?"a=sendonly\r\n":r.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",r.rtpSender){var m=r.rtpSender._initialTrackId||r.rtpSender.track.id;r.rtpSender._initialTrackId=m;var A="msid:"+(c?c.id:"-")+" "+m+"\r\n";_+="a="+A,_+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" "+A,r.sendEncodingParameters[0].rtx&&(_+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" "+A,_+="a=ssrc-group:FID "+r.sendEncodingParameters[0].ssrc+" "+r.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return _+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" cname:"+Gr.localCName+"\r\n",r.rtpSender&&r.sendEncodingParameters[0].rtx&&(_+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" cname:"+Gr.localCName+"\r\n"),_}function _S(r,o){var a={codecs:[],headerExtensions:[],fecMechanisms:[]},c=function(_,m){_=parseInt(_,10);for(var A=0;A<m.length;A++)if(m[A].payloadType===_||m[A].preferredPayloadType===_)return m[A]},p=function(_,m,A,v){var S=c(_.parameters.apt,A),I=c(m.parameters.apt,v);return S&&I&&S.name.toLowerCase()===I.name.toLowerCase()};return r.codecs.forEach(function(_){for(var m=0;m<o.codecs.length;m++){var A=o.codecs[m];if(_.name.toLowerCase()===A.name.toLowerCase()&&_.clockRate===A.clockRate){if("rtx"===_.name.toLowerCase()&&_.parameters&&A.parameters.apt&&!p(_,A,r.codecs,o.codecs))continue;(A=JSON.parse(JSON.stringify(A))).numChannels=Math.min(_.numChannels,A.numChannels),a.codecs.push(A),A.rtcpFeedback=A.rtcpFeedback.filter(function(v){for(var S=0;S<_.rtcpFeedback.length;S++)if(_.rtcpFeedback[S].type===v.type&&_.rtcpFeedback[S].parameter===v.parameter)return!0;return!1});break}}}),r.headerExtensions.forEach(function(_){for(var m=0;m<o.headerExtensions.length;m++){var A=o.headerExtensions[m];if(_.uri===A.uri){a.headerExtensions.push(A);break}}}),a}function Aw(r,o,a){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[o][r].indexOf(a)}function Py(r,o){var a=r.getRemoteCandidates().find(function(c){return o.foundation===c.foundation&&o.ip===c.ip&&o.port===c.port&&o.priority===c.priority&&o.protocol===c.protocol&&o.type===c.type});return a||r.addRemoteCandidate(o),!a}function _a(r,o){var a=new Error(o);return a.name=r,a.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[r],a}function WO(r){const o=r&&r.navigator,a=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(c){return a(c).catch(p=>{return qn.reject({name:{PermissionDeniedError:"NotAllowedError"}[(_=p).name]||_.name,message:_.message,constraint:_.constraint,toString(){return this.name}});var _})}}function Ew(r){"getDisplayMedia"in r.navigator&&r.navigator.mediaDevices&&(r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||(r.navigator.mediaDevices.getDisplayMedia=r.navigator.getDisplayMedia.bind(r.navigator)))}function bw(r,o){if(r.RTCIceGatherer&&(r.RTCIceCandidate||(r.RTCIceCandidate=function(c){return c}),r.RTCSessionDescription||(r.RTCSessionDescription=function(c){return c}),o.version<15025)){const c=Object.getOwnPropertyDescriptor(r.MediaStreamTrack.prototype,"enabled");Object.defineProperty(r.MediaStreamTrack.prototype,"enabled",{set(p){c.set.call(this,p);const _=new Event("enabled");_.enabled=p,this.dispatchEvent(_)}})}r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)&&Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new r.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),r.RTCDtmfSender&&!r.RTCDTMFSender&&(r.RTCDTMFSender=r.RTCDtmfSender);const a=function(r,o){function a(m,A){A.addTrack(m),A.dispatchEvent(new r.MediaStreamTrackEvent("addtrack",{track:m}))}function c(m,A,v,S){var I=new Event("track");I.track=A,I.receiver=v,I.transceiver={receiver:v},I.streams=S,r.setTimeout(function(){m._dispatchEvent("track",I)})}var p=function(m){var I,R,O,A=this,v=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(I){A[I]=v[I].bind(v)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",m=JSON.parse(JSON.stringify(m||{})),this.usingBundle="max-bundle"===m.bundlePolicy,"negotiate"===m.rtcpMuxPolicy)throw _a("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(m.rtcpMuxPolicy||(m.rtcpMuxPolicy="require"),m.iceTransportPolicy){case"all":case"relay":break;default:m.iceTransportPolicy="all"}switch(m.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:m.bundlePolicy="balanced"}if(m.iceServers=(I=m.iceServers||[],R=o,O=!1,(I=JSON.parse(JSON.stringify(I))).filter(function(B){if(B&&(B.urls||B.url)){var q=B.urls||B.url;B.url&&!B.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var z="string"==typeof q;return z&&(q=[q]),q=q.filter(function(te){return 0!==te.indexOf("turn:")||-1===te.indexOf("transport=udp")||-1!==te.indexOf("turn:[")||O?0===te.indexOf("stun:")&&R>=14393&&-1===te.indexOf("?transport=udp"):(O=!0,!0)}),delete B.url,B.urls=z?q[0]:q,!!q.length}})),this._iceGatherers=[],m.iceCandidatePoolSize)for(var S=m.iceCandidatePoolSize;S>0;S--)this._iceGatherers.push(new r.RTCIceGatherer({iceServers:m.iceServers,gatherPolicy:m.iceTransportPolicy}));else m.iceCandidatePoolSize=0;this._config=m,this.transceivers=[],this._sdpSessionId=Gr.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(p.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(p.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),p.prototype.onicecandidate=null,p.prototype.onaddstream=null,p.prototype.ontrack=null,p.prototype.onremovestream=null,p.prototype.onsignalingstatechange=null,p.prototype.oniceconnectionstatechange=null,p.prototype.onconnectionstatechange=null,p.prototype.onicegatheringstatechange=null,p.prototype.onnegotiationneeded=null,p.prototype.ondatachannel=null,p.prototype._dispatchEvent=function(m,A){this._isClosed||(this.dispatchEvent(A),"function"==typeof this["on"+m]&&this["on"+m](A))},p.prototype._emitGatheringStateChange=function(){var m=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",m)},p.prototype.getConfiguration=function(){return this._config},p.prototype.getLocalStreams=function(){return this.localStreams},p.prototype.getRemoteStreams=function(){return this.remoteStreams},p.prototype._createTransceiver=function(m,A){var S={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:m,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)S.iceTransport=this.transceivers[0].iceTransport,S.dtlsTransport=this.transceivers[0].dtlsTransport;else{var I=this._createIceAndDtlsTransports();S.iceTransport=I.iceTransport,S.dtlsTransport=I.dtlsTransport}return A||this.transceivers.push(S),S},p.prototype.addTrack=function(m,A){if(this._isClosed)throw _a("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var v;if(this.transceivers.find(function(I){return I.track===m}))throw _a("InvalidAccessError","Track already exists.");for(var S=0;S<this.transceivers.length;S++)this.transceivers[S].track||this.transceivers[S].kind!==m.kind||(v=this.transceivers[S]);return v||(v=this._createTransceiver(m.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(A)&&this.localStreams.push(A),v.track=m,v.stream=A,v.rtpSender=new r.RTCRtpSender(m,v.dtlsTransport),v.rtpSender},p.prototype.addStream=function(m){var A=this;if(o>=15025)m.getTracks().forEach(function(S){A.addTrack(S,m)});else{var v=m.clone();m.getTracks().forEach(function(S,I){var R=v.getTracks()[I];S.addEventListener("enabled",function(O){R.enabled=O.enabled})}),v.getTracks().forEach(function(S){A.addTrack(S,v)})}},p.prototype.removeTrack=function(m){if(this._isClosed)throw _a("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(m instanceof r.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var A=this.transceivers.find(function(S){return S.rtpSender===m});if(!A)throw _a("InvalidAccessError","Sender was not created by this connection.");var v=A.stream;A.rtpSender.stop(),A.rtpSender=null,A.track=null,A.stream=null,-1===this.transceivers.map(function(S){return S.stream}).indexOf(v)&&this.localStreams.indexOf(v)>-1&&this.localStreams.splice(this.localStreams.indexOf(v),1),this._maybeFireNegotiationNeeded()},p.prototype.removeStream=function(m){var A=this;m.getTracks().forEach(function(v){var S=A.getSenders().find(function(I){return I.track===v});S&&A.removeTrack(S)})},p.prototype.getSenders=function(){return this.transceivers.filter(function(m){return!!m.rtpSender}).map(function(m){return m.rtpSender})},p.prototype.getReceivers=function(){return this.transceivers.filter(function(m){return!!m.rtpReceiver}).map(function(m){return m.rtpReceiver})},p.prototype._createIceGatherer=function(m,A){var v=this;if(A&&m>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var S=new r.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(S,"state",{value:"new",writable:!0}),this.transceivers[m].bufferedCandidateEvents=[],this.transceivers[m].bufferCandidates=function(I){var R=!I.candidate||0===Object.keys(I.candidate).length;S.state=R?"completed":"gathering",null!==v.transceivers[m].bufferedCandidateEvents&&v.transceivers[m].bufferedCandidateEvents.push(I)},S.addEventListener("localcandidate",this.transceivers[m].bufferCandidates),S},p.prototype._gather=function(m,A){var v=this,S=this.transceivers[A].iceGatherer;if(!S.onlocalcandidate){var I=this.transceivers[A].bufferedCandidateEvents;this.transceivers[A].bufferedCandidateEvents=null,S.removeEventListener("localcandidate",this.transceivers[A].bufferCandidates),S.onlocalcandidate=function(R){if(!(v.usingBundle&&A>0)){var O=new Event("icecandidate");O.candidate={sdpMid:m,sdpMLineIndex:A};var B=R.candidate,q=!B||0===Object.keys(B).length;if(q)"new"!==S.state&&"gathering"!==S.state||(S.state="completed");else{"new"===S.state&&(S.state="gathering"),B.component=1,B.ufrag=S.getLocalParameters().usernameFragment;var z=Gr.writeCandidate(B);O.candidate=Object.assign(O.candidate,Gr.parseCandidate(z)),O.candidate.candidate=z,O.candidate.toJSON=function(){return{candidate:O.candidate.candidate,sdpMid:O.candidate.sdpMid,sdpMLineIndex:O.candidate.sdpMLineIndex,usernameFragment:O.candidate.usernameFragment}}}var te=Gr.getMediaSections(v._localDescription.sdp);te[O.candidate.sdpMLineIndex]+=q?"a=end-of-candidates\r\n":"a="+O.candidate.candidate+"\r\n",v._localDescription.sdp=Gr.getDescription(v._localDescription.sdp)+te.join("");var de=v.transceivers.every(function(ge){return ge.iceGatherer&&"completed"===ge.iceGatherer.state});"gathering"!==v.iceGatheringState&&(v.iceGatheringState="gathering",v._emitGatheringStateChange()),q||v._dispatchEvent("icecandidate",O),de&&(v._dispatchEvent("icecandidate",new Event("icecandidate")),v.iceGatheringState="complete",v._emitGatheringStateChange())}},r.setTimeout(function(){I.forEach(function(R){S.onlocalcandidate(R)})},0)}},p.prototype._createIceAndDtlsTransports=function(){var m=this,A=new r.RTCIceTransport(null);A.onicestatechange=function(){m._updateIceConnectionState(),m._updateConnectionState()};var v=new r.RTCDtlsTransport(A);return v.ondtlsstatechange=function(){m._updateConnectionState()},v.onerror=function(){Object.defineProperty(v,"state",{value:"failed",writable:!0}),m._updateConnectionState()},{iceTransport:A,dtlsTransport:v}},p.prototype._disposeIceAndDtlsTransports=function(m){var A=this.transceivers[m].iceGatherer;A&&(delete A.onlocalcandidate,delete this.transceivers[m].iceGatherer);var v=this.transceivers[m].iceTransport;v&&(delete v.onicestatechange,delete this.transceivers[m].iceTransport);var S=this.transceivers[m].dtlsTransport;S&&(delete S.ondtlsstatechange,delete S.onerror,delete this.transceivers[m].dtlsTransport)},p.prototype._transceive=function(m,A,v){var S=_S(m.localCapabilities,m.remoteCapabilities);A&&m.rtpSender&&(S.encodings=m.sendEncodingParameters,S.rtcp={cname:Gr.localCName,compound:m.rtcpParameters.compound},m.recvEncodingParameters.length&&(S.rtcp.ssrc=m.recvEncodingParameters[0].ssrc),m.rtpSender.send(S)),v&&m.rtpReceiver&&S.codecs.length>0&&("video"===m.kind&&m.recvEncodingParameters&&o<15019&&m.recvEncodingParameters.forEach(function(I){delete I.rtx}),S.encodings=m.recvEncodingParameters.length?m.recvEncodingParameters:[{}],S.rtcp={compound:m.rtcpParameters.compound},m.rtcpParameters.cname&&(S.rtcp.cname=m.rtcpParameters.cname),m.sendEncodingParameters.length&&(S.rtcp.ssrc=m.sendEncodingParameters[0].ssrc),m.rtpReceiver.receive(S))},p.prototype.setLocalDescription=function(m){var A,v,S=this;if(-1===["offer","answer"].indexOf(m.type))return Promise.reject(_a("TypeError",'Unsupported type "'+m.type+'"'));if(!Aw("setLocalDescription",m.type,S.signalingState)||S._isClosed)return Promise.reject(_a("InvalidStateError","Can not set local "+m.type+" in state "+S.signalingState));if("offer"===m.type)A=Gr.splitSections(m.sdp),v=A.shift(),A.forEach(function(R,O){var B=Gr.parseRtpParameters(R);S.transceivers[O].localCapabilities=B}),S.transceivers.forEach(function(R,O){S._gather(R.mid,O)});else if("answer"===m.type){A=Gr.splitSections(S._remoteDescription.sdp),v=A.shift();var I=Gr.matchPrefix(v,"a=ice-lite").length>0;A.forEach(function(R,O){var B=S.transceivers[O],q=B.iceGatherer,z=B.iceTransport,te=B.dtlsTransport,de=B.localCapabilities,ge=B.remoteCapabilities;if(!(Gr.isRejected(R)&&0===Gr.matchPrefix(R,"a=bundle-only").length||B.rejected)){var Se=Gr.getIceParameters(R,v),Me=Gr.getDtlsParameters(R,v);I&&(Me.role="server"),S.usingBundle&&0!==O||(S._gather(B.mid,O),"new"===z.state&&z.start(q,Se,I?"controlling":"controlled"),"new"===te.state&&te.start(Me));var dt=_S(de,ge);S._transceive(B,dt.codecs.length>0,!1)}})}return S._localDescription={type:m.type,sdp:m.sdp},S._updateSignalingState("offer"===m.type?"have-local-offer":"stable"),Promise.resolve()},p.prototype.setRemoteDescription=function(m){var A=this;if(-1===["offer","answer"].indexOf(m.type))return Promise.reject(_a("TypeError",'Unsupported type "'+m.type+'"'));if(!Aw("setRemoteDescription",m.type,A.signalingState)||A._isClosed)return Promise.reject(_a("InvalidStateError","Can not set remote "+m.type+" in state "+A.signalingState));var v={};A.remoteStreams.forEach(function(z){v[z.id]=z});var S=[],I=Gr.splitSections(m.sdp),R=I.shift(),O=Gr.matchPrefix(R,"a=ice-lite").length>0,B=Gr.matchPrefix(R,"a=group:BUNDLE ").length>0;A.usingBundle=B;var q=Gr.matchPrefix(R,"a=ice-options:")[0];return A.canTrickleIceCandidates=!!q&&q.substr(14).split(" ").indexOf("trickle")>=0,I.forEach(function(z,te){var de=Gr.splitLines(z),ge=Gr.getKind(z),Se=Gr.isRejected(z)&&0===Gr.matchPrefix(z,"a=bundle-only").length,Me=de[0].substr(2).split(" ")[2],dt=Gr.getDirection(z,R),kt=Gr.parseMsid(z),Mt=Gr.getMid(z)||Gr.generateIdentifier();if(Se||"application"===ge&&("DTLS/SCTP"===Me||"UDP/DTLS/SCTP"===Me))A.transceivers[te]={mid:Mt,kind:ge,protocol:Me,rejected:!0};else{var Lt,Vn,wn,yn,Ct,We,lt,At,n;!Se&&A.transceivers[te]&&A.transceivers[te].rejected&&(A.transceivers[te]=A._createTransceiver(ge,!0));var t,e,s=Gr.parseRtpParameters(z);Se||(t=Gr.getIceParameters(z,R),(e=Gr.getDtlsParameters(z,R)).role="client"),lt=Gr.parseRtpEncodingParameters(z);var d=Gr.parseRtcpParameters(z),f=Gr.matchPrefix(z,"a=end-of-candidates",R).length>0,b=Gr.matchPrefix(z,"a=candidate:").map(function(k){return Gr.parseCandidate(k)}).filter(function(k){return 1===k.component});if(("offer"===m.type||"answer"===m.type)&&!Se&&B&&te>0&&A.transceivers[te]&&(A._disposeIceAndDtlsTransports(te),A.transceivers[te].iceGatherer=A.transceivers[0].iceGatherer,A.transceivers[te].iceTransport=A.transceivers[0].iceTransport,A.transceivers[te].dtlsTransport=A.transceivers[0].dtlsTransport,A.transceivers[te].rtpSender&&A.transceivers[te].rtpSender.setTransport(A.transceivers[0].dtlsTransport),A.transceivers[te].rtpReceiver&&A.transceivers[te].rtpReceiver.setTransport(A.transceivers[0].dtlsTransport)),"offer"!==m.type||Se)"answer"===m.type&&!Se&&(Vn=(Lt=A.transceivers[te]).iceGatherer,wn=Lt.iceTransport,yn=Lt.dtlsTransport,Ct=Lt.rtpReceiver,We=Lt.sendEncodingParameters,At=Lt.localCapabilities,A.transceivers[te].recvEncodingParameters=lt,A.transceivers[te].remoteCapabilities=s,A.transceivers[te].rtcpParameters=d,b.length&&"new"===wn.state&&(!O&&!f||B&&0!==te?b.forEach(function(k){Py(Lt.iceTransport,k)}):wn.setRemoteCandidates(b)),B&&0!==te||("new"===wn.state&&wn.start(Vn,t,"controlling"),"new"===yn.state&&yn.start(e)),!_S(Lt.localCapabilities,Lt.remoteCapabilities).codecs.filter(function(k){return"rtx"===k.name.toLowerCase()}).length&&Lt.sendEncodingParameters[0].rtx&&delete Lt.sendEncodingParameters[0].rtx,A._transceive(Lt,"sendrecv"===dt||"recvonly"===dt,"sendrecv"===dt||"sendonly"===dt),!Ct||"sendrecv"!==dt&&"sendonly"!==dt?delete Lt.rtpReceiver:(n=Ct.track,kt?(v[kt.stream]||(v[kt.stream]=new r.MediaStream),a(n,v[kt.stream]),S.push([n,Ct,v[kt.stream]])):(v.default||(v.default=new r.MediaStream),a(n,v.default),S.push([n,Ct,v.default]))));else{(Lt=A.transceivers[te]||A._createTransceiver(ge)).mid=Mt,Lt.iceGatherer||(Lt.iceGatherer=A._createIceGatherer(te,B)),b.length&&"new"===Lt.iceTransport.state&&(!f||B&&0!==te?b.forEach(function(k){Py(Lt.iceTransport,k)}):Lt.iceTransport.setRemoteCandidates(b)),At=r.RTCRtpReceiver.getCapabilities(ge),o<15019&&(At.codecs=At.codecs.filter(function(k){return"rtx"!==k.name})),We=Lt.sendEncodingParameters||[{ssrc:1001*(2*te+2)}];var E,T=!1;"sendrecv"===dt||"sendonly"===dt?(T=!Lt.rtpReceiver,Ct=Lt.rtpReceiver||new r.RTCRtpReceiver(Lt.dtlsTransport,ge),T&&(n=Ct.track,kt&&"-"===kt.stream||(kt?(v[kt.stream]||(v[kt.stream]=new r.MediaStream,Object.defineProperty(v[kt.stream],"id",{get:function(){return kt.stream}})),Object.defineProperty(n,"id",{get:function(){return kt.track}}),E=v[kt.stream]):(v.default||(v.default=new r.MediaStream),E=v.default)),E&&(a(n,E),Lt.associatedRemoteMediaStreams.push(E)),S.push([n,Ct,E]))):Lt.rtpReceiver&&Lt.rtpReceiver.track&&(Lt.associatedRemoteMediaStreams.forEach(function(k){var ie,Ie,Q=k.getTracks().find(function(ie){return ie.id===Lt.rtpReceiver.track.id});Q&&((Ie=k).removeTrack(ie=Q),Ie.dispatchEvent(new r.MediaStreamTrackEvent("removetrack",{track:ie})))}),Lt.associatedRemoteMediaStreams=[]),Lt.localCapabilities=At,Lt.remoteCapabilities=s,Lt.rtpReceiver=Ct,Lt.rtcpParameters=d,Lt.sendEncodingParameters=We,Lt.recvEncodingParameters=lt,A._transceive(A.transceivers[te],!1,T)}}}),void 0===A._dtlsRole&&(A._dtlsRole="offer"===m.type?"active":"passive"),A._remoteDescription={type:m.type,sdp:m.sdp},A._updateSignalingState("offer"===m.type?"have-remote-offer":"stable"),Object.keys(v).forEach(function(z){var te=v[z];if(te.getTracks().length){if(-1===A.remoteStreams.indexOf(te)){A.remoteStreams.push(te);var de=new Event("addstream");de.stream=te,r.setTimeout(function(){A._dispatchEvent("addstream",de)})}S.forEach(function(ge){te.id===ge[2].id&&c(A,ge[0],ge[1],[te])})}}),S.forEach(function(z){z[2]||c(A,z[0],z[1],[])}),r.setTimeout(function(){A&&A.transceivers&&A.transceivers.forEach(function(z){z.iceTransport&&"new"===z.iceTransport.state&&z.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),z.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},p.prototype.close=function(){this.transceivers.forEach(function(m){m.iceTransport&&m.iceTransport.stop(),m.dtlsTransport&&m.dtlsTransport.stop(),m.rtpSender&&m.rtpSender.stop(),m.rtpReceiver&&m.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},p.prototype._updateSignalingState=function(m){this.signalingState=m;var A=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",A)},p.prototype._maybeFireNegotiationNeeded=function(){var m=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,r.setTimeout(function(){if(m.needNegotiation){m.needNegotiation=!1;var A=new Event("negotiationneeded");m._dispatchEvent("negotiationneeded",A)}},0))},p.prototype._updateIceConnectionState=function(){var m,A={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(S){S.iceTransport&&!S.rejected&&A[S.iceTransport.state]++}),m="new",A.failed>0?m="failed":A.checking>0?m="checking":A.disconnected>0?m="disconnected":A.new>0?m="new":A.connected>0?m="connected":A.completed>0&&(m="completed"),m!==this.iceConnectionState){this.iceConnectionState=m;var v=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",v)}},p.prototype._updateConnectionState=function(){var m,A={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(S){S.iceTransport&&S.dtlsTransport&&!S.rejected&&(A[S.iceTransport.state]++,A[S.dtlsTransport.state]++)}),A.connected+=A.completed,m="new",A.failed>0?m="failed":A.connecting>0?m="connecting":A.disconnected>0?m="disconnected":A.new>0?m="new":A.connected>0&&(m="connected"),m!==this.connectionState){this.connectionState=m;var v=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",v)}},p.prototype.createOffer=function(){var m=this;if(m._isClosed)return Promise.reject(_a("InvalidStateError","Can not call createOffer after close"));var A=m.transceivers.filter(function(O){return"audio"===O.kind}).length,v=m.transceivers.filter(function(O){return"video"===O.kind}).length,S=arguments[0];if(S){if(S.mandatory||S.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==S.offerToReceiveAudio&&(A=!0===S.offerToReceiveAudio?1:!1===S.offerToReceiveAudio?0:S.offerToReceiveAudio),void 0!==S.offerToReceiveVideo&&(v=!0===S.offerToReceiveVideo?1:!1===S.offerToReceiveVideo?0:S.offerToReceiveVideo)}for(m.transceivers.forEach(function(O){"audio"===O.kind?--A<0&&(O.wantReceive=!1):"video"===O.kind&&--v<0&&(O.wantReceive=!1)});A>0||v>0;)A>0&&(m._createTransceiver("audio"),A--),v>0&&(m._createTransceiver("video"),v--);var I=Gr.writeSessionBoilerplate(m._sdpSessionId,m._sdpSessionVersion++);m.transceivers.forEach(function(O,B){var q=O.track,z=O.kind,te=O.mid||Gr.generateIdentifier();O.mid=te,O.iceGatherer||(O.iceGatherer=m._createIceGatherer(B,m.usingBundle));var de=r.RTCRtpSender.getCapabilities(z);o<15019&&(de.codecs=de.codecs.filter(function(Se){return"rtx"!==Se.name})),de.codecs.forEach(function(Se){"H264"===Se.name&&void 0===Se.parameters["level-asymmetry-allowed"]&&(Se.parameters["level-asymmetry-allowed"]="1"),O.remoteCapabilities&&O.remoteCapabilities.codecs&&O.remoteCapabilities.codecs.forEach(function(Me){Se.name.toLowerCase()===Me.name.toLowerCase()&&Se.clockRate===Me.clockRate&&(Se.preferredPayloadType=Me.payloadType)})}),de.headerExtensions.forEach(function(Se){(O.remoteCapabilities&&O.remoteCapabilities.headerExtensions||[]).forEach(function(Me){Se.uri===Me.uri&&(Se.id=Me.id)})});var ge=O.sendEncodingParameters||[{ssrc:1001*(2*B+1)}];q&&o>=15019&&"video"===z&&!ge[0].rtx&&(ge[0].rtx={ssrc:ge[0].ssrc+1}),O.wantReceive&&(O.rtpReceiver=new r.RTCRtpReceiver(O.dtlsTransport,z)),O.localCapabilities=de,O.sendEncodingParameters=ge}),"max-compat"!==m._config.bundlePolicy&&(I+="a=group:BUNDLE "+m.transceivers.map(function(O){return O.mid}).join(" ")+"\r\n"),I+="a=ice-options:trickle\r\n",m.transceivers.forEach(function(O,B){I+=gS(O,O.localCapabilities,"offer",O.stream,m._dtlsRole),I+="a=rtcp-rsize\r\n",!O.iceGatherer||"new"===m.iceGatheringState||0!==B&&m.usingBundle||(O.iceGatherer.getLocalCandidates().forEach(function(q){q.component=1,I+="a="+Gr.writeCandidate(q)+"\r\n"}),"completed"===O.iceGatherer.state&&(I+="a=end-of-candidates\r\n"))});var R=new r.RTCSessionDescription({type:"offer",sdp:I});return Promise.resolve(R)},p.prototype.createAnswer=function(){var m=this;if(m._isClosed)return Promise.reject(_a("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==m.signalingState&&"have-local-pranswer"!==m.signalingState)return Promise.reject(_a("InvalidStateError","Can not call createAnswer in signalingState "+m.signalingState));var A=Gr.writeSessionBoilerplate(m._sdpSessionId,m._sdpSessionVersion++);m.usingBundle&&(A+="a=group:BUNDLE "+m.transceivers.map(function(I){return I.mid}).join(" ")+"\r\n"),A+="a=ice-options:trickle\r\n";var v=Gr.getMediaSections(m._remoteDescription.sdp).length;m.transceivers.forEach(function(I,R){if(!(R+1>v)){if(I.rejected)return"application"===I.kind?A+="DTLS/SCTP"===I.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+I.protocol+" webrtc-datachannel\r\n":"audio"===I.kind?A+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===I.kind&&(A+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(A+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+I.mid+"\r\n");var O;I.stream&&("audio"===I.kind?O=I.stream.getAudioTracks()[0]:"video"===I.kind&&(O=I.stream.getVideoTracks()[0]),O&&o>=15019&&"video"===I.kind&&!I.sendEncodingParameters[0].rtx&&(I.sendEncodingParameters[0].rtx={ssrc:I.sendEncodingParameters[0].ssrc+1}));var B=_S(I.localCapabilities,I.remoteCapabilities);!B.codecs.filter(function(q){return"rtx"===q.name.toLowerCase()}).length&&I.sendEncodingParameters[0].rtx&&delete I.sendEncodingParameters[0].rtx,A+=gS(I,B,"answer",I.stream,m._dtlsRole),I.rtcpParameters&&I.rtcpParameters.reducedSize&&(A+="a=rtcp-rsize\r\n")}});var S=new r.RTCSessionDescription({type:"answer",sdp:A});return Promise.resolve(S)},p.prototype.addIceCandidate=function(m){var A,v=this;return m&&void 0===m.sdpMLineIndex&&!m.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(S,I){if(!v._remoteDescription)return I(_a("InvalidStateError","Can not add ICE candidate without a remote description"));if(m&&""!==m.candidate){var R=m.sdpMLineIndex;if(m.sdpMid)for(var O=0;O<v.transceivers.length;O++)if(v.transceivers[O].mid===m.sdpMid){R=O;break}var B=v.transceivers[R];if(!B)return I(_a("OperationError","Can not add ICE candidate"));if(B.rejected)return S();var q=Object.keys(m.candidate).length>0?Gr.parseCandidate(m.candidate):{};if("tcp"===q.protocol&&(0===q.port||9===q.port)||q.component&&1!==q.component)return S();if((0===R||R>0&&B.iceTransport!==v.transceivers[0].iceTransport)&&!Py(B.iceTransport,q))return I(_a("OperationError","Can not add ICE candidate"));var z=m.candidate.trim();0===z.indexOf("a=")&&(z=z.substr(2)),(A=Gr.getMediaSections(v._remoteDescription.sdp))[R]+="a="+(q.type?z:"end-of-candidates")+"\r\n",v._remoteDescription.sdp=Gr.getDescription(v._remoteDescription.sdp)+A.join("")}else for(var te=0;te<v.transceivers.length&&(v.transceivers[te].rejected||(v.transceivers[te].iceTransport.addRemoteCandidate({}),(A=Gr.getMediaSections(v._remoteDescription.sdp))[te]+="a=end-of-candidates\r\n",v._remoteDescription.sdp=Gr.getDescription(v._remoteDescription.sdp)+A.join(""),!v.usingBundle));te++);S()})},p.prototype.getStats=function(m){if(m&&m instanceof r.MediaStreamTrack){var A=null;if(this.transceivers.forEach(function(S){S.rtpSender&&S.rtpSender.track===m?A=S.rtpSender:S.rtpReceiver&&S.rtpReceiver.track===m&&(A=S.rtpReceiver)}),!A)throw _a("InvalidAccessError","Invalid selector.");return A.getStats()}var v=[];return this.transceivers.forEach(function(S){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(I){S[I]&&v.push(S[I].getStats())})}),Promise.all(v).then(function(S){var I=new Map;return S.forEach(function(R){R.forEach(function(O){I.set(O.id,O)})}),I})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(m){var A=r[m];if(A&&A.prototype&&A.prototype.getStats){var v=A.prototype.getStats;A.prototype.getStats=function(){return v.apply(this).then(function(S){var I=new Map;return Object.keys(S).forEach(function(R){var O;S[R].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(O=S[R]).type]||O.type,I.set(R,S[R])}),I})}}});var _=["createOffer","createAnswer"];return _.forEach(function(m){var A=p.prototype[m];p.prototype[m]=function(){var v=arguments;return"function"==typeof v[0]||"function"==typeof v[1]?A.apply(this,[arguments[2]]).then(function(S){"function"==typeof v[0]&&v[0].apply(null,[S])},function(S){"function"==typeof v[1]&&v[1].apply(null,[S])}):A.apply(this,arguments)}}),(_=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(m){var A=p.prototype[m];p.prototype[m]=function(){var v=arguments;return"function"==typeof v[1]||"function"==typeof v[2]?A.apply(this,arguments).then(function(){"function"==typeof v[1]&&v[1].apply(null)},function(S){"function"==typeof v[2]&&v[2].apply(null,[S])}):A.apply(this,arguments)}}),["getStats"].forEach(function(m){var A=p.prototype[m];p.prototype[m]=function(){var v=arguments;return"function"==typeof v[1]?A.apply(this,arguments).then(function(){"function"==typeof v[1]&&v[1].apply(null)}):A.apply(this,arguments)}}),p}(r,o.version);r.RTCPeerConnection=function(c){return c&&c.iceServers&&(c.iceServers=function(p,_){let m=!1;return(p=JSON.parse(JSON.stringify(p))).filter(A=>{if(A&&(A.urls||A.url)){let v=A.urls||A.url;A.url&&!A.urls&&RA("RTCIceServer.url","RTCIceServer.urls");const S="string"==typeof v;return S&&(v=[v]),v=v.filter(I=>{if(0===I.indexOf("stun:"))return!1;const R=I.startsWith("turn")&&!I.startsWith("turn:[")&&I.includes("transport=udp");return R&&!m?(m=!0,!0):R&&!m}),delete A.url,A.urls=S?v[0]:v,!!v.length}})}(c.iceServers),GR("ICE servers after filtering:",c.iceServers)),new a(c)},r.RTCPeerConnection.prototype=a.prototype}function KO(r){r.RTCRtpSender&&!("replaceTrack"in r.RTCRtpSender.prototype)&&(r.RTCRtpSender.prototype.replaceTrack=r.RTCRtpSender.prototype.setTrack)}var Io=Object.freeze({__proto__:null,shimPeerConnection:bw,shimReplaceTrack:KO,shimGetUserMedia:WO,shimGetDisplayMedia:Ew}),bh=Dv,zO=Pn,vS=ot,dg=Mi,qO=lm,Sw=Ud.exports;if(ou({target:"Promise",proto:!0,real:!0,forced:!!bh&&M(function(){bh.prototype.finally.call({then:function(){}},function(){})})},{finally:function(r){var o=dg(this,zO("Promise")),a=vS(r);return this.then(a?function(c){return qO(o,r()).then(function(){return c})}:r,a?function(c){return qO(o,r()).then(function(){throw c})}:r)}}),vS(bh)){var AS=zO("Promise").prototype.finally;bh.prototype.finally!==AS&&Sw(bh.prototype,"finally",AS,{unsafe:!0})}function My(r,o){const a=r&&r.navigator,c=r&&r.MediaStreamTrack;if(a.getUserMedia=function(p,_,m){RA("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(p).then(_,m)},!(o.version>55&&"autoGainControl"in a.mediaDevices.getSupportedConstraints())){const p=function(m,A,v){A in m&&!(v in m)&&(m[v]=m[A],delete m[A])},_=a.mediaDevices.getUserMedia.bind(a.mediaDevices);if(a.mediaDevices.getUserMedia=function(m){return"object"==typeof m&&"object"==typeof m.audio&&(m=JSON.parse(JSON.stringify(m)),p(m.audio,"autoGainControl","mozAutoGainControl"),p(m.audio,"noiseSuppression","mozNoiseSuppression")),_(m)},c&&c.prototype.getSettings){const m=c.prototype.getSettings;c.prototype.getSettings=function(){const A=m.apply(this,arguments);return p(A,"mozAutoGainControl","autoGainControl"),p(A,"mozNoiseSuppression","noiseSuppression"),A}}if(c&&c.prototype.applyConstraints){const m=c.prototype.applyConstraints;c.prototype.applyConstraints=function(A){return"audio"===this.kind&&"object"==typeof A&&(A=JSON.parse(JSON.stringify(A)),p(A,"autoGainControl","mozAutoGainControl"),p(A,"noiseSuppression","mozNoiseSuppression")),m.apply(this,[A])}}}}function YO(r){"object"==typeof r&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ny(r,o){if("object"!=typeof r||!r.RTCPeerConnection&&!r.mozRTCPeerConnection)return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),o.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(p){const _=r.RTCPeerConnection.prototype[p],m={[p](){return arguments[0]=new("addIceCandidate"===p?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),_.apply(this,arguments)}};r.RTCPeerConnection.prototype[p]=m[p]});const a={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[p,_,m]=arguments;return c.apply(this,[p||null]).then(A=>{if(o.version<53&&!_)try{A.forEach(v=>{v.type=a[v.type]||v.type})}catch(v){if("TypeError"!==v.name)throw v;A.forEach((S,I)=>{A.set(I,Object.assign({},S,{type:a[S.type]||S.type}))})}return A}).then(_,m)}}function Cw(r){if("object"!=typeof r||!r.RTCPeerConnection||!r.RTCRtpSender||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const o=r.RTCPeerConnection.prototype.getSenders;o&&(r.RTCPeerConnection.prototype.getSenders=function(){const c=o.apply(this,[]);return c.forEach(p=>p._pc=this),c});const a=r.RTCPeerConnection.prototype.addTrack;a&&(r.RTCPeerConnection.prototype.addTrack=function(){const c=a.apply(this,arguments);return c._pc=this,c}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):qn.resolve(new Map)}}function $O(r){if("object"!=typeof r||!r.RTCPeerConnection||!r.RTCRtpSender||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const o=r.RTCPeerConnection.prototype.getReceivers;o&&(r.RTCPeerConnection.prototype.getReceivers=function(){const a=o.apply(this,[]);return a.forEach(c=>c._pc=this),a}),Pm(r,"track",a=>(a.receiver._pc=a.srcElement,a)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function UN(r){r.RTCPeerConnection&&!("removeStream"in r.RTCPeerConnection.prototype)&&(r.RTCPeerConnection.prototype.removeStream=function(o){RA("removeStream","removeTrack"),this.getSenders().forEach(a=>{a.track&&o.getTracks().includes(a.track)&&this.removeTrack(a)})})}function pg(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function VN(r){if("object"!=typeof r||!r.RTCPeerConnection)return;const o=r.RTCPeerConnection.prototype.addTransceiver;o&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const a=arguments[1],c=a&&"sendEncodings"in a;c&&a.sendEncodings.forEach(_=>{if("rid"in _&&!/^[a-z0-9]{0,16}$/i.test(_.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in _&&!(parseFloat(_.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in _&&!(parseFloat(_.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const p=o.apply(this,arguments);if(c){const{sender:_}=p,m=_.getParameters();(!("encodings"in m)||1===m.encodings.length&&0===Object.keys(m.encodings[0]).length)&&(m.encodings=a.sendEncodings,_.sendEncodings=a.sendEncodings,this.setParametersPromises.push(_.setParameters(m).then(()=>{delete _.sendEncodings}).catch(()=>{delete _.sendEncodings})))}return p})}function jN(r){if("object"!=typeof r||!r.RTCRtpSender)return;const o=r.RTCRtpSender.prototype.getParameters;o&&(r.RTCRtpSender.prototype.getParameters=function(){const a=o.apply(this,arguments);return"encodings"in a||(a.encodings=[].concat(this.sendEncodings||[{}])),a})}function QN(r){if("object"!=typeof r||!r.RTCPeerConnection)return;const o=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?qn.all(this.setParametersPromises).then(()=>o.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):o.apply(this,arguments)}}function Iw(r){if("object"!=typeof r||!r.RTCPeerConnection)return;const o=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?qn.all(this.setParametersPromises).then(()=>o.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):o.apply(this,arguments)}}var yS=Object.freeze({__proto__:null,shimOnTrack:YO,shimPeerConnection:Ny,shimSenderGetStats:Cw,shimReceiverGetStats:$O,shimRemoveStream:UN,shimRTCDataChannel:pg,shimAddTransceiver:VN,shimGetParameters:jN,shimCreateOffer:QN,shimCreateAnswer:Iw,shimGetUserMedia:My,shimGetDisplayMedia:function(r,o){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(a){if(!a||!a.video){const c=new DOMException("getDisplayMedia without video constraints is undefined");return c.name="NotFoundError",c.code=8,qn.reject(c)}return!0===a.video?a.video={mediaSource:o}:a.video.mediaSource=o,r.navigator.mediaDevices.getUserMedia(a)})}});function ww(r){if("object"==typeof r&&r.RTCPeerConnection){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(a){this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(c=>o.call(this,c,a)),a.getVideoTracks().forEach(c=>o.call(this,c,a))},r.RTCPeerConnection.prototype.addTrack=function(a){for(var c=arguments.length,p=new Array(c>1?c-1:0),_=1;_<c;_++)p[_-1]=arguments[_];return p&&p.forEach(m=>{this._localStreams?this._localStreams.includes(m)||this._localStreams.push(m):this._localStreams=[m]}),o.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(o){this._localStreams||(this._localStreams=[]);const a=this._localStreams.indexOf(o);if(-1===a)return;this._localStreams.splice(a,1);const c=o.getTracks();this.getSenders().forEach(p=>{c.includes(p.track)&&this.removeTrack(p)})})}}function Tw(r){if("object"==typeof r&&r.RTCPeerConnection&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(a){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=a),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(p=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(p))return;this._remoteStreams.push(p);const _=new Event("addstream");_.stream=p,this.dispatchEvent(_)})})}});const o=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(p=>{if(a._remoteStreams||(a._remoteStreams=[]),a._remoteStreams.indexOf(p)>=0)return;a._remoteStreams.push(p);const _=new Event("addstream");_.stream=p,a.dispatchEvent(_)})}),o.apply(a,arguments)}}}function JO(r){if("object"!=typeof r||!r.RTCPeerConnection)return;const o=r.RTCPeerConnection.prototype,a=o.createOffer,c=o.createAnswer,p=o.setLocalDescription,_=o.setRemoteDescription,m=o.addIceCandidate;o.createOffer=function(v,S){const R=a.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return S?(R.then(v,S),qn.resolve()):R},o.createAnswer=function(v,S){const R=c.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return S?(R.then(v,S),qn.resolve()):R};let A=function(v,S,I){const R=p.apply(this,[v]);return I?(R.then(S,I),qn.resolve()):R};o.setLocalDescription=A,A=function(v,S,I){const R=_.apply(this,[v]);return I?(R.then(S,I),qn.resolve()):R},o.setRemoteDescription=A,A=function(v,S,I){const R=m.apply(this,[v]);return I?(R.then(S,I),qn.resolve()):R},o.addIceCandidate=A}function Rw(r){const o=r&&r.navigator;if(o.mediaDevices&&o.mediaDevices.getUserMedia){const a=o.mediaDevices,c=a.getUserMedia.bind(a);o.mediaDevices.getUserMedia=p=>c(ES(p))}!o.getUserMedia&&o.mediaDevices&&o.mediaDevices.getUserMedia&&(o.getUserMedia=function(a,c,p){o.mediaDevices.getUserMedia(a).then(c,p)}.bind(o))}function ES(r){return r&&void 0!==r.video?Object.assign({},r,{video:WR(r.video)}):r}function XO(r){if(!r.RTCPeerConnection)return;const o=r.RTCPeerConnection;r.RTCPeerConnection=function(a,c){if(a&&a.iceServers){const p=[];for(let _=0;_<a.iceServers.length;_++){let m=a.iceServers[_];!m.hasOwnProperty("urls")&&m.hasOwnProperty("url")?(RA("RTCIceServer.url","RTCIceServer.urls"),m=JSON.parse(JSON.stringify(m)),m.urls=m.url,delete m.url,p.push(m)):p.push(a.iceServers[_])}a.iceServers=p}return new o(a,c)},r.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in o&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:()=>o.generateCertificate})}function Dw(r){"object"==typeof r&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ow(r){const o=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(a){if(a){void 0!==a.offerToReceiveAudio&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);const c=this.getTransceivers().find(_=>"audio"===_.receiver.track.kind);!1===a.offerToReceiveAudio&&c?"sendrecv"===c.direction?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":"recvonly"===c.direction&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):!0!==a.offerToReceiveAudio||c||this.addTransceiver("audio"),void 0!==a.offerToReceiveVideo&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);const p=this.getTransceivers().find(_=>"video"===_.receiver.track.kind);!1===a.offerToReceiveVideo&&p?"sendrecv"===p.direction?p.setDirection?p.setDirection("sendonly"):p.direction="sendonly":"recvonly"===p.direction&&(p.setDirection?p.setDirection("inactive"):p.direction="inactive"):!0!==a.offerToReceiveVideo||p||this.addTransceiver("video")}return o.apply(this,arguments)}}function ZO(r){"object"!=typeof r||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}var kw=Object.freeze({__proto__:null,shimLocalStreamsAPI:ww,shimRemoteStreamsAPI:Tw,shimCallbacksAPI:JO,shimGetUserMedia:Rw,shimConstraints:ES,shimRTCIceServerUrls:XO,shimTrackEventTransceiver:Dw,shimCreateOfferLegacy:Ow,shimAudioContext:ZO}),HN=Yp,J_=dh,tk=Fo("".replace),xy="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",Pw=RegExp("^"+xy+xy+"*"),Ly=RegExp(xy+xy+"*$"),By=function(r){return function(o){var a=J_(HN(o));return 1&r&&(a=tk(a,Pw,"")),2&r&&(a=tk(a,Ly,"")),a}},nk={start:By(1),end:By(2),trim:By(3)},AU=w2.PROPER,rk=rs,ik="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",GN=nk.trim;Yn({target:"String",proto:!0,forced:function(r){return rk(function(){return!!ik[r]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[r]()||AU&&ik[r].name!==r})}("trim")},{trim:function(){return GN(this)}});var Mw=Nl("String").trim,yU=Nc,gd=Mw,Nw=String.prototype,hg=function(r){var o=r.trim;return"string"==typeof r||r===Nw||yU(Nw,r)&&o===Nw.trim?gd:o},WN=ae;ou({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return WN(URL.prototype.toString,this)}});var ok={exports:{}};!function(r){var o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(a){return hg(a).call(a).split("\n").map(function(c){return hg(c).call(c)})},o.splitSections=function(a){return a.split("\nm=").map(function(c,p){var _;return hg(_=p>0?"m="+c:c).call(_)+"\r\n"})},o.getDescription=function(a){var c=o.splitSections(a);return c&&c[0]},o.getMediaSections=function(a){var c=o.splitSections(a);return c.shift(),c},o.matchPrefix=function(a,c){return o.splitLines(a).filter(function(p){return 0===p.indexOf(c)})},o.parseCandidate=function(a){for(var c,p={foundation:(c=0===a.indexOf("a=candidate:")?a.substring(12).split(" "):a.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},_=8;_<c.length;_+=2)switch(c[_]){case"raddr":p.relatedAddress=c[_+1];break;case"rport":p.relatedPort=parseInt(c[_+1],10);break;case"tcptype":p.tcpType=c[_+1];break;case"ufrag":p.ufrag=c[_+1],p.usernameFragment=c[_+1];break;default:p[c[_]]=c[_+1]}return p},o.writeCandidate=function(a){var c=[];c.push(a.foundation),c.push(a.component),c.push(a.protocol.toUpperCase()),c.push(a.priority),c.push(a.address||a.ip),c.push(a.port);var p=a.type;return c.push("typ"),c.push(p),"host"!==p&&a.relatedAddress&&a.relatedPort&&(c.push("raddr"),c.push(a.relatedAddress),c.push("rport"),c.push(a.relatedPort)),a.tcpType&&"tcp"===a.protocol.toLowerCase()&&(c.push("tcptype"),c.push(a.tcpType)),(a.usernameFragment||a.ufrag)&&(c.push("ufrag"),c.push(a.usernameFragment||a.ufrag)),"candidate:"+c.join(" ")},o.parseIceOptions=function(a){return a.substr(14).split(" ")},o.parseRtpMap=function(a){var c=a.substr(9).split(" "),p={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),p.name=c[0],p.clockRate=parseInt(c[1],10),p.channels=3===c.length?parseInt(c[2],10):1,p.numChannels=p.channels,p},o.writeRtpMap=function(a){var c=a.payloadType;void 0!==a.preferredPayloadType&&(c=a.preferredPayloadType);var p=a.channels||a.numChannels||1;return"a=rtpmap:"+c+" "+a.name+"/"+a.clockRate+(1!==p?"/"+p:"")+"\r\n"},o.parseExtmap=function(a){var c=a.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},o.writeExtmap=function(a){return"a=extmap:"+(a.id||a.preferredId)+(a.direction&&"sendrecv"!==a.direction?"/"+a.direction:"")+" "+a.uri+"\r\n"},o.parseFmtp=function(a){for(var c,p={},_=a.substr(a.indexOf(" ")+1).split(";"),m=0;m<_.length;m++){var A,v;c=hg(A=_[m]).call(A).split("="),p[hg(v=c[0]).call(v)]=c[1]}return p},o.writeFmtp=function(a){var c="",p=a.payloadType;if(void 0!==a.preferredPayloadType&&(p=a.preferredPayloadType),a.parameters&&Object.keys(a.parameters).length){var _=[];Object.keys(a.parameters).forEach(function(m){_.push(a.parameters[m]?m+"="+a.parameters[m]:m)}),c+="a=fmtp:"+p+" "+_.join(";")+"\r\n"}return c},o.parseRtcpFb=function(a){var c=a.substr(a.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},o.writeRtcpFb=function(a){var c="",p=a.payloadType;return void 0!==a.preferredPayloadType&&(p=a.preferredPayloadType),a.rtcpFeedback&&a.rtcpFeedback.length&&a.rtcpFeedback.forEach(function(_){c+="a=rtcp-fb:"+p+" "+_.type+(_.parameter&&_.parameter.length?" "+_.parameter:"")+"\r\n"}),c},o.parseSsrcMedia=function(a){var c=a.indexOf(" "),p={ssrc:parseInt(a.substr(7,c-7),10)},_=a.indexOf(":",c);return _>-1?(p.attribute=a.substr(c+1,_-c-1),p.value=a.substr(_+1)):p.attribute=a.substr(c+1),p},o.parseSsrcGroup=function(a){var c=a.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(p){return parseInt(p,10)})}},o.getMid=function(a){var c=o.matchPrefix(a,"a=mid:")[0];if(c)return c.substr(6)},o.parseFingerprint=function(a){var c=a.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},o.getDtlsParameters=function(a,c){return{role:"auto",fingerprints:o.matchPrefix(a+c,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(a,c){var p="a=setup:"+c+"\r\n";return a.fingerprints.forEach(function(_){p+="a=fingerprint:"+_.algorithm+" "+_.value+"\r\n"}),p},o.parseCryptoLine=function(a){var c=a.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},o.writeCryptoLine=function(a){return"a=crypto:"+a.tag+" "+a.cryptoSuite+" "+("object"==typeof a.keyParams?o.writeCryptoKeyParams(a.keyParams):a.keyParams)+(a.sessionParams?" "+a.sessionParams.join(" "):"")+"\r\n"},o.parseCryptoKeyParams=function(a){if(0!==a.indexOf("inline:"))return null;var c=a.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},o.writeCryptoKeyParams=function(a){return a.keyMethod+":"+a.keySalt+(a.lifeTime?"|"+a.lifeTime:"")+(a.mkiValue&&a.mkiLength?"|"+a.mkiValue+":"+a.mkiLength:"")},o.getCryptoParameters=function(a,c){return o.matchPrefix(a+c,"a=crypto:").map(o.parseCryptoLine)},o.getIceParameters=function(a,c){var p=o.matchPrefix(a+c,"a=ice-ufrag:")[0],_=o.matchPrefix(a+c,"a=ice-pwd:")[0];return p&&_?{usernameFragment:p.substr(12),password:_.substr(10)}:null},o.writeIceParameters=function(a){return"a=ice-ufrag:"+a.usernameFragment+"\r\na=ice-pwd:"+a.password+"\r\n"},o.parseRtpParameters=function(a){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},p=o.splitLines(a)[0].split(" "),_=3;_<p.length;_++){var m=p[_],A=o.matchPrefix(a,"a=rtpmap:"+m+" ")[0];if(A){var v=o.parseRtpMap(A),S=o.matchPrefix(a,"a=fmtp:"+m+" ");switch(v.parameters=S.length?o.parseFmtp(S[0]):{},v.rtcpFeedback=o.matchPrefix(a,"a=rtcp-fb:"+m+" ").map(o.parseRtcpFb),c.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(v.name.toUpperCase())}}}return o.matchPrefix(a,"a=extmap:").forEach(function(I){c.headerExtensions.push(o.parseExtmap(I))}),c},o.writeRtpDescription=function(a,c){var p="";p+="m="+a+" ",p+=c.codecs.length>0?"9":"0",p+=" UDP/TLS/RTP/SAVPF ",p+=c.codecs.map(function(m){return void 0!==m.preferredPayloadType?m.preferredPayloadType:m.payloadType}).join(" ")+"\r\n",p+="c=IN IP4 0.0.0.0\r\n",p+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(m){p+=o.writeRtpMap(m),p+=o.writeFmtp(m),p+=o.writeRtcpFb(m)});var _=0;return c.codecs.forEach(function(m){m.maxptime>_&&(_=m.maxptime)}),_>0&&(p+="a=maxptime:"+_+"\r\n"),p+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(m){p+=o.writeExtmap(m)}),p},o.parseRtpEncodingParameters=function(a){var c,p=[],_=o.parseRtpParameters(a),m=-1!==_.fecMechanisms.indexOf("RED"),A=-1!==_.fecMechanisms.indexOf("ULPFEC"),v=o.matchPrefix(a,"a=ssrc:").map(function(O){return o.parseSsrcMedia(O)}).filter(function(O){return"cname"===O.attribute}),S=v.length>0&&v[0].ssrc,I=o.matchPrefix(a,"a=ssrc-group:FID").map(function(O){return O.substr(17).split(" ").map(function(B){return parseInt(B,10)})});I.length>0&&I[0].length>1&&I[0][0]===S&&(c=I[0][1]),_.codecs.forEach(function(O){if("RTX"===O.name.toUpperCase()&&O.parameters.apt){var B={ssrc:S,codecPayloadType:parseInt(O.parameters.apt,10)};S&&c&&(B.rtx={ssrc:c}),p.push(B),m&&((B=JSON.parse(JSON.stringify(B))).fec={ssrc:S,mechanism:A?"red+ulpfec":"red"},p.push(B))}}),0===p.length&&S&&p.push({ssrc:S});var R=o.matchPrefix(a,"b=");return R.length&&(R=0===R[0].indexOf("b=TIAS:")?parseInt(R[0].substr(7),10):0===R[0].indexOf("b=AS:")?1e3*parseInt(R[0].substr(5),10)*.95-16e3:void 0,p.forEach(function(O){O.maxBitrate=R})),p},o.parseRtcpParameters=function(a){var c={},p=o.matchPrefix(a,"a=ssrc:").map(function(A){return o.parseSsrcMedia(A)}).filter(function(A){return"cname"===A.attribute})[0];p&&(c.cname=p.value,c.ssrc=p.ssrc);var _=o.matchPrefix(a,"a=rtcp-rsize");c.reducedSize=_.length>0,c.compound=0===_.length;var m=o.matchPrefix(a,"a=rtcp-mux");return c.mux=m.length>0,c},o.parseMsid=function(a){var c,p=o.matchPrefix(a,"a=msid:");if(1===p.length)return{stream:(c=p[0].substr(7).split(" "))[0],track:c[1]};var _=o.matchPrefix(a,"a=ssrc:").map(function(m){return o.parseSsrcMedia(m)}).filter(function(m){return"msid"===m.attribute});return _.length>0?{stream:(c=_[0].value.split(" "))[0],track:c[1]}:void 0},o.parseSctpDescription=function(a){var c,p=o.parseMLine(a),_=o.matchPrefix(a,"a=max-message-size:");_.length>0&&(c=parseInt(_[0].substr(19),10)),isNaN(c)&&(c=65536);var m=o.matchPrefix(a,"a=sctp-port:");if(m.length>0)return{port:parseInt(m[0].substr(12),10),protocol:p.fmt,maxMessageSize:c};if(o.matchPrefix(a,"a=sctpmap:").length>0){var A=o.matchPrefix(a,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(A[0],10),protocol:A[1],maxMessageSize:c}}},o.writeSctpDescription=function(a,c){var p=[];return p="DTLS/SCTP"!==a.protocol?["m="+a.kind+" 9 "+a.protocol+" "+c.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+c.port+"\r\n"]:["m="+a.kind+" 9 "+a.protocol+" "+c.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+c.port+" "+c.protocol+" 65535\r\n"],void 0!==c.maxMessageSize&&p.push("a=max-message-size:"+c.maxMessageSize+"\r\n"),p.join("")},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(a,c,p){var _=void 0!==c?c:2;return"v=0\r\no="+(p||"thisisadapterortc")+" "+(a||o.generateSessionId())+" "+_+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.writeMediaSection=function(a,c,p,_){var m=o.writeRtpDescription(a.kind,c);if(m+=o.writeIceParameters(a.iceGatherer.getLocalParameters()),m+=o.writeDtlsParameters(a.dtlsTransport.getLocalParameters(),"offer"===p?"actpass":"active"),m+="a=mid:"+a.mid+"\r\n",m+=a.direction?"a="+a.direction+"\r\n":a.rtpSender&&a.rtpReceiver?"a=sendrecv\r\n":a.rtpSender?"a=sendonly\r\n":a.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",a.rtpSender){var A="msid:"+_.id+" "+a.rtpSender.track.id+"\r\n";m+="a="+A,m+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" "+A,a.sendEncodingParameters[0].rtx&&(m+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" "+A,m+="a=ssrc-group:FID "+a.sendEncodingParameters[0].ssrc+" "+a.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return m+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",a.rtpSender&&a.sendEncodingParameters[0].rtx&&(m+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),m},o.getDirection=function(a,c){for(var p=o.splitLines(a),_=0;_<p.length;_++)switch(p[_]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return p[_].substr(2)}return c?o.getDirection(c):"sendrecv"},o.getKind=function(a){return o.splitLines(a)[0].split(" ")[0].substr(2)},o.isRejected=function(a){return"0"===a.split(" ",2)[1]},o.parseMLine=function(a){var c=o.splitLines(a)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},o.parseOLine=function(a){var c=o.matchPrefix(a,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},o.isValidSDP=function(a){if("string"!=typeof a||0===a.length)return!1;for(var c=o.splitLines(a),p=0;p<c.length;p++)if(c[p].length<2||"="!==c[p].charAt(1))return!1;return!0},r.exports=o}(ok);var bS=ok.exports;function SS(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const o=r.RTCIceCandidate;r.RTCIceCandidate=function(a){if("object"==typeof a&&a.candidate&&0===a.candidate.indexOf("a=")&&((a=JSON.parse(JSON.stringify(a))).candidate=a.candidate.substr(2)),a.candidate&&a.candidate.length){const c=new o(a),p=bS.parseCandidate(a.candidate),_=Object.assign(c,p);return _.toJSON=function(){return{candidate:_.candidate,sdpMid:_.sdpMid,sdpMLineIndex:_.sdpMLineIndex,usernameFragment:_.usernameFragment}},_}return new o(a)},r.RTCIceCandidate.prototype=o.prototype,Pm(r,"icecandidate",a=>(a.candidate&&Object.defineProperty(a,"candidate",{value:new r.RTCIceCandidate(a.candidate),writable:"false"}),a))}function Fy(r,o){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const a=function(A){if(!A||!A.sdp)return!1;const v=bS.splitSections(A.sdp);return v.shift(),v.some(S=>{const I=bS.parseMLine(S);return I&&"application"===I.kind&&-1!==I.protocol.indexOf("SCTP")})},c=function(A){const v=A.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===v||v.length<2)return-1;const S=parseInt(v[1],10);return S!=S?-1:S},p=function(A){let v=65536;return"firefox"===o.browser&&(v=o.version<57?-1===A?16384:2147483637:o.version<60?57===o.version?65535:65536:2147483637),v},_=function(A,v){let S=65536;"firefox"===o.browser&&57===o.version&&(S=65535);const I=bS.matchPrefix(A.sdp,"a=max-message-size:");return I.length>0?S=parseInt(I[0].substr(19),10):"firefox"===o.browser&&-1!==v&&(S=2147483637),S},m=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===o.browser&&o.version>=76){const{sdpSemantics:A}=this.getConfiguration();"plan-b"===A&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(a(arguments[0])){const A=c(arguments[0]),v=p(A),S=_(arguments[0],A);let I;I=0===v&&0===S?Number.POSITIVE_INFINITY:0===v||0===S?Math.max(v,S):Math.min(v,S);const R={};Object.defineProperty(R,"maxMessageSize",{get:()=>I}),this._sctp=R}return m.apply(this,arguments)}}function Uy(r){if(!r.RTCPeerConnection||!("createDataChannel"in r.RTCPeerConnection.prototype))return;function o(c,p){const _=c.send;c.send=function(){const m=arguments[0];if("open"===c.readyState&&p.sctp&&(m.length||m.size||m.byteLength)>p.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+p.sctp.maxMessageSize+" bytes)");return _.apply(c,arguments)}}const a=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const c=a.apply(this,arguments);return o(c,this),c},Pm(r,"datachannel",c=>(o(c.channel,c.target),c))}function xw(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const o=r.RTCPeerConnection.prototype;Object.defineProperty(o,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(o,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(a){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),a&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=a)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(a=>{const c=o[a];o[a]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=p=>{const _=p.target;if(_._lastConnectionState!==_.connectionState){_._lastConnectionState=_.connectionState;const m=new Event("connectionstatechange",p);_.dispatchEvent(m)}return p},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function Lw(r,o){if(!r.RTCPeerConnection||"chrome"===o.browser&&o.version>=71||"safari"===o.browser&&o.version>=605)return;const a=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(c){if(c&&c.sdp&&-1!==c.sdp.indexOf("\na=extmap-allow-mixed")){const p=c.sdp.split("\n").filter(_=>"a=extmap-allow-mixed"!==hg(_).call(_)).join("\n");r.RTCSessionDescription&&c instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:c.type,sdp:p}):c.sdp=p}return a.apply(this,arguments)}}function CS(r,o){if(!r.RTCPeerConnection||!r.RTCPeerConnection.prototype)return;const a=r.RTCPeerConnection.prototype.addIceCandidate;a&&0!==a.length&&(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===o.browser&&o.version<78||"firefox"===o.browser&&o.version<68||"safari"===o.browser)&&arguments[0]&&""===arguments[0].candidate?qn.resolve():a.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),qn.resolve())})}var KN=Object.freeze({__proto__:null,shimRTCIceCandidate:SS,shimMaxMessageSize:Fy,shimSendThrowTypeError:Uy,shimConnectionState:xw,removeExtmapAllowMixed:Lw,shimAddIceCandidateNullOrEmpty:CS});let js,bi;(function(){let{window:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const a=GR,c=DA(r),p={browserDetails:c,commonShim:KN,extractVersion:TA,disableLog:HR,disableWarnings:a2};switch(c.browser){case"chrome":if(!FN||!GO||!o.shimChrome)return a("Chrome shim is not included in this adapter release."),p;if(null===c.version)return a("Chrome shim can not determine version, not shimming."),p;a("adapter.js shimming chrome."),p.browserShim=FN,CS(r,c),mi(r,c),HO(r),GO(r,c),mS(r),Xs(r,c),Eh(r),ug(r),Vl(r),Jo(r,c),SS(r),xw(r),Fy(r,c),Uy(r),Lw(r,c);break;case"firefox":if(!yS||!Ny||!o.shimFirefox)return a("Firefox shim is not included in this adapter release."),p;a("adapter.js shimming firefox."),p.browserShim=yS,CS(r,c),My(r,c),Ny(r,c),YO(r),UN(r),Cw(r),$O(r),pg(r),VN(r),jN(r),QN(r),Iw(r),SS(r),xw(r),Fy(r,c),Uy(r);break;case"edge":if(!Io||!bw||!o.shimEdge)return a("MS edge shim is not included in this adapter release."),p;a("adapter.js shimming edge."),p.browserShim=Io,WO(r),Ew(r),bw(r,c),KO(r),Fy(r,c),Uy(r);break;case"safari":if(!kw||!o.shimSafari)return a("Safari shim is not included in this adapter release."),p;a("adapter.js shimming safari."),p.browserShim=kw,CS(r,c),XO(r),Ow(r),JO(r),ww(r),Tw(r),Dw(r),Rw(r),ZO(r),SS(r),Fy(r,c),Uy(r),Lw(r,c);break;default:a("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(r){r.WIN_10="Windows 10",r.WIN_81="Windows 8.1",r.WIN_8="Windows 8",r.WIN_7="Windows 7",r.WIN_VISTA="Windows Vista",r.WIN_SERVER_2003="Windows Server 2003",r.WIN_XP="Windows XP",r.WIN_2000="Windows 2000",r.ANDROID="Android",r.OPEN_BSD="Open BSD",r.SUN_OS="Sun OS",r.LINUX="Linux",r.IOS="iOS",r.MAC_OS="Mac OS",r.QNX="QNX",r.UNIX="UNIX",r.BEOS="BeOS",r.OS_2="OS/2",r.SEARCH_BOT="Search Bot"}(js||(js={})),function(r){r.CHROME="Chrome",r.SAFARI="Safari",r.EDGE="Edge",r.FIREFOX="Firefox",r.OPERA="OPR",r.QQ="QQBrowser",r.WECHAT="MicroMessenger"}(bi||(bi={}));var Bw={exports:{}};!function(r,o){!function(a,c){var p="function",_="object",m="string",A="model",v="name",S="type",I="vendor",R="version",O="architecture",B="console",q="mobile",z="tablet",te="smarttv",de="wearable",ge="embedded",Se={extend:function(wn,yn){var Ct={};for(var We in wn)Ct[We]=yn[We]&&yn[We].length%2==0?yn[We].concat(wn[We]):wn[We];return Ct},has:function(wn,yn){return typeof wn===m&&-1!==yn.toLowerCase().indexOf(wn.toLowerCase())},lowerize:function(wn){return wn.toLowerCase()},major:function(wn){return typeof wn===m?wn.replace(/[^\d\.]/g,"").split(".")[0]:c},trim:function(wn,yn){return wn=wn.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===yn?wn:wn.substring(0,255)}},Me={rgx:function(wn,yn){for(var Ct,We,lt,At,n,t,e=0;e<yn.length&&!n;){var s=yn[e],d=yn[e+1];for(Ct=We=0;Ct<s.length&&!n;)if(n=s[Ct++].exec(wn))for(lt=0;lt<d.length;lt++)t=n[++We],typeof(At=d[lt])===_&&At.length>0?2==At.length?this[At[0]]=typeof At[1]==p?At[1].call(this,t):At[1]:3==At.length?this[At[0]]=typeof At[1]!==p||At[1].exec&&At[1].test?t?t.replace(At[1],At[2]):c:t?At[1].call(this,t,At[2]):c:4==At.length&&(this[At[0]]=t?At[3].call(this,t.replace(At[1],At[2])):c):this[At]=t||c;e+=2}},str:function(wn,yn){for(var Ct in yn)if(typeof yn[Ct]===_&&yn[Ct].length>0){for(var We=0;We<yn[Ct].length;We++)if(Se.has(yn[Ct][We],wn))return"?"===Ct?c:Ct}else if(Se.has(yn[Ct],wn))return"?"===Ct?c:Ct;return wn}},dt={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},kt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[R,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[R,[v,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[v,R],[/opios[\/\s]+([\w\.]+)/i],[R,[v,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[R,[v,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[v,R],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[R,[v,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[R,[v,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[R,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[R,[v,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[R,[v,"IE"]],[/yabrowser\/([\w\.]+)/i],[R,[v,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure Browser"],R],[/focus\/([\w\.]+)/i],[R,[v,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[R,[v,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[R,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[R,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[R,[v,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[R,[v,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[R,[v,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[v,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1 Browser"],R],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],R],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[v,R],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[v],[/;fbav\/([\w\.]+);/i],[R,[v,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[v,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[v,R],[/\bgsa\/([\w\.]+)\s.*safari\//i],[R,[v,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[R,[v,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[v,"Chrome WebView"],R],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[R,[v,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[v,R],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[R,[v,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[R,v],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[v,[R,Me.str,dt.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[v,R],[/(navigator|netscape)\/([\w\.-]+)/i],[[v,"Netscape"],R],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[R,[v,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[v,R]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[O,"amd64"]],[/(ia32(?=;))/i],[[O,Se.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[O,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[O,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[O,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[O,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[O,/ower/,"",Se.lowerize]],[/(sun4\w)[;\)]/i],[[O,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[O,Se.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[A,[I,"Samsung"],[S,z]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[A,[I,"Samsung"],[S,q]],[/\((ip(?:hone|od)[\s\w]*);/i],[A,[I,"Apple"],[S,q]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[A,[I,"Apple"],[S,z]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[A,[I,"Huawei"],[S,z]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[A,[I,"Huawei"],[S,q]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[A,/_/g," "],[I,"Xiaomi"],[S,q]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[A,/_/g," "],[I,"Xiaomi"],[S,z]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[A,[I,"OPPO"],[S,q]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[A,[I,"Vivo"],[S,q]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[A,[I,"Realme"],[S,q]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[A,[I,"Motorola"],[S,q]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[A,[I,"Motorola"],[S,z]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[A,[I,"LG"],[S,z]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[A,[I,"LG"],[S,q]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[A,[I,"Lenovo"],[S,z]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[A,/_/g," "],[I,"Nokia"],[S,q]],[/droid.+;\s(pixel\sc)[\s)]/i],[A,[I,"Google"],[S,z]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[A,[I,"Google"],[S,q]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[A,[I,"Sony"],[S,q]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[A,"Xperia Tablet"],[I,"Sony"],[S,z]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[A,[I,"OnePlus"],[S,q]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[A,[I,"Amazon"],[S,z]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[A,"Fire Phone"],[I,"Amazon"],[S,q]],[/\((playbook);[\w\s\),;-]+(rim)/i],[A,I,[S,z]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[A,[I,"BlackBerry"],[S,q]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[A,[I,"ASUS"],[S,z]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[A,[I,"ASUS"],[S,q]],[/(nexus\s9)/i],[A,[I,"HTC"],[S,z]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[I,[A,/_/g," "],[S,q]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[A,[I,"Acer"],[S,z]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[A,[I,"Meizu"],[S,q]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[I,A,[S,q]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[I,A,[S,z]],[/\s(surface\sduo)\s/i],[A,[I,"Microsoft"],[S,z]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[A,[I,"Fairphone"],[S,q]],[/\s(u304aa)\sbuild/i],[A,[I,"AT&T"],[S,q]],[/sie-(\w*)/i],[A,[I,"Siemens"],[S,q]],[/[;\/]\s?(rct\w+)\sbuild/i],[A,[I,"RCA"],[S,z]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[A,[I,"Dell"],[S,z]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[A,[I,"Verizon"],[S,z]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[A,[I,"Barnes & Noble"],[S,z]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[A,[I,"NuVision"],[S,z]],[/;\s(k88)\sbuild/i],[A,[I,"ZTE"],[S,z]],[/;\s(nx\d{3}j)\sbuild/i],[A,[I,"ZTE"],[S,q]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[A,[I,"Swiss"],[S,q]],[/[;\/]\s?(zur\d{3})\sbuild/i],[A,[I,"Swiss"],[S,z]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[A,[I,"Zeki"],[S,z]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[I,"Dragon Touch"],A,[S,z]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[A,[I,"Insignia"],[S,z]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[A,[I,"NextBook"],[S,z]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[I,"Voice"],A,[S,q]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[I,"LvTel"],A,[S,q]],[/;\s(ph-1)\s/i],[A,[I,"Essential"],[S,q]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[A,[I,"Envizen"],[S,z]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[A,[I,"MachSpeed"],[S,z]],[/[;\/]\s?tu_(1491)\sbuild/i],[A,[I,"Rotor"],[S,z]],[/(shield[\w\s]+)\sbuild/i],[A,[I,"Nvidia"],[S,z]],[/(sprint)\s(\w+)/i],[I,A,[S,q]],[/(kin\.[onetw]{3})/i],[[A,/\./g," "],[I,"Microsoft"],[S,q]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[A,[I,"Zebra"],[S,z]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[A,[I,"Zebra"],[S,q]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[I,A,[S,B]],[/droid.+;\s(shield)\sbuild/i],[A,[I,"Nvidia"],[S,B]],[/(playstation\s[345portablevi]+)/i],[A,[I,"Sony"],[S,B]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[A,[I,"Microsoft"],[S,B]],[/smart-tv.+(samsung)/i],[I,[S,te]],[/hbbtv.+maple;(\d+)/i],[[A,/^/,"SmartTV"],[I,"Samsung"],[S,te]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[I,"LG"],[S,te]],[/(apple)\s?tv/i],[I,[A,"Apple TV"],[S,te]],[/crkey/i],[[A,"Chromecast"],[I,"Google"],[S,te]],[/droid.+aft([\w])(\sbuild\/|\))/i],[A,[I,"Amazon"],[S,te]],[/\(dtv[\);].+(aquos)/i],[A,[I,"Sharp"],[S,te]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[I,Se.trim],[A,Se.trim],[S,te]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[S,te]],[/((pebble))app\/[\d\.]+\s/i],[I,A,[S,de]],[/droid.+;\s(glass)\s\d/i],[A,[I,"Google"],[S,de]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[A,[I,"Zebra"],[S,de]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[I,[S,ge]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[A,[S,q]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[A,[S,z]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[S,Se.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[A,[I,"Generic"]],[/(phone)/i],[[S,q]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[R,[v,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[R,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[v,R],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[R,v]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[v,R],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[v,[R,Me.str,dt.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[v,"Windows"],[R,Me.str,dt.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[R,/_/g,"."],[v,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[v,"Mac OS"],[R,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[v,R],[/\(bb(10);/i],[R,[v,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[R,[v,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[v,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[R,[v,"webOS"]],[/crkey\/([\d\.]+)/i],[R,[v,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[v,"Chromium OS"],R],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[v,R],[/(sunos)\s?([\w\.\d]*)/i],[[v,"Solaris"],R],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[v,R]]},Mt=function(wn,yn){if("object"==typeof wn&&(yn=wn,wn=c),!(this instanceof Mt))return new Mt(wn,yn).getResult();var Ct=wn||(void 0!==a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),We=yn?Se.extend(kt,yn):kt;return this.getBrowser=function(){var lt={name:c,version:c};return Me.rgx.call(lt,Ct,We.browser),lt.major=Se.major(lt.version),lt},this.getCPU=function(){var lt={architecture:c};return Me.rgx.call(lt,Ct,We.cpu),lt},this.getDevice=function(){var lt={vendor:c,model:c,type:c};return Me.rgx.call(lt,Ct,We.device),lt},this.getEngine=function(){var lt={name:c,version:c};return Me.rgx.call(lt,Ct,We.engine),lt},this.getOS=function(){var lt={name:c,version:c};return Me.rgx.call(lt,Ct,We.os),lt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(lt){return Ct=typeof lt===m&&lt.length>255?Se.trim(lt,255):lt,this},this.setUA(Ct),this};Mt.VERSION="0.7.28",Mt.BROWSER={NAME:v,MAJOR:"major",VERSION:R},Mt.CPU={ARCHITECTURE:O},Mt.DEVICE={MODEL:A,VENDOR:I,TYPE:S,CONSOLE:B,MOBILE:q,SMARTTV:te,TABLET:z,WEARABLE:de,EMBEDDED:ge},Mt.ENGINE={NAME:v,VERSION:R},Mt.OS={NAME:v,VERSION:R},r.exports&&(o=r.exports=Mt),o.UAParser=Mt;var Lt=void 0!==a&&(a.jQuery||a.Zepto);if(Lt&&!Lt.ua){var Vn=new Mt;Lt.ua=Vn.getResult(),Lt.ua.get=function(){return Vn.getUA()},Lt.ua.set=function(wn){Vn.setUA(wn);var yn=Vn.getResult();for(var Ct in yn)Lt.ua[Ct]=yn[Ct]}}}("object"==typeof window?window:re)}(Bw,Bw.exports);const Fw=new Bw.exports;let Sh=Fw.getResult();function xi(r){return r&&Fw.setUA(r),Sh=Fw.getResult(),{name:zN(Sh),version:sk(Sh),os:qN(Sh),osVersion:Sh.os.version}}function zN(r){if("Blink"===r.engine.name&&"WeChat"!==r.browser.name)return bi.CHROME;switch(r.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return bi.CHROME;case"Safari":case"Mobile Safari":return bi.SAFARI;case"Edge":return bi.EDGE;case"Firefox":return bi.FIREFOX;case"QQBrowser":return bi.QQ;case"Opera":return bi.OPERA;case"WeChat":return bi.WECHAT;default:return r.browser.name||""}}function sk(r){let o;return o="Blink"===r.engine.name?r.engine.version||"":r.browser.version||"",o.split(".")[0]}function qN(r){return"Windows"===r.os.name?r.os.version?r.os.name+" "+r.os.version:r.os.name:r.os.name||""}function ak(){return xi().os}function IS(){const r=xi();return!!("WebKit"===Sh.engine.name&&r.os===js.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&r.name!==bi.SAFARI||yc()&&r.name!==bi.SAFARI)}function jw(){return xi().name===bi.CHROME}function jl(){return xi().name===bi.SAFARI}function Xo(){return xi().name===bi.FIREFOX}function yc(){return xi().os===js.IOS}function ck(){const r=xi();if(r.os!==js.IOS||!r.osVersion)return!1;const o=r.osVersion.split(".");return 13===Number(o[0])}function X_(){const r=xi();if(r.os!==js.IOS||!r.osVersion)return!1;const o=r.osVersion.split(".");return 15===Number(o[0])}function lk(){const r=xi();if(r.os!==js.IOS||!r.osVersion)return!1;const o=r.osVersion.split(".");return 15===Number(o[0])&&0===Number(o[1])}function uk(){const r=xi();if(r.os!==js.IOS||!r.osVersion)return!1;const o=r.osVersion.split(".");return 15===Number(o[0])&&Number(o[1])>=1}function dk(){const r=xi();if(r.os!==js.IOS||!r.osVersion)return!1;const o=r.osVersion.split(".");return 15===Number(o[0])&&Number(o[1])>=2}function Rf(){return jl()&&navigator.maxTouchPoints>0}function YN(){return xi().name===bi.WECHAT}function $N(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Vy(){const r=xi();return r.name!==bi.EDGE&&r.name!==bi.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function JN(){return xi().os===js.ANDROID}var Qw={exports:{}},Hw=eh.f;Yn({target:"Object",stat:!0,forced:Object.defineProperty!==Hw,sham:!xc},{defineProperty:Hw});var ZN=$p.Object,Gw=Qw.exports=function(r,o,a){return ZN.defineProperty(r,o,a)};ZN.defineProperty.sham&&(Gw.sham=!0);var ex=Qw.exports;function J(r,o,a){return o in r?ex(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r}var It={exports:{}},Ql=function(r,o){return function(){for(var a=new Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];return r.apply(o,a)}},Na=Ql,Hl=Object.prototype.toString;function Ch(r){return"[object Array]"===Hl.call(r)}function wS(r){return null!==r&&"object"==typeof r}function Ww(r){return"[object Function]"===Hl.call(r)}function Kw(r,o){if(null!=r)if("object"!=typeof r&&(r=[r]),Ch(r))for(var a=0,c=r.length;a<c;a++)o.call(null,r[a],a,r);else for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&o.call(null,r[p],p,r)}var Gl={isArray:Ch,isArrayBuffer:function(r){return"[object ArrayBuffer]"===Hl.call(r)},isBuffer:function(r){return null!=r&&null!=r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)},isFormData:function(r){return typeof FormData<"u"&&r instanceof FormData},isArrayBufferView:function(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer},isString:function(r){return"string"==typeof r},isNumber:function(r){return"number"==typeof r},isObject:wS,isUndefined:function(r){return void 0===r},isDate:function(r){return"[object Date]"===Hl.call(r)},isFile:function(r){return"[object File]"===Hl.call(r)},isBlob:function(r){return"[object Blob]"===Hl.call(r)},isFunction:Ww,isStream:function(r){return wS(r)&&Ww(r.pipe)},isURLSearchParams:function(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator>"u"||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:Kw,merge:function r(){var o={};function a(_,m){o[m]="object"==typeof o[m]&&"object"==typeof _?r(o[m],_):_}for(var c=0,p=arguments.length;c<p;c++)Kw(arguments[c],a);return o},deepMerge:function r(){var o={};function a(_,m){o[m]="object"==typeof o[m]&&"object"==typeof _?r(o[m],_):"object"==typeof _?r({},_):_}for(var c=0,p=arguments.length;c<p;c++)Kw(arguments[c],a);return o},extend:function(r,o,a){return Kw(o,function(c,p){r[p]=a&&"function"==typeof c?Na(c,a):c}),r},trim:function(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}},Z_=Gl;function pk(r){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var tx=function(r,o,a){if(!o)return r;var c;if(a)c=a(o);else if(Z_.isURLSearchParams(o))c=o.toString();else{var p=[];Z_.forEach(o,function(m,A){null!=m&&(Z_.isArray(m)?A+="[]":m=[m],Z_.forEach(m,function(v){Z_.isDate(v)?v=v.toISOString():Z_.isObject(v)&&(v=JSON.stringify(v)),p.push(pk(A)+"="+pk(v))}))}),c=p.join("&")}if(c){var _=r.indexOf("#");-1!==_&&(r=r.slice(0,_)),r+=(-1===r.indexOf("?")?"?":"&")+c}return r},nx=Gl;function TS(){this.handlers=[]}TS.prototype.use=function(r,o){return this.handlers.push({fulfilled:r,rejected:o}),this.handlers.length-1},TS.prototype.eject=function(r){this.handlers[r]&&(this.handlers[r]=null)},TS.prototype.forEach=function(r){nx.forEach(this.handlers,function(o){null!==o&&r(o)})};var va=TS,RS=Gl,bU=function(r){return!(!r||!r.__CANCEL__)},SU=Gl,rx=function(r,o,a,c,p){return function(r,o,a,c,p){return r.config=o,a&&(r.code=a),r.request=c,r.response=p,r.isAxiosError=!0,r.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},r}(new Error(r),o,a,c,p)},Ja=rx,yl=Gl,qw=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ps=Gl,hk=Ps.isStandardBrowserEnv()?function(){var r,o=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");function c(p){var _=p;return o&&(a.setAttribute("href",_),_=a.href),a.setAttribute("href",_),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}return r=c(window.location.href),function(p){var _=Ps.isString(p)?c(p):p;return _.protocol===r.protocol&&_.host===r.host}}():function(){return!0},DS=Gl,CU=DS.isStandardBrowserEnv()?{write:function(r,o,a,c,p,_){var m=[];m.push(r+"="+encodeURIComponent(o)),DS.isNumber(a)&&m.push("expires="+new Date(a).toGMTString()),DS.isString(c)&&m.push("path="+c),DS.isString(p)&&m.push("domain="+p),!0===_&&m.push("secure"),document.cookie=m.join("; ")},read:function(r){var o=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},fk=Gl,ix=tx,nj=hk,mk=rx,Oi=Gl,fg=function(r,o){SU.forEach(r,function(a,c){c!==o&&c.toUpperCase()===o.toUpperCase()&&(r[o]=a,delete r[c])})},Ih={"Content-Type":"application/x-www-form-urlencoded"};function _p(r,o){!Oi.isUndefined(r)&&Oi.isUndefined(r["Content-Type"])&&(r["Content-Type"]=o)}var wh,gk={adapter:((typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process)||typeof XMLHttpRequest<"u")&&(wh=function(r){return new Promise(function(o,a){var c=r.data,p=r.headers;fk.isFormData(c)&&delete p["Content-Type"];var _=new XMLHttpRequest;if(r.auth&&(p.Authorization="Basic "+btoa((r.auth.username||"")+":"+(r.auth.password||""))),_.open(r.method.toUpperCase(),ix(r.url,r.params,r.paramsSerializer),!0),_.timeout=r.timeout,_.onreadystatechange=function(){if(_&&4===_.readyState&&(0!==_.status||_.responseURL&&0===_.responseURL.indexOf("file:"))){var I="getAllResponseHeaders"in _?function(r){var o,a,c,p={};return r&&yl.forEach(r.split("\n"),function(_){if(c=_.indexOf(":"),o=yl.trim(_.substr(0,c)).toLowerCase(),a=yl.trim(_.substr(c+1)),o){if(p[o]&&qw.indexOf(o)>=0)return;p[o]="set-cookie"===o?(p[o]?p[o]:[]).concat([a]):p[o]?p[o]+", "+a:a}}),p}(_.getAllResponseHeaders()):null;(function(r,o,a){var c=a.config.validateStatus;!c||c(a.status)?r(a):o(Ja("Request failed with status code "+a.status,a.config,null,a.request,a))})(o,a,{data:r.responseType&&"text"!==r.responseType?_.response:_.responseText,status:_.status,statusText:_.statusText,headers:I,config:r,request:_}),_=null}},_.onabort=function(){_&&(a(mk("Request aborted",r,"ECONNABORTED",_)),_=null)},_.onerror=function(){a(mk("Network Error",r,null,_)),_=null},_.ontimeout=function(){a(mk("timeout of "+r.timeout+"ms exceeded",r,"ECONNABORTED",_)),_=null},fk.isStandardBrowserEnv()){var v=CU,S=(r.withCredentials||nj(r.url))&&r.xsrfCookieName?v.read(r.xsrfCookieName):void 0;S&&(p[r.xsrfHeaderName]=S)}if("setRequestHeader"in _&&fk.forEach(p,function(I,R){void 0===c&&"content-type"===R.toLowerCase()?delete p[R]:_.setRequestHeader(R,I)}),r.withCredentials&&(_.withCredentials=!0),r.responseType)try{_.responseType=r.responseType}catch(I){if("json"!==r.responseType)throw I}"function"==typeof r.onDownloadProgress&&_.addEventListener("progress",r.onDownloadProgress),"function"==typeof r.onUploadProgress&&_.upload&&_.upload.addEventListener("progress",r.onUploadProgress),r.cancelToken&&r.cancelToken.promise.then(function(I){_&&(_.abort(),a(I),_=null)}),void 0===c&&(c=null),_.send(c)})}),wh),transformRequest:[function(r,o){return fg(o,"Accept"),fg(o,"Content-Type"),Oi.isFormData(r)||Oi.isArrayBuffer(r)||Oi.isBuffer(r)||Oi.isStream(r)||Oi.isFile(r)||Oi.isBlob(r)?r:Oi.isArrayBufferView(r)?r.buffer:Oi.isURLSearchParams(r)?(_p(o,"application/x-www-form-urlencoded;charset=utf-8"),r.toString()):Oi.isObject(r)?(_p(o,"application/json;charset=utf-8"),JSON.stringify(r)):r}],transformResponse:[function(r){if("string"==typeof r)try{r=JSON.parse(r)}catch{}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Oi.forEach(["delete","get","head"],function(r){gk.headers[r]={}}),Oi.forEach(["post","put","patch"],function(r){gk.headers[r]=Oi.merge(Ih)});var wU=gk,_k=Gl,Yw=function(r,o,a){return RS.forEach(a,function(c){r=c(r,o)}),r},vk=bU,_d=wU;function OS(r){r.cancelToken&&r.cancelToken.throwIfRequested()}var jy=Gl,Th=function(r,o){o=o||{};var a={};return jy.forEach(["url","method","params","data"],function(c){void 0!==o[c]&&(a[c]=o[c])}),jy.forEach(["headers","auth","proxy"],function(c){jy.isObject(o[c])?a[c]=jy.deepMerge(r[c],o[c]):void 0!==o[c]?a[c]=o[c]:jy.isObject(r[c])?a[c]=jy.deepMerge(r[c]):void 0!==r[c]&&(a[c]=r[c])}),jy.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(c){void 0!==o[c]?a[c]=o[c]:void 0!==r[c]&&(a[c]=r[c])}),a},vp=Gl,$w=tx,Ak=va,lx=function(r){return OS(r),r.baseURL&&!function(r){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(r)}(r.url)&&(r.url=function(r,o){return o?r.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):r}(r.baseURL,r.url)),r.headers=r.headers||{},r.data=Yw(r.data,r.headers,r.transformRequest),r.headers=_k.merge(r.headers.common||{},r.headers[r.method]||{},r.headers||{}),_k.forEach(["delete","get","head","post","put","patch","common"],function(o){delete r.headers[o]}),(r.adapter||_d.adapter)(r).then(function(o){return OS(r),o.data=Yw(o.data,o.headers,r.transformResponse),o},function(o){return vk(o)||(OS(r),o&&o.response&&(o.response.data=Yw(o.response.data,o.response.headers,r.transformResponse))),Promise.reject(o)})},ux=Th;function Df(r){this.defaults=r,this.interceptors={request:new Ak,response:new Ak}}Df.prototype.request=function(r){"string"==typeof r?(r=arguments[1]||{}).url=arguments[0]:r=r||{},(r=ux(this.defaults,r)).method=r.method?r.method.toLowerCase():"get";var o=[lx,void 0],a=Promise.resolve(r);for(this.interceptors.request.forEach(function(c){o.unshift(c.fulfilled,c.rejected)}),this.interceptors.response.forEach(function(c){o.push(c.fulfilled,c.rejected)});o.length;)a=a.then(o.shift(),o.shift());return a},Df.prototype.getUri=function(r){return r=ux(this.defaults,r),$w(r.url,r.params,r.paramsSerializer).replace(/^\?/,"")},vp.forEach(["delete","get","head","options"],function(r){Df.prototype[r]=function(o,a){return this.request(vp.merge(a||{},{method:r,url:o}))}}),vp.forEach(["post","put","patch"],function(r){Df.prototype[r]=function(o,a,c){return this.request(vp.merge(c||{},{method:r,url:o,data:a}))}});var dx=Df;function Jw(r){this.message=r}Jw.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Jw.prototype.__CANCEL__=!0;var px=Jw,hx=px;function yk(r){if("function"!=typeof r)throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(c){o=c});var a=this;r(function(c){a.reason||(a.reason=new hx(c),o(a.reason))})}yk.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},yk.source=function(){var r;return{token:new yk(function(o){r=o}),cancel:r}};var fx=yk,TU=Gl,RU=Ql,kS=dx,mx=Th;function DU(r){var o=new kS(r),a=RU(kS.prototype.request,o);return TU.extend(a,kS.prototype,o),TU.extend(a,o),a}var vd=DU(wU);vd.Axios=kS,vd.create=function(r){return DU(mx(vd.defaults,r))},vd.Cancel=px,vd.CancelToken=fx,vd.isCancel=bU,vd.all=function(r){return Promise.all(r)},vd.spread=function(r){return function(o){return r.apply(null,o)}},It.exports=vd,It.exports.default=vd;var Ms=It.exports;class Rh{constructor(o){J(this,"logger",void 0),J(this,"prefixLists",[]),this.logger=o}debug(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];this.logger.debug(...this.prefixLists,...a)}info(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];this.logger.info(...this.prefixLists,...a)}warning(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];this.logger.warning(...this.prefixLists,...a)}error(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];this.logger.error(...this.prefixLists,...a)}prefix(o){return this.prefixLists.push(o),this}popPrefix(){return this.prefixLists.pop(),this}}class ko{constructor(){J(this,"_events",{}),J(this,"addListener",this.on)}getListeners(o){return this._events[o]?this._events[o].map(a=>a.listener):[]}on(o,a){this._events[o]||(this._events[o]=[]);const c=this._events[o];-1===this._indexOfListener(c,a)&&c.push({listener:a,once:!1})}once(o,a){this._events[o]||(this._events[o]=[]);const c=this._events[o];-1===this._indexOfListener(c,a)&&c.push({listener:a,once:!0})}off(o,a){if(!this._events[o])return;const c=this._events[o],p=this._indexOfListener(c,a);-1!==p&&c.splice(p,1),0===this._events[o].length&&delete this._events[o]}removeAllListeners(o){o?delete this._events[o]:this._events={}}emit(o){this._events[o]||(this._events[o]=[]);const a=this._events[o].map(m=>m);for(var c=arguments.length,p=new Array(c>1?c-1:0),_=1;_<c;_++)p[_-1]=arguments[_];for(let m=0;m<a.length;m+=1){const A=a[m];A.once&&this.off(o,A.listener),A.listener.apply(this,p||[])}}_indexOfListener(o,a){let c=o.length;for(;c--;)if(o[c].listener===a)return c;return-1}}const Of=new class extends ko{reportLogUploadError(r){this.emit("REPORT_LOG_UPLOAD",r)}};let Te;!function(r){r.UNEXPECTED_ERROR="UNEXPECTED_ERROR",r.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",r.TIMEOUT="TIMEOUT",r.INVALID_PARAMS="INVALID_PARAMS",r.NOT_READABLE="NOT_READABLE",r.NOT_SUPPORTED="NOT_SUPPORTED",r.INVALID_OPERATION="INVALID_OPERATION",r.OPERATION_ABORTED="OPERATION_ABORTED",r.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",r.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",r.NETWORK_ERROR="NETWORK_ERROR",r.NETWORK_TIMEOUT="NETWORK_TIMEOUT",r.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",r.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",r.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",r.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",r.ELECTRON_IS_NULL="ELECTRON_IS_NULL",r.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",r.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",r.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",r.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",r.PERMISSION_DENIED="PERMISSION_DENIED",r.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",r.TRACK_IS_DISABLED="TRACK_IS_DISABLED",r.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",r.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",r.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",r.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",r.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",r.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",r.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",r.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",r.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",r.UID_CONFLICT="UID_CONFLICT",r.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",r.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",r.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",r.INVALID_TRACK="INVALID_TRACK",r.SENDER_NOT_FOUND="SENDER_NOT_FOUND",r.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",r.SET_ANSWER_FAILED="SET_ANSWER_FAILED",r.ICE_FAILED="ICE_FAILED",r.PC_CLOSED="PC_CLOSED",r.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",r.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",r.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",r.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",r.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",r.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",r.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",r.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",r.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",r.INVALID_REMOTE_USER="INVALID_REMOTE_USER",r.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",r.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",r.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",r.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",r.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",r.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",r.WS_ABORT="WS_ABORT",r.WS_DISCONNECT="WS_DISCONNECT",r.WS_ERR="WS_ERR",r.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",r.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",r.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",r.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",r.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",r.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",r.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",r.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",r.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",r.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",r.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",r.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",r.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",r.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",r.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",r.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",r.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",r.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",r.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",r.INVALID_PLUGIN="INVALID_PLUGIN",r.DISCONNECT_P2P="DISCONNECT_P2P",r.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",r.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",r.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED"}(Te||(Te={}));class Le extends Error{constructor(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;super(a),J(this,"code",void 0),J(this,"message",void 0),J(this,"data",void 0),J(this,"name","AgoraRTCException"),this.code=o,this.message="AgoraRTCError ".concat(this.code,": ").concat(a),this.data=c}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===o&&se.error(this.toString()),"warning"===o&&se.warning(this.toString()),this}throw(){throw this.print(),this}}const wo={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Ek(r,o){const a=Math.floor(o.timeout*Math.pow(o.timeoutFactor,r));return Math.min(o.maxRetryTimeout,a)}function Ss(r,o,a,c){const p=Object.assign({},wo,c);let _=p.timeout;const m=function(){var S=F(function*(){var I;yield(I=_,new qn(R=>{window.setTimeout(R,I)})),_*=p.timeoutFactor,_=Math.min(p.maxRetryTimeout,_)});return function(){return S.apply(this,arguments)}}();let A=!1;const v=new qn(function(){var S=F(function*(I,R){o=o||(()=>!1),a=a||(()=>!0);for(let O=0;O<p.maxRetryCount;O+=1){if(A)return R(new Le(Te.OPERATION_ABORTED));try{const B=yield r();if(!o(B,O)||O+1===p.maxRetryCount)return I(B);yield m()}catch(B){if(!a(B,O)||O+1===p.maxRetryCount)return R(B);yield m()}}});return function(I,R){return S.apply(this,arguments)}}());return v.cancel=()=>A=!0,v}function Xw(){const r=new Date;return r.toTimeString().split(" ")[0]+":"+r.getMilliseconds()}const Gc={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},ev=Date.now(),Li=r=>{for(const o in Gc)if(Object.prototype.hasOwnProperty.call(Gc,o)&&Gc[o]===r)return o;return"DEFAULT"},se=new class{constructor(){J(this,"proxyServerURL",void 0),J(this,"logLevel",Gc.DEBUG),J(this,"uploadState","collecting"),J(this,"uploadLogWaitingList",[]),J(this,"uploadLogUploadingList",[]),J(this,"uploadErrorCount",0),J(this,"currentLogID",0),J(this,"url",void 0),J(this,"extLog",(r,o)=>{this.appendLogToWaitingList(r,o)})}debug(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const c=[Gc.DEBUG].concat(o);this.log.apply(this,c)}info(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const c=[Gc.INFO].concat(o);this.log.apply(this,c)}warning(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const c=[Gc.WARNING].concat(o);this.log.apply(this,c)}error(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const c=[Gc.ERROR].concat(o);this.log.apply(this,c)}upload(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const c=[Gc.DEBUG].concat(o);this.uploadLog.apply(this,c)}setLogLevel(r){r=Math.min(Math.max(0,r),4),this.logLevel=r}enableLogUpload(){La("UPLOAD_LOG",!0)}disableLogUpload(){La("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(r){this.proxyServerURL=r}prefix(r){return new Rh(this).prefix(r)}log(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];if(Date.now()-ev<100)return void setTimeout(()=>{this.log(...o)},Date.now()-ev);const c=Math.max(0,Math.min(4,o[0]));if(o[0]=Xw()+" Agora-SDK [".concat(Li(c),"]:"),this.appendLogToWaitingList(c,o),c<this.logLevel)return;const p=Xw()+" %cAgora-SDK [".concat(Li(c),"]:");let _=[];if(!xt("USE_NEW_LOG"))switch(c){case Gc.DEBUG:_=[p,"color: #64B5F6;"].concat(o.slice(1)),console.log.apply(console,_);break;case Gc.INFO:_=[p,"color: #1E88E5; font-weight: bold;"].concat(o.slice(1)),console.log.apply(console,_);break;case Gc.WARNING:_=[p,"color: #FB8C00; font-weight: bold;"].concat(o.slice(1)),console.warn.apply(console,_);break;case Gc.ERROR:_=[p,"color: #B00020; font-weight: bold;"].concat(o.slice(1)),console.error.apply(console,_)}}uploadLog(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];if(Date.now()-ev<100)return void setTimeout(()=>{this.uploadLog(...o)},Date.now()-ev);const c=Math.max(0,Math.min(4,o[0]));o[0]=Xw()+" Agora-SDK [".concat(Li(c),"]:"),this.appendLogToWaitingList(c,o)}appendLogToWaitingList(r){if(!xt("UPLOAD_LOG"))return;let o="";for(var a=arguments.length,c=new Array(a>1?a-1:0),p=1;p<a;p++)c[p-1]=arguments[p];c.forEach(_=>{"object"==typeof _&&(_=JSON.stringify(_)),o+="".concat(_," ")}),this.uploadLogWaitingList.push({payload_str:o,log_level:r,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}uploadLogs(){var r=this;return F(function*(){const o=r.uploadLogUploadingList,a={sdk_version:El,process_id:xt("PROCESS_ID"),payload:JSON.stringify(o)};return Ss(F(function*(){const c=yield Ms.post(r.url||(r.proxyServerURL?"https://".concat(r.proxyServerURL,"/ls/?h=").concat(xt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(xt("LOG_UPLOAD_SERVER"),"/upload/v1")),a,{responseType:"text"});if("OK"!==c.data){const p=new Error("unexpected upload log response");throw p.response=c,p}}),()=>(r.uploadLogUploadingList=[],!1),c=>(Of.reportLogUploadError(c.response?{status:c.response.status,data:c.response.data,headers:c.response.headers,message:c.message}:c.request?{status:c.request.status,message:c.message}:{status:-1,message:c.message}),!0),{timeout:xt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:xt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})})()}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,xt("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),xt("UPLOAD_LOG_INTERVAL"))}).catch(r=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),xt("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),xt("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},bc={debug:console.log,info:console.log,warning:console.warn,error:console.error},PS={debug:"color: #64B5F6;",info:"color: #1E88E5; font-weight: bold;",warning:"color: #FB8C00; font-weight: bold;",error:"color: #B00020; font-weight: bold;"},bk={debug:0,info:1,warning:2,error:3},Qy=[];let Zw,Hy=0,Du=0,kf=!1;function MS(){const r=new Date;return[r.getTime(),r.toTimeString().split(" ")[0]+":"+r.getMilliseconds()]}function Ad(r){if(!xt("UPLOAD_LOG"))return;let o;switch(r.type){case W.MISC:o=[r.timestamp,r.level,r.type,r.module,r.instanceId,[r.msg]];break;case W.INTERNAL_EVENT:case W.PUBLIC_EVENT:case W.WEB_EVENT:o=[r.timestamp,r.level,r.type,r.module,r.instanceId,[r.event,r.msg]];break;case W.INTERNAL_API:case W.PUBLIC_API:case W.WEB_API:o=[r.timestamp,r.level,r.type,r.module,r.instanceId,[r.api,r.args,r.result]]}Qy.push(o)}function Pf(r,o){const[a,c]=MS(),p="warning",_="".concat(c," %cAgora-SDK [").concat(p,"] [INTERNAL API]:"),m={[W.WEB_API]:"logWebAPI",[W.PUBLIC_API]:"logPublicAPI",[W.INTERNAL_API]:"logInternalAPI",[W.WEB_EVENT]:"logWebEvent",[W.PUBLIC_EVENT]:"logPublicEvent",[W.INTERNAL_EVENT]:"logInternalEvent",[W.MISC]:"logMisc"}[r],A=[_,PS.warning,"Log.".concat(m),o];xt("USE_NEW_LOG")&&(eT(p)&&bc.warning.apply(console,A),Ad({timestamp:a,level:p,module:"Log",instanceId:void 0,type:W.INTERNAL_API,api:m,args:void 0,result:o.toString()}))}function mg(r){if(Array.isArray(r)){let[c,p]=r;return c||(c="Global"),{module:c,instanceId:p}}let o,a;if("string"!=typeof r.__moduleName)throw new Error("Cannot get __moduleName from log instance.");o=r.__moduleName;try{a=r.__instanceId}catch{throw new Error("Cannot get __instanceId from log instance.")}return{module:o,instanceId:a}}function eT(r){return bk[r]>=Du}function Mf(r,o,a,c,p,_){if(r===W.PUBLIC_API||r===W.WEB_API||r===W.INTERNAL_API)try{const{module:m,instanceId:A}=mg(a);p=p&&JSON.stringify(p),_=_ instanceof Error?_.toString():_&&JSON.stringify(_);const[v,S]=MS(),I=["".concat(S," %cAgora-SDK [").concat(o,"] [").concat({[W.PUBLIC_API]:"PUBLIC API",[W.WEB_API]:"WEB API",[W.INTERNAL_API]:"INTERNAL API"}[r],"]:"),PS[o],"".concat(m).concat(A?"<".concat(A,">"):"",".").concat(c),p,_];xt("USE_NEW_LOG")&&(eT(o)&&bc[o].apply(console,I),Ad({timestamp:v,level:o,module:m,instanceId:A,type:r,api:c,args:p,result:_}))}catch(m){Pf(r,m)}}function Ou(r,o,a,c,p){if(r===W.WEB_EVENT||r===W.INTERNAL_EVENT||r===W.PUBLIC_EVENT)try{const{module:_,instanceId:m}=mg(a);"string"!=typeof p&&(p=p instanceof Error?p.toString():JSON.stringify(p));const[A,v]=MS(),S=["".concat(v," %cAgora-SDK [").concat(o,"] [").concat({[W.WEB_EVENT]:"WEB EVENT",[W.PUBLIC_EVENT]:"PUBLIC EVENT",[W.INTERNAL_EVENT]:"INTERNAL EVENT"}[r],"]:"),PS[o],"".concat(_).concat(m?"<".concat(m,">"):"",".on(").concat(c,")"),p||""];xt("USE_NEW_LOG")&&(eT(o)&&bc[o].apply(console,S),Ad({timestamp:A,level:o,module:_,instanceId:m,type:r,event:c,msg:p}))}catch(_){Pf(r,_)}}function tv(r){Zw=r}function jn(r,o,a){try{const{module:c,instanceId:p}=mg(o),[_,m]=MS(),A=["".concat(m," %cAgora-SDK [").concat(r,"] [MISC]:"),PS[r],"".concat(c).concat(p?"<".concat(p,">"):""),'"'.concat(a,'"')];xt("USE_NEW_LOG")&&(eT(r)&&bc[r].apply(console,A),Ad({timestamp:_,level:r,module:c,instanceId:p,type:W.MISC,msg:a}))}catch(c){$t("warning",["log"],"logMisc",void 0,c)}}function ji(r,o,a,c){Ou(W.INTERNAL_EVENT,r,o,a,c)}function ku(r,o,a,c){Ou(W.PUBLIC_EVENT,r,o,a,c)}function Wl(r,o,a,c){Ou(W.WEB_EVENT,r,o,a,c)}function $t(r,o,a,c,p){Mf(W.INTERNAL_API,r,o,a,c,p)}function gg(r,o,a,c,p){Mf(W.WEB_API,r,o,a,c,p)}function cr(r,o,a,c,p){Mf(W.PUBLIC_API,r,o,a,c,p)}function xa(r,o){return function(a){return class extends a{get __moduleName(){return r}get __instanceId(){if(o){if("function"==typeof this[o])return this[o]();{const c=o.split(".");return c.length>0?nf(c).call(c,(p,_)=>{try{return p&&p[_]}catch{return}},this):this[o]}}}}}}function Po(r){return Wc.apply(this,arguments)}function Wc(){return Wc=F(function*(r){if(!r&&kf)return;if(kf=!0,!xt("UPLOAD_LOG"))return void setTimeout(()=>Po(!0),xt("UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF"));if(0===Qy.length)return void setTimeout(()=>Po(!0),xt("UPLOAD_LOG_INTERVAL"));const o=Qy.slice(0,xt("UPLOAD_LOG_LENGTH_EACH_TIME")),a={sdk_version:El,log_version:xt("LOG_VERSION"),process_id:xt("PROCESS_ID"),index:Hy,logs:JSON.stringify(o)};yield Ss(F(function*(){const c=yield Ms.post(Zw?"https://".concat(Zw,"/ls/?h=").concat(xt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(xt("LOG_UPLOAD_SERVER"),"/upload/v1"),a,{responseType:"text"});if("OK"!==c.data)throw new Error("Log service response error ".concat(c.data));return c}),void 0,void 0,{timeout:xt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:xt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}),Qy.splice(0,xt("UPLOAD_LOG_LENGTH_EACH_TIME")),Hy+=o.length,setTimeout(()=>Po(!0),xt("UPLOAD_LOG_INTERVAL"))}),Wc.apply(this,arguments)}const Dh="v4.12.1-0-gd73db17d-dirty(6/27/2022, 3:58:00 PM)",El=function(r){if(r.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return r;const o=r.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(o&&o[1]&&o[2]){const p=o[2];return"".concat(o[1],".").concat(p)}const a=r.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(a&&a[1]&&a[2]){const p=a[2];return"".concat(a[1],".").concat(100*(Number(p)+1))}return"4.0.0.999"}("4.12.1"),tT=function(){try{return!0===JSON.parse("true")}catch{return!0}}(),Qs={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},gx={"90p":Wr(160,90),"90p_1":Wr(160,90),"120p":Wr(160,120,15,30,65),"120p_1":Wr(160,120,15,30,65),"120p_3":Wr(120,120,15,30,50),"120p_4":Wr(212,120),"180p":Wr(320,180,15,30,140),"180p_1":Wr(320,180,15,30,140),"180p_3":Wr(180,180,15,30,100),"180p_4":Wr(240,180,15,30,120),"240p":Wr(320,240,15,40,200),"240p_1":Wr(320,240,15,40,200),"240p_3":Wr(240,240,15,40,140),"240p_4":Wr(424,240,15,40,220),"360p":Wr(640,360,15,80,400),"360p_1":Wr(640,360,15,80,400),"360p_3":Wr(360,360,15,80,260),"360p_4":Wr(640,360,30,80,600),"360p_6":Wr(360,360,30,80,400),"360p_7":Wr(480,360,15,80,320),"360p_8":Wr(480,360,30,80,490),"360p_9":Wr(640,360,15,80,800),"360p_10":Wr(640,360,24,80,800),"360p_11":Wr(640,360,24,80,1e3),"480p":Wr(640,480,15,100,500),"480p_1":Wr(640,480,15,100,500),"480p_2":Wr(640,480,30,100,1e3),"480p_3":Wr(480,480,15,100,400),"480p_4":Wr(640,480,30,100,750),"480p_6":Wr(480,480,30,100,600),"480p_8":Wr(848,480,15,100,610),"480p_9":Wr(848,480,30,100,930),"480p_10":Wr(640,480,10,100,400),"720p":Wr(1280,720,15,120,1130),"720p_1":Wr(1280,720,15,120,1130),"720p_2":Wr(1280,720,30,120,2e3),"720p_3":Wr(1280,720,30,120,1710),"720p_5":Wr(960,720,15,120,910),"720p_6":Wr(960,720,30,120,1380),"1080p":Wr(1920,1080,15,120,2080),"1080p_1":Wr(1920,1080,15,120,2080),"1080p_2":Wr(1920,1080,30,120,3e3),"1080p_3":Wr(1920,1080,30,120,3150),"1080p_5":Wr(1920,1080,60,120,4780),"1440p":Wr(2560,1440,30,120,4850),"1440p_1":Wr(2560,1440,30,120,4850),"1440p_2":Wr(2560,1440,60,120,7350),"4k":Wr(3840,2160,30,120,8910),"4k_1":Wr(3840,2160,30,120,8910),"4k_3":Wr(3840,2160,60,120,13500)},OU={"480p":Kl(640,480,5),"480p_1":Kl(640,480,5),"480p_2":Kl(640,480,30),"480p_3":Kl(640,480,15),"720p":Kl(1280,720,5),"720p_1":Kl(1280,720,5),"720p_2":Kl(1280,720,30),"720p_3":Kl(1280,720,15),"1080p":Kl(1920,1080,5),"1080p_1":Kl(1920,1080,5),"1080p_2":Kl(1920,1080,30),"1080p_3":Kl(1920,1080,15)},Nf={"1SL1TL":Sk(1,1),"3SL3TL":Sk(3,3),"2SL3TL":Sk(2,3)};function Pu(r){return"string"==typeof r?Object.assign({},gx[r]):r}function nT(r){return"string"==typeof r?Object.assign({},OU[r]):r}function NS(r){return"string"==typeof r?Object.assign({},Nf[r]):r}const _x={speech_low_quality:xS(16e3,!1),speech_standard:xS(32e3,!1,18),music_standard:xS(48e3,!1),standard_stereo:xS(48e3,!0,56),high_quality:xS(48e3,!1,128),high_quality_stereo:xS(48e3,!0,192)};function xf(r){return"string"==typeof r?Object.assign({},_x[r]):r}function La(r,o,a){Object.keys(Kc).includes(r)&&(!a&&Object.keys(vx).includes(r)||(Kc[r]=o))}function xt(r){return Kc[r]}const Kc={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10},vx={};function xS(r,o,a){return{sampleRate:r,stereo:o,bitrate:a}}function Wr(r,o,a,c,p){return{width:r,height:o,frameRate:a,bitrateMin:c,bitrateMax:p}}function Kl(r,o,a,c,p){return{width:{max:r},height:{max:o},frameRate:a,bitrateMin:c,bitrateMax:p}}function Sk(r,o){return{numSpatialLayers:r,numTemporalLayers:o}}tT||(Kc.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Kc.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Kc.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Kc.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Kc.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Kc.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Kc.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Kc.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Kc.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Kc.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Kc.AREAS=["NORTH_AMERICA","OVERSEA"]);const rj=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],LS=[],bl=[];var yd=iA,rT=eh,kU=Xu,Gy=function(r,o,a){var c=yd(o);c in r?rT.f(r,c,kU(0,a)):r[c]=a},Ck=vb,Ax=np,PU=Gy,MU=$r.Array,yx=Math.max,Ex=function(r,o,a){for(var c=Ax(r),p=Ck(o,c),_=Ck(void 0===a?c:a,c),m=MU(yx(_-p,0)),A=0;p<_;p++,A++)PU(m,A,r[p]);return m.length=A,m},bx=Ex,BS=Math.floor,iT=function(r,o){var a=r.length,c=BS(a/2);return a<8?FS(r,o):Sx(r,iT(bx(r,0,c),o),iT(bx(r,c),o),o)},FS=function(r,o){for(var a,c,p=r.length,_=1;_<p;){for(c=_,a=r[_];c&&o(r[c-1],a)>0;)r[c]=r[--c];c!==_++&&(r[c]=a)}return r},Sx=function(r,o,a,c){for(var p=o.length,_=a.length,m=0,A=0;m<p||A<_;)r[m+A]=m<p&&A<_?c(o[m],a[A])<=0?o[m++]:a[A++]:m<p?o[m++]:a[A++];return r},oT=iT,Ed=Jh.match(/firefox\/(\d+)/i),nv=!!Ed&&+Ed[1],rv=/MSIE|Trident/.test(Jh),Wy=Jh.match(/AppleWebKit\/(\d+)\./),dn=Yn,Cx=Fo,Ix=hc,Ap=nn,NU=np,yp=dh,Ik=rs,wk=oT,wx=Im,Tx=nv,xU=rv,Ba=Xd,sT=!!Wy&&+Wy[1],Aa=[],Tk=Cx(Aa.sort),iv=Cx(Aa.push),ov=Ik(function(){Aa.sort(void 0)}),zl=Ik(function(){Aa.sort(null)}),LU=wx("sort"),Rk=!Ik(function(){if(Ba)return Ba<70;if(!(Tx&&Tx>3)){if(xU)return!0;if(sT)return sT<603;var r,o,a,c,p="";for(r=65;r<76;r++){switch(o=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(c=0;c<47;c++)Aa.push({k:o+c,v:a})}for(Aa.sort(function(_,m){return m.v-_.v}),c=0;c<Aa.length;c++)o=Aa[c].k.charAt(0),p.charAt(p.length-1)!==o&&(p+=o);return"DGBEFHACIJK"!==p}});dn({target:"Array",proto:!0,forced:ov||!zl||!LU||!Rk},{sort:function(r){void 0!==r&&Ix(r);var o=Ap(this);if(Rk)return void 0===r?Tk(o):Tk(o,r);var a,c,p=[],_=NU(o);for(c=0;c<_;c++)c in o&&iv(p,o[c]);for(wk(p,function(m){return function(A,v){return void 0===v?-1:void 0===A?1:void 0!==m?+m(A,v)||0:yp(A)>yp(v)?1:-1}}(r)),a=p.length,c=0;c<a;)o[c]=p[c++];for(;c<_;)delete o[c++];return o}});var Rx=Nl("Array").sort,to=Nc,aT=Rx,Ky=Array.prototype,US=function(r){var o=r.sort;return r===Ky||to(Ky,r)&&o===Ky.sort?aT:o};function i(r,o){if("boolean"!=typeof r)throw new Le(Te.INVALID_PARAMS,"Invalid ".concat(o,": The value is of the boolean type."))}function u(r,o,a){if(!a.includes(r))throw new Le(Te.INVALID_PARAMS,"".concat(o," can only be set as ").concat(JSON.stringify(a)))}function l(r,o){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(r<a||r>c||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!L(r))throw new Le(Te.INVALID_PARAMS,"invalid ".concat(o,": the value range is [").concat(a,", ").concat(c,"]. integer only"))}function h(r,o){if("number"!=typeof r){if(!(r.min||r.max||r.ideal||r.exact))throw new Le(Te.INVALID_PARAMS,"".concat(o," is not a valid ConstrainLong"));void 0!==r.min&&l(r.min,"".concat(o,".min"),0,1/0),void 0!==r.max&&l(r.max,"".concat(o,".max"),1,1/0),void 0!==r.exact&&l(r.exact,"".concat(o,".exact"),1,1/0),void 0!==r.ideal&&l(r.ideal,"".concat(o,".ideal"),1,1/0)}else l(r,o,1,1/0)}function g(r,o){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==r)throw new Le(Te.INVALID_PARAMS,"".concat(o||"param"," cannot be empty"));if(!N(r,a,c,p))throw new Le(Te.INVALID_PARAMS,"Invalid ".concat(o||"string param",": Length of the string: [").concat(a,",").concat(c,"].").concat(p?" ASCII characters only.":""))}function y(r,o){if(!Array.isArray(r))throw new Le(Te.INVALID_PARAMS,"".concat(o," should be an array"))}function C(r){if("string"!=typeof r||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(r))throw se.error("Invalid Channel Name ".concat(r)),new Le(Te.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function w(r){if(!("number"==typeof(o=r)&&Math.floor(o)===o&&0<=o&&o<=4294967295||N(r,1,255)))throw se.error("Invalid UID ".concat(r," ").concat(typeof r)),new Le(Te.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var o;"string"==typeof r&&se.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function D(r){return null==r}function N(r){return"string"==typeof r&&r.length<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:255)&&r.length>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)&&(!(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])||V(r))}function L(r){return"number"==typeof r&&r%1==0}function V(r){if("string"!=typeof r)return!1;for(let o=0;o<r.length;o+=1){const a=r.charCodeAt(o);if(a<0||a>255)return!1}return!0}let G,W,X;(function(r){r.FREE="free",r.UPLOADING="uploading"})(G||(G={})),function(r){r[r.MISC=0]="MISC",r[r.INTERNAL_EVENT=1]="INTERNAL_EVENT",r[r.PUBLIC_EVENT=2]="PUBLIC_EVENT",r[r.WEB_EVENT=3]="WEB_EVENT",r[r.INTERNAL_API=4]="INTERNAL_API",r[r.WEB_API=5]="WEB_API",r[r.PUBLIC_API=6]="PUBLIC_API"}(W||(W={})),function(r){r.NONE="none",r.INIT="init",r.CANPLAY="canplay",r.PLAYING="playing",r.PAUSED="paused",r.SUSPEND="suspend",r.STALLED="stalled",r.WAITING="waiting",r.ERROR="error",r.DESTROYED="destroyed",r.ABORT="abort",r.ENDED="ended",r.EMPTIED="emptied",r.LOADEDDATA="loadeddata"}(X||(X={}));const ne={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function me(r){return g(r.reportId,"params.reportId",0,100,!1),g(r.category,"params.category",0,100,!1),g(r.event,"params.event",0,100,!1),g(r.label,"params.label",0,100,!1),l(r.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const _e={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Re,Ne,et,ht,ze,Qe,wt,Xt,_t,it,Ce,Ye,Ge,ut,mt,St,Wt,en,rn,on,hr,Hn,Er,or;function xr(r){return l(r.timeout,"config.timeout",0,1e5),l(r.timeoutFactor,"config.timeoutFactor",0,100,!1),l(r.maxRetryCount,"config.maxRetryConfig",0,1/0),l(r.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Wi(r){return u(r.codec,"config.codec",["vp8","vp9","av1","h264"]),u(r.mode,"config.mode",["rtc","live"]),void 0!==r.audioCodec&&u(r.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==r.proxyServer&&g(r.proxyServer,"config.proxyServer",1,1e4),void 0!==r.turnServer&&Bt(r.turnServer),void 0!==r.httpRetryConfig&&xr(r.httpRetryConfig),void 0!==r.websocketRetryConfig&&xr(r.websocketRetryConfig),!0}function Si(r){if(!Array.isArray(r)||r.length<1)return!1;try{r.forEach(o=>{if(!o.urls)throw Error()})}catch{return!1}return!0}function Bt(r){return g(r.turnServerURL,"turnServerURL"),g(r.username,"username"),g(r.password,"password"),r.udpport&&l(r.udpport,"udpport",1,99999,!0),r.forceturn&&i(r.forceturn,"forceturn"),r.security&&i(r.security,"security"),r.tcpport&&l(r.tcpport,"tcpport",1,99999,!0),!0}function Tt(r){return void 0!==r.level&&u(r.level,"level",[1,2,3]),!0}(function(r){r.PUBLISH="publish",r.SUBSCRIBE="subscribe",r.WS_COMPRESSOR_INIT="ws_compressor_init",r.SESSION_INIT="session_init",r.JOIN_CHOOSE_SERVER="join_choose_server",r.REQ_USER_ACCOUNT="req_user_account",r.JOIN_GATEWAY="join_gateway",r.REJOIN_GATEWAY="rejoin_gateway",r.STREAM_SWITCH="stream_switch",r.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",r.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",r.FIRST_VIDEO_RECEIVED="first_video_received",r.FIRST_AUDIO_RECEIVED="first_audio_received",r.FIRST_VIDEO_DECODE="first_video_decode",r.FIRST_AUDIO_DECODE="first_audio_decode",r.ON_ADD_AUDIO_STREAM="on_add_audio_stream",r.ON_ADD_VIDEO_STREAM="on_add_video_stream",r.ON_UPDATE_STREAM="on_update_stream",r.ON_REMOVE_STREAM="on_remove_stream",r.USER_ANALYTICS="req_user_analytics"})(Re||(Re={})),function(r){r.SESSION="io.agora.pb.Wrtc.Session",r.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",r.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",r.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",r.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",r.PUBLISH="io.agora.pb.Wrtc.Publish",r.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",r.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",r.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",r.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",r.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",r.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",r.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",r.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",r.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",r.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",r.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",r.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",r.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",r.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",r.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",r.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",r.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",r.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",r.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",r.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",r.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",r.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",r.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",r.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(Ne||(Ne={})),function(r){r[r.WORKER_EVENT=156]="WORKER_EVENT",r[r.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(et||(et={})),function(r){r[r.SESSION=26]="SESSION",r[r.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",r[r.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",r[r.JOIN_GATEWAY=28]="JOIN_GATEWAY",r[r.PUBLISH=30]="PUBLISH",r[r.SUBSCRIBE=29]="SUBSCRIBE",r[r.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",r[r.STREAM_SWITCH=32]="STREAM_SWITCH",r[r.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",r[r.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",r[r.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",r[r.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",r[r.API_INVOKE=41]="API_INVOKE",r[r.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",r[r.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",r[r.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",r[r.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",r[r.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",r[r.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",r[r.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",r[r.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",r[r.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",r[r.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",r[r.WORKER_EVENT=156]="WORKER_EVENT",r[r.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",r[r.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",r[r.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",r[r.USER_ANALYTICS=1e4]="USER_ANALYTICS",r[r.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(ht||(ht={})),function(r){r.CREATE_CLIENT="createClient",r.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",r.SET_AREA="setArea",r.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",r.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",r.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",r.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",r.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",r.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",r.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",r.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",r.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",r.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",r.START_PROXY_SERVER="Client.startProxyServer",r.STOP_PROXY_SERVER="Client.stopProxyServer",r.SET_PROXY_SERVER="Client.setProxyServer",r.SET_TURN_SERVER="Client.setTurnServer",r.SET_CLIENT_ROLE="Client.setClientRole",r.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",r.ENABLE_DUAL_STREAM="Client.enableDualStream",r.DISABLE_DUAL_STREAM="Client.disableDualStream",r.JOIN="Client.join",r.LEAVE="Client.leave",r.PUBLISH="Client.publish",r.UNPUBLISH="Client.unpublish",r.SUBSCRIBE="Client.subscribe",r.MASS_SUBSCRIBE="Client.massSubscribe",r.MASS_UNSUBSCRIBE="Client.massUnsubscribe",r.UNSUBSCRIBE="Client.unsubscribe",r.RENEW_TOKEN="Client.renewToken",r.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",r.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",r.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",r.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",r.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",r.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",r.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",r.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",r.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",r.START_LIVE_STREAMING="Client.startLiveStreaming",r.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",r.STOP_LIVE_STREAMING="Client.stopLiveStreaming",r.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",r.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",r.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",r.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",r.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",r.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",r.SET_CONFIG_DISTRIBUTE="_configDistribute",r.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",r.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",r.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",r.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",r.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",r.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",r.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",r.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",r.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",r.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",r.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",r.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",r.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",r.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",r.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",r.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",r.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",r.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",r.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",r.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",r.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",r.STREAM_TYPE_CHANGE="streamTypeChange",r.CONNECTION_STATE_CHANGE="connectionStateChange",r.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(ze||(ze={})),function(r){r.TRACER="tracer"}(Qe||(Qe={})),function(r){r.IDLE="IDLE",r.INITING="INITING",r.INITEND="INITEND"}(wt||(wt={})),function(r){r.STATE_CHANGE="state_change",r.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",r.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",r.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Xt||(Xt={})),function(r){r[r.ACCESS_POINT=101]="ACCESS_POINT",r[r.UNILBS=201]="UNILBS",r[r.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(_t||(_t={})),function(r){r[r.IIIEGAL_APPID=1]="IIIEGAL_APPID",r[r.IIIEGAL_UID=2]="IIIEGAL_UID",r[r.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(it||(it={})),function(r){r[r.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",r[r.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",r[r.INTERNAL_ERROR=8]="INTERNAL_ERROR",r[r.NO_AUTHORIZED=9]="NO_AUTHORIZED",r[r.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",r[r.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",r[r.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",r[r.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",r[r.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",r[r.USER_OVERLOAD=16]="USER_OVERLOAD",r[r.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",r[r.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Ce||(Ce={})),function(r){r[r.NO_FLAG_SET=100]="NO_FLAG_SET",r[r.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",r[r.INVALID_FALG_SET=102]="INVALID_FALG_SET",r[r.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",r[r.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",r[r.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",r[r.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",r[r.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",r[r.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",r[r.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",r[r.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",r[r.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",r[r.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",r[r.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",r[r.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",r[r.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",r[r.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",r[r.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",r[r.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Ye||(Ye={})),function(r){r[r.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",r[r.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",r[r.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",r[r.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",r[r.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",r[r.K_TICKET_INVALID=7]="K_TICKET_INVALID",r[r.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",r[r.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",r[r.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",r[r.K_UID_BANNED=14]="K_UID_BANNED",r[r.K_IP_BANNED=15]="K_IP_BANNED",r[r.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",r[r.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",r[r.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",r[r.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",r[r.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",r[r.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",r[r.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",r[r.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",r[r.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",r[r.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",r[r.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",r[r.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",r[r.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",r[r.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",r[r.ERR_INVALID_UID=117]="ERR_INVALID_UID",r[r.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",r[r.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",r[r.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",r[r.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",r[r.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",r[r.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",r[r.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",r[r.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",r[r.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",r[r.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",r[r.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",r[r.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",r[r.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",r[r.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",r[r.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",r[r.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",r[r.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",r[r.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",r[r.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",r[r.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",r[r.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",r[r.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",r[r.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",r[r.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",r[r.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",r[r.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",r[r.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",r[r.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",r[r.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",r[r.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",r[r.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Ge||(Ge={})),function(r){r[r.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",r[r.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",r[r.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(ut||(ut={})),function(r){r.LEAVE="LEAVE",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.UID_BANNED="UID_BANNED",r.IP_BANNED="IP_BANNED",r.CHANNEL_BANNED="CHANNEL_BANNED",r.FALLBACK="FALLBACK"}(mt||(mt={})),function(r){r.CONNECTION_STATE_CHANGE="connection-state-change",r.MEDIA_RECONNECT_START="media-reconnect-start",r.MEDIA_RECONNECT_END="media-reconnect-end",r.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",r.USER_JOINED="user-joined",r.USER_LEAVED="user-left",r.USER_PUBLISHED="user-published",r.USER_UNPUBLISHED="user-unpublished",r.USER_INFO_UPDATED="user-info-updated",r.CLIENT_BANNED="client-banned",r.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",r.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",r.VOLUME_INDICATOR="volume-indicator",r.CRYPT_ERROR="crypt-error",r.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",r.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",r.NETWORK_QUALITY="network-quality",r.STREAM_TYPE_CHANGED="stream-type-changed",r.STREAM_FALLBACK="stream-fallback",r.RECEIVE_METADATA="receive-metadata",r.STREAM_MESSAGE="stream-message",r.LIVE_STREAMING_ERROR="live-streaming-error",r.LIVE_STREAMING_WARNING="live-streaming-warning",r.INJECT_STREAM_STATUS="stream-inject-status",r.EXCEPTION="exception",r.ERROR="error",r.P2P_LOST="p2p_lost",r.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",r.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",r.PUBLISHED_USER_LIST="published-user-list",r.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",r.CONTENT_INSPECT_ERROR="content-inspect-error",r.CONTENT_INSPECT_RESULT="content-inspect-result"}(St||(St={})),function(r){r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.MULTI_IP="MULTI_IP",r.TIMEOUT="TIMEOUT",r.OFFLINE="OFFLINE",r.LEAVE="LEAVE",r.P2P_FAILED="P2P_FAILED",r.FALLBACK="FALLBACK"}(Wt||(Wt={})),function(r){r.CONNECTING="connecting",r.CONNECTED="connected",r.RECONNECTING="reconnecting",r.CLOSED="closed"}(en||(en={})),function(r){r.WS_CONNECTED="ws_connected",r.WS_RECONNECTING="ws_reconnecting",r.WS_CLOSED="ws_closed",r.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",r.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",r.ON_BINARY_DATA="on_binary_data",r.REQUEST_RECOVER="request_recover",r.REQUEST_JOIN_INFO="request_join_info",r.REQUEST_REJOIN_INFO="req_rejoin_info",r.IS_P2P_DISCONNECTED="is_p2p_dis",r.DISCONNECT_P2P="dis_p2p",r.ABORT_P2P_EXECUTION="abort_p2p_execution",r.NEED_RENEW_SESSION="need-sid",r.REPORT_JOIN_GATEWAY="report_join_gateway",r.REQUEST_TIMEOUT="request_timeout",r.REQUEST_SUCCESS="request_success",r.JOIN_RESPONSE="join_response"}(rn||(rn={})),function(r){r.PING="ping",r.PING_BACK="ping_back",r.JOIN="join_v3",r.REJOIN="rejoin_v3",r.LEAVE="leave",r.SET_CLIENT_ROLE="set_client_role",r.PUBLISH="publish",r.UNPUBLISH="unpublish",r.SUBSCRIBE="subscribe",r.SUBSCRIBE_STREAMS="subscribe_streams",r.UNSUBSCRIBE="unsubscribe",r.UNSUBSCRIBE_STREAMS="unsubscribe_streams",r.SUBSCRIBE_CHANGE="subscribe_change",r.TRAFFIC_STATS="traffic_stats",r.RENEW_TOKEN="renew_token",r.SWITCH_VIDEO_STREAM="switch_video_stream",r.DEFAULT_VIDEO_STREAM="default_video_stream",r.SET_FALLBACK_OPTION="set_fallback_option",r.GATEWAY_INFO="gateway_info",r.CONTROL="control",r.SEND_METADATA="send_metadata",r.DATA_STREAM="data_stream",r.PICK_SVC_LAYER="pick_svc_layer",r.RESTART_ICE="restart_ice",r.CONNECT_PC="connect_pc",r.SET_VIDEO_PROFILE="set_video_profile"}(on||(on={})),function(r){r.PUBLISH_STATS="publish_stats",r.PUBLISH_RELATED_STATS="publish_related_stats",r.SUBSCRIBE_STATS="subscribe_stats",r.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",r.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",r.DENOISER_STATS="denoiser_stats",r.TRANSPORT_STATS="transport_stats"}(hr||(hr={})),function(r){r.ON_USER_ONLINE="on_user_online",r.ON_USER_OFFLINE="on_user_offline",r.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",r.ON_PUBLISH_STREAM="on_publish_stream",r.ON_UPLINK_STATS="on_uplink_stats",r.ON_P2P_LOST="on_p2p_lost",r.ON_REMOVE_STREAM="on_remove_stream",r.ON_ADD_AUDIO_STREAM="on_add_audio_stream",r.ON_ADD_VIDEO_STREAM="on_add_video_stream",r.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",r.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",r.ON_USER_BANNED="on_user_banned",r.ON_NOTIFICATION="on_notification",r.ON_CRYPT_ERROR="on_crypt_error",r.MUTE_AUDIO="mute_audio",r.MUTE_VIDEO="mute_video",r.UNMUTE_AUDIO="unmute_audio",r.UNMUTE_VIDEO="unmute_video",r.ON_P2P_OK="on_p2p_ok",r.RECEIVE_METADATA="receive_metadata",r.ON_DATA_STREAM="on_data_stream",r.ENABLE_LOCAL_VIDEO="enable_local_video",r.DISABLE_LOCAL_VIDEO="disable_local_video",r.ENABLE_LOCAL_AUDIO="enable_local_audio",r.DISABLE_LOCAL_AUDIO="disable_local_audio",r.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Hn||(Hn={})),function(r){r.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",r.NEED_ANSWER="NEED_ANSWER",r.NEED_RENEGOTIATE="NEED_RENEGOTIATE",r.P2P_LOST="P2P_LOST",r.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",r.NEED_UNPUB="NEED_UNPUB",r.NEED_UNSUB="NEED_UNSUB",r.NEED_UPLOAD="NEED_UPLOAD",r.NEED_CONTROL="NEED_CONTROL",r.START_RECONNECT="START_RECONNECT",r.END_RECONNECT="END_RECONNECT",r.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(Er||(Er={})),function(r){r.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",r.RECEIVE_TRACK_BUFFER="receive_track_buffer",r.ON_AUDIO_BUFFER="on_audio_buffer",r.UPDATE_SOURCE="update_source"}(or||(or={}));const at={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},Zt={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},xn={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},sr={uplinkNetworkQuality:0,downlinkNetworkQuality:0},br={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let In,nr,Mr;(function(r){r.CONNECTED="websocket:connected",r.RECONNECTING="websocket:reconnecting",r.WILL_RECONNECT="websocket:will_reconnect",r.CLOSED="websocket:closed",r.FAILED="websocket:failed",r.ON_MESSAGE="websocket:on_message",r.REQUEST_NEW_URLS="websocket:request_new_urls",r.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",r.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection"})(In||(In={})),function(r){r.TRANSCODE="mix_streaming",r.RAW="raw_streaming",r.INJECT="inject_streaming"}(nr||(nr={})),function(r){r[r.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",r[r.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",r[r.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",r[r.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",r[r.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",r[r.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",r[r.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",r[r.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",r[r.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",r[r.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",r[r.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Mr||(Mr={}));const Kr={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},Fr={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function $i(r,o){g(r.url,"".concat(o,".url"),1,1e3,!1),D(r.x)||l(r.x,"".concat(o,".x"),0,1e4),D(r.y)||l(r.y,"".concat(o,".y"),0,1e4),D(r.width)||l(r.width,"".concat(o,".width"),0,1e4),D(r.height)||l(r.height,"".concat(o,".height"),0,1e4),D(r.zOrder)||l(r.zOrder,"".concat(o,".zOrder"),0,255),D(r.alpha)||l(r.alpha,"".concat(o,".alpha"),0,1,!1)}const Qi={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},Bi={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let Fi,Ki,Nr,Sl,ho,zc,Cs,Oh,Zo,Is,jo,_r,qc,BU,ij,Ep,sv,si;function cT(r){if(!r.channelName)throw new Le(Te.INVALID_PARAMS,"invalid channelName in info");if(!r.uid||"number"!=typeof r.uid)throw new Le(Te.INVALID_PARAMS,"invalid uid in info, uid must be a number");return r.token&&g(r.token,"info.token",1,2047),w(r.uid),C(r.channelName),!0}function Dk(r){return u(r,"mediaSource",["screen","window","application"]),!0}(function(r){r.WARNING="@live_uap-warning",r.ERROR="@line_uap-error",r.PUBLISH_STREAM_STATUS="@live_uap-publish-status",r.INJECT_STREAM_STATUS="@live_uap-inject-status",r.WORKER_STATUS="@live_uap-worker-status",r.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(Fi||(Fi={})),function(r){r.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(Ki||(Ki={})),function(r){r[r.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",r[r.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",r[r.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",r[r.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",r[r.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",r[r.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",r[r.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",r[r.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",r[r.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",r[r.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",r[r.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",r[r.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",r[r.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",r[r.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",r[r.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",r[r.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",r[r.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",r[r.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",r[r.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",r[r.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",r[r.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(Nr||(Nr={})),function(r){r.CONNECT_FAILED="connect failed",r.CONNECT_TIMEOUT="connect timeout",r.WS_DISCONNECTED="websocket disconnected",r.REQUEST_TIMEOUT="request timeout",r.REQUEST_FAILED="request failed",r.WAIT_STATUS_TIMEOUT="wait status timeout",r.WAIT_STATUS_ERROR="wait status error",r.BAD_STATE="bad state",r.WS_ABORT="ws abort",r.AP_REQUEST_TIMEOUT="AP request timeout",r.AP_JSON_PARSE_ERROR="AP json parse error",r.AP_REQUEST_ERROR="AP request error",r.AP_REQUEST_ABORT="AP request abort"}(Sl||(Sl={})),function(r){r[r.SetSdkProfile=0]="SetSdkProfile",r[r.SetSourceChannel=1]="SetSourceChannel",r[r.SetSourceUserId=2]="SetSourceUserId",r[r.SetDestChannel=3]="SetDestChannel",r[r.StartPacketTransfer=4]="StartPacketTransfer",r[r.StopPacketTransfer=5]="StopPacketTransfer",r[r.UpdateDestChannel=6]="UpdateDestChannel",r[r.Reconnect=7]="Reconnect",r[r.SetVideoProfile=8]="SetVideoProfile"}(ho||(ho={})),function(r){r.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",r.NETWORK_CONNECTED="NETWORK_CONNECTED",r.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",r.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",r.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",r.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",r.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",r.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",r.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",r.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(zc||(zc={})),function(r){r.RELAY_STATE_IDLE="RELAY_STATE_IDLE",r.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",r.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",r.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(Cs||(Cs={})),function(r){r.RELAY_OK="RELAY_OK",r.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",r.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",r.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Oh||(Oh={})),function(r){r.High="high",r.Low="low",r.Audio="audio",r.Screen="screen",r.ScreenLow="screen_low"}(Zo||(Zo={})),function(r){r.DISCONNECT="disconnect",r.CONNECTION_STATE_CHANGE="connection-state-change",r.NETWORK_QUALITY="network-quality",r.STREAM_TYPE_CHANGE="stream-type-change",r.IS_P2P_DISCONNECTED="is-p2p-dis",r.DISCONNECT_P2P="dis-p2p",r.REQUEST_NEW_GATEWAY_LIST="req-gate-url",r.NEED_RENEW_SESSION="need-sid",r.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",r.JOIN_RESPONSE="join-response"}(Is||(Is={})),function(r){r[r.Nothing=0]="Nothing",r[r.Audio=1]="Audio",r[r.LwoVideo=2]="LwoVideo",r[r.Video=4]="Video",r[r.Data=8]="Data"}(jo||(jo={})),function(r){r.NEED_RENEGOTIATE="@need_renegotiate",r.NEED_REPLACE_TRACK="@need_replace_track",r.NEED_CLOSE="@need_close",r.NEED_ENABLE_TRACK="@need_enable_track",r.NEED_DISABLE_TRACK="@need_disable_track",r.NEED_SESSION_ID="@need_sid",r.SET_OPTIMIZATION_MODE="@set_optimization_mode",r.GET_STATS="@get_stats",r.GET_LOW_VIDEO_TRACK="@get_low_video_track",r.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",r.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",r.NEED_MUTE_TRACK="@need_mute_track",r.NEED_UNMUTE_TRACK="@need_unmute_track"}(_r||(_r={})),function(r){r.SCREEN_TRACK="screen_track",r.LOW_STREAM="low_stream"}(qc||(qc={})),function(r){r[r.HIGH_STREAM=0]="HIGH_STREAM",r[r.LOW_STREAM=1]="LOW_STREAM"}(BU||(BU={})),function(r){r[r.DISABLE=0]="DISABLE",r[r.LOW_STREAM=1]="LOW_STREAM",r[r.AUDIO_ONLY=2]="AUDIO_ONLY"}(ij||(ij={})),function(r){r.SOURCE_STATE_CHANGE="source-state-change",r.TRACK_ENDED="track-ended",r.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",r.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",r.CLOSED="closed"}(Ep||(Ep={})),function(r){r.FIRST_FRAME_DECODED="first-frame-decoded",r.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(sv||(sv={})),function(r){r.CHINA="CHINA",r.ASIA="ASIA",r.NORTH_AMERICA="NORTH_AMERICA",r.EUROPE="EUROPE",r.JAPAN="JAPAN",r.INDIA="INDIA",r.KOREA="KOREA",r.HKMC="HKMC",r.US="US",r.OCEANIA="OCEANIA",r.SOUTH_AMERICA="SOUTH_AMERICA",r.AFRICA="AFRICA",r.OVERSEA="OVERSEA",r.GLOBAL="GLOBAL"}(si||(si={}));const Dx=[si.AFRICA,si.ASIA,si.CHINA,si.EUROPE,si.GLOBAL,si.INDIA,si.JAPAN,si.NORTH_AMERICA,si.OCEANIA,si.OVERSEA,si.SOUTH_AMERICA];let Zs;!function(r){r.CHINA="CN",r.ASIA="AS",r.NORTH_AMERICA="NA",r.EUROPE="EU",r.JAPAN="JP",r.INDIA="IN",r.KOREA="KR",r.HKMC="HK",r.US="US",r.OCEANIA="OC",r.SOUTH_AMERICA="SA",r.AFRICA="AF",r.OVERSEA="OVERSEA",r.GLOBAL="GLOBAL"}(Zs||(Zs={}));const Ok={CHINA:{},ASIA:{CODE:Zs.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Zs.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Zs.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Zs.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Zs.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Zs.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Zs.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Zs.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Zs.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Zs.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Zs.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Zs.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Zs.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};let zy,oj,Xr,Un,bd,gi,ql,lT;tT&&(Ok.CHINA={CODE:Zs.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(r){r.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(zy||(zy={}));class sj extends ko{constructor(o,a){super(),J(this,"onICEConnectionStateChange",void 0),J(this,"onConnectionStateChange",void 0),J(this,"onDTLSTransportStateChange",void 0),J(this,"onDTLSTransportError",void 0),J(this,"onICETransportStateChange",void 0),J(this,"onFirstAudioReceived",void 0),J(this,"onFirstVideoReceived",void 0),J(this,"onFirstAudioDecoded",void 0),J(this,"onFirstVideoDecoded",void 0),J(this,"onSelectedLocalCandidateChanged",void 0),J(this,"onSelectedRemoteCandidateChanged",void 0)}}(function(r){r.SEND="sendonly",r.RECV="recvonly",r.SENDRECV="sendrecv",r.INACTIVE="inactive"})(oj||(oj={})),function(r){r.VIDEO="video",r.AUDIO="audio"}(Xr||(Xr={})),function(r){r.LocalVideoTrack="videoTrack",r.LocalAudioTrack="audioTrack",r.LocalVideoLowTrack="videoLowTrack"}(Un||(Un={})),function(r){r.New="new",r.Connected="connected",r.Reconnecting="reconnecting",r.Disconnected="disconnected"}(bd||(bd={})),function(r){r.StateChange="stateChange",r.IceConnectionStateChange="iceConnectionStateChange",r.RequestMuteLocal="requestMuteLocal",r.RequestUnmuteLocal="requestUnmuteLocal",r.RequestRePublish="requestRePublish",r.RequestReSubscribe="requestReSubscribe",r.RequestUploadStats="requestUploadStats",r.MediaReconnectStart="MediaReconnectStart",r.MediaReconnectEnd="MediaReconnectEnd",r.NeedSignalRTT="NeedSignalRTT",r.RequestRestartICE="RequestRestartIce",r.PeerConnectionStateChange="PeerConnectionStateChange",r.RequestReconnect="RequestReconnect",r.RequestReconnectPC="RequestReconnectPC",r.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",r.P2PLost="P2PLost",r.UpdateVideoEncoder="UpdateVideoEncoder",r.ConnectionTypeChange="ConnectionTypeChange",r.RequestLowStreamParameter="RequestLowStreamParameter"}(gi||(gi={})),function(r){r.ONLINE="ONLINE",r.OFFLINE="OFFLINE"}(ql||(ql={})),function(r){r.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",r.ONLINE="ONLINE",r.OFFLINE="OFFLINE"}(lT||(lT={}));const FU={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]};let bp,Mu,Yl,Nu,os;(function(r){r.ON_TRACK="on_track",r.ON_NODE="on_node"})(bp||(bp={})),function(r){r.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",r.REQUEST_CONSTRAINTS="request_constraints"}(Mu||(Mu={})),function(r){r.CONNECTING="CONNECTING",r.RECONNECTING="RECONNECTING",r.CONNECTED="CONNECTED",r.CLOSED="CLOSED"}(Yl||(Yl={})),function(r){r[r.CONNECT_AP=0]="CONNECT_AP",r[r.AP_CONNECTED=1]="AP_CONNECTED",r[r.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",r[r.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",r[r.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",r[r.CONNECT_WORKER=5]="CONNECT_WORKER",r[r.WORKER_CONNECTED=6]="WORKER_CONNECTED",r[r.CLOSED=7]="CLOSED"}(Nu||(Nu={})),function(r){r.CONNECTION_STATE_CHANGE="connection-state-change",r.STATE_CHANGE="state-change",r.INSPECT_RESULT="inspect-result",r.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",r.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(os||(os={}));const Sc={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function Yc(){return Sc}var xQ=typeof ArrayBuffer<"u"&&typeof DataView<"u",LQ=jh,kk=Wu,Pk=H.RangeError,UU=function(r){if(void 0===r)return 0;var o=LQ(r),a=kk(o);if(o!==a)throw Pk("Wrong length or index");return a},aj=H.Array,VU=Math.abs,Sp=Math.pow,BQ=Math.floor,cj=Math.log,RW=Math.LN2,OW=ls,FQ=zi,UQ=ba,lj=Pg,VQ=ts,uj=ye,jU=zi,dj=ba,jQ=function(r,o,a){var c=lj(o);c in r?VQ.f(r,c,uj(0,a)):r[c]=a},pj=H.Array,QQ=Math.max,HQ=function(r,o,a){for(var c=dj(r),p=jU(o,c),_=jU(void 0===a?c:a,c),m=pj(QQ(_-p,0)),A=0;p<_;p++,A++)jQ(m,A,r[p]);return m.length=A,m},QU=le,Ox=P,GQ=xQ,kx=Wn,hj=VB,Px=M,Mx=Zf,uT=jh,WQ=Wu,dT=UU,fj_pack=function(r,o,a){var c,p,_,m=aj(a),A=8*a-o-1,v=(1<<A)-1,S=v>>1,I=23===o?Sp(2,-24)-Sp(2,-77):0,R=r<0||0===r&&1/r<0?1:0,O=0;for((r=VU(r))!=r||r===1/0?(p=r!=r?1:0,c=v):(c=BQ(cj(r)/RW),r*(_=Sp(2,-c))<1&&(c--,_*=2),(r+=c+S>=1?I/_:I*Sp(2,1-S))*_>=2&&(c++,_/=2),c+S>=v?(p=0,c=v):c+S>=1?(p=(r*_-1)*Sp(2,o),c+=S):(p=r*Sp(2,S-1)*Sp(2,o),c=0));o>=8;)m[O++]=255&p,p/=256,o-=8;for(c=c<<o|p,A+=o;A>0;)m[O++]=255&c,c/=256,A-=8;return m[--O]|=128*R,m},fj_unpack=function(r,o){var a,c=r.length,p=8*c-o-1,_=(1<<p)-1,m=_>>1,A=p-7,v=c-1,S=r[v--],I=127&S;for(S>>=7;A>0;)I=256*I+r[v--],A-=8;for(a=I&(1<<-A)-1,I>>=-A,A+=o;A>0;)a=256*a+r[v--],A-=8;if(0===I)I=1-m;else{if(I===_)return a?NaN:S?-1/0:1/0;a+=Sp(2,o),I-=m}return(S?-1:1)*a*Sp(2,I-o)},GU=VC,WU=Qh,KQ=Dl.f,KU=ts.f,mj=HQ,gj=CE,zU=Qd.PROPER,_j=Qd.CONFIGURABLE,pT=Zc.get,qU=Zc.set,YU="ArrayBuffer",Nx="Wrong index",Bf=H.ArrayBuffer,kh=Bf,VS=kh&&kh.prototype,xu=H.DataView,jS=xu&&xu.prototype,$U=Object.prototype,qQ=H.Array,Nk=H.RangeError,YQ=QU(function(r){for(var o=OW(this),a=UQ(o),c=arguments.length,p=FQ(c>1?arguments[1]:void 0,a),_=c>2?arguments[2]:void 0,m=void 0===_?a:FQ(_,a);m>p;)o[p++]=r;return o}),$Q=QU([].reverse),xx=fj_pack,JU=fj_unpack,vj=function(r){return[255&r]},XU=function(r){return[255&r,r>>8&255]},Aj=function(r){return[255&r,r>>8&255,r>>16&255,r>>24&255]},ZU=function(r){return r[3]<<24|r[2]<<16|r[1]<<8|r[0]},JQ=function(r){return xx(r,23,4)},yj=function(r){return xx(r,52,8)},Lx=function(r,o){KU(r.prototype,o,{get:function(){return pT(this)[o]}})},av=function(r,o,a,c){var p=dT(a),_=pT(r);if(p+o>_.byteLength)throw Nk(Nx);var m=pT(_.buffer).bytes,A=p+_.byteOffset,v=mj(m,A,A+o);return c?v:$Q(v)},QS=function(r,o,a,c,p,_){var m=dT(a),A=pT(r);if(m+o>A.byteLength)throw Nk(Nx);for(var v=pT(A.buffer).bytes,S=m+A.byteOffset,I=c(+p),R=0;R<o;R++)v[S+R]=I[_?R:o-R-1]};if(GQ){var XQ=zU&&Bf.name!==YU;if(Px(function(){Bf(1)})&&Px(function(){new Bf(-1)})&&!Px(function(){return new Bf,new Bf(1.5),new Bf(NaN),XQ&&!_j}))XQ&&_j&&kx(Bf,"name",YU);else{(kh=function(r){return Mx(this,VS),new Bf(dT(r))}).prototype=VS;for(var Ej,e3=KQ(Bf),bj=0;e3.length>bj;)(Ej=e3[bj++])in kh||kx(kh,Ej,Bf[Ej]);VS.constructor=kh}WU&&GU(jS)!==$U&&WU(jS,$U);var Bx=new xu(new kh(2)),Sj=QU(jS.setInt8);Bx.setInt8(0,2147483648),Bx.setInt8(1,2147483649),!Bx.getInt8(0)&&Bx.getInt8(1)||hj(jS,{setInt8:function(r,o){Sj(this,r,o<<24>>24)},setUint8:function(r,o){Sj(this,r,o<<24>>24)}},{unsafe:!0})}else VS=(kh=function(r){Mx(this,VS);var o=dT(r);qU(this,{bytes:YQ(qQ(o),0),byteLength:o}),Ox||(this.byteLength=o)}).prototype,jS=(xu=function(r,o,a){Mx(this,jS),Mx(r,VS);var c=pT(r).byteLength,p=uT(o);if(p<0||p>c)throw Nk("Wrong offset");if(p+(a=void 0===a?c-p:WQ(a))>c)throw Nk("Wrong length");qU(this,{buffer:r,byteLength:a,byteOffset:p}),Ox||(this.buffer=r,this.byteLength=a,this.byteOffset=p)}).prototype,Ox&&(Lx(kh,"byteLength"),Lx(xu,"buffer"),Lx(xu,"byteLength"),Lx(xu,"byteOffset")),hj(jS,{getInt8:function(r){return av(this,1,r)[0]<<24>>24},getUint8:function(r){return av(this,1,r)[0]},getInt16:function(r){var o=av(this,2,r,arguments.length>1?arguments[1]:void 0);return(o[1]<<8|o[0])<<16>>16},getUint16:function(r){var o=av(this,2,r,arguments.length>1?arguments[1]:void 0);return o[1]<<8|o[0]},getInt32:function(r){return ZU(av(this,4,r,arguments.length>1?arguments[1]:void 0))},getUint32:function(r){return ZU(av(this,4,r,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(r){return JU(av(this,4,r,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(r){return JU(av(this,8,r,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(r,o){QS(this,1,r,vj,o)},setUint8:function(r,o){QS(this,1,r,vj,o)},setInt16:function(r,o){QS(this,2,r,XU,o,arguments.length>2?arguments[2]:void 0)},setUint16:function(r,o){QS(this,2,r,XU,o,arguments.length>2?arguments[2]:void 0)},setInt32:function(r,o){QS(this,4,r,Aj,o,arguments.length>2?arguments[2]:void 0)},setUint32:function(r,o){QS(this,4,r,Aj,o,arguments.length>2?arguments[2]:void 0)},setFloat32:function(r,o){QS(this,4,r,JQ,o,arguments.length>2?arguments[2]:void 0)},setFloat64:function(r,o){QS(this,8,r,yj,o,arguments.length>2?arguments[2]:void 0)}});gj(kh,YU),gj(xu,"DataView");var t3={ArrayBuffer:kh,DataView:xu},PW=ou,Cj=le,MW=M,ZQ=Nn,e9=zi,NW=Wu,t9=Mi,n3=t3.ArrayBuffer,r3=t3.DataView,hT=r3.prototype,Ij=Cj(n3.prototype.slice),o3=Cj(hT.getUint8),$c=Cj(hT.setUint8);PW({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:MW(function(){return!new n3(2).slice(1,void 0).byteLength})},{slice:function(r,o){if(Ij&&void 0===o)return Ij(ZQ(this),r);for(var a=ZQ(this).byteLength,c=e9(r,a),p=e9(void 0===o?a:o,a),_=new(t9(this,n3))(NW(p-c)),m=new r3(this),A=new r3(_),v=0;c<p;)$c(A,v++,o3(m,c++));return _}});var Sd,Ff,xk,Uf={exports:{}},Lk=xQ,s3=P,Cc=H,Bk=ot,cv=qt,HS=_o,wj=Ca,a3=yo,c3=Wn,l3=Ud.exports,xW=ts.f,GS=Dr,Fk=VC,Lu=Qh,n9=No,Vf=Fh,WS=Cc.Int8Array,Uk=WS&&WS.prototype,_g=Cc.Uint8ClampedArray,r9=_g&&_g.prototype,vg=WS&&Fk(WS),jf=Uk&&Fk(Uk),i9=Object.prototype,u3=Cc.TypeError,d3=n9("toStringTag"),fT=Vf("TYPED_ARRAY_TAG"),Ag=Vf("TYPED_ARRAY_CONSTRUCTOR"),qy=Lk&&!!Lu&&"Opera"!==wj(Cc.opera),Tj=!1,lv={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Fx={BigInt64Array:8,BigUint64Array:8},p3=function(r){if(!cv(r))return!1;var o=wj(r);return HS(lv,o)||HS(Fx,o)};for(Sd in lv)(xk=(Ff=Cc[Sd])&&Ff.prototype)?c3(xk,Ag,Ff):qy=!1;for(Sd in Fx)(xk=(Ff=Cc[Sd])&&Ff.prototype)&&c3(xk,Ag,Ff);if((!qy||!Bk(vg)||vg===Function.prototype)&&(vg=function(){throw u3("Incorrect invocation")},qy))for(Sd in lv)Cc[Sd]&&Lu(Cc[Sd],vg);if((!qy||!jf||jf===i9)&&(jf=vg.prototype,qy))for(Sd in lv)Cc[Sd]&&Lu(Cc[Sd].prototype,jf);if(qy&&Fk(r9)!==jf&&Lu(r9,jf),s3&&!HS(jf,d3))for(Sd in Tj=!0,xW(jf,d3,{get:function(){return cv(this)?this[fT]:void 0}}),lv)Cc[Sd]&&c3(Cc[Sd],fT,Sd);var Yy={NATIVE_ARRAY_BUFFER_VIEWS:qy,TYPED_ARRAY_CONSTRUCTOR:Ag,TYPED_ARRAY_TAG:Tj&&fT,aTypedArray:function(r){if(p3(r))return r;throw u3("Target is not a typed array")},aTypedArrayConstructor:function(r){if(Bk(r)&&(!Lu||GS(vg,r)))return r;throw u3(a3(r)+" is not a typed array constructor")},exportTypedArrayMethod:function(r,o,a,c){if(s3){if(a)for(var p in lv){var _=Cc[p];if(_&&HS(_.prototype,r))try{delete _.prototype[r]}catch{try{_.prototype[r]=o}catch{}}}jf[r]&&!a||l3(jf,r,a?o:qy&&Uk[r]||o,c)}},exportTypedArrayStaticMethod:function(r,o,a){var c,p;if(s3){if(Lu){if(a)for(c in lv)if((p=Cc[c])&&HS(p,r))try{delete p[r]}catch{}if(vg[r]&&!a)return;try{return l3(vg,r,a?o:qy&&vg[r]||o)}catch{}}for(c in lv)!(p=Cc[c])||p[r]&&!a||l3(p,r,o)}},isView:function(r){if(!cv(r))return!1;var o=wj(r);return"DataView"===o||HS(lv,o)||HS(Fx,o)},isTypedArray:p3,TypedArray:vg,TypedArrayPrototype:jf},KS=M,Xa=nm,f3=H.ArrayBuffer,yg=H.Int8Array,Dj=!Yy.NATIVE_ARRAY_BUFFER_VIEWS||!KS(function(){yg(1)})||!KS(function(){new yg(-1)})||!Xa(function(r){new yg,new yg(null),new yg(1.5),new yg(r)},!0)||KS(function(){return 1!==new yg(new f3(2),1,void 0).length}),m3=qt,Ux=Math.floor,Oj=Number.isInteger||function(r){return!m3(r)&&isFinite(r)&&Ux(r)===r},o9=jh,s9=H.RangeError,Vk=H.RangeError,kj=function(r,o){var a=function(r){var o=o9(r);if(o<0)throw s9("The argument can't be less than 0");return o}(r);if(a%o)throw Vk("Wrong offset");return a},Pj=Ro,LW=ae,BW=bo,FW=ls,UW=ba,VW=Nv,jW=wE,c9=d1,l9=Yy.aTypedArrayConstructor,Mj=Fe,u9=H,d9=Array.isArray||function(r){return"Array"==Mj(r)},p9=v1,h9=qt,Nj=No("species"),Vx=u9.Array,Lj=Ro,Bj=Ht,Fj=ls,Uj=ba,f9=function(r,o){return new(function(r){var o;return d9(r)&&(p9(o=r.constructor)&&(o===Vx||d9(o.prototype))||h9(o)&&null===(o=o[Nj]))&&(o=void 0),void 0===o?Vx:o}(r))(0===o?0:o)},Vj=le([].push),zS=function(r){var o=1==r,a=2==r,c=3==r,p=4==r,_=6==r,m=7==r,A=5==r||_;return function(v,S,I,R){for(var O,B,q=Fj(v),z=Bj(q),te=Lj(S,I),de=Uj(z),ge=0,Se=R||f9,Me=o?Se(v,de):a||m?Se(v,0):void 0;de>ge;ge++)if((A||ge in z)&&(B=te(O=z[ge],ge,q),r))if(o)Me[ge]=B;else if(B)switch(r){case 3:return!0;case 5:return O;case 6:return ge;case 2:Vj(Me,O)}else switch(r){case 4:return!1;case 7:Vj(Me,O)}return _?-1:c||p?p:Me}},Fa={forEach:zS(0),map:zS(1),filter:zS(2),some:zS(3),every:zS(4),find:zS(5),findIndex:zS(6),filterReject:zS(7)},qS=ou,jj=H,m9=ae,g9=Dj,v9=Zf,QW=ye,jk=Wn,A9=Oj,HW=Wu,y9=UU,g3=kj,E9=Pg,jx=_o,b9=Ca,Hj=qt,Qx=Ho,S9=Ft,C9=Dr,Hx=Qh,GW=Dl.f,I9=function(r){var o,a,c,p,_,m,A=BW(this),v=FW(r),S=arguments.length,I=S>1?arguments[1]:void 0,R=void 0!==I,O=jW(v);if(O&&!c9(O))for(m=(_=VW(v,O)).next,v=[];!(p=LW(m,_)).done;)v.push(p.value);for(R&&S>2&&(I=Pj(I,arguments[2])),a=UW(v),c=new(l9(A))(a),o=0;a>o;o++)c[o]=R?I(v[o],o):v[o];return c},Gj=Fa.forEach,Gx=w0,Wj=ts,w9=$C,_3=Zc.get,Wx=Zc.set,mT=Wj.f,Kx=j.f,zx=Math.round,zj=jj.RangeError,T9=t3.ArrayBuffer,WW=T9.prototype,KW=t3.DataView,qx=Yy.NATIVE_ARRAY_BUFFER_VIEWS,zW=Yy.TYPED_ARRAY_CONSTRUCTOR,R9=Yy.TYPED_ARRAY_TAG,D9=Yy.TypedArray,Yx=Yy.TypedArrayPrototype,qW=Yy.aTypedArrayConstructor,qj=Yy.isTypedArray,v3="BYTES_PER_ELEMENT",Yj="Wrong length",$j=function(r,o){qW(r);for(var a=0,c=o.length,p=new r(c);c>a;)p[a]=o[a++];return p},A3=function(r,o){mT(r,o,{get:function(){return _3(this)[o]}})},O9=function(r){var o;return C9(WW,r)||"ArrayBuffer"==(o=b9(r))||"SharedArrayBuffer"==o},k9=function(r,o){return qj(r)&&!Qx(o)&&o in r&&A9(+o)&&o>=0},P9=function(r,o){return o=E9(o),k9(r,o)?QW(2,r[o]):Kx(r,o)},y3=function(r,o,a){return o=E9(o),!(k9(r,o)&&Hj(a)&&jx(a,"value"))||jx(a,"get")||jx(a,"set")||a.configurable||jx(a,"writable")&&!a.writable||jx(a,"enumerable")&&!a.enumerable?mT(r,o,a):(r[o]=a.value,r)};P?(qx||(j.f=P9,Wj.f=y3,A3(Yx,"buffer"),A3(Yx,"byteOffset"),A3(Yx,"byteLength"),A3(Yx,"length")),qS({target:"Object",stat:!0,forced:!qx},{getOwnPropertyDescriptor:P9,defineProperty:y3}),Uf.exports=function(r,o,a){var c=r.match(/\d+$/)[0]/8,p=r+(a?"Clamped":"")+"Array",_="get"+r,m="set"+r,A=jj[p],v=A,S=v&&v.prototype,I={},R=function(O,B){mT(O,B,{get:function(){return z=B,(te=_3(this)).view[_](z*c+te.byteOffset,!0);var z,te},set:function(q){return te=B,de=q,ge=_3(this),a&&(de=(de=zx(de))<0?0:de>255?255:255&de),void ge.view[m](te*c+ge.byteOffset,de,!0);var te,de,ge},enumerable:!0})};qx?g9&&(v=o(function(O,B,q,z){return v9(O,S),w9(Hj(B)?O9(B)?void 0!==z?new A(B,g3(q,c),z):void 0!==q?new A(B,g3(q,c)):new A(B):qj(B)?$j(v,B):m9(I9,v,B):new A(y9(B)),O,v)}),Hx&&Hx(v,D9),Gj(GW(A),function(O){O in v||jk(v,O,A[O])}),v.prototype=S):(v=o(function(O,B,q,z){v9(O,S);var te,de,ge,Se=0,Me=0;if(Hj(B)){if(!O9(B))return qj(B)?$j(v,B):m9(I9,v,B);te=B,Me=g3(q,c);var dt=B.byteLength;if(void 0===z){if(dt%c||(de=dt-Me)<0)throw zj(Yj)}else if((de=HW(z)*c)+Me>dt)throw zj(Yj);ge=de/c}else ge=y9(B),te=new T9(de=ge*c);for(Wx(O,{buffer:te,byteOffset:Me,byteLength:de,length:ge,view:new KW(te)});Se<ge;)R(O,Se++)}),Hx&&Hx(v,D9),S=v.prototype=S9(Yx)),S.constructor!==v&&jk(S,"constructor",v),jk(S,zW,v),R9&&jk(S,R9,p),I[p]=v,qS({global:!0,forced:v!=A,sham:!qx},I),v3 in v||jk(v,v3,c),v3 in S||jk(S,v3,c),Gx(p)}):Uf.exports=function(){},(0,Uf.exports)("Uint8",function(r){return function(o,a,c){return r(this,o,a,c)}});var YW=ba,$W=jh,JW=Yy.aTypedArray;(0,Yy.exportTypedArrayMethod)("at",function(r){var o=JW(this),a=YW(o),c=$W(r),p=c>=0?c:a+c;return p<0||p>=a?void 0:o[p]});var N9=ae,Jj=Yy,XW=ba,ZW=kj,eK=ls,x9=M,tK=H.RangeError,Xj=H.Int8Array,L9=Xj&&Xj.prototype,B9=L9&&L9.set,nK=Jj.aTypedArray,rK=Jj.exportTypedArrayMethod,Zj=!x9(function(){var r=new Uint8ClampedArray(2);return N9(B9,r,{length:1,0:3},1),3!==r[1]}),iK=Zj&&Jj.NATIVE_ARRAY_BUFFER_VIEWS&&x9(function(){var r=new Xj(2);return r.set(1),r.set("2",1),0!==r[0]||2!==r[1]});rK("set",function(r){nK(this);var o=ZW(arguments.length>1?arguments[1]:void 0,1),a=eK(r);if(Zj)return N9(B9,this,a,o);var c=this.length,p=XW(a),_=0;if(p+o>c)throw tK("Wrong length");for(;_<p;)this[o+_]=a[_++]},!Zj||iK);var F9=HQ,oK=Math.floor,e5=function(r,o){var a=r.length,c=oK(a/2);return a<8?sK(r,o):aK(r,e5(F9(r,0,c),o),e5(F9(r,c),o),o)},sK=function(r,o){for(var a,c,p=r.length,_=1;_<p;){for(c=_,a=r[_];c&&o(r[c-1],a)>0;)r[c]=r[--c];c!==_++&&(r[c]=a)}return r},aK=function(r,o,a,c){for(var p=o.length,_=a.length,m=0,A=0;m<p||A<_;)r[m+A]=m<p&&A<_?c(o[m],a[A])<=0?o[m++]:a[A++]:m<p?o[m++]:a[A++];return r},cK=e5,t5=vr.match(/firefox\/(\d+)/i),U9=!!t5&&+t5[1],lK=/MSIE|Trident/.test(vr),V9=vr.match(/AppleWebKit\/(\d+)\./),n5=M,pK=$n,hK=cK,H9=U9,fK=lK,G9=ra,W9=!!V9&&+V9[1],mK=H.Array,gK=Yy.aTypedArray,_K=Yy.exportTypedArrayMethod,$x=H.Uint16Array,Qk=$x&&le($x.prototype.sort),vK=!(!Qk||n5(function(){Qk(new $x(2),null)})&&n5(function(){Qk(new $x(2),{})})),K9=!!Qk&&!n5(function(){if(G9)return G9<74;if(H9)return H9<67;if(fK)return!0;if(W9)return W9<602;var r,o,a=new $x(516),c=mK(516);for(r=0;r<516;r++)o=r%4,a[r]=515-r,c[r]=r-2*o+3;for(Qk(a,function(p,_){return(p/4|0)-(_/4|0)}),r=0;r<516;r++)if(a[r]!==c[r])return!0});_K("sort",function(r){return void 0!==r&&pK(r),K9?Qk(this,r):hK(gK(this),function(o){return function(a,c){return void 0!==o?+o(a,c)||0:c!=c?-1:a!=a?1:0===a&&0===c?1/a>0&&1/c<0?1:-1:a>c}}(r))},!K9||vK);var AK=w0,z9=t3.ArrayBuffer;let ea;ou({global:!0,forced:H.ArrayBuffer!==z9},{ArrayBuffer:z9}),AK("ArrayBuffer"),function(r){r[r.CHOOSE_SERVER=11]="CHOOSE_SERVER",r[r.CLOUD_PROXY=18]="CLOUD_PROXY",r[r.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",r[r.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(ea||(ea={}));var EK=qp,Jx=Array.isArray||function(r){return"Array"==EK(r)},bK=$r,q9=Jx,SK=sy,CK=Pl,IK=us("species"),Y9=bK.Array,$9=function(r,o){return new(function(r){var o;return q9(r)&&(SK(o=r.constructor)&&(o===Y9||q9(o.prototype))||CK(o)&&null===(o=o[IK]))&&(o=void 0),void 0===o?Y9:o}(r))(0===o?0:o)},TK=ep,RK=_m,DK=nn,OK=np,kK=$9,J9=Fo([].push),$S=function(r){var o=1==r,a=2==r,c=3==r,p=4==r,_=6==r,m=7==r,A=5==r||_;return function(v,S,I,R){for(var O,B,q=DK(v),z=RK(q),te=TK(S,I),de=OK(z),ge=0,Se=R||kK,Me=o?Se(v,de):a||m?Se(v,0):void 0;de>ge;ge++)if((A||ge in z)&&(B=te(O=z[ge],ge,q),r))if(o)Me[ge]=B;else if(B)switch(r){case 3:return!0;case 5:return O;case 6:return ge;case 2:J9(Me,O)}else switch(r){case 4:return!1;case 7:J9(Me,O)}return _?-1:c||p?p:Me}},X9={forEach:$S(0),map:$S(1),filter:$S(2),some:$S(3),every:$S(4),find:$S(5),findIndex:$S(6),filterReject:$S(7)},PK=X9.forEach,Z9=Im("forEach")?[].forEach:function(r){return PK(this,r,arguments.length>1?arguments[1]:void 0)};Yn({target:"Array",proto:!0,forced:[].forEach!=Z9},{forEach:Z9});var MK=Nl("Array").forEach,NK=uh,xK=Gi,LK=Nc,BK=MK,r5=Array.prototype,FK={DOMTokenList:!0,NodeList:!0},VK=nn,i5=Vc;Yn({target:"Object",stat:!0,forced:rs(function(){i5(1)})},{keys:function(r){return i5(VK(r))}});var gT=$p.Object.keys,Xx=f_,e7=Yn,Zx=Jx,E3=Fo([].reverse),b3=[1,2];e7({target:"Array",proto:!0,forced:String(b3)===String(b3.reverse())},{reverse:function(){return Zx(this)&&(this.length=this.length),E3(this)}});var Hk=Nl("Array").reverse,S3=Nc,C3=Hk,eL=Array.prototype,o5=rs,s5=Xd,t7=us("species"),Cl=function(r){return s5>=51||!o5(function(){var o=[];return(o.constructor={})[t7]=function(){return{foo:1}},1!==o[r](Boolean).foo})},ya=Yn,uv=$r,a5=Jx,tL=sy,Za=Pl,Eg=vb,jK=np,c5=Jd,n7=Gy,r7=us,l5=jD,i7=Cl("slice"),o7=r7("species"),nL=uv.Array,s7=Math.max;ya({target:"Array",proto:!0,forced:!i7},{slice:function(r,o){var a,c,p,_=c5(this),m=jK(_),A=Eg(r,m),v=Eg(void 0===o?m:o,m);if(a5(_)&&((tL(a=_.constructor)&&(a===nL||a5(a.prototype))||Za(a)&&null===(a=a[o7]))&&(a=void 0),a===nL||void 0===a))return l5(_,A,v);for(c=new(void 0===a?nL:a)(s7(v-A,0)),p=0;A<v;A++,p++)A in _&&n7(c,p,_[A]);return c.length=p,c}});var rL=Nl("Array").slice,_T=Nc,QK=rL,iL=Array.prototype;function rr(r,o,a,c,p){var _,m,A,v={};return function(r){var o=r.forEach;return r===r5||LK(r5,r)&&o===r5.forEach||xK(FK,NK(r))?BK:o}(_=gT(c)).call(_,function(S){v[S]=c[S]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=Xx(m=function(r){var o=r.reverse;return r===eL||S3(eL,r)&&o===eL.reverse?C3:o}(A=function(r){var o=r.slice;return r===iL||_T(iL,r)&&o===iL.slice?QK:o}(a).call(a)).call(A)).call(m,function(S,I){return I(r,o,S)||S},v),p&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(p):void 0,v.initializer=void 0),void 0===v.initializer&&(ex(r,o,v),v=null),v}var a7=Nl("Array").values,c7=uh,w3=Gi,u5=Nc,l7=a7,oL=Array.prototype,u7={DOMTokenList:!0,NodeList:!0},dv=function(r){var o=r.values;return r===oL||u5(oL,r)&&o===oL.values||w3(u7,c7(r))?l7:o},sL=Nl("Array").keys,HK=uh,d5=Gi,aL=Nc,T3=sL,R3=Array.prototype,D3={DOMTokenList:!0,NodeList:!0},$y=function(r){var o=r.keys;return r===R3||aL(R3,r)&&o===R3.keys||d5(D3,HK(r))?T3:o};function O3(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function p5(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?O3(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):O3(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let cL=0,h5=0;function Cp(r,o,a){return new qn((c,p)=>{o.timeout=o.timeout||xt("HTTP_CONNECT_TIMEOUT"),o.responseType=o.responseType||"json",o.data&&!a?(o.data=JSON.stringify(o.data),cL+=Jk(o.data)):a&&(o.data.size?cL+=o.data.size:o.data instanceof FormData?cL+=function(_){let m=0;return/DingTalk/i.test(navigator.userAgent)&&_.realFormData&&(_=_.realFormData),_.forEach(A=>{m+="string"==typeof A?Jk(A):A.size}),m+138}(o.data):cL+=Jk(JSON.stringify(o.data))),o.headers=o.headers||{},o.headers["Content-Type"]=o.headers["Content-Type"]||"application/json",o.method="POST",o.url=r,Ms.request(o).then(_=>{"string"==typeof _.data?h5+=Jk(_.data):_.data instanceof ArrayBuffer||_.data instanceof Uint8Array?h5+=_.data.byteLength:h5+=Jk(JSON.stringify(_.data)),c(_.data)}).catch(_=>{Ms.isCancel(_)?p(new Le(Te.OPERATION_ABORTED,"cancel token canceled")):p("ECONNABORTED"===_.code?new Le(Te.NETWORK_TIMEOUT,_.message):_.response?new Le(Te.NETWORK_RESPONSE_ERROR,_.response.status):new Le(Te.NETWORK_ERROR,_.message))})})}function GK(r,o){return f5.apply(this,arguments)}function f5(){return f5=F(function*(r,o){const a=new Blob([o.data],{type:"buffer"});return yield Cp(r,p5(p5({},o),{},{data:a,headers:{"Content-Type":"application/octet-stream"}}),!0)}),f5.apply(this,arguments)}const ta=new class extends ko{set networkState(r){se.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+r),this.emit(lT.NETWORK_STATE_CHANGE,r,this._networkState),r===ql.ONLINE?this.emit(lT.ONLINE):r===ql.OFFLINE&&(this.onlineWaiter=new qn(o=>{this.once(lT.ONLINE,()=>{this.onlineWaiter=void 0,o(ql.ONLINE)})}),this.emit(lT.OFFLINE)),this._networkState=r}get networkState(){return this._networkState}constructor(){super(),J(this,"_moduleName","network-indicator"),J(this,"_networkState",ql.ONLINE),J(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=ql.ONLINE}),window.addEventListener("offline",()=>{this.networkState=ql.OFFLINE})}};let k3=!1;const Cd=new class extends ko{constructor(){super(...arguments),J(this,"onAutoplayFailed",void 0),J(this,"onAudioAutoplayFailed",void 0)}};function m5(){const r=xi();if(!k3){const o=a=>{a.preventDefault(),k3=!1,"Android"!==r.os||"Chrome"!==r.name&&r.name!==bi.WECHAT?(document.body.removeEventListener("touchstart",o,!0),document.body.removeEventListener("mousedown",o,!0)):document.body.removeEventListener("click",o,!0)};k3=!0,"Android"!==r.os||"Chrome"!==r.name&&r.name!==bi.WECHAT?(document.body.addEventListener("touchstart",o,!0),document.body.addEventListener("mousedown",o,!0)):document.body.addEventListener("click",o,!0),se.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Cd.onAutoplayFailed?Cd.onAutoplayFailed():se.warning(Cd.onAudioAutoplayFailed?"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .":"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),Cd.emit("autoplay-failed")}}function P3(r){return(new TextEncoder).encode(r)}const M3=function(r,o){const a=new Uint8Array(r.byteLength+o.byteLength);return a.set(new Uint8Array(r),0),a.set(new Uint8Array(o),r.byteLength),a},WK=function(){var r=F(function*(o){return function(a,c){let p="";return new Uint8Array(a).forEach(_=>{p+=_.toString(16).padStart(2,"0")}),p}(yield crypto.subtle.digest("SHA-256",P3(o)))});return function(a){return r.apply(this,arguments)}}();var d7;function p7(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function zr(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?p7(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):p7(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function Gk(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:zt};return function(o,a,c){const p=o[a];if("function"==typeof p){const _="AgoraRTCClient"===o.constructor.name?"Client":o.constructor.name;c.value=function(){for(var m=arguments.length,A=new Array(m),v=0;v<m;v++)A[v]=arguments[v];const S=r.report.reportApiInvoke(this._sessionId||null,{name:"".concat(_,".").concat(a),options:A,tag:Qe.TRACER,reportResult:r.reportResult});try{const I=p.apply(this,A);return S.onSuccess(r.reportResult&&I),I}catch(I){throw S.onError(I),I}}}return c}}function Wk(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:zt};return function(o,a,c){const p=o[a];if("function"==typeof p){const _="AgoraRTCClient"===o.constructor.name?"Client":o.constructor.name;c.value=F(function*(){for(var m=arguments.length,A=new Array(m),v=0;v<m;v++)A[v]=arguments[v];const S=r.report.reportApiInvoke(this._sessionId||null,{name:"".concat(_,".").concat(a),options:A,tag:Qe.TRACER});try{const I=yield p.apply(this,A);return S.onSuccess(),I}catch(I){throw S.onError(I),I}})}return c}}const zt=new(xa("AgoraRTCEventReport")(d7=class{constructor(){var r=this;J(this,"baseInfoMap",new Map),J(this,"proxyServer",void 0),J(this,"clientList",LS),J(this,"eventUploadTimer",void 0),J(this,"setSessionIdTimer",void 0),J(this,"url",void 0),J(this,"backupUrl",void 0),J(this,"_appId",void 0),J(this,"keyEventUploadPendingItems",[]),J(this,"normalEventUploadPendingItems",[]),J(this,"apiInvokeUploadPendingItems",[]),J(this,"apiInvokeCount",0),J(this,"ltsList",[]),J(this,"lastSendNormalEventTime",Date.now()),J(this,"customReportCounterTimer",void 0),J(this,"customReportCount",0),J(this,"extApiInvoke",function(){var o=F(function*(a){for(const c of a){const p=zr(zr({},c),{},{sid:null,invokeId:++r.apiInvokeCount,tag:Qe.TRACER});r.sendApiInvoke(p)}});return function(a){return o.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),xt("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),xt("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(r){if(!this.baseInfoMap.has(r)&&!this.baseInfoMap.get(r))return se.error("adjust session ".concat(r," start time, sid is not exist or info is undefined")),void $t("error",this,"adjustSessionStartTime","adjust session ".concat(r," start time, sid is not exist or info is undefined"));const o=this.baseInfoMap.get(r),a=Date.now(),c=o.startTime;o.startTime=a,se.debug("rewrite session ".concat(r," startTime: ").concat(a," , ").concat(a-c,"ms")),$t("debug",this,"adjustSessionStartTime",void 0,"rewrite session ".concat(r," startTime: ").concat(a," , ").concat(a-c,"ms")),this.baseInfoMap.set(r,o)}setAppId(r){this._appId=r}reportApiInvoke(r,o,a){o.timeout=o.timeout||6e4,o.reportResult=void 0===o.reportResult||o.reportResult;const c=Date.now();this.apiInvokeCount+=1;const p=this.apiInvokeCount,_=()=>({tag:o.tag,invokeId:p,sid:r,name:o.name,apiInvokeTime:c,options:o.options,states:o.states||null}),m=!!xt("SHOW_REPORT_INVOKER_LOG");m&&se.info("".concat(o.name," start"),o.options);let A=!1;Ic(o.timeout).then(()=>{A||(this.sendApiInvoke(zr(zr({},_()),{},{error:Te.API_INVOKE_TIMEOUT,success:!1})),se.debug("".concat(o.name," timeout")))});const v=new Le(Te.UNEXPECTED_ERROR,"".concat(o.name,": this api invoke is end"));return{onSuccess:S=>{const I=()=>{if(A)throw v;return A=!0,this.sendApiInvoke(zr(zr({},_()),{},{success:!0},o.reportResult&&{result:S})),m&&se.info("".concat(o.name," onSuccess")),S};return a?P5(I,o.name+"Success",a,()=>A=!0):I()},onError:S=>{const I=()=>{if(A)throw S;A=!0,this.sendApiInvoke(zr(zr({},_()),{},{success:!1,error:S})),m&&se.info("".concat(o.name," onFailure"),S.toString())};return a?P5(I,o.name+"Error",a,()=>A=!0):I()}}}sessionInit(r,o){if(this.baseInfoMap.has(r))return;const a=Date.now(),c=this.createBaseInfo(r,a);c.cname=o.cname;const p=Object.assign({},{willUploadConsoleLog:xt("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:tT?"global":"oversea",areas:xt("AREAS")&&xt("AREAS").join(",")},o.extend),_=Date.now(),m=zr(zr({},c),{},{eventType:Re.SESSION_INIT,appid:o.appid,browser:navigator.userAgent,build:Dh,lts:_,elapse:_-a,extend:JSON.stringify(p),mode:o.mode,process:xt("PROCESS_ID"),success:!0,version:El});this.send({type:Ne.SESSION,data:m},!0)}joinChooseServer(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr({},c),{},{eventType:Re.JOIN_CHOOSE_SERVER,lts:p,eventElapse:p-o.lts,chooseServerAddr:o.csAddr,errorCode:o.ec,elapse:p-a.startTime,success:o.succ,chooseServerAddrList:JSON.stringify(o.serverList),uid:o.uid?parseInt(o.uid):null,cid:o.cid?parseInt(o.cid):null,chooseServerIp:o.csIp||"",opid:o.opid,unilbsServerIds:o.unilbsServerIds,extend:o.extend||void 0});this.send({type:Ne.JOIN_CHOOSE_SERVER,data:_},!0)}reqUserAccount(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr({},c),{},{eventType:Re.REQ_USER_ACCOUNT,lts:p,success:o.success,serverAddress:o.serverAddr,stringUid:o.stringUid,uid:o.uid,errorCode:o.errorCode,elapse:p-a.startTime,eventElapse:p-o.lts,extend:JSON.stringify(o.extend)});this.send({type:Ne.REQ_USER_ACCOUNT,data:_},!0)}joinGateway(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info;o.vid&&(c.vid=o.vid),c.uid=o.uid,c.cid=o.cid;const p=Date.now(),{firstSuccess:_,avoidJoinStartTime:m,isProxy:A,addr:v}=o,S=p-(_&&m?m:a.startTime),I=zr(zr({},c),{},{eventType:Re.JOIN_GATEWAY,lts:p,gatewayAddr:o.addr,success:o.succ,errorCode:o.ec,elapse:S,eventElapse:p-o.lts,firstSuccess:_}),R=I.success?1:0;if(o.succ&&(a.lastJoinSuccessTime=p),_)this.send({type:Ne.JOIN_GATEWAY,data:I},!0);else{let O;if(v)if(A){const q=v.match(/h=(\d{1,3}-){3}\d{1,3}/g),z=v.match(/p=[0-9]{1,6}/g);O={isSuccess:R,gatewayIp:q&&q.length?q[0].split("=")[1].replace(/-/g,"."):"",port:z&&z.length?z[0].split("=")[1]:"",isProxy:A?1:0}}else{const q=v.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),z=v.match(/:[0-9]{1,6}/g);O={isSuccess:R,gatewayIp:q&&q.length?q[0].split("//")[1].replace(/-/g,"."):"",port:z&&z.length?z[0].split(":")[1]:"",isProxy:A?1:0}}else O={isSuccess:R,gatewayIp:"",port:"",isProxy:A?1:0};delete I.success,delete I.eventType,delete I.firstSuccess,I.vid=Number(I.vid);const B=Object.assign({},I,O,{eventType:Re.REJOIN_GATEWAY});this.send({type:Ne.RE_JOIN_GATEWAY,data:B},!0)}}joinChannelTimeout(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=Date.now(),p=zr(zr({},a.info),{},{lts:c,timeout:o,elapse:c-a.startTime});this.send({type:Ne.JOIN_CHANNEL_TIMEOUT,data:p},!0)}publish(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr({},c),{},{eventType:Re.PUBLISH,lts:p,eventElapse:o.eventElapse,elapse:p-a.startTime,success:o.succ,errorCode:o.ec,videoName:o.videoName,audioName:o.audioName,screenName:o.screenName,screenshare:o.screenshare,audio:o.audio,video:o.video,p2pid:o.p2pid,publishRequestid:o.publishRequestid});this.send({type:Ne.PUBLISH,data:_},!0)}subscribe(r,o,a){const c=this.baseInfoMap.get(r);if(!c)return;const p=c.info,_=Date.now(),m=zr(zr({},p),{},{eventType:Re.SUBSCRIBE,lts:_,eventElapse:o.eventElapse,elapse:_-c.startTime,success:o.succ,errorCode:o.ec,video:o.video,audio:o.audio,subscribeRequestid:o.subscribeRequestid,p2pid:o.p2pid},a&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof o.peerid?m.peerSuid=o.peerid:m.peer=o.peerid,this.send({type:Ne.SUBSCRIBE,data:m},!0)}wsCompressorInit(r){var o;const a=[...$y(o=this.baseInfoMap).call(o)],p=this.baseInfoMap.get(a.length?a[0]:"UnableToGetSid");if(!p)return;const _=p.info,m=Date.now(),A=zr(zr({},_),{},{eventType:Re.WS_COMPRESSOR_INIT,lts:m,eventElapse:r.eventElapse,elapse:m-p.startTime,status:r.status?1:2});this.send({type:Ne.WS_COMPRESSOR_INIT,data:A},!0)}firstRemoteFrame(r,o,a,c){const p=this.baseInfoMap.get(r);if(!p)return;const _=p.info,m=Date.now(),A=zr(zr(zr({},_),c),{},{elapse:m-p.startTime,eventType:o,lts:m});this.send({type:a,data:A},!0)}onGatewayStream(r,o,a,c){const p=this.baseInfoMap.get(r);if(!p)return;const _=p.info,m=Date.now(),A=zr(zr(zr({},_),c),{},{eventType:o,lts:m});this.send({type:a,data:A},!0)}streamSwitch(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr({},c),{},{eventType:Re.STREAM_SWITCH,lts:p,isDual:o.isdual,elapse:p-a.startTime,success:o.succ});this.send({type:Ne.STREAM_SWITCH,data:_},!0)}requestProxyAppCenter(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr({},c),{},{eventType:Re.REQUEST_PROXY_APPCENTER,lts:p,eventElapse:p-o.lts,elapse:p-a.startTime,APAddr:o.APAddr,workerManagerList:o.workerManagerList,response:o.response,errorCode:o.ec,success:o.succ});this.send({type:Ne.REQUEST_PROXY_APPCENTER,data:_},!0)}requestProxyWorkerManager(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr({},c),{},{eventType:Re.REQUEST_PROXY_WORKER_MANAGER,lts:p,eventElapse:p-o.lts,elapse:p-a.startTime,workerManagerAddr:o.workerManagerAddr,response:o.response,errorCode:o.ec,success:o.succ});this.send({type:Ne.REQUEST_PROXY_WORKER_MANAGER,data:_},!0)}setProxyServer(r){this.proxyServer=r,se.debug(r?"reportProxyServerurl: ".concat(r):"disable reportProxyServerurl: ".concat(r)),$t("debug",this,"setProxyServer",r)}peerPublishStatus(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr({},c),{},{subscribeElapse:o.subscribeElapse,peer:o.peer,peerPublishDuration:Math.max(o.audioPublishDuration,o.videoPublishDuration),audiotag:o.audioPublishDuration>0?1:-1,videotag:o.videoPublishDuration>0?1:-1,lts:p,elapse:p-a.startTime,joinChannelSuccessElapse:p-(a.lastJoinSuccessTime||p)});this.send({type:Ne.PEER_PUBLISH_STATUS,data:_},!0)}workerEvent(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now();(function(_,m,A){const v=_[m];if(!v||"string"!=typeof v)return[_];_[m]="";const S=Jk(JSON.stringify(_));let I=0;const R=[];let O=0;for(let B=0;B<v.length;B++)O+=v.charCodeAt(B)<=127?1:3,O<=1300-S||(R[R.length]=bT(bT({},_),{},{[m]:v.substring(I,B)}),I=B,O=v.charCodeAt(B)<=127?1:3);return I!==v.length-1&&(R[R.length]=bT(bT({},_),{},{[m]:v.substring(I)})),R})(zr(zr(zr({},c),o),{},{elapse:p-a.startTime,lts:p,productType:"WebRTC"}),"payload").forEach(_=>this.send({type:Ne.WORKER_EVENT,data:_},!0))}apworkerEvent(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr(zr({},c),o),{},{elapse:p-a.startTime,lts:p});this.send({type:Ne.AP_WORKER_EVENT,data:_},!0)}joinWebProxyAP(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr(zr({},c),o),{},{elapse:p-a.startTime,lts:p,extend:o.extend||void 0});this.send({type:Ne.JOIN_WEB_PROXY_AP,data:_},!0)}WebSocketQuit(r,o){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),_=zr(zr(zr({},c),o),{},{elapse:p-a.startTime,lts:p});this.send({type:Ne.WEBSOCKET_QUIT,data:_},!0)}sendCustomReportMessage(r,o){var a=this;return F(function*(){if(a.customReportCount+=o.length,a.customReportCount>xt("CUSTOM_REPORT_LIMIT"))throw new Le(Te.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);a.customReportCounterTimer||(a.customReportCounterTimer=window.setInterval(()=>{a.customReportCount=0},5e3));const c=o.map(p=>({type:Ne.USER_ANALYTICS,data:zr({sid:r},p)}));try{xt("NEW_REPORT_SERVER")?yield a.postDataToStatsCollector2(c):yield a.postDataToStatsCollector(c)}catch(p){throw se.error("send custom report message failed",p.toString()),new Le(Te.CUSTOM_REPORT_SEND_FAILED,p.message)}})()}autoplayFailed(r,o,a,c){if(!r)return;const p=this.baseInfoMap.get(r);if(!p)return;const _=p.info,m=Date.now(),A=zr(zr({},_),{},{vid:void 0===_.vid?0:Number(_.vid),lts:m,elapse:m-p.startTime,cbRegistered:Cd.onAutoplayFailed||Cd.onAudioAutoplayFailed?1:-1,errorMsg:a,mediaType:o,trackId:c,extend:void 0});this.send({type:Ne.AUTOPLAY_FAILED,data:A},!0)}sendApiInvoke(r){const o=xt("NOT_REPORT_EVENT");if(r.tag&&o.includes&&o.includes(r.tag))return!1;if(null===r.sid)return this.apiInvokeUploadPendingItems.push(r),!1;const a=this.baseInfoMap.get(r.sid);if(!a)return this.apiInvokeUploadPendingItems.push(r),!1;const{cname:c,uid:p,cid:_}=a.info;let m;if(r.lts=r.lts||Date.now(),r.error)if(r.error instanceof Le){const{code:v,message:S}=r.error;m=v||S||r.error.toString()}else m=r.error.toString();const A={invokeId:r.invokeId,sid:r.sid,cname:c,cid:_,uid:p,lts:r.lts,success:r.success,elapse:r.lts-a.startTime,execElapse:r.lts-r.apiInvokeTime,apiName:r.name,options:r.options?JSON.stringify(r.options):void 0,execStates:r.states?JSON.stringify(r.states):void 0,execResult:r.result?JSON.stringify(r.result):void 0,errorCode:r.error?m:void 0,errorMsg:r.error?JSON.stringify(r.error):void 0};return this.send({type:Ne.API_INVOKE,data:A},!1),!0}appendSessionId(){this.clientList.forEach(r=>{if(r._sessionId){const o=this.apiInvokeUploadPendingItems.length;for(let a=0;a<o;a++){const c=this.apiInvokeUploadPendingItems.shift();c&&(c.sid=r._sessionId,this.sendApiInvoke(Object.assign({},c)))}}})}send(r,o){if(o)return this.keyEventUploadPendingItems.push(r),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(r),this.normalEventUploadPendingItems.length>xt("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(r,o){const a=[],c=[];for(;r.length;){const _=r.shift();a.length<20?a.push(_):c.push(_)}r.push(...c);for(const _ of[...a]){var p;-1!==this.ltsList.indexOf(_.data.lts)?(_.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(_.data.lts)):(this.ltsList.push(_.data.lts),US(p=this.ltsList).call(p,(m,A)=>m-A))}return o||(this.lastSendNormalEventTime=Date.now()),a.length&&(xt("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(a):this.postDataToStatsCollector(a)).catch((_=>m=>{xt("EVENT_REPORT_RETRY")&&(o?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(_):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(_),this.normalEventUploadPendingItems.length>xt("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-xt("NORMAL_EVENT_QUEUE_CAPACITY")),se.warning("report: drop normal events"))))})(a)),r}postDataToStatsCollector2(r){var o=this;return F(function*(){ta.networkState===ql.OFFLINE&&(yield qn.race([ta.onlineWaiter,Ic(2*wo.maxRetryTimeout)]));const a=_=>{let m=new Uint8Array;return _.forEach(A=>{const v=P3(JSON.stringify(A.data)),S=new ArrayBuffer(5),I=(O=>{let B=0;return Object.entries(Ne).forEach(q=>{let[z,te]=q;te===O.type&&(B=ht[z])}),B})(A),R=new DataView(S);R.setUint16(0,v.byteLength,!0),R.setUint8(2,255&I),R.setUint8(3,I>>>8&255),R.setUint8(4,I>>>16&255),m=M3(m,new Uint8Array(S)),m=M3(m,v)}),m},c="event";let p=o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(xt("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(c):"https://".concat(xt("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(c);for(let _=0;_<2;_+=1){1===_&&(p=o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(xt("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(c):"https://".concat(xt("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(c));try{yield Cp(p,{timeout:1e4,data:a(r),headers:{token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false",appid:o._appId,"Content-Type":"application/octet-stream"}},!0)}catch(m){if(1===_)throw m;continue}return}})()}postDataToStatsCollector(r){var o=arguments,a=this;return F(function*(){let c=o.length>1&&void 0!==o[1]&&o[1];const p={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:r.map(A=>JSON.stringify(A)),vid:(A=>{const v=A&&A.data.sid&&a.baseInfoMap.get(A.data.sid);return v&&v.info.vid&&+v.info.vid||0})(r[0])};ta.networkState===ql.OFFLINE&&(yield qn.race([ta.onlineWaiter,Ic(2*wo.maxRetryTimeout)]));const _=c?"/events/proto-raws":"/events/messages";let m=a.url||(a.proxyServer?"https://".concat(a.proxyServer,"/rs/?h=").concat(xt("EVENT_REPORT_DOMAIN"),"&p=").concat(xt("STATS_COLLECTOR_PORT"),"&d=").concat(_):"https://".concat(xt("EVENT_REPORT_DOMAIN"),":").concat(xt("STATS_COLLECTOR_PORT")).concat(_));for(let A=0;A<2;A+=1){1===A&&(m=a.backupUrl||(a.proxyServer?"https://".concat(a.proxyServer,"/rs/?h=").concat(xt("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(xt("STATS_COLLECTOR_PORT"),"&d=").concat(_):"https://".concat(xt("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(xt("STATS_COLLECTOR_PORT")).concat(_)));try{c?yield GK(m,{timeout:1e4,data:p}):yield Cp(m,{timeout:1e4,data:p})}catch(v){if(1===A)throw v;continue}return}})()}createBaseInfo(r,o){const a=Object.assign({},_e);return a.sid=r,this.baseInfoMap.set(r,{info:a,startTime:o}),a}reportResourceTiming(r,o){const a=performance.getEntriesByName(r),c=a[a.length-1];c&&this.reportApiInvoke(o,{name:"Client.resourceTiming",options:c,tag:Qe.TRACER}).onSuccess()}})||d7);Of.on("REPORT_LOG_UPLOAD",r=>{r.networkState=ta.networkState,zt.reportApiInvoke(null,{name:"logUploadError",options:r,tag:Qe.TRACER})});class h7 extends ko{constructor(o,a){super(),J(this,"trackMediaType",void 0),J(this,"_ID",void 0),J(this,"_hints",[]),J(this,"_isClosed",!1),J(this,"_originMediaStreamTrack",void 0),J(this,"_mediaStreamTrack",void 0),J(this,"_external",{}),this._ID=a||_s(8,"track-"),this._originMediaStreamTrack=o,this._mediaStreamTrack=o,bl.includes(this)||bl.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(o){if(!o){zt.reportApiInvoke(null,{name:ze.GET_MEDIA_STREAM_TRACK,options:[],tag:Qe.TRACER}).onSuccess(this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?this._mediaStreamTrack.label:"")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(o){const a=bl.indexOf(o);-1!==a&&bl.splice(a,1)}(this),this.emit(Ep.CLOSED)}}let na,g5,f7,KK=1;class Il{constructor(o){J(this,"lockingPromise",qn.resolve()),J(this,"locks",0),J(this,"name",""),J(this,"lockId",void 0),this.lockId=KK++,o&&(this.name=o),se.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(o){let a;this.locks+=1,se.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof o?o:""));const c=new qn(_=>{a=()=>{this.locks-=1,se.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof o?o:"")),_()}}),p=this.lockingPromise.then(()=>a);return this.lockingPromise=this.lockingPromise.then(()=>c),p}}function Jy(r,o){return function(a,c,p){const _=a[c];if("function"!=typeof _)throw new Error("Cannot use mutex on object property.");return p.value=F(function*(){const m=this[o];if(!m)throw new Error("mutex property key ".concat(o," doesn't exist on ").concat(r));const A=yield m.lock("From ".concat(r,".").concat(c));try{for(var v=arguments.length,S=new Array(v),I=0;I<v;I++)S[I]=arguments[I];return yield _.apply(this,S)}finally{A()}}),p}}class N3 extends h7{get muted(){return this._muted}get enabled(){return this._enabled}constructor(o,a){super(o,a),J(this,"_enabled",!0),J(this,"_muted",!1),J(this,"_isClosed",!1),J(this,"_trackProcessors",[]),J(this,"_enabledMutex",void 0),J(this,"processor",void 0),J(this,"processorContext",void 0),J(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Il("".concat(a)),o.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){return this._originMediaStreamTrack.label}close(){this._isClosed||(this.stop(),this._trackProcessors.forEach(o=>o.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,se.debug("[".concat(this.getTrackId(),"] close")),$t("debug",this,"close"),this.emit(_r.NEED_CLOSE),super.close())}_registerTrackProcessor(o){var a=this;return F(function*(){if(-1!==a._trackProcessors.indexOf(o))return;const c=a._trackProcessors[a._trackProcessors.length-1];a._trackProcessors.push(o),o.onOutputChange=F(function*(){a._mediaStreamTrack=o.output||a._originMediaStreamTrack,a._updatePlayerSource(),yield Qo(a,_r.NEED_REPLACE_TRACK,a)}),c?(c.onOutputChange=F(function*(){c.output&&(yield o.setInput(c.output))}),yield o.setInput(c.output||c.input||a._originMediaStreamTrack)):yield o.setInput(a._originMediaStreamTrack)})()}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const o=this._trackProcessors[this._trackProcessors.length-1];return o.output||o.input||this._originMediaStreamTrack}_updateOriginMediaStreamTrack(o,a){var c=this;return F(function*(){if(o!==c._originMediaStreamTrack){if(c._originMediaStreamTrack.removeEventListener("ended",c._handleTrackEnded),a&&c._originMediaStreamTrack.stop(),o.addEventListener("ended",c._handleTrackEnded),c._originMediaStreamTrack=o,c._trackProcessors.length>0){yield c._trackProcessors[0].setInput(o);const p=c._getOutputFromProcessors();c._mediaStreamTrack=p}else c._mediaStreamTrack=c._originMediaStreamTrack;c._updatePlayerSource(),yield Qo(c,_r.NEED_REPLACE_TRACK,c),c.processor&&c.processor.updateInput({track:c._originMediaStreamTrack,context:c.processorContext})}})()}_getDefaultPlayerConfig(){return{}}onTrackEnded(){se.debug("[".concat(this.getTrackId(),"] track ended")),Wl("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Ep.TRACK_ENDED)}stateCheck(o,a){if(se.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(o,": ").concat(a,"]")),$t("debug",this,"stateCheck",{stateName:o,state:a,muted:this._muted,enabled:this._enabled}),i(a,o),this._enabled&&this._muted&&"enabled"===o&&!1===a)throw new Le(Te.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===o&&!0===a)throw new Le(Te.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}}(function(r){r.IOS_15_INTERRUPTION_START="ios15-interruption-start",r.IOS_15_INTERRUPTION_END="ios15-interruption-end",r.IOS_INTERRUPTION_START="ios-interruption-start",r.IOS_INTERRUPTION_END="ios-interruption-end",r.STATE_CHANGE="state-change"})(na||(na={})),function(r){r.AUDIO_CONTEXT_CREATED="audio_context_created"}(g5||(g5={})),function(r){r.AIDenoiser="AIDenoiser"}(f7||(f7={}));const x3={audioContextInitOptions:{}},Kk=new class extends ko{constructor(){super(),J(this,"registeredPlugins",[])}setOptions(r,o){x3[r]&&(x3[r]=o)}getOptions(r){return x3[r]}installPlugin(r){r instanceof Object&&r.name&&this.registeredPlugins.push(r.name)}},JS=window.AudioContext||window.webkitAudioContext;let Id=null;const qr=new class extends ko{constructor(){var r;super(...arguments),r=this,J(this,"prevState",void 0),J(this,"curState",void 0),J(this,"currentTime",void 0),J(this,"currentTimeStuckAt",void 0),J(this,"interruptDetectorTrack",void 0),J(this,"onLocalAudioTrackMute",()=>{se.info("ios15-interruption-start"),ji("info",["WebAudio"],"ios15-interruption-start"),this.emit(na.IOS_15_INTERRUPTION_START)}),J(this,"onLocalAudioTrackUnmute",F(function*(){se.info("ios15-interruption-end"),ji("info",["WebAudio"],"ios15-interruption-end"),"running"!==r.curState||r.duringInterruption?se.info("ios15-interruption-end-canceled"):(Id&&(yield Id.suspend()),r.emit(na.IOS_15_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(r){se.debug("webaudio bindInterruptDetectorTrack ".concat(r.getTrackId())),$t("debug",["WebAudio"],"bindInterruptDetectorTrack",r.getTrackId()),this.interruptDetectorTrack||(this.interruptDetectorTrack=r,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(r){se.debug("webaudio unbindInterruptDetectorTrack ".concat(r.getTrackId())),$t("debug",["WebAudio"],"unbindInterruptDetectorTrack",r.getTrackId()),this.interruptDetectorTrack&&this.interruptDetectorTrack===r&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function zk(){if(!Id){if(function m7(){if(!JS)return se.error("your browser is not support web audio"),void jn("error",["WebAudio"],"your browser is not support web audio");se.info("create audio context"),gg("info",["WebAudio"],"WebAudioContext");const r=Kk.getOptions("audioContextInitOptions");se.debug("audio content init option:",JSON.stringify(r)),Id=new JS(r),Kk.emit(g5.AUDIO_CONTEXT_CREATED,Id),qr.curState=Id.state,Id.onstatechange=()=>{qr.prevState=qr.curState,qr.curState=Id?Id.state:void 0,(yc()||Rf())&&"running"===qr.prevState&&"interrupted"===qr.curState&&(se.info("ios-interruption-start"),ji("info",["AudioState"],"ios-interruption-start"),qr.emit(na.IOS_INTERRUPTION_START)),(yc()||Rf())&&"interrupted"===qr.prevState&&"running"===qr.curState&&(se.info("ios-interruption-end"),ji("info",["AudioState"],"ios-interruption-end"),qr.emit(na.IOS_INTERRUPTION_END)),qr.prevState!==qr.curState&&(se.debug("AudioContext State Change","".concat(qr.prevState,"=>").concat(qr.curState)),Wl("debug",["AudioContext",void 0],"statechange","".concat(qr.prevState,"=>").concat(qr.curState)),qr.emit(na.STATE_CHANGE))},setInterval(()=>{var o;const a=null===(o=Id)||void 0===o?void 0:o.currentTime;qr.currentTime!==a?(qr.currentTimeStuckAt&&(se.debug("AudioContext current time resume at ".concat(a)),qr.currentTimeStuckAt=void 0),qr.currentTime=a):(a!==qr.currentTimeStuckAt&&se.warning("AudioContext current time stuck at ".concat(a)),qr.currentTimeStuckAt=a)},5e3),function(){var o=F(function*(a){const c=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let p,_=!1,m=!1,A=!1;function v(de){"running"===a.state?S(!1):yc()||Rf()?"suspended"===a.state&&(S(!0),de&&a.resume().then(R,R)):"closed"!==a.state&&(S(!0),de&&a.resume().then(R,R))}function S(de){if(_!==de){_=de;for(let ge=0,Se=c;ge<Se.length;ge+=1){const Me=Se[ge];de?window.addEventListener(Me,O,{capture:!0,passive:!0}):window.removeEventListener(Me,O,{capture:!0,passive:!0})}}}function R(){v(!1)}function O(){v(!0)}function B(de){if(!A)if(p.paused)if(de){let ge;q(!1),A=!0;try{ge=p.play(),ge?ge.then(z,z):(p.addEventListener("playing",z),p.addEventListener("abort",z),p.addEventListener("error",z))}catch{z()}}else q(!0);else q(!1)}function q(de){if(m!==de){m=de;for(let ge=0,Se=c;ge<Se.length;ge++){const Me=Se[ge];de?window.addEventListener(Me,te,{capture:!0,passive:!0}):window.removeEventListener(Me,te,{capture:!0,passive:!0})}}}function z(){p.removeEventListener("playing",z),p.removeEventListener("abort",z),p.removeEventListener("error",z),A=!1,B(!1)}function te(){B(!0)}if(yc()){const de=a.createMediaStreamDestination(),ge=document.createElement("div");ge.innerHTML="<audio x-webkit-airplay='deny'></audio>",p=ge.children.item(0),p.controls=!1,p.disableRemotePlayback=!0,p.preload="auto",p.srcObject=de.stream,B(!0)}qr.on(na.STATE_CHANGE,function I(){v(!0)}),v(!1)});return function(a){return o.apply(this,arguments)}}()(Id)}(),!Id)throw new Le(Te.NOT_SUPPORTED,"can not create audio context");return Id}return Id}function qk(r){if(function(){if(null!==Yk)return Yk;const c=zk(),p=c.createBufferSource(),_=c.createGain(),m=c.createGain();p.connect(_),p.connect(m),p.disconnect(_);let A=!1;try{p.disconnect(_)}catch{A=!0}return p.disconnect(),Yk=A,A}())return;$t("debug",["WebAudio"],"polyfillAudioNode");const o=r.connect,a=r.disconnect;r.connect=(c,p,_)=>(r._inputNodes||(r._inputNodes=[]),r._inputNodes.includes(c)||(c instanceof AudioNode?(r._inputNodes.push(c),o.call(r,c,p,_)):o.call(r,c,p)),r),r.disconnect=(c,p,_)=>{a.call(r),c?q3(r._inputNodes,c):r._inputNodes=[];for(const m of r._inputNodes)o.call(r,m)}}let Yk=null;function _5(r,o){const a=1/o,c=zk();let p=c.createGain();p.gain.value=0,p.connect(c.destination);let _=!1;const m=()=>{if(_)return void(p=null);const A=c.createOscillator();A.onended=m,A.connect(p),A.start(0),A.stop(c.currentTime+a),r(c.currentTime)};return m(),()=>{_=!0}}const Xy=se.prefix("[inject-node]");class lL{constructor(){J(this,"nodeLists",[]),J(this,"prevNode",void 0),J(this,"nextNode",void 0)}get firstNode(){return this.nodeLists[0]}get lastNode(){return this.nodeLists[this.nodeLists.length-1]}get isActive(){return!!this.nodeLists.length}get isConnected(){return!(!this.prevNode||!this.nextNode)}connect(o,a){Xy.debug("connect audio node, current list:"+this.nodeLists.length),this.nodeLists.length?(this.prevNode&&this.prevNode.disconnect(),o.connect(this.firstNode),this.nextNode&&this.lastNode&&this.lastNode.disconnect(),this.lastNode.connect(a),this.nodeLists.forEach((c,p)=>{const _=this.nodeLists[p+1];_&&c.connect(_)})):o.connect(a),this.nextNode=a,this.prevNode=o}disconnect(){var o;Xy.debug("disconnect audio node, current list:"+this.nodeLists.length),this.nodeLists.forEach(a=>{a.disconnect()}),null===(o=this.prevNode)||void 0===o||o.disconnect(),this.prevNode=void 0,this.nextNode=void 0}addNode(o){Xy.debug("add node in inject node, current list:",this.nodeLists.length),this.prevNode&&this.nextNode?(this.firstNode||(Xy.debug("new node is the first node"),this.prevNode.disconnect(),this.prevNode.connect(o),o.connect(this.nextNode)),this.nextNode&&this.lastNode&&(this.lastNode.disconnect(this.nextNode),this.lastNode.connect(o),o.connect(this.nextNode)),this.nodeLists.push(o)):Xy.debug("add node is called before inject node connected")}removeNode(o){Xy.debug("remove node in inject node, current list:",this.nodeLists.length);const a=this.nodeLists.indexOf(o);if(-1===a)return void Xy.debug("$[inject-node] cannot find the node to be removed");const c=this.nodeLists[a+1],p=this.nodeLists[a-1];0===a&&this.prevNode&&this.nextNode&&(this.prevNode.disconnect(o),this.prevNode.connect(c||this.nextNode)),a===this.nodeLists.length-1&&this.nextNode&&p&&(p.disconnect(o),p.connect(this.nextNode)),0!==a&&a!==this.nodeLists.length-1&&(p.disconnect(o),p.connect(c)),Xy.debug("remove node in inject node success, current list:",this.nodeLists.length)}}class uL extends ko{get processSourceNode(){return this.sourceNode}set processedNode(o){var a;if(!this.isDestroyed&&this._processedNode!==o){try{var c;null===(c=this.sourceNode)||void 0===c||c.disconnect(this.outputNode)}catch{}null===(a=this._processedNode)||void 0===a||a.disconnect(),this._processedNode=o,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),J(this,"outputNode",void 0),J(this,"outputTrack",void 0),J(this,"isPlayed",!1),J(this,"sourceNode",void 0),J(this,"analyserNode",void 0),J(this,"context",void 0),J(this,"audioBufferNode",void 0),J(this,"destNode",void 0),J(this,"injectNode",void 0),J(this,"audioOutputLevel",0),J(this,"_processedNode",void 0),J(this,"playNode",void 0),J(this,"isDestroyed",!1),J(this,"onNoAudioInput",void 0),J(this,"isNoAudioInput",!1),J(this,"_noAudioInputCount",0),this.context=zk(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),qk(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048,this.injectNode=new lL}startGetAudioBuffer(o){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(o),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=a=>{this.emit(or.ON_AUDIO_BUFFER,function(c){for(let p=0;p<c.outputBuffer.numberOfChannels;p+=1){const _=c.outputBuffer.getChannelData(p);for(let m=0;m<_.length;m+=1)_[m]=0}return c.inputBuffer}(a))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Yc().webAudioMediaStreamDest)throw new Le(Te.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(o){"running"!==this.context.state&&Ph(()=>{qr.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=o||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||yc()||Rf()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const o=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(o);let a=0;for(let c=0;c<o.length;c++)a+=c<64?Math.abs(10*o[c]):Math.abs(6*o[c]/15);return a/o.length/255}checkHasAudioInput(){var o=arguments,a=this;return F(function*(){let c=o.length>0&&void 0!==o[0]?o[0]:0;if(c>5)return a.isNoAudioInput=!0,a.onNoAudioInput&&a.onNoAudioInput(),!1;if(yc()||Rf()?"suspended"===a.context.state&&a.context.resume():"running"!==a.context.state&&a.context.resume(),!a.analyserNode)return!1;const p=new Uint8Array(a.analyserNode.frequencyBinCount);a.analyserNode.getByteFrequencyData(p);let _=!1;for(let m=0;m<p.length;m++)0!==p[m]&&(_=!0);return _?(a.isNoAudioInput=!1,!0):(yield Ic(200),(yield a.checkHasAudioInput(c?c+1:1))&&_)})()}getAudioVolume(){return this.outputNode.gain.value}setVolume(o){this.outputNode.gain.setValueAtTime(o,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}injectAudioNode(o){this.injectNode.addNode(o)}removeAudioNode(o){this.injectNode.removeNode(o)}disconnect(){var o,a;null===(o=this.processedNode)||void 0===o||o.disconnect(),null===(a=this.sourceNode)||void 0===a||a.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var o;this.processedNode?null===(o=this.processedNode)||void 0===o||o.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class g7 extends uL{get isFreeze(){return!1}constructor(o,a){var c,p;if(super(),c=this,J(this,"sourceNode",void 0),J(this,"track",void 0),J(this,"audioElement",void 0),J(this,"isCurrentTrackCloned",!1),J(this,"isRemoteTrack",!1),J(this,"rebuildWebAudio",F(function*(){if(se.debug("ready to rebuild web audio, state:",c.context.state),c.isNoAudioInput&&(yield c.checkHasAudioInput()),!c.isNoAudioInput||c.isDestroyed)return document.body.removeEventListener("click",c.rebuildWebAudio,!0),void se.debug("rebuild web audio success, current volume status",c.getAccurateVolumeLevel());c.context.resume().then(()=>se.info("resume success")),se.debug("rebuild web audio because of ios 12 bugs"),c.disconnect();const A=c.track;c.track=c.track.clone(),c.isCurrentTrackCloned?A.stop():c.isCurrentTrackCloned=!0;const v=new MediaStream([c.track]);c.sourceNode=c.context.createMediaStreamSource(v),qk(c.sourceNode),c.analyserNode=c.context.createAnalyser();const S=c.outputNode.gain.value;c.outputNode=c.context.createGain(),c.outputNode.gain.setValueAtTime(S,c.context.currentTime),qk(c.outputNode),c.emit(or.UPDATE_SOURCE),c.connect(),c.audioElement.srcObject=v,c.isPlayed&&c.play(c.playNode),c.checkHasAudioInput()})),"audio"!==o.kind)throw new Le(Te.UNEXPECTED_ERROR);this.track=o;const _=new MediaStream([this.track]);this.isRemoteTrack=!!a,this.sourceNode=this.context.createMediaStreamSource(_),qk(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=_;const m=xi();a&&m.os===js.IOS&&Number(null===(p=m.osVersion)||void 0===p?void 0:p.split(".")[0])<15&&(qr.on(na.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(A=>{A||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(o){this.sourceNode.disconnect(),this.track=o,this.isCurrentTrackCloned=!1;const a=new MediaStream([o]);this.sourceNode=this.context.createMediaStreamSource(a),qk(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(or.UPDATE_SOURCE),this.audioElement.srcObject=a}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),qr.off("state-change",this.rebuildWebAudio),super.destroy()}}function L3(r,o){return dL.apply(this,arguments)}function dL(){return dL=F(function*(r,o){const a=(p,_)=>p?"number"!=typeof p?p.max||p.exact||p.ideal||p.min||_:p:_,c={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:r,maxHeight:a(o.height,1080),maxWidth:a(o.width,1920)}}};return o.frameRate&&"number"!=typeof o.frameRate?(c.video.mandatory.maxFrameRate=o.frameRate.max,c.video.mandatory.minFrameRate=o.frameRate.min):"number"==typeof o.frameRate&&(c.video.mandatory.maxFrameRate=o.frameRate),yield navigator.mediaDevices.getUserMedia(c)}),dL.apply(this,arguments)}function B3(r){return pL.apply(this,arguments)}function pL(){return pL=F(function*(r){const o=yield v5(r.mediaSource),a=yield(c=o,new qn((p,_)=>{const m=document.createElement("div");m.innerText="share screen",m.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const A=document.createElement("div");A.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const v=document.createElement("div");v.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",v.setAttribute("style","height: 12%;");const S=document.createElement("div");S.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const I=document.createElement("div");I.setAttribute("style","text-align: right; padding: 16px 0;");const R=document.createElement("button");R.innerHTML="cancel",R.setAttribute("style","width: 85px;"),R.onclick=()=>{document.body.removeChild(O);const B=new Error("NotAllowedError");B.name="NotAllowedError",_(B)},I.appendChild(R),A.appendChild(v),A.appendChild(S),A.appendChild(I);const O=document.createElement("div");O.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),O.appendChild(m),O.appendChild(A),document.body.appendChild(O),c.map(B=>{if(B.id){const q=document.createElement("div");q.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let z=B.thumbnail;const{width:te}=z.getSize();te>1920&&(z=z.resize({width:1920})),q.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+z.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+B.name.replace(/[\u00A0-\u9999<>\&]/g,function(de){return"&#"+de.charCodeAt(0)+";"})+"</span>",q.onclick=()=>{document.body.removeChild(O),p(B.id)},S.appendChild(q)}})}));var c;return yield L3(a,r)}),pL.apply(this,arguments)}function v5(r){return F3.apply(this,arguments)}function F3(){return F3=F(function*(r){let o=["window","screen"];"application"!==r&&"window"!==r||(o=["window"]),"screen"===r&&(o=["screen"]);const a=A5();if(!a)throw new Le(Te.ELECTRON_IS_NULL);let c=null;try{c=a.desktopCapturer.getSources({types:o})}catch{c=null}c&&c.then||(c=new qn((p,_)=>{a.desktopCapturer.getSources({types:o},(m,A)=>{m?_(m):p(A)})}));try{return yield c}catch(p){throw new Le(Te.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,p.toString())}}),F3.apply(this,arguments)}let hL=null;function A5(){if(hL)return hL;try{return hL=window.require("electron"),hL}catch{return null}}const U3=new Il("safari");let XS=!1,_7=!1;function $l(r,o){return fL.apply(this,arguments)}function fL(){return fL=F(function*(r,o){let a=0,c=null;for(;a<2;)try{c=yield zK(r,o,a>0);break}catch(p){if(p instanceof Le)throw se.error("[".concat(o,"] ").concat(p.toString())),$t("error",[],"getLocalStream",{config:r,id:o},p.toString()),p;const _=mL(p.name||p.code||p,p.message);if(_.code===Te.MEDIA_OPTION_INVALID){se.debug("[".concat(o,"] detect media option invalid, retry")),jn("debug",[],"[".concat(o,"] detect media option invalid, retry")),a+=1,yield Ic(500);continue}throw se.error("[".concat(o,"] ").concat(_.toString())),$t("error",[],"getLocalStream",{config:r,id:o},_.toString()),_}if(!c)throw new Le(Te.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return c}),fL.apply(this,arguments)}function zK(r,o,a){return y5.apply(this,arguments)}function y5(){return y5=F(function*(r,o,a){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Le(Te.NOT_SUPPORTED,"can not find getUserMedia");a&&(r.video&&(delete r.video.width,delete r.video.height),r.screen&&(delete r.screen.width,delete r.screen.height));const c=Yc(),p=new MediaStream;if(r.audioSource&&p.addTrack(r.audioSource),r.videoSource&&p.addTrack(r.videoSource),!r.audio&&!r.video&&!r.screen)return se.debug("Using Video Source/ Audio Source"),jn("debug",[],"Using Video Source/ Audio Source"),p;if(r.screen)if(A5())AT(p,r.screen.sourceId?yield L3(r.screen.sourceId,r.screen):yield B3(r.screen));else if(jw()&&r.screen.extensionId&&r.screen.mandatory){if(!c.getStreamFromExtension)throw new Le(Te.NOT_SUPPORTED,"This browser does not support screen sharing");se.debug("[".concat(o,'] Screen access on chrome stable, looking for extension"')),jn("debug",[],"[".concat(o,'] Screen access on chrome stable, looking for extension"'));const R=yield(_=r.screen.extensionId,m=o,new qn((O,B)=>{try{chrome.runtime.sendMessage(_,{getStream:!0},q=>{if(!q||!q.streamId)return se.error("[".concat(m,"] No response from Chrome Plugin. Plugin not installed properly"),q),$t("error",[],"getSourceIdFromExtension",{extensionId:_,streamId:m},"No response from Chrome Plugin. Plugin not installed properly, ".concat(q)),void B(new Le(Te.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));O(q.streamId)})}catch(q){se.error("[".concat(m,"] AgoraRTC screensharing plugin is not accessible(").concat(_,")"),q.toString()),$t("error",[],"getSourceIdFromExtension",{extensionId:_,streamId:m},"AgoraRTC screensharing plugin is not accessible(".concat(_,"), ").concat(q.toString())),B(new Le(Te.CHROME_PLUGIN_NOT_INSTALL))}}));r.screen.mandatory.chromeMediaSourceId=R,AT(p,yield navigator.mediaDevices.getUserMedia({video:{mandatory:r.screen.mandatory}}))}else if(c.getDisplayMedia){r.screen.mediaSource&&Dk(r.screen.mediaSource);const R={width:r.screen.width,height:r.screen.height,frameRate:r.screen.frameRate,displaySurface:"screen"===r.screen.mediaSource?"monitor":r.screen.mediaSource};se.debug("[".concat(o,"] getDisplayMedia:"),JSON.stringify({video:R,audio:!!r.screenAudio})),gg("debug",["mediaDevices",o],"getDisplayMedia",{video:R,audio:!!r.screenAudio,trackId:o}),AT(p,yield navigator.mediaDevices.getDisplayMedia({video:R,audio:!!r.screenAudio}))}else{if(!Xo())throw se.error("[".concat(o,"] This browser does not support screenSharing")),new Le(Te.NOT_SUPPORTED,"This browser does not support screen sharing");{r.screen.mediaSource&&Dk(r.screen.mediaSource);const R={video:{mediaSource:r.screen.mediaSource,width:r.screen.width,height:r.screen.height,frameRate:r.screen.frameRate}};se.debug("[".concat(o,"] getUserMedia: ").concat(JSON.stringify(R))),gg("debug",["mediaDevices",o],"getUserMedia",R),AT(p,yield navigator.mediaDevices.getUserMedia(R))}}var _,m;if(!r.video&&!r.audio)return p;let A={video:r.video,audio:r.audio},v=xt("MEDIA_DEVICE_CONSTRAINTS");if(v)try{"string"==typeof v&&(v=JSON.parse(v)),A=function R(O,B){if(!W7(O)||!W7(B)||Array.isArray(O)&&!Array.isArray(B)||!Array.isArray(O)&&Array.isArray(B))return B;if(Array.isArray(B)&&Array.isArray(O)){const q=[...O];for(let z=0;z<B.length;z++)q[z]=R(O[z],B[z]);return q}{const q=bT({},O);for(const z in B)Object.prototype.hasOwnProperty.call(B,z)&&(q[z]=Object.prototype.hasOwnProperty.call(O,z)?R(O[z],B[z]):B[z]);return q}}(A,v),jn("debug",["mediaDevices",o],"merge configConstraints ".concat(JSON.stringify(v)))}catch{}se.debug("[".concat(o,"] GetUserMedia"),JSON.stringify(A)),gg("debug",["mediaDevices",o],"getUserMedia",A),xi();let S,I=null;(jl()||yc()||IS())&&(I=yield U3.lock());try{S=yield navigator.mediaDevices.getUserMedia(A)}catch(R){throw I&&I(),R}return A.audio&&(XS=!0),A.video&&(_7=!0),AT(p,S),I&&I(),p}),y5.apply(this,arguments)}function mL(r,o){switch(r){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Le(Te.MEDIA_OPTION_INVALID,"".concat(r,": ").concat(o));case"NotFoundError":case"DevicesNotFoundError":return new Le(Te.DEVICE_NOT_FOUND,"".concat(r,": ").concat(o));case"NotSupportedError":return new Le(Te.NOT_SUPPORTED,"".concat(r,": ").concat(o));case"NotReadableError":return new Le(Te.NOT_READABLE,"".concat(r,": ").concat(o));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Le(Te.PERMISSION_DENIED,"".concat(r,": ").concat(o));case"ConstraintNotSatisfiedError":return new Le(Te.CONSTRAINT_NOT_SATISFIED,"".concat(r,": ").concat(o));default:return se.error("getUserMedia unexpected error",r),$t("error",[],"handleGetUserMediaError",void 0,r),new Le(Te.UNEXPECTED_ERROR,"".concat(r,": ").concat(o))}}function AT(r,o){const a=r.getVideoTracks()[0],c=r.getAudioTracks()[0],p=o.getVideoTracks()[0],_=o.getAudioTracks()[0];_&&(c&&r.removeTrack(c),r.addTrack(_)),p&&(a&&r.removeTrack(a),r.addTrack(p))}const Bu=new class extends ko{get state(){return this._state}set state(r){r!==this._state&&(this.emit(Xt.STATE_CHANGE,r),this._state=r)}constructor(){super(),J(this,"_state",wt.IDLE),J(this,"isAccessMicrophonePermission",!1),J(this,"isAccessCameraPermission",!1),J(this,"lastAccessMicrophonePermission",!1),J(this,"lastAccessCameraPermission",!1),J(this,"checkdeviceMatched",!1),J(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(xt("ENUMERATE_DEVICES_INTERVAL")||JN()&&Vy())&&this.updateDevicesInfo()},xt("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(r=>se.error(r.toString()))}enumerateDevices(r,o){var a=arguments,c=this;return F(function*(){let p=a.length>2&&void 0!==a[2]&&a[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Le(Te.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const _=yield navigator.mediaDevices.enumerateDevices(),m=c.checkMediaDeviceInfoIsOk(_);let A=!c.isAccessMicrophonePermission&&r,v=!c.isAccessCameraPermission&&o;m.audio&&(A=!1),m.video&&(v=!1);let S=null,I=null,R=null;if(!p&&(A||v)){if(U3.isLocked&&(se.debug("[device manager] wait GUM lock"),(yield U3.lock())(),se.debug("[device manager] GUM unlock")),XS&&(A=!1,c.isAccessMicrophonePermission=!0),_7&&(v=!1,c.isAccessCameraPermission=!0),se.debug("[device manager] check media device permissions",r,o,A,v),A&&v){try{R=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(O){const B=mL(O.name||O.code||O,O.message);if(B.code===Te.PERMISSION_DENIED)throw B;se.warning("getUserMedia failed in getDevices",B)}c.isAccessCameraPermission=!0,c.isAccessMicrophonePermission=!0}else if(A){try{S=yield navigator.mediaDevices.getUserMedia({audio:r})}catch(O){const B=mL(O.name||O.code||O,O.message);if(B.code===Te.PERMISSION_DENIED)throw B;se.warning("getUserMedia failed in getDevices",B)}c.isAccessMicrophonePermission=!0}else if(v){try{I=yield navigator.mediaDevices.getUserMedia({video:o})}catch(O){const B=mL(O.name||O.code||O,O.message);if(B.code===Te.PERMISSION_DENIED)throw B;se.warning("getUserMedia failed in getDevices",B)}c.isAccessCameraPermission=!0}se.debug("[device manager] mic permission",r,"cam permission",o)}try{const O=yield navigator.mediaDevices.enumerateDevices();return S&&S.getTracks().forEach(B=>B.stop()),I&&I.getTracks().forEach(B=>B.stop()),R&&R.getTracks().forEach(B=>B.stop()),S=null,I=null,R=null,O}catch(O){return S&&S.getTracks().forEach(B=>B.stop()),I&&I.getTracks().forEach(B=>B.stop()),R&&R.getTracks().forEach(B=>B.stop()),S=null,I=null,R=null,new Le(Te.ENUMERATE_DEVICES_FAILED,O.toString()).throw()}})()}getRecordingDevices(){var r=arguments,o=this;return F(function*(){let a=r.length>0&&void 0!==r[0]&&r[0];return(yield o.enumerateDevices(!0,!1,a)).filter(c=>"audioinput"===c.kind)})()}getCamerasDevices(){var r=arguments,o=this;return F(function*(){let a=r.length>0&&void 0!==r[0]&&r[0];return(yield o.enumerateDevices(!1,!0,a)).filter(c=>"videoinput"===c.kind)})()}getSpeakers(){var r=arguments,o=this;return F(function*(){let a=r.length>0&&void 0!==r[0]&&r[0];return(yield o.enumerateDevices(!0,!1,a)).filter(c=>"audiooutput"===c.kind)})()}searchDeviceIdByName(r){let o=null;return this.deviceInfoMap.forEach(a=>{a.device.label===r&&(o=a.device.deviceId)}),o}getDeviceById(r){var o=this;return F(function*(){const a=(yield o.enumerateDevices(!0,!0,!0)).find(c=>c.deviceId===r);if(!a)throw new Le(Te.DEVICE_NOT_FOUND,"deviceId: ".concat(r));return a})()}init(){var r=this;return F(function*(){r.state=wt.INITING;try{yield r.updateDevicesInfo(),r.state=wt.INITEND}catch(o){throw se.warning("Device Detection functionality cannot start properly.",o.toString()),r.state=wt.IDLE,!("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)&&new Le(Te.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),o}})()}updateDevicesInfo(){var r=this;return F(function*(){const o=yield r.enumerateDevices(!0,!0,!0),a=Date.now(),c=[];if(o[0]&&o[0].label&&!1===r.checkdeviceMatched){r.checkdeviceMatched=!0;const _=o.find(A=>"audioinput"===A.kind&&"default"===A.deviceId),m=o.find(A=>"audiooutput"===A.kind&&"default"===A.deviceId);_&&m?m.groupId===_.groupId?se.debug("[device-check] default input ".concat(_.label," and output ").concat(m.label," is the same group")):se.warning("[device-check] default input ".concat(_.label," and output ").concat(m.label," is not the same group")):se.debug("[device-check] default input or output not found")}const p=r.checkMediaDeviceInfoIsOk(o);if(o.forEach(_=>{if(!_.deviceId)return;const m=r.deviceInfoMap.get("".concat(_.kind,"_").concat(_.deviceId));if("ACTIVE"!==(m?m.state:"INACTIVE")){const A={initAt:a,updateAt:a,device:_,state:"ACTIVE"};r.deviceInfoMap.set("".concat(_.kind,"_").concat(_.deviceId),A),c.push(A)}m&&(m.updateAt=a)}),r.deviceInfoMap.forEach((_,m)=>{"ACTIVE"===_.state&&_.updateAt!==a&&(_.state="INACTIVE",c.push(_))}),r.state!==wt.INITEND)return p.audio&&(r.lastAccessMicrophonePermission=!0,r.isAccessMicrophonePermission=!0),void(p.video&&(r.lastAccessCameraPermission=!0,r.isAccessCameraPermission=!0));c.forEach(_=>{switch(_.device.kind){case"audioinput":r.lastAccessMicrophonePermission&&r.isAccessMicrophonePermission&&r.emit(Xt.RECORDING_DEVICE_CHANGED,_);break;case"videoinput":r.lastAccessCameraPermission&&r.isAccessCameraPermission&&r.emit(Xt.CAMERA_DEVICE_CHANGED,_);break;case"audiooutput":r.lastAccessMicrophonePermission&&r.isAccessMicrophonePermission&&r.emit(Xt.PLAYOUT_DEVICE_CHANGED,_)}}),p.audio&&(r.lastAccessMicrophonePermission=!0,r.isAccessMicrophonePermission=!0),p.video&&(r.lastAccessCameraPermission=!0,r.isAccessCameraPermission=!0)})()}checkMediaDeviceInfoIsOk(r){const o=r.filter(p=>"audioinput"===p.kind),a=r.filter(p=>"videoinput"===p.kind),c={audio:!1,video:!1};for(const p of o)if(p.label&&p.deviceId){c.audio=!0;break}for(const p of a)if(p.label&&p.deviceId){c.video=!0;break}return c}};var E5;let v7=xa("AudioElementPlayCenter")(E5=class{constructor(){J(this,"onAutoplayFailed",void 0),J(this,"elementMap",new Map),J(this,"elementStateMap",new Map),J(this,"elementsNeedToResume",[]),J(this,"sinkIdMap",new Map),J(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(r=>{let[o,a]=r;const c=this.elementStateMap.get(o),p=a.srcObject.getAudioTracks()[0];X_()?p&&"live"===p.readyState&&"running"===qr.curState&&(se.debug("auto resume after interruption for iOS 15"),jn("debug",["AudioElementPlayCenter",o],"auto resume after interruption for iOS15"),a.pause(),a.play()):c&&"paused"===c&&p&&"live"===p.readyState&&"running"===qr.curState&&(se.debug("auto resume after interruption for iOS"),jn("debug",["AudioElementPlayCenter",o],"auto resume after interruption for iOS"),a.play())})}),J(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(r=>{let[o,a]=r;const c=a.srcObject.getAudioTracks()[0];c&&"live"===c.readyState&&(se.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),$t("debug",["AudioElementPlayCenter",o],"autoResumeAfterInterruptionOnIOS15"),a.pause(),a.play())})}),this.autoResumeAudioElement(),qr.on(na.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),qr.on(na.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),qr.on(na.STATE_CHANGE,()=>{yc()&&"suspended"===qr.prevState&&"running"===qr.curState&&this.autoResumeAfterInterruption()})}setSinkID(r,o){var a=this;return F(function*(){const c=a.elementMap.get(r);if(a.sinkIdMap.set(r,o),c)try{yield c.setSinkId(o)}catch(p){throw new Le(Te.PERMISSION_DENIED,"can not set sink id: "+p.toString())}})()}play(r,o,a,c){if(this.elementMap.has(o))return;const p=document.createElement("audio");p.autoplay=!0,p.srcObject=new MediaStream([r]),this.bindAudioElementEvents(o,p),this.elementMap.set(o,p),this.elementStateMap.set(o,X.INIT),this.setVolume(o,a);const _=this.sinkIdMap.get(o);if(_)try{p.setSinkId(_).catch(A=>{se.warning("[".concat(o,"] set sink id failed"),A.toString()),gg("warning",["HTMLAudioElement",o],"setSinkId",A.toString())})}catch(A){se.warning("[".concat(o,"] set sink id failed"),A.toString())}const m=p.play();m&&m.then&&m.catch(A=>{c&&zt.autoplayFailed(c,"audio",A.message,o),se.warning("audio element play warning",A.toString()),gg("warning",["HTMLAudioElement",o],"play",A.toString()),this.elementMap.has(o)&&"NotAllowedError"===A.name&&(se.warning("detected audio element autoplay failed"),$t("warning",["AudioElementPlayCenter",o],"play",A.toString()),this.elementsNeedToResume.push(p),Ph(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),m5()}))})}updateTrack(r,o){const a=this.elementMap.get(r);a&&(a.srcObject=new MediaStream([o]))}isPlaying(r){return this.elementMap.has(r)}setVolume(r,o){const a=this.elementMap.get(r);a&&(o=Math.max(0,Math.min(100,o)),a.volume=o/100)}stop(r){const o=this.elementMap.get(r);if(this.sinkIdMap.delete(r),!o)return;const a=this.elementsNeedToResume.indexOf(o);this.elementsNeedToResume.splice(a,1),o.srcObject=null,o.remove(),this.elementMap.delete(r),this.elementStateMap.delete(r)}bindAudioElementEvents(r,o){b5.forEach(a=>{o.addEventListener(a,c=>{const p=this.elementStateMap.get(r),_="pause"===c.type?"paused":c.type;se.debug("[".concat(r,"] audio-element-status change ").concat(p," => ").concat(_)),Wl("debug",["HTMLAudioElement",r],"statusChange","".concat(p," => ").concat(_)),this.elementStateMap.set(r,_)})})}getPlayerState(r){return this.elementStateMap.get(r)||"uninit"}autoResumeAudioElement(){const r=()=>{this.elementsNeedToResume.forEach(o=>{o.play().then(a=>{se.debug("Auto resume audio element success"),$t("debug",["AudioElementPlayCenter"],"autoResumeAudioElement")}).catch(a=>{se.warning("Auto resume audio element failed!",a),$t("warning",["AudioElementPlayCenter"],"autoResumeAudioElement",a.toString())})}),this.elementsNeedToResume=[]};new qn(o=>{document.body?o():window.addEventListener("load",()=>o())}).then(()=>{const o=xi();"Android"!==o.os||"Chrome"!==o.name&&o.name!==bi.WECHAT?(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0)):document.body.addEventListener("click",r,!0)})}})||E5;const b5=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],wd=new v7;function ms(){return function(r,o,a){const c=r[o];"function"==typeof c&&(a.value=function(){this._isClosed&&new Le(Te.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var p=arguments.length,_=new Array(p),m=0;m<p;m++)_[m]=arguments[m];const A=c.apply(this,_);return A instanceof qn?new qn((v,S)=>{A.then(v).catch(S)}):A})}}var S5,C5,gs,A7,y7,E7,$k,gL,_L,I5,V3,b7,Ua,w5,S7,C7,I7,w7,yT,T7,R7,D7,O7,j3,k7,P7,ec,Q3;function T5(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function vL(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?T5(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):T5(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let tc=(S5=xa("LocalAudioTrack","getTrackId"),C5=ms(),gs=Jy("LocalAudioTrack","_enabledMutex"),A7=ms(),y7=Jy("LocalAudioTrack","_enabledMutex"),E7=ms(),$k=Wk({report:zt}),gL=ms(),_L=ms(),I5=ms(),V3=ms(),S5((rr((Ua=class extends N3{get isPlaying(){return this._useAudioElement?wd.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(r,o,a){super(r,a),J(this,"trackMediaType","audio"),J(this,"_encoderConfig",void 0),J(this,"_source",void 0),J(this,"_enabled",!0),J(this,"_volume",100),J(this,"_useAudioElement",!1),J(this,"_bypassWebAudio",!1),J(this,"processor",void 0),J(this,"processorContext",void 0),J(this,"processorDestination",void 0),this._encoderConfig=o,this._source=new g7(r),xt("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),this.processorContext=new N7(this._source.context,this.getTrackId()),this.processorDestination=new M7(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(or.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(r){l(r,"volume",0,1e3);const o=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),r]},300);this._volume=r,this._source.setVolume(r/100),this._useAudioElement&&wd.setVolume(this.getTrackId(),r);try{if(this._bypassWebAudio)return se.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void o.onSuccess();const a=this._source.createOutputTrack();this._mediaStreamTrack!==a&&(this._mediaStreamTrack=a,Qo(this,_r.NEED_REPLACE_TRACK,this).then(()=>{se.debug("[".concat(this.getTrackId(),"] replace web audio track success")),jn("debug",this,"replace web audio track success")}).catch(c=>{se.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),c),jn("warning",this,"replace web audio track failed ".concat(c.toString()))}))}catch{}o.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}setPlaybackDevice(r){var o=this;return F(function*(){const a=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[o.getTrackId(),r]});if(!o._useAudioElement)throw new Le(Te.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield wd.setSinkID(o.getTrackId(),r)}catch(c){throw a.onError(c),c}a.onSuccess()})()}setEnabled(r,o,a){var c=this;return F(function*(){if(!a){if(r===c._enabled)return;c.stateCheck("enabled",r)}if(se.info("[".concat(c.getTrackId(),"] start setEnabled"),r),$t("info",c,"setEnabled",r),r){c._originMediaStreamTrack.enabled=!0;try{a||(c._enabled=!0),yield Qo(c,_r.NEED_ENABLE_TRACK,c),se.info("[".concat(c.getTrackId(),"] setEnabled to ").concat(r," success")),$t("info",c,"setEnabled",r,"success")}catch(p){throw a||(c._enabled=!1),se.error("[".concat(c.getTrackId(),"] setEnabled to true error"),p.toString()),$t("error",c,"setEnabled",r,p.toString()),p}}else{c._originMediaStreamTrack.enabled=!1,a||(c._enabled=!1);try{yield Qo(c,_r.NEED_DISABLE_TRACK,c)}catch(p){throw a||(c._enabled=!0),se.error("[".concat(c.getTrackId(),"] setEnabled to false error"),p.toString()),$t("info",c,"setEnabled",r,p.toString()),p}}})()}setMuted(r){var o=this;return F(function*(){r!==o._muted&&(o.stateCheck("muted",r),o._muted=r,o._originMediaStreamTrack.enabled=!r,se.debug("[".concat(o.getTrackId(),"] start set muted: ").concat(r)),$t("debug",o,"setMuted",r),r?yield Qo(o,_r.NEED_MUTE_TRACK,o):yield Qo(o,_r.NEED_UNMUTE_TRACK,o))})()}getStats(){return Xk(()=>{se.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead"),jn("warning",this,"LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),eE(this,_r.GET_STATS)||vL({},at)}setAudioFrameCallback(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!r)return this._source.removeAllListeners(or.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(o),this._source.removeAllListeners(or.ON_AUDIO_BUFFER),this._source.on(or.ON_AUDIO_BUFFER,a=>r(a))}play(){const r=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});se.debug("[".concat(this.getTrackId(),"] start audio playback")),$t("debug",this,"play"),this._useAudioElement?(se.debug("[".concat(this.getTrackId(),"] start audio playback in element")),jn("debug",this,"start audio playback in element"),wd.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),r.onSuccess()}stop(){const r=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});se.debug("[".concat(this.getTrackId(),"] stop audio playback")),$t("debug",this,"stop"),this._useAudioElement?wd.stop(this.getTrackId()):this._source.stop(),r.onSuccess()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){se.debug("[".concat(this.getTrackId(),"] update player source track")),$t("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}_updateOriginMediaStreamTrack(r,o){var a=this;return F(function*(){a._originMediaStreamTrack!==r&&(a._originMediaStreamTrack.removeEventListener("ended",a._handleTrackEnded),r.addEventListener("ended",a._handleTrackEnded),o&&a._originMediaStreamTrack.stop(),a._originMediaStreamTrack=r,a.processor&&a.processor.updateInput({track:r,context:a.processorContext}),a._mediaStreamTrack!==a._source.outputTrack?(a._mediaStreamTrack=a._originMediaStreamTrack,a._updatePlayerSource(),yield Qo(a,_r.NEED_REPLACE_TRACK,a)):a._source.updateTrack(a._originMediaStreamTrack))})()}renewMediaStreamTrack(r){return qn.resolve(void 0)}pipe(r){if(this._bypassWebAudio)throw new Le(Te.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===r)return r;if(r._source)throw new Le(Te.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),r}unpipe(){var r;if(!this.processor)return;const o=this.processor;null===(r=this._source.processSourceNode)||void 0===r||r.disconnect(),this.processor._source=!1,this.processor=void 0,o.reset()}bindProcessorDestinationEvents(){var r=this;this.processorDestination.on(bp.ON_TRACK,function(){var o=F(function*(a){a?a!==r._mediaStreamTrack&&(r._mediaStreamTrack=a,r._updatePlayerSource(),yield Qo(r,_r.NEED_REPLACE_TRACK,r)):r._mediaStreamTrack!==r._originMediaStreamTrack&&(r._mediaStreamTrack=r._originMediaStreamTrack,r._updatePlayerSource(),yield Qo(r,_r.NEED_REPLACE_TRACK,r))});return function(a){return o.apply(this,arguments)}}()),this.processorDestination.on(bp.ON_NODE,o=>{this._source.processedNode=o})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(bp.ON_TRACK),this.processorDestination.removeAllListeners(bp.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Mu.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Mu.REQUEST_CONSTRAINTS)}}).prototype,"setPlaybackDevice",[C5],Object.getOwnPropertyDescriptor(Ua.prototype,"setPlaybackDevice"),Ua.prototype),rr(Ua.prototype,"setEnabled",[gs,A7],Object.getOwnPropertyDescriptor(Ua.prototype,"setEnabled"),Ua.prototype),rr(Ua.prototype,"setMuted",[y7,E7,$k],Object.getOwnPropertyDescriptor(Ua.prototype,"setMuted"),Ua.prototype),rr(Ua.prototype,"getStats",[gL],Object.getOwnPropertyDescriptor(Ua.prototype,"getStats"),Ua.prototype),rr(Ua.prototype,"setAudioFrameCallback",[_L],Object.getOwnPropertyDescriptor(Ua.prototype,"setAudioFrameCallback"),Ua.prototype),rr(Ua.prototype,"play",[I5],Object.getOwnPropertyDescriptor(Ua.prototype,"play"),Ua.prototype),rr(Ua.prototype,"stop",[V3],Object.getOwnPropertyDescriptor(Ua.prototype,"stop"),Ua.prototype),b7=Ua))||b7),ZS=(w5=xa("MicrophoneAudioTrack","getTrackId"),S7=ms(),C7=Jy("MicrophoneAudioTrack","_enabledMutex"),I7=ms(),w5((rr((yT=class extends tc{constructor(r,o,a,c){super(r,o.encoderConfig?xf(o.encoderConfig):{},c),J(this,"_config",void 0),J(this,"_deviceName","default"),J(this,"_constraints",void 0),J(this,"_originalConstraints",void 0),J(this,"_enabled",!0),cr("info",this,"constructor",{trackId:c,deviceId:r.label,constraints:a}),this._config=o,this._constraints=a,this._originalConstraints=a,this._deviceName=r.label,"boolean"==typeof o.bypassWebAudio&&(this._bypassWebAudio=o.bypassWebAudio),X_()&&qr.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}setDevice(r){var o=this;return F(function*(){const a=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.MIC_AUDIO_TRACK_SET_DEVICE,options:[o.getTrackId(),r]});if(se.info("[".concat(o.getTrackId(),"] start set device to ").concat(r)),$t("info",o,"setDevice",r),o._enabled)try{const c=yield Bu.getDeviceById(r),p={};p.audio=vL({},o._constraints),p.audio.deviceId={exact:r},o._originMediaStreamTrack.stop();let _=null;try{_=yield $l(p,o.getTrackId())}catch(m){throw se.error("[".concat(o.getTrackId(),"] setDevice failed"),m.toString()),$t("error",o,"setDevice",r,m.toString()),_=yield $l({video:o._constraints},o.getTrackId()),yield o._updateOriginMediaStreamTrack(_.getAudioTracks()[0],!1),m}yield o._updateOriginMediaStreamTrack(_.getAudioTracks()[0],!1),o._deviceName=c.label,o._config.microphoneId=r,o._constraints.deviceId={exact:r}}catch(c){throw a.onError(c),se.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),$t("error",o,"setDevice",r,c.toString()),c}else try{const c=yield Bu.getDeviceById(r);o._deviceName=c.label,o._config.microphoneId=r,o._constraints.deviceId={exact:r}}catch(c){throw a.onError(c),se.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),$t("error",o,"setDevice",r,c.toString()),c}a.onSuccess(),se.info("[".concat(o.getTrackId(),"] set device to ").concat(r," success")),$t("info",o,"setDevice",r,"success")})()}setEnabled(r,o,a){var c=()=>super.setEnabled,p=this;return F(function*(){if(o)return se.debug("[".concat(p.getTrackId,"] setEnabled false (do not close microphone)")),jn("debug",p,"setEnabled false (do not close microphone)"),yield c().call(p,r);if(!a){if(r===p._enabled)return;p.stateCheck("enabled",r)}if(se.info("[".concat(p.getTrackId(),"] start setEnabled"),r),$t("info",p,"setEnabled",r),!r){p._originMediaStreamTrack.onended=null,p._originMediaStreamTrack.stop(),a||(p._enabled=!1);try{yield Qo(p,_r.NEED_DISABLE_TRACK,p)}catch(A){throw se.error("[".concat(p.getTrackId(),"] setEnabled false failed"),A.toString()),$t("error",p,"setEnabled",r,A.toString()),A}return}const _=vL({},p._constraints),m=Bu.searchDeviceIdByName(p._deviceName);m&&!_.deviceId&&(_.deviceId=m);try{a||(p._enabled=!0);const A=yield $l({audio:p._constraints},p.getTrackId());yield p._updateOriginMediaStreamTrack(A.getAudioTracks()[0],!1),yield Qo(p,_r.NEED_ENABLE_TRACK,p)}catch(A){throw a||(p._enabled=!1),se.error("[".concat(p.getTrackId(),"] setEnabled true failed"),A.toString()),$t("error",p,"setEnabled",r,A.toString()),A}se.info("[".concat(p.getTrackId(),"] setEnabled success")),$t("info",p,"setEnabled",r,"success")})()}close(){super.close(),X_()&&qr.unbindInterruptDetectorTrack(this)}onTrackEnded(){var r=this;if((yc()||Rf())&&this._enabled&&!this._isClosed&&qr.duringInterruption){const o=function(){var a=F(function*(){qr.off(na.IOS_INTERRUPTION_END,o),r._enabled&&!r._isClosed&&(se.debug("[".concat(r.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),jn("debug",r,"try capture microphone media device for interrupted iOS device"),yield r.setEnabled(!1),yield r.setEnabled(!0))});return function(){return a.apply(this,arguments)}}();qr.on(na.IOS_INTERRUPTION_END,o)}else se.debug("[".concat(this.getTrackId(),"] track ended")),Wl("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Ep.TRACK_ENDED)}renewMediaStreamTrack(r){var o=this;return F(function*(){const a=r||o._constraints,c=Bu.searchDeviceIdByName(o._deviceName);c&&!a.deviceId&&(a.deviceId=c),o._constraints=a,o._originMediaStreamTrack.stop();const p=yield $l({audio:o._constraints},o.getTrackId());yield o._updateOriginMediaStreamTrack(p.getAudioTracks()[0],!0)})()}bindProcessorContextEvents(){var r=this;this.processorContext.on(Mu.REQUEST_UPDATE_CONSTRAINTS,function(){var o=F(function*(a,c,p){try{const _=Object.assign({},r._originalConstraints,...a);yield r.renewMediaStreamTrack(_),c()}catch(_){p(_)}});return function(a,c,p){return o.apply(this,arguments)}}()),this.processorContext.on(Mu.REQUEST_CONSTRAINTS,function(){var o=F(function*(a){a(r._originMediaStreamTrack.getSettings())});return function(a){return o.apply(this,arguments)}}())}}).prototype,"setDevice",[S7],Object.getOwnPropertyDescriptor(yT.prototype,"setDevice"),yT.prototype),rr(yT.prototype,"setEnabled",[C7,I7],Object.getOwnPropertyDescriptor(yT.prototype,"setEnabled"),yT.prototype),w7=yT))||w7),R5=(T7=xa("BufferSourceAudioTrack","getTrackId"),R7=ms(),D7=ms(),O7=ms(),j3=ms(),k7=ms(),T7((rr((ec=class extends tc{constructor(r,o,a,c){super(o.createOutputTrack(),a,c),J(this,"source",void 0),J(this,"_bufferSource",void 0),cr("info",this,"constructor",{trackId:c}),this.source=r,this._bufferSource=o,this._bufferSource.on(or.AUDIO_SOURCE_STATE_CHANGE,p=>{this.emit(Ep.SOURCE_STATE_CHANGE,p)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(r){const o=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),r,this.duration]});r&&this._bufferSource.updateOptions(r),this._bufferSource.startProcessAudioBuffer(),o.onSuccess()}pauseProcessAudioBuffer(){const r=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),r.onSuccess()}seekAudioBuffer(r){const o=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(r),o.onSuccess()}resumeProcessAudioBuffer(){const r=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),r.onSuccess()}stopProcessAudioBuffer(){const r=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),r.onSuccess()}}).prototype,"startProcessAudioBuffer",[R7],Object.getOwnPropertyDescriptor(ec.prototype,"startProcessAudioBuffer"),ec.prototype),rr(ec.prototype,"pauseProcessAudioBuffer",[D7],Object.getOwnPropertyDescriptor(ec.prototype,"pauseProcessAudioBuffer"),ec.prototype),rr(ec.prototype,"seekAudioBuffer",[O7],Object.getOwnPropertyDescriptor(ec.prototype,"seekAudioBuffer"),ec.prototype),rr(ec.prototype,"resumeProcessAudioBuffer",[j3],Object.getOwnPropertyDescriptor(ec.prototype,"resumeProcessAudioBuffer"),ec.prototype),rr(ec.prototype,"stopProcessAudioBuffer",[k7],Object.getOwnPropertyDescriptor(ec.prototype,"stopProcessAudioBuffer"),ec.prototype),P7=ec))||P7),Td=xa("MixingAudioTrack","getTrackId")(Q3=class extends tc{get isActive(){for(const r of this.trackList)if(r._enabled&&!r._isClosed&&!r.muted)return!0;return!1}constructor(){const r=zk().createMediaStreamDestination();super(r.stream.getAudioTracks()[0],void 0,_s(8,"track-mix-")),J(this,"trackList",void 0),J(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=r,this.trackList=[]}hasAudioTrack(r){return-1!==this.trackList.indexOf(r)}addAudioTrack(r){if(-1!==this.trackList.indexOf(r))return se.debug("track ".concat(r.getTrackId()," is already added")),void jn("debug",this,"track already added");se.debug("add ".concat(r.getTrackId()," to mixing track")),$t("debug",this,"addAudioTrack",r.getTrackId()),r._source.outputNode.connect(this.destNode),this.trackList.push(r),this.updateEncoderConfig()}removeAudioTrack(r){if(-1!==this.trackList.indexOf(r)){se.debug("remove ".concat(r.getTrackId()," from mixing track")),$t("debug",this,"removeAudioTrack",r.getTrackId());try{r._source.outputNode.disconnect(this.destNode)}catch{}q3(this.trackList,r),this.updateEncoderConfig()}}updateEncoderConfig(){const r={};this.trackList.forEach(o=>{o._encoderConfig&&((o._encoderConfig.bitrate||0)>(r.bitrate||0)&&(r.bitrate=o._encoderConfig.bitrate),(o._encoderConfig.sampleRate||0)>(r.sampleRate||0)&&(r.sampleRate=o._encoderConfig.sampleRate),(o._encoderConfig.sampleSize||0)>(r.sampleSize||0)&&(r.sampleSize=o._encoderConfig.sampleSize),o._encoderConfig.stereo&&(r.stereo=!0))}),this._encoderConfig=r}})||Q3;class M7 extends ko{constructor(o){super(),J(this,"name","AudioProcessorDestination"),J(this,"ID","0"),J(this,"inputTrack",void 0),J(this,"inputNode",void 0),J(this,"audioProcessorContext",void 0),J(this,"_source",void 0),this.audioProcessorContext=o}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Le(Te.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Le(Te.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.emit(bp.ON_TRACK,void 0),this.emit(bp.ON_NODE,void 0)}updateInput(o){if(o.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");o.track&&this.inputTrack!==o.track&&(this.inputTrack=o.track,this.emit(bp.ON_TRACK,this.inputTrack)),o.node&&this.inputNode!==o.node&&(this.inputNode=o.node,this.emit(bp.ON_NODE,this.inputNode))}}class N7 extends ko{constructor(o,a){super(),J(this,"constraintsMap",new Map),J(this,"statsRegistry",[]),J(this,"audioContext",void 0),J(this,"trackId",void 0),this.audioContext=o,this.trackId=a}getConstraints(){var o=this;return F(function*(){return Ip(o,Mu.REQUEST_CONSTRAINTS)})()}getAudioContext(){return this.audioContext}requestApplyConstraints(o,a){var c=this;return F(function*(){var p;return se.info("processor ".concat(a.name," requestApplyConstraints for ").concat(c.trackId)),o&&c.constraintsMap.set(a,o),Qo(c,Mu.REQUEST_UPDATE_CONSTRAINTS,Array.from(dv(p=c.constraintsMap).call(p)))})()}requestRevertConstraints(o){var a=this;return F(function*(){var c;if(a.constraintsMap.has(o))return a.constraintsMap.delete(o),Qo(a,Mu.REQUEST_UPDATE_CONSTRAINTS,Array.from(dv(c=a.constraintsMap).call(c)))})()}registerStats(o,a,c){this.statsRegistry.find(p=>p.processorID===o.ID&&p.processorName===o.name&&p.type===a)||this.statsRegistry.push({processorName:o.name,processorID:o.ID,type:a,cb:c})}unregisterStats(o,a){}gatherStats(){return this.statsRegistry.map(o=>{let{processorID:a,processorName:c,type:p,cb:_}=o;return{processorID:a,processorName:c,type:p,stats:_()}})}}class x7 extends ko{constructor(){super(...arguments),J(this,"resultStorage",new Map)}setLocalAudioStats(o,a,c){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",o,this.checkAudioInputLevel(c,a)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",o,this.checkSendAudioBitrate(c,a))}setLocalVideoStats(o,a,c){this.record("SEND_VIDEO_BITRATE_TOO_LOW",o,this.checkSendVideoBitrate(c,a)),this.record("FRAMERATE_INPUT_TOO_LOW",o,this.checkFramerateInput(c,a)),this.record("FRAMERATE_SENT_TOO_LOW",o,this.checkFramerateSent(c))}setRemoteAudioStats(o,a){const c=o.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",c,this.checkAudioOutputLevel(a))}setRemoteVideoStats(o,a){const c=o.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",c,this.checkVideoDecode(a))}record(o,a,c){this.resultStorage.has(o)||this.resultStorage.set(o,{result:[],isPrevNormal:!0});const p=this.resultStorage.get(o);if(p&&(p.result.push(c),p.result.length>=5)){const _=p.result.includes(!0);p.isPrevNormal&&!_&&this.emit("exception",ET[o],o,a),!p.isPrevNormal&&_&&this.emit("exception",ET[o]+2e3,o+"_RECOVER",a),p.isPrevNormal=_,p.result=[]}}checkAudioOutputLevel(o){return!(o.receiveBitrate>0&&0===o.receiveLevel)}checkAudioInputLevel(o,a){return a instanceof Td&&!a.isActive||!!a.muted||0!==o.sendVolumeLevel}checkFramerateInput(o,a){let c=null;a._encoderConfig&&a._encoderConfig.frameRate&&(c=Zy(a._encoderConfig.frameRate));const p=o.captureFrameRate;return!c||!p||!(c>10&&p<5||c<10&&c>=5&&p<=1)}checkFramerateSent(o){return!(o.captureFrameRate&&o.sendFrameRate&&o.captureFrameRate>5&&o.sendFrameRate<=1)}checkSendVideoBitrate(o,a){return!!a.muted||0!==o.sendBitrate}checkSendAudioBitrate(o,a){return a instanceof Td&&!a.isActive||!!a.muted||0!==o.sendBitrate}checkVideoDecode(o){return 0===o.receiveBitrate||0!==o.decodeFrameRate}}const ET={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},Fu=new class{markSubscribeStart(r,o){performance.mark("agora-web-sdk/".concat(r,"/subscribe-").concat(o))}markPublishStart(r,o){performance.mark("agora-web-sdk/".concat(r,"/publish-").concat(o))}measureFromSubscribeStart(r,o){const a=performance.getEntriesByName("agora-web-sdk/".concat(r,"/subscribe-").concat(o));if(a.length>0){const c=a[a.length-1];return Math.round(performance.now()-c.startTime)}return 0}measureFromPublishStart(r,o){const a=performance.getEntriesByName("agora-web-sdk/".concat(r,"/publish-").concat(o));if(a.length>0){const c=a[a.length-1];return Math.round(performance.now()-c.startTime)}return 0}};function D5(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function e0(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?D5(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):D5(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class t0{constructor(o){J(this,"store",void 0),J(this,"onStatsException",void 0),J(this,"onUploadPublishDuration",void 0),J(this,"localStats",new Map),J(this,"remoteStats",new Map),J(this,"updateStatsInterval",void 0),J(this,"trafficStats",void 0),J(this,"trafficStatsPeerList",[]),J(this,"uplinkStats",void 0),J(this,"exceptionMonitor",void 0),J(this,"p2pChannel",void 0),J(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=o,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new x7,this.exceptionMonitor.on("exception",(a,c,p)=>{this.onStatsException&&this.onStatsException(a,c,p)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Un.LocalAudioTrack)||e0({},at)}getLocalVideoTrackStats(){return this.localStats.get(Un.LocalVideoTrack)||e0({},Zt)}getRemoteAudioTrackStats(o){const a=(_,m)=>{if(!this.trafficStats)return m;const A=this.trafficStats.peer_delay.find(v=>v.peer_uid===_);return A&&(m.publishDuration=A.B_ppad+(Date.now()-this.trafficStats.timestamp)),m},c={};if(o){var p;const _=null===(p=this.remoteStats.get(o))||void 0===p?void 0:p.audioStats;_&&(c[o]=a(o,_))}else Array.from(this.remoteStats.entries()).forEach(_=>{let[m,{audioStats:A}]=_;A&&(c[m]=a(m,A))});return c}getRemoteNetworkQualityStats(o){const a={};if(o){var c;const p=null===(c=this.remoteStats.get(o))||void 0===c?void 0:c.networkStats;p&&(a[o]=p)}else Array.from(this.remoteStats.entries()).forEach(p=>{let[_,{networkStats:m}]=p;m&&(a[_]=m)});return a}getRemoteVideoTrackStats(o){const a=(_,m)=>{if(!this.trafficStats)return m;const A=this.trafficStats.peer_delay.find(v=>v.peer_uid===_);return A&&(m.publishDuration=A.B_ppvd+(Date.now()-this.trafficStats.timestamp)),m},c={};if(o){var p;const _=null===(p=this.remoteStats.get(o))||void 0===p?void 0:p.videoStats;_&&(c[o]=a(o,_))}else Array.from(this.remoteStats.entries()).forEach(_=>{let[m,{videoStats:A}]=_;A&&(c[m]=a(m,A))});return c}getRTCStats(){let o=0,a=0,c=0,p=0;const _=this.localStats.get(Un.LocalAudioTrack);_&&(o+=_.sendBytes,a+=_.sendBitrate);const m=this.localStats.get(Un.LocalVideoTrack);m&&(o+=m.sendBytes,a+=m.sendBitrate);const A=this.localStats.get(Un.LocalVideoLowTrack);A&&(o+=A.sendBytes,a+=A.sendBitrate),this.remoteStats.forEach(S=>{let{audioStats:I,videoStats:R}=S;I&&(c+=I.receiveBytes,p+=I.receiveBitrate),R&&(c+=R.receiveBytes,p+=R.receiveBitrate)});let v=1;return this.trafficStats&&(v+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:v,SendBitrate:a,SendBytes:o,RecvBytes:c,RecvBitrate:p,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(o){this.localStats.set(o,void 0)}removeLocalStats(o){o?this.localStats.delete(o):this.localStats.clear()}addRemoteStats(o){this.remoteStats.set(o,{})}removeRemoteStats(o){o?this.remoteStats.delete(o):this.remoteStats.clear()}addP2PChannel(o){this.p2pChannel=o}updateTrafficStats(o){o.peer_delay=o.peer_delay.filter(a=>void 0!==a.B_ppad||void 0!==a.B_ppvd),o.peer_delay.filter(a=>-1===this.trafficStatsPeerList.indexOf(a.peer_uid)).forEach(a=>{var c;const p=null===(c=this.p2pChannel)||void 0===c?void 0:c.getRemoteMedia(a.peer_uid),_=null!=p&&p.videoSSRC?Fu.measureFromSubscribeStart(this.store.clientId,p.videoSSRC):0,m=null!=p&&p.audioSSRC?Fu.measureFromSubscribeStart(this.store.clientId,p.audioSSRC):0;void 0!==a.B_ppad&&void 0!==a.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(a.peer_uid,a.B_ppad,a.B_ppvd,_>m?_:m),this.trafficStatsPeerList.push(a.peer_uid))}),this.trafficStats=o}updateUplinkStats(o){this.uplinkStats&&this.uplinkStats.B_fir!==o.B_fir&&se.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(o.B_fir)),this.uplinkStats=o}static isRemoteVideoFreeze(o,a,c){return!!o&&(!!c&&a.framesDecodeFreezeTime>c.framesDecodeFreezeTime||!(!c||a.framesDecodeCount>c.framesDecodeCount))}static isRemoteAudioFreeze(o){return!!o&&o._isFreeze()}isLocalVideoFreeze(o){return!(!o.inputFrame||!o.sentFrame)&&o.inputFrame.frameRate>5&&o.sentFrame.frameRate<3}updateLocalStats(o){Array.from(this.localStats.entries()).forEach(a=>{let[c,p]=a;switch(c){case Un.LocalVideoTrack:case Un.LocalVideoLowTrack:{const _=p,m=e0({},Zt),A=o.getStats(),v=o.getLocalMedia(c);if(A){const S=A.videoSend.find(I=>I.ssrc===v?.ssrcs[0].ssrcId);if(S){const I=o.getLocalVideoSize(),R=o.getEncoderConfig(Un.LocalVideoTrack);"H264"!==S.codec&&"VP8"!==S.codec&&"VP9"!==S.codec&&"AV1X"!==S.codec&&"AV1"!==S.codec||(m.codecType=S.codec),m.sendBytes=S.bytes,m.sendBitrate=_?8*Math.max(0,m.sendBytes-_.sendBytes):0,S.inputFrame?(m.captureFrameRate=S.inputFrame.frameRate,m.captureResolutionHeight=S.inputFrame.height,m.captureResolutionWidth=S.inputFrame.width):I&&(m.captureResolutionWidth=I.width,m.captureResolutionHeight=I.height),S.sentFrame?(m.sendFrameRate=S.sentFrame.frameRate,m.sendResolutionHeight=S.sentFrame.height,m.sendResolutionWidth=S.sentFrame.width):I&&(m.sendResolutionWidth=I.width,m.sendResolutionHeight=I.height),S.avgEncodeMs&&(m.encodeDelay=S.avgEncodeMs),R&&R.bitrateMax&&(m.targetSendBitrate=1e3*R.bitrateMax),m.sendPackets=S.packets,m.sendPacketsLost=S.packetsLost,m.totalDuration=_?_.totalDuration+1:1,m.totalFreezeTime=_?_.totalFreezeTime:0,this.isLocalVideoFreeze(S)&&(m.totalFreezeTime+=1)}this.trafficStats&&(m.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(c,m),m&&v&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,v.track,m);break}case Un.LocalAudioTrack:{const _=p,m=e0({},at),A=o.getStats(),v=o.getLocalMedia(c);if(A){const S=A.audioSend.find(I=>I.ssrc===v?.ssrcs[0].ssrcId);if(S){if("opus"!==S.codec&&"aac"!==S.codec&&"PCMU"!==S.codec&&"PCMA"!==S.codec&&"G722"!==S.codec||(m.codecType=S.codec),S.inputLevel)m.sendVolumeLevel=Math.round(32767*S.inputLevel);else{const I=o.getLocalAudioVolume();I&&(m.sendVolumeLevel=Math.round(32767*I))}m.sendBytes=S.bytes,m.sendPackets=S.packets,m.sendPacketsLost=S.packetsLost,m.sendBitrate=_?8*Math.max(0,m.sendBytes-_.sendBytes):0}}this.trafficStats&&(m.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Un.LocalAudioTrack,m),m&&v&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,v.track,m);break}}})}updateRemoteStats(o){Array.from(this.remoteStats.entries()).forEach(a=>{let[c,{videoStats:p,audioStats:_,videoPcStats:m}]=a;const A=_,v=p,S=m,I=e0({},xn),R=e0({},br),O=e0({},sr),{audioTrack:B,videoTrack:q,audioSSRC:z,videoSSRC:te}=o.getRemoteMedia(c),de=o.getStats(),ge=de?.audioRecv.find(dt=>dt.ssrc===z),Se=de?.videoRecv.find(dt=>dt.ssrc===te),Me=this.trafficStats&&this.trafficStats.peer_delay.find(dt=>dt.peer_uid===c);if(ge&&("opus"!==ge.codec&&"aac"!==ge.codec&&"PCMU"!==ge.codec&&"PCMA"!==ge.codec&&"G722"!==ge.codec||(I.codecType=ge.codec),ge.outputLevel?I.receiveLevel=Math.round(32767*ge.outputLevel):B&&(I.receiveLevel=Math.round(32767*B.getVolumeLevel())),I.receiveBytes=ge.bytes,I.receivePackets=ge.packets,I.receivePacketsLost=ge.packetsLost,I.packetLossRate=I.receivePacketsLost/(I.receivePackets+I.receivePacketsLost),I.receiveBitrate=A?8*Math.max(0,I.receiveBytes-A.receiveBytes):0,I.totalDuration=A?A.totalDuration+1:1,I.totalFreezeTime=A?A.totalFreezeTime:0,I.freezeRate=I.totalFreezeTime/I.totalDuration,I.receiveDelay=ge.jitterBufferMs,I.totalDuration>10&&t0.isRemoteAudioFreeze(B)&&(I.totalFreezeTime+=1)),Se){"H264"!==Se.codec&&"VP8"!==Se.codec&&"VP9"!==Se.codec&&"AV1X"!==Se.codec&&"AV1"!==Se.codec||(R.codecType=Se.codec),R.receiveBytes=Se.bytes,R.receiveBitrate=v?8*Math.max(0,R.receiveBytes-v.receiveBytes):0,R.decodeFrameRate=Se.decodeFrameRate<0?0:Se.decodeFrameRate,R.renderFrameRate=Se.decodeFrameRate<0?0:Se.decodeFrameRate,Se.outputFrame&&(R.renderFrameRate=Se.outputFrame.frameRate),Se.receivedFrame?(R.receiveFrameRate=Se.receivedFrame.frameRate,R.receiveResolutionHeight=Se.receivedFrame.height,R.receiveResolutionWidth=Se.receivedFrame.width):q&&(R.receiveResolutionHeight=q._videoHeight||0,R.receiveResolutionWidth=q._videoWidth||0),void 0!==Se.framesRateFirefox&&(R.receiveFrameRate=Math.round(Se.framesRateFirefox)),R.receivePackets=Se.packets,R.receivePacketsLost=Se.packetsLost,R.packetLossRate=R.receivePacketsLost/(R.receivePackets+R.receivePacketsLost),R.totalDuration=v?v.totalDuration+1:1,R.totalFreezeTime=v?v.totalFreezeTime:0,R.receiveDelay=Se.jitterBufferMs||0;const dt=!!te&&o.getRemoteVideoIsReady(te);q&&dt&&t0.isRemoteVideoFreeze(q,Se,S)&&(R.totalFreezeTime+=1),R.freezeRate=R.totalFreezeTime/R.totalDuration}Me&&(I.end2EndDelay=Me.B_ad,R.end2EndDelay=Me.B_vd,I.transportDelay=Me.B_ed,R.transportDelay=Me.B_ed,I.currentPacketLossRate=Me.B_ealr4/100,R.currentPacketLossRate=Me.B_evlr4/100,O.uplinkNetworkQuality=Me.B_punq?Me.B_punq:0,O.downlinkNetworkQuality=Me.B_pdnq?Me.B_pdnq:0),this.remoteStats.set(c,{audioStats:I,videoStats:R,videoPcStats:Se,networkStats:O}),B&&this.exceptionMonitor.setRemoteAudioStats(B,I),q&&this.exceptionMonitor.setRemoteVideoStats(q,R)})}}function L7(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function H3(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?L7(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):L7(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function qK(r){if(!r.address||!r.tcp)throw new Le(Te.UNEXPECTED_RESPONSE,"Invalid address format ".concat(r));return r.address.match(/^[\.\:\d]+$/)?"".concat(r.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(se.info("Cannot recognized as IP address ".concat(r.address,". Used As Host instead")),"".concat(r.address,":").concat(r.tcp))}function AL(r){return r.match(/^[\.\:\d]+$/)?"".concat(r.replace(/[^\d]/g,"-"),".").concat(xt("TURN_DOMAIN")):(se.info("Cannot recognized as IP address ".concat(r,". Used As Host instead")),r)}function B7(r,o){const a=xt("GATEWAY_DOMAINS");let c=a[1]&&-1!==o.indexOf(a[1])?1:0;return r.addresses=r.addresses||[],{gatewayAddrs:r.addresses.map(p=>p.domain_prefix?{address:"".concat(p.domain_prefix,".").concat(a[c++%a.length],":").concat(p.port)}:p.ip.match(/^[\.\:\d]+$/)?{ip:p.ip,port:p.port,address:"".concat(p.ip.replace(/[^\d]/g,"-"),".").concat(a[c++%a.length],":").concat(p.port)}:(se.info("Cannot recognized as IP address ".concat(p.ip,". Used As Host instead")),{ip:p.ip,port:p.port,address:"".concat(p.ip,":").concat(p.port)})),uid:r.uid,cid:r.cid,vid:r.detail&&r.detail[8],uni_lbs_ip:r.detail&&r.detail[1],res:r,csIp:r.detail&&r.detail[502]}}function Zy(r){return"number"==typeof r?r:r.exact||r.ideal||r.max||r.min||0}function O5(r){const o=r._encoderConfig;if(!o)return{};const a={resolution:o.width&&o.height?"".concat(Zy(o.width),"x").concat(Zy(o.height)):void 0,maxVideoBW:o.bitrateMax,minVideoBW:o.bitrateMin};return"number"==typeof o.frameRate?(a.maxFrameRate=o.frameRate,a.minFrameRate=o.frameRate):o.frameRate&&(a.maxFrameRate=o.frameRate.max||o.frameRate.ideal||o.frameRate.exact||o.frameRate.min,a.minFrameRate=o.frameRate.min||o.frameRate.ideal||o.frameRate.exact||o.frameRate.max),a}function k5(r,o,a){var c;const p=o.videoSend.find(A=>A.ssrc===r);if(!p)return null;const _=null==a||null===(c=a.videoSend.find(A=>A.ssrc===r))||void 0===c?void 0:c.inputFrame,m={id:_s(10,""),timestamp:new Date(o.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:p.ssrc.toString()};return p.inputFrame&&(_&&p.inputFrame.height===_.height||(m.A_fhi=p.inputFrame.height?p.inputFrame.height.toString():"0"),_&&p.inputFrame.width===_.width||(m.A_fwi=p.inputFrame.width?p.inputFrame.width.toString():"0"),_&&p.inputFrame.frameRate===_.frameRate||(m.A_fri=p.inputFrame.frameRate?p.inputFrame.frameRate.toString():"0")),m}function G3(r){return r>=0&&r<.17?1:r>=.17&&r<.36?2:r>=.36&&r<.59?3:r>=.59&&r<=1?4:r>1?5:0}function W3(r,o){let a,c,p;switch(o){case ea.CHOOSE_SERVER:a=4096,c="choose server";break;case ea.CLOUD_PROXY:a=1048576,c="proxy";break;case ea.CLOUD_PROXY_5:a=4194304,c="proxy5";break;case ea.CLOUD_PROXY_FALLBACK:a=4194310,c="proxy fallback";break;default:throw new Le(Te.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:r.detail&&r.detail[502],retry:!1})}if(r.response_body.forEach(_=>{_.buffer&&_.buffer.flag===a&&(p={code:_.buffer.code,addresses:(_.buffer.edges_services||[]).map(m=>H3(H3({},m),{},{ticket:_.buffer.cert})),server_ts:r.enter_ts,uid:_.buffer.uid,cid:_.buffer.cid,cname:_.buffer.cname,detail:H3(H3({},_.buffer.detail),r.detail),flag:_.buffer.flag,opid:r.opid})}),!p)throw new Le(Te.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(c," from multi unilbs response"),{csIp:r.detail&&r.detail[502]});return p}function F7(r,o){return yL.apply(this,arguments)}function yL(){return yL=F(function*(r,o){return yield qn.all(r.addresses.map(function(){var a=F(function*(c){return{address:AL(c.ip),tcpport:c.port,udpport:c.port,username:o&&xt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?o.toString():Qs.username,password:o&&xt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?yield WK(o.toString()):Qs.password}});return function(c){return a.apply(this,arguments)}}()))}),yL.apply(this,arguments)}function U7(r,o){const a=o._videoHeight||o.getMediaStreamTrack(!0).getSettings().height;return a?a/Zy(r.height):4}function pv(r){let{candidateType:o,relayProtocol:a,type:c,address:p,port:_,protocol:m}=r;return"local-candidate"===c?{candidateType:o,relayProtocol:a,protocol:m}:{candidateType:o,relayProtocol:a,address:p,port:_,protocol:m}}function K3(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function bT(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?K3(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):K3(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function Jk(r){return window.TextEncoder?(new TextEncoder).encode(r).length:r.length}function Ic(r){return new qn(o=>{window.setTimeout(o,r)})}function YK(r){const o=new Le(Te.TIMEOUT,"timeout");return new qn((a,c)=>{window.setTimeout(()=>c(o),r)})}function _s(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,o=arguments.length>1?arguments[1]:void 0;const a=Math.random().toString(16).substr(2,r).toLowerCase();return a.length===r?"".concat(o).concat(a):"".concat(o).concat(a)+_s(r-a.length,"")}function V7(){return _s(32,"").toUpperCase()}const z3=()=>{};function j7(r){return new qn((o,a)=>{let c=!1;const p=document.createElement("video");p.setAttribute("autoplay",""),p.setAttribute("muted",""),p.muted=!0,p.autoplay=!0,p.setAttribute("playsinline",""),p.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(p);const _=yc()?"canplay":"playing";p.addEventListener(_,()=>{const m=p.videoWidth,A=p.videoHeight;!m&&Xo()||(c=!0,p.srcObject=null,p.remove(),o([m,A]))}),p.srcObject=new MediaStream([r]),p.play().catch(z3),setTimeout(()=>{c||(p.srcObject=null,p.remove(),o([p.videoWidth,p.videoHeight]))},4e3)})}function ST(r){return qn.all(r.map(o=>o.then(a=>{throw a},a=>a))).then(o=>{throw o},o=>o)}function Ip(r,o){for(var a=arguments.length,c=new Array(a>2?a-2:0),p=2;p<a;p++)c[p-2]=arguments[p];return 0===r.getListeners(o).length?qn.reject(new Le(Te.UNEXPECTED_ERROR,"can not emit promise")):new qn((_,m)=>{r.emit(o,...c,_,m)})}function Qo(r,o){if(0===r.getListeners(o).length)return qn.resolve();for(var a=arguments.length,c=new Array(a>2?a-2:0),p=2;p<a;p++)c[p-2]=arguments[p];return Ip(r,o,...c)}function eE(r,o){if(0===r.getListeners(o).length)return null;for(var a=arguments.length,c=new Array(a>2?a-2:0),p=2;p<a;p++)c[p-2]=arguments[p];return CT(r,o,...c)}function CT(r,o){let a=null,c=null;for(var p=arguments.length,_=new Array(p>2?p-2:0),m=2;m<p;m++)_[m-2]=arguments[m];if(r.emit(o,..._,A=>{a=A},A=>{c=A}),null!==c)throw c;if(null===a)throw new Le(Te.UNEXPECTED_ERROR,"handler is not sync");return a}function q3(r,o){const a=r.indexOf(o);-1!==a&&r.splice(a,1)}function Q7(r){const o=[];return r.forEach(a=>{-1===o.indexOf(a)&&o.push(a)}),o}function Ph(r){qn.resolve().then(r)}function nc(r){return JSON.parse(JSON.stringify(r))}const H7={};function Xk(r,o){H7[o]||(H7[o]=!0,r())}function EL(r){const o=window.atob(r),a=new Uint8Array(new ArrayBuffer(o.length));for(let c=0;c<o.length;c+=1)a[c]=o.charCodeAt(c);return a}function Zk(r){let o="";for(let a=0;a<r.length;a+=1)o+=String.fromCharCode(r[a]);return window.btoa(o)}const G7=new class{constructor(){J(this,"fnMap",new Map)}throttleByKey(r,o,a,c){for(var p=arguments.length,_=new Array(p>4?p-4:0),m=4;m<p;m++)_[m-4]=arguments[m];if(this.fnMap.has(o)){const A=this.fnMap.get(o);if(A.threshold!==a){A.fn(...A.args),clearTimeout(A.timer);const v=window.setTimeout(()=>{const S=this.fnMap.get(o);S&&S.fn(...S.args),this.fnMap.delete(o)},a);this.fnMap.set(o,{fn:r,threshold:a,timer:v,args:_,skipFn:c})}else A.skipFn&&A.skipFn(...A.args),this.fnMap.set(o,bT(bT({},A),{},{fn:r,args:_,skipFn:c}))}else{const A=window.setTimeout(()=>{const v=this.fnMap.get(o);v&&v.fn(...v.args),this.fnMap.delete(o)},a);this.fnMap.set(o,{fn:r,threshold:a,timer:A,args:_,skipFn:c})}}},P5=G7.throttleByKey.bind(G7),IT=function(){var r=F(function*(o){let{fragementLength:a,referenceList:c,asyncMapHandler:p,allFailedhandler:_,promisesCollector:m}=o,A=0;const v=a;let S,I=0;const R=function(){var O=F(function*(){const B=(()=>{const q=A*v;return c.slice(q,q+v).map(p)})();m&&m.push(...B);try{S=yield ST(B)}catch(q){if(I+=v,A++,!(I>=c.length))return void(yield R());_(q)}B.forEach(q=>q.cancel())});return function(){return O.apply(this,arguments)}}();return yield R(),S});return function(a){return r.apply(this,arguments)}}();function W7(r){return"object"==typeof r&&null!==r&&!(r instanceof RegExp)}var $K=rs,JK=us("iterator"),K7=!$K(function(){var r=new URL("b?a=1&b=2&c=3","http://a"),o=r.searchParams,a="";return r.pathname="c%20d",o.forEach(function(c,p){o.delete("b"),a+=p+c}),!r.toJSON||!o.sort||"http://a/c%20d?a=1&c=3"!==r.href||"3"!==o.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!o[JK]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host}),Y3=xc,z7=Lc,hv=rs,bg=Vc,Sg=Da,XK=n_,N5=nn,wc=_m,Uu=Object.assign,q7=Object.defineProperty,Qf=Fo([].concat),ZK=!Uu||hv(function(){if(Y3&&1!==Uu({b:1},Uu(q7({},"a",{enumerable:!0,get:function(){q7(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var r={},o={},a=Symbol(),c="abcdefghijklmnopqrst";return r[a]=7,c.split("").forEach(function(p){o[p]=p}),7!=Uu({},r)[a]||bg(Uu({},o)).join("")!=c})?function(r,o){for(var a=N5(r),c=arguments.length,p=1,_=Sg.f,m=XK.f;c>p;)for(var A,v=wc(arguments[p++]),S=_?Qf(bg(v),_(v)):bg(v),I=S.length,R=0;I>R;)A=S[R++],Y3&&!z7(m,v,A)||(a[A]=v[A]);return a}:Uu,Y7=ll,ez=VA,$7=ep,tz=Lc,x5=nn,eP=function(r,o,a,c){try{return c?o(Y7(a)[0],a[1]):o(a)}catch(p){ez(r,"throw",p)}},L5=sD,$3=sy,nz=np,J7=Gy,rz=pI,iz=UA,X7=$r.Array,wT=Fo,tP=2147483647,J3=/[^\0-\u007E]/,nP=/[.\u3002\uFF0E\uFF61]/g,B5="Overflow: input needs wider integers to process",bL=$r.RangeError,oz=wT(nP.exec),TT=Math.floor,F5=String.fromCharCode,Z7=wT("".charCodeAt),eH=wT([].join),fv=wT([].push),sz=wT("".replace),X3=wT("".split),az=wT("".toLowerCase),U5=function(r){return r+22+75*(r<26)},tH=function(r,o,a){var c=0;for(r=a?TT(r/700):r>>1,r+=TT(r/o);r>455;)r=TT(r/35),c+=36;return TT(c+36*r/(r+38))},nH=function(r){var o,a,c=[],p=(r=function(de){for(var ge=[],Se=0,Me=de.length;Se<Me;){var dt=Z7(de,Se++);if(dt>=55296&&dt<=56319&&Se<Me){var kt=Z7(de,Se++);56320==(64512&kt)?fv(ge,((1023&dt)<<10)+(1023&kt)+65536):(fv(ge,dt),Se--)}else fv(ge,dt)}return ge}(r)).length,_=128,m=0,A=72;for(o=0;o<r.length;o++)(a=r[o])<128&&fv(c,F5(a));var v=c.length,S=v;for(v&&fv(c,"-");S<p;){var I=tP;for(o=0;o<r.length;o++)(a=r[o])>=_&&a<I&&(I=a);var R=S+1;if(I-_>TT((tP-m)/R))throw bL(B5);for(m+=(I-_)*R,_=I,o=0;o<r.length;o++){if((a=r[o])<_&&++m>tP)throw bL(B5);if(a==_){for(var O=m,B=36;;){var q=B<=A?1:B>=A+26?26:B-A;if(O<q)break;var z=O-q,te=36-q;fv(c,F5(U5(q+z%te))),O=TT(z/te),B+=36}fv(c,F5(U5(O))),A=tH(m,R,S==v),m=0,S++}}m++,_++}return eH(c,"")},Z3=$r.TypeError,SL=Yn,CL=$r,eV=Ml,IL=Lc,Rd=Fo,V5=K7,j5=k_,rH=Bb,cz=Af,iH=MF,rP=Vm,iP=N_,wL=bs,oH=Gi,lz=ep,sH=uh,aH=ll,oP=Pl,wp=dh,cH=ff,TL=Xu,Q5=pI,lH=UA,RT=function(r,o){if(r<o)throw Z3("Not enough arguments");return r},H5=oT,G5=us("iterator"),tV="URLSearchParams",uH="URLSearchParamsIterator",dH=rP.set,Cg=rP.getterFor(tV),uz=rP.getterFor(uH),pH=eV("fetch"),RL=eV("Request"),sP=eV("Headers"),W5=RL&&RL.prototype,K5=sP&&sP.prototype,nV=CL.RegExp,dz=CL.TypeError,hH=CL.decodeURIComponent,pz=CL.encodeURIComponent,hz=Rd("".charAt),fH=Rd([].join),DT=Rd([].push),z5=Rd("".replace),fz=Rd([].shift),mH=Rd([].splice),aP=Rd("".split),q5=Rd("".slice),gH=/\+/g,rV=Array(4),_H=function(r){return rV[r-1]||(rV[r-1]=nV("((?:%[\\da-f]{2}){"+r+"})","gi"))},mz=function(r){try{return hH(r)}catch{return r}},Y5=function(r){var o=z5(r,gH," "),a=4;try{return hH(o)}catch{for(;a;)o=z5(o,_H(a--),mz);return o}},$5=/[!'()~]|%20/g,iV={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},J5=function(r){return iV[r]},X5=function(r){return z5(pz(r),$5,J5)},oV=iH(function(r,o){dH(this,{type:uH,iterator:Q5(Cg(r).entries),kind:o})},"Iterator",function(){var r=uz(this),o=r.kind,a=r.iterator.next(),c=a.value;return a.done||(a.value="keys"===o?c.key:"values"===o?c.value:[c.key,c.value]),a},!0),cP=function(r){this.entries=[],this.url=null,void 0!==r&&(oP(r)?this.parseObject(r):this.parseQuery("string"==typeof r?"?"===hz(r,0)?q5(r,1):r:wp(r)))};cP.prototype={type:tV,bindURL:function(r){this.url=r,this.update()},parseObject:function(r){var o,a,c,p,_,m,A,v=lH(r);if(v)for(a=(o=Q5(r,v)).next;!(c=IL(a,o)).done;){if(_=(p=Q5(aH(c.value))).next,(m=IL(_,p)).done||(A=IL(_,p)).done||!IL(_,p).done)throw dz("Expected sequence with length 2");DT(this.entries,{key:wp(m.value),value:wp(A.value)})}else for(var S in r)oH(r,S)&&DT(this.entries,{key:S,value:wp(r[S])})},parseQuery:function(r){if(r)for(var o,a,c=aP(r,"&"),p=0;p<c.length;)(o=c[p++]).length&&(a=aP(o,"="),DT(this.entries,{key:Y5(fz(a)),value:Y5(fH(a,"="))}))},serialize:function(){for(var r,o=this.entries,a=[],c=0;c<o.length;)r=o[c++],DT(a,X5(r.key)+"="+X5(r.value));return fH(a,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var sV=function(){iP(this,DL),dH(this,new cP(arguments.length>0?arguments[0]:void 0))},DL=sV.prototype;if(rH(DL,{append:function(r,o){RT(arguments.length,2);var a=Cg(this);DT(a.entries,{key:wp(r),value:wp(o)}),a.updateURL()},delete:function(r){RT(arguments.length,1);for(var o=Cg(this),a=o.entries,c=wp(r),p=0;p<a.length;)a[p].key===c?mH(a,p,1):p++;o.updateURL()},get:function(r){RT(arguments.length,1);for(var o=Cg(this).entries,a=wp(r),c=0;c<o.length;c++)if(o[c].key===a)return o[c].value;return null},getAll:function(r){RT(arguments.length,1);for(var o=Cg(this).entries,a=wp(r),c=[],p=0;p<o.length;p++)o[p].key===a&&DT(c,o[p].value);return c},has:function(r){RT(arguments.length,1);for(var o=Cg(this).entries,a=wp(r),c=0;c<o.length;)if(o[c++].key===a)return!0;return!1},set:function(r,o){RT(arguments.length,1);for(var a,c=Cg(this),p=c.entries,_=!1,m=wp(r),A=wp(o),v=0;v<p.length;v++)(a=p[v]).key===m&&(_?mH(p,v--,1):(_=!0,a.value=A));_||DT(p,{key:m,value:A}),c.updateURL()},sort:function(){var r=Cg(this);H5(r.entries,function(o,a){return o.key>a.key?1:-1}),r.updateURL()},forEach:function(r){for(var o,a=Cg(this).entries,c=lz(r,arguments.length>1?arguments[1]:void 0),p=0;p<a.length;)c((o=a[p++]).value,o.key,this)},keys:function(){return new oV(this,"keys")},values:function(){return new oV(this,"values")},entries:function(){return new oV(this,"entries")}},{enumerable:!0}),j5(DL,G5,DL.entries,{name:"entries"}),j5(DL,"toString",function(){return Cg(this).serialize()},{enumerable:!0}),cz(sV,tV),SL({global:!0,forced:!V5},{URLSearchParams:sV}),!V5&&wL(sP)){var vH=Rd(K5.has),gz=Rd(K5.set),AH=function(r){if(oP(r)){var o,a=r.body;if(sH(a)===tV)return o=r.headers?new sP(r.headers):new sP,vH(o,"content-type")||gz(o,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),cH(r,{body:TL(0,wp(a)),headers:TL(0,o)})}return r};if(wL(pH)&&SL({global:!0,enumerable:!0,forced:!0},{fetch:function(r){return pH(r,arguments.length>1?AH(arguments[1]):{})}}),wL(RL)){var OL=function(r){return iP(this,W5),new RL(r,arguments.length>1?AH(arguments[1]):{})};W5.constructor=OL,OL.prototype=W5,SL({global:!0,forced:!0},{Request:OL})}}var Mh,Z5=Yn,aV=xc,e8=K7,cV=$r,t8=ep,Jc=Fo,n8=NA.f,lP=k_,_z=N_,r8=Gi,kL=ZK,OT=function(r){var o=x5(r),a=$3(this),c=arguments.length,p=c>1?arguments[1]:void 0,_=void 0!==p;_&&(p=$7(p,c>2?arguments[2]:void 0));var m,A,v,S,I,R,O=iz(o),B=0;if(!O||this==X7&&L5(O))for(m=nz(o),A=a?new this(m):X7(m);m>B;B++)R=_?p(o[B],B):o[B],J7(A,B,R);else for(I=(S=rz(o,O)).next,A=a?new this:[];!(v=tz(I,S)).done;B++)R=_?eP(S,p,[v.value,B],!0):v.value,J7(A,B,R);return A.length=B,A},Hf=Ex,EH=zI.codeAt,mv=dh,i8=Af,PL={URLSearchParams:sV,getState:Cg},bH=Vm.set,ML=Vm.getterFor("URL"),uV=PL.URLSearchParams,vz=PL.getState,uP=cV.URL,dV=cV.TypeError,NL=cV.parseInt,SH=Math.floor,xL=Math.pow,Tp=Jc("".charAt),Dd=Jc(/./.exec),dP=Jc([].join),CH=Jc(1..toString),IH=Jc([].pop),kT=Jc([].push),o8=Jc("".replace),wH=Jc([].shift),TH=Jc("".split),PT=Jc("".slice),LL=Jc("".toLowerCase),s8=Jc([].unshift),pV="Invalid scheme",n0="Invalid host",hV="Invalid port",RH=/[a-z]/i,Az=/[\d+-.a-z]/i,fV=/\d/,DH=/^0x/i,OH=/^[0-7]+$/,a8=/^\d+$/,mV=/^[\da-f]+$/i,yz=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Ez=/[\0\t\n\r #/:<>?@[\\\]^|]/,bz=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Sz=/[\t\n\r]/g,pP=function(r){var o,a,c,p;if("number"==typeof r){for(o=[],a=0;a<4;a++)s8(o,r%256),r=SH(r/256);return dP(o,".")}if("object"==typeof r){for(o="",c=function(_){for(var m=null,A=1,v=null,S=0,I=0;I<8;I++)0!==_[I]?(S>A&&(m=v,A=S),v=null,S=0):(null===v&&(v=I),++S);return S>A&&(m=v,A=S),m}(r),a=0;a<8;a++)p&&0===r[a]||(p&&(p=!1),c===a?(o+=a?":":"::",p=!0):(o+=CH(r[a],16),a<7&&(o+=":")));return"["+o+"]"}return r},MT={},c8=kL({},MT,{" ":1,'"':1,"<":1,">":1,"`":1}),l8=kL({},c8,{"#":1,"?":1,"{":1,"}":1}),gV=kL({},l8,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Od=function(r,o){var a=EH(r,0);return a>32&&a<127&&!r8(o,r)?r:encodeURIComponent(r)},hP={ftp:21,file:null,http:80,https:443,ws:80,wss:443},fP=function(r,o){var a;return 2==r.length&&Dd(RH,Tp(r,0))&&(":"==(a=Tp(r,1))||!o&&"|"==a)},u8=function(r){var o;return r.length>1&&fP(PT(r,0,2))&&(2==r.length||"/"===(o=Tp(r,2))||"\\"===o||"?"===o||"#"===o)},kH=function(r){return"."===r||"%2e"===LL(r)},d8={},p8={},_V={},h8={},f8={},vV={},m8={},g8={},BL={},FL={},AV={},yV={},EV={},bV={},_8={},SV={},NT={},Ig={},v8={},r0={},gv={},CV=function(r,o,a){var c,p,_,m=mv(r);if(o){if(p=this.parse(m))throw dV(p);this.searchParams=null}else{if(void 0!==a&&(c=new CV(a,!0)),p=this.parse(m,null,c))throw dV(p);(_=vz(new uV)).bindURL(this),this.searchParams=_}};CV.prototype={type:"URL",parse:function(r,o,a){var c,p,_,m,A,v=this,S=o||d8,I=0,R="",O=!1,B=!1,q=!1;for(r=mv(r),o||(v.scheme="",v.username="",v.password="",v.host=null,v.port=null,v.path=[],v.query=null,v.fragment=null,v.cannotBeABaseURL=!1,r=o8(r,bz,"")),r=o8(r,Sz,""),c=OT(r);I<=c.length;){switch(p=c[I],S){case d8:if(!p||!Dd(RH,p)){if(o)return pV;S=_V;continue}R+=LL(p),S=p8;break;case p8:if(p&&(Dd(Az,p)||"+"==p||"-"==p||"."==p))R+=LL(p);else{if(":"!=p){if(o)return pV;R="",S=_V,I=0;continue}if(o&&(v.isSpecial()!=r8(hP,R)||"file"==R&&(v.includesCredentials()||null!==v.port)||"file"==v.scheme&&!v.host))return;if(v.scheme=R,o)return void(v.isSpecial()&&hP[v.scheme]==v.port&&(v.port=null));R="","file"==v.scheme?S=bV:v.isSpecial()&&a&&a.scheme==v.scheme?S=h8:v.isSpecial()?S=g8:"/"==c[I+1]?(S=f8,I++):(v.cannotBeABaseURL=!0,kT(v.path,""),S=v8)}break;case _V:if(!a||a.cannotBeABaseURL&&"#"!=p)return pV;if(a.cannotBeABaseURL&&"#"==p){v.scheme=a.scheme,v.path=Hf(a.path),v.query=a.query,v.fragment="",v.cannotBeABaseURL=!0,S=gv;break}S="file"==a.scheme?bV:vV;continue;case h8:if("/"!=p||"/"!=c[I+1]){S=vV;continue}S=BL,I++;break;case f8:if("/"==p){S=FL;break}S=Ig;continue;case vV:if(v.scheme=a.scheme,p==Mh)v.username=a.username,v.password=a.password,v.host=a.host,v.port=a.port,v.path=Hf(a.path),v.query=a.query;else if("/"==p||"\\"==p&&v.isSpecial())S=m8;else if("?"==p)v.username=a.username,v.password=a.password,v.host=a.host,v.port=a.port,v.path=Hf(a.path),v.query="",S=r0;else{if("#"!=p){v.username=a.username,v.password=a.password,v.host=a.host,v.port=a.port,v.path=Hf(a.path),v.path.length--,S=Ig;continue}v.username=a.username,v.password=a.password,v.host=a.host,v.port=a.port,v.path=Hf(a.path),v.query=a.query,v.fragment="",S=gv}break;case m8:if(!v.isSpecial()||"/"!=p&&"\\"!=p){if("/"!=p){v.username=a.username,v.password=a.password,v.host=a.host,v.port=a.port,S=Ig;continue}S=FL}else S=BL;break;case g8:if(S=BL,"/"!=p||"/"!=Tp(R,I+1))continue;I++;break;case BL:if("/"!=p&&"\\"!=p){S=FL;continue}break;case FL:if("@"==p){O&&(R="%40"+R),O=!0,_=OT(R);for(var z=0;z<_.length;z++){var te=_[z];if(":"!=te||q){var de=Od(te,gV);q?v.password+=de:v.username+=de}else q=!0}R=""}else if(p==Mh||"/"==p||"?"==p||"#"==p||"\\"==p&&v.isSpecial()){if(O&&""==R)return"Invalid authority";I-=OT(R).length+1,R="",S=AV}else R+=p;break;case AV:case yV:if(o&&"file"==v.scheme){S=SV;continue}if(":"!=p||B){if(p==Mh||"/"==p||"?"==p||"#"==p||"\\"==p&&v.isSpecial()){if(v.isSpecial()&&""==R)return n0;if(o&&""==R&&(v.includesCredentials()||null!==v.port))return;if(m=v.parseHost(R))return m;if(R="",S=NT,o)return;continue}"["==p?B=!0:"]"==p&&(B=!1),R+=p}else{if(""==R)return n0;if(m=v.parseHost(R))return m;if(R="",S=EV,o==yV)return}break;case EV:if(!Dd(fV,p)){if(p==Mh||"/"==p||"?"==p||"#"==p||"\\"==p&&v.isSpecial()||o){if(""!=R){var ge=NL(R,10);if(ge>65535)return hV;v.port=v.isSpecial()&&ge===hP[v.scheme]?null:ge,R=""}if(o)return;S=NT;continue}return hV}R+=p;break;case bV:if(v.scheme="file","/"==p||"\\"==p)S=_8;else{if(!a||"file"!=a.scheme){S=Ig;continue}if(p==Mh)v.host=a.host,v.path=Hf(a.path),v.query=a.query;else if("?"==p)v.host=a.host,v.path=Hf(a.path),v.query="",S=r0;else{if("#"!=p){u8(dP(Hf(c,I),""))||(v.host=a.host,v.path=Hf(a.path),v.shortenPath()),S=Ig;continue}v.host=a.host,v.path=Hf(a.path),v.query=a.query,v.fragment="",S=gv}}break;case _8:if("/"==p||"\\"==p){S=SV;break}a&&"file"==a.scheme&&!u8(dP(Hf(c,I),""))&&(fP(a.path[0],!0)?kT(v.path,a.path[0]):v.host=a.host),S=Ig;continue;case SV:if(p==Mh||"/"==p||"\\"==p||"?"==p||"#"==p){if(!o&&fP(R))S=Ig;else if(""==R){if(v.host="",o)return;S=NT}else{if(m=v.parseHost(R))return m;if("localhost"==v.host&&(v.host=""),o)return;R="",S=NT}continue}R+=p;break;case NT:if(v.isSpecial()){if(S=Ig,"/"!=p&&"\\"!=p)continue}else if(o||"?"!=p)if(o||"#"!=p){if(p!=Mh&&(S=Ig,"/"!=p))continue}else v.fragment="",S=gv;else v.query="",S=r0;break;case Ig:if(p==Mh||"/"==p||"\\"==p&&v.isSpecial()||!o&&("?"==p||"#"==p)){if(".."===(A=LL(A=R))||"%2e."===A||".%2e"===A||"%2e%2e"===A?(v.shortenPath(),"/"==p||"\\"==p&&v.isSpecial()||kT(v.path,"")):kH(R)?"/"==p||"\\"==p&&v.isSpecial()||kT(v.path,""):("file"==v.scheme&&!v.path.length&&fP(R)&&(v.host&&(v.host=""),R=Tp(R,0)+":"),kT(v.path,R)),R="","file"==v.scheme&&(p==Mh||"?"==p||"#"==p))for(;v.path.length>1&&""===v.path[0];)wH(v.path);"?"==p?(v.query="",S=r0):"#"==p&&(v.fragment="",S=gv)}else R+=Od(p,l8);break;case v8:"?"==p?(v.query="",S=r0):"#"==p?(v.fragment="",S=gv):p!=Mh&&(v.path[0]+=Od(p,MT));break;case r0:o||"#"!=p?p!=Mh&&("'"==p&&v.isSpecial()?v.query+="%27":v.query+="#"==p?"%23":Od(p,MT)):(v.fragment="",S=gv);break;case gv:p!=Mh&&(v.fragment+=Od(p,c8))}I++}},parseHost:function(r){var o,a,c;if("["==Tp(r,0)){if("]"!=Tp(r,r.length-1)||!(o=function(p){var _,m,A,v,S,I,R,O=[0,0,0,0,0,0,0,0],B=0,q=null,z=0,te=function(){return Tp(p,z)};if(":"==te()){if(":"!=Tp(p,1))return;z+=2,q=++B}for(;te();){if(8==B)return;if(":"!=te()){for(_=m=0;m<4&&Dd(mV,te());)_=16*_+NL(te(),16),z++,m++;if("."==te()){if(0==m||(z-=m,B>6))return;for(A=0;te();){if(v=null,A>0){if(!("."==te()&&A<4))return;z++}if(!Dd(fV,te()))return;for(;Dd(fV,te());){if(S=NL(te(),10),null===v)v=S;else{if(0==v)return;v=10*v+S}if(v>255)return;z++}O[B]=256*O[B]+v,2!=++A&&4!=A||B++}if(4!=A)return;break}if(":"==te()){if(z++,!te())return}else if(te())return;O[B++]=_}else{if(null!==q)return;z++,q=++B}}if(null!==q)for(I=B-q,B=7;0!=B&&I>0;)R=O[B],O[B--]=O[q+I-1],O[q+--I]=R;else if(8!=B)return;return O}(PT(r,1,-1))))return n0;this.host=o}else if(this.isSpecial()){if(r=function(r){var o,a,c=[],p=X3(sz(az(r),nP,"."),".");for(o=0;o<p.length;o++)fv(c,oz(J3,a=p[o])?"xn--"+nH(a):a);return eH(c,".")}(r),Dd(yz,r)||null===(o=function(p){var _,m,A,v,S,I,R,O=TH(p,".");if(O.length&&""==O[O.length-1]&&O.length--,(_=O.length)>4)return p;for(m=[],A=0;A<_;A++){if(""==(v=O[A]))return p;if(S=10,v.length>1&&"0"==Tp(v,0)&&(S=Dd(DH,v)?16:8,v=PT(v,8==S?1:2)),""===v)I=0;else{if(!Dd(10==S?a8:8==S?OH:mV,v))return p;I=NL(v,S)}kT(m,I)}for(A=0;A<_;A++)if(I=m[A],A==_-1){if(I>=xL(256,5-_))return null}else if(I>255)return null;for(R=IH(m),A=0;A<m.length;A++)R+=m[A]*xL(256,3-A);return R}(r)))return n0;this.host=o}else{if(Dd(Ez,r))return n0;for(o="",a=OT(r),c=0;c<a.length;c++)o+=Od(a[c],MT);this.host=o}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return r8(hP,this.scheme)},shortenPath:function(){var r=this.path,o=r.length;!o||"file"==this.scheme&&1==o&&fP(r[0],!0)||r.length--},serialize:function(){var r=this,o=r.scheme,a=r.username,c=r.password,p=r.host,_=r.port,m=r.path,A=r.query,v=r.fragment,S=o+":";return null!==p?(S+="//",r.includesCredentials()&&(S+=a+(c?":"+c:"")+"@"),S+=pP(p),null!==_&&(S+=":"+_)):"file"==o&&(S+="//"),S+=r.cannotBeABaseURL?m[0]:m.length?"/"+dP(m,"/"):"",null!==A&&(S+="?"+A),null!==v&&(S+="#"+v),S},setHref:function(r){var o=this.parse(r);if(o)throw dV(o);this.searchParams.update()},getOrigin:function(){var r=this.scheme,o=this.port;if("blob"==r)try{return new xT(r.path[0]).origin}catch{return"null"}return"file"!=r&&this.isSpecial()?r+"://"+pP(this.host)+(null!==o?":"+o:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(r){this.parse(mv(r)+":",d8)},getUsername:function(){return this.username},setUsername:function(r){var o=OT(mv(r));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var a=0;a<o.length;a++)this.username+=Od(o[a],gV)}},getPassword:function(){return this.password},setPassword:function(r){var o=OT(mv(r));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var a=0;a<o.length;a++)this.password+=Od(o[a],gV)}},getHost:function(){var r=this.host,o=this.port;return null===r?"":null===o?pP(r):pP(r)+":"+o},setHost:function(r){this.cannotBeABaseURL||this.parse(r,AV)},getHostname:function(){var r=this.host;return null===r?"":pP(r)},setHostname:function(r){this.cannotBeABaseURL||this.parse(r,yV)},getPort:function(){var r=this.port;return null===r?"":mv(r)},setPort:function(r){this.cannotHaveUsernamePasswordPort()||(""==(r=mv(r))?this.port=null:this.parse(r,EV))},getPathname:function(){var r=this.path;return this.cannotBeABaseURL?r[0]:r.length?"/"+dP(r,"/"):""},setPathname:function(r){this.cannotBeABaseURL||(this.path=[],this.parse(r,NT))},getSearch:function(){var r=this.query;return r?"?"+r:""},setSearch:function(r){""==(r=mv(r))?this.query=null:("?"==Tp(r,0)&&(r=PT(r,1)),this.query="",this.parse(r,r0)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var r=this.fragment;return r?"#"+r:""},setHash:function(r){""!=(r=mv(r))?("#"==Tp(r,0)&&(r=PT(r,1)),this.fragment="",this.parse(r,gv)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var xT=function(r){var o=_z(this,UL),c=bH(o,new CV(r,!1,arguments.length>1?arguments[1]:void 0));aV||(o.href=c.serialize(),o.origin=c.getOrigin(),o.protocol=c.getProtocol(),o.username=c.getUsername(),o.password=c.getPassword(),o.host=c.getHost(),o.hostname=c.getHostname(),o.port=c.getPort(),o.pathname=c.getPathname(),o.search=c.getSearch(),o.searchParams=c.getSearchParams(),o.hash=c.getHash())},UL=xT.prototype,Nh=function(r,o){return{get:function(){return ML(this)[r]()},set:o&&function(a){return ML(this)[o](a)},configurable:!0,enumerable:!0}};if(aV&&n8(UL,{href:Nh("serialize","setHref"),origin:Nh("getOrigin"),protocol:Nh("getProtocol","setProtocol"),username:Nh("getUsername","setUsername"),password:Nh("getPassword","setPassword"),host:Nh("getHost","setHost"),hostname:Nh("getHostname","setHostname"),port:Nh("getPort","setPort"),pathname:Nh("getPathname","setPathname"),search:Nh("getSearch","setSearch"),searchParams:Nh("getSearchParams"),hash:Nh("getHash","setHash")}),lP(UL,"toJSON",function(){return ML(this).serialize()},{enumerable:!0}),lP(UL,"toString",function(){return ML(this).serialize()},{enumerable:!0}),uP){var VL=uP.createObjectURL,PH=uP.revokeObjectURL;VL&&lP(xT,"createObjectURL",t8(VL,uP)),PH&&lP(xT,"revokeObjectURL",t8(PH,uP))}i8(xT,"URL"),Z5({global:!0,forced:!e8,sham:!aV},{URL:xT});var A8=$p.URL;const Cz={[_t.ACCESS_POINT]:{[Ye.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Ye.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Ye.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Ye.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Ye.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Ye.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Ye.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[_t.UNILBS]:{[Ce.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Ce.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Ce.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Ce.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Ce.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Ce.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Ce.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Ce.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Ce.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Ce.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Ce.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Ce.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[_t.STRING_UID_ALLOCATOR]:{[it.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[it.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[it.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function mP(r){const o=Cz[Math.floor(r/1e4)];if(!o)return{desc:"unkonw error",retry:!1};const a=o[r%1e4];if(!a){if(Math.floor(r/1e4)===_t.ACCESS_POINT){const c=r%1e4;if("1"===c.toString()[0])return{desc:r.toString(),retry:!1};if("2"===c.toString()[0])return{desc:r.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return a}const IV={[Ge.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Ge.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Ge.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Ge.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Ge.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Ge.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Ge.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Ge.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Ge.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Ge.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Ge.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Ge.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ge.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ge.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Ge.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Ge.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Ge.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Ge.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Ge.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Ge.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Ge.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Ge.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Ge.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Ge.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Ge.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Ge.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Ge.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Ge.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Ge.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Ge.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Ge.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Ge.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Ge.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Ge.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Ge.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Ge.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Ge.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Ge.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ge.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ge.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Ge.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Ge.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ge.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ge.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Ge.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Ge.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Ge.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Ge.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Ge.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Ge.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Ge.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Ge.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Ge.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Ge.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Ge.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Ge.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Ge.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Ge.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}};function wV(r){return IV[r]||{desc:"UNKNOW_ERROR_".concat(r),action:"failed"}}var MH={exports:{}};(function(r,o){r.exports=function(){var a={d:function(gt,be){for(var st in be)a.o(be,st)&&!a.o(gt,st)&&Object.defineProperty(gt,st,{enumerable:!0,get:be[st]})},o:function(gt,be){return Object.prototype.hasOwnProperty.call(gt,be)},r:function(gt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(gt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(gt,"__esModule",{value:!0})}},c={};a.r(c),a.d(c,{DataViewIndexOutOfBoundsError:function(){return Q},DecodeError:function(){return Me},Decoder:function(){return xe},EXT_TIMESTAMP:function(){return dt},Encoder:function(){return At},ExtData:function(){return ge},ExtensionCodec:function(){return Ct},decode:function(){return ft},decodeArrayStream:function(){return cs},decodeAsync:function(){return hi},decodeMulti:function(){return Qt},decodeMultiStream:function(){return ao},decodeStream:function(){return zf},decodeTimestampExtension:function(){return wn},decodeTimestampToTimeSpec:function(){return Vn},encode:function(){return t},encodeDateToTimeSpec:function(){return Mt},encodeTimeSpecToTimestamp:function(){return kt},encodeTimestampExtension:function(){return Lt}});var p=4294967295;function _(gt,be,st){var Rt=Math.floor(st/4294967296),vt=st;gt.setUint32(be,Rt),gt.setUint32(be+4,vt)}function m(gt,be){return 4294967296*gt.getInt32(be)+gt.getUint32(be+4)}var A=function(gt,be){var st="function"==typeof Symbol&&gt[Symbol.iterator];if(!st)return gt;var Rt,vt,gn=st.call(gt),Dt=[];try{for(;(void 0===be||be-- >0)&&!(Rt=gn.next()).done;)Dt.push(Rt.value)}catch(tn){vt={error:tn}}finally{try{Rt&&!Rt.done&&(st=gn.return)&&st.call(gn)}finally{if(vt)throw vt.error}}return Dt},v=function(gt,be){for(var st=0,Rt=be.length,vt=gt.length;st<Rt;st++,vt++)gt[vt]=be[st];return gt},S=typeof TextEncoder<"u"&&typeof TextDecoder<"u";function I(gt){for(var be=gt.length,st=0,Rt=0;Rt<be;){var vt=gt.charCodeAt(Rt++);if(0!=(4294967168&vt))if(0==(4294965248&vt))st+=2;else{if(vt>=55296&&vt<=56319&&Rt<be){var gn=gt.charCodeAt(Rt);56320==(64512&gn)&&(++Rt,vt=((1023&vt)<<10)+(1023&gn)+65536)}st+=0==(4294901760&vt)?3:4}else st++}return st}var R=S?new TextEncoder:void 0,O=S?typeof process<"u"?200:0:p,B=R?.encodeInto?function(gt,be,st){R.encodeInto(gt,be.subarray(st))}:function(gt,be,st){be.set(R.encode(gt),st)};function q(gt,be,st){for(var Rt=be,vt=Rt+st,gn=[],Dt="";Rt<vt;){var tn=gt[Rt++];if(0==(128&tn))gn.push(tn);else if(192==(224&tn)){var On=63&gt[Rt++];gn.push((31&tn)<<6|On)}else if(224==(240&tn)){On=63&gt[Rt++];var Xn=63&gt[Rt++];gn.push((31&tn)<<12|On<<6|Xn)}else if(240==(248&tn)){var _n=(7&tn)<<18|(On=63&gt[Rt++])<<12|(Xn=63&gt[Rt++])<<6|63&gt[Rt++];_n>65535&&(gn.push((_n-=65536)>>>10&1023|55296),_n=56320|1023&_n),gn.push(_n)}else gn.push(tn);gn.length>=4096&&(Dt+=String.fromCharCode.apply(String,v([],A(gn))),gn.length=0)}return gn.length>0&&(Dt+=String.fromCharCode.apply(String,v([],A(gn)))),Dt}var z,te=S?new TextDecoder:null,de=S?typeof process<"u"?200:0:p,ge=function(gt,be){this.type=gt,this.data=be},Se=(z=function(gt,be){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,Rt){st.__proto__=Rt}||function(st,Rt){for(var vt in Rt)Object.prototype.hasOwnProperty.call(Rt,vt)&&(st[vt]=Rt[vt])})(gt,be)},function(gt,be){if("function"!=typeof be&&null!==be)throw new TypeError("Class extends value "+String(be)+" is not a constructor or null");function st(){this.constructor=gt}z(gt,be),gt.prototype=null===be?Object.create(be):(st.prototype=be.prototype,new st)}),Me=function(gt){function be(st){var Rt=gt.call(this,st)||this,vt=Object.create(be.prototype);return Object.setPrototypeOf(Rt,vt),Object.defineProperty(Rt,"name",{configurable:!0,enumerable:!1,value:be.name}),Rt}return Se(be,gt),be}(Error),dt=-1;function kt(gt){var be,st=gt.sec,Rt=gt.nsec;if(st>=0&&Rt>=0&&st<=17179869183){if(0===Rt&&st<=4294967295){var vt=new Uint8Array(4);return(be=new DataView(vt.buffer)).setUint32(0,st),vt}var gn=st/4294967296,Dt=4294967295&st;return vt=new Uint8Array(8),(be=new DataView(vt.buffer)).setUint32(0,Rt<<2|3&gn),be.setUint32(4,Dt),vt}return vt=new Uint8Array(12),(be=new DataView(vt.buffer)).setUint32(0,Rt),_(be,4,st),vt}function Mt(gt){var be=gt.getTime(),st=Math.floor(be/1e3),Rt=1e6*(be-1e3*st),vt=Math.floor(Rt/1e9);return{sec:st+vt,nsec:Rt-1e9*vt}}function Lt(gt){return gt instanceof Date?kt(Mt(gt)):null}function Vn(gt){var be=new DataView(gt.buffer,gt.byteOffset,gt.byteLength);switch(gt.byteLength){case 4:return{sec:be.getUint32(0),nsec:0};case 8:var st=be.getUint32(0);return{sec:4294967296*(3&st)+be.getUint32(4),nsec:st>>>2};case 12:return{sec:m(be,4),nsec:be.getUint32(0)};default:throw new Me("Unrecognized data size for timestamp (expected 4, 8, or 12): "+gt.length)}}function wn(gt){var be=Vn(gt);return new Date(1e3*be.sec+be.nsec/1e6)}var yn={type:dt,encode:Lt,decode:wn},Ct=function(){function gt(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(yn)}return gt.prototype.register=function(be){var st=be.type,Rt=be.encode,vt=be.decode;if(st>=0)this.encoders[st]=Rt,this.decoders[st]=vt;else{var gn=1+st;this.builtInEncoders[gn]=Rt,this.builtInDecoders[gn]=vt}},gt.prototype.tryToEncode=function(be,st){for(var Rt=0;Rt<this.builtInEncoders.length;Rt++)if(null!=(vt=this.builtInEncoders[Rt])&&null!=(gn=vt(be,st)))return new ge(-1-Rt,gn);for(Rt=0;Rt<this.encoders.length;Rt++){var vt,gn;if(null!=(vt=this.encoders[Rt])&&null!=(gn=vt(be,st)))return new ge(Rt,gn)}return be instanceof ge?be:null},gt.prototype.decode=function(be,st,Rt){var vt=st<0?this.builtInDecoders[-1-st]:this.decoders[st];return vt?vt(be,st,Rt):new ge(st,be)},gt.defaultCodec=new gt,gt}();function We(gt){return gt instanceof Uint8Array?gt:ArrayBuffer.isView(gt)?new Uint8Array(gt.buffer,gt.byteOffset,gt.byteLength):gt instanceof ArrayBuffer?new Uint8Array(gt):Uint8Array.from(gt)}var lt=function(gt){var be="function"==typeof Symbol&&Symbol.iterator,st=be&&gt[be],Rt=0;if(st)return st.call(gt);if(gt&&"number"==typeof gt.length)return{next:function(){return gt&&Rt>=gt.length&&(gt=void 0),{value:gt&&gt[Rt++],done:!gt}}};throw new TypeError(be?"Object is not iterable.":"Symbol.iterator is not defined.")},At=function(){function gt(be,st,Rt,vt,gn,Dt,tn,On){void 0===be&&(be=Ct.defaultCodec),void 0===st&&(st=void 0),void 0===Rt&&(Rt=100),void 0===vt&&(vt=2048),void 0===gn&&(gn=!1),void 0===Dt&&(Dt=!1),void 0===tn&&(tn=!1),void 0===On&&(On=!1),this.extensionCodec=be,this.context=st,this.maxDepth=Rt,this.initialBufferSize=vt,this.sortKeys=gn,this.forceFloat32=Dt,this.ignoreUndefined=tn,this.forceIntegerToFloat=On,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return gt.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},gt.prototype.reinitializeState=function(){this.pos=0},gt.prototype.encode=function(be){return this.reinitializeState(),this.doEncode(be,1),this.getUint8Array()},gt.prototype.doEncode=function(be,st){if(st>this.maxDepth)throw new Error("Too deep objects in depth "+st);null==be?this.encodeNil():"boolean"==typeof be?this.encodeBoolean(be):"number"==typeof be?this.encodeNumber(be):"string"==typeof be?this.encodeString(be):this.encodeObject(be,st)},gt.prototype.ensureBufferSizeToWrite=function(be){var st=this.pos+be;this.view.byteLength<st&&this.resizeBuffer(2*st)},gt.prototype.resizeBuffer=function(be){var st=new ArrayBuffer(be),Rt=new Uint8Array(st),vt=new DataView(st);Rt.set(this.bytes),this.view=vt,this.bytes=Rt},gt.prototype.encodeNil=function(){this.writeU8(192)},gt.prototype.encodeBoolean=function(be){this.writeU8(!1===be?194:195)},gt.prototype.encodeNumber=function(be){Number.isSafeInteger(be)&&!this.forceIntegerToFloat?be>=0?be<128?this.writeU8(be):be<256?(this.writeU8(204),this.writeU8(be)):be<65536?(this.writeU8(205),this.writeU16(be)):be<4294967296?(this.writeU8(206),this.writeU32(be)):(this.writeU8(207),this.writeU64(be)):be>=-32?this.writeU8(224|be+32):be>=-128?(this.writeU8(208),this.writeI8(be)):be>=-32768?(this.writeU8(209),this.writeI16(be)):be>=-2147483648?(this.writeU8(210),this.writeI32(be)):(this.writeU8(211),this.writeI64(be)):this.forceFloat32?(this.writeU8(202),this.writeF32(be)):(this.writeU8(203),this.writeF64(be))},gt.prototype.writeStringHeader=function(be){if(be<32)this.writeU8(160+be);else if(be<256)this.writeU8(217),this.writeU8(be);else if(be<65536)this.writeU8(218),this.writeU16(be);else{if(!(be<4294967296))throw new Error("Too long string: "+be+" bytes in UTF-8");this.writeU8(219),this.writeU32(be)}},gt.prototype.encodeString=function(be){if(be.length>O){var st=I(be);this.ensureBufferSizeToWrite(5+st),this.writeStringHeader(st),B(be,this.bytes,this.pos),this.pos+=st}else st=I(be),this.ensureBufferSizeToWrite(5+st),this.writeStringHeader(st),function(Rt,vt,gn){for(var Dt=Rt.length,tn=gn,On=0;On<Dt;){var Xn=Rt.charCodeAt(On++);if(0!=(4294967168&Xn)){if(0==(4294965248&Xn))vt[tn++]=Xn>>6&31|192;else{if(Xn>=55296&&Xn<=56319&&On<Dt){var _n=Rt.charCodeAt(On);56320==(64512&_n)&&(++On,Xn=((1023&Xn)<<10)+(1023&_n)+65536)}0==(4294901760&Xn)?(vt[tn++]=Xn>>12&15|224,vt[tn++]=Xn>>6&63|128):(vt[tn++]=Xn>>18&7|240,vt[tn++]=Xn>>12&63|128,vt[tn++]=Xn>>6&63|128)}vt[tn++]=63&Xn|128}else vt[tn++]=Xn}}(be,this.bytes,this.pos),this.pos+=st},gt.prototype.encodeObject=function(be,st){var Rt=this.extensionCodec.tryToEncode(be,this.context);if(null!=Rt)this.encodeExtension(Rt);else if(Array.isArray(be))this.encodeArray(be,st);else if(ArrayBuffer.isView(be))this.encodeBinary(be);else{if("object"!=typeof be)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(be));this.encodeMap(be,st)}},gt.prototype.encodeBinary=function(be){var st=be.byteLength;if(st<256)this.writeU8(196),this.writeU8(st);else if(st<65536)this.writeU8(197),this.writeU16(st);else{if(!(st<4294967296))throw new Error("Too large binary: "+st);this.writeU8(198),this.writeU32(st)}var Rt=We(be);this.writeU8a(Rt)},gt.prototype.encodeArray=function(be,st){var Rt,vt,gn=be.length;if(gn<16)this.writeU8(144+gn);else if(gn<65536)this.writeU8(220),this.writeU16(gn);else{if(!(gn<4294967296))throw new Error("Too large array: "+gn);this.writeU8(221),this.writeU32(gn)}try{for(var Dt=lt(be),tn=Dt.next();!tn.done;tn=Dt.next())this.doEncode(tn.value,st+1)}catch(Xn){Rt={error:Xn}}finally{try{tn&&!tn.done&&(vt=Dt.return)&&vt.call(Dt)}finally{if(Rt)throw Rt.error}}},gt.prototype.countWithoutUndefined=function(be,st){var Rt,vt,gn=0;try{for(var Dt=lt(st),tn=Dt.next();!tn.done;tn=Dt.next())void 0!==be[tn.value]&&gn++}catch(On){Rt={error:On}}finally{try{tn&&!tn.done&&(vt=Dt.return)&&vt.call(Dt)}finally{if(Rt)throw Rt.error}}return gn},gt.prototype.encodeMap=function(be,st){var Rt,vt,gn=Object.keys(be);this.sortKeys&&gn.sort();var Dt=this.ignoreUndefined?this.countWithoutUndefined(be,gn):gn.length;if(Dt<16)this.writeU8(128+Dt);else if(Dt<65536)this.writeU8(222),this.writeU16(Dt);else{if(!(Dt<4294967296))throw new Error("Too large map object: "+Dt);this.writeU8(223),this.writeU32(Dt)}try{for(var tn=lt(gn),On=tn.next();!On.done;On=tn.next()){var Xn=On.value,_n=be[Xn];this.ignoreUndefined&&void 0===_n||(this.encodeString(Xn),this.doEncode(_n,st+1))}}catch(Gn){Rt={error:Gn}}finally{try{On&&!On.done&&(vt=tn.return)&&vt.call(tn)}finally{if(Rt)throw Rt.error}}},gt.prototype.encodeExtension=function(be){var st=be.data.length;if(1===st)this.writeU8(212);else if(2===st)this.writeU8(213);else if(4===st)this.writeU8(214);else if(8===st)this.writeU8(215);else if(16===st)this.writeU8(216);else if(st<256)this.writeU8(199),this.writeU8(st);else if(st<65536)this.writeU8(200),this.writeU16(st);else{if(!(st<4294967296))throw new Error("Too large extension object: "+st);this.writeU8(201),this.writeU32(st)}this.writeI8(be.type),this.writeU8a(be.data)},gt.prototype.writeU8=function(be){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,be),this.pos++},gt.prototype.writeU8a=function(be){var st=be.length;this.ensureBufferSizeToWrite(st),this.bytes.set(be,this.pos),this.pos+=st},gt.prototype.writeI8=function(be){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,be),this.pos++},gt.prototype.writeU16=function(be){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,be),this.pos+=2},gt.prototype.writeI16=function(be){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,be),this.pos+=2},gt.prototype.writeU32=function(be){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,be),this.pos+=4},gt.prototype.writeI32=function(be){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,be),this.pos+=4},gt.prototype.writeF32=function(be){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,be),this.pos+=4},gt.prototype.writeF64=function(be){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,be),this.pos+=8},gt.prototype.writeU64=function(be){var st,Rt,vt,Dt;this.ensureBufferSizeToWrite(8),Dt=vt=be,(st=this.view).setUint32(Rt=this.pos,vt/4294967296),st.setUint32(Rt+4,Dt),this.pos+=8},gt.prototype.writeI64=function(be){this.ensureBufferSizeToWrite(8),_(this.view,this.pos,be),this.pos+=8},gt}(),n={};function t(gt,be){return void 0===be&&(be=n),new At(be.extensionCodec,be.context,be.maxDepth,be.initialBufferSize,be.sortKeys,be.forceFloat32,be.ignoreUndefined,be.forceIntegerToFloat).encode(gt)}function e(gt){return(gt<0?"-":"")+"0x"+Math.abs(gt).toString(16).padStart(2,"0")}var s=function(){function gt(be,st){void 0===be&&(be=16),void 0===st&&(st=16),this.maxKeyLength=be,this.maxLengthPerKey=st,this.hit=0,this.miss=0,this.caches=[];for(var Rt=0;Rt<this.maxKeyLength;Rt++)this.caches.push([])}return gt.prototype.canBeCached=function(be){return be>0&&be<=this.maxKeyLength},gt.prototype.find=function(be,st,Rt){var vt,gn,Dt=this.caches[Rt-1];try{e:for(var tn=function(lr){var Ur="function"==typeof Symbol&&Symbol.iterator,Zr=Ur&&lr[Ur],ic=0;if(Zr)return Zr.call(lr);if(lr&&"number"==typeof lr.length)return{next:function(){return lr&&ic>=lr.length&&(lr=void 0),{value:lr&&lr[ic++],done:!lr}}};throw new TypeError(Ur?"Object is not iterable.":"Symbol.iterator is not defined.")}(Dt),On=tn.next();!On.done;On=tn.next()){for(var Xn=On.value,_n=Xn.bytes,Gn=0;Gn<Rt;Gn++)if(_n[Gn]!==be[st+Gn])continue e;return Xn.str}}catch(lr){vt={error:lr}}finally{try{On&&!On.done&&(gn=tn.return)&&gn.call(tn)}finally{if(vt)throw vt.error}}return null},gt.prototype.store=function(be,st){var Rt=this.caches[be.length-1],vt={bytes:be,str:st};Rt.length>=this.maxLengthPerKey?Rt[Math.random()*Rt.length|0]=vt:Rt.push(vt)},gt.prototype.decode=function(be,st,Rt){var vt=this.find(be,st,Rt);if(null!=vt)return this.hit++,vt;this.miss++;var gn=q(be,st,Rt),Dt=Uint8Array.prototype.slice.call(be,st,st+Rt);return this.store(Dt,gn),gn},gt}(),d=function(gt,be){var st,Rt,vt,gn,Dt={label:0,sent:function(){if(1&vt[0])throw vt[1];return vt[1]},trys:[],ops:[]};return gn={next:tn(0),throw:tn(1),return:tn(2)},"function"==typeof Symbol&&(gn[Symbol.iterator]=function(){return this}),gn;function tn(On){return function(Xn){return function(_n){if(st)throw new TypeError("Generator is already executing.");for(;Dt;)try{if(st=1,Rt&&(vt=2&_n[0]?Rt.return:_n[0]?Rt.throw||((vt=Rt.return)&&vt.call(Rt),0):Rt.next)&&!(vt=vt.call(Rt,_n[1])).done)return vt;switch(Rt=0,vt&&(_n=[2&_n[0],vt.value]),_n[0]){case 0:case 1:vt=_n;break;case 4:return Dt.label++,{value:_n[1],done:!1};case 5:Dt.label++,Rt=_n[1],_n=[0];continue;case 7:_n=Dt.ops.pop(),Dt.trys.pop();continue;default:if(!((vt=(vt=Dt.trys).length>0&&vt[vt.length-1])||6!==_n[0]&&2!==_n[0])){Dt=0;continue}if(3===_n[0]&&(!vt||_n[1]>vt[0]&&_n[1]<vt[3])){Dt.label=_n[1];break}if(6===_n[0]&&Dt.label<vt[1]){Dt.label=vt[1],vt=_n;break}if(vt&&Dt.label<vt[2]){Dt.label=vt[2],Dt.ops.push(_n);break}vt[2]&&Dt.ops.pop(),Dt.trys.pop();continue}_n=be.call(gt,Dt)}catch(Gn){_n=[6,Gn],Rt=0}finally{st=vt=0}if(5&_n[0])throw _n[1];return{value:_n[0]?_n[1]:void 0,done:!0}}([On,Xn])}}},f=function(gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,st=gt[Symbol.asyncIterator];return st?st.call(gt):(gt="function"==typeof __values?__values(gt):gt[Symbol.iterator](),be={},Rt("next"),Rt("throw"),Rt("return"),be[Symbol.asyncIterator]=function(){return this},be);function Rt(vt){be[vt]=gt[vt]&&function(gn){return new Promise(function(Dt,tn){var On,Xn,_n;On=Dt,Xn=tn,_n=(gn=gt[vt](gn)).done,Promise.resolve(gn.value).then(function(lr){On({value:lr,done:_n})},Xn)})}}},b=function(gt){return this instanceof b?(this.v=gt,this):new b(gt)},E=function(gt,be,st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Rt,vt=st.apply(gt,be||[]),gn=[];return Rt={},Dt("next"),Dt("throw"),Dt("return"),Rt[Symbol.asyncIterator]=function(){return this},Rt;function Dt(Gn){vt[Gn]&&(Rt[Gn]=function(lr){return new Promise(function(Ur,Zr){gn.push([Gn,lr,Ur,Zr])>1||tn(Gn,lr)})})}function tn(Gn,lr){try{(Ur=vt[Gn](lr)).value instanceof b?Promise.resolve(Ur.value.v).then(On,Xn):_n(gn[0][2],Ur)}catch(Zr){_n(gn[0][3],Zr)}var Ur}function On(Gn){tn("next",Gn)}function Xn(Gn){tn("throw",Gn)}function _n(Gn,lr){Gn(lr),gn.shift(),gn.length&&tn(gn[0][0],gn[0][1])}},T=new DataView(new ArrayBuffer(0)),k=new Uint8Array(T.buffer),Q=function(){try{T.getInt8(0)}catch(gt){return gt.constructor}throw new Error("never reached")}(),ie=new Q("Insufficient data"),Ie=new s,xe=function(){function gt(be,st,Rt,vt,gn,Dt,tn,On){void 0===be&&(be=Ct.defaultCodec),void 0===st&&(st=void 0),void 0===Rt&&(Rt=p),void 0===vt&&(vt=p),void 0===gn&&(gn=p),void 0===Dt&&(Dt=p),void 0===tn&&(tn=p),void 0===On&&(On=Ie),this.extensionCodec=be,this.context=st,this.maxStrLength=Rt,this.maxBinLength=vt,this.maxArrayLength=gn,this.maxMapLength=Dt,this.maxExtLength=tn,this.keyDecoder=On,this.totalPos=0,this.pos=0,this.view=T,this.bytes=k,this.headByte=-1,this.stack=[]}return gt.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},gt.prototype.setBuffer=function(be){this.bytes=We(be),this.view=function(st){if(st instanceof ArrayBuffer)return new DataView(st);var Rt=We(st);return new DataView(Rt.buffer,Rt.byteOffset,Rt.byteLength)}(this.bytes),this.pos=0},gt.prototype.appendBuffer=function(be){if(-1!==this.headByte||this.hasRemaining(1)){var st=this.bytes.subarray(this.pos),Rt=We(be),vt=new Uint8Array(st.length+Rt.length);vt.set(st),vt.set(Rt,st.length),this.setBuffer(vt)}else this.setBuffer(be)},gt.prototype.hasRemaining=function(be){return this.view.byteLength-this.pos>=be},gt.prototype.createExtraByteError=function(be){var st=this.view;return new RangeError("Extra "+(st.byteLength-this.pos)+" of "+st.byteLength+" byte(s) found at buffer["+be+"]")},gt.prototype.decode=function(be){this.reinitializeState(),this.setBuffer(be);var st=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return st},gt.prototype.decodeMulti=function(be){return d(this,function(st){switch(st.label){case 0:this.reinitializeState(),this.setBuffer(be),st.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return st.sent(),[3,1];case 3:return[2]}})},gt.prototype.decodeAsync=function(be){var st,Rt,vt,gn,Dt,On,Xn;return Dt=this,void 0,Xn=function(){var _n,Gn,lr,Ur,Zr,ic,Ln,Mn;return d(this,function(Sr){switch(Sr.label){case 0:_n=!1,Sr.label=1;case 1:Sr.trys.push([1,6,7,12]),st=f(be),Sr.label=2;case 2:return[4,st.next()];case 3:if((Rt=Sr.sent()).done)return[3,5];if(lr=Rt.value,_n)throw this.createExtraByteError(this.totalPos);this.appendBuffer(lr);try{Gn=this.doDecodeSync(),_n=!0}catch(ei){if(!(ei instanceof Q))throw ei}this.totalPos+=this.pos,Sr.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return Ur=Sr.sent(),vt={error:Ur},[3,12];case 7:return Sr.trys.push([7,,10,11]),Rt&&!Rt.done&&(gn=st.return)?[4,gn.call(st)]:[3,9];case 8:Sr.sent(),Sr.label=9;case 9:return[3,11];case 10:if(vt)throw vt.error;return[7];case 11:return[7];case 12:if(_n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,Gn]}throw ic=(Zr=this).headByte,Ln=Zr.pos,Mn=Zr.totalPos,new RangeError("Insufficient data in parsing "+e(ic)+" at "+Mn+" ("+Ln+" in the current buffer)")}})},new((On=void 0)||(On=Promise))(function(_n,Gn){function lr(ic){try{Zr(Xn.next(ic))}catch(Ln){Gn(Ln)}}function Ur(ic){try{Zr(Xn.throw(ic))}catch(Ln){Gn(Ln)}}function Zr(ic){var Ln;ic.done?_n(ic.value):(Ln=ic.value,Ln instanceof On?Ln:new On(function(Mn){Mn(Ln)})).then(lr,Ur)}Zr((Xn=Xn.apply(Dt,[])).next())})},gt.prototype.decodeArrayStream=function(be){return this.decodeMultiAsync(be,!0)},gt.prototype.decodeStream=function(be){return this.decodeMultiAsync(be,!1)},gt.prototype.decodeMultiAsync=function(be,st){return E(this,arguments,function(){var Rt,vt,gn,Dt,tn,On,Xn,_n,Gn;return d(this,function(lr){switch(lr.label){case 0:Rt=st,vt=-1,lr.label=1;case 1:lr.trys.push([1,13,14,19]),gn=f(be),lr.label=2;case 2:return[4,b(gn.next())];case 3:if((Dt=lr.sent()).done)return[3,12];if(tn=Dt.value,st&&0===vt)throw this.createExtraByteError(this.totalPos);this.appendBuffer(tn),Rt&&(vt=this.readArraySize(),Rt=!1,this.complete()),lr.label=4;case 4:lr.trys.push([4,9,,10]),lr.label=5;case 5:return[4,b(this.doDecodeSync())];case 6:return[4,lr.sent()];case 7:return lr.sent(),0==--vt?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((On=lr.sent())instanceof Q))throw On;return[3,10];case 10:this.totalPos+=this.pos,lr.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return Xn=lr.sent(),_n={error:Xn},[3,19];case 14:return lr.trys.push([14,,17,18]),Dt&&!Dt.done&&(Gn=gn.return)?[4,b(Gn.call(gn))]:[3,16];case 15:lr.sent(),lr.label=16;case 16:return[3,18];case 17:if(_n)throw _n.error;return[7];case 18:return[7];case 19:return[2]}})})},gt.prototype.doDecodeSync=function(){e:for(;;){var be=this.readHeadByte(),st=void 0;if(be>=224)st=be-256;else if(be<192)if(be<128)st=be;else if(be<144){if(0!=(vt=be-128)){this.pushMapState(vt),this.complete();continue e}st={}}else if(be<160){if(0!=(vt=be-144)){this.pushArrayState(vt),this.complete();continue e}st=[]}else{var Rt=be-160;st=this.decodeUtf8String(Rt,0)}else if(192===be)st=null;else if(194===be)st=!1;else if(195===be)st=!0;else if(202===be)st=this.readF32();else if(203===be)st=this.readF64();else if(204===be)st=this.readU8();else if(205===be)st=this.readU16();else if(206===be)st=this.readU32();else if(207===be)st=this.readU64();else if(208===be)st=this.readI8();else if(209===be)st=this.readI16();else if(210===be)st=this.readI32();else if(211===be)st=this.readI64();else if(217===be)Rt=this.lookU8(),st=this.decodeUtf8String(Rt,1);else if(218===be)Rt=this.lookU16(),st=this.decodeUtf8String(Rt,2);else if(219===be)Rt=this.lookU32(),st=this.decodeUtf8String(Rt,4);else if(220===be){if(0!==(vt=this.readU16())){this.pushArrayState(vt),this.complete();continue e}st=[]}else if(221===be){if(0!==(vt=this.readU32())){this.pushArrayState(vt),this.complete();continue e}st=[]}else if(222===be){if(0!==(vt=this.readU16())){this.pushMapState(vt),this.complete();continue e}st={}}else if(223===be){if(0!==(vt=this.readU32())){this.pushMapState(vt),this.complete();continue e}st={}}else if(196===be){var vt=this.lookU8();st=this.decodeBinary(vt,1)}else if(197===be)vt=this.lookU16(),st=this.decodeBinary(vt,2);else if(198===be)vt=this.lookU32(),st=this.decodeBinary(vt,4);else if(212===be)st=this.decodeExtension(1,0);else if(213===be)st=this.decodeExtension(2,0);else if(214===be)st=this.decodeExtension(4,0);else if(215===be)st=this.decodeExtension(8,0);else if(216===be)st=this.decodeExtension(16,0);else if(199===be)vt=this.lookU8(),st=this.decodeExtension(vt,1);else if(200===be)vt=this.lookU16(),st=this.decodeExtension(vt,2);else{if(201!==be)throw new Me("Unrecognized type byte: "+e(be));vt=this.lookU32(),st=this.decodeExtension(vt,4)}this.complete();for(var gn=this.stack;gn.length>0;){var Dt=gn[gn.length-1];if(0===Dt.type){if(Dt.array[Dt.position]=st,Dt.position++,Dt.position!==Dt.size)continue e;gn.pop(),st=Dt.array}else{if(1===Dt.type){if("string"!=(tn=typeof st)&&"number"!==tn)throw new Me("The type of key must be string or number but "+typeof st);if("__proto__"===st)throw new Me("The key __proto__ is not allowed");Dt.key=st,Dt.type=2;continue e}if(Dt.map[Dt.key]=st,Dt.readCount++,Dt.readCount!==Dt.size){Dt.key=null,Dt.type=1;continue e}gn.pop(),st=Dt.map}}return st}var tn},gt.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},gt.prototype.complete=function(){this.headByte=-1},gt.prototype.readArraySize=function(){var be=this.readHeadByte();switch(be){case 220:return this.readU16();case 221:return this.readU32();default:if(be<160)return be-144;throw new Me("Unrecognized array type byte: "+e(be))}},gt.prototype.pushMapState=function(be){if(be>this.maxMapLength)throw new Me("Max length exceeded: map length ("+be+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:be,key:null,readCount:0,map:{}})},gt.prototype.pushArrayState=function(be){if(be>this.maxArrayLength)throw new Me("Max length exceeded: array length ("+be+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:be,array:new Array(be),position:0})},gt.prototype.decodeUtf8String=function(be,st){var Rt;if(be>this.maxStrLength)throw new Me("Max length exceeded: UTF-8 byte length ("+be+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+st+be)throw ie;var vt,tn,Xn,gn=this.pos+st;return vt=this.stateIsMapKey()&&(null===(Rt=this.keyDecoder)||void 0===Rt?void 0:Rt.canBeCached(be))?this.keyDecoder.decode(this.bytes,gn,be):be>de?(Xn=this.bytes.subarray(tn=gn,tn+be),te.decode(Xn)):q(this.bytes,gn,be),this.pos+=st+be,vt},gt.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},gt.prototype.decodeBinary=function(be,st){if(be>this.maxBinLength)throw new Me("Max length exceeded: bin length ("+be+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(be+st))throw ie;var Rt=this.pos+st,vt=this.bytes.subarray(Rt,Rt+be);return this.pos+=st+be,vt},gt.prototype.decodeExtension=function(be,st){if(be>this.maxExtLength)throw new Me("Max length exceeded: ext length ("+be+") > maxExtLength ("+this.maxExtLength+")");var Rt=this.view.getInt8(this.pos+st),vt=this.decodeBinary(be,st+1);return this.extensionCodec.decode(vt,Rt,this.context)},gt.prototype.lookU8=function(){return this.view.getUint8(this.pos)},gt.prototype.lookU16=function(){return this.view.getUint16(this.pos)},gt.prototype.lookU32=function(){return this.view.getUint32(this.pos)},gt.prototype.readU8=function(){var be=this.view.getUint8(this.pos);return this.pos++,be},gt.prototype.readI8=function(){var be=this.view.getInt8(this.pos);return this.pos++,be},gt.prototype.readU16=function(){var be=this.view.getUint16(this.pos);return this.pos+=2,be},gt.prototype.readI16=function(){var be=this.view.getInt16(this.pos);return this.pos+=2,be},gt.prototype.readU32=function(){var be=this.view.getUint32(this.pos);return this.pos+=4,be},gt.prototype.readI32=function(){var be=this.view.getInt32(this.pos);return this.pos+=4,be},gt.prototype.readU64=function(){var be,st,Rt=4294967296*(be=this.view).getUint32(st=this.pos)+be.getUint32(st+4);return this.pos+=8,Rt},gt.prototype.readI64=function(){var be=m(this.view,this.pos);return this.pos+=8,be},gt.prototype.readF32=function(){var be=this.view.getFloat32(this.pos);return this.pos+=4,be},gt.prototype.readF64=function(){var be=this.view.getFloat64(this.pos);return this.pos+=8,be},gt}(),qe={};function ft(gt,be){return void 0===be&&(be=qe),new xe(be.extensionCodec,be.context,be.maxStrLength,be.maxBinLength,be.maxArrayLength,be.maxMapLength,be.maxExtLength).decode(gt)}function Qt(gt,be){return void 0===be&&(be=qe),new xe(be.extensionCodec,be.context,be.maxStrLength,be.maxBinLength,be.maxArrayLength,be.maxMapLength,be.maxExtLength).decodeMulti(gt)}var Kt=function(gt,be){var st,Rt,vt,gn,Dt={label:0,sent:function(){if(1&vt[0])throw vt[1];return vt[1]},trys:[],ops:[]};return gn={next:tn(0),throw:tn(1),return:tn(2)},"function"==typeof Symbol&&(gn[Symbol.iterator]=function(){return this}),gn;function tn(On){return function(Xn){return function(_n){if(st)throw new TypeError("Generator is already executing.");for(;Dt;)try{if(st=1,Rt&&(vt=2&_n[0]?Rt.return:_n[0]?Rt.throw||((vt=Rt.return)&&vt.call(Rt),0):Rt.next)&&!(vt=vt.call(Rt,_n[1])).done)return vt;switch(Rt=0,vt&&(_n=[2&_n[0],vt.value]),_n[0]){case 0:case 1:vt=_n;break;case 4:return Dt.label++,{value:_n[1],done:!1};case 5:Dt.label++,Rt=_n[1],_n=[0];continue;case 7:_n=Dt.ops.pop(),Dt.trys.pop();continue;default:if(!((vt=(vt=Dt.trys).length>0&&vt[vt.length-1])||6!==_n[0]&&2!==_n[0])){Dt=0;continue}if(3===_n[0]&&(!vt||_n[1]>vt[0]&&_n[1]<vt[3])){Dt.label=_n[1];break}if(6===_n[0]&&Dt.label<vt[1]){Dt.label=vt[1],vt=_n;break}if(vt&&Dt.label<vt[2]){Dt.label=vt[2],Dt.ops.push(_n);break}vt[2]&&Dt.ops.pop(),Dt.trys.pop();continue}_n=be.call(gt,Dt)}catch(Gn){_n=[6,Gn],Rt=0}finally{st=vt=0}if(5&_n[0])throw _n[1];return{value:_n[0]?_n[1]:void 0,done:!0}}([On,Xn])}}},pn=function(gt){return this instanceof pn?(this.v=gt,this):new pn(gt)},Vt=function(gt,be,st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Rt,vt=st.apply(gt,be||[]),gn=[];return Rt={},Dt("next"),Dt("throw"),Dt("return"),Rt[Symbol.asyncIterator]=function(){return this},Rt;function Dt(Gn){vt[Gn]&&(Rt[Gn]=function(lr){return new Promise(function(Ur,Zr){gn.push([Gn,lr,Ur,Zr])>1||tn(Gn,lr)})})}function tn(Gn,lr){try{(Ur=vt[Gn](lr)).value instanceof pn?Promise.resolve(Ur.value.v).then(On,Xn):_n(gn[0][2],Ur)}catch(Zr){_n(gn[0][3],Zr)}var Ur}function On(Gn){tn("next",Gn)}function Xn(Gn){tn("throw",Gn)}function _n(Gn,lr){Gn(lr),gn.shift(),gn.length&&tn(gn[0][0],gn[0][1])}};function zn(gt){if(null==gt)throw new Error("Assertion Failure: value must not be null nor undefined")}function pi(gt){return null!=gt[Symbol.asyncIterator]?gt:function(be){return Vt(this,arguments,function(){var st,Rt,gn;return Kt(this,function(Dt){switch(Dt.label){case 0:st=be.getReader(),Dt.label=1;case 1:Dt.trys.push([1,,9,10]),Dt.label=2;case 2:return[4,pn(st.read())];case 3:return Rt=Dt.sent(),gn=Rt.value,Rt.done?[4,pn(void 0)]:[3,5];case 4:return[2,Dt.sent()];case 5:return zn(gn),[4,pn(gn)];case 6:return[4,Dt.sent()];case 7:return Dt.sent(),[3,2];case 8:return[3,10];case 9:return st.releaseLock(),[7];case 10:return[2]}})})}(gt)}function hi(gt,be){return void 0===be&&(be=qe),st=this,void 0,gn=function(){var Dt;return function(tn,On){var Xn,_n,Gn,lr,Ur={label:0,sent:function(){if(1&Gn[0])throw Gn[1];return Gn[1]},trys:[],ops:[]};return lr={next:Zr(0),throw:Zr(1),return:Zr(2)},"function"==typeof Symbol&&(lr[Symbol.iterator]=function(){return this}),lr;function Zr(ic){return function(Ln){return function(Mn){if(Xn)throw new TypeError("Generator is already executing.");for(;Ur;)try{if(Xn=1,_n&&(Gn=2&Mn[0]?_n.return:Mn[0]?_n.throw||((Gn=_n.return)&&Gn.call(_n),0):_n.next)&&!(Gn=Gn.call(_n,Mn[1])).done)return Gn;switch(_n=0,Gn&&(Mn=[2&Mn[0],Gn.value]),Mn[0]){case 0:case 1:Gn=Mn;break;case 4:return Ur.label++,{value:Mn[1],done:!1};case 5:Ur.label++,_n=Mn[1],Mn=[0];continue;case 7:Mn=Ur.ops.pop(),Ur.trys.pop();continue;default:if(!((Gn=(Gn=Ur.trys).length>0&&Gn[Gn.length-1])||6!==Mn[0]&&2!==Mn[0])){Ur=0;continue}if(3===Mn[0]&&(!Gn||Mn[1]>Gn[0]&&Mn[1]<Gn[3])){Ur.label=Mn[1];break}if(6===Mn[0]&&Ur.label<Gn[1]){Ur.label=Gn[1],Gn=Mn;break}if(Gn&&Ur.label<Gn[2]){Ur.label=Gn[2],Ur.ops.push(Mn);break}Gn[2]&&Ur.ops.pop(),Ur.trys.pop();continue}Mn=On.call(tn,Ur)}catch(Sr){Mn=[6,Sr],_n=0}finally{Xn=Gn=0}if(5&Mn[0])throw Mn[1];return{value:Mn[0]?Mn[1]:void 0,done:!0}}([ic,Ln])}}}(this,function(tn){return Dt=pi(gt),[2,new xe(be.extensionCodec,be.context,be.maxStrLength,be.maxBinLength,be.maxArrayLength,be.maxMapLength,be.maxExtLength).decodeAsync(Dt)]})},new((vt=void 0)||(vt=Promise))(function(Dt,tn){function On(Gn){try{_n(gn.next(Gn))}catch(lr){tn(lr)}}function Xn(Gn){try{_n(gn.throw(Gn))}catch(lr){tn(lr)}}function _n(Gn){var lr;Gn.done?Dt(Gn.value):(lr=Gn.value,lr instanceof vt?lr:new vt(function(Ur){Ur(lr)})).then(On,Xn)}_n((gn=gn.apply(st,[])).next())});var st,vt,gn}function cs(gt,be){void 0===be&&(be=qe);var st=pi(gt);return new xe(be.extensionCodec,be.context,be.maxStrLength,be.maxBinLength,be.maxArrayLength,be.maxMapLength,be.maxExtLength).decodeArrayStream(st)}function ao(gt,be){void 0===be&&(be=qe);var st=pi(gt);return new xe(be.extensionCodec,be.context,be.maxStrLength,be.maxBinLength,be.maxArrayLength,be.maxMapLength,be.maxExtLength).decodeStream(st)}function zf(gt,be){return void 0===be&&(be=qe),ao(gt,be)}return c}()})(MH),(0,Uf.exports)("Int8",function(r){return function(o,a,c){return r(this,o,a,c)}}),(0,Uf.exports)("Int16",function(r){return function(o,a,c){return r(this,o,a,c)}}),(0,Uf.exports)("Int32",function(r){return function(o,a,c){return r(this,o,a,c)}}),(0,Uf.exports)("Uint16",function(r){return function(o,a,c){return r(this,o,a,c)}}),(0,Uf.exports)("Uint32",function(r){return function(o,a,c){return r(this,o,a,c)}}),(0,Uf.exports)("Float32",function(r){return function(o,a,c){return r(this,o,a,c)}}),(0,Uf.exports)("Float64",function(r){return function(o,a,c){return r(this,o,a,c)}});const y8=()=>function(r){const o=window.atob("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==").split("").map(a=>a.charCodeAt(0));return new Uint8Array(o,0,o.length/Uint8Array.BYTES_PER_ELEMENT)}();let TV,wg;function jL(){return jL=F(function*(){if(TV)return TV;const r={};let o,a={};for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=r[o]);let c=!1,p=!1;c="object"==typeof window,p="function"==typeof importScripts,"object"==typeof process&&"object"==typeof process.versions&&process;let _="";(c||p)&&(p?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):""),r.print||console.log.bind(console);const m=r.printErr||console.warn.bind(console);for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o]);let A;a=null,"object"!=typeof WebAssembly&&dt("no native wasm support detected");let v=!1;function S(t){const e=r["_"+t];return e||dt("Assertion failed: Cannot call unknown function "+t+", make sure it is exported"),e}function I(t,e,s,d,f){const b={string:function(ie){let Ie=0;if(null!=ie&&0!==ie){const xe=1+(ie.length<<2);Ie=At(xe),function(Kt,pn,Vt,zn){if(!(zn>0))return 0;const hi=Vt+zn-1;for(let cs=0;cs<Kt.length;++cs){let ao=Kt.charCodeAt(cs);if(ao>=55296&&ao<=57343&&(ao=65536+((1023&ao)<<10)|1023&Kt.charCodeAt(++cs)),ao<=127){if(Vt>=hi)break;pn[Vt++]=ao}else if(ao<=2047){if(Vt+1>=hi)break;pn[Vt++]=192|ao>>6,pn[Vt++]=128|63&ao}else if(ao<=65535){if(Vt+2>=hi)break;pn[Vt++]=224|ao>>12,pn[Vt++]=128|ao>>6&63,pn[Vt++]=128|63&ao}else{if(Vt+3>=hi)break;pn[Vt++]=240|ao>>18,pn[Vt++]=128|ao>>12&63,pn[Vt++]=128|ao>>6&63,pn[Vt++]=128|63&ao}}pn[Vt]=0}(ie,B,Ie,xe)}return Ie},array:function(ie){const Ie=At(ie.length);return O.set(ie,Ie),Ie}},E=S(t),T=[];let k=0;if(d)for(let ie=0;ie<d.length;ie++){const Ie=b[s[ie]];Ie?(0===k&&(k=We()),T[ie]=Ie(d[ie])):T[ie]=d[ie]}let Q=E.apply(null,T);return ie=Q,Q="string"===e?(Ie=ie)?function(qe,ft,Qt){const Kt=ft+undefined;let pn=ft,Vt="";for(;qe[pn]&&!(pn>=Kt);)++pn;if(pn-ft>16&&qe.subarray&&R)return R.decode(qe.subarray(ft,pn));for(;ft<pn;){let zn=qe[ft++];if(!(128&zn)){Vt+=String.fromCharCode(zn);continue}const pi=63&qe[ft++];if(192==(224&zn)){Vt+=String.fromCharCode((31&zn)<<6|pi);continue}const hi=63&qe[ft++];if(zn=224==(240&zn)?(15&zn)<<12|pi<<6|hi:(7&zn)<<18|pi<<12|hi<<6|63&qe[ft++],zn<65536)Vt+=String.fromCharCode(zn);else{const cs=zn-65536;Vt+=String.fromCharCode(55296|cs>>10,56320|1023&cs)}}return Vt}(B,Ie):"":"boolean"===e?Boolean(ie):ie,0!==k&&lt(k),Q;var ie,Ie}const R=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;let O,B,q;typeof TextDecoder<"u"&&new TextDecoder("utf-16le");const z=[],te=[],de=[],ge=[];te.push({func:function(){wn()}});let Se=0,Me=null;function dt(t){throw r.onAbort&&r.onAbort(t),m(t+=""),v=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}r.preloadedImages={},r.preloadedAudios={};let kt="deflate.wasm";var t;function Lt(t){for(;t.length>0;){const e=t.shift();if("function"==typeof e){e(r);continue}const s=e.func;"number"==typeof s?void 0===e.arg?q.get(s)():q.get(s)(e.arg):s(void 0===e.arg?null:e.arg)}}kt.startsWith("data:application/octet-stream;base64,")||(t=kt,kt=r.locateFile?r.locateFile(t,_):_+t);const Vn={emscripten_memcpy_big:function(t,e,s){B.copyWithin(t,e,e+s)},emscripten_resize_heap:function(t){dt("OOM")}};yield F(function*(){const t={env:Vn,wasi_snapshot_preview1:Vn};function e(f,b){var T;r.asm=f.exports,A=r.asm.memory,T=A.buffer,r.HEAP8=O=new Int8Array(T),r.HEAP16=new Int16Array(T),r.HEAP32=new Int32Array(T),r.HEAPU8=B=new Uint8Array(T),r.HEAPU16=new Uint16Array(T),r.HEAPU32=new Uint32Array(T),r.HEAPF32=new Float32Array(T),r.HEAPF64=new Float64Array(T),q=r.asm.__indirect_function_table,function(k){if(Se--,r.monitorRunDependencies&&r.monitorRunDependencies(Se),0==Se&&Me){const Q=Me;Me=null,Q()}}()}if(Se++,r.monitorRunDependencies&&r.monitorRunDependencies(Se),r.instantiateWasm)try{return r.instantiateWasm(t,e)}catch(f){return m("Module.instantiateWasm callback failed with error: "+f),!1}return yield function d(f){return new qn((b,E)=>{b(y8().buffer)}).then(function(b){return WebAssembly.instantiate(b,t)}).then(f,function(b){m("failed to asynchronously prepare wasm: "+b),dt(b)})}(function s(f){e(f.instance)}),{}})();let wn=r.___wasm_call_ctors=function(){return(wn=r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)},yn=r._malloc=function(){return(yn=r._malloc=r.asm.malloc).apply(null,arguments)};r._free=function(){return(r._free=r.asm.free).apply(null,arguments)},r.___errno_location=function(){return(r.___errno_location=r.asm.__errno_location).apply(null,arguments)},r._zlibCompress=function(){return(r._zlibCompress=r.asm.zlibCompress).apply(null,arguments)};let Ct,We=r.stackSave=function(){return(We=r.stackSave=r.asm.stackSave).apply(null,arguments)},lt=r.stackRestore=function(){return(lt=r.stackRestore=r.asm.stackRestore).apply(null,arguments)},At=r.stackAlloc=function(){return(At=r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)};function n(t){function e(){Ct||(Ct=!0,r.calledRun=!0,v||(Lt(te),Lt(de),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)s=r.postRun.shift(),ge.unshift(s);var s;Lt(ge)}()))}Se>0||(function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)s=r.preRun.shift(),z.unshift(s);var s;Lt(z)}(),Se>0||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),e()},1)):e()))}if(r.ccall=I,r.cwrap=function(t,e,s,d){const f=(s=s||[]).every(function(b){return"number"===b});return"string"!==e&&f&&!d?S(t):function(){return I(t,e,s,arguments)}},r.allocate=function(t,e){let s;return s=1==e?At(t.length):yn(t.length),B.set(t.subarray||t.slice?t:new Uint8Array(t),s),s},Me=function t(){Ct||n(),Ct||(Me=t)},r.run=n,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return n(),TV=r,r}),jL.apply(this,arguments)}const gP=Uint8Array.BYTES_PER_ELEMENT,E8={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},b8={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},xH={_message:"m",_type:"t",_id:"id"},RV={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let S8;class Iz{constructor(){J(this,"zlibCompress",void 0)}init(){var o=this;return F(function*(){S8||(S8=(yield F(function*(){return wg||(wg=yield function NH(){return jL.apply(this,arguments)}()),{zlibCompress:c=>{const p=new Uint8Array(c),_=gP*p.byteLength,m=wg._malloc(_),A=wg._malloc(3*_);for(let I=0;I<_;I++)wg.HEAP8[m/gP+I]=p[I];const v=wg._zlibCompress(m,_,A),S=new Uint8Array(wg.HEAP8.slice(A,A+v));return wg._free(m),wg._free(A),S}}})()).zlibCompress),o.zlibCompress=S8})()}msgPackCompress(o){return MH.exports.encode(o)}compress(o){const a=Date.now(),c=this.compressKeyAndValue(JSON.parse(JSON.stringify(o))),p=this.msgPackCompress(c),_=this.zlibCompress(p),m=new Uint8Array([49,49,49,50,...Array.from(_)]);return{origin:Object.assign({},o),originLength:JSON.stringify(o).length,shortKeyAndValue:c,msgpackSer:p,compressed:m,compressedLength:m.length,time:Date.now()-a}}compressKeyAndValue(o){return this._ObjectKeyCompress(this._typeCompress(o))}_typeCompress(o){const a=o._type;return a?(o._type=RV[a]||a,o):o}_ObjectKeyCompress(o){const a=o._message;if(a){const c=a.stats;c&&(a.stats=this._statsCompress(c)),o._message=this._messageCompress(a)}return this._reportCompress(o)}_statsCompress(o){return this._keyCompress(o,E8)}_messageCompress(o){return this._keyCompress(o,b8)}_reportCompress(o){return this._keyCompress(o,xH)}_keyCompress(o,a){const c={},p=Object.keys(o);return nf(p).call(p,(_,m)=>{const A=o[m];return a[m]?c[a[m]]=A:c[m]=A,c},c),c}}class wz extends ko{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(o){super(),J(this,"lowPriorityQueue",[]),J(this,"highPriorityQueue",[]),J(this,"AgoraWebSocketManager",void 0),this.AgoraWebSocketManager=o}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(o){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.highPriorityQueue.push(o):this.lowPriorityQueue.push(o),this.sendMessage()}sendMessage(){const o=this.queue.length;let a=0;a=o<5?15*o:60+3*(o-4),setTimeout(()=>{this._sendMessage()},a)}_sendMessage(){if(!this.queue.length)return;const o=this.AgoraWebSocketManager.getConnection();if(!o||1!==o.readyState)return;const a=this.queue.shift();return this.lowPriorityQueue.includes(a)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),o.send(a.compressed),a}}var QL;function C8(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}let o0=xa("AgoraWebSocketManager","connectionID")(QL=class extends ko{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,"reconnecting"===this._state?this.emit(In.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(In.CONNECTED):"closed"===this._state?this.emit(In.CLOSED):"failed"===this._state&&this.emit(In.FAILED))}resetReconnectCount(r){se.debug("websocket reset reconnect count, reason: "+r),$t("debug",this,"resetReconnectCount",r,"websocket reset reconnect count, reason: "+r),this.reconnectCount=0}constructor(r,o){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],p=arguments.length>4?arguments[4]:void 0;super(),J(this,"connectionID",0),J(this,"currentURLIndex",0),J(this,"urls",void 0),J(this,"_reconnectMode","tryNext"),J(this,"reconnectReason",void 0),J(this,"_initMutex",new Il("websocket")),J(this,"name",void 0),J(this,"_state","closed"),J(this,"reconnectInterrupter",void 0),J(this,"websocket",void 0),J(this,"retryConfig",void 0),J(this,"reconnectCount",0),J(this,"forceCloseTimeout",5e3),J(this,"onlineReconnectListener",void 0),J(this,"compressor",new Iz),J(this,"compressorInitStatus","initializing"),J(this,"compress",void 0),J(this,"messageSender",void 0),J(this,"useCompress",void 0),J(this,"tryDoubleDomain",!1),J(this,"wsInflateLength",0),J(this,"wsDeflateLength",0),J(this,"closeEstablishingWs",()=>{}),J(this,"store",void 0),J(this,"joinChannelServiceRecordIndex",void 0),this.store=p,this.name=r,this.retryConfig=function(I){for(var R=1;R<arguments.length;R++){var O=null!=arguments[R]?arguments[R]:{};R%2?C8(Object(O),!0).forEach(function(B){J(I,B,O[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(O)):C8(Object(O)).forEach(function(B){Object.defineProperty(I,B,Object.getOwnPropertyDescriptor(O,B))})}return I}({},o),this.useCompress=a,this.tryDoubleDomain=c;const{timeout:_,timeoutFactor:m}=o,A=Math.max(300,Math.floor(3*_/5)),v=Math.max(1.2,Math.floor(8*m)/10);ql.ONLINE&&(this.retryConfig.timeout=A,this.retryConfig.timeoutFactor=v),ta.on(lT.NETWORK_STATE_CHANGE,(I,R)=>{I!==R&&(this.resetReconnectCount("network state change: ".concat(R," -> ").concat(I)),I===ql.ONLINE?(this.retryConfig.timeout=A,this.retryConfig.timeoutFactor=v):(this.retryConfig.timeout=_,this.retryConfig.timeoutFactor=m))});const S=Date.now();this.compressor.init().then(()=>{this.compressorInitStatus="initialized";const I=Date.now()-S;se.debug("websocket compressor initialized successfully in ".concat(I,"ms")),$t("debug",this.compressor,"init",void 0,"websocket compressor initialized successfully in ".concat(I,"ms")),zt.wsCompressorInit({status:!0,ec:null,eventElapse:I}),this.compress=this.compressor.compress.bind(this.compressor)}).catch(I=>{this.compressorInitStatus="failed";const R=I?I.message||I.toString():"Empty Error";se.debug("websocket compressor failed to initialize because of ".concat(R)),$t("debug",this.compressor,"init",void 0,"websocket compressor failed to initialize because of ".concat(R)),zt.wsCompressorInit({status:!1,ec:R,eventElapse:1})})}getConnection(){return this.websocket||void 0}init(r){this.forceCloseTimeout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const a=(c,p)=>{this.urls=r;const _=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new wz(this),this.createWebSocketConnection(_).then(c).catch(p),this.once(In.CLOSED,()=>p(new Le(Te.WS_DISCONNECT))),this.once(In.CONNECTED,()=>c())};return this._initMutex.lock().then(c=>new qn((p,_)=>{a(p,_)}).then(()=>{c()}).catch(()=>{c()}))}close(r,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const a=this.websocket;o?setTimeout(()=>a.close(),500):a.close(),this.websocket=void 0}this.state=r?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(r,o){if(!this.websocket)return se.warning("[".concat(this.name,"] can not reconnect, no websocket")),void $t("warning",this,"reconnect","can not reconnect, no websocket");var a;void 0!==r&&(this.reconnectMode=r),se.debug("[".concat(this.name,"] reconnect is triggered initiative")),$t("debug",this,"reconnect"),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(a=this.store)||void 0===a||a.recordJoinChannelService({status:"error",errors:[new Error(o)]},this.joinChannelServiceRecordIndex));const c=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),c&&c.bind(this.websocket)({code:9999,reason:o})}sendMessageWithJSON(r){const o=JSON.stringify(r);return{compressed:o,compressedLength:o.length,origin:r}}sendMessageWithUint8Array(r){return{compressed:r,compressedLength:r.byteLength,origin:r}}sendMessage(r){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Le(Te.WS_ABORT,"websocket is not ready");try{let c=null;if(a)c=this.sendMessageWithUint8Array(r);else if("initialized"===this.compressorInitStatus&&this.useCompress&&xt("WEBSOCKET_COMPRESS"))try{c=this.compress(r),this.setWsInflateData(c)}catch{c=this.sendMessageWithJSON(r)}else c=this.sendMessageWithJSON(r);o?this.websocket.send(c.compressed):this.messageSender.pushMessage(c)}catch(c){throw new Le(Te.WS_ERR,"send websocket message error"+c.toString())}}setWsInflateData(r){this.wsDeflateLength=this.wsDeflateLength+r.originLength,this.wsInflateLength=this.wsInflateLength+r.compressedLength}getWsInflateData(){const r=this.wsInflateLength,o=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:r,wsDeflateLength:o}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}createWebSocketConnection(r,o){var a=this;return F(function*(){return a.connectionID+=1,a.joinChannelServiceRecordIndex=void 0,new qn((c,p)=>{var _;const m=()=>{se.debug("[".concat(a.name,"] websocket opened:"),r),Wl("debug",["WebSocket",a.connectionID],"open",r),a.reconnectMode="retry",a.state="connected",a.resetReconnectCount("opened"),c()},A=function(){var I=F(function*(R){if(se.debug("[".concat(a.name,"] websocket close ").concat(a.websocket&&a.websocket.url,", code: ").concat(R.code,", reason: ").concat(R.reason,", current mode: ").concat(a.reconnectMode)),Wl("debug",["WebSocket",a.connectionID],"close",{code:R.code,reason:R.reason,url:a.websocket&&a.websocket.url,reconnectMode:a.reconnectMode}),a.reconnectCount<a.retryConfig.maxRetryCount){"connected"===a.state&&(a.reconnectReason=R.reason,a.state="reconnecting");const O=eE(a,In.WILL_RECONNECT,a.reconnectMode)||a.reconnectMode,B=yield a.reconnectWithAction(O);if("closed"===a.state)return se.debug("[".concat(a.connectionID,"] ws is closed, no need to reconnect")),void jn("debug",a,"ws is closed, no need to reconnect");if(!B)return p(new Le(Te.WS_DISCONNECT,"websocket reconnect failed: ".concat(R.code))),void a.close(!0);c()}else p(new Le(Te.WS_DISCONNECT,"websocket close: ".concat(R.code))),a.close()});return function(O){return I.apply(this,arguments)}}(),v=I=>{a.emit(In.ON_MESSAGE,I)};a.websocket&&(a.websocket.onclose=null,a.websocket.close()),xt("GATEWAY_WSS_ADDRESS")&&a.name.startsWith("gateway")&&(r=xt("GATEWAY_WSS_ADDRESS")),se.debug("[".concat(a.name,"] start connect, url: ").concat(r)),jn("debug",a,"start connect, url: ".concat(r));const S=null===(_=a.store)||void 0===_?void 0:_.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});a.chooseBestWebsocketConnection(r,!!o,S).then(I=>{var R;a.websocket=I,m&&m(),I.onclose=A,I.onmessage=v,null===(R=a.store)||void 0===R||R.recordJoinChannelService({endTs:Date.now(),status:"success"},S),a.joinChannelServiceRecordIndex=S}).catch(I=>{var R;if(null===(R=a.store)||void 0===R||R.recordJoinChannelService({endTs:Date.now(),status:I instanceof Le&&I.code===Te.WS_ABORT?"aborted":"error",errors:[I]},S),"closed"!==a.state){if(I instanceof Le&&I.code===Te.WS_ERR){const O=new Le(Te.WS_ERR,"init websocket failed! Error: ".concat(I.toString()));return se.error("[".concat(a.name,"]").concat(O)),$t("error",a,"chooseBestWebsocketConnection",void 0,I.toString()),void p(O)}A&&A(I)}else p(new Le(Te.WS_DISCONNECT,"websocket is closed: ".concat(I.toString())))})})})()}reconnectWithAction(r){var o=arguments,a=this;return F(function*(){let c=!(o.length>1&&void 0!==o[1])||o[1];if(a.reconnectCount>=a.retryConfig.maxRetryCount||!a.urls||"closed"===a.state)return!1;a.onlineReconnectListener||ta.networkState!==ql.OFFLINE||(a.onlineReconnectListener=ta.onlineWaiter&&ta.onlineWaiter.then(()=>{a.onlineReconnectListener=void 0}));let p=!0;if(a.reconnectInterrupter=()=>{p=!1},c){const m=Ek(a.reconnectCount,a.retryConfig);se.debug("[".concat(a.name,"] wait ").concat(m,"ms to reconnect websocket, mode: ").concat(r)),$t("debug",a,"reconnectWithAction",{timeout:m,action:r}),yield qn.race([Ic(m),a.onlineReconnectListener||new qn(()=>{})])}if("closed"===a.state||!p)return!1;a.reconnectCount+=1;const _=function(){var m=F(function*(A,v){a.emit(In.RECONNECT_CREATE_CONNECTION,v),yield a.createWebSocketConnection(A)});return function(v,S){return m.apply(this,arguments)}}();try{if("retry"===r){const m=a.urls[a.currentURLIndex];a.emit(In.RECONNECT_WAITTING_FINISH,r),yield _(m,r)}else if("tryNext"===r){if(a.currentURLIndex+=1,a.currentURLIndex>=a.urls.length)return yield a.reconnectWithAction("recover",!1);se.debug("[".concat(a.name,"] websocket url length: ").concat(a.urls.length," current index: ").concat(a.currentURLIndex)),jn("debug",a,"websocket url length: ".concat(a.urls.length," current index: ").concat(a.currentURLIndex));const m=a.urls[a.currentURLIndex];a.emit(In.RECONNECT_WAITTING_FINISH,r),yield _(m,r)}else if("recover"===r){se.debug("[".concat(a.name,"] request new urls")),jn("debug",a,"request new urls"),a.resetReconnectCount("recover mode"),a.emit(In.RECONNECT_WAITTING_FINISH,r),a.urls=yield Ip(a,In.REQUEST_NEW_URLS),a.currentURLIndex=0;const m=a.urls[a.currentURLIndex];yield _(m,r)}return!0}catch(m){return se.error("[".concat(a.name,"] reconnect failed"),m.toString()),$t("error",a,"reconnectWithAction",void 0,m.toString()),yield a.reconnectWithAction(r,c)}})()}chooseBestWebsocketConnection(r,o,a){var c=this;return F(function*(){return new qn((p,_)=>{let m=!1;const A=[];c.closeEstablishingWs=()=>{se.debug("[choose-best-ws] close establishing websockets"),A.forEach(z=>{z.onclose=null,z.onopen=null,z.onmessage=null,z.close()}),_(new Le(Te.WS_ABORT,"choose best websocket aborted"))};const v=xt("GATEWAY_DOMAINS");let S;const I=r.indexOf("?h="),R=v.find(z=>-1!==I?r.includes(z,I):r.includes(z));se.debug("[choose-best-ws] currentDomain: ",R,", domains: ",v),$t("debug",c,"chooseBestWebsocketConnection",{currentDomain:R,domains:v});let O=!c.tryDoubleDomain||o||!R;if(!O&&R){var B;const z=Date.now();try{v.forEach(te=>{const de=-1===I?r.replace(R,te):r.substr(0,I)+r.substr(I).replace(R,te),ge=new WebSocket(de);ge.binaryType="arraybuffer",A.push(ge),se.debug("[choose-best-ws] ws is connecting:",ge.url),jn("debug",c,"ws is connecting: ".concat(ge.url))})}catch{for(se.debug("[choose-best-ws] ws create failed, fallback to single url"),jn("debug",c,"ws create failed, fallback to single url"),A.forEach(de=>de.close());A.length;)A.pop();O=!0}null===(B=c.store)||void 0===B||B.recordJoinChannelService({urls:A.map(te=>te.url),service:"gateway"},a),A.forEach(te=>{te.onopen=()=>{if(m)return;const de=Date.now()-z;se.debug("[choose-best-ws] ws open cost ".concat(de,"ms")),A.filter(ge=>ge!==te).forEach(ge=>{se.debug("[choose-best-ws]close backup websocket: ".concat(ge.url)),jn("debug",c,"close backup websocket: ".concat(ge.url)),ge.close()}),m=!0,p(te)},te.onclose=de=>{S=de,!m&&(A.find(ge=>!(ge.readyState===WebSocket.CLOSED||ge.readyState===WebSocket.CLOSING))||(se.debug("[choose-best-ws] all websocket is closed"),jn("debug",c,"all websocket is closed"),m=!0,_(S)))},te.onmessage=de=>{se.debug("[choose-best-ws]".concat(te.url," onmessage: ").concat(de.data)),jn("debug",c,"".concat(te.url," onmessage: ").concat(de.data))}}),Ic(c.forceCloseTimeout).then(()=>{A.forEach(te=>{te.readyState!==WebSocket.OPEN&&te.close()})})}if(O){var q;let z;se.debug("[choose-best-ws] use single url: ",r),jn("debug",c,"use single url: ".concat(r)),null===(q=c.store)||void 0===q||q.recordJoinChannelService({urls:[r],service:"gateway"},a);try{z=new WebSocket(r),A.push(z),z.binaryType="arraybuffer"}catch(te){const de=new Le(Te.WS_ERR,"init websocket failed! Error: ".concat(te.toString()));return se.error("[".concat(c.name,"]").concat(de)),$t("error",c,"chooseBestWebsocketConnection",void 0,te.toString()),void _(de)}z.onopen=()=>{p(z)},z.onclose=te=>{_(te)},z.onmessage=te=>{se.debug("[choose-best-ws]".concat(z.url," onmessage: ").concat(te.data)),jn("debug",c,"".concat(z.url," onmessage: ").concat(te.data))},Ic(c.forceCloseTimeout).then(()=>{z&&z.readyState!==WebSocket.OPEN&&z.close()})}}).then(p=>(c.closeEstablishingWs=void 0,p)).catch(p=>{throw c.closeEstablishingWs=void 0,p})})()}})||QL;class I8{constructor(o){J(this,"input",[]),J(this,"size",void 0),this.size=o}add(o){this.input.push(o),this.input.length>this.size&&this.input.splice(0,1)}mean(){var o;return 0===this.input.length?0:nf(o=this.input).call(o,(a,c)=>a+c)/this.input.length}}var w8;let T8=xa("AgoraRTCSignal","websocket.connectionID")(w8=class extends ko{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===en.CONNECTED?this.emit(rn.WS_CONNECTED):r===en.RECONNECTING?this.emit(rn.WS_RECONNECTING,this._websocketReconnectReason):r===en.CLOSED&&this.emit(rn.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,o){super(),J(this,"_disconnectedReason",void 0),J(this,"_websocketReconnectReason",void 0),J(this,"_connectionState",en.CLOSED),J(this,"reconnectToken",void 0),J(this,"websocket",void 0),J(this,"openConnectionTime",void 0),J(this,"clientId",void 0),J(this,"lastMsgTime",Date.now()),J(this,"uploadCache",[]),J(this,"uploadCacheInterval",void 0),J(this,"rttRolling",new I8(5)),J(this,"pingpongTimer",void 0),J(this,"wsInflateDataTimer",void 0),J(this,"pingpongTimeoutCount",0),J(this,"joinResponse",void 0),J(this,"multiIpOption",void 0),J(this,"initError",void 0),J(this,"spec",void 0),J(this,"store",void 0),J(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(rn.ON_BINARY_DATA,a.data);const c=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(c,"_id")){const p="res-@".concat(c._id);this.emit(p,c._result,c._message)}else if(Object.prototype.hasOwnProperty.call(c,"_type")&&(this.emit(c._type,c._message),c._type===Hn.ON_NOTIFICATION&&this.handleNotification(c._message),c._type===Hn.ON_USER_BANNED))switch(c._message.error_code){case 14:this.close(mt.UID_BANNED);break;case 15:this.close(mt.IP_BANNED);break;case 16:this.close(mt.CHANNEL_BANNED)}}),this.clientId=r.clientId,this.spec=r,this.store=o,this.websocket=new o0("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===en.CONNECTED&&this.reconnect("retry",Wt.OFFLINE)})}request(r,o,a,c){var p=this;return F(function*(){const _=_s(6,""),m={_id:_,_type:r,_message:o},A=p.websocket.connectionID,v=()=>new qn((q,z)=>{if(p.connectionState===en.CONNECTED)return q();const te=()=>{p.off(rn.WS_CLOSED,de),q()},de=()=>{p.off(rn.WS_CONNECTED,te),z(new Le(Te.WS_ABORT))};p.once(rn.WS_CONNECTED,te),p.once(rn.WS_CLOSED,de),r!==on.PUBLISH&&r!==on.SUBSCRIBE&&r!==on.UNSUBSCRIBE&&r!==on.UNPUBLISH&&r!==on.CONTROL||p.once(rn.DISCONNECT_P2P,()=>{z(new Le(Te.DISCONNECT_P2P))}),r===on.PUBLISH&&p.once(rn.ABORT_P2P_EXECUTION,()=>{z(new Le(Te.DISCONNECT_P2P))})});if(p.connectionState!==en.CONNECTING&&p.connectionState!==en.RECONNECTING||r===on.JOIN||r===on.REJOIN||(yield v()),p.websocket.sendMessage(m,!0),c)return;const S=new qn((q,z)=>{let te=!1;const de=(Se,Me)=>{te=!0,q({isSuccess:"success"===Se,message:Me||{}}),p.off(rn.WS_CLOSED,ge),p.off(rn.WS_RECONNECTING,ge),p.emit(rn.REQUEST_SUCCESS,r,o)};p.once("res-@".concat(_),de);const ge=()=>{z(new Le(Te.WS_ABORT,"type: ".concat(r))),p.off(rn.WS_CLOSED,ge),p.off(rn.WS_RECONNECTING,ge),p.off("res-@".concat(_),de)};p.once(rn.WS_CLOSED,ge),p.once(rn.WS_RECONNECTING,ge),Ic(xt("SIGNAL_REQUEST_TIMEOUT")).then(()=>{p.websocket.connectionID!==A||te||(se.warning("ws request timeout, type: ".concat(r)),jn("warning",p,"ws request timeout, type: ".concat(r)),p.emit(rn.REQUEST_TIMEOUT,r,o))})});let I=null;try{I=yield S}catch(q){if(p.connectionState===en.CLOSED||r===on.LEAVE)throw new Le(Te.WS_ABORT);return!p.spec.forceWaitGatewayResponse||a?q.throw():r===on.JOIN||r===on.REJOIN?null:(yield v(),yield p.request(r,o))}if(I.isSuccess)return I.message;const R=Number(I.message.error_code||I.message.code),O=wV(R),B=new Le(Te.UNEXPECTED_RESPONSE,"".concat(O.desc,": ").concat(I.message.error_str),{code:R,data:I.message});return"success"===O.action?I.message:(se.warning("[".concat(p.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(R,", message: ").concat(O.desc,", action: ").concat(O.action)),jn("warning",p,"unexpected response from type ".concat(r,", error_code: ").concat(R,", message: ").concat(O.desc,", action: ").concat(O.action)),R===Ge.ERR_TOO_MANY_BROADCASTERS?((r===on.JOIN||r===on.REJOIN)&&(p.initError=B,p.close()),B.throw()):"failed"===O.action?B.throw():"quit"===O.action?(p.initError=B,p.close(),B.throw()):(R===Ge.ERR_JOIN_BY_MULTI_IP?(p.multiIpOption=I.message.option,se.warning("[".concat(p.clientId,"] detect multi ip, recover")),jn("warning",p,"detect multi ip, recover"),p.reconnect("recover",Wt.MULTI_IP)):p.reconnect(O.action,Wt.SERVER_ERROR),r===on.JOIN||r===on.REJOIN?null:yield p.request(r,o)))})()}waitMessage(r,o){return new qn(a=>{const c=p=>{(!o||o(p))&&(this.off(r,c),a(p))};this.on(r,c)})}upload(r,o){const a={_type:r,_message:o};try{this.websocket.sendMessage(a)}catch{const p=xt("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>p&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==en.CONNECTED)return;const _=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(_._type,_._message)},xt("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,o){this.websocket.sendMessage({_type:r,_message:o})}init(r,o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new qn((a,c)=>{this.once(rn.WS_CONNECTED,()=>a(this.joinResponse)),this.once(rn.WS_CLOSED,()=>c(this.initError||new Le(Te.WS_ABORT))),this.connectionState=en.CONNECTING,this.websocket.init(r).catch(c),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{o&&void 0===this.openConnectionTime&&(se.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),c(new Le(Te.INIT_WEBSOCKET_TIMEOUT)))},xt("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||mt.LEAVE,this.connectionState=en.CLOSED,se.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),r===mt.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new o0("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}join(){var r=this;return F(function*(){if(!r.joinResponse){r.emit(rn.ABORT_P2P_EXECUTION);const o=yield Ip(r,rn.REQUEST_JOIN_INFO),a=yield r.request(on.JOIN,o);if(!a)return r.emit(rn.REPORT_JOIN_GATEWAY,Te.TIMEOUT,r.url||""),!1;r.joinResponse=a,r.emit(rn.JOIN_RESPONSE,r.joinResponse),r.reconnectToken=r.joinResponse.rejoin_token}return r.connectionState=en.CONNECTED,r.pingpongTimer&&window.clearInterval(r.pingpongTimer),r.pingpongTimer=window.setInterval(r.handlePingPong.bind(r),3e3),!0})()}rejoin(){var r=this;return F(function*(){if(!r.reconnectToken)throw new Le(Te.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const o=CT(r,rn.REQUEST_REJOIN_INFO);o.token=r.reconnectToken;const a=yield r.request(on.REJOIN,o);return!!a&&(r.connectionState=en.CONNECTED,r.pingpongTimer&&window.clearInterval(r.pingpongTimer),r.pingpongTimer=window.setInterval(r.handlePingPong.bind(r),3e3),a.peers&&a.peers.forEach(c=>{r.emit(Hn.ON_USER_ONLINE,{uid:c.uid}),c.audio&&r.emit(Hn.ON_ADD_AUDIO_STREAM,{uid:c.uid,uint_id:c.uint_id,audio:!0,ssrcId:c.audio_ssrc}),c.video&&r.emit(Hn.ON_ADD_VIDEO_STREAM,{uid:c.uid,uint_id:c.uint_id,video:!0,ssrcId:c.video_ssrc}),r.emit(c.audio_mute?Hn.MUTE_AUDIO:Hn.UNMUTE_AUDIO,{uid:c.uid}),r.emit(c.video_mute?Hn.MUTE_VIDEO:Hn.UNMUTE_VIDEO,{uid:c.uid}),r.emit(c.audio_enable_local?Hn.ENABLE_LOCAL_AUDIO:Hn.DISABLE_LOCAL_AUDIO,{uid:c.uid}),r.emit(c.video_enable_local?Hn.ENABLE_LOCAL_VIDEO:Hn.DISABLE_LOCAL_VIDEO,{uid:c.uid}),c.audio||c.video||r.emit(Hn.ON_REMOVE_STREAM,{uid:c.uid,uint_id:c.uint_id})}),!0)})()}reconnect(r,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,o)}handleNotification(r){se.debug("[".concat(this.clientId,"] receive notification: "),r),$t("debug",this,"handleNotification",r);const o=wV(r.code);if("success"!==o.action)return"failed"===o.action?(se.error("[".concat(this.clientId,"] ignore error: "),o.desc),void jn("error",this,"ignore error: ".concat(o.desc))):"quit"===o.action?("ERR_REPEAT_JOIN_CHANNEL"===o.desc&&this.close(mt.UID_BANNED),void this.close()):void this.reconnect(o.action,Wt.SERVER_ERROR)}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=xt("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=r&&(se.warning("PINGPONG Timeout. Last Socket Message: ".concat(o-this.lastMsgTime,"ms")),jn("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>xt("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Wt.TIMEOUT):this.request(on.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-o;this.rttRolling.add(a),xt("REPORT_STATS")&&this.send(on.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWsInflateData(){const{wsInflateLength:r,wsDeflateLength:o}=this.websocket.getWsInflateData();0!==r&&0!==o&&this.upload(hr.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(In.RECONNECT_WAITTING_FINISH,r=>{this.emit(rn.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(In.RECONNECT_CREATE_CONNECTION,r=>{this.emit(rn.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(In.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(In.CLOSED,()=>{this.connectionState=en.CLOSED}),this.websocket.on(In.FAILED,()=>{this._disconnectedReason=mt.NETWORK_ERROR,this.connectionState=en.CLOSED}),this.websocket.on(In.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState=this.connectionState===en.CONNECTED?en.RECONNECTING:en.CONNECTING}),this.websocket.on(In.WILL_RECONNECT,(r,o)=>{if(CT(this,rn.IS_P2P_DISCONNECTED)&&"retry"===r)return se.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),jn("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(rn.NEED_RENEW_SESSION),this.emit(rn.DISCONNECT_P2P),o("tryNext");"retry"!==r&&(se.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),jn("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(rn.NEED_RENEW_SESSION),this.emit(rn.DISCONNECT_P2P)),o(r)}),this.websocket.on(In.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{se.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),$t("warning",this,"rejoin",void 0,r.toString()),this.reconnect("tryNext",Wt.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(rn.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof Le&&r.code===Te.UNEXPECTED_RESPONSE&&r.data.code===Ge.ERR_NO_AUTHORIZED)return se.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),jn("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",Wt.SERVER_ERROR);se.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),$t("error",this,"join",void 0,r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Wt.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(In.REQUEST_NEW_URLS,(r,o)=>{Ip(this,rn.REQUEST_RECOVER,this.multiIpOption).then(r).catch(o)})}})||w8;var R8;function D8(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function _v(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?D8(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):D8(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}const O8=new Map;let Tz=xa("AgoraRTCGateway","store.clientId")(R8=class extends ko{get state(){return this._state}set state(r){if(r===this._state)return;const o=this._state;this._state=r,"DISCONNECTED"===r&&this._disconnectedReason?this.emit(Is.CONNECTION_STATE_CHANGE,r,o,this._disconnectedReason):this.emit(Is.CONNECTION_STATE_CHANGE,r,o)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(r){se.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),$t("debug",this,"joinGatewayStartTime",r,"[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),this._joinGatewayStartTime=r}constructor(r,o){super(),J(this,"store",void 0),J(this,"joinInfo",void 0),J(this,"key",void 0),J(this,"signal",void 0),J(this,"role",void 0),J(this,"inChannelInfo",{joinAt:null,duration:0}),J(this,"spec",void 0),J(this,"_state","DISCONNECTED"),J(this,"_statsCollector",void 0),J(this,"_disconnectedReason",void 0),J(this,"isSignalRecover",!1),J(this,"hasChangeBGPAddress",!1),J(this,"trafficStatsInterval",void 0),J(this,"networkQualityInterval",void 0),J(this,"_joinGatewayStartTime",0),J(this,"_signalTimeout",!1),J(this,"_clientRoleOptions",void 0),J(this,"_isProactiveJoin",!1),this.store=r,this.spec=o,this.signal=new T8(_v(_v({},o),{},{retryConfig:o.websocketRetryConfig}),r),this._statsCollector=o.statsCollector,this.role=o.role||"audience",this._clientRoleOptions=o.clientRoleOptions,this.handleSignalEvents()}join(r,o,a){var c=this;return F(function*(){c.store.joinGatewayStart(),"disabled"!==r.cloudProxyServer&&(c.hasChangeBGPAddress=!0);const p=Date.now();let _=O8.get(r.cname);if(_||(_=new Map,O8.set(r.cname,_)),c._isProactiveJoin=!0,_.has(r.uid)){const S=new Le(Te.UID_CONFLICT);throw zt.joinGateway(r.sid,{lts:p,succ:!1,ec:S.message,addr:null,uid:r.uid,cid:r.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!r.proxyServer}),c._isProactiveJoin=!1,S}_.set(r.uid,!0),c.joinInfo=r,c.key=o;const m=r.proxyServer,A=r.gatewayAddrs.map(m?S=>{const I=S.address.split(":");return"wss://".concat(m,"/ws/?h=").concat(I[0],"&p=").concat(I[1])}:S=>"wss://".concat(S.address));let v=0;c.joinGatewayStartTime=p;try{v=(yield c.signal.init(A,a)).uid}catch(S){throw S&&S.code===Te.INIT_WEBSOCKET_TIMEOUT?(se.warning("[".concat(c.store.clientId,"] User join failed"),S.toString()),S):(se.error("[".concat(c.store.clientId,"] User join failed"),S.toString()),$t("error",c,"join",void 0,S.toString()),zt.joinGateway(r.sid,{lts:p,succ:!1,ec:S.message,addr:c.signal.url,uid:r.uid,cid:r.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!m}),c._isProactiveJoin=!1,_.delete(r.uid),c.signal.close(),S)}return c.state="CONNECTED",c.inChannelInfo.joinAt=Date.now(),se.debug("[".concat(c.store.clientId,"] Connected to gateway server")),$t("debug",c,"join",void 0,"success"),c.trafficStatsInterval=window.setInterval(()=>{c.updateTrafficStats().catch(S=>{se.warning("[".concat(c.store.clientId,"] get traffic stats error"),S.toString()),$t("warning",c,"trafficStatsInterval",void 0,S.toString())})},3e3),c.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?c.emit(Is.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):c.emit(Is.NETWORK_QUALITY,c._signalTimeout?{downlinkNetworkQuality:5,uplinkNetworkQuality:5}:"CONNECTED"===c.state&&c._statsCollector.trafficStats?{uplinkNetworkQuality:G3(c._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:G3(c._statsCollector.trafficStats.B_dnq)}:{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),c.store.joinGatewayEnd(),v})()}leave(){var r=arguments,o=this;return F(function*(){let a=r.length>0&&void 0!==r[0]&&r[0],c=r.length>1?r[1]:void 0;if("DISCONNECTED"!==o.state){c!==mt.FALLBACK&&(o.state="DISCONNECTING");try{a||o.signal.connectionState!==en.CONNECTED||(yield(p=o.signal.request(on.LEAVE,void 0,!0),3e3,qn.race([p,YK(3e3)])))}catch(p){se.warning("[".concat(o.store.clientId,"] leave request failed, ignore"),p),jn("warning",o,"leave request failed, ignore, ".concat(p.toString()))}o.signal.close(c),c!==mt.FALLBACK&&(o.state="DISCONNECTED"),o.reset()}var p})()}publish(r,o,a){var c=this;return F(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new Le(Te.INVALID_OPERATION,"can not publish when connection state is ".concat(c.state));const p={state:"offer",p2p_id:c.store.p2pId,ortc:o,mode:c.spec.mode,extend:xt("PUB_EXTEND")};try{return(yield c.signal.request(on.PUBLISH,p,!0))._message}catch(_){if(a&&_.data&&_.data.code===Ge.ERR_PUBLISH_REQUEST_INVALID)return se.warning("[".concat(c.store.clientId,"] receive publish error code, retry"),_.toString()),jn("warning",c,"receive publish error code, retry, ".concat(_.toString())),yield c.tryUnpubBeforeRepub(r,o),c.publish(r,o,!1);throw _}})()}unpublish(r,o){var a=this;return F(function*(){try{if("CONNECTED"!==a.state&&"RECONNECTING"!==a.state)throw new Le(Te.INVALID_OPERATION,"can not publish when connection state is ".concat(a.state));yield a.signal.request(on.UNPUBLISH,{stream_id:o,ortc:r},!0)}catch(c){se.warning("unpublish warning: ",c),$t("warning",a,"unpublish",void 0,c.toString())}})()}subscribe(r,o,a){var c=this;return F(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new Le(Te.INVALID_OPERATION,"can not subscribe when connection state is ".concat(c.state));const p={stream_id:r,stream_type:o.stream_type,mode:c.spec.mode,codec:c.spec.codec,p2p_id:c.store.p2pId,tcc:!!xt("SUBSCRIBE_TCC"),extend:xt("SUB_EXTEND"),ssrcId:o.ssrcId};try{return(yield c.signal.request(on.SUBSCRIBE,p,!0))._message}catch(_){if(a&&_.data&&_.data.code===Ge.ERR_SUBSCRIBE_REQUEST_INVALID)return se.warning("[".concat(c.store.clientId,"] receiver subscribe error code, retry"),_.toString()),jn("warning",c,"receiver subscribe error code, retry"),yield c.tryUnsubBeforeResub(r,o),yield c.subscribe(r,o,!1);throw _}})()}subscribeAll(r,o){var a=this;return F(function*(){if("CONNECTED"!==a.state&&"RECONNECTING"!==a.state)throw new Le(Te.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(a.state));const c={p2p_id:a.store.p2pId,users:r,dtx:!1};try{return yield a.signal.request(on.SUBSCRIBE_STREAMS,c,!0)}catch(p){if(o&&p.data&&p.data.code===Ge.ERR_SUBSCRIBE_REQUEST_INVALID)return se.warning("[".concat(a.store.clientId,"] receiver massSubscribe error code, retry"),p.toString()),jn("warning",a,"receiver massSubscribe error code, retry"),yield a.tryMassUnsubBeforeResub(r),yield a.subscribeAll(r,!1);throw p}})()}setVideoProfile(r){var o=this;return F(function*(){const a=function(c){if(!(c.bitrateMax&&c.bitrateMin&&c.frameRate&&c.height&&c.width))return;let p=c.frameRate,_=c.width,m=c.height,A=!0;return"number"!=typeof p&&(p=p.exact||p.ideal||p.max||p.min||0,p||(A=!1)),"number"!=typeof _&&(_=_.exact||_.ideal||_.max||_.min||0,_||(A=!1)),"number"!=typeof m&&(m=m.exact||m.ideal||m.max||m.min||0,p||(A=!1)),A?{stream_type:0,width:_,height:m,fps:p,start_bps:1e3*c.bitrateMax,min_bps:1e3*c.bitrateMin,target_bps:1e3*c.bitrateMax}:void 0}(r);return a?o.signal.request(on.SET_VIDEO_PROFILE,a):(se.debug("[".concat(o.store.clientId,"] encoder config is not complete, do not report to gateway")),void jn("debug",o,"encoder config is not complete, do not report to gateway"))})()}unsubscribe(r,o){var a=this;return F(function*(){try{yield a.signal.request(on.UNSUBSCRIBE,{p2p_id:a.store.p2pId,ortc:r,stream_id:o},!0)}catch(c){se.warning("unsubscribe warning: ",c),$t("warning",a,"unsubscribe",void 0,c.toString())}})()}massUnsubscribe(r){var o=this;return F(function*(){try{yield o.signal.request(on.UNSUBSCRIBE_STREAMS,r,!0)}catch(a){se.warning("unsubscribeAll warning: ",a),$t("warning",o,"unsubscribeAll",void 0,a.toString())}})()}reconnectPC(r){var o=this;return F(function*(){const{iceParameters:a,dtlsParameters:c,rtpCapabilities:p}=r,_=yield o.signal.request(on.CONNECT_PC,{p2p_id:o.store.p2pId,stream_id:o.store.uid,ortc:{iceParameters:a,dtlsParameters:c,rtpCapabilities:p}},!0),m=o.getGatewayIpPort();return{gatewayEstablishParams:_,gatewayIP:m?.ip,gatewayPort:m?.port}})()}getGatewayInfo(){return this.signal.request(on.GATEWAY_INFO)}renewToken(r){return this.signal.request(on.RENEW_TOKEN,r)}setClientRole(r,o){var a=this;return F(function*(){if(o&&(a._clientRoleOptions=Object.assign({},o)),"CONNECTED"!==a.state)return void(a.role=r);let c;c="audience"===r?a._clientRoleOptions&&a._clientRoleOptions.level?a._clientRoleOptions.level:2:0,yield a.signal.request(on.SET_CLIENT_ROLE,{role:r,level:c,client_ts:Date.now()}),a.role=r})()}setRemoteVideoStreamType(r,o){var a=this;return F(function*(){yield a.signal.request(on.SWITCH_VIDEO_STREAM,{stream_id:r,stream_type:o})})()}setDefaultRemoteVideoStreamType(r){var o=this;return F(function*(){yield o.signal.request(on.DEFAULT_VIDEO_STREAM,{stream_type:r})})()}setStreamFallbackOption(r,o){var a=this;return F(function*(){yield a.signal.request(on.SET_FALLBACK_OPTION,{stream_id:r,fallback_type:o})})()}pickSVCLayer(r,o){var a=this;return F(function*(){yield a.signal.request(on.PICK_SVC_LAYER,{stream_id:r,spatial_layer:o.spatialLayer,temporal_layer:o.temporalLayer})})()}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),_v({},this.inChannelInfo)}getGatewayVersion(){var r=this;return F(function*(){return(yield r.signal.request(on.GATEWAY_INFO)).version})()}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const r=O8.get(this.joinInfo.cname);r&&r.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const r=function(o){const a=o.match(/(wss\:\/\/)?([^:]+):(\d+)/);return a?{username:Qs.username,password:Qs.password,turnServerURL:a[2],tcpport:parseInt(a[3])+30,udpport:parseInt(a[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],r&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(_v(_v({},Qs),{},{turnServerURL:r.turnServerURL,tcpport:r.tcpport,udpport:r.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}updateTrafficStats(){var r=this;return F(function*(){if("CONNECTED"!==r.state)return;const o=yield r.signal.request(on.TRAFFIC_STATS,void 0,!0);o.timestamp=Date.now(),o.peer_delay.forEach(a=>{const c=r._statsCollector.trafficStats&&r._statsCollector.trafficStats.peer_delay.find(p=>p.peer_uid===a.peer_uid);c&&c.B_st!==a.B_st&&Ph(()=>{r.emit(Is.STREAM_TYPE_CHANGE,a.peer_uid,a.B_st)})}),r._statsCollector.updateTrafficStats(o)})()}getJoinMessage(r){if(!this.joinInfo||!this.key)throw new Le(Te.UNEXPECTED_ERROR,"can not generate join message, no join info");const o=Object.assign({},this.joinInfo.apResponse);let a=xt("REPORT_APP_SCENARIO");if("string"!=typeof a)try{a=JSON.stringify(a)}catch{a=void 0}a&&a.length>128&&(a=void 0);const c=_v({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:El,browser:navigator.userAgent,process_id:xt("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:o,extend:xt("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:a,attributes:{userAttributes:{enablePublishedUserList:xt("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:xt("MAX_SUBSCRIPTION")}},join_ts:this.joinGatewayStartTime},r);return this.joinInfo.stringUid&&(c.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(c.aes_mode=this.joinInfo.aesmode,xt("ENCRYPT_AES")?(c.aes_secret=this.joinInfo.aespassword,c.aes_encrypt=!0):c.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(c.aes_salt=this.joinInfo.aessalt)),o.addresses[this.signal.websocket.currentURLIndex]&&(c.ap_response.ticket=o.addresses[this.signal.websocket.currentURLIndex].ticket,delete o.addresses),void 0!==this.joinInfo.defaultVideoStream&&(c.default_video_stream=this.joinInfo.defaultVideoStream),c}getRejoinMessage(){if(!this.joinInfo)throw new Le(Te.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){var r=this;this.signal.on(rn.WS_RECONNECT_WAITTING_FINISH,o=>{["tryNext","recover"].includes(o)&&this.joinInfo&&zt.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(rn.WS_RECONNECT_CREATE_CONNECTION,o=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(rn.WS_RECONNECTING,o=>{this.joinInfo&&zt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:o||Wt.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",zt.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(rn.WS_CLOSED,o=>{let a;switch(o){case mt.LEAVE:a=Wt.LEAVE;break;case mt.UID_BANNED:case mt.IP_BANNED:case mt.CHANNEL_BANNED:case mt.SERVER_ERROR:a=Wt.SERVER_ERROR;break;case mt.FALLBACK:a=Wt.FALLBACK;break;default:a=Wt.NETWORK_ERROR}se.debug("[signal] websocket closed, reason: ".concat(a||"undefined -> "+Wt.NETWORK_ERROR)),ji("debug",this,"ws_closed","reason: ".concat(o)),this.joinInfo&&zt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:o===mt.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:a}),this._disconnectedReason=o,o!==mt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(rn.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(se.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),jn("debug",this,"patch to send set client role, role: ".concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),zt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint)){const o=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!o)return se.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(o)),void jn("error",this,"set local access point after joined failed: ".concat(o));La("EVENT_REPORT_DOMAIN",o[1]),La("EVENT_REPORT_BACKUP_DOMAIN",o[1]),La("LOG_UPLOAD_SERVER","".concat(o[1],":6444"))}}),this.signal.on(Hn.ON_UPLINK_STATS,o=>{this._statsCollector.updateUplinkStats(o)}),this.signal.on(rn.REQUEST_RECOVER,(o,a,c)=>{if(!this.joinInfo)return c(new Le(Te.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));o&&(this.joinInfo.multiIP=o,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Ip(this,Is.REQUEST_NEW_GATEWAY_LIST).then(a).catch(c)}),this.signal.on(rn.REQUEST_JOIN_INFO,function(){var o=F(function*(a){var c;r.updateTurnConfigFromSignal();const{iceParameters:p,dtlsParameters:_,rtpCapabilities:m}=yield Ip(r,Is.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(c=r.joinInfo)||void 0===c?void 0:c.turnServer});a(r.getJoinMessage({ortc:{iceParameters:p,dtlsParameters:_,rtpCapabilities:m,version:"2"}}))});return function(a){return o.apply(this,arguments)}}()),this.signal.on(rn.REQUEST_REJOIN_INFO,o=>{o(this.getRejoinMessage())}),this.signal.on(rn.REPORT_JOIN_GATEWAY,(o,a)=>{this.joinInfo&&(zt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:o,addr:a,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1)}),this.signal.on(rn.IS_P2P_DISCONNECTED,o=>{o(CT(this,Is.IS_P2P_DISCONNECTED))}),this.signal.on(rn.DISCONNECT_P2P,()=>{this.emit(Is.DISCONNECT_P2P)}),this.signal.on(rn.NEED_RENEW_SESSION,()=>{this.emit(Is.NEED_RENEW_SESSION)}),this.signal.on(rn.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(rn.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(rn.JOIN_RESPONSE,o=>{const a=this.getGatewayIpPort();a?this.emit(Is.JOIN_RESPONSE,o,a.ip,a.port):this.emit(Is.JOIN_RESPONSE,o)})}tryUnsubBeforeResub(r,o){var a=this;return F(function*(){try{yield a.signal.request(on.UNSUBSCRIBE,{p2p_id:a.store.p2pId,stream_id:r,ortc:[o]},!0)}catch(c){throw se.warning("unsubscribe warning",c),$t("warning",a,"tryUnsubBeforeResub",r,c.toString()),c}})()}tryUnpubBeforeRepub(r,o){var a=this;return F(function*(){try{yield a.signal.request(on.UNPUBLISH,{stream_id:r,ortc:o},!0)}catch(c){throw se.warning("unpublish warning: ",c),$t("warning",a,"tryUnpubBeforeRepub",r,c.toString()),c}})()}tryMassUnsubBeforeResub(r){var o=this;return F(function*(){const a={users:r.map(c=>({stream_id:c.stream_id,stream_type:c.stream_type}))};try{yield o.signal.request(on.UNSUBSCRIBE_STREAMS,a,!0)}catch(c){throw se.warning("massUnsubscribe warning",c),$t("warning",o,"tryUnsubAllBeforeResub",r.map(p=>p.stream_id),c.toString()),c}})()}muteLocal(r,o){var a=this;return F(function*(){const c={action:r.find(p=>p.stream_type===Zo.Audio)?"mute_local_audio":"mute_local_video",p2p_id:a.store.p2pId,ortc:r,stream_id:o};try{yield a.signal.request(on.CONTROL,c,!0,!0)}catch(p){throw se.warning("gateway unmuteLocal warning: ",p),$t("warning",a,"muteLocal",o,p.toString()),p}})()}unmuteLocal(r,o){var a=this;return F(function*(){const c={action:r.find(p=>p.stream_type===Zo.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:a.store.p2pId,ortc:r,stream_id:o};try{yield a.signal.request(on.CONTROL,c,!0,!0)}catch(p){throw se.warning("gateway muteLocal warning: ",p),$t("warning",a,"unmuteLocal",o,p.toString()),p}})()}uploadStats(r,o){this.signal.upload(r,o)}getSignalRTT(){return this.signal.rtt}restartICE(r){var o=this;return F(function*(){const a={p2p_id:o.store.p2pId,stream_id:o.store.uid,ortc:r};try{const c=yield o.signal.request(on.RESTART_ICE,a,!0),p=o.getGatewayIpPort();return{restartICEResponse:c,gatewayIP:p?.ip,gatewayPort:p?.port}}catch(c){throw se.warning("P2PChannel.restartICE warning: ",c),$t("warning",o,"restartICE",void 0,c.toString()),c}})()}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,Wt.P2P_FAILED)}getGatewayIpPort(){var r;if(!xt("GATEWAY_WSS_ADDRESS")&&null!==(r=this.joinInfo)&&void 0!==r&&r.gatewayAddrs){const o=this.joinInfo.gatewayAddrs[this.signal.currentURLIndex];return(o.ip||o.ip6)&&o.port?o.ip6?{ip:o.ip6,port:o.port}:{ip:o.ip,port:o.port}:void 0}}})||R8;function LH(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function BH(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?LH(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):LH(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}!function(){var r;function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var c,a="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,s){return t==Array.prototype||t==Object.prototype||(t[e]=s.value),t},p=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof re&&re];for(var e=0;e<t.length;++e){var s=t[e];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")}(this);function _(t,e){if(e)e:{var s=p;t=t.split(".");for(var d=0;d<t.length-1;d++){var f=t[d];if(!(f in s))break e;s=s[f]}(e=e(d=s[t=t[t.length-1]]))!=d&&null!=e&&a(s,t,{configurable:!0,writable:!0,value:e})}}function m(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function A(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}if(_("Symbol",function(t){function e(f,b){this.A=f,a(this,"description",{configurable:!0,writable:!0,value:b})}if(t)return t;e.prototype.toString=function(){return this.A};var s="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",d=0;return function f(b){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new e(s+(b||"")+"_"+d++,b)}}),_("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),s=0;s<e.length;s++){var d=p[e[s]];"function"==typeof d&&"function"!=typeof d.prototype[t]&&a(d.prototype,t,{configurable:!0,writable:!0,value:function(){return m(o(this))}})}return t}),"function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var v;e:{var S={};try{S.__proto__={a:!0},v=S.a;break e}catch{}v=!1}c=v?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var I=c;function R(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function O(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}function B(t,e){return t.h=3,{value:e}}function q(t){this.g=new R,this.G=t}function z(t,e,s,d){try{var f=e.call(t.g.j,s);if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");if(!f.done)return t.g.m=!1,f;var b=f.value}catch(E){return t.g.j=null,t.g.s(E),te(t)}return t.g.j=null,d.call(t.g,b),te(t)}function te(t){for(;t.g.h;)try{var e=t.G(t.g);if(e)return t.g.m=!1,{value:e.value,done:!1}}catch(s){t.g.v=void 0,t.g.s(s)}if(t.g.m=!1,t.g.l){if(e=t.g.l,t.g.l=null,e.F)throw e.D;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function de(t){this.next=function(e){return t.o(e)},this.throw=function(e){return t.s(e)},this.return=function(e){return function(s,d){O(s.g);var f=s.g.j;return f?z(s,"return"in f?f.return:function(b){return{value:b,done:!0}},d,s.g.return):(s.g.return(d),te(s))}(t,e)},this[Symbol.iterator]=function(){return this}}function ge(t,e){return e=new de(new q(e)),I&&t.prototype&&I(e,t.prototype),e}if(R.prototype.o=function(t){this.v=t},R.prototype.s=function(t){this.l={D:t,F:!0},this.h=this.C||this.u},R.prototype.return=function(t){this.l={return:t},this.h=this.u},q.prototype.o=function(t){return O(this.g),this.g.j?z(this,this.g.j.next,t,this.g.o):(this.g.o(t),te(this))},q.prototype.s=function(t){return O(this.g),this.g.j?z(this,this.g.j.throw,t,this.g.o):(this.g.s(t),te(this))},_("Array.prototype.entries",function(t){return t||function(){return function(e,s){e instanceof String&&(e+="");var d=0,f=!1,b={next:function(){if(!f&&d<e.length){var E=d++;return{value:s(E,e[E]),done:!1}}return f=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}(this,function(e,s){return[e,s]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var Se=function(t,e){for(var s=0;s<t.length;s++)e(t[s])},Me=function(t){return t.replace(/\r?\n|\r/g,"\r\n")},dt=function(t,e,s){return e instanceof Blob?(s=void 0!==s?String(s+""):"string"==typeof e.name?e.name:"blob",e.name===s&&"[object Blob]"!==Object.prototype.toString.call(e)||(e=new File([e],s)),[String(t),e]):[String(t),String(e)]},kt=function(t,e){if(t.length<e)throw new TypeError(e+" argument required, but only "+t.length+" present.")},Mt="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,Lt=Mt.FormData,Vn=Mt.XMLHttpRequest&&Mt.XMLHttpRequest.prototype.send,wn=Mt.Request&&Mt.fetch,yn=Mt.navigator&&Mt.navigator.sendBeacon,Ct=Mt.Element&&Mt.Element.prototype,We=Mt.Symbol&&Symbol.toStringTag;We&&(Blob.prototype[We]||(Blob.prototype[We]="Blob"),"File"in Mt&&!File.prototype[We]&&(File.prototype[We]="File"));try{new File([],"")}catch{Mt.File=function(e,s,d){return e=new Blob(e,d||{}),Object.defineProperties(e,{name:{value:s},lastModified:{value:+(d&&void 0!==d.lastModified?new Date(d.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),We&&Object.defineProperty(e,We,{value:"File"}),e}}var lt=function(t){return t.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},At=function(t){this.i=[];var e=this;t&&Se(t.elements,function(s){if(s.name&&!s.disabled&&"submit"!==s.type&&"button"!==s.type&&!s.matches("form fieldset[disabled] *"))if("file"===s.type){var d=s.files&&s.files.length?s.files:[new File([],"",{type:"application/octet-stream"})];Se(d,function(f){e.append(s.name,f)})}else"select-multiple"===s.type||"select-one"===s.type?Se(s.options,function(f){!f.disabled&&f.selected&&e.append(s.name,f.value)}):"checkbox"===s.type||"radio"===s.type?s.checked&&e.append(s.name,s.value):(d="textarea"===s.type?Me(s.value):s.value,e.append(s.name,d))})};if((r=At.prototype).append=function(t,e,s){kt(arguments,2),this.i.push(dt(t,e,s))},r.delete=function(t){kt(arguments,1);var e=[];t=String(t),Se(this.i,function(s){s[0]!==t&&e.push(s)}),this.i=e},r.entries=function t(){var e,s=this;return ge(t,function(d){if(1==d.h&&(e=0),3!=d.h)return e<s.i.length?d=B(d,s.i[e]):(d.h=0,d=void 0),d;e++,d.h=2})},r.forEach=function(t,e){kt(arguments,1);for(var s=A(this),d=s.next();!d.done;d=s.next()){var f=A(d.value);d=f.next().value,f=f.next().value,t.call(e,f,d,this)}},r.get=function(t){kt(arguments,1);var e=this.i;t=String(t);for(var s=0;s<e.length;s++)if(e[s][0]===t)return e[s][1];return null},r.getAll=function(t){kt(arguments,1);var e=[];return t=String(t),Se(this.i,function(s){s[0]===t&&e.push(s[1])}),e},r.has=function(t){kt(arguments,1),t=String(t);for(var e=0;e<this.i.length;e++)if(this.i[e][0]===t)return!0;return!1},r.keys=function t(){var e,s,b=this;return ge(t,function(E){if(1==E.h&&(e=A(b),s=e.next()),3!=E.h)return s.done?void(E.h=0):B(E,A(s.value).next().value);s=e.next(),E.h=2})},r.set=function(t,e,s){kt(arguments,2),t=String(t);var d=[],f=dt(t,e,s),b=!0;Se(this.i,function(E){E[0]===t?b&&(b=!d.push(f)):d.push(E)}),b&&d.push(f),this.i=d},r.values=function t(){var e,s,f,b=this;return ge(t,function(E){if(1==E.h&&(e=A(b),s=e.next()),3!=E.h)return s.done?void(E.h=0):((f=A(s.value)).next(),B(E,f.next().value));s=e.next(),E.h=2})},At.prototype._asNative=function(){for(var t=new Lt,e=A(this),s=e.next();!s.done;s=e.next()){var d=A(s.value);s=d.next().value,d=d.next().value,t.append(s,d)}return t},At.prototype._blob=function(){var t="----formdata-polyfill-"+Math.random(),e=[],s="--"+t+'\r\nContent-Disposition: form-data; name="';return this.forEach(function(d,f){return"string"==typeof d?e.push(s+lt(Me(f))+'"\r\n\r\n'+Me(d)+"\r\n"):e.push(s+lt(Me(f))+'"; filename="'+lt(d.name)+'"\r\nContent-Type: '+(d.type||"application/octet-stream")+"\r\n\r\n",d,"\r\n")}),e.push("--"+t+"--"),new Blob(e,{type:"multipart/form-data; boundary="+t})},At.prototype[Symbol.iterator]=function(){return this.entries()},At.prototype.toString=function(){return"[object FormData]"},Ct&&!Ct.matches&&(Ct.matches=Ct.matchesSelector||Ct.mozMatchesSelector||Ct.msMatchesSelector||Ct.oMatchesSelector||Ct.webkitMatchesSelector||function(t){for(var e=(t=(this.document||this.ownerDocument).querySelectorAll(t)).length;0<=--e&&t.item(e)!==this;);return-1<e}),We&&(At.prototype[We]="FormData"),Vn){var n=Mt.XMLHttpRequest.prototype.setRequestHeader;Mt.XMLHttpRequest.prototype.setRequestHeader=function(t,e){n.call(this,t,e),"content-type"===t.toLowerCase()&&(this.B=!0)},Mt.XMLHttpRequest.prototype.send=function(t){t instanceof At?(t=t._blob(),this.B||this.setRequestHeader("Content-Type",t.type),Vn.call(this,t)):Vn.call(this,t)}}wn&&(Mt.fetch=function(t,e){return e&&e.body&&e.body instanceof At&&(e.body=e.body._blob()),wn.call(this,t,e)}),yn&&(Mt.navigator.sendBeacon=function(t,e){return e instanceof At&&(e=e._asNative()),yn.call(this,t,e)}),Mt.FormData=At}}();let k8=1;function FH(r,o,a,c,p){k8+=1;const _={sid:a.sid,command:"convergeAllocateEdge",uid:"666",appId:a.appId,ts:Math.floor(Date.now()/1e3),seq:k8,requestId:k8,version:El,cname:a.cname},m={service_name:o,json_body:JSON.stringify(_)};let A,v,S=r[0];return Ss(F(function*(){A=Date.now();const I=yield Cp(S,{data:m,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(v=Date.now()-A,0!==I.code){const B=new Le(Te.UNEXPECTED_RESPONSE,"live streaming ap error, code"+I.code,{retry:!0,responseTime:v});throw se.error(B.toString()),$t("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,B.toString()),B}const R=JSON.parse(I.json_body);if(200!==R.code){const B=new Le(Te.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(R.code,", reason: ").concat(R.reason),{code:R.code,responseTime:v});throw se.error(B.toString()),$t("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,B.toString()),B}if(!R.servers||0===R.servers.length){const B=new Le(Te.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:R.code,responseTime:v});throw se.error(B.toString()),$t("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,B.toString()),B}const O=(q=o,{addressList:(B=R).servers.map(z=>"wss://".concat(z.address.replace(/\./g,"-"),".").concat(xt("WORKER_DOMAIN"),":").concat(z.wss,"?serviceName=").concat(encodeURIComponent(q))),workerToken:B.workerToken,vid:B.vid});var B,q;return xt("LIVE_STREAMING_ADDRESS")&&(O.addressList=xt("LIVE_STREAMING_ADDRESS")instanceof Array?xt("LIVE_STREAMING_ADDRESS"):[xt("LIVE_STREAMING_ADDRESS")]),BH(BH({},O),{},{responseTime:v})}),(I,R)=>(zt.apworkerEvent(a.sid,{success:!0,sc:200,serviceName:o,responseDetail:JSON.stringify(I.addressList),firstSuccess:0===R,responseTime:v,serverIp:r[R%r.length]}),!1),(I,R)=>(zt.apworkerEvent(a.sid,{success:!1,sc:I.data&&I.data.code||200,serviceName:o,responseTime:v,serverIp:r[R%r.length]}),!!(I.code!==Te.OPERATION_ABORTED&&I.code!==Te.UNEXPECTED_RESPONSE||I.data&&I.data.retry)&&(S=r[(R+1)%r.length],!0)),p)}let P8=1;function UH(r,o,a,c){let{url:p,areaCode:_}=r;$t("debug",["AjaxAPI",o.clientId],"requestChooseServer",{url:p,areaCode:_});const m=Date.now(),[A,v]=N8(o,_,[ea.CHOOSE_SERVER]);let S=ta.networkState;return Ss(F(function*(){S&&ta.networkState===ql.OFFLINE&&ta.onlineWaiter&&(yield qn.race([ta.onlineWaiter,Ic(c&&c.maxRetryTimeout||wo.maxRetryTimeout)])),S=ta.networkState;const I=yield Cp(p,{data:A,cancelToken:a,headers:{"Content-Type":"multipart/form-data;"}},!0);zt.reportResourceTiming(p,o.sid),M8(I,p,o,m,[ea.CHOOSE_SERVER]);const R=W3(I,ea.CHOOSE_SERVER);return _P(R),B7(R,p)}),I=>(I&&zt.joinChooseServer(o.sid,{lts:m,succ:!0,csAddr:p,opid:v,serverList:I.gatewayAddrs.map(R=>R.address),ec:null,cid:I.cid.toString(),uid:I.uid.toString(),csIp:I.csIp,unilbsServerIds:[ea.CHOOSE_SERVER].toString()}),!1),I=>I.code!==Te.OPERATION_ABORTED&&(I.code===Te.CAN_NOT_GET_GATEWAY_SERVER?I.data.retry:(zt.joinChooseServer(o.sid,{lts:m,succ:!1,csAddr:p,serverList:null,opid:v,ec:I.code,csIp:I.data&&I.data.csIp,unilbsServerIds:[ea.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:S})}),se.warning("[".concat(o.clientId,"] Choose server network error, retry"),I),jn("warning",["AjaxAPI",o.clientId],"Choose server network error, retry, ".concat(I)),!0)),c)}function VH(r,o,a,c){let{url:p,areaCode:_,serviceIds:m}=r;$t("debug",["AjaxAPI",o.clientId],"requestMultiUnilbs",{url:p,areaCode:_,serviceIds:m});const A=Date.now(),[v,S]=N8(o,_,m);let I;return Ss(F(function*(){I&&ta.networkState===ql.OFFLINE&&ta.onlineWaiter&&(yield qn.race([ta.onlineWaiter,Ic(c&&c.maxRetryTimeout||wo.maxRetryTimeout)])),I=ta.networkState;const R=yield Cp(p,{data:v,cancelToken:a,headers:{"Content-Type":"multipart/form-data;"}},!0);zt.reportResourceTiming(p,o.sid),M8(R,p,o,A,m);const O=W3(R,ea.CHOOSE_SERVER),B=W3(R,"proxy5"===o.cloudProxyServer?ea.CLOUD_PROXY_5:"proxy3"===o.cloudProxyServer||"proxy4"===o.cloudProxyServer?ea.CLOUD_PROXY:ea.CLOUD_PROXY_FALLBACK);return _P(O),{gatewayInfo:B7(O,p),proxyInfo:B,url:p}}),R=>(R.gatewayInfo&&zt.joinChooseServer(o.sid,{lts:A,succ:!0,csAddr:p,serverList:R.gatewayInfo.gatewayAddrs.map(O=>O.address),ec:null,opid:S,cid:R.gatewayInfo.cid.toString(),uid:R.gatewayInfo.uid.toString(),csIp:R.gatewayInfo.csIp,unilbsServerIds:m.toString()}),R.proxyInfo&&zt.joinWebProxyAP(o.sid,{lts:A,sucess:1,apServerAddr:p,turnServerAddrList:R.proxyInfo.addresses.map(O=>O.ip).join(","),errorCode:null,eventType:o.cloudProxyServer,unilbsServerIds:m.toString()}),!1),R=>R.code!==Te.OPERATION_ABORTED&&(R.code===Te.CAN_NOT_GET_GATEWAY_SERVER?R.data.retry:(zt.joinWebProxyAP(o.sid,{lts:A,sucess:0,apServerAddr:p,turnServerAddrList:null,errorCode:R.code,eventType:o.cloudProxyServer,unilbsServerIds:m.toString(),extend:JSON.stringify({networkState:I})}),se.warning("[".concat(o.clientId,"] multi unilbs network error, retry"),R),jn("warning",["AjaxAPI",o.clientId],"multi unilbs network error, retry, ".concat(R)),!0)),c)}const M8=(r,o,a,c,p)=>{const _=[],m=A=>{4096===A.flag?zt.joinChooseServer(a.sid,{lts:c,succ:!1,csAddr:o,opid:r.opid,serverList:null,ec:A.error.message,csIp:A.error.data&&A.error.data.csIp,unilbsServerIds:p.toString()}):1048576!==A.flag&&4194304!==A.flag&&4194310!==A.flag||zt.joinWebProxyAP(a.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:A.error.code,eventType:a.cloudProxyServer,unilbsServerIds:p.toString()})};if(r.response_body.forEach(A=>{const v=A.buffer.code;if(23===A.uri&&0===v&&!A.buffer.edges_services)if(4194310===A.buffer.flag)se.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),A.buffer.edges_services=[];else{const S={error:new Le(Te.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:r.detail[502]}),flag:A.buffer.flag};_.push(S),m(S)}if(0!==v){const S=mP(v),I={error:new Le(Te.CAN_NOT_GET_GATEWAY_SERVER,S.desc,{retry:S.retry,csIp:r.detail[502]}),flag:A.buffer.flag};4194310===A.buffer.flag?se.warning(I.error.toString()):_.push(I),m(I)}}),_.length)throw se.warning("[".concat(a.clientId,"] multi unilbs ").concat(o," failed, ").concat(_.map(A=>"flag: ".concat(A.flag,", message: ").concat(A.error.message,", retry: ").concat(A.error.data.retry)).join(" | "))),$t("warning",["AjaxAPI",a.clientId],"checkMultiUnilbsResponseValid",{url:o},_.map(A=>({flag:A.flag,message:A.error.message,retry:A.error.data.retry}))),new Le(Te.CAN_NOT_GET_GATEWAY_SERVER,_.map(A=>"flag: ".concat(A.flag,", message: ").concat(A.error.message)).join(" | "),{retry:!!_.find(A=>A.error.data.retry),csIp:r.detail[502]})},_P=r=>{if(r.addresses&&0===r.addresses.length&&0===r.code)throw new Le(Te.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:r.detail&&r.detail[502]});if(xt("GATEWAY_ADDRESS")&&xt("GATEWAY_ADDRESS").length>0){se.debug("assign gateway address to",xt("GATEWAY_ADDRESS")),jn("debug",["AjaxAPI"],"assign gateway address to ".concat(JSON.stringify(xt("GATEWAY_ADDRESS"))));const o=xt("GATEWAY_ADDRESS").map(a=>({ip:a.ip,port:a.port,ticket:r.addresses[0]&&r.addresses[0].ticket}));r.addresses=o}},jH=(r,o)=>{if(r.response_body&&r.response_body.length){const a=r.response_body[0];if(0!==a.buffer.code){const c=mP(a.buffer.code);throw new Le(Te.UPDATE_TICKET_FAILED,"[".concat(a.buffer.code,"]: ").concat(c.desc),{retry:c.retry})}return a.buffer.ticket}throw se.debug("update ticket request received ap response without response body:",o),jn("debug",["AjaxAPI"],"update ticket request received ap response without response body: ".concat(o)),new Le(Te.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},N8=(r,o,a)=>{const c=Math.floor(1e12*Math.random()),p={appid:r.appId,client_ts:Date.now(),opid:c,sid:r.sid,request_bodies:[{uri:22,buffer:{cname:r.cname,detail:{6:r.stringUid,11:o,12:xt("USE_NEW_TOKEN")?"1":void 0},key:r.token,service_ids:a,uid:r.uid||0}}]};p.request_bodies.forEach(m=>{r.multiIP&&r.multiIP.gateway_ip&&(m.buffer.detail[5]=JSON.stringify({vocs_ip:[r.multiIP.uni_lbs_ip],vos_ip:[r.multiIP.gateway_ip]}))});const _=new FormData;return _.append("request",JSON.stringify(p)),[_,c]},QH=(r,o)=>{const a=Math.floor(1e12*Math.random()),c={appid:r.appId,client_ts:Date.now(),opid:a,sid:r.sid,request_bodies:[{uri:28,buffer:{cname:r.cname,detail:{1:"",6:r.stringUid,12:"1"},token:r.token,service_ids:o,uid:r.uid||0,edges_services:r.apResponse.addresses.map(_=>({ip:_.ip,port:_.port}))}}]},p=new FormData;return p.append("request",JSON.stringify(c)),[p,a]};let DV=0;const vP=()=>{const r=xt("AREAS");return 0===r.length&&r.push(si.GLOBAL),nf(r).call(r,(o,a,c)=>{const p=HH(a);return p?0===c?p:"".concat(o,",").concat(p):o},"")},HH=r=>r===si.OVERSEA?"".concat(Zs.ASIA,",").concat(Zs.EUROPE,",").concat(Zs.AFRICA,",").concat(Zs.NORTH_AMERICA,",").concat(Zs.SOUTH_AMERICA,",").concat(Zs.OCEANIA):Zs[r],HL={GLOBAL:{ASIA:[si.CHINA,si.JAPAN,si.INDIA,si.KOREA,si.HKMC],EUROPE:[],NORTH_AMERICA:[si.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},OV=Object.keys(HL[si.GLOBAL]),x8=[si.CHINA,si.NORTH_AMERICA,si.EUROPE,si.ASIA,si.JAPAN,si.INDIA,si.OCEANIA,si.SOUTH_AMERICA,si.AFRICA,si.KOREA,si.HKMC,si.US];function AP(r,o,a,c){return L8.apply(this,arguments)}function L8(){return L8=F(function*(r,o,a,c){return{gatewayInfo:yield(_=F(function*(m,A,v,S){let I=null;const R=[],O=function(){var q=F(function*(){const z=xt("WEBCS_DOMAIN").slice(0,xt("AJAX_REQUEST_CONCURRENT")).map(ge=>({url:m.proxyServer?"https://".concat(m.proxyServer,"/ap/?url=").concat(ge+"/api/v2/transpond/webrtc?v=2"):"https://".concat(ge,"/api/v2/transpond/webrtc?v=2"),areaCode:vP()})),te=S.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:z.map(ge=>ge.url)}),de=yield IT({fragementLength:xt("FRAGEMENT_LENGTH"),referenceList:z,asyncMapHandler:ge=>(se.debug("[".concat(m.clientId,"] Connect to choose_server:"),ge.url),UH(ge,m,A,v)),allFailedhandler:ge=>{throw S.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ge},te),ge[0]},promisesCollector:R});return S.recordJoinChannelService({endTs:Date.now(),status:"success"},te),de});return function(){return q.apply(this,arguments)}}(),B=function(){var q=F(function*(){if(yield Ic(1e3),null!==I)return I;const z=xt("WEBCS_DOMAIN_BACKUP_LIST").map(ge=>({url:m.proxyServer?"https://".concat(m.proxyServer,"/ap/?url=").concat(ge+"/api/v2/transpond/webrtc?v=2"):"https://".concat(ge,"/api/v2/transpond/webrtc?v=2"),areaCode:vP()})),te=S.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:z.map(ge=>ge.url)}),de=yield IT({fragementLength:xt("FRAGEMENT_LENGTH"),referenceList:z,asyncMapHandler:ge=>(se.debug("[".concat(m.clientId,"] Connect to backup choose_server:"),ge.url),UH(ge,m,A,v)),allFailedhandler:ge=>{throw S.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ge},te),ge[0]},promisesCollector:R});return S.recordJoinChannelService({endTs:Date.now(),status:"success"},te),de});return function(){return q.apply(this,arguments)}}();try{return I=yield ST([O(),B()]),R.length&&R.forEach(q=>q.cancel&&"function"==typeof q.cancel&&q.cancel()),I}catch(q){throw q[0]}}),function(m,A,v,S){return _.apply(this,arguments)})(r,o,a,c)};var _}),L8.apply(this,arguments)}function B8(r,o,a,c,p){return GL.apply(this,arguments)}function GL(){return GL=F(function*(r,o,a,c,p){const _=r.cloudProxyServer;if("disabled"===_){if(!c)return;if(r.useLocalAccessPoint)return yield AP(r,o,a,p);if(xt("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:A,proxyInfo:v}=yield F8(r,o,a,p);return r.turnServer&&"auto"!==r.turnServer.mode?(jn("debug",["Server",r.clientId],"do not set fallback turn because of already having turnserver"),{gatewayInfo:A}):(r.turnServer={mode:"manual",servers:v.map(S=>({turnServerURL:S.address,tcpport:S.tcpport||Qs.tcpport,udpport:S.udpport||Qs.udpport,username:S.username||Qs.username,password:S.password||Qs.password,forceturn:xt("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))},{gatewayInfo:A})}return yield AP(r,o,a,p)}let m;if(["443only","normal"].includes(_)){let A;c?"normal"!==_?[A,m]=yield qn.all([KL(r,o,a),AP(r,o,a,p)]):(A=yield KL(r,o,a),r.proxyServer=A.addresses[0],zt.setProxyServer(r.proxyServer),se.setProxyServer(r.proxyServer),tv(r.proxyServer),m=yield AP(r,o,a,p)):(m=void 0,"normal"!==_?A=yield KL(r,o,a):(A=yield KL(r,o,a),r.proxyServer=A.addresses[0],zt.setProxyServer(r.proxyServer),se.setProxyServer(r.proxyServer),tv(r.proxyServer))),r.turnServer={mode:"manual",servers:A.addresses.map(v=>({turnServerURL:v,tcpport:A.serverResponse.tcpport?A.serverResponse.tcpport:Qs.tcpport,udpport:A.serverResponse.udpport?A.serverResponse.udpport:Qs.udpport,username:A.serverResponse.username||Qs.username,password:A.serverResponse.password||Qs.password,forceturn:!0,security:!1}))}}else{const{proxyInfo:A,gatewayInfo:v}=yield F8(r,o,a,p);m={gatewayInfo:v},r.turnServer={mode:"manual",servers:A.map(S=>({turnServerURL:S.address,tcpport:"proxy3"===_?void 0:S.tcpport?S.tcpport:Qs.tcpport,udpport:"proxy4"===_?void 0:S.udpport?S.udpport:Qs.udpport,username:S.username||Qs.username,password:S.password||Qs.password,forceturn:"proxy4"!==_,security:"proxy5"===_}))}}return se.debug("[".concat(r.clientId,"] set proxy server: ").concat(r.proxyServer,", mode: ").concat(_)),$t("debug",["Server",r.clientId],"setCloudProxyServerAndGetServerInfo",{proxyServer:r.proxyServer,mode:r.cloudProxyServer}),m}),GL.apply(this,arguments)}function WL(r,o,a,c,p){return kV.apply(this,arguments)}function kV(){return kV=F(function*(r,o,a,c,p){let m=[];m=xt("ACCOUNT_REGISTER").slice(0,xt("AJAX_REQUEST_CONCURRENT")).map(o.proxyServer?v=>"https://".concat(o.proxyServer,"/ap/?url=").concat(v+"/api/v1"):v=>"https://".concat(v,"/api/v1"));const A=p?.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:m});try{const v=yield(S=F(function*(I,R,O,B,q){const z=Date.now(),te={sid:O.sid,opid:10,appid:O.appId,string_uid:R};let de=I[0];const ge=yield Ss(()=>Cp(de+"".concat(-1===de.indexOf("?")?"?":"&","action=stringuid"),{data:te,cancelToken:B,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(Se,Me)=>{if(0===Se.code){if(Se.uid<=0||Se.uid>=Math.pow(2,32))throw se.error("Invalid Uint Uid ".concat(R," => ").concat(Se.uid),Se),$t("error",["AjaxAPI"],"requestUserAccount","Invalid Uint Uid ".concat(R," => ").concat(Se.uid,", ").concat(Se)),zt.reqUserAccount(te.sid,{lts:z,success:!1,serverAddr:de,stringUid:te.string_uid,uid:Se.uid,errorCode:Te.INVALID_UINT_UID_FROM_STRING_UID,extend:te}),new Le(Te.INVALID_UINT_UID_FROM_STRING_UID);return zt.reqUserAccount(te.sid,{lts:z,success:!0,serverAddr:de,stringUid:te.string_uid,uid:Se.uid,errorCode:null,extend:te}),!1}const dt=mP(Se.code);return dt.retry&&(de=I[(Me+1)%I.length]),zt.reqUserAccount(te.sid,{lts:z,success:!1,serverAddr:de,stringUid:te.string_uid,uid:Se.uid,errorCode:dt.desc,extend:te}),dt.retry},(Se,Me)=>Se.code!==Te.OPERATION_ABORTED&&(zt.reqUserAccount(te.sid,{lts:z,success:!1,serverAddr:de,stringUid:te.string_uid,uid:null,errorCode:Se.code,extend:te}),de=I[(Me+1)%I.length],!0),q);if(0!==ge.code){const Se=mP(ge.code);throw new Le(Te.UNEXPECTED_RESPONSE,Se.desc)}return ge}),function(I,R,O,B,q){return S.apply(this,arguments)})(m,r,o,a,c);return p?.recordJoinChannelService({status:"success",endTs:Date.now()},A),v.uid}catch(v){throw p?.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[v]},A),v}var S}),kV.apply(this,arguments)}function KL(r,o,a){return PV.apply(this,arguments)}function PV(){return PV=F(function*(r,o,a){let c=Date.now();const p=r.cloudProxyServer,_=xt("normal"===p?"PROXY_CS":"WEBCS_DOMAIN").map(I=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(I+"/api/v1"):"https://".concat(I,"/api/v1"));if(["proxy3","proxy4","proxy5"].includes(p)){const I=_.map(B=>({url:B,areaCode:vP()}));let R=null;R=yield IT({fragementLength:xt("FRAGEMENT_LENGTH"),referenceList:I,asyncMapHandler:B=>function(q,z,te,de){let{url:ge,areaCode:Se}=q;const Me=Date.now(),dt={opid:133,flag:"proxy5"===z.cloudProxyServer?4194304:1048576,ts:+new Date,key:z.token,cname:z.cname,sid:z.sid,detail:{6:z.stringUid,11:Se},uid:z.uid||0};return Ss(F(function*(){return yield Cp(ge,{data:dt,cancelToken:te,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}})}),kt=>{if(0===kt.code)return zt.joinWebProxyAP(z.sid,{lts:Me,sucess:1,apServerAddr:ge,turnServerAddrList:kt.addresses.map(Lt=>Lt.ip).join(","),errorCode:null,eventType:z.cloudProxyServer}),!1;const Mt=mP(kt.code);throw new Le(Te.CAN_NOT_GET_GATEWAY_SERVER,Mt.desc,{retry:Mt.retry})},kt=>kt.code!==Te.OPERATION_ABORTED&&(kt.code===Te.CAN_NOT_GET_GATEWAY_SERVER?(zt.joinWebProxyAP(dt.sid,{lts:Me,sucess:0,apServerAddr:ge,turnServerAddrList:null,errorCode:kt.code,eventType:z.cloudProxyServer}),se.warning("[".concat(z.clientId,"] proxy ap server ").concat(ge," failed, message: ").concat(kt.message,", retry: ").concat(kt.data.retry)),jn("warning",["AjaxAPI",z.clientId],"proxy ap server ".concat(ge," failed, message: ").concat(kt.message,", retry: ").concat(kt.data.retry)),kt.data.retry):(zt.joinWebProxyAP(dt.sid,{lts:Me,sucess:0,apServerAddr:ge,turnServerAddrList:null,errorCode:kt.code,eventType:z.cloudProxyServer}),!0)),de)}(B,r,o,a),allFailedhandler:()=>{throw se.error("[".concat(r.clientId,"] can not get proxy server after trying several times")),new Le(Te.CAN_NOT_GET_PROXY_SERVER)}});const O=R.addresses;if(!O||0===O.length)throw se.error("[".concat(r.clientId,"] can not get proxy server, empty proxy server list")),new Le(Te.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:O.map(B=>B.ip).map(AL),serverResponse:{tcpport:O[0].port||443,udpport:O[0].port||Qs.udpport,username:Qs.username,password:Qs.password}}}let m=null;m=yield IT({fragementLength:xt("FRAGEMENT_LENGTH"),referenceList:_,asyncMapHandler:I=>function(R,O,B,q){const z=Date.now(),te={command:"convergeAllocateEdge",sid:O.sid,appId:O.appId,token:O.token,uid:O.uid,cname:O.cname,ts:Math.floor(Date.now()/1e3),version:El,seq:0,requestId:1};return Ss(F(function*(){return{res:yield Cp(R,{data:{service_name:"webrtc_proxy",json_body:JSON.stringify(te)},cancelToken:B,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:R}}),de=>{if(!de.res.json_body)throw se.debug("[".concat(O.clientId,"] Get proxy server failed: no json_body")),$t("error",["AjaxAPI",O.clientId],"requestProxyServerList","Get proxy server failed: no json_body"),new Le(Te.UNEXPECTED_RESPONSE,JSON.stringify(de.res));const ge=JSON.parse(de.res.json_body);if(200!==ge.code)throw se.debug("[".concat(O.clientId,"] Get proxy server failed: response code [").concat(ge.code,"], reason [").concat(ge.reason,"]")),$t("error",["AjaxAPI",O.clientId],"requestProxyServerList","Get proxy server failed: response code [".concat(ge.code,"], reason [").concat(ge.reason,"]")),new Le(Te.UNEXPECTED_RESPONSE,JSON.stringify(de.res));return se.debug("[".concat(O.clientId,"] App return server length"),ge.servers.length),$t("debug",["AjaxAPI",O.clientId],"requestProxyServerList","",{length:ge.servers.length}),!1},de=>de.code!==Te.OPERATION_ABORTED&&(zt.requestProxyAppCenter(te.sid,{lts:z,succ:!1,APAddr:R,workerManagerList:null,ec:de.code,response:de.message}),!0),q)}(I,r,o,a),allFailedhandler:()=>{throw se.error("[".concat(r.clientId,"] can not get proxy server after trying several times")),new Le(Te.CAN_NOT_GET_PROXY_SERVER)}});const A=JSON.parse(m.res.json_body).servers.map(qK);if("443only"===r.cloudProxyServer)return{addresses:A,serverResponse:{tcpport:443,udpport:Qs.udpport,username:Qs.username,password:Qs.password}};zt.requestProxyAppCenter(r.sid,{lts:c,succ:!0,APAddr:m.url,workerManagerList:JSON.stringify(A),ec:null,response:JSON.stringify(m.res)}),c=Date.now();const v=A.map(I=>function(R,O,B,q){const z=Date.now();let te=R;R.startsWith("http")||(te="https://".concat(R,":4000/v2/machine"));const de={command:"request",gatewayType:"http",appId:O.appId,cname:O.cname,uid:(O.uid||"").toString(),sdkVersion:"2.3.1",sid:O.sid,seq:1,ts:Date.now(),requestId:3,clientRequest:{appId:O.appId,cname:O.cname,uid:(O.uid||"").toString(),sid:O.sid}};return Ss(F(function*(){return{res:yield Cp(te,{data:de,cancelToken:B}),url:R}}),ge=>{if(!ge.res.serverResponse)throw new Le(Te.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},ge=>ge.code!==Te.OPERATION_ABORTED&&(zt.requestProxyWorkerManager(de.sid,{lts:z,succ:!1,workerManagerAddr:R,ec:ge.code,response:ge.message}),!0),q)}(I,r,o,a));let S=null;try{S=yield ST(v)}catch{throw se.error("[".concat(r.clientId,"] can not get worker manager after trying several times")),new Le(Te.CAN_NOT_GET_PROXY_SERVER)}return v.forEach(I=>I.cancel()),zt.requestProxyWorkerManager(r.sid,{lts:c,succ:!0,workerManagerAddr:S.url,ec:null,response:JSON.stringify(S.res)}),{addresses:[S.url],serverResponse:S.res.serverResponse}}),PV.apply(this,arguments)}function MV(){return MV=F(function*(r,o,a){const c=xt("CDS_AP").slice(0,xt("AJAX_REQUEST_CONCURRENT")).map(A=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(A+"/api/v1"):"https://".concat(A,"/api/v1?action=config")).map(A=>function(v,S,I,R){const O=xi(),B={flag:64,cipher_method:0,features:{device:O.name,system:O.os,system_general:navigator.userAgent,vendor:S.appId,version:El,cname:S.cname,sid:S.sid,session_id:S.sid,detail:"",proxyServer:S.proxyServer}};return Ss(()=>Cp(v,{data:B,timeout:1e3,cancelToken:I,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,q=>q.code!==Te.OPERATION_ABORTED,R)}(A,r,o,a));let p=null,_=null,m={};try{p=yield ST(c)}catch(A){if(A.code===Te.OPERATION_ABORTED)throw A;_=A}if(c.forEach(A=>A.cancel()),zt.reportApiInvoke(r.sid,{name:ze.REQUEST_CONFIG_DISTRIBUTE,options:{error:_,res:p}}).onSuccess(),p&&p.test_tags)try{m=function(A){if(!A.test_tags)return{};const v=A.test_tags,S=Object.keys(v),I={};return S.forEach(R=>{var O;const B=hg(O=R.slice(4)).call(O),q=JSON.parse(v[R])[1];I[B]=q}),I}(p)}catch{}return m}),MV.apply(this,arguments)}function F8(r,o,a,c){return NV.apply(this,arguments)}function NV(){return NV=F(function*(r,o,a,c){const p=xt("PROXY_SERVER_TYPE3"),_=(B,q)=>{let z=p;return Array.isArray(z)&&(z=q%2==0?p[1]:p[0]),"https://".concat(z,"/ap/?url=").concat(B)};let m=null;const A=[],v=function(){var B=F(function*(){const q=xt("WEBCS_DOMAIN").slice(0,xt("AJAX_REQUEST_CONCURRENT")).map((de,ge)=>({url:"disabled"===r.cloudProxyServer||"fallback"===r.cloudProxyServer?"https://".concat(de,"/api/v2/transpond/webrtc?v=2"):_("".concat(de,"/api/v2/transpond/webrtc?v=2"),ge),areaCode:vP(),serviceIds:[ea.CHOOSE_SERVER,"proxy5"===r.cloudProxyServer?ea.CLOUD_PROXY_5:"proxy3"===r.cloudProxyServer||"proxy4"===r.cloudProxyServer?ea.CLOUD_PROXY:ea.CLOUD_PROXY_FALLBACK]})),z=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:q.map(de=>de.url)}),te=yield IT({fragementLength:xt("FRAGEMENT_LENGTH"),referenceList:q,asyncMapHandler:de=>(se.debug("[".concat(r.clientId,"] Connect to choose_server:"),de.url),VH(de,r,o,a)),allFailedhandler:de=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:de},z),de[0]},promisesCollector:A});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},z),te});return function(){return B.apply(this,arguments)}}(),S=function(){var B=F(function*(){if(yield Ic(1e3),null!==m)return m;const q=xt("WEBCS_DOMAIN_BACKUP_LIST").map((de,ge)=>({url:"disabled"===r.cloudProxyServer||"fallback"===r.cloudProxyServer?"https://".concat(de,"/api/v2/transpond/webrtc?v=2"):_("".concat(de,"/api/v2/transpond/webrtc?v=2"),ge),areaCode:vP(),serviceIds:[ea.CHOOSE_SERVER,"proxy5"===r.cloudProxyServer?ea.CLOUD_PROXY_5:"proxy3"===r.cloudProxyServer||"proxy4"===r.cloudProxyServer?ea.CLOUD_PROXY:ea.CLOUD_PROXY_FALLBACK]})),z=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:q.map(de=>de.url)}),te=yield IT({fragementLength:xt("FRAGEMENT_LENGTH"),referenceList:q,asyncMapHandler:de=>(se.debug("[".concat(r.clientId,"] Connect to backup choose_server:"),de.url),VH(de,r,o,a)),allFailedhandler:de=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:de},z),de[0]},promisesCollector:A});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},z),te});return function(){return B.apply(this,arguments)}}();let I,R,O;try{({gatewayInfo:I,proxyInfo:R,url:O}=yield ST([v(),S()]))}catch(B){throw B[0]}if(A.length&&A.forEach(B=>B.cancel&&"function"==typeof B.cancel&&B.cancel()),!I||!R)throw new Le(Te.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(r.apUrl=O,"disabled"!==r.cloudProxyServer&&Array.isArray(p)&&O){const B=new A8(O).host;p.includes(B)&&(r.proxyServer=B,se.setProxyServer(B),zt.setProxyServer(B),tv(B))}return m={gatewayInfo:I,proxyInfo:yield F7(R,I.uid)},m}),NV.apply(this,arguments)}function KH(r,o,a,c){return xV.apply(this,arguments)}function xV(){return xV=F(function*(r,o,a,c){const p=xt("UAP_AP").slice(0,xt("AJAX_REQUEST_CONCURRENT")).map(_=>o.proxyServer?"https://".concat(o.proxyServer,"/ap/?url=").concat(_+"/api/v1?action=uap"):"https://".concat(_,"/api/v1?action=uap"));return yield FH(p,r,o,a,c)}),xV.apply(this,arguments)}function zL(){return zL=F(function*(r,o,a){const c=xt("UAP_AP").slice(0,xt("AJAX_REQUEST_CONCURRENT")).map(p=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(p+"/api/v1?action=uap"):"https://".concat(p,"/api/v1?action=uap")).map(p=>function(_,m,A,v){const S={command:"convergeAllocateEdge",sid:m.sid,appId:m.appId,token:m.token,ts:Date.now(),version:El,cname:m.cname,uid:m.uid.toString(),requestId:P8,seq:P8};P8+=1;const I={service_name:"tele_channel",json_body:JSON.stringify(S)};return Ss(F(function*(){const R=yield Cp(_,{data:I,cancelToken:A,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==R.code){const B=new Le(Te.UNEXPECTED_RESPONSE,"cross channel ap error, code"+R.code,{retry:!0});throw se.error(B.toString()),$t("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,B.toString()),B}const O=JSON.parse(R.json_body);if(200!==O.code){const B=new Le(Te.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(O.code,", reason: ").concat(O.reason));throw se.error(B.toString()),$t("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,B.toString()),B}if(!O.servers||0===O.servers.length){const B=new Le(Te.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw se.error(B.toString()),$t("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,B.toString()),B}return{vid:O.vid,workerToken:O.workerToken,addressList:O.servers.map(B=>"wss://".concat(B.address.replace(/\./g,"-"),".").concat(xt("WORKER_DOMAIN"),":").concat(B.wss))}}),void 0,R=>!!(R.code!==Te.OPERATION_ABORTED&&R.code!==Te.UNEXPECTED_RESPONSE||R.data&&R.data.retry),v)}(p,r,o,a));try{const p=yield ST(c);return c.forEach(_=>_.cancel()),p}catch(p){throw p[0]}}),zL.apply(this,arguments)}function U8(){return U8=F(function*(r,o,a){let c=null;const p=[],_=function(){var m=F(function*(A){const v=xt(A?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(S=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(S+"/api/v2/transpond/webrtc?v=2"):"https://".concat(S,"/api/v2/transpond/webrtc?v=2"));return A&&(yield Ic(1e3),null!==c)?c:yield IT({fragementLength:xt("FRAGEMENT_LENGTH"),referenceList:v,asyncMapHandler:S=>(se.debug("[".concat(r.clientId,"] update ticket, Connect to ").concat(A?"backup":""," choose_server:"),S),function(I,R,O,B){const[q]=QH(R,[ea.CHOOSE_SERVER]);let z=ta.networkState;return Ss(F(function*(){z&&ta.networkState===ql.OFFLINE&&ta.onlineWaiter&&(yield qn.race([ta.onlineWaiter,Ic(B&&B.maxRetryTimeout||wo.maxRetryTimeout)])),z=ta.networkState;const te=yield Cp(I,{data:q,cancelToken:O,headers:{"Content-Type":"multipart/form-data;"}},!0);return jH(te,I)}),()=>!1,te=>te.code!==Te.OPERATION_ABORTED&&(te.code===Te.UPDATE_TICKET_FAILED?te.data.retry:(se.warning("[".concat(R.clientId,"] update ticket network error, retry"),te),jn("warning",["AjaxAPI",R.clientId],"update ticket network error, retry, ".concat(te)),!0)),B)}(S,r,o,a)),allFailedhandler:S=>{throw S[0]},promisesCollector:p})});return function(v){return m.apply(this,arguments)}}();try{return c=yield ST([_(!1),_(!0)]),p.length&&p.forEach(m=>m.cancel&&"function"==typeof m.cancel&&m.cancel()),c}catch(m){throw m[0]}}),U8.apply(this,arguments)}var YH;function V8(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function $H(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?V8(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):V8(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let JH=xa("ConfigDistributeManager")(YH=class extends ko{constructor(){super(),J(this,"configs",void 0),J(this,"joinInfo",void 0),J(this,"cancelToken",void 0),J(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),J(this,"interval",void 0),J(this,"mutex",new Il("config-distribute")),J(this,"mutableParamsRead",!1)}startGetConfigDistribute(r,o){this.joinInfo=r,this.cancelToken=o,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},xt("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}awaitConfigDistributeComplete(){var r=this;return F(function*(){!r.mutex.isLocked||(yield r.mutex.lock())()})()}updateConfigDistribute(){var r=this;return F(function*(){if(r.mutableParamsRead||(r.mutableParamsRead=!0,zt.reportApiInvoke(null,{options:void 0,name:ze.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Qe.TRACER}).onSuccess(JSON.stringify(vx))),!r.joinInfo||!r.cancelToken||!r.retryConfig)return se.debug("[config-distribute] get config distribute interrupted have no joininfo"),void $t("debug",r,"updateConfigDistribute",void 0,"get config distribute interrupted have no joininfo");let o;const a=yield r.mutex.lock();try{o=yield function WH(r,o,a){return MV.apply(this,arguments)}(r.joinInfo,r.cancelToken,r.retryConfig),se.debug("[config-distribute] get config distribute",JSON.stringify(o)),$t("debug",r,"updateConfigDistribute",o),o.limit_bitrate&&r.handleBitrateLimit(o.limit_bitrate),r.cacheGlobalParameterConfig(o),r.configs=o}catch(c){const p=new Le(Te.NETWORK_RESPONSE_ERROR,c);se.warning("[config-distribute] ".concat(p.toString())),$t("warning",r,"updateConfigDistribute",void 0,c.toString())}finally{a()}})()}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(r){var o;(o=r)&&o.uplink&&o.id&&void 0!==o.uplink.max_bitrate&&void 0!==o.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==r.id&&this.emit(zy.UPDATE_BITRATE_LIMIT,r):this.emit(zy.UPDATE_BITRATE_LIMIT,r))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&$H({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(r){var o;const a=US(o=Object.keys(r).filter(p=>/^webrtc_ng_global_parameter/.test(p))).call(o);for(let p=0;p<a.length;p++)for(let _=a.length-1;_>p;_--){const m=a[_];if("number"==typeof r[m].__priority){const A=r[m].__priority,v=a[_-1];if("number"==typeof r[v].__priority){if(!(A>r[v].__priority))continue;{const S=m;a[_]=a[_-1],a[_-1]=S}}else{const S=m;a[_]=a[_-1],a[_-1]=S}}}const c={};a.forEach(p=>{const _=r[p],m=_.__expires;Object.keys(_).forEach(A=>{"__priority"===A||"__expires"===A||Object.prototype.hasOwnProperty.call(c,A)||(c[A]=$H({value:_[A]},m&&{expires:m}))})});try{const p=JSON.stringify(c),_=window.btoa(p);window.localStorage.setItem("websdk_ng_global_parameter",_),se.debug("Caching global parameters ".concat(p)),$t("debug",this,"cacheGlobalParameterConfig",p)}catch(p){se.error("Error caching global parameters:",p.message),$t("error",this,"cacheGlobalParameterConfig",void 0,p.message)}}})||YH;function j8(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function yP(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?j8(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):j8(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class XH extends ko{constructor(o,a,c,p){super(),J(this,"spec",void 0),J(this,"token",void 0),J(this,"websocket",void 0),J(this,"pingpongTimer",void 0),J(this,"reconnectMode","retry"),J(this,"serviceMode",void 0),J(this,"reqId",0),J(this,"commandReqId",0),J(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),J(this,"handleWebSocketMessage",_=>{if(!_.data)return;const m=JSON.parse(_.data);m.requestId?this.emit("@".concat(m.requestId,"-").concat(m.sid),m):this.serviceMode===nr.INJECT?this.emit(Fi.INJECT_STREAM_STATUS,m):(zt.workerEvent(this.spec.sid,{actionType:"status",serverCode:m.code,workerType:this.serviceMode===nr.TRANSCODE?1:2}),this.emit(Fi.PUBLISH_STREAM_STATUS,m))}),this.spec=a,this.token=o,this.serviceMode=p,this.websocket=new o0("live-streaming",c),this.websocket.on(In.CONNECTED,this.handleWebSocketOpen),this.websocket.on(In.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(In.REQUEST_NEW_URLS,(_,m)=>{Ip(this,Fi.REQUEST_NEW_ADDRESS).then(_).catch(m)}),this.websocket.on(In.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(o){return this.websocket.init(o)}request(o,a,c,p){var _=this;return F(function*(){_.reqId+=1,"request"===o&&(_.commandReqId+=1);const m=_.commandReqId,A=_.reqId;if(!A||!_.websocket)throw new Le(Te.UNEXPECTED_ERROR);const v=yP({command:o,sdkVersion:"4.12.1"===El?"0.0.1":El,seq:A,requestId:A,allocate:c,cname:_.spec.cname,appId:_.spec.appId,sid:_.spec.sid,uid:_.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},a);if("closed"===_.websocket.state)throw new Le(Te.WS_DISCONNECT);const S=()=>new qn((B,q)=>{_.websocket.once(In.CLOSED,()=>q(new Le(Te.WS_ABORT))),_.websocket.once(In.CONNECTED,B)});"connected"!==_.websocket.state&&(yield S()),v.clientRequest&&(v.clientRequest.workerToken=_.token);const I=new qn((B,q)=>{const z=()=>{q(new Le(Te.WS_ABORT))};_.websocket.once(In.RECONNECTING,z),_.websocket.once(In.CLOSED,z),_.once("@".concat(A,"-").concat(_.spec.sid),te=>{B(te)})});p&&zt.workerEvent(_.spec.sid,yP(yP({},p),{},{requestId:m,actionType:"request",payload:JSON.stringify(a.clientRequest),serverCode:0,code:0}));const R=Date.now();_.websocket.sendMessage(v);let O=null;try{O=yield I}catch(B){if("closed"===_.websocket.state)throw B;return yield S(),yield _.request(o,a,c)}return p&&zt.workerEvent(_.spec.sid,yP(yP({},p),{},{requestId:m,actionType:"response",payload:JSON.stringify(O.serverResponse),serverCode:O.code,success:200===O.code,responseTime:Date.now()-R})),200!==O.code&&_.handleResponseError(O),O})()}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const o="4.12.1"===El?"0.0.1":El;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:o,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(o){switch(o.code){case Nr.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void se.warning("live stream response already exists stream");case Nr.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Nr.LIVE_STREAM_RESPONSE_BAD_STREAM:case Nr.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Le(Te.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:o.code}).throw();case Nr.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===o.serverResponse.command||"UninjectStream"===o.serverResponse.command)return;throw new Le(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Nr.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Le(Te.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:o.code}).throw();case Nr.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const a=new Le(Te.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Fi.WARNING,a,o.serverResponse.url)}case Nr.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const a=new Le(Te.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Fi.WARNING,a,o.serverResponse.url)}case Nr.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Le(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Nr.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Le(Te.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:o.code}).throw();case Nr.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const a=new Le(Te.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Fi.WARNING,a,o.serverResponse.url)}case Nr.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Le(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:o.code}).throw();case Nr.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Le(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Nr.LIVE_STREAM_RESPONSE_WORKER_LOST:case Nr.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===o.serverResponse.command||"UninjectStream"===o.serverResponse.command)return;throw new Le(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Nr.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===o.serverResponse.command||"UninjectStream"===o.serverResponse.command)return;if("UpdateTranscoding"===o.serverResponse.command||"ControlStream"===o.serverResponse.command)return new Le(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:o.code}).throw();throw new Le(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Nr.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Nr.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Nr.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Nr.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Le(Te.LIVE_STREAMING_CDN_ERROR,"",{code:o.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(z3)},6e3)}}function Q8(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function wl(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?Q8(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Q8(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class ZH extends ko{constructor(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wo,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wo;super(),J(this,"onLiveStreamWarning",void 0),J(this,"onLiveStreamError",void 0),J(this,"onInjectStatusChange",void 0),J(this,"spec",void 0),J(this,"retryTimeout",1e4),J(this,"connection",void 0),J(this,"httpRetryConfig",void 0),J(this,"wsRetryConfig",void 0),J(this,"streamingTasks",new Map),J(this,"isStartingStreamingTask",!1),J(this,"taskMutex",new Il("live-streaming")),J(this,"cancelToken",Ms.CancelToken.source()),J(this,"transcodingConfig",void 0),J(this,"injectConfig",wl({},Bi)),J(this,"injectLoopTimes",0),J(this,"uapResponse",void 0),J(this,"lastTaskId",1),J(this,"statusError",new Map),this.spec=o,this.httpRetryConfig=c,this.wsRetryConfig=a}setTranscodingConfig(o){var a=this;return F(function*(){const c=wl(wl({},Qi),o);var A;66!==c.videoCodecProfile&&77!==c.videoCodecProfile&&100!==c.videoCodecProfile&&(se.debug("[".concat(a.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(c.videoCodecProfile," -> 100")),c.videoCodecProfile=100),c.transcodingUsers||(c.transcodingUsers=c.userConfigs),c.transcodingUsers&&(c.transcodingUsers=c.transcodingUsers.map(A=>wl(wl(wl({},Kr),A),{},{zOrder:A.zOrder?A.zOrder+1:1}))),D((A=c).width)||l(A.width,"config.width",0,1e4),D(A.height)||l(A.height,"config.height",0,1e4),D(A.videoBitrate)||l(A.videoBitrate,"config.videoBitrate",1,1e6),D(A.videoFrameRate)||l(A.videoFrameRate,"config.videoFrameRate"),D(A.lowLatency)||i(A.lowLatency,"config.lowLatency"),D(A.audioSampleRate)||u(A.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),D(A.audioBitrate)||l(A.audioBitrate,"config.audioBitrate",1,128),D(A.audioChannels)||u(A.audioChannels,"config.audioChannels",[1,2,3,4,5]),D(A.videoGop)||l(A.videoGop,"config.videoGop"),D(A.videoCodecProfile)||u(A.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),D(A.userCount)||l(A.userCount,"config.userCount",0,17),D(A.backgroundColor)||l(A.backgroundColor,"config.backgroundColor",0,16777215),D(A.userConfigExtraInfo)||g(A.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),A.transcodingUsers&&!D(A.transcodingUsers)&&(y(A.transcodingUsers,"config.transcodingUsers"),A.transcodingUsers.forEach((v,S)=>{w(v.uid),D(v.x)||l(v.x,"transcodingUser[".concat(S,"].x"),0,1e4),D(v.y)||l(v.y,"transcodingUser[".concat(S,"].y"),0,1e4),D(v.width)||l(v.width,"transcodingUser[".concat(S,"].width"),0,1e4),D(v.height)||l(v.height,"transcodingUser[".concat(S,"].height"),0,1e4),D(v.zOrder)||l(v.zOrder-1,"transcodingUser[".concat(S,"].zOrder"),0,100),D(v.alpha)||l(v.alpha,"transcodingUser[".concat(S,"].alpha"),0,1,!1)})),D(A.watermark)||$i(A.watermark,"watermark"),D(A.backgroundImage)||$i(A.backgroundImage,"backgroundImage"),A.images&&!D(A.images)&&(y(A.images,"config.images"),A.images.forEach((v,S)=>{$i(v,"images[".concat(S,"]"))}));const p=[];c.images&&p.push(...c.images.map(A=>wl(wl(wl({},Fr),A),{},{zOrder:255}))),c.backgroundImage&&(p.push(wl(wl(wl({},Fr),c.backgroundImage),{},{zOrder:0})),delete c.backgroundImage),c.watermark&&(p.push(wl(wl(wl({},Fr),c.watermark),{},{zOrder:255})),delete c.watermark),c.images=p,c.transcodingUsers&&(c.userConfigs=c.transcodingUsers.map(A=>wl({},A)),c.userCount=c.transcodingUsers.length,delete c.transcodingUsers);const _=(c.userConfigs||[]).map(A=>"number"==typeof A.uid?qn.resolve(A.uid):WL(A.uid,a.spec,a.cancelToken.token,a.httpRetryConfig));if((yield qn.all(_)).forEach((A,v)=>{c.userConfigs&&c.userConfigs[v]&&(c.userConfigs[v].uid=A)}),a.transcodingConfig=c,a.connection)try{var m;const A=yield a.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:a.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(dv(m=a.streamingTasks).call(m)).map(v=>v.taskId).join("#")});se.debug("[".concat(a.spec.clientId,"] update live transcoding config success, code: ").concat(A.code,", config:"),JSON.stringify(a.transcodingConfig))}catch(A){if(!A.data||!A.data.retry)throw A;A.data.changeAddress&&a.connection.tryNextAddress(),a.streamingTasks.forEach(v=>{se.warning("[".concat(a.spec.clientId,"] live streaming receive error"),A.toString(),"try to republish",v.url),a.startLiveStreamingTask(v.url,v.mode,A).then(()=>{se.debug("[".concat(a.spec.clientId,"] live streaming republish ").concat(v.url," success"))}).catch(S=>{se.error("[".concat(a.spec.clientId,"] live streaming republish failed"),v.url,S.toString()),a.onLiveStreamError&&a.onLiveStreamError(v.url,S)})})}})()}setInjectStreamConfig(o,a){this.injectConfig=Object.assign({},this.injectConfig,o),this.injectLoopTimes=a}startLiveStreamingTask(o,a,c){var p=this;return F(function*(){var _;if(Array.from(dv(_=p.streamingTasks).call(_)).find(S=>S.mode===nr.INJECT)&&a===nr.INJECT)return new Le(Te.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!p.transcodingConfig&&a===nr.TRANSCODE)throw new Le(Te.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let m={command:"PublishStream",ts:Date.now(),url:o,uid:p.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};se.debug("[".concat(p.spec.clientId,"] start live streaming ").concat(o,", mode: ").concat(a));const A=yield p.taskMutex.lock();if(!p.connection&&c)return void A();if(p.streamingTasks.get(o)&&!c)return A(),new Le(Te.LIVE_STREAMING_TASK_CONFLICT).throw();try{p.connection||(p.connection=yield p.connect(a))}catch(S){throw A(),S}switch(a){case nr.TRANSCODE:m.transcodingConfig=wl({},p.transcodingConfig);break;case nr.RAW:break;case nr.INJECT:m={cname:p.spec.cname,command:"InjectStream",sid:p.spec.sid,transcodingConfig:p.injectConfig,ts:Date.now(),url:o,loopTimes:p.injectLoopTimes}}p.uapResponse&&p.uapResponse.vid&&(m.vid=p.uapResponse.vid),p.isStartingStreamingTask=!0;const v=p.lastTaskId++;try{const S=new qn((R,O)=>{Ic(p.retryTimeout).then(()=>{if(c)return O(c);const B=p.statusError.get(o);return B?(p.statusError.delete(o),O(B)):void 0})}),I=yield qn.race([p.connection.request("request",{clientRequest:m},!0,{url:o,command:"PublishStream",workerType:a===nr.TRANSCODE?1:2,requestByUser:!c,tid:v.toString()}),S]);p.isStartingStreamingTask=!1,se.debug("[".concat(p.spec.clientId,"] live streaming started, code: ").concat(I.code)),p.streamingTasks.set(o,{clientRequest:m,mode:a,url:o,taskId:v}),A()}catch(S){if(A(),p.isStartingStreamingTask=!1,!S.data||!S.data.retry||c)throw S;return S.data.changeAddress?(p.connection.tryNextAddress(),yield p.startLiveStreamingTask(o,a,S)):yield p.startLiveStreamingTask(o,a,S)}})()}stopLiveStreamingTask(o){return new qn((a,c)=>{const p=this.streamingTasks.get(o);if(!p||!this.connection)return new Le(Te.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const _=p.mode;p.abortTask=()=>{se.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(o),a()},this.connection.request("request",{clientRequest:{command:_===nr.INJECT?"UninjectStream":"UnpublishStream",url:p.url}},!1,{url:o,command:"UnPublishStream",workerType:_===nr.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(m=>{se.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(m.code)),this.streamingTasks.delete(o),0===this.streamingTasks.size&&_!==nr.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),a(),_===nr.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Mr.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,o)}).catch(c)})}controlInjectStream(o,a,c,p){var _=this;return F(function*(){const m=_.streamingTasks.get(o);if(!m||!_.connection||m.mode!==nr.INJECT)throw new Le(Te.INVALID_OPERATION,"can not find inject stream task to control");return(yield _.connection.request("request",{clientRequest:{command:"ControlStream",url:o,control:a,audioVolume:c,position:p}})).serverResponse})()}resetAllTask(){var o;const a=Array.from(dv(o=this.streamingTasks).call(o));this.terminate();for(const c of a)this.startLiveStreamingTask(c.url,c.mode).catch(p=>{this.onLiveStreamError&&this.onLiveStreamError(c.url,p)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Ms.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}connect(o){var a=this;return F(function*(){if(a.connection)throw new Le(Te.UNEXPECTED_ERROR,"live streaming connection has already connected");const c=yield Ip(a,Ki.REQUEST_WORKER_MANAGER_LIST,o);return a.uapResponse=c,a.connection=new XH(c.workerToken,a.spec,a.wsRetryConfig,o),a.connection.on(Fi.WARNING,(p,_)=>a.onLiveStreamWarning&&a.onLiveStreamWarning(_,p)),a.connection.on(Fi.PUBLISH_STREAM_STATUS,p=>a.handlePublishStreamServer(p)),a.connection.on(Fi.INJECT_STREAM_STATUS,p=>a.handleInjectStreamServerStatus(p)),a.connection.on(Fi.REQUEST_NEW_ADDRESS,(p,_)=>{if(!a.connection)return _(new Le(Te.UNEXPECTED_ERROR,"can not get new live streaming address list"));Ip(a,Ki.REQUEST_WORKER_MANAGER_LIST,o).then(m=>{a.uapResponse=m,p(m.addressList)}).catch(_)}),yield a.connection.init(c.addressList),a.connection})()}handlePublishStreamServer(o){const a=o.serverStatus&&o.serverStatus.url||"empty_url",c=this.streamingTasks.get(a),p=o.reason;switch(o.code){case Nr.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Nr.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Nr.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Nr.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const m=new Le(Te.LIVE_STREAMING_CDN_ERROR,"",{code:o.code});if(c)return se.error(m.toString()),this.onLiveStreamError&&this.onLiveStreamError(a,m);if(!this.isStartingStreamingTask)return;this.statusError.set(a,m)}case Nr.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const m=new Le(Te.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,p);return this.onLiveStreamWarning&&this.onLiveStreamWarning(a,m)}case Nr.LIVE_STREAM_RESPONSE_WORKER_LOST:case Nr.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var _;if(!this.connection)return;this.connection.tryNextAddress();const m=Array.from(dv(_=this.streamingTasks).call(_));for(const A of m)A.abortTask?A.abortTask():(se.warning("[".concat(this.spec.clientId,"] publish stream status code"),o.code,"try to republish",A.url),this.startLiveStreamingTask(A.url,A.mode,new Le(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:o.code})).then(()=>{se.debug("[".concat(this.spec.clientId,"] republish live stream success"),A.url)}).catch(v=>{se.error(v.toString()),this.onLiveStreamError&&this.onLiveStreamError(A.url,v)}));return}}}handleInjectStreamServerStatus(o){const a=Number(o.uid),c=o.serverStatus&&o.serverStatus.url;switch(o.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Mr.INJECT_STREAM_STATUS_START_SUCCESS,a,c));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Mr.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,a,c),void this.streamingTasks.delete(c);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Mr.INJECT_STREAM_STATUS_START_UNAUTHORIZED,a,c),void this.streamingTasks.delete(c);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Mr.INJECT_STREAM_STATUS_BROKEN,a,c),void this.streamingTasks.delete(c);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Mr.INJECT_STREAM_STATUS_START_TIMEOUT,a,c),void this.streamingTasks.delete(c);default:return void se.debug("inject stream server status",o)}}hasUrl(o){return this.streamingTasks.has(o)}}class LV{constructor(){J(this,"destChannelMediaInfos",new Map),J(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(o){cT(o),this.srcChannelMediaInfo=o}addDestChannelInfo(o){cT(o),this.destChannelMediaInfos.set(o.channelName,o)}removeDestChannelInfo(o){C(o),this.destChannelMediaInfos.delete(o)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function H8(r){if(!(r instanceof LV))return new Le(Te.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const o=r.getSrcChannelMediaInfo(),a=r.getDestChannelMediaInfo();return o?0===a.size?new Le(Te.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new Le(Te.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class eG extends ko{constructor(o,a,c){super(),J(this,"ws",void 0),J(this,"requestId",1),J(this,"heartBeatTimer",void 0),J(this,"joinInfo",void 0),J(this,"clientId",void 0),J(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),J(this,"onClose",p=>{this.emit("close"),this.dispose()}),J(this,"onMessage",p=>{const _=JSON.parse(p.data);if(!_||"serverResponse"!==_.command||!_.requestId)return _&&"serverStatus"===_.command&&_.serverStatus&&_.serverStatus.command?(this.emit("status",_.serverStatus),void this.emit(_.serverStatus.command,_.serverStatus)):void 0;this.emit("req_".concat(_.requestId),_)}),this.joinInfo=o,this.clientId=a,this.ws=new o0("cross-channel-".concat(this.clientId),c),this.ws.on(In.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(In.CONNECTED,this.onOpen),this.ws.on(In.ON_MESSAGE,this.onMessage),this.ws.on(In.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(o){const a=this.requestId++;return o.requestId=a,o.seq=a,this.ws.sendMessage(o),a}waitStatus(o){return new qn((a,c)=>{const p=window.setTimeout(()=>{c(new Le(Te.TIMEOUT,"wait status timeout, status: ".concat(o)))},5e3);this.once(o,_=>{window.clearTimeout(p),_.state&&0!==_.state?c(new Le(Te.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(o))):a(void 0)}),this.once("dispose",()=>{window.clearTimeout(p),c(new Le(Te.WS_ABORT))})})}request(o){var a=this;return F(function*(){if("closed"===a.ws.state)throw new Le(Te.WS_DISCONNECT);"connected"!==a.ws.state&&(yield new qn((A,v)=>{a.ws.once(In.CLOSED,()=>v(new Le(Te.WS_ABORT))),a.ws.once(In.CONNECTED,A)}));const p=a.sendMessage(o),_=new qn((A,v)=>{const S=()=>{v(new Le(Te.WS_ABORT))};a.ws.once(In.RECONNECTING,S),a.ws.once(In.CLOSED,S),a.once("req_".concat(p),A),Ic(3e3).then(()=>{a.removeAllListeners("req_".concat(p)),a.ws.off(In.RECONNECTING,S),a.ws.off(In.CLOSED,S),v(new Le(Te.TIMEOUT,"cross channel ws request timeout"))})}),m=yield _;if(!m||200!==m.code)throw new Le(Te.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(m)));return m})()}connect(o){var a=this;return F(function*(){a.ws.removeAllListeners(In.REQUEST_NEW_URLS),a.ws.on(In.REQUEST_NEW_URLS,c=>{c(o)}),yield a.ws.init(o)})()}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(o){const a=this.requestId++;return o.requestId=a,this.ws.sendMessage(o),a}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class qL extends ko{set state(o){o!==this._state&&(o!==Cs.RELAY_STATE_FAILURE&&(this.errorCode=Oh.RELAY_OK),this.emit("state",o,this.errorCode),this._state=o)}get state(){return this._state}constructor(o,a,c,p){var _;super(),_=this,J(this,"joinInfo",void 0),J(this,"clientId",void 0),J(this,"cancelToken",Ms.CancelToken.source()),J(this,"workerToken",void 0),J(this,"requestId",0),J(this,"signal",void 0),J(this,"prevChannelMediaConfig",void 0),J(this,"httpRetryConfig",void 0),J(this,"_state",Cs.RELAY_STATE_IDLE),J(this,"errorCode",Oh.RELAY_OK),J(this,"onStatus",m=>{se.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(m))),m&&m.command&&("onAudioPacketReceived"===m.command&&this.emit("event",zc.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===m.command&&this.emit("event",zc.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===m.command&&(this.errorCode=Oh.SRC_TOKEN_EXPIRED,this.state=Cs.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===m.command&&(this.errorCode=Oh.DEST_TOKEN_EXPIRED,this.state=Cs.RELAY_STATE_FAILURE))}),J(this,"onReconnect",F(function*(){se.debug("[".concat(_.clientId,"] ChannelMediaSocket disconnect, reconnecting")),_.emit("event",zc.NETWORK_DISCONNECTED),_.state=Cs.RELAY_STATE_IDLE,_.prevChannelMediaConfig&&_.sendStartRelayMessage(_.prevChannelMediaConfig).catch(m=>{_.state!==Cs.RELAY_STATE_IDLE&&(se.error("auto restart channel media relay failed",m.toString()),_.errorCode=Oh.SERVER_CONNECTION_LOST,_.state=Cs.RELAY_STATE_FAILURE)})})),this.joinInfo=o,this.clientId=a,this.signal=new eG(this.joinInfo,this.clientId,c),this.httpRetryConfig=p}startChannelMediaRelay(o){var a=this;return F(function*(){if(a.state!==Cs.RELAY_STATE_IDLE)throw new Le(Te.INVALID_OPERATION);a.state=Cs.RELAY_STATE_CONNECTING,yield a.connect(),se.debug("[".concat(a.clientId,"] startChannelMediaRelay: connect success"));try{yield a.sendStartRelayMessage(o)}catch(c){throw c.data&&c.data.serverResponse&&"SetSourceChannel"===c.data.serverResponse.command?new Le(Te.CROSS_CHANNEL_FAILED_JOIN_SRC):c.data&&c.data.serverResponse&&"SetDestChannelStatus"===c.serverResponse.command?new Le(Te.CROSS_CHANNEL_FAILED_JOIN_DEST):c.data&&c.data.serverResponse&&"StartPacketTransfer"===c.serverResponse.command?new Le(Te.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):c}a.prevChannelMediaConfig=o})()}updateChannelMediaRelay(o){var a=this;return F(function*(){if(a.state!==Cs.RELAY_STATE_RUNNING)throw new Le(Te.INVALID_OPERATION);yield a.sendUpdateMessage(o),a.prevChannelMediaConfig=o})()}stopChannelMediaRelay(){var o=this;return F(function*(){yield o.sendStopRelayMessage(),se.debug("[".concat(o.clientId,"] stopChannelMediaRelay: send stop message success")),o.state=Cs.RELAY_STATE_IDLE,o.dispose()})()}dispose(){se.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Ms.CancelToken.source(),this.state=Cs.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}connect(){var o=this;return F(function*(){const a=yield function zH(r,o,a){return zL.apply(this,arguments)}(o.joinInfo,o.cancelToken.token,o.httpRetryConfig);o.workerToken=a.workerToken,yield o.signal.connect(a.addressList),o.emit("event",zc.NETWORK_CONNECTED),o.signal.on("status",o.onStatus),o.signal.on("reconnecting",o.onReconnect)})()}sendStartRelayMessage(o){var a=this;return F(function*(){const c=a.genMessage(ho.StopPacketTransfer);yield a.signal.request(c),yield a.signal.waitStatus("Normal Quit"),se.debug("[".concat(a.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const p=a.genMessage(ho.SetSdkProfile,o);yield a.signal.request(p),se.debug("[".concat(a.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const _=a.genMessage(ho.SetSourceChannel,o);yield a.signal.request(_),yield a.signal.waitStatus("SetSourceChannelStatus"),a.emit("event",zc.PACKET_JOINED_SRC_CHANNEL),se.debug("[".concat(a.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const m=a.genMessage(ho.SetSourceUserId,o);yield a.signal.request(m),se.debug("[".concat(a.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const A=a.genMessage(ho.SetDestChannel,o);yield a.signal.request(A),yield a.signal.waitStatus("SetDestChannelStatus"),a.emit("event",zc.PACKET_JOINED_DEST_CHANNEL),se.debug("[".concat(a.clientId,"] startChannelMediaRelay: SetDestChannel success"));const v=a.genMessage(ho.StartPacketTransfer,o);yield a.signal.request(v),a.emit("event",zc.PACKET_SENT_TO_DEST_CHANNEL),a.state=Cs.RELAY_STATE_RUNNING,se.debug("[".concat(a.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))})()}sendUpdateMessage(o){var a=this;return F(function*(){const c=a.genMessage(ho.UpdateDestChannel,o);yield a.signal.request(c),a.emit("event",zc.PACKET_UPDATE_DEST_CHANNEL),se.debug("[".concat(a.clientId,"] sendUpdateMessage: UpdateDestChannel success"))})()}sendStopRelayMessage(){var o=this;return F(function*(){const a=o.genMessage(ho.StopPacketTransfer);yield o.signal.request(a),se.debug("[".concat(o.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))})()}genMessage(o,a){const c=[],p=[],_=[];this.requestId+=1;const m={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:El,sid:this.joinInfo.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.12.1"===m.sdkVersion&&(m.sdkVersion="0.0.1");let A=null,v=null;switch(o){case ho.SetSdkProfile:return m.clientRequest={command:"SetSdkProfile",type:"multi_channel"},m;case ho.SetSourceChannel:if(v=a&&a.getSrcChannelMediaInfo(),!v)throw new Le(Te.UNEXPECTED_ERROR,"can not find source config");return m.clientRequest={command:"SetSourceChannel",uid:"0",channelName:v.channelName,token:v.token||this.joinInfo.appId},m;case ho.SetSourceUserId:if(v=a&&a.getSrcChannelMediaInfo(),!v)throw new Le(Te.UNEXPECTED_ERROR,"can not find source config");return m.clientRequest={command:"SetSourceUserId",uid:v.uid+""},m;case ho.SetDestChannel:if(A=a&&a.getDestChannelMediaInfo(),!A)throw new Le(Te.UNEXPECTED_ERROR,"can not find dest config");return A.forEach(S=>{c.push(S.channelName),p.push(S.uid+""),_.push(S.token||this.joinInfo.appId)}),m.clientRequest={command:"SetDestChannel",channelName:c,uid:p,token:_},m;case ho.StartPacketTransfer:return m.clientRequest={command:"StartPacketTransfer"},m;case ho.Reconnect:return m.clientRequest={command:"Reconnect"},m;case ho.StopPacketTransfer:return m.clientRequest={command:"StopPacketTransfer"},m;case ho.UpdateDestChannel:if(A=a&&a.getDestChannelMediaInfo(),!A)throw new Le(Te.UNEXPECTED_ERROR,"can not find dest config");return A.forEach(S=>{c.push(S.channelName),p.push(S.uid+""),_.push(S.token||this.joinInfo.appId)}),m.clientRequest={command:"UpdateDestChannel",channelName:c,uid:p,token:_},m}return m}}const BV=r=>{const o=document.createElement("canvas");return o.width=2,o.height=2,new qn((a,c)=>{o.toBlob(function(){var p=F(function*(_){if(o.remove(),_){const m=yield LT(_);a({buffer:m,width:o.width,height:o.height})}else c(new Le(Te.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(_){return p.apply(this,arguments)}}(),r,1)})},LT=function(){var r=F(function*(o){const a=yield o.arrayBuffer();return new Uint8Array(a)});return function(a){return r.apply(this,arguments)}}();var FV;let G8=xa("AgoraRTCPlayer","trackId")(FV=class{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(r){r!==this._videoElementStatus&&(se.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(r)),Wl("debug",["HTMLVideoElement",this.trackId],"statusChange","".concat(this._videoElementStatus," => ").concat(r)),this._videoElementStatus=r)}constructor(r){J(this,"trackId",void 0),J(this,"config",void 0),J(this,"onFirstVideoFrameDecoded",void 0),J(this,"freezeTimeCounterList",[]),J(this,"timeUpdatedCount",0),J(this,"freezeTime",0),J(this,"playbackTime",0),J(this,"lastTimeUpdatedTime",0),J(this,"videoTrack",void 0),J(this,"container",void 0),J(this,"videoElement",void 0),J(this,"videoElementCheckInterval",void 0),J(this,"_videoElementStatus",X.NONE),J(this,"slot",void 0),J(this,"isGettingVideoDimensions",!1),J(this,"handleVideoEvents",o=>{switch(o.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=X.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=X.CANPLAY;break;case"stalled":this.videoElementStatus=X.STALLED;break;case"suspend":this.videoElementStatus=X.SUSPEND;break;case"pause":this.videoElementStatus=X.PAUSED,!yc()&&!Rf()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),jn("debug",this,"video element paused, auto resume"),this.videoElement.play());break;case"waiting":this.videoElementStatus=X.WAITING;break;case"abort":this.videoElementStatus=X.ABORT;break;case"ended":this.videoElementStatus=X.ENDED;break;case"emptied":this.videoElementStatus=X.EMPTIED;break;case"timeupdate":{const a=Date.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=a);const c=a-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=a,c>500&&(this.freezeTime+=c),this.playbackTime+=c;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}}),J(this,"startGetVideoDimensions",()=>{const o=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return se.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),$t("debug",this,"startGetVideoDimensions",{videoWidth:this.videoElement.videoWidth,videoHeight:this.videoElement.videoHeight}),void(this.isGettingVideoDimensions=!1);setTimeout(o,500)};!this.isGettingVideoDimensions&&o()}),J(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===qr.curState&&(dk()?(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):uk()?(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):lk()&&(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),J(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(dk()?(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):uk()?(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):lk()&&(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=r.element,this.trackId=r.trackId,this.updateConfig(r),qr.on(na.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),qr.on(na.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(r){this.config=r,this.trackId=r.trackId;const o=r.element;o!==this.slot&&(this.destroy(),this.slot=o),this.createElements()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.createElements())}play(r){if(this.videoElement){const o=this.videoElement.play();o&&o.catch&&o.catch(c=>{r&&zt.autoplayFailed(r,"video",c.message,this.trackId),$t("warning",this,"play",c.toString(),"error"),"NotAllowedError"===c.name?(se.warning("detected video element autoplay failed",c),this.handleAutoPlayFailed()):se.warning("[".concat(this.trackId,"] play warning: "),c)});const a=xi();if(("Safari"===a.name&&15===Number(a.version)||X_())&&o&&o.then&&o.catch){const c=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};o.then(c).catch(c)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;const o=r.getContext("2d");if(!o)return se.error("create canvas context failed!"),$t("error",this,"getCurrentFrame","create canvas context failed!","error"),new ImageData(2,2);o.drawImage(this.videoElement,0,0,r.width,r.height);const a=o.getImageData(0,0,r.width,r.height);return r.remove(),a}getCurrentFrameToUint8Array(r){var o=arguments,a=this;return F(function*(){let c=o.length>1&&void 0!==o[1]?o[1]:1;if(!a.videoElement)return yield BV(r);const p=document.createElement("canvas");p.width=a.videoElement.videoWidth,p.height=a.videoElement.videoHeight;const _=p.getContext("2d");return _?(_.drawImage(a.videoElement,0,0,p.width,p.height),new qn((m,A)=>{p.toBlob(function(){var v=F(function*(S){if(p.remove(),S){const I=yield LT(S);m({buffer:I,width:p.width,height:p.height})}else A(new Le(Te.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(S){return v.apply(this,arguments)}}(),r,c<0?.1:c>1?1:c)})):yield BV(r)})()}destroy(){if(qr.off(na.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),qr.off(na.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=X.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=X.ERROR,this.container&&this.container.appendChild(this.videoElement),UV.forEach(a=>{this.videoElement&&this.videoElement.addEventListener(a,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=X.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const r=xi();"Safari"===r.name&&15===Number(r.version)||X_()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.videoElement.style.objectFit=this.config.fit?this.config.fit:"cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Xo()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Xo()&&this.videoElement.load());const o=this.videoElement.play();void 0!==o&&o.catch(a=>{se.debug("[".concat(this.trackId,"] playback interrupted"),a.toString()),jn("debug",this,"play back interrupted: ".concat(a.toString()))})}removeVideoElement(){if(this.videoElement){UV.forEach(r=>{this.videoElement&&this.videoElement.removeEventListener(r,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=void 0,this.videoElementStatus=X.NONE}}handleAutoPlayFailed(){const r=xi();if(this.videoElement){const o=a=>{a.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{se.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed.")),jn("debug",this,"video element autoplay resumed")}).catch(c=>{se.error(c)}),"Android"!==r.os||"Chrome"!==r.name&&r.name!==bi.WECHAT?(document.body.removeEventListener("touchstart",o,!0),document.body.removeEventListener("mousedown",o,!0)):document.body.removeEventListener("click",o,!0))};"Android"!==r.os||"Chrome"!==r.name&&r.name!==bi.WECHAT?(document.body.addEventListener("touchstart",o,!0),document.body.addEventListener("mousedown",o,!0)):document.body.addEventListener("click",o,!0),m5()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}})||FV;const UV=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];var W8,VV={exports:{}};function s0(r,o,a){const c=r.createShader(a);if(!c)return new Le(Te.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(r.shaderSource(c,o),r.compileShader(c),!r.getShaderParameter(c,r.COMPILE_STATUS)){const p=r.getShaderInfoLog(c);return r.deleteShader(c),new Le(Te.WEBGL_INTERNAL_ERROR,"error compiling shader:"+p).throw()}return c}(function(r,o){r.exports=(()=>{var a={3476:(m,A,v)=>{m.exports=v(7460)},4341:(m,A,v)=>{m.exports=v(3685)},3536:(m,A,v)=>{var S=v(1910);m.exports=S},8171:(m,A,v)=>{v(6450);var S=v(4058).Object,I=m.exports=function(R,O,B){return S.defineProperty(R,O,B)};S.defineProperty.sham&&(I.sham=!0)},2956:(m,A,v)=>{v(7627),v(6274),v(5967),v(8881),v(4560),v(7206),v(4349),v(7971);var S=v(4058);m.exports=S.Promise},3685:(m,A,v)=>{var S=v(3536);m.exports=S},4883:(m,A,v)=>{var S=v(1899),I=v(7475),R=v(9826),O=S.TypeError;m.exports=function(B){if(I(B))return B;throw O(R(B)+" is not a function")}},174:(m,A,v)=>{var S=v(1899),I=v(4284),R=v(9826),O=S.TypeError;m.exports=function(B){if(I(B))return B;throw O(R(B)+" is not a constructor")}},1851:(m,A,v)=>{var S=v(1899),I=v(7475),R=S.String,O=S.TypeError;m.exports=function(B){if("object"==typeof B||I(B))return B;throw O("Can't set "+R(B)+" as a prototype")}},8479:m=>{m.exports=function(){}},5743:(m,A,v)=>{var S=v(1899),I=v(7046),R=S.TypeError;m.exports=function(O,B){if(I(B,O))return O;throw R("Incorrect invocation")}},6059:(m,A,v)=>{var S=v(1899),I=v(941),R=S.String,O=S.TypeError;m.exports=function(B){if(I(B))return B;throw O(R(B)+" is not an object")}},1692:(m,A,v)=>{var S=v(4529),I=v(9413),R=v(623),O=function(B){return function(q,z,te){var de,ge=S(q),Se=R(ge),Me=I(te,Se);if(B&&z!=z){for(;Se>Me;)if((de=ge[Me++])!=de)return!0}else for(;Se>Me;Me++)if((B||Me in ge)&&ge[Me]===z)return B||Me||0;return!B&&-1}};m.exports={includes:O(!0),indexOf:O(!1)}},3765:(m,A,v)=>{var S=v(5329);m.exports=S([].slice)},1385:(m,A,v)=>{var S=v(9813)("iterator"),I=!1;try{var R=0,O={next:function(){return{done:!!R++}},return:function(){I=!0}};O[S]=function(){return this},Array.from(O,function(){throw 2})}catch{}m.exports=function(B,q){if(!q&&!I)return!1;var z=!1;try{var te={};te[S]=function(){return{next:function(){return{done:z=!0}}}},B(te)}catch{}return z}},2532:(m,A,v)=>{var S=v(5329),I=S({}.toString),R=S("".slice);m.exports=function(O){return R(I(O),8,-1)}},9697:(m,A,v)=>{var S=v(1899),I=v(2885),R=v(7475),O=v(2532),B=v(9813)("toStringTag"),q=S.Object,z="Arguments"==O(function(){return arguments}());m.exports=I?O:function(te){var de,ge,Se;return void 0===te?"Undefined":null===te?"Null":"string"==typeof(ge=function(Me,dt){try{return Me[dt]}catch{}}(de=q(te),B))?ge:z?O(de):"Object"==(Se=O(de))&&R(de.callee)?"Arguments":Se}},8694:(m,A,v)=>{var S=v(5329)("".replace),I=String(Error("zxcasd").stack),R=/\n\s*at [^:]*:[^\n]*/,O=R.test(I);m.exports=function(B,q){if(O&&"string"==typeof B)for(;q--;)B=S(B,R,"");return B}},3489:(m,A,v)=>{var S=v(953),I=v(1136),R=v(9677),O=v(5988);m.exports=function(B,q,z){for(var te=I(q),de=O.f,ge=R.f,Se=0;Se<te.length;Se++){var Me=te[Se];S(B,Me)||z&&S(z,Me)||de(B,Me,ge(q,Me))}}},4160:(m,A,v)=>{var S=v(5981);m.exports=!S(function(){function I(){}return I.prototype.constructor=null,Object.getPrototypeOf(new I)!==I.prototype})},1046:(m,A,v)=>{var S=v(5143).IteratorPrototype,I=v(9290),R=v(1887),O=v(904),B=v(2077),q=function(){return this};m.exports=function(z,te,de,ge){var Se=te+" Iterator";return z.prototype=I(S,{next:R(+!ge,de)}),O(z,Se,!1,!0),B[Se]=q,z}},2029:(m,A,v)=>{var S=v(5746),I=v(5988),R=v(1887);m.exports=S?function(O,B,q){return I.f(O,B,R(1,q))}:function(O,B,q){return O[B]=q,O}},1887:m=>{m.exports=function(A,v){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:v}}},7771:(m,A,v)=>{var S=v(6887),I=v(8834),R=v(2529),O=v(9417),B=v(7475),q=v(1046),z=v(249),te=v(8929),de=v(904),ge=v(2029),Se=v(9754),Me=v(9813),dt=v(2077),kt=v(5143),Mt=O.PROPER,Lt=O.CONFIGURABLE,Vn=kt.IteratorPrototype,wn=kt.BUGGY_SAFARI_ITERATORS,yn=Me("iterator"),We="values",lt="entries",At=function(){return this};m.exports=function(n,t,e,s,d,f,b){q(e,t,s);var E,T,k,Q=function(Kt){if(Kt===d&&ft)return ft;if(!wn&&Kt in xe)return xe[Kt];switch(Kt){case"keys":case We:case lt:return function(){return new e(this,Kt)}}return function(){return new e(this)}},ie=t+" Iterator",Ie=!1,xe=n.prototype,qe=xe[yn]||xe["@@iterator"]||d&&xe[d],ft=!wn&&qe||Q(d),Qt="Array"==t&&xe.entries||qe;if(Qt&&(E=z(Qt.call(new n)))!==Object.prototype&&E.next&&(R||z(E)===Vn||(te?te(E,Vn):B(E[yn])||Se(E,yn,At)),de(E,ie,!0,!0),R&&(dt[ie]=At)),Mt&&d==We&&qe&&qe.name!==We&&(!R&&Lt?ge(xe,"name",We):(Ie=!0,ft=function(){return I(qe,this)})),d)if(T={values:Q(We),keys:f?ft:Q("keys"),entries:Q(lt)},b)for(k in T)(wn||Ie||!(k in xe))&&Se(xe,k,T[k]);else S({target:t,proto:!0,forced:wn||Ie},T);return R&&!b||xe[yn]===ft||Se(xe,yn,ft,{name:d}),dt[t]=ft,T}},5746:(m,A,v)=>{var S=v(5981);m.exports=!S(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},1333:(m,A,v)=>{var S=v(1899),I=v(941),R=S.document,O=I(R)&&I(R.createElement);m.exports=function(B){return O?R.createElement(B):{}}},3281:m=>{m.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:m=>{m.exports="object"==typeof window},4470:(m,A,v)=>{var S=v(2861),I=v(1899);m.exports=/ipad|iphone|ipod/i.test(S)&&void 0!==I.Pebble},2749:(m,A,v)=>{var S=v(2861);m.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(S)},6049:(m,A,v)=>{var S=v(2532),I=v(1899);m.exports="process"==S(I.process)},8045:(m,A,v)=>{var S=v(2861);m.exports=/web0s(?!.*chrome)/i.test(S)},2861:(m,A,v)=>{var S=v(626);m.exports=S("navigator","userAgent")||""},3385:(m,A,v)=>{var S,I,R=v(1899),O=v(2861),B=R.process,q=R.Deno,z=B&&B.versions||q&&q.version,te=z&&z.v8;te&&(I=(S=te.split("."))[0]>0&&S[0]<4?1:+(S[0]+S[1])),!I&&O&&(!(S=O.match(/Edge\/(\d+)/))||S[1]>=74)&&(S=O.match(/Chrome\/(\d+)/))&&(I=+S[1]),m.exports=I},6759:m=>{m.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:(m,A,v)=>{var S=v(5981),I=v(1887);m.exports=!S(function(){var R=Error("a");return!("stack"in R)||(Object.defineProperty(R,"stack",I(1,7)),7!==R.stack)})},6887:(m,A,v)=>{var S=v(1899),I=v(9730),R=v(5329),O=v(7475),B=v(9677).f,q=v(7252),z=v(4058),te=v(6843),de=v(2029),ge=v(953),Se=function(Me){var dt=function(kt,Mt,Lt){if(this instanceof dt){switch(arguments.length){case 0:return new Me;case 1:return new Me(kt);case 2:return new Me(kt,Mt)}return new Me(kt,Mt,Lt)}return I(Me,this,arguments)};return dt.prototype=Me.prototype,dt};m.exports=function(Me,dt){var kt,Mt,Lt,Vn,wn,yn,Ct,We,lt=Me.target,At=Me.global,n=Me.stat,t=Me.proto,e=At?S:n?S[lt]:(S[lt]||{}).prototype,s=At?z:z[lt]||de(z,lt,{})[lt],d=s.prototype;for(Lt in dt)kt=!q(At?Lt:lt+(n?".":"#")+Lt,Me.forced)&&e&&ge(e,Lt),wn=s[Lt],kt&&(yn=Me.noTargetGet?(We=B(e,Lt))&&We.value:e[Lt]),Vn=kt&&yn?yn:dt[Lt],kt&&typeof wn==typeof Vn||(Ct=Me.bind&&kt?te(Vn,S):Me.wrap&&kt?Se(Vn):t&&O(Vn)?R(Vn):Vn,(Me.sham||Vn&&Vn.sham||wn&&wn.sham)&&de(Ct,"sham",!0),de(s,Lt,Ct),t&&(ge(z,Mt=lt+"Prototype")||de(z,Mt,{}),de(z[Mt],Lt,Vn),Me.real&&d&&!d[Lt]&&de(d,Lt,Vn)))}},5981:m=>{m.exports=function(A){try{return!!A()}catch{return!0}}},9730:(m,A,v)=>{var S=v(8285),I=Function.prototype,R=I.apply,O=I.call;m.exports="object"==typeof Reflect&&Reflect.apply||(S?O.bind(R):function(){return O.apply(R,arguments)})},6843:(m,A,v)=>{var S=v(5329),I=v(4883),R=v(8285),O=S(S.bind);m.exports=function(B,q){return I(B),void 0===q?B:R?O(B,q):function(){return B.apply(q,arguments)}}},8285:(m,A,v)=>{var S=v(5981);m.exports=!S(function(){var I=function(){}.bind();return"function"!=typeof I||I.hasOwnProperty("prototype")})},8834:(m,A,v)=>{var S=v(8285),I=Function.prototype.call;m.exports=S?I.bind(I):function(){return I.apply(I,arguments)}},9417:(m,A,v)=>{var S=v(5746),I=v(953),R=Function.prototype,O=S&&Object.getOwnPropertyDescriptor,B=I(R,"name"),q=B&&"something"===function(){}.name,z=B&&(!S||S&&O(R,"name").configurable);m.exports={EXISTS:B,PROPER:q,CONFIGURABLE:z}},5329:(m,A,v)=>{var S=v(8285),I=Function.prototype,O=I.call,B=S&&I.bind.bind(O,O);m.exports=S?function(q){return q&&B(q)}:function(q){return q&&function(){return O.apply(q,arguments)}}},626:(m,A,v)=>{var S=v(4058),I=v(1899),R=v(7475),O=function(B){return R(B)?B:void 0};m.exports=function(B,q){return arguments.length<2?O(S[B])||O(I[B]):S[B]&&S[B][q]||I[B]&&I[B][q]}},2902:(m,A,v)=>{var S=v(9697),I=v(4229),R=v(2077),O=v(9813)("iterator");m.exports=function(B){if(null!=B)return I(B,O)||I(B,"@@iterator")||R[S(B)]}},429:(m,A,v)=>{var S=v(1899),I=v(8834),R=v(4883),O=v(6059),B=v(9826),q=v(2902),z=S.TypeError;m.exports=function(te,de){var ge=arguments.length<2?q(te):de;if(R(ge))return O(I(ge,te));throw z(B(te)+" is not iterable")}},4229:(m,A,v)=>{var S=v(4883);m.exports=function(I,R){var O=I[R];return null==O?void 0:S(O)}},1899:(m,A,v)=>{var S=function(I){return I&&I.Math==Math&&I};m.exports=S("object"==typeof globalThis&&globalThis)||S("object"==typeof window&&window)||S("object"==typeof self&&self)||S("object"==typeof v.g&&v.g)||function(){return this}()||Function("return this")()},953:(m,A,v)=>{var S=v(5329),I=v(9678),R=S({}.hasOwnProperty);m.exports=Object.hasOwn||function(O,B){return R(I(O),B)}},7748:m=>{m.exports={}},4845:(m,A,v)=>{var S=v(1899);m.exports=function(I,R){var O=S.console;O&&O.error&&(1==arguments.length?O.error(I):O.error(I,R))}},5463:(m,A,v)=>{var S=v(626);m.exports=S("document","documentElement")},2840:(m,A,v)=>{var S=v(5746),I=v(5981),R=v(1333);m.exports=!S&&!I(function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a})},7026:(m,A,v)=>{var S=v(1899),I=v(5329),R=v(5981),O=v(2532),B=S.Object,q=I("".split);m.exports=R(function(){return!B("z").propertyIsEnumerable(0)})?function(z){return"String"==O(z)?q(z,""):B(z)}:B},1302:(m,A,v)=>{var S=v(5329),I=v(7475),R=v(3030),O=S(Function.toString);I(R.inspectSource)||(R.inspectSource=function(B){return O(B)}),m.exports=R.inspectSource},3794:(m,A,v)=>{var S=v(941),I=v(2029);m.exports=function(R,O){S(O)&&"cause"in O&&I(R,"cause",O.cause)}},5402:(m,A,v)=>{var S,I,R,O=v(8019),B=v(1899),q=v(5329),z=v(941),te=v(2029),de=v(953),ge=v(3030),Se=v(4262),Me=v(7748),dt="Object already initialized",kt=B.TypeError;if(O||ge.state){var Lt=ge.state||(ge.state=new(0,B.WeakMap)),Vn=q(Lt.get),wn=q(Lt.has),yn=q(Lt.set);S=function(We,lt){if(wn(Lt,We))throw new kt(dt);return lt.facade=We,yn(Lt,We,lt),lt},I=function(We){return Vn(Lt,We)||{}},R=function(We){return wn(Lt,We)}}else{var Ct=Se("state");Me[Ct]=!0,S=function(We,lt){if(de(We,Ct))throw new kt(dt);return lt.facade=We,te(We,Ct,lt),lt},I=function(We){return de(We,Ct)?We[Ct]:{}},R=function(We){return de(We,Ct)}}m.exports={set:S,get:I,has:R,enforce:function(We){return R(We)?I(We):S(We,{})},getterFor:function(We){return function(lt){var At;if(!z(lt)||(At=I(lt)).type!==We)throw kt("Incompatible receiver, "+We+" required");return At}}}},6782:(m,A,v)=>{var S=v(9813),I=v(2077),R=S("iterator"),O=Array.prototype;m.exports=function(B){return void 0!==B&&(I.Array===B||O[R]===B)}},7475:m=>{m.exports=function(A){return"function"==typeof A}},4284:(m,A,v)=>{var S=v(5329),I=v(5981),R=v(7475),O=v(9697),B=v(626),q=v(1302),z=function(){},te=[],de=B("Reflect","construct"),ge=/^\s*(?:class|function)\b/,Se=S(ge.exec),Me=!ge.exec(z),dt=function(Mt){if(!R(Mt))return!1;try{return de(z,te,Mt),!0}catch{return!1}},kt=function(Mt){if(!R(Mt))return!1;switch(O(Mt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Me||!!Se(ge,q(Mt))}catch{return!0}};kt.sham=!0,m.exports=!de||I(function(){var Mt;return dt(dt.call)||!dt(Object)||!dt(function(){Mt=!0})||Mt})?kt:dt},7252:(m,A,v)=>{var S=v(5981),I=v(7475),R=/#|\.prototype\./,O=function(de,ge){var Se=q[B(de)];return Se==te||Se!=z&&(I(ge)?S(ge):!!ge)},B=O.normalize=function(de){return String(de).replace(R,".").toLowerCase()},q=O.data={},z=O.NATIVE="N",te=O.POLYFILL="P";m.exports=O},941:(m,A,v)=>{var S=v(7475);m.exports=function(I){return"object"==typeof I?null!==I:S(I)}},2529:m=>{m.exports=!0},6664:(m,A,v)=>{var S=v(1899),I=v(626),R=v(7475),O=v(7046),B=v(2302),q=S.Object;m.exports=B?function(z){return"symbol"==typeof z}:function(z){var te=I("Symbol");return R(te)&&O(te.prototype,q(z))}},3091:(m,A,v)=>{var S=v(1899),I=v(6843),R=v(8834),O=v(6059),B=v(9826),q=v(6782),z=v(623),te=v(7046),de=v(429),ge=v(2902),Se=v(7609),Me=S.TypeError,dt=function(Mt,Lt){this.stopped=Mt,this.result=Lt},kt=dt.prototype;m.exports=function(Mt,Lt,Vn){var wn,yn,Ct,We,lt,At,n,e=!(!Vn||!Vn.AS_ENTRIES),s=!(!Vn||!Vn.IS_ITERATOR),d=!(!Vn||!Vn.INTERRUPTED),f=I(Lt,Vn&&Vn.that),b=function(T){return wn&&Se(wn,"normal",T),new dt(!0,T)},E=function(T){return e?(O(T),d?f(T[0],T[1],b):f(T[0],T[1])):d?f(T,b):f(T)};if(s)wn=Mt;else{if(!(yn=ge(Mt)))throw Me(B(Mt)+" is not iterable");if(q(yn)){for(Ct=0,We=z(Mt);We>Ct;Ct++)if((lt=E(Mt[Ct]))&&te(kt,lt))return lt;return new dt(!1)}wn=de(Mt,yn)}for(At=wn.next;!(n=R(At,wn)).done;){try{lt=E(n.value)}catch(T){Se(wn,"throw",T)}if("object"==typeof lt&&lt&&te(kt,lt))return lt}return new dt(!1)}},7609:(m,A,v)=>{var S=v(8834),I=v(6059),R=v(4229);m.exports=function(O,B,q){var z,te;I(O);try{if(!(z=R(O,"return"))){if("throw"===B)throw q;return q}z=S(z,O)}catch(de){te=!0,z=de}if("throw"===B)throw q;if(te)throw z;return I(z),q}},5143:(m,A,v)=>{var S,I,R,O=v(5981),B=v(7475),q=v(9290),z=v(249),te=v(9754),de=v(9813),ge=v(2529),Se=de("iterator"),Me=!1;[].keys&&("next"in(R=[].keys())?(I=z(z(R)))!==Object.prototype&&(S=I):Me=!0),null==S||O(function(){var dt={};return S[Se].call(dt)!==dt})?S={}:ge&&(S=q(S)),B(S[Se])||te(S,Se,function(){return this}),m.exports={IteratorPrototype:S,BUGGY_SAFARI_ITERATORS:Me}},2077:m=>{m.exports={}},623:(m,A,v)=>{var S=v(3057);m.exports=function(I){return S(I.length)}},6132:(m,A,v)=>{var S,I,R,O,B,q,z,te,de=v(1899),ge=v(6843),Se=v(9677).f,Me=v(2941).set,dt=v(2749),kt=v(4470),Mt=v(8045),Lt=v(6049),Vn=de.MutationObserver||de.WebKitMutationObserver,wn=de.document,yn=de.process,Ct=de.Promise,We=Se(de,"queueMicrotask"),lt=We&&We.value;lt||(S=function(){var At,n;for(Lt&&(At=yn.domain)&&At.exit();I;){n=I.fn,I=I.next;try{n()}catch(t){throw I?O():R=void 0,t}}R=void 0,At&&At.enter()},dt||Lt||Mt||!Vn||!wn?!kt&&Ct&&Ct.resolve?((z=Ct.resolve(void 0)).constructor=Ct,te=ge(z.then,z),O=function(){te(S)}):Lt?O=function(){yn.nextTick(S)}:(Me=ge(Me,de),O=function(){Me(S)}):(B=!0,q=wn.createTextNode(""),new Vn(S).observe(q,{characterData:!0}),O=function(){q.data=B=!B})),m.exports=lt||function(At){var n={fn:At,next:void 0};R&&(R.next=n),I||(I=n,O()),R=n}},9297:(m,A,v)=>{var S=v(1899);m.exports=S.Promise},2497:(m,A,v)=>{var S=v(3385),I=v(5981);m.exports=!!Object.getOwnPropertySymbols&&!I(function(){var R=Symbol();return!String(R)||!(Object(R)instanceof Symbol)||!Symbol.sham&&S&&S<41})},8019:(m,A,v)=>{var S=v(1899),I=v(7475),R=v(1302),O=S.WeakMap;m.exports=I(O)&&/native code/.test(R(O))},9520:(m,A,v)=>{var S=v(4883),I=function(R){var O,B;this.promise=new R(function(q,z){if(void 0!==O||void 0!==B)throw TypeError("Bad Promise constructor");O=q,B=z}),this.resolve=S(O),this.reject=S(B)};m.exports.f=function(R){return new I(R)}},4649:(m,A,v)=>{var S=v(5803);m.exports=function(I,R){return void 0===I?arguments.length<2?"":R:S(I)}},9290:(m,A,v)=>{var S,I=v(6059),R=v(9938),O=v(6759),B=v(7748),q=v(5463),z=v(1333),te=v(4262)("IE_PROTO"),de=function(){},ge=function(dt){return"<script>"+dt+"<\/script>"},Se=function(dt){dt.write(ge("")),dt.close();var kt=dt.parentWindow.Object;return dt=null,kt},Me=function(){try{S=new ActiveXObject("htmlfile")}catch{}var dt,kt;Me=typeof document<"u"?document.domain&&S?Se(S):((kt=z("iframe")).style.display="none",q.appendChild(kt),kt.src=String("javascript:"),(dt=kt.contentWindow.document).open(),dt.write(ge("document.F=Object")),dt.close(),dt.F):Se(S);for(var Mt=O.length;Mt--;)delete Me.prototype[O[Mt]];return Me()};B[te]=!0,m.exports=Object.create||function(dt,kt){var Mt;return null!==dt?(de.prototype=I(dt),Mt=new de,de.prototype=null,Mt[te]=dt):Mt=Me(),void 0===kt?Mt:R.f(Mt,kt)}},9938:(m,A,v)=>{var S=v(5746),I=v(3937),R=v(5988),O=v(6059),B=v(4529),q=v(4771);A.f=S&&!I?Object.defineProperties:function(z,te){O(z);for(var de,ge=B(te),Se=q(te),Me=Se.length,dt=0;Me>dt;)R.f(z,de=Se[dt++],ge[de]);return z}},5988:(m,A,v)=>{var S=v(1899),I=v(5746),R=v(2840),O=v(3937),B=v(6059),q=v(3894),z=S.TypeError,te=Object.defineProperty,de=Object.getOwnPropertyDescriptor;A.f=I?O?function(ge,Se,Me){if(B(ge),Se=q(Se),B(Me),"function"==typeof ge&&"prototype"===Se&&"value"in Me&&"writable"in Me&&!Me.writable){var dt=de(ge,Se);dt&&dt.writable&&(ge[Se]=Me.value,Me={configurable:"configurable"in Me?Me.configurable:dt.configurable,enumerable:"enumerable"in Me?Me.enumerable:dt.enumerable,writable:!1})}return te(ge,Se,Me)}:te:function(ge,Se,Me){if(B(ge),Se=q(Se),B(Me),R)try{return te(ge,Se,Me)}catch{}if("get"in Me||"set"in Me)throw z("Accessors not supported");return"value"in Me&&(ge[Se]=Me.value),ge}},9677:(m,A,v)=>{var S=v(5746),I=v(8834),R=v(6760),O=v(1887),B=v(4529),q=v(3894),z=v(953),te=v(2840),de=Object.getOwnPropertyDescriptor;A.f=S?de:function(ge,Se){if(ge=B(ge),Se=q(Se),te)try{return de(ge,Se)}catch{}if(z(ge,Se))return O(!I(R.f,ge,Se),ge[Se])}},946:(m,A,v)=>{var S=v(5629),I=v(6759).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(R){return S(R,I)}},7857:(m,A)=>{A.f=Object.getOwnPropertySymbols},249:(m,A,v)=>{var S=v(1899),I=v(953),R=v(7475),O=v(9678),B=v(4262),q=v(4160),z=B("IE_PROTO"),te=S.Object,de=te.prototype;m.exports=q?te.getPrototypeOf:function(ge){var Se=O(ge);if(I(Se,z))return Se[z];var Me=Se.constructor;return R(Me)&&Se instanceof Me?Me.prototype:Se instanceof te?de:null}},7046:(m,A,v)=>{var S=v(5329);m.exports=S({}.isPrototypeOf)},5629:(m,A,v)=>{var S=v(5329),I=v(953),R=v(4529),O=v(1692).indexOf,B=v(7748),q=S([].push);m.exports=function(z,te){var de,ge=R(z),Se=0,Me=[];for(de in ge)!I(B,de)&&I(ge,de)&&q(Me,de);for(;te.length>Se;)I(ge,de=te[Se++])&&(~O(Me,de)||q(Me,de));return Me}},4771:(m,A,v)=>{var S=v(5629),I=v(6759);m.exports=Object.keys||function(R){return S(R,I)}},6760:(m,A)=>{var v={}.propertyIsEnumerable,S=Object.getOwnPropertyDescriptor,I=S&&!v.call({1:2},1);A.f=I?function(R){var O=S(this,R);return!!O&&O.enumerable}:v},8929:(m,A,v)=>{var S=v(5329),I=v(6059),R=v(1851);m.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var O,B=!1,q={};try{(O=S(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(q,[]),B=q instanceof Array}catch{}return function(z,te){return I(z),R(te),B?O(z,te):z.__proto__=te,z}}():void 0)},5623:(m,A,v)=>{var S=v(2885),I=v(9697);m.exports=S?{}.toString:function(){return"[object "+I(this)+"]"}},9811:(m,A,v)=>{var S=v(1899),I=v(8834),R=v(7475),O=v(941),B=S.TypeError;m.exports=function(q,z){var te,de;if("string"===z&&R(te=q.toString)&&!O(de=I(te,q))||R(te=q.valueOf)&&!O(de=I(te,q))||"string"!==z&&R(te=q.toString)&&!O(de=I(te,q)))return de;throw B("Can't convert object to primitive value")}},1136:(m,A,v)=>{var S=v(626),I=v(5329),R=v(946),O=v(7857),B=v(6059),q=I([].concat);m.exports=S("Reflect","ownKeys")||function(z){var te=R.f(B(z)),de=O.f;return de?q(te,de(z)):te}},4058:m=>{m.exports={}},2:m=>{m.exports=function(A){try{return{error:!1,value:A()}}catch(v){return{error:!0,value:v}}}},6584:(m,A,v)=>{var S=v(6059),I=v(941),R=v(9520);m.exports=function(O,B){if(S(O),I(B)&&B.constructor===O)return B;var q=R.f(O);return(0,q.resolve)(B),q.promise}},8397:m=>{var A=function(){this.head=null,this.tail=null};A.prototype={add:function(v){var S={item:v,next:null};this.head?this.tail.next=S:this.head=S,this.tail=S},get:function(){var v=this.head;if(v)return this.head=v.next,this.tail===v&&(this.tail=null),v.item}},m.exports=A},7524:(m,A,v)=>{var S=v(9754);m.exports=function(I,R,O){for(var B in R)O&&O.unsafe&&I[B]?I[B]=R[B]:S(I,B,R[B],O);return I}},9754:(m,A,v)=>{var S=v(2029);m.exports=function(I,R,O,B){B&&B.enumerable?I[R]=O:S(I,R,O)}},8219:(m,A,v)=>{var S=v(1899).TypeError;m.exports=function(I){if(null==I)throw S("Can't call method on "+I);return I}},4911:(m,A,v)=>{var S=v(1899),I=Object.defineProperty;m.exports=function(R,O){try{I(S,R,{value:O,configurable:!0,writable:!0})}catch{S[R]=O}return O}},4431:(m,A,v)=>{var S=v(626),I=v(5988),R=v(9813),O=v(5746),B=R("species");m.exports=function(q){var z=S(q);O&&z&&!z[B]&&(0,I.f)(z,B,{configurable:!0,get:function(){return this}})}},904:(m,A,v)=>{var S=v(2885),I=v(5988).f,R=v(2029),O=v(953),B=v(5623),q=v(9813)("toStringTag");m.exports=function(z,te,de,ge){if(z){var Se=de?z:z.prototype;O(Se,q)||I(Se,q,{configurable:!0,value:te}),ge&&!S&&R(Se,"toString",B)}}},4262:(m,A,v)=>{var S=v(8726),I=v(9418),R=S("keys");m.exports=function(O){return R[O]||(R[O]=I(O))}},3030:(m,A,v)=>{var S=v(1899),I=v(4911),R="__core-js_shared__",O=S[R]||I(R,{});m.exports=O},8726:(m,A,v)=>{var S=v(2529),I=v(3030);(m.exports=function(R,O){return I[R]||(I[R]=void 0!==O?O:{})})("versions",[]).push({version:"3.20.3",mode:S?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},487:(m,A,v)=>{var S=v(6059),I=v(174),R=v(9813)("species");m.exports=function(O,B){var q,z=S(O).constructor;return void 0===z||null==(q=S(z)[R])?B:I(q)}},4620:(m,A,v)=>{var S=v(5329),I=v(2435),R=v(5803),O=v(8219),B=S("".charAt),q=S("".charCodeAt),z=S("".slice),te=function(de){return function(ge,Se){var Me,dt,kt=R(O(ge)),Mt=I(Se),Lt=kt.length;return Mt<0||Mt>=Lt?de?"":void 0:(Me=q(kt,Mt))<55296||Me>56319||Mt+1===Lt||(dt=q(kt,Mt+1))<56320||dt>57343?de?B(kt,Mt):Me:de?z(kt,Mt,Mt+2):dt-56320+(Me-55296<<10)+65536}};m.exports={codeAt:te(!1),charAt:te(!0)}},2941:(m,A,v)=>{var S,I,R,O,B=v(1899),q=v(9730),z=v(6843),te=v(7475),de=v(953),ge=v(5981),Se=v(5463),Me=v(3765),dt=v(1333),kt=v(2749),Mt=v(6049),Lt=B.setImmediate,Vn=B.clearImmediate,wn=B.process,yn=B.Dispatch,Ct=B.Function,We=B.MessageChannel,lt=B.String,At=0,n={};try{S=B.location}catch{}var t=function(f){if(de(n,f)){var b=n[f];delete n[f],b()}},e=function(f){return function(){t(f)}},s=function(f){t(f.data)},d=function(f){B.postMessage(lt(f),S.protocol+"//"+S.host)};Lt&&Vn||(Lt=function(f){var b=Me(arguments,1);return n[++At]=function(){q(te(f)?f:Ct(f),void 0,b)},I(At),At},Vn=function(f){delete n[f]},Mt?I=function(f){wn.nextTick(e(f))}:yn&&yn.now?I=function(f){yn.now(e(f))}:We&&!kt?(O=(R=new We).port2,R.port1.onmessage=s,I=z(O.postMessage,O)):B.addEventListener&&te(B.postMessage)&&!B.importScripts&&S&&"file:"!==S.protocol&&!ge(d)?(I=d,B.addEventListener("message",s,!1)):I="onreadystatechange"in dt("script")?function(f){Se.appendChild(dt("script")).onreadystatechange=function(){Se.removeChild(this),t(f)}}:function(f){setTimeout(e(f),0)}),m.exports={set:Lt,clear:Vn}},9413:(m,A,v)=>{var S=v(2435),I=Math.max,R=Math.min;m.exports=function(O,B){var q=S(O);return q<0?I(q+B,0):R(q,B)}},4529:(m,A,v)=>{var S=v(7026),I=v(8219);m.exports=function(R){return S(I(R))}},2435:m=>{var A=Math.ceil,v=Math.floor;m.exports=function(S){var I=+S;return I!=I||0===I?0:(I>0?v:A)(I)}},3057:(m,A,v)=>{var S=v(2435),I=Math.min;m.exports=function(R){return R>0?I(S(R),9007199254740991):0}},9678:(m,A,v)=>{var S=v(1899),I=v(8219),R=S.Object;m.exports=function(O){return R(I(O))}},6935:(m,A,v)=>{var S=v(1899),I=v(8834),R=v(941),O=v(6664),B=v(4229),q=v(9811),z=v(9813),te=S.TypeError,de=z("toPrimitive");m.exports=function(ge,Se){if(!R(ge)||O(ge))return ge;var Me,dt=B(ge,de);if(dt){if(void 0===Se&&(Se="default"),Me=I(dt,ge,Se),!R(Me)||O(Me))return Me;throw te("Can't convert object to primitive value")}return void 0===Se&&(Se="number"),q(ge,Se)}},3894:(m,A,v)=>{var S=v(6935),I=v(6664);m.exports=function(R){var O=S(R,"string");return I(O)?O:O+""}},2885:(m,A,v)=>{var S={};S[v(9813)("toStringTag")]="z",m.exports="[object z]"===String(S)},5803:(m,A,v)=>{var S=v(1899),I=v(9697),R=S.String;m.exports=function(O){if("Symbol"===I(O))throw TypeError("Cannot convert a Symbol value to a string");return R(O)}},9826:(m,A,v)=>{var S=v(1899).String;m.exports=function(I){try{return S(I)}catch{return"Object"}}},9418:(m,A,v)=>{var S=v(5329),I=0,R=Math.random(),O=S(1..toString);m.exports=function(B){return"Symbol("+(void 0===B?"":B)+")_"+O(++I+R,36)}},2302:(m,A,v)=>{var S=v(2497);m.exports=S&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:(m,A,v)=>{var S=v(5746),I=v(5981);m.exports=S&&I(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},9813:(m,A,v)=>{var S=v(1899),I=v(8726),R=v(953),O=v(9418),B=v(2497),q=v(2302),z=I("wks"),te=S.Symbol,de=te&&te.for,ge=q?te:te&&te.withoutSetter||O;m.exports=function(Se){if(!R(z,Se)||!B&&"string"!=typeof z[Se]){var Me="Symbol."+Se;z[Se]=B&&R(te,Se)?te[Se]:q&&de?de(Me):ge(Me)}return z[Se]}},7627:(m,A,v)=>{var S=v(6887),I=v(1899),R=v(7046),O=v(249),B=v(8929),q=v(3489),z=v(9290),te=v(2029),de=v(1887),ge=v(8694),Se=v(3794),Me=v(3091),dt=v(4649),kt=v(9813),Mt=v(8780),Lt=kt("toStringTag"),Vn=I.Error,wn=[].push,yn=function(We,lt){var At,n=arguments.length>2?arguments[2]:void 0,t=R(Ct,this);B?At=B(new Vn,t?O(this):Ct):(At=t?this:z(Ct),te(At,Lt,"Error")),void 0!==lt&&te(At,"message",dt(lt)),Mt&&te(At,"stack",ge(At.stack,1)),Se(At,n);var e=[];return Me(We,wn,{that:e}),te(At,"errors",e),At};B?B(yn,Vn):q(yn,Vn,{name:!0});var Ct=yn.prototype=z(Vn.prototype,{constructor:de(1,yn),message:de(1,""),name:de(1,"AggregateError")});S({global:!0},{AggregateError:yn})},6274:(m,A,v)=>{var S=v(4529),I=v(8479),R=v(2077),O=v(5402),B=v(5988).f,q=v(7771),z=v(2529),te=v(5746),de="Array Iterator",ge=O.set,Se=O.getterFor(de);m.exports=q(Array,"Array",function(dt,kt){ge(this,{type:de,target:S(dt),index:0,kind:kt})},function(){var dt=Se(this),kt=dt.target,Mt=dt.kind,Lt=dt.index++;return!kt||Lt>=kt.length?(dt.target=void 0,{value:void 0,done:!0}):"keys"==Mt?{value:Lt,done:!1}:"values"==Mt?{value:kt[Lt],done:!1}:{value:[Lt,kt[Lt]],done:!1}},"values");var Me=R.Arguments=R.Array;if(I("keys"),I("values"),I("entries"),!z&&te&&"values"!==Me.name)try{B(Me,"name",{value:"values"})}catch{}},6450:(m,A,v)=>{var S=v(6887),I=v(5746),R=v(5988).f;S({target:"Object",stat:!0,forced:Object.defineProperty!==R,sham:!I},{defineProperty:R})},5967:()=>{},4560:(m,A,v)=>{var S=v(6887),I=v(8834),R=v(4883),O=v(9520),B=v(2),q=v(3091);S({target:"Promise",stat:!0},{allSettled:function(z){var te=this,de=O.f(te),ge=de.resolve,Se=de.reject,Me=B(function(){var dt=R(te.resolve),kt=[],Mt=0,Lt=1;q(z,function(Vn){var wn=Mt++,yn=!1;Lt++,I(dt,te,Vn).then(function(Ct){yn||(yn=!0,kt[wn]={status:"fulfilled",value:Ct},--Lt||ge(kt))},function(Ct){yn||(yn=!0,kt[wn]={status:"rejected",reason:Ct},--Lt||ge(kt))})}),--Lt||ge(kt)});return Me.error&&Se(Me.value),de.promise}})},7206:(m,A,v)=>{var S=v(6887),I=v(4883),R=v(626),O=v(8834),B=v(9520),q=v(2),z=v(3091),te="No one promise resolved";S({target:"Promise",stat:!0},{any:function(de){var ge=this,Se=R("AggregateError"),Me=B.f(ge),dt=Me.resolve,kt=Me.reject,Mt=q(function(){var Lt=I(ge.resolve),Vn=[],wn=0,yn=1,Ct=!1;z(de,function(We){var lt=wn++,At=!1;yn++,O(Lt,ge,We).then(function(n){At||Ct||(Ct=!0,dt(n))},function(n){At||Ct||(At=!0,Vn[lt]=n,--yn||kt(new Se(Vn,te)))})}),--yn||kt(new Se(Vn,te))});return Mt.error&&kt(Mt.value),Me.promise}})},4349:(m,A,v)=>{var S=v(6887),I=v(2529),R=v(9297),O=v(5981),B=v(626),q=v(7475),z=v(487),te=v(6584),de=v(9754);if(S({target:"Promise",proto:!0,real:!0,forced:!!R&&O(function(){R.prototype.finally.call({then:function(){}},function(){})})},{finally:function(Se){var Me=z(this,B("Promise")),dt=q(Se);return this.then(dt?function(kt){return te(Me,Se()).then(function(){return kt})}:Se,dt?function(kt){return te(Me,Se()).then(function(){throw kt})}:Se)}}),!I&&q(R)){var ge=B("Promise").prototype.finally;R.prototype.finally!==ge&&de(R.prototype,"finally",ge,{unsafe:!0})}},8881:(m,A,v)=>{var S,I,R,O,B=v(6887),q=v(2529),z=v(1899),te=v(626),de=v(8834),ge=v(9297),Se=v(9754),Me=v(7524),dt=v(8929),kt=v(904),Mt=v(4431),Lt=v(4883),Vn=v(7475),wn=v(941),yn=v(5743),Ct=v(1302),We=v(3091),lt=v(1385),At=v(487),n=v(2941).set,t=v(6132),e=v(6584),s=v(4845),d=v(9520),f=v(2),b=v(8397),E=v(5402),T=v(7252),k=v(9813),Q=v(3321),ie=v(6049),Ie=v(3385),xe=k("species"),qe="Promise",ft=E.getterFor(qe),Qt=E.set,Kt=E.getterFor(qe),pn=ge&&ge.prototype,Vt=ge,zn=pn,pi=z.TypeError,hi=z.document,cs=z.process,ao=d.f,zf=ao,gt=!!(hi&&hi.createEvent&&z.dispatchEvent),be=Vn(z.PromiseRejectionEvent),st="unhandledrejection",Rt=!1,vt=T(qe,function(){var Ln=Ct(Vt),Mn=Ln!==String(Vt);if(!Mn&&66===Ie||q&&!zn.finally)return!0;if(Ie>=51&&/native code/.test(Ln))return!1;var Sr=new Vt(function(ws){ws(1)}),ei=function(ws){ws(function(){},function(){})};return(Sr.constructor={})[xe]=ei,!(Rt=Sr.then(function(){})instanceof ei)||!Mn&&Q&&!be}),gn=vt||!lt(function(Ln){Vt.all(Ln).catch(function(){})}),Dt=function(Ln){var Mn;return!(!wn(Ln)||!Vn(Mn=Ln.then))&&Mn},tn=function(Ln,Mn){var Sr,ei,ws,Bh=Mn.value,wB=1==Mn.state,WP=wB?Ln.ok:Ln.fail,kQ=Ln.resolve,YT=Ln.reject,$T=Ln.domain;try{WP?(wB||(2===Mn.rejection&&lr(Mn),Mn.rejection=1),!0===WP?Sr=Bh:($T&&$T.enter(),Sr=WP(Bh),$T&&($T.exit(),ws=!0)),Sr===Ln.promise?YT(pi("Promise-chain cycle")):(ei=Dt(Sr))?de(ei,Sr,kQ,YT):kQ(Sr)):YT(Bh)}catch(TW){$T&&!ws&&$T.exit(),YT(TW)}},On=function(Ln,Mn){Ln.notified||(Ln.notified=!0,t(function(){for(var Sr,ei=Ln.reactions;Sr=ei.get();)tn(Sr,Ln);Ln.notified=!1,Mn&&!Ln.rejection&&_n(Ln)}))},Xn=function(Ln,Mn,Sr){var ei,ws;gt?((ei=hi.createEvent("Event")).promise=Mn,ei.reason=Sr,ei.initEvent(Ln,!1,!0),z.dispatchEvent(ei)):ei={promise:Mn,reason:Sr},!be&&(ws=z["on"+Ln])?ws(ei):Ln===st&&s("Unhandled promise rejection",Sr)},_n=function(Ln){de(n,z,function(){var Mn,Sr=Ln.facade,ei=Ln.value;if(Gn(Ln)&&(Mn=f(function(){ie?cs.emit("unhandledRejection",ei,Sr):Xn(st,Sr,ei)}),Ln.rejection=ie||Gn(Ln)?2:1,Mn.error))throw Mn.value})},Gn=function(Ln){return 1!==Ln.rejection&&!Ln.parent},lr=function(Ln){de(n,z,function(){var Mn=Ln.facade;ie?cs.emit("rejectionHandled",Mn):Xn("rejectionhandled",Mn,Ln.value)})},Ur=function(Ln,Mn,Sr){return function(ei){Ln(Mn,ei,Sr)}},Zr=function(Ln,Mn,Sr){Ln.done||(Ln.done=!0,Sr&&(Ln=Sr),Ln.value=Mn,Ln.state=2,On(Ln,!0))},ic=function(Ln,Mn,Sr){if(!Ln.done){Ln.done=!0,Sr&&(Ln=Sr);try{if(Ln.facade===Mn)throw pi("Promise can't be resolved itself");var ei=Dt(Mn);ei?t(function(){var ws={done:!1};try{de(ei,Mn,Ur(ic,ws,Ln),Ur(Zr,ws,Ln))}catch(Bh){Zr(ws,Bh,Ln)}}):(Ln.value=Mn,Ln.state=1,On(Ln,!1))}catch(ws){Zr({done:!1},ws,Ln)}}};if(vt&&(zn=(Vt=function(Ln){yn(this,zn),Lt(Ln),de(S,this);var Mn=ft(this);try{Ln(Ur(ic,Mn),Ur(Zr,Mn))}catch(Sr){Zr(Mn,Sr)}}).prototype,(S=function(Ln){Qt(this,{type:qe,done:!1,notified:!1,parent:!1,reactions:new b,rejection:!1,state:0,value:void 0})}).prototype=Me(zn,{then:function(Ln,Mn){var Sr=Kt(this),ei=ao(At(this,Vt));return Sr.parent=!0,ei.ok=!Vn(Ln)||Ln,ei.fail=Vn(Mn)&&Mn,ei.domain=ie?cs.domain:void 0,0==Sr.state?Sr.reactions.add(ei):t(function(){tn(ei,Sr)}),ei.promise},catch:function(Ln){return this.then(void 0,Ln)}}),I=function(){var Ln=new S,Mn=ft(Ln);this.promise=Ln,this.resolve=Ur(ic,Mn),this.reject=Ur(Zr,Mn)},d.f=ao=function(Ln){return Ln===Vt||Ln===R?new I(Ln):zf(Ln)},!q&&Vn(ge)&&pn!==Object.prototype)){O=pn.then,Rt||(Se(pn,"then",function(Ln,Mn){var Sr=this;return new Vt(function(ei,ws){de(O,Sr,ei,ws)}).then(Ln,Mn)},{unsafe:!0}),Se(pn,"catch",zn.catch,{unsafe:!0}));try{delete pn.constructor}catch{}dt&&dt(pn,zn)}B({global:!0,wrap:!0,forced:vt},{Promise:Vt}),kt(Vt,qe,!1,!0),Mt(qe),R=te(qe),B({target:qe,stat:!0,forced:vt},{reject:function(Ln){var Mn=ao(this);return de(Mn.reject,void 0,Ln),Mn.promise}}),B({target:qe,stat:!0,forced:q||vt},{resolve:function(Ln){return e(q&&this===R?Vt:this,Ln)}}),B({target:qe,stat:!0,forced:gn},{all:function(Ln){var Mn=this,Sr=ao(Mn),ei=Sr.resolve,ws=Sr.reject,Bh=f(function(){var wB=Lt(Mn.resolve),WP=[],kQ=0,YT=1;We(Ln,function($T){var TW=kQ++,Bz=!1;YT++,de(wB,Mn,$T).then(function(Uz){Bz||(Bz=!0,WP[TW]=Uz,--YT||ei(WP))},ws)}),--YT||ei(WP)});return Bh.error&&ws(Bh.value),Sr.promise},race:function(Ln){var Mn=this,Sr=ao(Mn),ei=Sr.reject,ws=f(function(){var Bh=Lt(Mn.resolve);We(Ln,function(wB){de(Bh,Mn,wB).then(Sr.resolve,ei)})});return ws.error&&ei(ws.value),Sr.promise}})},7971:(m,A,v)=>{var S=v(4620).charAt,I=v(5803),R=v(5402),O=v(7771),B="String Iterator",q=R.set,z=R.getterFor(B);O(String,"String",function(te){q(this,{type:B,string:I(te),index:0})},function(){var te,de=z(this),ge=de.string,Se=de.index;return Se>=ge.length?{value:void 0,done:!0}:(te=S(ge,Se),de.index+=te.length,{value:te,done:!1})})},7634:(m,A,v)=>{v(6274);var S=v(3281),I=v(1899),R=v(9697),O=v(2029),B=v(2077),q=v(9813)("toStringTag");for(var z in S){var te=I[z],de=te&&te.prototype;de&&R(de)!==q&&O(de,q,z),B[z]=B.Array}},1910:(m,A,v)=>{var S=v(8171);m.exports=S},7460:(m,A,v)=>{var S=v(2956);v(7634),m.exports=S},9662:(m,A,v)=>{var S=v(7854),I=v(614),R=v(6330),O=S.TypeError;m.exports=function(B){if(I(B))return B;throw O(R(B)+" is not a function")}},6077:(m,A,v)=>{var S=v(7854),I=v(614),R=S.String,O=S.TypeError;m.exports=function(B){if("object"==typeof B||I(B))return B;throw O("Can't set "+R(B)+" as a prototype")}},1223:(m,A,v)=>{var S=v(5112),I=v(30),R=v(3070),O=S("unscopables"),B=Array.prototype;null==B[O]&&R.f(B,O,{configurable:!0,value:I(null)}),m.exports=function(q){B[O][q]=!0}},9670:(m,A,v)=>{var S=v(7854),I=v(111),R=S.String,O=S.TypeError;m.exports=function(B){if(I(B))return B;throw O(R(B)+" is not an object")}},1318:(m,A,v)=>{var S=v(5656),I=v(1400),R=v(6244),O=function(B){return function(q,z,te){var de,ge=S(q),Se=R(ge),Me=I(te,Se);if(B&&z!=z){for(;Se>Me;)if((de=ge[Me++])!=de)return!0}else for(;Se>Me;Me++)if((B||Me in ge)&&ge[Me]===z)return B||Me||0;return!B&&-1}};m.exports={includes:O(!0),indexOf:O(!1)}},4326:(m,A,v)=>{var S=v(1702),I=S({}.toString),R=S("".slice);m.exports=function(O){return R(I(O),8,-1)}},648:(m,A,v)=>{var S=v(7854),I=v(1694),R=v(614),O=v(4326),B=v(5112)("toStringTag"),q=S.Object,z="Arguments"==O(function(){return arguments}());m.exports=I?O:function(te){var de,ge,Se;return void 0===te?"Undefined":null===te?"Null":"string"==typeof(ge=function(Me,dt){try{return Me[dt]}catch{}}(de=q(te),B))?ge:z?O(de):"Object"==(Se=O(de))&&R(de.callee)?"Arguments":Se}},7741:(m,A,v)=>{var S=v(1702)("".replace),I=String(Error("zxcasd").stack),R=/\n\s*at [^:]*:[^\n]*/,O=R.test(I);m.exports=function(B,q){if(O&&"string"==typeof B)for(;q--;)B=S(B,R,"");return B}},9920:(m,A,v)=>{var S=v(2597),I=v(3887),R=v(1236),O=v(3070);m.exports=function(B,q,z){for(var te=I(q),de=O.f,ge=R.f,Se=0;Se<te.length;Se++){var Me=te[Se];S(B,Me)||z&&S(z,Me)||de(B,Me,ge(q,Me))}}},8544:(m,A,v)=>{var S=v(7293);m.exports=!S(function(){function I(){}return I.prototype.constructor=null,Object.getPrototypeOf(new I)!==I.prototype})},4994:(m,A,v)=>{var S=v(3383).IteratorPrototype,I=v(30),R=v(9114),O=v(8003),B=v(7497),q=function(){return this};m.exports=function(z,te,de,ge){var Se=te+" Iterator";return z.prototype=I(S,{next:R(+!ge,de)}),O(z,Se,!1,!0),B[Se]=q,z}},8880:(m,A,v)=>{var S=v(9781),I=v(3070),R=v(9114);m.exports=S?function(O,B,q){return I.f(O,B,R(1,q))}:function(O,B,q){return O[B]=q,O}},9114:m=>{m.exports=function(A,v){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:v}}},654:(m,A,v)=>{var S=v(2109),I=v(6916),R=v(1913),O=v(6530),B=v(614),q=v(4994),z=v(9518),te=v(7674),de=v(8003),ge=v(8880),Se=v(1320),Me=v(5112),dt=v(7497),kt=v(3383),Mt=O.PROPER,Lt=O.CONFIGURABLE,Vn=kt.IteratorPrototype,wn=kt.BUGGY_SAFARI_ITERATORS,yn=Me("iterator"),We="values",lt="entries",At=function(){return this};m.exports=function(n,t,e,s,d,f,b){q(e,t,s);var E,T,k,Q=function(Kt){if(Kt===d&&ft)return ft;if(!wn&&Kt in xe)return xe[Kt];switch(Kt){case"keys":case We:case lt:return function(){return new e(this,Kt)}}return function(){return new e(this)}},ie=t+" Iterator",Ie=!1,xe=n.prototype,qe=xe[yn]||xe["@@iterator"]||d&&xe[d],ft=!wn&&qe||Q(d),Qt="Array"==t&&xe.entries||qe;if(Qt&&(E=z(Qt.call(new n)))!==Object.prototype&&E.next&&(R||z(E)===Vn||(te?te(E,Vn):B(E[yn])||Se(E,yn,At)),de(E,ie,!0,!0),R&&(dt[ie]=At)),Mt&&d==We&&qe&&qe.name!==We&&(!R&&Lt?ge(xe,"name",We):(Ie=!0,ft=function(){return I(qe,this)})),d)if(T={values:Q(We),keys:f?ft:Q("keys"),entries:Q(lt)},b)for(k in T)(wn||Ie||!(k in xe))&&Se(xe,k,T[k]);else S({target:t,proto:!0,forced:wn||Ie},T);return R&&!b||xe[yn]===ft||Se(xe,yn,ft,{name:d}),dt[t]=ft,T}},9781:(m,A,v)=>{var S=v(7293);m.exports=!S(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:(m,A,v)=>{var S=v(7854),I=v(111),R=S.document,O=I(R)&&I(R.createElement);m.exports=function(B){return O?R.createElement(B):{}}},8324:m=>{m.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(m,A,v)=>{var S=v(317)("span").classList,I=S&&S.constructor&&S.constructor.prototype;m.exports=I===Object.prototype?void 0:I},8113:(m,A,v)=>{var S=v(5005);m.exports=S("navigator","userAgent")||""},7392:(m,A,v)=>{var S,I,R=v(7854),O=v(8113),B=R.process,q=R.Deno,z=B&&B.versions||q&&q.version,te=z&&z.v8;te&&(I=(S=te.split("."))[0]>0&&S[0]<4?1:+(S[0]+S[1])),!I&&O&&(!(S=O.match(/Edge\/(\d+)/))||S[1]>=74)&&(S=O.match(/Chrome\/(\d+)/))&&(I=+S[1]),m.exports=I},748:m=>{m.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:(m,A,v)=>{var S=v(7293),I=v(9114);m.exports=!S(function(){var R=Error("a");return!("stack"in R)||(Object.defineProperty(R,"stack",I(1,7)),7!==R.stack)})},2109:(m,A,v)=>{var S=v(7854),I=v(1236).f,R=v(8880),O=v(1320),B=v(3505),q=v(9920),z=v(4705);m.exports=function(te,de){var ge,Se,Me,dt,kt,Mt=te.target,Lt=te.global,Vn=te.stat;if(ge=Lt?S:Vn?S[Mt]||B(Mt,{}):(S[Mt]||{}).prototype)for(Se in de){if(dt=de[Se],Me=te.noTargetGet?(kt=I(ge,Se))&&kt.value:ge[Se],!z(Lt?Se:Mt+(Vn?".":"#")+Se,te.forced)&&void 0!==Me){if(typeof dt==typeof Me)continue;q(dt,Me)}(te.sham||Me&&Me.sham)&&R(dt,"sham",!0),O(ge,Se,dt,te)}}},7293:m=>{m.exports=function(A){try{return!!A()}catch{return!0}}},2104:(m,A,v)=>{var S=v(4374),I=Function.prototype,R=I.apply,O=I.call;m.exports="object"==typeof Reflect&&Reflect.apply||(S?O.bind(R):function(){return O.apply(R,arguments)})},4374:(m,A,v)=>{var S=v(7293);m.exports=!S(function(){var I=function(){}.bind();return"function"!=typeof I||I.hasOwnProperty("prototype")})},6916:(m,A,v)=>{var S=v(4374),I=Function.prototype.call;m.exports=S?I.bind(I):function(){return I.apply(I,arguments)}},6530:(m,A,v)=>{var S=v(9781),I=v(2597),R=Function.prototype,O=S&&Object.getOwnPropertyDescriptor,B=I(R,"name"),q=B&&"something"===function(){}.name,z=B&&(!S||S&&O(R,"name").configurable);m.exports={EXISTS:B,PROPER:q,CONFIGURABLE:z}},1702:(m,A,v)=>{var S=v(4374),I=Function.prototype,O=I.call,B=S&&I.bind.bind(O,O);m.exports=S?function(q){return q&&B(q)}:function(q){return q&&function(){return O.apply(q,arguments)}}},5005:(m,A,v)=>{var S=v(7854),I=v(614),R=function(O){return I(O)?O:void 0};m.exports=function(O,B){return arguments.length<2?R(S[O]):S[O]&&S[O][B]}},8173:(m,A,v)=>{var S=v(9662);m.exports=function(I,R){var O=I[R];return null==O?void 0:S(O)}},7854:(m,A,v)=>{var S=function(I){return I&&I.Math==Math&&I};m.exports=S("object"==typeof globalThis&&globalThis)||S("object"==typeof window&&window)||S("object"==typeof self&&self)||S("object"==typeof v.g&&v.g)||function(){return this}()||Function("return this")()},2597:(m,A,v)=>{var S=v(1702),I=v(7908),R=S({}.hasOwnProperty);m.exports=Object.hasOwn||function(O,B){return R(I(O),B)}},3501:m=>{m.exports={}},490:(m,A,v)=>{var S=v(5005);m.exports=S("document","documentElement")},4664:(m,A,v)=>{var S=v(9781),I=v(7293),R=v(317);m.exports=!S&&!I(function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a})},8361:(m,A,v)=>{var S=v(7854),I=v(1702),R=v(7293),O=v(4326),B=S.Object,q=I("".split);m.exports=R(function(){return!B("z").propertyIsEnumerable(0)})?function(z){return"String"==O(z)?q(z,""):B(z)}:B},9587:(m,A,v)=>{var S=v(614),I=v(111),R=v(7674);m.exports=function(O,B,q){var z,te;return R&&S(z=B.constructor)&&z!==q&&I(te=z.prototype)&&te!==q.prototype&&R(O,te),O}},2788:(m,A,v)=>{var S=v(1702),I=v(614),R=v(5465),O=S(Function.toString);I(R.inspectSource)||(R.inspectSource=function(B){return O(B)}),m.exports=R.inspectSource},8340:(m,A,v)=>{var S=v(111),I=v(8880);m.exports=function(R,O){S(O)&&"cause"in O&&I(R,"cause",O.cause)}},9909:(m,A,v)=>{var S,I,R,O=v(8536),B=v(7854),q=v(1702),z=v(111),te=v(8880),de=v(2597),ge=v(5465),Se=v(6200),Me=v(3501),dt="Object already initialized",kt=B.TypeError;if(O||ge.state){var Lt=ge.state||(ge.state=new(0,B.WeakMap)),Vn=q(Lt.get),wn=q(Lt.has),yn=q(Lt.set);S=function(We,lt){if(wn(Lt,We))throw new kt(dt);return lt.facade=We,yn(Lt,We,lt),lt},I=function(We){return Vn(Lt,We)||{}},R=function(We){return wn(Lt,We)}}else{var Ct=Se("state");Me[Ct]=!0,S=function(We,lt){if(de(We,Ct))throw new kt(dt);return lt.facade=We,te(We,Ct,lt),lt},I=function(We){return de(We,Ct)?We[Ct]:{}},R=function(We){return de(We,Ct)}}m.exports={set:S,get:I,has:R,enforce:function(We){return R(We)?I(We):S(We,{})},getterFor:function(We){return function(lt){var At;if(!z(lt)||(At=I(lt)).type!==We)throw kt("Incompatible receiver, "+We+" required");return At}}}},614:m=>{m.exports=function(A){return"function"==typeof A}},4705:(m,A,v)=>{var S=v(7293),I=v(614),R=/#|\.prototype\./,O=function(de,ge){var Se=q[B(de)];return Se==te||Se!=z&&(I(ge)?S(ge):!!ge)},B=O.normalize=function(de){return String(de).replace(R,".").toLowerCase()},q=O.data={},z=O.NATIVE="N",te=O.POLYFILL="P";m.exports=O},111:(m,A,v)=>{var S=v(614);m.exports=function(I){return"object"==typeof I?null!==I:S(I)}},1913:m=>{m.exports=!1},2190:(m,A,v)=>{var S=v(7854),I=v(5005),R=v(614),O=v(7976),B=v(3307),q=S.Object;m.exports=B?function(z){return"symbol"==typeof z}:function(z){var te=I("Symbol");return R(te)&&O(te.prototype,q(z))}},3383:(m,A,v)=>{var S,I,R,O=v(7293),B=v(614),q=v(30),z=v(9518),te=v(1320),de=v(5112),ge=v(1913),Se=de("iterator"),Me=!1;[].keys&&("next"in(R=[].keys())?(I=z(z(R)))!==Object.prototype&&(S=I):Me=!0),null==S||O(function(){var dt={};return S[Se].call(dt)!==dt})?S={}:ge&&(S=q(S)),B(S[Se])||te(S,Se,function(){return this}),m.exports={IteratorPrototype:S,BUGGY_SAFARI_ITERATORS:Me}},7497:m=>{m.exports={}},6244:(m,A,v)=>{var S=v(7466);m.exports=function(I){return S(I.length)}},133:(m,A,v)=>{var S=v(7392),I=v(7293);m.exports=!!Object.getOwnPropertySymbols&&!I(function(){var R=Symbol();return!String(R)||!(Object(R)instanceof Symbol)||!Symbol.sham&&S&&S<41})},8536:(m,A,v)=>{var S=v(7854),I=v(614),R=v(2788),O=S.WeakMap;m.exports=I(O)&&/native code/.test(R(O))},6277:(m,A,v)=>{var S=v(1340);m.exports=function(I,R){return void 0===I?arguments.length<2?"":R:S(I)}},30:(m,A,v)=>{var S,I=v(9670),R=v(6048),O=v(748),B=v(3501),q=v(490),z=v(317),te=v(6200)("IE_PROTO"),de=function(){},ge=function(dt){return"<script>"+dt+"<\/script>"},Se=function(dt){dt.write(ge("")),dt.close();var kt=dt.parentWindow.Object;return dt=null,kt},Me=function(){try{S=new ActiveXObject("htmlfile")}catch{}var dt,kt;Me=typeof document<"u"?document.domain&&S?Se(S):((kt=z("iframe")).style.display="none",q.appendChild(kt),kt.src=String("javascript:"),(dt=kt.contentWindow.document).open(),dt.write(ge("document.F=Object")),dt.close(),dt.F):Se(S);for(var Mt=O.length;Mt--;)delete Me.prototype[O[Mt]];return Me()};B[te]=!0,m.exports=Object.create||function(dt,kt){var Mt;return null!==dt?(de.prototype=I(dt),Mt=new de,de.prototype=null,Mt[te]=dt):Mt=Me(),void 0===kt?Mt:R.f(Mt,kt)}},6048:(m,A,v)=>{var S=v(9781),I=v(3353),R=v(3070),O=v(9670),B=v(5656),q=v(1956);A.f=S&&!I?Object.defineProperties:function(z,te){O(z);for(var de,ge=B(te),Se=q(te),Me=Se.length,dt=0;Me>dt;)R.f(z,de=Se[dt++],ge[de]);return z}},3070:(m,A,v)=>{var S=v(7854),I=v(9781),R=v(4664),O=v(3353),B=v(9670),q=v(4948),z=S.TypeError,te=Object.defineProperty,de=Object.getOwnPropertyDescriptor;A.f=I?O?function(ge,Se,Me){if(B(ge),Se=q(Se),B(Me),"function"==typeof ge&&"prototype"===Se&&"value"in Me&&"writable"in Me&&!Me.writable){var dt=de(ge,Se);dt&&dt.writable&&(ge[Se]=Me.value,Me={configurable:"configurable"in Me?Me.configurable:dt.configurable,enumerable:"enumerable"in Me?Me.enumerable:dt.enumerable,writable:!1})}return te(ge,Se,Me)}:te:function(ge,Se,Me){if(B(ge),Se=q(Se),B(Me),R)try{return te(ge,Se,Me)}catch{}if("get"in Me||"set"in Me)throw z("Accessors not supported");return"value"in Me&&(ge[Se]=Me.value),ge}},1236:(m,A,v)=>{var S=v(9781),I=v(6916),R=v(5296),O=v(9114),B=v(5656),q=v(4948),z=v(2597),te=v(4664),de=Object.getOwnPropertyDescriptor;A.f=S?de:function(ge,Se){if(ge=B(ge),Se=q(Se),te)try{return de(ge,Se)}catch{}if(z(ge,Se))return O(!I(R.f,ge,Se),ge[Se])}},8006:(m,A,v)=>{var S=v(6324),I=v(748).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(R){return S(R,I)}},5181:(m,A)=>{A.f=Object.getOwnPropertySymbols},9518:(m,A,v)=>{var S=v(7854),I=v(2597),R=v(614),O=v(7908),B=v(6200),q=v(8544),z=B("IE_PROTO"),te=S.Object,de=te.prototype;m.exports=q?te.getPrototypeOf:function(ge){var Se=O(ge);if(I(Se,z))return Se[z];var Me=Se.constructor;return R(Me)&&Se instanceof Me?Me.prototype:Se instanceof te?de:null}},7976:(m,A,v)=>{var S=v(1702);m.exports=S({}.isPrototypeOf)},6324:(m,A,v)=>{var S=v(1702),I=v(2597),R=v(5656),O=v(1318).indexOf,B=v(3501),q=S([].push);m.exports=function(z,te){var de,ge=R(z),Se=0,Me=[];for(de in ge)!I(B,de)&&I(ge,de)&&q(Me,de);for(;te.length>Se;)I(ge,de=te[Se++])&&(~O(Me,de)||q(Me,de));return Me}},1956:(m,A,v)=>{var S=v(6324),I=v(748);m.exports=Object.keys||function(R){return S(R,I)}},5296:(m,A)=>{var v={}.propertyIsEnumerable,S=Object.getOwnPropertyDescriptor,I=S&&!v.call({1:2},1);A.f=I?function(R){var O=S(this,R);return!!O&&O.enumerable}:v},7674:(m,A,v)=>{var S=v(1702),I=v(9670),R=v(6077);m.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var O,B=!1,q={};try{(O=S(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(q,[]),B=q instanceof Array}catch{}return function(z,te){return I(z),R(te),B?O(z,te):z.__proto__=te,z}}():void 0)},2140:(m,A,v)=>{var S=v(7854),I=v(6916),R=v(614),O=v(111),B=S.TypeError;m.exports=function(q,z){var te,de;if("string"===z&&R(te=q.toString)&&!O(de=I(te,q))||R(te=q.valueOf)&&!O(de=I(te,q))||"string"!==z&&R(te=q.toString)&&!O(de=I(te,q)))return de;throw B("Can't convert object to primitive value")}},3887:(m,A,v)=>{var S=v(5005),I=v(1702),R=v(8006),O=v(5181),B=v(9670),q=I([].concat);m.exports=S("Reflect","ownKeys")||function(z){var te=R.f(B(z)),de=O.f;return de?q(te,de(z)):te}},1320:(m,A,v)=>{var S=v(7854),I=v(614),R=v(2597),O=v(8880),B=v(3505),q=v(2788),z=v(9909),te=v(6530).CONFIGURABLE,de=z.get,ge=z.enforce,Se=String(String).split("String");(m.exports=function(Me,dt,kt,Mt){var Lt,Vn=!!Mt&&!!Mt.unsafe,wn=!!Mt&&!!Mt.enumerable,yn=!!Mt&&!!Mt.noTargetGet,Ct=Mt&&void 0!==Mt.name?Mt.name:dt;I(kt)&&("Symbol("===String(Ct).slice(0,7)&&(Ct="["+String(Ct).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!R(kt,"name")||te&&kt.name!==Ct)&&O(kt,"name",Ct),(Lt=ge(kt)).source||(Lt.source=Se.join("string"==typeof Ct?Ct:""))),Me!==S?(Vn?!yn&&Me[dt]&&(wn=!0):delete Me[dt],wn?Me[dt]=kt:O(Me,dt,kt)):wn?Me[dt]=kt:B(dt,kt)})(Function.prototype,"toString",function(){return I(this)&&de(this).source||q(this)})},2261:(m,A,v)=>{var S,I,R=v(6916),O=v(1702),B=v(1340),q=v(7066),z=v(2999),te=v(2309),de=v(30),ge=v(9909).get,Se=v(9441),Me=v(7168),dt=te("native-string-replace",String.prototype.replace),kt=RegExp.prototype.exec,Mt=kt,Lt=O("".charAt),Vn=O("".indexOf),wn=O("".replace),yn=O("".slice),Ct=(I=/b*/g,R(kt,S=/a/,"a"),R(kt,I,"a"),0!==S.lastIndex||0!==I.lastIndex),We=z.BROKEN_CARET,lt=void 0!==/()??/.exec("")[1];(Ct||lt||We||Se||Me)&&(Mt=function(At){var n,t,e,s,d,f,b,E=this,T=ge(E),k=B(At),Q=T.raw;if(Q)return Q.lastIndex=E.lastIndex,n=R(Mt,Q,k),E.lastIndex=Q.lastIndex,n;var ie=T.groups,Ie=We&&E.sticky,xe=R(q,E),qe=E.source,ft=0,Qt=k;if(Ie&&(xe=wn(xe,"y",""),-1===Vn(xe,"g")&&(xe+="g"),Qt=yn(k,E.lastIndex),E.lastIndex>0&&(!E.multiline||E.multiline&&"\n"!==Lt(k,E.lastIndex-1))&&(qe="(?: "+qe+")",Qt=" "+Qt,ft++),t=new RegExp("^(?:"+qe+")",xe)),lt&&(t=new RegExp("^"+qe+"$(?!\\s)",xe)),Ct&&(e=E.lastIndex),s=R(kt,Ie?t:E,Qt),Ie?s?(s.input=yn(s.input,ft),s[0]=yn(s[0],ft),s.index=E.lastIndex,E.lastIndex+=s[0].length):E.lastIndex=0:Ct&&s&&(E.lastIndex=E.global?s.index+s[0].length:e),lt&&s&&s.length>1&&R(dt,s[0],t,function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(s[d]=void 0)}),s&&ie)for(s.groups=f=de(null),d=0;d<ie.length;d++)f[(b=ie[d])[0]]=s[b[1]];return s}),m.exports=Mt},7066:(m,A,v)=>{var S=v(9670);m.exports=function(){var I=S(this),R="";return I.global&&(R+="g"),I.ignoreCase&&(R+="i"),I.multiline&&(R+="m"),I.dotAll&&(R+="s"),I.unicode&&(R+="u"),I.sticky&&(R+="y"),R}},2999:(m,A,v)=>{var S=v(7293),I=v(7854).RegExp,R=S(function(){var q=I("a","y");return q.lastIndex=2,null!=q.exec("abcd")}),O=R||S(function(){return!I("a","y").sticky}),B=R||S(function(){var q=I("^r","gy");return q.lastIndex=2,null!=q.exec("str")});m.exports={BROKEN_CARET:B,MISSED_STICKY:O,UNSUPPORTED_Y:R}},9441:(m,A,v)=>{var S=v(7293),I=v(7854).RegExp;m.exports=S(function(){var R=I(".","s");return!(R.dotAll&&R.exec("\n")&&"s"===R.flags)})},7168:(m,A,v)=>{var S=v(7293),I=v(7854).RegExp;m.exports=S(function(){var R=I("(?<a>b)","g");return"b"!==R.exec("b").groups.a||"bc"!=="b".replace(R,"$<a>c")})},4488:(m,A,v)=>{var S=v(7854).TypeError;m.exports=function(I){if(null==I)throw S("Can't call method on "+I);return I}},3505:(m,A,v)=>{var S=v(7854),I=Object.defineProperty;m.exports=function(R,O){try{I(S,R,{value:O,configurable:!0,writable:!0})}catch{S[R]=O}return O}},8003:(m,A,v)=>{var S=v(3070).f,I=v(2597),R=v(5112)("toStringTag");m.exports=function(O,B,q){O&&!q&&(O=O.prototype),O&&!I(O,R)&&S(O,R,{configurable:!0,value:B})}},6200:(m,A,v)=>{var S=v(2309),I=v(9711),R=S("keys");m.exports=function(O){return R[O]||(R[O]=I(O))}},5465:(m,A,v)=>{var S=v(7854),I=v(3505),R="__core-js_shared__",O=S[R]||I(R,{});m.exports=O},2309:(m,A,v)=>{var S=v(1913),I=v(5465);(m.exports=function(R,O){return I[R]||(I[R]=void 0!==O?O:{})})("versions",[]).push({version:"3.20.3",mode:S?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:(m,A,v)=>{var S=v(9303),I=Math.max,R=Math.min;m.exports=function(O,B){var q=S(O);return q<0?I(q+B,0):R(q,B)}},5656:(m,A,v)=>{var S=v(8361),I=v(4488);m.exports=function(R){return S(I(R))}},9303:m=>{var A=Math.ceil,v=Math.floor;m.exports=function(S){var I=+S;return I!=I||0===I?0:(I>0?v:A)(I)}},7466:(m,A,v)=>{var S=v(9303),I=Math.min;m.exports=function(R){return R>0?I(S(R),9007199254740991):0}},7908:(m,A,v)=>{var S=v(7854),I=v(4488),R=S.Object;m.exports=function(O){return R(I(O))}},7593:(m,A,v)=>{var S=v(7854),I=v(6916),R=v(111),O=v(2190),B=v(8173),q=v(2140),z=v(5112),te=S.TypeError,de=z("toPrimitive");m.exports=function(ge,Se){if(!R(ge)||O(ge))return ge;var Me,dt=B(ge,de);if(dt){if(void 0===Se&&(Se="default"),Me=I(dt,ge,Se),!R(Me)||O(Me))return Me;throw te("Can't convert object to primitive value")}return void 0===Se&&(Se="number"),q(ge,Se)}},4948:(m,A,v)=>{var S=v(7593),I=v(2190);m.exports=function(R){var O=S(R,"string");return I(O)?O:O+""}},1694:(m,A,v)=>{var S={};S[v(5112)("toStringTag")]="z",m.exports="[object z]"===String(S)},1340:(m,A,v)=>{var S=v(7854),I=v(648),R=S.String;m.exports=function(O){if("Symbol"===I(O))throw TypeError("Cannot convert a Symbol value to a string");return R(O)}},6330:(m,A,v)=>{var S=v(7854).String;m.exports=function(I){try{return S(I)}catch{return"Object"}}},9711:(m,A,v)=>{var S=v(1702),I=0,R=Math.random(),O=S(1..toString);m.exports=function(B){return"Symbol("+(void 0===B?"":B)+")_"+O(++I+R,36)}},3307:(m,A,v)=>{var S=v(133);m.exports=S&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(m,A,v)=>{var S=v(9781),I=v(7293);m.exports=S&&I(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},5112:(m,A,v)=>{var S=v(7854),I=v(2309),R=v(2597),O=v(9711),B=v(133),q=v(3307),z=I("wks"),te=S.Symbol,de=te&&te.for,ge=q?te:te&&te.withoutSetter||O;m.exports=function(Se){if(!R(z,Se)||!B&&"string"!=typeof z[Se]){var Me="Symbol."+Se;z[Se]=B&&R(te,Se)?te[Se]:q&&de?de(Me):ge(Me)}return z[Se]}},9191:(m,A,v)=>{var S=v(5005),I=v(2597),R=v(8880),O=v(7976),B=v(7674),q=v(9920),z=v(9587),te=v(6277),de=v(8340),ge=v(7741),Se=v(2914),Me=v(1913);m.exports=function(dt,kt,Mt,Lt){var Vn=Lt?2:1,wn=dt.split("."),yn=wn[wn.length-1],Ct=S.apply(null,wn);if(Ct){var We=Ct.prototype;if(!Me&&I(We,"cause")&&delete We.cause,!Mt)return Ct;var lt=S("Error"),At=kt(function(n,t){var e=te(Lt?t:n,void 0),s=Lt?new Ct(n):new Ct;return void 0!==e&&R(s,"message",e),Se&&R(s,"stack",ge(s.stack,2)),this&&O(We,this)&&z(s,this,At),arguments.length>Vn&&de(s,arguments[Vn]),s});if(At.prototype=We,"Error"!==yn&&(B?B(At,lt):q(At,lt,{name:!0})),q(At,Ct),!Me)try{We.name!==yn&&R(We,"name",yn),We.constructor=At}catch{}return At}}},6992:(m,A,v)=>{var S=v(5656),I=v(1223),R=v(7497),O=v(9909),B=v(3070).f,q=v(654),z=v(1913),te=v(9781),de="Array Iterator",ge=O.set,Se=O.getterFor(de);m.exports=q(Array,"Array",function(dt,kt){ge(this,{type:de,target:S(dt),index:0,kind:kt})},function(){var dt=Se(this),kt=dt.target,Mt=dt.kind,Lt=dt.index++;return!kt||Lt>=kt.length?(dt.target=void 0,{value:void 0,done:!0}):"keys"==Mt?{value:Lt,done:!1}:"values"==Mt?{value:kt[Lt],done:!1}:{value:[Lt,kt[Lt]],done:!1}},"values");var Me=R.Arguments=R.Array;if(I("keys"),I("values"),I("entries"),!z&&te&&"values"!==Me.name)try{B(Me,"name",{value:"values"})}catch{}},1703:(m,A,v)=>{var S=v(2109),I=v(7854),R=v(2104),O=v(9191),B=I.WebAssembly,q=7!==Error("e",{cause:7}).cause,z=function(de,ge){var Se={};Se[de]=O(de,ge,q),S({global:!0,forced:q},Se)},te=function(de,ge){if(B&&B[de]){var Se={};Se[de]=O("WebAssembly."+de,ge,q),S({target:"WebAssembly",stat:!0,forced:q},Se)}};z("Error",function(de){return function(ge){return R(de,this,arguments)}}),z("EvalError",function(de){return function(ge){return R(de,this,arguments)}}),z("RangeError",function(de){return function(ge){return R(de,this,arguments)}}),z("ReferenceError",function(de){return function(ge){return R(de,this,arguments)}}),z("SyntaxError",function(de){return function(ge){return R(de,this,arguments)}}),z("TypeError",function(de){return function(ge){return R(de,this,arguments)}}),z("URIError",function(de){return function(ge){return R(de,this,arguments)}}),te("CompileError",function(de){return function(ge){return R(de,this,arguments)}}),te("LinkError",function(de){return function(ge){return R(de,this,arguments)}}),te("RuntimeError",function(de){return function(ge){return R(de,this,arguments)}})},4916:(m,A,v)=>{var S=v(2109),I=v(2261);S({target:"RegExp",proto:!0,forced:/./.exec!==I},{exec:I})},3948:(m,A,v)=>{var S=v(7854),I=v(8324),R=v(8509),O=v(6992),B=v(8880),q=v(5112),z=q("iterator"),te=q("toStringTag"),de=O.values,ge=function(Me,dt){if(Me){if(Me[z]!==de)try{B(Me,z,de)}catch{Me[z]=de}if(Me[te]||B(Me,te,dt),I[dt])for(var kt in O)if(Me[kt]!==O[kt])try{B(Me,kt,O[kt])}catch{Me[kt]=O[kt]}}};for(var Se in I)ge(S[Se]&&S[Se].prototype,Se);ge(R,"DOMTokenList")}},c={};function p(m){var A=c[m];if(void 0!==A)return A.exports;var v=c[m]={exports:{}};return a[m](v,v.exports,p),v.exports}p.n=m=>{var A=m&&m.__esModule?()=>m.default:()=>m;return p.d(A,{a:A}),A},p.d=(m,A)=>{for(var v in A)p.o(A,v)&&!p.o(m,v)&&Object.defineProperty(m,v,{enumerable:!0,get:A[v]})},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),p.o=(m,A)=>Object.prototype.hasOwnProperty.call(m,A),p.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var _={};return(()=>{p.r(_),p.d(_,{AudioExtension:()=>Vn,AudioProcessor:()=>Mt,Extension:()=>Lt,Ticker:()=>yn,VideoProcessor:()=>kt,logger:()=>z,reporter:()=>ge});var m=p(4341);function A(Ct,We,lt){return We in Ct?m(Ct,We,{value:lt,enumerable:!0,configurable:!0,writable:!0}):Ct[We]=lt,Ct}p(1703),p(6992),p(3948);var v=p(3476),S=p.n(v);function I(){let Ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,We=arguments.length>1?arguments[1]:void 0;const lt=Math.random().toString(16).substr(2,Ct).toLowerCase();return lt.length===Ct?"".concat(We).concat(lt):"".concat(We).concat(lt)+I(Ct-lt.length,"")}p(4916);const R=Date.now(),O={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};function B(){const Ct=new Date;return Ct.toTimeString().split(" ")[0]+":"+Ct.getMilliseconds()}const q=Ct=>{for(const We in O)if(Object.prototype.hasOwnProperty.call(O,We)&&O[We]===Ct)return We;return"DEFAULT"},z=new class{constructor(){A(this,"logLevel",O.DEBUG),A(this,"hookLog",void 0)}debug(){for(var Ct=arguments.length,We=new Array(Ct),lt=0;lt<Ct;lt++)We[lt]=arguments[lt];const At=[O.DEBUG].concat(We);this.log.apply(this,At)}info(){for(var Ct=arguments.length,We=new Array(Ct),lt=0;lt<Ct;lt++)We[lt]=arguments[lt];const At=[O.INFO].concat(We);this.log.apply(this,At)}warning(){for(var Ct=arguments.length,We=new Array(Ct),lt=0;lt<Ct;lt++)We[lt]=arguments[lt];const At=[O.WARNING].concat(We);this.log.apply(this,At)}error(){for(var Ct=arguments.length,We=new Array(Ct),lt=0;lt<Ct;lt++)We[lt]=arguments[lt];const At=[O.ERROR].concat(We);this.log.apply(this,At)}log(){for(var Ct,We=arguments.length,lt=new Array(We),At=0;At<We;At++)lt[At]=arguments[At];if(Date.now()-R<100)return void setTimeout(()=>{this.log(...lt)},Date.now()-R);const n=Math.max(0,Math.min(4,lt[0]));if(lt[0]=B()+" Agora-Extension [".concat(q(n),"]:"),n<this.logLevel)return;const t=B()+" %cAgora-Extension [".concat(q(n),"]:");let e=[];switch(n){case O.DEBUG:e=[t,"color: #64B5F6;"].concat(lt.slice(1)),console.log.apply(console,e);break;case O.INFO:e=[t,"color: #1E88E5; font-weight: bold;"].concat(lt.slice(1)),console.log.apply(console,e);break;case O.WARNING:e=[t,"color: #FB8C00; font-weight: bold;"].concat(lt.slice(1)),console.warn.apply(console,e);break;case O.ERROR:e=[t,"color: #B00020; font-weight: bold;"].concat(lt.slice(1)),console.error.apply(console,e)}null===(Ct=this.hookLog)||void 0===Ct||Ct.call(this,n,e)}};function te(Ct,We){var lt=Object.keys(Ct);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(Ct);We&&(At=At.filter(function(n){return Object.getOwnPropertyDescriptor(Ct,n).enumerable})),lt.push.apply(lt,At)}return lt}function de(Ct){for(var We=1;We<arguments.length;We++){var lt=null!=arguments[We]?arguments[We]:{};We%2?te(Object(lt),!0).forEach(function(At){A(Ct,At,lt[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ct,Object.getOwnPropertyDescriptors(lt)):te(Object(lt)).forEach(function(At){Object.defineProperty(Ct,At,Object.getOwnPropertyDescriptor(lt,At))})}return Ct}const ge=new class{constructor(){A(this,"apiInvokeMsgQueue",[]),A(this,"hookApiInvoke",void 0)}reportApiInvoke(Ct){Ct.timeout=Ct.timeout||6e4,Ct.reportResult=void 0===Ct.reportResult||Ct.reportResult;const We=Date.now(),lt=()=>({name:Ct.name,apiInvokeTime:We,options:Ct.options});let At=!1;var n;(n=Ct.timeout,new(S())(e=>{window.setTimeout(e,n)})).then(()=>{At||(this.sendApiInvoke(de(de({},lt()),{},{error:"API_INVOKE_TIMEOUT",success:!1})),z.debug("".concat(Ct.name," timeout")))});const t=new Error("".concat(Ct.name,": this api invoke is end"));return{onSuccess:e=>{if(At)throw t;At=!0,this.sendApiInvoke(de(de({},lt()),{},{success:!0},Ct.reportResult&&{result:e}))},onError:e=>{if(At)throw e;At=!0,this.sendApiInvoke(de(de({},lt()),{},{success:!1,error:e.toString()}))}}}sendApiInvoke(Ct){this.hookApiInvoke?(this.hookApiInvoke([...this.apiInvokeMsgQueue,Ct]),this.apiInvokeMsgQueue=[]):this.apiInvokeMsgQueue.push(Ct)}};function Se(Ct,We){var lt=Object.keys(Ct);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(Ct);We&&(At=At.filter(function(n){return Object.getOwnPropertyDescriptor(Ct,n).enumerable})),lt.push.apply(lt,At)}return lt}function Me(Ct){for(var We=1;We<arguments.length;We++){var lt=null!=arguments[We]?arguments[We]:{};We%2?Se(Object(lt),!0).forEach(function(At){A(Ct,At,lt[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ct,Object.getOwnPropertyDescriptors(lt)):Se(Object(lt)).forEach(function(At){Object.defineProperty(Ct,At,Object.getOwnPropertyDescriptor(lt,At))})}return Ct}class dt extends class{constructor(){A(this,"_events",{}),A(this,"addListener",this.on)}getListeners(We){return this._events[We]?this._events[We].map(lt=>lt.listener):[]}on(We,lt){this._events[We]||(this._events[We]=[]);const At=this._events[We];-1===this._indexOfListener(At,lt)&&At.push({listener:lt,once:!1})}once(We,lt){this._events[We]||(this._events[We]=[]);const At=this._events[We];-1===this._indexOfListener(At,lt)&&At.push({listener:lt,once:!0})}off(We,lt){if(!this._events[We])return;const At=this._events[We],n=this._indexOfListener(At,lt);-1!==n&&At.splice(n,1),0===this._events[We].length&&delete this._events[We]}removeAllListeners(We){We?delete this._events[We]:this._events={}}emit(We){this._events[We]||(this._events[We]=[]);const lt=this._events[We].map(e=>e);for(var At=arguments.length,n=new Array(At>1?At-1:0),t=1;t<At;t++)n[t-1]=arguments[t];for(let e=0;e<lt.length;e+=1){const s=lt[e];s.once&&this.off(We,s.listener),s.listener.apply(this,n||[])}}_indexOfListener(We,lt){let At=We.length;for(;At--;)if(We[At].listener===lt)return At;return-1}emitAsPromise(We){for(var lt=arguments.length,At=new Array(lt>1?lt-1:0),n=1;n<lt;n++)At[n-1]=arguments[n];return 0===this.getListeners(We).length?S().reject(new Error("No promise event handler.")):new(S())((t,e)=>{this.emit(We,...At,t,e)})}emitAsPromiseNoResponse(We){for(var lt=arguments.length,At=new Array(lt>1?lt-1:0),n=1;n<lt;n++)At[n-1]=arguments[n];return 0===this.getListeners(We).length?S().resolve():new(S())((t,e)=>{this.emit(We,...At,t,e)})}}{get enabled(){return this._enabled}output(We,lt){if(this.outputTrack===We)return;const At=ge.reportApiInvoke({name:"".concat(this.name,".output"),options:{track:We?.toString()}});this.outputTrack=We,this.destination&&this.destination.updateInput({track:We,context:lt}),At.onSuccess()}constructor(){super(),A(this,"inputTrack",void 0),A(this,"outputTrack",void 0),A(this,"_enabled",!0),A(this,"_source",void 0),A(this,"ID",I(6,"")),A(this,"destination",void 0),A(this,"context",void 0),A(this,"name",void 0)}enable(){if(this._enabled)return;const We=ge.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!0});z.info("".concat(this.name,"-").concat(this.ID," enabled")),this._enabled=!0;try{var lt;const At=null===(lt=this.onEnableChange)||void 0===lt?void 0:lt.call(this,this._enabled);if(At instanceof S())return At.then(()=>{We.onSuccess()}).catch(n=>{throw We.onError(n),n});We.onSuccess()}catch(At){throw We.onError(At),At}}disable(){if(!this._enabled)return;const We=ge.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!1});z.info("".concat(this.name,"-").concat(this.ID," disabled")),this._enabled=!1;try{var lt;const At=null===(lt=this.onEnableChange)||void 0===lt?void 0:lt.call(this,this._enabled);if(At instanceof S())return At.then(()=>{We.onSuccess()}).catch(n=>{throw We.onError(n),n});We.onSuccess()}catch(At){throw We.onError(At),At}}}class kt extends dt{get kind(){return"video"}pipe(We){const lt=ge.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:We.name}});if(this.destination===We)return lt.onSuccess(),We;if(We._source){const At=new Error("Processor ".concat(We.name," already piped, please call unpipe beforehand."));throw lt.onError(At),At}return this.destination&&this.unpipe(),this.destination=We,We._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,context:this.context}),lt.onSuccess(),We}unpipe(){if(!this.destination)return;const We=ge.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});z.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));try{const lt=this.destination;this.destination._source=void 0,this.destination=void 0,lt.reset()}finally{We.onSuccess()}}updateInput(We){var lt,At;We.context!==this.context&&(this.context=We.context,null===(lt=this.onPiped)||void 0===lt||lt.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,context:We.context})),We.track&&this.inputTrack!==We.track&&(this.inputTrack=We.track,null===(At=this.onTrack)||void 0===At||At.call(this,We.track,this.context))}reset(){var We;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.context=void 0,null===(We=this.onUnpiped)||void 0===We||We.call(this),this.destination&&this.destination.reset()}}class Mt extends dt{constructor(){super(...arguments),A(this,"inputNode",void 0),A(this,"outputNode",void 0),A(this,"destination",void 0),A(this,"context",void 0)}get kind(){return"audio"}pipe(We){const lt=ge.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:We.name}});if(this.destination===We)return lt.onSuccess(),We;if(We._source){const At=new Error("Processor ".concat(We.name," already piped, please call unpipe beforehand."));throw lt.onError(At),At}return this.destination&&this.unpipe(),this.destination=We,We._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:this.context}),lt.onSuccess(),We}unpipe(){if(!this.destination)return;z.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));const We=ge.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});try{var lt;let At=this.destination;null===(lt=this.outputNode)||void 0===lt||lt.disconnect(),this.destination._source=void 0,this.destination=void 0,At.reset()}finally{We.onSuccess()}}output(We,lt){if(We instanceof MediaStreamTrack)super.output(We,lt);else if(We instanceof AudioNode){if(this.outputNode===We)return;const At=ge.reportApiInvoke({name:"".concat(this.name,".output"),options:Me(Me({},We instanceof MediaStreamTrack&&{track:We.toString()}),We instanceof AudioNode&&{audioNode:We.toString()})});this.outputNode=We,this.destination&&this.destination.updateInput({node:We,context:lt}),At.onSuccess()}}updateInput(We){var lt,At,n;We.context!==this.context&&(this.context=We.context,null===(lt=this.onPiped)||void 0===lt||lt.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:We.context})),We.track&&this.inputTrack!==We.track&&(this.inputTrack=We.track,null===(At=this.onTrack)||void 0===At||At.call(this,We.track,this.context)),We.node&&this.inputNode!==We.node&&(this.inputNode=We.node,null===(n=this.onNode)||void 0===n||n.call(this,We.node,this.context))}reset(){var We;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.inputNode=void 0,this.context=void 0,null===(We=this.onUnpiped)||void 0===We||We.call(this),this.destination&&this.destination.reset()}}class Lt{constructor(){A(this,"__registered__",!1),A(this,"logger",z),A(this,"reporter",ge),A(this,"parameters",{})}createProcessor(){if(!this.__registered__)throw new Error("Extension not registered yet!");return this._createProcessor()}}class Vn extends Lt{}let wn;class yn{get running(){return this._running}constructor(We,lt){if(A(this,"type",void 0),A(this,"interval",void 0),A(this,"fn",void 0),A(this,"_running",!1),A(this,"_osc",void 0),!We)throw new Error;if(lt<=0)throw new Error;this.type=We,this.interval=lt}add(We){this.fn=We}remove(){this.fn=void 0}start(){if(!this._running)switch(this._running=!0,this.type){case"Timer":{const We=()=>{setTimeout(()=>{this.fn&&this.fn(),this._running&&We()},this.interval)};We();break}case"RAF":{const We=lt=>{requestAnimationFrame(At=>{At-lt<this.interval?this._running&&We(lt):(this.fn&&this.fn(),this._running&&We(At))})};We(performance.now());break}case"Oscillator":{wn||(wn=new AudioContext);const We=wn.createGain();let lt;We.gain.value=0,We.connect(wn.destination);const At=()=>{this.fn&&this.fn(),lt&&lt.disconnect(),lt=wn.createOscillator(),this._osc=lt,lt.connect(We),this._running&&(lt.onended=At,lt.start(0),lt.stop(wn.currentTime+this.interval/1e3))};At();break}}}stop(){this._running=!1,this._osc&&(this._osc.onended=null,this._osc=void 0)}}})(),_})()})(VV),!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(W8=HTMLCanvasElement.prototype.getContext,function(){let r=arguments;return"webgl"===r[0]&&(r=[].slice.call(arguments),r[0]="experimental-webgl"),W8.apply(null,r)}));const Rz=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function EP(r){const o=new Uint8Array([99,114,121,112,116,105,105]),a=o.length,c=r,p=c.length,_=new Uint8Array(p),m=new Uint8Array(256);for(let R=0;R<256;R++)m[R]=R;let A=0;for(let R=0;R<256;R++)A=(A+m[R]+o[R%a])%256,[m[R],m[A]]=[m[A],m[R]];let v,S=0;A=0;for(let R=0;R<0+p;R++)S=(S+1)%256,A=(A+m[S])%256,[m[S],m[A]]=[m[A],m[S]],v=m[(m[S]+m[A])%256],R>=0&&(_[R-0]=c[R-0]^v);const I=String.fromCharCode.apply(null,Array.from(_));return Function("var winSize = 5; return `"+I+"`")()}const K8=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class z8{constructor(o,a){J(this,"program",void 0),J(this,"gl",void 0),J(this,"kernel",void 0),this.gl=o,this.kernel=a||K8,this.program=function(c,p){const _=EP(p),m=function YL(r,o,a,c){const p=[];for(let _=0;_<o.length;++_)p.push(s0(r,o[_],0===_?r.VERTEX_SHADER:r.FRAGMENT_SHADER));return function(_,m,A,v){const S=_.createProgram();if(!S)throw new Le(Te.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(m.forEach(I=>{_.attachShader(S,I)}),A&&A.forEach((I,R)=>{_.bindAttribLocation(S,v?v[R]:R,I)}),_.linkProgram(S),!_.getProgramParameter(S,_.LINK_STATUS)){const I=_.getProgramInfoLog(S);throw _.deleteProgram(S),new Le(Te.WEBGL_INTERNAL_ERROR,"error in program linking:"+I)}return S}(r,p,a,c)}(c,[EP(Rz),_]);{const A=c.getAttribLocation(m,"a_position"),v=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,v),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(A),c.vertexAttribPointer(A,2,c.FLOAT,!1,0,0)}{const A=c.getAttribLocation(m,"a_texCoord"),v=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,v),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(A),c.vertexAttribPointer(A,2,c.FLOAT,!1,0,0)}return m}(this.gl,this.kernel)}setUniforms(){const o=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(o,1)}}class vv extends z8{constructor(o,a,c,p){super(o,a),J(this,"xOffset",void 0),J(this,"yOffset",void 0),J(this,"denoiseLevel",5),this.xOffset=1/c,this.yOffset=1/p}setUniforms(){const o=this.gl.getUniformLocation(this.program,"u_flipY"),a=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),c=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(a,this.xOffset,this.yOffset),this.gl.uniform1f(c,this.denoiseLevel),this.gl.uniform1f(o,1)}setParameters(o){void 0!==o.denoiseLevel&&(this.denoiseLevel=o.denoiseLevel)}setSize(o,a){this.xOffset=1/o,this.yOffset=1/a}}const tG=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class nG extends vv{constructor(o,a,c){super(o,tG,a,c)}}const rG=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class q8 extends vv{constructor(o,a,c){super(o,rG,a,c)}}const iG=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class oG extends vv{constructor(o,a,c){super(o,iG,a,c)}}const sG=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],aG=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Y8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],cG=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class lG extends vv{constructor(o,a,c,p){super(o,sG,c,p),J(this,"inputTexture",void 0),J(this,"lightLevel",.1),J(this,"rednessLevel",.5),J(this,"mskin_he_max",175/180*3.141593),J(this,"mskin_he_min",115/180*3.141593),J(this,"mskin_hc_max",173/180*3.141593),J(this,"mskin_hc_min",116/180*3.141593),J(this,"mskin_hc_axis",2.04203545),J(this,"mfacts_rotate_c",0),J(this,"mfacts_rotate_le",0),J(this,"mfacts_rotate_ge",0),J(this,"tab_addr",null),J(this,"lutTextures",[]),this.inputTexture=a,this.init()}setUniforms(){const o=this.gl.getUniformLocation(this.program,"u_flipY"),a=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(a,this.denoiseLevel),this.gl.uniform1f(o,1);const c=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(c,this.lightLevel);const p=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(p,this.rednessLevel);const _=this.gl.getUniformLocation(this.program,"skin_he_max"),m=this.gl.getUniformLocation(this.program,"skin_he_min"),A=this.gl.getUniformLocation(this.program,"skin_hc_max"),v=this.gl.getUniformLocation(this.program,"skin_hc_min"),S=this.gl.getUniformLocation(this.program,"skin_hc_axis"),I=this.gl.getUniformLocation(this.program,"facts_rotate_c"),R=this.gl.getUniformLocation(this.program,"facts_rotate_le"),O=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(_,this.mskin_he_max),this.gl.uniform1f(m,this.mskin_he_min),this.gl.uniform1f(A,this.mskin_hc_max),this.gl.uniform1f(v,this.mskin_hc_min),this.gl.uniform1f(S,this.mskin_hc_axis),this.gl.uniform1f(I,this.mfacts_rotate_c),this.gl.uniform1f(R,this.mfacts_rotate_le),this.gl.uniform1f(O,this.mfacts_rotate_ge);const B=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(B,2);const q=["lighten_lut"],z=[this.gl.TEXTURE3];for(let te=0;te<q.length;te++){const de=this.gl.getUniformLocation(this.program,q[te]);this.gl.activeTexture(z[te]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[te]),this.gl.uniform1i(de,te+3)}}setParameters(o){void 0!==o.denoiseLevel&&(this.denoiseLevel=o.denoiseLevel),void 0!==o.lightLevel&&(this.lightLevel=o.lightLevel),void 0!==o.rednessLevel&&(this.rednessLevel=o.rednessLevel,this.updateRedness(this.rednessLevel)),o.lighteningContrastLevel&&this.updateLut(o.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(Y8);const o=[this.tab_addr],a=[256],c=[1];for(let p=0;p<o.length;p++){const _=this.gl.createTexture();if(!_)throw new Le(Te.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,_),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,a[p],c[p],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,o[p]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(_)}}updateRedness(o){let c,p,_=o,m=_;_>1&&(_=1),_<0&&(_=0),m>1&&(m=1),m<0&&(m=0),this.mfacts_rotate_c=.8*_,m<.8&&(m=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*m)/180*3.141593,this.mskin_hc_min=(116-4*m)/180*3.141593,this.mskin_hc_axis=(117-4*m)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<1.5707965&&(this.mskin_hc_min=1.5707965),this.mskin_hc_axis<1.5707965&&(this.mskin_hc_axis=1.5707965),this.mskin_he_min<1.5707965&&(this.mskin_he_min=1.5707965),this.mskin_hc_max>3.141593&&(this.mskin_hc_max=3.141593),this.mskin_hc_axis>3.141593&&(this.mskin_hc_axis=3.141593),this.mskin_he_max>3.141593&&(this.mskin_he_max=3.141593),c=this.mskin_he_max-this.mskin_hc_max,p=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=c>.01?this.mfacts_rotate_c*p/c:this.mfacts_rotate_c,c=this.mskin_hc_min-this.mskin_he_min,p=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=c>.01?this.mfacts_rotate_c*p/c:this.mfacts_rotate_c}updateLut(o){let a=null;if(0===o&&(a=Y8),1===o&&(a=cG),2===o&&(a=aG),!a)throw new Le(Te.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+o);this.tab_addr=new Uint8Array(a);const c=[this.tab_addr],p=[256],_=[1];for(let m=0;m<c.length;m++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[m]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,p[m],_[m],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,c[m])}}class uG{constructor(){J(this,"gl",null),J(this,"canvas",null),J(this,"programs",[]),J(this,"commonProgram",null),J(this,"inputTexture",null),J(this,"outputTextures",[]),J(this,"fbos",[]),J(this,"originalFrameWidth",0),J(this,"originalFrameHeight",0),J(this,"enableBeauty",!1),J(this,"denoiseLevel",5),J(this,"lightLevel",.35),J(this,"rednessLevel",.5),J(this,"lighteningContrastLevel",1)}setEnableBeauty(o){this.enableBeauty=!!o}init(o,a,c){if(!Yc().supportWebGL)throw new Le(Te.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=c.getContext("webgl"),!this.gl)throw new Le(Te.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(o,a),!this.inputTexture)throw new Le(Te.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=c,this.programs.push(new z8(this.gl)),this.programs.push(new nG(this.gl,o,a)),this.programs.push(new q8(this.gl,o,a)),this.programs.push(new oG(this.gl,o,a)),this.programs.push(new lG(this.gl,this.inputTexture,o,a)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(o){if(!this.gl||!this.commonProgram||!this.canvas)return void se.warning("video effect manager is not init!");let a=0;if(this.originalFrameHeight===o.videoWidth&&this.originalFrameWidth===o.videoHeight)a=2;else if(this.originalFrameHeight!==o.videoHeight||this.originalFrameWidth!==o.videoWidth){if(se.debug("beauty effect: resolution changed ".concat(this.originalFrameWidth,"x").concat(this.originalFrameHeight," -> ").concat(o.videoWidth,"x").concat(o.videoHeight)),0===o.videoHeight||0===o.videoWidth)return void se.debug("beauty effect: skip 0 resolution frame");this.canvas.width=o.videoWidth,this.canvas.height=o.videoHeight,o.setAttribute("width",o.videoWidth.toString()),o.setAttribute("height",o.videoHeight.toString()),this.release(),this.init(o.videoWidth,o.videoHeight,this.canvas)}this.gl.viewport(0,0,o.videoWidth,o.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o);const c=this.enableBeauty?this.programs.length-1:0;for(let _=0;_<=c;_++){const m=this.programs[_].program;this.gl.useProgram(m);const A=this.gl.getUniformLocation(m,"u_image");this.programs[_].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[a+_%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[a+_%2]),this.gl.uniform1i(A,0)}this.gl.useProgram(this.commonProgram);const p=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(p,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(o){this.programs.forEach(a=>{a instanceof vv&&a.setParameters({denoiseLevel:o})}),this.denoiseLevel=o}setLightLevel(o){this.programs.forEach(a=>{a instanceof vv&&a.setParameters({lightLevel:o})}),this.lightLevel=o}setRednessLevel(o){this.programs.forEach(a=>{a instanceof vv&&a.setParameters({rednessLevel:o})}),this.rednessLevel=o}setContrastLevel(o){this.programs.forEach(a=>{a instanceof vv&&a.setParameters({lighteningContrastLevel:o})}),this.lighteningContrastLevel=o}setSize(o,a){this.programs.forEach(c=>{c instanceof vv&&c.setSize(o,a)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(o,a){if(!this.gl)throw new Le(Te.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let c=0;c<4;c++){const p=this.gl.createTexture();if(!p)throw new Le(Te.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,p),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),c<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,o,a,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,a,o,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const _=this.gl.createFramebuffer();if(!_)throw new Le(Te.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,_),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,p,0),this.outputTextures.push(p),this.fbos.push(_)}this.gl.viewport(0,0,o,a),this.originalFrameWidth=o,this.originalFrameHeight=a}}class dG{constructor(){J(this,"targetFrameRate",0),J(this,"recordedFrameCount",0),J(this,"recordingTime",2),J(this,"recordID",void 0)}startRecordBeautyEffectOutput(o){var a=arguments,c=this;return F(function*(){let p=a.length>1&&void 0!==a[1]?a[1]:4;if(c.recordID)throw new Le(Te.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const _=_s(6,"");return c.recordID=_,c.targetFrameRate=o,c.recordedFrameCount=0,c.recordingTime=p,yield Ic(1e3*c.recordingTime),c.recordID!==_?(c.recordID=void 0,!0):(c.recordID=void 0,c.recordedFrameCount<c.targetFrameRate*c.recordingTime/2?(se.warning("detect beauty effect overload, current framerate",c.recordedFrameCount/2),!1):(se.debug("beauty effect current framerate",c.recordedFrameCount/2),!0))})()}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class $8 extends VV.exports.VideoProcessor{constructor(){super(),J(this,"name","BeautyProcessor"),J(this,"fps",15),J(this,"canvas",void 0),J(this,"video",void 0),J(this,"manager",void 0),J(this,"overloadDetector",new dG),J(this,"stopChromeBackgroundLoop",null),J(this,"onOverload",void 0),J(this,"stopLoop",void 0),J(this,"lastRenderTime",0),this.fps=30,this.manager=new uG,this._enabled=!1}onEnableChange(o){var a=this;return F(function*(){a.manager.setEnableBeauty(o),a.context&&a.inputTrack&&(o?yield a.startEffect(a.inputTrack,a.context):yield a.stopEffect(a.inputTrack,a.context))})()}setBeautyEffectOptions(o){var a=this;return F(function*(){if(void 0!==(c=o).smoothnessLevel&&l(c.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==c.lighteningLevel&&l(c.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==c.rednessLevel&&l(c.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==c.lighteningContrastLevel&&u(c.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==o.smoothnessLevel){const c=Math.max(.1,10*o.smoothnessLevel);a.manager.setDenoiseLevel(c)}var c;if(void 0!==o.lighteningLevel){const c=Math.max(.1,o.lighteningLevel/2);a.manager.setLightLevel(c)}if(void 0!==o.rednessLevel){const c=Math.max(.01,o.rednessLevel);a.manager.setRednessLevel(c)}void 0!==o.lighteningContrastLevel&&a.manager.setContrastLevel(o.lighteningContrastLevel)})()}onTrack(o,a){var c=this;return F(function*(){var p;c.video&&c.enabled&&(null===(p=c.stopLoop)||void 0===p||p.call(c),yield c.stopEffect(o,a)),yield c.startEffect(o,a)})()}startEffect(o,a){var c=this;return F(function*(){if(!c.enabled)return;const p=xi(),_=yield c.renderWithWebGL(o);c.output(_,a),se.info("start video effect, output:",c.outputTrack),c.overloadDetector.startRecordBeautyEffectOutput(c.fps).then(v=>{v||c.onOverload&&c.onOverload()});let m=!1;c.stopLoop=()=>{m=!0};const A=()=>{c.enabled&&!m&&requestAnimationFrame(A);const v=Date.now(),S=1e3/c.fps,I=c.lastRenderTime?v-c.lastRenderTime:S;I<S||(c.lastRenderTime=v-(I-S),c.video&&c.video.paused&&c.video.play(),c.enabled&&c.video&&(c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()))};requestAnimationFrame(A),p.name===bi.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?c.stopChromeBackgroundLoop=_5(()=>{c.enabled&&c.video&&c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()},c.fps):c.stopChromeBackgroundLoop&&(c.stopChromeBackgroundLoop(),c.stopChromeBackgroundLoop=null)},!1)})()}renderWithWebGL(o){var a=this;return F(function*(){a.canvas&&(a.canvas.remove(),a.canvas=void 0),a.video&&(a.video.remove(),a.video=void 0),a.canvas=document.createElement("canvas"),a.video=document.createElement("video"),a.video.setAttribute("autoplay",""),a.video.setAttribute("muted",""),a.video.muted=!0,a.video.setAttribute("playsinline",""),a.video.setAttribute("style","display:none"),a.video.srcObject=new MediaStream([o]);const c=new qn(v=>{const S=()=>{a.video&&a.video.removeEventListener("playing",S),v(void 0)};a.video&&a.video.addEventListener("playing",S)});a.video.play(),yield c;const p=o.getSettings(),_=p.width||a.video.videoWidth,m=p.height||a.video.videoHeight;if(p.frameRate&&a.fps!==p.frameRate&&(a.fps=p.frameRate,se.debug("beauty video processor: set fps to",a.fps)),se.debug("beauty video processor: width ".concat(_," height ").concat(m)),!_||!m)throw new Le(Te.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");a.canvas.width=_,a.canvas.height=m,a.video.setAttribute("width",_.toString()),a.video.setAttribute("height",m.toString()),a.manager.init(_,m,a.canvas);const A=Yc();return a.canvas.captureStream(A.supportRequestFrame?0:a.fps).getVideoTracks()[0]})()}stopEffect(o,a){var c=this;return F(function*(){se.info("stop video effect"),c.overloadDetector.stopRecordBeautyEffectOutput(),c.manager.release(),c.canvas&&c.canvas.remove(),c.video&&c.video.remove(),c.canvas=void 0,c.video=void 0,c.output(o,a)})()}}function jV(r){const o={};if(r.facingMode&&(o.facingMode=r.facingMode),r.cameraId&&(o.deviceId={exact:r.cameraId}),!r.encoderConfig)return o;const a=Pu(r.encoderConfig);return o.width=a.width,o.height=a.height,!$N()&&a.frameRate&&(o.frameRate=a.frameRate),xi().name===bi.EDGE&&"object"==typeof o.frameRate&&(o.frameRate.max=60),Xo()&&(o.frameRate={ideal:30,max:30}),o}function pG(r){const o={};r.screenSourceType&&(o.mediaSource=r.screenSourceType),r.extensionId&&jw()&&(o.extensionId=r.extensionId),r.electronScreenSourceId&&(o.sourceId=r.electronScreenSourceId);const a=r.encoderConfig?nT(r.encoderConfig):null;return o.mandatory={chromeMediaSource:"desktop",maxWidth:a?a.width:void 0,maxHeight:a?a.height:void 0},a&&a.frameRate&&("number"==typeof a.frameRate?(o.mandatory.maxFrameRate=a.frameRate,o.mandatory.minFrameRate=a.frameRate):(o.mandatory.maxFrameRate=a.frameRate.max||a.frameRate.ideal||a.frameRate.exact||void 0,o.mandatory.minFrameRate=a.frameRate.min||a.frameRate.ideal||a.frameRate.exact||void 0),o.frameRate=a.frameRate),a&&a.width&&(o.width=a.width),a&&a.height&&(o.height=a.height),o}function hG(r){const o={};if($N()||(void 0!==r.AGC&&(o.autoGainControl=r.AGC),void 0!==r.AEC&&(o.echoCancellation=r.AEC),void 0!==r.ANS&&(o.noiseSuppression=r.ANS,jw()&&r.ANS&&(o.googHighpassFilter=r.ANS))),r.encoderConfig){const a=xf(r.encoderConfig);o.channelCount=a.stereo?2:1,o.sampleRate=a.sampleRate,o.sampleSize=a.sampleSize}return r.microphoneId&&(o.deviceId={exact:r.microphoneId}),JN()&&(o.sampleRate=void 0),o}var BT,$L;(function(r){r.COVERED="COVERED",r.POSITION="POSITION",r.SIZE="SIZE",r.STYLE="STYLE"})(BT||(BT={})),function(r){r.UNMOUNTED="UNMOUNTED",r.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}($L||($L={}));var J8,QV,X8,Z8,e6,t6,HV,GV,n6,r6,i6,o6,s6,a6,JL,c6,Ji,fG,mG,gG,l6,_G,vG,Rp,AG=new class{constructor(){J(this,"_clientSize",null),J(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),J(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),J(this,"getStyle",r=>window.getComputedStyle(r,null)),J(this,"checkCssVisibleProperty",r=>{let o=!0;const a=this.getStyle(r),{display:c,visibility:p,opacity:_,filter:m}=a;return("none"===c||["hidden","collapse"].includes(p)||Number(_)<.1)&&(o=!1),!!o&&(m&&m.split(" ").filter(A=>{const v=A.split("(")[0];return["brightness","blur","opacity"].includes(v)}).map(A=>{const[v,S]=A.split(/\(|\)/);return[v,Number(S.match(/^[0-9\.]+/))]}).forEach(A=>{const[v,S]=A;switch(v){case"brightness":(S<.1||S>3)&&(o=!1);break;case"blur":S>3&&(o=!1);break;case"opacity":S<.1&&(o=!1)}}),o)}),J(this,"checkPropertyUpToAllParentNodes",(r,o)=>{let a=!0,c=!0;let _=r;for(;_&&c;)o(_)||(a=!1,c=!1),_=_.parentElement,_||(c=!1);return a}),J(this,"checkActualCssVisibleIncludeInherit",r=>this.checkPropertyUpToAllParentNodes(r,this.checkCssVisibleProperty)),J(this,"getSizeAboutClient",r=>{const{width:o,height:a,left:c,right:p,top:_,bottom:m}=r.getBoundingClientRect(),A=this.getClientWidth(),v=this.getClientHeight();return{width:o,height:a,left:c,right:p,top:_,bottom:m,clientWidth:A,clientHeight:v,clientMin:Math.min(A,v)}}),J(this,"checkActualSize",()=>{const{width:r,height:o,clientMin:a}=this._clientSize;return this.checkSizeIsVisible(r,o,a)}),J(this,"elementFromPoint",(r,o)=>document.elementFromPoint?document.elementFromPoint(r,o):null),J(this,"checkCoverForAPoint",(r,o,a)=>{const c=this.elementFromPoint(r,o);return null!==c&&c!==a}),J(this,"getPointPositionList",()=>{const{width:r,height:o,left:a,top:c}=this._clientSize,p=r/6,_=o/6,m=[],A=10**6;for(let v=0;v<5;v++)for(let S=0;S<5;S++)m.push({x:(a*A+(0===v?.1:4===v?(p*v*A-1e5)/A:p*v)*A)/A,y:(c*A+(0===S?.1:4===S?(_*S*A-1e5)/A:_*S)*A)/A});return[...m]}),J(this,"checkElementCover",r=>this.getPointPositionList().map(o=>this.checkCoverForAPoint(o.x,o.y,r)).filter(o=>!!o).length>6),J(this,"checkSizeIsVisible",(r,o,a)=>(r>50||a/r<=10)&&(o>50||a/o<=10)),J(this,"checkSizeOfPartInClient",()=>{const{left:r,right:o,top:a,bottom:c,clientHeight:p,clientWidth:_,clientMin:m}=this._clientSize;let A,v,S,I;if(r<0)A=0;else{if(!(r<_))return!1;A=r}if(o<0)return!1;if(v=o<_?o:_,a<0)S=0;else{if(!(a<p))return!1;S=a}return!(c<0)&&(I=c<p?c:p,this.checkSizeIsVisible(v-A,I-S,m))}),J(this,"returnHiddenResult",r=>(this._clientSize=null,{visible:!1,reason:r})),J(this,"checkOneElementVisible",r=>{if(r instanceof HTMLElement){if(this.checkElementIsMountedOnDom(r)){if(this.checkActualCssVisibleIncludeInherit(r)){if(this._clientSize=this.getSizeAboutClient(r),this.checkElementCover(r))return this.returnHiddenResult(BT.COVERED);{const o=this.checkActualSize(),a=this.checkSizeOfPartInClient();return o&&!a?this.returnHiddenResult(BT.POSITION):o?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(BT.SIZE)}}return this.returnHiddenResult(BT.STYLE)}return this.returnHiddenResult($L.UNMOUNTED)}return this.returnHiddenResult($L.INVALID_HTML_ELEMENT)}),J(this,"checkElementIsMountedOnDom",r=>this.checkPropertyUpToAllParentNodes(r,o=>"HTML"!==o.nodeName.toUpperCase()?null!==o.parentElement:!!document.documentElement))}};function yG(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function FT(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?yG(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):yG(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let Hs=(J8=xa("LocalVideoTrack","getTrackId"),QV=ms(),X8=Jy("LocalVideoTrack","_enabledMutex"),Z8=ms(),e6=Jy("LocalVideoTrack","_enabledMutex"),t6=ms(),HV=Wk({report:zt}),GV=ms(),n6=ms(),r6=ms(),i6=ms(),o6=ms(),s6=ms(),a6=ms(),JL=ms(),J8((rr((Ji=class Fz extends N3{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==X.PLAYING)}constructor(o,a,c,p,_,m){super(o,_),J(this,"trackMediaType","video"),J(this,"_player",void 0),J(this,"_videoBeautyProcessor",void 0),J(this,"_videoVisibleTimer",null),J(this,"_previousVideoVisibleStatus",void 0),J(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),J(this,"_encoderConfig",void 0),J(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),J(this,"_optimizationMode",void 0),J(this,"_videoHeight",void 0),J(this,"_videoWidth",void 0),J(this,"_forceBitrateLimit",void 0),J(this,"_enabled",!0),J(this,"processorDestination",void 0),J(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=a,this._scalabiltyMode=c,this._optimizationMode=p,this._hints=m||[],-1===this._hints.indexOf(qc.SCREEN_TRACK)&&this.updateBitrateFromProfile(),this.processorContext=new EG(this.getTrackId()),this.processorDestination=new bP(this.processorContext),this.bindProcessorDestinationEvents()}play(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof o?o:"HTMLElement",a]});if("string"==typeof o){const _=document.getElementById(o);_?o=_:(se.warning("[".concat(this.getTrackId(),'] can not find "#').concat(o,'" element, use document.body')),jn("warning",this,'can not find "#'.concat(o,'" element, use document.body')),o=document.body)}se.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(a)),$t("debug",this,"play",a);const p=FT(FT(FT({},this._getDefaultPlayerConfig()),a),{},{trackId:this.getTrackId(),element:o});this._player?this._player.updateConfig(p):(this._player=new G8(p),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const _=this.getVideoElementVisibleStatus();this.emit(Ep.VIDEO_ELEMENT_VISIBLE_STATUS,_)}catch{}},xt("CHECK_VIDEO_VISIBLE_INTERVAL")),c.onSuccess()}stop(){const o=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return o.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,se.debug("[".concat(this.getTrackId(),"] stop video playback")),$t("debug",this,"stop"),o.onSuccess()}setEnabled(o,a){var c=this;return F(function*(){if(!a){if(o===c._enabled)return;c.stateCheck("enabled",o)}if(se.info("[".concat(c.getTrackId(),"] start setEnabled"),o),$t("info",c,"setEnabled",o),!o){c._originMediaStreamTrack.enabled=!1;try{yield Qo(c,_r.NEED_DISABLE_TRACK,c)}catch(p){throw se.error("[".concat(c.getTrackId(),"] setEnabled to false error"),p.toString()),$t("error",c,"setEnabled",o,p.toString()),p}return a||(c._enabled=!1),se.info("[".concat(c.getTrackId(),"] setEnabled to false success")),void $t("info",c,"setEnabled",o,"success")}c._originMediaStreamTrack.enabled=!0;try{yield Qo(c,_r.NEED_ENABLE_TRACK,c)}catch(p){throw se.error("[".concat(c.getTrackId(),"] setEnabled to true error"),p.toString()),$t("error",c,"setEnabled",o,p.toString()),p}se.info("[".concat(c.getTrackId(),"] setEnabled to true success")),$t("info",c,"setEnabled",o,"success"),a||(c._enabled=!0)})()}setMuted(o){var a=this;return F(function*(){o!==a._muted&&(a.stateCheck("muted",o),a._muted=o,a._originMediaStreamTrack.enabled=!o,se.debug("[".concat(a.getTrackId(),"] start set muted: ").concat(o)),$t("debug",a,"setMuted",o),o?yield Qo(a,_r.NEED_MUTE_TRACK,a):yield Qo(a,_r.NEED_UNMUTE_TRACK,a))})()}getStats(){return Xk(()=>{se.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead"),jn("warning",this,"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),eE(this,_r.GET_STATS)||FT({},Zt)}setBeautyEffect(o){var a=arguments,c=this;return F(function*(){let p=a.length>1&&void 0!==a[1]?a[1]:{};const _=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.LOCAL_VIDEO_TRACK_BEAUTY,options:[c.getTrackId(),o,p]});if(o||c._videoBeautyProcessor){if(ak()===js.IOS||ak()===js.ANDROID){const m=new Le(Te.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw _.onError(m),m}if(!c._enabled&&o){const m=new Le(Te.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw _.onError(m),m}if(se.info("[".concat(c.getTrackId(),"] start setBeautyEffect"),o,JSON.stringify(p)),$t("info",c,"setBeautyEffect",[o,p]),c._videoBeautyProcessor||o){try{if(!c._videoBeautyProcessor)if(c._videoBeautyProcessor=new $8,c.processor){const m=c.processor;c.pipe(c._videoBeautyProcessor).pipe(m)}else c.pipe(c._videoBeautyProcessor).pipe(c.processorDestination);yield c._videoBeautyProcessor.setBeautyEffectOptions(p),o?yield c._videoBeautyProcessor.enable():yield c._videoBeautyProcessor.disable()}catch(m){throw se.error("[".concat(c.getTrackId(),"] setBeautyEffect error"),m.toString()),$t("info",c,"setBeautyEffect",[o,p]),_.onError(m),m}se.info("[".concat(c.getTrackId(),"] setBeautyEffect success")),$t("info",c,"setBeautyEffect",[o,p],"success"),_.onSuccess()}else _.onSuccess()}})()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}getCurrentFrameImage(o){var a=arguments,c=this;return F(function*(){return c._player?c._player.getCurrentFrameToUint8Array(o,a.length>1&&void 0!==a[1]?a[1]:1):yield BV(o)})()}clone(o,a,c,p){const _=this._mediaStreamTrack.clone();return new Fz(_,o,a,c,p)}setBitrateLimit(o){var a=this;return F(function*(){if(se.debug("[".concat(a.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(o))),$t("debug",a,"setBitrateLimit",o),o){a._forceBitrateLimit=o,a._encoderConfig&&(a._encoderConfig.bitrateMax=a._encoderConfig.bitrateMax&&a._encoderConfig.bitrateMax<o.max_bitrate?a._encoderConfig.bitrateMax:o.max_bitrate,a._encoderConfig.bitrateMin=o.min_bitrate);try{yield Qo(a,_r.NEED_UPDATE_VIDEO_ENCODER,a)}catch(c){return c.throw()}}})()}setOptimizationMode(o){var a=this;return F(function*(){if("motion"!==o&&"detail"!==o&&"balanced"!==o)return se.error(Te.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"),void $t("error",a,"setOptimizationMode",o,Te.INVALID_PARAMS);const c=a._optimizationMode;try{a._optimizationMode=o,yield Qo(a,_r.SET_OPTIMIZATION_MODE,a)}catch(p){throw a._optimizationMode=c,se.error("[".concat(a.getTrackId(),"] set optimization mode failed"),p.toString()),$t("error",a,"setOptimizationMode",o,p.toString()),p}se.info("[".concat(a.getTrackId(),"] set optimization mode success (").concat(o,")")),$t("info",a,"setOptimizationMode",o,"success")})()}setScalabiltyMode(o){if(1===o.numSpatialLayers&&1!==o.numTemporalLayers)return se.error(Te.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),$t("error",this,"setScalabiltyMode",o,Te.INVALID_PARAMS),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=o,se.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(o,")")),$t("info",this,"setScalabiltyMode",o,"success")}updateMediaStreamTrackResolution(){j7(this._originMediaStreamTrack).then(o=>{let[a,c]=o;this._videoHeight=c,this._videoWidth=a}).catch(z3)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:o,height:a,frameRate:c}=this.getMediaStreamTrackSettings();if(!o||!a||!c)return;const[p,_]=function(m,A,v){const S=xt("BITRATE_ADAPTER_TYPE");let I;const R=200*Math.pow(v/15,.6)*Math.pow(m*A/640/360,.75),O=R;if("STANDARD_BITRATE"===S)I=4*R;else{if("COMPATIABLE_BITRATE"!==S)return;I=2*R}return[Math.floor(I),Math.floor(O)]}(o,a,c)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=_,this._encoderConfig.bitrateMax=p,se.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(o,", h: ").concat(a,", fps: ").concat(c,"] => [brMax: ").concat(p,", brMin: ").concat(_,"]")),$t("debug",this,"updateBitrateFromProfile",void 0,"[w: ".concat(o,", h: ").concat(a,", fps: ").concat(c,"] => [brMax: ").concat(p,", brMin: ").concat(_,"]")))}getVideoElementVisibleStatus(){try{var o,a;const c=null==this||null===(o=this._player)||void 0===o?void 0:o.getContainerElement(),p={track:this,element:null==this||null===(a=this._player)||void 0===a?void 0:a.getVideoElement(),slot:c?.parentElement},{element:_,slot:m}=p;if(this.isPlaying&&_ instanceof HTMLVideoElement&&m instanceof HTMLElement){const A=AG.checkOneElementVisible(_),v=Object.assign({},A);if(v.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=v.visible;zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(v.visible?"Video is visible":"Invisible because of ".concat(v.reason))}return v}return}catch(c){throw new Le(Te.GET_VIDEO_ELEMENT_VISIBLE_ERROR,c.message)}}renewMediaStreamTrack(o){return F(function*(){})()}pipe(o){if(this._videoBeautyProcessor&&o!==this._videoBeautyProcessor)return this._videoBeautyProcessor.pipe(o);if(this.processor===o)return o;if(o._source)throw new Le(Te.INVALID_OPERATION,"Processor ".concat(o.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=o,this.processor._source=this,o.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),o}unpipe(){if(!this.processor)return;const o=this.processor;this.processor._source=void 0,this.processor=void 0,o.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}bindProcessorDestinationEvents(){var o=this;this.processorDestination.on(bp.ON_TRACK,function(){var a=F(function*(c){c?c!==o._mediaStreamTrack&&(o._mediaStreamTrack=c,o._updatePlayerSource(),yield Qo(o,_r.NEED_REPLACE_TRACK,o)):o._mediaStreamTrack!==o._originMediaStreamTrack&&(o._mediaStreamTrack=o._originMediaStreamTrack,o._updatePlayerSource(),yield Qo(o,_r.NEED_REPLACE_TRACK,o))});return function(c){return a.apply(this,arguments)}}())}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(bp.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Mu.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Mu.REQUEST_CONSTRAINTS)}}).prototype,"play",[QV],Object.getOwnPropertyDescriptor(Ji.prototype,"play"),Ji.prototype),rr(Ji.prototype,"setEnabled",[X8,Z8],Object.getOwnPropertyDescriptor(Ji.prototype,"setEnabled"),Ji.prototype),rr(Ji.prototype,"setMuted",[e6,t6,HV],Object.getOwnPropertyDescriptor(Ji.prototype,"setMuted"),Ji.prototype),rr(Ji.prototype,"getStats",[GV],Object.getOwnPropertyDescriptor(Ji.prototype,"getStats"),Ji.prototype),rr(Ji.prototype,"setBeautyEffect",[n6],Object.getOwnPropertyDescriptor(Ji.prototype,"setBeautyEffect"),Ji.prototype),rr(Ji.prototype,"getCurrentFrameData",[r6],Object.getOwnPropertyDescriptor(Ji.prototype,"getCurrentFrameData"),Ji.prototype),rr(Ji.prototype,"getCurrentFrameImage",[i6],Object.getOwnPropertyDescriptor(Ji.prototype,"getCurrentFrameImage"),Ji.prototype),rr(Ji.prototype,"setBitrateLimit",[o6],Object.getOwnPropertyDescriptor(Ji.prototype,"setBitrateLimit"),Ji.prototype),rr(Ji.prototype,"setOptimizationMode",[s6],Object.getOwnPropertyDescriptor(Ji.prototype,"setOptimizationMode"),Ji.prototype),rr(Ji.prototype,"setScalabiltyMode",[a6],Object.getOwnPropertyDescriptor(Ji.prototype,"setScalabiltyMode"),Ji.prototype),rr(Ji.prototype,"updateMediaStreamTrackResolution",[JL],Object.getOwnPropertyDescriptor(Ji.prototype,"updateMediaStreamTrackResolution"),Ji.prototype),c6=Ji))||c6),u6=(fG=xa("CameraVideoTrack","getTrackId"),mG=ms(),gG=Jy("CameraVideoTrack","_enabledMutex"),l6=ms(),_G=ms(),fG((rr((Rp=class extends Hs{constructor(r,o,a,c,p,_){var m;super(r,o.encoderConfig?Pu(o.encoderConfig):{},c,p,_),m=this,J(this,"_config",void 0),J(this,"_originalConstraints",void 0),J(this,"_constraints",void 0),J(this,"_enabled",!0),J(this,"_deviceName","default"),J(this,"tryResumeVideoForIOS15WeChat",F(function*(){X_()&&!dk()&&YN()&&m._enabled&&!m._isClosed&&(se.debug("[".concat(m.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),yield m.renewMediaStreamTrack())})),cr("info",this,"constructor",{trackId:_,deviceId:r.label,constraints:a,config:o}),this._config=o,this._originalConstraints=a,this._constraints=a,this._deviceName=r.label,this._config.encoderConfig&&(this._encoderConfig=Pu(this._config.encoderConfig)),qr.on(na.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),qr.on(na.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}setDevice(r){var o=this;return F(function*(){const a=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CAM_VIDEO_TRACK_SET_DEVICE,options:[o.getTrackId(),r]});if(se.info("[".concat(o.getTrackId(),"] set device to ").concat(r)),$t("info",o,"setDevice",r),o._enabled)try{const c=yield Bu.getDeviceById(r),p={};p.video=FT({},o._constraints),p.video.deviceId={exact:r},p.video.facingMode=void 0,o._originMediaStreamTrack.stop();let _=null;try{_=yield $l(p,o.getTrackId())}catch(m){throw se.error("[".concat(o.getTrackId(),"] setDevice failed"),m.toString()),$t("error",o,"setDevice",r,m.toString()),_=yield $l({video:o._constraints},o.getTrackId()),yield o._updateOriginMediaStreamTrack(_.getVideoTracks()[0],!1),m}yield o._updateOriginMediaStreamTrack(_.getVideoTracks()[0],!1),o.updateMediaStreamTrackResolution(),o._deviceName=c.label,o._config.cameraId=r,o._constraints.deviceId={exact:r}}catch(c){throw a.onError(c),se.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),$t("error",o,"setDevice",r,c.toString()),c}else try{const c=yield Bu.getDeviceById(r);o._deviceName=c.label,o._config.cameraId=r,o._constraints.deviceId={exact:r}}catch(c){throw a.onError(c),se.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),$t("error",o,"setDevice",r,c.toString()),c}se.info("[".concat(o.getTrackId(),"] setDevice success")),$t("info",o,"setDevice",r,"success"),a.onSuccess()})()}setEnabled(r,o){var a=this;return F(function*(){if(!o){if(r===a._enabled)return;a.stateCheck("enabled",r)}if(se.info("[".concat(a.getTrackId(),"] start setEnabled"),r),$t("info",a,"setEnabled",r),!r){a._originMediaStreamTrack.onended=null,a._originMediaStreamTrack.stop(),o||(a._enabled=!1);try{yield Qo(a,_r.NEED_DISABLE_TRACK,a)}catch(_){throw se.error("[".concat(a.getTrackId(),"] setEnabled to false error"),_.toString()),$t("error",a,"setEnabled",r,_.toString()),_}return se.info("[".concat(a.getTrackId(),"] setEnabled to false success")),void $t("info",a,"setEnabled",r,"success")}const c=FT({},a._constraints),p=Bu.searchDeviceIdByName(a._deviceName);p&&!c.deviceId&&(c.deviceId={exact:p});try{const _=yield $l({video:a._constraints},a.getTrackId());yield a._updateOriginMediaStreamTrack(_.getVideoTracks()[0],!1),yield Qo(a,_r.NEED_ENABLE_TRACK,a)}catch(_){throw se.error("[".concat(a.getTrackId(),"] setEnabled true error"),_.toString()),$t("error",a,"setEnabled",r,_.toString()),_}a.updateMediaStreamTrackResolution(),se.info("[".concat(a.getTrackId(),"] setEnabled to true success")),$t("info",a,"setEnabled",r,"success"),o||(a._enabled=!0)})()}setEncoderConfiguration(r,o){var a=this;return F(function*(){const c=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[a.getTrackId(),r]});if(!a._enabled){const m=new Le(Te.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw c.onError(m),m}r=Pu(r),a._forceBitrateLimit&&(r.bitrateMax=a._forceBitrateLimit.max_bitrate?a._forceBitrateLimit.max_bitrate:r.bitrateMax,r.bitrateMin=a._forceBitrateLimit.min_bitrate?a._forceBitrateLimit.min_bitrate:r.bitrateMin);const p=nc(a._config);p.encoderConfig=r;const _=jV(p);(jl()||yc()||Rf())&&(_.deviceId=void 0),se.debug("[".concat(a.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(r),JSON.stringify(_)),$t("debug",a,"setEncoderConfiguration",r);try{yield a._originMediaStreamTrack.applyConstraints(_),a.updateMediaStreamTrackResolution()}catch(m){const A=new Le(Te.UNEXPECTED_ERROR,m.toString());throw se.error("[".concat(a.getTrackId(),"] applyConstraints error"),A.toString()),$t("error",a,"setEncoderConfiguration",m.toString()),c.onError(A),A}a._config=p,a._constraints=_,a._originalConstraints=_,a._encoderConfig=r,-1===a._hints.indexOf(qc.SCREEN_TRACK)&&a.updateBitrateFromProfile();try{yield Qo(a,_r.NEED_UPDATE_VIDEO_ENCODER,a)}catch(m){return c.onError(m),m.throw()}c.onSuccess()})()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){var r=this;if((yc()||Rf())&&this._enabled&&!this._isClosed&&qr.duringInterruption){const o=function(){var a=F(function*(){qr.off(na.IOS_INTERRUPTION_END,o),r._enabled&&!r._isClosed&&(se.debug("[".concat(r.getTrackId(),"] try capture camera media device for interrupted iOS device.")),jn("debug",r,"try capture camera media device for interrupted iOS device."),yield r.setEnabled(!1),yield r.setEnabled(!0))});return function(){return a.apply(this,arguments)}}();qr.on(na.IOS_INTERRUPTION_END,o)}else se.debug("[".concat(this.getTrackId(),"] track ended")),Wl("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Ep.TRACK_ENDED)}renewMediaStreamTrack(r){var o=this;return F(function*(){const a=r||o._constraints,c=Bu.searchDeviceIdByName(o._deviceName);c&&!a.deviceId&&(a.deviceId={exact:c});const p=yield $l({video:a},o.getTrackId());o._constraints=a,yield o._updateOriginMediaStreamTrack(p.getVideoTracks()[0],!0),o.updateMediaStreamTrackResolution()})()}close(){super.close(),qr.off(na.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),qr.off(na.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){var r=this;this.processorContext.on(Mu.REQUEST_UPDATE_CONSTRAINTS,function(){var o=F(function*(a,c,p){try{const _=Object.assign({},r._originalConstraints,...a);yield r.renewMediaStreamTrack(_),c()}catch(_){p(_)}});return function(a,c,p){return o.apply(this,arguments)}}()),this.processorContext.on(Mu.REQUEST_CONSTRAINTS,function(){var o=F(function*(a){a(r._originMediaStreamTrack.getSettings())});return function(a){return o.apply(this,arguments)}}())}}).prototype,"setDevice",[mG],Object.getOwnPropertyDescriptor(Rp.prototype,"setDevice"),Rp.prototype),rr(Rp.prototype,"setEnabled",[gG,l6],Object.getOwnPropertyDescriptor(Rp.prototype,"setEnabled"),Rp.prototype),rr(Rp.prototype,"setEncoderConfiguration",[_G],Object.getOwnPropertyDescriptor(Rp.prototype,"setEncoderConfiguration"),Rp.prototype),vG=Rp))||vG);class bP extends ko{constructor(o){super(),J(this,"name","VideoProcessorDestination"),J(this,"ID","0"),J(this,"_source",void 0),J(this,"videoContext",void 0),J(this,"inputTrack",void 0),this.videoContext=o}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Le(Te.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Le(Te.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(o){if(o.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");o.track&&o.track!==this.inputTrack&&(this.inputTrack=o.track,this.emit(bp.ON_TRACK,o.track))}reset(){this.inputTrack=void 0,this.emit(bp.ON_TRACK,void 0)}}class EG extends ko{constructor(o){super(),J(this,"constraintsMap",new Map),J(this,"statsRegistry",[]),J(this,"trackId",void 0),this.trackId=o}getConstraints(){var o=this;return F(function*(){return yield Ip(o,Mu.REQUEST_CONSTRAINTS)})()}requestApplyConstraints(o,a){var c=this;return F(function*(){var p;return se.info("processor ".concat(a.name," requestApplyConstraints for ").concat(c.trackId)),o&&c.constraintsMap.set(a,o),Qo(c,Mu.REQUEST_UPDATE_CONSTRAINTS,Array.from(dv(p=c.constraintsMap).call(p)))})()}requestRevertConstraints(o){var a=this;return F(function*(){var c;if(a.constraintsMap.has(o))return se.info("processor ".concat(o.name," requestRevertConstraints for ").concat(a.trackId)),a.constraintsMap.delete(o),Qo(a,Mu.REQUEST_UPDATE_CONSTRAINTS,Array.from(dv(c=a.constraintsMap).call(c)))})()}registerStats(o,a,c){this.statsRegistry.find(p=>p.processorID===o.ID&&p.processorName===o.name&&p.type===a)||this.statsRegistry.push({processorName:o.name,processorID:o.ID,type:a,cb:c})}unregisterStats(o,a){}gatherStats(){return this.statsRegistry.map(o=>{let{processorID:a,processorName:c,type:p,cb:_}=o;return{processorID:a,processorName:c,type:p,stats:_()}})}}class XL{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(o,a){J(this,"uid",void 0),J(this,"_uintid",void 0),J(this,"_trust_in_room_",!0),J(this,"_trust_audio_enabled_state_",!0),J(this,"_trust_video_enabled_state_",!0),J(this,"_trust_audio_mute_state_",!0),J(this,"_trust_video_mute_state_",!0),J(this,"_audio_muted_",!1),J(this,"_video_muted_",!1),J(this,"_audio_enabled_",!0),J(this,"_video_enabled_",!0),J(this,"_audio_added_",!1),J(this,"_video_added_",!1),J(this,"_trust_video_stream_added_state_",!0),J(this,"_trust_audio_stream_added_state_",!0),J(this,"_audioTrack",void 0),J(this,"_videoTrack",void 0),J(this,"_audioSSRC",void 0),J(this,"_videoSSRC",void 0),J(this,"_audioOrtc",void 0),J(this,"_videoOrtc",void 0),J(this,"_cname",void 0),J(this,"_rtxSsrcId",void 0),this.uid=o,this._uintid=a}}var bG=uN,SG=Su,d6=U_;Yn({target:"Promise",stat:!0},{try:function(r){var o=SG.f(this),a=d6(r);return(a.error?o.reject:o.resolve)(a.value),o.promise}});var p6=bG,CG=Yn,IG=$r,wG=rs,ZL=Jx,TG=Pl,RG=nn,DG=np,h6=Gy,OG=$9,kG=Cl,PG=Xd,f6=us("isConcatSpreadable"),m6=9007199254740991,g6="Maximum allowed index exceeded",_6=IG.TypeError,MG=PG>=51||!wG(function(){var r=[];return r[f6]=!1,r.concat()[0]!==r}),NG=kG("concat"),xG=function(r){if(!TG(r))return!1;var o=r[f6];return void 0!==o?!!o:ZL(r)};CG({target:"Array",proto:!0,forced:!MG||!NG},{concat:function(r){var o,a,c,p,_,m=RG(this),A=OG(m,0),v=0;for(o=-1,c=arguments.length;o<c;o++)if(xG(_=-1===o?m:arguments[o])){if(v+(p=DG(_))>m6)throw _6(g6);for(a=0;a<p;a++,v++)a in _&&h6(A,v,_[a])}else{if(v>=m6)throw _6(g6);h6(A,v++,_)}return A.length=v,A}});var v6={},LG=qp,BG=Jd,A6=MA.f,FG=Ex,y6="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];v6.f=function(r){return y6&&"Window"==LG(r)?function(o){try{return A6(o)}catch{return FG(y6)}}(r):A6(BG(r))};var SP={};SP.f=us;var E6=$p,VG=Gi,jG=SP,QG=eh.f,Va=function(r){var o=E6.Symbol||(E6.Symbol={});VG(o,r)||QG(o,r,{value:jG.f(r)})},UT=Yn,WV=$r,HG=Ml,GG=Ra,CP=Lc,WG=Fo,VT=xc,a0=uC,KV=rs,rc=Gi,KG=Jx,zG=bs,qG=Pl,YG=Nc,zV=Jv,qV=ll,$G=nn,eB=Jd,YV=iA,b6=dh,$V=Xu,IP=ff,S6=Vc,JG=MA,C6=v6,JV=Da,I6=e_,w6=eh,XG=NA,T6=n_,ZG=jD,XV=k_,wP=tA.exports,R6=XR,D6=Zp,O6=us,tB=SP,Dz=Va,k6=Af,P6=Vm,nB=X9.forEach,kd=_b("hidden"),rB="Symbol",M6=O6("toPrimitive"),eW=P6.set,N6=P6.getterFor(rB),Gf=Object.prototype,nE=WV.Symbol,c0=nE&&nE.prototype,tW=WV.TypeError,ZV=WV.QObject,TP=HG("JSON","stringify"),x6=I6.f,rE=w6.f,L6=C6.f,nW=T6.f,B6=WG([].push),Av=wP("symbols"),RP=wP("op-symbols"),e4=wP("string-to-symbol-registry"),t4=wP("symbol-to-string-registry"),rW=wP("wks"),n4=!ZV||!ZV.prototype||!ZV.prototype.findChild,r4=VT&&KV(function(){return 7!=IP(rE({},"a",{get:function(){return rE(this,"a",{value:7}).a}})).a})?function(r,o,a){var c=x6(Gf,o);c&&delete Gf[o],rE(r,o,a),c&&r!==Gf&&rE(Gf,o,c)}:rE,i4=function(r,o){var a=Av[r]=IP(c0);return eW(a,{type:rB,tag:r,description:o}),VT||(a.description=o),a},iB=function(r,o,a){r===Gf&&iB(RP,o,a),qV(r);var c=YV(o);return qV(a),rc(Av,c)?(a.enumerable?(rc(r,kd)&&r[kd][c]&&(r[kd][c]=!1),a=IP(a,{enumerable:$V(0,!1)})):(rc(r,kd)||rE(r,kd,$V(1,{})),r[kd][c]=!0),r4(r,c,a)):rE(r,c,a)},o4=function(r,o){qV(r);var a=eB(o),c=S6(a).concat(s4(a));return nB(c,function(p){VT&&!CP(F6,a,p)||iB(r,p,a[p])}),r},F6=function(r){var o=YV(r),a=CP(nW,this,o);return!(this===Gf&&rc(Av,o)&&!rc(RP,o))&&(!(a||!rc(this,o)||!rc(Av,o)||rc(this,kd)&&this[kd][o])||a)},U6=function(r,o){var a=eB(r),c=YV(o);if(a!==Gf||!rc(Av,c)||rc(RP,c)){var p=x6(a,c);return!p||!rc(Av,c)||rc(a,kd)&&a[kd][c]||(p.enumerable=!0),p}},V6=function(r){var o=L6(eB(r)),a=[];return nB(o,function(c){rc(Av,c)||rc(R6,c)||B6(a,c)}),a},s4=function(r){var o=r===Gf,a=L6(o?RP:eB(r)),c=[];return nB(a,function(p){!rc(Av,p)||o&&!rc(Gf,p)||B6(c,Av[p])}),c};if(a0||(XV(c0=(nE=function(){if(YG(c0,this))throw tW("Symbol is not a constructor");var r=arguments.length&&void 0!==arguments[0]?b6(arguments[0]):void 0,o=D6(r),a=function(c){this===Gf&&CP(a,RP,c),rc(this,kd)&&rc(this[kd],o)&&(this[kd][o]=!1),r4(this,o,$V(1,c))};return VT&&n4&&r4(Gf,o,{configurable:!0,set:a}),i4(o,r)}).prototype,"toString",function(){return N6(this).tag}),XV(nE,"withoutSetter",function(r){return i4(D6(r),r)}),T6.f=F6,w6.f=iB,XG.f=o4,I6.f=U6,JG.f=C6.f=V6,JV.f=s4,tB.f=function(r){return i4(O6(r),r)},VT&&rE(c0,"description",{configurable:!0,get:function(){return N6(this).description}})),UT({global:!0,wrap:!0,forced:!a0,sham:!a0},{Symbol:nE}),nB(S6(rW),function(r){Dz(r)}),UT({target:rB,stat:!0,forced:!a0},{for:function(r){var o=b6(r);if(rc(e4,o))return e4[o];var a=nE(o);return e4[o]=a,t4[a]=o,a},keyFor:function(r){if(!zV(r))throw tW(r+" is not a symbol");if(rc(t4,r))return t4[r]},useSetter:function(){n4=!0},useSimple:function(){n4=!1}}),UT({target:"Object",stat:!0,forced:!a0,sham:!VT},{create:function(r,o){return void 0===o?IP(r):o4(IP(r),o)},defineProperty:iB,defineProperties:o4,getOwnPropertyDescriptor:U6}),UT({target:"Object",stat:!0,forced:!a0},{getOwnPropertyNames:V6,getOwnPropertySymbols:s4}),UT({target:"Object",stat:!0,forced:KV(function(){JV.f(1)})},{getOwnPropertySymbols:function(r){return JV.f($G(r))}}),TP&&UT({target:"JSON",stat:!0,forced:!a0||KV(function(){var r=nE();return"[null]"!=TP([r])||"{}"!=TP({a:r})||"{}"!=TP(Object(r))})},{stringify:function(r,o,a){var c=ZG(arguments),p=o;if((qG(o)||void 0!==r)&&!zV(r))return KG(o)||(o=function(_,m){if(zG(p)&&(m=CP(p,this,_,m)),!zV(m))return m}),c[1]=o,GG(TP,null,c)}}),!c0[M6]){var iW=c0.valueOf;XV(c0,M6,function(r){return CP(iW,this)})}k6(nE,rB),R6[kd]=!0,Va("asyncIterator"),Va("hasInstance"),Va("isConcatSpreadable"),Va("iterator"),Va("match"),Va("matchAll"),Va("replace"),Va("search"),Va("species"),Va("split"),Va("toPrimitive"),Va("toStringTag"),Va("unscopables"),Af($r.JSON,"JSON",!0);var Oz=$p.Symbol;Va("asyncDispose"),Va("dispose"),Va("matcher"),Va("metadata"),Va("observable"),Va("patternMatch"),Va("replaceAll");var j6=Oz,Q6=SP.f("asyncIterator");function oB(r){this.wrapped=r}function xh(r){var o,a;function c(_,m){try{var A=r[_](m),v=A.value,S=v instanceof oB;p6.resolve(S?v.wrapped:v).then(function(I){S?c("return"===_?"return":"next",I):p(A.done?"return":"normal",I)},function(I){c("throw",I)})}catch(I){p("throw",I)}}function p(_,m){switch(_){case"return":o.resolve({value:m,done:!0});break;case"throw":o.reject(m);break;default:o.resolve({value:m,done:!1})}(o=o.next)?c(o.key,o.arg):a=null}this._invoke=function(_,m){return new p6(function(A,v){var S={key:_,arg:m,resolve:A,reject:v,next:null};a?a=a.next=S:(o=a=S,c(_,m))})},"function"!=typeof r.return&&(this.return=void 0)}function jT(r){return function(){return new xh(r.apply(this,arguments))}}function ss(r){return new oB(r)}xh.prototype["function"==typeof j6&&Q6||"@@asyncIterator"]=function(){return this},xh.prototype.next=function(r){return this._invoke("next",r)},xh.prototype.throw=function(r){return this._invoke("throw",r)},xh.prototype.return=function(r){return this._invoke("return",r)};var a4=SP.f("iterator");function sB(r,o){var a={},c=!1;function p(_,m){return c=!0,m=new p6(function(A){A(r[_](m))}),{done:!1,value:o(m)}}return a[void 0!==j6&&a4||"@@iterator"]=function(){return this},a.next=function(_){return c?(c=!1,_):p("next",_)},"function"==typeof r.throw&&(a.throw=function(_){if(c)throw c=!1,_;return p("throw",_)}),"function"==typeof r.return&&(a.return=function(_){return c?(c=!1,_):p("return",_)}),a}var Dp=Q6,H6=ou,DP=le,l4=_o,sW=Dr,l0=ul,W6=ts.f,aW=Gd,iE=H.Symbol,u0=iE&&iE.prototype;if(P&&ot(iE)&&(!("description"in u0)||void 0!==iE().description)){var u4={},OP=function(){var r=arguments.length<1||void 0===arguments[0]?void 0:l0(arguments[0]),o=sW(u0,this)?new iE(r):void 0===r?iE():iE(r);return""===r&&(u4[o]=!0),o};aW(OP,iE),OP.prototype=u0,u0.constructor=OP;var Pz="Symbol(test)"==String(iE("test")),K6=DP(u0.toString),d4=DP(u0.valueOf),cW=/^Symbol\((.*)\)[^)]+$/,z6=DP("".replace),lW=DP("".slice);W6(u0,"description",{configurable:!0,get:function(){var r=d4(this),o=K6(r);if(l4(u4,r))return"";var a=Pz?lW(o,7,-1):z6(o,cW,"$1");return""===a?void 0:a}}),H6({global:!0,forced:!0},{Symbol:OP})}var Vu={exports:{}};function kP(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function PP(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?kP(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):kP(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function QT(r,o,a,c,p,_){let m=[],A=[],v=[],S=[],I=!1,R=!1;if(Vu.exports.parse(r).mediaDescriptions.forEach(O=>{_&&_!==O.attributes.direction||("video"!==O.media.mediaType||I||(A=O.attributes.payloads,S=O.attributes.extmaps,I=!0),"audio"!==O.media.mediaType||R||(m=O.attributes.payloads,v=O.attributes.extmaps,R=!0))}),!S||0===A.length)throw new Error("Cannot get video capabilities from SDP.");if(!v||0===m.length)throw new Error("Cannot get audio capabilities from SDP.");return A.forEach(O=>{var B;null!==(B=O.rtpMap)&&void 0!==B&&B.clockRate&&(O.rtpMap.clockRate=parseInt(O.rtpMap.clockRate))}),m.forEach(O=>{var B;null!==(B=O.rtpMap)&&void 0!==B&&B.clockRate&&(O.rtpMap.clockRate=parseInt(O.rtpMap.clockRate))}),o&&(m=m.filter(O=>{var B;return"rtx"!==(null===(B=O.rtpMap)||void 0===B?void 0:B.encodingName.toLowerCase())}),A=A.filter(O=>{var B;return"rtx"!==(null===(B=O.rtpMap)||void 0===B?void 0:B.encodingName.toLowerCase())})),a&&(A=A.filter(O=>{var B;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(B=O.rtpMap)||void 0===B?void 0:B.encodingName)||"")})),c&&c?.length>0&&(m=m.filter(O=>{var B;return c.includes((null===(B=O.rtpMap)||void 0===B?void 0:B.encodingName.toLowerCase())||"")})),p&&p?.length>0&&(A=A.filter(O=>{var B;return p.includes((null===(B=O.rtpMap)||void 0===B?void 0:B.encodingName.toLowerCase())||"")})),{audioCodecs:m,videoCodecs:A,audioExtensions:v,videoExtensions:S}}function MP(r){const o=Vu.exports.parse(r);let a,c;for(const p of o.mediaDescriptions){if(!a){const _=p.attributes.iceUfrag,m=p.attributes.icePwd;if(!_||!m)throw new Error("Cannot get iceUfrag or icePwd from SDP.");a={iceUfrag:_,icePwd:m}}if(!c){const _=p.attributes.fingerprints;_.length>0&&(c={fingerprints:_})}}if(!c&&o.attributes.fingerprints.length>0&&(c={fingerprints:o.attributes.fingerprints}),!c||!a)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:a,dtlsParameters:c}}function aB(r,o,a){const{cname:c}=r;let p;void 0!==o&&void 0!==a?(p=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:o,port:a.toString(),type:"host",extension:{}}],se.debug("Using remote candidate from AP ".concat(o,":").concat(a)),jn("debug",[],"Using remote candidate from AP ".concat(o,":").concat(a))):p=r.iceParameters.candidates.map(v=>({foundation:v.foundation,componentId:"1",transport:v.protocol,priority:v.priority.toString(),connectionAddress:v.ip,port:v.port.toString(),type:v.type,extension:{}}));const _={fingerprints:r.dtlsParameters.fingerprints.map(v=>({hashFunction:v.algorithm,fingerprint:v.fingerprint}))},m={iceUfrag:r.iceParameters.iceUfrag,icePwd:r.iceParameters.icePwd};let A;switch(r.dtlsParameters.role){case"server":A="passive";break;case"client":A="active";break;case"auto":A="actpass"}return{dtlsParameters:_,iceParameters:m,candidates:p,rtpCapabilities:Y6(r.rtpCapabilities),setup:A,cname:c}}function Pd(r,o,a){const c=[],p=[];return r.forEach(_=>{let{ssrcId:m,rtx:A}=_;const v=_s(8,"track-"),S={ssrcId:m,attributes:PP({label:v,mslabel:a=a||_s(10,""),msid:"".concat(a," ").concat(v)},o&&{cname:o})};if(c.push(S),void 0!==A){const I={ssrcId:A,attributes:PP({label:v,mslabel:a,msid:"".concat(a," ").concat(v)},o&&{cname:o})};c.push(I),p.push({semantic:"FID",ssrcIds:[m,A]})}}),r.length>1&&p.push({semantic:"SIM",ssrcIds:r.map(_=>{let{ssrcId:m}=_;return m})}),{ssrcs:c,ssrcGroups:p}}function HT(r,o){o instanceof tc&&r.attributes.payloads.forEach(a=>{var c;const p=null===(c=a.rtpMap)||void 0===c?void 0:c.encodingName.toLowerCase();if(!p||-1===["opus","pcmu","pcma","g722"].indexOf(p))return;a.fmtp||(a.fmtp={parameters:{}}),a.fmtp.parameters.minptime="10",a.fmtp.parameters.useinbandfec="1";const _=o._encoderConfig;_&&("pcmu"!==p&&"pcma"!==p&&"g722"!==p&&(_.bitrate&&!Xo()&&(a.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*_.bitrate))),_.sampleRate&&(a.fmtp.parameters.maxplaybackrate="".concat(_.sampleRate),a.fmtp.parameters["sprop-maxcapturerate"]="".concat(_.sampleRate))),_.stereo&&(a.fmtp.parameters.stereo="1",a.fmtp.parameters["sprop-stereo"]="1"))})}function NP(r){const o=r.attributes.unrecognized.findIndex(a=>"x-google-flag"===a.attField&&"conference"===a.attValue);-1!==o&&r.attributes.unrecognized.splice(o,1)}function q6(r,o){if(!(o instanceof Hs&&o._encoderConfig&&-1===o._hints.indexOf(qc.SCREEN_TRACK)))return;const a=o._encoderConfig;Yc().supportMinBitrate&&a.bitrateMin&&r.attributes.payloads.forEach(c=>{var p;["h264","vp8","vp9","av1"].includes((null===(p=c.rtpMap)||void 0===p?void 0:p.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-min-bitrate"]="".concat(a.bitrateMin))}),Yc().supportMinBitrate&&!o._hints.includes(qc.LOW_STREAM)&&a.bitrateMax&&r.attributes.payloads.forEach(c=>{var p;["h264","vp8","vp9","av1"].includes((null===(p=c.rtpMap)||void 0===p?void 0:p.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-start-bitrate"]="".concat(xt("X_GOOGLE_START_BITRATE")||Math.floor(a.bitrateMax)))})}function GT(r,o,a){if(!o)return;let c,p;if("video"===r.media.mediaType?(c=a.videoExtensions,p=a.videoCodecs):(c=a.audioExtensions,p=a.audioCodecs),!0===o.tcc){const _=c.find(m=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===m.extensionName);_&&(r.attributes.extmaps.find(m=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===m.extensionName)||r.attributes.extmaps.push({entry:_.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),(m=p,A=r.attributes.payloads,A.filter(v=>!!m.find(S=>S.payloadType===v.payloadType&&!!S.rtcpFeedbacks.find(I=>"transport-cc"===I.type)))).forEach(m=>{m.rtcpFeedbacks.find(A=>"transport-cc"===A.type)||m.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(!1===o.tcc){const _=r.attributes.extmaps.findIndex(m=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===m.extensionName);-1!==_&&r.attributes.extmaps.splice(_,1),r.attributes.payloads.forEach(m=>{const A=m.rtcpFeedbacks.findIndex(v=>"transport-cc"===v.type);-1!==A&&m.rtcpFeedbacks.splice(A,1)})}var m,A;if(!0===o.remb){const _=c.find(m=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===m.extensionName);_&&(r.attributes.extmaps.find(m=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===m.extensionName)||r.attributes.extmaps.push({entry:_.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(m,A){return A.filter(v=>!!m.find(S=>S.payloadType===v.payloadType&&!!S.rtcpFeedbacks.find(I=>"goog-remb"===I.type)))}(p,r.attributes.payloads).forEach(m=>{m.rtcpFeedbacks.find(A=>"goog-remb"===A.type)||m.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(!1===o.remb){const _=r.attributes.extmaps.findIndex(m=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===m.extensionName);-1!==_&&r.attributes.extmaps.splice(_,1),r.attributes.payloads.forEach(m=>{const A=m.rtcpFeedbacks.findIndex(v=>"goog-remb"===v.type);-1!==A&&m.rtcpFeedbacks.splice(A,1)})}}function xP(r,o,a,c,p,_){if("videoExtensions"===a||"audioExtensions"===a){const m=[];return r[a].forEach(A=>{o[a].some((v,S)=>{if(A.entry===v.entry&&A.extensionName===v.extensionName)return m.push(S),!0})?_[a].push(A):c[a].push(A)}),void o[a].forEach((A,v)=>{-1===m.indexOf(v)&&p[a].push(A)})}if("videoCodecs"===a||"audioCodecs"===a){const m=[];return r[a].forEach(A=>{o[a].some((v,S)=>{if(A.payloadType===v.payloadType&&JSON.stringify(A)===JSON.stringify(v))return m.push(S),!0})?_[a].push(A):c[a].push(A)}),void o[a].forEach((A,v)=>{-1===m.indexOf(v)&&p[a].push(A)})}}function Y6(r){const{send:o,recv:a,sendrecv:c}=r;if(!c){if(!o||!a)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:o,recv:a}}let p,_;return o?(p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},p.audioCodecs=[...o.audioCodecs,...c.audioCodecs],p.videoCodecs=[...o.videoCodecs,...c.videoCodecs],p.audioExtensions=[...o.audioExtensions,...c.audioExtensions],p.videoExtensions=[...o.videoExtensions,...c.videoExtensions]):p=c,a?(_={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},_.audioCodecs=[...a.audioCodecs,...c.audioCodecs],_.videoCodecs=[...a.videoCodecs,...c.videoCodecs],_.audioExtensions=[...a.audioExtensions,...c.audioExtensions],_.videoExtensions=[...a.videoExtensions,...c.videoExtensions]):_=c,{send:p,recv:_}}!function(r,o){r.exports=(()=>{var a={8:(_,m,A)=>{A.r(m),A.d(m,{Parser:()=>yn,Printer:()=>n,parse:()=>d,print:()=>f});const v="\n",S="".concat("\r").concat(v),I=" ";let R;function O(b){return b>="0"&&b<="9"}function B(b){return b>="!"&&b<="~"}function q(b){return B(b)||b>="\x80"&&b<="\xff"}function z(b){return"!"===b||b>="#"&&b<="'"||b>="*"&&b<="+"||b>="-"&&b<="."||b>="0"&&b<="9"||b>="A"&&b<="Z"||b>="^"&&b<="~"}function te(b){return b>="1"&&b<="9"}function de(b){return b>="A"&&b<="Z"||b>="a"&&b<="z"}function ge(b){return"d"===b||"h"===b||"m"===b||"s"===b}function Se(b){return b>"\x01"&&b<"\t"||b>"\v"&&b<"\f"||b>"\x0e"&&b<"\xff"}function Me(b){return de(b)||O(b)||"+"===b||"/"===b}function dt(b){return O(b)||de(b)||"+"===b||"/"===b||"-"===b||"_"===b}function kt(b){return de(b)||O(b)||"+"===b||"/"===b}function Mt(b,E){var T=Object.keys(b);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(b);E&&(k=k.filter(function(Q){return Object.getOwnPropertyDescriptor(b,Q).enumerable})),T.push.apply(T,k)}return T}function Lt(b){for(var E=1;E<arguments.length;E++){var T=null!=arguments[E]?arguments[E]:{};E%2?Mt(Object(T),!0).forEach(function(k){Vn(b,k,T[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(T)):Mt(Object(T)).forEach(function(k){Object.defineProperty(b,k,Object.getOwnPropertyDescriptor(T,k))})}return b}function Vn(b,E,T){return E in b?Object.defineProperty(b,E,{value:T,enumerable:!0,configurable:!0,writable:!0}):b[E]=T,b}var b;(b=R||(R={})).VERSION="v",b.ORIGIN="o",b.SESSION_NAME="s",b.INFORMATION="i",b.URI="u",b.EMAIL="e",b.PHONE="p",b.CONNECTION="c",b.BANDWIDTH="b",b.TIME="t",b.REPEAT="r",b.ZONE_ADJUSTMENTS="z",b.KEY="k",b.ATTRIBUTE="a",b.MEDIA="m";class wn{consumeText(E,T){let k=T;for(;k<E.length;){const Q=E[k];if("\0"===Q||"\r"===Q||Q===v)break;k+=1}if(k-T==0)throw new Error("Invalid text, at ".concat(E));return k}consumeUnicastAddress(E,T,k){return this.consumeTill(E,T,I)}consumeOneOrMore(E,T,k){let Q=T;for(;k(E[Q]);)Q++;if(Q-T==0)throw new Error("Invalid rule at ".concat(T,"."));return Q}consumeSpace(E,T){if(E[T]===I)return T+1;throw new Error("Invalid space at ".concat(T,"."))}consumeIP4Address(E,T){let k=T;for(let Q=0;Q<4;Q++)if(k=this.consumeDecimalUChar(E,k),3!==Q){if("."!==E[k])throw new Error("Invalid IP4 address.");k++}return k}consumeDecimalUChar(E,T){let k=T;for(let ie=0;ie<3&&O(E[k]);ie++,k++);if(k-T==0)throw new Error("Invalid decimal uchar.");const Q=parseInt(E.slice(T,k));if(Q>=0&&Q<=255)return k;throw new Error("Invalid decimal uchar")}consumeIP6Address(E,T){let k=this.consumeHexpart(E,T);return":"===E[k]&&(k+=1,k=this.consumeIP4Address(E,k)),k}consumeHexpart(E,T){let k=T;if(":"===E[k]&&":"===E[k+1]){k+=2;try{k=this.consumeHexseq(E,k)}catch{}return k}if(k=this.consumeHexseq(E,k),":"===E[k]&&":"===E[k+1]){k+=2;try{k=this.consumeHexseq(E,k)}catch{}return k}return k}consumeHexseq(E,T){let k=T;for(;k=this.consumeHex4(E,k),":"===E[k]&&":"!==E[k+1];)k+=1;return k}consumeHex4(E,T){let k=0;for(;k<4;k++)if(!((Q=E[T+k])>="0"&&Q<="9"||Q>="a"&&Q<="f"||Q>="A"&&Q<="F")){if(0===k)throw new Error("Invalid hex 4");break}var Q;return T+k}consumeFQDN(E,T){let k=T;for(;O(E[k])||de(E[k])||"-"===E[k]||"."===E[k];)k+=1;if(k-T<4)throw new Error("Invalid FQDN");return k}consumeExtnAddr(E,T){return this.consumeOneOrMore(E,T,q)}consumeMulticastAddress(E,T,k){switch(k){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(E,T);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(E,T);default:try{return this.consumeFQDN(E,T)}catch{return this.consumeExtnAddr(E,T)}}}consumeIP6MulticastAddress(E,T){const k=this.consumeHexpart(E,T);return"/"===E[k]?this.consumeInteger(E,k+1):k}consumeIP4MulticastAddress(E,T){let k=T+3;const Q=E.slice(T,k),ie=parseInt(Q);if(ie<224||ie>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Ie=0;Ie<3;Ie++){if("."!==E[k])throw new Error("Invalid IP4 multicast address.");k+=1,k=this.consumeDecimalUChar(E,k)}return"/"===E[k]&&(k+=1),k=this.consumeTTL(E,k),"/"===E[k]&&(k=this.consumeInteger(E,k)),k}consumeInteger(E,T){if(!te(E[T]))throw new Error("Invalid integer.");for(T+=1;O(E[T]);)T+=1;return T}consumeTTL(E,T){if("0"===E[T])return T+1;if(!te(E[T]))throw new Error("Invalid TTL.");T+=1;for(let k=0;k<2&&O(E[T]);k++)T+=1;return T}consumeToken(E,T){return this.consumeOneOrMore(E,T,z)}consumeTime(E,T){let k=T;if("0"===E[k])return k+1;for(te(E[k])&&(k+=1);O(E[k]);)k++;if(k-T<10)throw new Error("Invalid time");return k}consumeAddress(E,T){return this.consumeTill(E,T,I)}consumeTypedTime(E,T){let k=T;return k=this.consumeOneOrMore(E,k,O),ge(E[k])?k+1:k}consumeRepeatInterval(E,T){if(!te(E[T]))throw new Error("Invalid repeat interval");for(T+=1;O(E[T]);)T+=1;return ge(E[T])&&(T+=1),T}consumePort(E,T){return this.consumeOneOrMore(E,T,O)}consume(E,T,k){for(let Q=0;Q<k.length;Q++){if(T+Q>=E.length)throw new Error("consume exceeding value length");if(E[T+Q]!==k[Q])throw new Error("consume ".concat(k," failed at ").concat(Q))}return T+k.length}consumeTill(E,T,k){let Q=T;for(;Q<E.length&&("string"!=typeof k||E[Q]!==k)&&("function"!=typeof k||!k(E[Q]));)Q++;return Q}}class yn extends wn{constructor(){super(),Vn(this,"records",[]),Vn(this,"currentLine",0)}parse(E){const T=this.probeEOL(E);this.records=E.split(T).filter(hi=>!!hi.trim()).map(this.parseLine),this.currentLine=0;const k=this.parseVersion(),Q=this.parseOrigin(),ie=this.parseSessionName(),Ie=this.parseInformation(),xe=this.parseUri(),qe=this.parseEmail(),ft=this.parsePhone(),Qt=this.parseConnection(),Kt=this.parseBandWidth(),pn=this.parseTimeFields(),Vt=this.parseKey(),zn=this.parseSessionAttribute(),pi=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:k,origin:Q,sessionName:ie,information:Ie,uri:xe,emails:qe,phones:ft,connection:Qt,bandwidths:Kt,timeFields:pn,key:Vt,attributes:zn,mediaDescriptions:pi}}getCurrentRecord(){const E=this.records[this.currentLine];if(!E)throw new Error("Record doesn't exit.");return E}probeEOL(E){for(let T=0;T<E.length;T++)if(E[T]===v)return"\r"===E[T-1]?S:v;throw new Error("Invalid newline character.")}parseLine(E,T){if(E.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const k=E[0];if("="!==E[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:k,value:E.slice(2),line:T,cur:0}}parseSessionAttribute(){const E=new We;for(;this.currentLine<this.records.length;){const T=this.getCurrentRecord();if(T.type!==R.ATTRIBUTE)break;const k={attField:this.extractOneOrMore(T,Q=>z(Q)&&":"!==Q),_cur:0};":"===T.value[T.cur]&&(T.cur+=1,k.attValue=this.extractOneOrMore(T,Se)),E.parse(k),this.currentLine++}return E.digest()}parseMediaAttributes(E){const T=new lt(E);for(;this.currentLine<this.records.length;){const k=this.getCurrentRecord();if(k.type!==R.ATTRIBUTE)break;const Q={attField:this.extractOneOrMore(k,ie=>z(ie)&&":"!==ie),_cur:0};":"===k.value[k.cur]&&(k.cur+=1,Q.attValue=this.extractOneOrMore(k,Se)),T.parse(Q),this.currentLine++}return T.digest()}parseKey(){const E=this.getCurrentRecord();if(E.type===R.KEY){if("prompt"===E.value||"clear:"===E.value||"base64:"===E.value||"uri:"===E.value)return E.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const E=this.getCurrentRecord();if(E.type===R.ZONE_ADJUSTMENTS){const T=[];for(;;)try{const k=this.extract(E,this.consumeTime);this.consumeSpaceForRecord(E);let Q=!1;"-"===E.value[E.cur]&&(Q=!0,E.cur+=1);const ie=this.extract(E,this.consumeTypedTime);T.push({time:k,typedTime:ie,back:Q})}catch{break}if(0===T.length)throw new Error("Invalid zone adjustments");return this.currentLine++,T}return[]}parseRepeat(){const E=[];for(;;){const T=this.getCurrentRecord();if(T.type!==R.REPEAT)break;{const k=this.extract(T,this.consumeRepeatInterval),Q=this.parseTypedTime(T);E.push({repeatInterval:k,typedTimes:Q}),this.currentLine++}}return E}parseTypedTime(E){const T=[];for(;;)try{this.consumeSpaceForRecord(E),T.push(this.extract(E,this.consumeTypedTime))}catch{break}if(0===T.length)throw new Error("Invalid typed time.");return T}parseTime(){const E=this.getCurrentRecord(),T=this.extract(E,this.consumeTime);this.consumeSpaceForRecord(E);const k=this.extract(E,this.consumeTime);return this.currentLine++,{startTime:T,stopTime:k}}parseBandWidth(){const E=[];for(;this.currentLine<this.records.length;){const T=this.getCurrentRecord();if(T.type!==R.BANDWIDTH)break;{const k=this.extractOneOrMore(T,z);if(":"!==T.value[T.cur])throw new Error("Invalid bandwidth field.");T.cur++;const Q=this.extractOneOrMore(T,O);E.push({bwtype:k,bandwidth:Q}),this.currentLine++}}return E}parseVersion(){const E=this.getCurrentRecord();if(E.type!==R.VERSION)throw new Error("first sdp record must be version");const T=E.value.slice(0,this.consumeOneOrMore(E.value,0,O));if(T.length!==E.value.length)throw new Error('invalid proto version, "v='.concat(E.value,'"'));return this.currentLine++,T}parseOrigin(){const E=this.getCurrentRecord();if(E.type!==R.ORIGIN)throw new Error("second line of sdp must be origin");const T=this.extractOneOrMore(E,q);this.consumeSpaceForRecord(E);const k=this.extractOneOrMore(E,O);this.consumeSpaceForRecord(E);const Q=this.extractOneOrMore(E,O);this.consumeSpaceForRecord(E);const ie=this.extractOneOrMore(E,z);this.consumeSpaceForRecord(E);const Ie=this.extractOneOrMore(E,z);this.consumeSpaceForRecord(E);const xe=this.extract(E,this.consumeUnicastAddress);return this.currentLine++,{username:T,sessId:k,sessVersion:Q,nettype:ie,addrtype:Ie,unicastAddress:xe}}parseSessionName(){const E=this.getCurrentRecord();if(E.type===R.SESSION_NAME){const T=this.extract(E,this.consumeText);return this.currentLine++,T}}parseInformation(){const E=this.getCurrentRecord();if(E.type!==R.INFORMATION)return;const T=this.extract(E,this.consumeText);return this.currentLine++,T}parseUri(){const E=this.getCurrentRecord();if(E.type===R.URI)return this.currentLine++,E.value}parseEmail(){const E=[];for(;;){const T=this.getCurrentRecord();if(T.type!==R.EMAIL)break;E.push(T.value),this.currentLine++}return E}parsePhone(){const E=[];for(;;){const T=this.getCurrentRecord();if(T.type!==R.PHONE)break;E.push(T.value),this.currentLine++}return E}parseConnection(){const E=this.getCurrentRecord();if(E.type===R.CONNECTION){const T=this.extractOneOrMore(E,z);this.consumeSpaceForRecord(E);const k=this.extractOneOrMore(E,z);this.consumeSpaceForRecord(E);const Q=this.extract(E,this.consumeAddress);return this.currentLine++,{nettype:T,addrtype:k,address:Q}}}parseMedia(){const E=this.getCurrentRecord(),T=this.extract(E,this.consumeToken);this.consumeSpaceForRecord(E);let k=this.extract(E,this.consumePort);"/"===E.value[E.cur]&&(E.cur+=1,k+=this.extract(E,this.consumeInteger)),this.consumeSpaceForRecord(E);const Q=[];for(Q.push(this.extract(E,this.consumeToken));"/"===E.value[E.cur];)E.cur+=1,Q.push(this.extract(E,this.consumeToken));if(0===Q.length)throw new Error("Invalid proto");const ie=this.parseFmt(E);return this.currentLine++,{mediaType:T,port:k,protos:Q,fmts:ie}}parseTimeFields(){const E=[];for(;this.getCurrentRecord().type===R.TIME;){const T=this.parseTime(),k=this.parseRepeat(),Q=this.parseZone();E.push({time:T,repeats:k,zones:Q})}return E}parseMediaDescription(){const E=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===R.MEDIA;){const T=this.parseMedia(),k=this.parseInformation(),Q=this.parseConnections(),ie=this.parseBandWidth(),Ie=this.parseKey(),xe=this.parseMediaAttributes(T);E.push({media:T,information:k,connections:Q,bandwidths:ie,key:Ie,attributes:xe})}return E}parseConnections(){const E=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===R.CONNECTION;)E.push(this.parseConnection());return E}parseFmt(E){const T=[];for(;;)try{this.consumeSpaceForRecord(E),T.push(this.extract(E,this.consumeToken))}catch{break}if(0===T.length)throw new Error("Invalid fmts");return T}extract(E,T,...k){const Q=T.call(this,E.value,E.cur,...k),ie=E.value.slice(E.cur,Q);return E.cur=Q,ie}extractOneOrMore(E,T){const k=this.consumeOneOrMore(E.value,E.cur,T),Q=E.value.slice(E.cur,k);return E.cur=k,Q}consumeSpaceForRecord(E){if(E.value[E.cur]!==I)throw new Error("Invalid space at ".concat(E.cur,"."));E.cur+=1}}class Ct extends wn{constructor(...E){super(...E),Vn(this,"attributes",void 0),Vn(this,"digested",!1)}extractOneOrMore(E,T,k){const Q=this.consumeOneOrMore(E.attValue,E._cur,T),ie=E.attValue.slice(E._cur,Q),[Ie,xe]=k||[];if("number"==typeof Ie&&ie.length<Ie)throw new Error("error in length, should be more or equal than ".concat(Ie," characters."));if("number"==typeof xe&&ie.length>xe)throw new Error("error in length, should be less or equal than ".concat(xe," characters."));return E._cur=Q,ie}consumeAttributeSpace(E){if(E.attValue[E._cur]!==I)throw new Error("Invalid space at ".concat(E._cur,"."));E._cur+=1}extract(E,T,...k){if(!E.attValue)throw new Error("Nothing to extract from attValue.");const Q=T.call(this,E.attValue,E._cur,...k),ie=E.attValue.slice(E._cur,Q);return E._cur=Q,ie}atEnd(E){if(!E.attValue)throw new Error;return E._cur>=E.attValue.length}peekChar(E){if(!E.attValue)throw new Error;return E.attValue[E._cur]}peek(E,T){if(!E.attValue)throw new Error;for(let k=0;k<T.length;k++)if(T[k]!==E.attValue[E._cur+k])return!1;return!0}parseIceUfrag(E){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(E,Me,[4,256])}parseIcePwd(E){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(E,Me,[22,256])}parseIceOptions(E){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const T=[];for(;!this.atEnd(E);){T.push(this.extractOneOrMore(E,Me));try{this.consumeAttributeSpace(E)}catch(k){if(this.atEnd(E))break;throw k}}this.attributes.iceOptions=T}parseFingerprint(E){const T=this.extract(E,this.consumeToken);this.consumeAttributeSpace(E);const k=this.extract(E,this.consumeTill);this.attributes.fingerprints.push({hashFunction:T,fingerprint:k})}parseExtmap(E){const T=this.extractOneOrMore(E,O);let k;"/"===this.peekChar(E)&&(this.extract(E,this.consume,"/"),k=this.extract(E,this.consumeToken)),this.consumeAttributeSpace(E);const Q=this.extract(E,this.consumeTill,I),ie=Lt(Lt({entry:parseInt(T,10)},k&&{direction:k}),{},{extensionName:Q});this.peekChar(E)===I&&(this.consumeAttributeSpace(E),ie.extensionAttributes=this.extract(E,this.consumeTill)),this.attributes.extmaps.push(ie)}parseSetup(E){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const T=this.extract(E,this.consumeTill);if("active"!==T&&"passive"!==T&&"actpass"!==T&&"holdconn"!==T)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=T}}class We extends Ct{constructor(...E){super(...E),Vn(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(E){if(this.digested)throw new Error("already digested");try{switch(E.attField){case"group":this.parseGroup(E);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(E);break;case"ice-pwd":this.parseIcePwd(E);break;case"ice-options":this.parseIceOptions(E);break;case"fingerprint":this.parseFingerprint(E);break;case"setup":this.parseSetup(E);break;case"tls-id":this.parseTlsId(E);break;case"identity":this.parseIdentity(E);break;case"extmap":this.parseExtmap(E);break;case"msid-semantic":this.parseMsidSemantic(E);break;default:E.ignored=!0,this.attributes.unrecognized.push(E)}}catch(T){throw console.error("parsing session attribute ".concat(E.attField,' error, "a=').concat(E.attField,":").concat(E.attValue,'"')),T}if(!E.ignored&&E.attValue&&!this.atEnd(E))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(E){const T=this.extract(E,this.consumeToken),k=[];for(;!this.atEnd(E)&&this.peekChar(E)===I;)this.consumeAttributeSpace(E),k.push(this.extract(E,this.consumeToken));this.attributes.groups.push({semantic:T,identificationTag:k})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(E){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(E,dt)}parseIdentity(E){const T=this.extractOneOrMore(E,kt),k=[];for(;!this.atEnd(E)&&this.peekChar(E)===I;){this.consumeAttributeSpace(E);const Q=this.extract(E,this.consumeToken);this.extract(E,this.consume,"=");const ie=this.extractOneOrMore(E,Ie=>Ie!==I&&Se(Ie));k.push({name:Q,value:ie})}this.attributes.identities.push({assertionValue:T,extensions:k})}parseMsidSemantic(E){this.peekChar(E)===I&&this.consumeAttributeSpace(E);const T={semantic:this.extract(E,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(E)}catch{break}if("*"===this.peekChar(E)){this.extract(E,this.consume,"*"),T.applyForAll=!0;break}{const k=this.extract(E,this.consumeTill,I);T.identifierList.push(k)}}this.attributes.msidSemantic=T}}class lt extends Ct{constructor(E){super(),Vn(this,"attributes",void 0),-1!==E.protos.indexOf("RTP")||E.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(E){if(this.digested)throw new Error("already digested");try{switch(E.attField){case"extmap":this.parseExtmap(E);break;case"setup":this.parseSetup(E);break;case"ice-ufrag":this.parseIceUfrag(E);break;case"ice-pwd":this.parseIcePwd(E);break;case"ice-options":this.parseIceOptions(E);break;case"candidate":this.parseCandidate(E);break;case"remote-candidate":this.parseRemoteCandidate(E);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(E);break;case"rtpmap":this.parseRtpmap(E);break;case"ptime":this.parsePtime(E);break;case"maxptime":this.parseMaxPtime(E);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(E);break;case"ssrc":this.parseSSRC(E);break;case"fmtp":this.parseFmtp(E);break;case"rtcp-fb":this.parseRtcpFb(E);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(E);break;case"mid":this.parseMid(E);break;case"msid":this.parseMsid(E);break;case"imageattr":this.parseImageAttr(E);break;case"rid":this.parseRid(E);break;case"simulcast":this.parseSimulcast(E);break;case"sctp-port":this.parseSctpPort(E);break;case"max-message-size":this.parseMaxMessageSize(E);break;case"ssrc-group":this.parseSSRCGroup(E);break;default:E.ignored=!0,this.attributes.unrecognized.push(E)}}catch(T){throw console.error("parsing media attribute ".concat(E.attField,' error, "a=').concat(E.attField,":").concat(E.attValue,'"')),T}if(!E.ignored&&E.attValue&&!this.atEnd(E))throw new Error("attribute parsing error")}parseCandidate(E){const T=this.extractOneOrMore(E,Me,[1,32]);this.consumeAttributeSpace(E);const k=this.extractOneOrMore(E,O,[1,5]);this.consumeAttributeSpace(E);const Q=this.extract(E,this.consumeToken);this.consumeAttributeSpace(E);const ie=this.extractOneOrMore(E,O,[1,10]);this.consumeAttributeSpace(E);const Ie=this.extract(E,this.consumeAddress);this.consumeAttributeSpace(E);const xe=this.extract(E,this.consumePort);this.consumeAttributeSpace(E),this.extract(E,this.consume,"typ"),this.consumeAttributeSpace(E);const qe={foundation:T,componentId:k,transport:Q,priority:ie,connectionAddress:Ie,port:xe,type:this.extract(E,this.consumeToken),extension:{}};for(this.peek(E," raddr")&&(this.extract(E,this.consume," raddr"),this.consumeAttributeSpace(E),qe.relAddr=this.extract(E,this.consumeAddress)),this.peek(E," rport")&&(this.extract(E,this.consume," rport"),this.consumeAttributeSpace(E),qe.relPort=this.extract(E,this.consumePort));this.peekChar(E)===I;){this.consumeAttributeSpace(E);const ft=this.extract(E,this.consumeToken);this.consumeAttributeSpace(E),qe.extension[ft]=this.extractOneOrMore(E,B)}this.attributes.candidates.push(qe)}parseRemoteCandidate(E){const T=[];for(;;){const k=this.extractOneOrMore(E,O,[1,5]);this.consumeAttributeSpace(E);const Q=this.extract(E,this.consumeAddress);this.consumeAttributeSpace(E);const ie=this.extract(E,this.consumePort);T.push({componentId:k,connectionAddress:Q,port:ie});try{this.consumeAttributeSpace(E)}catch{break}}this.attributes.remoteCandidatesList.push(T)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(E){const T=this.extract(E,this.consumeToken);this.consumeAttributeSpace(E);const k=this.extract(E,this.consumeTill,"/");this.extract(E,this.consume,"/");const Q={encodingName:k,clockRate:this.extractOneOrMore(E,O)};this.atEnd(E)||"/"!==this.peekChar(E)||(this.extract(E,this.consume,"/"),Q.encodingParameters=parseInt(this.extract(E,this.consumeTill),10));const ie=this.attributes.payloads.find(Ie=>Ie.payloadType===parseInt(T,10));ie?ie.rtpMap=Q:this.attributes.payloads.push({payloadType:parseInt(T,10),rtpMap:Q,rtcpFeedbacks:[]})}parsePtime(E){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(E,this.consumeTill)}parseMaxPtime(E){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(E,this.consumeTill)}parseDirection(E){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=E.attField}parseSSRC(E){const T=this.extractOneOrMore(E,O);this.consumeAttributeSpace(E);const k=this.extract(E,this.consumeTill,":");let Q;":"===this.peekChar(E)&&(this.extract(E,this.consume,":"),Q=this.extract(E,this.consumeTill));const ie=this.attributes.ssrcs.find(Ie=>Ie.ssrcId===parseInt(T,10));ie?ie.attributes[k]=Q:this.attributes.ssrcs.push({ssrcId:parseInt(T,10),attributes:{[k]:Q}})}parseFmtp(E){const T=this.extract(E,this.consumeTill,I);this.consumeAttributeSpace(E);const k=this.extract(E,this.consumeTill),Q={};k.split(";").forEach(Ie=>{let[xe,qe]=Ie.split("=");xe=xe.trim(),qe="string"==typeof qe?qe.trim():qe,"string"==typeof xe&&xe.length>0&&(Q[xe]=qe)});const ie=this.attributes.payloads.find(Ie=>Ie.payloadType===parseInt(T,10));ie?ie.fmtp={parameters:Q}:this.attributes.payloads.push({payloadType:parseInt(T,10),rtcpFeedbacks:[],fmtp:{parameters:Q}})}parseFmtParameters(E){const T={},k=this.extract(E,this.consumeTill,"=");E._cur++;const Q=this.extract(E,this.consumeTill,";");for(T[k]=Q;";"===E.attValue[E._cur];){const ie=this.extract(E,this.consumeTill,"=");E._cur++;const Ie=this.extract(E,this.consumeTill,";");T[ie]=Ie}return T}parseRtcpFb(E){let T="";T="*"===this.peekChar(E)?this.extract(E,this.consume,"*"):this.extract(E,this.consumeTill,I),this.consumeAttributeSpace(E);const k=this.extract(E,this.consumeTill,I);let Q;if("trr-int"===k)Q={type:k,interval:this.extract(E,this.consumeTill)};else{const ie={type:k};this.peekChar(E)===I&&(this.consumeAttributeSpace(E),ie.parameter=this.extract(E,this.consumeToken),this.peekChar(E)===I&&(ie.additional=this.extract(E,this.consumeTill))),Q=ie}if("*"===T)this.attributes.rtcpFeedbackWildcards.push(Q);else{const ie=this.attributes.payloads.find(Ie=>Ie.payloadType===parseInt(T,10));ie?ie.rtcpFeedbacks.push(Q):this.attributes.payloads.push({payloadType:parseInt(T,10),rtcpFeedbacks:[Q]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(E){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const T={port:this.extract(E,this.consumePort)};this.peekChar(E)===I&&(this.consumeAttributeSpace(E),T.netType=this.extractOneOrMore(E,z),this.consumeAttributeSpace(E),T.addressType=this.extractOneOrMore(E,z),this.consumeAttributeSpace(E),T.address=this.extract(E,this.consumeAddress)),this.attributes.rtcp=T}parseMsid(E){const T={id:this.extractOneOrMore(E,z,[1,64])};this.peekChar(E)===I&&(this.consumeAttributeSpace(E),T.appdata=this.extractOneOrMore(E,z,[1,64])),this.attributes.msids.push(T)}parseImageAttr(E){this.attributes.imageattr.push(E.attValue)}parseRid(E){const T=this.extractOneOrMore(E,Q=>de(Q)||O(Q)||"_"===Q||"-"===Q);this.consumeAttributeSpace(E);const k={id:T,direction:this.extract(E,this.consumeToken),params:[]};if(this.peekChar(E)===I){if(this.consumeAttributeSpace(E),this.peek(E,"pt=")){this.extract(E,this.consume,"pt=");const Q=[];for(;;){const ie=this.extract(E,this.consumeToken);Q.push(ie);try{this.extract(E,this.consume,",")}catch{break}}k.payloads=Q,this.peekChar(E)===I&&this.extract(E,this.consume,I)}for(;;){const Q=this.extract(E,this.consumeToken);switch(Q){case"depend":{const ie={type:Q,rids:this.extract(E,this.consume,"=").split(",")};k.params.push(ie);break}default:{const ie={type:Q};"="===this.peekChar(E)&&(this.extract(E,this.consume,"="),ie.val=this.extract(E,this.consumeTill,";")),k.params.push(ie)}}try{this.extract(E,this.consume,";")}catch{break}}}this.attributes.rids.push(k)}parseSimulcast(E){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=E.attValue,this.extract(E,this.consumeTill)}parseSctpPort(E){this.attributes.sctpPort=this.extractOneOrMore(E,O,[1,5])}parseMaxMessageSize(E){this.attributes.maxMessageSize=this.extractOneOrMore(E,O,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(E){this.attributes.mid=this.extract(E,this.consumeToken)}parseSSRCGroup(E){const T=this.extract(E,this.consumeToken),k=[];for(;;)try{this.consumeAttributeSpace(E);const Q=this.extract(E,this.consumeInteger);k.push(parseInt(Q,10))}catch{break}this.attributes.ssrcGroups.push({semantic:T,ssrcIds:k})}}function At(b,E,T){return E in b?Object.defineProperty(b,E,{value:T,enumerable:!0,configurable:!0,writable:!0}):b[E]=T,b}class n{constructor(){At(this,"eol",S)}print(E,T){let k="";return T&&(this.eol=T),k+=this.printVersion(E.version),k+=this.printOrigin(E.origin),k+=this.printSessionName(E.sessionName),k+=this.printInformation(E.information),k+=this.printUri(E.uri),k+=this.printEmail(E.emails),k+=this.printPhone(E.phones),k+=this.printConnection(E.connection),k+=this.printBandwidth(E.bandwidths),k+=this.printTimeFields(E.timeFields),k+=this.printKey(E.key),k+=this.printSessionAttributes(E.attributes),k+=this.printMediaDescription(E.mediaDescriptions),k}printVersion(E){return"v=".concat(E).concat(this.eol)}printOrigin(E){return"o=".concat(E.username," ").concat(E.sessId," ").concat(E.sessVersion," ").concat(E.nettype," ").concat(E.addrtype," ").concat(E.unicastAddress).concat(this.eol)}printSessionName(E){return E?"s=".concat(E).concat(this.eol):""}printInformation(E){return E?"i=".concat(E).concat(this.eol):""}printUri(E){return E?"u=".concat(E).concat(this.eol):""}printEmail(E){let T="";for(const k of E)T+="e=".concat(k).concat(this.eol);return T}printPhone(E){let T="";for(const k of E)T+="e=".concat(k).concat(this.eol);return T}printConnection(E){return E?"c=".concat(E.nettype," ").concat(E.addrtype," ").concat(E.address).concat(this.eol):""}printBandwidth(E){let T="";for(const k of E)T+="b=".concat(k.bwtype,":").concat(k.bandwidth).concat(this.eol);return T}printTimeFields(E){let T="";for(const k of E){T+="t=".concat(k.time.startTime," ").concat(k.time.startTime).concat(this.eol);for(const Q of k.repeats)T+="r=".concat(Q.repeatInterval," ").concat(Q.typedTimes.join(" ")).concat(this.eol);k.zoneAdjustments&&(T+="z=",T+="z=".concat(k.zoneAdjustments.map(Q=>"".concat(Q.time," ").concat(Q.back?"-":""," ").concat(Q.typedTime)).join(" ")).concat(this.eol),T+=this.eol)}return T}printKey(E){return E?"k=".concat(E).concat(this.eol):""}printAttributes(E){let T="";for(const k of E)T+="a=".concat(k.attField).concat(k.attValue?":".concat(k.attValue):"").concat(this.eol);return T}printMediaDescription(E){let T="";for(const k of E)T+=this.printMedia(k.media),T+=this.printInformation(k.information),T+=this.printConnections(k.connections),T+=this.printBandwidth(k.bandwidths),T+=this.printKey(k.key),T+=this.printMediaAttributes(k);return T}printConnections(E){let T="";for(const k of E)T+=this.printConnection(k);return T}printMedia(E){return"m=".concat(E.mediaType," ").concat(E.port," ").concat(E.protos.join("/")," ").concat(E.fmts.join(" ")).concat(this.eol)}printSessionAttributes(E){return new e(this.eol).print(E)}printMediaAttributes(E){return new s(this.eol).print(E)}}class t{constructor(E){At(this,"eol",void 0),this.eol=E}printIceUfrag(E){return void 0===E?"":"a=ice-ufrag:".concat(E).concat(this.eol)}printIcePwd(E){return void 0===E?"":"a=ice-pwd:".concat(E).concat(this.eol)}printIceOptions(E){return void 0===E?"":"a=ice-options:".concat(E.join(I)).concat(this.eol)}printFingerprints(E){return E.length>0?E.map(T=>"a=fingerprint:".concat(T.hashFunction).concat(I).concat(T.fingerprint)).join(this.eol)+this.eol:""}printExtmap(E){return E.map(T=>"a=extmap:".concat(T.entry).concat(T.direction?"/".concat(T.direction):"").concat(I).concat(T.extensionName).concat(T.extensionAttributes?"".concat(I).concat(T.extensionAttributes):"").concat(this.eol)).join("")}printSetup(E){return void 0===E?"":"a=setup:".concat(E).concat(this.eol)}printUnrecognized(E){return E.map(T=>"a=".concat(T.attField).concat(T.attValue?":".concat(T.attValue):"").concat(this.eol)).join("")}}class e extends t{print(E){let T="";return T+=this.printGroups(E.groups),T+=this.printMsidSemantic(E.msidSemantic),T+=this.printIceLite(E.iceLite),T+=this.printIceUfrag(E.iceUfrag),T+=this.printIcePwd(E.icePwd),T+=this.printIceOptions(E.iceOptions),T+=this.printFingerprints(E.fingerprints),T+=this.printSetup(E.setup),T+=this.printTlsId(E.tlsId),T+=this.printIdentity(E.identities),T+=this.printExtmap(E.extmaps),T+=this.printUnrecognized(E.unrecognized),T}printGroups(E){let T="";return E.length>0&&(T+=E.map(k=>"a=group:".concat(k.semantic).concat(k.identificationTag.map(Q=>"".concat(I).concat(Q)).join("")).concat(this.eol)).join("")),T}printIceLite(E){return void 0===E?"":"a=ice-lite"+this.eol}printTlsId(E){return E?"a=tls-id:".concat(E).concat(this.eol):""}printIdentity(E){return 0===E.length?"":E.map(T=>"a=identity:".concat(T.assertionValue).concat(T.extensions.map(k=>"".concat(I).concat(k.name).concat(k.value?"=".concat(k.value):"")))).join(this.eol)+this.eol}printMsidSemantic(E){if(!E)return"";let T="a=msid-semantic:".concat(E.semantic);return E.applyForAll?T+="".concat(I,"*"):E.identifierList.length>0&&(T+=E.identifierList.map(k=>"".concat(I).concat(k))),T+this.eol}}class s extends t{print(E){const T=E.attributes;let k="";return k+=this.printRTCP(T.rtcp),k+=this.printIceUfrag(T.iceUfrag),k+=this.printIcePwd(T.icePwd),k+=this.printIceOptions(T.iceOptions),k+=this.printCandidates(T.candidates),k+=this.printRemoteCandidatesList(T.remoteCandidatesList),k+=this.printEndOfCandidates(T.endOfCandidates),k+=this.printFingerprints(T.fingerprints),k+=this.printSetup(T.setup),k+=this.printMid(T.mid),k+=this.printExtmap(T.extmaps),k+=this.printRTPRelated(T),k+=this.printPtime(T.ptime),k+=this.printMaxPtime(T.maxPtime),k+=this.printDirection(T.direction),k+=this.printSSRCGroups(T.ssrcGroups),k+=this.printSSRC(T.ssrcs),k+=this.printRTCPMux(T.rtcpMux),k+=this.printRTCPMuxOnly(T.rtcpMuxOnly),k+=this.printRTCPRsize(T.rtcpRsize),k+=this.printMSId(T.msids),k+=this.printImageattr(T.imageattr),k+=this.printRid(T.rids),k+=this.printSimulcast(T.simulcast),k+=this.printSCRPPort(T.sctpPort),k+=this.printMaxMessageSize(T.maxMessageSize),k+=this.printUnrecognized(T.unrecognized),k}printCandidates(E){return E.map(T=>"a=candidate:".concat(T.foundation).concat(I).concat(T.componentId).concat(I).concat(T.transport).concat(I).concat(T.priority).concat(I).concat(T.connectionAddress).concat(I).concat(T.port).concat(I,"typ").concat(I).concat(T.type).concat(T.relAddr?"".concat(I,"raddr").concat(I).concat(T.relAddr):"").concat(T.relPort?"".concat(I,"rport").concat(I).concat(T.relPort):"").concat(Object.keys(T.extension).map(k=>"".concat(I).concat(k).concat(I).concat(T.extension[k])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(E){return E.map(T=>"a=remote-candidates:".concat(T.join(I)).concat(this.eol)).join("")}printEndOfCandidates(E){return void 0===E?"":"a=end-of-candidates"+this.eol}printRTPRelated(E){if(!E.payloads)return"";const T=E.payloads;let k="";k+=E.rtcpFeedbackWildcards.map(Q=>this.printRTCPFeedback("*",Q)).join("");for(const Q of T)k+=this.printRtpMap(Q.payloadType,Q.rtpMap),k+=this.printFmtp(Q.payloadType,Q.fmtp),k+=Q.rtcpFeedbacks.map(ie=>this.printRTCPFeedback(Q.payloadType,ie)).join("");return k}printFmtp(E,T){if(!T)return"";const k=Object.keys(T.parameters);return 1===k.length&&void 0===T.parameters[k[0]]?"a=fmtp:".concat(E).concat(I).concat(k[0]).concat(this.eol):"a=fmtp:".concat(E).concat(I).concat(Object.keys(T.parameters).map(Q=>"".concat(Q,"=").concat(T.parameters[Q])).join(";")).concat(this.eol)}printRtpMap(E,T){return T?"a=rtpmap:".concat(E).concat(I).concat(T.encodingName,"/").concat(T.clockRate).concat(T.encodingParameters?"/".concat(T.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(E,T){let k="a=rtcp-fb:".concat(E).concat(I),Q=T;return"trr-int"===Q.type?k+="ttr-int".concat(I).concat(Q.interval):(k+="".concat(Q.type),Q.parameter&&(k+="".concat(I).concat(Q.parameter),Q.additional&&(k+="".concat(I).concat(Q.additional)))),k+this.eol}printPtime(E){return void 0===E?"":"a=ptime:".concat(E).concat(this.eol)}printMaxPtime(E){return void 0===E?"":"a=maxptime:".concat(E).concat(this.eol)}printDirection(E){return void 0===E?"":"a=".concat(E).concat(this.eol)}printSSRC(E){return E.map(T=>Object.keys(T.attributes).map(k=>"a=ssrc:".concat(T.ssrcId.toString(10)).concat(I).concat(k).concat(T.attributes[k]?":".concat(T.attributes[k]):"").concat(this.eol)).join("")).join("")}printRTCPMux(E){return void 0===E?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(E){return void 0===E?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(E){return void 0===E?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(E){if(void 0===E)return"";let T="a=rtcp:".concat(E.port);return E.netType&&(T+="".concat(I).concat(E.netType)),E.addressType&&(T+="".concat(I).concat(E.addressType)),E.address&&(T+="".concat(I).concat(E.address)),T+this.eol}printMSId(E){return E.map(T=>"a=msid:".concat(T.id).concat(T.appdata?"".concat(I).concat(T.appdata):"").concat(this.eol)).join("")}printImageattr(E){return E.map(T=>"a=imageattr:".concat(T).concat(this.eol)).join("")}printRid(E){return E.map(T=>{let k="a=rid:".concat(T.id).concat(I).concat(T.direction);return T.payloads&&(k+="".concat(I,"pt=").concat(T.payloads.join(","))),T.params.length>0&&(k+="".concat(I).concat(T.params.map(Q=>"depend"===Q.type?"depend=".concat(Q.rids.join(",")):"".concat(Q.type,"=").concat(Q.val)).join(";"))),k+this.eol}).join("")}printSimulcast(E){return void 0===E?"":"a=simulcast:".concat(E).concat(this.eol)}printSCRPPort(E){return void 0===E?"":"a=sctp-port:".concat(E).concat(this.eol)}printMaxMessageSize(E){return void 0===E?"":"a=max-message-size:".concat(E)}printMid(E){return void 0===E?"":"a=mid:".concat(E).concat(this.eol)}printSSRCGroups(E){return E.map(T=>"a=ssrc-group:".concat(T.semantic).concat(T.ssrcIds.map(k=>"".concat(I).concat(k.toString(10))).join("")).concat(this.eol)).join("")}}function d(b){return(new yn).parse(b)}function f(b,E){return(new n).print(b,E)}}},c={};function p(_){if(c[_])return c[_].exports;var m=c[_]={exports:{}};return a[_](m,m.exports,p),m.exports}return p.d=(_,m)=>{for(var A in m)p.o(m,A)&&!p.o(_,A)&&Object.defineProperty(_,A,{enumerable:!0,get:m[A]})},p.o=(_,m)=>Object.prototype.hasOwnProperty.call(_,m),p.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},p(8)})()}(Vu);class $6{constructor(o){J(this,"sessionDesc",void 0),J(this,"localCapabilities",void 0),J(this,"rtpCapabilities",void 0),J(this,"candidates",void 0),J(this,"iceParameters",void 0),J(this,"dtlsParameters",void 0),J(this,"setup",void 0),J(this,"currentMidIndex",void 0),J(this,"cname",void 0),o=nc(o);const{remoteIceParameters:a,remoteDtlsParameters:c,candidates:p,remoteRTPCapabilities:_,remoteSetup:m,localCapabilities:A,sdkCodec:v,cname:S}=o,I=Vu.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=_,this.candidates=p,this.iceParameters=a,this.dtlsParameters=c,this.setup=m,this.localCapabilities=A,this.cname=S;for(let R=0;R<I.mediaDescriptions.length;R++){const O=I.mediaDescriptions[R];if(O.attributes.iceUfrag=a.iceUfrag,O.attributes.icePwd=a.icePwd,O.attributes.fingerprints=c.fingerprints,O.attributes.candidates=p,O.attributes.setup=m,"video"===O.media.mediaType){O.media.fmts=_.videoCodecs.map(q=>q.payloadType.toString(10));const B=_.videoCodecs.filter(q=>{var z;return null===(z=q.rtpMap)||void 0===z?void 0:z.encodingName.toLowerCase().includes(v)});if(0===B.length)throw new Error("Codec ".concat(v," not supported by remote SDP."));O.attributes.payloads=B,O.attributes.extmaps=_.videoExtensions}"audio"===O.media.mediaType&&(O.media.fmts=_.audioCodecs.map(B=>B.payloadType.toString(10)),O.attributes.payloads=_.audioCodecs,O.attributes.extmaps=_.audioExtensions),I.mediaDescriptions[R]=this.mungMediaDesc(O)}this.sessionDesc=I,this.currentMidIndex=I.mediaDescriptions.length-1}toString(){return Vu.exports.print(this.sessionDesc)}send(o,a,c){const{ssrcs:p,ssrcGroups:_}=Pd(a,this.cname),m=this.sessionDesc.mediaDescriptions.find(S=>o===Xr.VIDEO?"video"===S.media.mediaType:"audio"===S.media.mediaType),A=p[0].attributes.label,v=p[0].attributes.mslabel;return m.attributes.ssrcs=m.attributes.ssrcs.concat(p),m.attributes.ssrcGroups=m.attributes.ssrcGroups.concat(_),{id:A,mslabel:v}}batchSend(o){return o.map(a=>{let{kind:c,ssrcMsg:p}=a;return this.send(c,p,void 0)})}stopSending(o){this.sessionDesc.mediaDescriptions.forEach(a=>{const c=[],p=[],_=[];a.attributes.ssrcs.forEach(m=>{o.includes(m.attributes.label||"")?_.push(m):c.push(m)}),a.attributes.ssrcGroups.forEach(m=>{_.map(A=>A.ssrcId).includes(m.ssrcIds[0])||p.push(m)}),a.attributes.ssrcs=c,a.attributes.ssrcGroups=p})}mute(o){const a=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===o);if(!a)throw new Error("mediaDescription not found with ".concat(o," in remote SDP when calling RemoteSDP.mute."));a.attributes.direction="inactive"}unmute(o){const a=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===o);if(!a)throw new Error("mediaDescription not found with ".concat(o," in remote SDP when calling RemoteSDP.unmute."));a.attributes.direction="sendonly"}receive(o,a,c){o.forEach((p,_)=>{const m=p._mediaStreamTrack,A=this.sessionDesc.mediaDescriptions.findIndex(S=>S.attributes.mid===m.kind),v=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[A],p);this.sessionDesc.mediaDescriptions[A]=v})}stopReceiving(o){}restartICE(o,a){o=nc(o),a=nc(a),this.iceParameters=o,this.candidates=a,this.sessionDesc.mediaDescriptions.forEach(c=>{c.attributes.iceUfrag=o.iceUfrag,c.attributes.icePwd=o.icePwd,c.attributes.candidates=this.candidates})}predictReceivingMids(o){const a=[];for(let c=0;c<o;c++)a.push((this.currentMidIndex+c+1).toString(10));return a}mungRecvMediaDsec(o,a){const c=nc(o);return HT(c,a),q6(c,a),c}updateRecvMedia(o,a){const c=this.sessionDesc.mediaDescriptions.findIndex(p=>p.attributes.mid===o);if(-1!==c){const p=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[c],a);this.sessionDesc.mediaDescriptions[c]=p}}bumpMid(o){this.currentMidIndex+=o}updateTrackLabel(o,a,c){const p=this.sessionDesc.mediaDescriptions.find(m=>o===Xr.VIDEO?"video"===m.attributes.mid:"audio"===m.attributes.mid);if(p){const m=p.attributes.ssrcs.find(A=>A.attributes.label===a);var _;m&&(m.attributes.label=c,null===(_=m.attributes.msid)||void 0===_||_.replace(a,c))}}mungMediaDesc(o){const a=nc(o);return NP(a),function(c){const p=c.attributes.extmaps.find(_=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===_.extensionName);p&&c.attributes.extmaps.splice(c.attributes.extmaps.indexOf(p),1),c.attributes.payloads.forEach(_=>{const m=_.rtcpFeedbacks.findIndex(A=>"transport-cc"===A.type);-1!==m&&_.rtcpFeedbacks.splice(m,1)})}(a),a}getSSRC(o){for(const a of this.sessionDesc.mediaDescriptions)for(const c of a.attributes.ssrcs)if(c.attributes.label===o)return[c]}}function Tc(r){if(Array.isArray(r))return r.map(function(c){return c});if(!p4(r))return r;var o={};for(var a in r)o[a]=p4(r[a])||Array.isArray(r[a])?Tc(r[a]):r[a];return o}function p4(r){return!("object"!=typeof r||Array.isArray(r)||!r)}var cB=function(){function r(o){this.input=[],this.size=o}return r.prototype.add=function(o){this.input.push(o),this.input.length>this.size&&this.input.splice(0,1)},r.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},r}(),Wf=function(r,o){return(Wf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var p in c)c.hasOwnProperty(p)&&(a[p]=c[p])})(r,o)};function yv(r,o){function a(){this.constructor=r}Wf(r,o),r.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)}var Kf=function(){return(Kf=Object.assign||function(r){for(var o,a=1,c=arguments.length;a<c;a++)for(var p in o=arguments[a])Object.prototype.hasOwnProperty.call(o,p)&&(r[p]=o[p]);return r}).apply(this,arguments)};function h4(r,o,a,c){return new(a||(a=Promise))(function(p,_){function m(S){try{v(c.next(S))}catch(I){_(I)}}function A(S){try{v(c.throw(S))}catch(I){_(I)}}function v(S){S.done?p(S.value):new a(function(I){I(S.value)}).then(m,A)}v((c=c.apply(r,o||[])).next())})}function LP(r,o){var a,c,p,_,m={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return _={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function A(v){return function(S){return function(I){if(a)throw new TypeError("Generator is already executing.");for(;m;)try{if(a=1,c&&(p=2&I[0]?c.return:I[0]?c.throw||((p=c.return)&&p.call(c),0):c.next)&&!(p=p.call(c,I[1])).done)return p;switch(c=0,p&&(I=[2&I[0],p.value]),I[0]){case 0:case 1:p=I;break;case 4:return m.label++,{value:I[1],done:!1};case 5:m.label++,c=I[1],I=[0];continue;case 7:I=m.ops.pop(),m.trys.pop();continue;default:if(!((p=(p=m.trys).length>0&&p[p.length-1])||6!==I[0]&&2!==I[0])){m=0;continue}if(3===I[0]&&(!p||I[1]>p[0]&&I[1]<p[3])){m.label=I[1];break}if(6===I[0]&&m.label<p[1]){m.label=p[1],p=I;break}if(p&&m.label<p[2]){m.label=p[2],m.ops.push(I);break}p[2]&&m.ops.pop(),m.trys.pop();continue}I=o.call(r,m)}catch(R){I=[6,R],c=0}finally{a=p=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([v,S])}}}var Op,WT={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},oE={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:WT,remoteCandidate:WT}},J6={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},lB={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},X6={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},Z6={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},f4=function(){function r(o,a){var c=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=Tc(oE),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=o,this.options=a,this.intervalTimer=window.setInterval(function(){return h4(c,void 0,void 0,function(){return LP(this,function(p){return this.updateStats(),[2]})})},this.options.updateInterval)}return r.prototype.getStats=function(){return this.stats},r.prototype.setVideoIsReady=function(o){this.videoIsReady=o},r.prototype.setVideoIsReady2=function(o,a){this.videoIsReady2[o]=a},r.prototype.getVideoIsReady=function(o){return this.videoIsReady2[o]||!1},r.prototype.setIsFirstAudioDecoded=function(o){},r.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},r.prototype.calcLossRate=function(o){var a=this;this.lossRateWindowStats.push(o),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var c=this.lossRateWindowStats.length,p=0,_=0,m=0,A=0,v=function(R){o[R].forEach(function(O,B){if(a.lossRateWindowStats[c-1][R][B]&&a.lossRateWindowStats[0][R][B]){var q=a.lossRateWindowStats[c-1][R][B].packets-a.lossRateWindowStats[0][R][B].packets,z=a.lossRateWindowStats[c-1][R][B].packetsLost-a.lossRateWindowStats[0][R][B].packetsLost;"videoSend"===R||"audioSend"===R?(p+=q,m+=z):(_+=q,A+=z),O.packetLostRate=Number.isNaN(q)||Number.isNaN(q)||q<=0||z<=0?0:z/(q+z)}})},S=0,I=["videoSend","audioSend","videoRecv","audioRecv"];S<I.length;S++)v(I[S]);o.sendPacketLossRate=p<=0||m<=0?0:m/(p+m),o.recvPacketLossRate=_<=0||A<=0?0:A/(_+A)},r}(),kp=function(r){function o(){var a=null!==r&&r.apply(this,arguments)||this;return a._stats=oE,a.lastDecodeVideoReceiverStats=new Map,a}return yv(o,r),o.prototype.updateStats=function(){return h4(this,void 0,void 0,function(){var a,c,p,_;return LP(this,function(m){switch(m.label){case 0:return[4,this._getStats()];case 1:return a=m.sent(),c=this.statsResponsesToObjects(a),this._stats=Tc(oE),p=c.filter(function(A){return"ssrc"===A.type}),this.processSSRCStats(p),(_=c.find(function(A){return"VideoBwe"===A.type}))&&this.processBandwidthStats(_),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},o.prototype.processBandwidthStats=function(a){this._stats.bitrate={actualEncoded:Number(a.googActualEncBitrate),targetEncoded:Number(a.googTargetEncBitrate),retransmit:Number(a.googRetransmitBitrate),transmit:Number(a.googTransmitBitrate)},this._stats.sendBandwidth=Number(a.googAvailableSendBandwidth)},o.prototype.processSSRCStats=function(a){var c=this;a.forEach(function(p){var _=p.id.includes("send");switch(p.mediaType+"_"+(_?"send":"recv")){case"video_send":var m=Tc(lB);m.codec=p.googCodecName,m.adaptionChangeReason="none",p.googCpuLimitedResolution&&(m.adaptionChangeReason="cpu"),p.googBandwidthLimitedResolution&&(m.adaptionChangeReason="bandwidth"),m.avgEncodeMs=Number(p.googAvgEncodeMs),m.inputFrame={width:Number(p.googFrameWidthInput)||Number(p.googFrameWidthSent),height:Number(p.googFrameHeightInput)||Number(p.googFrameHeightSent),frameRate:Number(p.googFrameRateInput)},m.sentFrame={width:Number(p.googFrameWidthSent),height:Number(p.googFrameHeightSent),frameRate:Number(p.googFrameRateInput)},m.firsCount=Number(p.googFirReceived),m.nacksCount=Number(p.googNacksReceived),m.plisCount=Number(p.googPlisReceived),m.frameCount=Number(p.framesEncoded),m.bytes=Number(p.bytesSent),m.packets=Number(p.packetsSent),m.packetsLost=Number(p.packetsLost),m.ssrc=Number(p.ssrc),m.rttMs=Number(p.googRtt||0),c._stats.videoSend.push(m),c._stats.rtt=m.rttMs;break;case"video_recv":var A=Tc(J6),v=c.lastDecodeVideoReceiverStats.get(Number(p.ssrc));if(A.codec=p.googCodecName,A.targetDelayMs=Number(p.googTargetDelayMs),A.renderDelayMs=Number(p.googRenderDelayMs),A.currentDelayMs=Number(p.googCurrentDelayMs),A.minPlayoutDelayMs=Number(p.googMinPlayoutDelayMs),A.decodeMs=Number(p.googDecodeMs),A.maxDecodeMs=Number(p.googMaxDecodeMs),A.receivedFrame={width:Number(p.googFrameWidthReceived),height:Number(p.googFrameHeightReceived),frameRate:Number(p.googFrameRateReceived)},A.decodedFrame={width:Number(p.googFrameWidthReceived),height:Number(p.googFrameHeightReceived),frameRate:Number(p.googFrameRateDecoded)},A.outputFrame={width:Number(p.googFrameWidthReceived),height:Number(p.googFrameHeightReceived),frameRate:Number(p.googFrameRateOutput)},A.jitterBufferMs=Number(p.googJitterBufferMs),A.firsCount=Number(p.googFirsSent),A.nacksCount=Number(p.googNacksSent),A.plisCount=Number(p.googPlisSent),A.framesDecodeCount=Number(p.framesDecoded),A.bytes=Number(p.bytesReceived),A.packets=Number(p.packetsReceived),A.packetsLost=Number(p.packetsLost),A.ssrc=Number(p.ssrc),A.packets>0&&!c.isFirstVideoReceived[A.ssrc]&&(c.onFirstVideoReceived&&c.onFirstVideoReceived(A.ssrc),c.isFirstVideoReceived[A.ssrc]=!0),A.framesDecodeCount>0&&!c.isFirstVideoDecoded[A.ssrc]&&(c.onFirstVideoDecoded&&c.onFirstVideoDecoded(A.ssrc,A.decodedFrame.width,A.decodedFrame.height),c.isFirstVideoDecoded[A.ssrc]=!0),v){var S=v.stats,I=Date.now()-v.lts;A.framesDecodeFreezeTime=S.framesDecodeFreezeTime,A.framesDecodeInterval=S.framesDecodeInterval,A.framesDecodeCount>S.framesDecodeCount&&c.isFirstVideoDecoded?(v.lts=Date.now(),A.framesDecodeInterval=I,A.framesDecodeInterval>=c.options.freezeRateLimit&&(c.getVideoIsReady(parseInt(p.ssrc,10))?A.framesDecodeFreezeTime+=A.framesDecodeInterval:c.setVideoIsReady2(parseInt(p.ssrc,10),!0))):A.framesDecodeCount<v.stats.framesDecodeCount&&(A.framesDecodeInterval=0)}c.lastDecodeVideoReceiverStats.set(A.ssrc,{stats:Kf({},A),lts:Date.now()}),c._stats.videoRecv.push(A);break;case"audio_recv":var R=Tc(Z6);R.codec=p.googCodecName,R.outputLevel=Math.abs(Number(p.audioOutputLevel))/32767,R.decodingCNG=Number(p.googDecodingCNG),R.decodingCTN=Number(p.googDecodingCTN),R.decodingCTSG=Number(p.googDecodingCTSG),R.decodingNormal=Number(p.googDecodingNormal),R.decodingPLC=Number(p.googDecodingPLC),R.decodingPLCCNG=Number(p.googDecodingPLCCNG),R.expandRate=Number(p.googExpandRate),R.accelerateRate=Number(p.googAccelerateRate),R.preemptiveExpandRate=Number(p.googPreemptiveExpandRate),R.secondaryDecodedRate=Number(p.googSecondaryDecodedRate),R.speechExpandRate=Number(p.googSpeechExpandRate),R.preferredJitterBufferMs=Number(p.googPreferredJitterBufferMs),R.jitterBufferMs=Number(p.googJitterBufferMs),R.jitterMs=Number(p.googJitterReceived),R.bytes=Number(p.bytesReceived),R.packets=Number(p.packetsReceived),R.packetsLost=Number(p.packetsLost),R.ssrc=Number(p.ssrc),R.receivedFrames=Number(p.googDecodingCTN)||Number(p.packetsReceived),R.droppedFrames=Number(p.googDecodingPLC)+Number(p.googDecodingPLCCNG)||Number(p.packetsLost),R.receivedFrames>0&&!c.isFirstAudioReceived[R.ssrc]&&(c.onFirstAudioReceived&&c.onFirstAudioReceived(R.ssrc),c.isFirstAudioReceived[R.ssrc]=!0),R.decodingNormal>0&&!c.isFirstAudioDecoded[R.ssrc]&&(c.onFirstAudioDecoded&&c.onFirstAudioDecoded(R.ssrc),c.isFirstAudioDecoded[R.ssrc]=!0),c._stats.audioRecv.push(R);break;case"audio_send":var O=Tc(X6);O.codec=p.googCodecName,O.inputLevel=Math.abs(Number(p.audioInputLevel))/32767,O.aecReturnLoss=Number(p.googEchoCancellationReturnLoss||0),O.aecReturnLossEnhancement=Number(p.googEchoCancellationReturnLossEnhancement||0),O.residualEchoLikelihood=Number(p.googResidualEchoLikelihood||0),O.residualEchoLikelihoodRecentMax=Number(p.googResidualEchoLikelihoodRecentMax||0),O.bytes=Number(p.bytesSent),O.packets=Number(p.packetsSent),O.packetsLost=Number(p.packetsLost),O.ssrc=Number(p.ssrc),O.rttMs=Number(p.googRtt||0),c._stats.rtt=O.rttMs,c._stats.audioSend.push(O)}})},o.prototype._getStats=function(){var a=this;return new Promise(function(c,p){a.pc.getStats(c,p)})},o.prototype.statsResponsesToObjects=function(a){var c=[];return a.result().forEach(function(p){var _={id:p.id,timestamp:p.timestamp.valueOf().toString(),type:p.type};p.names().forEach(function(m){_[m]=p.stat(m)}),c.push(_)}),c},o}(f4);!function(r){r.CERTIFICATE="certificate",r.CODEC="codec",r.CANDIDATE_PAIR="candidate-pair",r.LOCAL_CANDIDATE="local-candidate",r.REMOTE_CANDIDATE="remote-candidate",r.INBOUND="inbound-rtp",r.TRACK="track",r.OUTBOUND="outbound-rtp",r.PC="peer-connection",r.REMOTE_INBOUND="remote-inbound-rtp",r.REMOTE_OUTBOUND="remote-outbound-rtp",r.TRANSPORT="transport",r.CSRC="csrc",r.DATA_CHANNEL="data-channel",r.STREAM="stream",r.SENDER="sender",r.RECEIVER="receiver"}(Op||(Op={}));var Ai,BP=function(r){function o(){var a=null!==r&&r.apply(this,arguments)||this;return a._stats=oE,a.lastDecodeVideoReceiverStats=new Map,a.lastVideoFramesRecv=new Map,a.lastVideoFramesSent=new Map,a.lastVideoFramesDecode=new Map,a.lastVideoJBDelay=new Map,a.lastAudioJBDelay=new Map,a.mediaBytesSent=new Map,a.mediaBytesRetransmit=new Map,a.mediaBytesTargetEncode=new Map,a.lastEncoderMs=new Map,a}return yv(o,r),o.prototype.updateStats=function(){return h4(this,void 0,void 0,function(){var a,c=this;return LP(this,function(p){switch(p.label){case 0:return a=this,[4,this.pc.getStats()];case 1:return a.report=p.sent(),this._stats=Tc(oE),this.report.forEach(function(_){switch(_.type){case Op.OUTBOUND:"audio"===_.mediaType?c.processAudioOutboundStats(_):"video"===_.mediaType&&c.processVideoOutboundStats(_);break;case Op.INBOUND:"audio"===_.mediaType?c.processAudioInboundStats(_):"video"===_.mediaType&&c.processVideoInboundStats(_);break;case Op.TRANSPORT:var m=c.report.get(_.selectedCandidatePairId);m&&c.processCandidatePairStats(m);break;case Op.CANDIDATE_PAIR:_.selected&&c.processCandidatePairStats(_)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},o.prototype.processCandidatePairStats=function(a){if(this._stats.sendBandwidth=a.availableOutgoingBitrate||0,a.currentRoundTripTime&&(this._stats.rtt=1e3*a.currentRoundTripTime),this._stats.videoSend.forEach(function(_){!_.rttMs&&a.currentRoundTripTime&&(_.rttMs=1e3*a.currentRoundTripTime)}),this._stats.audioSend.forEach(function(_){!_.rttMs&&a.currentRoundTripTime&&(_.rttMs=1e3*a.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=a.id,a.localCandidateId){var c=this.report.get(a.localCandidateId);c&&this.processCandidateStats(c)}if(a.remoteCandidateId){var p=this.report.get(a.remoteCandidateId);p&&this.processCandidateStats(p)}},o.prototype.processCandidateStats=function(a){var c;a.type===Op.LOCAL_CANDIDATE&&(c=this._stats.selectedCandidatePair.localCandidate),a.type===Op.REMOTE_CANDIDATE&&(c=this._stats.selectedCandidatePair.remoteCandidate),c&&(c.type=a.type,c.id=a.id,a.address&&(c.address=a.address),a.candidateType&&(c.candidateType=a.candidateType),a.port&&(c.port=a.port),a.priority&&(c.priority=a.priority),a.protocol&&(c.protocol=a.protocol),a.relayProtocol&&(c.relayProtocol=a.relayProtocol),a.type===Op.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==c.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(Kf({},c),Kf({},this.stats.selectedCandidatePair.localCandidate)),a.type===Op.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==c.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(Kf({},c),Kf({},this.stats.selectedCandidatePair.remoteCandidate)))},o.prototype.processAudioInboundStats=function(a){var c=this._stats.audioRecv.find(function(p){return p.ssrc===a.ssrc});c||(c=Tc(Z6),this._stats.audioRecv.push(c)),c.ssrc=a.ssrc,c.packets=a.packetsReceived,c.packetsLost=a.packetsLost,c.bytes=a.bytesReceived,c.jitterMs=1e3*a.jitter,a.trackId&&this.processAudioTrackReceiverStats(a.trackId,c),a.codecId&&(c.codec=this.getCodecFromCodecStats(a.codecId)),c.receivedFrames||(c.receivedFrames=a.packetsReceived),c.droppedFrames||(c.droppedFrames=a.packetsLost),c.receivedFrames>0&&!this.isFirstAudioReceived[c.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(c.ssrc),this.isFirstAudioReceived[c.ssrc]=!0),c.outputLevel&&c.outputLevel>0&&!this.isFirstAudioDecoded[c.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(c.ssrc),this.isFirstAudioDecoded[c.ssrc]=!0)},o.prototype.processVideoInboundStats=function(a){var c=this._stats.videoRecv.find(function(R){return R.ssrc===a.ssrc});c||(c=Tc(J6),this._stats.videoRecv.push(c)),c.ssrc=a.ssrc,c.packets=a.packetsReceived,c.packetsLost=a.packetsLost,c.bytes=a.bytesReceived,c.firsCount=a.firCount,c.nacksCount=a.nackCount,c.plisCount=a.pliCount,c.framesDecodeCount=a.framesDecoded;var p=this.lastDecodeVideoReceiverStats.get(c.ssrc),_=this.lastVideoFramesDecode.get(c.ssrc),m=Date.now();if(c.framesDecodeCount>0&&!this.isFirstVideoDecoded[c.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(c.ssrc,c.decodedFrame?c.decodedFrame.width:0,c.decodedFrame?c.decodedFrame.height:0),this.isFirstVideoDecoded[c.ssrc]=!0),p){var S=p.stats,I=m-p.lts;c.framesDecodeFreezeTime=S.framesDecodeFreezeTime,c.framesDecodeInterval=S.framesDecodeInterval,c.framesDecodeCount>S.framesDecodeCount&&this.isFirstVideoDecoded?(p.lts=Date.now(),c.framesDecodeInterval=I,c.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(a.ssrc))?c.framesDecodeFreezeTime+=c.framesDecodeInterval:this.setVideoIsReady2(parseInt(a.ssrc,10),!0))):c.framesDecodeCount<S.framesDecodeCount&&(c.framesDecodeInterval=0),a.framesDecoded&&a.qpSum&&(c.qpSumPerFrame=p.stats.framesDecodeCount>a.framesDecoded?a.qpSum/a.framesDecoded:(a.qpSum-p.qpSum)/(a.framesDecoded-p.stats.framesDecodeCount))}_&&m-_.lts>=800?(c.decodeFrameRate=Math.round((c.framesDecodeCount-_.count)/((m-_.lts)/1e3)),this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:m,rate:c.decodeFrameRate})):_?c.decodeFrameRate=_.rate:this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:m,rate:0}),a.totalDecodeTime&&(c.decodeMs=1e3*a.totalDecodeTime),a.trackId&&this.processVideoTrackReceiverStats(a.trackId,c),a.codecId&&(c.codec=this.getCodecFromCodecStats(a.codecId)),a.framerateMean&&(c.framesRateFirefox=a.framerateMean),c.packets>0&&!this.isFirstVideoReceived[c.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(c.ssrc),this.isFirstVideoReceived[c.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(c.ssrc,{stats:Kf({},c),lts:p?p.lts:Date.now(),qpSum:a.qpSum})},o.prototype.processVideoOutboundStats=function(a){var c=this._stats.videoSend.find(function(O){return O.ssrc===a.ssrc});c||(c=Tc(lB),this._stats.videoSend.push(c));var p,_=this.mediaBytesSent.get(a.ssrc);if(_?_.add(a.bytesSent):((A=new cB(10)).add(a.bytesSent),this.mediaBytesSent.set(a.ssrc,A)),void 0!==a.retransmittedBytesSent){var m=this.mediaBytesRetransmit.get(a.ssrc);m?m.add(a.retransmittedBytesSent):((A=new cB(10)).add(a.retransmittedBytesSent),this.mediaBytesRetransmit.set(a.ssrc,A))}if(a.totalEncodedBytesTarget){var A,v=this.mediaBytesTargetEncode.get(a.ssrc);v?v.add(a.totalEncodedBytesTarget):((A=new cB(10)).add(a.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(a.ssrc,A))}if(c.ssrc=a.ssrc,c.bytes=a.bytesSent,c.packets=a.packetsSent,c.firsCount=a.firCount,c.nacksCount=a.nackCount,c.plisCount=a.pliCount,c.frameCount=a.framesEncoded,c.adaptionChangeReason=a.qualityLimitationReason,a.totalEncodeTime&&a.framesEncoded&&(c.avgEncodeMs=!(p=this.lastEncoderMs.get(a.ssrc))||p.lastFrameCount>a.framesEncoded?1e3*a.totalEncodeTime/a.framesEncoded:1e3*(a.totalEncodeTime-p.lastEncoderTime)/(a.framesEncoded-p.lastFrameCount)),a.framesEncoded&&a.qpSum&&(c.qpSumPerFrame=!(p=this.lastEncoderMs.get(a.ssrc))||p.lastFrameCount>a.framesEncoded?a.qpSum/a.framesEncoded:(a.qpSum-p.lastQpSum)/(a.framesEncoded-p.lastFrameCount)),this.lastEncoderMs.set(a.ssrc,{lastFrameCount:a.framesEncoded,lastEncoderTime:a.totalEncodeTime,lastQpSum:a.qpSum,lts:Date.now()}),a.codecId&&(c.codec=this.getCodecFromCodecStats(a.codecId)),a.mediaSourceId&&this.processVideoMediaSource(a.mediaSourceId,c),a.trackId&&this.processVideoTrackSenderStats(a.trackId,c),a.remoteId)this.processRemoteInboundStats(a.remoteId,c);else{var R=this.findRemoteStatsId(a.ssrc,Op.REMOTE_INBOUND);R&&this.processRemoteInboundStats(R,c)}},o.prototype.processAudioOutboundStats=function(a){var c=this._stats.audioSend.find(function(_){return _.ssrc===a.ssrc});if(c||(c=Tc(X6),this._stats.audioSend.push(c)),c.ssrc=a.ssrc,c.packets=a.packetsSent,c.bytes=a.bytesSent,a.mediaSourceId&&this.processAudioMediaSource(a.mediaSourceId,c),a.codecId&&(c.codec=this.getCodecFromCodecStats(a.codecId)),a.trackId&&this.processAudioTrackSenderStats(a.trackId,c),a.remoteId)this.processRemoteInboundStats(a.remoteId,c);else{var p=this.findRemoteStatsId(a.ssrc,Op.REMOTE_INBOUND);p&&this.processRemoteInboundStats(p,c)}},o.prototype.findRemoteStatsId=function(a,c){var p=Array.from(this.report.values()).find(function(_){return _.type===c&&_.ssrc===a});return p?p.id:null},o.prototype.processVideoMediaSource=function(a,c){var p=this.report.get(a);p&&p.width&&p.height&&p.framesPerSecond&&(c.inputFrame={width:p.width,height:p.height,frameRate:p.framesPerSecond})},o.prototype.processAudioMediaSource=function(a,c){var p=this.report.get(a);p&&(c.inputLevel=p.audioLevel)},o.prototype.processVideoTrackSenderStats=function(a,c){var p=this.report.get(a);if(p){var _=0,m=Date.now(),A=this.lastVideoFramesSent.get(c.ssrc);A&&m-A.lts>=800?(_=Math.round((p.framesSent-A.count)/((m-A.lts)/1e3)),this.lastVideoFramesSent.set(c.ssrc,{count:p.framesSent,lts:m,rate:_})):A?_=A.rate:this.lastVideoFramesSent.set(c.ssrc,{count:p.framesSent,lts:m,rate:0}),c.sentFrame={width:p.frameWidth,height:p.frameHeight,frameRate:_}}},o.prototype.processVideoTrackReceiverStats=function(a,c){var p=this.report.get(a);if(p){var _=this.lastVideoFramesRecv.get(c.ssrc),m=Date.now();c.framesReceivedCount=p.framesReceived;var A=0;if(_&&m-_.lts>=800?(A=Math.round((p.framesReceived-_.count)/((m-_.lts)/1e3)),this.lastVideoFramesRecv.set(c.ssrc,{count:p.framesReceived,lts:m,rate:A})):_?A=_.rate:this.lastVideoFramesRecv.set(c.ssrc,{count:p.framesReceived,lts:m,rate:0}),c.receivedFrame={width:p.frameWidth||0,height:p.frameHeight||0,frameRate:A||0},c.decodedFrame={width:p.frameWidth||0,height:p.frameHeight||0,frameRate:c.decodeFrameRate||0},c.outputFrame={width:p.frameWidth||0,height:p.frameHeight||0,frameRate:c.decodeFrameRate||0},p.jitterBufferDelay&&p.jitterBufferEmittedCount){var v=this.lastVideoJBDelay.get(c.ssrc);this.lastVideoJBDelay.set(c.ssrc,{jitterBufferDelay:p.jitterBufferDelay,jitterBufferEmittedCount:p.jitterBufferEmittedCount}),v||(v={jitterBufferDelay:0,jitterBufferEmittedCount:0});var S=1e3*(p.jitterBufferDelay-v.jitterBufferDelay)/(p.jitterBufferEmittedCount-v.jitterBufferEmittedCount);c.jitterBufferMs=S,c.currentDelayMs=Math.round(S)}}},o.prototype.processAudioTrackSenderStats=function(a,c){var p=this.report.get(a);p&&(c.aecReturnLoss=p.echoReturnLoss||0,c.aecReturnLossEnhancement=p.echoReturnLossEnhancement||0)},o.prototype.processAudioTrackReceiverStats=function(a,c){var p=this.report.get(a);if(p){if(p.removedSamplesForAcceleration&&p.totalSamplesReceived&&(c.accelerateRate=p.removedSamplesForAcceleration/p.totalSamplesReceived),p.jitterBufferDelay&&p.jitterBufferEmittedCount){var _=this.lastAudioJBDelay.get(c.ssrc);this.lastAudioJBDelay.set(c.ssrc,{jitterBufferDelay:p.jitterBufferDelay,jitterBufferEmittedCount:p.jitterBufferEmittedCount}),_||(_={jitterBufferDelay:0,jitterBufferEmittedCount:0}),c.jitterBufferMs=Math.round(1e3*(p.jitterBufferDelay-_.jitterBufferDelay)/(p.jitterBufferEmittedCount-_.jitterBufferEmittedCount))}c.outputLevel=p.audioLevel;var A=1920;p.totalSamplesDuration&&p.totalSamplesReceived&&(A=p.totalSamplesReceived/p.totalSamplesDuration/50,c.receivedFrames=Math.round(p.totalSamplesReceived/A)),p.concealedSamples&&(c.droppedFrames=Math.round(p.concealedSamples/A))}},o.prototype.processRemoteInboundStats=function(a,c){var p=this.report.get(a);p&&(c.packetsLost=p.packetsLost,p.roundTripTime&&(c.rttMs=1e3*p.roundTripTime))},o.prototype.getCodecFromCodecStats=function(a){var c=this.report.get(a);if(!c)return"";var p=c.mimeType.match(/\/(.*)$/);return p&&p[1]?p[1]:""},o.prototype.updateSendBitrate=function(){var a=0,c=null,p=null;this.mediaBytesSent.forEach(function(m){a+=m.diffMean()}),this.mediaBytesRetransmit.forEach(function(m){c=null===c?m.diffMean():c+m.diffMean()}),this.mediaBytesTargetEncode.forEach(function(m){p=null===p?m.diffMean():p+m.diffMean()}),this._stats.bitrate={actualEncoded:8*(null!==c?a-c:a)/(this.options.updateInterval/1e3),transmit:8*a/(this.options.updateInterval/1e3)},null!==c&&(this._stats.bitrate.retransmit=8*c/(this.options.updateInterval/1e3)),null!==p&&(this._stats.bitrate.targetEncoded=8*p/(this.options.updateInterval/1e3))},o}(f4),uB=function(r){function o(){return null!==r&&r.apply(this,arguments)||this}return yv(o,r),o.prototype.updateStats=function(){return Promise.resolve()},o}(f4);function eQ(r,o,a,c){void 0===o&&(o=250),void 0===a&&(a=8),void 0===c&&(c=500);var p,_=(p=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i))&&p[0]?Number(p[0].split("/")[1]):null;return _?_<76?new kp(r,{updateInterval:o,lossRateInterval:a,freezeRateLimit:c}):new BP(r,{updateInterval:o,lossRateInterval:a,freezeRateLimit:c}):window.RTCStatsReport&&r.getStats()instanceof Promise?new BP(r,{updateInterval:o,lossRateInterval:a,freezeRateLimit:c}):new uB(r,{updateInterval:o,lossRateInterval:a,freezeRateLimit:c})}function tQ(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function nQ(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?tQ(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):tQ(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let Mz=(rr((Ai=class PQ extends sj{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(o,a){super(o,a),J(this,"store",void 0),J(this,"peerConnection",void 0),J(this,"remoteSDP",void 0),J(this,"initialOffer",void 0),J(this,"statsFilter",void 0),J(this,"useRTX",!1),J(this,"localCapabilities",void 0),J(this,"localCandidateCount",0),J(this,"allCandidatesReceived",!1),J(this,"mutex",new Il("P2PConnection-mutex")),this.store=a,this.peerConnection=new RTCPeerConnection(PQ.resolvePCConfiguration(o),{optional:[{googDscp:!0}]}),this.statsFilter=eQ(this.peerConnection,void 0,void 0,Xo()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var o=this;return F(function*(){try{const a=yield o.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=MP(a.sdp),p=QT(a.sdp,!o.useRTX,!1,["opus"]);return o.localCapabilities=p,o.initialOffer=a,nQ(nQ({},c),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:p},offerSDP:a.sdp})}catch(a){throw new Le(Te.GET_LOCAL_CONNECTION_PARAMS_FAILED,a.toString())}})()}connect(o,a,c,p,_,m){var A=this;return F(function*(){try{if(!A.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");A.remoteSDP=new $6({remoteIceParameters:o,remoteDtlsParameters:a,candidates:c,remoteRTPCapabilities:p.send,remoteSetup:_,localCapabilities:A.localCapabilities,sdkCodec:A.store.codec,cname:m});const v=A.remoteSDP.toString();yield A.peerConnection.setLocalDescription(A.initialOffer),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}})()}send(o,a){var c=this;return jT(function*(){const p=yield ss(c.mutex.lock());try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const _=o.map(O=>c.peerConnection.addTrack(O._mediaStreamTrack)),m=yield ss(c.peerConnection.createOffer()),A=Vu.exports.parse(m.sdp),v=o.map(O=>{const B=O._mediaStreamTrack,q=A.mediaDescriptions.find(z=>z.attributes.mid===B.kind);if(!q)throw new Error("Cannot extract ssrc from mediaDescription.");return function(z,te,de){const ge=z.attributes.ssrcs.filter(Me=>Me.attributes.label===te),Se=z.attributes.ssrcGroups;if(0===ge.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(Se&&ge.length>1){const Me=Se.find(dt=>-1!==dt.ssrcIds.indexOf(ge[0].ssrcId));return Me?[{ssrcId:Me.ssrcIds[0],rtx:de?Me.ssrcIds[1]:void 0}]:[{ssrcId:ge[0].ssrcId}]}return[{ssrcId:ge[0].ssrcId}]}(q,B.id,c.useRTX)});let S;try{S=yield v}catch(O){throw _.forEach(B=>{jl()&&B.replaceTrack(null),c.peerConnection.removeTrack(B)}),O}const I=c.mungSendOfferSDP(m.sdp,o);c.remoteSDP.receive(o,a,S);const R=c.remoteSDP.toString();return yield ss(c.peerConnection.setLocalDescription({type:"offer",sdp:I})),yield ss(c.applySendEncodings(_,o)),yield ss(c.peerConnection.setRemoteDescription({type:"answer",sdp:R})),o.map((O,B)=>({localSSRC:v[B],id:O._mediaStreamTrack.id}))}catch(_){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(_.toString()))}finally{p()}})()}stopSending(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const c=a.peerConnection.getSenders().filter(m=>{var A;return-1!==o.indexOf((null===(A=m.track)||void 0===A?void 0:A.id)||"")});if(c.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");c.map(m=>{jl()&&m.replaceTrack(null),a.peerConnection.removeTrack(m)});const p=yield a.peerConnection.createOffer();yield a.peerConnection.setLocalDescription(p),a.remoteSDP.stopReceiving(o);const _=a.remoteSDP.toString();yield a.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(c.toString()))}})()}receive(o,a,c,p){var _=this;return F(function*(){try{if(!_.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(o," before remoteSDP created."));const{id:m,mslabel:A}=_.remoteSDP.send(o,a,p),v=new qn((R,O)=>{const B=setTimeout(()=>{O(new Error("Cannot receive track, id: ".concat(m)))},1e4),q=z=>{const te=xi();if(("Safari"===te.name&&11===Number(te.version)||yc())&&z.track.id!==m&&z.streams[0].id===A){var de;const ge=z.streams[0].getTracks()[0];return null===(de=_.remoteSDP)||void 0===de||de.updateTrackLabel(o,m,z.track.id),_.peerConnection.removeEventListener("track",q),clearTimeout(B),void R(ge)}if(z.track.id===m)return _.peerConnection.removeEventListener("track",q),clearTimeout(B),void R(z.track)};_.peerConnection.addEventListener("track",q)}),S=_.remoteSDP.toString();yield _.peerConnection.setRemoteDescription({type:"offer",sdp:S});const I=yield _.peerConnection.createAnswer();return yield _.peerConnection.setLocalDescription(I),{track:yield v,id:m}}catch(m){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(m.toString()))}})()}stopReceiving(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");a.remoteSDP.stopSending(o);const c=a.remoteSDP.toString();yield a.peerConnection.setRemoteDescription({type:"offer",sdp:c});const p=yield a.peerConnection.createAnswer();yield a.peerConnection.setLocalDescription(p)}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(o){return F(function*(){})()}unmuteRemote(o){return F(function*(){})()}muteLocal(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=a.peerConnection.getSenders().filter(p=>{var _;return-1!==o.indexOf((null===(_=p.track)||void 0===_?void 0:_.id)||"")});if(c.length!==o.length)throw new Error("sender' length doesn't match mids' length.");c.map(p=>{if(jl()&&p.track)p.track.enabled=!1;else{const _=p.getParameters();_.encodings.forEach(m=>m.active=!1),p.setParameters(_)}})}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=a.peerConnection.getSenders().filter(m=>{var A;return-1!==o.indexOf((null===(A=m.track)||void 0===A?void 0:A.id)||"")});if(c.length!==o.length)throw new Error("Senders' length doesn't match mids' length.");c.map(function(){var m=F(function*(A){if(jl()&&A.track)A.track.enabled=!0;else{const v=A.getParameters();v.encodings.forEach(S=>S.active=!0),yield A.setParameters(v)}});return function(A){return m.apply(this,arguments)}}());const p=yield a.peerConnection.createOffer();yield a.peerConnection.setLocalDescription(p);const _=a.remoteSDP.toString();yield a.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var o=this;return F(function*(){const a=yield o.peerConnection.createOffer({iceRestart:!0});if(!a.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:MP(a.sdp).iceParameters,restartICE:(c=F(function*(p,_){return o.restartICE(a,p,_)}),function(_,m){return c.apply(this,arguments)}),restartOfferSDP:a.sdp};var c})()}close(){var o;this.peerConnection.close(),null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(o){return this.statsFilter.getVideoIsReady(o)}updateEncoderConfig(o,a){var c=this;return F(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const p=yield c.peerConnection.createOffer(),_=c.mungSendOfferSDP(p.sdp,[a]);c.remoteSDP.updateRecvMedia(a._mediaStreamTrack.kind,a);const m=c.remoteSDP.toString();yield c.peerConnection.setLocalDescription({type:"offer",sdp:_}),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:m})}catch(p){throw new Le(Te.EXCHANGE_SDP_FAILED,p.toString())}})()}updateSendParameters(o,a){var c=this;return F(function*(){const p=c.peerConnection.getSenders().filter(_=>{var m;return(null===(m=_.track)||void 0===m?void 0:m.id)===o});1===p.length&&(yield c.applySendEncodings(p,[a]))})()}setStatsRemoteVideoIsReady(o,a){this.statsFilter.setVideoIsReady2(o,a)}replaceTrack(o,a){var c=this;return F(function*(){const p=c.peerConnection.getSenders().find(_=>{var m;return(null===(m=_.track)||void 0===m?void 0:m.id)===a});p&&(yield p.replaceTrack(o._mediaStreamTrack))})()}restartICE(o,a,c){var p=this;return F(function*(){try{if(!p.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");p.remoteSDP.restartICE(a,c);const _=p.remoteSDP.toString();yield p.peerConnection.setLocalDescription(o),yield p.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(_){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(_.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var o;null===(o=this.onICEConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var o;null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=o=>{o.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,se.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,se.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},xt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(o){const a={iceServers:[],sdpSemantics:"plan-b"};return o.iceServers?a.iceServers=o.iceServers:o.turnServer&&"off"!==o.turnServer.mode&&(Si(o.turnServer.servers)?a.iceServers=o.turnServer.servers:(a.iceServers&&a.iceServers.push(...PQ.turnServerConfigToIceServers(o.turnServer.servers)),xt("USE_TURN_SERVER_OF_GATEWAY")&&a.iceServers&&o.turnServer.serversFromGateway&&a.iceServers.push(...PQ.turnServerConfigToIceServers(o.turnServer.serversFromGateway)),o.turnServer.servers.concat(o.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(a.iceTransportPolicy="relay")}))),a}static turnServerConfigToIceServers(o){const a=[];return o.forEach(c=>{c.security?c.tcpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),a}applySendEncodings(o,a){return F(function*(){try{if(!Yc().supportSetRtpSenderParameters||o.length!==a.length)return;for(let p=0;p<o.length;p++){var c;const _=o[p],m=a[p];if(!m)continue;const A={},v={};if(m instanceof Hs)switch(m._optimizationMode){case"motion":A.degradationPreference="maintain-framerate";break;case"detail":A.degradationPreference="maintain-resolution";break;default:A.degradationPreference="balanced"}if(xt("DSCP_TYPE")&&Vy()){const R=xt("DSCP_TYPE");["very-low","low","medium","high"].includes(R)&&(v.networkPriority=R)}const S=_.getParameters(),I=null===(c=S.encodings)||void 0===c?void 0:c[0];I&&Object.assign(I,v),Object.assign(S,A),yield _.setParameters(S)}}catch{se.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(o,a){const c=Vu.exports.parse(o);return a.forEach((p,_)=>{const m=p._mediaStreamTrack,A=c.mediaDescriptions.find(v=>v.attributes.mid===m.kind);A&&HT(A,p)}),Vu.exports.print(c)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=o=>{var a;null===(a=this.onFirstAudioReceived)||void 0===a||a.call(this,o)},this.statsFilter.onFirstVideoReceived=o=>{var a;null===(a=this.onFirstVideoReceived)||void 0===a||a.call(this,o)},this.statsFilter.onFirstAudioDecoded=o=>{var a;null===(a=this.onFirstAudioDecoded)||void 0===a||a.call(this,o)},this.statsFilter.onFirstVideoDecoded=(o,a,c)=>{var p;null===(p=this.onFirstVideoDecoded)||void 0===p||p.call(this,o,a,c)},this.statsFilter.onSelectedLocalCandidateChanged=(o,a)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,o,a)},this.statsFilter.onSelectedRemoteCandidateChanged=(o,a)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,o,a)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}batchReceive(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const c=a.remoteSDP.batchSend(o).map((m,A)=>{let{id:v,mslabel:S}=m;const{kind:I}=o[A];return new qn((R,O)=>{const B=setTimeout(()=>{O(new Error("Cannot receive track, id: ".concat(v)))},1e4),q=z=>{const te=xi();if("Safari"===te.name&&11===Number(te.version)&&z.track.id!==v&&z.streams[0].id===S){var de;const ge=z.streams[0].getTracks()[0];return null===(de=a.remoteSDP)||void 0===de||de.updateTrackLabel(I,v,z.track.id),a.peerConnection.removeEventListener("track",q),clearTimeout(B),void R({track:ge,id:v})}if(z.track.id===v)return a.peerConnection.removeEventListener("track",q),clearTimeout(B),void R({track:z.track,id:v})};a.peerConnection.addEventListener("track",q)})}),p=a.remoteSDP.toString();yield a.peerConnection.setRemoteDescription({type:"offer",sdp:p});const _=yield a.peerConnection.createAnswer();return yield a.peerConnection.setLocalDescription(_),yield qn.all(c)}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}getRemoteSSRC(o){if(this.remoteSDP)return this.remoteSDP.getSSRC(o)?.[0].ssrcId}}).prototype,"connect",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"connect"),Ai.prototype),rr(Ai.prototype,"stopSending",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"stopSending"),Ai.prototype),rr(Ai.prototype,"receive",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"receive"),Ai.prototype),rr(Ai.prototype,"stopReceiving",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"stopReceiving"),Ai.prototype),rr(Ai.prototype,"muteRemote",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"muteRemote"),Ai.prototype),rr(Ai.prototype,"unmuteRemote",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"unmuteRemote"),Ai.prototype),rr(Ai.prototype,"muteLocal",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"muteLocal"),Ai.prototype),rr(Ai.prototype,"unmuteLocal",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"unmuteLocal"),Ai.prototype),rr(Ai.prototype,"reEstablish",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"reEstablish"),Ai.prototype),rr(Ai.prototype,"close",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"close"),Ai.prototype),rr(Ai.prototype,"updateEncoderConfig",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"updateEncoderConfig"),Ai.prototype),rr(Ai.prototype,"updateSendParameters",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"updateSendParameters"),Ai.prototype),rr(Ai.prototype,"replaceTrack",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"replaceTrack"),Ai.prototype),rr(Ai.prototype,"restartICE",[Pp],Object.getOwnPropertyDescriptor(Ai.prototype,"restartICE"),Ai.prototype),Ai);function Pp(r,o,a){const c=r[o];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return a.value=F(function*(){const p=this.mutex,_=yield p.lock("Locking from P2PConnection.".concat(o));try{for(var m=arguments.length,A=new Array(m),v=0;v<m;v++)A[v]=arguments[v];return yield c.apply(this,A)}finally{_()}}),a}var FP;let uW=xa("RemoteSDP")(FP=class{get localCapabilities(){return nc(this._localCapabilities)}get rtpCapabilities(){return nc(this._rtpCapabilities)}get candidates(){return nc(this._candidates)}get iceParameters(){return nc(this._iceParameters)}get dtlsParameters(){return nc(this._dtlsParameters)}constructor(r){J(this,"sessionDesc",void 0),J(this,"_localCapabilities",void 0),J(this,"_rtpCapabilities",void 0),J(this,"_candidates",void 0),J(this,"_iceParameters",void 0),J(this,"_dtlsParameters",void 0),J(this,"setup",void 0),J(this,"currentMidIndex",void 0),J(this,"cname",void 0),J(this,"firefoxSsrcMidMap",new Map),r=nc(r);const{remoteIceParameters:o,remoteDtlsParameters:a,candidates:c,remoteRTPCapabilities:p,remoteSetup:_,localCapabilities:m,cname:A}=r,v=Vu.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=p,this._candidates=c,this._iceParameters=o,this._dtlsParameters=a,this._localCapabilities=m,this.setup=_,this.cname=A;const S=this.rtpCapabilities.send;for(const I of v.mediaDescriptions){if(I.attributes.iceUfrag=o.iceUfrag,I.attributes.icePwd=o.icePwd,I.attributes.fingerprints=a.fingerprints,I.attributes.candidates=c,I.attributes.setup=_,"video"===I.media.mediaType&&(I.media.fmts=S.videoCodecs.map(R=>R.payloadType.toString(10)),I.attributes.payloads=S.videoCodecs,I.attributes.extmaps=S.videoExtensions,xt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:R,ssrcGroups:O}=Pd([{ssrcId:4e4,rtx:xt("USE_RTX")?40001:void 0}],this.cname);I.attributes.ssrcs=R,I.attributes.ssrcGroups=O}if("audio"===I.media.mediaType&&(I.media.fmts=S.audioCodecs.map(R=>R.payloadType.toString(10)),I.attributes.payloads=S.audioCodecs,I.attributes.extmaps=S.audioExtensions,xt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:R,ssrcGroups:O}=Pd([{ssrcId:2e4}],this.cname);I.attributes.ssrcs=R,I.attributes.ssrcGroups=O}}this.sessionDesc=v,this.currentMidIndex=v.mediaDescriptions.length-1}preloadRemoteMedia(){const r=xt("PRELOAD_MEDIA_COUNT");$t("debug",this,"preloadRemoteMedia",r);const o=this.candidates,a=this.dtlsParameters,c=this.iceParameters,p=this.rtpCapabilities.send;for(let _=1;_<r;_++){const m=2*_+2e4,A=2*_+4e4,{ssrcs:v,ssrcGroups:S}=Pd([{ssrcId:m}],this.cname),{ssrcs:I,ssrcGroups:R}=Pd([{ssrcId:A,rtx:xt("USE_RTX")?A+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.videoCodecs.map(O=>O.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:o,extmaps:p.videoExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:I,ssrcGroups:R,rtcpFeedbackWildcards:[],payloads:p.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*_)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.audioCodecs.map(O=>O.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:o,extmaps:p.audioExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:v,ssrcGroups:S,rtcpFeedbackWildcards:[],payloads:p.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*_+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Vu.exports.print(this.sessionDesc)}send(r,o,a,c){const{ssrcs:p,ssrcGroups:_}=Pd(o,this.cname,a),m=this.findPreloadMediaDesc(p);if(m){if(Xo()&&this.firefoxSsrcMidMap.set(p[0].ssrcId,m.attributes.mid),c&&(c.tcc||c.remb)){const A=this.sessionDesc.mediaDescriptions.indexOf(m);return this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(m,c),{mid:m.attributes.mid,needExchangeSDP:!0}}return{mid:m.attributes.mid,needExchangeSDP:!1}}{const A=this.findAvailableMediaIndex(r,p);if(jl()||ck()){if(-1!==A&&1!==A){const v=nc(this.sessionDesc.mediaDescriptions[A]);return v.attributes.direction="sendonly",v.attributes.ssrcs=p,v.attributes.ssrcGroups=_,this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(v,c),{mid:v.attributes.mid,needExchangeSDP:!0}}{const v=this.createOrRecycleSendMedia(r,p,_,"sendonly",c);return this.updateBundleMids(),{mid:v.attributes.mid,needExchangeSDP:!0}}}if(-1!==A){const v=nc(this.sessionDesc.mediaDescriptions[A]);return v.attributes.direction="sendonly",v.attributes.ssrcs=p,v.attributes.ssrcGroups=_,this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(v,c),Xo()&&this.firefoxSsrcMidMap.set(p[0].ssrcId,v.attributes.mid),{mid:v.attributes.mid,needExchangeSDP:!0}}{const v=this.createOrRecycleSendMedia(r,p,_,"sendonly",c);return this.updateBundleMids(),Xo()&&this.firefoxSsrcMidMap.set(p[0].ssrcId,v.attributes.mid),{mid:v.attributes.mid,needExchangeSDP:!0}}}}batchSend(r){const o=r.map(p=>{let{kind:_,ssrcMsg:m,mslabel:A}=p;return this.send(_,m,A)}),a=[];let c=!1;return o.forEach(p=>{let{mid:_,needExchangeSDP:m}=p;m&&(c=!0),a.push(_)}),{mids:a,needExchangeSDP:c}}stopSending(r){const o=this.sessionDesc.mediaDescriptions.filter(a=>a.attributes.mid&&-1!==r.indexOf(a.attributes.mid));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");o.forEach(a=>{"0"===a.attributes.mid||Xo()||jl()||ck()?a.attributes.ssrcs=[]:(a.attributes.ssrcs=[],a.attributes.direction="inactive",a.media.port="0")}),this.updateBundleMids()}mute(r){const o=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}muteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(a=>r.includes(a.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(a=>{a.attributes.direction="inactive"})}unmuteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(a=>r.includes(a.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(a=>{a.attributes.direction="recvonly"})}receive(r,o,a,c){r.forEach((p,_)=>{this.createOrRecycleRecvMedia(p,[],"recvonly",o,a,c[_])}),this.updateBundleMids()}stopReceiving(r){const o=this.sessionDesc.mediaDescriptions.filter(a=>-1!==r.indexOf(a.attributes.mid));if(o.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");o.forEach(a=>{a.media.port="0",a.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(r,o){r=nc(r),o=nc(o),this._iceParameters=r,this._candidates=o,this.sessionDesc.mediaDescriptions.forEach(a=>{a.attributes.iceUfrag=r.iceUfrag,a.attributes.icePwd=r.icePwd,a.attributes.candidates=this.candidates})}predictReceivingMids(r){const o=[];for(let a=0;a<r;a++)o.push((this.currentMidIndex+a+1).toString(10));return o}findAvailableMediaIndex(r,o){return this.sessionDesc.mediaDescriptions.findIndex(a=>{const c=a.media.mediaType===r&&"0"!==a.media.port&&("sendonly"===a.attributes.direction||"sendrecv"===a.attributes.direction)&&0===a.attributes.ssrcs.length;if(Xo()){if(c){const p=this.firefoxSsrcMidMap.get(o[0].ssrcId);return!(p||"0"!==a.attributes.mid&&"1"!==a.attributes.mid)||!(!p||p!==a.attributes.mid)}return!1}return c})}createOrRecycleRecvMedia(r,o,a,c,p,_){const m=r._mediaStreamTrack.kind,A=this.rtpCapabilities.recv,v=this.localCapabilities.send;let S=[];if(m===Xr.VIDEO){var I,R;if(xt("H264_PROFILE_LEVEL_ID")&&"h264"===c&&(S=A.videoCodecs.filter(te=>{var de,ge;return((null===(de=te.rtpMap)||void 0===de?void 0:de.encodingName.toLowerCase())||"").includes(c)&&(null==te||null===(ge=te.fmtp)||void 0===ge?void 0:ge.parameters["profile-level-id"])===xt("H264_PROFILE_LEVEL_ID")})),!S||0===(null===(I=S)||void 0===I?void 0:I.length)){const te=v.videoCodecs.filter(de=>{var ge;return((null===(ge=de.rtpMap)||void 0===ge?void 0:ge.encodingName.toLowerCase())||"").includes(c)});0!==te.length&&(S=A.videoCodecs.filter(de=>te.some(ge=>ge.payloadType===de.payloadType)))}if(xt("USE_RTX")){const te=S.map(ge=>ge.payloadType.toString()),de=A.videoCodecs.filter(ge=>{var Se,Me;return"rtx"===(null===(Se=ge.rtpMap)||void 0===Se?void 0:Se.encodingName)&&te.includes((null===(Me=ge.fmtp)||void 0===Me?void 0:Me.parameters.apt)||"")});S=[...S,...de]}0===S.length&&(se.warning("codec ".concat(c," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(R=A.videoCodecs[0].rtpMap)||void 0===R?void 0:R.encodingName)),S=A.videoCodecs)}else S=A.audioCodecs.filter(te=>{var de;return((null===(de=te.rtpMap)||void 0===de?void 0:de.encodingName.toLowerCase())||"").includes(p)}),0===S.length&&(se.warning("codec ".concat(p," not included in rtpCapabilities, fallback to opus")),S=A.audioCodecs.filter(te=>{var de;return((null===(de=te.rtpMap)||void 0===de?void 0:de.encodingName.toLowerCase())||"").includes("opus")}));const O=m===Xr.VIDEO?A.videoExtensions:A.audioExtensions;this.currentMidIndex+=1;const B="".concat(this.currentMidIndex);let q={media:{mediaType:m,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:S.map(te=>te.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:O,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:S,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:a,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(B)}};q=this.mungRecvMediaDsec(q,r,_);const z=this.findFirstClosedMedia(m);if(z){const te=this.sessionDesc.mediaDescriptions.indexOf(z);this.sessionDesc.mediaDescriptions[te]=q}else this.sessionDesc.mediaDescriptions.push(q);return q}createOrRecycleSendMedia(r,o,a,c,p){const _=this.rtpCapabilities.send,m=r===Xr.VIDEO?_.videoCodecs:_.audioCodecs,A=r===Xr.VIDEO?_.videoExtensions:_.audioExtensions;this.currentMidIndex+=1;const v="".concat(this.currentMidIndex);let S={media:{mediaType:r,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:m.map(R=>R.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:A,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:a,rtcpFeedbackWildcards:[],payloads:m,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:c,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(v)}};S=this.mungSendMediaDesc(S,p);const I=this.findFirstClosedMedia(r);if(I){const R=this.sessionDesc.mediaDescriptions.indexOf(I);this.sessionDesc.mediaDescriptions[R]=S}else this.sessionDesc.mediaDescriptions.push(S);return S}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>"0"!==r.media.port).map(r=>r.attributes.mid)}mungRecvMediaDsec(r,o,a){const c=nc(r);return NP(c),HT(c,o),q6(c,o),function(p){if("video"!==p.media.mediaType)return;const _=xi();if(_.name!==bi.SAFARI&&_.os!==js.IOS)return;const m=p.attributes.extmaps.findIndex(A=>/video-orientation/g.test(A.extensionName));-1!==m&&p.attributes.extmaps.splice(m,1)}(c),GT(c,a,this.localCapabilities.send),c}mungSendMediaDesc(r,o){const a=nc(r);return GT(a,o,this.localCapabilities.recv),a}updateRecvMedia(r,o){const a=this.sessionDesc.mediaDescriptions.findIndex(c=>c.attributes.mid===r);if(-1!==a){const c=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],o);this.sessionDesc.mediaDescriptions[a]=c}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(o=>Xo()?"0"===o.media.port&&o.media.mediaType===r:"0"===o.media.port)}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(o=>{var a,c;return(null===(a=o.attributes)||void 0===a||null===(c=a.ssrcs[0])||void 0===c?void 0:c.ssrcId)===r[0].ssrcId})}getSSRC(r){var o;return null===(o=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r))||void 0===o?void 0:o.attributes.ssrcs}})||FP;var UP,di;function m4(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function g4(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?m4(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):m4(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let dW=xa("P2PConnection","store.p2pId")((rr((di=class MQ extends sj{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(o,a){super(o,a),J(this,"store",void 0),J(this,"peerConnection",void 0),J(this,"remoteSDP",void 0),J(this,"initialOffer",void 0),J(this,"transportEventReceiver",void 0),J(this,"statsFilter",void 0),J(this,"useRTX",xt("USE_RTX")),J(this,"localCapabilities",void 0),J(this,"localCandidateCount",0),J(this,"allCandidatesReceived",!1),J(this,"mutex",new Il("P2PConnection-mutex")),this.store=a,this.peerConnection=new RTCPeerConnection(MQ.resolvePCConfiguration(o),{optional:[{googDscp:!0}]}),this.statsFilter=eQ(this.peerConnection,void 0,void 0,Xo()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var o=this;return F(function*(){try{o.peerConnection.addTransceiver("video",{direction:"recvonly"}),o.peerConnection.addTransceiver("audio",{direction:"recvonly"});const a=yield o.peerConnection.createOffer();if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=MP(a.sdp),p=yield(_=F(function*(m,A,v,S){const I=new RTCPeerConnection;I.addTransceiver("video",{direction:"sendonly"}),I.addTransceiver("audio",{direction:"sendonly"}),I.addTransceiver("video",{direction:"recvonly"}),I.addTransceiver("audio",{direction:"recvonly"});const R=(yield I.createOffer()).sdp,O=QT(R,m,A,v,S,"sendonly"),B=QT(R,m,A,v,S,"recvonly"),q={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},z={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},te={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(xP(O,B,"videoExtensions",q,z,te),xP(O,B,"videoCodecs",q,z,te),xP(O,B,"audioExtensions",q,z,te),xP(O,B,"audioCodecs",q,z,te),xt("RAISE_H264_BASELINE_PRIORITY")){const de=te.videoCodecs.findIndex(ge=>{var Se,Me;return"h264"===(null===(Se=ge.rtpMap)||void 0===Se?void 0:Se.encodingName.toLocaleLowerCase())&&"42001f"===(null===(Me=ge.fmtp)||void 0===Me?void 0:Me.parameters["profile-level-id"])});if(-1!==de){const ge=te.videoCodecs.findIndex(Se=>{var Me;return"h264"===(null===(Me=Se.rtpMap)||void 0===Me?void 0:Me.encodingName.toLocaleLowerCase())});if(ge<de){se.debug("raising H264 baseline profile priority");const Se=te.videoCodecs[de];te.videoCodecs.splice(de,1),te.videoCodecs.splice(ge,0,Se)}-1!==ge&&(z.videoCodecs=z.videoCodecs.filter(Se=>{var Me,dt;return!("h264"===(null===(Me=Se.rtpMap)||void 0===Me?void 0:Me.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(dt=Se.fmtp)||void 0===dt?void 0:dt.parameters["profile-level-id"]))})),-1!==ge&&xt("FILTER_SEND_H264_BASELINE")&&(q.videoCodecs=q.videoCodecs.filter(Se=>{var Me,dt;return!("h264"===(null===(Me=Se.rtpMap)||void 0===Me?void 0:Me.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(dt=Se.fmtp)||void 0===dt?void 0:dt.parameters["profile-level-id"]))}))}}try{I.close()}catch{}return{send:q,recv:z,sendrecv:te}}),function(m,A,v,S){return _.apply(this,arguments)})(!o.useRTX,!1);return o.localCapabilities=Y6(p),o.initialOffer=a,g4(g4({},c),{},{rtpCapabilities:p,offerSDP:a.sdp})}catch(a){throw new Le(Te.GET_LOCAL_CONNECTION_PARAMS_FAILED,a.toString())}var _})()}connect(o,a,c,p,_,m){var A=this;return F(function*(){try{if(!A.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");A.remoteSDP=new uW({remoteIceParameters:o,remoteDtlsParameters:a,candidates:c,remoteRTPCapabilities:p,remoteSetup:_,localCapabilities:A.localCapabilities,cname:m});const v=A.remoteSDP.toString(),S=A.logSDPExchange(A.initialOffer.sdp||"","offer","local","connect");yield A.peerConnection.setLocalDescription(A.initialOffer),S?.(v),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:v});const I=A.peerConnection.getTransceivers()[0];if(null!=I&&I.receiver&&A.tryBindTransportEvents(I.receiver),xt("PRELOAD_MEDIA_COUNT")>0){A.remoteSDP.preloadRemoteMedia();const R=A.remoteSDP.toString();yield A.peerConnection.setRemoteDescription({type:"offer",sdp:R});const O=yield A.peerConnection.createAnswer();yield A.peerConnection.setLocalDescription(O)}}catch(v){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}})()}send(o,a,c){var p=this;return jT(function*(){const _=yield ss(p.mutex.lock());try{if(!p.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const m=[];o.forEach(z=>{const te=p.peerConnection.addTransceiver(z._mediaStreamTrack,{direction:"sendonly"});m.push(te)}),Xo()&&!0===xt("SIMULCAST")&&(jn("debug",p,"apply simulcast for firefox"),yield ss(p.applySimulcastForFirefox(m,o)));const A=yield ss(p.peerConnection.createOffer()),v=p.remoteSDP.predictReceivingMids(o.length),S=p.mungSendOfferSDP(A.sdp,o,v),I=Vu.exports.parse(S),R=v.map(z=>{const te=I.mediaDescriptions.find(de=>de.attributes.mid===z);if(!te)throw new Error("Cannot extract ssrc from mediaDescription.");return function(de,ge){const Se=[],Me=de.attributes.ssrcGroups.filter(Mt=>"FID"===Mt.semantic),dt=de.attributes.ssrcGroups.find(Mt=>"SIM"===Mt.semantic),kt=de.attributes.ssrcs;if(dt)dt.ssrcIds.forEach(Mt=>{var Lt;const Vn=null===(Lt=Me.find(wn=>wn.ssrcIds[0]===Mt))||void 0===Lt?void 0:Lt.ssrcIds[1];Se.push({ssrcId:Mt,rtx:ge?Vn:void 0})});else if(Me.length>0){const Lt=Me[0].ssrcIds[1];Se.push({ssrcId:Me[0].ssrcIds[0],rtx:ge?Lt:void 0})}else{if(0===kt.length)throw new Error("No ssrcs found on local media description.");Se.push({ssrcId:kt[0].ssrcId})}return Se}(te,p.useRTX)});let O;try{O=yield R}catch(z){O=[],p.remoteSDP.receive(o,a,c,O);const te=p.remoteSDP.toString();throw yield ss(p.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield ss(p.peerConnection.setRemoteDescription({type:"answer",sdp:te})),yield ss(p.stopSending(v,!0)),z}p.remoteSDP.receive(o,a,c,O);const B=p.remoteSDP.toString(),q=p.logSDPExchange(S,"offer","local","send");return yield ss(p.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield ss(p.applySimulcastEncodings(m,o)),yield ss(p.applySendEncodings(m,o)),q?.(B),yield ss(p.peerConnection.setRemoteDescription({type:"answer",sdp:B})),m.map((z,te)=>({localSSRC:R[te],id:v[te],transceiver:z}))}catch(m){throw m instanceof Le?m:new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(m.toString()))}finally{_()}})()}stopSending(o,a){var c=this;return F(function*(){const p=a?void 0:yield c.mutex.lock("From P2PConnection.stopSending");try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const _=c.peerConnection.getTransceivers().filter(S=>-1!==o.indexOf(S.mid));if(_.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");_.map(S=>{var I;S.direction="inactive",null===(I=S.stop)||void 0===I||I.call(S)});const m=yield c.peerConnection.createOffer(),A=c.logSDPExchange(m.sdp||"","offer","local","stopSending");yield c.peerConnection.setLocalDescription(m),c.remoteSDP.stopReceiving(o);const v=c.remoteSDP.toString();A?.(v),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(_){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(_.toString()))}finally{p&&p()}})()}receive(o,a,c,p){var _=this;return F(function*(){try{if(!_.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(o," before remoteSDP created."));const{mid:m,needExchangeSDP:A}=_.remoteSDP.send(o,a,c,p);if(A){const S=_.remoteSDP.toString(),I=_.logSDPExchange(S,"offer","remote","receive");yield _.peerConnection.setRemoteDescription({type:"offer",sdp:S});const R=yield _.peerConnection.createAnswer();I?.(R.sdp||""),yield _.peerConnection.setLocalDescription(R),se.debug("[P2PConnection] receive ".concat(o," by exchanging SDP."))}else se.debug("[P2PConnection] receive ".concat(o," no need to exchange SDP."));const v=_.peerConnection.getTransceivers().find(S=>S.mid===m);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:m}}catch(m){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(m.toString()))}})()}batchReceive(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:c,needExchangeSDP:p}=a.remoteSDP.batchSend(o);if(p){const _=a.remoteSDP.toString(),m=a.logSDPExchange(_,"offer","remote","receive");yield a.peerConnection.setRemoteDescription({type:"offer",sdp:_});const A=yield a.peerConnection.createAnswer();m?.(A.sdp||""),yield a.peerConnection.setLocalDescription(A),se.debug("[P2PConnection] batchReceive by exchanging SDP.")}else se.debug("[P2PConnection] batchReceive no need to exchange SDP.");return c.map(_=>{const m=a.peerConnection.getTransceivers().find(A=>A.mid===_);if(!m)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:m.receiver.track,id:_}})}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}stopReceiving(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");a.remoteSDP.stopSending(o);const c=a.remoteSDP.toString(),p=a.logSDPExchange(c,"offer","remote","stopReceiving");yield a.peerConnection.setRemoteDescription({type:"offer",sdp:c});const _=yield a.peerConnection.createAnswer();p?.(_.sdp||""),yield a.peerConnection.setLocalDescription(_)}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(o," before remote SDP created."));a.remoteSDP.mute(o);const c=a.remoteSDP.toString(),p=a.logSDPExchange(c,"offer","remote","muteRemote");yield a.peerConnection.setRemoteDescription({type:"offer",sdp:c});const _=yield a.peerConnection.createAnswer();p?.(_.sdp||""),yield a.peerConnection.setLocalDescription(_)}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(c.toString()))}})()}unmuteRemote(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(o," before remote SDP created."));a.remoteSDP.unmute(o);const c=a.remoteSDP.toString(),p=a.logSDPExchange(c,"offer","remote","unmuteRemote");yield a.peerConnection.setRemoteDescription({type:"offer",sdp:c});const _=yield a.peerConnection.createAnswer();p?.(_.sdp||""),yield a.peerConnection.setLocalDescription(_)}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(c.toString()))}})()}muteLocal(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=a.peerConnection.getTransceivers().filter(A=>A.mid&&-1!==o.indexOf(A.mid));if(c.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(A=>{A.direction="inactive"});const p=yield a.peerConnection.createOffer(),_=a.logSDPExchange(p.sdp||"","offer","local","muteLocal");yield a.peerConnection.setLocalDescription(p),a.remoteSDP.muteRemote(o);const m=a.remoteSDP.toString();_?.(m),yield a.peerConnection.setRemoteDescription({type:"answer",sdp:m})}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(o){var a=this;return F(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=a.peerConnection.getTransceivers().filter(A=>A.mid&&-1!==o.indexOf(A.mid));if(c.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(function(){var A=F(function*(v,S){v.direction="sendonly"});return function(v,S){return A.apply(this,arguments)}}());const p=yield a.peerConnection.createOffer(),_=a.logSDPExchange(p.sdp||"","offer","local","unmuteLocal");yield a.peerConnection.setLocalDescription(p),a.remoteSDP.unmuteRemote(o);const m=a.remoteSDP.toString();_?.(m),yield a.peerConnection.setRemoteDescription({type:"answer",sdp:m})}catch(c){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var o=this;return F(function*(){const a=yield o.peerConnection.createOffer({iceRestart:!0});if(!a.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:MP(a.sdp).iceParameters,restartICE:(c=F(function*(p,_){return o.restartICE(a,p,_)}),function(_,m){return c.apply(this,arguments)}),restartOfferSDP:a.sdp};var c})()}close(){var o;this.peerConnection.close(),null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(o){return this.statsFilter.getVideoIsReady(o)}updateEncoderConfig(o,a){var c=this;return F(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const p=yield c.peerConnection.createOffer(),_=c.mungSendOfferSDP(p.sdp,[a],[o]);c.remoteSDP.updateRecvMedia(o,a);const m=c.remoteSDP.toString(),A=c.logSDPExchange(_,"offer","local","updateEncoderConfig");yield c.peerConnection.setLocalDescription({type:"offer",sdp:_}),A?.(m),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:m})}catch(p){throw new Le(Te.EXCHANGE_SDP_FAILED,p.toString())}})()}updateSendParameters(o,a){var c=this;return F(function*(){const p=c.peerConnection.getTransceivers().filter(_=>_.mid===o);1===p.length&&(c.isVP8Simulcast(a)?Xo()||(yield c.applySimulcastEncodings(p,[a])):yield c.applySendEncodings(p,[a]))})()}setStatsRemoteVideoIsReady(o,a){this.statsFilter.setVideoIsReady2(o,a)}replaceTrack(o,a){var c=this;return F(function*(){const p=c.peerConnection.getTransceivers().find(_=>_.mid===a);p&&(yield p.sender.replaceTrack(o._mediaStreamTrack))})()}restartICE(o,a,c){var p=this;return F(function*(){try{if(!p.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");p.remoteSDP.restartICE(a,c);const _=p.remoteSDP.toString(),m=p.logSDPExchange(o.sdp||"","offer","local","restartICE");yield p.peerConnection.setLocalDescription(o),m?.(_),yield p.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(_){throw new Le(Te.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(_.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var o;null===(o=this.onICEConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var o;null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=o=>{o.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,se.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,se.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},xt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(o){const a={iceServers:[]};return o.iceServers?a.iceServers=o.iceServers:o.turnServer&&"off"!==o.turnServer.mode&&(Si(o.turnServer.servers)?a.iceServers=o.turnServer.servers:(a.iceServers&&a.iceServers.push(...MQ.turnServerConfigToIceServers(o.turnServer.servers)),xt("USE_TURN_SERVER_OF_GATEWAY")&&a.iceServers&&o.turnServer.serversFromGateway&&a.iceServers.push(...MQ.turnServerConfigToIceServers(o.turnServer.serversFromGateway)),o.turnServer.servers.concat(o.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(a.iceTransportPolicy="relay")}))),a}static turnServerConfigToIceServers(o){const a=[];return o.forEach(c=>{c.security?c.tcpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(AL(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),a}tryBindTransportEvents(o){o.transport&&(this.transportEventReceiver=o,o.transport.onstatechange=()=>{var a,c;null!==(a=o.transport)&&void 0!==a&&a.state&&(null===(c=this.onDTLSTransportStateChange)||void 0===c||c.call(this,o.transport.state))},o.transport.onerror=a=>{var c;null===(c=this.onDTLSTransportError)||void 0===c||c.call(this,a.error)},o.transport.iceTransport&&(o.transport.iceTransport.onstatechange=()=>{var a,c,p;null!==(a=o.transport)&&void 0!==a&&a.iceTransport.state&&(null===(c=this.onICETransportStateChange)||void 0===c||c.call(this,null===(p=o.transport)||void 0===p?void 0:p.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}applySendEncodings(o,a){var c=this;return F(function*(){try{if(!Yc().supportSetRtpSenderParameters||o.length!==a.length)return;for(let I=0;I<o.length;I++){const R=o[I],O=a[I];if(O&&O instanceof Hs){var p,_;if(c.isVP8Simulcast(O))continue;const B={},q={};switch(O._optimizationMode){case"motion":B.degradationPreference="maintain-framerate";break;case"detail":B.degradationPreference="maintain-resolution";break;default:B.degradationPreference="balanced"}var m,A,v,S;if(null!==(p=O._encoderConfig)&&void 0!==p&&p.bitrateMax&&(q.maxBitrate=1e3*(null===(m=O._encoderConfig)||void 0===m?void 0:m.bitrateMax)),O._hints.includes(qc.LOW_STREAM)&&(null!==(A=O._encoderConfig)&&void 0!==A&&A.frameRate&&(q.maxFramerate=Zy(O._encoderConfig.frameRate)),null!==(v=O._encoderConfig)&&void 0!==v&&v.scaleResolutionDownBy&&(null===(S=O._encoderConfig)||void 0===S?void 0:S.scaleResolutionDownBy)>1&&(q.scaleResolutionDownBy=O._encoderConfig.scaleResolutionDownBy)),xt("DSCP_TYPE")&&Vy()){const de=xt("DSCP_TYPE");["very-low","low","medium","high"].includes(de)&&(q.networkPriority=de)}const z=R.sender.getParameters(),te=null===(_=z.encodings)||void 0===_?void 0:_[0];Xo()&&!te&&(B.encodings=[q]),te&&Object.assign(te,q),Object.assign(z,B),yield R.sender.setParameters(z)}}}catch{se.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(o,a,c){const p=Vu.exports.parse(o);return a.forEach((_,m)=>{const A=c[m],v=p.mediaDescriptions.find(S=>S.attributes.mid===A);v&&(HT(v,_),function(S,I,R){if(Xo()||"video"!==S.media.mediaType||!(I instanceof Hs)||"vp9"!==R&&"vp8"!==R||"vp8"===R&&!xt("SIMULCAST")||void 0===I._scalabiltyMode||I._scalabiltyMode.numSpatialLayers<=1)return;const O="vp8"===R?2:I._scalabiltyMode.numSpatialLayers,B=S.attributes.ssrcs[0],q=S.attributes.ssrcGroups.find(te=>"FID"===te.semantic&&te.ssrcIds[0]===B.ssrcId),z={semantic:"SIM",ssrcIds:[B.ssrcId]};for(let te=1;te<O;te++)S.attributes.ssrcs.push({ssrcId:B.ssrcId+te,attributes:nc(B.attributes)}),z.ssrcIds.push(B.ssrcId+te),q&&(S.attributes.ssrcs.push({ssrcId:q.ssrcIds[1]+te,attributes:nc(B.attributes)}),S.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[B.ssrcId+te,q.ssrcIds[1]+te]}));S.attributes.ssrcGroups.unshift(z)}(v,_,this.store.codec))}),Vu.exports.print(p)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=o=>{var a;null===(a=this.onFirstAudioReceived)||void 0===a||a.call(this,o)},this.statsFilter.onFirstVideoReceived=o=>{var a;null===(a=this.onFirstVideoReceived)||void 0===a||a.call(this,o)},this.statsFilter.onFirstAudioDecoded=o=>{var a;null===(a=this.onFirstAudioDecoded)||void 0===a||a.call(this,o)},this.statsFilter.onFirstVideoDecoded=(o,a,c)=>{var p;null===(p=this.onFirstVideoDecoded)||void 0===p||p.call(this,o,a,c)},this.statsFilter.onSelectedLocalCandidateChanged=(o,a)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,o,a)},this.statsFilter.onSelectedRemoteCandidateChanged=(o,a)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,o,a)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}applySimulcastForFirefox(o,a){var c=this;return F(function*(){if(o.length===a.length)for(let v=0;v<o.length;v++){var p,_,m,A;const S=o[v],I=a[v];if(I instanceof Hs&&!I._hints.includes(qc.LOW_STREAM)&&null!==(p=I._encoderConfig)&&void 0!==p&&p.bitrateMax&&(null===(_=I._encoderConfig)||void 0===_?void 0:_.bitrateMax)>200&&null!==(m=I._scalabiltyMode)&&void 0!==m&&m.numSpatialLayers&&(null===(A=I._scalabiltyMode)||void 0===A?void 0:A.numSpatialLayers)>1&&"vp8"===c.store.codec){const R={},O={high:1e3*(I._encoderConfig.bitrateMax-50),medium:5e4};R.encodings=[{rid:"m",active:!0,maxBitrate:O.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:O.high}];const B=S.sender.getParameters();yield S.sender.setParameters(Object.assign(B,R))}}})()}applySimulcastEncodings(o,a){var c=this;return F(function*(){if(!Xo()&&o.length===a.length)for(let p=0;p<o.length;p++){const _=a[p];if(_ instanceof Hs&&c.isVP8Simulcast(_)){const m=o[p],A={},v={high:1e3*(_._encoderConfig.bitrateMax-50),medium:5e4};A.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const S=m.sender.getParameters();yield m.sender.setParameters(Object.assign(S,A))}}})()}isVP8Simulcast(o){var a,c,p,_;return!!(o instanceof Hs&&xt("SIMULCAST")&&"vp8"===this.store.codec&&!o._hints.includes(qc.LOW_STREAM)&&null!==(a=o._encoderConfig)&&void 0!==a&&a.bitrateMax&&(null===(c=o._encoderConfig)||void 0===c?void 0:c.bitrateMax)>200&&null!==(p=o._scalabiltyMode)&&void 0!==p&&p.numSpatialLayers&&(null===(_=o._scalabiltyMode)||void 0===_?void 0:_.numSpatialLayers)>1)}logSDPExchange(o,a,c,p){if(xt("SDP_LOGGING"))return se.upload("exchanging ".concat(c," ").concat(a," SDP during P2PConnection.").concat(p,"\n"),o),"offer"===a?_=>{this.logSDPExchange(_,"answer","local"===c?"remote":"local",p)}:void 0}getRemoteSSRC(o){if(this.remoteSDP)return this.remoteSDP.getSSRC(o)?.[0].ssrcId}}).prototype,"connect",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"connect"),di.prototype),rr(di.prototype,"receive",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"receive"),di.prototype),rr(di.prototype,"batchReceive",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"batchReceive"),di.prototype),rr(di.prototype,"stopReceiving",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"stopReceiving"),di.prototype),rr(di.prototype,"muteRemote",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"muteRemote"),di.prototype),rr(di.prototype,"unmuteRemote",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"unmuteRemote"),di.prototype),rr(di.prototype,"muteLocal",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"muteLocal"),di.prototype),rr(di.prototype,"unmuteLocal",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"unmuteLocal"),di.prototype),rr(di.prototype,"reEstablish",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"reEstablish"),di.prototype),rr(di.prototype,"close",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"close"),di.prototype),rr(di.prototype,"updateEncoderConfig",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"updateEncoderConfig"),di.prototype),rr(di.prototype,"updateSendParameters",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"updateSendParameters"),di.prototype),rr(di.prototype,"replaceTrack",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"replaceTrack"),di.prototype),rr(di.prototype,"restartICE",[Jl],Object.getOwnPropertyDescriptor(di.prototype,"restartICE"),di.prototype),UP=di))||UP;function Jl(r,o,a){const c=r[o];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return a.value=F(function*(){const p=this.mutex,_=yield p.lock("From P2PConnection.".concat(o));try{for(var m=arguments.length,A=new Array(m),v=0;v<m;v++)A[v]=arguments[v];return yield c.apply(this,A)}finally{_()}}),a}function _4(r,o){let a=document.createElement("video"),c=document.createElement("canvas");a.setAttribute("style","display:none"),c.setAttribute("style","display:none"),a.setAttribute("muted",""),a.muted=!0,a.setAttribute("autoplay",""),a.autoplay=!0,a.setAttribute("playsinline",""),c.width=Zy(o.width),c.height=Zy(o.height);const p=Zy(o.framerate||15);document.body.append(a),document.body.append(c);let _=r._mediaStreamTrack;a.srcObject=new MediaStream([_]),a.play();const m=c.getContext("2d");if(!m)throw new Le(Te.UNEXPECTED_ERROR,"can not get canvas context");const A=Yc(),v=c.captureStream(A.supportRequestFrame?0:p).getVideoTracks()[0],S=_5(()=>(()=>{if(a.paused&&a.play(),a.videoHeight>2&&a.videoWidth>2){const B=c.width*(a.videoHeight/a.videoWidth);Math.abs(B-c.height)>=2&&(se.debug("adjust low stream resolution","".concat(c.width,"x").concat(c.height," -> ").concat(c.width,"x").concat(B)),c.height=B)}m.drawImage(a,0,0,c.width,c.height),v.requestFrame&&v.requestFrame(),_!==r._mediaStreamTrack&&(_=r._mediaStreamTrack,a.srcObject=new MediaStream([_]))})(),p),I=v.stop;return v.stop=()=>{I.call(v),S(),a&&(a.remove(),a=null),c&&(c.width=0,c.remove(),c=null),se.debug("clean low stream renderer")},v}var iQ,oQ;function sQ(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function pB(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?sQ(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):sQ(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class aQ extends h7{getUserId(){return this._userId}constructor(o,a,c,p){super(o,"track-".concat(o.kind,"-").concat(a,"-").concat(p.clientId,"_").concat(_s(5,""))),J(this,"_userId",void 0),J(this,"_uintId",void 0),J(this,"_isDestroyed",!1),J(this,"store",void 0),this._userId=a,this._uintId=c,this.store=p}_updateOriginMediaStreamTrack(o){this._originMediaStreamTrack=o,this._mediaStreamTrack=o,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,se.info("[".concat(this.getTrackId(),"] is destroyed")),$t("info",this,"_destroy"),this.stop(),super.close()}}let hB=xa("RemoteVideoTrack","getTrackId")(iQ=class extends aQ{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==X.PLAYING)}constructor(r,o,a,c){super(r,o,a,c),J(this,"_videoVisibleTimer",null),J(this,"_previousVideoVisibleStatus",void 0),J(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),J(this,"trackMediaType","video"),J(this,"_videoWidth",void 0),J(this,"_videoHeight",void 0),J(this,"_player",void 0),$t("info",this,"constructor",{userId:o}),this.updateMediaStreamTrackResolution()}getStats(){return Xk(()=>{se.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead"),jn("warning",this,"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),eE(this,_r.GET_STATS)||pB({},br)}play(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof r?r:"HTMLElement",o]});if("string"==typeof r){const p=document.getElementById(r);p?r=p:(se.warning("[".concat(this.getTrackId(),'] can not find "#').concat(r,'" element, use document.body')),jn("warning",this,'can not find "#'.concat(r,'" element, use document.body')),r=document.body)}se.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(o)),$t("debug",this,"play",o);const c=pB(pB({fit:"cover"},o),{},{trackId:this.getTrackId(),element:r});this._player?this._player.updateConfig(c):(this._player=new G8(c),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(sv.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const p=this.getVideoElementVisibleStatus();this.emit(sv.VIDEO_ELEMENT_VISIBLE_STATUS,p)}catch{}},xt("CHECK_VIDEO_VISIBLE_INTERVAL")),a.onSuccess()}stop(){const r=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return r.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,se.debug("[".concat(this.getTrackId(),"] stop video playback")),$t("debug",this,"stop"),r.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){j7(this._originMediaStreamTrack).then(r=>{let[o,a]=r;this._videoHeight=a,this._videoWidth=o}).catch(z3)}_updatePlayerSource(){se.debug("[".concat(this.getTrackId(),"] update player source track")),$t("debug",this,"_updatePlayerSource"),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var r,o;const a=null==this||null===(r=this._player)||void 0===r?void 0:r.getContainerElement(),c={track:this,element:null==this||null===(o=this._player)||void 0===o?void 0:o.getVideoElement(),slot:a?.parentElement},{element:p,slot:_}=c;if(this.isPlaying&&p instanceof HTMLVideoElement&&_ instanceof HTMLElement){const m=AG.checkOneElementVisible(p),A=Object.assign({},m);if(A.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=A.visible;zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(A.visible?"Video is visible":"Invisible because of ".concat(A.reason))}return A}return}catch(a){throw new Le(Te.GET_VIDEO_ELEMENT_VISIBLE_ERROR,a.message)}}})||iQ,Tg=xa("RemoteAudioTrack","getTrackId")(oQ=class extends aQ{get isPlaying(){return this._useAudioElement?wd.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(r,o,a,c){super(r,o,a,c),J(this,"trackMediaType","audio"),J(this,"_source",void 0),J(this,"_useAudioElement",!0),J(this,"_volume",100),$t("info",this,"constructor",{userId:o}),xt("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),this._source=new g7(r,!0),this._source.once(or.RECEIVE_TRACK_BUFFER,()=>{this.emit(sv.FIRST_FRAME_DECODED)})}setAudioFrameCallback(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!r)return this._source.removeAllListeners(or.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(o),this._source.removeAllListeners(or.ON_AUDIO_BUFFER),this._source.on(or.ON_AUDIO_BUFFER,a=>r(a))}setVolume(r){const o=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),r]},300);this._volume=r,this._useAudioElement?wd.setVolume(this.getTrackId(),r):this._source.setVolume(r/100),o.onSuccess()}setPlaybackDevice(r){var o=this;return F(function*(){const a=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[o.getTrackId(),r]});if(!o._useAudioElement)throw new Le(Te.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield wd.setSinkID(o.getTrackId(),r)}catch(c){throw a.onError(c),c}a.onSuccess()})()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Xk(()=>{se.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead"),jn("warning",this,"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),eE(this,_r.GET_STATS)||pB({},xn)}play(){const r=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});se.debug("[".concat(this.getTrackId(),"] start audio playback")),$t("debug",this,"play"),this._useAudioElement?(se.debug("[".concat(this.getTrackId(),"] use audio element to play")),jn("debug",this,"use audio element to play"),wd.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),r.onSuccess()}stop(){const r=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});se.debug("[".concat(this.getTrackId(),"] stop audio playback")),$t("debug",this,"stop"),this._useAudioElement?wd.stop(this.getTrackId()):this._source.stop(),r.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){se.debug("[".concat(this.getTrackId(),"] update player source track")),$t("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}})||oQ;function fB(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function mB(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?fB(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):fB(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class gB extends ko{constructor(){super(),J(this,"uplinkStatsUploadInterval",void 0),J(this,"uplinkStatsUploadSlowInterval",void 0),J(this,"uplinkRelatedStatsUploadInterval",void 0),J(this,"uplinkDenoiserStatsUploadInterval",void 0),J(this,"transportStatsUploadInterval",void 0),J(this,"extensionStatsUploadInterval",void 0),J(this,"downlinkStatsUploadInterval",void 0),J(this,"downlinkStatsUploadSlowInterval",void 0),J(this,"downlinkRelatedStatsUploadInterval",void 0),J(this,"lastStats",void 0),J(this,"uploadUnplinkStarted",!1),J(this,"uploadDownlinkStarted",!1),J(this,"uploadTransportStarted",!1),J(this,"requestStats",void 0),J(this,"requestLocalMedia",void 0),J(this,"requestRemoteMedia",void 0),J(this,"requestAllTracks",void 0),J(this,"requestVideoIsReady",void 0),J(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var o;const a=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);a&&this.uploadTransportStats(a)},6e3))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var o;const a=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);a&&(this.uploadUplinkStats(a,this.lastStats),this.lastStats=a)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var o;const a=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);a&&this.uploadSlowUplinkStats(a)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var o;const a=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);a&&this.uploadRelatedUplinkStats(a,this.lastStats),this.lastStats=a},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var o;const a=null===(o=this.requestAllTracks)||void 0===o?void 0:o.call(this);a&&this.uploadDenoiserStats(a)},2e3),this.extensionStatsUploadInterval&&window.clearInterval(this.extensionStatsUploadInterval),this.extensionStatsUploadInterval=window.setInterval(()=>{var o;const a=null===(o=this.requestAllTracks)||void 0===o?void 0:o.call(this);a&&this.uploadExtensionStats(a)},2e3))}uploadTransportStats(o){Ph(()=>{var a;null===(a=this.requestUpload)||void 0===a||a.call(this,hr.TRANSPORT_STATS,function(c){const p={connectionType:100};if("relay"===c.selectedCandidatePair.localCandidate.candidateType){const _=c.selectedCandidatePair.localCandidate.relayProtocol;"udp"===_&&(p.connectionType=101),"tcp"===_&&(p.connectionType=103),"tls"===_&&(p.connectionType=104)}return p}(o))})}uploadUplinkStats(o,a){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).forEach(p=>{let[_,{track:m,ssrcs:A}]=p;switch(_){case Un.LocalVideoLowTrack:case Un.LocalVideoTrack:{const S=function(R,O,B){var q;const z=O.videoSend.find(de=>de.ssrc===R);if(!z)return null;const te={id:_s(10,""),timestamp:new Date(O.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:z.ssrc.toString()};switch(te.A_vstd=B._originMediaStreamTrack&&!B._originMediaStreamTrack.enabled||!B._mediaStreamTrack.enabled?"1":"0",z.sentFrame&&(te.A_fhs=z.sentFrame.height.toString(),te.A_frs=z.sentFrame.frameRate.toString(),te.A_fws=z.sentFrame.width.toString()),z.adaptionChangeReason){case"none":te.A_ac="0";break;case"cpu":te.A_ac="1";break;case"bandwidth":te.A_ac="2";break;case"other":te.A_ac="3"}return te.A_lvps=ne[B._player?B._player.videoElementStatus:"uninit"].toString(),te.A_nr=null===(q=z.nacksCount)||void 0===q?void 0:q.toString(),z.avgEncodeMs&&(te.A_aem=z.avgEncodeMs.toFixed(0).toString()),te}(A[0].ssrcId,o,m),I=k5(A[0].ssrcId,o,a);S&&Ph(()=>{var R;return null===(R=this.requestUpload)||void 0===R?void 0:R.call(this,hr.PUBLISH_STATS,{stream_type:_===Un.LocalVideoLowTrack?"low":"high",stats:mB(mB({},S),I)})});break}case Un.LocalAudioTrack:{const S=function(I,R,O){const B=R.audioSend.find(z=>z.ssrc===I);if(!B)return null;const q={id:_s(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:B.ssrc.toString()};return q.A_astd=O._originMediaStreamTrack.enabled&&O._mediaStreamTrack.enabled?"0":"1",q.A_ail=B.inputLevel?Math.round(100*B.inputLevel).toString():Math.round(100*O._source.getAccurateVolumeLevel()).toString(),q.A_apil=Math.round(100*O._source.getAccurateVolumeLevel()).toString(),B.aecReturnLoss&&(q.A_ecrl=Math.round(B.aecReturnLoss).toString()),B.aecReturnLossEnhancement&&(q.A_ecrle=Math.round(B.aecReturnLossEnhancement).toString()),q}(A[0].ssrcId,o,m);S&&Ph(()=>{var I;return null===(I=this.requestUpload)||void 0===I?void 0:I.call(this,hr.PUBLISH_STATS,{stream_type:"high",stats:S})});break}}const v=function(S){const I={id:"bweforvideo",timestamp:new Date(S.timestamp).toISOString(),type:"VideoBwe"};return S.bitrate.retransmit&&(I.A_rb=S.bitrate.retransmit.toString()),S.bitrate.targetEncoded&&(I.A_teb=S.bitrate.targetEncoded.toString()),I.A_aeb=S.bitrate.actualEncoded.toString(),I.A_tb=S.bitrate.transmit.toString(),void 0!==S.sendBandwidth&&(I.A_asb=S.sendBandwidth.toString()),I}(o);v&&Ph(()=>{var S;return null===(S=this.requestUpload)||void 0===S?void 0:S.call(this,hr.PUBLISH_STATS,{stream_type:_===Un.LocalVideoLowTrack?"low":"high",stats:v})})})}uploadSlowUplinkStats(o){var a;((null===(a=this.requestLocalMedia)||void 0===a?void 0:a.call(this))||[]).filter(c=>{let[p]=c;return p===Un.LocalVideoLowTrack||p===Un.LocalVideoTrack}).forEach(c=>{let[p,{ssrcs:_}]=c;const m=k5(_[0].ssrcId,o);m&&Ph(()=>{var A;return null===(A=this.requestUpload)||void 0===A?void 0:A.call(this,hr.PUBLISH_STATS,{stream_type:p===Un.LocalVideoLowTrack?"low":"high",stats:m})})})}uploadRelatedUplinkStats(o,a){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).filter(p=>{let[_]=p;return _===Un.LocalVideoLowTrack||_===Un.LocalVideoTrack}).forEach(p=>{let[_,{ssrcs:m}]=p;const A=function(v,S){const I=S.videoSend.find(R=>R.ssrc===v);return I?{mediaType:"video",isVideoMute:!1,frameRateInput:I.inputFrame&&I.inputFrame.frameRate.toString(),frameRateSent:I.sentFrame&&I.sentFrame.frameRate.toString(),googRtt:I.rttMs.toString(),qpSumPerFrame:Math.floor(I.qpSumPerFrame).toString()}:null}(m[0].ssrcId,o);A&&Ph(()=>{var v;null===(v=this.requestUpload)||void 0===v||v.call(this,hr.PUBLISH_RELATED_STATS,{stream_type:_===Un.LocalVideoLowTrack?"low":"high",stats:A})})})}uploadDenoiserStats(o){for(let _=0;_<o.length;_++){const m=o[_];if(m instanceof ZS){var a,c,p;const A=null===(a=(c=m._external).getDenoiserStats)||void 0===a?void 0:a.call(c);return void(A&&(null===(p=this.requestUpload)||void 0===p||p.call(this,hr.DENOISER_STATS,A)))}}}uploadExtensionStats(o){for(let a=0;a<o.length;a++){const c=o[a];if(c instanceof ZS)return void c.getProcessorStats().forEach(p=>{var _;p.type===hr.DENOISER_STATS&&(null===(_=this.requestUpload)||void 0===_||_.call(this,hr.DENOISER_STATS,p.stats))})}}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var o;const a=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);a&&(this.uploadDownlinkStats(a,this.lastStats),this.lastStats=a)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var o;const a=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);a&&this.uploadSlowDownlinkStats(a)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var o;const a=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);a&&(this.uploadRelatedDownlinkStats(a,this.lastStats),this.lastStats=a)},1e3))}uploadDownlinkStats(o,a){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(p=>{let[_,m]=p;if(m.has(Xr.VIDEO)&&_.videoTrack){const A=_.videoTrack?function(v,S,I){const R=S.videoRecv.find(z=>z.ssrc===v);if(!R)return null;const O={id:_s(10,""),timestamp:new Date(S.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:R.ssrc.toString()};var B,q;return O.bytesReceived=R.bytes.toString(),O.packetsLost=R.packetsLost.toString(),O.packetsReceived=R.packets.toString(),R.framesRateFirefox&&(O.A_frr=R.framesRateFirefox.toString()),R.receivedFrame?(O.A_frr=R.receivedFrame.frameRate.toString(),O.A_fhr=R.receivedFrame.height.toString(),O.A_fwr=R.receivedFrame.width.toString()):(O.A_fhr=null===(B=I._videoHeight)||void 0===B?void 0:B.toString(),O.A_fwr=null===(q=I._videoWidth)||void 0===q?void 0:q.toString()),O.A_frd=R.decodeFrameRate.toString(),R.outputFrame&&(O.A_fro=R.outputFrame.frameRate.toString()),void 0!==R.jitterBufferMs&&(O.A_jbm=Math.floor(R.jitterBufferMs).toString()),void 0!==R.currentDelayMs&&(O.A_cdm=Math.floor(R.currentDelayMs).toString()),O.A_fs=R.firsCount.toString(),O.A_ns=R.nacksCount.toString(),O.A_ps=R.plisCount.toString(),I&&(O.A_vrtd=I._originMediaStreamTrack.enabled&&I._mediaStreamTrack.enabled?"0":"1"),I._player&&I._player.freezeTimeCounterList.length>0&&(O.A_vrft=I._player.freezeTimeCounterList.splice(0,1)[0].toString()),O.A_rvps=ne[I._player?I._player.videoElementStatus:"uninit"].toString(),O}(_._videoSSRC,o,_.videoTrack):void 0;A&&Ph(()=>{var v;return null===(v=this.requestUpload)||void 0===v?void 0:v.call(this,hr.SUBSCRIBE_STATS,{stream_id:_.uid,stats:A})})}if(m.has(Xr.AUDIO)&&_.audioTrack){const A=_.audioTrack?function(v,S,I){const R=S.audioRecv.find(B=>B.ssrc===v);if(!R)return null;const O={id:_s(10,""),timestamp:new Date(S.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:R.ssrc.toString()};return O.bytesReceived=R.bytes.toString(),O.packetsLost=R.packetsLost.toString(),O.packetsReceived=R.packets.toString(),O.A_aol=R.outputLevel?Math.round(100*R.outputLevel).toString():Math.round(100*I._source.getAccurateVolumeLevel()).toString(),O.A_apol=Math.round(100*I._source.getAccurateVolumeLevel()).toString(),I&&(O.A_artd=I._originMediaStreamTrack.enabled&&I._mediaStreamTrack.enabled?"0":"1"),O.A_jr=R.jitterMs.toString(),O.A_jbm=Math.floor(R.jitterBufferMs).toString(),O.A_cdm=Math.floor(R.jitterBufferMs).toString(),O.A_raps=ne[wd.getPlayerState(I.getTrackId())].toString(),O}(_._audioSSRC,o,_.audioTrack):void 0;A&&Ph(()=>{var v;return null===(v=this.requestUpload)||void 0===v?void 0:v.call(this,hr.SUBSCRIBE_STATS,{stream_id:_.uid,stats:A})})}})}uploadSlowDownlinkStats(o){}uploadRelatedDownlinkStats(o,a){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(p=>{let[_,m]=p;if(m.has(Xr.VIDEO)&&_.videoTrack){var A;const v=!0===(_._videoSSRC&&(null===(A=this.requestVideoIsReady)||void 0===A?void 0:A.call(this,_._videoSSRC))||!1),S=function(I,R,O,B,q,z){const te=O.videoRecv.find(Me=>Me.ssrc===I),de=q?q.videoRecv.find(Me=>Me.ssrc===I):void 0;if(!te)return null;const ge=t0.isRemoteVideoFreeze(z,te,de)&&R,Se={mediaType:"video",isVideoMute:!1,peerId:B,frameRateReceived:te.receivedFrame&&te.receivedFrame.frameRate.toString(),frameRateDecoded:te.decodedFrame&&te.decodedFrame.frameRate.toString(),isFreeze:ge,bytesReceived:te.bytes.toString(),packetsReceived:te.packets.toString(),packetsLost:te.packetsLost.toString(),qpSumPerFrame:Math.floor(te.qpSumPerFrame).toString()};return te.framesRateFirefox&&(Se.frameRateDecoded=te.framesRateFirefox.toString(),Se.frameRateReceived=te.framesRateFirefox.toString()),Se}(_._videoSSRC,v,o,_.uid,a,_.videoTrack);S&&Ph(()=>{var I;null===(I=this.requestUpload)||void 0===I||I.call(this,hr.SUBSCRIBE_RELATED_STATS,{stream_id:_.uid,stats:S})})}if(m.has(Xr.AUDIO)&&_.audioTrack){const v=function(S,I,R,O){const B=I.audioRecv.find(z=>z.ssrc===S);if(!B)return null;const q=t0.isRemoteAudioFreeze(O);return{mediaType:"audio",isAudioMute:!1,peerId:R,googJitterReceived:B.jitterMs.toString(),isFreeze:q,bytesReceived:B.bytes.toString(),packetsReceived:B.packets.toString(),packetsLost:B.packetsLost.toString(),frameReceived:B.receivedFrames.toString(),frameDropped:B.droppedFrames.toString()}}(_._audioSSRC,o,_.uid,_.audioTrack);v&&Ph(()=>{var S;null===(S=this.requestUpload)||void 0===S||S.call(this,hr.SUBSCRIBE_RELATED_STATS,{stream_id:_.uid,stats:v})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}}var cQ,Ci;function lQ(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function sE(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?lQ(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):lQ(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function uQ(r){var o,a,c,p=2;for(typeof Symbol<"u"&&(a=Dp,c=Symbol.iterator);p--;){if(a&&null!=(o=r[a]))return o.call(r);if(c&&null!=(o=r[c]))return new VP(o.call(r));a="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function VP(r){function o(a){if(Object(a)!==a)return qn.reject(new TypeError(a+" is not an object."));var c=a.done;return qn.resolve(a.value).then(function(p){return{value:p,done:c}})}return(VP=function(a){this.s=a,this.n=a.next}).prototype={s:null,n:null,next:function(){return o(this.n.apply(this.s,arguments))},return:function(a){var c=this.s.return;return void 0===c?qn.resolve({value:a,done:!0}):o(c.apply(this.s,arguments))},throw:function(a){var c=this.s.return;return void 0===c?qn.reject(a):o(c.apply(this.s,arguments))}},new VP(r)}let pW=xa("P2PChannel","store.p2pId")((rr((Ci=class extends ko{get state(){return this._state}set state(r){const o=this._state;this._state=r,this.emit(gi.StateChange,o,this._state)}constructor(r,o){var a;super(),a=this,J(this,"store",void 0),J(this,"statsUploader",void 0),J(this,"connection",void 0),J(this,"localTrackMap",new Map),J(this,"remoteUserMap",new Map),J(this,"pendingLocalTracks",[]),J(this,"pendingRemoteTracks",[]),J(this,"statsCollector",void 0),J(this,"isPlanB",!1),J(this,"iceFailedCount",0),J(this,"dtlsFailedCount",0),J(this,"mutex",new Il("P2PChannel-mutex")),J(this,"_state",bd.Disconnected),J(this,"handleMuteLocalTrack",function(){var c=F(function*(p,_,m){const A=yield a.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!a.connection)return void m(new Le(Te.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));$t("debug",a,"handleMuteLocalTrack",p.getTrackId()),yield a.waitTillConnected();const v=a.filterTobeMutedTracks(p);if(0===v.length)return void _();const S=v.find(R=>"videoLowTrack"===R[0]);S&&S[1].track._originMediaStreamTrack.stop(),yield a.connection.muteLocal(v.map(R=>{let[,{id:O}]=R;return O}));const I=a.createMuteMessage(v);yield Qo(a,gi.RequestMuteLocal,I),_()}catch(v){m(v)}finally{A()}});return function(p,_,m){return c.apply(this,arguments)}}()),J(this,"handleUnmuteLocalTrack",function(){var c=F(function*(p,_,m){const A=yield a.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!a.connection)return void m(new Le(Te.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));$t("debug",a,"handleUnmuteLocalTrack",p.getTrackId()),yield a.waitTillConnected();const v=a.filterTobeUnmutedTracks(p);if(0===v.length)return void _();const S=v.find(R=>"videoLowTrack"===R[0]);if(S){const R=S[1];if(R.track._originMediaStreamTrack.stop(),Yc().supportDualStreamEncoding){const O=p._mediaStreamTrack.clone();R.track._mediaStreamTrack=O,R.track._originMediaStreamTrack=O}else{const O=_4(p,CT(a,gi.RequestLowStreamParameter));R.track._mediaStreamTrack=O,R.track._originMediaStreamTrack=O}yield new qn((O,B)=>{a.handleReplaceTrack(R.track,O,B,!0)})}yield a.connection.unmuteLocal(v.map(R=>{let[,{id:O}]=R;return O}));const I=a.createUnmuteMessage(v);yield Qo(a,gi.RequestUnmuteLocal,I),_()}catch(v){m(v)}finally{A()}});return function(p,_,m){return c.apply(this,arguments)}}()),J(this,"handleUpdateVideoEncoder",function(){var c=F(function*(p,_,m){const A=yield a.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const v=a.localTrackMap.get(Un.LocalVideoTrack);if(!a.connection||!v||v.track!==p)return void _();yield a.waitTillConnected();const{id:S,track:I}=v;yield a.connection.updateSendParameters(S,I),yield a.connection.updateEncoderConfig(S,I),a.emit(gi.UpdateVideoEncoder,I),_()}catch(v){m(v)}finally{A()}});return function(p,_,m){return c.apply(this,arguments)}}()),J(this,"handleSetOptimizationMode",function(){var c=F(function*(p,_,m){const A=yield a.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const v=a.localTrackMap.get(Un.LocalVideoTrack);if(!a.connection||!v||v.track!==p)return;yield a.waitTillConnected();const{id:S,track:I}=v;yield a.connection.updateSendParameters(S,I),_()}catch(v){m(v)}finally{A()}});return function(p,_,m){return c.apply(this,arguments)}}()),J(this,"handleReplaceTrack",function(){var c=F(function*(p,_,m,A){let v;se.debug("P2PChannel handleReplaceTrack for [track-id-".concat(p.getTrackId(),"]")),"boolean"==typeof A&&A||(v=yield a.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var S;const R=Array.from(a.localTrackMap.entries()).find(O=>{let[,{track:B}]=O;return p===B});if(!a.connection||!R)return void _();if(yield a.waitTillConnected(),yield null===(S=a.connection)||void 0===S?void 0:S.replaceTrack(p,R[1].id),a.isPlanB){const O=R[1];O.id=p._mediaStreamTrack.id,a.localTrackMap.set(R[0],O)}if(R[0]===Un.LocalVideoTrack&&Yc().supportDualStreamEncoding){const O=a.localTrackMap.get(Un.LocalVideoLowTrack);if(O){const B=p._mediaStreamTrack.clone();O.track._originMediaStreamTrack.stop(),O.track._mediaStreamTrack=B,O.track._originMediaStreamTrack=B,yield new qn((q,z)=>{a.handleReplaceTrack(O.track,q,z,!0)})}}_()}catch(R){m(R)}finally{var I;null===(I=v)||void 0===I||I()}});return function(p,_,m,A){return c.apply(this,arguments)}}()),J(this,"handleGetLocalVideoStats",c=>{c(this.statsCollector.getLocalVideoTrackStats())}),J(this,"handleGetLocalAudioStats",c=>{c(this.statsCollector.getLocalAudioTrackStats())}),J(this,"handleGetRemoteVideoStats",c=>this.statsCollector.getRemoteVideoTrackStats(c.uid)[c.uid]),J(this,"handleGetRemoteAudioStats",c=>this.statsCollector.getRemoteAudioTrackStats(c.uid)[c.uid]),this.store=r,this.statsCollector=o,this.statsCollector.addP2PChannel(this),this.statsUploader=new gB,this.bindStatsUploaderEvents(),this.isPlanB=!Yc().supportUnifiedPlan||xt("CHROME_FORCE_PLAN_B")&&Vy()}startP2PConnection(r){var o=this;return F(function*(){return o.state=bd.New,o.connection=o.isPlanB?new Mz(r,o.store):new dW(r,o.store),o.bindConnectionEvents(o.connection),o.connection.establish()})()}connect(r,o,a,c,p,_){var m=this;return F(function*(){if(!m.connection)throw new Le(Te.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");m.store.peerConnectionStart(),yield m.connection.connect(r,o,a,c,p,_),m.statsUploader.startUploadTransportStats(),m.state=bd.Connected})()}publish(r,o,a){var c=this;return jT(function*(){const p=yield ss(c.mutex.lock("From P2PChannel.publish"));try{if(!c.connection){if(c.state===bd.Disconnected)throw new Le(Te.UNEXPECTED_ERROR,"PeerConnection already disconnected.");c.throwIfTrackTypeNotMatch(r);const m=r.filter(A=>-1===c.pendingLocalTracks.indexOf(A));return void(c.pendingLocalTracks=c.pendingLocalTracks.concat(m))}c.store.pubId=c.store.pubId+1,Fu.markPublishStart(c.store.clientId,c.store.pubId),yield ss(c.waitTillConnected());const _=c.filterTobePublishedTracks(r,o,a);if(0===_.length)return void(yield ss(c.tryToUnmuteAudio(r)));yield*sB(uQ(c.doPublish(c.connection,_)),ss)}finally{p()}})()}doPublish(r,o){var a=this;return jT(function*(){o.forEach(S=>{let{track:I,type:R}=S;const O=performance.now();a.store.publish(I.getTrackId(),R===Un.LocalAudioTrack?"audio":"video",O)}),a.bindLocalTrackEvents(o);const c=yield ss(r.send(o.map(S=>{let{track:I}=S;return I}),a.store.codec,a.store.audioCodec)),p=(yield ss(c.next())).value,_=a.createGatewayPublishMessage(o,p);let m;try{m=yield _}catch(S){throw jn("error",a,"doPublish yield error: ".concat(S.toString())),c.throw(S),S?.code===Te.WS_ABORT&&o.forEach(I=>{let{track:R}=I;-1===a.pendingLocalTracks.indexOf(R)&&a.pendingLocalTracks.push(R)}),a.unbindLocalTrackEvents(o),S}const A=a.mapPubResToRemoteConfig(_,m);$t("debug",a,"doPublish",{remoteConfigs:A,tracks:o.map(S=>{let{track:I}=S;return I.getTrackId()}),pubMsg:_,pubAns:m});const v=(yield ss(c.next(A))).value;o.forEach(S=>{let{type:I}=S;a.statsCollector.addLocalStats(I)}),a.assignLocalTracks(o,v),a.statsUploader.startUploadUplinkStats(),o.forEach(S=>{let{track:I,type:R}=S;const O=performance.now();a.store.publish(I.getTrackId(),R===Un.LocalAudioTrack?"audio":"video",void 0,O)})})()}publishLowStream(r){var o=this;return jT(function*(){if(!o.connection)return;$t("debug",o,"publishLowStream",r);const a=yield ss(o.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const p=o.localTrackMap.get(Un.LocalVideoTrack);if(!p)throw new Le(Te.UNEXPECTED_ERROR,"Could not find high stream");if(o.localTrackMap.has(Un.LocalVideoLowTrack))throw new Le(Te.UNEXPECTED_ERROR,"[".concat(o.store.clientId,"] Can't publish low stream when stream already publish"));yield ss(o.waitTillConnected());const _=[{track:o.getLowVideoTrack(p.track,r),type:Un.LocalVideoLowTrack}];if(yield*sB(uQ(o.doPublish(o.connection,_)),ss),p.track.muted||!p.track.enabled){var c;const m=null===(c=o.localTrackMap.get(Un.LocalVideoLowTrack))||void 0===c?void 0:c.id;void 0!==m&&(yield ss(o.connection.muteLocal([m])))}}finally{a()}})()}republish(){var r=this;return F(function*(){r.pendingLocalTracks.length>0&&(se.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),$t("debug",r,"republish",r.pendingLocalTracks.map(o=>o.getTrackId())),yield Ip(r,gi.RequestRePublish,r.pendingLocalTracks),r.emit(gi.MediaReconnectEnd,r.store.uid),r.pendingLocalTracks=[])})()}reSubscribe(r){var o=this;return F(function*(){$t("debug",o,"reSubscribe",o.pendingRemoteTracks.map(a=>{let{user:c}=a;return c.uid}));for(let a=o.pendingRemoteTracks.length-1;a>=0;a--){const{user:c,kind:p}=o.pendingRemoteTracks[a];(p!==Xr.AUDIO||c._audio_added_&&c._audioSSRC)&&(p!==Xr.VIDEO||c._video_added_&&c._videoSSRC)||o.pendingRemoteTracks.splice(a,1)}if(r)yield Ip(o,gi.RequestReSubscribe,o.pendingRemoteTracks);else for(const{user:a,kind:c}of o.pendingRemoteTracks)yield o.subscribe(a,c,c===Xr.VIDEO?a._videoSSRC:a._audioSSRC);o.pendingRemoteTracks.forEach(a=>{let{user:c}=a;o.emit(gi.MediaReconnectEnd,c.uid)}),o.pendingRemoteTracks=[]})()}unpublish(r){var o=this;return F(function*(){if(!o.connection)return void r.forEach(p=>{const _=o.pendingLocalTracks.indexOf(p);-1!==_&&o.pendingLocalTracks.splice(_,1)});yield o.waitTillConnected();const a=o.filterTobeUnpublishedTracks(r);if(0===a.length)return;const c=a.find(p=>"videoLowTrack"===p[0]);return c&&c[1].track.close(),$t("debug",o,"unpublish"),o.doUnpublish(o.connection,a)})()}unpublishLowStream(){var r=this;return F(function*(){if(!r.connection)return;$t("debug",r,"unpublishLowStream");const o=r.localTrackMap.get(Un.LocalVideoLowTrack);return o?(yield r.waitTillConnected(),o.track.close(),r.doUnpublish(r.connection,[[Un.LocalVideoLowTrack,o]])):void 0})()}doUnpublish(r,o){var a=this;return F(function*(){const c=a.createGatewayUnpublishMessage(o);return yield r.stopSending(o.map(p=>{let[,{id:_}]=p;return _})),a.withdrawLocalTracks(o),a.unbindLocalTrackEvents(o.map(p=>{let[_,{track:m}]=p;return{type:_,track:m}})),o.forEach(p=>{let[_]=p;a.statsCollector.removeLocalStats(_)}),0===a.localTrackMap.size&&a.statsUploader.stopUploadUplinkStats(),c})()}subscribe(r,o,a,c,p){var _=this;return F(function*(){var m;if(!_.connection)throw new Le(Te.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if($t("debug",_,"subscribe",{uid:r.uid,mediaType:o,ssrcId:a}),null!==(m=_.remoteUserMap.get(r))&&void 0!==m&&m.has(o))return;let A,v;if(yield _.waitTillConnected(),p){const R=p.find(B=>{let{stream_type:q}=B;return q===o});if(!R)throw new Le(Te.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(o," for user: ").concat(r.uid," because subscribe answer from gateway does not contain stream_type: ").concat(o,"."));const O=yield _.connection.receive(o,R.ssrcs,String(r._uintid),R.attributes);A=O.track,v=O.id}else{const R=yield _.connection.receive(o,[{ssrcId:a,rtx:c}],String(r._uintid),void 0);A=R.track,v=R.id}o===Xr.AUDIO?(r._audioTrack?r._audioTrack._updateOriginMediaStreamTrack(A):(r._audioTrack=new Tg(A,r.uid,r._uintid,_.store),se.info("[".concat(_.store.p2pId,"] create remote audio track: ").concat(r._audioTrack.getTrackId()))),_.bindRemoteTrackEvents(r,r._audioTrack)):(r._videoTrack?r._videoTrack._updateOriginMediaStreamTrack(A):(r._videoTrack=new hB(A,r.uid,r._uintid,_.store),se.info("[".concat(_.store.p2pId,"] create remote video track: ").concat(r._videoTrack.getTrackId()))),_.bindRemoteTrackEvents(r,r._videoTrack));const S=_.remoteUserMap.get(r);S?S.set(o,v):_.remoteUserMap.set(r,new Map([[o,v]])),_.statsCollector.addRemoteStats(r.uid),_.statsUploader.startUploadDownlinkStats();const I=_.pendingRemoteTracks.findIndex(R=>{let{user:O,kind:B}=R;return O.uid===r.uid&&o===B});-1!==I&&(_.pendingRemoteTracks.splice(I,1),_.emit(gi.MediaReconnectEnd,r.uid))})()}massSubscribe(r){var o=this;return F(function*(){return o.massSubscribeNoLock(r)})()}massSubscribeNoLock(r){var o=this;return F(function*(){if(!o.connection)throw new Le(Te.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");$t("debug",o,"subscribeAll",r.map(c=>{let{user:p,mediaType:_,ssrcId:m}=c;return{uid:p.uid,mediaType:_,ssrcId:m}})),r=r.filter(c=>{var p;let{user:_,mediaType:m}=c;return!(null!==(p=o.remoteUserMap.get(_))&&void 0!==p&&p.has(m))}),yield o.waitTillConnected();const a=yield o.connection.batchReceive(r.map(c=>{let{user:p,mediaType:_,ssrcId:m,rtxSsrcId:A}=c;return{kind:_,ssrcMsg:[{ssrcId:m,rtx:A}],mslabel:String(p._uintid)}}));r.forEach((c,p)=>{let{user:_,mediaType:m}=c;const{track:A,id:v}=a[p];m===Xr.AUDIO?(_._audioTrack?_._audioTrack._updateOriginMediaStreamTrack(A):(_._audioTrack=new Tg(A,_.uid,_._uintid,o.store),se.info("[".concat(o.store.p2pId,"] create remote audio track: ").concat(_._audioTrack.getTrackId()))),o.bindRemoteTrackEvents(_,_._audioTrack)):(_._videoTrack?_._videoTrack._updateOriginMediaStreamTrack(A):(_._videoTrack=new hB(A,_.uid,_._uintid,o.store),se.info("[".concat(o.store.p2pId,"] create remote video track: ").concat(_._videoTrack.getTrackId()))),o.bindRemoteTrackEvents(_,_._videoTrack));const S=o.remoteUserMap.get(_);S?S.set(m,v):o.remoteUserMap.set(_,new Map([[m,v]])),o.statsCollector.addRemoteStats(_.uid),o.statsUploader.startUploadDownlinkStats();const I=o.pendingRemoteTracks.findIndex(R=>{let{user:O,kind:B}=R;return O.uid===_.uid&&m===B});-1!==I&&(o.pendingRemoteTracks.splice(I,1),o.emit(gi.MediaReconnectEnd,_.uid))})})()}unsubscribe(r,o,a){var c=this;return F(function*(){const p=c.pendingRemoteTracks.filter(A=>{let{user:v,kind:S}=A;return void 0!==o?v.uid===r.uid&&o===S:v.uid===r.uid});if(p.forEach(A=>{const v=c.pendingRemoteTracks.indexOf(A);c.pendingRemoteTracks.splice(v,1)}),!c.connection)return void p.forEach(A=>{let{kind:v}=A;var S;if(v===Xr.AUDIO)null===(S=r._audioTrack)||void 0===S||S._destroy(),r._audioTrack=void 0;else if(v===Xr.VIDEO){var I;null===(I=r._videoTrack)||void 0===I||I._destroy(),r._videoTrack=void 0}});$t("debug",c,"unsubscribe",{uid:r.uid,mediaType:o});const _=c.filterTobeUnSubscribedTracks(r,o);if(0===_.length)return;yield c.connection.stopReceiving(_.map(A=>{let[,{id:v}]=A;return v}));const m=c.createUnsubscribeMessage(_);return c.withdrawRemoteTracks(_),0===c.remoteUserMap.size&&c.statsUploader.stopUploadDownlinkStats(),_.forEach(A=>{let[v,{kind:S}]=A;var I,R;if(S===Xr.VIDEO&&v._videoSSRC&&(null===(I=c.connection)||void 0===I||I.setStatsRemoteVideoIsReady(v._videoSSRC,!1)),S===Xr.VIDEO)c.unbindRemoteTrackEvents(v._videoTrack),a||(null===(R=v._videoTrack)||void 0===R||R._destroy(),v._videoTrack=void 0);else if(S===Xr.AUDIO){var O;c.unbindRemoteTrackEvents(v._audioTrack),!a&&(null===(O=v._audioTrack)||void 0===O||O._destroy(),v._audioTrack=void 0)}}),m})()}massUnsubscribe(r){var o=this;return F(function*(){return o.massUnsubscribeNoLock(r)})()}massUnsubscribeNoLock(r){var o=this;return F(function*(){let a=[];for(const{user:_,mediaType:m}of r){const A=o.pendingRemoteTracks.filter(v=>{let{user:S,kind:I}=v;return void 0!==m?S.uid===_.uid&&m===I:S.uid===_.uid});A.forEach(v=>{const S=o.pendingRemoteTracks.indexOf(v);o.pendingRemoteTracks.splice(S,1)}),a=a.concat(A)}if(!o.connection)return void a.forEach(_=>{let{user:m,kind:A}=_;var v;if(A===Xr.AUDIO)null===(v=m._audioTrack)||void 0===v||v._destroy(),m._audioTrack=void 0;else if(A===Xr.VIDEO){var S;null===(S=m._videoTrack)||void 0===S||S._destroy(),m._videoTrack=void 0}});$t("debug",o,"batchUnsubscribe",r.map(_=>{let{user:m,mediaType:A}=_;return{uid:m.uid,mediaType:A}}));const c=nf(r).call(r,(_,m)=>{let{user:A,mediaType:v}=m;const S=o.filterTobeUnSubscribedTracks(A,v);return _.concat(S)},[]);if(0===c.length)return;yield o.connection.stopReceiving(c.map(_=>{let[,{id:m}]=_;return m}));const p=o.createUnsubscribeAllMessage(c);return o.withdrawRemoteTracks(c),0===o.remoteUserMap.size&&o.statsUploader.stopUploadDownlinkStats(),c.forEach(_=>{let[m,{kind:A}]=_;var v,S;if(A===Xr.VIDEO&&m._videoSSRC&&(null===(v=o.connection)||void 0===v||v.setStatsRemoteVideoIsReady(m._videoSSRC,!1)),A===Xr.VIDEO)o.unbindRemoteTrackEvents(m._videoTrack),null===(S=m._videoTrack)||void 0===S||S._destroy(),m._videoTrack=void 0;else if(A===Xr.AUDIO){var I;o.unbindRemoteTrackEvents(m._audioTrack),null===(I=m._audioTrack)||void 0===I||I._destroy(),m._audioTrack=void 0}}),p})()}muteRemote(r,o){var a=this;return F(function*(){if(!a.connection)return;$t("debug",a,"muteRemote",{uid:r.uid,kind:o});const c=a.remoteUserMap.get(r);if(!c)return se.warning("P2PChannel.muteRemote has no remote user ".concat(r.uid,".")),void jn("warning",a,"P2PChannel.muteRemote has no remote user ".concat(r.uid,"."));if(!c.get(o))return se.warning("P2PChannel.muteRemote has no remote user ".concat(r.uid," media type ").concat(o,".")),void jn("warning",a,"P2PChannel.muteRemote has no remote user ".concat(r.uid," media type ").concat(o,"."));const p=o===Xr.VIDEO?r._videoSSRC:r._audioSSRC;void 0!==p&&a.connection.setStatsRemoteVideoIsReady(p,!1)})()}unmuteRemote(r,o){var a=this;return F(function*(){return a.unmuteRemoteNoLock(r,o)})()}unmuteRemoteNoLock(r,o){var a=this;return F(function*(){if(!a.connection)return;$t("debug",a,"unmuteRemote",{uid:r.uid,kind:o});const c=a.remoteUserMap.get(r);return c?c.get(o)?void 0:(se.warning("P2PChannel.unmuteRemote has no remote user ".concat(r.uid," media type ").concat(o,".")),void jn("warning",a,"unmuteRemote has no remote user ".concat(r.uid," media type ").concat(o))):(se.warning("P2PChannel.unmuteRemote has no remote user ".concat(r.uid,".")),void jn("warning",a,"unmuteRemote has no remote user ".concat(r.uid)))})()}getAllTracks(r){const o=this.localTrackMap.get(Un.LocalAudioTrack);if(o?.track instanceof Td){const a=o.track;return Array.from(this.localTrackMap.entries()).filter(c=>{let[p]=c;return p!==Un.LocalAudioTrack}).filter(c=>{let[p]=c;return!(r&&p===Un.LocalVideoLowTrack)}).map(c=>{let[,{track:p}]=c;return p}).concat(a.trackList)}return Array.from(this.localTrackMap.entries()).filter(a=>{let[c]=a;return!(r&&c===Un.LocalVideoLowTrack)}).map(a=>{let[,{track:c}]=a;return c})}reportPublishEvent(r,o,a,c,p){if(r){const m=this.localTrackMap.get(Un.LocalAudioTrack),A=this.localTrackMap.get(c?Un.LocalVideoLowTrack:Un.LocalVideoTrack);zt.publish(this.store.sessionId,{eventElapse:Fu.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:r,ec:o,audioName:m?.track.getTrackLabel(),videoName:A?.track.getTrackLabel(),screenshare:-1!==A?.track._hints.indexOf(qc.SCREEN_TRACK),audio:!!m,video:!!A,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:p})}else{var _;a||(a=[]);const m=a.find(v=>v instanceof tc),A=c?null===(_=this.localTrackMap.get(Un.LocalVideoTrack))||void 0===_?void 0:_.track:a.find(v=>v instanceof Hs);zt.publish(this.store.sessionId,{eventElapse:Fu.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:r,ec:o,audioName:m?.getTrackLabel(),videoName:A?.getTrackLabel(),screenshare:-1!==A?._hints.indexOf(qc.SCREEN_TRACK),audio:!!m,video:!!A,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:p})}}reportSubscribeEvent(r,o,a,c){const p=c===Xr.VIDEO?a._videoSSRC:a._audioSSRC;p&&zt.subscribe(this.store.sessionId,{succ:r,ec:o,video:c===Xr.VIDEO,audio:c===Xr.AUDIO,peerid:a.uid,subscribeRequestid:c===Xr.VIDEO?a._videoSSRC:a._audioSSRC,p2pid:this.store.p2pId,eventElapse:Fu.measureFromSubscribeStart(this.store.clientId,p)})}reset(){se.debug("P2PChannel.reset"),this.mutex=new Il("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=bd.Disconnected}getStats(){var r;return null===(r=this.connection)||void 0===r?void 0:r.getStats()}getRemoteVideoIsReady(r){var o;return(null===(o=this.connection)||void 0===o?void 0:o.getRemoteVideoIsReady(r))||!1}getLocalAudioVolume(){const r=this.localTrackMap.get(Un.LocalAudioTrack);if(r)return r.track.getVolumeLevel()}getLocalVideoSize(){const r=this.localTrackMap.get(Un.LocalVideoTrack);if(r)return{width:r.track._videoWidth||0,height:r.track._videoHeight||0}}getEncoderConfig(r){const o=this.localTrackMap.get(r);return o&&o.track instanceof Hs||o&&o.track instanceof tc?o.track._encoderConfig:void 0}getLocalMedia(r){return this.localTrackMap.get(r)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(r,o){if(!r)return this.remoteUserMap.size>0;const a=this.remoteUserMap.get(r);return!!a&&(!o||a.has(o))}hasRemoteMediaWithLock(r,o){var a=this;return F(function*(){if(!r)return a.remoteUserMap.size>0;const c=a.remoteUserMap.get(r);return!!c&&(!o||c.has(o))})()}getRemoteMedia(r){var o;const a=Array.from($y(o=this.remoteUserMap).call(o)).find(c=>c.uid===r);return a?{audioTrack:a.audioTrack,audioSSRC:a._audioSSRC,videoTrack:a.videoTrack,videoSSRC:a._videoSSRC}:{}}getAudioLevels(){let r=Array.from(this.remoteUserMap.entries()).map(a=>{let[c]=a;return{uid:c.uid,level:c.audioTrack?100*c.audioTrack._source.getAccurateVolumeLevel():0}});const o=this.localTrackMap.get(Un.LocalAudioTrack);return o&&r.push({level:100*o.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),r=US(r).call(r,(a,c)=>a.level-c.level),r}disconnectForReconnect(){var r=this;return F(function*(){r.connection&&($t("debug",r,"disconnectForReconnect"),se.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),r.state=bd.Reconnecting,r.connection.close(),r.unbindConnectionEvents(r.connection),r.connection=void 0,0!==r.localTrackMap.size&&(Array.from(r.localTrackMap.entries()).forEach(o=>{let[a,{track:c}]=o;switch(a){case Un.LocalVideoTrack:c._hints.includes(qc.LOW_STREAM)?c.close():r.pendingLocalTracks.push(c);break;case Un.LocalAudioTrack:c instanceof Td?r.pendingLocalTracks=r.pendingLocalTracks.concat(c.trackList):r.pendingLocalTracks.push(c)}}),r.emit(gi.MediaReconnectStart,r.store.uid)),r.unbindLocalTrackEvents(),r.localTrackMap.clear(),0!==r.remoteUserMap.size&&Array.from(r.remoteUserMap.entries()).forEach(o=>{let[a,c]=o;Array.from($y(c).call(c)).forEach(p=>{r.setPendingRemoteMedia(a,p)}),r.emit(gi.MediaReconnectStart,a.uid)}),r.unbindAllRemoteTrackEvents(),r.remoteUserMap.clear(),r.statsUploader.stopUploadUplinkStats(),r.statsUploader.stopUploadDownlinkStats(),r.statsUploader.stopUploadTransportStats(),se.debug("P2PChannel disconnected, waiting to reconnect."))})()}hasPendingRemoteMedia(r,o){for(const a of this.pendingRemoteTracks){const{user:c,kind:p}=a;if((r instanceof XL?r.uid:r)===c.uid&&o===p)return!0}return!1}setPendingRemoteMedia(r,o){this.hasPendingRemoteMedia(r,o)||this.pendingRemoteTracks.push({user:r,kind:o})}reEstablish(){var r=this;return F(function*(){if(r.connection)return r.connection.reEstablish()})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const r=this.connection.getStats(),o=this.localTrackMap.get(Un.LocalVideoTrack),a=this.localTrackMap.get(Un.LocalAudioTrack),c=r.videoSend.find(B=>B.ssrc===o?.ssrcs[0].ssrcId),p=r.audioSend.find(B=>B.ssrc===a?.ssrcs[0].ssrcId);if(!c||!p)return 1;const _=eE(this,gi.NeedSignalRTT),m=c?c.rttMs:void 0,A=p?p.rttMs:void 0,v=m&&A?(m+A)/2:m||A,I=100*r.sendPacketLossRate*.7/50+.3*((v&&_?(v+_)/2:v||_)||0)/1500,R=I<.17?1:I<.36?2:I<.59?3:I<.1?4:5,O=o?.track;if(O&&O._encoderConfig&&-1===O._hints.indexOf(qc.SCREEN_TRACK)){const B=O._encoderConfig.bitrateMax,q=r.bitrate.actualEncoded;if(B&&q){const z=(1e3*B-q)/(1e3*B);return rj[z<.15?0:z<.3?1:z<.45?2:z<.6?3:4][R]}}return R}getDownlinkNetworkQuality(){if(!this.connection)return 0;const r=this.connection.getStats();let o=0;return Array.from(this.remoteUserMap.entries()).forEach(a=>{let[c]=a;const p=c._audioSSRC,_=c._videoSSRC,m=r.audioRecv.find(q=>q.ssrc===p),A=r.videoRecv.find(q=>q.ssrc===_);if(!m&&!A)return void(o+=1);const v=eE(this,gi.NeedSignalRTT),S=r.rtt,I=(S&&v?(S+v)/2:S||v)||0,R=m?m.jitterMs:void 0,O=r.recvPacketLossRate;let B=.7*O*100/50+.3*I/1500;R&&(B=.6*O*100/50+.2*I/1500+.2*R/400),o+=B<.1?1:B<.17?2:B<.36?3:B<.59?4:5}),this.remoteUserMap.size>0?Math.round(o/this.remoteUserMap.size):o}muteLocalTrack(r){var o=this;return F(function*(){return new qn((a,c)=>{o.handleMuteLocalTrack(r,a,c)})})()}filterTobePublishedTracks(r,o,a){const c=[],p=Yc(),_=this.getAllTracks();r=Q7(r=r.filter(v=>-1===_.indexOf(v)));let m=!1,A=!1;for(const v of r){if(v instanceof Hs&&(this.localTrackMap.has(Un.LocalVideoTrack)||m?new Le(Te.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(c.push({track:v,type:Un.LocalVideoTrack}),m=!0),o)){const S=this.getLowVideoTrack(v,a);c.push({track:S,type:Un.LocalVideoLowTrack})}if(v instanceof tc){const S=this.localTrackMap.get(Un.LocalAudioTrack);if(S){if(!(S.track instanceof Td))throw new Le(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(v._bypassWebAudio)throw new Le(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");S.track.addAudioTrack(v),this.bindLocalAudioTrackEvents(v,!0)}else if(A){const I=c.find(R=>{let{type:O}=R;return O===Un.LocalAudioTrack});if(!(I.track instanceof Td))throw new Le(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(v._bypassWebAudio)throw new Le(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");I.track.addAudioTrack(v)}else{if(!p.webAudioMediaStreamDest||v instanceof Td||v._bypassWebAudio)c.push({track:v,type:Un.LocalAudioTrack});else{const I=new Td;I.addAudioTrack(v),c.push({track:I,type:Un.LocalAudioTrack})}A=!0}}}return c}filterTobeUnpublishedTracks(r){const o=[],a=this.getAllTracks();r=Q7(r=r.filter(c=>-1!==a.indexOf(c)));for(const c of r){if(c instanceof tc){const p=this.localTrackMap.get(Un.LocalAudioTrack);if(!p)continue;p.track instanceof Td?(p.track.removeAudioTrack(c),this.unbindLocalAudioTrackEvents(c),0===p.track.trackList.length&&(o.push([Un.LocalAudioTrack,p]),p.track.close())):o.push([Un.LocalAudioTrack,p])}if(c instanceof Hs){const p=this.localTrackMap.get(Un.LocalVideoTrack);if(!p)continue;o.push([Un.LocalVideoTrack,p]);const _=this.localTrackMap.get(Un.LocalVideoLowTrack);_&&o.push([Un.LocalVideoLowTrack,_])}}return o}bindLocalTrackEvents(r){r.forEach(o=>{let{track:a,type:c}=o;switch(c){case Un.LocalVideoTrack:a.addListener(_r.GET_STATS,this.handleGetLocalVideoStats),a.addListener(_r.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),a.addListener(_r.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),a.addListener(_r.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),a.addListener(_r.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),a.addListener(_r.NEED_REPLACE_TRACK,this.handleReplaceTrack),a.addListener(_r.NEED_MUTE_TRACK,this.handleMuteLocalTrack),a.addListener(_r.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Un.LocalAudioTrack:this.bindLocalAudioTrackEvents(a)}})}bindLocalAudioTrackEvents(r,o){r instanceof Td?r.trackList.forEach(a=>{a.addListener(_r.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),a.addListener(_r.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),a.addListener(_r.GET_STATS,this.handleGetLocalAudioStats),a.addListener(_r.NEED_MUTE_TRACK,this.handleMuteLocalTrack),a.addListener(_r.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(r.addListener(_r.GET_STATS,this.handleGetLocalAudioStats),r.addListener(_r.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(_r.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(_r.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(_r.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),o||r.addListener(_r.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(r){r||(r=Array.from(this.localTrackMap.entries()).map(o=>{let[a,{track:c}]=o;return{track:c,type:a}})),r.forEach(o=>{let{track:a,type:c}=o;switch(c){case Un.LocalVideoTrack:a.off(_r.GET_STATS,this.handleGetLocalVideoStats),a.off(_r.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),a.off(_r.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),a.off(_r.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),a.off(_r.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),a.off(_r.NEED_REPLACE_TRACK,this.handleReplaceTrack),a.off(_r.NEED_MUTE_TRACK,this.handleMuteLocalTrack),a.off(_r.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Un.LocalAudioTrack:this.unbindLocalAudioTrackEvents(a)}})}unbindLocalAudioTrackEvents(r){r instanceof Td?r.trackList.forEach(o=>{o.off(_r.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(_r.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(_r.GET_STATS,this.handleGetLocalAudioStats),o.off(_r.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(_r.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(r.off(_r.GET_STATS,this.handleGetLocalAudioStats),r.off(_r.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(_r.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(_r.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(_r.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(_r.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(r,o){o instanceof hB&&o.addListener(_r.GET_STATS,a=>{a(this.handleGetRemoteVideoStats(r))}),o instanceof Tg&&o.addListener(_r.GET_STATS,a=>{a(this.handleGetRemoteAudioStats(r))})}unbindRemoteTrackEvents(r){r&&r.removeAllListeners(_r.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(r=>{let[o,a]=r;a.has(Xr.AUDIO)&&this.unbindRemoteTrackEvents(o._audioTrack),a.has(Xr.VIDEO)&&this.unbindRemoteTrackEvents(o._videoTrack)})}createGatewayPublishMessage(r,o){return r.map((a,c)=>{let p,_,{track:m,type:A}=a;switch(A){case Un.LocalAudioTrack:p=Zo.Audio,_={dtx:m instanceof ZS&&m._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Un.LocalVideoTrack:p=m._hints.includes(qc.SCREEN_TRACK)?Zo.Screen:Zo.High,_=sE(sE({},O5(m)),{},{codec:this.store.codec});break;case Un.LocalVideoLowTrack:p=Zo.Low,_=sE(sE({},O5(m)),{},{codec:this.store.codec})}return{stream_type:p,attributes:_,ssrcs:o[c]}})}createGatewayUnpublishMessage(r){return r.map(o=>{let a,[c,{track:p,ssrcs:_,id:m}]=o;switch(c){case Un.LocalVideoTrack:a=p._hints.includes(qc.SCREEN_TRACK)?Zo.Screen:Zo.High;break;case Un.LocalAudioTrack:a=Zo.Audio;break;case Un.LocalVideoLowTrack:a=Zo.Low}return{stream_type:a,ssrcs:_,mid:m}})}assignLocalTracks(r,o){r.forEach((a,c)=>{let{track:p,type:_}=a;this.localTrackMap.set(_,{track:p,id:o[c].id,ssrcs:o[c].localSSRC})})}withdrawLocalTracks(r){r.forEach(o=>{let[a]=o;this.localTrackMap.delete(a)})}waitTillConnected(){var r=this;return F(function*(){return new qn((o,a)=>{switch(r.state){case bd.New:case bd.Reconnecting:{const c=(p,_)=>_===bd.Disconnected?(r.off(gi.StateChange,c),void a(new Le(Te.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):_===bd.Connected?(r.off(gi.StateChange,c),void o(void 0)):void 0;r.on(gi.StateChange,c);break}case bd.Connected:o(void 0);break;case bd.Disconnected:a(new Le(Te.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})})()}bindConnectionEvents(r){var o=this;r.onConnectionStateChange=function(){var a=F(function*(c){se.info("[p2pId: ".concat(o.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(c,")")),ji("info",o,"connectionStateChange",c),o.emit(gi.PeerConnectionStateChange,c),"connected"!==c||o.store.keyMetrics.peerConnectionEnd||o.store.peerConnectionEnd(),"failed"===c&&(yield o.requestReconnect())});return function(c){return a.apply(this,arguments)}}(),r.onICEConnectionStateChange=a=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(a,")")),ji("info",this,"iceConnectionStateChange",a),zt.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:a,tag:Qe.TRACER}).onSuccess(),this.emit(gi.IceConnectionStateChange,a)},r.onICETransportStateChange=a=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(a,")")),ji("info",this,"ICETransportStateChange",a)},r.onDTLSTransportStateChange=a=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(a,")")),ji("info",this,"DTLSTransportStateChange",a)},r.onDTLSTransportError=a=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(a,")")),ji("info",this,"DTLSTransportError",a)},r.onFirstAudioDecoded=a=>{var c;const p=Array.from($y(c=this.remoteUserMap).call(c)).find(m=>m._audioSSRC===a);var _;p&&(null===(_=p.audioTrack)||void 0===_||_.emit(sv.FIRST_FRAME_DECODED),zt.firstRemoteFrame(this.store.sessionId,Re.FIRST_AUDIO_DECODE,Ne.FIRST_AUDIO_DECODE,{peer:p._uintid,subscribeElapse:Fu.measureFromSubscribeStart(this.store.clientId,a),subscribeRequestid:a,p2pid:this.store.p2pId}))},r.onFirstAudioReceived=a=>{var c;const p=Array.from($y(c=this.remoteUserMap).call(c)).find(_=>_._audioSSRC===a);p&&zt.firstRemoteFrame(this.store.sessionId,Re.FIRST_AUDIO_RECEIVED,Ne.FIRST_AUDIO_RECEIVED,{peer:p._uintid,subscribeElapse:Fu.measureFromSubscribeStart(this.store.clientId,a),subscribeRequestid:a,p2pid:this.store.p2pId})},r.onFirstVideoDecoded=(a,c,p)=>{var _;const m=Array.from($y(_=this.remoteUserMap).call(_)).find(A=>A._videoSSRC===a);m&&zt.firstRemoteFrame(this.store.sessionId,Re.FIRST_VIDEO_DECODE,Ne.FIRST_VIDEO_DECODE,{peer:m._uintid,videowidth:c,videoheight:p,subscribeElapse:Fu.measureFromSubscribeStart(this.store.clientId,a),subscribeRequestid:a,p2pid:this.store.p2pId})},r.onFirstVideoReceived=a=>{var c;const p=Array.from($y(c=this.remoteUserMap).call(c)).find(_=>_._videoSSRC===a);p&&zt.firstRemoteFrame(this.store.sessionId,Re.FIRST_VIDEO_RECEIVED,Ne.FIRST_VIDEO_RECEIVED,{peer:p._uintid,subscribeElapse:Fu.measureFromSubscribeStart(this.store.clientId,a),subscribeRequestid:a,p2pid:this.store.p2pId})},r.onSelectedLocalCandidateChanged=(a,c)=>{const p="relay"===a.candidateType;"unknown"!==c.candidateType&&p===("relay"===c.candidateType)||this.emit(gi.ConnectionTypeChange,p),se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(pv(c))," -> ").concat(JSON.stringify(pv(a)),")")),ji("info",this,"SelectedLocalCandidateChanged","".concat(JSON.stringify(pv(c))," -> ").concat(JSON.stringify(pv(a))))},r.onSelectedRemoteCandidateChanged=(a,c)=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(pv(c))," -> ").concat(JSON.stringify(pv(a)),")")),ji("info",this,"SelectedRemoteCandidateChanged","".concat(JSON.stringify(pv(c))," -> ").concat(JSON.stringify(pv(a))))}}unbindConnectionEvents(r){r.onConnectionStateChange=void 0,r.onICEConnectionStateChange=void 0,r.onICETransportStateChange=void 0,r.onDTLSTransportStateChange=void 0,r.onDTLSTransportError=void 0,r.onFirstAudioDecoded=void 0,r.onFirstAudioReceived=void 0,r.onFirstVideoDecoded=void 0,r.onFirstVideoReceived=void 0,r.onSelectedLocalCandidateChanged=void 0,r.onSelectedRemoteCandidateChanged=void 0}filterTobeMutedTracks(r){const o=[];if(-1===this.getAllTracks().indexOf(r))return o;const a=this.localTrackMap.get(Un.LocalAudioTrack);if(r instanceof tc&&a?.track instanceof Td)return a.track.isActive||o.push([Un.LocalAudioTrack,a]),o;const c=Array.from(this.localTrackMap.entries()).find(p=>{let[,{track:_}]=p;return r===_});if(c&&(o.push(c),c[0]===Un.LocalVideoTrack)){const p=this.localTrackMap.get(Un.LocalVideoLowTrack);p&&o.push([Un.LocalVideoLowTrack,p])}return o}filterTobeUnmutedTracks(r){const o=[],a=this.localTrackMap.get(Un.LocalAudioTrack);if(r instanceof tc&&a?.track instanceof Td)return a.track.isActive&&o.push([Un.LocalAudioTrack,a]),o;const c=Array.from(this.localTrackMap.entries()).find(p=>{let[,{track:_}]=p;return r===_});if(c)if(c[0]===Un.LocalVideoTrack){o.push(c);const p=this.localTrackMap.get(Un.LocalVideoLowTrack);p&&o.push([Un.LocalVideoLowTrack,p])}else o.push(c);return o}createMuteMessage(r){return r.map(o=>{let a,[c,{track:p,ssrcs:_,id:m}]=o;switch(c){case Un.LocalAudioTrack:a=Zo.Audio;break;case Un.LocalVideoTrack:a=p._hints.includes(qc.SCREEN_TRACK)?Zo.Screen:Zo.High;break;case Un.LocalVideoLowTrack:a=Zo.Low}return{stream_type:a,ssrcs:_,mid:m}})}createUnmuteMessage(r){return r.map(o=>{let a,[c,{track:p,ssrcs:_,id:m}]=o;switch(c){case Un.LocalAudioTrack:a=Zo.Audio;break;case Un.LocalVideoTrack:a=p._hints.includes(qc.SCREEN_TRACK)?Zo.Screen:Zo.High;break;case Un.LocalVideoLowTrack:a=Zo.Low}return{stream_type:a,ssrcs:_,mid:m}})}filterTobeUnSubscribedTracks(r,o){const a=[],c=this.remoteUserMap.get(r);if(!c)return a;if(o){const p=c.get(o);if(!p)return a;a.push([r,{kind:o,id:p}])}else Array.from(c.entries()).forEach(p=>{let[_,m]=p;a.push([r,{kind:_,id:m}])});return a}createUnsubscribeMessage(r){const o=[];return r.forEach(a=>{let[c,{kind:p}]=a;switch(p){case Xr.VIDEO:return void(c._videoSSRC&&o.push({stream_type:Xr.VIDEO,ssrcId:c._videoSSRC}));case Xr.AUDIO:return void(c._audioSSRC&&o.push({stream_type:Xr.AUDIO,ssrcId:c._audioSSRC}))}}),o}createUnsubscribeAllMessage(r){const o=new Map;return r.forEach(a=>{let[c,{kind:p}]=a;if(o.has(c)){let _=o.get(c);_|=p===Xr.VIDEO?jo.Video:jo.Audio,o.set(c,_)}else o.set(c,p===Xr.VIDEO?jo.Video:jo.Audio)}),{users:Array.from(o.entries()).map(a=>{let[c,p]=a;return{stream_id:c.uid,stream_type:p}})}}withdrawRemoteTracks(r){r.forEach(o=>{let[a,{kind:c}]=o;const p=this.remoteUserMap.get(a);p&&(p.delete(c),0===Array.from(p.entries()).length&&this.remoteUserMap.delete(a))})}updateBitrateLimit(r){var o=this;return F(function*(){const a=o.localTrackMap.get(Un.LocalVideoTrack),c=o.localTrackMap.get(Un.LocalVideoLowTrack);a&&(yield a.track.setBitrateLimit(r.uplink)),c&&r.low_stream_uplink&&(yield c.track.setBitrateLimit({max_bitrate:r.low_stream_uplink.bitrate,min_bitrate:r.low_stream_uplink.bitrate||0}))})()}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(r,o){return r.map((a,c)=>{var p;let{stream_type:_}=a;return null===(p=o.find(m=>{let{stream_type:A}=m;return _===A}))||void 0===p?void 0:p.attributes})}tryToUnmuteAudio(r){var o=this;return F(function*(){for(let c=0;c<r.length;c++)if(r[c]instanceof tc){var a;const p=o.filterTobeUnmutedTracks(r[c]);if(0===p.length)continue;yield null===(a=o.connection)||void 0===a?void 0:a.unmuteLocal(p.map(m=>{let[,{id:A}]=m;return A}));const _=o.createUnmuteMessage(p);return void(yield Qo(o,gi.RequestUnmuteLocal,_))}})()}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=r=>{var o;return!(null===(o=this.connection)||void 0===o||!o.getRemoteVideoIsReady(r))},this.statsUploader.requestUpload=(r,o)=>this.emit(gi.RequestUploadStats,r,o),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}requestReconnect(){var r=this;return F(function*(){r.dtlsFailedCount+=1,yield Ic(Ek(r.dtlsFailedCount,wo)),r.emit(gi.RequestReconnect)})()}reconnectP2P(){var r=this;return F(function*(){const o=Array.from(r.localTrackMap.entries()),a=r.createGatewayUnpublishMessage(o);Array.from(r.remoteUserMap.entries()),a.length>0&&(yield Ip(r,gi.RequestUnpublishForReconnectPC,a)),r.disconnectForReconnect(),r.emit(gi.RequestReconnectPC)})()}canPublishLowStream(){return this.localTrackMap.has(Un.LocalVideoTrack)||this.pendingLocalTracks.some(r=>r instanceof Hs)}throwIfTrackTypeNotMatch(r){if(r.filter(o=>o instanceof Hs).length>1)throw new Le(Te.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r.filter(o=>o instanceof tc).length>1&&(r.some(o=>o instanceof tc&&o._bypassWebAudio)||!Yc().webAudioMediaStreamDest))throw new Le(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const o of r){if(o instanceof Hs&&this.pendingLocalTracks.some(a=>a instanceof Hs))throw new Le(Te.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(o instanceof tc&&this.pendingLocalTracks.some(a=>a instanceof tc)&&(!Yc().webAudioMediaStreamDest||o._bypassWebAudio||this.pendingLocalTracks.some(a=>a instanceof tc&&a._bypassWebAudio)))throw new Le(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(r,o){const a=Yc().supportDualStreamEncoding,c=sE(sE({},{width:160,height:120,framerate:15,bitrate:50}),o);let p;p=a?r._mediaStreamTrack.clone():_4(r,c);const _=new Hs(p,sE(sE({},a&&{scaleResolutionDownBy:U7(c,r)}),{},{frameRate:c.framerate,bitrateMax:c.bitrate,bitrateMin:c.bitrate}));return _._hints.push(qc.LOW_STREAM),r.addListener(_r.NEED_CLOSE,()=>{_.close()}),_}globalLock(){var r=this;return F(function*(){return r.mutex.lock("From P2PChannel.globalLock")})()}remoteMediaSsrcChanged(r,o,a){if(!this.connection)return!1;const c=this.remoteUserMap.get(r);if(!c)return!1;const p=c.get(o);if(!p)return!1;const _=this.connection.getRemoteSSRC(p);return void 0!==_&&_!==a}}).prototype,"startP2PConnection",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"startP2PConnection"),Ci.prototype),rr(Ci.prototype,"connect",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"connect"),Ci.prototype),rr(Ci.prototype,"unpublish",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"unpublish"),Ci.prototype),rr(Ci.prototype,"unpublishLowStream",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"unpublishLowStream"),Ci.prototype),rr(Ci.prototype,"subscribe",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"subscribe"),Ci.prototype),rr(Ci.prototype,"massSubscribe",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"massSubscribe"),Ci.prototype),rr(Ci.prototype,"unsubscribe",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"unsubscribe"),Ci.prototype),rr(Ci.prototype,"massUnsubscribe",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"massUnsubscribe"),Ci.prototype),rr(Ci.prototype,"muteRemote",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"muteRemote"),Ci.prototype),rr(Ci.prototype,"unmuteRemote",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"unmuteRemote"),Ci.prototype),rr(Ci.prototype,"hasRemoteMediaWithLock",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"hasRemoteMediaWithLock"),Ci.prototype),rr(Ci.prototype,"disconnectForReconnect",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"disconnectForReconnect"),Ci.prototype),rr(Ci.prototype,"reEstablish",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"reEstablish"),Ci.prototype),rr(Ci.prototype,"updateBitrateLimit",[Tl],Object.getOwnPropertyDescriptor(Ci.prototype,"updateBitrateLimit"),Ci.prototype),cQ=Ci))||cQ;function Tl(r,o,a){const c=r[o];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return a.value=F(function*(){const p=this.mutex,_=yield p.lock("From P2PChannel.".concat(o));try{for(var m=arguments.length,A=new Array(m),v=0;v<m;v++)A[v]=arguments[v];return yield c.apply(this,A)}finally{_()}}),a}function Md(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var ai,dQ="function"==typeof Symbol&&Symbol.observable||"@@observable",_B=function(){return Math.random().toString(36).substring(7).split("").join(".")},pQ={INIT:"@@redux/INIT"+_B(),REPLACE:"@@redux/REPLACE"+_B(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+_B()}};function Nz(r){if("object"!=typeof r||null===r)return!1;for(var o=r;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(r)===o}function vB(r,o,a){var c;if("function"==typeof o&&"function"==typeof a||"function"==typeof a&&"function"==typeof arguments[3])throw new Error(Md(0));if("function"==typeof o&&void 0===a&&(a=o,o=void 0),void 0!==a){if("function"!=typeof a)throw new Error(Md(1));return a(vB)(r,o)}if("function"!=typeof r)throw new Error(Md(2));var p=r,_=o,m=[],A=m,v=!1;function S(){A===m&&(A=m.slice())}function I(){if(v)throw new Error(Md(3));return _}function R(z){if("function"!=typeof z)throw new Error(Md(4));if(v)throw new Error(Md(5));var te=!0;return S(),A.push(z),function(){if(te){if(v)throw new Error(Md(6));te=!1,S();var de=A.indexOf(z);A.splice(de,1),m=null}}}function O(z){if(!Nz(z))throw new Error(Md(7));if(void 0===z.type)throw new Error(Md(8));if(v)throw new Error(Md(9));try{v=!0,_=p(_,z)}finally{v=!1}for(var te=m=A,de=0;de<te.length;de++)(0,te[de])();return z}function B(z){if("function"!=typeof z)throw new Error(Md(10));p=z,O({type:pQ.REPLACE})}function q(){var z,te=R;return(z={subscribe:function(de){if("object"!=typeof de||null===de)throw new Error(Md(11));function ge(){de.next&&de.next(I())}return ge(),{unsubscribe:te(ge)}}})[dQ]=function(){return this},z}return O({type:pQ.INIT}),(c={dispatch:O,subscribe:R,getState:I,replaceReducer:B})[dQ]=q,c}function hW(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function ar(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?hW(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):hW(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}!function(r){r.SET_SESSION_ID="SET_SESSION_ID",r.SET_P2P_ID="SET_P2P_id",r.SET_UID="SET_UID",r.SET_PUB_ID="SET_PUB_ID",r.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",r.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",r.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",r.AVOID_JOIN_START="AVOID_JOIN_START",r.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",r.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",r.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",r.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",r.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",r.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",r.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",r.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",r.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",r.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",r.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",r.RESET_KEY_METRICS="RESET_KEY_METRICS"}(ai||(ai={}));class fW{constructor(o,a,c,p){J(this,"store",void 0),J(this,"reducer",void 0);const _={codec:o,audioCodec:a,mode:c,clientId:p,sessionId:null,p2pId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled"};this.reducer=function(){let m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case ai.SET_SESSION_ID:return ar(ar({},m),{},{sessionId:A.sessionId});case ai.SET_P2P_ID:return ar(ar({},m),{},{p2pId:A.p2pId});case ai.SET_UID:return ar(ar({},m),{},{uid:A.uid});case ai.SET_PUB_ID:return ar(ar({},m),{},{pubId:A.pubId});case ai.KEY_METRIC_CLIENT_CREATED:return ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{clientCreated:A.metric})});case ai.KEY_METRIC_JOIN_START:return ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{joinStart:A.metric})});case ai.AVOID_JOIN_START:return ar(ar({},m),{},{avoidJoinStart:A.avoidJoinStart});case ai.KEY_METRIC_JOIN_END:return ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{joinEnd:A.metric})});case ai.KEY_METRIC_REQUEST_AP_START:return ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{requestAPStart:A.metric})});case ai.KEY_METRIC_REQUEST_AP_END:return ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{requestAPEnd:A.metric})});case ai.KEY_METRIC_JOIN_GATEWAY_START:return ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{joinGatewayStart:A.metric})});case ai.KEY_METRIC_JOIN_GATEWAY_END:return ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{joinGatewayEnd:A.metric})});case ai.KEY_METRIC_PEER_CONNECTION_START:return ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{peerConnectionStart:A.metric})});case ai.KEY_METRIC_PEER_CONNECTION_END:return ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{peerConnectionEnd:A.metric})});case ai.KEY_METRIC_PUBLISH:{const v=m.keyMetrics.publish,S=v.findIndex(I=>I.trackId===A.metric.trackId);return-1!==S?(v[S]=ar(ar({},v[S]),A.metric),ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{publish:[...v]})})):ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{publish:[...m.keyMetrics.publish,A.metric]})})}case ai.KEY_METRIC_SUBSCRIBE:{const v=m.keyMetrics.subscribe,S=v.findIndex(I=>I.userId===A.metric.userId&&I.type===A.metric.type);return-1!==S?(v[S]=ar(ar({},v[S]),A.metric),ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{subscribe:[...v]})})):ar(ar({},m),{},{keyMetrics:ar(ar({},m.keyMetrics),{},{subscribe:[...m.keyMetrics.subscribe,A.metric]})})}case ai.SET_CLOUD_PROXY_SERVER_MODE:return m.cloudProxyServerMode=A.mode,m;case ai.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof A.index?m.joinChannelServiceRecords=[...m.joinChannelServiceRecords,A.record]:(m.joinChannelServiceRecords[A.index]=ar(ar({},m.joinChannelServiceRecords[A.index]),A.record),m.joinChannelServiceRecords=[...m.joinChannelServiceRecords]),m;case ai.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return m.joinChannelServiceRecords=[],m;case ai.RESET_KEY_METRICS:return m.keyMetrics={publish:[],subscribe:[]},m;default:return m}},this.store=vB(this.reducer)}set sessionId(o){this.store.dispatch({type:ai.SET_SESSION_ID,sessionId:o})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get audioCodec(){return this.store.getState().audioCodec}get clientId(){return this.store.getState().clientId}set p2pId(o){this.store.dispatch({type:ai.SET_P2P_ID,p2pId:o})}get p2pId(){return this.store.getState().p2pId}set uid(o){this.store.dispatch({type:ai.SET_UID,uid:o})}get uid(){return this.store.getState().uid}set pubId(o){this.store.dispatch({type:ai.SET_PUB_ID,pubId:o})}get pubId(){return this.store.getState().pubId}set cloudProxyServerMode(o){this.store.dispatch({type:ai.SET_CLOUD_PROXY_SERVER_MODE,mode:o})}get cloudProxyServerMode(){return this.store.getState().cloudProxyServerMode}clientCreated(){this.store.dispatch({type:ai.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:ai.KEY_METRIC_JOIN_START,metric:performance.now()})}get avoidJoinStart(){return this.store.getState().avoidJoinStart}set avoidJoinStart(o){this.store.dispatch({type:ai.AVOID_JOIN_START,avoidJoinStart:o})}joinEnd(){this.store.dispatch({type:ai.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:ai.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:ai.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:ai.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:ai.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:ai.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:ai.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(o,a,c,p){this.store.dispatch({type:ai.KEY_METRIC_PUBLISH,metric:ar(ar({trackId:o,type:a},c&&{publishStart:c}),p&&{publishEnd:p})})}subscribe(o,a,c,p,_){this.store.dispatch({type:ai.KEY_METRIC_SUBSCRIBE,metric:ar(ar(ar({userId:o,type:a},c&&{subscribeStart:c}),p&&{subscribeEnd:p}),_&&{firstFrame:_})})}massSubscribe(o,a,c,p){o.forEach(_=>{this.store.dispatch({type:ai.KEY_METRIC_SUBSCRIBE,metric:ar(ar(ar({userId:_.userId,type:_.type},a&&{subscribeStart:a}),c&&{subscribeEnd:c}),p&&{firstFrame:p})})})}get keyMetrics(){return this.store.getState().keyMetrics}recordJoinChannelService(o,a){"gateway"===o.service&&Array.isArray(o.urls)&&(o.urls=o.urls.map(c=>c.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return"number"!=typeof a?(this.store.dispatch({type:ai.RECORD_JOIN_CHANNEL_SERVICE,record:ar(ar({},o),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.store.getState().joinChannelServiceRecords.length-1):(a<0||a>=this.store.getState().joinChannelServiceRecords.length||this.store.dispatch({type:ai.RECORD_JOIN_CHANNEL_SERVICE,record:o,index:a}),a)}catch{return 0}}resetJoinChannelServiceRecords(){this.store.dispatch({type:ai.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.store.dispatch({type:ai.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.store.getState().joinChannelServiceRecords}catch{return[]}}}let jP;const A4=()=>void 0!==window.isSecureContext;class xz{constructor(o,a){J(this,"time",void 0),J(this,"sequence",void 0),J(this,"name",void 0),J(this,"elapse",void 0),this.name=o,this.time=performance.now(),this.sequence=FU[a].indexOf(o)}setElapse(o){this.elapse=o}}const mW=new Map;class gW{constructor(o,a){J(this,"records",[]),J(this,"_id",void 0),J(this,"_group",void 0),J(this,"_localTimeStamp",void 0),J(this,"_performanceTimeStamp",void 0),this._id=o,this._group=a,this._localTimeStamp=Date.now(),this._performanceTimeStamp=performance.now()}checkPoint(o){const a=new xz(o,this._group);-1===a.sequence&&se.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(a);const c=this.records.find(p=>p.sequence===a.sequence-1);c&&a.setElapse(a.time-c.time)}getRecord(o){return this.records.find(a=>a&&a.name===o)}resetRecords(){this.records.length=0}}function AW(r){let o={};e:for(;!E4(r);){let a=Rg(r);switch(a>>>3){case 0:break e;case 1:o.requestId=yB(r,Rg(r));break;case 2:o.requestType=Rg(r)>>>0;break;case 3:o.scorePorn=QP(r);break;case 4:o.scoreSexy=QP(r);break;case 5:o.scoreNeutral=QP(r);break;case 6:o.requestScene=Rg(r)>>>0;break;case 7:o.scene=Rg(r)>>>0;break;default:fQ(r,7&a)}}return o}function yW(r,o){let a=r.service;void 0!==a&&(ci(o,8),ci(o,a));let c=r.vendor;void 0!==c&&(ci(o,16),ci(o,c));let p=r.token;void 0!==p&&(ci(o,26),xd(o,p));let _=r.callbackUrl;void 0!==_&&(ci(o,34),xd(o,_))}function hQ(r){let o=Rg(r),a=r.limit;return r.limit=r.offset+o,a}function fQ(r,o){switch(o){case 0:for(;128&_Q(r););break;case 2:y4(r,Rg(r));break;case 5:y4(r,4);break;case 1:y4(r,8);break;default:throw new Error("Unimplemented type: "+o)}}let EW=new Float32Array(1);new Uint8Array(EW.buffer);let AB=new Float64Array(1),Xl=new Uint8Array(AB.buffer);function aE(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}let mQ=[];function gQ(){const r=mQ.pop();return r?(r.offset=r.limit=0,r):{bytes:new Uint8Array(64),offset:0,limit:0}}function bW(r){mQ.push(r)}function y4(r,o){if(r.offset+o>r.limit)throw new Error("Skip past limit");r.offset+=o}function E4(r){return r.offset>=r.limit}function KT(r,o){let a=r.bytes,c=r.offset,p=r.limit,_=c+o;if(_>a.length){let m=new Uint8Array(2*_);m.set(a),r.bytes=m}return r.offset=_,_>p&&(r.limit=_),c}function Nd(r,o){let a=r.offset;if(a+o>r.limit)throw new Error("Read past limit");return r.offset+=o,a}function yB(r,o){let a=Nd(r,o),c=String.fromCharCode,p=r.bytes,_="\ufffd",m="";for(let A=0;A<o;A++){let v,S,I,R,O=p[A+a];0==(128&O)?m+=c(O):192==(224&O)?A+1>=o?m+=_:(v=p[A+a+1],128!=(192&v)?m+=_:(R=(31&O)<<6|63&v,R<128?m+=_:(m+=c(R),A++))):224==(240&O)?A+2>=o?m+=_:(v=p[A+a+1],S=p[A+a+2],32896!=(49344&(v|S<<8))?m+=_:(R=(15&O)<<12|(63&v)<<6|63&S,R<2048||R>=55296&&R<=57343?m+=_:(m+=c(R),A+=2))):240==(248&O)?A+3>=o?m+=_:(v=p[A+a+1],S=p[A+a+2],I=p[A+a+3],8421504!=(12632256&(v|S<<8|I<<16))?m+=_:(R=(7&O)<<18|(63&v)<<12|(63&S)<<6|63&I,R<65536||R>1114111?m+=_:(R-=65536,m+=c(55296+(R>>10),56320+(1023&R)),A+=3))):m+=_}return m}function xd(r,o){let a=o.length,c=0;for(let m=0;m<a;m++){let A=o.charCodeAt(m);A>=55296&&A<=56319&&m+1<a&&(A=(A<<10)+o.charCodeAt(++m)-56613888),c+=A<128?1:A<2048?2:A<65536?3:4}ci(r,c);let p=KT(r,c),_=r.bytes;for(let m=0;m<a;m++){let A=o.charCodeAt(m);A>=55296&&A<=56319&&m+1<a&&(A=(A<<10)+o.charCodeAt(++m)-56613888),A<128?_[p++]=A:(A<2048?_[p++]=A>>6&31|192:(A<65536?_[p++]=A>>12&15|224:(_[p++]=A>>18&7|240,_[p++]=A>>12&63|128),_[p++]=A>>6&63|128),_[p++]=63&A|128)}}function b4(r,o){let a=KT(r,o.limit),c=r.bytes,p=o.bytes;for(let _=0,m=o.limit;_<m;_++)c[_+a]=p[_]}function _Q(r){return r.bytes[Nd(r,1)]}function vQ(r,o){let a=KT(r,1);r.bytes[a]=o}function QP(r){let o=Nd(r,8),a=r.bytes;return Xl[0]=a[o++],Xl[1]=a[o++],Xl[2]=a[o++],Xl[3]=a[o++],Xl[4]=a[o++],Xl[5]=a[o++],Xl[6]=a[o++],Xl[7]=a[o++],AB[0]}function S4(r,o){let a=KT(r,8),c=r.bytes;AB[0]=o,c[a++]=Xl[0],c[a++]=Xl[1],c[a++]=Xl[2],c[a++]=Xl[3],c[a++]=Xl[4],c[a++]=Xl[5],c[a++]=Xl[6],c[a++]=Xl[7]}function Rg(r){let o,a=0,c=0;do{o=_Q(r),a<32&&(c|=(127&o)<<a),a+=7}while(128&o);return c}function ci(r,o){for(o>>>=0;o>=128;)vQ(r,127&o|128),o>>>=7;vQ(r,o)}function cE(r,o){let a=o.low>>>0,c=(o.low>>>28|o.high<<4)>>>0,p=o.high>>>24,_=0===p?0===c?a<16384?a<128?1:2:a<1<<21?3:4:c<16384?c<128?5:6:c<1<<21?7:8:p<128?9:10,m=KT(r,_),A=r.bytes;switch(_){case 10:A[m+9]=p>>>7&1;case 9:A[m+8]=9!==_?128|p:127&p;case 8:A[m+7]=8!==_?c>>>21|128:c>>>21&127;case 7:A[m+6]=7!==_?c>>>14|128:c>>>14&127;case 6:A[m+5]=6!==_?c>>>7|128:c>>>7&127;case 5:A[m+4]=5!==_?128|c:127&c;case 4:A[m+3]=4!==_?a>>>21|128:a>>>21&127;case 3:A[m+2]=3!==_?a>>>14|128:a>>>14&127;case 2:A[m+1]=2!==_?a>>>7|128:a>>>7&127;case 1:A[m]=1!==_?128|a:127&a}}var C4={};Object.defineProperty(C4,"__esModule",{value:!0});var I4=function(){function r(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return r.hashStr=function(o,a){return void 0===a&&(a=!1),this.onePassHasher.start().appendStr(o).end(a)},r.hashAsciiStr=function(o,a){return void 0===a&&(a=!1),this.onePassHasher.start().appendAsciiStr(o).end(a)},r._hex=function(o){var a,c,p,_,m=r.hexChars,A=r.hexOut;for(_=0;_<4;_+=1)for(c=8*_,a=o[_],p=0;p<8;p+=2)A[c+1+p]=m.charAt(15&a),A[c+0+p]=m.charAt(15&(a>>>=4)),a>>>=4;return A.join("")},r._md5cycle=function(o,a){var c=o[0],p=o[1],_=o[2],m=o[3];p=((p+=((_=((_+=((m=((m+=((c=((c+=(p&_|~p&m)+a[0]-680876936|0)<<7|c>>>25)+p|0)&p|~c&_)+a[1]-389564586|0)<<12|m>>>20)+c|0)&c|~m&p)+a[2]+606105819|0)<<17|_>>>15)+m|0)&m|~_&c)+a[3]-1044525330|0)<<22|p>>>10)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p&_|~p&m)+a[4]-176418897|0)<<7|c>>>25)+p|0)&p|~c&_)+a[5]+1200080426|0)<<12|m>>>20)+c|0)&c|~m&p)+a[6]-1473231341|0)<<17|_>>>15)+m|0)&m|~_&c)+a[7]-45705983|0)<<22|p>>>10)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p&_|~p&m)+a[8]+1770035416|0)<<7|c>>>25)+p|0)&p|~c&_)+a[9]-1958414417|0)<<12|m>>>20)+c|0)&c|~m&p)+a[10]-42063|0)<<17|_>>>15)+m|0)&m|~_&c)+a[11]-1990404162|0)<<22|p>>>10)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p&_|~p&m)+a[12]+1804603682|0)<<7|c>>>25)+p|0)&p|~c&_)+a[13]-40341101|0)<<12|m>>>20)+c|0)&c|~m&p)+a[14]-1502002290|0)<<17|_>>>15)+m|0)&m|~_&c)+a[15]+1236535329|0)<<22|p>>>10)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p&m|_&~m)+a[1]-165796510|0)<<5|c>>>27)+p|0)&_|p&~_)+a[6]-1069501632|0)<<9|m>>>23)+c|0)&p|c&~p)+a[11]+643717713|0)<<14|_>>>18)+m|0)&c|m&~c)+a[0]-373897302|0)<<20|p>>>12)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p&m|_&~m)+a[5]-701558691|0)<<5|c>>>27)+p|0)&_|p&~_)+a[10]+38016083|0)<<9|m>>>23)+c|0)&p|c&~p)+a[15]-660478335|0)<<14|_>>>18)+m|0)&c|m&~c)+a[4]-405537848|0)<<20|p>>>12)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p&m|_&~m)+a[9]+568446438|0)<<5|c>>>27)+p|0)&_|p&~_)+a[14]-1019803690|0)<<9|m>>>23)+c|0)&p|c&~p)+a[3]-187363961|0)<<14|_>>>18)+m|0)&c|m&~c)+a[8]+1163531501|0)<<20|p>>>12)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p&m|_&~m)+a[13]-1444681467|0)<<5|c>>>27)+p|0)&_|p&~_)+a[2]-51403784|0)<<9|m>>>23)+c|0)&p|c&~p)+a[7]+1735328473|0)<<14|_>>>18)+m|0)&c|m&~c)+a[12]-1926607734|0)<<20|p>>>12)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p^_^m)+a[5]-378558|0)<<4|c>>>28)+p|0)^p^_)+a[8]-2022574463|0)<<11|m>>>21)+c|0)^c^p)+a[11]+1839030562|0)<<16|_>>>16)+m|0)^m^c)+a[14]-35309556|0)<<23|p>>>9)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p^_^m)+a[1]-1530992060|0)<<4|c>>>28)+p|0)^p^_)+a[4]+1272893353|0)<<11|m>>>21)+c|0)^c^p)+a[7]-155497632|0)<<16|_>>>16)+m|0)^m^c)+a[10]-1094730640|0)<<23|p>>>9)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p^_^m)+a[13]+681279174|0)<<4|c>>>28)+p|0)^p^_)+a[0]-358537222|0)<<11|m>>>21)+c|0)^c^p)+a[3]-722521979|0)<<16|_>>>16)+m|0)^m^c)+a[6]+76029189|0)<<23|p>>>9)+_|0,p=((p+=((_=((_+=((m=((m+=((c=((c+=(p^_^m)+a[9]-640364487|0)<<4|c>>>28)+p|0)^p^_)+a[12]-421815835|0)<<11|m>>>21)+c|0)^c^p)+a[15]+530742520|0)<<16|_>>>16)+m|0)^m^c)+a[2]-995338651|0)<<23|p>>>9)+_|0,p=((p+=((m=((m+=(p^((c=((c+=(_^(p|~m))+a[0]-198630844|0)<<6|c>>>26)+p|0)|~_))+a[7]+1126891415|0)<<10|m>>>22)+c|0)^((_=((_+=(c^(m|~p))+a[14]-1416354905|0)<<15|_>>>17)+m|0)|~c))+a[5]-57434055|0)<<21|p>>>11)+_|0,p=((p+=((m=((m+=(p^((c=((c+=(_^(p|~m))+a[12]+1700485571|0)<<6|c>>>26)+p|0)|~_))+a[3]-1894986606|0)<<10|m>>>22)+c|0)^((_=((_+=(c^(m|~p))+a[10]-1051523|0)<<15|_>>>17)+m|0)|~c))+a[1]-2054922799|0)<<21|p>>>11)+_|0,p=((p+=((m=((m+=(p^((c=((c+=(_^(p|~m))+a[8]+1873313359|0)<<6|c>>>26)+p|0)|~_))+a[15]-30611744|0)<<10|m>>>22)+c|0)^((_=((_+=(c^(m|~p))+a[6]-1560198380|0)<<15|_>>>17)+m|0)|~c))+a[13]+1309151649|0)<<21|p>>>11)+_|0,p=((p+=((m=((m+=(p^((c=((c+=(_^(p|~m))+a[4]-145523070|0)<<6|c>>>26)+p|0)|~_))+a[11]-1120210379|0)<<10|m>>>22)+c|0)^((_=((_+=(c^(m|~p))+a[2]+718787259|0)<<15|_>>>17)+m|0)|~c))+a[9]-343485551|0)<<21|p>>>11)+_|0,o[0]=c+o[0]|0,o[1]=p+o[1]|0,o[2]=_+o[2]|0,o[3]=m+o[3]|0},r.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(r.stateIdentity),this},r.prototype.appendStr=function(o){var a,c,p=this._buffer8,_=this._buffer32,m=this._bufferLength;for(c=0;c<o.length;c+=1){if((a=o.charCodeAt(c))<128)p[m++]=a;else if(a<2048)p[m++]=192+(a>>>6),p[m++]=63&a|128;else if(a<55296||a>56319)p[m++]=224+(a>>>12),p[m++]=a>>>6&63|128,p[m++]=63&a|128;else{if((a=1024*(a-55296)+(o.charCodeAt(++c)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");p[m++]=240+(a>>>18),p[m++]=a>>>12&63|128,p[m++]=a>>>6&63|128,p[m++]=63&a|128}m>=64&&(this._dataLength+=64,r._md5cycle(this._state,_),m-=64,_[0]=_[16])}return this._bufferLength=m,this},r.prototype.appendAsciiStr=function(o){for(var a,c=this._buffer8,p=this._buffer32,_=this._bufferLength,m=0;;){for(a=Math.min(o.length-m,64-_);a--;)c[_++]=o.charCodeAt(m++);if(_<64)break;this._dataLength+=64,r._md5cycle(this._state,p),_=0}return this._bufferLength=_,this},r.prototype.appendByteArray=function(o){for(var a,c=this._buffer8,p=this._buffer32,_=this._bufferLength,m=0;;){for(a=Math.min(o.length-m,64-_);a--;)c[_++]=o[m++];if(_<64)break;this._dataLength+=64,r._md5cycle(this._state,p),_=0}return this._bufferLength=_,this},r.prototype.getState=function(){var o=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[o[0],o[1],o[2],o[3]]}},r.prototype.setState=function(o){var a,c=o.buffer,p=o.state,_=this._state;for(this._dataLength=o.length,this._bufferLength=o.buflen,_[0]=p[0],_[1]=p[1],_[2]=p[2],_[3]=p[3],a=0;a<c.length;a+=1)this._buffer8[a]=c.charCodeAt(a)},r.prototype.end=function(o){void 0===o&&(o=!1);var a=this._bufferLength,c=this._buffer8,p=this._buffer32,_=1+(a>>2);this._dataLength+=a;var m=8*this._dataLength;if(c[a]=128,c[a+1]=c[a+2]=c[a+3]=0,p.set(r.buffer32Identity.subarray(_),_),a>55&&(r._md5cycle(this._state,p),p.set(r.buffer32Identity)),m<=4294967295)p[14]=m;else{var A=m.toString(16).match(/(.*?)(.{0,8})$/);if(null===A)return;var v=parseInt(A[2],16),S=parseInt(A[1],16)||0;p[14]=v,p[15]=S}return r._md5cycle(this._state,p),o?this._state:r._hex(this._state)},r.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),r.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r.hexChars="0123456789abcdef",r.hexOut=[],r.onePassHasher=new r,r}(),AQ=C4.Md5=I4;if("5d41402abc4b2a76b9719d911017c592"!==I4.hashStr("hello"))throw new Error("Md5 self test failed.");const Lh=function(){var r=F(function*(o,a,c){return yield(p=F(function*(_,m,A){const S=new Uint8Array(AQ.hashStr(""+m+A,!0).buffer).slice(0,16),I=S.slice(0,12),R=yield window.crypto.subtle.importKey("raw",S,"AES-GCM",!0,["encrypt"]);return new Uint8Array(yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:I},R,_))}),function(_,m,A){return p.apply(this,arguments)})(o.buffer,a,c);var p});return function(a,c,p){return r.apply(this,arguments)}}();function d0(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}const SW=new Map([["moderation",1],["supervise",2],["all",3]]);class EB extends ko{get connectionState(){return this._connectionState}set connectionState(o){if(this._connectionState===o)return;const a=this._connectionState;this._connectionState=o,this.emit(os.CONNECTION_STATE_CHANGE,a,o)}get quality(){return this._quality}set quality(o){this._quality=o>1?1:o<.1?.1:o,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(o){super(),J(this,"name","AgoraRTCVideoContentInspect"),J(this,"_connectionState",Yl.CONNECTING),J(this,"_innerConnectionState",void 0),J(this,"sequence",0),J(this,"inspectStartTime",void 0),J(this,"workerManagerConnection",void 0),J(this,"workerConnection",void 0),J(this,"workerMessageLengthLimit",void 0),J(this,"inspectIntervalMinimum",void 0),J(this,"qualityRatio",void 0),J(this,"_connectInfo",void 0),J(this,"_cancelTokenSource",Ms.CancelToken.source()),J(this,"_retryConfig",void 0),J(this,"wmSequence",0),J(this,"inspectInterval",void 0),J(this,"inspectTimer",null),J(this,"ossFilePrefix",void 0),J(this,"extraInfo",void 0),J(this,"inspectType","all"),J(this,"_quality",1),J(this,"qualityTimer",null),J(this,"_inspectId",void 0),J(this,"_needWorkUrlOnly",!1),J(this,"inspectImage",()=>{if(this.connectionState!==Yl.CONNECTED)throw new Le(Te.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{if(this.connectionState!==Yl.CONNECTED)return se.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState),void jn("debug",this,"Inspect State is not connected , ".concat(this.connectionState));this.requestToInspectImage()},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=_s(5,"inspect-"),this.workerMessageLengthLimit=xt("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=xt("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=xt("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=o.interval,this.ossFilePrefix=o.ossFilePrefix,this.extraInfo=o.extraInfo,this.inspectType=o.inspectType||"all",this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new o0("worker-manager-"+this._inspectId,wo),this.on(os.STATE_CHANGE,(a,c)=>{this._innerConnectionState=a,se.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Nu[a]," ").concat(c||"")),Wl("debug",["Inspect",this._inspectId],os.STATE_CHANGE,"".concat(Nu[a]," ").concat(c||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new o0("worker-"+this._inspectId,wo),this.handleWorkerEvents()}init(o,a){var c=this;return F(function*(){c.emit(os.STATE_CHANGE,Nu.CONNECT_AP),c._connectInfo=o;const p=c._cancelTokenSource.token;return c._retryConfig=a,new qn((_,m)=>{c.on(os.CONNECTION_STATE_CHANGE,(A,v)=>{v===Yl.CONNECTED&&_()}),c.requestAP(o,p,a).then(A=>{c.connectWorkerManager(A)}).catch(A=>{m(A)})})})()}requestAP(o,a,c){var p=this;return F(function*(){const _=xt("WEBCS_DOMAIN").map(v=>"https://".concat(v,"/api/v1")),m=yield function(v,S,I,R){let{appId:O,areaCode:B,cname:q,sid:z,token:te,uid:de}=S;DV++;const ge="image_moderation_api",Se={service_name:ge,json_body:JSON.stringify({appId:O,areaCode:B,cname:q,command:"allocateEdge",requestId:DV,seq:DV,sid:z,token:te,ts:Date.now(),uid:de+""})};let Me,dt,kt=v[0];return Ss(F(function*(){Me=Date.now();const Mt=yield Cp(kt,{data:Se,cancelToken:I,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(dt=Date.now()-Me,0!==Mt.code){const yn=new Le(Te.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Mt.code,{retry:!0,responseTime:dt});throw se.error(yn.toString()),$t("error",["AjaxAPI"],"requestImageInspectAP",void 0,yn.toString()),yn}const Lt=JSON.parse(Mt.json_body);if(200!==Lt.code){const yn=new Le(Te.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Lt.code,", reason: ").concat(Lt.reason),{code:Lt.code,responseTime:dt});throw se.error(yn.toString()),$t("error",["AjaxAPI"],"requestImageInspectAP",void 0,yn.toString()),yn}if(!Lt.servers||!Array.isArray(Lt.servers)||0===Lt.servers.length){const yn=new Le(Te.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Lt.code,responseTime:dt});throw se.error(yn.toString()),$t("error",["AjaxAPI"],"requestImageInspectAP",void 0,yn.toString()),yn}const Vn=xt("VIDEO_INSPECT_WORKER_MANAGER_HOST"),wn=xt("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Lt.servers.map(yn=>{let{address:Ct,wss:We}=yn;if(Ct&&We)return"wss://".concat(Ct.replace(/\./g,"-"),".").concat(Vn,":").concat(wn||We)}).filter(yn=>!!yn),workerToken:Lt.workerToken,vid:Lt.vid,responseTime:dt}}),(Mt,Lt)=>(zt.apworkerEvent(z,{success:!0,sc:200,serviceName:ge,responseDetail:JSON.stringify(Mt.addressList),firstSuccess:0===Lt,responseTime:dt,serverIp:v[Lt%v.length]}),!1),(Mt,Lt)=>(zt.apworkerEvent(z,{success:!1,sc:Mt.data&&Mt.data.code||200,serviceName:ge,responseTime:dt,serverIp:v[Lt%v.length]}),!!(Mt.code!==Te.OPERATION_ABORTED&&Mt.code!==Te.UNEXPECTED_RESPONSE||Mt.data&&Mt.data.retry)&&(kt=v[(Lt+1)%v.length],!0)),R)}(_,o,a,c);p.emit(os.STATE_CHANGE,Nu.AP_CONNECTED);const{addressList:A}=m;return p.wmSequence++,A})()}connectWorkerManager(o){var a=arguments,c=this;return F(function*(){c._needWorkUrlOnly=a.length>1&&void 0!==a[1]&&a[1],c.emit(os.STATE_CHANGE,Nu.CONNECT_WORKER_MANAGER),yield c.workerManagerConnection.init(o,1e4)})()}connectWorker(o){var a=this;return F(function*(){yield a.workerConnection.init([o])})()}handleWorkerManagerEvents(){var o=this;this.workerManagerConnection.on(In.CONNECTED,F(function*(){o.emit(os.STATE_CHANGE,Nu.WORKER_MANAGER_CONNECTED,o.workerManagerConnection.url),o.workerManagerConnection.sendMessage({appId:o._connectInfo.appId,cname:o._connectInfo.cname,uid:o._connectInfo.uid+"",sdkVersion:"4.12.1",sid:o._connectInfo.sid,seq:o.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(In.CLOSED,()=>{this._innerConnectionState<Nu.GET_WORKER_MANAGER_RESPONSE&&(se.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker")),Wl("debug",["Inspect",this._inspectId],"workerManagerConnectionClosed"))}),this.workerManagerConnection.on(In.FAILED,()=>{this._innerConnectionState<Nu.GET_WORKER_MANAGER_RESPONSE&&(se.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker")),Wl("debug",["Inspect",this._inspectId],"workerManagerConnectionFailed"))}),this.workerManagerConnection.on(In.RECONNECTING,()=>{this._innerConnectionState<Nu.GET_WORKER_MANAGER_RESPONSE&&(se.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker")),Wl("debug",["Inspect",this._inspectId],"workerManagerConnectionReconnecting"))}),this.workerManagerConnection.on(In.ON_MESSAGE,function(){var a=F(function*(c){o.emit(os.STATE_CHANGE,Nu.GET_WORKER_MANAGER_RESPONSE);const p=o.workerManagerConnection.url;o.workerManagerConnection.close();const _=JSON.parse(c.data);if(200!==_.code)throw se.error("[".concat(o._inspectId,"] Unexpected code ").concat(_.code," from worker manager")),jn("error",o,"Unexpected code ".concat(_.code," from worker manager")),new Le(Te.UNEXPECTED_RESPONSE,"response code of worker is unexpected",_);if(!(_.serverResponse&&_.serverResponse.portWss&&p))throw se.error("[".concat(o._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(_))),jn("error",o,"Unexpected content from worker manager : "+JSON.stringify(_)),new Le(Te.UNEXPECTED_RESPONSE,"response content of worker is unexpected",_);{const m=xt("VIDEO_INSPECT_WORKER_PORT")||_.serverResponse.portWss,A=p.replace(/:\d+\/?$/,":".concat(m));o.emit(os.STATE_CHANGE,Nu.CONNECT_WORKER,A),o._needWorkUrlOnly?o.emit(os.REQUEST_NEW_WORKER_URL,A):yield o.connectWorker(A)}});return function(c){return a.apply(this,arguments)}}()),this.workerManagerConnection.on(In.WILL_RECONNECT,(a,c)=>{c(a)}),this.workerManagerConnection.on(In.REQUEST_NEW_URLS,(a,c)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(a).catch(c)})}handleWorkerEvents(){var o=this;this.workerConnection.on(In.CONNECTED,F(function*(){o.emit(os.STATE_CHANGE,Nu.WORKER_CONNECTED,o.workerConnection.url),o.connectionState=Yl.CONNECTED})),this.workerConnection.on(In.ON_MESSAGE,function(){var a=F(function*(c){if(c.data instanceof ArrayBuffer){const _=function vW(r){return function(a){let c={};e:for(;!E4(a);){let p=Rg(a);switch(p>>>3){case 0:break e;case 1:c.code=Rg(a);break;case 2:c.msg=yB(a,Rg(a));break;case 3:{let _=hQ(a);c.data=AW(a),a.limit=_;break}default:fQ(a,7&p)}}return c}({bytes:o=r,offset:0,limit:o.length});var o}(new Uint8Array(c.data));if(xt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&se.debug("[".concat(o._inspectId,"] Response message for worker of inspect content "),JSON.stringify(_)),200===_.code){if("supervise"===o.inspectType)return void o.emit(os.INSPECT_RESULT,void 0,void 0);if(_.data&&_.data.scorePorn&&_.data.scoreSexy&&_.data.scoreNeutral){var p;const m={porn:_.data.scorePorn,sexy:_.data.scoreSexy,neutral:_.data.scoreNeutral},A=nf(p=Object.keys(m)).call(p,(S,I)=>m[S]>m[I]?S:I,"porn"),v=Object.keys(m).find(S=>S===A);o.emit(os.INSPECT_RESULT,v)}else o.emit(os.INSPECT_RESULT,void 0,new Le(Te.UNEXPECTED_RESPONSE,_.code+"","There is an unexpected data on message"))}else o.emit(os.INSPECT_RESULT,void 0,new Le(Te.UNEXPECTED_RESPONSE,_.code+"",_.msg))}else se.error("[".concat(o._inspectId,"] Unexpected message type from worker")),jn("error",o,"Unexpected message type from worker"),o.emit(os.INSPECT_RESULT,void 0,new Le(Te.UNEXPECTED_RESPONSE,"invalid worker message type"))});return function(c){return a.apply(this,arguments)}}()),this.workerConnection.on(In.CLOSED,()=>{this.connectionState=Yl.CLOSED}),this.workerConnection.on(In.FAILED,()=>{this.connectionState=Yl.CLOSED}),this.workerConnection.on(In.RECONNECTING,()=>{this.connectionState=this.connectionState===Yl.CONNECTED?Yl.RECONNECTING:Yl.CONNECTING}),this.workerConnection.on(In.WILL_RECONNECT,(a,c)=>{"recover"===a&&c(a),c("tryNext")}),this.workerConnection.on(In.REQUEST_NEW_URLS,(a,c)=>{this.workerManagerConnection.close(),this.once(os.REQUEST_NEW_WORKER_URL,p=>{a([p])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(p=>{this.connectWorkerManager(p,!0)}).catch(p=>{c(p)})})}static intToLong(o){return{low:o|=0,high:o>>31,unsigned:o>=0}}requestToInspectImage(){var o=this;return F(function*(){o.sequence++;const a=eE(o,os.CLIENT_LOCAL_VIDEO_TRACK),c={appId:o._connectInfo.appId,cname:o._connectInfo.cname,cid:o._connectInfo.cid,sid:o._connectInfo.sid,uid:o._connectInfo.uid,vid:o._connectInfo.vid};if(a){if(!a.isPlaying)return void o.emit(os.INSPECT_RESULT,void 0,new Le(Te.INVALID_OPERATION,"Only the track being played can be inspected"));const p=yield o.generateRequestData(a,c);o.workerConnection.sendMessage(p,!0,!0)}else o.emit(os.INSPECT_RESULT,void 0,new Le(Te.INVALID_OPERATION,"Only the track being published can be inspected"))})()}generateRequestData(o,a){var c=this;return F(function*(){let{appId:p,cname:_,cid:m,vid:A,sid:v,uid:S}=a;const I=Date.now(),R=yield o.getCurrentFrameImage("image/jpeg",c.quality),O=yield Lh(R,p,_),B=c.sequence+"-"+m+"-"+S+"-"+I+"-"+_s(12,""),q={appId:p,cid:m,cname:_,deviceId:"",elapse:EB.intToLong(Number(I-c.inspectStartTime)),fileSize:O.byteLength,jpgEncryption:2,height:R.height,width:R.width,jpg:O,networkType:6,osType:7,requestId:B,sdkVersion:"4.12.1",sequence:c.sequence,sid:v,timestamp:EB.intToLong(I),uid:S,vid:A,service:SW.get(c.inspectType)||3,callbackData:c.extraInfo,ossFilePrefix:c.ossFilePrefix};void 0===c.extraInfo&&delete q.callbackData,void 0===c.ossFilePrefix&&delete q.ossFilePrefix;const z=function _W(r){let o=gQ();return function(a,c){let p=a.appId;void 0!==p&&(ci(c,10),xd(c,p));let _=a.cid;void 0!==_&&(ci(c,16),ci(c,_));let m=a.cname;void 0!==m&&(ci(c,26),xd(c,m));let A=a.deviceId;void 0!==A&&(ci(c,34),xd(c,A));let v=a.elapse;void 0!==v&&(ci(c,40),cE(c,v));let S=a.fileSize;void 0!==S&&(ci(c,48),cE(c,aE(S)));let I=a.height;void 0!==I&&(ci(c,56),cE(c,aE(I)));let R=a.jpg;void 0!==R&&(ci(c,66),ci(c,R.length),function(n,t){let e=KT(n,t.length);n.bytes.set(t,e)}(c,R));let O=a.networkType;void 0!==O&&(ci(c,72),cE(c,aE(O)));let B=a.osType;void 0!==B&&(ci(c,80),cE(c,aE(B)));let q=a.requestId;void 0!==q&&(ci(c,90),xd(c,q));let z=a.sdkVersion;void 0!==z&&(ci(c,98),xd(c,z));let te=a.sequence;void 0!==te&&(ci(c,104),cE(c,aE(te)));let de=a.sid;void 0!==de&&(ci(c,114),xd(c,de));let ge=a.timestamp;void 0!==ge&&(ci(c,120),cE(c,ge));let Se=a.uid;void 0!==Se&&(ci(c,128),ci(c,Se));let Me=a.vid;void 0!==Me&&(ci(c,136),ci(c,Me));let dt=a.width;void 0!==dt&&(ci(c,144),cE(c,aE(dt)));let kt=a.service;void 0!==kt&&(ci(c,152),ci(c,kt));let Mt=a.callbackData;void 0!==Mt&&(ci(c,162),xd(c,Mt));let Lt=a.jpgEncryption;void 0!==Lt&&(ci(c,168),ci(c,Lt));let Vn=a.requestType;void 0!==Vn&&(ci(c,176),ci(c,Vn));let wn=a.scorePorn;void 0!==wn&&(ci(c,185),S4(c,wn));let yn=a.scoreSexy;void 0!==yn&&(ci(c,193),S4(c,yn));let Ct=a.scoreNeutral;void 0!==Ct&&(ci(c,201),S4(c,Ct));let We=a.scene;void 0!==We&&(ci(c,208),ci(c,We));let lt=a.ossFilePrefix;void 0!==lt&&(ci(c,218),xd(c,lt));let At=a.serviceVendor;if(void 0!==At)for(let n of At){ci(c,226);let t=gQ();yW(n,t),ci(c,t.limit),b4(c,t),bW(t)}}(r,o),function(a){let c=a.bytes,p=a.limit;return c.length===p?c:c.subarray(0,p)}(o)}(q);if(z.byteLength<c.workerMessageLengthLimit){if(xt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const te=function(de){for(var ge=1;ge<arguments.length;ge++){var Se=null!=arguments[ge]?arguments[ge]:{};ge%2?d0(Object(Se),!0).forEach(function(Me){J(de,Me,Se[Me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Se)):d0(Object(Se)).forEach(function(Me){Object.defineProperty(de,Me,Object.getOwnPropertyDescriptor(Se,Me))})}return de}({},q);delete te.jpg,se.debug("[".concat(c._inspectId,"] Request message for worker of inspect content "),JSON.stringify(te)),jn("debug",c,"Request message for worker of inspect content ".concat(JSON.stringify(te)))}return z}return c.quality=c.quality*c.qualityRatio,yield c.generateRequestData(o,{appId:p,cname:_,cid:m,vid:A,sid:v,uid:S})})()}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Ms.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Yl.CLOSED,this.emit(os.STATE_CHANGE,Nu.CLOSED)}}var w4,yQ,T4,HP,EQ,bQ,bB,SQ,R4,CQ,IQ,as;function wQ(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function zT(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?wQ(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):wQ(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let SB=(w4=xa("AgoraRTCClient","store.clientId"),yQ=Gk({report:zt}),T4=Gk(),HP=Gk({report:zt}),EQ=Wk(),bQ=Gk({report:zt}),bB=Wk({report:zt}),SQ=Wk({report:zt}),R4=Wk({report:zt}),CQ=Gk({reportResult:!0,report:zt}),w4((rr((as=class extends ko{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}constructor(r){var o;let a;if(super(),o=this,J(this,"store",void 0),J(this,"_uid",void 0),J(this,"_channelName",void 0),J(this,"_uintUid",void 0),J(this,"_users",[]),J(this,"_codec",void 0),J(this,"_mode",void 0),J(this,"_config",void 0),J(this,"_clientId",void 0),J(this,"_appId",void 0),J(this,"_sessionId",null),J(this,"_key",void 0),J(this,"_joinInfo",void 0),J(this,"_gateway",void 0),J(this,"_statsCollector",void 0),J(this,"_configDistribute",void 0),J(this,"_leaveMutex",new Il("client-leave")),J(this,"_publishMutex",new Il("client-publish")),J(this,"_renewTokenMutex",new Il("client-renewtoken")),J(this,"_subscribeMutex",new Il("client-subscribe")),J(this,"_encryptionMode","none"),J(this,"_encryptionSecret",null),J(this,"_encryptionSalt",null),J(this,"_proxyServer",void 0),J(this,"_performanceRecorder",void 0),J(this,"_turnServer",{servers:[],mode:"auto"}),J(this,"_cloudProxyServerMode","disabled"),J(this,"_isDualStreamEnabled",!1),J(this,"_defaultStreamFallbackType",void 0),J(this,"_lowStreamParameter",void 0),J(this,"_streamFallbackTypeCacheMap",new Map),J(this,"_remoteStreamTypeCacheMap",new Map),J(this,"_axiosCancelSource",Ms.CancelToken.source()),J(this,"_audioVolumeIndicationInterval",void 0),J(this,"_networkQualityInterval",void 0),J(this,"_userOfflineTimeout",void 0),J(this,"_streamRemovedTimeout",void 0),J(this,"_injectStreamingClient",void 0),J(this,"_liveTranscodeStreamingClient",void 0),J(this,"_liveRawStreamingClient",void 0),J(this,"_channelMediaRelayClient",void 0),J(this,"_networkQualitySensitivity","normal"),J(this,"_p2pChannel",void 0),J(this,"_useLocalAccessPoint",!1),J(this,"_joinAndNotLeaveYet",!1),J(this,"_numberOfJoinCount",0),J(this,"_remoteDefaultVideoStreamType",void 0),J(this,"_inspect",void 0),J(this,"_handleLocalTrackEnable",(c,p,_)=>{this.publish(c,!1).then(p).catch(_)}),J(this,"_handleLocalTrackDisable",(c,p,_)=>{this.unpublish(c).then(p).catch(_)}),J(this,"_handleUserOnline",c=>{this.isStringUID&&"string"!=typeof c.uid&&(se.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID")),jn("error",this,"StringUID is Mixed with UintUID"));const p=this._users.find(_=>_.uid===c.uid);if(p)p._trust_in_room_=!0;else{const _=new XL(c.uid,c.uint_id||c.uid);this._users.push(_),se.debug("[".concat(this._clientId,"] user online"),c.uid),ku("info",this,"user-joined",{uid:c.uid}),this.emit(St.USER_JOINED,_)}}),J(this,"_handleUserOffline",c=>{const p=this._users.find(_=>_.uid===c.uid);p&&(this._handleRemoveStream(c),q3(this._users,p),this._remoteStreamTypeCacheMap.delete(p.uid),this._streamFallbackTypeCacheMap.delete(p.uid),se.debug("[".concat(this._clientId,"] user offline"),c.uid,"reason:",c.reason),ku("info",this,"user-left",{reason:c.reason,uid:c.uid}),this.emit(St.USER_LEAVED,p,c.reason))}),J(this,"_handleAddAudioOrVideoStream",(c,p,_,m,A,v,S)=>{const I=this._users.find(O=>O.uid===p);if(!I)return se.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)")),void ji("error",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),"can not find target user!");se.debug("[".concat(this._clientId,"] stream added with uid ").concat(p,", type ").concat(c)),ji("debug",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),{uid:p,mediaType:c});const R="audio"===c?I.hasAudio:I.hasVideo;I._uintid||(I._uintid=A||p),"audio"===c?I._trust_audio_stream_added_state_=!0:I._trust_video_stream_added_state_=!0,"audio"===c?(I._audio_added_=!0,void 0!==_&&(I._audioSSRC=_),void 0!==m&&(I._cname=m),v&&(I._audioOrtc=v)):(I._video_added_=!0,void 0!==_&&(I._videoSSRC=_),void 0!==m&&(I._cname=m),void 0!==S&&(I._rtxSsrcId=S),v&&(I._videoOrtc=v)),("audio"===c?I.hasAudio:I.hasVideo)&&!R&&(se.info("[".concat(this._clientId,"] remote user ").concat(I.uid," published ").concat(c)),jn("info",this,"remote user ".concat(I.uid," published ").concat(c)),ku("info",this,"user-published",{uid:I.uid,mediaType:c}),this.emit(St.USER_PUBLISHED,I,c)),"video"===c?zt.onGatewayStream(this._sessionId,Re.ON_ADD_VIDEO_STREAM,Ne.ON_ADD_VIDEO_STREAM,{peer:A||p}):zt.onGatewayStream(this._sessionId,Re.ON_ADD_AUDIO_STREAM,Ne.ON_ADD_AUDIO_STREAM,{peer:A||p}),this._p2pChannel.remoteMediaSsrcChanged(I,c,_)&&this._p2pChannel.unsubscribe(I,c,!0).then(()=>{se.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(I.uid," after rejoin because SSRC id changed.")),this._subscribe(I,c,!0).catch(O=>{se.error("[".concat(this._clientId,"] resubscribe error"),O.toString()),jn("error",this,"resubscribe error: ".concat(O.toString()))})}),this._p2pChannel.hasPendingRemoteMedia(I,c)&&(se.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(I.uid," after reconnect.")),this._subscribe(I,c,!0).catch(O=>{se.error("[".concat(this._clientId,"] resubscribe error"),O.toString()),jn("error",this,"resubscribe error: ".concat(O.toString()))}))}),J(this,"_handleRemoveStream",c=>{const p=this._users.find(m=>m.uid===c.uid);if(!p)return se.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)")),void ji("warning",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid,info:"can not find target user!"});se.debug("[".concat(this._clientId,"] stream removed with uid ").concat(c.uid)),ji("debug",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid});let _=()=>{};p.hasAudio&&p.hasVideo?_=()=>{se.info("[".concat(this._clientId,"] remote user ").concat(p.uid," unpublished audio track")),ku("info",this,"user-unpublished",{uid:p.uid,mediaType:"audio"}),this.emit(St.USER_UNPUBLISHED,p,"audio"),se.info("[".concat(this._clientId,"] remote user ").concat(p.uid," unpublished video track")),ku("info",this,"user-unpublished",{uid:p.uid,mediaType:"video"}),this.emit(St.USER_UNPUBLISHED,p,"video")}:p.hasVideo?_=()=>{se.info("[".concat(this._clientId,"] remote user ").concat(p.uid," unpublished video track")),ku("info",this,"user-unpublished",{uid:p.uid,mediaType:"video"}),this.emit(St.USER_UNPUBLISHED,p,"video")}:p.hasAudio&&(_=()=>{se.info("[".concat(this._clientId,"] remote user ").concat(p.uid," unpublished audio track")),ku("info",this,"user-unpublished",{uid:p.uid,mediaType:"audio"}),this.emit(St.USER_UNPUBLISHED,p,"audio")}),p._trust_audio_stream_added_state_=!0,p._trust_video_stream_added_state_=!0,p._audio_added_=!1,p._video_added_=!1,this._p2pChannel.unsubscribe(p).then(m=>{if(m)return this._gateway.unsubscribe(m,p.uid)}),p._audioSSRC=void 0,p._videoSSRC=void 0,p._audioOrtc=void 0,p._videoOrtc=void 0,p._rtxSsrcId=void 0,zt.onGatewayStream(this._sessionId,Re.ON_REMOVE_STREAM,Ne.ON_REMOVE_STREAM,{peer:c.uint_id||c.uid}),_()}),J(this,"_handleSetStreamLocalEnable",(c,p,_)=>{const m=this._users.find(S=>S.uid===p);if(!m)return se.error("[".concat(this._clientId,"] can not find target user!(disable_local)")),void ji("error",this,"disable_local_video","can not find target user!(disable_local)");se.debug("[".concat(this._clientId,"] local ").concat(c," ").concat(_?"enabled":"disabled"," with uid ").concat(p)),ji("debug",this,"disable_local_video","local ".concat(c," ").concat(_?"enabled":"disabled"," with uid ").concat(p));const A="audio"===c?m.hasAudio:m.hasVideo;if("audio"===c){m._trust_audio_enabled_state_=!0;const S=m._audio_enabled_;if(m._audio_enabled_=_,m._audio_enabled_===S)return;{const I=m._audio_enabled_?"enable-local-audio":"disable-local-audio";se.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(p,", msg: ").concat(I)),cr("debug",this,"user-info-updated",{uid:p,msg:I}),this.emit(St.USER_INFO_UPDATED,p,I)}}else{m._trust_video_enabled_state_=!0;const S=m._video_enabled_;if(m._video_enabled_=_,m._video_enabled_===S)return;{const I=m._video_enabled_?"enable-local-video":"disable-local-video";se.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(p,", msg: ").concat(I)),cr("debug",this,"user-info-updated",{uid:p,msg:I}),this.emit(St.USER_INFO_UPDATED,p,I)}}const v="audio"===c?m.hasAudio:m.hasVideo;return A!==v?!A&&v?(se.info("[".concat(this._clientId,"] remote user ").concat(p," published ").concat(c)),ku("info",this,"user-published",{uid:p,mediaType:c}),void this.emit(St.USER_PUBLISHED,m,c)):("video"===c&&m._videoTrack&&m._videoTrack._destroy(),this._p2pChannel.muteRemote(m,c),se.info("[".concat(this._clientId,"] remote user ").concat(p," unpublished ").concat(c)),ku("info",this,"user-unpublished",{uid:p,mediaType:c}),void this.emit(St.USER_UNPUBLISHED,m,c)):void 0}),J(this,"_handleMuteStream",(c,p,_)=>{se.debug("[".concat(this._clientId,"] receive mute message"),c,p,_),ji("debug",this,"mute_".concat(p),_);const m=this._users.find(S=>S.uid===c);if(!m)return se.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(c)),void ji("warning",this,"mute_".concat(p),"can not find remote user, ignore mute event, uid: ".concat(c));const A="audio"===p?m.hasAudio:m.hasVideo;if("audio"===p){m._trust_audio_mute_state_=!0;const S=m._audio_muted_;if(m._audio_muted_=_,m._audio_muted_===S)return;{const I=m._audio_muted_?"mute-audio":"unmute-audio";se.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(I)),cr("debug",this,"user-info-updated",{uid:c,msg:I}),this.emit(St.USER_INFO_UPDATED,c,I)}}else{m._trust_video_mute_state_=!0;const S=m._video_muted_;if(m._video_muted_=_,m._video_muted_===S)return;{const I=m._video_muted_?"mute-video":"unmute-video";se.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(I)),cr("debug",this,"user-info-updated",{uid:c,msg:I}),this.emit(St.USER_INFO_UPDATED,c,I)}}const v="audio"===p?m.hasAudio:m.hasVideo;if(A!==v){if(!A&&v)return("audio"===p?m._audioSSRC:m._videoSSRC)?(se.info("[".concat(this._clientId,"] remote user ").concat(c," published ").concat(p)),ku("info",this,"user-published",{uid:m.uid,mediaType:p}),void this.emit(St.USER_PUBLISHED,m,p)):void se.warning("[".concat(this._clientId,"] remote user ").concat(c," receive ").concat(p," unmute message  before add stream message, ").concat(p," SSRC doesn't exist yet."));"video"===p&&m._videoTrack&&m._videoTrack._destroy(),this._p2pChannel.muteRemote(m,p),se.info("[".concat(this._clientId,"] remote user ").concat(c," unpublished ").concat(p)),ku("info",this,"user-unpublished",{uid:c,mediaType:p}),this.emit(St.USER_UNPUBLISHED,m,p)}}),J(this,"_handleP2PLost",function(){var c=F(function*(p){if(se.debug("[".concat(o._clientId,"] receive p2p lost"),p),ji("debug",o,"p2p_lost",p),parseInt(p.p2pid,10)!==o.store.p2pId)return se.warning("P2PLost stream not found",p),void ji("warning",o,"p2p_lost","P2PLost stream not found, ".concat(p));yield o._p2pChannel.requestReconnect()});return function(p){return c.apply(this,arguments)}}()),J(this,"_handleTokenWillExpire",()=>{se.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),ji("debug",this,"token_privilege_will_expire"),this.emit(St.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),J(this,"_handleBeforeUnload",c=>{"beforeunload"===c.type&&void 0!==c.returnValue&&""!==c.returnValue||(this.leave(),se.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")),Wl("info",["window",this.store.clientId],jl()?"beforeunload":"pagehide"))}),J(this,"_handleUpdateNetworkQuality",()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(St.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const c={downlinkNetworkQuality:0,uplinkNetworkQuality:0};c.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),c.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(St.NETWORK_QUALITY,c)}),this._codec=r.codec,this._mode=r.mode,this._clientId=_s(5,"client-"),this.store=new fW(r.codec,r.audioCodec,r.mode,this._clientId),this.store.clientCreated(),r.proxyServer&&this.setProxyServer(r.proxyServer,!0),r.turnServer&&this.setTurnServer(r.turnServer,!0),se.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(El," build: ").concat(Dh,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),cr("info",this,"constructor",{version:El,build:Dh,mode:this._mode,codec:this._codec}),this._performanceRecorder=function(c,p){const _=new gW(c,"join");return mW.set(c,_),_}(this._clientId),r.clientRoleOptions)try{Tt(r.clientRoleOptions),a=Object.assign({},r.clientRoleOptions)}catch(c){se.warning("[".concat(this._clientId,"] ").concat(c.toString())),jn("warning",this,c.toString())}this._statsCollector=new t0(this.store),this._statsCollector.onStatsException=(c,p,_)=>{se.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(c,", msg: ").concat(p,", uid: ").concat(_)),ku("debug",this,St.EXCEPTION,{code:c,message:p,uid:_}),this.emit(St.EXCEPTION,{code:c,msg:p,uid:_})},this._statsCollector.onUploadPublishDuration=(c,p,_,m)=>{const A=this._users.find(v=>v.uid===c);A&&zt.peerPublishStatus(this._sessionId,{subscribeElapse:m,audioPublishDuration:p,videoPublishDuration:_,peer:A._uintid})},this._gateway=new Tz(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:r.websocketRetryConfig||wo,httpRetryConfig:r.httpRetryConfig||wo,forceWaitGatewayResponse:void 0===r.forceWaitGatewayResponse||r.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:r.role,clientRoleOptions:a}),this._config=r,this._configDistribute=new JH,this._p2pChannel=new pW(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}join(r,o,a,c,p){var _=this;return F(function*(){const m=++_._numberOfJoinCount;_._performanceRecorder.checkPoint("startJoin"),_.store.joinStart(),c&&(_.store.uid=c);const A="HTTPS"===(jP||jP||(jP=(window.location.protocol.split(":")[0]||"").toUpperCase(),jP)),v=A4()?window.isSecureContext:"Browser Not Support";if(!A4()&&!A||!window.isSecureContext){const q="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";se.warning(q),$t("warning",_,q)}const S=V7();"DISCONNECTED"===_.connectionState&&(_.store.avoidJoinStart=Math.round(Date.now()),se.debug("[".concat(_._clientId,"] set avoidJoinStart to ").concat(_.store.avoidJoinStart)),$t("debug",_,"join",void 0,"[".concat(_._clientId,"] set avoidJoinStart to ").concat(_.store.avoidJoinStart)));const I=zt.reportApiInvoke(S,{name:ze.JOIN,options:[r,o,a,c],states:{isHttps:A,isSecureContext:v},tag:Qe.TRACER});zt.setAppId(r);try{if(!a&&null!==a)throw new Le(Te.INVALID_PARAMS,"Invalid token: ".concat(a,". If you don not use token, set it to null"));a&&g(a,"token",1,2047),g(r,"appid",1,2047),C(o),c&&w(c),p&&g(p,"optionalInfo",1,2047)}catch(q){throw I.onError(q),q}if(se.info("[".concat(_._clientId,"] start join channel ").concat(o,", join number: ").concat(m)),cr("info",_,"join",{channel:o}),_._leaveMutex.isLocked&&(se.debug("[".concat(_._clientId,"] join: waiting leave operation")),jn("debug",_,"join: waiting leave operation"),(yield _._leaveMutex.lock())(),se.debug("[".concat(_._clientId,"] join: continue")),jn("debug",_,"join: continue")),_._joinAndNotLeaveYet=!0,"DISCONNECTED"!==_.connectionState){const q=new Le(Te.INVALID_OPERATION,"[".concat(_._clientId,"] Client already in connecting/connected state"));throw I.onError(q),q}_._sessionId||(_._sessionId=S,_.store.sessionId=_._sessionId),_._gateway.state="CONNECTING";const R=zT({clientId:_._clientId,appId:r,sid:_._sessionId,cname:o,uid:"string"!=typeof c?c:null,turnServer:_._turnServer,proxyServer:_._proxyServer,token:a||r,cloudProxyServer:_._cloudProxyServerMode,optionalInfo:p,useLocalAccessPoint:_._useLocalAccessPoint},void 0!==_._remoteDefaultVideoStreamType&&{defaultVideoStream:_._remoteDefaultVideoStreamType});if("string"==typeof c&&(R.stringUid=c,_._uintUid?(R.uid=_._uintUid,_._uintUid=void 0):R.uid=0),"none"!==_._encryptionMode&&_._encryptionSecret){if(R.aesmode=_._encryptionMode,R.aespassword=yield(q=F(function*(z){const te=EL("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),de=yield window.crypto.subtle.importKey("spki",te,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),ge=P3(z),Se=yield window.crypto.subtle.encrypt({name:"RSA-OAEP"},de,ge);return Zk(new Uint8Array(Se))}),function(z){return q.apply(this,arguments)})(_._encryptionSecret),!_._joinAndNotLeaveYet)throw new Le(Te.INVALID_OPERATION,"[".concat(_._clientId,"] Client already left"));_._encryptionSalt&&(R.aessalt=_._encryptionSalt)}var q;_._startSession(_._sessionId,{channel:o,appId:r});const O=_._sessionId;setTimeout(()=>{"CONNECTING"===_.connectionState&&O===_._sessionId&&zt.joinChannelTimeout(_._sessionId,5)},5e3);try{let q;const z=R.cloudProxyServer;if("443only"===z)R.proxyServer=xt("PROXY_SERVER_TYPE2");else if(["proxy3","proxy4","proxy5"].includes(z)){const ge=xt("PROXY_SERVER_TYPE3");R.proxyServer=Array.isArray(ge)?ge[0]:ge}if(zt.setProxyServer(R.proxyServer),se.setProxyServer(R.proxyServer),tv(R.proxyServer),_._performanceRecorder.checkPoint("startRequestAp"),_.store.requestAPStart(),R.stringUid&&!R.uid&&"normal"===z){yield B8(R,_._axiosCancelSource.token,_._config.httpRetryConfig||wo,!1,_.store);const ge=yield WL(R.stringUid,R,_._axiosCancelSource.token,_._config.httpRetryConfig||wo,_.store);se.debug("getUserAccount Success ".concat(R.stringUid," => ").concat(ge)),jn("debug",_,"getUserAccount Success ".concat(R.stringUid," => ").concat(ge)),R.uid=ge,q=yield AP(R,_._axiosCancelSource.token,_._config.httpRetryConfig||wo,_.store)}else if(R.stringUid&&!R.uid){const ge=yield WL(R.stringUid,R,_._axiosCancelSource.token,_._config.httpRetryConfig||wo,_.store);se.debug("getUserAccount Success ".concat(R.stringUid," => ").concat(ge)),jn("debug",_,"getUserAccount Success ".concat(R.stringUid," => ").concat(ge)),R.uid=ge,q=yield B8(R,_._axiosCancelSource.token,_._config.httpRetryConfig||wo,!0,_.store)}else q=yield B8(R,_._axiosCancelSource.token,_._config.httpRetryConfig||wo,!0,_.store);if(!_._joinAndNotLeaveYet)throw new Le(Te.INVALID_OPERATION,"[".concat(_._clientId,"] Client already left"));_.store.requestAPEnd(),_._performanceRecorder.checkPoint("startJoinGateway"),setTimeout(()=>{_._configDistribute.startGetConfigDistribute(R,_._axiosCancelSource.token),_._configDistribute.on(zy.UPDATE_BITRATE_LIMIT,ge=>{_._p2pChannel.updateBitrateLimit(ge)})},0),_._key=a||r;const te=q.gatewayInfo;_._joinInfo=zT(zT({},R),{},{cid:te.cid,uid:R.uid?R.uid:te.uid,vid:te.vid,apResponse:te.res,uni_lbs_ip:te.uni_lbs_ip,gatewayAddrs:te.gatewayAddrs});const de=yield _._joinGateway();if(!_._joinAndNotLeaveYet)throw new Le(Te.INVALID_OPERATION,"[".concat(_._clientId,"] Client already left"));return I.onSuccess(de),_._appId=r,_._channelName=R.cname,_._uid=de,_.store.uid=de,setTimeout(()=>{_._networkQualityInterval&&window.clearInterval(_._networkQualityInterval),_._networkQualityInterval=window.setInterval(_._handleUpdateNetworkQuality,2e3),window.addEventListener(jl()?"beforeunload":"pagehide",_._handleBeforeUnload)},0),se.info("[".concat(_._clientId,"] Joining channel success: ").concat(o)),cr("info",_,"join",o,"success"),setTimeout(()=>{xt("USE_NEW_LOG")?Po():se.startUpload()},5e3),_._performanceRecorder.checkPoint("finishJoin"),_.store.joinEnd(),LS.includes(B=_)||LS.push(B),de}catch(q){const z=Array.isArray(q)?q[0]:q;throw se.error("[".concat(_._clientId,"] join number: ").concat(m,", Joining channel failed, rollback"),z),cr("error",_,"join",o,z.toString()),z.code!==Te.OPERATION_ABORTED&&_._numberOfJoinCount===m&&(_._gateway.state="DISCONNECTED",_._reset()),I.onError(z),z}var B})()}_joinGateway(){if(!this._joinInfo||!this._key)throw new Le(Te.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||!xt("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(r=>r).catch(r=>{if(r.code===Te.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,mt.FALLBACK);throw r}).then(r=>{if(r)return r;if(se.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new Le(Te.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const o=xt("PROXY_SERVER_TYPE3");if(Array.isArray(o))if(this._joinInfo.apUrl){const a=new A8(this._joinInfo.apUrl).host.split("."),c=a.slice(a.length-2).join(".");o.forEach(p=>{this._joinInfo&&p.includes(c)&&(this._joinInfo.proxyServer=p)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=o[0])}else this._joinInfo.proxyServer=o[0];else this._joinInfo.proxyServer=o;return se.setProxyServer(this._joinInfo.proxyServer),zt.setProxyServer(this._joinInfo.proxyServer),tv(this._joinInfo.proxyServer),zt.reportApiInvoke(this._sessionId,{name:ze.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:Qe.TRACER}).onSuccess(),this.emit(St.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}).then(r=>r)}leave(){var r=this;return F(function*(){const o=zt.reportApiInvoke(r._sessionId,{name:ze.LEAVE,options:[],tag:Qe.TRACER});se.info("[".concat(r._clientId,"] Leaving channel")),cr("info",r,"leave"),window.removeEventListener(jl()?"beforeunload":"pagehide",r._handleBeforeUnload),r._reset(),function(c){const p=LS.indexOf(c);-1!==p&&LS.splice(p,1)}(r);const a=yield r._leaveMutex.lock();if("DISCONNECTED"===r.connectionState)return se.info("[".concat(r._clientId,"] Leaving channel repeated, success")),a(),o.onSuccess();yield r._gateway.leave("CONNECTED"!==r.connectionState),se.info("[".concat(r._clientId,"] Leaving channel success")),cr("info",r,"leave",void 0,"success"),r._joinAndNotLeaveYet=!1,r.store.resetJoinChannelServiceRecords(),a(),o.onSuccess()})()}publish(r){var o=arguments,a=this;return F(function*(){let c=!(o.length>1&&void 0!==o[1])||o[1];Array.isArray(r)||(r=[r]);const p=zt.reportApiInvoke(a._sessionId,{name:ze.PUBLISH,options:r.map(m=>m?Object(m).toString():"null"),tag:Qe.TRACER});if(0===r.length){const m=new Le(Te.INVALID_PARAMS,"track list is empty");return p.onError(m),m.throw()}if("audience"===a._gateway.role){const m=new Le(Te.INVALID_OPERATION,"audience can not publish stream");return p.onError(m),m.throw()}for(const m of r){if(!(m instanceof N3)){const A=new Le(Te.INVALID_PARAMS,"parameter is not local track");return p.onError(A),A.throw()}if(!m._enabled&&c){const A=new Le(Te.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(m.getTrackId()));return p.onError(A),A.throw()}}se.info("[".concat(a._clientId,"] Publishing tracks, id ").concat(r.map(m=>"".concat(m.getTrackId()," ")))),cr("info",a,"publish",r.map(m=>"".concat(m.getTrackId()))),yield a._configDistribute.awaitConfigDistributeComplete(),c&&r.forEach(m=>{const A=a._configDistribute.getBitrateLimit();m instanceof Hs&&A&&m.setBitrateLimit(A.uplink)});const _=yield a._publishMutex.lock();try{yield a._publishHighStream(r),p.onSuccess(r.map(m=>m.trackMediaType+":"+m.getTrackLabel()).toString()),se.info("[".concat(a._clientId,"] Publish success, id ").concat(r.map(m=>"".concat(m.getTrackId()," ")))),cr("info",a,"publish",r.map(m=>"".concat(m.getTrackId())),"success")}catch(m){throw p.onError(m),se.error("[".concat(a._clientId,"] publish error"),m.toString()),cr("error",a,"publish",void 0,m.toString()),m}finally{_()}})()}unpublish(r){var o=this;return F(function*(){if(!o._joinInfo||void 0===o._uid)throw new Le(Te.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");r?Array.isArray(r)||(r=[r]):r=o._p2pChannel.getAllTracks(!0);const a=zt.reportApiInvoke(o._sessionId,{name:ze.UNPUBLISH,options:r.map(p=>p.getTrackId()),tag:Qe.TRACER});se.info("[".concat(o._clientId,"] Unpublish tracks, tracks ").concat(r.map(p=>"".concat(p.getTrackId()," "))," ")),cr("info",o,"unpublish",r.map(p=>"".concat(p.getTrackId())));const c=yield o._publishMutex.lock();try{const p=yield o._p2pChannel.unpublish(r);p&&(yield o._gateway.unpublish(p,o._uid)),se.info("[".concat(o._clientId,"] Unpublish success,tracks ").concat(r.map(_=>"".concat(_.getTrackId())))),cr("info",o,"unpublish",r.map(_=>"".concat(_.getTrackId())),"success"),a.onSuccess()}catch(p){throw a.onError(p),se.error("[".concat(o._clientId,"] unpublish error"),p.toString()),cr("error",o,"unpublish",void 0,p.toString()),p}finally{c&&c()}})()}subscribe(r,o){var a=this;return F(function*(){return a._subscribe(r,o)})()}_subscribe(r,o,a){var c=this;return F(function*(){u(o,"mediaType",["audio","video"]);const p=zt.reportApiInvoke(c._sessionId,{name:ze.SUBSCRIBE,options:[r.uid,o],tag:Qe.TRACER});if(!c._joinInfo){const I=new Le(Te.INVALID_OPERATION,"Can't subscribe stream, not joined");throw p.onError(I),I}if("CONNECTED"!==c.connectionState&&"RECONNECTING"!==c.connectionState){const I=new Le(Te.INVALID_OPERATION,"Can't subscribe stream in ".concat(c.connectionState," state"));throw p.onError(I),I}if(!c._users.find(I=>I===r)){const I=new Le(Te.INVALID_REMOTE_USER,"user is not in the channel");throw se.error("[".concat(c._clientId,"] can not subscribe ").concat(r.uid,", this user is not in the channel")),cr("error",c,"subscribe",r.uid,"this user is not in the channel"),p.onError(I),I}if(!r.hasAudio&&!r.hasVideo){const I=new Le(Te.INVALID_REMOTE_USER,"user is not published");throw se.error("[".concat(c._clientId,"] can not subscribe ").concat(r.uid,", user is not published")),cr("error",c,"subscribe",r.uid,"this user is not published"),p.onError(I),I}if(!(a||("audio"!==o||r.hasAudio&&void 0!==r._audioSSRC)&&("video"!==o||r.hasVideo&&void 0!==r._videoSSRC))){const I=new Le(Te.REMOTE_USER_IS_NOT_PUBLISHED);throw se.error("[".concat(c._clientId,"] can not subscribe ").concat(r.uid," with mediaType ").concat(o,", remote track is not published")),cr("error",c,"subscribe",r.uid,"mediaType ".concat(o,", remote track is not published")),p.onError(I),I}const _="audio"===o?r._audioSSRC:r._videoSSRC,m="audio"===o?r._audioOrtc:r._videoOrtc,A="video"===o?r._rtxSsrcId:void 0,v={stream_type:"audio"===o?Xr.AUDIO:Xr.VIDEO,ssrcId:_},S=yield c._subscribeMutex.lock();se.info("[".concat(c._clientId,"] subscribe user ").concat(r.uid,", mediaType: ").concat(o)),cr("info",c,"subscribe",{uid:r.uid,mediaType:o});try{if(yield c._p2pChannel.hasRemoteMediaWithLock(r,o))yield c._p2pChannel.unmuteRemote(r,o);else try{Fu.markSubscribeStart(c.store.clientId,_),c.store.subscribe(r.uid,o,performance.now()),yield c._p2pChannel.subscribe(r,o,_,A,m);try{yield c._gateway.subscribe(r.uid,v,!0)}catch(R){throw yield c._p2pChannel.unsubscribe(r,o),R}c.store.subscribe(r.uid,o,void 0,performance.now()),c._p2pChannel.reportSubscribeEvent(!0,null,r,o)}catch(R){throw c._p2pChannel.reportSubscribeEvent(!1,R?.code,r,o),R}se.info("[".concat(c._clientId,"] subscribe success user ").concat(r.uid,", mediaType: ").concat(o)),cr("info",c,"subscribe",{uid:r.uid,mediaType:o},"success"),c._defaultStreamFallbackType&&c.setStreamFallbackOption(r.uid,c._defaultStreamFallbackType).catch(R=>{se.warning("[".concat(c._clientId,"] auto set fallback failed"),R),jn("warning",c,"auto set fallback failed, ".concat(R.toString()))});const I="audio"===o?r._audioTrack:r._videoTrack;if(!I){const R=new Le(Te.UNEXPECTED_ERROR,"can not find remote track in user object");return p.onError(R),R.throw()}return p.onSuccess(I.getTrackId()),I}catch(I){throw p.onError(I),se.error("[".concat(c._clientId,"] subscribe user ").concat(r.uid," error"),I),cr("error",c,"subscribe",{uid:r.uid,mediaType:o},I.toString()),I}finally{S()}})()}massSubscribe(r){var o=this;return F(function*(){y(r,"subscribeList");const a=zt.reportApiInvoke(o._sessionId,{name:ze.MASS_SUBSCRIBE,options:r.map(S=>{let{user:I,mediaType:R}=S;return[I?.uid,R]}),tag:Qe.TRACER});if(!o._joinInfo){const S=new Le(Te.INVALID_OPERATION,"Can't subscribe stream, not joined");throw a.onError(S),S}if("CONNECTED"!==o.connectionState&&"RECONNECTING"!==o.connectionState){const S=new Le(Te.INVALID_OPERATION,"Can't subscribe stream in ".concat(o.connectionState," state"));throw a.onError(S),S}const c=performance.now(),p=new Map,_=yield o._subscribeMutex.lock();se.info("[".concat(o._clientId,"]start massSubscribe user ").concat(r.map(S=>{let{user:I,mediaType:R}=S;return"user: ".concat(I?.uid,", mediaType: ").concat(R)}).join("; "))),cr("info",o,"massSubscribe",r);const m=(r=[...r]).map(S=>{let{user:I,mediaType:R}=S;return{user:I,mediaType:R}}),A=yield o._p2pChannel.globalLock();try{var v;for(let I=r.length-1;I>=0;I--){const R=r[I],{user:O,mediaType:B}=R;if(u(B,"mediaType",["audio","video"]),!O){const te=new Le(Te.INVALID_PARAMS,"user property does not exist in subscribeList item");throw se.error("[".concat(o._clientId,"] user property does not exist in subscribeList item")),a.onError(te),te}if(!o._users.find(te=>te===O)){const te=new Le(Te.INVALID_REMOTE_USER,"user is not in the channel");se.error("[".concat(o._clientId,"] can not massSubscribe ").concat(O.uid,", this user is not in the channel")),cr("error",o,"massSubscribe",O.uid,"this user is not in the channel"),m[I].error=te,r.splice(I,1);continue}if("audio"===B&&(!O.hasAudio||void 0===O._audioSSRC)||"video"===B&&(!O.hasVideo||void 0===O._videoSSRC)){const te=new Le(Te.REMOTE_USER_IS_NOT_PUBLISHED);se.error("[".concat(o._clientId,"] can not subscribe ").concat(O.uid," with mediaType ").concat(B,", remote user is not published")),cr("error",o,"subscribe",O.uid,"mediaType ".concat(B,", remote user is not published")),m[I].error=te,r.splice(I,1);continue}const q=jo.Video|jo.LwoVideo,z=p.get(O);if(z){if("video"===B?z&q:z&jo.Audio){r.splice(I,1),se.warning("repeat massSubscribe user:".concat(O.uid,", mediaType:").concat(B," twice"));continue}p.set(O,z|("video"===B?q:jo.Audio))}else p.set(O,"video"===B?q:jo.Audio)}for(let I=r.length-1;I>=0;I--){const R=r[I],{user:O,mediaType:B}=R,q=jo.Video|jo.LwoVideo;if(o._p2pChannel.hasRemoteMedia(O,B)){yield o._p2pChannel.unmuteRemoteNoLock(O,B);const z=p.get(O);p.set(O,"video"===B?z^q:z^jo.Audio),r.splice(I,1)}}o.store.massSubscribe(r.map(I=>({userId:I.user.uid,type:I.mediaType})),c);const S=nf(v=Array.from(p.entries())).call(v,(I,R)=>{let[O,B]=R;if(0===B)return I;const q={stream_id:O.uid,stream_type:B};return B&jo.Audio&&(q.audio_ssrc=O._audioSSRC),B&jo.Video&&(q.video_ssrc=O._videoSSRC),I.push(q),I},[]);try{r.length>0&&(yield o._p2pChannel.massSubscribeNoLock(r.map(R=>{let{user:O,mediaType:B}=R;return{user:O,mediaType:B,ssrcId:B===Xr.VIDEO?O._videoSSRC:O._audioSSRC,rtxSsrcId:O._rtxSsrcId}})));const I=new Map;if(S.length>0&&((yield o._gateway.subscribeAll(S,!0))?.users||[]).forEach(O=>{let{stream_id:B,video_error_code:q,audio_error_code:z,error_code:te}=O;(q||z||te)&&I.set(B,{video_error_code:q,audio_error_code:z,error_code:te})}),Array.from(I.entries()).length>0){const R=Array.from(I.entries()).map(O=>{let B,[q,z]=O;return z.error_code||z.video_error_code&&z.audio_error_code?B=void 0:z.video_error_code?B=Xr.VIDEO:z.audio_error_code&&(B=Xr.AUDIO),{user:o.remoteUsers.find(te=>te.uid===q),mediaType:B}});yield o._p2pChannel.massUnsubscribeNoLock(R)}for(const R of m){const O=I.get(R.user.uid);if(O){const B=O.error_code||"audio"===R.mediaType&&O.audio_error_code||"video"===R.mediaType&&O.video_error_code;if(B){const q=wV(B);se.error("user:".concat(R.user.uid," mediaType:").concat(R.mediaType," has massSubscribe error ").concat(q.desc)),R.error=new Le(Te.SUBSCRIBE_FAILED,"code ".concat(B,": ").concat(q.desc))}}R.error||(R.track="video"===R.mediaType?R.user.videoTrack:R.user.audioTrack)}return o.store.massSubscribe(m.filter(R=>!R.error).map(R=>({userId:R.user.uid,type:R.mediaType})),void 0,performance.now()),m.forEach(R=>{var O;zt.subscribe(o.store.sessionId,{succ:!!R.error,ec:(null===(O=R.error)||void 0===O?void 0:O.code)||null,video:R.mediaType===Xr.VIDEO,audio:R.mediaType===Xr.AUDIO,peerid:R.user.uid,subscribeRequestid:R.mediaType===Xr.VIDEO?R.user._videoSSRC:R.user._audioSSRC,p2pid:o.store.p2pId,eventElapse:Math.floor(performance.now()-c)},!0)}),a.onSuccess(),se.info("[".concat(o._clientId,"] massSubscribe success ").concat(r.map(R=>{let{user:O,mediaType:B}=R;return"user: ".concat(O?.uid,", mediaType: ").concat(B)}).join("; "))),cr("info",o,"massSubscribe",r,"success"),m}catch(I){throw yield o._p2pChannel.massUnsubscribeNoLock(r),a.onError(I),I}}finally{A(),_()}})()}unsubscribe(r,o){var a=this;return F(function*(){if(o&&u(o,"mediaType",["audio","video"]),!a._joinInfo)throw new Le(Te.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const c=zt.reportApiInvoke(a._sessionId,{name:ze.UNSUBSCRIBE,options:[r.uid,o],tag:Qe.TRACER});if(!a._users.find(p=>p===r)){const p=new Le(Te.INVALID_REMOTE_USER,"user is not in the channel");throw se.error("[".concat(a._clientId,"] can not subscribe ").concat(r.uid,", user is not in the channel")),cr("error",a,"unsubscribe",{uid:r.uid,mediaType:o},"user is not in the channel"),c.onError(p),p}se.info("[".concat(a._clientId,"] unsubscribe uid: ").concat(r.uid,", mediaType: ").concat(o)),cr("info",a,"unsubscribe",{uid:r.uid,mediaType:o});try{const p=yield a._p2pChannel.unsubscribe(r,o);p&&(yield a._gateway.unsubscribe(p,r.uid)),se.info("[".concat(a._clientId,"] unsubscribe success uid: ").concat(r.uid,", mediaType: ").concat(o)),cr("info",a,"unsubscribe",{uid:r.uid,mediaType:o},"success"),c.onSuccess()}catch(p){if(p.code===Te.DISCONNECT_P2P)return se.warning("disconnecting p2p, abort unsubscribe request."),void c.onSuccess();throw se.error("[".concat(a._clientId,"] unsubscribe user ").concat(r.uid," error"),p.toString()),cr("error",a,"unsubscribe",{uid:r.uid,mediaType:o},p.toString()),c.onError(p),p}})()}massUnsubscribe(r){var o=this;return F(function*(){y(r,"unsubscribeList");const a=zt.reportApiInvoke(o._sessionId,{name:ze.UNSUBSCRIBE,options:r.map(p=>{let{user:_,mediaType:m}=p;return{uid:_?.uid,mediaType:m}}),tag:Qe.TRACER});if(!o._joinInfo){const p=new Le(Te.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");throw a.onError(p),p}se.info("[".concat(o._clientId,"] start massUnsubscribe ").concat(r.map(p=>{let{user:_,mediaType:m}=p;return"user: ".concat(_?.uid,", mediaType: ").concat(m,";")}).join())),cr("info",o,"massUnsubscribe",r),r=[...r];const c=new Map;for(let p=r.length-1;p>=0;p--){const{user:_,mediaType:m}=r[p];if(!_){const v=new Le(Te.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw se.error("[".concat(o._clientId,"] user property does not exist in unsubscribeList item")),a.onError(v),v}if(u(m,"mediaType",["video","audio",void 0]),!o._users.find(v=>v===_)){se.warning("[".concat(o._clientId,"] can not subscribe ").concat(_.uid,", user is not in the channel")),cr("error",o,"unsubscribe",{uid:_.uid,mediaType:m},"user is not in the channel"),r.splice(p,1);continue}const A=jo.Video|jo.LwoVideo;if(c.has(_)){const v=c.get(_);let S;switch(m){case"video":S=v&A;break;case"audio":S=v&jo.Audio;break;default:S=v&(jo.Audio|A)}if(S){se.warning("repeat massUnsubscribe user:".concat(_.uid,",mediaType:").concat(m," twice.")),r.splice(p,1);continue}m?"audio"===m?c.set(_,v|jo.Audio):"video"===m&&c.set(_,v|A):c.set(_,v|jo.Audio|A)}else m?"audio"===m?c.set(_,jo.Audio):"video"===m&&c.set(_,A):c.set(_,jo.Audio|A)}try{const p=yield o._p2pChannel.massUnsubscribe(r);p&&(yield o._gateway.massUnsubscribe(p)),se.info("[".concat(o._clientId,"] massUnsubscribe success ").concat(r.map(_=>{let{user:m,mediaType:A}=_;return"user: ".concat(m?.uid,", mediaType: ").concat(A,";")}).join())),cr("info",o,"massUnsubscribe",r,"success"),a.onSuccess()}catch(p){if(p.code===Te.DISCONNECT_P2P)return se.warning("disconnecting p2p, abort unsubscribe request."),void a.onSuccess();throw se.error("[".concat(o._clientId,"] massUnsubscribe error"),p.toString()),cr("error",o,"massUnsubscribe",r,p.toString()),a.onError(p),p}})()}setLowStreamParameter(r){!function(c){if(!c)throw new Le(Te.INVALID_PARAMS);D(c.width)||h(c.width,"streamParameter.width"),D(c.height)||h(c.height,"streamParameter.height"),D(c.framerate)||h(c.framerate,"streamParameter.framerate"),D(c.bitrate)||l(c.bitrate,"streamParameter.bitrate")}(r);const o=zt.reportApiInvoke(this._sessionId,{name:ze.SET_LOW_STREAM_PARAMETER,options:[r],tag:Qe.TRACER});(!r.width&&r.height||r.width&&!r.height)&&(se.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),jn("warning",this,"The width and height parameters take effect only when both are set")),se.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(r)),cr("info",this,"setLowStreamParameter",r);const a=this._configDistribute.getLowStreamConfigDistribute();a&&a.bitrate&&r.bitrate&&a.bitrate<r.bitrate&&(r.bitrate=a.bitrate),this._lowStreamParameter=r,o.onSuccess()}enableDualStream(){var r=this;return F(function*(){const o=zt.reportApiInvoke(r._sessionId,{name:ze.ENABLE_DUAL_STREAM,options:[],tag:Qe.TRACER});if(!Yc().supportDualStream){zt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!0,succ:!1});const a=new Le(Te.NOT_SUPPORTED,"Your browser is not support dual stream");throw o.onError(a),a}if(r._isDualStreamEnabled){const a=new Le(Te.INVALID_OPERATION,"Dual stream is already enabled");throw o.onError(a),a}if(r._p2pChannel.canPublishLowStream())try{yield r._publishLowStream()}catch(a){throw zt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),o.onError(a),a}r._isDualStreamEnabled=!0,zt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),se.info("[".concat(r._clientId,"] enable dual stream")),cr("info",r,"enableDualStream"),o.onSuccess()})()}disableDualStream(){var r=this;return F(function*(){if(!r._isDualStreamEnabled)return;if(!r._joinInfo)throw new Le(Te.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const o=zt.reportApiInvoke(r._sessionId,{name:ze.DISABLE_DUAL_STREAM,options:[],tag:Qe.TRACER});if(r._p2pChannel.getLocalMedia(Un.LocalVideoLowTrack))try{const a=yield r._p2pChannel.unpublishLowStream();a&&(yield r._gateway.unpublish(a,r._joinInfo.stringUid||r._joinInfo.uid))}catch(a){throw zt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),o.onError(a),a}r._isDualStreamEnabled=!1,zt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),se.info("[".concat(r._clientId,"] disable dual stream")),cr("info",r,"disableDualStream"),o.onSuccess()})()}setClientRole(r,o){var a=this;return F(function*(){var p;u(p=r,"role",["audience","host"]),o&&Tt(o);const c=zt.reportApiInvoke(a._sessionId,{name:ze.SET_CLIENT_ROLE,options:[r,o],tag:Qe.TRACER});if("rtc"===a._mode){se.warning("[".concat(a._clientId,"]rtc mode can not use setClientRole")),cr("warning",a,"setClientRole",r,"rtc mode can not use setClientRole");const p=new Le(Te.INVALID_OPERATION,"rtc mode can not use setClientRole");return c.onError(p),p.throw()}if(o&&o.level&&"host"===r){const p=new Le(Te.INVALID_OPERATION,"host mode can not set audience latency level");return c.onError(p),p.throw()}try{if("audience"===r&&a._p2pChannel.hasLocalMedia()){const p=new Le(Te.INVALID_OPERATION,"can not set client role to audience when publishing stream");return c.onError(p),p.throw()}yield a._gateway.setClientRole(r,o),se.info("[".concat(a._clientId,"] set client role to ").concat(r,", level: ").concat(o&&o.level)),cr("info",a,"setClientRole",{role:r,level:o&&o.level}),c.onSuccess()}catch(p){throw c.onError(p),p}})()}setProxyServer(r,o){if(g(r,"proxyServer"),!o){if("DISCONNECTED"!==this.connectionState)throw new Le(Te.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Le(Te.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=r,zt.setProxyServer(this._proxyServer),se.setProxyServer(this._proxyServer),tv(this._proxyServer),se.info("[".concat(this._clientId,"] Set proxy server ").concat(o?"by initialize call":""," success.")),cr("info",this,"setProxyServer",[...arguments],"success")}setTurnServer(r,o){if(Array.isArray(r)||(r=[r]),!o){if("DISCONNECTED"!==this.connectionState)throw new Le(Te.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Le(Te.INVALID_OPERATION,"You have already set the proxy")}if(Si(r))return this._turnServer={servers:r,mode:"original-manual"},se.info("[".concat(this._clientId,"] Set original turnserver ").concat(o?"by initialize call":""," success: ").concat(r.map(a=>a.urls).join(","),".")),void cr("info",this,"setOriginalTurnServer",[...arguments],"success");r.forEach(a=>Bt(a)),this._turnServer={servers:r,mode:"manual"},se.info("[".concat(this._clientId,"] Set turnserver ").concat(o?"by initialize call":""," success.")),cr("info",this,"setTurnServer",[...arguments],"success")}startProxyServer(r){const o=zt.reportApiInvoke(this._sessionId,{name:ze.START_PROXY_SERVER,options:[],tag:Qe.TRACER});if("DISCONNECTED"!==this.connectionState){const p=new Le(Te.INVALID_OPERATION,"Start proxy server before join channel");throw o.onError(p),p}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const p=new Le(Te.INVALID_OPERATION,"You have already set the proxy");throw o.onError(p),p}const a=[1,2,3,4,5];let c;switch(void 0===r&&(r=1),r){case 1:c="normal";break;case 2:c="443only";break;case 3:c="proxy3";break;case 4:c="proxy4";break;case 5:c="proxy5";break;default:{const p=new Le(Te.INVALID_PARAMS,"proxy server mode must be ".concat(a.join("|")));throw o.onError(p),p}}this._cloudProxyServerMode=c,this.store.cloudProxyServerMode=c,se.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),cr("info",this,"startProxyServer",this._cloudProxyServerMode),o.onSuccess()}stopProxyServer(){const r=zt.reportApiInvoke(this._sessionId,{name:ze.STOP_PROXY_SERVER,options:[],tag:Qe.TRACER});if("DISCONNECTED"!==this.connectionState)throw new Le(Te.INVALID_OPERATION,"Stop proxy server after leave channel");zt.setProxyServer(),se.setProxyServer(),tv(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",se.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),cr("info",this,"stopProxyServer",this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},r.onSuccess()}setLocalAccessPoints(r,o){if(y(r,"serverList"),g(o,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Le(Te.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const a=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;r=r.map(c=>a.test(c)?"".concat(c.replace(/\./g,"-"),".").concat(o):c),this._useLocalAccessPoint=!0,La("WEBCS_DOMAIN",r),La("WEBCS_DOMAIN_BACKUP_LIST",r),La("GATEWAY_DOMAINS",[o]),La("EVENT_REPORT_DOMAIN",r[0]),La("EVENT_REPORT_BACKUP_DOMAIN",r[1]||r[0]),La("LOG_UPLOAD_SERVER","".concat(r[0],":6444")),se.info("set local access point success"),cr("info",this,"setLocalAccessPoints")}setRemoteDefaultVideoStreamType(r){var o=this;return F(function*(){if(u(r,"streamType",[0,1]),o._remoteDefaultVideoStreamType=r,o._joinInfo)try{yield o._gateway.setDefaultRemoteVideoStreamType(r),o._joinInfo.defaultVideoStream=o._remoteDefaultVideoStreamType}catch(a){throw se.error("[".concat(o._clientId,"] set default remote video stream type error"),a.toString()),a}else se.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(r))})()}setRemoteVideoStreamType(r,o){var a=this;return F(function*(){u(o,"streamType",[0,1]);const c=zt.reportApiInvoke(a._sessionId,{name:ze.SET_REMOTE_VIDEO_STREAM_TYPE,options:[r,o],tag:Qe.TRACER});try{yield a._gateway.setRemoteVideoStreamType(r,o),setTimeout(()=>{const p=a._users.find(_=>_.uid===r);p&&p.videoTrack&&p.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(p){throw c.onError(p),se.error("[".concat(a._clientId,"] set remote video stream type error"),p.toString()),cr("error",a,"setRemoteVideoStreamType",void 0,p.toString()),p}se.info("[".concat(a._clientId,"] set remote ").concat(r," video stream type to ").concat(o)),cr("info",a,"setRemoteVideoStreamType",{uid:r,streamType:o}),a._remoteStreamTypeCacheMap.set(r,o),c.onSuccess()})()}setStreamFallbackOption(r,o){var a=this;return F(function*(){u(o,"fallbackType",[0,1,2]);const c=zt.reportApiInvoke(a._sessionId,{name:ze.SET_STREAM_FALLBACK_OPTION,options:["too long to show",o],tag:Qe.TRACER});try{yield a._gateway.setStreamFallbackOption(r,o)}catch(p){throw c.onError(p),se.error("[".concat(a._clientId,"] set stream fallback option"),p.toString()),cr("error",a,"setStreamFallbackOption",void 0,p.toString()),p}se.info("[".concat(a._clientId,"] set remote ").concat(r," stream fallback type to ").concat(o)),cr("info",a,"setStreamFallbackOption",{uid:r,fallbackType:o}),a._streamFallbackTypeCacheMap.set(r,o),c.onSuccess()})()}setEncryptionConfig(r,o,a){if(u(r,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"]),g(o,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(r)){if(!a||!(a instanceof Uint8Array&&32===a.length))throw new Le(Te.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(a)throw new Le(Te.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(o)||(se.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),jn("warning",this,"The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      ")),this._encryptionMode=r,this._encryptionSecret=o,a&&(this._encryptionSalt=Zk(a))}renewToken(r){var o=this;return F(function*(){g(r,"token",1,2047);const a=zt.reportApiInvoke(o._sessionId,{name:ze.RENEW_TOKEN,options:[r],tag:Qe.TRACER});if(!o._key||!o._joinInfo){const _=new Le(Te.INVALID_OPERATION,"renewToken should not be called before user join");return a.onError(_),_.throw()}const c=o._key;o._key=r,o._joinInfo&&(o._joinInfo.token=r);const p=yield o._renewTokenMutex.lock();try{if(xt("USE_NEW_TOKEN")){se.debug("start renew token with ticket from unilbs"),cr("debug",o,"renewToken","unilbs");const _=yield function qH(r,o,a){return U8.apply(this,arguments)}(o._joinInfo,o._axiosCancelSource.token,o._config.httpRetryConfig||wo);se.debug("[".concat(o._clientId,"] get ticket from unilbs success")),cr("debug",o,"renewToken","unilbs","success"),yield o._gateway.renewToken({token:r,ticket:_})}else se.debug("start renew token without ticket"),cr("debug",o,"renewToken"),yield o._gateway.renewToken({token:r});se.debug("[".concat(o._clientId,"] renewToken success")),cr("debug",o,"renewToken",void 0,"success"),a.onSuccess()}catch(_){throw o._key=c,o._joinInfo.token=c,a.onError(_),se.error("[".concat(o._clientId,"] renewToken failed"),_.toString()),cr("error",o,"renewToken",void 0,_.toString()),_}finally{p()}})()}enableAudioVolumeIndicator(){const r=zt.reportApiInvoke(this._sessionId,{name:ze.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:Qe.TRACER});if(this._audioVolumeIndicationInterval)return se.warning("you have already enabled audio volume indicator!"),cr("warning",this,"enableAudioVolumeIndicator","you have already enabled audio volume indicator!"),r.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const o=this._p2pChannel.getAudioLevels();this.emit(St.VOLUME_INDICATOR,o)},xt("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),r.onSuccess()}getRTCStats(){const r=this._statsCollector.getRTCStats(),o=this._gateway.getInChannelInfo();return r.Duration=Math.round(o.duration/1e3),r}startLiveStreaming(r,o){const a=zt.reportApiInvoke(this._sessionId,{name:ze.START_LIVE_STREAMING,options:[r,o],tag:Qe.TRACER});if(!o){if("h264"!==this._codec){const p=new Le(Te.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return a.onError(p),qn.reject(p)}if(!this._p2pChannel.hasLocalMedia()){const p=new Le(Te.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return a.onError(p),qn.reject(p)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(r)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(r)){const p=new Le(Te.LIVE_STREAMING_TASK_CONFLICT);return a.onError(p),qn.reject(p)}const c=o?nr.TRANSCODE:nr.RAW;return this._createLiveStreamingClient(c).startLiveStreamingTask(r,c).then(()=>a.onSuccess()).catch(p=>{throw a.onError(p),p})}setLiveTranscoding(r){const o=zt.reportApiInvoke(this._sessionId,{name:ze.SET_LIVE_TRANSCODING,options:[r],tag:Qe.TRACER});return this._createLiveStreamingClient(nr.TRANSCODE).setTranscodingConfig(r).then(()=>o.onSuccess()).catch(a=>{throw o.onError(a),a})}stopLiveStreaming(r){const o=zt.reportApiInvoke(this._sessionId,{name:ze.STOP_LIVE_STREAMING,options:[r],tag:Qe.TRACER}),a=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(c=>c&&c.hasUrl(r));if(!a.length){const c=new Le(Te.INVALID_PARAMS,"can not find live streaming url to stop");return o.onError(c),qn.reject(c)}return qn.all(a.map(c=>c&&c.stopLiveStreamingTask(r))).then(()=>o.onSuccess()).catch(c=>{throw o.onError(c),c})}addInjectStreamUrl(r,o){var a=this;return F(function*(){const c=zt.reportApiInvoke(a._sessionId,{name:ze.ADD_INJECT_STREAM_URL,options:[r,o],tag:Qe.TRACER});try{if(!a._joinInfo)throw new Le(Te.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const p=a._createLiveStreamingClient(nr.INJECT);p.setInjectStreamConfig(o,0),yield p.startLiveStreamingTask(r,nr.INJECT)}catch(p){throw c.onError(p),p}c.onSuccess()})()}removeInjectStreamUrl(){var r=this;return F(function*(){const o=zt.reportApiInvoke(r._sessionId,{name:ze.REMOVE_INJECT_STREAM_URL,options:[],tag:Qe.TRACER});try{var a;const c=r._createLiveStreamingClient(nr.INJECT),p=Array.from(dv(a=c.streamingTasks).call(a)).find(_=>_.mode===nr.INJECT);if(!r._joinInfo||!p)throw new Le(Te.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");yield c.stopLiveStreamingTask(p.url)}catch(c){throw o.onError(c),c}o.onSuccess()})()}startChannelMediaRelay(r){var o=this;return F(function*(){const a=zt.reportApiInvoke(o._sessionId,{name:ze.START_CHANNEL_MEDIA_RELAY,options:[r],tag:Qe.TRACER});try{H8(r),yield o._createChannelMediaRelayClient().startChannelMediaRelay(r)}catch(c){return a.onError(c),c.throw()}a.onSuccess()})()}updateChannelMediaRelay(r){var o=this;return F(function*(){const a=zt.reportApiInvoke(o._sessionId,{name:ze.UPDATE_CHANNEL_MEDIA_RELAY,options:[r],tag:Qe.TRACER});try{H8(r),yield o._createChannelMediaRelayClient().updateChannelMediaRelay(r)}catch(c){return a.onError(c),c.throw()}a.onSuccess()})()}stopChannelMediaRelay(){var r=this;return F(function*(){const o=zt.reportApiInvoke(r._sessionId,{name:ze.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:Qe.TRACER});try{yield r._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(a){return o.onError(a),a.throw()}o.onSuccess()})()}sendStreamMessage(r){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new Le(Te.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof r&&(r=(new TextEncoder).encode(r)),new Blob([r]).size>1024)throw new Le(Te.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(on.DATA_STREAM,{payload:Zk(r)},!o)}sendMetadata(r){if(!this._joinInfo)throw new Le(Te.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([r]).size>1024)throw new Le(Te.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(on.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Zk(r)})}sendCustomReportMessage(r){var o=this;return F(function*(){Array.isArray(r)||(r=[r]),r.forEach(me);const a=zt.reportApiInvoke(o._sessionId,{name:ze.SEND_CUSTOM_REPORT_MESSAGE,options:[JSON.stringify(r)],tag:Qe.TRACER});if(!o._joinInfo){const c=new Le(Te.INVALID_OPERATION,"can not send custom report, not joined");return a.onError(c),c.throw()}yield zt.sendCustomReportMessage(o._joinInfo.sid,r),a.onSuccess()})()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}pickSVCLayer(r,o){var a=this;return F(function*(){u(o.spatialLayer,"spatialLayer",[0,1,2,3]),u(o.temporalLayer,"temporalLayer",[0,1,2,3]);try{yield a._gateway.pickSVCLayer(r,o)}catch(c){throw se.error("[".concat(a._clientId,"] pick SVC layer failed"),c.toString()),$t("error",a,"pickSVCLayer",o,c.toString()),c}})()}_reset(){if(se.debug("[".concat(this._clientId,"] reset client")),$t("debug",this,"_reset"),this._axiosCancelSource.cancel(),this._axiosCancelSource=Ms.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(r=>{r._audioTrack&&r._audioTrack._destroy(),r._videoTrack&&r._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Il("client-publish"),this._subscribeMutex=new Il("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}}_startSession(r,o){const a=r||V7();se.debug(r?"[".concat(this._clientId,"] new Session ").concat(a):"[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(a)),$t("debug",this,"_startSession",{newSid:a,sid:this._sessionId}),this._sessionId=a,this.store.sessionId=a,o?zt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:o.channel,appid:o.appId,mode:this._mode}):this._joinInfo?zt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&zt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=a),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=a)}_publishHighStream(r){var o=this;return F(function*(){if(!o._joinInfo||void 0===o._uid)throw new Le(Te.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==o.connectionState&&"RECONNECTING"!==o.connectionState)throw new Le(Te.INVALID_OPERATION,"can not publish stream in ".concat(o.connectionState," state"));if("auto"===o._turnServer.mode&&xt("FORCE_TURN")&&!xt("TURN_ENABLE_TCP")&&!xt("TURN_ENABLE_UDP"))throw new Le(Te.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");se.debug("[".concat(o._clientId,"] publish high stream")),$t("debug",o,"_publishHighStream");try{const c=yield o._p2pChannel.publish(r,o._isDualStreamEnabled,o._lowStreamParameter),p=(yield c.next()).value;if(p){var a;let _;try{_=yield o._gateway.publish(o._uid,p,!0)}catch(m){if(m.code!==Te.DISCONNECT_P2P)throw c.throw(m),m}yield c.next((null===(a=_)||void 0===a?void 0:a.ortc)||[])}o._p2pChannel.reportPublishEvent(!0,null);for(const _ of r)_ instanceof Hs&&_._encoderConfig&&o._gateway.setVideoProfile(_._encoderConfig),!_.muted&&_.enabled||(yield o._p2pChannel.muteLocalTrack(_))}catch(c){if(o._p2pChannel.reportPublishEvent(!1,c?.code,r),c?.code===Te.WS_ABORT)return;throw c}})()}_publishLowStream(){var r=this;return F(function*(){if(!r._joinInfo||void 0===r._uid)throw new Le(Te.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==r.connectionState&&"RECONNECTING"!==r.connectionState)throw new Le(Te.INVALID_OPERATION,"can not publish stream in ".concat(r.connectionState," state"));se.debug("[".concat(r._clientId,"] publish low stream")),$t("debug",r,"_publishLowStream");const o=r._configDistribute.getLowStreamConfigDistribute();o&&o.bitrate&&(r._lowStreamParameter||(r._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),r._lowStreamParameter&&r._lowStreamParameter.bitrate&&o.bitrate<r._lowStreamParameter.bitrate&&(r._lowStreamParameter.bitrate=o.bitrate));try{const c=yield r._p2pChannel.publishLowStream(r._lowStreamParameter),p=(yield c.next()).value;if(p){var a;let _;try{_=yield r._gateway.publish(r._uid,p,!0)}catch(m){if(m.code!==Te.DISCONNECT_P2P)throw c.throw(m),m}c.next((null===(a=_)||void 0===a?void 0:a.ortc)||[]),r._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(c){if(r._p2pChannel.reportPublishEvent(!1,c?.code,void 0,!0),c?.code===Te.WS_ABORT)return;throw c}})()}_createLiveStreamingClient(r){if(!this._joinInfo||!this._appId)return new Le(Te.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const o=()=>new ZH(this._joinInfo,this._config.websocketRetryConfig||wo,this._config.httpRetryConfig||wo),a=c=>{c.onLiveStreamError=(p,_)=>{zt.reportApiInvoke(this._sessionId,{name:ze.ON_LIVE_STREAM_ERROR,options:[p,_],tag:Qe.TRACER}).onSuccess(),this.emit(St.LIVE_STREAMING_ERROR,p,_)},c.onLiveStreamWarning=(p,_)=>{zt.reportApiInvoke(this._sessionId,{name:ze.ON_LIVE_STREAM_WARNING,options:[p,_],tag:Qe.TRACER}).onSuccess(),this.emit(St.LIVE_STREAMING_WARNING,p,_)},c.on(Ki.REQUEST_WORKER_MANAGER_LIST,(p,_,m)=>{if(!this._joinInfo)return m(new Le(Te.INVALID_OPERATION,"can not find join info to get worker manager"));KH(p,this._joinInfo,this._axiosCancelSource.token,wo).then(_).catch(m)})};switch(r){case nr.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=o(),a(this._liveRawStreamingClient)),this._liveRawStreamingClient;case nr.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=o(),a(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case nr.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=o(),this._injectStreamingClient.on(Ki.REQUEST_WORKER_MANAGER_LIST,(c,p,_)=>{if(!this._joinInfo)return _(new Le(Te.INVALID_OPERATION,"can not find join info to get worker manager"));KH(c,this._joinInfo,this._axiosCancelSource.token,wo).then(p).catch(_)}),this._injectStreamingClient.onInjectStatusChange=(c,p,_)=>{this.emit(St.INJECT_STREAM_STATUS,c,p,_)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new qL(this._joinInfo,this._clientId,this._config.websocketRetryConfig||wo,this._config.httpRetryConfig||wo),this._channelMediaRelayClient.on("state",r=>{r===Cs.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(St.CHANNEL_MEDIA_RELAY_STATE,r)}),this._channelMediaRelayClient.on("event",r=>{this.emit(St.CHANNEL_MEDIA_RELAY_EVENT,r)})),this._channelMediaRelayClient):new Le(Te.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){var r=this;this._gateway.on(Is.DISCONNECT_P2P,F(function*(){yield r._p2pChannel.disconnectForReconnect()})),this._gateway.on(Is.CONNECTION_STATE_CHANGE,(o,a,c)=>{var p;if(c===mt.FALLBACK)return;const _=()=>{this.emit(St.CONNECTION_STATE_CHANGE,o,a,c)};if(zt.reportApiInvoke(this._sessionId||(null===(p=this._gateway.joinInfo)||void 0===p?void 0:p.sid)||null,{name:ze.CONNECTION_STATE_CHANGE,options:[o,a,c],tag:Qe.TRACER}).onSuccess(JSON.stringify({cur:o,prev:a,reason:c})),se.info("[".concat(this._clientId,"] connection state change: ").concat(a," -> ").concat(o)),ji("info",this,"connection-state-change","".concat(a," -> ").concat(o)),"DISCONNECTED"===o)return this._reset(),void _();if("RECONNECTING"===o)this._users.forEach(A=>{A._trust_in_room_=!1,A._trust_audio_enabled_state_=!1,A._trust_video_enabled_state_=!1,A._trust_audio_mute_state_=!1,A._trust_video_mute_state_=!1,A._trust_audio_stream_added_state_=!1,A._trust_video_stream_added_state_=!1,A._audioSSRC=void 0,A._videoSSRC=void 0,A._videoOrtc=void 0,A._audioOrtc=void 0,A._cname=void 0,A._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===o){var m;this._streamFallbackTypeCacheMap.forEach((A,v)=>{this._gateway.setStreamFallbackOption(v,A).catch(S=>{se.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),S),jn("warning",this,"auto set stream fallback option failed, ".concat(S.toString()))})}),this._remoteStreamTypeCacheMap.forEach((A,v)=>{this._gateway.setRemoteVideoStreamType(v,A).catch(S=>{se.warning("[".concat(this._clientId,"] auto set remote stream type failed"),S),jn("warning",this,"auto set remote stream type failed, ".concat(S.toString()))})}),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(m=this._joinInfo)||void 0===m?void 0:m.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{se.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(A=>{se.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(A))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter(A=>!A._trust_in_room_).forEach(A=>{se.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(A.uid)),jn("debug",this,"user offline timeout, emit user offline ".concat(A.uid)),this._handleUserOffline({uid:A.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach(A=>{A._trust_audio_mute_state_||(se.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(A.uid)),jn("debug",this,"auto dispatch audio unmute event ".concat(A.uid)),this._handleMuteStream(A.uid,"audio",!1)),A._trust_video_mute_state_||(se.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(A.uid)),jn("debug",this,"auto dispatch video unmute event ".concat(A.uid)),this._handleMuteStream(A.uid,"video",!1)),A._trust_audio_enabled_state_||(se.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(A.uid)),jn("debug",this,"auto dispatch enable local audio ".concat(A.uid)),this._handleSetStreamLocalEnable("audio",A.uid,!0)),A._trust_video_enabled_state_||(se.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(A.uid)),jn("debug",this,"auto dispatch enable local video ".concat(A.uid)),this._handleSetStreamLocalEnable("video",A.uid,!0)),A._trust_video_stream_added_state_||(se.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(A.uid)),this._handleResetAddStream(A,"video")),A._trust_audio_stream_added_state_||(se.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(A.uid)),this._handleResetAddStream(A,"audio")),A._video_added_||A._audio_added_||(se.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(A.uid)),jn("debug",this,"auto dispatch stream remove ".concat(A.uid)),this._handleRemoveStream({uid:A.uid,uint_id:A._uintid}))}))},1e3)}_()}),this._gateway.on(Is.REQUEST_NEW_GATEWAY_LIST,(o,a)=>{if(!this._joinInfo)return a(new Le(Te.UNEXPECTED_ERROR,"can not recover, no join info"));AP(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||wo,this.store).then(c=>{this._joinInfo&&(this._joinInfo.apResponse=c.gatewayInfo.res,this._joinInfo.gatewayAddrs=c.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=c.gatewayInfo.uni_lbs_ip),o(c.gatewayInfo.gatewayAddrs.map(p=>{if(this._joinInfo&&this._joinInfo.proxyServer){const _=p.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(_[0],"&p=").concat(_[1])}return"wss://".concat(p.address)}))}).catch(a)}),this._gateway.on(Is.NETWORK_QUALITY,o=>{"normal"===this._networkQualitySensitivity&&this.emit(St.NETWORK_QUALITY,o)}),this._gateway.on(Is.STREAM_TYPE_CHANGE,(o,a)=>{this.emit(St.STREAM_TYPE_CHANGED,o,a),zt.reportApiInvoke(this._sessionId,{name:ze.STREAM_TYPE_CHANGE,options:[o,a],tag:Qe.TRACER}).onSuccess(JSON.stringify({uid:o,streamType:a}))}),this._gateway.on(Is.IS_P2P_DISCONNECTED,o=>{this._p2pChannel.isP2PDisconnected()?o(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?o(!1):o(!0)}),this._gateway.on(Is.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(Is.REQUEST_P2P_CONNECTION_PARAMS,function(){var o=F(function*(a,c,p){try{c(yield r._p2pChannel.startP2PConnection(a))}catch(_){p(_)}});return function(a,c,p){return o.apply(this,arguments)}}()),this._gateway.on(Is.JOIN_RESPONSE,(o,a,c)=>{const{dtlsParameters:p,iceParameters:_,candidates:m,rtpCapabilities:A,setup:v,cname:S}=aB(o.ortc,a,c);this._p2pChannel.connect(_,p,m,A,v,S)}),this._gateway.signal.on(Hn.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Hn.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Hn.ON_ADD_AUDIO_STREAM,o=>this._handleAddAudioOrVideoStream("audio",o.uid,o.ssrcId,o.cname,o.uint_id,o.ortc)),this._gateway.signal.on(Hn.ON_ADD_VIDEO_STREAM,o=>this._handleAddAudioOrVideoStream("video",o.uid,o.ssrcId,o.cname,o.uint_id,o.ortc,o.rtxSsrcId)),this._gateway.signal.on(Hn.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Hn.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Hn.MUTE_AUDIO,o=>(ji("debug",["AgoraRTCGateway",this._clientId],"mute_audio",{uid:o.uid}),this._handleMuteStream(o.uid,"audio",!0))),this._gateway.signal.on(Hn.UNMUTE_AUDIO,o=>(ji("debug",["AgoraRTCGateway",this._clientId],"unmute_audio",{uid:o.uid}),this._handleMuteStream(o.uid,"audio",!1))),this._gateway.signal.on(Hn.MUTE_VIDEO,o=>(ji("debug",["AgoraRTCGateway",this._clientId],"mute_video",{uid:o.uid}),this._handleMuteStream(o.uid,"video",!0))),this._gateway.signal.on(Hn.UNMUTE_VIDEO,o=>(ji("debug",["AgoraRTCGateway",this._clientId],"unmute_video",{uid:o.uid}),this._handleMuteStream(o.uid,"video",!1))),this._gateway.signal.on(Hn.RECEIVE_METADATA,o=>{const a=EL(o.metadata);this.emit(St.RECEIVE_METADATA,o.uid,a)}),this._gateway.signal.on(Hn.ON_DATA_STREAM,o=>{o.seq&&delete o.seq,o.payload=EL(o.payload),this.emit(St.STREAM_MESSAGE,o.uid,o.payload),this.onStreamMessage&&this.onStreamMessage(o)}),this._gateway.signal.on(Hn.ON_CRYPT_ERROR,()=>{Xk(()=>{se.warning("[".concat(this._clientId,"] on crypt error")),ji("warning",this,"crypt_error"),this.emit(St.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Hn.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Hn.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{se.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),ji("warning",this,"token_privilege_did_expire"),this._gateway.leave(!0),this.emit(St.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Hn.ON_STREAM_FALLBACK_UPDATE,o=>{se.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(o.stream_id,", attr: ").concat(o.stream_type)),ji("debug",this,"stream_fallback_update",{peerId:o.stream_id,attr:o.stream_type}),this.emit(St.STREAM_FALLBACK,o.stream_id,1===o.stream_type?"fallback":"recover")}),this._gateway.signal.on(Hn.ON_PUBLISH_STREAM,o=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:o.proxy})),se.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(o))),ji("info",this,"publish_stream",o))}),this._gateway.signal.on(Hn.ENABLE_LOCAL_VIDEO,o=>{this._handleSetStreamLocalEnable("video",o.uid,!0)}),this._gateway.signal.on(Hn.DISABLE_LOCAL_VIDEO,o=>{this._handleSetStreamLocalEnable("video",o.uid,!1)}),this._gateway.signal.on(rn.REQUEST_TIMEOUT,(o,a)=>{if(this._joinInfo)switch(o){case on.PUBLISH:{if(!a)return;const A=a.ortc;if(A){var c,p,_,m;const v=A.some(R=>{let{stream_type:O}=R;return O===Zo.Audio}),S=A.some(R=>{let{stream_type:O}=R;return O!==Zo.Audio}),I=A.some(R=>{let{stream_type:O}=R;return O===Zo.Screen||O===Zo.ScreenLow});"offer"===a.state&&zt.publish(this._joinInfo.sid,{eventElapse:Fu.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:Te.TIMEOUT,audio:v,video:S,p2pid:a.p2p_id,publishRequestid:this.store.pubId,screenshare:I,audioName:v?null===(c=A.find(R=>{let{stream_type:O}=R;return O===Zo.Audio}))||void 0===c||null===(p=c.ssrcs[0])||void 0===p?void 0:p.ssrcId.toString():void 0,videoName:S?null===(_=A.find(R=>{let{stream_type:O}=R;return O!==Zo.Audio}))||void 0===_||null===(m=_.ssrcs[0])||void 0===m?void 0:m.ssrcId.toString():void 0})}break}case on.SUBSCRIBE:a&&zt.subscribe(this._joinInfo.sid,{succ:!1,ec:Te.TIMEOUT,audio:a.stream_type===Xr.AUDIO,video:a.stream_type===Xr.VIDEO,peerid:a.stream_id,subscribeRequestid:a.ssrcId,p2pid:this.store.p2pId,eventElapse:Fu.measureFromSubscribeStart(this.store.clientId,a.ssrcId)})}}),this._gateway.signal.on(Hn.ON_P2P_OK,o=>{}),this._gateway.signal.on(Hn.ON_PUBLISHED_USER_LIST,o=>{if(null==o||!o.users)return;const a=[],c=[];for(const p of o.users){let _=this._users.find(I=>I.uid===p.stream_id);_?_._trust_in_room_=!0:(_=new XL(p.stream_id,p.stream_id),this._users.push(_),0===this.getListeners(St.PUBLISHED_USER_LIST).length&&(se.debug("[".concat(this._clientId,"] user online"),p.stream_id),ku("info",this,"user-joined",{uid:p.stream_id}),this.emit(St.USER_JOINED,_)));const m=jo.Audio&p.stream_type,A=(jo.Video|jo.LwoVideo)&p.stream_type,v=m&&_.hasAudio,S=A&&_.hasVideo;A&&(_._trust_video_stream_added_state_=!0,_._video_added_=!0,_._videoSSRC=p.video_ssrc),m&&(_._trust_audio_stream_added_state_=!0,_._audio_added_=!0,_._audioSSRC=p.audio_ssrc),m&&!v&&0===this.getListeners(St.PUBLISHED_USER_LIST).length&&(se.info("[".concat(this._clientId,"] remote user ").concat(_.uid," published audio")),jn("info",this,"remote user ".concat(_.uid," published audio")),this.emit(St.USER_PUBLISHED,_,"audio")),A&&!S&&0===this.getListeners(St.PUBLISHED_USER_LIST).length&&(se.info("[".concat(this._clientId,"] remote user ").concat(_.uid," published video")),jn("info",this,"remote user ".concat(_.uid," published video")),this.emit(St.USER_PUBLISHED,_,"video")),(m&&!v||A&&!S)&&a.push(_),A&&this._p2pChannel.hasPendingRemoteMedia(_,"video")&&c.push({user:_,mediaType:"video"}),m&&this._p2pChannel.hasPendingRemoteMedia(_,"audio")&&c.push({user:_,mediaType:"audio"})}c.length>0&&(se.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(c.map(p=>"user: ".concat(p.user.uid,", mediaType: ").concat(p.mediaType)).join("; ")," ")),this.massSubscribe(c).catch(p=>{se.error("[".concat(this._clientId,"] mass resubscribe error"),p.toString())})),this.getListeners(St.PUBLISHED_USER_LIST).length>0?(se.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(a.map(p=>p.uid).join(", "))),this.emit(St.PUBLISHED_USER_LIST,a)):se.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(a.map(p=>p.uid).join(", ")))})}_handleP2PChannelEvents(){var r=this;this._p2pChannel.on(gi.RequestMuteLocal,function(){var o=F(function*(a,c,p){if(r._joinInfo)try{yield r._gateway.muteLocal(a,r._joinInfo.stringUid||r._joinInfo.uid),c()}catch(_){_.code===Te.DISCONNECT_P2P?c():p(_)}else c()});return function(a,c,p){return o.apply(this,arguments)}}()),this._p2pChannel.on(gi.RequestUnmuteLocal,function(){var o=F(function*(a,c,p){if(r._joinInfo)try{yield r._gateway.unmuteLocal(a,r._joinInfo.stringUid||r._joinInfo.uid),c()}catch(_){_.code===Te.DISCONNECT_P2P?c():p(_)}else c()});return function(a,c,p){return o.apply(this,arguments)}}()),this._p2pChannel.on(gi.RequestRePublish,(o,a,c)=>{this.publish(o,!1).then(a).catch(c)}),this._p2pChannel.on(gi.RequestReSubscribe,function(){var o=F(function*(a,c,p){try{for(const{user:_,kind:m}of a)m===Xr.VIDEO?yield r.subscribe(_,"video"):yield r.subscribe(_,"audio");c()}catch(_){p(_)}});return function(a,c,p){return o.apply(this,arguments)}}()),this._p2pChannel.on(gi.RequestUploadStats,(o,a)=>{this._gateway.uploadStats(o,a)}),this._p2pChannel.on(gi.MediaReconnectStart,o=>{this.emit(St.MEDIA_RECONNECT_START,o)}),this._p2pChannel.on(gi.MediaReconnectEnd,o=>{this.emit(St.MEDIA_RECONNECT_END,o)}),this._p2pChannel.on(gi.NeedSignalRTT,o=>{o(this._gateway.getSignalRTT())}),this._p2pChannel.on(gi.RequestRestartICE,F(function*(){const o=yield r._p2pChannel.reEstablish();if(o){const{restartICEResponse:a,gatewayIP:c,gatewayPort:p}=yield r._gateway.restartICE({iceParameters:o.iceParameters}),{candidates:_,iceParameters:m}=function(A,v,S){const I=A.iceParameters;let R;return void 0!==v&&void 0!==S?(R=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:v,port:S.toString(),type:"host",extension:{}}],se.debug("Using remote candidate from AP ".concat(v,":").concat(S)),jn("debug",[],"Using remote candidate from AP ".concat(v,":").concat(S))):R=I.candidates.map(O=>({foundation:O.foundation,componentId:"1",transport:O.protocol,priority:O.priority.toString(),connectionAddress:O.ip,port:O.port.toString(),type:O.type,extension:{}})),{candidates:R,iceParameters:{iceUfrag:I.iceUfrag,icePwd:I.icePwd}}}(a,c,p);yield o.restartICE(m,_)}})),this._p2pChannel.on(gi.RequestReconnect,F(function*(){r._gateway.reconnect()})),this._p2pChannel.on(gi.RequestReconnectPC,F(function*(){var o;const{iceParameters:a,dtlsParameters:c,rtpCapabilities:p}=yield r._p2pChannel.startP2PConnection({turnServer:null===(o=r._joinInfo)||void 0===o?void 0:o.turnServer}),{gatewayEstablishParams:_,gatewayIP:m,gatewayPort:A}=yield r._gateway.reconnectPC({iceParameters:a,dtlsParameters:c,rtpCapabilities:p}),{dtlsParameters:v,iceParameters:S,candidates:I,rtpCapabilities:R,setup:O,cname:B}=aB(_,m,A);yield r._p2pChannel.connect(S,v,I,R,O,B),yield r._p2pChannel.republish(),yield r._p2pChannel.reSubscribe()})),this._p2pChannel.on(gi.RequestUnpublishForReconnectPC,function(){var o=F(function*(a,c,p){r._joinInfo&&void 0!==r._uid?(yield r._gateway.unpublish(a,r._uid),c()):p()});return function(a,c,p){return o.apply(this,arguments)}}()),this._p2pChannel.on(gi.P2PLost,()=>{this.emit(St.P2P_LOST,this.store.uid)}),this._p2pChannel.on(gi.UpdateVideoEncoder,o=>{o._encoderConfig&&this._gateway.setVideoProfile(o._encoderConfig)}),this._p2pChannel.on(gi.ConnectionTypeChange,o=>{this.emit(St.IS_USING_CLOUD_PROXY,o)}),this._p2pChannel.on(gi.RequestLowStreamParameter,o=>{o(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})}getKeyMetrics(){return this.store.keyMetrics}enableContentInspect(r){var o=this;return F(function*(){if("CONNECTED"!==o.connectionState||!o._joinInfo)throw new Le(Te.INVALID_OPERATION,"[".concat(o._clientId,"] Client did not join channel"));if(o._inspect)throw new Le(Te.INVALID_OPERATION,"[".concat(o._clientId,"] Inspect content service already in connecting/connected state"));if(!r)throw new Le(Te.INVALID_PARAMS,"[".concat(o._clientId,"] inspectConfig is necessary"));if(r&&r.extraInfo&&r.extraInfo.length>1024)throw new Le(Te.INVALID_PARAMS,"[".concat(o._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const a=new EB(r);o._inspect=a,o.handleVideoInspectEvents(o._inspect),yield a.init({appId:o._joinInfo.appId,areaCode:"",cname:o._joinInfo.cname,sid:o._joinInfo.sid,token:o._joinInfo.token,uid:o._joinInfo.uid,cid:o._joinInfo.cid,vid:o._joinInfo.vid?Number(o._joinInfo.vid):0},wo)}catch(a){throw Array.isArray(a)?a[0]:a}})()}disableContentInspect(){var r=this;return F(function*(){if(!r._inspect)throw new Le(Te.INVALID_OPERATION,"[".concat(r._clientId,"] inspectVideoContent not started"));try{r._inspect.close(),r._inspect=void 0}catch(o){throw Array.isArray(o)?o[0]:o}})()}handleVideoInspectEvents(r){r.on(os.CONNECTION_STATE_CHANGE,(o,a)=>{if(this.emit(St.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,o,a),a===Yl.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.emit(St.CONTENT_INSPECT_ERROR,new Le(Te.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));r.inspectImage()}}),r.on(os.INSPECT_RESULT,(o,a)=>{var c;if(a?.code===Te.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return se.debug("Stop inspect content because that has left channel"),null==this||null===(c=this._inspect)||void 0===c||c.close(),void(this._inspect=void 0);this.emit(St.CONTENT_INSPECT_RESULT,o,a)}),r.on(os.CLIENT_LOCAL_VIDEO_TRACK,o=>{o(this.localTracks.filter(a=>"video"===a.trackMediaType)[0])})}getJoinChannelServiceRecords(){return se.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}_handleResetAddStream(r,o){switch(o){case"audio":r._audio_added_=!1,r._trust_audio_stream_added_state_=!0;break;case"video":r._video_added_=!1,r._trust_video_stream_added_state_=!0}}}).prototype,"setProxyServer",[yQ],Object.getOwnPropertyDescriptor(as.prototype,"setProxyServer"),as.prototype),rr(as.prototype,"setTurnServer",[T4],Object.getOwnPropertyDescriptor(as.prototype,"setTurnServer"),as.prototype),rr(as.prototype,"setLocalAccessPoints",[HP],Object.getOwnPropertyDescriptor(as.prototype,"setLocalAccessPoints"),as.prototype),rr(as.prototype,"setRemoteDefaultVideoStreamType",[EQ],Object.getOwnPropertyDescriptor(as.prototype,"setRemoteDefaultVideoStreamType"),as.prototype),rr(as.prototype,"setEncryptionConfig",[bQ],Object.getOwnPropertyDescriptor(as.prototype,"setEncryptionConfig"),as.prototype),rr(as.prototype,"pickSVCLayer",[bB],Object.getOwnPropertyDescriptor(as.prototype,"pickSVCLayer"),as.prototype),rr(as.prototype,"enableContentInspect",[SQ],Object.getOwnPropertyDescriptor(as.prototype,"enableContentInspect"),as.prototype),rr(as.prototype,"disableContentInspect",[R4],Object.getOwnPropertyDescriptor(as.prototype,"disableContentInspect"),as.prototype),rr(as.prototype,"getJoinChannelServiceRecords",[CQ],Object.getOwnPropertyDescriptor(as.prototype,"getJoinChannelServiceRecords"),as.prototype),IQ=as))||IQ);class TQ extends uL{set currentState(o){o!==this._currentState&&(this._currentState=o,this.emit(or.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),J(this,"audioBuffer",void 0),J(this,"sourceNode",void 0),J(this,"startPlayTime",0),J(this,"startPlayOffset",0),J(this,"pausePlayTime",0),J(this,"options",void 0),J(this,"currentLoopCount",0),J(this,"_currentState","stopped"),this.audioBuffer=o,this.options=a,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(o){"stopped"===this.currentState?(this.options=o,this.startPlayOffset=this.options.startPlayTime||0):se.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(o){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=o,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=o))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const o=this.context.createBufferSource();return o.buffer=this.audioBuffer,o.loop=!!this.options.loop,o.connect(this.outputNode),o}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const RQ=new Map;function D4(){return D4=F(function*(r,o){let a=null;if("string"==typeof r){const p=RQ.get(r);if(p)return se.debug("use cached audio resource: ",r),p;try{a=(yield Ss(()=>Ms.get(r,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(_){throw new Le(Te.FETCH_AUDIO_FILE_FAILED,_.toString())}}else a=yield new qn((_,m)=>{const A=new FileReader;A.onload=v=>{v.target?_(v.target.result):m(new Le(Te.READ_LOCAL_AUDIO_FILE_ERROR))},A.onerror=()=>{m(new Le(Te.READ_LOCAL_AUDIO_FILE_ERROR))},A.readAsArrayBuffer(r)});const c=yield function(p){const _=zk();return new qn((m,A)=>{_.decodeAudioData(p,v=>{m(v)},v=>{A(new Le(Te.DECODE_AUDIO_FILE_FAILED,v.toString()))})})}(a);return"string"==typeof r&&o&&RQ.set(r,c),c}),D4.apply(this,arguments)}function OQ(r,o){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function CB(r){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?OQ(Object(a),!0).forEach(function(c){J(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):OQ(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function O4(r,o,a,c){a.optimizationMode&&(c&&c.width&&c.height?(a.encoderConfig=CB(CB({},c),{},{bitrateMin:c.bitrateMin,bitrateMax:c.bitrateMax}),"motion"!==a.optimizationMode&&"detail"!==a.optimizationMode||(o.contentHint=a.optimizationMode,o.contentHint===a.optimizationMode?(se.debug("[".concat(r,"] set content hint to"),a.optimizationMode),cr("debug",["AgoraRTC"],"videoTrackOptimizationModeProcess",[r,a,c])):(se.debug("[".concat(r,"] set content hint failed")),cr("warning",["AgoraRTC"],"videoTrackOptimizationModeProcess",[r,a,c],"failed")))):(se.warning("[".concat(r,"] can not apply optimization mode bitrate config, no encoderConfig")),jn("warning",["AgoraRTC"],"[".concat(r,"] can not apply optimization mode bitrate config, no encoderConfig"))))}const CW=xi().name;function IW(r,o,a,c){let p,_=0,m=null;return new qn((A,v)=>{setTimeout(()=>{p&&(p(),A(_))},o),p=_5(()=>{!function(){_>c&&p&&(p(),A(_));const S=a.getContext("2d");if(!S){const O=new Le(Te.UNEXPECTED_ERROR,"can not get canvas 2d context.");return se.error(O.toString()),void v(O)}S.drawImage(r,0,0,160,120);const I=S.getImageData(0,0,a.width,a.height),R=Math.floor(I.data.length/3);if(m){for(let O=0;O<R;O+=3)if(I.data[O]!==m[O])return _+=1,void(m=I.data);m=I.data}else m=I.data}()},30)})}class qT{constructor(o,a){J(this,"id",0),J(this,"element",void 0),J(this,"peerPair",void 0),J(this,"context",void 0),J(this,"audioPlayerElement",void 0),J(this,"audioTrack",void 0),qT.count+=1,this.id=qT.count,this.element=o,this.context=a}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=o=>{const a=document.createElement("audio");a.srcObject=new MediaStream([o.track]),a.play(),this.audioPlayerElement=a}}switchSdp(){var o=this;return F(function*(){if(!o.peerPair)return;const a=function(){var p=F(function*(_,m){const A="offer"===m?yield _.createOffer():yield _.createAnswer();return yield _.setLocalDescription(A),"complete"===_.iceGatheringState?_.localDescription:new qn(v=>{_.onicegatheringstatechange=()=>{"complete"===_.iceGatheringState&&v(_.localDescription)}})});return function(m,A){return p.apply(this,arguments)}}(),c=function(){var p=F(function*(_,m){return yield _.setRemoteDescription(m)});return function(m,A){return p.apply(this,arguments)}}();try{const p=yield a(o.peerPair[0],"offer");yield c(o.peerPair[1],p);const _=yield a(o.peerPair[1],"answer");yield c(o.peerPair[0],_)}catch(p){throw new Le(Te.LOCAL_AEC_ERROR,p.toString()).print()}})()}getTracksFromMediaElement(o){var a=this;return F(function*(){if(a.audioTrack)return a.audioTrack;let c;try{o instanceof HTMLVideoElement&&(o.captureStream?o.captureStream():o.mozCaptureStream()),c=a.context.createMediaStreamDestination(),a.context.createMediaElementSource(o).connect(c)}catch(_){throw new Le(Te.LOCAL_AEC_ERROR,_.toString()).print()}if(!c)throw new Le(Te.LOCAL_AEC_ERROR,"no dest node when local aec").print();const p=c.stream.getAudioTracks()[0];return a.audioTrack=p,p})()}getElement(){return this.element}startEchoCancellation(){var o=this;return F(function*(){o.context.resume(),o.peerPair&&o.close(),o.initPeers();const a=o.element,c=yield o.getTracksFromMediaElement(a);o.peerPair&&o.peerPair[0].addTrack(c),yield o.switchSdp()})()}close(){se.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(o=>{o.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var IB,GP;J(qT,"count",0);const wW=window.AudioContext||window.webkitAudioContext,Lz=new(IB=Gk({report:zt}),rr((GP=class{constructor(){J(this,"units",[]),J(this,"context",void 0)}processExternalMediaAEC(r){if(!this._doesEnvironmentNeedAEC())return se.debug("the system does not need to process local aec"),-1;this.context||(this.context=new wW);let o=this.units.find(a=>a&&a.getElement()===r);return o||(o=new qT(r,this.context),this.units.push(o)),o.startEchoCancellation(),se.debug("start processing local audio echo cancellation, id is",o.id),o.id}_doesEnvironmentNeedAEC(){return xi().name!==bi.SAFARI}}).prototype,"processExternalMediaAEC",[IB],Object.getOwnPropertyDescriptor(GP.prototype,"processExternalMediaAEC"),GP.prototype),GP);La("PROCESS_ID","process-".concat(_s(8,""),"-").concat(_s(4,""),"-").concat(_s(4,""),"-").concat(_s(4,""),"-").concat(_s(12,""))),function(){const r=xi();Sc.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),Sc.getStreamFromExtension=r.name===bi.CHROME&&Number(r.version)>34,Sc.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const o=new RTCPeerConnection;let a=!1;try{o.addTransceiver("audio"),a=!0}catch{}return o.close(),a}(),Sc.supportMinBitrate=r.name===bi.CHROME||r.name===bi.EDGE,Sc.supportSetRtpSenderParameters=function(){const o=xi();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Vy()||!(!jl()&&!IS())||o.name===bi.FIREFOX&&Number(o.version)>=64)}(),r.name===bi.SAFARI&&(Sc.supportDualStream=Number(r.version)>=14),Sc.webAudioMediaStreamDest=function(){const o=xi();return!(o.name===bi.SAFARI&&Number(o.version)<12)}(),Sc.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,Sc.supportWebGL=typeof WebGLRenderingContext<"u",Sc.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Vy()||(Sc.webAudioWithAEC=!0),Sc.supportShareAudio=function(){const o=xi();return(o.os===js.WIN_10||o.os===js.WIN_81||o.os===js.WIN_7||o.os===js.LINUX||o.os===js.MAC_OS)&&o.name===bi.CHROME&&Number(o.version)>=74}(),Sc.supportDualStreamEncoding=function(){const o=xi();return"Safari"===o.name&&Number(o.version)>=14}(),se.info("browser compatibility",JSON.stringify(Sc),JSON.stringify(r)),$t("info",[],"updateAgoraRTCCompatibility",{browserCompatibility:Sc,browserInfo:r})}(),function(){let r;try{r=window.localStorage.getItem("websdk_ng_global_parameter")}catch(o){return void se.error("Error loading sdk config",o.message)}if(r)try{const o=JSON.parse(window.atob(r)),a=Date.now();se.debug("Loading global parameters from cache",o),$t("debug",[],"loadConfigFromLocalStorage",o),Object.keys(o).forEach(c=>{if(Object.prototype.hasOwnProperty.call(Kc,c)){const{value:p,expires:_}=o[c];if(_&&_<=a)return;vx[c]=p,Kc[c]=p}})}catch(o){se.error("Error loading mutableParamsCache: ".concat(r),o.message)}}();const lE={__CLIENT_LIST__:LS,__TRACK_LIST__:bl,VERSION:El,BUILD:Dh,setParameter:La,getParameter:xt,getSupportedCodec:function(){var r=F(function*(){let o={audio:[],video:[]};try{let a=new RTCPeerConnection;a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"});const c=(yield a.createOffer()).sdp;if(!c)return o;a.close(),a=null,o=function(p){const _={video:[],audio:[]};return p.match(/ VP8/i)&&_.video.push("VP8"),p.match(/ VP9/i)&&_.video.push("VP9"),p.match(/ AV1/i)&&_.video.push("AV1"),p.match(/ H264/i)&&_.video.push("H264"),p.match(/ opus/i)&&_.audio.push("OPUS"),p.match(/ PCMU/i)&&_.audio.push("PCMU"),p.match(/ PCMA/i)&&_.audio.push("PCMA"),p.match(/ G722/i)&&_.audio.push("G722"),_}(c)}catch(a){throw new Le(Te.CREATE_OFFER_FAILED,a.toString&&a.toString()).print()}return o});return function(){return r.apply(this,arguments)}}(),checkSystemRequirements:function(){const r=zt.reportApiInvoke(null,{name:ze.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Qe.TRACER});let o=!1;try{const _=window.RTCPeerConnection,m=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,A=window.WebSocket;o=!!(_&&m&&A)}catch(_){return se.error("check system requirement failed: ",_),!1}let a=!1;const c=xi();c.name===bi.CHROME&&Number(c.version)>=58&&(!function Vw(){return"WebKit"===Sh.engine.name}()||function Uw(){const r=xi();if(IS()){if(r.os===js.MAC_OS)return!0;if(r.os===js.IOS){const o=Sh.os.version&&Sh.os.version.split(".");if(o&&14===Number(o[0])&&o[1]&&Number(o[1])>=3||o&&Number(o[0])>14)return!0}}return!1}())&&(a=!0),c.name===bi.FIREFOX&&Number(c.version)>=56&&(a=!0),c.name===bi.OPERA&&Number(c.version)>=45&&(a=!0),c.name===bi.SAFARI&&Number(c.version)>=11&&(a=!0),(YN()||xi().name===bi.QQ)&&(a=!0),se.debug("checkSystemRequirements, api:",o,"browser",a);const p=o&&a;return r.onSuccess(p),p},getDevices:function(r){return Bu.enumerateDevices(!0,!0,r)},getMicrophones:function(r){return Bu.getRecordingDevices(r)},getCameras:function(r){return Bu.getCamerasDevices(r)},getElectronScreenSources:v5,getPlaybackDevices:function(r){return Bu.getSpeakers(r)},createClient:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const o=zt.reportApiInvoke(null,{name:ze.CREATE_CLIENT,options:[r],tag:Qe.TRACER});try{Wi(r)}catch(a){throw o.onError(a),a}return void 0===r.audioCodec&&(r.audioCodec="opus"),o.onSuccess(),new SB(zT(zT({forceWaitGatewayResponse:!0},r),{},{role:"rtc"===r.mode?"host":r.role}))},createCameraVideoTrack:function(){var r=F(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{encoderConfig:"480p_1"};const a=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CREATE_CAM_VIDEO_TRACK,options:[CB({},o)]}),c=jV(o),p=_s(8,"track-cam-");let _=null;se.info("start create camera video track with config",JSON.stringify(o),"trackId",p),cr("info",["AgoraRTC"],"createCameraVideoTrack",o);try{_=(yield $l({video:c},p)).getVideoTracks()[0]||null}catch(A){throw a.onError(A),A}if(!_){const A=new Le(Te.UNEXPECTED_ERROR,"can not find track in media stream");return a.onError(A),A.throw()}o.optimizationMode&&O4(p,_,o,o.encoderConfig&&Pu(o.encoderConfig));const m=new u6(_,o,c,o.scalabiltyMode?NS(o.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},o.optimizationMode,p);return a.onSuccess(m.getTrackId()),se.info("create camera video success, trackId:",p),cr("info",["AgoraRTC"],"createCameraVideoTrack",void 0,p),m});return function(){return r.apply(this,arguments)}}(),createCustomVideoTrack:function(r){const o=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CREATE_CUSTOM_VIDEO_TRACK,options:[r]}),a=new Hs(r.mediaStreamTrack,{bitrateMax:r.bitrateMax,bitrateMin:r.bitrateMin},r.scalabiltyMode?NS(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode);return o.onSuccess(a.getTrackId()),se.info("create custom video track success with config",r,"trackId",a.getTrackId()),cr("info",["AgoraRTC"],"createCustomVideoTrack",r,a.getTrackId()),a},createScreenVideoTrack:function(){var r=F(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const c=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CREATE_SCREEN_VIDEO_TRACK,options:[CB({},o),a]});o.encoderConfig?"string"==typeof o.encoderConfig||o.encoderConfig.width&&o.encoderConfig.height||(o.encoderConfig.width={max:1920},o.encoderConfig.height={max:1080}):o.encoderConfig="1080p_2";const p=pG(o),_=_s(8,"track-scr");let m=null,A=null;const v=Yc();if(!v.supportShareAudio&&"enable"===a){const R=new Le(Te.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return c.onError(R),R.throw()}se.info("start create screen video track with config",o,"withAudio",a,"trackId",_),cr("info",["AgoraRTC"],"createScreenVideoTrack",[o,a]);try{const R=yield $l({screen:p,screenAudio:"auto"===a?v.supportShareAudio:"enable"===a},_);m=R.getVideoTracks()[0]||null,A=R.getAudioTracks()[0]||null}catch(R){throw c.onError(R),R}if(!m){const R=new Le(Te.UNEXPECTED_ERROR,"can not find track in media stream");return c.onError(R),R.throw()}if(!A&&"enable"===a){m&&m.stop();const R=new Le(Te.SHARE_AUDIO_NOT_ALLOWED);return c.onError(R),R.throw()}o.optimizationMode||(o.optimizationMode="detail"),o.optimizationMode&&(O4(_,m,o,o.encoderConfig&&nT(o.encoderConfig)),o.encoderConfig&&"string"!=typeof o.encoderConfig&&(o.encoderConfig.bitrateMin=o.encoderConfig.bitrateMax));const S=new Hs(m,o.encoderConfig?nT(o.encoderConfig):{},o.scalabiltyMode?NS(o.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},o.optimizationMode,_,[qc.SCREEN_TRACK]);if(!A)return c.onSuccess(S.getTrackId()),se.info("create screen video track success","video:",S.getTrackId()),cr("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:S.getTrackId()}),S;const I=new tc(A);return c.onSuccess([S.getTrackId(),I.getTrackId()]),se.info("create screen video track success","video:",S.getTrackId(),"audio:",I.getTrackId()),cr("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:S.getTrackId(),audioTrack:I.getTrackId()}),[S,I]});return function(){return r.apply(this,arguments)}}(),createMicrophoneAndCameraTracks:function(){var r=F(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoderConfig:"480p_1"};const c=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CREATE_MIC_AND_CAM_TRACKS,options:[o,a]}),p=jV(a),_=hG(o),m=_s(8,"track-mic-"),A=_s(8,"track-cam-");let v=null,S=null;se.info("start create camera video track(".concat(A,") and microphone audio track(").concat(m,") with config, audio: ").concat(JSON.stringify(o),", video: ").concat(JSON.stringify(a))),cr("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",{videoConfig:a,audioConfig:o});try{const O=yield $l({audio:_,video:p},"".concat(m,"-").concat(A));v=O.getAudioTracks()[0],S=O.getVideoTracks()[0]}catch(O){throw c.onError(O),O}if(!v||!S){const O=new Le(Te.UNEXPECTED_ERROR,"can not find tracks in media stream");return c.onError(O),O.throw()}a.optimizationMode&&O4(A,S,a,a.encoderConfig&&Pu(a.encoderConfig));const I=new ZS(v,o,_,m),R=new u6(S,a,p,a.scalabiltyMode?NS(a.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},a.optimizationMode,A);return c.onSuccess([I.getTrackId(),R.getTrackId()]),se.info("create camera video track(".concat(A,") and microphone audio track(").concat(m,") success")),cr("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",void 0,{videoTrackId:A,audioTrackId:m}),[I,R]});return function(){return r.apply(this,arguments)}}(),createMicrophoneAudioTrack:function(){var r=F(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CREATE_MIC_AUDIO_TRACK,options:[o]}),c=hG(o),p=_s(8,"track-mic-");let _=null;se.info("start create microphone audio track with config",JSON.stringify(o),"trackId",p),cr("info",["AgoraRTC"],"createMicrophoneAudioTrack",o);try{_=(yield $l({audio:c},p)).getAudioTracks()[0]||null}catch(A){throw a.onError(A),A}if(!_){const A=new Le(Te.UNEXPECTED_ERROR,"can not find track in media stream");return a.onError(A),A.throw()}const m=new ZS(_,o,c,p);return a.onSuccess(m.getTrackId()),se.info("create microphone audio track success, trackId:",p),cr("info",["AgoraRTC"],"createMicrophoneAudioTrack",o,p),m});return function(){return r.apply(this,arguments)}}(),createCustomAudioTrack:function(r){const o=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CREATE_CUSTOM_AUDIO_TRACK,options:[r]}),a=new tc(r.mediaStreamTrack,r.encoderConfig?xf(r.encoderConfig):{});return se.info("create custom audio track success with config",r,"trackId",a.getTrackId()),cr("info",["AgoraRTC"],"createCustomAudioTrack",r,a.getTrackId()),o.onSuccess(a.getTrackId()),a},createBufferSourceAudioTrack:function(){var r=F(function*(o){const a=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CREATE_BUFFER_AUDIO_TRACK,options:[o]}),c=_s(8,"track-buf-");se.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",c),cr("info",[],"createBufferSourceAudioTrack",o);const p=o.source;if(!(o.source instanceof AudioBuffer))try{o.source=yield function DQ(r,o){return D4.apply(this,arguments)}(o.source,o.cacheOnlineFile)}catch(A){return a.onError(A),A.throw()}const _=new TQ(o.source),m=new R5(p,_,o.encoderConfig?xf(o.encoderConfig):{},c);return se.info("create buffer source audio track success, trackId:",c),cr("info",["AgoraRTC"],"createBufferSourceAudioTrack",void 0,c),a.onSuccess(m.getTrackId()),m});return function(a){return r.apply(this,arguments)}}(),setLogLevel:function(r){xt("USE_NEW_LOG")?function(o){o=Math.min(Math.max(0,o),4),Du=o}(r):se.setLogLevel(r)},enableLogUpload:function(){xt("USE_NEW_LOG")?La("UPLOAD_LOG",!0):se.enableLogUpload()},disableLogUpload:function(){xt("USE_NEW_LOG")?La("UPLOAD_LOG",!1):se.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new LV},checkAudioTrackIsActive:function(){var r=F(function*(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[a]});if(!(o instanceof tc||o instanceof Tg)){const S=new Le(Te.INVALID_TRACK,"the parameter is not a audio track");return c.onError(S),S.throw()}a&&a<1e3&&(a=1e3);const p=o instanceof tc?o.getTrackLabel():"remote_track",_=o.getVolumeLevel();let m=_,A=_;const v=Date.now();return new qn(S=>{const I=setInterval(()=>{const R=o.getVolumeLevel();m=R>m?R:m,A=R<A?R:A;const O=m-A>1e-4,B=Date.now()-v;if(O||B>a){clearInterval(I);const q=O,z={duration:B,deviceLabel:p,maxVolumeLevel:m,result:q};se.info("[track-".concat(o.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(z))),c.onSuccess(z),S(q)}},200)})});return function(a){return r.apply(this,arguments)}}(),checkVideoTrackIsActive:function(){var r=F(function*(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=zt.reportApiInvoke(null,{tag:Qe.TRACER,name:ze.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[a]});if(!(o instanceof Hs||o instanceof hB)){const B=new Le(Te.INVALID_TRACK,"the parameter is not a video track");return c.onError(B),B.throw()}const p=4;a&&a<1e3&&(a=1e3);const _=o instanceof Hs?o.getTrackLabel():"remote_track",m=o.getMediaStreamTrack(!0),A=document.createElement("video");A.style.width="1px",A.style.height="1px",A.setAttribute("muted",""),A.muted=!0,A.setAttribute("playsinline",""),A.controls=!1,(jl()||IS())&&(A.style.opacity="0.01",A.style.position="fixed",A.style.left="0",A.style.top="0",document.body.appendChild(A)),A.srcObject=new MediaStream([m]),A.play();const v=document.createElement("canvas");v.width=160,v.height=120;let S=0,I=0;try{const B=Date.now();S=yield IW(A,a,v,p),I=Date.now()-B}catch(B){throw c.onError(B),B}CW===bi.SAFARI&&(A.pause(),A.remove()),A.srcObject=null;const R=S>p,O={duration:I,changedPicNum:S,deviceLabel:_,result:R};return se.info("[track-".concat(o.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(O))),c.onSuccess(O),R});return function(a){return r.apply(this,arguments)}}(),setArea:function(r){const o=zt.reportApiInvoke(null,{name:ze.SET_AREA,options:r,tag:Qe.TRACER});try{let a=[];if("string"==typeof r&&(a=[r]),Array.isArray(r)&&(r.forEach(p=>{if(!Dx.includes(p))throw new Le(Te.INVALID_PARAMS,"invalid area code")}),a=r),"[object Object]"===Object.prototype.toString.call(r)){const{areaCode:p,excludedArea:_}=r;if(!p)throw new Le(Te.INVALID_PARAMS,"area code is needed");let m=p;"string"==typeof p&&(m=[p]),a=_?function(r,o){let a=[];if(r.includes(si.GLOBAL)){const _=[si.GLOBAL,si.OVERSEA],m=Object.keys(Ok);if(o===si.GLOBAL)throw new Le(Te.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(o===si.CHINA)a=[si.OVERSEA];else if(OV.includes(o)){const A=HL[si.GLOBAL][o]||[],v=[..._,o,...A];a=m.filter(S=>!v.includes(S))}else if(function(A){let v=!1;return OV.forEach(S=>{HL[si.GLOBAL][S].includes(A)&&(v=!0)}),v}(o)){const A=function(S){let I;return OV.forEach(R=>{HL[si.GLOBAL][R].includes(S)&&(I=R)}),I}(o),v=[..._,A,o];a=m.filter(S=>!v.includes(S))}else a=r;a=function(A){const v=[];return x8.forEach(S=>{A.includes(S)&&v.push(S)}),v.concat(A.filter(S=>!x8.includes(S)))}(a)}else a=r;return a}(m,_):m}La("AREAS",a);const c=(p=>{const _={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return p.map(m=>{const A=Ok[m],v=Object.keys(A);v&&v.map(S=>{"CODE"!==S&&(_[S]=_[S].concat(A[S]))})}),_})(a);Object.keys(c).map(p=>{La(p,"LOG_UPLOAD_SERVER"===p||"EVENT_REPORT_DOMAIN"===p||"EVENT_REPORT_BACKUP_DOMAIN"===p||"PROXY_SERVER_TYPE3"===p?c[p][0]:c[p])}),se.debug("set area success:",a.join(","))}catch(a){throw o.onError(a),a}o.onSuccess()},loadModule:function(){var r=F(function*(o,a){if(se.debug("loadModule: ".concat(o.name,", loadOption: ").concat(JSON.stringify(a))),!o.moduleInit)throw se.debug("Invalid Plugin"),new Le(Te.INVALID_PLUGIN,"invalid plugin");try{Kk.installPlugin(o),yield o.moduleInit({logger:se,report:zt,pluginCenter:Kk,getParameter:xt},a)}catch(c){throw new Le(Te.UNEXPECTED_ERROR,"unexpected error in loadModule",c)}});return function(a,c){return r.apply(this,arguments)}}(),audioElementPlayCenter:wd,processExternalMediaAEC:function(r){Lz.processExternalMediaAEC(r)},registerExtensions:function(r){r.forEach(o=>{const a=o;a.__registered__=!0,a.logger.hookLog=se.extLog,a.reporter.hookApiInvoke=zt.extApiInvoke,a.parameters&&Object.keys(a.parameters).forEach(c=>{a.parameters[c]=xt(c)})})},ChannelMediaRelayError:Oh,ChannelMediaRelayEvent:zc,ChannelMediaRelayState:Cs,RemoteStreamFallbackType:ij,RemoteStreamType:BU,ConnectionDisconnectedReason:mt,AudienceLatencyLevelType:ut,AREAS:si};return Object.defineProperties(lE,{onAudioAutoplayFailed:{get:()=>Cd.onAudioAutoplayFailed,set:r=>{Cd.onAudioAutoplayFailed=r}},onAutoplayFailed:{get:()=>Cd.onAutoplayFailed,set:r=>{Cd.onAutoplayFailed=r}}}),Bu.on(Xt.CAMERA_DEVICE_CHANGED,r=>{se.info("camera device changed",JSON.stringify(r)),lE.onCameraChanged&&lE.onCameraChanged(r)}),Bu.on(Xt.RECORDING_DEVICE_CHANGED,r=>{se.info("microphone device changed",JSON.stringify(r)),lE.onMicrophoneChanged&&lE.onMicrophoneChanged(r)}),Bu.on(Xt.PLAYOUT_DEVICE_CHANGED,r=>{se.debug("playout device changed",JSON.stringify(r)),lE.onPlaybackDeviceChanged&&lE.onPlaybackDeviceChanged(r)}),wd.onAutoplayFailed=()=>{se.info("detect audio element autoplay failed"),Cd.onAudioAutoplayFailed&&Cd.onAudioAutoplayFailed()},qr.on("autoplay-failed",()=>{se.info("detect webaudio autoplay failed"),Cd.onAudioAutoplayFailed&&Cd.onAudioAutoplayFailed()}),window&&(window.__ARTC__=lE),lE}()},9069:we=>{"use strict";var F,Pe="object"==typeof Reflect?Reflect:null,$=Pe&&"function"==typeof Pe.apply?Pe.apply:function(fe,Ae,Ee){return Function.prototype.apply.call(fe,Ae,Ee)};F=Pe&&"function"==typeof Pe.ownKeys?Pe.ownKeys:Object.getOwnPropertySymbols?function(fe){return Object.getOwnPropertyNames(fe).concat(Object.getOwnPropertySymbols(fe))}:function(fe){return Object.getOwnPropertyNames(fe)};var oe=Number.isNaN||function(fe){return fe!=fe};function H(){H.init.call(this)}we.exports=H,we.exports.once=function K(ke,fe){return new Promise(function(Ae,Ee){function ve(he){ke.removeListener(fe,le),Ee(he)}function le(){"function"==typeof ke.removeListener&&ke.removeListener("error",ve),Ae([].slice.call(arguments))}ye(ke,fe,le,{once:!0}),"error"!==fe&&function ce(ke,fe,Ae){"function"==typeof ke.on&&ye(ke,"error",fe,Ae)}(ke,ve,{once:!0})})},H.EventEmitter=H,H.prototype._events=void 0,H.prototype._eventsCount=0,H.prototype._maxListeners=void 0;var j=10;function M(ke){if("function"!=typeof ke)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ke)}function P(ke){return void 0===ke._maxListeners?H.defaultMaxListeners:ke._maxListeners}function x(ke,fe,Ae,Ee){var ve,le,he;if(M(Ae),void 0===(le=ke._events)?(le=ke._events=Object.create(null),ke._eventsCount=0):(void 0!==le.newListener&&(ke.emit("newListener",fe,Ae.listener?Ae.listener:Ae),le=ke._events),he=le[fe]),void 0===he)he=le[fe]=Ae,++ke._eventsCount;else if("function"==typeof he?he=le[fe]=Ee?[Ae,he]:[he,Ae]:Ee?he.unshift(Ae):he.push(Ae),(ve=P(ke))>0&&he.length>ve&&!he.warned){he.warned=!0;var Oe=new Error("Possible EventEmitter memory leak detected. "+he.length+" "+String(fe)+" listeners added. Use emitter.setMaxListeners() to increase limit");Oe.name="MaxListenersExceededWarning",Oe.emitter=ke,Oe.type=fe,Oe.count=he.length,function re(ke){console&&console.warn&&console.warn(ke)}(Oe)}return ke}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Z(ke,fe,Ae){var Ee={fired:!1,wrapFn:void 0,target:ke,type:fe,listener:Ae},ve=U.bind(Ee);return ve.listener=Ae,Ee.wrapFn=ve,ve}function ae(ke,fe,Ae){var Ee=ke._events;if(void 0===Ee)return[];var ve=Ee[fe];return void 0===ve?[]:"function"==typeof ve?Ae?[ve.listener||ve]:[ve]:Ae?function Y(ke){for(var fe=new Array(ke.length),Ae=0;Ae<fe.length;++Ae)fe[Ae]=ke[Ae].listener||ke[Ae];return fe}(ve):pe(ve,ve.length)}function ue(ke){var fe=this._events;if(void 0!==fe){var Ae=fe[ke];if("function"==typeof Ae)return 1;if(void 0!==Ae)return Ae.length}return 0}function pe(ke,fe){for(var Ae=new Array(fe),Ee=0;Ee<fe;++Ee)Ae[Ee]=ke[Ee];return Ae}function ye(ke,fe,Ae,Ee){if("function"==typeof ke.on)Ee.once?ke.once(fe,Ae):ke.on(fe,Ae);else{if("function"!=typeof ke.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ke);ke.addEventListener(fe,function ve(le){Ee.once&&ke.removeEventListener(fe,ve),Ae(le)})}}Object.defineProperty(H,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(ke){if("number"!=typeof ke||ke<0||oe(ke))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ke+".");j=ke}}),H.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},H.prototype.setMaxListeners=function(fe){if("number"!=typeof fe||fe<0||oe(fe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+fe+".");return this._maxListeners=fe,this},H.prototype.getMaxListeners=function(){return P(this)},H.prototype.emit=function(fe){for(var Ae=[],Ee=1;Ee<arguments.length;Ee++)Ae.push(arguments[Ee]);var ve="error"===fe,le=this._events;if(void 0!==le)ve=ve&&void 0===le.error;else if(!ve)return!1;if(ve){var he;if(Ae.length>0&&(he=Ae[0]),he instanceof Error)throw he;var Oe=new Error("Unhandled error."+(he?" ("+he.message+")":""));throw Oe.context=he,Oe}var je=le[fe];if(void 0===je)return!1;if("function"==typeof je)$(je,this,Ae);else{var Fe=je.length,He=pe(je,Fe);for(Ee=0;Ee<Fe;++Ee)$(He[Ee],this,Ae)}return!0},H.prototype.on=H.prototype.addListener=function(fe,Ae){return x(this,fe,Ae,!1)},H.prototype.prependListener=function(fe,Ae){return x(this,fe,Ae,!0)},H.prototype.once=function(fe,Ae){return M(Ae),this.on(fe,Z(this,fe,Ae)),this},H.prototype.prependOnceListener=function(fe,Ae){return M(Ae),this.prependListener(fe,Z(this,fe,Ae)),this},H.prototype.off=H.prototype.removeListener=function(fe,Ae){var Ee,ve,le,he,Oe;if(M(Ae),void 0===(ve=this._events))return this;if(void 0===(Ee=ve[fe]))return this;if(Ee===Ae||Ee.listener===Ae)0==--this._eventsCount?this._events=Object.create(null):(delete ve[fe],ve.removeListener&&this.emit("removeListener",fe,Ee.listener||Ae));else if("function"!=typeof Ee){for(le=-1,he=Ee.length-1;he>=0;he--)if(Ee[he]===Ae||Ee[he].listener===Ae){Oe=Ee[he].listener,le=he;break}if(le<0)return this;0===le?Ee.shift():function ee(ke,fe){for(;fe+1<ke.length;fe++)ke[fe]=ke[fe+1];ke.pop()}(Ee,le),1===Ee.length&&(ve[fe]=Ee[0]),void 0!==ve.removeListener&&this.emit("removeListener",fe,Oe||Ae)}return this},H.prototype.removeAllListeners=function(fe){var Ae,Ee,ve;if(void 0===(Ee=this._events))return this;if(void 0===Ee.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Ee[fe]&&(0==--this._eventsCount?this._events=Object.create(null):delete Ee[fe]),this;if(0===arguments.length){var he,le=Object.keys(Ee);for(ve=0;ve<le.length;++ve)"removeListener"!==(he=le[ve])&&this.removeAllListeners(he);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Ae=Ee[fe]))this.removeListener(fe,Ae);else if(void 0!==Ae)for(ve=Ae.length-1;ve>=0;ve--)this.removeListener(fe,Ae[ve]);return this},H.prototype.listeners=function(fe){return ae(this,fe,!0)},H.prototype.rawListeners=function(fe){return ae(this,fe,!1)},H.listenerCount=function(ke,fe){return"function"==typeof ke.listenerCount?ke.listenerCount(fe):ue.call(ke,fe)},H.prototype.listenerCount=ue,H.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]}},302:(we,Pe,$)=>{"use strict";var F=$(8126);we.exports=function re(oe,H,j,M){var P,x=new Error("Canceled");return new F(function(Z,ae,ue){var pe;oe(function(Y){return ue()?F.reject(x):(pe=H(Y),j(pe).then(function(ce){if(ue())throw x;return P=ce()}))}).then(function(Y){if(ue())throw Y.disconnect(),x;Z(M(pe,Y))}).catch(function(Y){ae(Y)})},function(){P&&P.cancel()})}},5769:(we,Pe,$)=>{"use strict";var F=$(1647).MediaStreamTrack,re=$(7627),oe=re.guessBrowser,H=re.guessBrowserVersion,j=$(302),M=$(8130),P=$(3383),x=$(3744),U=$(4920),Z=$(7379),ae=Z.LocalAudioTrack,ue=Z.LocalDataTrack,pe=Z.LocalVideoTrack,ee=$(4621),Y=$(7406),K=$(448),ce=$(9739),ye=ce.asLocalTrack,ke=ce.buildLogLevels,fe=ce.filterObject,Ae=ce.isNonArrayObject,Ee=$(8701),ve=Ee.DEFAULT_ENVIRONMENT,le=Ee.DEFAULT_LOG_LEVEL,he=Ee.DEFAULT_LOGGER_NAME,Oe=Ee.DEFAULT_REALM,je=Ee.DEFAULT_REGION,Fe=Ee.WS_SERVER,He=Ee.SDK_NAME,rt=Ee.SDK_VERSION,nt=Ee.typeErrors,Ke=$(8126),Nt=$(8606),Ht=$(1458),Et=$(1501).kG,Je="safari"===oe()&&H(),Ve=0,$e=!1,De=!1;if(Je){var ot=Je.major;De=ot<12||12===ot&&Je.minor<1}var qt=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),Ot=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function bt(Fn,vn,no){no.forEach(function(Ho){var ia=Ho.didWarn,yo=Ho.name,oa=Ho.newName,fo=Ho.shouldDelete;yo in Fn&&typeof Fn[yo]<"u"&&(oa&&fo&&(Fn[oa]=Fn[yo]),fo&&delete Fn[yo],!ia&&!["error","off"].includes(vn.level)&&(vn.warn('The ConnectOptions "'+yo+'" is '+(oa?'deprecated and scheduled for removal. Please use "'+oa+'" instead.':"no longer applicable and will be ignored.")),Ho.didWarn=!0))})}function Gt(Fn,vn,no,Ho,ia,yo){var oa=Fn.createLocalParticipantSignaling(no,Ho);return vn.debug("Creating a new LocalParticipant:",oa),new ia.LocalParticipant(oa,yo,ia)}function ln(Fn,vn,no){var Ho=new Y(vn,no,Fn),ia=Fn.log;return ia.debug("Creating a new Room:",Ho),no.on("stateChanged",function yo(oa){"disconnected"===oa&&(ia.info("Disconnected from Room:",Ho.toString()),no.removeListener("stateChanged",yo))}),Ho}function Xe(Fn,vn,no,Ho,ia,yo){return vn.log.debug("Creating a new RoomSignaling"),no.connect(yo._signaling,Fn,Ho,ia,vn)}function Be(Fn,vn){var no=Fn.log;return Fn.shouldStopLocalTracks=!Fn.tracks,Fn.shouldStopLocalTracks?no.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(no.info("Getting LocalTracks"),no.debug("Options:",Fn)),Fn.createLocalTracks(Fn).then(function(ia){var yo=vn(ia);return yo.catch(function(){Fn.shouldStopLocalTracks&&(no.info("The automatically acquired LocalTracks will now be stopped"),ia.forEach(function(fo){fo.stop()}))}),yo})}function pt(Fn){var vn="string"==typeof Fn?{codec:Fn}:Fn;switch(vn.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},vn);case"vp8":return Object.assign({simulcast:!1},vn);default:return vn}}we.exports=function Jt(Fn,vn){if(typeof vn>"u"&&(vn={}),!Ae(vn))return Ke.reject(nt.INVALID_TYPE("options","object"));var fo,no=vn.Log||Ht,Ho=vn.loggerName||he,ia=vn.logLevel||le,yo=ke(ia),oa="[connect #"+ ++Ve+"]";try{fo=new no("default",oa,yo,Ho)}catch(Tr){return Ke.reject(Tr)}bt(vn,fo,qt);var Rc="auto"===vn.preferredVideoCodecs;if(Rc&&(vn.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),vn.maxVideoBitrate&&Rc)return fo.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),Ke.reject(nt.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));var $n={};"string"==typeof(vn=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:ve,eventListener:null,insights:!0,LocalAudioTrack:ae,LocalDataTrack:ue,LocalParticipant:P,LocalVideoTrack:pe,Log:no,MediaStreamTrack:F,loggerName:Ho,logLevel:ia,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:Oe,region:je,signaling:K},fe(vn))).wsServerInsights&&($n.gateway=vn.wsServerInsights);var tt=new(vn.insights?x:U)(Fn,He,rt,vn.environment,vn.realm,$n),Ue=Fe(vn.environment,vn.region),sn=new Nt(tt,Date.now(),fo,vn.eventListener);if((vn=Object.assign({eventObserver:sn,wsServer:Ue},vn)).log=fo,De&&!$e&&"error"!==fo.logLevel&&"off"!==fo.logLevel&&($e=!0,fo.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof Fn)return Ke.reject(nt.INVALID_TYPE("token","string"));var an=Object.assign({},vn);if(delete an.name,"tracks"in vn){if(!Array.isArray(vn.tracks))return Ke.reject(nt.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{vn.tracks=vn.tracks.map(function(Tr){return ye(Tr,an)})}catch(Tr){return Ke.reject(Tr)}}var Sn=Et(vn.bandwidthProfile);if(Sn)return Ke.reject(Sn);vn.clientTrackSwitchOffControl="disabled",vn.contentPreferencesMode="disabled",vn.bandwidthProfile&&(vn.clientTrackSwitchOffControl="auto",vn.contentPreferencesMode="auto",vn.bandwidthProfile.video&&(bt(vn.bandwidthProfile.video,fo,Ot),vn.clientTrackSwitchOffControl="maxTracks"in vn.bandwidthProfile.video?"disabled":"manual"===vn.bandwidthProfile.video.clientTrackSwitchOffControl?"manual":"auto",vn.contentPreferencesMode="renderDimensions"in vn.bandwidthProfile.video?"disabled":"manual"===vn.bandwidthProfile.video.contentPreferencesMode?"manual":"auto"));var mo=new(0,vn.signaling)(vn.wsServer,vn);fo.info("Connecting to a Room"),fo.debug("Options:",vn);var Ns=new M({maxAudioBitrate:vn.maxAudioBitrate,maxVideoBitrate:vn.maxVideoBitrate},Rc),xs={audio:vn.preferredAudioCodecs.map(pt),video:vn.preferredVideoCodecs.map(pt)},go=new ee(Ae(vn.networkQuality)?vn.networkQuality:{}),To=j(Be.bind(null,vn),Gt.bind(null,mo,fo,Ns,go,vn),Xe.bind(null,Fn,vn,mo,Ns,xs),ln.bind(null,vn));return To.then(function(Tr){return tt.connect(Tr.sid,Tr.localParticipant.sid),fo.info("Connected to Room:",Tr.toString()),fo.info("Room name:",Tr.name),fo.debug("Room:",Tr),Tr.once("disconnected",function(){return tt.disconnect()}),Tr},function(Tr){tt.disconnect(),To._isCanceled?fo.info("Attempt to connect to a Room was canceled"):fo.info("Error while connecting to a Room:",Tr)}),To}},8765:(we,Pe,$)=>{"use strict";var F=$(8701),re=F.DEFAULT_LOG_LEVEL,oe=F.DEFAULT_LOGGER_NAME;function H(P,x){x=Object.assign({loggerName:oe,logLevel:re},x);var U={};U.loggerName=x.loggerName,U.logLevel=x.logLevel,delete x.loggerName,delete x.logLevel;var Z=x.createLocalTracks;return delete x.createLocalTracks,U[P]=!(Object.keys(x).length>0)||x,Z(U).then(function(ae){return ae[0]})}we.exports={audio:function j(P){return H("audio",P)},video:function M(P){return H("video",P)}}},7124:function(we,Pe,$){"use strict";var F=this&&this.__assign||function(){return F=Object.assign||function(ve){for(var le,he=1,Oe=arguments.length;he<Oe;he++)for(var je in le=arguments[he])Object.prototype.hasOwnProperty.call(le,je)&&(ve[je]=le[je]);return ve},F.apply(this,arguments)},re=this&&this.__awaiter||function(ve,le,he,Oe){return new(he||(he=Promise))(function(Fe,He){function rt(Nt){try{Ke(Oe.next(Nt))}catch(Ht){He(Ht)}}function nt(Nt){try{Ke(Oe.throw(Nt))}catch(Ht){He(Ht)}}function Ke(Nt){Nt.done?Fe(Nt.value):function je(Fe){return Fe instanceof he?Fe:new he(function(He){He(Fe)})}(Nt.value).then(rt,nt)}Ke((Oe=Oe.apply(ve,le||[])).next())})},oe=this&&this.__generator||function(ve,le){var Oe,je,Fe,He,he={label:0,sent:function(){if(1&Fe[0])throw Fe[1];return Fe[1]},trys:[],ops:[]};return He={next:rt(0),throw:rt(1),return:rt(2)},"function"==typeof Symbol&&(He[Symbol.iterator]=function(){return this}),He;function rt(Ke){return function(Nt){return function nt(Ke){if(Oe)throw new TypeError("Generator is already executing.");for(;he;)try{if(Oe=1,je&&(Fe=2&Ke[0]?je.return:Ke[0]?je.throw||((Fe=je.return)&&Fe.call(je),0):je.next)&&!(Fe=Fe.call(je,Ke[1])).done)return Fe;switch(je=0,Fe&&(Ke=[2&Ke[0],Fe.value]),Ke[0]){case 0:case 1:Fe=Ke;break;case 4:return he.label++,{value:Ke[1],done:!1};case 5:he.label++,je=Ke[1],Ke=[0];continue;case 7:Ke=he.ops.pop(),he.trys.pop();continue;default:if(!(Fe=(Fe=he.trys).length>0&&Fe[Fe.length-1])&&(6===Ke[0]||2===Ke[0])){he=0;continue}if(3===Ke[0]&&(!Fe||Ke[1]>Fe[0]&&Ke[1]<Fe[3])){he.label=Ke[1];break}if(6===Ke[0]&&he.label<Fe[1]){he.label=Fe[1],Fe=Ke;break}if(Fe&&he.label<Fe[2]){he.label=Fe[2],he.ops.push(Ke);break}Fe[2]&&he.ops.pop(),he.trys.pop();continue}Ke=le.call(ve,he)}catch(Nt){Ke=[6,Nt],je=0}finally{Oe=Fe=0}if(5&Ke[0])throw Ke[1];return{value:Ke[0]?Ke[1]:void 0,done:!0}}([Ke,Nt])}}},H=this&&this.__read||function(ve,le){var he="function"==typeof Symbol&&ve[Symbol.iterator];if(!he)return ve;var je,He,Oe=he.call(ve),Fe=[];try{for(;(void 0===le||le-- >0)&&!(je=Oe.next()).done;)Fe.push(je.value)}catch(rt){He={error:rt}}finally{try{je&&!je.done&&(he=Oe.return)&&he.call(Oe)}finally{if(He)throw He.error}}return Fe},j=this&&this.__spreadArray||function(ve,le){for(var he=0,Oe=le.length,je=ve.length;he<Oe;he++,je++)ve[je]=le[he];return ve};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.createLocalTracks=void 0;var M=$(9739),P=M.asLocalTrack,x=M.buildLogLevels,U=$(1647),Z=U.getUserMedia,ae=U.MediaStreamTrack,ue=$(7379),pe=ue.LocalAudioTrack,ee=ue.LocalDataTrack,Y=ue.LocalVideoTrack,K=$(1458),ce=$(8701),ye=ce.DEFAULT_LOG_LEVEL,ke=ce.DEFAULT_LOGGER_NAME,fe=$(3830),Ae=0;Pe.createLocalTracks=function Ee(ve){return re(this,void 0,void 0,function(){var le,he,Oe,je,Fe,He,rt,nt,Ke,Nt,Ht,Et;return oe(this,function(Je){switch(Je.label){case 0:if(he=F({audio:le=!(ve&&("audio"in ve||"video"in ve)),getUserMedia:Z,loggerName:ke,logLevel:ye,LocalAudioTrack:pe,LocalDataTrack:ee,LocalVideoTrack:Y,MediaStreamTrack:ae,Log:K,video:le},ve),Oe="[createLocalTracks #"+ ++Ae+"]",je=x(he.logLevel),Fe=new he.Log("default",Oe,je,he.loggerName),delete(He=Object.assign({log:Fe},he)).name,!1===he.audio&&!1===he.video)return Fe.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(he.tracks)return Fe.info("Adding user-provided LocalTracks"),Fe.debug("LocalTracks:",he.tracks),[2,he.tracks];(rt={audio:"object"==typeof he.audio&&he.audio.name?{name:he.audio.name}:{},video:"object"==typeof he.video&&he.video.name?{name:he.video.name}:{}}).audio.isCreatedByCreateLocalTracks=!0,rt.video.isCreatedByCreateLocalTracks=!0,"object"==typeof he.audio&&"boolean"==typeof he.audio.workaroundWebKitBug1208516&&(rt.audio.workaroundWebKitBug1208516=he.audio.workaroundWebKitBug1208516),"object"==typeof he.video&&"boolean"==typeof he.video.workaroundWebKitBug1208516&&(rt.video.workaroundWebKitBug1208516=he.video.workaroundWebKitBug1208516),"object"==typeof he.audio&&delete he.audio.name,"object"==typeof he.video&&delete he.video.name,nt={audio:he.audio,video:he.video},Ke="object"==typeof he.audio&&he.audio.workaroundWebKitBug180748,Je.label=1;case 1:return Je.trys.push([1,3,,4]),[4,Ke?fe(Fe,he.getUserMedia,nt):he.getUserMedia(nt)];case 2:return Nt=Je.sent(),Ht=j(j([],H(Nt.getAudioTracks())),H(Nt.getVideoTracks())),Fe.info("Call to getUserMedia successful; got MediaStreamTracks:",Ht),[2,Ht.map(function(Ve){return P(Ve,F(F({},rt[Ve.kind]),He))})];case 3:throw Et=Je.sent(),Fe.warn("Call to getUserMedia failed:",Et),Et;case 4:return[2]}})})}},2498:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(5295),oe=$(9020),H=function(j){function M(P){var x=j.call(this,P.label,P.maxPacketLifeTime,P.maxRetransmits,P.ordered)||this;return Object.defineProperties(x,{_dataChannel:{value:P}}),P.binaryType="arraybuffer",P.addEventListener("message",function(U){x.emit("message",U.data)}),P.addEventListener("close",function(){x.emit("close")}),x}return F(M,j),M.prototype.stop=function(){this._dataChannel.close(),j.prototype.stop.call(this)},M.prototype.toDataTransport=function(){return new oe(this._dataChannel)},M}(re);we.exports=H},1866:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(5295),oe=$(9739).makeUUID,H=function(j){function M(P,x,U){var Z=j.call(this,oe(),P,x,U)||this;return Object.defineProperties(Z,{_clones:{value:new Set},_dataChannels:{value:new Set}}),Z}return F(M,j),M.prototype._addClone=function(P){this._clones.add(P)},M.prototype.removeClone=function(P){this._clones.delete(P)},M.prototype.addDataChannel=function(P){return this._dataChannels.add(P),this},M.prototype.clone=function(){var P=this,x=new M(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(x),x.once("stopped",function(){return P.removeClone(x)}),x},M.prototype.removeDataChannel=function(P){return this._dataChannels.delete(P),this},M.prototype.send=function(P){return this._dataChannels.forEach(function(x){try{x.send(P)}catch{}}),this._clones.forEach(function(x){try{x.send(P)}catch{}}),this},M.prototype.stop=function(){this._dataChannels.forEach(function(P){return P.close()}),this._clones.forEach(function(P){return P.stop()}),j.prototype.stop.call(this)},M}(re);we.exports=H},5295:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,U){var Z=H.call(this,M,"data")||this;return Object.defineProperties(Z,{maxPacketLifeTime:{enumerable:!0,value:P},maxRetransmits:{enumerable:!0,value:x},ordered:{enumerable:!0,value:U}}),Z}return F(j,H),j}($(4605));we.exports=oe},9020:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){var P=H.call(this)||this;return Object.defineProperties(P,{_dataChannel:{value:M},_messageQueue:{value:[]}}),M.addEventListener("open",function(){P._messageQueue.splice(0).forEach(function(x){return P._publish(x)})}),M.addEventListener("message",function(x){var U=x.data;try{var Z=JSON.parse(U);P.emit("message",Z)}catch{}}),P.publish({type:"ready"}),P}return F(j,H),j.prototype._publish=function(M){var P=JSON.stringify(M);try{this._dataChannel.send(P)}catch{}},j.prototype.publish=function(M){var P=this._dataChannel;return"closing"!==P.readyState&&"closed"!==P.readyState&&("connecting"===P.readyState?(this._messageQueue.push(M),!0):(this._publish(M),!0))},j}($(9069).EventEmitter);we.exports=oe},8130:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this)||this;return M=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},M),Object.defineProperties(x,{maxAudioBitrate:{value:M.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:M.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:P}}),x}return F(j,H),j.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},j.prototype.update=function(M){var P=this;M=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},M),["maxAudioBitrate","maxVideoBitrate"].reduce(function(U,Z){return P[Z]!==M[Z]&&(P[Z]=M[Z],U=!0),U},!1)&&this.emit("changed")},j}($(9069).EventEmitter);we.exports=oe},133:(we,Pe,$)=>{"use strict";var F=$(9069).EventEmitter,re=$(9739).hidePrivateAndCertainPublicPropertiesInClass;we.exports=re(F,["domain"])},6021:function(we,Pe,$){"use strict";var F=this&&this.__assign||function(){return F=Object.assign||function(ee){for(var Y,K=1,ce=arguments.length;K<ce;K++)for(var ye in Y=arguments[K])Object.prototype.hasOwnProperty.call(Y,ye)&&(ee[ye]=Y[ye]);return ee},F.apply(this,arguments)};Object.defineProperty(Pe,"__esModule",{value:!0});var re=$(7124),oe=$(8682),H={connect:$(5769),createLocalAudioTrack:$(8765).audio,createLocalVideoTrack:$(8765).video,isSupported:$(8592)(),version:$(1730).version,Logger:$(7846),LocalAudioTrack:$(7379).LocalAudioTrack,LocalDataTrack:$(7379).LocalDataTrack,LocalVideoTrack:$(7379).LocalVideoTrack};we.exports={connect:function j(ee,Y){var K=F({createLocalTracks:re.createLocalTracks},Y);return H.connect(ee,K)},createLocalAudioTrack:function M(ee){var Y=F({createLocalTracks:re.createLocalTracks},ee);return H.createLocalAudioTrack(Y)},createLocalVideoTrack:function P(ee){var Y=F({createLocalTracks:re.createLocalTracks},ee);return H.createLocalVideoTrack(Y)},createLocalTracks:re.createLocalTracks,runPreflight:oe.runPreflight,isSupported:H.isSupported,version:H.version,Logger:H.Logger,LocalAudioTrack:H.LocalAudioTrack,LocalVideoTrack:H.LocalVideoTrack,LocalDataTrack:H.LocalDataTrack}},3383:function(we,Pe,$){"use strict";var Ae,F=this&&this.__extends||(Ae=function(Ee,ve){return(Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,he){le.__proto__=he}||function(le,he){for(var Oe in he)Object.prototype.hasOwnProperty.call(he,Oe)&&(le[Oe]=he[Oe])})(Ee,ve)},function(Ee,ve){if("function"!=typeof ve&&null!==ve)throw new TypeError("Class extends value "+String(ve)+" is not a constructor or null");function le(){this.constructor=Ee}Ae(Ee,ve),Ee.prototype=null===ve?Object.create(ve):(le.prototype=ve.prototype,new le)}),re=$(1647).MediaStreamTrack,oe=$(9739),H=oe.asLocalTrack,j=oe.asLocalTrackPublication,M=oe.trackClass,P=$(8701),x=P.typeErrors,U=P.trackPriority,Z=$(1501).Wv,ae=$(7379),ue=ae.LocalAudioTrack,pe=ae.LocalDataTrack,ee=ae.LocalVideoTrack,Y=$(3925),K=$(5229),ce=$(9565),ke=function(Ae){function Ee(ve,le,he){var Oe=this,je=(he=Object.assign({LocalAudioTrack:ue,LocalVideoTrack:ee,LocalDataTrack:pe,MediaStreamTrack:re,LocalAudioTrackPublication:Y,LocalVideoTrackPublication:ce,LocalDataTrackPublication:K,shouldStopLocalTracks:!1,tracks:le},he)).shouldStopLocalTracks?new Set(le.filter(function(Fe){return"data"!==Fe.kind})):new Set;return Oe=Ae.call(this,ve,he)||this,Object.defineProperties(Oe,{_eventObserver:{value:he.eventObserver},_LocalAudioTrack:{value:he.LocalAudioTrack},_LocalDataTrack:{value:he.LocalDataTrack},_LocalVideoTrack:{value:he.LocalVideoTrack},_MediaStreamTrack:{value:he.MediaStreamTrack},_LocalAudioTrackPublication:{value:he.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:he.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:he.LocalVideoTrackPublication},_tracksToStop:{value:je},signalingRegion:{enumerable:!0,get:function(){return ve.signalingRegion}}}),Oe._handleTrackSignalingEvents(),Oe}return F(Ee,Ae),Ee.prototype._addTrack=function(ve,le,he){var Oe=Ae.prototype._addTrack.call(this,ve,le);return Oe&&"disconnected"!==this.state&&this._addLocalTrack(ve,he),Oe},Ee.prototype._addLocalTrack=function(ve,le){this._signaling.addTrack(ve._trackSender,ve.name,le),this._log.info("Added a new "+M(ve,!0)+":",ve.id),this._log.debug(M(ve,!0)+":",ve)},Ee.prototype._removeTrack=function(ve,le){var he=Ae.prototype._removeTrack.call(this,ve,le);return he&&"disconnected"!==this.state&&(this._signaling.removeTrack(ve._trackSender),this._log.info("Removed a "+M(ve,!0)+":",ve.id),this._log.debug(M(ve,!0)+":",ve)),he},Ee.prototype._getTrackEvents=function(){return Ae.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},Ee.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},Ee.prototype._handleTrackSignalingEvents=function(){var ve=this,le=this._log;if("disconnected"!==this.state){var he=this._signaling;this.on("trackDisabled",Oe),this.on("trackEnabled",je),this.on("trackStopped",Fe),this._tracks.forEach(function(rt){ve._addLocalTrack(rt,U.PRIORITY_STANDARD),ve._getOrCreateLocalTrackPublication(rt).catch(function(nt){le.warn("Failed to get or create LocalTrackPublication for "+rt+":",nt)})});var He=this;he.on("stateChanged",function rt(nt){le.debug("Transitioned to state:",nt),"disconnected"===nt?(le.debug("Removing LocalTrack event listeners"),he.removeListener("stateChanged",rt),He.removeListener("trackDisabled",Oe),He.removeListener("trackEnabled",je),He.removeListener("trackStopped",Fe),He._tracks.forEach(function(Ke){var Nt=Fe(Ke);Nt&&Ke._trackSender.removeClone(Nt._trackTransceiver)}),le.info("LocalParticipant disconnected. Stopping "+He._tracksToStop.size+" automatically-acquired LocalTracks"),He._tracksToStop.forEach(function(Ke){Ke.stop()})):"connected"===nt&&(le.info("reconnected"),setTimeout(function(){return He.emit("reconnected")},0))})}function Oe(rt){var nt=he.getPublication(rt._trackSender);nt&&(nt.disable(),le.debug("Disabled the "+M(rt,!0)+":",rt.id))}function je(rt){var nt=he.getPublication(rt._trackSender);nt&&(nt.enable(),le.debug("Enabled the "+M(rt,!0)+":",rt.id))}function Fe(rt){var nt=he.getPublication(rt._trackSender);return nt&&nt.stop(),nt}},Ee.prototype._getOrCreateLocalTrackPublication=function(ve){var le=fe(this.tracks,ve);if(le)return Promise.resolve(le);var he=this._log,Oe=this,je=this._signaling.getPublication(ve._trackSender);if(!je)return Promise.reject(new Error("Unexpected error: The "+ve+" cannot be published"));function Fe(He){Oe.unpublishTrack(He.track)}return new Promise(function(He,rt){je.on("updated",function nt(){var Ke=je.error;if(Ke)return je.removeListener("updated",nt),he.warn("Failed to publish the "+M(ve,!0)+": "+Ke.message),Oe._removeTrack(ve,ve.id),setTimeout(function(){Oe.emit("trackPublicationFailed",Ke,ve)}),void rt(Ke);if(!Oe._tracks.has(ve.id))return je.removeListener("updated",nt),void rt(new Error("The "+ve+" was unpublished"));if(je.sid){je.removeListener("updated",nt);var Ht={log:he,LocalAudioTrackPublication:Oe._LocalAudioTrackPublication,LocalDataTrackPublication:Oe._LocalDataTrackPublication,LocalVideoTrackPublication:Oe._LocalVideoTrackPublication};(le=fe(Oe.tracks,ve))||(le=j(ve,je,Fe,Ht),Oe._addTrackPublication(le));var Et=Oe._signaling.state;("connected"===Et||"connecting"===Et)&&(ve._processorEventObserver&&ve._processorEventObserver.on("event",function(Je){Oe._eventObserver.emit("event",{name:Je.name,payload:Je.data,group:"video-processor",level:"info"})}),ve.processedTrack&&(ve._captureFrames(),ve._setSenderMediaStreamTrack(!0))),"connected"===Et&&setTimeout(function(){Oe.emit("trackPublished",le)}),He(le)}})})},Ee.prototype.publishTrack=function(ve,le){var Oe,he=fe(this.tracks,ve);if(he)return Promise.resolve(he);le=Object.assign({log:this._log,priority:U.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},le);try{Oe=H(ve,le)}catch(He){return Promise.reject(He)}var je=Object.values(U);if(!je.includes(le.priority))return Promise.reject(x.INVALID_VALUE("LocalTrackPublishOptions.priority",je));var Fe=this._addTrack(Oe,Oe.id,le.priority)||this._tracks.get(Oe.id);return this._getOrCreateLocalTrackPublication(Fe)},Ee.prototype.publishTracks=function(ve){if(!Array.isArray(ve))throw x.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(ve.map(this.publishTrack,this))},Ee.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},Ee.prototype.setNetworkQualityConfiguration=function(ve){if("object"!=typeof ve||null===ve)throw x.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(le){if(le in ve&&("number"!=typeof ve[le]||isNaN(ve[le])))throw x.INVALID_TYPE("networkQualityConfiguration."+le,"number")}),this._signaling.setNetworkQualityConfiguration(ve),this},Ee.prototype.setParameters=function(ve){if(typeof ve<"u"&&"object"!=typeof ve)throw x.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(ve){if(this._signaling.getParameters().adaptiveSimulcast&&ve.maxVideoBitrate)throw x.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(le){if(typeof ve[le]<"u"&&"number"!=typeof ve[le]&&null!==ve[le])throw x.INVALID_TYPE("encodingParameters."+le,"number, null or undefined")})}else null===ve&&(ve={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(ve),this},Ee.prototype.unpublishTrack=function(ve){Z(ve,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var le=this._tracks.get(ve.id);if(!le)return null;if(this._signaling.getPublication(le._trackSender).publishFailed(new Error("The "+le+" was unpublished")),!(le=this._removeTrack(le,le.id)))return null;var Oe=fe(this.tracks,le);return Oe&&this._removeTrackPublication(Oe),Oe},Ee.prototype.unpublishTracks=function(ve){var le=this;if(!Array.isArray(ve))throw x.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return ve.reduce(function(he,Oe){var je=le.unpublishTrack(Oe);return je?he.concat(je):he},[])},Ee}($(9218));function fe(Ae,Ee){return Array.from(Ae.values()).find(function(ve){return ve.track===Ee||ve.track.mediaStreamTrack===Ee})||null}we.exports=ke},1534:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return F(j,H),j.prototype._start=function(){H.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},j.prototype.attach=function(){return H.prototype.attach.apply(this,arguments)},j.prototype.detach=function(){return H.prototype.detach.apply(this,arguments)},j}($(5366));we.exports=oe},7379:(we,Pe,$)=>{"use strict";we.exports={LocalAudioTrack:$(2954),LocalVideoTrack:$(1),LocalDataTrack:$(1560)}},2954:(we,Pe,$)=>{"use strict";var F=$(1905),re=$(6213);function oe(H,j){var M=new re(H,j);return Object.setPrototypeOf(M,oe.prototype),M}F(oe,re),we.exports=oe},1560:(we,Pe,$)=>{"use strict";var F=$(1905),re=$(212);function oe(H){var j=new re(H);return Object.setPrototypeOf(j,oe.prototype),j}F(oe,re),we.exports=oe},1:(we,Pe,$)=>{"use strict";var F=$(1905),re=$(4847);function oe(H,j){var M=new re(H,j);return Object.setPrototypeOf(M,oe.prototype),M}F(oe,re),we.exports=oe},1703:function(we,Pe,$){"use strict";var Z,F=this&&this.__extends||(Z=function(ae,ue){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pe,ee){pe.__proto__=ee}||function(pe,ee){for(var Y in ee)Object.prototype.hasOwnProperty.call(ee,Y)&&(pe[Y]=ee[Y])})(ae,ue)},function(ae,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function pe(){this.constructor=ae}Z(ae,ue),ae.prototype=null===ue?Object.create(ue):(pe.prototype=ue.prototype,new pe)}),re=$(133),oe=$(9739),H=oe.buildLogLevels,j=oe.valueToJSON,M=$(8701).DEFAULT_LOG_LEVEL,P=$(1458),x=0,U=function(Z){function ae(ue,pe,ee){var Y;ee=Object.assign({name:ue,log:null,logLevel:M},ee),Y=Z.call(this)||this;var K=String(ee.name),ce=H(ee.logLevel),ye=ee.log?ee.log.createLog("media",Y):new P("media",Y,ce,ee.loggerName);return Object.defineProperties(Y,{_instanceId:{value:++x},_log:{value:ye},kind:{enumerable:!0,value:pe},name:{enumerable:!0,value:K}}),Y}return F(ae,Z),ae.prototype.toJSON=function(){return j(this)},ae}(re);we.exports=U},6213:function(we,Pe,$){"use strict";var M,F=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&(U[ae]=Z[ae])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function U(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(U.prototype=x.prototype,new U)}),re=$(1534),j=function(M){function P(x,U){return M.call(this,x,U)||this}return F(P,M),P.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},P.prototype.attach=function(x){return(x=M.prototype.attach.call(this,x)).muted=!0,x},P.prototype._end=function(){return M.prototype._end.apply(this,arguments)},P.prototype.disable=function(){return M.prototype.disable.apply(this,arguments)},P.prototype.enable=function(){return M.prototype.enable.apply(this,arguments)},P.prototype.restart=function(){return M.prototype.restart.apply(this,arguments)},P.prototype.stop=function(){return M.prototype.stop.apply(this,arguments)},P}($(8275)(re));we.exports=j},3925:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,U){return H.call(this,M,P,x,U)||this}return F(j,H),j.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}($(3335));we.exports=oe},212:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(1703),oe=$(1866),H=function(j){function M(P){var x,Z=new(0,(P=Object.assign({DataTrackSender:oe,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},P)).DataTrackSender)(P.maxPacketLifeTime,P.maxRetransmits,P.ordered);return x=j.call(this,Z.id,"data",P)||this,Object.defineProperties(x,{_trackSender:{value:Z},id:{enumerable:!0,value:Z.id},maxPacketLifeTime:{enumerable:!0,value:P.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:P.maxRetransmits},ordered:{enumerable:!0,value:P.ordered},reliable:{enumerable:!0,value:null===P.maxPacketLifeTime&&null===P.maxRetransmits}}),x}return F(M,j),M.prototype.send=function(P){this._trackSender.send(P)},M}(re);we.exports=H},5229:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,U){return H.call(this,M,P,x,U)||this}return F(j,H),j.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}($(3335));we.exports=oe},8275:function(we,Pe,$){"use strict";var Ae,F=this&&this.__extends||(Ae=function(Ee,ve){return(Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,he){le.__proto__=he}||function(le,he){for(var Oe in he)Object.prototype.hasOwnProperty.call(he,Oe)&&(le[Oe]=he[Oe])})(Ee,ve)},function(Ee,ve){if("function"!=typeof ve&&null!==ve)throw new TypeError("Class extends value "+String(ve)+" is not a constructor or null");function le(){this.constructor=Ee}Ae(Ee,ve),Ee.prototype=null===ve?Object.create(ve):(le.prototype=ve.prototype,new le)}),re=$(1647).getUserMedia,oe=$(7627),H=oe.guessBrowser,j=oe.isIOSChrome,M=$(9739),P=M.capitalize,x=M.defer,U=M.isUserMediaTrack,Z=M.waitForSometime,ae=M.waitForEvent,ue=$(8701).typeErrors.ILLEGAL_INVOKE,pe=$(9059),ee=$(1741),Y=$(2181),K=$(6396),ce=$(3830),ye=$(808);function fe(Ae){var Ee=Ae._log,ve=Ae.kind,le={audio:pe,video:ee}[ve],he=Ae._dummyEl,Oe=Ae.mediaStreamTrack,je=null;function rt(){return Promise.race([ae(Oe,"unmute"),Z(50)]).then(function(){return function He(){var Ve=Ae.mediaStreamTrack.muted,$e=Ae.isStopped&&!!Ae._workaroundWebKitBug1208516Cleanup;return Promise.resolve().then(function(){return"visible"===document.visibilityState&&!je&&(Ve||$e||function Fe(){return he.play().then(function(){return le(he)}).then(function(Et){return Et?Ee.warn("Silence detected"):Ee.info("Non-silence detected"),Et}).catch(function(Et){Ee.warn("Failed to detect silence:",Et)}).finally(function(){he.pause()})}())})}()}).then(function(Et){return Et&&!je&&(je=x(),Ae._restart().finally(function(){he=Ae._dummyEl,Nt(),Oe=Ae.mediaStreamTrack,Ke(),je.resolve(),je=null}).catch(function(Ve){Ee.error("failed to restart track: ",Ve)})),(je&&je.promise||Promise.resolve()).finally(function(){return K.resolveDeferred(ve)})}).catch(function(Et){Ee.error("error in maybeRestart: "+Et.message)})}function nt(){var Et=Ae._log,Je=Ae.kind;Et.info("Muted"),Et.debug("LocalMediaTrack:",Ae),K.startDeferred(Je)}function Ke(){Oe.addEventListener("ended",rt),Oe.addEventListener("mute",nt),Oe.addEventListener("unmute",rt)}function Nt(){Oe.removeEventListener("ended",rt),Oe.removeEventListener("mute",nt),Oe.removeEventListener("unmute",rt)}var Ht=function(Et){return!!Et&&rt()};return Y.onVisibilityChange(1,Ht),Ke(),function(){Y.offVisibilityChange(1,Ht),Nt()}}we.exports=function ke(Ae){return function(Ee){function ve(le,he){var Oe=this,je=("safari"===H()||j())&&U(le)&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;he=Object.assign({getUserMedia:re,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:je,gUMSilentTrackWorkaround:ce},he);var Fe=new ye(le),He=Fe.kind;return Oe=Ee.call(this,Fe,he)||this,Object.defineProperties(Oe,{_constraints:{value:"object"==typeof he[He]?he[He]:{},writable:!0},_getUserMedia:{value:he.getUserMedia},_gUMSilentTrackWorkaround:{value:he.gUMSilentTrackWorkaround},_workaroundWebKitBug1208516:{value:he.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:he.isCreatedByCreateLocalTracks},_trackSender:{value:Fe},id:{enumerable:!0,value:Fe.id},isEnabled:{enumerable:!0,get:function(){return Fe.enabled}},isStopped:{enumerable:!0,get:function(){return"ended"===Fe.readyState}}}),Oe._workaroundWebKitBug1208516&&(Oe._workaroundWebKitBug1208516Cleanup=fe(Oe)),Oe}return F(ve,Ee),ve.prototype._end=function(){this._didCallEnd||(Ee.prototype._end.call(this),this._didCallEnd=!0,this.emit("stopped",this))},ve.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),Ee.prototype._initialize.call(this)},ve.prototype._reacquireTrack=function(le){var he,je=this._getUserMedia,Fe=this._gUMSilentTrackWorkaround,He=this._log,rt=this.mediaStreamTrack.kind;He.info("Re-acquiring the MediaStreamTrack"),He.debug("Constraints:",le);var nt=Object.assign({audio:!1,video:!1},((he={})[rt]=le,he));return(this._workaroundWebKitBug1208516Cleanup?Fe(He,je,nt):je(nt)).then(function(Nt){return Nt.getTracks()[0]})},ve.prototype._restart=function(le){var he=this,Oe=this._log;return le=le||this._constraints,this._stop(),this._reacquireTrack(le).catch(function(je){throw Oe.error("Failed to re-acquire the MediaStreamTrack:",{error:je,constraints:le}),je}).then(function(je){return Oe.info("Re-acquired the MediaStreamTrack"),Oe.debug("MediaStreamTrack:",je),he._constraints=Object.assign({},le),he._setMediaStreamTrack(je)})},ve.prototype._setMediaStreamTrack=function(le){var he=this;return le.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){he._unprocessedTrack=le}):this._trackSender.setMediaStreamTrack(le).catch(function(Oe){he._log.warn("setMediaStreamTrack failed:",{error:Oe,mediaStreamTrack:le})})).then(function(){he._initialize(),he._getAllAttachedElements().forEach(function(Oe){return he._attach(Oe)})})},ve.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},ve.prototype.enable=function(le){return(le="boolean"!=typeof le||le)!==this.mediaStreamTrack.enabled&&(this._log.info((le?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=le,this.emit(le?"enabled":"disabled",this)),this},ve.prototype.disable=function(){return this.enable(!1)},ve.prototype.restart=function(le){var he=this,Oe=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(ue("restart","can only be called on a Local"+P(Oe)+"Track that is created using createLocalTracks or createLocal"+P(Oe)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var je=this._restart(le);return this._workaroundWebKitBug1208516&&(je=je.finally(function(){he._workaroundWebKitBug1208516Cleanup=fe(he)})),je},ve.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},ve}(Ae)}},3335:function(we,Pe,$){"use strict";var P,F=this&&this.__extends||(P=function(x,U){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ae){Z.__proto__=ae}||function(Z,ae){for(var ue in ae)Object.prototype.hasOwnProperty.call(ae,ue)&&(Z[ue]=ae[ue])})(x,U)},function(x,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function Z(){this.constructor=x}P(x,U),x.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)}),re=$(9222),oe=$(8701),H=oe.typeErrors,j=oe.trackPriority,M=function(P){function x(U,Z,ae,ue){var pe=P.call(this,Z.name,U.sid,ue)||this;return Object.defineProperties(pe,{_reemitTrackEvent:{value:function(){return pe.emit(pe.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:U},_unpublish:{value:ae},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:Z.kind},priority:{enumerable:!0,get:function(){return U.updatedPriority}},track:{enumerable:!0,value:Z}}),Z.on("disabled",pe._reemitTrackEvent),Z.on("enabled",pe._reemitTrackEvent),pe}return F(x,P),x.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},x.prototype.setPriority=function(U){var Z=Object.values(j);if(!Z.includes(U))throw H.INVALID_VALUE("priority",Z);return this._signaling.setPriority(U),this},x.prototype.unpublish=function(){return this.track.removeListener("disabled",this._reemitTrackEvent),this.track.removeListener("enabled",this._reemitTrackEvent),this._unpublish(this),this},x}(re);we.exports=M},4847:function(we,Pe,$){"use strict";var ue,F=this&&this.__extends||(ue=function(pe,ee){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var ce in K)Object.prototype.hasOwnProperty.call(K,ce)&&(Y[ce]=K[ce])})(pe,ee)},function(pe,ee){if("function"!=typeof ee&&null!==ee)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");function Y(){this.constructor=pe}ue(pe,ee),pe.prototype=null===ee?Object.create(ee):(Y.prototype=ee.prototype,new Y)}),re=$(7627),oe=re.guessBrowser,H=re.isIOSChrome,j=$(1741),M=$(8275),P=$(4332),x=$(9739).isUserMediaTrack,Z=function(ue){function pe(ee,Y){var K=this;return Y=Object.assign({workaroundSilentLocalVideo:("safari"===oe()||H())&&x(ee)&&typeof document<"u"&&"function"==typeof document.createElement},Y),K=ue.call(this,ee,Y)||this,Object.defineProperties(K,{_workaroundSilentLocalVideo:{value:Y.workaroundSilentLocalVideo?ae:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),K._workaroundSilentLocalVideo&&(K._workaroundSilentLocalVideoCleanup=K._workaroundSilentLocalVideo(K,document)),K}return F(pe,ue),pe.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},pe.prototype._checkIfCanCaptureFrames=function(){return ue.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},pe.prototype._end=function(){return ue.prototype._end.apply(this,arguments)},pe.prototype._setSenderMediaStreamTrack=function(ee){var Y=this,K=this.mediaStreamTrack,ce=ee?this.processedTrack:K;return this._trackSender.setMediaStreamTrack(ce).catch(function(ye){return Y._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:ye,mediaStreamTrack:ce})}).then(function(){Y._unprocessedTrack=ee?K:null})},pe.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var ee=ue.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),ee):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},pe.prototype.removeProcessor=function(){var ee=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var Y=ue.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return ee._updateElementsMediaStreamTrack()}),Y},pe.prototype.disable=function(){var ee=ue.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),ee},pe.prototype.enable=function(ee){void 0===ee&&(ee=!0);var Y=ue.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=ee,ee&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),Y},pe.prototype.restart=function(){var ee=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var Y=ue.prototype.restart.apply(this,arguments);return this.processor&&Y.then(function(){ee._restartProcessor()}),this._workaroundSilentLocalVideo&&Y.finally(function(){ee._workaroundSilentLocalVideoCleanup=ee._workaroundSilentLocalVideo(ee,document)}),Y},pe.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),ue.prototype.stop.apply(this,arguments)},pe}(M(P));function ae(ue,pe){var ee=ue._log,Y=ue._dummyEl,K=ue.mediaStreamTrack;function ce(){!ue.isEnabled||(ee.info("Unmuted, checking silence"),Y.play().then(function(){return j(Y,pe)}).then(function(ye){if(ye)return ee.warn("Silence detected, restarting"),ue._stop(),ue._restart();ee.info("Non-silent frames detected, so no need to restart")}).catch(function(ye){ee.warn("Failed to detect silence and restart:",ye)}).finally(function(){(Y=ue._dummyEl).paused||Y.pause(),K.removeEventListener("unmute",ce),(K=ue.mediaStreamTrack).addEventListener("unmute",ce)}))}return K.addEventListener("unmute",ce),function(){K.removeEventListener("unmute",ce)}}we.exports=Z},9565:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,U){return H.call(this,M,P,x,U)||this}return F(j,H),j.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}($(3335));we.exports=oe},5366:function(we,Pe,$){"use strict";var ee,F=this&&this.__extends||(ee=function(Y,K){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,ye){ce.__proto__=ye}||function(ce,ye){for(var ke in ye)Object.prototype.hasOwnProperty.call(ye,ke)&&(ce[ke]=ye[ke])})(Y,K)},function(Y,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function ce(){this.constructor=Y}ee(Y,K),Y.prototype=null===K?Object.create(K):(ce.prototype=K.prototype,new ce)}),re=$(7627),oe=re.guessBrowser,H=re.isIOSChrome,j=$(1647).MediaStream,M=$(9739),P=M.waitForEvent,x=M.waitForSometime,U=$(6396),ae=function(ee){function Y(K,ce){var ye=this;ce=Object.assign({playPausedElementsIfNotBackgrounded:("safari"===oe()||H())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},ce),ye=ee.call(this,K.id,K.kind,ce)||this;var ke=!1;return ce=Object.assign({MediaStream:j},ce),Object.defineProperties(ye,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return ke},set:function(fe){ke=fe}},_playPausedElementsIfNotBackgrounded:{value:ce.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:ce.workaroundWebKitBug212780||ce.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:ce.MediaStream},isStarted:{enumerable:!0,get:function(){return ke}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||K.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),ye._initialize(),ye}return F(Y,ee),Y.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},Y.prototype._initialize=function(){var K=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",function ce(){K._end(),K.mediaStreamTrack.removeEventListener("ended",ce)}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},Y.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},Y.prototype.attach=function(K){var ce=this;if("string"==typeof K?K=this._selectElement(K):K||(K=this._createElement()),this._log.debug("Attempting to attach to element:",K),K=this._attach(K),this._shouldShimAttachedElements&&!this._elShims.has(K)){var ye=this._playPausedElementsIfNotBackgrounded?function(){return function ue(ee,Y){var K=ee.tagName.toLowerCase();Y.warn("Unintentionally paused:",ee),Promise.race([P(document,"visibilitychange"),x(1e3)]).then(function(){"visible"===document.visibilityState&&U.whenResolved("audio").then(function(){return Y.info("Playing unintentionally paused <"+K+"> element"),Y.debug("Element:",ee),ee.play()}).then(function(){Y.info("Successfully played unintentionally paused <"+K+"> element"),Y.debug("Element:",ee)}).catch(function(ce){Y.warn("Error while playing unintentionally paused <"+K+"> element:",{error:ce,el:ee})})})}(K,ce._log)}:null;this._elShims.set(K,function pe(ee,Y){void 0===Y&&(Y=null);var K=ee.pause,ce=ee.play,ye=!1;ee.pause=function(){return ye=!0,K.call(ee)},ee.play=function(){return ye=!1,ce.call(ee)};var ke=Y?function(){ye||Y()}:null;return ke&&ee.addEventListener("pause",ke),{pausedIntentionally:function(){return ye},unShim:function(){ee.pause=K,ee.play=ce,ke&&ee.removeEventListener("pause",ke)}}}(K,ye))}return K},Y.prototype._attach=function(K,ce){void 0===ce&&(ce=this.processedTrack||this.mediaStreamTrack);var ye=K.srcObject;return ye instanceof this._MediaStream||(ye=new this._MediaStream),ye["audio"===ce.kind?"getAudioTracks":"getVideoTracks"]().forEach(function(fe){ye.removeTrack(fe)}),ye.addTrack(ce),K.srcObject=ye,K.autoplay=!0,K.playsInline=!0,this._attachments.has(K)||this._attachments.add(K),K},Y.prototype._selectElement=function(K){var ce=document.querySelector(K);if(!ce)throw new Error("Selector matched no element: "+K);return ce},Y.prototype._updateElementsMediaStreamTrack=function(){var K=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(ce){return K._attach(ce)})},Y.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},Y.prototype.detach=function(K){var ce;return ce="string"==typeof K?[this._selectElement(K)]:K?[K]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",ce),this._detachElements(ce),K?ce[0]:ce},Y.prototype._detachElements=function(K){return K.map(this._detachElement.bind(this))},Y.prototype._detachElement=function(K){if(!this._attachments.has(K))return K;var ce=K.srcObject;return ce instanceof this._MediaStream&&ce.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(K),this._shouldShimAttachedElements&&this._elShims.has(K)&&(this._elShims.get(K).unShim(),this._elShims.delete(K)),K},Y.prototype._getAllAttachedElements=function(){var K=[];return this._attachments.forEach(function(ce){K.push(ce)}),K},Y}($(1703));we.exports=ae},3501:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return F(j,H),j}($(1639));we.exports=oe},8797:function(we,Pe,$){"use strict";var M,F=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&(U[ae]=Z[ae])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function U(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(U.prototype=x.prototype,new U)}),re=$(1534),j=function(M){function P(x,U,Z,ae,ue,pe,ee){return M.call(this,x,U,Z,ae,ue,pe,ee)||this}return F(P,M),P.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},P.prototype.setPriority=function(x){return M.prototype.setPriority.call(this,x)},P}($(1628)(re));we.exports=j},8661:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return F(j,H),j.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}($(1521));we.exports=oe},5606:function(we,Pe,$){"use strict";var U,F=this&&this.__extends||(U=function(Z,ae){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,pe){ue.__proto__=pe}||function(ue,pe){for(var ee in pe)Object.prototype.hasOwnProperty.call(pe,ee)&&(ue[ee]=pe[ee])})(Z,ae)},function(Z,ae){if("function"!=typeof ae&&null!==ae)throw new TypeError("Class extends value "+String(ae)+" is not a constructor or null");function ue(){this.constructor=Z}U(Z,ae),Z.prototype=null===ae?Object.create(ae):(ue.prototype=ae.prototype,new ue)}),re=this&&this.__read||function(U,Z){var ae="function"==typeof Symbol&&U[Symbol.iterator];if(!ae)return U;var pe,Y,ue=ae.call(U),ee=[];try{for(;(void 0===Z||Z-- >0)&&!(pe=ue.next()).done;)ee.push(pe.value)}catch(K){Y={error:K}}finally{try{pe&&!pe.done&&(ae=ue.return)&&ae.call(ue)}finally{if(Y)throw Y.error}}return ee},oe=this&&this.__spreadArray||function(U,Z){for(var ae=0,ue=Z.length,pe=U.length;ae<ue;ae++,pe++)U[pe]=Z[ae];return U},H=$(1703),j=$(8701),M=j.typeErrors,P=j.trackPriority,x=function(U){function Z(ae,ue,pe){var ee=U.call(this,ue.id,"data",pe)||this;return Object.defineProperties(ee,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:ue.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:ue.maxRetransmits},ordered:{enumerable:!0,value:ue.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===ue.maxPacketLifeTime&&null===ue.maxRetransmits},sid:{enumerable:!0,value:ae}}),ue.on("message",function(Y){ee.emit("message",Y,ee)}),ee}return F(Z,U),Z.prototype.setPriority=function(ae){var ue=oe([null],re(Object.values(P)));if(!ue.includes(ae))throw M.INVALID_VALUE("priority",ue);return this._priority=ae,this},Z.prototype._setEnabled=function(){},Z.prototype._setSwitchedOff=function(ae){this._isSwitchedOff!==ae&&(this._isSwitchedOff=ae,this.emit(ae?"switchedOff":"switchedOn",this))},Z}(H);we.exports=x},8459:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return F(j,H),j.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}($(1521));we.exports=oe},1628:function(we,Pe,$){"use strict";var pe,F=this&&this.__extends||(pe=function(ee,Y){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,ce){K.__proto__=ce}||function(K,ce){for(var ye in ce)Object.prototype.hasOwnProperty.call(ce,ye)&&(K[ye]=ce[ye])})(ee,Y)},function(ee,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function K(){this.constructor=ee}pe(ee,Y),ee.prototype=null===Y?Object.create(Y):(K.prototype=Y.prototype,new K)}),re=this&&this.__read||function(pe,ee){var Y="function"==typeof Symbol&&pe[Symbol.iterator];if(!Y)return pe;var ce,ke,K=Y.call(pe),ye=[];try{for(;(void 0===ee||ee-- >0)&&!(ce=K.next()).done;)ye.push(ce.value)}catch(fe){ke={error:fe}}finally{try{ce&&!ce.done&&(Y=K.return)&&Y.call(K)}finally{if(ke)throw ke.error}}return ye},oe=this&&this.__spreadArray||function(pe,ee){for(var Y=0,K=ee.length,ce=pe.length;Y<K;Y++,ce++)pe[ce]=ee[Y];return pe},H=$(8701),j=H.typeErrors,M=H.trackPriority,P=$(7627),x=P.guessBrowser,U=P.isIOSChrome,Z=$(2181);we.exports=function ae(pe){return function(ee){function Y(K,ce,ye,ke,fe,Ae,Ee){var ve=this;return Ee=Object.assign({workaroundWebKitBug212780:("safari"===x()||U())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},Ee),ve=ee.call(this,ce,Ee)||this,Object.defineProperties(ve,{_isEnabled:{value:ye,writable:!0},_isSwitchedOff:{value:ke,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:fe},_setRenderHint:{value:function(le){ve._log.debug("updating render hint:",le),Ae(le)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:K},_workaroundWebKitBug212780:{value:Ee.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),ve}return F(Y,ee),Y.prototype.setPriority=function(K){var ce=oe([null],re(Object.values(M)));if(!ce.includes(K))throw j.INVALID_VALUE("priority",ce);return this._priority!==K&&(this._priority=K,this._setPriority(K)),this},Y.prototype._setEnabled=function(K){this._isEnabled!==K&&(this._isEnabled=K,this.emit(this._isEnabled?"enabled":"disabled",this))},Y.prototype._setSwitchedOff=function(K){this._isSwitchedOff!==K&&(this._isSwitchedOff=K,this.emit(K?"switchedOff":"switchedOn",this))},Y.prototype.attach=function(K){var ce=ee.prototype.attach.call(this,K);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function ue(pe){var ee=pe._log,Y=pe.kind;function K(ce){!ce||pe._attachments.forEach(function(ye){var ke=pe._elShims.get(ye);ye.paused&&ke&&!ke.pausedIntentionally()&&(ee.info("Playing inadvertently paused <"+Y+"> element"),ee.debug("Element:",ye),ee.debug("RemoteMediaTrack:",pe),ye.play().then(function(){ee.info("Successfully played inadvertently paused <"+Y+"> element"),ee.debug("Element:",ye),ee.debug("RemoteMediaTrack:",pe)}).catch(function(Ae){ee.warn("Error while playing inadvertently paused <"+Y+"> element:",{err:Ae,el:ye,remoteMediaTrack:pe})}))})}return Z.onVisibilityChange(2,K),function(){Z.offVisibilityChange(2,K)}}(this)),ce},Y.prototype.detach=function(K){var ce=ee.prototype.detach.call(this,K);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),ce},Y}(pe)}},1521:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M.name,M.sid,P)||this;Object.defineProperties(x,{_signaling:{value:M},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return M.isEnabled}},kind:{enumerable:!0,value:M.kind},publishPriority:{enumerable:!0,get:function(){return M.priority}},track:{enumerable:!0,get:function(){return this._track}}});var U=M.error,Z=M.isEnabled,ae=M.isSwitchedOff,ue=M.priority;return M.on("updated",function(){if(U!==M.error)return U=M.error,void x.emit("subscriptionFailed",M.error);Z!==M.isEnabled&&(Z=M.isEnabled,x.track&&x.track._setEnabled(M.isEnabled),x.emit(M.isEnabled?"trackEnabled":"trackDisabled")),ae!==M.isSwitchedOff&&(x._log.debug(x.trackSid+": "+(ae?"OFF":"ON")+" => "+(M.isSwitchedOff?"OFF":"ON")),ae=M.isSwitchedOff,x.track?(x.track._setSwitchedOff(M.isSwitchedOff),x.emit(ae?"trackSwitchedOff":"trackSwitchedOn",x.track)):ae&&x._log.warn("Track was not subscribed when switched Off.")),ue!==M.priority&&x.emit("publishPriorityChanged",ue=M.priority)}),x}return F(j,H),j.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j.prototype._subscribed=function(M){!this._track&&M&&(this._track=M,this.emit("subscribed",M))},j.prototype._unsubscribe=function(){if(this._track){var M=this._track;this._track=null,this.emit("unsubscribed",M)}},j}($(9222));we.exports=oe},1629:function(we,Pe,$){"use strict";var ee,F=this&&this.__extends||(ee=function(Y,K){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,ye){ce.__proto__=ye}||function(ce,ye){for(var ke in ye)Object.prototype.hasOwnProperty.call(ye,ke)&&(ce[ke]=ye[ke])})(Y,K)},function(Y,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function ce(){this.constructor=Y}ee(Y,K),Y.prototype=null===K?Object.create(K):(ce.prototype=K.prototype,new ce)}),re=this&&this.__read||function(ee,Y){var K="function"==typeof Symbol&&ee[Symbol.iterator];if(!K)return ee;var ye,fe,ce=K.call(ee),ke=[];try{for(;(void 0===Y||Y-- >0)&&!(ye=ce.next()).done;)ke.push(ye.value)}catch(Ae){fe={error:Ae}}finally{try{ye&&!ye.done&&(K=ce.return)&&K.call(ce)}finally{if(fe)throw fe.error}}return ke},oe=$(1628),H=$(4332),j=$(2181),M=$(5318).NullObserver,P=$(6543),Z=function(ee){function Y(K,ce,ye,ke,fe,Ae,Ee){var ve=this;return Ee=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},Ee),Ee=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||"auto"!==Ee.clientTrackSwitchOffControl?M:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||"auto"!==Ee.contentPreferencesMode?M:ResizeObserver},Ee),ve=ee.call(this,K,ce,ye,ke,fe,Ae,Ee)||this,Object.defineProperties(ve,{_enableDocumentVisibilityTurnOff:{value:!0===Ee.enableDocumentVisibilityTurnOff&&"auto"===Ee.clientTrackSwitchOffControl},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:Ee.clientTrackSwitchOffControl},_contentPreferencesMode:{value:Ee.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new P(function(){ve._setRenderHint({enabled:!1})},50,!1)},_resizeObserver:{value:new Ee.ResizeObserver(function(le){le.find(function(Oe){return!ve._invisibleElements.has(Oe.target)})&&pe(ve)})},_intersectionObserver:{value:new Ee.IntersectionObserver(function(le){var he=!1;le.forEach(function(Oe){!ve._invisibleElements.has(Oe.target)!==Oe.isIntersecting&&(Oe.isIntersecting?(ve._log.debug("intersectionObserver detected: Off => On"),ve._invisibleElements.delete(Oe.target)):(ve._log.debug("intersectionObserver detected: On => Off"),ve._invisibleElements.add(Oe.target)),he=!0)}),he&&(ue(ve),pe(ve))},{threshold:.25})}}),ve}return F(Y,ee),Y.prototype._start=function(K){var ce=ee.prototype._start.call(this,K);return ue(this),ce},Y.prototype.switchOn=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},Y.prototype.switchOff=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},Y.prototype.setContentPreferences=function(K){if("manual"!==this._contentPreferencesMode)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return K.renderDimensions&&this._setRenderHint({renderDimensions:K.renderDimensions}),this},Y.prototype._unObservePip=function(K){var ce=this._elToPipCallbacks.get(K);ce&&(K.removeEventListener("enterpictureinpicture",ce.onEnterPip),K.removeEventListener("leavepictureinpicture",ce.onLeavePip),this._elToPipCallbacks.delete(K))},Y.prototype._observePip=function(K){var ce=this;if(!this._elToPipCallbacks.get(K)){var ke=function(Ee){return ce._onEnterPip(Ee,K)},fe=function(Ee){return ce._onLeavePip(Ee,K)};K.addEventListener("enterpictureinpicture",ke),K.addEventListener("leavepictureinpicture",fe),this._elToPipCallbacks.set(K,{onEnterPip:ke,onLeavePip:fe,onResizePip:function(Ee){return ce._onResizePip(Ee,K)}})}},Y.prototype._onEnterPip=function(K,ce){this._log.debug("onEnterPip");var ye=K.pictureInPictureWindow;this._elToPipWindows.set(ce,ye);var ke=this._elToPipCallbacks.get(ce).onResizePip;ye.addEventListener("resize",ke),ue(this)},Y.prototype._onLeavePip=function(K,ce){this._log.debug("onLeavePip"),this._elToPipWindows.delete(ce);var ye=this._elToPipCallbacks.get(ce).onResizePip;K.pictureInPictureWindow.removeEventListener("resize",ye),ue(this)},Y.prototype._onResizePip=function(){pe(this)},Y.prototype.attach=function(K){var ce=ee.prototype.attach.call(this,K);return"auto"===this._clientTrackSwitchOffControl&&this._invisibleElements.add(ce),this._intersectionObserver.observe(ce),this._resizeObserver.observe(ce),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||function ae(ee){function Y(){ue(ee)}return j.onVisibilityChange(1,Y),function(){j.offVisibilityChange(1,Y)}}(this)),this._observePip(ce),ce},Y.prototype.detach=function(K){var ce=this,ye=ee.prototype.detach.call(this,K);return(Array.isArray(ye)?ye:[ye]).forEach(function(fe){ce._intersectionObserver.unobserve(fe),ce._resizeObserver.unobserve(fe),ce._invisibleElements.delete(fe),ce._unObservePip(fe)}),0===this._attachments.size&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),ue(this),pe(this),ye},Y.prototype.addProcessor=function(){return ee.prototype.addProcessor.apply(this,arguments)},Y.prototype.removeProcessor=function(){return ee.prototype.removeProcessor.apply(this,arguments)},Y.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},Y.prototype.setPriority=function(K){return ee.prototype.setPriority.call(this,K)},Y}(oe(H));function ue(ee){if("auto"===ee._clientTrackSwitchOffControl){var Y=ee._getAllAttachedElements().filter(function(ye){return!ee._invisibleElements.has(ye)});!0==(ee._getAllAttachedElements().filter(function(ye){return ee._elToPipWindows.has(ye)}).length>0||"visible"===document.visibilityState&&Y.length>0)?(ee._turnOffTimer.clear(),ee._setRenderHint({enabled:!0})):ee._turnOffTimer.isSet||ee._turnOffTimer.start()}}function pe(ee){if("auto"===ee._contentPreferencesMode){var Y=ee._getAllAttachedElements().filter(function(ve){return!ee._invisibleElements.has(ve)}),K=ee._getAllAttachedElements().map(function(ve){var le=ee._elToPipWindows.get(ve);return le?{clientHeight:le.height,clientWidth:le.width}:{clientHeight:0,clientWidth:0}}),ce=Y.concat(K);if(ce.length>0){var ke=re(ce.sort(function(ve,le){return le.clientHeight+le.clientWidth-ve.clientHeight-ve.clientWidth-1}),1)[0];ee._setRenderHint({renderDimensions:{height:ke.clientHeight,width:ke.clientWidth}})}}}we.exports=Z},1768:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return F(j,H),j.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}($(1521));we.exports=oe},808:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=this&&this.__read||function(j,M){var P="function"==typeof Symbol&&j[Symbol.iterator];if(!P)return j;var U,ae,x=P.call(j),Z=[];try{for(;(void 0===M||M-- >0)&&!(U=x.next()).done;)Z.push(U.value)}catch(ue){ae={error:ue}}finally{try{U&&!U.done&&(P=x.return)&&P.call(x)}finally{if(ae)throw ae.error}}return Z},H=function(j){function M(P){var x=j.call(this,P.id,P)||this;return Object.defineProperties(x,{_clones:{value:new Set},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{get:function(){return!!this._clones.size}}}),x}return F(M,j),M.prototype.clone=function(){var P=new M(this.track.clone());return this._clones.add(P),P},M.prototype.removeClone=function(P){this._clones.delete(P)},M.prototype.setMediaStreamTrack=function(P){var x=this,U=Array.from(this._clones),Z=Array.from(this._senders);return Promise.all(U.map(function(ae){return ae.setMediaStreamTrack(P.clone())}).concat(Z.map(function(ae){return x._replaceTrack(ae,P)}))).finally(function(){x._track=P})},M.prototype.addSender=function(P,x){return this._senders.add(P),x&&this._senderToPublisherHintCallbacks.set(P,x),this},M.prototype.removeSender=function(P){return this._senders.delete(P),this._senderToPublisherHintCallbacks.delete(P),this},M.prototype.setPublisherHint=function(P){var U=re(Array.from(this._senderToPublisherHintCallbacks.values()),1)[0];return U?U(P):Promise.resolve("COULD_NOT_APPLY_HINT")},M.prototype._replaceTrack=function(P,x){var U=this;return P.replaceTrack(x).then(function(Z){return U.setPublisherHint(null).catch(function(){}),U.emit("replaced"),Z})},M}($(1639));we.exports=H},9222:function(we,Pe,$){"use strict";var Z,F=this&&this.__extends||(Z=function(ae,ue){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pe,ee){pe.__proto__=ee}||function(pe,ee){for(var Y in ee)Object.prototype.hasOwnProperty.call(ee,Y)&&(pe[Y]=ee[Y])})(ae,ue)},function(ae,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function pe(){this.constructor=ae}Z(ae,ue),ae.prototype=null===ue?Object.create(ue):(pe.prototype=ue.prototype,new pe)}),re=$(133),oe=$(9739),H=oe.buildLogLevels,j=oe.valueToJSON,M=$(8701).DEFAULT_LOG_LEVEL,P=$(1458),x=0,U=function(Z){function ae(ue,pe,ee){var Y=Z.call(this)||this;ee=Object.assign({logLevel:M},ee);var K=H(ee.logLevel);return Object.defineProperties(Y,{_instanceId:{value:x++},_log:{value:ee.log?ee.log.createLog("default",Y):new P("default",Y,K,ee.loggerName)},trackName:{enumerable:!0,value:ue},trackSid:{enumerable:!0,value:pe}}),Y}return F(ae,Z),ae.prototype.toJSON=function(){return j(this)},ae.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},ae}(re);we.exports=U},1639:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,P.kind)||this;return Object.defineProperties(x,{_track:{value:P,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),x}return F(j,H),j.prototype.stop=function(){this.track.stop(),H.prototype.stop.call(this)},j}($(4605));we.exports=oe},9062:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(9069).EventEmitter,oe=$(8701).DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,H=function(j){function M(P){var x=j.call(this)||this;return Object.defineProperties(x,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:P},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),x.on("add",function(U){x._lastStatsSaveTime=Date.now(),x._lastStatsPublishTime=Date.now(),x._processorInfo=U,x._stats=[],x._reemitEvent("add",x._getEventData())}),x.on("remove",function(){var U=x._getEventData();x._lastStatsSaveTime=null,x._lastStatsPublishTime=null,x._processorInfo=null,x._stats=null,x._reemitEvent("remove",U)}),x.on("start",function(){x._reemitEvent("start",x._getEventData())}),x.on("stop",function(U){x._reemitEvent("stop",Object.assign({message:U},x._getEventData()))}),x.on("stats",function(){return x._maybeEmitStats()}),x}return F(M,j),M.prototype._getEventData=function(){if(!this._processorInfo)return{};var P=this._processorInfo,x=P.processor,pe={captureHeight:P.captureHeight,captureWidth:P.captureWidth,inputFrameRate:P.inputFrameRate,isRemoteVideoTrack:P.isRemoteVideoTrack};return pe.name=x._name||"VideoProcessor",["assetsPath","blurFilterRadius","fitType","isSimdEnabled","maskBlurRadius","version"].forEach(function(ee){var Y=x["_"+ee];typeof Y<"u"&&(pe[ee]=Y)}),Object.keys(pe).forEach(function(ee){var Y=pe[ee];"boolean"==typeof Y&&(pe[ee]=Y?"true":"false")}),pe},M.prototype._maybeEmitStats=function(){if(this._stats&&this._processorInfo){var P=this._processorInfo.processor._benchmark;if(P){var x=Date.now();if(!(x-this._lastStatsSaveTime<1e3)){var U={outputFrameRate:P.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(ue){U[ue]=P.getAverageDelay(ue)}),this._lastStatsSaveTime=x,this._stats.push(U),!(x-this._lastStatsPublishTime<oe)){this._lastStatsPublishTime=x;var ae=this._stats.splice(0).reduce(function(ue,pe,ee){return Object.keys(U).forEach(function(Y){ue[Y]||(ue[Y]=0),ue[Y]=(ue[Y]*ee+pe[Y])/(ee+1)}),ue},{});Object.keys(ae).forEach(function(ue){ae[ue]=parseFloat(ae[ue].toFixed(2))}),this._reemitEvent("stats",Object.assign({},ae,this._getEventData()))}}}}},M.prototype._reemitEvent=function(P,x){this._log.debug("VideoProcessor:"+P,x),this.emit("event",{name:P,data:x})},M}(re);we.exports=H},4332:function(we,Pe,$){"use strict";var P,F=this&&this.__extends||(P=function(x,U){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ae){Z.__proto__=ae}||function(Z,ae){for(var ue in ae)Object.prototype.hasOwnProperty.call(ae,ue)&&(Z[ue]=ae[ue])})(x,U)},function(x,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function Z(){this.constructor=x}P(x,U),x.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)}),re=$(5366),oe=$(9062),H=$(8701).DEFAULT_FRAME_RATE,j=function(P){function x(U,Z){var ae=P.call(this,U,Z)||this;return Object.defineProperties(ae,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),ae._processorEventObserver=new(Z.VideoProcessorEventObserver||oe)(ae._log),ae}return F(x,P),x.prototype._checkIfCanCaptureFrames=function(U){void 0===U&&(U=!1);var Z=!0,ae="",ue=this.mediaStreamTrack;return ue.enabled||(Z=!1,ae="MediaStreamTrack is disabled"),"ended"===ue.readyState&&(Z=!1,ae="MediaStreamTrack is ended"),this.processor||(Z=!1,ae="VideoProcessor not detected."),!this._attachments.size&&!U&&(Z=!1,ae="VideoTrack is not publishing and there is no attached element."),ae&&this._log.debug(ae),{canCaptureFrames:Z,message:ae}},x.prototype._captureFrames=function(){var U=this;if(this._isCapturing)this._log.debug("Ignoring captureFrames call. Capture is already in progress");else{if(!this._checkIfCanCaptureFrames().canCaptureFrames)return this._isCapturing=!1,void this._log.debug("Cannot capture frames. Ignoring captureFrames call.");this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var ae,Z=Date.now();this._dummyEl.play().then(function(){var ue=function(ee){clearTimeout(U._captureTimeoutId);var Y=U.mediaStreamTrack.getSettings().frameRate,ye=Math.floor(1e3/(void 0===Y?H:Y))-ae;(ye<0||"number"!=typeof ae)&&(ye=0),U._captureTimeoutId=setTimeout(ee,ye)},pe=function(){var ee=U._checkIfCanCaptureFrames();if(!ee.canCaptureFrames)return U._isCapturing=!1,U._processorEventObserver.emit("stop",ee.message),void U._log.debug("Cannot capture frames. Stopping capturing frames.");Z=Date.now();var Y=U.mediaStreamTrack.getSettings(),K=Y.width,ce=void 0===K?0:K,ye=Y.height,ke=void 0===ye?0:ye;U._inputFrame.width!==ce&&(U._inputFrame.width=ce,U._inputFrame.height=ke,U._outputFrame&&(U._outputFrame.width=ce,U._outputFrame.height=ke)),U._inputFrame.getContext("2d").drawImage(U._dummyEl,0,0,ce,ke);var fe=null;try{fe=U.processor.processFrame(U._inputFrame,U._outputFrame)}catch(Ae){U._log.debug("Exception detected after calling processFrame.",Ae)}(fe instanceof Promise?fe:Promise.resolve(fe)).then(function(){U._outputFrame&&(U.processedTrack.requestFrame(),U._processorEventObserver.emit("stats"))}).finally(function(){ae=Date.now()-Z,ue(pe)})};ue(pe)}).catch(function(ue){return U._log.error("Video element cannot be played",{error:ue,track:U})})}},x.prototype._initialize=function(){var U=this;P.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){M(U,U._dummyEl)&&(U.dimensions.width=U._dummyEl.videoWidth,U.dimensions.height=U._dummyEl.videoHeight)},this._dummyEl.onresize=function(){M(U,U._dummyEl)&&(U.dimensions.width=U._dummyEl.videoWidth,U.dimensions.height=U._dummyEl.videoHeight,U.isStarted&&(U._log.debug("Dimensions changed:",U.dimensions),U.emit(x.DIMENSIONS_CHANGED,U)))})},x.prototype._restartProcessor=function(){var U=this.processor;U&&(this.removeProcessor(U),this.addProcessor(U))},x.prototype._start=function(U){return this.dimensions.width=U.videoWidth,this.dimensions.height=U.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(x.DIMENSIONS_CHANGED,this),P.prototype._start.call(this,U)},x.prototype.addProcessor=function(U){var Z=this;if("function"!=typeof OffscreenCanvas)return this._log.warn("Adding a VideoProcessor is not supported in this browser.");if(!U||"function"!=typeof U.processFrame)throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",U),this._unmuteHandler||(this._unmuteHandler=function(){Z._log.debug("mediaStreamTrack unmuted"),Z.processedTrack.muted&&(Z._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),Z._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler));var ae=this.mediaStreamTrack.getSettings(),ue=ae.width,pe=void 0===ue?0:ue,ee=ae.height,Y=void 0===ee?0:ee,K=ae.frameRate,ce=void 0===K?H:K;return this._inputFrame=new OffscreenCanvas(pe,Y),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=pe,this._outputFrame.height=Y,this.processedTrack=this._outputFrame.captureStream(0).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=U,this._processorEventObserver.emit("add",{processor:U,captureHeight:Y,captureWidth:pe,inputFrameRate:ce,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack")}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},x.prototype.attach=function(){var U=P.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),U},x.prototype.detach=function(){return P.prototype.detach.apply(this,arguments)},x.prototype.removeProcessor=function(U){if(!U)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(U!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",U),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame.getContext("2d").clearRect(0,0,this._inputFrame.width,this._inputFrame.height),this._outputFrame.getContext("2d").clearRect(0,0,this._outputFrame.width,this._outputFrame.height),this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},x}(re);function M(P,x){return P.dimensions.width!==x.videoWidth||P.dimensions.height!==x.videoHeight}j.DIMENSIONS_CHANGED="dimensionsChanged",we.exports=j},4621:function(we,Pe,$){"use strict";var Z,F=this&&this.__extends||(Z=function(ae,ue){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pe,ee){pe.__proto__=ee}||function(pe,ee){for(var Y in ee)Object.prototype.hasOwnProperty.call(ee,Y)&&(pe[Y]=ee[Y])})(ae,ue)},function(ae,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function pe(){this.constructor=ae}Z(ae,ue),ae.prototype=null===ue?Object.create(ue):(pe.prototype=ue.prototype,new pe)}),re=this&&this.__read||function(Z,ae){var ue="function"==typeof Symbol&&Z[Symbol.iterator];if(!ue)return Z;var ee,K,pe=ue.call(Z),Y=[];try{for(;(void 0===ae||ae-- >0)&&!(ee=pe.next()).done;)Y.push(ee.value)}catch(ce){K={error:ce}}finally{try{ee&&!ee.done&&(ue=pe.return)&&ue.call(pe)}finally{if(K)throw K.error}}return Y},oe=$(9069).EventEmitter,H=$(8701),j=H.DEFAULT_NQ_LEVEL_LOCAL,M=H.DEFAULT_NQ_LEVEL_REMOTE,P=H.MAX_NQ_LEVEL,x=$(9739).inRange,U=function(Z){function ae(ue){var pe=Z.call(this)||this;return ue=Object.assign({local:j,remote:M},ue),Object.defineProperties(pe,{local:{value:x(ue.local,j,P)?ue.local:j,writable:!0},remote:{value:x(ue.remote,M,P)?ue.remote:M,writable:!0}}),pe}return F(ae,Z),ae.prototype.update=function(ue){var pe=this;ue=Object.assign({local:this.local,remote:this.remote},ue),[["local",j,3],["remote",M,3]].forEach(function(ee){var Y=re(ee,3),K=Y[0],ce=Y[1];pe[K]="number"==typeof ue[K]&&x(ue[K],ce,Y[2])?ue[K]:ce})},ae}(oe);we.exports=U},9218:function(we,Pe,$){"use strict";var ye,F=this&&this.__extends||(ye=function(ke,fe){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ae,Ee){Ae.__proto__=Ee}||function(Ae,Ee){for(var ve in Ee)Object.prototype.hasOwnProperty.call(Ee,ve)&&(Ae[ve]=Ee[ve])})(ke,fe)},function(ke,fe){if("function"!=typeof fe&&null!==fe)throw new TypeError("Class extends value "+String(fe)+" is not a constructor or null");function Ae(){this.constructor=ke}ye(ke,fe),ke.prototype=null===fe?Object.create(fe):(Ae.prototype=fe.prototype,new Ae)}),re=this&&this.__read||function(ye,ke){var fe="function"==typeof Symbol&&ye[Symbol.iterator];if(!fe)return ye;var Ee,le,Ae=fe.call(ye),ve=[];try{for(;(void 0===ke||ke-- >0)&&!(Ee=Ae.next()).done;)ve.push(Ee.value)}catch(he){le={error:he}}finally{try{Ee&&!Ee.done&&(fe=Ae.return)&&fe.call(Ae)}finally{if(le)throw le.error}}return ve},oe=this&&this.__spreadArray||function(ye,ke){for(var fe=0,Ae=ke.length,Ee=ye.length;fe<Ae;fe++,Ee++)ye[Ee]=ke[fe];return ye},H=$(133),j=$(8797),M=$(8661),P=$(5606),x=$(8459),U=$(1629),Z=$(1768),ae=$(9739),ue=0,pe=function(ye){function ke(fe,Ae){var Ee=ye.call(this)||this,ve=function ee(ye){var ke=ye.map(function(ve){return[ve.id,ve]}),fe=ke.filter(function(ve){return"audio"===ve[1].kind}),Ae=ke.filter(function(ve){return"video"===ve[1].kind}),Ee=ke.filter(function(ve){return"data"===ve[1].kind});return{audioTracks:fe,dataTracks:Ee,tracks:ke,videoTracks:Ae}}((Ae=Object.assign({RemoteAudioTrack:j,RemoteAudioTrackPublication:M,RemoteDataTrack:P,RemoteDataTrackPublication:x,RemoteVideoTrack:U,RemoteVideoTrackPublication:Z,tracks:[]},Ae)).tracks),le=Ae.log.createLog("default",Ee),he=new Map(ve.audioTracks),Oe=new Map(ve.dataTracks),je=new Map(ve.tracks),Fe=new Map(ve.videoTracks);return Object.defineProperties(Ee,{_RemoteAudioTrack:{value:Ae.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:Ae.RemoteAudioTrackPublication},_RemoteDataTrack:{value:Ae.RemoteDataTrack},_RemoteDataTrackPublication:{value:Ae.RemoteDataTrackPublication},_RemoteVideoTrack:{value:Ae.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:Ae.RemoteVideoTrackPublication},_audioTracks:{value:he},_dataTracks:{value:Oe},_instanceId:{value:++ue},_clientTrackSwitchOffControl:{value:Ae.clientTrackSwitchOffControl},_contentPreferencesMode:{value:Ae.contentPreferencesMode},_log:{value:le},_signaling:{value:fe},_tracks:{value:je},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:Fe},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return fe.identity}},networkQualityLevel:{enumerable:!0,get:function(){return fe.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return fe.networkQualityStats}},sid:{enumerable:!0,get:function(){return fe.sid}},state:{enumerable:!0,get:function(){return fe.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),Ee._tracks.forEach(K.bind(null,Ee)),fe.on("networkQualityLevelChanged",function(){return Ee.emit("networkQualityLevelChanged",Ee.networkQualityLevel,Ee.networkQualityStats&&(Ee.networkQualityStats.audio||Ee.networkQualityStats.video)?Ee.networkQualityStats:null)}),function Y(ye,ke){var fe=ye._log;"disconnected"!==ye.state&&ke.on("stateChanged",function Ae(Ee){fe.debug("Transitioned to state:",Ee),ye.emit(Ee,ye),"disconnected"===Ee&&(fe.debug("Removing Track event reemitters"),ke.removeListener("stateChanged",Ae),ye._tracks.forEach(function(ve){var le=ye._trackEventReemitters.get(ve.id);ve&&le&&le.forEach(function(he,Oe){ve.removeListener(Oe,he)})}),ke.tracks.forEach(function(ve){var le=ye._tracks.get(ve.id),he=ye._trackEventReemitters.get(ve.id);le&&he&&he.forEach(function(Oe,je){le.removeListener(je,Oe)})}),ye._trackEventReemitters.clear(),ye.tracks.forEach(function(ve){ye._trackPublicationEventReemitters.get(ve.trackSid).forEach(function(le,he){ve.removeListener(he,le)})}),ye._trackPublicationEventReemitters.clear())})}(Ee,fe),le.info("Created a new Participant"+(Ee.identity?": "+Ee.identity:"")),Ee}return F(ke,ye),ke.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},ke.prototype._getTrackPublicationEvents=function(){return[]},ke.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},ke.prototype._addTrack=function(fe,Ae){var Ee=this._log;return this._tracks.has(Ae)?null:(this._tracks.set(Ae,fe),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[fe.kind].set(Ae,fe),K(this,fe,Ae),Ee.info("Added a new "+ae.trackClass(fe)+":",Ae),Ee.debug(ae.trackClass(fe)+":",fe),fe)},ke.prototype._addTrackPublication=function(fe){var Ae=this._log;return this.tracks.has(fe.trackSid)?null:(this.tracks.set(fe.trackSid,fe),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[fe.kind].set(fe.trackSid,fe),function ce(ye,ke){var fe=new Map;"disconnected"!==ye.state&&(ye._getTrackPublicationEvents().forEach(function(Ae){var Ee=re(Ae,2),ve=Ee[0],le=Ee[1];fe.set(ve,function(){for(var he=[],Oe=0;Oe<arguments.length;Oe++)he[Oe]=arguments[Oe];ye.emit.apply(ye,oe(oe([le],re(he)),[ke]))}),ke.on(ve,fe.get(ve))}),ye._trackPublicationEventReemitters.set(ke.trackSid,fe))}(this,fe),Ae.info("Added a new "+ae.trackPublicationClass(fe)+":",fe.trackSid),Ae.debug(ae.trackPublicationClass(fe)+":",fe),fe)},ke.prototype._handleTrackSignalingEvents=function(){var Ae=this._log,Ee=this._clientTrackSwitchOffControl,ve=this._contentPreferencesMode,le=this;if("disconnected"!==this.state){var he=this._RemoteAudioTrack,Oe=this._RemoteAudioTrackPublication,je=this._RemoteVideoTrack,Fe=this._RemoteVideoTrackPublication,He=this._RemoteDataTrack,rt=this._RemoteDataTrackPublication,nt=this._signaling;nt.on("trackAdded",Ke),nt.on("trackRemoved",Nt),nt.tracks.forEach(Ke),nt.on("stateChanged",function Je(Ve){"disconnected"===Ve?(Ae.debug("Removing event listeners"),nt.removeListener("stateChanged",Je),nt.removeListener("trackAdded",Ke),nt.removeListener("trackRemoved",Nt)):"connected"===Ve&&(Ae.info("reconnected"),setTimeout(function(){return le.emit("reconnected")},0))})}function Ke(Je){var $e=new(0,{audio:Oe,data:rt,video:Fe}[Je.kind])(Je,{log:Ae});le._addTrackPublication($e);var De=Je.isSubscribed;De&&Ht(Je),le._trackSignalingUpdatedEventCallbacks.set(Je.sid,function(){if(De!==Je.isSubscribed){if(De=Je.isSubscribed)return void Ht(Je);!function Et(Je){var Ve=re(Array.from(le._tracks.entries()).find(function(Pt){return re(Pt,2)[1].sid===Je.sid}),2),$e=Ve[0],De=Ve[1],ot=le.tracks.get(Je.sid);De&&le._removeTrack(De,ot,$e)}(Je)}}),Je.on("updated",le._trackSignalingUpdatedEventCallbacks.get(Je.sid))}function Nt(Je){Je.isSubscribed&&Je.setTrackTransceiver(null);var Ve=le._trackSignalingUpdatedEventCallbacks.get(Je.sid);Ve&&(Je.removeListener("updated",Ve),le._trackSignalingUpdatedEventCallbacks.delete(Je.sid));var $e=le.tracks.get(Je.sid);$e&&le._removeTrackPublication($e)}function Ht(Je){var Ve=Je.isEnabled,$e=Je.name,De=Je.kind,ot=Je.sid,Pt=Je.trackTransceiver,qt=Je.isSwitchedOff,Ot={audio:he,video:je,data:He}[De],Jt=le.tracks.get(ot);if(Ot&&De===Pt.kind){var Zn={log:Ae,name:$e,clientTrackSwitchOffControl:Ee,contentPreferencesMode:ve},vr="data"===De?new Ot(ot,Pt,Zn):new Ot(ot,Pt,Ve,qt,function(ir){return nt.updateSubscriberTrackPriority(ot,ir)},function(ir){Je.isSubscribed&&nt.updateTrackRenderHint(ot,ir)},Zn);le._addTrack(vr,Jt,Pt.id)}}},ke.prototype._removeTrack=function(fe,Ae){if(!this._tracks.has(Ae))return null;this._tracks.delete(Ae),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[fe.kind].delete(Ae),(this._trackEventReemitters.get(Ae)||new Map).forEach(function(he,Oe){fe.removeListener(Oe,he)});var le=this._log;return le.info("Removed a "+ae.trackClass(fe)+":",Ae),le.debug(ae.trackClass(fe)+":",fe),fe},ke.prototype._removeTrackPublication=function(fe){if(!(fe=this.tracks.get(fe.trackSid)))return null;this.tracks.delete(fe.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[fe.kind].delete(fe.trackSid),(this._trackPublicationEventReemitters.get(fe.trackSid)||new Map).forEach(function(le,he){fe.removeListener(he,le)});var ve=this._log;return ve.info("Removed a "+ae.trackPublicationClass(fe)+":",fe.trackSid),ve.debug(ae.trackPublicationClass(fe)+":",fe),fe},ke.prototype.toJSON=function(){return ae.valueToJSON(this)},ke}(H);function K(ye,ke,fe){var Ae=new Map;"disconnected"!==ye.state&&(ye._getTrackEvents().forEach(function(Ee){var ve=Ee[0],le=Ee[1];Ae.set(ve,function(){var he=[le].concat([].slice.call(arguments));return ye.emit.apply(ye,oe([],re(he)))}),ke.on(ve,Ae.get(ve))}),ye._trackEventReemitters.set(fe,Ae))}we.exports=pe},9305:function(we,Pe){"use strict";var $=this&&this.__awaiter||function(P,x,U,Z){return new(U||(U=Promise))(function(ue,pe){function ee(ce){try{K(Z.next(ce))}catch(ye){pe(ye)}}function Y(ce){try{K(Z.throw(ce))}catch(ye){pe(ye)}}function K(ce){ce.done?ue(ce.value):function ae(ue){return ue instanceof U?ue:new U(function(pe){pe(ue)})}(ce.value).then(ee,Y)}K((Z=Z.apply(P,x||[])).next())})},F=this&&this.__generator||function(P,x){var Z,ae,ue,pe,U={label:0,sent:function(){if(1&ue[0])throw ue[1];return ue[1]},trys:[],ops:[]};return pe={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(pe[Symbol.iterator]=function(){return this}),pe;function ee(K){return function(ce){return function Y(K){if(Z)throw new TypeError("Generator is already executing.");for(;U;)try{if(Z=1,ae&&(ue=2&K[0]?ae.return:K[0]?ae.throw||((ue=ae.return)&&ue.call(ae),0):ae.next)&&!(ue=ue.call(ae,K[1])).done)return ue;switch(ae=0,ue&&(K=[2&K[0],ue.value]),K[0]){case 0:case 1:ue=K;break;case 4:return U.label++,{value:K[1],done:!1};case 5:U.label++,ae=K[1],K=[0];continue;case 7:K=U.ops.pop(),U.trys.pop();continue;default:if(!(ue=(ue=U.trys).length>0&&ue[ue.length-1])&&(6===K[0]||2===K[0])){U=0;continue}if(3===K[0]&&(!ue||K[1]>ue[0]&&K[1]<ue[3])){U.label=K[1];break}if(6===K[0]&&U.label<ue[1]){U.label=ue[1],ue=K;break}if(ue&&U.label<ue[2]){U.label=ue[2],U.ops.push(K);break}ue[2]&&U.ops.pop(),U.trys.pop();continue}K=x.call(P,U)}catch(ce){K=[6,ce],ae=0}finally{Z=ue=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([K,ce])}}},re=this&&this.__read||function(P,x){var U="function"==typeof Symbol&&P[Symbol.iterator];if(!U)return P;var ae,pe,Z=U.call(P),ue=[];try{for(;(void 0===x||x-- >0)&&!(ae=Z.next()).done;)ue.push(ae.value)}catch(ee){pe={error:ee}}finally{try{ae&&!ae.done&&(U=Z.return)&&U.call(Z)}finally{if(pe)throw pe.error}}return ue};function oe(P,x,U,Z){var ae=[];return P.forEach(function(ue){(0===Z.length||Z.includes(ue.type))&&(0===U.length||U.includes(ue.kind))&&"number"==typeof ue[x]&&ae.push(ue[x])}),ae}function j(P){return[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}].reduce(function(U,Z){var ae=[Z.key];Z.altKeys&&(ae=ae.concat(Z.altKeys));var ue=ae.find(function(pe){return pe in P});return ue&&typeof P[ue]===Z.type&&(U[Z.key]=P[ue]),U},{})}Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.getCombinedConnectionStats=void 0,Pe.getCombinedConnectionStats=function H(P){var x=P.publisher,U=P.subscriber;return $(this,void 0,void 0,function(){var Z,ae,ue,pe,ee,Y,K,ce,ye,ke,fe,Ae,Ee,ve,le;return F(this,function(he){switch(he.label){case 0:return[4,Promise.all([x,U].map(function(Oe){return Oe.getStats()}))];case 1:return Z=re.apply(void 0,[he.sent(),2]),ae=Z[0],pe=oe(ue=Z[1],"timestamp",["audio"],["inbound-rtp"]),ee=pe.length>0?pe[0]:0,Y=oe(ue,"jitter",["audio"],["inbound-rtp"]).reduce(function(Oe,je){return Math.max(Oe,je)},0),K=oe(ue,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(Oe,je){return Oe+je},0),ce=oe(ue,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(Oe,je){return Oe+je},0),ye=oe(ae,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(Oe,je){return Math.max(Oe,je)},0),ke=oe(ue,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(Oe,je){return Math.max(Oe,je)},0),fe=1e3*(ke||ye),Ae=oe(ae,"bytesSent",[],["candidate-pair"]).reduce(function(Oe,je){return Oe+je},0),Ee=oe(ue,"bytesReceived",[],["candidate-pair"]).reduce(function(Oe,je){return Oe+je},0),ve=function M(P){var x=null,U=[];P.forEach(function(ee){"transport"===ee.type&&ee.selectedCandidatePairId?x=ee.selectedCandidatePairId:"candidate-pair"===ee.type&&U.push(ee)});var Z=U.find(function(ee){return ee.selected||x&&ee.id===x});if(!Z)return null;var ae=Z,ue=P.get(ae.localCandidateId),pe=P.get(ae.remoteCandidateId);return ue&&pe?{localCandidate:j(ue),remoteCandidate:j(pe)}:null}(ue),le=[],ue.forEach(function(Oe){("local-candidate"===Oe.type||"remote-candidate"===Oe.type)&&le.push(j(Oe))}),[2,{timestamp:ee,jitter:Y,packets:K,packetsLost:ce,roundTripTime:fe,bytesSent:Ae,bytesReceived:Ee,selectedIceCandidatePairStats:ve,iceCandidateStats:le}]}})})}},2449:(we,Pe,$)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.getTurnCredentials=void 0;var F=$(5330),re=$(8701).ICE_VERSION,oe=$(8380),H=oe.createTwilioError,j=oe.SignalingConnectionError,M=$(9069);Pe.getTurnCredentials=function P(x,U){return new Promise(function(Z,ae){var ue=new M.EventEmitter,ee=new F(U,{networkMonitor:null,eventObserver:ue,helloBody:{edge:"roaming",preflight:!0,token:x,type:"ice",version:re}}),Y=!1;ee.once("close",function(){Y||(Y=!0,ae(new j))}),ee.on("message",function(K){var ce=K.code,ye=K.message,fe=K.type;("iced"===fe||"error"===fe)&&!Y&&(Y=!0,"iced"===fe?Z(K.ice_servers):ae(H(ce,ye)),ee.close())})})}},5359:function(we,Pe){"use strict";var $=this&&this.__read||function(oe,H){var j="function"==typeof Symbol&&oe[Symbol.iterator];if(!j)return oe;var P,U,M=j.call(oe),x=[];try{for(;(void 0===H||H-- >0)&&!(P=M.next()).done;)x.push(P.value)}catch(Z){U={error:Z}}finally{try{P&&!P.done&&(j=M.return)&&j.call(M)}finally{if(U)throw U.error}}return x},F=this&&this.__spreadArray||function(oe,H){for(var j=0,M=H.length,P=oe.length;j<M;j++,P++)oe[P]=H[j];return oe};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.makeStat=void 0,Pe.makeStat=function re(oe){return oe&&oe.length?{min:Math.min.apply(Math,F([],$(oe))),max:Math.max.apply(Math,F([],$(oe))),average:oe.reduce(function(P,x){return P+x},0)/oe.length}:null}},2436:(we,Pe)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.mosToScore=Pe.calculateMOS=void 0;var $=94.768;Pe.calculateMOS=function F(oe,H,j){var M=oe+2*H+10,P=0;switch(!0){case M<160:P=$-M/40;break;case M<1e3:P=$-(M-120)/10}return 1+.035*(P=1==j<=P/2.5?Math.max(P-2.5*j,6.52):0)+7e-6*P*(P-60)*(100-P)},Pe.mosToScore=function re(oe){return oe?oe>4.2?5:oe>4?4:oe>3.6?3:oe>3?2:1:0}},8682:function(we,Pe,$){"use strict";var Ht,F=this&&this.__extends||(Ht=function(Et,Je){return(Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ve,$e){Ve.__proto__=$e}||function(Ve,$e){for(var De in $e)Object.prototype.hasOwnProperty.call($e,De)&&(Ve[De]=$e[De])})(Et,Je)},function(Et,Je){if("function"!=typeof Je&&null!==Je)throw new TypeError("Class extends value "+String(Je)+" is not a constructor or null");function Ve(){this.constructor=Et}Ht(Et,Je),Et.prototype=null===Je?Object.create(Je):(Ve.prototype=Je.prototype,new Ve)}),re=this&&this.__assign||function(){return re=Object.assign||function(Ht){for(var Et,Je=1,Ve=arguments.length;Je<Ve;Je++)for(var $e in Et=arguments[Je])Object.prototype.hasOwnProperty.call(Et,$e)&&(Ht[$e]=Et[$e]);return Ht},re.apply(this,arguments)},oe=this&&this.__awaiter||function(Ht,Et,Je,Ve){return new(Je||(Je=Promise))(function(De,ot){function Pt(Jt){try{Ot(Ve.next(Jt))}catch(Zn){ot(Zn)}}function qt(Jt){try{Ot(Ve.throw(Jt))}catch(Zn){ot(Zn)}}function Ot(Jt){Jt.done?De(Jt.value):function $e(De){return De instanceof Je?De:new Je(function(ot){ot(De)})}(Jt.value).then(Pt,qt)}Ot((Ve=Ve.apply(Ht,Et||[])).next())})},H=this&&this.__generator||function(Ht,Et){var Ve,$e,De,ot,Je={label:0,sent:function(){if(1&De[0])throw De[1];return De[1]},trys:[],ops:[]};return ot={next:Pt(0),throw:Pt(1),return:Pt(2)},"function"==typeof Symbol&&(ot[Symbol.iterator]=function(){return this}),ot;function Pt(Ot){return function(Jt){return function qt(Ot){if(Ve)throw new TypeError("Generator is already executing.");for(;Je;)try{if(Ve=1,$e&&(De=2&Ot[0]?$e.return:Ot[0]?$e.throw||((De=$e.return)&&De.call($e),0):$e.next)&&!(De=De.call($e,Ot[1])).done)return De;switch($e=0,De&&(Ot=[2&Ot[0],De.value]),Ot[0]){case 0:case 1:De=Ot;break;case 4:return Je.label++,{value:Ot[1],done:!1};case 5:Je.label++,$e=Ot[1],Ot=[0];continue;case 7:Ot=Je.ops.pop(),Je.trys.pop();continue;default:if(!(De=(De=Je.trys).length>0&&De[De.length-1])&&(6===Ot[0]||2===Ot[0])){Je=0;continue}if(3===Ot[0]&&(!De||Ot[1]>De[0]&&Ot[1]<De[3])){Je.label=Ot[1];break}if(6===Ot[0]&&Je.label<De[1]){Je.label=De[1],De=Ot;break}if(De&&Je.label<De[2]){Je.label=De[2],Je.ops.push(Ot);break}De[2]&&Je.ops.pop(),Je.trys.pop();continue}Ot=Et.call(Ht,Je)}catch(Jt){Ot=[6,Jt],$e=0}finally{Ve=De=0}if(5&Ot[0])throw Ot[1];return{value:Ot[0]?Ot[1]:void 0,done:!0}}([Ot,Jt])}}};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.runPreflight=Pe.PreflightTest=void 0;var j=$(8701),M=$(1567),P=$(2436),x=$(9305),U=$(2449),Z=$(5359),ae=$(5237),ue=$(3519),pe=$(9739),ee=$(8701).WS_SERVER,Y=$(1458),K=$(133),ce=$(8218),ye=$(8606),ke=$(3744),fe=$(8066),Ae=fe.createSID,Ee=fe.sessionSID,ve=$(8380),le=ve.SignalingConnectionTimeoutError,he=ve.MediaConnectionError;function He(Ht){return null!==Ht&&typeof Ht<"u"}var rt=0,nt=function(Ht){function Et(Je,Ve){var $e=Ht.call(this)||this;$e._testTiming=new M.Timer,$e._dtlsTiming=new M.Timer,$e._iceTiming=new M.Timer,$e._peerConnectionTiming=new M.Timer,$e._mediaTiming=new M.Timer,$e._connectTiming=new M.Timer,$e._sentBytesMovingAverage=new ce,$e._packetLossMovingAverage=new ce,$e._progressEvents=[],$e._receivedBytesMovingAverage=new ce;var ot=Ve.environment,Pt=void 0===ot?"prod":ot,qt=Ve.region,Jt=Ve.duration,Zn=void 0===Jt?1e4:Jt,Pn=Ve.wsServer||ee(Pt,void 0===qt?"gll":qt);return $e._log=new Y("default",$e,j.DEFAULT_LOG_LEVEL,j.DEFAULT_LOGGER_NAME),$e._testDuration=Zn,$e._instanceId=rt++,$e._testTiming.start(),$e._runPreflightTest(Je,Pt,Pn),$e}return F(Et,Ht),Et.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},Et.prototype.stop=function(){this._stopped=!0},Et.prototype._generatePreflightReport=function(Je){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:Z.makeStat(Je?.jitter),rtt:Z.makeStat(Je?.rtt),packetLoss:Z.makeStat(Je?.packetLoss)},selectedIceCandidatePairStats:Je?Je.selectedIceCandidatePairStats:null,iceCandidateStats:Je?Je.iceCandidateStats:[],progressEvents:this._progressEvents,mos:Z.makeStat(Je?.mos)}},Et.prototype._executePreflightStep=function(Je,Ve,$e){return oe(this,void 0,void 0,function(){var De,ot,Pt,qt;return H(this,function(Jt){switch(Jt.label){case 0:if(this._log.debug("Executing step: ",Je),De=this._testDuration+1e4,this._stopped)throw new Error("stopped");ot=Promise.resolve().then(Ve),Pt=null,qt=new Promise(function(Zn,Pn){Pt=setTimeout(function(){Pn($e||new Error(Je+" timeout."))},De)}),Jt.label=1;case 1:return Jt.trys.push([1,,3,4]),[4,Promise.race([qt,ot])];case 2:return[2,Jt.sent()];case 3:return null!==Pt&&clearTimeout(Pt),[7];case 4:return[2]}})})},Et.prototype._collectNetworkTimings=function(Je){var Ve=this;return new Promise(function($e){var De;Je.addEventListener("iceconnectionstatechange",function(){"checking"===Je.iceConnectionState&&Ve._iceTiming.start(),"connected"===Je.iceConnectionState&&(Ve._iceTiming.stop(),Ve._updateProgress("iceConnected"),(!De||De&&"connected"===De.state)&&$e())}),Je.addEventListener("connectionstatechange",function(){"connecting"===Je.connectionState&&Ve._peerConnectionTiming.start(),"connected"===Je.connectionState&&(Ve._peerConnectionTiming.stop(),Ve._updateProgress("peerConnectionConnected"))});var Pt=Je.getSenders().map(function(qt){return qt.transport}).find(He);typeof Pt<"u"&&(De=Pt).addEventListener("statechange",function(){"connecting"===De.state&&Ve._dtlsTiming.start(),"connected"===De.state&&(Ve._dtlsTiming.stop(),Ve._updateProgress("dtlsConnected"),"connected"===Je.iceConnectionState&&$e())})})},Et.prototype._setupInsights=function(Je){var $e=Je.environment,ot=Je.realm,Ot=new ke(Je.token,j.SDK_NAME,j.SDK_VERSION,void 0===$e?j.DEFAULT_ENVIRONMENT:$e,void 0===ot?j.DEFAULT_REALM:ot,{});Ot.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var Jt=new ye(Ot,Date.now(),this._log),Zn=void 0;return{reportToInsights:function(Pn){var Dr,vr,ir=Pn.report,Ir=ir.stats.jitter||Zn,wr=ir.stats.rtt||Zn,Xi=ir.stats.packetLoss||Zn,Vr=ir.mos||Zn,Mo=new Map;ir.iceCandidateStats.forEach(function(Gt){if(Gt.candidateType&&Gt.protocol){var ln=Mo.get(Gt.candidateType)||[];ln.indexOf(Gt.protocol)<0&&ln.push(Gt.protocol),Mo.set(Gt.candidateType,ln)}});var ra=JSON.stringify(Object.fromEntries(Mo)),bt={name:"report",group:"preflight",level:ir.error?"error":"info",payload:{sessionSID:Ee,preflightSID:Ae("PF"),progressEvents:JSON.stringify(ir.progressEvents),testTiming:ir.testTiming,dtlsTiming:ir.networkTiming.dtls,iceTiming:ir.networkTiming.ice,peerConnectionTiming:ir.networkTiming.peerConnection,connectTiming:ir.networkTiming.connect,mediaTiming:ir.networkTiming.media,selectedLocalCandidate:null===(Dr=ir.selectedIceCandidatePairStats)||void 0===Dr?void 0:Dr.localCandidate,selectedRemoteCandidate:null===(vr=ir.selectedIceCandidatePairStats)||void 0===vr?void 0:vr.remoteCandidate,iceCandidateStats:ra,jitterStats:Ir,rttStats:wr,packetLossStats:Xi,mosStats:Vr,error:ir.error}};Jt.emit("event",bt),setTimeout(function(){return Ot.disconnect()},2e3)}}},Et.prototype._runPreflightTest=function(Je,Ve,$e){return oe(this,void 0,void 0,function(){var De,ot,Pt,qt,Ot,Jt,Zn,Pn,Dr,vr,ir,Ir,wr=this;return H(this,function(Xi){switch(Xi.label){case 0:De=[],ot=[],Pt=this._setupInsights({token:Je,environment:Ve}).reportToInsights,Xi.label=1;case 1:return Xi.trys.push([1,8,9,10]),qt=[],[4,this._executePreflightStep("Acquire media",function(){return[ae.syntheticAudio(),ue.syntheticVideo({width:640,height:480})]})];case 2:return De=Xi.sent(),this._updateProgress("mediaAcquired"),this.emit("debug",{localTracks:De}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return U.getTurnCredentials(Je,$e)},new le)];case 3:return Ot=Xi.sent(),this._connectTiming.stop(),this._updateProgress("connected"),Jt=new RTCPeerConnection({iceServers:Ot,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),Zn=new RTCPeerConnection({iceServers:Ot,bundlePolicy:"max-bundle"}),ot.push(Jt),ot.push(Zn),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return oe(wr,void 0,void 0,function(){var Vr,Mo,ra,bt;return H(this,function(Gt){switch(Gt.label){case 0:return Jt.addEventListener("icecandidate",function(ln){return ln.candidate&&Zn.addIceCandidate(ln.candidate)}),Zn.addEventListener("icecandidate",function(ln){return ln.candidate&&Jt.addIceCandidate(ln.candidate)}),De.forEach(function(ln){return Jt.addTrack(ln)}),Vr=new Promise(function(ln){var Xe=[];Zn.addEventListener("track",function(Be){Xe.push(Be.track),Xe.length===De.length&&ln(Xe)})}),[4,Jt.createOffer()];case 1:return Mo=Gt.sent(),[4,Jt.setLocalDescription(ra=Mo)];case 2:return Gt.sent(),[4,Zn.setRemoteDescription(ra)];case 3:return Gt.sent(),[4,Zn.createAnswer()];case 4:return bt=Gt.sent(),[4,Zn.setLocalDescription(bt)];case 5:return Gt.sent(),[4,Jt.setRemoteDescription(bt)];case 6:return Gt.sent(),[4,this._collectNetworkTimings(Jt)];case 7:return Gt.sent(),[2,Vr]}})})},new he)];case 4:return Pn=Xi.sent(),this.emit("debug",{remoteTracks:Pn}),Pn.forEach(function(Vr){Vr.addEventListener("ended",function(){return wr._log.warn(Vr.kind+":ended")}),Vr.addEventListener("mute",function(){return wr._log.warn(Vr.kind+":muted")}),Vr.addEventListener("unmute",function(){return wr._log.warn(Vr.kind+":unmuted")})}),this._updateProgress("mediaSubscribed"),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(Vr){var Mo=document.createElement("video");Mo.autoplay=!0,Mo.playsInline=!0,Mo.muted=!0,Mo.srcObject=new MediaStream(Pn),qt.push(Mo),wr.emit("debugElement",Mo),Mo.oncanplay=Vr})},new he)];case 5:return Xi.sent(),this._mediaTiming.stop(),this._updateProgress("mediaStarted"),[4,this._executePreflightStep("Collect stats for duration",function(){return wr._collectRTCStatsForDuration(wr._testDuration,{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]},Jt,Zn)})];case 6:return Dr=Xi.sent(),[4,this._executePreflightStep("Generate report",function(){return wr._generatePreflightReport(Dr)})];case 7:return vr=Xi.sent(),Pt({report:vr}),this.emit("completed",vr),[3,10];case 8:return ir=Xi.sent(),Ir=this._generatePreflightReport(),Pt({report:re(re({},Ir),{error:ir?.toString()})}),this.emit("failed",ir,Ir),[3,10];case 9:return ot.forEach(function(Vr){return Vr.close()}),De.forEach(function(Vr){return Vr.stop()}),[7];case 10:return[2]}})})},Et.prototype._collectRTCStats=function(Je,Ve,$e){return oe(this,void 0,void 0,function(){var De,ot,Pt,qt,Ot,Jt,Zn,Pn,Dr,vr,ir,Ir,wr,Xi;return H(this,function(Vr){switch(Vr.label){case 0:return[4,x.getCombinedConnectionStats({publisher:Ve,subscriber:$e})];case 1:return De=Vr.sent(),ot=De.timestamp,Pt=De.bytesSent,qt=De.bytesReceived,Ot=De.packets,Jt=De.packetsLost,Zn=De.roundTripTime,Dr=De.selectedIceCandidatePairStats,vr=De.iceCandidateStats,ir=Je.jitter.length>0,Je.jitter.push(Pn=De.jitter),Je.rtt.push(Zn),this._sentBytesMovingAverage.putSample(Pt,ot),this._receivedBytesMovingAverage.putSample(qt,ot),this._packetLossMovingAverage.putSample(Jt,Ot),ir&&(Je.outgoingBitrate.push(1e3*this._sentBytesMovingAverage.get()*8),Je.incomingBitrate.push(1e3*this._receivedBytesMovingAverage.get()*8),Ir=this._packetLossMovingAverage.get(),wr=Math.min(100,100*Ir),Je.packetLoss.push(wr),Xi=P.calculateMOS(Zn,Pn,Ir),Je.mos.push(Xi)),Je.selectedIceCandidatePairStats||(Je.selectedIceCandidatePairStats=Dr),0===Je.iceCandidateStats.length&&(Je.iceCandidateStats=vr),[2]}})})},Et.prototype._collectRTCStatsForDuration=function(Je,Ve,$e,De){return oe(this,void 0,void 0,function(){var ot,Pt,qt;return H(this,function(Ot){switch(Ot.label){case 0:return ot=Date.now(),Pt=Math.min(1e3,Je),[4,pe.waitForSometime(Pt)];case 1:return Ot.sent(),[4,this._collectRTCStats(Ve,$e,De)];case 2:return Ot.sent(),(qt=Je-(Date.now()-ot))>0?[4,this._collectRTCStatsForDuration(qt,Ve,$e,De)]:[3,4];case 3:Ve=Ot.sent(),Ot.label=4;case 4:return[2,Ve]}})})},Et.prototype._updateProgress=function(Je){var Ve=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:Ve,name:Je}),this.emit("progress",Je)},Et}(K);Pe.PreflightTest=nt,Pe.runPreflight=function Nt(Ht,Et){return void 0===Et&&(Et={}),new nt(Ht,Et)}},5237:(we,Pe,$)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.syntheticAudio=void 0,Pe.syntheticAudio=function F(){var re=$(7708),oe={},H=re.getOrCreate(oe),j=H.createOscillator(),M=j.connect(H.createMediaStreamDestination());j.start();var P=M.stream.getAudioTracks()[0],x=P.stop;return P.stop=function(){x.call(P),re.release(oe)},P}},3519:(we,Pe)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.syntheticVideo=void 0,Pe.syntheticVideo=function $(F){var re=void 0===F?{}:F,oe=re.width,H=void 0===oe?640:oe,j=re.height,M=void 0===j?480:j,P=Object.assign(document.createElement("canvas"),{width:H,height:M}),x=P.getContext("2d");x.fillStyle="green",x.fillRect(0,0,P.width,P.height);var U=!1;requestAnimationFrame(function pe(){if(!U){var ee=Math.round(255*Math.random()),Y=Math.round(255*Math.random()),K=Math.round(255*Math.random()),ce=Math.round(255*Math.random());x.fillStyle="rgba("+ee+", "+Y+", "+K+", "+ce+")",x.fillRect(Math.random()*H,Math.random()*M,50,50),requestAnimationFrame(pe)}});var ae=P.captureStream(30).getTracks()[0],ue=ae.stop;return ae.stop=function(){U=!0,ue.call(ae)},ae}},1567:(we,Pe)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.Timer=void 0;var $=function(){function F(){this._end=void 0,this.start()}return F.prototype.start=function(){return this._start=Date.now(),this},F.prototype.stop=function(){return this._end=Date.now(),this},F.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:void 0===this._end?void 0:this._end-this._start}},F}();Pe.Timer=$},7772:function(we,Pe,$){"use strict";var M,F=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&(U[ae]=Z[ae])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function U(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(U.prototype=x.prototype,new U)}),re=this&&this.__read||function(M,P){var x="function"==typeof Symbol&&M[Symbol.iterator];if(!x)return M;var Z,ue,U=x.call(M),ae=[];try{for(;(void 0===P||P-- >0)&&!(Z=U.next()).done;)ae.push(Z.value)}catch(pe){ue={error:pe}}finally{try{Z&&!Z.done&&(x=U.return)&&x.call(U)}finally{if(ue)throw ue.error}}return ae},oe=this&&this.__spreadArray||function(M,P){for(var x=0,U=P.length,Z=M.length;x<U;x++,Z++)M[Z]=P[x];return M},j=function(M){function P(){var x=M.call(this)||this;return Object.defineProperties(x,{_queuedEvents:{value:new Map}}),x}return F(P,M),P.prototype.dequeue=function(x){var U=this,Z=!0;if(!x)return this._queuedEvents.forEach(function(ue,pe){Z=this.dequeue(pe)&&Z},this),Z;var ae=this._queuedEvents.get(x)||[];return this._queuedEvents.delete(x),ae.reduce(function(ue,pe){return U.emit.apply(U,oe([],re([x].concat(pe))))&&ue},Z)},P.prototype.queue=function(){var x=[].slice.call(arguments);if(this.emit.apply(this,oe([],re(x))))return!0;var U=x[0];return this._queuedEvents.has(U)||this._queuedEvents.set(U,[]),this._queuedEvents.get(U).push(x.slice(1)),!1},P}($(9069).EventEmitter);we.exports=j},3609:function(we,Pe,$){"use strict";var M,F=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&(U[ae]=Z[ae])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function U(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(U.prototype=x.prototype,new U)}),re=this&&this.__read||function(M,P){var x="function"==typeof Symbol&&M[Symbol.iterator];if(!x)return M;var Z,ue,U=x.call(M),ae=[];try{for(;(void 0===P||P-- >0)&&!(Z=U.next()).done;)ae.push(Z.value)}catch(pe){ue={error:pe}}finally{try{Z&&!Z.done&&(x=U.return)&&x.call(U)}finally{if(ue)throw ue.error}}return ae},oe=this&&this.__spreadArray||function(M,P){for(var x=0,U=P.length,Z=M.length;x<U;x++,Z++)M[Z]=P[x];return M},j=function(M){function P(x,U){var Z=M.call(this,x,U)||this;return Z._handleTrackSignalingEvents(),Z.once("disconnected",Z._unsubscribeTracks.bind(Z)),Z}return F(P,M),P.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},P.prototype._addTrack=function(x,U,Z){return M.prototype._addTrack.call(this,x,Z)?(U._subscribed(x),this.emit("trackSubscribed",x,U),x):null},P.prototype._addTrackPublication=function(x){var U=M.prototype._addTrackPublication.call(this,x);return U?(this.emit("trackPublished",U),U):null},P.prototype._getTrackPublicationEvents=function(){return oe(oe([],re(M.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},P.prototype._unsubscribeTracks=function(){var x=this;this.tracks.forEach(function(U){if(U.isSubscribed){var Z=U.track;U._unsubscribe(),x.emit("trackUnsubscribed",Z,U)}})},P.prototype._removeTrack=function(x,U,Z){var ae=this._tracks.get(Z);return ae?(M.prototype._removeTrack.call(this,ae,Z),U._unsubscribe(),this.emit("trackUnsubscribed",ae,U),ae):null},P.prototype._removeTrackPublication=function(x){this._signaling.clearTrackHint(x.trackSid);var U=M.prototype._removeTrackPublication.call(this,x);return U?(this.emit("trackUnpublished",U),U):null},P}($(9218));we.exports=j},7406:function(we,Pe,$){"use strict";var ee,F=this&&this.__extends||(ee=function(Y,K){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,ye){ce.__proto__=ye}||function(ce,ye){for(var ke in ye)Object.prototype.hasOwnProperty.call(ye,ke)&&(ce[ke]=ye[ke])})(Y,K)},function(Y,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function ce(){this.constructor=Y}ee(Y,K),Y.prototype=null===K?Object.create(K):(ce.prototype=K.prototype,new ce)}),re=this&&this.__read||function(ee,Y){var K="function"==typeof Symbol&&ee[Symbol.iterator];if(!K)return ee;var ye,fe,ce=K.call(ee),ke=[];try{for(;(void 0===Y||Y-- >0)&&!(ye=ce.next()).done;)ke.push(ye.value)}catch(Ae){fe={error:Ae}}finally{try{ye&&!ye.done&&(K=ce.return)&&K.call(ce)}finally{if(fe)throw fe.error}}return ke},oe=this&&this.__spreadArray||function(ee,Y){for(var K=0,ce=Y.length,ye=ee.length;K<ce;K++,ye++)ee[ye]=Y[K];return ee},H=$(133),j=$(3609),M=$(7805),P=$(9739).valueToJSON,x=0,U=function(ee){function Y(K,ce,ye){var ke=ee.call(this)||this,fe=ye.log.createLog("default",ke),Ae=new Map;return Object.defineProperties(ke,{_log:{value:fe},_clientTrackSwitchOffControl:{value:ye.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:ye.contentPreferencesMode||"disabled"},_instanceId:{value:++x},_options:{value:ye},_participants:{value:Ae},_signaling:{value:ce},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(ce.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return ce.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:K},name:{enumerable:!0,value:ce.name},participants:{enumerable:!0,value:Ae},sid:{enumerable:!0,value:ce.sid},state:{enumerable:!0,get:function(){return ce.state}},mediaRegion:{enumerable:!0,value:ce.mediaRegion}}),function ue(ee,Y){Y.on("updated",function(){var ce=Y.isEnabled;ee._log.info("Recording "+(ce?"started":"stopped")),ee.emit("recording"+(ce?"Started":"Stopped"))})}(ke,ce.recording),function pe(ee,Y){var K=ee._log;K.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),Y.participants.forEach(ae.bind(null,ee)),K.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),Y.on("participantConnected",ae.bind(null,ee)),Y.on("dominantSpeakerChanged",function(){return ee.emit("dominantSpeakerChanged",ee.dominantSpeaker)}),Y.on("stateChanged",function ce(ye,ke){switch(K.info("Transitioned to state:",ye),ye){case"disconnected":ee.participants.forEach(function(fe){fe._unsubscribeTracks()}),ee.emit(ye,ee,ke),ee.localParticipant.tracks.forEach(function(fe){fe.unpublish()}),Y.removeListener("stateChanged",ce);break;case"reconnecting":setTimeout(function(){return ee.emit("reconnecting",ke)},0);break;default:setTimeout(function(){return ee.emit("reconnected")},0)}})}(ke,ce),fe.info("Created a new Room:",ke.name),fe.debug("Initial RemoteParticipants:",Array.from(ke._participants.values())),ke}return F(Y,ee),Y.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},Y.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},Y.prototype.getStats=function(){var K=this;return this._signaling.getStats().then(function(ce){return Array.from(ce).map(function(ye){var ke=re(ye,2),Ae=ke[1];return new M(ke[0],Object.assign({},Ae,{localAudioTrackStats:Z(K,Ae.localAudioTrackStats),localVideoTrackStats:Z(K,Ae.localVideoTrackStats)}))})})},Y.prototype.toJSON=function(){return P(this)},Y}(H);function Z(ee,Y){var K=ee.localParticipant._signaling;return Y.reduce(function(ce,ye){var ke=K.tracks.get(ye.trackId),fe=K.getSender(ke);return fe?[Object.assign({},ye,{trackId:fe.id})].concat(ce):ce},[])}function ae(ee,Y){var K=ee._log,ke=new j(Y,{log:K,clientTrackSwitchOffControl:ee._clientTrackSwitchOffControl,contentPreferencesMode:ee._contentPreferencesMode});K.info("A new RemoteParticipant connected:",ke),ee._participants.set(ke.sid,ke),ee.emit("participantConnected",ke);var fe=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(Ae){var Ee=re(Array.isArray(Ae)?Ae:[Ae,Ae],2),ve=Ee[0],le=Ee[1];function he(){var Oe=[].slice.call(arguments);Oe.unshift(le),Oe.push(ke),ee.emit.apply(ee,oe([],re(Oe)))}return ke.on(ve,he),[ve,he]});ke.once("disconnected",function(){var Ee=ee.dominantSpeaker;K.info("RemoteParticipant disconnected:",ke),ee._participants.delete(ke.sid),fe.forEach(function(ve){ke.removeListener(ve[0],ve[1])}),ee.emit("participantDisconnected",ke),ke===Ee&&ee.emit("dominantSpeakerChanged",ee.dominantSpeaker)})}we.exports=U},8043:function(we,Pe,$){"use strict";var P,F=this&&this.__extends||(P=function(x,U){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ae){Z.__proto__=ae}||function(Z,ae){for(var ue in ae)Object.prototype.hasOwnProperty.call(ae,ue)&&(Z[ue]=ae[ue])})(x,U)},function(x,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function Z(){this.constructor=x}P(x,U),x.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)}),re=$(9285),oe=$(8343),H=$(8675),j={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},M=function(P){function x(){return P.call(this,"closed",j)||this}return F(x,P),x.prototype._close=function(U){return this.transition("closing",U),this.transition("closed",U),Promise.resolve(this)},x.prototype._connect=function(U,Z,ae,ue,pe){U.connect("PA00000000000000000000000000000000","test");var Y=Promise.resolve(new oe(U,"RM00000000000000000000000000000000",pe));return Y.cancel=function(){},Y},x.prototype._open=function(U){return this.transition("opening",U),this.transition("open",U),Promise.resolve(this)},x.prototype.close=function(){var U=this;return this.bracket("close",function(Z){switch(U.state){case"closed":return U;case"open":return U._close(Z);default:throw new Error('Unexpected Signaling state "'+U.state+'"')}})},x.prototype.connect=function(U,Z,ae,ue,pe){var ee=this;return this.bracket("connect",function Y(K){switch(ee.state){case"closed":return ee._open(K).then(Y.bind(null,K));case"open":return ee.releaseLockCompletely(K),ee._connect(U,Z,ae,ue,pe);default:throw new Error('Unexpected Signaling state "'+ee.state+'"')}})},x.prototype.createLocalParticipantSignaling=function(){return new re},x.prototype.open=function(){var U=this;return this.bracket("open",function(Z){switch(U.state){case"closed":return U._open(Z);case"open":return U;default:throw new Error('Unexpected Signaling state "'+U.state+'"')}})},x}(H);we.exports=M},5677:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(){var M=H.call(this)||this;return Object.defineProperties(M,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),M}return F(j,H),j.prototype.addTrack=function(M,P,x){var U=this._createLocalTrackPublicationSignaling(M,P,x);return this._trackSendersToPublications.set(M,U),this._publicationsToTrackSenders.set(U,M),H.prototype.addTrack.call(this,U),this},j.prototype.getPublication=function(M){return this._trackSendersToPublications.get(M)||null},j.prototype.getSender=function(M){return this._publicationsToTrackSenders.get(M)||null},j.prototype.removeTrack=function(M){var P=this._trackSendersToPublications.get(M);return P?(this._trackSendersToPublications.delete(M),this._publicationsToTrackSenders.delete(P),H.prototype.removeTrack.call(this,P)&&P.stop(),P):null},j}($(9285));we.exports=oe},3157:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),oe=function(j){function M(P,x,U){var Z=this;return P=P.clone(),(Z=j.call(this,x,P.kind,"data"===P.kind||P.track.enabled,U)||this).setTrackTransceiver(P),Object.defineProperties(Z,{_updatedPriority:{value:U,writable:!0},id:{enumerable:!0,value:P.id}}),Z}return F(M,j),Object.defineProperty(M.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),M.prototype.enable=function(P){return this.trackTransceiver.track.enabled=P="boolean"!=typeof P||P,j.prototype.enable.call(this,P)},M.prototype.publishFailed=function(P){return function H(j,M){return null===j._sid&&!j._error&&(j._error=M,!0)}(this,P)&&this.emit("updated"),this},M.prototype.setPriority=function(P){return this._updatedPriority!==P&&(this._updatedPriority=P,this.emit("updated")),this},M.prototype.setSid=function(P){return this._error?this:j.prototype.setSid.call(this,P)},M.prototype.stop=function(){this.trackTransceiver.stop()},M}($(8194));we.exports=oe},9285:function(we,Pe,$){"use strict";var M,F=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&(U[ae]=Z[ae])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function U(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(U.prototype=x.prototype,new U)}),re=$(8675),oe=$(669),H={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},j=function(M){function P(){var x=M.call(this,"connecting",H)||this;return Object.defineProperties(x,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),x}return F(P,M),Object.defineProperty(P.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),P.prototype.addTrack=function(x){return this.tracks.set(x.id||x.sid,x),this.emit("trackAdded",x),this},P.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},P.prototype.removeTrack=function(x){var U=this.tracks.get(x.id||x.sid);return this.tracks.delete(x.id||x.sid),U&&this.emit("trackRemoved",x),U||null},P.prototype.setNetworkQualityLevel=function(x,U){this._networkQualityLevel!==x&&(this._networkQualityLevel=x,this._networkQualityStats=U&&(U.audio||U.video)?new oe(U):null,this.emit("networkQualityLevelChanged"))},P.prototype.connect=function(x,U){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=x),this._identity||(this._identity=U),this.preempt("connected"),!0)},P.prototype.reconnecting=function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)},P}(re);we.exports=j},9987:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(){var M=H.call(this)||this;return Object.defineProperties(M,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),M}return F(j,H),j.prototype.disable=function(){return this.enable(!1)},j.prototype.enable=function(M){return this.isEnabled!==(M="boolean"!=typeof M||M)&&(this._isEnabled=M,this.emit("updated")),this},j}($(9069).EventEmitter);we.exports=oe},2184:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this)||this;return x.connect(M,P),x}return F(j,H),j}($(9285));we.exports=oe},8956:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,U,Z,ae){var ue=H.call(this,P,x,U,Z)||this;return Object.defineProperties(ue,{_isSwitchedOff:{value:ae,writable:!0}}),ue.setSid(M),ue}return F(j,H),Object.defineProperty(j.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),j.prototype.subscribeFailed=function(M){return this.error||(this._error=M,this.emit("updated")),this},j.prototype.setPriority=function(M){return this._priority!==M&&(this._priority=M,this.emit("updated")),this},j.prototype.setSwitchedOff=function(M){return this._isSwitchedOff!==M&&(this._isSwitchedOff=M,this.emit("updated")),this},j}($(8194));we.exports=oe},8343:function(we,Pe,$){"use strict";var K,F=this&&this.__extends||(K=function(ce,ye){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,fe){ke.__proto__=fe}||function(ke,fe){for(var Ae in fe)Object.prototype.hasOwnProperty.call(fe,Ae)&&(ke[Ae]=fe[Ae])})(ce,ye)},function(ce,ye){if("function"!=typeof ye&&null!==ye)throw new TypeError("Class extends value "+String(ye)+" is not a constructor or null");function ke(){this.constructor=ce}K(ce,ye),ce.prototype=null===ye?Object.create(ye):(ke.prototype=ye.prototype,new ke)}),re=$(9987),oe=$(8675),H=$(6543),j=$(9739).buildLogLevels,M=$(8701).DEFAULT_LOG_LEVEL,P=$(1458),x=$(8380),U=x.MediaConnectionError,Z=x.MediaDTLSTransportFailedError,ae=x.SignalingConnectionDisconnectedError,ue=0,pe={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},ee=function(K){function ce(ye,ke,fe,Ae){var Ee=this;Ae=Object.assign({logLevel:M,RecordingSignaling:re,Timeout:H},Ae);var ve=j(Ae.logLevel);Ee=K.call(this,"connected",pe)||this;var le=Ae.RecordingSignaling,he=new Ae.Timeout(function(){Ee._disconnect(Ee._reconnectingError)},Ae.sessionTimeout,!1);return Object.defineProperties(Ee,{_instanceId:{value:ue++},_log:{value:Ae.log?Ae.log.createLog("default",Ee):new P("default",Ee,ve,Ae.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:Ae},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:he},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:ye},name:{enumerable:!0,value:fe},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new le},sid:{enumerable:!0,value:ke}}),Ee.on("connectionStateChanged",function(){"failed"===Ee.connectionState&&!["disconnected","failed"].includes(Ee.iceConnectionState)&&Ee._disconnect(new Z)}),Ee.on("iceConnectionStateChanged",function(){return Y(Ee)}),Ee.on("signalingConnectionStateChanged",function(){return Y(Ee)}),setTimeout(function(){return Y(Ee)}),Ee}return F(ce,K),ce.prototype._disconnect=function(ye){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[ye]),!0)},ce.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},ce.prototype.connectParticipant=function(ye){var ke=this;return"disconnected"!==ye.state&&!this.participants.has(ye.sid)&&(this.participants.set(ye.sid,ye),ye.on("stateChanged",function fe(Ae){"disconnected"===Ae&&(ye.removeListener("stateChanged",fe),ke.participants.delete(ye.sid),ke.emit("participantDisconnected",ye))}),this.emit("participantConnected",ye),!0)},ce.prototype.disconnect=function(){return this._disconnect()},ce.prototype.setDominantSpeaker=function(ye){this.dominantSpeakerSid=ye,this.emit("dominantSpeakerChanged")},ce}(oe);function Y(K){var ce;"disconnected"!==K.state&&"disconnected"!==K.signalingConnectionState?("reconnecting"===K.signalingConnectionState?ce=K.signalingConnectionState:"failed"===K.iceConnectionState?(K._mediaConnectionIsReconnecting=!0,ce="reconnecting"):"new"===K.iceConnectionState||"checking"===K.iceConnectionState?ce=K._mediaConnectionIsReconnecting?"reconnecting":"connected":(K._mediaConnectionIsReconnecting=!1,K._reconnectingError=null,K._sessionTimeout.clear(),ce="connected"),ce!==K.state&&("reconnecting"===ce?(K._reconnectingError="reconnecting"===K.signalingConnectionState?new ae:new U,K._sessionTimeout.start(),K.preempt(ce,null,[K._reconnectingError])):K.preempt(ce))):K._sessionTimeout.clear()}we.exports=ee},8194:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,U){var Z=H.call(this)||this,ae=null;return Object.defineProperties(Z,{_error:{value:null,writable:!0},_isEnabled:{value:x,writable:!0},_priority:{value:U,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return ae},set:function(ue){null===ae&&(ae=ue)}},kind:{enumerable:!0,value:P},name:{enumerable:!0,value:M}}),Z}return F(j,H),Object.defineProperty(j.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),j.prototype.disable=function(){return this.enable(!1)},j.prototype.enable=function(M){return this.isEnabled!==(M="boolean"!=typeof M||M)&&(this._isEnabled=M,this.emit("updated")),this},j.prototype.setTrackTransceiver=function(M){return this.trackTransceiver!==(M=M||null)&&(this._trackTransceiver=M,this.emit("updated")),this},j.prototype.setSid=function(M){return null===this.sid&&(this._sid=M,this.emit("updated")),this},j}($(9069).EventEmitter);we.exports=oe},7697:(we,Pe,$)=>{"use strict";var F=$(8126),re=$(6603),oe=$(2112),H=$(4892),j=$(8380),M=j.SignalingConnectionDisconnectedError,P=j.SignalingIncomingMessageInvalidError,x=$(9739),U=x.flatMap,Z=x.createRoomConnectEventPayload;we.exports=function ae(ue,pe,ee,Y,K,ce){ce=Object.assign({PeerConnectionManager:re,RoomV2:oe,Transport:H},ce);var ye=K.video[0]&&!0===K.video[0].adaptiveSimulcast,fe=ce.RoomV2,Ae=ce.Transport,Ee=ce.iceServers,ve=ce.log,le=new(0,ce.PeerConnectionManager)(Y,K,ce),he=U(ee.tracks,function(He){return[He.trackTransceiver]});le.setTrackSenders(he);var je,Oe=new Error("Canceled"),Fe=new F(function(He,rt,nt){var Ht=ce.bandwidthProfile,Ve=ce.eventObserver,ot=ce.name,vr=Object.assign({adaptiveSimulcast:ye,automaticSubscription:ce.automaticSubscription,dominantSpeaker:ce.dominantSpeaker,environment:ce.environment,eventObserver:Ve,loggerName:ce.loggerName,logLevel:ce.logLevel,networkMonitor:ce.networkMonitor,networkQuality:ce.networkQuality,iceServers:Ee,onIced:function(Ir){return nt()?(rt(Oe),Promise.reject(Oe)):(ve.debug("Got ICE servers:",Ir),ce.iceServers=Ir,le.setConfiguration(ce),le.createAndOffer().then(function(){if(nt())throw rt(Oe),Oe;ve.debug("createAndOffer() succeeded."),le.dequeue("description")}).catch(function(wr){throw ve.error("createAndOffer() failed:",wr),rt(wr),wr}))},realm:ce.realm,renderHints:!!Ht&&("disabled"!==ce.clientTrackSwitchOffControl||"disabled"!==ce.contentPreferencesMode),sdpSemantics:ce.sdpSemantics,trackPriority:!!Ht,trackSwitchOff:!!Ht},Ht?{bandwidthProfile:Ht}:{});je=new Ae(ot,ue,ee,le,pe,vr);var ir=Z(ce);Ve.emit("event",ir),je.once("connected",function(Ir){ve.debug("Transport connected:",Ir),nt()?rt(Oe):Ir.participant?(ee.setSignalingRegion(Ir.options.signaling_region),He(new fe(ee,Ir,je,le,ce))):rt(new P)}),je.once("stateChanged",function(Ir,wr){"disconnected"===Ir?(je=null,rt(wr||new M)):ve.debug("Transport state changed:",Ir)})},function(){je&&(je.disconnect(),je=null)});return Fe.catch(function(){je&&(je.disconnect(),je=null),le.close()}),Fe}},2314:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,"active_speaker",P)||this;return Object.defineProperties(x,{_loudestParticipantSid:{value:null,writable:!0}}),x.on("ready",function(U){U.on("message",function(Z){"active_speaker"===Z.type&&x._setLoudestParticipantSid(Z.participant)})}),x}return F(j,H),Object.defineProperty(j.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),j.prototype._setLoudestParticipantSid=function(M){this.loudestParticipantSid!==M&&(this._loudestParticipantSid=M,this.emit("updated"))},j}($(4071));we.exports=oe},380:(we,Pe,$)=>{"use strict";var F=$(3826),re=function(){function oe(){Object.defineProperties(this,{_filter:{value:new F({getKey:function(j){return j.ufrag},isLessThanOrEqualTo:function(j,M){return j.revision<=M.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return oe.prototype.setUfrag=function(H){this._ufrag=H;var j=this._filter.toMap().get(H);return j?j.candidates:[]},oe.prototype.update=function(H){H.candidates=H.candidates||[];var j=this._filter.toMap().get(H.ufrag),M=j?j.candidates:[];return this._filter.update(H)&&this._ufrag===H.ufrag?H.candidates.slice(M.length):[]},oe}();we.exports=re},2282:(we,Pe,$)=>{"use strict";var F=$(8701),re=F.ICE_ACTIVITY_CHECK_PERIOD_MS,oe=F.ICE_INACTIVITY_THRESHOLD_MS,H=function(){function j(M,P){P=Object.assign({activityCheckPeriodMs:re,inactivityThresholdMs:oe},P),Object.defineProperties(this,{_activityCheckPeriodMs:{value:P.activityCheckPeriodMs},_inactivityThresholdMs:{value:P.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:M},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return j.prototype._getActivePairStat=function(M){return Array.from(M.values()).find(function(U){return"candidate-pair"===U.type&&U.nominated})||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}},j.prototype._getIceConnectionStats=function(){var M=this;return this._peerConnection.getStats().then(function(P){return M._getActivePairStat(P)}).catch(function(){return null})},j.prototype._scheduleInactivityCallback=function(M){var P=this;M&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===P._peerConnection.iceConnectionState&&M()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!M&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},j.prototype.start=function(M){var P=this;this.stop(),this._timer=setInterval(function(){P._getIceConnectionStats().then(function(x){!x||((!P._lastActivity||P._lastActivity.bytesReceived!==x.bytesReceived)&&(P._lastActivity=x,P._scheduleInactivityCallback(null)),x.timestamp-P._lastActivity.timestamp>=P._inactivityThresholdMs&&("disconnected"===P._peerConnection.iceConnectionState?M():null===P._onIceConnectionStateChanged&&P._scheduleInactivityCallback(M)))})},this._activityCheckPeriodMs)},j.prototype.stop=function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},j}();we.exports=H},448:function(we,Pe,$){"use strict";var M,F=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&(U[ae]=Z[ae])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function U(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(U.prototype=x.prototype,new U)}),re=$(7697),oe=$(523),j=function(M){function P(x,U){var Z;return U=Object.assign({createCancelableRoomSignalingPromise:re},U),Z=M.call(this)||this,Object.defineProperties(Z,{_createCancelableRoomSignalingPromise:{value:U.createCancelableRoomSignalingPromise},_options:{value:U},_wsServer:{value:x}}),Z}return F(P,M),P.prototype._connect=function(x,U,Z,ae,ue){return ue=Object.assign({},this._options,ue),this._createCancelableRoomSignalingPromise.bind(null,U,this._wsServer,x,Z,ae,ue)},P.prototype.createLocalParticipantSignaling=function(x,U){return new oe(x,U)},P}($(8043));we.exports=j},523:function(we,Pe,$){"use strict";var Z,F=this&&this.__extends||(Z=function(ae,ue){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pe,ee){pe.__proto__=ee}||function(pe,ee){for(var Y in ee)Object.prototype.hasOwnProperty.call(ee,Y)&&(pe[Y]=ee[Y])})(ae,ue)},function(ae,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function pe(){this.constructor=ae}Z(ae,ue),ae.prototype=null===ue?Object.create(ue):(pe.prototype=ue.prototype,new pe)}),re=$(5677),oe=$(5771),H=$(8701).DEFAULT_LOG_LEVEL,j=$(1458),M=$(9739),P=M.buildLogLevels,x=M.isDeepEqual,U=function(Z){function ae(ue,pe,ee){var Y;ee=Object.assign({logLevel:H,LocalTrackPublicationV2:oe},ee),Y=Z.call(this)||this;var K=P(ee.logLevel);return Object.defineProperties(Y,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:ue},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:ee.LocalTrackPublicationV2},_log:{value:ee.log?ee.log.createLog("default",Y):new j("default",Y,K,ee.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:pe},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),Y}return F(ae,Z),ae.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},ae.prototype.setSignalingRegion=function(ue){this._signalingRegion||(this._signalingRegion=ue)},ae.prototype.setBandwidthProfile=function(ue){x(this._bandwidthProfile,ue)||(this._bandwidthProfile=JSON.parse(JSON.stringify(ue)),this._bandwidthProfileRevision++,this.didUpdate())},ae.prototype.getParameters=function(){return this._encodingParameters},ae.prototype.setParameters=function(ue){return this._encodingParameters.update(ue),this},ae.prototype.update=function(ue){return this._publishedRevision>=ue.revision||(this._publishedRevision=ue.revision,ue.tracks.forEach(function(pe){var ee=this.tracks.get(pe.id);ee&&ee.update(pe)},this)),this},ae.prototype._createLocalTrackPublicationSignaling=function(ue,pe,ee){return new this._LocalTrackPublicationV2(ue,pe,ee)},ae.prototype.addTrack=function(ue,pe,ee){var Y=this;Z.prototype.addTrack.call(this,ue,pe,ee);var K=this.getPublication(ue),ce=K.isEnabled,ye=K.updatedPriority,ke=function(){(ce!==K.isEnabled||ye!==K.updatedPriority)&&(Y.didUpdate(),ce=K.isEnabled,ye=K.updatedPriority)};return K.on("updated",ke),this._removeListener(K),this._removeListeners.set(K,function(){return K.removeListener("updated",ke)}),this.didUpdate(),this},ae.prototype._removeListener=function(ue){var pe=this._removeListeners.get(ue);pe&&pe()},ae.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(ue){return ue.getState()})}},ae.prototype.didUpdate=function(){this._revision++,this.emit("updated")},ae.prototype.removeTrack=function(ue){var pe=Z.prototype.removeTrack.call(this,ue);return pe&&(ue.removeClone(pe.trackTransceiver),this._removeListener(pe),this.didUpdate()),pe},ae.prototype.setNetworkQualityConfiguration=function(ue){this.networkQualityConfiguration.update(ue)},ae.prototype.setPublisherHint=function(ue,pe){var ee=Array.from(this.tracks.values()).find(function(Y){return Y.sid===ue});return ee?ee.trackTransceiver.setPublisherHint(pe):(this._log.warn("track:"+ue+" not found"),Promise.resolve("UNKNOWN_TRACK"))},ae}(re);we.exports=U},5771:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(3157),oe=$(8380).createTwilioError,H=function(j){function M(P,x,U){return j.call(this,P,x,U)||this}return F(M,j),M.prototype.getState=function(){return{enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority}},M.prototype.update=function(P){switch(P.state){case"ready":this.setSid(P.sid);break;case"failed":var x=P.error;this.publishFailed(oe(x.code,x.message))}return this},M}(re);we.exports=H},4071:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(9069),oe=0,H=function(j){function M(P,x,U){var Z=j.call(this)||this;return Object.defineProperties(Z,{_instanceId:{value:oe++},channel:{value:x},_log:{value:U.log.createLog("default",Z)},_getReceiver:{value:P},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),Z}return F(M,j),Object.defineProperty(M.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),M.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},M.prototype.setup=function(P){var x=this;this._teardown(),this._log.info("setting up msp transport for id:",P);var U=this._getReceiver(P).then(function(Z){if("data"!==Z.kind&&x._log.error("Expected a DataTrackReceiver"),x._receiverPromise===U){try{x._transport=Z.toDataTransport(),x.emit("ready",x._transport)}catch(ae){x._log.error("Failed to toDataTransport: "+ae.message)}Z.once("close",function(){return x._teardown()})}});this._receiverPromise=U},M.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},M}(re);we.exports=H},9056:function(we,Pe,$){"use strict";var P,F=this&&this.__extends||(P=function(x,U){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ae){Z.__proto__=ae}||function(Z,ae){for(var ue in ae)Object.prototype.hasOwnProperty.call(ae,ue)&&(Z[ue]=ae[ue])})(x,U)},function(x,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function Z(){this.constructor=x}P(x,U),x.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)}),re=this&&this.__read||function(P,x){var U="function"==typeof Symbol&&P[Symbol.iterator];if(!U)return P;var ae,pe,Z=U.call(P),ue=[];try{for(;(void 0===x||x-- >0)&&!(ae=Z.next()).done;)ue.push(ae.value)}catch(ee){pe={error:ee}}finally{try{ae&&!ae.done&&(U=Z.return)&&U.call(Z)}finally{if(pe)throw pe.error}}return ue},oe=$(9069),H=$(8753),j=function(P){function x(U,Z){var ae=P.call(this)||this;return Object.defineProperties(ae,{_factories:{value:new WeakMap},_manager:{value:U},_signaling:{value:Z}}),Z.on("updated",function(){return ae.emit("updated")}),ae}return F(x,P),Object.defineProperty(x.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),x.prototype.start=function(){var U=this;this.stop();var Z=setTimeout(function(){U._timeout===Z&&function M(P){var ae=(P._manager._peerConnections?Array.from(P._manager._peerConnections.values()):[]).map(function(ue){return ue._peerConnection}).filter(function(ue){return"closed"!==ue.signalingState}).map(function(ue){if(P._factories.has(ue))return P._factories.get(ue);var pe=new H(ue);return P._factories.set(ue,pe),pe}).map(function(ue){return ue.next().catch(function(){return null})});return Promise.all(ae).then(function(ue){return ue.filter(function(pe){return pe}).map(function(pe){return pe.summarize()})})}(U).then(function(ae){if(U._timeout===Z){if(ae.length){var ue=re(ae,1);U._signaling.put(ue[0])}U.start()}})},200);this._timeout=Z},x.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},x}(oe);we.exports=j},5775:function(we,Pe,$){"use strict";var x,F=this&&this.__extends||(x=function(U,Z){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,ue){ae.__proto__=ue}||function(ae,ue){for(var pe in ue)Object.prototype.hasOwnProperty.call(ue,pe)&&(ae[pe]=ue[pe])})(U,Z)},function(U,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");function ae(){this.constructor=U}x(U,Z),U.prototype=null===Z?Object.create(Z):(ae.prototype=Z.prototype,new ae)}),re=$(4071),oe=$(6412),H=$(6543),M=function(x){function U(Z,ae,ue){var pe=x.call(this,Z,"network_quality",ue)||this;return Object.defineProperties(pe,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new oe},_resendTimer:{value:new H(function(){pe._resendTimer.setDelay(1.5*pe._resendTimer.delay),pe._sendNetworkQualityInputs()},5e3,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:ae.local,remoteReportLevel:ae.remote}}}}),pe.on("ready",function(ee){ee.on("message",function(Y){"network_quality"===(pe._log.debug("Incoming: ",Y),Y.type)&&pe._handleNetworkQualityMessage(Y)})}),pe._sendNetworkQualityInputs(),pe}return F(U,x),Object.defineProperty(U.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),U.prototype._handleNetworkQualityMessage=function(Z){var ae=this,ue=!1,pe=null,ee=Z?Z.local:null;"number"==typeof ee?(pe=ee,this._levels=null):"object"==typeof ee&&ee&&(this._levels=ee,pe="number"==typeof ee.level?ee.level:Math.min(ee.audio.send,ee.audio.recv,ee.video.send,ee.video.recv)),null!==pe&&this.level!==pe&&(this._level=pe,ue=!0),this._remoteLevels=Z&&Z.remotes?Z.remotes.reduce(function(Y,K){return(ae._remoteLevels.get(K.sid)||{}).level!==K.level&&(ue=!0),Y.set(K.sid,K)},new Map):this._remoteLevels,ue&&this.emit("updated"),this._resendTimer.setDelay(5e3),this._resendTimer.isSet&&setTimeout(function(){return ae._sendNetworkQualityInputs()},1e3)},U.prototype._sendNetworkQualityInputs=function(){var Z=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(ae){Z._transport&&Z._transport.publish(function P(x,U){return Object.assign({type:"network_quality"},x,U)}(ae,Z._networkQualityReportLevels))}).finally(function(){Z._resendTimer.start()})},U.prototype.put=function(Z){this._networkQualityInputs.put(Z)},U}(re);we.exports=M},1058:function(we,Pe,$){"use strict";var $n,F=this&&this.__extends||($n=function(Tn,tt){return($n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ue,sn){Ue.__proto__=sn}||function(Ue,sn){for(var an in sn)Object.prototype.hasOwnProperty.call(sn,an)&&(Ue[an]=sn[an])})(Tn,tt)},function(Tn,tt){if("function"!=typeof tt&&null!==tt)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");function Ue(){this.constructor=Tn}$n(Tn,tt),Tn.prototype=null===tt?Object.create(tt):(Ue.prototype=tt.prototype,new Ue)}),re=this&&this.__read||function($n,Tn){var tt="function"==typeof Symbol&&$n[Symbol.iterator];if(!tt)return $n;var sn,Sn,Ue=tt.call($n),an=[];try{for(;(void 0===Tn||Tn-- >0)&&!(sn=Ue.next()).done;)an.push(sn.value)}catch(ii){Sn={error:ii}}finally{try{sn&&!sn.done&&(tt=Ue.return)&&tt.call(Ue)}finally{if(Sn)throw Sn.error}}return an},oe=this&&this.__spreadArray||function($n,Tn){for(var tt=0,Ue=Tn.length,sn=$n.length;tt<Ue;tt++,sn++)$n[sn]=Tn[tt];return $n},H=$(2606),j=$(1647),M=j.RTCIceCandidate,P=j.RTCPeerConnection,x=j.RTCSessionDescription,U=j.getStats,Z=$(7627),ae=$(8701),ue=ae.DEFAULT_ICE_GATHERING_TIMEOUT_MS,pe=ae.DEFAULT_LOG_LEVEL,ee=ae.DEFAULT_SESSION_TIMEOUT_SEC,Y=ae.iceRestartBackoffConfig,K=$(3898),ce=K.addOrRewriteNewTrackIds,ye=K.addOrRewriteTrackIds,ke=K.createCodecMapForMediaSection,fe=K.disableRtx,Ae=K.enableDtxForOpus,Ee=K.filterLocalCodecs,ve=K.getMediaSections,le=K.removeSSRCAttributes,he=K.revertSimulcast,Oe=K.setCodecPreferences,je=K.setSimulcast,Fe=$(6543),He=$(8380),rt=He.MediaClientLocalDescFailedError,nt=He.MediaClientRemoteDescFailedError,Ke=$(9739),Nt=Ke.buildLogLevels,Ht=Ke.getPlatform,Et=Ke.isChromeScreenShareTrack,Je=Ke.oncePerTick,Ve=Ke.defer,$e=$(380),De=$(2282),ot=$(2498),Pt=$(3501),qt=$(8675),Ot=$(1458),Jt=$(1057),Zn=$(3073),Pn=Z.guessBrowser(),Dr=Ht(),vr=/android/.test(Dr),ir="chrome"===Pn,Ir="firefox"===Pn,wr="safari"===Pn,Xi=0,Vr={open:["closed","updating"],updating:["closed","open"],closed:[]},Mo=function($n){function Tn(tt,Ue,sn,an){var Sn=$n.call(this,"open",Vr)||this,ii=Xe(an=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:Et,iceServers:[],logLevel:pe,offerOptions:{},revertSimulcast:he,sessionTimeout:1e3*ee,setCodecPreferences:Oe,setSimulcast:je,Backoff:H,IceConnectionMonitor:De,RTCIceCandidate:M,RTCPeerConnection:P,RTCSessionDescription:x,Timeout:Fe},an)),mo=Nt(an.logLevel),Ns=an.RTCPeerConnection;!0===an.enableDscp&&(an.chromeSpecificConstraints=an.chromeSpecificConstraints||{},an.chromeSpecificConstraints.optional=an.chromeSpecificConstraints.optional||[],an.chromeSpecificConstraints.optional.push({googDscp:!0}));var xs=an.log?an.log.createLog("webrtc",Sn):new Ot("webrtc",Sn,mo,an.loggerName),go=new Ns(ii,an.chromeSpecificConstraints);an.dummyAudioMediaStreamTrack&&go.addTrack(an.dummyAudioMediaStreamTrack),Object.defineProperties(Sn,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:an.enableDscp},_encodingParameters:{value:Ue},_isChromeScreenShareTrack:{value:an.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new an.Timeout(function(){return Sn._handleIceGatheringTimeout()},ue,!1)},_iceRestartBackoff:{value:new an.Backoff(Y)},_instanceId:{value:++Xi},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:xs},_eventObserver:{value:an.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new an.IceConnectionMonitor(go)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:an.offerOptions},_onEncodingParametersChanged:{value:Je(function(){Sn._needsAnswer||oa(Sn)})},_peerConnection:{value:go},_preferredAudioCodecs:{value:sn.audio},_preferredVideoCodecs:{value:sn.video},_shouldApplyDtx:{value:sn.audio.every(function(Tr){return"opus"!==Tr.codec})||sn.audio.some(function(Tr){return"opus"===Tr.codec&&Tr.dtx})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new an.Timeout(function(){xs.debug("ICE reconnect timed out"),Sn.close()},an.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new $e},_setCodecPreferences:{value:Ir&&vr&&sn.video[0]&&"h264"!==sn.video[0].codec.toLowerCase()?function(Tr){return Tr}:an.setCodecPreferences},_setSimulcast:{value:an.setSimulcast},_revertSimulcast:{value:an.revertSimulcast},_RTCIceCandidate:{value:an.RTCIceCandidate},_RTCPeerConnection:{value:an.RTCPeerConnection},_RTCSessionDescription:{value:an.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:tt}}),Ue.on("changed",Sn._onEncodingParametersChanged),go.addEventListener("connectionstatechange",Sn._handleConnectionStateChange.bind(Sn)),go.addEventListener("datachannel",Sn._handleDataChannelEvent.bind(Sn)),go.addEventListener("icecandidate",Sn._handleIceCandidateEvent.bind(Sn)),go.addEventListener("iceconnectionstatechange",Sn._handleIceConnectionStateChange.bind(Sn)),go.addEventListener("icegatheringstatechange",Sn._handleIceGatheringStateChange.bind(Sn)),go.addEventListener("signalingstatechange",Sn._handleSignalingStateChange.bind(Sn)),go.addEventListener("track",Sn._handleTrackEvent.bind(Sn));var To=Sn;return Sn.on("stateChanged",function Tr(co){"closed"===co&&(To.removeListener("stateChanged",Tr),To._dataChannels.forEach(function(ju,Ld){To.removeDataTrackSender(Ld)}))}),Sn}return F(Tn,$n),Tn.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},Tn.prototype.setEffectiveAdaptiveSimulcast=function(tt){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",tt),this._preferredVideoCodecs.forEach(function(Ue){"adaptiveSimulcast"in Ue&&(Ue.adaptiveSimulcast=tt)})},Object.defineProperty(Tn.prototype,"_shouldApplySimulcast",{get:function(){return!(!ir&&!wr)&&this._preferredVideoCodecs.some(function(Ue){return"vp8"===Ue.codec.toLowerCase()&&Ue.simulcast&&!1!==Ue.adaptiveSimulcast})},enumerable:!1,configurable:!0}),Object.defineProperty(Tn.prototype,"connectionState",{get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(Tn.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(Tn.prototype,"isApplicationSectionNegotiated",{get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&ve(this._peerConnection.localDescription.sdp,"application").length>0},enumerable:!1,configurable:!0}),Object.defineProperty(Tn.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var tt=this._preferredVideoCodecs.find(function(Ue){return"adaptiveSimulcast"in Ue});return tt&&!0===tt.adaptiveSimulcast},enumerable:!1,configurable:!0}),Tn.prototype._maybeUpdateEncodings=function(tt,Ue,sn){if(void 0===sn&&(sn=!1),"video"!==tt.kind||"ended"===tt.readyState)return!1;var an=Z.guessBrowser();return!!("safari"===an||"chrome"===an&&this._isAdaptiveSimulcastEnabled)&&(this._updateEncodings(tt,Ue,sn),!0)},Tn.prototype._updateEncodings=function(tt,Ue,sn){if(this._isChromeScreenShareTrack(tt)){var an=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];Ue.forEach(function(Tr,co){var ju=an[co];ju?(Tr.scaleResolutionDownBy=ju.scaleResolutionDownBy,sn&&delete Tr.active):(Tr.active=!1,delete Tr.scaleResolutionDownBy)})}else{var Sn=tt.getSettings(),xs=Sn.width*Sn.height,go=[{pixels:518400,maxActiveLayers:3},{pixels:129600,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}].find(function(Tr){return xs>=Tr.pixels}),To=Math.min(Ue.length,go.maxActiveLayers);Ue.forEach(function(Tr,co){co<To?(Tr.scaleResolutionDownBy=1<<To-co-1,sn&&(Tr.active=!0)):(Tr.active=!1,delete Tr.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",Ue.map(function(Tr,co){return"["+co+": "+Tr.active+", "+(Tr.scaleResolutionDownBy||0)+"]"}).join(", "))},Tn.prototype._addIceCandidate=function(tt){var Ue=this;return Promise.resolve().then(function(){return tt=new Ue._RTCIceCandidate(tt),Ue._peerConnection.addIceCandidate(tt)}).catch(function(sn){Ue._log.warn("Failed to add RTCIceCandidate "+(tt?'"'+tt.candidate+'"':"null")+": "+sn.message)})},Tn.prototype._addIceCandidates=function(tt){return Promise.all(tt.map(this._addIceCandidate,this)).then(function(){})},Tn.prototype._addOrUpdateTransceiver=function(tt){var Ue=this,sn=function vn($n,Tn){var tt={audio:$n._preferredAudioCodecs.map(function(Sn){return Sn.codec.toLowerCase()}),video:$n._preferredVideoCodecs.map(function(Sn){return Sn.codec.toLowerCase()})}[Tn],Ue=$n._recycledTransceivers[Tn],sn=tt.find(function(Sn){return $n._localCodecs.has(Sn)});if(!sn)return Ue.shift();var an=Ue.find(function(Sn){var ii=$n._remoteCodecMaps.get(Sn.mid);return ii&&ii.has(sn)});return an&&Ue.splice(Ue.indexOf(an),1),an}(this,tt.kind);if(sn&&sn.sender){var an=sn.sender.track?sn.sender.track.id:null;return an&&this._log.warn("Reusing transceiver: "+sn.mid+"] "+an+" => "+tt.id),this._replaceTrackPromises.set(sn,sn.sender.replaceTrack(tt).then(function(){sn.direction="sendrecv"},function(){}).finally(function(){Ue._replaceTrackPromises.delete(sn)})),sn}return this._peerConnection.addTransceiver(tt)},Tn.prototype._checkIceBox=function(tt){var Ue=ln(tt);if(!Ue)return Promise.resolve();var sn=this._remoteCandidates.setUfrag(Ue);return this._addIceCandidates(sn)},Tn.prototype._answer=function(tt){var Ue=this;return Promise.resolve().then(function(){return Ue._negotiationRole||(Ue._negotiationRole="answerer"),Ue._setRemoteDescription(tt)}).catch(function(){throw new nt}).then(function(){return Ue._peerConnection.createAnswer()}).then(function(sn){sn=Ir?new Ue._RTCSessionDescription({sdp:fe(sn.sdp),type:sn.type}):Zn(sn);var an=le(sn.sdp,["mslabel","label"]);if(Ue._shouldApplySimulcast){var Sn=an;an=Ue._setSimulcast(Sn,Ue._trackIdsToAttributes),an=Ue._revertSimulcast(an,Sn,tt.sdp)}return an=an.replace(/42e015/g,"42e01f"),Ue._setLocalDescription({type:sn.type,sdp:an})}).then(function(){return Ue._checkIceBox(tt)}).then(function(){return Ue._queuedDescription&&Ue._updateDescription(Ue._queuedDescription)}).then(function(){return Ue._queuedDescription=null,Ue._maybeReoffer(Ue._peerConnection.localDescription)}).catch(function(sn){var an=sn instanceof nt?sn:new rt;throw Ue._publishMediaWarning({message:"Failed to _answer",code:an.code,error:sn}),an})},Tn.prototype._close=function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0)},Tn.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},Tn.prototype._handleDataChannelEvent=function(tt){var Ue=this,sn=tt.channel,an=new ot(sn);this._dataTrackReceivers.add(an),sn.addEventListener("close",function(){Ue._dataTrackReceivers.delete(an)}),this.emit("trackAdded",an)},Tn.prototype._handleGlare=function(tt){var Ue=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return Ue._trackIdsToAttributes=new Map(Ue._appliedTrackIdsToAttributes),Ue._setLocalDescription({type:"rollback"})}).then(function(){return Ue._needsAnswer=!1,Ue._answer(tt)}).then(function(sn){return sn?Promise.resolve():Ue._offer()})},Tn.prototype._publishMediaWarning=function(tt){this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:tt.message,code:tt.code,context:JSON.stringify({error:tt.error.message,sdp:tt.sdp})}})},Tn.prototype._handleIceCandidateEvent=function(tt){tt.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(tt.candidate));var Ue={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};tt.candidate||(Ue.ice.complete=!0),this._isIceLite&&tt.candidate||(Ue.ice.revision=this._localCandidatesRevision++,this.emit("candidates",Ue))},Tn.prototype._handleIceConnectionStateChange=function(){var tt=this,Ue=this._peerConnection.iceConnectionState,sn=["connected","completed"].includes(Ue),an=this._log;an.debug('ICE connection state is "'+Ue+'"'),sn&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==Ue||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&sn&&an.debug("ICE reconnected"):(an.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===Ue?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){tt._iceConnectionMonitor.stop(),!tt._shouldRestartIce&&!tt._isRestartingIce&&(an.warn("ICE Connection Monitor detected inactivity"),tt._isIceConnectionInactive=!0,tt._initiateIceRestartBackoff(),tt.emit("iceConnectionStateChanged"),tt.emit("connectionStateChanged"))})):["disconnected","completed"].includes(Ue)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=Ue,this.emit("iceConnectionStateChanged")},Tn.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},Tn.prototype._handleIceGatheringStateChange=function(){var tt=this._peerConnection.iceGatheringState,Ue=this._log;Ue.debug('ICE gathering state is "'+tt+'"');var sn=this._iceGatheringTimeout;"gathering"===tt&&!this._didGenerateLocalCandidates&&!sn.isSet&&(Ue.debug("Starting ICE gathering timeout: "+sn.delay),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},Tn.prototype._handleSignalingStateChange=function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},Tn.prototype._handleTrackEvent=function(tt){var Ue=this,sn=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new Jt,this._trackMatcher.update(sn);var an=tt.track,Sn=this._trackMatcher.match(tt)||an.id,ii=new Pt(Sn,an);this._mediaTrackReceivers.forEach(function(mo){mo.track.id===ii.track.id&&Ue._mediaTrackReceivers.delete(mo)}),this._mediaTrackReceivers.add(ii),an.addEventListener("ended",function(){return Ue._mediaTrackReceivers.delete(ii)}),this.emit("trackAdded",ii)},Tn.prototype._initiateIceRestart=function(){if("closed"!==this._peerConnection.signalingState){var tt=this._log;tt.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var Ue=this._iceReconnectTimeout;Ue.isSet||(tt.debug("Starting ICE reconnect timeout: "+Ue.delay),this._iceReconnectTimeout.start()),this.offer().catch(function(Sn){tt.error("offer failed in _initiateIceRestart with: "+Sn.message)})}},Tn.prototype._initiateIceRestartBackoff=function(){var tt=this;"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return tt._initiateIceRestart()}))},Tn.prototype._maybeReoffer=function(tt){var Ue=this._shouldOffer;if(tt&&tt.sdp){var sn=this._peerConnection.getSenders().filter(function(Ns){return Ns.track});Ue=["audio","video"].reduce(function(Ns,xs){var go=ve(tt.sdp,xs,"(sendrecv|sendonly)"),To=sn.filter(Be.bind(null,xs));return Ns||go.length<To.length},Ue);var an=this._dataChannels.size>0,Sn=ve(tt.sdp,"application").length>0;Ue=Ue||an&&!Sn}return(Ue?this._offer():Promise.resolve()).then(function(){return Ue})},Tn.prototype._offer=function(){var tt=this,Ue=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,Ue.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return tt._peerConnection.createOffer(Ue)}).catch(function(sn){var an=new rt;throw tt._publishMediaWarning({message:"Failed to create offer",code:an.code,error:sn}),an}).then(function(sn){sn=Ir?new tt._RTCSessionDescription({sdp:fe(sn.sdp),type:sn.type}):Zn(sn);var an=le(sn.sdp,["mslabel","label"]);an=tt._peerConnection.remoteDescription?Ee(an,tt._peerConnection.remoteDescription.sdp):an;var Sn=tt._setCodecPreferences(an,tt._preferredAudioCodecs,tt._preferredVideoCodecs);return tt._shouldOffer=!1,tt._negotiationRole||(tt._negotiationRole="offerer"),tt._shouldApplySimulcast&&(tt._localDescriptionWithoutSimulcast={type:"offer",sdp:Sn},Sn=tt._setSimulcast(Sn,tt._trackIdsToAttributes)),tt._setLocalDescription({type:"offer",sdp:Sn})})},Tn.prototype._getMediaTrackSenderId=function(tt){var Ue=Array.from(this._rtpSenders.keys()).find(function(sn){return sn.track.id===tt});return Ue?Ue.id:tt},Tn.prototype._addOrRewriteLocalTrackIds=function(tt){var Ue=this,an=this._peerConnection.getTransceivers().filter(function(To){var Tr=To.sender;return!To.stopped&&Tr&&Tr.track}),Sn=an.filter(function(To){return To.mid}),ii=new Map(Sn.map(function(To){return[To.mid,Ue._getMediaTrackSenderId(To.sender.track.id)]})),mo=ye(tt.sdp,ii),Ns=an.filter(function(To){return!To.mid}),xs=new Map(["audio","video"].map(function(To){return[To,Ns.filter(function(Tr){return Tr.sender.track.kind===To}).map(function(Tr){return Ue._getMediaTrackSenderId(Tr.sender.track.id)})]})),go=ce(mo,ii,xs);return new this._RTCSessionDescription({sdp:go,type:tt.type})},Tn.prototype._rollbackAndApplyOffer=function(tt){var Ue=this;return this._setLocalDescription({type:"rollback"}).then(function(){return Ue._setLocalDescription(tt)})},Tn.prototype._setLocalDescription=function(tt){var Ue=this;return"rollback"!==tt.type&&this._shouldApplyDtx&&(tt=new this._RTCSessionDescription({sdp:Ae(tt.sdp),type:tt.type})),this._peerConnection.setLocalDescription(tt).catch(function(sn){Ue._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+tt.type+'" failed with the error "'+sn.message+'".',sn);var an=new rt,Sn={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+tt.type+'" failed',code:an.code,error:sn};throw tt.sdp&&(Ue._log.warn("The SDP was "+tt.sdp),Sn.sdp=tt.sdp),Ue._publishMediaWarning(Sn),an}).then(function(){"rollback"!==tt.type&&(Ue._localDescription=Ue._addOrRewriteLocalTrackIds(tt),Ue._shouldApplyDtx&&(Ue._localDescription=new Ue._RTCSessionDescription({sdp:Ae(Ue._localDescription.sdp,[]),type:Ue._localDescription.type})),Ue._localCandidates=[],"offer"===tt.type?Ue._descriptionRevision++:"answer"===tt.type&&(Ue._lastStableDescriptionRevision=Ue._descriptionRevision,yo(Ue)),Ue._localUfrag=ln(tt),Ue.emit("description",Ue.getState()))})},Tn.prototype._setRemoteDescription=function(tt){var Ue=this;return tt.sdp&&(tt.sdp=this._setCodecPreferences(tt.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),tt.sdp=this._shouldApplyDtx?Ae(tt.sdp):Ae(tt.sdp,[]),Ir&&(tt.sdp=function pt($n){return $n.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}(tt.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(tt.sdp))),tt=new this._RTCSessionDescription(tt),Promise.resolve().then(function(){if("answer"===tt.type&&Ue._localDescriptionWithoutSimulcast){var sn=Ue._preferredVideoCodecs.find(function(ii){return"adaptiveSimulcast"in ii}),Sn=Ue._revertSimulcast(Ue._localDescription.sdp,Ue._localDescriptionWithoutSimulcast.sdp,tt.sdp,!!sn&&!1===sn.adaptiveSimulcast);if(Ue._localDescriptionWithoutSimulcast=null,Sn!==Ue._localDescription.sdp)return Ue._rollbackAndApplyOffer({type:Ue._localDescription.type,sdp:Sn})}}).then(function(){return Ue._peerConnection.setRemoteDescription(tt)}).then(function(){"answer"===tt.type&&(Ue._isRestartingIce&&(Ue._log.debug("An ICE restart was in-progress and is now completed"),Ue._isRestartingIce=!1),yo(Ue))},function(sn){throw Ue._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+tt.type+'" failed with the error "'+sn.message+'".',sn),tt.sdp&&Ue._log.warn("The SDP was "+tt.sdp),sn})},Tn.prototype._updateDescription=function(tt){var Ue=this;switch(tt.type){case"answer":case"pranswer":if(tt.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=tt.revision;break;case"close":return this._close();case"create-offer":return tt.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=tt,Promise.resolve()):(this._descriptionRevision=tt.revision,this._offer());case"offer":return tt.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=tt,Promise.resolve()):(this._descriptionRevision=tt.revision,this._handleGlare(tt)):(this._descriptionRevision=tt.revision,this._answer(tt).then(function(){}))}var sn=tt.revision;return Promise.resolve().then(function(){return Ue._setRemoteDescription(tt)}).catch(function(an){var Sn=new nt;throw Ue._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+tt.type+'" failed',code:Sn.code,error:an,sdp:tt.sdp}),Sn}).then(function(){return Ue._lastStableDescriptionRevision=sn,Ue._needsAnswer=!1,Ue._checkIceBox(tt)}).then(function(){return Ue._queuedDescription&&Ue._updateDescription(Ue._queuedDescription)}).then(function(){return Ue._queuedDescription=null,Ue._maybeReoffer(Ue._peerConnection.localDescription).then(function(){})})},Tn.prototype._updateIce=function(tt){var Ue=this._remoteCandidates.update(tt);return this._addIceCandidates(Ue)},Tn.prototype.addDataTrackSender=function(tt){if(!this._dataChannels.has(tt))try{var Ue={ordered:tt.ordered};null!==tt.maxPacketLifeTime&&(Ue.maxPacketLifeTime=tt.maxPacketLifeTime),null!==tt.maxRetransmits&&(Ue.maxRetransmits=tt.maxRetransmits);var sn=this._peerConnection.createDataChannel(tt.id,Ue);tt.addDataChannel(sn),this._dataChannels.set(tt,sn)}catch(an){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+tt.id+'": '+an.message)}},Tn.prototype._handleQueuedPublisherHints=function(){var tt=this;"stable"===this._peerConnection.signalingState&&this._mediaTrackSenderToPublisherHints.forEach(function(Ue,sn){var an=Ue.deferred,Sn=Ue.encodings;tt._mediaTrackSenderToPublisherHints.delete(sn),tt._setPublisherHint(sn,Sn).then(function(ii){return an.resolve(ii)}).catch(function(ii){return an.reject(ii)})})},Tn.prototype._setPublisherHint=function(tt,Ue){var sn=this;if(Ir)return Promise.resolve("COULD_NOT_APPLY_HINT");this._mediaTrackSenderToPublisherHints.has(tt)&&(this._mediaTrackSenderToPublisherHints.get(tt).deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(tt));var Sn=this._rtpSenders.get(tt);if(!Sn)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if("closed"===this._peerConnection.signalingState)return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if("stable"!==this._peerConnection.signalingState){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var ii=Ve();return this._mediaTrackSenderToPublisherHints.set(tt,{deferred:ii,encodings:Ue}),ii.promise}var mo=Sn.getParameters();return null!==Ue&&Ue.forEach(function(Ns){var xs=Ns.enabled,go=Ns.layer_index;mo.encodings.length>go?(sn._log.debug("layer:"+go+", active:"+mo.encodings[go].active+" => "+xs),mo.encodings[go].active=xs):sn._log.warn("invalid layer:"+go+", active:"+xs)}),this._maybeUpdateEncodings(Sn.track,mo.encodings,null===Ue),Sn.setParameters(mo).then(function(){return"OK"}).catch(function(Ns){return sn._log.error("Failed to apply publisher hints:",Ns),"COULD_NOT_APPLY_HINT"})},Tn.prototype.addMediaTrackSender=function(tt){var Ue=this;if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has(tt)){var an=this._addOrUpdateTransceiver(tt.track).sender;tt.addSender(an,function(Sn){return Ue._setPublisherHint(tt,Sn)}),this._rtpNewSenders.add(an),this._rtpSenders.set(tt,an)}},Tn.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},Tn.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},Tn.prototype.getState=function(){if(!this._localDescription)return null;var Ue={type:this._localDescription.type,revision:"answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision};return this._localDescription.sdp&&(Ue.sdp=this._localDescription.sdp),{description:Ue,id:this.id}},Tn.prototype.offer=function(){var tt=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(Ue){return tt.transition("updating",Ue),(tt._needsAnswer||tt._isRestartingIce?Promise.resolve():tt._offer()).then(function(){tt.tryTransition("open",Ue)},function(an){throw tt.tryTransition("open",Ue),an})})},Tn.prototype.removeDataTrackSender=function(tt){var Ue=this._dataChannels.get(tt);Ue&&(tt.removeDataChannel(Ue),this._dataChannels.delete(tt),Ue.close())},Tn.prototype.removeMediaTrackSender=function(tt){var Ue=this._rtpSenders.get(tt);Ue&&("closed"!==this._peerConnection.signalingState&&this._peerConnection.removeTrack(Ue),tt.removeSender(Ue),this._mediaTrackSenderToPublisherHints.has(tt)&&(this._mediaTrackSenderToPublisherHints.get(tt).deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(tt)),this._rtpNewSenders.delete(Ue),this._rtpSenders.delete(tt))},Tn.prototype.setConfiguration=function(tt){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(Xe(tt))},Tn.prototype.setIceReconnectTimeout=function(tt){return this._iceReconnectTimeout.setDelay(tt),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},Tn.prototype.update=function(tt){var Ue=this;return this.bracket("updating",function(sn){if("closed"===Ue.state)return Promise.resolve();Ue.transition("updating",sn);var an=[];return tt.ice&&an.push(Ue._updateIce(tt.ice)),tt.description&&an.push(Ue._updateDescription(tt.description)),Promise.all(an).then(function(){Ue.tryTransition("open",sn)},function(Sn){throw Ue.tryTransition("open",sn),Sn})})},Tn.prototype.getStats=function(){var tt=this;return U(this._peerConnection).then(function(Ue){return function Gt($n,Tn){return Object.assign(Tn,{remoteAudioTrackStats:Tn.remoteAudioTrackStats.map(function(tt){return bt($n,tt)}),remoteVideoTrackStats:Tn.remoteVideoTrackStats.map(function(tt){return bt($n,tt)}),localAudioTrackStats:Tn.localAudioTrackStats.map(function(tt){return ra($n,tt)}),localVideoTrackStats:Tn.localVideoTrackStats.map(function(tt){return ra($n,tt)})})}(tt,Ue)})},Tn}(qt);function ra($n,Tn){var tt=$n._getMediaTrackSenderId(Tn.trackId);return Object.assign(Tn,{trackId:tt})}function bt($n,Tn){var tt=oe([],re($n._mediaTrackReceivers)).find(function(sn){return sn.track.id===Tn.trackId});return Object.assign(Tn,{trackId:tt?tt.id:null})}function ln($n){if($n.sdp){var Tn=$n.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(Tn)return Tn[1]}return null}function Xe($n){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},$n)}function Be($n,Tn){var tt=Tn.track;return tt&&tt.kind===$n&&"ended"!==tt.readyState}function yo($n){(function ia($n){$n._recycledTransceivers.audio=[],$n._recycledTransceivers.video=[],$n._peerConnection.getTransceivers().forEach(function(Tn){(function Fn($n,Tn){return!$n.stopped&&!Tn._replaceTrackPromises.has($n)&&["inactive","recvonly"].includes($n.direction)})(Tn,$n)&&$n._recycledTransceivers[Tn.receiver.track.kind].push(Tn)})})($n),function no($n){var Tn=$n._peerConnection.localDescription;!Tn||!Tn.sdp||ve(Tn.sdp).forEach(function(tt){ke(tt).forEach(function(sn,an){return $n._localCodecs.add(an)})})}($n),function Ho($n){var Tn=$n._peerConnection.remoteDescription;!Tn||!Tn.sdp||ve(Tn.sdp).forEach(function(tt){var Ue=tt.match(/^a=mid:(.+)$/m);if(Ue&&Ue[1]){var sn=Ue[1],an=ke(tt);$n._remoteCodecMaps.set(sn,an)}})}($n),oa($n).then(function(){$n._handleQueuedPublisherHints()})}function oa($n){var Tn=$n._encodingParameters,sn=new Map([["audio",Tn.maxAudioBitrate],["video",Tn.maxVideoBitrate]]),an=[];return $n._peerConnection.getSenders().filter(function(Sn){return Sn.track}).forEach(function(Sn){var ii=sn.get(Sn.track.kind),mo=Sn.getParameters();null===ii||0===ii?function fo($n){Array.isArray($n.encodings)&&$n.encodings.forEach(function(Tn){return delete Tn.maxBitrate})}(mo):$n._isChromeScreenShareTrack(Sn.track)?$n._log.warn("Not setting maxBitrate for "+Sn.track.kind+" Track "+Sn.track.id+" because it appears to be screen share track: "+Sn.track.label):function Rc($n,Tn){Ir?$n.encodings=[{maxBitrate:Tn}]:$n.encodings.forEach(function(tt){tt.maxBitrate=Tn})}(mo,ii),!Ir&&$n._enableDscp&&mo.encodings.length>0&&(mo.encodings[0].networkPriority="high");var Ns=$n._rtpNewSenders.has(Sn);$n._maybeUpdateEncodings(Sn.track,mo.encodings,Ns),$n._rtpNewSenders.delete(Sn);var xs=Sn.setParameters(mo).catch(function(go){$n._log.warn("Error while setting encodings parameters for "+Sn.track.kind+" Track "+Sn.track.id+": "+(go.message||go.name))});an.push(xs)}),Promise.all(an)}we.exports=Mo},6603:function(we,Pe,$){"use strict";var ve,F=this&&this.__extends||(ve=function(le,he){return(ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,je){Oe.__proto__=je}||function(Oe,je){for(var Fe in je)Object.prototype.hasOwnProperty.call(je,Fe)&&(Oe[Fe]=je[Fe])})(le,he)},function(le,he){if("function"!=typeof he&&null!==he)throw new TypeError("Class extends value "+String(he)+" is not a constructor or null");function Oe(){this.constructor=le}ve(le,he),le.prototype=null===he?Object.create(he):(Oe.prototype=he.prototype,new Oe)}),re=this&&this.__read||function(ve,le){var he="function"==typeof Symbol&&ve[Symbol.iterator];if(!he)return ve;var je,He,Oe=he.call(ve),Fe=[];try{for(;(void 0===le||le-- >0)&&!(je=Oe.next()).done;)Fe.push(je.value)}catch(rt){He={error:rt}}finally{try{je&&!je.done&&(he=Oe.return)&&he.call(Oe)}finally{if(He)throw He.error}}return Fe},oe=this&&this.__spreadArray||function(ve,le){for(var he=0,Oe=le.length,je=ve.length;he<Oe;he++,je++)ve[je]=le[he];return ve},H=$(7627).guessBrowser,j=$(1058),M=$(808),P=$(7772),x=$(9739),U=$(8380).MediaConnectionError,Z="firefox"===H(),ae=function(ve){function le(he,Oe,je){var Fe=ve.call(this)||this,He=(je=Object.assign({audioContextFactory:Z?$(7708):null,PeerConnectionV2:j},je)).audioContextFactory?je.audioContextFactory.getOrCreate(Fe):null,rt=He?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(Fe,{_audioContextFactory:{value:je.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:x.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:He?new M(ue(He)):null},_encodingParameters:{value:he},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:rt},_peerConnections:{value:new Map},_preferredCodecs:{value:Oe},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:je.PeerConnectionV2}}),Fe}return F(le,ve),le.prototype.setEffectiveAdaptiveSimulcast=function(he){this._peerConnections.forEach(function(Oe){return Oe.setEffectiveAdaptiveSimulcast(he)}),this._preferredCodecs.video.forEach(function(Oe){"adaptiveSimulcast"in Oe&&(Oe.adaptiveSimulcast=he)})},Object.defineProperty(le.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),le.prototype._closeAbsentPeerConnections=function(he){var Oe=new Set(he.map(function(je){return je.id}));return this._peerConnections.forEach(function(je){Oe.has(je.id)||je._close()}),this},le.prototype._getConfiguration=function(){return this._configurationDeferred.promise},le.prototype._getOrCreate=function(he,Oe){var je=this,Fe=this,He=this._peerConnections.get(he);if(!He){var rt=this._PeerConnectionV2,nt=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},Oe);try{He=new rt(he,this._encodingParameters,this._preferredCodecs,nt)}catch{throw new U}this._peerConnections.set(He.id,He),He.on("candidates",this.queue.bind(this,"candidates")),He.on("description",this.queue.bind(this,"description")),He.on("trackAdded",this.queue.bind(this,"trackAdded")),He.on("stateChanged",function Ke(Nt){"closed"===Nt&&(He.removeListener("stateChanged",Ke),Fe._dataTrackSenders.forEach(function(Ht){return He.removeDataTrackSender(Ht)}),Fe._mediaTrackSenders.forEach(function(Ht){return He.removeMediaTrackSender(Ht)}),Fe._peerConnections.delete(He.id),Fe._closedPeerConnectionIds.add(He.id),Ee(Fe),Ae(Fe))}),He.on("connectionStateChanged",function(){return Ee(je)}),He.on("iceConnectionStateChanged",function(){return Ae(je)}),this._dataTrackSenders.forEach(He.addDataTrackSender,He),this._mediaTrackSenders.forEach(He.addMediaTrackSender,He),Ae(this)}return He},le.prototype.close=function(){return this._peerConnections.forEach(function(he){he.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),Ae(this),this},le.prototype.createAndOffer=function(){var he=this;return this._getConfiguration().then(function(Oe){var je;do{je=x.makeUUID()}while(he._peerConnections.has(je));return he._getOrCreate(je,Oe)}).then(function(Oe){return Oe.offer()}).then(function(){return he})},le.prototype.getTrackReceivers=function(){return x.flatMap(this._peerConnections,function(he){return he.getTrackReceivers()})},le.prototype.getStates=function(){var he=[];return this._peerConnections.forEach(function(Oe){var je=Oe.getState();je&&he.push(je)}),he},le.prototype.setConfiguration=function(he){return this._configuration&&(this._configurationDeferred=x.defer(),this._peerConnections.forEach(function(Oe){Oe.setConfiguration(he)})),this._configuration=he,this._configurationDeferred.resolve(he),this},le.prototype.setIceReconnectTimeout=function(he){return null===this._sessionTimeout&&(this._peerConnections.forEach(function(Oe){Oe.setIceReconnectTimeout(he)}),this._sessionTimeout=he),this},le.prototype.setTrackSenders=function(he){var Oe=new Set(he.filter(function(He){return"data"===He.kind})),je=new Set(he.filter(function(He){return He&&("audio"===He.kind||"video"===He.kind)})),Fe=function Y(ve,le,he){return{data:ee(ve,le),media:K(ve,he)}}(this,Oe,je);return this._dataTrackSenders=Oe,this._mediaTrackSenders=je,function pe(ve,le){(le.data.add.size||le.data.remove.size||le.media.add.size||le.media.remove.size)&&ve._peerConnections.forEach(function(he){le.data.remove.forEach(he.removeDataTrackSender,he),le.media.remove.forEach(he.removeMediaTrackSender,he),le.data.add.forEach(he.addDataTrackSender,he),le.media.add.forEach(he.addMediaTrackSender,he),(le.media.add.size||le.media.remove.size||le.data.add.size&&!he.isApplicationSectionNegotiated)&&he.offer()})}(this,Fe),this},le.prototype.update=function(he,Oe){var je=this;return void 0===Oe&&(Oe=!1),Oe&&this._closeAbsentPeerConnections(he),this._getConfiguration().then(function(Fe){return Promise.all(he.map(function(He){return je._closedPeerConnectionIds.has(He.id)?null:je._getOrCreate(He.id,Fe).update(He)}))}).then(function(){return je})},le.prototype.getStats=function(){var he=Array.from(this._peerConnections.values());return Promise.all(he.map(function(Oe){return Oe.getStats().then(function(je){return[Oe.id,je]})})).then(function(Oe){return new Map(Oe)})},le}(P);function ue(ve){return ve.createMediaStreamDestination().stream.getAudioTracks()[0]}function ee(ve,le){return{add:x.difference(le,ve._dataTrackSenders),remove:x.difference(ve._dataTrackSenders,le)}}function K(ve,le){return{add:x.difference(le,ve._mediaTrackSenders),remove:x.difference(ve._mediaTrackSenders,le)}}var ye,ce={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3};function fe(ve){return ve.length?(ye=ye||function ke(){return Object.keys(ce).reduce(function(ve,le){var he;return Object.assign(ve,((he={})[ce[le]]=le,he))},{})}(),ve.reduce(function(le,he){return ye[Math.max(ce[le],ce[he])]})):"new"}function Ae(ve){ve._lastIceConnectionState=ve.iceConnectionState,ve._iceConnectionState=fe(oe([],re(ve._peerConnections.values())).map(function(le){return le.iceConnectionState})),ve.iceConnectionState!==ve._lastIceConnectionState&&ve.emit("iceConnectionStateChanged")}function Ee(ve){ve._lastConnectionState=ve.connectionState,ve._connectionState=fe(oe([],re(ve._peerConnections.values())).map(function(le){return le.connectionState})),ve.connectionState!==ve._lastConnectionState&&ve.emit("connectionStateChanged")}we.exports=ae},8069:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(4071),oe=1,H=function(j){function M(P,x){var U=j.call(this,P,"publisher_hints",x)||this;return U.on("ready",function(Z){U._log.debug("publisher_hints transport ready:",Z),Z.on("message",function(ae){"publisher_hints"===(U._log.debug("Incoming: ",ae),ae.type)?ae.publisher&&ae.publisher.hints&&ae.publisher.id&&U._processPublisherHints(ae.publisher.hints,ae.publisher.id):U._log.warn("Unknown message type: ",ae.type)})}),U}return F(M,j),M.prototype.sendTrackReplaced=function(P){if(this._transport){var U={type:"client_reset",track:P.trackSid,id:oe++};this._log.debug("Outgoing: ",U),this._transport.publish(U)}},M.prototype.sendHintResponse=function(P){if(this._transport){var Z={type:"publisher_hints",id:P.id,hints:P.hints};this._log.debug("Outgoing: ",Z),this._transport.publish(Z)}},M.prototype._processPublisherHints=function(P,x){try{this.emit("updated",P,x)}catch(U){this._log.error("error processing hints:",U)}},M}(re);we.exports=H},8930:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(){var M=H.call(this)||this;return Object.defineProperties(M,{_revision:{value:1,writable:!0}}),M}return F(j,H),j.prototype.update=function(M){return M.revision<this._revision?this:(this._revision=M.revision,this.enable(M.is_recording))},j}($(9987));we.exports=oe},1118:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(2184),oe=$(467),H=function(j){function M(P,x,U,Z,ae,ue){var pe=j.call(this,P.sid,P.identity)||this;return ue=Object.assign({RemoteTrackPublicationV2:oe},ue),Object.defineProperties(pe,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:ue.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:x},updateSubscriberTrackPriority:{value:function(ee,Y){return U(ee,Y)}},updateTrackRenderHint:{value:function(ee,Y){return Z(ee,Y)}},clearTrackHint:{value:function(ee){return ae(ee)}},revision:{enumerable:!0,get:function(){return this._revision}}}),pe.update(P)}return F(M,j),M.prototype._getOrCreateTrack=function(P){var x=this._RemoteTrackPublicationV2,U=this.tracks.get(P.sid);return U||(U=new x(P,this._getInitialTrackSwitchOffState(P.sid)),this.addTrack(U)),U},M.prototype.update=function(P){var x=this;if(null!==this.revision&&P.revision<=this.revision)return this;this._revision=P.revision;var U=new Set;switch(P.tracks.forEach(function(Z){var ae=x._getOrCreateTrack(Z);ae.update(Z),U.add(ae)}),this.tracks.forEach(function(Z){U.has(Z)||x.removeTrack(Z)}),P.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this},M}(re);we.exports=H},467:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M.sid,M.name,M.kind,M.enabled,M.priority,P)||this}return F(j,H),j.prototype.update=function(M){return this.enable(M.enabled),this.setPriority(M.priority),this},j}($(8956));we.exports=oe},7818:function(we,Pe,$){"use strict";var x,F=this&&this.__extends||(x=function(U,Z){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,ue){ae.__proto__=ue}||function(ae,ue){for(var pe in ue)Object.prototype.hasOwnProperty.call(ue,pe)&&(ae[pe]=ue[pe])})(U,Z)},function(U,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");function ae(){this.constructor=U}x(U,Z),U.prototype=null===Z?Object.create(Z):(ae.prototype=Z.prototype,new ae)}),re=$(4071),oe=$(6543),H=$(9739).isDeepEqual,M=1,P=function(x){function U(Z,ae){var ue=x.call(this,Z,"render_hints",ae)||this;return Object.defineProperties(ue,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new oe(function(){ue._sendAllHints(),ue._responseTimer.setDelay(2*ue._responseTimer.delay)},2e3,!1)}}),ue.on("ready",function(pe){pe.on("message",function(ee){"render_hints"===(ue._log.debug("Incoming: ",ee),ee.type)?ue._processHintResults(ee&&ee.subscriber&&ee.subscriber.hints||[]):ue._log.warn("Unknown message type: ",ee.type)}),ue._sendAllHints()}),ue}return F(U,x),U.prototype._sendAllHints=function(){var Z=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(ae){var ue=Z._trackSidsToRenderHints.get(ae);ue.renderDimensions&&(ue.isDimensionDirty=!0),"enabled"in ue&&(ue.isEnabledDirty=!0)}),this._sendHints()},U.prototype._processHintResults=function(Z){var ae=this;this._responseTimer.clear(),this._responseTimer.setDelay(2e3),Z.forEach(function(ue){"OK"!==ue.result&&ae._log.debug("Server error processing hint:",ue)}),this._sendHints()},U.prototype._sendHints=function(){var Z=this;if(this._transport&&!this._responseTimer.isSet){var ae=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(pe){var ee=Z._trackSidsToRenderHints.get(pe);if(ee.isEnabledDirty||ee.isDimensionDirty){var Y={track:pe};ee.isEnabledDirty&&(Y.enabled=ee.enabled,ee.isEnabledDirty=!1),ee.isDimensionDirty&&(Y.render_dimensions=ee.renderDimensions,ee.isDimensionDirty=!1),ae.push(Y)}}),ae.length>0){var ue={type:"render_hints",subscriber:{id:M++,hints:ae}};this._log.debug("Outgoing: ",ue),this._transport.publish(ue),this._responseTimer.start()}}},U.prototype.setTrackHint=function(Z,ae){var ue=this._trackSidsToRenderHints.get(Z)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in ae&&ue.enabled!==ae.enabled&&(ue.enabled=!!ae.enabled,ue.isEnabledDirty=!0),ae.renderDimensions&&!H(ae.renderDimensions,ue.renderDimensions)&&(ue.renderDimensions=ae.renderDimensions,ue.isDimensionDirty=!0),this._trackSidsToRenderHints.set(Z,ue),this._sendHints()},U.prototype.clearTrackHint=function(Z){this._trackSidsToRenderHints.delete(Z)},U}(re);we.exports=P},2112:function(we,Pe,$){"use strict";var Ve,F=this&&this.__extends||(Ve=function($e,De){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,Pt){ot.__proto__=Pt}||function(ot,Pt){for(var qt in Pt)Object.prototype.hasOwnProperty.call(Pt,qt)&&(ot[qt]=Pt[qt])})($e,De)},function($e,De){if("function"!=typeof De&&null!==De)throw new TypeError("Class extends value "+String(De)+" is not a constructor or null");function ot(){this.constructor=$e}Ve($e,De),$e.prototype=null===De?Object.create(De):(ot.prototype=De.prototype,new ot)}),re=this&&this.__read||function(Ve,$e){var De="function"==typeof Symbol&&Ve[Symbol.iterator];if(!De)return Ve;var Pt,Ot,ot=De.call(Ve),qt=[];try{for(;(void 0===$e||$e-- >0)&&!(Pt=ot.next()).done;)qt.push(Pt.value)}catch(Jt){Ot={error:Jt}}finally{try{Pt&&!Pt.done&&(De=ot.return)&&De.call(ot)}finally{if(Ot)throw Ot.error}}return qt},oe=$(2314),H=$(9056),j=$(5775),M=$(8930),P=$(8343),x=$(1118),U=$(7805),Z=$(8004),ae=$(5210),ue=$(7818),pe=$(8069),ee=$(9739),Y=ee.constants.DEFAULT_SESSION_TIMEOUT_SEC,K=ee.createBandwidthProfilePayload,ce=ee.defer,ye=ee.difference,ke=ee.filterObject,fe=ee.flatMap,Ae=ee.oncePerTick,Ee=$(8218),ve=$(8380).createTwilioError,he=function(Ve){function $e(De,ot,Pt,qt,Ot){var Jt=this;ot.options=Object.assign({session_timeout:Y},ot.options),Ot=Object.assign({DominantSpeakerSignaling:oe,NetworkQualityMonitor:H,NetworkQualitySignaling:j,RecordingSignaling:M,RemoteParticipantV2:x,TrackPrioritySignaling:Z,TrackSwitchOffSignaling:ae,bandwidthProfile:null,sessionTimeout:1e3*ot.options.session_timeout,statsPublishIntervalMs:1e4},Ot),De.setBandwidthProfile(Ot.bandwidthProfile),qt.setIceReconnectTimeout(Ot.sessionTimeout);var Zn=function(Dr){return Jt._getTrackReceiver(Dr)},Pn=(Jt=Ve.call(this,De,ot.sid,ot.name,Ot)||this)._log;return Object.defineProperties(Jt,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:Ot.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:De.bandwidthProfileRevision,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:De.networkQualityConfiguration},_peerConnectionManager:{value:qt},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:Ot.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new Ot.DominantSpeakerSignaling(Zn,{log:Pn})},_networkQualitySignaling:{value:new Ot.NetworkQualitySignaling(Zn,De.networkQualityConfiguration,{log:Pn})},_renderHintsSignaling:{value:new ue(Zn,{log:Pn})},_publisherHintsSignaling:{value:new pe(Zn,{log:Pn})},_trackPrioritySignaling:{value:new Ot.TrackPrioritySignaling(Zn,{log:Pn})},_trackSwitchOffSignaling:{value:new Ot.TrackSwitchOffSignaling(Zn,{log:Pn})},_pendingSwitchOffStates:{value:new Map},_transport:{value:Pt},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:ot.options.media_region||null}}),Jt._initTrackSwitchOffSignaling(),Jt._initDominantSpeakerSignaling(),Jt._initNetworkQualityMonitorSignaling(),Jt._initPublisherHintSignaling(),function He(Ve,$e){var De=Ae(function(){Ve._publishNewLocalParticipantState()}),ot=Ae(function(){var Pt=fe($e.tracks,function(qt){return qt.trackTransceiver});Ve._peerConnectionManager.setTrackSenders(Pt)});$e.on("trackAdded",ot),$e.on("trackRemoved",ot),$e.on("updated",De),Ve.on("stateChanged",function Pt(qt){"disconnected"===qt&&($e.removeListener("trackAdded",ot),$e.removeListener("trackRemoved",ot),$e.removeListener("updated",De),Ve.removeListener("stateChanged",Pt),$e.disconnect())}),Ve.on("signalingConnectionStateChanged",function(){var Pt=Ve.localParticipant,Ot=Pt.identity,Jt=Pt.sid;switch(Ve.signalingConnectionState){case"connected":Pt.connect(Jt,Ot);break;case"reconnecting":Pt.reconnecting()}})}(Jt,De),function rt(Ve,$e){$e.on("description",function(ot){Ve._publishPeerConnectionState(ot)}),$e.dequeue("description"),$e.on("candidates",function(ot){Ve._publishPeerConnectionState(ot)}),$e.dequeue("candidates"),$e.on("trackAdded",Ve._addTrackReceiver.bind(Ve)),$e.dequeue("trackAdded"),$e.getTrackReceivers().forEach(Ve._addTrackReceiver,Ve),$e.on("connectionStateChanged",function(){Ve.emit("connectionStateChanged")}),$e.on("iceConnectionStateChanged",function(){Ve.emit("iceConnectionStateChanged"),"failed"===Ve.iceConnectionState&&(null!==Ve.localParticipant.networkQualityLevel&&Ve.localParticipant.setNetworkQualityLevel(0),Ve.participants.forEach(function(De){null!==De.networkQualityLevel&&De.setNetworkQualityLevel(0)}))})}(Jt,qt),function nt(Ve,$e){$e.on("message",Ve._update.bind(Ve)),$e.on("stateChanged",function De(ot,Pt){"disconnected"===ot&&("disconnected"!==Ve.state&&Ve._disconnect(Pt),$e.removeListener("stateChanged",De)),Ve.emit("signalingConnectionStateChanged")})}(Jt,Pt),function Ke(Ve,$e,De){var ot=new Map,Pt=!1,qt=setInterval(function(){Ve.getStats().then(function(Ot){Pt=!Pt,Ot.forEach(function(Jt,Zn){var Pn=new U(Zn,Jt,!0);$e.publishEvent("quality","stats-report","info",{audioTrackStats:Pn.remoteAudioTrackStats.map(function(Ir,wr){return Et(Ir,Jt.remoteAudioTrackStats[wr],ot)}),localAudioTrackStats:Pn.localAudioTrackStats.map(function(Ir,wr){return Ht(Ir,Jt.localAudioTrackStats[wr],ot)}),localVideoTrackStats:Pn.localVideoTrackStats.map(function(Ir,wr){return Ht(Ir,Jt.localVideoTrackStats[wr],ot)}),peerConnectionId:Pn.peerConnectionId,videoTrackStats:Pn.remoteVideoTrackStats.map(function(Ir,wr){return Et(Ir,Jt.remoteVideoTrackStats[wr],ot)})});var Dr=fe(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(Ir){return Pn[Ir].map(function(wr){return wr.trackSid+"+"+wr.ssrc})});if(ye(Array.from(ot.keys()),Dr).forEach(function(Ir){return ot.delete(Ir)}),Pt){var ir=function Je(Ve,$e){return(Ve=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:$e,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},ke(Ve||{},null))).localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},ke(Ve.localCandidate||{},null)),Ve.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},ke(Ve.remoteCandidate||{},null)),Ve}(Jt.activeIceCandidatePair,Pn.peerConnectionId);$e.publishEvent("quality","active-ice-candidate-pair","info",ir)}})},function(){})},De);Ve.on("stateChanged",function Ot(Jt){"disconnected"===Jt&&(clearInterval(qt),Ve.removeListener("stateChanged",Ot))})}(Jt,Pt,Ot.statsPublishIntervalMs),Jt._update(ot),Jt._peerConnectionManager.setEffectiveAdaptiveSimulcast(Jt._publisherHintsSignaling.isSetup),Jt}return F($e,Ve),Object.defineProperty($e.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"signalingConnectionState",{get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),$e.prototype._deleteTrackReceiverDeferred=function(De){return this._trackReceiverDeferreds.delete(De)},$e.prototype._getOrCreateTrackReceiverDeferred=function(De){var ot=this._trackReceiverDeferreds.get(De)||ce(),qt=this._peerConnectionManager.getTrackReceivers().find(function(Ot){return Ot.id===De&&"ended"!==Ot.readyState});return qt?ot.resolve(qt):this._trackReceiverDeferreds.set(De,ot),ot},$e.prototype._addTrackReceiver=function(De){return this._getOrCreateTrackReceiverDeferred(De.id).resolve(De),this},$e.prototype._disconnect=function(De){var ot=Ve.prototype._disconnect.call(this,De);return ot&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(Pt){Pt.publishFailed(De||new Error("LocalParticipant disconnected"))}),ot},$e.prototype._getTrackReceiver=function(De){var ot=this;return this._getOrCreateTrackReceiverDeferred(De).promise.then(function(Pt){return ot._deleteTrackReceiverDeferred(De),Pt})},$e.prototype._getInitialTrackSwitchOffState=function(De){var ot=this._pendingSwitchOffStates.get(De)||!1;return this._pendingSwitchOffStates.delete(De),ot&&this._log.warn("["+De+"] was initially switched off! "),ot},$e.prototype._getTrackSidsToTrackSignalings=function(){var De=fe(this.participants,function(ot){return Array.from(ot.tracks)});return new Map(De)},$e.prototype._getOrCreateRemoteParticipant=function(De){var ot=this,Pt=this._RemoteParticipantV2,qt=this.participants.get(De.sid),Ot=this;return qt||((qt=new Pt(De,function(Jt){return ot._getInitialTrackSwitchOffState(Jt)},function(Jt,Zn){return ot._trackPrioritySignaling.sendTrackPriorityUpdate(Jt,"subscribe",Zn)},function(Jt,Zn){return ot._renderHintsSignaling.setTrackHint(Jt,Zn)},function(Jt){return ot._renderHintsSignaling.clearTrackHint(Jt)})).on("stateChanged",function Jt(Zn){"disconnected"===Zn&&(qt.removeListener("stateChanged",Jt),Ot.participants.delete(qt.sid),Ot._disconnectedParticipantRevisions.set(qt.sid,qt.revision))}),this.connectParticipant(qt)),qt},$e.prototype._getState=function(){return{participant:this.localParticipant.getState()}},$e.prototype._maybeAddBandwidthProfile=function(De){var ot=this.localParticipant,Pt=ot.bandwidthProfile,qt=ot.bandwidthProfileRevision;return Pt&&this._lastBandwidthProfileRevision<qt?(this._lastBandwidthProfileRevision=qt,Object.assign({bandwidth_profile:K(Pt)},De)):De},$e.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},$e.prototype._publishPeerConnectionState=function(De){this._transport.publish(Object.assign({peer_connections:[De]},this._getState()))},$e.prototype._update=function(De){var ot=this;if(De.subscribed&&De.subscribed.revision>this._subscribedRevision){this._subscribedRevision=De.subscribed.revision,De.subscribed.tracks.forEach(function(Ot){Ot.id?(ot._subscriptionFailures.delete(Ot.sid),ot._subscribed.set(Ot.sid,Ot.id)):Ot.error&&!ot._subscriptionFailures.has(Ot.sid)&&ot._subscriptionFailures.set(Ot.sid,Ot.error)});var Pt=new Set(De.subscribed.tracks.filter(function(Ot){return!!Ot.id}).map(function(Ot){return Ot.sid}));this._subscribed.forEach(function(Ot,Jt){Pt.has(Jt)||ot._subscribed.delete(Jt)})}var qt=new Set;return(De.participants||[]).forEach(function(Ot){if(Ot.sid!==ot.localParticipant.sid){var Jt=ot._disconnectedParticipantRevisions.get(Ot.sid);if(!(Jt&&Ot.revision<=Jt)){Jt&&ot._disconnectedParticipantRevisions.delete(Ot.sid);var Zn=ot._getOrCreateRemoteParticipant(Ot);Zn.update(Ot),qt.add(Zn)}}}),"synced"===De.type&&this.participants.forEach(function(Ot){qt.has(Ot)||Ot.disconnect()}),function Nt(Ve){var $e=Ve._getTrackSidsToTrackSignalings();Ve._subscriptionFailures.forEach(function(De,ot){var Pt=$e.get(ot);Pt&&(Ve._subscriptionFailures.delete(ot),Pt.subscribeFailed(ve(De.code,De.message)))}),$e.forEach(function(De){var ot=Ve._subscribed.get(De.sid);(!ot||De.isSubscribed&&De.trackTransceiver.id!==ot)&&De.setTrackTransceiver(null),ot&&Ve._getTrackReceiver(ot).then(function(Pt){return De.setTrackTransceiver(Pt)})})}(this),De.peer_connections&&this._peerConnectionManager.update(De.peer_connections,"synced"===De.type),De.recording&&this.recording.update(De.recording),De.published&&De.published.revision>this._publishedRevision&&(this._publishedRevision=De.published.revision,De.published.tracks.forEach(function(Ot){Ot.sid&&ot._published.set(Ot.id,Ot.sid)}),this.localParticipant.update(De.published)),De.participant&&this.localParticipant.connect(De.participant.sid,De.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(Ot){var Jt=Ot.channel;!Ot.isSetup&&De.media_signaling&&De.media_signaling[Jt]&&De.media_signaling[Jt].transport&&"data-channel"===De.media_signaling[Jt].transport.type&&Ot.setup(De.media_signaling[Jt].transport.label)}),this},$e.prototype._initPublisherHintSignaling=function(){var De=this;this._publisherHintsSignaling.on("updated",function(Pt,qt){Promise.all(Pt.map(function(Ot){return De.localParticipant.setPublisherHint(Ot.track,Ot.encodings).then(function(Jt){return{track:Ot.track,result:Jt}})})).then(function(Ot){De._publisherHintsSignaling.sendHintResponse({id:qt,hints:Ot})})});var ot=function(Pt){"video"===Pt.kind&&Pt.trackTransceiver.on("replaced",function(){De._publisherHintsSignaling.sendTrackReplaced({trackSid:Pt.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(Pt){return ot(Pt)}),this.localParticipant.on("trackAdded",function(Pt){return ot(Pt)})},$e.prototype._initTrackSwitchOffSignaling=function(){var De=this;this._trackSwitchOffSignaling.on("updated",function(ot,Pt){try{De._log.debug("received trackSwitch: ",{tracksOn:Pt,tracksOff:ot});var qt=new Map;Pt.forEach(function(Ot){return qt.set(Ot,!0)}),ot.forEach(function(Ot){qt.get(Ot)&&De._log.warn(Ot+" is DUPLICATED in both tracksOff and tracksOn list"),qt.set(Ot,!1)}),De.participants.forEach(function(Ot){Ot.tracks.forEach(function(Jt){var Zn=qt.get(Jt.sid);typeof Zn<"u"&&(Jt.setSwitchedOff(!Zn),qt.delete(Jt.sid))})}),qt.forEach(function(Ot,Jt){return De._pendingSwitchOffStates.set(Jt,!Ot)})}catch(Ot){De._log.error("error processing track switch off:",Ot)}})},$e.prototype._initDominantSpeakerSignaling=function(){var De=this;this._dominantSpeakerSignaling.on("updated",function(){return De.setDominantSpeaker(De._dominantSpeakerSignaling.loudestParticipantSid)})},$e.prototype._initNetworkQualityMonitorSignaling=function(){var De=this;this._networkQualitySignaling.on("ready",function(){var ot=new De._NetworkQualityMonitor(De._peerConnectionManager,De._networkQualitySignaling);De._networkQualityMonitor=ot,ot.on("updated",function(){"failed"!==De.iceConnectionState&&(De.localParticipant.setNetworkQualityLevel(ot.level,ot.levels),De.participants.forEach(function(Pt){var qt=ot.remoteLevels.get(Pt.sid);qt&&Pt.setNetworkQualityLevel(qt.level,qt)}))}),ot.start()}),this._networkQualitySignaling.on("teardown",function(){return De._teardownNetworkQualityMonitor()})},$e.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},$e.prototype.getStats=function(){var De=this;return this._peerConnectionManager.getStats().then(function(ot){return new Map(Array.from(ot).map(function(Pt){var qt=re(Pt,2),Jt=qt[1];return[qt[0],Object.assign({},Jt,{localAudioTrackStats:je(De,Jt.localAudioTrackStats),localVideoTrackStats:je(De,Jt.localVideoTrackStats),remoteAudioTrackStats:Fe(De,Jt.remoteAudioTrackStats),remoteVideoTrackStats:Fe(De,Jt.remoteVideoTrackStats)})]}))})},$e}(P);function Oe(Ve,$e){return $e.reduce(function(De,ot){var Pt=Ve.get(ot.trackId);return Pt?[Object.assign({},ot,{trackSid:Pt})].concat(De):De},[])}function je(Ve,$e){return Oe(Ve._published,$e)}function Fe(Ve,$e){return Oe(new Map(Array.from(Ve._subscribed.entries()).map(function(ot){var Pt=re(ot,2);return[Pt[1],Pt[0]]})),$e)}function Ht(Ve,$e,De){var ot=$e.framesEncoded,Pt=$e.packetsSent,qt=$e.totalEncodeTime,Ot=$e.totalPacketSendDelay,Jt=Object.assign({},Ve),Zn=Ve.trackSid+"+"+Ve.ssrc,Pn=De.get(Zn)||new Map;if("number"==typeof qt&&"number"==typeof ot){var Dr=Pn.get("avgEncodeDelay")||new Ee;Dr.putSample(1e3*qt,ot),Jt.avgEncodeDelay=Math.round(Dr.get()),Pn.set("avgEncodeDelay",Dr)}if("number"==typeof Ot&&"number"==typeof Pt){var vr=Pn.get("avgPacketSendDelay")||new Ee;vr.putSample(1e3*Ot,Pt),Jt.avgPacketSendDelay=Math.round(vr.get()),Pn.set("avgPacketSendDelay",vr)}return De.set(Zn,Pn),Jt}function Et(Ve,$e,De){var ot=$e.estimatedPlayoutTimestamp,Pt=$e.framesDecoded,qt=$e.jitterBufferDelay,Ot=$e.jitterBufferEmittedCount,Jt=$e.totalDecodeTime,Zn=Object.assign({},Ve),Pn=Ve.trackSid+"+"+Ve.ssrc,Dr=De.get(Pn)||new Map;if("number"==typeof ot&&(Zn.estimatedPlayoutTimestamp=ot),"number"==typeof Pt&&"number"==typeof Jt){var vr=Dr.get("avgDecodeDelay")||new Ee;vr.putSample(1e3*Jt,Pt),Zn.avgDecodeDelay=Math.round(vr.get()),Dr.set("avgDecodeDelay",vr)}if("number"==typeof qt&&"number"==typeof Ot){var ir=Dr.get("avgJitterBufferDelay")||new Ee;ir.putSample(1e3*qt,Ot),Zn.avgJitterBufferDelay=Math.round(ir.get()),Dr.set("avgJitterBufferDelay",ir)}return De.set(Pn,Dr),Zn}we.exports=he},8004:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,"track_priority",P)||this;return Object.defineProperties(x,{_enqueuedPriorityUpdates:{value:new Map}}),x.on("ready",function(U){Array.from(x._enqueuedPriorityUpdates.keys()).forEach(function(Z){U.publish({type:"track_priority",track:Z,subscribe:x._enqueuedPriorityUpdates.get(Z)})})}),x}return F(j,H),j.prototype.sendTrackPriorityUpdate=function(M,P,x){if("subscribe"!==P)throw new Error("only subscribe priorities are supported, found: "+P);this._enqueuedPriorityUpdates.set(M,x),this._transport&&this._transport.publish({type:"track_priority",track:M,subscribe:x})},j}($(4071));we.exports=oe},5210:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,"track_switch_off",P)||this;return x.on("ready",function(U){U.on("message",function(Z){"track_switch_off"===Z.type&&x._setTrackSwitchOffUpdates(Z.off||[],Z.on||[])})}),x}return F(j,H),j.prototype._setTrackSwitchOffUpdates=function(M,P){this.emit("updated",M,P)},j}($(4071));we.exports=oe},4892:function(we,Pe,$){"use strict";var He,F=this&&this.__extends||(He=function(rt,nt){return(He=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ke,Nt){Ke.__proto__=Nt}||function(Ke,Nt){for(var Ht in Nt)Object.prototype.hasOwnProperty.call(Nt,Ht)&&(Ke[Ht]=Nt[Ht])})(rt,nt)},function(rt,nt){if("function"!=typeof nt&&null!==nt)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");function Ke(){this.constructor=rt}He(rt,nt),rt.prototype=null===nt?Object.create(nt):(Ke.prototype=nt.prototype,new Ke)}),re=$(8675),oe=$(5330),H=$(2606),j=$(8701).reconnectBackoffConfig,M=$(6543),P=$(8701),x=P.SDK_NAME,U=P.SDK_VERSION,Z=P.SDP_FORMAT,ae=$(9739),ue=ae.createBandwidthProfilePayload,pe=ae.createMediaSignalingPayload,ee=ae.createSubscribePayload,Y=ae.getUserAgent,K=ae.isNonArrayObject,ce=$(8380),ye=ce.createTwilioError,ke=ce.RoomCompletedError,fe=ce.SignalingConnectionError,Ae=ce.SignalingServerBusyError,le={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},he=function(He){function rt(nt,Ke,Nt,Ht,Et,Je){var Ve;return Je=Object.assign({Backoff:H,TwilioConnection:oe,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:Y()},Je),Ve=He.call(this,"connecting",le)||this,Object.defineProperties(Ve,{_accessToken:{value:Ke},_automaticSubscription:{value:Je.automaticSubscription},_bandwidthProfile:{value:Je.bandwidthProfile},_dominantSpeaker:{value:Je.dominantSpeaker},_adaptiveSimulcast:{value:Je.adaptiveSimulcast},_eventObserver:{value:Je.eventObserver,writable:!1},_renderHints:{value:Je.renderHints},_iceServersStatus:{value:Array.isArray(Je.iceServers)?"overrode":"acquire"},_localParticipant:{value:Nt},_name:{value:nt},_networkQuality:{value:K(Je.networkQuality)||Je.networkQuality},_options:{value:Je},_peerConnectionManager:{value:Ht},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new Je.Backoff(j)},_session:{value:null,writable:!0},_trackPriority:{value:Je.trackPriority},_trackSwitchOff:{value:Je.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:Je.userAgent},_wsServer:{value:Et}}),function Fe(He){function rt(){if("disconnected"!==He.state){He._twilioConnection&&He._twilioConnection.removeListener("message",Ke);var $e=He._options,Pt=$e.TwilioConnection,qt=new Pt(He._wsServer,Object.assign({helloBody:"connecting"===He.state&&"acquire"===He._iceServersStatus?He._createIceMessage():He._createConnectOrSyncOrDisconnectMessage()},$e));qt.once("close",function(Ot){Ot===Pt.CloseReason.LOCAL?nt():nt(new Error(Ot))}),qt.on("message",Ke),He._twilioConnection=qt}}function nt(Ve){if("disconnected"!==He.state){if(!Ve)return void He.disconnect();var $e=He._getReconnectTimer();if(!$e){var De=Ve.message===oe.CloseReason.BUSY?new Ae:new fe;return void He.disconnect(De)}"connected"===He.state&&He.preempt("syncing"),$e.then(rt)}}function Ke(Ve){if("disconnected"!==He.state){if("error"===Ve.type)return void He.disconnect(ye(Ve.code,Ve.message));switch(He.state){case"connected":switch(Ve.type){case"connected":case"synced":case"update":return void He.emit("message",Ve);case"disconnected":return void He.disconnect("completed"===Ve.status?new ke:null);default:return}case"connecting":switch(Ve.type){case"iced":return void He._options.onIced(Ve.ice_servers).then(function(){He._sendConnectOrSyncOrDisconnectMessage()});case"connected":return He._setSession(Ve.session,Ve.options.session_timeout),He.emit("connected",Ve),void He.preempt("connected");case"synced":case"update":return void He._updatesReceived.push(Ve);case"disconnected":return void He.disconnect("completed"===Ve.status?new ke:null);default:return}case"syncing":switch(Ve.type){case"connected":case"update":return void He._updatesReceived.push(Ve);case"synced":return He._clearReconnectTimer(),He.emit("message",Ve),void He.preempt("connected");case"disconnected":return void He.disconnect("completed"===Ve.status?new ke:null);default:return}default:return}}}He.on("stateChanged",function Ve($e){switch($e){case"connected":var De=He._updatesToSend.splice(0);return De.length&&He.publish(function je(He){return He.reduce(function(rt,nt){return(!rt.participant&&nt.participant||rt.participant&&nt.participant&&nt.participant.revision>rt.participant.revision)&&(rt.participant=nt.participant),!rt.peer_connections&&nt.peer_connections?rt.peer_connections=Oe(nt.peer_connections):rt.peer_connections&&nt.peer_connections&&(rt.peer_connections=Oe(rt.peer_connections.concat(nt.peer_connections))),rt},{})}(De)),void He._updatesReceived.splice(0).forEach(function(ot){return He.emit("message",ot)});case"disconnected":return He._twilioConnection.removeListener("message",Ke),void He.removeListener("stateChanged",Ve);default:return}});var Nt=He._options;"overrode"===He._iceServersStatus?(0,Nt.onIced)(Nt.iceServers).then(rt):rt()}(Ve),Ve}return F(rt,He),rt.prototype._createConnectOrSyncOrDisconnectMessage=function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var nt={connecting:"connect",syncing:"sync"}[this.state],Ke={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:nt,version:2};return"connect"===Ke.type?(Ke.ice_servers=this._iceServersStatus,Ke.publisher={name:x,sdk_version:U,user_agent:this._userAgent},this._bandwidthProfile&&(Ke.bandwidth_profile=ue(this._bandwidthProfile)),Ke.media_signaling=pe(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),Ke.subscribe=ee(this._automaticSubscription),Ke.format=Z,Ke.token=this._accessToken):"sync"===Ke.type?(Ke.session=this._session,Ke.token=this._accessToken):"update"===Ke.type&&(Ke.session=this._session),Ke},rt.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}},rt.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var nt=this._createConnectOrSyncOrDisconnectMessage();nt&&this._twilioConnection.sendMessage(nt)},rt.prototype.disconnect=function(nt){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[nt]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0)},rt.prototype.publish=function(nt){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},nt)),!0;case"connecting":case"syncing":return this._updatesToSend.push(nt),!0;default:return!1}},rt.prototype.publishEvent=function(nt,Ke,Nt,Ht){this._eventObserver.emit("event",{group:nt,name:Ke,level:Nt,payload:Ht})},rt.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)},rt.prototype._setSession=function(nt,Ke){this._session=nt,this._sessionTimeoutMS=1e3*Ke},rt.prototype._getReconnectTimer=function(){var nt=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new M(function(){nt._sessionTimer&&(nt._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(Ke){nt._reconnectBackoff.backoff(Ke)}))},rt.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},rt}(re);function Oe(He){return Array.from(He.reduce(function(rt,nt){var Ke=rt.get(nt.id)||nt;return(!Ke.description&&nt.description||Ke.description&&nt.description&&nt.description.revision>Ke.description.revision)&&(Ke.description=nt.description),(!Ke.ice&&nt.ice||Ke.ice&&nt.ice&&nt.ice.revision>Ke.ice.revision)&&(Ke.ice=nt.ice),rt.set(Ke.id,Ke),rt},new Map).values())}we.exports=he},8675:function(we,Pe,$){"use strict";var pe,F=this&&this.__extends||(pe=function(ee,Y){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,ce){K.__proto__=ce}||function(K,ce){for(var ye in ce)Object.prototype.hasOwnProperty.call(ce,ye)&&(K[ye]=ce[ye])})(ee,Y)},function(ee,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function K(){this.constructor=ee}pe(ee,Y),ee.prototype=null===Y?Object.create(Y):(K.prototype=Y.prototype,new K)}),re=this&&this.__read||function(pe,ee){var Y="function"==typeof Symbol&&pe[Symbol.iterator];if(!Y)return pe;var ce,ke,K=Y.call(pe),ye=[];try{for(;(void 0===ee||ee-- >0)&&!(ce=K.next()).done;)ye.push(ce.value)}catch(fe){ke={error:fe}}finally{try{ce&&!ce.done&&(Y=K.return)&&Y.call(K)}finally{if(ke)throw ke.error}}return ye},oe=this&&this.__spreadArray||function(pe,ee){for(var Y=0,K=ee.length,ce=pe.length;Y<K;Y++,ce++)pe[ce]=ee[Y];return pe},H=$(9069).EventEmitter,j=$(9739),M=function(pe){function ee(Y,K){var ce=pe.call(this)||this,ye=null,ke=Y;return K=function ae(pe){var ee=new Map;for(var Y in pe)ee.set(Y,new Set(pe[Y]));return ee}(K),Object.defineProperties(ce,{_lock:{get:function(){return ye},set:function(fe){ye=fe}},_reachableStates:{value:U(K)},_state:{get:function(){return ke},set:function(fe){ke=fe}},_states:{value:K},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==ye}},state:{enumerable:!0,get:function(){return ke}}}),ce.on("stateChanged",function(fe){ce._whenDeferreds.forEach(function(Ae){Ae.when(fe,Ae.resolve,Ae.reject)})}),ce}return F(ee,pe),ee.prototype._whenPromise=function(Y){var K=this;if("function"!=typeof Y)return Promise.reject(new Error("when() executor must be a function"));var ce=j.defer();return ce.when=Y,this._whenDeferreds.add(ce),ce.promise.then(function(ye){return K._whenDeferreds.delete(ce),ye},function(ye){throw K._whenDeferreds.delete(ce),ye})},ee.prototype.bracket=function(Y,K){var ce,ye=this;function ke(fe){if(ye.hasLock(ce)&&ye.releaseLockCompletely(ce),fe)throw fe}return this.takeLock(Y).then(function(Ae){return K(ce=Ae)}).then(function(Ae){return ke(),Ae},ke)},ee.prototype.hasLock=function(Y){return this._lock===Y},ee.prototype.preempt=function(Y,K,ce){if(!P(this._states,this.state,Y))throw new Error('Cannot transition from "'+this.state+'" to "'+Y+'"');var ye;this.isLocked&&(ye=this._lock,this._lock=null);var ke=null;K&&(ke=this.takeLockSync(K));var fe=ke?null:this.takeLockSync("preemption");return this.transition(Y,ke||fe,ce),ye&&ye.resolve(),fe&&this.releaseLock(fe),ke},ee.prototype.releaseLock=function(Y){if(!this.isLocked)throw new Error("Could not release the lock for "+Y.name+" because the StateMachine is not locked");if(!this.hasLock(Y))throw new Error("Could not release the lock for "+Y.name+" because "+this._lock.name+" has the lock");0===Y.depth?(this._lock=null,Y.resolve()):Y.depth--},ee.prototype.releaseLockCompletely=function(Y){if(!this.isLocked)throw new Error("Could not release the lock for "+Y.name+" because the StateMachine is not locked");if(!this.hasLock(Y))throw new Error("Could not release the lock for "+Y.name+" because "+this._lock.name+" has the lock");Y.depth=0,this._lock=null,Y.resolve()},ee.prototype.takeLock=function(Y){var K=this;if("object"==typeof Y){var ce=Y;return new Promise(function(fe){fe(K.takeLockSync(ce))})}var ye=Y;if(this.isLocked){var ke=this.takeLock.bind(this,ye);return this._lock.promise.then(ke)}return Promise.resolve(this.takeLockSync(ye))},ee.prototype.takeLockSync=function(Y){var K="string"==typeof Y?null:Y,ce=K?K.name:Y;if(K&&!this.hasLock(K)||!K&&this.isLocked)throw new Error("Could not take the lock for "+ce+" because the lock for "+this._lock.name+" was not released");if(K)return K.depth++,K;var ye=function x(pe){var ee=j.defer();return ee.name=pe,ee.depth=0,ee}(ce);return this._lock=ye,ye},ee.prototype.transition=function(Y,K,ce){if(ce=ce||[],this.isLocked){if(!K)throw new Error("You must provide the key in order to transition");if(!this.hasLock(K))throw new Error("Could not transition using the key for "+K.name+" because "+this._lock.name+" has the lock")}else if(K)throw new Error("Key provided for "+K.name+", but the StateMachine was not locked (possibly due to preemption)");if(!P(this._states,this.state,Y))throw new Error('Cannot transition from "'+this.state+'" to "'+Y+'"');this._state=Y,this.emit.apply(this,oe([],re(["stateChanged",Y].concat(ce))))},ee.prototype.tryTransition=function(Y,K,ce){try{this.transition(Y,K,ce)}catch{return!1}return!0},ee.prototype.when=function(Y){var K=this;return this.state===Y?Promise.resolve(this):P(this._reachableStates,this.state,Y)?this._whenPromise(function(ce,ye,ke){ce===Y?ye(K):P(K._reachableStates,ce,Y)||ke(ue(ce,Y))}):Promise.reject(ue(this.state,Y))},ee}(H);function P(pe,ee,Y){return pe.get(ee).has(Y)}function U(pe){return Array.from(pe.keys()).reduce(function(ee,Y){return ee.set(Y,Z(pe,Y))},new Map)}function Z(pe,ee,Y){return Y=Y||new Set,pe.get(ee).forEach(function(K){Y.has(K)||(Y.add(K),Z(pe,K,Y).forEach(Y.add,Y))}),Y}function ue(pe,ee){return new Error('"'+ee+'" cannot be reached from "'+pe+'"')}we.exports=M},7704:we=>{"use strict";we.exports=function Pe($){return($=$.filter(function(F){return"number"==typeof F})).length<1?void 0:$.reduce(function(F,re){return re+F})/$.length}},4239:we=>{"use strict";var Pe=function(){function $(F,re,oe,H){Object.defineProperties(this,{availableSend:{enumerable:!0,value:oe},recv:{enumerable:!0,value:re},rtt:{enumerable:!0,value:H},send:{enumerable:!0,value:F}})}return $.of=function(F,re){var oe=(re.timestamp-F.timestamp)/1e3;return new $(oe>0?(re.bytesSent-F.bytesSent)/oe*8:0,oe>0?(re.bytesReceived-F.bytesReceived)/oe*8:0,re.availableOutgoingBitrate,re.currentRoundTripTime)},$}();we.exports=Pe},2483:(we,Pe,$)=>{"use strict";var F=$(4239),re=function(){function oe(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new F(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return oe.prototype.next=function(H){var j=this.lastStats;if(this.lastStats=H,j){var M=j.id===H.id?F.of(j,H):new F(0,0);this.lastReport=M}return this.lastReport},oe}();we.exports=re},6719:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x){var U=H.call(this,M,P,x)||this;return Object.defineProperties(U,{audioLevel:{value:"number"==typeof P.audioInputLevel?P.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof P.jitter?P.jitter:null,enumerable:!0}}),U}return F(j,H),j}($(3840));we.exports=oe},3840:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x){var U=H.call(this,M,P)||this;return Object.defineProperties(U,{bytesSent:{value:"number"==typeof P.bytesSent?P.bytesSent:x?0:null,enumerable:!0},packetsSent:{value:"number"==typeof P.packetsSent?P.packetsSent:x?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof P.roundTripTime?P.roundTripTime:x?0:null,enumerable:!0}}),U}return F(j,H),j}($(9078));we.exports=oe},1371:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x){var U=H.call(this,M,P,x)||this,Z=null;"number"==typeof P.frameWidthInput&&"number"==typeof P.frameHeightInput&&(Z={},Object.defineProperties(Z,{width:{value:P.frameWidthInput,enumerable:!0},height:{value:P.frameHeightInput,enumerable:!0}}));var ae=null;return"number"==typeof P.frameWidthSent&&"number"==typeof P.frameHeightSent&&(ae={},Object.defineProperties(ae,{width:{value:P.frameWidthSent,enumerable:!0},height:{value:P.frameHeightSent,enumerable:!0}})),Object.defineProperties(U,{captureDimensions:{value:Z,enumerable:!0},dimensions:{value:ae,enumerable:!0},captureFrameRate:{value:"number"==typeof P.frameRateInput?P.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof P.frameRateSent?P.frameRateSent:null,enumerable:!0}}),U}return F(j,H),j}($(3840));we.exports=oe},1908:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){return H.call(this,M)||this}return F(j,H),j}($(4976));we.exports=oe},4661:we=>{"use strict";we.exports=function $(F){var re=F.actual,H=F.available,M=F.level;Object.defineProperties(this,{actual:{value:void 0===re?null:re,enumerable:!0},available:{value:void 0===H?null:H,enumerable:!0},level:{value:void 0===M?null:M,enumerable:!0}})}},2165:we=>{"use strict";we.exports=function $(F){var re=F.fractionLost,H=F.level;Object.defineProperties(this,{fractionLost:{value:void 0===re?null:re,enumerable:!0},level:{value:void 0===H?null:H,enumerable:!0}})}},2590:we=>{"use strict";we.exports=function $(F){var re=F.jitter,H=F.rtt,M=F.level;Object.defineProperties(this,{jitter:{value:void 0===re?null:re,enumerable:!0},rtt:{value:void 0===H?null:H,enumerable:!0},level:{value:void 0===M?null:M,enumerable:!0}})}},4976:(we,Pe,$)=>{"use strict";var F=$(220),re=$(5206);we.exports=function H(j){var x=j.sendStats,U=void 0===x?null:x,Z=j.recvStats,ae=void 0===Z?null:Z;Object.defineProperties(this,{send:{value:j.send,enumerable:!0},recv:{value:j.recv,enumerable:!0},sendStats:{value:U?new F(U):null,enumerable:!0},recvStats:{value:ae?new re(ae):null,enumerable:!0}})}},5206:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){return H.call(this,M)||this}return F(j,H),j}($(4236));we.exports=oe},4236:(we,Pe,$)=>{"use strict";var F=$(4661),re=$(2165),oe=$(2590);we.exports=function j(M){var P=M.bandwidth,x=void 0===P?null:P,U=M.fractionLost,Z=void 0===U?null:U,ae=M.latency,ue=void 0===ae?null:ae;Object.defineProperties(this,{bandwidth:{value:x?new F(x):null,enumerable:!0},fractionLost:{value:Z?new re(Z):null,enumerable:!0},latency:{value:ue?new oe(ue):null,enumerable:!0}})}},220:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){return H.call(this,M)||this}return F(j,H),j}($(4236));we.exports=oe},669:(we,Pe,$)=>{"use strict";var F=$(1908),re=$(2003);we.exports=function H(j){var P=j.audio,x=j.video;Object.defineProperties(this,{level:{value:j.level,enumerable:!0},audio:{value:P?new F(P):null,enumerable:!0},video:{value:x?new re(x):null,enumerable:!0}})}},2003:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){return H.call(this,M)||this}return F(j,H),j}($(4976));we.exports=oe},5055:(we,Pe,$)=>{"use strict";var F=$(8020),re=$(775),oe=function(){function H(j,M,P){Object.defineProperties(this,{ice:{enumerable:!0,value:j},audio:{enumerable:!0,value:M},video:{enumerable:!0,value:P}})}return H.prototype.summarize=function(){var j=this.audio.send.concat(this.video.send),M=re.summarize(j),P=this.audio.recv.concat(this.video.recv),x=F.summarize(P);return{ice:this.ice,send:M,recv:x,audio:{send:re.summarize(this.audio.send),recv:F.summarize(this.audio.recv)},video:{send:re.summarize(this.video.send),recv:F.summarize(this.video.recv)}}},H}();we.exports=oe},8753:function(we,Pe,$){"use strict";var F=this&&this.__read||function(le,he){var Oe="function"==typeof Symbol&&le[Symbol.iterator];if(!Oe)return le;var Fe,rt,je=Oe.call(le),He=[];try{for(;(void 0===he||he-- >0)&&!(Fe=je.next()).done;)He.push(Fe.value)}catch(nt){rt={error:nt}}finally{try{Fe&&!Fe.done&&(Oe=je.return)&&Oe.call(je)}finally{if(rt)throw rt.error}}return He},re=this&&this.__spreadArray||function(le,he){for(var Oe=0,je=he.length,Fe=le.length;Oe<je;Oe++,Fe++)le[Fe]=he[Oe];return le},oe=this&&this.__values||function(le){var he="function"==typeof Symbol&&Symbol.iterator,Oe=he&&le[he],je=0;if(Oe)return Oe.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&je>=le.length&&(le=void 0),{value:le&&le[je++],done:!le}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")},H=$(7627).guessBrowser,j=$(2483),M=$(5055),P=$(1013),x=$(1031),U=function(){function le(he){Object.defineProperties(this,{pc:{enumerable:!0,value:he},ice:{enumerable:!0,value:new j},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return le.prototype.next=function(){var he=this,Oe="firefox"===H()?function Ee(le){var he=le.pc.getTransceivers().filter(function(je){return je.currentDirection&&je.currentDirection.match(/send/)&&je.sender.track}).map(function(je){return je.sender}),Oe=le.pc.getTransceivers().filter(function(je){return je.currentDirection&&je.currentDirection.match(/recv/)}).map(function(je){return je.receiver});return Promise.all([Z(he),Z(Oe),le.pc.getStats()]).then(function(je){var Fe=F(je,3),He=Fe[0],rt=Fe[1],nt=Fe[2],Ke=ue(le),Nt=K(le);He.forEach(function(Je,Ve){return ye(le,Je,Nt,Ve)}),fe(Ke,Nt);var Ht=pe(le),Et=ce(le);rt.forEach(function(Je,Ve){return ke(le,Je,Et,Ve)}),fe(Ht,Et),Ae(le.ice,nt)})}(this):function ve(le){return le.pc.getStats().then(function(he){var Oe=ue(le),je=K(le);ye(le,he,je),fe(Oe,je);var Fe=pe(le),He=ce(le);ke(le,he,He),fe(Fe,He),Ae(le.ice,he)})}(this);return Oe.then(function(){var je=re([],F(he.audio.send.values())),Fe=re([],F(he.video.send.values())),He=re([],F(he.audio.recv.values())),rt=re([],F(he.video.recv.values())),nt=new M(he.ice.lastReport,{send:je.map(function(Ke){return Ke.lastReport}).filter(function(Ke){return Ke}),recv:He.map(function(Ke){return Ke.lastReport}).filter(function(Ke){return Ke})},{send:Fe.map(function(Ke){return Ke.lastReport}).filter(function(Ke){return Ke}),recv:rt.map(function(Ke){return Ke.lastReport}).filter(function(Ke){return Ke})});return he.lastReport=nt,nt})},le}();function Z(le){return Promise.all(le.map(function(he){var Oe=he.track.id;return he.getStats().then(function(je){var Fe,He;try{for(var rt=oe(je.values()),nt=rt.next();!nt.done;nt=rt.next()){var Ke=nt.value;"inbound-rtp"===Ke.type&&(Ke.id=Oe+"-"+Ke.id)}}catch(Nt){Fe={error:Nt}}finally{try{nt&&!nt.done&&(He=rt.return)&&He.call(rt)}finally{if(Fe)throw Fe.error}}return[Oe,je]})})).then(function(he){return new Map(he)})}function ae(le,he,Oe,je,Fe){var He=he[je.mediaType];if(!Fe){var rt=Oe.get(je.trackId);rt&&(Fe=rt.trackIdentifier)}if(He&&Fe){if(He.has(je.id))return He.get(je.id);var nt=new le(Fe,je);He.set(je.id,nt)}return null}function ue(le){return{audio:le.audio.send,video:le.video.send}}function pe(le){return{audio:le.audio.recv,video:le.video.recv}}function ee(le,he,Oe,je){return ae(x,ue(le),he,Oe,je)}function Y(le,he,Oe,je){return ae(P,pe(le),he,Oe,je)}function K(le){return{audio:new Set(le.audio.send.keys()),video:new Set(le.video.send.keys())}}function ce(le){return{audio:new Set(le.audio.recv.keys()),video:new Set(le.video.recv.keys())}}function ye(le,he,Oe,je){var Fe,He;try{for(var rt=oe(he.values()),nt=rt.next();!nt.done;nt=rt.next()){var Ke=nt.value;if("outbound-rtp"===Ke.type&&!Ke.isRemote){if("firefox"!==H()&&!Ke.trackId)continue;var Nt=Oe[Ke.mediaType];Nt&&Nt.delete(Ke.id);var Ht=ee(le,he,Ke,je);if(Ht){var Et=he.get(Ke.remoteId);Ht.next(je||Ht.trackId,Ke,Et)}}}}catch(Je){Fe={error:Je}}finally{try{nt&&!nt.done&&(He=rt.return)&&He.call(rt)}finally{if(Fe)throw Fe.error}}}function ke(le,he,Oe,je){var Fe,He;try{for(var rt=oe(he.values()),nt=rt.next();!nt.done;nt=rt.next()){var Ke=nt.value;if("inbound-rtp"===Ke.type&&!Ke.isRemote){var Nt=Oe[Ke.mediaType];Nt&&Nt.delete(Ke.id);var Ht=Y(le,he,Ke,je);Ht&&Ht.next(je||Ht.trackId,Ke)}}}catch(Et){Fe={error:Et}}finally{try{nt&&!nt.done&&(He=rt.return)&&He.call(rt)}finally{if(Fe)throw Fe.error}}}function fe(le,he){var Oe=function(Fe){var He=le[Fe];he[Fe].forEach(function(nt){return He.delete(nt)})};for(var je in he)Oe(je)}function Ae(le,he){var Oe,je,Fe,He,rt;try{for(var nt=oe(he.values()),Ke=nt.next();!Ke.done;Ke=nt.next())"transport"===(Nt=Ke.value).type&&(rt=he.get(Nt.selectedCandidatePairId))}catch(Je){Oe={error:Je}}finally{try{Ke&&!Ke.done&&(je=nt.return)&&je.call(nt)}finally{if(Oe)throw Oe.error}}if(rt)le.next(rt);else try{for(var Ht=oe(he.values()),Et=Ht.next();!Et.done;Et=Ht.next()){var Nt;"candidate-pair"===(Nt=Et.value).type&&Nt.nominated&&(!("selected"in Nt)||Nt.selected)&&le.next(Nt)}}catch(Je){Fe={error:Je}}finally{try{Et&&!Et.done&&(He=Ht.return)&&He.call(Ht)}finally{if(Fe)throw Fe.error}}}we.exports=U},8020:function(we,Pe,$){"use strict";var M,F=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&(U[ae]=Z[ae])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function U(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(U.prototype=x.prototype,new U)}),re=$(7704),oe=$(7176),H=$(7483),j=function(M){function P(x,U,Z,ae,ue,pe,ee){var Y=M.call(this,x,U,Z)||this;return Object.defineProperties(Y,{deltaPacketsLost:{enumerable:!0,value:ae},deltaPacketsReceived:{enumerable:!0,value:ue},fractionLost:{enumerable:!0,value:pe},jitter:{enumerable:!0,value:ee},phonyFractionLost:{enumerable:!0,value:ue>0?ae/ue:0}}),Y}return F(P,M),P.of=function(x,U,Z){if(U.id!==Z.id)throw new Error("RTCStats IDs must match");var ae=(Z.timestamp-U.timestamp)/1e3,pe=ae>0?(Z.bytesReceived-U.bytesReceived)/ae*8:0,ee=Math.max(Z.packetsLost-U.packetsLost,0);return new P(U.id,x,pe,ee,Z.packetsReceived-U.packetsReceived,Z.fractionLost,Z.jitter)},P.summarize=function(x){var U=x.map(function(pe){return pe.summarize()});return{bitrate:H(U.map(function(pe){return pe.bitrate})),fractionLost:re(U.map(function(pe){return pe.fractionLost})),jitter:re(U.map(function(pe){return pe.jitter}))}},P.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},P}(oe);we.exports=j},1013:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(8020),H=function(j){function M(P,x){var U=j.call(this,x.id,P,x)||this;return Object.defineProperties(U,{lastReport:{enumerable:!0,value:null,writable:!0}}),U}return F(M,j),M.prototype.next=function(P,x){var U=this.lastStats;this.lastStats=x,this.trackId=P;var Z=re.of(P,U,x);return this.lastReport=Z,Z},M}($(6986));we.exports=H},5180:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,P)||this;return Object.defineProperties(x,{audioLevel:{value:"number"==typeof P.audioOutputLevel?P.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof P.jitter?P.jitter:null,enumerable:!0}}),x}return F(j,H),j}($(2613));we.exports=oe},2613:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,P)||this;return Object.defineProperties(x,{bytesReceived:{value:"number"==typeof P.bytesReceived?P.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof P.packetsReceived?P.packetsReceived:null,enumerable:!0}}),x}return F(j,H),j}($(9078));we.exports=oe},993:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,P)||this,U=null;return"number"==typeof P.frameWidthReceived&&"number"==typeof P.frameHeightReceived&&(U={},Object.defineProperties(U,{width:{value:P.frameWidthReceived,enumerable:!0},height:{value:P.frameHeightReceived,enumerable:!0}})),Object.defineProperties(x,{dimensions:{value:U,enumerable:!0},frameRate:{value:"number"==typeof P.frameRateReceived?P.frameRateReceived:null,enumerable:!0}}),x}return F(j,H),j}($(2613));we.exports=oe},7176:we=>{"use strict";we.exports=function $(F,re,oe){Object.defineProperties(this,{id:{enumerable:!0,value:F},trackId:{enumerable:!0,value:re},bitrate:{enumerable:!0,value:oe}})}},6986:we=>{"use strict";we.exports=function $(F,re,oe){Object.defineProperties(this,{id:{enumerable:!0,value:F,writable:!0},trackId:{enumerable:!0,value:re,writable:!0},lastStats:{enumerable:!0,value:oe,writable:!0}})}},775:function(we,Pe,$){"use strict";var M,F=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&(U[ae]=Z[ae])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function U(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(U.prototype=x.prototype,new U)}),re=$(7704),oe=$(7176),H=$(7483),j=function(M){function P(x,U,Z,ae){var ue=M.call(this,x,U,Z)||this;return Object.defineProperties(ue,{rtt:{enumerable:!0,value:ae}}),ue}return F(P,M),P.of=function(x,U,Z,ae){if(U.id!==Z.id)throw new Error("RTCStats IDs must match");var ue=(Z.timestamp-U.timestamp)/1e3;return new P(U.id,x,ue>0?(Z.bytesSent-U.bytesSent)/ue*8:0,ae&&"number"==typeof ae.roundTripTime?ae.roundTripTime/1e3:void 0)},P.summarize=function(x){return{bitrate:H(x.map(function(ae){return ae.bitrate})),rtt:re(x.map(function(ae){return ae.rtt}))}},P}(oe);we.exports=j},1031:function(we,Pe,$){"use strict";var j,F=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,U){x.__proto__=U}||function(x,U){for(var Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(x[Z]=U[Z])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),re=$(6986),oe=$(775),H=function(j){function M(P,x){var U=j.call(this,x.id,P,x)||this;return Object.defineProperties(U,{lastReport:{enumerable:!0,value:null,writable:!0}}),U}return F(M,j),M.prototype.next=function(P,x,U){var Z=this.lastStats;this.lastStats=x,this.trackId=P;var ae=oe.of(P,Z,x,U);return this.lastReport=ae,ae},M}(re);we.exports=H},7805:(we,Pe,$)=>{"use strict";var F=$(6719),re=$(1371),oe=$(5180),H=$(993);we.exports=function M(P,x,U){if("string"!=typeof P)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:P,enumerable:!0},localAudioTrackStats:{value:x.localAudioTrackStats.map(function(Z){return new F(Z.trackId,Z,U)}),enumerable:!0},localVideoTrackStats:{value:x.localVideoTrackStats.map(function(Z){return new re(Z.trackId,Z,U)}),enumerable:!0},remoteAudioTrackStats:{value:x.remoteAudioTrackStats.map(function(Z){return new oe(Z.trackId,Z)}),enumerable:!0},remoteVideoTrackStats:{value:x.remoteVideoTrackStats.map(function(Z){return new H(Z.trackId,Z)}),enumerable:!0}})}},7483:we=>{"use strict";we.exports=function Pe($){return $.reduce(function(F,re){return"number"==typeof re?re+F:F},0)}},9078:we=>{"use strict";we.exports=function $(F,re){if("string"!=typeof F)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:F,enumerable:!0},trackSid:{value:re.trackSid,enumerable:!0},timestamp:{value:re.timestamp,enumerable:!0},ssrc:{value:re.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof re.packetsLost?re.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof re.codecName?re.codecName:null,enumerable:!0}})}},4605:function(we,Pe,$){"use strict";var H,F=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var U in x)Object.prototype.hasOwnProperty.call(x,U)&&(P[U]=x[U])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this)||this;return Object.defineProperties(x,{id:{enumerable:!0,value:M},kind:{enumerable:!0,value:P}}),x}return F(j,H),j.prototype.stop=function(){this.emit("stopped")},j}($(9069).EventEmitter);we.exports=oe},5330:function(we,Pe,$){"use strict";var Et,F=this&&this.__extends||(Et=function(Je,Ve){return(Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($e,De){$e.__proto__=De}||function($e,De){for(var ot in De)Object.prototype.hasOwnProperty.call(De,ot)&&($e[ot]=De[ot])})(Je,Ve)},function(Je,Ve){if("function"!=typeof Ve&&null!==Ve)throw new TypeError("Class extends value "+String(Ve)+" is not a constructor or null");function $e(){this.constructor=Je}Et(Je,Ve),Je.prototype=null===Ve?Object.create(Ve):($e.prototype=Ve.prototype,new $e)}),re=this&&this.__read||function(Et,Je){var Ve="function"==typeof Symbol&&Et[Symbol.iterator];if(!Ve)return Et;var De,Pt,$e=Ve.call(Et),ot=[];try{for(;(void 0===Je||Je-- >0)&&!(De=$e.next()).done;)ot.push(De.value)}catch(qt){Pt={error:qt}}finally{try{De&&!De.done&&(Ve=$e.return)&&Ve.call($e)}finally{if(Pt)throw Pt.error}}return ot},oe=this&&this.__spreadArray||function(Et,Je){for(var Ve=0,$e=Je.length,De=Et.length;Ve<$e;Ve++,De++)Et[De]=Je[Ve];return Et},H=$(8675),j=$(9739),M=j.buildLogLevels,P=j.makeUUID,x=$(1458),U=$(2643),Z=$(6543),ae=0,ue={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},pe={closed:"close",open:"open",waiting:"waiting"},rt=globalThis,nt=rt.WebSocket?rt.WebSocket:$(3332),Ke={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},Nt=new Map([[3e3,Ke.TIMEOUT],[3001,Ke.TIMEOUT],[3002,Ke.FAILED],[3003,Ke.FAILED],[3004,Ke.TIMEOUT],[3006,Ke.BUSY],[3007,Ke.TIMEOUT]]),Ht=function(Et){function Je(Ve,$e){var De=Et.call(this,"early",ue)||this;$e=Object.assign({helloBody:null,maxConsecutiveFailedHellos:3,maxConsecutiveMissedHeartbeats:3,requestedHeartbeatTimeout:5e3,openTimeout:15e3,welcomeTimeout:5e3,Log:x,WebSocket:nt},$e);var ot=M($e.logLevel),Pt=new $e.Log("default",De,ot,$e.loggerName),qt=$e.networkMonitor?new U(function(){var Jt=qt.type,Zn="Network changed"+(Jt?" to "+Jt:"");Pt.debug(Zn),De._close({code:3004,reason:Zn})}):null;Object.defineProperties(De,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:$e.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:$e.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++ae},_log:{value:Pt},_messageQueue:{value:[]},_networkMonitor:{value:qt},_options:{value:$e},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:Ve},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var Ot={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return De.on("stateChanged",function(Jt){for(var Zn=[],Pn=1;Pn<arguments.length;Pn++)Zn[Pn-1]=arguments[Pn];Jt in pe&&De.emit.apply(De,oe([pe[Jt]],re(Zn)));var Dr={name:Jt,group:"signaling",level:Ot[De.state]};if("closed"===Jt){var vr=re(Zn,1),ir=vr[0];Dr.payload={reason:ir},Dr.level=ir===Ke.LOCAL?"info":"error"}De._eventObserver.emit("event",Dr)}),De._eventObserver.emit("event",{name:De.state,group:"signaling",level:Ot[De.state]}),De._connect(),De}return F(Je,Et),Je.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},Je.prototype._close=function(Ve){var $e=Ve.code,De=Ve.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&3005!==$e&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var ot=this._log;1e3===$e?(ot.debug("Closed"),this.transition("closed",null,[Ke.LOCAL])):(ot.warn("Closed: "+$e+" - "+De),3005!==$e&&this.transition("closed",null,[Nt.get($e)||Ke.REMOTE]));var Pt=this._ws.readyState,qt=this._options.WebSocket;Pt!==qt.CLOSING&&Pt!==qt.CLOSED&&this._ws.close($e,De)}},Je.prototype._connect=function(){var Ve=this,$e=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void $e.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var De=this._ws;$e.debug("Created a new WebSocket:",De),De.addEventListener("close",function(Pt){return Ve._close(Pt)});var ot=this._options.openTimeout;this._openTimeout=new Z(function(){Ve._close({code:3007,reason:"Failed to open in "+ot+" ms"})},ot),De.addEventListener("open",function(){$e.debug("WebSocket opened:",De),Ve._openTimeout.clear(),Ve._startHandshake(),Ve._networkMonitor&&Ve._networkMonitor.start()}),De.addEventListener("message",function(Pt){$e.debug("Incoming: "+Pt.data);try{Pt=JSON.parse(Pt.data)}catch(qt){return void Ve.emit("error",qt)}switch(Pt.type){case"bad":Ve._handleBad(Pt);break;case"busy":Ve._handleBusy(Pt);break;case"bye":break;case"msg":Ve._handleMessage(Pt);case"heartbeat":Ve._handleHeartbeat();break;case"welcome":Ve._handleWelcome(Pt);break;default:Ve._log.debug("Unknown message type: "+Pt.type),Ve.emit("error",new Error("Unknown message type: "+Pt.type))}})},Je.prototype._handleBad=function(Ve){var $e=Ve.reason,De=this._log;if(["connecting","open"].includes(this.state))return"connecting"===this.state?(De.warn("Closing: 3002 - "+$e),void this._close({code:3002,reason:$e})):(De.debug("Error: "+$e),void this.emit("error",new Error($e)));De.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')},Je.prototype._handleBusy=function(Ve){var $e=this,De=Ve.cookie,ot=Ve.keepAlive,Pt=Ve.retryAfter,qt=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var Ot=Pt<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+Pt+" ms";if(Pt<0)return qt.warn("Closing: 3006 - "+Ot),void this._close({code:3006,reason:Ot});this._hellosLeft=this._options.maxConsecutiveFailedHellos,this._cookie=De||null,ot?(qt.warn(Ot),this._busyWaitTimeout=new Z(function(){return $e._startHandshake()},Pt)):(qt.warn("Closing: 3005 - "+Ot),this._close({code:3005,reason:Ot}),this._busyWaitTimeout=new Z(function(){return $e._connect()},Pt)),this.transition("waiting",null,[ot,Pt])}else qt.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')},Je.prototype._handleHeartbeat=function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')},Je.prototype._handleHeartbeatTimeout=function(){if("open"===this.state){var Ve=this._log,$e=this._options.maxConsecutiveMissedHeartbeats;Ve.debug("Consecutive heartbeats missed: "+$e);var De="Missed "+$e+' "heartbeat" messages';Ve.warn("Closing: 3001 - "+De),this._close({code:3001,reason:De})}},Je.prototype._handleMessage=function(Ve){"open"===this.state?this.emit("message",Ve.body):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')},Je.prototype._handleWelcome=function(Ve){var $e=this,De=Ve.negotiatedTimeout,ot=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(ot.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var qt=De*this._options.maxConsecutiveMissedHeartbeats,Ot=De-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new Z(function(){return $e._handleHeartbeatTimeout()},qt),this._messageQueue.splice(0).forEach(function(Jt){return $e._send(Jt)}),this._sendHeartbeatTimeout=new Z(function(){return $e._sendHeartbeat()},Ot),this.transition("open")}else ot.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')},Je.prototype._handleWelcomeTimeout=function(){if("connecting"===this.state){var Ve=this._log;if(this._hellosLeft<=0){var $e="All handshake attempts failed";return Ve.warn("Closing: 3000 - "+$e),void this._close({code:3e3,reason:$e})}Ve.warn("Handshake attempt "+(this._options.maxConsecutiveFailedHellos-this._hellosLeft)+" failed"),this._startHandshake()}},Je.prototype._send=function(Ve){if(this._ws.readyState===this._options.WebSocket.OPEN){var ot=JSON.stringify(Ve);this._log.debug("Outgoing: "+ot);try{this._ws.send(ot),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var Pt="Failed to send message";this._log.warn("Closing: 3003 - "+Pt),this._close({code:3003,reason:Pt})}}},Je.prototype._sendHeartbeat=function(){"closed"!==this.state&&this._send({type:"heartbeat"})},Je.prototype._sendHello=function(){var Ve=this._options,$e=Ve.helloBody,De=Ve.requestedHeartbeatTimeout,ot={id:P(),timeout:De,type:"hello",version:2};this._cookie&&(ot.cookie=this._cookie),$e&&(ot.body=$e),this._send(ot)},Je.prototype._sendOrEnqueue=function(Ve){var $e=this;"closed"!==this.state&&("open"===this.state?function(ot){return $e._send(ot)}:function(ot){return $e._messageQueue.push(ot)})(Ve)},Je.prototype._startHandshake=function(){var Ve=this;["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state&&(this._hellosLeft--,this._sendHello(),this._welcomeTimeout=new Z(function(){return Ve._handleWelcomeTimeout()},this._options.welcomeTimeout))},Je.prototype.close=function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))},Je.prototype.sendMessage=function(Ve){this._sendOrEnqueue({body:Ve,type:"msg"})},Je}(H);Ht.CloseReason=Ke,we.exports=Ht},6412:(we,Pe,$)=>{"use strict";var F=$(9739).defer,re=function(){function oe(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return oe.prototype.put=function(H){this._hasValue=!0,this._value=H;var j=this._deferreds.shift();return j&&j.resolve(H),this},oe.prototype.take=function(){var H=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var j=F();return this._deferreds.push(j),j.promise.then(function(M){return H._hasValue=!1,M})},oe}();we.exports=re},2606:we=>{var Pe=function(){function $(F){Object.defineProperties(this,{_min:{value:F.min||100},_max:{value:F.max||1e4},_jitter:{value:F.jitter>0&&F.jitter<=1?F.jitter:0},_factor:{value:F.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var re=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var oe=Math.random(),H=Math.floor(oe*this._jitter*re);re=0==(1&Math.floor(10*oe))?re-H:re+H}return 0|Math.min(re,this._max)}},_timeoutID:{value:null,writable:!0}})}return $.prototype.backoff=function(F){var re=this,oe=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){re._attempts++,F()},oe)},$.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},$}();we.exports=Pe},3948:function(we){"use strict";var Pe=this&&this.__read||function(Z,ae){var ue="function"==typeof Symbol&&Z[Symbol.iterator];if(!ue)return Z;var ee,K,pe=ue.call(Z),Y=[];try{for(;(void 0===ae||ae-- >0)&&!(ee=pe.next()).done;)Y.push(ee.value)}catch(ce){K={error:ce}}finally{try{ee&&!ee.done&&(ue=pe.return)&&ue.call(pe)}finally{if(K)throw K.error}}return Y};function re(){return navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}we.exports={isAndroid:function $(){return/Android/.test(navigator.userAgent)},isIOS:function F(){return/iPad|iPhone|iPod/.test(navigator.userAgent)},isIpad:function oe(){return re()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))},isIphone:function H(){return re()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))},isMobile:function j(){return/Mobi/.test(navigator.userAgent)},isNonChromiumEdge:function M(Z){return"chrome"===Z&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")},mobileWebKitBrowser:function x(Z){return"safari"!==Z?null:"brave"in navigator?"brave":["edge","edg"].find(function(ae){return navigator.userAgent.toLowerCase().includes(ae)})||null},rebrandedChromeBrowser:function P(Z){if("chrome"!==Z)return null;if("brave"in navigator)return"brave";var ae=function U(Z){for(var ae=[],ue=[],pe=0;pe<Z.length;pe++)if("("===Z[pe])ae.push(pe);else if(")"===Z[pe]&&ae.length>0){var ee=ae.pop();0===ae.length&&ue.push(Z.substring(ee,pe+1))}return ue}(navigator.userAgent),pe=ae.reduce(function(K,ce){return K.replace(ce,"")},navigator.userAgent).match(/[^\s]+/g)||[];return Pe(pe.map(function(K){return K.split("/")[0].toLowerCase()})).slice(2).find(function(K){return!["chrome","mobile","safari"].includes(K)})||null}}},8126:function(we){"use strict";var Pe=this&&this.__read||function(re,oe){var H="function"==typeof Symbol&&re[Symbol.iterator];if(!H)return re;var M,x,j=H.call(re),P=[];try{for(;(void 0===oe||oe-- >0)&&!(M=j.next()).done;)P.push(M.value)}catch(U){x={error:U}}finally{try{M&&!M.done&&(H=j.return)&&H.call(j)}finally{if(x)throw x.error}}return P},$=this&&this.__spreadArray||function(re,oe){for(var H=0,j=oe.length,M=re.length;H<j;H++,M++)re[M]=oe[H];return re},F=function(){function re(oe,H){var j=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:H}}),Object.defineProperty(this,"_promise",{value:new Promise(function(M,P){oe(function(x){j._isCancelable=!1,M(x)},function(x){j._isCancelable=!1,P(x)},function(){return j._isCanceled})})})}return re.reject=function(oe){return new re(function(j,M){M(oe)},function(){})},re.resolve=function(oe){return new re(function(j){j(oe)},function(){})},re.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},re.prototype.catch=function(){var oe=[].slice.call(arguments),H=this._promise;return new re(function(M,P){H.catch.apply(H,$([],Pe(oe))).then(M,P)},this._onCancel)},re.prototype.then=function(){var oe=[].slice.call(arguments),H=this._promise;return new re(function(M,P){H.then.apply(H,$([],Pe(oe))).then(M,P)},this._onCancel)},re.prototype.finally=function(){var oe=[].slice.call(arguments),H=this._promise;return new re(function(M,P){H.finally.apply(H,$([],Pe(oe))).then(M,P)},this._onCancel)},re}();we.exports=F},8701:(we,Pe,$)=>{"use strict";var F=$(1730);we.exports.SDK_NAME=F.name+".js",we.exports.SDK_VERSION=F.version,we.exports.SDP_FORMAT="unified",we.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},we.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},we.exports.DEFAULT_ENVIRONMENT="prod",we.exports.DEFAULT_REALM="us1",we.exports.DEFAULT_REGION="gll",we.exports.DEFAULT_LOG_LEVEL="warn",we.exports.DEFAULT_LOGGER_NAME="twilio-video",we.exports.WS_SERVER=function(oe,H){return H="gll"===H?"global":encodeURIComponent(H),"prod"===oe?"wss://"+H+".vss.twilio.com/signaling":"wss://"+H+".vss."+oe+".twilio.com/signaling"},we.exports.PUBLISH_MAX_ATTEMPTS=5,we.exports.PUBLISH_BACKOFF_JITTER=10,we.exports.PUBLISH_BACKOFF_MS=20,we.exports.typeErrors={ILLEGAL_INVOKE:function(oe,H){return new TypeError("Illegal call to "+oe+": "+H)},INVALID_TYPE:function(oe,H){return new TypeError(oe+" must be "+function re(oe){return["a","e","i","o","u"].includes(oe.toLowerCase()[0])?"an":"a"}(H)+" "+H)},INVALID_VALUE:function(oe,H){return new RangeError(oe+" must be one of "+H.join(", "))},REQUIRED_ARGUMENT:function(oe){return new TypeError(oe+" must be specified")}},we.exports.DEFAULT_FRAME_RATE=24,we.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,we.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,we.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,we.exports.DEFAULT_NQ_LEVEL_LOCAL=1,we.exports.DEFAULT_NQ_LEVEL_REMOTE=0,we.exports.MAX_NQ_LEVEL=3,we.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,we.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,we.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:1e3*we.exports.DEFAULT_SESSION_TIMEOUT_SEC,jitter:1},we.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},we.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},we.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},we.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},we.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},we.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}},9059:(we,Pe,$)=>{"use strict";var F=$(4687);we.exports=function H(j){var M=$(7708),P={},x=M.getOrCreate(P),U=3;return function Z(){return U--,F(x,j.srcObject,250).then(function(ae){return!!ae&&(!(U>0)||Z())}).catch(function(){return!0})}().finally(function(){M.release(P)})}},1741:we=>{"use strict";var Pe=null;we.exports=function j(M){return Pe=Pe||document.createElement("canvas"),new Promise(function(P){var x=3;setTimeout(function U(){return x--,function H(M){try{var P=Pe.getContext("2d");P.drawImage(M,0,0,50,50);var U=P.getImageData(0,0,50,50).data.filter(function(ae,ue){return(ue+1)%4});return 0===Math.max.apply(Math,U)}catch(ae){return console.log("Error checking silence: ",ae),!1}}(M)?x>0?setTimeout(U,250):P(!0):P(!1)},250)})}},2181:we=>{"use strict";var Pe=function(){function $(F){var re=this;void 0===F&&(F=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){re._emitVisible("visible"===document.visibilityState)}}});for(var oe=0;oe<F;oe++)this._listeners.push([])}return $.prototype.clear=function(){for(var F=this._listeners.length,re=0;re<F;re++)this._listeners[re]=[]},$.prototype._listenerCount=function(){return this._listeners.reduce(function(F,re){return F+re.length},0)},$.prototype._emitVisible=function(F){for(var re=this,oe=Promise.resolve(),H=function(M){oe=oe.then(function(){return re._emitVisiblePhase(M,F)})},j=1;j<=this._listeners.length;j++)H(j);return oe},$.prototype._emitVisiblePhase=function(F,re){return Promise.all(this._listeners[F-1].map(function(H){var j=H(re);return j instanceof Promise?j:Promise.resolve(j)}))},$.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},$.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},$.prototype.onVisibilityChange=function(F,re){if("number"!=typeof F||F<=0||F>this._listeners.length)throw new Error("invalid phase: ",F);return this._listeners[F-1].push(re),1===this._listenerCount()&&this._start(),this},$.prototype.offVisibilityChange=function(F,re){if("number"!=typeof F||F<=0||F>this._listeners.length)throw new Error("invalid phase: ",F);var oe=this._listeners[F-1],H=oe.indexOf(re);return-1!==H&&(oe.splice(H,1),0===this._listenerCount()&&this._stop()),this},$}();we.exports=new Pe(2)},8606:function(we,Pe,$){"use strict";var M,F=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&(U[ae]=Z[ae])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function U(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(U.prototype=x.prototype,new U)}),re=$(9069).EventEmitter,oe=["signaling","room","media","quality","video-processor","preflight"],H=["debug","error","info","warning"],j=function(M){function P(x,U,Z,ae){void 0===ae&&(ae=null);var ue=M.call(this)||this;return ue.on("event",function(pe){var ee=pe.name,Y=pe.group,K=pe.level,ce=pe.payload;if("string"!=typeof ee)throw Z.error("Unexpected name: ",ee),new Error("Unexpected name: ",ee);if(!oe.includes(Y))throw Z.error("Unexpected group: ",Y),new Error("Unexpected group: ",Y);if(!H.includes(K))throw Z.error("Unexpected level: ",K),new Error("Unexpected level: ",K);var ye=Date.now(),ke=ye-U,fe=Object.assign({elapsedTime:ke,level:K},ce||{});x.publish(Y,ee,fe);var Ae=Object.assign({elapsedTime:ke,group:Y,level:K,name:ee,timestamp:ye},ce?{payload:ce}:{});Z[{debug:"debug",error:"error",info:"info",warning:"warn"}[K]]("event",Ae),ae&&"signaling"===Y&&ae.emit("event",Ae)}),ue}return F(P,M),P}(re);we.exports=j},3826:we=>{"use strict";var Pe=function(){function $(F){F=Object.assign({getKey:function(oe){return oe},getValue:function(oe){return oe},isLessThanOrEqualTo:function(oe,H){return oe<=H}},F),Object.defineProperties(this,{_getKey:{value:F.getKey},_getValue:{value:F.getValue},_isLessThanOrEqualTo:{value:F.isLessThanOrEqualTo},_map:{value:new Map}})}return $.prototype.toMap=function(){return new Map(this._map)},$.prototype.updateAndFilter=function(F){return F.filter(this.update,this)},$.prototype.update=function(F){var re=this._getKey(F),oe=this._getValue(F);return!(this._map.has(re)&&this._isLessThanOrEqualTo(oe,this._map.get(re))||(this._map.set(re,oe),0))},$}();we.exports=Pe},9739:function(we,Pe,$){"use strict";var bt,F=this&&this.__extends||(bt=function(Gt,ln){return(bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xe,Be){Xe.__proto__=Be}||function(Xe,Be){for(var pt in Be)Object.prototype.hasOwnProperty.call(Be,pt)&&(Xe[pt]=Be[pt])})(Gt,ln)},function(Gt,ln){if("function"!=typeof ln&&null!==ln)throw new TypeError("Class extends value "+String(ln)+" is not a constructor or null");function Xe(){this.constructor=Gt}bt(Gt,ln),Gt.prototype=null===ln?Object.create(ln):(Xe.prototype=ln.prototype,new Xe)}),re=this&&this.__read||function(bt,Gt){var ln="function"==typeof Symbol&&bt[Symbol.iterator];if(!ln)return bt;var Be,Fn,Xe=ln.call(bt),pt=[];try{for(;(void 0===Gt||Gt-- >0)&&!(Be=Xe.next()).done;)pt.push(Be.value)}catch(vn){Fn={error:vn}}finally{try{Be&&!Be.done&&(ln=Xe.return)&&ln.call(Xe)}finally{if(Fn)throw Fn.error}}return pt},oe=this&&this.__spreadArray||function(bt,Gt){for(var ln=0,Xe=Gt.length,Be=bt.length;ln<Xe;ln++,Be++)bt[Be]=Gt[ln];return bt},H=$(8701),j=H.typeErrors,M=H.trackPriority,P=$(7627),x=$(8066).sessionSID;function K(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function ve(bt,Gt,ln,Xe){if(!(Xe in Gt)&&!Xe.match(/^on[a-z]+$/)){var Be;try{Be=typeof bt[Xe]}catch{}"function"===Be&&(Gt[Xe]=function(){for(var pt,Fn=[],vn=0;vn<arguments.length;vn++)Fn[vn]=arguments[vn];return(pt=this[ln])[Xe].apply(pt,oe([],re(Fn)))})}}function Oe(bt){return"object"==typeof bt&&!Array.isArray(bt)}function Nt(bt){Object.getOwnPropertyNames(bt).forEach(function(Gt){Gt.startsWith("_")&&Et(bt,Gt)})}function Et(bt,Gt){var ln=Object.getOwnPropertyDescriptor(bt,Gt);ln.enumerable=!1,Object.defineProperty(bt,Gt,ln)}function Je(bt,Gt){void 0===Gt&&(Gt=[]),Gt.forEach(function(ln){bt.hasOwnProperty(ln)&&Et(bt,ln)})}function Ve(bt){return bt.map(Pt)}function Pt(bt){return Array.isArray(bt)?Ve(bt):bt instanceof Set?function $e(bt){return Ve(oe([],re(bt)))}(bt):bt instanceof Map?function De(bt){return oe([],re(bt.entries())).reduce(function(Gt,ln){var Xe,Be=re(ln,2);return Object.assign(((Xe={})[Be[0]]=Pt(Be[1]),Xe),Gt)},{})}(bt):bt&&"object"==typeof bt?function ot(bt){return Object.entries(bt).reduce(function(Gt,ln){var Xe,Be=re(ln,2);return Object.assign(((Xe={})[Be[0]]=Pt(Be[1]),Xe),Gt)},{})}(bt):bt}function Jt(bt){return vr(bt,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:Dr},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function Pn(bt){return vr(bt,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function Dr(bt){return vr(bt,[{prop:M.PRIORITY_HIGH,type:"object",transform:Pn},{prop:M.PRIORITY_LOW,type:"object",transform:Pn},{prop:M.PRIORITY_STANDARD,type:"object",transform:Pn}])}function vr(bt,Gt){return Gt.reduce(function(ln,Xe){var Be,pt=Xe.prop,vn=Xe.payloadProp,Ho=Xe.transform;return typeof bt[pt]===Xe.type?Object.assign(((Be={})[void 0===vn?pt:vn]=(void 0===Ho?function(yo){return yo}:Ho)(bt[pt]),Be),ln):ln},{})}Pe.constants=H,Pe.createBandwidthProfilePayload=function Ot(bt){return vr(bt,[{prop:"video",type:"object",transform:Jt}])},Pe.createMediaSignalingPayload=function Zn(bt,Gt,ln,Xe,Be,pt){var Fn={transports:[{type:"data-channel"}]};return Object.assign(bt?{active_speaker:Fn}:{},Gt?{network_quality:Fn}:{},pt?{render_hints:Fn}:{},Be?{publisher_hints:Fn}:{},ln?{track_priority:Fn}:{},Xe?{track_switch_off:Fn}:{})},Pe.createRoomConnectEventPayload=function qt(bt){function Gt(Be){return Be?"true":"false"}var ln={sessionSID:x,iceServers:(bt.iceServers||[]).length,audioTracks:(bt.tracks||[]).filter(function(Be){return"audio"===Be.kind}).length,videoTracks:(bt.tracks||[]).filter(function(Be){return"video"===Be.kind}).length,dataTracks:(bt.tracks||[]).filter(function(Be){return"data"===Be.kind}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(Be){var pt=re(Be,2),Fn=pt[0],vn=pt[1];ln[vn=vn||Fn]=Gt(!!bt[Fn])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(Be){var pt=re(Be,2),Fn=pt[0],vn=pt[1];vn=vn||Fn,"number"==typeof bt[Fn]?ln[vn]=bt[Fn]:isNaN(Number(bt[Fn]))||(ln[vn]=Number(bt[Fn]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(Be){var pt=re(Be,2),Fn=pt[0],vn=pt[1];vn=vn||Fn,"string"==typeof bt[Fn]?ln[vn]=bt[Fn]:"number"==typeof bt[Fn]&&"name"===Fn&&(ln[vn]=bt[Fn].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(Be){Be in bt&&(ln[Be]=JSON.stringify(bt[Be]))}),"networkQuality"in bt&&(ln.networkQualityConfiguration={},Oe(bt.networkQuality)?["local","remote"].forEach(function(Be){"number"==typeof bt.networkQuality[Be]&&(ln.networkQualityConfiguration[Be]=bt.networkQuality[Be])}):(ln.networkQualityConfiguration.remote=0,ln.networkQualityConfiguration.local=bt.networkQuality?1:0)),bt.bandwidthProfile&&bt.bandwidthProfile.video){var Xe=bt.bandwidthProfile.video||{};ln.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(Be){"number"==typeof Xe[Be]||"string"==typeof Xe[Be]?ln.bandwidthProfileOptions[Be]=Xe[Be]:"boolean"==typeof Xe[Be]?ln.bandwidthProfileOptions[Be]=Gt(Xe[Be]):"object"==typeof Xe[Be]&&(ln.bandwidthProfileOptions[Be]=JSON.stringify(Xe[Be]))})}return{group:"room",name:"connect",level:"info",payload:ln}},Pe.createSubscribePayload=function ir(bt){return{rules:[{type:bt?"include":"exclude",all:!0}],revision:1}},Pe.asLocalTrack=function U(bt,Gt){if(bt instanceof Gt.LocalAudioTrack||bt instanceof Gt.LocalVideoTrack||bt instanceof Gt.LocalDataTrack)return bt;if(bt instanceof Gt.MediaStreamTrack)return"audio"===bt.kind?new Gt.LocalAudioTrack(bt,Gt):new Gt.LocalVideoTrack(bt,Gt);throw j.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},Pe.asLocalTrackPublication=function Z(bt,Gt,ln,Xe){return new(0,{audio:Xe.LocalAudioTrackPublication,video:Xe.LocalVideoTrackPublication,data:Xe.LocalDataTrackPublication}[bt.kind])(Gt,bt,ln,Xe)},Pe.capitalize=function ae(bt){return bt[0].toUpperCase()+bt.slice(1)},Pe.deprecateEvents=function ue(bt,Gt,ln,Xe){var Be=new Set;Gt.on("newListener",function pt(Fn){ln.has(Fn)&&!Be.has(Fn)&&(Xe.deprecated(bt+"#"+Fn+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(ln.get(Fn)?" Use "+bt+"#"+ln.get(Fn)+" instead.":"")),Be.add(Fn)),Be.size>=ln.size&&Gt.removeListener("newListener",pt)})},Pe.difference=function pe(bt,Gt){bt=Array.isArray(bt)?new Set(bt):new Set(bt.values()),Gt=Array.isArray(Gt)?new Set(Gt):new Set(Gt.values());var ln=new Set;return bt.forEach(function(Xe){Gt.has(Xe)||ln.add(Xe)}),ln},Pe.filterObject=function ee(bt,Gt){return Object.keys(bt).reduce(function(ln,Xe){return bt[Xe]!==Gt&&(ln[Xe]=bt[Xe]),ln},{})},Pe.flatMap=function Y(bt,Gt){var ln=bt instanceof Map||bt instanceof Set?Array.from(bt.values()):bt;return Gt=Gt||function(Be){return Be},ln.reduce(function(Xe,Be){var pt=Gt(Be);return Xe.concat(pt)},[])},Pe.getPlatform=function ce(){var bt=K(),ln=re(bt.match(/\(([^)]+)\)/)||[],2)[1];return re((void 0===ln?"unknown":ln).split(";").map(function(Fn){return Fn.trim()}),1)[0].toLowerCase()},Pe.getUserAgent=K,Pe.hidePrivateProperties=Nt,Pe.hidePrivateAndCertainPublicPropertiesInClass=function Ht(bt,Gt){return function(ln){function Xe(){for(var Be=[],pt=0;pt<arguments.length;pt++)Be[pt]=arguments[pt];var Fn=ln.apply(this,oe([],re(Be)))||this;return Nt(Fn),Je(Fn,Gt),Fn}return F(Xe,ln),Xe}(bt)},Pe.isDeepEqual=function he(bt,Gt){if(bt===Gt)return!0;if(typeof bt!=typeof Gt)return!1;if(null===bt)return null===Gt;if(null===Gt)return!1;if(Array.isArray(bt))return Array.isArray(Gt)&&bt.length===Gt.length&&bt.every(function(Be,pt){return he(Be,Gt[pt])});if("object"==typeof bt){var ln=Object.keys(bt).sort(),Xe=Object.keys(Gt).sort();return!Array.isArray(Gt)&&he(ln,Xe)&&ln.every(function(Be){return he(bt[Be],Gt[Be])})}return!1},Pe.isNonArrayObject=Oe,Pe.inRange=function wr(bt,Gt,ln){return Gt<=bt&&bt<=ln},Pe.makeUUID=function ye(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(bt){var Gt=16*Math.random()|0;return("x"===bt?Gt:3&Gt|8).toString(16)})},Pe.oncePerTick=function ke(bt){var Gt=null;function ln(){Gt=null,bt()}return function(){Gt&&clearTimeout(Gt),Gt=setTimeout(ln)}},Pe.promiseFromEvents=function fe(bt,Gt,ln,Xe){return new Promise(function(Be,pt){function Fn(){var no=[].slice.call(arguments);Xe&&Gt.removeListener(Xe,vn),Be.apply(void 0,oe([],re(no)))}function vn(){var no=[].slice.call(arguments);Gt.removeListener(ln,Fn),pt.apply(void 0,oe([],re(no)))}Gt.once(ln,Fn),Xe&&Gt.once(Xe,vn),bt()})},Pe.getOrNull=function Ae(bt,Gt){return Gt.split(".").reduce(function(ln,Xe){return ln?ln[Xe]:null},bt)},Pe.defer=function Ee(){var bt={};return bt.promise=new Promise(function(Gt,ln){bt.resolve=Gt,bt.reject=ln}),bt},Pe.delegateMethods=function le(bt,Gt,ln){for(var Xe in bt)ve(bt,Gt,ln,Xe)},Pe.proxyProperties=function je(bt,Gt,ln){Object.getOwnPropertyNames(bt).forEach(function(Xe){!function Fe(bt,Gt,ln,Xe){if(!(Xe in Gt)){if(Xe.match(/^on[a-z]+$/))return Object.defineProperty(Gt,Xe,{value:null,writable:!0}),void ln.addEventListener(Xe.slice(2),function(){for(var Be=[],pt=0;pt<arguments.length;pt++)Be[pt]=arguments[pt];Gt.dispatchEvent.apply(Gt,oe([],re(Be)))});Object.defineProperty(Gt,Xe,{enumerable:!0,get:function(){return ln[Xe]}})}}(0,Gt,ln,Xe)})},Pe.legacyPromise=function He(bt,Gt,ln){return Gt?bt.then(function(Xe){Gt(Xe)},function(Xe){ln(Xe)}):bt},Pe.buildLogLevels=function rt(bt){return"string"==typeof bt?{default:bt,media:bt,signaling:bt,webrtc:bt}:bt},Pe.trackClass=function nt(bt,Gt){return(Gt=Gt?"Local":"")+(bt.kind||"").replace(/\w{1}/,function(ln){return ln.toUpperCase()})+"Track"},Pe.trackPublicationClass=function Ke(bt,Gt){return(Gt=Gt?"Local":"")+(bt.kind||"").replace(/\w{1}/,function(ln){return ln.toUpperCase()})+"TrackPublication"},Pe.valueToJSON=Pt,Pe.withJitter=function Ir(bt,Gt){var ln=Math.random();return bt-Gt+Math.floor(2*Gt*ln+.5)},Pe.isChromeScreenShareTrack=function Xi(bt){return"chrome"===P.guessBrowser()&&"video"===bt.kind&&"displaySurface"in bt.getSettings()},Pe.isUserMediaTrack=function Vr(bt){return"string"==typeof bt.getSettings().deviceId},Pe.waitForSometime=function Mo(bt){return void 0===bt&&(bt=10),new Promise(function(Gt){return setTimeout(Gt,bt)})},Pe.waitForEvent=function ra(bt,Gt){return new Promise(function(ln){bt.addEventListener(Gt,function Xe(Be){bt.removeEventListener(Gt,Xe),ln(Be)})})}},3744:function(we,Pe,$){"use strict";var fe,F=this&&this.__extends||(fe=function(Ae,Ee){return(fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,le){ve.__proto__=le}||function(ve,le){for(var he in le)Object.prototype.hasOwnProperty.call(le,he)&&(ve[he]=le[he])})(Ae,Ee)},function(Ae,Ee){if("function"!=typeof Ee&&null!==Ee)throw new TypeError("Class extends value "+String(Ee)+" is not a constructor or null");function ve(){this.constructor=Ae}fe(Ae,Ee),Ae.prototype=null===Ee?Object.create(Ee):(ve.prototype=Ee.prototype,new ve)}),re=this&&this.__assign||function(){return re=Object.assign||function(fe){for(var Ae,Ee=1,ve=arguments.length;Ee<ve;Ee++)for(var le in Ae=arguments[Ee])Object.prototype.hasOwnProperty.call(Ae,le)&&(fe[le]=Ae[le]);return fe},re.apply(this,arguments)},oe=$(9069).EventEmitter,H=$(9739).getUserAgent,x=globalThis,U=x.WebSocket?x.WebSocket:$(3332),Z=$(8701),ae=Z.hardwareDevicePublisheriPad,ue=Z.hardwareDevicePublisheriPhone,pe=$(9739),ee=$(3948),Y=function(fe){function Ae(Ee,ve,le,he,Oe,je){var Fe=fe.call(this)||this;return je=Object.assign({gateway:ce(he,Oe)+"/v1/VideoEvents",maxReconnectAttempts:5,reconnectIntervalMs:50,userAgent:H(),WebSocket:U},je),Object.defineProperties(Fe,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:pe.defer()},_reconnectAttemptsLeft:{value:je.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:je.WebSocket}}),Fe._readyToConnect.promise.then(function(He){var rt=He.roomSid,nt=He.participantSid,Ke=Fe;Fe.on("disconnected",function Nt(Ht){if(Ke._session=null,Ht&&Ke._reconnectAttemptsLeft>0)return Ke.emit("reconnecting"),void function ke(fe,Ae,Ee,ve,le,he,Oe){var je=Date.now()-fe._connectTimestamp,Fe=Oe.reconnectIntervalMs-je;Fe>0?setTimeout(function(){K(fe,Ae,Ee,ve,le,he,Oe)},Fe):K(fe,Ae,Ee,ve,le,he,Oe)}(Ke,Ee,ve,le,rt,nt,je);Ke.removeListener("disconnected",Nt)}),K(Fe,Ee,ve,le,rt,nt,je)}).catch(function(){}),Fe}return F(Ae,fe),Ae.prototype.connect=function(Ee,ve){this._readyToConnect.resolve({roomSid:Ee,participantSid:ve})},Ae.prototype._publish=function(Ee){Ee.session=this._session,this._ws.send(JSON.stringify(Ee))},Ae.prototype.disconnect=function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},Ae.prototype.publish=function(Ee,ve,le){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:Ee,name:ve,payload:le,timestamp:Date.now(),type:"event",version:1}),!0)},Ae}(oe);function K(fe,Ae,Ee,ve,le,he,Oe){fe._connectTimestamp=Date.now(),fe._reconnectAttemptsLeft--,fe._ws=new Oe.WebSocket(Oe.gateway);var je=fe._ws;je.addEventListener("close",function(Fe){1e3!==Fe.code?fe.emit("disconnected",new Error("WebSocket Error "+Fe.code+": "+Fe.reason)):fe.emit("disconnected")}),je.addEventListener("message",function(Fe){!function ye(fe,Ae,Ee){switch(Ae.type){case"connected":fe._session=Ae.session,fe._reconnectAttemptsLeft=Ee.maxReconnectAttempts,fe._eventQueue.splice(0).forEach(fe._publish,fe),fe.emit("connected");break;case"error":fe._ws.close(),fe.emit("disconnected",new Error(Ae.message))}}(fe,JSON.parse(Fe.data),Oe)}),je.addEventListener("open",function(){var Fe={type:"connect",token:Ae,version:1};Fe.publisher={name:Ee,sdkVersion:ve,userAgent:Oe.userAgent,participantSid:he,roomSid:le},ee.isIpad()?Fe.publisher=re(re({},Fe.publisher),ae):ee.isIphone()&&(Fe.publisher=re(re({},Fe.publisher),ue)),je.send(JSON.stringify(Fe))})}function ce(fe,Ae){return"prod"===fe?"wss://sdkgw."+Ae+".twilio.com":"wss://sdkgw."+fe+"-"+Ae+".twilio.com"}we.exports=Y},4920:we=>{"use strict";var Pe=function(){function $(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return $.prototype.connect=function(){},$.prototype.disconnect=function(){return!!this._connected&&(this._connected=!1,!0)},$.prototype.publish=function(){return this._connected},$}();we.exports=Pe},6396:(we,Pe,$)=>{"use strict";var F=$(9739).defer,re=function(){function oe(){Object.defineProperties(this,{_audio:{value:F(),writable:!0},_video:{value:F(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return oe.prototype.resolveDeferred=function(H){"audio"===H?this._audio.resolve():this._video.resolve()},oe.prototype.startDeferred=function(H){"audio"===H?this._audio=F():this._video=F()},oe.prototype.whenResolved=function(H){return"audio"===H?this._audio.promise:this._video.promise},oe}();we.exports=new re},1458:function(we,Pe,$){"use strict";var x,F=this&&this.__read||function(K,ce){var ye="function"==typeof Symbol&&K[Symbol.iterator];if(!ye)return K;var fe,Ee,ke=ye.call(K),Ae=[];try{for(;(void 0===ce||ce-- >0)&&!(fe=ke.next()).done;)Ae.push(fe.value)}catch(ve){Ee={error:ve}}finally{try{fe&&!fe.done&&(ye=ke.return)&&ye.call(ke)}finally{if(Ee)throw Ee.error}}return Ae},re=this&&this.__spreadArray||function(K,ce){for(var ye=0,ke=ce.length,fe=K.length;ye<ke;ye++,fe++)K[fe]=ce[ye];return K},oe=$(7846).getLogger,H=$(8701),j=H.DEFAULT_LOG_LEVEL,M=H.DEFAULT_LOGGER_NAME,P=$(8701).typeErrors,Z=function(){function K(ce,ye,ke,fe,Ae){if("string"!=typeof ce)throw P.INVALID_TYPE("moduleName","string");if(!ye)throw P.REQUIRED_ARGUMENT("component");"object"!=typeof ke&&(ke={}),Ae=Ae||oe,Y(ke),Object.defineProperties(this,{_component:{value:ye},_logLevels:{value:ke},_warnings:{value:new Set},_loggerName:{get:function(){var ve=fe&&"string"==typeof fe?fe:M;return this._logLevelsEqual||(ve=ve+"-"+ce),ve}},_logger:{get:function(){var ve=Ae(this._loggerName),le=this._logLevels[ce]||j;return ve.setDefaultLevel(le="off"===le?"silent":le),ve}},_logLevelsEqual:{get:function(){return 1===new Set(Object.values(this._logLevels)).size}},logLevel:{get:function(){return K.getLevelByName(ke[ce]||j)}},name:{get:ye.toString.bind(ye)}})}return K.getLevelByName=function(ce){return isNaN(ce)?(ee(ce=ce.toUpperCase()),K[ce]):parseInt(ce,10)},K.prototype.createLog=function(ce,ye){var ke=this._loggerName;return this._logLevelsEqual||(ke=ke.substring(0,ke.lastIndexOf("-"))),new K(ce,ye,this._logLevels,ke)},K.prototype.setLevels=function(ce){return Y(ce),Object.assign(this._logLevels,ce),this},K.prototype.log=function(ce,ye){var ke=K._levels[ce];if(!ke)throw P.INVALID_VALUE("logLevel",ue);ke=ke.toLowerCase();var fe=[(new Date).toISOString(),ke,this.name];return(this._logger[ke]||function(){}).apply(void 0,re([],F(fe.concat(ye)))),this},K.prototype.debug=function(){return this.log(K.DEBUG,[].slice.call(arguments))},K.prototype.deprecated=function(ce){var ye=function U(K){if((x=x||new Map).has(K))return x.get(K);var ce=new Set;return x.set(K,ce),ce}(this._component.constructor);return ye.has(ce)?this:(ye.add(ce),this.warn(ce))},K.prototype.info=function(){return this.log(K.INFO,[].slice.call(arguments))},K.prototype.warn=function(){return this.log(K.WARN,[].slice.call(arguments))},K.prototype.warnOnce=function(ce){return this._warnings.has(ce)?this:(this._warnings.add(ce),this.warn(ce))},K.prototype.error=function(){return this.log(K.ERROR,[].slice.call(arguments))},K.prototype.throw=function(ce,ye){throw ce.clone&&(ce=ce.clone(ye)),this.log(K.ERROR,ce),ce},K}();Object.defineProperties(Z,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var ae={},ue=[],pe=Z._levels.map(function(K,ce){return ae[K]=!0,ue.push(ce),K});function ee(K){if(!(K in ae))throw P.INVALID_VALUE("level",pe)}function Y(K){Object.keys(K).forEach(function(ce){ee(K[ce].toUpperCase())})}we.exports=Z},8218:we=>{"use strict";var Pe=function(){function $(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return $.prototype.get=function(){var F=this._samples;return(F[1].numerator-F[0].numerator)/(F[1].denominator-F[0].denominator||1/0)},$.prototype.putSample=function(F,re){var oe=this._samples;oe.shift(),oe.push({denominator:re,numerator:F})},$}();we.exports=Pe},2643:we=>{"use strict";var Pe=function(){function $(F,re){var oe=this,H=(re=Object.assign({navigator,window},re)).navigator,j=H.connection||{type:null},M=j.type,P=j.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var ae=M!==oe.type&&oe.isOnline;M=oe.type,ae&&F()}},_target:{value:j}}:{_events:{value:["online"]},_listener:{value:F},_target:{value:re.window}};Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof H.onLine||H.onLine}},type:{enumerable:!0,get:function(){return j.type||null}},_listener:P._listener,_events:P._events,_target:P._target})}return $.prototype.start=function(){var F=this;this._events.forEach(function(re){F._target.addEventListener(re,F._listener)})},$.prototype.stop=function(){var F=this;this._events.forEach(function(re){F._target.removeEventListener(re,F._listener)})},$}();we.exports=Pe},5318:function(we){"use strict";var oe,Pe=this&&this.__extends||(oe=function(H,j){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(M[x]=P[x])})(H,j)},function(H,j){if("function"!=typeof j&&null!==j)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function M(){this.constructor=H}oe(H,j),H.prototype=null===j?Object.create(j):(M.prototype=j.prototype,new M)}),$=function(){function oe(H){Object.defineProperties(this,{_callback:{value:H}})}return oe.prototype.observe=function(){},oe.prototype.unobserve=function(){},oe.prototype.makeVisible=function(H){var j=this._makeFakeEntry(H,!0);this._callback([j])},oe.prototype.makeInvisible=function(H){var j=this._makeFakeEntry(H,!1);this._callback([j])},oe.prototype._makeFakeEntry=function(H,j){return{target:H,isIntersecting:j}},oe}(),F=function(oe){function H(){return null!==oe&&oe.apply(this,arguments)||this}return Pe(H,oe),H}($),re=function(oe){function H(){return null!==oe&&oe.apply(this,arguments)||this}return Pe(H,oe),H.prototype.resize=function(j){var M=this._makeFakeEntry(j,!0);this._callback([M])},H}($);we.exports={NullIntersectionObserver:F,NullResizeObserver:re,NullObserver:$}},3898:function(we,Pe,$){"use strict";var F=this&&this.__read||function(Fe,He){var rt="function"==typeof Symbol&&Fe[Symbol.iterator];if(!rt)return Fe;var Ke,Ht,nt=rt.call(Fe),Nt=[];try{for(;(void 0===He||He-- >0)&&!(Ke=nt.next()).done;)Nt.push(Ke.value)}catch(Et){Ht={error:Et}}finally{try{Ke&&!Ke.done&&(rt=nt.return)&&rt.call(nt)}finally{if(Ht)throw Ht.error}}return Nt},re=$(9739),oe=re.difference,H=re.flatMap,j=$(570),M={0:"PCMU",8:"PCMA"};function P(Fe){return Array.from(U(Fe)).reduce(function(He,rt){var nt=rt[0],Ke=rt[1],Nt=He.get(Ke)||[];return He.set(Ke,Nt.concat(nt))},new Map)}function x(Fe){return ue(Fe).reduce(function(He,rt){var nt=ae(rt);return nt?He.set(nt,rt):He},new Map)}function U(Fe){return pe(Fe).reduce(function(He,rt){var nt=new RegExp("a=rtpmap:"+rt+" ([^/]+)"),Ke=Fe.match(nt),Nt=Ke?Ke[1].toLowerCase():M[rt]?M[rt].toLowerCase():"";return He.set(rt,Nt)},new Map)}function Z(Fe,He){var rt=new RegExp("^a=fmtp:"+Fe+" (.+)$","m"),nt=He.match(rt);return nt&&nt[1].split(";").reduce(function(Ke,Nt){var Ht=F(Nt.split("="),2),Je=Ht[1];return Ke[Ht[0]]=isNaN(Je)?Je:parseInt(Je,10),Ke},{})}function ae(Fe){var He=Fe.match(/^a=mid:(.+)$/m);return He&&He[1]}function ue(Fe,He,rt){return Fe.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(nt){return"m="+nt}).filter(function(nt){var Ke=new RegExp("m="+(He||".*"),"gm"),Nt=new RegExp("a="+(rt||".*"),"gm");return Ke.test(nt)&&Nt.test(nt)})}function pe(Fe){var rt=Fe.split("\r\n")[0].match(/([0-9]+)/g);return rt?rt.slice(1).map(function(nt){return parseInt(nt,10)}):[]}function Y(Fe,He){var rt=He.split("\r\n"),nt=rt[0],Ke=rt.slice(1);return[nt=nt.replace(/([0-9]+\s?)+$/,Fe.join(" "))].concat(Ke).join("\r\n")}function ve(Fe,He){var rt=ue(Fe);return[Fe.split("\r\nm=")[0]].concat(rt.map(function(Ke){if(!/^m=(audio|video)/.test(Ke))return Ke;var Nt=ae(Ke);if(!Nt)return Ke;var Ht=He.get(Nt);if(!Ht)return Ke;var Et=(Ke.match(/^a=msid:(.+)$/m)||[])[1];if(!Et)return Ke;var Je=F(Et.split(" "),2),Ve=Je[0],$e=Je[1],De=new RegExp("msid:"+Ve+($e?" "+$e:"")+"$","gm");return Ke.replace(De,"msid:"+Ve+" "+Ht)})).join("\r\n")}function Oe(Fe,He){return"a=fmtp:"+Fe+" "+Object.entries(He).map(function(nt){var Ke=F(nt,2);return Ke[0]+"="+Ke[1]}).join(";")}Pe.addOrRewriteNewTrackIds=function Ee(Fe,He,rt){var nt=Array.from(rt).reduce(function(Ke,Nt){var Ht=F(Nt,2),Je=Ht[1];return ue(Fe,Ht[0],"send(only|recv)").map(ae).filter(function(De){return!He.has(De)}).forEach(function(De,ot){return Ke.set(De,Je[ot])}),Ke},new Map);return ve(Fe,nt)},Pe.addOrRewriteTrackIds=ve,Pe.createCodecMapForMediaSection=P,Pe.createPtToCodecName=U,Pe.disableRtx=function he(Fe){var He=ue(Fe);return[Fe.split("\r\nm=")[0]].concat(He.map(function(nt){if(!/^m=video/.test(nt))return nt;var Nt=P(nt).get("rtx");if(!Nt)return nt;var Ht=new Set(pe(nt));Nt.forEach(function($e){return Ht.delete($e)});var Et=nt.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),Je=Et&&Et[1],Ve=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(Je?[new RegExp("^a=ssrc:"+Je+" .+$")]:[]);return nt=nt.split("\r\n").filter(function($e){return Ve.every(function(De){return!De.test($e)})}).join("\r\n"),Y(Array.from(Ht),nt)})).join("\r\n")},Pe.enableDtxForOpus=function je(Fe,He){var rt=ue(Fe),nt=Fe.split("\r\nm=")[0];return He=He||rt.filter(function(Ke){return/^m=audio/.test(Ke)}).map(ae),[nt].concat(rt.map(function(Ke){if(!/^m=audio/.test(Ke))return Ke;var Ht=P(Ke).get("opus");if(!Ht)return Ke;var Et=Z(Ht,Ke);if(!Et)return Ke;var Je=Oe(Ht,Et),Ve=new RegExp(Je),$e=ae(Ke);He.includes($e)?Et.usedtx=1:delete Et.usedtx;var De=Oe(Ht,Et);return Ke.replace(Ve,De)})).join("\r\n")},Pe.filterLocalCodecs=function fe(Fe,He){var rt=ue(Fe),nt=Fe.split("\r\nm=")[0],Ke=x(He);return[nt].concat(rt.map(function(Nt){return function ke(Fe,He,rt){if(!/^m=(audio|video)/.test(Fe))return Fe;var nt=ae(Fe),Ke=nt&&He.get(nt);if(!Ke)return Fe;var Nt=U(Ke),Ht=P(Fe),Et=H(Array.from(Nt),function(De){var ot=F(De,2),Pt=ot[0],qt=ot[1];return"rtx"===qt||rt.includes(qt)?[]:function ye(Fe,He,rt,nt,Ke){var Nt=rt.get(Fe)||[];if(Nt.length<=1)return Nt;var Ht=Z(He,Ke);if(!Ht)return Nt;var Et=Nt.find(function(Je){var Ve=Z(Je,nt);return Ve&&Object.keys(Ht).every(function($e){return Ht[$e]===Ve[$e]})});return"number"==typeof Et?[Et]:Nt}(qt,Pt,Ht,Fe,Ke)}),Je=Ht.get("rtx")||[];Et=Et.concat(Je.filter(function(De){var ot=Z(De,Fe);return ot&&Et.includes(ot.apt)}));var Ve=Fe.split("\r\n").filter(function(De){var ot=De.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),Pt=ot&&ot[2];return!ot||Pt&&Et.includes(parseInt(Pt,10))});return Y(pe(Fe).filter(function(De){return Et.includes(De)}),Ve.join("\r\n"))}(Nt,Ke,[])})).join("\r\n")},Pe.getMediaSections=ue,Pe.removeSSRCAttributes=function le(Fe,He){return Fe.split("\r\n").filter(function(rt){return!He.find(function(nt){return new RegExp("a=ssrc:.*"+nt+":","g").test(rt)})}).join("\r\n")},Pe.revertSimulcast=function Ae(Fe,He,rt,nt){void 0===nt&&(nt=!1);var Ke=x(rt),Nt=x(He),Ht=ue(Fe);return[Fe.split("\r\nm=")[0]].concat(Ht.map(function(Je){if(Je=Je.replace(/\r\n$/,""),!/^m=video/.test(Je))return Je;var Ve=Je.match(/^a=mid:(.+)$/m),$e=Ve&&Ve[1];if(!$e)return Je;var De=Ke.get($e),ot=U(De),Pt=pe(De),qt=Pt.length&&"vp8"===ot.get(Pt[0]);return nt||!qt?Nt.get($e).replace(/\r\n$/,""):Je})).concat("").join("\r\n")},Pe.setCodecPreferences=function K(Fe,He,rt){var nt=ue(Fe);return[Fe.split("\r\nm=")[0]].concat(nt.map(function(Nt){if(!/^m=(audio|video)/.test(Nt))return Nt;var Ht=Nt.match(/^m=(audio|video)/)[1],Et=P(Nt),Ve=function ee(Fe,He){He=He.map(function(Nt){return Nt.codec.toLowerCase()});var rt=H(He,function(Nt){return Fe.get(Nt)||[]}),nt=oe(Array.from(Fe.keys()),He),Ke=H(nt,function(Nt){return Fe.get(Nt)});return rt.concat(Ke)}(Et,"audio"===Ht?He:rt),$e=Y(Ve,Nt),De=Et.get("pcma")||[],ot=Et.get("pcmu")||[];return("audio"===Ht?new Set(De.concat(ot)):new Set).has(Ve[0])?$e.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):$e})).join("\r\n")},Pe.setSimulcast=function ce(Fe,He){var rt=ue(Fe);return[Fe.split("\r\nm=")[0]].concat(rt.map(function(Ke){if(Ke=Ke.replace(/\r\n$/,""),!/^m=video/.test(Ke))return Ke;var Nt=P(Ke),Ht=pe(Ke),Et=new Set(Nt.get("vp8")||[]);return Ht.some(function(Ve){return Et.has(Ve)})?j(Ke,He):Ke})).concat("").join("\r\n")}},3073:(we,Pe,$)=>{"use strict";var F=$(1647).RTCSessionDescription,re=$(3898),oe=re.createPtToCodecName,H=re.getMediaSections;function P(Y){var K=oe(Y);Y=function x(Y,K){return Array.from(K.keys()).reduce(function(ce,ye){var ke=new RegExp("^a=rtpmap:"+ye+" rtx.+$","gm");return(ce.match(ke)||[]).slice("rtx"===K.get(ye)?1:0).reduce(function(fe,Ae){var Ee=new RegExp("\r\n"+Ae),ve=new RegExp("\r\na=fmtp:"+ye+" apt=[0-9]+");return fe.replace(Ee,"").replace(ve,"")},ce)},Y)}(Y,K);var ce=function U(Y){var K=new Map;return Y.forEach(function(ce,ye){var ke=K.get(ce)||new Set;return K.set(ce,ke.add(ye))}),K}(K),ye=ce.get("rtx")||new Set,ke=new Set,fe=function Z(Y,K,ce,ye){return Array.from(ce).reduce(function(ke,fe){var Ae=new RegExp("a=fmtp:"+fe+" apt=(\\d+)"),Ee=Y.match(Ae);if(!Ee)return ye.add(fe),ke;var ve=Number.parseInt(Ee[1]);return K.has(ve)?"rtx"===K.get(ve)?(ye.add(fe),ke):ke.set(fe,ve):(ye.add(fe),ke)},new Map)}(Y,K,ye,ke),Ae=function ae(Y,K){var ce=Array.from(Y).reduce(function(ye,ke){var fe=ke[0],Ae=ke[1],Ee=ye.get(Ae)||new Set;return ye.set(Ae,Ee.add(fe))},new Map);return Array.from(ce).reduce(function(ye,ke){var fe=ke[0],Ae=Array.from(ke[1]);return Ae.length>1?(Ae.forEach(function(Ee){K.add(Ee)}),ye):ye.set(fe,Ae[0])},new Map)}(fe,ke),Ee=Array.from(ke);return["h264","vp8","vp9"].reduce(function(he,Oe){var je=ce.get(Oe)||new Set;return Array.from(je).reduce(function(Fe,He){return Ae.has(He)?Fe:Fe.add(He)},he)},new Set).forEach(function(he){if(Ee.length){var Oe=Ee.shift();Y=function ee(Y,K,ce){return Y.endsWith("\r\n")?Y+"a=fmtp:"+K+" apt="+ce+"\r\n":Y+"\r\na=fmtp:"+K+" apt="+ce}(Y=ue(Y,Oe),Oe,he)}}),Ee.forEach(function(he){Y=function pe(Y,K){var ce=new RegExp("a=rtpmap:"+K+".*\r\n","gm");return Y.replace(ce,"")}(Y=ue(Y,he),he)}),Y}function ue(Y,K){var ce=new RegExp("a=fmtp:"+K+".*\r\n","gm");return Y.replace(ce,"")}we.exports=function j(Y){var K={type:Y.type};return"rollback"!==Y.type&&(K.sdp=function M(Y){var K=H(Y);return[Y.split("\r\nm=")[0]].concat(K.map(P)).join("\r\n")}(Y.sdp)),new F(K)}},570:function(we,Pe,$){"use strict";var F=this&&this.__read||function(ee,Y){var K="function"==typeof Symbol&&ee[Symbol.iterator];if(!K)return ee;var ye,fe,ce=K.call(ee),ke=[];try{for(;(void 0===Y||Y-- >0)&&!(ye=ce.next()).done;)ke.push(ye.value)}catch(Ae){fe={error:Ae}}finally{try{ye&&!ye.done&&(K=ce.return)&&K.call(ce)}finally{if(fe)throw fe.error}}return ke},re=$(9739),oe=re.difference,H=re.flatMap;function j(){return String(Math.floor(4294967295*Math.random()))}var M=function(){function ee(Y,K,ce){Object.defineProperties(this,{cName:{enumerable:!0,value:ce},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:K},trackId:{enumerable:!0,value:Y}})}return ee.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var Y=[j(),j()];Y.forEach(function(K){this.primarySSRCs.add(K)},this),this.rtxPairs.size&&Y.forEach(function(K){this.rtxPairs.set(j(),K)},this)}},ee.prototype.addSSRC=function(Y,K,ce){K?this.rtxPairs.set(Y,K):this.primarySSRCs.add(Y),this.isSimulcastEnabled=this.isSimulcastEnabled||ce},ee.prototype.toSdpLines=function(Y){var K=this,ce=Y?[]:Array.from(this.rtxPairs.entries()).map(function(ve){return ve.reverse()}),ye=Array.from(this.primarySSRCs.values()),ke=ce.length?H(ce):ye,fe=H(ke,function(ve){return["a=ssrc:"+ve+" cname:"+K.cName,"a=ssrc:"+ve+" msid:"+K.streamId+" "+K.trackId]}),Ae=ce.map(function(ve){return"a=ssrc-group:FID "+ve.join(" ")}),Ee=["a=ssrc-group:SIM "+ye.join(" ")];return Ae.concat(fe).concat(Ee)},ee}();function P(ee,Y){return(ee.match(new RegExp(Y,"gm"))||[]).map(function(ce){return(ce.match(new RegExp(Y))||[]).slice(1)})}we.exports=function pe(ee,Y){var K=function ue(ee){var Y=function x(ee){return new Set(H(P(ee,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}(ee),K=function Z(ee){return new Map(P(ee,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map(function(K){return K.reverse()}))}(ee),ce=function ae(ee){var Y=F(H(P(ee,"^a=msid:(.+) (.+)$")),2),K=Y[0],ce=Y[1];return H(P(ee,"^a=ssrc:(.+) cname:.+$")).map(function(ke){return[ke,K,ce]})}(ee);return ce.reduce(function(ye,ke){var fe=ke[0],Ae=ke[1],Ee=ke[2],ve=ye.get(Ee)||new M(Ee,Ae,function U(ee,Y,K){return ee.match(new RegExp("a=ssrc:"+Y+" "+K+":(.+)"))[1]}(ee,fe,"cname")),le=K.get(fe)||null;return ve.addSSRC(fe,le,Y.has(fe)),ye.set(Ee,ve)},new Map)}(ee),ce=Array.from(K.keys()),ye=Array.from(Y.keys()),ke=oe(ce,ye),fe=oe(ye,ce);H(ke,function(Fe){return K.get(Fe)}).forEach(function(Fe){Fe.addSimulcastSSRCs(),Y.set(Fe.trackId,Fe)}),ye=Array.from(Y.keys());var Ee=oe(ye,fe),ve=H(Ee,function(Fe){return Y.get(Fe)}),le=!ee.match(/a=rtpmap:[0-9]+ rtx/),he=H(ve,function(Fe){return Fe.toSdpLines(le)}),Oe=H(new Set(ee.split("\r\n").concat(he))),je="a=x-google-flag:conference";return ee.match(je)||Oe.push(je),Oe.join("\r\n")}},1057:(we,Pe,$)=>{"use strict";var F=$(3898).getMediaSections,re=function(){function oe(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return oe.prototype.match=function(H){return this._midsToTrackIds.get(H.transceiver.mid)||null},oe.prototype.update=function(H){var j=F(H,"(audio|video)");this._midsToTrackIds=j.reduce(function(M,P){var x=P.match(/^a=mid:(.+)$/m)||[],U=P.match(/^a=msid:.+ (.+)$/m)||[],Z=x[1],ae=U[1];return Z&&ae?M.set(Z,ae):M},this._midsToTrackIds)},oe}();we.exports=re},8066:(we,Pe)=>{var $="1234567890abcdef";function re(oe){for(var H="",j=0;j<32;j++)H+=$.charAt(Math.floor(Math.random()*$.length));return""+oe+H}Pe.sessionSID=re("SS"),Pe.createSID=re},8592:(we,Pe,$)=>{"use strict";var F=$(7627),re=F.guessBrowser,oe=F.support,H=$(3948),j=H.isAndroid,M=H.isMobile,P=H.isNonChromiumEdge,x=H.rebrandedChromeBrowser,U=H.mobileWebKitBrowser,Z=["crios","edg","edge","electron","headlesschrome"],ae=["chrome","firefox"],ue=["chrome","safari"],pe=[];we.exports=function ee(){var Y=re();if(!Y)return!1;var K=x(Y),ce=U(Y),ye=j()?ae:ue;return!!Y&&oe()&&(!K||Z.includes(K))&&!P(Y)&&(!ce||pe.includes(ce))&&(!M()||ye.includes(Y))}},6543:we=>{"use strict";var Pe=function(){function $(F,re,oe){void 0===oe&&(oe=!0),Object.defineProperties(this,{_delay:{value:re,writable:!0},_fn:{value:F},_timeout:{value:null,writable:!0}}),oe&&this.start()}return Object.defineProperty($.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),$.prototype.setDelay=function(F){this._delay=F},$.prototype.start=function(){var F=this;this.isSet||(this._timeout=setTimeout(function(){var re=F._fn;F.clear(),re()},this._delay))},$.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},$.prototype.reset=function(){this.clear(),this.start()},$}();we.exports=Pe},8380:function(we,Pe,$){"use strict";var Xe,F=this&&this.__extends||(Xe=function(Be,pt){return(Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Fn,vn){Fn.__proto__=vn}||function(Fn,vn){for(var no in vn)Object.prototype.hasOwnProperty.call(vn,no)&&(Fn[no]=vn[no])})(Be,pt)},function(Be,pt){if("function"!=typeof pt&&null!==pt)throw new TypeError("Class extends value "+String(pt)+" is not a constructor or null");function Fn(){this.constructor=Be}Xe(Be,pt),Be.prototype=null===pt?Object.create(pt):(Fn.prototype=pt.prototype,new Fn)}),re=$(9318),oe={};Pe.createTwilioError=function(Be,pt){return pt="string"==typeof pt&&pt?pt:"Unknown error",oe[Be="number"==typeof Be?Be:0]?new oe[Be]:new re(Be,pt)};var H=function(Xe){function Be(){var pt=Xe.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.AccessTokenInvalidError=H,Object.defineProperty(oe,20101,{value:H});var j=function(Xe){function Be(){var pt=Xe.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.AccessTokenHeaderInvalidError=j,Object.defineProperty(oe,20102,{value:j});var M=function(Xe){function Be(){var pt=Xe.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.AccessTokenIssuerInvalidError=M,Object.defineProperty(oe,20103,{value:M});var P=function(Xe){function Be(){var pt=Xe.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.AccessTokenExpiredError=P,Object.defineProperty(oe,20104,{value:P});var x=function(Xe){function Be(){var pt=Xe.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.AccessTokenNotYetValidError=x,Object.defineProperty(oe,20105,{value:x});var U=function(Xe){function Be(){var pt=Xe.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.AccessTokenGrantsInvalidError=U,Object.defineProperty(oe,20106,{value:U});var Z=function(Xe){function Be(){var pt=Xe.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.AccessTokenSignatureInvalidError=Z,Object.defineProperty(oe,20107,{value:Z});var ae=function(Xe){function Be(){var pt=Xe.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.SignalingConnectionError=ae,Object.defineProperty(oe,53e3,{value:ae});var ue=function(Xe){function Be(){var pt=Xe.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.SignalingConnectionDisconnectedError=ue,Object.defineProperty(oe,53001,{value:ue});var pe=function(Xe){function Be(){var pt=Xe.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.SignalingConnectionTimeoutError=pe,Object.defineProperty(oe,53002,{value:pe});var ee=function(Xe){function Be(){var pt=Xe.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.SignalingIncomingMessageInvalidError=ee,Object.defineProperty(oe,53003,{value:ee});var Y=function(Xe){function Be(){var pt=Xe.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.SignalingOutgoingMessageInvalidError=Y,Object.defineProperty(oe,53004,{value:Y});var K=function(Xe){function Be(){var pt=Xe.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.SignalingServerBusyError=K,Object.defineProperty(oe,53006,{value:K});var ce=function(Xe){function Be(){var pt=Xe.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomNameInvalidError=ce,Object.defineProperty(oe,53100,{value:ce});var ye=function(Xe){function Be(){var pt=Xe.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomNameTooLongError=ye,Object.defineProperty(oe,53101,{value:ye});var ke=function(Xe){function Be(){var pt=Xe.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomNameCharsInvalidError=ke,Object.defineProperty(oe,53102,{value:ke});var fe=function(Xe){function Be(){var pt=Xe.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomCreateFailedError=fe,Object.defineProperty(oe,53103,{value:fe});var Ae=function(Xe){function Be(){var pt=Xe.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomConnectFailedError=Ae,Object.defineProperty(oe,53104,{value:Ae});var Ee=function(Xe){function Be(){var pt=Xe.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomMaxParticipantsExceededError=Ee,Object.defineProperty(oe,53105,{value:Ee});var ve=function(Xe){function Be(){var pt=Xe.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomNotFoundError=ve,Object.defineProperty(oe,53106,{value:ve});var le=function(Xe){function Be(){var pt=Xe.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomMaxParticipantsOutOfRangeError=le,Object.defineProperty(oe,53107,{value:le});var he=function(Xe){function Be(){var pt=Xe.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomTypeInvalidError=he,Object.defineProperty(oe,53108,{value:he});var Oe=function(Xe){function Be(){var pt=Xe.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomTimeoutOutOfRangeError=Oe,Object.defineProperty(oe,53109,{value:Oe});var je=function(Xe){function Be(){var pt=Xe.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomStatusCallbackMethodInvalidError=je,Object.defineProperty(oe,53110,{value:je});var Fe=function(Xe){function Be(){var pt=Xe.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomStatusCallbackInvalidError=Fe,Object.defineProperty(oe,53111,{value:Fe});var He=function(Xe){function Be(){var pt=Xe.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomStatusInvalidError=He,Object.defineProperty(oe,53112,{value:He});var rt=function(Xe){function Be(){var pt=Xe.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomRoomExistsError=rt,Object.defineProperty(oe,53113,{value:rt});var nt=function(Xe){function Be(){var pt=Xe.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomInvalidParametersError=nt,Object.defineProperty(oe,53114,{value:nt});var Ke=function(Xe){function Be(){var pt=Xe.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomMediaRegionInvalidError=Ke,Object.defineProperty(oe,53115,{value:Ke});var Nt=function(Xe){function Be(){var pt=Xe.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomMediaRegionUnavailableError=Nt,Object.defineProperty(oe,53116,{value:Nt});var Ht=function(Xe){function Be(){var pt=Xe.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomSubscriptionOperationNotSupportedError=Ht,Object.defineProperty(oe,53117,{value:Ht});var Et=function(Xe){function Be(){var pt=Xe.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomCompletedError=Et,Object.defineProperty(oe,53118,{value:Et});var Je=function(Xe){function Be(){var pt=Xe.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomAudioOnlyFlagNotSupportedError=Je,Object.defineProperty(oe,53124,{value:Je});var Ve=function(Xe){function Be(){var pt=Xe.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.RoomTrackKindNotSupportedError=Ve,Object.defineProperty(oe,53125,{value:Ve});var $e=function(Xe){function Be(){var pt=Xe.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.ParticipantIdentityInvalidError=$e,Object.defineProperty(oe,53200,{value:$e});var De=function(Xe){function Be(){var pt=Xe.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.ParticipantIdentityTooLongError=De,Object.defineProperty(oe,53201,{value:De});var ot=function(Xe){function Be(){var pt=Xe.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.ParticipantIdentityCharsInvalidError=ot,Object.defineProperty(oe,53202,{value:ot});var Pt=function(Xe){function Be(){var pt=Xe.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.ParticipantMaxTracksExceededError=Pt,Object.defineProperty(oe,53203,{value:Pt});var qt=function(Xe){function Be(){var pt=Xe.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.ParticipantNotFoundError=qt,Object.defineProperty(oe,53204,{value:qt});var Ot=function(Xe){function Be(){var pt=Xe.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.ParticipantDuplicateIdentityError=Ot,Object.defineProperty(oe,53205,{value:Ot});var Jt=function(Xe){function Be(){var pt=Xe.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.TrackInvalidError=Jt,Object.defineProperty(oe,53300,{value:Jt});var Zn=function(Xe){function Be(){var pt=Xe.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.TrackNameInvalidError=Zn,Object.defineProperty(oe,53301,{value:Zn});var Pn=function(Xe){function Be(){var pt=Xe.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.TrackNameTooLongError=Pn,Object.defineProperty(oe,53302,{value:Pn});var Dr=function(Xe){function Be(){var pt=Xe.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.TrackNameCharsInvalidError=Dr,Object.defineProperty(oe,53303,{value:Dr});var vr=function(Xe){function Be(){var pt=Xe.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.TrackNameIsDuplicatedError=vr,Object.defineProperty(oe,53304,{value:vr});var ir=function(Xe){function Be(){var pt=Xe.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.TrackServerTrackCapacityReachedError=ir,Object.defineProperty(oe,53305,{value:ir});var Ir=function(Xe){function Be(){var pt=Xe.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.MediaClientLocalDescFailedError=Ir,Object.defineProperty(oe,53400,{value:Ir});var wr=function(Xe){function Be(){var pt=Xe.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.MediaServerLocalDescFailedError=wr,Object.defineProperty(oe,53401,{value:wr});var Xi=function(Xe){function Be(){var pt=Xe.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.MediaClientRemoteDescFailedError=Xi,Object.defineProperty(oe,53402,{value:Xi});var Vr=function(Xe){function Be(){var pt=Xe.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.MediaServerRemoteDescFailedError=Vr,Object.defineProperty(oe,53403,{value:Vr});var Mo=function(Xe){function Be(){var pt=Xe.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.MediaNoSupportedCodecError=Mo,Object.defineProperty(oe,53404,{value:Mo});var ra=function(Xe){function Be(){var pt=Xe.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.MediaConnectionError=ra,Object.defineProperty(oe,53405,{value:ra});var bt=function(Xe){function Be(){var pt=Xe.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.MediaDTLSTransportFailedError=bt,Object.defineProperty(oe,53407,{value:bt});var Gt=function(Xe){function Be(){var pt=Xe.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.ConfigurationAcquireFailedError=Gt,Object.defineProperty(oe,53500,{value:Gt});var ln=function(Xe){function Be(){var pt=Xe.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(pt,Be.prototype),pt}return F(Be,Xe),Be}(re);Pe.ConfigurationAcquireTurnFailedError=ln,Object.defineProperty(oe,53501,{value:ln})},9318:function(we){"use strict";var oe,Pe=this&&this.__extends||(oe=function(H,j){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(M[x]=P[x])})(H,j)},function(H,j){if("function"!=typeof j&&null!==j)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function M(){this.constructor=H}oe(H,j),H.prototype=null===j?Object.create(j):(M.prototype=j.prototype,new M)}),$=this&&this.__read||function(oe,H){var j="function"==typeof Symbol&&oe[Symbol.iterator];if(!j)return oe;var P,U,M=j.call(oe),x=[];try{for(;(void 0===H||H-- >0)&&!(P=M.next()).done;)x.push(P.value)}catch(Z){U={error:Z}}finally{try{P&&!P.done&&(j=M.return)&&j.call(M)}finally{if(U)throw U.error}}return x},F=this&&this.__spreadArray||function(oe,H){for(var j=0,M=H.length,P=oe.length;j<M;j++,P++)oe[P]=H[j];return oe},re=function(oe){function H(j){var M=this,P=[].slice.call(arguments,1);M=oe.apply(this,F([],$(P)))||this,Object.setPrototypeOf(M,H.prototype);var x=Error.apply(M,P);return x.name="TwilioError",Object.defineProperty(M,"code",{value:j,enumerable:!0}),Object.getOwnPropertyNames(x).forEach(function(U){Object.defineProperty(this,U,{value:x[U],enumerable:!0})},M),M}return Pe(H,oe),H.prototype.toString=function(){return this.name+" "+this.code+(this.message?": "+this.message:"")},H}(Error);we.exports=re},1501:(we,Pe,$)=>{"use strict";var re=$(9739).isNonArrayObject,oe=$(8701),H=oe.typeErrors,j=oe.clientTrackSwitchOffControl,M=oe.videoContentPreferencesMode,P=oe.subscriptionMode,x=oe.trackPriority,U=oe.trackSwitchOffMode;function ue(ee,Y,K){return void 0===K&&(K=[]),typeof ee>"u"?null:null!==ee&&re(ee)?K.reduce(function(ce,ye){var ke=ye.prop,fe=ye.type,Ae=ye.values;if(ce||!(ke in ee))return ce;var Ee=ee[ke];return fe&&typeof Ee!==fe||"number"===fe&&isNaN(Ee)?H.INVALID_TYPE(Y+"."+ke,fe):Array.isArray(Ae)&&!Ae.includes(Ee)?H.INVALID_VALUE(Y+"."+ke,Ae):ce},null):H.INVALID_TYPE(Y,"object")}Pe.kG=function Z(ee){var Y=ue(ee,"options.bandwidthProfile");return!ee||Y||(Y=ue(ee.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(M)},{prop:"dominantSpeakerPriority",values:Object.values(x)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(P)},{prop:"clientTrackSwitchOffControl",values:Object.values(j)},{prop:"trackSwitchOffMode",values:Object.values(U)}]))?Y:ee.video?"maxTracks"in ee.video&&"clientTrackSwitchOffControl"in ee.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in ee.video&&"contentPreferencesMode"in ee.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):function pe(ee){var Y="options.bandwidthProfile.video.renderDimensions",K=ue(ee,Y);return ee?K||Object.values(x).reduce(function(ce,ye){return ce||ue(ee[ye],Y+"."+ye,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):K}(ee.video.renderDimensions):null},Pe.Wv=function ae(ee,Y){if(!(ee instanceof Y.LocalAudioTrack||ee instanceof Y.LocalDataTrack||ee instanceof Y.LocalVideoTrack||ee instanceof Y.MediaStreamTrack))throw H.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}},1905:we=>{we.exports=function($,F){if($&&F)if($.super_=F,"function"==typeof Object.create)$.prototype=Object.create(F.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}});else{var re=function oe(){};re.prototype=F.prototype,$.prototype=new re,$.prototype.constructor=$}}},7846:we=>{var Pe=function(){},$="undefined",F=typeof window!==$&&typeof window.navigator!==$&&/Trident\/|MSIE /.test(window.navigator.userAgent),re=["trace","debug","info","warn","error"];function oe(pe,ee){var Y=pe[ee];if("function"==typeof Y.bind)return Y.bind(pe);try{return Function.prototype.bind.call(Y,pe)}catch{return function(){return Function.prototype.apply.apply(Y,[pe,arguments])}}}function H(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function j(pe){return"debug"===pe&&(pe="log"),typeof console!==$&&("trace"===pe&&F?H:void 0!==console[pe]?oe(console,pe):void 0!==console.log?oe(console,"log"):Pe)}function M(pe,ee){for(var Y=0;Y<re.length;Y++){var K=re[Y];this[K]=Y<pe?Pe:this.methodFactory(K,pe,ee)}this.log=this.debug}function P(pe,ee,Y){return function(){typeof console!==$&&(M.call(this,ee,Y),this[pe].apply(this,arguments))}}function x(pe,ee,Y){return j(pe)||P.apply(this,arguments)}function U(pe,ee,Y){var ce,K=this,ye="loglevel";function fe(){var Ee;if(typeof window!==$&&ye){try{Ee=window.localStorage[ye]}catch{}if(typeof Ee===$)try{var ve=window.document.cookie,le=ve.indexOf(encodeURIComponent(ye)+"=");-1!==le&&(Ee=/^([^;]+)/.exec(ve.slice(le))[1])}catch{}return void 0===K.levels[Ee]&&(Ee=void 0),Ee}}"string"==typeof pe?ye+=":"+pe:"symbol"==typeof pe&&(ye=void 0),K.name=pe,K.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},K.methodFactory=Y||x,K.getLevel=function(){return ce},K.setLevel=function(Ee,ve){if("string"==typeof Ee&&void 0!==K.levels[Ee.toUpperCase()]&&(Ee=K.levels[Ee.toUpperCase()]),!("number"==typeof Ee&&Ee>=0&&Ee<=K.levels.SILENT))throw"log.setLevel() called with invalid level: "+Ee;if(ce=Ee,!1!==ve&&function ke(Ee){var ve=(re[Ee]||"silent").toUpperCase();if(typeof window!==$&&ye){try{return void(window.localStorage[ye]=ve)}catch{}try{window.document.cookie=encodeURIComponent(ye)+"="+ve+";"}catch{}}}(Ee),M.call(K,Ee,pe),typeof console===$&&Ee<K.levels.SILENT)return"No console available for logging"},K.setDefaultLevel=function(Ee){fe()||K.setLevel(Ee,!1)},K.enableAll=function(Ee){K.setLevel(K.levels.TRACE,Ee)},K.disableAll=function(Ee){K.setLevel(K.levels.SILENT,Ee)};var Ae=fe();null==Ae&&(Ae=ee??"WARN"),K.setLevel(Ae,!1)}var Z=new U,ae={};Z.getLogger=function(ee){if("symbol"!=typeof ee&&"string"!=typeof ee||""===ee)throw new TypeError("You must supply a name when creating a logger.");var Y=ae[ee];return Y||(Y=ae[ee]=new U(ee,Z.getLevel(),Z.methodFactory)),Y};var ue=typeof window!==$?window.log:void 0;Z.noConflict=function(){return typeof window!==$&&window.log===Z&&(window.log=ue),Z},Z.getLoggers=function(){return ae},Z.default=Z,we.exports=Z},7708:we=>{"use strict";var Pe=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,$=function(){function F(re){re=Object.assign({AudioContext:Pe},re),Object.defineProperties(this,{_AudioContext:{value:re.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:F}})}return F.prototype.getOrCreate=function(re){if(!this._holders.has(re)&&(this._holders.add(re),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},F.prototype.release=function(re){this._holders.has(re)&&(this._holders.delete(re),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},F}();we.exports=new $},4687:we=>{"use strict";we.exports=function $(F,re,oe){oe="number"==typeof oe?oe:250;var H=F.createMediaStreamSource(re),j=F.createAnalyser();j.fftSize=2048,H.connect(j);var M=new Uint8Array(j.fftSize),P=!1;return setTimeout(function(){P=!0},oe),function x(){return P?Promise.resolve(!0):(j.getByteTimeDomainData(M),M.some(function(U){return 128!==U&&0!==U})?Promise.resolve(!1):function Pe(F){return F="number"==typeof F?F:0,new Promise(function(re){return setTimeout(re,F)})}().then(x))}().then(function(U){return H.disconnect(),U},function(U){throw H.disconnect(),U})}},3830:(we,Pe,$)=>{"use strict";var F=$(4687);we.exports=function re(oe,H,j,M,P){M="number"==typeof M?M:3;var x=0,U=$(7708),Z={},ae=U.getOrCreate(Z);return function ue(){return H(j).then(function(pe){return(j.audio?F(ae,pe,P).catch(function(Y){return oe.warn("Encountered an error while detecting silence",Y),!0}):Promise.resolve(!1)).then(function(Y){return Y?M<=0?(oe.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),pe):(oe.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++x+"."),pe.getTracks().forEach(function(K){return K.stop()}),M--,ue()):(oe.info("Got a non-silent audio MediaStreamTrack; returning it."),pe)})})}().then(function(pe){return U.release(Z),pe},function(pe){throw U.release(Z),pe})}},9611:(we,Pe,$)=>{"use strict";var F=$(7627).flatMap,re=$(7627).guessBrowser,oe=$(7627).guessBrowserVersion,H=$(3236).getSdpFormat,j=re(),M=oe(),P="chrome"===j,x="firefox"===j,U="safari"===j,Z=P?M.major:null;function Y(le){var he=Array.from(le.values()).find(function(Ke){return"candidate-pair"===Ke.type&&Ke.nominated});if(!he)return null;var Oe=le.get(he.localCandidateId),je=le.get(he.remoteCandidateId),Fe=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],He=Fe.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),rt=Oe?He.reduce(function(Ke,Nt){return Ke[Nt.key]=typeof Oe[Nt.key]===Nt.type?Oe[Nt.key]:"deleted"!==Nt.key&&null,Ke},{}):null,nt=je?Fe.reduce(function(Ke,Nt){return Ke[Nt.key]=typeof je[Nt.key]===Nt.type?je[Nt.key]:null,Ke},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(Ke){return"inprogress"===Ke?"in-progress":Ke}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(Ke,Nt){return Ke[Nt.key]=typeof he[Nt.key]===Nt.type?Nt.fixup?Nt.fixup(he[Nt.key]):he[Nt.key]:null,Ke},{localCandidate:rt,remoteCandidate:nt})}function K(le){var he=Array.from(le.values()).find(function(Nt){return"candidate-pair"===Nt.type&&Nt.nominated});if(!he)return null;var Oe=le.get(he.localCandidateId),je=le.get(he.remoteCandidateId),Fe=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],He=Fe.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),rt={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},nt=Oe?He.reduce(function(Nt,Ht){var Et=Ht.ffKeys&&Ht.ffKeys.find(function(Je){return Je in Oe})||Ht.key;return Nt[Ht.key]=typeof Oe[Et]===Ht.type?"candidateType"===Et&&rt[Oe[Et]]||Oe[Et]:"deleted"!==Et&&null,Nt},{}):null,Ke=je?Fe.reduce(function(Nt,Ht){var Et=Ht.ffKeys&&Ht.ffKeys.find(function(Je){return Je in je})||Ht.key;return Nt[Ht.key]=typeof je[Et]===Ht.type?"candidateType"===Et&&rt[je[Et]]||je[Et]:null,Nt},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(Nt,Ht){return Nt[Ht.key]=typeof he[Ht.key]===Ht.type?he[Ht.key]:null,Nt},{localCandidate:nt,remoteCandidate:Ke})}function ce(le,he,Oe){var je="local"===Oe?"getSenders":"getReceivers";return le[je]?le[je]().map(function(He){return He.track}).filter(function(He){return He&&He.kind===he}):F(le["local"===Oe?"getLocalStreams":"getRemoteStreams"](),function(He){return He["audio"===he?"getAudioTracks":"getVideoTracks"]()})}function ke(le,he){return new Promise(function(Oe,je){Z&&Z<67?le.getStats(function(Fe){Oe([Ae(Fe,he)])},null,je):le.getStats(he).then(function(Fe){Oe(function Ee(le){var he=null,Oe=[],je=null,Fe=null,He=null,rt=null,nt=null;le.forEach(function(Je){switch(Je.type){case"inbound-rtp":he=Je;break;case"outbound-rtp":Oe.push(Je);break;case"media-source":nt=Je;break;case"track":He=Je;break;case"codec":rt=Je;break;case"remote-inbound-rtp":je=Je;break;case"remote-outbound-rtp":Fe=Je}});var Ke=He&&He.remoteSource,Ht=[],Et=Ke?Fe:je;return(Ke?[he]:Oe).forEach(function(Je){var Ve={},$e=[Je,nt,He,rt,Et&&Et.ssrc===Je.ssrc?Et:null];function De(Fn){var vn=$e.find(function(no){return no&&typeof no[Fn]<"u"})||null;return vn?vn[Fn]:null}var ot=De("ssrc");"number"==typeof ot&&(Ve.ssrc=String(ot));var Pt=De("timestamp");Ve.timestamp=Math.round(Pt);var qt=De("mimeType");"string"==typeof qt&&(qt=qt.split("/"),Ve.codecName=qt[qt.length-1]);var Ot=De("roundTripTime");"number"==typeof Ot&&(Ve.roundTripTime=Math.round(1e3*Ot));var Jt=De("jitter");"number"==typeof Jt&&(Ve.jitter=Math.round(1e3*Jt));var Zn=De("frameWidth");"number"==typeof Zn&&(Ke?Ve.frameWidthReceived=Zn:(Ve.frameWidthSent=Zn,Ve.frameWidthInput=He.frameWidth));var Pn=De("frameHeight");"number"==typeof Pn&&(Ke?Ve.frameHeightReceived=Pn:(Ve.frameHeightSent=Pn,Ve.frameHeightInput=He.frameHeight));var Dr=De("framesPerSecond");"number"==typeof Dr&&(Ve[Ke?"frameRateReceived":"frameRateSent"]=Dr);var vr=De("bytesReceived");"number"==typeof vr&&(Ve.bytesReceived=vr);var ir=De("bytesSent");"number"==typeof ir&&(Ve.bytesSent=ir);var Ir=De("packetsLost");"number"==typeof Ir&&(Ve.packetsLost=Ir);var wr=De("packetsReceived");"number"==typeof wr&&(Ve.packetsReceived=wr);var Xi=De("packetsSent");"number"==typeof Xi&&(Ve.packetsSent=Xi);var Vr=De("audioLevel");"number"==typeof Vr&&(Vr=Math.round(32767*Vr),Ke?Ve.audioOutputLevel=Vr:Ve.audioInputLevel=Vr);var Mo=De("totalPacketSendDelay");"number"==typeof Mo&&(Ve.totalPacketSendDelay=Mo);var ra=De("totalEncodeTime");"number"==typeof ra&&(Ve.totalEncodeTime=ra);var bt=De("framesEncoded");"number"==typeof bt&&(Ve.framesEncoded=bt);var Gt=De("estimatedPlayoutTimestamp");"number"==typeof Gt&&(Ve.estimatedPlayoutTimestamp=Gt);var ln=De("totalDecodeTime");"number"==typeof ln&&(Ve.totalDecodeTime=ln);var Xe=De("framesDecoded");"number"==typeof Xe&&(Ve.framesDecoded=Xe);var Be=De("jitterBufferDelay");"number"==typeof Be&&(Ve.jitterBufferDelay=Be);var pt=De("jitterBufferEmittedCount");"number"==typeof pt&&(Ve.jitterBufferEmittedCount=pt),Ht.push(Ve)}),Ht}(Fe))},je)})}function Ae(le,he){var Oe=le.result().find(function(Fe){return"ssrc"===Fe.type&&Fe.stat("googTrackId")===he.id}),je={};return Oe&&(je.timestamp=Math.round(Number(Oe.timestamp)),je=Oe.names().reduce(function(Fe,He){switch(He){case"googCodecName":Fe.codecName=Oe.stat(He);break;case"googRtt":Fe.roundTripTime=Number(Oe.stat(He));break;case"googJitterReceived":Fe.jitter=Number(Oe.stat(He));break;case"googFrameWidthInput":Fe.frameWidthInput=Number(Oe.stat(He));break;case"googFrameHeightInput":Fe.frameHeightInput=Number(Oe.stat(He));break;case"googFrameWidthSent":Fe.frameWidthSent=Number(Oe.stat(He));break;case"googFrameHeightSent":Fe.frameHeightSent=Number(Oe.stat(He));break;case"googFrameWidthReceived":Fe.frameWidthReceived=Number(Oe.stat(He));break;case"googFrameHeightReceived":Fe.frameHeightReceived=Number(Oe.stat(He));break;case"googFrameRateInput":Fe.frameRateInput=Number(Oe.stat(He));break;case"googFrameRateSent":Fe.frameRateSent=Number(Oe.stat(He));break;case"googFrameRateReceived":Fe.frameRateReceived=Number(Oe.stat(He));break;case"ssrc":Fe[He]=Oe.stat(He);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":Fe[He]=Number(Oe.stat(He))}return Fe},je)),je}function ve(le,he){var Oe=null,je=null;(le=le||new Map).forEach(function(wr){if(!wr.isRemote)switch(wr.type){case"inbound-rtp":Oe=wr,je=le.get(wr.remoteId);break;case"outbound-rtp":je=wr,Oe=le.get(wr.remoteId)}});var Fe=he?Oe:je,He=he?je:Oe;function rt(wr){return Fe&&typeof Fe[wr]<"u"?Fe[wr]:He&&typeof He[wr]<"u"?He[wr]:null}var nt={},Ke=rt("timestamp");nt.timestamp=Math.round(Ke);var Nt=rt("ssrc");"number"==typeof Nt&&(nt.ssrc=String(Nt));var Ht=rt("bytesSent");"number"==typeof Ht&&(nt.bytesSent=Ht);var Et=rt("packetsLost");"number"==typeof Et&&(nt.packetsLost=Et);var Je=rt("packetsSent");"number"==typeof Je&&(nt.packetsSent=Je);var Ve=rt("roundTripTime");"number"==typeof Ve&&(nt.roundTripTime=Math.round(1e3*Ve));var $e=rt("jitter");"number"==typeof $e&&(nt.jitter=Math.round(1e3*$e));var De=rt("framerateMean");"number"==typeof De&&(nt.frameRateSent=Math.round(De));var ot=rt("bytesReceived");"number"==typeof ot&&(nt.bytesReceived=ot);var Pt=rt("packetsReceived");"number"==typeof Pt&&(nt.packetsReceived=Pt);var qt=rt("framerateMean");"number"==typeof qt&&(nt.frameRateReceived=Math.round(qt));var Ot=rt("totalPacketSendDelay");"number"==typeof Ot&&(nt.totalPacketSendDelay=Ot);var Jt=rt("totalEncodeTime");"number"==typeof Jt&&(nt.totalEncodeTime=Jt);var Zn=rt("framesEncoded");"number"==typeof Zn&&(nt.framesEncoded=Zn);var Pn=rt("estimatedPlayoutTimestamp");"number"==typeof Pn&&(nt.estimatedPlayoutTimestamp=Pn);var Dr=rt("totalDecodeTime");"number"==typeof Dr&&(nt.totalDecodeTime=Dr);var vr=rt("framesDecoded");"number"==typeof vr&&(nt.framesDecoded=vr);var ir=rt("jitterBufferDelay");"number"==typeof ir&&(nt.jitterBufferDelay=ir);var Ir=rt("jitterBufferEmittedCount");return"number"==typeof Ir&&(nt.jitterBufferEmittedCount=Ir),nt}we.exports=function ue(le,he){return le&&"function"==typeof le.getStats?function pe(le,he){var Oe=ce(le,"audio","local"),je=ce(le,"video","local"),Fe=ce(le,"audio"),He=ce(le,"video"),rt={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},nt=F([[Oe,"localAudioTrackStats",!1],[je,"localVideoTrackStats",!1],[Fe,"remoteAudioTrackStats",!0],[He,"remoteVideoTrackStats",!0]],function(Ke){var Ht=Ke[1],Et=Ke[2];return Ke[0].map(function(Je){return function ye(le,he,Oe){return typeof(Oe=Oe||{}).testForChrome<"u"||P?ke(le,he):typeof Oe.testForFirefox<"u"||x?function fe(le,he,Oe){return new Promise(function(je,Fe){le.getStats(he).then(function(He){je([ve(He,Oe)])},Fe)})}(le,he,Oe.isRemote):typeof Oe.testForSafari<"u"||U?typeof Oe.testForSafari<"u"||"unified"===H()?ke(le,he):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(le,Je,Object.assign({isRemote:Et},he)).then(function(Ve){Ve.forEach(function($e){$e.trackId=Je.id,rt[Ht].push($e)})})})});return Promise.all(nt).then(function(){return function ee(le,he){return typeof(he=he||{}).testForChrome<"u"||P||typeof he.testForSafari<"u"||U?le.getStats().then(Y):typeof he.testForFirefox<"u"||x?le.getStats().then(K):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(le,he)}).then(function(Ke){return rt.activeIceCandidatePair=Ke,rt})}(le,he):Promise.reject(new Error("Given PeerConnection does not support getStats"))}},7370:we=>{"use strict";we.exports=function Pe($){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?($=$||{audio:!0,video:!0},navigator.mediaDevices.getUserMedia($)):Promise.reject(new Error("getUserMedia is not supported"))}},1647:(we,Pe,$)=>{"use strict";var F={};Object.defineProperties(F,{getStats:{enumerable:!0,value:$(9611)},getUserMedia:{enumerable:!0,value:$(7370)},MediaStream:{enumerable:!0,value:$(4946)},MediaStreamTrack:{enumerable:!0,value:$(6240)},RTCIceCandidate:{enumerable:!0,value:$(5219)},RTCPeerConnection:{enumerable:!0,value:$(7061)},RTCSessionDescription:{enumerable:!0,value:$(5481)}}),we.exports=F},4946:we=>{"use strict";we.exports="function"==typeof MediaStream?MediaStream:function(){throw new Error("MediaStream is not supported")}},6240:we=>{"use strict";we.exports="function"==typeof MediaStreamTrack?MediaStreamTrack:function(){throw new Error("MediaStreamTrack is not supported")}},5219:we=>{"use strict";we.exports="function"==typeof RTCIceCandidate?RTCIceCandidate:function(){throw new Error("RTCIceCandidate is not supported")}},5431:(we,Pe,$)=>{"use strict";var F=$(4326),re=$(7590),oe=$(1905),H=$(3688),j=$(4946),M=$(7121),P=$(3236),x=$(7627),U=$(7627).isIOSChrome,Z="unified"===P.getSdpFormat();function ae(fe,Ae){if(!(this instanceof ae))return new ae(fe,Ae);re.call(this),fe=fe||{};var Ee=Object.assign(fe.iceTransportPolicy?{iceTransports:fe.iceTransportPolicy}:{},fe);x.interceptEvent(this,"datachannel"),x.interceptEvent(this,"signalingstatechange");var ve=P.getSdpFormat(Ee.sdpSemantics),le=new RTCPeerConnection(Ee,Ae);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new j},_peerConnection:{value:le},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:ve},_senders:{value:new Map},_signalingStateLatch:{value:new H},_tracksToSSRCs:{value:new Map,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:le.localDescription}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:le.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":le.signalingState}}});var he=this;le.addEventListener("datachannel",function(je){ye(je.channel),he.dispatchEvent(je)}),le.addEventListener("signalingstatechange",function(){"stable"===le.signalingState&&(he._appliedTracksToSSRCs=new Map(he._tracksToSSRCs)),!he._pendingLocalOffer&&!he._pendingRemoteOffer&&he.dispatchEvent.apply(he,arguments)}),le.ontrack=function(){},"function"!=typeof RTCPeerConnection.prototype.addTrack&&le.addStream(this._localStream),x.proxyProperties(RTCPeerConnection.prototype,this,le)}function ue(fe,Ae,Ee){var He,he=Ae?fe._pendingLocalOffer:fe._pendingRemoteOffer,je=Ae?"have-local-offer":"have-remote-offer",Fe=Ae?"setLocalDescription":"setRemoteDescription";if(!Ae&&(Ae?fe._pendingRemoteOffer:fe._pendingLocalOffer)&&"answer"===Ee.type)He=function pe(fe,Ae){return fe._peerConnection.setLocalDescription(fe._pendingLocalOffer).then(function(){return fe._pendingLocalOffer=null,fe.setRemoteDescription(Ae)}).then(function(){fe._signalingStateLatch.lower()})}(fe,Ee);else if("offer"===Ee.type){if(fe.signalingState!==je&&"stable"!==fe.signalingState)return Promise.reject(new Error("Cannot set "+(Ae?"local":"remote")+" offer in state "+fe.signalingState));!he&&"low"===fe._signalingStateLatch.state&&fe._signalingStateLatch.raise();var rt=fe.signalingState;(function ve(nt){Ae?fe._pendingLocalOffer=nt:fe._pendingRemoteOffer=nt})(Y(Ee)),He=Promise.resolve(),fe.signalingState!==rt&&He.then(function(){fe.dispatchEvent(new Event("signalingstatechange"))})}else"rollback"===Ee.type&&(fe.signalingState!==je?He=Promise.reject(new Error("Cannot rollback "+(Ae?"local":"remote")+" description in "+fe.signalingState)):(function le(){Ae?fe._pendingLocalOffer=null:fe._pendingRemoteOffer=null}(),fe._rolledBackTracksToSSRCs=new Map(fe._tracksToSSRCs),fe._tracksToSSRCs=new Map(fe._appliedTracksToSSRCs),(He=Promise.resolve()).then(function(){fe.dispatchEvent(new Event("signalingstatechange"))})));return He||fe._peerConnection[Fe](Y(Ee))}function ee(fe,Ae){return!!fe.getTransceivers().find(function(Ee){return Ee.receiver&&Ee.receiver.track&&Ee.receiver.track.kind===Ae})}function Y(fe){return fe instanceof F&&fe._description?fe._description:new RTCSessionDescription(fe)}function K(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function ye(fe){return Object.defineProperty(fe,"maxRetransmits",{value:65535===fe.maxRetransmits?null:fe.maxRetransmits}),K()&&Object.defineProperty(fe,"maxPacketLifeTime",{value:65535===fe.maxRetransmitTime?null:fe.maxRetransmitTime}),fe}function ke(fe,Ae,Ee){return"unified"===fe?P.updateUnifiedPlanTrackIdsToSSRCs(Ae,Ee):P.updatePlanBTrackIdsToSSRCs(Ae,Ee)}oe(ae,re),"function"!=typeof RTCPeerConnection.prototype.addTrack?(ae.prototype.addTrack=function(){var Ae=[].slice.call(arguments),Ee=Ae[0];if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+Ee.id+", "+Ee.kind+"]: RTCPeerConnection is closed");var ve=this._senders.get(Ee);if(ve&&ve.track)throw new Error("Cannot add MediaStreamTrack ["+Ee.id+", "+Ee.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(Ee),this._peerConnection.addStream(this._localStream),ve=new M(Ee),this._senders.set(Ee,ve),ve},ae.prototype.removeTrack=function(Ae){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");var Ee=Ae.track;!Ee||(Ae=this._senders.get(Ee))&&Ae.track&&(Ae.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(Ee),this._peerConnection.addStream(this._localStream))},ae.prototype.getSenders=function(){return Array.from(this._senders.values())}):ae.prototype.removeTrack=function(Ae){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");try{this._peerConnection.removeTrack(Ae)}catch{}},ae.prototype.addIceCandidate=function(Ae){var ve,Ee=[].slice.call(arguments),le=this;return ve="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return le._peerConnection.addIceCandidate(Ae)}):this._peerConnection.addIceCandidate(Ae),Ee.length>1?x.legacyPromise(ve,Ee[1],Ee[2]):ve},ae.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},ae.prototype.createAnswer=function(){var Ee,Ae=[].slice.call(arguments),ve=this;return Ee=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return ve._signalingStateLatch.lower(),ve._peerConnection.createAnswer()}).then(function(he){return ve._pendingRemoteOffer=null,ve._rolledBackTracksToSSRCs.clear(),new F({type:"answer",sdp:ke(ve._sdpFormat,ve._tracksToSSRCs,he.sdp)})},function(he){throw ve._pendingRemoteOffer=null,he}):this._peerConnection.createAnswer().then(function(le){return ve._rolledBackTracksToSSRCs.clear(),new F({type:"answer",sdp:ke(ve._sdpFormat,ve._tracksToSSRCs,le.sdp)})}),Ae.length>1?x.legacyPromise(Ee,Ae[0],Ae[1]):Ee},ae.prototype.createOffer=function(){var Ae=[].slice.call(arguments),Ee=(Ae.length>1?Ae[2]:Ae[0])||{},ve=this;if(U()){if(Ee.offerToReceiveVideo&&!this._audioTransceiver&&(!Z||!ee(this,"audio"))){delete Ee.offerToReceiveAudio;try{this._audioTransceiver=Z?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(he){return Promise.reject(he)}}if(Ee.offerToReceiveVideo&&!this._videoTransceiver&&(!Z||!ee(this,"video"))){delete Ee.offerToReceiveVideo;try{this._videoTransceiver=Z?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(he){return Promise.reject(he)}}}var le=this._peerConnection.createOffer(Ee).then(function(he){return ve._rolledBackTracksToSSRCs.clear(),new F({type:he.type,sdp:ke(ve._sdpFormat,ve._tracksToSSRCs,he.sdp)})});return Ae.length>1?x.legacyPromise(le,Ae[0],Ae[1]):le},ae.prototype.createDataChannel=function(Ae,Ee){Ee=function ce(fe){return fe=Object.assign({},fe),K()&&"maxPacketLifeTime"in fe&&(fe.maxRetransmitTime=fe.maxPacketLifeTime),fe}(Ee);var ve=this._peerConnection.createDataChannel(Ae,Ee);return ye(ve),ve},ae.prototype.setLocalDescription=function(){var Ae=[].slice.call(arguments),Ee=Ae[0];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var ve=ue(this,!0,Ee);return Ae.length>1?x.legacyPromise(ve,Ae[1],Ae[2]):ve},ae.prototype.setRemoteDescription=function(){var Ae=[].slice.call(arguments),Ee=Ae[0];this._rolledBackTracksToSSRCs.clear();var ve=ue(this,!1,Ee);return Ae.length>1?x.legacyPromise(ve,Ae[1],Ae[2]):ve},x.delegateMethods(RTCPeerConnection.prototype,ae.prototype,"_peerConnection"),we.exports=ae},7111:(we,Pe,$)=>{"use strict";var F=$(7590),re=$(3657),oe=$(1905),H=$(3236).updateUnifiedPlanTrackIdsToSSRCs,j=$(7627),M="object"==typeof navigator&&navigator.userAgent&&(navigator.userAgent.match(/Firefox\/61/)||navigator.userAgent.match(/Firefox\/62/));function P(ae){if(!(this instanceof P))return new P(ae);F.call(this),j.interceptEvent(this,"signalingstatechange");var ue=new RTCPeerConnection(ae);Object.defineProperties(this,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:ue},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},localDescription:{enumerable:!0,get:function(){return Z(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.signalingState}}});var ee,pe=this;ue.addEventListener("signalingstatechange",function(){if(!pe._rollingBack&&pe.signalingState!==ee){ee=pe.signalingState;var K=pe.dispatchEvent.apply.bind(pe.dispatchEvent,pe,arguments);pe._isClosed?setTimeout(K):K()}}),j.proxyProperties(RTCPeerConnection.prototype,this,ue)}function x(ae,ue,pe){var ee=ue?"setLocalDescription":"setRemoteDescription";return ae._rollingBack=!0,ae._peerConnection[ee](new re({type:"rollback"})).then(pe).then(function(K){return ae._rollingBack=!1,K},function(K){throw ae._rollingBack=!1,K})}function U(ae,ue,pe){if(!ae._initiallyNegotiatedDtlsRole&&"offer"!==ue.type){var ee=ue.sdp.match(/a=setup:([a-z]+)/);if(ee){var Y=ee[1];ae._initiallyNegotiatedDtlsRole=pe?{active:"passive",passive:"active"}[Y]:Y}}}function Z(ae,ue){return ae&&"answer"===ae.type&&ue?new re({type:ae.type,sdp:ae.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+ue)}):ae}oe(P,F),Object.defineProperty(P.prototype,"peerIdentity",{enumerable:!0,value:Promise.resolve({idp:"",name:""})}),M&&(P.prototype.addTrack=function(){var ue=arguments[0],pe=this._peerConnection.addTrack.apply(this._peerConnection,arguments);return pe.replaceTrack(ue),pe}),P.prototype.createAnswer=function(){var pe,ue=[].slice.call(arguments),ee=this;return pe=this._peerConnection.createAnswer().then(function(K){return U(ee,K),Z(K,ee._initiallyNegotiatedDtlsRole)}),"function"==typeof ue[0]?j.legacyPromise(pe,ue[0],ue[1]):pe},P.prototype.createOffer=function(){var ee,ue=[].slice.call(arguments),pe=(ue.length>1?ue[2]:ue[0])||{},Y=this;if("have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState){var K="have-local-offer"===this.signalingState;ee=x(this,K,function(){return Y.createOffer(pe)})}else ee=Y._peerConnection.createOffer(pe);return ee=ee.then(function(ce){return new re({type:ce.type,sdp:H(Y._tracksToSSRCs,ce.sdp)})}),ue.length>1?j.legacyPromise(ee,ue[0],ue[1]):ee},P.prototype.setLocalDescription=function(){var ee,ue=[].slice.call(arguments),pe=ue[0];return pe&&"answer"===pe.type&&"have-local-offer"===this.signalingState&&(ee=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),ee?ue.length>1?j.legacyPromise(ee,ue[1],ue[2]):ee:this._peerConnection.setLocalDescription.apply(this._peerConnection,ue)},P.prototype.setRemoteDescription=function(){var ee,ue=[].slice.call(arguments),pe=ue[0],Y=this;return pe&&"have-remote-offer"===this.signalingState&&("answer"===pe.type?ee=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===pe.type&&(ee=x(this,!1,function(){return Y._peerConnection.setRemoteDescription(pe)}))),ee||(ee=this._peerConnection.setRemoteDescription(pe)),ee=ee.then(function(){U(Y,pe,!0)}),ue.length>1?j.legacyPromise(ee,ue[1],ue[2]):ee},P.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},j.delegateMethods(RTCPeerConnection.prototype,P.prototype,"_peerConnection"),we.exports=P},7061:(we,Pe,$)=>{"use strict";if("function"==typeof RTCPeerConnection)switch((0,$(7627).guessBrowser)()){case"chrome":we.exports=$(5431);break;case"firefox":we.exports=$(7111);break;case"safari":we.exports=$(7548);break;default:we.exports=RTCPeerConnection}else we.exports=function(){throw new Error("RTCPeerConnection is not supported")}},7548:(we,Pe,$)=>{"use strict";var F=$(7590),re=$(1905),oe=$(3688),H=$(3236),j=$(7627),M="unified"===H.getSdpFormat(),P=M?H.updateUnifiedPlanTrackIdsToSSRCs:H.updatePlanBTrackIdsToSSRCs;function x(pe){if(!(this instanceof x))return new x(pe);F.call(this),j.interceptEvent(this,"datachannel"),j.interceptEvent(this,"iceconnectionstatechange"),j.interceptEvent(this,"signalingstatechange"),j.interceptEvent(this,"track");var ee=new RTCPeerConnection(pe);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:ee},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new oe},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription}},iceConnectionState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState}},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState}}});var Y=this;ee.addEventListener("datachannel",function(ce){ue(ce.channel),Y.dispatchEvent(ce)}),ee.addEventListener("iceconnectionstatechange",function(){Y._isClosed||Y.dispatchEvent.apply(Y,arguments)}),ee.addEventListener("signalingstatechange",function(){Y._isClosed||("stable"===ee.signalingState&&(Y._appliedTracksToSSRCs=new Map(Y._tracksToSSRCs)),!Y._pendingLocalOffer&&!Y._pendingRemoteOffer&&Y.dispatchEvent.apply(Y,arguments))}),ee.addEventListener("track",function(ce){Y._pendingRemoteOffer=null,Y.dispatchEvent(ce)}),j.proxyProperties(RTCPeerConnection.prototype,this,ee)}function U(pe,ee,Y){var ye=ee?pe._pendingLocalOffer:pe._pendingRemoteOffer,fe=ee?"have-local-offer":"have-remote-offer",Ae=ee?"setLocalDescription":"setRemoteDescription";if(!ee&&(ee?pe._pendingRemoteOffer:pe._pendingLocalOffer)&&"answer"===Y.type)return function Z(pe,ee){return pe._peerConnection.setLocalDescription(pe._pendingLocalOffer).then(function(){return pe._pendingLocalOffer=null,pe.setRemoteDescription(ee)}).then(function(){pe._signalingStateLatch.lower()})}(pe,Y);if("offer"===Y.type){if(pe.signalingState!==fe&&"stable"!==pe.signalingState)return Promise.reject(new Error("Cannot set "+(ee?"local":"remote")+" offer in state "+pe.signalingState));!ye&&"low"===pe._signalingStateLatch.state&&pe._signalingStateLatch.raise();var Ee=pe.signalingState;return function K(ve){ee?pe._pendingLocalOffer=ve:pe._pendingRemoteOffer=ve}(Y),pe.signalingState!==Ee?Promise.resolve().then(function(){pe.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}return"rollback"===Y.type?pe.signalingState!==fe?Promise.reject(new Error("Cannot rollback "+(ee?"local":"remote")+" description in "+pe.signalingState)):(function ce(){ee?pe._pendingLocalOffer=null:pe._pendingRemoteOffer=null}(),pe._rolledBackTracksToSSRCs=new Map(pe._tracksToSSRCs),pe._tracksToSSRCs=new Map(pe._appliedTracksToSSRCs),Promise.resolve().then(function(){pe.dispatchEvent(new Event("signalingstatechange"))})):pe._peerConnection[Ae](Y)}function ae(pe,ee){return!!pe.getTransceivers().find(function(Y){return Y.receiver&&Y.receiver.track&&Y.receiver.track.kind===ee})}function ue(pe){return Object.defineProperties(pe,{maxPacketLifeTime:{value:65535===pe.maxPacketLifeTime?null:pe.maxPacketLifeTime},maxRetransmits:{value:65535===pe.maxRetransmits?null:pe.maxRetransmits}})}re(x,F),x.prototype.addIceCandidate=function(ee){var Y=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return Y._peerConnection.addIceCandidate(ee)}):this._peerConnection.addIceCandidate(ee)},x.prototype.createOffer=function(ee){ee=Object.assign({},ee);var Y=this;if(ee.offerToReceiveVideo&&!this._audioTransceiver&&(!M||!ae(this,"audio"))){delete ee.offerToReceiveAudio;try{this._audioTransceiver=M?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(K){return Promise.reject(K)}}if(ee.offerToReceiveVideo&&!this._videoTransceiver&&(!M||!ae(this,"video"))){delete ee.offerToReceiveVideo;try{this._videoTransceiver=M?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(K){return Promise.reject(K)}}return this._peerConnection.createOffer(ee).then(function(K){return Y._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:K.type,sdp:P(Y._tracksToSSRCs,K.sdp)})})},x.prototype.createAnswer=function(ee){var Y=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return Y._signalingStateLatch.lower(),Y._peerConnection.createAnswer()}).then(function(ce){return Y._pendingRemoteOffer=null,Y._rolledBackTracksToSSRCs.clear(),M?new RTCSessionDescription({type:ce.type,sdp:P(Y._tracksToSSRCs,ce.sdp)}):ce},function(ce){throw Y._pendingRemoteOffer=null,ce}):this._peerConnection.createAnswer(ee).then(function(ce){return Y._rolledBackTracksToSSRCs.clear(),M?new RTCSessionDescription({type:ce.type,sdp:P(Y._tracksToSSRCs,ce.sdp)}):ce})},x.prototype.createDataChannel=function(ee,Y){var K=this._peerConnection.createDataChannel(ee,Y);return ue(K),K},x.prototype.removeTrack=function(ee){ee.replaceTrack(null),this._peerConnection.removeTrack(ee)},x.prototype.setLocalDescription=function(ee){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),U(this,!0,ee)},x.prototype.setRemoteDescription=function(ee){return this._rolledBackTracksToSSRCs.clear(),U(this,!1,ee)},x.prototype.close=function(){if(!this._isClosed){this._isClosed=!0,this._peerConnection.close();var ee=this;setTimeout(function(){ee.dispatchEvent(new Event("iceconnectionstatechange")),ee.dispatchEvent(new Event("signalingstatechange"))})}},j.delegateMethods(RTCPeerConnection.prototype,x.prototype,"_peerConnection"),we.exports=x},7121:we=>{"use strict";we.exports=function Pe($){Object.defineProperties(this,{track:{enumerable:!0,value:$,writable:!0}})}},4326:we=>{"use strict";we.exports=function Pe($){if(!(this instanceof Pe))return new Pe($);var F=$&&"rollback"===$.type?null:new RTCSessionDescription($);Object.defineProperties(this,{_description:{get:function(){return F}},sdp:{enumerable:!0,value:F?F.sdp:$.sdp},type:{enumerable:!0,value:F?F.type:$.type}})}},3657:we=>{"use strict";we.exports=RTCSessionDescription},5481:(we,Pe,$)=>{"use strict";if("function"==typeof RTCSessionDescription)switch((0,$(7627).guessBrowser)()){case"chrome":we.exports=$(4326);break;case"firefox":we.exports=$(3657);break;default:we.exports=RTCSessionDescription}else we.exports=function(){throw new Error("RTCSessionDescription is not supported")}},7590:(we,Pe,$)=>{"use strict";var F=$(9069).EventEmitter;function re(){Object.defineProperties(this,{_eventEmitter:{value:new F}})}re.prototype.dispatchEvent=function(H){return this._eventEmitter.emit(H.type,H)},re.prototype.addEventListener=function(){return this._eventEmitter.addListener.apply(this._eventEmitter,arguments)},re.prototype.removeEventListener=function(){return this._eventEmitter.removeListener.apply(this._eventEmitter,arguments)},we.exports=re},7627:(we,Pe)=>{"use strict";function F(Y,K,ce,ye){if(!(ye in K)&&!ye.match(/^on[a-z]+$/)){var ke=!1;try{var fe=Object.getOwnPropertyDescriptor(Y,ye);ke=fe&&!!fe.get}catch{}if(!ke){var Ae;try{Ae=typeof Y[ye]}catch{}"function"===Ae&&(K[ye]=function(){return this[ce][ye].apply(this[ce],arguments)})}}}function j(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function M(Y){return typeof Y>"u"&&(Y=j()),/Chrome|CriOS/.test(Y)?"chrome":/Firefox|FxiOS/.test(Y)?"firefox":/Safari|iPhone|iPad|iPod/.test(Y)?"safari":null}Pe.defer=function $(){var Y={};return Y.promise=new Promise(function(K,ce){Y.resolve=K,Y.reject=ce}),Y},Pe.delegateMethods=function re(Y,K,ce){for(var ye in Y)F(Y,K,ce,ye)},Pe.difference=function oe(Y,K){Y=Array.isArray(Y)?new Set(Y):new Set(Y.values()),K=Array.isArray(K)?new Set(K):new Set(K.values());var ce=new Set;return Y.forEach(function(ye){K.has(ye)||ce.add(ye)}),ce},Pe.flatMap=function H(Y,K){return(Y instanceof Map||Y instanceof Set?Array.from(Y.values()):Y).reduce(function(ye,ke){var fe=K(ke);return ye.concat(fe)},[])},Pe.guessBrowser=M,Pe.guessBrowserVersion=function P(Y){typeof Y>"u"&&(Y=j());var K={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[M(Y)];if(!K)return null;var ce=new RegExp("("+K+")/([^\\s]+)"),ye=(Y.match(ce)||[])[2];if(!ye)return null;var ke=ye.split(".").map(Number);return{major:isNaN(ke[0])?null:ke[0],minor:isNaN(ke[1])?null:ke[1]}},Pe.isIOSChrome=function x(Y){return typeof Y>"u"&&(Y=j()),/Mobi/.test(Y)&&"chrome"===M()&&/iPad|iPhone|iPod/.test(Y)},Pe.interceptEvent=function U(Y,K){var ce=null;Object.defineProperty(Y,"on"+K,{get:function(){return ce},set:function(ye){ce&&this.removeEventListener(K,ce),"function"==typeof ye?this.addEventListener(K,ce=ye):ce=null}})},Pe.legacyPromise=function Z(Y,K,ce){return K?Y.then(function(ye){K(ye)},function(ye){ce(ye)}):Y},Pe.makeUUID=function ae(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Y){var K=16*Math.random()|0;return("x"===Y?K:3&K|8).toString(16)})},Pe.proxyProperties=function ue(Y,K,ce){Object.getOwnPropertyNames(Y).forEach(function(ye){!function pe(Y,K,ce,ye){if(!(ye in K)){if(ye.match(/^on[a-z]+$/))return Object.defineProperty(K,ye,{value:null,writable:!0}),void ce.addEventListener(ye.slice(2),function(){K.dispatchEvent.apply(K,arguments)});Object.defineProperty(K,ye,{enumerable:!0,get:function(){return ce[ye]}})}}(0,K,ce,ye)})},Pe.support=function ee(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}},3688:(we,Pe,$)=>{"use strict";var F=$(7627).defer,re={high:new Set(["low"]),low:new Set(["high"])};function oe(j){if(!(this instanceof oe))return new oe(j);var M=j||"low";Object.defineProperties(this,{_state:{set:function(P){if(M!==P){var x=this._whenDeferreds.get(M=P);x.forEach(function(U){U.resolve(this)},this),x.clear()}},get:function(){return M}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])},state:{enumerable:!0,get:function(){return this._state}}})}function H(j,M){return new Error('Cannot transition from "'+j+'" to "'+M+'"')}oe.prototype.lower=function(){return this.transition("low")},oe.prototype.raise=function(){return this.transition("high")},oe.prototype.transition=function(M){if(!re[this.state].has(M))throw H(this.state,M);return this._state=M,this},oe.prototype.when=function(M){if(this.state===M)return Promise.resolve(this);if(!re[this.state].has(M))return Promise.reject(H(this.state,M));var P=F();return this._whenDeferreds.get(M).add(P),P.promise},we.exports=oe},3236:(we,Pe,$)=>{"use strict";var F=$(7627).flatMap,re=$(7627).guessBrowser,oe=null,j=null;function P(le){return le&&function H(){if("boolean"==typeof oe)return oe;if(typeof RTCPeerConnection>"u")return oe=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),oe=!1}catch{oe=!0}return oe}()?{"plan-b":"planb","unified-plan":"unified"}[le]:function M(){if(!j)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype)try{(new RTCPeerConnection).addTransceiver("audio"),j="unified"}catch{j="planb"}else j="planb";return j}()}function Z(le,he){return(he.match(new RegExp(le,"gm"))||[]).reduce(function(je,Fe){var He=Fe.match(new RegExp(le));return He?je.add(He[1]):je},new Set)}function ae(le,he){return Z(le,he)}function ue(le){return ae("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",le)}function pe(le){return ae("^a=msid:.+ +(.+) *$",le)}function ee(le,he){return Z("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+he+" *$",le)}function Y(le,he,Oe){return he=he||".*",Oe=Oe||".*",le.split("\r\nm=").slice(1).map(function(je){return"m="+je}).filter(function(je){var Fe=new RegExp("m="+he,"gm"),He=new RegExp("a="+Oe,"gm");return Fe.test(je)&&He.test(je)})}function K(le){return Array.from(Z("^a=ssrc:([0-9]+) +.*$",le))}function ce(le,he){var Oe=Y(le),je=new RegExp("^a=msid:[^ ]+ +"+he+" *$","gm"),Fe=Oe.filter(function(He){return He.match(je)});return new Set(F(Fe,K))}function ye(le,he,Oe){return new Map(Array.from(le(Oe)).map(function(je){return[je,he(Oe,je)]}))}function ke(le){return ye(ue,ee,le)}function fe(le){return ye(pe,ce,le)}function Ae(le,he,Oe){var je=le(Oe),Fe=new Map;je.forEach(function(nt,Ke){if(he.has(Ke)){var Nt=Array.from(he.get(Ke)),Ht=Array.from(nt);Nt.forEach(function(Et,Je){var Ve=Ht[Je];Fe.set(Ve,Et);var De="a=ssrc:"+Et+" $1";Oe=Oe.replace(new RegExp("^a=ssrc:"+Ve+" (.*)$","gm"),De)})}else he.set(Ke,nt)});var He="^(a=ssrc-group:[^ ]+ +)(.*)$";return(Oe.match(new RegExp(He,"gm"))||[]).forEach(function(nt){var Ke=nt.match(new RegExp(He));if(Ke){var Nt=Ke[1],Et=Ke[2].split(" ").map(function(Je){return Fe.get(Je)||Je}).join(" ");Oe=Oe.replace(Ke[0],Nt+Et)}}),Oe}Pe.getSdpFormat=function U(le){return{chrome:P(le),firefox:"unified",safari:typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[re()]||null},Pe.getMediaSections=Y,Pe.getPlanBTrackIds=ue,Pe.getUnifiedPlanTrackIds=pe,Pe.getPlanBSSRCs=ee,Pe.getUnifiedPlanSSRCs=ce,Pe.updatePlanBTrackIdsToSSRCs=function Ee(le,he){return Ae(ke,le,he)},Pe.updateUnifiedPlanTrackIdsToSSRCs=function ve(le,he){return Ae(fe,le,he)}},3332:we=>{we.exports=WebSocket},7156:we=>{function Pe(F,re,oe,H,j,M,P){try{var x=F[M](P),U=x.value}catch(Z){return void oe(Z)}x.done?re(U):Promise.resolve(U).then(H,j)}we.exports=function $(F){return function(){var re=this,oe=arguments;return new Promise(function(H,j){var M=F.apply(re,oe);function P(U){Pe(M,H,j,P,x,"next",U)}function x(U){Pe(M,H,j,P,x,"throw",U)}P(void 0)})}},we.exports.__esModule=!0,we.exports.default=we.exports},1730:we=>{"use strict";we.exports=JSON.parse('{"name":"twilio-video","title":"Twilio Video","description":"Twilio Video JavaScript Library","version":"2.21.3","homepage":"https://twilio.com","author":"Mark Andrus Roberts <mroberts@twilio.com>","contributors":["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"keywords":["twilio","webrtc","library","javascript","video","rooms"],"repository":{"type":"git","url":"https://github.com/twilio/twilio-video.js.git"},"devDependencies":{"@babel/core":"^7.14.2","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^17.2.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","glob":"^7.1.7","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","jsdoc":"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7","karma":"^5.0.2","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1","mocha":"^3.2.0","mock-require":"^3.0.3","ncp":"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","nyc":"^15.1.0","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.2","typescript":"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^7.7.1"},"engines":{"node":">=0.12"},"license":"BSD-3-Clause","main":"./es5/index.js","types":"./tsdef/index.d.ts","scripts":{"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts","lint":"npm-run-all lint:js lint:ts","printVersion":"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@5.5.0","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react","test":"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc ","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build":"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","docs":"node ./scripts/docs.js ./dist/docs","watch":"tsc -w","clean":"rimraf ./coverage ./es5 ./dist"},"dependencies":{"events":"^3.3.0","util":"^0.12.4","ws":"^7.4.6","xmlhttprequest":"^1.8.0"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"}}')}},we=>{we(we.s=6436)}]);