(self.webpackChunkcompare_video_sdks=self.webpackChunkcompare_video_sdks||[]).push([[179],{6436:(we,Oe,Y)=>{"use strict";function U(n){return"function"==typeof n}function te(n){const e=n(o=>{Error.call(o),o.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const oe=te(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((o,d)=>`${d+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function H(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class j{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const f of e)f.remove(this);else e.remove(this);const{initialTeardown:o}=this;if(U(o))try{o()}catch(f){t=f instanceof oe?f.errors:[f]}const{_teardowns:d}=this;if(d){this._teardowns=null;for(const f of d)try{x(f)}catch(b){t=t??[],b instanceof oe?t=[...t,...b.errors]:t.push(b)}}if(t)throw new oe(t)}}add(t){var e;if(t&&t!==this)if(this.closed)x(t);else{if(t instanceof j){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&H(e,t)}remove(t){const{_teardowns:e}=this;e&&H(e,t),t instanceof j&&t._removeParent(this)}}j.EMPTY=(()=>{const n=new j;return n.closed=!0,n})();const M=j.EMPTY;function P(n){return n instanceof j||n&&"closed"in n&&U(n.remove)&&U(n.add)&&U(n.unsubscribe)}function x(n){U(n)?n():n.unsubscribe()}const F={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J={setTimeout(...n){const{delegate:t}=J;return(t?.setTimeout||setTimeout)(...n)},clearTimeout(n){const{delegate:t}=J;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function se(n){J.setTimeout(()=>{const{onUnhandledError:t}=F;if(!t)throw n;t(n)})}function ue(){}const le=G("C",void 0,void 0);function G(n,t,e){return{kind:n,value:t,error:e}}let ae=null;function Ae(n){if(F.useDeprecatedSynchronousErrorHandling){const t=!ae;if(t&&(ae={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:o}=ae;if(ae=null,e)throw o}}else n()}class he extends j{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,P(t)&&t.add(this)):this.destination=pe}static create(t,e,o){return new Ce(t,e,o)}next(t){this.isStopped?ce(function z(n){return G("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ce(function $(n){return G("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ce(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ce extends he{constructor(t,e,o){let d;if(super(),U(t))d=t;else if(t){let f;({next:d,error:e,complete:o}=t),this&&F.useDeprecatedNextContext?(f=Object.create(t),f.unsubscribe=()=>this.unsubscribe()):f=t,d=d?.bind(f),e=e?.bind(f),o=o?.bind(f)}this.destination={next:d?ye(d):ue,error:ye(e??me),complete:o?ye(o):ue}}}function ye(n,t){return(...e)=>{try{n(...e)}catch(o){F.useDeprecatedSynchronousErrorHandling?function Te(n){F.useDeprecatedSynchronousErrorHandling&&ae&&(ae.errorThrown=!0,ae.error=n)}(o):se(o)}}}function me(n){throw n}function ce(n,t){const{onStoppedNotification:e}=F;e&&J.setTimeout(()=>e(n,t))}const pe={closed:!0,next:ue,error:me,complete:ue},be="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fe(n){return n}let qe=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const o=new n;return o.source=this,o.operator=e,o}subscribe(e,o,d){const f=function Mt(n){return n&&n instanceof he||function Pe(n){return n&&U(n.next)&&U(n.error)&&U(n.complete)}(n)&&P(n)}(e)?e:new Ce(e,o,d);return Ae(()=>{const{operator:b,source:y}=this;f.add(b?b.call(f,y):y?this._subscribe(f):this._trySubscribe(f))}),f}_trySubscribe(e){try{return this._subscribe(e)}catch(o){e.error(o)}}forEach(e,o){return new(o=Je(o))((d,f)=>{let b;b=this.subscribe(y=>{try{e(y)}catch(w){f(w),b?.unsubscribe()}},f,d)})}_subscribe(e){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(e)}[be](){return this}pipe(...e){return function Ue(n){return 0===n.length?Fe:1===n.length?n[0]:function(e){return n.reduce((o,d)=>d(o),e)}}(e)(this)}toPromise(e){return new(e=Je(e))((o,d)=>{let f;this.subscribe(b=>f=b,b=>d(b),()=>o(f))})}}return n.create=t=>new n(t),n})();function Je(n){var t;return null!==(t=n??F.Promise)&&void 0!==t?t:Promise}const Lt=te(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let yt=(()=>{class n extends qe{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const o=new We(this,this);return o.operator=e,o}_throwIfClosed(){if(this.closed)throw new Lt}next(e){Ae(()=>{if(this._throwIfClosed(),!this.isStopped){const o=this.observers.slice();for(const d of o)d.next(e)}})}error(e){Ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:o}=this;for(;o.length;)o.shift().error(e)}})}complete(){Ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:o,isStopped:d,observers:f}=this;return o||d?M:(f.push(e),new j(()=>H(f,e)))}_checkFinalizedStatuses(e){const{hasError:o,thrownError:d,isStopped:f}=this;o?e.error(d):f&&e.complete()}asObservable(){const e=new qe;return e.source=this,e}}return n.create=(t,e)=>new We(t,e),n})();class We extends yt{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===o||o.call(e,t)}error(t){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===o||o.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,o;return null!==(o=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==o?o:M}}function Ge(n){return t=>{if(function Be(n){return U(n?.lift)}(t))return t.lift(function(e){try{return n(e,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}class Re extends he{constructor(t,e,o,d,f){super(t),this.onFinalize=f,this._next=e?function(b){try{e(b)}catch(y){t.error(y)}}:super._next,this._error=d?function(b){try{d(b)}catch(y){t.error(y)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(b){t.error(b)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function Xe(n,t){return Ge((e,o)=>{let d=0;e.subscribe(new Re(o,f=>{o.next(n.call(t,f,d++))}))})}function Nt(n){return this instanceof Nt?(this.v=n,this):new Nt(n)}function Xt(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,o=e.apply(n,t||[]),f=[];return d={},b("next"),b("throw"),b("return"),d[Symbol.asyncIterator]=function(){return this},d;function b(Ie){o[Ie]&&(d[Ie]=function(ke){return new Promise(function(je,at){f.push([Ie,ke,je,at])>1||y(Ie,ke)})})}function y(Ie,ke){try{!function w(Ie){Ie.value instanceof Nt?Promise.resolve(Ie.value.v).then(k,Q):ie(f[0][2],Ie)}(o[Ie](ke))}catch(je){ie(f[0][3],je)}}function k(Ie){y("next",Ie)}function Q(Ie){y("throw",Ie)}function ie(Ie,ke){Ie(ke),f.shift(),f.length&&y(f[0][0],f[0][1])}}function Me(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function ki(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],o=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(f){e[f]=n[f]&&function(b){return new Promise(function(y,w){!function d(f,b,y,w){Promise.resolve(w).then(function(k){f({value:k,done:y})},b)}(y,w,(b=n[f](b)).done,b.value)})}}}const mo=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function As(n){return U(n?.then)}function go(n){return U(n[be])}function Qu(n){return Symbol.asyncIterator&&U(n?.[Symbol.asyncIterator])}function xn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ye=function an(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pt(n){return U(n?.[Ye])}function ht(n){return Xt(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:o,done:d}=yield Nt(e.read());if(d)return yield Nt(void 0);yield yield Nt(o)}}finally{e.releaseLock()}})}function en(n){return U(n?.getReader)}function dn(n){if(n instanceof qe)return n;if(null!=n){if(go(n))return function ui(n){return new qe(t=>{const e=n[be]();if(U(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(mo(n))return function _o(n){return new qe(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(As(n))return function rs(n){return new qe(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,se)})}(n);if(Qu(n))return no(n);if(pt(n))return function Is(n){return new qe(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(en(n))return function $i(n){return no(ht(n))}(n)}throw xn(n)}function no(n){return new qe(t=>{(function vr(n,t){var e,o,d,f;return function Sr(n,t,e,o){return new(e||(e=Promise))(function(f,b){function y(Q){try{k(o.next(Q))}catch(ie){b(ie)}}function w(Q){try{k(o.throw(Q))}catch(ie){b(ie)}}function k(Q){Q.done?f(Q.value):function d(f){return f instanceof e?f:new e(function(b){b(f)})}(Q.value).then(y,w)}k((o=o.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Me(n);!(o=yield e.next()).done;)if(t.next(o.value),t.closed)return}catch(b){d={error:b}}finally{try{o&&!o.done&&(f=e.return)&&(yield f.call(e))}finally{if(d)throw d.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function En(n,t,e,o=0,d=!1){const f=t.schedule(function(){e(),d?n.add(this.schedule(null,o)):this.unsubscribe()},o);if(n.add(f),!d)return f}function _u(n,t,e=1/0){return U(t)?_u((o,d)=>Xe((f,b)=>t(o,f,d,b))(dn(n(o,d))),e):("number"==typeof t&&(e=t),Ge((o,d)=>function Qc(n,t,e,o,d,f,b,y){const w=[];let k=0,Q=0,ie=!1;const Ie=()=>{ie&&!w.length&&!k&&t.complete()},ke=at=>k<o?je(at):w.push(at),je=at=>{f&&t.next(at),k++;let Vt=!1;dn(e(at,Q++)).subscribe(new Re(t,Qt=>{d?.(Qt),f?ke(Qt):t.next(Qt)},()=>{Vt=!0},void 0,()=>{if(Vt)try{for(k--;w.length&&k<o;){const Qt=w.shift();b?En(t,b,()=>je(Qt)):je(Qt)}Ie()}catch(Qt){t.error(Qt)}}))};return n.subscribe(new Re(t,ke,()=>{ie=!0,Ie()})),()=>{y?.()}}(o,d,n,e)))}function Tl(n=1/0){return _u(Fe,n)}const Pn=new qe(n=>n.complete());function aT(n){return n&&U(n.schedule)}function U_(n){return n[n.length-1]}function HS(n){return U(U_(n))?n.pop():void 0}function hf(n){return aT(U_(n))?n.pop():void 0}function cT(n,t=0){return Ge((e,o)=>{e.subscribe(new Re(o,d=>En(o,n,()=>o.next(d),t),()=>En(o,n,()=>o.complete(),t),d=>En(o,n,()=>o.error(d),t)))})}function ah(n,t=0){return Ge((e,o)=>{o.add(n.schedule(()=>e.subscribe(o),t))})}function j_(n,t){if(!n)throw new Error("Iterable cannot be null");return new qe(e=>{En(e,t,()=>{const o=n[Symbol.asyncIterator]();En(e,t,()=>{o.next().then(d=>{d.done?e.complete():e.next(d.value)})},0,!0)})})}function Bm(n,t){return t?function kk(n,t){if(null!=n){if(go(n))return function Dy(n,t){return dn(n).pipe(ah(t),cT(t))}(n,t);if(mo(n))return function Dk(n,t){return new qe(e=>{let o=0;return t.schedule(function(){o===n.length?e.complete():(e.next(n[o++]),e.closed||this.schedule())})})}(n,t);if(As(n))return function V_(n,t){return dn(n).pipe(ah(t),cT(t))}(n,t);if(Qu(n))return j_(n,t);if(pt(n))return function $s(n,t){return new qe(e=>{let o;return En(e,t,()=>{o=n[Ye](),En(e,t,()=>{let d,f;try{({value:d,done:f}=o.next())}catch(b){return void e.error(b)}f?e.complete():e.next(d)},0,!0)}),()=>U(o?.return)&&o.return()})}(n,t);if(en(n))return function ln(n,t){return j_(ht(n),t)}(n,t)}throw xn(n)}(n,t):dn(n)}function bi(...n){const t=hf(n),e=function is(n,t){return"number"==typeof U_(n)?n.pop():t}(n,1/0),o=n;return o.length?1===o.length?dn(o[0]):Tl(e)(Bm(o,t)):Pn}function Rl(n){return n<=0?()=>Pn:Ge((t,e)=>{let o=0;t.subscribe(new Re(e,d=>{++o<=n&&(e.next(d),n<=o&&e.complete())}))})}function uT(n={}){const{connector:t=(()=>new yt),resetOnError:e=!0,resetOnComplete:o=!0,resetOnRefCountZero:d=!0}=n;return f=>{let b=null,y=null,w=null,k=0,Q=!1,ie=!1;const Ie=()=>{y?.unsubscribe(),y=null},ke=()=>{Ie(),b=w=null,Q=ie=!1},je=()=>{const at=b;ke(),at?.unsubscribe()};return Ge((at,Vt)=>{k++,!ie&&!Q&&Ie();const Qt=w=w??t();Vt.add(()=>{k--,0===k&&!ie&&!Q&&(y=ua(je,d))}),Qt.subscribe(Vt),b||(b=new Ce({next:rn=>Qt.next(rn),error:rn=>{ie=!0,Ie(),y=ua(ke,e,rn),Qt.error(rn)},complete:()=>{Q=!0,Ie(),y=ua(ke,o),Qt.complete()}}),Bm(at).subscribe(b))})(f)}}function ua(n,t,...e){return!0===t?(n(),null):!1===t?null:t(...e).pipe(Rl(1)).subscribe(()=>n())}function Do(n){for(let t in n)if(n[t]===Do)return t;throw Error("Could not find renamed property on target object.")}function Fm(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function ko(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ko).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function GS(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Pk=Do({__forward_ref__:Do});function _i(n){return n.__forward_ref__=_i,n.toString=function(){return ko(this())},n}function Rr(n){return ff(n)?n():n}function ff(n){return"function"==typeof n&&n.hasOwnProperty(Pk)&&n.__forward_ref__===_i}function Um(n){return n&&!!n.\u0275providers}const ky="https://g.co/ng/security#xss";class hn extends Error{constructor(t,e){super(function WS(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function ei(n){return"string"==typeof n?n:null==n?"":String(n)}function KS(n,t){throw new hn(-201,!1)}function Ol(n,t){null==n&&function Wi(n,t,e,o){throw new Error(`ASSERTION ERROR: ${n}`+(null==o?"":` [Expected=> ${e} ${o} ${t} <=Actual]`))}(t,n,null,"!=")}function kn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ci(n){return{providers:n.providers||[],imports:n.imports||[]}}function zS(n){return jm(n,Q_)||jm(n,Py)}function jm(n,t){return n.hasOwnProperty(t)?n[t]:null}function Zn(n){return n&&(n.hasOwnProperty(dT)||n.hasOwnProperty(My))?n[dT]:null}const Q_=Do({\u0275prov:Do}),dT=Do({\u0275inj:Do}),Py=Do({ngInjectableDef:Do}),My=Do({ngInjectorDef:Do});var Mr=(()=>((Mr=Mr||{})[Mr.Default=0]="Default",Mr[Mr.Host=1]="Host",Mr[Mr.Self=2]="Self",Mr[Mr.SkipSelf=4]="SkipSelf",Mr[Mr.Optional=8]="Optional",Mr))();let Fn;function kl(n){const t=Fn;return Fn=n,t}function YS(n,t,e){const o=zS(n);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:e&Mr.Optional?null:void 0!==t?t:void KS(ko(n))}const Po=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_p={},H_="__NG_DI_FLAG__",bd="ngTempTokenPath",xk=/\n/gm,lh="__source";let Gu;function G_(n){const t=Gu;return Gu=n,t}function Bk(n,t=Mr.Default){if(void 0===Gu)throw new hn(-203,!1);return null===Gu?YS(n,void 0,t):Gu.get(n,t&Mr.Optional?null:void 0,t)}function qt(n,t=Mr.Default){return(function fL(){return Fn}()||Bk)(Rr(n),t)}function ac(n,t=Mr.Default){return qt(n,cc(t))}function cc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function qS(n){const t=[];for(let e=0;e<n.length;e++){const o=Rr(n[e]);if(Array.isArray(o)){if(0===o.length)throw new hn(900,!1);let d,f=Mr.Default;for(let b=0;b<o.length;b++){const y=o[b],w=K_(y);"number"==typeof w?-1===w?d=y.token:f|=w:d=y}t.push(qt(d,f))}else t.push(qt(o))}return t}function uo(n,t){return n[H_]=t,n.prototype[H_]=t,n}function K_(n){return n[H_]}function vp(n){return{toString:n}.toString()}var Sd=(()=>((Sd=Sd||{})[Sd.OnPush=0]="OnPush",Sd[Sd.Default=1]="Default",Sd))(),Ku=(()=>{return(n=Ku||(Ku={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ku;var n})();const Cd={},Xi=[],z_=Do({\u0275cmp:Do}),Ny=Do({\u0275dir:Do}),Hm=Do({\u0275pipe:Do}),JS=Do({\u0275mod:Do}),Ap=Do({\u0275fac:Do}),Y_=Do({__NG_ELEMENT_ID__:Do});let vL=0;function Ls(n){return vp(()=>{const e=!0===n.standalone,o={},d={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Sd.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Xi,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ku.Emulated,id:"c"+vL++,styles:n.styles||Xi,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},f=n.dependencies,b=n.features;return d.inputs=Fk(n.inputs,o),d.outputs=Fk(n.outputs),b&&b.forEach(y=>y(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(ws).filter(pT):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(uc).filter(pT):null,d})}function ws(n){return Ni(n)||Bs(n)}function pT(n){return null!==n}function Ii(n){return vp(()=>({type:n.type,bootstrap:n.bootstrap||Xi,declarations:n.declarations||Xi,imports:n.imports||Xi,exports:n.exports||Xi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Fk(n,t){if(null==n)return Cd;const e={};for(const o in n)if(n.hasOwnProperty(o)){let d=n[o],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),e[d]=o,t&&(t[d]=f)}return e}const Gn=Ls;function Sa(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ni(n){return n[z_]||null}function Bs(n){return n[Ny]||null}function uc(n){return n[Hm]||null}function Yu(n){return Array.isArray(n)&&"object"==typeof n[1]}function Td(n){return Array.isArray(n)&&!0===n[1]}function fT(n){return 0!=(4&n.flags)}function mh(n){return n.componentOffset>-1}function zm(n){return 1==(1&n.flags)}function vu(n){return null!==n.template}function Ly(n){return 0!=(256&n[2])}function Af(n,t){return n.hasOwnProperty(Ap)?n[Ap]:null}class Gk{constructor(t,e,o){this.previousValue=t,this.currentValue=e,this.firstChange=o}isFirstChange(){return this.firstChange}}function Pl(){return ZS}function ZS(n){return n.type.prototype.ngOnChanges&&(n.setInput=Wk),X_}function X_(){const n=Ym(this),t=n?.current;if(t){const e=n.previous;if(e===Cd)n.previous=t;else for(let o in t)e[o]=t[o];n.current=null,this.ngOnChanges(t)}}function Wk(n,t,e,o){const d=this.declaredInputs[e],f=Ym(n)||function e0(n,t){return n[_T]=t}(n,{previous:Cd,current:null}),b=f.current||(f.current={}),y=f.previous,w=y[d];b[d]=new Gk(w&&w.currentValue,t,y===Cd),n[o]=t}Pl.ngInherit=!0;const _T="__ngSimpleChanges__";function Ym(n){return n[_T]||null}function Xs(n){for(;Array.isArray(n);)n=n[0];return n}function Fy(n,t){return Xs(t[n])}function Fs(n,t){return Xs(t[n.index])}function r0(n,t){return n.data[t]}function _h(n,t){return n[t]}function Zs(n,t){const e=t[n];return Yu(e)?e:e[0]}function hc(n){return 64==(64&n[2])}function yf(n,t){return null==t?null:n[t]}function jy(n){n[18]=0}function Jm(n,t){n[5]+=t;let e=n,o=n[3];for(;null!==o&&(1===t&&1===e[5]||-1===t&&0===e[5]);)o[5]+=t,e=o,o=o[3]}const qr={lFrame:tg(null),bindingsEnabled:!0};function Z_(){return qr.bindingsEnabled}function vn(){return qr.lFrame.lView}function Pi(){return qr.lFrame.tView}function da(n){return qr.lFrame.contextLView=n,n[8]}function io(n){return qr.lFrame.contextLView=null,n}function Us(){let n=$m();for(;null!==n&&64===n.type;)n=n.parent;return n}function $m(){return qr.lFrame.currentTNode}function Gc(n,t){const e=qr.lFrame;e.currentTNode=n,e.isParent=t}function ET(){return qr.lFrame.isParent}function Hy(){qr.lFrame.isParent=!1}function Ef(){return qr.lFrame.bindingIndex++}function yp(n){const t=qr.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function $k(n,t){const e=qr.lFrame;e.bindingIndex=e.bindingRootIndex=n,Wy(t)}function Wy(n){qr.lFrame.currentDirectiveIndex=n}function u0(n){const t=qr.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}function l0(){return qr.lFrame.currentQueryIndex}function tv(n){qr.lFrame.currentQueryIndex=n}function Zk(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function bT(n,t,e){if(e&Mr.SkipSelf){let d=t,f=n;for(;!(d=d.parent,null!==d||e&Mr.Host||(d=Zk(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;t=d,n=f}const o=qr.lFrame=eg();return o.currentTNode=t,o.lView=n,!0}function Zm(n){const t=eg(),e=n[1];qr.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function eg(){const n=qr.lFrame,t=null===n?null:n.child;return null===t?tg(n):t}function tg(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function bf(){const n=qr.lFrame;return qr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const d0=bf;function nv(){const n=bf();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fc(){return qr.lFrame.selectedIndex}function Ep(n){qr.lFrame.selectedIndex=n}function Jo(){const n=qr.lFrame;return r0(n.tView,n.selectedIndex)}function Es(){qr.lFrame.currentNamespace="svg"}function ng(){!function Ky(){qr.lFrame.currentNamespace=null}()}function Ah(n,t){for(let e=t.directiveStart,o=t.directiveEnd;e<o;e++){const f=n.data[e].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:k,ngOnDestroy:Q}=f;b&&(n.contentHooks||(n.contentHooks=[])).push(-e,b),y&&((n.contentHooks||(n.contentHooks=[])).push(e,y),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,y)),w&&(n.viewHooks||(n.viewHooks=[])).push(-e,w),k&&((n.viewHooks||(n.viewHooks=[])).push(e,k),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,k)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(e,Q)}}function Rs(n,t,e){Ur(n,t,3,e)}function fi(n,t,e,o){(3&n[2])===e&&Ur(n,t,e,o)}function zy(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function Ur(n,t,e,o){const f=o??-1,b=t.length-1;let y=0;for(let w=void 0!==o?65535&n[18]:0;w<b;w++)if("number"==typeof t[w+1]){if(y=t[w],null!=o&&y>=o)break}else t[w]<0&&(n[18]+=65536),(y<f||-1==f)&&(rv(n,e,t,w),n[18]=(4294901760&n[18])+w+2),w++}function rv(n,t,e,o){const d=e[o]<0,f=e[o+1],y=n[d?-e[o]:e[o]];if(d){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{f.call(y)}finally{}}}else try{f.call(y)}finally{}}class pa{constructor(t,e,o){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=o}}function Au(n,t,e){let o=0;for(;o<e.length;){const d=e[o];if("number"==typeof d){if(0!==d)break;o++;const f=e[o++],b=e[o++],y=e[o++];n.setAttribute(t,b,y,f)}else{const f=d,b=e[++o];Eh(f)?n.setProperty(t,f,b):n.setAttribute(t,f,b),o++}}return o}function nP(n){return 3===n||4===n||6===n}function Eh(n){return 64===n.charCodeAt(0)}function mc(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let o=0;o<t.length;o++){const d=t[o];"number"==typeof d?e=d:0===e||Yy(n,e,d,null,-1===e||2===e?t[++o]:null)}}return n}function Yy(n,t,e,o,d){let f=0,b=n.length;if(-1===t)b=-1;else for(;f<n.length;){const y=n[f++];if("number"==typeof y){if(y===t){b=-1;break}if(y>t){b=f-1;break}}}for(;f<n.length;){const y=n[f];if("number"==typeof y)break;if(y===e){if(null===o)return void(null!==d&&(n[f+1]=d));if(o===n[f+1])return void(n[f+2]=d)}f++,null!==o&&f++,null!==d&&f++}-1!==b&&(n.splice(b,0,t),f=b+1),n.splice(f++,0,e),null!==o&&n.splice(f++,0,o),null!==d&&n.splice(f++,0,d)}function qy(n){return-1!==n}function sg(n){return 32767&n}function ov(n,t){let e=function iv(n){return n>>16}(n),o=t;for(;e>0;)o=o[15],e--;return o}let sv=!0;function Nl(n){const t=sv;return sv=n,t}let So=0;const $u={};function Kc(n,t){const e=wa(n,t);if(-1!==e)return e;const o=t[1];o.firstCreatePass&&(n.injectorIndex=t.length,ag(o.data,n),ag(t,null),ag(o.blueprint,null));const d=cg(n,t),f=n.injectorIndex;if(qy(d)){const b=sg(d),y=ov(d,t),w=y[1].data;for(let k=0;k<8;k++)t[f+k]=y[b+k]|w[b+k]}return t[f+8]=d,f}function ag(n,t){n.push(0,0,0,0,0,0,0,0,t)}function wa(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function cg(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,o=null,d=t;for(;null!==d;){if(o=If(d),null===o)return-1;if(e++,d=d[15],-1!==o.injectorIndex)return o.injectorIndex|e<<16}return-1}function ug(n,t,e){!function bh(n,t,e){let o;"string"==typeof e?o=e.charCodeAt(0)||0:e.hasOwnProperty(Y_)&&(o=e[Y_]),null==o&&(o=e[Y_]=So++);const d=255&o;t.data[n+(d>>5)]|=1<<d}(n,t,e)}function zc(n,t,e){if(e&Mr.Optional||void 0!==n)return n;KS()}function Jy(n,t,e,o){if(e&Mr.Optional&&void 0===o&&(o=null),0==(e&(Mr.Self|Mr.Host))){const d=n[9],f=kl(void 0);try{return d?d.get(t,o,e&Mr.Optional):YS(t,o,e&Mr.Optional)}finally{kl(f)}}return zc(o,0,e)}function IT(n,t,e,o=Mr.Default,d){if(null!==n){if(1024&t[2]){const b=function cv(n,t,e,o,d){let f=n,b=t;for(;null!==f&&null!==b&&1024&b[2]&&!(256&b[2]);){const y=h0(f,b,e,o|Mr.Self,$u);if(y!==$u)return y;let w=f.parent;if(!w){const k=b[21];if(k){const Q=k.get(e,$u,o);if(Q!==$u)return Q}w=If(b),b=b[15]}f=w}return d}(n,t,e,o,$u);if(b!==$u)return b}const f=h0(n,t,e,o,$u);if(f!==$u)return f}return Jy(t,e,o,d)}function h0(n,t,e,o,d){const f=function oo(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Y_)?n[Y_]:void 0;return"number"==typeof t?t>=0?255&t:OL:t}(e);if("function"==typeof f){if(!bT(t,n,o))return o&Mr.Host?zc(d,0,o):Jy(t,e,o,d);try{const b=f(o);if(null!=b||o&Mr.Optional)return b;KS()}finally{d0()}}else if("number"==typeof f){let b=null,y=wa(n,t),w=-1,k=o&Mr.Host?t[16][6]:null;for((-1===y||o&Mr.SkipSelf)&&(w=-1===y?cg(n,t):t[y+8],-1!==w&&f0(o,!1)?(b=t[1],y=sg(w),t=ov(w,t)):y=-1);-1!==y;){const Q=t[1];if(lg(f,y,Q.data)){const ie=wT(y,t,e,b,o,k);if(ie!==$u)return ie}w=t[y+8],-1!==w&&f0(o,t[1].data[y+8]===k)&&lg(f,y,t)?(b=Q,y=sg(w),t=ov(w,t)):y=-1}}return d}function wT(n,t,e,o,d,f){const b=t[1],y=b.data[n+8],Q=xi(y,b,e,null==o?mh(y)&&sv:o!=b&&0!=(3&y.type),d&Mr.Host&&f===y);return null!==Q?Xu(t,b,Q,y):$u}function xi(n,t,e,o,d){const f=n.providerIndexes,b=t.data,y=1048575&f,w=n.directiveStart,Q=f>>20,Ie=d?y+Q:n.directiveEnd;for(let ke=o?y:y+Q;ke<Ie;ke++){const je=b[ke];if(ke<w&&e===je||ke>=w&&je.type===e)return ke}if(d){const ke=b[w];if(ke&&vu(ke)&&ke.type===e)return w}return null}function Xu(n,t,e,o){let d=n[e];const f=t.data;if(function p0(n){return n instanceof pa}(d)){const b=d;b.resolving&&function Vm(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new hn(-200,`Circular dependency in DI detected for ${n}${e}`)}(function ro(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ei(n)}(f[e]));const y=Nl(b.canSeeViewProviders);b.resolving=!0;const w=b.injectImpl?kl(b.injectImpl):null;bT(n,o,Mr.Default);try{d=n[e]=b.factory(void 0,f,n,o),t.firstCreatePass&&e>=o.directiveStart&&function bs(n,t,e){const{ngOnChanges:o,ngOnInit:d,ngDoCheck:f}=t.type.prototype;if(o){const b=ZS(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,b),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,b)}d&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,d),f&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,f),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,f))}(e,f[e],t)}finally{null!==w&&kl(w),Nl(y),b.resolving=!1,d0()}}return d}function lg(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function f0(n,t){return!(n&Mr.Self||n&Mr.Host&&t)}class av{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,o){return IT(this._tNode,this._lView,t,cc(o),e)}}function OL(){return new av(Us(),vn())}function ss(n){return vp(()=>{const t=n.prototype.constructor,e=t[Ap]||m0(t),o=Object.prototype;let d=Object.getPrototypeOf(n.prototype).constructor;for(;d&&d!==o;){const f=d[Ap]||m0(d);if(f&&f!==e)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function m0(n){return ff(n)?()=>{const t=m0(Rr(n));return t&&t()}:Af(n)}function If(n){const t=n[1],e=t.type;return 2===e?t.declTNode:1===e?n[6]:null}function wf(n){return function Mo(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const o=e.length;let d=0;for(;d<o;){const f=e[d];if(nP(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<o&&"string"==typeof e[d];)d++;else{if(f===t)return e[d+1];d+=2}}}return null}(Us(),n)}const Tf="__parameters__";function dg(n,t,e){return vp(()=>{const o=function $y(n){return function(...e){if(n){const o=n(...e);for(const d in o)this[d]=o[d]}}}(t);function d(...f){if(this instanceof d)return o.apply(this,f),this;const b=new d(...f);return y.annotation=b,y;function y(w,k,Q){const ie=w.hasOwnProperty(Tf)?w[Tf]:Object.defineProperty(w,Tf,{value:[]})[Tf];for(;ie.length<=Q;)ie.push(null);return(ie[Q]=ie[Q]||[]).push(b),w}}return e&&(d.prototype=Object.create(e.prototype)),d.prototype.ngMetadataName=n,d.annotationCls=d,d})}class tn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=kn({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function el(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let o=n[e];Array.isArray(o)?(t===n&&(t=n.slice(0,e)),el(o,t)):t!==n&&t.push(o)}return t}function Of(n,t){n.forEach(e=>Array.isArray(e)?Of(e,t):t(e))}function dv(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function tl(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Df(n,t){const e=[];for(let o=0;o<n;o++)e.push(t);return e}function Jc(n,t,e){let o=Ch(n,t);return o>=0?n[1|o]=e:(o=~o,function eE(n,t,e,o){let d=n.length;if(d==t)n.push(e,o);else if(1===d)n.push(o,n[0]),n[0]=e;else{for(d--,n.push(n[d-1],n[d]);d>t;)n[d]=n[d-2],d--;n[t]=e,n[t+1]=o}}(n,o,t,e)),o}function v0(n,t){const e=Ch(n,t);if(e>=0)return n[1|e]}function Ch(n,t){return function RT(n,t,e){let o=0,d=n.length>>e;for(;d!==o;){const f=o+(d-o>>1),b=n[f<<e];if(t===b)return f<<e;b>t?d=f:o=f+1}return~(d<<e)}(n,t,1)}const Ac=uo(dg("Optional"),8),Co=uo(dg("SkipSelf"),4);var yc=(()=>((yc=yc||{})[yc.Important=1]="Important",yc[yc.DashCase=2]="DashCase",yc))();const lE=new Map;let wh=0;const vv="__ngContext__";function ta(n,t){Yu(t)?(n[vv]=t[20],function No(n){lE.set(n[20],n)}(t)):n[vv]=t}function Zc(n,t){return undefined(n,t)}function kd(n){const t=n[3];return Td(t)?t[3]:t}function T0(n){return VT(n[13])}function Ev(n){return VT(n[4])}function VT(n){for(;null!==n&&!Td(n);)n=n[4];return n}function _g(n,t,e,o,d){if(null!=o){let f,b=!1;Td(o)?f=o:Yu(o)&&(b=!0,o=o[0]);const y=Xs(o);0===n&&null!==e?null==d?Dh(t,e,y):Sp(t,e,y,d||null,!0):1===n&&null!==e?Sp(t,e,y,d||null,!0):2===n?function na(n,t,e){const o=Sv(n,t);o&&function _P(n,t,e,o){n.removeChild(t,e,o)}(n,o,t,e)}(t,y,b):3===n&&t.destroyNode(y),null!=f&&function L0(n,t,e,o,d){const f=e[7];f!==Xs(e)&&_g(t,n,o,f,d);for(let y=10;y<e.length;y++){const w=e[y];Dr(w[1],w,n,t,o,f)}}(t,n,f,e,d)}}function Pd(n,t,e){return n.createElement(t,e)}function hE(n,t){const e=n[9],o=e.indexOf(t),d=t[3];512&t[2]&&(t[2]&=-513,Jm(d,-1)),e.splice(o,1)}function eu(n,t){if(n.length<=10)return;const e=10+t,o=n[e];if(o){const d=o[17];null!==d&&d!==n&&hE(d,o),t>0&&(n[e-1][4]=o[4]);const f=tl(n,10+t);!function gP(n,t){Dr(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(o[1],o);const b=f[19];null!==b&&b.detachView(f[1]),o[3]=null,o[4]=null,o[2]&=-65}return o}function Oh(n,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&Dr(n,t,e,3,null,null),function Nd(n){let t=n[13];if(!t)return fE(n[1],n);for(;t;){let e=null;if(Yu(t))e=t[13];else{const o=t[10];o&&(e=o)}if(!e){for(;t&&!t[4]&&t!==n;)Yu(t)&&fE(t[1],t),t=t[3];null===t&&(t=n),Yu(t)&&fE(t[1],t),e=t&&t[4]}t=e}}(t)}}function fE(n,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function QT(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let o=0;o<e.length;o+=2){const d=t[e[o]];if(!(d instanceof pa)){const f=e[o+1];if(Array.isArray(f))for(let b=0;b<f.length;b+=2){const y=d[f[b]],w=f[b+1];try{w.call(y)}finally{}}else try{f.call(d)}finally{}}}}(n,t),function bv(n,t){const e=n.cleanup,o=t[7];let d=-1;if(null!==e)for(let f=0;f<e.length-1;f+=2)if("string"==typeof e[f]){const b=e[f+3];b>=0?o[d=b]():o[d=-b].unsubscribe(),f+=2}else{const b=o[d=e[f+1]];e[f].call(b)}if(null!==o){for(let f=d+1;f<o.length;f++)(0,o[f])();t[7]=null}}(n,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Td(t[3])){e!==t[3]&&hE(e,t);const o=t[19];null!==o&&o.detachView(n)}!function dE(n){lE.delete(n[20])}(t)}}function O0(n,t,e){return function D0(n,t,e){let o=t;for(;null!==o&&40&o.type;)o=(t=o).parent;if(null===o)return e[0];{const{componentOffset:d}=o;if(d>-1){const{encapsulation:f}=n.data[o.directiveStart+d];if(f===Ku.None||f===Ku.Emulated)return null}return Fs(o,e)}}(n,t.parent,e)}function Sp(n,t,e,o,d){n.insertBefore(t,e,o,d)}function Dh(n,t,e){n.appendChild(t,e)}function k0(n,t,e,o,d){null!==o?Sp(n,t,e,o,d):Dh(n,t,e)}function Sv(n,t){return n.parentNode(t)}function M0(n,t,e){return AP(n,t,e)}let vE,Fl,AP=function Bl(n,t,e){return 40&n.type?Fs(n,e):null};function N0(n,t,e,o){const d=O0(n,o,t),f=t[11],y=M0(o.parent||t[6],o,t);if(null!=d)if(Array.isArray(e))for(let w=0;w<e.length;w++)k0(f,d,e[w],y,!1);else k0(f,d,e,y,!1)}function fn(n,t){if(null!==t){const e=t.type;if(3&e)return Fs(t,n);if(4&e)return gE(-1,n[t.index]);if(8&e){const o=t.child;if(null!==o)return fn(n,o);{const d=n[t.index];return Td(d)?gE(-1,d):Xs(d)}}if(32&e)return Zc(t,n)()||Xs(n[t.index]);{const o=Cp(n,t);return null!==o?Array.isArray(o)?o[0]:fn(kd(n[16]),o):fn(n,t.next)}}return null}function Cp(n,t){return null!==t?n[16][6].projection[t.projection]:null}function gE(n,t){const e=10+n+1;if(e<t.length){const o=t[e],d=o[1].firstChild;if(null!==d)return fn(o,d)}return t[7]}function bc(n,t,e,o,d,f,b){for(;null!=e;){const y=o[e.index],w=e.type;if(b&&0===t&&(y&&ta(Xs(y),o),e.flags|=2),32!=(32&e.flags))if(8&w)bc(n,t,e.child,o,d,f,!1),_g(t,n,d,y,f);else if(32&w){const k=Zc(e,o);let Q;for(;Q=k();)_g(t,n,d,Q,f);_g(t,n,d,y,f)}else 16&w?_E(n,t,o,e,d,f):_g(t,n,d,y,f);e=b?e.projectionNext:e.next}}function Dr(n,t,e,o,d,f){bc(e,o,n.firstChild,t,d,f,!1)}function _E(n,t,e,o,d,f){const b=e[16],w=b[6].projection[o.projection];if(Array.isArray(w))for(let k=0;k<w.length;k++)_g(t,n,d,w[k],f);else bc(n,t,w,b[3],d,f,!0)}function yg(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function F0(n,t,e){const{mergedAttrs:o,classes:d,styles:f}=e;null!==o&&Au(n,t,o),null!==d&&yg(n,t,d),null!==f&&function yP(n,t,e){n.setAttribute(t,"style",e)}(n,t,f)}function kh(n){return function U0(){if(void 0===vE&&(vE=null,Po.trustedTypes))try{vE=Po.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return vE}()?.createHTML(n)||n}class yu{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ky})`}}class SP extends yu{getTypeName(){return"HTML"}}class CP extends yu{getTypeName(){return"Style"}}class Q0 extends yu{getTypeName(){return"Script"}}class IP extends yu{getTypeName(){return"URL"}}class KT extends yu{getTypeName(){return"ResourceURL"}}function Ds(n){return n instanceof yu?n.changingThisBreaksApplicationSecurity:n}function Eu(n,t){const e=function Ph(n){return n instanceof yu&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${ky})`)}return e===t}class Eg{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(kh(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class qT{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const o=this.inertDocument.createElement("body");e.appendChild(o)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=kh(t),e;const o=this.inertDocument.createElement("body");return o.innerHTML=kh(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(t){const e=t.attributes;for(let d=e.length-1;0<d;d--){const b=e.item(d).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&t.removeAttribute(b)}let o=t.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const Cv=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Jr(n){return(n=String(n)).match(Cv)?n:"unsafe:"+n}function vo(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function bg(...n){const t={};for(const e of n)for(const o in e)e.hasOwnProperty(o)&&(t[o]=!0);return t}const Nf=vo("area,br,col,hr,img,wbr"),RP=vo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),EE=vo("rp,rt"),bE=bg(Nf,bg(RP,vo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bg(EE,vo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bg(EE,RP)),G0=vo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),JT=bg(G0,vo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),SE=vo("script,style,template");class W0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,o=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?o=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,o&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let d=this.checkClobberedElement(e,e.nextSibling);if(d){e=d;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!bE.hasOwnProperty(e))return this.sanitizedSomething=!0,!SE.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const o=t.attributes;for(let d=0;d<o.length;d++){const f=o.item(d),b=f.name,y=b.toLowerCase();if(!JT.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let w=f.value;G0[y]&&(w=Jr(w)),this.buf.push(" ",b,'="',K0(w),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();bE.hasOwnProperty(e)&&!Nf.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(K0(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const FL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,OP=/([^\#-~ |!])/g;function K0(n){return n.replace(/&/g,"&amp;").replace(FL,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(OP,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let us;function CE(n,t){let e=null;try{us=us||function Ld(n){const t=new qT(n);return function dt(){try{return!!(new window.DOMParser).parseFromString(kh(""),"text/html")}catch{return!1}}()?new Eg(t):t}(n);let o=t?String(t):"";e=us.getInertBodyElement(o);let d=5,f=o;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,o=f,f=e.innerHTML,e=us.getInertBodyElement(o)}while(o!==f);return kh((new W0).sanitizeChildren(z0(e)||e))}finally{if(e){const o=z0(e)||e;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function z0(n){return"content"in n&&function Sg(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var wi=(()=>((wi=wi||{})[wi.NONE=0]="NONE",wi[wi.HTML=1]="HTML",wi[wi.STYLE=2]="STYLE",wi[wi.SCRIPT=3]="SCRIPT",wi[wi.URL=4]="URL",wi[wi.RESOURCE_URL=5]="RESOURCE_URL",wi))();const Cr=new tn("ENVIRONMENT_INITIALIZER"),bu=new tn("INJECTOR",-1),Su=new tn("INJECTOR_DEF_TYPES");class wv{get(t,e=_p){if(e===_p){const o=new Error(`NullInjectorError: No provider for ${ko(t)}!`);throw o.name="NullInjectorError",o}return e}}function ls(...n){return{\u0275providers:wE(0,n),\u0275fromNgModule:!0}}function wE(n,...t){const e=[],o=new Set;let d;return Of(t,f=>{const b=f;J0(b,e,[],o)&&(d||(d=[]),d.push(b))}),void 0!==d&&TE(d,e),e}function TE(n,t){for(let e=0;e<n.length;e++){const{providers:d}=n[e];so(d,f=>{t.push(f)})}}function J0(n,t,e,o){if(!(n=Rr(n)))return!1;let d=null,f=Zn(n);const b=!f&&Ni(n);if(f||b){if(b&&!b.standalone)return!1;d=n}else{const w=n.ngModule;if(f=Zn(w),!f)return!1;d=w}const y=o.has(d);if(b){if(y)return!1;if(o.add(d),b.dependencies){const w="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const k of w)J0(k,t,e,o)}}else{if(!f)return!1;{if(null!=f.imports&&!y){let k;o.add(d);try{Of(f.imports,Q=>{J0(Q,t,e,o)&&(k||(k=[]),k.push(Q))})}finally{}void 0!==k&&TE(k,t)}if(!y){const k=Af(d)||(()=>new d);t.push({provide:d,useFactory:k,deps:Xi},{provide:Su,useValue:d,multi:!0},{provide:Cr,useValue:()=>qt(d),multi:!0})}const w=f.providers;null==w||y||so(w,Q=>{t.push(Q)})}}return d!==n&&void 0!==n.providers}function so(n,t){for(let e of n)Um(e)&&(e=e.\u0275providers),Array.isArray(e)?so(e,t):t(e)}const RE=Do({provide:String,useValue:Do});function X0(n){return null!==n&&"object"==typeof n&&RE in n}function Lf(n){return"function"==typeof n}const Bf=new tn("Set Injector scope."),Ip={},DP={};let Z0;function OE(){return void 0===Z0&&(Z0=new wv),Z0}class Nh{}class wp extends Nh{constructor(t,e,o,d){super(),this.parent=e,this.source=o,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bd(t,b=>this.processProvider(b)),this.records.set(bu,Io(void 0,this)),d.has("environment")&&this.records.set(Nh,Io(void 0,this));const f=this.records.get(Bf);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Su.multi,Xi,Mr.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=G_(this),o=kl(void 0);try{return t()}finally{G_(e),kl(o)}}get(t,e=_p,o=Mr.Default){this.assertNotDestroyed(),o=cc(o);const d=G_(this),f=kl(void 0);try{if(!(o&Mr.SkipSelf)){let y=this.records.get(t);if(void 0===y){const w=function DE(n){return"function"==typeof n||"object"==typeof n&&n instanceof tn}(t)&&zS(t);y=w&&this.injectableDefInScope(w)?Io(eC(t),Ip):null,this.records.set(t,y)}if(null!=y)return this.hydrate(t,y)}return(o&Mr.Self?OE():this.parent).get(t,e=o&Mr.Optional&&e===_p?null:e)}catch(b){if("NullInjectorError"===b.name){if((b[bd]=b[bd]||[]).unshift(ko(t)),d)throw b;return function Qm(n,t,e,o){const d=n[bd];throw t[lh]&&d.unshift(t[lh]),n.message=function Wu(n,t,e,o=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let d=ko(t);if(Array.isArray(t))d=t.map(ko).join(" -> ");else if("object"==typeof t){let f=[];for(let b in t)if(t.hasOwnProperty(b)){let y=t[b];f.push(b+":"+("string"==typeof y?JSON.stringify(y):ko(y)))}d=`{${f.join(", ")}}`}return`${e}${o?"("+o+")":""}[${d}]: ${n.replace(xk,"\n  ")}`}("\n"+n.message,d,e,o),n.ngTokenPath=d,n[bd]=null,n}(b,t,"R3InjectorError",this.source)}throw b}finally{kl(f),G_(d)}}resolveInjectorInitializers(){const t=G_(this),e=kl(void 0);try{const o=this.get(Cr.multi,Xi,Mr.Self);for(const d of o)d()}finally{G_(t),kl(e)}}toString(){const t=[],e=this.records;for(const o of e.keys())t.push(ko(o));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new hn(205,!1)}processProvider(t){let e=Lf(t=Rr(t))?t:Rr(t&&t.provide);const o=function tC(n){return X0(n)?Io(void 0,n.useValue):Io(nC(n),Ip)}(t);if(Lf(t)||!0!==t.multi)this.records.get(e);else{let d=this.records.get(e);d||(d=Io(void 0,Ip,!0),d.factory=()=>qS(d.multi),this.records.set(e,d)),e=t,d.multi.push(t)}this.records.set(e,o)}hydrate(t,e){return e.value===Ip&&(e.value=DP,e.value=e.factory()),"object"==typeof e.value&&e.value&&function Ig(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Rr(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function eC(n){const t=zS(n),e=null!==t?t.factory:Af(n);if(null!==e)return e;if(n instanceof tn)throw new hn(204,!1);if(n instanceof Function)return function Cg(n){const t=n.length;if(t>0)throw Df(t,"?"),new hn(204,!1);const e=function Dl(n){const t=n&&(n[Q_]||n[Py]);if(t){const e=function Ed(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new hn(204,!1)}function nC(n,t,e){let o;if(Lf(n)){const d=Rr(n);return Af(d)||eC(d)}if(X0(n))o=()=>Rr(n.useValue);else if(function ZT(n){return!(!n||!n.useFactory)}(n))o=()=>n.useFactory(...qS(n.deps||[]));else if(function XT(n){return!(!n||!n.useExisting)}(n))o=()=>qt(Rr(n.useExisting));else{const d=Rr(n&&(n.useClass||n.provide));if(!function e1(n){return!!n.deps}(n))return Af(d)||eC(d);o=()=>new d(...qS(n.deps))}return o}function Io(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Bd(n,t){for(const e of n)Array.isArray(e)?Bd(e,t):e&&Um(e)?Bd(e.\u0275providers,t):t(e)}class kP{}class t1{}class Tv{resolveComponentFactory(t){throw function Cu(n){const t=Error(`No component factory found for ${ko(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let xh=(()=>{class n{}return n.NULL=new Tv,n})();function rC(){return Ff(Us(),vn())}function Ff(n,t){return new yi(Fs(n,t))}let yi=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=rC,n})();function PP(n){return n instanceof yi?n.nativeElement:n}class Uf{}let sl=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function MP(){const n=vn(),e=Zs(Us().index,n);return(Yu(e)?e:n)[11]}(),n})(),r1=(()=>{class n{}return n.\u0275prov=kn({token:n,providedIn:"root",factory:()=>null}),n})();class Vf{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const o1=new Vf("15.0.2"),Fd={};function Rv(n){return n.ngOriginalError}class Iu{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Rv(t);for(;e&&Rv(e);)e=Rv(e);return e||null}}function jf(n){return n.ownerDocument.defaultView}function NE(n,t,e){let o=n.length;for(;;){const d=n.indexOf(t,e);if(-1===d)return d;if(0===d||n.charCodeAt(d-1)<=32){const f=t.length;if(d+f===o||n.charCodeAt(d+f)<=32)return d}e=d+1}}const Ov="ng-template";function BP(n,t,e){let o=0;for(;o<n.length;){let d=n[o++];if(e&&"class"===d){if(d=n[o],-1!==NE(d.toLowerCase(),t,0))return!0}else if(1===d){for(;o<n.length&&"string"==typeof(d=n[o++]);)if(d.toLowerCase()===t)return!0;return!1}}return!1}function p1(n){return 4===n.type&&n.value!==Ov}function FP(n,t,e){return t===(4!==n.type||e?n.value:Ov)}function UP(n,t,e){let o=4;const d=n.attrs||[],f=function m1(n){for(let t=0;t<n.length;t++)if(nP(n[t]))return t;return n.length}(d);let b=!1;for(let y=0;y<t.length;y++){const w=t[y];if("number"!=typeof w){if(!b)if(4&o){if(o=2|1&o,""!==w&&!FP(n,w,e)||""===w&&1===t.length){if(tu(o))return!1;b=!0}}else{const k=8&o?w:t[++y];if(8&o&&null!==n.attrs){if(!BP(n.attrs,k,e)){if(tu(o))return!1;b=!0}continue}const ie=h1(8&o?"class":w,d,p1(n),e);if(-1===ie){if(tu(o))return!1;b=!0;continue}if(""!==k){let Ie;Ie=ie>f?"":d[ie+1].toLowerCase();const ke=8&o?Ie:null;if(ke&&-1!==NE(ke,k,0)||2&o&&k!==Ie){if(tu(o))return!1;b=!0}}}}else{if(!b&&!tu(o)&&!tu(w))return!1;if(b&&tu(w))continue;b=!1,o=w|1&o}}return tu(o)||b}function tu(n){return 0==(1&n)}function h1(n,t,e,o){if(null===t)return-1;let d=0;if(o||!e){let f=!1;for(;d<t.length;){const b=t[d];if(b===n)return d;if(3===b||6===b)f=!0;else{if(1===b||2===b){let y=t[++d];for(;"string"==typeof y;)y=t[++d];continue}if(4===b)break;if(0===b){d+=4;continue}}d+=f?1:2}return-1}return function oC(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const o=n[e];if("number"==typeof o)return-1;if(o===t)return e;e++}return-1}(t,n)}function xE(n,t,e=!1){for(let o=0;o<t.length;o++)if(UP(n,t[o],e))return!0;return!1}function VP(n,t){e:for(let e=0;e<t.length;e++){const o=t[e];if(n.length===o.length){for(let d=0;d<n.length;d++)if(n[d]!==o[d])continue e;return!0}}return!1}function sC(n,t){return n?":not("+t.trim()+")":t}function wg(n){let t=n[0],e=1,o=2,d="",f=!1;for(;e<n.length;){let b=n[e];if("string"==typeof b)if(2&o){const y=n[++e];d+="["+b+(y.length>0?'="'+y+'"':"")+"]"}else 8&o?d+="."+b:4&o&&(d+=" "+b);else""!==d&&!tu(b)&&(t+=sC(f,d),d=""),o=b,f=f||!tu(o);e++}return""!==d&&(t+=sC(f,d)),t}const jr={};function Bt(n){_1(Pi(),vn(),fc()+n,!1)}function _1(n,t,e,o){if(!o)if(3==(3&t[2])){const f=n.preOrderCheckHooks;null!==f&&Rs(t,f,e)}else{const f=n.preOrderHooks;null!==f&&fi(t,f,0,e)}Ep(e)}function FE(n,t=null,e=null,o){const d=UE(n,t,e,o);return d.resolveInjectorInitializers(),d}function UE(n,t=null,e=null,o,d=new Set){const f=[e||Xi,ls(n)];return o=o||("object"==typeof n?void 0:ko(n)),new wp(f,t||OE(),o||null,d)}let ka=(()=>{class n{static create(e,o){if(Array.isArray(e))return FE({name:""},o,e,"");{const d=e.name??"";return FE({name:d},e.parent,e.providers,d)}}}return n.THROW_IF_NOT_FOUND=_p,n.NULL=new wv,n.\u0275prov=kn({token:n,providedIn:"any",factory:()=>qt(bu)}),n.__NG_ELEMENT_ID__=-1,n})();function vt(n,t=Mr.Default){const e=vn();return null===e?qt(n,t):IT(Us(),e,Rr(n),t)}function hC(){throw new Error("invalid")}function C1(n,t){const e=n.contentQueries;if(null!==e)for(let o=0;o<e.length;o+=2){const d=e[o],f=e[o+1];if(-1!==f){const b=n.data[f];tv(d),b.contentQueries(2,t[f],f)}}}function Bh(n,t,e,o,d,f,b,y,w,k,Q){const ie=t.blueprint.slice();return ie[0]=d,ie[2]=76|o,(null!==Q||n&&1024&n[2])&&(ie[2]|=1024),jy(ie),ie[3]=ie[15]=n,ie[8]=e,ie[10]=b||n&&n[10],ie[11]=y||n&&n[11],ie[12]=w||n&&n[12]||null,ie[9]=k||n&&n[9]||null,ie[6]=f,ie[20]=function FT(){return wh++}(),ie[21]=Q,ie[16]=2==t.type?n[16]:ie,ie}function Rg(n,t,e,o,d){let f=n.data[t];if(null===f)f=function WP(n,t,e,o,d){const f=$m(),b=ET(),w=n.data[t]=function UV(n,t,e,o,d,f){return{type:e,index:o,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?f:f&&f.parent,e,t,o,d);return null===n.firstChild&&(n.firstChild=w),null!==f&&(b?null==f.child&&null!==w.parent&&(f.child=w):null===f.next&&(f.next=w)),w}(n,t,e,o,d),function ev(){return qr.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=e,f.value=o,f.attrs=d;const b=function Xm(){const n=qr.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();f.injectorIndex=null===b?-1:b.injectorIndex}return Gc(f,!0),f}function mC(n,t,e,o){if(0===e)return-1;const d=t.length;for(let f=0;f<e;f++)t.push(o),n.blueprint.push(o),n.data.push(null);return d}function KP(n,t,e){Zm(t);try{const o=n.viewQuery;null!==o&&nM(1,o,e);const d=n.template;null!==d&&YL(n,t,d,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&C1(n,t),n.staticViewQueries&&nM(2,n.viewQuery,e);const f=n.components;null!==f&&function I1(n,t){for(let e=0;e<t.length;e++)B1(n,t[e])}(t,f)}catch(o){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),o}finally{t[2]&=-5,nv()}}function w1(n,t,e,o){const d=t[2];if(128!=(128&d)){Zm(t);try{jy(t),function Gy(n){return qr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&YL(n,t,e,2,o);const b=3==(3&d);if(b){const k=n.preOrderCheckHooks;null!==k&&Rs(t,k,null)}else{const k=n.preOrderHooks;null!==k&&fi(t,k,0,null),zy(t,0)}if(function L1(n){for(let t=T0(n);null!==t;t=Ev(t)){if(!t[2])continue;const e=t[9];for(let o=0;o<e.length;o++){const d=e[o],f=d[3];0==(512&d[2])&&Jm(f,1),d[2]|=512}}}(t),function x1(n){for(let t=T0(n);null!==t;t=Ev(t))for(let e=10;e<t.length;e++){const o=t[e],d=o[1];hc(o)&&w1(d,o,d.template,o[8])}}(t),null!==n.contentQueries&&C1(n,t),b){const k=n.contentCheckHooks;null!==k&&Rs(t,k)}else{const k=n.contentHooks;null!==k&&fi(t,k,1),zy(t,1)}!function KE(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let o=0;o<e.length;o++){const d=e[o];if(d<0)Ep(~d);else{const f=d,b=e[++o],y=e[++o];$k(b,f),y(2,t[f])}}}finally{Ep(-1)}}(n,t);const y=n.components;null!==y&&function fC(n,t){for(let e=0;e<t.length;e++)Dg(n,t[e])}(t,y);const w=n.viewQuery;if(null!==w&&nM(2,w,o),b){const k=n.viewCheckHooks;null!==k&&Rs(t,k)}else{const k=n.viewHooks;null!==k&&fi(t,k,2),zy(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Jm(t[3],-1))}finally{nv()}}}function YL(n,t,e,o,d){const f=fc(),b=2&o;try{Ep(-1),b&&t.length>22&&_1(n,t,22,!1),e(o,d)}finally{Ep(f)}}function zP(n,t,e){if(fT(t)){const d=t.directiveEnd;for(let f=t.directiveStart;f<d;f++){const b=n.data[f];b.contentQueries&&b.contentQueries(1,e[f],f)}}}function YP(n,t,e){!Z_()||(function zE(n,t,e,o){const d=e.directiveStart,f=e.directiveEnd;n.firstCreatePass||Kc(e,t),ta(o,t);const b=e.initialInputs;for(let y=d;y<f;y++){const w=n.data[y],k=vu(w);k&&M1(t,e,w);const Q=Xu(t,n,y,e);ta(Q,t),null!==b&&N1(0,y-d,Q,w,0,b),k&&(Zs(e.index,t)[8]=Q)}}(n,t,e,Fs(e,t)),64==(64&e.flags)&&_C(n,t,e))}function T1(n,t,e=Fs){const o=t.localNames;if(null!==o){let d=t.index+1;for(let f=0;f<o.length;f+=2){const b=o[f+1],y=-1===b?e(t,n):n[b];n[d++]=y}}}function qL(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=qP(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function qP(n,t,e,o,d,f,b,y,w,k){const Q=22+o,ie=Q+d,Ie=function JL(n,t){const e=[];for(let o=0;o<t;o++)e.push(o<n?null:jr);return e}(Q,ie),ke="function"==typeof k?k():k;return Ie[1]={type:n,blueprint:Ie,template:e,queries:null,viewQuery:y,declTNode:t,data:Ie.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:w,consts:ke,incompleteFirstPass:!1}}function XL(n,t,e,o){const d=bC(t);null===e?d.push(o):(d.push(e),n.firstCreatePass&&Vv(n).push(o,d.length-1))}function gC(n,t,e,o){for(let d in n)if(n.hasOwnProperty(d)){e=null===e?{}:e;const f=n[d];null===o?R1(e,t,d,f):o.hasOwnProperty(d)&&R1(e,t,o[d],f)}return e}function R1(n,t,e,o){n.hasOwnProperty(e)?n[e].push(t,o):n[e]=[t,o]}function Sc(n,t,e,o,d,f,b,y){const w=Fs(t,e);let Q,k=t.inputs;!y&&null!=k&&(Q=k[o])?(CC(n,e,Q,o,d),mh(t)&&Mv(e,t.index)):3&t.type&&(o=function O1(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(o),d=null!=b?b(d,t.value||"",o):d,f.setProperty(w,o,d))}function Mv(n,t){const e=Zs(t,n);16&e[2]||(e[2]|=32)}function Rp(n,t,e,o){let d=!1;if(Z_()){const f=null===o?null:{"":-1},b=function XP(n,t){const e=n.directiveRegistry;let o=null,d=null;if(e)for(let f=0;f<e.length;f++){const b=e[f];if(xE(t,b.selectors,!1))if(o||(o=[]),vu(b))if(null!==b.findHostDirectiveDefs){const y=[];d=d||new Map,b.findHostDirectiveDefs(b,y,d),o.unshift(...y,b),YE(n,t,y.length)}else o.unshift(b),YE(n,t,0);else d=d||new Map,b.findHostDirectiveDefs?.(b,o,d),o.push(b)}return null===o?null:[o,d]}(n,e);let y,w;null===b?y=w=null:[y,w]=b,null!==y&&(d=!0,xv(n,t,e,y,f,w)),f&&function ZP(n,t,e){if(t){const o=n.localNames=[];for(let d=0;d<t.length;d+=2){const f=e[t[d+1]];if(null==f)throw new hn(-301,!1);o.push(t[d],f)}}}(e,o,f)}return e.mergedAttrs=mc(e.mergedAttrs,e.attrs),d}function xv(n,t,e,o,d,f){for(let k=0;k<o.length;k++)ug(Kc(e,t),n,o[k].type);!function eM(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,o.length);for(let k=0;k<o.length;k++){const Q=o[k];Q.providersResolver&&Q.providersResolver(Q)}let b=!1,y=!1,w=mC(n,t,o.length,null);for(let k=0;k<o.length;k++){const Q=o[k];e.mergedAttrs=mc(e.mergedAttrs,Q.hostAttrs),P1(n,e,t,w,Q),k1(w,Q,d),null!==Q.contentQueries&&(e.flags|=4),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(e.flags|=64);const ie=Q.type.prototype;!b&&(ie.ngOnChanges||ie.ngOnInit||ie.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),b=!0),!y&&(ie.ngOnChanges||ie.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),y=!0),w++}!function JP(n,t,e){const d=t.directiveEnd,f=n.data,b=t.attrs,y=[];let w=null,k=null;for(let Q=t.directiveStart;Q<d;Q++){const ie=f[Q],Ie=e?e.get(ie):null,je=Ie?Ie.outputs:null;w=gC(ie.inputs,Q,w,Ie?Ie.inputs:null),k=gC(ie.outputs,Q,k,je);const at=null===w||null===b||p1(t)?null:tM(w,Q,b);y.push(at)}null!==w&&(w.hasOwnProperty("class")&&(t.flags|=8),w.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=y,t.inputs=w,t.outputs=k}(n,e,f)}function _C(n,t,e){const o=e.directiveStart,d=e.directiveEnd,f=e.index,b=function Xk(){return qr.lFrame.currentDirectiveIndex}();try{Ep(f);for(let y=o;y<d;y++){const w=n.data[y],k=t[y];Wy(y),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&vC(w,k)}}finally{Ep(-1),Wy(b)}}function vC(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function YE(n,t,e){t.componentOffset=e,(n.components||(n.components=[])).push(t.index)}function k1(n,t,e){if(e){if(t.exportAs)for(let o=0;o<t.exportAs.length;o++)e[t.exportAs[o]]=n;vu(t)&&(e[""]=n)}}function P1(n,t,e,o,d){n.data[o]=d;const f=d.factory||(d.factory=Af(d.type)),b=new pa(f,vu(d),vt);n.blueprint[o]=b,e[o]=b,function Og(n,t,e,o,d){const f=d.hostBindings;if(f){let b=n.hostBindingOpCodes;null===b&&(b=n.hostBindingOpCodes=[]);const y=~t.index;(function D1(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(b)!=y&&b.push(y),b.push(e,o,f)}}(n,t,o,mC(n,e,d.hostVars,jr),d)}function M1(n,t,e){const o=Fs(t,n),d=qL(e),f=n[10],b=Fv(n,Bh(n,d,null,e.onPush?32:16,o,t,f,f.createRenderer(o,e),null,null,null));n[t.index]=b}function jl(n,t,e,o,d,f){const b=Fs(n,t);!function Lv(n,t,e,o,d,f,b){if(null==f)n.removeAttribute(t,d,e);else{const y=null==b?ei(f):b(f,o||"",d);n.setAttribute(t,d,y,e)}}(t[11],b,f,n.value,e,o,d)}function N1(n,t,e,o,d,f){const b=f[t];if(null!==b){const y=o.setInput;for(let w=0;w<b.length;){const k=b[w++],Q=b[w++],ie=b[w++];null!==y?o.setInput(e,ie,k,Q):e[Q]=ie}}}function tM(n,t,e){let o=null,d=0;for(;d<e.length;){const f=e[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(n.hasOwnProperty(f)){null===o&&(o=[]);const b=n[f];for(let y=0;y<b.length;y+=2)if(b[y]===t){o.push(f,b[y+1],e[d+1]);break}}d+=2}else d+=2;else d+=4}return o}function AC(n,t,e,o){return[n,!0,!1,t,null,0,o,e,null,null]}function Dg(n,t){const e=Zs(t,n);if(hc(e)){const o=e[1];48&e[2]?w1(o,e,o.template,e[8]):e[5]>0&&Bv(e)}}function Bv(n){for(let o=T0(n);null!==o;o=Ev(o))for(let d=10;d<o.length;d++){const f=o[d];if(hc(f))if(512&f[2]){const b=f[1];w1(b,f,b.template,f[8])}else f[5]>0&&Bv(f)}const e=n[1].components;if(null!==e)for(let o=0;o<e.length;o++){const d=Zs(e[o],n);hc(d)&&d[5]>0&&Bv(d)}}function B1(n,t){const e=Zs(t,n),o=e[1];(function yC(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(o,e),KP(o,e,e[8])}function Fv(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function Uv(n){for(;n;){n[2]|=32;const t=kd(n);if(Ly(n)&&!t)return n;n=t}return null}function EC(n,t,e,o=!0){const d=t[10];d.begin&&d.begin();try{w1(n,t,n.template,e)}catch(b){throw o&&jv(t,b),b}finally{d.end&&d.end()}}function nM(n,t,e){tv(0),t(n,e)}function bC(n){return n[7]||(n[7]=[])}function Vv(n){return n.cleanup||(n.cleanup=[])}function SC(n,t,e){return(null===n||vu(n))&&(e=function n0(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(e[t.index])),e[11]}function jv(n,t){const e=n[9],o=e?e.get(Iu,null):null;o&&o.handleError(t)}function CC(n,t,e,o,d){for(let f=0;f<e.length;){const b=e[f++],y=e[f++],w=t[b],k=n.data[b];null!==k.setInput?k.setInput(w,d,o,y):w[y]=d}}function Wf(n,t,e){let o=e?n.styles:null,d=e?n.classes:null,f=0;if(null!==t)for(let b=0;b<t.length;b++){const y=t[b];"number"==typeof y?f=y:1==f?d=GS(d,y):2==f&&(o=GS(o,y+": "+t[++b]+";"))}e?n.styles=o:n.stylesWithoutHost=o,e?n.classes=d:n.classesWithoutHost=d}function kg(n,t,e,o,d=!1){for(;null!==e;){const f=t[e.index];if(null!==f&&o.push(Xs(f)),Td(f))for(let y=10;y<f.length;y++){const w=f[y],k=w[1].firstChild;null!==k&&kg(w[1],w,k,o)}const b=e.type;if(8&b)kg(n,t,e.child,o);else if(32&b){const y=Zc(e,t);let w;for(;w=y();)o.push(w)}else if(16&b){const y=Cp(t,e);if(Array.isArray(y))o.push(...y);else{const w=kd(t[16]);kg(w[1],w,y,o,!0)}}e=d?e.projectionNext:e.next}return o}class Kf{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return kg(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Td(t)){const e=t[8],o=e?e.indexOf(this):-1;o>-1&&(eu(t,o),tl(e,o))}this._attachedToViewContainer=!1}Oh(this._lView[1],this._lView)}onDestroy(t){XL(this._lView[1],this._lView,null,t)}markForCheck(){Uv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){EC(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new hn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Md(n,t){Dr(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new hn(902,!1);this._appRef=t}}class rM extends Kf{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;EC(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class qE extends xh{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ni(t);return new Qv(e,this.ngModule)}}function F1(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class U1{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,o){o=cc(o);const d=this.injector.get(t,Fd,o);return d!==Fd||e===Fd?d:this.parentInjector.get(t,e,o)}}class Qv extends t1{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function LE(n){return n.map(wg).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return F1(this.componentDef.inputs)}get outputs(){return F1(this.componentDef.outputs)}create(t,e,o,d){let f=(d=d||this.ngModule)instanceof Nh?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const b=f?new U1(t,f):t,y=b.get(Uf,null);if(null===y)throw new hn(407,!1);const w=b.get(r1,null),k=y.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",ie=o?function $L(n,t,e){return n.selectRootElement(t,e===Ku.ShadowDom)}(k,o,this.componentDef.encapsulation):Pd(k,Q,function iM(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(Q)),Ie=this.componentDef.onPush?288:272,ke=qP(0,null,null,1,0,null,null,null,null,null),je=Bh(null,ke,null,Ie,null,null,y,k,w,b,null);let at,Vt;Zm(je);try{const Qt=this.componentDef;let rn,Ut=null;Qt.findHostDirectiveDefs?(rn=[],Ut=new Map,Qt.findHostDirectiveDefs(Qt,rn,Ut),rn.push(Qt)):rn=[Qt];const Bn=function eB(n,t){const e=n[1];return n[22]=t,Rg(e,22,2,"#host",null)}(je,ie),ai=function tB(n,t,e,o,d,f,b,y){const w=d[1];!function jV(n,t,e,o){for(const d of n)t.mergedAttrs=mc(t.mergedAttrs,d.hostAttrs);null!==t.mergedAttrs&&(Wf(t,t.mergedAttrs,!0),null!==e&&F0(o,e,t))}(o,n,t,b);const k=f.createRenderer(t,e),Q=Bh(d,qL(e),null,e.onPush?32:16,d[n.index],n,f,k,y||null,null,null);return w.firstCreatePass&&YE(w,n,o.length-1),Fv(d,Q),d[n.index]=Q}(Bn,ie,Qt,rn,je,y,k);Vt=r0(ke,22),ie&&function HV(n,t,e,o){if(o)Au(n,e,["ng-version",o1.full]);else{const{attrs:d,classes:f}=function g1(n){const t=[],e=[];let o=1,d=2;for(;o<n.length;){let f=n[o];if("string"==typeof f)2===d?""!==f&&t.push(f,n[++o]):8===d&&e.push(f);else{if(!tu(d))break;d=f}o++}return{attrs:t,classes:e}}(t.selectors[0]);d&&Au(n,e,d),f&&f.length>0&&yg(n,e,f.join(" "))}}(k,Qt,ie,o),void 0!==e&&function GV(n,t,e){const o=n.projection=[];for(let d=0;d<t.length;d++){const f=e[d];o.push(null!=f?Array.from(f):null)}}(Vt,this.ngContentSelectors,e),at=function QV(n,t,e,o,d,f){const b=Us(),y=d[1],w=Fs(b,d);xv(y,d,b,e,null,o);for(let Q=0;Q<e.length;Q++)ta(Xu(d,y,b.directiveStart+Q,b),d);_C(y,d,b),w&&ta(w,d);const k=Xu(d,y,b.directiveStart+b.componentOffset,b);if(n[8]=d[8]=k,null!==f)for(const Q of f)Q(k,t);return zP(y,b,n),k}(ai,Qt,rn,Ut,je,[nB]),KP(ke,je,null)}finally{nv()}return new IC(this.componentType,at,Ff(Vt,je),je,Vt)}}class IC extends kP{constructor(t,e,o,d,f){super(),this.location=o,this._rootLView=d,this._tNode=f,this.instance=e,this.hostView=this.changeDetectorRef=new rM(d),this.componentType=t}setInput(t,e){const o=this._tNode.inputs;let d;if(null!==o&&(d=o[t])){const f=this._rootLView;CC(f[1],f,d,t,e),Mv(f,this._tNode.index)}}get injector(){return new av(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function nB(){const n=Us();Ah(vn()[1],n)}function yr(n){let t=function wC(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const o=[n];for(;t;){let d;if(vu(n))d=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new hn(903,!1);d=t.\u0275dir}if(d){if(e){o.push(d);const b=n;b.inputs=zf(n.inputs),b.declaredInputs=zf(n.declaredInputs),b.outputs=zf(n.outputs);const y=d.hostBindings;y&&al(n,y);const w=d.viewQuery,k=d.contentQueries;if(w&&JE(n,w),k&&TC(n,k),Fm(n.inputs,d.inputs),Fm(n.declaredInputs,d.declaredInputs),Fm(n.outputs,d.outputs),vu(d)&&d.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let b=0;b<f.length;b++){const y=f[b];y&&y.ngInherit&&y(n),y===yr&&(e=!1)}}t=Object.getPrototypeOf(t)}!function V1(n){let t=0,e=null;for(let o=n.length-1;o>=0;o--){const d=n[o];d.hostVars=t+=d.hostVars,d.hostAttrs=mc(d.hostAttrs,e=mc(e,d.hostAttrs))}}(o)}function zf(n){return n===Cd?{}:n===Xi?[]:n}function JE(n,t){const e=n.viewQuery;n.viewQuery=e?(o,d)=>{t(o,d),e(o,d)}:t}function TC(n,t){const e=n.contentQueries;n.contentQueries=e?(o,d,f)=>{t(o,d,f),e(o,d,f)}:t}function al(n,t){const e=n.hostBindings;n.hostBindings=e?(o,d)=>{t(o,d),e(o,d)}:t}let Gv=null;function jd(){if(!Gv){const n=Po.Symbol;if(n&&n.iterator)Gv=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const o=t[e];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Gv=o)}}}return Gv}function Yf(n){return!!Pa(n)&&(Array.isArray(n)||!(n instanceof Map)&&jd()in n)}function Pa(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ma(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Li(n,t,e,o){const d=vn();return Ma(d,Ef(),t)&&(Pi(),jl(Jo(),d,n,t,e,o)),Li}function Jf(n,t,e,o){return Ma(n,Ef(),e)?t+ei(e)+o:jr}function bn(n,t,e,o,d,f,b,y){const w=vn(),k=Pi(),Q=n+22,ie=k.firstCreatePass?function NC(n,t,e,o,d,f,b,y,w){const k=t.consts,Q=Rg(t,n,4,b||null,yf(k,y));Rp(t,e,Q,yf(k,w)),Ah(t,Q);const ie=Q.tViews=qP(2,Q,o,d,f,t.directiveRegistry,t.pipeRegistry,null,t.schemas,k);return null!==t.queries&&(t.queries.template(t,Q),ie.queries=t.queries.embeddedTView(Q)),Q}(Q,k,w,t,e,o,d,f,b):k.data[Q];Gc(ie,!1);const Ie=w[11].createComment("");N0(k,w,Ie,ie),ta(Ie,w),Fv(w,w[Q]=AC(Ie,w,Ie,ie)),zm(ie)&&YP(k,w,ie),null!=b&&T1(w,ie,y)}function ll(n){return _h(function s0(){return qr.lFrame.contextLView}(),22+n)}function nn(n,t,e){const o=vn();return Ma(o,Ef(),t)&&Sc(Pi(),Jo(),o,n,t,o[11],e,!1),nn}function tb(n,t,e,o,d){const b=d?"class":"style";CC(n,e,t.inputs[b],b,o)}function jt(n,t,e,o){const d=vn(),f=Pi(),b=22+n,y=d[11],w=d[b]=Pd(y,t,function rg(){return qr.lFrame.currentNamespace}()),k=f.firstCreatePass?function oM(n,t,e,o,d,f,b){const y=t.consts,k=Rg(t,n,2,d,yf(y,f));return Rp(t,e,k,yf(y,b)),null!==k.attrs&&Wf(k,k.attrs,!1),null!==k.mergedAttrs&&Wf(k,k.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,k),k}(b,f,d,0,t,e,o):f.data[b];return Gc(k,!0),F0(y,w,k),32!=(32&k.flags)&&N0(f,d,w,k),0===function Yk(){return qr.lFrame.elementDepthCount}()&&ta(w,d),function yT(){qr.lFrame.elementDepthCount++}(),zm(k)&&(YP(f,d,k),zP(f,k,d)),null!==o&&T1(d,k),jt}function Wt(){let n=Us();ET()?Hy():(n=n.parent,Gc(n,!1));const t=n;!function Qy(){qr.lFrame.elementDepthCount--}();const e=Pi();return e.firstCreatePass&&(Ah(e,n),fT(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function Ml(n){return 0!=(8&n.flags)}(t)&&tb(e,t,vn(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function CT(n){return 0!=(16&n.flags)}(t)&&tb(e,t,vn(),t.stylesWithoutHost,!1),Wt}function Ti(n,t,e,o){return jt(n,t,e,o),Wt(),Ti}function wc(n,t,e){const o=vn(),d=Pi(),f=n+22,b=d.firstCreatePass?function sM(n,t,e,o,d){const f=t.consts,b=yf(f,o),y=Rg(t,n,8,"ng-container",b);return null!==b&&Wf(y,b,!0),Rp(t,e,y,yf(f,d)),null!==t.queries&&t.queries.elementStart(t,y),y}(f,d,o,t,e):d.data[f];Gc(b,!0);const y=o[f]=o[11].createComment("");return N0(d,o,y,b),ta(y,o),zm(b)&&(YP(d,o,b),zP(d,b,o)),null!=e&&T1(o,b),wc}function Na(){let n=Us();const t=Pi();return ET()?Hy():(n=n.parent,Gc(n,!1)),t.firstCreatePass&&(Ah(t,n),fT(n)&&t.queries.elementEnd(n)),Na}function Yv(n,t,e){return wc(n,t,e),Na(),Yv}function wu(){return vn()}function qv(n){return!!n&&"function"==typeof n.then}const K1=function xC(n){return!!n&&"function"==typeof n.subscribe};function zi(n,t,e,o){const d=vn(),f=Pi(),b=Us();return aM(f,d,d[11],b,n,t,o),zi}function $f(n,t){const e=Us(),o=vn(),d=Pi();return aM(d,o,SC(u0(d.data),e,o),e,n,t),$f}function aM(n,t,e,o,d,f,b){const y=zm(o),k=n.firstCreatePass&&Vv(n),Q=t[8],ie=bC(t);let Ie=!0;if(3&o.type||b){const at=Fs(o,t),Vt=b?b(at):at,Qt=ie.length,rn=b?Bn=>b(Xs(Bn[o.index])):o.index;let Ut=null;if(!b&&y&&(Ut=function z1(n,t,e,o){const d=n.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const b=d[f];if(b===e&&d[f+1]===o){const y=t[7],w=d[f+2];return y.length>w?y[w]:null}"string"==typeof b&&(f+=2)}return null}(n,t,d,o.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=f,Ut.__ngLastListenerFn__=f,Ie=!1;else{f=Jv(o,t,Q,f,!1);const Bn=e.listen(Vt,d,f);ie.push(f,Bn),k&&k.push(d,rn,Qt,Qt+1)}}else f=Jv(o,t,Q,f,!1);const ke=o.outputs;let je;if(Ie&&null!==ke&&(je=ke[d])){const at=je.length;if(at)for(let Vt=0;Vt<at;Vt+=2){const ai=t[je[Vt]][je[Vt+1]].subscribe(f),ci=ie.length;ie.push(f,ai),k&&k.push(d,o.index,ci,-(ci+1))}}}function cM(n,t,e,o){try{return!1!==e(o)}catch(d){return jv(n,d),!1}}function Jv(n,t,e,o,d){return function f(b){if(b===Function)return o;Uv(n.componentOffset>-1?Zs(n.index,t):t);let w=cM(t,0,o,b),k=f.__ngNextListenerFn__;for(;k;)w=cM(t,0,k,b)&&w,k=k.__ngNextListenerFn__;return d&&!1===w&&(b.preventDefault(),b.returnValue=!1),w}}function ur(n=1){return function ST(n){return(qr.lFrame.contextLView=function eP(n,t){for(;n>0;)t=t[15],n--;return t}(n,qr.lFrame.contextLView))[8]}(n)}function uM(n,t){let e=null;const o=function f1(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let d=0;d<t.length;d++){const f=t[d];if("*"!==f){if(null===o?xE(n,f,!0):VP(o,f))return d}else e=d}return e}function xo(n){const t=vn()[16][6];if(!t.projection){const o=t.projection=Df(n?n.length:1,null),d=o.slice();let f=t.child;for(;null!==f;){const b=n?uM(f,n):0;null!==b&&(d[b]?d[b].projectionNext=f:o[b]=f,d[b]=f),f=f.next}}}function Lo(n,t=0,e){const o=vn(),d=Pi(),f=Rg(d,22+n,16,null,e||null);null===f.projection&&(f.projection=t),Hy(),32!=(32&f.flags)&&function x0(n,t,e){_E(t[11],0,t,e,O0(n,e,t),M0(e.parent||t[6],e,t))}(d,o,f)}function FC(n,t){return n<<17|t<<2}function xa(n){return n>>17&32767}function Xv(n){return 2|n}function ec(n){return(131068&n)>>2}function Gl(n,t){return-131069&n|t<<2}function xg(n){return 1|n}function dM(n,t,e,o,d){const f=n[e+1],b=null===t;let y=o?xa(f):ec(f),w=!1;for(;0!==y&&(!1===w||b);){const Q=n[y+1];sB(n[y],t)&&(w=!0,n[y+1]=o?xg(Q):Xv(Q)),y=o?xa(Q):ec(Q)}w&&(n[e+1]=o?Xv(f):xg(f))}function sB(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Ch(n,t)>=0}const ds={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ru(n){return n.substring(ds.key,ds.keyEnd)}function $1(n,t){const e=ds.textEnd;return e===t?-1:(t=ds.keyEnd=function Lg(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,ds.key=t,e),Zv(n,t,e))}function Zv(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Bg(n,t,e){return iu(n,t,e,!1),Bg}function ps(n,t){return iu(n,t,null,!0),ps}function Si(n,t){for(let e=function cB(n){return function hM(n){ds.key=0,ds.keyEnd=0,ds.value=0,ds.valueEnd=0,ds.textEnd=n.length}(n),$1(n,Zv(n,0,ds.textEnd))}(t);e>=0;e=$1(t,e))Jc(n,ru(t),!0)}function iu(n,t,e,o){const d=vn(),f=Pi(),b=yp(2);f.firstUpdatePass&&La(f,n,b,o),t!==jr&&Ma(d,b,t)&&gM(f,f.data[fc()],d,d[11],n,d[b+1]=function eA(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=ko(Ds(n)))),n}(t,e),o,b)}function mM(n,t){return t>=n.expandoStartIndex}function La(n,t,e,o){const d=n.data;if(null===d[e+1]){const f=d[fc()],b=mM(n,e);_M(f,o)&&null===t&&!b&&(t=!1),t=function eR(n,t,e,o){const d=u0(n);let f=o?t.residualClasses:t.residualStyles;if(null===d)0===(o?t.classBindings:t.styleBindings)&&(e=Zf(e=rb(null,n,t,e,o),t.attrs,o),f=null);else{const b=t.directiveStylingLast;if(-1===b||n[b]!==d)if(e=rb(d,n,t,e,o),null===f){let w=function jC(n,t,e){const o=e?t.classBindings:t.styleBindings;if(0!==ec(o))return n[xa(o)]}(n,t,o);void 0!==w&&Array.isArray(w)&&(w=rb(null,n,t,w[1],o),w=Zf(w,t.attrs,o),function QC(n,t,e,o){n[xa(e?t.classBindings:t.styleBindings)]=o}(n,t,o,w))}else f=function HC(n,t,e){let o;const d=t.directiveEnd;for(let f=1+t.directiveStylingLast;f<d;f++)o=Zf(o,n[f].hostAttrs,e);return Zf(o,t.attrs,e)}(n,t,o)}return void 0!==f&&(o?t.residualClasses=f:t.residualStyles=f),e}(d,f,t,o),function Tc(n,t,e,o,d,f){let b=f?t.classBindings:t.styleBindings,y=xa(b),w=ec(b);n[o]=e;let Q,k=!1;if(Array.isArray(e)){const ie=e;Q=ie[1],(null===Q||Ch(ie,Q)>0)&&(k=!0)}else Q=e;if(d)if(0!==w){const Ie=xa(n[y+1]);n[o+1]=FC(Ie,y),0!==Ie&&(n[Ie+1]=Gl(n[Ie+1],o)),n[y+1]=function Xf(n,t){return 131071&n|t<<17}(n[y+1],o)}else n[o+1]=FC(y,0),0!==y&&(n[y+1]=Gl(n[y+1],o)),y=o;else n[o+1]=FC(w,0),0===y?y=o:n[w+1]=Gl(n[w+1],o),w=o;k&&(n[o+1]=Xv(n[o+1])),dM(n,Q,o,!0),dM(n,Q,o,!1),function oB(n,t,e,o,d){const f=d?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof t&&Ch(f,t)>=0&&(e[o+1]=xg(e[o+1]))}(t,Q,n,o,f),b=FC(y,w),f?t.classBindings=b:t.styleBindings=b}(d,f,t,e,b,o)}}function rb(n,t,e,o,d){let f=null;const b=e.directiveEnd;let y=e.directiveStylingLast;for(-1===y?y=e.directiveStart:y++;y<b&&(f=t[y],o=Zf(o,f.hostAttrs,d),f!==n);)y++;return null!==n&&(e.directiveStylingLast=y),o}function Zf(n,t,e){const o=e?1:2;let d=-1;if(null!==t)for(let f=0;f<t.length;f++){const b=t[f];"number"==typeof b?d=b:d===o&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Jc(n,b,!!e||t[++f]))}return void 0===n?null:n}function gM(n,t,e,o,d,f,b,y){if(!(3&t.type))return;const w=n.data,k=w[y+1],Q=function Ng(n){return 1==(1&n)}(k)?WC(w,t,e,d,ec(k),b):void 0;ib(Q)||(ib(f)||function iB(n){return 2==(2&n)}(k)&&(f=WC(w,null,e,d,y,b)),function B0(n,t,e,o,d){if(t)d?n.addClass(e,o):n.removeClass(e,o);else{let f=-1===o.indexOf("-")?void 0:yc.DashCase;null==d?n.removeStyle(e,o,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=yc.Important),n.setStyle(e,o,d,f))}}(o,b,Fy(fc(),e),d,f))}function WC(n,t,e,o,d,f){const b=null===t;let y;for(;d>0;){const w=n[d],k=Array.isArray(w),Q=k?w[1]:w,ie=null===Q;let Ie=e[d+1];Ie===jr&&(Ie=ie?Xi:void 0);let ke=ie?v0(Ie,o):Q===o?Ie:void 0;if(k&&!ib(ke)&&(ke=v0(w,o)),ib(ke)&&(y=ke,b))return y;const je=n[d+1];d=b?xa(je):ec(je)}if(null!==t){let w=f?t.residualClasses:t.residualStyles;null!=w&&(y=v0(w,o))}return y}function ib(n){return void 0!==n}function _M(n,t){return 0!=(n.flags&(t?8:16))}function mn(n,t=""){const e=vn(),o=Pi(),d=n+22,f=o.firstCreatePass?Rg(o,d,1,t,null):o.data[d],b=e[d]=function vg(n,t){return n.createText(t)}(e[11],t);N0(o,e,b,f),Gc(f,!1)}function Gd(n){return vi("",n,""),Gd}function vi(n,t,e){const o=vn(),d=Jf(o,n,t,e);return d!==jr&&function Vd(n,t,e){const o=Fy(t,n);!function jT(n,t,e){n.setValue(t,e)}(n[11],o,e)}(o,fc(),d),vi}function iR(n,t,e){!function Vs(n,t,e,o){const d=Pi(),f=yp(2);d.firstUpdatePass&&La(d,null,f,o);const b=vn();if(e!==jr&&Ma(b,f,e)){const y=d.data[fc()];if(_M(y,o)&&!mM(d,f)){let w=o?y.classesWithoutHost:y.stylesWithoutHost;null!==w&&(e=GS(w,e||"")),tb(d,y,b,e,o)}else!function xp(n,t,e,o,d,f,b,y){d===jr&&(d=Xi);let w=0,k=0,Q=0<d.length?d[0]:null,ie=0<f.length?f[0]:null;for(;null!==Q||null!==ie;){const Ie=w<d.length?d[w+1]:void 0,ke=k<f.length?f[k+1]:void 0;let at,je=null;Q===ie?(w+=2,k+=2,Ie!==ke&&(je=ie,at=ke)):null===ie||null!==Q&&Q<ie?(w+=2,je=Q):(k+=2,je=ie,at=ke),null!==je&&gM(n,t,e,o,je,at,b,y),Q=w<d.length?d[w]:null,ie=k<f.length?f[k]:null}}(d,y,b,b[11],b[f+1],b[f+1]=function lB(n,t,e){if(null==e||""===e)return Xi;const o=[],d=Ds(e);if(Array.isArray(d))for(let f=0;f<d.length;f++)n(o,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&n(o,f,d[f]);else"string"==typeof d&&t(o,d);return o}(n,t,e),o,f)}}(Jc,Si,Jf(vn(),n,t,e),!0)}function nm(n,t,e){const o=vn();return Ma(o,Ef(),t)&&Sc(Pi(),Jo(),o,n,t,o[11],e,!0),nm}function Bo(n,t,e){const o=vn();if(Ma(o,Ef(),t)){const f=Pi(),b=Jo();Sc(f,b,o,n,t,SC(u0(f.data),b,o),e,!0)}return Bo}const Rc="en-US";let rm=Rc;function am(n,t,e,o,d){if(n=Rr(n),Array.isArray(n))for(let f=0;f<n.length;f++)am(n[f],t,e,o,d);else{const f=Pi(),b=vn();let y=Lf(n)?n:Rr(n.provide),w=nC(n);const k=Us(),Q=1048575&k.providerIndexes,ie=k.directiveStart,Ie=k.providerIndexes>>20;if(Lf(n)||!n.multi){const ke=new pa(w,d,vt),je=cm(y,t,d?Q:Q+Ie,ie);-1===je?(ug(Kc(k,b),f,y),Sb(f,n,t.length),t.push(y),k.directiveStart++,k.directiveEnd++,d&&(k.providerIndexes+=1048576),e.push(ke),b.push(ke)):(e[je]=ke,b[je]=ke)}else{const ke=cm(y,t,Q+Ie,ie),je=cm(y,t,Q,Q+Ie),at=ke>=0&&e[ke],Vt=je>=0&&e[je];if(d&&!Vt||!d&&!at){ug(Kc(k,b),f,y);const Qt=function VM(n,t,e,o,d){const f=new pa(n,e,vt);return f.multi=[],f.index=t,f.componentProviders=0,hA(f,d,o&&!e),f}(d?UM:FM,e.length,d,o,w);!d&&Vt&&(e[je].providerFactory=Qt),Sb(f,n,t.length,0),t.push(y),k.directiveStart++,k.directiveEnd++,d&&(k.providerIndexes+=1048576),e.push(Qt),b.push(Qt)}else Sb(f,n,ke>-1?ke:je,hA(e[d?je:ke],w,!d&&o));!d&&o&&Vt&&e[je].componentProviders++}}}function Sb(n,t,e,o){const d=Lf(t),f=function Mh(n){return!!n.useClass}(t);if(d||f){const w=(f?Rr(t.useClass):t).prototype.ngOnDestroy;if(w){const k=n.destroyHooks||(n.destroyHooks=[]);if(!d&&t.multi){const Q=k.indexOf(e);-1===Q?k.push(e,[o,w]):k[Q+1].push(o,w)}else k.push(e,w)}}}function hA(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function cm(n,t,e,o){for(let d=e;d<o;d++)if(t[d]===n)return d;return-1}function FM(n,t,e,o){return wR(this.multi,[])}function UM(n,t,e,o){const d=this.multi;let f;if(this.providerFactory){const b=this.providerFactory.componentProviders,y=Xu(e,e[1],this.providerFactory.index,o);f=y.slice(0,b),wR(d,f);for(let w=b;w<y.length;w++)f.push(y[w])}else f=[],wR(d,f);return f}function wR(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function ho(n,t=[]){return e=>{e.providersResolver=(o,d)=>function pA(n,t,e){const o=Pi();if(o.firstCreatePass){const d=vu(n);am(e,o.data,o.blueprint,d,!0),am(t,o.data,o.blueprint,d,!1)}}(o,d?d(n):n,t)}}class fA{}class jM{}class Ru extends fA{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qE(this);const o=function zu(n,t){const e=n[JS]||null;if(!e&&!0===t)throw new Error(`Type ${ko(n)} does not have '\u0275mod' property.`);return e}(t);this._bootstrapComponents=function Ud(n){return n instanceof Function?n():n}(o.bootstrap),this._r3Injector=UE(t,e,[{provide:fA,useValue:this},{provide:xh,useValue:this.componentFactoryResolver}],ko(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class RR extends jM{constructor(t){super(),this.moduleType=t}create(t){return new Ru(this.moduleType,t)}}function GM(n,t,e,o,d,f){const b=t+e;return Ma(n,b,d)?function Qd(n,t,e){return n[t]=e}(n,b+1,f?o.call(f,d):o(d)):function Zg(n,t){const e=n[t];return e===jr?void 0:e}(n,b+1)}function QR(n,t,e){const o=n+22,d=vn(),f=_h(d,o);return function _A(n,t){return n[1].data[t].pure}(d,o)?GM(d,function Ts(){const n=qr.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}(),t,f.transform,e,f):f.transform(e)}function t_(n){return t=>{setTimeout(n,void 0,t)}}const Qi=class Vp extends yt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,o){let d=t,f=e||(()=>null),b=o;if(t&&"object"==typeof t){const w=t;d=w.next?.bind(w),f=w.error?.bind(w),b=w.complete?.bind(w)}this.__isAsync&&(f=t_(f),d&&(d=t_(d)),b&&(b=t_(b)));const y=super.subscribe({next:d,error:f,complete:b});return t instanceof j&&t.add(y),y}};function vA(){return this._results[jd()]()}class ku{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=jd(),o=ku.prototype;o[e]||(o[e]=vA)}get changes(){return this._changes||(this._changes=new Qi)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const o=this;o.dirty=!1;const d=el(t);(this._changesDetected=!function xl(n,t,e){if(n.length!==t.length)return!1;for(let o=0;o<n.length;o++){let d=n[o],f=t[o];if(e&&(d=e(d),f=e(f)),f!==d)return!1}return!0}(o._results,d,e))&&(o._results=d,o.length=d.length,o.last=d[this.length-1],o.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let pl=(()=>{class n{}return n.__NG_ELEMENT_ID__=TB,n})();const YM=pl,wB=class extends YM{constructor(t,e,o){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=o}createEmbeddedView(t,e){const o=this._declarationTContainer.tViews,d=Bh(this._declarationLView,o,t,16,null,o.declTNode,null,null,null,null,e||null);d[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(d[19]=b.createEmbeddedView(o)),KP(o,d,t),new Kf(d)}};function TB(){return aI(Us(),vn())}function aI(n,t){return 4&n.type?new wB(t,n,Ff(n,t)):null}let Oc=(()=>{class n{}return n.__NG_ELEMENT_ID__=RB,n})();function RB(){return uI(Us(),vn())}const AA=Oc,GR=class extends AA{constructor(t,e,o){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=o}get element(){return Ff(this._hostTNode,this._hostLView)}get injector(){return new av(this._hostTNode,this._hostLView)}get parentInjector(){const t=cg(this._hostTNode,this._hostLView);if(qy(t)){const e=ov(t,this._hostLView),o=sg(t);return new av(e[1].data[o+8],e)}return new av(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=wb(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,o){let d,f;"number"==typeof o?d=o:null!=o&&(d=o.index,f=o.injector);const b=t.createEmbeddedView(e||{},f);return this.insert(b,d),b}createComponent(t,e,o,d,f){const b=t&&!function qc(n){return"function"==typeof n}(t);let y;if(b)y=e;else{const ie=e||{};y=ie.index,o=ie.injector,d=ie.projectableNodes,f=ie.environmentInjector||ie.ngModuleRef}const w=b?t:new Qv(Ni(t)),k=o||this.parentInjector;if(!f&&null==w.ngModule){const Ie=(b?k:this.parentInjector).get(Nh,null);Ie&&(f=Ie)}const Q=w.create(k,d,void 0,f);return this.insert(Q.hostView,y),Q}insert(t,e){const o=t._lView,d=o[1];if(function vh(n){return Td(n[3])}(o)){const Q=this.indexOf(t);if(-1!==Q)this.detach(Q);else{const ie=o[3],Ie=new GR(ie,ie[6],ie[3]);Ie.detach(Ie.indexOf(t))}}const f=this._adjustIndex(e),b=this._lContainer;!function Ag(n,t,e,o){const d=10+o,f=e.length;o>0&&(e[d-1][4]=t),o<f-10?(t[4]=e[d],dv(e,10+o,t)):(e.push(t),t[4]=null),t[3]=e;const b=t[17];null!==b&&e!==b&&function PL(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(b,t);const y=t[19];null!==y&&y.insertView(n),t[2]|=64}(d,o,b,f);const y=gE(f,b),w=o[11],k=Sv(w,b[7]);return null!==k&&function Oa(n,t,e,o,d,f){o[0]=d,o[6]=t,Dr(n,o,e,1,d,f)}(d,b[6],w,o,k,y),t.attachToViewContainerRef(),dv(cI(b),f,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=wb(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),o=eu(this._lContainer,e);o&&(tl(cI(this._lContainer),e),Oh(o[1],o))}detach(t){const e=this._adjustIndex(t,-1),o=eu(this._lContainer,e);return o&&null!=tl(cI(this._lContainer),e)?new Kf(o):null}_adjustIndex(t,e=0){return t??this.length+e}};function wb(n){return n[8]}function cI(n){return n[8]||(n[8]=[])}function uI(n,t){let e;const o=t[n.index];if(Td(o))e=o;else{let d;if(8&n.type)d=Xs(o);else{const f=t[11];d=f.createComment("");const b=Fs(n,t);Sp(f,Sv(f,b),d,function vP(n,t){return n.nextSibling(t)}(f,b),!1)}t[n.index]=e=AC(o,t,d,n),Fv(t,e)}return new GR(e,n,t)}class Tb{constructor(t){this.queryList=t,this.matches=null}clone(){return new Tb(this.queryList)}setDirty(){this.queryList.setDirty()}}class qd{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const o=null!==t.contentQueries?t.contentQueries[0]:e.length,d=[];for(let f=0;f<o;f++){const b=e.getByIndex(f);d.push(this.queries[b.indexInDeclarationView].clone())}return new qd(d)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Pc(t,e).matches&&this.queries[e].setDirty()}}class Dc{constructor(t,e,o=null){this.predicate=t,this.flags=e,this.read=o}}class n_{constructor(t=[]){this.queries=t}elementStart(t,e){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let o=0;o<this.length;o++){const d=null!==e?e.length:0,f=this.getByIndex(o).embeddedTView(t,d);f&&(f.indexInDeclarationView=o,null!==e?e.push(f):e=[f])}return null!==e?new n_(e):null}template(t,e){for(let o=0;o<this.queries.length;o++)this.queries[o].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class dm{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new dm(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let o=t.parent;for(;null!==o&&8&o.type&&o.index!==e;)o=o.parent;return e===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const o=this.metadata.predicate;if(Array.isArray(o))for(let d=0;d<o.length;d++){const f=o[d];this.matchTNodeWithReadOption(t,e,WR(e,f)),this.matchTNodeWithReadOption(t,e,xi(e,t,f,!1,!1))}else o===pl?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,xi(e,t,o,!1,!1))}matchTNodeWithReadOption(t,e,o){if(null!==o){const d=this.metadata.read;if(null!==d)if(d===yi||d===Oc||d===pl&&4&e.type)this.addMatch(e.index,-2);else{const f=xi(e,t,d,!1,!1);null!==f&&this.addMatch(e.index,f)}else this.addMatch(e.index,o)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function WR(n,t){const e=n.localNames;if(null!==e)for(let o=0;o<e.length;o+=2)if(e[o]===t)return e[o+1];return null}function yA(n,t,e,o){return-1===e?function Rb(n,t){return 11&n.type?Ff(n,t):4&n.type?aI(n,t):null}(t,n):-2===e?function JM(n,t,e){return e===yi?Ff(t,n):e===pl?aI(t,n):e===Oc?uI(t,n):void 0}(n,t,o):Xu(n,n[1],e,t)}function dI(n,t,e,o){const d=t[19].queries[o];if(null===d.matches){const f=n.data,b=e.matches,y=[];for(let w=0;w<b.length;w+=2){const k=b[w];y.push(k<0?null:yA(t,f[k],b[w+1],e.metadata.read))}d.matches=y}return d.matches}function Ob(n,t,e,o){const d=n.queries.getByIndex(e),f=d.matches;if(null!==f){const b=dI(n,t,d,e);for(let y=0;y<f.length;y+=2){const w=f[y];if(w>0)o.push(b[y/2]);else{const k=f[y+1],Q=t[-w];for(let ie=10;ie<Q.length;ie++){const Ie=Q[ie];Ie[17]===Ie[3]&&Ob(Ie[1],Ie,k,o)}if(null!==Q[9]){const ie=Q[9];for(let Ie=0;Ie<ie.length;Ie++){const ke=ie[Ie];Ob(ke[1],ke,k,o)}}}}}return o}function Yi(n){const t=vn(),e=Pi(),o=l0();tv(o+1);const d=Pc(e,o);if(n.dirty&&function Vy(n){return 4==(4&n[2])}(t)===(2==(2&d.metadata.flags))){if(null===d.matches)n.reset([]);else{const f=d.crossesNgTemplate?Ob(e,t,o,[]):dI(e,t,d,o);n.reset(f,PP),n.notifyOnChanges()}return!0}return!1}function ma(n,t,e){const o=Pi();o.firstCreatePass&&(hI(o,new Dc(n,t,e),-1),2==(2&t)&&(o.staticViewQueries=!0)),KR(o,vn(),t)}function kc(n,t,e,o){const d=Pi();if(d.firstCreatePass){const f=Us();hI(d,new Dc(t,e,o),f.index),function Qp(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(d,n),2==(2&e)&&(d.staticContentQueries=!0)}KR(d,vn(),e)}function li(){return function pI(n,t){return n[19].queries[t].queryList}(vn(),l0())}function KR(n,t,e){const o=new ku(4==(4&e));XL(n,t,o,o.destroy),null===t[19]&&(t[19]=new qd),t[19].queries.push(new Tb(o))}function hI(n,t,e){null===n.queries&&(n.queries=new n_),n.queries.track(new dm(t,e))}function Pc(n,t){return n.queries.getByIndex(t)}function fI(n,t){return aI(n,t)}function Mb(...n){}const Nb=new tn("Application Initializer");let Ao=(()=>{class n{constructor(e){this.appInits=e,this.resolve=Mb,this.reject=Mb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,d)=>{this.resolve=o,this.reject=d})}runInitializers(){if(this.initialized)return;const e=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(qv(f))e.push(f);else if(K1(f)){const b=new Promise((y,w)=>{f.subscribe({complete:y,error:w})});e.push(b)}}Promise.all(e).then(()=>{o()}).catch(d=>{this.reject(d)}),0===e.length&&o(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(qt(Nb,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const i_=new tn("AppId",{providedIn:"root",factory:function nO(){return`${xb()}${xb()}${xb()}`}});function xb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rO=new tn("Platform Initializer"),Lb=new tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),iO=new tn("appBootstrapListener"),ep=new tn("AnimationModuleType"),Yl=new tn("LocaleId",{providedIn:"root",factory:()=>ac(Yl,Mr.Optional|Mr.SkipSelf)||function oO(){return typeof $localize<"u"&&$localize.locale||Rc}()}),bI=(()=>Promise.resolve(0))();function OA(n){typeof Zone>"u"?bI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Qr{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qi(!1),this.onMicrotaskEmpty=new Qi(!1),this.onStable=new Qi(!1),this.onError=new Qi(!1),typeof Zone>"u")throw new hn(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!o&&e,d.shouldCoalesceRunChangeDetection=o,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function sO(){let n=Po.requestAnimationFrame,t=Po.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function g2(n){const t=()=>{!function Fb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Po,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,II(n),n.isCheckStableRunning=!0,CI(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),II(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,o,d,f,b,y)=>{try{return aO(n),e.invokeTask(d,f,b,y)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&t(),cO(n)}},onInvoke:(e,o,d,f,b,y,w)=>{try{return aO(n),e.invoke(d,f,b,y,w)}finally{n.shouldCoalesceRunChangeDetection&&t(),cO(n)}},onHasTask:(e,o,d,f)=>{e.hasTask(d,f),o===d&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,II(n),CI(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(e,o,d,f)=>(e.handleError(d,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qr.isInAngularZone())throw new hn(909,!1)}static assertNotInAngularZone(){if(Qr.isInAngularZone())throw new hn(909,!1)}run(t,e,o){return this._inner.run(t,e,o)}runTask(t,e,o,d){const f=this._inner,b=f.scheduleEventTask("NgZoneEvent: "+d,t,m2,Mb,Mb);try{return f.runTask(b,e,o)}finally{f.cancelTask(b)}}runGuarded(t,e,o){return this._inner.runGuarded(t,e,o)}runOutsideAngular(t){return this._outer.run(t)}}const m2={};function CI(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function II(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function aO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function cO(n){n._nesting--,CI(n)}class DA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qi,this.onMicrotaskEmpty=new Qi,this.onStable=new Qi,this.onError=new Qi}run(t,e,o){return t.apply(e,o)}runGuarded(t,e,o){return t.apply(e,o)}runOutsideAngular(t){return t()}runTask(t,e,o,d){return t.apply(e,o)}}const _2=new tn(""),Ub=new tn("");let Kh,tp=(()=>{class n{constructor(e,o,d){this._ngZone=e,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Kh||(function v2(n){Kh=n}(d),d.addToWindow(o)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qr.assertNotInAngularZone(),OA(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())OA(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(e)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,o,d){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==f),e(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:e,timeoutId:f,updateCb:d})}whenStable(e,o,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,o,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,o,d){return[]}}return n.\u0275fac=function(e){return new(e||n)(qt(Qr),qt(Kp),qt(Ub))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})(),Kp=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,o){this._applications.set(e,o)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,o=!0){return Kh?.findTestabilityInTree(this,e,o)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Mc=null;const A2=new tn("AllowMultipleToken"),wI=new tn("PlatformDestroyListeners");function S2(n,t,e=[]){const o=`Platform: ${t}`,d=new tn(o);return(f=[])=>{let b=OI();if(!b||b.injector.get(A2,!1)){const y=[...e,...f,{provide:d,useValue:!0}];n?n(y):function uO(n){if(Mc&&!Mc.get(A2,!1))throw new hn(400,!1);Mc=n;const t=n.get(dO);(function TI(n){const t=n.get(rO,null);t&&t.forEach(e=>e())})(n)}(function kA(n=[],t){return ka.create({name:t,providers:[{provide:Bf,useValue:"platform"},{provide:wI,useValue:new Set([()=>Mc=null])},...n]})}(y,o))}return function UB(n){const t=OI();if(!t)throw new hn(401,!1);return t}()}}function OI(){return Mc?.get(dO)??null}let dO=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,o){const d=function DI(n,t){let e;return e="noop"===n?new DA:("zone.js"===n?void 0:n)||new Qr(t),e}(o?.ngZone,function Vb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(o)),f=[{provide:Qr,useValue:d}];return d.run(()=>{const b=ka.create({providers:f,parent:this.injector,name:e.moduleType.name}),y=e.create(b),w=y.injector.get(Iu,null);if(!w)throw new hn(402,!1);return d.runOutsideAngular(()=>{const k=d.onError.subscribe({next:Q=>{w.handleError(Q)}});y.onDestroy(()=>{PA(this._modules,y),k.unsubscribe()})}),function kI(n,t,e){try{const o=e();return qv(o)?o.catch(d=>{throw t.runOutsideAngular(()=>n.handleError(d)),d}):o}catch(o){throw t.runOutsideAngular(()=>n.handleError(o)),o}}(w,d,()=>{const k=y.injector.get(Ao);return k.runInitializers(),k.donePromise.then(()=>(function Up(n){Ol(n,"Expected localeId to be defined"),"string"==typeof n&&(rm=n.toLowerCase().replace(/_/g,"-"))}(y.injector.get(Yl,Rc)||Rc),this._moduleDoBootstrap(y),y))})})}bootstrapModule(e,o=[]){const d=PI({},o);return function FB(n,t,e){const o=new RR(e);return Promise.resolve(o)}(0,0,e).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(e){const o=e.injector.get(s_);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(d=>o.bootstrap(d));else{if(!e.instance.ngDoBootstrap)throw new hn(403,!1);e.instance.ngDoBootstrap(o)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new hn(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const e=this._injector.get(wI,null);e&&(e.forEach(o=>o()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(qt(ka))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function PI(n,t){return Array.isArray(t)?t.reduce(PI,n):{...n,...t}}let s_=(()=>{class n{constructor(e,o,d){this._zone=e,this._injector=o,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new qe(y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{y.next(this._stable),y.complete()})}),b=new qe(y=>{let w;this._zone.runOutsideAngular(()=>{w=this._zone.onStable.subscribe(()=>{Qr.assertNotInAngularZone(),OA(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,y.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Qr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{y.next(!1)}))});return()=>{w.unsubscribe(),k.unsubscribe()}});this.isStable=bi(f,b.pipe(uT()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,o){const d=e instanceof t1;if(!this._injector.get(Ao).done)throw!d&&function lc(n){const t=Ni(n)||Bs(n)||uc(n);return null!==t&&t.standalone}(e),new hn(405,false);let b;b=d?e:this._injector.get(xh).resolveComponentFactory(e),this.componentTypes.push(b.componentType);const y=function y2(n){return n.isBoundToModule}(b)?void 0:this._injector.get(fA),k=b.create(ka.NULL,[],o||b.selector,y),Q=k.location.nativeElement,ie=k.injector.get(_2,null);return ie?.registerApplication(Q),k.onDestroy(()=>{this.detachView(k.hostView),PA(this.components,k),ie?.unregisterApplication(Q)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new hn(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const o=e;this._views.push(o),o.attachToAppRef(this)}detachView(e){const o=e;PA(this._views,o),o.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(iO,[]).concat(this._bootstrapListeners).forEach(d=>d(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>PA(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new hn(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(qt(Qr),qt(Nh),qt(Iu))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PA(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let Jl=(()=>{class n{}return n.__NG_ELEMENT_ID__=NA,n})();function NA(n){return function NI(n,t,e){if(mh(n)&&!e){const o=Zs(n.index,t);return new Kf(o,o)}return 47&n.type?new Kf(t[16],t):null}(Us(),vn(),16==(16&n))}class Gb{constructor(){}supports(t){return Yf(t)}create(t){return new GB(t)}}const c_=(n,t)=>t;class GB{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||c_}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,o=this._removalsHead,d=0,f=null;for(;e||o;){const b=!o||e&&e.currentIndex<R2(o,d,f)?e:o,y=R2(b,d,f),w=b.currentIndex;if(b===o)d--,o=o._nextRemoved;else if(e=e._next,null==b.previousIndex)d++;else{f||(f=[]);const k=y-d,Q=w-d;if(k!=Q){for(let Ie=0;Ie<k;Ie++){const ke=Ie<f.length?f[Ie]:f[Ie]=0,je=ke+Ie;Q<=je&&je<k&&(f[Ie]=ke+1)}f[b.previousIndex]=Q-k}}y!==w&&t(b,y,w)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Yf(t))throw new hn(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let d,f,b,e=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let y=0;y<this.length;y++)f=t[y],b=this._trackByFn(y,f),null!==e&&Object.is(e.trackById,b)?(o&&(e=this._verifyReinsertion(e,f,b,y)),Object.is(e.item,f)||this._addIdentityChange(e,f)):(e=this._mismatch(e,f,b,y),o=!0),e=e._next}else d=0,function G1(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[jd()]();let o;for(;!(o=e.next()).done;)t(o.value)}}(t,y=>{b=this._trackByFn(d,y),null!==e&&Object.is(e.trackById,b)?(o&&(e=this._verifyReinsertion(e,y,b,d)),Object.is(e.item,y)||this._addIdentityChange(e,y)):(e=this._mismatch(e,y,b,d),o=!0),e=e._next,d++}),this.length=d;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,o,d){let f;return null===t?f=this._itTail:(f=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,f,d)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,d))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,f,d)):t=this._addAfter(new T2(e,o),f,d),t}_verifyReinsertion(t,e,o,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?t=this._reinsertAfter(f,t._prev,d):t.currentIndex!=d&&(t.currentIndex=d,this._addToMoves(t,d)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const d=t._prevRemoved,f=t._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(t,e,o),this._addToMoves(t,o),t}_moveAfter(t,e,o){return this._unlink(t),this._insertAfter(t,e,o),this._addToMoves(t,o),t}_addAfter(t,e,o){return this._insertAfter(t,e,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,o){const d=null===e?this._itHead:e._next;return t._next=d,t._prev=e,null===d?this._itTail=t:d._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Wb),this._linkedRecords.put(t),t.currentIndex=o,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,o=t._next;return null===e?this._itHead=o:e._next=o,null===o?this._itTail=e:o._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wb),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class T2{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WB{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===e||e<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}remove(t){const e=t._prevDup,o=t._nextDup;return null===e?this._head=o:e._nextDup=o,null===o?this._tail=e:o._prevDup=e,null===this._head}}class Wb{constructor(){this.map=new Map}put(t){const e=t.trackById;let o=this.map.get(e);o||(o=new WB,this.map.set(e,o)),o.add(t)}get(t,e){const d=this.map.get(t);return d?d.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function R2(n,t,e){const o=n.previousIndex;if(null===o)return o;let d=0;return e&&o<e.length&&(d=e[o]),o+t+d}class vO{constructor(){}supports(t){return t instanceof Map||Pa(t)}create(){return new AO}}class AO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Pa(t)))throw new hn(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(o,d)=>{if(e&&e.key===d)this._maybeAddToChanges(e,o),this._appendAfter=e,e=e._next;else{const f=this._getOrCreateRecordForKey(d,o);e=this._insertBeforeOrAppend(e,f)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let o=e;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const o=t._prev;return e._next=t,e._prev=o,t._prev=e,o&&(o._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const d=this._records.get(t);this._maybeAddToChanges(d,e);const f=d._prev,b=d._next;return f&&(f._next=b),b&&(b._prev=f),d._next=null,d._prev=null,d}const o=new KB(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(o=>e(t[o],o))}}class KB{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function BA(){return new FA([new Gb])}let FA=(()=>{class n{constructor(e){this.factories=e}static create(e,o){if(null!=o){const d=o.factories.slice();e=e.concat(d)}return new n(e)}static extend(e){return{provide:n,useFactory:o=>n.create(e,o||BA()),deps:[[n,new Co,new Ac]]}}find(e){const o=this.factories.find(d=>d.supports(e));if(null!=o)return o;throw new hn(901,!1)}}return n.\u0275prov=kn({token:n,providedIn:"root",factory:BA}),n})();function UI(){return new UA([new vO])}let UA=(()=>{class n{constructor(e){this.factories=e}static create(e,o){if(o){const d=o.factories.slice();e=e.concat(d)}return new n(e)}static extend(e){return{provide:n,useFactory:o=>n.create(e,o||UI()),deps:[[n,new Co,new Ac]]}}find(e){const o=this.factories.find(d=>d.supports(e));if(o)return o;throw new hn(901,!1)}}return n.\u0275prov=kn({token:n,providedIn:"root",factory:UI}),n})();const zB=S2(null,"core",[]);let k2=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(qt(s_))},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({}),n})(),fl=null;function Xl(){return fl}class jI{}const Yr=new tn("DocumentToken");let yO=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kn({token:n,factory:function(){return function jA(){return qt(EO)}()},providedIn:"platform"}),n})(),EO=(()=>{class n extends yO{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xl().getBaseHref(this._doc)}onPopState(e){const o=Xl().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=Xl().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,d){bO()?this._history.pushState(e,o,d):this.location.hash=d}replaceState(e,o,d){bO()?this._history.replaceState(e,o,d):this.location.hash=d}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr))},n.\u0275prov=kn({token:n,factory:function(){return function ia(){return new EO(qt(Yr))}()},providedIn:"platform"}),n})();function bO(){return!!window.history.pushState}function _m(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function QI(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Zl(n){return n&&"?"!==n[0]?"?"+n:n}let Kb=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kn({token:n,factory:function(){return ac(zb)},providedIn:"root"}),n})();const $B=new tn("appBaseHref");let zb=(()=>{class n extends Kb{constructor(e,o){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??ac(Yr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return _m(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+Zl(this._platformLocation.search),d=this._platformLocation.hash;return d&&e?`${o}${d}`:o}pushState(e,o,d,f){const b=this.prepareExternalUrl(d+Zl(f));this._platformLocation.pushState(e,o,b)}replaceState(e,o,d,f){const b=this.prepareExternalUrl(d+Zl(f));this._platformLocation.replaceState(e,o,b)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(qt(yO),qt($B,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l_=(()=>{class n{constructor(e){this._subject=new Qi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const o=this._locationStrategy.getBaseHref();this._baseHref=QI(SO(o)),this._locationStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+Zl(o))}normalize(e){return n.stripTrailingSlash(function HI(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,SO(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,o="",d=null){this._locationStrategy.pushState(d,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Zl(o)),d)}replaceState(e,o="",d=null){this._locationStrategy.replaceState(d,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Zl(o)),d)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{const o=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(d=>d(e,o))}subscribe(e,o,d){return this._subject.subscribe({next:e,error:o,complete:d})}}return n.normalizeQueryParams=Zl,n.joinWithSlash=_m,n.stripTrailingSlash=QI,n.\u0275fac=function(e){return new(e||n)(qt(Kb))},n.\u0275prov=kn({token:n,factory:function(){return function M2(){return new l_(qt(Kb))}()},providedIn:"root"}),n})();function SO(n){return n.replace(/\/index.html$/,"")}function ew(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const o=e.indexOf("="),[d,f]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(d.trim()===t)return decodeURIComponent(f)}return null}let iS=(()=>{class n{constructor(e,o,d,f){this._iterableDiffers=e,this._keyValueDiffers=o,this._ngEl=d,this._renderer=f,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Yf(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachChangedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachRemovedItem(o=>{o.previousValue&&this._toggleClass(o.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(o=>{if("string"!=typeof o.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ko(o.item)}`);this._toggleClass(o.item,!0)}),e.forEachRemovedItem(o=>this._toggleClass(o.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!0)):Object.keys(e).forEach(o=>this._toggleClass(o,!!e[o])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!1)):Object.keys(e).forEach(o=>this._toggleClass(o,!1)))}_toggleClass(e,o){(e=e.trim())&&e.split(/\s+/g).forEach(d=>{o?this._renderer.addClass(this._ngEl.nativeElement,d):this._renderer.removeClass(this._ngEl.nativeElement,d)})}}return n.\u0275fac=function(e){return new(e||n)(vt(FA),vt(UA),vt(yi),vt(sl))},n.\u0275dir=Gn({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class KO{constructor(t,e,o,d){this.$implicit=t,this.ngForOf=e,this.index=o,this.count=d}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rw=(()=>{class n{constructor(e,o,d){this._viewContainer=e,this._template=o,this._differs=d,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const o=this._viewContainer;e.forEachOperation((d,f,b)=>{if(null==d.previousIndex)o.createEmbeddedView(this._template,new KO(d.item,this._ngForOf,-1,-1),null===b?void 0:b);else if(null==b)o.remove(null===f?void 0:f);else if(null!==f){const y=o.get(f);o.move(y,b),zO(y,d)}});for(let d=0,f=o.length;d<f;d++){const y=o.get(d).context;y.index=d,y.count=f,y.ngForOf=this._ngForOf}e.forEachIdentityChange(d=>{zO(o.get(d.currentIndex),d)})}static ngTemplateContextGuard(e,o){return!0}}return n.\u0275fac=function(e){return new(e||n)(vt(Oc),vt(pl),vt(FA))},n.\u0275dir=Gn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function zO(n,t){n.context.$implicit=t.item}let h_=(()=>{class n{constructor(e,o){this._viewContainer=e,this._context=new YO,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){XA("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){XA("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,o){return!0}}return n.\u0275fac=function(e){return new(e||n)(vt(Oc),vt(pl))},n.\u0275dir=Gn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class YO{constructor(){this.$implicit=null,this.ngIf=null}}function XA(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ko(t)}'.`)}class iw{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ZA=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const o=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||o,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),o}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let o=0;o<this._defaultViews.length;o++)this._defaultViews[o].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Gn({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),ey=(()=>{class n{constructor(e,o,d){this.ngSwitch=d,d._addCase(),this._view=new iw(e,o)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(vt(Oc),vt(pl),vt(ZA,9))},n.\u0275dir=Gn({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),qO=(()=>{class n{constructor(e,o,d){d._addDefault(new iw(e,o))}}return n.\u0275fac=function(e){return new(e||n)(vt(Oc),vt(pl),vt(ZA,9))},n.\u0275dir=Gn({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),ow=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const o=this._viewContainerRef;if(this._viewRef&&o.remove(o.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:d,ngTemplateOutletContext:f,ngTemplateOutletInjector:b}=this;this._viewRef=o.createEmbeddedView(d,f,b?{injector:b}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(vt(Oc))},n.\u0275dir=Gn({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Pl]}),n})(),Uo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({}),n})();const Ho="browser";class lw{}class vl extends jI{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class lu extends vl{static makeCurrent(){!function u_(n){fl||(fl=n)}(new lu)}onAndCancel(t,e,o){return t.addEventListener(e,o,!1),()=>{t.removeEventListener(e,o,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function s(){return y_=y_||document.querySelector("base"),y_?y_.getAttribute("href"):null}();return null==e?null:function u(n){l=l||document.createElement("a"),l.setAttribute("href",n);const t=l.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){y_=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ew(document.cookie,t)}}let l,y_=null;const h=new tn("TRANSITION_ID"),E=[{provide:Nb,useFactory:function v(n,t,e){return()=>{e.get(Ao).donePromise.then(()=>{const o=Xl(),d=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let f=0;f<d.length;f++)o.remove(d[f])})}},deps:[h,Yr,ka],multi:!0}];let R=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();const N=new tn("EventManagerPlugins");let L=(()=>{class n{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(d=>d.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,d){return this._findPluginFor(o).addEventListener(e,o,d)}addGlobalEventListener(e,o,d){return this._findPluginFor(o).addGlobalEventListener(e,o,d)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const d=this._plugins;for(let f=0;f<d.length;f++){const b=d[f];if(b.supports(e))return this._eventNameToPlugin.set(e,b),b}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(qt(N),qt(Qr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();class V{constructor(t){this._doc=t}addGlobalEventListener(t,e,o){const d=Xl().getGlobalEventTarget(this._doc,t);if(!d)throw new Error(`Unsupported event target ${d} for event ${e}`);return this.addEventListener(d,e,o)}}let O=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(d=>{this._stylesSet.has(d)||(this._stylesSet.add(d),o.add(d))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})(),X=(()=>{class n extends O{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,d){e.forEach(f=>{const b=this._doc.createElement("style");b.textContent=f,d.push(o.appendChild(b))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(ee),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,d)=>{this._addStylesToHost(e,d,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(ee))}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();function ee(n){Xl().remove(n)}const re={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ne=/%COMP%/g;function lt(n,t,e){for(let o=0;o<t.length;o++){let d=t[o];Array.isArray(d)?lt(n,d,e):(d=d.replace(ne,n),e.push(d))}return e}function tt(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Zt=(()=>{class n{constructor(e,o,d){this.eventManager=e,this.sharedStylesHost=o,this.appId=d,this.rendererByCompId=new Map,this.defaultRenderer=new ut(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case Ku.Emulated:{let d=this.rendererByCompId.get(o.id);return d||(d=new ct(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,d)),d.applyToHost(e),d}case 1:case Ku.ShadowDom:return new st(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const d=lt(o.id,o.styles,[]);this.sharedStylesHost.addStyles(d),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(qt(L),qt(X),qt(i_))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();class ut{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(re[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(He(t)?t.content:t).appendChild(e)}insertBefore(t,e,o){t&&(He(t)?t.content:t).insertBefore(e,o)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error(`The selector "${t}" did not match any elements`);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,d){if(d){e=d+":"+e;const f=re[d];f?t.setAttributeNS(f,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){const d=re[o];d?t.removeAttributeNS(d,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,d){d&(yc.DashCase|yc.Important)?t.style.setProperty(e,o,d&yc.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&yc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t[e]=o}setValue(t,e){t.nodeValue=e}listen(t,e,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tt(o)):this.eventManager.addEventListener(t,e,tt(o))}}function He(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ct extends ut{constructor(t,e,o,d){super(t),this.component=o;const f=lt(d+"-"+o.id,o.styles,[]);e.addStyles(f),this.contentAttr=function ze(n){return"_ngcontent-%COMP%".replace(ne,n)}(d+"-"+o.id),this.hostAttr=function ft(n){return"_nghost-%COMP%".replace(ne,n)}(d+"-"+o.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}}class st extends ut{constructor(t,e,o,d){super(t),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=lt(d.id,d.styles,[]);for(let b=0;b<f.length;b++){const y=document.createElement("style");y.textContent=f[b],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ne=(()=>{class n extends V{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,d){return e.addEventListener(o,d,!1),()=>this.removeEventListener(e,o,d)}removeEventListener(e,o,d){return e.removeEventListener(o,d)}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();const Jt=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let mr=(()=>{class n extends V{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,o,d){const f=n.parseEventName(o),b=n.eventCallback(f.fullKey,d,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xl().onAndCancel(e,f.domEventName,b))}static parseEventName(e){const o=e.toLowerCase().split("."),d=o.shift();if(0===o.length||"keydown"!==d&&"keyup"!==d)return null;const f=n._normalizeKey(o.pop());let b="",y=o.indexOf("code");if(y>-1&&(o.splice(y,1),b="code."),Jt.forEach(k=>{const Q=o.indexOf(k);Q>-1&&(o.splice(Q,1),b+=k+".")}),b+=f,0!=o.length||0===f.length)return null;const w={};return w.domEventName=d,w.fullKey=b,w}static matchEventFullKeyCode(e,o){let d=Ft[e.key]||e.key,f="";return o.indexOf("code.")>-1&&(d=e.code,f="code."),!(null==d||!d)&&(d=d.toLowerCase()," "===d?d="space":"."===d&&(d="dot"),Jt.forEach(b=>{b!==d&&(0,yn[b])(e)&&(f+=b+".")}),f+=d,f===o)}static eventCallback(e,o,d){return f=>{n.matchEventFullKeyCode(f,e)&&d.runGuarded(()=>o(f))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();const It=S2(zB,"browser",[{provide:Lb,useValue:Ho},{provide:rO,useValue:function $r(){lu.makeCurrent()},multi:!0},{provide:Yr,useFactory:function co(){return function bP(n){Fl=n}(document),document},deps:[]}]),et=new tn(""),$t=[{provide:Ub,useClass:class I{addToWindow(t){Po.getAngularTestability=(o,d=!0)=>{const f=t.findTestabilityInTree(o,d);if(null==f)throw new Error("Could not find testability for element.");return f},Po.getAllAngularTestabilities=()=>t.getAllTestabilities(),Po.getAllAngularRootElements=()=>t.getAllRootElements(),Po.frameworkStabilizers||(Po.frameworkStabilizers=[]),Po.frameworkStabilizers.push(o=>{const d=Po.getAllAngularTestabilities();let f=d.length,b=!1;const y=function(w){b=b||w,f--,0==f&&o(b)};d.forEach(function(w){w.whenStable(y)})})}findTestabilityInTree(t,e,o){return null==e?null:t.getTestability(e)??(o?Xl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:_2,useClass:tp,deps:[Qr,Kp,Ub]},{provide:tp,useClass:tp,deps:[Qr,Kp,Ub]}],Cn=[{provide:Bf,useValue:"root"},{provide:Iu,useFactory:function eo(){return new Iu},deps:[]},{provide:N,useClass:Ne,multi:!0,deps:[Yr,Qr,Lb]},{provide:N,useClass:mr,multi:!0,deps:[Yr]},{provide:Zt,useClass:Zt,deps:[L,X,i_]},{provide:Uf,useExisting:Zt},{provide:O,useExisting:X},{provide:X,useClass:X,deps:[Yr]},{provide:L,useClass:L,deps:[N,Qr]},{provide:lw,useClass:R,deps:[]},[]];let Ln=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:i_,useValue:e.appId},{provide:h,useExisting:i_},E]}}}return n.\u0275fac=function(e){return new(e||n)(qt(et,12))},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({providers:[...Cn,...$t],imports:[Uo,k2]}),n})();typeof window<"u"&&window;let gF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kn({token:n,factory:function(e){let o=null;return o=e?new(e||n):qt(A4),o},providedIn:"root"}),n})(),A4=(()=>{class n extends gF{constructor(e){super(),this._doc=e}sanitize(e,o){if(null==o)return null;switch(e){case wi.NONE:return o;case wi.HTML:return Eu(o,"HTML")?Ds(o):CE(this._doc,String(o)).toString();case wi.STYLE:return Eu(o,"Style")?Ds(o):o;case wi.SCRIPT:if(Eu(o,"Script"))return Ds(o);throw new Error("unsafe value used in a script context");case wi.URL:return Eu(o,"URL")?Ds(o):Jr(String(o));case wi.RESOURCE_URL:if(Eu(o,"ResourceURL"))return Ds(o);throw new Error(`unsafe value used in a resource URL context (see ${ky})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${ky})`)}}bypassSecurityTrustHtml(e){return function wP(n){return new SP(n)}(e)}bypassSecurityTrustStyle(e){return function zT(n){return new CP(n)}(e)}bypassSecurityTrustScript(e){return function ks(n){return new Q0(n)}(e)}bypassSecurityTrustUrl(e){return function TP(n){return new IP(n)}(e)}bypassSecurityTrustResourceUrl(e){return function YT(n){return new KT(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr))},n.\u0275prov=kn({token:n,factory:function(e){let o=null;return o=e?new e:function v4(n){return new A4(n.get(Yr))}(qt(ka)),o},providedIn:"root"}),n})();const{isArray:gQ}=Array,{getPrototypeOf:y4,prototype:_F,keys:_Q}=Object;function E4(n){if(1===n.length){const t=n[0];if(gQ(t))return{args:t,keys:null};if(function b4(n){return n&&"object"==typeof n&&y4(n)===_F}(t)){const e=_Q(t);return{args:e.map(o=>t[o]),keys:e}}}return{args:n,keys:null}}const{isArray:vQ}=Array;function nN(n){return Xe(t=>function S4(n,t){return vQ(t)?n(...t):n(t)}(n,t))}function E_(n,t){return n.reduce((e,o,d)=>(e[o]=t[d],e),{})}function vF(...n){const t=HS(n),{args:e,keys:o}=E4(n),d=new qe(f=>{const{length:b}=e;if(!b)return void f.complete();const y=new Array(b);let w=b,k=b;for(let Q=0;Q<b;Q++){let ie=!1;dn(e[Q]).subscribe(new Re(f,Ie=>{ie||(ie=!0,k--),y[Q]=Ie},()=>w--,void 0,()=>{(!w||!ie)&&(k||f.next(o?E_(o,y):y),f.complete())}))}});return t?d.pipe(nN(t)):d}let C4=(()=>{class n{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=d=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(vt(sl),vt(yi))},n.\u0275dir=Gn({type:n}),n})(),gS=(()=>{class n extends C4{}return n.\u0275fac=function(){let t;return function(o){return(t||(t=ss(n)))(o||n)}}(),n.\u0275dir=Gn({type:n,features:[yr]}),n})();const Em=new tn("NgValueAccessor"),yQ={provide:Em,useExisting:_i(()=>mw),multi:!0},bQ=new tn("CompositionEventMode");let mw=(()=>{class n extends C4{constructor(e,o,d){super(e,o),this._compositionMode=d,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function EQ(){const n=Xl()?Xl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(vt(sl),vt(yi),vt(bQ,8))},n.\u0275dir=Gn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&zi("input",function(f){return o._handleInput(f.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(f){return o._compositionEnd(f.target.value)})},features:[ho([yQ]),yr]}),n})();function Xh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function va(n){return null!=n&&"number"==typeof n.length}const Lr=new tn("NgValidators"),bm=new tn("NgAsyncValidators"),Lc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class gw{static min(t){return function rN(n){return t=>{if(Xh(t.value)||Xh(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function iN(n){return t=>{if(Xh(t.value)||Xh(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function to(n){return Xh(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function EF(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function I4(n){return Xh(n.value)||Lc.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function w4(n){return t=>Xh(t.value)||!va(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function bF(n){return t=>va(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Ui(n){if(!n)return aa;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),o=>{if(Xh(o.value))return null;const d=o.value;return t.test(d)?null:{pattern:{requiredPattern:e,actualValue:d}}}}(t)}static nullValidator(t){return null}static compose(t){return sN(t)}static composeAsync(t){return zn(t)}}function aa(n){return null}function oN(n){return null!=n}function T4(n){return qv(n)?Bm(n):n}function R4(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Aa(n,t){return t.map(e=>e(n))}function SF(n){return n.map(t=>function wo(n){return!n.validate}(t)?t:e=>t.validate(e))}function sN(n){if(!n)return null;const t=n.filter(oN);return 0==t.length?null:function(e){return R4(Aa(e,t))}}function Xn(n){return null!=n?sN(SF(n)):null}function zn(n){if(!n)return null;const t=n.filter(oN);return 0==t.length?null:function(e){return vF(Aa(e,t).map(T4)).pipe(Xe(R4))}}function b_(n){return null!=n?zn(SF(n)):null}function Sm(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function _S(n){return n._rawValidators}function _w(n){return n._rawAsyncValidators}function Lu(n){return n?Array.isArray(n)?n:[n]:[]}function Hs(n,t){return Array.isArray(n)?n.includes(t):n===t}function or(n,t){const e=Lu(t);return Lu(n).forEach(d=>{Hs(e,d)||e.push(d)}),e}function aN(n,t){return Lu(t).filter(e=>!Hs(n,e))}class Gs{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Xn(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=b_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ar extends Gs{get formDirective(){return null}get path(){return null}}class gs extends Gs{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ws{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let du=(()=>{class n extends Ws{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(vt(gs,2))},n.\u0275dir=Gn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&ps("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[yr]}),n})(),Di=(()=>{class n extends Ws{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(vt(ar,10))},n.\u0275dir=Gn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,o){2&e&&ps("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[yr]}),n})();const pD="VALID",uN="INVALID",pu="PENDING",Cm="DISABLED";function bo(n){return(Va(n)?n.validators:n)||null}function Ua(n,t){return(Va(t)?t.asyncValidators:n)||null}function Va(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class _s{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===pD}get invalid(){return this.status===uN}get pending(){return this.status==pu}get disabled(){return this.status===Cm}get enabled(){return this.status!==Cm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(or(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(or(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(aN(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(aN(t,this._rawAsyncValidators))}hasValidator(t){return Hs(this._rawValidators,t)}hasAsyncValidator(t){return Hs(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=pu,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Cm,this.errors=null,this._forEachChild(o=>{o.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=pD,this._forEachChild(o=>{o.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pD||this.status===pu)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cm:pD}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=pu,this._hasOwnPendingAsyncValidator=!0;const e=T4(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((o,d)=>o&&o._find(d),this)}getError(t,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Qi,this.statusChanges=new Qi}_calculateStatus(){return this._allControlsDisabled()?Cm:this.errors?uN:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pu)?pu:this._anyControlsHaveStatus(uN)?uN:pD}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Va(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function P4(n){return Array.isArray(n)?Xn(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Zh(n){return Array.isArray(n)?b_(n):n||null}(this._rawAsyncValidators)}}class To extends _s{constructor(t,e,o){super(bo(e),Ua(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function Zo(n,t,e){n._forEachChild((o,d)=>{if(void 0===e[d])throw new hn(1002,"")})})(this,0,t),Object.keys(t).forEach(o=>{(function S_(n,t,e){const o=n.controls;if(!(t?Object.keys(o):o).length)throw new hn(1e3,"");if(!o[e])throw new hn(1001,"")})(this,!0,o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(o=>{const d=this.controls[o];d&&d.patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,d)=>{o.reset(t[d],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>!!o._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,o]of Object.entries(this.controls))if(this.contains(e)&&t(o))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,o,d)=>((o.enabled||this.disabled)&&(e[d]=o.value),e))}_reduceChildren(t,e){let o=t;return this._forEachChild((d,f)=>{o=e(o,d,f)}),o}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const nr=To,op=new tn("CallSetDisabledState",{providedIn:"root",factory:()=>C_}),C_="always";function vw(n,t,e=C_){fD(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function N4(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Rn(n,t)})}(n,t),function ad(n,t){const e=(o,d)=>{t.valueAccessor.writeValue(o),d&&t.viewToModelUpdate(o)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Wr(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Rn(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Ks(n,t){if(t.valueAccessor.setDisabledState){const e=o=>{t.valueAccessor.setDisabledState(o)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function hD(n,t,e=!0){const o=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(o),t.valueAccessor.registerOnTouched(o)),hy(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function lN(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function fD(n,t){const e=_S(n);null!==t.validator?n.setValidators(Sm(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const o=_w(n);null!==t.asyncValidator?n.setAsyncValidators(Sm(o,t.asyncValidator)):"function"==typeof o&&n.setAsyncValidators([o]);const d=()=>n.updateValueAndValidity();lN(t._rawValidators,d),lN(t._rawAsyncValidators,d)}function hy(n,t){let e=!1;if(null!==n){if(null!==t.validator){const d=_S(n);if(Array.isArray(d)&&d.length>0){const f=d.filter(b=>b!==t.validator);f.length!==d.length&&(e=!0,n.setValidators(f))}}if(null!==t.asyncValidator){const d=_w(n);if(Array.isArray(d)&&d.length>0){const f=d.filter(b=>b!==t.asyncValidator);f.length!==d.length&&(e=!0,n.setAsyncValidators(f))}}}const o=()=>{};return lN(t._rawValidators,o),lN(t._rawAsyncValidators,o),e}function Rn(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function di(n,t){fD(n,t)}function Wo(n,t){n._syncPendingControls(),t.forEach(e=>{const o=e.control;"submit"===o.updateOn&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}const OQ={provide:ar,useExisting:_i(()=>gD)},mD=(()=>Promise.resolve())();let gD=(()=>{class n extends ar{constructor(e,o,d){super(),this.callSetDisabledState=d,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Qi,this.form=new To({},Xn(e),b_(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){mD.then(()=>{const o=this._findContainer(e.path);e.control=o.registerControl(e.name,e.control),vw(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){mD.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){mD.then(()=>{const o=this._findContainer(e.path),d=new To({});di(d,e),o.registerControl(e.name,d),d.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){mD.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,o){mD.then(()=>{this.form.get(e.path).setValue(o)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Wo(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(vt(Lr,10),vt(bm,10),vt(op,8))},n.\u0275dir=Gn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,o){1&e&&zi("submit",function(f){return o.onSubmit(f)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ho([OQ]),yr]}),n})();function OF(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function L4(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const DF=class extends _s{constructor(t=null,e,o){super(bo(e),Ua(o,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Va(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=L4(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){OF(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){OF(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){L4(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},ap=DF;let V4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Gn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),_D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({}),n})();const pN=new tn("NgModelWithFormControlWarning"),fN={provide:ar,useExisting:_i(()=>yw)};let yw=(()=>{class n extends ar{constructor(e,o,d){super(),this.callSetDisabledState=d,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Qi,this._setValidators(e),this._setAsyncValidators(o)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const o=this.form.get(e.path);return vw(o,e,this.callSetDisabledState),o.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),o}getControl(e){return this.form.get(e.path)}removeControl(e){hD(e.control||null,e,!1),function Uc(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,o){this.form.get(e.path).setValue(o)}onSubmit(e){return this.submitted=!0,Wo(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const o=e.control,d=this.form.get(e.path);o!==d&&(hD(o||null,e),(n=>n instanceof DF)(d)&&(vw(d,e,this.callSetDisabledState),e.control=d))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const o=this.form.get(e.path);di(o,e),o.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const o=this.form.get(e.path);o&&function Bu(n,t){return hy(n,t)}(o,e)&&o.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fD(this.form,this),this._oldForm&&hy(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(vt(Lr,10),vt(bm,10),vt(op,8))},n.\u0275dir=Gn({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,o){1&e&&zi("submit",function(f){return o.onSubmit(f)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ho([fN]),yr,Pl]}),n})();const UQ={provide:gs,useExisting:_i(()=>LF)};let LF=(()=>{class n extends gs{constructor(e,o,d,f,b){super(),this._ngModelWarningConfig=b,this._added=!1,this.update=new Qi,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(o),this._setAsyncValidators(d),this.valueAccessor=function nc(n,t){if(!t)return null;let e,o,d;return Array.isArray(t),t.forEach(f=>{f.constructor===mw?e=f:function yl(n){return Object.getPrototypeOf(n.constructor)===gS}(f)?o=f:d=f}),d||o||e||null}(0,f)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function Fu(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function ni(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(vt(ar,13),vt(Lr,10),vt(bm,10),vt(Em,10),vt(pN,8))},n.\u0275dir=Gn({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[ho([UQ]),yr,Pl]}),n})(),GF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[_D]}),n})(),$4=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:op,useValue:e.callSetDisabledState??C_}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[GF]}),n})(),vN=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:pN,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:op,useValue:e.callSetDisabledState??C_}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[GF]}),n})();var YQ=Y(1648),KF=Y.n(YQ),zF=Y(3890),Sw=Y.n(zF),ej=Y(6021);let YF;try{YF=typeof Intl<"u"&&Intl.v8BreakIterator}catch{YF=!1}let tf,Vc=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function J2(n){return n===Ho}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!YF)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(qt(Lb))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({}),n})();const AD=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function nf(){if(tf)return tf;if("object"!=typeof document||!document)return tf=new Set(AD),tf;let n=document.createElement("input");return tf=new Set(AD.filter(t=>(n.setAttribute("type",t),n.type===t))),tf}let yD,w_,JF;function rc(n){return function qF(){if(null==yD&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>yD=!0}))}finally{yD=yD||!1}return yD}()?n:!!n.capture}function ES(){if(null==w_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return w_=!1,w_;if("scrollBehavior"in document.documentElement.style)w_=!0;else{const n=Element.prototype.scrollTo;w_=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return w_}function bS(n){return n.composedPath?n.composedPath()[0]:n.target}function bD(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function bl(...n){return Bm(n,hf(n))}function rf(n,t){return Ge((e,o)=>{let d=0;e.subscribe(new Re(o,f=>n.call(t,f,d++)&&o.next(f)))})}class SS{}class SD{}class Im{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const o=e.indexOf(":");if(o>0){const d=e.slice(0,o),f=d.toLowerCase(),b=e.slice(o+1).trim();this.maybeSetNormalizedName(d,f),this.headers.has(f)?this.headers.get(f).push(b):this.headers.set(f,[b])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let o=t[e];const d=e.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(d,o),this.maybeSetNormalizedName(e,d))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Im?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Im;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Im?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(t.name,e);const d=("a"===t.op?this.headers.get(e):void 0)||[];d.push(...o),this.headers.set(e,d);break;case"d":const f=t.value;if(f){let b=this.headers.get(e);if(!b)return;b=b.filter(y=>-1===f.indexOf(y)),0===b.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,b)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class wm{encodeKey(t){return e3(t)}encodeValue(t){return e3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const $Q=/%(\d[a-f0-9])/gi,ZF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function e3(n){return encodeURIComponent(n).replace($Q,(t,e)=>ZF[e]??t)}function Cw(n){return`${n}`}class Tm{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new wm,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function sf(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(d=>{const f=d.indexOf("="),[b,y]=-1==f?[t.decodeKey(d),""]:[t.decodeKey(d.slice(0,f)),t.decodeValue(d.slice(f+1))],w=e.get(b)||[];w.push(y),e.set(b,w)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const o=t.fromObject[e],d=Array.isArray(o)?o.map(Cw):[Cw(o)];this.map.set(e,d)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(o=>{const d=t[o];Array.isArray(d)?d.forEach(f=>{e.push({param:o,value:f,op:"a"})}):e.push({param:o,value:d,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Tm({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Cw(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let o=this.map.get(t.param)||[];const d=o.indexOf(Cw(t.value));-1!==d&&o.splice(d,1),o.length>0?this.map.set(t.param,o):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class nj{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function AN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function t3(n){return typeof Blob<"u"&&n instanceof Blob}function my(n){return typeof FormData<"u"&&n instanceof FormData}class CS{constructor(t,e,o,d){let f;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function T_(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||d?(this.body=void 0!==o?o:null,f=d):f=o,f&&(this.reportProgress=!!f.reportProgress,this.withCredentials=!!f.withCredentials,f.responseType&&(this.responseType=f.responseType),f.headers&&(this.headers=f.headers),f.context&&(this.context=f.context),f.params&&(this.params=f.params)),this.headers||(this.headers=new Im),this.context||(this.context=new nj),this.params){const b=this.params.toString();if(0===b.length)this.urlWithParams=e;else{const y=e.indexOf("?");this.urlWithParams=e+(-1===y?"?":y<e.length-1?"&":"")+b}}else this.params=new Tm,this.urlWithParams=e}serializeBody(){return null===this.body?null:AN(this.body)||t3(this.body)||my(this.body)||function rj(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Tm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||my(this.body)?null:t3(this.body)?this.body.type||null:AN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Tm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,o=t.url||this.url,d=t.responseType||this.responseType,f=void 0!==t.body?t.body:this.body,b=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,y=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let w=t.headers||this.headers,k=t.params||this.params;const Q=t.context??this.context;return void 0!==t.setHeaders&&(w=Object.keys(t.setHeaders).reduce((ie,Ie)=>ie.set(Ie,t.setHeaders[Ie]),w)),t.setParams&&(k=Object.keys(t.setParams).reduce((ie,Ie)=>ie.set(Ie,t.setParams[Ie]),k)),new CS(e,o,f,{params:k,headers:w,context:Q,reportProgress:y,responseType:d,withCredentials:b})}}var ja=(()=>((ja=ja||{})[ja.Sent=0]="Sent",ja[ja.UploadProgress=1]="UploadProgress",ja[ja.ResponseHeader=2]="ResponseHeader",ja[ja.DownloadProgress=3]="DownloadProgress",ja[ja.Response=4]="Response",ja[ja.User=5]="User",ja))();class n3{constructor(t,e=200,o="OK"){this.headers=t.headers||new Im,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class r3 extends n3{constructor(t={}){super(t),this.type=ja.ResponseHeader}clone(t={}){return new r3({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Rm extends n3{constructor(t={}){super(t),this.type=ja.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Rm({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ij extends n3{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function o3(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let yN=(()=>{class n{constructor(e){this.handler=e}request(e,o,d={}){let f;if(e instanceof CS)f=e;else{let w,k;w=d.headers instanceof Im?d.headers:new Im(d.headers),d.params&&(k=d.params instanceof Tm?d.params:new Tm({fromObject:d.params})),f=new CS(e,o,void 0!==d.body?d.body:null,{headers:w,context:d.context,params:k,reportProgress:d.reportProgress,responseType:d.responseType||"json",withCredentials:d.withCredentials})}const b=bl(f).pipe(function qQ(n,t){return U(t)?_u(n,t,1):_u(n,1)}(w=>this.handler.handle(w)));if(e instanceof CS||"events"===d.observe)return b;const y=b.pipe(rf(w=>w instanceof Rm));switch(d.observe||"body"){case"body":switch(f.responseType){case"arraybuffer":return y.pipe(Xe(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return y.pipe(Xe(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return y.pipe(Xe(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return y.pipe(Xe(w=>w.body))}case"response":return y;default:throw new Error(`Unreachable: unhandled observe type ${d.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:(new Tm).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,d={}){return this.request("PATCH",e,o3(d,o))}post(e,o,d={}){return this.request("POST",e,o3(d,o))}put(e,o,d={}){return this.request("PUT",e,o3(d,o))}}return n.\u0275fac=function(e){return new(e||n)(qt(SS))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();function oj(n,t){return t(n)}function XQ(n,t){return(e,o)=>t.intercept(e,{handle:d=>n(d,o)})}const e7=new tn("HTTP_INTERCEPTORS"),CD=new tn("HTTP_INTERCEPTOR_FNS");function sj(){let n=null;return(t,e)=>(null===n&&(n=(ac(e7,{optional:!0})??[]).reduceRight(XQ,oj)),n(t,e))}let aj=(()=>{class n extends SS{constructor(e,o){super(),this.backend=e,this.injector=o,this.chain=null}handle(e){if(null===this.chain){const o=Array.from(new Set(this.injector.get(CD)));this.chain=o.reduceRight((d,f)=>function ZQ(n,t,e){return(o,d)=>e.runInContext(()=>t(o,f=>n(f,d)))}(d,f,this.injector),oj)}return this.chain(e,o=>this.backend.handle(o))}}return n.\u0275fac=function(e){return new(e||n)(qt(SD),qt(Nh))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();const o7=/^\)\]\}',?\n/;let uj=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new qe(o=>{const d=this.xhrFactory.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((ke,je)=>d.setRequestHeader(ke,je.join(","))),e.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const ke=e.detectContentTypeHeader();null!==ke&&d.setRequestHeader("Content-Type",ke)}if(e.responseType){const ke=e.responseType.toLowerCase();d.responseType="json"!==ke?ke:"text"}const f=e.serializeBody();let b=null;const y=()=>{if(null!==b)return b;const ke=d.statusText||"OK",je=new Im(d.getAllResponseHeaders()),at=function s7(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(d)||e.url;return b=new r3({headers:je,status:d.status,statusText:ke,url:at}),b},w=()=>{let{headers:ke,status:je,statusText:at,url:Vt}=y(),Qt=null;204!==je&&(Qt=typeof d.response>"u"?d.responseText:d.response),0===je&&(je=Qt?200:0);let rn=je>=200&&je<300;if("json"===e.responseType&&"string"==typeof Qt){const Ut=Qt;Qt=Qt.replace(o7,"");try{Qt=""!==Qt?JSON.parse(Qt):null}catch(Bn){Qt=Ut,rn&&(rn=!1,Qt={error:Bn,text:Qt})}}rn?(o.next(new Rm({body:Qt,headers:ke,status:je,statusText:at,url:Vt||void 0})),o.complete()):o.error(new ij({error:Qt,headers:ke,status:je,statusText:at,url:Vt||void 0}))},k=ke=>{const{url:je}=y(),at=new ij({error:ke,status:d.status||0,statusText:d.statusText||"Unknown Error",url:je||void 0});o.error(at)};let Q=!1;const ie=ke=>{Q||(o.next(y()),Q=!0);let je={type:ja.DownloadProgress,loaded:ke.loaded};ke.lengthComputable&&(je.total=ke.total),"text"===e.responseType&&!!d.responseText&&(je.partialText=d.responseText),o.next(je)},Ie=ke=>{let je={type:ja.UploadProgress,loaded:ke.loaded};ke.lengthComputable&&(je.total=ke.total),o.next(je)};return d.addEventListener("load",w),d.addEventListener("error",k),d.addEventListener("timeout",k),d.addEventListener("abort",k),e.reportProgress&&(d.addEventListener("progress",ie),null!==f&&d.upload&&d.upload.addEventListener("progress",Ie)),d.send(f),o.next({type:ja.Sent}),()=>{d.removeEventListener("error",k),d.removeEventListener("abort",k),d.removeEventListener("load",w),d.removeEventListener("timeout",k),e.reportProgress&&(d.removeEventListener("progress",ie),null!==f&&d.upload&&d.upload.removeEventListener("progress",Ie)),d.readyState!==d.DONE&&d.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(qt(lw))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();const EN=new tn("XSRF_ENABLED"),lj="XSRF-TOKEN",dj=new tn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>lj}),pj="X-XSRF-TOKEN",hj=new tn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>pj});class fj{}let a7=(()=>{class n{constructor(e,o,d){this.doc=e,this.platform=o,this.cookieName=d,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ew(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr),qt(Lb),qt(dj))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();function mj(n,t){const e=n.url.toLowerCase();if(!ac(EN)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const o=ac(fj).getToken(),d=ac(hj);return null!=o&&!n.headers.has(d)&&(n=n.clone({headers:n.headers.set(d,o)})),t(n)}var ya=(()=>((ya=ya||{})[ya.Interceptors=0]="Interceptors",ya[ya.LegacyInterceptors=1]="LegacyInterceptors",ya[ya.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ya[ya.NoXsrfProtection=3]="NoXsrfProtection",ya[ya.JsonpSupport=4]="JsonpSupport",ya[ya.RequestsMadeViaParent=5]="RequestsMadeViaParent",ya))();function wS(n,t){return{\u0275kind:n,\u0275providers:t}}function gj(...n){const t=[yN,uj,aj,{provide:SS,useExisting:aj},{provide:SD,useExisting:uj},{provide:CD,useValue:mj,multi:!0},{provide:EN,useValue:!0},{provide:fj,useClass:a7}];for(const e of n)t.push(...e.\u0275providers);return function VL(n){return{\u0275providers:n}}(t)}const _j=new tn("LEGACY_INTERCEPTOR_FN");function TS({cookieName:n,headerName:t}){const e=[];return void 0!==n&&e.push({provide:dj,useValue:n}),void 0!==t&&e.push({provide:hj,useValue:t}),wS(ya.CustomXsrfConfiguration,e)}let p7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({providers:[gj(wS(ya.LegacyInterceptors,[{provide:_j,useFactory:sj},{provide:CD,useExisting:_j,multi:!0}]),TS({cookieName:lj,headerName:pj}))]}),n})();class s3 extends yt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:o}=this;if(t)throw e;return this._throwIfClosed(),o}next(t){super.next(this._value=t)}}function ww(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function MN(n,t,e){const o=U(n)||t||e?{next:n,error:t,complete:e}:n;return o?Ge((d,f)=>{var b;null===(b=o.subscribe)||void 0===b||b.call(o);let y=!0;d.subscribe(new Re(f,w=>{var k;null===(k=o.next)||void 0===k||k.call(o,w),f.next(w)},()=>{var w;y=!1,null===(w=o.complete)||void 0===w||w.call(o),f.complete()},w=>{var k;y=!1,null===(k=o.error)||void 0===k||k.call(o,w),f.error(w)},()=>{var w,k;y&&(null===(w=o.unsubscribe)||void 0===w||w.call(o)),null===(k=o.finalize)||void 0===k||k.call(o)}))}):Fe}class z7 extends j{constructor(t,e){super()}schedule(t,e=0){return this}}const NN={setInterval(...n){const{delegate:t}=NN;return(t?.setInterval||setInterval)(...n)},clearInterval(n){const{delegate:t}=NN;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class d3 extends z7{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const o=this.id,d=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(d,o,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(d,this.id,e),this}requestAsyncId(t,e,o=0){return NN.setInterval(t.flush.bind(t,this),o)}recycleAsyncId(t,e,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return e;NN.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(t,e);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let d,o=!1;try{this.work(t)}catch(f){o=!0,d=f||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),d}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:o}=e;this.work=this.state=this.scheduler=null,this.pending=!1,H(o,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const p3={now:()=>(p3.delegate||Date).now(),delegate:void 0};class TD{constructor(t,e=TD.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,o){return new this.schedulerActionCtor(this,t).schedule(o,e)}}TD.now=p3.now;class h3 extends TD{constructor(t,e=TD.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let o;this._active=!0;do{if(o=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,o){for(;t=e.shift();)t.unsubscribe();throw o}}}const f3=new h3(d3),xN=f3;function m3(n,t=f3){return Ge((e,o)=>{let d=null,f=null,b=null;const y=()=>{if(d){d.unsubscribe(),d=null;const k=f;f=null,o.next(k)}};function w(){const k=b+n,Q=t.now();if(Q<k)return d=this.schedule(void 0,k-Q),void o.add(d);y()}e.subscribe(new Re(o,k=>{f=k,b=t.now(),d||(d=t.schedule(w,n),o.add(d))},()=>{y(),o.complete()},void 0,()=>{f=d=null}))})}function Nj(n){return rf((t,e)=>n<=e)}function xj(n,t=Fe){return n=n??Y7,Ge((e,o)=>{let d,f=!0;e.subscribe(new Re(o,b=>{const y=t(b);(f||!n(d,y))&&(f=!1,d=y,o.next(b))}))})}function Y7(n,t){return n===t}function hu(n){return Ge((t,e)=>{dn(n).subscribe(new Re(e,()=>e.complete(),ue)),!e.closed&&t.subscribe(e)})}function ca(n){return null!=n&&"false"!=`${n}`}function R_(n,t=0){return function Lj(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function LN(n){return Array.isArray(n)?n:[n]}function Qa(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Om(n){return n instanceof yi?n.nativeElement:n}let Bj=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),q7=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,o)=>this._cleanupObserver(o))}observe(e){const o=Om(e);return new qe(d=>{const b=this._observeElement(o).subscribe(d);return()=>{b.unsubscribe(),this._unobserveElement(o)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const o=new yt,d=this._mutationObserverFactory.create(f=>o.next(f));d&&d.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:d,stream:o,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:o,stream:d}=this._observedElements.get(e);o&&o.disconnect(),d.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(qt(Bj))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J7=(()=>{class n{constructor(e,o,d){this._contentObserver=e,this._elementRef=o,this._ngZone=d,this.event=new Qi,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=ca(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=R_(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(m3(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(vt(q7),vt(yi),vt(Qr))},n.\u0275dir=Gn({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Fj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({providers:[Bj]}),n})();function BN(n,t,e){n?En(e,n,t):t()}function FN(...n){return function Z7(){return Tl(1)}()(Bm(n,hf(n)))}function Tw(...n){const t=hf(n);return Ge((e,o)=>{(t?FN(n,e,t):FN(n,e)).subscribe(o)})}const UN=new Set;let Rw,Kn=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):t9}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function e9(n){if(!UN.has(n))try{Rw||(Rw=document.createElement("style"),Rw.setAttribute("type","text/css"),document.head.appendChild(Rw)),Rw.sheet&&(Rw.sheet.insertRule(`@media ${n} {body{ }}`,0),UN.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(qt(Vc))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function t9(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let g3=(()=>{class n{constructor(e,o){this._mediaMatcher=e,this._zone=o,this._queries=new Map,this._destroySubject=new yt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Uj(LN(e)).some(d=>this._registerQuery(d).mql.matches)}observe(e){let f=function $7(...n){const t=hf(n),e=HS(n),{args:o,keys:d}=E4(n);if(0===o.length)return Bm([],t);const f=new qe(function X7(n,t,e=Fe){return o=>{BN(t,()=>{const{length:d}=n,f=new Array(d);let b=d,y=d;for(let w=0;w<d;w++)BN(t,()=>{const k=Bm(n[w],t);let Q=!1;k.subscribe(new Re(o,ie=>{f[w]=ie,Q||(Q=!0,y--),y||o.next(e(f.slice()))},()=>{--b||o.complete()}))},o)},o)}}(o,t,d?b=>E_(d,b):Fe));return e?f.pipe(nN(e)):f}(Uj(LN(e)).map(b=>this._registerQuery(b).observable));return f=FN(f.pipe(Rl(1)),f.pipe(Nj(1),m3(0))),f.pipe(Xe(b=>{const y={matches:!1,breakpoints:{}};return b.forEach(({matches:w,query:k})=>{y.matches=y.matches||w,y.breakpoints[k]=w}),y}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const o=this._mediaMatcher.matchMedia(e),f={observable:new qe(b=>{const y=w=>this._zone.run(()=>b.next(w));return o.addListener(y),()=>{o.removeListener(y)}}).pipe(Tw(o),Xe(({matches:b})=>({query:e,matches:b})),hu(this._destroySubject)),mql:o};return this._queries.set(e,f),f}}return n.\u0275fac=function(e){return new(e||n)(qt(Kn),qt(Qr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Uj(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function jN(n,t){return(n.getAttribute(t)||"").match(/\S+/g)||[]}const Vj="cdk-describedby-message",QN="cdk-describedby-host";let _3=0,v3=(()=>{class n{constructor(e,o){this._platform=o,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+_3++,this._document=e,this._id=ac(i_)+"-"+_3++}describe(e,o,d){if(!this._canBeDescribed(e,o))return;const f=A3(o,d);"string"!=typeof o?(gy(o,this._id),this._messageRegistry.set(f,{messageElement:o,referenceCount:0})):this._messageRegistry.has(f)||this._createMessageElement(o,d),this._isElementDescribedByMessage(e,f)||this._addMessageReference(e,f)}removeDescription(e,o,d){if(!o||!this._isElementNode(e))return;const f=A3(o,d);if(this._isElementDescribedByMessage(e,f)&&this._removeMessageReference(e,f),"string"==typeof o){const b=this._messageRegistry.get(f);b&&0===b.referenceCount&&this._deleteMessageElement(f)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${QN}="${this._id}"]`);for(let o=0;o<e.length;o++)this._removeCdkDescribedByReferenceIds(e[o]),e[o].removeAttribute(QN);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,o){const d=this._document.createElement("div");gy(d,this._id),d.textContent=e,o&&d.setAttribute("role",o),this._createMessagesContainer(),this._messagesContainer.appendChild(d),this._messageRegistry.set(A3(e,o),{messageElement:d,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",o=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let f=0;f<o.length;f++)o[f].remove();const d=this._document.createElement("div");d.style.visibility="hidden",d.classList.add(e),d.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&d.setAttribute("platform","server"),this._document.body.appendChild(d),this._messagesContainer=d}_removeCdkDescribedByReferenceIds(e){const o=jN(e,"aria-describedby").filter(d=>0!=d.indexOf(Vj));e.setAttribute("aria-describedby",o.join(" "))}_addMessageReference(e,o){const d=this._messageRegistry.get(o);(function r9(n,t,e){const o=jN(n,t);o.some(d=>d.trim()==e.trim())||(o.push(e.trim()),n.setAttribute(t,o.join(" ")))})(e,"aria-describedby",d.messageElement.id),e.setAttribute(QN,this._id),d.referenceCount++}_removeMessageReference(e,o){const d=this._messageRegistry.get(o);d.referenceCount--,function O_(n,t,e){const d=jN(n,t).filter(f=>f!=e.trim());d.length?n.setAttribute(t,d.join(" ")):n.removeAttribute(t)}(e,"aria-describedby",d.messageElement.id),e.removeAttribute(QN)}_isElementDescribedByMessage(e,o){const d=jN(e,"aria-describedby"),f=this._messageRegistry.get(o),b=f&&f.messageElement.id;return!!b&&-1!=d.indexOf(b)}_canBeDescribed(e,o){if(!this._isElementNode(e))return!1;if(o&&"object"==typeof o)return!0;const d=null==o?"":`${o}`.trim(),f=e.getAttribute("aria-label");return!(!d||f&&f.trim()===d)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr),qt(Vc))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function A3(n,t){return"string"==typeof n?`${t||""}/${n}`:n}function gy(n,t){n.id||(n.id=`${Vj}-${t}-${_3++}`)}class y3{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new yt,this._typeaheadSubscription=j.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new yt,this.change=new yt,t instanceof ku&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const d=e.toArray().indexOf(this._activeItem);d>-1&&d!==this._activeItemIndex&&(this._activeItemIndex=d)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(MN(e=>this._pressedLetters.push(e)),m3(t),rf(()=>this._pressedLetters.length>0),Xe(()=>this._pressedLetters.join(""))).subscribe(e=>{const o=this._getItemsArray();for(let d=1;d<o.length+1;d++){const f=(this._activeItemIndex+d)%o.length,b=o[f];if(!this._skipPredicateFn(b)&&0===b.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(f);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,d=["altKey","ctrlKey","metaKey","shiftKey"].every(f=>!t[f]||this._allowedModifierKeys.indexOf(f)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&d){this.setNextItemActive();break}return;case 38:if(this._vertical&&d){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&d){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&d){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&d){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&d){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&d){const f=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(f>0?f:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&d){const f=this._activeItemIndex+this._pageUpAndDown.delta,b=this._getItemsArray().length;this._setActiveItemByIndex(f<b?f:b-1,-1);break}return;default:return void((d||ww(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),o="number"==typeof t?t:e.indexOf(t);this._activeItem=e[o]??null,this._activeItemIndex=o}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let o=1;o<=e.length;o++){const d=(this._activeItemIndex+t*o+e.length)%e.length;if(!this._skipPredicateFn(e[d]))return void this.setActiveItem(d)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const o=this._getItemsArray();if(o[t]){for(;this._skipPredicateFn(o[t]);)if(!o[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof ku?this._items.toArray():this._items}}class jj extends y3{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class HN extends y3{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function fu(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function _y(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const C3=new tn("cdk-input-modality-detector-options"),I3={ignoreKeys:[18,17,224,91,16]},OS=rc({passive:!0,capture:!0});let ld=(()=>{class n{constructor(e,o,d,f){this._platform=e,this._mostRecentTarget=null,this._modality=new s3(null),this._lastTouchMs=0,this._onKeydown=b=>{this._options?.ignoreKeys?.some(y=>y===b.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=bS(b))},this._onMousedown=b=>{Date.now()-this._lastTouchMs<650||(this._modality.next(fu(b)?"keyboard":"mouse"),this._mostRecentTarget=bS(b))},this._onTouchstart=b=>{_y(b)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=bS(b))},this._options={...I3,...f},this.modalityDetected=this._modality.pipe(Nj(1)),this.modalityChanged=this.modalityDetected.pipe(xj()),e.isBrowser&&o.runOutsideAngular(()=>{d.addEventListener("keydown",this._onKeydown,OS),d.addEventListener("mousedown",this._onMousedown,OS),d.addEventListener("touchstart",this._onTouchstart,OS)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,OS),document.removeEventListener("mousedown",this._onMousedown,OS),document.removeEventListener("touchstart",this._onTouchstart,OS))}}return n.\u0275fac=function(e){return new(e||n)(qt(Vc),qt(Qr),qt(Yr),qt(C3,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fr=new tn("liveAnnouncerElement",{providedIn:"root",factory:function c9(){return null}}),kD=new tn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let PD=0,MD=(()=>{class n{constructor(e,o,d,f){this._ngZone=o,this._defaultOptions=f,this._document=d,this._liveElement=e||this._createLiveElement()}announce(e,...o){const d=this._defaultOptions;let f,b;return 1===o.length&&"number"==typeof o[0]?b=o[0]:[f,b]=o,this.clear(),clearTimeout(this._previousTimeout),f||(f=d&&d.politeness?d.politeness:"polite"),null==b&&d&&(b=d.duration),this._liveElement.setAttribute("aria-live",f),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(y=>this._currentResolve=y)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof b&&(this._previousTimeout=setTimeout(()=>this.clear(),b)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",o=this._document.getElementsByClassName(e),d=this._document.createElement("div");for(let f=0;f<o.length;f++)o[f].remove();return d.classList.add(e),d.classList.add("cdk-visually-hidden"),d.setAttribute("aria-atomic","true"),d.setAttribute("aria-live","polite"),d.id="cdk-live-announcer-"+PD++,this._document.body.appendChild(d),d}_exposeAnnouncerToModals(e){const o=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let d=0;d<o.length;d++){const f=o[d],b=f.getAttribute("aria-owns");b?-1===b.indexOf(e)&&f.setAttribute("aria-owns",b+" "+e):f.setAttribute("aria-owns",e)}}}return n.\u0275fac=function(e){return new(e||n)(qt(Fr,8),qt(Qr),qt(Yr),qt(kD,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vy=new tn("cdk-focus-monitor-default-options"),GN=rc({passive:!0,capture:!0});let WN=(()=>{class n{constructor(e,o,d,f,b){this._ngZone=e,this._platform=o,this._inputModalityDetector=d,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new yt,this._rootNodeFocusAndBlurListener=y=>{for(let k=bS(y);k;k=k.parentElement)"focus"===y.type?this._onFocus(y,k):this._onBlur(y,k)},this._document=f,this._detectionMode=b?.detectionMode||0}monitor(e,o=!1){const d=Om(e);if(!this._platform.isBrowser||1!==d.nodeType)return bl(null);const f=function XF(n){if(function $F(){if(null==JF){const n=typeof document<"u"?document.head:null;JF=!(!n||!n.createShadowRoot&&!n.attachShadow)}return JF}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(d)||this._getDocument(),b=this._elementInfo.get(d);if(b)return o&&(b.checkChildren=!0),b.subject;const y={checkChildren:o,subject:new yt,rootNode:f};return this._elementInfo.set(d,y),this._registerGlobalListeners(y),y.subject}stopMonitoring(e){const o=Om(e),d=this._elementInfo.get(o);d&&(d.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(d))}focusVia(e,o,d){const f=Om(e);f===this._getDocument().activeElement?this._getClosestElementsInfo(f).forEach(([y,w])=>this._originChanged(y,o,w)):(this._setOrigin(o),"function"==typeof f.focus&&f.focus(d))}ngOnDestroy(){this._elementInfo.forEach((e,o)=>this.stopMonitoring(o))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,o){e.classList.toggle("cdk-focused",!!o),e.classList.toggle("cdk-touch-focused","touch"===o),e.classList.toggle("cdk-keyboard-focused","keyboard"===o),e.classList.toggle("cdk-mouse-focused","mouse"===o),e.classList.toggle("cdk-program-focused","program"===o)}_setOrigin(e,o=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&o,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,o){const d=this._elementInfo.get(o),f=bS(e);!d||!d.checkChildren&&o!==f||this._originChanged(o,this._getFocusOrigin(f),d)}_onBlur(e,o){const d=this._elementInfo.get(o);!d||d.checkChildren&&e.relatedTarget instanceof Node&&o.contains(e.relatedTarget)||(this._setClasses(o),this._emitOrigin(d,null))}_emitOrigin(e,o){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(o))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const o=e.rootNode,d=this._rootNodeFocusListenerCount.get(o)||0;d||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,GN),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,GN)}),this._rootNodeFocusListenerCount.set(o,d+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(hu(this._stopInputModalityDetector)).subscribe(f=>{this._setOrigin(f,!0)}))}_removeGlobalListeners(e){const o=e.rootNode;if(this._rootNodeFocusListenerCount.has(o)){const d=this._rootNodeFocusListenerCount.get(o);d>1?this._rootNodeFocusListenerCount.set(o,d-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,GN),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,GN),this._rootNodeFocusListenerCount.delete(o))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,o,d){this._setClasses(e,o),this._emitOrigin(d,o),this._lastFocusOrigin=o}_getClosestElementsInfo(e){const o=[];return this._elementInfo.forEach((d,f)=>{(f===e||d.checkChildren&&f.contains(e))&&o.push([f,d])}),o}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:o,mostRecentModality:d}=this._inputModalityDetector;if("mouse"!==d||!o||o===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const f=e.labels;if(f)for(let b=0;b<f.length;b++)if(f[b].contains(o))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(qt(Qr),qt(Vc),qt(ld),qt(Yr,8),qt(vy,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const w3="cdk-high-contrast-black-on-white",KN="cdk-high-contrast-white-on-black",T3="cdk-high-contrast-active";let zN=(()=>{class n{constructor(e,o){this._platform=e,this._document=o,this._breakpointSubscription=ac(g3).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const o=this._document.defaultView||window,d=o&&o.getComputedStyle?o.getComputedStyle(e):null,f=(d&&d.backgroundColor||"").replace(/ /g,"");switch(e.remove(),f){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(T3,w3,KN),this._hasCheckedHighContrastMode=!0;const o=this.getHighContrastMode();1===o?e.add(T3,w3):2===o&&e.add(T3,KN)}}}return n.\u0275fac=function(e){return new(e||n)(qt(Vc),qt(Yr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zj=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(qt(zN))},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[Fj]}),n})();const R3=new tn("cdk-dir-doc",{providedIn:"root",factory:function YN(){return ac(Yr)}}),Yj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let DS=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new Qi,e){const d=e.documentElement?e.documentElement.dir:null;this.value=function O3(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?Yj.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||d||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(qt(R3,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({}),n})();const JN=["text"];function Ow(n,t){if(1&n&&Ti(0,"mat-pseudo-checkbox",5),2&n){const e=ur();nn("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function Sl(n,t){if(1&n&&(jt(0,"span",6),mn(1),Wt()),2&n){const e=ur();Bt(1),vi("(",e.group.label,")")}}const Jj=[[["mat-icon"]],"*"],d9=["mat-icon","*"],Zj=new tn("mat-sanity-checks",{providedIn:"root",factory:function Xj(){return!0}});let ts=(()=>{class n{constructor(e,o,d){this._sanityChecks=o,this._document=d,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!bD()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(qt(zN),qt(Zj,8),qt(Yr))},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[Uu,Uu]}),n})();function ND(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=ca(t)}}}function $N(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const o=e||this.defaultColor;o!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),o&&this._elementRef.nativeElement.classList.add(`mat-${o}`),this._color=o)}}}function XN(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ca(t)}}}function e5(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?R_(e):this.defaultTabIndex}}}function D3(n){return class extends n{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,f=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);f!==t&&(this.errorState=f,this.stateChanges.next())}}}let k3=(()=>{class n{isErrorState(e,o){return!!(e&&e.invalid&&(e.touched||o&&o.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[ts,ts]}),n})();class n5{constructor(t,e,o,d=!1){this._renderer=t,this.element=e,this.config=o,this._animationForciblyDisabledThroughCss=d,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ZN={enterDuration:225,exitDuration:150},kS=rc({passive:!0}),r5=["mousedown","touchstart"],pd=["mouseup","mouseleave","touchend","touchcancel"];class w9{constructor(t,e,o,d){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,d.isBrowser&&(this._containerElement=Om(o))}fadeInRipple(t,e,o={}){const d=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),f={...ZN,...o.animation};o.centered&&(t=d.left+d.width/2,e=d.top+d.height/2);const b=o.radius||function T9(n,t,e){const o=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),d=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(o*o+d*d)}(t,e,d),y=t-d.left,w=e-d.top,k=f.enterDuration,Q=document.createElement("div");Q.classList.add("mat-ripple-element"),Q.style.left=y-b+"px",Q.style.top=w-b+"px",Q.style.height=2*b+"px",Q.style.width=2*b+"px",null!=o.color&&(Q.style.backgroundColor=o.color),Q.style.transitionDuration=`${k}ms`,this._containerElement.appendChild(Q);const ie=window.getComputedStyle(Q),ke=ie.transitionDuration,je="none"===ie.transitionProperty||"0s"===ke||"0s, 0s"===ke||0===d.width&&0===d.height,at=new n5(this,Q,o,je);Q.style.transform="scale3d(1, 1, 1)",at.state=0,o.persistent||(this._mostRecentTransientRipple=at);let Vt=null;return!je&&(k||f.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Qt=()=>this._finishRippleTransition(at),rn=()=>this._destroyRipple(at);Q.addEventListener("transitionend",Qt),Q.addEventListener("transitioncancel",rn),Vt={onTransitionEnd:Qt,onTransitionCancel:rn}}),this._activeRipples.set(at,Vt),(je||!k)&&this._finishRippleTransition(at),at}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,o={...ZN,...t.config.animation};e.style.transitionDuration=`${o.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Om(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(r5))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(pd),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:o}=t.config;t.state=1,!o&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=fu(t),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!_y(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,kS)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(r5.forEach(t=>{this._triggerElement.removeEventListener(t,this,kS)}),this._pointerUpEventsRegistered&&pd.forEach(t=>{this._triggerElement.removeEventListener(t,this,kS)}))}}const R9=new tn("mat-ripple-global-options");let kw=(()=>{class n{constructor(e,o,d,f,b){this._elementRef=e,this._animationMode=b,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=f||{},this._rippleRenderer=new w9(this,o,e,d)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,o=0,d){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,o,{...this.rippleConfig,...d}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Qr),vt(Vc),vt(R9,8),vt(ep,8))},n.\u0275dir=Gn({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,o){2&e&&ps("mat-ripple-unbounded",o.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Cl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[ts,ts]}),n})(),i5=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(vt(ep,8))},n.\u0275cmp=Ls({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,o){2&e&&ps("mat-pseudo-checkbox-indeterminate","indeterminate"===o.state)("mat-pseudo-checkbox-checked","checked"===o.state)("mat-pseudo-checkbox-disabled",o.disabled)("_mat-animation-noopable","NoopAnimations"===o._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,o){},styles:['.mat-pseudo-checkbox{border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}.mat-pseudo-checkbox-checked::after{top:2.7px;width:10px;height:4px}'],encapsulation:2,changeDetection:0}),n})(),PS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[ts]}),n})();const MS=new tn("MAT_OPTION_PARENT_COMPONENT"),ex=new tn("MatOptgroup");let Ay=0;class o5{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let s5=(()=>{class n{constructor(e,o,d,f){this._element=e,this._changeDetectorRef=o,this._parent=d,this.group=f,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Ay++,this.onSelectionChange=new Qi,this._stateChanges=new yt}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=ca(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,o){const d=this._getHostElement();"function"==typeof d.focus&&d.focus(o)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!ww(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new o5(this,e))}}return n.\u0275fac=function(e){hC()},n.\u0275dir=Gn({type:n,viewQuery:function(e,o){if(1&e&&ma(JN,7),2&e){let d;Yi(d=li())&&(o._text=d.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),N3=(()=>{class n extends s5{constructor(e,o,d,f){super(e,o,d,f)}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Jl),vt(MS,8),vt(ex,8))},n.\u0275cmp=Ls({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mat-mdc-focus-indicator","mdc-list-item"],hostVars:12,hostBindings:function(e,o){1&e&&zi("click",function(){return o._selectViaInteraction()})("keydown",function(f){return o._handleKeydown(f)}),2&e&&(nm("id",o.id),Li("tabindex",o._getTabIndex())("aria-selected",o._getAriaSelected())("aria-disabled",o.disabled.toString()),ps("mdc-list-item--selected",o.selected)("mat-mdc-option-multiple",o.multiple)("mat-mdc-option-active",o.active)("mdc-list-item--disabled",o.disabled))},exportAs:["matOption"],features:[yr],ngContentSelectors:d9,decls:7,vars:4,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,o){1&e&&(xo(Jj),bn(0,Ow,1,2,"mat-pseudo-checkbox",0),Lo(1),jt(2,"span",1,2),Lo(4,1),Wt(),bn(5,Sl,2,1,"span",3),Ti(6,"div",4)),2&e&&(nn("ngIf",o.multiple),Bt(5),nn("ngIf",o.group&&o.group._inert),Bt(1),nn("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disabled||o.disableRipple))},dependencies:[kw,h_,i5],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox{margin-right:0;margin-left:16px}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),tx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[Cl,Uo,ts,PS]}),n})();const P9=["mat-button",""],D_=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],L3=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],ic=["mat-fab",""],Ro=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],yy=$N(ND(XN(class{constructor(n){this._elementRef=n}})));let Nw=(()=>{class n extends yy{constructor(e,o,d,f){super(e),this._platform=o,this._ngZone=d,this._animationMode=f,this._focusMonitor=ac(WN),this._isFab=!1;const b=e.nativeElement.classList;for(const y of Ro)this._hasHostAttributes(y.selector)&&y.mdcClasses.forEach(w=>{b.add(w)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",o){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,o):this._elementRef.nativeElement.focus(o)}_hasHostAttributes(...e){return e.some(o=>this._elementRef.nativeElement.hasAttribute(o))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(e){hC()},n.\u0275dir=Gn({type:n,viewQuery:function(e,o){if(1&e&&ma(kw,5),2&e){let d;Yi(d=li())&&(o.ripple=d.first)}},features:[yr]}),n})(),Wa=(()=>{class n extends Nw{constructor(e,o,d,f){super(e,o,d,f)}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Vc),vt(Qr),vt(ep,8))},n.\u0275cmp=Ls({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,o){2&e&&(Li("disabled",o.disabled||null),ps("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[yr],attrs:P9,ngContentSelectors:L3,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,o){1&e&&(xo(D_),Ti(0,"span",0),Lo(1),jt(2,"span",1),Lo(3,1),Wt(),Lo(4,2),Ti(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(ps("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab),Bt(6),nn("matRippleDisabled",o._isRippleDisabled())("matRippleTrigger",o._elementRef.nativeElement))},dependencies:[kw],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})();const LD=new tn("mat-mdc-fab-default-options",{providedIn:"root",factory:nx});function nx(){return{color:"accent"}}const BD=nx();let a5=(()=>{class n extends Nw{constructor(e,o,d,f,b){super(e,o,d,f),this._options=b,this._isFab=!0,this._options=this._options||BD,this.color=this.defaultColor=this._options.color||BD.color}get extended(){return this._extended}set extended(e){this._extended=ca(e)}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Vc),vt(Qr),vt(ep,8),vt(LD,8))},n.\u0275cmp=Ls({type:n,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(e,o){2&e&&(Li("disabled",o.disabled||null),ps("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-unthemed",!o.color)("mat-mdc-button-base",!0)("mdc-fab--extended",o.extended)("mat-mdc-extended-fab",o.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[yr],attrs:ic,ngContentSelectors:L3,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,o){1&e&&(xo(D_),Ti(0,"span",0),Lo(1),jt(2,"span",1),Lo(3,1),Wt(),Lo(4,2),Ti(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(ps("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab),Bt(6),nn("matRippleDisabled",o._isRippleDisabled())("matRippleTrigger",o._elementRef.nativeElement))},dependencies:[kw],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),n})(),U3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[ts,Cl,ts]}),n})();class c5{}class V9{}const k_="*";function Dm(n,t){return{type:7,name:n,definitions:t,options:{}}}function km(n,t=null){return{type:4,styles:t,timings:n}}function u5(n,t=null){return{type:2,steps:n,options:t}}function oc(n){return{type:6,styles:n,offset:null}}function Il(n,t,e){return{type:0,name:n,styles:t,options:e}}function af(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Q9(n=null){return{type:9,options:n}}function H9(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function l5(n){Promise.resolve().then(n)}class FD{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){l5(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class d5{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,o=0,d=0;const f=this.players.length;0==f?l5(()=>this._onFinish()):this.players.forEach(b=>{b.onDone(()=>{++e==f&&this._onFinish()}),b.onDestroy(()=>{++o==f&&this._onDestroy()}),b.onStart(()=>{++d==f&&this._onStart()})}),this.totalTime=this.players.reduce((b,y)=>Math.max(b,y.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(o=>{const d=o.totalTime?Math.min(1,e/o.totalTime):1;o.setPosition(d)})}getPosition(){const t=this.players.reduce((e,o)=>null===e||o.totalTime>e.totalTime?o:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class UD{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class j3 extends UD{constructor(t,e,o,d,f){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=d,this.projectableNodes=f}}class VD extends UD{constructor(t,e,o,d){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o,this.injector=d}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class p5 extends UD{constructor(t){super(),this.element=t instanceof yi?t.nativeElement:t}}class rx{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof j3?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof VD?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof p5?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Bw extends rx{constructor(t,e,o,d,f){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=d,this.attachDomPortal=b=>{const y=b.element,w=this._document.createComment("dom-portal");y.parentNode.insertBefore(w,y),this.outletElement.appendChild(y),this._attachedPortal=b,super.setDisposeFn(()=>{w.parentNode&&w.parentNode.replaceChild(y,w)})},this._document=f}attachComponentPortal(t){const o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let d;return t.viewContainerRef?(d=t.viewContainerRef.createComponent(o,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>d.destroy())):(d=o.create(t.injector||this._defaultInjector||ka.NULL),this._appRef.attachView(d.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(d.hostView),d.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(d)),this._attachedPortal=t,d}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return o.rootNodes.forEach(d=>this.outletElement.appendChild(d)),o.detectChanges(),this.setDisposeFn(()=>{let d=e.indexOf(o);-1!==d&&e.remove(d)}),this._attachedPortal=t,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let P_=(()=>{class n extends rx{constructor(e,o,d){super(),this._componentFactoryResolver=e,this._viewContainerRef=o,this._isInitialized=!1,this.attached=new Qi,this.attachDomPortal=f=>{const b=f.element,y=this._document.createComment("dom-portal");f.setAttachedHost(this),b.parentNode.insertBefore(y,b),this._getRootNode().appendChild(b),this._attachedPortal=f,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(b,y)})},this._document=d}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const o=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,f=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),b=o.createComponent(f,o.length,e.injector||o.injector,e.projectableNodes||void 0);return o!==this._viewContainerRef&&this._getRootNode().appendChild(b.hostView.rootNodes[0]),super.setDisposeFn(()=>b.destroy()),this._attachedPortal=e,this._attachedRef=b,this.attached.emit(b),b}attachTemplatePortal(e){e.setAttachedHost(this);const o=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(vt(xh),vt(Oc),vt(Yr))},n.\u0275dir=Gn({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[yr]}),n})(),Q3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({}),n})();const f5=["addListener","removeListener"],Y9=["addEventListener","removeEventListener"],q9=["on","off"];function H3(n,t,e,o){if(U(e)&&(o=e,e=void 0),o)return H3(n,t,e).pipe(nN(o));const[d,f]=function sx(n){return U(n.addEventListener)&&U(n.removeEventListener)}(n)?Y9.map(b=>y=>n[b](t,y,e)):function ox(n){return U(n.addListener)&&U(n.removeListener)}(n)?f5.map(ix(n,t)):function G3(n){return U(n.on)&&U(n.off)}(n)?q9.map(ix(n,t)):[];if(!d&&mo(n))return _u(b=>H3(b,t,e))(dn(n));if(!d)throw new TypeError("Invalid event target");return new qe(b=>{const y=(...w)=>b.next(1<w.length?w:w[0]);return d(y),()=>f(y)})}function ix(n,t){return e=>o=>n[e](t,o)}const hd={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:o}=hd;o&&(t=o.requestAnimationFrame,e=o.cancelAnimationFrame);const d=t(f=>{e=void 0,n(f)});return new j(()=>e?.(d))},requestAnimationFrame(...n){const{delegate:t}=hd;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=hd;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class g5 extends h3{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let o,d=-1;t=t||e.shift();const f=e.length;do{if(o=t.execute(t.state,t.delay))break}while(++d<f&&(t=e.shift()));if(this._active=!1,o){for(;++d<f&&(t=e.shift());)t.unsubscribe();throw o}}}(class m5 extends d3{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=hd.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(t,e,o);0===t.actions.length&&(hd.cancelAnimationFrame(e),t._scheduled=void 0)}});let jD,$9=1;const QD={};function ax(n){return n in QD&&(delete QD[n],!0)}const X9={setImmediate(n){const t=$9++;return QD[t]=!0,jD||(jD=Promise.resolve()),jD.then(()=>ax(t)&&n()),t},clearImmediate(n){ax(n)}},{setImmediate:Z9,clearImmediate:eH}=X9,HD={setImmediate(...n){const{delegate:t}=HD;return(t?.setImmediate||Z9)(...n)},clearImmediate(n){const{delegate:t}=HD;return(t?.clearImmediate||eH)(n)},delegate:void 0},cx=new class tH extends h3{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let o,d=-1;t=t||e.shift();const f=e.length;do{if(o=t.execute(t.state,t.delay))break}while(++d<f&&(t=e.shift()));if(this._active=!1,o){for(;++d<f&&(t=e.shift());)t.unsubscribe();throw o}}}(class lp extends d3{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=HD.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(t,e,o);0===t.actions.length&&(HD.clearImmediate(e),t._scheduled=void 0)}});function v5(n=0,t,e=xN){let o=-1;return null!=t&&(aT(t)?e=t:o=t),new qe(d=>{let f=function Fw(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;f<0&&(f=0);let b=0;return e.schedule(function(){d.closed||(d.next(b++),0<=o?this.schedule(void 0,o):d.complete())},f)})}function A5(n,t=xN){return function nH(n){return Ge((t,e)=>{let o=!1,d=null,f=null,b=!1;const y=()=>{if(f?.unsubscribe(),f=null,o){o=!1;const k=d;d=null,e.next(k)}b&&e.complete()},w=()=>{f=null,b&&e.complete()};t.subscribe(new Re(e,k=>{o=!0,d=k,f||dn(n(k)).subscribe(f=new Re(e,y,w))},()=>{b=!0,(!o||!f||f.closed)&&e.complete()}))})}(()=>v5(n,t))}let GD=(()=>{class n{constructor(e,o,d){this._ngZone=e,this._platform=o,this._scrolled=new yt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=d}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new qe(o=>{this._globalSubscription||this._addGlobalListener();const d=e>0?this._scrolled.pipe(A5(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{d.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):bl()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){const d=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe(rf(f=>!f||d.indexOf(f)>-1))}getAncestorScrollContainers(e){const o=[];return this.scrollContainers.forEach((d,f)=>{this._scrollableContainsElement(f,e)&&o.push(f)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let d=Om(o),f=e.getElementRef().nativeElement;do{if(d==f)return!0}while(d=d.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>H3(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(qt(Qr),qt(Vc),qt(Yr,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K3=(()=>{class n{constructor(e,o,d){this._platform=e,this._change=new yt,this._changeListener=f=>{this._change.next(f)},this._document=d,o.runOutsideAngular(()=>{if(e.isBrowser){const f=this._getWindow();f.addEventListener("resize",this._changeListener),f.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:o,height:d}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+d,right:e.left+o,height:d,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,o=this._getWindow(),d=e.documentElement,f=d.getBoundingClientRect();return{top:-f.top||e.body.scrollTop||o.scrollY||d.scrollTop||0,left:-f.left||e.body.scrollLeft||o.scrollX||d.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(A5(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(qt(Vc),qt(Qr),qt(Yr,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({}),n})(),S5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[Uu,WD,Uu,WD]}),n})();const z3=ES();class lH{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Qa(-this._previousScrollPosition.left),t.style.top=Qa(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,o=t.style,d=this._document.body.style,f=o.scrollBehavior||"",b=d.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),z3&&(o.scrollBehavior=d.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),z3&&(o.scrollBehavior=f,d.scrollBehavior=b)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}}class C5{constructor(t,e,o,d){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=o,this._config=d,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class I5{enable(){}disable(){}attach(){}}function Y3(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function w5(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class T5{constructor(t,e,o,d){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=o,this._config=d,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:d}=this._viewportRuler.getViewportSize();Y3(e,[{width:o,height:d,bottom:d,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let q3=(()=>{class n{constructor(e,o,d,f){this._scrollDispatcher=e,this._viewportRuler=o,this._ngZone=d,this.noop=()=>new I5,this.close=b=>new C5(this._scrollDispatcher,this._ngZone,this._viewportRuler,b),this.block=()=>new lH(this._viewportRuler,this._document),this.reposition=b=>new T5(this._scrollDispatcher,this._viewportRuler,this._ngZone,b),this._document=f}}return n.\u0275fac=function(e){return new(e||n)(qt(GD),qt(K3),qt(Qr),qt(Yr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class KD{constructor(t){if(this.scrollStrategy=new I5,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const o of e)void 0!==t[o]&&(this[o]=t[o])}}}class dH{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let dx=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nh=(()=>{class n extends dx{constructor(e,o){super(e),this._ngZone=o,this._keydownListener=d=>{const f=this._attachedOverlays;for(let b=f.length-1;b>-1;b--)if(f[b]._keydownEvents.observers.length>0){const y=f[b]._keydownEvents;this._ngZone?this._ngZone.run(()=>y.next(d)):y.next(d);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr),qt(Qr,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hH=(()=>{class n extends dx{constructor(e,o,d){super(e),this._platform=o,this._ngZone=d,this._cursorStyleIsSet=!1,this._pointerDownListener=f=>{this._pointerDownEventTarget=bS(f)},this._clickListener=f=>{const b=bS(f),y="click"===f.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:b;this._pointerDownEventTarget=null;const w=this._attachedOverlays.slice();for(let k=w.length-1;k>-1;k--){const Q=w[k];if(Q._outsidePointerEvents.observers.length<1||!Q.hasAttached())continue;if(Q.overlayElement.contains(b)||Q.overlayElement.contains(y))break;const ie=Q._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>ie.next(f)):ie.next(f)}}}add(e){if(super.add(e),!this._isAttached){const o=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(o)):this._addEventListeners(o),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr),qt(Vc),qt(Qr,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R5=(()=>{class n{constructor(e,o){this._platform=o,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||bD()){const d=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let f=0;f<d.length;f++)d[f].remove()}const o=this._document.createElement("div");o.classList.add(e),bD()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr),qt(Vc))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $3{constructor(t,e,o,d,f,b,y,w,k,Q=!1){this._portalOutlet=t,this._host=e,this._pane=o,this._config=d,this._ngZone=f,this._keyboardDispatcher=b,this._document=y,this._location=w,this._outsideClickDispatcher=k,this._animationsDisabled=Q,this._backdropElement=null,this._backdropClick=new yt,this._attachments=new yt,this._detachments=new yt,this._locationChanges=j.EMPTY,this._backdropClickHandler=ie=>this._backdropClick.next(ie),this._backdropTransitionendHandler=ie=>{this._disposeBackdrop(ie.target)},this._keydownEvents=new yt,this._outsidePointerEvents=new yt,d.scrollStrategy&&(this._scrollStrategy=d.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=d.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Rl(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Qa(this._config.width),t.height=Qa(this._config.height),t.minWidth=Qa(this._config.minWidth),t.minHeight=Qa(this._config.minHeight),t.maxWidth=Qa(this._config.maxWidth),t.maxHeight=Qa(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,o){const d=LN(e||[]).filter(f=>!!f);d.length&&(o?t.classList.add(...d):t.classList.remove(...d))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(hu(bi(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const O5="cdk-overlay-connected-position-bounding-box",X3=/([A-Za-z%]+)$/;class D5{constructor(t,e,o,d,f){this._viewportRuler=e,this._document=o,this._platform=d,this._overlayContainer=f,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new yt,this._resizeSubscription=j.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(O5),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,o=this._viewportRect,d=this._containerRect,f=[];let b;for(let y of this._preferredPositions){let w=this._getOriginPoint(t,d,y),k=this._getOverlayPoint(w,e,y),Q=this._getOverlayFit(k,e,o,y);if(Q.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(y,w);this._canFitWithFlexibleDimensions(Q,k,o)?f.push({position:y,origin:w,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(w,y)}):(!b||b.overlayFit.visibleArea<Q.visibleArea)&&(b={overlayFit:Q,overlayPoint:k,originPoint:w,position:y,overlayRect:e})}if(f.length){let y=null,w=-1;for(const k of f){const Q=k.boundingBoxRect.width*k.boundingBoxRect.height*(k.position.weight||1);Q>w&&(w=Q,y=k)}return this._isPushed=!1,void this._applyPosition(y.position,y.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(b.position,b.originPoint);this._applyPosition(b.position,b.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&jc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(O5),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,o){let d,f;if("center"==o.originX)d=t.left+t.width/2;else{const b=this._isRtl()?t.right:t.left,y=this._isRtl()?t.left:t.right;d="start"==o.originX?b:y}return e.left<0&&(d-=e.left),f="center"==o.originY?t.top+t.height/2:"top"==o.originY?t.top:t.bottom,e.top<0&&(f-=e.top),{x:d,y:f}}_getOverlayPoint(t,e,o){let d,f;return d="center"==o.overlayX?-e.width/2:"start"===o.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,f="center"==o.overlayY?-e.height/2:"top"==o.overlayY?0:-e.height,{x:t.x+d,y:t.y+f}}_getOverlayFit(t,e,o,d){const f=zD(e);let{x:b,y}=t,w=this._getOffset(d,"x"),k=this._getOffset(d,"y");w&&(b+=w),k&&(y+=k);let Ie=0-y,ke=y+f.height-o.height,je=this._subtractOverflows(f.width,0-b,b+f.width-o.width),at=this._subtractOverflows(f.height,Ie,ke),Vt=je*at;return{visibleArea:Vt,isCompletelyWithinViewport:f.width*f.height===Vt,fitsInViewportVertically:at===f.height,fitsInViewportHorizontally:je==f.width}}_canFitWithFlexibleDimensions(t,e,o){if(this._hasFlexibleDimensions){const d=o.bottom-e.y,f=o.right-e.x,b=k5(this._overlayRef.getConfig().minHeight),y=k5(this._overlayRef.getConfig().minWidth),k=t.fitsInViewportHorizontally||null!=y&&y<=f;return(t.fitsInViewportVertically||null!=b&&b<=d)&&k}return!1}_pushOverlayOnScreen(t,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const d=zD(e),f=this._viewportRect,b=Math.max(t.x+d.width-f.width,0),y=Math.max(t.y+d.height-f.height,0),w=Math.max(f.top-o.top-t.y,0),k=Math.max(f.left-o.left-t.x,0);let Q=0,ie=0;return Q=d.width<=f.width?k||-b:t.x<this._viewportMargin?f.left-o.left-t.x:0,ie=d.height<=f.height?w||-y:t.y<this._viewportMargin?f.top-o.top-t.y:0,this._previousPushAmount={x:Q,y:ie},{x:t.x+Q,y:t.y+ie}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const o=this._getScrollVisibility(),d=new dH(t,o);this._positionChanges.next(d)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,d=t.overlayY;o="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let f=0;f<e.length;f++)e[f].style.transformOrigin=`${o} ${d}`}_calculateBoundingBoxRect(t,e){const o=this._viewportRect,d=this._isRtl();let f,b,y,Q,ie,Ie;if("top"===e.overlayY)b=t.y,f=o.height-b+this._viewportMargin;else if("bottom"===e.overlayY)y=o.height-t.y+2*this._viewportMargin,f=o.height-y+this._viewportMargin;else{const ke=Math.min(o.bottom-t.y+o.top,t.y),je=this._lastBoundingBoxSize.height;f=2*ke,b=t.y-ke,f>je&&!this._isInitialRender&&!this._growAfterOpen&&(b=t.y-je/2)}if("end"===e.overlayX&&!d||"start"===e.overlayX&&d)Ie=o.width-t.x+this._viewportMargin,Q=t.x-this._viewportMargin;else if("start"===e.overlayX&&!d||"end"===e.overlayX&&d)ie=t.x,Q=o.right-t.x;else{const ke=Math.min(o.right-t.x+o.left,t.x),je=this._lastBoundingBoxSize.width;Q=2*ke,ie=t.x-ke,Q>je&&!this._isInitialRender&&!this._growAfterOpen&&(ie=t.x-je/2)}return{top:b,left:ie,bottom:y,right:Ie,width:Q,height:f}}_setBoundingBoxStyles(t,e){const o=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const d={};if(this._hasExactPosition())d.top=d.left="0",d.bottom=d.right=d.maxHeight=d.maxWidth="",d.width=d.height="100%";else{const f=this._overlayRef.getConfig().maxHeight,b=this._overlayRef.getConfig().maxWidth;d.height=Qa(o.height),d.top=Qa(o.top),d.bottom=Qa(o.bottom),d.width=Qa(o.width),d.left=Qa(o.left),d.right=Qa(o.right),d.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",d.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",f&&(d.maxHeight=Qa(f)),b&&(d.maxWidth=Qa(b))}this._lastBoundingBoxSize=o,jc(this._boundingBox.style,d)}_resetBoundingBoxStyles(){jc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){jc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const o={},d=this._hasExactPosition(),f=this._hasFlexibleDimensions,b=this._overlayRef.getConfig();if(d){const Q=this._viewportRuler.getViewportScrollPosition();jc(o,this._getExactOverlayY(e,t,Q)),jc(o,this._getExactOverlayX(e,t,Q))}else o.position="static";let y="",w=this._getOffset(e,"x"),k=this._getOffset(e,"y");w&&(y+=`translateX(${w}px) `),k&&(y+=`translateY(${k}px)`),o.transform=y.trim(),b.maxHeight&&(d?o.maxHeight=Qa(b.maxHeight):f&&(o.maxHeight="")),b.maxWidth&&(d?o.maxWidth=Qa(b.maxWidth):f&&(o.maxWidth="")),jc(this._pane.style,o)}_getExactOverlayY(t,e,o){let d={top:"",bottom:""},f=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(f=this._pushOverlayOnScreen(f,this._overlayRect,o)),"bottom"===t.overlayY?d.bottom=this._document.documentElement.clientHeight-(f.y+this._overlayRect.height)+"px":d.top=Qa(f.y),d}_getExactOverlayX(t,e,o){let b,d={left:"",right:""},f=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(f=this._pushOverlayOnScreen(f,this._overlayRect,o)),b=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===b?d.right=this._document.documentElement.clientWidth-(f.x+this._overlayRect.width)+"px":d.left=Qa(f.x),d}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(d=>d.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:w5(t,o),isOriginOutsideView:Y3(t,o),isOverlayClipped:w5(e,o),isOverlayOutsideView:Y3(e,o)}}_subtractOverflows(t,...e){return e.reduce((o,d)=>o-Math.max(d,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+t-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&LN(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof yi)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,o=t.height||0;return{top:t.y,bottom:t.y+o,left:t.x,right:t.x+e,height:o,width:e}}}function jc(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function k5(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(X3);return e&&"px"!==e?null:parseFloat(t)}return n||null}function zD(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const px="cdk-global-overlay-wrapper";class Vw{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(px),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:d,height:f,maxWidth:b,maxHeight:y}=o,w=!("100%"!==d&&"100vw"!==d||b&&"100%"!==b&&"100vw"!==b),k=!("100%"!==f&&"100vh"!==f||y&&"100%"!==y&&"100vh"!==y),Q=this._xPosition,ie=this._xOffset,Ie="rtl"===this._overlayRef.getConfig().direction;let ke="",je="",at="";w?at="flex-start":"center"===Q?(at="center",Ie?je=ie:ke=ie):Ie?"left"===Q||"end"===Q?(at="flex-end",ke=ie):("right"===Q||"start"===Q)&&(at="flex-start",je=ie):"left"===Q||"start"===Q?(at="flex-start",ke=ie):("right"===Q||"end"===Q)&&(at="flex-end",je=ie),t.position=this._cssPosition,t.marginLeft=w?"0":ke,t.marginTop=k?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=w?"0":je,e.justifyContent=at,e.alignItems=k?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove(px),o.justifyContent=o.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let cf=(()=>{class n{constructor(e,o,d,f){this._viewportRuler=e,this._document=o,this._platform=d,this._overlayContainer=f}global(){return new Vw}flexibleConnectedTo(e){return new D5(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(qt(K3),qt(Yr),qt(Vc),qt(R5))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fH=0,Ey=(()=>{class n{constructor(e,o,d,f,b,y,w,k,Q,ie,Ie,ke){this.scrollStrategies=e,this._overlayContainer=o,this._componentFactoryResolver=d,this._positionBuilder=f,this._keyboardDispatcher=b,this._injector=y,this._ngZone=w,this._document=k,this._directionality=Q,this._location=ie,this._outsideClickDispatcher=Ie,this._animationsModuleType=ke}create(e){const o=this._createHostElement(),d=this._createPaneElement(o),f=this._createPortalOutlet(d),b=new KD(e);return b.direction=b.direction||this._directionality.value,new $3(f,o,d,b,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const o=this._document.createElement("div");return o.id="cdk-overlay-"+fH++,o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(s_)),new Bw(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(qt(q3),qt(R5),qt(xh),qt(cf),qt(nh),qt(ka),qt(Qr),qt(Yr),qt(DS),qt(l_),qt(hH),qt(ep,8))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const M_=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],M5=new tn("cdk-connected-overlay-scroll-strategy");let hx=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(vt(yi))},n.\u0275dir=Gn({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),Z3=(()=>{class n{constructor(e,o,d,f,b){this._overlay=e,this._dir=b,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=j.EMPTY,this._attachSubscription=j.EMPTY,this._detachSubscription=j.EMPTY,this._positionSubscription=j.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Qi,this.positionChange=new Qi,this.attach=new Qi,this.detach=new Qi,this.overlayKeydown=new Qi,this.overlayOutsideClick=new Qi,this._templatePortal=new VD(o,d),this._scrollStrategyFactory=f,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ca(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=ca(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=ca(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=ca(e)}get push(){return this._push}set push(e){this._push=ca(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=M_);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(o=>{this.overlayKeydown.next(o),27===o.keyCode&&!this.disableClose&&!ww(o)&&(o.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(o=>{this.overlayOutsideClick.next(o)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),o=new KD({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(o.width=this.width),(this.height||0===this.height)&&(o.height=this.height),(this.minWidth||0===this.minWidth)&&(o.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(o.minHeight=this.minHeight),this.backdropClass&&(o.backdropClass=this.backdropClass),this.panelClass&&(o.panelClass=this.panelClass),o}_updatePositionStrategy(e){const o=this.positions.map(d=>({originX:d.originX,originY:d.originY,overlayX:d.overlayX,overlayY:d.overlayY,offsetX:d.offsetX||this.offsetX,offsetY:d.offsetY||this.offsetY,panelClass:d.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(o).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof hx?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function uH(n,t=!1){return Ge((e,o)=>{let d=0;e.subscribe(new Re(o,f=>{const b=n(f,d++);(b||t)&&o.next(f),!b&&o.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(vt(Ey),vt(pl),vt(Oc),vt(M5),vt(DS,8))},n.\u0275dir=Gn({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Pl]}),n})();const fx={provide:M5,deps:[Ey],useFactory:function mH(n){return()=>n.scrollStrategies.reposition()}};let eU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({providers:[Ey,fx],imports:[Uu,Q3,S5,S5]}),n})();function YD(n,t){if(1&n){const e=wu();jt(0,"div",2)(1,"button",3),zi("click",function(){return da(e),io(ur().action())}),mn(2),Wt()()}if(2&n){const e=ur();Bt(2),vi(" ",e.data.action," ")}}const tU=["label"];function mx(n,t){}const gH=Math.pow(2,31)-1;class gx{constructor(t,e){this._overlayRef=e,this._afterDismissed=new yt,this._afterOpened=new yt,this._onAction=new yt,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,gH))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const dp=new tn("MatSnackBarData");class fd{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let qD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Gn({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),n})(),_H=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Gn({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),n})(),vH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Gn({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),n})(),jw=(()=>{class n{constructor(e,o){this.snackBarRef=e,this.data=o}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(vt(gx),vt(dp))},n.\u0275cmp=Ls({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,o){1&e&&(jt(0,"div",0),mn(1),Wt(),bn(2,YD,3,1,"div",1)),2&e&&(Bt(1),vi(" ",o.data.message,"\n"),Bt(1),nn("ngIf",o.hasAction))},dependencies:[h_,Wa,qD,_H,vH],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),n})();const N5={snackBarState:Dm("state",[Il("void, hidden",oc({transform:"scale(0.8)",opacity:0})),Il("visible",oc({transform:"scale(1)",opacity:1})),af("* => visible",km("150ms cubic-bezier(0, 0, 0.2, 1)")),af("* => void, * => hidden",km("75ms cubic-bezier(0.4, 0.0, 1, 1)",oc({opacity:0})))])};let AH=(()=>{class n extends rx{constructor(e,o,d,f,b){super(),this._ngZone=e,this._elementRef=o,this._changeDetectorRef=d,this._platform=f,this.snackBarConfig=b,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new yt,this._onExit=new yt,this._onEnter=new yt,this._animationState="void",this.attachDomPortal=y=>{this._assertNotAttached();const w=this._portalOutlet.attachDomPortal(y);return this._afterPortalAttached(),w},this._live="assertive"!==b.politeness||b.announcementMessage?"off"===b.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const o=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),o}attachTemplatePortal(e){this._assertNotAttached();const o=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),o}onAnimationEnd(e){const{fromState:o,toState:d}=e;if(("void"===d&&"void"!==o||"hidden"===d)&&this._completeExit(),"visible"===d){const f=this._onEnter;this._ngZone.run(()=>{f.next(),f.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Rl(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,o=this.snackBarConfig.panelClass;o&&(Array.isArray(o)?o.forEach(d=>e.classList.add(d)):e.classList.add(o))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),o=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&o){let d=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(d=document.activeElement),e.removeAttribute("aria-hidden"),o.appendChild(e),d?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(vt(Qr),vt(yi),vt(Jl),vt(Vc),vt(fd))},n.\u0275dir=Gn({type:n,viewQuery:function(e,o){if(1&e&&ma(P_,7),2&e){let d;Yi(d=li())&&(o._portalOutlet=d.first)}},features:[yr]}),n})(),yH=(()=>{class n extends AH{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,o="mdc-snackbar__label";e.classList.toggle(o,!e.querySelector(`.${o}`))}}return n.\u0275fac=function(){let t;return function(o){return(t||(t=ss(n)))(o||n)}}(),n.\u0275cmp=Ls({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,o){if(1&e&&ma(tU,7),2&e){let d;Yi(d=li())&&(o._label=d.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,o){1&e&&$f("@state.done",function(f){return o.onAnimationEnd(f)}),2&e&&Bo("@state",o._animationState)},features:[yr],decls:6,vars:2,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,o){1&e&&(jt(0,"div",0)(1,"div",1,2)(3,"div",3),bn(4,mx,0,0,"ng-template",4),Wt(),Ti(5,"div"),Wt()()),2&e&&(Bt(5),Li("aria-live",o._live)("role",o._role))},dependencies:[P_],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.cdk-high-contrast-active .mat-mdc-snack-bar-container{border:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[N5.snackBarState]}}),n})(),Qw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[eU,Q3,Uo,U3,ts,ts]}),n})();const x5=new tn("mat-snack-bar-default-options",{providedIn:"root",factory:function _x(){return new fd}});let nU=(()=>{class n{constructor(e,o,d,f,b,y){this._overlay=e,this._live=o,this._injector=d,this._breakpointObserver=f,this._parentSnackBar=b,this._defaultConfig=y,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,o){return this._attach(e,o)}openFromTemplate(e,o){return this._attach(e,o)}open(e,o="",d){const f={...this._defaultConfig,...d};return f.data={message:e,action:o},f.announcementMessage===e&&(f.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,f)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,o){const f=ka.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:fd,useValue:o}]}),b=new j3(this.snackBarContainerComponent,o.viewContainerRef,f),y=e.attach(b);return y.instance.snackBarConfig=o,y.instance}_attach(e,o){const d={...new fd,...this._defaultConfig,...o},f=this._createOverlay(d),b=this._attachSnackBarContainer(f,d),y=new gx(b,f);if(e instanceof pl){const w=new VD(e,null,{$implicit:d.data,snackBarRef:y});y.instance=b.attachTemplatePortal(w)}else{const w=this._createInjector(d,y),k=new j3(e,void 0,w),Q=b.attachComponentPortal(k);y.instance=Q.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(hu(f.detachments())).subscribe(w=>{f.overlayElement.classList.toggle(this.handsetCssClass,w.matches)}),d.announcementMessage&&b._onAnnounce.subscribe(()=>{this._live.announce(d.announcementMessage,d.politeness)}),this._animateSnackBar(y,d),this._openedSnackBarRef=y,this._openedSnackBarRef}_animateSnackBar(e,o){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),o.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),o.duration&&o.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(o.duration))}_createOverlay(e){const o=new KD;o.direction=e.direction;let d=this._overlay.position().global();const f="rtl"===e.direction,b="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!f||"end"===e.horizontalPosition&&f,y=!b&&"center"!==e.horizontalPosition;return b?d.left("0"):y?d.right("0"):d.centerHorizontally(),"top"===e.verticalPosition?d.top("0"):d.bottom("0"),o.positionStrategy=d,this._overlay.create(o)}_createInjector(e,o){return ka.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:gx,useValue:o},{provide:dp,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(qt(Ey),qt(MD),qt(ka),qt(g3),qt(n,12),qt(x5))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})(),NS=(()=>{class n extends nU{constructor(e,o,d,f,b,y){super(e,o,d,f,b,y),this.simpleSnackBarComponent=jw,this.snackBarContainerComponent=yH,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(qt(Ey),qt(MD),qt(ka),qt(g3),qt(n,12),qt(x5))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:Qw}),n})();const rU=["*"];class bH{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(o=>this._trackTile(o))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new SH(this.rowIndex,e)}_findMatchingGap(t){let e=-1,o=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),o=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(o=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),o=this._findGapEndIndex(e)))}while(o-e<t||0==o);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let o=0;o<e.colspan;o++)this.tracker[t+o]=e.rowspan}}class SH{constructor(t,e){this.row=t,this.col=e}}const L5=new tn("MAT_GRID_LIST");let oU=(()=>{class n{constructor(e,o){this._element=e,this._gridList=o,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(R_(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(R_(e))}_setStyle(e,o){this._element.nativeElement.style[e]=o}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(L5,8))},n.\u0275cmp=Ls({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,o){2&e&&Li("rowspan",o.rowspan)("colspan",o.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:rU,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,o){1&e&&(xo(),jt(0,"div",0),Lo(1),Wt())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),n})();const JD=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class Hw{constructor(){this._rows=0,this._rowspan=0}init(t,e,o,d){this._gutterSize=$D(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=o,this._direction=d}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":md(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,o){let d=100/this._cols,f=(this._cols-1)/this._cols;this.setColStyles(t,o,d,f),this.setRowStyles(t,e,d,f)}setColStyles(t,e,o,d){let f=this.getBaseTileSize(o,d);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(f,e)),t._setStyle("width",md(this.getTileSize(f,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class B5 extends Hw{constructor(t){super(),this.fixedRowHeight=t}init(t,e,o,d){super.init(t,e,o,d),this.fixedRowHeight=$D(this.fixedRowHeight),JD.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",md(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",md(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class F5 extends Hw{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,o,d){this.baseTileHeight=this.getBaseTileSize(o/this.rowHeightRatio,d),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",md(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",md(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class sU extends Hw{setRowStyles(t,e){let f=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(f,e)),t._setStyle("height",md(this.getTileSize(f,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function md(n){return`calc(${n})`}function $D(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let U5=(()=>{class n{constructor(e,o){this._element=e,this._dir=o,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(R_(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const o=`${e??""}`;o!==this._rowHeight&&(this._rowHeight=o,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new sU:e&&e.indexOf(":")>-1?new F5(e):new B5(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new bH);const e=this._tileCoordinator,o=this._tiles.filter(f=>!f._gridList||f._gridList===this),d=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,o),this._tileStyler.init(this.gutterSize,e,this.cols,d),o.forEach((f,b)=>{const y=e.positions[b];this._tileStyler.setStyle(f,y.row,y.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(DS,8))},n.\u0275cmp=Ls({type:n,selectors:[["mat-grid-list"]],contentQueries:function(e,o,d){if(1&e&&kc(d,oU,5),2&e){let f;Yi(f=li())&&(o._tiles=f)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,o){2&e&&Li("cols",o.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[ho([{provide:L5,useExisting:n}])],ngContentSelectors:rU,decls:2,vars:0,template:function(e,o){1&e&&(xo(),jt(0,"div"),Lo(1),Wt())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),n})(),CH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[P3,ts,P3,ts]}),n})();const j5=["matFormFieldNotchedOutline",""],aU=["*"],Q5=["textField"],H5=["iconPrefixContainer"],cU=["textPrefixContainer"];function G5(n,t){1&n&&Ti(0,"span",19)}function W5(n,t){if(1&n){const e=wu();jt(0,"label",17),zi("cdkObserveContent",function(){return da(e),io(ur(2)._refreshOutlineNotchWidth())}),Lo(1,1),bn(2,G5,1,0,"span",18),Wt()}if(2&n){const e=ur(2);nn("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),Li("for",e._control.id)("aria-owns",e._control.id),Bt(2),nn("ngIf",!e.hideRequiredMarker&&e._control.required)}}function vx(n,t){1&n&&bn(0,W5,3,6,"label",16),2&n&&nn("ngIf",ur()._hasFloatingLabel())}function Ax(n,t){1&n&&Ti(0,"div",20)}function uU(n,t){}function lU(n,t){1&n&&bn(0,uU,0,0,"ng-template",22),2&n&&(ur(2),nn("ngTemplateOutlet",ll(1)))}function dU(n,t){if(1&n&&(jt(0,"div",21),bn(1,lU,1,1,"ng-template",9),Wt()),2&n){const e=ur();nn("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),Bt(1),nn("ngIf",!e._forceDisplayInfixLabel())}}function pU(n,t){1&n&&(jt(0,"div",23,24),Lo(2,2),Wt())}function K5(n,t){1&n&&(jt(0,"div",25,26),Lo(2,3),Wt())}function hU(n,t){}function Gw(n,t){1&n&&bn(0,hU,0,0,"ng-template",22),2&n&&(ur(),nn("ngTemplateOutlet",ll(1)))}function Mm(n,t){1&n&&(jt(0,"div",27),Lo(1,4),Wt())}function z5(n,t){1&n&&(jt(0,"div",28),Lo(1,5),Wt())}function xS(n,t){1&n&&Ti(0,"div",29)}function N_(n,t){1&n&&(jt(0,"div",30),Lo(1,6),Wt()),2&n&&nn("@transitionMessages",ur()._subscriptAnimationState)}function fU(n,t){if(1&n&&(jt(0,"mat-hint",34),mn(1),Wt()),2&n){const e=ur(2);nn("id",e._hintLabelId),Bt(1),Gd(e.hintLabel)}}function Ww(n,t){if(1&n&&(jt(0,"div",31),bn(1,fU,2,2,"mat-hint",32),Lo(2,7),Ti(3,"div",33),Lo(4,8),Wt()),2&n){const e=ur();nn("@transitionMessages",e._subscriptAnimationState),Bt(1),nn("ngIf",e.hintLabel)}}const yx=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],rh=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let Ex=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Gn({type:n,selectors:[["mat-label"]]}),n})();const Y5=new tn("MatError");let ZD=0,mU=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+ZD++}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Gn({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,o){2&e&&(nm("id",o.id),Li("align",null),ps("mat-mdc-form-field-hint-end","end"===o.align))},inputs:{align:"align",id:"id"}}),n})();const gU=new tn("MatPrefix"),q5=new tn("MatSuffix");let _U=(()=>{class n{constructor(e){this._isText=!1,this._isText=e.nativeElement.hasAttribute("matTextSuffix")}}return n.\u0275fac=function(e){return new(e||n)(vt(yi))},n.\u0275dir=Gn({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],features:[ho([{provide:q5,useExisting:n}])]}),n})(),Nm=(()=>{class n{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function TH(n){if(null!==n.offsetParent)return n.scrollWidth;const e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const o=e.scrollWidth;return e.remove(),o}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(vt(yi))},n.\u0275dir=Gn({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,o){2&e&&ps("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating"}}),n})();const bx="mdc-line-ripple--active",ek="mdc-line-ripple--deactivating";let J5=(()=>{class n{constructor(e,o){this._elementRef=e,this._handleTransitionEnd=d=>{const f=this._elementRef.nativeElement.classList,b=f.contains(ek);"opacity"===d.propertyName&&b&&f.remove(bx,ek)},o.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(ek),e.add(bx)}deactivate(){this._elementRef.nativeElement.classList.add(ek)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Qr))},n.\u0275dir=Gn({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),$5=(()=>{class n{constructor(e,o){this._elementRef=e,this._ngZone=o,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Qr))},n.\u0275cmp=Ls({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,o){2&e&&ps("mdc-notched-outline--notched",o.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:j5,ngContentSelectors:aU,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,o){1&e&&(xo(),Ti(0,"div",0),jt(1,"div",1),Lo(2),Wt(),Ti(3,"div",2)),2&e&&(Bt(1),Bg("width",o._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const RH={transitionMessages:Dm("transitionMessages",[Il("enter",oc({opacity:1,transform:"translateY(0%)"})),af("void => enter",[oc({opacity:0,transform:"translateY(-5px)"}),km("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let vU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Gn({type:n}),n})();const Sx=new tn("MatFormField"),Z5=new tn("MAT_FORM_FIELD_DEFAULT_OPTIONS");let LS=0,i8=(()=>{class n{constructor(e,o,d,f,b,y,w,k){this._elementRef=e,this._changeDetectorRef=o,this._ngZone=d,this._dir=f,this._platform=b,this._defaults=y,this._animationMode=w,this._document=k,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+LS++,this._hintLabelId="mat-mdc-hint-"+LS++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new yt,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,y&&(y.appearance&&(this.appearance=y.appearance),this._hideRequiredMarker=Boolean(y?.hideRequiredMarker),y.color&&(this.color=y.color))}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=ca(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const o=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==o&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(hu(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),bi(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(hu(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(hu(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const o=this._control?this._control.ngControl:null;return o&&o[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const o=this._hintChildren?this._hintChildren.find(f=>"start"===f.align):null,d=this._hintChildren?this._hintChildren.find(f=>"end"===f.align):null;o?e.push(o.id):this._hintLabel&&e.push(this._hintLabelId),d&&e.push(d.id)}else this._errorChildren&&e.push(...this._errorChildren.map(o=>o.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const o=this._iconPrefixContainer?.nativeElement,d=this._textPrefixContainer?.nativeElement,f=o?.getBoundingClientRect().width??0,b=d?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${f+b}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const o=e.getRootNode();return o&&o!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Jl),vt(Qr),vt(DS),vt(Vc),vt(Z5,8),vt(ep,8),vt(Yr))},n.\u0275cmp=Ls({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,o,d){if(1&e&&(kc(d,Ex,5),kc(d,Ex,7),kc(d,vU,5),kc(d,gU,5),kc(d,q5,5),kc(d,Y5,5),kc(d,mU,5)),2&e){let f;Yi(f=li())&&(o._labelChildNonStatic=f.first),Yi(f=li())&&(o._labelChildStatic=f.first),Yi(f=li())&&(o._formFieldControl=f.first),Yi(f=li())&&(o._prefixChildren=f),Yi(f=li())&&(o._suffixChildren=f),Yi(f=li())&&(o._errorChildren=f),Yi(f=li())&&(o._hintChildren=f)}},viewQuery:function(e,o){if(1&e&&(ma(Q5,5),ma(H5,5),ma(cU,5),ma(Nm,5),ma($5,5),ma(J5,5)),2&e){let d;Yi(d=li())&&(o._textField=d.first),Yi(d=li())&&(o._iconPrefixContainer=d.first),Yi(d=li())&&(o._textPrefixContainer=d.first),Yi(d=li())&&(o._floatingLabel=d.first),Yi(d=li())&&(o._notchedOutline=d.first),Yi(d=li())&&(o._lineRipple=d.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,o){2&e&&ps("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===o._animationMode)("mat-form-field-appearance-fill","fill"==o.appearance)("mat-form-field-appearance-outline","outline"==o.appearance)("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-focused",o._control.focused)("mat-primary","accent"!==o.color&&"warn"!==o.color)("mat-accent","accent"===o.color)("mat-warn","warn"===o.color)("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[ho([{provide:Sx,useExisting:n}])],ngContentSelectors:rh,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,o){1&e&&(xo(yx),bn(0,vx,1,1,"ng-template",null,0,fI),jt(2,"div",1,2),zi("click",function(f){return o._control.onContainerClick&&o._control.onContainerClick(f)}),bn(4,Ax,1,0,"div",3),jt(5,"div",4),bn(6,dU,2,3,"div",5),bn(7,pU,3,0,"div",6),bn(8,K5,3,0,"div",7),jt(9,"div",8),bn(10,Gw,1,1,"ng-template",9),Lo(11),Wt(),bn(12,Mm,2,0,"div",10),bn(13,z5,2,0,"div",11),Wt(),bn(14,xS,1,0,"div",12),Wt(),jt(15,"div",13),bn(16,N_,2,1,"div",14),bn(17,Ww,5,2,"div",15),Wt()),2&e&&(Bt(2),ps("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),Bt(2),nn("ngIf",!o._hasOutline()&&!o._control.disabled),Bt(2),nn("ngIf",o._hasOutline()),Bt(1),nn("ngIf",o._hasIconPrefix),Bt(1),nn("ngIf",o._hasTextPrefix),Bt(2),nn("ngIf",!o._hasOutline()||o._forceDisplayInfixLabel()),Bt(2),nn("ngIf",o._hasTextSuffix),Bt(1),nn("ngIf",o._hasIconSuffix),Bt(1),nn("ngIf",!o._hasOutline()),Bt(1),ps("mat-mdc-form-field-subscript-dynamic-size","dynamic"===o.subscriptSizing),nn("ngSwitch",o._getDisplayedMessages()),Bt(1),nn("ngSwitchCase","error"),Bt(1),nn("ngSwitchCase","hint"))},dependencies:[h_,ow,ZA,ey,J7,mU,Nm,$5,J5],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required::after,.mdc-floating-label--required[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[RH.transitionMessages]},changeDetection:0}),n})(),x_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[ts,Uo,Fj,ts]}),n})();class kH{constructor(t=!1,e,o=!0,d){this._multiple=t,this._emitChanges=o,this.compareWith=d,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new yt,e&&e.length&&(t?e.forEach(f=>this._markSelected(f)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(o=>this._markSelected(o));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(o=>this._unmarkSelected(o));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,o=new Set(t);t.forEach(f=>this._markSelected(f)),e.filter(f=>!o.has(f)).forEach(f=>this._unmarkSelected(f));const d=this._hasQueuedChanges();return this._emitChangeEvent(),d}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}function tk(n,t){return Ge((e,o)=>{let d=null,f=0,b=!1;const y=()=>b&&!d&&o.complete();e.subscribe(new Re(o,w=>{d?.unsubscribe();let k=0;const Q=f++;dn(n(w,Q)).subscribe(d=new Re(o,ie=>o.next(t?t(w,ie,Q,k++):ie),()=>{d=null,y()}))},()=>{b=!0,y()}))})}const NH=["trigger"],u8=["panel"];function xH(n,t){if(1&n&&(jt(0,"span",10),mn(1),Wt()),2&n){const e=ur();Bt(1),Gd(e.placeholder)}}function AU(n,t){if(1&n&&(jt(0,"span",14),mn(1),Wt()),2&n){const e=ur(2);Bt(1),Gd(e.triggerValue)}}function nk(n,t){1&n&&Lo(0,0,["*ngSwitchCase","true"])}function LH(n,t){1&n&&(jt(0,"span",11),bn(1,AU,2,1,"span",12),bn(2,nk,1,0,"ng-content",13),Wt()),2&n&&(nn("ngSwitch",!!ur().customTrigger),Bt(2),nn("ngSwitchCase",!0))}function Cx(n,t){if(1&n){const e=wu();Es(),ng(),jt(0,"div",15,16),zi("@transformPanel.done",function(d){return da(e),io(ur()._panelDoneAnimatingStream.next(d.toState))})("keydown",function(d){return da(e),io(ur()._handleKeydown(d))}),Lo(2,1),Wt()}if(2&n){const e=ur();iR("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),nn("ngClass",e.panelClass)("@transformPanel","showing"),Li("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const yU=[[["mat-select-trigger"]],"*"],l8=["mat-select-trigger","*"],BH={transformPanelWrap:Dm("transformPanelWrap",[af("* => void",H9("@transformPanel",[Q9()],{optional:!0}))]),transformPanel:Dm("transformPanel",[Il("void",oc({opacity:0,transform:"scale(1, 0.8)"})),af("void => showing",km("120ms cubic-bezier(0, 0, 0.2, 1)",oc({opacity:1,transform:"scale(1, 1)"}))),af("* => void",km("100ms linear",oc({opacity:0})))])};let Ix=0;const wx=new tn("mat-select-scroll-strategy"),Tx=new tn("MAT_SELECT_CONFIG"),bU={provide:wx,deps:[Ey],useFactory:function EU(n){return()=>n.scrollStrategies.reposition()}},FH=new tn("MatSelectTrigger");class SU{constructor(t,e){this.source=t,this.value=e}}const h8=XN(e5(ND(D3(class{constructor(n,t,e,o,d){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=o,this.ngControl=d,this.stateChanges=new yt}}))));let CU=(()=>{class n extends h8{constructor(e,o,d,f,b,y,w,k,Q,ie,Ie,ke,je,at){super(b,f,w,k,ie),this._viewportRuler=e,this._changeDetectorRef=o,this._ngZone=d,this._dir=y,this._parentFormField=Q,this._liveAnnouncer=je,this._defaultOptions=at,this._panelOpen=!1,this._compareWith=(Vt,Qt)=>Vt===Qt,this._uid="mat-select-"+Ix++,this._triggerAriaLabelledBy=null,this._destroy=new yt,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Ix++,this._panelDoneAnimatingStream=new yt,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=function c8(n){return new qe(t=>{dn(n()).subscribe(t)})}(()=>{const Vt=this.options;return Vt?Vt.changes.pipe(Tw(Vt),tk(()=>bi(...Vt.map(Qt=>Qt.onSelectionChange)))):this._ngZone.onStable.pipe(Rl(1),tk(()=>this.optionSelectionChanges))}),this.openedChange=new Qi,this._openedStream=this.openedChange.pipe(rf(Vt=>Vt),Xe(()=>{})),this._closedStream=this.openedChange.pipe(rf(Vt=>!Vt),Xe(()=>{})),this.selectionChange=new Qi,this.valueChange=new Qi,this.ngControl&&(this.ngControl.valueAccessor=this),null!=at?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=at.typeaheadDebounceInterval),this._scrollStrategyFactory=ke,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Ie)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(gw.required)??!1}set required(e){this._required=ca(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=ca(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=ca(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=R_(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new kH(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(xj(),hu(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(hu(this._destroy)).subscribe(e=>{e.added.forEach(o=>o.select()),e.removed.forEach(o=>o.deselect())}),this.options.changes.pipe(Tw(null),hu(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),o=this.ngControl;if(e!==this._triggerAriaLabelledBy){const d=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?d.setAttribute("aria-labelledby",e):d.removeAttribute("aria-labelledby")}o&&(this._previousControl!==o.control&&(void 0!==this._previousControl&&null!==o.disabled&&o.disabled!==this.disabled&&(this.disabled=o.disabled),this._previousControl=o.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(o=>o.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const o=e.keyCode,d=40===o||38===o||37===o||39===o,f=13===o||32===o,b=this._keyManager;if(!b.isTyping()&&f&&!ww(e)||(this.multiple||e.altKey)&&d)e.preventDefault(),this.open();else if(!this.multiple){const y=this.selected;b.onKeydown(e);const w=this.selected;w&&y!==w&&this._liveAnnouncer.announce(w.viewValue,1e4)}}_handleOpenKeydown(e){const o=this._keyManager,d=e.keyCode,f=40===d||38===d,b=o.isTyping();if(f&&e.altKey)e.preventDefault(),this.close();else if(b||13!==d&&32!==d||!o.activeItem||ww(e))if(!b&&this._multiple&&65===d&&e.ctrlKey){e.preventDefault();const y=this.options.some(w=>!w.disabled&&!w.selected);this.options.forEach(w=>{w.disabled||(y?w.select():w.deselect())})}else{const y=o.activeItemIndex;o.onKeydown(e),this._multiple&&f&&e.shiftKey&&o.activeItem&&o.activeItemIndex!==y&&o.activeItem._selectViaInteraction()}else e.preventDefault(),o.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Rl(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(o=>o.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(o=>this._selectOptionByValue(o)),this._sortValues();else{const o=this._selectOptionByValue(e);o?this._keyManager.updateActiveItem(o):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const o=this.options.find(d=>{if(this._selectionModel.isSelected(d))return!1;try{return null!=d.value&&this._compareWith(d.value,e)}catch{return!1}});return o&&this._selectionModel.select(o),o}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new jj(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=bi(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(hu(e)).subscribe(o=>{this._onSelect(o.source,o.isUserInput),o.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),bi(...this.options.map(o=>o._stateChanges)).pipe(hu(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,o){const d=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(d!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),o&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),o&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),d!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((o,d)=>this.sortComparator?this.sortComparator(o,d,e):e.indexOf(o)-e.indexOf(d)),this.stateChanges.next()}}_propagateChanges(e){let o=null;o=this.multiple?this.selected.map(d=>d.value):this.selected?this.selected.value:e,this._value=o,this.valueChange.emit(o),this._onChange(o),this.selectionChange.emit(this._getChangeEvent(o)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let o=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(o+=" "+this.ariaLabelledby),o}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(vt(K3),vt(Jl),vt(Qr),vt(k3),vt(yi),vt(DS,8),vt(gD,8),vt(yw,8),vt(Sx,8),vt(gs,10),wf("tabindex"),vt(wx),vt(MD),vt(Tx,8))},n.\u0275dir=Gn({type:n,viewQuery:function(e,o){if(1&e&&(ma(NH,5),ma(u8,5),ma(Z3,5)),2&e){let d;Yi(d=li())&&(o.trigger=d.first),Yi(d=li())&&(o.panel=d.first),Yi(d=li())&&(o._overlayDir=d.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[yr,Pl]}),n})(),IU=(()=>{class n extends CU{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}]}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(hu(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const o=this.options.toArray()[e];if(o){const d=this.panel.nativeElement,f=function x3(n,t,e){if(e.length){let o=t.toArray(),d=e.toArray(),f=0;for(let b=0;b<n+1;b++)o[b].group&&o[b].group===d[f]&&f++;return f}return 0}(e,this.options,this.optionGroups),b=o._getHostElement();d.scrollTop=0===e&&1===f?0:function k9(n,t,e,o){return n<e?n:n+t>e+o?Math.max(0,n-o+t):e}(b.offsetTop,b.offsetHeight,d.scrollTop,d.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new SU(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof hx?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}}return n.\u0275fac=function(){let t;return function(o){return(t||(t=ss(n)))(o||n)}}(),n.\u0275cmp=Ls({type:n,selectors:[["mat-select"]],contentQueries:function(e,o,d){if(1&e&&(kc(d,FH,5),kc(d,N3,5),kc(d,ex,5)),2&e){let f;Yi(f=li())&&(o.customTrigger=f.first),Yi(f=li())&&(o.options=f),Yi(f=li())&&(o.optionGroups=f)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,o){1&e&&zi("keydown",function(f){return o._handleKeydown(f)})("focus",function(){return o._onFocus()})("blur",function(){return o._onBlur()}),2&e&&(Li("id",o.id)("tabindex",o.tabIndex)("aria-controls",o.panelOpen?o.id+"-panel":null)("aria-expanded",o.panelOpen)("aria-label",o.ariaLabel||null)("aria-required",o.required.toString())("aria-disabled",o.disabled.toString())("aria-invalid",o.errorState)("aria-activedescendant",o._getAriaActiveDescendant()),ps("mat-mdc-select-disabled",o.disabled)("mat-mdc-select-invalid",o.errorState)("mat-mdc-select-required",o.required)("mat-mdc-select-empty",o.empty)("mat-mdc-select-multiple",o.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[ho([{provide:vU,useExisting:n},{provide:MS,useExisting:n}]),yr],ngContentSelectors:l8,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,o){if(1&e&&(xo(yU),jt(0,"div",0,1),zi("click",function(){return o.toggle()}),jt(3,"div",2),bn(4,xH,2,1,"span",3),bn(5,LH,3,2,"span",4),Wt(),jt(6,"div",5)(7,"div",6),Es(),jt(8,"svg",7),Ti(9,"path",8),Wt()()()(),bn(10,Cx,3,9,"ng-template",9),zi("backdropClick",function(){return o.close()})("attach",function(){return o._onAttached()})("detach",function(){return o.close()})),2&e){const d=ll(1);Li("aria-owns",o.panelOpen?o.id+"-panel":null),Bt(3),nn("ngSwitch",o.empty),Li("id",o._valueId),Bt(1),nn("ngSwitchCase",!0),Bt(1),nn("ngSwitchCase",!1),Bt(5),nn("cdkConnectedOverlayPanelClass",o._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",o._scrollStrategy)("cdkConnectedOverlayOrigin",o._preferredOverlayOrigin||d)("cdkConnectedOverlayOpen",o.panelOpen)("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayWidth",o._overlayWidth)}},dependencies:[iS,ZA,ey,qO,Z3,hx],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[BH.transformPanel]},changeDetection:0}),n})(),VH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({providers:[bU],imports:[Uo,eU,tx,ts,WD,x_,tx,ts]}),n})();const Rx=rc({passive:!0});let jH=(()=>{class n{constructor(e,o){this._platform=e,this._ngZone=o,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Pn;const o=Om(e),d=this._monitoredElements.get(o);if(d)return d.subject;const f=new yt,b="cdk-text-field-autofilled",y=w=>{"cdk-text-field-autofill-start"!==w.animationName||o.classList.contains(b)?"cdk-text-field-autofill-end"===w.animationName&&o.classList.contains(b)&&(o.classList.remove(b),this._ngZone.run(()=>f.next({target:w.target,isAutofilled:!1}))):(o.classList.add(b),this._ngZone.run(()=>f.next({target:w.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{o.addEventListener("animationstart",y,Rx),o.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(o,{subject:f,unlisten:()=>{o.removeEventListener("animationstart",y,Rx)}}),f}stopMonitoring(e){const o=Om(e),d=this._monitoredElements.get(o);d&&(d.unlisten(),d.subject.complete(),o.classList.remove("cdk-text-field-autofill-monitored"),o.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(o))}ngOnDestroy(){this._monitoredElements.forEach((e,o)=>this.stopMonitoring(o))}}return n.\u0275fac=function(e){return new(e||n)(qt(Vc),qt(Qr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),m8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({}),n})();const GH=new tn("MAT_INPUT_VALUE_ACCESSOR"),g8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let ik=0;const WH=D3(class{constructor(n,t,e,o){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=o,this.stateChanges=new yt}});let _8=(()=>{class n extends WH{constructor(e,o,d,f,b,y,w,k,Q,ie){super(y,f,b,d),this._elementRef=e,this._platform=o,this._autofillMonitor=k,this._formField=ie,this._uid="mat-input-"+ik++,this.focused=!1,this.stateChanges=new yt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(je=>nf().has(je)),this._iOSKeyupListener=je=>{const at=je.target;!at.value&&0===at.selectionStart&&0===at.selectionEnd&&(at.setSelectionRange(1,1),at.setSelectionRange(0,0))};const Ie=this._elementRef.nativeElement,ke=Ie.nodeName.toLowerCase();this._inputValueAccessor=w||Ie,this._previousNativeValue=this.value,this.id=this.id,o.IOS&&Q.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ke,this._isTextarea="textarea"===ke,this._isInFormField=!!ie,this._isNativeSelect&&(this.controlType=Ie.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this._disabled}set disabled(e){this._disabled=ca(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(gw.required)??!1}set required(e){this._required=ca(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&nf().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=ca(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const o=this._elementRef.nativeElement;this._previousPlaceholder=e,e?o.setAttribute("placeholder",e):o.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){g8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,o=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&o&&o.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Vc),vt(gs,10),vt(gD,8),vt(yw,8),vt(k3),vt(GH,10),vt(jH),vt(Qr),vt(Sx,8))},n.\u0275dir=Gn({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,o){1&e&&zi("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),2&e&&(nm("id",o.id)("disabled",o.disabled)("required",o.required),Li("name",o.name||null)("readonly",o.readonly&&!o._isNativeSelect||null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required)("id",o.id),ps("mat-input-server",o._isServer)("mat-mdc-form-field-textarea-control",o._isInFormField&&o._isTextarea)("mat-mdc-form-field-input-control",o._isInFormField)("mdc-text-field__input",o._isInFormField)("mat-mdc-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[ho([{provide:vU,useExisting:n}]),yr,Pl]}),n})(),mu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[ts,x_,x_,m8,ts]}),n})();function wU(n){return Ge((t,e)=>{let f,o=null,d=!1;o=t.subscribe(new Re(e,void 0,void 0,b=>{f=dn(n(b,wU(n)(t))),o?(o.unsubscribe(),o=null,f.subscribe(e)):d=!0})),d&&(o.unsubscribe(),o=null,f.subscribe(e))})}const zH=["*"];let Ox;function Kw(n){return function TU(){if(void 0===Ox&&(Ox=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Ox=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Ox}()?.createHTML(n)||n}function RU(n){return Error(`Unable to find icon with the name "${n}"`)}function OU(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function DU(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class BS{constructor(t,e,o){this.url=t,this.svgText=e,this.options=o}}let Dx=(()=>{class n{constructor(e,o,d,f){this._httpClient=e,this._sanitizer=o,this._errorHandler=f,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=d}addSvgIcon(e,o,d){return this.addSvgIconInNamespace("",e,o,d)}addSvgIconLiteral(e,o,d){return this.addSvgIconLiteralInNamespace("",e,o,d)}addSvgIconInNamespace(e,o,d,f){return this._addSvgIconConfig(e,o,new BS(d,null,f))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,o,d,f){const b=this._sanitizer.sanitize(wi.HTML,d);if(!b)throw DU(d);const y=Kw(b);return this._addSvgIconConfig(e,o,new BS("",y,f))}addSvgIconSet(e,o){return this.addSvgIconSetInNamespace("",e,o)}addSvgIconSetLiteral(e,o){return this.addSvgIconSetLiteralInNamespace("",e,o)}addSvgIconSetInNamespace(e,o,d){return this._addSvgIconSetConfig(e,new BS(o,null,d))}addSvgIconSetLiteralInNamespace(e,o,d){const f=this._sanitizer.sanitize(wi.HTML,o);if(!f)throw DU(o);const b=Kw(f);return this._addSvgIconSetConfig(e,new BS("",b,d))}registerFontClassAlias(e,o=e){return this._fontCssClassesByAlias.set(e,o),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const o=this._sanitizer.sanitize(wi.RESOURCE_URL,e);if(!o)throw OU(e);const d=this._cachedIconsByUrl.get(o);return d?bl(ok(d)):this._loadSvgIconFromConfig(new BS(e,null)).pipe(MN(f=>this._cachedIconsByUrl.set(o,f)),Xe(f=>ok(f)))}getNamedSvgIcon(e,o=""){const d=E8(o,e);let f=this._svgIconConfigs.get(d);if(f)return this._getSvgFromConfig(f);if(f=this._getIconConfigFromResolvers(o,e),f)return this._svgIconConfigs.set(d,f),this._getSvgFromConfig(f);const b=this._iconSetConfigs.get(o);return b?this._getSvgFromIconSetConfigs(e,b):function KH(n,t){const e=U(n)?n:()=>n,o=d=>d.error(e());return new qe(t?d=>t.schedule(o,0,d):o)}(RU(d))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?bl(ok(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Xe(o=>ok(o)))}_getSvgFromIconSetConfigs(e,o){const d=this._extractIconWithNameFromAnySet(e,o);return d?bl(d):vF(o.filter(b=>!b.svgText).map(b=>this._loadSvgIconSetFromConfig(b).pipe(wU(y=>{const k=`Loading icon set URL: ${this._sanitizer.sanitize(wi.RESOURCE_URL,b.url)} failed: ${y.message}`;return this._errorHandler.handleError(new Error(k)),bl(null)})))).pipe(Xe(()=>{const b=this._extractIconWithNameFromAnySet(e,o);if(!b)throw RU(e);return b}))}_extractIconWithNameFromAnySet(e,o){for(let d=o.length-1;d>=0;d--){const f=o[d];if(f.svgText&&f.svgText.toString().indexOf(e)>-1){const b=this._svgElementFromConfig(f),y=this._extractSvgIconFromSet(b,e,f.options);if(y)return y}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(MN(o=>e.svgText=o),Xe(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?bl(null):this._fetchIcon(e).pipe(MN(o=>e.svgText=o))}_extractSvgIconFromSet(e,o,d){const f=e.querySelector(`[id="${o}"]`);if(!f)return null;const b=f.cloneNode(!0);if(b.removeAttribute("id"),"svg"===b.nodeName.toLowerCase())return this._setSvgAttributes(b,d);if("symbol"===b.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(b),d);const y=this._svgElementFromString(Kw("<svg></svg>"));return y.appendChild(b),this._setSvgAttributes(y,d)}_svgElementFromString(e){const o=this._document.createElement("DIV");o.innerHTML=e;const d=o.querySelector("svg");if(!d)throw Error("<svg> tag not found");return d}_toSvgElement(e){const o=this._svgElementFromString(Kw("<svg></svg>")),d=e.attributes;for(let f=0;f<d.length;f++){const{name:b,value:y}=d[f];"id"!==b&&o.setAttribute(b,y)}for(let f=0;f<e.childNodes.length;f++)e.childNodes[f].nodeType===this._document.ELEMENT_NODE&&o.appendChild(e.childNodes[f].cloneNode(!0));return o}_setSvgAttributes(e,o){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),o&&o.viewBox&&e.setAttribute("viewBox",o.viewBox),e}_fetchIcon(e){const{url:o,options:d}=e,f=d?.withCredentials??!1;if(!this._httpClient)throw function A8(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==o)throw Error(`Cannot fetch icon from URL "${o}".`);const b=this._sanitizer.sanitize(wi.RESOURCE_URL,o);if(!b)throw OU(o);const y=this._inProgressUrlFetches.get(b);if(y)return y;const w=this._httpClient.get(b,{responseType:"text",withCredentials:f}).pipe(Xe(k=>Kw(k)),function v8(n){return Ge((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}(()=>this._inProgressUrlFetches.delete(b)),uT());return this._inProgressUrlFetches.set(b,w),w}_addSvgIconConfig(e,o,d){return this._svgIconConfigs.set(E8(e,o),d),this}_addSvgIconSetConfig(e,o){const d=this._iconSetConfigs.get(e);return d?d.push(o):this._iconSetConfigs.set(e,[o]),this}_svgElementFromConfig(e){if(!e.svgElement){const o=this._svgElementFromString(e.svgText);this._setSvgAttributes(o,e.options),e.svgElement=o}return e.svgElement}_getIconConfigFromResolvers(e,o){for(let d=0;d<this._resolvers.length;d++){const f=this._resolvers[d](o,e);if(f)return b8(f)?new BS(f.url,null,f.options):new BS(f,null)}}}return n.\u0275fac=function(e){return new(e||n)(qt(yN,8),qt(gF),qt(Yr,8),qt(Iu))},n.\u0275prov=kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ok(n){return n.cloneNode(!0)}function E8(n,t){return n+":"+t}function b8(n){return!(!n.url||!n.options)}const L_=$N(class{constructor(n){this._elementRef=n}}),YH=new tn("MAT_ICON_DEFAULT_OPTIONS"),qH=new tn("mat-icon-location",{providedIn:"root",factory:function JH(){const n=ac(Yr),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),S8=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],$H=S8.map(n=>`[${n}]`).join(", "),XH=/^url\(['"]?#(.*?)['"]?\)$/;let ZH=(()=>{class n extends L_{constructor(e,o,d,f,b,y){super(e),this._iconRegistry=o,this._location=f,this._errorHandler=b,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=j.EMPTY,y&&(y.color&&(this.color=this.defaultColor=y.color),y.fontSet&&(this.fontSet=y.fontSet)),d||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=ca(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const o=this._cleanupFontValue(e);o!==this._fontSet&&(this._fontSet=o,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const o=this._cleanupFontValue(e);o!==this._fontIcon&&(this._fontIcon=o,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const o=e.split(":");switch(o.length){case 1:return["",o[0]];case 2:return o;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const o=this._location.getPathname();o!==this._previousPath&&(this._previousPath=o,this._prependPathToReferences(o))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const o=this._location.getPathname();this._previousPath=o,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(o),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let o=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();o--;){const d=e.childNodes[o];(1!==d.nodeType||"svg"===d.nodeName.toLowerCase())&&d.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,o=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(d=>d.length>0);this._previousFontSetClass.forEach(d=>e.classList.remove(d)),o.forEach(d=>e.classList.add(d)),this._previousFontSetClass=o,this.fontIcon!==this._previousFontIconClass&&!o.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const o=this._elementsWithExternalReferences;o&&o.forEach((d,f)=>{d.forEach(b=>{f.setAttribute(b.name,`url('${e}#${b.value}')`)})})}_cacheChildrenWithExternalReferences(e){const o=e.querySelectorAll($H),d=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let f=0;f<o.length;f++)S8.forEach(b=>{const y=o[f],w=y.getAttribute(b),k=w?w.match(XH):null;if(k){let Q=d.get(y);Q||(Q=[],d.set(y,Q)),Q.push({name:b,value:k[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[o,d]=this._splitIconName(e);o&&(this._svgNamespace=o),d&&(this._svgName=d),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(d,o).pipe(Rl(1)).subscribe(f=>this._setSvgElement(f),f=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${o}:${d}! ${f.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Dx),wf("aria-hidden"),vt(qH),vt(Iu),vt(YH,8))},n.\u0275cmp=Ls({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,o){2&e&&(Li("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),ps("mat-icon-inline",o.inline)("mat-icon-no-color","primary"!==o.color&&"accent"!==o.color&&"warn"!==o.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[yr],ngContentSelectors:zH,decls:1,vars:0,template:function(e,o){1&e&&(xo(),Lo(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),eG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[ts,ts]}),n})();const C8=["determinateSpinner"];function tG(n,t){if(1&n&&(Es(),jt(0,"svg",11),Ti(1,"circle",12),Wt()),2&n){const e=ur();Li("viewBox",e._viewBox()),Bt(1),Bg("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),Li("r",e._circleRadius())}}const nG=$N(class{constructor(n){this._elementRef=n}},"primary"),rG=new tn("mat-progress-spinner-default-options",{providedIn:"root",factory:function iG(){return{diameter:I8}}}),I8=100;let oG=(()=>{class n extends nG{constructor(e,o,d){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=I8,this._noopAnimations="NoopAnimations"===o&&!!d&&!d._forceAnimations,d&&(d.color&&(this.color=this.defaultColor=d.color),d.diameter&&(this.diameter=d.diameter),d.strokeWidth&&(this.strokeWidth=d.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,R_(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=R_(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=R_(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(ep,8),vt(rG))},n.\u0275cmp=Ls({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,o){if(1&e&&ma(C8,5),2&e){let d;Yi(d=li())&&(o._determinateCircle=d.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,o){2&e&&(Li("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===o.mode?o.value:null)("mode",o.mode),Bg("width",o.diameter,"px")("height",o.diameter,"px"),ps("_mat-animation-noopable",o._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===o.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[yr],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,o){if(1&e&&(bn(0,tG,2,8,"ng-template",null,0,fI),jt(2,"div",1,2),Es(),jt(4,"svg",3),Ti(5,"circle",4),Wt()(),ng(),jt(6,"div",5)(7,"div",6)(8,"div",7),Yv(9,8),Wt(),jt(10,"div",9),Yv(11,8),Wt(),jt(12,"div",10),Yv(13,8),Wt()()()),2&e){const d=ll(1);Bt(4),Li("viewBox",o._viewBox()),Bt(1),Bg("stroke-dasharray",o._strokeCircumference(),"px")("stroke-dashoffset",o._strokeDashOffset(),"px")("stroke-width",o._circleStrokeWidth(),"%"),Li("r",o._circleRadius()),Bt(4),nn("ngTemplateOutlet",d),Bt(2),nn("ngTemplateOutlet",d),Bt(2),nn("ngTemplateOutlet",d)}},dependencies:[ow],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),n})(),zw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[Uo,ts]}),n})(),kx=0;const w8=ND(class{}),PU="mat-badge-content";let T8=(()=>{class n extends w8{constructor(e,o,d,f,b){super(),this._ngZone=e,this._elementRef=o,this._ariaDescriber=d,this._renderer=f,this._animationMode=b,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=kx++,this._isInitialized=!1}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=ca(e)}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateHostAriaDescription(e)}get hidden(){return this._hidden}set hidden(e){this._hidden=ca(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&this._renderer.destroyNode(this._badgeElement),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_createBadgeElement(){const e=this._renderer.createElement("span"),o="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(PU),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(o)})}):e.classList.add(o),e}_updateRenderedContent(e){const o=`${e??""}`.trim();this._isInitialized&&o&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=o),this._content=o}_updateHostAriaDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),e&&this._ariaDescriber.describe(this._elementRef.nativeElement,e),this._description=e}_setColor(e){const o=this._elementRef.nativeElement.classList;o.remove(`mat-badge-${this._color}`),e&&o.add(`mat-badge-${e}`)}_clearExistingBadges(){const e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${PU}`);for(const o of Array.from(e))o!==this._badgeElement&&o.remove()}}return n.\u0275fac=function(e){return new(e||n)(vt(Qr),vt(yi),vt(v3),vt(sl),vt(ep,8))},n.\u0275dir=Gn({type:n,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,o){2&e&&ps("mat-badge-overlap",o.overlap)("mat-badge-above",o.isAbove())("mat-badge-below",!o.isAbove())("mat-badge-before",!o.isAfter())("mat-badge-after",o.isAfter())("mat-badge-small","small"===o.size)("mat-badge-medium","medium"===o.size)("mat-badge-large","large"===o.size)("mat-badge-hidden",o.hidden||!o.content)("mat-badge-disabled",o.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[yr]}),n})(),R8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[zj,ts,ts]}),n})();function MU(n,t){return t?e=>FN(t.pipe(Rl(1),function O8(){return Ge((n,t)=>{n.subscribe(new Re(t,ue))})}()),e.pipe(MU(n))):_u((e,o)=>n(e,o).pipe(Rl(1),function D8(n){return Xe(()=>n)}(e)))}function NU(n,t=f3){const e=v5(n,t);return MU(()=>e)}const k8=["mat-menu-item",""];function P8(n,t){1&n&&(Es(),jt(0,"svg",3),Ti(1,"polygon",4),Wt())}const M8=[[["mat-icon"]],"*"],N8=["mat-icon","*"];function x8(n,t){if(1&n){const e=wu();jt(0,"div",0),zi("keydown",function(d){return da(e),io(ur()._handleKeydown(d))})("click",function(){return da(e),io(ur().closed.emit("click"))})("@transformMenu.start",function(d){return da(e),io(ur()._onAnimationStart(d))})("@transformMenu.done",function(d){return da(e),io(ur()._onAnimationDone(d))}),jt(1,"div",1),Lo(2),Wt()()}if(2&n){const e=ur();nn("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),Li("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const L8=["*"],Px=new tn("MAT_MENU_PANEL"),B8=XN(ND(class{}));let Vi=(()=>{class n extends B8{constructor(e,o,d,f,b){super(),this._elementRef=e,this._document=o,this._focusMonitor=d,this._parentMenu=f,this._changeDetectorRef=b,this.role="menuitem",this._hovered=new yt,this._focused=new yt,this._highlighted=!1,this._triggersSubmenu=!1,f?.addItem?.(this)}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),o=e.querySelectorAll("mat-icon, .material-icons");for(let d=0;d<o.length;d++)o[d].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Yr),vt(WN),vt(Px,8),vt(Jl))},n.\u0275cmp=Ls({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,o){1&e&&zi("click",function(f){return o._checkDisabled(f)})("mouseenter",function(){return o._handleMouseEnter()}),2&e&&(Li("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled)("disabled",o.disabled||null),ps("mat-mdc-menu-item-highlighted",o._highlighted)("mat-mdc-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[yr],attrs:k8,ngContentSelectors:N8,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,o){1&e&&(xo(M8),Lo(0),jt(1,"span",0),Lo(2,1),Wt(),Ti(3,"div",1),bn(4,P8,2,0,"svg",2)),2&e&&(Bt(3),nn("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()),Bt(1),nn("ngIf",o._triggersSubmenu))},dependencies:[h_,kw],encapsulation:2,changeDetection:0}),n})();const F8=new tn("MatMenuContent"),pp={transformMenu:Dm("transformMenu",[Il("void",oc({opacity:0,transform:"scale(0.8)"})),af("void => enter",km("120ms cubic-bezier(0, 0, 0.2, 1)",oc({opacity:1,transform:"scale(1)"}))),af("* => void",km("100ms 25ms linear",oc({opacity:0})))]),fadeInItems:Dm("fadeInItems",[Il("showing",oc({opacity:1})),af("void => *",[oc({opacity:0}),km("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Yw=0;const Ns=new tn("mat-menu-default-options",{providedIn:"root",factory:function U8(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let sk=(()=>{class n{constructor(e,o,d,f){this._elementRef=e,this._ngZone=o,this._defaultOptions=d,this._changeDetectorRef=f,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new ku,this._classList={},this._panelAnimationState="void",this._animationDone=new yt,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Qi,this.close=this.closed,this.panelId="mat-menu-panel-"+Yw++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=ca(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ca(e)}set panelClass(e){const o=this._previousPanelClass;o&&o.length&&o.split(" ").forEach(d=>{this._classList[d]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(d=>{this._classList[d]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new HN(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Tw(this._directDescendantItems),tk(e=>bi(...e.map(o=>o._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const o=this._keyManager;if("enter"===this._panelAnimationState&&o.activeItem?._hasFocus()){const d=e.toArray(),f=Math.max(0,Math.min(d.length-1,o.activeItemIndex||0));d[f]&&!d[f].disabled?o.setActiveItem(f):o.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(Tw(this._directDescendantItems),tk(o=>bi(...o.map(d=>d._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const o=e.keyCode,d=this._keyManager;switch(o){case 27:ww(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===o||40===o)&&d.setFocusOrigin("keyboard"),void d.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Rl(1)).subscribe(()=>{let o=null;if(this._directDescendantItems.length&&(o=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!o||!o.contains(document.activeElement)){const d=this._keyManager;d.setFocusOrigin(e).setFirstItemActive(),!d.activeItem&&o&&o.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const o=Math.min(this._baseElevation+e,24),d=`${this._elevationPrefix}${o}`,f=Object.keys(this._classList).find(b=>b.startsWith(this._elevationPrefix));(!f||f===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[d]=!0,this._previousElevation=d)}setPositionClasses(e=this.xPosition,o=this.yPosition){const d=this._classList;d["mat-menu-before"]="before"===e,d["mat-menu-after"]="after"===e,d["mat-menu-above"]="above"===o,d["mat-menu-below"]="below"===o,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Tw(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(o=>o._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Qr),vt(Ns),vt(Jl))},n.\u0275dir=Gn({type:n,contentQueries:function(e,o,d){if(1&e&&(kc(d,F8,5),kc(d,Vi,5),kc(d,Vi,4)),2&e){let f;Yi(f=li())&&(o.lazyContent=f.first),Yi(f=li())&&(o._allItems=f),Yi(f=li())&&(o.items=f)}},viewQuery:function(e,o){if(1&e&&ma(pl,5),2&e){let d;Yi(d=li())&&(o.templateRef=d.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),fG=(()=>{class n extends sk{constructor(e,o,d,f){super(e,o,d,f),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return n.\u0275fac=function(e){return new(e||n)(vt(yi),vt(Qr),vt(Ns),vt(Jl))},n.\u0275cmp=Ls({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,o){2&e&&Li("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[ho([{provide:Px,useExisting:n}]),yr],ngContentSelectors:L8,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,o){1&e&&(xo(),bn(0,x8,3,6,"ng-template"))},dependencies:[iS],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[pp.transformMenu,pp.fadeInItems]},changeDetection:0}),n})();const Mx=new tn("mat-menu-scroll-strategy"),gG={provide:Mx,deps:[Ey],useFactory:function mG(n){return()=>n.scrollStrategies.reposition()}},V8=rc({passive:!0});let _G=(()=>{class n{constructor(e,o,d,f,b,y,w,k,Q){this._overlay=e,this._element=o,this._viewContainerRef=d,this._menuItemInstance=y,this._dir=w,this._focusMonitor=k,this._ngZone=Q,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=j.EMPTY,this._hoverSubscription=j.EMPTY,this._menuCloseSubscription=j.EMPTY,this._handleTouchStart=ie=>{_y(ie)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Qi,this.onMenuOpen=this.menuOpened,this.menuClosed=new Qi,this.onMenuClose=this.menuClosed,this._scrollStrategy=f,this._parentMaterialMenu=b instanceof sk?b:void 0,o.nativeElement.addEventListener("touchstart",this._handleTouchStart,V8)}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(o=>{this._destroyMenu(o),("click"===o||"tab"===o)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(o)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,V8),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const o=this._createOverlay(e),d=o.getConfig(),f=d.positionStrategy;this._setPosition(e,f),d.hasBackdrop=e.hasBackdrop??!this.triggersSubmenu(),o.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof sk&&(e._startAnimation(),e._directDescendantItems.changes.pipe(hu(e.close)).subscribe(()=>{f.withLockedPosition(!1).reapplyLastPosition(),f.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,o):this._element.nativeElement.focus(o)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const o=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,o instanceof sk?(o._resetAnimation(),o.lazyContent?o._animationDone.pipe(rf(d=>"void"===d.toState),Rl(1),hu(o.lazyContent._attached)).subscribe({next:()=>o.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),o?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let o=0,d=e.parentMenu;for(;d;)o++,d=d.parentMenu;e.setElevation(o)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_createOverlay(e){if(!this._overlayRef){const o=this._getOverlayConfig(e);this._subscribeToPositions(e,o.positionStrategy),this._overlayRef=this._overlay.create(o),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new KD({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,o){e.setPositionClasses&&o.positionChanges.subscribe(d=>{const f="start"===d.connectionPair.overlayX?"after":"before",b="top"===d.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(f,b)):e.setPositionClasses(f,b)})}_setPosition(e,o){let[d,f]="before"===e.xPosition?["end","start"]:["start","end"],[b,y]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[w,k]=[b,y],[Q,ie]=[d,f],Ie=0;if(this.triggersSubmenu()){if(ie=d="before"===e.xPosition?"start":"end",f=Q="end"===d?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const ke=this._parentMaterialMenu.items.first;this._parentInnerPadding=ke?ke._getHostElement().offsetTop:0}Ie="bottom"===b?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(w="top"===b?"bottom":"top",k="top"===y?"bottom":"top");o.withPositions([{originX:d,originY:w,overlayX:Q,overlayY:b,offsetY:Ie},{originX:f,originY:w,overlayX:ie,overlayY:b,offsetY:Ie},{originX:d,originY:k,overlayX:Q,overlayY:y,offsetY:-Ie},{originX:f,originY:k,overlayX:ie,overlayY:y,offsetY:-Ie}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),o=this._overlayRef.detachments();return bi(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:bl(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(rf(b=>b!==this._menuItemInstance),rf(()=>this._menuOpen)):bl(),o)}_handleMousedown(e){fu(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const o=e.keyCode;(13===o||32===o)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===o&&"ltr"===this.dir||37===o&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(rf(e=>e===this._menuItemInstance&&!e.disabled),NU(0,cx)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof sk&&this.menu._isAnimating?this.menu._animationDone.pipe(Rl(1),NU(0,cx),hu(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new VD(e.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(vt(Ey),vt(yi),vt(Oc),vt(Mx),vt(Px,8),vt(Vi,10),vt(DS,8),vt(WN),vt(Qr))},n.\u0275dir=Gn({type:n,hostVars:3,hostBindings:function(e,o){1&e&&zi("click",function(f){return o._handleClick(f)})("mousedown",function(f){return o._handleMousedown(f)})("keydown",function(f){return o._handleKeydown(f)}),2&e&&Li("aria-haspopup",o.menu?"menu":null)("aria-expanded",o.menuOpen)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),vG=(()=>{class n extends _G{}return n.\u0275fac=function(){let t;return function(o){return(t||(t=ss(n)))(o||n)}}(),n.\u0275dir=Gn({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[yr]}),n})(),AG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({providers:[gG],imports:[Uo,Cl,ts,eU,WD,ts]}),n})();class Nx{transform(t,...e){return Array.from(t,([o,d])=>({name:o,value:d}))}static#e=this.\u0275fac=function(e){return new(e||Nx)};static#t=this.\u0275pipe=Sa({name:"twilio",type:Nx,pure:!1})}function yG(n,t){1&n&&(jt(0,"mat-form-field",8)(1,"mat-label"),mn(2,"Geo Regions (Zoom only)"),Wt(),Ti(3,"input",19),jt(4,"mat-hint"),mn(5,"Comma separeted list of "),jt(6,"a",20),mn(7,"country codes"),Wt(),mn(8,"."),Wt(),jt(9,"mat-icon",14),mn(10,"public"),Wt()())}function EG(n,t){1&n&&(jt(0,"button",21)(1,"mat-icon"),mn(2,"login"),Wt()())}function bG(n,t){if(1&n){const e=wu();jt(0,"form",7),zi("ngSubmit",function(){da(e);const d=ur();return io(d.authorize(d.configForm.value))}),jt(1,"mat-form-field",8)(2,"mat-label"),mn(3,"Video SDK Provider"),Wt(),jt(4,"mat-select",9)(5,"mat-option",10),mn(6,"Zoom Video SDK"),Wt(),jt(7,"mat-option",11),mn(8,"Twilio Video SDK"),Wt(),jt(9,"mat-option",12),mn(10,"Agora Video SDK"),Wt()()(),jt(11,"mat-form-field",8)(12,"mat-label"),mn(13,"Your Name"),Wt(),Ti(14,"input",13),jt(15,"mat-icon",14),mn(16,"face"),Wt()(),jt(17,"mat-form-field",8)(18,"mat-label"),mn(19,"Session Name"),Wt(),Ti(20,"input",15),jt(21,"mat-icon",14),mn(22,"meeting_room"),Wt()(),jt(23,"mat-form-field",8)(24,"mat-label"),mn(25,"Session Passcode"),Wt(),Ti(26,"input",16),jt(27,"mat-icon",14),mn(28,"vpn_key"),Wt()(),bn(29,yG,11,0,"mat-form-field",17),bn(30,EG,3,0,"button",18),Wt()}if(2&n){const e=ur();nn("formGroup",e.configForm),Bt(29),nn("ngIf","zoom"===e.configForm.value.videoSDKProvider),Bt(1),nn("ngIf",!e.session)}}function Q8(n,t){if(1&n&&(jt(0,"div",22)(1,"h1"),mn(2),Wt()()),2&n){const e=ur();Bt(2),vi("",e.videoSDKProvider," Video SDK")}}function SG(n,t){if(1&n){const e=wu();jt(0,"button",27),zi("click",function(){return da(e),io(ur(2).startAudio())}),jt(1,"mat-icon"),mn(2,"volume_off"),Wt()()}}function CG(n,t){if(1&n){const e=wu();jt(0,"button",27),zi("click",function(){return da(e),io(ur(2).mute())}),jt(1,"mat-icon"),mn(2,"mic"),Wt()()}}function IG(n,t){if(1&n){const e=wu();jt(0,"button",27),zi("click",function(){return da(e),io(ur(2).unmute())}),jt(1,"mat-icon"),mn(2,"mic_off"),Wt()()}}function H8(n,t){if(1&n){const e=wu();jt(0,"button",27),zi("click",function(){return da(e),io(ur(2).stopCamera())}),jt(1,"mat-icon"),mn(2,"videocam"),Wt()()}}function G8(n,t){if(1&n){const e=wu();jt(0,"button",27),zi("click",function(){return da(e),io(ur(2).startCamera())}),jt(1,"mat-icon"),mn(2,"videocam_off"),Wt()()}}function W8(n,t){if(1&n&&(jt(0,"button",31),mn(1),Wt()),2&n){const e=t.$implicit;Bt(1),Gd(e.displayName)}}function K8(n,t){if(1&n&&(wc(0),jt(1,"button",28)(2,"mat-icon"),mn(3,"people"),Wt()(),jt(4,"mat-menu",null,29),bn(6,W8,2,1,"button",30),Wt(),Na()),2&n){const e=ll(5),o=ur(2);Bt(1),nn("matMenuTriggerFor",e)("matBadge",o.zoomVideo.getAllUser().length),Bt(5),nn("ngForOf",o.zoomVideo.getAllUser())}}function wG(n,t){if(1&n&&(jt(0,"button",31),mn(1),Wt()),2&n){const e=t.$implicit;Bt(1),Gd(e.value.identity)}}function TG(n,t){if(1&n&&(wc(0),jt(1,"button",28)(2,"mat-icon"),mn(3,"people"),Wt()(),jt(4,"mat-menu",null,29)(6,"button",31),mn(7),Wt(),bn(8,wG,2,1,"button",30),function KM(n,t){const e=Pi();let o;const d=n+22;e.firstCreatePass?(o=function jR(n,t){if(t)for(let e=t.length-1;e>=0;e--){const o=t[e];if(n===o.name)return o}}(t,e.pipeRegistry),e.data[d]=o,o.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(d,o.onDestroy)):o=e.data[d];const f=o.factory||(o.factory=Af(o.type)),b=kl(vt);try{const y=Nl(!1),w=f();return Nl(y),function eb(n,t,e,o){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=o}(e,vn(),d,w),w}finally{kl(b)}}(9,"twilio"),Wt(),Na()),2&n){const e=ll(5),o=ur(2);Bt(1),nn("matMenuTriggerFor",e)("matBadge",o.twilioSession.participants.size+1),Bt(6),Gd(o.twilioSession.localParticipant.identity),Bt(1),nn("ngForOf",QR(9,4,o.twilioSession.participants))}}function RG(n,t){if(1&n&&(jt(0,"button",31),mn(1),Wt()),2&n){const e=t.$implicit;Bt(1),Gd(e.uid)}}function z8(n,t){if(1&n&&(wc(0),jt(1,"button",28)(2,"mat-icon"),mn(3,"people"),Wt()(),jt(4,"mat-menu",null,29)(6,"button",31),mn(7),Wt(),bn(8,RG,2,1,"button",30),Wt(),Na()),2&n){const e=ll(5),o=ur(2);Bt(1),nn("matMenuTriggerFor",e)("matBadge",o.agoraClient.remoteUsers.length+1),Bt(6),Gd(o.configForm.value.yourName),Bt(1),nn("ngForOf",o.agoraClient.remoteUsers)}}function OG(n,t){if(1&n&&(jt(0,"ul")(1,"li"),mn(2),Wt()()),2&n){const e=ur(3);Bt(2),vi("",e.zoomNetworkQosUplink.level," / 5")}}function DG(n,t){if(1&n&&(jt(0,"ul")(1,"li"),mn(2),Wt()()),2&n){const e=ur(3);Bt(2),vi("",e.zoomNetworkQosDownlink.level," / 5")}}function Y8(n,t){if(1&n&&(jt(0,"ul")(1,"li"),mn(2),Wt(),jt(3,"li"),mn(4),Wt(),jt(5,"li"),mn(6),Wt(),jt(7,"li"),mn(8),Wt(),jt(9,"li"),mn(10),Wt(),jt(11,"li"),mn(12),Wt(),jt(13,"li"),mn(14),Wt(),jt(15,"li"),mn(16),Wt()()),2&n){const e=ur(3);Bt(2),vi("avg_loss: ",e.zoomVideoQosSend.data.avg_loss,""),Bt(2),vi("jitter: ",e.zoomVideoQosSend.data.jitter,""),Bt(2),vi("max_loss: ",e.zoomVideoQosSend.data.max_loss,""),Bt(2),vi("rtt: ",e.zoomVideoQosSend.data.rtt,""),Bt(2),vi("sample_rate: ",e.zoomVideoQosSend.data.sample_rate,""),Bt(2),vi("width: ",e.zoomVideoQosSend.data.width,""),Bt(2),vi("height: ",e.zoomVideoQosSend.data.height,""),Bt(2),vi("fps: ",e.zoomVideoQosSend.data.fps,"")}}function kG(n,t){if(1&n&&(jt(0,"ul")(1,"li"),mn(2),Wt(),jt(3,"li"),mn(4),Wt(),jt(5,"li"),mn(6),Wt(),jt(7,"li"),mn(8),Wt(),jt(9,"li"),mn(10),Wt(),jt(11,"li"),mn(12),Wt(),jt(13,"li"),mn(14),Wt(),jt(15,"li"),mn(16),Wt()()),2&n){const e=ur(3);Bt(2),vi("avg_loss: ",e.zoomVideoQosReceive.data.avg_loss,""),Bt(2),vi("jitter: ",e.zoomVideoQosReceive.data.jitter,""),Bt(2),vi("max_loss: ",e.zoomVideoQosReceive.data.max_loss,""),Bt(2),vi("rtt: ",e.zoomVideoQosReceive.data.rtt,""),Bt(2),vi("sample_rate: ",e.zoomVideoQosReceive.data.sample_rate,""),Bt(2),vi("width: ",e.zoomVideoQosReceive.data.width,""),Bt(2),vi("height: ",e.zoomVideoQosReceive.data.height,""),Bt(2),vi("fps: ",e.zoomVideoQosReceive.data.fps,"")}}function q8(n,t){if(1&n&&(jt(0,"ul")(1,"li"),mn(2),Wt(),jt(3,"li"),mn(4),Wt(),jt(5,"li"),mn(6),Wt(),jt(7,"li"),mn(8),Wt(),jt(9,"li"),mn(10),Wt()()),2&n){const e=ur(3);Bt(2),vi("avg_loss: ",e.zoomAudioQosSend.data.avg_loss,""),Bt(2),vi("jitter: ",e.zoomAudioQosSend.data.jitter,""),Bt(2),vi("max_loss: ",e.zoomAudioQosSend.data.max_loss,""),Bt(2),vi("rtt: ",e.zoomAudioQosSend.data.rtt,""),Bt(2),vi("sample_rate: ",e.zoomAudioQosSend.data.sample_rate,"")}}function ak(n,t){if(1&n&&(jt(0,"ul")(1,"li"),mn(2),Wt(),jt(3,"li"),mn(4),Wt(),jt(5,"li"),mn(6),Wt(),jt(7,"li"),mn(8),Wt(),jt(9,"li"),mn(10),Wt()()),2&n){const e=ur(3);Bt(2),vi("avg_loss: ",e.zoomAudioQosReceive.data.avg_loss,""),Bt(2),vi("jitter: ",e.zoomAudioQosReceive.data.jitter,""),Bt(2),vi("max_loss: ",e.zoomAudioQosReceive.data.max_loss,""),Bt(2),vi("rtt: ",e.zoomAudioQosReceive.data.rtt,""),Bt(2),vi("sample_rate: ",e.zoomAudioQosReceive.data.sample_rate,"")}}function PG(n,t){if(1&n&&(wc(0),jt(1,"button",32)(2,"mat-icon"),mn(3,"signal_cellular_alt"),Wt()(),jt(4,"mat-menu",null,29)(6,"h3"),mn(7,"Quality of Service"),Wt(),jt(8,"h4"),mn(9,"Network"),Wt(),jt(10,"h5"),mn(11,"My Uplink"),Wt(),bn(12,OG,3,1,"ul",6),jt(13,"h5"),mn(14,"My Downlink"),Wt(),bn(15,DG,3,1,"ul",6),jt(16,"h4"),mn(17,"Video"),Wt(),jt(18,"h5"),mn(19,"Sending"),Wt(),bn(20,Y8,17,8,"ul",6),jt(21,"h5"),mn(22,"Receiving"),Wt(),bn(23,kG,17,8,"ul",6),jt(24,"h4"),mn(25,"Audio"),Wt(),jt(26,"h5"),mn(27,"Sending"),Wt(),bn(28,q8,11,5,"ul",6),jt(29,"h5"),mn(30,"Receiving"),Wt(),bn(31,ak,11,5,"ul",6),Wt(),Na()),2&n){const e=ll(5),o=ur(2);Bt(1),nn("matMenuTriggerFor",e),Bt(11),nn("ngIf",o.zoomNetworkQosUplink),Bt(3),nn("ngIf",o.zoomNetworkQosDownlink),Bt(5),nn("ngIf",o.zoomVideoQosSend),Bt(3),nn("ngIf",o.zoomVideoQosReceive),Bt(5),nn("ngIf",o.zoomAudioQosSend),Bt(3),nn("ngIf",o.zoomAudioQosReceive)}}function J8(n,t){if(1&n){const e=wu();jt(0,"div",23),bn(1,SG,3,0,"button",24),bn(2,CG,3,0,"button",24),bn(3,IG,3,0,"button",24),bn(4,H8,3,0,"button",24),bn(5,G8,3,0,"button",24),jt(6,"button",25),zi("click",function(){return da(e),io(ur().switchCamera())}),jt(7,"mat-icon"),mn(8,"cameraswitch"),Wt()(),bn(9,K8,7,3,"ng-container",6),bn(10,TG,10,6,"ng-container",6),bn(11,z8,9,4,"ng-container",6),bn(12,PG,32,7,"ng-container",6),jt(13,"button",26),zi("click",function(){return da(e),io(ur().leave())}),jt(14,"mat-icon"),mn(15,"logout"),Wt()()()}if(2&n){const e=ur();Bt(1),nn("ngIf",!e.mic&&!e.audio),Bt(1),nn("ngIf",e.mic&&e.audio),Bt(1),nn("ngIf",!e.mic&&e.audio),Bt(1),nn("ngIf",e.camera),Bt(1),nn("ngIf",!e.camera),Bt(1),nn("disabled",!e.camera),Bt(3),nn("ngIf","zoom"===e.videoSDKProvider),Bt(1),nn("ngIf","twilio"===e.videoSDKProvider&&e.twilioSession.participants),Bt(1),nn("ngIf","agora"===e.videoSDKProvider&&e.agoraClient.remoteUsers),Bt(1),nn("ngIf","zoom"===e.videoSDKProvider)}}function MG(n,t){1&n&&(jt(0,"div",33),Ti(1,"mat-spinner"),Wt())}function NG(n,t){1&n&&Ti(0,"mat-spinner")}function xG(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_off"),Wt())}function ba(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_on"),Wt())}function qw(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"volume_off"),Wt())}function xU(n,t){if(1&n&&(jt(0,"p"),bn(1,xG,2,0,"mat-icon",6),bn(2,ba,2,0,"mat-icon",6),bn(3,qw,2,0,"mat-icon",6),mn(4),Wt()),2&n){const e=ur(2);Bt(1),nn("ngIf",e.audio&&!e.mic),Bt(1),nn("ngIf",e.audio&&e.mic),Bt(1),nn("ngIf",!e.audio),Bt(1),vi(" ",e.zoomVideo.getCurrentUserInfo().displayName," (me) ")}}function LG(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"sentiment_satisfied_alt"),Wt())}function BG(n,t){if(1&n&&(wc(0),bn(1,xU,5,4,"p",6),bn(2,LG,2,0,"mat-icon",6),Ti(3,"video",34)(4,"canvas",35),Na()),2&n){const e=ur();Bt(1),nn("ngIf",e.zoomVideo&&e.zoomVideo.getCurrentUserInfo()),Bt(1),nn("ngIf",!e.camera&&!e.cameraLoading),Bt(1),nn("hidden",!e.useVideoElementForZoom),Bt(1),nn("hidden",!e.useCanvasElementForZoom)}}function ck(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_off"),Wt())}function FG(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_on"),Wt())}function Jw(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"volume_off"),Wt())}function FS(n,t){if(1&n&&(jt(0,"p"),bn(1,ck,2,0,"mat-icon",6),bn(2,FG,2,0,"mat-icon",6),bn(3,Jw,2,0,"mat-icon",6),mn(4),Wt()),2&n){const e=ur(2);Bt(1),nn("ngIf",e.audio&&!e.mic),Bt(1),nn("ngIf",e.audio&&e.mic),Bt(1),nn("ngIf",!e.audio),Bt(1),vi(" ",e.twilioSession.localParticipant.identity," (me) ")}}function LU(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"sentiment_satisfied_alt"),Wt())}function Ka(n,t){if(1&n&&(wc(0),bn(1,FS,5,4,"p",6),bn(2,LU,2,0,"mat-icon",6),Ti(3,"div",36),Na()),2&n){const e=ur();Bt(1),nn("ngIf",e.twilioSession),Bt(1),nn("ngIf",!e.camera&&!e.cameraLoading),Bt(1),nn("hidden",!e.camera)}}function UG(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_off"),Wt())}function VG(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_on"),Wt())}function jG(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"volume_off"),Wt())}function QG(n,t){if(1&n&&(jt(0,"p"),bn(1,UG,2,0,"mat-icon",6),bn(2,VG,2,0,"mat-icon",6),bn(3,jG,2,0,"mat-icon",6),mn(4),Wt()),2&n){const e=ur(2);Bt(1),nn("ngIf",e.audio&&!e.mic),Bt(1),nn("ngIf",e.audio&&e.mic),Bt(1),nn("ngIf",!e.audio),Bt(1),vi(" ",e.configForm.value.yourName," (me) ")}}function BU(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"sentiment_satisfied_alt"),Wt())}function FU(n,t){if(1&n&&(wc(0),bn(1,QG,5,4,"p",6),bn(2,BU,2,0,"mat-icon",6),Ti(3,"div",37),Na()),2&n){const e=ur();Bt(1),nn("ngIf",e.session),Bt(1),nn("ngIf",!e.camera&&!e.cameraLoading),Bt(1),nn("hidden",!e.camera)}}function HG(n,t){1&n&&(jt(0,"p"),mn(1,"Waiting for others to join..."),Wt())}function xx(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_off"),Wt())}function UU(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_on"),Wt())}function $8(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"volume_off"),Wt())}function VU(n,t){if(1&n&&(jt(0,"p"),bn(1,xx,2,0,"mat-icon",6),bn(2,UU,2,0,"mat-icon",6),bn(3,$8,2,0,"mat-icon",6),mn(4),Wt()),2&n){const e=ur(2);Bt(1),nn("ngIf",e.activeSpeaker.audio&&e.activeSpeaker.muted),Bt(1),nn("ngIf",e.activeSpeaker.audio&&!e.activeSpeaker.muted),Bt(1),nn("ngIf",!e.activeSpeaker.audio),Bt(1),vi(" ",e.activeSpeaker.displayName," ")}}function uk(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"insert_emoticon"),Wt())}function X8(n,t){if(1&n&&Ti(0,"canvas",39),2&n){const e=ur(2);nn("hidden",!e.activeSpeaker||!e.activeSpeaker.bVideoOn)}}function GG(n,t){if(1&n&&(wc(0),bn(1,VU,5,4,"p",6),bn(2,uk,2,0,"mat-icon",6),bn(3,X8,1,1,"canvas",38),Na()),2&n){const e=ur();Bt(1),nn("ngIf",e.activeSpeaker),Bt(1),nn("ngIf",e.activeSpeaker&&!e.activeSpeaker.bVideoOn),Bt(1),nn("ngIf",e.zoomVideo)}}function Z8(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_off"),Wt())}function jU(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_on"),Wt())}function e6(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"volume_off"),Wt())}function t6(n,t){if(1&n&&(jt(0,"p"),bn(1,Z8,2,0,"mat-icon",6),bn(2,jU,2,0,"mat-icon",6),bn(3,e6,2,0,"mat-icon",6),mn(4),Wt()),2&n){const e=ur(2);Bt(1),nn("ngIf",e.activeSpeaker.value.audioTracks.size&&e.activeSpeaker.value.muted),Bt(1),nn("ngIf",e.activeSpeaker.value.audioTracks.size&&!e.activeSpeaker.value.muted),Bt(1),nn("ngIf",!e.activeSpeaker.value.audioTracks.size),Bt(1),vi(" ",e.activeSpeaker.value.identity," ")}}function WG(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"insert_emoticon"),Wt())}function n6(n,t){if(1&n&&(wc(0),bn(1,t6,5,4,"p",6),bn(2,WG,2,0,"mat-icon",6),Ti(3,"div",40),Na()),2&n){const e=ur();Bt(1),nn("ngIf",e.activeSpeaker&&e.activeSpeaker.value),Bt(1),nn("ngIf",e.activeSpeaker&&!e.activeSpeaker.value.videoTracks.size),Bt(1),nn("hidden",!e.activeSpeaker||!e.activeSpeaker.value.videoTracks.size)}}function KG(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_off"),Wt())}function QU(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"mic_on"),Wt())}function lk(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"volume_off"),Wt())}function r6(n,t){if(1&n&&(jt(0,"p"),bn(1,KG,2,0,"mat-icon",6),bn(2,QU,2,0,"mat-icon",6),bn(3,lk,2,0,"mat-icon",6),mn(4),Wt()),2&n){const e=ur(2);Bt(1),nn("ngIf",e.activeSpeaker._audio_added_&&e.activeSpeaker._audio_muted_),Bt(1),nn("ngIf",e.activeSpeaker._audio_added_&&!e.activeSpeaker._audio_muted_),Bt(1),nn("ngIf",!e.activeSpeaker._audio_added_),Bt(1),vi(" ",e.activeSpeaker.uid," ")}}function i6(n,t){1&n&&(jt(0,"mat-icon"),mn(1,"insert_emoticon"),Wt())}function o6(n,t){if(1&n&&(wc(0),bn(1,r6,5,4,"p",6),bn(2,i6,2,0,"mat-icon",6),Ti(3,"div",41),Na()),2&n){const e=ur();Bt(1),nn("ngIf",e.activeSpeaker),Bt(1),nn("ngIf",e.activeSpeaker&&!e.activeSpeaker._video_added_),Bt(1),nn("hidden",!e.activeSpeaker||!e.activeSpeaker._video_added_)}}class Lx{constructor(t,e,o,d,f){this.platform=t,this.locationStrategy=e,this.httpClient=o,this._snackBar=f,this.zoomAudioDecode=!1,this.zoomAudioEncode=!1,this.useVideoElementForZoom=!1,this.useCanvasElementForZoom=!1,this.twilioVideo=ej,this.session=!1,this.sessionLoading=!1,this.sessionError=!1,this.camera=!1,this.cameraLoading=!1,this.cameraError=!1,this.mic=!1,this.micLoading=!1,this.micError=!1,this.audio=!1,this.audioLoading=!1,this.audioError=!1,this.cameraSwitchCycle=0,this.videoSDKProvider="zoom",console.log("Desktop Safri?",this.platform.SAFARI),this.configForm=new nr({videoSDKProvider:new ap("zoom"),yourName:new ap("User A"),sessionName:new ap("testsdk"),sessionPasscode:new ap("zoom123"),geoRegions:new ap("")}),history.pushState(null,"",window.location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,"",window.location.href)}),this.breakpoint=window.innerWidth<=700?1:2}onResize(t){this.breakpoint=t.target.innerWidth<=700?1:2}authorize(t){this.sessionLoading=!0,console.log(t),this.videoSDKProvider=t.videoSDKProvider,"zoom"===this.videoSDKProvider?this.httpClient.post("https://or116ttpz8.execute-api.us-west-1.amazonaws.com/default/videosdk",JSON.stringify({sessionName:t.sessionName,role:0,geoRegions:t.geoRegions})).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"twilio"===this.videoSDKProvider?this.httpClient.post("https://r6q7q3xd4a.execute-api.us-west-1.amazonaws.com/default/twiliosdk",JSON.stringify({sessionName:t.sessionName,identity:t.yourName})).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&this.httpClient.post("https://cjth3g96g3.execute-api.us-west-1.amazonaws.com/default/agorasdk",JSON.stringify({sessionName:t.sessionName,role:"1"})).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1})}join(t,e){"zoom"===this.videoSDKProvider?(this.zoomVideo=KF().createClient(),this.zoomVideo.init("en-US","CDN"),this.zoomVideo.join(e.sessionName,t,e.yourName,e.sessionPasscode).then(o=>{console.log(o),console.log(this.zoomVideo.getSessionInfo()),this.zoomSession=this.zoomVideo.getMediaStream(),this.sessionLoading=!1,this.session=!0,this.zoomSession.subscribeAudioStatisticData().then(()=>{console.log("test"),this.zoomVideo.on("audio-statistic-data-change",d=>{!0===d.data.encoding?this.zoomAudioQosSend=d:!1===d.data.encoding&&(this.zoomAudioQosReceive=d),console.log(d)})}),this.zoomSession.subscribeVideoStatisticData().then(()=>{console.log("test"),this.zoomVideo.on("video-statistic-data-change",d=>{!0===d.data.encoding?this.zoomVideoQosSend=d:!1===d.data.encoding&&(this.zoomVideoQosReceive=d),console.log(d)})}),this.zoomVideo.on("network-quality-change",d=>{console.log(d),"uplink"===d.type&&d.userId===this.zoomVideo.getCurrentUserInfo().userId?this.zoomNetworkQosUplink=d:"downlink"===d.type&&d.userId===this.zoomVideo.getCurrentUserInfo().userId&&(this.zoomNetworkQosDownlink=d)}),console.log(this.zoomVideo.getAllUser()),this.zoomVideo.getAllUser().length>1&&(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&(console.log("loading particpant video"),this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,3).then(d=>{console.log(d)})),console.log("active speaker",this.activeSpeaker)),this.zoomVideo.on("media-sdk-change",d=>{"audio"===d.type&&"success"===d.result&&("encode"===d.action?this.zoomAudioEncode=!0:"decode"===d.action&&(this.zoomAudioDecode=!0))}),this.zoomVideo.on("user-added",d=>{this._snackBar.open(d[0].displayName+" joined","",{verticalPosition:"top",duration:2e3}),this.activeSpeaker||(console.log("second user joined",d),console.log(this.zoomVideo.getAllUser()),this.activeSpeaker=this.zoomVideo.getAllUser().filter(f=>d[0].userId===f.userId)[0])}),this.zoomVideo.on("user-updated",d=>{this.zoomVideo.getCurrentUserInfo()&&this.zoomVideo.getCurrentUserInfo().userId!==d[0].userId&&d[0].userId===this.activeSpeaker.userId&&("audio"in d[0]?this.activeSpeaker.audio=d[0].audio:"muted"in d[0]&&(this.activeSpeaker.muted=d[0].muted))}),this.zoomVideo.on("user-removed",d=>{this.activeSpeaker.userId===d[0].userId&&(console.log("active speaker left"),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.zoomVideo.getAllUser().length>1?(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,3).then(()=>{console.log(o)})):this.activeSpeaker=null),this._snackBar.open(d[0].displayName+" left","",{verticalPosition:"top",duration:2e3})}),this.zoomVideo.on("active-speaker",d=>{this.activeSpeaker.userId!==d[0].userId&&this.zoomVideo.getCurrentUserInfo().userId!==d[0].userId&&(console.log("new active speaker",d),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.activeSpeaker=this.zoomVideo.getAllUser().filter(f=>d[0].userId===f.userId)[0],console.log(this.activeSpeaker),this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,3).then(()=>{console.log(o)}))}),this.zoomVideo.on("peer-video-state-change",d=>{(!this.activeSpeaker||d.userId===this.activeSpeaker.userId)&&("Start"===d.action?this.zoomSession.renderVideo(document.getElementById("participant-canvas"),d.userId,1920,1080,0,0,3).then(f=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(b=>d.userId===b.userId)[0]}).catch(f=>{console.log(f)}):"Stop"===d.action&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),d.userId).then(f=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(b=>d.userId===b.userId)[0]}).catch(f=>{console.log(f)}))})}).catch(o=>{console.log(o),this.sessionLoading=!1})):"twilio"===this.videoSDKProvider?this.twilioVideo.connect(t,{name:e.sessionName,audio:!1,video:!1,dominantSpeaker:!0}).then(o=>{this.twilioSession=o,console.log(`Successfully joined a Room: ${this.twilioSession}`),this.sessionLoading=!1,this.session=!0,console.log(this.twilioSession.participants),console.log(),Array.from(this.twilioSession.participants,([f,b])=>({name:f,value:b})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([f,b])=>({name:f,value:b}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),this.twilioSession.participants.forEach(f=>{console.log(f),f.tracks.forEach(b=>{console.log(b),b.track&&(console.log("render the particpant video"),document.getElementById("twilio-user-view-div").appendChild(b.track.attach()),b.track.on("disabled",()=>{console.log("did I mute?")}),b.track.on("enabled",()=>{console.log("did I unmute?")}))}),f.on("trackSubscribed",b=>{console.log(b),f.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(b.attach())),b.on("disabled",()=>{f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0),console.log("did I mute again?")}),b.on("enabled",()=>{f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1),console.log("did I unmute again?")})}),f.on("trackUnsubscribed",b=>{console.log("a video was stopped"),f.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantConnected",f=>{console.log(f),this._snackBar.open(f.identity+" joined","",{verticalPosition:"top",duration:2e3}),Array.from(this.twilioSession.participants,([b,y])=>({name:b,value:y})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([b,y])=>({name:b,value:y}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),f.tracks.forEach(b=>{console.log(b),b.track&&(document.getElementById("twilio-user-view-div").appendChild(b.track.attach()),b.track.on("disabled",()=>{console.log("did I mute? 2"),console.log(f)}),b.track.on("enabled",()=>{console.log("did I unmute? 2"),f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}))}),f.on("trackSubscribed",b=>{console.log(b),f.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(b.attach())),b.on("disabled",()=>{console.log("did I mute again? 2"),f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}),b.on("enabled",()=>{console.log("did I unmute again? 2"),f.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1)})}),f.on("trackUnsubscribed",b=>{console.log("a video was stopped"),console.log("removing video?"),f.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantDisconnected",f=>{console.log("someone left",f),f.sid===this.activeSpeaker.value.sid&&(document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker=this.activeSpeaker=Array.from(this.twilioSession.participants,([y,w])=>({name:y,value:w}))[0],console.log("new user talking change view",this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([y,w])=>({name:y,value:w}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([y,w])=>({name:y,value:w}))[0].value.track.attach()))),this._snackBar.open(f.identity+" left","",{verticalPosition:"top",duration:2e3})}),this.twilioSession.on("dominantSpeakerChanged",f=>{console.log(f),console.log(f.identity,f.sid),console.log(f.sid===this.activeSpeaker.value.sid),f&&f.sid!==this.activeSpeaker.value.sid&&(console.log("swicth video"),document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker.value=f,this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([y,w])=>({name:y,value:w}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([y,w])=>({name:y,value:w}))[0].value.track.attach())),setTimeout(()=>{console.log(this.activeSpeaker)}))}),console.log(this.twilioSession.localParticipant);let d=Array.from(this.twilioSession.participants,([f,b])=>({name:f,value:b}));console.log(d)}).catch(o=>{console.log(o),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&(console.log(e),this.agoraClient=Sw().createClient({codec:"vp8",mode:"rtc"}),this.agoraClient.join("59dcf92e250b4392839cf3c7ea2818d0",e.sessionName,t,e.yourName).then(o=>{console.log(o),this.sessionLoading=!1,this.session=!0,console.log(this.agoraClient.remoteUsers),this.agoraClient.remoteUsers.length&&(this.activeSpeaker=this.agoraClient.remoteUsers[0],console.log(this.activeSpeaker)),this.agoraClient.on("user-joined",d=>{console.log("user joined",d),console.log("check current users",this.agoraClient.remoteUsers[0].uid),this.activeSpeaker||(this.activeSpeaker=d,console.log(this.activeSpeaker.lX))}),this.agoraClient.on("user-left",d=>{console.log("user left",d),this.activeSpeaker.uid===d.uid&&(this.activeSpeaker=this.agoraClient.remoteUsers.length?this.agoraClient.remoteUsers[0]:null)}),this.agoraClient.on("user-published",(d,f)=>{this.agoraClient.subscribe(d,f).then(()=>{if("audio"===f&&(this.remoteAgoraAudio=d.audioTrack,this.remoteAgoraAudio.play()),"video"===f&&this.activeSpeaker.uid===d.uid){this.remoteAgoraVideo=d.videoTrack;const b=document.getElementById("agora-user-view-div");this.remoteAgoraVideo.play(b)}})}),this.agoraClient.on("user-unpublished",(d,f)=>{"video"===f&&this.activeSpeaker.uid===d.uid&&document.getElementById("agora-user-view-div")?.querySelector("div")?.remove()})}).catch(o=>{console.log(o),this.sessionLoading=!1}))}startAudio(){this.audioLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.startAudio(),this.mic=!0,this.audio=!0,this.audioLoading=!1):"twilio"===this.videoSDKProvider?this.twilioVideo.createLocalAudioTrack().then(t=>{this.twilioSession.localParticipant.publishTrack(t);const e=t.attach();document.body.appendChild(e),console.log("twilio mic"),this.micLoading=!1,this.mic=!0,this.audio=!0}):"agora"===this.videoSDKProvider&&Sw().createMicrophoneAudioTrack().then(t=>{console.log(t),this.selfAgoraAudio=t,this.agoraClient.publish([this.selfAgoraAudio]),this.micLoading=!1,this.mic=!0,this.audio=!0})}unmute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.unmuteAudio(),console.log("zoom mic"),this.micLoading=!1,this.mic=!0):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.enable()}),this.micLoading=!1,this.mic=!0):"agora"===this.videoSDKProvider&&(this.selfAgoraAudio.setEnabled(!0),this.micLoading=!1,this.mic=!0)}mute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.muteAudio(),this.micLoading=!1,this.mic=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.disable()}),this.micLoading=!1,this.mic=!1):"agora"===this.videoSDKProvider&&(this.selfAgoraAudio.setEnabled(!1),this.micLoading=!1,this.mic=!1)}switchCamera(){console.log("switch camera"),"zoom"===this.videoSDKProvider?(console.log("current",this.cameraSwitchCycle),this.zoomSession.switchCamera(this.zoomSession.getCameraList()[this.cameraSwitchCycle].deviceId),this.zoomSession.getCameraList().length-1<=this.cameraSwitchCycle?this.cameraSwitchCycle=0:this.cameraSwitchCycle+=1,console.log("new",this.cameraSwitchCycle)):"twilio"===this.videoSDKProvider?console.log("not implemented for Twilio, ask Tommy to add if needed"):"agora"===this.videoSDKProvider&&(console.log(Sw().getCameras()),Sw().getCameras().then(t=>{console.log(t),this.selfAgoraVideo.setDevice(t[this.cameraSwitchCycle].deviceId),t.length-1<=this.cameraSwitchCycle?this.cameraSwitchCycle=0:this.cameraSwitchCycle+=1}).catch(t=>{console.log(t)}))}startCamera(){this.cameraLoading=!0,"zoom"===this.videoSDKProvider?this.zoomSession.isRenderSelfViewWithVideoElement()?this.zoomSession.startVideo({videoElement:document.getElementById("self-view-video"),hd:!0}).then(()=>{this.useVideoElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)}):this.zoomSession.startVideo({hd:!0}).then(()=>{this.zoomSession.renderVideo(document.getElementById("self-view-canvas"),this.zoomVideo.getCurrentUserInfo().userId,1920,1080,0,0,3).then(()=>{this.useCanvasElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)}):"twilio"===this.videoSDKProvider?(console.log(this.twilioSession.participants),console.log(this.twilioSession.participants.values()),this.twilioVideo.createLocalVideoTrack({height:{ideal:720,min:480,max:1080},width:{ideal:1280,min:640,max:1920},aspectRatio:16/9}).then(t=>{this.twilioSession.localParticipant.publishTrack(t),document.getElementById("twilio-self-view-div").appendChild(t.attach()),this.cameraLoading=!1,this.camera=!0})):"agora"===this.videoSDKProvider&&Sw().createCameraVideoTrack({encoderConfig:"720p_2"}).then(t=>{console.log(t),this.selfAgoraVideo=t,this.agoraClient.publish([this.selfAgoraVideo]);const e=document.getElementById("agora-self-view-div");this.selfAgoraVideo.play(e),this.cameraLoading=!1,this.camera=!0})}stopCamera(){this.cameraLoading=!0,this.camera=!1,"zoom"===this.videoSDKProvider?(this.zoomSession.stopVideo(),this.cameraLoading=!1,this.camera=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1):"twilio"===this.videoSDKProvider?this.twilioSession.localParticipant.videoTracks.forEach(e=>{e.unpublish(),e.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove(),console.log("video stopped"),this.cameraLoading=!1,this.camera=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient.unpublish([this.selfAgoraVideo]),this.selfAgoraVideo.close(),document.getElementById("agora-self-view-div")?.querySelector("div")?.remove(),this.selfAgoraVideo=null,this.cameraLoading=!1,this.camera=!1,this.cameraSwitchCycle=0)}leave(){this.sessionLoading=!0,this.camera=!1,this.mic=!1,this.audio=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1,this.activeSpeaker=null,this.cameraSwitchCycle=0,setTimeout(()=>{"zoom"===this.videoSDKProvider?(this.zoomVideo.leave(),this.sessionLoading=!1,this.session=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.videoTracks.forEach(e=>{e.unpublish(),e.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove()}),this.twilioSession.localParticipant.audioTracks.forEach(e=>{e.unpublish(),e.track.stop(),document.querySelector("audio")?.remove()}),this.twilioSession.disconnect(),this.sessionLoading=!1,this.session=!1):"agora"===this.videoSDKProvider&&(this.selfAgoraVideo&&(this.agoraClient.unpublish([this.selfAgoraVideo]),this.selfAgoraVideo.close(),document.getElementById("agora-self-view-div")?.querySelector("div")?.remove()),this.selfAgoraAudio&&(this.agoraClient.unpublish([this.selfAgoraAudio]),this.selfAgoraAudio.close()),this.agoraClient.leave(),this.sessionLoading=!1,this.session=!1)},500)}static#e=this.\u0275fac=function(e){return new(e||Lx)(vt(Vc),vt(Kb),vt(yN),vt(Yr),vt(NS))};static#t=this.\u0275cmp=Ls({type:Lx,selectors:[["app-root"]],decls:16,vars:15,consts:[["class","config",3,"formGroup","ngSubmit",4,"ngIf"],["class","videoSDKProvider",4,"ngIf"],["class","controls",4,"ngIf"],["class","sessionLoading",4,"ngIf"],[1,"view"],["rowHeight","16:9",3,"cols","resize"],[4,"ngIf"],[1,"config",3,"formGroup","ngSubmit"],["appearance","outline"],["formControlName","videoSDKProvider"],["value","zoom"],["value","twilio"],["value","agora"],["matInput","","formControlName","yourName","autocomplete","off"],["matSuffix",""],["matInput","","formControlName","sessionName","autocomplete","off"],["matInput","","formControlName","sessionPasscode","autocomplete","off"],["appearance","outline",4,"ngIf"],["mat-fab","","color","primary",4,"ngIf"],["matInput","","formControlName","geoRegions","autocomplete","off"],["href","https://developers.zoom.us/docs/video-sdk/auth/#payload","target","_blank"],["mat-fab","","color","primary"],[1,"videoSDKProvider"],[1,"controls"],["mat-fab","","color","primary",3,"click",4,"ngIf"],["mat-fab","","color","primary",3,"disabled","click"],["mat-fab","","color","warn",3,"click"],["mat-fab","","color","primary",3,"click"],["mat-fab","","color","primary",3,"matMenuTriggerFor","matBadge"],["menu","matMenu"],["mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item",""],["mat-fab","","color","primary",3,"matMenuTriggerFor"],[1,"sessionLoading"],["id","self-view-video","width","1920","height","1080",3,"hidden"],["id","self-view-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-self-view-div",3,"hidden"],["id","agora-self-view-div",3,"hidden"],["id","participant-canvas","width","1920","height","1080",3,"hidden",4,"ngIf"],["id","participant-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-user-view-div",3,"hidden"],["id","agora-user-view-div",3,"hidden"]],template:function(e,o){1&e&&(bn(0,bG,31,3,"form",0),bn(1,Q8,3,1,"div",1),bn(2,J8,16,10,"div",2),bn(3,MG,2,0,"div",3),jt(4,"div",4)(5,"mat-grid-list",5),zi("resize",function(f){return o.onResize(f)},0,jf),jt(6,"mat-grid-tile"),bn(7,NG,1,0,"mat-spinner",6),bn(8,BG,5,4,"ng-container",6),bn(9,Ka,4,3,"ng-container",6),bn(10,FU,4,3,"ng-container",6),Wt(),jt(11,"mat-grid-tile"),bn(12,HG,2,0,"p",6),bn(13,GG,4,3,"ng-container",6),bn(14,n6,4,3,"ng-container",6),bn(15,o6,4,3,"ng-container",6),Wt()()()),2&e&&(nn("ngIf",!o.session&&!o.sessionLoading),Bt(1),nn("ngIf",o.session&&!o.sessionLoading),Bt(1),nn("ngIf",o.session&&!o.sessionLoading),Bt(1),nn("ngIf",o.sessionLoading),Bt(1),Bg("display",o.session?"flex":"none"),Bt(1),nn("cols",o.breakpoint),Bt(2),nn("ngIf",o.cameraLoading),Bt(1),nn("ngIf","zoom"===o.videoSDKProvider),Bt(1),nn("ngIf","twilio"===o.videoSDKProvider),Bt(1),nn("ngIf","agora"===o.videoSDKProvider),Bt(2),nn("ngIf",!o.activeSpeaker),Bt(1),nn("ngIf","zoom"===o.videoSDKProvider),Bt(1),nn("ngIf","twilio"===o.videoSDKProvider),Bt(1),nn("ngIf","agora"===o.videoSDKProvider))},dependencies:[rw,h_,V4,mw,du,Di,yw,LF,U5,oU,i8,Ex,mU,_U,IU,N3,_8,a5,ZH,oG,T8,fG,Vi,vG,Nx],styles:["mat-grid-list[_ngcontent-%COMP%]{position:unset}mat-grid-tile[_ngcontent-%COMP%]{background:lightblue}mat-grid-tile[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:17px;vertical-align:middle;height:17px;font-size:15px}p[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:10px;left:10px;color:#fff;z-index:1}.view[_ngcontent-%COMP%]{height:100vh;align-items:center}.sessionLoading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}#twilio-self-view-div[_ngcontent-%COMP%], #twilio-user-view-div[_ngcontent-%COMP%], #agora-self-view-div[_ngcontent-%COMP%], #agora-user-view-div[_ngcontent-%COMP%]{width:100%;height:100%}#self-view-video[_ngcontent-%COMP%], #self-view-canvas[_ngcontent-%COMP%]{transform:scaleX(-1);height:100%!important}video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{width:100%;height:auto;aspect-ratio:16/9;background-color:#add8e6}.config[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;height:100vh}.config[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:300px}.videoSDKProvider[_ngcontent-%COMP%]{position:fixed;top:20px;display:flex;justify-content:center;width:100%;z-index:2;text-transform:capitalize}.controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;display:flex;justify-content:center;width:100%;z-index:2}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]})}function s6(n){return new hn(3e3,!1)}function XG(){return typeof window<"u"&&typeof window.document<"u"}function Vx(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ih(n){switch(n.length){case 0:return new FD;case 1:return n[0];default:return new d5(n)}}function $w(n,t,e,o,d=new Map,f=new Map){const b=[],y=[];let w=-1,k=null;if(o.forEach(Q=>{const ie=Q.get("offset"),Ie=ie==w,ke=Ie&&k||new Map;Q.forEach((je,at)=>{let Vt=at,Qt=je;if("offset"!==at)switch(Vt=t.normalizePropertyName(Vt,b),Qt){case"!":Qt=d.get(at);break;case k_:Qt=f.get(at);break;default:Qt=t.normalizeStyleValue(at,Vt,Qt,b)}ke.set(Vt,Qt)}),Ie||y.push(ke),k=ke,w=ie}),b.length)throw function KU(n){return new hn(3502,!1)}();return y}function Ko(n,t,e,o){switch(t){case"start":n.onStart(()=>o(e&&$U(e,"start",n)));break;case"done":n.onDone(()=>o(e&&$U(e,"done",n)));break;case"destroy":n.onDestroy(()=>o(e&&$U(e,"destroy",n)))}}function $U(n,t,e){const f=jx(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),b=n._data;return null!=b&&(f._data=b),f}function jx(n,t,e,o,d="",f=0,b){return{element:n,triggerName:t,fromState:e,toState:o,phaseName:d,totalTime:f,disabled:!!b}}function hp(n,t,e){let o=n.get(t);return o||n.set(t,o=e),o}function v6(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let XU=(n,t)=>!1,A6=(n,t,e)=>[],hk=null;function ZU(n){const t=n.parentNode||n.host;return t===hk?null:t}(Vx()||typeof Element<"u")&&(XG()?(hk=(()=>document.documentElement)(),XU=(n,t)=>{for(;t;){if(t===n)return!0;t=ZU(t)}return!1}):XU=(n,t)=>n.contains(t),A6=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const o=n.querySelector(t);return o?[o]:[]});let VS=null,y6=!1;const eV=XU,fk=A6;let E6=(()=>{class n{validateStyleProperty(e){return function eW(n){VS||(VS=function jS(){return typeof document<"u"?document.body:null}()||{},y6=!!VS.style&&"WebkitAppearance"in VS.style);let t=!0;return VS.style&&!function ZG(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in VS.style,!t&&y6&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in VS.style)),t}(e)}matchesElement(e,o){return!1}containsElement(e,o){return eV(e,o)}getParentElement(e){return ZU(e)}query(e,o,d){return fk(e,o,d)}computeStyle(e,o,d){return d||""}animate(e,o,d,f,b,y=[],w){return new FD(d,f)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})(),tV=(()=>{class n{}return n.NOOP=new E6,n})();const wl="ng-enter",mk="ng-leave",gk="ng-trigger",Xw=".ng-trigger",_k="ng-animating",Qx=".ng-animating";function _d(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Zw(parseFloat(t[1]),t[2])}function Zw(n,t){return"s"===t?1e3*n:n}function vk(n,t,e){return n.hasOwnProperty("duration")?n:function S6(n,t,e){let d,f=0,b="";if("string"==typeof n){const y=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===y)return t.push(s6()),{duration:0,delay:0,easing:""};d=Zw(parseFloat(y[1]),y[2]);const w=y[3];null!=w&&(f=Zw(parseFloat(w),y[4]));const k=y[5];k&&(b=k)}else d=n;if(!e){let y=!1,w=t.length;d<0&&(t.push(function a6(){return new hn(3100,!1)}()),y=!0),f<0&&(t.push(function Bx(){return new hn(3101,!1)}()),y=!0),y&&t.splice(w,0,s6())}return{duration:d,delay:f,easing:b}}(n,t,e)}function eT(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Ak(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function sc(n,t=new Map,e){if(e)for(let[o,d]of e)t.set(o,d);for(let[o,d]of n)t.set(o,d);return t}function nV(n,t,e){return e?t+":"+e+";":""}function Hx(n){let t="";for(let e=0;e<n.style.length;e++){const o=n.style.item(e);t+=nV(0,o,n.style.getPropertyValue(o))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=nV(0,T6(e),n.style[e]));n.setAttribute("style",t)}function lf(n,t,e){n.style&&(t.forEach((o,d)=>{const f=Gx(d);e&&!e.has(d)&&e.set(d,n.style[f]),n.style[f]=o}),Vx()&&Hx(n))}function F_(n,t){n.style&&(t.forEach((e,o)=>{const d=Gx(o);n.style[d]=""}),Vx()&&Hx(n))}function df(n){return Array.isArray(n)?1==n.length?n[0]:u5(n):n}const yk=new RegExp("{{\\s*(.+?)\\s*}}","g");function fp(n){let t=[];if("string"==typeof n){let e;for(;e=yk.exec(n);)t.push(e[1]);yk.lastIndex=0}return t}function tT(n,t,e){const o=n.toString(),d=o.replace(yk,(f,b)=>{let y=t[b];return null==y&&(e.push(function Fx(n){return new hn(3003,!1)}()),y=""),y.toString()});return d==o?n:d}function Iy(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const w6=/-+([a-z0-9])/g;function Gx(n){return n.replace(w6,(...t)=>t[1].toUpperCase())}function T6(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function mp(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function c6(n){return new hn(3004,!1)}()}}function gi(n,t){return window.getComputedStyle(n)[t]}function Kx(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(o=>function P6(n,t,e){if(":"==n[0]){const w=function rW(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,o)=>parseFloat(o)>parseFloat(e);case":decrement":return(e,o)=>parseFloat(o)<parseFloat(e);default:return t.push(function pk(n){return new hn(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof w)return void t.push(w);n=w}const o=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==o||o.length<4)return e.push(function B_(n){return new hn(3015,!1)}()),t;const d=o[1],f=o[2],b=o[3];t.push(oV(d,b));"<"==f[0]&&!("*"==d&&"*"==b)&&t.push(oV(b,d))}(o,e,t)):e.push(n),e}const Sk=new Set(["true","1"]),si=new Set(["false","0"]);function oV(n,t){const e=Sk.has(n)||si.has(n),o=Sk.has(t)||si.has(t);return(d,f)=>{let b="*"==n||n==d,y="*"==t||t==f;return!b&&e&&"boolean"==typeof d&&(b=d?Sk.has(n):si.has(n)),!y&&o&&"boolean"==typeof f&&(y=f?Sk.has(t):si.has(t)),b&&y}}const iW=new RegExp("s*:selfs*,?","g");function Vu(n,t,e,o){return new M6(n).build(t,e,o)}class M6{constructor(t){this._driver=t}build(t,e,o){const d=new zx(e);return this._resetContextStyleTimingState(d),mp(this,df(t),d)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let o=e.queryCount=0,d=e.depCount=0;const f=[],b=[];return"@"==t.name.charAt(0)&&e.errors.push(function u6(){return new hn(3006,!1)}()),t.definitions.forEach(y=>{if(this._resetContextStyleTimingState(e),0==y.type){const w=y,k=w.name;k.toString().split(/\s*,\s*/).forEach(Q=>{w.name=Q,f.push(this.visitState(w,e))}),w.name=k}else if(1==y.type){const w=this.visitTransition(y,e);o+=w.queryCount,d+=w.depCount,b.push(w)}else e.errors.push(function uf(){return new hn(3007,!1)}())}),{type:7,name:t.name,states:f,transitions:b,queryCount:o,depCount:d,options:null}}visitState(t,e){const o=this.visitStyle(t.styles,e),d=t.options&&t.options.params||null;if(o.containsDynamicStyles){const f=new Set,b=d||{};o.styles.forEach(y=>{y instanceof Map&&y.forEach(w=>{fp(w).forEach(k=>{b.hasOwnProperty(k)||f.add(k)})})}),f.size&&(Iy(f.values()),e.errors.push(function by(n,t){return new hn(3008,!1)}()))}return{type:0,name:t.name,style:o,options:d?{params:d}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const o=mp(this,df(t.animation),e);return{type:1,matchers:Kx(t.expr,e.errors),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:xm(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(o=>mp(this,o,e)),options:xm(t.options)}}visitGroup(t,e){const o=e.currentTime;let d=0;const f=t.steps.map(b=>{e.currentTime=o;const y=mp(this,b,e);return d=Math.max(d,e.currentTime),y});return e.currentTime=d,{type:3,steps:f,options:xm(t.options)}}visitAnimate(t,e){const o=function Yx(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return qx(vk(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(f=>"{"==f.charAt(0)&&"{"==f.charAt(1))){const f=qx(0,0,"");return f.dynamic=!0,f.strValue=e,f}const d=vk(e,t);return qx(d.duration,d.delay,d.easing)}(t.timings,e.errors);e.currentAnimateTimings=o;let d,f=t.styles?t.styles:oc({});if(5==f.type)d=this.visitKeyframes(f,e);else{let b=t.styles,y=!1;if(!b){y=!0;const k={};o.easing&&(k.easing=o.easing),b=oc(k)}e.currentTime+=o.duration+o.delay;const w=this.visitStyle(b,e);w.isEmptyStep=y,d=w}return e.currentAnimateTimings=null,{type:4,timings:o,style:d,options:null}}visitStyle(t,e){const o=this._makeStyleAst(t,e);return this._validateStyleAst(o,e),o}_makeStyleAst(t,e){const o=[],d=Array.isArray(t.styles)?t.styles:[t.styles];for(let y of d)"string"==typeof y?y===k_?o.push(y):e.errors.push(new hn(3002,!1)):o.push(Ak(y));let f=!1,b=null;return o.forEach(y=>{if(y instanceof Map&&(y.has("easing")&&(b=y.get("easing"),y.delete("easing")),!f))for(let w of y.values())if(w.toString().indexOf("{{")>=0){f=!0;break}}),{type:6,styles:o,easing:b,offset:t.offset,containsDynamicStyles:f,options:null}}_validateStyleAst(t,e){const o=e.currentAnimateTimings;let d=e.currentTime,f=e.currentTime;o&&f>0&&(f-=o.duration+o.delay),t.styles.forEach(b=>{"string"!=typeof b&&b.forEach((y,w)=>{const k=e.collectedStyles.get(e.currentQuerySelector),Q=k.get(w);let ie=!0;Q&&(f!=d&&f>=Q.startTime&&d<=Q.endTime&&(e.errors.push(function HU(n,t,e,o,d){return new hn(3010,!1)}()),ie=!1),f=Q.startTime),ie&&k.set(w,{startTime:f,endTime:d}),e.options&&function rV(n,t,e){const o=t.params||{},d=fp(n);d.length&&d.forEach(f=>{o.hasOwnProperty(f)||e.push(function gd(n){return new hn(3001,!1)}())})}(y,e.options,e.errors)})})}visitKeyframes(t,e){const o={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function dk(){return new hn(3011,!1)}()),o;let f=0;const b=[];let y=!1,w=!1,k=0;const Q=t.steps.map(Qt=>{const rn=this._makeStyleAst(Qt,e);let Ut=null!=rn.offset?rn.offset:function L6(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const o=e;t=parseFloat(o.get("offset")),o.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(rn.styles),Bn=0;return null!=Ut&&(f++,Bn=rn.offset=Ut),w=w||Bn<0||Bn>1,y=y||Bn<k,k=Bn,b.push(Bn),rn});w&&e.errors.push(function l6(){return new hn(3012,!1)}()),y&&e.errors.push(function Sy(){return new hn(3200,!1)}());const ie=t.steps.length;let Ie=0;f>0&&f<ie?e.errors.push(function d6(){return new hn(3202,!1)}()):0==f&&(Ie=1/(ie-1));const ke=ie-1,je=e.currentTime,at=e.currentAnimateTimings,Vt=at.duration;return Q.forEach((Qt,rn)=>{const Ut=Ie>0?rn==ke?1:Ie*rn:b[rn],Bn=Ut*Vt;e.currentTime=je+at.delay+Bn,at.duration=Bn,this._validateStyleAst(Qt,e),Qt.offset=Ut,o.styles.push(Qt)}),o}visitReference(t,e){return{type:8,animation:mp(this,df(t.animation),e),options:xm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:xm(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:xm(t.options)}}visitQuery(t,e){const o=e.currentQuerySelector,d=t.options||{};e.queryCount++,e.currentQuery=t;const[f,b]=function N6(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(iW,"")),n=n.replace(/@\*/g,Xw).replace(/@\w+/g,e=>Xw+"-"+e.slice(1)).replace(/:animating/g,Qx),[n,t]}(t.selector);e.currentQuerySelector=o.length?o+" "+f:f,hp(e.collectedStyles,e.currentQuerySelector,new Map);const y=mp(this,df(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=o,{type:11,selector:f,limit:d.limit||0,optional:!!d.optional,includeSelf:b,animation:y,originalSelector:t.selector,options:xm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function qG(){return new hn(3013,!1)}());const o="full"===t.timings?{duration:0,delay:0,easing:"full"}:vk(t.timings,e.errors,!0);return{type:12,animation:mp(this,df(t.animation),e),timings:o,options:null}}}class zx{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function xm(n){return n?(n=eT(n)).params&&(n.params=function x6(n){return n?eT(n):null}(n.params)):n={},n}function qx(n,t,e){return{duration:n,delay:t,easing:e}}function Jx(n,t,e,o,d,f,b=null,y=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:o,duration:d,delay:f,totalTime:d+f,easing:b,subTimeline:y}}class $x{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let o=this._map.get(t);o||this._map.set(t,o=[]),o.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const F6=new RegExp(":enter","g"),U6=new RegExp(":leave","g");function Ck(n,t,e,o,d,f=new Map,b=new Map,y,w,k=[]){return(new oW).buildKeyframes(n,t,e,o,d,f,b,y,w,k)}class oW{buildKeyframes(t,e,o,d,f,b,y,w,k,Q=[]){k=k||new $x;const ie=new vd(t,e,k,d,f,Q,[]);ie.options=w;const Ie=w.delay?_d(w.delay):0;ie.currentTimeline.delayNextStep(Ie),ie.currentTimeline.setStyles([b],null,ie.errors,w),mp(this,o,ie);const ke=ie.timelines.filter(je=>je.containsAnimation());if(ke.length&&y.size){let je;for(let at=ke.length-1;at>=0;at--){const Vt=ke[at];if(Vt.element===e){je=Vt;break}}je&&!je.allowOnlyTimelineStyles()&&je.setStyles([y],null,ie.errors,w)}return ke.length?ke.map(je=>je.buildKeyframes()):[Jx(e,[],[],[],0,Ie,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const o=e.subInstructions.get(e.element);if(o){const d=e.createSubContext(t.options),f=e.currentTimeline.currentTime,b=this._visitSubInstructions(o,d,d.options);f!=b&&e.transformIntoNewTimeline(b)}e.previousNode=t}visitAnimateRef(t,e){const o=e.createSubContext(t.options);o.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,o),this.visitReference(t.animation,o),e.transformIntoNewTimeline(o.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,o){for(const d of t){const f=d?.delay;if(f){const b="number"==typeof f?f:_d(tT(f,d?.params??{},e.errors));o.delayNextStep(b)}}}_visitSubInstructions(t,e,o){let f=e.currentTimeline.currentTime;const b=null!=o.duration?_d(o.duration):null,y=null!=o.delay?_d(o.delay):null;return 0!==b&&t.forEach(w=>{const k=e.appendInstructionToTimeline(w,b,y);f=Math.max(f,k.duration+k.delay)}),f}visitReference(t,e){e.updateOptions(t.options,!0),mp(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const o=e.subContextCount;let d=e;const f=t.options;if(f&&(f.params||f.delay)&&(d=e.createSubContext(f),d.transformIntoNewTimeline(),null!=f.delay)){6==d.previousNode.type&&(d.currentTimeline.snapshotCurrentStyles(),d.previousNode=gu);const b=_d(f.delay);d.delayNextStep(b)}t.steps.length&&(t.steps.forEach(b=>mp(this,b,d)),d.currentTimeline.applyStylesToKeyframe(),d.subContextCount>o&&d.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const o=[];let d=e.currentTimeline.currentTime;const f=t.options&&t.options.delay?_d(t.options.delay):0;t.steps.forEach(b=>{const y=e.createSubContext(t.options);f&&y.delayNextStep(f),mp(this,b,y),d=Math.max(d,y.currentTimeline.currentTime),o.push(y.currentTimeline)}),o.forEach(b=>e.currentTimeline.mergeTimelineCollectedStyles(b)),e.transformIntoNewTimeline(d),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const o=t.strValue;return vk(e.params?tT(o,e.params,e.errors):o,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const o=e.currentAnimateTimings=this._visitTiming(t.timings,e),d=e.currentTimeline;o.delay&&(e.incrementTime(o.delay),d.snapshotCurrentStyles());const f=t.style;5==f.type?this.visitKeyframes(f,e):(e.incrementTime(o.duration),this.visitStyle(f,e),d.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const o=e.currentTimeline,d=e.currentAnimateTimings;!d&&o.hasCurrentStyleProperties()&&o.forwardFrame();const f=d&&d.easing||t.easing;t.isEmptyStep?o.applyEmptyStep(f):o.setStyles(t.styles,f,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const o=e.currentAnimateTimings,d=e.currentTimeline.duration,f=o.duration,y=e.createSubContext().currentTimeline;y.easing=o.easing,t.styles.forEach(w=>{y.forwardTime((w.offset||0)*f),y.setStyles(w.styles,w.easing,e.errors,e.options),y.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(y),e.transformIntoNewTimeline(d+f),e.previousNode=t}visitQuery(t,e){const o=e.currentTimeline.currentTime,d=t.options||{},f=d.delay?_d(d.delay):0;f&&(6===e.previousNode.type||0==o&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=gu);let b=o;const y=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!d.optional,e.errors);e.currentQueryTotal=y.length;let w=null;y.forEach((k,Q)=>{e.currentQueryIndex=Q;const ie=e.createSubContext(t.options,k);f&&ie.delayNextStep(f),k===e.element&&(w=ie.currentTimeline),mp(this,t.animation,ie),ie.currentTimeline.applyStylesToKeyframe(),b=Math.max(b,ie.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(b),w&&(e.currentTimeline.mergeTimelineCollectedStyles(w),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const o=e.parentContext,d=e.currentTimeline,f=t.timings,b=Math.abs(f.duration),y=b*(e.currentQueryTotal-1);let w=b*e.currentQueryIndex;switch(f.duration<0?"reverse":f.easing){case"reverse":w=y-w;break;case"full":w=o.currentStaggerTime}const Q=e.currentTimeline;w&&Q.delayNextStep(w);const ie=Q.currentTime;mp(this,t.animation,e),e.previousNode=t,o.currentStaggerTime=d.currentTime-ie+(d.startTime-o.currentTimeline.startTime)}}const gu={};class vd{constructor(t,e,o,d,f,b,y,w){this._driver=t,this.element=e,this.subInstructions=o,this._enterClassName=d,this._leaveClassName=f,this.errors=b,this.timelines=y,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=gu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=w||new ri(this._driver,e,0),y.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const o=t;let d=this.options;null!=o.duration&&(d.duration=_d(o.duration)),null!=o.delay&&(d.delay=_d(o.delay));const f=o.params;if(f){let b=d.params;b||(b=this.options.params={}),Object.keys(f).forEach(y=>{(!e||!b.hasOwnProperty(y))&&(b[y]=tT(f[y],b,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const o=t.params={};Object.keys(e).forEach(d=>{o[d]=e[d]})}}return t}createSubContext(t=null,e,o){const d=e||this.element,f=new vd(this._driver,d,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(d,o||0));return f.previousNode=this.previousNode,f.currentAnimateTimings=this.currentAnimateTimings,f.options=this._copyOptions(),f.updateOptions(t),f.currentQueryIndex=this.currentQueryIndex,f.currentQueryTotal=this.currentQueryTotal,f.parentContext=this,this.subContextCount++,f}transformIntoNewTimeline(t){return this.previousNode=gu,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,o){const d={duration:e??t.duration,delay:this.currentTimeline.currentTime+(o??0)+t.delay,easing:""},f=new V6(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,d,t.stretchStartingKeyframe);return this.timelines.push(f),d}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,o,d,f,b){let y=[];if(d&&y.push(this.element),t.length>0){t=(t=t.replace(F6,"."+this._enterClassName)).replace(U6,"."+this._leaveClassName);let k=this._driver.query(this.element,t,1!=o);0!==o&&(k=o<0?k.slice(k.length+o,k.length):k.slice(0,o)),y.push(...k)}return!f&&0==y.length&&b.push(function p6(n){return new hn(3014,!1)}()),y}}class ri{constructor(t,e,o,d){this._driver=t,this.element=e,this.startTime=o,this._elementTimelineStylesLookup=d,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ri(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,o]of this._globalTimelineStyles)this._backFill.set(e,o||k_),this._currentKeyframe.set(e,k_);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,o,d){e&&this._previousKeyframe.set("easing",e);const f=d&&d.params||{},b=function j6(n,t){const e=new Map;let o;return n.forEach(d=>{if("*"===d){o=o||t.keys();for(let f of o)e.set(f,k_)}else sc(d,e)}),e}(t,this._globalTimelineStyles);for(let[y,w]of b){const k=tT(w,f,o);this._pendingStyles.set(y,k),this._localTimelineStyles.has(y)||this._backFill.set(y,this._globalTimelineStyles.get(y)??k_),this._updateStyle(y,k)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,o)=>{const d=this._styleSummary.get(o);(!d||e.time>d.time)&&this._updateStyle(o,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,o=1===this._keyframes.size&&0===this.duration;let d=[];this._keyframes.forEach((y,w)=>{const k=sc(y,new Map,this._backFill);k.forEach((Q,ie)=>{"!"===Q?t.add(ie):Q===k_&&e.add(ie)}),o||k.set("offset",w/this.duration),d.push(k)});const f=t.size?Iy(t.values()):[],b=e.size?Iy(e.values()):[];if(o){const y=d[0],w=new Map(y);y.set("offset",0),w.set("offset",1),d=[y,w]}return Jx(this.element,d,f,b,this.duration,this.startTime,this.easing,!1)}}class V6 extends ri{constructor(t,e,o,d,f,b,y=!1){super(t,e,b.delay),this.keyframes=o,this.preStyleProps=d,this.postStyleProps=f,this._stretchStartingKeyframe=y,this.timings={duration:b.duration,delay:b.delay,easing:b.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:o,easing:d}=this.timings;if(this._stretchStartingKeyframe&&e){const f=[],b=o+e,y=e/b,w=sc(t[0]);w.set("offset",0),f.push(w);const k=sc(t[0]);k.set("offset",Xx(y)),f.push(k);const Q=t.length-1;for(let ie=1;ie<=Q;ie++){let Ie=sc(t[ie]);const ke=Ie.get("offset");Ie.set("offset",Xx((e+ke*o)/b)),f.push(Ie)}o=b,e=0,d="",t=f}return Jx(this.element,t,this.preStyleProps,this.postStyleProps,o,e,d,!0)}}function Xx(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Zx{}const Yn=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class aW extends Zx{normalizePropertyName(t,e){return Gx(t)}normalizeStyleValue(t,e,o,d){let f="";const b=o.toString().trim();if(Yn.has(e)&&0!==o&&"0"!==o)if("number"==typeof o)f="px";else{const y=o.match(/^[+-]?[\d\.]+([a-z]*)$/);y&&0==y[1].length&&d.push(function zG(n,t){return new hn(3005,!1)}())}return b+f}}function Ik(n,t,e,o,d,f,b,y,w,k,Q,ie,Ie){return{type:0,element:n,triggerName:t,isRemovalTransition:d,fromState:e,fromStyles:f,toState:o,toStyles:b,timelines:y,queriedElements:w,preStyleProps:k,postStyleProps:Q,totalTime:ie,errors:Ie}}const cV={};class uV{constructor(t,e,o){this._triggerName=t,this.ast=e,this._stateStyles=o}match(t,e,o,d){return function cW(n,t,e,o,d){return n.some(f=>f(t,e,o,d))}(this.ast.matchers,t,e,o,d)}buildStyles(t,e,o){let d=this._stateStyles.get("*");return void 0!==t&&(d=this._stateStyles.get(t?.toString())||d),d?d.buildStyles(e,o):new Map}build(t,e,o,d,f,b,y,w,k,Q){const ie=[],Ie=this.ast.options&&this.ast.options.params||cV,je=this.buildStyles(o,y&&y.params||cV,ie),at=w&&w.params||cV,Vt=this.buildStyles(d,at,ie),Qt=new Set,rn=new Map,Ut=new Map,Bn="void"===d,ai={params:uW(at,Ie),delay:this.ast.options?.delay},ci=Q?[]:Ck(t,e,this.ast.animation,f,b,je,Vt,ai,k,ie);let Yo=0;if(ci.forEach(pf=>{Yo=Math.max(pf.duration+pf.delay,Yo)}),ie.length)return Ik(e,this._triggerName,o,d,Bn,je,Vt,[],[],rn,Ut,Yo,ie);ci.forEach(pf=>{const mt=pf.element,Ee=hp(rn,mt,new Set);pf.preStyleProps.forEach(Ct=>Ee.add(Ct));const $e=hp(Ut,mt,new Set);pf.postStyleProps.forEach(Ct=>$e.add(Ct)),mt!==e&&Qt.add(mt)});const Ji=Iy(Qt.values());return Ik(e,this._triggerName,o,d,Bn,je,Vt,ci,Ji,rn,Ut,Yo)}}function uW(n,t){const e=eT(t);for(const o in n)n.hasOwnProperty(o)&&null!=n[o]&&(e[o]=n[o]);return e}class lW{constructor(t,e,o){this.styles=t,this.defaultParams=e,this.normalizer=o}buildStyles(t,e){const o=new Map,d=eT(this.defaultParams);return Object.keys(t).forEach(f=>{const b=t[f];null!==b&&(d[f]=b)}),this.styles.styles.forEach(f=>{"string"!=typeof f&&f.forEach((b,y)=>{b&&(b=tT(b,d,e));const w=this.normalizer.normalizePropertyName(y,e);b=this.normalizer.normalizeStyleValue(y,w,b,e),o.set(w,b)})}),o}}class pW{constructor(t,e,o){this.name=t,this.ast=e,this._normalizer=o,this.transitionFactories=[],this.states=new Map,e.states.forEach(d=>{this.states.set(d.name,new lW(d.style,d.options&&d.options.params||{},o))}),Q6(this.states,"true","1"),Q6(this.states,"false","0"),e.transitions.forEach(d=>{this.transitionFactories.push(new uV(t,d,this.states))}),this.fallbackTransition=function hW(n,t,e){return new uV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(b,y)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,o,d){return this.transitionFactories.find(b=>b.match(t,e,o,d))||null}matchStyles(t,e,o){return this.fallbackTransition.buildStyles(t,e,o)}}function Q6(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const H6=new $x;class fW{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const o=[],f=Vu(this._driver,e,o,[]);if(o.length)throw function zU(n){return new hn(3503,!1)}();this._animations.set(t,f)}_buildPlayer(t,e,o){const d=t.element,f=$w(0,this._normalizer,0,t.keyframes,e,o);return this._driver.animate(d,f,t.duration,t.delay,t.easing,[],!0)}create(t,e,o={}){const d=[],f=this._animations.get(t);let b;const y=new Map;if(f?(b=Ck(this._driver,e,f,wl,mk,new Map,new Map,o,H6,d),b.forEach(Q=>{const ie=hp(y,Q.element,new Map);Q.postStyleProps.forEach(Ie=>ie.set(Ie,null))})):(d.push(function YU(){return new hn(3300,!1)}()),b=[]),d.length)throw function Ux(n){return new hn(3504,!1)}();y.forEach((Q,ie)=>{Q.forEach((Ie,ke)=>{Q.set(ke,this._driver.computeStyle(ie,ke,k_))})});const k=ih(b.map(Q=>{const ie=y.get(Q.element);return this._buildPlayer(Q,new Map,ie)}));return this._playersById.set(t,k),k.onDestroy(()=>this.destroy(t)),this.players.push(k),k}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const o=this.players.indexOf(e);o>=0&&this.players.splice(o,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function qU(n){return new hn(3301,!1)}();return e}listen(t,e,o,d){const f=jx(e,"","","");return Ko(this._getPlayer(t),o,f,d),()=>{}}command(t,e,o,d){if("register"==o)return void this.register(t,d[0]);if("create"==o)return void this.create(t,e,d[0]||{});const f=this._getPlayer(t);switch(o){case"play":f.play();break;case"pause":f.pause();break;case"reset":f.reset();break;case"restart":f.restart();break;case"finish":f.finish();break;case"init":f.init();break;case"setPosition":f.setPosition(parseFloat(d[0]));break;case"destroy":this.destroy(t)}}}const eL="ng-animate-queued",Ty="ng-animate-disabled",lV=[],dV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},nT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ad="__ng_removed";class tL{constructor(t,e=""){this.namespaceId=e;const o=t&&t.hasOwnProperty("value");if(this.value=function Lm(n){return n??null}(o?t.value:t),o){const f=eT(t);delete f.value,this.options=f}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const o=this.options.params;Object.keys(e).forEach(d=>{null==o[d]&&(o[d]=e[d])})}}}const yd="void",pV=new tL(yd);class K6{constructor(t,e,o){this.id=t,this.hostElement=e,this._engine=o,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,oh(e,this._hostClassName)}listen(t,e,o,d){if(!this._triggers.has(e))throw function h6(n,t){return new hn(3302,!1)}();if(null==o||0==o.length)throw function f6(n){return new hn(3303,!1)}();if(!function Ry(n){return"start"==n||"done"==n}(o))throw function m6(n,t){return new hn(3400,!1)}();const f=hp(this._elementListeners,t,[]),b={name:e,phase:o,callback:d};f.push(b);const y=hp(this._engine.statesByElement,t,new Map);return y.has(e)||(oh(t,gk),oh(t,gk+"-"+e),y.set(e,pV)),()=>{this._engine.afterFlush(()=>{const w=f.indexOf(b);w>=0&&f.splice(w,1),this._triggers.has(e)||y.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function JU(n){return new hn(3401,!1)}();return e}trigger(t,e,o,d=!0){const f=this._getTrigger(e),b=new wk(this.id,e,t);let y=this._engine.statesByElement.get(t);y||(oh(t,gk),oh(t,gk+"-"+e),this._engine.statesByElement.set(t,y=new Map));let w=y.get(e);const k=new tL(o,this.id);if(!(o&&o.hasOwnProperty("value"))&&w&&k.absorbOptions(w.options),y.set(e,k),w||(w=pV),k.value!==yd&&w.value===k.value){if(!function q6(n,t){const e=Object.keys(n),o=Object.keys(t);if(e.length!=o.length)return!1;for(let d=0;d<e.length;d++){const f=e[d];if(!t.hasOwnProperty(f)||n[f]!==t[f])return!1}return!0}(w.params,k.params)){const at=[],Vt=f.matchStyles(w.value,w.params,at),Qt=f.matchStyles(k.value,k.params,at);at.length?this._engine.reportError(at):this._engine.afterFlush(()=>{F_(t,Vt),lf(t,Qt)})}return}const Ie=hp(this._engine.playersByElement,t,[]);Ie.forEach(at=>{at.namespaceId==this.id&&at.triggerName==e&&at.queued&&at.destroy()});let ke=f.matchTransition(w.value,k.value,t,k.params),je=!1;if(!ke){if(!d)return;ke=f.fallbackTransition,je=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:ke,fromState:w,toState:k,player:b,isFallbackTransition:je}),je||(oh(t,eL),b.onStart(()=>{QS(t,eL)})),b.onDone(()=>{let at=this.players.indexOf(b);at>=0&&this.players.splice(at,1);const Vt=this._engine.playersByElement.get(t);if(Vt){let Qt=Vt.indexOf(b);Qt>=0&&Vt.splice(Qt,1)}}),this.players.push(b),Ie.push(b),b}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,o)=>{this._elementListeners.set(o,e.filter(d=>d.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(o=>o.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const o=this._engine.driver.query(t,Xw,!0);o.forEach(d=>{if(d[Ad])return;const f=this._engine.fetchNamespacesByElement(d);f.size?f.forEach(b=>b.triggerLeaveAnimation(d,e,!1,!0)):this.clearElementCache(d)}),this._engine.afterFlushAnimationsDone(()=>o.forEach(d=>this.clearElementCache(d)))}triggerLeaveAnimation(t,e,o,d){const f=this._engine.statesByElement.get(t),b=new Map;if(f){const y=[];if(f.forEach((w,k)=>{if(b.set(k,w.value),this._triggers.has(k)){const Q=this.trigger(t,k,yd,d);Q&&y.push(Q)}}),y.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,b),o&&ih(y).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),o=this._engine.statesByElement.get(t);if(e&&o){const d=new Set;e.forEach(f=>{const b=f.name;if(d.has(b))return;d.add(b);const w=this._triggers.get(b).fallbackTransition,k=o.get(b)||pV,Q=new tL(yd),ie=new wk(this.id,b,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:b,transition:w,fromState:k,toState:Q,player:ie,isFallbackTransition:!0})})}}removeNode(t,e){const o=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let d=!1;if(o.totalAnimations){const f=o.players.length?o.playersByQueriedElement.get(t):[];if(f&&f.length)d=!0;else{let b=t;for(;b=b.parentNode;)if(o.statesByElement.get(b)){d=!0;break}}}if(this.prepareLeaveAnimationListeners(t),d)o.markElementAsRemoved(this.id,t,!1,e);else{const f=t[Ad];(!f||f===dV)&&(o.afterFlush(()=>this.clearElementCache(t)),o.destroyInnerAnimations(t),o._onRemovalComplete(t,e))}}insertNode(t,e){oh(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(o=>{const d=o.player;if(d.destroyed)return;const f=o.element,b=this._elementListeners.get(f);b&&b.forEach(y=>{if(y.name==o.triggerName){const w=jx(f,o.triggerName,o.fromState.value,o.toState.value);w._data=t,Ko(o.player,y.phase,w,y.callback)}}),d.markedForDestroy?this._engine.afterFlush(()=>{d.destroy()}):e.push(o)}),this._queue=[],e.sort((o,d)=>{const f=o.transition.ast.depCount,b=d.transition.ast.depCount;return 0==f||0==b?f-b:this._engine.driver.containsElement(o.element,d.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(o=>o.element===t)||e,e}}class z6{constructor(t,e,o){this.bodyNode=t,this.driver=e,this._normalizer=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(d,f)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(o=>{o.queued&&t.push(o)})}),t}createNamespace(t,e){const o=new K6(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(o,e):(this.newHostElements.set(e,o),this.collectEnterElement(e)),this._namespaceLookup[t]=o}_balanceNamespaceList(t,e){const o=this._namespaceList,d=this.namespacesByHostElement;if(o.length-1>=0){let b=!1,y=this.driver.getParentElement(e);for(;y;){const w=d.get(y);if(w){const k=o.indexOf(w);o.splice(k+1,0,t),b=!0;break}y=this.driver.getParentElement(y)}b||o.unshift(t)}else o.push(t);return d.set(e,t),t}register(t,e){let o=this._namespaceLookup[t];return o||(o=this.createNamespace(t,e)),o}registerTrigger(t,e,o){let d=this._namespaceLookup[t];d&&d.register(e,o)&&this.totalAnimations++}destroy(t,e){if(!t)return;const o=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(o.hostElement),delete this._namespaceLookup[t];const d=this._namespaceList.indexOf(o);d>=0&&this._namespaceList.splice(d,1)}),this.afterFlushAnimationsDone(()=>o.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,o=this.statesByElement.get(t);if(o)for(let d of o.values())if(d.namespaceId){const f=this._fetchNamespace(d.namespaceId);f&&e.add(f)}return e}trigger(t,e,o,d){if(ii(e)){const f=this._fetchNamespace(t);if(f)return f.trigger(e,o,d),!0}return!1}insertNode(t,e,o,d){if(!ii(e))return;const f=e[Ad];if(f&&f.setForRemoval){f.setForRemoval=!1,f.setForMove=!0;const b=this.collectedLeaveElements.indexOf(e);b>=0&&this.collectedLeaveElements.splice(b,1)}if(t){const b=this._fetchNamespace(t);b&&b.insertNode(e,o)}d&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),oh(t,Ty)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),QS(t,Ty))}removeNode(t,e,o,d){if(ii(e)){const f=t?this._fetchNamespace(t):null;if(f?f.removeNode(e,d):this.markElementAsRemoved(t,e,!1,d),o){const b=this.namespacesByHostElement.get(e);b&&b.id!==t&&b.removeNode(e,d)}}else this._onRemovalComplete(e,d)}markElementAsRemoved(t,e,o,d,f){this.collectedLeaveElements.push(e),e[Ad]={namespaceId:t,setForRemoval:d,hasAnimation:o,removedBeforeQueried:!1,previousTriggersValues:f}}listen(t,e,o,d,f){return ii(e)?this._fetchNamespace(t).listen(e,o,d,f):()=>{}}_buildInstruction(t,e,o,d,f){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,o,d,t.fromState.options,t.toState.options,e,f)}destroyInnerAnimations(t){let e=this.driver.query(t,Xw,!0);e.forEach(o=>this.destroyActiveAnimationsForElement(o)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Qx,!0),e.forEach(o=>this.finishActiveQueriedAnimationOnElement(o)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(o=>{o.queued?o.markedForDestroy=!0:o.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(o=>o.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ih(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Ad];if(e&&e.setForRemoval){if(t[Ad]=dV,e.namespaceId){this.destroyInnerAnimations(t);const o=this._fetchNamespace(e.namespaceId);o&&o.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Ty)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((o,d)=>this._balanceNamespaceList(o,d)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let o=0;o<this.collectedEnterElements.length;o++)oh(this.collectedEnterElements[o],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const o=[];try{e=this._flushAnimations(o,t)}finally{for(let d=0;d<o.length;d++)o[d]()}}else for(let o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(o=>o()),this._flushFns=[],this._whenQuietFns.length){const o=this._whenQuietFns;this._whenQuietFns=[],e.length?ih(e).onDone(()=>{o.forEach(d=>d())}):o.forEach(d=>d())}}reportError(t){throw function $G(n){return new hn(3402,!1)}()}_flushAnimations(t,e){const o=new $x,d=[],f=new Map,b=[],y=new Map,w=new Map,k=new Map,Q=new Set;this.disabledNodes.forEach(wt=>{Q.add(wt);const Yt=this.driver.query(wt,".ng-animate-queued",!0);for(let An=0;An<Yt.length;An++)Q.add(Yt[An])});const ie=this.bodyNode,Ie=Array.from(this.statesByElement.keys()),ke=Y6(Ie,this.collectedEnterElements),je=new Map;let at=0;ke.forEach((wt,Yt)=>{const An=wl+at++;je.set(Yt,An),wt.forEach(jn=>oh(jn,An))});const Vt=[],Qt=new Set,rn=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Yt=this.collectedLeaveElements[wt],An=Yt[Ad];An&&An.setForRemoval&&(Vt.push(Yt),Qt.add(Yt),An.hasAnimation?this.driver.query(Yt,".ng-star-inserted",!0).forEach(jn=>Qt.add(jn)):rn.add(Yt))}const Ut=new Map,Bn=Y6(Ie,Array.from(Qt));Bn.forEach((wt,Yt)=>{const An=mk+at++;Ut.set(Yt,An),wt.forEach(jn=>oh(jn,An))}),t.push(()=>{ke.forEach((wt,Yt)=>{const An=je.get(Yt);wt.forEach(jn=>QS(jn,An))}),Bn.forEach((wt,Yt)=>{const An=Ut.get(Yt);wt.forEach(jn=>QS(jn,An))}),Vt.forEach(wt=>{this.processLeaveNode(wt)})});const ai=[],ci=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(e).forEach(An=>{const jn=An.player,sn=An.element;if(ai.push(jn),this.collectedEnterElements.length){const Sn=sn[Ad];if(Sn&&Sn.setForMove){if(Sn.previousTriggersValues&&Sn.previousTriggersValues.has(An.triggerName)){const dr=Sn.previousTriggersValues.get(An.triggerName),zr=this.statesByElement.get(An.element);if(zr&&zr.has(An.triggerName)){const vs=zr.get(An.triggerName);vs.value=dr,zr.set(An.triggerName,vs)}}return void jn.destroy()}}const Nn=!ie||!this.driver.containsElement(ie,sn),Jn=Ut.get(sn),kr=je.get(sn),Kr=this._buildInstruction(An,o,kr,Jn,Nn);if(Kr.errors&&Kr.errors.length)return void ci.push(Kr);if(Nn)return jn.onStart(()=>F_(sn,Kr.fromStyles)),jn.onDestroy(()=>lf(sn,Kr.toStyles)),void d.push(jn);if(An.isFallbackTransition)return jn.onStart(()=>F_(sn,Kr.fromStyles)),jn.onDestroy(()=>lf(sn,Kr.toStyles)),void d.push(jn);const za=[];Kr.timelines.forEach(Sn=>{Sn.stretchStartingKeyframe=!0,this.disabledNodes.has(Sn.element)||za.push(Sn)}),Kr.timelines=za,o.append(sn,Kr.timelines),b.push({instruction:Kr,player:jn,element:sn}),Kr.queriedElements.forEach(Sn=>hp(y,Sn,[]).push(jn)),Kr.preStyleProps.forEach((Sn,dr)=>{if(Sn.size){let zr=w.get(dr);zr||w.set(dr,zr=new Set),Sn.forEach((vs,sh)=>zr.add(sh))}}),Kr.postStyleProps.forEach((Sn,dr)=>{let zr=k.get(dr);zr||k.set(dr,zr=new Set),Sn.forEach((vs,sh)=>zr.add(sh))})});if(ci.length){const wt=[];ci.forEach(Yt=>{wt.push(function g6(n,t){return new hn(3505,!1)}())}),ai.forEach(Yt=>Yt.destroy()),this.reportError(wt)}const Yo=new Map,Ji=new Map;b.forEach(wt=>{const Yt=wt.element;o.has(Yt)&&(Ji.set(Yt,Yt),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,Yo))}),d.forEach(wt=>{const Yt=wt.element;this._getPreviousPlayers(Yt,!1,wt.namespaceId,wt.triggerName,null).forEach(jn=>{hp(Yo,Yt,[]).push(jn),jn.destroy()})});const pf=Vt.filter(wt=>_V(wt,w,k)),mt=new Map;mV(mt,this.driver,rn,k,k_).forEach(wt=>{_V(wt,w,k)&&pf.push(wt)});const $e=new Map;ke.forEach((wt,Yt)=>{mV($e,this.driver,new Set(wt),w,"!")}),pf.forEach(wt=>{const Yt=mt.get(wt),An=$e.get(wt);mt.set(wt,new Map([...Array.from(Yt?.entries()??[]),...Array.from(An?.entries()??[])]))});const Ct=[],_t=[],on={};b.forEach(wt=>{const{element:Yt,player:An,instruction:jn}=wt;if(o.has(Yt)){if(Q.has(Yt))return An.onDestroy(()=>lf(Yt,jn.toStyles)),An.disabled=!0,An.overrideTotalTime(jn.totalTime),void d.push(An);let sn=on;if(Ji.size>1){let Jn=Yt;const kr=[];for(;Jn=Jn.parentNode;){const Kr=Ji.get(Jn);if(Kr){sn=Kr;break}kr.push(Jn)}kr.forEach(Kr=>Ji.set(Kr,sn))}const Nn=this._buildAnimation(An.namespaceId,jn,Yo,f,$e,mt);if(An.setRealPlayer(Nn),sn===on)Ct.push(An);else{const Jn=this.playersByElement.get(sn);Jn&&Jn.length&&(An.parentPlayer=ih(Jn)),d.push(An)}}else F_(Yt,jn.fromStyles),An.onDestroy(()=>lf(Yt,jn.toStyles)),_t.push(An),Q.has(Yt)&&d.push(An)}),_t.forEach(wt=>{const Yt=f.get(wt.element);if(Yt&&Yt.length){const An=ih(Yt);wt.setRealPlayer(An)}}),d.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<Vt.length;wt++){const Yt=Vt[wt],An=Yt[Ad];if(QS(Yt,mk),An&&An.hasAnimation)continue;let jn=[];if(y.size){let Nn=y.get(Yt);Nn&&Nn.length&&jn.push(...Nn);let Jn=this.driver.query(Yt,Qx,!0);for(let kr=0;kr<Jn.length;kr++){let Kr=y.get(Jn[kr]);Kr&&Kr.length&&jn.push(...Kr)}}const sn=jn.filter(Nn=>!Nn.destroyed);sn.length?gW(this,Yt,sn):this.processLeaveNode(Yt)}return Vt.length=0,Ct.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Yt=this.players.indexOf(wt);this.players.splice(Yt,1)}),wt.play()}),Ct}elementContainsData(t,e){let o=!1;const d=e[Ad];return d&&d.setForRemoval&&(o=!0),this.playersByElement.has(e)&&(o=!0),this.playersByQueriedElement.has(e)&&(o=!0),this.statesByElement.has(e)&&(o=!0),this._fetchNamespace(t).elementContainsData(e)||o}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,o,d,f){let b=[];if(e){const y=this.playersByQueriedElement.get(t);y&&(b=y)}else{const y=this.playersByElement.get(t);if(y){const w=!f||f==yd;y.forEach(k=>{k.queued||!w&&k.triggerName!=d||b.push(k)})}}return(o||d)&&(b=b.filter(y=>!(o&&o!=y.namespaceId||d&&d!=y.triggerName))),b}_beforeAnimationBuild(t,e,o){const f=e.element,b=e.isRemovalTransition?void 0:t,y=e.isRemovalTransition?void 0:e.triggerName;for(const w of e.timelines){const k=w.element,Q=k!==f,ie=hp(o,k,[]);this._getPreviousPlayers(k,Q,b,y,e.toState).forEach(ke=>{const je=ke.getRealPlayer();je.beforeDestroy&&je.beforeDestroy(),ke.destroy(),ie.push(ke)})}F_(f,e.fromStyles)}_buildAnimation(t,e,o,d,f,b){const y=e.triggerName,w=e.element,k=[],Q=new Set,ie=new Set,Ie=e.timelines.map(je=>{const at=je.element;Q.add(at);const Vt=at[Ad];if(Vt&&Vt.removedBeforeQueried)return new FD(je.duration,je.delay);const Qt=at!==w,rn=function nL(n){const t=[];return gV(n,t),t}((o.get(at)||lV).map(Yo=>Yo.getRealPlayer())).filter(Yo=>!!Yo.element&&Yo.element===at),Ut=f.get(at),Bn=b.get(at),ai=$w(0,this._normalizer,0,je.keyframes,Ut,Bn),ci=this._buildPlayer(je,ai,rn);if(je.subTimeline&&d&&ie.add(at),Qt){const Yo=new wk(t,y,at);Yo.setRealPlayer(ci),k.push(Yo)}return ci});k.forEach(je=>{hp(this.playersByQueriedElement,je.element,[]).push(je),je.onDone(()=>function hV(n,t,e){let o=n.get(t);if(o){if(o.length){const d=o.indexOf(e);o.splice(d,1)}0==o.length&&n.delete(t)}return o}(this.playersByQueriedElement,je.element,je))}),Q.forEach(je=>oh(je,_k));const ke=ih(Ie);return ke.onDestroy(()=>{Q.forEach(je=>QS(je,_k)),lf(w,e.toStyles)}),ie.forEach(je=>{hp(d,je,[]).push(ke)}),ke}_buildPlayer(t,e,o){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,o):new FD(t.duration,t.delay)}}class wk{constructor(t,e,o){this.namespaceId=t,this.triggerName=e,this.element=o,this._player=new FD,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,o)=>{e.forEach(d=>Ko(t,o,void 0,d))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){hp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function ii(n){return n&&1===n.nodeType}function fV(n,t){const e=n.style.display;return n.style.display=t??"none",e}function mV(n,t,e,o,d){const f=[];e.forEach(w=>f.push(fV(w)));const b=[];o.forEach((w,k)=>{const Q=new Map;w.forEach(ie=>{const Ie=t.computeStyle(k,ie,d);Q.set(ie,Ie),(!Ie||0==Ie.length)&&(k[Ad]=nT,b.push(k))}),n.set(k,Q)});let y=0;return e.forEach(w=>fV(w,f[y++])),b}function Y6(n,t){const e=new Map;if(n.forEach(y=>e.set(y,[])),0==t.length)return e;const d=new Set(t),f=new Map;function b(y){if(!y)return 1;let w=f.get(y);if(w)return w;const k=y.parentNode;return w=e.has(k)?k:d.has(k)?1:b(k),f.set(y,w),w}return t.forEach(y=>{const w=b(y);1!==w&&e.get(w).push(y)}),e}function oh(n,t){n.classList?.add(t)}function QS(n,t){n.classList?.remove(t)}function gW(n,t,e){ih(e).onDone(()=>n.processLeaveNode(t))}function gV(n,t){for(let e=0;e<n.length;e++){const o=n[e];o instanceof d5?gV(o.players,t):t.push(o)}}function _V(n,t,e){const o=e.get(n);if(!o)return!1;let d=t.get(n);return d?o.forEach(f=>d.add(f)):t.set(n,o),e.delete(n),!0}class Tk{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._triggerCache={},this.onRemovalComplete=(d,f)=>{},this._transitionEngine=new z6(t,e,o),this._timelineEngine=new fW(t,e,o),this._transitionEngine.onRemovalComplete=(d,f)=>this.onRemovalComplete(d,f)}registerTrigger(t,e,o,d,f){const b=t+"-"+d;let y=this._triggerCache[b];if(!y){const w=[],Q=Vu(this._driver,f,w,[]);if(w.length)throw function JG(n,t){return new hn(3404,!1)}();y=function dW(n,t,e){return new pW(n,t,e)}(d,Q,this._normalizer),this._triggerCache[b]=y}this._transitionEngine.registerTrigger(e,d,y)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,o,d){this._transitionEngine.insertNode(t,e,o,d)}onRemove(t,e,o,d){this._transitionEngine.removeNode(t,e,d||!1,o)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,o,d){if("@"==o.charAt(0)){const[f,b]=v6(o);this._timelineEngine.command(f,e,b,d)}else this._transitionEngine.trigger(t,e,o,d)}listen(t,e,o,d,f){if("@"==o.charAt(0)){const[b,y]=v6(o);return this._timelineEngine.listen(b,e,y,f)}return this._transitionEngine.listen(t,e,o,d,f)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $6=(()=>{class n{constructor(e,o,d){this._element=e,this._startStyles=o,this._endStyles=d,this._state=0;let f=n.initialStylesByElement.get(e);f||n.initialStylesByElement.set(e,f=new Map),this._initialStyles=f}start(){this._state<1&&(this._startStyles&&lf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(lf(this._element,this._initialStyles),this._endStyles&&(lf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(F_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(F_(this._element,this._endStyles),this._endStyles=null),lf(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function rL(n){let t=null;return n.forEach((e,o)=>{(function X6(n){return"display"===n||"position"===n})(o)&&(t=t||new Map,t.set(o,e))}),t}class vV{constructor(t,e,o,d){this.element=t,this.keyframes=e,this.options=o,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=o.duration,this._delay=o.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(o=>{e.push(Object.fromEntries(o))}),e}_triggerWebAnimation(t,e,o){return t.animate(this._convertKeyframesToObject(e),o)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((o,d)=>{"offset"!==d&&t.set(d,this._finished?o:gi(this.element,d))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class Z6{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return eV(t,e)}getParentElement(t){return ZU(t)}query(t,e,o){return fk(t,e,o)}computeStyle(t,e,o){return window.getComputedStyle(t)[e]}animate(t,e,o,d,f,b=[]){const w={duration:o,delay:d,fill:0==d?"both":"forwards"};f&&(w.easing=f);const k=new Map,Q=b.filter(ke=>ke instanceof vV);(function R6(n,t){return 0===n||0===t})(o,d)&&Q.forEach(ke=>{ke.currentSnapshot.forEach((je,at)=>k.set(at,je))});let ie=function C6(n){return n.length?n[0]instanceof Map?n:n.map(t=>Ak(t)):[]}(e).map(ke=>sc(ke));ie=function iV(n,t,e){if(e.size&&t.length){let o=t[0],d=[];if(e.forEach((f,b)=>{o.has(b)||d.push(b),o.set(b,f)}),d.length)for(let f=1;f<t.length;f++){let b=t[f];d.forEach(y=>b.set(y,gi(n,y)))}}return t}(t,ie,k);const Ie=function J6(n,t){let e=null,o=null;return Array.isArray(t)&&t.length?(e=rL(t[0]),t.length>1&&(o=rL(t[t.length-1]))):t instanceof Map&&(e=rL(t)),e||o?new $6(n,e,o):null}(t,ie);return new vV(t,ie,w,Ie)}}let eQ=(()=>{class n extends c5{constructor(e,o){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(o.body,{id:"0",encapsulation:Ku.None,styles:[],data:{animation:[]}})}build(e){const o=this._nextAnimationId.toString();this._nextAnimationId++;const d=Array.isArray(e)?u5(e):e;return rT(this._renderer,null,o,"register",[d]),new zo(o,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(qt(Uf),qt(Yr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();class zo extends V9{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new tQ(this._id,t,e||{},this._renderer)}}class tQ{constructor(t,e,o,d){this.id=t,this.element=e,this._renderer=d,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",o)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return rT(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function rT(n,t,e,o,d){return n.setProperty(t,`@@${e}:${o}`,d)}const nQ="@.disabled";let rQ=(()=>{class n{constructor(e,o,d){this.delegate=e,this.engine=o,this._zone=d,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),o.onRemovalComplete=(f,b)=>{const y=b?.parentNode(f);y&&b.removeChild(y,f)}}createRenderer(e,o){const f=this.delegate.createRenderer(e,o);if(!(e&&o&&o.data&&o.data.animation)){let Q=this._rendererCache.get(f);return Q||(Q=new iQ("",f,this.engine,()=>this._rendererCache.delete(f)),this._rendererCache.set(f,Q)),Q}const b=o.id,y=o.id+"-"+this._currentId;this._currentId++,this.engine.register(y,e);const w=Q=>{Array.isArray(Q)?Q.forEach(w):this.engine.registerTrigger(b,y,e,Q.name,Q)};return o.data.animation.forEach(w),new AV(this,y,f,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,o,d){e>=0&&e<this._microtaskId?this._zone.run(()=>o(d)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(f=>{const[b,y]=f;b(y)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([o,d]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(qt(Uf),qt(Tk),qt(Qr))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})();class iQ{constructor(t,e,o,d){this.namespaceId=t,this.delegate=e,this.engine=o,this._onDestroy=d,this.destroyNode=this.delegate.destroyNode?f=>e.destroyNode(f):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,o,d=!0){this.delegate.insertBefore(t,e,o),this.engine.onInsert(this.namespaceId,e,t,d)}removeChild(t,e,o){this.engine.onRemove(this.namespaceId,e,this.delegate,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,d){this.delegate.setAttribute(t,e,o,d)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,d){this.delegate.setStyle(t,e,o,d)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){"@"==e.charAt(0)&&e==nQ?this.disableAnimations(t,!!o):this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.delegate.listen(t,e,o)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class AV extends iQ{constructor(t,e,o,d,f){super(e,o,d,f),this.factory=t,this.namespaceId=e}setProperty(t,e,o){"@"==e.charAt(0)?"."==e.charAt(1)&&e==nQ?this.disableAnimations(t,o=void 0===o||!!o):this.engine.process(this.namespaceId,t,e.slice(1),o):this.delegate.setProperty(t,e,o)}listen(t,e,o){if("@"==e.charAt(0)){const d=function oQ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let f=e.slice(1),b="";return"@"!=f.charAt(0)&&([f,b]=function oL(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(f)),this.engine.listen(this.namespaceId,d,f,b,y=>{this.factory.scheduleListenerCallback(y._data||-1,o,y)})}return this.delegate.listen(t,e,o)}}const iT=[{provide:c5,useClass:eQ},{provide:Zx,useFactory:function _W(){return new aW}},{provide:Tk,useClass:(()=>{class n extends Tk{constructor(e,o,d,f){super(e.body,o,d)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(qt(Yr),qt(tV),qt(Zx),qt(s_))},n.\u0275prov=kn({token:n,factory:n.\u0275fac}),n})()},{provide:Uf,useFactory:function vW(n,t,e){return new rQ(n,t,e)},deps:[Zt,Tk,Qr]}],sL=[{provide:tV,useFactory:()=>new Z6},{provide:ep,useValue:"BrowserAnimations"},...iT],Rk=[{provide:tV,useClass:E6},{provide:ep,useValue:"NoopAnimations"},...iT];let AW=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Rk:sL}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({providers:sL,imports:[Ln]}),n})(),m=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({}),n})(),Ve=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ii({type:n}),n.\u0275inj=Ci({imports:[Uo,ts,m,Q3]}),n})();class nt{static#e=this.\u0275fac=function(e){return new(e||nt)};static#t=this.\u0275mod=Ii({type:nt,bootstrap:[Lx]});static#n=this.\u0275inj=Ci({imports:[Ln,AW,cd,$4,vN,p7,CH,x_,VH,mu,U3,eG,zw,R8,AG,Qw,Ve]})}It().bootstrapModule(nt).catch(n=>console.error(n))},1648:function(we,Oe,Y){we=Y.nmd(we);var U=Y(7156).default;!function(te){"use strict";function oe(s,l){var u=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);l&&(h=h.filter(function(v){return Object.getOwnPropertyDescriptor(s,v).enumerable})),u.push.apply(u,h)}return u}function H(s){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?oe(Object(u),!0).forEach(function(h){F(s,h,u[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):oe(Object(u)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(u,h))})}return s}function j(s){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function M(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function P(s,l){for(var u=0;u<l.length;u++){var h=l[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,se(h.key),h)}}function x(s,l,u){return l&&P(s.prototype,l),u&&P(s,u),Object.defineProperty(s,"prototype",{writable:!1}),s}function F(s,l,u){return(l=se(l))in s?Object.defineProperty(s,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[l]=u,s}function J(s,l){if(null==s)return{};var u,h,v=function(I,R){if(null==I)return{};var N,L,V={},O=Object.keys(I);for(L=0;L<O.length;L++)R.indexOf(N=O[L])>=0||(V[N]=I[N]);return V}(s,l);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(s);for(h=0;h<E.length;h++)l.indexOf(u=E[h])>=0||Object.prototype.propertyIsEnumerable.call(s,u)&&(v[u]=s[u])}return v}function se(s){var l=function(u,h){if("object"!=typeof u||null===u)return u;var v=u[Symbol.toPrimitive];if(void 0!==v){var E=v.call(u,h);if("object"!=typeof E)return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(s,"string");return"symbol"==typeof l?l:String(l)}var ue=function(s,l){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var v in h)h.hasOwnProperty(v)&&(u[v]=h[v])})(s,l)};function le(s,l){function u(){this.constructor=s}ue(s,l),s.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)}function $(s){return"function"==typeof s}var z=!1,G={Promise:void 0,set useDeprecatedSynchronousErrorHandling(s){if(s){var l=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+l.stack)}else z&&console.log("RxJS: Back to a better error behavior. Thank you. <3");z=s},get useDeprecatedSynchronousErrorHandling(){return z}};function ae(s){setTimeout(function(){throw s},0)}var Ae={closed:!0,next:function(s){},error:function(s){if(G.useDeprecatedSynchronousErrorHandling)throw s;ae(s)},complete:function(){}},Te=Array.isArray||function(s){return s&&"number"==typeof s.length};function he(s){return null!==s&&"object"==typeof s}var ye=function(){function s(l){return Error.call(this),this.message=l?l.length+" errors occurred during unsubscription:\n"+l.map(function(u,h){return h+1+") "+u.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=l,this}return s.prototype=Object.create(Error.prototype),s}(),me=function(){function s(l){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,l&&(this._ctorUnsubscribe=!0,this._unsubscribe=l)}return s.prototype.unsubscribe=function(){var l;if(!this.closed){var u=this,h=u._parentOrParents,v=u._ctorUnsubscribe,E=u._unsubscribe,I=u._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,h instanceof s)h.remove(this);else if(null!==h)for(var R=0;R<h.length;++R)h[R].remove(this);if($(E)){v&&(this._unsubscribe=void 0);try{E.call(this)}catch(V){l=V instanceof ye?ce(V.errors):[V]}}if(Te(I)){R=-1;for(var N=I.length;++R<N;){var L=I[R];if(he(L))try{L.unsubscribe()}catch(V){l=l||[],V instanceof ye?l=l.concat(ce(V.errors)):l.push(V)}}}if(l)throw new ye(l)}},s.prototype.add=function(l){var u=l;if(!l)return s.EMPTY;switch(typeof l){case"function":u=new s(l);case"object":if(u===this||u.closed||"function"!=typeof u.unsubscribe)return u;if(this.closed)return u.unsubscribe(),u;if(!(u instanceof s)){var h=u;(u=new s)._subscriptions=[h]}break;default:throw new Error("unrecognized teardown "+l+" added to Subscription.")}var v=u._parentOrParents;if(null===v)u._parentOrParents=this;else if(v instanceof s){if(v===this)return u;u._parentOrParents=[v,this]}else{if(-1!==v.indexOf(this))return u;v.push(this)}var E=this._subscriptions;return null===E?this._subscriptions=[u]:E.push(u),u},s.prototype.remove=function(l){var u=this._subscriptions;if(u){var h=u.indexOf(l);-1!==h&&u.splice(h,1)}},s.EMPTY=((l=new s).closed=!0,l),s;var l}();function ce(s){return s.reduce(function(l,u){return l.concat(u instanceof ye?u.errors:u)},[])}var pe="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),be=function(s){function l(u,h,v){var E=s.call(this)||this;switch(E.syncErrorValue=null,E.syncErrorThrown=!1,E.syncErrorThrowable=!1,E.isStopped=!1,arguments.length){case 0:E.destination=Ae;break;case 1:if(!u){E.destination=Ae;break}if("object"==typeof u){u instanceof l?(E.syncErrorThrowable=u.syncErrorThrowable,E.destination=u,u.add(E)):(E.syncErrorThrowable=!0,E.destination=new Fe(E,u));break}default:E.syncErrorThrowable=!0,E.destination=new Fe(E,u,h,v)}return E}return le(l,s),l.prototype[pe]=function(){return this},l.create=function(u,h,v){var E=new l(u,h,v);return E.syncErrorThrowable=!1,E},l.prototype.next=function(u){this.isStopped||this._next(u)},l.prototype.error=function(u){this.isStopped||(this.isStopped=!0,this._error(u))},l.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},l.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,s.prototype.unsubscribe.call(this))},l.prototype._next=function(u){this.destination.next(u)},l.prototype._error=function(u){this.destination.error(u),this.unsubscribe()},l.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},l.prototype._unsubscribeAndRecycle=function(){var u=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=u,this},l}(me),Fe=function(s){function l(u,h,v,E){var I,R=s.call(this)||this;R._parentSubscriber=u;var N=R;return $(h)?I=h:h&&(I=h.next,v=h.error,E=h.complete,h!==Ae&&($((N=Object.create(h)).unsubscribe)&&R.add(N.unsubscribe.bind(N)),N.unsubscribe=R.unsubscribe.bind(R))),R._context=N,R._next=I,R._error=v,R._complete=E,R}return le(l,s),l.prototype.next=function(u){if(!this.isStopped&&this._next){var h=this._parentSubscriber;G.useDeprecatedSynchronousErrorHandling&&h.syncErrorThrowable?this.__tryOrSetError(h,this._next,u)&&this.unsubscribe():this.__tryOrUnsub(this._next,u)}},l.prototype.error=function(u){if(!this.isStopped){var h=this._parentSubscriber,v=G.useDeprecatedSynchronousErrorHandling;if(this._error)v&&h.syncErrorThrowable?(this.__tryOrSetError(h,this._error,u),this.unsubscribe()):(this.__tryOrUnsub(this._error,u),this.unsubscribe());else if(h.syncErrorThrowable)v?(h.syncErrorValue=u,h.syncErrorThrown=!0):ae(u),this.unsubscribe();else{if(this.unsubscribe(),v)throw u;ae(u)}}},l.prototype.complete=function(){var u=this;if(!this.isStopped){var h=this._parentSubscriber;if(this._complete){var v=function(){return u._complete.call(u._context)};G.useDeprecatedSynchronousErrorHandling&&h.syncErrorThrowable?(this.__tryOrSetError(h,v),this.unsubscribe()):(this.__tryOrUnsub(v),this.unsubscribe())}else this.unsubscribe()}},l.prototype.__tryOrUnsub=function(u,h){try{u.call(this._context,h)}catch(v){if(this.unsubscribe(),G.useDeprecatedSynchronousErrorHandling)throw v;ae(v)}},l.prototype.__tryOrSetError=function(u,h,v){if(!G.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{h.call(this._context,v)}catch(E){return G.useDeprecatedSynchronousErrorHandling?(u.syncErrorValue=E,u.syncErrorThrown=!0,!0):(ae(E),!0)}return!1},l.prototype._unsubscribe=function(){var u=this._parentSubscriber;this._context=null,this._parentSubscriber=null,u.unsubscribe()},l}(be),xe="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ue(s){return s}function qe(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return Je(s)}function Je(s){return 0===s.length?Ue:1===s.length?s[0]:function(l){return s.reduce(function(u,h){return h(u)},l)}}var Pe=function(){function s(l){this._isScalar=!1,l&&(this._subscribe=l)}return s.prototype.lift=function(l){var u=new s;return u.source=this,u.operator=l,u},s.prototype.subscribe=function(l,u,h){var v=this.operator,E=function(I,R,N){if(I){if(I instanceof be)return I;if(I[pe])return I[pe]()}return I||R||N?new be(I,R,N):new be(Ae)}(l,u,h);if(E.add(v?v.call(E,this.source):this.source||G.useDeprecatedSynchronousErrorHandling&&!E.syncErrorThrowable?this._subscribe(E):this._trySubscribe(E)),G.useDeprecatedSynchronousErrorHandling&&E.syncErrorThrowable&&(E.syncErrorThrowable=!1,E.syncErrorThrown))throw E.syncErrorValue;return E},s.prototype._trySubscribe=function(l){try{return this._subscribe(l)}catch(u){G.useDeprecatedSynchronousErrorHandling&&(l.syncErrorThrown=!0,l.syncErrorValue=u),function(h){for(;h;){var I=h.destination;if(h.closed||h.isStopped)return!1;h=I&&I instanceof be?I:null}return!0}(l)?l.error(u):console.warn(u)}},s.prototype.forEach=function(l,u){var h=this;return new(u=Mt(u))(function(v,E){var I;I=h.subscribe(function(R){try{l(R)}catch(N){E(N),I&&I.unsubscribe()}},E,v)})},s.prototype._subscribe=function(l){var u=this.source;return u&&u.subscribe(l)},s.prototype[xe]=function(){return this},s.prototype.pipe=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return 0===l.length?this:Je(l)(this)},s.prototype.toPromise=function(l){var u=this;return new(l=Mt(l))(function(h,v){var E;u.subscribe(function(I){return E=I},function(I){return v(I)},function(){return h(E)})})},s.create=function(l){return new s(l)},s}();function Mt(s){if(s||(s=Promise),!s)throw new Error("no Promise impl found");return s}var Lt=function(){function s(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return s.prototype=Object.create(Error.prototype),s}(),yt=function(s){function l(u,h){var v=s.call(this)||this;return v.subject=u,v.subscriber=h,v.closed=!1,v}return le(l,s),l.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var u=this.subject,h=u.observers;if(this.subject=null,h&&0!==h.length&&!u.isStopped&&!u.closed){var v=h.indexOf(this.subscriber);-1!==v&&h.splice(v,1)}}},l}(me),We=function(s){function l(u){var h=s.call(this,u)||this;return h.destination=u,h}return le(l,s),l}(be),Be=function(s){function l(){var u=s.call(this)||this;return u.observers=[],u.closed=!1,u.isStopped=!1,u.hasError=!1,u.thrownError=null,u}return le(l,s),l.prototype[pe]=function(){return new We(this)},l.prototype.lift=function(u){var h=new Ge(this,this);return h.operator=u,h},l.prototype.next=function(u){if(this.closed)throw new Lt;if(!this.isStopped)for(var h=this.observers,v=h.length,E=h.slice(),I=0;I<v;I++)E[I].next(u)},l.prototype.error=function(u){if(this.closed)throw new Lt;this.hasError=!0,this.thrownError=u,this.isStopped=!0;for(var h=this.observers,v=h.length,E=h.slice(),I=0;I<v;I++)E[I].error(u);this.observers.length=0},l.prototype.complete=function(){if(this.closed)throw new Lt;this.isStopped=!0;for(var u=this.observers,h=u.length,v=u.slice(),E=0;E<h;E++)v[E].complete();this.observers.length=0},l.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},l.prototype._trySubscribe=function(u){if(this.closed)throw new Lt;return s.prototype._trySubscribe.call(this,u)},l.prototype._subscribe=function(u){if(this.closed)throw new Lt;return this.hasError?(u.error(this.thrownError),me.EMPTY):this.isStopped?(u.complete(),me.EMPTY):(this.observers.push(u),new yt(this,u))},l.prototype.asObservable=function(){var u=new Pe;return u.source=this,u},l.create=function(u,h){return new Ge(u,h)},l}(Pe),Ge=function(s){function l(u,h){var v=s.call(this)||this;return v.destination=u,v.source=h,v}return le(l,s),l.prototype.next=function(u){var h=this.destination;h&&h.next&&h.next(u)},l.prototype.error=function(u){var h=this.destination;h&&h.error&&this.destination.error(u)},l.prototype.complete=function(){var u=this.destination;u&&u.complete&&this.destination.complete()},l.prototype._subscribe=function(u){return this.source?this.source.subscribe(u):me.EMPTY},l}(Be),Re=function(s){function l(u){var h=s.call(this)||this;return h._value=u,h}return le(l,s),Object.defineProperty(l.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),l.prototype._subscribe=function(u){var h=s.prototype._subscribe.call(this,u);return h&&!h.closed&&u.next(this._value),h},l.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Lt;return this._value},l.prototype.next=function(u){s.prototype.next.call(this,this._value=u)},l}(Be),Xe=function(s){function l(u,h){var v=s.call(this,u,h)||this;return v.scheduler=u,v.work=h,v.pending=!1,v}return le(l,s),l.prototype.schedule=function(u,h){if(void 0===h&&(h=0),this.closed)return this;this.state=u;var v=this.id,E=this.scheduler;return null!=v&&(this.id=this.recycleAsyncId(E,v,h)),this.pending=!0,this.delay=h,this.id=this.id||this.requestAsyncId(E,this.id,h),this},l.prototype.requestAsyncId=function(u,h,v){return void 0===v&&(v=0),setInterval(u.flush.bind(u,this),v)},l.prototype.recycleAsyncId=function(u,h,v){if(void 0===v&&(v=0),null!==v&&this.delay===v&&!1===this.pending)return h;clearInterval(h)},l.prototype.execute=function(u,h){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var v=this._execute(u,h);if(v)return v;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(u,h){var v=!1,E=void 0;try{this.work(u)}catch(I){v=!0,E=!!I&&I||new Error(I)}if(v)return this.unsubscribe(),E},l.prototype._unsubscribe=function(){var u=this.id,h=this.scheduler,v=h.actions,E=v.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==E&&v.splice(E,1),null!=u&&(this.id=this.recycleAsyncId(h,u,null)),this.delay=null},l}(function(s){function l(u,h){return s.call(this)||this}return le(l,s),l.prototype.schedule=function(u,h){return this},l}(me)),Ot=function(s){function l(u,h){var v=s.call(this,u,h)||this;return v.scheduler=u,v.work=h,v}return le(l,s),l.prototype.schedule=function(u,h){return void 0===h&&(h=0),h>0?s.prototype.schedule.call(this,u,h):(this.delay=h,this.state=u,this.scheduler.flush(this),this)},l.prototype.execute=function(u,h){return h>0||this.closed?s.prototype.execute.call(this,u,h):this._execute(u,h)},l.prototype.requestAsyncId=function(u,h,v){return void 0===v&&(v=0),null!==v&&v>0||null===v&&this.delay>0?s.prototype.requestAsyncId.call(this,u,h,v):u.flush(this)},l}(Xe),Kt=function(){function s(l,u){void 0===u&&(u=s.now),this.SchedulerAction=l,this.now=u}return s.prototype.schedule=function(l,u,h){return void 0===u&&(u=0),new this.SchedulerAction(this,l).schedule(h,u)},s.now=function(){return Date.now()},s}(),Tt=function(s){function l(u,h){void 0===h&&(h=Kt.now);var v=s.call(this,u,function(){return l.delegate&&l.delegate!==v?l.delegate.now():h()})||this;return v.actions=[],v.active=!1,v.scheduled=void 0,v}return le(l,s),l.prototype.schedule=function(u,h,v){return void 0===h&&(h=0),l.delegate&&l.delegate!==this?l.delegate.schedule(u,h,v):s.prototype.schedule.call(this,u,h,v)},l.prototype.flush=function(u){var h=this.actions;if(this.active)h.push(u);else{var v;this.active=!0;do{if(v=u.execute(u.state,u.delay))break}while(u=h.shift());if(this.active=!1,v){for(;u=h.shift();)u.unsubscribe();throw v}}},l}(Kt),zt=new(function(s){function l(){return null!==s&&s.apply(this,arguments)||this}return le(l,s),l}(Tt))(Ot),Qn=zt,Ht=new Pe(function(s){return s.complete()});function br(s){return s?(l=s,new Pe(function(u){return l.schedule(function(){return u.complete()})})):Ht;var l}function Sr(s){return s&&"function"==typeof s.schedule}var _r,s,fr=function(s){return function(l){for(var u=0,h=s.length;u<h&&!l.closed;u++)l.next(s[u]);l.complete()}};function pr(s,l){return new Pe(function(u){var h=new me,v=0;return h.add(l.schedule(function(){v!==s.length?(u.next(s[v++]),u.closed||h.add(this.schedule())):u.complete()})),h})}function ki(s,l){return l?pr(s,l):new Pe(fr(s))}function $n(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var u=s[s.length-1];return Sr(u)?(s.pop(),pr(s,u)):ki(s)}function Mi(s,l){return new Pe(l?function(u){return l.schedule(Js,0,{error:s,subscriber:u})}:function(u){return u.error(s)})}function Js(s){s.subscriber.error(s.error)}(s=_r||(_r={})).NEXT="N",s.ERROR="E",s.COMPLETE="C";var Et=function(){function s(l,u,h){this.kind=l,this.value=u,this.error=h,this.hasValue="N"===l}return s.prototype.observe=function(l){switch(this.kind){case"N":return l.next&&l.next(this.value);case"E":return l.error&&l.error(this.error);case"C":return l.complete&&l.complete()}},s.prototype.do=function(l,u,h){switch(this.kind){case"N":return l&&l(this.value);case"E":return u&&u(this.error);case"C":return h&&h()}},s.prototype.accept=function(l,u,h){return l&&"function"==typeof l.next?this.observe(l):this.do(l,u,h)},s.prototype.toObservable=function(){switch(this.kind){case"N":return $n(this.value);case"E":return Mi(this.error);case"C":return br()}throw new Error("unexpected notification kind value")},s.createNext=function(l){return void 0!==l?new s("N",l):s.undefinedValueNotification},s.createError=function(l){return new s("E",void 0,l)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s.undefinedValueNotification=new s("N",void 0),s}();function Nt(s,l){return void 0===l&&(l=0),function(u){return u.lift(new Xt(s,l))}}var Xt=function(){function s(l,u){void 0===u&&(u=0),this.scheduler=l,this.delay=u}return s.prototype.call=function(l,u){return u.subscribe(new Ke(l,this.scheduler,this.delay))},s}(),Ke=function(s){function l(u,h,v){void 0===v&&(v=0);var E=s.call(this,u)||this;return E.scheduler=h,E.delay=v,E}return le(l,s),l.dispatch=function(u){u.notification.observe(u.destination),this.unsubscribe()},l.prototype.scheduleMessage=function(u){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new Me(u,this.destination)))},l.prototype._next=function(u){this.scheduleMessage(Et.createNext(u))},l.prototype._error=function(u){this.scheduleMessage(Et.createError(u)),this.unsubscribe()},l.prototype._complete=function(){this.scheduleMessage(Et.createComplete()),this.unsubscribe()},l}(be),Me=function(s,l){this.notification=s,this.destination=l},ot=function(s){function l(u,h,v){void 0===u&&(u=Number.POSITIVE_INFINITY),void 0===h&&(h=Number.POSITIVE_INFINITY);var E=s.call(this)||this;return E.scheduler=v,E._events=[],E._infiniteTimeWindow=!1,E._bufferSize=u<1?1:u,E._windowTime=h<1?1:h,h===Number.POSITIVE_INFINITY?(E._infiniteTimeWindow=!0,E.next=E.nextInfiniteTimeWindow):E.next=E.nextTimeWindow,E}return le(l,s),l.prototype.nextInfiniteTimeWindow=function(u){if(!this.isStopped){var h=this._events;h.push(u),h.length>this._bufferSize&&h.shift()}s.prototype.next.call(this,u)},l.prototype.nextTimeWindow=function(u){this.isStopped||(this._events.push(new Dn(this._getNow(),u)),this._trimBufferThenGetEvents()),s.prototype.next.call(this,u)},l.prototype._subscribe=function(u){var h,v=this._infiniteTimeWindow,E=v?this._events:this._trimBufferThenGetEvents(),I=this.scheduler,R=E.length;if(this.closed)throw new Lt;if(this.isStopped||this.hasError?h=me.EMPTY:(this.observers.push(u),h=new yt(this,u)),I&&u.add(u=new Ke(u,I)),v)for(var N=0;N<R&&!u.closed;N++)u.next(E[N]);else for(N=0;N<R&&!u.closed;N++)u.next(E[N].value);return this.hasError?u.error(this.thrownError):this.isStopped&&u.complete(),h},l.prototype._getNow=function(){return(this.scheduler||Qn).now()},l.prototype._trimBufferThenGetEvents=function(){for(var u=this._getNow(),h=this._bufferSize,v=this._windowTime,E=this._events,I=E.length,R=0;R<I&&!(u-E[R].time<v);)R++;return I>h&&(R=Math.max(R,I-h)),R>0&&E.splice(0,R),E},l}(Be),Dn=function(s,l){this.time=s,this.value=l},un=1,Gi=Promise.resolve(),Oo={};function xs(s){return s in Oo&&(delete Oo[s],!0)}var mo=function(s){function l(u,h){var v=s.call(this,u,h)||this;return v.scheduler=u,v.work=h,v}return le(l,s),l.prototype.requestAsyncId=function(u,h,v){return void 0===v&&(v=0),null!==v&&v>0?s.prototype.requestAsyncId.call(this,u,h,v):(u.actions.push(this),u.scheduled||(u.scheduled=(E=u.flush.bind(u,null),I=un++,Oo[I]=!0,Gi.then(function(){return xs(I)&&E()}),I)));var E,I},l.prototype.recycleAsyncId=function(u,h,v){if(void 0===v&&(v=0),null!==v&&v>0||null===v&&this.delay>0)return s.prototype.recycleAsyncId.call(this,u,h,v);0===u.actions.length&&(xs(h),u.scheduled=void 0)},l}(Xe),As=new(function(s){function l(){return null!==s&&s.apply(this,arguments)||this}return le(l,s),l.prototype.flush=function(u){this.active=!0,this.scheduled=void 0;var h,v=this.actions,E=-1,I=v.length;u=u||v.shift();do{if(h=u.execute(u.state,u.delay))break}while(++E<I&&(u=v.shift()));if(this.active=!1,h){for(;++E<I&&(u=v.shift());)u.unsubscribe();throw h}},l}(Tt))(mo),go=As,Qu=new Tt(Xe),xn=Qu;function an(){}var Ye=function(){function s(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return s.prototype=Object.create(Error.prototype),s}(),pt=function(){function s(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return s.prototype=Object.create(Error.prototype),s}();function ht(s,l){return function(u){if("function"!=typeof s)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return u.lift(new en(s,l))}}var en=function(){function s(l,u){this.project=l,this.thisArg=u}return s.prototype.call=function(l,u){return u.subscribe(new dn(l,this.project,this.thisArg))},s}(),dn=function(s){function l(u,h,v){var E=s.call(this,u)||this;return E.project=h,E.count=0,E.thisArg=v||E,E}return le(l,s),l.prototype._next=function(u){var h;try{h=this.project.call(this.thisArg,u,this.count++)}catch(v){return void this.destination.error(v)}this.destination.next(h)},l}(be),ui=function(s){function l(){return null!==s&&s.apply(this,arguments)||this}return le(l,s),l.prototype.notifyNext=function(u,h,v,E,I){this.destination.next(h)},l.prototype.notifyError=function(u,h){this.destination.error(u)},l.prototype.notifyComplete=function(u){this.destination.complete()},l}(be),_o=function(s){function l(u,h,v){var E=s.call(this)||this;return E.parent=u,E.outerValue=h,E.outerIndex=v,E.index=0,E}return le(l,s),l.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this.index++,this)},l.prototype._error=function(u){this.parent.notifyError(u,this),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},l}(be),rs="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Is=function(s){return s&&"number"==typeof s.length&&"function"!=typeof s};function no(s){return!!s&&"function"!=typeof s.subscribe&&"function"==typeof s.then}var $i=function(s){if(s&&"function"==typeof s[xe])return h=s,function(E){var I=h[xe]();if("function"!=typeof I.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return I.subscribe(E)};if(Is(s))return fr(s);if(no(s))return u=s,function(E){return u.then(function(I){E.closed||(E.next(I),E.complete())},function(I){return E.error(I)}).then(null,ae),E};if(s&&"function"==typeof s[rs])return l=s,function(E){for(var I=l[rs]();;){var R=void 0;try{R=I.next()}catch(N){return E.error(N),E}if(R.done){E.complete();break}if(E.next(R.value),E.closed)break}return"function"==typeof I.return&&E.add(function(){I.return&&I.return()}),E};var l,u,h,v=he(s)?"an invalid object":"'"+s+"'";throw new TypeError("You provided "+v+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function vr(s,l,u,h,v){if(void 0===v&&(v=new _o(s,u,h)),!v.closed)return l instanceof Pe?l.subscribe(v):$i(l)(v)}function En(s,l){return l?function(u,h){if(null!=u){if((v=u)&&"function"==typeof v[xe])return function(v,E){return new Pe(function(I){var R=new me;return R.add(E.schedule(function(){var N=v[xe]();R.add(N.subscribe({next:function(L){R.add(E.schedule(function(){return I.next(L)}))},error:function(L){R.add(E.schedule(function(){return I.error(L)}))},complete:function(){R.add(E.schedule(function(){return I.complete()}))}}))})),R})}(u,h);if(no(u))return function(v,E){return new Pe(function(I){var R=new me;return R.add(E.schedule(function(){return v.then(function(N){R.add(E.schedule(function(){I.next(N),R.add(E.schedule(function(){return I.complete()}))}))},function(N){R.add(E.schedule(function(){return I.error(N)}))})})),R})}(u,h);if(Is(u))return pr(u,h);if(function(v){return v&&"function"==typeof v[rs]}(u)||"string"==typeof u)return function(v,E){if(!v)throw new Error("Iterable cannot be null");return new Pe(function(I){var R,N=new me;return N.add(function(){R&&"function"==typeof R.return&&R.return()}),N.add(E.schedule(function(){R=v[rs](),N.add(E.schedule(function(){if(!I.closed){var L,V;try{var O=R.next();L=O.value,V=O.done}catch(X){return void I.error(X)}V?I.complete():(I.next(L),this.schedule())}}))})),N})}(u,h)}var v;throw new TypeError((null!==u&&typeof u||u)+" is not observable")}(s,l):s instanceof Pe?s:new Pe($i(s))}var Qc=function(s){function l(u){var h=s.call(this)||this;return h.parent=u,h}return le(l,s),l.prototype._next=function(u){this.parent.notifyNext(u)},l.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},l}(be);!function(s){function l(u,h,v){var E=s.call(this)||this;return E.parent=u,E.outerValue=h,E.outerIndex=v,E}le(l,s),l.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this)},l.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(be);var _u=function(s){function l(){return null!==s&&s.apply(this,arguments)||this}return le(l,s),l.prototype.notifyNext=function(u){this.destination.next(u)},l.prototype.notifyError=function(u){this.destination.error(u)},l.prototype.notifyComplete=function(){this.destination.complete()},l}(be);function Tl(s,l){if(!l.closed){if(s instanceof Pe)return s.subscribe(l);var u;try{u=$i(s)(l)}catch(h){l.error(h)}return u}}function Pn(s,l,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof l?function(h){return h.pipe(Pn(function(v,E){return En(s(v,E)).pipe(ht(function(I,R){return l(v,I,E,R)}))},u))}:("number"==typeof l&&(u=l),function(h){return h.lift(new EV(s,u))})}!function(s){function l(){return null!==s&&s.apply(this,arguments)||this}le(l,s),l.prototype.notifyNext=function(u,h,v,E){this.destination.next(h)},l.prototype.notifyError=function(u){this.destination.error(u)},l.prototype.notifyComplete=function(u){this.destination.complete()}}(be);var EV=function(){function s(l,u){void 0===u&&(u=Number.POSITIVE_INFINITY),this.project=l,this.concurrent=u}return s.prototype.call=function(l,u){return u.subscribe(new Ya(l,this.project,this.concurrent))},s}(),Ya=function(s){function l(u,h,v){void 0===v&&(v=Number.POSITIVE_INFINITY);var E=s.call(this,u)||this;return E.project=h,E.concurrent=v,E.hasCompleted=!1,E.buffer=[],E.active=0,E.index=0,E}return le(l,s),l.prototype._next=function(u){this.active<this.concurrent?this._tryNext(u):this.buffer.push(u)},l.prototype._tryNext=function(u){var h,v=this.index++;try{h=this.project(u,v)}catch(E){return void this.destination.error(E)}this.active++,this._innerSub(h)},l.prototype._innerSub=function(u){var h=new Qc(this),v=this.destination;v.add(h);var E=Tl(u,h);E!==h&&v.add(E)},l.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},l.prototype.notifyNext=function(u){this.destination.next(u)},l.prototype.notifyComplete=function(){var u=this.buffer;this.active--,u.length>0?this._next(u.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},l}(_u);function aT(s){return void 0===s&&(s=Number.POSITIVE_INFINITY),Pn(Ue,s)}function U_(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return aT(1)($n.apply(void 0,s))}function HS(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(1===s.length){var u=s[0];if(Te(u))return hf(u,null);if(he(u)&&Object.getPrototypeOf(u)===Object.prototype){var h=Object.keys(u);return hf(h.map(function(E){return u[E]}),h)}}if("function"==typeof s[s.length-1]){var v=s.pop();return hf(s=1===s.length&&Te(s[0])?s[0]:s,null).pipe(ht(function(E){return v.apply(void 0,E)}))}return hf(s,null)}function hf(s,l){return new Pe(function(u){var h=s.length;if(0!==h)for(var v=new Array(h),E=0,I=0,R=function(L){var V=En(s[L]),O=!1;u.add(V.subscribe({next:function(X){O||(O=!0,I++),v[L]=X},error:function(X){return u.error(X)},complete:function(){++E!==h&&O||(I===h&&u.next(l?l.reduce(function(X,ee,re){return X[ee]=v[re],X},{}):v),u.complete())}}))},N=0;N<h;N++)R(N);else u.complete()})}function is(s,l,u,h){return $(u)&&(h=u,u=void 0),h?is(s,l,u).pipe(ht(function(v){return Te(v)?h.apply(void 0,v):h(v)})):new Pe(function(v){cT(s,l,function(E){v.next(arguments.length>1?Array.prototype.slice.call(arguments):E)},v,u)})}function cT(s,l,u,h,v){var E,O;if((O=s)&&"function"==typeof O.addEventListener&&"function"==typeof O.removeEventListener){var I=s;s.addEventListener(l,u,v),E=function(){return I.removeEventListener(l,u,v)}}else if(function(O){return O&&"function"==typeof O.on&&"function"==typeof O.off}(s)){var R=s;s.on(l,u),E=function(){return R.off(l,u)}}else if(function(O){return O&&"function"==typeof O.addListener&&"function"==typeof O.removeListener}(s)){var N=s;s.addListener(l,u),E=function(){return N.removeListener(l,u)}}else{if(!s||!s.length)throw new TypeError("Invalid event target");for(var L=0,V=s.length;L<V;L++)cT(s[L],l,u,h,v)}h.add(E)}function ah(s,l,u){return u?ah(s,l).pipe(ht(function(h){return Te(h)?u.apply(void 0,h):u(h)})):new Pe(function(h){var v,E=function(){for(var I=[],R=0;R<arguments.length;R++)I[R]=arguments[R];return h.next(1===I.length?I[0]:I)};try{v=s(E)}catch(I){return void h.error(I)}if($(l))return function(){return l(E,v)}})}function Dy(s){return!Te(s)&&s-parseFloat(s)+1>=0}function V_(s,l){return void 0===s&&(s=0),void 0===l&&(l=xn),(!Dy(s)||s<0)&&(s=0),l&&"function"==typeof l.schedule||(l=xn),new Pe(function(u){return u.add(l.schedule(Dk,s,{subscriber:u,counter:0,period:s})),u})}function Dk(s){var l=s.subscriber,u=s.counter,h=s.period;l.next(u),this.schedule({subscriber:l,counter:u+1,period:h},h)}function $s(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var u=Number.POSITIVE_INFINITY,h=null,v=s[s.length-1];return Sr(v)?(h=s.pop(),s.length>1&&"number"==typeof s[s.length-1]&&(u=s.pop())):"number"==typeof v&&(u=s.pop()),null===h&&1===s.length&&s[0]instanceof Pe?s[0]:aT(u)(ki(s,h))}function j_(s,l){function u(){return!u.pred.apply(u.thisArg,arguments)}return u.pred=s,u.thisArg=l,u}function ln(s,l){return function(u){return u.lift(new kk(s,l))}}var kk=function(){function s(l,u){this.predicate=l,this.thisArg=u}return s.prototype.call=function(l,u){return u.subscribe(new Bm(l,this.predicate,this.thisArg))},s}(),Bm=function(s){function l(u,h,v){var E=s.call(this,u)||this;return E.predicate=h,E.thisArg=v,E.count=0,E}return le(l,s),l.prototype._next=function(u){var h;try{h=this.predicate.call(this.thisArg,u,this.count++)}catch(v){return void this.destination.error(v)}h&&this.destination.next(u)},l}(be);function bi(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(1===s.length){if(!Te(s[0]))return s[0];s=s[0]}return ki(s,void 0).lift(new Rl)}var Rl=function(){function s(){}return s.prototype.call=function(l,u){return u.subscribe(new uT(l))},s}(),uT=function(s){function l(u){var h=s.call(this,u)||this;return h.hasFirst=!1,h.observables=[],h.subscriptions=[],h}return le(l,s),l.prototype._next=function(u){this.observables.push(u)},l.prototype._complete=function(){var u=this.observables,h=u.length;if(0===h)this.destination.complete();else{for(var v=0;v<h&&!this.hasFirst;v++){var E=vr(this,u[v],void 0,v);this.subscriptions&&this.subscriptions.push(E),this.add(E)}this.observables=null}},l.prototype.notifyNext=function(u,h,v){if(!this.hasFirst){this.hasFirst=!0;for(var E=0;E<this.subscriptions.length;E++)if(E!==v){var I=this.subscriptions[E];I.unsubscribe(),this.remove(I)}this.subscriptions=null}this.destination.next(h)},l}(ui);function ua(s,l,u){void 0===s&&(s=0);var h=-1;return Dy(l)?h=Number(l)<1?1:Number(l):Sr(l)&&(u=l),Sr(u)||(u=xn),new Pe(function(v){var E=Dy(s)?s:+s-u.now();return u.schedule(Do,E,{index:0,period:h,subscriber:v})})}function Do(s){var l=s.index,u=s.period,h=s.subscriber;if(h.next(l),!h.closed){if(-1===u)return h.complete();s.index=l+1,this.schedule(s,u)}}function Fm(s){return(Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function ko(s,l,u){return v=function(E,I){if("object"!==Fm(E)||null===E)return E;var R=E[Symbol.toPrimitive];if(void 0!==R){var N=R.call(E,"string");if("object"!==Fm(N))return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(E)}(l),(l="symbol"===Fm(v)?v:String(v))in s?Object.defineProperty(s,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[l]=u,s;var v}function GS(s,l){var u=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);l&&(h=h.filter(function(v){return Object.getOwnPropertyDescriptor(s,v).enumerable})),u.push.apply(u,h)}return u}function Pk(s){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?GS(Object(u),!0).forEach(function(h){ko(s,h,u[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):GS(Object(u)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(u,h))})}return s}function _i(s){return"Minified Redux error #"+s+"; visit https://redux.js.org/Errors?code="+s+" for the full message or use the non-minified dev environment for full errors. "}var Rr="function"==typeof Symbol&&Symbol.observable||"@@observable",ff=function(){return Math.random().toString(36).substring(7).split("").join(".")},Um={INIT:"@@redux/INIT"+ff(),REPLACE:"@@redux/REPLACE"+ff(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ff()}};function lT(s,l,u){var h;if("function"==typeof l&&"function"==typeof u||"function"==typeof u&&"function"==typeof arguments[3])throw new Error(_i(0));if("function"==typeof l&&void 0===u&&(u=l,l=void 0),void 0!==u){if("function"!=typeof u)throw new Error(_i(1));return u(lT)(s,l)}if("function"!=typeof s)throw new Error(_i(2));var v=s,E=l,I=[],R=I,N=!1;function L(){R===I&&(R=I.slice())}function V(){if(N)throw new Error(_i(3));return E}function O(ee){if("function"!=typeof ee)throw new Error(_i(4));if(N)throw new Error(_i(5));var re=!0;return L(),R.push(ee),function(){if(re){if(N)throw new Error(_i(6));re=!1,L();var ne=R.indexOf(ee);R.splice(ne,1),I=null}}}function X(ee){if(!function(fe){if("object"!=typeof fe||null===fe)return!1;for(var ve=fe;null!==Object.getPrototypeOf(ve);)ve=Object.getPrototypeOf(ve);return Object.getPrototypeOf(fe)===ve}(ee))throw new Error(_i(7));if(void 0===ee.type)throw new Error(_i(8));if(N)throw new Error(_i(9));try{N=!0,E=v(E,ee)}finally{N=!1}for(var re=I=R,ne=0;ne<re.length;ne++)(0,re[ne])();return ee}return X({type:Um.INIT}),(h={dispatch:X,subscribe:O,getState:V,replaceReducer:function(ee){if("function"!=typeof ee)throw new Error(_i(10));v=ee,X({type:Um.REPLACE})}})[Rr]=function(){var ee,re=O;return(ee={subscribe:function(ne){if("object"!=typeof ne||null===ne)throw new Error(_i(11));function fe(){ne.next&&ne.next(V())}return fe(),{unsubscribe:re(fe)}}})[Rr]=function(){return this},ee},h}function ky(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return 0===l.length?function(h){return h}:1===l.length?l[0]:l.reduce(function(h,v){return function(){return h(v.apply(void 0,arguments))}})}function hn(s){return function(l){var u=new WS(s),h=l.lift(u);return u.caught=h}}var WS=function(){function s(l){this.selector=l}return s.prototype.call=function(l,u){return u.subscribe(new ei(l,this.selector,this.caught))},s}(),ei=function(s){function l(u,h,v){var E=s.call(this,u)||this;return E.selector=h,E.caught=v,E}return le(l,s),l.prototype.error=function(u){if(!this.isStopped){var h=void 0;try{h=this.selector(u,this.caught)}catch(I){return void s.prototype.error.call(this,I)}this._unsubscribeAndRecycle();var v=new Qc(this);this.add(v);var E=Tl(h,v);E!==v&&this.add(E)}},l}(_u);function ro(s){return s instanceof Date&&!isNaN(+s)}function Vm(s,l){void 0===l&&(l=xn);var u=ro(s)?+s-l.now():Math.abs(s);return function(h){return h.lift(new bV(u,l))}}var bV=function(){function s(l,u){this.delay=l,this.scheduler=u}return s.prototype.call=function(l,u){return u.subscribe(new cL(l,this.delay,this.scheduler))},s}(),cL=function(s){function l(u,h,v){var E=s.call(this,u)||this;return E.delay=h,E.scheduler=v,E.queue=[],E.active=!1,E.errored=!1,E}return le(l,s),l.dispatch=function(u){for(var h=u.source,v=h.queue,E=u.scheduler,I=u.destination;v.length>0&&v[0].time-E.now()<=0;)v.shift().notification.observe(I);if(v.length>0){var R=Math.max(0,v[0].time-E.now());this.schedule(u,R)}else this.unsubscribe(),h.active=!1},l.prototype._schedule=function(u){this.active=!0,this.destination.add(u.schedule(l.dispatch,this.delay,{source:this,destination:this.destination,scheduler:u}))},l.prototype.scheduleNotification=function(u){if(!0!==this.errored){var h=this.scheduler,v=new KS(h.now()+this.delay,u);this.queue.push(v),!1===this.active&&this._schedule(h)}},l.prototype._next=function(u){this.scheduleNotification(Et.createNext(u))},l.prototype._error=function(u){this.errored=!0,this.queue=[],this.destination.error(u),this.unsubscribe()},l.prototype._complete=function(){this.scheduleNotification(Et.createComplete()),this.unsubscribe()},l}(be),KS=function(s,l){this.time=s,this.notification=l};function ti(s){return function(l){return 0===s?br():l.lift(new SV(s))}}var SV=function(){function s(l){if(this.total=l,this.total<0)throw new Ye}return s.prototype.call=function(l,u){return u.subscribe(new uL(l,this.total))},s}(),uL=function(s){function l(u,h){var v=s.call(this,u)||this;return v.total=h,v.count=0,v}return le(l,s),l.prototype._next=function(u){var h=this.total,v=++this.count;v<=h&&(this.destination.next(u),v===h&&(this.destination.complete(),this.unsubscribe()))},l}(be),lL=function(){function s(l){if(this.total=l,this.total<0)throw new Ye}return s.prototype.call=function(l,u){return u.subscribe(new qo(l,this.total))},s}(),qo=function(s){function l(u,h){var v=s.call(this,u)||this;return v.total=h,v.ring=new Array,v.count=0,v}return le(l,s),l.prototype._next=function(u){var h=this.ring,v=this.total,E=this.count++;h.length<v?h.push(u):h[E%v]=u},l.prototype._complete=function(){var u=this.destination,h=this.count;if(h>0)for(var v=this.count>=this.total?this.total:this.count,E=this.ring,I=0;I<v;I++){var R=h++%v;u.next(E[R])}u.complete()},l}(be);function Hu(s){return function(l){return l.lift(new dL(s))}}var dL=function(){function s(l){this.value=l}return s.prototype.call=function(l,u){return u.subscribe(new CV(l,this.value))},s}(),CV=function(s){function l(u,h){var v=s.call(this,u)||this;return v.value=h,v}return le(l,s),l.prototype._next=function(u){this.destination.next(this.value)},l}(be);function IV(s,l){var u=!1;return arguments.length>=2&&(u=!0),function(h){return h.lift(new pL(s,l,u))}}var pL=function(){function s(l,u,h){void 0===h&&(h=!1),this.accumulator=l,this.seed=u,this.hasSeed=h}return s.prototype.call=function(l,u){return u.subscribe(new Hc(l,this.accumulator,this.seed,this.hasSeed))},s}(),Hc=function(s){function l(u,h,v,E){var I=s.call(this,u)||this;return I.accumulator=h,I._seed=v,I.hasSeed=E,I.index=0,I}return le(l,s),Object.defineProperty(l.prototype,"seed",{get:function(){return this._seed},set:function(u){this.hasSeed=!0,this._seed=u},enumerable:!0,configurable:!0}),l.prototype._next=function(u){if(this.hasSeed)return this._tryNext(u);this.seed=u,this.destination.next(u)},l.prototype._tryNext=function(u){var h,v=this.index++;try{h=this.accumulator(this.seed,u,v)}catch(E){this.destination.error(E)}this.seed=h,this.destination.next(h)},l}(be);function Pr(s,l,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof l?Pn(function(){return s},l,u):("number"==typeof l&&(u=l),Pn(function(){return s},u))}function hL(s){return function(l){return l.lift(new Ol(s))}}var Ol=function(){function s(l){this.predicate=l}return s.prototype.call=function(l,u){return u.subscribe(new Wi(l,this.predicate))},s}(),Wi=function(s){function l(u,h){var v=s.call(this,u)||this;return v.predicate=h,v.skipping=!0,v.index=0,v}return le(l,s),l.prototype._next=function(u){var h=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||h.next(u)},l.prototype.tryCallPredicate=function(u){try{var h=this.predicate(u,this.index++);this.skipping=Boolean(h)}catch(v){this.destination.error(v)}},l}(be);function ch(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var u=s[s.length-1];return Sr(u)?(s.pop(),function(h){return U_(s,h,u)}):function(h){return U_(s,h)}}var wV=function(s){function l(u,h,v){void 0===h&&(h=0),void 0===v&&(v=go);var E=s.call(this)||this;return E.source=u,E.delayTime=h,E.scheduler=v,(!Dy(h)||h<0)&&(E.delayTime=0),v&&"function"==typeof v.schedule||(E.scheduler=go),E}return le(l,s),l.create=function(u,h,v){return void 0===h&&(h=0),void 0===v&&(v=go),new l(u,h,v)},l.dispatch=function(u){return this.add(u.source.subscribe(u.subscriber))},l.prototype._subscribe=function(u){return this.scheduler.schedule(l.dispatch,this.delayTime,{source:this.source,subscriber:u})},l}(Pe),Mk=function(){function s(l,u){this.scheduler=l,this.delay=u}return s.prototype.call=function(l,u){return new wV(u,this.delay,this.scheduler).subscribe(l)},s}();function kn(s,l){return"function"==typeof l?function(u){return u.pipe(kn(function(h,v){return En(s(h,v)).pipe(ht(function(E,I){return l(h,E,v,I)}))}))}:function(u){return u.lift(new TV(s))}}var TV=function(){function s(l){this.project=l}return s.prototype.call=function(l,u){return u.subscribe(new Ci(l,this.project))},s}(),Ci=function(s){function l(u,h){var v=s.call(this,u)||this;return v.project=h,v.index=0,v}return le(l,s),l.prototype._next=function(u){var h,v=this.index++;try{h=this.project(u,v)}catch(E){return void this.destination.error(E)}this._innerSub(h)},l.prototype._innerSub=function(u){var h=this.innerSubscription;h&&h.unsubscribe();var v=new Qc(this),E=this.destination;E.add(v),this.innerSubscription=Tl(u,v),this.innerSubscription!==v&&E.add(this.innerSubscription)},l.prototype._complete=function(){var u=this.innerSubscription;u&&!u.closed||s.prototype._complete.call(this),this.unsubscribe()},l.prototype._unsubscribe=function(){this.innerSubscription=void 0},l.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&s.prototype._complete.call(this)},l.prototype.notifyNext=function(u){this.destination.next(u)},l}(_u),zS=function(){function s(l){this.notifier=l}return s.prototype.call=function(l,u){var h=new RV(l),v=Tl(this.notifier,new Qc(h));return v&&!h.seenValue?(h.add(v),u.subscribe(h)):h},s}(),RV=function(s){function l(u){var h=s.call(this,u)||this;return h.seenValue=!1,h}return le(l,s),l.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},l.prototype.notifyComplete=function(){},l}(_u);function jm(s,l){return void 0===l&&(l=!1),function(u){return u.lift(new Dl(s,l))}}var Dl=function(){function s(l,u){this.predicate=l,this.inclusive=u}return s.prototype.call=function(l,u){return u.subscribe(new Ed(l,this.predicate,this.inclusive))},s}(),Ed=function(s){function l(u,h,v){var E=s.call(this,u)||this;return E.predicate=h,E.inclusive=v,E.index=0,E}return le(l,s),l.prototype._next=function(u){var h,v=this.destination;try{h=this.predicate(u,this.index++)}catch(E){return void v.error(E)}this.nextOrComplete(u,h)},l.prototype.nextOrComplete=function(u,h){var v=this.destination;Boolean(h)?v.next(u):(this.inclusive&&v.next(u),v.complete())},l}(be);function Zn(s,l,u){return function(h){return h.lift(new Q_(s,l,u))}}var Q_=function(){function s(l,u,h){this.nextOrObserver=l,this.error=u,this.complete=h}return s.prototype.call=function(l,u){return u.subscribe(new dT(l,this.nextOrObserver,this.error,this.complete))},s}(),dT=function(s){function l(u,h,v,E){var I=s.call(this,u)||this;return I._tapNext=an,I._tapError=an,I._tapComplete=an,I._tapError=v||an,I._tapComplete=E||an,$(h)?(I._context=I,I._tapNext=h):h&&(I._context=h,I._tapNext=h.next||an,I._tapError=h.error||an,I._tapComplete=h.complete||an),I}return le(l,s),l.prototype._next=function(u){try{this._tapNext.call(this._context,u)}catch(h){return void this.destination.error(h)}this.destination.next(u)},l.prototype._error=function(u){try{this._tapError.call(this._context,u)}catch(h){return void this.destination.error(h)}this.destination.error(u)},l.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(u){return void this.destination.error(u)}return this.destination.complete()},l}(be),Py=function(){function s(l,u,h,v){this.waitFor=l,this.absoluteTimeout=u,this.withObservable=h,this.scheduler=v}return s.prototype.call=function(l,u){return u.subscribe(new My(l,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},s}(),My=function(s){function l(u,h,v,E,I){var R=s.call(this,u)||this;return R.absoluteTimeout=h,R.waitFor=v,R.withObservable=E,R.scheduler=I,R.scheduleTimeout(),R}return le(l,s),l.dispatchTimeout=function(u){var h=u.withObservable;u._unsubscribeAndRecycle(),u.add(Tl(h,new Qc(u)))},l.prototype.scheduleTimeout=function(){var u=this.action;u?this.action=u.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(l.dispatchTimeout,this.waitFor,this))},l.prototype._next=function(u){this.absoluteTimeout||this.scheduleTimeout(),s.prototype._next.call(this,u)},l.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},l}(_u);function Mr(s,l){return void 0===l&&(l=xn),u=s,h=Mi(new pt),void 0===(v=l)&&(v=xn),function(E){var I=ro(u),R=I?+u-v.now():Math.abs(u);return E.lift(new Py(R,I,h,v))};var u,h,v}function Fn(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return function(u){var h;return"function"==typeof s[s.length-1]&&(h=s.pop()),u.lift(new fL(s,h))}}var fL=function(){function s(l,u){this.observables=l,this.project=u}return s.prototype.call=function(l,u){return u.subscribe(new kl(l,this.observables,this.project))},s}(),kl=function(s){function l(u,h,v){var E=s.call(this,u)||this;E.observables=h,E.project=v,E.toRespond=[];var I=h.length;E.values=new Array(I);for(var R=0;R<I;R++)E.toRespond.push(R);for(R=0;R<I;R++)E.add(vr(E,h[R],void 0,R));return E}return le(l,s),l.prototype.notifyNext=function(u,h,v){this.values[v]=h;var E=this.toRespond;if(E.length>0){var I=E.indexOf(v);-1!==I&&E.splice(I,1)}},l.prototype.notifyComplete=function(){},l.prototype._next=function(u){if(0===this.toRespond.length){var h=[u].concat(this.values);this.project?this._tryProject(h):this.destination.next(h)}},l.prototype._tryProject=function(u){var h;try{h=this.project.apply(this,u)}catch(v){return void this.destination.error(v)}this.destination.next(h)},l}(ui),YS=function(s,l){return s===l||"function"==typeof l&&s===l.toString()},wr=function(){for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return function(h){return h.pipe(ln(function(v){var E=v.type,I=l.length;if(1===I)return YS(E,l[0]);for(var R=0;R<I;R++)if(YS(E,l[R]))return!0;return!1}))}},Po=function(){function s(l,u){for(var h=0;h<u.length;h++){var v=u[h];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(l,v.key,v)}}return function(l,u,h){return u&&s(l.prototype,u),h&&s(l,h),l}}(),mL=function(s){function l(u){!function(v,E){if(!(v instanceof E))throw new TypeError("Cannot call a class as a function")}(this,l);var h=function(v,E){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||"object"!=typeof E&&"function"!=typeof E?v:E}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return h.source=u,h}return function(u,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}(l,Pe),Po(l,null,[{key:"of",value:function(){return new this($n.apply(void 0,arguments))}},{key:"from",value:function(u,h){return new this(En(u,h))}}]),Po(l,[{key:"lift",value:function(u){var h=new l(this);return h.operator=u,h}},{key:"ofType",value:function(){return wr.apply(void 0,arguments)(this)}}]),l}(),gL=function(s){function l(u,h){!function(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}(this,l);var v=function(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?E:I}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,function(E){var I=v.__notifier.subscribe(E);return I&&!I.closed&&E.next(v.value),I}));return v.value=h,v.__notifier=new Be,v.__subscription=u.subscribe(function(E){E!==v.value&&(v.value=E,v.__notifier.next(E))}),v}return function(u,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}(l,Pe),l}(),Nk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function _p(s,l){s.super_=l,s.prototype=Object.create(l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}function H_(s,l){Object.defineProperty(this,"kind",{value:s,enumerable:!0}),l&&l.length&&Object.defineProperty(this,"path",{value:l,enumerable:!0})}"object"===(typeof global>"u"?"undefined":Nk(global))&&global&&global,_p(function s(l,u,h){s.super_.call(this,"E",l),Object.defineProperty(this,"lhs",{value:u,enumerable:!0}),Object.defineProperty(this,"rhs",{value:h,enumerable:!0})},H_),_p(function s(l,u){s.super_.call(this,"N",l),Object.defineProperty(this,"rhs",{value:u,enumerable:!0})},H_),_p(function s(l,u){s.super_.call(this,"D",l),Object.defineProperty(this,"lhs",{value:u,enumerable:!0})},H_),_p(function s(l,u,h){s.super_.call(this,"A",l),Object.defineProperty(this,"index",{value:u,enumerable:!0}),Object.defineProperty(this,"item",{value:h,enumerable:!0})},H_);const bd=!1;var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xk(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Lk(s){if(s.__esModule)return s;var l=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(u){var h=Object.getOwnPropertyDescriptor(s,u);Object.defineProperty(l,u,h.get?h:{enumerable:!0,get:function(){return s[u]}})}),l}var lh=function(s,l,u,h,v,E,I,R){if(!s){var N;if(void 0===l)N=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var L=[u,h,v,E,I,R],V=0;(N=new Error(l.replace(/%s/g,function(){return L[V++]}))).name="Invariant Violation"}throw N.framesToPop=1,N}},Gu=function(s){return"function"==typeof s},G_=function(s){return 0===s.length},Bk=function(s){return s.toString()},qt=function(s){return"string"==typeof s},cc=function(s){return s},qS=function(s){return null===s};function uo(s,l,u){void 0===l&&(l=cc),lh(Gu(l)||qS(l),"Expected payloadCreator to be a function, undefined or null");var h=qS(l)||l===cc?cc:function(R){for(var N=arguments.length,L=new Array(N>1?N-1:0),V=1;V<N;V++)L[V-1]=arguments[V];return R instanceof Error?R:l.apply(void 0,[R].concat(L))},v=Gu(u),E=s.toString(),I=function(){var R=h.apply(void 0,arguments),N={type:s};return R instanceof Error&&(N.error=!0),void 0!==R&&(N.payload=R),v&&(N.meta=u.apply(void 0,arguments)),N};return I.toString=function(){return E},I}var K_=function(s){if("object"!=typeof s||null===s)return!1;for(var l=s;null!==Object.getPrototypeOf(l);)l=Object.getPrototypeOf(l);return Object.getPrototypeOf(s)===l},Qm=function(s){return Array.isArray(s)},Wu=function(s){return null==s},vp=/\s/,Sd=/(_|-|\.|:)/,_L=/([a-z][A-Z]|[A-Z][a-z])/,OV=/[\W_]+(.|$)/g,Ku=/(.)([A-Z]+)/g,Xi=function(s){return(l=s,function(s){return vp.test(s)?s.toLowerCase():Sd.test(s)?(l=s,l.replace(OV,function(u,h){return h?" "+h:""})||s).toLowerCase():_L.test(s)?function(l){return l.replace(Ku,function(u,h,v){return h+" "+v.toLowerCase().split("").join(" ")})}(s).toLowerCase():s.toLowerCase();var l}(l).replace(/[\W_]+(.|$)/g,function(u,h){return h?" "+h:""}).trim()).replace(/\s(\w)/g,function(l,u){return u.toUpperCase()});var l},z_=function(s){return-1===s.indexOf("/")?Xi(s):s.split("/").map(Xi).join("/")},Ny=function(s,l){return s.reduce(function(u,h){return l(u,h)},{})},Hm=function(s){return typeof Map<"u"&&s instanceof Map};function JS(s){if(Hm(s))return Array.from(s.keys());if(typeof Reflect<"u"&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(s);var l=Object.getOwnPropertyNames(s);return"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(s))),l}function Ap(s,l){return Hm(l)?l.get(s):l[s]}var Y_=function(s){return function l(u,h,v,E){var I=void 0===h?{}:h,R=I.namespace,N=void 0===R?"/":R,L=I.prefix;return void 0===v&&(v={}),void 0===E&&(E=""),JS(u).forEach(function(V){var ee,O=(ee=function(ee){var re;if(!E)return ee;var ne=ee.toString().split("||"),fe=E.split("||");return(re=[]).concat.apply(re,fe.map(function(ve){return ne.map(function(Le){return""+ve+N+Le})})).join("||")}(V),E||!L||L&&new RegExp("^"+L+N).test(ee)?ee:""+L+N+ee),X=Ap(V,u);s(X)?l(X,{namespace:N,prefix:L},v,O):v[O]=X}),v}},vL=Y_(K_);function Ls(s){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{},h=Object.keys(u);"function"==typeof Object.getOwnPropertySymbols&&(h=h.concat(Object.getOwnPropertySymbols(u).filter(function(v){return Object.getOwnPropertyDescriptor(u,v).enumerable}))),h.forEach(function(v){AL(s,v,u[v])})}return s}function AL(s,l,u){return l in s?Object.defineProperty(s,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[l]=u,s}function ws(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),h=1;h<l;h++)u[h-1]=arguments[h];var v,R,E=K_((v=u)[v.length-1])?u.pop():{};return lh(u.every(qt)&&(qt(s)||K_(s)),"Expected optional object followed by string action types"),qt(s)?Ii([s].concat(u),E):Ls({},function(N,L){var V=void 0===L?{}:L,O=V.namespace,X=void 0===O?"/":O,ee=V.prefix;function re(fe,ve,Le){var Qe=z_(Le.shift());G_(Le)?ve[Qe]=N[fe]:(ve[Qe]||(ve[Qe]={}),re(fe,ve[Qe],Le))}var ne={};return Object.getOwnPropertyNames(N).forEach(function(fe){var ve=ee?fe.replace(""+ee+X,""):fe;return re(fe,ne,ve.split(X))}),ne}(pT(vL(s,R=E)),R),Ii(u,E))}function pT(s,l){var u=void 0===l?{}:l,h=u.prefix,v=u.namespace,E=void 0===v?"/":v;return Ny(Object.keys(s),function(I,R){var N,L=s[R];lh(function(X){if(Gu(X)||Wu(X))return!0;if(Qm(X)){var ee=X[0],ne=X[1];return Gu(void 0===ee?cc:ee)&&Gu(ne)}return!1}(L),"Expected function, undefined, null, or array with payload and meta functions for "+R);var V=h?""+h+E+R:R,O=Qm(L)?uo.apply(void 0,[V].concat(L)):uo(V,L);return Ls({},I,((N={})[R]=O,N))})}function Ii(s,l){var u=pT(Ny(s,function(h,v){var E;return Ls({},h,((E={})[v]=cc,E))}),l);return Ny(Object.keys(u),function(h,v){var E;return Ls({},h,((E={})[z_(v)]=u[v],E))})}var mf=function(){for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];var h="function"!=typeof l[l.length-1]&&l.pop(),v=l;if(void 0===h)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(E,I){for(var R=arguments.length,N=Array(R>2?R-2:0),L=2;L<R;L++)N[L-2]=arguments[L];var V=void 0===E,O=void 0===I;return V&&O&&h?h:v.reduce(function(X,ee){return ee.apply(void 0,[X,I].concat(N))},V&&!O&&h?h:E)}},Fk=Y_(function(s){return(K_(s)||Hm(s))&&(h=(u=JS(s)).every(function(v){return"next"===v||"throw"===v}),!(u.length&&u.length<=2&&h));var u,h});function Gn(s,l,u){void 0===u&&(u={}),lh(K_(s)||Hm(s),"Expected handlers to be a plain object.");var h=Fk(s,u),v=JS(h).map(function(I){return function(R,N,L){void 0===N&&(N=cc);var V=Bk(R).split("||");lh(!(void 0===L),"defaultState for reducer handling "+V.join(", ")+" should be defined"),lh(Gu(N)||K_(N),"Expected reducer to be a function or object with next and throw reducers");var O=Gu(N)?[N,N]:[N.next,N.throw].map(function(re){return Wu(re)?cc:re}),X=O[0],ee=O[1];return function(re,ne){void 0===re&&(re=L);var fe=ne.type;return fe&&-1!==V.indexOf(Bk(fe))?(!0===ne.error?ee:X)(re,ne):re}}(I,Ap(I,h),l)}),E=mf.apply(void 0,v.concat([l]));return function(I,R){return void 0===I&&(I=l),E(I,R)}}const Sa=uo("CONNECT_ZOOM_SOCKET"),Ni=uo("CONNECT_XMPP_SOCKET"),Bs=uo("CLOSE_ZOOM_SOCKET"),uc=uo("CLOSE_XMPP_SOCKET"),lc=uo("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),zu=uo("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),Ca=uo("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),er=uo("CONNECT_MAIN_SESSION_SOCKET"),pi=uo("CLOSE_MAIN_SESSION_SOCKET"),lo=uo("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:qa,setRwgServersList:gf,setRwgRetryCount:la,setXmppSocketStatus:dh,setMainSessionSocketStatus:os,resetSocket:xy}=ws("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","RESET_SOCKET"),ph=uo("CONNECT_TO_MEDIA_STREAM"),hi=uo("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:Gm,setAudioDecodeStatus:Wm,setVideoEncodeStatus:$S,setVideoDecodeStatus:hh,setSharingEncodeStatus:Ia,setSharingDecodeStatus:_f,setMediaConstraints:Km,setMediaEncryptKey:Id,setIsEnableDecoderInWorklet:q_,resetMedia:hT}=ws("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","SET_IS_ENABLE_DECODER_IN_WORKLET","RESET_MEDIA");function jo(s,l){for(var u=arguments.length,h=new Array(u>2?u-2:0),v=2;v<u;v++)h[v-2]=arguments[v];return s(mL.of(...h||[]),l,null)}function Uk(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];const h=function(){for(var v=arguments.length,E=new Array(v),I=0;I<v;I++)E[I]=arguments[I];return $s(...l.map(R=>{const N=R(...E);if(!N)throw new TypeError(`combineEpics: one of the provided Epics "${R.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return N.pipe(hn((L,V)=>(setTimeout(()=>{throw L},0),V)))}))};try{Object.defineProperty(h,"name",{value:`combineEpics(${l.map(v=>v.name||"<anonymous>").join(", ")})`})}catch{}return h}function dc(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return Uk(...l.flatMap(h=>Object.values(h)))}function Wn(s,l){return s.pipe(wr(`${lc}`),ln(u=>u.payload.evt===l))}function wd(s,l){return s.pipe(wr(`${lo}`),ln(u=>u.payload.evt===l))}function fh(s,l){return s.pipe(wr(`${Ca}`),ln(u=>u.payload.evt===l))}function pc(s,l){return s.pipe(wr(`${lc}`,`${lo}`),ln(u=>u.payload.evt===l))}function Ar(s,l){return s.pipe(wr(`${hi}`),ln(u=>Array.isArray(l)?l.indexOf(u.payload.type)>-1:u.payload.type===l))}const Td="function"==typeof atob,fT="function"==typeof btoa,mh="function"==typeof Buffer,zm="function"==typeof TextDecoder?new TextDecoder:void 0,vu="function"==typeof TextEncoder?new TextEncoder:void 0,Ly=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),mT=(s=>{let l={};return Ly.forEach((u,h)=>l[u]=h),l})(),yL=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ja=String.fromCharCode.bind(String),EL="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):s=>new Uint8Array(Array.prototype.slice.call(s,0)),bL=s=>s.replace(/=/g,"").replace(/[+\/]/g,l=>"+"==l?"-":"_"),qu=s=>s.replace(/[^A-Za-z0-9\+\/]/g,""),Vk=s=>{let l,u,h,v,E="";const I=s.length%3;for(let R=0;R<s.length;){if((u=s.charCodeAt(R++))>255||(h=s.charCodeAt(R++))>255||(v=s.charCodeAt(R++))>255)throw new TypeError("invalid character found");l=u<<16|h<<8|v,E+=Ly[l>>18&63]+Ly[l>>12&63]+Ly[l>>6&63]+Ly[63&l]}return I?E.slice(0,I-3)+"===".substring(I):E},jk=fT?s=>btoa(s):mh?s=>Buffer.from(s,"binary").toString("base64"):Vk,gT=mh?s=>Buffer.from(s).toString("base64"):s=>{let l=[];for(let u=0,h=s.length;u<h;u+=4096)l.push(Ja.apply(null,s.subarray(u,u+4096)));return jk(l.join(""))},XS=(s,l=!1)=>l?bL(gT(s)):gT(s),DV=s=>{if(s.length<2)return(l=s.charCodeAt(0))<128?s:l<2048?Ja(192|l>>>6)+Ja(128|63&l):Ja(224|l>>>12&15)+Ja(128|l>>>6&63)+Ja(128|63&l);var l=65536+1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320);return Ja(240|l>>>18&7)+Ja(128|l>>>12&63)+Ja(128|l>>>6&63)+Ja(128|63&l)},kV=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,SL=s=>s.replace(kV,DV),CL=mh?s=>Buffer.from(s,"utf8").toString("base64"):vu?s=>gT(vu.encode(s)):s=>jk(SL(s)),By=(s,l=!1)=>l?bL(CL(s)):CL(s),vf=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Qk=s=>{switch(s.length){case 4:var l=((7&s.charCodeAt(0))<<18|(63&s.charCodeAt(1))<<12|(63&s.charCodeAt(2))<<6|63&s.charCodeAt(3))-65536;return Ja(55296+(l>>>10))+Ja(56320+(1023&l));case 3:return Ja((15&s.charCodeAt(0))<<12|(63&s.charCodeAt(1))<<6|63&s.charCodeAt(2));default:return Ja((31&s.charCodeAt(0))<<6|63&s.charCodeAt(1))}},wL=s=>s.replace(vf,Qk),Hk=s=>{if(s=s.replace(/\s+/g,""),!yL.test(s))throw new TypeError("malformed base64.");s+="==".slice(2-(3&s.length));let l,u,h,v="";for(let E=0;E<s.length;)l=mT[s.charAt(E++)]<<18|mT[s.charAt(E++)]<<12|(u=mT[s.charAt(E++)])<<6|(h=mT[s.charAt(E++)]),v+=64===u?Ja(l>>16&255):64===h?Ja(l>>16&255,l>>8&255):Ja(l>>16&255,l>>8&255,255&l);return v},$_=Td?s=>atob(qu(s)):mh?s=>Buffer.from(s,"base64").toString("binary"):Hk,Af=mh?s=>EL(Buffer.from(s,"base64")):s=>EL($_(s).split("").map(l=>l.charCodeAt(0))),Pl=mh?s=>Buffer.from(s,"base64").toString("utf8"):zm?s=>zm.decode(Af(s)):s=>wL($_(s)),ZS=s=>qu(s.replace(/[-_]/g,l=>"-"==l?"+":"/")),X_=s=>Pl(ZS(s)),e0_encode=By,e0_decode=X_,e0_fromUint8Array=XS;function ys(s){return e0_encode(s,!0)}function gh(s){return e0_decode(s)}function $a(s){return e0_encode(s,!1)}const qm={"-":"+",_:"/",".":"="};function Ju(s){const l=s.replace(/[-_.]/g,u=>qm[u]);return Uint8Array.from(window.atob(l),u=>u.charCodeAt(0))}const t0=s=>{const l=s.charCodeAt(0);return l<=parseInt("0x7F",16)?1:l<=parseInt("0x7FF",16)?2:l<=parseInt("0xFFFF",16)?3:l<=parseInt("0x1FFFFF",16)?4:l<=parseInt("0x3FFFFFF",16)?5:6};function vT(s,l){return Object.keys(s).find(u=>s[u]===l)}const Kk=(s,l)=>{const u=s.split(".").map(E=>Number(E)).slice(0,3),h=l.split(".").map(E=>Number(E)).slice(0,3);let v=0;for(let E=0;E<3;E++){const I=E<u.length?u[E]:0,R=E<h.length?h[E]:0;if(I<R){v=-1;break}if(I>R){v=1;break}}return v},Xs=s=>{var l;let u=(new Date).getTime(),h=1e3*(null===(l=performance)||void 0===l?void 0:l.now())||0;const v="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,E=>{let I=16*Math.random();return u>0?(I=(u+I)%16|0,u=Math.floor(u/16)):(I=(h+I)%16|0,h=Math.floor(h/16)),("x"===E?I:3&I|8).toString(16)});return"string"==typeof s||"number"==typeof s?v+":"+s:v+""};function n0(s,l){if(s===l)return!0;if(!s||!l)return!1;const u=Object.keys(s),h=Object.keys(l),v=u.length;if(h.length!==v)return!1;for(let E=0;E<v;E++){const I=u[E];if(s[I]!==l[I]||!Object.prototype.hasOwnProperty.call(l,I))return!1}return!0}const AT=(s,l)=>s>>10==l>>10,Fy=(s,l)=>new Promise(u=>{setTimeout(()=>{u(s())},l)}),Fs=s=>{const l=`${Math.floor(1e4*Math.random())}`;return s.indexOf("@")>-1?s.replace("@",l):`${s}${l}`},Uy=s=>{try{const l=new URL(s);return!("data:"===l.protocol&&"null"===l.origin)&&l.origin!==location.origin}catch{return!0}},r0={default:{"apac.errorcodes_success":"Successfully joined the meeting.","apac.errorcodes_fail":"Fail to join the meeting.","apac.errorcodes_not_init":"Meeting not initialized.","apac.errorcodes_register":"This webinar requires registration.","apac.errorcodes_email_require":"Email is missing to attend webinar.","apac.errorcodes_not_exist":"Meeting does not exist.","apac.errorcodes_not_host":"You are not the meeting host.","apac.errorcodes_wrong_pass":"Meeting Passcode wrong.","apac.errorcodes_role_type":"Role type is required.","apac.errorcodes_not_start":"Meeting has not started","apac.errorcodes_host_email_as_attendee":"Host email as attendee","apac.errorcodes_re_connect":"Meeting is reconnecting.","apac.errorcodes_be_removed":"Be removed.","apac.errorcodes_disconnect":"Meeting has been disconnected.","apac.errorcodes_denied_register_with_panelist":"Denied register use panelist email.","apac.errorcodes_web_has_in_progress":"Already has other meetings in progress.","apac.errorcodes_web_require_email":"User email is required.","apac.errorcodes_web_not_support_webinar_pac":"Not support webinar and personal audio conference","apac.errorcodes_web_host_not_exit":"The meeting host does not exist.","apac.errorcodes_web_not_support_webclient":"Not support start or join meeting from web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"The current sdk version doesn't support webinar, please upgrade to the latest version.","apac.errorcodes_web_invalid_id":"Invalid meeting ID.","apac.errorcodes_web_not_support_registration_webinar":"Not support registration webinar","apac.errorcodes_web_not_support_tsp":"Not support start or join meeting from web, when you chose TSP as his audio in a meeting.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Not allow to start webinar from web.","apac.errorcodes_pac_api_wrong":"The accounts API Key is not valid.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"Incorrect role.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The accounts API Key is deactivated.","apac.errorcodes_pac_cant_host_other_mn":"Cannot not host another meeting concurrently.","apac.errorcodes_pac_invalid_signature":"Signature is invalid.","apac.errorcodes_pac_no_permission":"No permission.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unable join from browser, please join using the Zoom desktop client or mobile app.","apac.errorcodes_rwc_empty":"Could not get a response from the web server.","apac.errorcodes_rwc_error":"Could not connect to Web Server error.","apac.errorcodes_frequent_call":"You have reached the API limit for this call.","apac.errorcodes_frequent_join":"You be limit by zoom, need to check recaptcha.","apac.errorcodes_offline":"The service is temporarily offline.","apac.errorcodes_wasm_fail":"Download wasm files error, please check your network and firewall.","apac.errorcodes_denied_email":"Email is blocked by Administrator.","apac.errorcodes_host_inactive":"Meeting host is inactive.","apac.errorcodes_tk_expired":"Token has expired.","apac.invalid_parameter":"Invalid Parameter","apac.errorcodes_login_required":"Require login","apac.errorcodes_upgrade":"Your sdk version needs to be {0} or higher to join the meeting","apac.errorcodes_no_response_from_web":"No response from web, try again later.","apac.errorcodes_host_email":"Please use host/alternative host to start the webinar.","apac.errorcodes_meeting_websdk_version_need_update":"The current sdk version is no longer supported, please upgrade to the latest version."},"de-DE":{"apac.errorcodes_web_has_in_progress":"Hat bereits andere laufende Meetings.","apac.errorcodes_web_require_email":"E-Mail-Adresse von Benutzer erforderlich.","apac.errorcodes_web_not_support_webinar_pac":"Unterst\xfctzen Webinar und pers\xf6nliche Audiokonferenz nicht","apac.errorcodes_web_host_not_exit":"Der Meeting-Host ist nicht vorhanden.","apac.errorcodes_web_not_support_webclient":"Start nicht unterst\xfctzt bzw. starten Sie das Meeting aus dem Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Ihre aktuelle SDK-Version unterst\xfctzt keine Webinare. Aktualisieren Sie bitte auf die neueste Version.","apac.errorcodes_web_invalid_id":"Ung\xfcltige Meeting-ID.","apac.errorcodes_web_not_support_registration_webinar":"Registrierung f\xfcr Webinar wird nicht unterst\xfctzt","apac.errorcodes_web_not_support_tsp":"Sie unterst\xfctzen nicht den Start oder die Teilnahme an einem Meeting aus dem Web, wenn Sie den Telefonieanbieter als seinen Audiobeitrag in einem Meeting gew\xe4hlt haben.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Das Starten eines Webinars vom Internet aus ist nicht zul\xe4ssig.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unf\xe4hig beitreten aus Browser, verbinden Sie bitte den Zoom-Desktop-Client oder mobile App.","apac.errorcodes_meeting_websdk_version_need_update":"Ihre aktuelle SDK-Version wird nicht mehr unterst\xfctzt. Aktualisieren Sie bitte auf die neueste Version."},"es-ES":{"apac.errorcodes_web_has_in_progress":"Ya posee otras reuniones en curso.","apac.errorcodes_web_require_email":"Se requiere correo electr\xf3nico del usuario.","apac.errorcodes_web_not_support_webinar_pac":"No soporta seminario web o conferencia de audio personal","apac.errorcodes_web_host_not_exit":"El anfitri\xf3n de la reuni\xf3n no existe.","apac.errorcodes_web_not_support_webclient":"No se puede iniciar ni entrar a una reuni\xf3n desde la web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versi\xf3n actual de sdk no es compatible con el seminario web, actualice a la \xfaltima versi\xf3n.","apac.errorcodes_web_invalid_id":"ID de reuni\xf3n no v\xe1lida.","apac.errorcodes_web_not_support_registration_webinar":"Seminario web que no es compatible con la inscripci\xf3n","apac.errorcodes_web_not_support_tsp":"Cuando eligi\xf3 el proveedor de servicios telef\xf3nicos como audio en una reuni\xf3n, no se puede iniciar o unirse una reuni\xf3n desde el sitio web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"No se permite comenzar un seminario web desde la web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"No puede unirse desde el navegador, por favor unirse usando el cliente de escritorio Zoom o aplicaci\xf3n m\xf3vil.","apac.errorcodes_meeting_websdk_version_need_update":"La versi\xf3n actual de sdk ya no es compatible actualice a la versi\xf3n m\xe1s reciente."},"fr-FR":{"apac.errorcodes_web_has_in_progress":"Il a d\xe9j\xe0 d\u2019autres r\xe9unions en cours.","apac.errorcodes_web_require_email":"Le courriel de l\u2019utilisateur est requis.","apac.errorcodes_web_not_support_webinar_pac":"Ne prend pas en charge le webinaire ni la conf\xe9rence audio personnelle","apac.errorcodes_web_host_not_exit":"L\u2019animateur de la r\xe9union n\u2019existe pas.","apac.errorcodes_web_not_support_webclient":"Ne supporte pas d\xe9marrer ou rejoindre une r\xe9union \xe0 partir du web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La version actuelle du SDK ne prend pas en charge le webinaire, veuillez passer \xe0 la derni\xe8re version.","apac.errorcodes_web_invalid_id":"N\xba de r\xe9union non valide.","apac.errorcodes_web_not_support_registration_webinar":"Ne prend pas en charge le webinaire d\u2019inscription","apac.errorcodes_web_not_support_tsp":"Ne peut pas d\xe9marrer ou rejoindre la r\xe9union depuis Internet, lorsque vous s\xe9lectionnez le fournisseur de service en t\xe9l\xe9phonie comma sa sortie audio dans une r\xe9union.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Ne pas permettre de d\xe9marrer des webinaires \xe0 partir du Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossible de rejoindre le navigateur, s'il vous pla\xeet rejoindre en utilisant le client de bureau Zoom ou une application mobile.","apac.errorcodes_meeting_websdk_version_need_update":"La version actuelle du SDK n\u2019est plus prise en charge, veuillez passer \xe0 la derni\xe8re version."},"jp-JP":{"apac.errorcodes_web_has_in_progress":"\u3059\u3067\u306b\u4ed6\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u304c\u59cb\u307e\u3063\u3066\u3044\u307e\u3059\u3002","apac.errorcodes_web_require_email":"\u30e6\u30fc\u30b6\u30fc\u30e1\u30fc\u30eb\u306f\u5fc5\u8981\u3067\u3059\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3068\u30d1\u30fc\u30bd\u30ca\u30eb\u97f3\u58f0\u4f1a\u8b70\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093","apac.errorcodes_web_host_not_exit":"\u3053\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30db\u30b9\u30c8\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_support_webclient":"\u30a6\u30a7\u30d6\u304b\u3089\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u958b\u59cb/\u53c2\u52a0\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u305b\u3093\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u73fe\u5728\u306eSDK\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002","apac.errorcodes_web_invalid_id":"\u7121\u52b9\u306a\u30df\u30fc\u30c6\u30a3\u30f3\u30b0ID\u3067\u3059\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u767b\u9332\u30a6\u30a7\u30d3\u30ca\u30fc\u975e\u5bfe\u5fdc","apac.errorcodes_web_not_support_tsp":"\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30aa\u30fc\u30c7\u30a3\u30aa\u306b\u30c6\u30ec\u30d5\u30a9\u30cb\u30fc\u30b5\u30fc\u30d3\u30b9\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u9078\u629e\u3057\u305f\u5834\u5408\u3001\u30a6\u30a7\u30d6\u304b\u3089\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u958b\u59cb\u3057\u305f\u308a\u3001\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u53c2\u52a0\u3057\u305f\u308a\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30a6\u30a7\u30d6\u304b\u3089\u958b\u59cb\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u53c2\u52a0\u3057\u3001\u30ba\u30fc\u30e0\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3084\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3092\u4f7f\u7528\u3057\u3066\u53c2\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002","apac.errorcodes_meeting_websdk_version_need_update":"\u73fe\u5728\u306e SDK \u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},"pt-PT":{"apac.errorcodes_web_has_in_progress":"J\xe1 h\xe1 outras reuni\xf5es em andamento.","apac.errorcodes_web_require_email":"O e-mail do usu\xe1rio \xe9 obrigat\xf3rio.","apac.errorcodes_web_not_support_webinar_pac":"N\xe3o h\xe1 suporte para webinar e audioconfer\xeancia pessoal","apac.errorcodes_web_host_not_exit":"O anfitri\xe3o da reuni\xe3o n\xe3o existe.","apac.errorcodes_web_not_support_webclient":"N\xe3o h\xe1 suporte para iniciar ou entrar na reuni\xe3o pela web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"A vers\xe3o sdk atual n\xe3o oferece suporte para webinar. Atualize para a vers\xe3o mais recente.","apac.errorcodes_web_invalid_id":"ID da reuni\xe3o inv\xe1lido.","apac.errorcodes_web_not_support_registration_webinar":"O registro do webinar n\xe3o \xe9 compat\xedvel","apac.errorcodes_web_not_support_tsp":"N\xe3o \xe9 compat\xedvel iniciar ou ingressar na reuni\xe3o pela web ao escolher o \xe1udio do provedor de servi\xe7os de telefonia em uma reuni\xe3o.","apac.errorcodes_web_not_allow_start_webinar_from_web":"N\xe3o \xe9 permitido iniciar o webinar na web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Incapaz juntar-se a partir do navegador, por favor, junte-se usando o cliente de desktop Zoom ou aplicativo m\xf3vel.","apac.errorcodes_meeting_websdk_version_need_update":"O servi\xe7o de valida\xe7\xe3o de n\xfamero ABN est\xe1 temporariamente indispon\xedvel."},"ru-RU":{"apac.errorcodes_web_has_in_progress":"\u0423\u0436\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f\u0445.","apac.errorcodes_web_require_email":"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0447\u0442\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.","apac.errorcodes_web_not_support_webinar_pac":"\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440 \u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e","apac.errorcodes_web_host_not_exit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.","apac.errorcodes_web_not_support_webclient":"\u0417\u0430\u043f\u0443\u0441\u043a \u0438\u043b\u0438 \u0432\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0442\u044c \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 SDK \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u044b. \u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438.","apac.errorcodes_web_invalid_id":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438.","apac.errorcodes_web_not_support_registration_webinar":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f","apac.errorcodes_web_not_support_tsp":"\u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0441\u043b\u0443\u0436\u0431\u044b \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438, \u0442\u0430\u043a\u0443\u044e \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0447\u0430\u0442\u044c \u0438\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u0417\u0430\u043f\u0443\u0441\u043a \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440\u0430 \u0447\u0435\u0440\u0435\u0437 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u0438\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043d\u0430\u0441\u0442\u043e\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0438\u043b\u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.","apac.errorcodes_meeting_websdk_version_need_update":"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 SDK \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f. \u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438."},"zh-CN":{"apac.errorcodes_web_has_in_progress":"\u5df2\u7ecf\u6709\u53e6\u4e00\u573a\u4f1a\u8bae\u6b63\u5728\u8fdb\u884c\u3002","apac.errorcodes_web_require_email":"\u5fc5\u987b\u63d0\u4f9b\u7528\u6237\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u975e\u652f\u6301\u7684\u7f51\u7edc\u7814\u8ba8\u4f1a\u548c\u4e2a\u4eba\u97f3\u9891\u4f1a\u8bae","apac.errorcodes_web_host_not_exit":"\u4f1a\u8bae\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u6301\u4ece Web \u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u5f53\u524d sdk \u7248\u672c\u4e0d\u652f\u6301\u7f51\u7edc\u7814\u8ba8\u4f1a\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u65e0\u6548\u7684\u4f1a\u8baeID\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u6301\u6ce8\u518c\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_web_not_support_tsp":"\u5982\u679c\u9009\u62e9\u7535\u8bdd\u8bed\u97f3\u670d\u52a1\u63d0\u4f9b\u5546\u4f5c\u4e3a\u4f1a\u8bae\u97f3\u9891\uff0c\u5219\u4e0d\u652f\u6301\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8bb8\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u4ece\u6d4f\u89c8\u5668\u65e0\u6cd5\u52a0\u5165\uff0c\u8bf7\u52a0\u5165\u4f7f\u7528\u7f29\u653e\u684c\u9762\u5ba2\u6237\u7aef\u6216\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002","apac.errorcodes_meeting_websdk_version_need_update":"\u5f53\u524dSDK\u7248\u672c\u4e0d\u518d\u53d7\u5230\u652f\u6301\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002"},"zh-TW":{"apac.errorcodes_web_has_in_progress":"\u5df2\u6709\u5176\u4ed6\u6703\u8b70\u6b63\u5728\u9032\u884c\u4e2d\u3002","apac.errorcodes_web_require_email":"\u5fc5\u9808\u63d0\u4f9b\u4f7f\u7528\u8005\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\u548c\u500b\u4eba\u97f3\u8a0a\u6703\u8b70","apac.errorcodes_web_host_not_exit":"\u6703\u8b70\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u63f4\u5f9e Web \u958b\u59cb\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u76ee\u524d\u7684 SDK \u7248\u672c\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\uff0c\u8acb\u5347\u7d1a\u81f3\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u7121\u6548\u7684\u6703\u8b70 ID \u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u63f4\u8a3b\u518a\u7db2\u8def\u7814\u8a0e\u6703","apac.errorcodes_web_not_support_tsp":"\u7576\u60a8\u9078\u64c7\u96fb\u8a71\u8a9e\u97f3\u670d\u52d9\u4f9b\u61c9\u5546\u505a\u70ba\u6703\u8b70\u8a9e\u97f3\u4f7f\u7528\u6642\uff0c\u4e0d\u652f\u63f4\u7d93\u7531\u7db2\u9801\u53ec\u958b\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8a31\u5f9e Web \u958b\u59cb\u7db2\u8def\u7814\u8a0e\u6703\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u5f9e\u700f\u89bd\u5668\u7121\u6cd5\u52a0\u5165\uff0c\u8acb\u52a0\u5165\u4f7f\u7528\u7e2e\u653e\u684c\u9762\u5ba2\u6236\u7aef\u6216\u79fb\u52d5\u61c9\u7528\u7a0b\u5e8f\u3002","apac.errorcodes_meeting_websdk_version_need_update":"\u76ee\u524d\u7684SDK\u7248\u672c\u5df2\u4e0d\u518d\u53d7\u5230\u652f\u63f4\uff0c\u8acb\u5347\u7d1a\u81f3\u6700\u65b0\u7248\u672c\u3002"},"ko-KO":{"apac.errorcodes_web_has_in_progress":"\uc774\ubbf8 \ub2e4\ub978 \ud68c\uc758\uac00 \uc9c4\ud589 \uc911\uc785\ub2c8\ub2e4.","apac.errorcodes_web_require_email":"\uc0ac\uc6a9\uc790 \uc774\uba54\uc77c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webinar_pac":"\uc6e8\ube44\ub098 \ubc0f \uac1c\uc778 \uc624\ub514\uc624 \uc804\ud654 \ud68c\uc758\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_host_not_exit":"\ud68c\uc758 \ud638\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webclient":"\uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ucc38\uc5ec\ud558\ub294 \uac83\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\ud604\uc7ac SDK \ubc84\uc804\uc740 \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uc2ed\uc2dc\uc624.","apac.errorcodes_web_invalid_id":"\ud68c\uc758 ID\uac00 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_registration_webinar":"\ub4f1\ub85d \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_not_support_tsp":"\ud68c\uc758\uc5d0\uc11c Telephony Service Provider\ub97c \uc624\ub514\uc624\ub85c \uc120\ud0dd\ud55c \uacbd\uc6b0 \uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ud68c\uc758\uc5d0 \ucc38\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\uc6f9\uc5d0\uc11c \uc6e8\ube44\ub098\ub97c \uc2dc\uc791\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\uc218 \uc5c6\uc2b5\ub2c8\ub2e4 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc870\uc778 \uc90c \ub370\uc2a4\ud06c\ud1b1 \ud074\ub77c\uc774\uc5b8\ud2b8 \ub610\ub294 \ubaa8\ubc14\uc77c \uc571\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac00\uc785\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.","apac.errorcodes_meeting_websdk_version_need_update":"\ud604\uc7ac SDK \ubc84\uc804\uc740 \ub354 \uc774\uc0c1 \uc9c0\uc6d0\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uc2ed\uc2dc\uc624."},"vi-VN":{"apac.errorcodes_web_has_in_progress":"\u0110\xe3 c\xf3 cu\u1ed9c h\u1ecdp kh\xe1c \u0111ang di\u1ec5n ra.","apac.errorcodes_web_require_email":"Email ng\u01b0\u1eddi d\xf9ng l\xe0 b\u1eaft bu\u1ed9c.","apac.errorcodes_web_not_support_webinar_pac":"Kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3ovideo v\xe0 h\u1ed9i ngh\u1ecb \xe2m thanh c\xe1 nh\xe2n","apac.errorcodes_web_host_not_exit":"Ng\u01b0\u1eddi ch\u1ee7 tr\xec cu\u1ed9c h\u1ecdp kh\xf4ng t\u1ed3n t\u1ea1i.","apac.errorcodes_web_not_support_webclient":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Phi\xean b\u1ea3n sdk hi\u1ec7n t\u1ea1i kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn, h\xe3y n\xe2ng c\u1ea5p l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t.","apac.errorcodes_web_invalid_id":"ID cu\u1ed9c h\u1ecdp kh\xf4ng h\u1ee3p l\u1ec7.","apac.errorcodes_web_not_support_registration_webinar":"Kh\xf4ng h\u1ed7 tr\u1ee3 \u0111\u0103ng k\xfd h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn","apac.errorcodes_web_not_support_tsp":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web, khi b\u1ea1n ch\u1ecdn Nh\xe0 cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111i\u1ec7n tho\u1ea1i l\xe0m ngu\u1ed3n \xe2m thanh trong cu\u1ed9c h\u1ecdp.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Kh\xf4ng cho ph\xe9p b\u1eaft \u0111\u1ea7u h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn t\u1eeb web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Kh\xf4ng th\u1ec3 tham gia t\u1eeb tr\xecnh duy\u1ec7t, h\xe3y tham gia b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng client desktop Ph\xf3ng to ho\u1eb7c \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng.","apac.errorcodes_meeting_websdk_version_need_update":"Phi\xean b\u1ea3n sdk hi\u1ec7n t\u1ea1i kh\xf4ng c\xf2n \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3, vui l\xf2ng n\xe2ng c\u1ea5p l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t."},"it-IT":{"apac.errorcodes_web_has_in_progress":"Sta partecipando a un\u2019altra riunione in corso.","apac.errorcodes_web_require_email":"\xc8 richiesta l\u2019email dell\u2019utente.","apac.errorcodes_web_not_support_webinar_pac":"Non supporta webinar e conferenza audio personale","apac.errorcodes_web_host_not_exit":"L\u2019ospite della riunione non esiste.","apac.errorcodes_web_not_support_webclient":"Non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versione sdk corrente non supporta i webinar. Effettua l\u2019aggiornamento alla versione pi\xf9 recente.","apac.errorcodes_web_invalid_id":"ID riunione non valido.","apac.errorcodes_web_not_support_registration_webinar":"Non supporta webinar con iscrizione","apac.errorcodes_web_not_support_tsp":"In caso che hai selezionato il fornitore di servizio telefonico come l\u2019audio in riunione, non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Non \xe8 consentito avviare il webinar dal Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossibile unirsi dal browser, si prega di unirsi con il client desktop Zoom o app mobile.","apac.errorcodes_meeting_websdk_version_need_update":"La versione sdk corrente non \xe8 pi\xf9 supportata. Aggiorna alla versione pi\xf9 recente."},"id-ID":{"apac.errorcodes_web_has_in_progress":"Sudah mengadakan pertemuan lain.","apac.errorcodes_web_require_email":"Email pengguna diperlukan.","apac.errorcodes_web_not_support_webinar_pac":"Tidak mendukung konferensi webinar dan audio pribadi","apac.errorcodes_web_host_not_exit":"Tuan rumah pertemuan tidak ada.","apac.errorcodes_web_not_support_webclient":"Tidak mendukung mulai atau bergabung dengan rapat dari web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Versi SDK saat ini tidak mendukung webinar, silakan tingkatkan ke versi terbaru.","apac.errorcodes_web_invalid_id":"ID pertemuan tidak valid.","apac.errorcodes_web_not_support_registration_webinar":"Tidak mendukung webinar pendaftaran","apac.errorcodes_web_not_support_tsp":"Tidak mendukung mulai atau bergabung dengan rapat dari web, saat Anda memilih TSP sebagai audionya dalam rapat.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Tidak mengizinkan untuk memulai webinar dari web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Tidak dapat bergabung dari browser, silakan bergabung menggunakan klien zoom desktop atau aplikasi seluler.","apac.errorcodes_meeting_websdk_version_need_update":"Versi sdk saat ini tidak lagi didukung. Tingkatkan ke versi terbaru."},"nl-NL":{"apac.errorcodes_web_has_in_progress":"Heeft al andere vergaderingen in uitvoering.","apac.errorcodes_web_require_email":"E -mail van gebruikers is vereist.","apac.errorcodes_web_not_support_webinar_pac":"Ondersteun niet webinar en persoonlijke audioconferentie","apac.errorcodes_web_host_not_exit":"De vergadergastheer bestaat niet.","apac.errorcodes_web_not_support_webclient":"Ondersteuning niet starten of deelnemen aan de vergadering van Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"De huidige SDK -versie ondersteunt Webinar niet, upgrade naar de nieuwste versie.","apac.errorcodes_web_invalid_id":"Ongeldige vergadering -ID.","apac.errorcodes_web_not_support_registration_webinar":"Ondersteun geen registratie -webinar","apac.errorcodes_web_not_support_tsp":"Start niet of deel aan de vergadering van Web, wanneer u TSP koos als zijn audio tijdens een vergadering.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Niet toestaan \u200b\u200bom webinar te starten vanaf het web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Niet in staat om mee te doen vanuit de browser, doe mee met behulp van de Zoom Desktop -client of mobiele app.","apac.errorcodes_meeting_websdk_version_need_update":"De huidige SDK-versie wordt niet langer ondersteund. Voer een upgrade uit naar de nieuwste versie."},"tr-TR":{"apac.errorcodes_web_has_in_progress":"Zaten devam eden ba\u015fka toplant\u0131lara sahip.","apac.errorcodes_web_require_email":"Kullan\u0131c\u0131 e-postas\u0131 gereklidir.","apac.errorcodes_web_not_support_webinar_pac":"Web'in ve ki\u015fisel ses konferans\u0131n\u0131 desteklememek","apac.errorcodes_web_host_not_exit":"Toplant\u0131 ana bilgisayar mevcut de\u011fil.","apac.errorcodes_web_not_support_webclient":"Desteklemeyi denememek veya web'den toplant\u0131ya kat\u0131l\u0131n.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Mevcut SDK s\xfcr\xfcm\xfc WebInar'\u0131 desteklemiyor, l\xfctfen en son s\xfcr\xfcme y\xfckseltin.","apac.errorcodes_web_invalid_id":"Ge\xe7ersiz Toplant\u0131 Kimli\u011fi.","apac.errorcodes_web_not_support_registration_webinar":"Kay\u0131t web seminerini desteklememek","apac.errorcodes_web_not_support_tsp":"TSP'yi bir toplant\u0131da ses olarak se\xe7ti\u011finizde, web'den toplant\u0131y\u0131 ba\u015flatmay\u0131n veya kat\u0131lmay\u0131n.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Web'in web'den ba\u015flamas\u0131na izin vermeyin.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Taray\u0131c\u0131dan kat\u0131lam\u0131yorsan\u0131z, l\xfctfen Zoom Masa\xfcst\xfc \u0130stemcisi veya Mobil Uygulamay\u0131 kullanarak kat\u0131l\u0131n.","apac.errorcodes_meeting_websdk_version_need_update":"Mevcut sdk s\xfcr\xfcm\xfc art\u0131k desteklenmiyor, l\xfctfen en son s\xfcr\xfcme y\xfckseltin."},"pl-PL":{"apac.errorcodes_web_has_in_progress":"Ma ju\u017c inne spotkania.","apac.errorcodes_web_require_email":"Wymagany jest e-mail u\u017cytkownika.","apac.errorcodes_web_not_support_webinar_pac":"Nie obs\u0142uguje seminarium i osobistej konferencji audio","apac.errorcodes_web_host_not_exit":"Gospodarz spotkania nie istnieje.","apac.errorcodes_web_not_support_webclient":"Nie obs\u0142uguje uruchomienia ani do\u0142\u0105czania do spotkania z sieci.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Aktualna wersja SDK nie obs\u0142uguje webinarium, prosz\u0119 uaktualni\u0107 do najnowszej wersji.","apac.errorcodes_web_invalid_id":"Nieprawid\u0142owy identyfikator spotkania.","apac.errorcodes_web_not_support_registration_webinar":"Nie wspieraj rejestracji webinarium internetowego","apac.errorcodes_web_not_support_tsp":"Nie obs\u0142uguje uruchomienia ani do\u0142\u0105czania do spotkania z Internetu, gdy wybra\u0142e\u015b TSP jako jego audio na spotkaniu.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Nie pozw\xf3l, aby rozpocz\u0105\u0107 sie\u0107 webinarn\u0105 od sieci.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Nie mo\u017cna do\u0142\u0105czy\u0107 z przegl\u0105darki, do\u0142\u0105cz do Klienta Klient Desktop lub Mobile App.","apac.errorcodes_meeting_websdk_version_need_update":"Bie\u017c\u0105ca wersja sdk nie jest ju\u017c obs\u0142ugiwana; uaktualnij do najnowszej wersji."}},_h=r0.default,Zs=-3e3;let hc=function(s){return s[s.CONF_SUCCESS=0]="CONF_SUCCESS",s[s.CONF_FAIL_MEETING_OVER=6]="CONF_FAIL_MEETING_OVER",s[s.CONF_FAIL_CONF_USER_FULL=9]="CONF_FAIL_CONF_USER_FULL",s[s.CONF_FAIL_CONFLOCKED=12]="CONF_FAIL_CONFLOCKED",s[s.CONF_FAIL_WEBINAR_DENIED_EMAIL=3033]="CONF_FAIL_WEBINAR_DENIED_EMAIL",s[s.CONF_FAIL_MEETING_HAS_CLOSED=103003]="CONF_FAIL_MEETING_HAS_CLOSED",s[s.CONF_FAIL_HAS_BEEN_REMOVED=103039]="CONF_FAIL_HAS_BEEN_REMOVED",s[s.CONF_RESULT_MMR_IB_REJECT=103043]="CONF_RESULT_MMR_IB_REJECT",s[s.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS=103044]="CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS",s}({}),vh=function(s){return s[s.Unknown=0]="Unknown",s[s.Normal=1]="Normal",s[s.Userrequest=2]="Userrequest",s[s.SdkConnection=3]="SdkConnection",s[s.Reconnect=5]="Reconnect",s[s.PtRequest=6]="PtRequest",s[s.KickedByHost=7]="KickedByHost",s[s.EndByHost=8]="EndByHost",s[s.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",s[s.FreeMeetingTimeout=10]="FreeMeetingTimeout",s[s.JBHTimeout=11]="JBHTimeout",s[s.EndBySingleStatus=12]="EndBySingleStatus",s[s.WebinarNeedRegister=13]="WebinarNeedRegister",s[s.ArchiveFail=14]="ArchiveFail",s[s.EndByNone=15]="EndByNone",s[s.EndByAdmin=16]="EndByAdmin",s[s.DuplicateSession=17]="DuplicateSession",s[s.MeetingTransfer=18]="MeetingTransfer",s}({}),yf=function(s){return s[s.WaitingRoomFailover=1]="WaitingRoomFailover",s[s.WebEndAndRejoin=2]="WebEndAndRejoin",s}({});function jy(s,l){return l in _h?_h[l]:s}const qr={ANOTHER_MEETING_RUNNING:3e3,ERROR_NOT_EXIST:3001,ERROR_NOT_HOST:3003,WRONG_MEETING_PASSWORD:3004,ROLE_TYPE_IS_REQUIRE:3010,EMAIL_REQUIRED:3005,MEETING_NOT_START:3008,BE_REMOVED:3009,ERROR_WEBINAR_ENFORCE_LOGIN:3034,NEED_REAL_NAME:3082,REGISTER_REQUIRED:3099,SSO_LOGIN_WINDOW:6024,ZOOM_LOGIN_WINDOW:3051,ZOOM_SPECIFIC_LOGIN_WINDOW:3052,LOGIN_REQUIRED:3100,RE_CONNECTING:4e3,DISCONNECT:4001,INVALID_PARAMETER:4003,DENIED_REGISTER_WITH_PANELIST:3032,SERVICE_OFFLINE:403,RWC_EMPTY:3621,RWC_ERROR:3622,FREQUENT_CALL:3633,FREQUENT_JOIN:3634,WASM_FAIL:3635,COMMON_ERROR:200,COMMON_SUCCESS:0,UPGRADE:1e4},zk={SUCCESS:"apac.errorcodes_success",FAIL:"apac.errorcodes_fail",MEETING_NOT_INIT:"apac.errorcodes_not_init",REGISTER_REQUIRED:"apac.errorcodes_register",LOGIN_REQUIRED:"apac.errorcodes_login_required",SSO_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_SPECIFIC_LOGIN_WINDOW:"apac.errorcodes_login_required",EMAIL_REQUIRED:"apac.errorcodes_email_require",ERROR_NOT_EXIST:"apac.errorcodes_not_exist",ERROR_NOT_HOST:"apac.errorcodes_not_host",WRONG_MEETING_PASSWORD:"apac.errorcodes_wrong_pass",ROLE_TYPE_IS_REQUIRE:"apac.errorcodes_role_type",ANOTHER_MEETING_RUNNING:"apac.errorcodes_meeting_has_in_progress",MEETING_NOT_START:"apac.errorcodes_not_start",INVALID_PARAMETER:"apac.invalid_parameter",RE_CONNECTING:"apac.errorcodes_re_connect",BE_REMOVED:"apac.errorcodes_be_removed",ERROR_WEBINAR_ENFORCE_LOGIN:"apac.errorcodes_webinar_enforce_login",DISCONNECT:"apac.errorcodes_disconnect",DENIED_REGISTER_WITH_PANELIST:"apac.errorcodes_denied_register_with_panelist",RWC_EMPTY:"apac.errorcodes_rwc_empty",RWC_ERROR:"apac.errorcodes_rwc_error",FREQUENT_CALL:"apac.errorcodes_frequent_call",FREQUENT_JOIN:"apac.errorcodes_frequent_join",WASM_FAIL:"apac.errorcodes_wasm_fail",UPGRADE:"apac.errorcodes_meeting_websdk_version_need_update"},o0={3e3:{"apac.errorcodes_web_has_in_progress":3e3,"apac.errorcodes_web_require_email":3005,"apac.errorcodes_web_not_support_webinar_pac":3701,"apac.errorcodes_web_host_not_exit":3702,"apac.errorcodes_web_not_support_webclient":3603,"apac.errorcodes_web_should_support_webinar_with_latest_version":3604,"apac.errorcodes_web_invalid_id":3703,"apac.errorcodes_web_not_support_registration_webinar":3606,"apac.errorcodes_web_not_support_tsp":3608,"apac.errorcodes_web_not_allow_start_webinar_from_web":3609,"apac.errorcodes_need_use_zoom_desktop_or_mobile":3611,"apac.errorcodes_meeting_websdk_version_need_update":1e4},3001:{"apac.errorcodes_not_exist":3610},200:{"apac.errorcodes_pac_api_wrong":3704,"apac.errorcodes_pac_signature_expired":3705,"apac.errorcodes_pac_mn_wrong":3706,"apac.errorcodes_pac_mn_not_fount":3707,"apac.errorcodes_pac_role_error":3708,"apac.errorcodes_pac_host_not_found":3709,"apac.errorcodes_pac_api_disabled":3710,"apac.errorcodes_pac_cant_host_other_mn":3711,"apac.errorcodes_pac_invalid_signature":3712,"apac.errorcodes_pac_no_permission":3713},3099:{"apac.errorcodes_register":3099},3100:{"apac.errorcodes_login_required":3100},3003:{"apac.errorcodes_not_host":3003},3004:{"apac.errorcodes_wrong_pass":3004},3008:{"apac.errorcodes_not_start":3008},3129:{"apac.errorcodes_not_start":3008},3009:{"apac.errorcodes_be_removed":3009},3501:{"apac.errorcodes_login_required":3082},3502:{"apac.errorcodes_login_required":3082},3032:{"apac.errorcodes_denied_register_with_panelist":3100},3033:{"apac.errorcodes_denied_email":3620},3059:{"apac.errorcodes_not_support_simulive":3630},1001:{"apac.errorcodes_host_inactive":3625},3136:{"apac.errorcodes_zak":3623,"apac.errorcodes_host_email":3624,"apac.errorcodes_zak2":3265,"apac.errorcodes_require_host":3709},3082:{"apac.errorcodes_real_name":3082},403:{"apac.errorcodes_offline":403},404:{"apac.errorcodes_offline":403},4003:{"apac.invalid_parameter":4003},124:{"apac.errorcodes_tk_expired":3610}},Yk={3004:{"apac.errorcodes_pac_mn_wrong":3714},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3027:{"apac.errorcodes_host_email_as_attendee":3627},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_no_response_from_web":3621},131005:{"apac.errorcodes_no_response_from_web":3621},1001:{"apac.errorcodes_host_inactive":3625},131001:{"apac.errorcodes_host_inactive":3625},131013:{"meeting ended":4004},103039:{"apac.errorcodes_be_removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};let yT;function Qy(s,l){const{key:u,value:h}=function(E,I){let R=!1;if(-1===E)return{key:"apac.errorcodes_offline",value:403};if(3e3===E){const V=["en-US","de-DE","es-ES","fr-FR","jp-JP","pt-PT","ru-RU","zh-CN","zh-TW","ko_KO","vi-VN","it-IT","id-ID","nl-NL","tr-TR","pl-PL"];let O={};if(yT)O=yT;else{const X=Object.keys(o0[3e3]);V.forEach(ee=>{const re=("en-US"===(ne=ee)&&(ne="default"),r0[ne]||r0.default);var ne;O[ee]={},X.forEach(ne=>{O[ee][ne]=re[ne]})}),yT=O}return V.forEach(X=>{if(R)return;const ee=vT(O[X],I);ee&&(R={key:ee,value:o0[E][ee]})}),R||(R={key:"apac.errorcodes_fail",value:200}),R}if(200===E){const V=vT({"apac.errorcodes_pac_api_wrong":"The api key is wrong.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"The role is not applicable.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The account don't enable API.","apac.errorcodes_pac_cant_host_other_mn":"Can not be host in other account's meeting.","apac.errorcodes_pac_invalid_signature":"Invalid signature.","apac.errorcodes_pac_no_permission":"No permission"},I);return R=V?{key:V,value:o0[E][V]}:{key:"apac.errorcodes_fail",value:200},R}if(void 0!==o0[E]){const V=o0[E],O=Object.keys(V)[0];R={key:O,value:V[O]}}if(R)return R;const N=vT(qr,E),L=zk[N];return L?{key:L,value:E}:{key:"apac.errorcodes_fail",value:200}}(s,l),v=jy(u,u);return u!==v?{reason:v,errorCode:h}:{reason:_h[u],errorCode:h}}function Z_(s){let l=!1;const u="number"==typeof s?s:s.body.res;if(void 0!==Yk[u]){const v=Yk[u],E=Object.keys(v)[0];l={key:E,value:v[E]}}if(l){const{key:v,value:E}=l,I=jy(v,v);return Object.assign({},s,v!==I?{reason:I,errorCode:E}:{reason:_h[v],errorCode:E})}const h=Qy(u);return Object.assign({},s,{reason:h.reason,errorCode:h.errorCode})}const qk=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],Jk={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:s=>({meetingTopic:gh(s)}),gatewayKey:s=>{const[,l,u]=s.split(".");return l&&u?{gatewayUser:{userId:Number(l),sn:u}}:{}},encryptKey:s=>({gcmSessinKey:Ju(s)})},vn=uo("GET_MEETING_INFO"),Pi=uo("GET_INSTANT_MEETING_INFO");uo("LOGON_ZOOM_DOMAIN"),uo("VERIFY_ZOOM_RECAPTCHA"),uo("LOGON_THIRD_PARTY_DOMAIN");const da=uo("PING_RWC_SERVER"),io=uo("MEETING_FAILOVER"),Us=uo("LEAVE_MEETING"),$m=uo("END_MEETING");uo("REGISTER_WEBINAR");const Xm=uo("TRIGGER_IDLE_CHECK"),{setMeetingInfo:Gc,setWindownOpen:ET,setAppidSignature:Hy,setZtk:PV,setZsk:s0,setTkMtkguid:TL,setPingRwcTimestamp:a0,setInMeetingInfo:Ts,setMeetingAttribute:Rd,resetMeeting:Gy,setIsHost:Ef,setIsCohost:yp,setMeetingIsOnHold:ev,setIsMeetingReset:c0,setAudioVideoBeforeOnHold:$k,setCurrentUserAudioBeforeReset:Xk,setIsCurrentUserMutedBeforeReset:Wy,setMeetingStatus:u0,setMeetingRegion:l0,setIsCurrentUserStartVideoBeforeReset:tv,setJoinMeetingTimeStamp:Zk,setIsEnableQos:bT,setActiveAppInfo:Zm,setMeetingIdleStartTime:eg,setSessionIdleTimeoutMinutes:tg,setIsAudioBridgeEnabled:bf,addDiscardedRwcHost:d0,setSharePronounType:nv,setIsStayAwakeDuringTheSession:ST,setMeetingJoinSuccessTimestamp:eP,resetFailoverRecord:fc,setFailoverReason:Ep,setIsQuicklyLeaveMeetingAfterRefresh:Jo}=ws({SET_MEETING_INFO:s=>s,SET_WINDOWN_OPEN:s=>s,SET_APPID_SIGNATURE:s=>s,SET_ZTK:s=>s,SET_ZSK:s=>s,SET_TK_MTKGUID:s=>s,SET_PING_RWC_TIMESTAMP:s=>s,SET_IN_MEETING_INFO:s=>s,SET_MEETING_ATTRIBUTE:s=>{if(qk.some(l=>s&&void 0!==s[l])){let l=s;return Object.keys(Jk).some(u=>void 0!==s[u])&&(l=Object.keys(s).reduce((u,h)=>{const v=Jk[h];return"function"==typeof v?Object.assign(u,v(s[h])):"string"==typeof v&&(u[v]=s[h]),u},{})),l}return{}},SET_IS_HOST:s=>s&&s.bHost,SET_IS_COHOST:s=>s&&s.bCoHost,RESET_MEETING:s=>s,SET_MEETING_IS_ON_HOLD:s=>s,SET_IS_MEETING_RESET:s=>s,SET_AUDIO_VIDEO_BEFORE_ON_HOLD:s=>s,SET_CURRENT_USER_AUDIO_BEFORE_RESET:s=>s,SET_IS_CURRENT_USER_MUTED_BEFORE_RESET:s=>s,SET_MEETING_STATUS:s=>s,SET_MEETING_REGION:s=>s,SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET:s=>s,SET_JOIN_MEETING_TIME_STAMP:s=>s,SET_IS_ENABLE_QOS:s=>s,SET_ACTIVE_APP_INFO:s=>s,SET_MEETING_IDLE_START_TIME:s=>s,SET_SESSION_IDLE_TIMEOUT_MINUTES:s=>s,SET_IS_AUDIO_BRIDGE_ENABLED:s=>s,ADD_DISCARDED_RWC_HOST:s=>s,SET_SHARE_PRONOUN_TYPE:s=>s,SET_IS_STAY_AWAKE_DURING_THE_SESSION:s=>s,SET_MEETING_JOIN_SUCCESS_TIMESTAMP:s=>s,RESET_FAILOVER_RECORD:s=>s,SET_FAILOVER_REASON:s=>s,SET_IS_QUICKLY_LEAVE_MEETING_AFTER_REFRESH:s=>s});let Es=function(s){return s.Failover="failover",s.OnHold="on hold",s.Promote="promote",s.Depromote="depromote",s.JoinBreakoutRoom="join breakout room",s.MoveToBreakoutRoom="move to breakout room",s.BackToMainSession="back to main session",s}({});const tP="js_media.min.js",ng="1503_js_media.min.js";let Ky=function(s){return s.CDN="CDN",s.Global="Global",s.CN="CN",s}({}),rg=function(s){return s.Connected="Connected",s.Reconnecting="Reconnecting",s.Closed="Closed",s.Fail="Fail",s}({}),bs=function(s){return s.Initial="initial",s.Joined="joined",s.Closed="closed",s}({}),Ah=function(s){return s.AudioBridgeEnable="M:1,2;V:1,2",s.AudioDecodeInWorklet="M:6;V:3",s}({}),Rs=function(s){return s[s.NormalCase=-1]="NormalCase",s[s.NoHeartbeat=0]="NoHeartbeat",s[s.NoHeartbeatMChannel=1]="NoHeartbeatMChannel",s[s.NetworkChange=2]="NetworkChange",s[s.NotifyUiFailover=3]="NotifyUiFailover",s[s.InvalidParameters=4]="InvalidParameters",s[s.OnError=5]="OnError",s[s.OnErrorMChannel=6]="OnErrorMChannel",s[s.Disconnect=7]="Disconnect",s[s.DisconnectMChannel=8]="DisconnectMChannel",s[s.DisconnectXmpp=9]="DisconnectXmpp",s[s.RefreshPage=10]="RefreshPage",s}({}),fi=function(s){return s.LocalStorage="LocalStorage",s.SessionStorage="SessionStorage",s.Memory="Memory",s}({});const zy=ys("{}");class Ur{constructor(l){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=ys(`zoom-storage-${l}`),this.localStorageKey=ys("zoom-local-storage"),this.memoryCache={};try{this.sessionCache=JSON.parse(gh(sessionStorage.getItem(this.sessionStorageKey)||zy)),this.localCache=JSON.parse(gh(localStorage.getItem(this.localStorageKey)||zy))}catch(u){console.error(u),this.sessionCache={},this.localCache={}}}static init(l){this.instance=new Ur(l)}static get(l){if(void 0===this.instance)throw new Error("read before initial");return this.instance.getValue(l).value}static set(l,u,h){if(void 0===this.instance)throw new Error("set before initial");return this.instance.setValue(l,u,h)}static remove(l){if(void 0===this.instance)throw new Error("remove before initial");return this.instance.removeValue(l)}static clearSession(){if(void 0===this.instance)throw new Error("clear before initial");return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey)}getValue(l){return this.sessionCache.hasOwnProperty(l)?{value:this.sessionCache[l],type:fi.SessionStorage}:this.localCache.hasOwnProperty(l)?{value:this.localCache[l],type:fi.LocalStorage}:{value:this.memoryCache[l],type:fi.Memory}}setValue(l,u,h){if(!l)throw new Error("key is null");switch(h){case fi.SessionStorage:{const v=this.sessionCache[l];let E=u;return"function"==typeof u&&(E=u(v)),v!==E&&(this.sessionCache[l]=E,this.flushValue(fi.SessionStorage)),E}case fi.LocalStorage:{const v=this.localCache[l];let E=u;return"function"==typeof u&&(E=u(v)),v!==E&&(this.localCache[l]=E,this.flushValue(fi.LocalStorage)),E}case fi.Memory:{const v=this.memoryCache[l];let E=u;return"function"==typeof u&&(E=u(v)),this.memoryCache[l]=E,E}default:return null}}removeValue(l){const{type:u}=this.getValue(l);switch(u){case fi.SessionStorage:delete this.sessionCache[l],this.flushValue(fi.SessionStorage);break;case fi.LocalStorage:delete this.localCache[l],this.flushValue(fi.LocalStorage);break;case fi.Memory:delete this.memoryCache[l]}}flushValue(l){l===fi.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,ys(JSON.stringify(this.sessionCache))):l===fi.LocalStorage&&localStorage.setItem(this.localStorageKey,ys(JSON.stringify(this.localCache)))}}function rv(){const s=navigator.userAgent;let l,u=s.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(u[1])?(l=/\brv[ :]+(\d+)/g.exec(s)||[],`IE ${l[1]||""}`):"Chrome"===u[1]&&(l=s.match(/\b(OPR|Edge)\/(\d+)/),l&&l.length)?l.slice(1).join(" ").replace("OPR","Opera"):(u=u[2]?[u[1],u[2]]:[navigator.appName,navigator.appVersion,"-?"],(l=s.match(/version\/(\d+)/i))&&u.splice(1,1,l[1]),Ml()&&(u[0]="ios-safari"),u.join(""))}function Od(){return Ml()?"iOS/iPadOS"+function(){var s,l;const u=null===(s=navigator.userAgent.toLowerCase().match(/os (.*?) like mac os/))||void 0===s?void 0:s[1];return(null==u||null===(l=u.match(/^\d+/))||void 0===l?void 0:l[0])||"0"}():og()?"Android"+function(){var s,l;const u=null===(s=navigator.userAgent.toLowerCase().match(/android (.*?);/))||void 0===s?void 0:s[1];return(null==u||null===(l=u.match(/^\d+/))||void 0===l?void 0:l[0])||"0"}():null}function pa(){const s=navigator.userAgent.toLowerCase();return!/opera|opr\/[\d]+/.test(s)&&/(msie|trident)/.test(s)}Ur.instance=void 0;const p0=()=>/edge\/(\d+)/i.test(navigator.userAgent),ig=()=>/firefox/i.test(navigator.userAgent),yh=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Sf=()=>{const{userAgent:s}=navigator;return!/opera|opr\/[\d]+/i.test(navigator.userAgent)&&!p0()&&/chrome/i.test(s)&&/webkit/i.test(s)},Ml=()=>{const{userAgent:s}=navigator;return/iPad|iPhone|iPod/i.test(s)||/MacIntel/i.test(navigator.platform)&&(null===(l=navigator)||void 0===l?void 0:l.maxTouchPoints)>2;var l},CT=()=>/arm/i.test(navigator.userAgent),RL=()=>/\bCrOS\b/.test(navigator.userAgent);function og(){return/android/i.test(navigator.userAgent)}function Au(){return og()||Ml()}const nP=new class{constructor(){this.value=void 0}get isSupported(){if(void 0===this.value)if("function"==typeof window.OffscreenCanvas){const s=new OffscreenCanvas(1,1);s.addEventListener("webglcontextlost",l=>{l.preventDefault()}),this.value=!!s.getContext("webgl")}else this.value=!1;return this.value}};function Eh(){return nP.isSupported}function mc(){return"object"==typeof WebAssembly&&"function"==typeof Worker}const Yy=()=>"function"==typeof AudioWorklet,qy=()=>pa(),sg=()=>{var s;return Eh()&&(null===(s=navigator)||void 0===s?void 0:s.hardwareConcurrency)>=4&&"function"==typeof requestAnimationFrame&&"function"==typeof SharedArrayBuffer};function iv(){return"function"==typeof window.MediaStreamTrackProcessor}const ov=s=>{var l;if(!sg()){const u=yh()||Ml(),h="function"!=typeof window.SharedArrayBuffer&&(!!u||iv()&&Eh());return s&&h?4:1}return Au()?4:RL()&&CT()||RL()&&!CT()?navigator.hardwareConcurrency>=4?9:4:(null===(l=navigator)||void 0===l?void 0:l.hardwareConcurrency)<4?9:25};function sv(){var s;return"webkit"in window&&!("chrome"in window)&&!(null===(s=window.webkit.messageHandlers)||void 0===s||!s.jsOCHelper)}function Nl(){var s;let l;var u,h,v,E;return Ml()?(l=Number(null===(u=Od())||void 0===u||null===(h=u.match(/\d+$/))||void 0===h?void 0:h[0]),l>=15):og()?(l=Number(null===(v=Od())||void 0===v||null===(E=v.match(/\d+$/))||void 0===E?void 0:E[0]),l>=10):(l=Number(null===(s=rv().match(/\d+$/))||void 0===s?void 0:s[0]),!!(Sf()&&l>=69||yh()&&l>14||ig()&&l>=76||p0()&&l>=79))}let gc=function(s){return s.VIDEO_ENCODE="0",s.VIDEO_DECODE="1",s.AUDIO_ENCODE="2",s.AUDIO_DECODE="3",s.SHARING_ENCODE="4",s.SHARING_DECODE="5",s}({}),Cf=function(s){return s[s.NONE=0]="NONE",s[s.AES_256=1]="AES_256",s[s.AES_GCM=2]="AES_GCM",s}({});const Wc=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"}});let So=function(s){return s.WebclientOpt="WEB_CLIENT_OPT",s.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",s.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",s.WebclientZtk="WEB_CLIENT_ZTK",s.WebclientZsk="WEB_CLIENT_ZSK",s.WebclientTk="WEB_CLIENT_TK",s.WebclientIVState="WEB_CLIENT_IV_STATE",s.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",s.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",s.WebclientZoomId="WEB_CLIENT_ZOOM_ID",s.WebclientUserName="WEB_CLIENT_USER_NAME",s.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",s.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",s.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",s.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",s.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",s.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY",s.WebclientFailoverCount="WEB_CLIENT_FAILOVER_COUNT",s}({}),$u=function(s){return s.WebclientDeviceId="WEBCLIENT_DEVICE_ID",s.VSDKLogTrackingId="ZM_VSDK_LOG_TRACKING_IDS",s}({});const bh=(window.crypto||window.msCrypto).subtle,Kc=So.WebclientIVState,ag=Object.keys(Wc).map(s=>Wc[s].sessionType);let wa=(()=>{class s{constructor(u,h,v){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(u,h,v),Ur.set(Kc,{},fi.SessionStorage)}static init(u,h,v){this.instance?this.instance.resetParameters(u,h,v):this.instance=new s(u,h,v)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(u,h,v){this.isGCMEnabled=!(pa()||!mc())&&v===Cf.AES_GCM,this.gcmSessionKey=Ju(h),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(u)}beginCrypto(u,h,v){const E=new Uint32Array(1);E[0]=9,E[0]+=Number(v);const I=new Uint8Array(E.buffer);let R=new Uint8Array(132);const N=Ju(h);return R.set(N,0),R.set(I,N.length),R=R.subarray(0,N.length+4),bh.importKey("raw",u,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then(L=>bh.sign({name:"HMAC"},L,R)).then(L=>bh.importKey("raw",L,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))}getNextIV(u){const h=Ur.get(Kc);return void 0===h[u]?(h[u]=0,Ur.set(Kc,h,fi.SessionStorage)):Ur.set(Kc,v=>({...v,[u]:v[u]+1}),fi.SessionStorage)}resetIVState(){const u=Ur.get(Kc);if(void 0!==u){const h=Object.keys(u).filter(v=>ag.indexOf(v)>-1);h.length>0&&(h.forEach(v=>{u[v]+=1e6}),Ur.set(Kc,u,fi.SessionStorage))}}static resetIV(){if(void 0===this.instance)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt(u){let{text:h,type:v}=u;const E=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const R=this.instance.getNextIV(v.sessionType),N=new ArrayBuffer(16),L=new Uint8Array(N);new DataView(N).setUint32(0,R,!0);let V=null;return V="BO_BROADCAST"===v.sessionType||"XMPP_CHAT"===v.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(V,this.instance.zoomId,v.gcmType).then(O=>{const X=(new TextEncoder).encode(h);return bh.encrypt({name:"AES-GCM",iv:L,additionalData:E,tagLength:128},O,X)}).then(O=>{const ee=new ArrayBuffer(1+L.byteLength+2+E.byteLength+4+O.byteLength);new Uint8Array(ee)[0]=L.length,new Uint8Array(ee,1,L.byteLength).set(L),new DataView(ee).setUint16(1+L.byteLength,E.length,!0),new Uint8Array(ee,3+L.byteLength).set(E),new DataView(ee).setUint32(1+L.byteLength+2+E.byteLength,O.byteLength-16,!0),new Uint8Array(ee,1+L.byteLength+2+E.byteLength+4).set(new Uint8Array(O));const re=new Uint8Array(ee).reduce((ne,fe)=>ne+String.fromCharCode(fe),"");return window.btoa(re).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")})}return Promise.resolve(ys(h))}static beginDecrypt(u){let{decryptedText:h,type:v,zoomId:E}=u;if(this.instance&&this.instance.isGCMEnabled){const I=function(ve){let Le;const Qe=ve.length,ze=new Array(Qe);for(Le=0;Le<Qe;++Le)ze[Le]=255&ve.charCodeAt(Le);return new Uint8Array(ze)}(atob(h.replace(/_/g,"/").replace(/-/g,"+"))),R=I[0],N=I.slice(1,R+1),L=I.slice(1+R,3+R),V=new DataView(L.buffer).getUint16(0,!0),O=I.slice(1+R+2,1+R+2+V),X=I.slice(1+R+2+V,1+R+2+V+4),ee=new DataView(X.buffer).getUint32(0,!0),re=I.slice(1+R+2+V+4,1+R+2+V+4+ee),ne=I.slice(1+R+2+V+4+ee);let fe=null;return fe="BO_BROADCAST"===v.sessionType||"XMPP_CHAT"===v.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(fe,E,v.gcmType).then(ve=>{const Le=function(Qe,ze){Qe=new Uint8Array(Qe),ze=new Uint8Array(ze);const ft=new Uint8Array(Qe.length+ze.length);return ft.set(Qe),ft.set(ze,Qe.length),ft}(re,ne);return bh.decrypt({name:"AES-GCM",iv:N,additionalData:O,tagLength:8*ne.length},ve,Le.buffer)}).then(ve=>({message:(new TextDecoder).decode(ve),iv:N,aad:O})).catch(ve=>({message:"[This is an encrypted message]",iv:N,aad:O}))}{const I=new TextDecoder("utf-8");return Promise.resolve({message:I.decode(Ju(h))})}}}return s.instance=void 0,s})();const ug=20234,Mo=7937,zc=7938,Jy=12039,IT=16138;let xi=function(s){return s[s.NoAttendee=0]="NoAttendee",s[s.All=1]="All",s[s.AllPanelist=2]="AllPanelist",s[s.Host=3]="Host",s[s.NoOne=4]="NoOne",s[s.EveryonePublicly=5]="EveryonePublicly",s}({}),Xu=function(s){return s[s.AllPanelist=1]="AllPanelist",s[s.Everyone=2]="Everyone",s[s.Invalid=0]="Invalid",s}({}),oo=function(s){return s[s.All=0]="All",s[s.Panelist=1]="Panelist",s[s.IndividualCcPanelist=2]="IndividualCcPanelist",s[s.Individual=3]="Individual",s[s.SilentModeUsers=4]="SilentModeUsers",s}({}),lg=function(s){return s[s.None=0]="None",s[s.Delete=1]="Delete",s[s.Modify=2]="Modify",s}({}),f0=function(s){return s[s.Success=0]="Success",s[s.Delete=1]="Delete",s[s.Block=3]="Block",s}({});const av=[xi.All,xi.Host,xi.NoOne,xi.EveryonePublicly],OL=[xi.NoOne,xi.All,xi.AllPanelist],ss={AllPanelist:11,Everyone:12},m0={[ss.AllPanelist]:Xu.AllPanelist,[ss.Everyone]:Xu.Everyone},cv={userId:oo.All,displayName:"Everyone",isHost:!1,isCoHost:!1},If={userId:oo.Panelist,displayName:"All panelists"},wf={userId:oo.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let _c=function(s){return s.Open="open",s.Message="message",s.Error="error",s.Close="close",s}({});class Tf{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.heartBeatInterval=6e4,this.eventHandlers=new Map,this.websocket=null,this.seq=1}on(l,u){let h=this.eventHandlers.get(l);h||(h=[]),h.push(u),this.eventHandlers.set(l,h)}off(l,u){const h=this.eventHandlers.get(l);if(h){const v=h.filter(E=>E!==u);this.eventHandlers.set(l,v)}}emit(l,u){const h=this.eventHandlers.get(l);h&&h instanceof Array&&h.slice(0).forEach(v=>{try{v(u)}catch(E){console.error(E)}})}sendMessageToRwg(l){this.seq+=1;const u=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(l,{seq:u}))),u}connect(l){this.websocket=new WebSocket(l),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var l;null===(l=this.websocket)||void 0===l||l.close()}addHeartBeat(){const l=setInterval(()=>{this.sendMessageToRwg({evt:0})},this.heartBeatInterval);this.intervalsToBeCleardWhenSocketClose.push(l)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach(l=>clearInterval(l))}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",l=>{this.addHeartBeat(),this.emit("open",l)}),this.websocket.addEventListener("message",l=>{this.emit("message",l)}),this.websocket.addEventListener("close",l=>{this.clearIntervals(),this.emit("close",l)}),this.websocket.addEventListener("error",l=>{this.emit("error",l)}))}joinMeeting(l){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:l}})}}lockMeeting(l){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:l}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(){return{seq:this.sendMessageToRwg({evt:4103,body:{}})}}recordMeeting(l,u){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:l,bPause:u}})}}summaryMeeting(l){return{seq:this.sendMessageToRwg({evt:8009,body:{type:l?"start":"stop"}})}}allowSelfRecord(l){return{seq:this.sendMessageToRwg({evt:4325,body:{bAllowISORecord:l}})}}enableZoomIQRecord(l){return{seq:this.sendMessageToRwg({evt:4318,body:{check:l}})}}expel(l){return{seq:this.sendMessageToRwg({evt:4107,body:{id:l}})}}expelAttendee(l){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:l}})}}rename(l,u,h){return{seq:this.sendMessageToRwg({evt:4109,body:{id:l,dn2:u,olddn2:h}})}}assignHost(l,u){return{seq:this.sendMessageToRwg({evt:4111,body:{id:l,bCoHost:u}})}}reclaimHost(l){return{seq:this.sendMessageToRwg({evt:4133,body:{id:l,bCoHost:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}})}}revokeCoHost(l){return{seq:this.sendMessageToRwg({evt:4195,body:{id:l}})}}putOnHold(l,u){return{seq:this.sendMessageToRwg({evt:4113,body:{id:l,bHold:u}})}}setMuteOnEntry(l){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:l}})}}setHoldOnEntry(l){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:l}})}}inviteCRCDevice(l,u){return{seq:this.sendMessageToRwg({evt:4119,body:{ip:l,type:u,encrypt:arguments.length>2&&void 0!==arguments[2]?arguments[2]:2}})}}cancelInviteCRCDevice(l){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:l}})}}sendCloseCaption(l){return{seq:this.sendMessageToRwg({evt:4125,body:{...l}})}}allowViewParticipantNumber(l){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:l}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(l,u){return{seq:this.sendMessageToRwg({evt:4131,body:{id:l,bOn:u}})}}chat(l,u,h,v){const E={text:l,destNodeID:u};return h&&Object.assign(E,{sn:h}),v&&Object.assign(E,{attendeeNodeID:v}),{seq:this.sendMessageToRwg({evt:4135,body:E})}}assignCC(l,u){return{seq:this.sendMessageToRwg({evt:4137,body:{id:l,bCCEditor:u}})}}enableLT(l){return{seq:this.sendMessageToRwg({evt:4227,body:{op:l?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}disableCaptions(l){return{seq:this.sendMessageToRwg({evt:4305,body:{type:4,disableNewLtt:l}})}}enableManualCaption(l){return{seq:this.sendMessageToRwg({evt:4291,body:{op:l?1:0}})}}setTranslationLanguage(l){return void 0!==l?{seq:this.sendMessageToRwg({evt:4305,body:{type:1,lang:l}})}:{seq:this.sendMessageToRwg({evt:4305,body:{type:3}})}}setSpokenLanguage(l){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:l}})}}allowAskLT(l){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:l}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(l){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:l}})}}setChatPriviledge(l){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:l}})}}setPanelistChatPrivilege(l){if(!Object.values(ss).includes(l))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:l}})}}sendFeedback(l){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:l}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(l){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:l}})}}allowUnmuteAudio(l){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:l}})}}allowRaiseHand(l){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:l}})}}boToken(l){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:l}})}}startBO(l){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:l}})}}stopBO(l){return{seq:this.sendMessageToRwg({evt:4177,body:{status:l}})}}assignToBO(l,u){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:l,targetBID:u}})}}switchBO(l,u){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:l,targetBID:u}})}}wantJoinBO(l,u){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:l,targetBID:u}})}}joinBO(l){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:l}})}}leaveBO(){return{seq:this.sendMessageToRwg({evt:4185,body:{reason:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}broadcastBO(l){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:l}})}}askForHelpBO(l){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:l}})}}askForHelpResultBO(l,u){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:l,helpResult:u}})}}allowParticipantRename(l){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:l}})}}allowMessageFeedbackNotify(l,u){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:l,id:u}})}}setPlayChime(l,u){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:l,id:u}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(l,u,h){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:l,targetUserID:u,bBind:h}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(l,u,h,v){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:u,userID:h,clientCap:v,bPromote:l}})}}sendPromoteConsent(l,u){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:l,req_id:u}})}}batchCreateBOToken(l){const u=l.map((h,v)=>({topic:h,index:v}));return{seq:this.sendMessageToRwg({evt:4211,body:u})}}mute(l,u){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:u,id:l}})}}audioDrop(l){return{seq:this.sendMessageToRwg({evt:8195,body:{id:l}})}}audioDialout(l,u,h,v,E){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:l,dn2:ys(u),bCallme:h,bPressOne:v,bGreeting:E}})}}audioCancelDialout(l,u){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:l,bCallme:u}})}}audioMuteAll(l){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:l}})}}allowToTalk(l,u){return{seq:this.sendMessageToRwg({evt:8204,body:{id:l,bAllowTalk:u}})}}subscribeVideo(){return{seq:this.sendMessageToRwg({evt:12289,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,size:arguments.length>1?arguments[1]:void 0,bOn:arguments.length>2?arguments[2]:void 0}})}}unsubscribeVideo(){return{seq:this.sendMessageToRwg({evt:12291,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}muteAttendeeVideo(l,u){return{seq:this.sendMessageToRwg({evt:12297,body:{id:l,bOn:u}})}}notifyRwgIsMuteVideo(l,u){return this.muteAttendeeVideo(l,u)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(l,u){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:l,bOn:u}})}}allowViewAll(l,u){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:l,bOn:u}})}}allowVote(l,u){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:l,bOn:u}})}}allowComment(l,u){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:l,bOn:u}})}}sharingRequestRemoteControl(l,u){return{seq:this.sendMessageToRwg({evt:16389,body:{id:l,bOn:u}})}}subscribeGrabRemoteControl(l,u){return{seq:this.sendMessageToRwg({evt:16393,body:{id:l,bOn:u}})}}subscribeSharing(l,u,h,v){const E={id:l,size:u};return h&&Object.assign(E,{bShareToBO:!0}),void 0!==v&&Object.assign(E,{bVideoShare:v}),{seq:this.sendMessageToRwg({evt:16415,body:E})}}unsubscribeSharing(l,u){const h={id:l};return u&&Object.assign(h,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16417,body:h})}}sendRWGConnectionPerformance(l){return{seq:this.sendMessageToRwg({evt:4167,body:{data:l}})}}sendSdkKeyToMonitor(l,u,h){return{seq:this.sendMessageToRwg({evt:4167,body:{data:`ZoomConferenceClient,videoapp_HTML5_sdk_web_join,${h},2,${u},${l}`}})}}sendDatachannelOffer(l){return{seq:this.sendMessageToRwg({evt:24321,offer:l})}}joinOrLeaveVoip(l){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:l}})}}startSharing(l,u){return{seq:this.sendMessageToRwg({evt:16409,body:{id:l,boOn:!1,...u??{}}})}}stopSharing(l){return{seq:this.sendMessageToRwg({evt:16409,body:{id:l,bOn:!0}})}}lockSharing(l){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:l}})}}startShareToBreakoutRoom(l){return{seq:this.sendMessageToRwg({evt:16425,body:{id:l,bShareToBO:!0}})}}stopShareToBreakoutRoom(l){return{seq:this.sendMessageToRwg({evt:16425,body:{id:l,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(l){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:l}})}}allowMultiplePin(l,u){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:l,bOn:u}})}}spotlightVideo(l,u){return{seq:this.sendMessageToRwg({evt:4219,body:{id:l,...u}})}}connectCamera(l,u){return{seq:this.sendMessageToRwg({evt:12307,body:{id:l,bOn:u}})}}followHostLayout(l){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:l}})}}setVideoDragLayout(l){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:l}})}}chatCmdReq(l,u){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:l,cmd:u}})}}activeAppLinkReq(l){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:l}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(l){return{seq:this.sendMessageToRwg({evt:16423,body:{bOn:!0,bShareAudio:!l}})}}localMuteAudio(l,u){return{seq:this.sendMessageToRwg({evt:8209,body:{id:l,bMute:u}})}}changeSharePronoun(l,u){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:l,strPronoun:u}})}}sendReceivingSharingReady(l){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:l}})}}sendManualCaption(l){return{seq:this.sendMessageToRwg({evt:4289,body:{...l}})}}sendPollingAction(l,u,h){return{seq:this.sendMessageToRwg({evt:4224,body:{action:l,PollingId:u,...h}})}}broadcastUserNetworkQuality(l){return{seq:this.sendMessageToRwg({evt:4331,body:{type:l.isUplink,level:l.level,bwLevel:l.bwLevel}})}}sendFarEndCameraControl(l,u,h){return{seq:this.sendMessageToRwg({evt:4329,body:{cmd:l,userID:u,buttonID:h}})}}sendCameraAblity(l){return{seq:this.sendMessageToRwg({evt:4330,body:{...l,focus:!1}})}}sendReaction(l){return{seq:this.sendMessageToRwg({evt:4259,body:{...l}})}}}let ji=(()=>{class s extends Tf{static createAgent(){return this.rwgInstance||(this.rwgInstance=new s),this.rwgInstance}}return s.rwgInstance=null,s})(),g0=(()=>{class s extends Tf{static getInstance(){return this.instance||(this.instance=new s),this.instance}}return s.instance=null,s})();const $y=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"js_audio_worklet_simd.min.js",category:"audio",type:"worklet",tag:"simd",alias:"audioWorkletSIMDPath"},{name:"js_audio_worklet_process.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletProcessPath"},{name:"js_sharing_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"sharingAudioWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"video_share_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"vsmiworkerpath"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"}];let Yc=function(s){return s.VideoEncode="0",s.VideoDecode="1",s.AudioEncode="2",s.AudioDecode="3",s.SharingEncode="4",s.SharingDecode="5",s}({});const uv=So.WebclientIVState;let tn=(()=>{class s{static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new s),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.mediaSocketAddress=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.mediaOptions=void 0,this.callbackList=[]}init(){if(!this.instance){const u={ivObj:{[gc.AUDIO_ENCODE]:Ur.get(uv)&&Ur.get(uv)[gc.AUDIO_ENCODE],[gc.VIDEO_ENCODE]:Ur.get(uv)&&Ur.get(uv)[gc.VIDEO_ENCODE],[gc.SHARING_ENCODE]:Ur.get(uv)&&Ur.get(uv)[gc.SHARING_ENCODE]}};this.instance=new JsMediaSDK_Instance(u),this.instance.setRWGAgent(ji.createAgent())}}setAssetsAndConstraint(u,h,v,E){var I,R,N;this.assetsPath=u,this.constraints=h,this.mediaWorkersPath=(R=this.assetsPath,N=!!v,$y.reduce((L,V)=>{const{name:O,alias:X}=V;return Object.assign(L,{[`${X}`]:`${R}/${N?"1503_":""}${O}`}),L},{})),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=E,null===(I=this.instance)||void 0===I||I.JsMediaSDK_PreLoad(this.mediaWorkersPath,this.onMediaSDKCallback,E)}onMediaSDKCallback(u,h){this.callbackList.length>0&&this.callbackList.forEach(v=>v(u,h))}registerCallback(u){this.callbackList.push(u)}unregisterCallback(u){this.callbackList=this.callbackList.filter(h=>h!==u)}static isSupportVideoEncodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){return Eh()&&0==JsMediaSDK_Instance.util.AdapterWhiteListCheckForEncoder()}static getPTZCapability(){var u,h,v,E,I,R;return{pan:!(null===(u=JsMediaSDK_Instance.util)||void 0===u||null===(h=u.isSupportCameraPan)||void 0===h||!h.call(u)),tilt:!(null===(v=JsMediaSDK_Instance.util)||void 0===v||null===(E=v.isSupportCameraTilt)||void 0===E||!E.call(v)),zoom:!(null===(I=JsMediaSDK_Instance.util)||void 0===I||null===(R=I.isSupportCameraZoom)||void 0===R||!R.call(I))}}static isSupportVideoShare(){var u,h;return!(null===(u=JsMediaSDK_Instance.util)||void 0===u||null===(h=u.isSupportVideoShareReceive)||void 0===h||!h.call(u))}static isSupportVideoShareSend(){var u,h;return!(null===(u=JsMediaSDK_Instance.util)||void 0===u||null===(h=u.isSupportVideoShareSend)||void 0===h||!h.call(u))}static isSupportSending720P(){var u;return!(null===(u=JsMediaSDK_Instance.util)||void 0===u||!u.get720pcapacity())}static isSupportSubscribing1080P(){var u;return!(null===(u=JsMediaSDK_Instance.util)||void 0===u||!u.getsub1080pcapacity())}static isSupportOpenMicWhenShareAudio(){return!!JsMediaSDK_Instance.util.isSupportOpenMicWhenShareAudio()}static isSupportMediaPlaybackAsVideoInput(){var u;return!(null===(u=JsMediaSDK_Instance.util.videoToMediaStreamManager)||void 0===u||!u.isSupported())}static isSupportMediaPlaybackAsAudioInput(){var u;return!(null===(u=JsMediaSDK_Instance.util.audioToMediaStreamMananger)||void 0===u||!u.isSupported())}static isSupportAudioDenoise(){return!!JsMediaSDK_Instance.util.isSupportAudioDenoise()}connect(u){var h,v,E,I,R,N;let{svcUrl:L,meetingNumber:V,conId:O,e2eEncrypt:X,isViewOnly:ee,currentUserId:re,isWebinar:ne,enableAudioQos:fe,enableVideoQos:ve=!1,enableWebtransport:Le=!1,webtransportPort:Qe}=u;this.svcUrl=L,this.meetingNumber=V,this.confId=O;const ze={videoSocketAddress:`wss://${st=L}/wc/media/${Ne=V}?type=v&cid=${Jt=O}`,audioSocketAddress:`wss://${st}/wc/media/${Ne}?type=a&cid=${Jt}`,sharingSocketAddress:`wss://${st}/wc/media/${Ne}?type=${qy()?"j":"s"}&cid=${Jt}`};var st,Ne,Jt;this.mediaSocketAddress=ze,this.currentUserId=re;const ft=ov(null===(h=this.mediaOptions)||void 0===h?void 0:h.enableMultiDecodeVideoWithoutSAB);var lt,tt,St,Zt,ut,Ze,_e,He,ct;null===(v=this.instance)||void 0===v||v.setPropsBeforeInit({callback:this.onMediaSDKCallback,audioWorkerPath:mc()?null===(E=this.mediaWorkersPath)||void 0===E?void 0:E.audioWorkletPath:void 0,e2eEncrypt:X,isEnableListenInitEvent:!0,enableWebtransport:Le,webtransportPort:Qe}),!0===(null===(I=this.constraints)||void 0===I?void 0:I.audio)&&mc()&&!Au()&&((ne||Yy())&&(null===(lt=this.instance)||void 0===lt||lt.initAudioDecode(this.mediaWorkersPath,ze.audioSocketAddress,re,bd,O,V,ft,fe)),!Yy()||ne&&ee||null===(tt=this.instance)||void 0===tt||tt.initAudioEncode(this.mediaWorkersPath,ze.audioSocketAddress,re,bd,O,V,ft,fe)),!0===(null===(R=this.constraints)||void 0===R?void 0:R.video)&&mc()&&(null===(St=this.instance)||void 0===St||St.initVideoDecode(this.mediaWorkersPath,ze.videoSocketAddress,re,bd,O,V,ft,null===(Zt=null===(ut=JsMediaSDK_Instance.util)||void 0===ut?void 0:ut.isGraphicShouldUseHardwareAccelerationDecode())||void 0===Zt||Zt,ve),ne&&ee||null===(Ze=this.instance)||void 0===Ze||Ze.initVideoEncode(this.mediaWorkersPath,ze.videoSocketAddress,re,bd,O,V,ft,!1,ve,!0,!0)),!0===(null===(N=this.constraints)||void 0===N?void 0:N.screen)&&(mc()?(null===(_e=this.instance)||void 0===_e||_e.initSharingDecode(this.mediaWorkersPath,ze.sharingSocketAddress,re,bd,O,V,ft),ne&&ee||null===(He=this.instance)||void 0===He||He.initSharingEncode(this.mediaWorkersPath,ze.sharingSocketAddress,re,bd,O,V,ft)):null===(ct=this.instance)||void 0===ct||ct.initSharingDecode(ze.sharingSocketAddress))}destroy(){var u;null===(u=this.instance)||void 0===u||u.destroy(),this.instance=null,this.callbackList=[],[Yc.AudioDecode,Yc.AudioEncode,Yc.VideoDecode,Yc.VideoEncode].forEach(h=>{var v;null===(v=this.instance)||void 0===v||v.updateQosSubscription(!1,h)})}disconnect(){var u,h;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(17,{}),null===(h=this.instance)||void 0===h||h.JsMediaSDK_UnInit()}muteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(u,h,v,E,I,R,N){var L;const V=N?{...N,enableHID:!0}:{enableHID:!1};return null===(L=this.instance)||void 0===L?void 0:L.Notify_MeidaSDK(22,{CaptureAudio:E,CaptureAudioInfo:{ssrc:u,AudioSelectValue:"default"===h?null:h,...V},speakerInfo:{defaultDeviceId:v},denoiseSwitch:!!R,...I?{useAudioBridge:!0,audioBridge:I}:{}})}leaveComputerAudio(){var u;return null===(u=this.instance)||void 0===u?void 0:u.Notify_MeidaSDK(21,null)}joinSharingAudio(u){var h;let{ssrc:v,microphoneDeviceId:E,speakerDeviceId:I,isCaptureAudio:R}=u;return null===(h=this.instance)||void 0===h?void 0:h.Notify_MeidaSDK(72,{CaptureAudio:R,CaptureAudioInfo:{ssrc:v,AudioSelectValue:"default"===E?null:E},speakerInfo:{defaultDeviceId:I},checkAutoplay:!1})}leaveSharingAudio(u){var h;return null===(h=this.instance)||void 0===h?void 0:h.Notify_MeidaSDK(73,{isPause:u?1:0})}changeSpeaker(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:u})}changeMicrophone(u,h,v){var E;null===(E=this.instance)||void 0===E||E.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:"default"===u?null:u,microphoneLabel:h??"default",defaultMuted:v})}restoreWebRTC(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:"default"===u?null:u})}renderVideo(u,h,v,E,I,R,N,L,V,O,X){var ee;null===(ee=this.instance)||void 0===ee||ee.Notify_MeidaSDK(1,{userId:h,width:E,height:I,x:R,y:N,quality:L,isMyself:V,canvas:u,enableWaterMark:X,waterMarkText:O,zone:v})}stopRenderVideo(u,h,v,E){var I;null===(I=this.instance)||void 0===I||I.Notify_MeidaSDK(2,{canvas:u,userId:h,RGBA:E,doNotClean:arguments.length>4&&void 0!==arguments[4]&&arguments[4],zone:v})}startCaptureVideo(u,h,v,E,I,R){var N;let L=arguments.length>6&&void 0!==arguments[6]&&arguments[6],V=arguments.length>8?arguments[8]:void 0;const O=arguments.length>7&&arguments[7]?s.getPTZCapability():void 0;null===(N=this.instance)||void 0===N||N.Notify_MeidaSDK(3,{ssid:u,width:v,height:E,fps:V,video:I,usingFacingMode:R,VideoSelectValue:"default"===h?null:h,disableOriginalRatio:L,...O})}stopCaptureVideo(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(u,h){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(12,{VideoSelectValue:"default"===u?null:u,...h||{}})}switchCanvasForVideoCapture(u){var h;let v=u;Array.isArray(u)||(v=[u]),null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(25,v)}renderSharing(u,h){var v;let E=arguments.length>2&&void 0!==arguments[2]&&arguments[2],I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",R=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.receivedSharingCanvas=h,null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(23,{width:0,height:0,ssrc:u,canvas:h,enableWaterMark:E,waterMarkText:I,isFromMainSession:R})}stopRenderSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(24,{})}switchSharingSource(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(36,{ssrc:u,isFromMainSession:Number(arguments.length>1&&void 0!==arguments[1]&&arguments[1])})}ajustmentReceivedSharingCanvas(u,h){if(this.receivedSharingCanvas)try{this.receivedSharingCanvas.width=u,this.receivedSharingCanvas.height=h}catch{}}startRemoteControl(u,h,v){var E;null===(E=this.instance)||void 0===E||E.Notify_MeidaSDK(26,{socketURL:`wss://${this.svcUrl}`,meetingID:this.meetingNumber,condID:this.confId,os:h,dom:u,...v})}stopRemoteControl(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(41)}updateRemoteControlProperties(u){var h;const{dimension:v,...E}=u;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(27,{...v,...E})}startDesktopSharing(u,h,v,E){var I;let R=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],N=arguments.length>5?arguments[5]:void 0,L=arguments.length>6?arguments[6]:void 0;this.sharingCanvas=document.querySelector(`#${h}`);let V={};E&&(V={share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:"default"===E.cameraId?null:E.cameraId,width:E.width,height:E.height}}),void 0!==N&&(V={...V,videoParams:{displaySurface:N}}),null===(I=this.instance)||void 0===I||I.Notify_MeidaSDK(30,{ssid:u,canvas:h,video:v,...V,showShareAudioOption:R,sourceId:L})}stopDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(32,{})}resumeDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(57,{lang:u})}changeSharingSecondCamera(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(49,{VideoSelectValue:u})}ajustmentSharingCanvas(u,h){if(this.sharingCanvas)try{this.sharingCanvas.width=u,this.sharingCanvas.height=h}catch{}}checkChromeSharingExtension(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(34,{})}enableAudioEncode(){var u,h;null===(u=this.instance)||void 0===u||u.initAudioEncode(this.mediaWorkersPath,this.mediaSocketAddress.audioSocketAddress,this.currentUserId,bd,this.confId,this.meetingNumber,ov(null===(h=this.mediaOptions)||void 0===h?void 0:h.enableMultiDecodeVideoWithoutSAB))}sendUserNodeList(u,h){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(43,{userList:u,encryptKey:h})}updateRenderedSharingDimension(u,h){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(44,{width:u,height:h})}pauseOrResumeAudio(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(45,{bPause:u})}updateRenderedVideoCanvasDimension(u,h,v){var E;null===(E=this.instance)||void 0===E||E.Notify_MeidaSDK(46,{canvas:u,width:h,height:v})}clearVideoCanvas(u,h){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(47,{id:u,RGBA:h})}adjustRenderedVideoPosition(u,h,v,E,I,R,N,L){var V;null===(V=this.instance)||void 0===V||V.Notify_MeidaSDK(48,{userId:h,x:E,y:I,width:R,height:N,canvas:u,zone:v,RGBA:L})}mirrorVideo(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(75,{isMirrorMyVideo:u})}updateUserMediaSN(u){var h,v,E;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(80,{isFromMainSession:Number(u.isFromMainSession),mediaActionType:u.iVType,body:{add:null!==(v=u.added)&&void 0!==v?v:[],remove:null!==(E=u.removed)&&void 0!==E?E:[]}})}updateMediaParams(u){var h;const{iVType:v,isFromMainSession:E,updateParams:I}=u;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(81,{mediaActionType:v,isFromMainSession:Number(E),updateParams:I})}createMainSessionChannel(u,h){var v,E;"sharing"===u?null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(84,h):null===(E=this.instance)||void 0===E||E.Notify_MeidaSDK(85,h)}addReceivedSharingChannelType(u){var h;const{isFromMainSession:v,...E}=u;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(82,{isFromMainSession:Number(v),...E})}removeReceivedSharingChannelType(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(83,{isFromMainSession:Number(u.isFromMainSession),ssrc:u.ssrc})}enableHardwareAccelerationForVideoDecode(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(70,{enable:u})}enableHardwareAccelerationForVideoEncode(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(71,{enable:u})}setSharingAudioVolume(u,h,v){var E;null===(E=this.instance)||void 0===E||E.Notify_MeidaSDK(74,{userid:u>>10,shareVolume:h?0:100,isFromMainSession:v})}subscribeToQos(u,h){u.forEach(v=>{var E;null===(E=this.instance)||void 0===E||E.updateQosSubscription(!0,v,h)})}unsubscribeFromQos(u){u.forEach(h=>{var v;null===(v=this.instance)||void 0===v||v.updateQosSubscription(!1,h)})}passThroughRWGMessage(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(40,u)}startVirtualBackgroundSetting(u,h,v,E,I,R){var N;null===(N=this.instance)||void 0===N||N.Notify_MeidaSDK(91,{canvas:u,bgdom:h,width:I,height:R,ssid:v,VideoSelectValue:"default"===E?null:E,disableOriginalRatio:arguments.length>6&&void 0!==arguments[6]&&arguments[6]})}updateVirtualBackgroundImage(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(92,{bgdom:u})}stopVirtualBackgroundSetting(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(93,{isSwitch:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})}startMaskSetting(u,h,v,E,I,R,N,L,V){var O;null===(O=this.instance)||void 0===O||O.Notify_MeidaSDK(62,{canvas:u,maskdom:v,bgdom:h,dx:0,dy:0,dWidth:R,dHeight:N,width:L,height:V,ssid:E,VideoSelectValue:"default"===I?null:I})}updateMaskBackgroundImage(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(63,{bgdom:u})}updateMaskClip(u,h,v){var E;null===(E=this.instance)||void 0===E||E.Notify_MeidaSDK(64,{maskdom:u,dx:0,dy:0,dWidth:h,dHeight:v})}stopMaskSetting(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(65,{isSwitch:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})}enableVideoObserver(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(99,{enable:u})}enableShareAudioToBreakoutRoom(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(86,{enable:u})}sendUserAudioStatus(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(51,u)}muteOrUnmuteOtherAudio(u,h){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(50,{userId:u,volume:h?0:100})}adjustOtherAudioVolume(u,h){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(50,{userId:u,volume:h})}notifySDKMeetingReady(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(113)}movePTZCamera(u){var h;return null===(h=JsMediaSDK_Instance.util)||void 0===h?void 0:h.queryPTZPermisson().then(v=>{var E;return v?(null===(E=this.instance)||void 0===E||E.Notify_MeidaSDK(53,u),Promise.resolve("")):Promise.reject("Cannot move camera without permission granted")})}switchSharingMode(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(101,{mode:u})}updateVideoHDValue(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK("update_videohd_value",{videohd:u})}enableAudioDenoise(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(121,{switch:u})}enableSyncButtonsOnHeadset(u,h,v){var E;null===(E=this.instance)||void 0===E||E.Notify_MeidaSDK(100,{enable:u,microphoneLabel:h,defaultMuted:v})}stopAllIncomingAudio(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(123,u)}preInitAudioBridge(u){var h;null===(h=this.instance)||void 0===h||h.previewInit({audioBridge:{...u}})}prefetchVideoSsrc(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(110,{ssrc:u})}cancelPrefetchVideoSsrc(u){var h;null===(h=this.instance)||void 0===h||h.Notify_MeidaSDK(112,{ssrc:u,haddata:!1})}}return s.agentInstance=void 0,s})();const Xy="ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",Zu="UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",rP="ADD_USER_PARTICIPANT_ATTRIBUTE",Dd="UPDATE_USER_PARTICIPANT_ATTRIBUTE",TT="REMOVE_USER_PARTICIPANT_ATTRIBUTE",Rf="UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",iP="REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE",lv="JOIN_MEETING_SUCCESS",Xa="JOIN_MEETING_FAILED",vc="RECONNECTING_MEETING",Ki="LEAVING_MEETING",Zy="MEETING_IN_WAITING_ROOM",qc="UPDATE_MEETING_ATTRIBUTE",_0="SHARE_PRONOUN_TYPE_UPDATE";var xl=function(s){return s.ConnectionChange="connection-change",s.OnHoldChange="on-hold-change",s.UserAdd="user-added",s.UserUpdate="user-updated",s.UserRemove="user-removed",s.AttendeeUpdate="attendee-updated",s.MeetingAttributeUpdate="meeting-attribute-updated",s.PromoteAttendeeConsent="promote-attendee-consent",s.ActiveAppsUpdate="active-apps-updated",s.SharePronounTypeUpdate="share-pronoun-type-update",s}(xl||{});const el={JoinMeeting:{success:Xy,fail:[Xa]}},Of={[xl.ConnectionChange]:[{event:lv,payload:()=>({state:rg.Connected})},{event:Xa,payload:s=>({state:rg.Fail,...s})},{event:vc,payload:s=>({state:rg.Reconnecting,...s})},{event:Ki,payload:s=>({state:rg.Closed,...s})}],[xl.OnHoldChange]:[{event:Zy,payload:s=>({isOnHold:s})}],[xl.UserAdd]:[{event:Xy,payload:s=>[s]},{event:rP,payload:s=>s}],[xl.UserUpdate]:[{event:Zu,payload:s=>[s]},{event:Dd,payload:s=>s}],[xl.UserRemove]:[{event:TT,payload:s=>s}],[xl.AttendeeUpdate]:[{event:Rf,payload:s=>s},{event:iP,payload:s=>s}],[xl.MeetingAttributeUpdate]:[{event:qc,payload:s=>"bNoHostTimeOut"in s?{isHostLost:s.bNoHostTimeOut}:null}],[xl.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:s=>{let{req_id:l,sender_id:u}=s;return{reqId:l,senderId:u}}}],[xl.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[xl.SharePronounTypeUpdate]:[{event:_0,payload:s=>s}]},dv="LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",tl="LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",Df="LIVE_TRANSCRIPTION_STATUS_CHANGE",Sh="LIVE_TRANSCRIPTION_HOST_DISABLE_CHANGE",DL={"caption-message":[{event:dv,payload:s=>s}],"caption-status":[{event:tl,payload:s=>s}],"caption-enable":[{event:Df,payload:s=>s}],"caption-host-disable":[{event:Sh,payload:s=>s}]},eE="CHAT_RECEIVE_MESSAGE_EVENTS",tE="CHAT_PRIVILEGE_CHANGE",oP="CHAT_MESSAGE_RESPONSE",nE="CHAT_DELETE_MESSAGE_REPONSE";let Jc=function(s){return s.ChatOnMessage="chat-on-message",s.ChatPrivilegeChange="chat-privilege-change",s.ChatDeleteMessage="chat-delete-message",s}({});const v0={[Jc.ChatOnMessage]:[{event:eE,payload:s=>s}],[Jc.ChatPrivilegeChange]:[{event:tE,payload:s=>s}],[Jc.ChatDeleteMessage]:[{event:nE,payload:s=>s}]},Ch="COMMAND_RECEIVE_MESSAGE_EVENTS",sP="COMMAND_STATUS_EVENTS";let RT=function(s){return s.CommandChannelStatus="command-channel-status",s.CommandChannelMessage="command-channel-message",s}({});const aP={[RT.CommandChannelStatus]:[{event:sP,payload:s=>s}],[RT.CommandChannelMessage]:[{event:Ch,payload:s=>s}]};let nl=function(s){return s.Recording="Recording",s.Paused="Paused",s.Stopped="Stopped",s.Ask="Ask",s.Accept="Accept",s.Decline="Decline",s}({}),ea=function(s){return s[s.None=0]="None",s[s.Init=1]="Init",s[s.Start=2]="Start",s[s.Pause=3]="Pause",s[s.Stop=4]="Stop",s}({});const pg="CLOUD_RECORDING_STATUS_CHANGE",A0="CLOUD_RECORDING_ISO_STATUS_CHANGE",cP="LOCAL_RECORDING_CHANGE",hg="RECORDING_FOR_IQ_STATUS_CHANGE",pv="RECORDING_FOR_IQ_OPERATION_CHANGE";let hv=function(s){return s.RecordingChange="recording-change",s.IndividualRecordingChange="individual-recording-change",s.LocalRecordingChange="local-recording-change",s.RecordingIqChange="recording-iq-change",s}({});const Ac={[hv.RecordingChange]:[{event:pg,payload:s=>{const{cmrServerStatus:l}=s;return l===ea.Start?nl.Recording:l===ea.Pause?nl.Paused:nl.Stopped}}],[hv.IndividualRecordingChange]:[{event:A0,payload:s=>s}],[hv.LocalRecordingChange]:[{event:cP,payload:s=>s}],[hv.RecordingIqChange]:[{event:hg,payload:s=>s}]};let Vn=function(s){return s[s.InitSuccess=1]="InitSuccess",s[s.InitSuccessVideo=1.1]="InitSuccessVideo",s[s.InitSuccessAudio=1.2]="InitSuccessAudio",s[s.InitSuccessSharing=1.3]="InitSuccessSharing",s[s.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",s[s.CurrentVideoResolution=3]="CurrentVideoResolution",s[s.JpegDecThreadOk=4]="JpegDecThreadOk",s[s.JpegData=5]="JpegData",s[s.SharingPara=6]="SharingPara",s[s.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",s[s.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",s[s.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",s[s.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",s[s.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",s[s.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",s[s.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",s[s.MonitorLog=14]="MonitorLog",s[s.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",s[s.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",s[s.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",s[s.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",s[s.DataChannelOffer=19]="DataChannelOffer",s[s.AesGcmIvResponse=21]="AesGcmIvResponse",s[s.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",s[s.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",s[s.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",s[s.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",s[s.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",s[s.HidStatusMute=28]="HidStatusMute",s[s.StartVideoStreamInMaskSettingSuccess=66]="StartVideoStreamInMaskSettingSuccess",s[s.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",s[s.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",s[s.VbModelPreloading_3S=96]="VbModelPreloading_3S",s[s.VbModelPreloading_10S=97]="VbModelPreloading_10S",s[s.VbModelPreloadingOk=98]="VbModelPreloadingOk",s[s.NewActiveSpeakerFirstFrameCallback=111]="NewActiveSpeakerFirstFrameCallback",s[s.InitFailed=-1]="InitFailed",s[s.InitFailedVideo=-1.1]="InitFailedVideo",s[s.InitFailedAudio=-1.2]="InitFailedAudio",s[s.InitFailedSharing=-1.3]="InitFailedSharing",s[s.UserForbiddedCaptureAudio=-2]="UserForbiddedCaptureAudio",s[s.AudioWebsocketBroken=-3]="AudioWebsocketBroken",s[s.VideoWebsocketBroken=-4]="VideoWebsocketBroken",s[s.SharingDecThreadFailed=-5]="SharingDecThreadFailed",s[s.AudioZeroData=-6]="AudioZeroData",s[s.AudioCtxSamplerate=-7]="AudioCtxSamplerate",s[s.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",s[s.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",s[s.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",s[s.StartRemoteControlFailed=-11]="StartRemoteControlFailed",s[s.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",s[s.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",s[s.UserStopDesktopSharing=-15]="UserStopDesktopSharing",s[s.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",s[s.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",s[s.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",s[s.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",s[s.DesktopSharingError=-20]="DesktopSharingError",s[s.AudioSpeakerSetError=-21]="AudioSpeakerSetError",s[s.DesktopSharingSystemError=-22]="DesktopSharingSystemError",s[s.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",s.AudioQosData="AUDIO_QOS_DATA",s.VideoQosData="VIDEO_QOS_DATA",s.ShareQosData="VIDEOSHARE_QOS_DATA",s.NetworkQualityChange="NETWORK_QUALITY_CHANGE",s[s.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",s[s.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",s[s.MaskSettingParaError=-33]="MaskSettingParaError",s[s.VbSettingParaError=-34]="VbSettingParaError",s[s.NotifyUIFailover=-35]="NotifyUIFailover",s}({}),Co=function(s){return s[s.EncodeSuccess=1]="EncodeSuccess",s[s.DecodeSuccess=2]="DecodeSuccess",s[s.EncodeFailed=-1]="EncodeFailed",s[s.DecodeFailed=-2]="DecodeFailed",s}({}),OT=function(s){return s.Spotlight="Spotlight",s.Unmute="Unmute",s.AllowToTalk="Allow to talk",s}({}),Ll=function(s){return s.Active="active",s.PassiveByMuteOne="passive(mute one)",s.PassiveByMuteAll="passive(mute all)",s.SharingAudio="sharing audio",s}({}),ha=function(s){return s.Join="join",s.Leave="leave",s.Muted="muted",s.Unmuted="unmuted",s}({}),Ta=function(s){return s[s.Calling=1]="Calling",s[s.Ringing=2]="Ringing",s[s.Accepted=3]="Accepted",s[s.Busy=4]="Busy",s[s.NotAvailable=5]="NotAvailable",s[s.HangUp=6]="HangUp",s[s.Fail=7]="Fail",s[s.Success=8]="Success",s[s.Timeout=9]="Timeout",s[s.Canceling=10]="Canceling",s[s.Canceled=11]="Canceled",s[s.CancelFailed=12]="CancelFailed",s}({});const DT=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),kT=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),PT=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let Ss=function(s){return s[s.HostGrab=0]="HostGrab",s[s.OnlyHost=1]="OnlyHost",s[s.AnyoneGrab=2]="AnyoneGrab",s[s.MultipleShare=3]="MultipleShare",s}({}),Zi=function(s){return s.Sharing="sharing",s.Paused="paused",s.End="ended",s}({}),rl=function(s){return s[s.Video_90P=0]="Video_90P",s[s.Video_180P=1]="Video_180P",s[s.Video_360P=2]="Video_360P",s[s.Video_720P=3]="Video_720P",s[s.Video_1080P=4]="Video_1080P",s}({}),MT=function(s){return s.Active="Active",s.Inactive="Inactive",s}({}),fv=function(s){return s.Muted="Muted",s.Unmuted="Unmuted",s}({}),rE=function(s){return s.Started="Started",s.Stopped="Stopped",s.Failed="Failed",s}({}),iE=function(s){return s.Approved="Approved",s.Rejected="Rejected",s}({}),y0=function(s){return s.PrivilegeChange="PrivilegeChange",s.StopScreenCapture="StopScreenCapture",s.ShareFromMainSession="ShareFromMainSession",s}({}),uP=function(s){return s[s.ImageNotMatch=2]="ImageNotMatch",s[s.CanvasNotMatch=3]="CanvasNotMatch",s[s.VBModelNotMatch=4]="VBModelNotMatch",s}({});const oE="blur";let bp=function(s){return s.User="user",s.Environment="environment",s.Left="left",s.Right="right",s}({});const kf=1e3,NT="__ZOOM_SDK_SHARING_VIDEO__",sE="__ZOOM_SDK_VIDEO_ZONE__",MV="__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__",fg="__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__",aE="__ZOOM_SDK_MASK_CLIP_@__",mv={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}},Pf={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}};let Ra=function(s){return s[s.Request=11]="Request",s[s.Decline=12]="Decline",s[s.Approve=13]="Approve",s[s.GiveUp=14]="GiveUp",s[s.StartControl=15]="StartControl",s[s.ContinueControl=16]="ContinueControl",s[s.StopControl=17]="StopControl",s[s.SwitchCamera=20]="SwitchCamera",s}({}),mg=function(s){return s[s.Bk=0]="Bk",s[s.Center=1]="Center",s[s.ZoomIn=2]="ZoomIn",s[s.ZoomOut=3]="ZoomOut",s[s.Left=4]="Left",s[s.Right=5]="Right",s[s.Up=6]="Up",s[s.Down=7]="Down",s[s.SwitchCamera=8]="SwitchCamera",s}({}),Ih=function(s){return s[s.Pan=192]="Pan",s[s.Tilt=48]="Tilt",s[s.Zoom=12]="Zoom",s[s.Focus=3]="Focus",s}({}),xT=function(s){return s[s.ZoomIn=2]="ZoomIn",s[s.ZoomOut=3]="ZoomOut",s[s.Left=4]="Left",s[s.Right=5]="Right",s[s.Up=6]="Up",s[s.Down=7]="Down",s[s.SwitchCamera=8]="SwitchCamera",s}({}),NV=function(s){return s[s.None=0]="None",s[s.ApproveAnother=3]="ApproveAnother",s[s.Stop=5]="Stop",s}({}),cE=function(s){return s[s.Null=0]="Null",s[s.Normal=1]="Normal",s[s.VideoMode=2]="VideoMode",s}({}),il=function(s){return s[s.Null=0]="Null",s[s.VirtualBackground=1]="VirtualBackground",s[s.Mask=2]="Mask",s}({}),Qo=function(s){return s.Computer="computer",s.Phone="phone",s}({}),lP=function(s){return s[s.Max=30]="Max",s[s.Min=10]="Min",s[s.Default=24]="Default",s}({});const dP="RECEIVE_VIDEO_ACTIVE_INDICATION",LT="RECEIVE_VIDEO_MUTE_INDICATION",E0="ASK_FOR_START_VIDEO_CONSENT",uE="RECEIVE_VIDEO_DIMENSION_CHANGE",b0="CAPTURED_VIDEO_DIMENSION_CHANGE",S0="CAN_NOT_DETECT_CAMERA",yc="CAN_NOT_FIND_CAMERA",as="VIDEO_USER_FORBIDDEN_CAPTURE",gv="VIDEO_CAMERA_IS_TAKEN",BT="VIDEO_BACKGROUND_FAILED",C0="VIDEO_ESTABLISH_STREAM_ERROR",lE="VIDEO_CAPTURE_START_SUCCESS",wh="VIDEO_CAPTURE_STOP_RESULT",FT="VIDEO_SPOTLIGHT_CHANGE",No="VIDEO_FOLLOW_HOST_ORDER_CHANGE",$c="VIDEO_HOST_DRAG_LAYOUT_CHANGE",dE="VIDEO_NEW_USER_START",Or="VIDEO_OLD_USER_STOP",Za="VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",_v="VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",pE="VIDEO_STATISTIC_DATA",vv="VIDEO_CELL_DETAILED_DATA",ta="VIDEO_NETWORK_QUALITY_CHANGE",cs="VIDEO_FAR_END_CAMERA_CONTROL_REQUEST",Mf="VIDEO_FAR_END_CAMERA_CONTROL_RESPONSE",Ec="VIDEO_FAR_END_CAMERA_IN_CONTROL_CHANGE",pP="VIDEO_FAR_END_CAMERA_CAPABILITY_CHANGE",gg="VIDEO_MASK_SETTING_SUCCESS",Xc="VIDEO_CAPTURE_SDK_SUCCESS",Av="VIDEO_PREFETCH_VIDEO_FRAME_CALLBACK",UT={startCaptureVideo:{success:lE,fail:[S0,yc,as,C0,gv,BT]},switchCameraVideo:{success:Xc,fail:[S0,yc,as,gv]},stopCaptureVideo:{success:wh}};let fa=function(s){return s.VideoActiveChange="video-active-change",s.PeerVideoStateChange="peer-video-state-change",s.VideoSpotlightChange="video-spotlight-change",s.VideoMutedChange="video-muted-change",s.VideoCapturingChange="video-capturing-change",s.AskForStartVideoConsent="ask-for-start-video-consent",s.VideoDimensionChange="video-dimension-change",s.VideoFollowHostOrder="video-follow-host-order-change",s.VideoHostLayoutChange="video-host-layout-change",s.VideoVBPreloadChange="video-virtual-background-preload-change",s.VideoStatisticDataChange="video-statistic-data-change",s.VideoDetailedDataChange="video-detailed-data-change",s.NetworkQualityChange="network-quality-change",s.FarEndCameraRequestControl="far-end-camera-request-control",s.FarEndCameraResponseControl="far-end-camera-response-control",s.FarEndCameraInControlChange="far-end-camera-in-control-change",s.FarEndCameraCapabilityChange="far-end-camera-capability-change",s}({});const kL={[fa.VideoActiveChange]:[{event:dP,payload:s=>({state:s.bVideoOn?MT.Active:MT.Inactive,userId:s.userId})}],[fa.VideoCapturingChange]:[{event:lE,payload:()=>({state:rE.Started})},{event:wh,payload:s=>({state:null!=s&&s.failed?rE.Failed:rE.Stopped})}],[fa.VideoMutedChange]:[{event:LT,payload:s=>({state:s.isVideoMuted?fv.Muted:fv.Unmuted,userId:s.id})}],[fa.AskForStartVideoConsent]:[{event:E0,payload:s=>({state:s.isVideoMuted?fv.Muted:fv.Unmuted,userId:s.id})}],[fa.VideoSpotlightChange]:[{event:FT,payload:s=>({spotlightList:s.spotlightList&&s.spotlightList.map(l=>({userId:l}))})}],[fa.VideoDimensionChange]:[{event:uE,payload:s=>({type:"received",width:s.width,height:s.height})},{event:b0,payload:s=>({type:"captured",width:s.width,height:s.height})}],[fa.VideoFollowHostOrder]:[{event:No,payload:s=>({isFollowHostOrder:s.bOn})}],[fa.VideoHostLayoutChange]:[{event:$c,payload:s=>Array.isArray(s.layout)?s.layout.map(l=>({userId:l})):[]}],[fa.PeerVideoStateChange]:[{event:dE,payload:s=>({action:"Start",...s})},{event:Or,payload:s=>({action:"Stop",...s})}],[fa.VideoVBPreloadChange]:[{event:Za,payload:s=>({isReady:s})}],[fa.VideoStatisticDataChange]:[{event:pE,payload:s=>s}],[fa.VideoDetailedDataChange]:[{event:vv,payload:s=>s}],[fa.NetworkQualityChange]:[{event:ta,payload:s=>s}],[fa.FarEndCameraRequestControl]:[{event:cs,payload:s=>s}],[fa.FarEndCameraResponseControl]:[{event:Mf,payload:s=>s}],[fa.FarEndCameraInControlChange]:[{event:Ec,payload:s=>s}],[fa.FarEndCameraCapabilityChange]:[{event:pP,payload:s=>s}]},Th="AUDIO_ACTIVE_SPEAKER",Rh="AUDIO_UNMUTE_CONSENT",Zc="AUDIO_CURRENT_USER_JOIN_BY_VOIP",I0="AUDIO_CURRENT_USER_JOIN_BY_PHONE",yv="AUDIO_CURRENT_USER_LEAVE_AUDIO",w0="AUDIO_CURRENT_USER_MUTED",kd="AUDIO_CURRENT_USER_UNMUTED",hP="AUDIO_PARTICIPANT_AUDIO_UPDATE",fP="AUDIO_DIALOUT_RESULT_CODE",T0="AUDIO_DIALOUT_RESULT_SUCCESS",Ev="DIALOUT_FAIL",VT="AUDIO_DIALOUT_CANCEL_SUCCESS",R0="DIALOUT_CANCEL_FAIL",_g="AUDIO_MERGE_AUDIO_INDICATION",vg="USER_FORBIDDEN_MICROPHONE",jT="ESTABLISH_AUDIO_STREAM_ERROR",mP="AUDIO_AUTO_PLAY_FAILED",Pd="INVALID_DEVICE_ID",gP="AUDIO_ALLOW_TALK_CHANGE",Oa="SHARE_AUDIO_STATE_CHANGE",Md="AUDIO_STATISTIC_DATA";let Nd=function(s){return s.ActiveSpeaker="active-speaker",s.UnmuteAudioConsent="unmute-audio-consent",s.CurrentAudioChange="current-audio-change",s.DialoutStateChange="dialout-state-change",s.MergeAudio="merged-audio",s.AutoPlayFailed="auto-play-audio-failed",s.AllowTalkChange="allow-talk-change",s.ShareAudioChange="share-audio-change",s.AudioStatisticDataChange="audio-statistic-data-change",s}({});const Ag={JoinComputerAudio:{success:Zc,fail:[vg,jT]},LeaveComputerAudio:{success:yv},JoinAudioByCallMe:{success:T0,fail:[Ev]},cancelDialOut:{success:VT,fail:[R0]},hangup:{success:yv}},PL={[Nd.ActiveSpeaker]:[{event:Th,payload:s=>s}],[Nd.UnmuteAudioConsent]:[{event:Rh,payload:s=>({reason:s})}],[Nd.CurrentAudioChange]:[{event:I0,payload:()=>({action:ha.Join,type:Qo.Phone})},{event:Zc,payload:()=>({action:ha.Join,type:Qo.Computer})},{event:yv,payload:()=>({action:ha.Leave})},{event:w0,payload:s=>{let{source:l}=s;return{action:ha.Muted,source:l}}},{event:kd,payload:s=>{let{source:l}=s;return{action:ha.Unmuted,source:l}}}],[Nd.DialoutStateChange]:[{event:fP,payload:s=>s}],[Nd.MergeAudio]:[{event:_g,payload:s=>s}],[Nd.AutoPlayFailed]:[{event:mP,payload:()=>{}}],[Nd.AllowTalkChange]:[{event:gP,payload:s=>({enabled:s})}],[Nd.ShareAudioChange]:[{event:Oa,payload:s=>s}],[Nd.AudioStatisticDataChange]:[{event:Md,payload:s=>s}]},hE="SHARE_ACTIVE_INDICATION",eu="SHARE_CHECK_CHROME_SHARING_EXTENSION",Oh="SHARE_START_DESKTOP_SHARE_FAILED",fE="SHARE_DIMENSION_CHANGE",bv="SHARE_RECEIVED_DIMENSION_CHANGE",QT="SHARE_VIDEO_STREAMS_END",O0="SHARE_PASSIVE_STOP_SHARE",D0="SHARE_PASSIVE_BO_STOP",Sp="SHARE_NEW_USER_ADD",Dh="SHARE_USER_REMOVE",k0="SHARE_USER_PAUSED",_P="SHARE_USER_RESUMED",P0="SHARE_AUTO_CHANGE_SOURCE",Sv="SHARE_PRIVILEGE_CHANGE",vP="SHARE_READ_RECEIPT",M0="SHARE_STATISTIC_DATA";let Bl=function(s){return s.ShareActiveChange="active-share-change",s.ShareDimensionChange="share-content-dimension-change",s.SharePassiveStop="passively-stop-share",s.SharePeerStateChange="peer-share-state-change",s.ShareContentChange="share-content-change",s.SharePrivilegeChange="share-privilege-change",s.ShareReadReceipt="share-can-see-screen",s.RemoteControlApprovedChange="remote-control-approved-change",s.RemoteControlInControlChange="remote-control-in-control-change",s.RemoteControlClipboardChange="remote-control-clipboard-change",s.ShareStatisticDataChange="share-statistic-data-change",s}({});const AP={[Bl.ShareActiveChange]:[{event:hE,payload:s=>{const{isActive:l,activeUserId:u,...h}=s;return{state:l?"Active":"Inactive",userId:u,...h}}}],[Bl.ShareDimensionChange]:[{event:fE,payload:s=>({type:"sended",width:s.width,height:s.height})},{event:bv,payload:s=>({type:"received",width:s.width,height:s.height})}],[Bl.SharePassiveStop]:[{event:QT,payload:()=>({reason:y0.StopScreenCapture})},{event:O0,payload:()=>({reason:y0.PrivilegeChange})},{event:D0,payload:()=>({reason:y0.ShareFromMainSession})}],[Bl.SharePeerStateChange]:[{event:Sp,payload:s=>({userId:s.id,action:"Start"})},{event:Dh,payload:s=>({userId:s.id,action:"Stop"})},{event:k0,payload:s=>({userId:s.id,action:"Pause"})},{event:_P,payload:s=>({userId:s.id,action:"Resume"})}],[Bl.ShareContentChange]:[{event:P0,payload:s=>s}],[Bl.RemoteControlApprovedChange]:[{event:"SHARE_REMOTE_CONTROL_APPROVE",payload:s=>({state:s?iE.Approved:iE.Rejected})}],[Bl.RemoteControlInControlChange]:[{event:"SHARE_GRAB_REMOTE_CONTROL_CHANGE",payload:s=>({isControlling:s})}],[Bl.RemoteControlClipboardChange]:[{event:"SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",payload:s=>s}],[Bl.SharePrivilegeChange]:[{event:Sv,payload:s=>({privilege:s})}],[Bl.ShareReadReceipt]:[{event:vP,payload:()=>{}}],[Bl.ShareStatisticDataChange]:[{event:M0,payload:s=>s}]};let xd=function(s){return s.Question="question",s.UpdateQuestion="updateQuestion",s.Answer="answer",s.DeleteComment="deleteComment",s.DeleteQuestion="deleteQuestion",s.Dismiss="dismiss",s.Reopen="reopen",s.Upvote="upvote",s.AnswerLive="answerLive",s}({}),mE=function(s){return s.QaSettingChange="qa-setting-change",s.QaActionChange="qa-action-change",s}({});const N0={[mE.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:s=>s}],[mE.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:s=>({action:xd.Question,data:s})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:s=>({action:xd.UpdateQuestion,data:s})},{event:"QA_ANSWER_QUESTION",payload:s=>({action:xd.Answer,data:s})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:s=>({action:xd.DeleteComment,data:s})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:s=>({action:xd.DeleteQuestion,data:s})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:s=>({action:xd.Dismiss,data:s})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:s=>({action:xd.Reopen,data:s})},{event:"QA_ANSWER_VOTE_QUESTION",payload:s=>({action:xd.Upvote,data:s})},{event:"QA_ANSWER_QUESTION_LIVE",payload:s=>({action:xd.AnswerLive,data:s})}]},fn="INVALID_OPERATION",Cp="INTERNAL_ERROR",gE="OPERATION_TIMEOUT",na="INSUFFICIENT_PRIVILEGES",bc="IMPROPER_MEETING_STATE",Dr="INVALID_PARAMETERS",x0="AUDIO_ENCODE_SUCCESS",_E="AUDIO_DECODE_SUCCESS",L0="VIDEO_ENCODE_SUCCESS",B0="VIDEO_DECODE_SUCCESS",yP="SHARING_ENCODE_SUCCESS",yg="SHARING_DECODE_SUCCESS",F0="AUDIO_ENCODE_FAIL",vE="AUDIO_DECODE_FAIL",U0="VIDEO_ENCODE_FAIL",kh="VIDEO_DECODE_FAIL",V0="SHARING_ENCODE_FAIL",HT="SHARING_DECODE_FAIL",ML="MEDIA_DEVICE_CHANGE";let EP=function(s){return s.DeviceChange="device-change",s.MediaSDKChange="media-sdk-change",s}({});const Fl={[EP.DeviceChange]:[{event:ML,payload:()=>({})}],[EP.MediaSDKChange]:[{event:x0,payload:()=>({type:"audio",action:"encode",result:"success"})},{event:F0,payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:_E,payload:()=>({type:"audio",action:"decode",result:"success"})},{event:vE,payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:L0,payload:()=>({type:"video",action:"encode",result:"success"})},{event:U0,payload:()=>({type:"video",action:"encode",result:"fail"})},{event:B0,payload:()=>({type:"video",action:"decode",result:"success"})},{event:kh,payload:()=>({type:"video",action:"decode",result:"fail"})},{event:yP,payload:()=>({type:"share",action:"encode",result:"success"})},{event:V0,payload:()=>({type:"share",action:"encode",result:"fail"})},{event:yg,payload:()=>({type:"share",action:"decode",result:"success"})},{event:HT,payload:()=>({type:"share",action:"decode",result:"fail"})}]},bP="BREAKOUT_ROOM_ADD_TOKEN",AE="BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",Os="BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",yE="BREAKOUT_ROOM_ROOM_COUTDOWN",GT="BREAKOUT_ROOM_BROADCAST_MESSAGE",WT="BREAKOUT_ROOM_ASK_HELP_REQUEST",j0="BREAKOUT_ROOM_ASK_HELP_RESPONSE",yu="BREAKOUT_ROOM_ATTRIBUTE_INDICATION",SP="BREAKOUT_ROOM_JOIN_BO_RESPONSE",CP="BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",Q0="BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",IP="BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",KT="BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE";let Ds=function(s){return s.InviteToJoin="invite-to-join",s.RoomCountdown="room-countdown",s.RoomTimeUp="room-time-up",s.ClosingRoomCountdown="closing-room-countdown",s.BroadcastMessage="broadcast-message",s.AskForHelp="ask-for-help",s.AskForHelpResponse="ask-for-help-response",s.RoomStateChange="room-state-change",s.MainSessionUserUpdate="main-session-user-updated",s}({});const Eu={[Ds.InviteToJoin]:[{event:AE,payload:s=>s}],[Ds.RoomCountdown]:[{event:yE,payload:s=>s}],[Ds.RoomTimeUp]:[{event:CP,payload:s=>s}],[Ds.ClosingRoomCountdown]:[{event:Os,payload:s=>s}],[Ds.BroadcastMessage]:[{event:GT,payload:s=>s}],[Ds.AskForHelp]:[{event:WT,payload:s=>s}],[Ds.AskForHelpResponse]:[{event:j0,payload:s=>s}],[Ds.RoomStateChange]:[{event:yu,payload:s=>({status:s.controlStatus})}],[Ds.MainSessionUserUpdate]:[{event:KT,payload:()=>({})}]};var Ph=function(s){return s.StatusUpdate="archiving-status-update",s.OptionsUpdate="archiving-options-update",s}(Ph||{});const wP={[Ph.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:s=>s}],[Ph.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:s=>s}]};let zT=function(s){return s.PollDataChange="poll-data-change",s.PollSizeUpdate="poll-size-update",s.PollStatusUpdate="poll-status-update",s}({});const ks={[zT.PollDataChange]:[{event:"POLL_DATA_CHANGE",payload:s=>s}],[zT.PollSizeUpdate]:[{event:"POLL_SIZE_UPDATE",payload:s=>s}],[zT.PollStatusUpdate]:[{event:"POLL_STATUS_UPDATE",payload:s=>s}]};let TP=function(s){return s.ReactionReceived="reaction-received",s.ReactionRemoved="reaction-removed",s}({});const YT={...Of,...DL,...v0,...aP,...Ac,...PL,...kL,...N0,...AP,...Fl,...Eu,...wP,"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:s=>s}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:s=>s}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:s=>s}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:s=>s},{event:"CC_STATUS_CHANGE",payload:s=>s}],...ks,[TP.ReactionReceived]:[{event:"REACTION_RECEIVED",payload:s=>s}],[TP.ReactionRemoved]:[{event:"REACTION_REMOVED",payload:s=>s}],[function(s){return s.SummaryChange="summary-status-change",s}({}).SummaryChange]:[{event:"SMART_SUMMARY_STATUS_CHANGE",payload:s=>s}]},Ld=function(s){return{all:s=s||new Map,on:function(l,u){var h=s.get(l);h?h.push(u):s.set(l,[u])},off:function(l,u){var h=s.get(l);h&&(u?h.splice(h.indexOf(u)>>>0,1):s.set(l,[]))},emit:function(l,u){var h=s.get(l);h&&h.slice().map(function(v){v(u)}),(h=s.get("*"))&&h.slice().map(function(v){v(l,u)})}}}(),Eg=new Map,qT=new Array,dt=function(s){Ld.emit(s,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)},Cv=s=>new Promise((l,u)=>{s.fail&&s.fail.length>0?bi(is(Ld,s.success).pipe(ti(1)),$s(...s.fail.map(h=>is(Ld,h).pipe(ti(1),Pn(v=>Mi({type:h,payload:v})))))).subscribe(h=>l(h),h=>{u("object"==typeof h.payload?{type:h.type,...h.payload}:void 0===h.payload?{type:h.type}:h)}):is(Ld,s.success).pipe(ti(1)).subscribe(h=>l(h))}),Jr=function(s,l){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return new Promise((h,v)=>{let E=Ht;"string"==typeof s?E=is(Ld,s).pipe(ti(1)):(E=is(Ld,s.event),s.operations&&(E=s.operations.reduce((I,R)=>I.pipe(R),E))),bi(E,ua(u).pipe(Pr(Mi("timeout")))).subscribe(I=>{if(l){const R=l(I);"boolean"==typeof R?R?h(""):v({type:Cp}):0===R.ret?h(R.body):v({type:Cp,reason:R.body})}else h(I)},()=>{v({type:gE})})})},vo=(s,l)=>void 0!==l?is(Ld,s).pipe(ti(l)):is(Ld,s),bg=()=>{qT.forEach(s=>{s.unsubscribe()}),qT.length=0,Eg.clear()},{setAttendeesList:Nf,setIsAdmitAllSilentUsers:EE,resetParticipants:NL,addFailoverAttendees:H0,removeFailoverAttendees:xL,setClearRaiseHand:bE,setClearAttendeeFeedback:G0,updateAttendeeDisplayName:LL,removeXmppAttendeeUser:BL,updateXmppAttendeeList:JT,setAttendeeExtraKey:SE}=ws({SET_ATTENDEES_LIST:s=>s,SET_ASSISTANT_LIST:s=>s,UPDATE_XMPP_ATTENDEE_LIST:s=>s,RESET_PARTICIPANTS:()=>({}),SET_IS_ADMIT_ALL_SILENT_USERS:s=>s,REMOVE_FAILOVER_ATTENDEES:s=>s,ADD_FAILOVER_ATTENDEES:s=>s,SET_CLEAR_RAISE_HAND:()=>({}),SET_CLEAR_ATTENDEE_FEEDBACK:()=>({}),UPDATE_ATTENDEE_DISPLAY_NAME:s=>s,REMOVE_XMPP_ATTENDEE_USER:s=>s,SET_ATTENDEE_EXTRA_KEY:s=>s});var W0="NOT_FOUND",FL=function(s,l){return s===l};function OP(s,l){var u,h,ee,v="object"==typeof l?l:{equalityCheck:l},E=v.equalityCheck,R=v.maxSize,N=void 0===R?1:R,L=v.resultEqualityCheck,V=(ee=void 0===E?FL:E,function(re,ne){if(null===re||null===ne||re.length!==ne.length)return!1;for(var fe=re.length,ve=0;ve<fe;ve++)if(!ee(re[ve],ne[ve]))return!1;return!0}),O=1===N?(u=V,{get:function(ee){return h&&u(h.key,ee)?h.value:W0},put:function(ee,re){h={key:ee,value:re}},getEntries:function(){return h?[h]:[]},clear:function(){h=void 0}}):function(ee,re){var ne=[];function fe(ve){var Le=ne.findIndex(function(ze){return re(ve,ze.key)});if(Le>-1){var Qe=ne[Le];return Le>0&&(ne.splice(Le,1),ne.unshift(Qe)),Qe.value}return W0}return{get:fe,put:function(ve,Le){fe(ve)===W0&&(ne.unshift({key:ve,value:Le}),ne.length>ee&&ne.pop())},getEntries:function(){return ne},clear:function(){ne=[]}}}(N,V);function X(){var ee=O.get(arguments);if(ee===W0){if(ee=s.apply(null,arguments),L){var re=O.getEntries().find(function(ne){return L(ne.value,ee)});re&&(ee=re.value)}O.put(arguments,ee)}return ee}return X.clearCache=function(){return O.clear()},X}function K0(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),h=1;h<l;h++)u[h-1]=arguments[h];return function(){for(var v=arguments.length,E=new Array(v),I=0;I<v;I++)E[I]=arguments[I];var R,N=0,L={memoizeOptions:void 0},V=E.pop();if("object"==typeof V&&(L=V,V=E.pop()),"function"!=typeof V)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof V+"]");var O=L.memoizeOptions,X=void 0===O?u:O,ee=Array.isArray(X)?X:[X],re=function(ve){var Le=Array.isArray(ve[0])?ve[0]:ve;if(!Le.every(function(ze){return"function"==typeof ze})){var Qe=Le.map(function(ze){return"function"==typeof ze?"function "+(ze.name||"unnamed")+"()":typeof ze}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+Qe+"]")}return Le}(E),ne=s.apply(void 0,[function(){return N++,V.apply(null,arguments)}].concat(ee)),fe=s(function(){for(var ve=[],Le=re.length,Qe=0;Qe<Le;Qe++)ve.push(re[Qe].apply(null,arguments));return R=ne.apply(null,ve)});return Object.assign(fe,{resultFunc:V,memoizedResultFunc:ne,dependencies:re,lastResult:function(){return R},recomputations:function(){return N},resetRecomputations:function(){return N=0}}),fe}}var us=K0(OP);const CE=s=>{let{participants:{attendeesList:l}}=s;return l},z0=s=>{let{meeting:{userId:l}}=s;return l},Sg=s=>{let{participants:{xmppAttendeeList:l}}=s;return l};let wi=function(s){return s[s.Attendee=0]="Attendee",s[s.Host=1]="Host",s[s.Owner=4]="Owner",s[s.ViewOnly=8]="ViewOnly",s[s.HostOwner=5]="HostOwner",s[s.ViewOnlyCanTalk=24]="ViewOnlyCanTalk",s}({}),UL=function(s){return s[s.Host=10]="Host",s[s.Panelist=20]="Panelist",s[s.Attendee=30]="Attendee",s}({}),$T=function(s){return s[s.Client=9]="Client",s[s.Phone=5]="Phone",s[s.H323=15]="H323",s[s.Assitant=51]="Assitant",s}({});const Y0=s=>(s&wi.Host)===wi.Host,xf=s=>(s&$T.Phone)===$T.Phone,q0=s=>s===wi.ViewOnlyCanTalk,Da=s=>(s&wi.ViewOnly)===wi.ViewOnly;let IE=function(s){return s[s.Automatically=1]="Automatically",s[s.Manually=2]="Manually",s}({}),Vr=function(s){return s[s.NotStarted=1]="NotStarted",s[s.InProgress=2]="InProgress",s[s.Closing=3]="Closing",s[s.Closed=4]="Closed",s}({}),Ul=function(s){return s[s.NoToken=1]="NoToken",s[s.GotToken=2]="GotToken",s[s.Started=3]="Started",s[s.Closing=4]="Closing",s[s.Closed=5]="Closed",s}({}),rr=function(s){return s.Initial="initial",s.Invited="invited",s.Joining="joining",s.InRoom="in room",s.Leaving="leaving",s.TimeUp="time up",s.MainSession="main session",s}({}),Iv=function(s){return s.Join="joinRequest",s.Switch="switchRequest",s.Leave="leaveRequest",s.Broadcast="messageText",s.HelpReq="helpRequest",s.HelpRes="helpResponse",s.CoHostWantJoinThisBo="wantJoinThisBO",s}({}),ol=function(s){return s[s.Received=0]="Received",s[s.Busy=1]="Busy",s[s.Ignore=2]="Ignore",s[s.AlreadyInRoom=3]="AlreadyInRoom",s}({});const Cr=us([z0,CE],(s,l)=>l.find(u=>u.userId===s)),bu=us([Cr],s=>s?.isHost||s?.bCoHost),Su=us([Cr],s=>s?.isHost),wv=us([Sg],s=>s.filter(l=>l.userRole===UL.Attendee)),VL=us([CE],s=>s.filter(l=>l.bHold&&!l.bid)),ls=us([CE,s=>{let{breakoutRoom:l}=s;return l&&l.controlStatus},s=>{let{breakoutRoom:l}=s;return l&&l.currentRoom.status}],(s,l,u)=>s.filter(l!==Vr.InProgress&&l!==Vr.Closing||u!==rr.InRoom?h=>!h.bHold&&!h.bid:h=>!h.bHold)),wE=us([s=>{let{participants:{assistantList:l}}=s;return l}],s=>s),TE=us([ls],s=>s.find(l=>l.isHost)),J0=us([ls],s=>s.filter(l=>l.bCoHost)),$0=us([Cr,ls],(s,l)=>l.filter(u=>u.userId!==s?.userId));us([Sg],s=>s.reduce((l,u)=>{const{jid:h}=u;return Object.assign(l,{[h]:u}),l},{})),us([Sg,s=>{let{meeting:{jid:l}}=s;return l}],(s,l)=>{var u;return null===(u=s.find(h=>h.jid===l))||void 0===u?void 0:u.userId});let so=function(s){return s.Closed="closed",s.Connecting="connecting",s.Connected="connected",s}({}),RE=function(s){return s[s.SupportASL=1]="SupportASL",s[s.SidecarPhase2=2]="SidecarPhase2",s[s.SupportBroadcastVoice=8]="SupportBroadcastVoice",s[s.SendMeetingTokenSeparately=16]="SendMeetingTokenSeparately",s[s.SupportPreview=32]="SupportPreview",s[s.WebCameraIndication=64]="WebCameraIndication",s[s.SupportFarEndCameraControl=256]="SupportFarEndCameraControl",s[s.SupportVideoShare=512]="SupportVideoShare",s[s.UnifyErrorType=1024]="UnifyErrorType",s[s.WhiteBoard=2048]="WhiteBoard",s}({});const{setAsnIds:X0,setIsCanUnmute:XT,setDialoutSequence:ZT,setDialoutResultCode:Lf,setIsAllowToTalk:Mh,setIsHostMuteAll:Bf,setIsActiveOperation:Ip,setAudioSsrc:DP,setIsMutedUponEntry:Z0,setIsUserGrantCaptureAudio:OE,setIsMicrophoneForbidden:Nh,setWebrtcRestartCount:wp,setMicrophoneList:eC,setSpeakerList:Cg,setActiveMicrophone:tC,setActiveSpeaker:nC,setCanPlayAudio:Io,resetAudio:e1,setIsComputerAudioLoading:Ig,setIsAllowToTalkAttendeeConnected:DE,setIsMuteBeforeSharingAudio:Bd,addLocalShareAudioUser:kP,updateLocalShareAudioUser:t1,setIsJoinComputerAudioBeforeSharingAudio:Cu,setIsShareAudioEnabled:kE,setIsShareAudioMuted:n1,setIsSharingAudio:Tv,setAudioDataEncoding:xh,setAudioDataDecoding:rC,addLocallyMutedAudio:Ff,removeLocallyMutedAudio:yi,updateUserAudioVolumeLocally:PP,removeLocalUserAudioVolume:Uf,setCustomizedAudioOption:sl,setIsBackgroundNoiseSuppression:MP,setIsHidEnabled:r1,setAudioMediaPlaybackFile:Vf,setIsStopAllIncomingAudio:o1,setIsVerifiedAudioPermissionOnIosMobile:Fd,setIsAudioBridgeSignalReconnecting:PE}=ws("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_IS_HOST_MUTE_ALL","SET_IS_ACTIVE_OPERATION","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME","SET_CUSTOMIZED_AUDIO_OPTION","SET_IS_BACKGROUND_NOISE_SUPPRESSION","SET_IS_HID_ENABLED","SET_AUDIO_MEDIA_PLAYBACK_FILE","SET_IS_STOP_ALL_INCOMING_AUDIO","SET_IS_VERIFIED_AUDIO_PERMISSION_ON_IOS_MOBILE","SET_IS_AUDIO_BRIDGE_SIGNAL_RECONNECTING"),{setSharePrivilege:s1,setShareActiveNode:Rv,setIsReceiveSharing:Iu,setIsChromeExtensionInstalled:a1,setIsScreenShareForbidden:Lh,setShareDimension:NP,setShareStatus:Tp,setShareSsrc:jf,setShareQuality:c1,setReceivedShareDimension:iC,setIsRemoteControlApproved:Qf,setIsGrabRemoteControl:Ud,setIsSdkGrabControl:u1,setIsReceiveSharingFromMainSession:xP,setIsSharingToBreakoutRoom:ME,setIsSharingWithSecondCamera:l1,setShringSecondCameraId:d1,setIsRequireReadReceipt:jL,setIsOptimizedForSharedVideo:NE,setShareDataEncoding:LP,setShareDataDecoding:Ov,addShareCapturedEnsuredCanvas:BP,addShareRenderedEnsuredCanvas:p1,resetShare:FP}=ws("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_CHROME_EXTENSION_INSTALLED","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_REMOTE_CONTROL_APPROVED","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","SET_IS_OPTIMIZED_FOR_SHARED_VIDEO","SET_SHARE_DATA_ENCODING","SET_SHARE_DATA_DECODING","ADD_SHARE_CAPTURED_ENSURED_CANVAS","ADD_SHARE_RENDERED_ENSURED_CANVAS","RESET_SHARE"),{setVideoSsrc:UP,setActiveVideoId:tu,setCameraList:h1,setActiveCamera:xE,setIsCurrentUserStartedVideo:f1,setSpotlightVideo:m1,setIsCaptureForbidden:oC,setVideoMaxQuality:VP,setIsVideoMuted:sC,setIsCaptureCameraLoading:wg,setIsCameraTaken:LE,resetVideo:g1,setReceivedVideoDimension:jr,addSubscribedVideoId:Bt,removeSubscribedVideoId:_1,setIsFollowHostVideoLayout:v1,setHostDragLayout:aC,addRenderedVideoId:jP,removeRenderedVideoId:A1,setIsSupportHdVideo:y1,setMaximumNumbeOfHdSubscriptions:Hf,setIsCanUnmuteVideo:BE,setIsVbPreloadReady:E1,setIsVbConfiged:b1,setVbImageSrc:FE,setVideoDataEncoding:UE,setVideoDataDecoding:ka,setHardwareAccelerationState:Dv,setVideoCaptureCustomizedOption:cC,setNetworkQuality:VE,setVideoCameraPtzCapabilities:QP,setIsCurrentUserRequestCameraControlled:kv,setIsCurrentUserCameraInControl:jE,addVideoFarEndCameraControlUser:QL,removeVideoFarEndCameraControlUser:uC,setVideoPtzCameraMoving:lC,setVideoPtzCameraValue:dC,setIsControllingFarEndCamera:QE,setNetworkQualityBroadcastTime:Gf,setIsMaskConfiged:Pv,setVideoBackgroundMode:HE,setVideoMask:Tg,setVideoCapturedDimension:HP,addVideoRenderedEnsuredCanvas:GE,setVideoMediaPlaybackFile:WE,setPrefetchedVideoUser:Vl}=ws("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_MAXIMUM_NUMBE_OF_HD_SUBSCRIPTIONS","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION","SET_NETWORK_QUALITY","SET_VIDEO_CAMERA_PTZ_CAPABILITIES","SET_IS_CURRENT_USER_REQUEST_CAMERA_CONTROLLED","SET_IS_CURRENT_USER_CAMERA_IN_CONTROL","ADD_VIDEO_FAR_END_CAMERA_CONTROL_USER","REMOVE_VIDEO_FAR_END_CAMERA_CONTROL_USER","SET_VIDEO_PTZ_CAMERA_MOVING","SET_VIDEO_PTZ_CAMERA_VALUE","SET_IS_CONTROLLING_FAR_END_CAMERA","SET_NETWORK_QUALITY_BROADCAST_TIME","SET_IS_MASK_CONFIGED","SET_VIDEO_BACKGROUND_MODE","SET_VIDEO_MASK","SET_VIDEO_CAPTURED_DIMENSION","ADD_VIDEO_RENDERED_ENSURED_CANVAS","SET_VIDEO_MEDIA_PLAYBACK_FILE","SET_PREFETCHED_VIDEO_USER"),{resetQa:S1}=ws("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:vt,setPanelistChatPrivilege:hC,addChatMessageHistory:KE,resetChat:C1,setIsAllowAttendeeChat:fC,setLatestChatMessageId:I1,removeChatMessage:Bh}=ws("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE"),{setCcEditorInfo:Rg,resetClosedCaption:gC}=ws("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:R1,setBreakoutRoomAllocationPattern:JP,setBreakoutRoomSequenceId:O1,setMeetingElapsedTime:Sc,setStartRoomElapsedTime:Mv,setBreakoutRoomOptions:Nv,setBreakoutRoomControlStatus:$P,setBreakoutRooms:Rp,setCurrentBreakoutRoom:xv,setBreakoutRoomAttendeeStatus:Og,setBreakoutRoomConfId:D1,setBreakoutRoomToken:zE,resetBreakoutRoom:_C,setBreakoutRoomClosingRoomTime:vC,setBreakoutRoomBroadcastMessage:XP,setBreakoutRoomHostReplyType:YE,setBreakoutRoomHostReplyRequestId:ZP,setMainSessionAttendeeList:k1,setIsHugeBreakoutRoom:eM,setBreakoutRoomPreAssignedRoomList:P1,setBreakoutRoomUserRoleUpdated:M1,setBreakoutRoomMeetingOptions:jl}=ws("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS"),{setCloudRecordingStatus:Lv,setCloudRecordingEnable:N1,setCloudIsoRecordingEnable:tM,setAllowStopAutoRecording:AC,setAutomaticCloudRecordingEnable:x1,setIsZoomIQ:L1,setZoomIQChanging:Dg,resetRecording:Bv}=ws("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_CLOUD_ISO_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","SET_IS_ZOOM_I_Q","SET_ZOOM_I_Q_CHANGING","RESET_RECORDING"),{updateCmdJid:B1,removeCmdJid:yC,setCmdChannelConnectionStatus:Fv,resetCmdChannel:Uv}=ws("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),{resetArchiving:VV}=ws({SET_ARCHIVING_STATUS:s=>s,SET_ARCHIVING_SESSION_READY:s=>s,SET_ARCHIVING_OPTIONS:s=>s,RESET_ARCHIVING:()=>{}}),{setIsLiveTranscriptionEnabled:bC,setLiveTranscriptionMeetingOptions:Vv,setIsLiveTranscriptionManualCaptionerEnabled:SC,setLiveTranscriptionGatewayId:jv,setLiveTranscriptionSupportedLanguage:CC,setIsLiveTranscriptionSubscribed:Vd,setCurrentTranscriptionLang:Wf,setCurrentTranslationLang:kg,addLiveTranscriptionMessage:Kf,updateLiveTranscriptionMessage:rM,reduceLiveTranscriptionMessages:qE,setLiveTranscriptionEngineType:F1,removeLiveTranscriptionFailoverState:iM,setLiveTranscriptionLastCaptionMessage:U1,resetLiveTranscription:Qv,setIsHostDisableCaptions:IC}=ws("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"," SET_IS_HOST_DISABLE_CAPTIONS"),{resetPoll:nB}=ws("SET_POLL_DATA","SET_POLLING_ID","SET_POLLING_WEB_LINKS","SET_POLLING_DOC_MAX_SIZE","SET_POLLING_DOC_SIZE","SET_POLLING_DOC_LIBRARY_MAX_SIZE","SET_POLLING_DOC_LIBRARY_SIZE","RESET_POLL"),{setLoggerInitOptions:wC,setIsLaplaceInitialized:yr,resetLogger:V1}=ws("SET_LOGGER_INIT_OPTIONS","SET_IS_LAPLACE_INITIALIZED","RESET_LOGGER"),zf=function(s){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{socket:{zoomSocketStatus:u,xmppSocketStatus:h,mainSessionSocketStatus:v},meeting:{meetingStatus:E}}=s,I=[];if(E===bs.Joined){const R=tn.getInstance(),N=ji.createAgent();if(R.disconnect(),R.destroy(),s.video&&(s.video.subscribedVideoList.length>0&&s.video.subscribedVideoList.forEach(L=>{N.unsubscribeVideo(L)}),s.video.isCurrentUserStartedVideo&&dt(wh)),s.share&&s.share.isReceiveSharing){const L=s.share.activeNodeId;s.share.isRemoteControlApproved&&N.sharingRequestRemoteControl(L,!1),N.unsubscribeSharing(L)}}if(l||(Ur.clearSession(),[So.WebclientTk,So.WebclientZsk,So.WebclientZtk].forEach(R=>{sessionStorage.removeItem(R)}),wa.destroy()),u!==so.Closed&&I.push(Bs()),h!==so.Closed&&I.push(uc()),v!==so.Closed&&I.push(pi()),l){const R=Cr(s);I.push(Gy({audio:R?.audio,muted:R?.muted,video:R?.bVideoOn,isFailover:l}))}else I.push(Gy({audio:!1,muted:void 0,video:!1,isFailover:l}));return I.push(xy(),hT(),NL(),e1(l),FP(),g1(l),S1(),C1(),Bv(),gC(),_C(),Uv(),VV(),Qv(l),nB(),V1(l),u0(bs.Closed)),I},JE=function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),h=1;h<l;h++)u[h-1]=arguments[h];return Jr({event:Dd,operations:[ht(v=>v.find(E=>E.userId===s)),ln(v=>!!v),ti(1)]},...u)},TC={[`${Ah.AudioBridgeEnable}`]:{mask:240,action:bf},[`${Ah.AudioDecodeInWorklet}`]:{mask:15,action:q_}};function al(s){return qe(ht((l,u)=>s(l,u)),ln(l=>null!=l))}function RC(s){return qe(Pn((l,u)=>s(l,u)||Ht))}function j1(s){return qe(kn((l,u)=>s(l,u)||Ht))}function $E(s){return qe(Pn((l,u)=>s(l,u)),Pn(l=>Array.isArray(l)?En(l):$n(l)))}const XE={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},Fh={[`${Mo}`]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(s){s.add&&this.payloads.add.push(...s.add),s.update&&this.payloads.update.push(...s.update),s.remove&&this.payloads.remove.push(...s.remove)}})};function Q1(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:XE;return l=>new Pe(u=>{const h=new Map;let v=0,E=null;const{period:I,rules:R}=s;let N=null;E||(E=((O,X)=>{const ee=performance.now();let re=0,ne=!1;return setTimeout(function fe(){re+=X,v=0;const ve=performance.now()-ee-re,Le=setTimeout(fe,Math.max(X-ve,0));ne&&clearTimeout(Le)},X),()=>{ne=!0}})(0,I));const L=Object.keys(Fh),V=l.subscribe({next(O){if(O&&O.evt&&null!==E){v+=1;const{evt:X,body:ee}=O,re=String(X);if(L.indexOf(re)>=0)if(N){const ne=h.get(re);if(ne)ne.onThrottle(ee);else{const fe=Fh[re]();fe.onThrottle(ee),h.set(re,fe)}}else{let ne=0;if(R.forEach(fe=>{v>fe.peak&&(ne=fe.throttle)}),ne>0){const fe=Fh[re]();fe.onThrottle(ee),h.set(re,fe),N=setTimeout(()=>{h.forEach((ve,Le)=>{const Qe={evt:Number(Le),body:ve.payloads};u.next(Qe)}),h.clear(),N=null},ne)}else u.next(O)}else u.next(O)}else u.next(O)},error(O){u.error(O)},complete(){u.complete()}});return()=>{V.unsubscribe(),E&&(E(),E=null),v=0}})}us([ls,s=>{let{share:{isReceiveSharing:l}}=s;return l},s=>{let{share:{activeNodeId:l}}=s;return l}],function(){let s=arguments.length>2?arguments[2]:void 0;return arguments.length>1&&arguments[1]?(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(l=>l.userId===s&&!0===l.sharerOn):null});const Hv=us([ls],s=>s.filter(l=>l.sharerOn)),H1=us([Hv],s=>s.some(l=>!!l.bVideoShare));class ZE{constructor(l){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,l&&(this._cancelError=l),this._locked=!1}acquire(){const l=this.isLocked(),u=new Promise((h,v)=>{this._queue.push({resolve:h,reject:v})});return l||this._dispatch(),u}runExclusive(l){var u=this;return U(function*(){const h=yield u.acquire();try{return yield l()}finally{h()}})()}waitForUnlock(){var l=this;return U(function*(){return l.isLocked()?new Promise(u=>l._waiters.push({resolve:u})):Promise.resolve()})()}isLocked(){return this._locked}release(){if(this._currentReleaser){const l=this._currentReleaser;this._currentReleaser=void 0,l()}}cancel(){this._queue.forEach(l=>l.reject(this._cancelError)),this._queue=[]}_dispatch(){const l=this._queue.shift();if(!l)return;let u=!1;this._currentReleaser=()=>{u||(u=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,l.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach(l=>l.resolve()),this._waiters=[]}}function Gv(s){if(s){var l;const u=document.getElementById(s);null==u||null===(l=u.parentNode)||void 0===l||l.removeChild(u)}}let jd="zoom.us";const OC="2.14.0",Yf=`https://dmogdx0jrul3u.cloudfront.net/${OC}/lib/av`,Wv=`https://source.zoom.us/${OC}/lib/av`,G1=`https://jssdk.zoomus.cn/${OC}/lib/av`,Pa=(s,l,u)=>HS(...[l,u].map((h,v)=>{if("initial"!==h)return En(Promise.resolve("success"===h));{const E=0===v?"ENCODE":"DECODE";return bi(vo(`${s.toUpperCase()}_${E}_SUCCESS`,1).pipe(Hu(!0)),vo(`${s.toUpperCase()}_${E}_FAIL`,1).pipe(Hu(!1)))}})),Op=s=>{const l=Cr(s.value);return l?$n(l):vo(Xy,1).pipe(Nt(As),Fn(s),ht(u=>{let[,h]=u;return Cr(h)}))},Qd=()=>En(navigator.mediaDevices.enumerateDevices()).pipe(ht(s=>{const l=[],u=[],h=[];return s.forEach(v=>{const{kind:E,deviceId:I,label:R}=v,N=R.replace(/\([\w,\d]+:[\w,\d]+\)/i,"").trim();switch(E){case"audioinput":"communications"===I||/ZoomAudioDevice/i.test(N)||/Zoom-\S*/.test(N)||/CubebAggregateDevice\S*/.test(N)||/Microsoft Teams Audio/i.test(N)||l.push({deviceId:I,label:N});break;case"audiooutput":"communications"===I||/ZoomAudioDevice/i.test(N)||/Microsoft Teams Audio/i.test(N)||u.push({deviceId:I,label:N});break;case"videoinput":h.push({deviceId:I,label:N})}}),{microphones:l,speakers:u,cameras:h}}));function qf(s){if(s){let u=s;try{s.width=s.width}catch{var l;u=s.cloneNode(!0),null===(l=s.parentNode)||void 0===l||l.replaceChild(u,s)}return u}return s}function Ma(){try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(kT)}catch{return!1}}function Uh(){var s;return null===(s=WebAssembly)||void 0===s?void 0:s.validate(PT)}function Dp(){return Ml()||og()}const cl=(()=>{const s=new ZE;return{withAudioAction:l=>function(){for(var u=arguments.length,h=new Array(u),v=0;v<u;v++)h[v]=arguments[v];return new Promise(function(){var E=U(function*(I,R){let N=!1;const L=setTimeout(()=>{N=!0,R(new Error("Operation Timeout!"))},3e4);try{const V=yield s.acquire();N?V():(clearTimeout(L),I(l(...h)))}catch(V){N||(clearTimeout(L),R(V))}});return function(I,R){return E.apply(this,arguments)}}())},processAudioAction:l=>s.acquire().then(()=>l()),completeAudioAction:()=>{s.release()},cancelAllAudioAction:()=>{s.cancel()}}})();function Li(s){const l=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(s,{get:(u,h)=>"string"==typeof h&&l.includes(h)?function(){return cl.withAudioAction(u[h].bind(u))(...arguments)}:Reflect.get(u,h)})}function kp(s){var l,u;const h=Number(null===(l=rv())||void 0===l||null===(u=l.match(/\d+$/))||void 0===u?void 0:u[0]),v=Sf()&&h>=91,E=ig()&&h>=89,I=navigator.hardwareConcurrency>2;let R=sg();return s&&!R&&(R=Eh()&&iv()),!og()&&R&&(v||E)&&I}const Jf=(s,l)=>{const u=document.createElement("link");return u.rel="preload",u.href=s,u.as=l,u.crossOrigin="anonymous",u},ul=(s,l,u)=>{const h=[],v=[],E=Array.isArray(s)?s:[s];return $y.filter(I=>E.includes(I.category)&&I.tag===l).forEach(I=>{"worker"===I.type?h.push(`${u}${I.name}`):"wasm"===I.type&&v.push(`${u}${I.name}`)}),{workers:h,wasms:v}};function Ql(s,l,u,h){let{share:{activeNodeId:v,shareQuality:E}}=l;const{share:{isReceiveSharingFromMainSession:I}}=l;u&&(v=u),void 0!==h&&(E=h);const R=H1(l);s.subscribeSharing(v,E,I,R)}const Cc=ji.createAgent();var Kv=Object.freeze({__proto__:null,sharePrivilegeChangeEpic:(s,l)=>Wn(s,zc).pipe(ln(u=>{var h;return void 0!==(null===(h=u.payload.body)||void 0===h?void 0:h.lockShare)}),Fn(l),Zn(u=>{let[h,v]=u;const{share:{sharePrivilege:E}}=v,{payload:{body:{lockShare:I}}}=h;E!==I&&dt(Sv,I)}),ht(u=>{let[h]=u;return s1(h.payload.body.lockShare)})),shareSSrcEpic:s=>Wn(s,20227).pipe(ht(l=>jf(l.payload.body.ssrc))),shareStatusChangeEpic:(s,l)=>Wn(s,20225).pipe(Fn(l),ln(u=>{let[h,v]=u;const{payload:{body:E}}=h,{share:{isReceiveSharingFromMainSession:I}}=v;return!I||I&&E.fromMainSession}),ht(u=>{let[h,v]=u;const{share:{isReceiveSharing:E,activeNodeId:I,isReceiveSharingFromMainSession:R},breakoutRoom:N}=v,{payload:{body:L}}=h;if(E&&1===L.bStatus){let V=!1;N?.currentRoom.status===rr.InRoom&&N.mainSessionAttendeeList.length>0&&(V=N.mainSessionAttendeeList.findIndex(O=>O.userId===I)>-1),Cc.unsubscribeSharing(I,V),Ql(Cc,v,L.activeNodeID),tn.getInstance().switchSharingSource(L.ssrc,R),dt(P0,{userId:L.activeNodeID})}else if(1===L.bStatus){const V={activeUserId:L.activeNodeID,isActive:!0};R&&Object.assign(V,{isFromMainSession:!0}),dt(hE,V)}else if(E){const V={activeUserId:L.activeNodeID,isActive:!1};R&&Object.assign(V,{isFromMainSession:!0}),dt(hE,V)}return Rv(L)})),handleChromeExtensionEpic:s=>Ar(s,Vn.CheckChromeSharingExtensionResponse).pipe(ht(l=>(dt(eu,l.payload.data),a1(l.payload.data)))),handleSDKShareSuccessEpic:(s,l)=>Ar(s,[Vn.SharingDesktopStreamHaveAudio,Vn.SharingDesktopStreamHaveNoAudio]).pipe(Fn(l),ht(u=>{let[h,v]=u;const{meeting:{userId:E},share:{isSharingToBreakoutRoom:I,isOptimizedForSharedVideo:R}}=v,{payload:{type:N}}=h;return Cc.startSharing(E,{bShareToBO:I,bShareAudio:N===Vn.SharingDesktopStreamHaveAudio,bShareVideo:!!R}),Lh(!1)})),handleSDKShareErrorEpic:s=>Ar(s,[Vn.DesktopSharingError,Vn.DesktopSharingChromeExtensionUninstalled,Vn.DesktopSharingPermissionDenied,Vn.DesktopSharingSystemError]).pipe(Pn(l=>{const u=[];let h="";return[Vn.DesktopSharingPermissionDenied,Vn.DesktopSharingSystemError].includes(l.payload.type)&&(u.push(Lh(!0)),l.payload.type===Vn.DesktopSharingSystemError?/mac/i.test(navigator.platform)&&(h="To use screen share on Chrome, please allow screen recording access in system setting."):h="To use screen share, please allow the permission request."),dt(Oh,{reason:h}),En(u)})),handleSDKShareDimensionChangeEpic:s=>Ar(s,Vn.CurrentDesktopSharingWidthHeight).pipe(ln(l=>!!l.payload.data),ht(l=>{dt(fE,l.payload.data);const{payload:{data:{width:u,height:h}}}=l;return tn.getInstance().ajustmentSharingCanvas(u,h),NP(l.payload.data)})),handleSDKReceivedShareSizeChangeEpic:(s,l)=>Ar(s,Vn.SharingDecodeMaxSize).pipe(ln(u=>!!u.payload.data),Fn(l),al(u=>{let[h,v]=u;const{share:{shareQuality:E,activeNodeId:I}}=v,{payload:{data:{fps:R}}}=h,N=Number(R);if(E!==N)return Ql(Cc,v,I,N),c1(N)})),handleRWGShareOriginalDimensionEpic:s=>Wn(s,20226).pipe(Zn(l=>{var u,h;if(dt(bv,null===(u=l.payload)||void 0===u?void 0:u.body),null!==(h=l.payload)&&void 0!==h&&h.body){const{payload:{body:{width:v,height:E}}}=l;tn.getInstance().ajustmentReceivedSharingCanvas(v,E)}}),ht(l=>iC(l.payload.body))),handleSDKShareOriginalDimensionEpic:s=>Ar(s,Vn.SharingPara).pipe(Zn(l=>{var u,h;if(dt(bv,null===(u=l.payload.data)||void 0===u?void 0:u.body),null!==(h=l.payload.data)&&void 0!==h&&h.body){const{payload:{data:{body:{width:v,height:E}}}}=l;tn.getInstance().ajustmentReceivedSharingCanvas(v,E)}}),ht(l=>{var u;return iC(null===(u=l.payload.data)||void 0===u?void 0:u.body)})),handleSDKStopShareEpic:(s,l)=>Ar(s,Vn.UserStopDesktopSharing).pipe(Fn(l),ht(u=>{let[,h]=u;const{meeting:{userId:v},share:{status:E}}=h;return E!==Zi.End&&(Cc.stopSharing(v),dt(QT)),Tp(Zi.End)})),handleRWGCurrentUserShareChangeEpic:(s,l)=>Wn(s,Mo).pipe(Fn(l),ln(u=>{let[h,v]=u;const{meeting:{userId:E}}=v,I=h.payload.body.update;return I&&I.length>0&&I.findIndex(R=>R.id===E&&void 0!==R.bShareOn)>-1}),Pn(u=>{let[h,v]=u;const{meeting:{userId:E},share:{status:I,isReceiveSharing:R,activeNodeId:N}}=v,{payload:{body:{update:L}}}=h,V=L.find(re=>re.id===E&&!1===re.bShareOn),O=L.find(re=>re.id===E&&!0===re.bShareOn),X=[],ee=tn.getInstance();return V&&I!==Zi.End&&(Cc.stopSharing(E),ee.stopDesktopSharing(),X.push(Tp(Zi.End)),dt(O0)),O&&I===Zi.End&&(R&&(ee.stopRenderSharing(),Cc.unsubscribeSharing(N),X.push(Iu(!1))),X.push(Tp(Zi.Sharing))),En(X)})),handleMultipleShareChangeEpic:(s,l)=>Wn(s,Mo).pipe(Fn(l),ln(u=>{let[h,v]=u;const{meeting:{userId:E}}=v,I=h.payload.body.update;return I&&I.length>0&&I.findIndex(R=>R.id!==E&&void 0!==R.bShareOn)>-1}),Pn(u=>{let[h,v]=u;const{payload:{body:{update:E}}}=h,{share:{activeNodeId:I,isReceiveSharing:R}}=v,N=Hv(v),L=E.filter(X=>!0===X.bShareOn&&!1===X.bSharePause),V=E.filter(X=>!0===X.bShareOn&&!0===X.bSharePause),O=E.filter(X=>!1===X.bShareOn);return L.length>0&&L.forEach(X=>{-1===N.findIndex(ee=>ee.userId===X.id)?dt(Sp,X):dt(_P,X)}),V.length>0&&V.forEach(X=>{dt(k0,X)}),O.length>0&&(O.forEach(X=>{dt(Dh,X)}),R&&O.some(X=>X.id===I))?bi(Wn(s,20225).pipe(ti(1),Pr(Ht)),ua(50).pipe(Pr(Mi("timeout")))).pipe(hn(()=>{const{share:{activeNodeId:X,isReceiveSharingFromMainSession:ee},audio:re}=l.value,ne=N.filter(fe=>fe.userId!==X);if(ne.length>0){const fe=ne[0],{userId:ve}=fe;Cc.unsubscribeSharing(X,ee),Ql(Cc,l.value,ve);const Le=tn.getInstance();return Le.switchSharingSource(ve,ee),re?.localShareAudioUserMutedList.forEach(Qe=>{Le.setSharingAudioVolume(ve,Qe.userId!==ve||Qe.muted,Qe.isFromMainSession)}),dt(P0,{userId:ve}),$n(Rv({activeNodeID:ve,bStatus:1,ssrc:ve}))}return Ht})):Ht})),handleSharingEncryptIndication:(s,l)=>Wn(s,ug).pipe(Fn(l),kn(u=>{let[h,v]=u;const{payload:{body:{encryptKey:E,additionalType:I}}}=h,{media:{sharingDecodeStatus:R,sharingEncodeStatus:N},meeting:{confId:L,userId:V,zoomId:O,meetingId:X,meetingNumber:ee,isWebinar:re}}=v;return Op(l).pipe(kn(ne=>{let fe=N;return re&&ne&&Da(ne.userRole)&&(fe="failed"),Pa("sharing",fe,R).pipe(Zn(ve=>{let[Le,Qe]=ve;const ze=tn.getInstance(),ft={userId:V,sn:Ju(O),confId:L,encryptKey:Ju(E),encryptType:I,meetingId:X,meetingNumber:ee};if(Le&&ze?.updateMediaParams({iVType:gc.SHARING_ENCODE,isFromMainSession:!1,updateParams:ft}),Qe){ze.updateMediaParams({iVType:gc.SHARING_DECODE,isFromMainSession:!1,updateParams:ft});const{participants:{attendeesList:lt}}=l.value;if(lt.length>0){const tt=lt.map(St=>({userid:St.userId,sn:St.zoomID&&Ju(St.zoomID)}));ze.updateUserMediaSN({added:tt,isFromMainSession:!1,iVType:gc.SHARING_DECODE})}}}),Pr(Ht))}))})),handleSharingReceivingChannelReadyEpic:(s,l)=>pc(s,20235).pipe(Fn(l),Zn(u=>{let[h,v]=u;const{media:{sharingDecodeStatus:E}}=v,{type:I,payload:{body:R}}=h,N=I===`${lo}`;Pa("sharing","success",E).subscribe(L=>{let[,V]=L;V&&tn.getInstance().addReceivedSharingChannelType({isFromMainSession:N,...R})})}),Pr(Ht)),handleSharingReceivingChannelCloseEpic:(s,l)=>pc(s,20236).pipe(Fn(l),Zn(u=>{let[h,v]=u;const{media:{sharingDecodeStatus:E}}=v,{type:I,payload:{body:{ssrc:R}}}=h,N=I===`${lo}`;Pa("sharing","success",E).subscribe(L=>{let[,V]=L;V&&tn.getInstance().removeReceivedSharingChannelType({isFromMainSession:N,ssrc:R})})}),Pr(Ht)),handleReceiveSharingConfirmEpic:s=>Ar(s,Vn.SharingFirstDecodeFrameReceivedSsrc).pipe(ln(l=>!!l.payload.data),Zn(l=>{const{payload:{data:{ssrc:u}}}=l;Cc.sendReceivingSharingReady(u)}),Pr(Ht)),handleReceiveSharingFeedbackEpic:(s,l)=>Wn(s,20233).pipe(ln(()=>!!l.value.share.isRequireReadReceipt),Zn(u=>{const{payload:{body:{bReceiveOk:h}}}=u;h&&dt(vP)}),Pr(Ht)),handleVideoShareChangedAsPrivilegeChangedEpic:(s,l)=>Wn(s,zc).pipe(ln(u=>{var h;return void 0!==(null===(h=u.payload.body)||void 0===h?void 0:h.lockShare)}),Pn(u=>{const{payload:{body:{lockShare:h}}}=u,{share:{isOptimizedForSharedVideo:v,isSharingToBreakoutRoom:E},audio:{isSharingAudio:I},meeting:{userId:R}}=l.value,N=[];return h===Ss.MultipleShare&&v&&(Cc.startSharing(R,{bShareAudio:I,bShareToBO:E,bShareVideo:!1}),tn.getInstance().switchSharingMode(cE.Normal),N.push(NE(!1))),En(N)})),handleShareQosDataEpic:(s,l)=>Ar(s,Vn.ShareQosData).pipe(Fn(l),ht(u=>{var h;let[v,E]=u;const{meeting:{isWebinar:I},media:{sharingEncodeStatus:R,sharingDecodeStatus:N},share:{status:L,isReceiveSharing:V},participants:{xmppAttendeeList:O}}=E;let X=$0(E).length>0;I&&(X=X||Boolean(O.length));const re=V&&"success"===N;return null!==(h=v.payload.data)&&void 0!==h&&h.encoding?L!==Zi.End&&"success"===R&&X?(dt(M0,v.payload),LP(v.payload)):LP(Pf):re?(dt(M0,v.payload),Ov(v.payload)):Ov(Pf)}))});function Ic(s){for(var l=arguments.length,u=Array(l>1?l-1:0),h=1;h<l;h++)u[h-1]=arguments[h];throw Error("[Immer] minified error nr: "+s+(u.length?" "+u.map(function(v){return"'"+v+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Hd(s){return!!s&&!!s[xo]}function Hl(s){var l;return!!s&&(function(u){if(!u||"object"!=typeof u)return!1;var h=Object.getPrototypeOf(u);if(null===h)return!0;var v=Object.hasOwnProperty.call(h,"constructor")&&h.constructor;return v===Object||"function"==typeof v&&Function.toString.call(v)===Lo}(s)||Array.isArray(s)||!!s[uM]||!(null===(l=s.constructor)||void 0===l||!l[uM])||DC(s)||kC(s))}function zv(s,l,u){void 0===u&&(u=!1),0===Pg(s)?(u?Object.keys:LC)(s).forEach(function(h){u&&"symbol"==typeof h||l(h,s[h],s)}):s.forEach(function(h,v){return l(v,h,s)})}function Pg(s){var l=s[xo];return l?l.i>3?l.i-4:l.i:Array.isArray(s)?1:DC(s)?2:kC(s)?3:0}function Mg(s,l){return 2===Pg(s)?s.has(l):Object.prototype.hasOwnProperty.call(s,l)}function W1(s,l,u){var h=Pg(s);2===h?s.set(l,u):3===h?(s.delete(l),s.add(u)):s[l]=u}function DC(s){return aM&&s instanceof Map}function kC(s){return cM&&s instanceof Set}function Pp(s){return s.o||s.t}function PC(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var l=Y1(s);delete l[xo];for(var u=LC(l),h=0;h<u.length;h++){var v=u[h],E=l[v];!1===E.writable&&(E.writable=!0,E.configurable=!0),(E.get||E.set)&&(l[v]={configurable:!0,writable:!0,enumerable:E.enumerable,value:s[v]})}return Object.create(Object.getPrototypeOf(s),l)}function MC(s,l){return void 0===l&&(l=!1),NC(s)||Hd(s)||!Hl(s)||(Pg(s)>1&&(s.set=s.add=s.clear=s.delete=rB),Object.freeze(s),l&&zv(s,function(u,h){return MC(h,!0)},!0)),s}function rB(){Ic(2)}function NC(s){return null==s||"object"!=typeof s||Object.isFrozen(s)}function bn(s){var l=lM[s];return l||Ic(18,s),l}function eb(){return $f}function ll(s,l){l&&(bn("Patches"),s.u=[],s.s=[],s.v=l)}function nn(s){tb(s),s.p.forEach(jt),s.p=null}function tb(s){s===$f&&($f=s.l)}function oM(s){return $f={p:[],l:$f,h:s,m:!0,_:0}}function jt(s){var l=s[xo];0===l.i||1===l.i?l.j():l.O=!0}function Wt(s,l){l._=l.p.length;var u=l.p[0],h=void 0!==s&&s!==u;return l.h.g||bn("ES5").S(l,s,h),h?(u[xo].P&&(nn(l),Ic(4)),Hl(s)&&(s=Ti(l,s),l.l||wc(l,s)),l.u&&bn("Patches").M(u[xo].t,s,l.u,l.s)):s=Ti(l,u,[]),nn(l),l.u&&l.v(l.u,l.s),s!==ur?s:void 0}function Ti(s,l,u){if(NC(l))return l;var h=l[xo];if(!h)return zv(l,function(E,I){return sM(s,h,l,E,I,u)},!0),l;if(h.A!==s)return l;if(!h.P)return wc(s,h.t,!0),h.t;if(!h.I){h.I=!0,h.A._--;var v=4===h.i||5===h.i?h.o=PC(h.k):h.o;zv(3===h.i?new Set(v):v,function(E,I){return sM(s,h,v,E,I,u)}),wc(s,v,!1),u&&s.u&&bn("Patches").R(h,u,s.u,s.s)}return h.o}function sM(s,l,u,h,v,E){if(Hd(v)){var I=Ti(s,v,E&&l&&3!==l.i&&!Mg(l.D,h)?E.concat(h):void 0);if(W1(u,h,I),!Hd(I))return;s.m=!1}if(Hl(v)&&!NC(v)){if(!s.h.F&&s._<1)return;Ti(s,v),l&&l.A.l||wc(s,v)}}function wc(s,l,u){void 0===u&&(u=!1),s.h.F&&s.m&&MC(l,u)}function Na(s,l){var u=s[xo];return(u?Pp(u):s)[l]}function Yv(s,l){if(l in s)for(var u=Object.getPrototypeOf(s);u;){var h=Object.getOwnPropertyDescriptor(u,l);if(h)return h;u=Object.getPrototypeOf(u)}}function wu(s){s.P||(s.P=!0,s.l&&wu(s.l))}function qv(s){s.o||(s.o=PC(s.t))}function xC(s,l,u){var h=DC(l)?bn("MapSet").N(l,u):kC(l)?bn("MapSet").T(l,u):s.g?function(v,E){var I=Array.isArray(v),R={i:I?1:0,A:E?E.A:eb(),P:!1,I:!1,D:{},l:E,t:v,k:null,o:null,j:null,C:!1},N=R,L=BC;I&&(N=[R],L=$v);var V=Proxy.revocable(N,L),O=V.revoke,X=V.proxy;return R.k=X,R.j=O,X}(l,u):bn("ES5").J(l,u);return(u?u.A:eb()).p.push(h),h}function K1(s,l){switch(l){case 2:return new Map(s);case 3:return Array.from(s)}return PC(s)}var zi,$f,z1=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),aM=typeof Map<"u",cM=typeof Set<"u",Jv=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",ur=z1?Symbol.for("immer-nothing"):((zi={})["immer-nothing"]=!0,zi),uM=z1?Symbol.for("immer-draftable"):"__$immer_draftable",xo=z1?Symbol.for("immer-state"):"__$immer_state",Lo=""+Object.prototype.constructor,LC=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,Y1=Object.getOwnPropertyDescriptors||function(s){var l={};return LC(s).forEach(function(u){l[u]=Object.getOwnPropertyDescriptor(s,u)}),l},lM={},BC={get:function(s,l){if(l===xo)return s;var v,R,N,u=Pp(s);if(!Mg(u,l))return v=s,(N=Yv(u,l))?"value"in N?N.value:null===(R=N.get)||void 0===R?void 0:R.call(v.k):void 0;var h=u[l];return s.I||!Hl(h)?h:h===Na(s.t,l)?(qv(s),s.o[l]=xC(s.A.h,h,s)):h},has:function(s,l){return l in Pp(s)},ownKeys:function(s){return Reflect.ownKeys(Pp(s))},set:function(s,l,u){var I,R,h=Yv(Pp(s),l);if(h?.set)return h.set.call(s.k,u),!0;if(!s.P){var v=Na(Pp(s),l),E=v?.[xo];if(E&&E.t===u)return s.o[l]=u,s.D[l]=!1,!0;if(((I=u)===(R=v)?0!==I||1/I==1/R:I!=I&&R!=R)&&(void 0!==u||Mg(s.t,l)))return!0;qv(s),wu(s)}return s.o[l]===u&&"number"!=typeof u&&(void 0!==u||l in s.o)||(s.o[l]=u,s.D[l]=!0,!0)},deleteProperty:function(s,l){return void 0!==Na(s.t,l)||l in s.t?(s.D[l]=!1,qv(s),wu(s)):delete s.D[l],s.o&&delete s.o[l],!0},getOwnPropertyDescriptor:function(s,l){var u=Pp(s),h=Reflect.getOwnPropertyDescriptor(u,l);return h&&{writable:!0,configurable:1!==s.i||"length"!==l,enumerable:h.enumerable,value:u[l]}},defineProperty:function(){Ic(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){Ic(12)}},$v={};zv(BC,function(s,l){$v[s]=function(){return arguments[0]=arguments[0][0],l.apply(this,arguments)}}),$v.deleteProperty=function(s,l){return $v.set.call(this,s,l,void 0)},$v.set=function(s,l,u){return BC.set.call(this,s[0],l,u,s[0])};var nb=function(){function s(u){var h=this;this.g=Jv,this.F=!0,this.produce=function(v,E,I){if("function"==typeof v&&"function"!=typeof E){var R=E;E=v;var N=h;return function(ne){var fe=this;void 0===ne&&(ne=R);for(var ve=arguments.length,Le=Array(ve>1?ve-1:0),Qe=1;Qe<ve;Qe++)Le[Qe-1]=arguments[Qe];return N.produce(ne,function(ze){var ft;return(ft=E).call.apply(ft,[fe,ze].concat(Le))})}}var L;if("function"!=typeof E&&Ic(6),void 0!==I&&"function"!=typeof I&&Ic(7),Hl(v)){var V=oM(h),O=xC(h,v,void 0),X=!0;try{L=E(O),X=!1}finally{X?nn(V):tb(V)}return typeof Promise<"u"&&L instanceof Promise?L.then(function(ne){return ll(V,I),Wt(ne,V)},function(ne){throw nn(V),ne}):(ll(V,I),Wt(L,V))}if(!v||"object"!=typeof v){if(void 0===(L=E(v))&&(L=v),L===ur&&(L=void 0),h.F&&MC(L,!0),I){var ee=[],re=[];bn("Patches").M(v,L,ee,re),I(ee,re)}return L}Ic(21,v)},this.produceWithPatches=function(v,E){if("function"==typeof v)return function(L){for(var V=arguments.length,O=Array(V>1?V-1:0),X=1;X<V;X++)O[X-1]=arguments[X];return h.produceWithPatches(L,function(ee){return v.apply(void 0,[ee].concat(O))})};var I,R,N=h.produce(v,E,function(L,V){I=L,R=V});return typeof Promise<"u"&&N instanceof Promise?N.then(function(L){return[L,I,R]}):[N,I,R]},"boolean"==typeof u?.useProxies&&this.setUseProxies(u.useProxies),"boolean"==typeof u?.autoFreeze&&this.setAutoFreeze(u.autoFreeze)}var l=s.prototype;return l.createDraft=function(u){var E;Hl(u)||Ic(8),Hd(u)&&(Hd(E=u)||Ic(22,E),u=function I(R){if(!Hl(R))return R;var N,L=R[xo],V=Pg(R);if(L){if(!L.P&&(L.i<4||!bn("ES5").K(L)))return L.t;L.I=!0,N=K1(R,V),L.I=!1}else N=K1(R,V);return zv(N,function(O,X){var ee,re;L&&(re=O,(2===Pg(ee=L.t)?ee.get(re):ee[re])===X)||W1(N,O,I(X))}),3===V?new Set(N):N}(E));var h=oM(this),v=xC(this,u,void 0);return v[xo].C=!0,tb(h),v},l.finishDraft=function(u,h){var v=(u&&u[xo]).A;return ll(v,h),Wt(void 0,v)},l.setAutoFreeze=function(u){this.F=u},l.setUseProxies=function(u){u&&!Jv&&Ic(20),this.g=u},l.applyPatches=function(u,h){var v;for(v=h.length-1;v>=0;v--){var E=h[v];if(0===E.path.length&&"replace"===E.op){u=E.value;break}}v>-1&&(h=h.slice(v+1));var I=bn("Patches").$;return Hd(u)?I(u,h):this.produce(u,function(R){return I(R,h)})},s}(),nu=new nb,gt=nu.produce;nu.produceWithPatches.bind(nu),nu.setAutoFreeze.bind(nu),nu.setUseProxies.bind(nu),nu.applyPatches.bind(nu),nu.createDraft.bind(nu),nu.finishDraft.bind(nu);const q1={ssrc:0,status:Zi.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:Ss.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isRemoteControlApproved:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isChromeExtensionInstalled:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1,capturedEnsuredCanvas:[],renderedEnsuredCanvas:[],statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}}},J1=Gn({[`${s1}`]:gt((s,l)=>{let{payload:u}=l;s.sharePrivilege=u}),[`${Rv}`]:gt((s,l)=>{let{payload:u}=l;s.isRemoteSharingActive=1===u.bStatus,s.activeNodeId=u.activeNodeID,s.activeSsrc=u.ssrc}),[`${Iu}`]:gt((s,l)=>{let{payload:u}=l;s.isReceiveSharing=u}),[`${a1}`]:gt((s,l)=>{let{payload:u}=l;s.isChromeExtensionInstalled=u}),[`${NP}`]:gt((s,l)=>{let{payload:u}=l;s.shareDimension={...u}}),[`${Tp}`]:gt((s,l)=>{let{payload:u}=l;s.status=u}),[`${jf}`]:gt((s,l)=>{let{payload:u}=l;s.ssrc=u}),[`${c1}`]:gt((s,l)=>{let{payload:u}=l;s.shareQuality=u}),[`${iC}`]:gt((s,l)=>{let{payload:u}=l;s.receivedShareDimension={...u}}),[`${Qf}`]:gt((s,l)=>{let{payload:u}=l;s.isRemoteControlApproved=u}),[`${Ud}`]:gt((s,l)=>{let{payload:u}=l;s.isGrabRemoteControl=u}),[`${u1}`]:gt((s,l)=>{let{payload:u}=l;s.isSDKGrabControl=u}),[`${xP}`]:gt((s,l)=>{let{payload:u}=l;s.isReceiveSharingFromMainSession=u}),[`${ME}`]:gt((s,l)=>{let{payload:u}=l;s.isSharingToBreakoutRoom=u}),[`${l1}`]:gt((s,l)=>{let{payload:u}=l;s.isSharingWithSecondCamera=u}),[`${d1}`]:gt((s,l)=>{let{payload:u}=l;s.secondCameraId=u}),[`${jL}`]:gt((s,l)=>{let{payload:u}=l;s.isRequireReadReceipt=u}),[`${NE}`]:gt((s,l)=>{let{payload:u}=l;s.isOptimizedForSharedVideo=u}),[`${LP}`]:gt((s,l)=>{let{payload:u}=l;s.statistic.encode=u.data}),[`${Ov}`]:gt((s,l)=>{let{payload:u}=l;s.statistic.decode=u.data}),[`${BP}`]:gt((s,l)=>{let{payload:u}=l;s.capturedEnsuredCanvas.includes(u)||s.capturedEnsuredCanvas.push(u)}),[`${p1}`]:gt((s,l)=>{let{payload:u}=l;s.renderedEnsuredCanvas.includes(u)||s.renderedEnsuredCanvas.push(u)}),[`${FP}`]:()=>({...q1})},q1),FC=dc(Kv),xa=ji.createAgent();var iB=Object.freeze({__proto__:null,joinMeetingWelcomeEpic:s=>Wn(s,0).pipe(Zn(l=>{var u;if("READY"===(null===(u=l.payload.body)||void 0===u?void 0:u.status)){const h=Ur.get(So.WebclientMeetingToken);h&&xa.joinMeeting(h)}}),Pr(Ht)),joinMeetingSuccessfulEpic:(s,l)=>Wn(s,4098).pipe(Fn(l),j1(u=>{let[h,v]=u;const{payload:{body:{res:E,userID:I,zoomID:R,mn:N,participantID:L,disableAqos:V,disableVqos:O,meetingtoken:X,role:ee}}}=h,{meeting:{isWebinar:re,userEmail:ne,userName:fe,isMeetingReset:ve,meetingOptions:Le,zlkJwtToken:Qe,cv:ze,apiKey:ft,zsk:lt,signatureType:tt},media:{mediaConstraints:St,assetsPath:Zt}}=v;if(hc.CONF_SUCCESS===E){const{WebclientParticipantId:ut,WebclientZoomId:Ze,WebclientUserEmail:_e,WebclientUserName:He,WebclientMeetingToken:ct}=So;Ur.set(Ze,R,fi.SessionStorage),Ur.set(ut,L,fi.SessionStorage),ne&&Ur.set(_e,ne,fi.SessionStorage),Ur.set(He,fe,fi.SessionStorage),X&&Ur.set(ct,X,fi.SessionStorage),lt&&xa.sendSdkKeyToMonitor(tt,ft,I);const st=[Ts(h.payload.body),Zk(performance.now())];tn.getInstance().init(),ve&&(st.push(c0(!1)),void 0!==St&&void 0!==Zt&&st.push(ph())),(Le.isPollingEnabled||Qe||re)&&st.push(Ni());let Ne=!O;const Jt=!V;return Qe&&Kk(ze,"1.3.0")<0&&(Ne=!1),st.unshift(bT({audioQos:Jt,videoQos:Ne})),(ee&wi.Owner)===wi.Owner&&(dt(Xa,{reason:"dont support assisnt join through widget",errorCode:-1}),xa.leaveMeeting()),dt(lv,{meetingNumber:N}),En(st)}return hc.CONF_FAIL_CONFLOCKED===E?dt(Xa,Z_(E)):hc.CONF_FAIL_CONF_USER_FULL===E?dt(Xa,Object.assign({},Z_(E),{lmUrl:h.payload.body.lmURL})):(hc.CONF_FAIL_MEETING_OVER===E||hc.CONF_RESULT_MMR_IB_REJECT===E||hc.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS===E||[hc.CONF_FAIL_HAS_BEEN_REMOVED,hc.CONF_FAIL_WEBINAR_DENIED_EMAIL].includes(E),dt(Xa,Z_(E))),En(zf(v,!1))})),handleMeetingAttributeChangeEpic:(s,l)=>Wn(s,zc).pipe(Fn(l),ht(u=>{let[h,v]=u;const{payload:{body:E}}=h,{meeting:{zoomId:I,encType:R,gcmSessinKey:N}}=v;if(void 0!==E?.encryptKey&&wa.init(I,E.encryptKey,R),void 0!==E?.gatewayKey){const L=tn.getInstance(),[,V,O]=E.gatewayKey.split(".");L.sendUserNodeList([{userid:Number(V),sn:O&&Ju(O)}],N)}return dt(qc,E),Rd(E)})),handleMeetingEndEpic:(s,l)=>Wn(s,7939).pipe(Fn(l),Pn(u=>{let[h,v]=u;const{payload:{body:E}}=h;if(void 0!==E.reason){if(vh.Reconnect===E.reason)return dt(vc,yf.WaitingRoomFailover===E.subReason?{reason:Es.OnHold}:{reason:Es.Failover}),$n(io(Rs.NormalCase));vh.KickedByHost===E.reason?dt(Ki,{reason:"kicked by host"}):[vh.EndByHost,vh.EndByNone,vh.EndByAdmin,vh.EndByHostStartAnotherMeeting].includes(E.reason)?dt(Ki,{reason:"ended by host"}):vh.FreeMeetingTimeout===E.reason?dt(Ki,{reason:"free meeting ended"}):[vh.DuplicateSession,vh.MeetingTransfer].includes(E.reason)&&dt(Ki,{reason:"duplicated session"})}return v.meeting.isMeetingReset?Ht:En(zf(v,!1))})),meetingFailoverEpic:(s,l)=>s.pipe(wr(`${io}`),Fn(l),Pn(u=>{let[,h]=u;const v=zf(h,!0);let E;if(h.meeting.zlkJwtToken){const I=function(N){if(N){const{meeting:{topic:L,passWord:V,userName:O,zlkJwtToken:X,lang:ee,cv:re,customerKey:ne}}=N;return{topic:L,passWord:V,userName:O,zlkJwtToken:X,lang:ee,cv:re,customerKey:ne}}return null}(h);E=$n(Pi({topic:I?.topic,password:I?.passWord,userName:I?.userName,zlk:I?.zlkJwtToken,lang:I?.lang,cv:I?.cv,customerKey:I?.customerKey})).pipe(Vm(1e3))}else{const I=function(R){const{meeting:{apiKey:N,signature:L,signatureType:V,meetingNumber:O,userName:X,lang:ee,passWord:re,userEmail:ne,sdkUrl:fe,sdkOrigin:ve,proxy:Le,cv:Qe,ztk:ze,zsk:ft,tk:lt}}=R,tt=ze||sessionStorage.getItem(So.WebclientZtk),St=ft||sessionStorage.getItem(So.WebclientZsk);return{apiKey:N,signature:L,signatureType:V,meetingNumber:O,userName:X,lang:ee,passWord:re,userEmail:ne,sdkUrl:fe,sdkOrigin:ve,proxy:Le,cv:Qe,ztk:tt,zsk:St,tk:lt||sessionStorage.getItem(So.WebclientTk),ulsm:St?1:0}}(h);E=$n(vn(I)).pipe(Vm(1e3))}return U_(En(v),E)})),hostChangeEpic:s=>pc(s,7940).pipe(Zn(l=>{dt("MEETING_HOST_CHANGE_INDICATION",l.payload.body.bHost)}),ht(l=>Ef(l.payload.body))),cohostChangeEpic:s=>pc(s,7941).pipe(Zn(l=>{dt("MEETING_COHOST_CHANGE_INDICATION",l.payload.body.bCoHost)}),ht(l=>yp(l.payload.body))),setMeetingOptEpic:s=>pc(s,7945).pipe(Zn(l=>{const{payload:{body:{opt:u}}}=l;Ur.set(So.WebclientOpt,u,fi.SessionStorage)}),Pr(Ht)),setMeetingOnHoldEpic:(s,l)=>Wn(s,7942).pipe(Zn(u=>{const{payload:{body:{bHold:h}}}=u;Ur.set(So.WebclientIsOnHold,h?1:0,fi.SessionStorage),dt(Zy,h)}),Fn(l),Pn(u=>{let[h,v]=u;const E=[ev(h.payload.body.bHold)];if(h.payload.body.bHold){const I=Cr(v);if(I){E.push($k({audio:I.audio,video:I.bVideoOn,muted:I.muted}));const R=tn.getInstance();if("computer"===I.audio&&(R.leaveComputerAudio(),xa.joinOrLeaveVoip(!1)),I.bVideoOn&&R.stopCaptureVideo(),I.sharerOn&&(xa.stopSharing(I.userId),R.stopDesktopSharing(),E.push(Tp(Zi.End))),v.video&&v.video.subscribedVideoList.length>0&&v.video.subscribedVideoList.forEach(N=>{xa.unsubscribeVideo(N)}),v.share&&v.share.isReceiveSharing){const N=v.share.activeNodeId;v.share.isRemoteControlApproved&&(xa.sharingRequestRemoteControl(N,!1),R.stopRemoteControl()),xa.unsubscribeSharing(N),R.stopRenderSharing()}}}return En(E)})),setMeetingDataCenterRegionEpic:s=>Wn(s,7954).pipe(ht(l=>l0(l.payload.body))),claimHostResponseEpic:s=>Wn(s,4216).pipe(Zn(l=>{dt("MEETING_CLAIM_HOST_KEY_RESPONSE",l.payload.body.bresult)}),Pr(Ht)),leaveMeetingEpic:(s,l)=>s.pipe(wr(`${Us}`,`${$m}`),Fn(l),Pn(u=>{let[h,v]=u;return h.type===`${Us}`?(xa.leaveMeeting(),dt(Ki,{})):h.type===`${$m}`&&(xa.endMeeting(),dt(Ki,{})),En(zf(v,!1))})),versionUpgradeEpic:s=>Wn(s,2).pipe(Zn(()=>{console.warn("Upgrade to latest version to optimize meeting experience")}),Pr(Ht)),versionBlockEpic:s=>Wn(s,1).pipe(Zn(l=>{const{payload:{body:{upgradeVersion:u}}}=l,h=Z_(1e4);if(h&&h.reason){const v=h.reason.replace(/{(\d+)}/g,()=>u);h.reason=v}dt(Xa,h)}),Pr(Ht)),handleSharePronounChangeEpic:s=>Wn(s,4265).pipe(ht(l=>{const{payload:{body:u}}=l,{nShareType:h}=u;return dt(_0,{userSharePronounType:h}),nv(h)})),handleMeetingTokenEpic:s=>Wn(s,4128).pipe(Zn(l=>{const{payload:{body:{meetingtoken:u}}}=l,{WebclientMeetingToken:h}=So;u&&Ur.set(h,u,fi.SessionStorage)}),Pr(Ht)),handleQuicklyLeaveEpic:(s,l)=>s.pipe(wr(`${Ts}`),ln(()=>!!l.value.meeting.quicklyLeave),kn(()=>is(window,"beforeunload").pipe(Zn(()=>{xa.leaveMeeting()}),Pr(Ht))))});let Xf,Xv,ec=function(s){return s.Add="add",s.List="list",s.Remove="memberremove",s.rename="rename",s.update="UPDATE",s}({}),Gl=function(s){return s.Open="open",s.Message="message",s.Error="error",s.Close="close",s}({}),Ng=(()=>{class s{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new s),this.xmppInstance}on(u,h){let v=this.eventHandlers.get(u);v||(v=[]),v.push(h),this.eventHandlers.set(u,v)}off(u,h){const v=this.eventHandlers.get(u);if(v){const E=v.filter(I=>I!==h);this.eventHandlers.set(u,E)}}emit(u,h){const v=this.eventHandlers.get(u);v&&v instanceof Array&&v.slice(0).forEach(E=>{try{E(h)}catch(I){console.error(I)}})}sendMessageToRwg(u){this.seq+=1;const h=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(u,{seq:h}))),h}connect(u){this.websocket=new WebSocket(u),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var u;null===(u=this.websocket)||void 0===u||u.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",u=>{this.emit(Gl.Open,u)}),this.websocket.addEventListener("message",u=>{const{data:h}=u;var v;if(h instanceof ArrayBuffer)0===new Uint8Array(h)[0]&&(null===(v=this.websocket)||void 0===v||v.send(h));else try{this.emit(Gl.Message,JSON.parse(h))}catch{console.warn("Unsupported format",h)}}),this.websocket.addEventListener("close",u=>{this.emit(Gl.Close,u)}),this.websocket.addEventListener("error",u=>{this.emit(Gl.Error,u)}))}join(u){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:u}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(u){return{seq:this.sendMessageToRwg({evt:24578,jids:u||[]})}}sendWebinarMseeage(u,h,v){return{seq:this.sendMessageToRwg({evt:24582,body:{msg:u,jid:h?[h]:[],type:v,bcm:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}})}}sendAnswer(u,h,v){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:h.jid,question_attendeename:h.displayName,question_text:h.questionText,question_id:h.questionId,question_anonymous:h.isAnonymous,question_time:h.questionTime,text:u,isPrivate:v}})}}answerOnline(u,h){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,isLiveStart:h}})}}dismissQuestion(u){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!1}})}}deleteQuestion(u){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:u,bDelete:!0}})}}deleteComment(u){return{seq:this.sendMessageToRwg({body:{comment_id:u,bDelete:!0},evt:24616})}}reopenQuestion(u){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!0},evt:24590})}}askQuestion(u,h){let v=arguments.length>2&&void 0!==arguments[2]&&arguments[2],E=arguments.length>3?arguments[3]:void 0;const I=Xs();return{seq:this.sendMessageToRwg({body:{id:I,text:u,isAnonymous:v,bAllowAttendeeViewAllQuestion:E,name:h},evt:24592}),questionId:I}}upOrDownVote(u,h){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bUpVote:h},evt:24598})}}rename(u,h){return{seq:this.sendMessageToRwg({body:{jid:u,displayName:h},evt:24600})}}setSkinTome(u){return{seq:this.sendMessageToRwg({body:{skinTone:u},evt:24618})}}}return s.xmppInstance=null,s})();var xg=Object.freeze({__proto__:null,startIdleTimerEpic:(s,l)=>s.pipe(wr(`${Ts}`),Fn(l),ln(u=>{let[,h]=u;return void 0!==h.meeting.zlkJwtToken}),kn(()=>(Xf&&Xf.complete(),Xf=new Be,Xv=V_(6e4).pipe(ht(()=>performance.now())).subscribe(Xf),Xf.pipe(ht(u=>Xm(u)))))),terminateIdleTimerEpic:s=>s.pipe(wr(`${Bs}`)).pipe(Zn(()=>{Xf&&(Xf.complete(),Xv.unsubscribe())}),Pr(Ht)),idleCheckingEpic:(s,l)=>s.pipe(wr(`${Xm}`),Fn(l),Pn(u=>{var h;let[v,E]=u;const{meeting:{idleStartTime:I,sessionIdleTimeoutMins:R,isOriginHost:N},participants:{attendeesList:L,xmppAttendeeList:V},recording:O,breakoutRoom:X}=E,ee=v.payload,re=[];if(1===L.length&&0===V.length&&(null==X||null===(h=X.currentRoom)||void 0===h?void 0:h.status)!==rr.InRoom&&O?.cmrStatus!==ea.Start)if(I){const ne=N&&Y0(L[0].userRole)?R:40;ee-I>60*ne*1e3&&(console.warn(`No active for ${ne} minutes, will end the session.`),re.push($m()),ua(500).subscribe(()=>{bg()}))}else re.push(eg(ee));else re.push(eg(void 0));return En(re)})),resetIdleStartTimeEpic:(s,l)=>s.pipe(wr(`${lc}`),ln(u=>[Mo,zc].includes(u.payload.evt)&&void 0!==l.value.meeting.idleStartTime),Nt(Qu),Pn(()=>{var u;const{participants:{attendeesList:h,xmppAttendeeList:v},recording:E,breakoutRoom:I}=l.value,R=[];return(h.length>1||v.length>0||E?.cmrStatus===ea.Start||(null==I||null===(u=I.currentRoom)||void 0===u?void 0:u.status)===rr.InRoom)&&R.push(eg(void 0)),En(R)})),resetIdleStartTimeAfterLeaveMeetingEpic:s=>s.pipe(wr(`${Us}`,`${$m}`),Hu(eg(void 0)))});const WV=ji.createAgent();var KV=Object.freeze({__proto__:null,startReportFailoverReasonEpic:(s,l)=>s.pipe(wr(`${Gc}`),kn(()=>{const u=0===l.value.meeting.failover.joinMeetingSuccessTimestamp&&!!Ur.get(So.WebclientZoomId);return s.pipe(wr(`${Ts}`),ti(1),Pn(()=>{const h=[],v=Ur.get(So.WebclientFailoverCount)||0;let{meeting:{failover:{count:E,reason:I,interval:R}}}=l.value;const{meeting:{pingRWCTimestamp:N}}=l.value;u&&(E=v+1,I=Rs.RefreshPage,R=0,Ur.set(So.WebclientFailoverCount,E,fi.SessionStorage),h.push(Ep({count:E,reason:I,interval:R})));const L=performance.now();let V=`WCL_M, JMCT(${L-N})`;return E>0&&I!==Rs.NormalCase&&(V=`${V},FAILOVER(${E},${I},${(R/1e3).toFixed(1)})`),WV.sendRWGConnectionPerformance(V),h.push(fc(),eP(L)),En(h)}))})),recordFailoverReasonEpic:(s,l)=>s.pipe(wr(`${io}`),Pn(u=>{const{payload:h}=u,{meeting:{failover:{joinMeetingSuccessTimestamp:v,isCurrentFailoverRecorded:E}}}=l.value,I=[];if(!E){let R=Ur.get(So.WebclientFailoverCount)||0;h!==Rs.NormalCase&&(R+=1,Ur.set(So.WebclientFailoverCount,R,fi.SessionStorage));const N=performance.now()-v;I.push(Ep({reason:h,count:R,interval:N}))}return En(I)}))});let Tc=null;var oB=Object.freeze({__proto__:null,startStayAwakeEpic:(s,l)=>s.pipe(wr(`${Ts}`),Fn(l),ln(u=>{let[,h]=u;return!!h.meeting.stayAwake}),Zn(U(function*(){try{Tc&&Tc.release().then(()=>{Tc=null}),"wakeLock"in navigator&&((yh()||Ml())&&(yield bi(is(document,"click").pipe(ti(1)),is(document,"touchend").pipe(ti(1))).toPromise()),Tc=yield navigator.wakeLock.request("screen"),Tc.addEventListener("release",()=>{}))}catch{}})),kn(()=>is(document,"visibilitychange").pipe(Pn(U(function*(){"visible"===document.visibilityState?(Tc&&Tc.release().then(()=>{Tc=null}),"wakeLock"in navigator&&((yh()||Ml())&&(yield bi(is(document,"click").pipe(ti(1)),is(document,"touchend").pipe(ti(1))).toPromise()),Tc=yield navigator.wakeLock.request("screen"))):Tc&&Tc.release().then(()=>{Tc=null})})),Pr(Ht)))),cancelStayAwakeEpic:s=>s.pipe(wr(`${Bs}`)).pipe(Zn(()=>{Tc&&Tc.release().then(()=>{Tc=null})}),Pr(Ht))}),dM=typeof window<"u"&&window,sB=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,ds=typeof global<"u"&&global,ru=dM||ds||sB;function aB(s,l){return void 0===l&&(l=null),new Lg({method:"GET",url:s,headers:l})}function cB(s,l,u){return new Lg({method:"POST",url:s,body:l,headers:u})}function $1(s,l){return new Lg({method:"DELETE",url:s,headers:l})}function pM(s,l,u){return new Lg({method:"PUT",url:s,body:l,headers:u})}function UC(s,l,u){return new Lg({method:"PATCH",url:s,body:l,headers:u})}!function(){if(!ru)throw new Error("RxJS could not find any global context (window, self, global)")}();var hM=ht(function(s,l){return s.response});function Zv(s,l){return hM(new Lg({method:"GET",url:s,responseType:"json",headers:l}))}var Lg=function(s){function l(h){var v=s.call(this)||this,E={async:!0,createXHR:function(){return this.crossDomain?function(){if(ru.XMLHttpRequest)return new ru.XMLHttpRequest;if(ru.XDomainRequest)return new ru.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(ru.XMLHttpRequest)return new ru.XMLHttpRequest;var R=void 0;try{for(var N=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],L=0;L<3;L++)try{if(new ru.ActiveXObject(R=N[L]))break}catch{}return new ru.ActiveXObject(R)}catch{throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof h)E.url=h;else for(var I in h)h.hasOwnProperty(I)&&(E[I]=h[I]);return v.request=E,v}var u;return le(l,s),l.prototype._subscribe=function(h){return new VC(h,this.request)},l.create=((u=function(h){return new l(h)}).get=aB,u.post=cB,u.delete=$1,u.put=pM,u.patch=UC,u.getJSON=Zv,u),l}(Pe),VC=function(s){function l(u,h){var v=s.call(this,u)||this;v.request=h,v.done=!1;var E=h.headers=h.headers||{};return h.crossDomain||v.getHeader(E,"X-Requested-With")||(E["X-Requested-With"]="XMLHttpRequest"),v.getHeader(E,"Content-Type")||ru.FormData&&h.body instanceof ru.FormData||void 0===h.body||(E["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),h.body=v.serializeBody(h.body,v.getHeader(h.headers,"Content-Type")),v.send(),v}return le(l,s),l.prototype.next=function(u){this.done=!0;var h,v=this,E=v.xhr,I=v.request,R=v.destination;try{h=new fM(u,E,I)}catch(N){return R.error(N)}R.next(h)},l.prototype.send=function(){var u=this.request,h=this.request,v=h.user,E=h.method,I=h.url,R=h.async,N=h.password,L=h.headers,V=h.body;try{var O=this.xhr=u.createXHR();this.setupEvents(O,u),v?O.open(E,I,R,v,N):O.open(E,I,R),R&&(O.timeout=u.timeout,O.responseType=u.responseType),"withCredentials"in O&&(O.withCredentials=!!u.withCredentials),this.setHeaders(O,L),V?O.send(V):O.send()}catch(X){this.error(X)}},l.prototype.serializeBody=function(u,h){if(!u||"string"==typeof u||ru.FormData&&u instanceof ru.FormData)return u;if(h){var v=h.indexOf(";");-1!==v&&(h=h.substring(0,v))}switch(h){case"application/x-www-form-urlencoded":return Object.keys(u).map(function(E){return encodeURIComponent(E)+"="+encodeURIComponent(u[E])}).join("&");case"application/json":return JSON.stringify(u);default:return u}},l.prototype.setHeaders=function(u,h){for(var v in h)h.hasOwnProperty(v)&&u.setRequestHeader(v,h[v])},l.prototype.getHeader=function(u,h){for(var v in u)if(v.toLowerCase()===h.toLowerCase())return u[v]},l.prototype.setupEvents=function(u,h){var v,E,I=h.progressSubscriber;function R(V){var O,ee=R.subscriber,re=R.progressSubscriber,ne=R.request;re&&re.error(V);try{O=new Bg(this,ne)}catch(fe){O=fe}ee.error(O)}function N(V){}function L(V){var X=L.subscriber,ee=L.progressSubscriber,re=L.request;if(4===this.readyState){var ne=1223===this.status?204:this.status;if(0===ne&&(ne=("text"===this.responseType?this.response||this.responseText:this.response)?200:0),ne<400)ee&&ee.complete(),X.next(V),X.complete();else{ee&&ee.error(V);var ve=void 0;try{ve=new X1("ajax error "+ne,this,re)}catch(Le){ve=Le}X.error(ve)}}}u.ontimeout=R,R.request=h,R.subscriber=this,R.progressSubscriber=I,u.upload&&"withCredentials"in u&&(I&&(v=function(V){v.progressSubscriber.next(V)},ru.XDomainRequest?u.onprogress=v:u.upload.onprogress=v,v.progressSubscriber=I),u.onerror=E=function(V){var O,ee=E.progressSubscriber,re=E.subscriber,ne=E.request;ee&&ee.error(V);try{O=new X1("ajax error",this,ne)}catch(fe){O=fe}re.error(O)},E.request=h,E.subscriber=this,E.progressSubscriber=I),u.onreadystatechange=N,N.subscriber=this,N.progressSubscriber=I,N.request=h,u.onload=L,L.subscriber=this,L.progressSubscriber=I,L.request=h},l.prototype.unsubscribe=function(){var h=this.xhr;!this.done&&h&&4!==h.readyState&&"function"==typeof h.abort&&h.abort(),s.prototype.unsubscribe.call(this)},l}(be),fM=function(s,l,u){this.originalEvent=s,this.xhr=l,this.request=u,this.status=l.status,this.responseType=l.responseType||u.responseType,this.response=Z1(this.responseType,l)},X1=function(){function s(l,u,h){return Error.call(this),this.message=l,this.name="AjaxError",this.xhr=u,this.request=h,this.status=u.status,this.responseType=u.responseType||h.responseType,this.response=Z1(this.responseType,u),this}return s.prototype=Object.create(Error.prototype),s}();function Z1(s,l){switch(s){case"json":return"response"in(u=l)?u.responseType?u.response:JSON.parse(u.response||u.responseText||"null"):JSON.parse(u.responseText||"null");case"xml":return l.responseXML;default:return"response"in l?l.response:l.responseText}var u}var Mp,Bg=function(s,l){return X1.call(this,"ajax timeout",s,l),this.name="AjaxTimeoutError",this},ps=Lg.create,Np=new Uint8Array(16);function uB(){if(!Mp&&!(Mp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mp(Np)}for(var po,Si,iu,Vs,mM=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,La=[],eR=0;eR<256;++eR)La.push((eR+256).toString(16).substr(1));function jC(s,l,u){var h=(s=s||{}).random||(s.rng||uB)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,l){u=u||0;for(var v=0;v<16;++v)l[u+v]=h[v];return l}return function(E){var N,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,R=(La[E[I+0]]+La[E[I+1]]+La[E[I+2]]+La[E[I+3]]+"-"+La[E[I+4]]+La[E[I+5]]+"-"+La[E[I+6]]+La[E[I+7]]+"-"+La[E[I+8]]+La[E[I+9]]+"-"+La[E[I+10]]+La[E[I+11]]+La[E[I+12]]+La[E[I+13]]+La[E[I+14]]+La[E[I+15]]).toLowerCase();if("string"!=typeof(N=R)||!mM.test(N))throw TypeError("Stringified UUID is invalid");return R}(h)}(function(s){s[s.PLAIN=0]="PLAIN",s[s.RSA=1]="RSA",s[s.AESGCM256=2]="AESGCM256"})(po||(po={})),function(s){s[s.info=0]="info",s[s.debug=1]="debug",s[s.log=2]="log",s[s.warn=3]="warn",s[s.error=4]="error"}(Si||(Si={})),function(s){s[s.PROTECT_LOCAL_KEY=0]="PROTECT_LOCAL_KEY"}(iu||(iu={})),function(s){s.beforeInit="beforeInit",s.afterInit="afterInit",s.beforeLog="beforeLog",s.hitSizeLimit="hitSizeLimit",s.afterLog="afterLog",s.beforeReport="beforeReport",s.afterReport="afterReport"}(Vs||(Vs={}));class QC{constructor(){}}var HC,rb={exports:{}},Zf={exports:{}},lB=Lk(Object.freeze({__proto__:null,default:{}}));Zf.exports=(HC=HC||function(s,l){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&void 0!==uh&&uh.crypto&&(u=uh.crypto),!u)try{u=lB}catch{}var h=function(){if(u){if("function"==typeof u.getRandomValues)try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof u.randomBytes)try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},v=Object.create||function(){function ne(){}return function(fe){var ve;return ne.prototype=fe,ve=new ne,ne.prototype=null,ve}}(),E={},I=E.lib={},R=I.Base={extend:function(ne){var fe=v(this);return ne&&fe.mixIn(ne),fe.hasOwnProperty("init")&&this.init!==fe.init||(fe.init=function(){fe.$super.init.apply(this,arguments)}),fe.init.prototype=fe,fe.$super=this,fe},create:function(){var ne=this.extend();return ne.init.apply(ne,arguments),ne},init:function(){},mixIn:function(ne){for(var fe in ne)ne.hasOwnProperty(fe)&&(this[fe]=ne[fe]);ne.hasOwnProperty("toString")&&(this.toString=ne.toString)},clone:function(){return this.init.prototype.extend(this)}},N=I.WordArray=R.extend({init:function(ne,fe){ne=this.words=ne||[],this.sigBytes=fe??4*ne.length},toString:function(ne){return(ne||V).stringify(this)},concat:function(ne){var fe=this.words,ve=ne.words,Le=this.sigBytes,Qe=ne.sigBytes;if(this.clamp(),Le%4)for(var ze=0;ze<Qe;ze++)fe[Le+ze>>>2]|=(ve[ze>>>2]>>>24-ze%4*8&255)<<24-(Le+ze)%4*8;else for(var lt=0;lt<Qe;lt+=4)fe[Le+lt>>>2]=ve[lt>>>2];return this.sigBytes+=Qe,this},clamp:function(){var ne=this.words,fe=this.sigBytes;ne[fe>>>2]&=4294967295<<32-fe%4*8,ne.length=s.ceil(fe/4)},clone:function(){var ne=R.clone.call(this);return ne.words=this.words.slice(0),ne},random:function(ne){for(var fe=[],ve=0;ve<ne;ve+=4)fe.push(h());return new N.init(fe,ne)}}),L=E.enc={},V=L.Hex={stringify:function(ne){for(var fe=ne.words,ve=ne.sigBytes,Le=[],Qe=0;Qe<ve;Qe++){var ze=fe[Qe>>>2]>>>24-Qe%4*8&255;Le.push((ze>>>4).toString(16)),Le.push((15&ze).toString(16))}return Le.join("")},parse:function(ne){for(var fe=ne.length,ve=[],Le=0;Le<fe;Le+=2)ve[Le>>>3]|=parseInt(ne.substr(Le,2),16)<<24-Le%8*4;return new N.init(ve,fe/2)}},O=L.Latin1={stringify:function(ne){for(var fe=ne.words,ve=ne.sigBytes,Le=[],Qe=0;Qe<ve;Qe++)Le.push(String.fromCharCode(fe[Qe>>>2]>>>24-Qe%4*8&255));return Le.join("")},parse:function(ne){for(var fe=ne.length,ve=[],Le=0;Le<fe;Le++)ve[Le>>>2]|=(255&ne.charCodeAt(Le))<<24-Le%4*8;return new N.init(ve,fe)}},X=L.Utf8={stringify:function(ne){try{return decodeURIComponent(escape(O.stringify(ne)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(ne){return O.parse(unescape(encodeURIComponent(ne)))}},ee=I.BufferedBlockAlgorithm=R.extend({reset:function(){this._data=new N.init,this._nDataBytes=0},_append:function(ne){"string"==typeof ne&&(ne=X.parse(ne)),this._data.concat(ne),this._nDataBytes+=ne.sigBytes},_process:function(ne){var fe,ve=this._data,Le=ve.words,Qe=ve.sigBytes,ze=this.blockSize,ft=Qe/(4*ze),lt=(ft=ne?s.ceil(ft):s.max((0|ft)-this._minBufferSize,0))*ze,tt=s.min(4*lt,Qe);if(lt){for(var St=0;St<lt;St+=ze)this._doProcessBlock(Le,St);fe=Le.splice(0,lt),ve.sigBytes-=tt}return new N.init(fe,tt)},clone:function(){var ne=R.clone.call(this);return ne._data=this._data.clone(),ne},_minBufferSize:0});I.Hasher=ee.extend({cfg:R.extend(),init:function(ne){this.cfg=this.cfg.extend(ne),this.reset()},reset:function(){ee.reset.call(this),this._doReset()},update:function(ne){return this._append(ne),this._process(),this},finalize:function(ne){return ne&&this._append(ne),this._doFinalize()},blockSize:16,_createHelper:function(ne){return function(fe,ve){return new ne.init(ve).finalize(fe)}},_createHmacHelper:function(ne){return function(fe,ve){return new re.HMAC.init(ne,ve).finalize(fe)}}});var re=E.algo={};return E}(Math),HC),rb.exports=function(s){return s.enc.Utf8}(Zf.exports);var GC={exports:{}};GC.exports=function(s){return u=s.lib.WordArray,s.enc.Base64={stringify:function(v){var E=v.words,I=v.sigBytes,R=this._map;v.clamp();for(var N=[],L=0;L<I;L+=3)for(var V=(E[L>>>2]>>>24-L%4*8&255)<<16|(E[L+1>>>2]>>>24-(L+1)%4*8&255)<<8|E[L+2>>>2]>>>24-(L+2)%4*8&255,O=0;O<4&&L+.75*O<I;O++)N.push(R.charAt(V>>>6*(3-O)&63));var X=R.charAt(64);if(X)for(;N.length%4;)N.push(X);return N.join("")},parse:function(v){var E=v.length,I=this._map,R=this._reverseMap;if(!R){R=this._reverseMap=[];for(var N=0;N<I.length;N++)R[I.charCodeAt(N)]=N}var L=I.charAt(64);if(L){var V=v.indexOf(L);-1!==V&&(E=V)}return function h(v,E,I){for(var R=[],N=0,L=0;L<E;L++)if(L%4){var V=I[v.charCodeAt(L-1)]<<L%4*2|I[v.charCodeAt(L)]>>>6-L%4*2;R[N>>>2]|=V<<24-N%4*8,N++}return u.create(R,N)}(v,E,R)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},s.enc.Base64;var u}(Zf.exports);var xp=function(s,l,u,h){return new(u||(u=Promise))(function(v,E){function I(L){try{N(h.next(L))}catch(V){E(V)}}function R(L){try{N(h.throw(L))}catch(V){E(V)}}function N(L){var V;L.done?v(L.value):(V=L.value,V instanceof u?V:new u(function(O){O(V)})).then(I,R)}N((h=h.apply(s,l||[])).next())})};const gM=s=>{const l=GC.exports.parse(s);return rb.exports.stringify(l)},WC=s=>{for(var l=s.length,u=s.length-1;u>=0;u--){var h=s.charCodeAt(u);h>127&&h<=2047?l++:h>2047&&h<=65535&&(l+=2),h>=56320&&h<=57343&&u--}return l};function ib(s){const l=new ArrayBuffer(s.length),u=new Uint8Array(l);for(let h=0,v=s.length;h<v;h++)u[h]=s.charCodeAt(h);return l}function eA(s){for(var l="",u=new Uint8Array(s),h=u.byteLength,v=0;v<h;v++)l+=String.fromCharCode(u[v]);return self.btoa(l)}function _M(s){for(var l=self.atob(s),u=l.length,h=new Uint8Array(u),v=0;v<u;v++)h[v]=l.charCodeAt(v);return h.buffer}const mn=()=>xp(void 0,void 0,void 0,function*(){return yield self.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}),Gd=(s,l,u)=>xp(void 0,void 0,void 0,function*(){try{return yield self.crypto.subtle.encrypt({name:"AES-GCM",iv:u},l,s)}catch(h){throw h}}),vi=(s,l,u)=>xp(void 0,void 0,void 0,function*(){try{return yield self.crypto.subtle.decrypt({name:"AES-GCM",iv:u},l,s)}catch(h){throw h}}),ob=(s,l)=>xp(void 0,void 0,void 0,function*(){try{return yield self.crypto.subtle.decrypt({name:"RSA-OAEP"},l,s)}catch(u){throw u}}),tR=(s,l,u)=>xp(void 0,void 0,void 0,function*(){return new Promise((h,v)=>{requestAnimationFrame(()=>xp(void 0,void 0,void 0,function*(){var E;try{const I=null===(E=l?.algorithm)||void 0===E?void 0:E.name;let R;if("RSA-OAEP"===I?R=ob:"AES-GCM"===I&&(R=vi),!R)throw new Error("Unsupported encrypt key type");if("string"==typeof s){const N=new TextEncoder,L=yield R(N.encode(s),l,u);h(L)}else{const N=yield R(s,l,u);h(N)}}catch(I){v(I)}}))})}),tA=(s,l)=>{const u="string"==typeof s?ib(s):s;return self.crypto.subtle.encrypt({name:"RSA-OAEP"},l,u)},KC=(s,l,u)=>xp(void 0,void 0,void 0,function*(){return new Promise((h,v)=>{requestAnimationFrame(()=>xp(void 0,void 0,void 0,function*(){var E;const I=null===(E=l?.algorithm)||void 0===E?void 0:E.name;let R;if("RSA-OAEP"===I?R=tA:"AES-GCM"===I&&(R=Gd),!R)throw new Error("Unsupported encrypt key type");if("string"==typeof s){const N=new TextEncoder,L=yield R(N.encode(s),l,u);h(L)}else{const N=yield R(s,l,u);h(N)}}))})}),nR={},Wl=(s,l)=>{nR[l]=s},vM=nR;var rR=function(s,l,u,h){return new(u||(u=Promise))(function(v,E){function I(L){try{N(h.next(L))}catch(V){E(V)}}function R(L){try{N(h.throw(L))}catch(V){E(V)}}function N(L){var V;L.done?v(L.value):(V=L.value,V instanceof u?V:new u(function(O){O(V)})).then(I,R)}N((h=h.apply(s,l||[])).next())})};const iR=(s,l,u,h)=>rR(void 0,void 0,void 0,function*(){try{if(!s||!l||!u)return null;const v=yield self.crypto.subtle.decrypt({name:"AES-GCM",iv:u},l,s);return String.fromCharCode.apply(null,new Uint8Array(v))}catch(v){throw v}}),dB={decryptAESGCM256:iR,bulkDecryptAESGCM256:s=>rR(void 0,void 0,void 0,function*(){return yield Promise.all(s.map(l=>iR(...l)))})};var AM=function(s,l,u,h){return new(u||(u=Promise))(function(v,E){function I(L){try{N(h.next(L))}catch(V){E(V)}}function R(L){try{N(h.throw(L))}catch(V){E(V)}}function N(L){var V;L.done?v(L.value):(V=L.value,V instanceof u?V:new u(function(O){O(V)})).then(I,R)}N((h=h.apply(s,l||[])).next())})};const yM=s=>{let l=0;return l+=WC(s.message),s.tags.forEach(u=>{l+=WC(u)}),l},sb={success:!1,codecWorker:null},ab=[],pB=()=>AM(void 0,void 0,void 0,function*(){return sb.success||(yield new Promise((l,u)=>{ab.push(()=>{l(null)})})),sb.codecWorker});class EM{constructor(l){this.uuid=self.crypto.randomUUID();const{databaseName:u,maxSize:h,publicKey:v,reportUrl:E,plugins:I,idbManager:R,logManager:N,currentSize:L,externalKeys:V}=l;sb.codecWorker=dB,ab.forEach(X=>{X()}),sb.success=!0,console.log("codec worker init success"),this.databaseName=u,this.maxSize=h,this.publicKey=v??"",this.reportUrl=E??"",this.plugins=I??[],this.idbManager=R,this.logManager=N,this.currentSize=L??0,this.getCodecWorker=pB,this.externalKeys=V,this.commonMethods=Object.assign({},vM)}getLocalAESGCM256Key(){var l;return AM(this,void 0,void 0,function*(){if(this.localAESGCM256Key)return this.localAESGCM256Key;this.localAESGCM256Key=yield mn();const u=this.externalKeys?null===(l=this.externalKeys.filter(h=>h.usage===iu.PROTECT_LOCAL_KEY)[0])||void 0===l?void 0:l.key:void 0;return yield this.idbManager.saveAESGCM256Key(this.uuid,this.localAESGCM256Key,u),this.localAESGCM256Key})}updateCurrentSize(l){var u;let h=null!==(u=this.currentSize)&&void 0!==u?u:0;if(l instanceof Map)for(const[v,E]of l)h+=yM(E);else h+=yM(l);return this.currentSize=h,h>=this.maxSize}}const nA=(...s)=>{const l={},u=[];for(const v of s)v.forEach(E=>{l[E.id]||(l[E.id]=!0,u.push(E))});const h=new Map;return u.sort((v,E)=>v?.id-E?.id).forEach(v=>{h.set(v.id,v)}),h},rA=(s,l)=>{const u=new Map;return l.forEach(h=>{s(h)&&u.set(h.id,h)}),u};class hB{constructor(){this.getStore=()=>({byTag:Object.assign({},this.store.byTag),byTime:new Map(this.store.byTime)}),this.pushByTime=l=>{for(const u of l)this.store.byTime.set(u.id,u)},this.pushByTag=l=>{l.forEach(u=>{const h=u.tags;Array.isArray(h)&&h.forEach(v=>{this.store.byTag[v]||(this.store.byTag[v]=new Map),this.store.byTag[v].set(u.id,u)})})},this.addLog=l=>{let u=l;Array.isArray(l)||(u=[l]),this.pushByTime(u),this.pushByTag(u)},this.syncFromIDB=l=>{return u=this,void 0,E=function*(){const u=yield l.getAllLogs();this.addLog(u)},new((v=void 0)||(v=Promise))(function(I,R){function N(O){try{V(E.next(O))}catch(X){R(X)}}function L(O){try{V(E.throw(O))}catch(X){R(X)}}function V(O){var X;O.done?I(O.value):(X=O.value,X instanceof v?X:new v(function(ee){ee(X)})).then(N,L)}V((E=E.apply(u,[])).next())});var u,v,E},this.reset=()=>{this.store={byTag:{},byTime:new Map}},this.deleteLogs=l=>{for(const u of l){const h=this.store.byTime.get(u);if(!h)continue;const{tags:v}=h;for(const E of v)this.store.byTag[E].delete(u);this.store.byTime.delete(u)}},this.filterStore=l=>{const u=((v,E)=>{if(!E)return v.byTime;if("string"==typeof E)return v.byTag[E]||new Map;if(Array.isArray(E)){if(E.every(I=>"string"==typeof I))return nA(...E.map(I=>v.byTag[I]).filter(I=>Boolean(I)))}else{if("function"==typeof E)return rA(E,v.byTime);if("object"==typeof E)if(E.tags&&E.filter){if("string"==typeof E.tags)return rA(E.filter,v.byTag[E.tags]);if(Array.isArray(E.tags)&&E.tags.every(I=>"string"==typeof I))return nA(...E.tags.map(I=>{const R=v.byTag[I];return R?rA(E.filter,R):new Map}))}else{if(E.filter)return rA(E.filter,v.byTime);if(E.tags){if("string"==typeof E)return v.byTag[E]||new Map;if(Array.isArray(E)&&E.every(I=>"string"==typeof I))return nA(...E.map(I=>v.byTag[I]))}}else console.error("Wrong filter type")}return new Map})(this.store,l),h=new Map;for(const[v,E]of u){const I=E.encryptMode!==po.AESGCM256,R=Object.assign(Object.assign({},E),{message:I?gM(E.message):E.message});h.set(v,R)}return h},this.store={byTag:{},byTime:new Map}}}function Vh(s,l,u){const h=s.plugins;if(!Array.isArray(h))return u;let v=u;return h.forEach(E=>{const I=E[l];if("function"==typeof I){const R=I(s,v);R&&(v=R)}}),v}const bM=(s,l,u,h,v,E={})=>{return void 0,void 0,L=function*(){const{noCache:I,extraProperties:R={}}=E,N=((V,O,X,ee,re,ne)=>{const fe=Array.isArray(O)?O:[O],ve=Date.now();return Object.assign({message:V,logLevel:X,tags:fe,encryptMode:ee,timestamp:ve,laplaceSessionId:re},ne)})(`${l}`,u,h,v,s.uuid,R),L=Vh(s,Vs.beforeLog,N);if(I)Vh(s,Vs.afterLog,N);else{const{idbManager:V,logManager:O}=s,X=yield V.makeNextId();if(v===po.AESGCM256){const re=yield s.getLocalAESGCM256Key(),ne=yield KC(L.message,re,new Uint8Array(16));L.message=eA(ne)}else L.message=(re=>{const ne=rb.exports.parse(re);return GC.exports.stringify(ne)})(L.message);const ee=Object.assign(Object.assign({},L),{id:X});s.updateCurrentSize(ee)&&Vh(s,Vs.hitSizeLimit,ee),O.addLog(ee),V.addLog(ee),Vh(s,Vs.afterLog,ee)}},new((N=void 0)||(N=Promise))(function(V,O){function X(ne){try{re(L.next(ne))}catch(fe){O(fe)}}function ee(ne){try{re(L.throw(ne))}catch(fe){O(fe)}}function re(ne){var fe;ne.done?V(ne.value):(fe=ne.value,fe instanceof N?fe:new N(function(ve){ve(fe)})).then(X,ee)}re((L=L.apply(undefined,[])).next())});var N,L};Wl(bM,"commonLog");var SM={},ra=Uint8Array,ou=Uint16Array,em=Uint32Array,cb=new ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lp=new ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Fg=new ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oR=function(s,l){for(var u=new ou(31),h=0;h<31;++h)u[h]=l+=1<<s[h-1];var v=new em(u[30]);for(h=1;h<30;++h)for(var E=u[h];E<u[h+1];++E)v[E]=E-u[h]<<5|h;return[u,v]},ub=oR(cb,2),sR=ub[0],tm=ub[1];sR[28]=258,tm[258]=28;for(var Ug=oR(Lp,0),lb=Ug[0],iA=Ug[1],nm=new ou(32768),Bo=0;Bo<32768;++Bo){var Tu=(43690&Bo)>>>1|(21845&Bo)<<1;Tu=(61680&(Tu=(52428&Tu)>>>2|(13107&Tu)<<2))>>>4|(3855&Tu)<<4,nm[Bo]=((65280&Tu)>>>8|(255&Tu)<<8)>>>1}var Wd=function(s,l,u){for(var h=s.length,v=0,E=new ou(l);v<h;++v)s[v]&&++E[s[v]-1];var I,R=new ou(l);for(v=0;v<l;++v)R[v]=R[v-1]+E[v-1]<<1;if(u){I=new ou(1<<l);var N=15-l;for(v=0;v<h;++v)if(s[v])for(var L=v<<4|s[v],V=l-s[v],O=R[s[v]-1]++<<V,X=O|(1<<V)-1;O<=X;++O)I[nm[O]>>>N]=L}else for(I=new ou(h),v=0;v<h;++v)s[v]&&(I[v]=nm[R[s[v]-1]++]>>>15-s[v]);return I},Bp=new ra(288);for(Bo=0;Bo<144;++Bo)Bp[Bo]=8;for(Bo=144;Bo<256;++Bo)Bp[Bo]=9;for(Bo=256;Bo<280;++Bo)Bp[Bo]=7;for(Bo=280;Bo<288;++Bo)Bp[Bo]=8;var dl=new ra(32);for(Bo=0;Bo<32;++Bo)dl[Bo]=5;var fB=Wd(Bp,9,0),su=Wd(Bp,9,1),aR=Wd(dl,5,0),zC=Wd(dl,5,1),YC=function(s){for(var l=s[0],u=1;u<s.length;++u)s[u]>l&&(l=s[u]);return l},Fp=function(s,l,u){var h=l/8|0;return(s[h]|s[h+1]<<8)>>(7&l)&u},qn=function(s,l){var u=l/8|0;return(s[u]|s[u+1]<<8|s[u+2]<<16)>>(7&l)},oA=function(s){return(s+7)/8|0},db=function(s,l,u){(null==l||l<0)&&(l=0),(null==u||u>s.length)&&(u=s.length);var h=new(2==s.BYTES_PER_ELEMENT?ou:4==s.BYTES_PER_ELEMENT?em:ra)(u-l);return h.set(s.subarray(l,u)),h},Vg=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Rc=function(s,l,u){var h=new Error(l||Vg[s]);if(h.code=s,Error.captureStackTrace&&Error.captureStackTrace(h,Rc),!u)throw h;return h},Kd=function(s,l,u){var h=l/8|0;s[h]|=u<<=7&l,s[h+1]|=u>>>8},jh=function(s,l,u){var h=l/8|0;s[h]|=u<<=7&l,s[h+1]|=u>>>8,s[h+2]|=u>>>16},Kl=function(s,l){for(var u=[],h=0;h<s.length;++h)s[h]&&u.push({s:h,f:s[h]});var v=u.length,E=u.slice();if(!v)return[sA,0];if(1==v){var I=new ra(u[0].s+1);return I[u[0].s]=1,[I,1]}u.sort(function(ft,lt){return ft.f-lt.f}),u.push({s:-1,f:25001});var R=u[0],N=u[1],L=0,V=1,O=2;for(u[0]={s:-1,f:R.f+N.f,l:R,r:N};V!=v-1;)R=u[u[L].f<u[O].f?L++:O++],N=u[L!=V&&u[L].f<u[O].f?L++:O++],u[V++]={s:-1,f:R.f+N.f,l:R,r:N};var X=E[0].s;for(h=1;h<v;++h)E[h].s>X&&(X=E[h].s);var ee=new ou(X+1),re=ao(u[V-1],ee,0);if(re>l){h=0;var ne=0,fe=re-l,ve=1<<fe;for(E.sort(function(ft,lt){return ee[lt.s]-ee[ft.s]||ft.f-lt.f});h<v;++h){var Le=E[h].s;if(!(ee[Le]>l))break;ne+=ve-(1<<re-ee[Le]),ee[Le]=l}for(ne>>>=fe;ne>0;){var Qe=E[h].s;ee[Qe]<l?ne-=1<<l-ee[Qe]++-1:++h}for(;h>=0&&ne;--h){var ze=E[h].s;ee[ze]==l&&(--ee[ze],++ne)}re=l}return[new ra(ee),re]},ao=function(s,l,u){return-1==s.s?Math.max(ao(s.l,l,u+1),ao(s.r,l,u+1)):l[s.s]=u},cR=function(s){for(var l=s.length;l&&!s[--l];);for(var u=new ou(++l),h=0,v=s[0],E=1,I=function(N){u[h++]=N},R=1;R<=l;++R)if(s[R]==v&&R!=l)++E;else{if(!v&&E>2){for(;E>138;E-=138)I(32754);E>2&&(I(E>10?E-11<<5|28690:E-3<<5|12305),E=0)}else if(E>3){for(I(v),--E;E>6;E-=6)I(8304);E>2&&(I(E-3<<5|8208),E=0)}for(;E--;)I(v);E=1,v=s[R]}return[u.subarray(0,h),l]},rm=function(s,l){for(var u=0,h=0;h<l.length;++h)u+=s[h]*l[h];return u},Up=function(s,l,u){var h=u.length,v=oA(l+2);s[v]=255&h,s[v+1]=h>>>8,s[v+2]=255^s[v],s[v+3]=255^s[v+1];for(var E=0;E<h;++E)s[v+E+4]=u[E];return 8*(v+4+h)},pb=function(s,l,u,h,v,E,I,R,N,L,V){Kd(l,V++,u),++v[256];for(var O=Kl(v,15),X=O[0],ee=O[1],re=Kl(E,15),ne=re[0],fe=re[1],ve=cR(X),Le=ve[0],Qe=ve[1],ze=cR(ne),ft=ze[0],lt=ze[1],tt=new ou(19),St=0;St<Le.length;++St)tt[31&Le[St]]++;for(St=0;St<ft.length;++St)tt[31&ft[St]]++;for(var Zt=Kl(tt,7),ut=Zt[0],Ze=Zt[1],_e=19;_e>4&&!ut[Fg[_e-1]];--_e);var He,ct,st,Ne,Jt=L+5<<3,Ft=rm(v,Bp)+rm(E,dl)+I,yn=rm(v,X)+rm(E,ne)+I+14+3*_e+rm(tt,ut)+(2*tt[16]+3*tt[17]+7*tt[18]);if(Jt<=Ft&&Jt<=yn)return Up(l,V,s.subarray(N,N+L));if(Kd(l,V,1+(yn<Ft)),V+=2,yn<Ft){He=Wd(X,ee,0),ct=X,st=Wd(ne,fe,0),Ne=ne;var mr=Wd(ut,Ze,0);for(Kd(l,V,Qe-257),Kd(l,V+5,lt-1),Kd(l,V+10,_e-4),V+=14,St=0;St<_e;++St)Kd(l,V+3*St,ut[Fg[St]]);V+=3*_e;for(var tr=[Le,ft],Tr=0;Tr<2;++Tr){var gr=tr[Tr];for(St=0;St<gr.length;++St){var lr=31&gr[St];Kd(l,V,mr[lr]),V+=ut[lr],lr>15&&(Kd(l,V,gr[St]>>>5&127),V+=gr[St]>>>12)}}}else He=fB,ct=Bp,st=aR,Ne=dl;for(St=0;St<R;++St)if(h[St]>255){jh(l,V,He[257+(lr=h[St]>>>18&31)]),V+=ct[lr+257],lr>7&&(Kd(l,V,h[St]>>>23&31),V+=cb[lr]);var Hn=31&h[St];jh(l,V,st[Hn]),V+=Ne[Hn],Hn>3&&(jh(l,V,h[St]>>>5&8191),V+=Lp[Hn])}else jh(l,V,He[h[St]]),V+=ct[h[St]];return jh(l,V,He[256]),V+ct[256]},uR=new em([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),sA=new ra(0),lR=function(s,l,u,h,v,E){var I=s.length,R=new ra(h+I+5*(1+Math.ceil(I/7e3))+v),N=R.subarray(h,R.length-v),L=0;if(!l||I<8)for(var V=0;V<=I;V+=65535){var O=V+65535;O>=I&&(N[L>>3]=E),L=Up(N,L+1,s.subarray(V,O))}else{for(var X=uR[l-1],ee=X>>>13,re=8191&X,ne=(1<<u)-1,fe=new ou(32768),ve=new ou(ne+1),Le=Math.ceil(u/3),Qe=2*Le,ze=function($t){return(s[$t]^s[$t+1]<<Le^s[$t+2]<<Qe)&ne},ft=new em(25e3),lt=new ou(288),tt=new ou(32),St=0,Zt=0,ut=(V=0,0),Ze=0,_e=0;V<I;++V){var He=ze(V),ct=32767&V,st=ve[He];if(fe[ct]=st,ve[He]=ct,Ze<=V){var Ne=I-V;if((St>7e3||ut>24576)&&Ne>423){L=pb(s,N,0,ft,lt,tt,Zt,ut,_e,V-_e,L),ut=St=Zt=0,_e=V;for(var Jt=0;Jt<286;++Jt)lt[Jt]=0;for(Jt=0;Jt<30;++Jt)tt[Jt]=0}var Ft=2,yn=0,mr=re,tr=ct-st&32767;if(Ne>2&&He==ze(V-tr))for(var Tr=Math.min(ee,Ne)-1,gr=Math.min(32767,V),lr=Math.min(258,Ne);tr<=gr&&--mr&&ct!=st;){if(s[V+Ft]==s[V+Ft-tr]){for(var Hn=0;Hn<lr&&s[V+Hn]==s[V+Hn-tr];++Hn);if(Hn>Ft){if(Ft=Hn,yn=tr,Hn>Tr)break;var $r=Math.min(tr,Hn-2),eo=0;for(Jt=0;Jt<$r;++Jt){var co=V-tr+Jt+32768&32767,xt=co-fe[co]+32768&32767;xt>eo&&(eo=xt,st=co)}}}tr+=(ct=st)-(st=fe[ct])+32768&32767}if(yn){ft[ut++]=268435456|tm[Ft]<<18|iA[yn];var It=31&tm[Ft],et=31&iA[yn];Zt+=cb[It]+Lp[et],++lt[257+It],++tt[et],Ze=V+Ft,++St}else ft[ut++]=s[V],++lt[s[V]]}}L=pb(s,N,E,ft,lt,tt,Zt,ut,_e,V-_e,L),!E&&7&L&&(L=Up(N,L+1,sA))}return db(R,0,h+oA(L)+v)},hb=function(){for(var s=new Int32Array(256),l=0;l<256;++l){for(var u=l,h=9;--h;)u=(1&u&&-306674912)^u>>>1;s[l]=u}return s}(),dR=function(){var s=-1;return{p:function(l){for(var u=s,h=0;h<l.length;++h)u=hb[255&u^l[h]]^u>>>8;s=u},d:function(){return~s}}},pR=function(s,l,u,h,v){return lR(s,l.level??6,null==l.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):12+l.mem,u,h,!v)},jg=function(s,l,u){for(var h=s(),v=s.toString(),E=v.slice(v.indexOf("[")+1,v.lastIndexOf("]")).replace(/\s+/g,"").split(","),I=0;I<h.length;++I){var R=h[I],N=E[I];if("function"==typeof R){l+=";"+N+"=";var L=R.toString();if(R.prototype)if(-1!=L.indexOf("[native code]")){var V=L.indexOf(" ",8)+1;l+=L.slice(V,L.indexOf("(",V))}else for(var O in l+=L,R.prototype)l+=";"+N+".prototype."+O+"="+R.prototype[O].toString();else l+=L}else u[N]=R}return[l,u]},im=[],mB=function(){return[ra,ou,em,cb,Lp,Fg,tm,iA,fB,Bp,aR,dl,nm,uR,sA,Wd,Kd,jh,Kl,ao,cR,rm,Up,pb,oA,db,lR,pR,CM,hR]},gB=function(){return[fb,qC,Qg,dR,hb]},hR=function(s){return postMessage(s,[s.buffer])},Qg=function(s,l,u){for(;u;++l)s[l]=u,u>>>=8},fb=function(s,l){var u=l.filename;if(s[0]=31,s[1]=139,s[2]=8,s[8]=l.level<2?4:9==l.level?2:0,s[9]=3,0!=l.mtime&&Qg(s,4,Math.floor(new Date(l.mtime||Date.now())/1e3)),u){s[3]=8;for(var h=0;h<=u.length;++h)s[h+10]=u.charCodeAt(h)}},qC=function(s){return 10+(s.filename&&s.filename.length+1||0)};function CM(s,l){return pR(s,l||{},0,0)}function IM(s,l,u){return u||(u=l,l={}),"function"!=typeof u&&Rc(7),h=s,v=l,N=u,(L=function(V,O,X,ee){var re;if(!im[2]){for(var ne="",fe={},ve=V.length-1,Le=0;Le<ve;++Le)ne=(re=jg(V[Le],ne,fe))[0],fe=re[1];im[2]=jg(V[ve],ne,fe)}var ze,lt,tt,St,Zt,Qe=function(ze,ft){var lt={};for(var tt in ze)lt[tt]=ze[tt];for(var tt in ft)lt[tt]=ft[tt];return lt}({},im[2][1]);return ze=im[2][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+function(V){return hR(Hg(V.data[0],V.data[1]))}.toString()+"}",2,lt=Qe,tt=function(ze){var ft=[];for(var lt in ze)ze[lt].buffer&&ft.push((ze[lt]=new ze[lt].constructor(ze[lt])).buffer);return ft}(Qe),St=function(V,O){L.terminate(),N(V,O)},(Zt=new Worker(SM[2]||(SM[2]=URL.createObjectURL(new Blob([ze+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))))).onmessage=function(ut){var Ze=ut.data,_e=Ze.$e$;if(_e){var He=new Error(_e[0]);He.code=_e[1],He.stack=_e[2],St(He,null)}else St(null,Ze)},Zt.postMessage(lt,tt),Zt}([mB,gB,function(){return[Hg]}])).postMessage([h,v],v.consume?[h.buffer]:[]),function(){L.terminate()};var h,v,N,L}function Hg(s,l){l||(l={});var u=dR(),h=s.length;u.p(s);var v=pR(s,l,qC(l),8),E=v.length;return fb(v,l),Qg(v,E-8,u.d()),Qg(v,E-4,h),v}var aA=typeof TextEncoder<"u"&&new TextEncoder,fR=typeof TextDecoder<"u"&&new TextDecoder;try{fR.decode(sA,{stream:!0})}catch{}function wM(s,l){if(l){for(var u=new ra(s.length),h=0;h<s.length;++h)u[h]=s.charCodeAt(h);return u}if(aA)return aA.encode(s);var v=s.length,E=new ra(s.length+(s.length>>1)),I=0,R=function(V){E[I++]=V};for(h=0;h<v;++h){if(I+5>E.length){var N=new ra(I+8+(v-h<<1));N.set(E),E=N}var L=s.charCodeAt(h);L<128||l?R(L):L<2048?(R(192|L>>6),R(128|63&L)):L>55295&&L<57344?(R(240|(L=65536+(1047552&L)|1023&s.charCodeAt(++h))>>18),R(128|L>>12&63),R(128|L>>6&63),R(128|63&L)):(R(224|L>>12),R(128|L>>6&63),R(128|63&L))}return db(E,0,I)}var cA=function(s,l,u,h){return new(u||(u=Promise))(function(v,E){function I(L){try{N(h.next(L))}catch(V){E(V)}}function R(L){try{N(h.throw(L))}catch(V){E(V)}}function N(L){var V;L.done?v(L.value):(V=L.value,V instanceof u?V:new u(function(O){O(V)})).then(I,R)}N((h=h.apply(s,l||[])).next())})};const TM=s=>cA(void 0,void 0,void 0,function*(){let l=s.report.meta;l?(l.version="000001",l.flag="0"):l={version:"000001",flag:"0"};const u=Object.assign(Object.assign({},s.report),{meta:l});return Object.assign(Object.assign({},s),{report:u})}),Gg=(s,l=2)=>{let u=`${s}`;for(;u.length<l;)u=`0${u}`;return u},mR=s=>{const l=new Date(s);return`${l.getUTCFullYear()}-${Gg(l.getUTCMonth()+1)}-${Gg(l.getUTCDate())} ${Gg(l.getUTCHours())}:${Gg(l.getUTCMinutes())}:${Gg(l.getUTCSeconds())}.${Gg(l.getUTCMilliseconds(),3)}`},Wg=(s,l)=>{const{message:u,logLevel:h,tags:v,timestamp:E}=s,N=function(V,O){var X={};for(var ee in V)Object.prototype.hasOwnProperty.call(V,ee)&&O.indexOf(ee)<0&&(X[ee]=V[ee]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var re=0;for(ee=Object.getOwnPropertySymbols(V);re<ee.length;re++)O.indexOf(ee[re])<0&&Object.prototype.propertyIsEnumerable.call(V,ee[re])&&(X[ee[re]]=V[ee[re]])}return X}(s,["message","logLevel","tags","timestamp","encryptMode","id"]),L=Object.assign(Object.assign({time:mR(E),logLevel:Si[h],message:u,tags:v},l),N);return JSON.stringify(L)},RM=(s,l,u)=>{let h="",v=0;const E=new Map,I=new Map,R=Boolean(l.gzip)?92160:30720;for(const[N,L]of s){const V=Wg(L,u),O=WC(V);v+O<R?(v+=O,h+=V,h+="\n",E.set(L.id,L)):I.set(L.id,L)}return{reportItems:E,nextReportItems:I,report:{messages:h}}},OM=(s,l,u={})=>cA(void 0,void 0,void 0,function*(){const h=s.logManager.filterStore(l);let v=s.publicKey;const{xhrOptions:E={},reportMaker:I,additionalContext:R,gzip:N,encrypt:L,publicKey:V}=u;if(V&&(v=V),L&&!v)throw new Error("Cannot encrypt report without key");const O=Vh(s,Vs.beforeReport,h);var ne,fe;let ee=((ne,fe,ve,Le)=>{const Qe=[];let ze;do{const ft=fe(ze||ne,ve,Le),{nextReportItems:lt}=ft;Qe.push(ft),ze=lt}while(Boolean(ze)&&Boolean(ze?.size));return Qe})(yield(ne=O,fe=s,cA(void 0,void 0,void 0,function*(){try{const{idbManager:ve,getCodecWorker:Le,externalKeys:Qe}=fe,ze=Qe?Qe.filter(ut=>ut.usage===iu.PROTECT_LOCAL_KEY).map(ut=>ut.key):void 0,ft=new Map,lt=Array.from(ne.values()),tt=yield Promise.all(lt.map(ut=>cA(void 0,void 0,void 0,function*(){return ut.encryptMode===po.AESGCM256?[_M(ut.message),yield ve.loadAESGCM256Key(ut.laplaceSessionId,ze),new Uint8Array(16)]:[]})).map(ut=>!1===ut[1]?[]:ut)),St=yield Le(),Zt=yield St.bulkDecryptAESGCM256(tt);return lt.forEach((ut,Ze)=>{const _e=Zt[Ze];ft.set(ut.id,_e?Object.assign(Object.assign({},ut),{message:_e}):ut)}),ft}catch{return ne}})),I??RM,u,R);if(N){const ne=(fe=>ve=>cA(void 0,void 0,void 0,function*(){let Le=yield(Qe=ve.report.messages,new Promise((ft,lt)=>{IM(wM(Qe),{consume:!0},(tt,St)=>{tt&&lt(tt),ft(St)})}));var Qe;fe&&(Le=eA(Le));const ze=Object.assign(Object.assign({},ve.report),{messages:Le});return Object.assign(Object.assign({},ve),{report:ze})}))(!L);ee=yield Promise.all(ee.map(ne))}ee=L?yield Promise.all(ee.map((ne=>fe=>cA(void 0,void 0,void 0,function*(){const ve=self.crypto.getRandomValues(new Uint8Array(16)),Le=yield mn(),Qe=yield(ze=ne,xp(void 0,void 0,void 0,function*(){const Zt=ze.replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----",""),ut=ib(self.atob(Zt));return yield self.crypto.subtle.importKey("spki",ut,{name:"RSA-OAEP",hash:"SHA-1"},!0,["encrypt"])}));var ze;const ft=yield(Zt=Le,xp(void 0,void 0,void 0,function*(){return yield self.crypto.subtle.exportKey("raw",Zt)})),lt=yield tA(ft,Qe),tt=yield KC(fe.report.messages,Le,ve),St=Object.assign(Object.assign({},fe.report),{messages:eA(tt),meta:{key:eA(lt),iv:eA(ve),version:"000001"}});var Zt;return Object.assign(Object.assign({},fe),{report:St})}))(v))):yield Promise.all(ee.map(TM));const re={success:(ne,fe,ve)=>{Vh(s,Vs.afterReport,{report:fe,reportItems:ve.reportItems,nextReportItems:ve.nextReportItems})},fail:(ne,fe,ve)=>{Vh(s,Vs.afterReport,{report:fe,reportItems:ve.reportItems,nextReportItems:ve.nextReportItems,error:ne})}};((ne,fe,ve,Le)=>{ne.map(Qe=>Object.assign(Object.assign({url:fe||"",type:"POST",withCredentials:!1,headers:{},data:JSON.stringify(Qe.report),meta:{reportItems:Qe.reportItems,nextReportItems:Qe.nextReportItems}},ve),Le)).forEach(Qe=>{(ze=>{const ft=new XMLHttpRequest;if(ft.open(ze.type||"GET",ze.url,!0),ft.withCredentials=ze.withCredentials,ft.onreadystatechange=function(){if(4===ft.readyState){const lt=ft.status;lt>=200&&lt<300?ze.success&&ze.success(ft.responseText,ze.data,ze.meta):ze.fail&&ze.fail(`Request failed, status: ${lt}, responseText: ${ft.responseText}`,ze.data,ze.meta)}},"POST"===ze.type){if(ze.headers)for(const lt in ze.headers)ft.setRequestHeader(lt,ze.headers[lt]);try{ft.send(ze.data)}catch(lt){ze.fail&&ze.fail(lt,ze.data,ze.meta)}}})(Qe)})})(ee,s.reportUrl,re,E)});Wl(OM,"commonReport");var DM=function(s,l,u,h){return new(u||(u=Promise))(function(v,E){function I(L){try{N(h.next(L))}catch(V){E(V)}}function R(L){try{N(h.throw(L))}catch(V){E(V)}}function N(L){var V;L.done?v(L.value):(V=L.value,V instanceof u?V:new u(function(O){O(V)})).then(I,R)}N((h=h.apply(s,l||[])).next())})};const _B=(s,l,u)=>DM(void 0,void 0,void 0,function*(){const{idbManager:h,logManager:v}=s;if(Array.isArray(u)&&(yield h.deleteLogs(u),v.deleteLogs(u),!l))return;const E=s.logManager.filterStore(l),I=[];for(const[N,L]of E)I.push(L.id);let R=I;Array.isArray(I)||(R=[I]),yield h.deleteLogs(R),v.deleteLogs(R)}),vB=s=>DM(void 0,void 0,void 0,function*(){const{idbManager:l,logManager:u}=s;yield l.reset(),u.reset()});function AB(s,l){(null==l||l>s.length)&&(l=s.length);for(var u=0,h=new Array(l);u<l;u++)h[u]=s[u];return h}function om(s){return new Promise(function(l,u){s.oncomplete=s.onsuccess=function(){return l(s.result)},s.onabort=s.onerror=function(){return u(s.error)}})}function kM(s,l){var u=indexedDB.open(s);u.onupgradeneeded=function(){return u.result.createObjectStore(l)};var h=om(u);return function(v,E){return h.then(function(I){return E(I.transaction(l,v).objectStore(l))})}}var PM;function uA(){return PM||(PM=kM("keyval-store","keyval")),PM}function mb(s){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:uA())("readonly",function(l){return om(l.get(s))})}function MM(s,l){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:uA())("readwrite",function(u){return u.put(l,s),om(u.transaction)})}function gR(s){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:uA())("readwrite",function(l){return s.forEach(function(u){return l.delete(u)}),om(l.transaction)})}Wl(_B,"commonDelete"),Wl(vB,"commonReset");const _b={default:{queue:[],isRunning:!1,listeners:[]}},vb=s=>{let l=_b[s];return l||(l={queue:[],isRunning:!1,listeners:[]},_b[s]=l),l};function vR(s){return function(s,l,u,h){return new(u||(u=Promise))(function(v,E){function I(L){try{N(h.next(L))}catch(V){E(V)}}function R(L){try{N(h.throw(L))}catch(V){E(V)}}function N(L){var V;L.done?v(L.value):(V=L.value,V instanceof u?V:new u(function(O){O(V)})).then(I,R)}N((h=h.apply(s,l||[])).next())})}(this,void 0,void 0,function*(){const l=vb(s),{queue:u,listeners:h}=l;for(;u.length>0&&!l.isRunning;){const v=u.shift();l.isRunning=!0;try{const E=yield v.task();v.resolution(E)}catch(E){v.rejection(E)}l.isRunning=!1,vR(s)}h.length&&h.forEach(v=>{v()})})}function Kg(s,l){const u=vb(l);return new Promise((h,v)=>{u.queue.push({task:s,resolution:h,rejection:v}),vR(l)})}const AR=(s,l)=>{vb(s).listeners.push(l)};var Ba=function(s,l,u,h){return new(u||(u=Promise))(function(v,E){function I(L){try{N(h.next(L))}catch(V){E(V)}}function R(L){try{N(h.throw(L))}catch(V){E(V)}}function N(L){var V;L.done?v(L.value):(V=L.value,V instanceof u?V:new u(function(O){O(V)})).then(I,R)}N((h=h.apply(s,l||[])).next())})};const JC="change_meta",yR="change_log",zd=()=>Promise.resolve();class NM{constructor(l){this.waitingForReset=!1,this.isReseting=!1,this.isChangingMeta=!1,this.isChangingLog=!1,this.get=u=>Ba(this,void 0,void 0,function*(){return yield mb(u,this.store)}),this.getSecret=u=>Ba(this,void 0,void 0,function*(){return yield mb(u,this.keyStore)}),this.set=(u,h)=>Ba(this,void 0,void 0,function*(){try{return yield MM(u,h,this.store)}catch(v){v instanceof DOMException&&v&&"QuotaExceededError"===v.name&&(yield this.deleteOldLogsForSetNewOne(),yield this.set(u,h)),console.error(v)}}),this.setSecret=(u,h)=>Ba(this,void 0,void 0,function*(){try{return yield MM(u,h,this.keyStore)}catch(v){v instanceof DOMException&&v&&"QuotaExceededError"===v.name&&(yield this.deleteOldLogsForSetNewOne(),yield this.set(u,h)),console.error(v)}}),this.deleteOldLogsForSetNewOne=()=>Ba(this,void 0,void 0,function*(){var u;const h=yield this.getAllLogs(),v=[];for(let E=0;E<13;E++){const I=null===(u=h[E])||void 0===u?void 0:u.id;(I||0===I)&&v.push(`${I}`)}gR(v,this.store)}),this.adjustMaxId=()=>Ba(this,void 0,void 0,function*(){return this.isReseting?zd():(this.isChangingMeta=!0,yield Kg(()=>Ba(this,void 0,void 0,function*(){var u;const h=yield this.getAllLogs(),E=null!==(u=h[h.length-1]?.id)&&void 0!==u?u:0;return yield this.set("maxId",E),E}),JC))}),this.makeNextId=()=>Ba(this,void 0,void 0,function*(){return this.isReseting?zd():(this.isChangingMeta=!0,yield Kg(()=>Ba(this,void 0,void 0,function*(){const u=yield this.get("maxId");if(!u&&0!==u)return yield this.set("maxId",0),0;const h=u+1;return yield this.set("maxId",h),h}),JC))}),this.addLog=u=>Ba(this,void 0,void 0,function*(){if(this.isReseting)return zd();this.isChangingLog=!0,yield Kg(()=>Ba(this,void 0,void 0,function*(){const{id:h}=u;this.set(`${h}`,u)}),yR)}),this.getAllLogs=()=>Ba(this,void 0,void 0,function*(){return(yield function _R(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uA();return s("readonly",function(l){if(l.getAll&&l.getAllKeys)return Promise.all([om(l.getAllKeys()),om(l.getAll())]).then(function(h){var R,v=function(L){if(Array.isArray(L))return L}(R=h)||function(L,V){var O=null==L?null:typeof Symbol<"u"&&L[Symbol.iterator]||L["@@iterator"];if(null!=O){var X,ee,re=[],ne=!0,fe=!1;try{for(O=O.call(L);!(ne=(X=O.next()).done)&&(re.push(X.value),2!==re.length);ne=!0);}catch(ve){fe=!0,ee=ve}finally{try{ne||null==O.return||O.return()}finally{if(fe)throw ee}}return re}}(R)||function(L,V){if(L){if("string"==typeof L)return AB(L,2);var O=Object.prototype.toString.call(L).slice(8,-1);return"Object"===O&&L.constructor&&(O=L.constructor.name),"Map"===O||"Set"===O?Array.from(L):"Arguments"===O||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?AB(L,2):void 0}}(R)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),I=v[1];return v[0].map(function(R,N){return[R,I[N]]})});var u=[];return s("readonly",function(h){return(v=h,v.openCursor().onsuccess=function(){var I;this.result&&(u.push([(I=this.result).key,I.value]),this.result.continue())},om(v.transaction)).then(function(){return u});var v})})}(this.store)).filter(([h,v])=>"maxId"!==h).sort((h,v)=>{var E,I;return(null===(E=h[1])||void 0===E?void 0:E.id)-(null===(I=v[1])||void 0===I?void 0:I.id)}).map(([h,v])=>v)}),this.deleteLogs=u=>Ba(this,void 0,void 0,function*(){if(this.isReseting)return zd();this.isChangingLog=!0,yield Kg(()=>Ba(this,void 0,void 0,function*(){gR(u.map(h=>`${h}`),this.store)}),yR),yield this.adjustMaxId()}),this.saveAESGCM256Key=(u,h,v)=>Ba(this,void 0,void 0,function*(){if(v){const E=yield self.crypto.subtle.exportKey("raw",h),I=yield KC(E,v,new Uint8Array(16));yield this.setSecret(`aes-gcm-256-${u}`,I)}else yield this.setSecret(`aes-gcm-256-${u}`,h)}),this.loadAESGCM256Key=(u,h)=>Ba(this,void 0,void 0,function*(){const v=yield this.getSecret(`aes-gcm-256-${u}`);if(h){for(let E=0;E<h.length;E++)try{const I=h[E],R=yield tR(v,I,new Uint8Array(16));return yield self.crypto.subtle.importKey("raw",R,"AES-GCM",!0,["decrypt"])}catch{continue}return!1}return v}),this.reset=()=>Ba(this,void 0,void 0,function*(){return this.isReseting?zd():(this.waitingForReset=!0,this.isChangingLog||this.isChangingMeta?zd():(this.isReseting=!0,yield function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:uA())("readwrite",function(u){return u.clear(),om(u.transaction)})}(this.store),this.isReseting=!1,void(this.waitingForReset=!1)))}),this.store=kM(l,l+"-store"),this.keyStore=kM(l+"-sec",l+"-store"),AR(JC,()=>{this.isChangingMeta=!1,this.waitingForReset&&this.reset()}),AR(yR,()=>{this.isChangingLog=!1,this.waitingForReset&&this.reset()})}}var $o=function(s,l,u,h){return new(u||(u=Promise))(function(v,E){function I(L){try{N(h.next(L))}catch(V){E(V)}}function R(L){try{N(h.throw(L))}catch(V){E(V)}}function N(L){var V;L.done?v(L.value):(V=L.value,V instanceof u?V:new u(function(O){O(V)})).then(I,R)}N((h=h.apply(s,l||[])).next())})};const xM={databaseName:"laplace-default-db",maxSize:49283072};let LM=(()=>{class s{constructor(u){this.commonLogWithContext=(v,E,I,R,N)=>$o(this,void 0,void 0,function*(){yield bM(this.runtimeMetaManager,v,E,I,R,N)}),this.commonReportWithContext=(v,E)=>$o(this,void 0,void 0,function*(){yield OM(this.runtimeMetaManager,v,E)}),this.commonDeleteWithContext=v=>$o(this,void 0,void 0,function*(){yield _B(this.runtimeMetaManager,v)}),this.resetWithContext=()=>$o(this,void 0,void 0,function*(){yield vB(this.runtimeMetaManager)}),this.initLocalAESGCM256Key=()=>$o(this,void 0,void 0,function*(){return yield mn()}),this.doNotUseDirtyGetStore=()=>this.runtimeMetaManager.logManager.getStore(),this.log=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.log,po.PLAIN,{extraProperties:I})}),this.info=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.info,po.PLAIN,{extraProperties:I})}),this.warn=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.warn,po.PLAIN,{extraProperties:I})}),this.debug=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.debug,po.PLAIN,{extraProperties:I})}),this.error=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.error,po.PLAIN,{extraProperties:I})}),this.logWithEncryption=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.log,po.AESGCM256,{extraProperties:I})}),this.infoWithEncryption=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.info,po.AESGCM256,{extraProperties:I})}),this.debugWithEncryption=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.debug,po.AESGCM256,{extraProperties:I})}),this.warnWithEncryption=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.warn,po.AESGCM256,{extraProperties:I})}),this.errorWithEncryption=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.error,po.AESGCM256,{extraProperties:I})}),this.logWithoutCache=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.log,po.PLAIN,{extraProperties:I,noCache:!0})}),this.infoWithoutCache=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.info,po.PLAIN,{extraProperties:I,noCache:!0})}),this.warnWithoutCache=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.warn,po.PLAIN,{extraProperties:I,noCache:!0})}),this.debugWithoutCache=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.debug,po.PLAIN,{extraProperties:I,noCache:!0})}),this.errorWithoutCache=(v,E,I)=>$o(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,E,Si.error,po.PLAIN,{extraProperties:I,noCache:!0})}),this.getLogs=v=>{const E=this.runtimeMetaManager.logManager;return E?E.filterStore(v):new Map},this.reportByHttps=(v,E)=>$o(this,void 0,void 0,function*(){yield this.commonReportWithContext(v,E)}),this.deleteLog=v=>$o(this,void 0,void 0,function*(){yield this.commonDeleteWithContext(v)}),this.deleteAll=()=>$o(this,void 0,void 0,function*(){yield this.resetWithContext()});const{runtimeMetaManager:h}=u;this.runtimeMetaManager=h}}return s.init=l=>$o(void 0,void 0,void 0,function*(){const{databaseName:u="laplace-default-db"}=l,h=new NM(u),v=new hB,E=new EM(Object.assign(Object.assign(Object.assign({},xM),l),{idbManager:h,logManager:v}));Vh(E,Vs.beforeInit),yield v.syncFromIDB(E.idbManager);const I=new s({runtimeMetaManager:E});return Vh(E,Vs.afterInit),I}),s})();class yB extends QC{constructor(l){super(),this.config={verbose:!1},this.beforeLog=(u,h)=>{const{verbose:v}=this.config;switch(v&&console.log("beforeLog, ","state: ",h,"meta: ",u),h.logLevel){case Si.error:console.error(h.message);break;case Si.warn:console.warn(h.message);break;case Si.log:console.log(h.message);break;case Si.debug:console.debug(h.message);break;case Si.info:console.info(h.message)}},this.afterLog=(u,h)=>{const{verbose:v}=this.config;v&&console.log("afterLog, ","state: ",h,"meta: ",u)},this.beforeReport=(u,h)=>{const{verbose:v}=this.config;v&&console.log("beforeReport, ","store: ",h,"meta: ",u)},this.afterReport=(u,h)=>{const{verbose:v}=this.config;v&&console.log("afterReport, ","store: ",h,"meta: ",u)},l&&(this.config=l)}}const lA=s=>{const l=[];for(const[u,h]of s)l.push(h);return l};class EB extends QC{constructor(l){super(),this.config={debug:!1},this.debugLog=u=>{const{debug:h}=this.config;h&&console.log(`[AutoCleanLogPlugin]: ${u}`)},this.afterInit=u=>{const{expireBefore:h}=this.config;if(!h)return void this.debugLog("early return on beforeInit because expireBefore is falsy");const{logManager:v,commonMethods:{commonDelete:E}}=u,I=v.getStore().byTime,R=("function"==typeof h?lA(I).filter(h):lA(I).filter(N=>N.timestamp<h)).map(N=>N.id);E(u,void 0,R),this.debugLog(`afterInit, clean log id: ${R}`)},this.afterReport=(u,{reportItems:h,error:I})=>{if(I)return this.debugLog("error"),void console.error(I);const{cleanAfterReport:R}=this.config;if(!R)return void this.debugLog("early return on afterReport because cleanAfterReport is falsy");const{commonMethods:{commonDelete:N}}=u,L=("function"==typeof R?lA(h).filter(R):lA(h)).map(V=>V.id);N(u,void 0,L),this.debugLog(`afterReport, clean log id: ${L}`)},l&&(this.config=l)}}let Ab=-1;const zg=s=>{addEventListener("pageshow",l=>{l.persisted&&(Ab=l.timeStamp,s(l))},!0)},$C=()=>window.__WEB_VITALS_POLYFILL__?window.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const s=performance.timing,l=performance.navigation.type,u={entryType:"navigation",startTime:0,type:2==l?"back_forward":1===l?"reload":"navigate"};for(const h in s)"navigationStart"!==h&&"toJSON"!==h&&(u[h]=Math.max(s[h]-s.navigationStart,0));return u})()):window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],yb=()=>{const s=$C();return s&&s.activationStart||0},zl=(s,l)=>{const u=$C();let h="navigate";return Ab>=0?h="back-forward-cache":u&&(h=document.prerendering||yb()>0?"prerender":document.wasDiscarded?"restore":u.type.replace(/_/g,"-")),{name:s,value:void 0===l?-1:l,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:h}},XC=(s,l,u)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){const h=new PerformanceObserver(v=>{Promise.resolve().then(()=>{l(v.getEntries())})});return h.observe(Object.assign({type:s,buffered:!0},u||{})),h}}catch{}},Yd=(s,l,u,h)=>{let v,E;return I=>{var R,N;l.value>=0&&(I||h)&&(E=l.value-(v||0),(E||void 0===v)&&(v=l.value,l.delta=E,l.rating=(R=l.value)>(N=u)[1]?"poor":R>N[0]?"needs-improvement":"good",s(l)))}},Yg=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},ZC=s=>{const l=u=>{"pagehide"!==u.type&&"hidden"!==document.visibilityState||s(u)};addEventListener("visibilitychange",l,!0),addEventListener("pagehide",l,!0)},Eb=s=>{let l=!1;return u=>{l||(s(u),l=!0)}};let sm=-1;const ER=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,eI=s=>{"hidden"===document.visibilityState&&sm>-1&&(sm="visibilitychange"===s.type?s.timeStamp:0,BM())},bR=()=>{addEventListener("visibilitychange",eI,!0),addEventListener("prerenderingchange",eI,!0)},BM=()=>{removeEventListener("visibilitychange",eI,!0),removeEventListener("prerenderingchange",eI,!0)},SR=()=>(sm<0&&(window.__WEB_VITALS_POLYFILL__?(sm=window.webVitals.firstHiddenTime,sm===1/0&&bR()):(sm=ER(),bR()),zg(()=>{setTimeout(()=>{sm=ER(),bR()},0)})),{get firstHiddenTime(){return sm}}),tI=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},CR=(s,l)=>{l=l||{},tI(()=>{const u=[1800,3e3],h=SR();let v,E=zl("FCP");const I=XC("paint",R=>{R.forEach(N=>{"first-contentful-paint"===N.name&&(I.disconnect(),N.startTime<h.firstHiddenTime&&(E.value=Math.max(N.startTime-yb(),0),E.entries.push(N),v(!0)))})});I&&(v=Yd(s,E,u,l.reportAllChanges),zg(R=>{E=zl("FCP"),v=Yd(s,E,u,l.reportAllChanges),Yg(()=>{E.value=performance.now()-R.timeStamp,v(!0)})}))})};let Qh,qg,nI,rI;const dA={passive:!0,capture:!0},bb=new Date,IR=(s,l)=>{Qh||(Qh=l,qg=s,nI=new Date,Sb(removeEventListener),pA())},pA=()=>{if(qg>=0&&qg<nI-bb){const s={entryType:"first-input",name:Qh.type,target:Qh.target,cancelable:Qh.cancelable,startTime:Qh.timeStamp,processingStart:Qh.timeStamp+qg};rI.forEach(function(l){l(s)}),rI=[]}},am=s=>{if(s.cancelable){const l=(s.timeStamp>1e12?new Date:performance.now())-s.timeStamp;"pointerdown"==s.type?((u,h)=>{const v=()=>{IR(u,h),I()},E=()=>{I()},I=()=>{removeEventListener("pointerup",v,dA),removeEventListener("pointercancel",E,dA)};addEventListener("pointerup",v,dA),addEventListener("pointercancel",E,dA)})(l,s):IR(l,s)}},Sb=s=>{["mousedown","keydown","touchstart","pointerdown"].forEach(l=>s(l,am,dA))},hA={},cm=s=>{document.prerendering?tI(()=>cm(s)):"complete"!==document.readyState?addEventListener("load",()=>cm(s),!0):setTimeout(s,0)};var FM="Expected a function",VM=/^\s+|\s+$/g,ho=/^[-+]0x[0-9a-f]+$/i,fA=/^0b[01]+$/i,jM=/^0o[0-7]+$/i,TR=parseInt,Ru="object"==typeof self&&self&&self.Object===Object&&self,RR="object"==typeof uh&&uh&&uh.Object===Object&&uh||Ru||Function("return this")(),SB=Object.prototype.toString,OR=Math.max,CB=Math.min,DR=function(){return RR.Date.now()};function Jg(s){var l=typeof s;return!!s&&("object"==l||"function"==l)}function kR(s){if("number"==typeof s)return s;if("symbol"==typeof(h=s)||(v=h)&&"object"==typeof v&&"[object Symbol]"==SB.call(h))return NaN;var h,v;if(Jg(s)){var l="function"==typeof s.valueOf?s.valueOf():s;s=Jg(l)?l+"":l}if("string"!=typeof s)return 0===s?s:+s;s=s.replace(VM,"");var u=fA.test(s);return u||jM.test(s)?TR(s.slice(2),u?2:8):ho.test(s)?NaN:+s}class QM extends QC{constructor(l){super(),this.config={debug:!1,publicTags:[]},this.debugLog=u=>{const{debug:h}=this.config;h&&console.log("[AutoLogWebVitalsPlugin]:",u)},this.afterInit=u=>{const{autoReport:h,publicTags:v}=this.config,{commonMethods:{commonLog:E,commonReport:I}}=u,R=function(s,l,u){var h=!0,v=!0;if("function"!=typeof s)throw new TypeError(FM);return Jg(u)&&(h="leading"in u?!!u.leading:h,v="trailing"in u?!!u.trailing:v),function(E,I,R){var N,L,V,O,X,ee,re=0,ne=!1,fe=!1,ve=!0;if("function"!=typeof E)throw new TypeError(FM);function Le(tt){var St=N,Zt=L;return N=L=void 0,re=tt,O=E.apply(Zt,St)}function Qe(tt){var St=tt-ee;return void 0===ee||St>=I||St<0||fe&&tt-re>=V}function ze(){var St,Zt,tt=DR();if(Qe(tt))return ft(tt);X=setTimeout(ze,(Zt=I-((St=tt)-ee),fe?CB(Zt,V-(St-re)):Zt))}function ft(tt){return X=void 0,ve&&N?Le(tt):(N=L=void 0,O)}function lt(){var Zt,tt=DR(),St=Qe(tt);if(N=arguments,L=this,ee=tt,St){if(void 0===X)return re=Zt=ee,X=setTimeout(ze,I),ne?Le(Zt):O;if(fe)return X=setTimeout(ze,I),Le(ee)}return void 0===X&&(X=setTimeout(ze,I)),O}return I=kR(I)||0,Jg(R)&&(ne=!!R.leading,V=(fe="maxWait"in R)?OR(kR(R.maxWait)||0,I):V,ve="trailing"in R?!!R.trailing:ve),lt.cancel=function(){void 0!==X&&clearTimeout(X),re=0,N=ee=L=X=void 0},lt.flush=function(){return void 0===X?O:ft(DR())},lt}(s,l,{leading:h,maxWait:l,trailing:v})}(X=>{I(u,X,h).catch(ee=>{E(u,"web vitals auto report failed",["JS_ERROR"],Si.error,po.PLAIN)})},600),N=Boolean(h),L=X=>ee=>{return re=this,void 0,ve=function*(){const re=JSON.stringify(ee),ne=v?[X,"AUTO-WEB-VITALS",...v]:[X,"AUTO-WEB-VITALS"];this.debugLog(re),N?(yield E(u,re,ne,Si.info,po.PLAIN),R(X)):E(u,re,ne,Si.info,po.PLAIN)},new((fe=void 0)||(fe=Promise))(function(Le,Qe){function ze(tt){try{lt(ve.next(tt))}catch(St){Qe(St)}}function ft(tt){try{lt(ve.throw(tt))}catch(St){Qe(St)}}function lt(tt){var St;tt.done?Le(tt.value):(St=tt.value,St instanceof fe?St:new fe(function(Zt){Zt(St)})).then(ze,ft)}lt((ve=ve.apply(re,[])).next())});var re,fe,ve};var V,O,X,ee;V=L("CLS"),O=O||{},CR(Eb(()=>{const X=[.1,.25];let ee,re=zl("CLS",0),ne=0,fe=[];const ve=Qe=>{Qe.forEach(ze=>{if(!ze.hadRecentInput){const ft=fe[0],lt=fe[fe.length-1];ne&&ze.startTime-lt.startTime<1e3&&ze.startTime-ft.startTime<5e3?(ne+=ze.value,fe.push(ze)):(ne=ze.value,fe=[ze])}}),ne>re.value&&(re.value=ne,re.entries=fe,ee())},Le=XC("layout-shift",ve);Le&&(ee=Yd(V,re,X,O.reportAllChanges),ZC(()=>{ve(Le.takeRecords()),ee(!0)}),zg(()=>{ne=0,re=zl("CLS",0),ee=Yd(V,re,X,O.reportAllChanges),Yg(()=>ee())}),setTimeout(ee,0))})),X=L("FID"),ee=ee||{},tI(()=>{const re=[100,300],ne=SR();let fe,ve=zl("FID");const Le=ft=>{ft.startTime<ne.firstHiddenTime&&(ve.value=ft.processingStart-ft.startTime,ve.entries.push(ft),fe(!0))},Qe=ft=>{ft.forEach(Le)},ze=XC("first-input",Qe);fe=Yd(X,ve,re,ee.reportAllChanges),ze&&ZC(Eb(()=>{Qe(ze.takeRecords()),ze.disconnect()})),window.__WEB_VITALS_POLYFILL__?(console.warn('The web-vitals "base+polyfill" build is deprecated. See: https://bit.ly/3aqzsGm'),ze||window.webVitals.firstInputPolyfill(Le),zg(()=>{ve=zl("FID"),fe=Yd(X,ve,re,ee.reportAllChanges),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(Le)})):ze&&zg(()=>{ve=zl("FID"),fe=Yd(X,ve,re,ee.reportAllChanges),rI=[],qg=-1,Qh=null,Sb(addEventListener),rI.push(Le),pA()})}),((X,ee)=>{ee=ee||{},tI(()=>{const re=[2500,4e3],ne=SR();let fe,ve=zl("LCP");const Le=ze=>{const ft=ze[ze.length-1];if(ft){const lt=Math.max(ft.startTime-yb(),0);lt<ne.firstHiddenTime&&(ve.value=lt,ve.entries=[ft],fe())}},Qe=XC("largest-contentful-paint",Le);if(Qe){fe=Yd(X,ve,re,ee.reportAllChanges);const ze=Eb(()=>{hA[ve.id]||(Le(Qe.takeRecords()),Qe.disconnect(),hA[ve.id]=!0,fe(!0))});["keydown","click"].forEach(ft=>{addEventListener(ft,ze,!0)}),ZC(ze),zg(ft=>{ve=zl("LCP"),fe=Yd(X,ve,re,ee.reportAllChanges),Yg(()=>{ve.value=performance.now()-ft.timeStamp,hA[ve.id]=!0,fe(!0)})})}})})(L("LCP")),((X,ee)=>{ee=ee||{};const re=[800,1800];let ne=zl("TTFB"),fe=Yd(X,ne,re,ee.reportAllChanges);cm(()=>{const ve=$C();if(ve){const Le=ve.responseStart;if(Le<=0||Le>performance.now())return;ne.value=Math.max(Le-yb(),0),ne.entries=[ve],fe(!0),zg(()=>{ne=zl("TTFB",0),fe=Yd(X,ne,re,ee.reportAllChanges),fe(!0)})}})})(L("TTFB")),CR(L("FCP"))},l&&(this.config=l),l?.publicTags&&!Array.isArray(l?.publicTags)&&(this.config.publicTags=[l?.publicTags])}}var MR=function(s,l,u,h){return new(u||(u=Promise))(function(v,E){function I(L){try{N(h.next(L))}catch(V){E(V)}}function R(L){try{N(h.throw(L))}catch(V){E(V)}}function N(L){var V;L.done?v(L.value):(V=L.value,V instanceof u?V:new u(function(O){O(V)})).then(I,R)}N((h=h.apply(s,l||[])).next())})};const NR=["RESOURCE_ERROR","JS_ERROR","UNHANDLED_PROMISE_REJECTION"];class xR extends QC{constructor(l){super(),this.config={debug:!1,publicTags:[]},this.errorCount=0,this.addPublicTags=u=>{const{publicTags:h}=this.config;return h?[...u,...h]:u},this.debugLog=u=>{const{debug:h}=this.config;h&&console.log("[AutoLogErrorPlugin]:",u)},this.ignore=u=>{var h,v,E,I,R;return void 0!==(null===(h=this.config)||void 0===h?void 0:h.maxErrorCount)&&this.errorCount>=(null===(v=this.config)||void 0===v?void 0:v.maxErrorCount)||!(null===(E=this.config)||void 0===E||!E.ignoredErrorMsgKeywords)&&u&&!(null!==(R=null===(I=this.config)||void 0===I?void 0:I.ignoredErrorMsgKeywords)&&void 0!==R&&R.find(N=>u?.includes(N)))},this.afterInit=u=>{if(!self.addEventListener)return;const{commonMethods:{commonLog:h,commonReport:v}}=u,{autoReport:E}=this.config;let I;const R=()=>{E&&(I&&clearTimeout(I),I=setTimeout(()=>{v(u,NR,E).catch(N=>{h(u,"auto log error plugin report failed",this.addPublicTags(["JS_ERROR"]),Si.error,po.PLAIN)}),this.debugLog(`report with option: ${JSON.stringify(E)}`)},600))};try{self.addEventListener("error",N=>MR(this,void 0,void 0,function*(){var L,V,O,X,ee,re,ne;if(!this.ignore(N?.message))if(N?.target&&((null===(L=N?.target)||void 0===L?void 0:L.src)||(null===(V=N?.target)||void 0===V?void 0:V.href))){const fe=`Load Resource Error in ${null===(O=N?.target)||void 0===O?void 0:O.tagName} element: ${(null===(X=N?.target)||void 0===X?void 0:X.src)||(null===(ee=N?.target)||void 0===ee?void 0:ee.href)}`;yield h(u,fe,this.addPublicTags(["RESOURCE_ERROR"]),Si.error,po.PLAIN),this.errorCount+=1,R(),this.debugLog(fe)}else{const fe=`Javascript Runtime Error in ${N?.filename} (${N?.lineno}:${N?.colno}): ${N?.message}\nStack: ${null!==(ne=null===(re=N?.error)||void 0===re?void 0:re.stack)&&void 0!==ne?ne:N?.stack}`;yield h(u,fe,this.addPublicTags(["JS_ERROR"]),Si.error,po.PLAIN),this.errorCount+=1,R(),this.debugLog(N)}})),self.addEventListener("unhandledrejection",N=>MR(this,void 0,void 0,function*(){var L;if(this.ignore(null===(L=N?.reason)||void 0===L?void 0:L.message))return;let V="";const{reason:O}=N;V="string"==typeof O?`Promise Error: ${O}`:"object"==typeof O?`Promise Error with reason: ${JSON.stringify(O)}`:`Promise Error with unrecognized reason: ${O}`,yield h(u,V,this.addPublicTags(["UNHANDLED_PROMISE_REJECTION"]),Si.error,po.PLAIN),this.errorCount+=1,R(),this.debugLog(N)}))}catch(N){console.error(N)}this.debugLog("afterInit, add listener")},l&&(this.config=l),l?.publicTags&&!Array.isArray(l?.publicTags)&&(this.config.publicTags=[l?.publicTags])}}let au=function(s){return s.AudioEncodeSuccess="init audio encode success",s.AudioDecodeSuccess="init audio decode success",s.AudioEncodeFailed="init audio encode failed",s.AudioDecodeFailed="init audio decode failed",s.DeviceAudioStreamCaptured="device audio stream captured",s.AudioCapturedForbidden="audio captured forbidden",s.AudioWorkerWebsocketBroken="audio worker websocket broken",s.AudioCaptureZeroData="audio capture zero data, auto failover",s.AudioJoinComplete="audio join complete",s.AudioLeaveComplete="audio leave complete",s.SharingAudioStartComplete="sharing audio start complete",s.SharingAudioStopComplete="sharing audio stop complete",s.AudioBridgeReconnectStart="audio bridge reconnect start",s.AudioBridgeReconnectEnd="audio bridge reconnect end",s.ChangeSpeakerError="audio change speaker error",s}({}),Ou=function(s){return s.VideoEncodeSuccess="init video encode success",s.VideoDecodeSuccess="init video decode success",s.VideoEncodeFailed="init video encode failed",s.VideoDecodeFailed="init video decode failed",s.VBSettingSuccess="video VB setting success",s.VBSettingFailed="init video VB failed",s.VBPreloadSuccess="preload video VB success",s.VBPreloading3S="preload video VB 3s",s.VBPreloading10S="preload video VB 10s",s.UserForbiddedCaptureVideo="user forbidded capture video",s.StartCaptureVideoSuccess="start capture video success",s.StopCaptureVideoSuccess="stop capture video success",s}({}),mA=function(s){return s.SharingEncodeSuccess="init sharing encode success",s.SharingDecodeSuccess="init sharing decode success",s.SharingEncodeFailed="init sharing encode failed",s.SharingDecodeFailed="init sharing decode failed",s}({});const IB={enable:!1,enableReport:!1,gatewayEndPoint:"",logLevel:{debug:!1,log:!1,info:!1,print:!1,warn:!1,error:!1},performanceReportRatio:.25,trackingCount:7},LR=["debug","log","info","print","warn","error"],um=(s,l)=>[...s,...l].filter(u=>!!u);let Hh=(()=>{class s{static getInstance(){return this.agentInstance||(this.agentInstance=new s),this.agentInstance}constructor(){var u=this;this.laplace=void 0,this.trackingId=void 0,this.logConfig=void 0,this.reportUrl=void 0,this.publicTags=void 0,this.initConfig=function(){var h=U(function*(v){let E,I=IB;try{v.logConfig&&(I=JSON.parse(v.logConfig),I.gatewayEndPoint&&(u.reportUrl=`${I.gatewayEndPoint}/pwa/webclient`));const{enable:V,enableReport:O,reportUrl:X,logLevel:ee,encryptKeys:re,trackingId:ne}=v;if(void 0!==V&&(I={...I,enable:!!V}),void 0!==O&&(I={...I,enableReport:!!O}),X&&(u.reportUrl=X),"string"==typeof ee){const fe=LR.indexOf(ee),ve=LR.reduce((Le,Qe,ze)=>ze<fe?{...Le,[`${Qe}`]:!1}:{...Le,[`${Qe}`]:!0},{});I={...I,logLevel:ve}}else void 0!==ee&&(I={...I,logLevel:ee});if(ne&&(u.trackingId=ne),void 0!==re){const fe=Array.isArray(re)?re:[re];E=yield Promise.all(fe.map(ve=>{return(Le=ve,window.crypto.subtle.importKey("raw",(new TextEncoder).encode(Le.slice(0,32)),"AES-GCM",!1,["encrypt","decrypt"])).then(Le=>({usage:iu.PROTECT_LOCAL_KEY,key:Le}));var Le}))}}catch(V){console.error("parse log config error",V)}const R=(new Date).getTime()-6048e5,N=I.enableReport&&u.reportUrl?{gzip:!1,encrypt:!1,additionalContext:{trackingId:u.trackingId}}:void 0;u.publicTags=["VideoSDK",u.trackingId];const L=[v.debugMode&&new yB({verbose:!1}),new EB({debug:!1,cleanAfterReport:!0,expireBefore:R}),new QM({autoReport:N,publicTags:u.publicTags}),new xR({autoReport:N,publicTags:u.publicTags})].filter(Boolean);return{laplaceConfig:{databaseName:"ZM-VSDK-LOG-DATABASE",maxSize:49283072,publicKey:v.logEncryptionPubKey,reportUrl:u.reportUrl,externalKeys:E,plugins:L},logConfig:I}});return function(v){return h.apply(this,arguments)}}(),this.handleInitLaplaceSuccess=(h,v)=>{var E;this.laplace=h;const I=Ur.get($u.VSDKLogTrackingId);let R=[];try{R=JSON.parse(I?window.atob(I):"[]")}catch{}(null===(E=R.length>=v?.trackingCount)||void 0===E||E)&&R.shift();const N=R.reduce((L,V)=>({...L,[`${V}`]:!0}),{});h.deleteLog(L=>{var V;return!(null!==(V=L.tags)&&void 0!==V&&V.some(O=>N[O]))}),R.push(this.trackingId),Ur.set($u.VSDKLogTrackingId,window.btoa(JSON.stringify(R)),fi.LocalStorage)},this.init=function(){var h=U(function*(v){const{laplaceConfig:E,logConfig:I}=yield u.initConfig(v);return I.enable?(u.logConfig=I,LM.init(E).then(R=>{u.handleInitLaplaceSuccess(R,I)}).catch(R=>{throw{type:Cp,reason:"Logger init failed.",error:R}})):Promise.reject({type:fn,reason:"Logger feature is not enabled."})});return function(v){return h.apply(this,arguments)}}(),this.check=h=>{var v,E;return!(!this.checkLaplace()||(null===(v=this.logConfig)||void 0===v||null===(E=v.logLevel)||void 0===E||!E[h])&&(console.warn(`Logger ${h} is not enabled.`),1))},this.log=(h,v,E)=>{if(this.check("log"))try{var I;return null===(I=this.laplace.logWithEncryption(h,um(v,E)))||void 0===I?void 0:I.catch(()=>{})}catch{return}},this.warn=(h,v,E)=>{if(this.check("warn"))try{var I;return null===(I=this.laplace.warnWithEncryption(h,um(v,E)))||void 0===I?void 0:I.catch(()=>{})}catch{return}},this.info=(h,v,E)=>{if(this.check("info"))try{var I;return null===(I=this.laplace.infoWithEncryption(h,um(v,E)))||void 0===I?void 0:I.catch(()=>{})}catch{return}},this.debug=(h,v,E)=>{if(this.check("debug"))try{var I;return null===(I=this.laplace.debugWithEncryption(h,um(v,E)))||void 0===I?void 0:I.catch(()=>{})}catch{return}},this.error=(h,v,E)=>{if(this.check("error"))try{var I;return null===(I=this.laplace.errorWithEncryption(h,um(v,E)))||void 0===I?void 0:I.catch(()=>{})}catch{return}},this.checkLaplace=()=>{var h;return!(null===(h=this.laplace)||void 0===h||!h.log)},this.makeLogger=h=>{var v;const E=um(null!==(v=this.publicTags)&&void 0!==v?v:[],h);return{log:(I,R)=>this.log(I,E,R??[]),warn:(I,R)=>this.warn(I,E,R??[]),info:(I,R)=>this.info(I,E,R??[]),debug:(I,R)=>this.debug(I,E,R??[]),error:(I,R)=>this.error(I,E,R??[])}},this.reportToGlobalTracing=h=>{var v;return this.checkLaplace()?null!==(v=this.logConfig)&&void 0!==v&&v.enableReport&&this.reportUrl?this.laplace.reportByHttps(h,{gzip:!1,encrypt:!1,xhrOptions:{url:this.reportUrl},additionalContext:{trackingId:this.trackingId}}):Promise.reject({type:fn,reason:"Please use getLogs to obtain log data and report by yourself."}):Promise.reject({type:fn,reason:"Logger has not been enabled or initialized."})},this.getLogs=(h,v)=>{if(!this.checkLaplace())return console.warn("Logger has not been enabled or initialized."),[];const E=h.getState(),{meeting:{meetingNumber:I,userId:R,userEmail:N,userName:L}}=E,V={meetingNumber:I,userId:R,userEmail:N,userName:L},O=this.laplace.getLogs(v),X=[];for(const[,ee]of O)X.push({...ee,...V});return X},this.doNotUseDirtyGetStore=()=>this.checkLaplace()?this.laplace.doNotUseDirtyGetStore():(console.warn("Logger has not been enabled or initialized."),{byTag:{},byTime:new Map}),this.trackingId=jC()}}return s.agentInstance=void 0,s})();const zV=Hh.getInstance(),iI=[{name:"joinComputerAudio",type:"Audio"},{name:"leaveComputerAudio",type:"Audio"},{name:"joinSharingAudio",type:"Audio"},{name:"leaveSharingAudio",type:"Audio"},{name:"startCaptureVideo",type:"Video"},{name:"stopCaptureVideo",type:"Video"},{name:"startDesktopSharing",type:"Sharing"},{name:"stopDesktopSharing",type:"Sharing"},{name:"pauseDesktopSharing",type:"Sharing"},{name:"resumeDesktopSharing",type:"Sharing"}],BR=function(s){const l=iI.find(E=>E.name===s);if(l){const{type:E}=l;for(var u=arguments.length,h=new Array(u>1?u-1:0),v=1;v<u;v++)h[v-1]=arguments[v];zV.makeLogger([E,`${E} Media SDK`]).info(`${s},params:${JSON.stringify(h)}`)}};function oI(s){const l=iI.map(u=>u.name);return new Proxy(s,{get:(u,h)=>"string"==typeof h&&l.includes(h)?function(){for(var v=arguments.length,E=new Array(v),I=0;I<v;I++)E[I]=arguments[I];try{Reflect.apply(BR,void 0,[h,...E])}catch{}return Reflect.apply(Reflect.get(u,h),u,E)}:Reflect.get(u,h)})}function Du(s){return`{E}${s}{/E}`}const gA=Hh.getInstance(),Gh=s=>{const{meeting:{encryptedRWC:l,encryptedGEORWC:u,discardedRwcList:h,meetingOptions:v}}=s;let E=[];return v?.isEnableGeoFenceRWC&&u&&u?.length>0?E=u.filter(I=>!h.includes(I.rwc)).reduce((I,R)=>{const{dl:N,rwc:L,rwcToken:V}=R,O=I.find(X=>X.dl===N);if(O)O.items.push({rwc:L,rwcToken:V});else{const X={dl:N,items:[]};X.items.push({rwc:L,rwcToken:V}),I.push(X)}return I},[]):l&&(E=[{dl:0,items:Object.keys(l).map(I=>({rwc:I,rwcToken:l[I]}))}]),E},$g=s=>$s(...s.map(l=>0===l.dl?En(l.items):ua(l.dl).pipe(Pn(()=>En(l.items))))),Xg=(s,l)=>s.pipe(wr(`${da}`),Fn(l),ln(u=>{let[,h]=u;return void 0!==h.meeting.encryptedRWC||void 0!==h.meeting.encryptedGEORWC&&h.meeting.encryptedGEORWC.length>0}),kn(u=>{let[,h]=u;const{meeting:{ts:v,auth:E,meetingNumber:I,meetingOptions:R,meetingId:N,userName:L},breakoutRoom:V}=h,O=R?.isEnableGeoFenceRWC,X=Gh(h);if(X.length>0){const ee={serversLength:X.reduce((ne,fe)=>ne+fe.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0,retryCounts:0};let re;return O&&(re=new ot,$g(X).subscribe(ne=>{var fe;return null===(fe=re)||void 0===fe?void 0:fe.next(ne)})),(O?re:$g(X)).pipe(jm(()=>{const{meeting:{meetingStatus:ne}}=l.value,fe=ne===bs.Initial&&ee.pingFailedServerList.length<ee.serversLength&&ee.serversLength>0;return!fe&&re&&re.complete(),fe}),Zn(()=>{if(ee.pingRwcServerCounts=ee.pingRwcServerCounts+1,O&&ee.pingRwcServerCounts===ee.serversLength){const ne=1e3*Math.floor(5*Math.pow(2,ee.retryCounts));ee.retryCounts=ee.retryCounts+1,gA.makeLogger(["Join Meeting Flow"]).info(`ping rwc retry,current rwc list:${JSON.stringify(Gh(l.value))},retry counts:${ee.retryCounts}, ${JSON.stringify({meetingId:Du(N),meetingNumber:Du(I),userName:Du(L)})}`,["Ping RWC Retry"]),ua(ne).pipe(ht(()=>{const fe=Gh(l.value);return Object.assign(ee,{serversLength:fe.reduce((ve,Le)=>ve+Le.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0}),fe})).subscribe(fe=>{$g(fe).subscribe(ve=>{re.next(ve)})})}}),Pn(ne=>{const{rwc:fe,rwcToken:ve}=ne,Le=((Qe,ze,ft,lt,tt,St)=>{const Zt={ts:lt,auth:tt,rwcToken:ft,dmz:1};return St&&Object.assign(Zt,{confID:St}),`https://${Qe}/wc/ping/${ze}?${new URLSearchParams(Zt).toString()}`})(fe,I,ve,v,E,V?.currentRoom.boConfId);return ps(Le).pipe(Pn(Qe=>{let ze={};return ze=Qe.response?{...Qe.response,rwc:fe,fromNginx:!1}:{rwc:fe,rwg:fe,rwcToken:ve,fromNginx:!0},En([gf(ze),Sa()])}),hn(()=>{const{pingFailedServerList:Qe,serversLength:ze}=ee;return Qe.push(Le),Qe.length===ze&&(O&&re&&re.complete(),gA.makeLogger(["Join Meeting Flow"]).error(`ping rwc error, ${JSON.stringify({meetingId:Du(N),meetingNumber:Du(I),userName:Du(L)})}`,["Ping RWC Error"]),dt(Xa,{reason:"connection error",errorCode:Zs})),Ht}))}),ch(a0(performance.now())))}return Ht}));let sI=0;const Cb={meetingStatus:bs.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,enableAudioQos:!0,enableVideoQos:!0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",isAudioBridgeEnabled:!0,discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},meetingInfo:{},isNewJoinFlow:!1,gatewayUserList:[],logConfig:"",logEncryptionPubKey:"",failover:{count:0,isCurrentFailoverRecorded:!1,reason:-1,interval:0,joinMeetingSuccessTimestamp:0}},FR=Gn({[`${Gc}`]:gt((s,l)=>{let{payload:u}=l;u.customerKey=s.customerKey||u.customerKey||"",Object.assign(s,u),s.meetingStatus=bs.Initial}),[`${ET}`]:gt((s,l)=>{let{payload:u}=l;s.isWindowOpen=u}),[`${Hy}`]:gt((s,l)=>{let{payload:u}=l;s.signatureType=u.useSDK?"sdk":"api",s.apiKey=u.apiKey,s.signature=u.signature,s.lang=u.language}),[`${PV}`]:gt((s,l)=>{let{payload:u}=l;s.ztk=u}),[`${s0}`]:gt((s,l)=>{let{payload:u}=l;s.zsk=u}),[`${TL}`]:gt((s,l)=>{let{payload:u}=l;s.tk=u.tk,s.mtkGuid=u.mtkGuid}),[`${a0}`]:gt((s,l)=>{let{payload:u}=l;s.pingRWCTimestamp=u}),[`${Ts}`]:gt((s,l)=>{let{payload:u}=l;s.confId=u.confID,s.conId=u.conID,s.e2eEncrypt=u.e2eEncrypt,s.meetingNumber=parseInt(u.mn,10),s.zoomId=u.zoomID,s.meetingStatus=bs.Joined,s.jid=u.jid,s.xtoken=u.xtoken,s.groups=u.groups,s.svcUrl=u.svcUrl,s.encType=u.encType,s.userGUID=u.userGUID,s.userId=u.userID,s.role=u.role,s.participantID=u.participantID,s.reportDomain=u.reportDomain,s.abToken=u.ABtoken,u.enableWebTransport&&(s.enableWebtransport=u.enableWebTransport,s.webtransportPort=u.WebTransportPort)}),[`${Rd}`]:gt((s,l)=>{let{payload:u}=l;if(u.gatewayUser){var h;const{userId:E,sn:I}=u.gatewayUser,R=null===(h=s.gatewayUserList)||void 0===h?void 0:h.find(N=>N.userId===E);var v;R?R.sn=I:null===(v=s.gatewayUserList)||void 0===v||v.push(u.gatewayUser)}else Object.assign(s,u)}),[`${Ef}`]:gt((s,l)=>{let{payload:u}=l;s.isHost=u}),[`${yp}`]:gt((s,l)=>{let{payload:u}=l;s.isCoHost=u}),[`${ev}`]:gt((s,l)=>{let{payload:u}=l;s.isOnHold=u}),[`${c0}`]:gt((s,l)=>{let{payload:u}=l;s.isMeetingReset=u}),[`${$k}`]:gt((s,l)=>{let{payload:u}=l;s.audioVideoBeforeOnHold=u}),[`${Xk}`]:gt((s,l)=>{let{payload:u}=l;s.currentUserAudioBeforeReset=u}),[`${Wy}`]:gt((s,l)=>{let{payload:u}=l;s.isCurrentUserMutedBeforeReset=u}),[`${u0}`]:gt((s,l)=>{let{payload:u}=l;s.meetingStatus=u}),[`${l0}`]:gt((s,l)=>{let{payload:u}=l;s.region=u.region,s.network=u.network}),[`${tv}`]:gt((s,l)=>{let{payload:u}=l;s.isCurrentUserStartVideoBeforeReset=u}),[`${Zk}`]:gt((s,l)=>{let{payload:u}=l;s.joinMeetingTimeStamp=u}),[`${bT}`]:gt((s,l)=>{let{payload:u}=l;s.enableAudioQos=u.audioQos,s.enableVideoQos=u.videoQos}),[`${Zm}`]:gt((s,l)=>{let{payload:u}=l;s.activeAppInfo=u}),[`${eg}`]:gt((s,l)=>{let{payload:u}=l;s.idleStartTime=u}),[`${tg}`]:gt((s,l)=>{let{payload:u}=l;s.sessionIdleTimeoutMins=u}),[`${bf}`]:gt((s,l)=>{let{payload:u}=l;s.isAudioBridgeEnabled=u}),[`${d0}`]:gt((s,l)=>{var u,h;let{payload:v}=l;const E=null===(u=s.encryptedGEORWC)||void 0===u||null===(h=u.find(R=>R.rwc===v))||void 0===h?void 0:h.dc;if(E){var I;const R=null===(I=s.encryptedGEORWC)||void 0===I?void 0:I.filter(N=>N.dc===E);R&&s.discardedRwcList.some(N=>R?.findIndex(L=>L.rwc===N)>=0)&&s.discardedRwcList.push(...R.map(N=>N.rwc)),s.discardedRwcList.push(v)}}),[`${nv}`]:gt((s,l)=>{let{payload:u}=l;s.sharePronounType=u}),[`${ST}`]:gt((s,l)=>{let{payload:u}=l;s.stayAwake=u}),[`${eP}`]:gt((s,l)=>{let{payload:u}=l;s.failover.joinMeetingSuccessTimestamp=u}),[`${fc}`]:gt(s=>{Object.assign(s.failover,{...Cb.failover,count:s.failover.count,joinMeetingSuccessTimestamp:s.failover.joinMeetingSuccessTimestamp})}),[`${Ep}`]:gt((s,l)=>{let{payload:u}=l;const{count:h,reason:v,interval:E}=u;s.failover.count=h,s.failover.reason=v,s.failover.interval=E,s.failover.isCurrentFailoverRecorded=!0}),[`${Jo}`]:gt((s,l)=>{let{payload:u}=l;s.quicklyLeave=u}),[`${Gy}`]:(s,l)=>{let{payload:u}=l;const{isFailover:h}=u,v={isMeetingReset:!0,apiKey:s.apiKey,signatureType:s.signatureType,signature:s.signature,lang:s.lang,proxy:1,stayAwake:s.stayAwake};return h&&Object.assign(v,{currentUserAudioBeforeReset:s.audioVideoBeforeOnHold?s.audioVideoBeforeOnHold.audio:u.audio,isCurrentUserMutedBeforeReset:s.audioVideoBeforeOnHold?s.audioVideoBeforeOnHold.muted:u.muted,isCurrentUserStartVideoBeforeReset:s.audioVideoBeforeOnHold?s.audioVideoBeforeOnHold.video:u.video,meetingNumber:s.meetingNumber,userName:s.userName,passWord:s.passWord,userEmail:s.userEmail,sdkUrl:s.sdkUrl,sdkOrigin:s.sdkOrigin,cv:s.cv,zsk:s.zsk,ztk:s.ztk,idleStartTime:s.idleStartTime,sessionIdleTimeoutMins:s.sessionIdleTimeoutMins,customerKey:s.customerKey,failover:s.failover,stayAwake:s.stayAwake,quicklyLeave:s.quicklyLeave}),{...Cb,...v}}},Cb),HM=dc(iB,oB,KV,xg,{meetingInfoEpic:(s,l)=>s.pipe(wr(`${Pi}`),kn(u=>{const h=Object.assign({},u.payload,{password:ys(u.payload.password),topic:ys(u.payload.topic)}),{videoSDKUrl:v}={meetingSDKUrl:`https://${jd}/api/v1/wc/info`,videoSDKUrl:`https://${jd}/wc/lsdk`};return function(E,I){let R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"zoomsdkjsonpcallback";return new Pe(N=>{sI++;const L=`${R}${sI}`,V=document.createElement("script");Object.keys(I).forEach(O=>null==I[O]&&delete I[O]),V.src=`${E}?${new URLSearchParams(Object.assign(I,{callback:L})).toString()}`,V.async=!0,V.onerror=O=>N.error(O),document.getElementsByTagName("head")[0].appendChild(V),window[L]=O=>{V.parentNode&&V.parentNode.removeChild(V),delete window[L],N.next(O),N.complete()}})}(v,h).pipe(hn(E=>$n({status:!1,result:E.toString(),errorCode:Zs})),Pn(E=>{const[I,R]=(N=$n(E),[ln(L=O=>!0===O.status&&void 0!==O.result,V)(new Pe($i(N))),ln(j_(L,V))(new Pe($i(N)))]);var N,L,V;return R.subscribe(O=>{O.state||(3e3===O.errorCode&&"Meeting password is incorrect"===O.errorMessage?dt(Xa,Qy(3004)):3e3===O.errorCode&&"The role type error"===O.errorMessage?dt(Xa,Qy(3010)):O.errorCode===Zs?dt(Xa,{reason:"connection error"}):3e3===O.errorCode?dt(Xa,{reason:O.errorMessage,errorCode:200}):300===O.errorCode?dt(Xa,{reason:"This account does not exist or does not belong to you",errorCode:200}):124===O.errorCode&&"Parse lite sdk topic and pwd fail"===O.errorMessage?dt(Xa,{reason:"Parse topic and pwd fail",errorCode:200}):124===O.errorCode&&"The java web token is expired or more than 2 days or ineffective."===O.errorMessage?dt(Xa,{reason:"The token is expired or more than 2 days or ineffective.",errorCode:200}):124===O.errorCode&&dt(Xa,{reason:"Verify JWT failed",errorCode:200}))}),I.pipe(RC(O=>{if(!0===O.status){const{result:{mid:X,websdkClientFeatureOptions:ee}}=O;Ur.init(X);const re=((ve,Le)=>{if(ve.result){const{result:{mn:Qe,ts:ze,auth:ft,track_auth:lt,mid:tt,tid:St,encryptedRWC:Zt,encryptedGEORWC:ut,user_identity:Ze,meetingOptions:_e,can_recording:He,wcXMPPConfig:ct,call_out_country_json:st,isOriginalHost:Ne,support_call_out:Jt,liveTranscription:Ft,logConfig:yn,logEncryptionPubKey:mr,toll_numbers_json:tr,h323Password:Tr}}=ve,{lang:gr,password:lr,topic:Hn,zlk:$r,cv:eo,userName:co}=Le;return{meetingNumber:Qe,meetingId:tt,tid:St,ts:ze,auth:ft,passWord:lr,trackAuth:lt,customerKey:Ze,encryptedRWC:JSON.parse(Zt||"{}"),encryptedGEORWC:JSON.parse(ut||"{}"),meetingOptions:JSON.parse(_e||"{}"),recordingEnable:"1"===He,topic:Hn,userName:Ur.get(So.WebclientUserName)||co,cv:eo,zlkJwtToken:$r,xmppConfig:JSON.parse(ct||"{}"),callOutCountry:JSON.parse(st||"{}"),lang:gr,isOriginHost:Ne,isSupportCallOut:"1"===Jt,liveTranscription:JSON.parse(Ft||"{}"),logConfig:yn,logEncryptionPubKey:mr,tollNumbers:void 0===tr?void 0:JSON.parse(tr),h323Password:Tr}}return ve})(O,u.payload),ne=[$n(Gc(re)),jo(Xg,l,da())],fe=((ve,Le)=>{const Qe=[];if(ve){const ze=ve.split("").reverse();Object.keys(Ah).filter(ft=>/M:\d(,\d)*;V:\d(,\d)*/.test(Ah[ft])).forEach(ft=>{const lt=Ah[ft];let[tt,St]=lt.split(";");tt.startsWith("V:")&&([tt,St]=[St,tt]);const Zt=St.slice(2).split(",").map(_e=>ze[Number(_e)-1]).reverse().join(""),ut=parseInt(Zt,16),Ze=TC[lt];Ze&&Qe.push($n(Ze.action((ut&Ze.mask)>0)))})}return Qe})(ee);return fe.length>0&&ne.unshift(...fe),U_(...ne)}}))}))})),pingRWCEpic:Xg});var Zg={exports:{}};Zg.exports=function(){function s(l){for(var u=1;u<arguments.length;u++){var h=arguments[u];for(var v in h)l[v]=h[v]}return l}return function l(u,h){function v(E,I,R){if(typeof document<"u"){"number"==typeof(R=s({},h,R)).expires&&(R.expires=new Date(Date.now()+864e5*R.expires)),R.expires&&(R.expires=R.expires.toUTCString()),E=encodeURIComponent(E).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var N="";for(var L in R)R[L]&&(N+="; "+L,!0!==R[L]&&(N+="="+R[L].split(";")[0]));return document.cookie=E+"="+u.write(I,E)+N}}return Object.create({set:v,get:function(E){if(typeof document<"u"&&(!arguments.length||E)){for(var I=document.cookie?document.cookie.split("; "):[],R={},N=0;N<I.length;N++){var L=I[N].split("="),V=L.slice(1).join("=");try{var O=decodeURIComponent(L[0]);if(R[O]=u.read(V,O),E===O)break}catch{}}return E?R[E]:R}},remove:function(E,I){v(E,"",s({},I,{expires:-1}))},withAttributes:function(E){return l(this.converter,s({},this.attributes,E))},withConverter:function(E){return l(s({},this.converter,E),this.attributes)}},{attributes:{value:Object.freeze(h)},converter:{value:Object.freeze(u)}})}({read:function(l){return'"'===l[0]&&(l=l.slice(1,-1)),l.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(l){return encodeURIComponent(l).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}();var GM=Zg.exports;const{WebclientIsOnHold:WM,WebclientOpt:lm,WebclientParticipantId:VR,WebclientZoomId:KM,WebclientWebinarToken:jR,WebclientMeetingToken:YV}=So,{WebclientDeviceId:QR}=$u;function zM(s){let{retryCount:l,rwgServerList:u,userName:h,auth:v,trackAuth:E,meetingId:I,customerKey:R,tid:N,lang:L,ts:V,bid:O,botk:X,confID:ee,isAudioBridgeEnabled:re,isMeetingReset:ne,cameraDevicesList:fe}=s;const ve=GM.get("_zm_mtk_guid");let Le=Ur.get(QR);if(Le||(Le=jC(),Ur.set(QR,Le,fi.LocalStorage)),u.length>l){const Qe=rv(),ze=u[l],ft={dn2:ys(h),auth:v,browser:Qe,trackAuth:E,mid:I,tid:N,lang:L,ts:V,"ZM-CID":Le,_ZM_MTG_TRACK_ID:ve||"",customer_key:ys(R),cfs:0};ze.rwcAuth?Object.assign(ft,{rwcAuth:ze.rwcAuth}):ze.rwcToken&&Object.assign(ft,{rwcToken:ze.rwcToken});const lt=qy()?1:pa()||mc()?2:0;return Object.assign(ft,{as_type:lt}),[{key:lm,queryKey:"opt"},{key:VR,queryKey:"participantID"},{key:KM,queryKey:"zoomid"}].forEach(St=>{const Zt=Ur.get(St.key);void 0!==Zt&&(ft[St.queryKey]=Zt)}),O&&X&&ee&&Object.assign(ft,{bid:ys(O),botk:X,confID:ee}),Ur.get(YV)&&Object.assign(ft,{isdj:1}),Au()&&(Object.assign(ft,{from:og()?"android":"ios"}),re&&Object.assign(ft,{useABAudio:1})),Object.assign(ft,{clientCaps:HR()}),Object.assign(ft,{isCamera:ne?fe.length>0?1:0:1}),{queryObject:{...ft},rwgServer:ze}}return null}function HR(){let s=RE.WebCameraIndication|RE.SendMeetingTokenSeparately;const l=tn.getPTZCapability();return(l.pan||l.tilt||l.zoom)&&(s|=RE.SupportFarEndCameraControl),tn.isSupportVideoShare()&&(s|=RE.SupportVideoShare),s|=RE.UnifyErrorType,s}const e_=ji.createAgent();let Ib;var _A=Object.freeze({__proto__:null,connectZoomSocketEpic:(s,l)=>s.pipe(wr(`${Sa}`),Fn(l),ln(u=>{let[,h]=u;return h.socket.zoomSocketStatus===so.Closed}),kn(u=>{let[,h]=u;const{socket:{retryCount:v,rwgServerList:E},meeting:I,breakoutRoom:R,video:{cameraDevicesList:N}}=h;let L,V={...I,retryCount:v,rwgServerList:E,cameraDevicesList:N};if(R&&R.currentRoom.status===rr.Joining){const{currentRoom:{boId:X,boConfId:ee,boToken:re}}=R;V={...V,bid:X,botk:re,confID:ee}}if(L=I.zlkJwtToken?function(X){const ee=zM(X);if(ee){const{queryObject:re,rwgServer:ne}=ee,{topic:fe,cv:ve,zlkJwtToken:Le,meetingNumber:Qe,passWord:ze}=X;return Object.assign(re,{topic:ys(fe),iccv:ve,zlkJwtToken:Le}),""!==ze&&Object.assign(re,{mpwd:ys(ze)}),`wss://${ne.rwg}/instantsdk/${Qe}?${new URLSearchParams(re).toString()}`}return null}(V):function(X){const ee=zM(X);if(ee){const{queryObject:re,rwgServer:ne}=ee,{signatureType:fe,userEmail:ve,ztk:Le,tk:Qe,cv:ze,zsk:ft,sign:lt,meetingNumber:tt,isHost:St,isOriginHost:Zt,passWord:ut}=X;return Object.assign(re,{signType:fe,email:ve,zak:Le||"",tk:Qe||"",jscv:ze}),St&&Zt||""===ut||Object.assign(re,{mpwd:ut}),sessionStorage.getItem(So.WebclientZsk)||ft?Object.assign(re,{zak:ft}):Object.assign(re,{sign:lt}),[{key:WM,queryKey:"cfs"},{key:jR,queryKey:"tk"}].forEach(Ze=>{const _e=Ur.get(Ze.key);void 0!==_e&&(re[Ze.queryKey]=_e)}),`wss://${ne.rwg}/wc/api/${tt}?${new URLSearchParams(re).toString()}`}return null}(V),L){const X=(e_.connect(L),Ib=new Be,ah(ee=>e_.on(_c.Message,ee),ee=>e_.off(_c.Message,ee),ee=>ee.data).subscribe(Ib),Ib);return $s(X.pipe(ln(ee=>"string"==typeof ee),ht(ee=>{try{return JSON.parse(ee)}catch(re){return console.error(re),{evt:0}}}),Q1(),al(ee=>{if(0!==ee.evt||!ee.body||"invalid parameters!"!==ee.body.test)return lc(ee);dt(Xa,Qy(qr.INVALID_PARAMETER))}),ch(qa({status:so.Connecting,rwgUrl:L}))),X.pipe(ln(ee=>ee instanceof ArrayBuffer),ht(ee=>zu(ee))))}return Ht})),connectedZoomSocketEpic:(s,l)=>s.pipe(wr(`${Sa}`),Fn(l),ln(u=>{let[,h]=u;return h.socket.zoomSocketStatus===so.Closed}),kn(()=>{const[u,h,v]=[_c.Open,_c.Close,_c.Error].map(E=>ah(I=>e_.on(E,I),I=>e_.on(E,I)));return $s(u.pipe(Pn(()=>$s($n(qa({status:so.Connected})),ua(6e4).pipe(Fn(l),ln(E=>{let[,I]=E;return I.meeting.meetingStatus===bs.Initial&&!I.meeting.isMeetingReset}),ht(()=>(dt(vc,{reason:Es.Failover}),io(Rs.NoHeartbeat))))))),h.pipe(Fn(l),ln(E=>{let[,I]=E;return I.socket.zoomSocketStatus!==so.Closed&&I.meeting.meetingStatus===bs.Joined&&!I.meeting.isMeetingReset}),ht(()=>(dt(vc,{reason:Es.Failover}),io(Rs.Disconnect)))),v.pipe(Fn(l),Pn(E=>{let[,I]=E;const{meeting:{meetingStatus:R,isMeetingReset:N},socket:{rwgServerList:L,retryCount:V}}=I,O=[];if(R===bs.Initial&&null!=L&&L.length){const X=L[V];return ua(5e3).pipe(ln(()=>l.value.meeting.meetingStatus===bs.Initial),Pn(()=>{const{socket:{rwgServerList:ee,retryCount:re}}=l.value,ne=[];return ee.length>re+1?ne.push(la(re+1),Bs({retry:!0})):(dt(Xa,{reason:"connection error",errorCode:Zs}),ne.push(...zf(l.value))),En(ne)}),ch(d0(X?.rwc)))}return N||R!==bs.Joined||(dt(vc,{reason:Es.Failover}),O.push(io(Rs.OnError))),En(O)})))})),disconnectZoomSocketEpic:(s,l)=>s.pipe(wr(`${Bs}`),kn(u=>u.payload&&u.payload.retry?$n(Sa()).pipe(Vm(1e3),ch(qa({status:so.Closed}))):$n(qa({status:so.Closed}))),Vm(100),Zn(()=>{var u;l.value.socket.zoomSocketStatus===so.Closed&&(e_.close(),null===(u=Ib)||void 0===u||u.complete())}))});const Vp=Ng.getInstance();let t_;var Qi=Object.freeze({__proto__:null,connectXmppSocketEpic:(s,l)=>s.pipe(wr(`${Ni}`),Fn(l),ln(u=>{let[,h]=u;return"closed"===h.socket.xmppSocketStatus}),kn(u=>{let[,h]=u;const{meeting:{svcUrl:v,meetingNumber:E,conId:I}}=h;return(N=`wss://${v}/wc/media/${E}?type=x&cid=${I}`,Vp.connect(N),t_=new Be,ah(L=>Vp.on(Gl.Message,L),L=>Vp.off(Gl.Message,L)).subscribe(t_),t_).pipe(ln(N=>void 0!==N?.evt),ht(N=>Ca(N)),ch(dh(so.Connecting)));var N})),connectedXmppSocketEpic:(s,l)=>s.pipe(wr(`${Ni}`),kn(()=>{const[u,h,v]=[Gl.Open,Gl.Close,Gl.Error].map(E=>ah(I=>Vp.on(E,I),I=>Vp.on(E,I)));return $s(u.pipe(Zn(()=>{const E=mc()&&Yy()?11:10;Vp.join(E)}),Hu(dh(so.Connected))),h.pipe(Vm(1e3),Fn(l),ln(E=>{let[,I]=E;return"closed"!==I.socket.xmppSocketStatus&&I.meeting.meetingStatus===bs.Joined&&!I.meeting.isMeetingReset}),ht(()=>(dt(vc,{reason:Es.Failover}),io(Rs.DisconnectXmpp)))),v.pipe(Vm(1e3),Fn(l),ln(E=>{let[,I]=E;return"closed"!==I.socket.xmppSocketStatus&&I.meeting.meetingStatus===bs.Joined&&!I.meeting.isMeetingReset}),ht(()=>(dt(vc,{reason:Es.Failover}),io(Rs.OnError)))))})),disconnectCmdChannelSocketEpic:s=>s.pipe(wr(`${uc}`),Hu(dh(so.Closed)),Vm(100),Zn(()=>{var l;Vp.close(),null===(l=t_)||void 0===l||l.complete()}))});const vA=g0.getInstance();let ku;var pl=Object.freeze({__proto__:null,connectMainSessionSocketEpic:(s,l)=>s.pipe(wr(`${er}`),Fn(l),ln(u=>{let[,h]=u;return"closed"===h.socket.mainSessionSocketStatus}),kn(u=>{let[,h]=u;const{meeting:{svcUrl:v,meetingNumber:E,conId:I}}=h;return(N=`wss://${v}/wc/media/${E}?type=m&cid=${I}&mode=2`,vA.connect(N),ku=new Be,ah(L=>vA.on(_c.Message,L),L=>vA.off(_c.Message,L)).pipe(ht(L=>L.data)).subscribe(ku),ku).pipe(ht(N=>{try{return JSON.parse(N)}catch(L){return console.error(L),{evt:0}}}),ln(N=>0!==N.evt),Q1(),ht(N=>lo(N)),ch(os(so.Connecting)));var N})),connectedMainSessionSocketEpic:(s,l)=>s.pipe(wr(`${er}`),kn(()=>{const[u,h,v]=[_c.Open,_c.Close,_c.Error].map(E=>ah(I=>vA.on(E,I),I=>vA.on(E,I)));return $s(u.pipe(Hu(os(so.Connected))),h.pipe(Fn(l),ln(E=>{let[,I]=E;return"closed"!==I.socket.zoomSocketStatus&&I.meeting.meetingStatus===bs.Joined}),ht(()=>(dt(vc,{reason:Es.Failover}),io(Rs.DisconnectMChannel)))),v.pipe(ht(()=>(dt(vc,{reason:Es.Failover}),io(Rs.OnErrorMChannel)))))})),disconnectMainSessionSocketEpic:s=>s.pipe(wr(`${pi}`),Hu(os(so.Closed)),Zn(()=>{var l;vA.close(),null===(l=ku)||void 0===l||l.complete()}))});const YM={zoomSocketStatus:so.Closed,xmppSocketStatus:so.Closed,mainSessionSocketStatus:so.Closed,retryCount:0,rwgServerList:[]},wB=Gn({[`${qa}`]:gt((s,l)=>{let{payload:u}=l;s.zoomSocketStatus=u.status}),[`${gf}`]:gt((s,l)=>{let{payload:u}=l;const{rwgServerList:h}=s;h.find(v=>v.rwg===u.rwg)||h.push(u)}),[`${la}`]:gt((s,l)=>{let{payload:u}=l;s.retryCount=u}),[`${dh}`]:gt((s,l)=>{let{payload:u}=l;s.xmppSocketStatus=u}),[`${os}`]:gt((s,l)=>{let{payload:u}=l;s.mainSessionSocketStatus=u}),[`${xy}`]:()=>YM},YM),TB=dc(_A,Qi,pl),aI={id:"userId",type:s=>xf(s)?{userType:s,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:s},role:s=>({userRole:s,isHost:Y0(s)}),dn2:s=>({displayName:gh(s)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:s=>({bLocalRecord:1===s}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT",customerKey:"userIdentity"},Oc=s=>{const l={};return["add","remove","update"].forEach(u=>{const v=s[u];null!=v&&(l[u]=v.reduce((E,I)=>{const R=Object.keys(I).reduce((L,V)=>{const O=aI[V];return Object.assign(L,"function"==typeof O?O(I[V]):"string"==typeof O?{[`${O}`]:I[V]}:{[`${V}`]:I[V]}),L},{}),N=E.find(L=>L.userId===R.userId);return void 0!==N?Object.assign(N,R):E.push(R),E},[]))}),l},RB={name:"displayName",node:s=>({userId:Number(s)}),role:s=>({userRole:Number(s)})},AA=s=>Object.keys(s).reduce((l,u)=>{const h=RB[u];return Object.assign(l,"function"==typeof h?h(s[u]):"string"==typeof h?{[`${h}`]:s[u]}:{[`${u}`]:s[u]}),l},{});var GR=Object.freeze({__proto__:null,updateAttendeesEpic:(s,l)=>Wn(s,Mo).pipe(ht(u=>Oc(u.payload.body)),Fn(l),Pn(u=>{let[h,v]=u,E=[Nf(h)];const{meeting:{userId:I,isWebinar:R,isOnHold:N},participants:{attendeesList:L,failoverAttendeesList:V,allowTalkAttendeesList:O}}=v,X=O.map(re=>re.userId);if(h.add){const re=h.add.find(fe=>fe.userId===I);void 0!==re&&(void 0!==re.bHold&&E.push(ev(re.bHold)),dt(Xy,re));const ne=h.add.filter(fe=>fe.userId!==I);if(ne.length>0){const fe=ne.filter(Le=>!q0(Le.userRole)).map(Le=>{const Qe={...Le};if(xf(Le.userType)){var ze;const lt=null===(ze=v.audio)||void 0===ze?void 0:ze.dialout.find(tt=>tt.phoneNodeId===Le.userId);lt&&Object.assign(Qe,{phoneNumber:lt.phoneNumber})}const ft=V.find(lt=>lt.zoomID===Le.zoomID);return ft&&Object.assign(Qe,{source:ft.isOnHold?"on hold":"failover"}),Qe}),ve=fe.filter(Le=>!!Le.source).map(Le=>({zoomID:Le.zoomID}));if(E.push(xL(ve)),dt(rP,fe),R){const Le=ne.filter(Qe=>q0(Qe.userRole));Le.length>0&&dt(Rf,Le.map(Qe=>({userId:Qe.userId,isAllowToTalk:!0})))}}}if(h.update){const re=h.update.find(fe=>fe.userId===I);void 0!==re&&(dt(Zu,re),void 0!==re.bHold&&E.push(ev(re.bHold)));const ne=h.update.filter(fe=>!(fe.userId===I||X.includes(fe.userId)));if(ne.length>0&&dt(Dd,ne),R){const fe=h.update.filter(ve=>ve.userId!==I&&X.includes(ve.userId));fe.length>0&&dt(Rf,fe)}}if(h.remove){const re=h.remove.map(ne=>{const fe=L.find(ve=>ve.userId===ne.userId);return fe?2===ne.action&&1===ne.nUserStatus?fe.bHold?(E.push(H0({zoomID:fe.zoomID,isOnHold:!0})),{...ne,...fe,reason:"on hold"}):(E.push(H0({zoomID:fe.zoomID,isOnHold:!1})),{...ne,...fe,reason:"failover"}):{...ne,...fe}:null}).filter(ne=>!!ne);if(dt(TT,re),R){const ne=h.remove.filter(fe=>X.includes(fe.userId));ne.length>0&&dt(Rf,ne.map(fe=>({userId:fe.userId,isAllowToTalk:!1})))}}const ee=E.filter(re=>re.type===`${ev}`);if(ee.length>0){const re=ee[ee.length-1];E=E.filter(ne=>ne.type!==`${ev}`),re.payload!==N&&(E.push(re),dt(Zy,!N))}return En(E)})),receiveUserListFromXMPPEpic:(s,l)=>fh(s,24595).pipe(Pn(u=>{const{payload:{body:{action:h,data:v}}}=u,{meeting:{jid:E},participants:{xmppAttendeeList:I}}=l.value,R=[];if(h===ec.rename){v.forEach(L=>{R.push(LL(L))});const N=v.map(L=>AA(L));dt(Rf,N)}if(h===ec.Remove){v.forEach(L=>{R.push(BL(L))});const N=v.map(L=>({...AA(L),removed:!0}));dt(iP,N)}if([ec.Add,ec.List,ec.update].includes(h)){const N=v.map(L=>{const V=AA(L);return Object.keys(V).reduce((O,X)=>(""!==V[X]&&Object.assign(O,{[X]:V[X]}),O),{})});if(dt(Rf,N),R.push(JT(N)),h===ec.update){const L=v.find(V=>V.jid===E);L&&void 0!==L.bRaiseHand&&I.find(O=>O.jid===E)?.bRaiseHand!==L.bRaiseHand&&dt("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:L.bRaiseHand})}}return En(R)})),handleAdmitAllSilentUsersEpic:s=>Wn(s,7951).pipe(Zn(l=>{!1===l.payload.body.bStarted&&dt("ADMIT_ALL_SILENT_USERS_END",l.payload.body.bStarted)}),ht(l=>EE(l.payload.body.bStarted))),handleKVUpdateIndicationEpic:s=>Wn(s,7946).pipe(ln(l=>{var u;return["bRaiseHand","feedback"].includes(null===(u=l.payload.body)||void 0===u?void 0:u.key)&&0===l.payload.body.value}),ht(l=>(dt(Dd,{}),"bRaiseHand"===l.payload.body.key?bE():G0())))});const wb={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},cI=Gn({[`${Nf}`]:gt((s,l)=>{let{payload:u}=l;void 0!==u.add&&u.add.length>0&&u.add.forEach(h=>{if(h.userType===$T.Assitant){const v=s.assistantList.find(E=>E.userId===h.userId);void 0!==v?Object.assign(v,h):s.assistantList.push(h)}else if(q0(h.userRole)){const v=s.allowTalkAttendeesList.find(E=>E.userId===h.userId);void 0!==v?Object.assign(v,h):s.allowTalkAttendeesList.push(h)}else{const v=s.attendeesList.find(E=>E.userId===h.userId);void 0!==v?Object.assign(v,h):s.attendeesList.push(h)}}),void 0!==u.update&&u.update.length>0&&u.update.forEach(h=>{const v=s.attendeesList.find(E=>E.userId===h.userId);if(void 0!==v)Object.assign(v,h);else{const E=s.allowTalkAttendeesList.find(I=>I.userId===h.userId);if(void 0!==E)Object.assign(E,h);else{const I=s.assistantList.find(R=>R.userId===h.userId);void 0!==I&&Object.assign(I,h)}}}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(h=>{const v=s.attendeesList.findIndex(E=>E.userId===h.userId);if(-1!==v)s.attendeesList.splice(v,1);else{const E=s.allowTalkAttendeesList.findIndex(I=>I.userId===h.userId);if(-1!==E)s.allowTalkAttendeesList.splice(E,1);else{const I=s.assistantList.findIndex(R=>R.userId===h.userId);-1!==I&&s.assistantList.splice(I,1)}}})}),[`${JT}`]:gt((s,l)=>{let{payload:u}=l;const{xmppAttendeeList:h}=s,v=h.map(E=>E.jid);u.forEach(E=>{const{jid:I}=E,R=v.indexOf(I);-1!==R?Object.assign(h[R],E):h.push(E)})}),[`${EE}`]:gt((s,l)=>{let{payload:u}=l;s.isAdmitAllSilentUsers=u}),[`${bE}`]:gt(s=>{s.attendeesList.forEach(l=>{l.bRaiseHand&&(l.bRaiseHand=!1)})}),[`${G0}`]:gt(s=>{s.attendeesList.forEach(l=>{l.feedback>0&&(l.feedback=0)})}),[`${H0}`]:gt((s,l)=>{let{payload:u}=l;s.failoverAttendeesList.push(u)}),[`${xL}`]:gt((s,l)=>{let{payload:u}=l;u.forEach(h=>{const v=s.failoverAttendeesList.findIndex(E=>E.zoomID===h.zoomID);-1!==v&&s.failoverAttendeesList.splice(v,1)})}),[`${LL}`]:gt((s,l)=>{let{payload:u}=l;const{jid:h,name:v}=u,E=s.xmppAttendeeList.find(I=>I.jid===h);E&&(E.displayName=v)}),[`${BL}`]:gt((s,l)=>{let{payload:u}=l;const{jid:h}=u,v=s.xmppAttendeeList.findIndex(E=>E.jid===h);-1!==h&&s.xmppAttendeeList.splice(v,1)}),[`${SE}`]:gt((s,l)=>{let{payload:u}=l;const{userId:h,key:v,value:E}=u,I=s.attendeesList.find(R=>R.userId===h);I&&(I[`${v}`]=E)}),[`${NL}`]:()=>wb},wb),uI=dc(GR),qM={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,fileWithVersion:!1,enforceMultipleVideos:!1,enforceVirtualBackground:!1},lI=Gn({[`${Wm}`]:gt((s,l)=>{let{payload:u}=l;s.audioDecodeStatus=u}),[`${Gm}`]:gt((s,l)=>{let{payload:u}=l;s.audioEncodeStatus=u}),[`${_f}`]:gt((s,l)=>{let{payload:u}=l;s.sharingDecodeStatus=u}),[`${Ia}`]:gt((s,l)=>{let{payload:u}=l;s.sharingEncodeStatus=u}),[`${hh}`]:gt((s,l)=>{let{payload:u}=l;s.videoDecodeStatus=u}),[`${$S}`]:gt((s,l)=>{let{payload:u}=l;s.videoEncodeStatus=u}),[`${Km}`]:gt((s,l)=>{let{payload:u}=l;s.mediaConstraints=u.mediaConstraints,s.assetsPath=u.assetsPath,s.fileWithVersion=u.fileWithVersion,s.enforceMultipleVideos=u.enforceMultipleVideos,s.enforceVirtualBackground=u.enforceVirtualBackground}),[`${Id}`]:gt((s,l)=>{let{payload:u}=l;const{type:h,encrypeKey:v,additionalType:E}=u,I={encrypeKey:v,additionalType:E};"audio"===h?s.audioEncrypt=I:"video"===h?s.videoEncrypt=I:"sharing"===h&&(s.sharingEncrypt=I)}),[`${q_}`]:gt((s,l)=>{let{payload:u}=l;s.isEnableDecoderInWorklet=u}),[`${hT}`]:s=>({...qM,mediaConstraints:s.mediaConstraints,assetsPath:s.assetsPath,fileWithVersion:s.fileWithVersion,enforceMultipleVideos:s.enforceMultipleVideos,enforceVirtualBackground:s.enforceVirtualBackground})},qM);var jp={exports:{}},Tb={};(function(s,l){var u=function(xt,It){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,$t){et.__proto__=$t}||function(et,$t){for(var Cn in $t)$t.hasOwnProperty(Cn)&&(et[Cn]=$t[Cn])})(xt,It)};function h(xt,It){function et(){this.constructor=xt}u(xt,It),xt.prototype=null===It?Object.create(It):(et.prototype=It.prototype,new et)}var E,v=function(){return v=Object.assign||function(xt){for(var It,et=1,$t=arguments.length;et<$t;et++)for(var Cn in It=arguments[et])Object.prototype.hasOwnProperty.call(It,Cn)&&(xt[Cn]=It[Cn]);return xt},v.apply(this,arguments)},I=function(xt,It){var et=new Uint8Array(xt.byteLength+It.byteLength);return et.set(new Uint8Array(xt),0),et.set(new Uint8Array(It),xt.byteLength),et.buffer},R="/";(E=s.TransformDataFormat||(s.TransformDataFormat={})).STRING="string",E.BLOB="blob",E.ARRAY_BUFFER="arraybuffer";var N=function(xt){return Blob&&xt instanceof Blob?"blob":ArrayBuffer&&xt instanceof ArrayBuffer?"arrayBuffer":typeof xt},L=[],V=function(){for(var xt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],It="",et=0;et<32;et++)It+=xt[Math.round(61*Math.random())];return-1!==L.indexOf(It)?V():(L.push(It),It)},O=function(xt){return xt.arrayBuffer?xt.arrayBuffer():new Promise(function(It,et){var $t=new FileReader;$t.readAsArrayBuffer(xt),$t.onload=function(Cn){It(Cn.target&&Cn.target.result)},$t.onerror=function(Cn){et(Cn)}})},X=function(xt){return xt.text?xt.text():new Promise(function(It,et){var $t=new FileReader;$t.readAsText(xt),$t.onload=function(Cn){It(Cn.target&&Cn.target.result)},$t.onerror=function(Cn){et(Cn)}})},ee=function(xt,It){return Promise.resolve(new Blob([new Uint8Array(xt)],{type:It}))},re=function(xt,It){var et=new Blob([xt],{type:It||"text/plain"});return X(et)},ne=function(xt,It){return Promise.resolve(new Blob([xt],{type:It||"text/plain"}))},fe=function(xt,It){return O(new Blob([xt],{type:It||"text/plain"}))};function ve(xt){var It=(xt||"").split(".");return It[It.length-1]||""}function Le(xt){var It=(xt||"").lastIndexOf(R);return It<0?"":xt.slice(0,It)}function Qe(xt){var It=(xt||"").lastIndexOf(R),et=It<0?xt:xt.slice(It+1),$t=(et||"").lastIndexOf(".");return $t<0?et:et.slice(0,$t)}function ze(xt){return["png","jpg","jpeg","svg"].includes(ve(xt))}function ft(xt){return"json"===ve(xt)}function lt(xt){return"version"===ve(xt)}function St(xt,It){return l.loadAsync(xt).then(function(et){return Promise.all(et.filter(function($t,Cn){return!Cn.dir}).map(function($t){var Ln,Cn=ft((Ln=$t).name)?"string":ze(Ln.name)?"base64":lt(Ln.name)?"text":"blob";return It?.setUnZipFormat&&(Cn=It.setUnZipFormat($t)||Cn),$t.async(Cn).then(function(Ln){var rt=Ln,hr=ve($t.name),Hr="svg"===hr?"svg+xml":hr;return"base64"===Cn&&ze($t.name)&&!Ln.startsWith("data")&&(rt="data:image/"+Hr+";base64,"+rt),{data:rt,file:$t}})}))}).then(function(et){return function tt(xt,It){return xt.reduce(function(et,$t){var Cn,Ln=$t.data,rt=$t.file,hr=ve(rt.name),Hr=Le(rt.name),Xr=Qe(rt.name),Mn=(It?.combineExtNames||[]).includes(hr)&&"string"==typeof Ln,Ir=Mn?""+(Hr?""+Hr+R+hr:hr):rt.name;return Mn&&et.some(function(fo){return fo.path===Ir&&(fo.data[Xr]=Ln,!0)})||et.push({path:Ir,extName:hr,data:Mn?(Cn={},Cn[Xr]=Ln,Cn):Ln,shouldCombine:Mn}),et},[]).map(function(et){var $t=et.data,Cn=et.shouldCombine,Ln=function(rt,hr){var Hr={};for(var Xr in rt)Object.prototype.hasOwnProperty.call(rt,Xr)&&hr.indexOf(Xr)<0&&(Hr[Xr]=rt[Xr]);if(null!=rt&&"function"==typeof Object.getOwnPropertySymbols){var Mn=0;for(Xr=Object.getOwnPropertySymbols(rt);Mn<Xr.length;Mn++)hr.indexOf(Xr[Mn])<0&&Object.prototype.propertyIsEnumerable.call(rt,Xr[Mn])&&(Hr[Xr[Mn]]=rt[Xr[Mn]])}return Hr}(et,["data","shouldCombine"]);return v(v({},Ln),{data:Cn?JSON.stringify($t):$t})})}(et,It)})}function Zt(xt,It){var Eo,et=It||{},$t=et.encoding,Cn=et.blobType,Ln=et.unZipOptions;if("blob"===N(Eo=xt)&&(Eo.type.includes("compressed")||Eo.type.includes("zip"))&&!Ln?.disableUnZip)return St(xt,Ln);if(!$t)return Promise.resolve(xt);var rt=N(xt),hr="string"===rt,Hr="blob"===rt,Xr="arrayBuffer"===rt;if($t===s.TransformDataFormat.BLOB){var Mn=xt;if(hr)return X(Mn);if(Xr)return O(Mn)}else if($t===s.TransformDataFormat.ARRAY_BUFFER){var Ir=xt;if(hr)return re(Ir,Cn);if(Hr)return ee(Ir,Cn)}else if($t===s.TransformDataFormat.STRING){var fo=xt;if(Hr)return ne(fo,Cn);if(Xr)return fe(fo,Cn)}return Promise.resolve(xt)}function ut(xt){var It=0,et=!1,$t=function(){It>90||et||(xt(It+=(100-It)/50),requestAnimationFrame($t))};return $t(),{finish:function(){100===It||et||(It=100,xt(100))},abort:function(){100===It||et||(et=!0)},get curProgress(){return It}}}function Ze(){}function _e(){_e.init.call(this)}function He(xt){return void 0===xt._maxListeners?_e.defaultMaxListeners:xt._maxListeners}function ct(xt,It,et,$t){var Cn,Ln,rt,Hr;if("function"!=typeof et)throw new TypeError('"listener" argument must be a function');if((Ln=xt._events)?(Ln.newListener&&(xt.emit("newListener",It,et.listener?et.listener:et),Ln=xt._events),rt=Ln[It]):(Ln=xt._events=new Ze,xt._eventsCount=0),rt){if("function"==typeof rt?rt=Ln[It]=$t?[et,rt]:[rt,et]:$t?rt.unshift(et):rt.push(et),!rt.warned&&(Cn=He(xt))&&Cn>0&&rt.length>Cn){rt.warned=!0;var hr=new Error("Possible EventEmitter memory leak detected. "+rt.length+" "+It+" listeners added. Use emitter.setMaxListeners() to increase limit");hr.name="MaxListenersExceededWarning",hr.emitter=xt,hr.type=It,hr.count=rt.length,Hr=hr,"function"==typeof console.warn?console.warn(Hr):console.log(Hr)}}else rt=Ln[It]=et,++xt._eventsCount;return xt}function st(xt,It,et){var $t=!1;function Cn(){xt.removeListener(It,Cn),$t||($t=!0,et.apply(xt,arguments))}return Cn.listener=et,Cn}function Ne(xt){var It=this._events;if(It){var et=It[xt];if("function"==typeof et)return 1;if(et)return et.length}return 0}function Jt(xt,It){for(var et=new Array(It);It--;)et[It]=xt[It];return et}Ze.prototype=Object.create(null),_e.EventEmitter=_e,_e.usingDomains=!1,_e.prototype.domain=void 0,_e.prototype._events=void 0,_e.prototype._maxListeners=void 0,_e.defaultMaxListeners=10,_e.init=function(){this.domain=null,_e.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Ze,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_e.prototype.setMaxListeners=function(xt){if("number"!=typeof xt||xt<0||isNaN(xt))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=xt,this},_e.prototype.getMaxListeners=function(){return He(this)},_e.prototype.emit=function(xt){var It,et,$t,Cn,Ln,rt,hr,Hr="error"===xt;if(rt=this._events)Hr=Hr&&null==rt.error;else if(!Hr)return!1;if(hr=this.domain,Hr){if(It=arguments[1],!hr){if(It instanceof Error)throw It;var Xr=new Error('Uncaught, unspecified "error" event. ('+It+")");throw Xr.context=It,Xr}return It||(It=new Error('Uncaught, unspecified "error" event')),It.domainEmitter=this,It.domain=hr,It.domainThrown=!1,hr.emit("error",It),!1}if(!(et=rt[xt]))return!1;var Mn="function"==typeof et;switch($t=arguments.length){case 1:!function(Ir,fo,Eo){if(fo)Ir.call(Eo);else for(var Fi=Ir.length,Vo=Jt(Ir,Fi),Hi=0;Hi<Fi;++Hi)Vo[Hi].call(Eo)}(et,Mn,this);break;case 2:!function(Ir,fo,Eo,Fi){if(fo)Ir.call(Eo,Fi);else for(var Vo=Ir.length,Hi=Jt(Ir,Vo),ms=0;ms<Vo;++ms)Hi[ms].call(Eo,Fi)}(et,Mn,this,arguments[1]);break;case 3:!function(Ir,fo,Eo,Fi,Vo){if(fo)Ir.call(Eo,Fi,Vo);else for(var Hi=Ir.length,ms=Jt(Ir,Hi),xu=0;xu<Hi;++xu)ms[xu].call(Eo,Fi,Vo)}(et,Mn,this,arguments[1],arguments[2]);break;case 4:!function(Ir,fo,Eo,Fi,Vo,Hi){if(fo)Ir.call(Eo,Fi,Vo,Hi);else for(var ms=Ir.length,xu=Jt(Ir,ms),Fa=0;Fa<ms;++Fa)xu[Fa].call(Eo,Fi,Vo,Hi)}(et,Mn,this,arguments[1],arguments[2],arguments[3]);break;default:for(Cn=new Array($t-1),Ln=1;Ln<$t;Ln++)Cn[Ln-1]=arguments[Ln];!function(Ir,fo,Eo,Fi){if(fo)Ir.apply(Eo,Fi);else for(var Vo=Ir.length,Hi=Jt(Ir,Vo),ms=0;ms<Vo;++ms)Hi[ms].apply(Eo,Fi)}(et,Mn,this,Cn)}return!0},_e.prototype.on=_e.prototype.addListener=function(xt,It){return ct(this,xt,It,!1)},_e.prototype.prependListener=function(xt,It){return ct(this,xt,It,!0)},_e.prototype.once=function(xt,It){if("function"!=typeof It)throw new TypeError('"listener" argument must be a function');return this.on(xt,st(this,xt,It)),this},_e.prototype.prependOnceListener=function(xt,It){if("function"!=typeof It)throw new TypeError('"listener" argument must be a function');return this.prependListener(xt,st(this,xt,It)),this},_e.prototype.removeListener=function(xt,It){var et,$t,Cn,Ln,rt;if("function"!=typeof It)throw new TypeError('"listener" argument must be a function');if(!($t=this._events))return this;if(!(et=$t[xt]))return this;if(et===It||et.listener&&et.listener===It)0==--this._eventsCount?this._events=new Ze:(delete $t[xt],$t.removeListener&&this.emit("removeListener",xt,et.listener||It));else if("function"!=typeof et){for(Cn=-1,Ln=et.length;Ln-- >0;)if(et[Ln]===It||et[Ln].listener&&et[Ln].listener===It){rt=et[Ln].listener,Cn=Ln;break}if(Cn<0)return this;if(1===et.length){if(et[0]=void 0,0==--this._eventsCount)return this._events=new Ze,this;delete $t[xt]}else!function(hr,Hr){for(var Xr=Hr,Mn=Xr+1,Ir=hr.length;Mn<Ir;Xr+=1,Mn+=1)hr[Xr]=hr[Mn];hr.pop()}(et,Cn);$t.removeListener&&this.emit("removeListener",xt,rt||It)}return this},_e.prototype.removeAllListeners=function(xt){var It,et;if(!(et=this._events))return this;if(!et.removeListener)return 0===arguments.length?(this._events=new Ze,this._eventsCount=0):et[xt]&&(0==--this._eventsCount?this._events=new Ze:delete et[xt]),this;if(0===arguments.length){for(var $t,Cn=Object.keys(et),Ln=0;Ln<Cn.length;++Ln)"removeListener"!==($t=Cn[Ln])&&this.removeAllListeners($t);return this.removeAllListeners("removeListener"),this._events=new Ze,this._eventsCount=0,this}if("function"==typeof(It=et[xt]))this.removeListener(xt,It);else if(It)do{this.removeListener(xt,It[It.length-1])}while(It[0]);return this},_e.prototype.listeners=function(xt){var It,et=this._events;return et&&(It=et[xt])?"function"==typeof It?[It.listener||It]:function($t){for(var Cn=new Array($t.length),Ln=0;Ln<Cn.length;++Ln)Cn[Ln]=$t[Ln].listener||$t[Ln];return Cn}(It):[]},_e.listenerCount=function(xt,It){return"function"==typeof xt.listenerCount?xt.listenerCount(It):Ne.call(xt,It)},_e.prototype.listenerCount=Ne,_e.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Ft=function(xt){function It(et){var $t=xt.call(this)||this;return $t.timeout=et?.timeout||3e4,$t}return h(It,xt),It.prototype.clearTimeoutCheck=function(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)},It.prototype.startTimeoutCheck=function(){var et=this;!this.timeoutTimer&&!this.finished&&this.timeout>0&&(this.timeoutTimer=setTimeout(function(){et.finished||(et.finished=!0,et.data=null,et.emit("timeout")),et.clearTimeoutCheck()},this.timeout))},It}(_e),yn=function(xt){function It(et){var $t=xt.call(this,et)||this;return $t.uuid=V(),$t.domParams=et||{},$t}return h(It,xt),It.prototype.jsonp=function(){var et=this;if(!this.finished){var $t=this.domParams,Cn=$t.url,Ln=$t.jsonpCallbackName,rt=void 0===Ln?"callback":Ln,hr=$t.body,Hr=$t.integrity;this.script=document.createElement("script"),Hr&&(this.script.integrity=Hr,this.script.crossOrigin="anonymous");var Xr="";hr&&Object.entries(hr).forEach(function(Mn){Xr+=(Xr?"&":"")+Mn[0]+"="+Mn[1]}),Xr+=(Xr?"&":"")+rt+"="+this.uuid,this.script.src=Cn+(Cn.includes("?")?"":"?")+Xr,this.jsonpCallback(),this.progressMonitory=ut(function(Mn){et.finished||et.emit("progressUpdated",Mn)}),document.body.appendChild(this.script)}},It.prototype.clearSideEffect=function(et){if(void 0===et&&(et=!1),document.body.removeChild(this.script),et){var $t=this.uuid;window[this.uuid]=function(){window[$t]&&delete window[$t]}}else delete window[this.uuid];this.script=null,this.uuid=null,this.finished=!0,this.data=null,this.clearTimeoutCheck()},It.prototype.jsonpCallback=function(){var et=this;this.script.onerror=function($t){var Cn;et.finished||(et.clearSideEffect(),null===(Cn=et.progressMonitory)||void 0===Cn||Cn.abort(),et.emit("error",new Error("string"==typeof $t?$t:"load jsonp script failed")))},window[this.uuid]=function($t){var Cn;if(!et.finished){var Ln=et.domParams,rt=Ln.encoding,hr=Ln.blobType,Hr=Ln.unZipOptions,Xr=Ln.beforeTransformData,Mn=Ln.afterTransformData;null===(Cn=et.progressMonitory)||void 0===Cn||Cn.finish(),et.clearSideEffect(),(Xr?Xr($t||""):Promise.resolve($t||"")).then(function(Ir){return Zt(Ir,{encoding:rt,blobType:hr,unZipOptions:Hr}).then(function(fo){return(Mn?Mn(fo):Promise.resolve(fo)).then(function(Eo){return et.emit("finished",Eo)})})}).catch(function(Ir){return et.emit("error",Ir)})}}},It.prototype.abort=function(){this.clearSideEffect(!0)},It}(Ft),mr=function(xt){function It(et){var $t=xt.call(this,et)||this;return $t.socketParams=et||{},$t}return h(It,xt),It.prototype.write=function(et,$t){et&&!this.finished&&(et instanceof Error?this.handleError(et):(this.data?this.appendData(et):this.data=et,this.handlePerCentUpdate($t)))},It.prototype.handlePerCentUpdate=function(et){void 0===et||this.finished||this.emit("progressUpdated",et)},It.prototype.handleError=function(et){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.emit("error",et)},It.prototype.appendData=function(et){N(et)===N(this.data)?"string"==typeof et?this.data+=et:Blob&&et instanceof Blob?this.data=new Blob([this.data,et],{type:et.type}):ArrayBuffer&&et instanceof ArrayBuffer&&(this.data=I(this.data,et)):this.handleError(new Error("every piece of the data format must be the same"))},It.prototype.end=function(et){var $t=this;if(!this.finished){this.handlePerCentUpdate(100),et&&this.write(et);var Cn=this.socketParams,Ln=Cn.encoding,rt=Cn.blobType,hr=Cn.unZipOptions,Hr=Cn.beforeTransformData,Xr=Cn.afterTransformData;(Hr?Hr(this.data):Promise.resolve(this.data)).then(function(Mn){return Zt(Mn,{encoding:Ln,blobType:rt,unZipOptions:hr}).then(function(Ir){return(Xr?Xr(Ir):Promise.resolve(Ir)).then(function(fo){return $t.emit("finished",fo)})})}).catch(function(Mn){return $t.emit("error",Mn)}),this.data=null,this.finished=!0,this.clearTimeoutCheck()}},It.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck()},It}(Ft),tr=function(xt){function It(et){var $t=xt.call(this,et)||this;return $t.xhrParams=et||{},$t.xhrParams.headers=v({},$t.xhrParams.headers||{}),$t}return h(It,xt),It.prototype.supportFetch=function(){return!!window.fetch&&window.AbortController&&window.Request},It.prototype.ajax=function(){var et=this;if(!this.finished)if(this.xhrParams.url){var $t=this.xhrParams,Cn=$t.headers,Ln=void 0===Cn?{}:Cn,rt=$t.url,hr=$t.body,Hr=void 0===hr?{}:hr,Xr=$t.method,Mn=void 0===Xr?"POST":Xr,Ir=$t.encoding,fo=$t.integrity;this.controller=this.supportFetch()?new AbortController:new XMLHttpRequest;var Eo=this.supportFetch()?ut(function(Fi){et.finished||et.emit("progressUpdated",Fi)}):null;(this.supportFetch()?fetch(new Request(rt,v({method:Mn,headers:Ln,body:"GET"===Mn?void 0:JSON.stringify(Hr),signal:this.controller.signal},fo?{integrity:fo,mode:"cors"}:{}))).then(function(Fi){return Fi.ok?Ir===s.TransformDataFormat.STRING?Fi.text():Ir===s.TransformDataFormat.ARRAY_BUFFER?Fi.arrayBuffer():Fi.blob():Promise.reject(new Error("xhr download "+rt+" failed!"))}):new Promise(function(Fi,Vo){var Hi=new XMLHttpRequest;et.controller=Hi,Hi.open(Mn,rt),Hi.responseType=Ir===s.TransformDataFormat.STRING?"text":Ir===s.TransformDataFormat.ARRAY_BUFFER?"arraybuffer":"blob",Object.entries(Ln).forEach(function(ms){Hi.setRequestHeader(ms[0],ms[1])}),Hi.onload=function(){var ms=Hi.status,Fa=Hi.statusText;ms>=200&&ms<300||304===ms?Fi(Hi.response):Vo(new Error(ms+": "+Fa))},Hi.onprogress=function(ms){var xu=ms||{},Fa=xu.total,ym=xu.loaded;void 0===ym||et.finished||(Fa?et.emit("progressUpdated",ym/Fa*100):ym&&!Eo&&(Eo=ut(function(fw){et.finished||et.emit("progressUpdated",fw)})))},Hi.onerror=function(){Vo(new Error("xhr download "+rt+" failed!"))},Hi.send(JSON.stringify(Hr))})).then(function(Fi){if(!et.finished){var Vo=et.xhrParams,Hi=Vo.encoding,ms=Vo.blobType,xu=Vo.unZipOptions,Fa=Vo.beforeTransformData,ym=Vo.afterTransformData;Eo?.finish(),et.finished=!0,et.clearTimeoutCheck(),(Fa?Fa(Fi):Promise.resolve(Fi)).then(function(fw){return Zt(fw,{encoding:Hi,blobType:ms,unZipOptions:xu}).then(function(mF){return(ym?ym(mF):Promise.resolve(mF)).then(function(m4){return et.emit("finished",m4)})})}).catch(function(fw){return et.emit("error",fw)})}}).catch(function(Fi){et.finished||(et.finished=!0,et.clearTimeoutCheck(),Eo?.abort(),et.emit("error",Fi))})}else this.emit("error",new Error("xhrDownloader url params invalid!"))},It.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.controller.abort()},It}(Ft),Tr=0;_e.defaultMaxListeners=500;var gr,lr=new _e,Hn="ThreadPoolReady",$r=function(){Tr-=1,lr.emit(Hn)};(gr=s.DownloaderType||(s.DownloaderType={})).XHR="xhr",gr.DOM="dom",gr.SOCKET="socket";var eo=function(xt){function It(et){var $t=xt.call(this)||this;return $t.aborted=!1,$t.downloadParmas=v({type:s.DownloaderType.XHR},et),$t.id=V(),$t}return h(It,xt),It.prototype.start=function(){var et=this;Tr+=1,this.progress=0,this.emit("downloadStart"),this.onDownloadStartCallback&&this.onDownloadStartCallback();var $t=this.downloadParmas,Ln=$t.xhrParams,rt=$t.domParams,hr=$t.socketParams;switch($t.type){case s.DownloaderType.DOM:this.downloader=new yn(rt),this.downloader.jsonp();break;case s.DownloaderType.SOCKET:this.downloader=new mr(hr);break;default:this.downloader=new tr(Ln),this.downloader.ajax()}return this.downloader.startTimeoutCheck(),this.downloader.on("error",function(Hr){et.emit("error",Hr),et.onErrorCallback&&et.onErrorCallback(Hr),$r()}).on("finished",function(Hr){et.emit("complete",Hr),et.onCompleteCallback&&et.onCompleteCallback(Hr),$r()}).on("progressUpdated",function(Hr){et.progress=Hr,et.emit("progressUpdated",Hr),et.onProgressUpdatedCallback&&et.onProgressUpdatedCallback(Hr)}).on("timeout",function(){et.emit("timeout"),et.onTimeoutCallback&&et.onTimeoutCallback(),$r()}),this},It.prototype.abort=function(){if(this.aborted)return this;this.aborted=!0,this.downloader&&!this.downloader.finished&&this.downloader.abort();var et=new Error("file download has been aborted");return this.emit("abort",et),this.onAbortCallback&&this.onAbortCallback(et),$r(),this},It.prototype.onDownloadStart=function(et){return this.onDownloadStartCallback=et,this},It.prototype.onProgressUpdated=function(et){return this.onProgressUpdatedCallback=et,this},It.prototype.onError=function(et){return this.onErrorCallback=et,this},It.prototype.onComplete=function(et){return this.onCompleteCallback=et,this},It.prototype.onAbort=function(et){return this.onAbortCallback=et,this},It.prototype.onTimeout=function(et){return this.onTimeoutCallback=et,this},It.prototype.isInProgress=function(){return void 0!==this.progress},It.prototype.isFinished=function(){return 100===this.progress},It}(_e),co=function(){function xt(It){this.taskList=[],this.options=It||{};var et=this.options.threadLimit;if((void 0===et?6:et)>6)throw new Error("threadLimit must be lower than 6");lr.on(Hn,this.startNextTask.bind(this))}return xt.prototype.download=function(It){var et=new eo(It),$t=this.removeTask.bind(this,et);return et.on("abort",$t),this.taskList.push(et),this.checkTaskReady(et),et},xt.prototype.startNextTask=function(){var It=this.taskList.find(function(et){return!et.isInProgress()});It&&this.checkTaskReady(It)},xt.prototype.checkTaskReady=function(It){var et=this.options.threadLimit,$t=void 0===et?6:et;if(!(this.taskList.findIndex(function(Ln){return!Ln.isInProgress()})>=$t||Tr+1>6)){var Cn=this.removeTask.bind(this,It);It.on("complete",Cn),It.on("error",Cn),It.on("timeout",Cn),setTimeout(function(){return It.start()},0)}},xt.prototype.removeTask=function(It){var et=this;this.taskList.some(function($t,Cn){return $t===It&&(setTimeout(function(){return It.removeAllListeners()},0),et.taskList.splice(Cn,1),!0)})},xt}();s.DownloadTask=eo,s.IDownloadManager=co,s.appendBuffer=I,s.arrayBufferToBlob=ee,s.arrayBufferToString=re,s.blobToArrayBuffer=O,s.blobToText=X,s.genUuid=V,s.getDataFormat=N,s.getExtName=ve,s.getFileName=Qe,s.getFullPathName=Le,s.isImgFile=ze,s.isJsonFile=ft,s.isVersionFile=lt,s.monitorProgress=ut,s.sep=R,s.stringToArrayBuffer=fe,s.stringToBlob=ne,s.transformData=Zt,Object.defineProperty(s,"__esModule",{value:!0})})(Tb,Lk(Object.freeze({__proto__:null,default:{}}))),xk(Tb),function(s,l){var u=function(ut,Ze){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,He){_e.__proto__=He}||function(_e,He){for(var ct in He)He.hasOwnProperty(ct)&&(_e[ct]=He[ct])})(ut,Ze)};function h(ut,Ze){function _e(){this.constructor=ut}u(ut,Ze),ut.prototype=null===Ze?Object.create(Ze):(_e.prototype=Ze.prototype,new _e)}var v=function(){return v=Object.assign||function(ut){for(var Ze,_e=1,He=arguments.length;_e<He;_e++)for(var ct in Ze=arguments[_e])Object.prototype.hasOwnProperty.call(Ze,ct)&&(ut[ct]=Ze[ct]);return ut},v.apply(this,arguments)};function E(){}function I(){I.init.call(this)}function R(ut){return void 0===ut._maxListeners?I.defaultMaxListeners:ut._maxListeners}function N(ut,Ze,_e,He){var ct,st,Ne,Ft;if("function"!=typeof _e)throw new TypeError('"listener" argument must be a function');if((st=ut._events)?(st.newListener&&(ut.emit("newListener",Ze,_e.listener?_e.listener:_e),st=ut._events),Ne=st[Ze]):(st=ut._events=new E,ut._eventsCount=0),Ne){if("function"==typeof Ne?Ne=st[Ze]=He?[_e,Ne]:[Ne,_e]:He?Ne.unshift(_e):Ne.push(_e),!Ne.warned&&(ct=R(ut))&&ct>0&&Ne.length>ct){Ne.warned=!0;var Jt=new Error("Possible EventEmitter memory leak detected. "+Ne.length+" "+Ze+" listeners added. Use emitter.setMaxListeners() to increase limit");Jt.name="MaxListenersExceededWarning",Jt.emitter=ut,Jt.type=Ze,Jt.count=Ne.length,Ft=Jt,"function"==typeof console.warn?console.warn(Ft):console.log(Ft)}}else Ne=st[Ze]=_e,++ut._eventsCount;return ut}function L(ut,Ze,_e){var He=!1;function ct(){ut.removeListener(Ze,ct),He||(He=!0,_e.apply(ut,arguments))}return ct.listener=_e,ct}function V(ut){var Ze=this._events;if(Ze){var _e=Ze[ut];if("function"==typeof _e)return 1;if(_e)return _e.length}return 0}function O(ut,Ze){for(var _e=new Array(Ze);Ze--;)_e[Ze]=ut[Ze];return _e}E.prototype=Object.create(null),I.EventEmitter=I,I.usingDomains=!1,I.prototype.domain=void 0,I.prototype._events=void 0,I.prototype._maxListeners=void 0,I.defaultMaxListeners=10,I.init=function(){this.domain=null,I.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new E,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},I.prototype.setMaxListeners=function(ut){if("number"!=typeof ut||ut<0||isNaN(ut))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=ut,this},I.prototype.getMaxListeners=function(){return R(this)},I.prototype.emit=function(ut){var Ze,_e,He,ct,st,Ne,Jt,Ft="error"===ut;if(Ne=this._events)Ft=Ft&&null==Ne.error;else if(!Ft)return!1;if(Jt=this.domain,Ft){if(Ze=arguments[1],!Jt){if(Ze instanceof Error)throw Ze;var yn=new Error('Uncaught, unspecified "error" event. ('+Ze+")");throw yn.context=Ze,yn}return Ze||(Ze=new Error('Uncaught, unspecified "error" event')),Ze.domainEmitter=this,Ze.domain=Jt,Ze.domainThrown=!1,Jt.emit("error",Ze),!1}if(!(_e=Ne[ut]))return!1;var mr="function"==typeof _e;switch(He=arguments.length){case 1:!function(tr,Tr,gr){if(Tr)tr.call(gr);else for(var lr=tr.length,Hn=O(tr,lr),$r=0;$r<lr;++$r)Hn[$r].call(gr)}(_e,mr,this);break;case 2:!function(tr,Tr,gr,lr){if(Tr)tr.call(gr,lr);else for(var Hn=tr.length,$r=O(tr,Hn),eo=0;eo<Hn;++eo)$r[eo].call(gr,lr)}(_e,mr,this,arguments[1]);break;case 3:!function(tr,Tr,gr,lr,Hn){if(Tr)tr.call(gr,lr,Hn);else for(var $r=tr.length,eo=O(tr,$r),co=0;co<$r;++co)eo[co].call(gr,lr,Hn)}(_e,mr,this,arguments[1],arguments[2]);break;case 4:!function(tr,Tr,gr,lr,Hn,$r){if(Tr)tr.call(gr,lr,Hn,$r);else for(var eo=tr.length,co=O(tr,eo),xt=0;xt<eo;++xt)co[xt].call(gr,lr,Hn,$r)}(_e,mr,this,arguments[1],arguments[2],arguments[3]);break;default:for(ct=new Array(He-1),st=1;st<He;st++)ct[st-1]=arguments[st];!function(tr,Tr,gr,lr){if(Tr)tr.apply(gr,lr);else for(var Hn=tr.length,$r=O(tr,Hn),eo=0;eo<Hn;++eo)$r[eo].apply(gr,lr)}(_e,mr,this,ct)}return!0},I.prototype.on=I.prototype.addListener=function(ut,Ze){return N(this,ut,Ze,!1)},I.prototype.prependListener=function(ut,Ze){return N(this,ut,Ze,!0)},I.prototype.once=function(ut,Ze){if("function"!=typeof Ze)throw new TypeError('"listener" argument must be a function');return this.on(ut,L(this,ut,Ze)),this},I.prototype.prependOnceListener=function(ut,Ze){if("function"!=typeof Ze)throw new TypeError('"listener" argument must be a function');return this.prependListener(ut,L(this,ut,Ze)),this},I.prototype.removeListener=function(ut,Ze){var _e,He,ct,st,Ne;if("function"!=typeof Ze)throw new TypeError('"listener" argument must be a function');if(!(He=this._events))return this;if(!(_e=He[ut]))return this;if(_e===Ze||_e.listener&&_e.listener===Ze)0==--this._eventsCount?this._events=new E:(delete He[ut],He.removeListener&&this.emit("removeListener",ut,_e.listener||Ze));else if("function"!=typeof _e){for(ct=-1,st=_e.length;st-- >0;)if(_e[st]===Ze||_e[st].listener&&_e[st].listener===Ze){Ne=_e[st].listener,ct=st;break}if(ct<0)return this;if(1===_e.length){if(_e[0]=void 0,0==--this._eventsCount)return this._events=new E,this;delete He[ut]}else!function(Jt,Ft){for(var yn=Ft,mr=yn+1,tr=Jt.length;mr<tr;yn+=1,mr+=1)Jt[yn]=Jt[mr];Jt.pop()}(_e,ct);He.removeListener&&this.emit("removeListener",ut,Ne||Ze)}return this},I.prototype.removeAllListeners=function(ut){var Ze,_e;if(!(_e=this._events))return this;if(!_e.removeListener)return 0===arguments.length?(this._events=new E,this._eventsCount=0):_e[ut]&&(0==--this._eventsCount?this._events=new E:delete _e[ut]),this;if(0===arguments.length){for(var He,ct=Object.keys(_e),st=0;st<ct.length;++st)"removeListener"!==(He=ct[st])&&this.removeAllListeners(He);return this.removeAllListeners("removeListener"),this._events=new E,this._eventsCount=0,this}if("function"==typeof(Ze=_e[ut]))this.removeListener(ut,Ze);else if(Ze)do{this.removeListener(ut,Ze[Ze.length-1])}while(Ze[0]);return this},I.prototype.listeners=function(ut){var Ze,_e=this._events;return _e&&(Ze=_e[ut])?"function"==typeof Ze?[Ze.listener||Ze]:function(He){for(var ct=new Array(He.length),st=0;st<ct.length;++st)ct[st]=He[st].listener||He[st];return ct}(Ze):[]},I.listenerCount=function(ut,Ze){return"function"==typeof ut.listenerCount?ut.listenerCount(Ze):V.call(ut,Ze)},I.prototype.listenerCount=V,I.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var X="ZipInfo:";function ee(ut){var Ze;return null===(Ze=ut?.path)||void 0===Ze?void 0:Ze.startsWith(X)}function re(ut){return"string"==typeof ut&&ut.startsWith(X)}function ne(ut,Ze){return(Array.isArray(ut)?ut:[ut]).some(function(_e){if("number"!=typeof _e.version)throw new Error("file version must be an int number");return _e.version<Ze})}function fe(ut,Ze){return ut.reduce(function(_e,He){return _e.then(function(ct){return Ze(ct,He)}).catch(function(){return Ze(void 0,He)})},Promise.resolve(void 0))}var ve,Le=function(ut){function Ze(){return null!==ut&&ut.apply(this,arguments)||this}return h(Ze,ut),Ze}(I),Qe="resource",ze=function(ut){function Ze(_e){var Ft,He=ut.call(this)||this;if(He.ready=!1,He.openError=!1,He.isEnable()){var ct=_e||{},Ne=ct.indexDbVersion;He.dbName="resource-manager"+((Ft=ct.nameSpaceId)?"-"+Ft:"");var Jt=indexedDB.open(He.dbName,Ne||1);Jt.addEventListener("error",function(){He.openError=!0,He.checkReady(),He.emit("error",new Error("failed to open indexedDB"))}),Jt.addEventListener("success",function(){He.db=Jt.result,He.checkReady()}),Jt.addEventListener("upgradeneeded",function(){He.db=Jt.result,He.handleSuccess()}),setTimeout(function(){He.checkReady()},5e3)}else He.checkReady();return He}return h(Ze,ut),Ze.prototype.checkReady=function(){this.ready||(this.ready=!0,this.emit("ready"))},Ze.prototype.handleSuccess=function(){if(!this.db.objectStoreNames||0===this.db.objectStoreNames.length||!this.db.objectStoreNames.contains(Qe)){var _e=this.db.createObjectStore(Qe,{keyPath:"path",autoIncrement:!1});_e.createIndex("path","path"),_e.createIndex("sourceURL","sourceURL",{unique:!1})}},Ze.prototype.createAction=function(_e){var He=this.db.transaction([Qe],_e||"readonly");return{trans:He,store:He.objectStore(Qe)}},Ze.prototype.handleAction=function(_e,He){return new Promise(function(ct,st){var Ne=He();_e.addEventListener("complete",function(){ct(Ne.result)}),_e.addEventListener("error",function(){st(_e.error||new Error("transaction error"))}),_e.addEventListener("abort",function(){st(_e.error||new Error("transaction aborted"))})})},Ze.prototype.put=function(){for(var _e=[],He=0;He<arguments.length;He++)_e[He]=arguments[He];var ct=this.createAction("readwrite"),Ne=ct.store;return this.handleAction(ct.trans,function(){return Ne.put.apply(Ne,_e)})},Ze.prototype.getAllKeysFromIndex=function(_e){for(var He=[],ct=1;ct<arguments.length;ct++)He[ct-1]=arguments[ct];if(IDBObjectStore.prototype.getAllKeys){var st=this.createAction(),Jt=st.store;return this.handleAction(st.trans,function(){var Ft;return(Ft=Jt.index(_e)).getAllKeys.apply(Ft,He)})}return this.openKeyCursor(_e)},Ze.prototype.getAllFromIndex=function(_e){for(var He=[],ct=1;ct<arguments.length;ct++)He[ct-1]=arguments[ct];var st=this.createAction(),Jt=st.store;return IDBObjectStore.prototype.getAll?this.handleAction(st.trans,function(){var Ft;return(Ft=Jt.index(_e)).getAll.apply(Ft,He)}):this.openCursor(_e)},Ze.prototype.getFromIndex=function(_e){for(var He=[],ct=1;ct<arguments.length;ct++)He[ct-1]=arguments[ct];var st=this.createAction(),Jt=st.store;return this.handleAction(st.trans,function(){var Ft;return(Ft=Jt.index(_e)).get.apply(Ft,He)})},Ze.prototype.deleteKey=function(){for(var _e=[],He=0;He<arguments.length;He++)_e[He]=arguments[He];var ct=this.createAction("readwrite"),Ne=ct.store;return this.handleAction(ct.trans,function(){return Ne.delete.apply(Ne,_e)})},Ze.prototype.handleCursorAction=function(_e,He,ct,st){return new Promise(function(Ne,Jt){He.addEventListener("success",function(){He.result?(ct(st,He.result),He.result.continue()):Ne(st)}),He.addEventListener("error",function(){Jt(_e.error||new Error("transaction error"))})})},Ze.prototype.openKeyCursor=function(_e){for(var He,ct=[],st=1;st<arguments.length;st++)ct[st-1]=arguments[st];var Ne=this.createAction("readwrite");return this.handleCursorAction(Ne.trans,(He=Ne.store.index(_e)).openKeyCursor.apply(He,ct),function(yn,mr){return yn.push(mr.key),yn},[])},Ze.prototype.openCursor=function(_e){for(var He,ct=[],st=1;st<arguments.length;st++)ct[st-1]=arguments[st];var Ne=this.createAction("readwrite");return this.handleCursorAction(Ne.trans,(He=Ne.store.index(_e)).openCursor.apply(He,ct),function(yn,mr){return yn.push(mr.value),yn},[])},Ze.prototype.isEnable=function(){return!!window.indexedDB&&!this.openError},Ze.prototype.saveFile=function(_e){return this.db?this.put(_e).then(function(){return!0}):Promise.resolve(!1)},Ze.prototype.removeFile=function(_e){var He=this;return this.db?"string"==typeof _e?this.getAllKeysFromIndex("path").then(function(ct){var st=(ct||[]).filter(function(Ne){return Ne===_e||Ne.startsWith(""+_e+l.sep)});return Promise.all(st.map(function(Ne){return He.deleteKey(Ne)}))}).then(function(){return!0}):this.deleteKey(_e.path).then(function(){return!0}):Promise.resolve(!1)},Ze.prototype.clear=function(){if(!this.db)return Promise.resolve(!1);var _e=this.createAction("readwrite"),ct=_e.store;return this.handleAction(_e.trans,function(){return ct.clear()}).then(function(){return!0})},Ze.prototype.findFileByPath=function(_e){return this.db&&_e?this.getFromIndex("path",_e):Promise.resolve(void 0)},Ze.prototype.findFileBySourceURL=function(_e){return this.db&&_e?this.getAllFromIndex("sourceURL",_e):Promise.resolve([])},Ze.prototype.isDirectory=function(_e){var He=this;return this.db?new Promise(function(ct){re(_e)?ct(!1):He.getAllKeysFromIndex("path").then(function(st){return(st||[]).some(function(Ne){return Ne.startsWith(""+_e+l.sep)})}).then(ct).catch(function(){return ct(!1)})}):Promise.resolve(!1)},Ze.prototype.ls=function(_e){var He=this;return this.db?this.getAllKeysFromIndex("path").then(function(ct){var st=[];return Promise.all((ct||[]).map(function(Ne){if(re(Ne))return Promise.resolve(void 0);if(_e){if(Ne.startsWith(""+_e+l.sep)){var Jt=Ne.split(""+_e+l.sep)[1]||"";if(Jt.includes(l.sep)){var Ft=""+_e+l.sep+Jt.split(l.sep)[0];return Ft&&!st.includes(Ft)?(st.push(Ft),Promise.resolve(Ft)):Promise.resolve(void 0)}return He.getFromIndex("path",Ne)}return Promise.resolve(void 0)}if(Ne.includes(l.sep)){var yn=Ne.split(l.sep)[0]||"";return yn&&!st.includes(yn)?(st.push(yn),Promise.resolve(yn)):Promise.resolve(void 0)}return He.getFromIndex("path",Ne)})).then(function(Ne){return Ne.filter(function(Jt){return!!Jt})})}):Promise.resolve([])},Ze}(Le),ft=function(ut){function Ze(){var _e=null!==ut&&ut.apply(this,arguments)||this;return _e.memoryFiles=[],_e}return h(Ze,ut),Ze.prototype.isEnable=function(){return!0},Ze.prototype.saveFile=function(_e){var He=this;return new Promise(function(ct){He.memoryFiles.some(function(st,Ne){return st.path===_e.path&&(He.memoryFiles.splice(Ne,1,_e),!0)})||He.memoryFiles.push(_e),ct(!0)})},Ze.prototype.removeFile=function(_e){var He=this;return new Promise(function(ct){for(var st=He.memoryFiles.length-1;st>=0;st--){var Ne=He.memoryFiles[st];("string"==typeof _e&&(Ne.path===_e||Ne.path.startsWith(""+_e+l.sep))||_e.path===Ne.path)&&He.memoryFiles.splice(st,1)}ct(!0)})},Ze.prototype.clear=function(){var _e=this;return new Promise(function(He){_e.memoryFiles=[],He(!0)})},Ze.prototype.findFileByPath=function(_e){var He=this;return new Promise(function(ct){ct(He.memoryFiles.filter(function(st){return st.path===_e})[0])})},Ze.prototype.findFileBySourceURL=function(_e){var He=this;return new Promise(function(ct){ct(He.memoryFiles.filter(function(st){return st.sourceURL===_e}))})},Ze.prototype.isDirectory=function(_e){var He=this;return new Promise(function(ct){re(_e)?ct(!1):ct(He.memoryFiles.some(function(st){return st.path.startsWith(""+_e+l.sep)}))})},Ze.prototype.ls=function(_e){var He=this;return new Promise(function(ct){var st=[];He.memoryFiles.forEach(function(Ne){if(!ee(Ne))if(_e){if(Ne.path.startsWith(""+_e+l.sep)){var Jt=Ne.path.split(""+_e+l.sep)[1]||"";if(Jt.includes(l.sep)){var Ft=""+_e+l.sep+Jt.split(l.sep)[0];return void(Ft&&!st.includes(Ft)&&st.push(Ft))}st.push(Ne)}}else if(Ne.path.includes(l.sep)){var yn=Ne.path.split(l.sep)[0]||"";yn&&!st.includes(yn)&&st.push(yn)}else st.push(Ne)}),ct(st)})},Ze}(Le),lt=function(ut){function Ze(_e){var st,He=ut.call(this)||this;return He.isLocalAvaliable=void 0,He.isEnable()&&(He.storageName="resource-manager"+((st=(_e||{}).nameSpaceId)?"-"+st:"")),He}return h(Ze,ut),Ze.prototype.isEnable=function(){if(void 0!==this.isLocalAvaliable)return this.isLocalAvaliable;try{this.isLocalAvaliable=!0,localStorage.setItem("privateTest","")}catch{this.isLocalAvaliable=!1}return this.isLocalAvaliable},Ze.prototype.saveFile=function(_e){var He=this;return this.isEnable()?new Promise(function(ct){var st=He.getLocalFile();st.some(function(Ne,Jt){return Ne.path===_e.path&&(st.splice(Jt,1,_e),!0)})||st.push(_e),localStorage.setItem(He.storageName,JSON.stringify(st)),ct(!0)}):Promise.resolve(!1)},Ze.prototype.getLocalFile=function(){var _e=localStorage.getItem(this.storageName),He=[];if(_e)try{He=JSON.parse(_e)||"[]"}catch(ct){console.log(ct)}return He},Ze.prototype.removeFile=function(_e){var He=this;return this.isEnable()?new Promise(function(ct){for(var st=He.getLocalFile(),Ne=st.length-1;Ne>=0;Ne--){var Jt=st[Ne];("string"==typeof _e&&(Jt.path===_e||Jt.path.startsWith(""+_e+l.sep))||_e.path===Jt.path)&&st.splice(Ne,1)}localStorage.setItem(He.storageName,JSON.stringify(st)),ct(!0)}):Promise.resolve(!1)},Ze.prototype.clear=function(){var _e=this;return this.isEnable()?new Promise(function(He){localStorage.removeItem(_e.storageName),He(!0)}):Promise.resolve(!1)},Ze.prototype.findFileByPath=function(_e){var He=this;return this.isEnable()?new Promise(function(ct){ct(He.getLocalFile().filter(function(st){return st.path===_e})[0])}):Promise.resolve(void 0)},Ze.prototype.findFileBySourceURL=function(_e){var He=this;return this.isEnable()?new Promise(function(ct){ct(He.getLocalFile().filter(function(st){return st.sourceURL===_e}))}):Promise.resolve([])},Ze.prototype.isDirectory=function(_e){var He=this;return this.isEnable()?new Promise(function(ct){re(_e)?ct(!1):ct(He.getLocalFile().some(function(st){return st.path.startsWith(""+_e+l.sep)}))}):Promise.resolve(!1)},Ze.prototype.ls=function(_e){var He=this;return this.isEnable()?new Promise(function(ct){var st=[];He.getLocalFile().forEach(function(Ne){if(!ee(Ne))if(_e){if(Ne.path.startsWith(""+_e+l.sep)){var Jt=Ne.path.split(""+_e+l.sep)[1]||"";if(Jt.includes(l.sep)){var Ft=""+_e+l.sep+Jt.split(l.sep)[0];return void(Ft&&!st.includes(Ft)&&st.push(Ft))}st.push(Ne)}}else if(Ne.path.includes(l.sep)){var yn=Ne.path.split(l.sep)[0]||"";yn&&!st.includes(yn)&&st.push(yn)}else st.push(Ne)}),ct(st)}):Promise.resolve([])},Ze}(Le);(ve=s.FileStoreEnum||(s.FileStoreEnum={})).MEMORY="memoryStore",ve.INDEX_DB="indexedDBStore",ve.STORAGE="storageStore";var tt=function(ut){function Ze(_e){var He=ut.call(this)||this;return He.indexedDBStore=new ze(_e),He.memoryStore=new ft,He.storageStore=new lt(_e),He}return h(Ze,ut),Ze.prototype.saveFile=function(_e,He,ct){var st=this;void 0===He&&(He=!0);var Ne=(ct||{}).forceSpecifyStore;return(He?this.findFileByPath(_e.path,ct):Promise.resolve(void 0)).then(function(Jt){if(Jt?.version&&ne(_e,Jt.version))throw new Error("there is an higher version file existed already");var Ft=v(v({},_e),{createTime:Jt&&Jt.createTime||Date.now(),updateTime:Date.now()});return Ne&&st[Ne]&&st[Ne].isEnable()&&(Ne!==s.FileStoreEnum.STORAGE||st.isLocalStorageAvaliable(Ft))?st[Ne].saveFile(Ft):st[st.saveToTargetStoreRule(Ft)].saveFile(Ft)})},Ze.prototype.isLocalStorageAvaliable=function(_e){var He=_e.data;return"string"===l.getDataFormat(He)&&He.length<=102400&&this.storageStore.isEnable()},Ze.prototype.saveToTargetStoreRule=function(_e){return this.indexedDBStore.isEnable()?s.FileStoreEnum.INDEX_DB:this.isLocalStorageAvaliable(_e)?s.FileStoreEnum.STORAGE:s.FileStoreEnum.MEMORY},Ze.prototype.removeFile=function(_e,He){var ct=(He||{}).forceSpecifyStore;return ct&&this[ct]?this[ct].removeFile(_e):Promise.all([this.indexedDBStore.removeFile(_e),this.storageStore.removeFile(_e),this.memoryStore.removeFile(_e)]).then(function(){return!0})},Ze.prototype.clear=function(_e){var He=(_e||{}).forceSpecifyStore;return He&&this[He]?this[He].clear():Promise.all([this.indexedDBStore.clear(),this.storageStore.clear(),this.memoryStore.clear()]).then(function(){return!0})},Ze.prototype.findFileByPath=function(_e,He){var ct=this,st=(He||{}).forceSpecifyStore;return st&&this[st]?this[st].findFileByPath(_e):fe(this.searchInTargetStoreRule(),function(Ne,Jt){return Ne?Promise.resolve(Ne):ct[Jt].findFileByPath(_e)})},Ze.prototype.findFileBySourceURL=function(_e,He){var ct=this,st=(He||{}).forceSpecifyStore;return st&&this[st]?this[st].findFileBySourceURL(_e):fe(this.searchInTargetStoreRule(),function(Ne,Jt){return ct[Jt].findFileBySourceURL(_e).then(function(Ft){return Ne?Ne.filter(function(yn){return!Ft.some(function(mr){return mr.path===yn.path})}).concat(Ft||[]):Ft||[]})})},Ze.prototype.searchInTargetStoreRule=function(){return[s.FileStoreEnum.INDEX_DB,s.FileStoreEnum.STORAGE,s.FileStoreEnum.MEMORY]},Ze.prototype.isDirectory=function(_e){var He=this;return _e?fe(this.searchInTargetStoreRule(),function(ct,st){return ct?Promise.resolve(!0):He[st].isDirectory(_e)}):Promise.resolve(!0)},Ze.prototype.ls=function(_e){var He=this;return this.isDirectory(_e).then(function(ct){if(!ct)throw new Error("path: "+_e+" is an invalid directory path");return fe(He.searchInTargetStoreRule(),function(st,Ne){return He[Ne].ls(_e).then(function(Jt){return st?(Jt||[]).concat(st.filter(function(Ft){return!Jt.some(function(yn){return"string"==typeof Ft?yn===Ft:"string"!=typeof yn&&yn.path===Ft.path})})):Jt})})})},Ze}(I),St=function(ut){function Ze(){return null!==ut&&ut.apply(this,arguments)||this}return h(Ze,ut),Ze}(I),Zt=function(ut){function Ze(_e){var He=ut.call(this)||this,ct=_e||{},st=ct.storeOptions;return He.downloadManager=new l.IDownloadManager(ct.downloadManagerOptions),He.store=new tt(st),He.store.indexedDBStore.on("ready",function(){return He.emit("ready")}),He}return h(Ze,ut),Ze.prototype.getFile=function(_e,He,ct){var st=this,Ne=new St,Jt=Promise.resolve(void 0),Ft=He||{},yn=Ft.downloadOptions,tr=Ft.saveRootPath;Ft.forceDownload?Jt=Promise.resolve(void 0):"string"==typeof _e?Jt=this.store.findFileByPath(_e,ct):_e?.sourceURL?Jt=this.store.findFileBySourceURL(_e.sourceURL):yn&&(yn.domParams||yn.socketParams||yn.xhrParams)&&(Jt=this.store.findFileBySourceURL(this.genSourceURL(yn)));var Tr=null,gr=new Promise(function(lr){Tr=lr});return Ne.getDownloadTask=function(){return gr},Jt=Jt.then(function(lr){if(lr&&(!Array.isArray(lr)||lr.length)){var Hn=lr;if(Array.isArray(Hn)){var $r=Hn.find(function(co){return ee(co)});if(!$r)return;Hn=Hn.filter(function(co){return!ee(co)});var eo=$r.data;if("string"!=typeof eo||!JSON.parse(eo||"[]").every(function(co){return Hn.some(function(xt){return xt.path===co})}))return}if(!ct?.targetVersion||!ne(Hn,ct.targetVersion))return Ne.emit("checkExpire",!1),Hn;Ne.emit("checkExpire",!0)}}).then(function(lr){if(!lr&&yn){var Hn=st.downloadManager.download(yn);return Tr(Hn),new Promise(function($r,eo){Hn.on("complete",function(co){setTimeout(function(){var xt=Array.isArray(co)?co.map(function(et){var $t=et.data,Ln=et.extName;return{path:st.genFilePath(tr,et.path),sourceURL:st.genSourceURL(yn),data:$t,fileFormat:Ln||st.getFileFormat(yn),version:ct?.targetVersion||1}}):{path:st.genFilePath(tr,void 0),sourceURL:st.genSourceURL(yn),data:co,fileFormat:st.getFileFormat(yn),version:ct?.targetVersion||1};if(Array.isArray(xt)&&"string"==typeof _e&&_e){var It=xt.find(function(et){return et.path===_e});$r(It||xt)}else $r(xt);Ne.emit("beforeSet",xt),st.beforeWrite(xt,ct).then(function(){Ne.emit("afterSet")}).catch(function(et){return Ne.emit("afterSet",et)})},0)}),Hn.on("abort",eo),Hn.on("error",eo),Hn.on("timeout",function(){return eo(new Error("download timeout"))})})}return Tr(void 0),lr}).catch(function(lr){return Tr(void 0),Promise.reject(lr)}),Ne.getResult=function(){return Jt},Ne},Ze.prototype.genSourceURL=function(_e){var ct=_e.type;if(ct===l.DownloaderType.SOCKET)return null;var Ne=(ct===l.DownloaderType.DOM?_e.domParams:_e.xhrParams)||{},Jt=Ne.url,Ft=void 0===Jt?"":Jt,yn=Ne.body;return yn&&Object.keys(yn).length?Ft+(Ft.includes("?")?"&":"?")+"downloadBodyParams="+JSON.stringify(yn):Ft},Ze.prototype.updateFile=function(_e,He){return this.saveStore(_e,!0,He)},Ze.prototype.beforeWrite=function(_e,He){var st,Ne,ct=this;return Array.isArray(_e)?Promise.all(_e.concat((st=_e,Ne=st[0].sourceURL||"",{path:""+X+Ne,sourceURL:Ne,data:JSON.stringify(st.map(function(Jt){return Jt.path}))})).map(function(st){return ct.saveStore(st,!1,He)})).then(function(st){return st.filter(function(Ne){return!ee(Ne)})}):this.saveStore(_e,!0,He)},Ze.prototype.getFileFormat=function(_e){var He=_e||{},ct=He.xhrParams,st=He.domParams,Ne=He.socketParams,Jt=He.type;return Jt===l.DownloaderType.DOM&&st?.fileFormat?st.fileFormat:Jt===l.DownloaderType.SOCKET&&Ne?.fileFormat?Ne.fileFormat:ct?.fileFormat?ct.fileFormat:"unknow"},Ze.prototype.genFilePath=function(_e,He){return He?""+(_e||"")+(_e?l.sep:"")+He:_e||""},Ze.prototype.saveStore=function(_e,He,ct){return void 0===He&&(He=!0),this.store.saveFile(_e,He,ct).then(function(st){if(st)return _e;throw new Error("fail to save file in local store")})},Ze.prototype.remove=function(_e,He){return this.store.removeFile(_e,He)},Ze.prototype.clear=function(_e){return this.store.clear(_e)},Ze.prototype.list=function(_e){return this.store.ls(_e)},Ze.prototype.updateVersion=function(_e,He){var ct=this;return this.store.findFileByPath(_e).then(function(st){if(st)return ct.saveStore(v(v({},st),{version:He})).then(function(){});throw new Error("the target path: "+_e+" isn't existed")})},Ze.prototype.updateSourceURL=function(_e,He){var ct=this;return this.store.findFileByPath(_e).then(function(st){if(st)return ct.saveStore(v(v({},st),{sourceURL:He})).then(function(){});throw new Error("the target path: "+_e+" isn't existed")})},Ze}(I);s.IResourceManager=Zt,Object.defineProperty(s,"__esModule",{value:!0})}(jp.exports,Tb),xk(jp.exports);const qd="__ZOOM_SDK_MEDIA_PLAYBACK_SOURCE_VIDEO__";class Dc{constructor(){this.audioPlaybackUrl=void 0,this.videoPlaybackUrl=void 0,this._audioElement=void 0,this._videoElement=void 0,this.videoSrc=void 0,this.isUsingSameFile=void 0}static getInstance(){return void 0===this.instance&&(this.instance=new Dc),this.instance}setAudioElement(l){return void 0===this._audioElement&&(this._audioElement=new Audio),new Promise((u,h)=>{if(this.videoSrc===l.url)this._audioElement.pause(),this.isUsingSameFile=!0,this._videoElement.muted=!1,(E=this._videoElement).currentTime>0&&!E.paused&&!E.ended&&E.readyState>2?u(""):this._videoElement.play().then(()=>{u("")}).catch(()=>{h()});else{var v;this.isUsingSameFile=!1;const I=ig()?"canplay":"canplaythrough",R=()=>{this._audioElement.play().then(()=>{this._audioElement.removeEventListener(I,R),u("")})},N=()=>{this._audioElement.removeEventListener(I,R),this._audioElement.removeEventListener("error",N),h()};this._audioElement.addEventListener(I,R),this._audioElement.addEventListener("error",N),this._audioElement.src=l.url,this._audioElement.loop=!!l.loop,Uy(l.url)&&this._audioElement.setAttribute("crossorigin",""),this._audioElement.currentTime=Math.max(null!==(v=l.currentTime)&&void 0!==v?v:0,1e-4)}var E})}setVideoElement(l){return void 0===this._videoElement&&(this._videoElement=document.createElement("video")),new Promise((u,h)=>{var v;this.videoSrc=l.url;const E=ig()?"canplay":"canplaythrough",I=()=>{this._videoElement.play().then(()=>{this._videoElement.removeEventListener(E,I),u("")})},R=()=>{this._videoElement.removeEventListener(E,I),this._videoElement.removeEventListener("error",R),h()};this._videoElement.addEventListener(E,I),this._videoElement.addEventListener("error",R),this._videoElement.src=l.url,this.isUsingSameFile||(this._videoElement.muted=!0),this._videoElement.loop=!!l.loop,this._videoElement.currentTime=null!==(v=l.currentTime)&&void 0!==v?v:0,Uy(l.url)&&this._videoElement.setAttribute("crossorigin",""),yh()&&!document.getElementById(qd)&&(this._videoElement.id=qd,this._videoElement.setAttribute("style","position:fixed;top:-10000px;left:-10000px"),document.body.appendChild(this._videoElement))})}get audioElement(){return this.isUsingSameFile?this._videoElement:this._audioElement}get videoElement(){return this._videoElement}stopAudioElement(){this.isUsingSameFile||this._audioElement&&(this._audioElement.currentTime=0,this._audioElement.pause())}stopVideoElement(){this._videoElement&&this._videoElement.pause(),this.videoSrc=void 0}}function n_(s,l,u,h){const{meeting:{userId:v},audio:{localShareAudioUserMutedList:E},share:{isReceiveSharingFromMainSession:I}}=h;return E.filter(R=>R.userId!==l).forEach(R=>{s.setSharingAudioVolume(R.userId,!0,R.isFromMainSession)}),s.setSharingAudioVolume(l,u,!!I),l===v?n1(u):t1({userId:l,muted:u})}function dm(s,l,u){return WR.apply(this,arguments)}function WR(){return WR=U(function*(s,l,u){var h,v;const{audio:{audioSsrc:E,activeMicrophone:I,activeSpeaker:R,isAllowToTalk:N,customizeAudioOption:{speakerOnly:L,mute:V},isUsingMediaPlayback:O,mediaPlaybackFile:X,isBackgroundNoiseSuppression:ee,isHIDEnabled:re,microphoneDevicesList:ne,isVerifiedAudioPermissionOnIOSMobile:fe},meeting:{svcUrl:ve,conId:Le,reportDomain:Qe,isAudioBridgeEnabled:ze,userId:ft}}=l,lt=Cr(l),tt=!!L||Da(lt.userRole)&&!N,St=u??!tt;Dp()&&!ze&&console.warn("Cannot start audio due to the service is not ready.");let Zt=I;if(O&&null!=X&&X.url){const ut=Dc.getInstance();yield ut.setAudioElement(X),Zt=ut.audioElement}else Dc.getInstance().stopAudioElement();return tt&&!fe&&Ml()&&(yield U(function*(){yield navigator.mediaDevices.getUserMedia({audio:!0})})()),null===(h=s.joinComputerAudio(E,Zt,R,St,Dp()?{rwgHost:ve,cid:Le,nginxHost:Qe}:void 0,ee,re?{microphoneLabel:null===(v=ne.find(ut=>ut.deviceId===I))||void 0===v?void 0:v.label,defaultMuted:!(null==lt||!lt.muted)}:void 0))||void 0===h?void 0:h.then(()=>{V&&(ji.createAgent().mute(ft,!0),s.muteAudio()),null!=lt&&lt.muted?s.muteAudio():s.unmuteAudio()})}),WR.apply(this,arguments)}function Rb(s,l,u){return yA.apply(this,arguments)}function yA(){return yA=U(function*(s,l,u){const h=[],{audio:{isJoinComputerAudioBeforeSharingAudio:v,mutedBeforeSharingAudio:E}}=u,I=Cr(u);return!0===v&&(yield dm(s,u),h.push(Cu(void 0)),!1===E&&(h.push(Ip(!0)),l.mute(I.userId,!1)),h.push(Bd(void 0))),h}),yA.apply(this,arguments)}function JM(s,l,u){return dI.apply(this,arguments)}function dI(){return dI=U(function*(s,l,u){const{audio:{isSharingAudio:h},meeting:{userId:v}}=u,E=[];if(E.push(n_(s,v,!0,u)),h){if(yield s.leaveSharingAudio(!1),E.push(Tv(!1)),!li()){const I=yield Rb(s,l,u);E.push(...I)}setTimeout(()=>{dt(Oa,{state:"off"})},0)}return E.push(kE(!1)),E}),dI.apply(this,arguments)}function Ob(s,l,u){return Yi.apply(this,arguments)}function Yi(){return Yi=U(function*(s,l,u){const{audio:{audioSsrc:h,activeMicrophone:v,activeSpeaker:E}}=u,I=Cr(u),R=[];if(!li()){const N=yield(L=U(function*(V,O){const X=[],ee=Cr(O),{audio:{isMicrophoneForbidden:re}}=O;return ee?.audio===Qo.Computer&&(X.push(Cu(!0)),X.push(Bd(ee.muted)),ee.muted||V.muteAudio(),yield V.leaveComputerAudio(),X.push(wp(0)),re&&X.push(Nh(!1))),X}),function(V,O){return L.apply(this,arguments)})(s,u);R.push(...N)}var L;return yield s.leaveSharingAudio(!0),yield s.joinSharingAudio({ssrc:h,microphoneDeviceId:v,speakerDeviceId:E,isCaptureAudio:Da(I.userRole)}),R.push(kE(!0)),R.push(Tv(!0)),R.push(n_(s,I.userId,!1,u)),R.findIndex(N=>N.type===`${Cu}`&&!0===N.payload)>-1&&(R.push(Ip(!0)),l.mute(u.meeting.userId,!0),dt(w0,{source:Ll.SharingAudio})),setTimeout(()=>{dt(Oa,{state:"on"})},0),R}),Yi.apply(this,arguments)}Dc.instance=void 0;const ma=()=>{if(sv())return!0;{var s;const u=null===(s=rv())||void 0===s?void 0:s.toLocaleLowerCase();if(u.indexOf("safari")>-1&&-1===u.indexOf("ios-safari")){var l;const h=null===(l=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))||void 0===l?void 0:l[1];return Kk(h||"","15.2")>=0}return!1}};function kc(s,l,u){for(let h=0;h<u.length&&0!==l.length;h++){const{userId:v,displayName:E}=u[h];if(l.includes(v)){const I=s.find(R=>R.userId===v);I&&(I.displayName=E,l.splice(l.indexOf(v),1))}}}function li(){return tn.isSupportOpenMicWhenShareAudio()}function pI(){return tn.isSupportAudioDenoise()}function KR(){var s;return"function"==typeof(null===(s=window.navigator.hid)||void 0===s?void 0:s.requestDevice)}function hI(s,l,u){const{audio:{isAllowToTalk:h,customizeAudioOption:v},media:{audioDecodeStatus:E,audioEncodeStatus:I}}=s;return{encodeInitStatus:Da(l.userRole)&&!h||u||null!=v&&v.speakerOnly||Dp()?"success":I,decodeInitStatus:Dp()?"success":E}}const Qp=ji.createAgent(),Pc=oI(Li(tn.getInstance())),fI=s=>!s.muted;var tc=Object.freeze({__proto__:null,audioAsnsEpic:(s,l)=>Wn(s,12033).pipe(Fn(l),ht(u=>{let[h,v]=u;const{participants:{allowTalkAttendeesList:E}}=v,I=h.payload.body;let R={};if(I){const N=ls(v),L=Object.keys(I).map(O=>({key:O,userId:I[O]})),V=L.map(O=>O.userId);kc(L,V,N),E.length>0&&V.length>0&&kc(L,V,E),R=L.reduce((O,X)=>({...O,[`${X.key}`]:{userId:X.userId,displayName:X.displayName}}),{}),dt(Th,Object.values(R))}return X0(R)})),unmuteConsentAfterSpotlighted:(s,l)=>Wn(s,16135).pipe(Fn(l),Zn(u=>{let[h,v]=u;const{payload:{body:{id:E,bLeadershipOn:I}}}=h,{audio:{bCanUnmute:R}}=v,N=Cr(v);if(N){const{isHost:L,bCoHost:V,userId:O,audio:X,muted:ee}=N,re=L||V;I&&AT(O,E)&&(null!==X&&""!==X&&!0!==ee||!re&&!R||dt(Rh,OT.Spotlight))}}),Pr(Ht)),unmuteConsentEpic:(s,l)=>Wn(s,12037).pipe(Fn(l),Zn(u=>{let[,h]=u;const v=Cr(h);null!==v?.audio&&""!==v?.audio&&1==v?.muted&&dt(Rh,OT.Unmute)}),Pr(Ht)),setAudioAttributeEpic:(s,l)=>Wn(s,zc).pipe(ln(u=>u.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some(h=>void 0!==u.payload.body[h])),al(u=>{const{payload:{body:{bCanUnmute:h,bMutedAll:v,bMutedUponEntry:E}}}=u;if(void 0!==h)return XT(u.payload.body.bCanUnmute);if(void 0!==v){const I=Cr(l.value);if((I?.audio===Qo.Computer||I?.audio===Qo.Phone)&&0==I.muted)return Bf(u.payload.body.bMutedAll)}return void 0!==E?Z0(u.payload.body.bMutedUponEntry):void 0})),currentUserAudioChangeEpic:(s,l)=>Wn(s,Mo).pipe(Fn(l),ln(u=>{let[,h]=u;return h.socket.zoomSocketStatus===so.Connected}),Pn(u=>{let[h,v]=u;const{payload:{body:{update:E}}}=h;if(null!=E&&E.some(I=>void 0!==I.audio||void 0!==I.muted)){const{meeting:{userId:I}}=v,R=E.filter(L=>L.id!==I),N=E.filter(L=>L.id===I);if(R&&R.forEach(L=>{dt(hP,L)}),N.length>0)return Op(l).pipe(Pn(L=>{const{audio:{isActiveOperation:V,isMutedAll:O,isAllowToTalk:X,isShareAudioEnabled:ee,isSharingAudio:re,isAudioBridgeSignalReconnecting:ne,customizeAudioOption:{speakerOnly:fe}}}=l.value,ve=L;return En(N).pipe($E(function(){var Le=U(function*(Qe){const ze=[];if(Qe.audio!==ve.audio)if(""===Qe.audio)dt(yv);else if(Qe.audio===Qo.Computer){const ft=Da(ve.userRole)&&!X||!!fe;re&&dt(Zc),ft&&(dt(Zc),Ml()&&ze.push(Fd(!0))),ne&&(dt(Zc),ze.push(PE(!1)))}else Qe.audio===Qo.Phone&&(ve.audio===Qo.Computer&&(yield Pc.leaveComputerAudio(),Qp.joinOrLeaveVoip(!1)),dt(I0));return""!==ve.audio&&Qe.muted!==ve.muted&&(!0===Qe.muted?(dt(w0,{source:V?Ll.Active:O?Ll.PassiveByMuteAll:Ll.PassiveByMuteOne}),ee&&!li()||Pc.muteAudio()):!1===Qe.muted&&(dt(kd,{source:V?"active":"passive"}),Pc.unmuteAudio()),ze.push(Ip(!1),Bf(!1))),ze});return function(Qe){return Le.apply(this,arguments)}}()))}))}return Ht})),handleAllowToTalkEpic:(s,l)=>Wn(s,12036).pipe(Fn(l),Pn(u=>{let[h,v]=u;const E=Cr(v),{media:{audioEncodeStatus:I}}=v,{promoterID:R,bAllowTalk:N}=h.payload.body;if(E?.userId===R){if(dt(gP,N),N)return"success"!==I&&Pc.enableAudioEncode(),Pa("audio",I,"success").pipe(Pn(L=>(L&&dt(Rh,OT.AllowToTalk),Ht)),ch(Mh(!0)));if(Qp.mute(R,!0),E?.audio===Qo.Computer)return Pc.leaveComputerAudio(),ua(300).pipe(Zn(U(function*(){(ma()?bi(is(document,"click").pipe(ti(1)),is(document,"touchend").pipe(ti(1))).toPromise():Promise.resolve(!0)).then(()=>{dm(Pc,v,!1)})})),Pr(Ht),ch(Mh(!1)))}return Ht})),handleAllowToTalkResponseEpic:s=>Wn(s,8205).pipe(Zn(l=>{dt("AUDIO_ALLOW_TO_TALK_RESPONSE",l.payload.body)}),Pr(Ht)),handleAttendeePromoteDepromote:(s,l)=>fh(s,24597).pipe(Fn(l),Zn(u=>{let[h,v]=u;const E=Cr(v);E?.audio===Qo.Phone&&Qp.audioDrop(E.userId)}),Pr(Ht)),setAudioSSRCEpic:(s,l)=>Wn(s,12035).pipe(Fn(l),Pn(u=>{let[h,v]=u;const{meeting:{currentUserAudioBeforeReset:E}}=v,{payload:{body:{ssrc:I}}}=h,R=Op(l).pipe(Pn(N=>{if(E===Qo.Computer&&(null==N||!N.audio)){const{encodeInitStatus:L,decodeInitStatus:V}=hI(v,N);return Pa("audio",L,V).pipe(ln(O=>{let[X,ee]=O;return X&&ee}),Zn(()=>{(ma()?bi(is(document,"click").pipe(ti(1)),is(document,"touchend").pipe(ti(1))).toPromise():Promise.resolve(!0)).then(()=>{Qp.joinOrLeaveVoip(!0),dm(Pc,l.value)});const{audio:{locallyMutedAudioList:O,localUserAudioVolumeList:X,isStopAllImcomingAudio:ee}}=l.value;O.length>0&&O.forEach(re=>{Pc.muteOrUnmuteOtherAudio(re,!0)}),X.length>0&&X.forEach(re=>{Pc.adjustOtherAudioVolume(re.userId,re.volume)}),ee&&Pc.stopAllIncomingAudio(!0)}),Hu(Xk(void 0)))}return Ht}));return $s($n(DP(I)),R)})),handleMergeAudioEpic:(s,l)=>Wn(s,7952).pipe(kn(u=>vo(I0,1).pipe(Fn(l),Zn(h=>{let[,v]=h;const{BindStatus:E,nOperatorUserId:I}=u.payload.body,R=v.participants.attendeesList.find(N=>N.userId===I);!0===E&&dt(_g,{operatorName:R?.displayName,operatorUserId:I,operatorRole:R?.userRole})})))),handleUserGrantAudioCaptureEpic:(s,l)=>Ar(s,Vn.UserGrantCaptureAudio).pipe(Fn(l),Pn(u=>{let[,h]=u;const v=Cr(h);var E;(E=v,E?.audio===Qo.Computer?Promise.resolve():Jr({event:Zu,operations:[ln(O=>void 0!==O.audio),ti(1)]},O=>{let{audio:X}=O;return X===Qo.Phone||X===Qo.Computer})).then(()=>{dt(Zc)});const{meeting:{isCurrentUserMutedBeforeReset:I},audio:{bMutedUponEntry:R,isUserGrantCaptureAudio:N,isAllowToTalk:L}}=h,V=[OE(!0)];if(v){!0===v.muted&&!1===L&&Qp.mute(v.userId,!0);const O=N||v.isHost||L;(!0===I||!O&&R)&&(Qp.mute(v.userId,!0),I&&V.push(Wy(void 0)))}return En(V)})),handleUserForbiddenMicrophoneEpic:s=>Ar(s,Vn.UserForbiddedCaptureAudio).pipe(Zn(()=>{dt(vg)}),Hu(Nh(!0))),handleAudioSocketErrorEpic:s=>Ar(s,Vn.AudioWebsocketBroken).pipe(Zn(()=>{dt(jT)}),Pr(Ht)),handleAudioZeroDataEpic:(s,l)=>Ar(s,Vn.AudioZeroData).pipe(Fn(l),al(u=>{let[,h]=u;const{audio:{webrtcRestartCount:v,activeMicrophone:E}}=h;if(v<3)return Pc.restoreWebRTC(E),wp(v+1)})),handleAutoPlayEpic:(s,l)=>s.pipe(wr(`${Io}`),ln(u=>!1===u.payload),Pn(()=>(dt(mP),bi(is(document,"click").pipe(ti(1)),is(document,"touchend").pipe(ti(1))).pipe(Zn(()=>{Qp.joinOrLeaveVoip(!0),dm(Pc,l.value)}),Hu(Io(!0)))))),handleAudioActionCompleteEpic:s=>Ar(s,[Vn.JoinComputerAudioComplete,Vn.JoinSharingAudioComplete,Vn.LeaveComputerAudioComplete,Vn.LeaveSharingAudioComplete]).pipe(Zn(()=>{cl.completeAudioAction()}),Pr(Ht)),handleAudioQosDataEpic:(s,l)=>Ar(s,Vn.AudioQosData).pipe(Fn(l),ht(u=>{var h;let[v,E]=u;const{meeting:{isWebinar:I},media:{audioEncodeStatus:R,audioDecodeStatus:N},participants:{xmppAttendeeList:L,allowTalkAttendeesList:V}}=E,O=Cr(E),X=$0(E);let ee=X.length>0,re=X.some(fI);I&&(ee=ee||Boolean(L.length),re=re||V.some(fI));const fe=(O?.audio===Qo.Computer||O?.audio===Qo.Phone)&&"success"===N&&ee&&re;return null!==(h=v.payload.data)&&void 0!==h&&h.encoding?O?.audio!==Qo.Computer&&O?.audio!==Qo.Phone||"success"!==R||null!=O&&O.muted||!ee?xh(mv):(dt(Md,v.payload),xh(v.payload)):fe?(dt(Md,v.payload),rC(v.payload)):rC(mv)})),handleResetLocalMuteStateAfterUserLeaveEpic:(s,l)=>Wn(s,Mo).pipe(Fn(l),ln(u=>{let[h,v]=u;const{payload:{body:E}}=h,{audio:{locallyMutedAudioList:I,localUserAudioVolumeList:R}}=v;return(I.length>0||R.length>0)&&E?.remove&&E.remove.length>0}),Pn(u=>{let[h,v]=u;const{payload:{body:{remove:E}}}=h,{audio:{locallyMutedAudioList:I,localUserAudioVolumeList:R}}=v,N=I.concat(R.map(L=>L.userId)).filter(L=>-1!==E.indexOf(V=>V.id===L));return N.length>0?(N.forEach(L=>{Pc.muteOrUnmuteOtherAudio(L,!1)}),En(N.map(L=>[yi(L),Uf({userId:L})]).flat())):Ht})),handleHIDStatusEpic:(s,l)=>Ar(s,Vn.HidStatusMute).pipe(Pn(u=>{const{payload:{data:h}}=u,v=l.value,{meeting:{userId:E},audio:{isShareAudioEnabled:I,bCanUnmute:R}}=v,N=[];if(N.push(Ip(!0)),h)I&&!li()&&N.push(Bd(!0)),Qp.mute(E,!0);else if(!I||li()){I&&N.push(Bd(!1));const L=Cr(v);(R||null!=L&&L.isHost||null!=L&&L.bCoHost)&&Qp.mute(E,!1)}return En(N)}))});const Hp=ji.createAgent(),EA=oI(Li(tn.getInstance()));var mI=Object.freeze({__proto__:null,handleAddLocalShareAudioUserEpic:(s,l)=>pc(s,Mo).pipe(ln(u=>{const h=u.payload.body.update;return h&&h.length>0&&h.findIndex(v=>void 0!==v.bShareOn)>-1}),Fn(l),Pn(u=>{let[h,v]=u;const{payload:{body:{update:E}}}=h,{audio:{localShareAudioUserMutedList:I}}=v,R=E.filter(L=>!0===L.bShareOn&&!0===L.bShareAudioOn),N=[];return R.length>0&&R.forEach(L=>{-1===I.findIndex(V=>V.userId===L.id)&&N.push(kP({userId:L.id,isFromMainSession:!!L.bShareToBORooms}))}),En(N)})),handleShareWithAudioEpic:(s,l)=>Ar(s,Vn.SharingDesktopStreamHaveAudio).pipe(kn(()=>Wn(s,Mo).pipe(ln(u=>{var h;const{payload:{body:v}}=u,{meeting:{userId:E}}=l.value;return(null==v||null===(h=v.update)||void 0===h?void 0:h.findIndex(I=>I.id===E&&!0===I.bShareOn))>-1}),ti(1),$E(U(function*(){const u=l.value;return yield Ob(EA,Hp,u)})),ch(kE(!0))))),handleMediaSDKLeaveShareAudioEpic:(s,l)=>Ar(s,Vn.SharingDesktopStreamHaveNoAudio).pipe(Fn(l),ln(u=>{var h;let[,v]=u;return!0===(null===(h=v.audio)||void 0===h?void 0:h.isShareAudioEnabled)}),$E(function(){var u=U(function*(h){let[,v]=h;return yield JM(EA,Hp,v)});return function(h){return u.apply(this,arguments)}}())),handleJoinComputerAudioAfterShareAudioEpic:(s,l)=>Wn(s,Mo).pipe(Fn(l),ln(u=>{let[,h]=u;return h.socket.zoomSocketStatus===so.Connected&&!0===h.audio.isSharingAudio}),Pn(u=>{var h;let[v,E]=u;if(null!==(h=v.payload.body.update)&&void 0!==h&&h.some(I=>void 0!==I.audio||void 0!==I.muted)){const{meeting:{userId:I}}=E,R=v.payload.body.update.filter(N=>N.id===I);return Op(l).pipe(Pn(N=>{const L=[];return R.findIndex(V=>V.audio===Qo.Computer)>-1&&N?.audio!==Qo.Computer&&!li()&&(L.push(Cu(!0)),L.push(Bd(!0))),En(L)}))}return Ht})),handleShareAudioWithCurrentShareStatusChangeEpic:(s,l)=>s.pipe(wr(`${Tp}`),Nt(Qu),Fn(l),ln(u=>{var h;let[,v]=u;return!0===(null===(h=v.audio)||void 0===h?void 0:h.isShareAudioEnabled)}),$E(function(){var u=U(function*(h){let[v,E]=h;const{payload:I}=v,{audio:{isShareAudioMuted:R,isSharingAudio:N}}=E,L=[];if(I===Zi.End){const V=yield JM(EA,Hp,E);L.push(...V)}else if(I===Zi.Paused){if(!1===R&&!0===N){if(yield EA.leaveSharingAudio(!0),L.push(Tv(!1)),!li()){const V=yield Rb(EA,Hp,E);L.push(...V)}setTimeout(()=>{dt(Oa,{state:"off"})},0)}}else if(I===Zi.Sharing&&!1===R&&!1===N){const V=yield Ob(EA,Hp,E);L.push(...V)}return L});return function(h){return u.apply(this,arguments)}}()))});const $M=ji.createAgent(),XM=tn.getInstance();var Jd=Object.freeze({__proto__:null,handleAudioBridgeTokenEpic:s=>Wn(s,4299).pipe(Zn(l=>{const{payload:u}=l;XM.passThroughRWGMessage(u)}),Pr(Ht)),handleAudioBridgeReconnectEpic:s=>Ar(s,Vn.AudioBridgeReconnectStart).pipe(ht(()=>($M.joinOrLeaveVoip(!1),PE(!0)))),handleAudioBridgeReconnectSuccessEpic:s=>Ar(s,Vn.AudioBridgeReconnectEnd).pipe(Zn(()=>{$M.joinOrLeaveVoip(!0)}),Pr(Ht)),handleSendNodeAudioStatusEpic:s=>Wn(s,Mo).pipe(ln(l=>{var u,h;return Dp()&&((null===(u=l.payload.body.update)||void 0===u?void 0:u.some(v=>void 0!==v.muted))||(null===(h=l.payload.body.remove)||void 0===h?void 0:h.length)>0)}),Zn(l=>{const{payload:{body:{update:u,remove:h}}}=l;XM.sendUserAudioStatus({update:(u||[]).filter(v=>void 0!==v.muted).map(v=>({userId:v.id,muted:v.muted})),remove:(h||[]).map(v=>({userId:v.id}))})}),Pr(Ht)),handleAudioBridgeFailoverEpic:s=>Ar(s,Vn.NotifyUIFailover).pipe(ht(()=>(dt(vc,{reason:Es.Failover}),io(Rs.NotifyUiFailover)))),handlePreInitAudioBridge:(s,l)=>s.pipe(wr(`${ph}`),ln(()=>{const{meeting:{isAudioBridgeEnabled:u,abToken:h}}=l.value;return u&&Dp()&&!!h}),Zn(()=>{const{meeting:{abToken:u,svcUrl:h,reportDomain:v,conId:E}}=l.value;XM.preInitAudioBridge({abToken:u,rwgHost:h,cid:E,nginxHost:v})}),Pr(Ht))}),zR=Object.freeze({__proto__:null,handleDialOutEpic:(s,l)=>Wn(s,8198).pipe(Fn(l),ln(u=>{let[h,v]=u;return v.audio.dialout.map(E=>E.sequence).includes(h.payload.seq)}),Pn(u=>{let[h,v]=u;const{payload:{seq:E,body:{phoneNodeID:I,result:R}}}=h,N=[Lf({code:R,sequence:E,nodeId:I})];if(dt(fP,{code:R}),R===Ta.Success){if(dt(T0),I&&ls(v).findIndex(V=>V.userId===I)>-1){var L;const V=null===(L=v.audio.dialout.find(O=>O.sequence===E))||void 0===L?void 0:L.phoneNumber;V&&(N.push(SE({userId:I,key:"phoneNumber",value:V})),dt(Dd,[{userId:I,phoneNumber:V}]))}}else[Ta.Canceling,Ta.Canceled,Ta.CancelFailed].includes(R)?R===Ta.Canceled?dt(VT):R===Ta.CancelFailed&&dt(R0):-1===[Ta.Calling,Ta.Ringing,Ta.Accepted,Ta.Success].indexOf(R)&&dt(Ev);return En(N)}))});const $d={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:[],canPlayAudio:!1,isActiveOperation:!1,isMutedAll:!1,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isUsingMediaPlayback:!1,customizeAudioOption:{},localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],isStopAllImcomingAudio:!1,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}}},OB=Gn({[`${X0}`]:gt((s,l)=>{let{payload:u}=l;s.asnIds={...u}}),[`${XT}`]:gt((s,l)=>{let{payload:u}=l;s.bCanUnmute=u}),[`${ZT}`]:gt((s,l)=>{let{payload:u}=l;const{sequence:h,phoneNumber:v}=u;-1===s.dialout.findIndex(E=>E.sequence===h)&&s.dialout.push({sequence:h,phoneNumber:v,returnCode:-1})}),[`${Lf}`]:gt((s,l)=>{let{payload:u}=l;const{sequence:h,code:v,nodeId:E}=u,I=s.dialout.find(R=>R.sequence===h);I&&(I.returnCode=v,E&&(I.phoneNodeId=E))}),[`${Mh}`]:gt((s,l)=>{let{payload:u}=l;s.isAllowToTalk=u,s.isAllowToTalkAttendeeConnected=!1}),[`${Ip}`]:gt((s,l)=>{let{payload:u}=l;s.isActiveOperation=u}),[`${Bf}`]:gt((s,l)=>{let{payload:u}=l;s.isMutedAll=u}),[`${DP}`]:gt((s,l)=>{let{payload:u}=l;s.audioSsrc=u}),[`${Z0}`]:gt((s,l)=>{let{payload:u}=l;s.bMutedUponEntry=u}),[`${OE}`]:gt((s,l)=>{let{payload:u}=l;s.isUserGrantCaptureAudio=u}),[`${Nh}`]:gt((s,l)=>{let{payload:u}=l;s.isMicrophoneForbidden=u}),[`${wp}`]:gt((s,l)=>{let{payload:u}=l;s.webrtcRestartCount=u}),[`${eC}`]:gt((s,l)=>{let{payload:u}=l;s.microphoneDevicesList=u}),[`${Cg}`]:gt((s,l)=>{let{payload:u}=l;s.speakerDevicesList=u}),[`${tC}`]:gt((s,l)=>{let{payload:u}=l;s.activeMicrophone=u}),[`${nC}`]:gt((s,l)=>{let{payload:u}=l;s.activeSpeaker=u}),[`${Io}`]:gt((s,l)=>{let{payload:u}=l;s.canPlayAudio=u}),[`${e1}`]:(s,l)=>{let{dialout:u,locallyMutedAudioList:h,localUserAudioVolumeList:v,customizeAudioOption:E,isHIDEnabled:I,isBackgroundNoiseSuppression:R,isStopAllImcomingAudio:N}=s,{payload:L}=l;return L?{...$d,dialout:u,locallyMutedAudioList:h,localUserAudioVolumeList:v,customizeAudioOption:{...$d.customizeAudioOption,speakerOnly:E.speakerOnly},isHIDEnabled:I,isBackgroundNoiseSuppression:R,isStopAllImcomingAudio:N}:{...$d}},[`${Ig}`]:gt((s,l)=>{let{payload:u}=l;s.isComputerAudioLoading=u}),[`${sl}`]:gt((s,l)=>{let{payload:u}=l;const{speakerOnly:h,mute:v,backgroundNoiseSuppression:E,syncButtonsOnHeadset:I,mediaFile:R}=u;s.customizeAudioOption.speakerOnly=h,s.customizeAudioOption.mute=v,s.isBackgroundNoiseSuppression=!!E,s.isHIDEnabled=!!I,n0(s.mediaPlaybackFile,R)||(s.mediaPlaybackFile=R,s.isUsingMediaPlayback=!(null==R||!R.url)),v&&(s.isActiveOperation=!0)}),[`${DE}`]:gt((s,l)=>{let{payload:u}=l;s.isAllowToTalkAttendeeConnected=u}),[`${Bd}`]:gt((s,l)=>{let{payload:u}=l;s.mutedBeforeSharingAudio=u}),[`${Tv}`]:gt((s,l)=>{let{payload:u}=l;s.isSharingAudio=u}),[`${n1}`]:gt((s,l)=>{let{payload:u}=l;s.isShareAudioMuted=u}),[`${kP}`]:gt((s,l)=>{let{payload:u}=l;const{userId:h,isFromMainSession:v}=u;-1===s.localShareAudioUserMutedList.findIndex(E=>E.userId===h)&&s.localShareAudioUserMutedList.push({userId:h,isFromMainSession:v,muted:!1})}),[`${t1}`]:gt((s,l)=>{let{payload:u}=l;const h=s.localShareAudioUserMutedList.find(v=>v.userId===u.userId);h&&(h.muted=u.muted)}),[`${Cu}`]:gt((s,l)=>{let{payload:u}=l;s.isJoinComputerAudioBeforeSharingAudio=u}),[`${kE}`]:gt((s,l)=>{let{payload:u}=l;s.isShareAudioEnabled=u}),[`${xh}`]:gt((s,l)=>{let{payload:u}=l;s.statistic.encode=u.data}),[`${rC}`]:gt((s,l)=>{let{payload:u}=l;s.statistic.decode=u.data}),[`${Ff}`]:gt((s,l)=>{let{payload:u}=l;-1===s.locallyMutedAudioList.findIndex(h=>h===u)&&s.locallyMutedAudioList.push(u)}),[`${yi}`]:gt((s,l)=>{let{payload:u}=l;const h=s.locallyMutedAudioList.findIndex(v=>v===u);-1!==h&&s.locallyMutedAudioList.splice(h,1)}),[`${PP}`]:gt((s,l)=>{let{payload:u}=l;const h=s.localUserAudioVolumeList.find(v=>v.userId===u.userId);h?h.volume=u.volume:s.localUserAudioVolumeList.push(u)}),[`${Uf}`]:gt((s,l)=>{let{payload:u}=l;const h=s.localUserAudioVolumeList.findIndex(v=>v.userId===u.userId);-1!==h&&s.localUserAudioVolumeList.splice(h,1)}),[`${e1}`]:(s,l)=>{let{dialout:u,locallyMutedAudioList:h,localUserAudioVolumeList:v,customizeAudioOption:E,mediaPlaybackFile:I,isUsingMediaPlayback:R,isVerifiedAudioPermissionOnIOSMobile:N}=s,{payload:L}=l;return L?{...$d,dialout:u,locallyMutedAudioList:h,localUserAudioVolumeList:v,customizeAudioOption:{...$d.customizeAudioOption,speakerOnly:E.speakerOnly},mediaPlaybackFile:I,isUsingMediaPlayback:R,isVerifiedAudioPermissionOnIOSMobile:N}:{...$d}},[`${MP}`]:gt((s,l)=>{let{payload:u}=l;s.isBackgroundNoiseSuppression=u}),[`${r1}`]:gt((s,l)=>{let{payload:u}=l;s.isHIDEnabled=u}),[`${Vf}`]:gt((s,l)=>{let{payload:u}=l;s.mediaPlaybackFile=u,s.isUsingMediaPlayback=!(null==u||!u.url)}),[`${o1}`]:gt((s,l)=>{let{payload:u}=l;s.isStopAllImcomingAudio=u}),[`${Fd}`]:gt((s,l)=>{let{payload:u}=l;s.isVerifiedAudioPermissionOnIOSMobile=u}),[`${PE}`]:gt((s,l)=>{let{payload:u}=l;s.isAudioBridgeSignalReconnecting=u})},$d),YR=dc(tc,mI,Jd,zR);var Xd="object"==typeof global&&global&&global.Object===Object&&global,Db="object"==typeof self&&self&&self.Object===Object&&self,Gp=Xd||Db||Function("return this")(),pm=Gp.Symbol,gI=Object.prototype,hm=gI.hasOwnProperty,ZM=gI.toString,bA=pm?pm.toStringTag:void 0,kb=Object.prototype.toString,JR=pm?pm.toStringTag:void 0;function SA(s){return null==s?void 0===s?"[object Undefined]":"[object Null]":JR&&JR in Object(s)?function(l){var u=hm.call(l,bA),h=l[bA];try{l[bA]=void 0;var v=!0}catch{}var E=ZM.call(l);return v&&(u?l[bA]=h:delete l[bA]),E}(s):kb.call(s)}function r_(s){return null!=s&&"object"==typeof s}var Zd=Array.isArray;function $R(s){var l=typeof s;return null!=s&&("object"==l||"function"==l)}function IA(s){if(!$R(s))return!1;var l=SA(s);return"[object Function]"==l||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l}var AI,XR=Gp["__core-js_shared__"],t2=(AI=/[^.]+$/.exec(XR&&XR.keys&&XR.keys.IE_PROTO||""))?"Symbol(src)_1."+AI:"",n2=Function.prototype.toString;function fm(s){if(null!=s){try{return n2.call(s)}catch{}try{return s+""}catch{}}return""}var DB=/^\[object .+?Constructor\]$/,s2=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wA(s,l){var h,v,u=s?.[l];return $R(h=u)&&(v=h,!t2||!(t2 in v))&&(IA(h)?s2:DB).test(fm(h))?u:void 0}var Pb=wA(Gp,"WeakMap"),a2=/^(?:0|[1-9]\d*)$/;function c2(s,l){var u=typeof s;return!!(l=l??9007199254740991)&&("number"==u||"symbol"!=u&&a2.test(s))&&s>-1&&s%1==0&&s<l}function u2(s,l){return s===l||s!=s&&l!=l}function eO(s){return"number"==typeof s&&s>-1&&s%1==0&&s<=9007199254740991}function tO(s){return null!=s&&eO(s.length)&&!IA(s)}var JV=Object.prototype;function MB(s){var l=s&&s.constructor;return s===("function"==typeof l&&l.prototype||JV)}function NB(s){return r_(s)&&"[object Arguments]"==SA(s)}var d2=Object.prototype,$V=d2.hasOwnProperty,xB=d2.propertyIsEnumerable,p2=NB(function(){return arguments}())?NB:function(s){return r_(s)&&$V.call(s,"callee")&&!xB.call(s,"callee")},LB="object"==typeof te&&te&&!te.nodeType&&te,Mb=LB&&we&&!we.nodeType&&we,h2=Mb&&Mb.exports===LB?Gp.Buffer:void 0,Nb=(h2?h2.isBuffer:void 0)||function(){return!1},Ao={};Ao["[object Float32Array]"]=Ao["[object Float64Array]"]=Ao["[object Int8Array]"]=Ao["[object Int16Array]"]=Ao["[object Int32Array]"]=Ao["[object Uint8Array]"]=Ao["[object Uint8ClampedArray]"]=Ao["[object Uint16Array]"]=Ao["[object Uint32Array]"]=!0,Ao["[object Arguments]"]=Ao["[object Array]"]=Ao["[object ArrayBuffer]"]=Ao["[object Boolean]"]=Ao["[object DataView]"]=Ao["[object Date]"]=Ao["[object Error]"]=Ao["[object Function]"]=Ao["[object Map]"]=Ao["[object Number]"]=Ao["[object Object]"]=Ao["[object RegExp]"]=Ao["[object Set]"]=Ao["[object String]"]=Ao["[object WeakMap]"]=!1;var i_,nO="object"==typeof te&&te&&!te.nodeType&&te,yI=nO&&we&&!we.nodeType&&we,xb=yI&&yI.exports===nO&&Xd.process,rO=function(){try{return yI&&yI.require&&yI.require("util").types||xb&&xb.binding&&xb.binding("util")}catch{}}(),Lb=rO&&rO.isTypedArray,iO=Lb?(i_=Lb,function(s){return i_(s)}):function(s){return r_(s)&&eO(s.length)&&!!Ao[SA(s)]},BB=Object.prototype.hasOwnProperty,ep=function(s,l){return function(u){return s(l(u))}}(Object.keys,Object),f2=Object.prototype.hasOwnProperty;function oO(s){if(!MB(s))return ep(s);var l=[];for(var u in Object(s))f2.call(s,u)&&"constructor"!=u&&l.push(u);return l}var TA=wA(Object,"create"),Un=Object.prototype.hasOwnProperty,XV=Object.prototype.hasOwnProperty;function RA(s){var l=-1,u=null==s?0:s.length;for(this.clear();++l<u;){var h=s[l];this.set(h[0],h[1])}}function EI(s,l){for(var u=s.length;u--;)if(u2(s[u][0],l))return u;return-1}RA.prototype.clear=function(){this.__data__=TA?TA(null):{},this.size=0},RA.prototype.delete=function(s){var l=this.has(s)&&delete this.__data__[s];return this.size-=l?1:0,l},RA.prototype.get=function(s){var l=this.__data__;if(TA){var u=l[s];return"__lodash_hash_undefined__"===u?void 0:u}return Un.call(l,s)?l[s]:void 0},RA.prototype.has=function(s){var l=this.__data__;return TA?void 0!==l[s]:XV.call(l,s)},RA.prototype.set=function(s,l){var u=this.__data__;return this.size+=this.has(s)?0:1,u[s]=TA&&void 0===l?"__lodash_hash_undefined__":l,this};var ZV=Array.prototype.splice;function Wh(s){var l=-1,u=null==s?0:s.length;for(this.clear();++l<u;){var h=s[l];this.set(h[0],h[1])}}Wh.prototype.clear=function(){this.__data__=[],this.size=0},Wh.prototype.delete=function(s){var l=this.__data__,u=EI(l,s);return!(u<0||(u==l.length-1?l.pop():ZV.call(l,u,1),--this.size,0))},Wh.prototype.get=function(s){var l=this.__data__,u=EI(l,s);return u<0?void 0:l[u][1]},Wh.prototype.has=function(s){return EI(this.__data__,s)>-1},Wh.prototype.set=function(s,l){var u=this.__data__,h=EI(u,s);return h<0?(++this.size,u.push([s,l])):u[h][1]=l,this};var Bb=wA(Gp,"Map");function o_(s,l){var u,h,v=s.__data__;return("string"==(h=typeof(u=l))||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==u:null===u)?v["string"==typeof l?"string":"hash"]:v.map}function mm(s){var l=-1,u=null==s?0:s.length;for(this.clear();++l<u;){var h=s[l];this.set(h[0],h[1])}}function Wp(s){var l=this.__data__=new Wh(s);this.size=l.size}mm.prototype.clear=function(){this.size=0,this.__data__={hash:new RA,map:new(Bb||Wh),string:new RA}},mm.prototype.delete=function(s){var l=o_(this,s).delete(s);return this.size-=l?1:0,l},mm.prototype.get=function(s){return o_(this,s).get(s)},mm.prototype.has=function(s){return o_(this,s).has(s)},mm.prototype.set=function(s,l){var u=o_(this,s),h=u.size;return u.set(s,l),this.size+=u.size==h?0:1,this},Wp.prototype.clear=function(){this.__data__=new Wh,this.size=0},Wp.prototype.delete=function(s){var l=this.__data__,u=l.delete(s);return this.size=l.size,u},Wp.prototype.get=function(s){return this.__data__.get(s)},Wp.prototype.has=function(s){return this.__data__.has(s)},Wp.prototype.set=function(s,l){var u=this.__data__;if(u instanceof Wh){var h=u.__data__;if(!Bb||h.length<199)return h.push([s,l]),this.size=++u.size,this;u=this.__data__=new mm(h)}return u.set(s,l),this.size=u.size,this};var e4=Object.prototype.propertyIsEnumerable,ql=Object.getOwnPropertySymbols,bI=ql?function(s){return null==s?[]:(s=Object(s),function(l,u){for(var h=-1,v=null==l?0:l.length,E=0,I=[];++h<v;){var R=l[h];u(R)&&(I[E++]=R)}return I}(ql(s),function(l){return e4.call(s,l)}))}:function(){return[]};function OA(s){return h=bI,v=function Yl(s){return tO(s)?function(l,u){var h=Zd(l),v=!h&&p2(l),E=!h&&!v&&Nb(l),I=!h&&!v&&!E&&iO(l),R=h||v||E||I,N=R?function(O,X){for(var ee=-1,re=Array(O);++ee<O;)re[ee]=X(ee);return re}(l.length,String):[],L=N.length;for(var V in l)!BB.call(l,V)||R&&("length"==V||E&&("offset"==V||"parent"==V)||I&&("buffer"==V||"byteLength"==V||"byteOffset"==V)||c2(V,L))||N.push(V);return N}(s):oO(s)}(l=s),Zd(l)?v:function(E,I){for(var R=-1,N=I.length,L=E.length;++R<N;)E[L+R]=I[R];return E}(v,h(l));var l,h,v}var sO=wA(Gp,"DataView"),SI=wA(Gp,"Promise"),Qr=wA(Gp,"Set"),m2="[object Map]",CI="[object Promise]",Fb="[object Set]",g2="[object WeakMap]",II="[object DataView]",aO=fm(sO),cO=fm(Bb),DA=fm(SI),_2=fm(Qr),Ub=fm(Pb),tp=SA;(sO&&tp(new sO(new ArrayBuffer(1)))!=II||Bb&&tp(new Bb)!=m2||SI&&tp(SI.resolve())!=CI||Qr&&tp(new Qr)!=Fb||Pb&&tp(new Pb)!=g2)&&(tp=function(s){var l=SA(s),u="[object Object]"==l?s.constructor:void 0,h=u?fm(u):"";if(h)switch(h){case aO:return II;case cO:return m2;case DA:return CI;case _2:return Fb;case Ub:return g2}return l});var Kp=tp,v2=Gp.Uint8Array;function Kh(s){var l=-1,u=null==s?0:s.length;for(this.__data__=new mm;++l<u;)this.add(s[l])}function Mc(s,l){for(var u=-1,h=null==s?0:s.length;++u<h;)if(l(s[u],u,s))return!0;return!1}Kh.prototype.add=Kh.prototype.push=function(s){return this.__data__.set(s,"__lodash_hash_undefined__"),this},Kh.prototype.has=function(s){return this.__data__.has(s)};function zp(s,l,u,h,v,E){var I=1&u,R=s.length,N=l.length;if(R!=N&&!(I&&N>R))return!1;var L=E.get(s),V=E.get(l);if(L&&V)return L==l&&V==s;var O=-1,X=!0,ee=2&u?new Kh:void 0;for(E.set(s,l),E.set(l,s);++O<R;){var re=s[O],ne=l[O];if(h)var fe=I?h(ne,re,O,l,s,E):h(re,ne,O,s,l,E);if(void 0!==fe){if(fe)continue;X=!1;break}if(ee){if(!Mc(l,function(ve,Le){if(!ee.has(Le)&&(re===ve||v(re,ve,u,h,E)))return ee.push(Le)})){X=!1;break}}else if(re!==ne&&!v(re,ne,u,h,E)){X=!1;break}}return E.delete(s),E.delete(l),X}function FB(s){var l=-1,u=Array(s.size);return s.forEach(function(h,v){u[++l]=[v,h]}),u}function t4(s){var l=-1,u=Array(s.size);return s.forEach(function(h){u[++l]=h}),u}var DI=pm?pm.prototype:void 0,kI=DI?DI.valueOf:void 0,s_=Object.prototype.hasOwnProperty,MI="[object Arguments]",C2="[object Array]",pO="[object Object]",I2=Object.prototype.hasOwnProperty;function hO(s,l,u,h,v){return s===l||(null==s||null==l||!r_(s)&&!r_(l)?s!=s&&l!=l:function(E,I,R,N,L,V){var O=Zd(E),X=Zd(I),ee=O?C2:Kp(E),re=X?C2:Kp(I),ne=(ee=ee==MI?pO:ee)==pO,fe=(re=re==MI?pO:re)==pO,ve=ee==re;if(ve&&Nb(E)){if(!Nb(I))return!1;O=!0,ne=!1}if(ve&&!ne)return V||(V=new Wp),O||iO(E)?zp(E,I,R,N,L,V):function(lt,tt,St,Zt,ut,Ze,_e){switch(St){case"[object DataView]":if(lt.byteLength!=tt.byteLength||lt.byteOffset!=tt.byteOffset)return!1;lt=lt.buffer,tt=tt.buffer;case"[object ArrayBuffer]":return!(lt.byteLength!=tt.byteLength||!Ze(new v2(lt),new v2(tt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return u2(+lt,+tt);case"[object Error]":return lt.name==tt.name&&lt.message==tt.message;case"[object RegExp]":case"[object String]":return lt==tt+"";case"[object Map]":var He=FB;case"[object Set]":if(He||(He=t4),lt.size!=tt.size&&!(1&Zt))return!1;var st=_e.get(lt);if(st)return st==tt;Zt|=2,_e.set(lt,tt);var Ne=zp(He(lt),He(tt),Zt,ut,Ze,_e);return _e.delete(lt),Ne;case"[object Symbol]":if(kI)return kI.call(lt)==kI.call(tt)}return!1}(E,I,ee,R,N,L,V);if(!(1&R)){var Le=ne&&I2.call(E,"__wrapped__"),Qe=fe&&I2.call(I,"__wrapped__");if(Le||Qe){var ze=Le?E.value():E,ft=Qe?I.value():I;return V||(V=new Wp),L(ze,ft,R,N,V)}}return!!ve&&(V||(V=new Wp),function(lt,tt,St,Zt,ut,Ze){var _e=1&St,He=OA(lt),ct=He.length;if(ct!=OA(tt).length&&!_e)return!1;for(var st=ct;st--;){var Ne=He[st];if(!(_e?Ne in tt:s_.call(tt,Ne)))return!1}var Jt=Ze.get(lt),Ft=Ze.get(tt);if(Jt&&Ft)return Jt==tt&&Ft==lt;var yn=!0;Ze.set(lt,tt),Ze.set(tt,lt);for(var mr=_e;++st<ct;){var tr=lt[Ne=He[st]],Tr=tt[Ne];if(Zt)var gr=_e?Zt(Tr,tr,Ne,tt,lt,Ze):Zt(tr,Tr,Ne,lt,tt,Ze);if(!(void 0===gr?tr===Tr||ut(tr,Tr,St,Zt,Ze):gr)){yn=!1;break}mr||(mr="constructor"==Ne)}if(yn&&!mr){var lr=lt.constructor,Hn=tt.constructor;lr==Hn||!("constructor"in lt)||!("constructor"in tt)||"function"==typeof lr&&lr instanceof lr&&"function"==typeof Hn&&Hn instanceof Hn||(yn=!1)}return Ze.delete(lt),Ze.delete(tt),yn}(E,I,R,N,L,V))}(s,l,u,h,hO,v))}var n4=Object.prototype.hasOwnProperty;const MA=s=>4294966272&s,Jl=s=>{let l={R:0,G:0,B:0,A:0};if("string"==typeof s&&s.startsWith("#")){const R=s.slice(1);try{if(3===R.length){const N=Array.from(R).map(L=>L.repeat(2)).map(L=>parseInt(L,16));l={R:N[0]/255,G:N[1]/255,B:N[2]/255,A:1}}else if(6===R.length||8===R.length){var u,h,v,E,I;const N=null===(u=R.match(/\S{2}/g))||void 0===u?void 0:u.map(L=>parseInt(L,16));l={R:(null!==(h=N?.[0])&&void 0!==h?h:0)/255,G:(null!==(v=N?.[1])&&void 0!==v?v:0)/255,B:(null!==(E=N?.[2])&&void 0!==E?E:0)/255,A:null!=N&&N[3]?(null!==(I=N?.[3])&&void 0!==I?I:0)/255:1}}}catch{console.warn("error color representation:",s)}}else"object"==typeof s&&(l={R:s.R/255,G:s.G/255,B:s.B/255,A:s.A||1});return l};function NA(s){let{captureWidth:l=0,captureHeight:u=0}=s||{};const{hd:h}=s||{};return 0!==l&&0!==u||(h&&tn.isSupportSending720P()?(l=1280,u=720):(l=640,u=360)),{captureWidth:l,captureHeight:u}}function NI(s,l){return"default"===s||l.some(u=>u.deviceId===s)||[bp.Environment,bp.User,bp.Left,bp.Right].includes(s)}function VB(s,l,u){const h=[],{video:{videoSsrc:v,activeCamera:E}}=l,{cameraId:I=E,videoElement:R,originalRatio:N,ptz:L,hd:V,mediaFile:O,fps:X}=u||{};let ee;R&&(R.id?ee=R.id:(ee=Fs("__ZOOM_SDK_SELF_VIDEO_@__"),R.id=ee));let re=X??lP.Default;re=Math.max(lP.Min,re),re=Math.min(lP.Max,re);const{captureWidth:ne,captureHeight:fe}=NA(u);let ve=Promise.resolve(I);if(O&&O.url){const Le=Dc.getInstance();ve=Le.setVideoElement(O).then(()=>Le.videoElement)}else Dc.getInstance().stopVideoElement();return ve.then(Le=>{var Qe,ze;s.startCaptureVideo(v,Le,ne,fe,ee,Au(),!N&&(Au()||!(null!==(Qe=navigator.mediaDevices)&&void 0!==Qe&&null!==(ze=Qe.getSupportedConstraints)&&void 0!==ze&&ze.call(Qe).aspectRatio)||ig()||yh()||sv()),L,re)}),h.push(cC({cameraId:I,captureWidth:ne,captureHeight:fe,videoDOMId:ee,originalRatio:N,ptz:L,hd:V,mediaFile:O,fps:re})),h}function jB(s,l,u){const{max:h,min:v,step:E}=s;let I=u/100*(h-v);E&&(I=Math.min(Math.floor(I/E)*E,Math.floor(I)));let R=l+I;return R=Math.min(h,R),R=Math.max(v,R),R}function QB(s,l){let u="",h=l;switch(s){case mg.Down:h=-l,u="tilt";break;case mg.Up:u="tilt";break;case mg.Left:h=-l,u="pan";break;case mg.Right:u="pan";break;case mg.ZoomIn:u="zoom";break;case mg.ZoomOut:h=-l,u="zoom"}return{key:u,range:h}}function fO(s){const l=["pan","tilt","zoom"].reduce((u,h)=>s[h]&&0!==s[h].value?{...u,[h]:s[h].value}:u,{});return function(u){if(null==u)return!0;if(tO(u)&&(Zd(u)||"string"==typeof u||"function"==typeof u.splice||Nb(u)||iO(u)||p2(u)))return!u.length;var h=Kp(u);if("[object Map]"==h||"[object Set]"==h)return!u.size;if(MB(u))return!oO(u).length;for(var v in u)if(n4.call(u,v))return!1;return!0}(l)?null:l}function jb(s){return{pan:(s&Ih.Pan)===Ih.Pan,tilt:(s&Ih.Tilt)===Ih.Tilt,zoom:(s&Ih.Zoom)===Ih.Zoom}}function mO(s){const l=og()&&!ig();return"function"!=typeof window.SharedArrayBuffer&&l||!sg()&&!s&&!Ma()&&("function"==typeof window.ImageCapture||iv())&&Eh()}const Yp=ji.createAgent(),xA=tn.getInstance();var w2=Object.freeze({__proto__:null,receiveVideoActiveIndication:s=>Wn(s,16129).pipe(ht(l=>{const{payload:{body:{id:u,bVideoOn:h}}}=l,v=MA(u);return dt(dP,{bVideoOn:h,userId:v}),tu({bVideoOn:h,userId:v})})),receiveVideoDecodeMaxSizeEpic:(s,l)=>Ar(s,Vn.VideoDecodeMaxSize).pipe(ln(u=>{var h;return null==u||null===(h=u.payload)||void 0===h?void 0:h.data}),ht(u=>{const{size:h}=u.payload.data,{video:{renderedVideoList:v,receivedVideoMaxQuality:E}}=l.value,I=v.filter(R=>R.videoQuality>=rl.Video_720P);return E!==h&&I.length>0&&(h!==rl.Video_720P&&E!==rl.Video_720P||I.forEach(R=>{Yp.subscribeVideo(R.userId,R.videoQuality,!1)})),VP(h)})),spotlightVideoResponseEpic:s=>Wn(s,16135).pipe(ht(l=>{const{payload:{body:{bLeadershipOn:u,id:h}}}=l,v=[];return u&&v.push(MA(h)),dt(FT,{spotlightList:v}),m1(v)})),handleGroupLayoutIndicationEpic:(s,l)=>Wn(s,7958).pipe(Fn(l),ht(u=>{let[h,v]=u;const{payload:{body:E}}=h;let I=[];E&&E.group_list&&E.group_list[0]&&(I=E.group_list[0].map(N=>N.id));const R=ls(v);return I=I.filter(N=>R.findIndex(L=>L.userId===N)>=0),dt(FT,{spotlightList:I}),m1(I)})),handleCurrentVideoResolution:s=>Ar(s,Vn.CurrentVideoResolution).pipe(al(l=>(dt(uE,l.payload.data),jr(l.payload.data)))),handleVideoWidthHeightEpic:s=>Ar(s,[Vn.CurrentVideoResolution,Vn.CurrentCaptureVideoWidthHeight]).pipe(ln(l=>!!l.payload.data),ht(l=>{const{payload:{data:u,type:h}}=l;return h===Vn.CurrentVideoResolution?(dt(uE,u),jr(u)):(dt(b0,u),HP(u))})),handleMeetingVideoAttributeEpic:s=>Wn(s,zc).pipe(ln(l=>{const{payload:{body:u}}=l;return["bFollowHostVideo","VideoHd","bCanUnmuteVideo"].some(h=>void 0!==u[h])}),ht(l=>{const{payload:{body:{bFollowHostVideo:u,VideoHd:h,bCanUnmuteVideo:v}}}=l;if(void 0!==u)return dt(No,{bOn:u}),v1(u);if(void 0!==v)return BE(v);{const E=1===h;return xA.updateVideoHDValue(E),xA.enableHardwareAccelerationForVideoEncode(!1),y1(E)}})),handleHostDragLayoutIndicationEpic:(s,l)=>Wn(s,7957).pipe(Fn(l),ht(u=>{let[h,v]=u;const{video:{isFollowHostVideoLayout:E}}=v,{payload:{body:I}}=h,R=I&&I.drag_list&&I.drag_list.map(N=>N.id);return E&&dt($c,{layout:R}),aC(R)})),handlePeerVideoStateChangeEpic:(s,l)=>Wn(s,Mo).pipe(Fn(l),ln(u=>{let[h,v]=u;const{meeting:{userId:E},video:{subscribedVideoList:I}}=v,R=h.payload.body.update,N=h.payload.body.remove;return R&&R.length>0&&R.findIndex(L=>L.id!==E&&(void 0!==L.bVideoOn||L.bHold))>-1||N&&N.some(L=>I.includes(L.id))}),Zn(u=>{let[h,v]=u;const{payload:{body:{remove:E,update:I}}}=h,{video:{subscribedVideoList:R}}=v,N=VL(v);if(E&&E.length>0&&E.filter(L=>R.includes(L.id)).forEach(L=>{dt(Or,{userId:L.id})}),I&&I.length>0){const L=I.filter(O=>void 0!==O.bVideoOn).filter(O=>-1===N.findIndex(X=>X.userId===O.id)),V=I.filter(O=>!0===O.bHold);V.length>0&&V.filter(O=>R.includes(O.id)).forEach(O=>{dt(Or,{userId:O.id})}),L.forEach(O=>{dt(O.bVideoOn?dE:Or,{userId:O.id})})}}),Pr(Ht)),handleVideoQosDataEpic:(s,l)=>Ar(s,Vn.VideoQosData).pipe(Fn(l),ht(u=>{var h;let[v,E]=u;const{video:{isCaptureForbidden:I,isCameraTaken:R},media:{videoEncodeStatus:N,videoDecodeStatus:L}}=E,V=Cr(E),O=$0(E),X=O.length>0,ee=V?.bVideoOn&&!I&&!R,re=O.some(ve=>ve.bVideoOn),fe="success"===L&&X&&re;return null!==(h=v.payload.data)&&void 0!==h&&h.encoding?"success"===N&&ee&&X?(dt(pE,v.payload),UE(v.payload)):UE(Pf):fe?(dt(pE,v.payload),ka(v.payload)):ka(Pf)})),handleVideoCellChangeEpic:s=>Ar(s,[66.5,66.6]).pipe(Zn(l=>{const{payload:{type:u,data:h}}=l;if(66.5===u){const{ssrc:v,width:E,height:I,quality:R}=h;dt(vv,{userId:v,width:E,height:I,quality:R})}else if(66.6===u){const{ssrc:v,fps:E}=h;dt(vv,{userId:v,fps:E})}}),Pr(Ht)),handleMaximumNumberOfHDSubscriptionsEpic:s=>s.pipe(wr(`${ph}`),Pn(U(function*(){return Au()?1:(yield tn.isSupportVideoDecodeHardwareAcceleration())?4:1})),ht(l=>Hf(l))),handleNetworkQualityChangeEpic:(s,l)=>Ar(s,Vn.NetworkQualityChange).pipe(ln(u=>!!u.payload.data),Pn(u=>{var h;const{payload:{data:{bwLevel:v,isUplink:E,networkLevel:I}}}=u,R=[],{meeting:{userId:N},video:{networkQuality:L,subscribedVideoList:V,networkQualityBroadcastTime:O}}=l.value,X=E?"uplink":"downlink";R.push(VE({userId:N,level:I,bwLevel:v,type:X}));const ee=n0(null===(h=L[`${N}`])||void 0===h?void 0:h[X],{level:I,bwLevel:v});if(!ee&&-1!==I&&(!E&&V.filter(re=>re!==N).length>0||E)&&dt(ta,{userId:N,type:X,level:I}),E){const re=performance.now();(!ee||re-(O??0)>3e4)&&(Yp.broadcastUserNetworkQuality({isUplink:E,level:I,bwLevel:v}),R.push(Gf(re)))}return En(R)})),handleOthersNetworkQualityChangeEpic:(s,l)=>pc(s,8005).pipe(ln(u=>{var h;return!(null===(h=u.payload.body)||void 0===h||!h.nUserID)}),Pn(u=>{const{payload:{body:{nLevel:h,nUserID:v}}}=u,{video:{networkQuality:E}}=l.value,I=E[`${v}`],R=[];return I&&I.uplink.level===h||(dt(ta,{userId:v,level:h,type:"uplink"}),R.push(VE({userId:v,level:h,type:"uplink"}))),En(R)})),handlePrefetchVideoRemovedEpic:(s,l)=>Wn(s,Mo).pipe(ln(u=>{const{payload:{body:h}}=u,{video:{prefetchedVideo:v}}=l.value;return v?.userId&&(h.update||h.remove)}),Pn(u=>{const{payload:{body:h}}=u,v=[],{video:{prefetchedVideo:E}}=l.value;let I=!1;return h.remove&&(I=-1!==h.remove.findIndex(R=>R.id===E?.userId)),h.update&&(I=-1!==h.update.findIndex(R=>R.id===E?.userId&&!1===R.bVideoOn)),I&&E&&(E.loaded||xA.cancelPrefetchVideoSsrc(E.userId),Yp.unsubscribeVideo(E.userId),v.push(Vl(void 0))),En(v)})),handlePrefetchVideoEpic:(s,l)=>s.pipe(wr(`${Vl}`),ln(u=>!!u.payload),Zn(u=>{const{payload:{lastCopy:h}}=u,{video:{prefetchedVideo:v}}=l.value;!v||h&&h.userId===v.userId||(null!=h&&h.userId&&(h.loaded&&xA.cancelPrefetchVideoSsrc(h.userId),Yp.unsubscribeVideo(h.userId)),Yp.subscribeVideo(v.userId,rl.Video_360P,!1),xA.prefetchVideoSsrc(v.userId))}),Pr(Ht)),handleActiveVideoFrameCallbackEpic:(s,l)=>Ar(s,Vn.NewActiveSpeakerFirstFrameCallback).pipe(ln(()=>!!l.value.video.prefetchedVideo),Pn(u=>{const{payload:{data:{ssrc:h}}}=u,{video:{prefetchedVideo:v}}=l.value,E=[];return v&&(AT(v.userId,h)?(E.push(Vl({userId:v.userId,loaded:!0,lastCopy:v})),dt(Av,{userId:v.userId})):Yp.unsubscribeVideo(v.userId)),En(E)}))});let $l,hl;function xI(s,l,u){return Qb.apply(this,arguments)}function Qb(){return Qb=U(function*(s,l,u){const h=Fs(s),v=document.createElement("img");return v.src=l,v.id=h,v.style.display="none",Uy(l)&&v.setAttribute("crossorigin",""),yield new Promise((E,I)=>{v.onload=()=>{u&&URL.revokeObjectURL(l),E("")},v.onerror=()=>{u&&URL.revokeObjectURL(l),I("Cannot load  image.")}}),{imageId:h,imgElement:v}}),Qb.apply(this,arguments)}function LA(s,l,u){return LI.apply(this,arguments)}function LI(){return LI=U(function*(s,l,u){if(s===oE)return oE;{let h=s;if(l){const v=yield(E=s,new Promise((I,R)=>{try{$l&&hl||($l=document.createElement("canvas"),hl=$l.getContext("2d"));const N=$l,L=hl;if(L){L.clearRect(0,0,$l.width,$l.height);const V=new Image;V.src=E,Uy(E)&&(V.crossOrigin="");const O=16/9,X=1280,ee=Math.floor(X/O);N.width=X,N.height=ee,V.onload=()=>{const{width:re,height:ne}=V,fe=ne*O;if(fe>re){const ve=re,Le=Math.floor(re/O);L?.drawImage(V,0,(ne-Le)/2,ve,Le,0,0,X,ee)}else L.drawImage(V,(re-fe)/2,0,fe,ne,0,0,X,ee);try{N.toBlob(ve=>{I(ve)})}catch(ve){ve instanceof DOMException&&ve.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),R(ve)}},V.onerror=re=>{R("Cannot load  image.")}}}catch(N){R(N)}}));h=URL.createObjectURL(v)}if(h){const{imageId:v,imgElement:E}=yield xI(fg,h,!!l);return(u??document.body).appendChild(E),v}}var E;return null}),LI.apply(this,arguments)}function BI(s,l,u){return Hb.apply(this,arguments)}function Hb(){return Hb=U(function*(s,l,u){var h;const v=null!==(h=u&&u.parentNode)&&void 0!==h?h:document.body,{imageUrl:E,cropped:I,rootWidth:R,rootHeight:N}=s;let L=s;!l.video.customizedVideoOption||s.captureWidth&&s.captureHeight||(L=l.video.customizedVideoOption);const{captureWidth:V,captureHeight:O}=NA(L),X=document.createElement("div");let ee;X.style.display="none",ee=E?yield LA(E,I,X):null;let re=Fs(MV);if(u){const ne=qf(u);ne.id?re=ne.id:ne.id=re;try{R&&u.width!==R&&(u.width=R),N&&u.height!==N&&(u.height=N)}catch{console.warn("Cannot set the canvas width/height, and pay attention the canvas dimension is different from the setting")}}else{const ne=document.createElement("canvas");ne.width=R??380,ne.height=N??214,ne.id=re,X.appendChild(ne)}return v?.appendChild(X),{captureWidth:V,captureHeight:O,imageId:ee,canvasId:re,divElement:X}}),Hb.apply(this,arguments)}function a_(s,l,u,h){return FI.apply(this,arguments)}function FI(){return FI=U(function*(s,l,u,h){const v=Array.isArray(s)?s:s&&[s];if(v?.length>0){$l&&hl||($l=document.createElement("canvas"),hl=$l.getContext("2d"));const E=$l,I=hl;if(E.width=l,E.height=u,I)try{I.fillStyle="#fff",I.clearRect(0,0,l,u);for(let N=0;N<v.length;N++){const L=v[N],{type:V,x:O,y:X}=L;if("rectangle"===V){const{width:ee,height:re}=L;I.fillRect(O,X,ee,re)}else if("square"===V){const{length:ee}=L;I.fillRect(O,X,ee,ee)}else if("circle"===V){const{radius:ee}=L;I.beginPath(),I.arc(O,X,ee,0,2*Math.PI),I.fill()}else if("svg"===V){const{svg:ee,width:re,height:ne}=L,fe=new Image;fe.src=ee,Uy(ee)&&(fe.crossOrigin=""),yield new Promise((Qe,ze)=>{fe.onload=()=>{Qe("")},fe.onerror=()=>{ze()}});const{width:ve,height:Le}=fe;I.drawImage(fe,0,0,ve,Le,O,X,re,ne)}}const R=yield new Promise(N=>{E?.toBlob(L=>{N(L)})});if(R){const N=URL.createObjectURL(R),{imageId:L,imgElement:V}=yield xI(aE,N,!0);return(h??document.body).appendChild(V),L}}catch(R){R instanceof DOMException&&R.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue")}}return null}),FI.apply(this,arguments)}function HB(s,l){if(s===l||null==s&&null==l)return!0;const u=Array.isArray(s)?[...s]:[s],h=Array.isArray(l)?[...l]:[l];if(u.length!==h.length)return!1;const v=(E,I)=>E.type<I.type?-1:E.type===I.type?0:1;u.sort(v),h.sort(v);for(let E=0;E<u.length;E++)if(!n0(u[E],h[E]))return!1;return!0}function gO(s,l,u,h){const{video:{isCurrentUserStartedVideo:v,virtualBackground:{isVBPreloadReady:E,isVBConfigured:I,imageSrc:R},backgroundMode:N},meeting:{isCurrentUserStartVideoBeforeReset:L}}=u;return(V=E,void 0!==V?En(Promise.resolve(V)):vo(Za,1).pipe(ht(O=>O))).toPromise().then(V=>{return V?h||!I&&s.imageUrl!==oE&&s.imageUrl?(O=U(function*(X,ee,re,ne){const{canvasId:fe,imageId:ve,captureHeight:Le,captureWidth:Qe,divElement:ze}=yield BI(X,re,ne),{cameraId:ft}=X,{video:{videoSsrc:lt,activeCamera:tt}}=re;return ee.startVirtualBackgroundSetting(fe,ve,lt,ft??tt,Qe,Le),ze}),function(X,ee,re,ne){return O.apply(this,arguments)})(s,l,u,h).then(O=>v?b1(!0):vo(_v,1).toPromise().then(X=>{var ee;return h||l.stopVirtualBackgroundSetting(),X?(null==O||null===(ee=O.parentNode)||void 0===ee||ee.removeChild(O),!0):Promise.reject("Cannot access the virtual background image.")})):R===s.imageUrl&&N===il.VirtualBackground&&!L||function(){var O=U(function*(X,ee,re){const{imageUrl:ne,cropped:fe}=X;if(ne){const ve=yield LA(ne,fe);ve&&(re.video.backgroundMode===il.Mask&&(ee.stopMaskSetting(!0),yield Fy(()=>{ee.stopVirtualBackgroundSetting()},0)),ee.updateVirtualBackgroundImage(ve),ve!==oE&&setTimeout(()=>{Gv(ve)},0))}else ee.updateVirtualBackgroundImage(null)});return function(X,ee,re){return O.apply(this,arguments)}}()(s,l,u):Promise.reject("Cannot load virtual background model.");var O});var V}function _O(s,l,u,h){const{video:{mask:{isMaskConfigured:v,imageSrc:E,clip:I},backgroundMode:R,isCurrentUserStartedVideo:N},meeting:{isCurrentUserStartVideoBeforeReset:L}}=u;return h||!v&&s.imageUrl?(V=U(function*(O,X,ee,re){const{canvasId:ne,imageId:fe,captureHeight:ve,captureWidth:Le,divElement:Qe}=yield BI(O,ee,re),{cameraId:ze,clip:ft,rootWidth:lt=1280,rootHeight:tt=720}=O,St=ft?yield a_(ft,lt,tt,Qe):null,{video:{videoSsrc:Zt,activeCamera:ut}}=ee;return fe&&St?(X.startMaskSetting(ne,fe,St,Zt,ze??ut,lt,tt,Le,ve),Qe):Promise.reject("image or clip is empty")}),function(O,X,ee,re){return V.apply(this,arguments)})(s,l,u,h).then(V=>N?Pv(!0):vo(gg,1).toPromise().then(O=>{var X;return h||l.stopMaskSetting(),O?(null==V||null===(X=V.parentNode)||void 0===X||X.removeChild(V),!0):Promise.reject("Cannot set video mask")})):R===il.Mask&&s.imageUrl===E&&HB(s.clip,I)&&!L?Promise.resolve(!0):function(){var V=U(function*(O,X,ee){const{imageUrl:re,cropped:ne,clip:fe,rootWidth:ve,rootHeight:Le}=O,{video:{mask:{imageSrc:Qe,cropped:ze,clip:ft},backgroundMode:lt}}=ee;if(re){if(lt===il.VirtualBackground&&(X.stopVirtualBackgroundSetting(!0),yield Fy(()=>{X.stopMaskSetting()},0)),re!==Qe||ne!==ze){const tt=yield LA(re,ne);tt&&(X.updateMaskBackgroundImage(tt),setTimeout(()=>{Gv(tt)},0))}if(!HB(fe,ft)&&fe&&ve&&Le){const tt=yield a_(fe,ve,Le);tt&&(X.updateMaskClip(tt,ve,Le),setTimeout(()=>{Gv(tt)},0))}}else X.updateMaskBackgroundImage(null),X.updateMaskClip(null,ve,Le)});return function(O,X,ee){return V.apply(this,arguments)}}()(s,l,u);var V}const Gb=ji.createAgent(),c_=tn.getInstance();var GB=Object.freeze({__proto__:null,handleStartCaptureVideoSuccessEpic:(s,l)=>Ar(s,Vn.StartVideoCaptureSuccess).pipe(Pn(u=>{const{video:{cameraDevicesList:h,activeCamera:v,ptz:E,isCurrentUserStartedVideo:I,isUsingMediaPlayback:R},meeting:{userId:N}}=l.value,{payload:{data:{currentDeviceID:L,PTZRange:V}}}=u,O=[];if(h.length<1&&!R&&(dt(S0,{reason:"Cannot detect camera devices"}),c_.stopCaptureVideo()),NI(v,h)||R){if(I||Gb.muteAttendeeVideo(N,!1),dt(Xc),R)O.push(xE("default"));else if(L&&V&&O.push(QP({deviceId:L,ptzRange:V})),v!==L&&O.push(xE(L)),Object.prototype.hasOwnProperty.call(E,L)){const X=E[L];if(X){const ee=fO(X);ee&&c_.movePTZCamera(ee)}}}else dt(yc,{reason:"cannot find target camera"}),c_.stopCaptureVideo();return En(O)})),handleVideoCaptureResponseEpic:(s,l)=>Wn(s,Mo).pipe(ln(u=>{const{payload:{body:{update:h}}}=u,{meeting:{userId:v}}=l.value;return h?.some(E=>E.id===v&&void 0!==E.bVideoOn)}),ht(u=>{const{payload:{body:{update:h}}}=u,{meeting:{userId:v}}=l.value,E=h.find(I=>I.id===v);return dt(!0===E.bVideoOn?lE:wh),f1(!!E.bVideoOn)})),handleCaptureVideoErrorEpic:s=>Ar(s,[Vn.UserForbiddedCaptureVideo,Vn.UserCameraIsTakenByOtherPrograms,Vn.VideoWebsocketBroken,Vn.StopVideoCaptureFailed]).pipe(Pn(l=>{const{payload:{type:u}}=l,h=[];switch(u){case Vn.UserForbiddedCaptureVideo:dt(as),h.push(oC(!0));break;case Vn.UserCameraIsTakenByOtherPrograms:dt(gv,{reason:"User camera is taken by other programs."}),h.push(LE(!0));break;case Vn.VideoWebsocketBroken:dt(C0,{reason:"Video websocket broken."});break;case Vn.StopVideoCaptureFailed:dt(wh,{failed:!0,reason:"Unknown."})}return En(h)})),handleStopVideoCaptureSuccessEpic:(s,l)=>Ar(s,Vn.StopVideoCaptureSuccess).pipe(Fn(l),al(u=>{let[,h]=u;const{meeting:{userId:v},video:{isCurrentUserStartedVideo:E}}=h;E||dt(wh),Gb.muteAttendeeVideo(v,!0)})),receiveVideoMuteIndication:(s,l)=>Wn(s,16133).pipe(Fn(l),ln(u=>{var h,v;let[E,I]=u;return(null==E||null===(h=E.payload)||void 0===h||null===(v=h.body)||void 0===v?void 0:v.id)===I.meeting.userId}),al(u=>{let[h]=u;const{id:v,bVideoMute:E}=h.payload.body;return dt(LT,{id:v,isVideoMuted:E}),!0===E&&c_.stopCaptureVideo(),!1===E&&dt(E0,{id:v,isVideoMuted:E}),sC(E)})),receiveVideoSsrcIndication:(s,l)=>Wn(s,16131).pipe(ln(u=>void 0!==u.payload.body.ssrc),kn(u=>{const{payload:{body:{ssrc:h}}}=u;return $s($n(UP(h)),Op(l).pipe(Pn(v=>{const{meeting:{isCurrentUserStartVideoBeforeReset:E},media:{videoEncodeStatus:I}}=l.value;return!0!==v?.bVideoOn&&!0===E?Pa("video",I,"success").pipe(ln(R=>{let[N,L]=R;return N&&L}),ht(()=>{const R=l.value,{video:{backgroundMode:N,mask:L,virtualBackground:V,activeCamera:O,customizedVideoOption:X}}=R;let ee=Promise.resolve(!0);return N===il.VirtualBackground&&V.imageSrc?ee=gO({imageUrl:V.imageSrc,cropped:V.cropped},c_,R):N===il.Mask&&L.imageSrc&&L.clip&&(ee=_O({imageUrl:L.imageSrc,cropped:L.cropped,clip:L.clip,rootHeight:L.rootHeight,rootWidth:L.rootWidth},c_,R)),ee.then(()=>{VB(tn.getInstance(),R,{cameraId:O,...X})}),tv(void 0)})):Ht})))})),handleCameraConnectedIndicationEpic:(s,l)=>s.pipe(wr(`${h1}`),Zn(u=>{const{payload:h}=u,v=l.value,{meeting:{userId:E}}=v,I=Cr(v);0===h.length?I&&!I.bVideoConnect||Gb.connectCamera(E,!1):null!=I&&I.bVideoConnect||Gb.connectCamera(E,!0)}),Pr(Ht))}),T2=Object.freeze({__proto__:null,handleVBPreloadEpic:s=>Ar(s,[Vn.VbModelPreloadingOk,Vn.VbModelPreloading_3S,Vn.VbModelPreloading_10S,Vn.VbSettingParaError]).pipe(Pn(l=>{const{payload:{type:u,data:h}}=l,v=[];return[Vn.VbModelPreloadingOk,Vn.VbModelPreloading_3S,Vn.VbModelPreloading_10S].includes(u)?(v.push(E1(!0)),dt(Za,!0),u===Vn.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):u===Vn.VbSettingParaError&&(h===uP.VBModelNotMatch?(dt(Za,!1),v.push(E1(!1))):(dt(_v,!1),v.push(b1(!1)))),En(v)})),handleVBSettingSuccessEpic:s=>Ar(s,Vn.StartVideoStreamInVbSettingSuccess).pipe(ht(()=>(dt(_v,!0),b1(!0)))),handleMaskSettingSuccessEpic:s=>Ar(s,Vn.StartVideoStreamInMaskSettingSuccess).pipe(ht(()=>(dt(gg,!0),Pv(!0)))),handleMaskSettingFailedEpic:s=>Ar(s,Vn.MaskSettingParaError).pipe(ht(()=>(dt(gg,!1),Pv(!1))))});const WB=ji.createAgent(),Wb=tn.getInstance();var R2=Object.freeze({__proto__:null,handleRemoteCameraControlEpic:(s,l)=>Wn(s,8004).pipe(Pn(u=>{const{payload:{body:{nCmd:h,nUserID:v,nReason:E,nButtonID:I}}}=u,R=l.value,N=ls(R),{video:{currentCameraControlStatus:{isInControl:L,controllingUserId:V},cameraDevicesList:O,activeCamera:X}}=R,ee=N.find(ne=>AT(ne.userId,v)),re=[];if(re.push(kv(!0)),h===Ra.Request){const ne={userId:ee?.userId,displayName:ee?.displayName};if(L){const fe=N.find(ve=>ve.userId===V);Object.assign(ne,{currentControllingUserId:fe?.userId,currentControllingDisplayName:fe?.displayName})}dt(cs,ne)}else if(h===Ra.Approve)re.push(QL(ee?.userId)),dt(Mf,{isApproved:!0,userId:ee?.userId,displayName:ee?.displayName});else if(h===Ra.Decline)re.push(uC(ee?.userId)),dt(Mf,{isApproved:!1,userId:ee?.userId,displayName:ee?.displayName,reason:E});else if(h===Ra.GiveUp)re.push(jE({isInControl:!1,userId:0})),dt(Ec,{isControlled:!1});else if(h===Ra.StartControl||h===Ra.StopControl)re.push(lC({cmd:h===Ra.StartControl?"start":"stop",type:I}));else if(h===Ra.SwitchCamera){const ne=O.findIndex(ve=>ve.deviceId===X),fe=ne+1===O.length?0:ne+1;fe!==ne&&Wb.changeCamera(O[fe].deviceId)}return En(re)})),handleFarEndCameraCapabilityEpic:(s,l)=>Wn(s,Mo).pipe(ln(u=>{var h;const{payload:{body:v}}=u;return null==v||null===(h=v.update)||void 0===h?void 0:h.some(E=>void 0!==E.nFECC||void 0!==E.nFECCExecutive)}),Zn(u=>{const{payload:{body:{update:h}}}=u,v=h.find(E=>void 0!==E.nFECC||void 0!==E.nFECCExecutive);if(v){const{meeting:{userId:E}}=l.value;AT(v.nFECCExecutive,E)&&dt(pP,{userId:v.id,ptz:jb(v.nFECC)})}}),Pr(Ht)),handleFarEndCameraUserLeftEpic:(s,l)=>Wn(s,Mo).pipe(ln(u=>{var h;const{payload:{body:v}}=u,{video:{farEndCameraControlStatus:{controlledUserList:E}}}=l.value;return null==v||null===(h=v.remove)||void 0===h?void 0:h.some(I=>E.includes(I.id))}),Pn(u=>{var h;const{payload:{body:v}}=u,E=[],{video:{farEndCameraControlStatus:{controlledUserList:I}}}=l.value,R=null==v||null===(h=v.remove)||void 0===h?void 0:h.find(N=>I.includes(N.id));return R&&E.push(uC(R.id)),En(E)})),handleFarEndCameraActionEpic:(s,l)=>s.pipe(wr(`${lC}`),kn(u=>{const{payload:{cmd:h,type:v}}=u;return"start"===h?ua(0,200).pipe(jm(()=>!!l.value.video.currentCameraControlStatus.isCameraMoving),Pn(()=>{const{video:{ptz:E,activeCamera:I}}=l.value,R=E[I],N=fO(R)||{},{key:L,range:V}=QB(v,2);return R[L]?(Object.assign(N,{[L]:jB(R[L].capability,R[L].value,V)}),Wb.movePTZCamera(N).then(()=>dC({deviceId:I,constraints:N}))):Promise.resolve(void 0)}),Pn(E=>"object"==typeof E&&void 0!==E.type?$n(E):Ht)):Ht})),handleSendCapabilityWhenActiveCameraChangeEpic:(s,l)=>s.pipe(wr(`${xE}`),Pn(u=>{const{payload:h}=u,{video:{customizedVideoOption:v,ptz:E}}=l.value;if(null!=v&&v.ptz){const I=E?.[h];void 0!==I&&WB.sendCameraAblity({pan:!!I.pan,tilt:!!I.tilt,zoom:!!I.zoom})}return Ht}))});const vO={videoSsrc:0,cameraDevicesList:[],activeCamera:Au()?bp.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,receivedVideoMaxQuality:navigator.hardwareConcurrency>=8?rl.Video_720P:rl.Video_360P,subscribedVideoList:[],renderedVideoList:[],ensuredCanvas:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,isUsingMediaPlayback:!1,receivedVideoDimension:{width:0,height:0},capturedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},mask:{imageSrc:void 0,cropped:void 0,clip:void 0},backgroundMode:il.Null,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}},hardwareAcceleration:{encode:!1,decode:!1},networkQuality:{},ptz:{},currentCameraControlStatus:{isRequested:!1,isInControl:!1,isCameraMoving:!1},farEndCameraControlStatus:{controlledUserList:[],isControlling:!1}},AO=Gn({[`${UP}`]:gt((s,l)=>{let{payload:u}=l;s.videoSsrc=u}),[`${h1}`]:gt((s,l)=>{let{payload:u}=l;s.cameraDevicesList=u}),[`${xE}`]:gt((s,l)=>{let{payload:u}=l;const h=s.activeCamera;if(h in s.ptz){const v=s.ptz[h];["pan","tilt","zoom"].forEach(E=>{v[E]&&(v[E].value=0)})}s.activeCamera=u}),[`${tu}`]:gt((s,l)=>{let{payload:u}=l;s.activeVideoId=u.userId}),[`${f1}`]:gt((s,l)=>{let{payload:u}=l;s.isCurrentUserStartedVideo=u}),[`${m1}`]:gt((s,l)=>{let{payload:u}=l;s.spotlightUserList=u}),[`${oC}`]:gt((s,l)=>{let{payload:u}=l;s.isCaptureForbidden=u}),[`${VP}`]:gt((s,l)=>{let{payload:u}=l;s.receivedVideoMaxQuality=u}),[`${sC}`]:gt((s,l)=>{let{payload:u}=l;s.isVideoMuted=u}),[`${wg}`]:gt((s,l)=>{let{payload:u}=l;s.isCaptureCameraLoading=u}),[`${LE}`]:gt((s,l)=>{let{payload:u}=l;s.isCameraTaken=u}),[`${jr}`]:gt((s,l)=>{let{payload:u}=l;s.receivedVideoDimension=u}),[`${Bt}`]:gt((s,l)=>{let{payload:u}=l;s.subscribedVideoList.includes(u)||s.subscribedVideoList.push(u)}),[`${_1}`]:gt((s,l)=>{let{payload:u}=l;const h=s.subscribedVideoList.indexOf(u);h>=0&&s.subscribedVideoList.splice(h,1)}),[`${jP}`]:gt((s,l)=>{let{payload:u}=l;const h=s.renderedVideoList.find(v=>v.userId===u.userId&&v.key===u.key&&v.canvasId===u.canvasId);h?h.videoQuality=u.videoQuality:s.renderedVideoList.push({...u})}),[`${A1}`]:gt((s,l)=>{let{payload:u}=l;const h=s.renderedVideoList.findIndex(v=>v.userId===u.userId&&v.key===u.key&&v.canvasId===u.canvasId);h>=0&&s.renderedVideoList.splice(h,1)}),[`${v1}`]:gt((s,l)=>{let{payload:u}=l;s.isFollowHostVideoLayout=u}),[`${aC}`]:gt((s,l)=>{let{payload:u}=l;s.hostDragLayout=u}),[`${y1}`]:gt((s,l)=>{let{payload:u}=l;s.isSupportHDVideo=u}),[`${Hf}`]:gt((s,l)=>{let{payload:u}=l;s.maximumNumbeOfHDSubscriptions=u}),[`${BE}`]:gt((s,l)=>{let{payload:u}=l;s.bCanUnmuteVideo=u}),[`${E1}`]:gt((s,l)=>{let{payload:u}=l;s.virtualBackground.isVBPreloadReady=u}),[`${b1}`]:gt((s,l)=>{let{payload:u}=l;s.virtualBackground.isVBConfigured=u}),[`${FE}`]:gt((s,l)=>{let{payload:u}=l;s.virtualBackground.imageSrc=u.imageUrl,s.virtualBackground.cropped=u.cropped,s.backgroundMode=il.VirtualBackground}),[`${Dv}`]:gt((s,l)=>{let{payload:u}=l;const{encode:h,decode:v}=u;void 0!==h&&(s.hardwareAcceleration.encode=h),void 0!==v&&(s.hardwareAcceleration.decode=v)}),[`${UE}`]:gt((s,l)=>{let{payload:u}=l;s.statistic.encode=u.data}),[`${ka}`]:gt((s,l)=>{let{payload:u}=l;s.statistic.decode=u.data}),[`${cC}`]:gt((s,l)=>{let{payload:u}=l;const{cameraId:h,captureWidth:v,captureHeight:E,videoDOMId:I,originalRatio:R,ptz:N,hd:L,mediaFile:V,fps:O}=u;s.activeCamera=h,s.customizedVideoOption={captureWidth:v,captureHeight:E,videoDOMId:I,originalRatio:R,ptz:N,hd:L,fps:O},n0(s.mediaPlaybackFile,V)||(s.mediaPlaybackFile=V,s.isUsingMediaPlayback=!(null==V||!V.url))}),[`${VE}`]:gt((s,l)=>{let{payload:u}=l;const{userId:h,level:v,bwLevel:E,type:I}=u;Object.prototype.hasOwnProperty.call(s.networkQuality,`${h}`)?s.networkQuality[`${h}`][`${I}`]={level:v,bwLevel:E}:Object.assign(s.networkQuality,{[`${h}`]:{[I]:{level:v,bwLevel:E}}})}),[`${QP}`]:gt((s,l)=>{let{payload:u}=l;const{deviceId:h,ptzRange:v}=u;if(Object.prototype.hasOwnProperty.call(s.ptz,h)){const E=s.ptz[h];E&&["pan","tilt","zoom"].forEach(I=>{const R=v[I];if(R){var N;const L=null===(N=E[I])||void 0===N?void 0:N.capability;L?Object.assign(L,{...R}):E[I]={capability:{...R},value:0}}})}else Object.assign(s.ptz,{[h]:{pan:v.pan?{capability:{...v.pan},value:0}:null,tilt:v.tilt?{capability:{...v.tilt},value:0}:null,zoom:v.zoom?{capability:{...v.zoom},value:0}:null}})}),[`${kv}`]:gt((s,l)=>{let{payload:u}=l;s.currentCameraControlStatus.isRequested=u}),[`${jE}`]:gt((s,l)=>{let{payload:u}=l;const{isInControl:h,userId:v}=u;s.currentCameraControlStatus.isInControl=h,s.currentCameraControlStatus.controllingUserId=v}),[`${QL}`]:gt((s,l)=>{let{payload:u}=l;s.farEndCameraControlStatus.controlledUserList.includes(u)||s.farEndCameraControlStatus.controlledUserList.push(u)}),[`${uC}`]:gt((s,l)=>{let{payload:u}=l;const h=s.farEndCameraControlStatus.controlledUserList.indexOf(u);-1!==h&&s.farEndCameraControlStatus.controlledUserList.splice(h,1)}),[`${lC}`]:gt((s,l)=>{let{payload:u}=l;s.currentCameraControlStatus.isCameraMoving="start"===u.cmd}),[`${dC}`]:gt((s,l)=>{let{payload:u}=l;const{constraints:h,deviceId:v}=u,E=s.ptz[v];["pan","tilt","zoom"].forEach(I=>{void 0!==h[I]&&(E[I].value=h[I])})}),[`${QE}`]:gt((s,l)=>{let{payload:u}=l;s.farEndCameraControlStatus.isControlling=u}),[`${Gf}`]:gt((s,l)=>{let{payload:u}=l;s.networkQualityBroadcastTime=u}),[`${Pv}`]:gt((s,l)=>{let{payload:u}=l;s.mask.isMaskConfigured=u}),[`${Tg}`]:gt((s,l)=>{let{payload:u}=l;const{imageUrl:h,cropped:v,rootHeight:E,rootWidth:I,clip:R}=u;s.mask.imageSrc=h,s.mask.cropped=v,s.mask.clip=R,s.mask.rootWidth=I,s.mask.rootHeight=E,s.backgroundMode=il.Mask}),[`${HE}`]:gt((s,l)=>{let{payload:u}=l;s.backgroundMode=u}),[`${HP}`]:gt((s,l)=>{let{payload:u}=l;s.capturedVideoDimension=u}),[`${GE}`]:gt((s,l)=>{let{payload:u}=l;s.ensuredCanvas.includes(u)||s.ensuredCanvas.push(u)}),[`${WE}`]:gt((s,l)=>{let{payload:u}=l;s.mediaPlaybackFile=u,s.isUsingMediaPlayback=!(null==u||!u.url)}),[`${Vl}`]:gt((s,l)=>{let{payload:u}=l;if(u){const{lastCopy:h,...v}=u;s.prefetchedVideo=v}else s.prefetchedVideo=u}),[`${g1}`]:(s,l)=>{let{payload:u}=l;const h={cameraDevicesList:s.cameraDevicesList};return u&&Object.assign(h,{activeCamera:s.activeCamera,customizedVideoOption:s.customizedVideoOption,virtualBackground:{imageSrc:s.virtualBackground.imageSrc,cropped:s.virtualBackground.cropped},mask:{imageSrc:s.mask.imageSrc,cropped:s.mask.cropped,rootWidth:s.mask.rootWidth,rootHeight:s.mask.rootHeight,clip:s.mask.clip},backgroundMode:s.backgroundMode,ptz:s.ptz}),{...vO,...h}}},vO),KB=dc(w2,GB,T2,R2),{InitSuccessVideo:BA,InitSuccessAudio:FA,InitSuccessSharing:O2,InitFailedVideo:UI,InitFailedAudio:UA,InitFailedSharing:D2}=Vn;let gm;const i4=dc(Object.freeze({__proto__:null,connectToMediaStreamEpic:(s,l)=>s.pipe(wr(`${ph}`),Fn(l),ln(u=>{let[,h]=u;return void 0!==h.media.assetsPath&&void 0!==h.media.mediaConstraints}),Zn(u=>{let[,h]=u;const{media:{assetsPath:v,mediaConstraints:E,fileWithVersion:I,enforceMultipleVideos:R,enforceVirtualBackground:N,isEnableDecoderInWorklet:L}}=h;if(gm=tn.getInstance(),gm.notifySDKMeetingReady(),v&&E){const V={enableDecoderInWorklet:L};"function"!=typeof window.SharedArrayBuffer&&(Object.assign(V,{enableMultiDecodeVideoWithoutSAB:!!R}),Eh()&&Object.assign(V,{enableVirtualBackgroundWithoutSAB:!!N})),kp(N)&&Object.assign(V,{resourceManager:jp.exports.IResourceManager,file:[{path:`${v}/vb-resources/vbbuffer.bin`,type:"bin"},{path:`${v}/vb-resources/tf.min.js`,type:"js"}]}),gm.setAssetsAndConstraint(v,E,I,V)}Op(l).pipe(Fn(l)).subscribe(V=>{let[O,X]=V;const{meeting:{svcUrl:ee,meetingNumber:re,conId:ne,e2eEncrypt:fe,userId:ve,isWebinar:Le,enableAudioQos:Qe,enableVideoQos:ze,enableWebtransport:ft,webtransportPort:lt}}=X;var tt;O&&(null===(tt=gm)||void 0===tt||tt.connect({svcUrl:ee,meetingNumber:re,conId:ne,e2eEncrypt:fe,isViewOnly:Da(O.userRole),currentUserId:ve,isWebinar:Le,enableAudioQos:Qe,enableVideoQos:ze,enableWebtransport:ft,webtransportPort:lt}))})}),kn(()=>ah(u=>{var h;return null===(h=gm)||void 0===h?void 0:h.registerCallback(u)},u=>{var h;return null===(h=gm)||void 0===h?void 0:h.unregisterCallback(u)},(u,h)=>({type:u,data:h})).pipe(ht(u=>hi(u))))),connectedMediaStreamEpic:s=>Ar(s,[BA,FA,O2,UI,UA,D2]).pipe(RC(l=>{const{payload:{type:u,data:h}}=l;if(u===FA||u===UA){if(h===Co.EncodeSuccess)return dt(x0),$n(Gm("success"));if(h===Co.DecodeSuccess)return dt(_E),$n(Wm("success"));if(h===Co.EncodeFailed)return dt(F0),$n(Gm("failed"));if(h===Co.DecodeFailed)return dt(vE),$n(Wm("failed"))}else if(u===BA||u===UI){if(h===Co.EncodeSuccess)return dt(L0),$n($S("success"));if(h===Co.DecodeSuccess)return dt(B0),$n(hh("success"));if(h===Co.EncodeFailed)return dt(U0),$n($S("failed"));if(h===Co.DecodeFailed)return dt(kh),$n(hh("failed"))}else if(u===O2||u===D2){if(h===Co.EncodeSuccess)return dt(yP),$n(Ia("success"));if(h===Co.DecodeSuccess)return dt(yg),$n(_f("success"));if(h===Co.EncodeFailed)return dt(V0),$n(Ia("failed"));if(h===Co.DecodeFailed)return dt(HT),$n(_f("failed"));if(u===O2&&void 0===h)return dt(yg),$n(_f("success"))}})),mediaDeviceUpdateEpic:(s,l)=>Ar(s,[BA,FA]).pipe(j1(()=>{if("object"==typeof navigator.mediaDevices)return $s(Qd(),$s(Ar(s,Vn.StartVideoCaptureSuccess),is(navigator.mediaDevices,"devicechange"),Ar(s,Vn.UserGrantCaptureAudio).pipe(ln(()=>!l.value.audio.isUserGrantCaptureAudio))).pipe(Pn(()=>Qd().pipe(Zn(()=>{dt(ML)}))))).pipe(Fn(l),Pn(u=>{let[h,v]=u;const E=[eC(h.microphones),Cg(h.speakers),h1(h.cameras)];if(v.audio){const{audio:{activeMicrophone:N,activeSpeaker:L,microphoneDevicesList:V,speakerDevicesList:O}}=v,X=Cr(v),{microphones:ee,speakers:re}=h,ne=V.filter(ve=>-1===ee.findIndex(Le=>Le.deviceId===ve.deviceId)),fe=O.filter(ve=>-1===re.findIndex(Le=>Le.deviceId===ve.deviceId));var I,R;ne.length>0&&ne[0].deviceId===N&&(null===(I=gm)||void 0===I||I.changeMicrophone("default",void 0,!(null==X||!X.muted)),E.push(tC("default"))),fe.length>0&&fe[0].deviceId===L&&(null===(R=gm)||void 0===R||R.changeSpeaker("default"),E.push(nC("default")))}return En(E)}))})),sendUserNodeListToMediaSDKEpic:(s,l)=>pc(s,Mo).pipe(Zn(u=>{const{type:h,payload:{body:v}}=u,E=tn.getInstance(),I=h===`${lo}`;if(v.add){const R=v.add.map(N=>({userid:N.id,sn:N.zoomID&&Ju(N.zoomID)}));if(!I){const{meeting:{gcmSessinKey:N}}=l.value;E.sendUserNodeList(R,N)}E.updateUserMediaSN({added:R,isFromMainSession:I,iVType:gc.SHARING_DECODE}),I&&E.updateUserMediaSN({added:R,isFromMainSession:I,iVType:gc.AUDIO_DECODE})}if(v.remove){if(!I){const{meeting:{gcmSessinKey:R}}=l.value;E.sendUserNodeList(v.remove.map(N=>({userid:N.id,bremove:!0})),R)}E.updateUserMediaSN({removed:v.remove.map(R=>R.id),isFromMainSession:I,iVType:gc.SHARING_DECODE}),I&&E.updateUserMediaSN({removed:v.remove.map(R=>R.id),isFromMainSession:I,iVType:gc.AUDIO_DECODE})}}),Pr(Ht)),handleMediaSdkGcmIVResponseEpic:s=>Ar(s,Vn.AesGcmIvResponse).pipe(Zn(l=>{const{payload:{data:{workerType:u,iv:h}}}=l,v=Ur.get(So.WebclientIVState);if(v){const E={...v,[u]:h};Ur.set(So.WebclientIVState,E,fi.SessionStorage)}}),Pr(Ht)),handleMediaEncryptIndication:s=>s.pipe(wr(`${lc}`),ln(l=>[Jy,IT,ug].includes(l.payload.evt)),ht(l=>{const{payload:{evt:u,body:{encryptKey:h,additionalType:v}}}=l;return Id({type:u===Jy?"audio":u===IT?"video":"sharing",encryptKey:h,additionalType:v})}))})),zB={meeting:FR,socket:wB,participants:cI,media:lI},k2=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ky;function YB(s){return function(l){for(var u=Object.keys(l),h={},v=0;v<u.length;v++){var E=u[v];"function"==typeof l[E]&&(h[E]=l[E])}var I,N,R=Object.keys(h);try{N=h,Object.keys(N).forEach(function(L){var V=N[L];if(void 0===V(void 0,{type:Um.INIT}))throw new Error(_i(12));if(void 0===V(void 0,{type:Um.PROBE_UNKNOWN_ACTION()}))throw new Error(_i(13))})}catch(N){I=N}return function(N,L){if(void 0===N&&(N={}),I)throw I;for(var V=!1,O={},X=0;X<R.length;X++){var ee=R[X],ne=N[ee],fe=(0,h[ee])(ne,L);if(void 0===fe)throw new Error(_i(14));O[ee]=fe,V=V||fe!==ne}return(V=V||R.length!==Object.keys(N).length)?O:N}}({...zB,...s})}function wn(s,l,u,h,v){var E={};return Object.keys(h).forEach(function(I){E[I]=h[I]}),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=u.slice().reverse().reduce(function(I,R){return R(s,l,I)||I},E),v&&void 0!==E.initializer&&(E.value=E.initializer?E.initializer.call(v):void 0,E.initializer=void 0),void 0===E.initializer&&(Object.defineProperty(s,l,E),E=null),E}const Cs=Symbol("store"),cr=Symbol("getState"),Pu=Symbol("dispatch"),VI=Symbol("additionFeatures"),gn=Symbol("mediaContext");function Tn(s,l,u){const h=u.value;u.value=function(){const v=this[Cs];if(v){const{meeting:{isOnHold:N,isMeetingReset:L,meetingStatus:V}}=v.getState();if(V!==bs.Joined)return Promise.reject({type:bc,reason:"closed"});if(L)return Promise.reject({type:bc,reason:"reconnecting"});if(N)return Promise.reject({type:bc,reason:"on hold"})}for(var E=arguments.length,I=new Array(E),R=0;R<E;R++)I[R]=arguments[R];return h.apply(this,I)}}function np(s,l,u){const h=u.value;u.value=function(){const v=this[Cs];if(v){const N=v.getState();if(!bu(N))return Promise.reject({type:na,reason:"only host or co-host can do the operation"})}for(var E=arguments.length,I=new Array(E),R=0;R<E;R++)I[R]=arguments[R];return h.apply(this,I)}}function cu(s,l,u){const h=u.value;u.value=function(){const v=this[Cs];if(v){const N=v.getState();if(!Su(N))return Promise.reject({type:na,reason:"only host can do the operation"})}for(var E=arguments.length,I=new Array(E),R=0;R<E;R++)I[R]=arguments[R];return h.apply(this,I)}}function ir(s){return function(l,u,h){const v=h.value;h.value=function(){const E=this[Cs];if(E&&void 0===E.getState()[s])return Promise.reject({type:fn,reason:`Module:${s} is not enabled`});for(var I=arguments.length,R=new Array(I),N=0;N<I;N++)R[N]=arguments[N];return v.apply(this,R)}}}function qB(s){return function(l,u,h){const v=h.value;h.value=function(){const E=this[Cs];if(E){const{meeting:{meetingOptions:L}}=E.getState();if(!0===L[s])return Promise.reject({type:"OPERATION_LOCKED",reason:`${s} is locked`})}for(var I=arguments.length,R=new Array(I),N=0;N<I;N++)R[N]=arguments[N];return v.apply(this,R)}}}let fl=function(s){return s.Self="Self",s.Other="Other",s.Client="Client",s.Phone="Phone",s.Attendee="Attendee",s}({});function Xl(s){return function(l,u,h){const v=h.value;h.value=function(E){const I=this[Cs];if(I){const O=I.getState(),X=Array.isArray(s)?s:[s];let ee=ls(O).find(re=>re.userId===E);if(X.findIndex(re=>re===fl.Attendee)>-1&&(ee=wv(O).find(re=>re.userId===E)),!ee)return Promise.reject({type:Dr,reason:"no matching user"});{const{meeting:{userId:re}}=I.getState();for(let ne=0;ne<X.length;ne++){const fe=X[ne];if(fe===fl.Other&&E===re)return Promise.reject({type:fn,reason:"operation is not applicable to self"});if(fe===fl.Self&&E!==re)return Promise.reject({type:fn,reason:"operation is only applicable to self "});if(fe===fl.Client&&xf(ee.userType)||fe===fl.Phone&&!xf(ee.userType))return Promise.reject({types:fn,reason:"improper target client"})}}}for(var R=arguments.length,N=new Array(R>1?R-1:0),L=1;L<R;L++)N[L-1]=arguments[L];const V=[E,...N];return v.apply(this,V)}}}const JB=Hh.getInstance();function u_(s,l){return function(u,h,v){const E=v.value;v.value=function(){for(var I=arguments.length,R=new Array(I),N=0;N<I;N++)R[N]=arguments[N];if(JB.checkLaplace())try{const L=JB.makeLogger([s]),V=l?R.map((O,X)=>l.includes(X+1)?Du(O):O):R;return L.info(`${h},params:${JSON.stringify(V)}`),E.apply(this,R).then(O=>(L.info(`${h} success`),O)).catch(O=>{let X=`${h} failed,`;return"object"==typeof O&&(X=`${X},${O.type?`type:${O.type},`:""}${O.reason?`reason:${O.reason}`:""}`),L.error(X),Promise.reject(O)})}catch{}return E.apply(this,R)}}}function jI(s,l,u){return function(h,v,E){const I=E.value;E.value=function(){for(var R,N=arguments.length,L=new Array(N),V=0;V<N;V++)L[V]=arguments[V];const O=L[l];return O instanceof s&&(!u||u.every(X=>!!O[X]))?I.apply(this,L):Promise.reject({type:Dr,reason:`Expected to accept ${s?.name}, but actual it is ${"object"==typeof O&&null!==O?null===(R=Object.getPrototypeOf(O))||void 0===R?void 0:R.constructor.name:O}`})}}}class Yr{constructor(l){this[Cs]=void 0,this[Pu]=void 0,this[cr]=void 0,this[VI]=void 0,this[Cs]=l,this[Pu]=l.dispatch,this[cr]=l.getState}}const yO=["userId","displayName","audio","isHost","avatar","bRaiseHand","bHold","bVideoOn","sharerOn","sharerPause","feedback","bLocalRecord","strPronoun","sdkKey","audioConnectionStatus","caps","bAllowISORecord","bVideoConnect","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","bShareToBORooms",{from:"userGUID",to:"userGuid"},{from:"bGuest",to:"isGuest"},{from:"sharerPause",to:"sharePause"},{from:"bCoHost",to:s=>({isCoHost:!!s})},{from:"muted",to:(s,l)=>({muted:null!=l&&l.isSpeakerOnly||""===l?.audio?void 0:s})},{from:"userType",to:(s,l)=>{const u=xf(s),h={isPhoneUser:u};return u&&null!=l&&l.phoneNumber&&Object.assign(h,{phoneNumber:l.phoneNumber}),h}}];function jA(s){return yO.reduce((l,u)=>({...l,...function(E,I,R){if("string"==typeof E)return{[`${E}`]:I};if("object"==typeof E&&void 0!==E.from){const{to:N}=E;return"string"==typeof N?{[`${N}`]:I}:N(I,R)}}(u,s["string"==typeof u?u:u.from],s)}),{})}var P2,EO,bO,ia;const _m=ji.createAgent();let QI=(P2=Xl(fl.Other),EO=Xl(fl.Other),bO=Xl(fl.Other),wn((ia=class extends Yr{constructor(s){super(s),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(s,l,u){return this.useSDK=!0,this.init(s,l,u)}init(s,l,u){const{[Pu]:h,[Cs]:v}=this;let E=Wv,I=u?.fileWithVersion||!1,R="en-US",N=`${Wv}/${ng}`;if(u){const{dependentAssets:L,additionalFeatures:V,constraints:O,language:X,webEndpoint:ee}=u;if(X&&(R=X),ee&&(jd=function(ne,fe){let ve=ne;/^https?:\/\//.test(ve)||(ve=`https://${ne}`);try{const Le=new URL(ve);if(!fe)return Le.href;if(fe.hostname)return Le.hostname;if(fe.path)return Le.pathname}catch{return""}return""}(ee,{hostname:!0})),L===Ky.CDN||L===Yf)E=Yf,N=`${Yf}/${ng}`,I=!0;else if(L===Ky.Global||L===Wv)E=Wv,N=`${Wv}/${ng}`,I=!0;else if(L===Ky.CN||L===G1)E=G1,N=`${G1}/${ng}`,I=!0;else if(L&&/^https?:\/\//.test(L)){let re=L;"/"===re[re.length-1]&&(re=re.slice(0,length-1)),E=re,N=I?`${re}/${ng}`:`${re}/${tP}`}V&&Array.isArray(V)&&V.forEach(re=>{if(this[VI][re]&&void 0===v.getState()[re]){const{epic:ne,reducer:fe,Client:ve}=this[VI][re];v.injectReducer(re,fe),v.injectEpic(ne);const Le=new ve(v);this.modules.set(re,Le)}}),null!=O&&O.audio&&void 0===v.getState().audio&&(v.injectReducer("audio",OB),v.injectEpic(YR)),null!=O&&O.video&&void 0===v.getState().video&&(v.injectReducer("video",AO),v.injectEpic(KB)),null!=O&&O.screen&&void 0===v.getState().share&&(v.injectReducer("share",J1),v.injectEpic(FC))}return h(Hy({apiKey:s,signature:l,language:R,useSDK:this.useSDK})),h(Km({mediaConstraints:u&&u.constraints||{},assetsPath:E,fileWithVersion:I,enforceMultipleVideos:u?.enforceMultipleVideos,enforceVirtualBackground:u?.enforceVirtualBackground})),void 0!==u?.stayAwake&&h(ST(u.stayAwake)),void 0!==u?.quicklyLeaveMeeting&&h(Jo(u.quicklyLeaveMeeting)),new Promise((L,V)=>{null!=u&&u.skipJsMedia?L(""):function(O,X,ee){const re=document.createElement("script");re.type="text/javascript",re.readyState?re.onreadystatechange=()=>{"loaded"!==re.readyState&&"complete"!==re.readyState||(re.onreadystatechange=null,X())}:(re.onload=()=>{X()},re.onerror=()=>{V({type:Dr,reason:"dependent assets are not accessible"})}),re.src=O,"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(re):document.getElementsByTagName("head")[0].appendChild(re)}(N,()=>{L("")})})}on(s,l){((u,h)=>{const v=YT[u];if(v){const E=Eg.get(u);if(E)E.push(h),Eg.set(u,E);else{Eg.set(u,[h]);const R=$s(...v.map(N=>{const{event:L,payload:V}=N;return is(Ld,L).pipe(ht(O=>V(O)),Nt(As))})).subscribe(N=>{const L=Eg.get(u);L&&L.forEach(V=>{V(N)})});qT.push(R)}}})(s,l)}off(s,l){((u,h)=>{if(YT[u]){const v=Eg.get(u);if(Array.isArray(v)){const E=v.filter(I=>I!==h);Eg.set(u,E)}}})(s,l)}getFeatureModule(s){return this.modules.get(s)}leave(){const{[cr]:s,[Pu]:l}=this;return"connected"===s().socket.zoomSocketStatus?(l(Us()),ua(500).pipe(Hu("")).toPromise()):Promise.resolve("")}end(){const{[cr]:s,[Pu]:l}=this;return"connected"===s().socket.zoomSocketStatus?(l($m()),ua(500).pipe(Zn(()=>{bg()}),Hu("")).toPromise()):Promise.resolve("")}changeName(s,l){const u=this[Cs].getState(),{meeting:{bAllowAttendeeRename:h}}=u,v=Cr(u),E=Da(v.userRole),I=bu(u);if(E)return Promise.reject({type:na});if(l&&l!==v?.userId){if(I){const{participants:{attendeesList:R}}=u,N=R.find(L=>L.userId===l);if(N)return _m.rename(l,ys(s),ys(N.displayName)),JE(l,L=>L.displayName===s);{const L=wv(u).find(V=>V.userId===l);if(L){const V=Ng.getInstance();return _m.rename(L.userId,ys(s),ys(L.displayName)),V.rename(L.jid,s),Jr(Rf,O=>{const X=O.find(ee=>ee.jid===L.jid);return X&&X.displayName===s})}return Promise.reject({type:Dr,reason:"no matching user"})}}return Promise.reject({type:na})}return s===v.displayName?Promise.resolve():I||h?(_m.rename(v.userId,ys(s),ys(v.displayName)),Jr(Zu,R=>R.displayName===s)):Promise.reject({type:na,reason:"host disallow rename themselves"})}makeHost(s){return _m.assignHost(s,!1),JE(s,l=>!0===l.isHost)}makeCoHost(s){const l=this[Cs].getState();return!0===ls(l).find(h=>h.userId===s)?.bCoHost?Promise.reject({type:Dr,reason:`user:[${s}] is already co-host `}):(_m.assignHost(s,!0),JE(s,h=>!0===h.bCoHost))}revokeCoHost(s){const l=this[Cs].getState();return!1===ls(l).find(h=>h.userId===s)?.bCoHost?Promise.reject({type:Dr,reason:`user:[${s}] is not a co-host`}):(_m.revokeCoHost(s),JE(s,h=>!1===h.bCoHost))}reclaimHost(){const s=this[cr](),{meeting:{isOriginHost:l}}=s,u=Cr(s);return null!=u&&u.isHost?Promise.resolve(""):l?(_m.reclaimHost(u.userId,!1),Jr(Zu,h=>!0===h.isHost)):Promise.reject({type:na,reason:"You are not the origin host"})}isHost(){const s=this[Cs].getState(),l=Cr(s);return!!l&&l.isHost}isCoHost(){const s=this[Cs].getState(),l=Cr(s);return!!l&&!!l.bCoHost}isOriginHost(){const{meeting:{isOriginHost:s}}=this[cr]();return s}getCurrentUserInfo(){const s=this[Cs].getState(),l=Cr(s);if(l){const u=jA(l);if(s.meeting.isWebinar&&Da(l.userRole)){const{audio:h}=s,v=h?.isAllowToTalk;Object.assign(u,{isAllowToTalk:v})}return u}return null}getParticipantsList(){const s=this[Cs].getState(),{meeting:{meetingStatus:l}}=s,u=Cr(s);return l===bs.Joined&&u&&!u.bHold?ls(s).map(h=>jA(h)):[]}getAssistantsList(){const s=this[Cs].getState(),{meeting:{meetingStatus:l}}=s,u=Cr(s);return l===bs.Joined&&u?wE(s).map(h=>({userId:h.userId,displayName:h.displayName,isNewAst:!0})):[]}getMeetingHost(){var s;const l=this[cr]();let u=TE(l);return u||(null===(s=l.breakoutRoom)||void 0===s?void 0:s.currentRoom.status)!==rr.InRoom||(u=l.breakoutRoom.mainSessionAttendeeList.find(h=>h.isHost)),void 0!==u?jA(u):null}getMeetingInfo(){const{meeting:{meetingStatus:s,isOnHold:l,meetingNumber:u,passWord:h,userName:v,userEmail:E,meetingTopic:I,meetingOptions:R,encType:N,region:L,network:V,topic:O,zlkJwtToken:X,userId:ee,lang:re,inviteEmail:ne,meetingId:fe,participantID:ve,h323Password:Le,recordingDisclaimer:Qe,recordingDisclaimerForRecorder:ze,wrInfo:ft,meetingInfo:lt,isNewJoinFlow:tt}}=this[cr](),St=s===bs.Joined&&!l;if(X)return{topic:O,password:h,userName:v,isInMeeting:St,userId:ee,meetingId:fe};{let Zt="";return 0===N?Zt="None":1===N?Zt="AES ECB":2===N&&(Zt="AES GCM"),{meetingNumber:u,password:h,userName:v,userEmail:E,inviteEmail:ne,meetingTopic:I,encryptionType:Zt,region:L,network:V,isInMeeting:St,userId:ee,lang:re,webEndpoint:jd,meetingId:fe,participantId:ve,telPwd:Le,recordingInfo:{recordingDisclaimer:Qe,recordingDisclaimerForRecorder:ze,isUserEnableRecordingReminder:R?.isUserEnableRecordingReminder},wrInfo:Object.assign({},ft,{isNew:tt}),scheduleInfo:lt}}}}).prototype,"end",[cu,Tn],Object.getOwnPropertyDescriptor(ia.prototype,"end"),ia.prototype),wn(ia.prototype,"changeName",[Tn],Object.getOwnPropertyDescriptor(ia.prototype,"changeName"),ia.prototype),wn(ia.prototype,"makeHost",[P2,cu,Tn],Object.getOwnPropertyDescriptor(ia.prototype,"makeHost"),ia.prototype),wn(ia.prototype,"makeCoHost",[EO,cu,Tn],Object.getOwnPropertyDescriptor(ia.prototype,"makeCoHost"),ia.prototype),wn(ia.prototype,"revokeCoHost",[bO,cu,Tn],Object.getOwnPropertyDescriptor(ia.prototype,"revokeCoHost"),ia.prototype),wn(ia.prototype,"reclaimHost",[Tn],Object.getOwnPropertyDescriptor(ia.prototype,"reclaimHost"),ia.prototype),ia);var Zl=Object.freeze({__proto__:null,receiveChatMessageFromXMPPEpic:(s,l)=>fh(s,24583).pipe(Fn(l),Pn(u=>{let[h,v]=u;if(v.meeting.zlkJwtToken)return Ht;const{payload:{body:{sn:E,senderName:I,senderJid:R,receiver:N,text:L,type:V}}}=h,O=Cr(v),X=wv(v),{meeting:{jid:ee,userId:re},participants:{xmppAttendeeList:ne}}=v;return wa.beginDecrypt({decryptedText:L,type:Wc.XMPP_CHAT,zoomId:E}).then(fe=>{var ve;let{message:Le}=fe,Qe=null,ze=0,ft="";O&&Da(O.userRole)&&ee===N?(Qe=ne.find(tt=>tt.jid===R),ze=re,ft=O.displayName):V===oo.Panelist&&(Qe=X.find(tt=>tt.jid===R),ze=oo.Panelist,ft=If.displayName);const lt={message:Le,sender:{name:I,userId:(null===(ve=Qe)||void 0===ve?void 0:ve.userId)||0,avatar:""},receiver:{name:ft,userId:ze},timestamp:(new Date).getTime()};return dt(eE,lt),KE(lt)})})),receiveChatMessageFromRWGEpic:(s,l)=>Wn(s,7944).pipe(Fn(l),Pn(u=>{let[h,v]=u;const{meeting:{bIbDisableChat:E,isWebinar:I},participants:{attendeesList:R}}=v,{payload:{body:{attendeeNodeID:N,sn:L,destNodeID:V,text:O,senderName:X,msgID:ee}}}=h,re=Cr(v),ne=wv(v);if(re){const fe=Da(re?.userRole)&&N===re.userId&&!ee;if(!E&&!fe){let ve,Le=L;if(!L){const Qe=R.find(ze=>ze.userId===V);Qe&&(Le=Qe.zoomID)}if(N===oo.SilentModeUsers){const Qe=gh(O),ze={id:ee,message:Qe,sender:{name:"Host",userId:V},receiver:{name:"Everyone (in Waiting Room)",userId:N},timestamp:(new Date).getTime()};ve=Promise.resolve(ze)}else ve=wa.beginDecrypt({decryptedText:O,zoomId:Le,type:Wc.RWG_CHAT}).then(Qe=>{let{message:ze}=Qe;const ft=R.find(St=>St.userId===V),lt=X?gh(X):ft?.displayName;let tt="";if(N===oo.All)tt=I?"All panelists and attendees":"Everyone";else if(N===oo.Panelist)tt="All panelists";else if(I&&ne.findIndex(St=>St.userId===N)>-1)tt=ne.find(St=>St.userId===N).displayName;else{const St=R.find(Zt=>Zt.userId===N);St&&(tt=St.displayName)}return{id:ee,message:ze,sender:{name:lt,userId:V,avatar:ft?.avatar},receiver:{name:tt,userId:N},timestamp:(new Date).getTime()}});return ve.then(Qe=>(dt(eE,Qe),KE(Qe)))}}return Ht})),changeAttendeePrivilegeResponse:(s,l)=>Wn(s,zc).pipe(ln(u=>{var h,v;return void 0!==(null===(h=u.payload.body)||void 0===h?void 0:h.chatPriviledge)||void 0!==(null===(v=u.payload.body)||void 0===v?void 0:v.bAllowAttendeeChat)}),Fn(l),ht(u=>{let[h,v]=u;const{payload:{body:{chatPriviledge:E,bAllowAttendeeChat:I}}}=h,{chat:{chatPrivilege:R}}=v;return void 0!==I?(dt(tE,!0===I?{chatPrivilege:R}:{chatPrivilege:xi.NoAttendee}),fC(I)):(dt(tE,{chatPrivilege:E}),vt(E))})),changePanelistPrivilegeResponse:s=>Wn(s,zc).pipe(ln(l=>{var u;return void 0!==(null===(u=l.payload.body)||void 0===u?void 0:u.panelistChatPriviledge)}),ht(l=>{const{payload:{body:{panelistChatPriviledge:u}}}=l;return dt(tE,{panelistChatPrivilege:u}),hC(u)})),chatResponseEpic:(s,l)=>Wn(s,4136).pipe(Fn(l),Pn(u=>{let[h,v]=u;const{payload:{body:{result:E,destNodeID:I,msgID:R}}}=h,{meeting:{userId:N},chat:{chatHistory:L}}=v;if(E===f0.Success){var V,O;const X=[];for(let re=L.length-1;re>=0;re--){const ne=L[re];if(!ne.id&&ne.sender.userId===N&&[oo.All,oo.Panelist,oo.IndividualCcPanelist,I].includes(ne.receiver.userId)&&X.unshift(ne),ne.id)break}const ee=X.length>0&&null!==(V=null===(O=X[0])||void 0===O?void 0:O.highResTimeStampForIdentification)&&void 0!==V?V:0;return dt(oP,{msgId:R,receiverId:I,identification:ee}),$n(I1({destNodeID:I,msgID:R,userId:N}))}return E===f0.Delete||E===f0.Block?$n(Bh({msgId:R})):Ht})),chatCmdResponseEpic:s=>Wn(s,4238).pipe(Pn(l=>{const{payload:{body:{bSuccess:u,cmd:h,msgID:v}}}=l,E=[];return u&&h===lg.Delete&&(E.push(Bh({msgId:v})),dt(nE,{id:v})),En(E)})),chatCmdIndicationEpic:s=>Wn(s,7960).pipe(Pn(l=>{const{payload:{body:{cmd:u,msgID:h}}}=l,v=[];return u===lg.Delete&&(v.push(Bh({msgId:h})),dt(nE,{id:h})),En(v)}))});const Kb={chatHistory:[],chatPrivilege:xi.All,panelistChatPrivilege:Xu.AllPanelist,isAllowAttendeeChat:!0},$B=Gn({[`${KE}`]:gt((s,l)=>{let{payload:u}=l;s.chatHistory.push(u)}),[`${vt}`]:gt((s,l)=>{let{payload:u}=l;s.chatPrivilege=u}),[`${hC}`]:gt((s,l)=>{let{payload:u}=l;s.panelistChatPrivilege=u}),[`${fC}`]:gt((s,l)=>{let{payload:u}=l;s.isAllowAttendeeChat=u}),[`${I1}`]:gt((s,l)=>{let{payload:u}=l;const{destNodeID:h,msgID:v,userId:E}=u,I=[];for(let R=s.chatHistory.length-1;R>=0;R--){const N=s.chatHistory[R];if(!N.id&&N.sender.userId===E&&[oo.All,oo.Panelist,h].includes(N.receiver.userId)&&I.unshift(N),N.id)break}I.length>0&&(I[0].id=v)}),[`${Bh}`]:gt((s,l)=>{let{payload:u}=l;const{msgId:h}=u,v=s.chatHistory.findIndex(E=>E.id===h);v>=0&&s.chatHistory.splice(v,1)}),[`${C1}`]:()=>({...Kb})},Kb);function zb(s,l,u){if(null!=u&&u.host)return[TE(s),...J0(s)].filter(h=>h?.userId!==l).map(h=>({userId:h?.userId,displayName:h?.displayName,isHost:h?.isHost,isCoHost:h?.bCoHost}));{let h=[TE(s),...J0(s),...s.participants.attendeesList.filter(v=>!(v.bCoHost||v.isHost||v.bHold))];if(null!=u&&u.includeAttendee){const v=wv(s).filter(E=>!xf(E.userType));h=[...h,...v]}return h.filter(v=>v?.userId!==l).map(v=>({userId:v?.userId,displayName:v?.displayName,isHost:v?.isHost,isCoHost:v?.bCoHost}))}}var Nc;const l_=ji.createAgent(),M2=Ng.getInstance(),HI=s=>{const{text:l,destId:u,sn:h,attendeeId:v}=s;return wa.beginEncrypt({text:l,type:Wc.RWG_CHAT}).then(E=>{l_.chat(E,u,h,v)})};let SO=(wn((Nc=class extends Yr{send(s,l){if(!s)return Promise.reject({type:Dr,reason:"Text is empty"});const{[cr]:u,[Pu]:h}=this,v=u(),E=Cr(v),I=function(re,ne){if(ne===oo.All)return cv;if(ne===oo.Panelist)return If;if(ne===oo.SilentModeUsers)return wf;{const{meeting:{isWebinar:fe},participants:{xmppAttendeeList:ve,attendeesList:Le}}=re;return fe?Le.find(Qe=>Qe.userId===ne)||ve.find(Qe=>Qe.userId===ne):Le.find(Qe=>Qe.userId===ne)}}(v,l),R=((re,ne,fe)=>{const ve=ne?.userId;if(null==re||!re.zoomID||null==ne||!ne.displayName||ve===re.userId)return{type:Dr,reason:"invalid target user"};const{chat:{chatPrivilege:Le,panelistChatPrivilege:Qe},meeting:{isWebinar:ze}}=fe,ft=bu(fe),lt=ne.isHost||ne.bCoHost;let tt=!1;if(!ft){if(ze)if(Da(re.userRole))(Le===xi.NoAttendee||Le===xi.AllPanelist&&ve!==oo.Panelist||Le===xi.All&&ve!==oo.All&&ve!==oo.Panelist)&&(tt=!0);else{const St=Da(ne?.userRole);(Qe===Xu.Invalid||Qe===Xu.AllPanelist&&(St||ve===oo.All))&&(tt=!0)}else(Le===xi.NoAttendee||Le===xi.Host&&!lt||ve===oo.SilentModeUsers||Le===xi.EveryonePublicly&&ve!==oo.All&&!lt)&&(tt=!0);if(tt)return{type:na,reason:"Insufficient chat privilege"}}return null})(E,I,v);if(R)return Promise.reject(R);const{meeting:{isWebinar:N,encType:L}}=v,V=L===Cf.AES_GCM;let O=Promise.resolve(),X=!1;const ee=N&&Da(I.userRole);return l===oo.SilentModeUsers?l_.chat(ys(s),l):N?ee?8==(8&I.clientCap)?O=HI({text:s,destId:oo.IndividualCcPanelist,sn:E?.zoomID,attendeeId:l}):(O=HI({text:s,destId:oo.Panelist,sn:E?.zoomID,attendeeId:l}).then(()=>(re=>{const{text:ne,jid:fe,isGCMEnabled:ve}=re;return wa.beginEncrypt({text:ne,type:Wc.XMPP_CHAT}).then(Le=>{M2.sendWebinarMseeage(Le,fe,oo.IndividualCcPanelist,ve)})})({text:s,jid:I.jid,isGCMEnabled:V})),X=!0):I&&(O=HI({text:s,destId:I.userId,sn:E?.zoomID})):O=HI({text:s,destId:I.userId,sn:E?.zoomID}),O.then(()=>{const re=(new Date).getTime(),ne=performance.now(),fe={message:s,sender:{name:E?.displayName,userId:E?.userId,avatar:E?.avatar},receiver:{name:I?.displayName,userId:ee?oo.IndividualCcPanelist:I?.userId},timestamp:re,highResTimeStampForIdentification:ne};return h(KE(fe)),X?(dt(eE,fe),fe):new Promise((ve,Le)=>{vo(oP).pipe(Mr(5e3),hL(Qe=>ne!==Qe.identification||!([Qe.receiverId,oo.All,oo.Panelist].includes(l)||Qe.receiverId===oo.IndividualCcPanelist)),ti(1)).subscribe(Qe=>{const{msgId:ze}=Qe,{highResTimeStampForIdentification:ft,...lt}=fe,tt={id:ze,...lt,...ee&&{receiver:{name:I?.displayName,userId:I?.userId}}};dt(eE,tt),ve(tt)},()=>{Le({type:gE})})})})}setPrivilege(s){const l=this[cr](),{meeting:{isWebinar:u},chat:{chatPrivilege:h}}=l;return h===s?Promise.resolve(""):!u&&!av.includes(s)||u&&!OL.includes(s)?Promise.reject({type:Dr,reason:"invalid privilege value of parameter"}):(l_.setChatPriviledge(s),Jr(tE,v=>v.chatPrivilege===s))}setPanelistPrivilege(s){const l=this[cr](),{chat:{panelistChatPrivilege:u}}=l,h=m0[s];return u===h?Promise.resolve(""):Object.values(ss).includes(s)?(l_.setPanelistChatPrivilege(s),Jr(tE,v=>v.panelistChatPrivilege===h)):Promise.reject({type:Dr,reason:"Panelist privilege value is invalid"})}deleteMessage(s){const l=this[cr](),{chat:{chatHistory:u},meeting:{meetingOptions:h,userId:v}}=l;if(null!=h&&h.isEnableDeleteChatMsg){const E=bu(l),I=u.find(R=>R.id===s);if(I){const{sender:R}=I;if(E)l_.chatCmdReq(s,lg.Delete);else{if(R.userId!==v)return Promise.reject({type:na,reason:"can not delete message"});l_.chatCmdReq(s,lg.Delete)}return Jr(nE,N=>N.id===s).then(()=>({id:s}))}return Promise.reject({type:Dr,reason:"msgId is wrong"})}return Promise.reject({type:fn,reason:"can not delete messages"})}lockChat(s){const l=this[cr](),{meeting:{meetingOptions:u}}=l;return this.setPrivilege(s?xi.NoOne:null!=u&&u.isPrivateChatEnabled?xi.All:xi.EveryonePublicly)}getPrivilege(){const{chat:{chatPrivilege:s,isAllowAttendeeChat:l}}=this[cr]();return l?s:xi.NoAttendee}getReceivers(){const s=this[cr](),{chat:{chatPrivilege:l,panelistChatPrivilege:u,isAllowAttendeeChat:h},meeting:{isWebinar:v}}=s;if(!v&&!h)return[];const E=Cr(s),I=bu(s);if(E)if(v)if(Da(E.userRole)){if(!h)return[];if(l===xi.All)return[If,cv];if(l===xi.AllPanelist)return[If];if(l===xi.NoOne)return[]}else{if(I||u===Xu.Everyone){const R=zb(s,E.userId,{includeAttendee:!0});return[If,cv,...R]}if(u===Xu.AllPanelist){const R=zb(s,E.userId);return[If,...R]}}else{const R=bu(s);if(l===xi.All||R){const N=zb(s,E.userId);return[cv,...N]}if(l===xi.Host)return zb(s,E.userId,{host:!0});if(l===xi.EveryonePublicly){const N=zb(s,E.userId,{host:!0});return[cv,...N]}if(l===xi.NoOne)return[]}return[]}getHistory(){return this[cr]().chat.chatHistory.map(s=>{const{highResTimeStampForIdentification:l,...u}=s;return u})}isAllowToDeleteMessages(){const s=this[cr](),{meeting:{meetingOptions:l}}=s;return l?.isEnableDeleteChatMsg}}).prototype,"send",[Tn],Object.getOwnPropertyDescriptor(Nc.prototype,"send"),Nc.prototype),wn(Nc.prototype,"setPrivilege",[np,Tn],Object.getOwnPropertyDescriptor(Nc.prototype,"setPrivilege"),Nc.prototype),wn(Nc.prototype,"setPanelistPrivilege",[np,Tn,function(s,l,u){const h=u.value;u.value=function(){const v=this[Cs];if(v){const{meeting:{isWebinar:N}}=v.getState();if(!N)return Promise.reject({type:bc,reason:"non-webinar"})}for(var E=arguments.length,I=new Array(E),R=0;R<E;R++)I[R]=arguments[R];return h.apply(this,I)}}],Object.getOwnPropertyDescriptor(Nc.prototype,"setPanelistPrivilege"),Nc.prototype),wn(Nc.prototype,"deleteMessage",[Tn],Object.getOwnPropertyDescriptor(Nc.prototype,"deleteMessage"),Nc.prototype),wn(Nc.prototype,"lockChat",[np,Tn],Object.getOwnPropertyDescriptor(Nc.prototype,"lockChat"),Nc.prototype),Nc);const N2=dc(Zl);function ga(s){const{meeting:{isMeetingReset:l,meetingId:u,meetingNumber:h,userName:v,userEmail:E,tid:I},breakoutRoom:R}=s;let N="";var L;return N=l?null!=R&&null!==(L=R.currentRoom)&&void 0!==L&&L.boConfId?"join breakout room":"meeting failover":"join meeting",{label:N,payload:{meetingId:u,tid:I,meetingNumber:Du(h),userName:Du(v),userEmail:Du(E)}}}function Fo(s,l,u){return qe(kn(h=>{let v=!1;try{var E,I;const{logger:{options:R},meeting:{logConfig:N}}=l.value;v=null!==(E=R?.enable)&&void 0!==E?E:null===(I=JSON.parse(N||"{}"))||void 0===I?void 0:I.enable}catch{}try{if(v){const{logger:{isLaplaceInitialized:R}}=l.value;if(!R)return s.pipe(wr(`${yr}`),ti(1),Pn(N=>(N.payload&&u(h),Ht)));u(h)}}catch(R){console.warn(R)}return Ht}))}const Ri=[{event:Vn.UserForbiddedCaptureVideo,message:Ou.UserForbiddedCaptureVideo,logType:"warn",additionalTags:["Video Join Flow"]},{event:Vn.StartVideoCaptureSuccess,message:Ou.StartCaptureVideoSuccess,logType:"info",additionalTags:["Video Join Flow"]},{event:Vn.StopVideoCaptureSuccess,message:Ou.StopCaptureVideoSuccess,logType:"info",additionalTags:["Video Join Flow"]},{event:Vn.StartVideoStreamInVbSettingSuccess,message:Ou.VBSettingSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:Vn.VbModelPreloadingOk,message:Ou.VBPreloadSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:Vn.VbModelPreloading_3S,message:Ou.VBPreloading3S,logType:"warn",additionalTags:["Video VB Flow"]},{event:Vn.VbModelPreloading_10S,message:Ou.VBPreloading10S,logType:"warn",additionalTags:["Video VB Flow"]},{event:Vn.VbSettingParaError,message:Ou.VBSettingFailed,logType:"error",additionalTags:["Video VB Flow"]}],hs=[{event:Vn.AudioBridgeReconnectStart,message:au.AudioBridgeReconnectStart,logType:"info",additionalTags:["Audio Join Flow"]},{event:Vn.AudioBridgeReconnectEnd,message:au.AudioBridgeReconnectEnd,logType:"info",additionalTags:["Audio Join Flow"]},{event:Vn.UserGrantCaptureAudio,message:au.DeviceAudioStreamCaptured,logType:"info",additionalTags:["Audio Capture Flow"]},{event:Vn.UserForbiddedCaptureAudio,message:au.AudioCapturedForbidden,logType:"error",additionalTags:["Audio Capture Flow"]},{event:Vn.AudioWebsocketBroken,message:au.AudioWorkerWebsocketBroken,logType:"error",additionalTags:["Audio Init Flow"]},{event:Vn.AudioZeroData,message:s=>{const{audio:{webrtcRestartCount:l}}=s;return l<3?au.AudioCaptureZeroData:null},logType:"error",additionalTags:["Audio Init Flow"]},{event:Vn.JoinComputerAudioComplete,message:au.AudioJoinComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:Vn.LeaveComputerAudioComplete,message:au.AudioLeaveComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:Vn.JoinSharingAudioComplete,message:au.SharingAudioStartComplete,logType:"info",additionalTags:["Audio Sharing Flow"]},{event:Vn.LeaveSharingAudioComplete,message:au.SharingAudioStopComplete,logType:"info",additionalTags:["Audio Sharing Flow"]},{event:Vn.AudioSpeakerSetError,message:au.ChangeSpeakerError,logType:"error",additionalTags:["Audio Play Flow"]}].map(s=>({...s,tag:"Audio"})).concat(Ri.map(s=>({...s,tag:"Video"}))),sr=Hh.getInstance(),{InitSuccessVideo:x2,InitSuccessAudio:CO,InitSuccessSharing:IO,InitFailedVideo:qp,InitFailedAudio:d_,InitFailedSharing:L2}=Vn;var o4=Object.freeze({__proto__:null,handleLoggerMeetingOptionEpic:(s,l)=>s.pipe(wr(`${Gc}`),Pn(()=>{const{meeting:{logConfig:u,logEncryptionPubKey:h},logger:{options:v}}=l.value;let E=v||{};return E={...E,logConfig:u,logEncryptionPubKey:h},sr.init(E).then(()=>yr(!0)).catch(()=>yr(!1))})),connectedMediaStreamForLogEpic:(s,l)=>Ar(s,[x2,CO,IO,qp,d_,L2]).pipe(Fo(s,l,u=>{const{payload:{type:h,data:v}}=u,E=sr.makeLogger(["Audio","Audio Init Flow"]),I=sr.makeLogger(["Video","Video Init Flow"]),R=sr.makeLogger(["Sharing","Sharing Init Flow"]);h===CO||h===d_?v===Co.EncodeSuccess?E.info(au.AudioEncodeSuccess):v===Co.DecodeSuccess?E.info(au.AudioDecodeSuccess):v===Co.EncodeFailed?E.warn(au.AudioEncodeFailed):v===Co.DecodeFailed&&E.warn(au.AudioDecodeFailed):h===x2||h===qp?v===Co.EncodeSuccess?I.info(Ou.VideoEncodeSuccess):v===Co.DecodeSuccess?I.info(Ou.VideoDecodeSuccess):v===Co.EncodeFailed?I.warn(Ou.VideoEncodeFailed):v===Co.DecodeFailed&&I.warn(Ou.VideoDecodeFailed):h!==IO&&h!==L2||(v===Co.EncodeSuccess?R.info(mA.SharingEncodeSuccess):v===Co.DecodeSuccess?R.info(mA.SharingDecodeSuccess):v===Co.EncodeFailed?R.warn(mA.SharingEncodeFailed):v===Co.DecodeFailed?R.warn(mA.SharingDecodeFailed):h===IO&&void 0===v&&R.info(mA.SharingDecodeSuccess))})),handleLogFromMediaSDKEpic:(s,l)=>{return u=s,h=l,v=hs.map(u=>u.event),E=u=>{const{payload:{type:h}}=u,v=hs.find(E=>E.event===h);if(v){const{message:E,logType:I,additionalTags:R,tag:N}=v;let L=E;"function"==typeof E&&(L=E(l.value)),L&&sr.makeLogger([N])[I](L,R)}},Ar(u,v).pipe(Fo(u,h,E));var u,h,v,E},handleLogJoinEpic:(s,l)=>{return h=l,E=u=>{var h,v;const{payload:{body:E}}=u,R=["jid","mn","participantID","userGUID","zoomID"];if(E&&E.res===hc.CONF_SUCCESS){let N=["conID","confID","mmrFeature","mmrFeatureEx","reportDomain","res","role","svcUrl","userID"].reduce((L,V)=>void 0!==E[V]?{...L,[`${V}`]:E[V]}:L,{});N=R.reduce((L,V)=>void 0!==E[V]?{...L,[`${V}`]:Du(E[V])}:L,N),sr.makeLogger(["A/V Performance Info"]).info(`${navigator.hardwareConcurrency}`,["CPU_CORES"]),sr.makeLogger(["Command Socket Event"]).info(`log join meeting info ${JSON.stringify(N)}`,["User Info Map"])}else sr.makeLogger(["JOIN_MEETING_FAILED"]).error(`join meeting failed, error:${Z_(E?.res)}, rwg error code:${E?.res}`);ji.createAgent().sendRWGConnectionPerformance(`WCL_M, conId: ${E?.conID}, trackingId: ${null===(h=l.value.logger)||void 0===h||null===(v=h.options)||void 0===v?void 0:v.trackingId}`)},Wn(u=s,4098).pipe(Fo(u,h,E));var u,h,E},handleLogRWCEmptyEpic:(s,l)=>s.pipe(wr(`${da}`),Fn(l),ln(u=>{let[,h]=u;return void 0===h.meeting.encryptedRWC&&(void 0===h.meeting.encryptedGEORWC||0===h.meeting.encryptedGEORWC.length)}),Fo(s,l,()=>{const{label:u,payload:h}=ga(l.value);sr.makeLogger(["Join Meeting Flow"]).info(`${u} ${JSON.stringify(h)}`,["Ping RWC Domain Empty"])})),handleLogSocketErrorEpic:(s,l)=>s.pipe(wr(`${io}`),ln(u=>u.payload===Rs.OnError||u.payload===Rs.Disconnect||u.payload===Rs.NoHeartbeat),Fo(s,l,u=>{const{payload:h}=u,{socket:{rwgServerList:v,retryCount:E}}=l.value,{payload:I}=ga(l.value);sr.makeLogger(["Join Meeting Flow"]).info(`websocket unexpected disconnected,${JSON.stringify({code:h,rwgHost:v[E],...I})}`,["RWG Disconnect"])})),handleLogFailoverEpic:(s,l)=>s.pipe(wr(`${Ep}`),Fo(s,l,u=>{const{payload:{reason:h,count:v,interval:E}}=u,{payload:I}=ga(l.value);sr.makeLogger(["Join Meeting Flow"]).info(`meeting failover,${JSON.stringify({reason:h,count:v,interval:E,...I})}`,["Failover"])})),handleLogRwgUrlEpic:(s,l)=>s.pipe(wr(`${qa}`),ln(u=>u.payload.status===so.Connecting),Fo(s,l,u=>{const{payload:{rwgUrl:h}}=u;let v=h.replace(/(\d+)\?/,`${Du("$1")}?`);v=["email","zoomid","participantID","dn2","customer_key","mpwd","topic"].reduce((I,R)=>I.indexOf(R)>-1?I.replace(new RegExp(`${R}=([^&]+)`,"g"),`${R}=${Du("$1")}`):I,v);const{payload:E}=ga(l.value);sr.makeLogger(["Join Meeting Flow"]).info(`RWG URL,${JSON.stringify({rwgUrl:v,...E})}`,["RWG Url"])})),handleLogUnableConnectRWGEpic:(s,l)=>s.pipe(wr(`${Bs}`),ln(u=>{const{payload:h}=u;return h?h.retry:l.value.meeting.meetingStatus===bs.Initial}),Fo(s,l,()=>{const{meeting:{meetingStatus:u},socket:{rwgServerList:h,retryCount:v}}=l.value;if(u!==bs.Joined){const{payload:E}=ga(l.value),I=h?.length>0?h[v]:void 0;sr.makeLogger(["meeting_connection_details"]).log(JSON.stringify({...E,rwc:I?.rwc,rwg:I?.rwg})),sr.reportToGlobalTracing(["meeting_connection_details"])}}))});const B2=Hh.getInstance(),zh={options:void 0,isLaplaceInitialized:!1},Yb=Gn({[`${wC}`]:gt((s,l)=>{let{payload:u}=l;s.options=u}),[`${yr}`]:gt((s,l)=>{let{payload:u}=l;s.isLaplaceInitialized=u}),[`${V1}`]:(s,l)=>{let{options:u}=s,{payload:h}=l;return h?{...zh,options:u}:{...zh}}},zh),qb=dc(o4);var ed=Object.freeze({__proto__:null,handleRecordingEnableEpic:s=>s.pipe(wr(`${Gc}`),ht(l=>{const{payload:{recordingEnable:u}}=l;return N1(u)})),receiveCloudRecordIndication:(s,l)=>Wn(s,zc).pipe(ln(u=>{var h,v,E;return void 0!==(null===(h=u.payload.body)||void 0===h?void 0:h.cmrServerStatus)||void 0!==(null===(v=u.payload.body)||void 0===v?void 0:v.disAllowClientStopAutoCmr)||void 0!==(null===(E=u.payload.body)||void 0===E?void 0:E.enableAutomicRecordingCloud)}),Fn(l),Pn(u=>{let[h,v]=u;const{cmrServerStatus:E,disAllowClientStopAutoCmr:I,enableAutomicRecordingCloud:R}=h.payload.body,N=[];return void 0!==E&&(E!==ea.Init&&(dt(pg,{cmrServerStatus:E}),v.recording.recordingIsoEnable&&E===ea.Start&&dt(A0,{status:nl.Ask})),N.push(Lv(E))),void 0!==I&&N.push(AC(!I)),void 0!==R&&N.push(x1(R)),En(N)})),receiveIsoCloudRecordIndication:s=>Wn(s,zc).pipe(ln(l=>{var u;return void 0!==(null===(u=l.payload.body)||void 0===u?void 0:u.bCmrIsoEnble)}),ht(l=>{const{bCmrIsoEnble:u}=l.payload.body;return tM(u)})),receiveLocalRecordingIndicationEpic:s=>Wn(s,Mo).pipe(ln(l=>{const{payload:{body:{update:u}}}=l;return u?.some(h=>void 0!==h.bLocalRecordStatus)}),Zn(l=>{const{payload:{body:{update:u}}}=l;u.filter(h=>void 0!==h.bLocalRecordStatus).forEach(h=>{dt(cP,{userId:h.id,bLocalRecord:1===h.bLocalRecordStatus})})}),Pr(Ht)),receiveUserISORecordingStatusEpic:s=>Wn(s,Mo).pipe(ln(l=>{const{payload:{body:{update:u}}}=l;return u?.some(h=>void 0!==h.bAllowISORecord)}),Zn(l=>{const{payload:{body:{update:u}}}=l;u.filter(h=>void 0!==h.bAllowISORecord).forEach(h=>{dt(A0,{userId:h.id,status:h.bAllowISORecord?nl.Accept:nl.Decline})})}),Pr(Ht)),receiveIQResponseIndication:s=>Wn(s,zc).pipe(ln(l=>{var u;return void 0!==(null===(u=l.payload.body)||void 0===u?void 0:u.SalesRecordingAnalytics)}),ht(l=>{const{SalesRecordingAnalytics:u}=l.payload.body;return dt(hg,{isZoomIQ:u}),L1(u)})),receiveIQOperationResponse:(s,l)=>Wn(s,4319).pipe(Fn(l),ln(u=>{var h;let[v]=u;return void 0!==(null===(h=v.payload.body)||void 0===h?void 0:h.success)}),Pn(u=>{let[h,v]=u;const E=[],{success:I}=h.payload.body,{recording:{zoomIQChanging:R}}=v;return dt(pv,{success:I}),I&&E.push(Dg(!R)),En(E)}))});const GI={cmrStatus:ea.Stop,recordingEnable:!1,recordingIsoEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1,isZoomIQ:!1,zoomIQChanging:!1},QA=Gn({[`${Lv}`]:gt((s,l)=>{let{payload:u}=l;s.cmrStatus=u}),[`${N1}`]:gt((s,l)=>{let{payload:u}=l;s.recordingEnable=u}),[`${tM}`]:gt((s,l)=>{let{payload:u}=l;s.recordingIsoEnable=u}),[`${AC}`]:gt((s,l)=>{let{payload:u}=l;s.allowStopAutoRecording=u}),[`${x1}`]:gt((s,l)=>{let{payload:u}=l;s.automaticCloudRecordingEnable=u}),[`${L1}`]:gt((s,l)=>{let{payload:u}=l;s.isZoomIQ=u}),[`${Dg}`]:gt((s,l)=>{let{payload:u}=l;s.zoomIQChanging=u}),[`${Bv}`]:()=>({...GI})},GI);var wO,XB,TO,F2,RO,fs;const HA=ji.createAgent();let ZB=(wO=ir("recording"),XB=ir("recording"),TO=ir("recording"),F2=ir("recording"),RO=ir("recording"),wn((fs=class extends Yr{startRecording(){const s=this[cr](),{meeting:{bIbDisableRecording:l,recordingEnable:u},recording:{cmrStatus:h}}=s;return l?Promise.reject({type:fn,reason:"Rejected by Information Barrier"}):u?h===ea.Start?Promise.resolve(""):(HA.recordMeeting(!0,!1),Jr(pg,v=>v.cmrServerStatus===ea.Start)):Promise.reject({type:fn,reason:"The account of the meeting disabled the cloud recording"})}pauseRecording(){const s=this[cr](),{recording:{cmrStatus:l}}=s;return l===ea.Pause?Promise.resolve(""):l!==ea.Start?Promise.reject({type:fn,reason:"Recording is not started"}):(HA.recordMeeting(!1,!0),Jr(pg,u=>u.cmrServerStatus===ea.Pause))}stopRecording(){const s=this[cr](),{recording:{cmrStatus:l}}=s;return l===ea.Stop?Promise.resolve(""):(HA.recordMeeting(!1,!1),Jr(pg,u=>u.cmrServerStatus===ea.Stop))}accept(){const s=this[cr](),{recording:{cmrStatus:l,recordingIsoEnable:u}}=s,h=Cr(s);return u?l!==ea.Start&&l!==ea.Pause?Promise.reject({type:fn,reason:"Recording is not started"}):null!=h&&h.bAllowISORecord?Promise.resolve("You accepted ISO recording"):(HA.allowSelfRecord(!0),Jr(A0,v=>v?.userId===h?.userId&&v?.status===nl.Accept)):Promise.reject({type:fn,reason:"ISO Recording is not enabled"})}decline(){const s=this[cr](),{recording:{cmrStatus:l,recordingIsoEnable:u}}=s,h=Cr(s);return u?l!==ea.Start&&l!==ea.Pause?Promise.reject({type:fn,reason:"Recording is not started"}):!0===h?.bAllowISORecord?Promise.reject({type:fn,reason:"You had accept ISO recording, cant change it"}):(HA.allowSelfRecord(!1),Promise.resolve("")):Promise.reject({type:fn,reason:"ISO Recording is not enabled"})}getRecordingStatus(){const s=this[cr](),{recording:{cmrStatus:l}}=s;return l===ea.Start?nl.Recording:l===ea.Pause?nl.Paused:nl.Stopped}isRecordingEnabled(){const s=this[cr](),{recording:{recordingEnable:l}}=s;return l}isAllowedToStopAutoRecording(){const s=this[cr](),{recording:{allowStopAutoRecording:l}}=s;return l}isAutomaticCloudRecordingEnabled(){const s=this[cr](),{recording:{automaticCloudRecordingEnable:l}}=s;return l}enableRecordingWithIQ(s){const{[cr]:l,[Pu]:u}=this,h=l(),{recording:{isZoomIQ:v,zoomIQChanging:E},meeting:{meetingOptions:I}}=l();return I.isEnableKiwiRecording?bu(h)?E?Promise.reject({type:fn,reason:"We are changing, please wait"}):s===v?Promise.reject({type:fn,reason:`You have ${s?"enable":"disable"} Zoom IQ, don't need change`}):(u(Dg(!E)),u(L1(!v)),HA.enableZoomIQRecord(s),Jr(pv,R=>R?.success)):Promise.reject({type:fn,reason:"Only Host or co-host can enable/disable Zoom IQ"}):Promise.reject({type:fn,reason:"You not have zoom IQ license or not enable zoom IQ, please check and retry"})}}).prototype,"startRecording",[np,Tn,wO],Object.getOwnPropertyDescriptor(fs.prototype,"startRecording"),fs.prototype),wn(fs.prototype,"pauseRecording",[np,Tn,XB],Object.getOwnPropertyDescriptor(fs.prototype,"pauseRecording"),fs.prototype),wn(fs.prototype,"stopRecording",[np,Tn,TO],Object.getOwnPropertyDescriptor(fs.prototype,"stopRecording"),fs.prototype),wn(fs.prototype,"accept",[Tn,F2],Object.getOwnPropertyDescriptor(fs.prototype,"accept"),fs.prototype),wn(fs.prototype,"decline",[Tn,RO],Object.getOwnPropertyDescriptor(fs.prototype,"decline"),fs.prototype),fs);const ml=dc(ed);let GA=function(s){return s[s.All=1]="All",s[s.Private=2]="Private",s}({}),U2=function(s){return s.SUCCESS="success",s}({}),WI=function(s){return s.CustomizedKey="__zoom_internal_message_customized_key__@@",s.SpeakerOnly="__zoom_internal_message_speaker_only__@@",s}({});const V2=Ng.getInstance(),KI=(s,l,u)=>{const{meeting:{encType:h}}=u,v=l,E=$a(s),I=v?GA.Private:GA.All;return h===Cf.AES_GCM?wa.beginEncrypt({text:E,type:Wc.XMPP_CHAT}).then(R=>{V2.sendWebinarMseeage(R,v,I,!0)}):V2.sendWebinarMseeage(E,v,I,!1)};function WA(s,l){const{cmd:{jids:u}}=l;return Object.prototype.hasOwnProperty.call(u,s)?Promise.resolve():vo(Rf).pipe(hL(h=>-1===h.findIndex(v=>Number(v.userId)===s)),ti(1),Nt(Qu)).toPromise()}function OO(s){const{cmd:{connectionStatus:l}}=s;return l===U2.SUCCESS?Promise.resolve(!0):vo(sP,1).toPromise().then(u=>u===rg.Connected||Promise.reject({type:fn,reason:"Cannot establish the command channel"}))}function Qs(s,l){for(const[u,h]of Object.entries(s))if(h.jid===l)return u}var Nr=Object.freeze({__proto__:null,receiveCmdChannelResponseXMPPEpic:(s,l)=>fh(s,24577).pipe(Fn(l),ht(u=>{let[h]=u;const{payload:{body:{status:v}}}=h;return v===U2.SUCCESS&&dt(sP,rg.Connected),Fv(v)})),receiveCmdChannelMessageFromXMPPEpic:(s,l)=>fh(s,24583).pipe(Fn(l),Pn(u=>{let[h,v]=u;const{meeting:{userId:E,encType:I},cmd:{jids:R}}=v,{payload:{body:{senderName:N,senderJid:L,text:V,type:O,receiver:X,msgid:ee,sn:re}}}=h,ne=Qs(R,X),fe=I===Cf.AES_GCM,ve=Qs(R,L),Le=(new Date).getTime();let Qe=Promise.resolve({message:V});return fe&&(Qe=wa.beginDecrypt({decryptedText:V,type:Wc.XMPP_CHAT,zoomId:re})),Qe.then(ze=>{let{message:ft}=ze;if(O===GA.Private&&Number(ne)===E||O===GA.All){const tt=gh(ft);if(null!=tt&&tt.startsWith(WI.SpeakerOnly)){const St=tt.substring(WI.SpeakerOnly.length),Zt=1===Number(St);return SE({userId:Number(ve),key:"isSpeakerOnly",value:Zt})}{var lt;const St=ve&&(null===(lt=R[ve])||void 0===lt?void 0:lt.userGuid);dt(Ch,{senderId:ve,senderName:N,senderGuid:St,text:tt,timestamp:Le,msgid:ee})}}return""})}),ln(u=>"object"==typeof u&&null!==u&&void 0!==u.type),Zn(u=>{const{payload:{userId:h,key:v,value:E}}=u;dt(Dd,[{userId:h,[`${v}`]:E}])})),receiveUserJidUpdateFromXMPPEpic:(s,l)=>fh(s,24595).pipe(Pn(u=>{const{payload:{body:{action:h,data:v}}}=u,E=[];if([ec.List,ec.Add,ec.update].includes(h)&&v){const{breakoutRoom:I,participants:{attendeesList:R}}=l.value,N=I?.currentRoom.status===rr.InRoom?R.concat(I.mainSessionAttendeeList):R;E.push(B1({data:v,attendees:N}))}return h===ec.Remove&&v&&E.push(yC(v)),En(E)}))}),mi=Object.freeze({__proto__:null,handleIsSpeakerOnlyBroadcastEpic:(s,l)=>s.pipe(wr(`${sl}`),kn(u=>{const{payload:{speakerOnly:h}}=u,v=Cr(l.value);return(void 0!==v?.audio?En(Promise.resolve(v.audio)):vo(Zu).pipe(ln(E=>void 0!==E.audio),ti(1))).pipe(Zn(()=>{OO(l.value).then(()=>{KI(`${WI.SpeakerOnly}${h?1:0}`,"",l.value)})}),Pr(Ht))})),handleSpeakerOnlyPushEpic:(s,l)=>Wn(s,Mo).pipe(ln(u=>{const{payload:{body:h}}=u;return!!h.add&&!!l.value.audio.customizeAudioOption.speakerOnly}),Nt(Qu),Zn(function(){var u=U(function*(h){const{payload:{body:{add:v}}}=h,E=l.value,{meeting:{userId:I}}=E;for(let R=0;R<v.length;R++){const{id:N}=v[R];if(N!==I){yield WA(N,l.value);const{cmd:{jids:L},participants:{attendeesList:V}}=l.value;L[N]&&setTimeout(()=>{KI(`${WI.SpeakerOnly}1`,L[N].jid,l.value)},Math.floor(Math.random()*Math.log10(V.length)*1e3))}}});return function(h){return u.apply(this,arguments)}}()),Pr(Ht))});const DO={connectionStatus:"initial",jids:{}},Jb=Gn({[`${Uv}`]:()=>({...DO}),[`${B1}`]:gt((s,l)=>{let{payload:u}=l;const{data:h,attendees:v}=u;h.forEach(E=>{const{jid:I,node:R}=E;if(!s.jids[R]||s.jids[R].jid!==I){const N=v.find(L=>L.userId===Number(R));s.jids[R]={jid:I,userGuid:N?.userGUID}}})}),[`${yC}`]:gt((s,l)=>{let{payload:u}=l;u.forEach(h=>{const{jid:v}=h,E=Qs(s.jids,v);E&&delete s.jids[E]})}),[`${Fv}`]:gt((s,l)=>{let{payload:u}=l;s.connectionStatus=u})},DO);var Mu;let $b=(wn((Mu=class extends Yr{send(s,l){if(!s)return Promise.reject({type:Dr,reason:"Text is empty"});if("string"!=typeof s)return Promise.reject({type:Dr,reason:"Text is not a string"});if(s.length>512)return Promise.reject({type:Dr,reason:"Text exceeds the max length(512)."});const{[cr]:u}=this,h=u(),{socket:{xmppSocketStatus:v},meeting:{userId:E}}=h;return v!==so.Connected?Promise.reject({type:bc,reason:"Command channel is not ready"}):OO(h).then(()=>l?-1!==ls(u()).findIndex(I=>I.userId===l)?WA(l,h).then(()=>{const{cmd:{jids:I}}=u();return I[l]?(KI(s,I[l].jid,u()),{timestamp:(new Date).getTime(),text:s,receiverId:l,senderId:E}):Promise.reject({type:Cp})}):Promise.reject({type:Dr,reason:"Cannot find the user"}):(KI(s,"",h),{timestamp:(new Date).getTime(),text:s,receiverId:0,senderId:E}))}getJids(){const{[cr]:s}=this,l=s(),{cmd:{jids:u}}=l;return u}}).prototype,"send",[Tn],Object.getOwnPropertyDescriptor(Mu.prototype,"send"),Mu.prototype),Mu);const td=dc(Nr,mi),kO=(s,l,u,h)=>{const{getState:v,dispatch:E}=u,I=v(),{participants:{attendeesList:R},audio:{localShareAudioUserMutedList:N},share:{isReceiveSharingFromMainSession:L},breakoutRoom:V}=I,O=(L?V?.mainSessionAttendeeList:R).find(X=>X.userId==s);if(O){if(O.bShareAudioOn){const X=N.find(ee=>ee.userId===s);return X&&X.muted===!l&&E(n_(h,s,l,I)),Promise.resolve("")}return Promise.reject({type:fn,reason:`Cannot ${l?"mute":"unmute"} share audio when the user's share audio is not enable.`})}return Promise.reject({type:Dr,reason:"Cannot find the user"})},Ps=(s,l)=>{const{store:{getState:u},rwgAgent:h}=s,{share:{sharePrivilege:v}}=u();return v===l?Promise.resolve(""):Object.values(Ss).includes(l)?(h.lockSharing(l),Jr(qc,E=>E.lockShare===l)):Promise.reject({type:Dr})},Xb=us([ls],s=>s.filter(l=>l.bVideoOn)),yo=us([Xb],s=>s.filter(l=>262144==(262144&l.caps)));var PO,KA,xr,zA,Zb,zI,YA,oa,YI,MO,qI,JI,NO,xO,j2,p_,Q2,$I,qA,JA,LO,H2,eS,XI,BO,$A,FO,UO,VO,tS,jO,QO,HO,nS,rS,ZI,GO,G2,ew,iS,WO,tw,nw,KO,rw,zO,W2,h_,YO,XA,iw,ZA,ey,qO,eF,JO,$O,K2,ow,tF,kt;const rp=u_("Audio"),Ms=u_("Video"),vm=u_("Sharing"),oS=jI(HTMLCanvasElement,0),f_=jI(HTMLCanvasElement,0,["id"]);let sw=(PO=ir("audio"),KA=ir("audio"),xr=ir("audio"),zA=ir("audio"),Zb=ir("audio"),zI=u_("Audio",[1,2,3]),YA=ir("audio"),oa=u_("Audio",[1,2]),YI=ir("audio"),MO=ir("audio"),qI=ir("audio"),JI=ir("audio"),NO=ir("share"),xO=ir("audio"),j2=ir("share"),p_=ir("audio"),Q2=ir("audio"),$I=ir("audio"),qA=ir("audio"),JA=ir("video"),LO=ir("video"),H2=ir("video"),eS=ir("video"),XI=ir("video"),BO=ir("video"),$A=ir("video"),FO=ir("video"),UO=ir("video"),VO=ir("video"),tS=ir("video"),jO=ir("video"),QO=ir("video"),HO=ir("video"),nS=ir("video"),rS=ir("video"),ZI=ir("video"),GO=ir("video"),G2=ir("video"),ew=ir("video"),iS=ir("video"),WO=ir("video"),tw=ir("video"),nw=ir("video"),KO=ir("share"),rw=ir("share"),zO=ir("share"),W2=ir("share"),h_=ir("share"),YO=ir("share"),XA=ir("share"),iw=ir("share"),ZA=qB("isShareOptionLocked"),ey=qB("isShareOptionLocked"),qO=ir("share"),eF=ir("share"),JO=ir("share"),$O=ir("share"),K2=ir("share"),ow=ir("share"),tF=ir("share"),kt=class extends Yr{constructor(s){super(s),this[Cs].dispatch(ph()),this[gn]={store:s,mediaAgent:oI(Li(tn.getInstance())),rwgAgent:ji.createAgent()}}startAudio(s){return((l,u)=>{const{store:{getState:h,dispatch:v},rwgAgent:E,mediaAgent:I}=l,R=h(),{speakerOnly:N,autoStartAudioInSafari:L}=u||{},V=Cr(R);if(V?.audio===Qo.Computer)return Promise.resolve();if(V?.audio===Qo.Phone)return Promise.reject({type:fn,reason:"joined by phone"});{const{audio:{isAllowToTalk:O,isComputerAudioLoading:X,canPlayAudio:ee,customizeAudioOption:{speakerOnly:re}},media:{audioDecodeStatus:ne,audioEncodeStatus:fe}}=R;if(X)return Promise.reject({type:fn,reason:"Computer audio has been loading, please wait."});if(pI()||!0!==u?.backgroundNoiseSuppression||(console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on Chromium-like browser"),Object.assign(u,{backgroundNoiseSuppression:void 0})),KR()||!0!==u?.syncButtonsOnHeadset||(console.warn("Sync buttons on headset is not supported on the current platform"),Object.assign(u,{syncButtonsOnHeadset:void 0})),null!=u&&u.mediaFile&&!tn.isSupportMediaPlaybackAsVideoInput()&&(console.warn("Cannot use media file as audio input due to the browser limitation"),Object.assign(u,{mediaFile:void 0})),v(sl(u??{})),!!re!=!!N&&v(SE({userId:R.meeting.userId,key:"isSpeakerOnly",value:!!N})),!V)return Promise.reject({type:fn,reason:"Please call `startAudio` method after the `join` has been resolved"});{const ve=Da(V.userRole)&&!O||N,{encodeInitStatus:Le,decodeInitStatus:Qe}=hI(R,V,N);if(ma()&&("success"!==Qe||"success"!==Le))return Promise.reject({type:fn,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method"});v(Ig(!0)),Pa("audio",Le,Qe).subscribe(ze=>{let[ft,lt]=ze;if(ft&&lt){let tt=ee||(ma()||Ml())&&!L?Promise.resolve():function(){const St=URL.createObjectURL(DT),Zt=new Audio(St);return Zt.muted=!1,Ml()?new Promise((ut,Ze)=>{var _e;Zt.addEventListener("canplaythrough",()=>{Zt.play().then(()=>{ut(!0)}).catch(He=>{Ze(He)}).finally(()=>{URL.revokeObjectURL(St)})}),null===(_e=Zt.load)||void 0===_e||_e.call(Zt)}):Promise.race([Zt.play(),new Promise((ut,Ze)=>{window.setTimeout(()=>{Ze()},3e3)})]).finally(()=>{URL.revokeObjectURL(St)})}();void 0===tt&&(tt=Promise.resolve()),tt.then(()=>{const St=h(),{audio:{isSharingAudio:Zt}}=St;E.joinOrLeaveVoip(!0),Zt&&!li()||dm(I,St,!ve),Da(V.userRole)&&O&&v(DE(!0)),v(Io(!0))}).catch(()=>{v(Io(!1)),v(Ig(!1))})}else v(Ig(!1))})}return"failed"===fe||"failed"===ne?(v(Ig(!1)),Promise.reject({type:Cp,reason:"audio encode or decode error"})):new Promise((ve,Le)=>{bi(vo(Ag.JoinComputerAudio.success,1),$s(...Ag.JoinComputerAudio.fail.map(Qe=>vo(Qe,1).pipe(Pn(()=>Mi({type:na,reason:Qe}))))),ua(45e3).pipe(Pn(()=>Mi({type:gE})))).subscribe(()=>{v(Ig(!1)),ve("")},Qe=>{(Qe.type===na||h().audio.canPlayAudio)&&E.joinOrLeaveVoip(!1),v(Ig(!1)),Le(Qe)})})}})(this[gn],s)}stopAudio(){return function(){var s=U(function*(l){const{store:{getState:u,dispatch:h},mediaAgent:v,rwgAgent:E}=l,I=u(),{audio:{isComputerAudioLoading:R,isShareAudioEnabled:N,isSharingAudio:L,isUsingMediaPlayback:V,customizeAudioOption:{speakerOnly:O}}}=I,X=Cr(I);if(R)return Promise.reject({type:fn,reason:"Computer audio has not finished joining, please wait."});if(N){if(L&&!li())return Promise.reject({type:fn,reason:"Cannot stop audio during sharing with audio"});h(Cu(void 0)),h(Bd(void 0))}return X?.audio===Qo.Computer?(yield v.leaveComputerAudio(),E.joinOrLeaveVoip(!1),O&&h(SE({userId:I.meeting.userId,key:"isSpeakerOnly",value:void 0})),V&&Dc.getInstance().stopAudioElement(),h(wp(0)),Jr(yv)):Promise.resolve("")});return function(l){return s.apply(this,arguments)}}()(this[gn])}muteAudio(s){return((l,u)=>{const{store:{getState:h,dispatch:v},rwgAgent:E,mediaAgent:I}=l,R=h(),N=Cr(R);if(null==u||u===N?.userId)return""===N?.audio||null===N?.audio?Promise.reject({type:fn,reason:"no audio joined"}):!0===N?.muted?Promise.resolve(""):(v(Ip(!0)),E.mute(N.userId,!0),R.audio.isShareAudioEnabled&&!li()&&(v(Bd(!0)),I.muteAudio()),Jr(w0).then(()=>""));if(bu(R)){const{participants:{allowTalkAttendeesList:L,attendeesList:V}}=R,O=L.concat(V).find(X=>X.userId===u);return O?""===O.audio||null===O?Promise.reject({type:fn,reason:"no audio joined"}):!1===O.muted?(E.mute(u,!0),Jr(hP,X=>X.id===u&&1==X.muted)):Promise.resolve(""):Promise.reject({type:Dr,reason:"no matching user"})}return Promise.reject({type:na})})(this[gn],s)}unmuteAudio(s){return(l=U(function*(u,h){const{store:{getState:v,dispatch:E},rwgAgent:I,mediaAgent:R}=u,N=v(),L=Cr(N);if(void 0===h||h===L?.userId){if(""===L?.audio||null===L?.audio)return Promise.reject({type:fn,reason:"no audio joined"});if(!1===L?.muted)return Promise.resolve("");if(N.audio.isShareAudioEnabled&&!li()){if(N.audio.isSharingAudio)return Promise.reject({type:fn,reason:"Cannot unmute audio during sharing with audio"});E(Bd(!1))}if(E(Ip(!0)),N.audio.bCanUnmute||null!=L&&L.isHost||null!=L&&L.bCoHost){if(Da(L.userRole)){const{audio:{isAllowToTalk:V,isAllowToTalkAttendeeConnected:O}}=N;V?O||(yield R.leaveComputerAudio(),yield dm(R,N,!0),E(DE(!0))):Promise.reject({type:fn,reason:"Webinar attendee cannot unmute self audio."})}return I.mute(L.userId,!1),R.unmuteAudio(),Jr(kd).then(()=>"")}return Promise.reject({type:na,reason:"host not allow unmute themselves"})}if(bu(N)){const{participants:{allowTalkAttendeesList:V,attendeesList:O}}=N,X=V.concat(O).find(ee=>ee.userId===h);return X?""===X.audio||null===X?Promise.reject({type:fn,reason:"no audio joined"}):(!0===X.muted&&I.mute(h,!1),Promise.resolve("")):Promise.reject({type:Dr,reason:"no matching user"})}return Promise.reject({type:na})}),function(u,h){return l.apply(this,arguments)})(this[gn],s);var l}dialOut(s,l,u,h){return((v,E,I,R,N)=>{const{store:{getState:L,dispatch:V},rwgAgent:O}=v,X=L(),{meeting:{callOutCountry:ee,isSupportCallOut:re}}=X;if(re&&Array.isArray(ee)&&ee.findIndex(ne=>ne.code===E)>-1){const{seq:ne}=O.audioDialout(E+I,R,!(null==N||!N.callMe),!(null==N||!N.pressingOne),!(null==N||!N.greeting));return V(ZT({sequence:ne,phoneNumber:E+I})),Cv(Ag.JoinAudioByCallMe)}return Promise.reject({type:Dr,reason:"no matching country code"})})(this[gn],s,l,u,h)}cancelDialOut(s,l,u){return((h,v,E,I)=>{const{rwgAgent:R}=h;return R.audioCancelDialout(v+E,!(null==I||!I.callMe)),Cv(Ag.cancelDialOut)})(this[gn],s,l,u)}hangup(){return(s=>{const{store:{getState:l},rwgAgent:u}=s,h=l(),v=Cr(h);return v?.audio===Qo.Phone&&null!==v.userId?(u.audioDrop(v.userId),Cv(Ag.hangup)):Promise.reject({type:fn,reason:"not joined audio by phone"})})(this[gn])}switchMicrophone(s){return((l,u)=>{const{store:{getState:h,dispatch:v},mediaAgent:E}=l,I=h(),{audio:{microphoneDevicesList:R,activeMicrophone:N,mediaPlaybackFile:L,isUsingMediaPlayback:V}}=I,O=R.find(X=>X.deviceId===u);if("default"===u||"string"!=typeof u||O){const X=Cr(I);if("string"==typeof u)u!==N&&(E.changeMicrophone(u,O?.label,!(null==X||!X.muted)),v(tC(u)),v(Vf(void 0)),Dc.getInstance().stopAudioElement());else if(u&&(!V||L?.url!==u.url)){const ee=Dc.getInstance();ee.setAudioElement(u).then(()=>{E.changeMicrophone(ee.audioElement,void 0,!(null==X||!X.muted)),v(Vf(u))})}return Promise.resolve("")}return Promise.reject({type:Pd})})(this[gn],s)}switchSpeaker(s){return((l,u)=>{const{store:{getState:h,dispatch:v},mediaAgent:E}=l,{audio:{speakerDevicesList:I,activeSpeaker:R}}=h();return"default"!==u&&-1==I.findIndex(N=>N.deviceId===u)?Promise.reject({type:Pd}):(u!==R&&(E.changeSpeaker(u),v(nC(u))),Promise.resolve(""))})(this[gn],s)}muteShareAudio(s){return((l,u)=>{const{mediaAgent:h,rwgAgent:v,store:{getState:E,dispatch:I}}=l,R=E(),{meeting:{userId:N}}=R;if(u&&u!==N)return kO(u,!0,l.store,h);{const{audio:{isSharingAudio:V,isShareAudioEnabled:O,isShareAudioMuted:X}}=R;if(!O)return Promise.reject({type:fn,reason:"Cannot mute sharing audio when sharing audio is not enable"});if(X)return Promise.resolve("");{v.muteShareAudio(!0);let ee=Promise.resolve();var L;return V&&(ee=null===(L=h.leaveSharingAudio(!0))||void 0===L?void 0:L.then(()=>{if(!li())return Rb(h,v,R).then(re=>{re.forEach(ne=>I(ne))})})),n_(h,N,!0,R),Promise.all([Jr({event:Zu,operations:[ln(re=>void 0!==re.bShareAudioOn),ti(1)]},re=>!1===re.bShareAudioOn),ee]).then(()=>(I(n1(!0)),V&&(I(Tv(!1)),dt(Oa,{state:"off"})),""))}}})(this[gn],s)}unmuteShareAudio(s){return((l,u)=>{const{mediaAgent:h,rwgAgent:v,store:{getState:E,dispatch:I}}=l,R=E(),{meeting:{userId:N}}=R;if(u&&u!==N)return kO(u,!1,l.store,h);{const{audio:{isSharingAudio:L,isShareAudioEnabled:V,isShareAudioMuted:O},share:{status:X}}=R;if(!V)return Promise.reject({type:fn,reason:"Cannot unmute sharing audio when sharing audio is not enable"});if(!1===O)return Promise.resolve("");{v.muteShareAudio(!1);let ee=Promise.resolve();return!1===L&&X===Zi.Sharing&&(ee=Ob(h,v,R).then(re=>{re.forEach(ne=>I(ne))})),n_(h,N,!1,R),Promise.all([Jr({event:Zu,operations:[ln(re=>void 0!==re.bShareAudioOn),ti(1)]},re=>!0===re.bShareAudioOn),ee]).then(()=>(I(n1(!1)),!1===L&&X===Zi.Sharing&&(I(Tv(!0)),dt(Oa,{state:"on"})),""))}}})(this[gn],s)}subscribeAudioStatisticData(s){return(l=U(function*(u,h){const{mediaAgent:v,store:{getState:E}}=u,I=E(),R=Cr(I),N=!h||h.decode,L=!h||h.encode;if(!R)return Promise.reject({type:fn,reason:"Call this function after the 'join' method resolved."});{const{encodeInitStatus:V,decodeInitStatus:O}=hI(I,R);Pa("audio",V,O).subscribe(X=>{let[ee,re]=X;ee&&re&&(N&&v.subscribeToQos([Yc.AudioDecode],kf),L&&v.subscribeToQos([Yc.AudioEncode],kf))})}return""}),function(u,h){return l.apply(this,arguments)})(this[gn],s);var l}unsubscribeAudioStatisticData(s){return(l=U(function*(u,h){const{mediaAgent:v,store:{dispatch:E}}=u,R=!h||h.encode;return(!h||h.decode)&&(v.unsubscribeFromQos([Yc.AudioDecode]),E(xh(mv))),R&&(v.unsubscribeFromQos([Yc.AudioEncode]),E(rC(mv))),null}),function(u,h){return l.apply(this,arguments)})(this[gn],s);var l}enableBackgroundNoiseSuppression(s){return((l,u)=>{const{mediaAgent:h,store:{getState:v,dispatch:E}}=l,{audio:{isBackgroundNoiseSuppression:I}}=v();return u===!!I||(u&&!pI()?console.warn("Background noise suppression requires SharedArrayBuffer and is only supported on Chromium-like browser"):(h.enableAudioDenoise(u),E(MP(u)))),Promise.resolve("")})(this[gn],s)}enableSyncButtonsOnHeadset(s){return((l,u)=>{const{mediaAgent:h,store:{getState:v,dispatch:E}}=l,I=v(),{audio:{isHIDEnabled:R,microphoneDevicesList:N,activeMicrophone:L}}=I;if(u===!!R)return Promise.resolve("");{const O=Cr(I);var V;return O?(u&&!KR()?console.warn("Sync buttons on headset is not supported on the current platform"):(h.enableSyncButtonsOnHeadset(u,null===(V=N.find(X=>X.deviceId===L))||void 0===V?void 0:V.label,O.muted),E(r1(u))),Promise.resolve("")):Promise.reject({type:fn,reason:"Please call `enableSyncButtonsOnHeadset` method after the `join` has been resolved"})}})(this[gn],s)}getMicList(){return(s=>{let{store:{getState:l}}=s;const u=l();return u.audio?[...u.audio.microphoneDevicesList]:[]})(this[gn])}getSpeakerList(){return(s=>{let{store:{getState:l}}=s;const u=l();return u.audio?[...u.audio.speakerDevicesList]:[]})(this[gn])}getAudioState(s){return((l,u)=>{let{store:{getState:h}}=l;const v=h(),{meeting:{isWebinar:E}}=v;let I=null;return null==u?I=Cr(v):(I=v.participants.attendeesList.find(R=>R.userId===u),E&&!I&&(I=v.participants.xmppAttendeeList.find(R=>R.userId===u))),I?I.audio:null})(this[gn],s)}isAudioMuted(s){return((l,u)=>{let{store:{getState:h}}=l;const v=h(),{meeting:{isWebinar:E}}=v;let I=null;return void 0===u?I=Cr(v):(I=v.participants.attendeesList.find(R=>R.userId===u),E&&!I&&(I=v.participants.xmppAttendeeList.find(R=>R.userId===u))),!!I&&!!I.muted})(this[gn],s)}getActiveMicrophone(){return(s=>{let{store:{getState:l}}=s;const u=l();return u.audio?u.audio.activeMicrophone:null})(this[gn])}getActiveSpeaker(){return(s=>{let{store:{getState:l}}=s;const u=l();return u.audio?u.audio.activeSpeaker:null})(this[gn])}isSupportCallOut(){return(s=>{let{store:{getState:l}}=s;const{meeting:{isSupportCallOut:u,callOutCountry:h}}=l();return u&&Array.isArray(h)&&h?.length>0})(this[gn])}getDialOutStatus(){return(s=>{let{store:{getState:l}}=s;const{audio:u}=l();return u?.dialout[u.dialout.length-1].returnCode})(this[gn])}getDialOutCountries(){return(s=>{let{store:{getState:l}}=s;const{meeting:{callOutCountry:u}}=l();return Array.isArray(u)?u:[]})(this[gn])}getShareAudioStatus(){return(s=>{let{store:{getState:l}}=s;const{audio:{isShareAudioEnabled:u,isShareAudioMuted:h,isSharingAudio:v}}=l();return{isShareAudioEnabled:u,isShareAudioMuted:h,isSharingAudio:v}})(this[gn])}isOthersShareAudioMutedLocally(s){return((l,u)=>{var h;let{store:{getState:v}}=l;const{audio:{localShareAudioUserMutedList:E}}=v();return null===(h=E.find(I=>I.userId===u))||void 0===h?void 0:h.muted})(this[gn],s)}getAudioStatisticData(){return(s=>{let{store:{getState:l}}=s;const{audio:{statistic:u}}=l();return{...u}})(this[gn])}getDialInInfo(){return(s=>{let{store:{getState:l}}=s;const{meeting:{meetingNumber:u,tollNumbers:h,participantID:v,h323Password:E}}=l();return void 0===h?null:{meetingId:u,participantId:v,password:E||"",tollNumbers:h.map(I=>({...I}))}})(this[gn])}isSupportMicrophoneAndShareAudioSimultaneously(){return li()}startVideo(s){return((l,u)=>{const{store:{getState:h,dispatch:v},mediaAgent:E}=l,I=h(),{media:{videoDecodeStatus:R,videoEncodeStatus:N,enforceVirtualBackground:L},video:{isCaptureCameraLoading:V,isCurrentUserStartedVideo:O,isVideoMuted:X}}=I;return O?Promise.reject({type:fn,reason:"Video is started"}):V?Promise.reject({type:fn,reason:"Camera is starting,please wait."}):X&&!bu(I)?Promise.reject({type:fn,reason:"Video is muted by the host"}):!mO(L)||u?.videoElement instanceof HTMLVideoElement?!kp(L)&&null!=u&&u.virtualBackground?Promise.reject({type:Dr,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled."}):(v(wg(!0)),Pa("video",N,R).subscribe(ee=>{let[re]=ee;if(re){const ne=h(),{video:{activeCamera:fe,isSupportHDVideo:ve,virtualBackground:{imageSrc:Le},mask:{imageSrc:Qe}}}=ne,{cameraId:ze=fe,captureWidth:ft=0,captureHeight:lt=0,mirrored:tt,hd:St,virtualBackground:Zt,mask:ut}=u||{};tt&&E.mirrorVideo(tt),St&&(console.log("HD support is currently limited, and comes with a number of restrictions and limitations. Please visit https://developers.zoom.us/docs/video-sdk/web/video/#720p-video for more details"),ve&&tn.isCompatibleHardwareForEncode()?tn.isSupportVideoEncodeHardwareAcceleration().then(ct=>{ct?(E.enableHardwareAccelerationForVideoEncode(!0),v(Dv({encode:ct}))):console.warn("Cannot capture HD video due to hardware limitation")}):console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation"));const Ze=Zt||void 0===Zt&&!!Le&&void 0===ut,_e=ut||void 0===ut&&!!Qe;let He=Promise.resolve({});if(Ze){const ct=Zt||{imageUrl:void 0,cropped:void 0};He=gO({...ct,captureWidth:ft,captureHeight:lt,cameraId:ze,hd:St},E,ne).then(()=>ct)}else if(_e){const ct=ut||{imageUrl:void 0,cropped:void 0,clip:void 0,rootWidth:void 0,rootHeight:void 0};ct.rootWidth||Object.assign(ct,{rootWidth:1280}),ct.rootHeight||Object.assign(ct,{rootHeight:720}),He=_O({...ct,captureWidth:ft,captureHeight:lt,cameraId:ze,hd:St},E,ne).then(()=>ct)}null!=u&&u.mediaFile&&!tn.isSupportMediaPlaybackAsVideoInput()&&(console.warn("Cannot use media file as video input due to the browser limitation."),Object.assign(u,{mediaFile:void 0})),He.then(ct=>{VB(E,ne,u).forEach(st=>{v(st)}),Ze?v(FE(ct)):_e&&v(Tg(ct))}).catch(ct=>{v(wg(!1)),dt(BT,{reason:ct})})}else v(wg(!1))}),Cv(UT.startCaptureVideo).then(()=>{v(LE(!1)),v(oC(!1))}).finally(()=>{v(wg(!1))})):Promise.reject({type:Dr,reason:"You must pass a <video> element to start video capture for Chromium browser, Android browser, and Chrome without SharedArrayBuffer support."})})(this[gn],s)}stopVideo(){return(s=>{const{store:{getState:l},mediaAgent:u}=s,{video:{isCaptureCameraLoading:h,isCurrentUserStartedVideo:v,isUsingMediaPlayback:E}}=l();return h?Promise.reject({type:fn,reason:"Camera is starting,please wait."}):v?(u.stopCaptureVideo(),E&&Dc.getInstance().stopVideoElement(),Jr(wh,I=>!0!==I?.failed)):Promise.reject({type:fn,reason:"camera is closed"})})(this[gn])}switchCamera(s){return((l,u)=>{const{store:{getState:h,dispatch:v},mediaAgent:E}=l,I=h(),{video:{cameraDevicesList:R,isCurrentUserStartedVideo:N,virtualBackground:L,mask:V,mediaPlaybackFile:O,isUsingMediaPlayback:X,customizedVideoOption:ee}}=I;if("string"==typeof u&&!NI(u,R))return Promise.reject({type:Dr,reason:"Cannot find cameraDeviceId in camera devices list."});if(N||null!=L&&L.isVBConfigured||V.isMaskConfigured){if("string"==typeof u){const{captureWidth:re,captureHeight:ne}=NA(ee);E.changeCamera(u,{width:re,height:ne}),v(WE(void 0)),Dc.getInstance().stopVideoElement()}else if(u&&(!X||O?.url!==u.url)){const re=Dc.getInstance();re.setVideoElement(u).then(()=>{E.changeCamera(re.videoElement),v(WE(u))})}return Cv(UT.switchCameraVideo).then(()=>{v(LE(!1)),v(oC(!1))})}return Promise.resolve()})(this[gn],s)}renderVideo(s,l,u,h,v,E,I,R,N){return((L,V,O,X,ee,re,ne,fe,ve,Le)=>{const{store:{getState:Qe,dispatch:ze},mediaAgent:ft,rwgAgent:lt}=L,tt=Qe(),{meeting:{userId:St},media:{enforceMultipleVideos:Zt},video:{subscribedVideoList:ut,renderedVideoList:Ze}}=tt,_e=ov(!!Zt);if(!ut.includes(O)&&ut.length>=_e&&new Set(Ze.map(st=>st.canvasId)).has(V.id))return Promise.reject({type:fn,reason:`subscribe video counts greater than maximum size (${_e})`});if(-1===Xb(tt).findIndex(st=>st.userId===O))return Promise.reject({type:Dr,reason:"user is not send video"});const He=!!Le,{media:{videoDecodeStatus:ct}}=tt;return V.id||(V.id=Fs("__ZOOM_SDK_VIDEO_CANVAS_@__")),Pa("video","success",ct).subscribe(function(){var st=U(function*(Ne){let[Jt]=Ne;if(Jt){const{video:{ensuredCanvas:Ft,maximumNumbeOfHDSubscriptions:yn,isSupportHDVideo:mr,renderedVideoList:tr,receivedVideoMaxQuality:Tr}}=Qe();let gr=V;Ft.includes(V.id)||(gr=qf(V),ze(GE(V.id)));const lr=O===St,Hn=ve||sE;let $r=fe;if(fe===rl.Video_720P)if(mr){const It=tr.filter($t=>$t.videoQuality===rl.Video_720P).map($t=>$t.userId);It.length>=(yn??1)&&(It.includes(O)||lr||(console.warn("Warning: Web Video SDK currently only supports subscribing to one 720p video stream, so quality has been downgraded to 360p"),$r=rl.Video_360P))}else console.warn("Can not subscribe 720P video stream,will downgrade to 360P stream"),$r=rl.Video_360P;const eo=yield(It=U(function*(et,$t){const{video:{prefetchedVideo:Cn}}=$t;return Cn?.userId!==et||Cn.loaded?"":bi(vo(Av,1),ua(1e3).pipe(Hu(""))).toPromise()}),function(et,$t){return It.apply(this,arguments)})(O,Qe());tr.some(It=>It.userId===O&&It.key===Hn&&It.canvasId===gr.id)||ft.renderVideo(gr.id,O,Hn,X,ee,re,ne,$r,lr,Le||"",He);const co=Math.max(Tr,rl.Video_360P),xt=Math.min($r,co);O!==St&&lt.subscribeVideo(O,xt,!1),ut.includes(O)||ze(Bt(O)),eo&&ze(Vl(void 0)),ze(jP({userId:O,key:Hn,canvasId:gr.id,videoQuality:$r}))}var It});return function(Ne){return st.apply(this,arguments)}}()),"failed"===ct?Promise.reject({type:Cp,reason:"Video  decode status is failed"}):Promise.resolve("")})(this[gn],s,l,u,h,v,E,I,R,N)}stopRenderVideo(s,l,u,h){return function(I,R,N,L,V){let O=arguments.length>5&&void 0!==arguments[5]&&arguments[5],X=arguments.length>6?arguments[6]:void 0;const{store:{getState:ee,dispatch:re},mediaAgent:ne,rwgAgent:fe}=I,ve=ee(),{video:{subscribedVideoList:Le,renderedVideoList:Qe},meeting:{userId:ze}}=ve;if(Le.includes(N)){const ft=L||sE;if(Qe.find(lt=>lt.userId===N&&lt.key===ft)&&(ne.stopRenderVideo(R.id,N,ft,Jl(V),O),1==Qe.filter(lt=>lt.userId===N).length&&(N!==ze&&fe.unsubscribeVideo(N),re(_1(N))),re(A1({userId:N,key:ft,canvasId:R.id}))),X){const{video:{subscribedVideoList:lt,prefetchedVideo:tt}}=ee();Xb(ve).find(St=>St.userId===X)&&!lt.includes(X)&&tt?.userId!==X&&re(Vl({userId:X,lastCopy:tt}))}}return Promise.resolve("")}(this[gn],s,l,u,h,arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}updateVideoCanvasDimension(s,l,u){return((h,v,E,I)=>{const{mediaAgent:R}=h;return R.updateRenderedVideoCanvasDimension(v.id,E,I),Promise.resolve("")})(this[gn],s,l,u)}adjustRenderedVideoPosition(s,l,u,h,v,E,I){return((R,N,L,V,O,X,ee,re)=>{const{store:{getState:ne},mediaAgent:fe}=R,{video:{subscribedVideoList:ve}}=ne();return ve.includes(L)?(fe.adjustRenderedVideoPosition(N.id,L,re||sE,X,ee,V,O,Jl("#000")),Promise.resolve("")):Promise.reject({type:Dr,reason:"userId is not correct"})})(this[gn],s,l,u,h,v,E,I)}clearVideoCanvas(s,l){return((u,h,v)=>{const{mediaAgent:E}=u;return E.clearVideoCanvas(h.id,Jl(v)),Promise.resolve("")})(this[gn],s,l)}mirrorVideo(s){return((l,u)=>{const{store:{getState:h},mediaAgent:v}=l,{video:{isCurrentUserStartedVideo:E,virtualBackground:I}}=h();return(E||null!=I&&I.isVBConfigured)&&v.mirrorVideo(u),Promise.resolve("")})(this[gn],s)}enableHardwareAcceleration(s){return((l,u)=>{const{store:{getState:h,dispatch:v},mediaAgent:E}=l,{video:{isSupportHDVideo:I}}=h();if("boolean"==typeof u||void 0!==u.decode){const R="boolean"==typeof u?u:!!u.decode;return R?tn.isSupportVideoDecodeHardwareAcceleration().then(N=>(N&&E.enableHardwareAccelerationForVideoDecode(N),v(Dv({decode:N})),N)):(E.enableHardwareAccelerationForVideoDecode(R),v(Dv({decode:R})),Promise.resolve(!0))}if("boolean"==typeof u||void 0!==u.encode){const R="boolean"==typeof u?u:!!u.encode;if(I){if(!R)return E.enableHardwareAccelerationForVideoEncode(!1),v(Dv({encode:!1})),Promise.resolve(!0);if(tn.isCompatibleHardwareForEncode())return tn.isSupportVideoEncodeHardwareAcceleration().then(N=>(N&&E.enableHardwareAccelerationForVideoEncode(N),v(Dv({encode:N})),N));console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation")}else"boolean"!=typeof u&&null!=u&&u.encode&&console.warn("Can not use the hardware acceleration for video encoding due to the account restriction")}return Promise.resolve(!1)})(this[gn],s)}subscribeVideoStatisticData(s){return(l=U(function*(u,h){const{mediaAgent:v,store:{getState:E}}=u,{media:{videoDecodeStatus:I,videoEncodeStatus:R}}=E(),N=!h||h.decode,L=!h||h.encode;return Pa("video",R,I).subscribe(V=>{let[O,X]=V;N&&X&&v.subscribeToQos([Yc.VideoDecode],kf),L&&O&&v.subscribeToQos([Yc.VideoEncode],kf),null!=h&&h.detailed&&X&&v.enableVideoObserver(!0)}),null}),function(u,h){return l.apply(this,arguments)})(this[gn],s);var l}unsubscribeVideoStatisticData(s){return(l=U(function*(u,h){const{mediaAgent:v,store:{dispatch:E}}=u,R=!h||h.encode;return(!h||h.decode)&&(v.unsubscribeFromQos([Yc.VideoDecode]),E(UE(Pf))),R&&(v.unsubscribeFromQos([Yc.VideoEncode]),E(ka(Pf))),null!=h&&h.detailed&&v.enableVideoObserver(!1),null}),function(u,h){return l.apply(this,arguments)})(this[gn],s);var l}previewVirtualBackground(s,l,u){return((h,v,E,I)=>{const{store:{getState:R,dispatch:N},mediaAgent:L}=h,V=R();return gO({imageUrl:E,cropped:I},L,V,v).then(O=>("object"==typeof O&&null!=O&&O.type&&N(O),N(FE({imageUrl:E,cropped:I})),!0)).catch(O=>Promise.reject({type:fn,reason:O}))})(this[gn],s,l,u)}updateVirtualBackgroundImage(s,l){return((u,h,v)=>{const{store:{getState:E,dispatch:I},mediaAgent:R}=u,N=E(),{video:{virtualBackground:{imageSrc:L,cropped:V},backgroundMode:O}}=N;return h===L&&v===V?Promise.resolve(!0):O===il.Mask?Promise.reject({type:fn,reason:"Cannot update virtual background in the mask mode"}):gO({imageUrl:h,cropped:v},R,N).then(X=>("object"==typeof X&&null!=X&&X.type&&I(X),I(FE({imageUrl:h,cropped:v})),!0)).catch(X=>Promise.reject({type:fn,reason:X}))})(this[gn],s,l)}stopPreviewVirtualBackground(){return(s=>{const{store:{getState:l},mediaAgent:u}=s,{video:{virtualBackground:{isVBConfigured:h}}}=l();return h?(u.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:fn,reason:"Cannot stop preview virtual background before start"})})(this[gn])}previewVideoMask(s,l){return((u,h,v)=>{const{store:{getState:E,dispatch:I},mediaAgent:R}=u,N=E();return v.rootWidth&&v.rootHeight||Object.assign(v,{rootWidth:h.width,rootHeight:h.height}),_O(v,R,N,h).then(L=>("object"==typeof L&&null!=L&&L.type&&I(L),I(Tg(v)),!0)).catch(L=>Promise.reject({type:fn,reason:L}))})(this[gn],s,l)}updateVideoMask(s){return((l,u)=>{const{store:{getState:h,dispatch:v},mediaAgent:E}=l,I=h(),{video:{mask:R,backgroundMode:N}}=I,{isMaskConfigured:L}=R;if(N===il.VirtualBackground)return Promise.reject({type:fn,reason:"Cannot update mask in the virtual background mode"});if(L){const V={...u};return["imageUrl","cropped","clip","rootHeight","rootWidth"].forEach(O=>{void 0===u?.[O]&&Object.assign(V,"imageUrl"===O?{imageUrl:R.imageSrc}:{[`${O}`]:R[O]})}),_O(V,E,I).then(O=>("object"==typeof O&&null!=O&&O.type&&v(O),v(Tg(V)),!0)).catch(O=>Promise.reject({type:fn,reason:O}))}return Promise.reject({type:fn,reason:"Cannot update mask"})})(this[gn],s)}stopPreviewVideoMask(){return(s=>{const{store:{getState:l},mediaAgent:u}=s,{video:{mask:{isMaskConfigured:h}}}=l();return h?(u.stopMaskSetting(),Promise.resolve(!0)):Promise.reject({type:fn,reason:"Cannot stop preview mask before start"})})(this[gn])}requestFarEndCameraControl(s){return((l,u)=>{const{store:{getState:h},rwgAgent:v}=l,E=h(),{meeting:{userId:I},video:{farEndCameraControlStatus:{controlledUserList:R}}}=E;return I===u?Promise.reject({type:fn,reason:'Using "stream.controlCamera" method to control self camera'}):-1!==yo(E).findIndex(N=>N.userId===u)?(R.includes(u)||v.sendFarEndCameraControl(Ra.Request,u),Promise.resolve("")):Promise.reject({type:Dr,reason:"Cannot request control camera with video off"})})(this[gn],s)}approveFarEndCameraControl(s){return((l,u)=>{const{store:{getState:h,dispatch:v},rwgAgent:E}=l,{video:{currentCameraControlStatus:{isRequested:I,isInControl:R,controllingUserId:N},ptz:L,activeCamera:V}}=h();if(I){if(R&&(!N||u===N))return Promise.resolve("");E.sendFarEndCameraControl(Ra.Approve,u);const O=L?.[V];return void 0!==O&&E.sendCameraAblity({pan:!!O.pan,tilt:!!O.tilt,zoom:!!O.zoom}),v(kv(!1)),v(jE({isInControl:!0,userId:u})),dt(Ec,{isControlled:!0,userId:u}),Promise.resolve("")}return Promise.reject({type:fn,reason:"Cannot approve before request"})})(this[gn],s)}declineFarEndCameraControl(s){return((l,u)=>{const{store:{getState:h,dispatch:v},rwgAgent:E}=l,{video:{currentCameraControlStatus:{isInControl:I,isRequested:R}}}=h();return R||I?(E.sendFarEndCameraControl(Ra.Decline,u),v(kv(!1)),v(jE({isInControl:!1,userId:0})),dt(Ec,{isControlled:!1}),Promise.resolve("")):Promise.reject({type:fn,reason:"Cannot decline before request"})})(this[gn],s)}giveUpFarEndCameraControl(s){return((l,u)=>{const{store:{getState:h,dispatch:v},rwgAgent:E}=l,{video:{farEndCameraControlStatus:{controlledUserList:I}}}=h();return I.includes(u)?(E.sendFarEndCameraControl(Ra.GiveUp,u),v(uC(u)),Promise.resolve("")):Promise.reject({type:fn,reason:"Cannot give up control befire aquired"})})(this[gn],s)}controlCamera(s){return((l,u)=>{const{store:{getState:h,dispatch:v},mediaAgent:E}=l,{video:{isCurrentUserStartedVideo:I,ptz:R,activeCamera:N}}=h();if(I){const{cmd:L,range:V,reset:O}=u,X=R[N];if(X){const ee=fO(X)||{},{key:re,range:ne}=QB(L,V);if(X[re])return Object.assign(ee,{[re]:O?0:jB(X[re].capability,X[re].value,ne)}),E.movePTZCamera(ee).then(()=>{v(dC({constraints:ee,deviceId:N}))}).catch(fe=>Promise.reject({type:fn,reason:fe}))}return Promise.resolve("")}return Promise.reject({type:fn,reason:"Cannot control the camera before it's started"})})(this[gn],s)}controlFarEndCamera(s){return((l,u)=>{const{store:{getState:h,dispatch:v},rwgAgent:E}=l,I=h(),{video:{farEndCameraControlStatus:{controlledUserList:R,isControlling:N}}}=I,{userId:L,cmd:V,range:O}=u;if(N)return Promise.reject({type:fn,reason:"Cannot send new command while the previous control is not done"});if(R.includes(L)){if(V===mg.SwitchCamera)return E.sendFarEndCameraControl(Ra.SwitchCamera,L,mg.SwitchCamera),Promise.resolve("");{const ee=yo(I).find(re=>re.userId===L);if(null==ee||!ee.nFECC)return Promise.reject({type:fn,reason:"The far end camera does not support PTZ"});if(O&&O>0){const re=O/100*1e4;return E.sendFarEndCameraControl(Ra.StartControl,L,V),v(QE(!0)),V_(200).pipe((X=ua(re-100),function(ne){return ne.lift(new zS(X))})).subscribe(()=>{E.sendFarEndCameraControl(Ra.ContinueControl,L,V)}),ua(re).pipe(Zn(()=>{E.sendFarEndCameraControl(Ra.StopControl,L,V),v(QE(!1))})).toPromise().then(()=>"")}return Promise.reject({type:Dr,reason:"Range cannot be negative or 0"})}}return Promise.reject({type:fn,reason:"Cannot control before request granted"});var X})(this[gn],s)}isCapturingVideo(){return(s=>{const{store:{getState:l}}=s,u=l();return!!u.video&&u.video.isCurrentUserStartedVideo})(this[gn])}isCameraTaken(){return(s=>{const{store:{getState:l}}=s,u=l();return!!u.video&&u.video.isCameraTaken})(this[gn])}isCaptureForbidden(){return(s=>{const{store:{getState:l}}=s,u=l();return!!u.video&&u.video.isCaptureForbidden})(this[gn])}getCameraList(){return(s=>{const{store:{getState:l}}=s,u=l();if(!u.video)return[];const{video:{cameraDevicesList:h}}=u;return h.map(v=>Object.assign({},v))})(this[gn])}getActiveCamera(){return(s=>{const{store:{getState:l}}=s,u=l();return u.video?u.video.activeCamera:""})(this[gn])}getActiveVideoId(){return(s=>{const{store:{getState:l}}=s,u=l();return u.video?u.video.activeVideoId:0})(this[gn])}getVideoMaxQuality(){return(s=>{const{store:{getState:l}}=s,u=l();return u.video?u.video.receivedVideoMaxQuality:rl.Video_90P})(this[gn])}getReceivedVideoDimension(){return(s=>{const{store:{getState:l}}=s,u=l();return u.video?u.video.receivedVideoDimension:null})(this[gn])}getCapturedVideoResolution(){return(s=>{const{store:{getState:l}}=s;return{...l().video.capturedVideoDimension}})(this[gn])}isSupportMultipleVideos(){return sg()}isSupportHDVideo(){return(s=>{var l;const{store:{getState:u}}=s;return null===(l=u().video)||void 0===l?void 0:l.isSupportHDVideo})(this[gn])}getHardwareAccelerationStatus(){return(s=>{var l;const{store:{getState:u}}=s;return null===(l=u().video)||void 0===l?void 0:l.hardwareAcceleration})(this[gn])}getVideoStatisticData(){return(s=>{let{store:{getState:l}}=s;const{video:{statistic:u}}=l();return{...u}})(this[gn])}isSupportVirtualBackground(){return(s=>{const{store:{getState:l}}=s;return kp(l().media.enforceVirtualBackground)})(this[gn])}getVirtualbackgroundStatus(){return(s=>{const{store:{getState:l}}=s;return{...l().video.virtualBackground}})(this[gn])}isRenderSelfViewWithVideoElement(){return mO(this[Cs].getState().media.enforceVirtualBackground)}getNetworkQuality(s){return((l,u)=>{var h;const{store:{getState:v}}=l,E=v(),{video:I,meeting:{userId:R}}=E,L=null==I||null===(h=I.networkQuality)||void 0===h?void 0:h[`${u??R}`];if(L){const V={};return L.uplink&&Object.assign(V,{uplink:L.uplink.level}),L.downlink&&Object.assign(V,{downlink:L.downlink.level}),V}return null})(this[gn],s)}getFarEndCameraPTZCapability(s){return((l,u)=>{const{store:{getState:h}}=l,v=yo(h()).find(E=>E.userId===u);return void 0!==v?.nFECC?jb(v?.nFECC):{pan:!1,tilt:!1,zoom:!1}})(this[gn],s)}getCameraPTZCapability(s){return((l,u)=>{const{store:{getState:h}}=l,{video:{ptz:v,activeCamera:E}}=h(),I=v[u??E];return{pan:!(null==I||!I.pan),tilt:!(null==I||!I.tilt),zoom:!(null==I||!I.zoom)}})(this[gn],s)}isBrowserSupportPTZ(){const{pan:s,tilt:l,zoom:u}=tn.getPTZCapability();return s||l||u}startShareView(s,l,u){return((h,v,E,I)=>{const{store:{getState:R,dispatch:N},mediaAgent:L,rwgAgent:V}=h,{share:{isReceiveSharing:O,isRemoteSharingActive:X,activeNodeId:ee,activeSsrc:re,status:ne,renderedEnsuredCanvas:fe,isReceiveSharingFromMainSession:ve},media:{sharingDecodeStatus:Le}}=R();if(!v||E!==ee)return Promise.reject({type:Dr,reason:""});if(!X||O||ne!==Zi.End)return Promise.reject({type:fn,reason:""});v.id||(v.id=Fs("__ZOOM_SDK_SHARE_CANVAS_@__"));const Qe=!!I;return Pa("sharing","success",Le).subscribe(ze=>{let[,ft]=ze;if(ft){let lt=v;fe.includes(v.id)||(lt=qf(v),N(p1(v.id))),N(Iu(!0)),Ql(V,R(),E),L.renderSharing(re,lt,Qe,I,ve);const{audio:tt}=R();if(null!=tt&&tt.localShareAudioUserMutedList){const St=tt.localShareAudioUserMutedList.find(Zt=>Zt.userId===E);St&&L.setSharingAudioVolume(E,St.muted,St.isFromMainSession)}}}),"failed"===Le?Promise.reject({type:Cp,reason:""}):Jr(bv,ze=>!!ze,6e4)})(this[gn],s,l,u)}stopShareView(){return(s=>{const{store:{dispatch:l,getState:u},rwgAgent:h,mediaAgent:v}=s,{share:{isReceiveSharing:E,activeNodeId:I},breakoutRoom:R}=u();if(!E)return Promise.resolve("");let N=!1;return R?.currentRoom.status===rr.InRoom&&R.mainSessionAttendeeList.length>0&&(N=R.mainSessionAttendeeList.findIndex(L=>L.userId===I)>-1),v.stopRenderSharing(),h.unsubscribeSharing(I,N),l(Iu(!1)),Promise.resolve("")})(this[gn])}switchShareView(s){return((l,u)=>{const{store:{getState:h,dispatch:v},rwgAgent:E,mediaAgent:I}=l,R=h(),{share:{isReceiveSharing:N,activeNodeId:L,isRemoteControlApproved:V,isGrabRemoteControl:O,isReceiveSharingFromMainSession:X},audio:ee,breakoutRoom:re}=R;if(!N)return Promise.reject({type:fn});if(u===L)return Promise.resolve("");let ne=[];return ne=X?re.mainSessionAttendeeList.filter(fe=>fe.bShareToBORooms&&fe.sharerOn):Hv(R),ne.findIndex(fe=>fe.userId===L)>-1?(V&&(O&&E.subscribeGrabRemoteControl(L,!1),E.sharingRequestRemoteControl(L,!1)),E.unsubscribeSharing(L,X),Ql(E,h(),u),I.switchSharingSource(u,X),ee?.localShareAudioUserMutedList.forEach(fe=>{I.setSharingAudioVolume(u,fe.userId!==u||fe.muted,fe.isFromMainSession)}),v(Rv({bStatus:1,activeNodeID:u,ssrc:u})),Promise.resolve("")):Promise.reject({type:Dr,reason:"no matching user id"})})(this[gn],s)}updateSharingCanvasDimension(s,l){return((u,h,v)=>{const{store:{getState:E},mediaAgent:I}=u,R=E(),{share:{isReceiveSharing:N}}=R;return N&&I.updateRenderedSharingDimension(h,v),Promise.resolve("")})(this[gn],s,l)}startShareScreen(s,l){return((u,h,v)=>{var E;const{store:{getState:I,dispatch:R},mediaAgent:N}=u,L=I(),{meeting:{bIbDisableShare:V,meetingOptions:O},share:{sharePrivilege:X,ssrc:ee,isChromeExtensionInstalled:re,capturedEnsuredCanvas:ne,isReceiveSharingFromMainSession:fe},media:{sharingEncodeStatus:ve},breakoutRoom:Le}=L;if(V)return Promise.reject({type:fn,reason:"information barrier"});if("function"!=typeof(null===(E=navigator.mediaDevices)||void 0===E?void 0:E.getDisplayMedia))return Promise.reject({type:fn,reason:"Unable to share your screen due to the technical limitation"});if(fe)return Promise.reject({type:fn,reason:"Unable to share your screen while someone is sharing from the main session"});var Qe;if(iv()){if(!(h instanceof HTMLVideoElement))return Promise.reject({type:Dr,reason:"Use Video element instead of Canvas element when WebCodecs enabled"})}else if(!(h instanceof HTMLCanvasElement))return Promise.reject({type:Dr,reason:`Expected to accept HTMLCanvasElement, but actual it is ${"object"==typeof h&&null!==h?null===(Qe=Object.getPrototypeOf(h))||void 0===Qe?void 0:Qe.constructor.name:h}`});const ze=bu(L);if(null!=v&&v.broadcastToBreakoutRoom){if(!ze||Le?.currentRoom.status===rr.InRoom)return Promise.reject(ze?{type:fn,reason:"Unable to share screen to breakout room when in the room"}:{type:na});R(ME(!0))}else R(ME(!1));void 0!==v?.requestReadReceipt&&R(jL(v?.requestReadReceipt)),void 0!==v?.optimizedForSharedVideo&&X!==Ss.MultipleShare&&R(NE(v?.optimizedForSharedVideo&&tn.isSupportVideoShareSend()));const ft=Hv(L);if(X===Ss.OnlyHost&&!ze)return Promise.reject({type:na,reason:"only host can start screen share"});if(X===Ss.HostGrab&&!ze&&ft.length>0)return Promise.reject({type:na,reason:"only host can grab screen share"});if(!0===Cr(L)?.sharerOn)return Promise.reject({type:fn,reason:"you have already started screen share."});let tt=$n(!0);return Sf()&&"function"!=typeof(null===(St=navigator.mediaDevices)||void 0===St?void 0:St.getDisplayMedia)&&!re&&(N.checkChromeSharingExtension(),tt=vo(eu,1)),h.id||(h.id=Fs("__ZOOM_SDK_SELF_SHARE_CANVAS_@__")),HS([Pa("sharing",ve,"success"),tt]).subscribe(St=>{let[Zt,ut]=St;const[Ze]=Zt;if(Ze&&ut){ne.includes(h.id)||(qf(h),R(BP(h.id)));let _e=document.querySelector(`#${NT}`);_e&&"VIDEO"===_e.tagName||(_e=document.createElement("video"),_e.id=NT,_e.style.display="none",document.body.appendChild(_e));const He=null!=v&&v.secondaryCameraId?{cameraId:v.secondaryCameraId,width:v.captureWidth,height:v.captureHeight}:void 0,ct=!(null!=v&&v.hideShareAudioOption);N.startDesktopSharing(ee,h.id,NT,He,null!=O&&O.isDisableShareAudioIntoBo?ct&&!(null!=v&&v.broadcastToBreakoutRoom):ct,v?.displaySurface,v?.sourceId),R(l1(!!He))}}),new Promise((St,Zt)=>{bi(vo(Zu).pipe(ln(ut=>void 0!==ut.sharerOn),ti(1)),vo(eu).pipe(ln(ut=>!ut),ti(1),Pr(Mi({reason:"required extension",extensionUrl:"https://chrome.google.com/webstore/detail/zoom-scheduler/kgjfgplpablkjnlkjmjdecgdpfankdle"}))),vo(Oh,1).pipe(Pn(ut=>Mi({reason:ut.reason||"user deny screen share"})))).subscribe(ut=>{if(!0===ut.sharerOn){const{share:{isSharingToBreakoutRoom:Ze},meeting:{meetingOptions:_e}}=I();N.enableShareAudioToBreakoutRoom(!(null!=_e&&_e.isDisableShareAudioIntoBo||!Ze)),St("")}else Zt({type:Cp})},ut=>{Zt({type:fn,...ut})})});var St})(this[gn],s,l)}stopShareScreen(){return(s=>{const{store:{getState:l,dispatch:u},rwgAgent:h,mediaAgent:v}=s,{share:{status:E},meeting:{userId:I}}=l();return E===Zi.End?Promise.resolve(""):(u(Tp(Zi.End)),h.stopSharing(I),v.stopDesktopSharing(),Jr(Zu,R=>!1===R.sharerOn))})(this[gn])}pauseShareScreen(){return(s=>{const{store:{getState:l,dispatch:u},rwgAgent:h,mediaAgent:v}=s,{share:{status:E}}=l();return E===Zi.Sharing?(h.pauseSharing(),v.pauseDesktopSharing(),Jr(Zu,I=>!0===I.sharerPause).then(()=>(u(Tp(Zi.Paused)),""))):Promise.reject({type:fn})})(this[gn])}resumeShareScreen(){return(s=>{const{store:{getState:l,dispatch:u},rwgAgent:h,mediaAgent:v}=s,{share:{status:E}}=l();return E===Zi.Paused?(h.resumeSharing(),v.resumeDesktopSharing(),Jr(Zu,I=>!0===I.sharerOn&&!1===I.sharerPause).then(()=>(u(Tp(Zi.Sharing)),""))):Promise.reject({type:fn})})(this[gn])}setSharePrivilege(s){return Ps(this[gn],s)}lockShare(s){return Ps(this[gn],s?Ss.OnlyHost:Ss.HostGrab)}shareToBreakoutRoom(){return(s=>{const{store:{getState:l,dispatch:u},rwgAgent:h,mediaAgent:v}=s,{meeting:{userId:E},breakoutRoom:I,share:{isSharingToBreakoutRoom:R,status:N}}=l();return N===Zi.End?Promise.reject({type:fn,reason:"Invalid sharing status"}):R?Promise.resolve(""):I.currentRoom.status===rr.InRoom?Promise.reject({type:fn,reason:"Unable to share screen to breakout room when in the room"}):(h.startShareToBreakoutRoom(E),u(ME(!0)),v.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[gn])}stopShareToBreakoutRoom(){return(s=>{const{store:{getState:l,dispatch:u},rwgAgent:h,mediaAgent:v}=s,{meeting:{userId:E},share:{isSharingToBreakoutRoom:I}}=l();return I&&(h.stopShareToBreakoutRoom(E),u(ME(!1)),v.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[gn])}muteOthersScreenShare(s){return((l,u)=>{const{store:{getState:h},rwgAgent:v}=l,E=h(),{meeting:{userId:I}}=E,R=Hv(E);return u===I?Promise.reject({type:fn,reason:"Cannot mute self share, use 'stopScreenShare' instead"}):-1===R.findIndex(N=>N.userId===u)?Promise.reject({type:Dr,reason:"Target user is not sharing"}):(v.stopSharing(u),Jr(Dd,N=>N.some(L=>L.userId===u&&!1===L.sharerOn)))})(this[gn],s)}enableOptimizeForSharedVideo(s){return((l,u)=>{const{store:{getState:h,dispatch:v},mediaAgent:E,rwgAgent:I}=l,{share:{status:R,isOptimizedForSharedVideo:N,isSharingToBreakoutRoom:L,sharePrivilege:V},audio:{isSharingAudio:O},meeting:{userId:X}}=h();return R!==Zi.End?N===u?Promise.resolve(""):V!==Ss.MultipleShare?u&&!tn.isSupportVideoShareSend()?Promise.reject({type:fn,reason:"Cannot enable optimize for shared video due to the platform is not supported "}):(I.startSharing(X,{bShareAudio:O,bShareToBO:L,bShareVideo:u}),E.switchSharingMode(u?cE.VideoMode:cE.Normal),Jr({event:Zu,operations:[ln(ee=>void 0!==ee.bVideoShare),ti(1)]},ee=>ee.bVideoShare===u).then(()=>(v(NE(u)),""))):Promise.reject({type:fn,reason:"Cannot enable optimize for shared video when enabling multiple screen shares"}):Promise.reject({type:fn,reason:"Cannot enable optimize for shared video when screen share is not started"})})(this[gn],s)}updateSharedVideoQuality(s){return((l,u)=>{const{store:{getState:h,dispatch:v},rwgAgent:E}=l,I=h(),{share:{shareQuality:R,activeNodeId:N,isReceiveSharing:L}}=I,V=H1(I);return L&&0!==N?(V&&R!==u&&(Ql(E,I,N,u),v(c1(u))),Promise.resolve("")):Promise.reject({type:fn,reason:"Cannot update shared video quality when screen share is not started"})})(this[gn],s)}subscribeShareStatisticData(s){return(l=U(function*(u,h){const{mediaAgent:v,store:{getState:E}}=u,I=E(),{media:{sharingEncodeStatus:R,sharingDecodeStatus:N}}=E(),L=Cr(I),V=!h||h.decode,O=!h||h.encode;if(!L)return Promise.reject({type:fn,reason:"Call this function after the 'join' method resolved."});{const X=Da(L.userRole)?"success":R;Pa("sharing",X,N).subscribe(ee=>{let[re,ne]=ee;re&&ne&&(V&&v.subscribeToQos([Yc.SharingDecode],kf),O&&v.subscribeToQos([Yc.SharingEncode],kf))})}return""}),function(u,h){return l.apply(this,arguments)})(this[gn],s);var l}unsubscribeShareStatisticData(s){return(l=U(function*(u,h){const{mediaAgent:v,store:{dispatch:E}}=u,R=!h||h.encode;return(!h||h.decode)&&(v.unsubscribeFromQos([Yc.SharingDecode]),E(Ov(Pf))),R&&(v.unsubscribeFromQos([Yc.SharingEncode]),E(Ov(Pf))),null}),function(u,h){return l.apply(this,arguments)})(this[gn],s);var l}getShareUserList(){return(s=>{const{store:{getState:l}}=s,u=l();if(!u.share)return[];const{share:{isReceiveSharingFromMainSession:h}}=u;if(h){const{breakoutRoom:{mainSessionAttendeeList:v}}=u;return v.filter(E=>E.bShareToBORooms&&(E.sharerOn||E.sharerPause)).map(E=>jA(E))}return Hv(u).map(v=>jA(v))})(this[gn])}getActiveShareUserId(){return(s=>{const{store:{getState:l}}=s,u=l();return u.share&&u.share.isRemoteSharingActive?u.share.activeNodeId:0})(this[gn])}isReceiveSharing(){return(s=>{const{store:{getState:l}}=s,u=l();return!!u.share&&u.share.isReceiveSharing})(this[gn])}getShareViewDimension(){return(s=>{const{store:{getState:l}}=s,u=l();if(u.share){if(u.share.status!==Zi.End)return{...u.share.shareDimension};{const{share:{receivedShareDimension:h}}=u;return{width:h.width,height:h.height}}}return null})(this[gn])}getShareStatus(){return(s=>{const{store:{getState:l}}=s,u=l();return u.share?u.share.status:null})(this[gn])}isShareLocked(){return(s=>{const{store:{getState:l}}=s,u=l();return!!u.share&&u.share.sharePrivilege===Ss.OnlyHost})(this[gn])}isReceiveSharingFromMainSession(){return(s=>{const{store:{getState:l}}=s,u=l();return!!u.share&&u.share.isReceiveSharingFromMainSession})(this[gn])}getSharePrivilege(){return(s=>{const{store:{getState:l}}=s,u=l();return u.share?u.share.sharePrivilege:null})(this[gn])}isStartShareScreenWithVideoElement(){return iv()}isOptimizeForSharedVideoEnabled(){return(s=>{const{store:{getState:l}}=s,u=l();return!!u.share&&u.share.isOptimizedForSharedVideo})(this[gn])}isSupportOptimizedForSharedVideo(){return tn.isSupportVideoShareSend()}getShareStatisticData(){return(s=>{let{store:{getState:l}}=s;const{share:{statistic:u}}=l();return{...u}})(this[gn])}},wn(kt.prototype,"startAudio",[Tn,PO,rp],Object.getOwnPropertyDescriptor(kt.prototype,"startAudio"),kt.prototype),wn(kt.prototype,"stopAudio",[Tn,KA,rp],Object.getOwnPropertyDescriptor(kt.prototype,"stopAudio"),kt.prototype),wn(kt.prototype,"muteAudio",[Tn,xr,rp],Object.getOwnPropertyDescriptor(kt.prototype,"muteAudio"),kt.prototype),wn(kt.prototype,"unmuteAudio",[Tn,zA,rp],Object.getOwnPropertyDescriptor(kt.prototype,"unmuteAudio"),kt.prototype),wn(kt.prototype,"dialOut",[Tn,Zb,zI],Object.getOwnPropertyDescriptor(kt.prototype,"dialOut"),kt.prototype),wn(kt.prototype,"cancelDialOut",[Tn,YA,oa],Object.getOwnPropertyDescriptor(kt.prototype,"cancelDialOut"),kt.prototype),wn(kt.prototype,"hangup",[Tn,YI,rp],Object.getOwnPropertyDescriptor(kt.prototype,"hangup"),kt.prototype),wn(kt.prototype,"switchMicrophone",[Tn,MO,rp],Object.getOwnPropertyDescriptor(kt.prototype,"switchMicrophone"),kt.prototype),wn(kt.prototype,"switchSpeaker",[Tn,qI,rp],Object.getOwnPropertyDescriptor(kt.prototype,"switchSpeaker"),kt.prototype),wn(kt.prototype,"muteShareAudio",[Tn,JI,NO,rp],Object.getOwnPropertyDescriptor(kt.prototype,"muteShareAudio"),kt.prototype),wn(kt.prototype,"unmuteShareAudio",[Tn,xO,j2,rp],Object.getOwnPropertyDescriptor(kt.prototype,"unmuteShareAudio"),kt.prototype),wn(kt.prototype,"subscribeAudioStatisticData",[Tn,p_],Object.getOwnPropertyDescriptor(kt.prototype,"subscribeAudioStatisticData"),kt.prototype),wn(kt.prototype,"unsubscribeAudioStatisticData",[Tn,Q2],Object.getOwnPropertyDescriptor(kt.prototype,"unsubscribeAudioStatisticData"),kt.prototype),wn(kt.prototype,"enableBackgroundNoiseSuppression",[Tn,$I],Object.getOwnPropertyDescriptor(kt.prototype,"enableBackgroundNoiseSuppression"),kt.prototype),wn(kt.prototype,"enableSyncButtonsOnHeadset",[Tn,qA],Object.getOwnPropertyDescriptor(kt.prototype,"enableSyncButtonsOnHeadset"),kt.prototype),wn(kt.prototype,"startVideo",[Tn,JA,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"startVideo"),kt.prototype),wn(kt.prototype,"stopVideo",[Tn,LO,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"stopVideo"),kt.prototype),wn(kt.prototype,"switchCamera",[Tn,H2,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"switchCamera"),kt.prototype),wn(kt.prototype,"renderVideo",[oS,Tn,eS,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"renderVideo"),kt.prototype),wn(kt.prototype,"stopRenderVideo",[f_,Tn,XI,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"stopRenderVideo"),kt.prototype),wn(kt.prototype,"updateVideoCanvasDimension",[f_,Tn,BO,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"updateVideoCanvasDimension"),kt.prototype),wn(kt.prototype,"adjustRenderedVideoPosition",[f_,Tn,$A,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"adjustRenderedVideoPosition"),kt.prototype),wn(kt.prototype,"clearVideoCanvas",[f_,Tn,FO,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"clearVideoCanvas"),kt.prototype),wn(kt.prototype,"mirrorVideo",[Tn,UO,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"mirrorVideo"),kt.prototype),wn(kt.prototype,"enableHardwareAcceleration",[Tn,VO,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"enableHardwareAcceleration"),kt.prototype),wn(kt.prototype,"subscribeVideoStatisticData",[Tn,tS],Object.getOwnPropertyDescriptor(kt.prototype,"subscribeVideoStatisticData"),kt.prototype),wn(kt.prototype,"unsubscribeVideoStatisticData",[Tn,jO],Object.getOwnPropertyDescriptor(kt.prototype,"unsubscribeVideoStatisticData"),kt.prototype),wn(kt.prototype,"previewVirtualBackground",[oS,Tn,QO,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"previewVirtualBackground"),kt.prototype),wn(kt.prototype,"updateVirtualBackgroundImage",[Tn,HO,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"updateVirtualBackgroundImage"),kt.prototype),wn(kt.prototype,"stopPreviewVirtualBackground",[Tn,nS,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"stopPreviewVirtualBackground"),kt.prototype),wn(kt.prototype,"previewVideoMask",[oS,Tn,rS,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"previewVideoMask"),kt.prototype),wn(kt.prototype,"updateVideoMask",[Tn,ZI,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"updateVideoMask"),kt.prototype),wn(kt.prototype,"stopPreviewVideoMask",[Tn,GO,Ms],Object.getOwnPropertyDescriptor(kt.prototype,"stopPreviewVideoMask"),kt.prototype),wn(kt.prototype,"requestFarEndCameraControl",[Tn,G2],Object.getOwnPropertyDescriptor(kt.prototype,"requestFarEndCameraControl"),kt.prototype),wn(kt.prototype,"approveFarEndCameraControl",[Tn,ew],Object.getOwnPropertyDescriptor(kt.prototype,"approveFarEndCameraControl"),kt.prototype),wn(kt.prototype,"declineFarEndCameraControl",[Tn,iS],Object.getOwnPropertyDescriptor(kt.prototype,"declineFarEndCameraControl"),kt.prototype),wn(kt.prototype,"giveUpFarEndCameraControl",[Tn,WO],Object.getOwnPropertyDescriptor(kt.prototype,"giveUpFarEndCameraControl"),kt.prototype),wn(kt.prototype,"controlCamera",[Tn,tw],Object.getOwnPropertyDescriptor(kt.prototype,"controlCamera"),kt.prototype),wn(kt.prototype,"controlFarEndCamera",[Tn,nw],Object.getOwnPropertyDescriptor(kt.prototype,"controlFarEndCamera"),kt.prototype),wn(kt.prototype,"startShareView",[oS,Tn,KO,vm],Object.getOwnPropertyDescriptor(kt.prototype,"startShareView"),kt.prototype),wn(kt.prototype,"stopShareView",[Tn,rw,vm],Object.getOwnPropertyDescriptor(kt.prototype,"stopShareView"),kt.prototype),wn(kt.prototype,"switchShareView",[Tn,zO,vm],Object.getOwnPropertyDescriptor(kt.prototype,"switchShareView"),kt.prototype),wn(kt.prototype,"updateSharingCanvasDimension",[Tn,W2,vm],Object.getOwnPropertyDescriptor(kt.prototype,"updateSharingCanvasDimension"),kt.prototype),wn(kt.prototype,"startShareScreen",[Tn,h_,vm],Object.getOwnPropertyDescriptor(kt.prototype,"startShareScreen"),kt.prototype),wn(kt.prototype,"stopShareScreen",[Tn,YO,vm],Object.getOwnPropertyDescriptor(kt.prototype,"stopShareScreen"),kt.prototype),wn(kt.prototype,"pauseShareScreen",[Tn,XA,vm],Object.getOwnPropertyDescriptor(kt.prototype,"pauseShareScreen"),kt.prototype),wn(kt.prototype,"resumeShareScreen",[Tn,iw,vm],Object.getOwnPropertyDescriptor(kt.prototype,"resumeShareScreen"),kt.prototype),wn(kt.prototype,"setSharePrivilege",[np,ZA,Tn],Object.getOwnPropertyDescriptor(kt.prototype,"setSharePrivilege"),kt.prototype),wn(kt.prototype,"lockShare",[np,ey,Tn],Object.getOwnPropertyDescriptor(kt.prototype,"lockShare"),kt.prototype),wn(kt.prototype,"shareToBreakoutRoom",[Tn,np,qO],Object.getOwnPropertyDescriptor(kt.prototype,"shareToBreakoutRoom"),kt.prototype),wn(kt.prototype,"stopShareToBreakoutRoom",[Tn,np,eF],Object.getOwnPropertyDescriptor(kt.prototype,"stopShareToBreakoutRoom"),kt.prototype),wn(kt.prototype,"muteOthersScreenShare",[Tn,np,JO],Object.getOwnPropertyDescriptor(kt.prototype,"muteOthersScreenShare"),kt.prototype),wn(kt.prototype,"enableOptimizeForSharedVideo",[Tn,$O],Object.getOwnPropertyDescriptor(kt.prototype,"enableOptimizeForSharedVideo"),kt.prototype),wn(kt.prototype,"updateSharedVideoQuality",[Tn,K2],Object.getOwnPropertyDescriptor(kt.prototype,"updateSharedVideoQuality"),kt.prototype),wn(kt.prototype,"subscribeShareStatisticData",[Tn,ow],Object.getOwnPropertyDescriptor(kt.prototype,"subscribeShareStatisticData"),kt.prototype),wn(kt.prototype,"unsubscribeShareStatisticData",[Tn,tF],Object.getOwnPropertyDescriptor(kt.prototype,"unsubscribeShareStatisticData"),kt.prototype),kt);var ty,ny,aw,cw,sS,z2,Ei;const oi=u_("Audio"),XO=u_("Sharing");let ZO=(ty=ir("share"),ny=ir("audio"),aw=ir("audio"),cw=ir("audio"),sS=ir("audio"),z2=ir("audio"),wn((Ei=class extends sw{switchSharingSecondaryCamera(s){return((l,u)=>{const{store:{getState:h,dispatch:v},mediaAgent:E}=l,I=h(),{video:{cameraDevicesList:R},share:{status:N,isSharingWithSecondCamera:L}}=I;return"default"!==u&&-1===R.map(V=>V.deviceId).indexOf(u)?Promise.reject({type:Dr,reason:"Cannot find cameraDeviceId in camera devices list."}):(N===Zi.Sharing&&L&&E.changeSharingSecondCamera(u),v(d1(u)),Promise.resolve())})(this[gn],s)}muteUserAudioLocally(s){return((l,u)=>{const{mediaAgent:h,store:{getState:v,dispatch:E}}=l,I=v(),{audio:{locallyMutedAudioList:R}}=I,N=ls(I).filter(L=>L.audio===Qo.Computer);return R.includes(u)||-1===N.findIndex(L=>L.userId===u)||(h.muteOrUnmuteOtherAudio(u,!0),E(Ff(u))),Promise.resolve("")})(this[gn],s)}unmuteUserAudioLocally(s){return((l,u)=>{const{mediaAgent:h,store:{getState:v,dispatch:E}}=l,{audio:{locallyMutedAudioList:I}}=v();return I.includes(u)&&(h.muteOrUnmuteOtherAudio(u,!1),E(yi(u))),Promise.resolve("")})(this[gn],s)}adjustUserAudioVolumeLocally(s,l){return((u,h,v)=>{const{mediaAgent:E,store:{getState:I,dispatch:R}}=u,N=I();return-1!==ls(N).findIndex(L=>L.userId===h)&&(E.adjustOtherAudioVolume(h,v),R(PP({userId:h,volume:v}))),Promise.resolve("")})(this[gn],s,l)}muteAllUserAudioLocally(){return(s=>{const{mediaAgent:l,store:{getState:u,dispatch:h}}=s,{audio:{isStopAllImcomingAudio:v}}=u();return v||(l.stopAllIncomingAudio(!0),h(o1(!0))),Promise.resolve("")})(this[gn])}unmuteAllUserAudioLocally(){return(s=>{const{mediaAgent:l,store:{getState:u,dispatch:h}}=s,{audio:{isStopAllImcomingAudio:v,locallyMutedAudioList:E}}=u();return v&&(l.stopAllIncomingAudio(!1),h(o1(!1)),E.length>0&&E.forEach(I=>{l.muteOrUnmuteOtherAudio(I,!1),h(yi(I))})),Promise.resolve("")})(this[gn])}isUserAudioMutedLocally(s){return((l,u)=>{let{store:{getState:h}}=l;const{audio:{locallyMutedAudioList:v}}=h();return v.includes(u)})(this[gn],s)}getUserVolumeLocally(s){return((l,u)=>{var h,v;let{store:{getState:E}}=l;const{audio:{localUserAudioVolumeList:I,locallyMutedAudioList:R}}=E();return null!==(h=null===(v=I.find(N=>N.userId===u))||void 0===v?void 0:v.volume)&&void 0!==h?h:R.includes(u)?0:100})(this[gn],s)}}).prototype,"switchSharingSecondaryCamera",[Tn,ty,XO],Object.getOwnPropertyDescriptor(Ei.prototype,"switchSharingSecondaryCamera"),Ei.prototype),wn(Ei.prototype,"muteUserAudioLocally",[Tn,ny,oi],Object.getOwnPropertyDescriptor(Ei.prototype,"muteUserAudioLocally"),Ei.prototype),wn(Ei.prototype,"unmuteUserAudioLocally",[Tn,aw,oi],Object.getOwnPropertyDescriptor(Ei.prototype,"unmuteUserAudioLocally"),Ei.prototype),wn(Ei.prototype,"adjustUserAudioVolumeLocally",[Tn,cw,oi],Object.getOwnPropertyDescriptor(Ei.prototype,"adjustUserAudioVolumeLocally"),Ei.prototype),wn(Ei.prototype,"muteAllUserAudioLocally",[Tn,sS,oi],Object.getOwnPropertyDescriptor(Ei.prototype,"muteAllUserAudioLocally"),Ei.prototype),wn(Ei.prototype,"unmuteAllUserAudioLocally",[Tn,z2,oi],Object.getOwnPropertyDescriptor(Ei.prototype,"unmuteAllUserAudioLocally"),Ei.prototype),Ei);const nd={controlStatus:Vr.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:IE.Automatically,currentRoom:{status:rr.Initial,boStatus:Ul.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1},Oi=Gn({[`${R1}`]:gt((s,l)=>{let{payload:u}=l;Array.isArray(u)?s.rooms.push(...u):s.rooms.push(u)}),[`${JP}`]:gt((s,l)=>{let{payload:u}=l;s.allocationPattern=u}),[`${O1}`]:gt((s,l)=>{let{payload:u}=l;s.sequenceId=u}),[`${Sc}`]:gt((s,l)=>{let{payload:u}=l;s.meetingElapsedTime=u}),[`${Mv}`]:gt((s,l)=>{let{payload:u}=l;s.startRoomElapsedTime=u}),[`${Nv}`]:gt((s,l)=>{let{payload:u}=l;const{options:h}=s;Object.assign(h,u)}),[`${$P}`]:gt((s,l)=>{let{payload:u}=l;s.controlStatus=u}),[`${Rp}`]:gt((s,l)=>{let{payload:u}=l;s.rooms=u}),[`${xv}`]:gt((s,l)=>{let{payload:u}=l;const{currentRoom:h}=s;Object.assign(h,u)}),[`${Og}`]:gt((s,l)=>{let{payload:u}=l;const{currentRoom:h}=s;h.status=u}),[`${D1}`]:gt((s,l)=>{let{payload:u}=l;const{currentRoom:h}=s;h.boConfId=u}),[`${zE}`]:gt((s,l)=>{let{payload:u}=l;const{currentRoom:h}=s;h.boToken=u}),[`${vC}`]:gt((s,l)=>{let{payload:u}=l;s.closingRoomTime=u}),[`${XP}`]:gt((s,l)=>{let{payload:u}=l;s.broadcastMessage=u}),[`${YE}`]:gt((s,l)=>{let{payload:u}=l;s.hostReplyToQuestionerType=u}),[`${ZP}`]:gt((s,l)=>{let{payload:u}=l;s.hostReplyToRequestId=u}),[`${k1}`]:gt((s,l)=>{let{payload:u}=l;void 0!==u.add&&u.add.length>0&&u.add.forEach(h=>{const v=s.mainSessionAttendeeList.find(E=>E.userId===h.userId);void 0!==v?Object.assign(v,h):q0(h.userRole)||s.mainSessionAttendeeList.push(h)}),void 0!==u.update&&u.update.length>0&&u.update.forEach(h=>{const v=s.mainSessionAttendeeList.find(E=>E.userId===h.userId);void 0!==v&&Object.assign(v,h)}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(h=>{const v=s.mainSessionAttendeeList.findIndex(E=>E.userId===h.userId);-1!==v&&s.mainSessionAttendeeList.splice(v,1)})}),[`${eM}`]:gt((s,l)=>{let{payload:u}=l;s.isHugeBO=u}),[`${M1}`]:gt((s,l)=>{let{payload:u}=l;s.isUserRoleUpdated=u}),[`${P1}`]:gt((s,l)=>{let{payload:u}=l;s.preAssignedRooms=u}),[`${jl}`]:gt((s,l)=>{let{payload:u}=l;s.isEnableBreakoutRoom=u.isEnableBreakoutRoom,s.isEnableBOBroadcast=u.isEnableBOBroadcast}),[`${_C}`]:s=>{const{currentRoom:{status:l}}=s;return l===rr.Joining?{...nd,preAssignedRooms:s.preAssignedRooms,currentRoom:s.currentRoom,closingRoomTime:s.closingRoomTime}:l===rr.Leaving?{...nd,preAssignedRooms:s.preAssignedRooms,closingRoomTime:s.closingRoomTime}:{...nd,preAssignedRooms:s.preAssignedRooms}}},nd),{WebclientBreakoutRoomAttendeeStatus:eD,WebclientBreakoutRoomCommand:Y2}=So;function Yh(s,l){let u=0;for(;u<s.length;u++){const h=s[u],{attendeeGuidList:v}=h;if(null!=v&&v.includes(l))break}return u<s.length?s[u]:void 0}function m_(){Ur.remove(eD),Ur.remove(Y2)}function ry(){return ji.createAgent().leaveBO(1),dt(vc,{reason:Es.BackToMainSession}),m_(),[Og(rr.Leaving),io(Rs.NormalCase)]}function aS(s,l){return dt(vc,{reason:Es.JoinBreakoutRoom,roomName:s}),l===rr.InRoom&&ji.createAgent().leaveBO(1),[Og(rr.Joining),io(Rs.NormalCase)]}function uw(s){return dt(vc,{reason:Es.MoveToBreakoutRoom,roomName:s}),ji.createAgent().leaveBO(1),[Og(rr.Joining),io(Rs.NormalCase)]}function iy(s){const l=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?rr.InRoom:rr.Invited;return Ur.set(eD,JSON.stringify({status:l,boId:s.boId}),fi.SessionStorage),xv({status:l,boId:s.boId,name:s.name,boStatus:s.boStatus})}function uu(s){const{breakoutRoom:{isUserRoleUpdated:l,currentRoom:{boConfId:u}}}=s.value,h=Cr(s.value);return h&&(!u||u&&l)?$n(h.isHost):(u?vo(Q0,1):vo(Xy,2).pipe(function(v){return v.lift(new lL(1))})).pipe(Nt(As),Fn(s),ht(v=>{let[,E]=v;return Cr(E).isHost}))}function Uo(s){return HS({boIdList:vo(bP).pipe(IV((l,u)=>[...l,u],[]),ti(s))}).pipe(Mr(1e4))}const Ho=ji.createAgent(),tD=["userRole","bCoHost","bCCEditor","bHold"];var oy=Object.freeze({__proto__:null,handleBreakoutRoomOptionEpic:(s,l)=>s.pipe(wr(`${Ts}`),kn(u=>{const{breakoutRoom:h,meeting:{meetingOptions:v}}=l.value,{payload:{hugeBO:E,elapsed:I}}=u,R=[];return h&&(v&&(R.push(eM(E&&!0===v.isBO100Enabled)),R.push(jl({isEnableBreakoutRoom:v.isEnableBreakoutRoom,isEnableBOBroadcast:v.isEnableBOBroadcast}))),h.currentRoom.boConfId&&R.push(er()),void 0!==I&&R.push(Sc(I))),En(R)})),addRoomEpic:s=>Wn(s,4174).pipe(Zn(l=>{dt(bP,l.payload.body.bid)}),Pr(Ht)),handleBoAttributeIndicationEpic:(s,l)=>pc(s,7950).pipe(Fn(l),kn(u=>{let[h,v]=u;const{payload:{body:{proto:E}}}=h,{breakoutRoom:{isHugeBO:I,currentRoom:{status:R,boId:N}},meeting:{userGUID:L}}=v;let V=E;var ee,ne,fe;I&&(V=function(ee,re){if(fR)return fR.decode(ee);var ve=function(Qe){for(var ze="",ft=0;;){var lt=Qe[ft++],tt=(lt>127)+(lt>223)+(lt>239);if(ft+tt>Qe.length)return[ze,db(Qe,ft-1)];tt?3==tt?(lt=((15&lt)<<18|(63&Qe[ft++])<<12|(63&Qe[ft++])<<6|63&Qe[ft++])-65536,ze+=String.fromCharCode(55296|lt>>10,56320|1023&lt)):ze+=String.fromCharCode(1&tt?(31&lt)<<6|63&Qe[ft++]:(15&lt)<<12|(63&Qe[ft++])<<6|63&Qe[ft++]):ze+=String.fromCharCode(lt)}}(ee),Le=ve[0];return ve[1].length&&Rc(8),Le}(function(ne,fe,ve){var Le=ne.length;if(!Le||ve&&ve.f&&!ve.l)return fe||new ra(0);var Qe=!fe||ve,ze=!ve||ve.i;ve||(ve={}),fe||(fe=new ra(3*Le));var ft=function(fo){var Eo=fe.length;if(fo>Eo){var Fi=new ra(Math.max(2*Eo,fo));Fi.set(fe),fe=Fi}},lt=ve.f||0,tt=ve.p||0,St=ve.b||0,Zt=ve.l,ut=ve.d,Ze=ve.m,_e=ve.n,He=8*Le;do{if(!Zt){lt=Fp(ne,tt,1);var ct=Fp(ne,tt+1,3);if(tt+=3,!ct){var st=ne[($r=oA(tt)+4)-4]|ne[$r-3]<<8,Ne=$r+st;if(Ne>Le){ze&&Rc(0);break}Qe&&ft(St+st),fe.set(ne.subarray($r,Ne),St),ve.b=St+=st,ve.p=tt=8*Ne,ve.f=lt;continue}if(1==ct)Zt=su,ut=zC,Ze=9,_e=5;else if(2==ct){var Jt=Fp(ne,tt,31)+257,Ft=Fp(ne,tt+10,15)+4,yn=Jt+Fp(ne,tt+5,31)+1;tt+=14;for(var mr=new ra(yn),tr=new ra(19),Tr=0;Tr<Ft;++Tr)tr[Fg[Tr]]=Fp(ne,tt+3*Tr,7);tt+=3*Ft;var gr=YC(tr),lr=(1<<gr)-1,Hn=Wd(tr,gr,1);for(Tr=0;Tr<yn;){var $r,eo=Hn[Fp(ne,tt,lr)];if(tt+=15&eo,($r=eo>>>4)<16)mr[Tr++]=$r;else{var co=0,xt=0;for(16==$r?(xt=3+Fp(ne,tt,3),tt+=2,co=mr[Tr-1]):17==$r?(xt=3+Fp(ne,tt,7),tt+=3):18==$r&&(xt=11+Fp(ne,tt,127),tt+=7);xt--;)mr[Tr++]=co}}var It=mr.subarray(0,Jt),et=mr.subarray(Jt);Ze=YC(It),_e=YC(et),Zt=Wd(It,Ze,1),ut=Wd(et,_e,1)}else Rc(1);if(tt>He){ze&&Rc(0);break}}Qe&&ft(St+131072);for(var $t=(1<<Ze)-1,Cn=(1<<_e)-1,Ln=tt;;Ln=tt){var rt=(co=Zt[qn(ne,tt)&$t])>>>4;if((tt+=15&co)>He){ze&&Rc(0);break}if(co||Rc(2),rt<256)fe[St++]=rt;else{if(256==rt){Ln=tt,Zt=null;break}var hr=rt-254;if(rt>264){var Hr=cb[Tr=rt-257];hr=Fp(ne,tt,(1<<Hr)-1)+sR[Tr],tt+=Hr}var Xr=ut[qn(ne,tt)&Cn],Mn=Xr>>>4;if(Xr||Rc(3),tt+=15&Xr,et=lb[Mn],Mn>3&&(Hr=Lp[Mn],et+=qn(ne,tt)&(1<<Hr)-1,tt+=Hr),tt>He){ze&&Rc(0);break}Qe&&ft(St+131072);for(var Ir=St+hr;St<Ir;St+=4)fe[St]=fe[St-et],fe[St+1]=fe[St+1-et],fe[St+2]=fe[St+2-et],fe[St+3]=fe[St+3-et];St=Ir}}ve.l=Zt,ve.p=Ln,ve.b=St,ve.f=lt,Zt&&(lt=1,ve.m=Ze,ve.d=ut,ve.n=_e)}while(!lt);return St==fe.length?fe:db(fe,0,St)}((ee=Ju(E)).subarray(function(ne){31==ne[0]&&139==ne[1]&&8==ne[2]||Rc(6,"invalid gzip data");var fe=ne[3],ve=10;4&fe&&(ve+=ne[10]|2+(ne[11]<<8));for(var Le=(fe>>3&1)+(fe>>4&1);Le>0;Le-=!ne[ve++]);return ve+(2&fe)}(ee),-8),new ra(((ne=ee)[(fe=ne.length)-4]|ne[fe-3]<<8|ne[fe-2]<<16|ne[fe-1]<<24)>>>0))));const O=[];let X;try{const ee=JSON.parse(gh(V)),{ControlStatus:re,NameIndex:ne,IsAutoJoinEnabled:fe,IsBackToMainSessionEnabled:ve,IsTimerEnabled:Le,TimerDuration:Qe,IsTimerAutoEndEnabled:ze,WaitSeconds:ft,StartTimeOnMMR:lt,ItemList:tt}=ee,St={isAutoJoinRoom:fe,isBackToMainSessionEnabled:ve,isTimerEnabled:Le,timerDuration:Qe,isTimerAutoEnabled:ze,waitSeconds:ft};O.push(Nv(St)),O.push(Mv(lt)),O.push(O1(ne)),O.push($P(re));const Zt=tt&&tt.map(ut=>({boId:ut.BID,name:ut.MeetingTitle,boStatus:ut.Status,hostId:ut.HostID,attendeeGuidList:ut.ParticipantList||[]}))||[];switch(O.push(Rp(Zt)),dt(yu,{controlStatus:re,roomList:Zt}),re){case Vr.InProgress:if(R!==rr.InRoom&&R!==rr.Joining){const ut=function(Ze,_e){const{meeting:{isHost:He,userGUID:ct}}=_e.value,st=Ur.get(eD),Ne=[];if(st)try{const{status:Jt,boId:Ft}=JSON.parse(st);if(Jt===rr.Invited)if(He)m_();else{const yn=Yh(Ze,ct);yn&&(Ne.push(iy(yn)),dt(AE,{roomId:yn.boId,name:yn.name}))}else if(Jt===rr.InRoom){let yn;if(yn=He?Ze.find(mr=>mr.boId===Ft):Yh(Ze,ct),yn){Ne.push(iy(yn));const mr=yn.boId;Op(_e).subscribe(()=>{ji.createAgent().joinBO(mr)})}m_()}}catch(Jt){console.error(Jt)}return Ne}(Zt,l);if(0===ut.length){const Ze=Yh(Zt,L);Ze&&O.push(iy(Ze))}else O.push(...ut)}else if(R===rr.InRoom&&h.type===`${lo}`){const ut=Yh(Zt,L);ut&&uu(l).subscribe(Ze=>{N===ut.boId||Ze||Ho.joinBO(ut.boId)})}St.isTimerEnabled&&St.timerDuration>0&&(Ze=St.timerDuration,_e=lt,X=uu(ut=l).pipe(Fn(ut),kn(He=>{let[ct,st]=He;const{breakoutRoom:{currentRoom:{status:Ne},meetingElapsedTime:Jt},meeting:{joinMeetingTimeStamp:Ft}}=st,yn=Ft-1e3*Jt+1e3*_e+1e3*Ze;if(performance.now()<yn){if(ct)return V_(1e3).pipe(ht(()=>Math.floor((yn-performance.now())/1e3)),Fn(ut),jm(mr=>{let[tr,Tr]=mr;const{breakoutRoom:{controlStatus:gr,currentRoom:{status:lr}},socket:{zoomSocketStatus:Hn},meeting:{isHost:$r}}=Tr;return tr>=0&&$r&&gr===Vr.InProgress&&(lr===rr.InRoom||lr===rr.MainSession||lr===rr.Initial)&&Hn===so.Connected}),Zn(mr=>{let[tr]=mr;dt(yE,{countdown:tr})}),ln(mr=>{let[tr]=mr;return 0===tr}),Zn(mr=>{let[,tr]=mr;const{breakoutRoom:{options:Tr}}=tr;Tr.isTimerAutoEnabled?ji.createAgent().stopBO(Vr.Closing):dt(CP)}),Pr(Ht));if(Ne===rr.InRoom)return V_(1e3).pipe(ht(()=>Math.floor((yn-performance.now())/1e3)),Fn(ut),jm(mr=>{let[tr,Tr]=mr;const{breakoutRoom:{currentRoom:{status:gr}},meeting:{isHost:lr},socket:{zoomSocketStatus:Hn}}=Tr;return tr>=0&&gr===rr.InRoom&&!lr&&Hn===so.Connected}),Zn(mr=>{let[tr]=mr;dt(yE,{countdown:tr})}),Pr(Ht))}return Ht})));break;case Vr.Closing:X=uu(l).pipe(ln(ut=>ut),Pn(()=>{const ut=[],{breakoutRoom:{closingRoomTime:Ze,currentRoom:{status:_e}},participants:{attendeesList:He}}=v;let ct=St.waitSeconds;if(0!==Ze&&St.waitSeconds>0){const st=Math.floor((performance.now()-Ze)/1e3);ct=Math.max(St.waitSeconds-st,0)}if(0===ct)return Ho.stopBO(Vr.Closed),Ht;{if(_e!==rr.InRoom&&He.length>1&&He.every(Ne=>!Ne.bid))return Ho.stopBO(Vr.Closed),Ht;Ze||ut.push(vC(performance.now()));const st=performance.now()+1e3*ct;return $s(En(ut),V_(1e3).pipe(ht(()=>Math.floor((st-performance.now())/1e3)),Fn(l),jm(Ne=>{let[Jt,Ft]=Ne;const{breakoutRoom:{controlStatus:yn},meeting:{isHost:mr},socket:{zoomSocketStatus:tr}}=Ft;return Jt>=0&&yn===Vr.Closing&&tr===so.Connected&&mr}),Zn(Ne=>{let[Jt]=Ne;Jt>=0&&dt(Os,{countdown:Jt})}),ln(Ne=>{let[Jt]=Ne;return 0===Jt}),Zn(()=>{Ho.stopBO(Vr.Closed)}),Pr(Ht)))}}));break;case Vr.Closed:O.push(vC(0)),R===rr.Leaving?O.push(Og(rr.MainSession)):R===rr.Invited?O.push(Og(rr.Initial)):R!==rr.InRoom&&R!==rr.Joining||O.push(...ry()),m_()}}catch(ee){console.error(ee)}var ut,Ze,_e;return X?$s(En(O),X):En(O)})),handleBoJoinResponseEpic:(s,l)=>pc(s,4194).pipe(Fn(l),kn(u=>{let[h,v]=u;const{payload:{body:{bid:E,botoken:I,confID:R}}}=h,{meeting:{isHost:N},breakoutRoom:{rooms:L,currentRoom:{status:V}}}=v,O=[],X=L.find(ee=>ee.boId===E);return X&&(O.push(iy(X,N)),O.push(D1(R)),O.push(zE(I)),N||V!==rr.InRoom?O.push(...aS(X.name,V)):O.push(...uw(X.name))),dt(SP,{boId:E}),En(O)})),handleBoCommandIndicationEpic:(s,l)=>s.pipe(wr(`${lc}`,`${lo}`),ln(u=>7949===u.payload.evt),Fn(l),Pn(u=>{let[h,v]=u;const{payload:{body:E}}=h,{meeting:{userGUID:I},breakoutRoom:{rooms:R,options:{isAutoJoinRoom:N},currentRoom:{status:L}}}=v,{commandType:V}=E,O=[];let X;switch(V){case Iv.Join:{const{targetBID:re,botoken:ne,confID:fe}=E,ve=Yh(R,I);ve&&ve.boId===re&&(O.push(D1(fe)),O.push(zE(ne)),N?O.push(...aS(ve.name)):(Ur.set(So.WebclientBreakoutRoomCommand,V,fi.SessionStorage),dt(AE,{roomId:re,name:ve.name})));break}case Iv.Switch:{const{targetBID:re,botoken:ne,confID:fe}=E,ve=Yh(R,I);ve&&ve.boId===re&&(O.push(xv({boId:ve.boId,boToken:ne,boConfId:fe,name:ve.name})),L===rr.Invited?(Ur.set(So.WebclientBreakoutRoomCommand,V,fi.SessionStorage),N?O.push(...aS(ve.name)):dt(AE,{roomId:re,name:ve.name})):O.push(...uw(ve.name)));break}case Iv.Leave:{const{waitTime:re}=E;if((ee=L)!==rr.InRoom&&ee!==rr.Joining&&ee!==rr.Leaving)O.push(xv({boId:"",boToken:"",boConfId:"",status:rr.Initial}));else{const ne=Number(re);if(ne>0){const fe=performance.now()+1e3*ne;X=V_(1e3).pipe(ht(()=>Math.floor((fe-performance.now())/1e3)),Fn(l),jm(ve=>{let[Le,Qe]=ve;const{breakoutRoom:{controlStatus:ze,currentRoom:{status:ft}},meeting:{isHost:lt},socket:{zoomSocketStatus:tt}}=Qe;return Le>=0&&tt===so.Connected&&ze===Vr.Closing&&ft===rr.InRoom&&!lt}),Zn(ve=>{let[Le]=ve;Le>=0&&dt(Os,{countdown:Le})}),Pr(Ht))}else O.push(...ry());m_()}break}case Iv.Broadcast:{const{textContent:re}=E;if(re){const{meeting:{encType:ne},participants:{attendeesList:fe},breakoutRoom:{mainSessionAttendeeList:ve}}=v;let Le="";if(ne===Cf.AES_GCM){const Qe=fe.concat(ve).find(ze=>Y0(ze.userRole));Qe&&(Le=Qe.zoomID)}X=En(wa.beginDecrypt({decryptedText:re,type:Wc.BO_BROADCAST,zoomId:Le}).then(Qe=>{let{message:ze}=Qe;return dt(GT,{message:ze}),XP(ze)}))}break}case Iv.HelpReq:{const{requestID:re}=E,{breakoutRoom:{mainSessionAttendeeList:ne,rooms:fe,currentRoom:{boId:ve},hostReplyToQuestionerType:Le,hostReplyToRequestId:Qe},participants:{attendeesList:ze}}=v;if(re){if(L===rr.InRoom){const ft=ne.find(lt=>lt.userId===re);if(ft&&ft.bid===ve){Ho.askForHelpResultBO(re,ol.AlreadyInRoom);break}}if(Le===ol.Received&&Qe!==re)Ho.askForHelpResultBO(re,ol.Busy);else{Ho.askForHelpResultBO(re,ol.Received),O.push(YE(ol.Received),ZP(re));const ft=(L===rr.InRoom?ne:ze).find(lt=>lt.userId===re);if(ft){const lt=ft.bid,tt=fe.find(St=>St.boId===lt);tt&&dt(WT,{userId:re,displayName:ft.displayName,roomName:tt.name,roomId:tt.boId})}}}break}case Iv.HelpRes:{const{helpResult:re}=E;dt(j0,{result:Number(re)});break}}var ee;return X?$s(En(O),X):En(O)})),handleMainSessionJoinResponseEpic:(s,l)=>wd(s,4098).pipe(Fn(l),kn(u=>{let[h,v]=u;const{payload:{body:{res:E,elapsed:I}}}=h,R=[];return E===hc.CONF_FAIL_MEETING_HAS_CLOSED||E===hc.CONF_FAIL_HAS_BEEN_REMOVED?(m_(),R.push(...zf(v,!1))):E===hc.CONF_SUCCESS&&(R.push(Sc(I)),R.push(Og(rr.InRoom)),Ur.set(So.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:rr.InRoom,boId:v.breakoutRoom.currentRoom.boId}),fi.SessionStorage)),En(R)})),handleMainSessionRosterUpdateResponse:(s,l)=>wd(s,Mo).pipe(ht(u=>Oc(u.payload.body)),Fn(l),Pn(u=>{let[h,v]=u;const E=[k1(h)],{participants:{attendeesList:I},breakoutRoom:{mainSessionAttendeeList:R,isUserRoleUpdated:N},meeting:{userId:L}}=v;let V=[];return["add","update"].forEach(O=>h[O]&&V.push(...h[O])),V=V.filter(O=>tD.some(X=>void 0!==O[X])).map(O=>{const X=R.find(ee=>ee.userId===O.userId);if(X){const ee=I.find(re=>re.zoomID===X.zoomID);if(ee)return void 0===O.userRole||N||ee.userId!==L||(E.push(M1(!0)),dt(Q0,O)),void 0!==O.bCCEditor&&E.push(Rg({editorId:O.bCCEditor?ee.userId:"",isEditor:!!O.bCCEditor,editorZoomId:O.bCCEditor?ee.zoomID:""})),delete O.bRaiseHand,delete O.bCapsPinMultiVideo,{...O,userId:ee.userId}}return null}).filter(O=>!!O),V.length>0&&(dt(Dd,V),E.push(Nf({update:V}))),dt(KT),En(E)})),handleMainSessionMeetingAttributeEpic:s=>wd(s,zc).pipe(ln(l=>{const{payload:{body:u}}=l;return void 0!==u?.bAllowAttendeeRename||void 0!==u?.chatPriviledge||void 0!==u?.lockShare}),ht(l=>{const{payload:{body:u}}=l;return void 0!==u.bAllowAttendeeRename?Rd(l.payload.body):void 0!==u.chatPriviledge?vt(u.chatPriviledge):void 0!==u.lockShare?s1(u.lockShare):void 0})),handleClosingRoomAttendeeUpdateEpic:(s,l)=>Wn(s,Mo).pipe(Fn(l),ln(u=>{let[,h]=u;const{meeting:{isHost:v},breakoutRoom:{controlStatus:E,currentRoom:{status:I}}}=h;return v&&E===Vr.Closing&&I!==rr.InRoom}),Nt(As),Zn(()=>{const{participants:{attendeesList:u}}=l.value;u.every(h=>!h.bid)&&u.length>1&&Ho.stopBO(Vr.Closed)}),Pr(Ht)),handlePreAssignedRoomRespEpic:(s,l)=>Wn(s,4214).pipe(Fn(l),kn(u=>{let[h,v]=u;const{payload:{body:{proto:E}}}=h,{breakoutRoom:{rooms:I,isHugeBO:R}}=v;try{const N=JSON.parse(gh(E)),L=[];if(N&&N.PreAssignBoList&&Array.isArray(N.PreAssignBoList)){const V=N.PreAssignBoList.map(X=>({name:X.BoName,emails:X.email}));if(L.push(P1(V)),I.length+V.length<(R?100:50)){const X=V.map(ee=>ee.name);return Ho.batchCreateBOToken(X),$s(En(L),Uo(X.length).pipe(Fn(l),Pn(ee=>{let[{boIdList:re},ne]=ee;const fe=ls(ne),ve=V.map((Qe,ze)=>{const{emails:ft,name:lt}=Qe;let tt=[];return ft&&Array.isArray(ft)&&(tt=ft.map(St=>fe.filter(Zt=>Zt.userEmail===St).map(Zt=>Zt.userGUID)).reduce((St,Zt)=>[...St,...Zt],[])),{boId:re[ze],name:lt,attendeeGuidList:tt}}),Le=ve.map((Qe,ze)=>({roomId:Qe.boId,name:Qe.name,emails:V[ze].emails}));return dt(IP,{rooms:Le}),En([Rp(ve),P1(Le)])})))}return En(L)}}catch{console.error("pre assign proto is not valid")}return Ht})),handlePreAssignedUserJoinMeetingEpic:(s,l)=>pc(s,Mo).pipe(Fn(l),ln(u=>{let[h,v]=u;const{meeting:{isHost:E,meetingStatus:I,meetingOptions:R},breakoutRoom:{controlStatus:N}}=v,{payload:{body:L}}=h;return I===bs.Joined&&R?.isAllowBreakoutRoomPreAssign&&E&&(N===Vr.NotStarted||N===Vr.InProgress)&&Array.isArray(L.add)}),Pn(u=>{let[h,v]=u;const{breakoutRoom:{controlStatus:E,rooms:I,preAssignedRooms:R,currentRoom:{status:N}},participants:{failoverAttendeesList:L}}=v,V=R?.filter(ee=>I.findIndex(re=>re.boId===ee.roomId)>-1),{payload:{body:{add:O}}}=h,X=[];return V.length>0&&O.filter(ee=>ee.userEmail&&ee.userGUID).filter(ee=>-1===L.findIndex(re=>re.zoomID===ee.zoomID)).forEach(ee=>{if(!Yh(I,ee.userGUID))for(let re=0;re<V?.length;re++){const ne=V[re];if(ne.emails.includes(ee.userEmail)){if(E===Vr.NotStarted){const fe=gt(I,ve=>{ve.find(Qe=>Qe.boId===ne.roomId)?.attendeeGuidList.push(ee.userGUID)});X.push(Rp(fe))}else E===Vr.InProgress&&(N===rr.InRoom&&h.type===`${lo}`?Ho.assignToBO(ee.id,String(ne.roomId)):N!==rr.Initial&&N!==rr.MainSession||Ho.assignToBO(ee.id,String(ne.roomId)));break}}}),En(X)})),handleInconsistentPropertiesInBOUserEpic:(s,l)=>Wn(s,Mo).pipe(ln(u=>{const{breakoutRoom:{mainSessionAttendeeList:h}}=l.value,{payload:{body:v}}=u;return h.length>0&&(void 0!==v.add||void 0!==v.update)}),Nt(Qu),ht(u=>Oc(u.payload.body)),Pn(u=>{const{breakoutRoom:{mainSessionAttendeeList:h,isUserRoleUpdated:v},participants:{attendeesList:E}}=l.value;let I=[];const R=[];["add","update"].forEach(V=>u[V]&&I.push(...u[V]));const N=[...tD,"isHost"];I=I.filter(V=>N.some(O=>void 0!==V[O]));const L=I.filter(V=>void 0!==V.zoomID);return I=I.map(V=>{var O,X,ee,re;const ne=null!==(O=null!==(X=V.zoomID)&&void 0!==X?X:null===(ee=L.find(fe=>fe.userId===V.userId))||void 0===ee?void 0:ee.zoomID)&&void 0!==O?O:null===(re=E.find(fe=>fe.userId===V.userId))||void 0===re?void 0:re.zoomID;if(ne){const fe=h.find(ve=>ve.zoomID===ne);if(fe)return v||(R.push(M1(!0)),dt(Q0,fe)),Object.keys(V).filter(ve=>Object.prototype.hasOwnProperty.call(V,ve)).filter(ve=>N.includes(ve)).reduce((ve,Le)=>{const Qe=fe[Le];return void 0===Qe&&"bCoHost"!==Le||Object.assign(ve,{[Le]:"boolean"==typeof V[Le]?!!Qe:Qe}),ve},{userId:V.userId})}}).filter(Boolean),I.length>0&&(dt(Dd,I),R.push(Nf({update:I}))),En(R)}))});const q2=ji.createAgent();var J2=Object.freeze({__proto__:null,handleMainSessionReceivingSharingEpic:(s,l)=>wd(s,Mo).pipe(ln(u=>{var h;const{payload:{body:v}}=u;return null==v||null===(h=v.update)||void 0===h?void 0:h.some(E=>void 0!==E.bShareToBORooms||void 0!==E.bShareOn)}),Fn(l),ht(u=>{let[h,v]=u;const{payload:{body:{update:E}}}=h,{breakoutRoom:{mainSessionAttendeeList:I}}=v,R=E.filter(V=>V.bShareOn&&V.bShareToBORooms),N=E.filter(V=>!V.bShareOn||!V.bShareToBORooms),L=I.filter(V=>V.sharerOn&&V.bShareToBORooms);return R.length>0&&R.forEach(V=>{-1===L.findIndex(O=>O.userId===V.id)&&dt(Sp,{...V,isFromMainSession:!0})}),N.length>0&&N.forEach(V=>{dt(Dh,{...V,isFromMainSession:!0})}),E.map(V=>{if(V.bShareOn&&V.bShareToBORooms){if(0===I.filter(O=>O.sharerOn&&O.bShareToBORooms&&O.userId!==V.id).length)return{activeNodeID:V.id,bStatus:1,ssrc:V.shareSsrc};{const O=I.find(X=>X.userId===V.id);if(null!=O&&O.isHost)return{activeNodeID:V.id,bStatus:1,ssrc:V.shareSsrc}}}else if(!V.bShareOn||!V.bShareToBORooms){const O=I.filter(X=>X.bShareToBORooms&&X.sharerOn);if(1===O.length&&O[0].userId===V.id)return{activeNodeID:V.id,bStatus:0,ssrc:0};{const X=O.filter(re=>re.userId!==V.id),ee=X.find(re=>re.isHost);if(ee)return{activeNodeID:ee.userId,bStatus:1,ssrc:ee.shareSsrc};{const re=X[0];if(re)return{activeNodeID:re.userId,bStatus:1,ssrc:re.shareSsrc}}}}}).filter(Boolean)}),Pn(u=>{const{share:{status:h},meeting:{userId:v}}=l.value,E=tn.getInstance(),I=[];return u.map(R=>{const{activeNodeID:N,bStatus:L,ssrc:V}=R,O=1===L;I.push(xP(O)),O&&h!==Zi.End&&(q2.stopSharing(v),E.stopDesktopSharing(),I.push(Tp(Zi.End)),dt(D0));let X={activeNodeID:N,bStatus:L,ssrc:V,fromMainSession:!0};if(!O){const{participants:{attendeesList:ee}}=l.value,re=ee.filter(ne=>ne.sharerOn);if(re.length>0){const ne=re[0];X={activeNodeID:ne.userId,bStatus:1,ssrc:ne.shareSsrc||0}}}I.push(lc({evt:20225,body:X}))}),En(I)})),handleMainSessionCreateExtraChannelEpic:(s,l)=>wd(s,4098).pipe(kn(u=>{const{payload:{body:{userID:h,confID:v}}}=u;return $s(...["sharing","audio"].map(E=>{return N=l,L=h,V=v,wd(s,"audio"===(I=E)?Jy:ug).pipe(ti(1),Zn(O=>{const{payload:{body:{encryptKey:X,additionalType:ee}}}=O,{media:{sharingDecodeStatus:re,audioDecodeStatus:ne},meeting:{svcUrl:fe,meetingNumber:ve,conId:Le,zoomId:Qe,meetingId:ze}}=N.value;Pa(I,"success","audio"===I?ne:re).subscribe(ft=>{let[,lt]=ft;const tt=tn.getInstance();if(lt){tt.createMainSessionChannel(I,`wss://${fe}/wc/media/${ve}?type=${"audio"===I?"ma":"ms"}&cid=${Le}&mode=1`),tt.updateMediaParams({iVType:"audio"===I?gc.AUDIO_DECODE:gc.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:L,sn:Ju(Qe),confId:V,encryptType:ee,encryptKey:Ju(X),meetingId:ze,meetingNumber:ve}});const{breakoutRoom:{mainSessionAttendeeList:Zt}}=N.value;if(Zt?.length>0){const ut=Zt.map(Ze=>({userid:Ze.userId,sn:Ze.zoomID&&Ju(Ze.zoomID)}));tt.updateUserMediaSN({added:ut,isFromMainSession:!0,iVType:"audio"===I?gc.AUDIO_DECODE:gc.SHARING_DECODE})}}})}),Pr(Ht));var I,N,L,V}))}))});const nD=us([s=>{let{breakoutRoom:{controlStatus:l}}=s;return l},s=>{let{breakoutRoom:{currentRoom:{status:l}}}=s;return l},s=>{let{breakoutRoom:{currentRoom:{boId:l}}}=s;return l}],(s,l,u)=>!(s!==Vr.InProgress&&s!==Vr.Closing||l!==rr.InRoom&&l!==rr.TimeUp||!u)),Jp=us([s=>{let{breakoutRoom:{rooms:l}}=s;return l},CE,s=>{let{meeting:{zoomId:l}}=s;return l},s=>{let{breakoutRoom:{mainSessionAttendeeList:l}}=s;return l},nD,s=>{let{breakoutRoom:{isHugeBO:l}}=s;return l}],(s,l,u,h,v,E)=>{const I=s.reduce((R,N)=>{const{attendeeGuidList:L}=N;return R.concat(L)},[]);return(v?h:l).filter(R=>{return!(R.bHold||R.isHost||R.zoomID===u||R.bid||I.includes(R.userGUID)||E&&(N=R.caps,4!=(4&N)));var N})});var Bi;const rd=ji.createAgent();let cS=(wn((Bi=class extends Yr{createRooms(s,l){const u=this[cr](),h=this[Pu],{breakoutRoom:{isHugeBO:v,sequenceId:E,rooms:I,controlStatus:R,isEnableBreakoutRoom:N}}=u;if(!N)return Promise.reject({type:fn,reason:"Breakout room feature is not enabled."});if(R===Vr.InProgress||R===Vr.Closing)return Promise.resolve({type:fn,reason:"breakout room has started!"});let L;return L="string"==typeof s?[s]:"number"==typeof s?Array.from({length:s}).map((O,X)=>`Subsession ${X+E}`):s,L.length<1||I.length+L.length>(v?100:50)?Promise.reject({type:Dr,reason:"exceed maximum size"}):(rd.batchCreateBOToken(L),new Promise((O,X)=>{Uo(L.length).subscribe(ee=>{let{boIdList:re}=ee,ne=re.map((ve,Le)=>({boId:ve,name:L[Le]}));if(l===IE.Automatically){const ve=Jp(u),Le=ne.length,Qe=ve.length;ne=ne.map((ze,ft)=>{const lt=[];let tt=ft;for(;tt<Qe;)lt.push(ve[tt]),tt+=Le;return{...ze,attendeeList:lt}})}const fe=ne.map(ve=>{let{boId:Le,name:Qe,attendeeList:ze}=ve;return{boId:Le,name:Qe,attendeeGuidList:ze&&ze.map(ft=>ft.userGUID)}});if(h(R1(fe)),h(JP(l)),h(O1(E+ne.length)),l===IE.Automatically){const ve=ne.map(Le=>({roomId:Le.boId,name:Le.name,attendeeList:Le.attendeeList.map(Qe=>({userId:Qe.userId,avatar:Qe.avatar,displayName:Qe.displayName}))}));O(ve)}else O(ne.map(ve=>({roomId:ve.boId,name:ve.name,attendeeList:[]})))},()=>{X({type:Cp})})}))}openRooms(s,l){const u=this[cr](),h={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},{breakoutRoom:{controlStatus:v,rooms:E,sequenceId:I,isHugeBO:R}}=u;if(v===Vr.InProgress||v===Vr.Closing)return Promise.resolve({type:fn,reason:"breakout room has started!"});if(s.some(re=>-1===E.findIndex(ne=>ne.boId===re.roomId)))return Promise.reject({type:Dr,reason:"roomId is wrong"});const N=ls(u);if(s.reduce((re,ne)=>re.concat(ne.attendeeList),[]).some(re=>-1===N.findIndex(ne=>ne.userId===re.userId)))return Promise.reject({type:Dr,reason:"bad user"});const L=s.map(re=>{const{attendeeList:ne}=re,fe=ne.map(ve=>N.find(Qe=>Qe.userId===ve.userId)?.userGUID);return{BID:re.roomId,MeetingTitle:re.name,MeetingToken:void 0,Status:Ul.Started,HostID:"",ParticipantList:fe}}),V=l?{...h,...l}:h;let X=$a(JSON.stringify({ControlStatus:Vr.InProgress,NameIndex:I,IsAutoJoinEnabled:+V.isAutoJoinRoom,IsBackToMainSessionEnabled:+V.isBackToMainSessionEnabled,IsTimerEnabled:+V.isTimerEnabled,TimerDuration:V.timerDuration,IsTimerAutoEndEnabled:+V.isTimerAutoEnabled,WaitSeconds:V.waitSeconds<0?0:V.waitSeconds,StartTimeOnMMR:void 0,ItemList:L}));return R&&(X=e0_fromUint8Array(Hg(wM(X)))),rd.startBO(X),Jr(yu,re=>re.controlStatus===Vr.InProgress)}joinRoom(s){const l=this[cr](),u=Cr(l),{breakoutRoom:{controlStatus:h,rooms:v,mainSessionAttendeeList:E,currentRoom:{status:I,boId:R}},meeting:{userGUID:N}}=l;if(h!==Vr.InProgress)return Promise.reject({type:bc,reason:"breakout room is not started"});if(null!=u&&u.isHost){const L=v.find(V=>V.boId===s);if(!L)return Promise.reject({type:Dr,reason:"room id is not correct"});rd.joinBO(L.boId)}else if(null!=u&&u.bCoHost&&I===rr.InRoom){if(!v.find(L=>L.boId===s))return Promise.reject({type:Dr,reason:"room id is not correct"});{const L=E.find(V=>V.isHost);L&&rd.wantJoinBO(L?.userId,s)}}else{if(I===rr.InRoom&&R===s)return Promise.reject({type:fn,reason:"You are in room"});{const L=Yh(v,N);if(!L||L.boId!==s)return Promise.reject({type:Dr,reason:"room id is not correct"});rd.joinBO(L.boId)}}return Jr(SP,L=>L.boId===s)}leaveRoom(){const s=this[cr](),l=this[Pu],{breakoutRoom:{controlStatus:u,options:h,currentRoom:{status:v}}}=s;if(u!==Vr.InProgress&&u!==Vr.Closing||v!==rr.InRoom)return Promise.reject({type:fn});{const E=bu(s);if(!h.isBackToMainSessionEnabled&&!E)return Promise.reject({type:na,reason:"can not return main session during the breakout room"});ry().forEach(I=>l(I))}return Promise.resolve("")}askForHelp(){const s=this[cr](),{breakoutRoom:{controlStatus:l,mainSessionAttendeeList:u,currentRoom:{status:h}},participants:{attendeesList:v}}=s,E=bu(s);if(l!==Vr.InProgress||h!==rr.InRoom)return Promise.reject({type:fn,reason:"you are not in breakout room"});if(E)return Promise.reject({type:fn,reason:"host or co-host can not ask for help"});{const I=u.find(R=>R.isHost);if(I){if(v.findIndex(R=>R.zoomID===I.zoomID)>-1)return Promise.reject({type:fn,reason:"host is in room"});rd.askForHelpBO(I.userId)}}return Jr(j0,I=>I.result===ol.Received)}postponeHelping(s){const l=this[cr](),u=this[Pu],{breakoutRoom:{mainSessionAttendeeList:h,currentRoom:{status:v}},participants:{attendeesList:E}}=l;let I=E;return v===rr.InRoom&&(I=h),I.findIndex(R=>R.userId===s)>-1?(rd.askForHelpResultBO(s,ol.Ignore),u(YE(ol.Ignore)),Promise.resolve("")):Promise.reject({type:Dr,reason:"user id is not correct"})}broadcast(s){const{breakoutRoom:{isEnableBOBroadcast:l}}=this[cr]();return l?s?wa.beginEncrypt({text:s,type:Wc.BO_BROADCAST}).then(u=>(rd.broadcastBO(u),Promise.resolve(""))):Promise.reject({type:Dr,reason:"content empty"}):Promise.reject({type:fn,reason:"Cannot broadcast message due to the feature is not enable"})}assignUserToRoom(s,l){const u=this[cr](),{breakoutRoom:{rooms:h}}=u,v=Jp(u).find(E=>E.userId===s);return v&&h.findIndex(E=>E.boId===l)>-1?(rd.assignToBO(s,l),Jr(yu,E=>{const{controlStatus:I,roomList:R}=E,N=R.find(L=>L.boId===l);return I===Vr.InProgress&&N&&N.attendeeGuidList.includes(v.userGUID)})):Promise.reject({type:Dr,reason:""})}moveUserToRoom(s,l){const u=this[cr](),{breakoutRoom:{rooms:h,mainSessionAttendeeList:v},participants:{attendeesList:E}}=u,I=(nD(u)?v:E).find(R=>R.userId===s);if(!I)return Promise.reject({type:Dr,reason:"user id not correct"});{const R=Yh(h,I.userGUID);if(!R)return Promise.reject({type:fn,reason:"user not in a room"});if(R.boId===l)return Promise.reject({type:fn,reason:"user already in the target room"});{const N=h.find(L=>L.boId===l);if(!N)return Promise.reject({type:Dr,reason:"invalid room id"});rd.switchBO(s,N.boId)}}return Jr(yu,R=>{const{controlStatus:N,roomList:L}=R,V=L.find(O=>O.boId===l);return N===Vr.InProgress&&V&&V.attendeeGuidList.includes(I.userGUID)})}closeRoom(){const s=this[cr](),{breakoutRoom:{controlStatus:l}}=s;return l!==Vr.InProgress?Promise.reject({type:fn,reason:"room is not started"}):(rd.stopBO(Vr.Closing),Jr(yu,u=>u.controlStatus===Vr.Closing))}loadPreAssignedRooms(){const s=this[cr](),{meeting:{meetingOptions:l},breakoutRoom:{controlStatus:u}}=s;return!l.isAllowBreakoutRoomPreAssign||u!==Vr.NotStarted&&u!==Vr.Closed?Promise.reject({type:fn}):(rd.preAssignBreakoutRoom(),Jr(IP))}getUnassignedAttendeeList(){const s=this[cr](),{meeting:{isHost:l}}=s;return l?Jp(s).map(u=>jA(u)):[]}getRoomList(){const s=this[cr](),{breakoutRoom:{rooms:l,currentRoom:{status:u,boId:h},mainSessionAttendeeList:v},participants:{attendeesList:E}}=s,I=Cr(s);if(I&&(I.isHost||u===rr.InRoom&&I.bCoHost)){const R=u===rr.InRoom,N=R?v:E;return l.map(L=>{const{attendeeGuidList:V,boId:O,name:X}=L,ee=(V||[]).map(re=>N.find(ne=>ne.userGUID===re)).filter(re=>!!re&&re.userGUID!==I.userGUID);return R&&I.isHost&&O===h&&ee.unshift(I),{roomId:O,name:X,attendeeList:ee.filter(re=>!!re).map(re=>({userId:re.userId,displayName:re.displayName,avatar:re.avatar,isInRoom:re.bid===O,userGuid:re.userGUID}))}})}return s.breakoutRoom.rooms.map(R=>{const{boId:N,name:L}=R;return{roomId:N,name:L,attendeeList:[]}})}getAttendeeStatus(){return this[cr]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[cr]().breakoutRoom.controlStatus}getCurrentRoom(){const s=this[cr](),{breakoutRoom:{currentRoom:{status:l,name:u,boId:h}}}=s;return{attendeeStatus:l,name:u,roomId:h}}getRoomOptions(){const s=this[cr](),{breakoutRoom:{options:l}}=s;return{...l}}}).prototype,"createRooms",[Tn,cu],Object.getOwnPropertyDescriptor(Bi.prototype,"createRooms"),Bi.prototype),wn(Bi.prototype,"openRooms",[Tn,cu],Object.getOwnPropertyDescriptor(Bi.prototype,"openRooms"),Bi.prototype),wn(Bi.prototype,"joinRoom",[Tn],Object.getOwnPropertyDescriptor(Bi.prototype,"joinRoom"),Bi.prototype),wn(Bi.prototype,"leaveRoom",[Tn],Object.getOwnPropertyDescriptor(Bi.prototype,"leaveRoom"),Bi.prototype),wn(Bi.prototype,"askForHelp",[Tn],Object.getOwnPropertyDescriptor(Bi.prototype,"askForHelp"),Bi.prototype),wn(Bi.prototype,"postponeHelping",[cu,Tn],Object.getOwnPropertyDescriptor(Bi.prototype,"postponeHelping"),Bi.prototype),wn(Bi.prototype,"broadcast",[cu,Tn],Object.getOwnPropertyDescriptor(Bi.prototype,"broadcast"),Bi.prototype),wn(Bi.prototype,"assignUserToRoom",[cu,Tn],Object.getOwnPropertyDescriptor(Bi.prototype,"assignUserToRoom"),Bi.prototype),wn(Bi.prototype,"moveUserToRoom",[cu,Tn],Object.getOwnPropertyDescriptor(Bi.prototype,"moveUserToRoom"),Bi.prototype),wn(Bi.prototype,"closeRoom",[cu,Tn],Object.getOwnPropertyDescriptor(Bi.prototype,"closeRoom"),Bi.prototype),wn(Bi.prototype,"loadPreAssignedRooms",[cu,Tn],Object.getOwnPropertyDescriptor(Bi.prototype,"loadPreAssignedRooms"),Bi.prototype),Bi);const nF=dc(oy,J2);let sy=function(s){return s[s.Ready=0]="Ready",s[s.UserSub=1]="UserSub",s[s.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",s[s.ManualCaptionerDisabled=3]="ManualCaptionerDisabled",s}({}),id=function(s){return s[s.Unspecified=-1]="Unspecified",s[s.English=0]="English",s[s["Chinese (Simplified)"]=1]="Chinese (Simplified)",s[s.Japanese=2]="Japanese",s[s.German=3]="German",s[s.French=4]="French",s[s.Russian=5]="Russian",s[s.Portuguese=6]="Portuguese",s[s.Spanish=7]="Spanish",s[s.Korean=8]="Korean",s[s.Italian=9]="Italian",s[s.Reserved=10]="Reserved",s[s.Vietnamese=11]="Vietnamese",s[s.Dutch=12]="Dutch",s[s.Ukrainian=13]="Ukrainian",s[s.Arabic=14]="Arabic",s[s.Bengali=15]="Bengali",s[s["Chinese (Traditional)"]=16]="Chinese (Traditional)",s[s.Czech=17]="Czech",s[s.Estonian=18]="Estonian",s[s.Finnish=19]="Finnish",s[s.Greek=20]="Greek",s[s.Hebrew=21]="Hebrew",s[s.Hindi=22]="Hindi",s[s.Hungarian=23]="Hungarian",s[s.Indonesian=24]="Indonesian",s[s.Malay=25]="Malay",s[s.Persian=26]="Persian",s[s.Polish=27]="Polish",s[s.Romanian=28]="Romanian",s[s.Swedish=29]="Swedish",s[s.Tamil=30]="Tamil",s[s.Telugu=31]="Telugu",s[s.Tagalog=32]="Tagalog",s[s.Turkish=33]="Turkish",s[s.NoTranslation=400]="NoTranslation",s[s.DefaultManualInput=401]="DefaultManualInput",s[s.Customized=500]="Customized",s}({}),g_=function(s){return s[s.Unknown=0]="Unknown",s[s.Close=1]="Close",s[s.New=2]="New",s[s.Insert=3]="Insert",s[s.Delete=4]="Delete",s[s.Reset=5]="Reset",s[s.Audiodesc=6]="Audiodesc",s[s.Speaker=7]="Speaker",s[s.Error=8]="Error",s}({}),lw=function(s){return s[s.TranslateNotSupport=1]="TranslateNotSupport",s}({}),qh=function(s){return s[s.Unspecified=0]="Unspecified",s[s.InMeetingManual=1]="InMeetingManual",s[s.ExternalCaptioner=2]="ExternalCaptioner",s[s.ASR=4]="ASR",s}({});const __={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,bn:15,"zh-hant":16,cs:17,et:18,fi:19,el:20,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33},uS=Object.keys(id).filter(s=>/\d+/.test(id[s])).reduce((s,l)=>({...s,[`${id[l]}`]:l}),{}),q=Object.keys(__).reduce((s,l)=>(Object.assign(s,{[`${__[`${l}`]}`]:l}),s),{}),ay="zoom-sdk-live-trasncription",$p="live-trasncription";let $2=function(s){return s[s.English=0]="English",s[s.Chinese=1]="Chinese",s[s.Japanese=2]="Japanese",s[s.German=3]="German",s[s.French=4]="French",s[s.Russian=5]="Russian",s[s.Portuguese=6]="Portuguese",s[s.Spanish=7]="Spanish",s[s.Korean=8]="Korean",s[s.Italian=9]="Italian",s[s.Reserved=10]="Reserved",s[s.Vietnamese=11]="Vietnamese",s[s.Dutch=12]="Dutch",s[s.Ukrainian=13]="Ukrainian",s[s.Arabic=14]="Arabic",s[s.Bengali=15]="Bengali",s[s["Chinese (Traditional)"]=16]="Chinese (Traditional)",s[s.Czech=17]="Czech",s[s.Estonian=18]="Estonian",s[s.Finnish=19]="Finnish",s[s.Greek=20]="Greek",s[s.Hebrew=21]="Hebrew",s[s.Hindi=22]="Hindi",s[s.Hungarian=23]="Hungarian",s[s.Indonesian=24]="Indonesian",s[s.Malay=25]="Malay",s[s.Persian=26]="Persian",s[s.Polish=27]="Polish",s[s.Romanian=28]="Romanian",s[s.Swedish=29]="Swedish",s[s.Tamil=30]="Tamil",s[s.Telugu=31]="Telugu",s[s.Tagalog=32]="Tagalog",s[s.Turkish=33]="Turkish",s[s.NoTranslation=400]="NoTranslation",s[s.DefaultManualInput=401]="DefaultManualInput",s}({}),rF=function(s){return s.English="en",s["Chinese (Simplified)"]="zh",s.Japanese="ja",s.German="de",s.French="fr",s.Russian="ru",s.Portuguese="pt",s.Spanish="es",s.Korean="ko",s.Italian="it",s.Reserved="en1",s.Vietnamese="vi",s.Dutch="nl",s.Ukrainian="uk",s.Arabic="ar",s.Bengali="bn",s["Chinese (Traditional)"]="zh-hant",s.Czech="cs",s.Estonian="et",s.Finnish="fi",s.Greek="el",s.Hebrew="he",s.Hindi="hi",s.Hungarian="hu",s.Indonesian="id",s.Malay="ms",s.Persian="fa",s.Polish="pl",s.Romanian="ro",s.Swedish="sv",s.Tamil="ta",s.Telugu="te",s.Tagalog="tl",s.Turkish="tr",s}({});function gl(s){const l=s===id.Unspecified?id.Reserved:s;tn.getInstance().selectLanguageChannelForNewLTT(l)}const X2=K0(OP,function(s,l){return hO(s,l)})([ls,s=>{let{meeting:{gatewayUserList:l}}=s;return l}],(s,l)=>{const u={};return s.forEach(h=>{Object.assign(u,{[`${h.userId}`]:h.zoomID})}),l?.forEach(h=>{Object.assign(u,{[`${h.userId}`]:h.sn})}),u}),rD=us([ls],s=>s.find(l=>!0===l.bCCEditor)),iF=us([ls,z0],(s,l)=>s.some(u=>!0===u.bCCEditor&&u.userId===l)),lS=ji.createAgent();var _l=Object.freeze({__proto__:null,handleLiveTranscriptionMeetingOptionEpic:s=>s.pipe(wr(`${Gc}`),ht(l=>{const{payload:{liveTranscription:u}}=l;return Vv(u)})),handleLiveTranscriptionEnableEpic:(s,l)=>Wn(s,zc).pipe(ln(u=>{var h,v;return void 0!==(null===(h=u.payload.body)||void 0===h?void 0:h.NewLttAvaliable)||void 0!==(null===(v=u.payload.body)||void 0===v?void 0:v.LiveTransEngineType)}),ht(u=>{const{payload:{body:{NewLttAvaliable:h,LiveTransEngineType:v}}}=u,{liveTranscription:{isEnableAutomatedCaptions:E}}=l.value;return void 0!==h?(dt(Df,!!h),bC(E&&!!h)):F1(v)})),handleLiveTranscriptionStatusEpic:(s,l)=>Wn(s,7982).pipe(Pn(u=>{const{payload:{body:{status:h,gwId:v}}}=u,E=[];switch(h){case sy.Ready:E.push(jv(v));break;case sy.ManualCaptionerEnabled:dt(tl,{autoCaption:!1}),E.push(SC(!0));break;case sy.ManualCaptionerDisabled:dt(tl,{autoCaption:!0}),E.push(Rg({editorId:"",isEditor:!1,editorZoomId:""})),E.push(SC(!1));break;case sy.UserSub:{dt(tl,{autoCaption:l.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:R}}=l.value;if(null!=R&&R.isLiveTranscriptionSubscribed){var I;lS.enableNewLLT();const N=null!==(I=R.currentTranscriptionLang)&&void 0!==I?I:id.Unspecified;gl(N),E.push(Wf(N)),void 0!==R.currentTranslationLang&&lS.setTranslationLanguage(R.currentTranslationLang),E.push(iM())}break}}return En(E)})),handleLiveTranscriptionSupportedLanguageEpic:s=>Wn(s,7984).pipe(ht(l=>{const{payload:{body:{langs:u}}}=l;return CC(u)})),handleHostDisableCaptionsEpic:s=>Wn(s,8011).pipe(Pn(l=>{const{payload:{body:{disabled:u}}}=l,h=[];return dt(Sh,u),h.push(IC(u)),u&&h.push(Vd(!1)),En(h)})),handleLiveTranscriptionSubStatusEpic:s=>Wn(s,7985).pipe(ln(l=>{var u;return!0===(null===(u=l.payload.body)||void 0===u?void 0:u.success)}),Pn(l=>{const{payload:{body:{src:u,lang:h,success:v}}}=l,E=[];return v&&E.push(Vd(!0)),u===qh.ASR?(E.push(kg(h===id.NoTranslation?void 0:h)),dt(tl,{autoCaption:!0,lang:h})):[qh.InMeetingManual,qh.ExternalCaptioner].includes(u)&&dt(tl,{autoCaption:!1}),En(E)})),handleLiveTranscriptionSpeakingLanguageChangeEpic:(s,l)=>Wn(s,7986).pipe(Fn(l),Pn(u=>{let[h,v]=u;const E=Cr(v),{liveTranscription:{currentTranscriptionLang:I}}=v,{payload:{body:R}}=h,N=[];if(void 0!==R?.lang){const{lang:L}=R;"computer"===E?.audio&&I!==L&&gl(L),N.push(Wf(L))}return En(N)})),handleComputerAudioCompleteChangeLTLanguageEpic:(s,l)=>Ar(s,Vn.JoinComputerAudioComplete).pipe(ln(()=>l.value.liveTranscription.isLiveTranscriptionSubscribed),Zn(()=>{const{liveTranscription:{currentTranscriptionLang:u}}=l.value;u&&gl(u)}),Pr(Ht)),handleLiveTranscriptionTextEpic:(s,l)=>Wn(s,7983).pipe(ln(u=>void 0!==u.payload.body),Pn(u=>{const{payload:{body:{msgType:h,errorCode:v,language:E,source:I,content:R,keyNodeId:N,msgId:L,nodeId:V,pos:O,size:X,audioLanguage:ee}}}=u;if(h===g_.Error){if(v===lw.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:re}}=l.value;re&&dt(dv,{error:lw.TranslateNotSupport,errorMessage:`${uS[ee]} to ${uS[re]} translation is not supported!`,audioLanguage:ee,translationLang:re})}}else{const re=l.value,ne=ls(re),{liveTranscription:{isManualCaptionerEnabled:fe}}=re;if(fe&&I===qh.ASR)return Promise.resolve();if(function(ve,Le){const{liveTranscription:{isEnableTranslatedCaptions:Qe,isLiveTranscriptionEnabled:ze},meeting:{meetingOptions:ft}}=Le,{isEnableManualCaptions:lt,isEnableAllowHostAssignTypeCC:tt,isEnableClosedCaption:St,isEnableAllowThirdPartyCCToken:Zt}=ft;return ve===qh.ASR?Qe||ze:ve===qh.InMeetingManual?lt&&tt||void 0===lt&&St:ve===qh.ExternalCaptioner?Zt:void 0}(I,re)&&R&&N){const ve=X2(re)[N];if(ve)return wa.beginDecrypt({decryptedText:R,type:Wc.CC_MESSAGE,zoomId:ve}).then(Le=>{let{message:Qe}=Le;const{liveTranscription:{messageRecords:ze}}=l.value,ft=[],lt=ze.find(tt=>tt.msgId===L);if(lt){const{text:tt}=lt,St=((ut,Ze)=>{if(!ut||0===Ze)return"";let _e=0;for(let He=0;He<ut.length;He++)if(_e+=t0(ut[He]),_e===Ze)return ut.slice(0,He+1);return ut})(tt,O);let Zt;h===g_.Insert&&0===X||h===g_.Delete&&0===X?Zt={...lt,text:St+Qe,msgType:h}:h===g_.Close&&(Zt={...lt,text:Qe,msgType:h,done:!0}),Zt&&(ft.push(rM(Zt)),dt(dv,Zt))}else if([g_.New,g_.Close].includes(h)||fe&&h===g_.Insert){const tt=ne.find(Zt=>Zt.userId===V),St={msgId:L,userId:V,displayName:tt?.displayName,avatar:tt?.avatar,text:Qe,source:I,language:E,timestamp:(new Date).getTime(),done:h===g_.Close};ft.push(Kf({...St,msgType:h})),dt(dv,St)}return ft})}}return Promise.resolve()}),Pn(u=>Array.isArray(u)?En(u):Ht)),handlePersistLargeRecordsEpic:(s,l)=>s.pipe(wr(`${Kf}`),Nt(As),Pn(()=>{const{liveTranscription:{messageRecords:u}}=l.value;return u.length>=1e5?function(h){const{meeting:{meetingId:v},liveTranscription:{messageRecords:E,reducedRecordsCount:I}}=h;return void 0!==window.indexedDB?new Promise(R=>{const N=window.indexedDB.open(ay,1);N.addEventListener("upgradeneeded",()=>{const L=N.result;if(!L.objectStoreNames.contains($p)){const V=L.createObjectStore($p,{keyPath:["startIndex","mid"],autoIncrement:!1});V.createIndex("mid","mid",{unique:!1}),V.transaction.oncomplete=()=>{console.log(`Create objectStore [${$p}] complete`)}}}),N.addEventListener("success",()=>{const L=N.result,V=E.length,O=.9*V,X=V-O,ee=E.slice(0,O),re=I+ee.length,ne=L.transaction([$p],"readwrite");ne.objectStore($p).put({startIndex:I,mid:v,records:ee}),ne.oncomplete=()=>{R(qE({remains:X,reducedRecordsCount:re})),L.close()},ne.onerror=()=>{R(""),L.close()}})}):Promise.resolve("")}(l.value):Promise.resolve("")}),ln(u=>"object"==typeof u)),handleClearRecordsInDBEpic:(s,l)=>s.pipe(wr(`${Us}`,`${$m}`),ln(()=>l.value.liveTranscription.isRecordsReduced),Zn(()=>{!function(){if(void 0!==window.indexedDB){const u=window.indexedDB.open(ay,1);u.addEventListener("success",()=>{const h=u.result;h.objectStoreNames.contains($p)&&(window.indexedDB.deleteDatabase(ay),h.close())})}}()}),Pr(Ht))});const Am={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isHostDisableCaptions:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0},Z2=Gn({[`${bC}`]:gt((s,l)=>{let{payload:u}=l;s.isLiveTranscriptionEnabled=u}),[`${Vv}`]:gt((s,l)=>{let{payload:u}=l;const{transcriptionLang:h,translatedSetting:v,...E}=u;h&&(s.transcriptionLang=h.split(";").map(I=>{const R=I&&__[I];return void 0!==R?{lang:I,code:R}:null}).filter(Boolean)),v&&(s.translatedSetting=Object.keys(v).map(I=>{const R=v[I];if(R){const N=R.split(";").map(L=>{const V=L&&__[L];return void 0!==V?{lang:L,code:V}:null}).filter(Boolean);return{lang:I,code:__[I],translatedToLanguage:N}}return null}).filter(Boolean)),Object.assign(s,E)}),[`${SC}`]:gt((s,l)=>{let{payload:u}=l;s.isManualCaptionerEnabled=u}),[`${jv}`]:gt((s,l)=>{let{payload:u}=l;s.gatewayId=u}),[`${IC}`]:gt((s,l)=>{let{payload:u}=l;s.isHostDisableCaptions=u}),[`${CC}`]:gt((s,l)=>{let{payload:u}=l;s.supportedTranscriptionLanguage=u}),[`${Wf}`]:gt((s,l)=>{let{payload:u}=l;s.currentTranscriptionLang=u}),[`${kg}`]:gt((s,l)=>{let{payload:u}=l;s.currentTranslationLang=u}),[`${Kf}`]:gt((s,l)=>{let{payload:u}=l;s.messageRecords.push(u)}),[`${rM}`]:gt((s,l)=>{let{payload:u}=l;const h=s.messageRecords.find(v=>v.msgId===u.msgId);h&&Object.assign(h,u)}),[`${qE}`]:gt((s,l)=>{let{payload:u}=l;const{remains:h,reducedRecordsCount:v}=u,E=s.messageRecords.length-h;s.isRecordsReduced=!0,s.reducedRecordsCount=v,s.messageRecords.splice(0,E)}),[`${Vd}`]:gt((s,l)=>{let{payload:u}=l;s.isLiveTranscriptionSubscribed=u}),[`${F1}`]:gt((s,l)=>{let{payload:u}=l;s.liveTransEngineType=u}),[`${iM}`]:gt(s=>{s.stateBeforeFailover=void 0}),[`${U1}`]:gt((s,l)=>{let{payload:u}=l;s.lastManualCaption=u}),[`${Qv}`]:(s,l)=>{let{payload:u}=l;return u?{...Am,stateBeforeFailover:{currentTranscriptionLang:s.currentTranscriptionLang,currentTranslationLang:s.currentTranslationLang,isLiveTranscriptionSubscribed:s.isLiveTranscriptionSubscribed},messageRecords:s.messageRecords,isRecordsReduced:s.isRecordsReduced,reducedRecordsCount:s.reducedRecordsCount}:{...Am}}},Am);var Go;const od=ji.createAgent();let dw=(wn((Go=class extends Yr{startLiveTranscription(){const{[cr]:s,[Pu]:l}=this,{liveTranscription:{isLiveTranscriptionEnabled:u,isEnableTranslatedCaptions:h,isLiveTranscriptionSubscribed:v,isHostLockSpeakingLanguage:E,isHostDisableCaptions:I}}=s();return v?Promise.resolve(""):I?Promise.reject({type:fn,reason:"Captions has been disabled by host."}):u?(od.enableNewLLT(),Jr(tl).then(()=>{E?od.setSpokenLanguage(id.English):gl(id.Unspecified),l(Wf(id.English)),h&&od.setTranslationLanguage()})):Promise.reject({type:fn,reason:"Live transcription is not enabled."})}disableCaptions(s){const{[cr]:l}=this,{liveTranscription:{isHostDisableCaptions:u}}=l();return s?u?Promise.resolve():(od.disableCaptions(!0),Jr(Sh)):u?(od.disableCaptions(!1),Jr(Sh)):Promise.resolve()}setSpeakingLanguage(s){const{[cr]:l,[Pu]:u}=this,{liveTranscription:{isLiveTranscriptionSubscribed:h,isHostLockSpeakingLanguage:v,transcriptionLang:E}}=l(),I=E.find(R=>R.lang===s);if(I){const{code:R}=I;return h?(v?od.setSpokenLanguage(R):gl(R),u(Wf(R)),Promise.resolve("")):Promise.reject({type:fn,reason:"Cannot set speaking language before starting live transcription"})}return Promise.reject({type:Dr,reason:"Unsupported transcription language"})}setTranslationLanguage(s){const{[cr]:l,[Pu]:u}=this,h=l(),{liveTranscription:{isEnableTranslatedCaptions:v,isLiveTranscriptionSubscribed:E,translatedSetting:I,currentTranscriptionLang:R}}=h;if(!v)return Promise.reject({type:fn,reason:"Live translation is not enabled."});if(!E)return Promise.reject({type:fn,reason:"Cannot set translation language before starting live transcription"});if(s){const N=I?.find(L=>L.code===R);if(N){const{translatedToLanguage:L}=N,V=L.find(O=>O.lang===s);if(V)return od.setTranslationLanguage(V.code),Jr({event:tl,operations:[ln(O=>!0===O.autoCaption&&O.lang===V.code),ti(1)]},O=>{let{lang:X}=O;return X===V.code})}return Promise.reject({type:fn,reason:`Cannot support translating ${uS[R||0]} to ${s}`})}return od.setTranslationLanguage(),u(kg(void 0)),Promise.resolve("")}enableManualCaptioner(){const{[cr]:s}=this,{meeting:{meetingOptions:l},liveTranscription:{isManualCaptionerEnabled:u,isHostDisableCaptions:h}}=s();if(h)return Promise.reject({type:fn,reason:"Captions has been disabled by host."});const{isEnableManualCaptions:v,isEnableClosedCaption:E}=l;return v??E?u?Promise.resolve():(od.enableManualCaption(!0),Jr(tl,I=>{let{autoCaption:R}=I;return!1===R})):Promise.reject({type:fn,reason:"Manual caption is not enabled."})}disableManualCaptioner(){const{[cr]:s}=this,{liveTranscription:{isManualCaptionerEnabled:l}}=s();return l?(od.enableManualCaption(!1),Jr(tl,u=>{let{autoCaption:h}=u;return!0===h})):Promise.resolve()}assignManualCaption(s){var l;const{[cr]:u}=this,h=u(),{liveTranscription:{isManualCaptionerEnabled:v},participants:{attendeesList:E},meeting:{userId:I}}=h;return v?(null===(l=rD(h))||void 0===l?void 0:l.userId)===s?Promise.resolve(""):E.find(N=>N.userId===s)?(od.assignCC(s,!0),Jr({event:I===s?Zu:Dd,operations:[ln(N=>N.userId===s),ti(1)]},N=>!0===N.bCCEditor)):Promise.reject({type:Dr,reason:"Cannot find the user"}):Promise.reject({type:fn,reason:"Cannot assign caption editor due to the manual captioner is not enabled."})}sendCaptionTextManually(s,l){var u;const{[cr]:h,[Pu]:v}=this,E=h(),{liveTranscription:{lastManualCaption:I},meeting:{userId:R}}=E,N=Cr(E);let L=Promise.resolve();const V=null===(u=rD(E))||void 0===u?void 0:u.userId;return null!=N&&N.isHost&&V!==R&&(L=this.assignManualCaption(R)),L.then(()=>iF(h())?function(O,X,ee){const re=O.length,ne=[];var fe;if(ee)ne.push({op:"close",text:O,msgId:null!==(fe=X?.msgId)&&void 0!==fe?fe:Xs()});else if(X&&null!=X&&X.text){const ve=X.text.length;let Le=0,Qe=0;for(;O[Le]===X.text[Le]&&Le<re;)Qe+=t0(O[Le]),Le+=1;Le===ve&&Le===re?ne.push({op:"same"}):Le===ve&&Le<re?ne.push({op:"insert",text:O.slice(Le),size:0,pos:Qe,msgId:X.msgId}):Le<ve&&Le===re?ne.push({op:"delete",size:0,pos:Qe,msgId:X.msgId}):(ne.push({op:"delete",size:0,pos:Qe,msgId:X.msgId}),ne.push({op:"insert",text:O.slice(Le),pos:Qe,msgId:X.msgId}))}else re>0&&ne.push({op:"start",text:O,pos:0,size:0,msgId:Xs()});return ne.filter(ve=>"same"!==ve.op)}(s,I,l):Promise.reject({type:na,reason:"Cannot type caption "})).then(O=>Array.isArray(O)?(O.forEach(X=>{const{text:ee,...re}=X;wa.beginEncrypt({text:ee??"",type:Wc.CC_MESSAGE}).then(ne=>{od.sendManualCaption({text:ne,...re}),v(U1(l?void 0:{text:ee,msgId:X.msgId}))})}),Jr(dv,X=>X.source===qh.InMeetingManual)):"")}getLiveTranscriptionStatus(){const{[cr]:s}=this,{liveTranscription:{isLiveTranscriptionEnabled:l,isEnableTranslatedCaptions:u,isManualCaptionerEnabled:h,transcriptionLang:v,translatedSetting:E,isHostDisableCaptions:I}}=s();return{isLiveTranscriptionEnabled:l,isLiveTranslationEnabled:u,isHostDisableCaptions:I,isManualCaptionerEnabled:h,transcriptionLanguage:v.map(R=>R.lang).join(";"),translationLanguage:E?.map(R=>({speakingLanguage:R.lang,translatedToLanguage:R.translatedToLanguage.map(N=>N.lang).join(";")}))}}getLiveTranscriptionSetting(){const{[cr]:s}=this,{meeting:{meetingOptions:l}}=s(),{isEnableManualCaptions:u,isEnableLiveTranscription:h,isEnableClosedCaption:v,isEnableAllowThirdPartyCCToken:E,isEnableViewFullTranscript:I,isEnableSaveCaptions:R}=l||{};return{isEnableManualCaptions:u,isEnableLiveTranscription:h,isEnableClosedCaption:v,isEnableAllowThirdPartyCCToken:E,isEnableViewFullTranscript:I,isEnableSaveCaptions:R}}getCurrentTranscriptionLanguage(){const{[cr]:s}=this,{liveTranscription:{currentTranscriptionLang:l}}=s();return void 0!==l?{code:q[l],name:uS[l]}:null}getCurrentTranslationLanguage(){const{[cr]:s}=this,{liveTranscription:{currentTranslationLang:l}}=s();return void 0!==l?{code:q[l],name:uS[l]}:null}getLatestTranscription(){const{[cr]:s}=this,{liveTranscription:{messageRecords:l,isManualCaptionerEnabled:u}}=s(),h=u?id.DefaultManualInput:id.NoTranslation,v=l.filter(E=>E.language===h);return v.length?v[v.length-1].text:""}getLatestTranslation(){const{[cr]:s}=this,{liveTranscription:{messageRecords:l,currentTranslationLang:u,isEnableTranslatedCaptions:h}}=s();if(h||void 0!==u){const v=l.filter(E=>E.language===u);return v.length?v[v.length-1].text:""}return""}getFullTranscriptionHistory(){const{[cr]:s}=this,l=s(),{liveTranscription:{messageRecords:u,isRecordsReduced:h}}=l;return h?(v=l,void 0!==window.indexedDB?new Promise(E=>{const I=window.indexedDB.open(ay,1);I.addEventListener("success",()=>{const R=I.result;if(R.objectStoreNames.contains($p)){const N=R.transaction([$p],"readonly").objectStore($p),L=[],V=v.meeting.meetingId,O=N.openCursor();O.onsuccess=()=>{const X=O.result;X?(X.value.mid===V&&L.push(...X.value.records),X.continue()):(E(L),R.close())}}else E("")})}):Promise.resolve("")).then(v=>Array.isArray(v)?v.concat(u):[...u]):[...u];var v}getManualCaptionEditor(){const{[cr]:s}=this,l=s(),{closedCaption:{editorId:u}}=l;let h;if(!u)return{};if(h=ls(l).find(V=>V.userId===u),!h)return{};const{userId:v,isHost:E,displayName:I,avatar:R,bCoHost:N,zoomID:L}=h;return{userId:v,isHost:E,displayName:I,avatar:R,bCoHost:N,zoomID:L}}getManualCaptionUrl(){const{[cr]:s}=this,{meeting:{meetingOptions:l,ccUrl:u}}=s(),{isEnableManualCaptions:h}=l||{};return h?u:(console.warn("you not enable manual caption"),"")}}).prototype,"startLiveTranscription",[Tn],Object.getOwnPropertyDescriptor(Go.prototype,"startLiveTranscription"),Go.prototype),wn(Go.prototype,"disableCaptions",[cu,Tn],Object.getOwnPropertyDescriptor(Go.prototype,"disableCaptions"),Go.prototype),wn(Go.prototype,"setSpeakingLanguage",[Tn],Object.getOwnPropertyDescriptor(Go.prototype,"setSpeakingLanguage"),Go.prototype),wn(Go.prototype,"setTranslationLanguage",[Tn],Object.getOwnPropertyDescriptor(Go.prototype,"setTranslationLanguage"),Go.prototype),wn(Go.prototype,"enableManualCaptioner",[cu,Tn],Object.getOwnPropertyDescriptor(Go.prototype,"enableManualCaptioner"),Go.prototype),wn(Go.prototype,"disableManualCaptioner",[cu,Tn],Object.getOwnPropertyDescriptor(Go.prototype,"disableManualCaptioner"),Go.prototype),wn(Go.prototype,"assignManualCaption",[Tn,cu],Object.getOwnPropertyDescriptor(Go.prototype,"assignManualCaption"),Go.prototype),wn(Go.prototype,"sendCaptionTextManually",[Tn],Object.getOwnPropertyDescriptor(Go.prototype,"sendCaptionTextManually"),Go.prototype),Go);const oF=dc(_l);var dS;const sF={chat:{epic:N2,reducer:$B,Client:SO},logger:{epic:qb,reducer:Yb,Client:class extends Yr{getLogs(s){return B2.getLogs(this[Cs],s)}getStore(){return B2.doNotUseDirtyGetStore()}setLogOptions(s){s&&this[Cs].dispatch(wC(s))}reportToGlobalTracing(s){return B2.reportToGlobalTracing(s)}}},recording:{epic:ml,reducer:QA,Client:ZB},cmd:{epic:td,reducer:Jb,Client:$b},breakoutRoom:{epic:nF,reducer:Oi,Client:cS},liveTranscription:{epic:oF,reducer:Z2,Client:dw}},aF=ji.createAgent();let cF=(wn((dS=class extends QI{constructor(s){super(s),this.mediaStream=void 0,this[VI]=sF}getMediaStream(){return void 0===this.mediaStream&&(this.mediaStream=new ZO(this[Cs])),this.mediaStream}joinInstant(s,l,u,h,v,E){const{[cr]:I,[Pu]:R}=this,{meeting:{lang:N,meetingStatus:L},socket:{zoomSocketStatus:V}}=I();return l?L!==bs.Joined&&V===so.Closed?(R(Pi({topic:s,password:v||"",userName:u,zlk:l,lang:N,cv:h})),E&&R(tg(E)),Cv(el.JoinMeeting)):Promise.reject({type:fn,reason:"duplicated operation"}):Promise.reject({type:fn,reason:"invalid  signature"})}removeUser(s){const l=this[Cs].getState(),{participants:{attendeesList:u}}=l;return u.find(v=>v.userId===s)?(aF.expel(s),Jr(TT,v=>v.some(E=>E.userId===s))):Promise.reject({type:Dr,reason:"no matched user"})}}).prototype,"removeUser",[np,Tn],Object.getOwnPropertyDescriptor(dS.prototype,"removeUser"),dS.prototype),dS);class eN{constructor(l){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=l,this.mic=null,this.script=l.createScriptProcessor(2048,1,1),this.script.onaudioprocess=u=>{const h=u.inputBuffer.getChannelData(0);let v,E=0;for(v=0;v<h.length;++v)E+=h[v]*h[v];this.instant=Math.sqrt(E/h.length)}}connectToSource(l){console.log("InputMicDetector is listening");try{var u;this.mic=this.context.createMediaStreamSource(l),this.mic.connect(this.script),null===(u=this.script)||void 0===u||u.connect(this.context.destination)}catch(h){console.error(h)}}stop(){var l,u;console.log("Audio Previewer stopped"),null===(l=this.mic)||void 0===l||l.disconnect(),this.mic=null,null===(u=this.script)||void 0===u||u.disconnect(),this.script=null}getMicVolume(){return this.instant}}const uF="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class tN{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(l){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:h,sampleAudioUrl:v=uF,onAnalyseFrequency:E}=l||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),((null===(u=this.sampleAudio)||void 0===u?void 0:u.url)===v&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(v).then(R=>R.arrayBuffer()).then(R=>this.audioCtx.decodeAudioData(R)).then(R=>(this.sampleAudio={url:v,data:R},R))).then(R=>{var N,L,V;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=R,this.sourceNode.loop=!0,h&&null!==(N=this.audioPlayer)&&void 0!==N&&N.setSinkId&&this.audioPlayer.setSinkId(h),E?"function"==typeof AudioContext.prototype.createAnalyser?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=E,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),"running"!==(null===(L=this.audioCtx)||void 0===L?void 0:L.state)&&(null===(V=this.audioCtx)||void 0===V||V.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())});const I=()=>{this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0)};return{stop:I,destroy:()=>{var R;I(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(R=this.audioCtx)||void 0===R||R.close(),this.audioCtx=void 0}}}testMicrophone(l){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||"function"!=typeof AudioContext.prototype.createMediaStreamSource||"function"!=typeof(null===(u=navigator.mediaDevices)||void 0===u?void 0:u.getUserMedia))return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:h,speakerId:v,recordAndPlay:E,maxRecordDuration:I,onAnalyseFrequency:R,onStartRecording:N,onStopRecording:L,onStartPlayRecording:V,onStopPlayRecording:O}=l||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const X=()=>{E&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!h||{deviceId:h}}).then(re=>{var ne,fe,ve,Le;this.mAudioStream=re,this.mSourceNode=null===(ne=this.audioCtx)||void 0===ne?void 0:ne.createMediaStreamSource(re),this.audioPlayer.muted=!0,R?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=R,this.initAnalyserNode(),this.analyserNode&&(null===(ve=this.mSourceNode)||void 0===ve||ve.connect(this.analyserNode))):this.analyserCallback=void 0,E&&("function"==typeof MediaRecorder?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=Qe=>{Qe.data&&this.recorderChunks.push(Qe.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),L?.(),this.recorderChunks.length>0){var Qe;const ze=new Blob(this.recorderChunks,{type:(null===(Qe=this.recorderChunks[0])||void 0===Qe?void 0:Qe.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(ze),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,v,V,O),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,N?.(),this.maximumRecordingTimer=window.setTimeout(()=>{X()},I||1e4)):console.warn("Cannot record the sound due to the browser capability")),"running"!==(null===(fe=this.audioCtx)||void 0===fe?void 0:fe.state)&&(null===(Le=this.audioCtx)||void 0===Le||Le.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())});const ee=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(R&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach(re=>{re.stop()}),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:ee,stopRecording:X,destroy:()=>{var re;ee(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(re=this.audioCtx)||void 0===re||re.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024),this.analyserNodeBufferDataArray=new Uint8Array(this.analyserNode.frequencyBinCount),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let l=0;for(const h of this.analyserNodeBufferDataArray)l+=h;this.analyserCallback(l/this.analyserNodeBufferDataArray.length)}}playRecording(l,u,h,v){this.recorderPlayer=new Audio,this.recorderPlayer.src=l,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&u&&this.recorderPlayer.setSinkId(u);const E=()=>{v?.(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};this.recorderPlayer.onpause=()=>{E()},this.recorderPlayer.onended=()=>{E()},h?.(),this.recorderPlayer.play().finally(()=>{window.URL.revokeObjectURL(l)})}}const iD="AudioNotStartedError";class sa{constructor(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=l,this.tester=new tN}start(){var l=this;return U(function*(){if(l.audioStream||l.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const u=yield navigator.mediaDevices.getUserMedia(l.getAudioConstraints());l.audioStream=u,l.isAudioStarted=!0}catch(u){throw u}})()}unmute(){var l=this;return U(function*(){if(!l.audioStream||!l.isAudioStarted)throw new Error(iD);if(l.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return l.toggleMicIsMuted(!0)})()}mute(){var l=this;return U(function*(){if(!l.audioStream||!l.isAudioStarted)throw new Error(iD);if(!l.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return l.toggleMicIsMuted(!1)})()}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}stop(){var l=this;return U(function*(){if(!l.audioStream||!l.isAudioStarted)throw new Error(iD);l.audioStream.getAudioTracks().forEach(u=>u.stop()),l.audioStream=null,l.isAudioStarted=!1})()}toggleMicIsMuted(l){var u=this;return U(function*(){if(l){if(!u.audioContext){const h=window.AudioContext||window.webkitAudioContext;u.audioContext=new h}u.inputMicDetector=new eN(u.audioContext),u.inputMicDetector.connectToSource(u.audioStream)}else u.inputMicDetector&&u.inputMicDetector.stop(),u.inputMicDetector=null;u.isMicUnmuted=l})()}getAudioConstraints(){return{audio:""===this.deviceId||{deviceId:this.deviceId},video:!1}}testSpeaker(l){return this.tester.testSpeaker(l)}testMicrophone(l){return this.tester.testMicrophone(l)}}const s4={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class oD{constructor(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.isVideoStarted=!1,this.videoStream=null,this.deviceId=l}start(l){var u=this;return U(function*(){if(!l)throw new Error("Video DOM element is falsy");if(u.isVideoStarted||u.videoStream)throw new Error("VideoAlreadyStartedError");const h=function(){var v=U(function*(E){if(!E||"OverconstrainedError"!==E.name&&"ConstraintNotSatisfiedError"!==E.name)throw E;console.log(`Warning: detected ${E.name} -- trying to fall back to lower aspect ratio`);try{const I=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints(!0));return u.tryPlayVideo(l,I)}catch(I){throw I}});return function(I){return v.apply(this,arguments)}}();try{const v=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints());return u.tryPlayVideo(l,v)}catch(v){return h(v)}})()}stop(){var l=this;return U(function*(){if(!l.videoStream||!l.isVideoStarted)throw new Error("VideoNotStartedError");l.videoStream.getVideoTracks().forEach(u=>u.stop()),l.videoStream=null,l.isVideoStarted=!1})()}getVideoConstraints(){let l=s4;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?l=""===this.deviceId||{deviceId:this.deviceId}:""!==this.deviceId&&(l.deviceId=this.deviceId),{audio:!1,video:l}}tryPlayVideo(l,u){var h=this;return U(function*(){if(!l)throw new Error("Video DOM element is falsy");try{h.videoStream=u,l.srcObject=h.videoStream,yield l.play(),h.isVideoStarted=!0}catch(v){throw v}})()}}class Jh{static createClient(){if(!this.meetingClient){const l=function VA(){const s=function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=new zt.constructor(zt.SchedulerAction),R=new Be,N=void 0,L=function(V){N=V;var O=(new Be).pipe(Nt(I)),X=(new Be).pipe(Nt(I)),ee=new mL(O),re=new gL(X,N.getState());return R.pipe(ht(function(fe){var ve="dependencies"in E?fe(ee,re,E.dependencies):fe(ee,re);if(!ve)throw new TypeError('Your root Epic "'+(fe.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return ve}),Pn(function(fe){return En(fe).pipe((ve=I,void 0===Le&&(Le=0),function(Qe){return Qe.lift(new Mk(ve,Le))}),Nt(I));var ve,Le})).subscribe(N.dispatch),function(fe){return function(ve){var Le=fe(ve);return X.next(N.getState()),O.next(ve),Le}}};return L.run=function(V){R.next(V)},L}(),{epicSubject:l,rootEpic:u}=function(){const E=new Re(Uk(HM,TB,uI,i4));return{epicSubject:E,rootEpic:(I,R,N)=>E.pipe(Pn(L=>L(I,R,N)))}}(),h=[s],v=lT(YB(),k2(function(){for(var E=arguments.length,I=new Array(E),R=0;R<E;R++)I[R]=arguments[R];return function(N){return function(){var L=N.apply(void 0,arguments),V=function(){throw new Error(_i(15))},O={getState:L.getState,dispatch:function(){return V.apply(void 0,arguments)}},X=I.map(function(ee){return ee(O)});return V=ky.apply(void 0,X)(L.dispatch),Pk(Pk({},L),{},{dispatch:V})}}}(...h)));return v.asyncReducers={},v.injectReducer=(E,I)=>{void 0===v.asyncReducers[E]&&(v.asyncReducers[E]=I,v.replaceReducer(YB(v.asyncReducers)))},v.injectEpic=E=>{l.next(E)},s.run(u),v}();this.meetingClient=new cF(l)}return this.meetingClient}static destroyClient(){this.meetingClient&&(this.meetingClient.leave().then(()=>{ua(500).subscribe(()=>{bg()})}),this.meetingClient=null)}static checkFeatureRequirements(){return function(){const l=[],u=[];!Au()&&(Sf()||p0())&&Nl()?l.push("Virtual Background"):u.push("Virtual Background"),!Au()&&Sf()&&Nl()?(l.push("720p Video (send)"),l.push("Share Chrome Tab Audio")):(u.push("720p Video (send)"),u.push("Share Chrome Tab Audio")),!Au()&&(Sf()||ig()||p0())&&Nl()?l.push("Render Multiple Videos"):u.push("Render Multiple Videos"),!Au()&&Nl()?(l.push("Screen Share (send)"),l.push("720p Video (receive)"),l.push("Share 2nd Camera")):(u.push("Screen Share (send)"),u.push("720p Video (receive)"),u.push("Share 2nd Camera")),Nl()?(l.push("Audio"),l.push("Video"),l.push("Screen Share (receive)"),l.push("Chat"),l.push("Closed Captioning"),l.push("Live Transcription"),l.push("Live Translation"),l.push("Cloud Recording"),l.push("Call Out (PSTN)"),l.push("Command Channel"),l.push("RTMP Live Streaming"),l.push("Encryption")):(u.push("Audio"),u.push("Video"),u.push("Screen Share (receive)"),u.push("Chat"),u.push("Closed Captioning"),u.push("Live Transcription"),u.push("Live Translation"),u.push("Cloud Recording"),u.push("Call Out (PSTN)"),u.push("Command Channel"),u.push("RTMP Live Streaming"),u.push("Encryption"));const h=Au()?Od():rv();return u.length>0&&console.log("Some features are not supported on your platform, please refer to https://developers.zoom.us/docs/video-sdk/web/browser-support/"),{platform:h,supportFeatures:l,unSupportFeatures:u}}()}static checkSystemRequirements(){return{audio:mc()&&Yy()||Dp(),video:mc()&&void 0!==navigator.mediaDevices,screen:mc()&&"function"==typeof(null===(l=navigator.mediaDevices)||void 0===l?void 0:l.getDisplayMedia)};var l}static getDevices(l){return l?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(u=>(u.getTracks().forEach(h=>h.stop()),navigator.mediaDevices.enumerateDevices()))}static createLocalAudioTrack(){return new sa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static createLocalVideoTrack(){return new oD(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static preloadDependentAssets(l){var u;(u=U(function*(h){var v;const E=h||Wv,I=`${E}/${tP}`,R=[],N=[],L=`${E}/`;if(Uh()){const{workers:X,wasms:ee}=ul("audio","simd",L);R.push(...X),N.push(...ee)}else{const{workers:X,wasms:ee}=ul("audio","",L);R.push(...X),N.push(...ee)}if(Uh()&&Ma()){const{workers:X,wasms:ee}=ul(["video","sharing"],"simd,thread",L);R.push(...X),N.push(...ee)}else if(Ma()){const{workers:X,wasms:ee}=ul(["video","sharing"],"thread",L);R.push(...X),N.push(...ee)}else if(Uh()){const{workers:X,wasms:ee}=ul(["video","sharing"],"simd",L);R.push(...X),N.push(...ee)}else{const{workers:X,wasms:ee}=ul(["video","sharing"],"",L);R.push(...X),N.push(...ee)}const V=[Jf(I,"script")];R.forEach(X=>{V.push(Jf(X,"fetch"))});let O=!1;if(null!==(v=window.indexedDB)&&void 0!==v&&v.databases)try{const X=yield window.indexedDB.databases(),ee='"audio:3101;video:3101"'.split(";").map(re=>{const[ne,fe]=re.split(":");return{[`${ne}`]:Number(fe)}}).reduce((re,ne)=>({...re,...ne}),{});ee&&(O=["AUDIO_FILE","VIDEO_FILE"].every(re=>{const ne="AUDIO_FILE"===re?ee.audio:ee.video;return-1!==X.findIndex(fe=>fe.name===re&&fe.version===ne)}))}catch{}O||N.forEach(X=>{V.push(Jf(X,"fetch"))});try{document.head.append(...V)}catch{}}),function(h){return u.apply(this,arguments)})(l)}}Jh.meetingClient=void 0,Jh.VERSION=OC;var cy="1.8.2",sD="INVALID_PARAMETERS",a4="https://dmogdx0jrul3u.cloudfront.net/videosdk/".concat(cy,"/lib"),lF="https://source.zoom.us/videosdk/".concat(cy,"/lib"),c4="https://jssdk.zoomus.cn/videosdk/".concat(cy,"/lib"),pw=function(s){return"string"==typeof s&&s.length>0},dF=function(s){var l="";switch(s){case"Global":l=lF;break;case"CN":l=c4;break;case"CDN":l=a4;break;default:l=s}return l},xc=["userId","avatar","displayName","isHost","audio","muted","bVideoOn","sharerOn","sharerPause","userIdentity","isSpeakerOnly","bVideoShare","bShareAudioOn","userGuid","isPhoneUser",{from:"isCoHost",to:"isManager"},{from:"bAllowISORecord",to:"isAllowIndividualRecording"},{from:"bVideoConnect",to:"isVideoConnect"},{from:"bShareToBORooms",to:"bShareToSubsession"},{from:"phoneNumber",to:function(s){return void 0===s?{}:{phoneNumber:s}}}],aD=[].concat(xc,[{from:"userGUID",to:"userGuid"},{from:"bCoHost",to:function(s){return{isManager:!!s}}},{from:"userType",to:function(s){return{isPhoneUser:5==(5&s)}}},{from:"bid",to:function(s){return s?{subsessionId:s}:{}}}]),pF=aD.map(function(s){return"string"==typeof s?s:s.from});function pS(s,l){return"string"==typeof s?F({},"".concat(s),l):"string"==typeof s.to?F({},"".concat(s.to),l):s.to(l)}function ip(s){if(s)return xc.reduce(function(l,u){var v=pS(u,s["string"==typeof u?u:u.from]);return H(H({},l),v)},{})}function hS(s){if(s)return Object.keys(s).reduce(function(l,u){var h=pF.indexOf(u);if(h>-1){var v=aD[h],I=pS(v,s["string"==typeof v?v:v.from]);return H(H({},l),I)}return l},{})}var uy,hw,v_,sd,$h,A_,fS,_n=Symbol("stream"),ly=function(){function s(l){M(this,s),this[_n]=void 0,this[_n]=l}return x(s,[{key:"startAudio",value:function(l){return this[_n].startAudio(l)}},{key:"stopAudio",value:function(){return this[_n].stopAudio()}},{key:"muteAudio",value:function(l){return this[_n].muteAudio(l)}},{key:"unmuteAudio",value:function(l){return this[_n].unmuteAudio(l)}},{key:"inviteByPhone",value:function(l,u,h,v){return this[_n].dialOut(l,u,h,v)}},{key:"cancelInviteByPhone",value:function(l,u,h){return this[_n].cancelDialOut(l,u,h)}},{key:"hangup",value:function(){return this[_n].hangup()}},{key:"getCurrentSessionCallinInfo",value:function(){return this[_n].getDialInInfo()}},{key:"muteShareAudio",value:function(l){return this[_n].muteShareAudio(l)}},{key:"unmuteShareAudio",value:function(l){return this[_n].unmuteShareAudio(l)}},{key:"subscribeAudioStatisticData",value:function(l){return this[_n].subscribeAudioStatisticData(l)}},{key:"unsubscribeAudioStatisticData",value:function(l){return this[_n].unsubscribeAudioStatisticData(l)}},{key:"muteUserAudioLocally",value:function(l){return this[_n].muteUserAudioLocally(l)}},{key:"unmuteUserAudioLocally",value:function(l){return this[_n].unmuteUserAudioLocally(l)}},{key:"adjustUserAudioVolumeLocally",value:function(l,u){return this[_n].adjustUserAudioVolumeLocally(l,u)}},{key:"enableBackgroundNoiseSuppression",value:function(l){return this[_n].enableBackgroundNoiseSuppression(l)}},{key:"enableSyncButtonsOnHeadset",value:function(l){return this[_n].enableSyncButtonsOnHeadset(l)}},{key:"muteAllUserAudioLocally",value:function(){return this[_n].muteAllUserAudioLocally()}},{key:"unmuteAllUserAudioLocally",value:function(){return this[_n].unmuteAllUserAudioLocally()}},{key:"isAudioMuted",value:function(l){return this[_n].isAudioMuted(l)}},{key:"getMicList",value:function(){return this[_n].getMicList()}},{key:"getSpeakerList",value:function(){return this[_n].getSpeakerList()}},{key:"getActiveMicrophone",value:function(){return this[_n].getActiveMicrophone()}},{key:"getActiveSpeaker",value:function(){return this[_n].getActiveSpeaker()}},{key:"switchMicrophone",value:function(l){return this[_n].switchMicrophone(l)}},{key:"switchSpeaker",value:function(l){return this[_n].switchSpeaker(l)}},{key:"isSupportPhoneFeature",value:function(){return this[_n].isSupportCallOut()}},{key:"getSupportCountryInfo",value:function(){return this[_n].getDialOutCountries()}},{key:"getInviteByPhoneStatus",value:function(){return this[_n].getDialOutStatus()}},{key:"getShareAudioStatus",value:function(){return this[_n].getShareAudioStatus()}},{key:"isOthersShareAudioMutedLocally",value:function(l){return this[_n].isOthersShareAudioMutedLocally(l)}},{key:"getAudioStatisticData",value:function(){return this[_n].getAudioStatisticData()}},{key:"isUserAudioMutedLocally",value:function(l){return this[_n].isUserAudioMutedLocally(l)}},{key:"getUserVolumeLocally",value:function(l){return this[_n].getUserVolumeLocally(l)}},{key:"isSupportMicrophoneAndShareAudioSimultaneously",value:function(){return this[_n].isSupportMicrophoneAndShareAudioSimultaneously()}},{key:"startVideo",value:function(l){return this[_n].startVideo(l)}},{key:"stopVideo",value:function(){return this[_n].stopVideo()}},{key:"renderVideo",value:function(l,u,h,v,E,I,R,N){return this[_n].renderVideo(l,u,h,v,E,I,R,N)}},{key:"stopRenderVideo",value:function(l,u,h,v){return this[_n].stopRenderVideo(l,u,h,v,arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}},{key:"updateVideoCanvasDimension",value:function(l,u,h){return this[_n].updateVideoCanvasDimension(l,u,h)}},{key:"adjustRenderedVideoPosition",value:function(l,u,h,v,E,I,R){return this[_n].adjustRenderedVideoPosition(l,u,h,v,E,I,R)}},{key:"clearVideoCanvas",value:function(l,u){return this[_n].clearVideoCanvas(l,u)}},{key:"mirrorVideo",value:function(l){return this[_n].mirrorVideo(l)}},{key:"enableHardwareAcceleration",value:function(l){return this[_n].enableHardwareAcceleration(l)}},{key:"previewVirtualBackground",value:function(l,u,h){return this[_n].previewVirtualBackground(l,u,h)}},{key:"updateVirtualBackgroundImage",value:function(l,u){return this[_n].updateVirtualBackgroundImage(l,u)}},{key:"stopPreviewVirtualBackground",value:function(){return this[_n].stopPreviewVirtualBackground()}},{key:"previewVideoMask",value:function(l,u){return this[_n].previewVideoMask(l,u)}},{key:"updateVideoMask",value:function(l){return this[_n].updateVideoMask(l)}},{key:"stopPreviewVideoMask",value:function(){return this[_n].stopPreviewVideoMask()}},{key:"switchCamera",value:function(l){return this[_n].switchCamera(l)}},{key:"subscribeVideoStatisticData",value:function(l){return this[_n].subscribeVideoStatisticData(l)}},{key:"unsubscribeVideoStatisticData",value:function(l){return this[_n].unsubscribeVideoStatisticData(l)}},{key:"isCapturingVideo",value:function(){return this[_n].isCapturingVideo()}},{key:"isCameraTaken",value:function(){return this[_n].isCameraTaken()}},{key:"getActiveVideoId",value:function(){return this[_n].getActiveVideoId()}},{key:"getActiveCamera",value:function(){return this[_n].getActiveCamera()}},{key:"getCameraList",value:function(){return this[_n].getCameraList()}},{key:"isCaptureForbidden",value:function(){return this[_n].isCaptureForbidden()}},{key:"getVideoMaxQuality",value:function(){return this[_n].getVideoMaxQuality()}},{key:"getReceivedVideoDimension",value:function(){return this[_n].getReceivedVideoDimension()}},{key:"isSupportMultipleVideos",value:function(){return this[_n].isSupportMultipleVideos()}},{key:"isSupportHDVideo",value:function(){return this[_n].isSupportHDVideo()}},{key:"isSupportVirtualBackground",value:function(){return this[_n].isSupportVirtualBackground()}},{key:"getVirtualbackgroundStatus",value:function(){return this[_n].getVirtualbackgroundStatus()}},{key:"getVideoStatisticData",value:function(){return this[_n].getVideoStatisticData()}},{key:"isRenderSelfViewWithVideoElement",value:function(){return this[_n].isRenderSelfViewWithVideoElement()}},{key:"getCapturedVideoResolution",value:function(){return this[_n].getCapturedVideoResolution()}},{key:"getVideoMaskStatus",value:function(){return this[_n].getVideoMaskStatus()}},{key:"startShareView",value:function(l,u){return this[_n].startShareView(l,u)}},{key:"stopShareView",value:function(){return this[_n].stopShareView()}},{key:"switchShareView",value:function(l){return this[_n].switchShareView(l)}},{key:"startShareScreen",value:function(l,u){return void 0!==u?.broadcastToSubsession&&Object.assign(u||{},{broadcastToBreakoutRoom:u?.broadcastToSubsession}),this[_n].startShareScreen(l,u)}},{key:"pauseShareScreen",value:function(){return this[_n].pauseShareScreen()}},{key:"resumeShareScreen",value:function(){return this[_n].resumeShareScreen()}},{key:"stopShareScreen",value:function(){return this[_n].stopShareScreen()}},{key:"lockShare",value:function(l){return this[_n].lockShare(l)}},{key:"updateSharingCanvasDimension",value:function(l,u){return this[_n].updateSharingCanvasDimension(l,u)}},{key:"switchSharingSecondaryCamera",value:function(l){return this[_n].switchSharingSecondaryCamera(l)}},{key:"setSharePrivilege",value:function(l){return this[_n].setSharePrivilege(l)}},{key:"shareToSubsession",value:function(){return this[_n].shareToBreakoutRoom()}},{key:"stopShareToSubsession",value:function(){return this[_n].stopShareToBreakoutRoom()}},{key:"enableOptimizeForSharedVideo",value:function(l){return this[_n].enableOptimizeForSharedVideo(l)}},{key:"updateSharedVideoQuality",value:function(l){return this[_n].updateSharedVideoQuality(l)}},{key:"subscribeShareStatisticData",value:function(l){return this[_n].subscribeShareStatisticData(l)}},{key:"unsubscribeShareStatisticData",value:function(l){return this[_n].unsubscribeShareStatisticData(l)}},{key:"isShareLocked",value:function(){return this[_n].isShareLocked()}},{key:"getSharePrivilege",value:function(){return this[_n].getSharePrivilege()}},{key:"getActiveShareUserId",value:function(){return this[_n].getActiveShareUserId()}},{key:"getShareStatus",value:function(){return this[_n].getShareStatus()}},{key:"getShareUserList",value:function(){return this[_n].getShareUserList().map(function(l){return ip(l)})}},{key:"isStartShareScreenWithVideoElement",value:function(){return this[_n].isStartShareScreenWithVideoElement()}},{key:"isOptimizeForSharedVideoEnabled",value:function(){return this[_n].isOptimizeForSharedVideoEnabled()}},{key:"isSupportOptimizedForSharedVideo",value:function(){return this[_n].isSupportOptimizedForSharedVideo()}},{key:"getShareStatisticData",value:function(){return this[_n].getShareStatisticData()}},{key:"requestFarEndCameraControl",value:function(l){return this[_n].requestFarEndCameraControl(l)}},{key:"approveFarEndCameraControl",value:function(l){return this[_n].approveFarEndCameraControl(l)}},{key:"declineFarEndCameraControl",value:function(l){return this[_n].declineFarEndCameraControl(l)}},{key:"giveUpFarEndCameraControl",value:function(l){return this[_n].giveUpFarEndCameraControl(l)}},{key:"controlCamera",value:function(l){return this[_n].controlCamera(l)}},{key:"controlFarEndCamera",value:function(l){return this[_n].controlFarEndCamera(l)}},{key:"getFarEndCameraPTZCapability",value:function(l){return this[_n].getFarEndCameraPTZCapability(l)}},{key:"getCameraPTZCapability",value:function(l){return this[_n].getCameraPTZCapability(l)}},{key:"isBrowserSupportPTZ",value:function(){return this[_n].isBrowserSupportPTZ()}},{key:"getNetworkQuality",value:function(l){return this[_n].getNetworkQuality(l)}}]),s}(),hF=["isCoHost"],Xp=Symbol("chat"),u4=function(){function s(l){M(this,s),this[Xp]=void 0,this[Xp]=l}return x(s,[{key:"send",value:function(l,u){return this[Xp].send(l,u)}},{key:"sendToAll",value:function(l){return this[Xp].send(l,oo.All)}},{key:"setPrivilege",value:function(l){return this[Xp].setPrivilege(l)}},{key:"getPrivilege",value:function(){return this[Xp].getPrivilege()}},{key:"getReceivers",value:function(){return this[Xp].getReceivers().map(function(l){return H({isManager:l.isCoHost},J(l,hF))})}},{key:"getHistory",value:function(){return this[Xp].getHistory()}}]),s}(),Zp=Symbol("recording"),l4=function(){function s(l){M(this,s),this[Zp]=void 0,this[Zp]=l}return x(s,[{key:"canStartRecording",value:function(){return this[Zp].isRecordingEnabled()}},{key:"startCloudRecording",value:function(){return this[Zp].startRecording()}},{key:"pauseCloudRecording",value:function(){return this[Zp].pauseRecording()}},{key:"resumeCloudRecording",value:function(){return this[Zp].startRecording()}},{key:"stopCloudRecording",value:function(){return this[Zp].stopRecording()}},{key:"getCloudRecordingStatus",value:function(){return this[Zp].getRecordingStatus()}},{key:"acceptIndividualRecording",value:function(){return this[Zp].accept()}},{key:"declineIndividualRecording",value:function(){return this[Zp].decline()}}]),s}(),cD=Symbol("command"),mS=function(){function s(l){M(this,s),this[cD]=void 0,this[cD]=l}return x(s,[{key:"send",value:function(l,u){return this[cD].send(l,u)}}]),s}(),d4=["isInRoom"],uD=["isAutoJoinRoom"],_a=Symbol("breakout-room"),p4=function(){function s(l){M(this,s),this[_a]=void 0,this[_a]=l}return x(s,[{key:"createSubsessions",value:function(l,u){return this[_a].createRooms(l,u).then(function(h){return h.map(function(v){return{subsessionId:v.roomId,subsessionName:v.name,userList:v.attendeeList}})})}},{key:"openSubsessions",value:function(l,u){var h=u?H(H({},u),{},{isAutoJoinRoom:u.isAutoJoinSubsession}):void 0,v=l.map(function(E){return{roomId:E.subsessionId,name:E.subsessionName,attendeeList:E.userList}});return this[_a].openRooms(v,h)}},{key:"joinSubsession",value:function(l){return this[_a].joinRoom(l)}},{key:"leaveSubsession",value:function(){return this[_a].leaveRoom()}},{key:"askForHelp",value:function(){return this[_a].askForHelp()}},{key:"postponeHelping",value:function(l){return this[_a].postponeHelping(l)}},{key:"broadcast",value:function(l){return this[_a].broadcast(l)}},{key:"assignUserToSubsession",value:function(l,u){return this[_a].assignUserToRoom(l,u)}},{key:"moveUserToSubsession",value:function(l,u){return this[_a].moveUserToRoom(l,u)}},{key:"closeAllSubsessions",value:function(){return this[_a].closeRoom()}},{key:"getUnassignedUserList",value:function(){return this[_a].getUnassignedAttendeeList().map(function(l){return ip(l)})}},{key:"getSubsessionList",value:function(){return this[_a].getRoomList().map(function(l){return{subsessionId:l.roomId,subsessionName:l.name,userList:l.attendeeList.map(function(u){return H({isInSubsession:u.isInRoom},J(u,d4))})}})}},{key:"getUserStatus",value:function(){return this[_a].getAttendeeStatus()}},{key:"getSubsessionStatus",value:function(){return this[_a].getRoomStatus()}},{key:"getCurrentSubsession",value:function(){var l=this[_a].getCurrentRoom();return{userStatus:l.attendeeStatus,subsessionName:l.name,subsessionId:l.roomId}}},{key:"getSubsessionOptions",value:function(){var l=this[_a].getRoomOptions();return H({isAutoJoinSubsession:l.isAutoJoinRoom},J(l,uD))}}]),s}(),Nu=Symbol("liveTranscription"),h4=function(){function s(l){M(this,s),this[Nu]=void 0,this[Nu]=l}return x(s,[{key:"startLiveTranscription",value:function(){return this[Nu].startLiveTranscription()}},{key:"setSpeakingLanguage",value:function(l){return this[Nu].setSpeakingLanguage(l)}},{key:"setTranslationLanguage",value:function(l){return this[Nu].setTranslationLanguage(l)}},{key:"getLiveTranscriptionStatus",value:function(){return this[Nu].getLiveTranscriptionStatus()}},{key:"getCurrentTranscriptionLanguage",value:function(){return this[Nu].getCurrentTranscriptionLanguage()}},{key:"getCurrentTranslationLanguage",value:function(){return this[Nu].getCurrentTranslationLanguage()}},{key:"getLatestTranscription",value:function(){return this[Nu].getLatestTranscription()}},{key:"getLatestTranslation",value:function(){return this[Nu].getLatestTranslation()}},{key:"getFullTranscriptionHistory",value:function(){return this[Nu].getFullTranscriptionHistory()}},{key:"disableCaptions",value:function(l){return this[Nu].disableCaptions(l)}}]),s}(),dy=Symbol("logger"),f4=function(){function s(l,u){M(this,s),this[dy]=void 0,this[dy]=l,u&&this[dy].setLogOptions(u)}return x(s,[{key:"getLogs",value:function(l){return this[dy].getLogs(l)}},{key:"getStore",value:function(){return this[dy].getStore()}},{key:"reportToGlobalTracing",value:function(l){return this[dy].reportToGlobalTracing(l)}}]),s}(),lD=["roomName"],fF=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:function(s){var l=s.roomName,u=J(s,lD);return l?H(H({},u),{},{subsessionName:l}):s}},{event:"user-added",originalEvent:"user-added",payloadTransform:function(s){return s.map(function(l){return hS(l)})}},{event:"user-updated",originalEvent:"user-updated",payloadTransform:function(s){return s.map(function(l){return hS(l)})}},{event:"user-removed",originalEvent:"user-removed",payloadTransform:function(s){return s.map(function(l){return hS(l)})}},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:function(s){return{subsessionId:s.roomId,subsessionName:s.name}}},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:function(s){return{userId:s.userId,displayName:s.displayName,subsessionId:s.roomId,subsessionName:s.roomName}}},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"}],qi=Symbol("Client"),vl=new WeakMap,lu=function(){function s(){M(this,s),this[qi]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this.logger=void 0,this[qi]=Jh.createClient(),vl.set(this,new Map)}return x(s,[{key:"init",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",u=arguments.length>2?arguments[2]:void 0,h=dF(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global");return!1===window.isSecureContext&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),function(){var v="__ZOOM_VIDEO_SDK_DOM_STORAGE_TEST__";try{return localStorage.setItem(v,v),localStorage.removeItem(v),sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch{return!1}}()||console.warn("localstorage or sessionstorage is not enabled, please enable to use the video sdk,"),this[qi].init("","",{language:l,dependentAssets:h,constraints:H(H({},Jh.checkSystemRequirements()),{},{screen:"object"===(typeof WebAssembly>"u"?"undefined":j(WebAssembly))&&"function"==typeof Worker}),additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription","logger"],webEndpoint:u?.webEndpoint||"zoom.us",skipJsMedia:u?.skipJsMedia,enforceMultipleVideos:u?.enforceMultipleVideos,stayAwake:u?.stayAwake,enforceVirtualBackground:u?.enforceVirtualBackground,quicklyLeaveMeeting:u?.leaveOnPageUnload})}},{key:"join",value:function(l,u,h,v,E){return pw(l)&&pw(u)&&pw(h)?l.length>200?Promise.reject({type:sD,reason:"The maximum length of topic is 200"}):h.length>200?Promise.reject({type:sD,reason:"The maximum length of username is 200"}):v&&("string"!=typeof v||v.length>10)?Promise.reject({type:sD,reason:"The maximum length of password is 10"}):this[qi].joinInstant(l,u,h,cy,v,E):Promise.reject({type:sD,reason:"Topic, token and userName must be string and required"})}},{key:"leave",value:function(){var l;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(null===(l=vl.get(this))||void 0===l||l.clear(),this[qi].end()):this[qi].leave()}},{key:"on",value:function(l,u){var h=fF.find(function(L){return L.event===l});if(h){var v=h.originalEvent,E=h.payloadTransform;if(E){var I=function(L){var V=E(L);u(V)};this[qi].on(v,I);var R=vl.get(this);R&&(R.has(l)||R.set(l,[]),R.get(l)?.push({originalCb:u,newCb:I}))}else this[qi].on(v,u)}else this[qi].on(l,u)}},{key:"off",value:function(l,u){var h=fF.find(function(L){return L.event===l});if(h){var v=h.originalEvent;if(h.payloadTransform){var E=vl.get(this);if(E){var I=E.get(l),R=I?.find(function(L){return L.originalCb===u});if(R&&I){this[qi].off(v,R.newCb);var N=I?.filter(function(L){return L.originalCb!==u});E.set(l,N)}}}else this[qi].off(v,u)}else this[qi].off(l,u)}},{key:"getMediaStream",value:function(){return this.stream||(this.stream=new ly(this[qi].getMediaStream())),this.stream}},{key:"getChatClient",value:function(){return this.chat||(this.chat=new u4(this[qi].getFeatureModule("chat"))),this.chat}},{key:"getRecordingClient",value:function(){return this.recording||(this.recording=new l4(this[qi].getFeatureModule("recording"))),this.recording}},{key:"getCommandClient",value:function(){return this.command||(this.command=new mS(this[qi].getFeatureModule("cmd"))),this.command}},{key:"getSubsessionClient",value:function(){return this.subsession||(this.subsession=new p4(this[qi].getFeatureModule("breakoutRoom"))),this.subsession}},{key:"getLiveTranscriptionClient",value:function(){return this.liveTranscription||(this.liveTranscription=new h4(this[qi].getFeatureModule("liveTranscription"))),this.liveTranscription}},{key:"getLoggerClient",value:function(l){return this.logger||(this.logger=new f4(this[qi].getFeatureModule("logger"),l)),this.logger}},{key:"getSessionInfo",value:function(){var l=this[qi].getMeetingInfo();return{isInMeeting:l.isInMeeting||!1,password:l.password||"",topic:l.topic,userName:l.userName,userId:l.userId,sessionId:l.meetingId}}},{key:"getCurrentUserInfo",value:function(){return ip(this[qi].getCurrentUserInfo())}},{key:"getUser",value:function(l){return ip(this[qi].getParticipantsList().find(function(u){return u.userId===l}))}},{key:"getAllUser",value:function(){return this[qi].getParticipantsList().map(function(l){return ip(l)})}},{key:"changeName",value:function(l,u){return this[qi].changeName(l,u)}},{key:"makeHost",value:function(l){return this[qi].makeHost(l)}},{key:"removeUser",value:function(l){return this[qi].removeUser(l)}},{key:"makeManager",value:function(l){return this[qi].makeCoHost(l)}},{key:"revokeManager",value:function(l){return this[qi].revokeCoHost(l)}},{key:"reclaimHost",value:function(){return this[qi].reclaimHost()}},{key:"isHost",value:function(){return this[qi].isHost()}},{key:"isOriginalHost",value:function(){return this[qi].isOriginHost()}},{key:"getSessionHost",value:function(){return ip(this[qi].getMeetingHost())}},{key:"isManager",value:function(){return this[qi].isCoHost()}}]),s}(),y_=function(){function s(){M(this,s)}return x(s,null,[{key:"createClient",value:function(){return this.videoClient||(this.videoClient=new lu),this.videoClient}},{key:"destroyClient",value:function(){this.videoClient&&(this.videoClient.leave(),this.videoClient=null)}},{key:"checkSystemRequirements",value:function(){return Jh.checkSystemRequirements()}},{key:"checkFeatureRequirements",value:function(){return Jh.checkFeatureRequirements()}},{key:"getDevices",value:function(l){return Jh.getDevices(l)}},{key:"createLocalAudioTrack",value:function(){return Jh.createLocalAudioTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"createLocalVideoTrack",value:function(){return Jh.createLocalVideoTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"preloadDependentAssets",value:function(){Jh.preloadDependentAssets(dF(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global"))}}]),s}();y_.videoClient=void 0,y_.VERSION=cy,te.ChatPrivilege=void 0,(uy=te.ChatPrivilege||(te.ChatPrivilege={}))[uy.All=1]="All",uy[uy.NoOne=4]="NoOne",uy[uy.EveryonePublicly=5]="EveryonePublicly",te.ChatMsgType=void 0,(hw=te.ChatMsgType||(te.ChatMsgType={}))[hw.All=0]="All",te.SubsessionAllocationPattern=void 0,(v_=te.SubsessionAllocationPattern||(te.SubsessionAllocationPattern={}))[v_.Automatically=IE.Automatically]="Automatically",v_[v_.Manually=IE.Manually]="Manually",te.SubsessionUserStatus=void 0,(sd=te.SubsessionUserStatus||(te.SubsessionUserStatus={}))[sd.Initial=rr.Initial]="Initial",sd[sd.Invited=rr.Invited]="Invited",sd[sd.Joining=rr.Joining]="Joining",sd[sd.InSubsession=rr.InRoom]="InSubsession",sd[sd.Leaving=rr.Leaving]="Leaving",sd[sd.MainSession=rr.MainSession]="MainSession",te.SubsessionStatus=void 0,($h=te.SubsessionStatus||(te.SubsessionStatus={}))[$h.NotStarted=Vr.NotStarted]="NotStarted",$h[$h.InProgress=Vr.InProgress]="InProgress",$h[$h.Closing=Vr.Closing]="Closing",$h[$h.Closed=Vr.Closed]="Closed",te.ReconnectReason=void 0,(A_=te.ReconnectReason||(te.ReconnectReason={}))[A_.Failover=Es.Failover]="Failover",A_[A_.JoinSubsession=Es.JoinBreakoutRoom]="JoinSubsession",A_[A_.MoveToSubsession=Es.MoveToBreakoutRoom]="MoveToSubsession",A_[A_.BackToMainSession=Es.BackToMainSession]="BackToMainSession",te.SharePrivilege=void 0,(fS=te.SharePrivilege||(te.SharePrivilege={}))[fS.Unlocked=Ss.HostGrab]="Unlocked",fS[fS.Locked=Ss.OnlyHost]="Locked",fS[fS.MultipleShare=Ss.MultipleShare]="MultipleShare",te.AskHostHelpResponse=ol,te.AudioChangeAction=ha,te.CameraControlCmd=xT,te.ConnectionState=rg,te.DialoutState=Ta,te.FarEndCameraControlDeclinedReason=NV,te.LiveTranscriptionLanguage=rF,te.LiveTranscriptionLanguageCode=$2,te.LiveTranscriptionMessageSource=qh,te.MobileVideoFacingMode=bp,te.MutedSource=Ll,te.PassiveStopShareReason=y0,te.RecordingStatus=nl,te.ShareStatus=Zi,te.VideoActiveState=MT,te.VideoCapturingState=rE,te.VideoQuality=rl,te.default=y_,Object.defineProperty(te,"__esModule",{value:!0})}(Oe)},3890:function(we,Oe,Y){var U=Y(7156).default;we.exports=function(){"use strict";var te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe=function(r){return r&&r.Math==Math&&r},H=oe("object"==typeof globalThis&&globalThis)||oe("object"==typeof window&&window)||oe("object"==typeof self&&self)||oe("object"==typeof te&&te)||function(){return this}()||Function("return this")(),j={},M=function(r){try{return!!r()}catch{return!0}},P=!M(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),x=!M(function(){var r=function(){}.bind();return"function"!=typeof r||r.hasOwnProperty("prototype")}),J=Function.prototype.call,se=x?J.bind(J):function(){return J.apply(J,arguments)},ue={},le={}.propertyIsEnumerable,$=Object.getOwnPropertyDescriptor,z=$&&!le.call({1:2},1);ue.f=z?function(r){var i=$(this,r);return!!i&&i.enumerable}:le;var G,ae,Ae=function(r,i){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:i}},Te=x,he=Function.prototype,ye=he.call,me=Te&&he.bind.bind(ye,ye),ce=Te?function(r){return r&&me(r)}:function(r){return r&&function(){return ye.apply(r,arguments)}},pe=ce,be=pe({}.toString),Fe=pe("".slice),xe=function(r){return Fe(be(r),8,-1)},qe=M,Je=xe,Pe=H.Object,Mt=ce("".split),Lt=qe(function(){return!Pe("z").propertyIsEnumerable(0)})?function(r){return"String"==Je(r)?Mt(r,""):Pe(r)}:Pe,yt=H.TypeError,We=function(r){if(null==r)throw yt("Can't call method on "+r);return r},Be=Lt,Ge=We,Re=function(r){return Be(Ge(r))},Xe=function(r){return"function"==typeof r},Ot=Xe,Kt=function(r){return"object"==typeof r?null!==r:Ot(r)},Tt=H,zt=Xe,Qn=function(r){return zt(r)?r:void 0},Ht=function(r,i){return arguments.length<2?Qn(Tt[r]):Tt[r]&&Tt[r][i]},br=ce({}.isPrototypeOf),Sr=Ht("navigator","userAgent")||"",fr=Sr,pr=H.process,ki=H.Deno,$n=pr&&pr.versions||ki&&ki.version,Mi=$n&&$n.v8;Mi&&(ae=(G=Mi.split("."))[0]>0&&G[0]<4?1:+(G[0]+G[1])),!ae&&fr&&(!(G=fr.match(/Edge\/(\d+)/))||G[1]>=74)&&(G=fr.match(/Chrome\/(\d+)/))&&(ae=+G[1]);var Js=ae,Et=Js,Xt=!!Object.getOwnPropertySymbols&&!M(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&Et&&Et<41}),Ke=Xt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Me=Ht,ot=Xe,Dn=br,Gi=H.Object,Oo=Ke?function(r){return"symbol"==typeof r}:function(r){var i=Me("Symbol");return ot(i)&&Dn(i.prototype,Gi(r))},xs=H.String,mo=function(r){try{return xs(r)}catch{return"Object"}},As=Xe,go=mo,Qu=H.TypeError,xn=function(r){if(As(r))return r;throw Qu(go(r)+" is not a function")},an=xn,Ye=function(r,i){var a=r[i];return null==a?void 0:an(a)},pt=se,ht=Xe,en=Kt,dn=H.TypeError,ui={exports:{}},_o=H,rs=Object.defineProperty,Is=function(r,i){try{rs(_o,r,{value:i,configurable:!0,writable:!0})}catch{_o[r]=i}return i},$i="__core-js_shared__",vr=H[$i]||Is($i,{}),En=vr;(ui.exports=function(r,i){return En[r]||(En[r]=void 0!==i?i:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var Qc=We,_u=H.Object,Tl=function(r){return _u(Qc(r))},Pn=Tl,EV=ce({}.hasOwnProperty),Ya=Object.hasOwn||function(r,i){return EV(Pn(r),i)},aT=ce,U_=0,HS=Math.random(),hf=aT(1..toString),is=function(r){return"Symbol("+(void 0===r?"":r)+")_"+hf(++U_+HS,36)},cT=H,Dy=Ya,V_=is,Dk=Xt,$s=Ke,j_=(0,ui.exports)("wks"),ln=cT.Symbol,kk=ln&&ln.for,Bm=$s?ln:ln&&ln.withoutSetter||V_,bi=function(r){if(!Dy(j_,r)||!Dk&&"string"!=typeof j_[r]){var i="Symbol."+r;j_[r]=Dk&&Dy(ln,r)?ln[r]:$s&&kk?kk(i):Bm(i)}return j_[r]},Rl=se,uT=Kt,ua=Oo,Do=Ye,GS=H.TypeError,Pk=bi("toPrimitive"),_i=function(r,i){if(!uT(r)||ua(r))return r;var a,c=Do(r,Pk);if(c){if(void 0===i&&(i="default"),a=Rl(c,r,i),!uT(a)||ua(a))return a;throw GS("Can't convert object to primitive value")}return void 0===i&&(i="number"),function(r,i){var a,c;if("string"===i&&ht(a=r.toString)&&!en(c=pt(a,r))||ht(a=r.valueOf)&&!en(c=pt(a,r))||"string"!==i&&ht(a=r.toString)&&!en(c=pt(a,r)))return c;throw dn("Can't convert object to primitive value")}(r,i)},Rr=Oo,ff=function(r){var i=_i(r,"string");return Rr(i)?i:i+""},Um=Kt,lT=H.document,ky=Um(lT)&&Um(lT.createElement),hn=function(r){return ky?lT.createElement(r):{}},WS=hn,ei=!P&&!M(function(){return 7!=Object.defineProperty(WS("div"),"a",{get:function(){return 7}}).a}),Vm=se,bV=ue,cL=Ae,KS=Re,ti=ff,SV=Ya,uL=ei,lL=Object.getOwnPropertyDescriptor;j.f=P?lL:function(r,i){if(r=KS(r),i=ti(i),uL)try{return lL(r,i)}catch{}if(SV(r,i))return cL(!Vm(bV.f,r,i),r[i])};var qo={},Hu=P&&M(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),CV=Kt,IV=H.String,pL=H.TypeError,Hc=function(r){if(CV(r))return r;throw pL(IV(r)+" is not an object")},hL=ei,Wi=Hc,ch=ff,wV=H.TypeError,Mk=Object.defineProperty,kn=Object.getOwnPropertyDescriptor;qo.f=P?Hu?function(r,i,a){if(Wi(r),i=ch(i),Wi(a),"function"==typeof r&&"prototype"===i&&"value"in a&&"writable"in a&&!a.writable){var c=kn(r,i);c&&c.writable&&(r[i]=a.value,a={configurable:"configurable"in a?a.configurable:c.configurable,enumerable:"enumerable"in a?a.enumerable:c.enumerable,writable:!1})}return Mk(r,i,a)}:Mk:function(r,i,a){if(Wi(r),i=ch(i),Wi(a),hL)try{return Mk(r,i,a)}catch{}if("get"in a||"set"in a)throw wV("Accessors not supported");return"value"in a&&(r[i]=a.value),r};var RV=qo,jm=Ae,Dl=P?function(r,i,a){return RV.f(r,i,jm(1,a))}:function(r,i,a){return r[i]=a,r},Ed={exports:{}},Zn=Xe,Q_=vr,dT=ce(Function.toString);Zn(Q_.inspectSource)||(Q_.inspectSource=function(r){return dT(r)});var Py,My,Mr,Fn=Q_.inspectSource,kl=Fn,YS=H.WeakMap,wr=Xe(YS)&&/native code/.test(kl(YS)),mL=is,gL=(0,ui.exports)("keys"),Nk=function(r){return gL[r]||(gL[r]=mL(r))},_p={},uh=ce,xk=Kt,Lk=Dl,lh=Ya,G_=Nk,Bk=_p,qt="Object already initialized",W_=H.TypeError;if(wr||vr.state){var cc=vr.state||(vr.state=new(0,H.WeakMap)),qS=uh(cc.get),uo=uh(cc.has),K_=uh(cc.set);Py=function(r,i){if(uo(cc,r))throw new W_(qt);return i.facade=r,K_(cc,r,i),i},My=function(r){return qS(cc,r)||{}},Mr=function(r){return uo(cc,r)}}else{var Qm=G_("state");Bk[Qm]=!0,Py=function(r,i){if(lh(r,Qm))throw new W_(qt);return i.facade=r,Lk(r,Qm,i),i},My=function(r){return lh(r,Qm)?r[Qm]:{}},Mr=function(r){return lh(r,Qm)}}var Wu={set:Py,get:My,has:Mr,enforce:function(r){return Mr(r)?My(r):Py(r,{})},getterFor:function(r){return function(i){var a;if(!xk(i)||(a=My(i)).type!==r)throw W_("Incompatible receiver, "+r+" required");return a}}},vp=P,_L=Function.prototype,OV=vp&&Object.getOwnPropertyDescriptor,Ku=Ya(_L,"name"),Cd={EXISTS:Ku,PROPER:Ku&&"something"===function(){}.name,CONFIGURABLE:Ku&&(!vp||vp&&OV(_L,"name").configurable)},Xi=H,z_=Xe,Ny=Ya,Hm=Dl,JS=Is,Ap=Fn,Y_=Cd.CONFIGURABLE,vL=Wu.get,Ls=Wu.enforce,AL=String(String).split("String");(Ed.exports=function(r,i,a,c){var p,g=!!c&&!!c.unsafe,m=!!c&&!!c.enumerable,A=!!c&&!!c.noTargetGet,_=c&&void 0!==c.name?c.name:i;z_(a)&&("Symbol("===String(_).slice(0,7)&&(_="["+String(_).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Ny(a,"name")||Y_&&a.name!==_)&&Hm(a,"name",_),(p=Ls(a)).source||(p.source=AL.join("string"==typeof _?_:""))),r!==Xi?(g?!A&&r[i]&&(m=!0):delete r[i],m?r[i]=a:Hm(r,i,a)):m?r[i]=a:JS(i,a)})(Function.prototype,"toString",function(){return z_(this)&&vL(this).source||Ap(this)});var ws={},pT=Math.ceil,Ii=Math.floor,mf=function(r){var i=+r;return i!=i||0===i?0:(i>0?Ii:pT)(i)},Fk=mf,Gn=Math.max,Sa=Math.min,Ni=function(r,i){var a=Fk(r);return a<0?Gn(a+i,0):Sa(a,i)},Bs=mf,uc=Math.min,lc=function(r){return r>0?uc(Bs(r),9007199254740991):0},zu=lc,Ca=function(r){return zu(r.length)},er=Re,pi=Ni,lo=Ca,qa=function(r){return function(i,a,c){var p,g=er(i),m=lo(g),A=pi(c,m);if(r&&a!=a){for(;m>A;)if((p=g[A++])!=p)return!0}else for(;m>A;A++)if((r||A in g)&&g[A]===a)return r||A||0;return!r&&-1}},gf={includes:qa(!0),indexOf:qa(!1)},la=Ya,dh=Re,os=gf.indexOf,xy=_p,ph=ce([].push),hi=function(r,i){var a,c=dh(r),p=0,g=[];for(a in c)!la(xy,a)&&la(c,a)&&ph(g,a);for(;i.length>p;)la(c,a=i[p++])&&(~os(g,a)||ph(g,a));return g},Gm=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Wm=hi,$S=Gm.concat("length","prototype");ws.f=Object.getOwnPropertyNames||function(r){return Wm(r,$S)};var hh={};hh.f=Object.getOwnPropertySymbols;var Ia=Ht,_f=ws,Km=hh,Id=Hc,q_=ce([].concat),hT=Ia("Reflect","ownKeys")||function(r){var i=_f.f(Id(r)),a=Km.f;return a?q_(i,a(r)):i},jo=Ya,Uk=hT,dc=j,Wn=qo,wd=function(r,i,a){for(var c=Uk(i),p=Wn.f,g=dc.f,m=0;m<c.length;m++){var A=c[m];jo(r,A)||a&&jo(a,A)||p(r,A,g(i,A))}},fh=M,pc=Xe,Ar=/#|\.prototype\./,J_=function(r,i){var a=Td[Yu(r)];return a==mh||a!=fT&&(pc(i)?fh(i):!!i)},Yu=J_.normalize=function(r){return String(r).replace(Ar,".").toLowerCase()},Td=J_.data={},fT=J_.NATIVE="N",mh=J_.POLYFILL="P",zm=J_,vu=H,Ly=j.f,mT=Dl,yL=Ed.exports,Ja=Is,EL=wd,bL=zm,qu=function(r,i){var a,c,p,g,m,A=r.target,_=r.global,S=r.stat;if(a=_?vu:S?vu[A]||Ja(A,{}):(vu[A]||{}).prototype)for(c in i){if(g=i[c],p=r.noTargetGet?(m=Ly(a,c))&&m.value:a[c],!bL(_?c:A+(S?".":"#")+c,r.forced)&&void 0!==p){if(typeof g==typeof p)continue;EL(g,p)}(r.sham||p&&p.sham)&&mT(g,"sham",!0),yL(a,c,g,r)}},Vk=H.Promise,jk=Ed.exports,gT=function(r,i,a){for(var c in i)jk(r,c,i[c],a);return r},DV=Xe,kV=H.String,SL=H.TypeError,CL=ce,By=Hc,vf=Object.setPrototypeOf||("__proto__"in{}?function(){var r,i=!1,a={};try{(r=CL(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(a,[]),i=a instanceof Array}catch{}return function(c,p){return By(c),function(r){if("object"==typeof r||DV(r))return r;throw SL("Can't set "+kV(r)+" as a prototype")}(p),i?r(c,p):c.__proto__=p,c}}():void 0),Qk=qo.f,wL=Ya,Hk=bi("toStringTag"),$_=function(r,i,a){r&&!a&&(r=r.prototype),r&&!wL(r,Hk)&&Qk(r,Hk,{configurable:!0,value:i})},Af=Ht,Gk=qo,Pl=P,ZS=bi("species"),X_=function(r){var i=Af(r);Pl&&i&&!i[ZS]&&(0,Gk.f)(i,ZS,{configurable:!0,get:function(){return this}})},Wk=br,_T=H.TypeError,Ym=function(r,i){if(Wk(i,r))return r;throw _T("Incorrect invocation")},e0=xn,ys=x,gh=ce(ce.bind),$a=function(r,i){return e0(r),void 0===i?r:ys?gh(r,i):function(){return r.apply(i,arguments)}},qm={},Ju=qm,t0=bi("iterator"),vT=Array.prototype,Kk=function(r){return void 0!==r&&(Ju.Array===r||vT[t0]===r)},Xs={};Xs[bi("toStringTag")]="z";var n0=H,AT="[object z]"===String(Xs),Fy=Xe,Fs=xe,Uy=bi("toStringTag"),r0=n0.Object,_h="Arguments"==Fs(function(){return arguments}()),Zs=AT?Fs:function(r){var i,a,c;return void 0===r?"Undefined":null===r?"Null":"string"==typeof(a=function(p,g){try{return p[g]}catch{}}(i=r0(r),Uy))?a:_h?Fs(i):"Object"==(c=Fs(i))&&Fy(i.callee)?"Arguments":c},Vy=Zs,hc=Ye,vh=qm,yf=bi("iterator"),jy=function(r){if(null!=r)return hc(r,yf)||hc(r,"@@iterator")||vh[Vy(r)]},Jm=se,qr=xn,zk=Hc,o0=mo,Yk=jy,yT=H.TypeError,Qy=function(r,i){var a=arguments.length<2?Yk(r):i;if(qr(a))return zk(Jm(a,r));throw yT(o0(r)+" is not iterable")},Z_=se,qk=Hc,Jk=Ye,vn=$a,Pi=se,da=Hc,io=mo,Us=Kk,$m=Ca,Xm=br,Gc=Qy,ET=jy,Hy=function(r,i,a){var c,p;qk(r);try{if(!(c=Jk(r,"return"))){if("throw"===i)throw a;return a}c=Z_(c,r)}catch(g){p=!0,c=g}if("throw"===i)throw a;if(p)throw c;return qk(c),a},PV=H.TypeError,s0=function(r,i){this.stopped=r,this.result=i},TL=s0.prototype,a0=bi("iterator"),Ts=!1;try{var Rd=0,Gy={next:function(){return{done:!!Rd++}},return:function(){Ts=!0}};Gy[a0]=function(){return this},Array.from(Gy,function(){throw 2})}catch{}var Ef=function(r,i){if(!i&&!Ts)return!1;var a=!1;try{var c={};c[a0]=function(){return{next:function(){return{done:a=!0}}}},r(c)}catch{}return a},yp=ce,ev=M,c0=Xe,$k=Zs,Xk=Fn,Wy=function(){},u0=[],l0=Ht("Reflect","construct"),tv=/^\s*(?:class|function)\b/,Zk=yp(tv.exec),bT=!tv.exec(Wy),Zm=function(r){if(!c0(r))return!1;try{return l0(Wy,u0,r),!0}catch{return!1}},eg=function(r){if(!c0(r))return!1;switch($k(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return bT||!!Zk(tv,Xk(r))}catch{return!0}};eg.sham=!0;var tg,bf,d0,nv,ST=!l0||ev(function(){var r;return Zm(Zm.call)||!Zm(Object)||!Zm(function(){r=!0})||r})?eg:Zm,eP=ST,fc=mo,Ep=H.TypeError,Jo=function(r){if(eP(r))return r;throw Ep(fc(r)+" is not a constructor")},Es=Hc,tP=Jo,ng=bi("species"),Ky=function(r,i){var a,c=Es(r).constructor;return void 0===c||null==(a=Es(c)[ng])?i:tP(a)},bs=Function.prototype,Ah=bs.apply,Rs=bs.call,fi="object"==typeof Reflect&&Reflect.apply||(x?Rs.bind(Ah):function(){return Rs.apply(Ah,arguments)}),zy=Ht("document","documentElement"),Ur=ce([].slice),rv=/(?:ipad|iphone|ipod).*applewebkit/i.test(Sr),Od="process"==xe(H.process),pa=H,p0=fi,ig=$a,yh=Xe,Sf=Ya,Ml=M,CT=zy,RL=Ur,og=hn,Au=rv,nP=Od,Eh=pa.setImmediate,mc=pa.clearImmediate,Yy=pa.process,qy=pa.Dispatch,sg=pa.Function,iv=pa.MessageChannel,ov=pa.String,sv=0,Nl={};try{tg=pa.location}catch{}var Cf=function(r){if(Sf(Nl,r)){var i=Nl[r];delete Nl[r],i()}},Wc=function(r){return function(){Cf(r)}},So=function(r){Cf(r.data)},$u=function(r){pa.postMessage(ov(r),tg.protocol+"//"+tg.host)};Eh&&mc||(Eh=function(r){var i=RL(arguments,1);return Nl[++sv]=function(){p0(yh(r)?r:sg(r),void 0,i)},bf(sv),sv},mc=function(r){delete Nl[r]},nP?bf=function(r){Yy.nextTick(Wc(r))}:qy&&qy.now?bf=function(r){qy.now(Wc(r))}:iv&&!Au?(nv=(d0=new iv).port2,d0.port1.onmessage=So,bf=ig(nv.postMessage,nv)):pa.addEventListener&&yh(pa.postMessage)&&!pa.importScripts&&tg&&"file:"!==tg.protocol&&!Ml($u)?(bf=$u,pa.addEventListener("message",So,!1)):bf="onreadystatechange"in og("script")?function(r){CT.appendChild(og("script")).onreadystatechange=function(){CT.removeChild(this),Cf(r)}}:function(r){setTimeout(Wc(r),0)});var bh,Kc,ag,wa,cg,ug,Mo,zc,Jy={set:Eh,clear:mc},IT=H,h0=/ipad|iphone|ipod/i.test(Sr)&&void 0!==IT.Pebble,wT=/web0s(?!.*chrome)/i.test(Sr),xi=H,Xu=$a,lg=Jy.set,f0=rv,av=h0,OL=wT,ss=Od,m0=xi.MutationObserver||xi.WebKitMutationObserver,cv=xi.document,If=xi.process,wf=xi.Promise,_c=(0,j.f)(xi,"queueMicrotask"),Tf=_c&&_c.value;Tf||(bh=function(){var r,i;for(ss&&(r=If.domain)&&r.exit();Kc;){i=Kc.fn,Kc=Kc.next;try{i()}catch(a){throw Kc?wa():ag=void 0,a}}ag=void 0,r&&r.enter()},f0||ss||OL||!m0||!cv?!av&&wf&&wf.resolve?((Mo=wf.resolve(void 0)).constructor=wf,zc=Xu(Mo.then,Mo),wa=function(){zc(bh)}):ss?wa=function(){If.nextTick(bh)}:(lg=Xu(lg,xi),wa=function(){lg(bh)}):(cg=!0,ug=cv.createTextNode(""),new m0(bh).observe(ug,{characterData:!0}),wa=function(){ug.data=cg=!cg}));var ji=Tf||function(r){var i={fn:r,next:void 0};ag&&(ag.next=i),Kc||(Kc=i,wa()),ag=i},g0={},$y=xn,dg=function(r){var i,a;this.promise=new r(function(c,p){if(void 0!==i||void 0!==a)throw TypeError("Bad Promise constructor");i=c,a=p}),this.resolve=$y(i),this.reject=$y(a)};g0.f=function(r){return new dg(r)};var Yc=Hc,uv=Kt,tn=g0,Xy=function(r,i){if(Yc(r),uv(i)&&i.constructor===r)return i;var a=tn.f(r);return(0,a.resolve)(i),a.promise},Zu=H,rP=function(){this.head=null,this.tail=null};rP.prototype={add:function(r){var i={item:r,next:null};this.head?this.tail.next=i:this.head=i,this.tail=i},get:function(){var r=this.head;if(r)return this.head=r.next,this.tail===r&&(this.tail=null),r.item}};var Dd,TT,Rf,iP,Xa="object"==typeof window,vc=qu,Ki=H,Zy=Ht,qc=se,_0=Vk,xl=Ed.exports,el=gT,Of=vf,dv=$_,tl=X_,Df=xn,Sh=Xe,DL=Kt,eE=Ym,tE=Fn,oP=function(r,i,a){var c,p,g,m,A,_,S,T=!(!a||!a.AS_ENTRIES),D=!(!a||!a.IS_ITERATOR),B=!(!a||!a.INTERRUPTED),K=vn(i,a&&a.that),W=function(de){return c&&Hy(c,"normal",de),new s0(!0,de)},Z=function(de){return T?(da(de),B?K(de[0],de[1],W):K(de[0],de[1])):B?K(de,W):K(de)};if(D)c=r;else{if(!(p=ET(r)))throw PV(io(r)+" is not iterable");if(Us(p)){for(g=0,m=$m(r);m>g;g++)if((A=Z(r[g]))&&Xm(TL,A))return A;return new s0(!1)}c=Gc(r,p)}for(_=c.next;!(S=Pi(_,c)).done;){try{A=Z(S.value)}catch(de){Hy(c,"throw",de)}if("object"==typeof A&&A&&Xm(TL,A))return A}return new s0(!1)},nE=Ef,Jc=Ky,v0=Jy.set,Ch=ji,sP=Xy,aP=g0,nl=function(r){try{return{error:!1,value:r()}}catch(i){return{error:!0,value:i}}},ea=rP,pg=Wu,A0=zm,cP=Xa,hg=Od,pv=Js,hv=bi("species"),Ac="Promise",Vn=pg.getterFor(Ac),Co=pg.set,OT=pg.getterFor(Ac),Ll=_0&&_0.prototype,ha=_0,Ta=Ll,DT=Ki.TypeError,kT=Ki.document,PT=Ki.process,Ss=aP.f,Zi=Ss,rl=!!(kT&&kT.createEvent&&Ki.dispatchEvent),MT=Sh(Ki.PromiseRejectionEvent),fv="unhandledrejection",rE=!1,iE=A0(Ac,function(){var r=tE(ha),i=r!==String(ha);if(!i&&66===pv)return!0;if(pv>=51&&/native code/.test(r))return!1;var a=new ha(function(p){p(1)}),c=function(p){p(function(){},function(){})};return(a.constructor={})[hv]=c,!(rE=a.then(function(){})instanceof c)||!i&&cP&&!MT}),y0=iE||!nE(function(r){ha.all(r).catch(function(){})}),uP=function(r){var i;return!(!DL(r)||!Sh(i=r.then))&&i},oE=function(r,i){var a,c,p,g=i.value,m=1==i.state,A=m?r.ok:r.fail,_=r.resolve,S=r.reject,C=r.domain;try{A?(m||(2===i.rejection&&MV(i),i.rejection=1),!0===A?a=g:(C&&C.enter(),a=A(g),C&&(C.exit(),p=!0)),a===r.promise?S(DT("Promise-chain cycle")):(c=uP(a))?qc(c,a,_,S):_(a)):S(g)}catch(T){C&&!p&&C.exit(),S(T)}},bp=function(r,i){r.notified||(r.notified=!0,Ch(function(){for(var a,c=r.reactions;a=c.get();)oE(a,r);r.notified=!1,i&&!r.rejection&&NT(r)}))},kf=function(r,i,a){var c,p;rl?((c=kT.createEvent("Event")).promise=i,c.reason=a,c.initEvent(r,!1,!0),Ki.dispatchEvent(c)):c={promise:i,reason:a},!MT&&(p=Ki["on"+r])?p(c):r===fv&&function(r,i){var a=Zu.console;a&&a.error&&(1==arguments.length?a.error(r):a.error(r,i))}("Unhandled promise rejection",a)},NT=function(r){qc(v0,Ki,function(){var i,a=r.facade,c=r.value;if(sE(r)&&(i=nl(function(){hg?PT.emit("unhandledRejection",c,a):kf(fv,a,c)}),r.rejection=hg||sE(r)?2:1,i.error))throw i.value})},sE=function(r){return 1!==r.rejection&&!r.parent},MV=function(r){qc(v0,Ki,function(){var i=r.facade;hg?PT.emit("rejectionHandled",i):kf("rejectionhandled",i,r.value)})},fg=function(r,i,a){return function(c){r(i,c,a)}},aE=function(r,i,a){r.done||(r.done=!0,a&&(r=a),r.value=i,r.state=2,bp(r,!0))},mv=function(r,i,a){if(!r.done){r.done=!0,a&&(r=a);try{if(r.facade===i)throw DT("Promise can't be resolved itself");var c=uP(i);c?Ch(function(){var p={done:!1};try{qc(c,i,fg(mv,p,r),fg(aE,p,r))}catch(g){aE(p,g,r)}}):(r.value=i,r.state=1,bp(r,!1))}catch(p){aE({done:!1},p,r)}}};if(iE&&(Ta=(ha=function(r){eE(this,Ta),Df(r),qc(Dd,this);var i=Vn(this);try{r(fg(mv,i),fg(aE,i))}catch(a){aE(i,a)}}).prototype,(Dd=function(r){Co(this,{type:Ac,done:!1,notified:!1,parent:!1,reactions:new ea,rejection:!1,state:0,value:void 0})}).prototype=el(Ta,{then:function(r,i){var a=OT(this),c=Ss(Jc(this,ha));return a.parent=!0,c.ok=!Sh(r)||r,c.fail=Sh(i)&&i,c.domain=hg?PT.domain:void 0,0==a.state?a.reactions.add(c):Ch(function(){oE(c,a)}),c.promise},catch:function(r){return this.then(void 0,r)}}),TT=function(){var r=new Dd,i=Vn(r);this.promise=r,this.resolve=fg(mv,i),this.reject=fg(aE,i)},aP.f=Ss=function(r){return r===ha||r===Rf?new TT(r):Zi(r)},Sh(_0)&&Ll!==Object.prototype)){iP=Ll.then,rE||(xl(Ll,"then",function(r,i){var a=this;return new ha(function(c,p){qc(iP,a,c,p)}).then(r,i)},{unsafe:!0}),xl(Ll,"catch",Ta.catch,{unsafe:!0}));try{delete Ll.constructor}catch{}Of&&Of(Ll,Ta)}vc({global:!0,wrap:!0,forced:iE},{Promise:ha}),dv(ha,Ac,!1),tl(Ac),Rf=Zy(Ac),vc({target:Ac,stat:!0,forced:iE},{reject:function(r){var i=Ss(this);return qc(i.reject,void 0,r),i.promise}}),vc({target:Ac,stat:!0,forced:iE},{resolve:function(r){return sP(this,r)}}),vc({target:Ac,stat:!0,forced:y0},{all:function(r){var i=this,a=Ss(i),c=a.resolve,p=a.reject,g=nl(function(){var m=Df(i.resolve),A=[],_=0,S=1;oP(r,function(C){var T=_++,D=!1;S++,qc(m,i,C).then(function(B){D||(D=!0,A[T]=B,--S||c(A))},p)}),--S||c(A)});return g.error&&p(g.value),a.promise},race:function(r){var i=this,a=Ss(i),c=a.reject,p=nl(function(){var g=Df(i.resolve);oP(r,function(m){qc(g,i,m).then(a.resolve,c)})});return p.error&&c(p.value),a.promise}});var Pf=qu,mg=fi,Ih=ce,xT=M,NV=H.Array,cE=Ht("JSON","stringify"),il=Ih(/./.exec),Qo=Ih("".charAt),lP=Ih("".charCodeAt),dP=Ih("".replace),LT=Ih(1..toString),E0=/[\uD800-\uDFFF]/g,uE=/^[\uD800-\uDBFF]$/,b0=/^[\uDC00-\uDFFF]$/,S0=function(r,i,a){var c=Qo(a,i-1),p=Qo(a,i+1);return il(uE,r)&&!il(b0,p)||il(b0,r)&&!il(uE,c)?"\\u"+LT(lP(r,0),16):r},yc=xT(function(){return'"\\udf06\\ud834"'!==cE("\udf06\ud834")||'"\\udead"'!==cE("\udead")});cE&&Pf({target:"JSON",stat:!0,forced:yc},{stringify:function(r,i,a){for(var c=0,p=arguments.length,g=NV(p);c<p;c++)g[c]=arguments[c];var m=mg(cE,null,g);return"string"==typeof m?dP(m,E0,S0):m}});var as=function(r){try{return!!r()}catch{return!0}},gv=!as(function(){var r=function(){}.bind();return"function"!=typeof r||r.hasOwnProperty("prototype")}),BT=gv,C0=Function.prototype,wh=C0.call,FT=BT&&C0.bind.bind(wh,wh),No=BT?function(r){return r&&FT(r)}:function(r){return r&&function(){return wh.apply(r,arguments)}},$c=No({}.isPrototypeOf),dE=function(r){return r&&r.Math==Math&&r},Or=dE("object"==typeof globalThis&&globalThis)||dE("object"==typeof window&&window)||dE("object"==typeof self&&self)||dE("object"==typeof te&&te)||function(){return this}()||Function("return this")(),_v=Function.prototype,pE=_v.apply,vv=_v.call,ta="object"==typeof Reflect&&Reflect.apply||(gv?vv.bind(pE):function(){return vv.apply(pE,arguments)}),cs=function(r){return"function"==typeof r},Mf={},Ec=!as(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),gg=Function.prototype.call,Xc=gv?gg.bind(gg):function(){return gg.apply(gg,arguments)},Av={},UT={}.propertyIsEnumerable,fa=Object.getOwnPropertyDescriptor,kL=fa&&!UT.call({1:2},1);Av.f=kL?function(r){var i=fa(this,r);return!!i&&i.enumerable}:UT;var Th,Rh,Zc=function(r,i){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:i}},I0=No,yv=I0({}.toString),w0=I0("".slice),kd=function(r){return w0(yv(r),8,-1)},fP=as,T0=kd,Ev=Or.Object,VT=No("".split),R0=fP(function(){return!Ev("z").propertyIsEnumerable(0)})?function(r){return"String"==T0(r)?VT(r,""):Ev(r)}:Ev,_g=Or.TypeError,vg=function(r){if(null==r)throw _g("Can't call method on "+r);return r},jT=R0,mP=vg,Pd=function(r){return jT(mP(r))},gP=cs,Oa=function(r){return"object"==typeof r?null!==r:gP(r)},Md={},Nd=Md,Ag=Or,PL=cs,hE=function(r){return PL(r)?r:void 0},eu=function(r,i){return arguments.length<2?hE(Nd[r])||hE(Ag[r]):Nd[r]&&Nd[r][i]||Ag[r]&&Ag[r][i]},Oh=eu("navigator","userAgent")||"",bv=Oh,QT=Or.process,O0=Or.Deno,D0=QT&&QT.versions||O0&&O0.version,Sp=D0&&D0.v8;Sp&&(Rh=(Th=Sp.split("."))[0]>0&&Th[0]<4?1:+(Th[0]+Th[1])),!Rh&&bv&&(!(Th=bv.match(/Edge\/(\d+)/))||Th[1]>=74)&&(Th=bv.match(/Chrome\/(\d+)/))&&(Rh=+Th[1]);var Dh=Rh,k0=Dh,P0=!!Object.getOwnPropertySymbols&&!as(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&k0&&k0<41}),Sv=P0&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,vP=eu,M0=cs,Bl=$c,xd=Or.Object,mE=Sv?function(r){return"symbol"==typeof r}:function(r){var i=vP("Symbol");return M0(i)&&Bl(i.prototype,xd(r))},N0=Or.String,fn=function(r){try{return N0(r)}catch{return"Object"}},Cp=cs,gE=fn,na=Or.TypeError,bc=function(r){if(Cp(r))return r;throw na(gE(r)+" is not a function")},Dr=bc,x0=function(r,i){var a=r[i];return null==a?void 0:Dr(a)},_E=Xc,L0=cs,B0=Oa,yP=Or.TypeError,yg={exports:{}},F0=Or,vE=Object.defineProperty,kh="__core-js_shared__",V0=Or[kh]||function(r,i){try{vE(F0,r,{value:i,configurable:!0,writable:!0})}catch{F0[r]=i}return i}(kh,{}),HT=V0;(yg.exports=function(r,i){return HT[r]||(HT[r]=void 0!==i?i:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var ML=vg,EP=Or.Object,Fl=function(r){return EP(ML(r))},bP=Fl,AE=No({}.hasOwnProperty),Os=Object.hasOwn||function(r,i){return AE(bP(r),i)},yE=No,GT=0,WT=Math.random(),j0=yE(1..toString),yu=function(r){return"Symbol("+(void 0===r?"":r)+")_"+j0(++GT+WT,36)},SP=Or,Q0=Os,IP=yu,KT=P0,Ds=Sv,Eu=(0,yg.exports)("wks"),Ph=SP.Symbol,wP=Ph&&Ph.for,zT=Ds?Ph:Ph&&Ph.withoutSetter||IP,ks=function(r){if(!Q0(Eu,r)||!KT&&"string"!=typeof Eu[r]){var i="Symbol."+r;Eu[r]=KT&&Q0(Ph,r)?Ph[r]:Ds&&wP?wP(i):zT(i)}return Eu[r]},TP=Xc,YT=Oa,Ld=mE,Eg=x0,Cv=Or.TypeError,Jr=ks("toPrimitive"),vo=function(r,i){if(!YT(r)||Ld(r))return r;var a,c=Eg(r,Jr);if(c){if(void 0===i&&(i="default"),a=TP(c,r,i),!YT(a)||Ld(a))return a;throw Cv("Can't convert object to primitive value")}return void 0===i&&(i="number"),function(r,i){var a,c;if("string"===i&&L0(a=r.toString)&&!B0(c=_E(a,r))||L0(a=r.valueOf)&&!B0(c=_E(a,r))||"string"!==i&&L0(a=r.toString)&&!B0(c=_E(a,r)))return c;throw yP("Can't convert object to primitive value")}(r,i)},bg=mE,Nf=function(r){var i=vo(r,"string");return bg(i)?i:i+""},RP=Oa,EE=Or.document,NL=RP(EE)&&RP(EE.createElement),H0=function(r){return NL?EE.createElement(r):{}},xL=H0,bE=!Ec&&!as(function(){return 7!=Object.defineProperty(xL("div"),"a",{get:function(){return 7}}).a}),LL=Xc,BL=Av,JT=Zc,SE=Pd,W0=Nf,FL=Os,OP=bE,K0=Object.getOwnPropertyDescriptor;Mf.f=Ec?K0:function(r,i){if(r=SE(r),i=W0(i),OP)try{return K0(r,i)}catch{}if(FL(r,i))return JT(!LL(BL.f,r,i),r[i])};var us=as,CE=cs,z0=/#|\.prototype\./,Sg=function(r,i){var a=UL[wi(r)];return a==Y0||a!=$T&&(CE(i)?us(i):!!i)},wi=Sg.normalize=function(r){return String(r).replace(z0,".").toLowerCase()},UL=Sg.data={},$T=Sg.NATIVE="N",Y0=Sg.POLYFILL="P",xf=Sg,q0=bc,Da=gv,IE=No(No.bind),Vr=function(r,i){return q0(r),void 0===i?r:Da?IE(r,i):function(){return r.apply(i,arguments)}},Ul={},rr=Ec&&as(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),ol=Oa,Cr=Or.String,bu=Or.TypeError,Su=function(r){if(ol(r))return r;throw bu(Cr(r)+" is not an object")},VL=bE,wE=Su,TE=Nf,J0=Or.TypeError,$0=Object.defineProperty,so=Object.getOwnPropertyDescriptor;Ul.f=Ec?rr?function(r,i,a){if(wE(r),i=TE(i),wE(a),"function"==typeof r&&"prototype"===i&&"value"in a&&"writable"in a&&!a.writable){var c=so(r,i);c&&c.writable&&(r[i]=a.value,a={configurable:"configurable"in a?a.configurable:c.configurable,enumerable:"enumerable"in a?a.enumerable:c.enumerable,writable:!1})}return $0(r,i,a)}:$0:function(r,i,a){if(wE(r),i=TE(i),wE(a),VL)try{return $0(r,i,a)}catch{}if("get"in a||"set"in a)throw J0("Accessors not supported");return"value"in a&&(r[i]=a.value),r};var ZT=Ul,Lf=Zc,Mh=Ec?function(r,i,a){return ZT.f(r,i,Lf(1,a))}:function(r,i,a){return r[i]=a,r},Bf=Or,Ip=ta,DP=No,Z0=cs,OE=Mf.f,Nh=xf,wp=Md,eC=Vr,Cg=Mh,tC=Os,nC=function(r){var i=function(a,c,p){if(this instanceof i){switch(arguments.length){case 0:return new r;case 1:return new r(a);case 2:return new r(a,c)}return new r(a,c,p)}return Ip(r,this,arguments)};return i.prototype=r.prototype,i},Io=function(r,i){var a,c,p,g,m,A,_,S,C=r.target,T=r.global,D=r.stat,B=r.proto,K=T?Bf:D?Bf[C]:(Bf[C]||{}).prototype,W=T?wp:wp[C]||Cg(wp,C,{})[C],Z=W.prototype;for(p in i)a=!Nh(T?p:C+(D?".":"#")+p,r.forced)&&K&&tC(K,p),m=W[p],a&&(A=r.noTargetGet?(S=OE(K,p))&&S.value:K[p]),g=a&&A?A:i[p],a&&typeof m==typeof g||(_=r.bind&&a?eC(g,Bf):r.wrap&&a?nC(g):B&&Z0(g)?DP(g):g,(r.sham||g&&g.sham||m&&m.sham)&&Cg(_,"sham",!0),Cg(W,p,_),B&&(tC(wp,c=C+"Prototype")||Cg(wp,c,{}),Cg(wp[c],p,g),r.real&&Z&&!Z[p]&&Cg(Z,p,g)))},e1=Math.ceil,Ig=Math.floor,DE=function(r){var i=+r;return i!=i||0===i?0:(i>0?Ig:e1)(i)},Bd=DE,kP=Math.min,Cu=function(r){return function(r){return r>0?kP(Bd(r),9007199254740991):0}(r.length)},kE=bc,n1=Fl,Tv=R0,xh=Cu,rC=Or.TypeError,Ff=function(r){return function(i,a,c,p){kE(a);var g=n1(i),m=Tv(g),A=xh(g),_=r?A-1:0,S=r?-1:1;if(c<2)for(;;){if(_ in m){p=m[_],_+=S;break}if(_+=S,r?_<0:A<=_)throw rC("Reduce of empty array with no initial value")}for(;r?_>=0:A>_;_+=S)_ in m&&(p=a(p,m[_],_,g));return p}},yi={left:Ff(!1),right:Ff(!0)},PP=as,Uf=function(r,i){var a=[][r];return!!a&&PP(function(){a.call(null,i||function(){throw 1},1)})},sl="process"==kd(Or.process),MP=yi.left,r1=Dh,Vf=sl;Io({target:"Array",proto:!0,forced:!Uf("reduce")||!Vf&&r1>79&&r1<83},{reduce:function(r){var i=arguments.length;return MP(this,r,i,i>1?arguments[1]:void 0)}});var o1=Md,Fd=function(r){return o1[r+"Prototype"]},PE=Fd("Array").reduce,s1=$c,Rv=PE,Iu=Array.prototype,a1=function(r){var i=r.reduce;return r===Iu||s1(Iu,r)&&i===Iu.reduce?Rv:i},Lh=a1,NP=Zs,Tp=H.String,jf=function(r){if("Symbol"===NP(r))throw TypeError("Cannot convert a Symbol value to a string");return Tp(r)},c1=Hc,iC=function(){var r=c1(this),i="";return r.global&&(i+="g"),r.ignoreCase&&(i+="i"),r.multiline&&(i+="m"),r.dotAll&&(i+="s"),r.unicode&&(i+="u"),r.sticky&&(i+="y"),i},Qf=M,Ud=H.RegExp,u1=Qf(function(){var r=Ud("a","y");return r.lastIndex=2,null!=r.exec("abcd")}),xP=u1||Qf(function(){return!Ud("a","y").sticky}),ME={BROKEN_CARET:u1||Qf(function(){var r=Ud("^r","gy");return r.lastIndex=2,null!=r.exec("str")}),MISSED_STICKY:xP,UNSUPPORTED_Y:u1},l1={},d1=hi,jL=Gm,BP=qo,p1=Hc,FP=Re,UP=Object.keys||function(r){return d1(r,jL)};l1.f=P&&!Hu?Object.defineProperties:function(r,i){p1(r);for(var a,c=FP(i),p=UP(i),g=p.length,m=0;g>m;)BP.f(r,a=p[m++],c[a]);return r};var tu,h1=Hc,xE=l1,f1=Gm,m1=_p,oC=zy,VP=hn,sC=Nk("IE_PROTO"),wg=function(){},LE=function(r){return"<script>"+r+"<\/script>"},g1=function(r){r.write(LE("")),r.close();var i=r.parentWindow.Object;return r=null,i},jr=function(){try{tu=new ActiveXObject("htmlfile")}catch{}var r,i;jr=typeof document<"u"?document.domain&&tu?g1(tu):((i=VP("iframe")).style.display="none",oC.appendChild(i),i.src=String("javascript:"),(r=i.contentWindow.document).open(),r.write(LE("document.F=Object")),r.close(),r.F):g1(tu);for(var a=f1.length;a--;)delete jr.prototype[f1[a]];return jr()};m1[sC]=!0;var r,i,Bt=Object.create||function(r,i){var a;return null!==r?(wg.prototype=h1(r),a=new wg,wg.prototype=null,a[sC]=r):a=jr(),void 0===i?a:xE.f(a,i)},v1=H.RegExp,aC=M(function(){var r=v1(".","s");return!(r.dotAll&&r.exec("\n")&&"s"===r.flags)}),A1=H.RegExp,y1=M(function(){var r=A1("(?<a>b)","g");return"b"!==r.exec("b").groups.a||"bc"!=="b".replace(r,"$<a>c")}),Hf=se,BE=ce,E1=jf,b1=iC,FE=ME,ka=Bt,Dv=Wu.get,cC=aC,VE=y1,QP=(0,ui.exports)("native-string-replace",String.prototype.replace),kv=RegExp.prototype.exec,jE=kv,QL=BE("".charAt),uC=BE("".indexOf),lC=BE("".replace),dC=BE("".slice),QE=(i=/b*/g,Hf(kv,r=/a/,"a"),Hf(kv,i,"a"),0!==r.lastIndex||0!==i.lastIndex),Gf=FE.BROKEN_CARET,Pv=void 0!==/()??/.exec("")[1];(QE||Pv||Gf||cC||VE)&&(jE=function(r){var i,a,c,p,g,m,A,_=this,S=Dv(_),C=E1(r),T=S.raw;if(T)return T.lastIndex=_.lastIndex,i=Hf(jE,T,C),_.lastIndex=T.lastIndex,i;var D=S.groups,B=Gf&&_.sticky,K=Hf(b1,_),W=_.source,Z=0,de=C;if(B&&(K=lC(K,"y",""),-1===uC(K,"g")&&(K+="g"),de=dC(C,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==QL(C,_.lastIndex-1))&&(W="(?: "+W+")",de=" "+de,Z++),a=new RegExp("^(?:"+W+")",K)),Pv&&(a=new RegExp("^"+W+"$(?!\\s)",K)),QE&&(c=_.lastIndex),p=Hf(kv,B?a:_,de),B?p?(p.input=dC(p.input,Z),p[0]=dC(p[0],Z),p.index=_.lastIndex,_.lastIndex+=p[0].length):_.lastIndex=0:QE&&p&&(_.lastIndex=_.global?p.index+p[0].length:c),Pv&&p&&p.length>1&&Hf(QP,p[0],a,function(){for(g=1;g<arguments.length-2;g++)void 0===arguments[g]&&(p[g]=void 0)}),p&&D)for(p.groups=m=ka(null),g=0;g<D.length;g++)m[(A=D[g])[0]]=p[A[1]];return p});var HE=jE;qu({target:"RegExp",proto:!0,forced:/./.exec!==HE},{exec:HE});var Tg=Bt,HP=qo,GE=bi("unscopables"),WE=Array.prototype;null==WE[GE]&&HP.f(WE,GE,{configurable:!0,value:Tg(null)});var Vl,HL,GL,xV=!M(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),WL=H,LV=Ya,KL=Xe,zL=Tl,GP=xV,BV=Nk("IE_PROTO"),pC=WL.Object,FV=pC.prototype,S1=GP?pC.getPrototypeOf:function(r){var i=zL(r);if(LV(i,BV))return i[BV];var a=i.constructor;return KL(a)&&i instanceof a?a.prototype:i instanceof pC?FV:null},vt=M,hC=Xe,KE=S1,C1=Ed.exports,fC=bi("iterator"),I1=!1;[].keys&&("next"in(GL=[].keys())?(HL=KE(KE(GL)))!==Object.prototype&&(Vl=HL):I1=!0),(null==Vl||vt(function(){var r={};return Vl[fC].call(r)!==r}))&&(Vl={}),hC(Vl[fC])||C1(Vl,fC,function(){return this});var Bh={IteratorPrototype:Vl,BUGGY_SAFARI_ITERATORS:I1},Rg=Bh.IteratorPrototype,WP=Bt,mC=Ae,KP=$_,w1=qm,YL=function(){return this},zP=qu,YP=se,qL=Xe,JL=S1,$L=vf,XL=$_,UV=Dl,gC=Ed.exports,R1=qm,JP=Cd.PROPER,O1=Cd.CONFIGURABLE,Sc=Bh.IteratorPrototype,Mv=Bh.BUGGY_SAFARI_ITERATORS,Nv=bi("iterator"),Rp="values",xv="entries",Og=function(){return this},D1=Re,zE=function(r){WE[GE][r]=!0},_C=qm,XP=qo.f,ZP=P,k1="Array Iterator",eM=Wu.set,P1=Wu.getterFor(k1),M1=function(r,i,a,c,p,g,m){!function(r,i,a,c){var p=i+" Iterator";r.prototype=WP(Rg,{next:mC(+!c,a)}),KP(r,p,!1),w1[p]=YL}(a,i,c);var A,_,S,C=function(de){if(de===p&&W)return W;if(!Mv&&de in B)return B[de];switch(de){case"keys":case Rp:case xv:return function(){return new a(this,de)}}return function(){return new a(this)}},T=i+" Iterator",D=!1,B=r.prototype,K=B[Nv]||B["@@iterator"]||p&&B[p],W=!Mv&&K||C(p),Z="Array"==i&&B.entries||K;if(Z&&(A=JL(Z.call(new r)))!==Object.prototype&&A.next&&(JL(A)!==Sc&&($L?$L(A,Sc):qL(A[Nv])||gC(A,Nv,Og)),XL(A,T,!0)),JP&&p==Rp&&K&&K.name!==Rp&&(O1?UV(B,"name",Rp):(D=!0,W=function(){return YP(K,this)})),p)if(_={values:C(Rp),keys:g?W:C("keys"),entries:C(xv)},m)for(S in _)(Mv||D||!(S in B))&&gC(B,S,_[S]);else zP({target:i,proto:!0,forced:Mv||D},_);return B[Nv]!==W&&gC(B,Nv,W,{name:p}),R1[i]=W,_}(Array,"Array",function(r,i){eM(this,{type:k1,target:D1(r),index:0,kind:i})},function(){var r=P1(this),i=r.target,a=r.kind,c=r.index++;return!i||c>=i.length?(r.target=void 0,{value:void 0,done:!0}):"keys"==a?{value:c,done:!1}:"values"==a?{value:i[c],done:!1}:{value:[c,i[c]],done:!1}},"values"),jl=_C.Arguments=_C.Array;if(zE("keys"),zE("values"),zE("entries"),ZP&&"values"!==jl.name)try{XP(jl,"name",{value:"values"})}catch{}var Lv=hn("span").classList,N1=Lv&&Lv.constructor&&Lv.constructor.prototype,AC=H,x1={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},L1=N1===Object.prototype?void 0:N1,Dg=M1,Bv=Dl,B1=bi,yC=B1("iterator"),Fv=B1("toStringTag"),Uv=Dg.values,EC=function(r,i){if(r){if(r[yC]!==Uv)try{Bv(r,yC,Uv)}catch{r[yC]=Uv}if(r[Fv]||Bv(r,Fv,i),x1[i])for(var a in Dg)if(r[a]!==Dg[a])try{Bv(r,a,Dg[a])}catch{r[a]=Dg[a]}}};for(var ZL in x1)EC(AC[ZL]&&AC[ZL].prototype,ZL);EC(L1,"DOMTokenList");var nM=Xe,VV=Kt,bC=vf,Vv=function(r,i,a){var c,p;return bC&&nM(c=i.constructor)&&c!==a&&VV(p=c.prototype)&&p!==a.prototype&&bC(r,p),r},SC=jf,jv=function(r,i){return void 0===r?arguments.length<2?"":i:SC(r)},CC=Kt,Vd=Dl,Wf=ce("".replace),kg=String(Error("zxcasd").stack),Kf=/\n\s*at [^:]*:[^\n]*/,rM=Kf.test(kg),qE=function(r,i){if(rM&&"string"==typeof r)for(;i--;)r=Wf(r,Kf,"");return r},F1=Ae,iM=!M(function(){var r=Error("a");return!("stack"in r)||(Object.defineProperty(r,"stack",F1(1,7)),7!==r.stack)}),U1=Ht,Qv=Ya,IC=Dl,uQ=br,eB=vf,tB=wd,jV=Vv,QV=jv,HV=function(r,i){CC(i)&&"cause"in i&&Vd(r,"cause",i.cause)},GV=qE,nB=iM,wC=qu,yr=fi,V1=function(r,i,a,c){var p=c?2:1,g=r.split("."),m=g[g.length-1],A=U1.apply(null,g);if(A){var _=A.prototype;if(Qv(_,"cause")&&delete _.cause,!a)return A;var S=U1("Error"),C=i(function(T,D){var B=QV(c?D:T,void 0),K=c?new A(T):new A;return void 0!==B&&IC(K,"message",B),nB&&IC(K,"stack",GV(K.stack,2)),this&&uQ(_,this)&&jV(K,this,C),arguments.length>p&&HV(K,arguments[p]),K});C.prototype=_,"Error"!==m&&(eB?eB(C,S):tB(C,S,{name:!0})),tB(C,A);try{_.name!==m&&IC(_,"name",m),_.constructor=C}catch{}return C}},JE=H.WebAssembly,TC=7!==Error("e",{cause:7}).cause,al=function(r,i){var a={};a[r]=V1(r,i,TC),wC({global:!0,forced:TC},a)},RC=function(r,i){if(JE&&JE[r]){var a={};a[r]=V1("WebAssembly."+r,i,TC),wC({target:"WebAssembly",stat:!0,forced:TC},a)}};al("Error",function(r){return function(i){return yr(r,this,arguments)}}),al("EvalError",function(r){return function(i){return yr(r,this,arguments)}}),al("RangeError",function(r){return function(i){return yr(r,this,arguments)}}),al("ReferenceError",function(r){return function(i){return yr(r,this,arguments)}}),al("SyntaxError",function(r){return function(i){return yr(r,this,arguments)}}),al("TypeError",function(r){return function(i){return yr(r,this,arguments)}}),al("URIError",function(r){return function(i){return yr(r,this,arguments)}}),RC("CompileError",function(r){return function(i){return yr(r,this,arguments)}}),RC("LinkError",function(r){return function(i){return yr(r,this,arguments)}}),RC("RuntimeError",function(r){return function(i){return yr(r,this,arguments)}});let j1=!0,$E=!0;function XE(r,i,a){const c=r.match(i);return c&&c.length>=a&&parseInt(c[a],10)}function Fh(r,i,a){if(!r.RTCPeerConnection)return;const c=r.RTCPeerConnection.prototype,p=c.addEventListener;c.addEventListener=function(m,A){if(m!==i)return p.apply(this,arguments);const _=S=>{const C=a(S);C&&(A.handleEvent?A.handleEvent(C):A(C))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(A,_),p.apply(this,[m,_])};const g=c.removeEventListener;c.removeEventListener=function(m,A){if(m!==i||!this._eventMap||!this._eventMap[i])return g.apply(this,arguments);if(!this._eventMap[i].has(A))return g.apply(this,arguments);const _=this._eventMap[i].get(A);return this._eventMap[i].delete(A),0===this._eventMap[i].size&&delete this._eventMap[i],0===Object.keys(this._eventMap).length&&delete this._eventMap,g.apply(this,[m,_])},Object.defineProperty(c,"on"+i,{get(){return this["_on"+i]},set(m){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),m&&this.addEventListener(i,this["_on"+i]=m)},enumerable:!0,configurable:!0})}function Q1(r){return"boolean"!=typeof r?new Error("Argument type: "+typeof r+". Please use a boolean."):(j1=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function Hv(r){return"boolean"!=typeof r?new Error("Argument type: "+typeof r+". Please use a boolean."):($E=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function H1(){if("object"==typeof window){if(j1)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function ZE(r,i){$E&&console.warn(r+" is deprecated, please use "+i+" instead.")}function Gv(r){const i={browser:null,version:null};if(void 0===r||!r.navigator)return i.browser="Not a browser.",i;const{navigator:a}=r;if(a.mozGetUserMedia)i.browser="firefox",i.version=XE(a.userAgent,/Firefox\/(\d+)\./,1);else if(a.webkitGetUserMedia||!1===r.isSecureContext&&r.webkitRTCPeerConnection&&!r.RTCIceGatherer)i.browser="chrome",i.version=XE(a.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.mediaDevices&&a.userAgent.match(/Edge\/(\d+).(\d+)$/))i.browser="edge",i.version=XE(a.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!r.RTCPeerConnection||!a.userAgent.match(/AppleWebKit\/(\d+)\./))return i.browser="Not a supported browser.",i;i.browser="safari",i.version=XE(a.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype}return i}function jd(r){return"[object Object]"===Object.prototype.toString.call(r)}function OC(r){var i;return jd(r)?Lh(i=Object.keys(r)).call(i,function(a,c){const p=jd(r[c]),g=p?OC(r[c]):r[c],m=p&&!Object.keys(g).length;return void 0===g||m?a:Object.assign(a,{[c]:g})},{}):r}function Yf(r,i,a){const c=a?"outbound-rtp":"inbound-rtp",p=new Map;if(null===i)return p;const g=[];return r.forEach(m=>{"track"===m.type&&m.trackIdentifier===i.id&&g.push(m)}),g.forEach(m=>{r.forEach(A=>{A.type===c&&A.trackId===m.id&&function _(S,C,T){C&&!T.has(C.id)&&(T.set(C.id,C),Object.keys(C).forEach(D=>{D.endsWith("Id")?_(S,S.get(C[D]),T):D.endsWith("Ids")&&C[D].forEach(B=>{_(S,S.get(B),T)})}))}(r,A,p)})}),p}var G1=yu,Pa=(0,yg.exports)("keys"),Op=function(r){return Pa[r]||(Pa[r]=G1(r))},Qd=!as(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),qf=Or,Ma=Os,Uh=cs,Dp=Fl,cl=Qd,Li=Op("IE_PROTO"),kp=qf.Object,Jf=kp.prototype,ul=cl?kp.getPrototypeOf:function(r){var i=Dp(r);if(Ma(i,Li))return i[Li];var a=i.constructor;return Uh(a)&&i instanceof a?a.prototype:i instanceof kp?Jf:null},Cc=cs,Kv=Or.String,Ic=Or.TypeError,Hd=No,Hl=Su,Pg=Object.setPrototypeOf||("__proto__"in{}?function(){var r,i=!1,a={};try{(r=Hd(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(a,[]),i=a instanceof Array}catch{}return function(c,p){return Hl(c),function(r){if("object"==typeof r||Cc(r))return r;throw Ic("Can't set "+Kv(r)+" as a prototype")}(p),i?r(c,p):c.__proto__=p,c}}():void 0),Mg={},W1=DE,DC=Math.max,kC=Math.min,Pp=function(r,i){var a=W1(r);return a<0?DC(a+i,0):kC(a,i)},PC=Pd,MC=Pp,rB=Cu,NC=function(r){return function(i,a,c){var p,g=PC(i),m=rB(g),A=MC(c,m);if(r&&a!=a){for(;m>A;)if((p=g[A++])!=p)return!0}else for(;m>A;A++)if((r||A in g)&&g[A]===a)return r||A||0;return!r&&-1}},bn={includes:NC(!0),indexOf:NC(!1)},eb={},ll=Os,nn=Pd,tb=bn.indexOf,oM=eb,jt=No([].push),Wt=function(r,i){var a,c=nn(r),p=0,g=[];for(a in c)!ll(oM,a)&&ll(c,a)&&jt(g,a);for(;i.length>p;)ll(c,a=i[p++])&&(~tb(g,a)||jt(g,a));return g},Ti=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],sM=Wt,wc=Ti.concat("length","prototype");Mg.f=Object.getOwnPropertyNames||function(r){return sM(r,wc)};var Na={};Na.f=Object.getOwnPropertySymbols;var Yv=eu,wu=Mg,qv=Na,xC=Su,K1=No([].concat),zi=Yv("Reflect","ownKeys")||function(r){var i=wu.f(xC(r)),a=qv.f;return a?K1(i,a(r)):i},$f=Os,z1=zi,aM=Mf,cM=Ul,Jv={},ur=Wt,uM=Ti,xo=Object.keys||function(r){return ur(r,uM)},Y1=Ul,lM=Su,BC=Pd,$v=xo;Jv.f=Ec&&!rr?Object.defineProperties:function(r,i){lM(r);for(var a,c=BC(i),p=$v(i),g=p.length,m=0;g>m;)Y1.f(r,a=p[m++],c[a]);return r};var nb,nu=eu("document","documentElement"),gt=Su,q1=Jv,J1=Ti,FC=eb,xa=nu,iB=H0,Xf=Op("IE_PROTO"),Xv=function(){},ec=function(r){return"<script>"+r+"<\/script>"},Gl=function(r){r.write(ec("")),r.close();var i=r.parentWindow.Object;return r=null,i},Ng=function(){try{nb=new ActiveXObject("htmlfile")}catch{}var r,i;Ng=typeof document<"u"?document.domain&&nb?Gl(nb):((i=iB("iframe")).style.display="none",xa.appendChild(i),i.src=String("javascript:"),(r=i.contentWindow.document).open(),r.write(ec("document.F=Object")),r.close(),r.F):Gl(nb);for(var a=J1.length;a--;)delete Ng.prototype[J1[a]];return Ng()};FC[Xf]=!0;var xg=Object.create||function(r,i){var a;return null!==r?(Xv.prototype=gt(r),a=new Xv,Xv.prototype=null,a[Xf]=r):a=Ng(),void 0===i?a:q1.f(a,i)},WV=No("".replace),KV=String(Error("zxcasd").stack),Tc=/\n\s*at [^:]*:[^\n]*/,oB=Tc.test(KV),dM=Oa,sB=Mh,ds={},ru=ds,aB=ks("iterator"),cB=Array.prototype,$1=function(r){return void 0!==r&&(ru.Array===r||cB[aB]===r)},pM={};pM[ks("toStringTag")]="z";var UC="[object z]"===String(pM),hM=Or,Zv=UC,Lg=cs,VC=kd,fM=ks("toStringTag"),X1=hM.Object,Z1="Arguments"==VC(function(){return arguments}()),Mp=Zv?VC:function(r){var i,a,c;return void 0===r?"Undefined":null===r?"Null":"string"==typeof(a=function(p,g){try{return p[g]}catch{}}(i=X1(r),fM))?a:Z1?VC(i):"Object"==(c=VC(i))&&Lg(i.callee)?"Arguments":c},Bg=Mp,ps=x0,Np=ds,uB=ks("iterator"),po=function(r){if(null!=r)return ps(r,uB)||ps(r,"@@iterator")||Np[Bg(r)]},Si=Xc,iu=bc,Vs=Su,mM=fn,La=po,eR=Or.TypeError,jC=function(r,i){var a=arguments.length<2?La(r):i;if(iu(a))return Vs(Si(a,r));throw eR(mM(r)+" is not iterable")},QC=Xc,HC=Su,rb=x0,Zf=function(r,i,a){var c,p;HC(r);try{if(!(c=rb(r,"return"))){if("throw"===i)throw a;return a}c=QC(c,r)}catch(g){p=!0,c=g}if("throw"===i)throw a;if(p)throw c;return HC(c),a},lB=Vr,GC=Xc,xp=Su,gM=fn,WC=$1,ib=Cu,eA=$c,_M=jC,mn=po,Gd=Zf,vi=Or.TypeError,ob=function(r,i){this.stopped=r,this.result=i},tR=ob.prototype,tA=function(r,i,a){var c,p,g,m,A,_,S,T=!(!a||!a.AS_ENTRIES),D=!(!a||!a.IS_ITERATOR),B=!(!a||!a.INTERRUPTED),K=lB(i,a&&a.that),W=function(de){return c&&Gd(c,"normal",de),new ob(!0,de)},Z=function(de){return T?(xp(de),B?K(de[0],de[1],W):K(de[0],de[1])):B?K(de,W):K(de)};if(D)c=r;else{if(!(p=mn(r)))throw vi(gM(r)+" is not iterable");if(WC(p)){for(g=0,m=ib(r);m>g;g++)if((A=Z(r[g]))&&eA(tR,A))return A;return new ob(!1)}c=_M(r,p)}for(_=c.next;!(S=GC(_,c)).done;){try{A=Z(S.value)}catch(de){Gd(c,"throw",de)}if("object"==typeof A&&A&&eA(tR,A))return A}return new ob(!1)},KC=Mp,nR=Or.String,Wl=function(r){if("Symbol"===KC(r))throw TypeError("Cannot convert a Symbol value to a string");return nR(r)},vM=Wl,rR=Zc,iR=!as(function(){var r=Error("a");return!("stack"in r)||(Object.defineProperty(r,"stack",rR(1,7)),7!==r.stack)}),dB=Io,AM=Or,yM=$c,sb=ul,ab=Pg,EM=xg,nA=Mh,rA=Zc,hB=function(r,i){if(oB&&"string"==typeof r)for(;i--;)r=WV(r,Tc,"");return r},Vh=function(r,i){dM(i)&&"cause"in i&&sB(r,"cause",i.cause)},bM=tA,SM=function(r,i){return void 0===r?arguments.length<2?"":i:vM(r)},ra=iR,ou=ks("toStringTag"),em=AM.Error,cb=[].push,Lp=function(r,i){var a,c=arguments.length>2?arguments[2]:void 0,p=yM(Fg,this);ab?a=ab(new em,p?sb(this):Fg):(a=p?this:EM(Fg),nA(a,ou,"Error")),void 0!==i&&nA(a,"message",SM(i)),ra&&nA(a,"stack",hB(a.stack,1)),Vh(a,c);var g=[];return bM(r,cb,{that:g}),nA(a,"errors",g),a};ab?ab(Lp,em):function(r,i,a){for(var c=z1(i),p=cM.f,g=aM.f,m=0;m<c.length;m++){var A=c[m];$f(r,A)||a&&$f(a,A)||p(r,A,g(i,A))}}(Lp,em,{name:!0});var Fg=Lp.prototype=EM(em.prototype,{constructor:rA(1,Lp),message:rA(1,""),name:rA(1,"AggregateError")});dB({global:!0},{AggregateError:Lp});var oR=cs,ub=V0,sR=No(Function.toString);oR(ub.inspectSource)||(ub.inspectSource=function(r){return sR(r)});var tm,Ug,lb,iA=ub.inspectSource,Bo=iA,Tu=Or.WeakMap,Wd=cs(Tu)&&/native code/.test(Bo(Tu)),dl=No,fB=Oa,su=Mh,aR=Os,YC=Op,Fp=eb,qn="Object already initialized",oA=Or.TypeError;if(Wd||V0.state){var Vg=V0.state||(V0.state=new(0,Or.WeakMap)),Rc=dl(Vg.get),Kd=dl(Vg.has),jh=dl(Vg.set);tm=function(r,i){if(Kd(Vg,r))throw new oA(qn);return i.facade=r,jh(Vg,r,i),i},Ug=function(r){return Rc(Vg,r)||{}},lb=function(r){return Kd(Vg,r)}}else{var Kl=YC("state");Fp[Kl]=!0,tm=function(r,i){if(aR(r,Kl))throw new oA(qn);return i.facade=r,su(r,Kl,i),i},Ug=function(r){return aR(r,Kl)?r[Kl]:{}},lb=function(r){return aR(r,Kl)}}var ao,cR,rm,Up={set:tm,get:Ug,has:lb,enforce:function(r){return lb(r)?Ug(r):tm(r,{})},getterFor:function(r){return function(i){var a;if(!fB(i)||(a=Ug(i)).type!==r)throw oA("Incompatible receiver, "+r+" required");return a}}},pb=Ec,sA=Function.prototype,lR=pb&&Object.getOwnPropertyDescriptor,hb=Os(sA,"name"),dR={EXISTS:hb,PROPER:hb&&"something"===function(){}.name,CONFIGURABLE:hb&&(!pb||pb&&lR(sA,"name").configurable)},pR=Mh,jg=function(r,i,a,c){c&&c.enumerable?r[i]=a:pR(r,i,a)},im=as,mB=cs,gB=xg,hR=ul,Qg=jg,fb=ks("iterator"),qC=!1;[].keys&&("next"in(rm=[].keys())?(cR=hR(hR(rm)))!==Object.prototype&&(ao=cR):qC=!0);var CM=null==ao||im(function(){var r={};return ao[fb].call(r)!==r});mB((ao=CM?{}:gB(ao))[fb])||Qg(ao,fb,function(){return this});var IM={IteratorPrototype:ao,BUGGY_SAFARI_ITERATORS:qC},Hg=Mp,fR=UC,wM=Ul.f,cA=Mh,TM=Os,Gg=UC?{}.toString:function(){return"[object "+Hg(this)+"]"},mR=ks("toStringTag"),Wg=function(r,i,a,c){if(r){var p=a?r:r.prototype;TM(p,mR)||wM(p,mR,{configurable:!0,value:i}),c&&!fR&&cA(p,"toString",Gg)}},RM=IM.IteratorPrototype,OM=xg,DM=Zc,_B=Wg,vB=ds,AB=function(){return this},om=function(r,i,a,c){var p=i+" Iterator";return r.prototype=OM(RM,{next:DM(+!c,a)}),_B(r,p,!1,!0),vB[p]=AB,r},kM=Io,PM=Xc,uA=om,mb=ul,MM=Wg,gR=jg,_R=ds,gb=dR.PROPER,_b=IM.BUGGY_SAFARI_ITERATORS,vb=ks("iterator"),Kg="values",AR="entries",Ba=function(){return this},JC=function(r,i,a,c,p,g,m){uA(a,i,c);var A,_,S,C=function(de){if(de===p&&W)return W;if(!_b&&de in B)return B[de];switch(de){case"keys":case Kg:case AR:return function(){return new a(this,de)}}return function(){return new a(this)}},T=i+" Iterator",D=!1,B=r.prototype,K=B[vb]||B["@@iterator"]||p&&B[p],W=!_b&&K||C(p),Z="Array"==i&&B.entries||K;if(Z&&(A=mb(Z.call(new r)))!==Object.prototype&&A.next&&(MM(A,T,!0,!0),_R[T]=Ba),gb&&p==Kg&&K&&K.name!==Kg&&(D=!0,W=function(){return PM(K,this)}),p)if(_={values:C(Kg),keys:g?W:C("keys"),entries:C(AR)},m)for(S in _)(_b||D||!(S in B))&&gR(B,S,_[S]);else kM({target:i,proto:!0,forced:_b||D},_);return m&&B[vb]!==W&&gR(B,vb,W,{name:p}),_R[i]=W,_},yR=Pd,zd=ds,$o=JC,xM="Array Iterator",LM=Up.set,yB=Up.getterFor(xM);$o(Array,"Array",function(r,i){LM(this,{type:xM,target:yR(r),index:0,kind:i})},function(){var r=yB(this),i=r.target,a=r.kind,c=r.index++;return!i||c>=i.length?(r.target=void 0,{value:void 0,done:!0}):"keys"==a?{value:c,done:!1}:"values"==a?{value:i[c],done:!1}:{value:[c,i[c]],done:!1}},"values"),zd.Arguments=zd.Array;var lA=Or.Promise,EB=jg,Ab=function(r,i,a){for(var c in i)a&&a.unsafe&&r[c]?r[c]=i[c]:EB(r,c,i[c],a);return r},zg=eu,$C=Ul,yb=Ec,zl=ks("species"),XC=$c,Yd=Or.TypeError,Yg=function(r,i){if(XC(i,r))return r;throw Yd("Incorrect invocation")},ZC=ks("iterator"),Eb=!1;try{var sm=0,ER={next:function(){return{done:!!sm++}},return:function(){Eb=!0}};ER[ZC]=function(){return this},Array.from(ER,function(){throw 2})}catch{}var eI=No,bR=as,BM=cs,SR=Mp,tI=iA,CR=function(){},Qh=[],qg=eu("Reflect","construct"),nI=/^\s*(?:class|function)\b/,rI=eI(nI.exec),dA=!nI.exec(CR),bb=function(r){if(!BM(r))return!1;try{return qg(CR,Qh,r),!0}catch{return!1}},IR=function(r){if(!BM(r))return!1;switch(SR(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return dA||!!rI(nI,tI(r))}catch{return!0}};IR.sham=!0;var pA,am,Sb,hA,cm=!qg||bR(function(){var r;return bb(bb.call)||!bb(Object)||!bb(function(){r=!0})||r})?IR:bb,FM=cm,UM=fn,wR=Or.TypeError,VM=Su,fA=ks("species"),jM=function(r,i){var a,c=VM(r).constructor;return void 0===c||null==(a=VM(c)[fA])?i:function(r){if(FM(r))return r;throw wR(UM(r)+" is not a constructor")}(a)},TR=No([].slice),bB=/(?:ipad|iphone|ipod).*applewebkit/i.test(Oh),Ru=Or,RR=ta,SB=Vr,OR=cs,CB=Os,DR=as,Jg=nu,kR=TR,PR=H0,QM=bB,MR=sl,NR=Ru.setImmediate,xR=Ru.clearImmediate,au=Ru.process,Ou=Ru.Dispatch,mA=Ru.Function,IB=Ru.MessageChannel,LR=Ru.String,um=0,Hh={};try{pA=Ru.location}catch{}var iI=function(r){if(CB(Hh,r)){var i=Hh[r];delete Hh[r],i()}},BR=function(r){return function(){iI(r)}},oI=function(r){iI(r.data)},Du=function(r){Ru.postMessage(LR(r),pA.protocol+"//"+pA.host)};NR&&xR||(NR=function(r){var i=kR(arguments,1);return Hh[++um]=function(){RR(OR(r)?r:mA(r),void 0,i)},am(um),um},xR=function(r){delete Hh[r]},MR?am=function(r){au.nextTick(BR(r))}:Ou&&Ou.now?am=function(r){Ou.now(BR(r))}:IB&&!QM?(hA=(Sb=new IB).port2,Sb.port1.onmessage=oI,am=SB(hA.postMessage,hA)):Ru.addEventListener&&OR(Ru.postMessage)&&!Ru.importScripts&&pA&&"file:"!==pA.protocol&&!DR(Du)?(am=Du,Ru.addEventListener("message",oI,!1)):am="onreadystatechange"in PR("script")?function(r){Jg.appendChild(PR("script")).onreadystatechange=function(){Jg.removeChild(this),iI(r)}}:function(r){setTimeout(BR(r),0)});var gA,Gh,$g,Xg,sI,Cb,FR,HM,Zg={set:NR,clear:xR},GM=Or,UR=/ipad|iphone|ipod/i.test(Oh)&&void 0!==GM.Pebble,WM=/web0s(?!.*chrome)/i.test(Oh),lm=Or,VR=Vr,jR=Zg.set,YV=bB,QR=UR,zM=WM,HR=sl,e_=lm.MutationObserver||lm.WebKitMutationObserver,Ib=lm.document,_A=lm.process,Vp=lm.Promise,t_=(0,Mf.f)(lm,"queueMicrotask"),Qi=t_&&t_.value;Qi||(gA=function(){var r,i;for(HR&&(r=_A.domain)&&r.exit();Gh;){i=Gh.fn,Gh=Gh.next;try{i()}catch(a){throw Gh?Xg():$g=void 0,a}}$g=void 0,r&&r.enter()},YV||HR||zM||!e_||!Ib?!QR&&Vp&&Vp.resolve?((FR=Vp.resolve(void 0)).constructor=Vp,HM=VR(FR.then,FR),Xg=function(){HM(gA)}):HR?Xg=function(){_A.nextTick(gA)}:(jR=VR(jR,lm),Xg=function(){jR(gA)}):(sI=!0,Cb=Ib.createTextNode(""),new e_(gA).observe(Cb,{characterData:!0}),Xg=function(){Cb.data=sI=!sI}));var vA=Qi||function(r){var i={fn:r,next:void 0};$g&&($g.next=i),Gh||(Gh=i,Xg()),$g=i},ku={},pl=bc,YM=function(r){var i,a;this.promise=new r(function(c,p){if(void 0!==i||void 0!==a)throw TypeError("Bad Promise constructor");i=c,a=p}),this.resolve=pl(i),this.reject=pl(a)};ku.f=function(r){return new YM(r)};var wB=Su,TB=Oa,aI=ku,Oc=function(r,i){if(wB(r),TB(i)&&i.constructor===r)return i;var a=aI.f(r);return(0,a.resolve)(i),a.promise},RB=Or,AA=function(r){try{return{error:!1,value:r()}}catch(i){return{error:!0,value:i}}},GR=function(){this.head=null,this.tail=null};GR.prototype={add:function(r){var i={item:r,next:null};this.head?this.tail.next=i:this.head=i,this.tail=i},get:function(){var r=this.head;if(r)return this.head=r.next,this.tail===r&&(this.tail=null),r.item}};var wb,cI,uI,qM="object"==typeof window,lI=Io,jp=Or,Tb=eu,qd=Xc,Dc=lA,n_=Ab,dm=Wg,Rb=bc,yA=cs,JM=Oa,dI=Yg,Ob=iA,Yi=tA,kc=jM,li=Zg.set,pI=vA,KR=Oc,Qp=ku,Pc=AA,fI=GR,tc=Up,Hp=xf,EA=qM,mI=sl,$M=Dh,XM=ks("species"),Jd="Promise",zR=tc.getterFor(Jd),$d=tc.set,OB=tc.getterFor(Jd),Xd=Dc,Db=Dc&&Dc.prototype,Gp=jp.TypeError,pm=jp.document,gI=jp.process,hm=Qp.f,ZM=hm,bA=!!(pm&&pm.createEvent&&jp.dispatchEvent),kb=yA(jp.PromiseRejectionEvent),_I="unhandledrejection",qR=Hp(Jd,function(){var r=Ob(Xd),i=r!==String(Xd);if(!i&&66===$M||!Db.finally)return!0;if($M>=51&&/native code/.test(r))return!1;var a=new Xd(function(p){p(1)}),c=function(p){p(function(){},function(){})};return(a.constructor={})[XM]=c,!(a.then(function(){})instanceof c)||!i&&EA&&!kb}),JR=qR||!function(r,i){if(!i&&!Eb)return!1;var a=!1;try{var c={};c[ZC]=function(){return{next:function(){return{done:a=!0}}}},r(c)}catch{}return a}(function(r){Xd.all(r).catch(function(){})}),SA=function(r){var i;return!(!JM(r)||!yA(i=r.then))&&i},r_=function(r,i){var a,c,p,g=i.value,m=1==i.state,A=m?r.ok:r.fail,_=r.resolve,S=r.reject,C=r.domain;try{A?(m||(2===i.rejection&&qV(i),i.rejection=1),!0===A?a=g:(C&&C.enter(),a=A(g),C&&(C.exit(),p=!0)),a===r.promise?S(Gp("Promise-chain cycle")):(c=SA(a))?qd(c,a,_,S):_(a)):S(g)}catch(T){C&&!p&&C.exit(),S(T)}},Zd=function(r,i){r.notified||(r.notified=!0,pI(function(){for(var a,c=r.reactions;a=c.get();)r_(a,r);r.notified=!1,i&&!r.rejection&&e2(r)}))},$R=function(r,i,a){var c,p;bA?((c=pm.createEvent("Event")).promise=i,c.reason=a,c.initEvent(r,!1,!0),jp.dispatchEvent(c)):c={promise:i,reason:a},!kb&&(p=jp["on"+r])?p(c):r===_I&&function(r,i){var a=RB.console;a&&a.error&&(1==arguments.length?a.error(r):a.error(r,i))}("Unhandled promise rejection",a)},e2=function(r){qd(li,jp,function(){var i,a=r.facade,c=r.value;if(vI(r)&&(i=Pc(function(){mI?gI.emit("unhandledRejection",c,a):$R(_I,a,c)}),r.rejection=mI||vI(r)?2:1,i.error))throw i.value})},vI=function(r){return 1!==r.rejection&&!r.parent},qV=function(r){qd(li,jp,function(){var i=r.facade;mI?gI.emit("rejectionHandled",i):$R("rejectionhandled",i,r.value)})},CA=function(r,i,a){return function(c){r(i,c,a)}},IA=function(r,i,a){r.done||(r.done=!0,a&&(r=a),r.value=i,r.state=2,Zd(r,!0))},AI=function(r,i,a){if(!r.done){r.done=!0,a&&(r=a);try{if(r.facade===i)throw Gp("Promise can't be resolved itself");var c=SA(i);c?pI(function(){var p={done:!1};try{qd(c,i,CA(AI,p,r),CA(IA,p,r))}catch(g){IA(p,g,r)}}):(r.value=i,r.state=1,Zd(r,!1))}catch(p){IA({done:!1},p,r)}}};qR&&(Db=(Xd=function(r){dI(this,Db),Rb(r),qd(wb,this);var i=zR(this);try{r(CA(AI,i),CA(IA,i))}catch(a){IA(i,a)}}).prototype,(wb=function(r){$d(this,{type:Jd,done:!1,notified:!1,parent:!1,reactions:new fI,rejection:!1,state:0,value:void 0})}).prototype=n_(Db,{then:function(r,i){var a=OB(this),c=hm(kc(this,Xd));return a.parent=!0,c.ok=!yA(r)||r,c.fail=yA(i)&&i,c.domain=mI?gI.domain:void 0,0==a.state?a.reactions.add(c):pI(function(){r_(c,a)}),c.promise},catch:function(r){return this.then(void 0,r)}}),cI=function(){var r=new wb,i=zR(r);this.promise=r,this.resolve=CA(AI,i),this.reject=CA(IA,i)},Qp.f=hm=function(r){return r===Xd||r===uI?new cI(r):ZM(r)}),lI({global:!0,wrap:!0,forced:qR},{Promise:Xd}),dm(Xd,Jd,!1,!0),function(r){var i=zg(r);yb&&i&&!i[zl]&&(0,$C.f)(i,zl,{configurable:!0,get:function(){return this}})}(Jd),uI=Tb(Jd),lI({target:Jd,stat:!0,forced:qR},{reject:function(r){var i=hm(this);return qd(i.reject,void 0,r),i.promise}}),lI({target:Jd,stat:!0,forced:!0},{resolve:function(r){return KR(this===uI?Xd:this,r)}}),lI({target:Jd,stat:!0,forced:JR},{all:function(r){var i=this,a=hm(i),c=a.resolve,p=a.reject,g=Pc(function(){var m=Rb(i.resolve),A=[],_=0,S=1;Yi(r,function(C){var T=_++,D=!1;S++,qd(m,i,C).then(function(B){D||(D=!0,A[T]=B,--S||c(A))},p)}),--S||c(A)});return g.error&&p(g.value),a.promise},race:function(r){var i=this,a=hm(i),c=a.reject,p=Pc(function(){var g=Rb(i.resolve);Yi(r,function(m){qd(g,i,m).then(a.resolve,c)})});return p.error&&c(p.value),a.promise}});var XR=Xc,t2=bc,n2=ku,fm=AA,DB=tA;Io({target:"Promise",stat:!0},{allSettled:function(r){var i=this,a=n2.f(i),c=a.resolve,p=a.reject,g=fm(function(){var m=t2(i.resolve),A=[],_=0,S=1;DB(r,function(C){var T=_++,D=!1;S++,XR(m,i,C).then(function(B){D||(D=!0,A[T]={status:"fulfilled",value:B},--S||c(A))},function(B){D||(D=!0,A[T]={status:"rejected",reason:B},--S||c(A))})}),--S||c(A)});return g.error&&p(g.value),a.promise}});var r2=bc,o2=eu,kB=Xc,PB=ku,s2=AA,wA=tA,Pb="No one promise resolved";Io({target:"Promise",stat:!0},{any:function(r){var i=this,a=o2("AggregateError"),c=PB.f(i),p=c.resolve,g=c.reject,m=s2(function(){var A=r2(i.resolve),_=[],S=0,C=1,T=!1;wA(r,function(D){var B=S++,K=!1;C++,kB(A,i,D).then(function(W){K||T||(T=!0,p(W))},function(W){K||T||(K=!0,_[B]=W,--C||g(new a(_,Pb)))})}),--C||g(new a(_,Pb))});return m.error&&g(m.value),c.promise}});var ZR=lA,a2=eu,c2=cs,u2=jM,l2=Oc;Io({target:"Promise",proto:!0,real:!0,forced:!!ZR&&as(function(){ZR.prototype.finally.call({then:function(){}},function(){})})},{finally:function(r){var i=u2(this,a2("Promise")),a=c2(r);return this.then(a?function(c){return l2(i,r()).then(function(){return c})}:r,a?function(c){return l2(i,r()).then(function(){throw c})}:r)}});var eO=No,tO=DE,JV=Wl,MB=vg,NB=eO("".charAt),d2=eO("".charCodeAt),$V=eO("".slice),xB=function(r){return function(i,a){var c,p,g=JV(MB(i)),m=tO(a),A=g.length;return m<0||m>=A?r?"":void 0:(c=d2(g,m))<55296||c>56319||m+1===A||(p=d2(g,m+1))<56320||p>57343?r?NB(g,m):c:r?$V(g,m,m+2):p-56320+(c-55296<<10)+65536}},p2={codeAt:xB(!1),charAt:xB(!0)},LB=p2.charAt,Mb=Wl,Nb=JC,Ao="String Iterator",i_=Up.set,nO=Up.getterFor(Ao);Nb(String,"String",function(r){i_(this,{type:Ao,string:Mb(r),index:0})},function(){var r,i=nO(this),a=i.string,c=i.index;return c>=a.length?{value:void 0,done:!0}:(r=LB(a,c),i.index+=r.length,{value:r,done:!1})});var yI=Md.Promise,rO=Or,Lb=Mp,iO=Mh,BB=ds,ep=ks("toStringTag");for(var f2 in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var oO=rO[f2],Yl=oO&&oO.prototype;Yl&&Lb(Yl)!==ep&&iO(Yl,ep,f2),BB[f2]=BB.Array}var TA=yI,Un=TA,XV=Od,RA=P,ZV=Hc,Wh=Bt,Bb=jv,o_=Error.prototype.toString,mm=M(function(){if(RA){var r=Wh(Object.defineProperty({},"name",{get:function(){return this===r}}));if("true"!==o_.call(r))return!0}return"2: 1"!==o_.call({message:1,name:2})||"Error"!==o_.call({})})?function(){var r=ZV(this),i=Bb(r.name,"Error"),a=Bb(r.message);return i?a?i+": "+a:i:a}:o_,Wp={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},e4=qu,bI=Ht,OA=M,sO=Bt,SI=Ae,Qr=qo.f,m2=l1.f,CI=Ed.exports,Fb=Ya,g2=Ym,II=Hc,aO=mm,cO=jv,DA=Wp,_2=qE,Ub=Wu,tp=P,Kp="DOMException",Kh=bI("Error"),Mc=bI(Kp)||function(){try{(new(bI("MessageChannel")||function(r){try{if(XV)return Function('return require("'+r+'")')()}catch{}}("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(r){if("DATA_CLONE_ERR"==r.name&&25==r.code)return r.constructor}}(),wI=Kh.prototype,zp=Ub.set,FB=Ub.getterFor(Kp),t4="stack"in Kh(Kp),y2=function(r){return Fb(DA,r)&&DA[r].m?DA[r].c:0},E2=function(){g2(this,uO);var r=arguments.length,i=cO(r<1?void 0:arguments[0]),a=cO(r<2?void 0:arguments[1],"Error"),c=y2(a);if(zp(this,{type:Kp,name:a,message:i,code:c}),tp||(this.name=a,this.message=i,this.code=c),t4){var p=Kh(i);p.name=Kp,Qr(this,"stack",SI(1,_2(p.stack,1)))}},uO=E2.prototype=sO(wI),b2=function(r){return{enumerable:!0,configurable:!0,get:r}},TI=function(r){return b2(function(){return FB(this)[r]})};tp&&m2(uO,{name:TI("name"),message:TI("message"),code:TI("code")}),Qr(uO,"constructor",SI(1,E2));var RI=OA(function(){return!(new Mc instanceof Kh)}),S2=RI||OA(function(){return wI.toString!==aO||"2: 1"!==String(new Mc(1,2))}),UB=RI||OA(function(){return 25!==new Mc(1,"DataCloneError").code});e4({global:!0,forced:RI},{DOMException:RI?E2:Mc});var kA=bI(Kp),lO=kA.prototype;for(var OI in S2&&Mc===kA&&CI(lO,"toString",aO),UB&&tp&&Mc===kA&&Qr(lO,"code",b2(function(){return y2(II(this).name)})),DA)if(Fb(DA,OI)){var dO=DA[OI],Vb=dO.s,DI=SI(6,dO.c);Fb(kA,Vb)||Qr(kA,Vb,DI),Fb(lO,Vb)||Qr(lO,Vb,DI)}var kI=qu,PI=Ht,s_=Ae,PA=qo.f,MI=Ya,C2=Ym,pO=Vv,I2=jv,hO=Wp,n4=qE,MA="DOMException",Jl=PI("Error"),NA=PI(MA),NI=function(){C2(this,VB);var r=arguments.length,i=I2(r<1?void 0:arguments[0]),a=I2(r<2?void 0:arguments[1],"Error"),c=new NA(i,a),p=Jl(i);return p.name=MA,PA(c,"stack",s_(1,n4(p.stack,1))),pO(c,this,NI),c},VB=NI.prototype=NA.prototype,jB="stack"in Jl(MA),QB="stack"in new NA(1,2),fO=jB&&!QB;kI({global:!0,forced:fO},{DOMException:fO?NI:NA});var jb=PI(MA),mO=jb.prototype;if(mO.constructor!==jb)for(var Yp in PA(mO,"constructor",s_(1,jb)),hO)if(MI(hO,Yp)){var xA=hO[Yp],w2=xA.s;MI(jb,w2)||PA(jb,w2,s_(6,xA.c))}var $l="DOMException";$_(Ht($l),$l);var hl=ce,xI=Ed.exports,Qb=HE,LA=M,LI=bi,BI=Dl,Hb=LI("species"),a_=RegExp.prototype,FI=ce,HB=mf,gO=jf,_O=We,Gb=FI("".charAt),c_=FI("".charCodeAt),GB=FI("".slice),T2=function(r){return function(i,a){var c,p,g=gO(_O(i)),m=HB(a),A=g.length;return m<0||m>=A?r?"":void 0:(c=c_(g,m))<55296||c>56319||m+1===A||(p=c_(g,m+1))<56320||p>57343?r?Gb(g,m):c:r?GB(g,m,m+2):p-56320+(c-55296<<10)+65536}},WB=(T2(!1),T2(!0)),Wb=ce,R2=Tl,vO=Math.floor,AO=Wb("".charAt),KB=Wb("".replace),BA=Wb("".slice),FA=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,O2=/\$([$&'`]|\d{1,2})/g,UI=se,UA=Hc,D2=Xe,gm=xe,r4=HE,i4=H.TypeError,zB=fi,k2=se,VA=ce,wn=M,Cs=Hc,cr=Xe,Pu=mf,VI=lc,gn=jf,Tn=We,np=function(r,i,a){return i+(a?WB(r,i).length:1)},cu=Ye,ir=function(r,i,a,c,p,g){var m=a+r.length,A=c.length,_=O2;return void 0!==p&&(p=R2(p),_=FA),KB(g,_,function(S,C){var T;switch(AO(C,0)){case"$":return"$";case"&":return r;case"`":return BA(i,0,a);case"'":return BA(i,m);case"<":T=p[BA(C,1,-1)];break;default:var D=+C;if(0===D)return S;if(D>A){var B=vO(D/10);return 0===B?S:B<=A?void 0===c[B-1]?AO(C,1):c[B-1]+AO(C,1):S}T=c[D-1]}return void 0===T?"":T})},qB=function(r,i){var a=r.exec;if(D2(a)){var c=UI(a,r,i);return null!==c&&UA(c),c}if("RegExp"===gm(r))return UI(r4,r,i);throw i4("RegExp#exec called on incompatible receiver")},fl=bi("replace"),Xl=Math.max,JB=Math.min,u_=VA([].concat),jI=VA([].push),Yr=VA("".indexOf),yO=VA("".slice),jA="$0"==="a".replace(/./,"$0"),P2=!!/./[fl]&&""===/./[fl]("a","$0");!function(r,i,a,c){var p=LI(r),g=!LA(function(){var S={};return S[p]=function(){return 7},7!=""[r](S)}),m=g&&!LA(function(){var S=!1,C=/a/;return"split"===r&&((C={}).constructor={},C.constructor[Hb]=function(){return C},C.flags="",C[p]=/./[p]),C.exec=function(){return S=!0,null},C[p](""),!S});if(!g||!m||a){var A=hl(/./[p]),_=i(p,""[r],function(S,C,T,D,B){var K=hl(S),W=C.exec;return W===Qb||W===a_.exec?g&&!B?{done:!0,value:A(C,T,D)}:{done:!0,value:K(T,C,D)}:{done:!1}});xI(String.prototype,r,_[0]),xI(a_,p,_[1])}c&&BI(a_[p],"sham",!0)}("replace",function(r,i,a){var c=P2?"$":"$0";return[function(p,g){var m=Tn(this),A=null==p?void 0:cu(p,fl);return A?k2(A,p,m,g):k2(i,gn(m),p,g)},function(p,g){var m=Cs(this),A=gn(p);if("string"==typeof g&&-1===Yr(g,c)&&-1===Yr(g,"$<")){var _=a(i,m,A,g);if(_.done)return _.value}var S=cr(g);S||(g=gn(g));var C=m.global;if(C){var T=m.unicode;m.lastIndex=0}for(var D=[];;){var B=qB(m,A);if(null===B||(jI(D,B),!C))break;""===gn(B[0])&&(m.lastIndex=np(A,VI(m.lastIndex),T))}for(var K,W="",Z=0,de=0;de<D.length;de++){for(var ge=gn((B=D[de])[0]),Se=Xl(JB(Pu(B.index),A.length),0),De=[],it=1;it<B.length;it++)jI(De,void 0===(K=B[it])?K:String(K));var Rt=B.groups;if(S){var Dt=u_([ge],De,Se,A);void 0!==Rt&&jI(Dt,Rt);var Pt=gn(zB(g,void 0,Dt))}else Pt=ir(ge,A,Se,De,Rt,g);Se>=Z&&(W+=yO(A,Z,Se)+Pt,Z=Se+ge.length)}return W+yO(A,Z)}]},!!wn(function(){var r=/./;return r.exec=function(){var i=[];return i.groups={a:"7"},i},"7"!=="".replace(r,"$<a>")})||!jA||P2);var EO=Kt,bO=xe,ia=bi("match"),_m=P,QI=H,Zl=ce,Kb=zm,$B=Vv,zb=Dl,Nc=qo.f,l_=ws.f,M2=br,SO=jf,N2=iC,ga=ME,Fo=Ed.exports,js=M,Ri=Ya,hs=Wu.enforce,sr=X_,x2=aC,CO=y1,IO=bi("match"),qp=QI.RegExp,d_=qp.prototype,L2=QI.SyntaxError,o4=Zl(N2),B2=Zl(d_.exec),zh=Zl("".charAt),Yb=Zl("".replace),qb=Zl("".indexOf),ed=Zl("".slice),GI=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,QA=/a/g,wO=/a/g,XB=new qp(QA)!==QA,TO=ga.MISSED_STICKY,F2=ga.UNSUPPORTED_Y;if(Kb("RegExp",_m&&(!XB||TO||x2||CO||js(function(){return wO[IO]=!1,qp(QA)!=QA||qp(wO)==wO||"/a/i"!=qp(QA,"i")})))){for(var fs=function(r,i){var a,c,p,g,m,A,_=M2(d_,this),S=function(r){var i;return EO(r)&&(void 0!==(i=r[ia])?!!i:"RegExp"==bO(r))}(r),C=void 0===i,T=[],D=r;if(!_&&S&&C&&r.constructor===fs)return r;if((S||M2(d_,r))&&(r=r.source,C&&(i="flags"in D?D.flags:o4(D))),r=void 0===r?"":SO(r),i=void 0===i?"":SO(i),D=r,x2&&"dotAll"in QA&&(c=!!i&&qb(i,"s")>-1)&&(i=Yb(i,/s/g,"")),a=i,TO&&"sticky"in QA&&(p=!!i&&qb(i,"y")>-1)&&F2&&(i=Yb(i,/y/g,"")),CO&&(r=(g=function(B){for(var K,W=B.length,Z=0,de="",ge=[],Se={},De=!1,it=!1,Rt=0,Dt="";Z<=W;Z++){if("\\"===(K=zh(B,Z)))K+=zh(B,++Z);else if("]"===K)De=!1;else if(!De)switch(!0){case"["===K:De=!0;break;case"("===K:B2(GI,ed(B,Z+1))&&(Z+=2,it=!0),de+=K,Rt++;continue;case">"===K&&it:if(""===Dt||Ri(Se,Dt))throw new L2("Invalid capture group name");Se[Dt]=!0,ge[ge.length]=[Dt,Rt],it=!1,Dt="";continue}it?Dt+=K:de+=K}return[de,ge]}(r))[0],T=g[1]),m=$B(qp(r,i),_?this:d_,fs),(c||p||T.length)&&(A=hs(m),c&&(A.dotAll=!0,A.raw=fs(function(B){for(var K,W=B.length,Z=0,de="",ge=!1;Z<=W;Z++)"\\"!==(K=zh(B,Z))?ge||"."!==K?("["===K?ge=!0:"]"===K&&(ge=!1),de+=K):de+="[\\s\\S]":de+=K+zh(B,++Z);return de}(r),a)),p&&(A.sticky=!0),T.length&&(A.groups=T)),r!==D)try{zb(m,"source",""===D?"(?:)":D)}catch{}return m},HA=function(r){r in fs||Nc(fs,r,{configurable:!0,get:function(){return qp[r]},set:function(i){qp[r]=i}})},ZB=l_(qp),ml=0;ZB.length>ml;)HA(ZB[ml++]);d_.constructor=fs,fs.prototype=d_,Fo(QI,"RegExp",fs)}sr("RegExp");var V2=xe,WA=Wu.get,OO=RegExp.prototype,Qs=H.TypeError;P&&aC&&(0,qo.f)(OO,"dotAll",{configurable:!0,get:function(){if(this!==OO){if("RegExp"===V2(this))return!!WA(this).dotAll;throw Qs("Incompatible receiver, RegExp required")}}});const Nr=H1;function mi(r,i){const a=r&&r.navigator;if(!a.mediaDevices)return;const c=function(m){if("object"!=typeof m||m.mandatory||m.optional)return m;const A={};return Object.keys(m).forEach(_=>{if("require"===_||"advanced"===_||"mediaSource"===_)return;const S="object"==typeof m[_]?m[_]:{ideal:m[_]};void 0!==S.exact&&"number"==typeof S.exact&&(S.min=S.max=S.exact);const C=function(T,D){return T?T+D.charAt(0).toUpperCase()+D.slice(1):"deviceId"===D?"sourceId":D};if(void 0!==S.ideal){A.optional=A.optional||[];let T={};"number"==typeof S.ideal?(T[C("min",_)]=S.ideal,A.optional.push(T),T={},T[C("max",_)]=S.ideal,A.optional.push(T)):(T[C("",_)]=S.ideal,A.optional.push(T))}void 0!==S.exact&&"number"!=typeof S.exact?(A.mandatory=A.mandatory||{},A.mandatory[C("",_)]=S.exact):["min","max"].forEach(T=>{void 0!==S[T]&&(A.mandatory=A.mandatory||{},A.mandatory[C(T,_)]=S[T])})}),m.advanced&&(A.optional=(A.optional||[]).concat(m.advanced)),A},p=function(m,A){if(i.version>=61)return A(m);if((m=JSON.parse(JSON.stringify(m)))&&"object"==typeof m.audio){const _=function(S,C,T){C in S&&!(T in S)&&(S[T]=S[C],delete S[C])};_((m=JSON.parse(JSON.stringify(m))).audio,"autoGainControl","googAutoGainControl"),_(m.audio,"noiseSuppression","googNoiseSuppression"),m.audio=c(m.audio)}if(m&&"object"==typeof m.video){let _=m.video.facingMode;_=_&&("object"==typeof _?_:{ideal:_});const S=i.version<66;if(_&&("user"===_.exact||"environment"===_.exact||"user"===_.ideal||"environment"===_.ideal)&&(!a.mediaDevices.getSupportedConstraints||!a.mediaDevices.getSupportedConstraints().facingMode||S)){let C;if(delete m.video.facingMode,"environment"===_.exact||"environment"===_.ideal?C=["back","rear"]:"user"!==_.exact&&"user"!==_.ideal||(C=["front"]),C)return a.mediaDevices.enumerateDevices().then(T=>{let D=(T=T.filter(B=>"videoinput"===B.kind)).find(B=>C.some(K=>B.label.toLowerCase().includes(K)));return!D&&T.length&&C.includes("back")&&(D=T[T.length-1]),D&&(m.video.deviceId=_.exact?{exact:D.deviceId}:{ideal:D.deviceId}),m.video=c(m.video),Nr("chrome: "+JSON.stringify(m)),A(m)})}m.video=c(m.video)}return Nr("chrome: "+JSON.stringify(m)),A(m)},g=function(m){return i.version>=64?m:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[m.name]||m.name,message:m.message,constraint:m.constraint||m.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(a.getUserMedia=function(m,A,_){p(m,S=>{a.webkitGetUserMedia(S,A,C=>{_&&_(g(C))})})}.bind(a),a.mediaDevices.getUserMedia){const m=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(A){return p(A,_=>m(_).then(S=>{if(_.audio&&!S.getAudioTracks().length||_.video&&!S.getVideoTracks().length)throw S.getTracks().forEach(C=>{C.stop()}),new DOMException("","NotFoundError");return S},S=>Un.reject(g(S))))}}}function DO(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function Jb(r){if("object"==typeof r&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(a){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=a)},enumerable:!0,configurable:!0});const i=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=a=>{a.stream.addEventListener("addtrack",c=>{let p;p=r.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(m=>m.track&&m.track.id===c.track.id):{track:c.track};const g=new Event("track");g.track=c.track,g.receiver=p,g.transceiver={receiver:p},g.streams=[a.stream],this.dispatchEvent(g)}),a.stream.getTracks().forEach(c=>{let p;p=r.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(m=>m.track&&m.track.id===c.id):{track:c};const g=new Event("track");g.track=c,g.receiver=p,g.transceiver={receiver:p},g.streams=[a.stream],this.dispatchEvent(g)})},this.addEventListener("addstream",this._ontrackpoly)),i.apply(this,arguments)}}else Fh(r,"track",i=>(i.transceiver||Object.defineProperty(i,"transceiver",{value:{receiver:i.receiver}}),i))}function Mu(r){if("object"==typeof r&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const i=function(p,g){return{track:g,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===g.kind?p.createDTMFSender(g):null),this._dtmf},_pc:p}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const p=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(m,A){let _=p.apply(this,arguments);return _||(_=i(this,m),this._senders.push(_)),_};const g=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(m){g.apply(this,arguments);const A=this._senders.indexOf(m);-1!==A&&this._senders.splice(A,1)}}const a=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(p){this._senders=this._senders||[],a.apply(this,[p]),p.getTracks().forEach(g=>{this._senders.push(i(this,g))})};const c=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(p){this._senders=this._senders||[],c.apply(this,[p]),p.getTracks().forEach(g=>{const m=this._senders.find(A=>A.track===g);m&&this._senders.splice(this._senders.indexOf(m),1)})}}else if("object"==typeof r&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const i=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const a=i.apply(this,[]);return a.forEach(c=>c._pc=this),a},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function $b(r){if(!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[a,c,p]=arguments;if(arguments.length>0&&"function"==typeof a)return i.apply(this,arguments);if(0===i.length&&(0===arguments.length||"function"!=typeof a))return i.apply(this,[]);const g=function(A){const _={};return A.result().forEach(S=>{const C={id:S.id,timestamp:S.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[S.type]||S.type};S.names().forEach(T=>{C[T]=S.stat(T)}),_[C.id]=C}),_},m=function(A){return new Map(Object.keys(A).map(_=>[_,A[_]]))};return arguments.length>=2?i.apply(this,[function(_){c(m(g(_)))},a]):new Un((A,_)=>{i.apply(this,[function(S){A(m(g(S)))},_])}).then(c,p)}}function td(r){if(!("object"==typeof r&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const a=r.RTCPeerConnection.prototype.getSenders;a&&(r.RTCPeerConnection.prototype.getSenders=function(){const p=a.apply(this,[]);return p.forEach(g=>g._pc=this),p});const c=r.RTCPeerConnection.prototype.addTrack;c&&(r.RTCPeerConnection.prototype.addTrack=function(){const p=c.apply(this,arguments);return p._pc=this,p}),r.RTCRtpSender.prototype.getStats=function(){const p=this;return this._pc.getStats().then(g=>Yf(g,p.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const a=r.RTCPeerConnection.prototype.getReceivers;a&&(r.RTCPeerConnection.prototype.getReceivers=function(){const c=a.apply(this,[]);return c.forEach(p=>p._pc=this),c}),Fh(r,"track",c=>(c.receiver._pc=c.srcElement,c)),r.RTCRtpReceiver.prototype.getStats=function(){const c=this;return this._pc.getStats().then(p=>Yf(p,c.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype)||!("getStats"in r.RTCRtpReceiver.prototype))return;const i=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const a=arguments[0];let c,p,g;return this.getSenders().forEach(m=>{m.track===a&&(c?g=!0:c=m)}),this.getReceivers().forEach(m=>(m.track===a&&(p?g=!0:p=m),m.track===a)),g||c&&p?Un.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):c?c.getStats():p?p.getStats():Un.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}function kO(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(g=>this._shimmedLocalStreams[g][0])};const i=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(g,m){if(!m)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const A=i.apply(this,arguments);return this._shimmedLocalStreams[m.id]?-1===this._shimmedLocalStreams[m.id].indexOf(A)&&this._shimmedLocalStreams[m.id].push(A):this._shimmedLocalStreams[m.id]=[m,A],A};const a=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(g){this._shimmedLocalStreams=this._shimmedLocalStreams||{},g.getTracks().forEach(_=>{if(this.getSenders().find(S=>S.track===_))throw new DOMException("Track already exists.","InvalidAccessError")});const m=this.getSenders();a.apply(this,arguments);const A=this.getSenders().filter(_=>-1===m.indexOf(_));this._shimmedLocalStreams[g.id]=[g].concat(A)};const c=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[g.id],c.apply(this,arguments)};const p=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},g&&Object.keys(this._shimmedLocalStreams).forEach(m=>{const A=this._shimmedLocalStreams[m].indexOf(g);-1!==A&&this._shimmedLocalStreams[m].splice(A,1),1===this._shimmedLocalStreams[m].length&&delete this._shimmedLocalStreams[m]}),p.apply(this,arguments)}}function Ps(r,i){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&i.version>=65)return kO(r);const a=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const S=a.apply(this);return this._reverseStreams=this._reverseStreams||{},S.map(C=>this._reverseStreams[C.id])};const c=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(S){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},S.getTracks().forEach(C=>{if(this.getSenders().find(T=>T.track===C))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[S.id]){const C=new r.MediaStream(S.getTracks());this._streams[S.id]=C,this._reverseStreams[C.id]=S,S=C}c.apply(this,[S])};const p=r.RTCPeerConnection.prototype.removeStream;function g(S,C){let T=C.sdp;return Object.keys(S._reverseStreams||[]).forEach(D=>{const B=S._reverseStreams[D];T=T.replace(new RegExp(S._streams[B.id].id,"g"),B.id)}),new RTCSessionDescription({type:C.type,sdp:T})}function m(S,C){let T=C.sdp;return Object.keys(S._reverseStreams||[]).forEach(D=>{const B=S._reverseStreams[D],K=S._streams[B.id];T=T.replace(new RegExp(B.id,"g"),K.id)}),new RTCSessionDescription({type:C.type,sdp:T})}r.RTCPeerConnection.prototype.removeStream=function(S){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.apply(this,[this._streams[S.id]||S]),delete this._reverseStreams[this._streams[S.id]?this._streams[S.id].id:S.id],delete this._streams[S.id]},r.RTCPeerConnection.prototype.addTrack=function(S,C){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const T=[].slice.call(arguments,1);if(1!==T.length||!T[0].getTracks().find(K=>K===S))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(K=>K.track===S))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const B=this._streams[C.id];if(B)B.addTrack(S),Un.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const K=new r.MediaStream([S]);this._streams[C.id]=K,this._reverseStreams[K.id]=C,this.addStream(K)}return this.getSenders().find(K=>K.track===S)},["createOffer","createAnswer"].forEach(function(S){const C=r.RTCPeerConnection.prototype[S],T={[S](){const D=arguments;return arguments.length&&"function"==typeof arguments[0]?C.apply(this,[B=>{const K=g(this,B);D[0].apply(null,[K])},B=>{D[1]&&D[1].apply(null,B)},arguments[2]]):C.apply(this,arguments).then(B=>g(this,B))}};r.RTCPeerConnection.prototype[S]=T[S]});const A=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=m(this,arguments[0]),A.apply(this,arguments)):A.apply(this,arguments)};const _=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const S=_.get.apply(this);return""===S.type?S:g(this,S)}}),r.RTCPeerConnection.prototype.removeTrack=function(S){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!S._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(S._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let C;this._streams=this._streams||{},Object.keys(this._streams).forEach(T=>{this._streams[T].getTracks().find(D=>S.track===D)&&(C=this._streams[T])}),C&&(1===C.getTracks().length?this.removeStream(this._reverseStreams[C.id]):C.removeTrack(S.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Xb(r,i){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const c=r.RTCPeerConnection.prototype[a],p={[a](){return arguments[0]=new("addIceCandidate"===a?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};r.RTCPeerConnection.prototype[a]=p[a]})}function yo(r,i){Fh(r,"negotiationneeded",a=>{const c=a.target;if(!(i.version<72||c.getConfiguration&&"plan-b"===c.getConfiguration().sdpSemantics)||"stable"===c.signalingState)return a})}var PO=Object.freeze({__proto__:null,shimMediaStream:DO,shimOnTrack:Jb,shimGetSendersWithDtmf:Mu,shimGetStats:$b,shimSenderReceiverGetStats:td,shimAddTrackRemoveTrackWithNative:kO,shimAddTrackRemoveTrack:Ps,shimPeerConnection:Xb,fixNegotiationNeeded:yo,shimGetUserMedia:mi,shimGetDisplayMedia:function(r,i){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&("function"==typeof i?r.navigator.mediaDevices.getDisplayMedia=function(a){return i(a).then(c=>{const p=a.video&&a.video.width,g=a.video&&a.video.height;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c,maxFrameRate:a.video&&a.video.frameRate||3}},p&&(a.video.mandatory.maxWidth=p),g&&(a.video.mandatory.maxHeight=g),r.navigator.mediaDevices.getUserMedia(a)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),KA={exports:{}};!function(r){var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(a){return a.trim().split("\n").map(function(c){return c.trim()})},i.splitSections=function(a){return a.split("\nm=").map(function(c,p){return(p>0?"m="+c:c).trim()+"\r\n"})},i.getDescription=function(a){var c=i.splitSections(a);return c&&c[0]},i.getMediaSections=function(a){var c=i.splitSections(a);return c.shift(),c},i.matchPrefix=function(a,c){return i.splitLines(a).filter(function(p){return 0===p.indexOf(c)})},i.parseCandidate=function(a){for(var c,p={foundation:(c=0===a.indexOf("a=candidate:")?a.substring(12).split(" "):a.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":p.relatedAddress=c[g+1];break;case"rport":p.relatedPort=parseInt(c[g+1],10);break;case"tcptype":p.tcpType=c[g+1];break;case"ufrag":p.ufrag=c[g+1],p.usernameFragment=c[g+1];break;default:p[c[g]]=c[g+1]}return p},i.writeCandidate=function(a){var c=[];c.push(a.foundation),c.push(a.component),c.push(a.protocol.toUpperCase()),c.push(a.priority),c.push(a.address||a.ip),c.push(a.port);var p=a.type;return c.push("typ"),c.push(p),"host"!==p&&a.relatedAddress&&a.relatedPort&&(c.push("raddr"),c.push(a.relatedAddress),c.push("rport"),c.push(a.relatedPort)),a.tcpType&&"tcp"===a.protocol.toLowerCase()&&(c.push("tcptype"),c.push(a.tcpType)),(a.usernameFragment||a.ufrag)&&(c.push("ufrag"),c.push(a.usernameFragment||a.ufrag)),"candidate:"+c.join(" ")},i.parseIceOptions=function(a){return a.substr(14).split(" ")},i.parseRtpMap=function(a){var c=a.substr(9).split(" "),p={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),p.name=c[0],p.clockRate=parseInt(c[1],10),p.channels=3===c.length?parseInt(c[2],10):1,p.numChannels=p.channels,p},i.writeRtpMap=function(a){var c=a.payloadType;void 0!==a.preferredPayloadType&&(c=a.preferredPayloadType);var p=a.channels||a.numChannels||1;return"a=rtpmap:"+c+" "+a.name+"/"+a.clockRate+(1!==p?"/"+p:"")+"\r\n"},i.parseExtmap=function(a){var c=a.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},i.writeExtmap=function(a){return"a=extmap:"+(a.id||a.preferredId)+(a.direction&&"sendrecv"!==a.direction?"/"+a.direction:"")+" "+a.uri+"\r\n"},i.parseFmtp=function(a){for(var c,p={},g=a.substr(a.indexOf(" ")+1).split(";"),m=0;m<g.length;m++)p[(c=g[m].trim().split("="))[0].trim()]=c[1];return p},i.writeFmtp=function(a){var c="",p=a.payloadType;if(void 0!==a.preferredPayloadType&&(p=a.preferredPayloadType),a.parameters&&Object.keys(a.parameters).length){var g=[];Object.keys(a.parameters).forEach(function(m){g.push(a.parameters[m]?m+"="+a.parameters[m]:m)}),c+="a=fmtp:"+p+" "+g.join(";")+"\r\n"}return c},i.parseRtcpFb=function(a){var c=a.substr(a.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},i.writeRtcpFb=function(a){var c="",p=a.payloadType;return void 0!==a.preferredPayloadType&&(p=a.preferredPayloadType),a.rtcpFeedback&&a.rtcpFeedback.length&&a.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+p+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},i.parseSsrcMedia=function(a){var c=a.indexOf(" "),p={ssrc:parseInt(a.substr(7,c-7),10)},g=a.indexOf(":",c);return g>-1?(p.attribute=a.substr(c+1,g-c-1),p.value=a.substr(g+1)):p.attribute=a.substr(c+1),p},i.parseSsrcGroup=function(a){var c=a.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(p){return parseInt(p,10)})}},i.getMid=function(a){var c=i.matchPrefix(a,"a=mid:")[0];if(c)return c.substr(6)},i.parseFingerprint=function(a){var c=a.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},i.getDtlsParameters=function(a,c){return{role:"auto",fingerprints:i.matchPrefix(a+c,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(a,c){var p="a=setup:"+c+"\r\n";return a.fingerprints.forEach(function(g){p+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),p},i.getIceParameters=function(a,c){var p=i.splitLines(a);return{usernameFragment:(p=p.concat(i.splitLines(c))).filter(function(g){return 0===g.indexOf("a=ice-ufrag:")})[0].substr(12),password:p.filter(function(g){return 0===g.indexOf("a=ice-pwd:")})[0].substr(10)}},i.writeIceParameters=function(a){return"a=ice-ufrag:"+a.usernameFragment+"\r\na=ice-pwd:"+a.password+"\r\n"},i.parseRtpParameters=function(a){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},p=i.splitLines(a)[0].split(" "),g=3;g<p.length;g++){var m=p[g],A=i.matchPrefix(a,"a=rtpmap:"+m+" ")[0];if(A){var _=i.parseRtpMap(A),S=i.matchPrefix(a,"a=fmtp:"+m+" ");switch(_.parameters=S.length?i.parseFmtp(S[0]):{},_.rtcpFeedback=i.matchPrefix(a,"a=rtcp-fb:"+m+" ").map(i.parseRtcpFb),c.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(_.name.toUpperCase())}}}return i.matchPrefix(a,"a=extmap:").forEach(function(C){c.headerExtensions.push(i.parseExtmap(C))}),c},i.writeRtpDescription=function(a,c){var p="";p+="m="+a+" ",p+=c.codecs.length>0?"9":"0",p+=" UDP/TLS/RTP/SAVPF ",p+=c.codecs.map(function(m){return void 0!==m.preferredPayloadType?m.preferredPayloadType:m.payloadType}).join(" ")+"\r\n",p+="c=IN IP4 0.0.0.0\r\n",p+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(m){p+=i.writeRtpMap(m),p+=i.writeFmtp(m),p+=i.writeRtcpFb(m)});var g=0;return c.codecs.forEach(function(m){m.maxptime>g&&(g=m.maxptime)}),g>0&&(p+="a=maxptime:"+g+"\r\n"),p+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(m){p+=i.writeExtmap(m)}),p},i.parseRtpEncodingParameters=function(a){var c,p=[],g=i.parseRtpParameters(a),m=-1!==g.fecMechanisms.indexOf("RED"),A=-1!==g.fecMechanisms.indexOf("ULPFEC"),_=i.matchPrefix(a,"a=ssrc:").map(function(D){return i.parseSsrcMedia(D)}).filter(function(D){return"cname"===D.attribute}),S=_.length>0&&_[0].ssrc,C=i.matchPrefix(a,"a=ssrc-group:FID").map(function(D){return D.substr(17).split(" ").map(function(B){return parseInt(B,10)})});C.length>0&&C[0].length>1&&C[0][0]===S&&(c=C[0][1]),g.codecs.forEach(function(D){if("RTX"===D.name.toUpperCase()&&D.parameters.apt){var B={ssrc:S,codecPayloadType:parseInt(D.parameters.apt,10)};S&&c&&(B.rtx={ssrc:c}),p.push(B),m&&((B=JSON.parse(JSON.stringify(B))).fec={ssrc:S,mechanism:A?"red+ulpfec":"red"},p.push(B))}}),0===p.length&&S&&p.push({ssrc:S});var T=i.matchPrefix(a,"b=");return T.length&&(T=0===T[0].indexOf("b=TIAS:")?parseInt(T[0].substr(7),10):0===T[0].indexOf("b=AS:")?1e3*parseInt(T[0].substr(5),10)*.95-16e3:void 0,p.forEach(function(D){D.maxBitrate=T})),p},i.parseRtcpParameters=function(a){var c={},p=i.matchPrefix(a,"a=ssrc:").map(function(A){return i.parseSsrcMedia(A)}).filter(function(A){return"cname"===A.attribute})[0];p&&(c.cname=p.value,c.ssrc=p.ssrc);var g=i.matchPrefix(a,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var m=i.matchPrefix(a,"a=rtcp-mux");return c.mux=m.length>0,c},i.parseMsid=function(a){var c,p=i.matchPrefix(a,"a=msid:");if(1===p.length)return{stream:(c=p[0].substr(7).split(" "))[0],track:c[1]};var g=i.matchPrefix(a,"a=ssrc:").map(function(m){return i.parseSsrcMedia(m)}).filter(function(m){return"msid"===m.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(a,c,p){var g=void 0!==c?c:2;return"v=0\r\no="+(p||"thisisadapterortc")+" "+(a||i.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(a,c,p,g){var m=i.writeRtpDescription(a.kind,c);if(m+=i.writeIceParameters(a.iceGatherer.getLocalParameters()),m+=i.writeDtlsParameters(a.dtlsTransport.getLocalParameters(),"offer"===p?"actpass":"active"),m+="a=mid:"+a.mid+"\r\n",m+=a.direction?"a="+a.direction+"\r\n":a.rtpSender&&a.rtpReceiver?"a=sendrecv\r\n":a.rtpSender?"a=sendonly\r\n":a.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",a.rtpSender){var A="msid:"+g.id+" "+a.rtpSender.track.id+"\r\n";m+="a="+A,m+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" "+A,a.sendEncodingParameters[0].rtx&&(m+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" "+A,m+="a=ssrc-group:FID "+a.sendEncodingParameters[0].ssrc+" "+a.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return m+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",a.rtpSender&&a.sendEncodingParameters[0].rtx&&(m+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),m},i.getDirection=function(a,c){for(var p=i.splitLines(a),g=0;g<p.length;g++)switch(p[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return p[g].substr(2)}return c?i.getDirection(c):"sendrecv"},i.getKind=function(a){return i.splitLines(a)[0].split(" ")[0].substr(2)},i.isRejected=function(a){return"0"===a.split(" ",2)[1]},i.parseMLine=function(a){var c=i.splitLines(a)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},i.parseOLine=function(a){var c=i.matchPrefix(a,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},i.isValidSDP=function(a){if("string"!=typeof a||0===a.length)return!1;for(var c=i.splitLines(a),p=0;p<c.length;p++)if(c[p].length<2||"="!==c[p].charAt(1))return!1;return!0},r.exports=i}(KA);var xr=KA.exports;function zA(r,i,a,c,p){var g=xr.writeRtpDescription(r.kind,i);if(g+=xr.writeIceParameters(r.iceGatherer.getLocalParameters()),g+=xr.writeDtlsParameters(r.dtlsTransport.getLocalParameters(),"offer"===a?"actpass":p||"active"),g+="a=mid:"+r.mid+"\r\n",g+=r.rtpSender&&r.rtpReceiver?"a=sendrecv\r\n":r.rtpSender?"a=sendonly\r\n":r.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",r.rtpSender){var m=r.rtpSender._initialTrackId||r.rtpSender.track.id;r.rtpSender._initialTrackId=m;var A="msid:"+(c?c.id:"-")+" "+m+"\r\n";g+="a="+A,g+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" "+A,r.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" "+A,g+="a=ssrc-group:FID "+r.sendEncodingParameters[0].ssrc+" "+r.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return g+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" cname:"+xr.localCName+"\r\n",r.rtpSender&&r.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" cname:"+xr.localCName+"\r\n"),g}function Zb(r,i){var a={codecs:[],headerExtensions:[],fecMechanisms:[]},c=function(g,m){g=parseInt(g,10);for(var A=0;A<m.length;A++)if(m[A].payloadType===g||m[A].preferredPayloadType===g)return m[A]},p=function(g,m,A,_){var S=c(g.parameters.apt,A),C=c(m.parameters.apt,_);return S&&C&&S.name.toLowerCase()===C.name.toLowerCase()};return r.codecs.forEach(function(g){for(var m=0;m<i.codecs.length;m++){var A=i.codecs[m];if(g.name.toLowerCase()===A.name.toLowerCase()&&g.clockRate===A.clockRate){if("rtx"===g.name.toLowerCase()&&g.parameters&&A.parameters.apt&&!p(g,A,r.codecs,i.codecs))continue;(A=JSON.parse(JSON.stringify(A))).numChannels=Math.min(g.numChannels,A.numChannels),a.codecs.push(A),A.rtcpFeedback=A.rtcpFeedback.filter(function(_){for(var S=0;S<g.rtcpFeedback.length;S++)if(g.rtcpFeedback[S].type===_.type&&g.rtcpFeedback[S].parameter===_.parameter)return!0;return!1});break}}}),r.headerExtensions.forEach(function(g){for(var m=0;m<i.headerExtensions.length;m++){var A=i.headerExtensions[m];if(g.uri===A.uri){a.headerExtensions.push(A);break}}}),a}function zI(r,i,a){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[i][r].indexOf(a)}function YA(r,i){var a=r.getRemoteCandidates().find(function(c){return i.foundation===c.foundation&&i.ip===c.ip&&i.port===c.port&&i.priority===c.priority&&i.protocol===c.protocol&&i.type===c.type});return a||r.addRemoteCandidate(i),!a}function oa(r,i){var a=new Error(i);return a.name=r,a.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[r],a}function MO(r){const i=r&&r.navigator,a=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(c){return a(c).catch(p=>{return Un.reject({name:{PermissionDeniedError:"NotAllowedError"}[(g=p).name]||g.name,message:g.message,constraint:g.constraint,toString(){return this.name}});var g})}}function qI(r){"getDisplayMedia"in r.navigator&&r.navigator.mediaDevices&&(r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||(r.navigator.mediaDevices.getDisplayMedia=r.navigator.getDisplayMedia.bind(r.navigator)))}function JI(r,i){if(r.RTCIceGatherer&&(r.RTCIceCandidate||(r.RTCIceCandidate=function(c){return c}),r.RTCSessionDescription||(r.RTCSessionDescription=function(c){return c}),i.version<15025)){const c=Object.getOwnPropertyDescriptor(r.MediaStreamTrack.prototype,"enabled");Object.defineProperty(r.MediaStreamTrack.prototype,"enabled",{set(p){c.set.call(this,p);const g=new Event("enabled");g.enabled=p,this.dispatchEvent(g)}})}r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)&&Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new r.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),r.RTCDtmfSender&&!r.RTCDTMFSender&&(r.RTCDTMFSender=r.RTCDtmfSender);const a=function(r,i){function a(m,A){A.addTrack(m),A.dispatchEvent(new r.MediaStreamTrackEvent("addtrack",{track:m}))}function c(m,A,_,S){var C=new Event("track");C.track=A,C.receiver=_,C.transceiver={receiver:_},C.streams=S,r.setTimeout(function(){m._dispatchEvent("track",C)})}var p=function(m){var C,T,D,A=this,_=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(C){A[C]=_[C].bind(_)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",m=JSON.parse(JSON.stringify(m||{})),this.usingBundle="max-bundle"===m.bundlePolicy,"negotiate"===m.rtcpMuxPolicy)throw oa("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(m.rtcpMuxPolicy||(m.rtcpMuxPolicy="require"),m.iceTransportPolicy){case"all":case"relay":break;default:m.iceTransportPolicy="all"}switch(m.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:m.bundlePolicy="balanced"}if(m.iceServers=(C=m.iceServers||[],T=i,D=!1,(C=JSON.parse(JSON.stringify(C))).filter(function(B){if(B&&(B.urls||B.url)){var K=B.urls||B.url;B.url&&!B.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var W="string"==typeof K;return W&&(K=[K]),K=K.filter(function(Z){return 0!==Z.indexOf("turn:")||-1===Z.indexOf("transport=udp")||-1!==Z.indexOf("turn:[")||D?0===Z.indexOf("stun:")&&T>=14393&&-1===Z.indexOf("?transport=udp"):(D=!0,!0)}),delete B.url,B.urls=W?K[0]:K,!!K.length}})),this._iceGatherers=[],m.iceCandidatePoolSize)for(var S=m.iceCandidatePoolSize;S>0;S--)this._iceGatherers.push(new r.RTCIceGatherer({iceServers:m.iceServers,gatherPolicy:m.iceTransportPolicy}));else m.iceCandidatePoolSize=0;this._config=m,this.transceivers=[],this._sdpSessionId=xr.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(p.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(p.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),p.prototype.onicecandidate=null,p.prototype.onaddstream=null,p.prototype.ontrack=null,p.prototype.onremovestream=null,p.prototype.onsignalingstatechange=null,p.prototype.oniceconnectionstatechange=null,p.prototype.onconnectionstatechange=null,p.prototype.onicegatheringstatechange=null,p.prototype.onnegotiationneeded=null,p.prototype.ondatachannel=null,p.prototype._dispatchEvent=function(m,A){this._isClosed||(this.dispatchEvent(A),"function"==typeof this["on"+m]&&this["on"+m](A))},p.prototype._emitGatheringStateChange=function(){var m=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",m)},p.prototype.getConfiguration=function(){return this._config},p.prototype.getLocalStreams=function(){return this.localStreams},p.prototype.getRemoteStreams=function(){return this.remoteStreams},p.prototype._createTransceiver=function(m,A){var S={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:m,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)S.iceTransport=this.transceivers[0].iceTransport,S.dtlsTransport=this.transceivers[0].dtlsTransport;else{var C=this._createIceAndDtlsTransports();S.iceTransport=C.iceTransport,S.dtlsTransport=C.dtlsTransport}return A||this.transceivers.push(S),S},p.prototype.addTrack=function(m,A){if(this._isClosed)throw oa("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var _;if(this.transceivers.find(function(C){return C.track===m}))throw oa("InvalidAccessError","Track already exists.");for(var S=0;S<this.transceivers.length;S++)this.transceivers[S].track||this.transceivers[S].kind!==m.kind||(_=this.transceivers[S]);return _||(_=this._createTransceiver(m.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(A)&&this.localStreams.push(A),_.track=m,_.stream=A,_.rtpSender=new r.RTCRtpSender(m,_.dtlsTransport),_.rtpSender},p.prototype.addStream=function(m){var A=this;if(i>=15025)m.getTracks().forEach(function(S){A.addTrack(S,m)});else{var _=m.clone();m.getTracks().forEach(function(S,C){var T=_.getTracks()[C];S.addEventListener("enabled",function(D){T.enabled=D.enabled})}),_.getTracks().forEach(function(S){A.addTrack(S,_)})}},p.prototype.removeTrack=function(m){if(this._isClosed)throw oa("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(m instanceof r.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var A=this.transceivers.find(function(S){return S.rtpSender===m});if(!A)throw oa("InvalidAccessError","Sender was not created by this connection.");var _=A.stream;A.rtpSender.stop(),A.rtpSender=null,A.track=null,A.stream=null,-1===this.transceivers.map(function(S){return S.stream}).indexOf(_)&&this.localStreams.indexOf(_)>-1&&this.localStreams.splice(this.localStreams.indexOf(_),1),this._maybeFireNegotiationNeeded()},p.prototype.removeStream=function(m){var A=this;m.getTracks().forEach(function(_){var S=A.getSenders().find(function(C){return C.track===_});S&&A.removeTrack(S)})},p.prototype.getSenders=function(){return this.transceivers.filter(function(m){return!!m.rtpSender}).map(function(m){return m.rtpSender})},p.prototype.getReceivers=function(){return this.transceivers.filter(function(m){return!!m.rtpReceiver}).map(function(m){return m.rtpReceiver})},p.prototype._createIceGatherer=function(m,A){var _=this;if(A&&m>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var S=new r.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(S,"state",{value:"new",writable:!0}),this.transceivers[m].bufferedCandidateEvents=[],this.transceivers[m].bufferCandidates=function(C){var T=!C.candidate||0===Object.keys(C.candidate).length;S.state=T?"completed":"gathering",null!==_.transceivers[m].bufferedCandidateEvents&&_.transceivers[m].bufferedCandidateEvents.push(C)},S.addEventListener("localcandidate",this.transceivers[m].bufferCandidates),S},p.prototype._gather=function(m,A){var _=this,S=this.transceivers[A].iceGatherer;if(!S.onlocalcandidate){var C=this.transceivers[A].bufferedCandidateEvents;this.transceivers[A].bufferedCandidateEvents=null,S.removeEventListener("localcandidate",this.transceivers[A].bufferCandidates),S.onlocalcandidate=function(T){if(!(_.usingBundle&&A>0)){var D=new Event("icecandidate");D.candidate={sdpMid:m,sdpMLineIndex:A};var B=T.candidate,K=!B||0===Object.keys(B).length;if(K)"new"!==S.state&&"gathering"!==S.state||(S.state="completed");else{"new"===S.state&&(S.state="gathering"),B.component=1,B.ufrag=S.getLocalParameters().usernameFragment;var W=xr.writeCandidate(B);D.candidate=Object.assign(D.candidate,xr.parseCandidate(W)),D.candidate.candidate=W,D.candidate.toJSON=function(){return{candidate:D.candidate.candidate,sdpMid:D.candidate.sdpMid,sdpMLineIndex:D.candidate.sdpMLineIndex,usernameFragment:D.candidate.usernameFragment}}}var Z=xr.getMediaSections(_._localDescription.sdp);Z[D.candidate.sdpMLineIndex]+=K?"a=end-of-candidates\r\n":"a="+D.candidate.candidate+"\r\n",_._localDescription.sdp=xr.getDescription(_._localDescription.sdp)+Z.join("");var de=_.transceivers.every(function(ge){return ge.iceGatherer&&"completed"===ge.iceGatherer.state});"gathering"!==_.iceGatheringState&&(_.iceGatheringState="gathering",_._emitGatheringStateChange()),K||_._dispatchEvent("icecandidate",D),de&&(_._dispatchEvent("icecandidate",new Event("icecandidate")),_.iceGatheringState="complete",_._emitGatheringStateChange())}},r.setTimeout(function(){C.forEach(function(T){S.onlocalcandidate(T)})},0)}},p.prototype._createIceAndDtlsTransports=function(){var m=this,A=new r.RTCIceTransport(null);A.onicestatechange=function(){m._updateIceConnectionState(),m._updateConnectionState()};var _=new r.RTCDtlsTransport(A);return _.ondtlsstatechange=function(){m._updateConnectionState()},_.onerror=function(){Object.defineProperty(_,"state",{value:"failed",writable:!0}),m._updateConnectionState()},{iceTransport:A,dtlsTransport:_}},p.prototype._disposeIceAndDtlsTransports=function(m){var A=this.transceivers[m].iceGatherer;A&&(delete A.onlocalcandidate,delete this.transceivers[m].iceGatherer);var _=this.transceivers[m].iceTransport;_&&(delete _.onicestatechange,delete this.transceivers[m].iceTransport);var S=this.transceivers[m].dtlsTransport;S&&(delete S.ondtlsstatechange,delete S.onerror,delete this.transceivers[m].dtlsTransport)},p.prototype._transceive=function(m,A,_){var S=Zb(m.localCapabilities,m.remoteCapabilities);A&&m.rtpSender&&(S.encodings=m.sendEncodingParameters,S.rtcp={cname:xr.localCName,compound:m.rtcpParameters.compound},m.recvEncodingParameters.length&&(S.rtcp.ssrc=m.recvEncodingParameters[0].ssrc),m.rtpSender.send(S)),_&&m.rtpReceiver&&S.codecs.length>0&&("video"===m.kind&&m.recvEncodingParameters&&i<15019&&m.recvEncodingParameters.forEach(function(C){delete C.rtx}),S.encodings=m.recvEncodingParameters.length?m.recvEncodingParameters:[{}],S.rtcp={compound:m.rtcpParameters.compound},m.rtcpParameters.cname&&(S.rtcp.cname=m.rtcpParameters.cname),m.sendEncodingParameters.length&&(S.rtcp.ssrc=m.sendEncodingParameters[0].ssrc),m.rtpReceiver.receive(S))},p.prototype.setLocalDescription=function(m){var A,_,S=this;if(-1===["offer","answer"].indexOf(m.type))return Promise.reject(oa("TypeError",'Unsupported type "'+m.type+'"'));if(!zI("setLocalDescription",m.type,S.signalingState)||S._isClosed)return Promise.reject(oa("InvalidStateError","Can not set local "+m.type+" in state "+S.signalingState));if("offer"===m.type)A=xr.splitSections(m.sdp),_=A.shift(),A.forEach(function(T,D){var B=xr.parseRtpParameters(T);S.transceivers[D].localCapabilities=B}),S.transceivers.forEach(function(T,D){S._gather(T.mid,D)});else if("answer"===m.type){A=xr.splitSections(S._remoteDescription.sdp),_=A.shift();var C=xr.matchPrefix(_,"a=ice-lite").length>0;A.forEach(function(T,D){var B=S.transceivers[D],K=B.iceGatherer,W=B.iceTransport,Z=B.dtlsTransport,de=B.localCapabilities,ge=B.remoteCapabilities;if(!(xr.isRejected(T)&&0===xr.matchPrefix(T,"a=bundle-only").length||B.rejected)){var Se=xr.getIceParameters(T,_),De=xr.getDtlsParameters(T,_);C&&(De.role="server"),S.usingBundle&&0!==D||(S._gather(B.mid,D),"new"===W.state&&W.start(K,Se,C?"controlling":"controlled"),"new"===Z.state&&Z.start(De));var it=Zb(de,ge);S._transceive(B,it.codecs.length>0,!1)}})}return S._localDescription={type:m.type,sdp:m.sdp},S._updateSignalingState("offer"===m.type?"have-local-offer":"stable"),Promise.resolve()},p.prototype.setRemoteDescription=function(m){var A=this;if(-1===["offer","answer"].indexOf(m.type))return Promise.reject(oa("TypeError",'Unsupported type "'+m.type+'"'));if(!zI("setRemoteDescription",m.type,A.signalingState)||A._isClosed)return Promise.reject(oa("InvalidStateError","Can not set remote "+m.type+" in state "+A.signalingState));var _={};A.remoteStreams.forEach(function(W){_[W.id]=W});var S=[],C=xr.splitSections(m.sdp),T=C.shift(),D=xr.matchPrefix(T,"a=ice-lite").length>0,B=xr.matchPrefix(T,"a=group:BUNDLE ").length>0;A.usingBundle=B;var K=xr.matchPrefix(T,"a=ice-options:")[0];return A.canTrickleIceCandidates=!!K&&K.substr(14).split(" ").indexOf("trickle")>=0,C.forEach(function(W,Z){var de=xr.splitLines(W),ge=xr.getKind(W),Se=xr.isRejected(W)&&0===xr.matchPrefix(W,"a=bundle-only").length,De=de[0].substr(2).split(" ")[2],it=xr.getDirection(W,T),Rt=xr.parseMsid(W),Dt=xr.getMid(W)||xr.generateIdentifier();if(Se||"application"===ge&&("DTLS/SCTP"===De||"UDP/DTLS/SCTP"===De))A.transceivers[Z]={mid:Dt,kind:ge,protocol:De,rejected:!0};else{var Pt,On,pn,cn,bt,Ve,nt,At,n;!Se&&A.transceivers[Z]&&A.transceivers[Z].rejected&&(A.transceivers[Z]=A._createTransceiver(ge,!0));var t,e,o=xr.parseRtpParameters(W);Se||(t=xr.getIceParameters(W,T),(e=xr.getDtlsParameters(W,T)).role="client"),nt=xr.parseRtpEncodingParameters(W);var d=xr.parseRtcpParameters(W),f=xr.matchPrefix(W,"a=end-of-candidates",T).length>0,b=xr.matchPrefix(W,"a=candidate:").map(function(k){return xr.parseCandidate(k)}).filter(function(k){return 1===k.component});if(("offer"===m.type||"answer"===m.type)&&!Se&&B&&Z>0&&A.transceivers[Z]&&(A._disposeIceAndDtlsTransports(Z),A.transceivers[Z].iceGatherer=A.transceivers[0].iceGatherer,A.transceivers[Z].iceTransport=A.transceivers[0].iceTransport,A.transceivers[Z].dtlsTransport=A.transceivers[0].dtlsTransport,A.transceivers[Z].rtpSender&&A.transceivers[Z].rtpSender.setTransport(A.transceivers[0].dtlsTransport),A.transceivers[Z].rtpReceiver&&A.transceivers[Z].rtpReceiver.setTransport(A.transceivers[0].dtlsTransport)),"offer"!==m.type||Se)"answer"===m.type&&!Se&&(On=(Pt=A.transceivers[Z]).iceGatherer,pn=Pt.iceTransport,cn=Pt.dtlsTransport,bt=Pt.rtpReceiver,Ve=Pt.sendEncodingParameters,At=Pt.localCapabilities,A.transceivers[Z].recvEncodingParameters=nt,A.transceivers[Z].remoteCapabilities=o,A.transceivers[Z].rtcpParameters=d,b.length&&"new"===pn.state&&(!D&&!f||B&&0!==Z?b.forEach(function(k){YA(Pt.iceTransport,k)}):pn.setRemoteCandidates(b)),B&&0!==Z||("new"===pn.state&&pn.start(On,t,"controlling"),"new"===cn.state&&cn.start(e)),!Zb(Pt.localCapabilities,Pt.remoteCapabilities).codecs.filter(function(k){return"rtx"===k.name.toLowerCase()}).length&&Pt.sendEncodingParameters[0].rtx&&delete Pt.sendEncodingParameters[0].rtx,A._transceive(Pt,"sendrecv"===it||"recvonly"===it,"sendrecv"===it||"sendonly"===it),!bt||"sendrecv"!==it&&"sendonly"!==it?delete Pt.rtpReceiver:(n=bt.track,Rt?(_[Rt.stream]||(_[Rt.stream]=new r.MediaStream),a(n,_[Rt.stream]),S.push([n,bt,_[Rt.stream]])):(_.default||(_.default=new r.MediaStream),a(n,_.default),S.push([n,bt,_.default]))));else{(Pt=A.transceivers[Z]||A._createTransceiver(ge)).mid=Dt,Pt.iceGatherer||(Pt.iceGatherer=A._createIceGatherer(Z,B)),b.length&&"new"===Pt.iceTransport.state&&(!f||B&&0!==Z?b.forEach(function(k){YA(Pt.iceTransport,k)}):Pt.iceTransport.setRemoteCandidates(b)),At=r.RTCRtpReceiver.getCapabilities(ge),i<15019&&(At.codecs=At.codecs.filter(function(k){return"rtx"!==k.name})),Ve=Pt.sendEncodingParameters||[{ssrc:1001*(2*Z+2)}];var y,w=!1;"sendrecv"===it||"sendonly"===it?(w=!Pt.rtpReceiver,bt=Pt.rtpReceiver||new r.RTCRtpReceiver(Pt.dtlsTransport,ge),w&&(n=bt.track,Rt&&"-"===Rt.stream||(Rt?(_[Rt.stream]||(_[Rt.stream]=new r.MediaStream,Object.defineProperty(_[Rt.stream],"id",{get:function(){return Rt.stream}})),Object.defineProperty(n,"id",{get:function(){return Rt.track}}),y=_[Rt.stream]):(_.default||(_.default=new r.MediaStream),y=_.default)),y&&(a(n,y),Pt.associatedRemoteMediaStreams.push(y)),S.push([n,bt,y]))):Pt.rtpReceiver&&Pt.rtpReceiver.track&&(Pt.associatedRemoteMediaStreams.forEach(function(k){var ie,Ie,Q=k.getTracks().find(function(ie){return ie.id===Pt.rtpReceiver.track.id});Q&&((Ie=k).removeTrack(ie=Q),Ie.dispatchEvent(new r.MediaStreamTrackEvent("removetrack",{track:ie})))}),Pt.associatedRemoteMediaStreams=[]),Pt.localCapabilities=At,Pt.remoteCapabilities=o,Pt.rtpReceiver=bt,Pt.rtcpParameters=d,Pt.sendEncodingParameters=Ve,Pt.recvEncodingParameters=nt,A._transceive(A.transceivers[Z],!1,w)}}}),void 0===A._dtlsRole&&(A._dtlsRole="offer"===m.type?"active":"passive"),A._remoteDescription={type:m.type,sdp:m.sdp},A._updateSignalingState("offer"===m.type?"have-remote-offer":"stable"),Object.keys(_).forEach(function(W){var Z=_[W];if(Z.getTracks().length){if(-1===A.remoteStreams.indexOf(Z)){A.remoteStreams.push(Z);var de=new Event("addstream");de.stream=Z,r.setTimeout(function(){A._dispatchEvent("addstream",de)})}S.forEach(function(ge){Z.id===ge[2].id&&c(A,ge[0],ge[1],[Z])})}}),S.forEach(function(W){W[2]||c(A,W[0],W[1],[])}),r.setTimeout(function(){A&&A.transceivers&&A.transceivers.forEach(function(W){W.iceTransport&&"new"===W.iceTransport.state&&W.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),W.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},p.prototype.close=function(){this.transceivers.forEach(function(m){m.iceTransport&&m.iceTransport.stop(),m.dtlsTransport&&m.dtlsTransport.stop(),m.rtpSender&&m.rtpSender.stop(),m.rtpReceiver&&m.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},p.prototype._updateSignalingState=function(m){this.signalingState=m;var A=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",A)},p.prototype._maybeFireNegotiationNeeded=function(){var m=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,r.setTimeout(function(){if(m.needNegotiation){m.needNegotiation=!1;var A=new Event("negotiationneeded");m._dispatchEvent("negotiationneeded",A)}},0))},p.prototype._updateIceConnectionState=function(){var m,A={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(S){S.iceTransport&&!S.rejected&&A[S.iceTransport.state]++}),m="new",A.failed>0?m="failed":A.checking>0?m="checking":A.disconnected>0?m="disconnected":A.new>0?m="new":A.connected>0?m="connected":A.completed>0&&(m="completed"),m!==this.iceConnectionState){this.iceConnectionState=m;var _=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",_)}},p.prototype._updateConnectionState=function(){var m,A={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(S){S.iceTransport&&S.dtlsTransport&&!S.rejected&&(A[S.iceTransport.state]++,A[S.dtlsTransport.state]++)}),A.connected+=A.completed,m="new",A.failed>0?m="failed":A.connecting>0?m="connecting":A.disconnected>0?m="disconnected":A.new>0?m="new":A.connected>0&&(m="connected"),m!==this.connectionState){this.connectionState=m;var _=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",_)}},p.prototype.createOffer=function(){var m=this;if(m._isClosed)return Promise.reject(oa("InvalidStateError","Can not call createOffer after close"));var A=m.transceivers.filter(function(D){return"audio"===D.kind}).length,_=m.transceivers.filter(function(D){return"video"===D.kind}).length,S=arguments[0];if(S){if(S.mandatory||S.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==S.offerToReceiveAudio&&(A=!0===S.offerToReceiveAudio?1:!1===S.offerToReceiveAudio?0:S.offerToReceiveAudio),void 0!==S.offerToReceiveVideo&&(_=!0===S.offerToReceiveVideo?1:!1===S.offerToReceiveVideo?0:S.offerToReceiveVideo)}for(m.transceivers.forEach(function(D){"audio"===D.kind?--A<0&&(D.wantReceive=!1):"video"===D.kind&&--_<0&&(D.wantReceive=!1)});A>0||_>0;)A>0&&(m._createTransceiver("audio"),A--),_>0&&(m._createTransceiver("video"),_--);var C=xr.writeSessionBoilerplate(m._sdpSessionId,m._sdpSessionVersion++);m.transceivers.forEach(function(D,B){var K=D.track,W=D.kind,Z=D.mid||xr.generateIdentifier();D.mid=Z,D.iceGatherer||(D.iceGatherer=m._createIceGatherer(B,m.usingBundle));var de=r.RTCRtpSender.getCapabilities(W);i<15019&&(de.codecs=de.codecs.filter(function(Se){return"rtx"!==Se.name})),de.codecs.forEach(function(Se){"H264"===Se.name&&void 0===Se.parameters["level-asymmetry-allowed"]&&(Se.parameters["level-asymmetry-allowed"]="1"),D.remoteCapabilities&&D.remoteCapabilities.codecs&&D.remoteCapabilities.codecs.forEach(function(De){Se.name.toLowerCase()===De.name.toLowerCase()&&Se.clockRate===De.clockRate&&(Se.preferredPayloadType=De.payloadType)})}),de.headerExtensions.forEach(function(Se){(D.remoteCapabilities&&D.remoteCapabilities.headerExtensions||[]).forEach(function(De){Se.uri===De.uri&&(Se.id=De.id)})});var ge=D.sendEncodingParameters||[{ssrc:1001*(2*B+1)}];K&&i>=15019&&"video"===W&&!ge[0].rtx&&(ge[0].rtx={ssrc:ge[0].ssrc+1}),D.wantReceive&&(D.rtpReceiver=new r.RTCRtpReceiver(D.dtlsTransport,W)),D.localCapabilities=de,D.sendEncodingParameters=ge}),"max-compat"!==m._config.bundlePolicy&&(C+="a=group:BUNDLE "+m.transceivers.map(function(D){return D.mid}).join(" ")+"\r\n"),C+="a=ice-options:trickle\r\n",m.transceivers.forEach(function(D,B){C+=zA(D,D.localCapabilities,"offer",D.stream,m._dtlsRole),C+="a=rtcp-rsize\r\n",!D.iceGatherer||"new"===m.iceGatheringState||0!==B&&m.usingBundle||(D.iceGatherer.getLocalCandidates().forEach(function(K){K.component=1,C+="a="+xr.writeCandidate(K)+"\r\n"}),"completed"===D.iceGatherer.state&&(C+="a=end-of-candidates\r\n"))});var T=new r.RTCSessionDescription({type:"offer",sdp:C});return Promise.resolve(T)},p.prototype.createAnswer=function(){var m=this;if(m._isClosed)return Promise.reject(oa("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==m.signalingState&&"have-local-pranswer"!==m.signalingState)return Promise.reject(oa("InvalidStateError","Can not call createAnswer in signalingState "+m.signalingState));var A=xr.writeSessionBoilerplate(m._sdpSessionId,m._sdpSessionVersion++);m.usingBundle&&(A+="a=group:BUNDLE "+m.transceivers.map(function(C){return C.mid}).join(" ")+"\r\n"),A+="a=ice-options:trickle\r\n";var _=xr.getMediaSections(m._remoteDescription.sdp).length;m.transceivers.forEach(function(C,T){if(!(T+1>_)){if(C.rejected)return"application"===C.kind?A+="DTLS/SCTP"===C.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+C.protocol+" webrtc-datachannel\r\n":"audio"===C.kind?A+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===C.kind&&(A+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(A+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+C.mid+"\r\n");var D;C.stream&&("audio"===C.kind?D=C.stream.getAudioTracks()[0]:"video"===C.kind&&(D=C.stream.getVideoTracks()[0]),D&&i>=15019&&"video"===C.kind&&!C.sendEncodingParameters[0].rtx&&(C.sendEncodingParameters[0].rtx={ssrc:C.sendEncodingParameters[0].ssrc+1}));var B=Zb(C.localCapabilities,C.remoteCapabilities);!B.codecs.filter(function(K){return"rtx"===K.name.toLowerCase()}).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,A+=zA(C,B,"answer",C.stream,m._dtlsRole),C.rtcpParameters&&C.rtcpParameters.reducedSize&&(A+="a=rtcp-rsize\r\n")}});var S=new r.RTCSessionDescription({type:"answer",sdp:A});return Promise.resolve(S)},p.prototype.addIceCandidate=function(m){var A,_=this;return m&&void 0===m.sdpMLineIndex&&!m.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(S,C){if(!_._remoteDescription)return C(oa("InvalidStateError","Can not add ICE candidate without a remote description"));if(m&&""!==m.candidate){var T=m.sdpMLineIndex;if(m.sdpMid)for(var D=0;D<_.transceivers.length;D++)if(_.transceivers[D].mid===m.sdpMid){T=D;break}var B=_.transceivers[T];if(!B)return C(oa("OperationError","Can not add ICE candidate"));if(B.rejected)return S();var K=Object.keys(m.candidate).length>0?xr.parseCandidate(m.candidate):{};if("tcp"===K.protocol&&(0===K.port||9===K.port)||K.component&&1!==K.component)return S();if((0===T||T>0&&B.iceTransport!==_.transceivers[0].iceTransport)&&!YA(B.iceTransport,K))return C(oa("OperationError","Can not add ICE candidate"));var W=m.candidate.trim();0===W.indexOf("a=")&&(W=W.substr(2)),(A=xr.getMediaSections(_._remoteDescription.sdp))[T]+="a="+(K.type?W:"end-of-candidates")+"\r\n",_._remoteDescription.sdp=xr.getDescription(_._remoteDescription.sdp)+A.join("")}else for(var Z=0;Z<_.transceivers.length&&(_.transceivers[Z].rejected||(_.transceivers[Z].iceTransport.addRemoteCandidate({}),(A=xr.getMediaSections(_._remoteDescription.sdp))[Z]+="a=end-of-candidates\r\n",_._remoteDescription.sdp=xr.getDescription(_._remoteDescription.sdp)+A.join(""),!_.usingBundle));Z++);S()})},p.prototype.getStats=function(m){if(m&&m instanceof r.MediaStreamTrack){var A=null;if(this.transceivers.forEach(function(S){S.rtpSender&&S.rtpSender.track===m?A=S.rtpSender:S.rtpReceiver&&S.rtpReceiver.track===m&&(A=S.rtpReceiver)}),!A)throw oa("InvalidAccessError","Invalid selector.");return A.getStats()}var _=[];return this.transceivers.forEach(function(S){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(C){S[C]&&_.push(S[C].getStats())})}),Promise.all(_).then(function(S){var C=new Map;return S.forEach(function(T){T.forEach(function(D){C.set(D.id,D)})}),C})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(m){var A=r[m];if(A&&A.prototype&&A.prototype.getStats){var _=A.prototype.getStats;A.prototype.getStats=function(){return _.apply(this).then(function(S){var C=new Map;return Object.keys(S).forEach(function(T){var D;S[T].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(D=S[T]).type]||D.type,C.set(T,S[T])}),C})}}});var g=["createOffer","createAnswer"];return g.forEach(function(m){var A=p.prototype[m];p.prototype[m]=function(){var _=arguments;return"function"==typeof _[0]||"function"==typeof _[1]?A.apply(this,[arguments[2]]).then(function(S){"function"==typeof _[0]&&_[0].apply(null,[S])},function(S){"function"==typeof _[1]&&_[1].apply(null,[S])}):A.apply(this,arguments)}}),(g=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(m){var A=p.prototype[m];p.prototype[m]=function(){var _=arguments;return"function"==typeof _[1]||"function"==typeof _[2]?A.apply(this,arguments).then(function(){"function"==typeof _[1]&&_[1].apply(null)},function(S){"function"==typeof _[2]&&_[2].apply(null,[S])}):A.apply(this,arguments)}}),["getStats"].forEach(function(m){var A=p.prototype[m];p.prototype[m]=function(){var _=arguments;return"function"==typeof _[1]?A.apply(this,arguments).then(function(){"function"==typeof _[1]&&_[1].apply(null)}):A.apply(this,arguments)}}),p}(r,i.version);r.RTCPeerConnection=function(c){return c&&c.iceServers&&(c.iceServers=function(p,g){let m=!1;return(p=JSON.parse(JSON.stringify(p))).filter(A=>{if(A&&(A.urls||A.url)){let _=A.urls||A.url;A.url&&!A.urls&&ZE("RTCIceServer.url","RTCIceServer.urls");const S="string"==typeof _;return S&&(_=[_]),_=_.filter(C=>{if(0===C.indexOf("stun:"))return!1;const T=C.startsWith("turn")&&!C.startsWith("turn:[")&&C.includes("transport=udp");return T&&!m?(m=!0,!0):T&&!m}),delete A.url,A.urls=S?_[0]:_,!!_.length}})}(c.iceServers),H1("ICE servers after filtering:",c.iceServers)),new a(c)},r.RTCPeerConnection.prototype=a.prototype}function NO(r){r.RTCRtpSender&&!("replaceTrack"in r.RTCRtpSender.prototype)&&(r.RTCRtpSender.prototype.replaceTrack=r.RTCRtpSender.prototype.setTrack)}var xO=Object.freeze({__proto__:null,shimPeerConnection:JI,shimReplaceTrack:NO,shimGetUserMedia:MO,shimGetDisplayMedia:qI}),p_=Vk,$I=Ht,qA=Xe,JA=Ky,LO=Xy,H2=Ed.exports;if(qu({target:"Promise",proto:!0,real:!0,forced:!!p_&&M(function(){p_.prototype.finally.call({then:function(){}},function(){})})},{finally:function(r){var i=JA(this,$I("Promise")),a=qA(r);return this.then(a?function(c){return LO(i,r()).then(function(){return c})}:r,a?function(c){return LO(i,r()).then(function(){throw c})}:r)}}),qA(p_)){var eS=$I("Promise").prototype.finally;p_.prototype.finally!==eS&&H2(p_.prototype,"finally",eS,{unsafe:!0})}function XI(r,i){const a=r&&r.navigator,c=r&&r.MediaStreamTrack;if(a.getUserMedia=function(p,g,m){ZE("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(p).then(g,m)},!(i.version>55&&"autoGainControl"in a.mediaDevices.getSupportedConstraints())){const p=function(m,A,_){A in m&&!(_ in m)&&(m[_]=m[A],delete m[A])},g=a.mediaDevices.getUserMedia.bind(a.mediaDevices);if(a.mediaDevices.getUserMedia=function(m){return"object"==typeof m&&"object"==typeof m.audio&&(m=JSON.parse(JSON.stringify(m)),p(m.audio,"autoGainControl","mozAutoGainControl"),p(m.audio,"noiseSuppression","mozNoiseSuppression")),g(m)},c&&c.prototype.getSettings){const m=c.prototype.getSettings;c.prototype.getSettings=function(){const A=m.apply(this,arguments);return p(A,"mozAutoGainControl","autoGainControl"),p(A,"mozNoiseSuppression","noiseSuppression"),A}}if(c&&c.prototype.applyConstraints){const m=c.prototype.applyConstraints;c.prototype.applyConstraints=function(A){return"audio"===this.kind&&"object"==typeof A&&(A=JSON.parse(JSON.stringify(A)),p(A,"autoGainControl","mozAutoGainControl"),p(A,"noiseSuppression","mozNoiseSuppression")),m.apply(this,[A])}}}}function BO(r){"object"==typeof r&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function $A(r,i){if("object"!=typeof r||!r.RTCPeerConnection&&!r.mozRTCPeerConnection)return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(p){const g=r.RTCPeerConnection.prototype[p],m={[p](){return arguments[0]=new("addIceCandidate"===p?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),g.apply(this,arguments)}};r.RTCPeerConnection.prototype[p]=m[p]});const a={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[p,g,m]=arguments;return c.apply(this,[p||null]).then(A=>{if(i.version<53&&!g)try{A.forEach(_=>{_.type=a[_.type]||_.type})}catch(_){if("TypeError"!==_.name)throw _;A.forEach((S,C)=>{A.set(C,Object.assign({},S,{type:a[S.type]||S.type}))})}return A}).then(g,m)}}function FO(r){if("object"!=typeof r||!r.RTCPeerConnection||!r.RTCRtpSender||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const i=r.RTCPeerConnection.prototype.getSenders;i&&(r.RTCPeerConnection.prototype.getSenders=function(){const c=i.apply(this,[]);return c.forEach(p=>p._pc=this),c});const a=r.RTCPeerConnection.prototype.addTrack;a&&(r.RTCPeerConnection.prototype.addTrack=function(){const c=a.apply(this,arguments);return c._pc=this,c}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Un.resolve(new Map)}}function UO(r){if("object"!=typeof r||!r.RTCPeerConnection||!r.RTCRtpSender||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const i=r.RTCPeerConnection.prototype.getReceivers;i&&(r.RTCPeerConnection.prototype.getReceivers=function(){const a=i.apply(this,[]);return a.forEach(c=>c._pc=this),a}),Fh(r,"track",a=>(a.receiver._pc=a.srcElement,a)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function VO(r){r.RTCPeerConnection&&!("removeStream"in r.RTCPeerConnection.prototype)&&(r.RTCPeerConnection.prototype.removeStream=function(i){ZE("removeStream","removeTrack"),this.getSenders().forEach(a=>{a.track&&i.getTracks().includes(a.track)&&this.removeTrack(a)})})}function tS(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function jO(r){if("object"!=typeof r||!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype.addTransceiver;i&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const a=arguments[1],c=a&&"sendEncodings"in a;c&&a.sendEncodings.forEach(g=>{if("rid"in g&&!/^[a-z0-9]{0,16}$/i.test(g.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in g&&!(parseFloat(g.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in g&&!(parseFloat(g.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const p=i.apply(this,arguments);if(c){const{sender:g}=p,m=g.getParameters();(!("encodings"in m)||1===m.encodings.length&&0===Object.keys(m.encodings[0]).length)&&(m.encodings=a.sendEncodings,g.sendEncodings=a.sendEncodings,this.setParametersPromises.push(g.setParameters(m).then(()=>{delete g.sendEncodings}).catch(()=>{delete g.sendEncodings})))}return p})}function QO(r){if("object"!=typeof r||!r.RTCRtpSender)return;const i=r.RTCRtpSender.prototype.getParameters;i&&(r.RTCRtpSender.prototype.getParameters=function(){const a=i.apply(this,arguments);return"encodings"in a||(a.encodings=[].concat(this.sendEncodings||[{}])),a})}function HO(r){if("object"!=typeof r||!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Un.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}function nS(r){if("object"!=typeof r||!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Un.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}var rS=Object.freeze({__proto__:null,shimOnTrack:BO,shimPeerConnection:$A,shimSenderGetStats:FO,shimReceiverGetStats:UO,shimRemoveStream:VO,shimRTCDataChannel:tS,shimAddTransceiver:jO,shimGetParameters:QO,shimCreateOffer:HO,shimCreateAnswer:nS,shimGetUserMedia:XI,shimGetDisplayMedia:function(r,i){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(a){if(!a||!a.video){const c=new DOMException("getDisplayMedia without video constraints is undefined");return c.name="NotFoundError",c.code=8,Un.reject(c)}return!0===a.video?a.video={mediaSource:i}:a.video.mediaSource=i,r.navigator.mediaDevices.getUserMedia(a)})}});function ZI(r){if("object"==typeof r&&r.RTCPeerConnection){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const i=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(a){this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(c=>i.call(this,c,a)),a.getVideoTracks().forEach(c=>i.call(this,c,a))},r.RTCPeerConnection.prototype.addTrack=function(a){for(var c=arguments.length,p=new Array(c>1?c-1:0),g=1;g<c;g++)p[g-1]=arguments[g];return p&&p.forEach(m=>{this._localStreams?this._localStreams.includes(m)||this._localStreams.push(m):this._localStreams=[m]}),i.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const a=this._localStreams.indexOf(i);if(-1===a)return;this._localStreams.splice(a,1);const c=i.getTracks();this.getSenders().forEach(p=>{c.includes(p.track)&&this.removeTrack(p)})})}}function GO(r){if("object"==typeof r&&r.RTCPeerConnection&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(a){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=a),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(p=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(p))return;this._remoteStreams.push(p);const g=new Event("addstream");g.stream=p,this.dispatchEvent(g)})})}});const i=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(p=>{if(a._remoteStreams||(a._remoteStreams=[]),a._remoteStreams.indexOf(p)>=0)return;a._remoteStreams.push(p);const g=new Event("addstream");g.stream=p,a.dispatchEvent(g)})}),i.apply(a,arguments)}}}function G2(r){if("object"!=typeof r||!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype,a=i.createOffer,c=i.createAnswer,p=i.setLocalDescription,g=i.setRemoteDescription,m=i.addIceCandidate;i.createOffer=function(_,S){const T=a.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return S?(T.then(_,S),Un.resolve()):T},i.createAnswer=function(_,S){const T=c.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return S?(T.then(_,S),Un.resolve()):T};let A=function(_,S,C){const T=p.apply(this,[_]);return C?(T.then(S,C),Un.resolve()):T};i.setLocalDescription=A,A=function(_,S,C){const T=g.apply(this,[_]);return C?(T.then(S,C),Un.resolve()):T},i.setRemoteDescription=A,A=function(_,S,C){const T=m.apply(this,[_]);return C?(T.then(S,C),Un.resolve()):T},i.addIceCandidate=A}function ew(r){const i=r&&r.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){const a=i.mediaDevices,c=a.getUserMedia.bind(a);i.mediaDevices.getUserMedia=p=>c(iS(p))}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(a,c,p){i.mediaDevices.getUserMedia(a).then(c,p)}.bind(i))}function iS(r){return r&&void 0!==r.video?Object.assign({},r,{video:OC(r.video)}):r}function WO(r){if(!r.RTCPeerConnection)return;const i=r.RTCPeerConnection;r.RTCPeerConnection=function(a,c){if(a&&a.iceServers){const p=[];for(let g=0;g<a.iceServers.length;g++){let m=a.iceServers[g];!m.hasOwnProperty("urls")&&m.hasOwnProperty("url")?(ZE("RTCIceServer.url","RTCIceServer.urls"),m=JSON.parse(JSON.stringify(m)),m.urls=m.url,delete m.url,p.push(m)):p.push(a.iceServers[g])}a.iceServers=p}return new i(a,c)},r.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:()=>i.generateCertificate})}function tw(r){"object"==typeof r&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function nw(r){const i=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(a){if(a){void 0!==a.offerToReceiveAudio&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);const c=this.getTransceivers().find(g=>"audio"===g.receiver.track.kind);!1===a.offerToReceiveAudio&&c?"sendrecv"===c.direction?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":"recvonly"===c.direction&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):!0!==a.offerToReceiveAudio||c||this.addTransceiver("audio"),void 0!==a.offerToReceiveVideo&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);const p=this.getTransceivers().find(g=>"video"===g.receiver.track.kind);!1===a.offerToReceiveVideo&&p?"sendrecv"===p.direction?p.setDirection?p.setDirection("sendonly"):p.direction="sendonly":"recvonly"===p.direction&&(p.setDirection?p.setDirection("inactive"):p.direction="inactive"):!0!==a.offerToReceiveVideo||p||this.addTransceiver("video")}return i.apply(this,arguments)}}function KO(r){"object"!=typeof r||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}var rw=Object.freeze({__proto__:null,shimLocalStreamsAPI:ZI,shimRemoteStreamsAPI:GO,shimCallbacksAPI:G2,shimGetUserMedia:ew,shimConstraints:iS,shimRTCIceServerUrls:WO,shimTrackEventTransceiver:tw,shimCreateOfferLegacy:nw,shimAudioContext:KO}),W2=vg,h_=Wl,YO=No("".replace),XA="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",iw=RegExp("^"+XA+XA+"*"),ZA=RegExp(XA+XA+"*$"),ey=function(r){return function(i){var a=h_(W2(i));return 1&r&&(a=YO(a,iw,"")),2&r&&(a=YO(a,ZA,"")),a}},qO={start:ey(1),end:ey(2),trim:ey(3)},eF=dR.PROPER,JO=as,$O="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",K2=qO.trim;Io({target:"String",proto:!0,forced:function(r){return JO(function(){return!!$O[r]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[r]()||eF&&$O[r].name!==r})}("trim")},{trim:function(){return K2(this)}});var ow=Fd("String").trim,tF=$c,kt=ow,rp=String.prototype,Ms=function(r){var i=r.trim;return"string"==typeof r||r===rp||tF(rp,r)&&i===rp.trim?kt:i},vm=se;qu({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return vm(URL.prototype.toString,this)}});var oS={exports:{}};!function(r){var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(a){return Ms(a).call(a).split("\n").map(function(c){return Ms(c).call(c)})},i.splitSections=function(a){return a.split("\nm=").map(function(c,p){var g;return Ms(g=p>0?"m="+c:c).call(g)+"\r\n"})},i.getDescription=function(a){var c=i.splitSections(a);return c&&c[0]},i.getMediaSections=function(a){var c=i.splitSections(a);return c.shift(),c},i.matchPrefix=function(a,c){return i.splitLines(a).filter(function(p){return 0===p.indexOf(c)})},i.parseCandidate=function(a){for(var c,p={foundation:(c=0===a.indexOf("a=candidate:")?a.substring(12).split(" "):a.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":p.relatedAddress=c[g+1];break;case"rport":p.relatedPort=parseInt(c[g+1],10);break;case"tcptype":p.tcpType=c[g+1];break;case"ufrag":p.ufrag=c[g+1],p.usernameFragment=c[g+1];break;default:p[c[g]]=c[g+1]}return p},i.writeCandidate=function(a){var c=[];c.push(a.foundation),c.push(a.component),c.push(a.protocol.toUpperCase()),c.push(a.priority),c.push(a.address||a.ip),c.push(a.port);var p=a.type;return c.push("typ"),c.push(p),"host"!==p&&a.relatedAddress&&a.relatedPort&&(c.push("raddr"),c.push(a.relatedAddress),c.push("rport"),c.push(a.relatedPort)),a.tcpType&&"tcp"===a.protocol.toLowerCase()&&(c.push("tcptype"),c.push(a.tcpType)),(a.usernameFragment||a.ufrag)&&(c.push("ufrag"),c.push(a.usernameFragment||a.ufrag)),"candidate:"+c.join(" ")},i.parseIceOptions=function(a){return a.substr(14).split(" ")},i.parseRtpMap=function(a){var c=a.substr(9).split(" "),p={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),p.name=c[0],p.clockRate=parseInt(c[1],10),p.channels=3===c.length?parseInt(c[2],10):1,p.numChannels=p.channels,p},i.writeRtpMap=function(a){var c=a.payloadType;void 0!==a.preferredPayloadType&&(c=a.preferredPayloadType);var p=a.channels||a.numChannels||1;return"a=rtpmap:"+c+" "+a.name+"/"+a.clockRate+(1!==p?"/"+p:"")+"\r\n"},i.parseExtmap=function(a){var c=a.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},i.writeExtmap=function(a){return"a=extmap:"+(a.id||a.preferredId)+(a.direction&&"sendrecv"!==a.direction?"/"+a.direction:"")+" "+a.uri+"\r\n"},i.parseFmtp=function(a){for(var c,p={},g=a.substr(a.indexOf(" ")+1).split(";"),m=0;m<g.length;m++){var A,_;c=Ms(A=g[m]).call(A).split("="),p[Ms(_=c[0]).call(_)]=c[1]}return p},i.writeFmtp=function(a){var c="",p=a.payloadType;if(void 0!==a.preferredPayloadType&&(p=a.preferredPayloadType),a.parameters&&Object.keys(a.parameters).length){var g=[];Object.keys(a.parameters).forEach(function(m){g.push(a.parameters[m]?m+"="+a.parameters[m]:m)}),c+="a=fmtp:"+p+" "+g.join(";")+"\r\n"}return c},i.parseRtcpFb=function(a){var c=a.substr(a.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},i.writeRtcpFb=function(a){var c="",p=a.payloadType;return void 0!==a.preferredPayloadType&&(p=a.preferredPayloadType),a.rtcpFeedback&&a.rtcpFeedback.length&&a.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+p+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},i.parseSsrcMedia=function(a){var c=a.indexOf(" "),p={ssrc:parseInt(a.substr(7,c-7),10)},g=a.indexOf(":",c);return g>-1?(p.attribute=a.substr(c+1,g-c-1),p.value=a.substr(g+1)):p.attribute=a.substr(c+1),p},i.parseSsrcGroup=function(a){var c=a.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(p){return parseInt(p,10)})}},i.getMid=function(a){var c=i.matchPrefix(a,"a=mid:")[0];if(c)return c.substr(6)},i.parseFingerprint=function(a){var c=a.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},i.getDtlsParameters=function(a,c){return{role:"auto",fingerprints:i.matchPrefix(a+c,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(a,c){var p="a=setup:"+c+"\r\n";return a.fingerprints.forEach(function(g){p+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),p},i.parseCryptoLine=function(a){var c=a.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},i.writeCryptoLine=function(a){return"a=crypto:"+a.tag+" "+a.cryptoSuite+" "+("object"==typeof a.keyParams?i.writeCryptoKeyParams(a.keyParams):a.keyParams)+(a.sessionParams?" "+a.sessionParams.join(" "):"")+"\r\n"},i.parseCryptoKeyParams=function(a){if(0!==a.indexOf("inline:"))return null;var c=a.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(a){return a.keyMethod+":"+a.keySalt+(a.lifeTime?"|"+a.lifeTime:"")+(a.mkiValue&&a.mkiLength?"|"+a.mkiValue+":"+a.mkiLength:"")},i.getCryptoParameters=function(a,c){return i.matchPrefix(a+c,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(a,c){var p=i.matchPrefix(a+c,"a=ice-ufrag:")[0],g=i.matchPrefix(a+c,"a=ice-pwd:")[0];return p&&g?{usernameFragment:p.substr(12),password:g.substr(10)}:null},i.writeIceParameters=function(a){return"a=ice-ufrag:"+a.usernameFragment+"\r\na=ice-pwd:"+a.password+"\r\n"},i.parseRtpParameters=function(a){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},p=i.splitLines(a)[0].split(" "),g=3;g<p.length;g++){var m=p[g],A=i.matchPrefix(a,"a=rtpmap:"+m+" ")[0];if(A){var _=i.parseRtpMap(A),S=i.matchPrefix(a,"a=fmtp:"+m+" ");switch(_.parameters=S.length?i.parseFmtp(S[0]):{},_.rtcpFeedback=i.matchPrefix(a,"a=rtcp-fb:"+m+" ").map(i.parseRtcpFb),c.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(_.name.toUpperCase())}}}return i.matchPrefix(a,"a=extmap:").forEach(function(C){c.headerExtensions.push(i.parseExtmap(C))}),c},i.writeRtpDescription=function(a,c){var p="";p+="m="+a+" ",p+=c.codecs.length>0?"9":"0",p+=" UDP/TLS/RTP/SAVPF ",p+=c.codecs.map(function(m){return void 0!==m.preferredPayloadType?m.preferredPayloadType:m.payloadType}).join(" ")+"\r\n",p+="c=IN IP4 0.0.0.0\r\n",p+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(m){p+=i.writeRtpMap(m),p+=i.writeFmtp(m),p+=i.writeRtcpFb(m)});var g=0;return c.codecs.forEach(function(m){m.maxptime>g&&(g=m.maxptime)}),g>0&&(p+="a=maxptime:"+g+"\r\n"),p+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(m){p+=i.writeExtmap(m)}),p},i.parseRtpEncodingParameters=function(a){var c,p=[],g=i.parseRtpParameters(a),m=-1!==g.fecMechanisms.indexOf("RED"),A=-1!==g.fecMechanisms.indexOf("ULPFEC"),_=i.matchPrefix(a,"a=ssrc:").map(function(D){return i.parseSsrcMedia(D)}).filter(function(D){return"cname"===D.attribute}),S=_.length>0&&_[0].ssrc,C=i.matchPrefix(a,"a=ssrc-group:FID").map(function(D){return D.substr(17).split(" ").map(function(B){return parseInt(B,10)})});C.length>0&&C[0].length>1&&C[0][0]===S&&(c=C[0][1]),g.codecs.forEach(function(D){if("RTX"===D.name.toUpperCase()&&D.parameters.apt){var B={ssrc:S,codecPayloadType:parseInt(D.parameters.apt,10)};S&&c&&(B.rtx={ssrc:c}),p.push(B),m&&((B=JSON.parse(JSON.stringify(B))).fec={ssrc:S,mechanism:A?"red+ulpfec":"red"},p.push(B))}}),0===p.length&&S&&p.push({ssrc:S});var T=i.matchPrefix(a,"b=");return T.length&&(T=0===T[0].indexOf("b=TIAS:")?parseInt(T[0].substr(7),10):0===T[0].indexOf("b=AS:")?1e3*parseInt(T[0].substr(5),10)*.95-16e3:void 0,p.forEach(function(D){D.maxBitrate=T})),p},i.parseRtcpParameters=function(a){var c={},p=i.matchPrefix(a,"a=ssrc:").map(function(A){return i.parseSsrcMedia(A)}).filter(function(A){return"cname"===A.attribute})[0];p&&(c.cname=p.value,c.ssrc=p.ssrc);var g=i.matchPrefix(a,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var m=i.matchPrefix(a,"a=rtcp-mux");return c.mux=m.length>0,c},i.parseMsid=function(a){var c,p=i.matchPrefix(a,"a=msid:");if(1===p.length)return{stream:(c=p[0].substr(7).split(" "))[0],track:c[1]};var g=i.matchPrefix(a,"a=ssrc:").map(function(m){return i.parseSsrcMedia(m)}).filter(function(m){return"msid"===m.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},i.parseSctpDescription=function(a){var c,p=i.parseMLine(a),g=i.matchPrefix(a,"a=max-message-size:");g.length>0&&(c=parseInt(g[0].substr(19),10)),isNaN(c)&&(c=65536);var m=i.matchPrefix(a,"a=sctp-port:");if(m.length>0)return{port:parseInt(m[0].substr(12),10),protocol:p.fmt,maxMessageSize:c};if(i.matchPrefix(a,"a=sctpmap:").length>0){var A=i.matchPrefix(a,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(A[0],10),protocol:A[1],maxMessageSize:c}}},i.writeSctpDescription=function(a,c){var p=[];return p="DTLS/SCTP"!==a.protocol?["m="+a.kind+" 9 "+a.protocol+" "+c.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+c.port+"\r\n"]:["m="+a.kind+" 9 "+a.protocol+" "+c.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+c.port+" "+c.protocol+" 65535\r\n"],void 0!==c.maxMessageSize&&p.push("a=max-message-size:"+c.maxMessageSize+"\r\n"),p.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(a,c,p){var g=void 0!==c?c:2;return"v=0\r\no="+(p||"thisisadapterortc")+" "+(a||i.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(a,c,p,g){var m=i.writeRtpDescription(a.kind,c);if(m+=i.writeIceParameters(a.iceGatherer.getLocalParameters()),m+=i.writeDtlsParameters(a.dtlsTransport.getLocalParameters(),"offer"===p?"actpass":"active"),m+="a=mid:"+a.mid+"\r\n",m+=a.direction?"a="+a.direction+"\r\n":a.rtpSender&&a.rtpReceiver?"a=sendrecv\r\n":a.rtpSender?"a=sendonly\r\n":a.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",a.rtpSender){var A="msid:"+g.id+" "+a.rtpSender.track.id+"\r\n";m+="a="+A,m+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" "+A,a.sendEncodingParameters[0].rtx&&(m+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" "+A,m+="a=ssrc-group:FID "+a.sendEncodingParameters[0].ssrc+" "+a.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return m+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",a.rtpSender&&a.sendEncodingParameters[0].rtx&&(m+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),m},i.getDirection=function(a,c){for(var p=i.splitLines(a),g=0;g<p.length;g++)switch(p[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return p[g].substr(2)}return c?i.getDirection(c):"sendrecv"},i.getKind=function(a){return i.splitLines(a)[0].split(" ")[0].substr(2)},i.isRejected=function(a){return"0"===a.split(" ",2)[1]},i.parseMLine=function(a){var c=i.splitLines(a)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},i.parseOLine=function(a){var c=i.matchPrefix(a,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},i.isValidSDP=function(a){if("string"!=typeof a||0===a.length)return!1;for(var c=i.splitLines(a),p=0;p<c.length;p++)if(c[p].length<2||"="!==c[p].charAt(1))return!1;return!0},r.exports=i}(oS);var f_=oS.exports;function sw(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const i=r.RTCIceCandidate;r.RTCIceCandidate=function(a){if("object"==typeof a&&a.candidate&&0===a.candidate.indexOf("a=")&&((a=JSON.parse(JSON.stringify(a))).candidate=a.candidate.substr(2)),a.candidate&&a.candidate.length){const c=new i(a),p=f_.parseCandidate(a.candidate),g=Object.assign(c,p);return g.toJSON=function(){return{candidate:g.candidate,sdpMid:g.sdpMid,sdpMLineIndex:g.sdpMLineIndex,usernameFragment:g.usernameFragment}},g}return new i(a)},r.RTCIceCandidate.prototype=i.prototype,Fh(r,"icecandidate",a=>(a.candidate&&Object.defineProperty(a,"candidate",{value:new r.RTCIceCandidate(a.candidate),writable:"false"}),a))}function ty(r,i){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const a=function(A){if(!A||!A.sdp)return!1;const _=f_.splitSections(A.sdp);return _.shift(),_.some(S=>{const C=f_.parseMLine(S);return C&&"application"===C.kind&&-1!==C.protocol.indexOf("SCTP")})},c=function(A){const _=A.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===_||_.length<2)return-1;const S=parseInt(_[1],10);return S!=S?-1:S},p=function(A){let _=65536;return"firefox"===i.browser&&(_=i.version<57?-1===A?16384:2147483637:i.version<60?57===i.version?65535:65536:2147483637),_},g=function(A,_){let S=65536;"firefox"===i.browser&&57===i.version&&(S=65535);const C=f_.matchPrefix(A.sdp,"a=max-message-size:");return C.length>0?S=parseInt(C[0].substr(19),10):"firefox"===i.browser&&-1!==_&&(S=2147483637),S},m=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===i.browser&&i.version>=76){const{sdpSemantics:A}=this.getConfiguration();"plan-b"===A&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(a(arguments[0])){const A=c(arguments[0]),_=p(A),S=g(arguments[0],A);let C;C=0===_&&0===S?Number.POSITIVE_INFINITY:0===_||0===S?Math.max(_,S):Math.min(_,S);const T={};Object.defineProperty(T,"maxMessageSize",{get:()=>C}),this._sctp=T}return m.apply(this,arguments)}}function ny(r){if(!r.RTCPeerConnection||!("createDataChannel"in r.RTCPeerConnection.prototype))return;function i(c,p){const g=c.send;c.send=function(){const m=arguments[0];if("open"===c.readyState&&p.sctp&&(m.length||m.size||m.byteLength)>p.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+p.sctp.maxMessageSize+" bytes)");return g.apply(c,arguments)}}const a=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const c=a.apply(this,arguments);return i(c,this),c},Fh(r,"datachannel",c=>(i(c.channel,c.target),c))}function aw(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const i=r.RTCPeerConnection.prototype;Object.defineProperty(i,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(i,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(a){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),a&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=a)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(a=>{const c=i[a];i[a]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=p=>{const g=p.target;if(g._lastConnectionState!==g.connectionState){g._lastConnectionState=g.connectionState;const m=new Event("connectionstatechange",p);g.dispatchEvent(m)}return p},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function cw(r,i){if(!r.RTCPeerConnection||"chrome"===i.browser&&i.version>=71||"safari"===i.browser&&i.version>=605)return;const a=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(c){if(c&&c.sdp&&-1!==c.sdp.indexOf("\na=extmap-allow-mixed")){const p=c.sdp.split("\n").filter(g=>"a=extmap-allow-mixed"!==Ms(g).call(g)).join("\n");r.RTCSessionDescription&&c instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:c.type,sdp:p}):c.sdp=p}return a.apply(this,arguments)}}function sS(r,i){if(!r.RTCPeerConnection||!r.RTCPeerConnection.prototype)return;const a=r.RTCPeerConnection.prototype.addIceCandidate;a&&0!==a.length&&(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===i.browser&&i.version<78||"firefox"===i.browser&&i.version<68||"safari"===i.browser)&&arguments[0]&&""===arguments[0].candidate?Un.resolve():a.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Un.resolve())})}var z2=Object.freeze({__proto__:null,shimRTCIceCandidate:sw,shimMaxMessageSize:ty,shimSendThrowTypeError:ny,shimConnectionState:aw,removeExtmapAllowMixed:cw,shimAddIceCandidateNullOrEmpty:sS});let Ei,oi;(function(){let{window:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const a=H1,c=Gv(r),p={browserDetails:c,commonShim:z2,extractVersion:XE,disableLog:Q1,disableWarnings:Hv};switch(c.browser){case"chrome":if(!PO||!Xb||!i.shimChrome)return a("Chrome shim is not included in this adapter release."),p;if(null===c.version)return a("Chrome shim can not determine version, not shimming."),p;a("adapter.js shimming chrome."),p.browserShim=PO,sS(r,c),mi(r,c),DO(r),Xb(r,c),Jb(r),Ps(r,c),Mu(r),$b(r),td(r),yo(r,c),sw(r),aw(r),ty(r,c),ny(r),cw(r,c);break;case"firefox":if(!rS||!$A||!i.shimFirefox)return a("Firefox shim is not included in this adapter release."),p;a("adapter.js shimming firefox."),p.browserShim=rS,sS(r,c),XI(r,c),$A(r,c),BO(r),VO(r),FO(r),UO(r),tS(r),jO(r),QO(r),HO(r),nS(r),sw(r),aw(r),ty(r,c),ny(r);break;case"edge":if(!xO||!JI||!i.shimEdge)return a("MS edge shim is not included in this adapter release."),p;a("adapter.js shimming edge."),p.browserShim=xO,MO(r),qI(r),JI(r,c),NO(r),ty(r,c),ny(r);break;case"safari":if(!rw||!i.shimSafari)return a("Safari shim is not included in this adapter release."),p;a("adapter.js shimming safari."),p.browserShim=rw,sS(r,c),WO(r),nw(r),G2(r),ZI(r),GO(r),tw(r),ew(r),KO(r),sw(r),ty(r,c),ny(r),cw(r,c);break;default:a("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(r){r.WIN_10="Windows 10",r.WIN_81="Windows 8.1",r.WIN_8="Windows 8",r.WIN_7="Windows 7",r.WIN_VISTA="Windows Vista",r.WIN_SERVER_2003="Windows Server 2003",r.WIN_XP="Windows XP",r.WIN_2000="Windows 2000",r.ANDROID="Android",r.OPEN_BSD="Open BSD",r.SUN_OS="Sun OS",r.LINUX="Linux",r.IOS="iOS",r.MAC_OS="Mac OS",r.QNX="QNX",r.UNIX="UNIX",r.BEOS="BeOS",r.OS_2="OS/2",r.SEARCH_BOT="Search Bot"}(Ei||(Ei={})),function(r){r.CHROME="Chrome",r.SAFARI="Safari",r.EDGE="Edge",r.FIREFOX="Firefox",r.OPERA="OPR",r.QQ="QQBrowser",r.WECHAT="MicroMessenger"}(oi||(oi={}));var XO={exports:{}};!function(r,i){!function(a,c){var p="function",g="object",m="string",A="model",_="name",S="type",C="vendor",T="version",D="architecture",B="console",K="mobile",W="tablet",Z="smarttv",de="wearable",ge="embedded",Se={extend:function(pn,cn){var bt={};for(var Ve in pn)bt[Ve]=cn[Ve]&&cn[Ve].length%2==0?cn[Ve].concat(pn[Ve]):pn[Ve];return bt},has:function(pn,cn){return typeof pn===m&&-1!==cn.toLowerCase().indexOf(pn.toLowerCase())},lowerize:function(pn){return pn.toLowerCase()},major:function(pn){return typeof pn===m?pn.replace(/[^\d\.]/g,"").split(".")[0]:c},trim:function(pn,cn){return pn=pn.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===cn?pn:pn.substring(0,255)}},De={rgx:function(pn,cn){for(var bt,Ve,nt,At,n,t,e=0;e<cn.length&&!n;){var o=cn[e],d=cn[e+1];for(bt=Ve=0;bt<o.length&&!n;)if(n=o[bt++].exec(pn))for(nt=0;nt<d.length;nt++)t=n[++Ve],typeof(At=d[nt])===g&&At.length>0?2==At.length?this[At[0]]=typeof At[1]==p?At[1].call(this,t):At[1]:3==At.length?this[At[0]]=typeof At[1]!==p||At[1].exec&&At[1].test?t?t.replace(At[1],At[2]):c:t?At[1].call(this,t,At[2]):c:4==At.length&&(this[At[0]]=t?At[3].call(this,t.replace(At[1],At[2])):c):this[At]=t||c;e+=2}},str:function(pn,cn){for(var bt in cn)if(typeof cn[bt]===g&&cn[bt].length>0){for(var Ve=0;Ve<cn[bt].length;Ve++)if(Se.has(cn[bt][Ve],pn))return"?"===bt?c:bt}else if(Se.has(cn[bt],pn))return"?"===bt?c:bt;return pn}},it={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},Rt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[T,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[T,[_,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[_,T],[/opios[\/\s]+([\w\.]+)/i],[T,[_,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[T,[_,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[_,T],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[T,[_,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[T,[_,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[T,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[T,[_,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[T,[_,"IE"]],[/yabrowser\/([\w\.]+)/i],[T,[_,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure Browser"],T],[/focus\/([\w\.]+)/i],[T,[_,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[T,[_,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[T,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[T,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[T,[_,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[T,[_,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[T,[_,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[_,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 Browser"],T],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],T],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[_,T],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[_],[/;fbav\/([\w\.]+);/i],[T,[_,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[_,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[_,T],[/\bgsa\/([\w\.]+)\s.*safari\//i],[T,[_,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[T,[_,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[_,"Chrome WebView"],T],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[T,[_,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[_,T],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[T,[_,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[T,_],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[_,[T,De.str,it.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[_,T],[/(navigator|netscape)\/([\w\.-]+)/i],[[_,"Netscape"],T],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[T,[_,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[_,T]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[D,"amd64"]],[/(ia32(?=;))/i],[[D,Se.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[D,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[D,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[D,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[D,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[D,/ower/,"",Se.lowerize]],[/(sun4\w)[;\)]/i],[[D,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[D,Se.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[A,[C,"Samsung"],[S,W]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[A,[C,"Samsung"],[S,K]],[/\((ip(?:hone|od)[\s\w]*);/i],[A,[C,"Apple"],[S,K]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[A,[C,"Apple"],[S,W]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[A,[C,"Huawei"],[S,W]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[A,[C,"Huawei"],[S,K]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[A,/_/g," "],[C,"Xiaomi"],[S,K]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[A,/_/g," "],[C,"Xiaomi"],[S,W]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[A,[C,"OPPO"],[S,K]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[A,[C,"Vivo"],[S,K]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[A,[C,"Realme"],[S,K]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[A,[C,"Motorola"],[S,K]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[A,[C,"Motorola"],[S,W]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[A,[C,"LG"],[S,W]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[A,[C,"LG"],[S,K]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[A,[C,"Lenovo"],[S,W]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[A,/_/g," "],[C,"Nokia"],[S,K]],[/droid.+;\s(pixel\sc)[\s)]/i],[A,[C,"Google"],[S,W]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[A,[C,"Google"],[S,K]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[A,[C,"Sony"],[S,K]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[A,"Xperia Tablet"],[C,"Sony"],[S,W]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[A,[C,"OnePlus"],[S,K]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[A,[C,"Amazon"],[S,W]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[A,"Fire Phone"],[C,"Amazon"],[S,K]],[/\((playbook);[\w\s\),;-]+(rim)/i],[A,C,[S,W]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[A,[C,"BlackBerry"],[S,K]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[A,[C,"ASUS"],[S,W]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[A,[C,"ASUS"],[S,K]],[/(nexus\s9)/i],[A,[C,"HTC"],[S,W]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[C,[A,/_/g," "],[S,K]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[A,[C,"Acer"],[S,W]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[A,[C,"Meizu"],[S,K]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[C,A,[S,K]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[C,A,[S,W]],[/\s(surface\sduo)\s/i],[A,[C,"Microsoft"],[S,W]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[A,[C,"Fairphone"],[S,K]],[/\s(u304aa)\sbuild/i],[A,[C,"AT&T"],[S,K]],[/sie-(\w*)/i],[A,[C,"Siemens"],[S,K]],[/[;\/]\s?(rct\w+)\sbuild/i],[A,[C,"RCA"],[S,W]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[A,[C,"Dell"],[S,W]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[A,[C,"Verizon"],[S,W]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[A,[C,"Barnes & Noble"],[S,W]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[A,[C,"NuVision"],[S,W]],[/;\s(k88)\sbuild/i],[A,[C,"ZTE"],[S,W]],[/;\s(nx\d{3}j)\sbuild/i],[A,[C,"ZTE"],[S,K]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[A,[C,"Swiss"],[S,K]],[/[;\/]\s?(zur\d{3})\sbuild/i],[A,[C,"Swiss"],[S,W]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[A,[C,"Zeki"],[S,W]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[C,"Dragon Touch"],A,[S,W]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[A,[C,"Insignia"],[S,W]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[A,[C,"NextBook"],[S,W]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[C,"Voice"],A,[S,K]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[C,"LvTel"],A,[S,K]],[/;\s(ph-1)\s/i],[A,[C,"Essential"],[S,K]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[A,[C,"Envizen"],[S,W]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[A,[C,"MachSpeed"],[S,W]],[/[;\/]\s?tu_(1491)\sbuild/i],[A,[C,"Rotor"],[S,W]],[/(shield[\w\s]+)\sbuild/i],[A,[C,"Nvidia"],[S,W]],[/(sprint)\s(\w+)/i],[C,A,[S,K]],[/(kin\.[onetw]{3})/i],[[A,/\./g," "],[C,"Microsoft"],[S,K]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[A,[C,"Zebra"],[S,W]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[A,[C,"Zebra"],[S,K]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[C,A,[S,B]],[/droid.+;\s(shield)\sbuild/i],[A,[C,"Nvidia"],[S,B]],[/(playstation\s[345portablevi]+)/i],[A,[C,"Sony"],[S,B]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[A,[C,"Microsoft"],[S,B]],[/smart-tv.+(samsung)/i],[C,[S,Z]],[/hbbtv.+maple;(\d+)/i],[[A,/^/,"SmartTV"],[C,"Samsung"],[S,Z]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[C,"LG"],[S,Z]],[/(apple)\s?tv/i],[C,[A,"Apple TV"],[S,Z]],[/crkey/i],[[A,"Chromecast"],[C,"Google"],[S,Z]],[/droid.+aft([\w])(\sbuild\/|\))/i],[A,[C,"Amazon"],[S,Z]],[/\(dtv[\);].+(aquos)/i],[A,[C,"Sharp"],[S,Z]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[C,Se.trim],[A,Se.trim],[S,Z]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[S,Z]],[/((pebble))app\/[\d\.]+\s/i],[C,A,[S,de]],[/droid.+;\s(glass)\s\d/i],[A,[C,"Google"],[S,de]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[A,[C,"Zebra"],[S,de]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[C,[S,ge]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[A,[S,K]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[A,[S,W]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[S,Se.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[A,[C,"Generic"]],[/(phone)/i],[[S,K]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[T,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[T,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[_,T],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[T,_]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[_,T],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[_,[T,De.str,it.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[_,"Windows"],[T,De.str,it.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[T,/_/g,"."],[_,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[_,"Mac OS"],[T,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[_,T],[/\(bb(10);/i],[T,[_,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[T,[_,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[_,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[T,[_,"webOS"]],[/crkey\/([\d\.]+)/i],[T,[_,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[_,"Chromium OS"],T],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[_,T],[/(sunos)\s?([\w\.\d]*)/i],[[_,"Solaris"],T],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[_,T]]},Dt=function(pn,cn){if("object"==typeof pn&&(cn=pn,pn=c),!(this instanceof Dt))return new Dt(pn,cn).getResult();var bt=pn||(void 0!==a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),Ve=cn?Se.extend(Rt,cn):Rt;return this.getBrowser=function(){var nt={name:c,version:c};return De.rgx.call(nt,bt,Ve.browser),nt.major=Se.major(nt.version),nt},this.getCPU=function(){var nt={architecture:c};return De.rgx.call(nt,bt,Ve.cpu),nt},this.getDevice=function(){var nt={vendor:c,model:c,type:c};return De.rgx.call(nt,bt,Ve.device),nt},this.getEngine=function(){var nt={name:c,version:c};return De.rgx.call(nt,bt,Ve.engine),nt},this.getOS=function(){var nt={name:c,version:c};return De.rgx.call(nt,bt,Ve.os),nt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return bt},this.setUA=function(nt){return bt=typeof nt===m&&nt.length>255?Se.trim(nt,255):nt,this},this.setUA(bt),this};Dt.VERSION="0.7.28",Dt.BROWSER={NAME:_,MAJOR:"major",VERSION:T},Dt.CPU={ARCHITECTURE:D},Dt.DEVICE={MODEL:A,VENDOR:C,TYPE:S,CONSOLE:B,MOBILE:K,SMARTTV:Z,TABLET:W,WEARABLE:de,EMBEDDED:ge},Dt.ENGINE={NAME:_,VERSION:T},Dt.OS={NAME:_,VERSION:T},r.exports&&(i=r.exports=Dt),i.UAParser=Dt;var Pt=void 0!==a&&(a.jQuery||a.Zepto);if(Pt&&!Pt.ua){var On=new Dt;Pt.ua=On.getResult(),Pt.ua.get=function(){return On.getUA()},Pt.ua.set=function(pn){On.setUA(pn);var cn=On.getResult();for(var bt in cn)Pt.ua[bt]=cn[bt]}}}("object"==typeof window?window:te)}(XO,XO.exports);const ZO=new XO.exports;let nd=ZO.getResult();function Oi(r){return r&&ZO.setUA(r),nd=ZO.getResult(),{name:eD(nd),version:Y2(nd),os:Yh(nd),osVersion:nd.os.version}}function eD(r){if("Blink"===r.engine.name&&"WeChat"!==r.browser.name)return oi.CHROME;switch(r.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return oi.CHROME;case"Safari":case"Mobile Safari":return oi.SAFARI;case"Edge":return oi.EDGE;case"Firefox":return oi.FIREFOX;case"QQBrowser":return oi.QQ;case"Opera":return oi.OPERA;case"WeChat":return oi.WECHAT;default:return r.browser.name||""}}function Y2(r){let i;return i="Blink"===r.engine.name?r.engine.version||"":r.browser.version||"",i.split(".")[0]}function Yh(r){return"Windows"===r.os.name?r.os.version?r.os.name+" "+r.os.version:r.os.name:r.os.name||""}function m_(){return Oi().os}function ry(){const r=Oi();return!!("WebKit"===nd.engine.name&&r.os===Ei.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&r.name!==oi.SAFARI||Ho()&&r.name!==oi.SAFARI)}function iy(){return Oi().name===oi.CHROME}function uu(){return Oi().name===oi.SAFARI}function Uo(){return Oi().name===oi.FIREFOX}function Ho(){return Oi().os===Ei.IOS}function tD(){const r=Oi();if(r.os!==Ei.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return 13===Number(i[0])}function oy(){const r=Oi();if(r.os!==Ei.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return 15===Number(i[0])}function q2(){const r=Oi();if(r.os!==Ei.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return 15===Number(i[0])&&0===Number(i[1])}function J2(){const r=Oi();if(r.os!==Ei.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return 15===Number(i[0])&&Number(i[1])>=1}function nD(){const r=Oi();if(r.os!==Ei.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return 15===Number(i[0])&&Number(i[1])>=2}function Jp(){return uu()&&navigator.maxTouchPoints>0}function Bi(){return Oi().name===oi.WECHAT}function rd(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function cS(){const r=Oi();return r.name!==oi.EDGE&&r.name!==oi.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function nF(){return Oi().os===Ei.ANDROID}var sy={exports:{}},lw=Ul.f;Io({target:"Object",stat:!0,forced:Object.defineProperty!==lw,sham:!Ec},{defineProperty:lw});var qh=Md.Object,__=sy.exports=function(r,i,a){return qh.defineProperty(r,i,a)};qh.defineProperty.sham&&(__.sham=!0);var uS=sy.exports;function q(r,i,a){return i in r?uS(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r}var ay={exports:{}},$p=function(r,i){return function(){for(var a=new Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];return r.apply(i,a)}},$2=$p,gl=Object.prototype.toString;function X2(r){return"[object Array]"===gl.call(r)}function rD(r){return null!==r&&"object"==typeof r}function iF(r){return"[object Function]"===gl.call(r)}function lS(r,i){if(null!=r)if("object"!=typeof r&&(r=[r]),X2(r))for(var a=0,c=r.length;a<c;a++)i.call(null,r[a],a,r);else for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&i.call(null,r[p],p,r)}var _l={isArray:X2,isArrayBuffer:function(r){return"[object ArrayBuffer]"===gl.call(r)},isBuffer:function(r){return null!=r&&null!=r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)},isFormData:function(r){return typeof FormData<"u"&&r instanceof FormData},isArrayBufferView:function(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer},isString:function(r){return"string"==typeof r},isNumber:function(r){return"number"==typeof r},isObject:rD,isUndefined:function(r){return void 0===r},isDate:function(r){return"[object Date]"===gl.call(r)},isFile:function(r){return"[object File]"===gl.call(r)},isBlob:function(r){return"[object Blob]"===gl.call(r)},isFunction:iF,isStream:function(r){return rD(r)&&iF(r.pipe)},isURLSearchParams:function(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator>"u"||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:lS,merge:function r(){var i={};function a(g,m){i[m]="object"==typeof i[m]&&"object"==typeof g?r(i[m],g):g}for(var c=0,p=arguments.length;c<p;c++)lS(arguments[c],a);return i},deepMerge:function r(){var i={};function a(g,m){i[m]="object"==typeof i[m]&&"object"==typeof g?r(i[m],g):"object"==typeof g?r({},g):g}for(var c=0,p=arguments.length;c<p;c++)lS(arguments[c],a);return i},extend:function(r,i,a){return lS(i,function(c,p){r[p]=a&&"function"==typeof c?$2(c,a):c}),r},trim:function(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}},Am=_l;function Z2(r){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Go=function(r,i,a){if(!i)return r;var c;if(a)c=a(i);else if(Am.isURLSearchParams(i))c=i.toString();else{var p=[];Am.forEach(i,function(m,A){null!=m&&(Am.isArray(m)?A+="[]":m=[m],Am.forEach(m,function(_){Am.isDate(_)?_=_.toISOString():Am.isObject(_)&&(_=JSON.stringify(_)),p.push(Z2(A)+"="+Z2(_))}))}),c=p.join("&")}if(c){var g=r.indexOf("#");-1!==g&&(r=r.slice(0,g)),r+=(-1===r.indexOf("?")?"?":"&")+c}return r},od=_l;function dw(){this.handlers=[]}dw.prototype.use=function(r,i){return this.handlers.push({fulfilled:r,rejected:i}),this.handlers.length-1},dw.prototype.eject=function(r){this.handlers[r]&&(this.handlers[r]=null)},dw.prototype.forEach=function(r){od.forEach(this.handlers,function(i){null!==i&&r(i)})};var oF=dw,dS=_l,sF=function(r){return!(!r||!r.__CANCEL__)},aF=_l,eN=function(r,i,a,c,p){return function(r,i,a,c,p){return r.config=i,a&&(r.code=a),r.request=c,r.response=p,r.isAxiosError=!0,r.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},r}(new Error(r),i,a,c,p)},uF=eN,tN=_l,iD=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],sa=_l,s4=sa.isStandardBrowserEnv()?function(){var r,i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");function c(p){var g=p;return i&&(a.setAttribute("href",g),g=a.href),a.setAttribute("href",g),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}return r=c(window.location.href),function(p){var g=sa.isString(p)?c(p):p;return g.protocol===r.protocol&&g.host===r.host}}():function(){return!0},oD=_l,Jh=oD.isStandardBrowserEnv()?{write:function(r,i,a,c,p,g){var m=[];m.push(r+"="+encodeURIComponent(i)),oD.isNumber(a)&&m.push("expires="+new Date(a).toGMTString()),oD.isString(c)&&m.push("path="+c),oD.isString(p)&&m.push("domain="+p),!0===g&&m.push("secure"),document.cookie=m.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},cy=_l,a4=Go,c4=s4,pw=eN,xc=_l,aD=function(r,i){aF.forEach(r,function(a,c){c!==i&&c.toUpperCase()===i.toUpperCase()&&(r[i]=a,delete r[c])})},pF={"Content-Type":"application/x-www-form-urlencoded"};function pS(r,i){!xc.isUndefined(r)&&xc.isUndefined(r["Content-Type"])&&(r["Content-Type"]=i)}var ip,hS={adapter:((typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process)||typeof XMLHttpRequest<"u")&&(ip=function(r){return new Promise(function(i,a){var c=r.data,p=r.headers;cy.isFormData(c)&&delete p["Content-Type"];var g=new XMLHttpRequest;if(r.auth&&(p.Authorization="Basic "+btoa((r.auth.username||"")+":"+(r.auth.password||""))),g.open(r.method.toUpperCase(),a4(r.url,r.params,r.paramsSerializer),!0),g.timeout=r.timeout,g.onreadystatechange=function(){if(g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var C="getAllResponseHeaders"in g?function(r){var i,a,c,p={};return r&&tN.forEach(r.split("\n"),function(g){if(c=g.indexOf(":"),i=tN.trim(g.substr(0,c)).toLowerCase(),a=tN.trim(g.substr(c+1)),i){if(p[i]&&iD.indexOf(i)>=0)return;p[i]="set-cookie"===i?(p[i]?p[i]:[]).concat([a]):p[i]?p[i]+", "+a:a}}),p}(g.getAllResponseHeaders()):null;(function(r,i,a){var c=a.config.validateStatus;!c||c(a.status)?r(a):i(uF("Request failed with status code "+a.status,a.config,null,a.request,a))})(i,a,{data:r.responseType&&"text"!==r.responseType?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:C,config:r,request:g}),g=null}},g.onabort=function(){g&&(a(pw("Request aborted",r,"ECONNABORTED",g)),g=null)},g.onerror=function(){a(pw("Network Error",r,null,g)),g=null},g.ontimeout=function(){a(pw("timeout of "+r.timeout+"ms exceeded",r,"ECONNABORTED",g)),g=null},cy.isStandardBrowserEnv()){var _=Jh,S=(r.withCredentials||c4(r.url))&&r.xsrfCookieName?_.read(r.xsrfCookieName):void 0;S&&(p[r.xsrfHeaderName]=S)}if("setRequestHeader"in g&&cy.forEach(p,function(C,T){void 0===c&&"content-type"===T.toLowerCase()?delete p[T]:g.setRequestHeader(T,C)}),r.withCredentials&&(g.withCredentials=!0),r.responseType)try{g.responseType=r.responseType}catch(C){if("json"!==r.responseType)throw C}"function"==typeof r.onDownloadProgress&&g.addEventListener("progress",r.onDownloadProgress),"function"==typeof r.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",r.onUploadProgress),r.cancelToken&&r.cancelToken.promise.then(function(C){g&&(g.abort(),a(C),g=null)}),void 0===c&&(c=null),g.send(c)})}),ip),transformRequest:[function(r,i){return aD(i,"Accept"),aD(i,"Content-Type"),xc.isFormData(r)||xc.isArrayBuffer(r)||xc.isBuffer(r)||xc.isStream(r)||xc.isFile(r)||xc.isBlob(r)?r:xc.isArrayBufferView(r)?r.buffer:xc.isURLSearchParams(r)?(pS(i,"application/x-www-form-urlencoded;charset=utf-8"),r.toString()):xc.isObject(r)?(pS(i,"application/json;charset=utf-8"),JSON.stringify(r)):r}],transformResponse:[function(r){if("string"==typeof r)try{r=JSON.parse(r)}catch{}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};xc.forEach(["delete","get","head"],function(r){hS.headers[r]={}}),xc.forEach(["post","put","patch"],function(r){hS.headers[r]=xc.merge(pF)});var uy=hS,hw=_l,v_=function(r,i,a){return dS.forEach(a,function(c){r=c(r,i)}),r},sd=sF,$h=uy;function _n(r){r.cancelToken&&r.cancelToken.throwIfRequested()}var ly=_l,hF=function(r,i){i=i||{};var a={};return ly.forEach(["url","method","params","data"],function(c){void 0!==i[c]&&(a[c]=i[c])}),ly.forEach(["headers","auth","proxy"],function(c){ly.isObject(i[c])?a[c]=ly.deepMerge(r[c],i[c]):void 0!==i[c]?a[c]=i[c]:ly.isObject(r[c])?a[c]=ly.deepMerge(r[c]):void 0!==r[c]&&(a[c]=r[c])}),ly.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(c){void 0!==i[c]?a[c]=i[c]:void 0!==r[c]&&(a[c]=r[c])}),a},Xp=_l,u4=Go,Zp=oF,l4=function(r){return _n(r),r.baseURL&&!function(r){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(r)}(r.url)&&(r.url=function(r,i){return i?r.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):r}(r.baseURL,r.url)),r.headers=r.headers||{},r.data=v_(r.data,r.headers,r.transformRequest),r.headers=hw.merge(r.headers.common||{},r.headers[r.method]||{},r.headers||{}),hw.forEach(["delete","get","head","post","put","patch","common"],function(i){delete r.headers[i]}),(r.adapter||$h.adapter)(r).then(function(i){return _n(r),i.data=v_(i.data,i.headers,r.transformResponse),i},function(i){return sd(i)||(_n(r),i&&i.response&&(i.response.data=v_(i.response.data,i.response.headers,r.transformResponse))),Promise.reject(i)})},cD=hF;function mS(r){this.defaults=r,this.interceptors={request:new Zp,response:new Zp}}mS.prototype.request=function(r){"string"==typeof r?(r=arguments[1]||{}).url=arguments[0]:r=r||{},(r=cD(this.defaults,r)).method=r.method?r.method.toLowerCase():"get";var i=[l4,void 0],a=Promise.resolve(r);for(this.interceptors.request.forEach(function(c){i.unshift(c.fulfilled,c.rejected)}),this.interceptors.response.forEach(function(c){i.push(c.fulfilled,c.rejected)});i.length;)a=a.then(i.shift(),i.shift());return a},mS.prototype.getUri=function(r){return r=cD(this.defaults,r),u4(r.url,r.params,r.paramsSerializer).replace(/^\?/,"")},Xp.forEach(["delete","get","head","options"],function(r){mS.prototype[r]=function(i,a){return this.request(Xp.merge(a||{},{method:r,url:i}))}}),Xp.forEach(["post","put","patch"],function(r){mS.prototype[r]=function(i,a,c){return this.request(Xp.merge(c||{},{method:r,url:i,data:a}))}});var d4=mS;function uD(r){this.message=r}uD.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},uD.prototype.__CANCEL__=!0;var _a=uD,p4=_a;function Nu(r){if("function"!=typeof r)throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(c){i=c});var a=this;r(function(c){a.reason||(a.reason=new p4(c),i(a.reason))})}Nu.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Nu.source=function(){var r;return{token:new Nu(function(i){r=i}),cancel:r}};var h4=Nu,dy=_l,f4=$p,lD=d4,fF=hF;function qi(r){var i=new lD(r),a=f4(lD.prototype.request,i);return dy.extend(a,lD.prototype,i),dy.extend(a,i),a}var vl=qi(uy);vl.Axios=lD,vl.create=function(r){return qi(fF(vl.defaults,r))},vl.Cancel=_a,vl.CancelToken=h4,vl.isCancel=sF,vl.all=function(r){return Promise.all(r)},vl.spread=function(r){return function(i){return r.apply(null,i)}},ay.exports=vl,ay.exports.default=vl;var lu=ay.exports;class y_{constructor(i){q(this,"logger",void 0),q(this,"prefixLists",[]),this.logger=i}debug(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];this.logger.debug(...this.prefixLists,...a)}info(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];this.logger.info(...this.prefixLists,...a)}warning(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];this.logger.warning(...this.prefixLists,...a)}error(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];this.logger.error(...this.prefixLists,...a)}prefix(i){return this.prefixLists.push(i),this}popPrefix(){return this.prefixLists.pop(),this}}class s{constructor(){q(this,"_events",{}),q(this,"addListener",this.on)}getListeners(i){return this._events[i]?this._events[i].map(a=>a.listener):[]}on(i,a){this._events[i]||(this._events[i]=[]);const c=this._events[i];-1===this._indexOfListener(c,a)&&c.push({listener:a,once:!1})}once(i,a){this._events[i]||(this._events[i]=[]);const c=this._events[i];-1===this._indexOfListener(c,a)&&c.push({listener:a,once:!0})}off(i,a){if(!this._events[i])return;const c=this._events[i],p=this._indexOfListener(c,a);-1!==p&&c.splice(p,1),0===this._events[i].length&&delete this._events[i]}removeAllListeners(i){i?delete this._events[i]:this._events={}}emit(i){this._events[i]||(this._events[i]=[]);const a=this._events[i].map(m=>m);for(var c=arguments.length,p=new Array(c>1?c-1:0),g=1;g<c;g++)p[g-1]=arguments[g];for(let m=0;m<a.length;m+=1){const A=a[m];A.once&&this.off(i,A.listener),A.listener.apply(this,p||[])}}_indexOfListener(i,a){let c=i.length;for(;c--;)if(i[c].listener===a)return c;return-1}}const l=new class extends s{reportLogUploadError(r){this.emit("REPORT_LOG_UPLOAD",r)}};let u;!function(r){r.UNEXPECTED_ERROR="UNEXPECTED_ERROR",r.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",r.TIMEOUT="TIMEOUT",r.INVALID_PARAMS="INVALID_PARAMS",r.NOT_READABLE="NOT_READABLE",r.NOT_SUPPORTED="NOT_SUPPORTED",r.INVALID_OPERATION="INVALID_OPERATION",r.OPERATION_ABORTED="OPERATION_ABORTED",r.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",r.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",r.NETWORK_ERROR="NETWORK_ERROR",r.NETWORK_TIMEOUT="NETWORK_TIMEOUT",r.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",r.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",r.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",r.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",r.ELECTRON_IS_NULL="ELECTRON_IS_NULL",r.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",r.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",r.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",r.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",r.PERMISSION_DENIED="PERMISSION_DENIED",r.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",r.TRACK_IS_DISABLED="TRACK_IS_DISABLED",r.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",r.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",r.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",r.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",r.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",r.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",r.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",r.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",r.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",r.UID_CONFLICT="UID_CONFLICT",r.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",r.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",r.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",r.INVALID_TRACK="INVALID_TRACK",r.SENDER_NOT_FOUND="SENDER_NOT_FOUND",r.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",r.SET_ANSWER_FAILED="SET_ANSWER_FAILED",r.ICE_FAILED="ICE_FAILED",r.PC_CLOSED="PC_CLOSED",r.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",r.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",r.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",r.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",r.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",r.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",r.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",r.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",r.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",r.INVALID_REMOTE_USER="INVALID_REMOTE_USER",r.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",r.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",r.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",r.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",r.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",r.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",r.WS_ABORT="WS_ABORT",r.WS_DISCONNECT="WS_DISCONNECT",r.WS_ERR="WS_ERR",r.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",r.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",r.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",r.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",r.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",r.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",r.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",r.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",r.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",r.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",r.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",r.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",r.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",r.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",r.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",r.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",r.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",r.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",r.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",r.INVALID_PLUGIN="INVALID_PLUGIN",r.DISCONNECT_P2P="DISCONNECT_P2P",r.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",r.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",r.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED"}(u||(u={}));class h extends Error{constructor(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;super(a),q(this,"code",void 0),q(this,"message",void 0),q(this,"data",void 0),q(this,"name","AgoraRTCException"),this.code=i,this.message="AgoraRTCError ".concat(this.code,": ").concat(a),this.data=c}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===i&&O.error(this.toString()),"warning"===i&&O.warning(this.toString()),this}throw(){throw this.print(),this}}const v={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function E(r,i){const a=Math.floor(i.timeout*Math.pow(i.timeoutFactor,r));return Math.min(i.maxRetryTimeout,a)}function I(r,i,a,c){const p=Object.assign({},v,c);let g=p.timeout;const m=function(){var S=U(function*(){var C;yield(C=g,new Un(T=>{window.setTimeout(T,C)})),g*=p.timeoutFactor,g=Math.min(p.maxRetryTimeout,g)});return function(){return S.apply(this,arguments)}}();let A=!1;const _=new Un(function(){var S=U(function*(C,T){i=i||(()=>!1),a=a||(()=>!0);for(let D=0;D<p.maxRetryCount;D+=1){if(A)return T(new h(u.OPERATION_ABORTED));try{const B=yield r();if(!i(B,D)||D+1===p.maxRetryCount)return C(B);yield m()}catch(B){if(!a(B,D)||D+1===p.maxRetryCount)return T(B);yield m()}}});return function(C,T){return S.apply(this,arguments)}}());return _.cancel=()=>A=!0,_}function R(){const r=new Date;return r.toTimeString().split(" ")[0]+":"+r.getMilliseconds()}const N={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},L=Date.now(),V=r=>{for(const i in N)if(Object.prototype.hasOwnProperty.call(N,i)&&N[i]===r)return i;return"DEFAULT"},O=new class{constructor(){q(this,"proxyServerURL",void 0),q(this,"logLevel",N.DEBUG),q(this,"uploadState","collecting"),q(this,"uploadLogWaitingList",[]),q(this,"uploadLogUploadingList",[]),q(this,"uploadErrorCount",0),q(this,"currentLogID",0),q(this,"url",void 0),q(this,"extLog",(r,i)=>{this.appendLogToWaitingList(r,i)})}debug(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const c=[N.DEBUG].concat(i);this.log.apply(this,c)}info(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const c=[N.INFO].concat(i);this.log.apply(this,c)}warning(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const c=[N.WARNING].concat(i);this.log.apply(this,c)}error(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const c=[N.ERROR].concat(i);this.log.apply(this,c)}upload(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const c=[N.DEBUG].concat(i);this.uploadLog.apply(this,c)}setLogLevel(r){r=Math.min(Math.max(0,r),4),this.logLevel=r}enableLogUpload(){Ln("UPLOAD_LOG",!0)}disableLogUpload(){Ln("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(r){this.proxyServerURL=r}prefix(r){return new y_(this).prefix(r)}log(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if(Date.now()-L<100)return void setTimeout(()=>{this.log(...i)},Date.now()-L);const c=Math.max(0,Math.min(4,i[0]));if(i[0]=R()+" Agora-SDK [".concat(V(c),"]:"),this.appendLogToWaitingList(c,i),c<this.logLevel)return;const p=R()+" %cAgora-SDK [".concat(V(c),"]:");let g=[];if(!rt("USE_NEW_LOG"))switch(c){case N.DEBUG:g=[p,"color: #64B5F6;"].concat(i.slice(1)),console.log.apply(console,g);break;case N.INFO:g=[p,"color: #1E88E5; font-weight: bold;"].concat(i.slice(1)),console.log.apply(console,g);break;case N.WARNING:g=[p,"color: #FB8C00; font-weight: bold;"].concat(i.slice(1)),console.warn.apply(console,g);break;case N.ERROR:g=[p,"color: #B00020; font-weight: bold;"].concat(i.slice(1)),console.error.apply(console,g)}}uploadLog(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if(Date.now()-L<100)return void setTimeout(()=>{this.uploadLog(...i)},Date.now()-L);const c=Math.max(0,Math.min(4,i[0]));i[0]=R()+" Agora-SDK [".concat(V(c),"]:"),this.appendLogToWaitingList(c,i)}appendLogToWaitingList(r){if(!rt("UPLOAD_LOG"))return;let i="";for(var a=arguments.length,c=new Array(a>1?a-1:0),p=1;p<a;p++)c[p-1]=arguments[p];c.forEach(g=>{"object"==typeof g&&(g=JSON.stringify(g)),i+="".concat(g," ")}),this.uploadLogWaitingList.push({payload_str:i,log_level:r,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}uploadLogs(){var r=this;return U(function*(){const i=r.uploadLogUploadingList,a={sdk_version:gr,process_id:rt("PROCESS_ID"),payload:JSON.stringify(i)};return I(U(function*(){const c=yield lu.post(r.url||(r.proxyServerURL?"https://".concat(r.proxyServerURL,"/ls/?h=").concat(rt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(rt("LOG_UPLOAD_SERVER"),"/upload/v1")),a,{responseType:"text"});if("OK"!==c.data){const p=new Error("unexpected upload log response");throw p.response=c,p}}),()=>(r.uploadLogUploadingList=[],!1),c=>(l.reportLogUploadError(c.response?{status:c.response.status,data:c.response.data,headers:c.response.headers,message:c.message}:c.request?{status:c.request.status,message:c.message}:{status:-1,message:c.message}),!0),{timeout:rt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:rt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})})()}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,rt("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),rt("UPLOAD_LOG_INTERVAL"))}).catch(r=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),rt("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),rt("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},X={debug:console.log,info:console.log,warning:console.warn,error:console.error},ee={debug:"color: #64B5F6;",info:"color: #1E88E5; font-weight: bold;",warning:"color: #FB8C00; font-weight: bold;",error:"color: #B00020; font-weight: bold;"},re={debug:0,info:1,warning:2,error:3},ne=[];let fe,ve=0,Le=0,Qe=!1;function ze(){const r=new Date;return[r.getTime(),r.toTimeString().split(" ")[0]+":"+r.getMilliseconds()]}function ft(r){if(!rt("UPLOAD_LOG"))return;let i;switch(r.type){case Ui.MISC:i=[r.timestamp,r.level,r.type,r.module,r.instanceId,[r.msg]];break;case Ui.INTERNAL_EVENT:case Ui.PUBLIC_EVENT:case Ui.WEB_EVENT:i=[r.timestamp,r.level,r.type,r.module,r.instanceId,[r.event,r.msg]];break;case Ui.INTERNAL_API:case Ui.PUBLIC_API:case Ui.WEB_API:i=[r.timestamp,r.level,r.type,r.module,r.instanceId,[r.api,r.args,r.result]]}ne.push(i)}function lt(r,i){const[a,c]=ze(),p="warning",g="".concat(c," %cAgora-SDK [").concat(p,"] [INTERNAL API]:"),m={[Ui.WEB_API]:"logWebAPI",[Ui.PUBLIC_API]:"logPublicAPI",[Ui.INTERNAL_API]:"logInternalAPI",[Ui.WEB_EVENT]:"logWebEvent",[Ui.PUBLIC_EVENT]:"logPublicEvent",[Ui.INTERNAL_EVENT]:"logInternalEvent",[Ui.MISC]:"logMisc"}[r],A=[g,ee.warning,"Log.".concat(m),i];rt("USE_NEW_LOG")&&(St(p)&&X.warning.apply(console,A),ft({timestamp:a,level:p,module:"Log",instanceId:void 0,type:Ui.INTERNAL_API,api:m,args:void 0,result:i.toString()}))}function tt(r){if(Array.isArray(r)){let[c,p]=r;return c||(c="Global"),{module:c,instanceId:p}}let i,a;if("string"!=typeof r.__moduleName)throw new Error("Cannot get __moduleName from log instance.");i=r.__moduleName;try{a=r.__instanceId}catch{throw new Error("Cannot get __instanceId from log instance.")}return{module:i,instanceId:a}}function St(r){return re[r]>=Le}function Zt(r,i,a,c,p,g){if(r===Ui.PUBLIC_API||r===Ui.WEB_API||r===Ui.INTERNAL_API)try{const{module:m,instanceId:A}=tt(a);p=p&&JSON.stringify(p),g=g instanceof Error?g.toString():g&&JSON.stringify(g);const[_,S]=ze(),C=["".concat(S," %cAgora-SDK [").concat(i,"] [").concat({[Ui.PUBLIC_API]:"PUBLIC API",[Ui.WEB_API]:"WEB API",[Ui.INTERNAL_API]:"INTERNAL API"}[r],"]:"),ee[i],"".concat(m).concat(A?"<".concat(A,">"):"",".").concat(c),p,g];rt("USE_NEW_LOG")&&(St(i)&&X[i].apply(console,C),ft({timestamp:_,level:i,module:m,instanceId:A,type:r,api:c,args:p,result:g}))}catch(m){lt(r,m)}}function ut(r,i,a,c,p){if(r===Ui.WEB_EVENT||r===Ui.INTERNAL_EVENT||r===Ui.PUBLIC_EVENT)try{const{module:g,instanceId:m}=tt(a);"string"!=typeof p&&(p=p instanceof Error?p.toString():JSON.stringify(p));const[A,_]=ze(),S=["".concat(_," %cAgora-SDK [").concat(i,"] [").concat({[Ui.WEB_EVENT]:"WEB EVENT",[Ui.PUBLIC_EVENT]:"PUBLIC EVENT",[Ui.INTERNAL_EVENT]:"INTERNAL EVENT"}[r],"]:"),ee[i],"".concat(g).concat(m?"<".concat(m,">"):"",".on(").concat(c,")"),p||""];rt("USE_NEW_LOG")&&(St(i)&&X[i].apply(console,S),ft({timestamp:A,level:i,module:g,instanceId:m,type:r,event:c,msg:p}))}catch(g){lt(r,g)}}function Ze(r){fe=r}function _e(r,i,a){try{const{module:c,instanceId:p}=tt(i),[g,m]=ze(),A=["".concat(m," %cAgora-SDK [").concat(r,"] [MISC]:"),ee[r],"".concat(c).concat(p?"<".concat(p,">"):""),'"'.concat(a,'"')];rt("USE_NEW_LOG")&&(St(r)&&X[r].apply(console,A),ft({timestamp:g,level:r,module:c,instanceId:p,type:Ui.MISC,msg:a}))}catch(c){Ne("warning",["log"],"logMisc",void 0,c)}}function He(r,i,a,c){ut(Ui.INTERNAL_EVENT,r,i,a,c)}function ct(r,i,a,c){ut(Ui.PUBLIC_EVENT,r,i,a,c)}function st(r,i,a,c){ut(Ui.WEB_EVENT,r,i,a,c)}function Ne(r,i,a,c,p){Zt(Ui.INTERNAL_API,r,i,a,c,p)}function Jt(r,i,a,c,p){Zt(Ui.WEB_API,r,i,a,c,p)}function Ft(r,i,a,c,p){Zt(Ui.PUBLIC_API,r,i,a,c,p)}function yn(r,i){return function(a){return class extends a{get __moduleName(){return r}get __instanceId(){if(i){if("function"==typeof this[i])return this[i]();{const c=i.split(".");return c.length>0?Lh(c).call(c,(p,g)=>{try{return p&&p[g]}catch{return}},this):this[i]}}}}}}function mr(r){return tr.apply(this,arguments)}function tr(){return tr=U(function*(r){if(!r&&Qe)return;if(Qe=!0,!rt("UPLOAD_LOG"))return void setTimeout(()=>mr(!0),rt("UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF"));if(0===ne.length)return void setTimeout(()=>mr(!0),rt("UPLOAD_LOG_INTERVAL"));const i=ne.slice(0,rt("UPLOAD_LOG_LENGTH_EACH_TIME")),a={sdk_version:gr,log_version:rt("LOG_VERSION"),process_id:rt("PROCESS_ID"),index:ve,logs:JSON.stringify(i)};yield I(U(function*(){const c=yield lu.post(fe?"https://".concat(fe,"/ls/?h=").concat(rt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(rt("LOG_UPLOAD_SERVER"),"/upload/v1"),a,{responseType:"text"});if("OK"!==c.data)throw new Error("Log service response error ".concat(c.data));return c}),void 0,void 0,{timeout:rt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:rt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}),ne.splice(0,rt("UPLOAD_LOG_LENGTH_EACH_TIME")),ve+=i.length,setTimeout(()=>mr(!0),rt("UPLOAD_LOG_INTERVAL"))}),tr.apply(this,arguments)}const Tr="v4.12.1-0-gd73db17d-dirty(6/27/2022, 3:58:00 PM)",gr=function(r){if(r.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return r;const i=r.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(i&&i[1]&&i[2]){const p=i[2];return"".concat(i[1],".").concat(p)}const a=r.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(a&&a[1]&&a[2]){const p=a[2];return"".concat(a[1],".").concat(100*(Number(p)+1))}return"4.0.0.999"}("4.12.1"),lr=function(){try{return!0===JSON.parse("true")}catch{return!0}}(),Hn={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},$r={"90p":Mn(160,90),"90p_1":Mn(160,90),"120p":Mn(160,120,15,30,65),"120p_1":Mn(160,120,15,30,65),"120p_3":Mn(120,120,15,30,50),"120p_4":Mn(212,120),"180p":Mn(320,180,15,30,140),"180p_1":Mn(320,180,15,30,140),"180p_3":Mn(180,180,15,30,100),"180p_4":Mn(240,180,15,30,120),"240p":Mn(320,240,15,40,200),"240p_1":Mn(320,240,15,40,200),"240p_3":Mn(240,240,15,40,140),"240p_4":Mn(424,240,15,40,220),"360p":Mn(640,360,15,80,400),"360p_1":Mn(640,360,15,80,400),"360p_3":Mn(360,360,15,80,260),"360p_4":Mn(640,360,30,80,600),"360p_6":Mn(360,360,30,80,400),"360p_7":Mn(480,360,15,80,320),"360p_8":Mn(480,360,30,80,490),"360p_9":Mn(640,360,15,80,800),"360p_10":Mn(640,360,24,80,800),"360p_11":Mn(640,360,24,80,1e3),"480p":Mn(640,480,15,100,500),"480p_1":Mn(640,480,15,100,500),"480p_2":Mn(640,480,30,100,1e3),"480p_3":Mn(480,480,15,100,400),"480p_4":Mn(640,480,30,100,750),"480p_6":Mn(480,480,30,100,600),"480p_8":Mn(848,480,15,100,610),"480p_9":Mn(848,480,30,100,930),"480p_10":Mn(640,480,10,100,400),"720p":Mn(1280,720,15,120,1130),"720p_1":Mn(1280,720,15,120,1130),"720p_2":Mn(1280,720,30,120,2e3),"720p_3":Mn(1280,720,30,120,1710),"720p_5":Mn(960,720,15,120,910),"720p_6":Mn(960,720,30,120,1380),"1080p":Mn(1920,1080,15,120,2080),"1080p_1":Mn(1920,1080,15,120,2080),"1080p_2":Mn(1920,1080,30,120,3e3),"1080p_3":Mn(1920,1080,30,120,3150),"1080p_5":Mn(1920,1080,60,120,4780),"1440p":Mn(2560,1440,30,120,4850),"1440p_1":Mn(2560,1440,30,120,4850),"1440p_2":Mn(2560,1440,60,120,7350),"4k":Mn(3840,2160,30,120,8910),"4k_1":Mn(3840,2160,30,120,8910),"4k_3":Mn(3840,2160,60,120,13500)},eo={"480p":Ir(640,480,5),"480p_1":Ir(640,480,5),"480p_2":Ir(640,480,30),"480p_3":Ir(640,480,15),"720p":Ir(1280,720,5),"720p_1":Ir(1280,720,5),"720p_2":Ir(1280,720,30),"720p_3":Ir(1280,720,15),"1080p":Ir(1920,1080,5),"1080p_1":Ir(1920,1080,5),"1080p_2":Ir(1920,1080,30),"1080p_3":Ir(1920,1080,15)},co={"1SL1TL":fo(1,1),"3SL3TL":fo(3,3),"2SL3TL":fo(2,3)};function xt(r){return"string"==typeof r?Object.assign({},$r[r]):r}function It(r){return"string"==typeof r?Object.assign({},eo[r]):r}function et(r){return"string"==typeof r?Object.assign({},co[r]):r}const $t={speech_low_quality:Xr(16e3,!1),speech_standard:Xr(32e3,!1,18),music_standard:Xr(48e3,!1),standard_stereo:Xr(48e3,!0,56),high_quality:Xr(48e3,!1,128),high_quality_stereo:Xr(48e3,!0,192)};function Cn(r){return"string"==typeof r?Object.assign({},$t[r]):r}function Ln(r,i,a){Object.keys(hr).includes(r)&&(!a&&Object.keys(Hr).includes(r)||(hr[r]=i))}function rt(r){return hr[r]}const hr={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10},Hr={};function Xr(r,i,a){return{sampleRate:r,stereo:i,bitrate:a}}function Mn(r,i,a,c,p){return{width:r,height:i,frameRate:a,bitrateMin:c,bitrateMax:p}}function Ir(r,i,a,c,p){return{width:{max:r},height:{max:i},frameRate:a,bitrateMin:c,bitrateMax:p}}function fo(r,i){return{numSpatialLayers:r,numTemporalLayers:i}}lr||(hr.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],hr.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],hr.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],hr.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],hr.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],hr.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],hr.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",hr.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",hr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",hr.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",hr.AREAS=["NORTH_AMERICA","OVERSEA"]);const Eo=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],Fi=[],Vo=[];var Hi=Nf,ms=Ul,xu=Zc,Fa=function(r,i,a){var c=Hi(i);c in r?ms.f(r,c,xu(0,a)):r[c]=a},ym=Pp,fw=Cu,mF=Fa,m4=Or.Array,lQ=Math.max,g4=function(r,i,a){for(var c=fw(r),p=ym(i,c),g=ym(void 0===a?c:a,c),m=m4(lQ(g-p,0)),A=0;p<g;p++,A++)mF(m,A,r[p]);return m.length=A,m},dQ=g4,EW=Math.floor,_4=function(r,i){var a=r.length,c=EW(a/2);return a<8?bW(r,i):pQ(r,_4(dQ(r,0,c),i),_4(dQ(r,c),i),i)},bW=function(r,i){for(var a,c,p=r.length,g=1;g<p;){for(c=g,a=r[g];c&&i(r[c-1],a)>0;)r[c]=r[--c];c!==g++&&(r[c]=a)}return r},pQ=function(r,i,a,c){for(var p=i.length,g=a.length,m=0,A=0;m<p||A<g;)r[m+A]=m<p&&A<g?c(i[m],a[A])<=0?i[m++]:a[A++]:m<p?i[m++]:a[A++];return r},hQ=_4,fQ=Oh.match(/firefox\/(\d+)/i),SW=!!fQ&&+fQ[1],CW=/MSIE|Trident/.test(Oh),mQ=Oh.match(/AppleWebKit\/(\d+)\./),gF=Io,v4=No,A4=bc,wW=Fl,gQ=Cu,y4=Wl,_F=as,_Q=hQ,E4=Uf,b4=SW,vQ=CW,S4=Dh,nN=!!mQ&&+mQ[1],E_=[],vF=v4(E_.sort),C4=v4(E_.push),gS=_F(function(){E_.sort(void 0)}),Em=_F(function(){E_.sort(null)}),AQ=E4("sort"),AF=!_F(function(){if(S4)return S4<70;if(!(b4&&b4>3)){if(vQ)return!0;if(nN)return nN<603;var r,i,a,c,p="";for(r=65;r<76;r++){switch(i=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(c=0;c<47;c++)E_.push({k:i+c,v:a})}for(E_.sort(function(g,m){return m.v-g.v}),c=0;c<E_.length;c++)i=E_[c].k.charAt(0),p.charAt(p.length-1)!==i&&(p+=i);return"DGBEFHACIJK"!==p}});gF({target:"Array",proto:!0,forced:gS||!Em||!AQ||!AF},{sort:function(r){void 0!==r&&A4(r);var i=wW(this);if(AF)return void 0===r?vF(i):vF(i,r);var a,c,p=[],g=gQ(i);for(c=0;c<g;c++)c in i&&C4(p,i[c]);for(_Q(p,function(m){return function(A,_){return void 0===_?-1:void 0===A?1:void 0!==m?+m(A,_)||0:y4(A)>y4(_)?1:-1}}(r)),a=p.length,c=0;c<a;)i[c]=p[c++];for(;c<g;)delete i[c++];return i}});var yQ=Fd("Array").sort,EQ=$c,bQ=yQ,mw=Array.prototype,yF=function(r){var i=r.sort;return r===mw||EQ(mw,r)&&i===mw.sort?bQ:i};function Xh(r,i){if("boolean"!=typeof r)throw new h(u.INVALID_PARAMS,"Invalid ".concat(i,": The value is of the boolean type."))}function va(r,i,a){if(!a.includes(r))throw new h(u.INVALID_PARAMS,"".concat(i," can only be set as ").concat(JSON.stringify(a)))}function Lr(r,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(r<a||r>c||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!I4(r))throw new h(u.INVALID_PARAMS,"invalid ".concat(i,": the value range is [").concat(a,", ").concat(c,"]. integer only"))}function bm(r,i){if("number"!=typeof r){if(!(r.min||r.max||r.ideal||r.exact))throw new h(u.INVALID_PARAMS,"".concat(i," is not a valid ConstrainLong"));void 0!==r.min&&Lr(r.min,"".concat(i,".min"),0,1/0),void 0!==r.max&&Lr(r.max,"".concat(i,".max"),1,1/0),void 0!==r.exact&&Lr(r.exact,"".concat(i,".exact"),1,1/0),void 0!==r.ideal&&Lr(r.ideal,"".concat(i,".ideal"),1,1/0)}else Lr(r,i,1,1/0)}function Lc(r,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==r)throw new h(u.INVALID_PARAMS,"".concat(i||"param"," cannot be empty"));if(!EF(r,a,c,p))throw new h(u.INVALID_PARAMS,"Invalid ".concat(i||"string param",": Length of the string: [").concat(a,",").concat(c,"].").concat(p?" ASCII characters only.":""))}function gw(r,i){if(!Array.isArray(r))throw new h(u.INVALID_PARAMS,"".concat(i," should be an array"))}function rN(r){if("string"!=typeof r||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(r))throw O.error("Invalid Channel Name ".concat(r)),new h(u.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function iN(r){if(!("number"==typeof(i=r)&&Math.floor(i)===i&&0<=i&&i<=4294967295||EF(r,1,255)))throw O.error("Invalid UID ".concat(r," ").concat(typeof r)),new h(u.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var i;"string"==typeof r&&O.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function to(r){return null==r}function EF(r){return"string"==typeof r&&r.length<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:255)&&r.length>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)&&(!(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])||w4(r))}function I4(r){return"number"==typeof r&&r%1==0}function w4(r){if("string"!=typeof r)return!1;for(let i=0;i<r.length;i+=1){const a=r.charCodeAt(i);if(a<0||a>255)return!1}return!0}let bF,Ui,aa;(function(r){r.FREE="free",r.UPLOADING="uploading"})(bF||(bF={})),function(r){r[r.MISC=0]="MISC",r[r.INTERNAL_EVENT=1]="INTERNAL_EVENT",r[r.PUBLIC_EVENT=2]="PUBLIC_EVENT",r[r.WEB_EVENT=3]="WEB_EVENT",r[r.INTERNAL_API=4]="INTERNAL_API",r[r.WEB_API=5]="WEB_API",r[r.PUBLIC_API=6]="PUBLIC_API"}(Ui||(Ui={})),function(r){r.NONE="none",r.INIT="init",r.CANPLAY="canplay",r.PLAYING="playing",r.PAUSED="paused",r.SUSPEND="suspend",r.STALLED="stalled",r.WAITING="waiting",r.ERROR="error",r.DESTROYED="destroyed",r.ABORT="abort",r.ENDED="ended",r.EMPTIED="emptied",r.LOADEDDATA="loadeddata"}(aa||(aa={}));const oN={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function T4(r){return Lc(r.reportId,"params.reportId",0,100,!1),Lc(r.category,"params.category",0,100,!1),Lc(r.event,"params.event",0,100,!1),Lc(r.label,"params.label",0,100,!1),Lr(r.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const R4={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Aa,wo,SF,sN,Xn,zn,b_,Sm,_S,_w,Lu,Hs,or,aN,Gs,ar,gs,Ws,Gr,Zr,du,Di,cN,Bc;function O4(r){return Lr(r.timeout,"config.timeout",0,1e5),Lr(r.timeoutFactor,"config.timeoutFactor",0,100,!1),Lr(r.maxRetryCount,"config.maxRetryConfig",0,1/0),Lr(r.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function CF(r){return va(r.codec,"config.codec",["vp8","vp9","av1","h264"]),va(r.mode,"config.mode",["rtc","live"]),void 0!==r.audioCodec&&va(r.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==r.proxyServer&&Lc(r.proxyServer,"config.proxyServer",1,1e4),void 0!==r.turnServer&&SQ(r.turnServer),void 0!==r.httpRetryConfig&&O4(r.httpRetryConfig),void 0!==r.websocketRetryConfig&&O4(r.websocketRetryConfig),!0}function IF(r){if(!Array.isArray(r)||r.length<1)return!1;try{r.forEach(i=>{if(!i.urls)throw Error()})}catch{return!1}return!0}function SQ(r){return Lc(r.turnServerURL,"turnServerURL"),Lc(r.username,"username"),Lc(r.password,"password"),r.udpport&&Lr(r.udpport,"udpport",1,99999,!0),r.forceturn&&Xh(r.forceturn,"forceturn"),r.security&&Xh(r.security,"security"),r.tcpport&&Lr(r.tcpport,"tcpport",1,99999,!0),!0}function CQ(r){return void 0!==r.level&&va(r.level,"level",[1,2,3]),!0}(function(r){r.PUBLISH="publish",r.SUBSCRIBE="subscribe",r.WS_COMPRESSOR_INIT="ws_compressor_init",r.SESSION_INIT="session_init",r.JOIN_CHOOSE_SERVER="join_choose_server",r.REQ_USER_ACCOUNT="req_user_account",r.JOIN_GATEWAY="join_gateway",r.REJOIN_GATEWAY="rejoin_gateway",r.STREAM_SWITCH="stream_switch",r.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",r.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",r.FIRST_VIDEO_RECEIVED="first_video_received",r.FIRST_AUDIO_RECEIVED="first_audio_received",r.FIRST_VIDEO_DECODE="first_video_decode",r.FIRST_AUDIO_DECODE="first_audio_decode",r.ON_ADD_AUDIO_STREAM="on_add_audio_stream",r.ON_ADD_VIDEO_STREAM="on_add_video_stream",r.ON_UPDATE_STREAM="on_update_stream",r.ON_REMOVE_STREAM="on_remove_stream",r.USER_ANALYTICS="req_user_analytics"})(Aa||(Aa={})),function(r){r.SESSION="io.agora.pb.Wrtc.Session",r.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",r.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",r.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",r.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",r.PUBLISH="io.agora.pb.Wrtc.Publish",r.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",r.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",r.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",r.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",r.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",r.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",r.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",r.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",r.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",r.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",r.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",r.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",r.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",r.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",r.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",r.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",r.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",r.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",r.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",r.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",r.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",r.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",r.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",r.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(wo||(wo={})),function(r){r[r.WORKER_EVENT=156]="WORKER_EVENT",r[r.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(SF||(SF={})),function(r){r[r.SESSION=26]="SESSION",r[r.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",r[r.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",r[r.JOIN_GATEWAY=28]="JOIN_GATEWAY",r[r.PUBLISH=30]="PUBLISH",r[r.SUBSCRIBE=29]="SUBSCRIBE",r[r.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",r[r.STREAM_SWITCH=32]="STREAM_SWITCH",r[r.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",r[r.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",r[r.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",r[r.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",r[r.API_INVOKE=41]="API_INVOKE",r[r.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",r[r.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",r[r.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",r[r.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",r[r.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",r[r.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",r[r.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",r[r.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",r[r.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",r[r.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",r[r.WORKER_EVENT=156]="WORKER_EVENT",r[r.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",r[r.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",r[r.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",r[r.USER_ANALYTICS=1e4]="USER_ANALYTICS",r[r.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(sN||(sN={})),function(r){r.CREATE_CLIENT="createClient",r.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",r.SET_AREA="setArea",r.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",r.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",r.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",r.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",r.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",r.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",r.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",r.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",r.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",r.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",r.START_PROXY_SERVER="Client.startProxyServer",r.STOP_PROXY_SERVER="Client.stopProxyServer",r.SET_PROXY_SERVER="Client.setProxyServer",r.SET_TURN_SERVER="Client.setTurnServer",r.SET_CLIENT_ROLE="Client.setClientRole",r.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",r.ENABLE_DUAL_STREAM="Client.enableDualStream",r.DISABLE_DUAL_STREAM="Client.disableDualStream",r.JOIN="Client.join",r.LEAVE="Client.leave",r.PUBLISH="Client.publish",r.UNPUBLISH="Client.unpublish",r.SUBSCRIBE="Client.subscribe",r.MASS_SUBSCRIBE="Client.massSubscribe",r.MASS_UNSUBSCRIBE="Client.massUnsubscribe",r.UNSUBSCRIBE="Client.unsubscribe",r.RENEW_TOKEN="Client.renewToken",r.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",r.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",r.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",r.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",r.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",r.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",r.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",r.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",r.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",r.START_LIVE_STREAMING="Client.startLiveStreaming",r.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",r.STOP_LIVE_STREAMING="Client.stopLiveStreaming",r.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",r.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",r.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",r.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",r.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",r.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",r.SET_CONFIG_DISTRIBUTE="_configDistribute",r.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",r.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",r.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",r.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",r.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",r.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",r.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",r.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",r.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",r.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",r.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",r.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",r.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",r.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",r.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",r.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",r.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",r.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",r.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",r.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",r.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",r.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",r.STREAM_TYPE_CHANGE="streamTypeChange",r.CONNECTION_STATE_CHANGE="connectionStateChange",r.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(Xn||(Xn={})),function(r){r.TRACER="tracer"}(zn||(zn={})),function(r){r.IDLE="IDLE",r.INITING="INITING",r.INITEND="INITEND"}(b_||(b_={})),function(r){r.STATE_CHANGE="state_change",r.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",r.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",r.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Sm||(Sm={})),function(r){r[r.ACCESS_POINT=101]="ACCESS_POINT",r[r.UNILBS=201]="UNILBS",r[r.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(_S||(_S={})),function(r){r[r.IIIEGAL_APPID=1]="IIIEGAL_APPID",r[r.IIIEGAL_UID=2]="IIIEGAL_UID",r[r.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(_w||(_w={})),function(r){r[r.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",r[r.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",r[r.INTERNAL_ERROR=8]="INTERNAL_ERROR",r[r.NO_AUTHORIZED=9]="NO_AUTHORIZED",r[r.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",r[r.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",r[r.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",r[r.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",r[r.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",r[r.USER_OVERLOAD=16]="USER_OVERLOAD",r[r.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",r[r.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Lu||(Lu={})),function(r){r[r.NO_FLAG_SET=100]="NO_FLAG_SET",r[r.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",r[r.INVALID_FALG_SET=102]="INVALID_FALG_SET",r[r.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",r[r.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",r[r.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",r[r.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",r[r.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",r[r.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",r[r.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",r[r.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",r[r.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",r[r.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",r[r.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",r[r.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",r[r.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",r[r.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",r[r.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",r[r.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Hs||(Hs={})),function(r){r[r.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",r[r.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",r[r.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",r[r.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",r[r.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",r[r.K_TICKET_INVALID=7]="K_TICKET_INVALID",r[r.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",r[r.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",r[r.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",r[r.K_UID_BANNED=14]="K_UID_BANNED",r[r.K_IP_BANNED=15]="K_IP_BANNED",r[r.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",r[r.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",r[r.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",r[r.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",r[r.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",r[r.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",r[r.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",r[r.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",r[r.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",r[r.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",r[r.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",r[r.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",r[r.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",r[r.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",r[r.ERR_INVALID_UID=117]="ERR_INVALID_UID",r[r.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",r[r.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",r[r.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",r[r.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",r[r.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",r[r.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",r[r.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",r[r.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",r[r.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",r[r.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",r[r.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",r[r.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",r[r.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",r[r.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",r[r.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",r[r.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",r[r.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",r[r.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",r[r.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",r[r.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",r[r.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",r[r.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",r[r.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",r[r.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",r[r.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",r[r.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",r[r.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",r[r.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",r[r.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",r[r.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",r[r.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(or||(or={})),function(r){r[r.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",r[r.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",r[r.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(aN||(aN={})),function(r){r.LEAVE="LEAVE",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.UID_BANNED="UID_BANNED",r.IP_BANNED="IP_BANNED",r.CHANNEL_BANNED="CHANNEL_BANNED",r.FALLBACK="FALLBACK"}(Gs||(Gs={})),function(r){r.CONNECTION_STATE_CHANGE="connection-state-change",r.MEDIA_RECONNECT_START="media-reconnect-start",r.MEDIA_RECONNECT_END="media-reconnect-end",r.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",r.USER_JOINED="user-joined",r.USER_LEAVED="user-left",r.USER_PUBLISHED="user-published",r.USER_UNPUBLISHED="user-unpublished",r.USER_INFO_UPDATED="user-info-updated",r.CLIENT_BANNED="client-banned",r.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",r.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",r.VOLUME_INDICATOR="volume-indicator",r.CRYPT_ERROR="crypt-error",r.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",r.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",r.NETWORK_QUALITY="network-quality",r.STREAM_TYPE_CHANGED="stream-type-changed",r.STREAM_FALLBACK="stream-fallback",r.RECEIVE_METADATA="receive-metadata",r.STREAM_MESSAGE="stream-message",r.LIVE_STREAMING_ERROR="live-streaming-error",r.LIVE_STREAMING_WARNING="live-streaming-warning",r.INJECT_STREAM_STATUS="stream-inject-status",r.EXCEPTION="exception",r.ERROR="error",r.P2P_LOST="p2p_lost",r.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",r.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",r.PUBLISHED_USER_LIST="published-user-list",r.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",r.CONTENT_INSPECT_ERROR="content-inspect-error",r.CONTENT_INSPECT_RESULT="content-inspect-result"}(ar||(ar={})),function(r){r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.MULTI_IP="MULTI_IP",r.TIMEOUT="TIMEOUT",r.OFFLINE="OFFLINE",r.LEAVE="LEAVE",r.P2P_FAILED="P2P_FAILED",r.FALLBACK="FALLBACK"}(gs||(gs={})),function(r){r.CONNECTING="connecting",r.CONNECTED="connected",r.RECONNECTING="reconnecting",r.CLOSED="closed"}(Ws||(Ws={})),function(r){r.WS_CONNECTED="ws_connected",r.WS_RECONNECTING="ws_reconnecting",r.WS_CLOSED="ws_closed",r.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",r.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",r.ON_BINARY_DATA="on_binary_data",r.REQUEST_RECOVER="request_recover",r.REQUEST_JOIN_INFO="request_join_info",r.REQUEST_REJOIN_INFO="req_rejoin_info",r.IS_P2P_DISCONNECTED="is_p2p_dis",r.DISCONNECT_P2P="dis_p2p",r.ABORT_P2P_EXECUTION="abort_p2p_execution",r.NEED_RENEW_SESSION="need-sid",r.REPORT_JOIN_GATEWAY="report_join_gateway",r.REQUEST_TIMEOUT="request_timeout",r.REQUEST_SUCCESS="request_success",r.JOIN_RESPONSE="join_response"}(Gr||(Gr={})),function(r){r.PING="ping",r.PING_BACK="ping_back",r.JOIN="join_v3",r.REJOIN="rejoin_v3",r.LEAVE="leave",r.SET_CLIENT_ROLE="set_client_role",r.PUBLISH="publish",r.UNPUBLISH="unpublish",r.SUBSCRIBE="subscribe",r.SUBSCRIBE_STREAMS="subscribe_streams",r.UNSUBSCRIBE="unsubscribe",r.UNSUBSCRIBE_STREAMS="unsubscribe_streams",r.SUBSCRIBE_CHANGE="subscribe_change",r.TRAFFIC_STATS="traffic_stats",r.RENEW_TOKEN="renew_token",r.SWITCH_VIDEO_STREAM="switch_video_stream",r.DEFAULT_VIDEO_STREAM="default_video_stream",r.SET_FALLBACK_OPTION="set_fallback_option",r.GATEWAY_INFO="gateway_info",r.CONTROL="control",r.SEND_METADATA="send_metadata",r.DATA_STREAM="data_stream",r.PICK_SVC_LAYER="pick_svc_layer",r.RESTART_ICE="restart_ice",r.CONNECT_PC="connect_pc",r.SET_VIDEO_PROFILE="set_video_profile"}(Zr||(Zr={})),function(r){r.PUBLISH_STATS="publish_stats",r.PUBLISH_RELATED_STATS="publish_related_stats",r.SUBSCRIBE_STATS="subscribe_stats",r.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",r.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",r.DENOISER_STATS="denoiser_stats",r.TRANSPORT_STATS="transport_stats"}(du||(du={})),function(r){r.ON_USER_ONLINE="on_user_online",r.ON_USER_OFFLINE="on_user_offline",r.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",r.ON_PUBLISH_STREAM="on_publish_stream",r.ON_UPLINK_STATS="on_uplink_stats",r.ON_P2P_LOST="on_p2p_lost",r.ON_REMOVE_STREAM="on_remove_stream",r.ON_ADD_AUDIO_STREAM="on_add_audio_stream",r.ON_ADD_VIDEO_STREAM="on_add_video_stream",r.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",r.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",r.ON_USER_BANNED="on_user_banned",r.ON_NOTIFICATION="on_notification",r.ON_CRYPT_ERROR="on_crypt_error",r.MUTE_AUDIO="mute_audio",r.MUTE_VIDEO="mute_video",r.UNMUTE_AUDIO="unmute_audio",r.UNMUTE_VIDEO="unmute_video",r.ON_P2P_OK="on_p2p_ok",r.RECEIVE_METADATA="receive_metadata",r.ON_DATA_STREAM="on_data_stream",r.ENABLE_LOCAL_VIDEO="enable_local_video",r.DISABLE_LOCAL_VIDEO="disable_local_video",r.ENABLE_LOCAL_AUDIO="enable_local_audio",r.DISABLE_LOCAL_AUDIO="disable_local_audio",r.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Di||(Di={})),function(r){r.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",r.NEED_ANSWER="NEED_ANSWER",r.NEED_RENEGOTIATE="NEED_RENEGOTIATE",r.P2P_LOST="P2P_LOST",r.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",r.NEED_UNPUB="NEED_UNPUB",r.NEED_UNSUB="NEED_UNSUB",r.NEED_UPLOAD="NEED_UPLOAD",r.NEED_CONTROL="NEED_CONTROL",r.START_RECONNECT="START_RECONNECT",r.END_RECONNECT="END_RECONNECT",r.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(cN||(cN={})),function(r){r.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",r.RECEIVE_TRACK_BUFFER="receive_track_buffer",r.ON_AUDIO_BUFFER="on_audio_buffer",r.UPDATE_SOURCE="update_source"}(Bc||(Bc={}));const D4={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},k4={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},IQ={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},TW={uplinkNetworkQuality:0,downlinkNetworkQuality:0},wQ={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Er,Xo,py;(function(r){r.CONNECTED="websocket:connected",r.RECONNECTING="websocket:reconnecting",r.WILL_RECONNECT="websocket:will_reconnect",r.CLOSED="websocket:closed",r.FAILED="websocket:failed",r.ON_MESSAGE="websocket:on_message",r.REQUEST_NEW_URLS="websocket:request_new_urls",r.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",r.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection"})(Er||(Er={})),function(r){r.TRANSCODE="mix_streaming",r.RAW="raw_streaming",r.INJECT="inject_streaming"}(Xo||(Xo={})),function(r){r[r.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",r[r.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",r[r.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",r[r.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",r[r.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",r[r.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",r[r.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",r[r.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",r[r.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",r[r.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",r[r.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(py||(py={}));const TQ={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},wF={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function dD(r,i){Lc(r.url,"".concat(i,".url"),1,1e3,!1),to(r.x)||Lr(r.x,"".concat(i,".x"),0,1e4),to(r.y)||Lr(r.y,"".concat(i,".y"),0,1e4),to(r.width)||Lr(r.width,"".concat(i,".width"),0,1e4),to(r.height)||Lr(r.height,"".concat(i,".height"),0,1e4),to(r.zOrder)||Lr(r.zOrder,"".concat(i,".zOrder"),0,255),to(r.alpha)||Lr(r.alpha,"".concat(i,".alpha"),0,1,!1)}const pD={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},uN={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let pu,Cm,bo,P4,Ua,Zh,Va,S_,Zo,_s,To,nr,Fc,TF,M4,op,C_,ni;function vw(r){if(!r.channelName)throw new h(u.INVALID_PARAMS,"invalid channelName in info");if(!r.uid||"number"!=typeof r.uid)throw new h(u.INVALID_PARAMS,"invalid uid in info, uid must be a number");return r.token&&Lc(r.token,"info.token",1,2047),iN(r.uid),rN(r.channelName),!0}function hD(r){return va(r,"mediaSource",["screen","window","application"]),!0}(function(r){r.WARNING="@live_uap-warning",r.ERROR="@line_uap-error",r.PUBLISH_STREAM_STATUS="@live_uap-publish-status",r.INJECT_STREAM_STATUS="@live_uap-inject-status",r.WORKER_STATUS="@live_uap-worker-status",r.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(pu||(pu={})),function(r){r.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(Cm||(Cm={})),function(r){r[r.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",r[r.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",r[r.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",r[r.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",r[r.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",r[r.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",r[r.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",r[r.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",r[r.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",r[r.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",r[r.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",r[r.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",r[r.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",r[r.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",r[r.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",r[r.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",r[r.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",r[r.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",r[r.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",r[r.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",r[r.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(bo||(bo={})),function(r){r.CONNECT_FAILED="connect failed",r.CONNECT_TIMEOUT="connect timeout",r.WS_DISCONNECTED="websocket disconnected",r.REQUEST_TIMEOUT="request timeout",r.REQUEST_FAILED="request failed",r.WAIT_STATUS_TIMEOUT="wait status timeout",r.WAIT_STATUS_ERROR="wait status error",r.BAD_STATE="bad state",r.WS_ABORT="ws abort",r.AP_REQUEST_TIMEOUT="AP request timeout",r.AP_JSON_PARSE_ERROR="AP json parse error",r.AP_REQUEST_ERROR="AP request error",r.AP_REQUEST_ABORT="AP request abort"}(P4||(P4={})),function(r){r[r.SetSdkProfile=0]="SetSdkProfile",r[r.SetSourceChannel=1]="SetSourceChannel",r[r.SetSourceUserId=2]="SetSourceUserId",r[r.SetDestChannel=3]="SetDestChannel",r[r.StartPacketTransfer=4]="StartPacketTransfer",r[r.StopPacketTransfer=5]="StopPacketTransfer",r[r.UpdateDestChannel=6]="UpdateDestChannel",r[r.Reconnect=7]="Reconnect",r[r.SetVideoProfile=8]="SetVideoProfile"}(Ua||(Ua={})),function(r){r.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",r.NETWORK_CONNECTED="NETWORK_CONNECTED",r.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",r.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",r.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",r.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",r.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",r.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",r.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",r.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Zh||(Zh={})),function(r){r.RELAY_STATE_IDLE="RELAY_STATE_IDLE",r.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",r.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",r.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(Va||(Va={})),function(r){r.RELAY_OK="RELAY_OK",r.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",r.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",r.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(S_||(S_={})),function(r){r.High="high",r.Low="low",r.Audio="audio",r.Screen="screen",r.ScreenLow="screen_low"}(Zo||(Zo={})),function(r){r.DISCONNECT="disconnect",r.CONNECTION_STATE_CHANGE="connection-state-change",r.NETWORK_QUALITY="network-quality",r.STREAM_TYPE_CHANGE="stream-type-change",r.IS_P2P_DISCONNECTED="is-p2p-dis",r.DISCONNECT_P2P="dis-p2p",r.REQUEST_NEW_GATEWAY_LIST="req-gate-url",r.NEED_RENEW_SESSION="need-sid",r.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",r.JOIN_RESPONSE="join-response"}(_s||(_s={})),function(r){r[r.Nothing=0]="Nothing",r[r.Audio=1]="Audio",r[r.LwoVideo=2]="LwoVideo",r[r.Video=4]="Video",r[r.Data=8]="Data"}(To||(To={})),function(r){r.NEED_RENEGOTIATE="@need_renegotiate",r.NEED_REPLACE_TRACK="@need_replace_track",r.NEED_CLOSE="@need_close",r.NEED_ENABLE_TRACK="@need_enable_track",r.NEED_DISABLE_TRACK="@need_disable_track",r.NEED_SESSION_ID="@need_sid",r.SET_OPTIMIZATION_MODE="@set_optimization_mode",r.GET_STATS="@get_stats",r.GET_LOW_VIDEO_TRACK="@get_low_video_track",r.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",r.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",r.NEED_MUTE_TRACK="@need_mute_track",r.NEED_UNMUTE_TRACK="@need_unmute_track"}(nr||(nr={})),function(r){r.SCREEN_TRACK="screen_track",r.LOW_STREAM="low_stream"}(Fc||(Fc={})),function(r){r[r.HIGH_STREAM=0]="HIGH_STREAM",r[r.LOW_STREAM=1]="LOW_STREAM"}(TF||(TF={})),function(r){r[r.DISABLE=0]="DISABLE",r[r.LOW_STREAM=1]="LOW_STREAM",r[r.AUDIO_ONLY=2]="AUDIO_ONLY"}(M4||(M4={})),function(r){r.SOURCE_STATE_CHANGE="source-state-change",r.TRACK_ENDED="track-ended",r.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",r.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",r.CLOSED="closed"}(op||(op={})),function(r){r.FIRST_FRAME_DECODED="first-frame-decoded",r.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(C_||(C_={})),function(r){r.CHINA="CHINA",r.ASIA="ASIA",r.NORTH_AMERICA="NORTH_AMERICA",r.EUROPE="EUROPE",r.JAPAN="JAPAN",r.INDIA="INDIA",r.KOREA="KOREA",r.HKMC="HKMC",r.US="US",r.OCEANIA="OCEANIA",r.SOUTH_AMERICA="SOUTH_AMERICA",r.AFRICA="AFRICA",r.OVERSEA="OVERSEA",r.GLOBAL="GLOBAL"}(ni||(ni={}));const lN=[ni.AFRICA,ni.ASIA,ni.CHINA,ni.EUROPE,ni.GLOBAL,ni.INDIA,ni.JAPAN,ni.NORTH_AMERICA,ni.OCEANIA,ni.OVERSEA,ni.SOUTH_AMERICA];let Ks;!function(r){r.CHINA="CN",r.ASIA="AS",r.NORTH_AMERICA="NA",r.EUROPE="EU",r.JAPAN="JP",r.INDIA="IN",r.KOREA="KR",r.HKMC="HK",r.US="US",r.OCEANIA="OC",r.SOUTH_AMERICA="SA",r.AFRICA="AF",r.OVERSEA="OVERSEA",r.GLOBAL="GLOBAL"}(Ks||(Ks={}));const fD={CHINA:{},ASIA:{CODE:Ks.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Ks.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Ks.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Ks.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Ks.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Ks.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Ks.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Ks.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Ks.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Ks.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Ks.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Ks.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Ks.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};let hy,N4,Wr,Rn,ad,di,Bu,Aw;lr&&(fD.CHINA={CODE:Ks.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(r){r.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(hy||(hy={}));class x4 extends s{constructor(i,a){super(),q(this,"onICEConnectionStateChange",void 0),q(this,"onConnectionStateChange",void 0),q(this,"onDTLSTransportStateChange",void 0),q(this,"onDTLSTransportError",void 0),q(this,"onICETransportStateChange",void 0),q(this,"onFirstAudioReceived",void 0),q(this,"onFirstVideoReceived",void 0),q(this,"onFirstAudioDecoded",void 0),q(this,"onFirstVideoDecoded",void 0),q(this,"onSelectedLocalCandidateChanged",void 0),q(this,"onSelectedRemoteCandidateChanged",void 0)}}(function(r){r.SEND="sendonly",r.RECV="recvonly",r.SENDRECV="sendrecv",r.INACTIVE="inactive"})(N4||(N4={})),function(r){r.VIDEO="video",r.AUDIO="audio"}(Wr||(Wr={})),function(r){r.LocalVideoTrack="videoTrack",r.LocalAudioTrack="audioTrack",r.LocalVideoLowTrack="videoLowTrack"}(Rn||(Rn={})),function(r){r.New="new",r.Connected="connected",r.Reconnecting="reconnecting",r.Disconnected="disconnected"}(ad||(ad={})),function(r){r.StateChange="stateChange",r.IceConnectionStateChange="iceConnectionStateChange",r.RequestMuteLocal="requestMuteLocal",r.RequestUnmuteLocal="requestUnmuteLocal",r.RequestRePublish="requestRePublish",r.RequestReSubscribe="requestReSubscribe",r.RequestUploadStats="requestUploadStats",r.MediaReconnectStart="MediaReconnectStart",r.MediaReconnectEnd="MediaReconnectEnd",r.NeedSignalRTT="NeedSignalRTT",r.RequestRestartICE="RequestRestartIce",r.PeerConnectionStateChange="PeerConnectionStateChange",r.RequestReconnect="RequestReconnect",r.RequestReconnectPC="RequestReconnectPC",r.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",r.P2PLost="P2PLost",r.UpdateVideoEncoder="UpdateVideoEncoder",r.ConnectionTypeChange="ConnectionTypeChange",r.RequestLowStreamParameter="RequestLowStreamParameter"}(di||(di={})),function(r){r.ONLINE="ONLINE",r.OFFLINE="OFFLINE"}(Bu||(Bu={})),function(r){r.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",r.ONLINE="ONLINE",r.OFFLINE="OFFLINE"}(Aw||(Aw={}));const RF={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]};let sp,Al,Fu,yl,Wo;(function(r){r.ON_TRACK="on_track",r.ON_NODE="on_node"})(sp||(sp={})),function(r){r.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",r.REQUEST_CONSTRAINTS="request_constraints"}(Al||(Al={})),function(r){r.CONNECTING="CONNECTING",r.RECONNECTING="RECONNECTING",r.CONNECTED="CONNECTED",r.CLOSED="CLOSED"}(Fu||(Fu={})),function(r){r[r.CONNECT_AP=0]="CONNECT_AP",r[r.AP_CONNECTED=1]="AP_CONNECTED",r[r.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",r[r.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",r[r.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",r[r.CONNECT_WORKER=5]="CONNECT_WORKER",r[r.WORKER_CONNECTED=6]="WORKER_CONNECTED",r[r.CLOSED=7]="CLOSED"}(yl||(yl={})),function(r){r.CONNECTION_STATE_CHANGE="connection-state-change",r.STATE_CHANGE="state-change",r.INSPECT_RESULT="inspect-result",r.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",r.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Wo||(Wo={}));const nc={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function Uc(){return nc}var RQ=typeof ArrayBuffer<"u"&&typeof DataView<"u",OQ=mf,mD=lc,gD=H.RangeError,OF=function(r){if(void 0===r)return 0;var i=OQ(r),a=mD(i);if(i!==a)throw gD("Wrong length or index");return a},L4=H.Array,DF=Math.abs,ap=Math.pow,DQ=Math.floor,B4=Math.log,RW=Math.LN2,DW=Tl,kQ=Ni,PQ=Ca,F4=ff,MQ=qo,U4=Ae,kF=Ni,V4=Ca,NQ=function(r,i,a){var c=F4(i);c in r?MQ.f(r,c,U4(0,a)):r[c]=a},j4=H.Array,xQ=Math.max,LQ=function(r,i,a){for(var c=V4(r),p=kF(i,c),g=kF(void 0===a?c:a,c),m=j4(xQ(g-p,0)),A=0;p<g;p++,A++)NQ(m,A,r[p]);return m.length=A,m},PF=ce,dN=P,BQ=RQ,pN=Dl,Q4=gT,hN=M,fN=Ym,yw=mf,FQ=lc,Ew=OF,H4_pack=function(r,i,a){var c,p,g,m=L4(a),A=8*a-i-1,_=(1<<A)-1,S=_>>1,C=23===i?ap(2,-24)-ap(2,-77):0,T=r<0||0===r&&1/r<0?1:0,D=0;for((r=DF(r))!=r||r===1/0?(p=r!=r?1:0,c=_):(c=DQ(B4(r)/RW),r*(g=ap(2,-c))<1&&(c--,g*=2),(r+=c+S>=1?C/g:C*ap(2,1-S))*g>=2&&(c++,g/=2),c+S>=_?(p=0,c=_):c+S>=1?(p=(r*g-1)*ap(2,i),c+=S):(p=r*ap(2,S-1)*ap(2,i),c=0));i>=8;)m[D++]=255&p,p/=256,i-=8;for(c=c<<i|p,A+=i;A>0;)m[D++]=255&c,c/=256,A-=8;return m[--D]|=128*T,m},H4_unpack=function(r,i){var a,c=r.length,p=8*c-i-1,g=(1<<p)-1,m=g>>1,A=p-7,_=c-1,S=r[_--],C=127&S;for(S>>=7;A>0;)C=256*C+r[_--],A-=8;for(a=C&(1<<-A)-1,C>>=-A,A+=i;A>0;)a=256*a+r[_--],A-=8;if(0===C)C=1-m;else{if(C===g)return a?NaN:S?-1/0:1/0;a+=ap(2,i),C-=m}return(S?-1:1)*a*ap(2,C-i)},NF=S1,xF=vf,UQ=ws.f,LF=qo.f,G4=LQ,W4=$_,BF=Cd.PROPER,K4=Cd.CONFIGURABLE,bw=Wu.get,FF=Wu.set,UF="ArrayBuffer",mN="Wrong index",ef=H.ArrayBuffer,eh=ef,vS=eh&&eh.prototype,El=H.DataView,AS=El&&El.prototype,VF=Object.prototype,jQ=H.Array,vD=H.RangeError,QQ=PF(function(r){for(var i=DW(this),a=PQ(i),c=arguments.length,p=kQ(c>1?arguments[1]:void 0,a),g=c>2?arguments[2]:void 0,m=void 0===g?a:kQ(g,a);m>p;)i[p++]=r;return i}),HQ=PF([].reverse),gN=H4_pack,jF=H4_unpack,z4=function(r){return[255&r]},QF=function(r){return[255&r,r>>8&255]},Y4=function(r){return[255&r,r>>8&255,r>>16&255,r>>24&255]},HF=function(r){return r[3]<<24|r[2]<<16|r[1]<<8|r[0]},GQ=function(r){return gN(r,23,4)},q4=function(r){return gN(r,52,8)},_N=function(r,i){LF(r.prototype,i,{get:function(){return bw(this)[i]}})},I_=function(r,i,a,c){var p=Ew(a),g=bw(r);if(p+i>g.byteLength)throw vD(mN);var m=bw(g.buffer).bytes,A=p+g.byteOffset,_=G4(m,A,A+i);return c?_:HQ(_)},yS=function(r,i,a,c,p,g){var m=Ew(a),A=bw(r);if(m+i>A.byteLength)throw vD(mN);for(var _=bw(A.buffer).bytes,S=m+A.byteOffset,C=c(+p),T=0;T<i;T++)_[S+T]=C[g?T:i-T-1]};if(BQ){var WQ=BF&&ef.name!==UF;if(hN(function(){ef(1)})&&hN(function(){new ef(-1)})&&!hN(function(){return new ef,new ef(1.5),new ef(NaN),WQ&&!K4}))WQ&&K4&&pN(ef,"name",UF);else{(eh=function(r){return fN(this,vS),new ef(Ew(r))}).prototype=vS;for(var J4,GF=UQ(ef),$4=0;GF.length>$4;)(J4=GF[$4++])in eh||pN(eh,J4,ef[J4]);vS.constructor=eh}xF&&NF(AS)!==VF&&xF(AS,VF);var vN=new El(new eh(2)),X4=PF(AS.setInt8);vN.setInt8(0,2147483648),vN.setInt8(1,2147483649),!vN.getInt8(0)&&vN.getInt8(1)||Q4(AS,{setInt8:function(r,i){X4(this,r,i<<24>>24)},setUint8:function(r,i){X4(this,r,i<<24>>24)}},{unsafe:!0})}else vS=(eh=function(r){fN(this,vS);var i=Ew(r);FF(this,{bytes:QQ(jQ(i),0),byteLength:i}),dN||(this.byteLength=i)}).prototype,AS=(El=function(r,i,a){fN(this,AS),fN(r,vS);var c=bw(r).byteLength,p=yw(i);if(p<0||p>c)throw vD("Wrong offset");if(p+(a=void 0===a?c-p:FQ(a))>c)throw vD("Wrong length");FF(this,{buffer:r,byteLength:a,byteOffset:p}),dN||(this.buffer=r,this.byteLength=a,this.byteOffset=p)}).prototype,dN&&(_N(eh,"byteLength"),_N(El,"buffer"),_N(El,"byteLength"),_N(El,"byteOffset")),Q4(AS,{getInt8:function(r){return I_(this,1,r)[0]<<24>>24},getUint8:function(r){return I_(this,1,r)[0]},getInt16:function(r){var i=I_(this,2,r,arguments.length>1?arguments[1]:void 0);return(i[1]<<8|i[0])<<16>>16},getUint16:function(r){var i=I_(this,2,r,arguments.length>1?arguments[1]:void 0);return i[1]<<8|i[0]},getInt32:function(r){return HF(I_(this,4,r,arguments.length>1?arguments[1]:void 0))},getUint32:function(r){return HF(I_(this,4,r,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(r){return jF(I_(this,4,r,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(r){return jF(I_(this,8,r,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(r,i){yS(this,1,r,z4,i)},setUint8:function(r,i){yS(this,1,r,z4,i)},setInt16:function(r,i){yS(this,2,r,QF,i,arguments.length>2?arguments[2]:void 0)},setUint16:function(r,i){yS(this,2,r,QF,i,arguments.length>2?arguments[2]:void 0)},setInt32:function(r,i){yS(this,4,r,Y4,i,arguments.length>2?arguments[2]:void 0)},setUint32:function(r,i){yS(this,4,r,Y4,i,arguments.length>2?arguments[2]:void 0)},setFloat32:function(r,i){yS(this,4,r,GQ,i,arguments.length>2?arguments[2]:void 0)},setFloat64:function(r,i){yS(this,8,r,q4,i,arguments.length>2?arguments[2]:void 0)}});W4(eh,UF),W4(El,"DataView");var WF={ArrayBuffer:eh,DataView:El},PW=qu,Z4=ce,MW=M,KQ=Hc,zQ=Ni,NW=lc,YQ=Ky,KF=WF.ArrayBuffer,zF=WF.DataView,Sw=zF.prototype,ej=Z4(KF.prototype.slice),YF=Z4(Sw.getUint8),Vc=Z4(Sw.setUint8);PW({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:MW(function(){return!new KF(2).slice(1,void 0).byteLength})},{slice:function(r,i){if(ej&&void 0===i)return ej(KQ(this),r);for(var a=KQ(this).byteLength,c=zQ(r,a),p=zQ(void 0===i?a:i,a),g=new(YQ(this,KF))(NW(p-c)),m=new zF(this),A=new zF(g),_=0;c<p;)Vc(A,_++,YF(m,c++));return g}});var cd,tf,AD,nf={exports:{}},yD=RQ,qF=P,rc=H,ED=Xe,w_=Kt,ES=Ya,tj=Zs,JF=mo,$F=Dl,XF=Ed.exports,xW=qo.f,bS=br,bD=S1,bl=vf,qQ=bi,rf=is,SS=rc.Int8Array,SD=SS&&SS.prototype,Im=rc.Uint8ClampedArray,JQ=Im&&Im.prototype,wm=SS&&bD(SS),sf=SD&&bD(SD),$Q=Object.prototype,ZF=rc.TypeError,e3=qQ("toStringTag"),Cw=rf("TYPED_ARRAY_TAG"),Tm=rf("TYPED_ARRAY_CONSTRUCTOR"),fy=yD&&!!bl&&"Opera"!==tj(rc.opera),nj=!1,T_={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},AN={BigInt64Array:8,BigUint64Array:8},t3=function(r){if(!w_(r))return!1;var i=tj(r);return ES(T_,i)||ES(AN,i)};for(cd in T_)(AD=(tf=rc[cd])&&tf.prototype)?$F(AD,Tm,tf):fy=!1;for(cd in AN)(AD=(tf=rc[cd])&&tf.prototype)&&$F(AD,Tm,tf);if((!fy||!ED(wm)||wm===Function.prototype)&&(wm=function(){throw ZF("Incorrect invocation")},fy))for(cd in T_)rc[cd]&&bl(rc[cd],wm);if((!fy||!sf||sf===$Q)&&(sf=wm.prototype,fy))for(cd in T_)rc[cd]&&bl(rc[cd].prototype,sf);if(fy&&bD(JQ)!==sf&&bl(JQ,sf),qF&&!ES(sf,e3))for(cd in nj=!0,xW(sf,e3,{get:function(){return w_(this)?this[Cw]:void 0}}),T_)rc[cd]&&$F(rc[cd],Cw,cd);var my={NATIVE_ARRAY_BUFFER_VIEWS:fy,TYPED_ARRAY_CONSTRUCTOR:Tm,TYPED_ARRAY_TAG:nj&&Cw,aTypedArray:function(r){if(t3(r))return r;throw ZF("Target is not a typed array")},aTypedArrayConstructor:function(r){if(ED(r)&&(!bl||bS(wm,r)))return r;throw ZF(JF(r)+" is not a typed array constructor")},exportTypedArrayMethod:function(r,i,a,c){if(qF){if(a)for(var p in T_){var g=rc[p];if(g&&ES(g.prototype,r))try{delete g.prototype[r]}catch{try{g.prototype[r]=i}catch{}}}sf[r]&&!a||XF(sf,r,a?i:fy&&SD[r]||i,c)}},exportTypedArrayStaticMethod:function(r,i,a){var c,p;if(qF){if(bl){if(a)for(c in T_)if((p=rc[c])&&ES(p,r))try{delete p[r]}catch{}if(wm[r]&&!a)return;try{return XF(wm,r,a?i:fy&&wm[r]||i)}catch{}}for(c in T_)!(p=rc[c])||p[r]&&!a||XF(p,r,i)}},isView:function(r){if(!w_(r))return!1;var i=tj(r);return"DataView"===i||ES(T_,i)||ES(AN,i)},isTypedArray:t3,TypedArray:wm,TypedArrayPrototype:sf},CS=M,ja=Ef,r3=H.ArrayBuffer,Rm=H.Int8Array,ij=!my.NATIVE_ARRAY_BUFFER_VIEWS||!CS(function(){Rm(1)})||!CS(function(){new Rm(-1)})||!ja(function(r){new Rm,new Rm(null),new Rm(1.5),new Rm(r)},!0)||CS(function(){return 1!==new Rm(new r3(2),1,void 0).length}),o3=Kt,yN=Math.floor,oj=Number.isInteger||function(r){return!o3(r)&&isFinite(r)&&yN(r)===r},XQ=mf,ZQ=H.RangeError,CD=H.RangeError,sj=function(r,i){var a=function(r){var i=XQ(r);if(i<0)throw ZQ("The argument can't be less than 0");return i}(r);if(a%i)throw CD("Wrong offset");return a},aj=$a,LW=se,BW=Jo,FW=Tl,UW=Ca,VW=Qy,jW=jy,t7=Kk,n7=my.aTypedArrayConstructor,cj=xe,r7=H,i7=Array.isArray||function(r){return"Array"==cj(r)},o7=ST,s7=Kt,uj=bi("species"),EN=r7.Array,dj=$a,pj=Lt,hj=Tl,fj=Ca,a7=function(r,i){return new(function(r){var i;return i7(r)&&(o7(i=r.constructor)&&(i===EN||i7(i.prototype))||s7(i)&&null===(i=i[uj]))&&(i=void 0),void 0===i?EN:i}(r))(0===i?0:i)},mj=ce([].push),IS=function(r){var i=1==r,a=2==r,c=3==r,p=4==r,g=6==r,m=7==r,A=5==r||g;return function(_,S,C,T){for(var D,B,K=hj(_),W=pj(K),Z=dj(S,C),de=fj(W),ge=0,Se=T||a7,De=i?Se(_,de):a||m?Se(_,0):void 0;de>ge;ge++)if((A||ge in W)&&(B=Z(D=W[ge],ge,K),r))if(i)De[ge]=B;else if(B)switch(r){case 3:return!0;case 5:return D;case 6:return ge;case 2:mj(De,D)}else switch(r){case 4:return!1;case 7:mj(De,D)}return g?-1:c||p?p:De}},ya={forEach:IS(0),map:IS(1),filter:IS(2),some:IS(3),every:IS(4),find:IS(5),findIndex:IS(6),filterReject:IS(7)},wS=qu,gj=H,c7=se,u7=ij,d7=Ym,QW=Ae,ID=Dl,p7=oj,HW=lc,h7=OF,s3=sj,f7=ff,bN=Ya,m7=Zs,vj=Kt,SN=Oo,g7=Bt,_7=br,CN=vf,GW=ws.f,v7=function(r){var i,a,c,p,g,m,A=BW(this),_=FW(r),S=arguments.length,C=S>1?arguments[1]:void 0,T=void 0!==C,D=jW(_);if(D&&!t7(D))for(m=(g=VW(_,D)).next,_=[];!(p=LW(m,g)).done;)_.push(p.value);for(T&&S>2&&(C=aj(C,arguments[2])),a=UW(_),c=new(n7(A))(a),i=0;a>i;i++)c[i]=T?C(_[i],i):_[i];return c},Aj=ya.forEach,IN=X_,yj=qo,A7=Vv,a3=Wu.get,wN=Wu.set,Iw=yj.f,TN=j.f,RN=Math.round,bj=gj.RangeError,y7=WF.ArrayBuffer,WW=y7.prototype,KW=WF.DataView,ON=my.NATIVE_ARRAY_BUFFER_VIEWS,zW=my.TYPED_ARRAY_CONSTRUCTOR,E7=my.TYPED_ARRAY_TAG,b7=my.TypedArray,DN=my.TypedArrayPrototype,YW=my.aTypedArrayConstructor,Sj=my.isTypedArray,c3="BYTES_PER_ELEMENT",Cj="Wrong length",Ij=function(r,i){YW(r);for(var a=0,c=i.length,p=new r(c);c>a;)p[a]=i[a++];return p},u3=function(r,i){Iw(r,i,{get:function(){return a3(this)[i]}})},S7=function(r){var i;return _7(WW,r)||"ArrayBuffer"==(i=m7(r))||"SharedArrayBuffer"==i},C7=function(r,i){return Sj(r)&&!SN(i)&&i in r&&p7(+i)&&i>=0},I7=function(r,i){return i=f7(i),C7(r,i)?QW(2,r[i]):TN(r,i)},l3=function(r,i,a){return i=f7(i),!(C7(r,i)&&vj(a)&&bN(a,"value"))||bN(a,"get")||bN(a,"set")||a.configurable||bN(a,"writable")&&!a.writable||bN(a,"enumerable")&&!a.enumerable?Iw(r,i,a):(r[i]=a.value,r)};P?(ON||(j.f=I7,yj.f=l3,u3(DN,"buffer"),u3(DN,"byteOffset"),u3(DN,"byteLength"),u3(DN,"length")),wS({target:"Object",stat:!0,forced:!ON},{getOwnPropertyDescriptor:I7,defineProperty:l3}),nf.exports=function(r,i,a){var c=r.match(/\d+$/)[0]/8,p=r+(a?"Clamped":"")+"Array",g="get"+r,m="set"+r,A=gj[p],_=A,S=_&&_.prototype,C={},T=function(D,B){Iw(D,B,{get:function(){return W=B,(Z=a3(this)).view[g](W*c+Z.byteOffset,!0);var W,Z},set:function(K){return Z=B,de=K,ge=a3(this),a&&(de=(de=RN(de))<0?0:de>255?255:255&de),void ge.view[m](Z*c+ge.byteOffset,de,!0);var Z,de,ge},enumerable:!0})};ON?u7&&(_=i(function(D,B,K,W){return d7(D,S),A7(vj(B)?S7(B)?void 0!==W?new A(B,s3(K,c),W):void 0!==K?new A(B,s3(K,c)):new A(B):Sj(B)?Ij(_,B):c7(v7,_,B):new A(h7(B)),D,_)}),CN&&CN(_,b7),Aj(GW(A),function(D){D in _||ID(_,D,A[D])}),_.prototype=S):(_=i(function(D,B,K,W){d7(D,S);var Z,de,ge,Se=0,De=0;if(vj(B)){if(!S7(B))return Sj(B)?Ij(_,B):c7(v7,_,B);Z=B,De=s3(K,c);var it=B.byteLength;if(void 0===W){if(it%c||(de=it-De)<0)throw bj(Cj)}else if((de=HW(W)*c)+De>it)throw bj(Cj);ge=de/c}else ge=h7(B),Z=new y7(de=ge*c);for(wN(D,{buffer:Z,byteOffset:De,byteLength:de,length:ge,view:new KW(Z)});Se<ge;)T(D,Se++)}),CN&&CN(_,b7),S=_.prototype=g7(DN)),S.constructor!==_&&ID(S,"constructor",_),ID(S,zW,_),E7&&ID(S,E7,p),C[p]=_,wS({global:!0,forced:_!=A,sham:!ON},C),c3 in _||ID(_,c3,c),c3 in S||ID(S,c3,c),IN(p)}):nf.exports=function(){},(0,nf.exports)("Uint8",function(r){return function(i,a,c){return r(this,i,a,c)}});var qW=Ca,JW=mf,$W=my.aTypedArray;(0,my.exportTypedArrayMethod)("at",function(r){var i=$W(this),a=qW(i),c=JW(r),p=c>=0?c:a+c;return p<0||p>=a?void 0:i[p]});var T7=se,wj=my,XW=Ca,ZW=sj,eK=Tl,R7=M,tK=H.RangeError,Tj=H.Int8Array,O7=Tj&&Tj.prototype,D7=O7&&O7.set,nK=wj.aTypedArray,rK=wj.exportTypedArrayMethod,Rj=!R7(function(){var r=new Uint8ClampedArray(2);return T7(D7,r,{length:1,0:3},1),3!==r[1]}),iK=Rj&&wj.NATIVE_ARRAY_BUFFER_VIEWS&&R7(function(){var r=new Tj(2);return r.set(1),r.set("2",1),0!==r[0]||2!==r[1]});rK("set",function(r){nK(this);var i=ZW(arguments.length>1?arguments[1]:void 0,1),a=eK(r);if(Rj)return T7(D7,this,a,i);var c=this.length,p=XW(a),g=0;if(p+i>c)throw tK("Wrong length");for(;g<p;)this[i+g]=a[g++]},!Rj||iK);var k7=LQ,oK=Math.floor,Oj=function(r,i){var a=r.length,c=oK(a/2);return a<8?sK(r,i):aK(r,Oj(k7(r,0,c),i),Oj(k7(r,c),i),i)},sK=function(r,i){for(var a,c,p=r.length,g=1;g<p;){for(c=g,a=r[g];c&&i(r[c-1],a)>0;)r[c]=r[--c];c!==g++&&(r[c]=a)}return r},aK=function(r,i,a,c){for(var p=i.length,g=a.length,m=0,A=0;m<p||A<g;)r[m+A]=m<p&&A<g?c(i[m],a[A])<=0?i[m++]:a[A++]:m<p?i[m++]:a[A++];return r},cK=Oj,Dj=Sr.match(/firefox\/(\d+)/i),P7=!!Dj&&+Dj[1],uK=/MSIE|Trident/.test(Sr),M7=Sr.match(/AppleWebKit\/(\d+)\./),kj=M,pK=xn,hK=cK,L7=P7,fK=uK,B7=Js,F7=!!M7&&+M7[1],mK=H.Array,gK=my.aTypedArray,_K=my.exportTypedArrayMethod,kN=H.Uint16Array,wD=kN&&ce(kN.prototype.sort),vK=!(!wD||kj(function(){wD(new kN(2),null)})&&kj(function(){wD(new kN(2),{})})),U7=!!wD&&!kj(function(){if(B7)return B7<74;if(L7)return L7<67;if(fK)return!0;if(F7)return F7<602;var r,i,a=new kN(516),c=mK(516);for(r=0;r<516;r++)i=r%4,a[r]=515-r,c[r]=r-2*i+3;for(wD(a,function(p,g){return(p/4|0)-(g/4|0)}),r=0;r<516;r++)if(a[r]!==c[r])return!0});_K("sort",function(r){return void 0!==r&&pK(r),U7?wD(this,r):hK(gK(this),function(i){return function(a,c){return void 0!==i?+i(a,c)||0:c!=c?-1:a!=a?1:0===a&&0===c?1/a>0&&1/c<0?1:-1:a>c}}(r))},!U7||vK);var AK=X_,V7=WF.ArrayBuffer;let zs;qu({global:!0,forced:H.ArrayBuffer!==V7},{ArrayBuffer:V7}),AK("ArrayBuffer"),function(r){r[r.CHOOSE_SERVER=11]="CHOOSE_SERVER",r[r.CLOUD_PROXY=18]="CLOUD_PROXY",r[r.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",r[r.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(zs||(zs={}));var EK=kd,PN=Array.isArray||function(r){return"Array"==EK(r)},bK=Or,j7=PN,SK=cm,CK=Oa,IK=ks("species"),Q7=bK.Array,H7=function(r,i){return new(function(r){var i;return j7(r)&&(SK(i=r.constructor)&&(i===Q7||j7(i.prototype))||CK(i)&&null===(i=i[IK]))&&(i=void 0),void 0===i?Q7:i}(r))(0===i?0:i)},TK=Vr,RK=R0,OK=Fl,DK=Cu,kK=H7,G7=No([].push),RS=function(r){var i=1==r,a=2==r,c=3==r,p=4==r,g=6==r,m=7==r,A=5==r||g;return function(_,S,C,T){for(var D,B,K=OK(_),W=RK(K),Z=TK(S,C),de=DK(W),ge=0,Se=T||kK,De=i?Se(_,de):a||m?Se(_,0):void 0;de>ge;ge++)if((A||ge in W)&&(B=Z(D=W[ge],ge,K),r))if(i)De[ge]=B;else if(B)switch(r){case 3:return!0;case 5:return D;case 6:return ge;case 2:G7(De,D)}else switch(r){case 4:return!1;case 7:G7(De,D)}return g?-1:c||p?p:De}},W7={forEach:RS(0),map:RS(1),filter:RS(2),some:RS(3),every:RS(4),find:RS(5),findIndex:RS(6),filterReject:RS(7)},PK=W7.forEach,K7=Uf("forEach")?[].forEach:function(r){return PK(this,r,arguments.length>1?arguments[1]:void 0)};Io({target:"Array",proto:!0,forced:[].forEach!=K7},{forEach:K7});var MK=Fd("Array").forEach,NK=Mp,xK=Os,LK=$c,BK=MK,Pj=Array.prototype,FK={DOMTokenList:!0,NodeList:!0},VK=Fl,Mj=xo;Io({target:"Object",stat:!0,forced:as(function(){Mj(1)})},{keys:function(r){return Mj(VK(r))}});var ww=Md.Object.keys,MN=a1,z7=Io,NN=PN,d3=No([].reverse),p3=[1,2];z7({target:"Array",proto:!0,forced:String(p3)===String(p3.reverse())},{reverse:function(){return NN(this)&&(this.length=this.length),d3(this)}});var TD=Fd("Array").reverse,h3=$c,f3=TD,xN=Array.prototype,Nj=as,xj=Dh,Y7=ks("species"),hu=function(r){return xj>=51||!Nj(function(){var i=[];return(i.constructor={})[Y7]=function(){return{foo:1}},1!==i[r](Boolean).foo})},ca=Io,R_=Or,Lj=PN,LN=cm,Qa=Oa,Om=Pp,jK=Cu,Bj=Pd,q7=Fa,J7=ks,Fj=TR,$7=hu("slice"),X7=J7("species"),BN=R_.Array,Z7=Math.max;ca({target:"Array",proto:!0,forced:!$7},{slice:function(r,i){var a,c,p,g=Bj(this),m=jK(g),A=Om(r,m),_=Om(void 0===i?m:i,m);if(Lj(g)&&((LN(a=g.constructor)&&(a===BN||Lj(a.prototype))||Qa(a)&&null===(a=a[X7]))&&(a=void 0),a===BN||void 0===a))return Fj(g,A,_);for(c=new(void 0===a?BN:a)(Z7(_-A,0)),p=0;A<_;A++,p++)A in g&&q7(c,p,g[A]);return c.length=p,c}});var FN=Fd("Array").slice,Tw=$c,QK=FN,UN=Array.prototype;function Kn(r,i,a,c,p){var g,m,A,_={};return function(r){var i=r.forEach;return r===Pj||LK(Pj,r)&&i===Pj.forEach||xK(FK,NK(r))?BK:i}(g=ww(c)).call(g,function(S){_[S]=c[S]}),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=MN(m=function(r){var i=r.reverse;return r===xN||h3(xN,r)&&i===xN.reverse?f3:i}(A=function(r){var i=r.slice;return r===UN||Tw(UN,r)&&i===UN.slice?QK:i}(a).call(a)).call(A)).call(m,function(S,C){return C(r,i,S)||S},_),p&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(p):void 0,_.initializer=void 0),void 0===_.initializer&&(uS(r,i,_),_=null),_}var e9=Fd("Array").values,t9=Mp,g3=Os,Uj=$c,n9=e9,VN=Array.prototype,r9={DOMTokenList:!0,NodeList:!0},O_=function(r){var i=r.values;return r===VN||Uj(VN,r)&&i===VN.values||g3(r9,t9(r))?n9:i},jN=Fd("Array").keys,HK=Mp,Vj=Os,QN=$c,_3=jN,v3=Array.prototype,A3={DOMTokenList:!0,NodeList:!0},gy=function(r){var i=r.keys;return r===v3||QN(v3,r)&&i===v3.keys||Vj(A3,HK(r))?_3:i};function y3(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function jj(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?y3(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):y3(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let HN=0,Qj=0;function cp(r,i,a){return new Un((c,p)=>{i.timeout=i.timeout||rt("HTTP_CONNECT_TIMEOUT"),i.responseType=i.responseType||"json",i.data&&!a?(i.data=JSON.stringify(i.data),HN+=xD(i.data)):a&&(i.data.size?HN+=i.data.size:i.data instanceof FormData?HN+=function(g){let m=0;return/DingTalk/i.test(navigator.userAgent)&&g.realFormData&&(g=g.realFormData),g.forEach(A=>{m+="string"==typeof A?xD(A):A.size}),m+138}(i.data):HN+=xD(JSON.stringify(i.data))),i.headers=i.headers||{},i.headers["Content-Type"]=i.headers["Content-Type"]||"application/json",i.method="POST",i.url=r,lu.request(i).then(g=>{"string"==typeof g.data?Qj+=xD(g.data):g.data instanceof ArrayBuffer||g.data instanceof Uint8Array?Qj+=g.data.byteLength:Qj+=xD(JSON.stringify(g.data)),c(g.data)}).catch(g=>{lu.isCancel(g)?p(new h(u.OPERATION_ABORTED,"cancel token canceled")):p("ECONNABORTED"===g.code?new h(u.NETWORK_TIMEOUT,g.message):g.response?new h(u.NETWORK_RESPONSE_ERROR,g.response.status):new h(u.NETWORK_ERROR,g.message))})})}function GK(r,i){return Hj.apply(this,arguments)}function Hj(){return Hj=U(function*(r,i){const a=new Blob([i.data],{type:"buffer"});return yield cp(r,jj(jj({},i),{},{data:a,headers:{"Content-Type":"application/octet-stream"}}),!0)}),Hj.apply(this,arguments)}const Ys=new class extends s{set networkState(r){O.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+r),this.emit(Aw.NETWORK_STATE_CHANGE,r,this._networkState),r===Bu.ONLINE?this.emit(Aw.ONLINE):r===Bu.OFFLINE&&(this.onlineWaiter=new Un(i=>{this.once(Aw.ONLINE,()=>{this.onlineWaiter=void 0,i(Bu.ONLINE)})}),this.emit(Aw.OFFLINE)),this._networkState=r}get networkState(){return this._networkState}constructor(){super(),q(this,"_moduleName","network-indicator"),q(this,"_networkState",Bu.ONLINE),q(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=Bu.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Bu.OFFLINE})}};let E3=!1;const ud=new class extends s{constructor(){super(...arguments),q(this,"onAutoplayFailed",void 0),q(this,"onAudioAutoplayFailed",void 0)}};function Gj(){const r=Oi();if(!E3){const i=a=>{a.preventDefault(),E3=!1,"Android"!==r.os||"Chrome"!==r.name&&r.name!==oi.WECHAT?(document.body.removeEventListener("touchstart",i,!0),document.body.removeEventListener("mousedown",i,!0)):document.body.removeEventListener("click",i,!0)};E3=!0,"Android"!==r.os||"Chrome"!==r.name&&r.name!==oi.WECHAT?(document.body.addEventListener("touchstart",i,!0),document.body.addEventListener("mousedown",i,!0)):document.body.addEventListener("click",i,!0),O.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),ud.onAutoplayFailed?ud.onAutoplayFailed():O.warning(ud.onAudioAutoplayFailed?"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .":"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),ud.emit("autoplay-failed")}}function b3(r){return(new TextEncoder).encode(r)}const S3=function(r,i){const a=new Uint8Array(r.byteLength+i.byteLength);return a.set(new Uint8Array(r),0),a.set(new Uint8Array(i),r.byteLength),a},WK=function(){var r=U(function*(i){return function(a,c){let p="";return new Uint8Array(a).forEach(g=>{p+=g.toString(16).padStart(2,"0")}),p}(yield crypto.subtle.digest("SHA-256",b3(i)))});return function(a){return r.apply(this,arguments)}}();var i9;function o9(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function Br(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?o9(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):o9(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function RD(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Gt};return function(i,a,c){const p=i[a];if("function"==typeof p){const g="AgoraRTCClient"===i.constructor.name?"Client":i.constructor.name;c.value=function(){for(var m=arguments.length,A=new Array(m),_=0;_<m;_++)A[_]=arguments[_];const S=r.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(a),options:A,tag:zn.TRACER,reportResult:r.reportResult});try{const C=p.apply(this,A);return S.onSuccess(r.reportResult&&C),C}catch(C){throw S.onError(C),C}}}return c}}function OD(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Gt};return function(i,a,c){const p=i[a];if("function"==typeof p){const g="AgoraRTCClient"===i.constructor.name?"Client":i.constructor.name;c.value=U(function*(){for(var m=arguments.length,A=new Array(m),_=0;_<m;_++)A[_]=arguments[_];const S=r.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(a),options:A,tag:zn.TRACER});try{const C=yield p.apply(this,A);return S.onSuccess(),C}catch(C){throw S.onError(C),C}})}return c}}const Gt=new(yn("AgoraRTCEventReport")(i9=class{constructor(){var r=this;q(this,"baseInfoMap",new Map),q(this,"proxyServer",void 0),q(this,"clientList",Fi),q(this,"eventUploadTimer",void 0),q(this,"setSessionIdTimer",void 0),q(this,"url",void 0),q(this,"backupUrl",void 0),q(this,"_appId",void 0),q(this,"keyEventUploadPendingItems",[]),q(this,"normalEventUploadPendingItems",[]),q(this,"apiInvokeUploadPendingItems",[]),q(this,"apiInvokeCount",0),q(this,"ltsList",[]),q(this,"lastSendNormalEventTime",Date.now()),q(this,"customReportCounterTimer",void 0),q(this,"customReportCount",0),q(this,"extApiInvoke",function(){var i=U(function*(a){for(const c of a){const p=Br(Br({},c),{},{sid:null,invokeId:++r.apiInvokeCount,tag:zn.TRACER});r.sendApiInvoke(p)}});return function(a){return i.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),rt("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),rt("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(r){if(!this.baseInfoMap.has(r)&&!this.baseInfoMap.get(r))return O.error("adjust session ".concat(r," start time, sid is not exist or info is undefined")),void Ne("error",this,"adjustSessionStartTime","adjust session ".concat(r," start time, sid is not exist or info is undefined"));const i=this.baseInfoMap.get(r),a=Date.now(),c=i.startTime;i.startTime=a,O.debug("rewrite session ".concat(r," startTime: ").concat(a," , ").concat(a-c,"ms")),Ne("debug",this,"adjustSessionStartTime",void 0,"rewrite session ".concat(r," startTime: ").concat(a," , ").concat(a-c,"ms")),this.baseInfoMap.set(r,i)}setAppId(r){this._appId=r}reportApiInvoke(r,i,a){i.timeout=i.timeout||6e4,i.reportResult=void 0===i.reportResult||i.reportResult;const c=Date.now();this.apiInvokeCount+=1;const p=this.apiInvokeCount,g=()=>({tag:i.tag,invokeId:p,sid:r,name:i.name,apiInvokeTime:c,options:i.options,states:i.states||null}),m=!!rt("SHOW_REPORT_INVOKER_LOG");m&&O.info("".concat(i.name," start"),i.options);let A=!1;ic(i.timeout).then(()=>{A||(this.sendApiInvoke(Br(Br({},g()),{},{error:u.API_INVOKE_TIMEOUT,success:!1})),O.debug("".concat(i.name," timeout")))});const _=new h(u.UNEXPECTED_ERROR,"".concat(i.name,": this api invoke is end"));return{onSuccess:S=>{const C=()=>{if(A)throw _;return A=!0,this.sendApiInvoke(Br(Br({},g()),{},{success:!0},i.reportResult&&{result:S})),m&&O.info("".concat(i.name," onSuccess")),S};return a?a5(C,i.name+"Success",a,()=>A=!0):C()},onError:S=>{const C=()=>{if(A)throw S;A=!0,this.sendApiInvoke(Br(Br({},g()),{},{success:!1,error:S})),m&&O.info("".concat(i.name," onFailure"),S.toString())};return a?a5(C,i.name+"Error",a,()=>A=!0):C()}}}sessionInit(r,i){if(this.baseInfoMap.has(r))return;const a=Date.now(),c=this.createBaseInfo(r,a);c.cname=i.cname;const p=Object.assign({},{willUploadConsoleLog:rt("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:lr?"global":"oversea",areas:rt("AREAS")&&rt("AREAS").join(",")},i.extend),g=Date.now(),m=Br(Br({},c),{},{eventType:Aa.SESSION_INIT,appid:i.appid,browser:navigator.userAgent,build:Tr,lts:g,elapse:g-a,extend:JSON.stringify(p),mode:i.mode,process:rt("PROCESS_ID"),success:!0,version:gr});this.send({type:wo.SESSION,data:m},!0)}joinChooseServer(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br({},c),{},{eventType:Aa.JOIN_CHOOSE_SERVER,lts:p,eventElapse:p-i.lts,chooseServerAddr:i.csAddr,errorCode:i.ec,elapse:p-a.startTime,success:i.succ,chooseServerAddrList:JSON.stringify(i.serverList),uid:i.uid?parseInt(i.uid):null,cid:i.cid?parseInt(i.cid):null,chooseServerIp:i.csIp||"",opid:i.opid,unilbsServerIds:i.unilbsServerIds,extend:i.extend||void 0});this.send({type:wo.JOIN_CHOOSE_SERVER,data:g},!0)}reqUserAccount(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br({},c),{},{eventType:Aa.REQ_USER_ACCOUNT,lts:p,success:i.success,serverAddress:i.serverAddr,stringUid:i.stringUid,uid:i.uid,errorCode:i.errorCode,elapse:p-a.startTime,eventElapse:p-i.lts,extend:JSON.stringify(i.extend)});this.send({type:wo.REQ_USER_ACCOUNT,data:g},!0)}joinGateway(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info;i.vid&&(c.vid=i.vid),c.uid=i.uid,c.cid=i.cid;const p=Date.now(),{firstSuccess:g,avoidJoinStartTime:m,isProxy:A,addr:_}=i,S=p-(g&&m?m:a.startTime),C=Br(Br({},c),{},{eventType:Aa.JOIN_GATEWAY,lts:p,gatewayAddr:i.addr,success:i.succ,errorCode:i.ec,elapse:S,eventElapse:p-i.lts,firstSuccess:g}),T=C.success?1:0;if(i.succ&&(a.lastJoinSuccessTime=p),g)this.send({type:wo.JOIN_GATEWAY,data:C},!0);else{let D;if(_)if(A){const K=_.match(/h=(\d{1,3}-){3}\d{1,3}/g),W=_.match(/p=[0-9]{1,6}/g);D={isSuccess:T,gatewayIp:K&&K.length?K[0].split("=")[1].replace(/-/g,"."):"",port:W&&W.length?W[0].split("=")[1]:"",isProxy:A?1:0}}else{const K=_.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),W=_.match(/:[0-9]{1,6}/g);D={isSuccess:T,gatewayIp:K&&K.length?K[0].split("//")[1].replace(/-/g,"."):"",port:W&&W.length?W[0].split(":")[1]:"",isProxy:A?1:0}}else D={isSuccess:T,gatewayIp:"",port:"",isProxy:A?1:0};delete C.success,delete C.eventType,delete C.firstSuccess,C.vid=Number(C.vid);const B=Object.assign({},C,D,{eventType:Aa.REJOIN_GATEWAY});this.send({type:wo.RE_JOIN_GATEWAY,data:B},!0)}}joinChannelTimeout(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=Date.now(),p=Br(Br({},a.info),{},{lts:c,timeout:i,elapse:c-a.startTime});this.send({type:wo.JOIN_CHANNEL_TIMEOUT,data:p},!0)}publish(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br({},c),{},{eventType:Aa.PUBLISH,lts:p,eventElapse:i.eventElapse,elapse:p-a.startTime,success:i.succ,errorCode:i.ec,videoName:i.videoName,audioName:i.audioName,screenName:i.screenName,screenshare:i.screenshare,audio:i.audio,video:i.video,p2pid:i.p2pid,publishRequestid:i.publishRequestid});this.send({type:wo.PUBLISH,data:g},!0)}subscribe(r,i,a){const c=this.baseInfoMap.get(r);if(!c)return;const p=c.info,g=Date.now(),m=Br(Br({},p),{},{eventType:Aa.SUBSCRIBE,lts:g,eventElapse:i.eventElapse,elapse:g-c.startTime,success:i.succ,errorCode:i.ec,video:i.video,audio:i.audio,subscribeRequestid:i.subscribeRequestid,p2pid:i.p2pid},a&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof i.peerid?m.peerSuid=i.peerid:m.peer=i.peerid,this.send({type:wo.SUBSCRIBE,data:m},!0)}wsCompressorInit(r){var i;const a=[...gy(i=this.baseInfoMap).call(i)],p=this.baseInfoMap.get(a.length?a[0]:"UnableToGetSid");if(!p)return;const g=p.info,m=Date.now(),A=Br(Br({},g),{},{eventType:Aa.WS_COMPRESSOR_INIT,lts:m,eventElapse:r.eventElapse,elapse:m-p.startTime,status:r.status?1:2});this.send({type:wo.WS_COMPRESSOR_INIT,data:A},!0)}firstRemoteFrame(r,i,a,c){const p=this.baseInfoMap.get(r);if(!p)return;const g=p.info,m=Date.now(),A=Br(Br(Br({},g),c),{},{elapse:m-p.startTime,eventType:i,lts:m});this.send({type:a,data:A},!0)}onGatewayStream(r,i,a,c){const p=this.baseInfoMap.get(r);if(!p)return;const g=p.info,m=Date.now(),A=Br(Br(Br({},g),c),{},{eventType:i,lts:m});this.send({type:a,data:A},!0)}streamSwitch(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br({},c),{},{eventType:Aa.STREAM_SWITCH,lts:p,isDual:i.isdual,elapse:p-a.startTime,success:i.succ});this.send({type:wo.STREAM_SWITCH,data:g},!0)}requestProxyAppCenter(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br({},c),{},{eventType:Aa.REQUEST_PROXY_APPCENTER,lts:p,eventElapse:p-i.lts,elapse:p-a.startTime,APAddr:i.APAddr,workerManagerList:i.workerManagerList,response:i.response,errorCode:i.ec,success:i.succ});this.send({type:wo.REQUEST_PROXY_APPCENTER,data:g},!0)}requestProxyWorkerManager(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br({},c),{},{eventType:Aa.REQUEST_PROXY_WORKER_MANAGER,lts:p,eventElapse:p-i.lts,elapse:p-a.startTime,workerManagerAddr:i.workerManagerAddr,response:i.response,errorCode:i.ec,success:i.succ});this.send({type:wo.REQUEST_PROXY_WORKER_MANAGER,data:g},!0)}setProxyServer(r){this.proxyServer=r,O.debug(r?"reportProxyServerurl: ".concat(r):"disable reportProxyServerurl: ".concat(r)),Ne("debug",this,"setProxyServer",r)}peerPublishStatus(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br({},c),{},{subscribeElapse:i.subscribeElapse,peer:i.peer,peerPublishDuration:Math.max(i.audioPublishDuration,i.videoPublishDuration),audiotag:i.audioPublishDuration>0?1:-1,videotag:i.videoPublishDuration>0?1:-1,lts:p,elapse:p-a.startTime,joinChannelSuccessElapse:p-(a.lastJoinSuccessTime||p)});this.send({type:wo.PEER_PUBLISH_STATUS,data:g},!0)}workerEvent(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now();(function(g,m,A){const _=g[m];if(!_||"string"!=typeof _)return[g];g[m]="";const S=xD(JSON.stringify(g));let C=0;const T=[];let D=0;for(let B=0;B<_.length;B++)D+=_.charCodeAt(B)<=127?1:3,D<=1300-S||(T[T.length]=Pw(Pw({},g),{},{[m]:_.substring(C,B)}),C=B,D=_.charCodeAt(B)<=127?1:3);return C!==_.length-1&&(T[T.length]=Pw(Pw({},g),{},{[m]:_.substring(C)})),T})(Br(Br(Br({},c),i),{},{elapse:p-a.startTime,lts:p,productType:"WebRTC"}),"payload").forEach(g=>this.send({type:wo.WORKER_EVENT,data:g},!0))}apworkerEvent(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br(Br({},c),i),{},{elapse:p-a.startTime,lts:p});this.send({type:wo.AP_WORKER_EVENT,data:g},!0)}joinWebProxyAP(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br(Br({},c),i),{},{elapse:p-a.startTime,lts:p,extend:i.extend||void 0});this.send({type:wo.JOIN_WEB_PROXY_AP,data:g},!0)}WebSocketQuit(r,i){const a=this.baseInfoMap.get(r);if(!a)return;const c=a.info,p=Date.now(),g=Br(Br(Br({},c),i),{},{elapse:p-a.startTime,lts:p});this.send({type:wo.WEBSOCKET_QUIT,data:g},!0)}sendCustomReportMessage(r,i){var a=this;return U(function*(){if(a.customReportCount+=i.length,a.customReportCount>rt("CUSTOM_REPORT_LIMIT"))throw new h(u.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);a.customReportCounterTimer||(a.customReportCounterTimer=window.setInterval(()=>{a.customReportCount=0},5e3));const c=i.map(p=>({type:wo.USER_ANALYTICS,data:Br({sid:r},p)}));try{rt("NEW_REPORT_SERVER")?yield a.postDataToStatsCollector2(c):yield a.postDataToStatsCollector(c)}catch(p){throw O.error("send custom report message failed",p.toString()),new h(u.CUSTOM_REPORT_SEND_FAILED,p.message)}})()}autoplayFailed(r,i,a,c){if(!r)return;const p=this.baseInfoMap.get(r);if(!p)return;const g=p.info,m=Date.now(),A=Br(Br({},g),{},{vid:void 0===g.vid?0:Number(g.vid),lts:m,elapse:m-p.startTime,cbRegistered:ud.onAutoplayFailed||ud.onAudioAutoplayFailed?1:-1,errorMsg:a,mediaType:i,trackId:c,extend:void 0});this.send({type:wo.AUTOPLAY_FAILED,data:A},!0)}sendApiInvoke(r){const i=rt("NOT_REPORT_EVENT");if(r.tag&&i.includes&&i.includes(r.tag))return!1;if(null===r.sid)return this.apiInvokeUploadPendingItems.push(r),!1;const a=this.baseInfoMap.get(r.sid);if(!a)return this.apiInvokeUploadPendingItems.push(r),!1;const{cname:c,uid:p,cid:g}=a.info;let m;if(r.lts=r.lts||Date.now(),r.error)if(r.error instanceof h){const{code:_,message:S}=r.error;m=_||S||r.error.toString()}else m=r.error.toString();const A={invokeId:r.invokeId,sid:r.sid,cname:c,cid:g,uid:p,lts:r.lts,success:r.success,elapse:r.lts-a.startTime,execElapse:r.lts-r.apiInvokeTime,apiName:r.name,options:r.options?JSON.stringify(r.options):void 0,execStates:r.states?JSON.stringify(r.states):void 0,execResult:r.result?JSON.stringify(r.result):void 0,errorCode:r.error?m:void 0,errorMsg:r.error?JSON.stringify(r.error):void 0};return this.send({type:wo.API_INVOKE,data:A},!1),!0}appendSessionId(){this.clientList.forEach(r=>{if(r._sessionId){const i=this.apiInvokeUploadPendingItems.length;for(let a=0;a<i;a++){const c=this.apiInvokeUploadPendingItems.shift();c&&(c.sid=r._sessionId,this.sendApiInvoke(Object.assign({},c)))}}})}send(r,i){if(i)return this.keyEventUploadPendingItems.push(r),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(r),this.normalEventUploadPendingItems.length>rt("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(r,i){const a=[],c=[];for(;r.length;){const g=r.shift();a.length<20?a.push(g):c.push(g)}r.push(...c);for(const g of[...a]){var p;-1!==this.ltsList.indexOf(g.data.lts)?(g.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(g.data.lts)):(this.ltsList.push(g.data.lts),yF(p=this.ltsList).call(p,(m,A)=>m-A))}return i||(this.lastSendNormalEventTime=Date.now()),a.length&&(rt("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(a):this.postDataToStatsCollector(a)).catch((g=>m=>{rt("EVENT_REPORT_RETRY")&&(i?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(g):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(g),this.normalEventUploadPendingItems.length>rt("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-rt("NORMAL_EVENT_QUEUE_CAPACITY")),O.warning("report: drop normal events"))))})(a)),r}postDataToStatsCollector2(r){var i=this;return U(function*(){Ys.networkState===Bu.OFFLINE&&(yield Un.race([Ys.onlineWaiter,ic(2*v.maxRetryTimeout)]));const a=g=>{let m=new Uint8Array;return g.forEach(A=>{const _=b3(JSON.stringify(A.data)),S=new ArrayBuffer(5),C=(D=>{let B=0;return Object.entries(wo).forEach(K=>{let[W,Z]=K;Z===D.type&&(B=sN[W])}),B})(A),T=new DataView(S);T.setUint16(0,_.byteLength,!0),T.setUint8(2,255&C),T.setUint8(3,C>>>8&255),T.setUint8(4,C>>>16&255),m=S3(m,new Uint8Array(S)),m=S3(m,_)}),m},c="event";let p=i.proxyServer?"https://".concat(i.proxyServer,"/rs/?h=").concat(rt("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(c):"https://".concat(rt("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(c);for(let g=0;g<2;g+=1){1===g&&(p=i.proxyServer?"https://".concat(i.proxyServer,"/rs/?h=").concat(rt("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(c):"https://".concat(rt("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(c));try{yield cp(p,{timeout:1e4,data:a(r),headers:{token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false",appid:i._appId,"Content-Type":"application/octet-stream"}},!0)}catch(m){if(1===g)throw m;continue}return}})()}postDataToStatsCollector(r){var i=arguments,a=this;return U(function*(){let c=i.length>1&&void 0!==i[1]&&i[1];const p={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:r.map(A=>JSON.stringify(A)),vid:(A=>{const _=A&&A.data.sid&&a.baseInfoMap.get(A.data.sid);return _&&_.info.vid&&+_.info.vid||0})(r[0])};Ys.networkState===Bu.OFFLINE&&(yield Un.race([Ys.onlineWaiter,ic(2*v.maxRetryTimeout)]));const g=c?"/events/proto-raws":"/events/messages";let m=a.url||(a.proxyServer?"https://".concat(a.proxyServer,"/rs/?h=").concat(rt("EVENT_REPORT_DOMAIN"),"&p=").concat(rt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(rt("EVENT_REPORT_DOMAIN"),":").concat(rt("STATS_COLLECTOR_PORT")).concat(g));for(let A=0;A<2;A+=1){1===A&&(m=a.backupUrl||(a.proxyServer?"https://".concat(a.proxyServer,"/rs/?h=").concat(rt("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(rt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(rt("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(rt("STATS_COLLECTOR_PORT")).concat(g)));try{c?yield GK(m,{timeout:1e4,data:p}):yield cp(m,{timeout:1e4,data:p})}catch(_){if(1===A)throw _;continue}return}})()}createBaseInfo(r,i){const a=Object.assign({},R4);return a.sid=r,this.baseInfoMap.set(r,{info:a,startTime:i}),a}reportResourceTiming(r,i){const a=performance.getEntriesByName(r),c=a[a.length-1];c&&this.reportApiInvoke(i,{name:"Client.resourceTiming",options:c,tag:zn.TRACER}).onSuccess()}})||i9);l.on("REPORT_LOG_UPLOAD",r=>{r.networkState=Ys.networkState,Gt.reportApiInvoke(null,{name:"logUploadError",options:r,tag:zn.TRACER})});class s9 extends s{constructor(i,a){super(),q(this,"trackMediaType",void 0),q(this,"_ID",void 0),q(this,"_hints",[]),q(this,"_isClosed",!1),q(this,"_originMediaStreamTrack",void 0),q(this,"_mediaStreamTrack",void 0),q(this,"_external",{}),this._ID=a||ns(8,"track-"),this._originMediaStreamTrack=i,this._mediaStreamTrack=i,Vo.includes(this)||Vo.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(i){if(!i){Gt.reportApiInvoke(null,{name:Xn.GET_MEDIA_STREAM_TRACK,options:[],tag:zn.TRACER}).onSuccess(this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?this._mediaStreamTrack.label:"")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(i){const a=Vo.indexOf(i);-1!==a&&Vo.splice(a,1)}(this),this.emit(op.CLOSED)}}let qs,Wj,a9,KK=1;class fu{constructor(i){q(this,"lockingPromise",Un.resolve()),q(this,"locks",0),q(this,"name",""),q(this,"lockId",void 0),this.lockId=KK++,i&&(this.name=i),O.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(i){let a;this.locks+=1,O.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof i?i:""));const c=new Un(g=>{a=()=>{this.locks-=1,O.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof i?i:"")),g()}}),p=this.lockingPromise.then(()=>a);return this.lockingPromise=this.lockingPromise.then(()=>c),p}}function _y(r,i){return function(a,c,p){const g=a[c];if("function"!=typeof g)throw new Error("Cannot use mutex on object property.");return p.value=U(function*(){const m=this[i];if(!m)throw new Error("mutex property key ".concat(i," doesn't exist on ").concat(r));const A=yield m.lock("From ".concat(r,".").concat(c));try{for(var _=arguments.length,S=new Array(_),C=0;C<_;C++)S[C]=arguments[C];return yield g.apply(this,S)}finally{A()}}),p}}class C3 extends s9{get muted(){return this._muted}get enabled(){return this._enabled}constructor(i,a){super(i,a),q(this,"_enabled",!0),q(this,"_muted",!1),q(this,"_isClosed",!1),q(this,"_trackProcessors",[]),q(this,"_enabledMutex",void 0),q(this,"processor",void 0),q(this,"processorContext",void 0),q(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new fu("".concat(a)),i.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){return this._originMediaStreamTrack.label}close(){this._isClosed||(this.stop(),this._trackProcessors.forEach(i=>i.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,O.debug("[".concat(this.getTrackId(),"] close")),Ne("debug",this,"close"),this.emit(nr.NEED_CLOSE),super.close())}_registerTrackProcessor(i){var a=this;return U(function*(){if(-1!==a._trackProcessors.indexOf(i))return;const c=a._trackProcessors[a._trackProcessors.length-1];a._trackProcessors.push(i),i.onOutputChange=U(function*(){a._mediaStreamTrack=i.output||a._originMediaStreamTrack,a._updatePlayerSource(),yield Ro(a,nr.NEED_REPLACE_TRACK,a)}),c?(c.onOutputChange=U(function*(){c.output&&(yield i.setInput(c.output))}),yield i.setInput(c.output||c.input||a._originMediaStreamTrack)):yield i.setInput(a._originMediaStreamTrack)})()}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const i=this._trackProcessors[this._trackProcessors.length-1];return i.output||i.input||this._originMediaStreamTrack}_updateOriginMediaStreamTrack(i,a){var c=this;return U(function*(){if(i!==c._originMediaStreamTrack){if(c._originMediaStreamTrack.removeEventListener("ended",c._handleTrackEnded),a&&c._originMediaStreamTrack.stop(),i.addEventListener("ended",c._handleTrackEnded),c._originMediaStreamTrack=i,c._trackProcessors.length>0){yield c._trackProcessors[0].setInput(i);const p=c._getOutputFromProcessors();c._mediaStreamTrack=p}else c._mediaStreamTrack=c._originMediaStreamTrack;c._updatePlayerSource(),yield Ro(c,nr.NEED_REPLACE_TRACK,c),c.processor&&c.processor.updateInput({track:c._originMediaStreamTrack,context:c.processorContext})}})()}_getDefaultPlayerConfig(){return{}}onTrackEnded(){O.debug("[".concat(this.getTrackId(),"] track ended")),st("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(op.TRACK_ENDED)}stateCheck(i,a){if(O.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(i,": ").concat(a,"]")),Ne("debug",this,"stateCheck",{stateName:i,state:a,muted:this._muted,enabled:this._enabled}),Xh(a,i),this._enabled&&this._muted&&"enabled"===i&&!1===a)throw new h(u.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===i&&!0===a)throw new h(u.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}}(function(r){r.IOS_15_INTERRUPTION_START="ios15-interruption-start",r.IOS_15_INTERRUPTION_END="ios15-interruption-end",r.IOS_INTERRUPTION_START="ios-interruption-start",r.IOS_INTERRUPTION_END="ios-interruption-end",r.STATE_CHANGE="state-change"})(qs||(qs={})),function(r){r.AUDIO_CONTEXT_CREATED="audio_context_created"}(Wj||(Wj={})),function(r){r.AIDenoiser="AIDenoiser"}(a9||(a9={}));const I3={audioContextInitOptions:{}},DD=new class extends s{constructor(){super(),q(this,"registeredPlugins",[])}setOptions(r,i){I3[r]&&(I3[r]=i)}getOptions(r){return I3[r]}installPlugin(r){r instanceof Object&&r.name&&this.registeredPlugins.push(r.name)}},OS=window.AudioContext||window.webkitAudioContext;let ld=null;const Fr=new class extends s{constructor(){var r;super(...arguments),r=this,q(this,"prevState",void 0),q(this,"curState",void 0),q(this,"currentTime",void 0),q(this,"currentTimeStuckAt",void 0),q(this,"interruptDetectorTrack",void 0),q(this,"onLocalAudioTrackMute",()=>{O.info("ios15-interruption-start"),He("info",["WebAudio"],"ios15-interruption-start"),this.emit(qs.IOS_15_INTERRUPTION_START)}),q(this,"onLocalAudioTrackUnmute",U(function*(){O.info("ios15-interruption-end"),He("info",["WebAudio"],"ios15-interruption-end"),"running"!==r.curState||r.duringInterruption?O.info("ios15-interruption-end-canceled"):(ld&&(yield ld.suspend()),r.emit(qs.IOS_15_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(r){O.debug("webaudio bindInterruptDetectorTrack ".concat(r.getTrackId())),Ne("debug",["WebAudio"],"bindInterruptDetectorTrack",r.getTrackId()),this.interruptDetectorTrack||(this.interruptDetectorTrack=r,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(r){O.debug("webaudio unbindInterruptDetectorTrack ".concat(r.getTrackId())),Ne("debug",["WebAudio"],"unbindInterruptDetectorTrack",r.getTrackId()),this.interruptDetectorTrack&&this.interruptDetectorTrack===r&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function kD(){if(!ld){if(function c9(){if(!OS)return O.error("your browser is not support web audio"),void _e("error",["WebAudio"],"your browser is not support web audio");O.info("create audio context"),Jt("info",["WebAudio"],"WebAudioContext");const r=DD.getOptions("audioContextInitOptions");O.debug("audio content init option:",JSON.stringify(r)),ld=new OS(r),DD.emit(Wj.AUDIO_CONTEXT_CREATED,ld),Fr.curState=ld.state,ld.onstatechange=()=>{Fr.prevState=Fr.curState,Fr.curState=ld?ld.state:void 0,(Ho()||Jp())&&"running"===Fr.prevState&&"interrupted"===Fr.curState&&(O.info("ios-interruption-start"),He("info",["AudioState"],"ios-interruption-start"),Fr.emit(qs.IOS_INTERRUPTION_START)),(Ho()||Jp())&&"interrupted"===Fr.prevState&&"running"===Fr.curState&&(O.info("ios-interruption-end"),He("info",["AudioState"],"ios-interruption-end"),Fr.emit(qs.IOS_INTERRUPTION_END)),Fr.prevState!==Fr.curState&&(O.debug("AudioContext State Change","".concat(Fr.prevState,"=>").concat(Fr.curState)),st("debug",["AudioContext",void 0],"statechange","".concat(Fr.prevState,"=>").concat(Fr.curState)),Fr.emit(qs.STATE_CHANGE))},setInterval(()=>{var i;const a=null===(i=ld)||void 0===i?void 0:i.currentTime;Fr.currentTime!==a?(Fr.currentTimeStuckAt&&(O.debug("AudioContext current time resume at ".concat(a)),Fr.currentTimeStuckAt=void 0),Fr.currentTime=a):(a!==Fr.currentTimeStuckAt&&O.warning("AudioContext current time stuck at ".concat(a)),Fr.currentTimeStuckAt=a)},5e3),function(){var i=U(function*(a){const c=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let p,g=!1,m=!1,A=!1;function _(de){"running"===a.state?S(!1):Ho()||Jp()?"suspended"===a.state&&(S(!0),de&&a.resume().then(T,T)):"closed"!==a.state&&(S(!0),de&&a.resume().then(T,T))}function S(de){if(g!==de){g=de;for(let ge=0,Se=c;ge<Se.length;ge+=1){const De=Se[ge];de?window.addEventListener(De,D,{capture:!0,passive:!0}):window.removeEventListener(De,D,{capture:!0,passive:!0})}}}function T(){_(!1)}function D(){_(!0)}function B(de){if(!A)if(p.paused)if(de){let ge;K(!1),A=!0;try{ge=p.play(),ge?ge.then(W,W):(p.addEventListener("playing",W),p.addEventListener("abort",W),p.addEventListener("error",W))}catch{W()}}else K(!0);else K(!1)}function K(de){if(m!==de){m=de;for(let ge=0,Se=c;ge<Se.length;ge++){const De=Se[ge];de?window.addEventListener(De,Z,{capture:!0,passive:!0}):window.removeEventListener(De,Z,{capture:!0,passive:!0})}}}function W(){p.removeEventListener("playing",W),p.removeEventListener("abort",W),p.removeEventListener("error",W),A=!1,B(!1)}function Z(){B(!0)}if(Ho()){const de=a.createMediaStreamDestination(),ge=document.createElement("div");ge.innerHTML="<audio x-webkit-airplay='deny'></audio>",p=ge.children.item(0),p.controls=!1,p.disableRemotePlayback=!0,p.preload="auto",p.srcObject=de.stream,B(!0)}Fr.on(qs.STATE_CHANGE,function C(){_(!0)}),_(!1)});return function(a){return i.apply(this,arguments)}}()(ld)}(),!ld)throw new h(u.NOT_SUPPORTED,"can not create audio context");return ld}return ld}function PD(r){if(function(){if(null!==MD)return MD;const c=kD(),p=c.createBufferSource(),g=c.createGain(),m=c.createGain();p.connect(g),p.connect(m),p.disconnect(g);let A=!1;try{p.disconnect(g)}catch{A=!0}return p.disconnect(),MD=A,A}())return;Ne("debug",["WebAudio"],"polyfillAudioNode");const i=r.connect,a=r.disconnect;r.connect=(c,p,g)=>(r._inputNodes||(r._inputNodes=[]),r._inputNodes.includes(c)||(c instanceof AudioNode?(r._inputNodes.push(c),i.call(r,c,p,g)):i.call(r,c,p)),r),r.disconnect=(c,p,g)=>{a.call(r),c?F3(r._inputNodes,c):r._inputNodes=[];for(const m of r._inputNodes)i.call(r,m)}}let MD=null;function Kj(r,i){const a=1/i,c=kD();let p=c.createGain();p.gain.value=0,p.connect(c.destination);let g=!1;const m=()=>{if(g)return void(p=null);const A=c.createOscillator();A.onended=m,A.connect(p),A.start(0),A.stop(c.currentTime+a),r(c.currentTime)};return m(),()=>{g=!0}}const vy=O.prefix("[inject-node]");class GN{constructor(){q(this,"nodeLists",[]),q(this,"prevNode",void 0),q(this,"nextNode",void 0)}get firstNode(){return this.nodeLists[0]}get lastNode(){return this.nodeLists[this.nodeLists.length-1]}get isActive(){return!!this.nodeLists.length}get isConnected(){return!(!this.prevNode||!this.nextNode)}connect(i,a){vy.debug("connect audio node, current list:"+this.nodeLists.length),this.nodeLists.length?(this.prevNode&&this.prevNode.disconnect(),i.connect(this.firstNode),this.nextNode&&this.lastNode&&this.lastNode.disconnect(),this.lastNode.connect(a),this.nodeLists.forEach((c,p)=>{const g=this.nodeLists[p+1];g&&c.connect(g)})):i.connect(a),this.nextNode=a,this.prevNode=i}disconnect(){var i;vy.debug("disconnect audio node, current list:"+this.nodeLists.length),this.nodeLists.forEach(a=>{a.disconnect()}),null===(i=this.prevNode)||void 0===i||i.disconnect(),this.prevNode=void 0,this.nextNode=void 0}addNode(i){vy.debug("add node in inject node, current list:",this.nodeLists.length),this.prevNode&&this.nextNode?(this.firstNode||(vy.debug("new node is the first node"),this.prevNode.disconnect(),this.prevNode.connect(i),i.connect(this.nextNode)),this.nextNode&&this.lastNode&&(this.lastNode.disconnect(this.nextNode),this.lastNode.connect(i),i.connect(this.nextNode)),this.nodeLists.push(i)):vy.debug("add node is called before inject node connected")}removeNode(i){vy.debug("remove node in inject node, current list:",this.nodeLists.length);const a=this.nodeLists.indexOf(i);if(-1===a)return void vy.debug("$[inject-node] cannot find the node to be removed");const c=this.nodeLists[a+1],p=this.nodeLists[a-1];0===a&&this.prevNode&&this.nextNode&&(this.prevNode.disconnect(i),this.prevNode.connect(c||this.nextNode)),a===this.nodeLists.length-1&&this.nextNode&&p&&(p.disconnect(i),p.connect(this.nextNode)),0!==a&&a!==this.nodeLists.length-1&&(p.disconnect(i),p.connect(c)),vy.debug("remove node in inject node success, current list:",this.nodeLists.length)}}class WN extends s{get processSourceNode(){return this.sourceNode}set processedNode(i){var a;if(!this.isDestroyed&&this._processedNode!==i){try{var c;null===(c=this.sourceNode)||void 0===c||c.disconnect(this.outputNode)}catch{}null===(a=this._processedNode)||void 0===a||a.disconnect(),this._processedNode=i,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),q(this,"outputNode",void 0),q(this,"outputTrack",void 0),q(this,"isPlayed",!1),q(this,"sourceNode",void 0),q(this,"analyserNode",void 0),q(this,"context",void 0),q(this,"audioBufferNode",void 0),q(this,"destNode",void 0),q(this,"injectNode",void 0),q(this,"audioOutputLevel",0),q(this,"_processedNode",void 0),q(this,"playNode",void 0),q(this,"isDestroyed",!1),q(this,"onNoAudioInput",void 0),q(this,"isNoAudioInput",!1),q(this,"_noAudioInputCount",0),this.context=kD(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),PD(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048,this.injectNode=new GN}startGetAudioBuffer(i){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(i),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=a=>{this.emit(Bc.ON_AUDIO_BUFFER,function(c){for(let p=0;p<c.outputBuffer.numberOfChannels;p+=1){const g=c.outputBuffer.getChannelData(p);for(let m=0;m<g.length;m+=1)g[m]=0}return c.inputBuffer}(a))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Uc().webAudioMediaStreamDest)throw new h(u.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(i){"running"!==this.context.state&&th(()=>{Fr.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=i||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||Ho()||Jp()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const i=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(i);let a=0;for(let c=0;c<i.length;c++)a+=c<64?Math.abs(10*i[c]):Math.abs(6*i[c]/15);return a/i.length/255}checkHasAudioInput(){var i=arguments,a=this;return U(function*(){let c=i.length>0&&void 0!==i[0]?i[0]:0;if(c>5)return a.isNoAudioInput=!0,a.onNoAudioInput&&a.onNoAudioInput(),!1;if(Ho()||Jp()?"suspended"===a.context.state&&a.context.resume():"running"!==a.context.state&&a.context.resume(),!a.analyserNode)return!1;const p=new Uint8Array(a.analyserNode.frequencyBinCount);a.analyserNode.getByteFrequencyData(p);let g=!1;for(let m=0;m<p.length;m++)0!==p[m]&&(g=!0);return g?(a.isNoAudioInput=!1,!0):(yield ic(200),(yield a.checkHasAudioInput(c?c+1:1))&&g)})()}getAudioVolume(){return this.outputNode.gain.value}setVolume(i){this.outputNode.gain.setValueAtTime(i,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}injectAudioNode(i){this.injectNode.addNode(i)}removeAudioNode(i){this.injectNode.removeNode(i)}disconnect(){var i,a;null===(i=this.processedNode)||void 0===i||i.disconnect(),null===(a=this.sourceNode)||void 0===a||a.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var i;this.processedNode?null===(i=this.processedNode)||void 0===i||i.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class u9 extends WN{get isFreeze(){return!1}constructor(i,a){var c,p;if(super(),c=this,q(this,"sourceNode",void 0),q(this,"track",void 0),q(this,"audioElement",void 0),q(this,"isCurrentTrackCloned",!1),q(this,"isRemoteTrack",!1),q(this,"rebuildWebAudio",U(function*(){if(O.debug("ready to rebuild web audio, state:",c.context.state),c.isNoAudioInput&&(yield c.checkHasAudioInput()),!c.isNoAudioInput||c.isDestroyed)return document.body.removeEventListener("click",c.rebuildWebAudio,!0),void O.debug("rebuild web audio success, current volume status",c.getAccurateVolumeLevel());c.context.resume().then(()=>O.info("resume success")),O.debug("rebuild web audio because of ios 12 bugs"),c.disconnect();const A=c.track;c.track=c.track.clone(),c.isCurrentTrackCloned?A.stop():c.isCurrentTrackCloned=!0;const _=new MediaStream([c.track]);c.sourceNode=c.context.createMediaStreamSource(_),PD(c.sourceNode),c.analyserNode=c.context.createAnalyser();const S=c.outputNode.gain.value;c.outputNode=c.context.createGain(),c.outputNode.gain.setValueAtTime(S,c.context.currentTime),PD(c.outputNode),c.emit(Bc.UPDATE_SOURCE),c.connect(),c.audioElement.srcObject=_,c.isPlayed&&c.play(c.playNode),c.checkHasAudioInput()})),"audio"!==i.kind)throw new h(u.UNEXPECTED_ERROR);this.track=i;const g=new MediaStream([this.track]);this.isRemoteTrack=!!a,this.sourceNode=this.context.createMediaStreamSource(g),PD(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=g;const m=Oi();a&&m.os===Ei.IOS&&Number(null===(p=m.osVersion)||void 0===p?void 0:p.split(".")[0])<15&&(Fr.on(qs.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(A=>{A||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(i){this.sourceNode.disconnect(),this.track=i,this.isCurrentTrackCloned=!1;const a=new MediaStream([i]);this.sourceNode=this.context.createMediaStreamSource(a),PD(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Bc.UPDATE_SOURCE),this.audioElement.srcObject=a}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),Fr.off("state-change",this.rebuildWebAudio),super.destroy()}}function w3(r,i){return KN.apply(this,arguments)}function KN(){return KN=U(function*(r,i){const a=(p,g)=>p?"number"!=typeof p?p.max||p.exact||p.ideal||p.min||g:p:g,c={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:r,maxHeight:a(i.height,1080),maxWidth:a(i.width,1920)}}};return i.frameRate&&"number"!=typeof i.frameRate?(c.video.mandatory.maxFrameRate=i.frameRate.max,c.video.mandatory.minFrameRate=i.frameRate.min):"number"==typeof i.frameRate&&(c.video.mandatory.maxFrameRate=i.frameRate),yield navigator.mediaDevices.getUserMedia(c)}),KN.apply(this,arguments)}function T3(r){return zN.apply(this,arguments)}function zN(){return zN=U(function*(r){const i=yield zj(r.mediaSource),a=yield(c=i,new Un((p,g)=>{const m=document.createElement("div");m.innerText="share screen",m.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const A=document.createElement("div");A.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const _=document.createElement("div");_.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",_.setAttribute("style","height: 12%;");const S=document.createElement("div");S.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const C=document.createElement("div");C.setAttribute("style","text-align: right; padding: 16px 0;");const T=document.createElement("button");T.innerHTML="cancel",T.setAttribute("style","width: 85px;"),T.onclick=()=>{document.body.removeChild(D);const B=new Error("NotAllowedError");B.name="NotAllowedError",g(B)},C.appendChild(T),A.appendChild(_),A.appendChild(S),A.appendChild(C);const D=document.createElement("div");D.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),D.appendChild(m),D.appendChild(A),document.body.appendChild(D),c.map(B=>{if(B.id){const K=document.createElement("div");K.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let W=B.thumbnail;const{width:Z}=W.getSize();Z>1920&&(W=W.resize({width:1920})),K.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+W.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+B.name.replace(/[\u00A0-\u9999<>\&]/g,function(de){return"&#"+de.charCodeAt(0)+";"})+"</span>",K.onclick=()=>{document.body.removeChild(D),p(B.id)},S.appendChild(K)}})}));var c;return yield w3(a,r)}),zN.apply(this,arguments)}function zj(r){return R3.apply(this,arguments)}function R3(){return R3=U(function*(r){let i=["window","screen"];"application"!==r&&"window"!==r||(i=["window"]),"screen"===r&&(i=["screen"]);const a=Yj();if(!a)throw new h(u.ELECTRON_IS_NULL);let c=null;try{c=a.desktopCapturer.getSources({types:i})}catch{c=null}c&&c.then||(c=new Un((p,g)=>{a.desktopCapturer.getSources({types:i},(m,A)=>{m?g(m):p(A)})}));try{return yield c}catch(p){throw new h(u.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,p.toString())}}),R3.apply(this,arguments)}let YN=null;function Yj(){if(YN)return YN;try{return YN=window.require("electron"),YN}catch{return null}}const O3=new fu("safari");let DS=!1,l9=!1;function Uu(r,i){return qN.apply(this,arguments)}function qN(){return qN=U(function*(r,i){let a=0,c=null;for(;a<2;)try{c=yield zK(r,i,a>0);break}catch(p){if(p instanceof h)throw O.error("[".concat(i,"] ").concat(p.toString())),Ne("error",[],"getLocalStream",{config:r,id:i},p.toString()),p;const g=JN(p.name||p.code||p,p.message);if(g.code===u.MEDIA_OPTION_INVALID){O.debug("[".concat(i,"] detect media option invalid, retry")),_e("debug",[],"[".concat(i,"] detect media option invalid, retry")),a+=1,yield ic(500);continue}throw O.error("[".concat(i,"] ").concat(g.toString())),Ne("error",[],"getLocalStream",{config:r,id:i},g.toString()),g}if(!c)throw new h(u.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return c}),qN.apply(this,arguments)}function zK(r,i,a){return qj.apply(this,arguments)}function qj(){return qj=U(function*(r,i,a){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new h(u.NOT_SUPPORTED,"can not find getUserMedia");a&&(r.video&&(delete r.video.width,delete r.video.height),r.screen&&(delete r.screen.width,delete r.screen.height));const c=Uc(),p=new MediaStream;if(r.audioSource&&p.addTrack(r.audioSource),r.videoSource&&p.addTrack(r.videoSource),!r.audio&&!r.video&&!r.screen)return O.debug("Using Video Source/ Audio Source"),_e("debug",[],"Using Video Source/ Audio Source"),p;if(r.screen)if(Yj())Ow(p,r.screen.sourceId?yield w3(r.screen.sourceId,r.screen):yield T3(r.screen));else if(iy()&&r.screen.extensionId&&r.screen.mandatory){if(!c.getStreamFromExtension)throw new h(u.NOT_SUPPORTED,"This browser does not support screen sharing");O.debug("[".concat(i,'] Screen access on chrome stable, looking for extension"')),_e("debug",[],"[".concat(i,'] Screen access on chrome stable, looking for extension"'));const T=yield(g=r.screen.extensionId,m=i,new Un((D,B)=>{try{chrome.runtime.sendMessage(g,{getStream:!0},K=>{if(!K||!K.streamId)return O.error("[".concat(m,"] No response from Chrome Plugin. Plugin not installed properly"),K),Ne("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:m},"No response from Chrome Plugin. Plugin not installed properly, ".concat(K)),void B(new h(u.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));D(K.streamId)})}catch(K){O.error("[".concat(m,"] AgoraRTC screensharing plugin is not accessible(").concat(g,")"),K.toString()),Ne("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:m},"AgoraRTC screensharing plugin is not accessible(".concat(g,"), ").concat(K.toString())),B(new h(u.CHROME_PLUGIN_NOT_INSTALL))}}));r.screen.mandatory.chromeMediaSourceId=T,Ow(p,yield navigator.mediaDevices.getUserMedia({video:{mandatory:r.screen.mandatory}}))}else if(c.getDisplayMedia){r.screen.mediaSource&&hD(r.screen.mediaSource);const T={width:r.screen.width,height:r.screen.height,frameRate:r.screen.frameRate,displaySurface:"screen"===r.screen.mediaSource?"monitor":r.screen.mediaSource};O.debug("[".concat(i,"] getDisplayMedia:"),JSON.stringify({video:T,audio:!!r.screenAudio})),Jt("debug",["mediaDevices",i],"getDisplayMedia",{video:T,audio:!!r.screenAudio,trackId:i}),Ow(p,yield navigator.mediaDevices.getDisplayMedia({video:T,audio:!!r.screenAudio}))}else{if(!Uo())throw O.error("[".concat(i,"] This browser does not support screenSharing")),new h(u.NOT_SUPPORTED,"This browser does not support screen sharing");{r.screen.mediaSource&&hD(r.screen.mediaSource);const T={video:{mediaSource:r.screen.mediaSource,width:r.screen.width,height:r.screen.height,frameRate:r.screen.frameRate}};O.debug("[".concat(i,"] getUserMedia: ").concat(JSON.stringify(T))),Jt("debug",["mediaDevices",i],"getUserMedia",T),Ow(p,yield navigator.mediaDevices.getUserMedia(T))}}var g,m;if(!r.video&&!r.audio)return p;let A={video:r.video,audio:r.audio},_=rt("MEDIA_DEVICE_CONSTRAINTS");if(_)try{"string"==typeof _&&(_=JSON.parse(_)),A=function T(D,B){if(!F9(D)||!F9(B)||Array.isArray(D)&&!Array.isArray(B)||!Array.isArray(D)&&Array.isArray(B))return B;if(Array.isArray(B)&&Array.isArray(D)){const K=[...D];for(let W=0;W<B.length;W++)K[W]=T(D[W],B[W]);return K}{const K=Pw({},D);for(const W in B)Object.prototype.hasOwnProperty.call(B,W)&&(K[W]=Object.prototype.hasOwnProperty.call(D,W)?T(D[W],B[W]):B[W]);return K}}(A,_),_e("debug",["mediaDevices",i],"merge configConstraints ".concat(JSON.stringify(_)))}catch{}O.debug("[".concat(i,"] GetUserMedia"),JSON.stringify(A)),Jt("debug",["mediaDevices",i],"getUserMedia",A),Oi();let S,C=null;(uu()||Ho()||ry())&&(C=yield O3.lock());try{S=yield navigator.mediaDevices.getUserMedia(A)}catch(T){throw C&&C(),T}return A.audio&&(DS=!0),A.video&&(l9=!0),Ow(p,S),C&&C(),p}),qj.apply(this,arguments)}function JN(r,i){switch(r){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new h(u.MEDIA_OPTION_INVALID,"".concat(r,": ").concat(i));case"NotFoundError":case"DevicesNotFoundError":return new h(u.DEVICE_NOT_FOUND,"".concat(r,": ").concat(i));case"NotSupportedError":return new h(u.NOT_SUPPORTED,"".concat(r,": ").concat(i));case"NotReadableError":return new h(u.NOT_READABLE,"".concat(r,": ").concat(i));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new h(u.PERMISSION_DENIED,"".concat(r,": ").concat(i));case"ConstraintNotSatisfiedError":return new h(u.CONSTRAINT_NOT_SATISFIED,"".concat(r,": ").concat(i));default:return O.error("getUserMedia unexpected error",r),Ne("error",[],"handleGetUserMediaError",void 0,r),new h(u.UNEXPECTED_ERROR,"".concat(r,": ").concat(i))}}function Ow(r,i){const a=r.getVideoTracks()[0],c=r.getAudioTracks()[0],p=i.getVideoTracks()[0],g=i.getAudioTracks()[0];g&&(c&&r.removeTrack(c),r.addTrack(g)),p&&(a&&r.removeTrack(a),r.addTrack(p))}const Sl=new class extends s{get state(){return this._state}set state(r){r!==this._state&&(this.emit(Sm.STATE_CHANGE,r),this._state=r)}constructor(){super(),q(this,"_state",b_.IDLE),q(this,"isAccessMicrophonePermission",!1),q(this,"isAccessCameraPermission",!1),q(this,"lastAccessMicrophonePermission",!1),q(this,"lastAccessCameraPermission",!1),q(this,"checkdeviceMatched",!1),q(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(rt("ENUMERATE_DEVICES_INTERVAL")||nF()&&cS())&&this.updateDevicesInfo()},rt("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(r=>O.error(r.toString()))}enumerateDevices(r,i){var a=arguments,c=this;return U(function*(){let p=a.length>2&&void 0!==a[2]&&a[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new h(u.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const g=yield navigator.mediaDevices.enumerateDevices(),m=c.checkMediaDeviceInfoIsOk(g);let A=!c.isAccessMicrophonePermission&&r,_=!c.isAccessCameraPermission&&i;m.audio&&(A=!1),m.video&&(_=!1);let S=null,C=null,T=null;if(!p&&(A||_)){if(O3.isLocked&&(O.debug("[device manager] wait GUM lock"),(yield O3.lock())(),O.debug("[device manager] GUM unlock")),DS&&(A=!1,c.isAccessMicrophonePermission=!0),l9&&(_=!1,c.isAccessCameraPermission=!0),O.debug("[device manager] check media device permissions",r,i,A,_),A&&_){try{T=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(D){const B=JN(D.name||D.code||D,D.message);if(B.code===u.PERMISSION_DENIED)throw B;O.warning("getUserMedia failed in getDevices",B)}c.isAccessCameraPermission=!0,c.isAccessMicrophonePermission=!0}else if(A){try{S=yield navigator.mediaDevices.getUserMedia({audio:r})}catch(D){const B=JN(D.name||D.code||D,D.message);if(B.code===u.PERMISSION_DENIED)throw B;O.warning("getUserMedia failed in getDevices",B)}c.isAccessMicrophonePermission=!0}else if(_){try{C=yield navigator.mediaDevices.getUserMedia({video:i})}catch(D){const B=JN(D.name||D.code||D,D.message);if(B.code===u.PERMISSION_DENIED)throw B;O.warning("getUserMedia failed in getDevices",B)}c.isAccessCameraPermission=!0}O.debug("[device manager] mic permission",r,"cam permission",i)}try{const D=yield navigator.mediaDevices.enumerateDevices();return S&&S.getTracks().forEach(B=>B.stop()),C&&C.getTracks().forEach(B=>B.stop()),T&&T.getTracks().forEach(B=>B.stop()),S=null,C=null,T=null,D}catch(D){return S&&S.getTracks().forEach(B=>B.stop()),C&&C.getTracks().forEach(B=>B.stop()),T&&T.getTracks().forEach(B=>B.stop()),S=null,C=null,T=null,new h(u.ENUMERATE_DEVICES_FAILED,D.toString()).throw()}})()}getRecordingDevices(){var r=arguments,i=this;return U(function*(){let a=r.length>0&&void 0!==r[0]&&r[0];return(yield i.enumerateDevices(!0,!1,a)).filter(c=>"audioinput"===c.kind)})()}getCamerasDevices(){var r=arguments,i=this;return U(function*(){let a=r.length>0&&void 0!==r[0]&&r[0];return(yield i.enumerateDevices(!1,!0,a)).filter(c=>"videoinput"===c.kind)})()}getSpeakers(){var r=arguments,i=this;return U(function*(){let a=r.length>0&&void 0!==r[0]&&r[0];return(yield i.enumerateDevices(!0,!1,a)).filter(c=>"audiooutput"===c.kind)})()}searchDeviceIdByName(r){let i=null;return this.deviceInfoMap.forEach(a=>{a.device.label===r&&(i=a.device.deviceId)}),i}getDeviceById(r){var i=this;return U(function*(){const a=(yield i.enumerateDevices(!0,!0,!0)).find(c=>c.deviceId===r);if(!a)throw new h(u.DEVICE_NOT_FOUND,"deviceId: ".concat(r));return a})()}init(){var r=this;return U(function*(){r.state=b_.INITING;try{yield r.updateDevicesInfo(),r.state=b_.INITEND}catch(i){throw O.warning("Device Detection functionality cannot start properly.",i.toString()),r.state=b_.IDLE,!("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)&&new h(u.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),i}})()}updateDevicesInfo(){var r=this;return U(function*(){const i=yield r.enumerateDevices(!0,!0,!0),a=Date.now(),c=[];if(i[0]&&i[0].label&&!1===r.checkdeviceMatched){r.checkdeviceMatched=!0;const g=i.find(A=>"audioinput"===A.kind&&"default"===A.deviceId),m=i.find(A=>"audiooutput"===A.kind&&"default"===A.deviceId);g&&m?m.groupId===g.groupId?O.debug("[device-check] default input ".concat(g.label," and output ").concat(m.label," is the same group")):O.warning("[device-check] default input ".concat(g.label," and output ").concat(m.label," is not the same group")):O.debug("[device-check] default input or output not found")}const p=r.checkMediaDeviceInfoIsOk(i);if(i.forEach(g=>{if(!g.deviceId)return;const m=r.deviceInfoMap.get("".concat(g.kind,"_").concat(g.deviceId));if("ACTIVE"!==(m?m.state:"INACTIVE")){const A={initAt:a,updateAt:a,device:g,state:"ACTIVE"};r.deviceInfoMap.set("".concat(g.kind,"_").concat(g.deviceId),A),c.push(A)}m&&(m.updateAt=a)}),r.deviceInfoMap.forEach((g,m)=>{"ACTIVE"===g.state&&g.updateAt!==a&&(g.state="INACTIVE",c.push(g))}),r.state!==b_.INITEND)return p.audio&&(r.lastAccessMicrophonePermission=!0,r.isAccessMicrophonePermission=!0),void(p.video&&(r.lastAccessCameraPermission=!0,r.isAccessCameraPermission=!0));c.forEach(g=>{switch(g.device.kind){case"audioinput":r.lastAccessMicrophonePermission&&r.isAccessMicrophonePermission&&r.emit(Sm.RECORDING_DEVICE_CHANGED,g);break;case"videoinput":r.lastAccessCameraPermission&&r.isAccessCameraPermission&&r.emit(Sm.CAMERA_DEVICE_CHANGED,g);break;case"audiooutput":r.lastAccessMicrophonePermission&&r.isAccessMicrophonePermission&&r.emit(Sm.PLAYOUT_DEVICE_CHANGED,g)}}),p.audio&&(r.lastAccessMicrophonePermission=!0,r.isAccessMicrophonePermission=!0),p.video&&(r.lastAccessCameraPermission=!0,r.isAccessCameraPermission=!0)})()}checkMediaDeviceInfoIsOk(r){const i=r.filter(p=>"audioinput"===p.kind),a=r.filter(p=>"videoinput"===p.kind),c={audio:!1,video:!1};for(const p of i)if(p.label&&p.deviceId){c.audio=!0;break}for(const p of a)if(p.label&&p.deviceId){c.video=!0;break}return c}};var Jj;let d9=yn("AudioElementPlayCenter")(Jj=class{constructor(){q(this,"onAutoplayFailed",void 0),q(this,"elementMap",new Map),q(this,"elementStateMap",new Map),q(this,"elementsNeedToResume",[]),q(this,"sinkIdMap",new Map),q(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(r=>{let[i,a]=r;const c=this.elementStateMap.get(i),p=a.srcObject.getAudioTracks()[0];oy()?p&&"live"===p.readyState&&"running"===Fr.curState&&(O.debug("auto resume after interruption for iOS 15"),_e("debug",["AudioElementPlayCenter",i],"auto resume after interruption for iOS15"),a.pause(),a.play()):c&&"paused"===c&&p&&"live"===p.readyState&&"running"===Fr.curState&&(O.debug("auto resume after interruption for iOS"),_e("debug",["AudioElementPlayCenter",i],"auto resume after interruption for iOS"),a.play())})}),q(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(r=>{let[i,a]=r;const c=a.srcObject.getAudioTracks()[0];c&&"live"===c.readyState&&(O.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),Ne("debug",["AudioElementPlayCenter",i],"autoResumeAfterInterruptionOnIOS15"),a.pause(),a.play())})}),this.autoResumeAudioElement(),Fr.on(qs.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Fr.on(qs.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),Fr.on(qs.STATE_CHANGE,()=>{Ho()&&"suspended"===Fr.prevState&&"running"===Fr.curState&&this.autoResumeAfterInterruption()})}setSinkID(r,i){var a=this;return U(function*(){const c=a.elementMap.get(r);if(a.sinkIdMap.set(r,i),c)try{yield c.setSinkId(i)}catch(p){throw new h(u.PERMISSION_DENIED,"can not set sink id: "+p.toString())}})()}play(r,i,a,c){if(this.elementMap.has(i))return;const p=document.createElement("audio");p.autoplay=!0,p.srcObject=new MediaStream([r]),this.bindAudioElementEvents(i,p),this.elementMap.set(i,p),this.elementStateMap.set(i,aa.INIT),this.setVolume(i,a);const g=this.sinkIdMap.get(i);if(g)try{p.setSinkId(g).catch(A=>{O.warning("[".concat(i,"] set sink id failed"),A.toString()),Jt("warning",["HTMLAudioElement",i],"setSinkId",A.toString())})}catch(A){O.warning("[".concat(i,"] set sink id failed"),A.toString())}const m=p.play();m&&m.then&&m.catch(A=>{c&&Gt.autoplayFailed(c,"audio",A.message,i),O.warning("audio element play warning",A.toString()),Jt("warning",["HTMLAudioElement",i],"play",A.toString()),this.elementMap.has(i)&&"NotAllowedError"===A.name&&(O.warning("detected audio element autoplay failed"),Ne("warning",["AudioElementPlayCenter",i],"play",A.toString()),this.elementsNeedToResume.push(p),th(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),Gj()}))})}updateTrack(r,i){const a=this.elementMap.get(r);a&&(a.srcObject=new MediaStream([i]))}isPlaying(r){return this.elementMap.has(r)}setVolume(r,i){const a=this.elementMap.get(r);a&&(i=Math.max(0,Math.min(100,i)),a.volume=i/100)}stop(r){const i=this.elementMap.get(r);if(this.sinkIdMap.delete(r),!i)return;const a=this.elementsNeedToResume.indexOf(i);this.elementsNeedToResume.splice(a,1),i.srcObject=null,i.remove(),this.elementMap.delete(r),this.elementStateMap.delete(r)}bindAudioElementEvents(r,i){$j.forEach(a=>{i.addEventListener(a,c=>{const p=this.elementStateMap.get(r),g="pause"===c.type?"paused":c.type;O.debug("[".concat(r,"] audio-element-status change ").concat(p," => ").concat(g)),st("debug",["HTMLAudioElement",r],"statusChange","".concat(p," => ").concat(g)),this.elementStateMap.set(r,g)})})}getPlayerState(r){return this.elementStateMap.get(r)||"uninit"}autoResumeAudioElement(){const r=()=>{this.elementsNeedToResume.forEach(i=>{i.play().then(a=>{O.debug("Auto resume audio element success"),Ne("debug",["AudioElementPlayCenter"],"autoResumeAudioElement")}).catch(a=>{O.warning("Auto resume audio element failed!",a),Ne("warning",["AudioElementPlayCenter"],"autoResumeAudioElement",a.toString())})}),this.elementsNeedToResume=[]};new Un(i=>{document.body?i():window.addEventListener("load",()=>i())}).then(()=>{const i=Oi();"Android"!==i.os||"Chrome"!==i.name&&i.name!==oi.WECHAT?(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0)):document.body.addEventListener("click",r,!0)})}})||Jj;const $j=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],dd=new d9;function es(){return function(r,i,a){const c=r[i];"function"==typeof c&&(a.value=function(){this._isClosed&&new h(u.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var p=arguments.length,g=new Array(p),m=0;m<p;m++)g[m]=arguments[m];const A=c.apply(this,g);return A instanceof Un?new Un((_,S)=>{A.then(_).catch(S)}):A})}}var Xj,Zj,ts,p9,h9,f9,ND,$N,XN,e5,D3,m9,Ea,t5,g9,_9,v9,A9,Dw,y9,E9,b9,S9,k3,C9,I9,Ha,P3;function n5(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function ZN(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?n5(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):n5(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let Ga=(Xj=yn("LocalAudioTrack","getTrackId"),Zj=es(),ts=_y("LocalAudioTrack","_enabledMutex"),p9=es(),h9=_y("LocalAudioTrack","_enabledMutex"),f9=es(),ND=OD({report:Gt}),$N=es(),XN=es(),e5=es(),D3=es(),Xj((Kn((Ea=class extends C3{get isPlaying(){return this._useAudioElement?dd.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(r,i,a){super(r,a),q(this,"trackMediaType","audio"),q(this,"_encoderConfig",void 0),q(this,"_source",void 0),q(this,"_enabled",!0),q(this,"_volume",100),q(this,"_useAudioElement",!1),q(this,"_bypassWebAudio",!1),q(this,"processor",void 0),q(this,"processorContext",void 0),q(this,"processorDestination",void 0),this._encoderConfig=i,this._source=new u9(r),rt("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),this.processorContext=new T9(this._source.context,this.getTrackId()),this.processorDestination=new w9(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Bc.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(r){Lr(r,"volume",0,1e3);const i=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),r]},300);this._volume=r,this._source.setVolume(r/100),this._useAudioElement&&dd.setVolume(this.getTrackId(),r);try{if(this._bypassWebAudio)return O.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void i.onSuccess();const a=this._source.createOutputTrack();this._mediaStreamTrack!==a&&(this._mediaStreamTrack=a,Ro(this,nr.NEED_REPLACE_TRACK,this).then(()=>{O.debug("[".concat(this.getTrackId(),"] replace web audio track success")),_e("debug",this,"replace web audio track success")}).catch(c=>{O.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),c),_e("warning",this,"replace web audio track failed ".concat(c.toString()))}))}catch{}i.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}setPlaybackDevice(r){var i=this;return U(function*(){const a=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[i.getTrackId(),r]});if(!i._useAudioElement)throw new h(u.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield dd.setSinkID(i.getTrackId(),r)}catch(c){throw a.onError(c),c}a.onSuccess()})()}setEnabled(r,i,a){var c=this;return U(function*(){if(!a){if(r===c._enabled)return;c.stateCheck("enabled",r)}if(O.info("[".concat(c.getTrackId(),"] start setEnabled"),r),Ne("info",c,"setEnabled",r),r){c._originMediaStreamTrack.enabled=!0;try{a||(c._enabled=!0),yield Ro(c,nr.NEED_ENABLE_TRACK,c),O.info("[".concat(c.getTrackId(),"] setEnabled to ").concat(r," success")),Ne("info",c,"setEnabled",r,"success")}catch(p){throw a||(c._enabled=!1),O.error("[".concat(c.getTrackId(),"] setEnabled to true error"),p.toString()),Ne("error",c,"setEnabled",r,p.toString()),p}}else{c._originMediaStreamTrack.enabled=!1,a||(c._enabled=!1);try{yield Ro(c,nr.NEED_DISABLE_TRACK,c)}catch(p){throw a||(c._enabled=!0),O.error("[".concat(c.getTrackId(),"] setEnabled to false error"),p.toString()),Ne("info",c,"setEnabled",r,p.toString()),p}}})()}setMuted(r){var i=this;return U(function*(){r!==i._muted&&(i.stateCheck("muted",r),i._muted=r,i._originMediaStreamTrack.enabled=!r,O.debug("[".concat(i.getTrackId(),"] start set muted: ").concat(r)),Ne("debug",i,"setMuted",r),r?yield Ro(i,nr.NEED_MUTE_TRACK,i):yield Ro(i,nr.NEED_UNMUTE_TRACK,i))})()}getStats(){return LD(()=>{O.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead"),_e("warning",this,"LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),yy(this,nr.GET_STATS)||ZN({},D4)}setAudioFrameCallback(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!r)return this._source.removeAllListeners(Bc.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(i),this._source.removeAllListeners(Bc.ON_AUDIO_BUFFER),this._source.on(Bc.ON_AUDIO_BUFFER,a=>r(a))}play(){const r=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});O.debug("[".concat(this.getTrackId(),"] start audio playback")),Ne("debug",this,"play"),this._useAudioElement?(O.debug("[".concat(this.getTrackId(),"] start audio playback in element")),_e("debug",this,"start audio playback in element"),dd.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),r.onSuccess()}stop(){const r=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});O.debug("[".concat(this.getTrackId(),"] stop audio playback")),Ne("debug",this,"stop"),this._useAudioElement?dd.stop(this.getTrackId()):this._source.stop(),r.onSuccess()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){O.debug("[".concat(this.getTrackId(),"] update player source track")),Ne("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&dd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}_updateOriginMediaStreamTrack(r,i){var a=this;return U(function*(){a._originMediaStreamTrack!==r&&(a._originMediaStreamTrack.removeEventListener("ended",a._handleTrackEnded),r.addEventListener("ended",a._handleTrackEnded),i&&a._originMediaStreamTrack.stop(),a._originMediaStreamTrack=r,a.processor&&a.processor.updateInput({track:r,context:a.processorContext}),a._mediaStreamTrack!==a._source.outputTrack?(a._mediaStreamTrack=a._originMediaStreamTrack,a._updatePlayerSource(),yield Ro(a,nr.NEED_REPLACE_TRACK,a)):a._source.updateTrack(a._originMediaStreamTrack))})()}renewMediaStreamTrack(r){return Un.resolve(void 0)}pipe(r){if(this._bypassWebAudio)throw new h(u.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===r)return r;if(r._source)throw new h(u.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),r}unpipe(){var r;if(!this.processor)return;const i=this.processor;null===(r=this._source.processSourceNode)||void 0===r||r.disconnect(),this.processor._source=!1,this.processor=void 0,i.reset()}bindProcessorDestinationEvents(){var r=this;this.processorDestination.on(sp.ON_TRACK,function(){var i=U(function*(a){a?a!==r._mediaStreamTrack&&(r._mediaStreamTrack=a,r._updatePlayerSource(),yield Ro(r,nr.NEED_REPLACE_TRACK,r)):r._mediaStreamTrack!==r._originMediaStreamTrack&&(r._mediaStreamTrack=r._originMediaStreamTrack,r._updatePlayerSource(),yield Ro(r,nr.NEED_REPLACE_TRACK,r))});return function(a){return i.apply(this,arguments)}}()),this.processorDestination.on(sp.ON_NODE,i=>{this._source.processedNode=i})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(sp.ON_TRACK),this.processorDestination.removeAllListeners(sp.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Al.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Al.REQUEST_CONSTRAINTS)}}).prototype,"setPlaybackDevice",[Zj],Object.getOwnPropertyDescriptor(Ea.prototype,"setPlaybackDevice"),Ea.prototype),Kn(Ea.prototype,"setEnabled",[ts,p9],Object.getOwnPropertyDescriptor(Ea.prototype,"setEnabled"),Ea.prototype),Kn(Ea.prototype,"setMuted",[h9,f9,ND],Object.getOwnPropertyDescriptor(Ea.prototype,"setMuted"),Ea.prototype),Kn(Ea.prototype,"getStats",[$N],Object.getOwnPropertyDescriptor(Ea.prototype,"getStats"),Ea.prototype),Kn(Ea.prototype,"setAudioFrameCallback",[XN],Object.getOwnPropertyDescriptor(Ea.prototype,"setAudioFrameCallback"),Ea.prototype),Kn(Ea.prototype,"play",[e5],Object.getOwnPropertyDescriptor(Ea.prototype,"play"),Ea.prototype),Kn(Ea.prototype,"stop",[D3],Object.getOwnPropertyDescriptor(Ea.prototype,"stop"),Ea.prototype),m9=Ea))||m9),kS=(t5=yn("MicrophoneAudioTrack","getTrackId"),g9=es(),_9=_y("MicrophoneAudioTrack","_enabledMutex"),v9=es(),t5((Kn((Dw=class extends Ga{constructor(r,i,a,c){super(r,i.encoderConfig?Cn(i.encoderConfig):{},c),q(this,"_config",void 0),q(this,"_deviceName","default"),q(this,"_constraints",void 0),q(this,"_originalConstraints",void 0),q(this,"_enabled",!0),Ft("info",this,"constructor",{trackId:c,deviceId:r.label,constraints:a}),this._config=i,this._constraints=a,this._originalConstraints=a,this._deviceName=r.label,"boolean"==typeof i.bypassWebAudio&&(this._bypassWebAudio=i.bypassWebAudio),oy()&&Fr.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}setDevice(r){var i=this;return U(function*(){const a=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.MIC_AUDIO_TRACK_SET_DEVICE,options:[i.getTrackId(),r]});if(O.info("[".concat(i.getTrackId(),"] start set device to ").concat(r)),Ne("info",i,"setDevice",r),i._enabled)try{const c=yield Sl.getDeviceById(r),p={};p.audio=ZN({},i._constraints),p.audio.deviceId={exact:r},i._originMediaStreamTrack.stop();let g=null;try{g=yield Uu(p,i.getTrackId())}catch(m){throw O.error("[".concat(i.getTrackId(),"] setDevice failed"),m.toString()),Ne("error",i,"setDevice",r,m.toString()),g=yield Uu({video:i._constraints},i.getTrackId()),yield i._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),m}yield i._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),i._deviceName=c.label,i._config.microphoneId=r,i._constraints.deviceId={exact:r}}catch(c){throw a.onError(c),O.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Ne("error",i,"setDevice",r,c.toString()),c}else try{const c=yield Sl.getDeviceById(r);i._deviceName=c.label,i._config.microphoneId=r,i._constraints.deviceId={exact:r}}catch(c){throw a.onError(c),O.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Ne("error",i,"setDevice",r,c.toString()),c}a.onSuccess(),O.info("[".concat(i.getTrackId(),"] set device to ").concat(r," success")),Ne("info",i,"setDevice",r,"success")})()}setEnabled(r,i,a){var c=()=>super.setEnabled,p=this;return U(function*(){if(i)return O.debug("[".concat(p.getTrackId,"] setEnabled false (do not close microphone)")),_e("debug",p,"setEnabled false (do not close microphone)"),yield c().call(p,r);if(!a){if(r===p._enabled)return;p.stateCheck("enabled",r)}if(O.info("[".concat(p.getTrackId(),"] start setEnabled"),r),Ne("info",p,"setEnabled",r),!r){p._originMediaStreamTrack.onended=null,p._originMediaStreamTrack.stop(),a||(p._enabled=!1);try{yield Ro(p,nr.NEED_DISABLE_TRACK,p)}catch(A){throw O.error("[".concat(p.getTrackId(),"] setEnabled false failed"),A.toString()),Ne("error",p,"setEnabled",r,A.toString()),A}return}const g=ZN({},p._constraints),m=Sl.searchDeviceIdByName(p._deviceName);m&&!g.deviceId&&(g.deviceId=m);try{a||(p._enabled=!0);const A=yield Uu({audio:p._constraints},p.getTrackId());yield p._updateOriginMediaStreamTrack(A.getAudioTracks()[0],!1),yield Ro(p,nr.NEED_ENABLE_TRACK,p)}catch(A){throw a||(p._enabled=!1),O.error("[".concat(p.getTrackId(),"] setEnabled true failed"),A.toString()),Ne("error",p,"setEnabled",r,A.toString()),A}O.info("[".concat(p.getTrackId(),"] setEnabled success")),Ne("info",p,"setEnabled",r,"success")})()}close(){super.close(),oy()&&Fr.unbindInterruptDetectorTrack(this)}onTrackEnded(){var r=this;if((Ho()||Jp())&&this._enabled&&!this._isClosed&&Fr.duringInterruption){const i=function(){var a=U(function*(){Fr.off(qs.IOS_INTERRUPTION_END,i),r._enabled&&!r._isClosed&&(O.debug("[".concat(r.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),_e("debug",r,"try capture microphone media device for interrupted iOS device"),yield r.setEnabled(!1),yield r.setEnabled(!0))});return function(){return a.apply(this,arguments)}}();Fr.on(qs.IOS_INTERRUPTION_END,i)}else O.debug("[".concat(this.getTrackId(),"] track ended")),st("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(op.TRACK_ENDED)}renewMediaStreamTrack(r){var i=this;return U(function*(){const a=r||i._constraints,c=Sl.searchDeviceIdByName(i._deviceName);c&&!a.deviceId&&(a.deviceId=c),i._constraints=a,i._originMediaStreamTrack.stop();const p=yield Uu({audio:i._constraints},i.getTrackId());yield i._updateOriginMediaStreamTrack(p.getAudioTracks()[0],!0)})()}bindProcessorContextEvents(){var r=this;this.processorContext.on(Al.REQUEST_UPDATE_CONSTRAINTS,function(){var i=U(function*(a,c,p){try{const g=Object.assign({},r._originalConstraints,...a);yield r.renewMediaStreamTrack(g),c()}catch(g){p(g)}});return function(a,c,p){return i.apply(this,arguments)}}()),this.processorContext.on(Al.REQUEST_CONSTRAINTS,function(){var i=U(function*(a){a(r._originMediaStreamTrack.getSettings())});return function(a){return i.apply(this,arguments)}}())}}).prototype,"setDevice",[g9],Object.getOwnPropertyDescriptor(Dw.prototype,"setDevice"),Dw.prototype),Kn(Dw.prototype,"setEnabled",[_9,v9],Object.getOwnPropertyDescriptor(Dw.prototype,"setEnabled"),Dw.prototype),A9=Dw))||A9),r5=(y9=yn("BufferSourceAudioTrack","getTrackId"),E9=es(),b9=es(),S9=es(),k3=es(),C9=es(),y9((Kn((Ha=class extends Ga{constructor(r,i,a,c){super(i.createOutputTrack(),a,c),q(this,"source",void 0),q(this,"_bufferSource",void 0),Ft("info",this,"constructor",{trackId:c}),this.source=r,this._bufferSource=i,this._bufferSource.on(Bc.AUDIO_SOURCE_STATE_CHANGE,p=>{this.emit(op.SOURCE_STATE_CHANGE,p)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(r){const i=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),r,this.duration]});r&&this._bufferSource.updateOptions(r),this._bufferSource.startProcessAudioBuffer(),i.onSuccess()}pauseProcessAudioBuffer(){const r=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),r.onSuccess()}seekAudioBuffer(r){const i=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(r),i.onSuccess()}resumeProcessAudioBuffer(){const r=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),r.onSuccess()}stopProcessAudioBuffer(){const r=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),r.onSuccess()}}).prototype,"startProcessAudioBuffer",[E9],Object.getOwnPropertyDescriptor(Ha.prototype,"startProcessAudioBuffer"),Ha.prototype),Kn(Ha.prototype,"pauseProcessAudioBuffer",[b9],Object.getOwnPropertyDescriptor(Ha.prototype,"pauseProcessAudioBuffer"),Ha.prototype),Kn(Ha.prototype,"seekAudioBuffer",[S9],Object.getOwnPropertyDescriptor(Ha.prototype,"seekAudioBuffer"),Ha.prototype),Kn(Ha.prototype,"resumeProcessAudioBuffer",[k3],Object.getOwnPropertyDescriptor(Ha.prototype,"resumeProcessAudioBuffer"),Ha.prototype),Kn(Ha.prototype,"stopProcessAudioBuffer",[C9],Object.getOwnPropertyDescriptor(Ha.prototype,"stopProcessAudioBuffer"),Ha.prototype),I9=Ha))||I9),pd=yn("MixingAudioTrack","getTrackId")(P3=class extends Ga{get isActive(){for(const r of this.trackList)if(r._enabled&&!r._isClosed&&!r.muted)return!0;return!1}constructor(){const r=kD().createMediaStreamDestination();super(r.stream.getAudioTracks()[0],void 0,ns(8,"track-mix-")),q(this,"trackList",void 0),q(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=r,this.trackList=[]}hasAudioTrack(r){return-1!==this.trackList.indexOf(r)}addAudioTrack(r){if(-1!==this.trackList.indexOf(r))return O.debug("track ".concat(r.getTrackId()," is already added")),void _e("debug",this,"track already added");O.debug("add ".concat(r.getTrackId()," to mixing track")),Ne("debug",this,"addAudioTrack",r.getTrackId()),r._source.outputNode.connect(this.destNode),this.trackList.push(r),this.updateEncoderConfig()}removeAudioTrack(r){if(-1!==this.trackList.indexOf(r)){O.debug("remove ".concat(r.getTrackId()," from mixing track")),Ne("debug",this,"removeAudioTrack",r.getTrackId());try{r._source.outputNode.disconnect(this.destNode)}catch{}F3(this.trackList,r),this.updateEncoderConfig()}}updateEncoderConfig(){const r={};this.trackList.forEach(i=>{i._encoderConfig&&((i._encoderConfig.bitrate||0)>(r.bitrate||0)&&(r.bitrate=i._encoderConfig.bitrate),(i._encoderConfig.sampleRate||0)>(r.sampleRate||0)&&(r.sampleRate=i._encoderConfig.sampleRate),(i._encoderConfig.sampleSize||0)>(r.sampleSize||0)&&(r.sampleSize=i._encoderConfig.sampleSize),i._encoderConfig.stereo&&(r.stereo=!0))}),this._encoderConfig=r}})||P3;class w9 extends s{constructor(i){super(),q(this,"name","AudioProcessorDestination"),q(this,"ID","0"),q(this,"inputTrack",void 0),q(this,"inputNode",void 0),q(this,"audioProcessorContext",void 0),q(this,"_source",void 0),this.audioProcessorContext=i}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new h(u.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new h(u.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.emit(sp.ON_TRACK,void 0),this.emit(sp.ON_NODE,void 0)}updateInput(i){if(i.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");i.track&&this.inputTrack!==i.track&&(this.inputTrack=i.track,this.emit(sp.ON_TRACK,this.inputTrack)),i.node&&this.inputNode!==i.node&&(this.inputNode=i.node,this.emit(sp.ON_NODE,this.inputNode))}}class T9 extends s{constructor(i,a){super(),q(this,"constraintsMap",new Map),q(this,"statsRegistry",[]),q(this,"audioContext",void 0),q(this,"trackId",void 0),this.audioContext=i,this.trackId=a}getConstraints(){var i=this;return U(function*(){return up(i,Al.REQUEST_CONSTRAINTS)})()}getAudioContext(){return this.audioContext}requestApplyConstraints(i,a){var c=this;return U(function*(){var p;return O.info("processor ".concat(a.name," requestApplyConstraints for ").concat(c.trackId)),i&&c.constraintsMap.set(a,i),Ro(c,Al.REQUEST_UPDATE_CONSTRAINTS,Array.from(O_(p=c.constraintsMap).call(p)))})()}requestRevertConstraints(i){var a=this;return U(function*(){var c;if(a.constraintsMap.has(i))return a.constraintsMap.delete(i),Ro(a,Al.REQUEST_UPDATE_CONSTRAINTS,Array.from(O_(c=a.constraintsMap).call(c)))})()}registerStats(i,a,c){this.statsRegistry.find(p=>p.processorID===i.ID&&p.processorName===i.name&&p.type===a)||this.statsRegistry.push({processorName:i.name,processorID:i.ID,type:a,cb:c})}unregisterStats(i,a){}gatherStats(){return this.statsRegistry.map(i=>{let{processorID:a,processorName:c,type:p,cb:g}=i;return{processorID:a,processorName:c,type:p,stats:g()}})}}class R9 extends s{constructor(){super(...arguments),q(this,"resultStorage",new Map)}setLocalAudioStats(i,a,c){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",i,this.checkAudioInputLevel(c,a)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",i,this.checkSendAudioBitrate(c,a))}setLocalVideoStats(i,a,c){this.record("SEND_VIDEO_BITRATE_TOO_LOW",i,this.checkSendVideoBitrate(c,a)),this.record("FRAMERATE_INPUT_TOO_LOW",i,this.checkFramerateInput(c,a)),this.record("FRAMERATE_SENT_TOO_LOW",i,this.checkFramerateSent(c))}setRemoteAudioStats(i,a){const c=i.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",c,this.checkAudioOutputLevel(a))}setRemoteVideoStats(i,a){const c=i.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",c,this.checkVideoDecode(a))}record(i,a,c){this.resultStorage.has(i)||this.resultStorage.set(i,{result:[],isPrevNormal:!0});const p=this.resultStorage.get(i);if(p&&(p.result.push(c),p.result.length>=5)){const g=p.result.includes(!0);p.isPrevNormal&&!g&&this.emit("exception",kw[i],i,a),!p.isPrevNormal&&g&&this.emit("exception",kw[i]+2e3,i+"_RECOVER",a),p.isPrevNormal=g,p.result=[]}}checkAudioOutputLevel(i){return!(i.receiveBitrate>0&&0===i.receiveLevel)}checkAudioInputLevel(i,a){return a instanceof pd&&!a.isActive||!!a.muted||0!==i.sendVolumeLevel}checkFramerateInput(i,a){let c=null;a._encoderConfig&&a._encoderConfig.frameRate&&(c=Ay(a._encoderConfig.frameRate));const p=i.captureFrameRate;return!c||!p||!(c>10&&p<5||c<10&&c>=5&&p<=1)}checkFramerateSent(i){return!(i.captureFrameRate&&i.sendFrameRate&&i.captureFrameRate>5&&i.sendFrameRate<=1)}checkSendVideoBitrate(i,a){return!!a.muted||0!==i.sendBitrate}checkSendAudioBitrate(i,a){return a instanceof pd&&!a.isActive||!!a.muted||0!==i.sendBitrate}checkVideoDecode(i){return 0===i.receiveBitrate||0!==i.decodeFrameRate}}const kw={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},Cl=new class{markSubscribeStart(r,i){performance.mark("agora-web-sdk/".concat(r,"/subscribe-").concat(i))}markPublishStart(r,i){performance.mark("agora-web-sdk/".concat(r,"/publish-").concat(i))}measureFromSubscribeStart(r,i){const a=performance.getEntriesByName("agora-web-sdk/".concat(r,"/subscribe-").concat(i));if(a.length>0){const c=a[a.length-1];return Math.round(performance.now()-c.startTime)}return 0}measureFromPublishStart(r,i){const a=performance.getEntriesByName("agora-web-sdk/".concat(r,"/publish-").concat(i));if(a.length>0){const c=a[a.length-1];return Math.round(performance.now()-c.startTime)}return 0}};function i5(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function PS(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?i5(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):i5(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class MS{constructor(i){q(this,"store",void 0),q(this,"onStatsException",void 0),q(this,"onUploadPublishDuration",void 0),q(this,"localStats",new Map),q(this,"remoteStats",new Map),q(this,"updateStatsInterval",void 0),q(this,"trafficStats",void 0),q(this,"trafficStatsPeerList",[]),q(this,"uplinkStats",void 0),q(this,"exceptionMonitor",void 0),q(this,"p2pChannel",void 0),q(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=i,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new R9,this.exceptionMonitor.on("exception",(a,c,p)=>{this.onStatsException&&this.onStatsException(a,c,p)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Rn.LocalAudioTrack)||PS({},D4)}getLocalVideoTrackStats(){return this.localStats.get(Rn.LocalVideoTrack)||PS({},k4)}getRemoteAudioTrackStats(i){const a=(g,m)=>{if(!this.trafficStats)return m;const A=this.trafficStats.peer_delay.find(_=>_.peer_uid===g);return A&&(m.publishDuration=A.B_ppad+(Date.now()-this.trafficStats.timestamp)),m},c={};if(i){var p;const g=null===(p=this.remoteStats.get(i))||void 0===p?void 0:p.audioStats;g&&(c[i]=a(i,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[m,{audioStats:A}]=g;A&&(c[m]=a(m,A))});return c}getRemoteNetworkQualityStats(i){const a={};if(i){var c;const p=null===(c=this.remoteStats.get(i))||void 0===c?void 0:c.networkStats;p&&(a[i]=p)}else Array.from(this.remoteStats.entries()).forEach(p=>{let[g,{networkStats:m}]=p;m&&(a[g]=m)});return a}getRemoteVideoTrackStats(i){const a=(g,m)=>{if(!this.trafficStats)return m;const A=this.trafficStats.peer_delay.find(_=>_.peer_uid===g);return A&&(m.publishDuration=A.B_ppvd+(Date.now()-this.trafficStats.timestamp)),m},c={};if(i){var p;const g=null===(p=this.remoteStats.get(i))||void 0===p?void 0:p.videoStats;g&&(c[i]=a(i,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[m,{videoStats:A}]=g;A&&(c[m]=a(m,A))});return c}getRTCStats(){let i=0,a=0,c=0,p=0;const g=this.localStats.get(Rn.LocalAudioTrack);g&&(i+=g.sendBytes,a+=g.sendBitrate);const m=this.localStats.get(Rn.LocalVideoTrack);m&&(i+=m.sendBytes,a+=m.sendBitrate);const A=this.localStats.get(Rn.LocalVideoLowTrack);A&&(i+=A.sendBytes,a+=A.sendBitrate),this.remoteStats.forEach(S=>{let{audioStats:C,videoStats:T}=S;C&&(c+=C.receiveBytes,p+=C.receiveBitrate),T&&(c+=T.receiveBytes,p+=T.receiveBitrate)});let _=1;return this.trafficStats&&(_+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:_,SendBitrate:a,SendBytes:i,RecvBytes:c,RecvBitrate:p,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(i){this.localStats.set(i,void 0)}removeLocalStats(i){i?this.localStats.delete(i):this.localStats.clear()}addRemoteStats(i){this.remoteStats.set(i,{})}removeRemoteStats(i){i?this.remoteStats.delete(i):this.remoteStats.clear()}addP2PChannel(i){this.p2pChannel=i}updateTrafficStats(i){i.peer_delay=i.peer_delay.filter(a=>void 0!==a.B_ppad||void 0!==a.B_ppvd),i.peer_delay.filter(a=>-1===this.trafficStatsPeerList.indexOf(a.peer_uid)).forEach(a=>{var c;const p=null===(c=this.p2pChannel)||void 0===c?void 0:c.getRemoteMedia(a.peer_uid),g=null!=p&&p.videoSSRC?Cl.measureFromSubscribeStart(this.store.clientId,p.videoSSRC):0,m=null!=p&&p.audioSSRC?Cl.measureFromSubscribeStart(this.store.clientId,p.audioSSRC):0;void 0!==a.B_ppad&&void 0!==a.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(a.peer_uid,a.B_ppad,a.B_ppvd,g>m?g:m),this.trafficStatsPeerList.push(a.peer_uid))}),this.trafficStats=i}updateUplinkStats(i){this.uplinkStats&&this.uplinkStats.B_fir!==i.B_fir&&O.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(i.B_fir)),this.uplinkStats=i}static isRemoteVideoFreeze(i,a,c){return!!i&&(!!c&&a.framesDecodeFreezeTime>c.framesDecodeFreezeTime||!(!c||a.framesDecodeCount>c.framesDecodeCount))}static isRemoteAudioFreeze(i){return!!i&&i._isFreeze()}isLocalVideoFreeze(i){return!(!i.inputFrame||!i.sentFrame)&&i.inputFrame.frameRate>5&&i.sentFrame.frameRate<3}updateLocalStats(i){Array.from(this.localStats.entries()).forEach(a=>{let[c,p]=a;switch(c){case Rn.LocalVideoTrack:case Rn.LocalVideoLowTrack:{const g=p,m=PS({},k4),A=i.getStats(),_=i.getLocalMedia(c);if(A){const S=A.videoSend.find(C=>C.ssrc===_?.ssrcs[0].ssrcId);if(S){const C=i.getLocalVideoSize(),T=i.getEncoderConfig(Rn.LocalVideoTrack);"H264"!==S.codec&&"VP8"!==S.codec&&"VP9"!==S.codec&&"AV1X"!==S.codec&&"AV1"!==S.codec||(m.codecType=S.codec),m.sendBytes=S.bytes,m.sendBitrate=g?8*Math.max(0,m.sendBytes-g.sendBytes):0,S.inputFrame?(m.captureFrameRate=S.inputFrame.frameRate,m.captureResolutionHeight=S.inputFrame.height,m.captureResolutionWidth=S.inputFrame.width):C&&(m.captureResolutionWidth=C.width,m.captureResolutionHeight=C.height),S.sentFrame?(m.sendFrameRate=S.sentFrame.frameRate,m.sendResolutionHeight=S.sentFrame.height,m.sendResolutionWidth=S.sentFrame.width):C&&(m.sendResolutionWidth=C.width,m.sendResolutionHeight=C.height),S.avgEncodeMs&&(m.encodeDelay=S.avgEncodeMs),T&&T.bitrateMax&&(m.targetSendBitrate=1e3*T.bitrateMax),m.sendPackets=S.packets,m.sendPacketsLost=S.packetsLost,m.totalDuration=g?g.totalDuration+1:1,m.totalFreezeTime=g?g.totalFreezeTime:0,this.isLocalVideoFreeze(S)&&(m.totalFreezeTime+=1)}this.trafficStats&&(m.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(c,m),m&&_&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,_.track,m);break}case Rn.LocalAudioTrack:{const g=p,m=PS({},D4),A=i.getStats(),_=i.getLocalMedia(c);if(A){const S=A.audioSend.find(C=>C.ssrc===_?.ssrcs[0].ssrcId);if(S){if("opus"!==S.codec&&"aac"!==S.codec&&"PCMU"!==S.codec&&"PCMA"!==S.codec&&"G722"!==S.codec||(m.codecType=S.codec),S.inputLevel)m.sendVolumeLevel=Math.round(32767*S.inputLevel);else{const C=i.getLocalAudioVolume();C&&(m.sendVolumeLevel=Math.round(32767*C))}m.sendBytes=S.bytes,m.sendPackets=S.packets,m.sendPacketsLost=S.packetsLost,m.sendBitrate=g?8*Math.max(0,m.sendBytes-g.sendBytes):0}}this.trafficStats&&(m.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Rn.LocalAudioTrack,m),m&&_&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,_.track,m);break}}})}updateRemoteStats(i){Array.from(this.remoteStats.entries()).forEach(a=>{let[c,{videoStats:p,audioStats:g,videoPcStats:m}]=a;const A=g,_=p,S=m,C=PS({},IQ),T=PS({},wQ),D=PS({},TW),{audioTrack:B,videoTrack:K,audioSSRC:W,videoSSRC:Z}=i.getRemoteMedia(c),de=i.getStats(),ge=de?.audioRecv.find(it=>it.ssrc===W),Se=de?.videoRecv.find(it=>it.ssrc===Z),De=this.trafficStats&&this.trafficStats.peer_delay.find(it=>it.peer_uid===c);if(ge&&("opus"!==ge.codec&&"aac"!==ge.codec&&"PCMU"!==ge.codec&&"PCMA"!==ge.codec&&"G722"!==ge.codec||(C.codecType=ge.codec),ge.outputLevel?C.receiveLevel=Math.round(32767*ge.outputLevel):B&&(C.receiveLevel=Math.round(32767*B.getVolumeLevel())),C.receiveBytes=ge.bytes,C.receivePackets=ge.packets,C.receivePacketsLost=ge.packetsLost,C.packetLossRate=C.receivePacketsLost/(C.receivePackets+C.receivePacketsLost),C.receiveBitrate=A?8*Math.max(0,C.receiveBytes-A.receiveBytes):0,C.totalDuration=A?A.totalDuration+1:1,C.totalFreezeTime=A?A.totalFreezeTime:0,C.freezeRate=C.totalFreezeTime/C.totalDuration,C.receiveDelay=ge.jitterBufferMs,C.totalDuration>10&&MS.isRemoteAudioFreeze(B)&&(C.totalFreezeTime+=1)),Se){"H264"!==Se.codec&&"VP8"!==Se.codec&&"VP9"!==Se.codec&&"AV1X"!==Se.codec&&"AV1"!==Se.codec||(T.codecType=Se.codec),T.receiveBytes=Se.bytes,T.receiveBitrate=_?8*Math.max(0,T.receiveBytes-_.receiveBytes):0,T.decodeFrameRate=Se.decodeFrameRate<0?0:Se.decodeFrameRate,T.renderFrameRate=Se.decodeFrameRate<0?0:Se.decodeFrameRate,Se.outputFrame&&(T.renderFrameRate=Se.outputFrame.frameRate),Se.receivedFrame?(T.receiveFrameRate=Se.receivedFrame.frameRate,T.receiveResolutionHeight=Se.receivedFrame.height,T.receiveResolutionWidth=Se.receivedFrame.width):K&&(T.receiveResolutionHeight=K._videoHeight||0,T.receiveResolutionWidth=K._videoWidth||0),void 0!==Se.framesRateFirefox&&(T.receiveFrameRate=Math.round(Se.framesRateFirefox)),T.receivePackets=Se.packets,T.receivePacketsLost=Se.packetsLost,T.packetLossRate=T.receivePacketsLost/(T.receivePackets+T.receivePacketsLost),T.totalDuration=_?_.totalDuration+1:1,T.totalFreezeTime=_?_.totalFreezeTime:0,T.receiveDelay=Se.jitterBufferMs||0;const it=!!Z&&i.getRemoteVideoIsReady(Z);K&&it&&MS.isRemoteVideoFreeze(K,Se,S)&&(T.totalFreezeTime+=1),T.freezeRate=T.totalFreezeTime/T.totalDuration}De&&(C.end2EndDelay=De.B_ad,T.end2EndDelay=De.B_vd,C.transportDelay=De.B_ed,T.transportDelay=De.B_ed,C.currentPacketLossRate=De.B_ealr4/100,T.currentPacketLossRate=De.B_evlr4/100,D.uplinkNetworkQuality=De.B_punq?De.B_punq:0,D.downlinkNetworkQuality=De.B_pdnq?De.B_pdnq:0),this.remoteStats.set(c,{audioStats:C,videoStats:T,videoPcStats:Se,networkStats:D}),B&&this.exceptionMonitor.setRemoteAudioStats(B,C),K&&this.exceptionMonitor.setRemoteVideoStats(K,T)})}}function O9(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function M3(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?O9(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):O9(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function YK(r){if(!r.address||!r.tcp)throw new h(u.UNEXPECTED_RESPONSE,"Invalid address format ".concat(r));return r.address.match(/^[\.\:\d]+$/)?"".concat(r.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(O.info("Cannot recognized as IP address ".concat(r.address,". Used As Host instead")),"".concat(r.address,":").concat(r.tcp))}function ex(r){return r.match(/^[\.\:\d]+$/)?"".concat(r.replace(/[^\d]/g,"-"),".").concat(rt("TURN_DOMAIN")):(O.info("Cannot recognized as IP address ".concat(r,". Used As Host instead")),r)}function D9(r,i){const a=rt("GATEWAY_DOMAINS");let c=a[1]&&-1!==i.indexOf(a[1])?1:0;return r.addresses=r.addresses||[],{gatewayAddrs:r.addresses.map(p=>p.domain_prefix?{address:"".concat(p.domain_prefix,".").concat(a[c++%a.length],":").concat(p.port)}:p.ip.match(/^[\.\:\d]+$/)?{ip:p.ip,port:p.port,address:"".concat(p.ip.replace(/[^\d]/g,"-"),".").concat(a[c++%a.length],":").concat(p.port)}:(O.info("Cannot recognized as IP address ".concat(p.ip,". Used As Host instead")),{ip:p.ip,port:p.port,address:"".concat(p.ip,":").concat(p.port)})),uid:r.uid,cid:r.cid,vid:r.detail&&r.detail[8],uni_lbs_ip:r.detail&&r.detail[1],res:r,csIp:r.detail&&r.detail[502]}}function Ay(r){return"number"==typeof r?r:r.exact||r.ideal||r.max||r.min||0}function o5(r){const i=r._encoderConfig;if(!i)return{};const a={resolution:i.width&&i.height?"".concat(Ay(i.width),"x").concat(Ay(i.height)):void 0,maxVideoBW:i.bitrateMax,minVideoBW:i.bitrateMin};return"number"==typeof i.frameRate?(a.maxFrameRate=i.frameRate,a.minFrameRate=i.frameRate):i.frameRate&&(a.maxFrameRate=i.frameRate.max||i.frameRate.ideal||i.frameRate.exact||i.frameRate.min,a.minFrameRate=i.frameRate.min||i.frameRate.ideal||i.frameRate.exact||i.frameRate.max),a}function s5(r,i,a){var c;const p=i.videoSend.find(A=>A.ssrc===r);if(!p)return null;const g=null==a||null===(c=a.videoSend.find(A=>A.ssrc===r))||void 0===c?void 0:c.inputFrame,m={id:ns(10,""),timestamp:new Date(i.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:p.ssrc.toString()};return p.inputFrame&&(g&&p.inputFrame.height===g.height||(m.A_fhi=p.inputFrame.height?p.inputFrame.height.toString():"0"),g&&p.inputFrame.width===g.width||(m.A_fwi=p.inputFrame.width?p.inputFrame.width.toString():"0"),g&&p.inputFrame.frameRate===g.frameRate||(m.A_fri=p.inputFrame.frameRate?p.inputFrame.frameRate.toString():"0")),m}function N3(r){return r>=0&&r<.17?1:r>=.17&&r<.36?2:r>=.36&&r<.59?3:r>=.59&&r<=1?4:r>1?5:0}function x3(r,i){let a,c,p;switch(i){case zs.CHOOSE_SERVER:a=4096,c="choose server";break;case zs.CLOUD_PROXY:a=1048576,c="proxy";break;case zs.CLOUD_PROXY_5:a=4194304,c="proxy5";break;case zs.CLOUD_PROXY_FALLBACK:a=4194310,c="proxy fallback";break;default:throw new h(u.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:r.detail&&r.detail[502],retry:!1})}if(r.response_body.forEach(g=>{g.buffer&&g.buffer.flag===a&&(p={code:g.buffer.code,addresses:(g.buffer.edges_services||[]).map(m=>M3(M3({},m),{},{ticket:g.buffer.cert})),server_ts:r.enter_ts,uid:g.buffer.uid,cid:g.buffer.cid,cname:g.buffer.cname,detail:M3(M3({},g.buffer.detail),r.detail),flag:g.buffer.flag,opid:r.opid})}),!p)throw new h(u.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(c," from multi unilbs response"),{csIp:r.detail&&r.detail[502]});return p}function k9(r,i){return tx.apply(this,arguments)}function tx(){return tx=U(function*(r,i){return yield Un.all(r.addresses.map(function(){var a=U(function*(c){return{address:ex(c.ip),tcpport:c.port,udpport:c.port,username:i&&rt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?i.toString():Hn.username,password:i&&rt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?yield WK(i.toString()):Hn.password}});return function(c){return a.apply(this,arguments)}}()))}),tx.apply(this,arguments)}function P9(r,i){const a=i._videoHeight||i.getMediaStreamTrack(!0).getSettings().height;return a?a/Ay(r.height):4}function D_(r){let{candidateType:i,relayProtocol:a,type:c,address:p,port:g,protocol:m}=r;return"local-candidate"===c?{candidateType:i,relayProtocol:a,protocol:m}:{candidateType:i,relayProtocol:a,address:p,port:g,protocol:m}}function L3(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function Pw(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?L3(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):L3(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function xD(r){return window.TextEncoder?(new TextEncoder).encode(r).length:r.length}function ic(r){return new Un(i=>{window.setTimeout(i,r)})}function qK(r){const i=new h(u.TIMEOUT,"timeout");return new Un((a,c)=>{window.setTimeout(()=>c(i),r)})}function ns(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,i=arguments.length>1?arguments[1]:void 0;const a=Math.random().toString(16).substr(2,r).toLowerCase();return a.length===r?"".concat(i).concat(a):"".concat(i).concat(a)+ns(r-a.length,"")}function M9(){return ns(32,"").toUpperCase()}const B3=()=>{};function N9(r){return new Un((i,a)=>{let c=!1;const p=document.createElement("video");p.setAttribute("autoplay",""),p.setAttribute("muted",""),p.muted=!0,p.autoplay=!0,p.setAttribute("playsinline",""),p.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(p);const g=Ho()?"canplay":"playing";p.addEventListener(g,()=>{const m=p.videoWidth,A=p.videoHeight;!m&&Uo()||(c=!0,p.srcObject=null,p.remove(),i([m,A]))}),p.srcObject=new MediaStream([r]),p.play().catch(B3),setTimeout(()=>{c||(p.srcObject=null,p.remove(),i([p.videoWidth,p.videoHeight]))},4e3)})}function Mw(r){return Un.all(r.map(i=>i.then(a=>{throw a},a=>a))).then(i=>{throw i},i=>i)}function up(r,i){for(var a=arguments.length,c=new Array(a>2?a-2:0),p=2;p<a;p++)c[p-2]=arguments[p];return 0===r.getListeners(i).length?Un.reject(new h(u.UNEXPECTED_ERROR,"can not emit promise")):new Un((g,m)=>{r.emit(i,...c,g,m)})}function Ro(r,i){if(0===r.getListeners(i).length)return Un.resolve();for(var a=arguments.length,c=new Array(a>2?a-2:0),p=2;p<a;p++)c[p-2]=arguments[p];return up(r,i,...c)}function yy(r,i){if(0===r.getListeners(i).length)return null;for(var a=arguments.length,c=new Array(a>2?a-2:0),p=2;p<a;p++)c[p-2]=arguments[p];return Nw(r,i,...c)}function Nw(r,i){let a=null,c=null;for(var p=arguments.length,g=new Array(p>2?p-2:0),m=2;m<p;m++)g[m-2]=arguments[m];if(r.emit(i,...g,A=>{a=A},A=>{c=A}),null!==c)throw c;if(null===a)throw new h(u.UNEXPECTED_ERROR,"handler is not sync");return a}function F3(r,i){const a=r.indexOf(i);-1!==a&&r.splice(a,1)}function x9(r){const i=[];return r.forEach(a=>{-1===i.indexOf(a)&&i.push(a)}),i}function th(r){Un.resolve().then(r)}function Wa(r){return JSON.parse(JSON.stringify(r))}const L9={};function LD(r,i){L9[i]||(L9[i]=!0,r())}function nx(r){const i=window.atob(r),a=new Uint8Array(new ArrayBuffer(i.length));for(let c=0;c<i.length;c+=1)a[c]=i.charCodeAt(c);return a}function BD(r){let i="";for(let a=0;a<r.length;a+=1)i+=String.fromCharCode(r[a]);return window.btoa(i)}const B9=new class{constructor(){q(this,"fnMap",new Map)}throttleByKey(r,i,a,c){for(var p=arguments.length,g=new Array(p>4?p-4:0),m=4;m<p;m++)g[m-4]=arguments[m];if(this.fnMap.has(i)){const A=this.fnMap.get(i);if(A.threshold!==a){A.fn(...A.args),clearTimeout(A.timer);const _=window.setTimeout(()=>{const S=this.fnMap.get(i);S&&S.fn(...S.args),this.fnMap.delete(i)},a);this.fnMap.set(i,{fn:r,threshold:a,timer:_,args:g,skipFn:c})}else A.skipFn&&A.skipFn(...A.args),this.fnMap.set(i,Pw(Pw({},A),{},{fn:r,args:g,skipFn:c}))}else{const A=window.setTimeout(()=>{const _=this.fnMap.get(i);_&&_.fn(..._.args),this.fnMap.delete(i)},a);this.fnMap.set(i,{fn:r,threshold:a,timer:A,args:g,skipFn:c})}}},a5=B9.throttleByKey.bind(B9),xw=function(){var r=U(function*(i){let{fragementLength:a,referenceList:c,asyncMapHandler:p,allFailedhandler:g,promisesCollector:m}=i,A=0;const _=a;let S,C=0;const T=function(){var D=U(function*(){const B=(()=>{const K=A*_;return c.slice(K,K+_).map(p)})();m&&m.push(...B);try{S=yield Mw(B)}catch(K){if(C+=_,A++,!(C>=c.length))return void(yield T());g(K)}B.forEach(K=>K.cancel())});return function(){return D.apply(this,arguments)}}();return yield T(),S});return function(a){return r.apply(this,arguments)}}();function F9(r){return"object"==typeof r&&null!==r&&!(r instanceof RegExp)}var JK=as,$K=ks("iterator"),U9=!JK(function(){var r=new URL("b?a=1&b=2&c=3","http://a"),i=r.searchParams,a="";return r.pathname="c%20d",i.forEach(function(c,p){i.delete("b"),a+=p+c}),!r.toJSON||!i.sort||"http://a/c%20d?a=1&c=3"!==r.href||"3"!==i.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!i[$K]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host}),U3=Ec,V9=Xc,k_=as,Dm=xo,km=Na,XK=Av,u5=Fl,oc=R0,Il=Object.assign,j9=Object.defineProperty,af=No([].concat),ZK=!Il||k_(function(){if(U3&&1!==Il({b:1},Il(j9({},"a",{enumerable:!0,get:function(){j9(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var r={},i={},a=Symbol(),c="abcdefghijklmnopqrst";return r[a]=7,c.split("").forEach(function(p){i[p]=p}),7!=Il({},r)[a]||Dm(Il({},i)).join("")!=c})?function(r,i){for(var a=u5(r),c=arguments.length,p=1,g=km.f,m=XK.f;c>p;)for(var A,_=oc(arguments[p++]),S=g?af(Dm(_),g(_)):Dm(_),C=S.length,T=0;C>T;)A=S[T++],U3&&!V9(m,_,A)||(a[A]=_[A]);return a}:Il,Q9=Su,ez=Zf,H9=Vr,tz=Xc,l5=Fl,FD=function(r,i,a,c){try{return c?i(Q9(a)[0],a[1]):i(a)}catch(p){ez(r,"throw",p)}},d5=$1,V3=cm,nz=Cu,G9=Fa,rz=jC,iz=po,W9=Or.Array,Lw=No,UD=2147483647,j3=/[^\0-\u007E]/,VD=/[.\u3002\uFF0E\uFF61]/g,p5="Overflow: input needs wider integers to process",rx=Or.RangeError,oz=Lw(VD.exec),Bw=Math.floor,h5=String.fromCharCode,K9=Lw("".charCodeAt),z9=Lw([].join),P_=Lw([].push),sz=Lw("".replace),Q3=Lw("".split),az=Lw("".toLowerCase),f5=function(r){return r+22+75*(r<26)},Y9=function(r,i,a){var c=0;for(r=a?Bw(r/700):r>>1,r+=Bw(r/i);r>455;)r=Bw(r/35),c+=36;return Bw(c+36*r/(r+38))},q9=function(r){var i,a,c=[],p=(r=function(de){for(var ge=[],Se=0,De=de.length;Se<De;){var it=K9(de,Se++);if(it>=55296&&it<=56319&&Se<De){var Rt=K9(de,Se++);56320==(64512&Rt)?P_(ge,((1023&it)<<10)+(1023&Rt)+65536):(P_(ge,it),Se--)}else P_(ge,it)}return ge}(r)).length,g=128,m=0,A=72;for(i=0;i<r.length;i++)(a=r[i])<128&&P_(c,h5(a));var _=c.length,S=_;for(_&&P_(c,"-");S<p;){var C=UD;for(i=0;i<r.length;i++)(a=r[i])>=g&&a<C&&(C=a);var T=S+1;if(C-g>Bw((UD-m)/T))throw rx(p5);for(m+=(C-g)*T,g=C,i=0;i<r.length;i++){if((a=r[i])<g&&++m>UD)throw rx(p5);if(a==g){for(var D=m,B=36;;){var K=B<=A?1:B>=A+26?26:B-A;if(D<K)break;var W=D-K,Z=36-K;P_(c,h5(f5(K+W%Z))),D=Bw(W/Z),B+=36}P_(c,h5(f5(D))),A=Y9(m,T,S==_),m=0,S++}}m++,g++}return z9(c,"")},H3=Or.TypeError,ix=Io,ox=Or,G3=eu,sx=Xc,hd=No,m5=U9,g5=jg,J9=Ab,cz=Wg,$9=om,jD=Up,QD=Yg,ax=cs,X9=Os,uz=Vr,Z9=Mp,eH=Su,HD=Oa,lp=Wl,tH=xg,cx=Zc,_5=jC,nH=po,Fw=function(r,i){if(r<i)throw H3("Not enough arguments");return r},v5=hQ,A5=ks("iterator"),W3="URLSearchParams",rH="URLSearchParamsIterator",iH=jD.set,Pm=jD.getterFor(W3),lz=jD.getterFor(rH),oH=G3("fetch"),ux=G3("Request"),GD=G3("Headers"),y5=ux&&ux.prototype,E5=GD&&GD.prototype,K3=ox.RegExp,dz=ox.TypeError,sH=ox.decodeURIComponent,pz=ox.encodeURIComponent,hz=hd("".charAt),aH=hd([].join),Uw=hd([].push),b5=hd("".replace),fz=hd([].shift),cH=hd([].splice),WD=hd("".split),S5=hd("".slice),uH=/\+/g,z3=Array(4),lH=function(r){return z3[r-1]||(z3[r-1]=K3("((?:%[\\da-f]{2}){"+r+"})","gi"))},mz=function(r){try{return sH(r)}catch{return r}},C5=function(r){var i=b5(r,uH," "),a=4;try{return sH(i)}catch{for(;a;)i=b5(i,lH(a--),mz);return i}},I5=/[!'()~]|%20/g,Y3={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},w5=function(r){return Y3[r]},T5=function(r){return b5(pz(r),I5,w5)},q3=$9(function(r,i){iH(this,{type:rH,iterator:_5(Pm(r).entries),kind:i})},"Iterator",function(){var r=lz(this),i=r.kind,a=r.iterator.next(),c=a.value;return a.done||(a.value="keys"===i?c.key:"values"===i?c.value:[c.key,c.value]),a},!0),KD=function(r){this.entries=[],this.url=null,void 0!==r&&(HD(r)?this.parseObject(r):this.parseQuery("string"==typeof r?"?"===hz(r,0)?S5(r,1):r:lp(r)))};KD.prototype={type:W3,bindURL:function(r){this.url=r,this.update()},parseObject:function(r){var i,a,c,p,g,m,A,_=nH(r);if(_)for(a=(i=_5(r,_)).next;!(c=sx(a,i)).done;){if(g=(p=_5(eH(c.value))).next,(m=sx(g,p)).done||(A=sx(g,p)).done||!sx(g,p).done)throw dz("Expected sequence with length 2");Uw(this.entries,{key:lp(m.value),value:lp(A.value)})}else for(var S in r)X9(r,S)&&Uw(this.entries,{key:S,value:lp(r[S])})},parseQuery:function(r){if(r)for(var i,a,c=WD(r,"&"),p=0;p<c.length;)(i=c[p++]).length&&(a=WD(i,"="),Uw(this.entries,{key:C5(fz(a)),value:C5(aH(a,"="))}))},serialize:function(){for(var r,i=this.entries,a=[],c=0;c<i.length;)r=i[c++],Uw(a,T5(r.key)+"="+T5(r.value));return aH(a,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var J3=function(){QD(this,lx),iH(this,new KD(arguments.length>0?arguments[0]:void 0))},lx=J3.prototype;if(J9(lx,{append:function(r,i){Fw(arguments.length,2);var a=Pm(this);Uw(a.entries,{key:lp(r),value:lp(i)}),a.updateURL()},delete:function(r){Fw(arguments.length,1);for(var i=Pm(this),a=i.entries,c=lp(r),p=0;p<a.length;)a[p].key===c?cH(a,p,1):p++;i.updateURL()},get:function(r){Fw(arguments.length,1);for(var i=Pm(this).entries,a=lp(r),c=0;c<i.length;c++)if(i[c].key===a)return i[c].value;return null},getAll:function(r){Fw(arguments.length,1);for(var i=Pm(this).entries,a=lp(r),c=[],p=0;p<i.length;p++)i[p].key===a&&Uw(c,i[p].value);return c},has:function(r){Fw(arguments.length,1);for(var i=Pm(this).entries,a=lp(r),c=0;c<i.length;)if(i[c++].key===a)return!0;return!1},set:function(r,i){Fw(arguments.length,1);for(var a,c=Pm(this),p=c.entries,g=!1,m=lp(r),A=lp(i),_=0;_<p.length;_++)(a=p[_]).key===m&&(g?cH(p,_--,1):(g=!0,a.value=A));g||Uw(p,{key:m,value:A}),c.updateURL()},sort:function(){var r=Pm(this);v5(r.entries,function(i,a){return i.key>a.key?1:-1}),r.updateURL()},forEach:function(r){for(var i,a=Pm(this).entries,c=uz(r,arguments.length>1?arguments[1]:void 0),p=0;p<a.length;)c((i=a[p++]).value,i.key,this)},keys:function(){return new q3(this,"keys")},values:function(){return new q3(this,"values")},entries:function(){return new q3(this,"entries")}},{enumerable:!0}),g5(lx,A5,lx.entries,{name:"entries"}),g5(lx,"toString",function(){return Pm(this).serialize()},{enumerable:!0}),cz(J3,W3),ix({global:!0,forced:!m5},{URLSearchParams:J3}),!m5&&ax(GD)){var dH=hd(E5.has),gz=hd(E5.set),pH=function(r){if(HD(r)){var i,a=r.body;if(Z9(a)===W3)return i=r.headers?new GD(r.headers):new GD,dH(i,"content-type")||gz(i,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),tH(r,{body:cx(0,lp(a)),headers:cx(0,i)})}return r};if(ax(oH)&&ix({global:!0,enumerable:!0,forced:!0},{fetch:function(r){return oH(r,arguments.length>1?pH(arguments[1]):{})}}),ax(ux)){var dx=function(r){return QD(this,y5),new ux(r,arguments.length>1?pH(arguments[1]):{})};y5.constructor=dx,dx.prototype=y5,ix({global:!0,forced:!0},{Request:dx})}}var nh,R5=Io,$3=Ec,O5=U9,X3=Or,D5=Vr,jc=No,k5=Jv.f,zD=jg,_z=Yg,P5=Os,px=ZK,Vw=function(r){var i=l5(r),a=V3(this),c=arguments.length,p=c>1?arguments[1]:void 0,g=void 0!==p;g&&(p=H9(p,c>2?arguments[2]:void 0));var m,A,_,S,C,T,D=iz(i),B=0;if(!D||this==W9&&d5(D))for(m=nz(i),A=a?new this(m):W9(m);m>B;B++)T=g?p(i[B],B):i[B],G9(A,B,T);else for(C=(S=rz(i,D)).next,A=a?new this:[];!(_=tz(C,S)).done;B++)T=g?FD(S,p,[_.value,B],!0):_.value,G9(A,B,T);return A.length=B,A},cf=g4,fH=p2.codeAt,M_=Wl,M5=Wg,hx={URLSearchParams:J3,getState:Pm},mH=Up.set,fx=Up.getterFor("URL"),eU=hx.URLSearchParams,vz=hx.getState,YD=X3.URL,tU=X3.TypeError,mx=X3.parseInt,gH=Math.floor,gx=Math.pow,dp=jc("".charAt),fd=jc(/./.exec),qD=jc([].join),_H=jc(1..toString),vH=jc([].pop),jw=jc([].push),N5=jc("".replace),AH=jc([].shift),yH=jc("".split),Qw=jc("".slice),_x=jc("".toLowerCase),x5=jc([].unshift),nU="Invalid scheme",NS="Invalid host",rU="Invalid port",EH=/[a-z]/i,Az=/[\d+-.a-z]/i,iU=/\d/,bH=/^0x/i,SH=/^[0-7]+$/,L5=/^\d+$/,oU=/^[\da-f]+$/i,yz=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Ez=/[\0\t\n\r #/:<>?@[\\\]^|]/,bz=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Sz=/[\t\n\r]/g,JD=function(r){var i,a,c,p;if("number"==typeof r){for(i=[],a=0;a<4;a++)x5(i,r%256),r=gH(r/256);return qD(i,".")}if("object"==typeof r){for(i="",c=function(g){for(var m=null,A=1,_=null,S=0,C=0;C<8;C++)0!==g[C]?(S>A&&(m=_,A=S),_=null,S=0):(null===_&&(_=C),++S);return S>A&&(m=_,A=S),m}(r),a=0;a<8;a++)p&&0===r[a]||(p&&(p=!1),c===a?(i+=a?":":"::",p=!0):(i+=_H(r[a],16),a<7&&(i+=":")));return"["+i+"]"}return r},Hw={},B5=px({},Hw,{" ":1,'"':1,"<":1,">":1,"`":1}),F5=px({},B5,{"#":1,"?":1,"{":1,"}":1}),sU=px({},F5,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),md=function(r,i){var a=fH(r,0);return a>32&&a<127&&!P5(i,r)?r:encodeURIComponent(r)},$D={ftp:21,file:null,http:80,https:443,ws:80,wss:443},XD=function(r,i){var a;return 2==r.length&&fd(EH,dp(r,0))&&(":"==(a=dp(r,1))||!i&&"|"==a)},U5=function(r){var i;return r.length>1&&XD(Qw(r,0,2))&&(2==r.length||"/"===(i=dp(r,2))||"\\"===i||"?"===i||"#"===i)},CH=function(r){return"."===r||"%2e"===_x(r)},V5={},j5={},aU={},Q5={},H5={},cU={},G5={},W5={},vx={},Ax={},uU={},lU={},dU={},pU={},K5={},hU={},Gw={},Mm={},z5={},xS={},N_={},fU=function(r,i,a){var c,p,g,m=M_(r);if(i){if(p=this.parse(m))throw tU(p);this.searchParams=null}else{if(void 0!==a&&(c=new fU(a,!0)),p=this.parse(m,null,c))throw tU(p);(g=vz(new eU)).bindURL(this),this.searchParams=g}};fU.prototype={type:"URL",parse:function(r,i,a){var c,p,g,m,A,_=this,S=i||V5,C=0,T="",D=!1,B=!1,K=!1;for(r=M_(r),i||(_.scheme="",_.username="",_.password="",_.host=null,_.port=null,_.path=[],_.query=null,_.fragment=null,_.cannotBeABaseURL=!1,r=N5(r,bz,"")),r=N5(r,Sz,""),c=Vw(r);C<=c.length;){switch(p=c[C],S){case V5:if(!p||!fd(EH,p)){if(i)return nU;S=aU;continue}T+=_x(p),S=j5;break;case j5:if(p&&(fd(Az,p)||"+"==p||"-"==p||"."==p))T+=_x(p);else{if(":"!=p){if(i)return nU;T="",S=aU,C=0;continue}if(i&&(_.isSpecial()!=P5($D,T)||"file"==T&&(_.includesCredentials()||null!==_.port)||"file"==_.scheme&&!_.host))return;if(_.scheme=T,i)return void(_.isSpecial()&&$D[_.scheme]==_.port&&(_.port=null));T="","file"==_.scheme?S=pU:_.isSpecial()&&a&&a.scheme==_.scheme?S=Q5:_.isSpecial()?S=W5:"/"==c[C+1]?(S=H5,C++):(_.cannotBeABaseURL=!0,jw(_.path,""),S=z5)}break;case aU:if(!a||a.cannotBeABaseURL&&"#"!=p)return nU;if(a.cannotBeABaseURL&&"#"==p){_.scheme=a.scheme,_.path=cf(a.path),_.query=a.query,_.fragment="",_.cannotBeABaseURL=!0,S=N_;break}S="file"==a.scheme?pU:cU;continue;case Q5:if("/"!=p||"/"!=c[C+1]){S=cU;continue}S=vx,C++;break;case H5:if("/"==p){S=Ax;break}S=Mm;continue;case cU:if(_.scheme=a.scheme,p==nh)_.username=a.username,_.password=a.password,_.host=a.host,_.port=a.port,_.path=cf(a.path),_.query=a.query;else if("/"==p||"\\"==p&&_.isSpecial())S=G5;else if("?"==p)_.username=a.username,_.password=a.password,_.host=a.host,_.port=a.port,_.path=cf(a.path),_.query="",S=xS;else{if("#"!=p){_.username=a.username,_.password=a.password,_.host=a.host,_.port=a.port,_.path=cf(a.path),_.path.length--,S=Mm;continue}_.username=a.username,_.password=a.password,_.host=a.host,_.port=a.port,_.path=cf(a.path),_.query=a.query,_.fragment="",S=N_}break;case G5:if(!_.isSpecial()||"/"!=p&&"\\"!=p){if("/"!=p){_.username=a.username,_.password=a.password,_.host=a.host,_.port=a.port,S=Mm;continue}S=Ax}else S=vx;break;case W5:if(S=vx,"/"!=p||"/"!=dp(T,C+1))continue;C++;break;case vx:if("/"!=p&&"\\"!=p){S=Ax;continue}break;case Ax:if("@"==p){D&&(T="%40"+T),D=!0,g=Vw(T);for(var W=0;W<g.length;W++){var Z=g[W];if(":"!=Z||K){var de=md(Z,sU);K?_.password+=de:_.username+=de}else K=!0}T=""}else if(p==nh||"/"==p||"?"==p||"#"==p||"\\"==p&&_.isSpecial()){if(D&&""==T)return"Invalid authority";C-=Vw(T).length+1,T="",S=uU}else T+=p;break;case uU:case lU:if(i&&"file"==_.scheme){S=hU;continue}if(":"!=p||B){if(p==nh||"/"==p||"?"==p||"#"==p||"\\"==p&&_.isSpecial()){if(_.isSpecial()&&""==T)return NS;if(i&&""==T&&(_.includesCredentials()||null!==_.port))return;if(m=_.parseHost(T))return m;if(T="",S=Gw,i)return;continue}"["==p?B=!0:"]"==p&&(B=!1),T+=p}else{if(""==T)return NS;if(m=_.parseHost(T))return m;if(T="",S=dU,i==lU)return}break;case dU:if(!fd(iU,p)){if(p==nh||"/"==p||"?"==p||"#"==p||"\\"==p&&_.isSpecial()||i){if(""!=T){var ge=mx(T,10);if(ge>65535)return rU;_.port=_.isSpecial()&&ge===$D[_.scheme]?null:ge,T=""}if(i)return;S=Gw;continue}return rU}T+=p;break;case pU:if(_.scheme="file","/"==p||"\\"==p)S=K5;else{if(!a||"file"!=a.scheme){S=Mm;continue}if(p==nh)_.host=a.host,_.path=cf(a.path),_.query=a.query;else if("?"==p)_.host=a.host,_.path=cf(a.path),_.query="",S=xS;else{if("#"!=p){U5(qD(cf(c,C),""))||(_.host=a.host,_.path=cf(a.path),_.shortenPath()),S=Mm;continue}_.host=a.host,_.path=cf(a.path),_.query=a.query,_.fragment="",S=N_}}break;case K5:if("/"==p||"\\"==p){S=hU;break}a&&"file"==a.scheme&&!U5(qD(cf(c,C),""))&&(XD(a.path[0],!0)?jw(_.path,a.path[0]):_.host=a.host),S=Mm;continue;case hU:if(p==nh||"/"==p||"\\"==p||"?"==p||"#"==p){if(!i&&XD(T))S=Mm;else if(""==T){if(_.host="",i)return;S=Gw}else{if(m=_.parseHost(T))return m;if("localhost"==_.host&&(_.host=""),i)return;T="",S=Gw}continue}T+=p;break;case Gw:if(_.isSpecial()){if(S=Mm,"/"!=p&&"\\"!=p)continue}else if(i||"?"!=p)if(i||"#"!=p){if(p!=nh&&(S=Mm,"/"!=p))continue}else _.fragment="",S=N_;else _.query="",S=xS;break;case Mm:if(p==nh||"/"==p||"\\"==p&&_.isSpecial()||!i&&("?"==p||"#"==p)){if(".."===(A=_x(A=T))||"%2e."===A||".%2e"===A||"%2e%2e"===A?(_.shortenPath(),"/"==p||"\\"==p&&_.isSpecial()||jw(_.path,"")):CH(T)?"/"==p||"\\"==p&&_.isSpecial()||jw(_.path,""):("file"==_.scheme&&!_.path.length&&XD(T)&&(_.host&&(_.host=""),T=dp(T,0)+":"),jw(_.path,T)),T="","file"==_.scheme&&(p==nh||"?"==p||"#"==p))for(;_.path.length>1&&""===_.path[0];)AH(_.path);"?"==p?(_.query="",S=xS):"#"==p&&(_.fragment="",S=N_)}else T+=md(p,F5);break;case z5:"?"==p?(_.query="",S=xS):"#"==p?(_.fragment="",S=N_):p!=nh&&(_.path[0]+=md(p,Hw));break;case xS:i||"#"!=p?p!=nh&&("'"==p&&_.isSpecial()?_.query+="%27":_.query+="#"==p?"%23":md(p,Hw)):(_.fragment="",S=N_);break;case N_:p!=nh&&(_.fragment+=md(p,B5))}C++}},parseHost:function(r){var i,a,c;if("["==dp(r,0)){if("]"!=dp(r,r.length-1)||!(i=function(p){var g,m,A,_,S,C,T,D=[0,0,0,0,0,0,0,0],B=0,K=null,W=0,Z=function(){return dp(p,W)};if(":"==Z()){if(":"!=dp(p,1))return;W+=2,K=++B}for(;Z();){if(8==B)return;if(":"!=Z()){for(g=m=0;m<4&&fd(oU,Z());)g=16*g+mx(Z(),16),W++,m++;if("."==Z()){if(0==m||(W-=m,B>6))return;for(A=0;Z();){if(_=null,A>0){if(!("."==Z()&&A<4))return;W++}if(!fd(iU,Z()))return;for(;fd(iU,Z());){if(S=mx(Z(),10),null===_)_=S;else{if(0==_)return;_=10*_+S}if(_>255)return;W++}D[B]=256*D[B]+_,2!=++A&&4!=A||B++}if(4!=A)return;break}if(":"==Z()){if(W++,!Z())return}else if(Z())return;D[B++]=g}else{if(null!==K)return;W++,K=++B}}if(null!==K)for(C=B-K,B=7;0!=B&&C>0;)T=D[B],D[B--]=D[K+C-1],D[K+--C]=T;else if(8!=B)return;return D}(Qw(r,1,-1))))return NS;this.host=i}else if(this.isSpecial()){if(r=function(r){var i,a,c=[],p=Q3(sz(az(r),VD,"."),".");for(i=0;i<p.length;i++)P_(c,oz(j3,a=p[i])?"xn--"+q9(a):a);return z9(c,".")}(r),fd(yz,r)||null===(i=function(p){var g,m,A,_,S,C,T,D=yH(p,".");if(D.length&&""==D[D.length-1]&&D.length--,(g=D.length)>4)return p;for(m=[],A=0;A<g;A++){if(""==(_=D[A]))return p;if(S=10,_.length>1&&"0"==dp(_,0)&&(S=fd(bH,_)?16:8,_=Qw(_,8==S?1:2)),""===_)C=0;else{if(!fd(10==S?L5:8==S?SH:oU,_))return p;C=mx(_,S)}jw(m,C)}for(A=0;A<g;A++)if(C=m[A],A==g-1){if(C>=gx(256,5-g))return null}else if(C>255)return null;for(T=vH(m),A=0;A<m.length;A++)T+=m[A]*gx(256,3-A);return T}(r)))return NS;this.host=i}else{if(fd(Ez,r))return NS;for(i="",a=Vw(r),c=0;c<a.length;c++)i+=md(a[c],Hw);this.host=i}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return P5($D,this.scheme)},shortenPath:function(){var r=this.path,i=r.length;!i||"file"==this.scheme&&1==i&&XD(r[0],!0)||r.length--},serialize:function(){var r=this,i=r.scheme,a=r.username,c=r.password,p=r.host,g=r.port,m=r.path,A=r.query,_=r.fragment,S=i+":";return null!==p?(S+="//",r.includesCredentials()&&(S+=a+(c?":"+c:"")+"@"),S+=JD(p),null!==g&&(S+=":"+g)):"file"==i&&(S+="//"),S+=r.cannotBeABaseURL?m[0]:m.length?"/"+qD(m,"/"):"",null!==A&&(S+="?"+A),null!==_&&(S+="#"+_),S},setHref:function(r){var i=this.parse(r);if(i)throw tU(i);this.searchParams.update()},getOrigin:function(){var r=this.scheme,i=this.port;if("blob"==r)try{return new Ww(r.path[0]).origin}catch{return"null"}return"file"!=r&&this.isSpecial()?r+"://"+JD(this.host)+(null!==i?":"+i:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(r){this.parse(M_(r)+":",V5)},getUsername:function(){return this.username},setUsername:function(r){var i=Vw(M_(r));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var a=0;a<i.length;a++)this.username+=md(i[a],sU)}},getPassword:function(){return this.password},setPassword:function(r){var i=Vw(M_(r));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var a=0;a<i.length;a++)this.password+=md(i[a],sU)}},getHost:function(){var r=this.host,i=this.port;return null===r?"":null===i?JD(r):JD(r)+":"+i},setHost:function(r){this.cannotBeABaseURL||this.parse(r,uU)},getHostname:function(){var r=this.host;return null===r?"":JD(r)},setHostname:function(r){this.cannotBeABaseURL||this.parse(r,lU)},getPort:function(){var r=this.port;return null===r?"":M_(r)},setPort:function(r){this.cannotHaveUsernamePasswordPort()||(""==(r=M_(r))?this.port=null:this.parse(r,dU))},getPathname:function(){var r=this.path;return this.cannotBeABaseURL?r[0]:r.length?"/"+qD(r,"/"):""},setPathname:function(r){this.cannotBeABaseURL||(this.path=[],this.parse(r,Gw))},getSearch:function(){var r=this.query;return r?"?"+r:""},setSearch:function(r){""==(r=M_(r))?this.query=null:("?"==dp(r,0)&&(r=Qw(r,1)),this.query="",this.parse(r,xS)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var r=this.fragment;return r?"#"+r:""},setHash:function(r){""!=(r=M_(r))?("#"==dp(r,0)&&(r=Qw(r,1)),this.fragment="",this.parse(r,N_)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ww=function(r){var i=_z(this,yx),c=mH(i,new fU(r,!1,arguments.length>1?arguments[1]:void 0));$3||(i.href=c.serialize(),i.origin=c.getOrigin(),i.protocol=c.getProtocol(),i.username=c.getUsername(),i.password=c.getPassword(),i.host=c.getHost(),i.hostname=c.getHostname(),i.port=c.getPort(),i.pathname=c.getPathname(),i.search=c.getSearch(),i.searchParams=c.getSearchParams(),i.hash=c.getHash())},yx=Ww.prototype,rh=function(r,i){return{get:function(){return fx(this)[r]()},set:i&&function(a){return fx(this)[i](a)},configurable:!0,enumerable:!0}};if($3&&k5(yx,{href:rh("serialize","setHref"),origin:rh("getOrigin"),protocol:rh("getProtocol","setProtocol"),username:rh("getUsername","setUsername"),password:rh("getPassword","setPassword"),host:rh("getHost","setHost"),hostname:rh("getHostname","setHostname"),port:rh("getPort","setPort"),pathname:rh("getPathname","setPathname"),search:rh("getSearch","setSearch"),searchParams:rh("getSearchParams"),hash:rh("getHash","setHash")}),zD(yx,"toJSON",function(){return fx(this).serialize()},{enumerable:!0}),zD(yx,"toString",function(){return fx(this).serialize()},{enumerable:!0}),YD){var Ex=YD.createObjectURL,IH=YD.revokeObjectURL;Ex&&zD(Ww,"createObjectURL",D5(Ex,YD)),IH&&zD(Ww,"revokeObjectURL",D5(IH,YD))}M5(Ww,"URL"),R5({global:!0,forced:!O5,sham:!$3},{URL:Ww});var Y5=Md.URL;const Cz={[_S.ACCESS_POINT]:{[Hs.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Hs.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Hs.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Hs.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Hs.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Hs.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Hs.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[_S.UNILBS]:{[Lu.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Lu.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Lu.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Lu.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Lu.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Lu.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Lu.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Lu.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Lu.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Lu.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Lu.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Lu.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[_S.STRING_UID_ALLOCATOR]:{[_w.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[_w.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[_w.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function ZD(r){const i=Cz[Math.floor(r/1e4)];if(!i)return{desc:"unkonw error",retry:!1};const a=i[r%1e4];if(!a){if(Math.floor(r/1e4)===_S.ACCESS_POINT){const c=r%1e4;if("1"===c.toString()[0])return{desc:r.toString(),retry:!1};if("2"===c.toString()[0])return{desc:r.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return a}const mU={[or.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[or.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[or.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[or.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[or.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[or.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[or.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[or.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[or.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[or.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[or.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[or.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[or.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[or.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[or.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[or.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[or.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[or.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[or.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[or.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[or.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[or.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[or.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[or.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[or.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[or.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[or.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[or.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[or.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[or.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[or.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[or.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[or.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[or.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[or.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[or.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[or.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[or.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[or.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[or.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[or.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[or.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[or.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[or.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[or.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[or.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[or.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[or.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[or.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[or.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[or.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[or.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[or.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[or.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[or.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[or.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[or.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[or.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}};function gU(r){return mU[r]||{desc:"UNKNOW_ERROR_".concat(r),action:"failed"}}var wH={exports:{}};(function(r,i){r.exports=function(){var a={d:function(mt,Ee){for(var $e in Ee)a.o(Ee,$e)&&!a.o(mt,$e)&&Object.defineProperty(mt,$e,{enumerable:!0,get:Ee[$e]})},o:function(mt,Ee){return Object.prototype.hasOwnProperty.call(mt,Ee)},r:function(mt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(mt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(mt,"__esModule",{value:!0})}},c={};a.r(c),a.d(c,{DataViewIndexOutOfBoundsError:function(){return Q},DecodeError:function(){return De},Decoder:function(){return ke},EXT_TIMESTAMP:function(){return it},Encoder:function(){return At},ExtData:function(){return ge},ExtensionCodec:function(){return bt},decode:function(){return at},decodeArrayStream:function(){return Yo},decodeAsync:function(){return ci},decodeMulti:function(){return Vt},decodeMultiStream:function(){return Ji},decodeStream:function(){return pf},decodeTimestampExtension:function(){return pn},decodeTimestampToTimeSpec:function(){return On},encode:function(){return t},encodeDateToTimeSpec:function(){return Dt},encodeTimeSpecToTimestamp:function(){return Rt},encodeTimestampExtension:function(){return Pt}});var p=4294967295;function g(mt,Ee,$e){var Ct=Math.floor($e/4294967296),_t=$e;mt.setUint32(Ee,Ct),mt.setUint32(Ee+4,_t)}function m(mt,Ee){return 4294967296*mt.getInt32(Ee)+mt.getUint32(Ee+4)}var A=function(mt,Ee){var $e="function"==typeof Symbol&&mt[Symbol.iterator];if(!$e)return mt;var Ct,_t,on=$e.call(mt),wt=[];try{for(;(void 0===Ee||Ee-- >0)&&!(Ct=on.next()).done;)wt.push(Ct.value)}catch(Yt){_t={error:Yt}}finally{try{Ct&&!Ct.done&&($e=on.return)&&$e.call(on)}finally{if(_t)throw _t.error}}return wt},_=function(mt,Ee){for(var $e=0,Ct=Ee.length,_t=mt.length;$e<Ct;$e++,_t++)mt[_t]=Ee[$e];return mt},S=typeof TextEncoder<"u"&&typeof TextDecoder<"u";function C(mt){for(var Ee=mt.length,$e=0,Ct=0;Ct<Ee;){var _t=mt.charCodeAt(Ct++);if(0!=(4294967168&_t))if(0==(4294965248&_t))$e+=2;else{if(_t>=55296&&_t<=56319&&Ct<Ee){var on=mt.charCodeAt(Ct);56320==(64512&on)&&(++Ct,_t=((1023&_t)<<10)+(1023&on)+65536)}$e+=0==(4294901760&_t)?3:4}else $e++}return $e}var T=S?new TextEncoder:void 0,D=S?typeof process<"u"?200:0:p,B=T?.encodeInto?function(mt,Ee,$e){T.encodeInto(mt,Ee.subarray($e))}:function(mt,Ee,$e){Ee.set(T.encode(mt),$e)};function K(mt,Ee,$e){for(var Ct=Ee,_t=Ct+$e,on=[],wt="";Ct<_t;){var Yt=mt[Ct++];if(0==(128&Yt))on.push(Yt);else if(192==(224&Yt)){var An=63&mt[Ct++];on.push((31&Yt)<<6|An)}else if(224==(240&Yt)){An=63&mt[Ct++];var jn=63&mt[Ct++];on.push((31&Yt)<<12|An<<6|jn)}else if(240==(248&Yt)){var sn=(7&Yt)<<18|(An=63&mt[Ct++])<<12|(jn=63&mt[Ct++])<<6|63&mt[Ct++];sn>65535&&(on.push((sn-=65536)>>>10&1023|55296),sn=56320|1023&sn),on.push(sn)}else on.push(Yt);on.length>=4096&&(wt+=String.fromCharCode.apply(String,_([],A(on))),on.length=0)}return on.length>0&&(wt+=String.fromCharCode.apply(String,_([],A(on)))),wt}var W,Z=S?new TextDecoder:null,de=S?typeof process<"u"?200:0:p,ge=function(mt,Ee){this.type=mt,this.data=Ee},Se=(W=function(mt,Ee){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($e,Ct){$e.__proto__=Ct}||function($e,Ct){for(var _t in Ct)Object.prototype.hasOwnProperty.call(Ct,_t)&&($e[_t]=Ct[_t])})(mt,Ee)},function(mt,Ee){if("function"!=typeof Ee&&null!==Ee)throw new TypeError("Class extends value "+String(Ee)+" is not a constructor or null");function $e(){this.constructor=mt}W(mt,Ee),mt.prototype=null===Ee?Object.create(Ee):($e.prototype=Ee.prototype,new $e)}),De=function(mt){function Ee($e){var Ct=mt.call(this,$e)||this,_t=Object.create(Ee.prototype);return Object.setPrototypeOf(Ct,_t),Object.defineProperty(Ct,"name",{configurable:!0,enumerable:!1,value:Ee.name}),Ct}return Se(Ee,mt),Ee}(Error),it=-1;function Rt(mt){var Ee,$e=mt.sec,Ct=mt.nsec;if($e>=0&&Ct>=0&&$e<=17179869183){if(0===Ct&&$e<=4294967295){var _t=new Uint8Array(4);return(Ee=new DataView(_t.buffer)).setUint32(0,$e),_t}var on=$e/4294967296,wt=4294967295&$e;return _t=new Uint8Array(8),(Ee=new DataView(_t.buffer)).setUint32(0,Ct<<2|3&on),Ee.setUint32(4,wt),_t}return _t=new Uint8Array(12),(Ee=new DataView(_t.buffer)).setUint32(0,Ct),g(Ee,4,$e),_t}function Dt(mt){var Ee=mt.getTime(),$e=Math.floor(Ee/1e3),Ct=1e6*(Ee-1e3*$e),_t=Math.floor(Ct/1e9);return{sec:$e+_t,nsec:Ct-1e9*_t}}function Pt(mt){return mt instanceof Date?Rt(Dt(mt)):null}function On(mt){var Ee=new DataView(mt.buffer,mt.byteOffset,mt.byteLength);switch(mt.byteLength){case 4:return{sec:Ee.getUint32(0),nsec:0};case 8:var $e=Ee.getUint32(0);return{sec:4294967296*(3&$e)+Ee.getUint32(4),nsec:$e>>>2};case 12:return{sec:m(Ee,4),nsec:Ee.getUint32(0)};default:throw new De("Unrecognized data size for timestamp (expected 4, 8, or 12): "+mt.length)}}function pn(mt){var Ee=On(mt);return new Date(1e3*Ee.sec+Ee.nsec/1e6)}var cn={type:it,encode:Pt,decode:pn},bt=function(){function mt(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(cn)}return mt.prototype.register=function(Ee){var $e=Ee.type,Ct=Ee.encode,_t=Ee.decode;if($e>=0)this.encoders[$e]=Ct,this.decoders[$e]=_t;else{var on=1+$e;this.builtInEncoders[on]=Ct,this.builtInDecoders[on]=_t}},mt.prototype.tryToEncode=function(Ee,$e){for(var Ct=0;Ct<this.builtInEncoders.length;Ct++)if(null!=(_t=this.builtInEncoders[Ct])&&null!=(on=_t(Ee,$e)))return new ge(-1-Ct,on);for(Ct=0;Ct<this.encoders.length;Ct++){var _t,on;if(null!=(_t=this.encoders[Ct])&&null!=(on=_t(Ee,$e)))return new ge(Ct,on)}return Ee instanceof ge?Ee:null},mt.prototype.decode=function(Ee,$e,Ct){var _t=$e<0?this.builtInDecoders[-1-$e]:this.decoders[$e];return _t?_t(Ee,$e,Ct):new ge($e,Ee)},mt.defaultCodec=new mt,mt}();function Ve(mt){return mt instanceof Uint8Array?mt:ArrayBuffer.isView(mt)?new Uint8Array(mt.buffer,mt.byteOffset,mt.byteLength):mt instanceof ArrayBuffer?new Uint8Array(mt):Uint8Array.from(mt)}var nt=function(mt){var Ee="function"==typeof Symbol&&Symbol.iterator,$e=Ee&&mt[Ee],Ct=0;if($e)return $e.call(mt);if(mt&&"number"==typeof mt.length)return{next:function(){return mt&&Ct>=mt.length&&(mt=void 0),{value:mt&&mt[Ct++],done:!mt}}};throw new TypeError(Ee?"Object is not iterable.":"Symbol.iterator is not defined.")},At=function(){function mt(Ee,$e,Ct,_t,on,wt,Yt,An){void 0===Ee&&(Ee=bt.defaultCodec),void 0===$e&&($e=void 0),void 0===Ct&&(Ct=100),void 0===_t&&(_t=2048),void 0===on&&(on=!1),void 0===wt&&(wt=!1),void 0===Yt&&(Yt=!1),void 0===An&&(An=!1),this.extensionCodec=Ee,this.context=$e,this.maxDepth=Ct,this.initialBufferSize=_t,this.sortKeys=on,this.forceFloat32=wt,this.ignoreUndefined=Yt,this.forceIntegerToFloat=An,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return mt.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},mt.prototype.reinitializeState=function(){this.pos=0},mt.prototype.encode=function(Ee){return this.reinitializeState(),this.doEncode(Ee,1),this.getUint8Array()},mt.prototype.doEncode=function(Ee,$e){if($e>this.maxDepth)throw new Error("Too deep objects in depth "+$e);null==Ee?this.encodeNil():"boolean"==typeof Ee?this.encodeBoolean(Ee):"number"==typeof Ee?this.encodeNumber(Ee):"string"==typeof Ee?this.encodeString(Ee):this.encodeObject(Ee,$e)},mt.prototype.ensureBufferSizeToWrite=function(Ee){var $e=this.pos+Ee;this.view.byteLength<$e&&this.resizeBuffer(2*$e)},mt.prototype.resizeBuffer=function(Ee){var $e=new ArrayBuffer(Ee),Ct=new Uint8Array($e),_t=new DataView($e);Ct.set(this.bytes),this.view=_t,this.bytes=Ct},mt.prototype.encodeNil=function(){this.writeU8(192)},mt.prototype.encodeBoolean=function(Ee){this.writeU8(!1===Ee?194:195)},mt.prototype.encodeNumber=function(Ee){Number.isSafeInteger(Ee)&&!this.forceIntegerToFloat?Ee>=0?Ee<128?this.writeU8(Ee):Ee<256?(this.writeU8(204),this.writeU8(Ee)):Ee<65536?(this.writeU8(205),this.writeU16(Ee)):Ee<4294967296?(this.writeU8(206),this.writeU32(Ee)):(this.writeU8(207),this.writeU64(Ee)):Ee>=-32?this.writeU8(224|Ee+32):Ee>=-128?(this.writeU8(208),this.writeI8(Ee)):Ee>=-32768?(this.writeU8(209),this.writeI16(Ee)):Ee>=-2147483648?(this.writeU8(210),this.writeI32(Ee)):(this.writeU8(211),this.writeI64(Ee)):this.forceFloat32?(this.writeU8(202),this.writeF32(Ee)):(this.writeU8(203),this.writeF64(Ee))},mt.prototype.writeStringHeader=function(Ee){if(Ee<32)this.writeU8(160+Ee);else if(Ee<256)this.writeU8(217),this.writeU8(Ee);else if(Ee<65536)this.writeU8(218),this.writeU16(Ee);else{if(!(Ee<4294967296))throw new Error("Too long string: "+Ee+" bytes in UTF-8");this.writeU8(219),this.writeU32(Ee)}},mt.prototype.encodeString=function(Ee){if(Ee.length>D){var $e=C(Ee);this.ensureBufferSizeToWrite(5+$e),this.writeStringHeader($e),B(Ee,this.bytes,this.pos),this.pos+=$e}else $e=C(Ee),this.ensureBufferSizeToWrite(5+$e),this.writeStringHeader($e),function(Ct,_t,on){for(var wt=Ct.length,Yt=on,An=0;An<wt;){var jn=Ct.charCodeAt(An++);if(0!=(4294967168&jn)){if(0==(4294965248&jn))_t[Yt++]=jn>>6&31|192;else{if(jn>=55296&&jn<=56319&&An<wt){var sn=Ct.charCodeAt(An);56320==(64512&sn)&&(++An,jn=((1023&jn)<<10)+(1023&sn)+65536)}0==(4294901760&jn)?(_t[Yt++]=jn>>12&15|224,_t[Yt++]=jn>>6&63|128):(_t[Yt++]=jn>>18&7|240,_t[Yt++]=jn>>12&63|128,_t[Yt++]=jn>>6&63|128)}_t[Yt++]=63&jn|128}else _t[Yt++]=jn}}(Ee,this.bytes,this.pos),this.pos+=$e},mt.prototype.encodeObject=function(Ee,$e){var Ct=this.extensionCodec.tryToEncode(Ee,this.context);if(null!=Ct)this.encodeExtension(Ct);else if(Array.isArray(Ee))this.encodeArray(Ee,$e);else if(ArrayBuffer.isView(Ee))this.encodeBinary(Ee);else{if("object"!=typeof Ee)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(Ee));this.encodeMap(Ee,$e)}},mt.prototype.encodeBinary=function(Ee){var $e=Ee.byteLength;if($e<256)this.writeU8(196),this.writeU8($e);else if($e<65536)this.writeU8(197),this.writeU16($e);else{if(!($e<4294967296))throw new Error("Too large binary: "+$e);this.writeU8(198),this.writeU32($e)}var Ct=Ve(Ee);this.writeU8a(Ct)},mt.prototype.encodeArray=function(Ee,$e){var Ct,_t,on=Ee.length;if(on<16)this.writeU8(144+on);else if(on<65536)this.writeU8(220),this.writeU16(on);else{if(!(on<4294967296))throw new Error("Too large array: "+on);this.writeU8(221),this.writeU32(on)}try{for(var wt=nt(Ee),Yt=wt.next();!Yt.done;Yt=wt.next())this.doEncode(Yt.value,$e+1)}catch(jn){Ct={error:jn}}finally{try{Yt&&!Yt.done&&(_t=wt.return)&&_t.call(wt)}finally{if(Ct)throw Ct.error}}},mt.prototype.countWithoutUndefined=function(Ee,$e){var Ct,_t,on=0;try{for(var wt=nt($e),Yt=wt.next();!Yt.done;Yt=wt.next())void 0!==Ee[Yt.value]&&on++}catch(An){Ct={error:An}}finally{try{Yt&&!Yt.done&&(_t=wt.return)&&_t.call(wt)}finally{if(Ct)throw Ct.error}}return on},mt.prototype.encodeMap=function(Ee,$e){var Ct,_t,on=Object.keys(Ee);this.sortKeys&&on.sort();var wt=this.ignoreUndefined?this.countWithoutUndefined(Ee,on):on.length;if(wt<16)this.writeU8(128+wt);else if(wt<65536)this.writeU8(222),this.writeU16(wt);else{if(!(wt<4294967296))throw new Error("Too large map object: "+wt);this.writeU8(223),this.writeU32(wt)}try{for(var Yt=nt(on),An=Yt.next();!An.done;An=Yt.next()){var jn=An.value,sn=Ee[jn];this.ignoreUndefined&&void 0===sn||(this.encodeString(jn),this.doEncode(sn,$e+1))}}catch(Nn){Ct={error:Nn}}finally{try{An&&!An.done&&(_t=Yt.return)&&_t.call(Yt)}finally{if(Ct)throw Ct.error}}},mt.prototype.encodeExtension=function(Ee){var $e=Ee.data.length;if(1===$e)this.writeU8(212);else if(2===$e)this.writeU8(213);else if(4===$e)this.writeU8(214);else if(8===$e)this.writeU8(215);else if(16===$e)this.writeU8(216);else if($e<256)this.writeU8(199),this.writeU8($e);else if($e<65536)this.writeU8(200),this.writeU16($e);else{if(!($e<4294967296))throw new Error("Too large extension object: "+$e);this.writeU8(201),this.writeU32($e)}this.writeI8(Ee.type),this.writeU8a(Ee.data)},mt.prototype.writeU8=function(Ee){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,Ee),this.pos++},mt.prototype.writeU8a=function(Ee){var $e=Ee.length;this.ensureBufferSizeToWrite($e),this.bytes.set(Ee,this.pos),this.pos+=$e},mt.prototype.writeI8=function(Ee){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,Ee),this.pos++},mt.prototype.writeU16=function(Ee){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,Ee),this.pos+=2},mt.prototype.writeI16=function(Ee){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,Ee),this.pos+=2},mt.prototype.writeU32=function(Ee){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,Ee),this.pos+=4},mt.prototype.writeI32=function(Ee){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,Ee),this.pos+=4},mt.prototype.writeF32=function(Ee){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,Ee),this.pos+=4},mt.prototype.writeF64=function(Ee){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,Ee),this.pos+=8},mt.prototype.writeU64=function(Ee){var $e,Ct,_t,wt;this.ensureBufferSizeToWrite(8),wt=_t=Ee,($e=this.view).setUint32(Ct=this.pos,_t/4294967296),$e.setUint32(Ct+4,wt),this.pos+=8},mt.prototype.writeI64=function(Ee){this.ensureBufferSizeToWrite(8),g(this.view,this.pos,Ee),this.pos+=8},mt}(),n={};function t(mt,Ee){return void 0===Ee&&(Ee=n),new At(Ee.extensionCodec,Ee.context,Ee.maxDepth,Ee.initialBufferSize,Ee.sortKeys,Ee.forceFloat32,Ee.ignoreUndefined,Ee.forceIntegerToFloat).encode(mt)}function e(mt){return(mt<0?"-":"")+"0x"+Math.abs(mt).toString(16).padStart(2,"0")}var o=function(){function mt(Ee,$e){void 0===Ee&&(Ee=16),void 0===$e&&($e=16),this.maxKeyLength=Ee,this.maxLengthPerKey=$e,this.hit=0,this.miss=0,this.caches=[];for(var Ct=0;Ct<this.maxKeyLength;Ct++)this.caches.push([])}return mt.prototype.canBeCached=function(Ee){return Ee>0&&Ee<=this.maxKeyLength},mt.prototype.find=function(Ee,$e,Ct){var _t,on,wt=this.caches[Ct-1];try{e:for(var Yt=function(Jn){var kr="function"==typeof Symbol&&Symbol.iterator,Kr=kr&&Jn[kr],za=0;if(Kr)return Kr.call(Jn);if(Jn&&"number"==typeof Jn.length)return{next:function(){return Jn&&za>=Jn.length&&(Jn=void 0),{value:Jn&&Jn[za++],done:!Jn}}};throw new TypeError(kr?"Object is not iterable.":"Symbol.iterator is not defined.")}(wt),An=Yt.next();!An.done;An=Yt.next()){for(var jn=An.value,sn=jn.bytes,Nn=0;Nn<Ct;Nn++)if(sn[Nn]!==Ee[$e+Nn])continue e;return jn.str}}catch(Jn){_t={error:Jn}}finally{try{An&&!An.done&&(on=Yt.return)&&on.call(Yt)}finally{if(_t)throw _t.error}}return null},mt.prototype.store=function(Ee,$e){var Ct=this.caches[Ee.length-1],_t={bytes:Ee,str:$e};Ct.length>=this.maxLengthPerKey?Ct[Math.random()*Ct.length|0]=_t:Ct.push(_t)},mt.prototype.decode=function(Ee,$e,Ct){var _t=this.find(Ee,$e,Ct);if(null!=_t)return this.hit++,_t;this.miss++;var on=K(Ee,$e,Ct),wt=Uint8Array.prototype.slice.call(Ee,$e,$e+Ct);return this.store(wt,on),on},mt}(),d=function(mt,Ee){var $e,Ct,_t,on,wt={label:0,sent:function(){if(1&_t[0])throw _t[1];return _t[1]},trys:[],ops:[]};return on={next:Yt(0),throw:Yt(1),return:Yt(2)},"function"==typeof Symbol&&(on[Symbol.iterator]=function(){return this}),on;function Yt(An){return function(jn){return function(sn){if($e)throw new TypeError("Generator is already executing.");for(;wt;)try{if($e=1,Ct&&(_t=2&sn[0]?Ct.return:sn[0]?Ct.throw||((_t=Ct.return)&&_t.call(Ct),0):Ct.next)&&!(_t=_t.call(Ct,sn[1])).done)return _t;switch(Ct=0,_t&&(sn=[2&sn[0],_t.value]),sn[0]){case 0:case 1:_t=sn;break;case 4:return wt.label++,{value:sn[1],done:!1};case 5:wt.label++,Ct=sn[1],sn=[0];continue;case 7:sn=wt.ops.pop(),wt.trys.pop();continue;default:if(!((_t=(_t=wt.trys).length>0&&_t[_t.length-1])||6!==sn[0]&&2!==sn[0])){wt=0;continue}if(3===sn[0]&&(!_t||sn[1]>_t[0]&&sn[1]<_t[3])){wt.label=sn[1];break}if(6===sn[0]&&wt.label<_t[1]){wt.label=_t[1],_t=sn;break}if(_t&&wt.label<_t[2]){wt.label=_t[2],wt.ops.push(sn);break}_t[2]&&wt.ops.pop(),wt.trys.pop();continue}sn=Ee.call(mt,wt)}catch(Nn){sn=[6,Nn],Ct=0}finally{$e=_t=0}if(5&sn[0])throw sn[1];return{value:sn[0]?sn[1]:void 0,done:!0}}([An,jn])}}},f=function(mt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,$e=mt[Symbol.asyncIterator];return $e?$e.call(mt):(mt="function"==typeof __values?__values(mt):mt[Symbol.iterator](),Ee={},Ct("next"),Ct("throw"),Ct("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function Ct(_t){Ee[_t]=mt[_t]&&function(on){return new Promise(function(wt,Yt){var An,jn,sn;An=wt,jn=Yt,sn=(on=mt[_t](on)).done,Promise.resolve(on.value).then(function(Jn){An({value:Jn,done:sn})},jn)})}}},b=function(mt){return this instanceof b?(this.v=mt,this):new b(mt)},y=function(mt,Ee,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ct,_t=$e.apply(mt,Ee||[]),on=[];return Ct={},wt("next"),wt("throw"),wt("return"),Ct[Symbol.asyncIterator]=function(){return this},Ct;function wt(Nn){_t[Nn]&&(Ct[Nn]=function(Jn){return new Promise(function(kr,Kr){on.push([Nn,Jn,kr,Kr])>1||Yt(Nn,Jn)})})}function Yt(Nn,Jn){try{(kr=_t[Nn](Jn)).value instanceof b?Promise.resolve(kr.value.v).then(An,jn):sn(on[0][2],kr)}catch(Kr){sn(on[0][3],Kr)}var kr}function An(Nn){Yt("next",Nn)}function jn(Nn){Yt("throw",Nn)}function sn(Nn,Jn){Nn(Jn),on.shift(),on.length&&Yt(on[0][0],on[0][1])}},w=new DataView(new ArrayBuffer(0)),k=new Uint8Array(w.buffer),Q=function(){try{w.getInt8(0)}catch(mt){return mt.constructor}throw new Error("never reached")}(),ie=new Q("Insufficient data"),Ie=new o,ke=function(){function mt(Ee,$e,Ct,_t,on,wt,Yt,An){void 0===Ee&&(Ee=bt.defaultCodec),void 0===$e&&($e=void 0),void 0===Ct&&(Ct=p),void 0===_t&&(_t=p),void 0===on&&(on=p),void 0===wt&&(wt=p),void 0===Yt&&(Yt=p),void 0===An&&(An=Ie),this.extensionCodec=Ee,this.context=$e,this.maxStrLength=Ct,this.maxBinLength=_t,this.maxArrayLength=on,this.maxMapLength=wt,this.maxExtLength=Yt,this.keyDecoder=An,this.totalPos=0,this.pos=0,this.view=w,this.bytes=k,this.headByte=-1,this.stack=[]}return mt.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},mt.prototype.setBuffer=function(Ee){this.bytes=Ve(Ee),this.view=function($e){if($e instanceof ArrayBuffer)return new DataView($e);var Ct=Ve($e);return new DataView(Ct.buffer,Ct.byteOffset,Ct.byteLength)}(this.bytes),this.pos=0},mt.prototype.appendBuffer=function(Ee){if(-1!==this.headByte||this.hasRemaining(1)){var $e=this.bytes.subarray(this.pos),Ct=Ve(Ee),_t=new Uint8Array($e.length+Ct.length);_t.set($e),_t.set(Ct,$e.length),this.setBuffer(_t)}else this.setBuffer(Ee)},mt.prototype.hasRemaining=function(Ee){return this.view.byteLength-this.pos>=Ee},mt.prototype.createExtraByteError=function(Ee){var $e=this.view;return new RangeError("Extra "+($e.byteLength-this.pos)+" of "+$e.byteLength+" byte(s) found at buffer["+Ee+"]")},mt.prototype.decode=function(Ee){this.reinitializeState(),this.setBuffer(Ee);var $e=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return $e},mt.prototype.decodeMulti=function(Ee){return d(this,function($e){switch($e.label){case 0:this.reinitializeState(),this.setBuffer(Ee),$e.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return $e.sent(),[3,1];case 3:return[2]}})},mt.prototype.decodeAsync=function(Ee){var $e,Ct,_t,on,wt,An,jn;return wt=this,void 0,jn=function(){var sn,Nn,Jn,kr,Kr,za,In,Sn;return d(this,function(dr){switch(dr.label){case 0:sn=!1,dr.label=1;case 1:dr.trys.push([1,6,7,12]),$e=f(Ee),dr.label=2;case 2:return[4,$e.next()];case 3:if((Ct=dr.sent()).done)return[3,5];if(Jn=Ct.value,sn)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Jn);try{Nn=this.doDecodeSync(),sn=!0}catch(zr){if(!(zr instanceof Q))throw zr}this.totalPos+=this.pos,dr.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return kr=dr.sent(),_t={error:kr},[3,12];case 7:return dr.trys.push([7,,10,11]),Ct&&!Ct.done&&(on=$e.return)?[4,on.call($e)]:[3,9];case 8:dr.sent(),dr.label=9;case 9:return[3,11];case 10:if(_t)throw _t.error;return[7];case 11:return[7];case 12:if(sn){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,Nn]}throw za=(Kr=this).headByte,In=Kr.pos,Sn=Kr.totalPos,new RangeError("Insufficient data in parsing "+e(za)+" at "+Sn+" ("+In+" in the current buffer)")}})},new((An=void 0)||(An=Promise))(function(sn,Nn){function Jn(za){try{Kr(jn.next(za))}catch(In){Nn(In)}}function kr(za){try{Kr(jn.throw(za))}catch(In){Nn(In)}}function Kr(za){var In;za.done?sn(za.value):(In=za.value,In instanceof An?In:new An(function(Sn){Sn(In)})).then(Jn,kr)}Kr((jn=jn.apply(wt,[])).next())})},mt.prototype.decodeArrayStream=function(Ee){return this.decodeMultiAsync(Ee,!0)},mt.prototype.decodeStream=function(Ee){return this.decodeMultiAsync(Ee,!1)},mt.prototype.decodeMultiAsync=function(Ee,$e){return y(this,arguments,function(){var Ct,_t,on,wt,Yt,An,jn,sn,Nn;return d(this,function(Jn){switch(Jn.label){case 0:Ct=$e,_t=-1,Jn.label=1;case 1:Jn.trys.push([1,13,14,19]),on=f(Ee),Jn.label=2;case 2:return[4,b(on.next())];case 3:if((wt=Jn.sent()).done)return[3,12];if(Yt=wt.value,$e&&0===_t)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Yt),Ct&&(_t=this.readArraySize(),Ct=!1,this.complete()),Jn.label=4;case 4:Jn.trys.push([4,9,,10]),Jn.label=5;case 5:return[4,b(this.doDecodeSync())];case 6:return[4,Jn.sent()];case 7:return Jn.sent(),0==--_t?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((An=Jn.sent())instanceof Q))throw An;return[3,10];case 10:this.totalPos+=this.pos,Jn.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return jn=Jn.sent(),sn={error:jn},[3,19];case 14:return Jn.trys.push([14,,17,18]),wt&&!wt.done&&(Nn=on.return)?[4,b(Nn.call(on))]:[3,16];case 15:Jn.sent(),Jn.label=16;case 16:return[3,18];case 17:if(sn)throw sn.error;return[7];case 18:return[7];case 19:return[2]}})})},mt.prototype.doDecodeSync=function(){e:for(;;){var Ee=this.readHeadByte(),$e=void 0;if(Ee>=224)$e=Ee-256;else if(Ee<192)if(Ee<128)$e=Ee;else if(Ee<144){if(0!=(_t=Ee-128)){this.pushMapState(_t),this.complete();continue e}$e={}}else if(Ee<160){if(0!=(_t=Ee-144)){this.pushArrayState(_t),this.complete();continue e}$e=[]}else{var Ct=Ee-160;$e=this.decodeUtf8String(Ct,0)}else if(192===Ee)$e=null;else if(194===Ee)$e=!1;else if(195===Ee)$e=!0;else if(202===Ee)$e=this.readF32();else if(203===Ee)$e=this.readF64();else if(204===Ee)$e=this.readU8();else if(205===Ee)$e=this.readU16();else if(206===Ee)$e=this.readU32();else if(207===Ee)$e=this.readU64();else if(208===Ee)$e=this.readI8();else if(209===Ee)$e=this.readI16();else if(210===Ee)$e=this.readI32();else if(211===Ee)$e=this.readI64();else if(217===Ee)Ct=this.lookU8(),$e=this.decodeUtf8String(Ct,1);else if(218===Ee)Ct=this.lookU16(),$e=this.decodeUtf8String(Ct,2);else if(219===Ee)Ct=this.lookU32(),$e=this.decodeUtf8String(Ct,4);else if(220===Ee){if(0!==(_t=this.readU16())){this.pushArrayState(_t),this.complete();continue e}$e=[]}else if(221===Ee){if(0!==(_t=this.readU32())){this.pushArrayState(_t),this.complete();continue e}$e=[]}else if(222===Ee){if(0!==(_t=this.readU16())){this.pushMapState(_t),this.complete();continue e}$e={}}else if(223===Ee){if(0!==(_t=this.readU32())){this.pushMapState(_t),this.complete();continue e}$e={}}else if(196===Ee){var _t=this.lookU8();$e=this.decodeBinary(_t,1)}else if(197===Ee)_t=this.lookU16(),$e=this.decodeBinary(_t,2);else if(198===Ee)_t=this.lookU32(),$e=this.decodeBinary(_t,4);else if(212===Ee)$e=this.decodeExtension(1,0);else if(213===Ee)$e=this.decodeExtension(2,0);else if(214===Ee)$e=this.decodeExtension(4,0);else if(215===Ee)$e=this.decodeExtension(8,0);else if(216===Ee)$e=this.decodeExtension(16,0);else if(199===Ee)_t=this.lookU8(),$e=this.decodeExtension(_t,1);else if(200===Ee)_t=this.lookU16(),$e=this.decodeExtension(_t,2);else{if(201!==Ee)throw new De("Unrecognized type byte: "+e(Ee));_t=this.lookU32(),$e=this.decodeExtension(_t,4)}this.complete();for(var on=this.stack;on.length>0;){var wt=on[on.length-1];if(0===wt.type){if(wt.array[wt.position]=$e,wt.position++,wt.position!==wt.size)continue e;on.pop(),$e=wt.array}else{if(1===wt.type){if("string"!=(Yt=typeof $e)&&"number"!==Yt)throw new De("The type of key must be string or number but "+typeof $e);if("__proto__"===$e)throw new De("The key __proto__ is not allowed");wt.key=$e,wt.type=2;continue e}if(wt.map[wt.key]=$e,wt.readCount++,wt.readCount!==wt.size){wt.key=null,wt.type=1;continue e}on.pop(),$e=wt.map}}return $e}var Yt},mt.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},mt.prototype.complete=function(){this.headByte=-1},mt.prototype.readArraySize=function(){var Ee=this.readHeadByte();switch(Ee){case 220:return this.readU16();case 221:return this.readU32();default:if(Ee<160)return Ee-144;throw new De("Unrecognized array type byte: "+e(Ee))}},mt.prototype.pushMapState=function(Ee){if(Ee>this.maxMapLength)throw new De("Max length exceeded: map length ("+Ee+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:Ee,key:null,readCount:0,map:{}})},mt.prototype.pushArrayState=function(Ee){if(Ee>this.maxArrayLength)throw new De("Max length exceeded: array length ("+Ee+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:Ee,array:new Array(Ee),position:0})},mt.prototype.decodeUtf8String=function(Ee,$e){var Ct;if(Ee>this.maxStrLength)throw new De("Max length exceeded: UTF-8 byte length ("+Ee+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+$e+Ee)throw ie;var _t,Yt,jn,on=this.pos+$e;return _t=this.stateIsMapKey()&&(null===(Ct=this.keyDecoder)||void 0===Ct?void 0:Ct.canBeCached(Ee))?this.keyDecoder.decode(this.bytes,on,Ee):Ee>de?(jn=this.bytes.subarray(Yt=on,Yt+Ee),Z.decode(jn)):K(this.bytes,on,Ee),this.pos+=$e+Ee,_t},mt.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},mt.prototype.decodeBinary=function(Ee,$e){if(Ee>this.maxBinLength)throw new De("Max length exceeded: bin length ("+Ee+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(Ee+$e))throw ie;var Ct=this.pos+$e,_t=this.bytes.subarray(Ct,Ct+Ee);return this.pos+=$e+Ee,_t},mt.prototype.decodeExtension=function(Ee,$e){if(Ee>this.maxExtLength)throw new De("Max length exceeded: ext length ("+Ee+") > maxExtLength ("+this.maxExtLength+")");var Ct=this.view.getInt8(this.pos+$e),_t=this.decodeBinary(Ee,$e+1);return this.extensionCodec.decode(_t,Ct,this.context)},mt.prototype.lookU8=function(){return this.view.getUint8(this.pos)},mt.prototype.lookU16=function(){return this.view.getUint16(this.pos)},mt.prototype.lookU32=function(){return this.view.getUint32(this.pos)},mt.prototype.readU8=function(){var Ee=this.view.getUint8(this.pos);return this.pos++,Ee},mt.prototype.readI8=function(){var Ee=this.view.getInt8(this.pos);return this.pos++,Ee},mt.prototype.readU16=function(){var Ee=this.view.getUint16(this.pos);return this.pos+=2,Ee},mt.prototype.readI16=function(){var Ee=this.view.getInt16(this.pos);return this.pos+=2,Ee},mt.prototype.readU32=function(){var Ee=this.view.getUint32(this.pos);return this.pos+=4,Ee},mt.prototype.readI32=function(){var Ee=this.view.getInt32(this.pos);return this.pos+=4,Ee},mt.prototype.readU64=function(){var Ee,$e,Ct=4294967296*(Ee=this.view).getUint32($e=this.pos)+Ee.getUint32($e+4);return this.pos+=8,Ct},mt.prototype.readI64=function(){var Ee=m(this.view,this.pos);return this.pos+=8,Ee},mt.prototype.readF32=function(){var Ee=this.view.getFloat32(this.pos);return this.pos+=4,Ee},mt.prototype.readF64=function(){var Ee=this.view.getFloat64(this.pos);return this.pos+=8,Ee},mt}(),je={};function at(mt,Ee){return void 0===Ee&&(Ee=je),new ke(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decode(mt)}function Vt(mt,Ee){return void 0===Ee&&(Ee=je),new ke(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decodeMulti(mt)}var Qt=function(mt,Ee){var $e,Ct,_t,on,wt={label:0,sent:function(){if(1&_t[0])throw _t[1];return _t[1]},trys:[],ops:[]};return on={next:Yt(0),throw:Yt(1),return:Yt(2)},"function"==typeof Symbol&&(on[Symbol.iterator]=function(){return this}),on;function Yt(An){return function(jn){return function(sn){if($e)throw new TypeError("Generator is already executing.");for(;wt;)try{if($e=1,Ct&&(_t=2&sn[0]?Ct.return:sn[0]?Ct.throw||((_t=Ct.return)&&_t.call(Ct),0):Ct.next)&&!(_t=_t.call(Ct,sn[1])).done)return _t;switch(Ct=0,_t&&(sn=[2&sn[0],_t.value]),sn[0]){case 0:case 1:_t=sn;break;case 4:return wt.label++,{value:sn[1],done:!1};case 5:wt.label++,Ct=sn[1],sn=[0];continue;case 7:sn=wt.ops.pop(),wt.trys.pop();continue;default:if(!((_t=(_t=wt.trys).length>0&&_t[_t.length-1])||6!==sn[0]&&2!==sn[0])){wt=0;continue}if(3===sn[0]&&(!_t||sn[1]>_t[0]&&sn[1]<_t[3])){wt.label=sn[1];break}if(6===sn[0]&&wt.label<_t[1]){wt.label=_t[1],_t=sn;break}if(_t&&wt.label<_t[2]){wt.label=_t[2],wt.ops.push(sn);break}_t[2]&&wt.ops.pop(),wt.trys.pop();continue}sn=Ee.call(mt,wt)}catch(Nn){sn=[6,Nn],Ct=0}finally{$e=_t=0}if(5&sn[0])throw sn[1];return{value:sn[0]?sn[1]:void 0,done:!0}}([An,jn])}}},rn=function(mt){return this instanceof rn?(this.v=mt,this):new rn(mt)},Ut=function(mt,Ee,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ct,_t=$e.apply(mt,Ee||[]),on=[];return Ct={},wt("next"),wt("throw"),wt("return"),Ct[Symbol.asyncIterator]=function(){return this},Ct;function wt(Nn){_t[Nn]&&(Ct[Nn]=function(Jn){return new Promise(function(kr,Kr){on.push([Nn,Jn,kr,Kr])>1||Yt(Nn,Jn)})})}function Yt(Nn,Jn){try{(kr=_t[Nn](Jn)).value instanceof rn?Promise.resolve(kr.value.v).then(An,jn):sn(on[0][2],kr)}catch(Kr){sn(on[0][3],Kr)}var kr}function An(Nn){Yt("next",Nn)}function jn(Nn){Yt("throw",Nn)}function sn(Nn,Jn){Nn(Jn),on.shift(),on.length&&Yt(on[0][0],on[0][1])}};function Bn(mt){if(null==mt)throw new Error("Assertion Failure: value must not be null nor undefined")}function ai(mt){return null!=mt[Symbol.asyncIterator]?mt:function(Ee){return Ut(this,arguments,function(){var $e,Ct,on;return Qt(this,function(wt){switch(wt.label){case 0:$e=Ee.getReader(),wt.label=1;case 1:wt.trys.push([1,,9,10]),wt.label=2;case 2:return[4,rn($e.read())];case 3:return Ct=wt.sent(),on=Ct.value,Ct.done?[4,rn(void 0)]:[3,5];case 4:return[2,wt.sent()];case 5:return Bn(on),[4,rn(on)];case 6:return[4,wt.sent()];case 7:return wt.sent(),[3,2];case 8:return[3,10];case 9:return $e.releaseLock(),[7];case 10:return[2]}})})}(mt)}function ci(mt,Ee){return void 0===Ee&&(Ee=je),$e=this,void 0,on=function(){var wt;return function(Yt,An){var jn,sn,Nn,Jn,kr={label:0,sent:function(){if(1&Nn[0])throw Nn[1];return Nn[1]},trys:[],ops:[]};return Jn={next:Kr(0),throw:Kr(1),return:Kr(2)},"function"==typeof Symbol&&(Jn[Symbol.iterator]=function(){return this}),Jn;function Kr(za){return function(In){return function(Sn){if(jn)throw new TypeError("Generator is already executing.");for(;kr;)try{if(jn=1,sn&&(Nn=2&Sn[0]?sn.return:Sn[0]?sn.throw||((Nn=sn.return)&&Nn.call(sn),0):sn.next)&&!(Nn=Nn.call(sn,Sn[1])).done)return Nn;switch(sn=0,Nn&&(Sn=[2&Sn[0],Nn.value]),Sn[0]){case 0:case 1:Nn=Sn;break;case 4:return kr.label++,{value:Sn[1],done:!1};case 5:kr.label++,sn=Sn[1],Sn=[0];continue;case 7:Sn=kr.ops.pop(),kr.trys.pop();continue;default:if(!((Nn=(Nn=kr.trys).length>0&&Nn[Nn.length-1])||6!==Sn[0]&&2!==Sn[0])){kr=0;continue}if(3===Sn[0]&&(!Nn||Sn[1]>Nn[0]&&Sn[1]<Nn[3])){kr.label=Sn[1];break}if(6===Sn[0]&&kr.label<Nn[1]){kr.label=Nn[1],Nn=Sn;break}if(Nn&&kr.label<Nn[2]){kr.label=Nn[2],kr.ops.push(Sn);break}Nn[2]&&kr.ops.pop(),kr.trys.pop();continue}Sn=An.call(Yt,kr)}catch(dr){Sn=[6,dr],sn=0}finally{jn=Nn=0}if(5&Sn[0])throw Sn[1];return{value:Sn[0]?Sn[1]:void 0,done:!0}}([za,In])}}}(this,function(Yt){return wt=ai(mt),[2,new ke(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decodeAsync(wt)]})},new((_t=void 0)||(_t=Promise))(function(wt,Yt){function An(Nn){try{sn(on.next(Nn))}catch(Jn){Yt(Jn)}}function jn(Nn){try{sn(on.throw(Nn))}catch(Jn){Yt(Jn)}}function sn(Nn){var Jn;Nn.done?wt(Nn.value):(Jn=Nn.value,Jn instanceof _t?Jn:new _t(function(kr){kr(Jn)})).then(An,jn)}sn((on=on.apply($e,[])).next())});var $e,_t,on}function Yo(mt,Ee){void 0===Ee&&(Ee=je);var $e=ai(mt);return new ke(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decodeArrayStream($e)}function Ji(mt,Ee){void 0===Ee&&(Ee=je);var $e=ai(mt);return new ke(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decodeStream($e)}function pf(mt,Ee){return void 0===Ee&&(Ee=je),Ji(mt,Ee)}return c}()})(wH),(0,nf.exports)("Int8",function(r){return function(i,a,c){return r(this,i,a,c)}}),(0,nf.exports)("Int16",function(r){return function(i,a,c){return r(this,i,a,c)}}),(0,nf.exports)("Int32",function(r){return function(i,a,c){return r(this,i,a,c)}}),(0,nf.exports)("Uint16",function(r){return function(i,a,c){return r(this,i,a,c)}}),(0,nf.exports)("Uint32",function(r){return function(i,a,c){return r(this,i,a,c)}}),(0,nf.exports)("Float32",function(r){return function(i,a,c){return r(this,i,a,c)}}),(0,nf.exports)("Float64",function(r){return function(i,a,c){return r(this,i,a,c)}});const q5=()=>function(r){const i=window.atob("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==").split("").map(a=>a.charCodeAt(0));return new Uint8Array(i,0,i.length/Uint8Array.BYTES_PER_ELEMENT)}();let _U,Nm;function bx(){return bx=U(function*(){if(_U)return _U;const r={};let i,a={};for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(a[i]=r[i]);let c=!1,p=!1;c="object"==typeof window,p="function"==typeof importScripts,"object"==typeof process&&"object"==typeof process.versions&&process;let g="";(c||p)&&(p?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):""),r.print||console.log.bind(console);const m=r.printErr||console.warn.bind(console);for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i]);let A;a=null,"object"!=typeof WebAssembly&&it("no native wasm support detected");let _=!1;function S(t){const e=r["_"+t];return e||it("Assertion failed: Cannot call unknown function "+t+", make sure it is exported"),e}function C(t,e,o,d,f){const b={string:function(ie){let Ie=0;if(null!=ie&&0!==ie){const ke=1+(ie.length<<2);Ie=At(ke),function(Qt,rn,Ut,Bn){if(!(Bn>0))return 0;const ci=Ut+Bn-1;for(let Yo=0;Yo<Qt.length;++Yo){let Ji=Qt.charCodeAt(Yo);if(Ji>=55296&&Ji<=57343&&(Ji=65536+((1023&Ji)<<10)|1023&Qt.charCodeAt(++Yo)),Ji<=127){if(Ut>=ci)break;rn[Ut++]=Ji}else if(Ji<=2047){if(Ut+1>=ci)break;rn[Ut++]=192|Ji>>6,rn[Ut++]=128|63&Ji}else if(Ji<=65535){if(Ut+2>=ci)break;rn[Ut++]=224|Ji>>12,rn[Ut++]=128|Ji>>6&63,rn[Ut++]=128|63&Ji}else{if(Ut+3>=ci)break;rn[Ut++]=240|Ji>>18,rn[Ut++]=128|Ji>>12&63,rn[Ut++]=128|Ji>>6&63,rn[Ut++]=128|63&Ji}}rn[Ut]=0}(ie,B,Ie,ke)}return Ie},array:function(ie){const Ie=At(ie.length);return D.set(ie,Ie),Ie}},y=S(t),w=[];let k=0;if(d)for(let ie=0;ie<d.length;ie++){const Ie=b[o[ie]];Ie?(0===k&&(k=Ve()),w[ie]=Ie(d[ie])):w[ie]=d[ie]}let Q=y.apply(null,w);return ie=Q,Q="string"===e?(Ie=ie)?function(je,at,Vt){const Qt=at+undefined;let rn=at,Ut="";for(;je[rn]&&!(rn>=Qt);)++rn;if(rn-at>16&&je.subarray&&T)return T.decode(je.subarray(at,rn));for(;at<rn;){let Bn=je[at++];if(!(128&Bn)){Ut+=String.fromCharCode(Bn);continue}const ai=63&je[at++];if(192==(224&Bn)){Ut+=String.fromCharCode((31&Bn)<<6|ai);continue}const ci=63&je[at++];if(Bn=224==(240&Bn)?(15&Bn)<<12|ai<<6|ci:(7&Bn)<<18|ai<<12|ci<<6|63&je[at++],Bn<65536)Ut+=String.fromCharCode(Bn);else{const Yo=Bn-65536;Ut+=String.fromCharCode(55296|Yo>>10,56320|1023&Yo)}}return Ut}(B,Ie):"":"boolean"===e?Boolean(ie):ie,0!==k&&nt(k),Q;var ie,Ie}const T=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;let D,B,K;typeof TextDecoder<"u"&&new TextDecoder("utf-16le");const W=[],Z=[],de=[],ge=[];Z.push({func:function(){pn()}});let Se=0,De=null;function it(t){throw r.onAbort&&r.onAbort(t),m(t+=""),_=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}r.preloadedImages={},r.preloadedAudios={};let Rt="deflate.wasm";var t;function Pt(t){for(;t.length>0;){const e=t.shift();if("function"==typeof e){e(r);continue}const o=e.func;"number"==typeof o?void 0===e.arg?K.get(o)():K.get(o)(e.arg):o(void 0===e.arg?null:e.arg)}}Rt.startsWith("data:application/octet-stream;base64,")||(t=Rt,Rt=r.locateFile?r.locateFile(t,g):g+t);const On={emscripten_memcpy_big:function(t,e,o){B.copyWithin(t,e,e+o)},emscripten_resize_heap:function(t){it("OOM")}};yield U(function*(){const t={env:On,wasi_snapshot_preview1:On};function e(f,b){var w;r.asm=f.exports,A=r.asm.memory,w=A.buffer,r.HEAP8=D=new Int8Array(w),r.HEAP16=new Int16Array(w),r.HEAP32=new Int32Array(w),r.HEAPU8=B=new Uint8Array(w),r.HEAPU16=new Uint16Array(w),r.HEAPU32=new Uint32Array(w),r.HEAPF32=new Float32Array(w),r.HEAPF64=new Float64Array(w),K=r.asm.__indirect_function_table,function(k){if(Se--,r.monitorRunDependencies&&r.monitorRunDependencies(Se),0==Se&&De){const Q=De;De=null,Q()}}()}if(Se++,r.monitorRunDependencies&&r.monitorRunDependencies(Se),r.instantiateWasm)try{return r.instantiateWasm(t,e)}catch(f){return m("Module.instantiateWasm callback failed with error: "+f),!1}return yield function d(f){return new Un((b,y)=>{b(q5().buffer)}).then(function(b){return WebAssembly.instantiate(b,t)}).then(f,function(b){m("failed to asynchronously prepare wasm: "+b),it(b)})}(function o(f){e(f.instance)}),{}})();let pn=r.___wasm_call_ctors=function(){return(pn=r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)},cn=r._malloc=function(){return(cn=r._malloc=r.asm.malloc).apply(null,arguments)};r._free=function(){return(r._free=r.asm.free).apply(null,arguments)},r.___errno_location=function(){return(r.___errno_location=r.asm.__errno_location).apply(null,arguments)},r._zlibCompress=function(){return(r._zlibCompress=r.asm.zlibCompress).apply(null,arguments)};let bt,Ve=r.stackSave=function(){return(Ve=r.stackSave=r.asm.stackSave).apply(null,arguments)},nt=r.stackRestore=function(){return(nt=r.stackRestore=r.asm.stackRestore).apply(null,arguments)},At=r.stackAlloc=function(){return(At=r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)};function n(t){function e(){bt||(bt=!0,r.calledRun=!0,_||(Pt(Z),Pt(de),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)o=r.postRun.shift(),ge.unshift(o);var o;Pt(ge)}()))}Se>0||(function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)o=r.preRun.shift(),W.unshift(o);var o;Pt(W)}(),Se>0||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),e()},1)):e()))}if(r.ccall=C,r.cwrap=function(t,e,o,d){const f=(o=o||[]).every(function(b){return"number"===b});return"string"!==e&&f&&!d?S(t):function(){return C(t,e,o,arguments)}},r.allocate=function(t,e){let o;return o=1==e?At(t.length):cn(t.length),B.set(t.subarray||t.slice?t:new Uint8Array(t),o),o},De=function t(){bt||n(),bt||(De=t)},r.run=n,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return n(),_U=r,r}),bx.apply(this,arguments)}const ek=Uint8Array.BYTES_PER_ELEMENT,J5={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},$5={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},RH={_message:"m",_type:"t",_id:"id"},vU={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let X5;class Iz{constructor(){q(this,"zlibCompress",void 0)}init(){var i=this;return U(function*(){X5||(X5=(yield U(function*(){return Nm||(Nm=yield function TH(){return bx.apply(this,arguments)}()),{zlibCompress:c=>{const p=new Uint8Array(c),g=ek*p.byteLength,m=Nm._malloc(g),A=Nm._malloc(3*g);for(let C=0;C<g;C++)Nm.HEAP8[m/ek+C]=p[C];const _=Nm._zlibCompress(m,g,A),S=new Uint8Array(Nm.HEAP8.slice(A,A+_));return Nm._free(m),Nm._free(A),S}}})()).zlibCompress),i.zlibCompress=X5})()}msgPackCompress(i){return wH.exports.encode(i)}compress(i){const a=Date.now(),c=this.compressKeyAndValue(JSON.parse(JSON.stringify(i))),p=this.msgPackCompress(c),g=this.zlibCompress(p),m=new Uint8Array([49,49,49,50,...Array.from(g)]);return{origin:Object.assign({},i),originLength:JSON.stringify(i).length,shortKeyAndValue:c,msgpackSer:p,compressed:m,compressedLength:m.length,time:Date.now()-a}}compressKeyAndValue(i){return this._ObjectKeyCompress(this._typeCompress(i))}_typeCompress(i){const a=i._type;return a?(i._type=vU[a]||a,i):i}_ObjectKeyCompress(i){const a=i._message;if(a){const c=a.stats;c&&(a.stats=this._statsCompress(c)),i._message=this._messageCompress(a)}return this._reportCompress(i)}_statsCompress(i){return this._keyCompress(i,J5)}_messageCompress(i){return this._keyCompress(i,$5)}_reportCompress(i){return this._keyCompress(i,RH)}_keyCompress(i,a){const c={},p=Object.keys(i);return Lh(p).call(p,(g,m)=>{const A=i[m];return a[m]?c[a[m]]=A:c[m]=A,c},c),c}}class wz extends s{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(i){super(),q(this,"lowPriorityQueue",[]),q(this,"highPriorityQueue",[]),q(this,"AgoraWebSocketManager",void 0),this.AgoraWebSocketManager=i}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(i){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.highPriorityQueue.push(i):this.lowPriorityQueue.push(i),this.sendMessage()}sendMessage(){const i=this.queue.length;let a=0;a=i<5?15*i:60+3*(i-4),setTimeout(()=>{this._sendMessage()},a)}_sendMessage(){if(!this.queue.length)return;const i=this.AgoraWebSocketManager.getConnection();if(!i||1!==i.readyState)return;const a=this.queue.shift();return this.lowPriorityQueue.includes(a)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),i.send(a.compressed),a}}var Sx;function Z5(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}let LS=yn("AgoraWebSocketManager","connectionID")(Sx=class extends s{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,"reconnecting"===this._state?this.emit(Er.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Er.CONNECTED):"closed"===this._state?this.emit(Er.CLOSED):"failed"===this._state&&this.emit(Er.FAILED))}resetReconnectCount(r){O.debug("websocket reset reconnect count, reason: "+r),Ne("debug",this,"resetReconnectCount",r,"websocket reset reconnect count, reason: "+r),this.reconnectCount=0}constructor(r,i){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],p=arguments.length>4?arguments[4]:void 0;super(),q(this,"connectionID",0),q(this,"currentURLIndex",0),q(this,"urls",void 0),q(this,"_reconnectMode","tryNext"),q(this,"reconnectReason",void 0),q(this,"_initMutex",new fu("websocket")),q(this,"name",void 0),q(this,"_state","closed"),q(this,"reconnectInterrupter",void 0),q(this,"websocket",void 0),q(this,"retryConfig",void 0),q(this,"reconnectCount",0),q(this,"forceCloseTimeout",5e3),q(this,"onlineReconnectListener",void 0),q(this,"compressor",new Iz),q(this,"compressorInitStatus","initializing"),q(this,"compress",void 0),q(this,"messageSender",void 0),q(this,"useCompress",void 0),q(this,"tryDoubleDomain",!1),q(this,"wsInflateLength",0),q(this,"wsDeflateLength",0),q(this,"closeEstablishingWs",()=>{}),q(this,"store",void 0),q(this,"joinChannelServiceRecordIndex",void 0),this.store=p,this.name=r,this.retryConfig=function(C){for(var T=1;T<arguments.length;T++){var D=null!=arguments[T]?arguments[T]:{};T%2?Z5(Object(D),!0).forEach(function(B){q(C,B,D[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(D)):Z5(Object(D)).forEach(function(B){Object.defineProperty(C,B,Object.getOwnPropertyDescriptor(D,B))})}return C}({},i),this.useCompress=a,this.tryDoubleDomain=c;const{timeout:g,timeoutFactor:m}=i,A=Math.max(300,Math.floor(3*g/5)),_=Math.max(1.2,Math.floor(8*m)/10);Bu.ONLINE&&(this.retryConfig.timeout=A,this.retryConfig.timeoutFactor=_),Ys.on(Aw.NETWORK_STATE_CHANGE,(C,T)=>{C!==T&&(this.resetReconnectCount("network state change: ".concat(T," -> ").concat(C)),C===Bu.ONLINE?(this.retryConfig.timeout=A,this.retryConfig.timeoutFactor=_):(this.retryConfig.timeout=g,this.retryConfig.timeoutFactor=m))});const S=Date.now();this.compressor.init().then(()=>{this.compressorInitStatus="initialized";const C=Date.now()-S;O.debug("websocket compressor initialized successfully in ".concat(C,"ms")),Ne("debug",this.compressor,"init",void 0,"websocket compressor initialized successfully in ".concat(C,"ms")),Gt.wsCompressorInit({status:!0,ec:null,eventElapse:C}),this.compress=this.compressor.compress.bind(this.compressor)}).catch(C=>{this.compressorInitStatus="failed";const T=C?C.message||C.toString():"Empty Error";O.debug("websocket compressor failed to initialize because of ".concat(T)),Ne("debug",this.compressor,"init",void 0,"websocket compressor failed to initialize because of ".concat(T)),Gt.wsCompressorInit({status:!1,ec:T,eventElapse:1})})}getConnection(){return this.websocket||void 0}init(r){this.forceCloseTimeout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const a=(c,p)=>{this.urls=r;const g=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new wz(this),this.createWebSocketConnection(g).then(c).catch(p),this.once(Er.CLOSED,()=>p(new h(u.WS_DISCONNECT))),this.once(Er.CONNECTED,()=>c())};return this._initMutex.lock().then(c=>new Un((p,g)=>{a(p,g)}).then(()=>{c()}).catch(()=>{c()}))}close(r,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const a=this.websocket;i?setTimeout(()=>a.close(),500):a.close(),this.websocket=void 0}this.state=r?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(r,i){if(!this.websocket)return O.warning("[".concat(this.name,"] can not reconnect, no websocket")),void Ne("warning",this,"reconnect","can not reconnect, no websocket");var a;void 0!==r&&(this.reconnectMode=r),O.debug("[".concat(this.name,"] reconnect is triggered initiative")),Ne("debug",this,"reconnect"),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(a=this.store)||void 0===a||a.recordJoinChannelService({status:"error",errors:[new Error(i)]},this.joinChannelServiceRecordIndex));const c=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),c&&c.bind(this.websocket)({code:9999,reason:i})}sendMessageWithJSON(r){const i=JSON.stringify(r);return{compressed:i,compressedLength:i.length,origin:r}}sendMessageWithUint8Array(r){return{compressed:r,compressedLength:r.byteLength,origin:r}}sendMessage(r){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new h(u.WS_ABORT,"websocket is not ready");try{let c=null;if(a)c=this.sendMessageWithUint8Array(r);else if("initialized"===this.compressorInitStatus&&this.useCompress&&rt("WEBSOCKET_COMPRESS"))try{c=this.compress(r),this.setWsInflateData(c)}catch{c=this.sendMessageWithJSON(r)}else c=this.sendMessageWithJSON(r);i?this.websocket.send(c.compressed):this.messageSender.pushMessage(c)}catch(c){throw new h(u.WS_ERR,"send websocket message error"+c.toString())}}setWsInflateData(r){this.wsDeflateLength=this.wsDeflateLength+r.originLength,this.wsInflateLength=this.wsInflateLength+r.compressedLength}getWsInflateData(){const r=this.wsInflateLength,i=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:r,wsDeflateLength:i}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}createWebSocketConnection(r,i){var a=this;return U(function*(){return a.connectionID+=1,a.joinChannelServiceRecordIndex=void 0,new Un((c,p)=>{var g;const m=()=>{O.debug("[".concat(a.name,"] websocket opened:"),r),st("debug",["WebSocket",a.connectionID],"open",r),a.reconnectMode="retry",a.state="connected",a.resetReconnectCount("opened"),c()},A=function(){var C=U(function*(T){if(O.debug("[".concat(a.name,"] websocket close ").concat(a.websocket&&a.websocket.url,", code: ").concat(T.code,", reason: ").concat(T.reason,", current mode: ").concat(a.reconnectMode)),st("debug",["WebSocket",a.connectionID],"close",{code:T.code,reason:T.reason,url:a.websocket&&a.websocket.url,reconnectMode:a.reconnectMode}),a.reconnectCount<a.retryConfig.maxRetryCount){"connected"===a.state&&(a.reconnectReason=T.reason,a.state="reconnecting");const D=yy(a,Er.WILL_RECONNECT,a.reconnectMode)||a.reconnectMode,B=yield a.reconnectWithAction(D);if("closed"===a.state)return O.debug("[".concat(a.connectionID,"] ws is closed, no need to reconnect")),void _e("debug",a,"ws is closed, no need to reconnect");if(!B)return p(new h(u.WS_DISCONNECT,"websocket reconnect failed: ".concat(T.code))),void a.close(!0);c()}else p(new h(u.WS_DISCONNECT,"websocket close: ".concat(T.code))),a.close()});return function(D){return C.apply(this,arguments)}}(),_=C=>{a.emit(Er.ON_MESSAGE,C)};a.websocket&&(a.websocket.onclose=null,a.websocket.close()),rt("GATEWAY_WSS_ADDRESS")&&a.name.startsWith("gateway")&&(r=rt("GATEWAY_WSS_ADDRESS")),O.debug("[".concat(a.name,"] start connect, url: ").concat(r)),_e("debug",a,"start connect, url: ".concat(r));const S=null===(g=a.store)||void 0===g?void 0:g.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});a.chooseBestWebsocketConnection(r,!!i,S).then(C=>{var T;a.websocket=C,m&&m(),C.onclose=A,C.onmessage=_,null===(T=a.store)||void 0===T||T.recordJoinChannelService({endTs:Date.now(),status:"success"},S),a.joinChannelServiceRecordIndex=S}).catch(C=>{var T;if(null===(T=a.store)||void 0===T||T.recordJoinChannelService({endTs:Date.now(),status:C instanceof h&&C.code===u.WS_ABORT?"aborted":"error",errors:[C]},S),"closed"!==a.state){if(C instanceof h&&C.code===u.WS_ERR){const D=new h(u.WS_ERR,"init websocket failed! Error: ".concat(C.toString()));return O.error("[".concat(a.name,"]").concat(D)),Ne("error",a,"chooseBestWebsocketConnection",void 0,C.toString()),void p(D)}A&&A(C)}else p(new h(u.WS_DISCONNECT,"websocket is closed: ".concat(C.toString())))})})})()}reconnectWithAction(r){var i=arguments,a=this;return U(function*(){let c=!(i.length>1&&void 0!==i[1])||i[1];if(a.reconnectCount>=a.retryConfig.maxRetryCount||!a.urls||"closed"===a.state)return!1;a.onlineReconnectListener||Ys.networkState!==Bu.OFFLINE||(a.onlineReconnectListener=Ys.onlineWaiter&&Ys.onlineWaiter.then(()=>{a.onlineReconnectListener=void 0}));let p=!0;if(a.reconnectInterrupter=()=>{p=!1},c){const m=E(a.reconnectCount,a.retryConfig);O.debug("[".concat(a.name,"] wait ").concat(m,"ms to reconnect websocket, mode: ").concat(r)),Ne("debug",a,"reconnectWithAction",{timeout:m,action:r}),yield Un.race([ic(m),a.onlineReconnectListener||new Un(()=>{})])}if("closed"===a.state||!p)return!1;a.reconnectCount+=1;const g=function(){var m=U(function*(A,_){a.emit(Er.RECONNECT_CREATE_CONNECTION,_),yield a.createWebSocketConnection(A)});return function(_,S){return m.apply(this,arguments)}}();try{if("retry"===r){const m=a.urls[a.currentURLIndex];a.emit(Er.RECONNECT_WAITTING_FINISH,r),yield g(m,r)}else if("tryNext"===r){if(a.currentURLIndex+=1,a.currentURLIndex>=a.urls.length)return yield a.reconnectWithAction("recover",!1);O.debug("[".concat(a.name,"] websocket url length: ").concat(a.urls.length," current index: ").concat(a.currentURLIndex)),_e("debug",a,"websocket url length: ".concat(a.urls.length," current index: ").concat(a.currentURLIndex));const m=a.urls[a.currentURLIndex];a.emit(Er.RECONNECT_WAITTING_FINISH,r),yield g(m,r)}else if("recover"===r){O.debug("[".concat(a.name,"] request new urls")),_e("debug",a,"request new urls"),a.resetReconnectCount("recover mode"),a.emit(Er.RECONNECT_WAITTING_FINISH,r),a.urls=yield up(a,Er.REQUEST_NEW_URLS),a.currentURLIndex=0;const m=a.urls[a.currentURLIndex];yield g(m,r)}return!0}catch(m){return O.error("[".concat(a.name,"] reconnect failed"),m.toString()),Ne("error",a,"reconnectWithAction",void 0,m.toString()),yield a.reconnectWithAction(r,c)}})()}chooseBestWebsocketConnection(r,i,a){var c=this;return U(function*(){return new Un((p,g)=>{let m=!1;const A=[];c.closeEstablishingWs=()=>{O.debug("[choose-best-ws] close establishing websockets"),A.forEach(W=>{W.onclose=null,W.onopen=null,W.onmessage=null,W.close()}),g(new h(u.WS_ABORT,"choose best websocket aborted"))};const _=rt("GATEWAY_DOMAINS");let S;const C=r.indexOf("?h="),T=_.find(W=>-1!==C?r.includes(W,C):r.includes(W));O.debug("[choose-best-ws] currentDomain: ",T,", domains: ",_),Ne("debug",c,"chooseBestWebsocketConnection",{currentDomain:T,domains:_});let D=!c.tryDoubleDomain||i||!T;if(!D&&T){var B;const W=Date.now();try{_.forEach(Z=>{const de=-1===C?r.replace(T,Z):r.substr(0,C)+r.substr(C).replace(T,Z),ge=new WebSocket(de);ge.binaryType="arraybuffer",A.push(ge),O.debug("[choose-best-ws] ws is connecting:",ge.url),_e("debug",c,"ws is connecting: ".concat(ge.url))})}catch{for(O.debug("[choose-best-ws] ws create failed, fallback to single url"),_e("debug",c,"ws create failed, fallback to single url"),A.forEach(de=>de.close());A.length;)A.pop();D=!0}null===(B=c.store)||void 0===B||B.recordJoinChannelService({urls:A.map(Z=>Z.url),service:"gateway"},a),A.forEach(Z=>{Z.onopen=()=>{if(m)return;const de=Date.now()-W;O.debug("[choose-best-ws] ws open cost ".concat(de,"ms")),A.filter(ge=>ge!==Z).forEach(ge=>{O.debug("[choose-best-ws]close backup websocket: ".concat(ge.url)),_e("debug",c,"close backup websocket: ".concat(ge.url)),ge.close()}),m=!0,p(Z)},Z.onclose=de=>{S=de,!m&&(A.find(ge=>!(ge.readyState===WebSocket.CLOSED||ge.readyState===WebSocket.CLOSING))||(O.debug("[choose-best-ws] all websocket is closed"),_e("debug",c,"all websocket is closed"),m=!0,g(S)))},Z.onmessage=de=>{O.debug("[choose-best-ws]".concat(Z.url," onmessage: ").concat(de.data)),_e("debug",c,"".concat(Z.url," onmessage: ").concat(de.data))}}),ic(c.forceCloseTimeout).then(()=>{A.forEach(Z=>{Z.readyState!==WebSocket.OPEN&&Z.close()})})}if(D){var K;let W;O.debug("[choose-best-ws] use single url: ",r),_e("debug",c,"use single url: ".concat(r)),null===(K=c.store)||void 0===K||K.recordJoinChannelService({urls:[r],service:"gateway"},a);try{W=new WebSocket(r),A.push(W),W.binaryType="arraybuffer"}catch(Z){const de=new h(u.WS_ERR,"init websocket failed! Error: ".concat(Z.toString()));return O.error("[".concat(c.name,"]").concat(de)),Ne("error",c,"chooseBestWebsocketConnection",void 0,Z.toString()),void g(de)}W.onopen=()=>{p(W)},W.onclose=Z=>{g(Z)},W.onmessage=Z=>{O.debug("[choose-best-ws]".concat(W.url," onmessage: ").concat(Z.data)),_e("debug",c,"".concat(W.url," onmessage: ").concat(Z.data))},ic(c.forceCloseTimeout).then(()=>{W&&W.readyState!==WebSocket.OPEN&&W.close()})}}).then(p=>(c.closeEstablishingWs=void 0,p)).catch(p=>{throw c.closeEstablishingWs=void 0,p})})()}})||Sx;class e8{constructor(i){q(this,"input",[]),q(this,"size",void 0),this.size=i}add(i){this.input.push(i),this.input.length>this.size&&this.input.splice(0,1)}mean(){var i;return 0===this.input.length?0:Lh(i=this.input).call(i,(a,c)=>a+c)/this.input.length}}var t8;let n8=yn("AgoraRTCSignal","websocket.connectionID")(t8=class extends s{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===Ws.CONNECTED?this.emit(Gr.WS_CONNECTED):r===Ws.RECONNECTING?this.emit(Gr.WS_RECONNECTING,this._websocketReconnectReason):r===Ws.CLOSED&&this.emit(Gr.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,i){super(),q(this,"_disconnectedReason",void 0),q(this,"_websocketReconnectReason",void 0),q(this,"_connectionState",Ws.CLOSED),q(this,"reconnectToken",void 0),q(this,"websocket",void 0),q(this,"openConnectionTime",void 0),q(this,"clientId",void 0),q(this,"lastMsgTime",Date.now()),q(this,"uploadCache",[]),q(this,"uploadCacheInterval",void 0),q(this,"rttRolling",new e8(5)),q(this,"pingpongTimer",void 0),q(this,"wsInflateDataTimer",void 0),q(this,"pingpongTimeoutCount",0),q(this,"joinResponse",void 0),q(this,"multiIpOption",void 0),q(this,"initError",void 0),q(this,"spec",void 0),q(this,"store",void 0),q(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(Gr.ON_BINARY_DATA,a.data);const c=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(c,"_id")){const p="res-@".concat(c._id);this.emit(p,c._result,c._message)}else if(Object.prototype.hasOwnProperty.call(c,"_type")&&(this.emit(c._type,c._message),c._type===Di.ON_NOTIFICATION&&this.handleNotification(c._message),c._type===Di.ON_USER_BANNED))switch(c._message.error_code){case 14:this.close(Gs.UID_BANNED);break;case 15:this.close(Gs.IP_BANNED);break;case 16:this.close(Gs.CHANNEL_BANNED)}}),this.clientId=r.clientId,this.spec=r,this.store=i,this.websocket=new LS("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Ws.CONNECTED&&this.reconnect("retry",gs.OFFLINE)})}request(r,i,a,c){var p=this;return U(function*(){const g=ns(6,""),m={_id:g,_type:r,_message:i},A=p.websocket.connectionID,_=()=>new Un((K,W)=>{if(p.connectionState===Ws.CONNECTED)return K();const Z=()=>{p.off(Gr.WS_CLOSED,de),K()},de=()=>{p.off(Gr.WS_CONNECTED,Z),W(new h(u.WS_ABORT))};p.once(Gr.WS_CONNECTED,Z),p.once(Gr.WS_CLOSED,de),r!==Zr.PUBLISH&&r!==Zr.SUBSCRIBE&&r!==Zr.UNSUBSCRIBE&&r!==Zr.UNPUBLISH&&r!==Zr.CONTROL||p.once(Gr.DISCONNECT_P2P,()=>{W(new h(u.DISCONNECT_P2P))}),r===Zr.PUBLISH&&p.once(Gr.ABORT_P2P_EXECUTION,()=>{W(new h(u.DISCONNECT_P2P))})});if(p.connectionState!==Ws.CONNECTING&&p.connectionState!==Ws.RECONNECTING||r===Zr.JOIN||r===Zr.REJOIN||(yield _()),p.websocket.sendMessage(m,!0),c)return;const S=new Un((K,W)=>{let Z=!1;const de=(Se,De)=>{Z=!0,K({isSuccess:"success"===Se,message:De||{}}),p.off(Gr.WS_CLOSED,ge),p.off(Gr.WS_RECONNECTING,ge),p.emit(Gr.REQUEST_SUCCESS,r,i)};p.once("res-@".concat(g),de);const ge=()=>{W(new h(u.WS_ABORT,"type: ".concat(r))),p.off(Gr.WS_CLOSED,ge),p.off(Gr.WS_RECONNECTING,ge),p.off("res-@".concat(g),de)};p.once(Gr.WS_CLOSED,ge),p.once(Gr.WS_RECONNECTING,ge),ic(rt("SIGNAL_REQUEST_TIMEOUT")).then(()=>{p.websocket.connectionID!==A||Z||(O.warning("ws request timeout, type: ".concat(r)),_e("warning",p,"ws request timeout, type: ".concat(r)),p.emit(Gr.REQUEST_TIMEOUT,r,i))})});let C=null;try{C=yield S}catch(K){if(p.connectionState===Ws.CLOSED||r===Zr.LEAVE)throw new h(u.WS_ABORT);return!p.spec.forceWaitGatewayResponse||a?K.throw():r===Zr.JOIN||r===Zr.REJOIN?null:(yield _(),yield p.request(r,i))}if(C.isSuccess)return C.message;const T=Number(C.message.error_code||C.message.code),D=gU(T),B=new h(u.UNEXPECTED_RESPONSE,"".concat(D.desc,": ").concat(C.message.error_str),{code:T,data:C.message});return"success"===D.action?C.message:(O.warning("[".concat(p.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(T,", message: ").concat(D.desc,", action: ").concat(D.action)),_e("warning",p,"unexpected response from type ".concat(r,", error_code: ").concat(T,", message: ").concat(D.desc,", action: ").concat(D.action)),T===or.ERR_TOO_MANY_BROADCASTERS?((r===Zr.JOIN||r===Zr.REJOIN)&&(p.initError=B,p.close()),B.throw()):"failed"===D.action?B.throw():"quit"===D.action?(p.initError=B,p.close(),B.throw()):(T===or.ERR_JOIN_BY_MULTI_IP?(p.multiIpOption=C.message.option,O.warning("[".concat(p.clientId,"] detect multi ip, recover")),_e("warning",p,"detect multi ip, recover"),p.reconnect("recover",gs.MULTI_IP)):p.reconnect(D.action,gs.SERVER_ERROR),r===Zr.JOIN||r===Zr.REJOIN?null:yield p.request(r,i)))})()}waitMessage(r,i){return new Un(a=>{const c=p=>{(!i||i(p))&&(this.off(r,c),a(p))};this.on(r,c)})}upload(r,i){const a={_type:r,_message:i};try{this.websocket.sendMessage(a)}catch{const p=rt("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>p&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Ws.CONNECTED)return;const g=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(g._type,g._message)},rt("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,i){this.websocket.sendMessage({_type:r,_message:i})}init(r,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Un((a,c)=>{this.once(Gr.WS_CONNECTED,()=>a(this.joinResponse)),this.once(Gr.WS_CLOSED,()=>c(this.initError||new h(u.WS_ABORT))),this.connectionState=Ws.CONNECTING,this.websocket.init(r).catch(c),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{i&&void 0===this.openConnectionTime&&(O.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),c(new h(u.INIT_WEBSOCKET_TIMEOUT)))},rt("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||Gs.LEAVE,this.connectionState=Ws.CLOSED,O.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),r===Gs.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new LS("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}join(){var r=this;return U(function*(){if(!r.joinResponse){r.emit(Gr.ABORT_P2P_EXECUTION);const i=yield up(r,Gr.REQUEST_JOIN_INFO),a=yield r.request(Zr.JOIN,i);if(!a)return r.emit(Gr.REPORT_JOIN_GATEWAY,u.TIMEOUT,r.url||""),!1;r.joinResponse=a,r.emit(Gr.JOIN_RESPONSE,r.joinResponse),r.reconnectToken=r.joinResponse.rejoin_token}return r.connectionState=Ws.CONNECTED,r.pingpongTimer&&window.clearInterval(r.pingpongTimer),r.pingpongTimer=window.setInterval(r.handlePingPong.bind(r),3e3),!0})()}rejoin(){var r=this;return U(function*(){if(!r.reconnectToken)throw new h(u.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const i=Nw(r,Gr.REQUEST_REJOIN_INFO);i.token=r.reconnectToken;const a=yield r.request(Zr.REJOIN,i);return!!a&&(r.connectionState=Ws.CONNECTED,r.pingpongTimer&&window.clearInterval(r.pingpongTimer),r.pingpongTimer=window.setInterval(r.handlePingPong.bind(r),3e3),a.peers&&a.peers.forEach(c=>{r.emit(Di.ON_USER_ONLINE,{uid:c.uid}),c.audio&&r.emit(Di.ON_ADD_AUDIO_STREAM,{uid:c.uid,uint_id:c.uint_id,audio:!0,ssrcId:c.audio_ssrc}),c.video&&r.emit(Di.ON_ADD_VIDEO_STREAM,{uid:c.uid,uint_id:c.uint_id,video:!0,ssrcId:c.video_ssrc}),r.emit(c.audio_mute?Di.MUTE_AUDIO:Di.UNMUTE_AUDIO,{uid:c.uid}),r.emit(c.video_mute?Di.MUTE_VIDEO:Di.UNMUTE_VIDEO,{uid:c.uid}),r.emit(c.audio_enable_local?Di.ENABLE_LOCAL_AUDIO:Di.DISABLE_LOCAL_AUDIO,{uid:c.uid}),r.emit(c.video_enable_local?Di.ENABLE_LOCAL_VIDEO:Di.DISABLE_LOCAL_VIDEO,{uid:c.uid}),c.audio||c.video||r.emit(Di.ON_REMOVE_STREAM,{uid:c.uid,uint_id:c.uint_id})}),!0)})()}reconnect(r,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,i)}handleNotification(r){O.debug("[".concat(this.clientId,"] receive notification: "),r),Ne("debug",this,"handleNotification",r);const i=gU(r.code);if("success"!==i.action)return"failed"===i.action?(O.error("[".concat(this.clientId,"] ignore error: "),i.desc),void _e("error",this,"ignore error: ".concat(i.desc))):"quit"===i.action?("ERR_REPEAT_JOIN_CHANNEL"===i.desc&&this.close(Gs.UID_BANNED),void this.close()):void this.reconnect(i.action,gs.SERVER_ERROR)}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=rt("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=r&&(O.warning("PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),_e("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>rt("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",gs.TIMEOUT):this.request(Zr.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),rt("REPORT_STATS")&&this.send(Zr.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWsInflateData(){const{wsInflateLength:r,wsDeflateLength:i}=this.websocket.getWsInflateData();0!==r&&0!==i&&this.upload(du.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(Er.RECONNECT_WAITTING_FINISH,r=>{this.emit(Gr.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(Er.RECONNECT_CREATE_CONNECTION,r=>{this.emit(Gr.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(Er.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Er.CLOSED,()=>{this.connectionState=Ws.CLOSED}),this.websocket.on(Er.FAILED,()=>{this._disconnectedReason=Gs.NETWORK_ERROR,this.connectionState=Ws.CLOSED}),this.websocket.on(Er.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState=this.connectionState===Ws.CONNECTED?Ws.RECONNECTING:Ws.CONNECTING}),this.websocket.on(Er.WILL_RECONNECT,(r,i)=>{if(Nw(this,Gr.IS_P2P_DISCONNECTED)&&"retry"===r)return O.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),_e("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Gr.NEED_RENEW_SESSION),this.emit(Gr.DISCONNECT_P2P),i("tryNext");"retry"!==r&&(O.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),_e("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(Gr.NEED_RENEW_SESSION),this.emit(Gr.DISCONNECT_P2P)),i(r)}),this.websocket.on(Er.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{O.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),Ne("warning",this,"rejoin",void 0,r.toString()),this.reconnect("tryNext",gs.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(Gr.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof h&&r.code===u.UNEXPECTED_RESPONSE&&r.data.code===or.ERR_NO_AUTHORIZED)return O.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),_e("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",gs.SERVER_ERROR);O.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),Ne("error",this,"join",void 0,r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",gs.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(Er.REQUEST_NEW_URLS,(r,i)=>{up(this,Gr.REQUEST_RECOVER,this.multiIpOption).then(r).catch(i)})}})||t8;var r8;function i8(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function x_(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?i8(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):i8(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}const o8=new Map;let Tz=yn("AgoraRTCGateway","store.clientId")(r8=class extends s{get state(){return this._state}set state(r){if(r===this._state)return;const i=this._state;this._state=r,"DISCONNECTED"===r&&this._disconnectedReason?this.emit(_s.CONNECTION_STATE_CHANGE,r,i,this._disconnectedReason):this.emit(_s.CONNECTION_STATE_CHANGE,r,i)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(r){O.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),Ne("debug",this,"joinGatewayStartTime",r,"[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),this._joinGatewayStartTime=r}constructor(r,i){super(),q(this,"store",void 0),q(this,"joinInfo",void 0),q(this,"key",void 0),q(this,"signal",void 0),q(this,"role",void 0),q(this,"inChannelInfo",{joinAt:null,duration:0}),q(this,"spec",void 0),q(this,"_state","DISCONNECTED"),q(this,"_statsCollector",void 0),q(this,"_disconnectedReason",void 0),q(this,"isSignalRecover",!1),q(this,"hasChangeBGPAddress",!1),q(this,"trafficStatsInterval",void 0),q(this,"networkQualityInterval",void 0),q(this,"_joinGatewayStartTime",0),q(this,"_signalTimeout",!1),q(this,"_clientRoleOptions",void 0),q(this,"_isProactiveJoin",!1),this.store=r,this.spec=i,this.signal=new n8(x_(x_({},i),{},{retryConfig:i.websocketRetryConfig}),r),this._statsCollector=i.statsCollector,this.role=i.role||"audience",this._clientRoleOptions=i.clientRoleOptions,this.handleSignalEvents()}join(r,i,a){var c=this;return U(function*(){c.store.joinGatewayStart(),"disabled"!==r.cloudProxyServer&&(c.hasChangeBGPAddress=!0);const p=Date.now();let g=o8.get(r.cname);if(g||(g=new Map,o8.set(r.cname,g)),c._isProactiveJoin=!0,g.has(r.uid)){const S=new h(u.UID_CONFLICT);throw Gt.joinGateway(r.sid,{lts:p,succ:!1,ec:S.message,addr:null,uid:r.uid,cid:r.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!r.proxyServer}),c._isProactiveJoin=!1,S}g.set(r.uid,!0),c.joinInfo=r,c.key=i;const m=r.proxyServer,A=r.gatewayAddrs.map(m?S=>{const C=S.address.split(":");return"wss://".concat(m,"/ws/?h=").concat(C[0],"&p=").concat(C[1])}:S=>"wss://".concat(S.address));let _=0;c.joinGatewayStartTime=p;try{_=(yield c.signal.init(A,a)).uid}catch(S){throw S&&S.code===u.INIT_WEBSOCKET_TIMEOUT?(O.warning("[".concat(c.store.clientId,"] User join failed"),S.toString()),S):(O.error("[".concat(c.store.clientId,"] User join failed"),S.toString()),Ne("error",c,"join",void 0,S.toString()),Gt.joinGateway(r.sid,{lts:p,succ:!1,ec:S.message,addr:c.signal.url,uid:r.uid,cid:r.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!m}),c._isProactiveJoin=!1,g.delete(r.uid),c.signal.close(),S)}return c.state="CONNECTED",c.inChannelInfo.joinAt=Date.now(),O.debug("[".concat(c.store.clientId,"] Connected to gateway server")),Ne("debug",c,"join",void 0,"success"),c.trafficStatsInterval=window.setInterval(()=>{c.updateTrafficStats().catch(S=>{O.warning("[".concat(c.store.clientId,"] get traffic stats error"),S.toString()),Ne("warning",c,"trafficStatsInterval",void 0,S.toString())})},3e3),c.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?c.emit(_s.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):c.emit(_s.NETWORK_QUALITY,c._signalTimeout?{downlinkNetworkQuality:5,uplinkNetworkQuality:5}:"CONNECTED"===c.state&&c._statsCollector.trafficStats?{uplinkNetworkQuality:N3(c._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:N3(c._statsCollector.trafficStats.B_dnq)}:{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),c.store.joinGatewayEnd(),_})()}leave(){var r=arguments,i=this;return U(function*(){let a=r.length>0&&void 0!==r[0]&&r[0],c=r.length>1?r[1]:void 0;if("DISCONNECTED"!==i.state){c!==Gs.FALLBACK&&(i.state="DISCONNECTING");try{a||i.signal.connectionState!==Ws.CONNECTED||(yield(p=i.signal.request(Zr.LEAVE,void 0,!0),3e3,Un.race([p,qK(3e3)])))}catch(p){O.warning("[".concat(i.store.clientId,"] leave request failed, ignore"),p),_e("warning",i,"leave request failed, ignore, ".concat(p.toString()))}i.signal.close(c),c!==Gs.FALLBACK&&(i.state="DISCONNECTED"),i.reset()}var p})()}publish(r,i,a){var c=this;return U(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new h(u.INVALID_OPERATION,"can not publish when connection state is ".concat(c.state));const p={state:"offer",p2p_id:c.store.p2pId,ortc:i,mode:c.spec.mode,extend:rt("PUB_EXTEND")};try{return(yield c.signal.request(Zr.PUBLISH,p,!0))._message}catch(g){if(a&&g.data&&g.data.code===or.ERR_PUBLISH_REQUEST_INVALID)return O.warning("[".concat(c.store.clientId,"] receive publish error code, retry"),g.toString()),_e("warning",c,"receive publish error code, retry, ".concat(g.toString())),yield c.tryUnpubBeforeRepub(r,i),c.publish(r,i,!1);throw g}})()}unpublish(r,i){var a=this;return U(function*(){try{if("CONNECTED"!==a.state&&"RECONNECTING"!==a.state)throw new h(u.INVALID_OPERATION,"can not publish when connection state is ".concat(a.state));yield a.signal.request(Zr.UNPUBLISH,{stream_id:i,ortc:r},!0)}catch(c){O.warning("unpublish warning: ",c),Ne("warning",a,"unpublish",void 0,c.toString())}})()}subscribe(r,i,a){var c=this;return U(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new h(u.INVALID_OPERATION,"can not subscribe when connection state is ".concat(c.state));const p={stream_id:r,stream_type:i.stream_type,mode:c.spec.mode,codec:c.spec.codec,p2p_id:c.store.p2pId,tcc:!!rt("SUBSCRIBE_TCC"),extend:rt("SUB_EXTEND"),ssrcId:i.ssrcId};try{return(yield c.signal.request(Zr.SUBSCRIBE,p,!0))._message}catch(g){if(a&&g.data&&g.data.code===or.ERR_SUBSCRIBE_REQUEST_INVALID)return O.warning("[".concat(c.store.clientId,"] receiver subscribe error code, retry"),g.toString()),_e("warning",c,"receiver subscribe error code, retry"),yield c.tryUnsubBeforeResub(r,i),yield c.subscribe(r,i,!1);throw g}})()}subscribeAll(r,i){var a=this;return U(function*(){if("CONNECTED"!==a.state&&"RECONNECTING"!==a.state)throw new h(u.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(a.state));const c={p2p_id:a.store.p2pId,users:r,dtx:!1};try{return yield a.signal.request(Zr.SUBSCRIBE_STREAMS,c,!0)}catch(p){if(i&&p.data&&p.data.code===or.ERR_SUBSCRIBE_REQUEST_INVALID)return O.warning("[".concat(a.store.clientId,"] receiver massSubscribe error code, retry"),p.toString()),_e("warning",a,"receiver massSubscribe error code, retry"),yield a.tryMassUnsubBeforeResub(r),yield a.subscribeAll(r,!1);throw p}})()}setVideoProfile(r){var i=this;return U(function*(){const a=function(c){if(!(c.bitrateMax&&c.bitrateMin&&c.frameRate&&c.height&&c.width))return;let p=c.frameRate,g=c.width,m=c.height,A=!0;return"number"!=typeof p&&(p=p.exact||p.ideal||p.max||p.min||0,p||(A=!1)),"number"!=typeof g&&(g=g.exact||g.ideal||g.max||g.min||0,g||(A=!1)),"number"!=typeof m&&(m=m.exact||m.ideal||m.max||m.min||0,p||(A=!1)),A?{stream_type:0,width:g,height:m,fps:p,start_bps:1e3*c.bitrateMax,min_bps:1e3*c.bitrateMin,target_bps:1e3*c.bitrateMax}:void 0}(r);return a?i.signal.request(Zr.SET_VIDEO_PROFILE,a):(O.debug("[".concat(i.store.clientId,"] encoder config is not complete, do not report to gateway")),void _e("debug",i,"encoder config is not complete, do not report to gateway"))})()}unsubscribe(r,i){var a=this;return U(function*(){try{yield a.signal.request(Zr.UNSUBSCRIBE,{p2p_id:a.store.p2pId,ortc:r,stream_id:i},!0)}catch(c){O.warning("unsubscribe warning: ",c),Ne("warning",a,"unsubscribe",void 0,c.toString())}})()}massUnsubscribe(r){var i=this;return U(function*(){try{yield i.signal.request(Zr.UNSUBSCRIBE_STREAMS,r,!0)}catch(a){O.warning("unsubscribeAll warning: ",a),Ne("warning",i,"unsubscribeAll",void 0,a.toString())}})()}reconnectPC(r){var i=this;return U(function*(){const{iceParameters:a,dtlsParameters:c,rtpCapabilities:p}=r,g=yield i.signal.request(Zr.CONNECT_PC,{p2p_id:i.store.p2pId,stream_id:i.store.uid,ortc:{iceParameters:a,dtlsParameters:c,rtpCapabilities:p}},!0),m=i.getGatewayIpPort();return{gatewayEstablishParams:g,gatewayIP:m?.ip,gatewayPort:m?.port}})()}getGatewayInfo(){return this.signal.request(Zr.GATEWAY_INFO)}renewToken(r){return this.signal.request(Zr.RENEW_TOKEN,r)}setClientRole(r,i){var a=this;return U(function*(){if(i&&(a._clientRoleOptions=Object.assign({},i)),"CONNECTED"!==a.state)return void(a.role=r);let c;c="audience"===r?a._clientRoleOptions&&a._clientRoleOptions.level?a._clientRoleOptions.level:2:0,yield a.signal.request(Zr.SET_CLIENT_ROLE,{role:r,level:c,client_ts:Date.now()}),a.role=r})()}setRemoteVideoStreamType(r,i){var a=this;return U(function*(){yield a.signal.request(Zr.SWITCH_VIDEO_STREAM,{stream_id:r,stream_type:i})})()}setDefaultRemoteVideoStreamType(r){var i=this;return U(function*(){yield i.signal.request(Zr.DEFAULT_VIDEO_STREAM,{stream_type:r})})()}setStreamFallbackOption(r,i){var a=this;return U(function*(){yield a.signal.request(Zr.SET_FALLBACK_OPTION,{stream_id:r,fallback_type:i})})()}pickSVCLayer(r,i){var a=this;return U(function*(){yield a.signal.request(Zr.PICK_SVC_LAYER,{stream_id:r,spatial_layer:i.spatialLayer,temporal_layer:i.temporalLayer})})()}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),x_({},this.inChannelInfo)}getGatewayVersion(){var r=this;return U(function*(){return(yield r.signal.request(Zr.GATEWAY_INFO)).version})()}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const r=o8.get(this.joinInfo.cname);r&&r.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const r=function(i){const a=i.match(/(wss\:\/\/)?([^:]+):(\d+)/);return a?{username:Hn.username,password:Hn.password,turnServerURL:a[2],tcpport:parseInt(a[3])+30,udpport:parseInt(a[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],r&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(x_(x_({},Hn),{},{turnServerURL:r.turnServerURL,tcpport:r.tcpport,udpport:r.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}updateTrafficStats(){var r=this;return U(function*(){if("CONNECTED"!==r.state)return;const i=yield r.signal.request(Zr.TRAFFIC_STATS,void 0,!0);i.timestamp=Date.now(),i.peer_delay.forEach(a=>{const c=r._statsCollector.trafficStats&&r._statsCollector.trafficStats.peer_delay.find(p=>p.peer_uid===a.peer_uid);c&&c.B_st!==a.B_st&&th(()=>{r.emit(_s.STREAM_TYPE_CHANGE,a.peer_uid,a.B_st)})}),r._statsCollector.updateTrafficStats(i)})()}getJoinMessage(r){if(!this.joinInfo||!this.key)throw new h(u.UNEXPECTED_ERROR,"can not generate join message, no join info");const i=Object.assign({},this.joinInfo.apResponse);let a=rt("REPORT_APP_SCENARIO");if("string"!=typeof a)try{a=JSON.stringify(a)}catch{a=void 0}a&&a.length>128&&(a=void 0);const c=x_({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:gr,browser:navigator.userAgent,process_id:rt("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:i,extend:rt("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:a,attributes:{userAttributes:{enablePublishedUserList:rt("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:rt("MAX_SUBSCRIPTION")}},join_ts:this.joinGatewayStartTime},r);return this.joinInfo.stringUid&&(c.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(c.aes_mode=this.joinInfo.aesmode,rt("ENCRYPT_AES")?(c.aes_secret=this.joinInfo.aespassword,c.aes_encrypt=!0):c.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(c.aes_salt=this.joinInfo.aessalt)),i.addresses[this.signal.websocket.currentURLIndex]&&(c.ap_response.ticket=i.addresses[this.signal.websocket.currentURLIndex].ticket,delete i.addresses),void 0!==this.joinInfo.defaultVideoStream&&(c.default_video_stream=this.joinInfo.defaultVideoStream),c}getRejoinMessage(){if(!this.joinInfo)throw new h(u.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){var r=this;this.signal.on(Gr.WS_RECONNECT_WAITTING_FINISH,i=>{["tryNext","recover"].includes(i)&&this.joinInfo&&Gt.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(Gr.WS_RECONNECT_CREATE_CONNECTION,i=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Gr.WS_RECONNECTING,i=>{this.joinInfo&&Gt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i||gs.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Gt.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Gr.WS_CLOSED,i=>{let a;switch(i){case Gs.LEAVE:a=gs.LEAVE;break;case Gs.UID_BANNED:case Gs.IP_BANNED:case Gs.CHANNEL_BANNED:case Gs.SERVER_ERROR:a=gs.SERVER_ERROR;break;case Gs.FALLBACK:a=gs.FALLBACK;break;default:a=gs.NETWORK_ERROR}O.debug("[signal] websocket closed, reason: ".concat(a||"undefined -> "+gs.NETWORK_ERROR)),He("debug",this,"ws_closed","reason: ".concat(i)),this.joinInfo&&Gt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:i===Gs.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:a}),this._disconnectedReason=i,i!==Gs.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Gr.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(O.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),_e("debug",this,"patch to send set client role, role: ".concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Gt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint)){const i=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!i)return O.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(i)),void _e("error",this,"set local access point after joined failed: ".concat(i));Ln("EVENT_REPORT_DOMAIN",i[1]),Ln("EVENT_REPORT_BACKUP_DOMAIN",i[1]),Ln("LOG_UPLOAD_SERVER","".concat(i[1],":6444"))}}),this.signal.on(Di.ON_UPLINK_STATS,i=>{this._statsCollector.updateUplinkStats(i)}),this.signal.on(Gr.REQUEST_RECOVER,(i,a,c)=>{if(!this.joinInfo)return c(new h(u.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));i&&(this.joinInfo.multiIP=i,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,up(this,_s.REQUEST_NEW_GATEWAY_LIST).then(a).catch(c)}),this.signal.on(Gr.REQUEST_JOIN_INFO,function(){var i=U(function*(a){var c;r.updateTurnConfigFromSignal();const{iceParameters:p,dtlsParameters:g,rtpCapabilities:m}=yield up(r,_s.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(c=r.joinInfo)||void 0===c?void 0:c.turnServer});a(r.getJoinMessage({ortc:{iceParameters:p,dtlsParameters:g,rtpCapabilities:m,version:"2"}}))});return function(a){return i.apply(this,arguments)}}()),this.signal.on(Gr.REQUEST_REJOIN_INFO,i=>{i(this.getRejoinMessage())}),this.signal.on(Gr.REPORT_JOIN_GATEWAY,(i,a)=>{this.joinInfo&&(Gt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:i,addr:a,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1)}),this.signal.on(Gr.IS_P2P_DISCONNECTED,i=>{i(Nw(this,_s.IS_P2P_DISCONNECTED))}),this.signal.on(Gr.DISCONNECT_P2P,()=>{this.emit(_s.DISCONNECT_P2P)}),this.signal.on(Gr.NEED_RENEW_SESSION,()=>{this.emit(_s.NEED_RENEW_SESSION)}),this.signal.on(Gr.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Gr.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Gr.JOIN_RESPONSE,i=>{const a=this.getGatewayIpPort();a?this.emit(_s.JOIN_RESPONSE,i,a.ip,a.port):this.emit(_s.JOIN_RESPONSE,i)})}tryUnsubBeforeResub(r,i){var a=this;return U(function*(){try{yield a.signal.request(Zr.UNSUBSCRIBE,{p2p_id:a.store.p2pId,stream_id:r,ortc:[i]},!0)}catch(c){throw O.warning("unsubscribe warning",c),Ne("warning",a,"tryUnsubBeforeResub",r,c.toString()),c}})()}tryUnpubBeforeRepub(r,i){var a=this;return U(function*(){try{yield a.signal.request(Zr.UNPUBLISH,{stream_id:r,ortc:i},!0)}catch(c){throw O.warning("unpublish warning: ",c),Ne("warning",a,"tryUnpubBeforeRepub",r,c.toString()),c}})()}tryMassUnsubBeforeResub(r){var i=this;return U(function*(){const a={users:r.map(c=>({stream_id:c.stream_id,stream_type:c.stream_type}))};try{yield i.signal.request(Zr.UNSUBSCRIBE_STREAMS,a,!0)}catch(c){throw O.warning("massUnsubscribe warning",c),Ne("warning",i,"tryUnsubAllBeforeResub",r.map(p=>p.stream_id),c.toString()),c}})()}muteLocal(r,i){var a=this;return U(function*(){const c={action:r.find(p=>p.stream_type===Zo.Audio)?"mute_local_audio":"mute_local_video",p2p_id:a.store.p2pId,ortc:r,stream_id:i};try{yield a.signal.request(Zr.CONTROL,c,!0,!0)}catch(p){throw O.warning("gateway unmuteLocal warning: ",p),Ne("warning",a,"muteLocal",i,p.toString()),p}})()}unmuteLocal(r,i){var a=this;return U(function*(){const c={action:r.find(p=>p.stream_type===Zo.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:a.store.p2pId,ortc:r,stream_id:i};try{yield a.signal.request(Zr.CONTROL,c,!0,!0)}catch(p){throw O.warning("gateway muteLocal warning: ",p),Ne("warning",a,"unmuteLocal",i,p.toString()),p}})()}uploadStats(r,i){this.signal.upload(r,i)}getSignalRTT(){return this.signal.rtt}restartICE(r){var i=this;return U(function*(){const a={p2p_id:i.store.p2pId,stream_id:i.store.uid,ortc:r};try{const c=yield i.signal.request(Zr.RESTART_ICE,a,!0),p=i.getGatewayIpPort();return{restartICEResponse:c,gatewayIP:p?.ip,gatewayPort:p?.port}}catch(c){throw O.warning("P2PChannel.restartICE warning: ",c),Ne("warning",i,"restartICE",void 0,c.toString()),c}})()}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,gs.P2P_FAILED)}getGatewayIpPort(){var r;if(!rt("GATEWAY_WSS_ADDRESS")&&null!==(r=this.joinInfo)&&void 0!==r&&r.gatewayAddrs){const i=this.joinInfo.gatewayAddrs[this.signal.currentURLIndex];return(i.ip||i.ip6)&&i.port?i.ip6?{ip:i.ip6,port:i.port}:{ip:i.ip,port:i.port}:void 0}}})||r8;function OH(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function DH(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?OH(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):OH(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}!function(){var r;function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var c,a="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,o){return t==Array.prototype||t==Object.prototype||(t[e]=o.value),t},p=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof te&&te];for(var e=0;e<t.length;++e){var o=t[e];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")}(this);function g(t,e){if(e)e:{var o=p;t=t.split(".");for(var d=0;d<t.length-1;d++){var f=t[d];if(!(f in o))break e;o=o[f]}(e=e(d=o[t=t[t.length-1]]))!=d&&null!=e&&a(o,t,{configurable:!0,writable:!0,value:e})}}function m(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function A(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}if(g("Symbol",function(t){function e(f,b){this.A=f,a(this,"description",{configurable:!0,writable:!0,value:b})}if(t)return t;e.prototype.toString=function(){return this.A};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",d=0;return function f(b){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new e(o+(b||"")+"_"+d++,b)}}),g("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<e.length;o++){var d=p[e[o]];"function"==typeof d&&"function"!=typeof d.prototype[t]&&a(d.prototype,t,{configurable:!0,writable:!0,value:function(){return m(i(this))}})}return t}),"function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var _;e:{var S={};try{S.__proto__={a:!0},_=S.a;break e}catch{}_=!1}c=_?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var C=c;function T(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function D(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}function B(t,e){return t.h=3,{value:e}}function K(t){this.g=new T,this.G=t}function W(t,e,o,d){try{var f=e.call(t.g.j,o);if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");if(!f.done)return t.g.m=!1,f;var b=f.value}catch(y){return t.g.j=null,t.g.s(y),Z(t)}return t.g.j=null,d.call(t.g,b),Z(t)}function Z(t){for(;t.g.h;)try{var e=t.G(t.g);if(e)return t.g.m=!1,{value:e.value,done:!1}}catch(o){t.g.v=void 0,t.g.s(o)}if(t.g.m=!1,t.g.l){if(e=t.g.l,t.g.l=null,e.F)throw e.D;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function de(t){this.next=function(e){return t.o(e)},this.throw=function(e){return t.s(e)},this.return=function(e){return function(o,d){D(o.g);var f=o.g.j;return f?W(o,"return"in f?f.return:function(b){return{value:b,done:!0}},d,o.g.return):(o.g.return(d),Z(o))}(t,e)},this[Symbol.iterator]=function(){return this}}function ge(t,e){return e=new de(new K(e)),C&&t.prototype&&C(e,t.prototype),e}if(T.prototype.o=function(t){this.v=t},T.prototype.s=function(t){this.l={D:t,F:!0},this.h=this.C||this.u},T.prototype.return=function(t){this.l={return:t},this.h=this.u},K.prototype.o=function(t){return D(this.g),this.g.j?W(this,this.g.j.next,t,this.g.o):(this.g.o(t),Z(this))},K.prototype.s=function(t){return D(this.g),this.g.j?W(this,this.g.j.throw,t,this.g.o):(this.g.s(t),Z(this))},g("Array.prototype.entries",function(t){return t||function(){return function(e,o){e instanceof String&&(e+="");var d=0,f=!1,b={next:function(){if(!f&&d<e.length){var y=d++;return{value:o(y,e[y]),done:!1}}return f=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}(this,function(e,o){return[e,o]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var Se=function(t,e){for(var o=0;o<t.length;o++)e(t[o])},De=function(t){return t.replace(/\r?\n|\r/g,"\r\n")},it=function(t,e,o){return e instanceof Blob?(o=void 0!==o?String(o+""):"string"==typeof e.name?e.name:"blob",e.name===o&&"[object Blob]"!==Object.prototype.toString.call(e)||(e=new File([e],o)),[String(t),e]):[String(t),String(e)]},Rt=function(t,e){if(t.length<e)throw new TypeError(e+" argument required, but only "+t.length+" present.")},Dt="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,Pt=Dt.FormData,On=Dt.XMLHttpRequest&&Dt.XMLHttpRequest.prototype.send,pn=Dt.Request&&Dt.fetch,cn=Dt.navigator&&Dt.navigator.sendBeacon,bt=Dt.Element&&Dt.Element.prototype,Ve=Dt.Symbol&&Symbol.toStringTag;Ve&&(Blob.prototype[Ve]||(Blob.prototype[Ve]="Blob"),"File"in Dt&&!File.prototype[Ve]&&(File.prototype[Ve]="File"));try{new File([],"")}catch{Dt.File=function(e,o,d){return e=new Blob(e,d||{}),Object.defineProperties(e,{name:{value:o},lastModified:{value:+(d&&void 0!==d.lastModified?new Date(d.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Ve&&Object.defineProperty(e,Ve,{value:"File"}),e}}var nt=function(t){return t.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},At=function(t){this.i=[];var e=this;t&&Se(t.elements,function(o){if(o.name&&!o.disabled&&"submit"!==o.type&&"button"!==o.type&&!o.matches("form fieldset[disabled] *"))if("file"===o.type){var d=o.files&&o.files.length?o.files:[new File([],"",{type:"application/octet-stream"})];Se(d,function(f){e.append(o.name,f)})}else"select-multiple"===o.type||"select-one"===o.type?Se(o.options,function(f){!f.disabled&&f.selected&&e.append(o.name,f.value)}):"checkbox"===o.type||"radio"===o.type?o.checked&&e.append(o.name,o.value):(d="textarea"===o.type?De(o.value):o.value,e.append(o.name,d))})};if((r=At.prototype).append=function(t,e,o){Rt(arguments,2),this.i.push(it(t,e,o))},r.delete=function(t){Rt(arguments,1);var e=[];t=String(t),Se(this.i,function(o){o[0]!==t&&e.push(o)}),this.i=e},r.entries=function t(){var e,o=this;return ge(t,function(d){if(1==d.h&&(e=0),3!=d.h)return e<o.i.length?d=B(d,o.i[e]):(d.h=0,d=void 0),d;e++,d.h=2})},r.forEach=function(t,e){Rt(arguments,1);for(var o=A(this),d=o.next();!d.done;d=o.next()){var f=A(d.value);d=f.next().value,f=f.next().value,t.call(e,f,d,this)}},r.get=function(t){Rt(arguments,1);var e=this.i;t=String(t);for(var o=0;o<e.length;o++)if(e[o][0]===t)return e[o][1];return null},r.getAll=function(t){Rt(arguments,1);var e=[];return t=String(t),Se(this.i,function(o){o[0]===t&&e.push(o[1])}),e},r.has=function(t){Rt(arguments,1),t=String(t);for(var e=0;e<this.i.length;e++)if(this.i[e][0]===t)return!0;return!1},r.keys=function t(){var e,o,b=this;return ge(t,function(y){if(1==y.h&&(e=A(b),o=e.next()),3!=y.h)return o.done?void(y.h=0):B(y,A(o.value).next().value);o=e.next(),y.h=2})},r.set=function(t,e,o){Rt(arguments,2),t=String(t);var d=[],f=it(t,e,o),b=!0;Se(this.i,function(y){y[0]===t?b&&(b=!d.push(f)):d.push(y)}),b&&d.push(f),this.i=d},r.values=function t(){var e,o,f,b=this;return ge(t,function(y){if(1==y.h&&(e=A(b),o=e.next()),3!=y.h)return o.done?void(y.h=0):((f=A(o.value)).next(),B(y,f.next().value));o=e.next(),y.h=2})},At.prototype._asNative=function(){for(var t=new Pt,e=A(this),o=e.next();!o.done;o=e.next()){var d=A(o.value);o=d.next().value,d=d.next().value,t.append(o,d)}return t},At.prototype._blob=function(){var t="----formdata-polyfill-"+Math.random(),e=[],o="--"+t+'\r\nContent-Disposition: form-data; name="';return this.forEach(function(d,f){return"string"==typeof d?e.push(o+nt(De(f))+'"\r\n\r\n'+De(d)+"\r\n"):e.push(o+nt(De(f))+'"; filename="'+nt(d.name)+'"\r\nContent-Type: '+(d.type||"application/octet-stream")+"\r\n\r\n",d,"\r\n")}),e.push("--"+t+"--"),new Blob(e,{type:"multipart/form-data; boundary="+t})},At.prototype[Symbol.iterator]=function(){return this.entries()},At.prototype.toString=function(){return"[object FormData]"},bt&&!bt.matches&&(bt.matches=bt.matchesSelector||bt.mozMatchesSelector||bt.msMatchesSelector||bt.oMatchesSelector||bt.webkitMatchesSelector||function(t){for(var e=(t=(this.document||this.ownerDocument).querySelectorAll(t)).length;0<=--e&&t.item(e)!==this;);return-1<e}),Ve&&(At.prototype[Ve]="FormData"),On){var n=Dt.XMLHttpRequest.prototype.setRequestHeader;Dt.XMLHttpRequest.prototype.setRequestHeader=function(t,e){n.call(this,t,e),"content-type"===t.toLowerCase()&&(this.B=!0)},Dt.XMLHttpRequest.prototype.send=function(t){t instanceof At?(t=t._blob(),this.B||this.setRequestHeader("Content-Type",t.type),On.call(this,t)):On.call(this,t)}}pn&&(Dt.fetch=function(t,e){return e&&e.body&&e.body instanceof At&&(e.body=e.body._blob()),pn.call(this,t,e)}),cn&&(Dt.navigator.sendBeacon=function(t,e){return e instanceof At&&(e=e._asNative()),cn.call(this,t,e)}),Dt.FormData=At}}();let s8=1;function kH(r,i,a,c,p){s8+=1;const g={sid:a.sid,command:"convergeAllocateEdge",uid:"666",appId:a.appId,ts:Math.floor(Date.now()/1e3),seq:s8,requestId:s8,version:gr,cname:a.cname},m={service_name:i,json_body:JSON.stringify(g)};let A,_,S=r[0];return I(U(function*(){A=Date.now();const C=yield cp(S,{data:m,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(_=Date.now()-A,0!==C.code){const B=new h(u.UNEXPECTED_RESPONSE,"live streaming ap error, code"+C.code,{retry:!0,responseTime:_});throw O.error(B.toString()),Ne("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,B.toString()),B}const T=JSON.parse(C.json_body);if(200!==T.code){const B=new h(u.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(T.code,", reason: ").concat(T.reason),{code:T.code,responseTime:_});throw O.error(B.toString()),Ne("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,B.toString()),B}if(!T.servers||0===T.servers.length){const B=new h(u.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:T.code,responseTime:_});throw O.error(B.toString()),Ne("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,B.toString()),B}const D=(K=i,{addressList:(B=T).servers.map(W=>"wss://".concat(W.address.replace(/\./g,"-"),".").concat(rt("WORKER_DOMAIN"),":").concat(W.wss,"?serviceName=").concat(encodeURIComponent(K))),workerToken:B.workerToken,vid:B.vid});var B,K;return rt("LIVE_STREAMING_ADDRESS")&&(D.addressList=rt("LIVE_STREAMING_ADDRESS")instanceof Array?rt("LIVE_STREAMING_ADDRESS"):[rt("LIVE_STREAMING_ADDRESS")]),DH(DH({},D),{},{responseTime:_})}),(C,T)=>(Gt.apworkerEvent(a.sid,{success:!0,sc:200,serviceName:i,responseDetail:JSON.stringify(C.addressList),firstSuccess:0===T,responseTime:_,serverIp:r[T%r.length]}),!1),(C,T)=>(Gt.apworkerEvent(a.sid,{success:!1,sc:C.data&&C.data.code||200,serviceName:i,responseTime:_,serverIp:r[T%r.length]}),!!(C.code!==u.OPERATION_ABORTED&&C.code!==u.UNEXPECTED_RESPONSE||C.data&&C.data.retry)&&(S=r[(T+1)%r.length],!0)),p)}let a8=1;function PH(r,i,a,c){let{url:p,areaCode:g}=r;Ne("debug",["AjaxAPI",i.clientId],"requestChooseServer",{url:p,areaCode:g});const m=Date.now(),[A,_]=u8(i,g,[zs.CHOOSE_SERVER]);let S=Ys.networkState;return I(U(function*(){S&&Ys.networkState===Bu.OFFLINE&&Ys.onlineWaiter&&(yield Un.race([Ys.onlineWaiter,ic(c&&c.maxRetryTimeout||v.maxRetryTimeout)])),S=Ys.networkState;const C=yield cp(p,{data:A,cancelToken:a,headers:{"Content-Type":"multipart/form-data;"}},!0);Gt.reportResourceTiming(p,i.sid),c8(C,p,i,m,[zs.CHOOSE_SERVER]);const T=x3(C,zs.CHOOSE_SERVER);return tk(T),D9(T,p)}),C=>(C&&Gt.joinChooseServer(i.sid,{lts:m,succ:!0,csAddr:p,opid:_,serverList:C.gatewayAddrs.map(T=>T.address),ec:null,cid:C.cid.toString(),uid:C.uid.toString(),csIp:C.csIp,unilbsServerIds:[zs.CHOOSE_SERVER].toString()}),!1),C=>C.code!==u.OPERATION_ABORTED&&(C.code===u.CAN_NOT_GET_GATEWAY_SERVER?C.data.retry:(Gt.joinChooseServer(i.sid,{lts:m,succ:!1,csAddr:p,serverList:null,opid:_,ec:C.code,csIp:C.data&&C.data.csIp,unilbsServerIds:[zs.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:S})}),O.warning("[".concat(i.clientId,"] Choose server network error, retry"),C),_e("warning",["AjaxAPI",i.clientId],"Choose server network error, retry, ".concat(C)),!0)),c)}function MH(r,i,a,c){let{url:p,areaCode:g,serviceIds:m}=r;Ne("debug",["AjaxAPI",i.clientId],"requestMultiUnilbs",{url:p,areaCode:g,serviceIds:m});const A=Date.now(),[_,S]=u8(i,g,m);let C;return I(U(function*(){C&&Ys.networkState===Bu.OFFLINE&&Ys.onlineWaiter&&(yield Un.race([Ys.onlineWaiter,ic(c&&c.maxRetryTimeout||v.maxRetryTimeout)])),C=Ys.networkState;const T=yield cp(p,{data:_,cancelToken:a,headers:{"Content-Type":"multipart/form-data;"}},!0);Gt.reportResourceTiming(p,i.sid),c8(T,p,i,A,m);const D=x3(T,zs.CHOOSE_SERVER),B=x3(T,"proxy5"===i.cloudProxyServer?zs.CLOUD_PROXY_5:"proxy3"===i.cloudProxyServer||"proxy4"===i.cloudProxyServer?zs.CLOUD_PROXY:zs.CLOUD_PROXY_FALLBACK);return tk(D),{gatewayInfo:D9(D,p),proxyInfo:B,url:p}}),T=>(T.gatewayInfo&&Gt.joinChooseServer(i.sid,{lts:A,succ:!0,csAddr:p,serverList:T.gatewayInfo.gatewayAddrs.map(D=>D.address),ec:null,opid:S,cid:T.gatewayInfo.cid.toString(),uid:T.gatewayInfo.uid.toString(),csIp:T.gatewayInfo.csIp,unilbsServerIds:m.toString()}),T.proxyInfo&&Gt.joinWebProxyAP(i.sid,{lts:A,sucess:1,apServerAddr:p,turnServerAddrList:T.proxyInfo.addresses.map(D=>D.ip).join(","),errorCode:null,eventType:i.cloudProxyServer,unilbsServerIds:m.toString()}),!1),T=>T.code!==u.OPERATION_ABORTED&&(T.code===u.CAN_NOT_GET_GATEWAY_SERVER?T.data.retry:(Gt.joinWebProxyAP(i.sid,{lts:A,sucess:0,apServerAddr:p,turnServerAddrList:null,errorCode:T.code,eventType:i.cloudProxyServer,unilbsServerIds:m.toString(),extend:JSON.stringify({networkState:C})}),O.warning("[".concat(i.clientId,"] multi unilbs network error, retry"),T),_e("warning",["AjaxAPI",i.clientId],"multi unilbs network error, retry, ".concat(T)),!0)),c)}const c8=(r,i,a,c,p)=>{const g=[],m=A=>{4096===A.flag?Gt.joinChooseServer(a.sid,{lts:c,succ:!1,csAddr:i,opid:r.opid,serverList:null,ec:A.error.message,csIp:A.error.data&&A.error.data.csIp,unilbsServerIds:p.toString()}):1048576!==A.flag&&4194304!==A.flag&&4194310!==A.flag||Gt.joinWebProxyAP(a.sid,{lts:c,sucess:0,apServerAddr:i,turnServerAddrList:null,errorCode:A.error.code,eventType:a.cloudProxyServer,unilbsServerIds:p.toString()})};if(r.response_body.forEach(A=>{const _=A.buffer.code;if(23===A.uri&&0===_&&!A.buffer.edges_services)if(4194310===A.buffer.flag)O.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),A.buffer.edges_services=[];else{const S={error:new h(u.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:r.detail[502]}),flag:A.buffer.flag};g.push(S),m(S)}if(0!==_){const S=ZD(_),C={error:new h(u.CAN_NOT_GET_GATEWAY_SERVER,S.desc,{retry:S.retry,csIp:r.detail[502]}),flag:A.buffer.flag};4194310===A.buffer.flag?O.warning(C.error.toString()):g.push(C),m(C)}}),g.length)throw O.warning("[".concat(a.clientId,"] multi unilbs ").concat(i," failed, ").concat(g.map(A=>"flag: ".concat(A.flag,", message: ").concat(A.error.message,", retry: ").concat(A.error.data.retry)).join(" | "))),Ne("warning",["AjaxAPI",a.clientId],"checkMultiUnilbsResponseValid",{url:i},g.map(A=>({flag:A.flag,message:A.error.message,retry:A.error.data.retry}))),new h(u.CAN_NOT_GET_GATEWAY_SERVER,g.map(A=>"flag: ".concat(A.flag,", message: ").concat(A.error.message)).join(" | "),{retry:!!g.find(A=>A.error.data.retry),csIp:r.detail[502]})},tk=r=>{if(r.addresses&&0===r.addresses.length&&0===r.code)throw new h(u.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:r.detail&&r.detail[502]});if(rt("GATEWAY_ADDRESS")&&rt("GATEWAY_ADDRESS").length>0){O.debug("assign gateway address to",rt("GATEWAY_ADDRESS")),_e("debug",["AjaxAPI"],"assign gateway address to ".concat(JSON.stringify(rt("GATEWAY_ADDRESS"))));const i=rt("GATEWAY_ADDRESS").map(a=>({ip:a.ip,port:a.port,ticket:r.addresses[0]&&r.addresses[0].ticket}));r.addresses=i}},NH=(r,i)=>{if(r.response_body&&r.response_body.length){const a=r.response_body[0];if(0!==a.buffer.code){const c=ZD(a.buffer.code);throw new h(u.UPDATE_TICKET_FAILED,"[".concat(a.buffer.code,"]: ").concat(c.desc),{retry:c.retry})}return a.buffer.ticket}throw O.debug("update ticket request received ap response without response body:",i),_e("debug",["AjaxAPI"],"update ticket request received ap response without response body: ".concat(i)),new h(u.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},u8=(r,i,a)=>{const c=Math.floor(1e12*Math.random()),p={appid:r.appId,client_ts:Date.now(),opid:c,sid:r.sid,request_bodies:[{uri:22,buffer:{cname:r.cname,detail:{6:r.stringUid,11:i,12:rt("USE_NEW_TOKEN")?"1":void 0},key:r.token,service_ids:a,uid:r.uid||0}}]};p.request_bodies.forEach(m=>{r.multiIP&&r.multiIP.gateway_ip&&(m.buffer.detail[5]=JSON.stringify({vocs_ip:[r.multiIP.uni_lbs_ip],vos_ip:[r.multiIP.gateway_ip]}))});const g=new FormData;return g.append("request",JSON.stringify(p)),[g,c]},xH=(r,i)=>{const a=Math.floor(1e12*Math.random()),c={appid:r.appId,client_ts:Date.now(),opid:a,sid:r.sid,request_bodies:[{uri:28,buffer:{cname:r.cname,detail:{1:"",6:r.stringUid,12:"1"},token:r.token,service_ids:i,uid:r.uid||0,edges_services:r.apResponse.addresses.map(g=>({ip:g.ip,port:g.port}))}}]},p=new FormData;return p.append("request",JSON.stringify(c)),[p,a]};let AU=0;const nk=()=>{const r=rt("AREAS");return 0===r.length&&r.push(ni.GLOBAL),Lh(r).call(r,(i,a,c)=>{const p=LH(a);return p?0===c?p:"".concat(i,",").concat(p):i},"")},LH=r=>r===ni.OVERSEA?"".concat(Ks.ASIA,",").concat(Ks.EUROPE,",").concat(Ks.AFRICA,",").concat(Ks.NORTH_AMERICA,",").concat(Ks.SOUTH_AMERICA,",").concat(Ks.OCEANIA):Ks[r],Cx={GLOBAL:{ASIA:[ni.CHINA,ni.JAPAN,ni.INDIA,ni.KOREA,ni.HKMC],EUROPE:[],NORTH_AMERICA:[ni.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},yU=Object.keys(Cx[ni.GLOBAL]),l8=[ni.CHINA,ni.NORTH_AMERICA,ni.EUROPE,ni.ASIA,ni.JAPAN,ni.INDIA,ni.OCEANIA,ni.SOUTH_AMERICA,ni.AFRICA,ni.KOREA,ni.HKMC,ni.US];function rk(r,i,a,c){return d8.apply(this,arguments)}function d8(){return d8=U(function*(r,i,a,c){return{gatewayInfo:yield(g=U(function*(m,A,_,S){let C=null;const T=[],D=function(){var K=U(function*(){const W=rt("WEBCS_DOMAIN").slice(0,rt("AJAX_REQUEST_CONCURRENT")).map(ge=>({url:m.proxyServer?"https://".concat(m.proxyServer,"/ap/?url=").concat(ge+"/api/v2/transpond/webrtc?v=2"):"https://".concat(ge,"/api/v2/transpond/webrtc?v=2"),areaCode:nk()})),Z=S.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:W.map(ge=>ge.url)}),de=yield xw({fragementLength:rt("FRAGEMENT_LENGTH"),referenceList:W,asyncMapHandler:ge=>(O.debug("[".concat(m.clientId,"] Connect to choose_server:"),ge.url),PH(ge,m,A,_)),allFailedhandler:ge=>{throw S.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ge},Z),ge[0]},promisesCollector:T});return S.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),de});return function(){return K.apply(this,arguments)}}(),B=function(){var K=U(function*(){if(yield ic(1e3),null!==C)return C;const W=rt("WEBCS_DOMAIN_BACKUP_LIST").map(ge=>({url:m.proxyServer?"https://".concat(m.proxyServer,"/ap/?url=").concat(ge+"/api/v2/transpond/webrtc?v=2"):"https://".concat(ge,"/api/v2/transpond/webrtc?v=2"),areaCode:nk()})),Z=S.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:W.map(ge=>ge.url)}),de=yield xw({fragementLength:rt("FRAGEMENT_LENGTH"),referenceList:W,asyncMapHandler:ge=>(O.debug("[".concat(m.clientId,"] Connect to backup choose_server:"),ge.url),PH(ge,m,A,_)),allFailedhandler:ge=>{throw S.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ge},Z),ge[0]},promisesCollector:T});return S.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),de});return function(){return K.apply(this,arguments)}}();try{return C=yield Mw([D(),B()]),T.length&&T.forEach(K=>K.cancel&&"function"==typeof K.cancel&&K.cancel()),C}catch(K){throw K[0]}}),function(m,A,_,S){return g.apply(this,arguments)})(r,i,a,c)};var g}),d8.apply(this,arguments)}function p8(r,i,a,c,p){return Ix.apply(this,arguments)}function Ix(){return Ix=U(function*(r,i,a,c,p){const g=r.cloudProxyServer;if("disabled"===g){if(!c)return;if(r.useLocalAccessPoint)return yield rk(r,i,a,p);if(rt("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:A,proxyInfo:_}=yield h8(r,i,a,p);return r.turnServer&&"auto"!==r.turnServer.mode?(_e("debug",["Server",r.clientId],"do not set fallback turn because of already having turnserver"),{gatewayInfo:A}):(r.turnServer={mode:"manual",servers:_.map(S=>({turnServerURL:S.address,tcpport:S.tcpport||Hn.tcpport,udpport:S.udpport||Hn.udpport,username:S.username||Hn.username,password:S.password||Hn.password,forceturn:rt("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))},{gatewayInfo:A})}return yield rk(r,i,a,p)}let m;if(["443only","normal"].includes(g)){let A;c?"normal"!==g?[A,m]=yield Un.all([Tx(r,i,a),rk(r,i,a,p)]):(A=yield Tx(r,i,a),r.proxyServer=A.addresses[0],Gt.setProxyServer(r.proxyServer),O.setProxyServer(r.proxyServer),Ze(r.proxyServer),m=yield rk(r,i,a,p)):(m=void 0,"normal"!==g?A=yield Tx(r,i,a):(A=yield Tx(r,i,a),r.proxyServer=A.addresses[0],Gt.setProxyServer(r.proxyServer),O.setProxyServer(r.proxyServer),Ze(r.proxyServer))),r.turnServer={mode:"manual",servers:A.addresses.map(_=>({turnServerURL:_,tcpport:A.serverResponse.tcpport?A.serverResponse.tcpport:Hn.tcpport,udpport:A.serverResponse.udpport?A.serverResponse.udpport:Hn.udpport,username:A.serverResponse.username||Hn.username,password:A.serverResponse.password||Hn.password,forceturn:!0,security:!1}))}}else{const{proxyInfo:A,gatewayInfo:_}=yield h8(r,i,a,p);m={gatewayInfo:_},r.turnServer={mode:"manual",servers:A.map(S=>({turnServerURL:S.address,tcpport:"proxy3"===g?void 0:S.tcpport?S.tcpport:Hn.tcpport,udpport:"proxy4"===g?void 0:S.udpport?S.udpport:Hn.udpport,username:S.username||Hn.username,password:S.password||Hn.password,forceturn:"proxy4"!==g,security:"proxy5"===g}))}}return O.debug("[".concat(r.clientId,"] set proxy server: ").concat(r.proxyServer,", mode: ").concat(g)),Ne("debug",["Server",r.clientId],"setCloudProxyServerAndGetServerInfo",{proxyServer:r.proxyServer,mode:r.cloudProxyServer}),m}),Ix.apply(this,arguments)}function wx(r,i,a,c,p){return EU.apply(this,arguments)}function EU(){return EU=U(function*(r,i,a,c,p){let m=[];m=rt("ACCOUNT_REGISTER").slice(0,rt("AJAX_REQUEST_CONCURRENT")).map(i.proxyServer?_=>"https://".concat(i.proxyServer,"/ap/?url=").concat(_+"/api/v1"):_=>"https://".concat(_,"/api/v1"));const A=p?.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:m});try{const _=yield(S=U(function*(C,T,D,B,K){const W=Date.now(),Z={sid:D.sid,opid:10,appid:D.appId,string_uid:T};let de=C[0];const ge=yield I(()=>cp(de+"".concat(-1===de.indexOf("?")?"?":"&","action=stringuid"),{data:Z,cancelToken:B,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(Se,De)=>{if(0===Se.code){if(Se.uid<=0||Se.uid>=Math.pow(2,32))throw O.error("Invalid Uint Uid ".concat(T," => ").concat(Se.uid),Se),Ne("error",["AjaxAPI"],"requestUserAccount","Invalid Uint Uid ".concat(T," => ").concat(Se.uid,", ").concat(Se)),Gt.reqUserAccount(Z.sid,{lts:W,success:!1,serverAddr:de,stringUid:Z.string_uid,uid:Se.uid,errorCode:u.INVALID_UINT_UID_FROM_STRING_UID,extend:Z}),new h(u.INVALID_UINT_UID_FROM_STRING_UID);return Gt.reqUserAccount(Z.sid,{lts:W,success:!0,serverAddr:de,stringUid:Z.string_uid,uid:Se.uid,errorCode:null,extend:Z}),!1}const it=ZD(Se.code);return it.retry&&(de=C[(De+1)%C.length]),Gt.reqUserAccount(Z.sid,{lts:W,success:!1,serverAddr:de,stringUid:Z.string_uid,uid:Se.uid,errorCode:it.desc,extend:Z}),it.retry},(Se,De)=>Se.code!==u.OPERATION_ABORTED&&(Gt.reqUserAccount(Z.sid,{lts:W,success:!1,serverAddr:de,stringUid:Z.string_uid,uid:null,errorCode:Se.code,extend:Z}),de=C[(De+1)%C.length],!0),K);if(0!==ge.code){const Se=ZD(ge.code);throw new h(u.UNEXPECTED_RESPONSE,Se.desc)}return ge}),function(C,T,D,B,K){return S.apply(this,arguments)})(m,r,i,a,c);return p?.recordJoinChannelService({status:"success",endTs:Date.now()},A),_.uid}catch(_){throw p?.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[_]},A),_}var S}),EU.apply(this,arguments)}function Tx(r,i,a){return bU.apply(this,arguments)}function bU(){return bU=U(function*(r,i,a){let c=Date.now();const p=r.cloudProxyServer,g=rt("normal"===p?"PROXY_CS":"WEBCS_DOMAIN").map(C=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(C+"/api/v1"):"https://".concat(C,"/api/v1"));if(["proxy3","proxy4","proxy5"].includes(p)){const C=g.map(B=>({url:B,areaCode:nk()}));let T=null;T=yield xw({fragementLength:rt("FRAGEMENT_LENGTH"),referenceList:C,asyncMapHandler:B=>function(K,W,Z,de){let{url:ge,areaCode:Se}=K;const De=Date.now(),it={opid:133,flag:"proxy5"===W.cloudProxyServer?4194304:1048576,ts:+new Date,key:W.token,cname:W.cname,sid:W.sid,detail:{6:W.stringUid,11:Se},uid:W.uid||0};return I(U(function*(){return yield cp(ge,{data:it,cancelToken:Z,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}})}),Rt=>{if(0===Rt.code)return Gt.joinWebProxyAP(W.sid,{lts:De,sucess:1,apServerAddr:ge,turnServerAddrList:Rt.addresses.map(Pt=>Pt.ip).join(","),errorCode:null,eventType:W.cloudProxyServer}),!1;const Dt=ZD(Rt.code);throw new h(u.CAN_NOT_GET_GATEWAY_SERVER,Dt.desc,{retry:Dt.retry})},Rt=>Rt.code!==u.OPERATION_ABORTED&&(Rt.code===u.CAN_NOT_GET_GATEWAY_SERVER?(Gt.joinWebProxyAP(it.sid,{lts:De,sucess:0,apServerAddr:ge,turnServerAddrList:null,errorCode:Rt.code,eventType:W.cloudProxyServer}),O.warning("[".concat(W.clientId,"] proxy ap server ").concat(ge," failed, message: ").concat(Rt.message,", retry: ").concat(Rt.data.retry)),_e("warning",["AjaxAPI",W.clientId],"proxy ap server ".concat(ge," failed, message: ").concat(Rt.message,", retry: ").concat(Rt.data.retry)),Rt.data.retry):(Gt.joinWebProxyAP(it.sid,{lts:De,sucess:0,apServerAddr:ge,turnServerAddrList:null,errorCode:Rt.code,eventType:W.cloudProxyServer}),!0)),de)}(B,r,i,a),allFailedhandler:()=>{throw O.error("[".concat(r.clientId,"] can not get proxy server after trying several times")),new h(u.CAN_NOT_GET_PROXY_SERVER)}});const D=T.addresses;if(!D||0===D.length)throw O.error("[".concat(r.clientId,"] can not get proxy server, empty proxy server list")),new h(u.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:D.map(B=>B.ip).map(ex),serverResponse:{tcpport:D[0].port||443,udpport:D[0].port||Hn.udpport,username:Hn.username,password:Hn.password}}}let m=null;m=yield xw({fragementLength:rt("FRAGEMENT_LENGTH"),referenceList:g,asyncMapHandler:C=>function(T,D,B,K){const W=Date.now(),Z={command:"convergeAllocateEdge",sid:D.sid,appId:D.appId,token:D.token,uid:D.uid,cname:D.cname,ts:Math.floor(Date.now()/1e3),version:gr,seq:0,requestId:1};return I(U(function*(){return{res:yield cp(T,{data:{service_name:"webrtc_proxy",json_body:JSON.stringify(Z)},cancelToken:B,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:T}}),de=>{if(!de.res.json_body)throw O.debug("[".concat(D.clientId,"] Get proxy server failed: no json_body")),Ne("error",["AjaxAPI",D.clientId],"requestProxyServerList","Get proxy server failed: no json_body"),new h(u.UNEXPECTED_RESPONSE,JSON.stringify(de.res));const ge=JSON.parse(de.res.json_body);if(200!==ge.code)throw O.debug("[".concat(D.clientId,"] Get proxy server failed: response code [").concat(ge.code,"], reason [").concat(ge.reason,"]")),Ne("error",["AjaxAPI",D.clientId],"requestProxyServerList","Get proxy server failed: response code [".concat(ge.code,"], reason [").concat(ge.reason,"]")),new h(u.UNEXPECTED_RESPONSE,JSON.stringify(de.res));return O.debug("[".concat(D.clientId,"] App return server length"),ge.servers.length),Ne("debug",["AjaxAPI",D.clientId],"requestProxyServerList","",{length:ge.servers.length}),!1},de=>de.code!==u.OPERATION_ABORTED&&(Gt.requestProxyAppCenter(Z.sid,{lts:W,succ:!1,APAddr:T,workerManagerList:null,ec:de.code,response:de.message}),!0),K)}(C,r,i,a),allFailedhandler:()=>{throw O.error("[".concat(r.clientId,"] can not get proxy server after trying several times")),new h(u.CAN_NOT_GET_PROXY_SERVER)}});const A=JSON.parse(m.res.json_body).servers.map(YK);if("443only"===r.cloudProxyServer)return{addresses:A,serverResponse:{tcpport:443,udpport:Hn.udpport,username:Hn.username,password:Hn.password}};Gt.requestProxyAppCenter(r.sid,{lts:c,succ:!0,APAddr:m.url,workerManagerList:JSON.stringify(A),ec:null,response:JSON.stringify(m.res)}),c=Date.now();const _=A.map(C=>function(T,D,B,K){const W=Date.now();let Z=T;T.startsWith("http")||(Z="https://".concat(T,":4000/v2/machine"));const de={command:"request",gatewayType:"http",appId:D.appId,cname:D.cname,uid:(D.uid||"").toString(),sdkVersion:"2.3.1",sid:D.sid,seq:1,ts:Date.now(),requestId:3,clientRequest:{appId:D.appId,cname:D.cname,uid:(D.uid||"").toString(),sid:D.sid}};return I(U(function*(){return{res:yield cp(Z,{data:de,cancelToken:B}),url:T}}),ge=>{if(!ge.res.serverResponse)throw new h(u.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},ge=>ge.code!==u.OPERATION_ABORTED&&(Gt.requestProxyWorkerManager(de.sid,{lts:W,succ:!1,workerManagerAddr:T,ec:ge.code,response:ge.message}),!0),K)}(C,r,i,a));let S=null;try{S=yield Mw(_)}catch{throw O.error("[".concat(r.clientId,"] can not get worker manager after trying several times")),new h(u.CAN_NOT_GET_PROXY_SERVER)}return _.forEach(C=>C.cancel()),Gt.requestProxyWorkerManager(r.sid,{lts:c,succ:!0,workerManagerAddr:S.url,ec:null,response:JSON.stringify(S.res)}),{addresses:[S.url],serverResponse:S.res.serverResponse}}),bU.apply(this,arguments)}function SU(){return SU=U(function*(r,i,a){const c=rt("CDS_AP").slice(0,rt("AJAX_REQUEST_CONCURRENT")).map(A=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(A+"/api/v1"):"https://".concat(A,"/api/v1?action=config")).map(A=>function(_,S,C,T){const D=Oi(),B={flag:64,cipher_method:0,features:{device:D.name,system:D.os,system_general:navigator.userAgent,vendor:S.appId,version:gr,cname:S.cname,sid:S.sid,session_id:S.sid,detail:"",proxyServer:S.proxyServer}};return I(()=>cp(_,{data:B,timeout:1e3,cancelToken:C,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,K=>K.code!==u.OPERATION_ABORTED,T)}(A,r,i,a));let p=null,g=null,m={};try{p=yield Mw(c)}catch(A){if(A.code===u.OPERATION_ABORTED)throw A;g=A}if(c.forEach(A=>A.cancel()),Gt.reportApiInvoke(r.sid,{name:Xn.REQUEST_CONFIG_DISTRIBUTE,options:{error:g,res:p}}).onSuccess(),p&&p.test_tags)try{m=function(A){if(!A.test_tags)return{};const _=A.test_tags,S=Object.keys(_),C={};return S.forEach(T=>{var D;const B=Ms(D=T.slice(4)).call(D),K=JSON.parse(_[T])[1];C[B]=K}),C}(p)}catch{}return m}),SU.apply(this,arguments)}function h8(r,i,a,c){return CU.apply(this,arguments)}function CU(){return CU=U(function*(r,i,a,c){const p=rt("PROXY_SERVER_TYPE3"),g=(B,K)=>{let W=p;return Array.isArray(W)&&(W=K%2==0?p[1]:p[0]),"https://".concat(W,"/ap/?url=").concat(B)};let m=null;const A=[],_=function(){var B=U(function*(){const K=rt("WEBCS_DOMAIN").slice(0,rt("AJAX_REQUEST_CONCURRENT")).map((de,ge)=>({url:"disabled"===r.cloudProxyServer||"fallback"===r.cloudProxyServer?"https://".concat(de,"/api/v2/transpond/webrtc?v=2"):g("".concat(de,"/api/v2/transpond/webrtc?v=2"),ge),areaCode:nk(),serviceIds:[zs.CHOOSE_SERVER,"proxy5"===r.cloudProxyServer?zs.CLOUD_PROXY_5:"proxy3"===r.cloudProxyServer||"proxy4"===r.cloudProxyServer?zs.CLOUD_PROXY:zs.CLOUD_PROXY_FALLBACK]})),W=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:K.map(de=>de.url)}),Z=yield xw({fragementLength:rt("FRAGEMENT_LENGTH"),referenceList:K,asyncMapHandler:de=>(O.debug("[".concat(r.clientId,"] Connect to choose_server:"),de.url),MH(de,r,i,a)),allFailedhandler:de=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:de},W),de[0]},promisesCollector:A});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},W),Z});return function(){return B.apply(this,arguments)}}(),S=function(){var B=U(function*(){if(yield ic(1e3),null!==m)return m;const K=rt("WEBCS_DOMAIN_BACKUP_LIST").map((de,ge)=>({url:"disabled"===r.cloudProxyServer||"fallback"===r.cloudProxyServer?"https://".concat(de,"/api/v2/transpond/webrtc?v=2"):g("".concat(de,"/api/v2/transpond/webrtc?v=2"),ge),areaCode:nk(),serviceIds:[zs.CHOOSE_SERVER,"proxy5"===r.cloudProxyServer?zs.CLOUD_PROXY_5:"proxy3"===r.cloudProxyServer||"proxy4"===r.cloudProxyServer?zs.CLOUD_PROXY:zs.CLOUD_PROXY_FALLBACK]})),W=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:K.map(de=>de.url)}),Z=yield xw({fragementLength:rt("FRAGEMENT_LENGTH"),referenceList:K,asyncMapHandler:de=>(O.debug("[".concat(r.clientId,"] Connect to backup choose_server:"),de.url),MH(de,r,i,a)),allFailedhandler:de=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:de},W),de[0]},promisesCollector:A});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},W),Z});return function(){return B.apply(this,arguments)}}();let C,T,D;try{({gatewayInfo:C,proxyInfo:T,url:D}=yield Mw([_(),S()]))}catch(B){throw B[0]}if(A.length&&A.forEach(B=>B.cancel&&"function"==typeof B.cancel&&B.cancel()),!C||!T)throw new h(u.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(r.apUrl=D,"disabled"!==r.cloudProxyServer&&Array.isArray(p)&&D){const B=new Y5(D).host;p.includes(B)&&(r.proxyServer=B,O.setProxyServer(B),Gt.setProxyServer(B),Ze(B))}return m={gatewayInfo:C,proxyInfo:yield k9(T,C.uid)},m}),CU.apply(this,arguments)}function UH(r,i,a,c){return IU.apply(this,arguments)}function IU(){return IU=U(function*(r,i,a,c){const p=rt("UAP_AP").slice(0,rt("AJAX_REQUEST_CONCURRENT")).map(g=>i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v1?action=uap"):"https://".concat(g,"/api/v1?action=uap"));return yield kH(p,r,i,a,c)}),IU.apply(this,arguments)}function Rx(){return Rx=U(function*(r,i,a){const c=rt("UAP_AP").slice(0,rt("AJAX_REQUEST_CONCURRENT")).map(p=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(p+"/api/v1?action=uap"):"https://".concat(p,"/api/v1?action=uap")).map(p=>function(g,m,A,_){const S={command:"convergeAllocateEdge",sid:m.sid,appId:m.appId,token:m.token,ts:Date.now(),version:gr,cname:m.cname,uid:m.uid.toString(),requestId:a8,seq:a8};a8+=1;const C={service_name:"tele_channel",json_body:JSON.stringify(S)};return I(U(function*(){const T=yield cp(g,{data:C,cancelToken:A,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==T.code){const B=new h(u.UNEXPECTED_RESPONSE,"cross channel ap error, code"+T.code,{retry:!0});throw O.error(B.toString()),Ne("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,B.toString()),B}const D=JSON.parse(T.json_body);if(200!==D.code){const B=new h(u.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(D.code,", reason: ").concat(D.reason));throw O.error(B.toString()),Ne("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,B.toString()),B}if(!D.servers||0===D.servers.length){const B=new h(u.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw O.error(B.toString()),Ne("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,B.toString()),B}return{vid:D.vid,workerToken:D.workerToken,addressList:D.servers.map(B=>"wss://".concat(B.address.replace(/\./g,"-"),".").concat(rt("WORKER_DOMAIN"),":").concat(B.wss))}}),void 0,T=>!!(T.code!==u.OPERATION_ABORTED&&T.code!==u.UNEXPECTED_RESPONSE||T.data&&T.data.retry),_)}(p,r,i,a));try{const p=yield Mw(c);return c.forEach(g=>g.cancel()),p}catch(p){throw p[0]}}),Rx.apply(this,arguments)}function f8(){return f8=U(function*(r,i,a){let c=null;const p=[],g=function(){var m=U(function*(A){const _=rt(A?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(S=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(S+"/api/v2/transpond/webrtc?v=2"):"https://".concat(S,"/api/v2/transpond/webrtc?v=2"));return A&&(yield ic(1e3),null!==c)?c:yield xw({fragementLength:rt("FRAGEMENT_LENGTH"),referenceList:_,asyncMapHandler:S=>(O.debug("[".concat(r.clientId,"] update ticket, Connect to ").concat(A?"backup":""," choose_server:"),S),function(C,T,D,B){const[K]=xH(T,[zs.CHOOSE_SERVER]);let W=Ys.networkState;return I(U(function*(){W&&Ys.networkState===Bu.OFFLINE&&Ys.onlineWaiter&&(yield Un.race([Ys.onlineWaiter,ic(B&&B.maxRetryTimeout||v.maxRetryTimeout)])),W=Ys.networkState;const Z=yield cp(C,{data:K,cancelToken:D,headers:{"Content-Type":"multipart/form-data;"}},!0);return NH(Z,C)}),()=>!1,Z=>Z.code!==u.OPERATION_ABORTED&&(Z.code===u.UPDATE_TICKET_FAILED?Z.data.retry:(O.warning("[".concat(T.clientId,"] update ticket network error, retry"),Z),_e("warning",["AjaxAPI",T.clientId],"update ticket network error, retry, ".concat(Z)),!0)),B)}(S,r,i,a)),allFailedhandler:S=>{throw S[0]},promisesCollector:p})});return function(_){return m.apply(this,arguments)}}();try{return c=yield Mw([g(!1),g(!0)]),p.length&&p.forEach(m=>m.cancel&&"function"==typeof m.cancel&&m.cancel()),c}catch(m){throw m[0]}}),f8.apply(this,arguments)}var QH;function m8(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function HH(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?m8(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):m8(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let GH=yn("ConfigDistributeManager")(QH=class extends s{constructor(){super(),q(this,"configs",void 0),q(this,"joinInfo",void 0),q(this,"cancelToken",void 0),q(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),q(this,"interval",void 0),q(this,"mutex",new fu("config-distribute")),q(this,"mutableParamsRead",!1)}startGetConfigDistribute(r,i){this.joinInfo=r,this.cancelToken=i,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},rt("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}awaitConfigDistributeComplete(){var r=this;return U(function*(){!r.mutex.isLocked||(yield r.mutex.lock())()})()}updateConfigDistribute(){var r=this;return U(function*(){if(r.mutableParamsRead||(r.mutableParamsRead=!0,Gt.reportApiInvoke(null,{options:void 0,name:Xn.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:zn.TRACER}).onSuccess(JSON.stringify(Hr))),!r.joinInfo||!r.cancelToken||!r.retryConfig)return O.debug("[config-distribute] get config distribute interrupted have no joininfo"),void Ne("debug",r,"updateConfigDistribute",void 0,"get config distribute interrupted have no joininfo");let i;const a=yield r.mutex.lock();try{i=yield function FH(r,i,a){return SU.apply(this,arguments)}(r.joinInfo,r.cancelToken,r.retryConfig),O.debug("[config-distribute] get config distribute",JSON.stringify(i)),Ne("debug",r,"updateConfigDistribute",i),i.limit_bitrate&&r.handleBitrateLimit(i.limit_bitrate),r.cacheGlobalParameterConfig(i),r.configs=i}catch(c){const p=new h(u.NETWORK_RESPONSE_ERROR,c);O.warning("[config-distribute] ".concat(p.toString())),Ne("warning",r,"updateConfigDistribute",void 0,c.toString())}finally{a()}})()}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(r){var i;(i=r)&&i.uplink&&i.id&&void 0!==i.uplink.max_bitrate&&void 0!==i.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==r.id&&this.emit(hy.UPDATE_BITRATE_LIMIT,r):this.emit(hy.UPDATE_BITRATE_LIMIT,r))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&HH({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(r){var i;const a=yF(i=Object.keys(r).filter(p=>/^webrtc_ng_global_parameter/.test(p))).call(i);for(let p=0;p<a.length;p++)for(let g=a.length-1;g>p;g--){const m=a[g];if("number"==typeof r[m].__priority){const A=r[m].__priority,_=a[g-1];if("number"==typeof r[_].__priority){if(!(A>r[_].__priority))continue;{const S=m;a[g]=a[g-1],a[g-1]=S}}else{const S=m;a[g]=a[g-1],a[g-1]=S}}}const c={};a.forEach(p=>{const g=r[p],m=g.__expires;Object.keys(g).forEach(A=>{"__priority"===A||"__expires"===A||Object.prototype.hasOwnProperty.call(c,A)||(c[A]=HH({value:g[A]},m&&{expires:m}))})});try{const p=JSON.stringify(c),g=window.btoa(p);window.localStorage.setItem("websdk_ng_global_parameter",g),O.debug("Caching global parameters ".concat(p)),Ne("debug",this,"cacheGlobalParameterConfig",p)}catch(p){O.error("Error caching global parameters:",p.message),Ne("error",this,"cacheGlobalParameterConfig",void 0,p.message)}}})||QH;function g8(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function ik(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?g8(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):g8(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class WH extends s{constructor(i,a,c,p){super(),q(this,"spec",void 0),q(this,"token",void 0),q(this,"websocket",void 0),q(this,"pingpongTimer",void 0),q(this,"reconnectMode","retry"),q(this,"serviceMode",void 0),q(this,"reqId",0),q(this,"commandReqId",0),q(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),q(this,"handleWebSocketMessage",g=>{if(!g.data)return;const m=JSON.parse(g.data);m.requestId?this.emit("@".concat(m.requestId,"-").concat(m.sid),m):this.serviceMode===Xo.INJECT?this.emit(pu.INJECT_STREAM_STATUS,m):(Gt.workerEvent(this.spec.sid,{actionType:"status",serverCode:m.code,workerType:this.serviceMode===Xo.TRANSCODE?1:2}),this.emit(pu.PUBLISH_STREAM_STATUS,m))}),this.spec=a,this.token=i,this.serviceMode=p,this.websocket=new LS("live-streaming",c),this.websocket.on(Er.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Er.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Er.REQUEST_NEW_URLS,(g,m)=>{up(this,pu.REQUEST_NEW_ADDRESS).then(g).catch(m)}),this.websocket.on(Er.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(i){return this.websocket.init(i)}request(i,a,c,p){var g=this;return U(function*(){g.reqId+=1,"request"===i&&(g.commandReqId+=1);const m=g.commandReqId,A=g.reqId;if(!A||!g.websocket)throw new h(u.UNEXPECTED_ERROR);const _=ik({command:i,sdkVersion:"4.12.1"===gr?"0.0.1":gr,seq:A,requestId:A,allocate:c,cname:g.spec.cname,appId:g.spec.appId,sid:g.spec.sid,uid:g.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},a);if("closed"===g.websocket.state)throw new h(u.WS_DISCONNECT);const S=()=>new Un((B,K)=>{g.websocket.once(Er.CLOSED,()=>K(new h(u.WS_ABORT))),g.websocket.once(Er.CONNECTED,B)});"connected"!==g.websocket.state&&(yield S()),_.clientRequest&&(_.clientRequest.workerToken=g.token);const C=new Un((B,K)=>{const W=()=>{K(new h(u.WS_ABORT))};g.websocket.once(Er.RECONNECTING,W),g.websocket.once(Er.CLOSED,W),g.once("@".concat(A,"-").concat(g.spec.sid),Z=>{B(Z)})});p&&Gt.workerEvent(g.spec.sid,ik(ik({},p),{},{requestId:m,actionType:"request",payload:JSON.stringify(a.clientRequest),serverCode:0,code:0}));const T=Date.now();g.websocket.sendMessage(_);let D=null;try{D=yield C}catch(B){if("closed"===g.websocket.state)throw B;return yield S(),yield g.request(i,a,c)}return p&&Gt.workerEvent(g.spec.sid,ik(ik({},p),{},{requestId:m,actionType:"response",payload:JSON.stringify(D.serverResponse),serverCode:D.code,success:200===D.code,responseTime:Date.now()-T})),200!==D.code&&g.handleResponseError(D),D})()}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const i="4.12.1"===gr?"0.0.1":gr;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:i,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(i){switch(i.code){case bo.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void O.warning("live stream response already exists stream");case bo.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case bo.LIVE_STREAM_RESPONSE_BAD_STREAM:case bo.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new h(u.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:i.code}).throw();case bo.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===i.serverResponse.command||"UninjectStream"===i.serverResponse.command)return;throw new h(u.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case bo.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new h(u.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:i.code}).throw();case bo.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const a=new h(u.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(pu.WARNING,a,i.serverResponse.url)}case bo.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const a=new h(u.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(pu.WARNING,a,i.serverResponse.url)}case bo.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new h(u.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case bo.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new h(u.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:i.code}).throw();case bo.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const a=new h(u.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(pu.WARNING,a,i.serverResponse.url)}case bo.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new h(u.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:i.code}).throw();case bo.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new h(u.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case bo.LIVE_STREAM_RESPONSE_WORKER_LOST:case bo.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===i.serverResponse.command||"UninjectStream"===i.serverResponse.command)return;throw new h(u.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case bo.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===i.serverResponse.command||"UninjectStream"===i.serverResponse.command)return;if("UpdateTranscoding"===i.serverResponse.command||"ControlStream"===i.serverResponse.command)return new h(u.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:i.code}).throw();throw new h(u.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case bo.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case bo.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case bo.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case bo.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new h(u.LIVE_STREAMING_CDN_ERROR,"",{code:i.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(B3)},6e3)}}function _8(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function mu(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?_8(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):_8(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class KH extends s{constructor(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;super(),q(this,"onLiveStreamWarning",void 0),q(this,"onLiveStreamError",void 0),q(this,"onInjectStatusChange",void 0),q(this,"spec",void 0),q(this,"retryTimeout",1e4),q(this,"connection",void 0),q(this,"httpRetryConfig",void 0),q(this,"wsRetryConfig",void 0),q(this,"streamingTasks",new Map),q(this,"isStartingStreamingTask",!1),q(this,"taskMutex",new fu("live-streaming")),q(this,"cancelToken",lu.CancelToken.source()),q(this,"transcodingConfig",void 0),q(this,"injectConfig",mu({},uN)),q(this,"injectLoopTimes",0),q(this,"uapResponse",void 0),q(this,"lastTaskId",1),q(this,"statusError",new Map),this.spec=i,this.httpRetryConfig=c,this.wsRetryConfig=a}setTranscodingConfig(i){var a=this;return U(function*(){const c=mu(mu({},pD),i);var A;66!==c.videoCodecProfile&&77!==c.videoCodecProfile&&100!==c.videoCodecProfile&&(O.debug("[".concat(a.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(c.videoCodecProfile," -> 100")),c.videoCodecProfile=100),c.transcodingUsers||(c.transcodingUsers=c.userConfigs),c.transcodingUsers&&(c.transcodingUsers=c.transcodingUsers.map(A=>mu(mu(mu({},TQ),A),{},{zOrder:A.zOrder?A.zOrder+1:1}))),to((A=c).width)||Lr(A.width,"config.width",0,1e4),to(A.height)||Lr(A.height,"config.height",0,1e4),to(A.videoBitrate)||Lr(A.videoBitrate,"config.videoBitrate",1,1e6),to(A.videoFrameRate)||Lr(A.videoFrameRate,"config.videoFrameRate"),to(A.lowLatency)||Xh(A.lowLatency,"config.lowLatency"),to(A.audioSampleRate)||va(A.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),to(A.audioBitrate)||Lr(A.audioBitrate,"config.audioBitrate",1,128),to(A.audioChannels)||va(A.audioChannels,"config.audioChannels",[1,2,3,4,5]),to(A.videoGop)||Lr(A.videoGop,"config.videoGop"),to(A.videoCodecProfile)||va(A.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),to(A.userCount)||Lr(A.userCount,"config.userCount",0,17),to(A.backgroundColor)||Lr(A.backgroundColor,"config.backgroundColor",0,16777215),to(A.userConfigExtraInfo)||Lc(A.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),A.transcodingUsers&&!to(A.transcodingUsers)&&(gw(A.transcodingUsers,"config.transcodingUsers"),A.transcodingUsers.forEach((_,S)=>{iN(_.uid),to(_.x)||Lr(_.x,"transcodingUser[".concat(S,"].x"),0,1e4),to(_.y)||Lr(_.y,"transcodingUser[".concat(S,"].y"),0,1e4),to(_.width)||Lr(_.width,"transcodingUser[".concat(S,"].width"),0,1e4),to(_.height)||Lr(_.height,"transcodingUser[".concat(S,"].height"),0,1e4),to(_.zOrder)||Lr(_.zOrder-1,"transcodingUser[".concat(S,"].zOrder"),0,100),to(_.alpha)||Lr(_.alpha,"transcodingUser[".concat(S,"].alpha"),0,1,!1)})),to(A.watermark)||dD(A.watermark,"watermark"),to(A.backgroundImage)||dD(A.backgroundImage,"backgroundImage"),A.images&&!to(A.images)&&(gw(A.images,"config.images"),A.images.forEach((_,S)=>{dD(_,"images[".concat(S,"]"))}));const p=[];c.images&&p.push(...c.images.map(A=>mu(mu(mu({},wF),A),{},{zOrder:255}))),c.backgroundImage&&(p.push(mu(mu(mu({},wF),c.backgroundImage),{},{zOrder:0})),delete c.backgroundImage),c.watermark&&(p.push(mu(mu(mu({},wF),c.watermark),{},{zOrder:255})),delete c.watermark),c.images=p,c.transcodingUsers&&(c.userConfigs=c.transcodingUsers.map(A=>mu({},A)),c.userCount=c.transcodingUsers.length,delete c.transcodingUsers);const g=(c.userConfigs||[]).map(A=>"number"==typeof A.uid?Un.resolve(A.uid):wx(A.uid,a.spec,a.cancelToken.token,a.httpRetryConfig));if((yield Un.all(g)).forEach((A,_)=>{c.userConfigs&&c.userConfigs[_]&&(c.userConfigs[_].uid=A)}),a.transcodingConfig=c,a.connection)try{var m;const A=yield a.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:a.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(O_(m=a.streamingTasks).call(m)).map(_=>_.taskId).join("#")});O.debug("[".concat(a.spec.clientId,"] update live transcoding config success, code: ").concat(A.code,", config:"),JSON.stringify(a.transcodingConfig))}catch(A){if(!A.data||!A.data.retry)throw A;A.data.changeAddress&&a.connection.tryNextAddress(),a.streamingTasks.forEach(_=>{O.warning("[".concat(a.spec.clientId,"] live streaming receive error"),A.toString(),"try to republish",_.url),a.startLiveStreamingTask(_.url,_.mode,A).then(()=>{O.debug("[".concat(a.spec.clientId,"] live streaming republish ").concat(_.url," success"))}).catch(S=>{O.error("[".concat(a.spec.clientId,"] live streaming republish failed"),_.url,S.toString()),a.onLiveStreamError&&a.onLiveStreamError(_.url,S)})})}})()}setInjectStreamConfig(i,a){this.injectConfig=Object.assign({},this.injectConfig,i),this.injectLoopTimes=a}startLiveStreamingTask(i,a,c){var p=this;return U(function*(){var g;if(Array.from(O_(g=p.streamingTasks).call(g)).find(S=>S.mode===Xo.INJECT)&&a===Xo.INJECT)return new h(u.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!p.transcodingConfig&&a===Xo.TRANSCODE)throw new h(u.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let m={command:"PublishStream",ts:Date.now(),url:i,uid:p.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};O.debug("[".concat(p.spec.clientId,"] start live streaming ").concat(i,", mode: ").concat(a));const A=yield p.taskMutex.lock();if(!p.connection&&c)return void A();if(p.streamingTasks.get(i)&&!c)return A(),new h(u.LIVE_STREAMING_TASK_CONFLICT).throw();try{p.connection||(p.connection=yield p.connect(a))}catch(S){throw A(),S}switch(a){case Xo.TRANSCODE:m.transcodingConfig=mu({},p.transcodingConfig);break;case Xo.RAW:break;case Xo.INJECT:m={cname:p.spec.cname,command:"InjectStream",sid:p.spec.sid,transcodingConfig:p.injectConfig,ts:Date.now(),url:i,loopTimes:p.injectLoopTimes}}p.uapResponse&&p.uapResponse.vid&&(m.vid=p.uapResponse.vid),p.isStartingStreamingTask=!0;const _=p.lastTaskId++;try{const S=new Un((T,D)=>{ic(p.retryTimeout).then(()=>{if(c)return D(c);const B=p.statusError.get(i);return B?(p.statusError.delete(i),D(B)):void 0})}),C=yield Un.race([p.connection.request("request",{clientRequest:m},!0,{url:i,command:"PublishStream",workerType:a===Xo.TRANSCODE?1:2,requestByUser:!c,tid:_.toString()}),S]);p.isStartingStreamingTask=!1,O.debug("[".concat(p.spec.clientId,"] live streaming started, code: ").concat(C.code)),p.streamingTasks.set(i,{clientRequest:m,mode:a,url:i,taskId:_}),A()}catch(S){if(A(),p.isStartingStreamingTask=!1,!S.data||!S.data.retry||c)throw S;return S.data.changeAddress?(p.connection.tryNextAddress(),yield p.startLiveStreamingTask(i,a,S)):yield p.startLiveStreamingTask(i,a,S)}})()}stopLiveStreamingTask(i){return new Un((a,c)=>{const p=this.streamingTasks.get(i);if(!p||!this.connection)return new h(u.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const g=p.mode;p.abortTask=()=>{O.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(i),a()},this.connection.request("request",{clientRequest:{command:g===Xo.INJECT?"UninjectStream":"UnpublishStream",url:p.url}},!1,{url:i,command:"UnPublishStream",workerType:g===Xo.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(m=>{O.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(m.code)),this.streamingTasks.delete(i),0===this.streamingTasks.size&&g!==Xo.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),a(),g===Xo.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(py.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,i)}).catch(c)})}controlInjectStream(i,a,c,p){var g=this;return U(function*(){const m=g.streamingTasks.get(i);if(!m||!g.connection||m.mode!==Xo.INJECT)throw new h(u.INVALID_OPERATION,"can not find inject stream task to control");return(yield g.connection.request("request",{clientRequest:{command:"ControlStream",url:i,control:a,audioVolume:c,position:p}})).serverResponse})()}resetAllTask(){var i;const a=Array.from(O_(i=this.streamingTasks).call(i));this.terminate();for(const c of a)this.startLiveStreamingTask(c.url,c.mode).catch(p=>{this.onLiveStreamError&&this.onLiveStreamError(c.url,p)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=lu.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}connect(i){var a=this;return U(function*(){if(a.connection)throw new h(u.UNEXPECTED_ERROR,"live streaming connection has already connected");const c=yield up(a,Cm.REQUEST_WORKER_MANAGER_LIST,i);return a.uapResponse=c,a.connection=new WH(c.workerToken,a.spec,a.wsRetryConfig,i),a.connection.on(pu.WARNING,(p,g)=>a.onLiveStreamWarning&&a.onLiveStreamWarning(g,p)),a.connection.on(pu.PUBLISH_STREAM_STATUS,p=>a.handlePublishStreamServer(p)),a.connection.on(pu.INJECT_STREAM_STATUS,p=>a.handleInjectStreamServerStatus(p)),a.connection.on(pu.REQUEST_NEW_ADDRESS,(p,g)=>{if(!a.connection)return g(new h(u.UNEXPECTED_ERROR,"can not get new live streaming address list"));up(a,Cm.REQUEST_WORKER_MANAGER_LIST,i).then(m=>{a.uapResponse=m,p(m.addressList)}).catch(g)}),yield a.connection.init(c.addressList),a.connection})()}handlePublishStreamServer(i){const a=i.serverStatus&&i.serverStatus.url||"empty_url",c=this.streamingTasks.get(a),p=i.reason;switch(i.code){case bo.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case bo.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case bo.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case bo.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const m=new h(u.LIVE_STREAMING_CDN_ERROR,"",{code:i.code});if(c)return O.error(m.toString()),this.onLiveStreamError&&this.onLiveStreamError(a,m);if(!this.isStartingStreamingTask)return;this.statusError.set(a,m)}case bo.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const m=new h(u.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,p);return this.onLiveStreamWarning&&this.onLiveStreamWarning(a,m)}case bo.LIVE_STREAM_RESPONSE_WORKER_LOST:case bo.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var g;if(!this.connection)return;this.connection.tryNextAddress();const m=Array.from(O_(g=this.streamingTasks).call(g));for(const A of m)A.abortTask?A.abortTask():(O.warning("[".concat(this.spec.clientId,"] publish stream status code"),i.code,"try to republish",A.url),this.startLiveStreamingTask(A.url,A.mode,new h(u.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:i.code})).then(()=>{O.debug("[".concat(this.spec.clientId,"] republish live stream success"),A.url)}).catch(_=>{O.error(_.toString()),this.onLiveStreamError&&this.onLiveStreamError(A.url,_)}));return}}}handleInjectStreamServerStatus(i){const a=Number(i.uid),c=i.serverStatus&&i.serverStatus.url;switch(i.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(py.INJECT_STREAM_STATUS_START_SUCCESS,a,c));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(py.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,a,c),void this.streamingTasks.delete(c);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(py.INJECT_STREAM_STATUS_START_UNAUTHORIZED,a,c),void this.streamingTasks.delete(c);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(py.INJECT_STREAM_STATUS_BROKEN,a,c),void this.streamingTasks.delete(c);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(py.INJECT_STREAM_STATUS_START_TIMEOUT,a,c),void this.streamingTasks.delete(c);default:return void O.debug("inject stream server status",i)}}hasUrl(i){return this.streamingTasks.has(i)}}class wU{constructor(){q(this,"destChannelMediaInfos",new Map),q(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(i){vw(i),this.srcChannelMediaInfo=i}addDestChannelInfo(i){vw(i),this.destChannelMediaInfos.set(i.channelName,i)}removeDestChannelInfo(i){rN(i),this.destChannelMediaInfos.delete(i)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function v8(r){if(!(r instanceof wU))return new h(u.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const i=r.getSrcChannelMediaInfo(),a=r.getDestChannelMediaInfo();return i?0===a.size?new h(u.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new h(u.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class zH extends s{constructor(i,a,c){super(),q(this,"ws",void 0),q(this,"requestId",1),q(this,"heartBeatTimer",void 0),q(this,"joinInfo",void 0),q(this,"clientId",void 0),q(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),q(this,"onClose",p=>{this.emit("close"),this.dispose()}),q(this,"onMessage",p=>{const g=JSON.parse(p.data);if(!g||"serverResponse"!==g.command||!g.requestId)return g&&"serverStatus"===g.command&&g.serverStatus&&g.serverStatus.command?(this.emit("status",g.serverStatus),void this.emit(g.serverStatus.command,g.serverStatus)):void 0;this.emit("req_".concat(g.requestId),g)}),this.joinInfo=i,this.clientId=a,this.ws=new LS("cross-channel-".concat(this.clientId),c),this.ws.on(Er.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Er.CONNECTED,this.onOpen),this.ws.on(Er.ON_MESSAGE,this.onMessage),this.ws.on(Er.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(i){const a=this.requestId++;return i.requestId=a,i.seq=a,this.ws.sendMessage(i),a}waitStatus(i){return new Un((a,c)=>{const p=window.setTimeout(()=>{c(new h(u.TIMEOUT,"wait status timeout, status: ".concat(i)))},5e3);this.once(i,g=>{window.clearTimeout(p),g.state&&0!==g.state?c(new h(u.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(i))):a(void 0)}),this.once("dispose",()=>{window.clearTimeout(p),c(new h(u.WS_ABORT))})})}request(i){var a=this;return U(function*(){if("closed"===a.ws.state)throw new h(u.WS_DISCONNECT);"connected"!==a.ws.state&&(yield new Un((A,_)=>{a.ws.once(Er.CLOSED,()=>_(new h(u.WS_ABORT))),a.ws.once(Er.CONNECTED,A)}));const p=a.sendMessage(i),g=new Un((A,_)=>{const S=()=>{_(new h(u.WS_ABORT))};a.ws.once(Er.RECONNECTING,S),a.ws.once(Er.CLOSED,S),a.once("req_".concat(p),A),ic(3e3).then(()=>{a.removeAllListeners("req_".concat(p)),a.ws.off(Er.RECONNECTING,S),a.ws.off(Er.CLOSED,S),_(new h(u.TIMEOUT,"cross channel ws request timeout"))})}),m=yield g;if(!m||200!==m.code)throw new h(u.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(m)));return m})()}connect(i){var a=this;return U(function*(){a.ws.removeAllListeners(Er.REQUEST_NEW_URLS),a.ws.on(Er.REQUEST_NEW_URLS,c=>{c(i)}),yield a.ws.init(i)})()}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(i){const a=this.requestId++;return i.requestId=a,this.ws.sendMessage(i),a}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class Ox extends s{set state(i){i!==this._state&&(i!==Va.RELAY_STATE_FAILURE&&(this.errorCode=S_.RELAY_OK),this.emit("state",i,this.errorCode),this._state=i)}get state(){return this._state}constructor(i,a,c,p){var g;super(),g=this,q(this,"joinInfo",void 0),q(this,"clientId",void 0),q(this,"cancelToken",lu.CancelToken.source()),q(this,"workerToken",void 0),q(this,"requestId",0),q(this,"signal",void 0),q(this,"prevChannelMediaConfig",void 0),q(this,"httpRetryConfig",void 0),q(this,"_state",Va.RELAY_STATE_IDLE),q(this,"errorCode",S_.RELAY_OK),q(this,"onStatus",m=>{O.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(m))),m&&m.command&&("onAudioPacketReceived"===m.command&&this.emit("event",Zh.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===m.command&&this.emit("event",Zh.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===m.command&&(this.errorCode=S_.SRC_TOKEN_EXPIRED,this.state=Va.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===m.command&&(this.errorCode=S_.DEST_TOKEN_EXPIRED,this.state=Va.RELAY_STATE_FAILURE))}),q(this,"onReconnect",U(function*(){O.debug("[".concat(g.clientId,"] ChannelMediaSocket disconnect, reconnecting")),g.emit("event",Zh.NETWORK_DISCONNECTED),g.state=Va.RELAY_STATE_IDLE,g.prevChannelMediaConfig&&g.sendStartRelayMessage(g.prevChannelMediaConfig).catch(m=>{g.state!==Va.RELAY_STATE_IDLE&&(O.error("auto restart channel media relay failed",m.toString()),g.errorCode=S_.SERVER_CONNECTION_LOST,g.state=Va.RELAY_STATE_FAILURE)})})),this.joinInfo=i,this.clientId=a,this.signal=new zH(this.joinInfo,this.clientId,c),this.httpRetryConfig=p}startChannelMediaRelay(i){var a=this;return U(function*(){if(a.state!==Va.RELAY_STATE_IDLE)throw new h(u.INVALID_OPERATION);a.state=Va.RELAY_STATE_CONNECTING,yield a.connect(),O.debug("[".concat(a.clientId,"] startChannelMediaRelay: connect success"));try{yield a.sendStartRelayMessage(i)}catch(c){throw c.data&&c.data.serverResponse&&"SetSourceChannel"===c.data.serverResponse.command?new h(u.CROSS_CHANNEL_FAILED_JOIN_SRC):c.data&&c.data.serverResponse&&"SetDestChannelStatus"===c.serverResponse.command?new h(u.CROSS_CHANNEL_FAILED_JOIN_DEST):c.data&&c.data.serverResponse&&"StartPacketTransfer"===c.serverResponse.command?new h(u.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):c}a.prevChannelMediaConfig=i})()}updateChannelMediaRelay(i){var a=this;return U(function*(){if(a.state!==Va.RELAY_STATE_RUNNING)throw new h(u.INVALID_OPERATION);yield a.sendUpdateMessage(i),a.prevChannelMediaConfig=i})()}stopChannelMediaRelay(){var i=this;return U(function*(){yield i.sendStopRelayMessage(),O.debug("[".concat(i.clientId,"] stopChannelMediaRelay: send stop message success")),i.state=Va.RELAY_STATE_IDLE,i.dispose()})()}dispose(){O.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=lu.CancelToken.source(),this.state=Va.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}connect(){var i=this;return U(function*(){const a=yield function VH(r,i,a){return Rx.apply(this,arguments)}(i.joinInfo,i.cancelToken.token,i.httpRetryConfig);i.workerToken=a.workerToken,yield i.signal.connect(a.addressList),i.emit("event",Zh.NETWORK_CONNECTED),i.signal.on("status",i.onStatus),i.signal.on("reconnecting",i.onReconnect)})()}sendStartRelayMessage(i){var a=this;return U(function*(){const c=a.genMessage(Ua.StopPacketTransfer);yield a.signal.request(c),yield a.signal.waitStatus("Normal Quit"),O.debug("[".concat(a.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const p=a.genMessage(Ua.SetSdkProfile,i);yield a.signal.request(p),O.debug("[".concat(a.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const g=a.genMessage(Ua.SetSourceChannel,i);yield a.signal.request(g),yield a.signal.waitStatus("SetSourceChannelStatus"),a.emit("event",Zh.PACKET_JOINED_SRC_CHANNEL),O.debug("[".concat(a.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const m=a.genMessage(Ua.SetSourceUserId,i);yield a.signal.request(m),O.debug("[".concat(a.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const A=a.genMessage(Ua.SetDestChannel,i);yield a.signal.request(A),yield a.signal.waitStatus("SetDestChannelStatus"),a.emit("event",Zh.PACKET_JOINED_DEST_CHANNEL),O.debug("[".concat(a.clientId,"] startChannelMediaRelay: SetDestChannel success"));const _=a.genMessage(Ua.StartPacketTransfer,i);yield a.signal.request(_),a.emit("event",Zh.PACKET_SENT_TO_DEST_CHANNEL),a.state=Va.RELAY_STATE_RUNNING,O.debug("[".concat(a.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))})()}sendUpdateMessage(i){var a=this;return U(function*(){const c=a.genMessage(Ua.UpdateDestChannel,i);yield a.signal.request(c),a.emit("event",Zh.PACKET_UPDATE_DEST_CHANNEL),O.debug("[".concat(a.clientId,"] sendUpdateMessage: UpdateDestChannel success"))})()}sendStopRelayMessage(){var i=this;return U(function*(){const a=i.genMessage(Ua.StopPacketTransfer);yield i.signal.request(a),O.debug("[".concat(i.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))})()}genMessage(i,a){const c=[],p=[],g=[];this.requestId+=1;const m={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:gr,sid:this.joinInfo.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.12.1"===m.sdkVersion&&(m.sdkVersion="0.0.1");let A=null,_=null;switch(i){case Ua.SetSdkProfile:return m.clientRequest={command:"SetSdkProfile",type:"multi_channel"},m;case Ua.SetSourceChannel:if(_=a&&a.getSrcChannelMediaInfo(),!_)throw new h(u.UNEXPECTED_ERROR,"can not find source config");return m.clientRequest={command:"SetSourceChannel",uid:"0",channelName:_.channelName,token:_.token||this.joinInfo.appId},m;case Ua.SetSourceUserId:if(_=a&&a.getSrcChannelMediaInfo(),!_)throw new h(u.UNEXPECTED_ERROR,"can not find source config");return m.clientRequest={command:"SetSourceUserId",uid:_.uid+""},m;case Ua.SetDestChannel:if(A=a&&a.getDestChannelMediaInfo(),!A)throw new h(u.UNEXPECTED_ERROR,"can not find dest config");return A.forEach(S=>{c.push(S.channelName),p.push(S.uid+""),g.push(S.token||this.joinInfo.appId)}),m.clientRequest={command:"SetDestChannel",channelName:c,uid:p,token:g},m;case Ua.StartPacketTransfer:return m.clientRequest={command:"StartPacketTransfer"},m;case Ua.Reconnect:return m.clientRequest={command:"Reconnect"},m;case Ua.StopPacketTransfer:return m.clientRequest={command:"StopPacketTransfer"},m;case Ua.UpdateDestChannel:if(A=a&&a.getDestChannelMediaInfo(),!A)throw new h(u.UNEXPECTED_ERROR,"can not find dest config");return A.forEach(S=>{c.push(S.channelName),p.push(S.uid+""),g.push(S.token||this.joinInfo.appId)}),m.clientRequest={command:"UpdateDestChannel",channelName:c,uid:p,token:g},m}return m}}const TU=r=>{const i=document.createElement("canvas");return i.width=2,i.height=2,new Un((a,c)=>{i.toBlob(function(){var p=U(function*(g){if(i.remove(),g){const m=yield Kw(g);a({buffer:m,width:i.width,height:i.height})}else c(new h(u.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(g){return p.apply(this,arguments)}}(),r,1)})},Kw=function(){var r=U(function*(i){const a=yield i.arrayBuffer();return new Uint8Array(a)});return function(a){return r.apply(this,arguments)}}();var RU;let A8=yn("AgoraRTCPlayer","trackId")(RU=class{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(r){r!==this._videoElementStatus&&(O.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(r)),st("debug",["HTMLVideoElement",this.trackId],"statusChange","".concat(this._videoElementStatus," => ").concat(r)),this._videoElementStatus=r)}constructor(r){q(this,"trackId",void 0),q(this,"config",void 0),q(this,"onFirstVideoFrameDecoded",void 0),q(this,"freezeTimeCounterList",[]),q(this,"timeUpdatedCount",0),q(this,"freezeTime",0),q(this,"playbackTime",0),q(this,"lastTimeUpdatedTime",0),q(this,"videoTrack",void 0),q(this,"container",void 0),q(this,"videoElement",void 0),q(this,"videoElementCheckInterval",void 0),q(this,"_videoElementStatus",aa.NONE),q(this,"slot",void 0),q(this,"isGettingVideoDimensions",!1),q(this,"handleVideoEvents",i=>{switch(i.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=aa.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=aa.CANPLAY;break;case"stalled":this.videoElementStatus=aa.STALLED;break;case"suspend":this.videoElementStatus=aa.SUSPEND;break;case"pause":this.videoElementStatus=aa.PAUSED,!Ho()&&!Jp()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(O.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),_e("debug",this,"video element paused, auto resume"),this.videoElement.play());break;case"waiting":this.videoElementStatus=aa.WAITING;break;case"abort":this.videoElementStatus=aa.ABORT;break;case"ended":this.videoElementStatus=aa.ENDED;break;case"emptied":this.videoElementStatus=aa.EMPTIED;break;case"timeupdate":{const a=Date.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=a);const c=a-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=a,c>500&&(this.freezeTime+=c),this.playbackTime+=c;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}}),q(this,"startGetVideoDimensions",()=>{const i=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return O.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),Ne("debug",this,"startGetVideoDimensions",{videoWidth:this.videoElement.videoWidth,videoHeight:this.videoElement.videoHeight}),void(this.isGettingVideoDimensions=!1);setTimeout(i,500)};!this.isGettingVideoDimensions&&i()}),q(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===Fr.curState&&(nD()?(O.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):J2()?(O.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):q2()&&(O.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),q(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(nD()?(O.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):J2()?(O.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):q2()&&(O.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=r.element,this.trackId=r.trackId,this.updateConfig(r),Fr.on(qs.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Fr.on(qs.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(r){this.config=r,this.trackId=r.trackId;const i=r.element;i!==this.slot&&(this.destroy(),this.slot=i),this.createElements()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.createElements())}play(r){if(this.videoElement){const i=this.videoElement.play();i&&i.catch&&i.catch(c=>{r&&Gt.autoplayFailed(r,"video",c.message,this.trackId),Ne("warning",this,"play",c.toString(),"error"),"NotAllowedError"===c.name?(O.warning("detected video element autoplay failed",c),this.handleAutoPlayFailed()):O.warning("[".concat(this.trackId,"] play warning: "),c)});const a=Oi();if(("Safari"===a.name&&15===Number(a.version)||oy())&&i&&i.then&&i.catch){const c=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};i.then(c).catch(c)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;const i=r.getContext("2d");if(!i)return O.error("create canvas context failed!"),Ne("error",this,"getCurrentFrame","create canvas context failed!","error"),new ImageData(2,2);i.drawImage(this.videoElement,0,0,r.width,r.height);const a=i.getImageData(0,0,r.width,r.height);return r.remove(),a}getCurrentFrameToUint8Array(r){var i=arguments,a=this;return U(function*(){let c=i.length>1&&void 0!==i[1]?i[1]:1;if(!a.videoElement)return yield TU(r);const p=document.createElement("canvas");p.width=a.videoElement.videoWidth,p.height=a.videoElement.videoHeight;const g=p.getContext("2d");return g?(g.drawImage(a.videoElement,0,0,p.width,p.height),new Un((m,A)=>{p.toBlob(function(){var _=U(function*(S){if(p.remove(),S){const C=yield Kw(S);m({buffer:C,width:p.width,height:p.height})}else A(new h(u.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(S){return _.apply(this,arguments)}}(),r,c<0?.1:c>1?1:c)})):yield TU(r)})()}destroy(){if(Fr.off(qs.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Fr.off(qs.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=aa.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=aa.ERROR,this.container&&this.container.appendChild(this.videoElement),OU.forEach(a=>{this.videoElement&&this.videoElement.addEventListener(a,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=aa.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const r=Oi();"Safari"===r.name&&15===Number(r.version)||oy()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.videoElement.style.objectFit=this.config.fit?this.config.fit:"cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Uo()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Uo()&&this.videoElement.load());const i=this.videoElement.play();void 0!==i&&i.catch(a=>{O.debug("[".concat(this.trackId,"] playback interrupted"),a.toString()),_e("debug",this,"play back interrupted: ".concat(a.toString()))})}removeVideoElement(){if(this.videoElement){OU.forEach(r=>{this.videoElement&&this.videoElement.removeEventListener(r,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=void 0,this.videoElementStatus=aa.NONE}}handleAutoPlayFailed(){const r=Oi();if(this.videoElement){const i=a=>{a.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{O.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed.")),_e("debug",this,"video element autoplay resumed")}).catch(c=>{O.error(c)}),"Android"!==r.os||"Chrome"!==r.name&&r.name!==oi.WECHAT?(document.body.removeEventListener("touchstart",i,!0),document.body.removeEventListener("mousedown",i,!0)):document.body.removeEventListener("click",i,!0))};"Android"!==r.os||"Chrome"!==r.name&&r.name!==oi.WECHAT?(document.body.addEventListener("touchstart",i,!0),document.body.addEventListener("mousedown",i,!0)):document.body.addEventListener("click",i,!0),Gj()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}})||RU;const OU=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];var y8,DU={exports:{}};function BS(r,i,a){const c=r.createShader(a);if(!c)return new h(u.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(r.shaderSource(c,i),r.compileShader(c),!r.getShaderParameter(c,r.COMPILE_STATUS)){const p=r.getShaderInfoLog(c);return r.deleteShader(c),new h(u.WEBGL_INTERNAL_ERROR,"error compiling shader:"+p).throw()}return c}(function(r,i){r.exports=(()=>{var a={3476:(m,A,_)=>{m.exports=_(7460)},4341:(m,A,_)=>{m.exports=_(3685)},3536:(m,A,_)=>{var S=_(1910);m.exports=S},8171:(m,A,_)=>{_(6450);var S=_(4058).Object,C=m.exports=function(T,D,B){return S.defineProperty(T,D,B)};S.defineProperty.sham&&(C.sham=!0)},2956:(m,A,_)=>{_(7627),_(6274),_(5967),_(8881),_(4560),_(7206),_(4349),_(7971);var S=_(4058);m.exports=S.Promise},3685:(m,A,_)=>{var S=_(3536);m.exports=S},4883:(m,A,_)=>{var S=_(1899),C=_(7475),T=_(9826),D=S.TypeError;m.exports=function(B){if(C(B))return B;throw D(T(B)+" is not a function")}},174:(m,A,_)=>{var S=_(1899),C=_(4284),T=_(9826),D=S.TypeError;m.exports=function(B){if(C(B))return B;throw D(T(B)+" is not a constructor")}},1851:(m,A,_)=>{var S=_(1899),C=_(7475),T=S.String,D=S.TypeError;m.exports=function(B){if("object"==typeof B||C(B))return B;throw D("Can't set "+T(B)+" as a prototype")}},8479:m=>{m.exports=function(){}},5743:(m,A,_)=>{var S=_(1899),C=_(7046),T=S.TypeError;m.exports=function(D,B){if(C(B,D))return D;throw T("Incorrect invocation")}},6059:(m,A,_)=>{var S=_(1899),C=_(941),T=S.String,D=S.TypeError;m.exports=function(B){if(C(B))return B;throw D(T(B)+" is not an object")}},1692:(m,A,_)=>{var S=_(4529),C=_(9413),T=_(623),D=function(B){return function(K,W,Z){var de,ge=S(K),Se=T(ge),De=C(Z,Se);if(B&&W!=W){for(;Se>De;)if((de=ge[De++])!=de)return!0}else for(;Se>De;De++)if((B||De in ge)&&ge[De]===W)return B||De||0;return!B&&-1}};m.exports={includes:D(!0),indexOf:D(!1)}},3765:(m,A,_)=>{var S=_(5329);m.exports=S([].slice)},1385:(m,A,_)=>{var S=_(9813)("iterator"),C=!1;try{var T=0,D={next:function(){return{done:!!T++}},return:function(){C=!0}};D[S]=function(){return this},Array.from(D,function(){throw 2})}catch{}m.exports=function(B,K){if(!K&&!C)return!1;var W=!1;try{var Z={};Z[S]=function(){return{next:function(){return{done:W=!0}}}},B(Z)}catch{}return W}},2532:(m,A,_)=>{var S=_(5329),C=S({}.toString),T=S("".slice);m.exports=function(D){return T(C(D),8,-1)}},9697:(m,A,_)=>{var S=_(1899),C=_(2885),T=_(7475),D=_(2532),B=_(9813)("toStringTag"),K=S.Object,W="Arguments"==D(function(){return arguments}());m.exports=C?D:function(Z){var de,ge,Se;return void 0===Z?"Undefined":null===Z?"Null":"string"==typeof(ge=function(De,it){try{return De[it]}catch{}}(de=K(Z),B))?ge:W?D(de):"Object"==(Se=D(de))&&T(de.callee)?"Arguments":Se}},8694:(m,A,_)=>{var S=_(5329)("".replace),C=String(Error("zxcasd").stack),T=/\n\s*at [^:]*:[^\n]*/,D=T.test(C);m.exports=function(B,K){if(D&&"string"==typeof B)for(;K--;)B=S(B,T,"");return B}},3489:(m,A,_)=>{var S=_(953),C=_(1136),T=_(9677),D=_(5988);m.exports=function(B,K,W){for(var Z=C(K),de=D.f,ge=T.f,Se=0;Se<Z.length;Se++){var De=Z[Se];S(B,De)||W&&S(W,De)||de(B,De,ge(K,De))}}},4160:(m,A,_)=>{var S=_(5981);m.exports=!S(function(){function C(){}return C.prototype.constructor=null,Object.getPrototypeOf(new C)!==C.prototype})},1046:(m,A,_)=>{var S=_(5143).IteratorPrototype,C=_(9290),T=_(1887),D=_(904),B=_(2077),K=function(){return this};m.exports=function(W,Z,de,ge){var Se=Z+" Iterator";return W.prototype=C(S,{next:T(+!ge,de)}),D(W,Se,!1,!0),B[Se]=K,W}},2029:(m,A,_)=>{var S=_(5746),C=_(5988),T=_(1887);m.exports=S?function(D,B,K){return C.f(D,B,T(1,K))}:function(D,B,K){return D[B]=K,D}},1887:m=>{m.exports=function(A,_){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:_}}},7771:(m,A,_)=>{var S=_(6887),C=_(8834),T=_(2529),D=_(9417),B=_(7475),K=_(1046),W=_(249),Z=_(8929),de=_(904),ge=_(2029),Se=_(9754),De=_(9813),it=_(2077),Rt=_(5143),Dt=D.PROPER,Pt=D.CONFIGURABLE,On=Rt.IteratorPrototype,pn=Rt.BUGGY_SAFARI_ITERATORS,cn=De("iterator"),Ve="values",nt="entries",At=function(){return this};m.exports=function(n,t,e,o,d,f,b){K(e,t,o);var y,w,k,Q=function(Qt){if(Qt===d&&at)return at;if(!pn&&Qt in ke)return ke[Qt];switch(Qt){case"keys":case Ve:case nt:return function(){return new e(this,Qt)}}return function(){return new e(this)}},ie=t+" Iterator",Ie=!1,ke=n.prototype,je=ke[cn]||ke["@@iterator"]||d&&ke[d],at=!pn&&je||Q(d),Vt="Array"==t&&ke.entries||je;if(Vt&&(y=W(Vt.call(new n)))!==Object.prototype&&y.next&&(T||W(y)===On||(Z?Z(y,On):B(y[cn])||Se(y,cn,At)),de(y,ie,!0,!0),T&&(it[ie]=At)),Dt&&d==Ve&&je&&je.name!==Ve&&(!T&&Pt?ge(ke,"name",Ve):(Ie=!0,at=function(){return C(je,this)})),d)if(w={values:Q(Ve),keys:f?at:Q("keys"),entries:Q(nt)},b)for(k in w)(pn||Ie||!(k in ke))&&Se(ke,k,w[k]);else S({target:t,proto:!0,forced:pn||Ie},w);return T&&!b||ke[cn]===at||Se(ke,cn,at,{name:d}),it[t]=at,w}},5746:(m,A,_)=>{var S=_(5981);m.exports=!S(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},1333:(m,A,_)=>{var S=_(1899),C=_(941),T=S.document,D=C(T)&&C(T.createElement);m.exports=function(B){return D?T.createElement(B):{}}},3281:m=>{m.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:m=>{m.exports="object"==typeof window},4470:(m,A,_)=>{var S=_(2861),C=_(1899);m.exports=/ipad|iphone|ipod/i.test(S)&&void 0!==C.Pebble},2749:(m,A,_)=>{var S=_(2861);m.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(S)},6049:(m,A,_)=>{var S=_(2532),C=_(1899);m.exports="process"==S(C.process)},8045:(m,A,_)=>{var S=_(2861);m.exports=/web0s(?!.*chrome)/i.test(S)},2861:(m,A,_)=>{var S=_(626);m.exports=S("navigator","userAgent")||""},3385:(m,A,_)=>{var S,C,T=_(1899),D=_(2861),B=T.process,K=T.Deno,W=B&&B.versions||K&&K.version,Z=W&&W.v8;Z&&(C=(S=Z.split("."))[0]>0&&S[0]<4?1:+(S[0]+S[1])),!C&&D&&(!(S=D.match(/Edge\/(\d+)/))||S[1]>=74)&&(S=D.match(/Chrome\/(\d+)/))&&(C=+S[1]),m.exports=C},6759:m=>{m.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:(m,A,_)=>{var S=_(5981),C=_(1887);m.exports=!S(function(){var T=Error("a");return!("stack"in T)||(Object.defineProperty(T,"stack",C(1,7)),7!==T.stack)})},6887:(m,A,_)=>{var S=_(1899),C=_(9730),T=_(5329),D=_(7475),B=_(9677).f,K=_(7252),W=_(4058),Z=_(6843),de=_(2029),ge=_(953),Se=function(De){var it=function(Rt,Dt,Pt){if(this instanceof it){switch(arguments.length){case 0:return new De;case 1:return new De(Rt);case 2:return new De(Rt,Dt)}return new De(Rt,Dt,Pt)}return C(De,this,arguments)};return it.prototype=De.prototype,it};m.exports=function(De,it){var Rt,Dt,Pt,On,pn,cn,bt,Ve,nt=De.target,At=De.global,n=De.stat,t=De.proto,e=At?S:n?S[nt]:(S[nt]||{}).prototype,o=At?W:W[nt]||de(W,nt,{})[nt],d=o.prototype;for(Pt in it)Rt=!K(At?Pt:nt+(n?".":"#")+Pt,De.forced)&&e&&ge(e,Pt),pn=o[Pt],Rt&&(cn=De.noTargetGet?(Ve=B(e,Pt))&&Ve.value:e[Pt]),On=Rt&&cn?cn:it[Pt],Rt&&typeof pn==typeof On||(bt=De.bind&&Rt?Z(On,S):De.wrap&&Rt?Se(On):t&&D(On)?T(On):On,(De.sham||On&&On.sham||pn&&pn.sham)&&de(bt,"sham",!0),de(o,Pt,bt),t&&(ge(W,Dt=nt+"Prototype")||de(W,Dt,{}),de(W[Dt],Pt,On),De.real&&d&&!d[Pt]&&de(d,Pt,On)))}},5981:m=>{m.exports=function(A){try{return!!A()}catch{return!0}}},9730:(m,A,_)=>{var S=_(8285),C=Function.prototype,T=C.apply,D=C.call;m.exports="object"==typeof Reflect&&Reflect.apply||(S?D.bind(T):function(){return D.apply(T,arguments)})},6843:(m,A,_)=>{var S=_(5329),C=_(4883),T=_(8285),D=S(S.bind);m.exports=function(B,K){return C(B),void 0===K?B:T?D(B,K):function(){return B.apply(K,arguments)}}},8285:(m,A,_)=>{var S=_(5981);m.exports=!S(function(){var C=function(){}.bind();return"function"!=typeof C||C.hasOwnProperty("prototype")})},8834:(m,A,_)=>{var S=_(8285),C=Function.prototype.call;m.exports=S?C.bind(C):function(){return C.apply(C,arguments)}},9417:(m,A,_)=>{var S=_(5746),C=_(953),T=Function.prototype,D=S&&Object.getOwnPropertyDescriptor,B=C(T,"name"),K=B&&"something"===function(){}.name,W=B&&(!S||S&&D(T,"name").configurable);m.exports={EXISTS:B,PROPER:K,CONFIGURABLE:W}},5329:(m,A,_)=>{var S=_(8285),C=Function.prototype,D=C.call,B=S&&C.bind.bind(D,D);m.exports=S?function(K){return K&&B(K)}:function(K){return K&&function(){return D.apply(K,arguments)}}},626:(m,A,_)=>{var S=_(4058),C=_(1899),T=_(7475),D=function(B){return T(B)?B:void 0};m.exports=function(B,K){return arguments.length<2?D(S[B])||D(C[B]):S[B]&&S[B][K]||C[B]&&C[B][K]}},2902:(m,A,_)=>{var S=_(9697),C=_(4229),T=_(2077),D=_(9813)("iterator");m.exports=function(B){if(null!=B)return C(B,D)||C(B,"@@iterator")||T[S(B)]}},429:(m,A,_)=>{var S=_(1899),C=_(8834),T=_(4883),D=_(6059),B=_(9826),K=_(2902),W=S.TypeError;m.exports=function(Z,de){var ge=arguments.length<2?K(Z):de;if(T(ge))return D(C(ge,Z));throw W(B(Z)+" is not iterable")}},4229:(m,A,_)=>{var S=_(4883);m.exports=function(C,T){var D=C[T];return null==D?void 0:S(D)}},1899:(m,A,_)=>{var S=function(C){return C&&C.Math==Math&&C};m.exports=S("object"==typeof globalThis&&globalThis)||S("object"==typeof window&&window)||S("object"==typeof self&&self)||S("object"==typeof _.g&&_.g)||function(){return this}()||Function("return this")()},953:(m,A,_)=>{var S=_(5329),C=_(9678),T=S({}.hasOwnProperty);m.exports=Object.hasOwn||function(D,B){return T(C(D),B)}},7748:m=>{m.exports={}},4845:(m,A,_)=>{var S=_(1899);m.exports=function(C,T){var D=S.console;D&&D.error&&(1==arguments.length?D.error(C):D.error(C,T))}},5463:(m,A,_)=>{var S=_(626);m.exports=S("document","documentElement")},2840:(m,A,_)=>{var S=_(5746),C=_(5981),T=_(1333);m.exports=!S&&!C(function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a})},7026:(m,A,_)=>{var S=_(1899),C=_(5329),T=_(5981),D=_(2532),B=S.Object,K=C("".split);m.exports=T(function(){return!B("z").propertyIsEnumerable(0)})?function(W){return"String"==D(W)?K(W,""):B(W)}:B},1302:(m,A,_)=>{var S=_(5329),C=_(7475),T=_(3030),D=S(Function.toString);C(T.inspectSource)||(T.inspectSource=function(B){return D(B)}),m.exports=T.inspectSource},3794:(m,A,_)=>{var S=_(941),C=_(2029);m.exports=function(T,D){S(D)&&"cause"in D&&C(T,"cause",D.cause)}},5402:(m,A,_)=>{var S,C,T,D=_(8019),B=_(1899),K=_(5329),W=_(941),Z=_(2029),de=_(953),ge=_(3030),Se=_(4262),De=_(7748),it="Object already initialized",Rt=B.TypeError;if(D||ge.state){var Pt=ge.state||(ge.state=new(0,B.WeakMap)),On=K(Pt.get),pn=K(Pt.has),cn=K(Pt.set);S=function(Ve,nt){if(pn(Pt,Ve))throw new Rt(it);return nt.facade=Ve,cn(Pt,Ve,nt),nt},C=function(Ve){return On(Pt,Ve)||{}},T=function(Ve){return pn(Pt,Ve)}}else{var bt=Se("state");De[bt]=!0,S=function(Ve,nt){if(de(Ve,bt))throw new Rt(it);return nt.facade=Ve,Z(Ve,bt,nt),nt},C=function(Ve){return de(Ve,bt)?Ve[bt]:{}},T=function(Ve){return de(Ve,bt)}}m.exports={set:S,get:C,has:T,enforce:function(Ve){return T(Ve)?C(Ve):S(Ve,{})},getterFor:function(Ve){return function(nt){var At;if(!W(nt)||(At=C(nt)).type!==Ve)throw Rt("Incompatible receiver, "+Ve+" required");return At}}}},6782:(m,A,_)=>{var S=_(9813),C=_(2077),T=S("iterator"),D=Array.prototype;m.exports=function(B){return void 0!==B&&(C.Array===B||D[T]===B)}},7475:m=>{m.exports=function(A){return"function"==typeof A}},4284:(m,A,_)=>{var S=_(5329),C=_(5981),T=_(7475),D=_(9697),B=_(626),K=_(1302),W=function(){},Z=[],de=B("Reflect","construct"),ge=/^\s*(?:class|function)\b/,Se=S(ge.exec),De=!ge.exec(W),it=function(Dt){if(!T(Dt))return!1;try{return de(W,Z,Dt),!0}catch{return!1}},Rt=function(Dt){if(!T(Dt))return!1;switch(D(Dt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return De||!!Se(ge,K(Dt))}catch{return!0}};Rt.sham=!0,m.exports=!de||C(function(){var Dt;return it(it.call)||!it(Object)||!it(function(){Dt=!0})||Dt})?Rt:it},7252:(m,A,_)=>{var S=_(5981),C=_(7475),T=/#|\.prototype\./,D=function(de,ge){var Se=K[B(de)];return Se==Z||Se!=W&&(C(ge)?S(ge):!!ge)},B=D.normalize=function(de){return String(de).replace(T,".").toLowerCase()},K=D.data={},W=D.NATIVE="N",Z=D.POLYFILL="P";m.exports=D},941:(m,A,_)=>{var S=_(7475);m.exports=function(C){return"object"==typeof C?null!==C:S(C)}},2529:m=>{m.exports=!0},6664:(m,A,_)=>{var S=_(1899),C=_(626),T=_(7475),D=_(7046),B=_(2302),K=S.Object;m.exports=B?function(W){return"symbol"==typeof W}:function(W){var Z=C("Symbol");return T(Z)&&D(Z.prototype,K(W))}},3091:(m,A,_)=>{var S=_(1899),C=_(6843),T=_(8834),D=_(6059),B=_(9826),K=_(6782),W=_(623),Z=_(7046),de=_(429),ge=_(2902),Se=_(7609),De=S.TypeError,it=function(Dt,Pt){this.stopped=Dt,this.result=Pt},Rt=it.prototype;m.exports=function(Dt,Pt,On){var pn,cn,bt,Ve,nt,At,n,e=!(!On||!On.AS_ENTRIES),o=!(!On||!On.IS_ITERATOR),d=!(!On||!On.INTERRUPTED),f=C(Pt,On&&On.that),b=function(w){return pn&&Se(pn,"normal",w),new it(!0,w)},y=function(w){return e?(D(w),d?f(w[0],w[1],b):f(w[0],w[1])):d?f(w,b):f(w)};if(o)pn=Dt;else{if(!(cn=ge(Dt)))throw De(B(Dt)+" is not iterable");if(K(cn)){for(bt=0,Ve=W(Dt);Ve>bt;bt++)if((nt=y(Dt[bt]))&&Z(Rt,nt))return nt;return new it(!1)}pn=de(Dt,cn)}for(At=pn.next;!(n=T(At,pn)).done;){try{nt=y(n.value)}catch(w){Se(pn,"throw",w)}if("object"==typeof nt&&nt&&Z(Rt,nt))return nt}return new it(!1)}},7609:(m,A,_)=>{var S=_(8834),C=_(6059),T=_(4229);m.exports=function(D,B,K){var W,Z;C(D);try{if(!(W=T(D,"return"))){if("throw"===B)throw K;return K}W=S(W,D)}catch(de){Z=!0,W=de}if("throw"===B)throw K;if(Z)throw W;return C(W),K}},5143:(m,A,_)=>{var S,C,T,D=_(5981),B=_(7475),K=_(9290),W=_(249),Z=_(9754),de=_(9813),ge=_(2529),Se=de("iterator"),De=!1;[].keys&&("next"in(T=[].keys())?(C=W(W(T)))!==Object.prototype&&(S=C):De=!0),null==S||D(function(){var it={};return S[Se].call(it)!==it})?S={}:ge&&(S=K(S)),B(S[Se])||Z(S,Se,function(){return this}),m.exports={IteratorPrototype:S,BUGGY_SAFARI_ITERATORS:De}},2077:m=>{m.exports={}},623:(m,A,_)=>{var S=_(3057);m.exports=function(C){return S(C.length)}},6132:(m,A,_)=>{var S,C,T,D,B,K,W,Z,de=_(1899),ge=_(6843),Se=_(9677).f,De=_(2941).set,it=_(2749),Rt=_(4470),Dt=_(8045),Pt=_(6049),On=de.MutationObserver||de.WebKitMutationObserver,pn=de.document,cn=de.process,bt=de.Promise,Ve=Se(de,"queueMicrotask"),nt=Ve&&Ve.value;nt||(S=function(){var At,n;for(Pt&&(At=cn.domain)&&At.exit();C;){n=C.fn,C=C.next;try{n()}catch(t){throw C?D():T=void 0,t}}T=void 0,At&&At.enter()},it||Pt||Dt||!On||!pn?!Rt&&bt&&bt.resolve?((W=bt.resolve(void 0)).constructor=bt,Z=ge(W.then,W),D=function(){Z(S)}):Pt?D=function(){cn.nextTick(S)}:(De=ge(De,de),D=function(){De(S)}):(B=!0,K=pn.createTextNode(""),new On(S).observe(K,{characterData:!0}),D=function(){K.data=B=!B})),m.exports=nt||function(At){var n={fn:At,next:void 0};T&&(T.next=n),C||(C=n,D()),T=n}},9297:(m,A,_)=>{var S=_(1899);m.exports=S.Promise},2497:(m,A,_)=>{var S=_(3385),C=_(5981);m.exports=!!Object.getOwnPropertySymbols&&!C(function(){var T=Symbol();return!String(T)||!(Object(T)instanceof Symbol)||!Symbol.sham&&S&&S<41})},8019:(m,A,_)=>{var S=_(1899),C=_(7475),T=_(1302),D=S.WeakMap;m.exports=C(D)&&/native code/.test(T(D))},9520:(m,A,_)=>{var S=_(4883),C=function(T){var D,B;this.promise=new T(function(K,W){if(void 0!==D||void 0!==B)throw TypeError("Bad Promise constructor");D=K,B=W}),this.resolve=S(D),this.reject=S(B)};m.exports.f=function(T){return new C(T)}},4649:(m,A,_)=>{var S=_(5803);m.exports=function(C,T){return void 0===C?arguments.length<2?"":T:S(C)}},9290:(m,A,_)=>{var S,C=_(6059),T=_(9938),D=_(6759),B=_(7748),K=_(5463),W=_(1333),Z=_(4262)("IE_PROTO"),de=function(){},ge=function(it){return"<script>"+it+"<\/script>"},Se=function(it){it.write(ge("")),it.close();var Rt=it.parentWindow.Object;return it=null,Rt},De=function(){try{S=new ActiveXObject("htmlfile")}catch{}var it,Rt;De=typeof document<"u"?document.domain&&S?Se(S):((Rt=W("iframe")).style.display="none",K.appendChild(Rt),Rt.src=String("javascript:"),(it=Rt.contentWindow.document).open(),it.write(ge("document.F=Object")),it.close(),it.F):Se(S);for(var Dt=D.length;Dt--;)delete De.prototype[D[Dt]];return De()};B[Z]=!0,m.exports=Object.create||function(it,Rt){var Dt;return null!==it?(de.prototype=C(it),Dt=new de,de.prototype=null,Dt[Z]=it):Dt=De(),void 0===Rt?Dt:T.f(Dt,Rt)}},9938:(m,A,_)=>{var S=_(5746),C=_(3937),T=_(5988),D=_(6059),B=_(4529),K=_(4771);A.f=S&&!C?Object.defineProperties:function(W,Z){D(W);for(var de,ge=B(Z),Se=K(Z),De=Se.length,it=0;De>it;)T.f(W,de=Se[it++],ge[de]);return W}},5988:(m,A,_)=>{var S=_(1899),C=_(5746),T=_(2840),D=_(3937),B=_(6059),K=_(3894),W=S.TypeError,Z=Object.defineProperty,de=Object.getOwnPropertyDescriptor;A.f=C?D?function(ge,Se,De){if(B(ge),Se=K(Se),B(De),"function"==typeof ge&&"prototype"===Se&&"value"in De&&"writable"in De&&!De.writable){var it=de(ge,Se);it&&it.writable&&(ge[Se]=De.value,De={configurable:"configurable"in De?De.configurable:it.configurable,enumerable:"enumerable"in De?De.enumerable:it.enumerable,writable:!1})}return Z(ge,Se,De)}:Z:function(ge,Se,De){if(B(ge),Se=K(Se),B(De),T)try{return Z(ge,Se,De)}catch{}if("get"in De||"set"in De)throw W("Accessors not supported");return"value"in De&&(ge[Se]=De.value),ge}},9677:(m,A,_)=>{var S=_(5746),C=_(8834),T=_(6760),D=_(1887),B=_(4529),K=_(3894),W=_(953),Z=_(2840),de=Object.getOwnPropertyDescriptor;A.f=S?de:function(ge,Se){if(ge=B(ge),Se=K(Se),Z)try{return de(ge,Se)}catch{}if(W(ge,Se))return D(!C(T.f,ge,Se),ge[Se])}},946:(m,A,_)=>{var S=_(5629),C=_(6759).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(T){return S(T,C)}},7857:(m,A)=>{A.f=Object.getOwnPropertySymbols},249:(m,A,_)=>{var S=_(1899),C=_(953),T=_(7475),D=_(9678),B=_(4262),K=_(4160),W=B("IE_PROTO"),Z=S.Object,de=Z.prototype;m.exports=K?Z.getPrototypeOf:function(ge){var Se=D(ge);if(C(Se,W))return Se[W];var De=Se.constructor;return T(De)&&Se instanceof De?De.prototype:Se instanceof Z?de:null}},7046:(m,A,_)=>{var S=_(5329);m.exports=S({}.isPrototypeOf)},5629:(m,A,_)=>{var S=_(5329),C=_(953),T=_(4529),D=_(1692).indexOf,B=_(7748),K=S([].push);m.exports=function(W,Z){var de,ge=T(W),Se=0,De=[];for(de in ge)!C(B,de)&&C(ge,de)&&K(De,de);for(;Z.length>Se;)C(ge,de=Z[Se++])&&(~D(De,de)||K(De,de));return De}},4771:(m,A,_)=>{var S=_(5629),C=_(6759);m.exports=Object.keys||function(T){return S(T,C)}},6760:(m,A)=>{var _={}.propertyIsEnumerable,S=Object.getOwnPropertyDescriptor,C=S&&!_.call({1:2},1);A.f=C?function(T){var D=S(this,T);return!!D&&D.enumerable}:_},8929:(m,A,_)=>{var S=_(5329),C=_(6059),T=_(1851);m.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var D,B=!1,K={};try{(D=S(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(K,[]),B=K instanceof Array}catch{}return function(W,Z){return C(W),T(Z),B?D(W,Z):W.__proto__=Z,W}}():void 0)},5623:(m,A,_)=>{var S=_(2885),C=_(9697);m.exports=S?{}.toString:function(){return"[object "+C(this)+"]"}},9811:(m,A,_)=>{var S=_(1899),C=_(8834),T=_(7475),D=_(941),B=S.TypeError;m.exports=function(K,W){var Z,de;if("string"===W&&T(Z=K.toString)&&!D(de=C(Z,K))||T(Z=K.valueOf)&&!D(de=C(Z,K))||"string"!==W&&T(Z=K.toString)&&!D(de=C(Z,K)))return de;throw B("Can't convert object to primitive value")}},1136:(m,A,_)=>{var S=_(626),C=_(5329),T=_(946),D=_(7857),B=_(6059),K=C([].concat);m.exports=S("Reflect","ownKeys")||function(W){var Z=T.f(B(W)),de=D.f;return de?K(Z,de(W)):Z}},4058:m=>{m.exports={}},2:m=>{m.exports=function(A){try{return{error:!1,value:A()}}catch(_){return{error:!0,value:_}}}},6584:(m,A,_)=>{var S=_(6059),C=_(941),T=_(9520);m.exports=function(D,B){if(S(D),C(B)&&B.constructor===D)return B;var K=T.f(D);return(0,K.resolve)(B),K.promise}},8397:m=>{var A=function(){this.head=null,this.tail=null};A.prototype={add:function(_){var S={item:_,next:null};this.head?this.tail.next=S:this.head=S,this.tail=S},get:function(){var _=this.head;if(_)return this.head=_.next,this.tail===_&&(this.tail=null),_.item}},m.exports=A},7524:(m,A,_)=>{var S=_(9754);m.exports=function(C,T,D){for(var B in T)D&&D.unsafe&&C[B]?C[B]=T[B]:S(C,B,T[B],D);return C}},9754:(m,A,_)=>{var S=_(2029);m.exports=function(C,T,D,B){B&&B.enumerable?C[T]=D:S(C,T,D)}},8219:(m,A,_)=>{var S=_(1899).TypeError;m.exports=function(C){if(null==C)throw S("Can't call method on "+C);return C}},4911:(m,A,_)=>{var S=_(1899),C=Object.defineProperty;m.exports=function(T,D){try{C(S,T,{value:D,configurable:!0,writable:!0})}catch{S[T]=D}return D}},4431:(m,A,_)=>{var S=_(626),C=_(5988),T=_(9813),D=_(5746),B=T("species");m.exports=function(K){var W=S(K);D&&W&&!W[B]&&(0,C.f)(W,B,{configurable:!0,get:function(){return this}})}},904:(m,A,_)=>{var S=_(2885),C=_(5988).f,T=_(2029),D=_(953),B=_(5623),K=_(9813)("toStringTag");m.exports=function(W,Z,de,ge){if(W){var Se=de?W:W.prototype;D(Se,K)||C(Se,K,{configurable:!0,value:Z}),ge&&!S&&T(Se,"toString",B)}}},4262:(m,A,_)=>{var S=_(8726),C=_(9418),T=S("keys");m.exports=function(D){return T[D]||(T[D]=C(D))}},3030:(m,A,_)=>{var S=_(1899),C=_(4911),T="__core-js_shared__",D=S[T]||C(T,{});m.exports=D},8726:(m,A,_)=>{var S=_(2529),C=_(3030);(m.exports=function(T,D){return C[T]||(C[T]=void 0!==D?D:{})})("versions",[]).push({version:"3.20.3",mode:S?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},487:(m,A,_)=>{var S=_(6059),C=_(174),T=_(9813)("species");m.exports=function(D,B){var K,W=S(D).constructor;return void 0===W||null==(K=S(W)[T])?B:C(K)}},4620:(m,A,_)=>{var S=_(5329),C=_(2435),T=_(5803),D=_(8219),B=S("".charAt),K=S("".charCodeAt),W=S("".slice),Z=function(de){return function(ge,Se){var De,it,Rt=T(D(ge)),Dt=C(Se),Pt=Rt.length;return Dt<0||Dt>=Pt?de?"":void 0:(De=K(Rt,Dt))<55296||De>56319||Dt+1===Pt||(it=K(Rt,Dt+1))<56320||it>57343?de?B(Rt,Dt):De:de?W(Rt,Dt,Dt+2):it-56320+(De-55296<<10)+65536}};m.exports={codeAt:Z(!1),charAt:Z(!0)}},2941:(m,A,_)=>{var S,C,T,D,B=_(1899),K=_(9730),W=_(6843),Z=_(7475),de=_(953),ge=_(5981),Se=_(5463),De=_(3765),it=_(1333),Rt=_(2749),Dt=_(6049),Pt=B.setImmediate,On=B.clearImmediate,pn=B.process,cn=B.Dispatch,bt=B.Function,Ve=B.MessageChannel,nt=B.String,At=0,n={};try{S=B.location}catch{}var t=function(f){if(de(n,f)){var b=n[f];delete n[f],b()}},e=function(f){return function(){t(f)}},o=function(f){t(f.data)},d=function(f){B.postMessage(nt(f),S.protocol+"//"+S.host)};Pt&&On||(Pt=function(f){var b=De(arguments,1);return n[++At]=function(){K(Z(f)?f:bt(f),void 0,b)},C(At),At},On=function(f){delete n[f]},Dt?C=function(f){pn.nextTick(e(f))}:cn&&cn.now?C=function(f){cn.now(e(f))}:Ve&&!Rt?(D=(T=new Ve).port2,T.port1.onmessage=o,C=W(D.postMessage,D)):B.addEventListener&&Z(B.postMessage)&&!B.importScripts&&S&&"file:"!==S.protocol&&!ge(d)?(C=d,B.addEventListener("message",o,!1)):C="onreadystatechange"in it("script")?function(f){Se.appendChild(it("script")).onreadystatechange=function(){Se.removeChild(this),t(f)}}:function(f){setTimeout(e(f),0)}),m.exports={set:Pt,clear:On}},9413:(m,A,_)=>{var S=_(2435),C=Math.max,T=Math.min;m.exports=function(D,B){var K=S(D);return K<0?C(K+B,0):T(K,B)}},4529:(m,A,_)=>{var S=_(7026),C=_(8219);m.exports=function(T){return S(C(T))}},2435:m=>{var A=Math.ceil,_=Math.floor;m.exports=function(S){var C=+S;return C!=C||0===C?0:(C>0?_:A)(C)}},3057:(m,A,_)=>{var S=_(2435),C=Math.min;m.exports=function(T){return T>0?C(S(T),9007199254740991):0}},9678:(m,A,_)=>{var S=_(1899),C=_(8219),T=S.Object;m.exports=function(D){return T(C(D))}},6935:(m,A,_)=>{var S=_(1899),C=_(8834),T=_(941),D=_(6664),B=_(4229),K=_(9811),W=_(9813),Z=S.TypeError,de=W("toPrimitive");m.exports=function(ge,Se){if(!T(ge)||D(ge))return ge;var De,it=B(ge,de);if(it){if(void 0===Se&&(Se="default"),De=C(it,ge,Se),!T(De)||D(De))return De;throw Z("Can't convert object to primitive value")}return void 0===Se&&(Se="number"),K(ge,Se)}},3894:(m,A,_)=>{var S=_(6935),C=_(6664);m.exports=function(T){var D=S(T,"string");return C(D)?D:D+""}},2885:(m,A,_)=>{var S={};S[_(9813)("toStringTag")]="z",m.exports="[object z]"===String(S)},5803:(m,A,_)=>{var S=_(1899),C=_(9697),T=S.String;m.exports=function(D){if("Symbol"===C(D))throw TypeError("Cannot convert a Symbol value to a string");return T(D)}},9826:(m,A,_)=>{var S=_(1899).String;m.exports=function(C){try{return S(C)}catch{return"Object"}}},9418:(m,A,_)=>{var S=_(5329),C=0,T=Math.random(),D=S(1..toString);m.exports=function(B){return"Symbol("+(void 0===B?"":B)+")_"+D(++C+T,36)}},2302:(m,A,_)=>{var S=_(2497);m.exports=S&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:(m,A,_)=>{var S=_(5746),C=_(5981);m.exports=S&&C(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},9813:(m,A,_)=>{var S=_(1899),C=_(8726),T=_(953),D=_(9418),B=_(2497),K=_(2302),W=C("wks"),Z=S.Symbol,de=Z&&Z.for,ge=K?Z:Z&&Z.withoutSetter||D;m.exports=function(Se){if(!T(W,Se)||!B&&"string"!=typeof W[Se]){var De="Symbol."+Se;W[Se]=B&&T(Z,Se)?Z[Se]:K&&de?de(De):ge(De)}return W[Se]}},7627:(m,A,_)=>{var S=_(6887),C=_(1899),T=_(7046),D=_(249),B=_(8929),K=_(3489),W=_(9290),Z=_(2029),de=_(1887),ge=_(8694),Se=_(3794),De=_(3091),it=_(4649),Rt=_(9813),Dt=_(8780),Pt=Rt("toStringTag"),On=C.Error,pn=[].push,cn=function(Ve,nt){var At,n=arguments.length>2?arguments[2]:void 0,t=T(bt,this);B?At=B(new On,t?D(this):bt):(At=t?this:W(bt),Z(At,Pt,"Error")),void 0!==nt&&Z(At,"message",it(nt)),Dt&&Z(At,"stack",ge(At.stack,1)),Se(At,n);var e=[];return De(Ve,pn,{that:e}),Z(At,"errors",e),At};B?B(cn,On):K(cn,On,{name:!0});var bt=cn.prototype=W(On.prototype,{constructor:de(1,cn),message:de(1,""),name:de(1,"AggregateError")});S({global:!0},{AggregateError:cn})},6274:(m,A,_)=>{var S=_(4529),C=_(8479),T=_(2077),D=_(5402),B=_(5988).f,K=_(7771),W=_(2529),Z=_(5746),de="Array Iterator",ge=D.set,Se=D.getterFor(de);m.exports=K(Array,"Array",function(it,Rt){ge(this,{type:de,target:S(it),index:0,kind:Rt})},function(){var it=Se(this),Rt=it.target,Dt=it.kind,Pt=it.index++;return!Rt||Pt>=Rt.length?(it.target=void 0,{value:void 0,done:!0}):"keys"==Dt?{value:Pt,done:!1}:"values"==Dt?{value:Rt[Pt],done:!1}:{value:[Pt,Rt[Pt]],done:!1}},"values");var De=T.Arguments=T.Array;if(C("keys"),C("values"),C("entries"),!W&&Z&&"values"!==De.name)try{B(De,"name",{value:"values"})}catch{}},6450:(m,A,_)=>{var S=_(6887),C=_(5746),T=_(5988).f;S({target:"Object",stat:!0,forced:Object.defineProperty!==T,sham:!C},{defineProperty:T})},5967:()=>{},4560:(m,A,_)=>{var S=_(6887),C=_(8834),T=_(4883),D=_(9520),B=_(2),K=_(3091);S({target:"Promise",stat:!0},{allSettled:function(W){var Z=this,de=D.f(Z),ge=de.resolve,Se=de.reject,De=B(function(){var it=T(Z.resolve),Rt=[],Dt=0,Pt=1;K(W,function(On){var pn=Dt++,cn=!1;Pt++,C(it,Z,On).then(function(bt){cn||(cn=!0,Rt[pn]={status:"fulfilled",value:bt},--Pt||ge(Rt))},function(bt){cn||(cn=!0,Rt[pn]={status:"rejected",reason:bt},--Pt||ge(Rt))})}),--Pt||ge(Rt)});return De.error&&Se(De.value),de.promise}})},7206:(m,A,_)=>{var S=_(6887),C=_(4883),T=_(626),D=_(8834),B=_(9520),K=_(2),W=_(3091),Z="No one promise resolved";S({target:"Promise",stat:!0},{any:function(de){var ge=this,Se=T("AggregateError"),De=B.f(ge),it=De.resolve,Rt=De.reject,Dt=K(function(){var Pt=C(ge.resolve),On=[],pn=0,cn=1,bt=!1;W(de,function(Ve){var nt=pn++,At=!1;cn++,D(Pt,ge,Ve).then(function(n){At||bt||(bt=!0,it(n))},function(n){At||bt||(At=!0,On[nt]=n,--cn||Rt(new Se(On,Z)))})}),--cn||Rt(new Se(On,Z))});return Dt.error&&Rt(Dt.value),De.promise}})},4349:(m,A,_)=>{var S=_(6887),C=_(2529),T=_(9297),D=_(5981),B=_(626),K=_(7475),W=_(487),Z=_(6584),de=_(9754);if(S({target:"Promise",proto:!0,real:!0,forced:!!T&&D(function(){T.prototype.finally.call({then:function(){}},function(){})})},{finally:function(Se){var De=W(this,B("Promise")),it=K(Se);return this.then(it?function(Rt){return Z(De,Se()).then(function(){return Rt})}:Se,it?function(Rt){return Z(De,Se()).then(function(){throw Rt})}:Se)}}),!C&&K(T)){var ge=B("Promise").prototype.finally;T.prototype.finally!==ge&&de(T.prototype,"finally",ge,{unsafe:!0})}},8881:(m,A,_)=>{var S,C,T,D,B=_(6887),K=_(2529),W=_(1899),Z=_(626),de=_(8834),ge=_(9297),Se=_(9754),De=_(7524),it=_(8929),Rt=_(904),Dt=_(4431),Pt=_(4883),On=_(7475),pn=_(941),cn=_(5743),bt=_(1302),Ve=_(3091),nt=_(1385),At=_(487),n=_(2941).set,t=_(6132),e=_(6584),o=_(4845),d=_(9520),f=_(2),b=_(8397),y=_(5402),w=_(7252),k=_(9813),Q=_(3321),ie=_(6049),Ie=_(3385),ke=k("species"),je="Promise",at=y.getterFor(je),Vt=y.set,Qt=y.getterFor(je),rn=ge&&ge.prototype,Ut=ge,Bn=rn,ai=W.TypeError,ci=W.document,Yo=W.process,Ji=d.f,pf=Ji,mt=!!(ci&&ci.createEvent&&W.dispatchEvent),Ee=On(W.PromiseRejectionEvent),$e="unhandledrejection",Ct=!1,_t=w(je,function(){var In=bt(Ut),Sn=In!==String(Ut);if(!Sn&&66===Ie||K&&!Bn.finally)return!0;if(Ie>=51&&/native code/.test(In))return!1;var dr=new Ut(function(vs){vs(1)}),zr=function(vs){vs(function(){},function(){})};return(dr.constructor={})[ke]=zr,!(Ct=dr.then(function(){})instanceof zr)||!Sn&&Q&&!Ee}),on=_t||!nt(function(In){Ut.all(In).catch(function(){})}),wt=function(In){var Sn;return!(!pn(In)||!On(Sn=In.then))&&Sn},Yt=function(In,Sn){var dr,zr,vs,sh=Sn.value,aL=1==Sn.state,Ok=aL?In.ok:In.fail,sQ=In.resolve,oT=In.reject,sT=In.domain;try{Ok?(aL||(2===Sn.rejection&&Jn(Sn),Sn.rejection=1),!0===Ok?dr=sh:(sT&&sT.enter(),dr=Ok(sh),sT&&(sT.exit(),vs=!0)),dr===In.promise?oT(ai("Promise-chain cycle")):(zr=wt(dr))?de(zr,dr,sQ,oT):sQ(dr)):oT(sh)}catch(yW){sT&&!vs&&sT.exit(),oT(yW)}},An=function(In,Sn){In.notified||(In.notified=!0,t(function(){for(var dr,zr=In.reactions;dr=zr.get();)Yt(dr,In);In.notified=!1,Sn&&!In.rejection&&sn(In)}))},jn=function(In,Sn,dr){var zr,vs;mt?((zr=ci.createEvent("Event")).promise=Sn,zr.reason=dr,zr.initEvent(In,!1,!0),W.dispatchEvent(zr)):zr={promise:Sn,reason:dr},!Ee&&(vs=W["on"+In])?vs(zr):In===$e&&o("Unhandled promise rejection",dr)},sn=function(In){de(n,W,function(){var Sn,dr=In.facade,zr=In.value;if(Nn(In)&&(Sn=f(function(){ie?Yo.emit("unhandledRejection",zr,dr):jn($e,dr,zr)}),In.rejection=ie||Nn(In)?2:1,Sn.error))throw Sn.value})},Nn=function(In){return 1!==In.rejection&&!In.parent},Jn=function(In){de(n,W,function(){var Sn=In.facade;ie?Yo.emit("rejectionHandled",Sn):jn("rejectionhandled",Sn,In.value)})},kr=function(In,Sn,dr){return function(zr){In(Sn,zr,dr)}},Kr=function(In,Sn,dr){In.done||(In.done=!0,dr&&(In=dr),In.value=Sn,In.state=2,An(In,!0))},za=function(In,Sn,dr){if(!In.done){In.done=!0,dr&&(In=dr);try{if(In.facade===Sn)throw ai("Promise can't be resolved itself");var zr=wt(Sn);zr?t(function(){var vs={done:!1};try{de(zr,Sn,kr(za,vs,In),kr(Kr,vs,In))}catch(sh){Kr(vs,sh,In)}}):(In.value=Sn,In.state=1,An(In,!1))}catch(vs){Kr({done:!1},vs,In)}}};if(_t&&(Bn=(Ut=function(In){cn(this,Bn),Pt(In),de(S,this);var Sn=at(this);try{In(kr(za,Sn),kr(Kr,Sn))}catch(dr){Kr(Sn,dr)}}).prototype,(S=function(In){Vt(this,{type:je,done:!1,notified:!1,parent:!1,reactions:new b,rejection:!1,state:0,value:void 0})}).prototype=De(Bn,{then:function(In,Sn){var dr=Qt(this),zr=Ji(At(this,Ut));return dr.parent=!0,zr.ok=!On(In)||In,zr.fail=On(Sn)&&Sn,zr.domain=ie?Yo.domain:void 0,0==dr.state?dr.reactions.add(zr):t(function(){Yt(zr,dr)}),zr.promise},catch:function(In){return this.then(void 0,In)}}),C=function(){var In=new S,Sn=at(In);this.promise=In,this.resolve=kr(za,Sn),this.reject=kr(Kr,Sn)},d.f=Ji=function(In){return In===Ut||In===T?new C(In):pf(In)},!K&&On(ge)&&rn!==Object.prototype)){D=rn.then,Ct||(Se(rn,"then",function(In,Sn){var dr=this;return new Ut(function(zr,vs){de(D,dr,zr,vs)}).then(In,Sn)},{unsafe:!0}),Se(rn,"catch",Bn.catch,{unsafe:!0}));try{delete rn.constructor}catch{}it&&it(rn,Bn)}B({global:!0,wrap:!0,forced:_t},{Promise:Ut}),Rt(Ut,je,!1,!0),Dt(je),T=Z(je),B({target:je,stat:!0,forced:_t},{reject:function(In){var Sn=Ji(this);return de(Sn.reject,void 0,In),Sn.promise}}),B({target:je,stat:!0,forced:K||_t},{resolve:function(In){return e(K&&this===T?Ut:this,In)}}),B({target:je,stat:!0,forced:on},{all:function(In){var Sn=this,dr=Ji(Sn),zr=dr.resolve,vs=dr.reject,sh=f(function(){var aL=Pt(Sn.resolve),Ok=[],sQ=0,oT=1;Ve(In,function(sT){var yW=sQ++,Bz=!1;oT++,de(aL,Sn,sT).then(function(Uz){Bz||(Bz=!0,Ok[yW]=Uz,--oT||zr(Ok))},vs)}),--oT||zr(Ok)});return sh.error&&vs(sh.value),dr.promise},race:function(In){var Sn=this,dr=Ji(Sn),zr=dr.reject,vs=f(function(){var sh=Pt(Sn.resolve);Ve(In,function(aL){de(sh,Sn,aL).then(dr.resolve,zr)})});return vs.error&&zr(vs.value),dr.promise}})},7971:(m,A,_)=>{var S=_(4620).charAt,C=_(5803),T=_(5402),D=_(7771),B="String Iterator",K=T.set,W=T.getterFor(B);D(String,"String",function(Z){K(this,{type:B,string:C(Z),index:0})},function(){var Z,de=W(this),ge=de.string,Se=de.index;return Se>=ge.length?{value:void 0,done:!0}:(Z=S(ge,Se),de.index+=Z.length,{value:Z,done:!1})})},7634:(m,A,_)=>{_(6274);var S=_(3281),C=_(1899),T=_(9697),D=_(2029),B=_(2077),K=_(9813)("toStringTag");for(var W in S){var Z=C[W],de=Z&&Z.prototype;de&&T(de)!==K&&D(de,K,W),B[W]=B.Array}},1910:(m,A,_)=>{var S=_(8171);m.exports=S},7460:(m,A,_)=>{var S=_(2956);_(7634),m.exports=S},9662:(m,A,_)=>{var S=_(7854),C=_(614),T=_(6330),D=S.TypeError;m.exports=function(B){if(C(B))return B;throw D(T(B)+" is not a function")}},6077:(m,A,_)=>{var S=_(7854),C=_(614),T=S.String,D=S.TypeError;m.exports=function(B){if("object"==typeof B||C(B))return B;throw D("Can't set "+T(B)+" as a prototype")}},1223:(m,A,_)=>{var S=_(5112),C=_(30),T=_(3070),D=S("unscopables"),B=Array.prototype;null==B[D]&&T.f(B,D,{configurable:!0,value:C(null)}),m.exports=function(K){B[D][K]=!0}},9670:(m,A,_)=>{var S=_(7854),C=_(111),T=S.String,D=S.TypeError;m.exports=function(B){if(C(B))return B;throw D(T(B)+" is not an object")}},1318:(m,A,_)=>{var S=_(5656),C=_(1400),T=_(6244),D=function(B){return function(K,W,Z){var de,ge=S(K),Se=T(ge),De=C(Z,Se);if(B&&W!=W){for(;Se>De;)if((de=ge[De++])!=de)return!0}else for(;Se>De;De++)if((B||De in ge)&&ge[De]===W)return B||De||0;return!B&&-1}};m.exports={includes:D(!0),indexOf:D(!1)}},4326:(m,A,_)=>{var S=_(1702),C=S({}.toString),T=S("".slice);m.exports=function(D){return T(C(D),8,-1)}},648:(m,A,_)=>{var S=_(7854),C=_(1694),T=_(614),D=_(4326),B=_(5112)("toStringTag"),K=S.Object,W="Arguments"==D(function(){return arguments}());m.exports=C?D:function(Z){var de,ge,Se;return void 0===Z?"Undefined":null===Z?"Null":"string"==typeof(ge=function(De,it){try{return De[it]}catch{}}(de=K(Z),B))?ge:W?D(de):"Object"==(Se=D(de))&&T(de.callee)?"Arguments":Se}},7741:(m,A,_)=>{var S=_(1702)("".replace),C=String(Error("zxcasd").stack),T=/\n\s*at [^:]*:[^\n]*/,D=T.test(C);m.exports=function(B,K){if(D&&"string"==typeof B)for(;K--;)B=S(B,T,"");return B}},9920:(m,A,_)=>{var S=_(2597),C=_(3887),T=_(1236),D=_(3070);m.exports=function(B,K,W){for(var Z=C(K),de=D.f,ge=T.f,Se=0;Se<Z.length;Se++){var De=Z[Se];S(B,De)||W&&S(W,De)||de(B,De,ge(K,De))}}},8544:(m,A,_)=>{var S=_(7293);m.exports=!S(function(){function C(){}return C.prototype.constructor=null,Object.getPrototypeOf(new C)!==C.prototype})},4994:(m,A,_)=>{var S=_(3383).IteratorPrototype,C=_(30),T=_(9114),D=_(8003),B=_(7497),K=function(){return this};m.exports=function(W,Z,de,ge){var Se=Z+" Iterator";return W.prototype=C(S,{next:T(+!ge,de)}),D(W,Se,!1,!0),B[Se]=K,W}},8880:(m,A,_)=>{var S=_(9781),C=_(3070),T=_(9114);m.exports=S?function(D,B,K){return C.f(D,B,T(1,K))}:function(D,B,K){return D[B]=K,D}},9114:m=>{m.exports=function(A,_){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:_}}},654:(m,A,_)=>{var S=_(2109),C=_(6916),T=_(1913),D=_(6530),B=_(614),K=_(4994),W=_(9518),Z=_(7674),de=_(8003),ge=_(8880),Se=_(1320),De=_(5112),it=_(7497),Rt=_(3383),Dt=D.PROPER,Pt=D.CONFIGURABLE,On=Rt.IteratorPrototype,pn=Rt.BUGGY_SAFARI_ITERATORS,cn=De("iterator"),Ve="values",nt="entries",At=function(){return this};m.exports=function(n,t,e,o,d,f,b){K(e,t,o);var y,w,k,Q=function(Qt){if(Qt===d&&at)return at;if(!pn&&Qt in ke)return ke[Qt];switch(Qt){case"keys":case Ve:case nt:return function(){return new e(this,Qt)}}return function(){return new e(this)}},ie=t+" Iterator",Ie=!1,ke=n.prototype,je=ke[cn]||ke["@@iterator"]||d&&ke[d],at=!pn&&je||Q(d),Vt="Array"==t&&ke.entries||je;if(Vt&&(y=W(Vt.call(new n)))!==Object.prototype&&y.next&&(T||W(y)===On||(Z?Z(y,On):B(y[cn])||Se(y,cn,At)),de(y,ie,!0,!0),T&&(it[ie]=At)),Dt&&d==Ve&&je&&je.name!==Ve&&(!T&&Pt?ge(ke,"name",Ve):(Ie=!0,at=function(){return C(je,this)})),d)if(w={values:Q(Ve),keys:f?at:Q("keys"),entries:Q(nt)},b)for(k in w)(pn||Ie||!(k in ke))&&Se(ke,k,w[k]);else S({target:t,proto:!0,forced:pn||Ie},w);return T&&!b||ke[cn]===at||Se(ke,cn,at,{name:d}),it[t]=at,w}},9781:(m,A,_)=>{var S=_(7293);m.exports=!S(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:(m,A,_)=>{var S=_(7854),C=_(111),T=S.document,D=C(T)&&C(T.createElement);m.exports=function(B){return D?T.createElement(B):{}}},8324:m=>{m.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(m,A,_)=>{var S=_(317)("span").classList,C=S&&S.constructor&&S.constructor.prototype;m.exports=C===Object.prototype?void 0:C},8113:(m,A,_)=>{var S=_(5005);m.exports=S("navigator","userAgent")||""},7392:(m,A,_)=>{var S,C,T=_(7854),D=_(8113),B=T.process,K=T.Deno,W=B&&B.versions||K&&K.version,Z=W&&W.v8;Z&&(C=(S=Z.split("."))[0]>0&&S[0]<4?1:+(S[0]+S[1])),!C&&D&&(!(S=D.match(/Edge\/(\d+)/))||S[1]>=74)&&(S=D.match(/Chrome\/(\d+)/))&&(C=+S[1]),m.exports=C},748:m=>{m.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:(m,A,_)=>{var S=_(7293),C=_(9114);m.exports=!S(function(){var T=Error("a");return!("stack"in T)||(Object.defineProperty(T,"stack",C(1,7)),7!==T.stack)})},2109:(m,A,_)=>{var S=_(7854),C=_(1236).f,T=_(8880),D=_(1320),B=_(3505),K=_(9920),W=_(4705);m.exports=function(Z,de){var ge,Se,De,it,Rt,Dt=Z.target,Pt=Z.global,On=Z.stat;if(ge=Pt?S:On?S[Dt]||B(Dt,{}):(S[Dt]||{}).prototype)for(Se in de){if(it=de[Se],De=Z.noTargetGet?(Rt=C(ge,Se))&&Rt.value:ge[Se],!W(Pt?Se:Dt+(On?".":"#")+Se,Z.forced)&&void 0!==De){if(typeof it==typeof De)continue;K(it,De)}(Z.sham||De&&De.sham)&&T(it,"sham",!0),D(ge,Se,it,Z)}}},7293:m=>{m.exports=function(A){try{return!!A()}catch{return!0}}},2104:(m,A,_)=>{var S=_(4374),C=Function.prototype,T=C.apply,D=C.call;m.exports="object"==typeof Reflect&&Reflect.apply||(S?D.bind(T):function(){return D.apply(T,arguments)})},4374:(m,A,_)=>{var S=_(7293);m.exports=!S(function(){var C=function(){}.bind();return"function"!=typeof C||C.hasOwnProperty("prototype")})},6916:(m,A,_)=>{var S=_(4374),C=Function.prototype.call;m.exports=S?C.bind(C):function(){return C.apply(C,arguments)}},6530:(m,A,_)=>{var S=_(9781),C=_(2597),T=Function.prototype,D=S&&Object.getOwnPropertyDescriptor,B=C(T,"name"),K=B&&"something"===function(){}.name,W=B&&(!S||S&&D(T,"name").configurable);m.exports={EXISTS:B,PROPER:K,CONFIGURABLE:W}},1702:(m,A,_)=>{var S=_(4374),C=Function.prototype,D=C.call,B=S&&C.bind.bind(D,D);m.exports=S?function(K){return K&&B(K)}:function(K){return K&&function(){return D.apply(K,arguments)}}},5005:(m,A,_)=>{var S=_(7854),C=_(614),T=function(D){return C(D)?D:void 0};m.exports=function(D,B){return arguments.length<2?T(S[D]):S[D]&&S[D][B]}},8173:(m,A,_)=>{var S=_(9662);m.exports=function(C,T){var D=C[T];return null==D?void 0:S(D)}},7854:(m,A,_)=>{var S=function(C){return C&&C.Math==Math&&C};m.exports=S("object"==typeof globalThis&&globalThis)||S("object"==typeof window&&window)||S("object"==typeof self&&self)||S("object"==typeof _.g&&_.g)||function(){return this}()||Function("return this")()},2597:(m,A,_)=>{var S=_(1702),C=_(7908),T=S({}.hasOwnProperty);m.exports=Object.hasOwn||function(D,B){return T(C(D),B)}},3501:m=>{m.exports={}},490:(m,A,_)=>{var S=_(5005);m.exports=S("document","documentElement")},4664:(m,A,_)=>{var S=_(9781),C=_(7293),T=_(317);m.exports=!S&&!C(function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a})},8361:(m,A,_)=>{var S=_(7854),C=_(1702),T=_(7293),D=_(4326),B=S.Object,K=C("".split);m.exports=T(function(){return!B("z").propertyIsEnumerable(0)})?function(W){return"String"==D(W)?K(W,""):B(W)}:B},9587:(m,A,_)=>{var S=_(614),C=_(111),T=_(7674);m.exports=function(D,B,K){var W,Z;return T&&S(W=B.constructor)&&W!==K&&C(Z=W.prototype)&&Z!==K.prototype&&T(D,Z),D}},2788:(m,A,_)=>{var S=_(1702),C=_(614),T=_(5465),D=S(Function.toString);C(T.inspectSource)||(T.inspectSource=function(B){return D(B)}),m.exports=T.inspectSource},8340:(m,A,_)=>{var S=_(111),C=_(8880);m.exports=function(T,D){S(D)&&"cause"in D&&C(T,"cause",D.cause)}},9909:(m,A,_)=>{var S,C,T,D=_(8536),B=_(7854),K=_(1702),W=_(111),Z=_(8880),de=_(2597),ge=_(5465),Se=_(6200),De=_(3501),it="Object already initialized",Rt=B.TypeError;if(D||ge.state){var Pt=ge.state||(ge.state=new(0,B.WeakMap)),On=K(Pt.get),pn=K(Pt.has),cn=K(Pt.set);S=function(Ve,nt){if(pn(Pt,Ve))throw new Rt(it);return nt.facade=Ve,cn(Pt,Ve,nt),nt},C=function(Ve){return On(Pt,Ve)||{}},T=function(Ve){return pn(Pt,Ve)}}else{var bt=Se("state");De[bt]=!0,S=function(Ve,nt){if(de(Ve,bt))throw new Rt(it);return nt.facade=Ve,Z(Ve,bt,nt),nt},C=function(Ve){return de(Ve,bt)?Ve[bt]:{}},T=function(Ve){return de(Ve,bt)}}m.exports={set:S,get:C,has:T,enforce:function(Ve){return T(Ve)?C(Ve):S(Ve,{})},getterFor:function(Ve){return function(nt){var At;if(!W(nt)||(At=C(nt)).type!==Ve)throw Rt("Incompatible receiver, "+Ve+" required");return At}}}},614:m=>{m.exports=function(A){return"function"==typeof A}},4705:(m,A,_)=>{var S=_(7293),C=_(614),T=/#|\.prototype\./,D=function(de,ge){var Se=K[B(de)];return Se==Z||Se!=W&&(C(ge)?S(ge):!!ge)},B=D.normalize=function(de){return String(de).replace(T,".").toLowerCase()},K=D.data={},W=D.NATIVE="N",Z=D.POLYFILL="P";m.exports=D},111:(m,A,_)=>{var S=_(614);m.exports=function(C){return"object"==typeof C?null!==C:S(C)}},1913:m=>{m.exports=!1},2190:(m,A,_)=>{var S=_(7854),C=_(5005),T=_(614),D=_(7976),B=_(3307),K=S.Object;m.exports=B?function(W){return"symbol"==typeof W}:function(W){var Z=C("Symbol");return T(Z)&&D(Z.prototype,K(W))}},3383:(m,A,_)=>{var S,C,T,D=_(7293),B=_(614),K=_(30),W=_(9518),Z=_(1320),de=_(5112),ge=_(1913),Se=de("iterator"),De=!1;[].keys&&("next"in(T=[].keys())?(C=W(W(T)))!==Object.prototype&&(S=C):De=!0),null==S||D(function(){var it={};return S[Se].call(it)!==it})?S={}:ge&&(S=K(S)),B(S[Se])||Z(S,Se,function(){return this}),m.exports={IteratorPrototype:S,BUGGY_SAFARI_ITERATORS:De}},7497:m=>{m.exports={}},6244:(m,A,_)=>{var S=_(7466);m.exports=function(C){return S(C.length)}},133:(m,A,_)=>{var S=_(7392),C=_(7293);m.exports=!!Object.getOwnPropertySymbols&&!C(function(){var T=Symbol();return!String(T)||!(Object(T)instanceof Symbol)||!Symbol.sham&&S&&S<41})},8536:(m,A,_)=>{var S=_(7854),C=_(614),T=_(2788),D=S.WeakMap;m.exports=C(D)&&/native code/.test(T(D))},6277:(m,A,_)=>{var S=_(1340);m.exports=function(C,T){return void 0===C?arguments.length<2?"":T:S(C)}},30:(m,A,_)=>{var S,C=_(9670),T=_(6048),D=_(748),B=_(3501),K=_(490),W=_(317),Z=_(6200)("IE_PROTO"),de=function(){},ge=function(it){return"<script>"+it+"<\/script>"},Se=function(it){it.write(ge("")),it.close();var Rt=it.parentWindow.Object;return it=null,Rt},De=function(){try{S=new ActiveXObject("htmlfile")}catch{}var it,Rt;De=typeof document<"u"?document.domain&&S?Se(S):((Rt=W("iframe")).style.display="none",K.appendChild(Rt),Rt.src=String("javascript:"),(it=Rt.contentWindow.document).open(),it.write(ge("document.F=Object")),it.close(),it.F):Se(S);for(var Dt=D.length;Dt--;)delete De.prototype[D[Dt]];return De()};B[Z]=!0,m.exports=Object.create||function(it,Rt){var Dt;return null!==it?(de.prototype=C(it),Dt=new de,de.prototype=null,Dt[Z]=it):Dt=De(),void 0===Rt?Dt:T.f(Dt,Rt)}},6048:(m,A,_)=>{var S=_(9781),C=_(3353),T=_(3070),D=_(9670),B=_(5656),K=_(1956);A.f=S&&!C?Object.defineProperties:function(W,Z){D(W);for(var de,ge=B(Z),Se=K(Z),De=Se.length,it=0;De>it;)T.f(W,de=Se[it++],ge[de]);return W}},3070:(m,A,_)=>{var S=_(7854),C=_(9781),T=_(4664),D=_(3353),B=_(9670),K=_(4948),W=S.TypeError,Z=Object.defineProperty,de=Object.getOwnPropertyDescriptor;A.f=C?D?function(ge,Se,De){if(B(ge),Se=K(Se),B(De),"function"==typeof ge&&"prototype"===Se&&"value"in De&&"writable"in De&&!De.writable){var it=de(ge,Se);it&&it.writable&&(ge[Se]=De.value,De={configurable:"configurable"in De?De.configurable:it.configurable,enumerable:"enumerable"in De?De.enumerable:it.enumerable,writable:!1})}return Z(ge,Se,De)}:Z:function(ge,Se,De){if(B(ge),Se=K(Se),B(De),T)try{return Z(ge,Se,De)}catch{}if("get"in De||"set"in De)throw W("Accessors not supported");return"value"in De&&(ge[Se]=De.value),ge}},1236:(m,A,_)=>{var S=_(9781),C=_(6916),T=_(5296),D=_(9114),B=_(5656),K=_(4948),W=_(2597),Z=_(4664),de=Object.getOwnPropertyDescriptor;A.f=S?de:function(ge,Se){if(ge=B(ge),Se=K(Se),Z)try{return de(ge,Se)}catch{}if(W(ge,Se))return D(!C(T.f,ge,Se),ge[Se])}},8006:(m,A,_)=>{var S=_(6324),C=_(748).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(T){return S(T,C)}},5181:(m,A)=>{A.f=Object.getOwnPropertySymbols},9518:(m,A,_)=>{var S=_(7854),C=_(2597),T=_(614),D=_(7908),B=_(6200),K=_(8544),W=B("IE_PROTO"),Z=S.Object,de=Z.prototype;m.exports=K?Z.getPrototypeOf:function(ge){var Se=D(ge);if(C(Se,W))return Se[W];var De=Se.constructor;return T(De)&&Se instanceof De?De.prototype:Se instanceof Z?de:null}},7976:(m,A,_)=>{var S=_(1702);m.exports=S({}.isPrototypeOf)},6324:(m,A,_)=>{var S=_(1702),C=_(2597),T=_(5656),D=_(1318).indexOf,B=_(3501),K=S([].push);m.exports=function(W,Z){var de,ge=T(W),Se=0,De=[];for(de in ge)!C(B,de)&&C(ge,de)&&K(De,de);for(;Z.length>Se;)C(ge,de=Z[Se++])&&(~D(De,de)||K(De,de));return De}},1956:(m,A,_)=>{var S=_(6324),C=_(748);m.exports=Object.keys||function(T){return S(T,C)}},5296:(m,A)=>{var _={}.propertyIsEnumerable,S=Object.getOwnPropertyDescriptor,C=S&&!_.call({1:2},1);A.f=C?function(T){var D=S(this,T);return!!D&&D.enumerable}:_},7674:(m,A,_)=>{var S=_(1702),C=_(9670),T=_(6077);m.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var D,B=!1,K={};try{(D=S(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(K,[]),B=K instanceof Array}catch{}return function(W,Z){return C(W),T(Z),B?D(W,Z):W.__proto__=Z,W}}():void 0)},2140:(m,A,_)=>{var S=_(7854),C=_(6916),T=_(614),D=_(111),B=S.TypeError;m.exports=function(K,W){var Z,de;if("string"===W&&T(Z=K.toString)&&!D(de=C(Z,K))||T(Z=K.valueOf)&&!D(de=C(Z,K))||"string"!==W&&T(Z=K.toString)&&!D(de=C(Z,K)))return de;throw B("Can't convert object to primitive value")}},3887:(m,A,_)=>{var S=_(5005),C=_(1702),T=_(8006),D=_(5181),B=_(9670),K=C([].concat);m.exports=S("Reflect","ownKeys")||function(W){var Z=T.f(B(W)),de=D.f;return de?K(Z,de(W)):Z}},1320:(m,A,_)=>{var S=_(7854),C=_(614),T=_(2597),D=_(8880),B=_(3505),K=_(2788),W=_(9909),Z=_(6530).CONFIGURABLE,de=W.get,ge=W.enforce,Se=String(String).split("String");(m.exports=function(De,it,Rt,Dt){var Pt,On=!!Dt&&!!Dt.unsafe,pn=!!Dt&&!!Dt.enumerable,cn=!!Dt&&!!Dt.noTargetGet,bt=Dt&&void 0!==Dt.name?Dt.name:it;C(Rt)&&("Symbol("===String(bt).slice(0,7)&&(bt="["+String(bt).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!T(Rt,"name")||Z&&Rt.name!==bt)&&D(Rt,"name",bt),(Pt=ge(Rt)).source||(Pt.source=Se.join("string"==typeof bt?bt:""))),De!==S?(On?!cn&&De[it]&&(pn=!0):delete De[it],pn?De[it]=Rt:D(De,it,Rt)):pn?De[it]=Rt:B(it,Rt)})(Function.prototype,"toString",function(){return C(this)&&de(this).source||K(this)})},2261:(m,A,_)=>{var S,C,T=_(6916),D=_(1702),B=_(1340),K=_(7066),W=_(2999),Z=_(2309),de=_(30),ge=_(9909).get,Se=_(9441),De=_(7168),it=Z("native-string-replace",String.prototype.replace),Rt=RegExp.prototype.exec,Dt=Rt,Pt=D("".charAt),On=D("".indexOf),pn=D("".replace),cn=D("".slice),bt=(C=/b*/g,T(Rt,S=/a/,"a"),T(Rt,C,"a"),0!==S.lastIndex||0!==C.lastIndex),Ve=W.BROKEN_CARET,nt=void 0!==/()??/.exec("")[1];(bt||nt||Ve||Se||De)&&(Dt=function(At){var n,t,e,o,d,f,b,y=this,w=ge(y),k=B(At),Q=w.raw;if(Q)return Q.lastIndex=y.lastIndex,n=T(Dt,Q,k),y.lastIndex=Q.lastIndex,n;var ie=w.groups,Ie=Ve&&y.sticky,ke=T(K,y),je=y.source,at=0,Vt=k;if(Ie&&(ke=pn(ke,"y",""),-1===On(ke,"g")&&(ke+="g"),Vt=cn(k,y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==Pt(k,y.lastIndex-1))&&(je="(?: "+je+")",Vt=" "+Vt,at++),t=new RegExp("^(?:"+je+")",ke)),nt&&(t=new RegExp("^"+je+"$(?!\\s)",ke)),bt&&(e=y.lastIndex),o=T(Rt,Ie?t:y,Vt),Ie?o?(o.input=cn(o.input,at),o[0]=cn(o[0],at),o.index=y.lastIndex,y.lastIndex+=o[0].length):y.lastIndex=0:bt&&o&&(y.lastIndex=y.global?o.index+o[0].length:e),nt&&o&&o.length>1&&T(it,o[0],t,function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(o[d]=void 0)}),o&&ie)for(o.groups=f=de(null),d=0;d<ie.length;d++)f[(b=ie[d])[0]]=o[b[1]];return o}),m.exports=Dt},7066:(m,A,_)=>{var S=_(9670);m.exports=function(){var C=S(this),T="";return C.global&&(T+="g"),C.ignoreCase&&(T+="i"),C.multiline&&(T+="m"),C.dotAll&&(T+="s"),C.unicode&&(T+="u"),C.sticky&&(T+="y"),T}},2999:(m,A,_)=>{var S=_(7293),C=_(7854).RegExp,T=S(function(){var K=C("a","y");return K.lastIndex=2,null!=K.exec("abcd")}),D=T||S(function(){return!C("a","y").sticky}),B=T||S(function(){var K=C("^r","gy");return K.lastIndex=2,null!=K.exec("str")});m.exports={BROKEN_CARET:B,MISSED_STICKY:D,UNSUPPORTED_Y:T}},9441:(m,A,_)=>{var S=_(7293),C=_(7854).RegExp;m.exports=S(function(){var T=C(".","s");return!(T.dotAll&&T.exec("\n")&&"s"===T.flags)})},7168:(m,A,_)=>{var S=_(7293),C=_(7854).RegExp;m.exports=S(function(){var T=C("(?<a>b)","g");return"b"!==T.exec("b").groups.a||"bc"!=="b".replace(T,"$<a>c")})},4488:(m,A,_)=>{var S=_(7854).TypeError;m.exports=function(C){if(null==C)throw S("Can't call method on "+C);return C}},3505:(m,A,_)=>{var S=_(7854),C=Object.defineProperty;m.exports=function(T,D){try{C(S,T,{value:D,configurable:!0,writable:!0})}catch{S[T]=D}return D}},8003:(m,A,_)=>{var S=_(3070).f,C=_(2597),T=_(5112)("toStringTag");m.exports=function(D,B,K){D&&!K&&(D=D.prototype),D&&!C(D,T)&&S(D,T,{configurable:!0,value:B})}},6200:(m,A,_)=>{var S=_(2309),C=_(9711),T=S("keys");m.exports=function(D){return T[D]||(T[D]=C(D))}},5465:(m,A,_)=>{var S=_(7854),C=_(3505),T="__core-js_shared__",D=S[T]||C(T,{});m.exports=D},2309:(m,A,_)=>{var S=_(1913),C=_(5465);(m.exports=function(T,D){return C[T]||(C[T]=void 0!==D?D:{})})("versions",[]).push({version:"3.20.3",mode:S?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:(m,A,_)=>{var S=_(9303),C=Math.max,T=Math.min;m.exports=function(D,B){var K=S(D);return K<0?C(K+B,0):T(K,B)}},5656:(m,A,_)=>{var S=_(8361),C=_(4488);m.exports=function(T){return S(C(T))}},9303:m=>{var A=Math.ceil,_=Math.floor;m.exports=function(S){var C=+S;return C!=C||0===C?0:(C>0?_:A)(C)}},7466:(m,A,_)=>{var S=_(9303),C=Math.min;m.exports=function(T){return T>0?C(S(T),9007199254740991):0}},7908:(m,A,_)=>{var S=_(7854),C=_(4488),T=S.Object;m.exports=function(D){return T(C(D))}},7593:(m,A,_)=>{var S=_(7854),C=_(6916),T=_(111),D=_(2190),B=_(8173),K=_(2140),W=_(5112),Z=S.TypeError,de=W("toPrimitive");m.exports=function(ge,Se){if(!T(ge)||D(ge))return ge;var De,it=B(ge,de);if(it){if(void 0===Se&&(Se="default"),De=C(it,ge,Se),!T(De)||D(De))return De;throw Z("Can't convert object to primitive value")}return void 0===Se&&(Se="number"),K(ge,Se)}},4948:(m,A,_)=>{var S=_(7593),C=_(2190);m.exports=function(T){var D=S(T,"string");return C(D)?D:D+""}},1694:(m,A,_)=>{var S={};S[_(5112)("toStringTag")]="z",m.exports="[object z]"===String(S)},1340:(m,A,_)=>{var S=_(7854),C=_(648),T=S.String;m.exports=function(D){if("Symbol"===C(D))throw TypeError("Cannot convert a Symbol value to a string");return T(D)}},6330:(m,A,_)=>{var S=_(7854).String;m.exports=function(C){try{return S(C)}catch{return"Object"}}},9711:(m,A,_)=>{var S=_(1702),C=0,T=Math.random(),D=S(1..toString);m.exports=function(B){return"Symbol("+(void 0===B?"":B)+")_"+D(++C+T,36)}},3307:(m,A,_)=>{var S=_(133);m.exports=S&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(m,A,_)=>{var S=_(9781),C=_(7293);m.exports=S&&C(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},5112:(m,A,_)=>{var S=_(7854),C=_(2309),T=_(2597),D=_(9711),B=_(133),K=_(3307),W=C("wks"),Z=S.Symbol,de=Z&&Z.for,ge=K?Z:Z&&Z.withoutSetter||D;m.exports=function(Se){if(!T(W,Se)||!B&&"string"!=typeof W[Se]){var De="Symbol."+Se;W[Se]=B&&T(Z,Se)?Z[Se]:K&&de?de(De):ge(De)}return W[Se]}},9191:(m,A,_)=>{var S=_(5005),C=_(2597),T=_(8880),D=_(7976),B=_(7674),K=_(9920),W=_(9587),Z=_(6277),de=_(8340),ge=_(7741),Se=_(2914),De=_(1913);m.exports=function(it,Rt,Dt,Pt){var On=Pt?2:1,pn=it.split("."),cn=pn[pn.length-1],bt=S.apply(null,pn);if(bt){var Ve=bt.prototype;if(!De&&C(Ve,"cause")&&delete Ve.cause,!Dt)return bt;var nt=S("Error"),At=Rt(function(n,t){var e=Z(Pt?t:n,void 0),o=Pt?new bt(n):new bt;return void 0!==e&&T(o,"message",e),Se&&T(o,"stack",ge(o.stack,2)),this&&D(Ve,this)&&W(o,this,At),arguments.length>On&&de(o,arguments[On]),o});if(At.prototype=Ve,"Error"!==cn&&(B?B(At,nt):K(At,nt,{name:!0})),K(At,bt),!De)try{Ve.name!==cn&&T(Ve,"name",cn),Ve.constructor=At}catch{}return At}}},6992:(m,A,_)=>{var S=_(5656),C=_(1223),T=_(7497),D=_(9909),B=_(3070).f,K=_(654),W=_(1913),Z=_(9781),de="Array Iterator",ge=D.set,Se=D.getterFor(de);m.exports=K(Array,"Array",function(it,Rt){ge(this,{type:de,target:S(it),index:0,kind:Rt})},function(){var it=Se(this),Rt=it.target,Dt=it.kind,Pt=it.index++;return!Rt||Pt>=Rt.length?(it.target=void 0,{value:void 0,done:!0}):"keys"==Dt?{value:Pt,done:!1}:"values"==Dt?{value:Rt[Pt],done:!1}:{value:[Pt,Rt[Pt]],done:!1}},"values");var De=T.Arguments=T.Array;if(C("keys"),C("values"),C("entries"),!W&&Z&&"values"!==De.name)try{B(De,"name",{value:"values"})}catch{}},1703:(m,A,_)=>{var S=_(2109),C=_(7854),T=_(2104),D=_(9191),B=C.WebAssembly,K=7!==Error("e",{cause:7}).cause,W=function(de,ge){var Se={};Se[de]=D(de,ge,K),S({global:!0,forced:K},Se)},Z=function(de,ge){if(B&&B[de]){var Se={};Se[de]=D("WebAssembly."+de,ge,K),S({target:"WebAssembly",stat:!0,forced:K},Se)}};W("Error",function(de){return function(ge){return T(de,this,arguments)}}),W("EvalError",function(de){return function(ge){return T(de,this,arguments)}}),W("RangeError",function(de){return function(ge){return T(de,this,arguments)}}),W("ReferenceError",function(de){return function(ge){return T(de,this,arguments)}}),W("SyntaxError",function(de){return function(ge){return T(de,this,arguments)}}),W("TypeError",function(de){return function(ge){return T(de,this,arguments)}}),W("URIError",function(de){return function(ge){return T(de,this,arguments)}}),Z("CompileError",function(de){return function(ge){return T(de,this,arguments)}}),Z("LinkError",function(de){return function(ge){return T(de,this,arguments)}}),Z("RuntimeError",function(de){return function(ge){return T(de,this,arguments)}})},4916:(m,A,_)=>{var S=_(2109),C=_(2261);S({target:"RegExp",proto:!0,forced:/./.exec!==C},{exec:C})},3948:(m,A,_)=>{var S=_(7854),C=_(8324),T=_(8509),D=_(6992),B=_(8880),K=_(5112),W=K("iterator"),Z=K("toStringTag"),de=D.values,ge=function(De,it){if(De){if(De[W]!==de)try{B(De,W,de)}catch{De[W]=de}if(De[Z]||B(De,Z,it),C[it])for(var Rt in D)if(De[Rt]!==D[Rt])try{B(De,Rt,D[Rt])}catch{De[Rt]=D[Rt]}}};for(var Se in C)ge(S[Se]&&S[Se].prototype,Se);ge(T,"DOMTokenList")}},c={};function p(m){var A=c[m];if(void 0!==A)return A.exports;var _=c[m]={exports:{}};return a[m](_,_.exports,p),_.exports}p.n=m=>{var A=m&&m.__esModule?()=>m.default:()=>m;return p.d(A,{a:A}),A},p.d=(m,A)=>{for(var _ in A)p.o(A,_)&&!p.o(m,_)&&Object.defineProperty(m,_,{enumerable:!0,get:A[_]})},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),p.o=(m,A)=>Object.prototype.hasOwnProperty.call(m,A),p.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var g={};return(()=>{p.r(g),p.d(g,{AudioExtension:()=>On,AudioProcessor:()=>Dt,Extension:()=>Pt,Ticker:()=>cn,VideoProcessor:()=>Rt,logger:()=>W,reporter:()=>ge});var m=p(4341);function A(bt,Ve,nt){return Ve in bt?m(bt,Ve,{value:nt,enumerable:!0,configurable:!0,writable:!0}):bt[Ve]=nt,bt}p(1703),p(6992),p(3948);var _=p(3476),S=p.n(_);function C(){let bt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,Ve=arguments.length>1?arguments[1]:void 0;const nt=Math.random().toString(16).substr(2,bt).toLowerCase();return nt.length===bt?"".concat(Ve).concat(nt):"".concat(Ve).concat(nt)+C(bt-nt.length,"")}p(4916);const T=Date.now(),D={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};function B(){const bt=new Date;return bt.toTimeString().split(" ")[0]+":"+bt.getMilliseconds()}const K=bt=>{for(const Ve in D)if(Object.prototype.hasOwnProperty.call(D,Ve)&&D[Ve]===bt)return Ve;return"DEFAULT"},W=new class{constructor(){A(this,"logLevel",D.DEBUG),A(this,"hookLog",void 0)}debug(){for(var bt=arguments.length,Ve=new Array(bt),nt=0;nt<bt;nt++)Ve[nt]=arguments[nt];const At=[D.DEBUG].concat(Ve);this.log.apply(this,At)}info(){for(var bt=arguments.length,Ve=new Array(bt),nt=0;nt<bt;nt++)Ve[nt]=arguments[nt];const At=[D.INFO].concat(Ve);this.log.apply(this,At)}warning(){for(var bt=arguments.length,Ve=new Array(bt),nt=0;nt<bt;nt++)Ve[nt]=arguments[nt];const At=[D.WARNING].concat(Ve);this.log.apply(this,At)}error(){for(var bt=arguments.length,Ve=new Array(bt),nt=0;nt<bt;nt++)Ve[nt]=arguments[nt];const At=[D.ERROR].concat(Ve);this.log.apply(this,At)}log(){for(var bt,Ve=arguments.length,nt=new Array(Ve),At=0;At<Ve;At++)nt[At]=arguments[At];if(Date.now()-T<100)return void setTimeout(()=>{this.log(...nt)},Date.now()-T);const n=Math.max(0,Math.min(4,nt[0]));if(nt[0]=B()+" Agora-Extension [".concat(K(n),"]:"),n<this.logLevel)return;const t=B()+" %cAgora-Extension [".concat(K(n),"]:");let e=[];switch(n){case D.DEBUG:e=[t,"color: #64B5F6;"].concat(nt.slice(1)),console.log.apply(console,e);break;case D.INFO:e=[t,"color: #1E88E5; font-weight: bold;"].concat(nt.slice(1)),console.log.apply(console,e);break;case D.WARNING:e=[t,"color: #FB8C00; font-weight: bold;"].concat(nt.slice(1)),console.warn.apply(console,e);break;case D.ERROR:e=[t,"color: #B00020; font-weight: bold;"].concat(nt.slice(1)),console.error.apply(console,e)}null===(bt=this.hookLog)||void 0===bt||bt.call(this,n,e)}};function Z(bt,Ve){var nt=Object.keys(bt);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(bt);Ve&&(At=At.filter(function(n){return Object.getOwnPropertyDescriptor(bt,n).enumerable})),nt.push.apply(nt,At)}return nt}function de(bt){for(var Ve=1;Ve<arguments.length;Ve++){var nt=null!=arguments[Ve]?arguments[Ve]:{};Ve%2?Z(Object(nt),!0).forEach(function(At){A(bt,At,nt[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(bt,Object.getOwnPropertyDescriptors(nt)):Z(Object(nt)).forEach(function(At){Object.defineProperty(bt,At,Object.getOwnPropertyDescriptor(nt,At))})}return bt}const ge=new class{constructor(){A(this,"apiInvokeMsgQueue",[]),A(this,"hookApiInvoke",void 0)}reportApiInvoke(bt){bt.timeout=bt.timeout||6e4,bt.reportResult=void 0===bt.reportResult||bt.reportResult;const Ve=Date.now(),nt=()=>({name:bt.name,apiInvokeTime:Ve,options:bt.options});let At=!1;var n;(n=bt.timeout,new(S())(e=>{window.setTimeout(e,n)})).then(()=>{At||(this.sendApiInvoke(de(de({},nt()),{},{error:"API_INVOKE_TIMEOUT",success:!1})),W.debug("".concat(bt.name," timeout")))});const t=new Error("".concat(bt.name,": this api invoke is end"));return{onSuccess:e=>{if(At)throw t;At=!0,this.sendApiInvoke(de(de({},nt()),{},{success:!0},bt.reportResult&&{result:e}))},onError:e=>{if(At)throw e;At=!0,this.sendApiInvoke(de(de({},nt()),{},{success:!1,error:e.toString()}))}}}sendApiInvoke(bt){this.hookApiInvoke?(this.hookApiInvoke([...this.apiInvokeMsgQueue,bt]),this.apiInvokeMsgQueue=[]):this.apiInvokeMsgQueue.push(bt)}};function Se(bt,Ve){var nt=Object.keys(bt);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(bt);Ve&&(At=At.filter(function(n){return Object.getOwnPropertyDescriptor(bt,n).enumerable})),nt.push.apply(nt,At)}return nt}function De(bt){for(var Ve=1;Ve<arguments.length;Ve++){var nt=null!=arguments[Ve]?arguments[Ve]:{};Ve%2?Se(Object(nt),!0).forEach(function(At){A(bt,At,nt[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(bt,Object.getOwnPropertyDescriptors(nt)):Se(Object(nt)).forEach(function(At){Object.defineProperty(bt,At,Object.getOwnPropertyDescriptor(nt,At))})}return bt}class it extends class{constructor(){A(this,"_events",{}),A(this,"addListener",this.on)}getListeners(Ve){return this._events[Ve]?this._events[Ve].map(nt=>nt.listener):[]}on(Ve,nt){this._events[Ve]||(this._events[Ve]=[]);const At=this._events[Ve];-1===this._indexOfListener(At,nt)&&At.push({listener:nt,once:!1})}once(Ve,nt){this._events[Ve]||(this._events[Ve]=[]);const At=this._events[Ve];-1===this._indexOfListener(At,nt)&&At.push({listener:nt,once:!0})}off(Ve,nt){if(!this._events[Ve])return;const At=this._events[Ve],n=this._indexOfListener(At,nt);-1!==n&&At.splice(n,1),0===this._events[Ve].length&&delete this._events[Ve]}removeAllListeners(Ve){Ve?delete this._events[Ve]:this._events={}}emit(Ve){this._events[Ve]||(this._events[Ve]=[]);const nt=this._events[Ve].map(e=>e);for(var At=arguments.length,n=new Array(At>1?At-1:0),t=1;t<At;t++)n[t-1]=arguments[t];for(let e=0;e<nt.length;e+=1){const o=nt[e];o.once&&this.off(Ve,o.listener),o.listener.apply(this,n||[])}}_indexOfListener(Ve,nt){let At=Ve.length;for(;At--;)if(Ve[At].listener===nt)return At;return-1}emitAsPromise(Ve){for(var nt=arguments.length,At=new Array(nt>1?nt-1:0),n=1;n<nt;n++)At[n-1]=arguments[n];return 0===this.getListeners(Ve).length?S().reject(new Error("No promise event handler.")):new(S())((t,e)=>{this.emit(Ve,...At,t,e)})}emitAsPromiseNoResponse(Ve){for(var nt=arguments.length,At=new Array(nt>1?nt-1:0),n=1;n<nt;n++)At[n-1]=arguments[n];return 0===this.getListeners(Ve).length?S().resolve():new(S())((t,e)=>{this.emit(Ve,...At,t,e)})}}{get enabled(){return this._enabled}output(Ve,nt){if(this.outputTrack===Ve)return;const At=ge.reportApiInvoke({name:"".concat(this.name,".output"),options:{track:Ve?.toString()}});this.outputTrack=Ve,this.destination&&this.destination.updateInput({track:Ve,context:nt}),At.onSuccess()}constructor(){super(),A(this,"inputTrack",void 0),A(this,"outputTrack",void 0),A(this,"_enabled",!0),A(this,"_source",void 0),A(this,"ID",C(6,"")),A(this,"destination",void 0),A(this,"context",void 0),A(this,"name",void 0)}enable(){if(this._enabled)return;const Ve=ge.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!0});W.info("".concat(this.name,"-").concat(this.ID," enabled")),this._enabled=!0;try{var nt;const At=null===(nt=this.onEnableChange)||void 0===nt?void 0:nt.call(this,this._enabled);if(At instanceof S())return At.then(()=>{Ve.onSuccess()}).catch(n=>{throw Ve.onError(n),n});Ve.onSuccess()}catch(At){throw Ve.onError(At),At}}disable(){if(!this._enabled)return;const Ve=ge.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!1});W.info("".concat(this.name,"-").concat(this.ID," disabled")),this._enabled=!1;try{var nt;const At=null===(nt=this.onEnableChange)||void 0===nt?void 0:nt.call(this,this._enabled);if(At instanceof S())return At.then(()=>{Ve.onSuccess()}).catch(n=>{throw Ve.onError(n),n});Ve.onSuccess()}catch(At){throw Ve.onError(At),At}}}class Rt extends it{get kind(){return"video"}pipe(Ve){const nt=ge.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:Ve.name}});if(this.destination===Ve)return nt.onSuccess(),Ve;if(Ve._source){const At=new Error("Processor ".concat(Ve.name," already piped, please call unpipe beforehand."));throw nt.onError(At),At}return this.destination&&this.unpipe(),this.destination=Ve,Ve._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,context:this.context}),nt.onSuccess(),Ve}unpipe(){if(!this.destination)return;const Ve=ge.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});W.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));try{const nt=this.destination;this.destination._source=void 0,this.destination=void 0,nt.reset()}finally{Ve.onSuccess()}}updateInput(Ve){var nt,At;Ve.context!==this.context&&(this.context=Ve.context,null===(nt=this.onPiped)||void 0===nt||nt.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,context:Ve.context})),Ve.track&&this.inputTrack!==Ve.track&&(this.inputTrack=Ve.track,null===(At=this.onTrack)||void 0===At||At.call(this,Ve.track,this.context))}reset(){var Ve;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.context=void 0,null===(Ve=this.onUnpiped)||void 0===Ve||Ve.call(this),this.destination&&this.destination.reset()}}class Dt extends it{constructor(){super(...arguments),A(this,"inputNode",void 0),A(this,"outputNode",void 0),A(this,"destination",void 0),A(this,"context",void 0)}get kind(){return"audio"}pipe(Ve){const nt=ge.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:Ve.name}});if(this.destination===Ve)return nt.onSuccess(),Ve;if(Ve._source){const At=new Error("Processor ".concat(Ve.name," already piped, please call unpipe beforehand."));throw nt.onError(At),At}return this.destination&&this.unpipe(),this.destination=Ve,Ve._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:this.context}),nt.onSuccess(),Ve}unpipe(){if(!this.destination)return;W.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));const Ve=ge.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});try{var nt;let At=this.destination;null===(nt=this.outputNode)||void 0===nt||nt.disconnect(),this.destination._source=void 0,this.destination=void 0,At.reset()}finally{Ve.onSuccess()}}output(Ve,nt){if(Ve instanceof MediaStreamTrack)super.output(Ve,nt);else if(Ve instanceof AudioNode){if(this.outputNode===Ve)return;const At=ge.reportApiInvoke({name:"".concat(this.name,".output"),options:De(De({},Ve instanceof MediaStreamTrack&&{track:Ve.toString()}),Ve instanceof AudioNode&&{audioNode:Ve.toString()})});this.outputNode=Ve,this.destination&&this.destination.updateInput({node:Ve,context:nt}),At.onSuccess()}}updateInput(Ve){var nt,At,n;Ve.context!==this.context&&(this.context=Ve.context,null===(nt=this.onPiped)||void 0===nt||nt.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:Ve.context})),Ve.track&&this.inputTrack!==Ve.track&&(this.inputTrack=Ve.track,null===(At=this.onTrack)||void 0===At||At.call(this,Ve.track,this.context)),Ve.node&&this.inputNode!==Ve.node&&(this.inputNode=Ve.node,null===(n=this.onNode)||void 0===n||n.call(this,Ve.node,this.context))}reset(){var Ve;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.inputNode=void 0,this.context=void 0,null===(Ve=this.onUnpiped)||void 0===Ve||Ve.call(this),this.destination&&this.destination.reset()}}class Pt{constructor(){A(this,"__registered__",!1),A(this,"logger",W),A(this,"reporter",ge),A(this,"parameters",{})}createProcessor(){if(!this.__registered__)throw new Error("Extension not registered yet!");return this._createProcessor()}}class On extends Pt{}let pn;class cn{get running(){return this._running}constructor(Ve,nt){if(A(this,"type",void 0),A(this,"interval",void 0),A(this,"fn",void 0),A(this,"_running",!1),A(this,"_osc",void 0),!Ve)throw new Error;if(nt<=0)throw new Error;this.type=Ve,this.interval=nt}add(Ve){this.fn=Ve}remove(){this.fn=void 0}start(){if(!this._running)switch(this._running=!0,this.type){case"Timer":{const Ve=()=>{setTimeout(()=>{this.fn&&this.fn(),this._running&&Ve()},this.interval)};Ve();break}case"RAF":{const Ve=nt=>{requestAnimationFrame(At=>{At-nt<this.interval?this._running&&Ve(nt):(this.fn&&this.fn(),this._running&&Ve(At))})};Ve(performance.now());break}case"Oscillator":{pn||(pn=new AudioContext);const Ve=pn.createGain();let nt;Ve.gain.value=0,Ve.connect(pn.destination);const At=()=>{this.fn&&this.fn(),nt&&nt.disconnect(),nt=pn.createOscillator(),this._osc=nt,nt.connect(Ve),this._running&&(nt.onended=At,nt.start(0),nt.stop(pn.currentTime+this.interval/1e3))};At();break}}}stop(){this._running=!1,this._osc&&(this._osc.onended=null,this._osc=void 0)}}})(),g})()})(DU),!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(y8=HTMLCanvasElement.prototype.getContext,function(){let r=arguments;return"webgl"===r[0]&&(r=[].slice.call(arguments),r[0]="experimental-webgl"),y8.apply(null,r)}));const Rz=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function ok(r){const i=new Uint8Array([99,114,121,112,116,105,105]),a=i.length,c=r,p=c.length,g=new Uint8Array(p),m=new Uint8Array(256);for(let T=0;T<256;T++)m[T]=T;let A=0;for(let T=0;T<256;T++)A=(A+m[T]+i[T%a])%256,[m[T],m[A]]=[m[A],m[T]];let _,S=0;A=0;for(let T=0;T<0+p;T++)S=(S+1)%256,A=(A+m[S])%256,[m[S],m[A]]=[m[A],m[S]],_=m[(m[S]+m[A])%256],T>=0&&(g[T-0]=c[T-0]^_);const C=String.fromCharCode.apply(null,Array.from(g));return Function("var winSize = 5; return `"+C+"`")()}const E8=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class b8{constructor(i,a){q(this,"program",void 0),q(this,"gl",void 0),q(this,"kernel",void 0),this.gl=i,this.kernel=a||E8,this.program=function(c,p){const g=ok(p),m=function Dx(r,i,a,c){const p=[];for(let g=0;g<i.length;++g)p.push(BS(r,i[g],0===g?r.VERTEX_SHADER:r.FRAGMENT_SHADER));return function(g,m,A,_){const S=g.createProgram();if(!S)throw new h(u.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(m.forEach(C=>{g.attachShader(S,C)}),A&&A.forEach((C,T)=>{g.bindAttribLocation(S,_?_[T]:T,C)}),g.linkProgram(S),!g.getProgramParameter(S,g.LINK_STATUS)){const C=g.getProgramInfoLog(S);throw g.deleteProgram(S),new h(u.WEBGL_INTERNAL_ERROR,"error in program linking:"+C)}return S}(r,p,a,c)}(c,[ok(Rz),g]);{const A=c.getAttribLocation(m,"a_position"),_=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,_),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(A),c.vertexAttribPointer(A,2,c.FLOAT,!1,0,0)}{const A=c.getAttribLocation(m,"a_texCoord"),_=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,_),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(A),c.vertexAttribPointer(A,2,c.FLOAT,!1,0,0)}return m}(this.gl,this.kernel)}setUniforms(){const i=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(i,1)}}class L_ extends b8{constructor(i,a,c,p){super(i,a),q(this,"xOffset",void 0),q(this,"yOffset",void 0),q(this,"denoiseLevel",5),this.xOffset=1/c,this.yOffset=1/p}setUniforms(){const i=this.gl.getUniformLocation(this.program,"u_flipY"),a=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),c=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(a,this.xOffset,this.yOffset),this.gl.uniform1f(c,this.denoiseLevel),this.gl.uniform1f(i,1)}setParameters(i){void 0!==i.denoiseLevel&&(this.denoiseLevel=i.denoiseLevel)}setSize(i,a){this.xOffset=1/i,this.yOffset=1/a}}const YH=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class qH extends L_{constructor(i,a,c){super(i,YH,a,c)}}const JH=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class S8 extends L_{constructor(i,a,c){super(i,JH,a,c)}}const $H=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class XH extends L_{constructor(i,a,c){super(i,$H,a,c)}}const ZH=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],eG=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],C8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],tG=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class nG extends L_{constructor(i,a,c,p){super(i,ZH,c,p),q(this,"inputTexture",void 0),q(this,"lightLevel",.1),q(this,"rednessLevel",.5),q(this,"mskin_he_max",175/180*3.141593),q(this,"mskin_he_min",115/180*3.141593),q(this,"mskin_hc_max",173/180*3.141593),q(this,"mskin_hc_min",116/180*3.141593),q(this,"mskin_hc_axis",2.04203545),q(this,"mfacts_rotate_c",0),q(this,"mfacts_rotate_le",0),q(this,"mfacts_rotate_ge",0),q(this,"tab_addr",null),q(this,"lutTextures",[]),this.inputTexture=a,this.init()}setUniforms(){const i=this.gl.getUniformLocation(this.program,"u_flipY"),a=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(a,this.denoiseLevel),this.gl.uniform1f(i,1);const c=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(c,this.lightLevel);const p=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(p,this.rednessLevel);const g=this.gl.getUniformLocation(this.program,"skin_he_max"),m=this.gl.getUniformLocation(this.program,"skin_he_min"),A=this.gl.getUniformLocation(this.program,"skin_hc_max"),_=this.gl.getUniformLocation(this.program,"skin_hc_min"),S=this.gl.getUniformLocation(this.program,"skin_hc_axis"),C=this.gl.getUniformLocation(this.program,"facts_rotate_c"),T=this.gl.getUniformLocation(this.program,"facts_rotate_le"),D=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(g,this.mskin_he_max),this.gl.uniform1f(m,this.mskin_he_min),this.gl.uniform1f(A,this.mskin_hc_max),this.gl.uniform1f(_,this.mskin_hc_min),this.gl.uniform1f(S,this.mskin_hc_axis),this.gl.uniform1f(C,this.mfacts_rotate_c),this.gl.uniform1f(T,this.mfacts_rotate_le),this.gl.uniform1f(D,this.mfacts_rotate_ge);const B=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(B,2);const K=["lighten_lut"],W=[this.gl.TEXTURE3];for(let Z=0;Z<K.length;Z++){const de=this.gl.getUniformLocation(this.program,K[Z]);this.gl.activeTexture(W[Z]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[Z]),this.gl.uniform1i(de,Z+3)}}setParameters(i){void 0!==i.denoiseLevel&&(this.denoiseLevel=i.denoiseLevel),void 0!==i.lightLevel&&(this.lightLevel=i.lightLevel),void 0!==i.rednessLevel&&(this.rednessLevel=i.rednessLevel,this.updateRedness(this.rednessLevel)),i.lighteningContrastLevel&&this.updateLut(i.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(C8);const i=[this.tab_addr],a=[256],c=[1];for(let p=0;p<i.length;p++){const g=this.gl.createTexture();if(!g)throw new h(u.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,g),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,a[p],c[p],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,i[p]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(g)}}updateRedness(i){let c,p,g=i,m=g;g>1&&(g=1),g<0&&(g=0),m>1&&(m=1),m<0&&(m=0),this.mfacts_rotate_c=.8*g,m<.8&&(m=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*m)/180*3.141593,this.mskin_hc_min=(116-4*m)/180*3.141593,this.mskin_hc_axis=(117-4*m)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<1.5707965&&(this.mskin_hc_min=1.5707965),this.mskin_hc_axis<1.5707965&&(this.mskin_hc_axis=1.5707965),this.mskin_he_min<1.5707965&&(this.mskin_he_min=1.5707965),this.mskin_hc_max>3.141593&&(this.mskin_hc_max=3.141593),this.mskin_hc_axis>3.141593&&(this.mskin_hc_axis=3.141593),this.mskin_he_max>3.141593&&(this.mskin_he_max=3.141593),c=this.mskin_he_max-this.mskin_hc_max,p=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=c>.01?this.mfacts_rotate_c*p/c:this.mfacts_rotate_c,c=this.mskin_hc_min-this.mskin_he_min,p=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=c>.01?this.mfacts_rotate_c*p/c:this.mfacts_rotate_c}updateLut(i){let a=null;if(0===i&&(a=C8),1===i&&(a=tG),2===i&&(a=eG),!a)throw new h(u.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+i);this.tab_addr=new Uint8Array(a);const c=[this.tab_addr],p=[256],g=[1];for(let m=0;m<c.length;m++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[m]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,p[m],g[m],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,c[m])}}class rG{constructor(){q(this,"gl",null),q(this,"canvas",null),q(this,"programs",[]),q(this,"commonProgram",null),q(this,"inputTexture",null),q(this,"outputTextures",[]),q(this,"fbos",[]),q(this,"originalFrameWidth",0),q(this,"originalFrameHeight",0),q(this,"enableBeauty",!1),q(this,"denoiseLevel",5),q(this,"lightLevel",.35),q(this,"rednessLevel",.5),q(this,"lighteningContrastLevel",1)}setEnableBeauty(i){this.enableBeauty=!!i}init(i,a,c){if(!Uc().supportWebGL)throw new h(u.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=c.getContext("webgl"),!this.gl)throw new h(u.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(i,a),!this.inputTexture)throw new h(u.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=c,this.programs.push(new b8(this.gl)),this.programs.push(new qH(this.gl,i,a)),this.programs.push(new S8(this.gl,i,a)),this.programs.push(new XH(this.gl,i,a)),this.programs.push(new nG(this.gl,this.inputTexture,i,a)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(i){if(!this.gl||!this.commonProgram||!this.canvas)return void O.warning("video effect manager is not init!");let a=0;if(this.originalFrameHeight===i.videoWidth&&this.originalFrameWidth===i.videoHeight)a=2;else if(this.originalFrameHeight!==i.videoHeight||this.originalFrameWidth!==i.videoWidth){if(O.debug("beauty effect: resolution changed ".concat(this.originalFrameWidth,"x").concat(this.originalFrameHeight," -> ").concat(i.videoWidth,"x").concat(i.videoHeight)),0===i.videoHeight||0===i.videoWidth)return void O.debug("beauty effect: skip 0 resolution frame");this.canvas.width=i.videoWidth,this.canvas.height=i.videoHeight,i.setAttribute("width",i.videoWidth.toString()),i.setAttribute("height",i.videoHeight.toString()),this.release(),this.init(i.videoWidth,i.videoHeight,this.canvas)}this.gl.viewport(0,0,i.videoWidth,i.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i);const c=this.enableBeauty?this.programs.length-1:0;for(let g=0;g<=c;g++){const m=this.programs[g].program;this.gl.useProgram(m);const A=this.gl.getUniformLocation(m,"u_image");this.programs[g].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[a+g%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[a+g%2]),this.gl.uniform1i(A,0)}this.gl.useProgram(this.commonProgram);const p=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(p,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(i){this.programs.forEach(a=>{a instanceof L_&&a.setParameters({denoiseLevel:i})}),this.denoiseLevel=i}setLightLevel(i){this.programs.forEach(a=>{a instanceof L_&&a.setParameters({lightLevel:i})}),this.lightLevel=i}setRednessLevel(i){this.programs.forEach(a=>{a instanceof L_&&a.setParameters({rednessLevel:i})}),this.rednessLevel=i}setContrastLevel(i){this.programs.forEach(a=>{a instanceof L_&&a.setParameters({lighteningContrastLevel:i})}),this.lighteningContrastLevel=i}setSize(i,a){this.programs.forEach(c=>{c instanceof L_&&c.setSize(i,a)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(i,a){if(!this.gl)throw new h(u.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let c=0;c<4;c++){const p=this.gl.createTexture();if(!p)throw new h(u.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,p),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),c<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,a,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,a,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const g=this.gl.createFramebuffer();if(!g)throw new h(u.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,g),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,p,0),this.outputTextures.push(p),this.fbos.push(g)}this.gl.viewport(0,0,i,a),this.originalFrameWidth=i,this.originalFrameHeight=a}}class iG{constructor(){q(this,"targetFrameRate",0),q(this,"recordedFrameCount",0),q(this,"recordingTime",2),q(this,"recordID",void 0)}startRecordBeautyEffectOutput(i){var a=arguments,c=this;return U(function*(){let p=a.length>1&&void 0!==a[1]?a[1]:4;if(c.recordID)throw new h(u.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const g=ns(6,"");return c.recordID=g,c.targetFrameRate=i,c.recordedFrameCount=0,c.recordingTime=p,yield ic(1e3*c.recordingTime),c.recordID!==g?(c.recordID=void 0,!0):(c.recordID=void 0,c.recordedFrameCount<c.targetFrameRate*c.recordingTime/2?(O.warning("detect beauty effect overload, current framerate",c.recordedFrameCount/2),!1):(O.debug("beauty effect current framerate",c.recordedFrameCount/2),!0))})()}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class I8 extends DU.exports.VideoProcessor{constructor(){super(),q(this,"name","BeautyProcessor"),q(this,"fps",15),q(this,"canvas",void 0),q(this,"video",void 0),q(this,"manager",void 0),q(this,"overloadDetector",new iG),q(this,"stopChromeBackgroundLoop",null),q(this,"onOverload",void 0),q(this,"stopLoop",void 0),q(this,"lastRenderTime",0),this.fps=30,this.manager=new rG,this._enabled=!1}onEnableChange(i){var a=this;return U(function*(){a.manager.setEnableBeauty(i),a.context&&a.inputTrack&&(i?yield a.startEffect(a.inputTrack,a.context):yield a.stopEffect(a.inputTrack,a.context))})()}setBeautyEffectOptions(i){var a=this;return U(function*(){if(void 0!==(c=i).smoothnessLevel&&Lr(c.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==c.lighteningLevel&&Lr(c.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==c.rednessLevel&&Lr(c.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==c.lighteningContrastLevel&&va(c.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==i.smoothnessLevel){const c=Math.max(.1,10*i.smoothnessLevel);a.manager.setDenoiseLevel(c)}var c;if(void 0!==i.lighteningLevel){const c=Math.max(.1,i.lighteningLevel/2);a.manager.setLightLevel(c)}if(void 0!==i.rednessLevel){const c=Math.max(.01,i.rednessLevel);a.manager.setRednessLevel(c)}void 0!==i.lighteningContrastLevel&&a.manager.setContrastLevel(i.lighteningContrastLevel)})()}onTrack(i,a){var c=this;return U(function*(){var p;c.video&&c.enabled&&(null===(p=c.stopLoop)||void 0===p||p.call(c),yield c.stopEffect(i,a)),yield c.startEffect(i,a)})()}startEffect(i,a){var c=this;return U(function*(){if(!c.enabled)return;const p=Oi(),g=yield c.renderWithWebGL(i);c.output(g,a),O.info("start video effect, output:",c.outputTrack),c.overloadDetector.startRecordBeautyEffectOutput(c.fps).then(_=>{_||c.onOverload&&c.onOverload()});let m=!1;c.stopLoop=()=>{m=!0};const A=()=>{c.enabled&&!m&&requestAnimationFrame(A);const _=Date.now(),S=1e3/c.fps,C=c.lastRenderTime?_-c.lastRenderTime:S;C<S||(c.lastRenderTime=_-(C-S),c.video&&c.video.paused&&c.video.play(),c.enabled&&c.video&&(c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()))};requestAnimationFrame(A),p.name===oi.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?c.stopChromeBackgroundLoop=Kj(()=>{c.enabled&&c.video&&c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()},c.fps):c.stopChromeBackgroundLoop&&(c.stopChromeBackgroundLoop(),c.stopChromeBackgroundLoop=null)},!1)})()}renderWithWebGL(i){var a=this;return U(function*(){a.canvas&&(a.canvas.remove(),a.canvas=void 0),a.video&&(a.video.remove(),a.video=void 0),a.canvas=document.createElement("canvas"),a.video=document.createElement("video"),a.video.setAttribute("autoplay",""),a.video.setAttribute("muted",""),a.video.muted=!0,a.video.setAttribute("playsinline",""),a.video.setAttribute("style","display:none"),a.video.srcObject=new MediaStream([i]);const c=new Un(_=>{const S=()=>{a.video&&a.video.removeEventListener("playing",S),_(void 0)};a.video&&a.video.addEventListener("playing",S)});a.video.play(),yield c;const p=i.getSettings(),g=p.width||a.video.videoWidth,m=p.height||a.video.videoHeight;if(p.frameRate&&a.fps!==p.frameRate&&(a.fps=p.frameRate,O.debug("beauty video processor: set fps to",a.fps)),O.debug("beauty video processor: width ".concat(g," height ").concat(m)),!g||!m)throw new h(u.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");a.canvas.width=g,a.canvas.height=m,a.video.setAttribute("width",g.toString()),a.video.setAttribute("height",m.toString()),a.manager.init(g,m,a.canvas);const A=Uc();return a.canvas.captureStream(A.supportRequestFrame?0:a.fps).getVideoTracks()[0]})()}stopEffect(i,a){var c=this;return U(function*(){O.info("stop video effect"),c.overloadDetector.stopRecordBeautyEffectOutput(),c.manager.release(),c.canvas&&c.canvas.remove(),c.video&&c.video.remove(),c.canvas=void 0,c.video=void 0,c.output(i,a)})()}}function kU(r){const i={};if(r.facingMode&&(i.facingMode=r.facingMode),r.cameraId&&(i.deviceId={exact:r.cameraId}),!r.encoderConfig)return i;const a=xt(r.encoderConfig);return i.width=a.width,i.height=a.height,!rd()&&a.frameRate&&(i.frameRate=a.frameRate),Oi().name===oi.EDGE&&"object"==typeof i.frameRate&&(i.frameRate.max=60),Uo()&&(i.frameRate={ideal:30,max:30}),i}function oG(r){const i={};r.screenSourceType&&(i.mediaSource=r.screenSourceType),r.extensionId&&iy()&&(i.extensionId=r.extensionId),r.electronScreenSourceId&&(i.sourceId=r.electronScreenSourceId);const a=r.encoderConfig?It(r.encoderConfig):null;return i.mandatory={chromeMediaSource:"desktop",maxWidth:a?a.width:void 0,maxHeight:a?a.height:void 0},a&&a.frameRate&&("number"==typeof a.frameRate?(i.mandatory.maxFrameRate=a.frameRate,i.mandatory.minFrameRate=a.frameRate):(i.mandatory.maxFrameRate=a.frameRate.max||a.frameRate.ideal||a.frameRate.exact||void 0,i.mandatory.minFrameRate=a.frameRate.min||a.frameRate.ideal||a.frameRate.exact||void 0),i.frameRate=a.frameRate),a&&a.width&&(i.width=a.width),a&&a.height&&(i.height=a.height),i}function sG(r){const i={};if(rd()||(void 0!==r.AGC&&(i.autoGainControl=r.AGC),void 0!==r.AEC&&(i.echoCancellation=r.AEC),void 0!==r.ANS&&(i.noiseSuppression=r.ANS,iy()&&r.ANS&&(i.googHighpassFilter=r.ANS))),r.encoderConfig){const a=Cn(r.encoderConfig);i.channelCount=a.stereo?2:1,i.sampleRate=a.sampleRate,i.sampleSize=a.sampleSize}return r.microphoneId&&(i.deviceId={exact:r.microphoneId}),nF()&&(i.sampleRate=void 0),i}var zw,kx;(function(r){r.COVERED="COVERED",r.POSITION="POSITION",r.SIZE="SIZE",r.STYLE="STYLE"})(zw||(zw={})),function(r){r.UNMOUNTED="UNMOUNTED",r.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(kx||(kx={}));var w8,PU,T8,R8,O8,D8,MU,NU,k8,P8,M8,N8,x8,L8,Px,B8,Vi,aG,cG,uG,F8,lG,dG,pp,pG=new class{constructor(){q(this,"_clientSize",null),q(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),q(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),q(this,"getStyle",r=>window.getComputedStyle(r,null)),q(this,"checkCssVisibleProperty",r=>{let i=!0;const a=this.getStyle(r),{display:c,visibility:p,opacity:g,filter:m}=a;return("none"===c||["hidden","collapse"].includes(p)||Number(g)<.1)&&(i=!1),!!i&&(m&&m.split(" ").filter(A=>{const _=A.split("(")[0];return["brightness","blur","opacity"].includes(_)}).map(A=>{const[_,S]=A.split(/\(|\)/);return[_,Number(S.match(/^[0-9\.]+/))]}).forEach(A=>{const[_,S]=A;switch(_){case"brightness":(S<.1||S>3)&&(i=!1);break;case"blur":S>3&&(i=!1);break;case"opacity":S<.1&&(i=!1)}}),i)}),q(this,"checkPropertyUpToAllParentNodes",(r,i)=>{let a=!0,c=!0;let g=r;for(;g&&c;)i(g)||(a=!1,c=!1),g=g.parentElement,g||(c=!1);return a}),q(this,"checkActualCssVisibleIncludeInherit",r=>this.checkPropertyUpToAllParentNodes(r,this.checkCssVisibleProperty)),q(this,"getSizeAboutClient",r=>{const{width:i,height:a,left:c,right:p,top:g,bottom:m}=r.getBoundingClientRect(),A=this.getClientWidth(),_=this.getClientHeight();return{width:i,height:a,left:c,right:p,top:g,bottom:m,clientWidth:A,clientHeight:_,clientMin:Math.min(A,_)}}),q(this,"checkActualSize",()=>{const{width:r,height:i,clientMin:a}=this._clientSize;return this.checkSizeIsVisible(r,i,a)}),q(this,"elementFromPoint",(r,i)=>document.elementFromPoint?document.elementFromPoint(r,i):null),q(this,"checkCoverForAPoint",(r,i,a)=>{const c=this.elementFromPoint(r,i);return null!==c&&c!==a}),q(this,"getPointPositionList",()=>{const{width:r,height:i,left:a,top:c}=this._clientSize,p=r/6,g=i/6,m=[],A=10**6;for(let _=0;_<5;_++)for(let S=0;S<5;S++)m.push({x:(a*A+(0===_?.1:4===_?(p*_*A-1e5)/A:p*_)*A)/A,y:(c*A+(0===S?.1:4===S?(g*S*A-1e5)/A:g*S)*A)/A});return[...m]}),q(this,"checkElementCover",r=>this.getPointPositionList().map(i=>this.checkCoverForAPoint(i.x,i.y,r)).filter(i=>!!i).length>6),q(this,"checkSizeIsVisible",(r,i,a)=>(r>50||a/r<=10)&&(i>50||a/i<=10)),q(this,"checkSizeOfPartInClient",()=>{const{left:r,right:i,top:a,bottom:c,clientHeight:p,clientWidth:g,clientMin:m}=this._clientSize;let A,_,S,C;if(r<0)A=0;else{if(!(r<g))return!1;A=r}if(i<0)return!1;if(_=i<g?i:g,a<0)S=0;else{if(!(a<p))return!1;S=a}return!(c<0)&&(C=c<p?c:p,this.checkSizeIsVisible(_-A,C-S,m))}),q(this,"returnHiddenResult",r=>(this._clientSize=null,{visible:!1,reason:r})),q(this,"checkOneElementVisible",r=>{if(r instanceof HTMLElement){if(this.checkElementIsMountedOnDom(r)){if(this.checkActualCssVisibleIncludeInherit(r)){if(this._clientSize=this.getSizeAboutClient(r),this.checkElementCover(r))return this.returnHiddenResult(zw.COVERED);{const i=this.checkActualSize(),a=this.checkSizeOfPartInClient();return i&&!a?this.returnHiddenResult(zw.POSITION):i?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(zw.SIZE)}}return this.returnHiddenResult(zw.STYLE)}return this.returnHiddenResult(kx.UNMOUNTED)}return this.returnHiddenResult(kx.INVALID_HTML_ELEMENT)}),q(this,"checkElementIsMountedOnDom",r=>this.checkPropertyUpToAllParentNodes(r,i=>"HTML"!==i.nodeName.toUpperCase()?null!==i.parentElement:!!document.documentElement))}};function hG(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function Yw(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?hG(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):hG(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let Ns=(w8=yn("LocalVideoTrack","getTrackId"),PU=es(),T8=_y("LocalVideoTrack","_enabledMutex"),R8=es(),O8=_y("LocalVideoTrack","_enabledMutex"),D8=es(),MU=OD({report:Gt}),NU=es(),k8=es(),P8=es(),M8=es(),N8=es(),x8=es(),L8=es(),Px=es(),w8((Kn((Vi=class Fz extends C3{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==aa.PLAYING)}constructor(i,a,c,p,g,m){super(i,g),q(this,"trackMediaType","video"),q(this,"_player",void 0),q(this,"_videoBeautyProcessor",void 0),q(this,"_videoVisibleTimer",null),q(this,"_previousVideoVisibleStatus",void 0),q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),q(this,"_encoderConfig",void 0),q(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),q(this,"_optimizationMode",void 0),q(this,"_videoHeight",void 0),q(this,"_videoWidth",void 0),q(this,"_forceBitrateLimit",void 0),q(this,"_enabled",!0),q(this,"processorDestination",void 0),q(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=a,this._scalabiltyMode=c,this._optimizationMode=p,this._hints=m||[],-1===this._hints.indexOf(Fc.SCREEN_TRACK)&&this.updateBitrateFromProfile(),this.processorContext=new fG(this.getTrackId()),this.processorDestination=new sk(this.processorContext),this.bindProcessorDestinationEvents()}play(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof i?i:"HTMLElement",a]});if("string"==typeof i){const g=document.getElementById(i);g?i=g:(O.warning("[".concat(this.getTrackId(),'] can not find "#').concat(i,'" element, use document.body')),_e("warning",this,'can not find "#'.concat(i,'" element, use document.body')),i=document.body)}O.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(a)),Ne("debug",this,"play",a);const p=Yw(Yw(Yw({},this._getDefaultPlayerConfig()),a),{},{trackId:this.getTrackId(),element:i});this._player?this._player.updateConfig(p):(this._player=new A8(p),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const g=this.getVideoElementVisibleStatus();this.emit(op.VIDEO_ELEMENT_VISIBLE_STATUS,g)}catch{}},rt("CHECK_VIDEO_VISIBLE_INTERVAL")),c.onSuccess()}stop(){const i=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return i.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,O.debug("[".concat(this.getTrackId(),"] stop video playback")),Ne("debug",this,"stop"),i.onSuccess()}setEnabled(i,a){var c=this;return U(function*(){if(!a){if(i===c._enabled)return;c.stateCheck("enabled",i)}if(O.info("[".concat(c.getTrackId(),"] start setEnabled"),i),Ne("info",c,"setEnabled",i),!i){c._originMediaStreamTrack.enabled=!1;try{yield Ro(c,nr.NEED_DISABLE_TRACK,c)}catch(p){throw O.error("[".concat(c.getTrackId(),"] setEnabled to false error"),p.toString()),Ne("error",c,"setEnabled",i,p.toString()),p}return a||(c._enabled=!1),O.info("[".concat(c.getTrackId(),"] setEnabled to false success")),void Ne("info",c,"setEnabled",i,"success")}c._originMediaStreamTrack.enabled=!0;try{yield Ro(c,nr.NEED_ENABLE_TRACK,c)}catch(p){throw O.error("[".concat(c.getTrackId(),"] setEnabled to true error"),p.toString()),Ne("error",c,"setEnabled",i,p.toString()),p}O.info("[".concat(c.getTrackId(),"] setEnabled to true success")),Ne("info",c,"setEnabled",i,"success"),a||(c._enabled=!0)})()}setMuted(i){var a=this;return U(function*(){i!==a._muted&&(a.stateCheck("muted",i),a._muted=i,a._originMediaStreamTrack.enabled=!i,O.debug("[".concat(a.getTrackId(),"] start set muted: ").concat(i)),Ne("debug",a,"setMuted",i),i?yield Ro(a,nr.NEED_MUTE_TRACK,a):yield Ro(a,nr.NEED_UNMUTE_TRACK,a))})()}getStats(){return LD(()=>{O.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead"),_e("warning",this,"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),yy(this,nr.GET_STATS)||Yw({},k4)}setBeautyEffect(i){var a=arguments,c=this;return U(function*(){let p=a.length>1&&void 0!==a[1]?a[1]:{};const g=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.LOCAL_VIDEO_TRACK_BEAUTY,options:[c.getTrackId(),i,p]});if(i||c._videoBeautyProcessor){if(m_()===Ei.IOS||m_()===Ei.ANDROID){const m=new h(u.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw g.onError(m),m}if(!c._enabled&&i){const m=new h(u.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw g.onError(m),m}if(O.info("[".concat(c.getTrackId(),"] start setBeautyEffect"),i,JSON.stringify(p)),Ne("info",c,"setBeautyEffect",[i,p]),c._videoBeautyProcessor||i){try{if(!c._videoBeautyProcessor)if(c._videoBeautyProcessor=new I8,c.processor){const m=c.processor;c.pipe(c._videoBeautyProcessor).pipe(m)}else c.pipe(c._videoBeautyProcessor).pipe(c.processorDestination);yield c._videoBeautyProcessor.setBeautyEffectOptions(p),i?yield c._videoBeautyProcessor.enable():yield c._videoBeautyProcessor.disable()}catch(m){throw O.error("[".concat(c.getTrackId(),"] setBeautyEffect error"),m.toString()),Ne("info",c,"setBeautyEffect",[i,p]),g.onError(m),m}O.info("[".concat(c.getTrackId(),"] setBeautyEffect success")),Ne("info",c,"setBeautyEffect",[i,p],"success"),g.onSuccess()}else g.onSuccess()}})()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}getCurrentFrameImage(i){var a=arguments,c=this;return U(function*(){return c._player?c._player.getCurrentFrameToUint8Array(i,a.length>1&&void 0!==a[1]?a[1]:1):yield TU(i)})()}clone(i,a,c,p){const g=this._mediaStreamTrack.clone();return new Fz(g,i,a,c,p)}setBitrateLimit(i){var a=this;return U(function*(){if(O.debug("[".concat(a.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(i))),Ne("debug",a,"setBitrateLimit",i),i){a._forceBitrateLimit=i,a._encoderConfig&&(a._encoderConfig.bitrateMax=a._encoderConfig.bitrateMax&&a._encoderConfig.bitrateMax<i.max_bitrate?a._encoderConfig.bitrateMax:i.max_bitrate,a._encoderConfig.bitrateMin=i.min_bitrate);try{yield Ro(a,nr.NEED_UPDATE_VIDEO_ENCODER,a)}catch(c){return c.throw()}}})()}setOptimizationMode(i){var a=this;return U(function*(){if("motion"!==i&&"detail"!==i&&"balanced"!==i)return O.error(u.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"),void Ne("error",a,"setOptimizationMode",i,u.INVALID_PARAMS);const c=a._optimizationMode;try{a._optimizationMode=i,yield Ro(a,nr.SET_OPTIMIZATION_MODE,a)}catch(p){throw a._optimizationMode=c,O.error("[".concat(a.getTrackId(),"] set optimization mode failed"),p.toString()),Ne("error",a,"setOptimizationMode",i,p.toString()),p}O.info("[".concat(a.getTrackId(),"] set optimization mode success (").concat(i,")")),Ne("info",a,"setOptimizationMode",i,"success")})()}setScalabiltyMode(i){if(1===i.numSpatialLayers&&1!==i.numTemporalLayers)return O.error(u.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),Ne("error",this,"setScalabiltyMode",i,u.INVALID_PARAMS),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=i,O.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(i,")")),Ne("info",this,"setScalabiltyMode",i,"success")}updateMediaStreamTrackResolution(){N9(this._originMediaStreamTrack).then(i=>{let[a,c]=i;this._videoHeight=c,this._videoWidth=a}).catch(B3)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:i,height:a,frameRate:c}=this.getMediaStreamTrackSettings();if(!i||!a||!c)return;const[p,g]=function(m,A,_){const S=rt("BITRATE_ADAPTER_TYPE");let C;const T=200*Math.pow(_/15,.6)*Math.pow(m*A/640/360,.75),D=T;if("STANDARD_BITRATE"===S)C=4*T;else{if("COMPATIABLE_BITRATE"!==S)return;C=2*T}return[Math.floor(C),Math.floor(D)]}(i,a,c)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=g,this._encoderConfig.bitrateMax=p,O.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(i,", h: ").concat(a,", fps: ").concat(c,"] => [brMax: ").concat(p,", brMin: ").concat(g,"]")),Ne("debug",this,"updateBitrateFromProfile",void 0,"[w: ".concat(i,", h: ").concat(a,", fps: ").concat(c,"] => [brMax: ").concat(p,", brMin: ").concat(g,"]")))}getVideoElementVisibleStatus(){try{var i,a;const c=null==this||null===(i=this._player)||void 0===i?void 0:i.getContainerElement(),p={track:this,element:null==this||null===(a=this._player)||void 0===a?void 0:a.getVideoElement(),slot:c?.parentElement},{element:g,slot:m}=p;if(this.isPlaying&&g instanceof HTMLVideoElement&&m instanceof HTMLElement){const A=pG.checkOneElementVisible(g),_=Object.assign({},A);if(_.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=_.visible;Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(_.visible?"Video is visible":"Invisible because of ".concat(_.reason))}return _}return}catch(c){throw new h(u.GET_VIDEO_ELEMENT_VISIBLE_ERROR,c.message)}}renewMediaStreamTrack(i){return U(function*(){})()}pipe(i){if(this._videoBeautyProcessor&&i!==this._videoBeautyProcessor)return this._videoBeautyProcessor.pipe(i);if(this.processor===i)return i;if(i._source)throw new h(u.INVALID_OPERATION,"Processor ".concat(i.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=i,this.processor._source=this,i.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),i}unpipe(){if(!this.processor)return;const i=this.processor;this.processor._source=void 0,this.processor=void 0,i.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}bindProcessorDestinationEvents(){var i=this;this.processorDestination.on(sp.ON_TRACK,function(){var a=U(function*(c){c?c!==i._mediaStreamTrack&&(i._mediaStreamTrack=c,i._updatePlayerSource(),yield Ro(i,nr.NEED_REPLACE_TRACK,i)):i._mediaStreamTrack!==i._originMediaStreamTrack&&(i._mediaStreamTrack=i._originMediaStreamTrack,i._updatePlayerSource(),yield Ro(i,nr.NEED_REPLACE_TRACK,i))});return function(c){return a.apply(this,arguments)}}())}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(sp.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Al.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Al.REQUEST_CONSTRAINTS)}}).prototype,"play",[PU],Object.getOwnPropertyDescriptor(Vi.prototype,"play"),Vi.prototype),Kn(Vi.prototype,"setEnabled",[T8,R8],Object.getOwnPropertyDescriptor(Vi.prototype,"setEnabled"),Vi.prototype),Kn(Vi.prototype,"setMuted",[O8,D8,MU],Object.getOwnPropertyDescriptor(Vi.prototype,"setMuted"),Vi.prototype),Kn(Vi.prototype,"getStats",[NU],Object.getOwnPropertyDescriptor(Vi.prototype,"getStats"),Vi.prototype),Kn(Vi.prototype,"setBeautyEffect",[k8],Object.getOwnPropertyDescriptor(Vi.prototype,"setBeautyEffect"),Vi.prototype),Kn(Vi.prototype,"getCurrentFrameData",[P8],Object.getOwnPropertyDescriptor(Vi.prototype,"getCurrentFrameData"),Vi.prototype),Kn(Vi.prototype,"getCurrentFrameImage",[M8],Object.getOwnPropertyDescriptor(Vi.prototype,"getCurrentFrameImage"),Vi.prototype),Kn(Vi.prototype,"setBitrateLimit",[N8],Object.getOwnPropertyDescriptor(Vi.prototype,"setBitrateLimit"),Vi.prototype),Kn(Vi.prototype,"setOptimizationMode",[x8],Object.getOwnPropertyDescriptor(Vi.prototype,"setOptimizationMode"),Vi.prototype),Kn(Vi.prototype,"setScalabiltyMode",[L8],Object.getOwnPropertyDescriptor(Vi.prototype,"setScalabiltyMode"),Vi.prototype),Kn(Vi.prototype,"updateMediaStreamTrackResolution",[Px],Object.getOwnPropertyDescriptor(Vi.prototype,"updateMediaStreamTrackResolution"),Vi.prototype),B8=Vi))||B8),U8=(aG=yn("CameraVideoTrack","getTrackId"),cG=es(),uG=_y("CameraVideoTrack","_enabledMutex"),F8=es(),lG=es(),aG((Kn((pp=class extends Ns{constructor(r,i,a,c,p,g){var m;super(r,i.encoderConfig?xt(i.encoderConfig):{},c,p,g),m=this,q(this,"_config",void 0),q(this,"_originalConstraints",void 0),q(this,"_constraints",void 0),q(this,"_enabled",!0),q(this,"_deviceName","default"),q(this,"tryResumeVideoForIOS15WeChat",U(function*(){oy()&&!nD()&&Bi()&&m._enabled&&!m._isClosed&&(O.debug("[".concat(m.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),yield m.renewMediaStreamTrack())})),Ft("info",this,"constructor",{trackId:g,deviceId:r.label,constraints:a,config:i}),this._config=i,this._originalConstraints=a,this._constraints=a,this._deviceName=r.label,this._config.encoderConfig&&(this._encoderConfig=xt(this._config.encoderConfig)),Fr.on(qs.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Fr.on(qs.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}setDevice(r){var i=this;return U(function*(){const a=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CAM_VIDEO_TRACK_SET_DEVICE,options:[i.getTrackId(),r]});if(O.info("[".concat(i.getTrackId(),"] set device to ").concat(r)),Ne("info",i,"setDevice",r),i._enabled)try{const c=yield Sl.getDeviceById(r),p={};p.video=Yw({},i._constraints),p.video.deviceId={exact:r},p.video.facingMode=void 0,i._originMediaStreamTrack.stop();let g=null;try{g=yield Uu(p,i.getTrackId())}catch(m){throw O.error("[".concat(i.getTrackId(),"] setDevice failed"),m.toString()),Ne("error",i,"setDevice",r,m.toString()),g=yield Uu({video:i._constraints},i.getTrackId()),yield i._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),m}yield i._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),i.updateMediaStreamTrackResolution(),i._deviceName=c.label,i._config.cameraId=r,i._constraints.deviceId={exact:r}}catch(c){throw a.onError(c),O.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Ne("error",i,"setDevice",r,c.toString()),c}else try{const c=yield Sl.getDeviceById(r);i._deviceName=c.label,i._config.cameraId=r,i._constraints.deviceId={exact:r}}catch(c){throw a.onError(c),O.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Ne("error",i,"setDevice",r,c.toString()),c}O.info("[".concat(i.getTrackId(),"] setDevice success")),Ne("info",i,"setDevice",r,"success"),a.onSuccess()})()}setEnabled(r,i){var a=this;return U(function*(){if(!i){if(r===a._enabled)return;a.stateCheck("enabled",r)}if(O.info("[".concat(a.getTrackId(),"] start setEnabled"),r),Ne("info",a,"setEnabled",r),!r){a._originMediaStreamTrack.onended=null,a._originMediaStreamTrack.stop(),i||(a._enabled=!1);try{yield Ro(a,nr.NEED_DISABLE_TRACK,a)}catch(g){throw O.error("[".concat(a.getTrackId(),"] setEnabled to false error"),g.toString()),Ne("error",a,"setEnabled",r,g.toString()),g}return O.info("[".concat(a.getTrackId(),"] setEnabled to false success")),void Ne("info",a,"setEnabled",r,"success")}const c=Yw({},a._constraints),p=Sl.searchDeviceIdByName(a._deviceName);p&&!c.deviceId&&(c.deviceId={exact:p});try{const g=yield Uu({video:a._constraints},a.getTrackId());yield a._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),yield Ro(a,nr.NEED_ENABLE_TRACK,a)}catch(g){throw O.error("[".concat(a.getTrackId(),"] setEnabled true error"),g.toString()),Ne("error",a,"setEnabled",r,g.toString()),g}a.updateMediaStreamTrackResolution(),O.info("[".concat(a.getTrackId(),"] setEnabled to true success")),Ne("info",a,"setEnabled",r,"success"),i||(a._enabled=!0)})()}setEncoderConfiguration(r,i){var a=this;return U(function*(){const c=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[a.getTrackId(),r]});if(!a._enabled){const m=new h(u.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw c.onError(m),m}r=xt(r),a._forceBitrateLimit&&(r.bitrateMax=a._forceBitrateLimit.max_bitrate?a._forceBitrateLimit.max_bitrate:r.bitrateMax,r.bitrateMin=a._forceBitrateLimit.min_bitrate?a._forceBitrateLimit.min_bitrate:r.bitrateMin);const p=Wa(a._config);p.encoderConfig=r;const g=kU(p);(uu()||Ho()||Jp())&&(g.deviceId=void 0),O.debug("[".concat(a.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(r),JSON.stringify(g)),Ne("debug",a,"setEncoderConfiguration",r);try{yield a._originMediaStreamTrack.applyConstraints(g),a.updateMediaStreamTrackResolution()}catch(m){const A=new h(u.UNEXPECTED_ERROR,m.toString());throw O.error("[".concat(a.getTrackId(),"] applyConstraints error"),A.toString()),Ne("error",a,"setEncoderConfiguration",m.toString()),c.onError(A),A}a._config=p,a._constraints=g,a._originalConstraints=g,a._encoderConfig=r,-1===a._hints.indexOf(Fc.SCREEN_TRACK)&&a.updateBitrateFromProfile();try{yield Ro(a,nr.NEED_UPDATE_VIDEO_ENCODER,a)}catch(m){return c.onError(m),m.throw()}c.onSuccess()})()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){var r=this;if((Ho()||Jp())&&this._enabled&&!this._isClosed&&Fr.duringInterruption){const i=function(){var a=U(function*(){Fr.off(qs.IOS_INTERRUPTION_END,i),r._enabled&&!r._isClosed&&(O.debug("[".concat(r.getTrackId(),"] try capture camera media device for interrupted iOS device.")),_e("debug",r,"try capture camera media device for interrupted iOS device."),yield r.setEnabled(!1),yield r.setEnabled(!0))});return function(){return a.apply(this,arguments)}}();Fr.on(qs.IOS_INTERRUPTION_END,i)}else O.debug("[".concat(this.getTrackId(),"] track ended")),st("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(op.TRACK_ENDED)}renewMediaStreamTrack(r){var i=this;return U(function*(){const a=r||i._constraints,c=Sl.searchDeviceIdByName(i._deviceName);c&&!a.deviceId&&(a.deviceId={exact:c});const p=yield Uu({video:a},i.getTrackId());i._constraints=a,yield i._updateOriginMediaStreamTrack(p.getVideoTracks()[0],!0),i.updateMediaStreamTrackResolution()})()}close(){super.close(),Fr.off(qs.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Fr.off(qs.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){var r=this;this.processorContext.on(Al.REQUEST_UPDATE_CONSTRAINTS,function(){var i=U(function*(a,c,p){try{const g=Object.assign({},r._originalConstraints,...a);yield r.renewMediaStreamTrack(g),c()}catch(g){p(g)}});return function(a,c,p){return i.apply(this,arguments)}}()),this.processorContext.on(Al.REQUEST_CONSTRAINTS,function(){var i=U(function*(a){a(r._originMediaStreamTrack.getSettings())});return function(a){return i.apply(this,arguments)}}())}}).prototype,"setDevice",[cG],Object.getOwnPropertyDescriptor(pp.prototype,"setDevice"),pp.prototype),Kn(pp.prototype,"setEnabled",[uG,F8],Object.getOwnPropertyDescriptor(pp.prototype,"setEnabled"),pp.prototype),Kn(pp.prototype,"setEncoderConfiguration",[lG],Object.getOwnPropertyDescriptor(pp.prototype,"setEncoderConfiguration"),pp.prototype),dG=pp))||dG);class sk extends s{constructor(i){super(),q(this,"name","VideoProcessorDestination"),q(this,"ID","0"),q(this,"_source",void 0),q(this,"videoContext",void 0),q(this,"inputTrack",void 0),this.videoContext=i}get kind(){return"video"}get enabled(){return!0}pipe(){throw new h(u.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new h(u.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(i){if(i.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");i.track&&i.track!==this.inputTrack&&(this.inputTrack=i.track,this.emit(sp.ON_TRACK,i.track))}reset(){this.inputTrack=void 0,this.emit(sp.ON_TRACK,void 0)}}class fG extends s{constructor(i){super(),q(this,"constraintsMap",new Map),q(this,"statsRegistry",[]),q(this,"trackId",void 0),this.trackId=i}getConstraints(){var i=this;return U(function*(){return yield up(i,Al.REQUEST_CONSTRAINTS)})()}requestApplyConstraints(i,a){var c=this;return U(function*(){var p;return O.info("processor ".concat(a.name," requestApplyConstraints for ").concat(c.trackId)),i&&c.constraintsMap.set(a,i),Ro(c,Al.REQUEST_UPDATE_CONSTRAINTS,Array.from(O_(p=c.constraintsMap).call(p)))})()}requestRevertConstraints(i){var a=this;return U(function*(){var c;if(a.constraintsMap.has(i))return O.info("processor ".concat(i.name," requestRevertConstraints for ").concat(a.trackId)),a.constraintsMap.delete(i),Ro(a,Al.REQUEST_UPDATE_CONSTRAINTS,Array.from(O_(c=a.constraintsMap).call(c)))})()}registerStats(i,a,c){this.statsRegistry.find(p=>p.processorID===i.ID&&p.processorName===i.name&&p.type===a)||this.statsRegistry.push({processorName:i.name,processorID:i.ID,type:a,cb:c})}unregisterStats(i,a){}gatherStats(){return this.statsRegistry.map(i=>{let{processorID:a,processorName:c,type:p,cb:g}=i;return{processorID:a,processorName:c,type:p,stats:g()}})}}class Mx{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(i,a){q(this,"uid",void 0),q(this,"_uintid",void 0),q(this,"_trust_in_room_",!0),q(this,"_trust_audio_enabled_state_",!0),q(this,"_trust_video_enabled_state_",!0),q(this,"_trust_audio_mute_state_",!0),q(this,"_trust_video_mute_state_",!0),q(this,"_audio_muted_",!1),q(this,"_video_muted_",!1),q(this,"_audio_enabled_",!0),q(this,"_video_enabled_",!0),q(this,"_audio_added_",!1),q(this,"_video_added_",!1),q(this,"_trust_video_stream_added_state_",!0),q(this,"_trust_audio_stream_added_state_",!0),q(this,"_audioTrack",void 0),q(this,"_videoTrack",void 0),q(this,"_audioSSRC",void 0),q(this,"_videoSSRC",void 0),q(this,"_audioOrtc",void 0),q(this,"_videoOrtc",void 0),q(this,"_cname",void 0),q(this,"_rtxSsrcId",void 0),this.uid=i,this._uintid=a}}var mG=TA,gG=ku,V8=AA;Io({target:"Promise",stat:!0},{try:function(r){var i=gG.f(this),a=V8(r);return(a.error?i.reject:i.resolve)(a.value),i.promise}});var j8=mG,_G=Io,vG=Or,AG=as,Nx=PN,yG=Oa,EG=Fl,bG=Cu,Q8=Fa,SG=H7,CG=hu,IG=Dh,H8=ks("isConcatSpreadable"),G8=9007199254740991,W8="Maximum allowed index exceeded",K8=vG.TypeError,wG=IG>=51||!AG(function(){var r=[];return r[H8]=!1,r.concat()[0]!==r}),TG=CG("concat"),RG=function(r){if(!yG(r))return!1;var i=r[H8];return void 0!==i?!!i:Nx(r)};_G({target:"Array",proto:!0,forced:!wG||!TG},{concat:function(r){var i,a,c,p,g,m=EG(this),A=SG(m,0),_=0;for(i=-1,c=arguments.length;i<c;i++)if(RG(g=-1===i?m:arguments[i])){if(_+(p=bG(g))>G8)throw K8(W8);for(a=0;a<p;a++,_++)a in g&&Q8(A,_,g[a])}else{if(_>=G8)throw K8(W8);Q8(A,_++,g)}return A.length=_,A}});var z8={},OG=kd,DG=Pd,Y8=Mg.f,kG=g4,q8="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];z8.f=function(r){return q8&&"Window"==OG(r)?function(i){try{return Y8(i)}catch{return kG(q8)}}(r):Y8(DG(r))};var ak={};ak.f=ks;var J8=Md,MG=Os,NG=ak,xG=Ul.f,ba=function(r){var i=J8.Symbol||(J8.Symbol={});MG(i,r)||xG(i,r,{value:NG.f(r)})},qw=Io,xU=Or,LG=eu,BG=ta,ck=Xc,FG=No,Jw=Ec,FS=P0,LU=as,Ka=Os,UG=PN,VG=cs,jG=Oa,QG=$c,BU=mE,FU=Su,HG=Fl,xx=Pd,UU=Nf,$8=Wl,VU=Zc,uk=xg,X8=xo,GG=Mg,Z8=z8,jU=Na,e6=Mf,t6=Ul,WG=Jv,n6=Av,KG=TR,QU=jg,lk=yg.exports,r6=eb,i6=yu,o6=ks,Lx=ak,Oz=ba,s6=Wg,a6=Up,Bx=W7.forEach,gd=Op("hidden"),Fx="Symbol",c6=o6("toPrimitive"),zG=a6.set,u6=a6.getterFor(Fx),uf=Object.prototype,by=xU.Symbol,US=by&&by.prototype,YG=xU.TypeError,HU=xU.QObject,dk=LG("JSON","stringify"),l6=e6.f,Sy=t6.f,d6=Z8.f,qG=n6.f,p6=FG([].push),B_=lk("symbols"),pk=lk("op-symbols"),GU=lk("string-to-symbol-registry"),WU=lk("symbol-to-string-registry"),JG=lk("wks"),KU=!HU||!HU.prototype||!HU.prototype.findChild,zU=Jw&&LU(function(){return 7!=uk(Sy({},"a",{get:function(){return Sy(this,"a",{value:7}).a}})).a})?function(r,i,a){var c=l6(uf,i);c&&delete uf[i],Sy(r,i,a),c&&r!==uf&&Sy(uf,i,c)}:Sy,YU=function(r,i){var a=B_[r]=uk(US);return zG(a,{type:Fx,tag:r,description:i}),Jw||(a.description=i),a},Ux=function(r,i,a){r===uf&&Ux(pk,i,a),FU(r);var c=UU(i);return FU(a),Ka(B_,c)?(a.enumerable?(Ka(r,gd)&&r[gd][c]&&(r[gd][c]=!1),a=uk(a,{enumerable:VU(0,!1)})):(Ka(r,gd)||Sy(r,gd,VU(1,{})),r[gd][c]=!0),zU(r,c,a)):Sy(r,c,a)},qU=function(r,i){FU(r);var a=xx(i),c=X8(a).concat(JU(a));return Bx(c,function(p){Jw&&!ck(h6,a,p)||Ux(r,p,a[p])}),r},h6=function(r){var i=UU(r),a=ck(qG,this,i);return!(this===uf&&Ka(B_,i)&&!Ka(pk,i))&&(!(a||!Ka(this,i)||!Ka(B_,i)||Ka(this,gd)&&this[gd][i])||a)},f6=function(r,i){var a=xx(r),c=UU(i);if(a!==uf||!Ka(B_,c)||Ka(pk,c)){var p=l6(a,c);return!p||!Ka(B_,c)||Ka(a,gd)&&a[gd][c]||(p.enumerable=!0),p}},m6=function(r){var i=d6(xx(r)),a=[];return Bx(i,function(c){Ka(B_,c)||Ka(r6,c)||p6(a,c)}),a},JU=function(r){var i=r===uf,a=d6(i?pk:xx(r)),c=[];return Bx(a,function(p){!Ka(B_,p)||i&&!Ka(uf,p)||p6(c,B_[p])}),c};if(FS||(QU(US=(by=function(){if(QG(US,this))throw YG("Symbol is not a constructor");var r=arguments.length&&void 0!==arguments[0]?$8(arguments[0]):void 0,i=i6(r),a=function(c){this===uf&&ck(a,pk,c),Ka(this,gd)&&Ka(this[gd],i)&&(this[gd][i]=!1),zU(this,i,VU(1,c))};return Jw&&KU&&zU(uf,i,{configurable:!0,set:a}),YU(i,r)}).prototype,"toString",function(){return u6(this).tag}),QU(by,"withoutSetter",function(r){return YU(i6(r),r)}),n6.f=h6,t6.f=Ux,WG.f=qU,e6.f=f6,GG.f=Z8.f=m6,jU.f=JU,Lx.f=function(r){return YU(o6(r),r)},Jw&&Sy(US,"description",{configurable:!0,get:function(){return u6(this).description}})),qw({global:!0,wrap:!0,forced:!FS,sham:!FS},{Symbol:by}),Bx(X8(JG),function(r){Oz(r)}),qw({target:Fx,stat:!0,forced:!FS},{for:function(r){var i=$8(r);if(Ka(GU,i))return GU[i];var a=by(i);return GU[i]=a,WU[a]=i,a},keyFor:function(r){if(!BU(r))throw YG(r+" is not a symbol");if(Ka(WU,r))return WU[r]},useSetter:function(){KU=!0},useSimple:function(){KU=!1}}),qw({target:"Object",stat:!0,forced:!FS,sham:!Jw},{create:function(r,i){return void 0===i?uk(r):qU(uk(r),i)},defineProperty:Ux,defineProperties:qU,getOwnPropertyDescriptor:f6}),qw({target:"Object",stat:!0,forced:!FS},{getOwnPropertyNames:m6,getOwnPropertySymbols:JU}),qw({target:"Object",stat:!0,forced:LU(function(){jU.f(1)})},{getOwnPropertySymbols:function(r){return jU.f(HG(r))}}),dk&&qw({target:"JSON",stat:!0,forced:!FS||LU(function(){var r=by();return"[null]"!=dk([r])||"{}"!=dk({a:r})||"{}"!=dk(Object(r))})},{stringify:function(r,i,a){var c=KG(arguments),p=i;if((jG(i)||void 0!==r)&&!BU(r))return UG(i)||(i=function(g,m){if(VG(p)&&(m=ck(p,this,g,m)),!BU(m))return m}),c[1]=i,BG(dk,null,c)}}),!US[c6]){var $G=US.valueOf;QU(US,c6,function(r){return ck($G,this)})}s6(by,Fx),r6[gd]=!0,ba("asyncIterator"),ba("hasInstance"),ba("isConcatSpreadable"),ba("iterator"),ba("match"),ba("matchAll"),ba("replace"),ba("search"),ba("species"),ba("split"),ba("toPrimitive"),ba("toStringTag"),ba("unscopables"),Wg(Or.JSON,"JSON",!0);var Dz=Md.Symbol;ba("asyncDispose"),ba("dispose"),ba("matcher"),ba("metadata"),ba("observable"),ba("patternMatch"),ba("replaceAll");var g6=Dz,_6=ak.f("asyncIterator");function Vx(r){this.wrapped=r}function ih(r){var i,a;function c(g,m){try{var A=r[g](m),_=A.value,S=_ instanceof Vx;j8.resolve(S?_.wrapped:_).then(function(C){S?c("return"===g?"return":"next",C):p(A.done?"return":"normal",C)},function(C){c("throw",C)})}catch(C){p("throw",C)}}function p(g,m){switch(g){case"return":i.resolve({value:m,done:!0});break;case"throw":i.reject(m);break;default:i.resolve({value:m,done:!1})}(i=i.next)?c(i.key,i.arg):a=null}this._invoke=function(g,m){return new j8(function(A,_){var S={key:g,arg:m,resolve:A,reject:_,next:null};a?a=a.next=S:(i=a=S,c(g,m))})},"function"!=typeof r.return&&(this.return=void 0)}function $w(r){return function(){return new ih(r.apply(this,arguments))}}function Ko(r){return new Vx(r)}ih.prototype["function"==typeof g6&&_6||"@@asyncIterator"]=function(){return this},ih.prototype.next=function(r){return this._invoke("next",r)},ih.prototype.throw=function(r){return this._invoke("throw",r)},ih.prototype.return=function(r){return this._invoke("return",r)};var $U=ak.f("iterator");function jx(r,i){var a={},c=!1;function p(g,m){return c=!0,m=new j8(function(A){A(r[g](m))}),{done:!1,value:i(m)}}return a[void 0!==g6&&$U||"@@iterator"]=function(){return this},a.next=function(g){return c?(c=!1,g):p("next",g)},"function"==typeof r.throw&&(a.throw=function(g){if(c)throw c=!1,g;return p("throw",g)}),"function"==typeof r.return&&(a.return=function(g){return c?(c=!1,g):p("return",g)}),a}var hp=_6,v6=qu,hk=ce,ZU=Ya,ZG=br,VS=jf,y6=qo.f,eW=wd,Cy=H.Symbol,jS=Cy&&Cy.prototype;if(P&&Xe(Cy)&&(!("description"in jS)||void 0!==Cy().description)){var eV={},fk=function(){var r=arguments.length<1||void 0===arguments[0]?void 0:VS(arguments[0]),i=ZG(jS,this)?new Cy(r):void 0===r?Cy():Cy(r);return""===r&&(eV[i]=!0),i};eW(fk,Cy),fk.prototype=jS,jS.constructor=fk;var Pz="Symbol(test)"==String(Cy("test")),E6=hk(jS.toString),tV=hk(jS.valueOf),tW=/^Symbol\((.*)\)[^)]+$/,b6=hk("".replace),nW=hk("".slice);y6(jS,"description",{configurable:!0,get:function(){var r=tV(this),i=E6(r);if(ZU(eV,r))return"";var a=Pz?nW(i,7,-1):b6(i,tW,"$1");return""===a?void 0:a}}),v6({global:!0,forced:!0},{Symbol:fk})}var wl={exports:{}};function mk(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function gk(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?mk(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):mk(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function Xw(r,i,a,c,p,g){let m=[],A=[],_=[],S=[],C=!1,T=!1;if(wl.exports.parse(r).mediaDescriptions.forEach(D=>{g&&g!==D.attributes.direction||("video"!==D.media.mediaType||C||(A=D.attributes.payloads,S=D.attributes.extmaps,C=!0),"audio"!==D.media.mediaType||T||(m=D.attributes.payloads,_=D.attributes.extmaps,T=!0))}),!S||0===A.length)throw new Error("Cannot get video capabilities from SDP.");if(!_||0===m.length)throw new Error("Cannot get audio capabilities from SDP.");return A.forEach(D=>{var B;null!==(B=D.rtpMap)&&void 0!==B&&B.clockRate&&(D.rtpMap.clockRate=parseInt(D.rtpMap.clockRate))}),m.forEach(D=>{var B;null!==(B=D.rtpMap)&&void 0!==B&&B.clockRate&&(D.rtpMap.clockRate=parseInt(D.rtpMap.clockRate))}),i&&(m=m.filter(D=>{var B;return"rtx"!==(null===(B=D.rtpMap)||void 0===B?void 0:B.encodingName.toLowerCase())}),A=A.filter(D=>{var B;return"rtx"!==(null===(B=D.rtpMap)||void 0===B?void 0:B.encodingName.toLowerCase())})),a&&(A=A.filter(D=>{var B;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(B=D.rtpMap)||void 0===B?void 0:B.encodingName)||"")})),c&&c?.length>0&&(m=m.filter(D=>{var B;return c.includes((null===(B=D.rtpMap)||void 0===B?void 0:B.encodingName.toLowerCase())||"")})),p&&p?.length>0&&(A=A.filter(D=>{var B;return p.includes((null===(B=D.rtpMap)||void 0===B?void 0:B.encodingName.toLowerCase())||"")})),{audioCodecs:m,videoCodecs:A,audioExtensions:_,videoExtensions:S}}function _k(r){const i=wl.exports.parse(r);let a,c;for(const p of i.mediaDescriptions){if(!a){const g=p.attributes.iceUfrag,m=p.attributes.icePwd;if(!g||!m)throw new Error("Cannot get iceUfrag or icePwd from SDP.");a={iceUfrag:g,icePwd:m}}if(!c){const g=p.attributes.fingerprints;g.length>0&&(c={fingerprints:g})}}if(!c&&i.attributes.fingerprints.length>0&&(c={fingerprints:i.attributes.fingerprints}),!c||!a)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:a,dtlsParameters:c}}function Qx(r,i,a){const{cname:c}=r;let p;void 0!==i&&void 0!==a?(p=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:i,port:a.toString(),type:"host",extension:{}}],O.debug("Using remote candidate from AP ".concat(i,":").concat(a)),_e("debug",[],"Using remote candidate from AP ".concat(i,":").concat(a))):p=r.iceParameters.candidates.map(_=>({foundation:_.foundation,componentId:"1",transport:_.protocol,priority:_.priority.toString(),connectionAddress:_.ip,port:_.port.toString(),type:_.type,extension:{}}));const g={fingerprints:r.dtlsParameters.fingerprints.map(_=>({hashFunction:_.algorithm,fingerprint:_.fingerprint}))},m={iceUfrag:r.iceParameters.iceUfrag,icePwd:r.iceParameters.icePwd};let A;switch(r.dtlsParameters.role){case"server":A="passive";break;case"client":A="active";break;case"auto":A="actpass"}return{dtlsParameters:g,iceParameters:m,candidates:p,rtpCapabilities:C6(r.rtpCapabilities),setup:A,cname:c}}function _d(r,i,a){const c=[],p=[];return r.forEach(g=>{let{ssrcId:m,rtx:A}=g;const _=ns(8,"track-"),S={ssrcId:m,attributes:gk({label:_,mslabel:a=a||ns(10,""),msid:"".concat(a," ").concat(_)},i&&{cname:i})};if(c.push(S),void 0!==A){const C={ssrcId:A,attributes:gk({label:_,mslabel:a,msid:"".concat(a," ").concat(_)},i&&{cname:i})};c.push(C),p.push({semantic:"FID",ssrcIds:[m,A]})}}),r.length>1&&p.push({semantic:"SIM",ssrcIds:r.map(g=>{let{ssrcId:m}=g;return m})}),{ssrcs:c,ssrcGroups:p}}function Zw(r,i){i instanceof Ga&&r.attributes.payloads.forEach(a=>{var c;const p=null===(c=a.rtpMap)||void 0===c?void 0:c.encodingName.toLowerCase();if(!p||-1===["opus","pcmu","pcma","g722"].indexOf(p))return;a.fmtp||(a.fmtp={parameters:{}}),a.fmtp.parameters.minptime="10",a.fmtp.parameters.useinbandfec="1";const g=i._encoderConfig;g&&("pcmu"!==p&&"pcma"!==p&&"g722"!==p&&(g.bitrate&&!Uo()&&(a.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*g.bitrate))),g.sampleRate&&(a.fmtp.parameters.maxplaybackrate="".concat(g.sampleRate),a.fmtp.parameters["sprop-maxcapturerate"]="".concat(g.sampleRate))),g.stereo&&(a.fmtp.parameters.stereo="1",a.fmtp.parameters["sprop-stereo"]="1"))})}function vk(r){const i=r.attributes.unrecognized.findIndex(a=>"x-google-flag"===a.attField&&"conference"===a.attValue);-1!==i&&r.attributes.unrecognized.splice(i,1)}function S6(r,i){if(!(i instanceof Ns&&i._encoderConfig&&-1===i._hints.indexOf(Fc.SCREEN_TRACK)))return;const a=i._encoderConfig;Uc().supportMinBitrate&&a.bitrateMin&&r.attributes.payloads.forEach(c=>{var p;["h264","vp8","vp9","av1"].includes((null===(p=c.rtpMap)||void 0===p?void 0:p.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-min-bitrate"]="".concat(a.bitrateMin))}),Uc().supportMinBitrate&&!i._hints.includes(Fc.LOW_STREAM)&&a.bitrateMax&&r.attributes.payloads.forEach(c=>{var p;["h264","vp8","vp9","av1"].includes((null===(p=c.rtpMap)||void 0===p?void 0:p.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-start-bitrate"]="".concat(rt("X_GOOGLE_START_BITRATE")||Math.floor(a.bitrateMax)))})}function eT(r,i,a){if(!i)return;let c,p;if("video"===r.media.mediaType?(c=a.videoExtensions,p=a.videoCodecs):(c=a.audioExtensions,p=a.audioCodecs),!0===i.tcc){const g=c.find(m=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===m.extensionName);g&&(r.attributes.extmaps.find(m=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===m.extensionName)||r.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),(m=p,A=r.attributes.payloads,A.filter(_=>!!m.find(S=>S.payloadType===_.payloadType&&!!S.rtcpFeedbacks.find(C=>"transport-cc"===C.type)))).forEach(m=>{m.rtcpFeedbacks.find(A=>"transport-cc"===A.type)||m.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(!1===i.tcc){const g=r.attributes.extmaps.findIndex(m=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===m.extensionName);-1!==g&&r.attributes.extmaps.splice(g,1),r.attributes.payloads.forEach(m=>{const A=m.rtcpFeedbacks.findIndex(_=>"transport-cc"===_.type);-1!==A&&m.rtcpFeedbacks.splice(A,1)})}var m,A;if(!0===i.remb){const g=c.find(m=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===m.extensionName);g&&(r.attributes.extmaps.find(m=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===m.extensionName)||r.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(m,A){return A.filter(_=>!!m.find(S=>S.payloadType===_.payloadType&&!!S.rtcpFeedbacks.find(C=>"goog-remb"===C.type)))}(p,r.attributes.payloads).forEach(m=>{m.rtcpFeedbacks.find(A=>"goog-remb"===A.type)||m.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(!1===i.remb){const g=r.attributes.extmaps.findIndex(m=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===m.extensionName);-1!==g&&r.attributes.extmaps.splice(g,1),r.attributes.payloads.forEach(m=>{const A=m.rtcpFeedbacks.findIndex(_=>"goog-remb"===_.type);-1!==A&&m.rtcpFeedbacks.splice(A,1)})}}function Ak(r,i,a,c,p,g){if("videoExtensions"===a||"audioExtensions"===a){const m=[];return r[a].forEach(A=>{i[a].some((_,S)=>{if(A.entry===_.entry&&A.extensionName===_.extensionName)return m.push(S),!0})?g[a].push(A):c[a].push(A)}),void i[a].forEach((A,_)=>{-1===m.indexOf(_)&&p[a].push(A)})}if("videoCodecs"===a||"audioCodecs"===a){const m=[];return r[a].forEach(A=>{i[a].some((_,S)=>{if(A.payloadType===_.payloadType&&JSON.stringify(A)===JSON.stringify(_))return m.push(S),!0})?g[a].push(A):c[a].push(A)}),void i[a].forEach((A,_)=>{-1===m.indexOf(_)&&p[a].push(A)})}}function C6(r){const{send:i,recv:a,sendrecv:c}=r;if(!c){if(!i||!a)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:i,recv:a}}let p,g;return i?(p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},p.audioCodecs=[...i.audioCodecs,...c.audioCodecs],p.videoCodecs=[...i.videoCodecs,...c.videoCodecs],p.audioExtensions=[...i.audioExtensions,...c.audioExtensions],p.videoExtensions=[...i.videoExtensions,...c.videoExtensions]):p=c,a?(g={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},g.audioCodecs=[...a.audioCodecs,...c.audioCodecs],g.videoCodecs=[...a.videoCodecs,...c.videoCodecs],g.audioExtensions=[...a.audioExtensions,...c.audioExtensions],g.videoExtensions=[...a.videoExtensions,...c.videoExtensions]):g=c,{send:p,recv:g}}!function(r,i){r.exports=(()=>{var a={8:(g,m,A)=>{A.r(m),A.d(m,{Parser:()=>cn,Printer:()=>n,parse:()=>d,print:()=>f});const _="\n",S="".concat("\r").concat(_),C=" ";let T;function D(b){return b>="0"&&b<="9"}function B(b){return b>="!"&&b<="~"}function K(b){return B(b)||b>="\x80"&&b<="\xff"}function W(b){return"!"===b||b>="#"&&b<="'"||b>="*"&&b<="+"||b>="-"&&b<="."||b>="0"&&b<="9"||b>="A"&&b<="Z"||b>="^"&&b<="~"}function Z(b){return b>="1"&&b<="9"}function de(b){return b>="A"&&b<="Z"||b>="a"&&b<="z"}function ge(b){return"d"===b||"h"===b||"m"===b||"s"===b}function Se(b){return b>"\x01"&&b<"\t"||b>"\v"&&b<"\f"||b>"\x0e"&&b<"\xff"}function De(b){return de(b)||D(b)||"+"===b||"/"===b}function it(b){return D(b)||de(b)||"+"===b||"/"===b||"-"===b||"_"===b}function Rt(b){return de(b)||D(b)||"+"===b||"/"===b}function Dt(b,y){var w=Object.keys(b);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(b);y&&(k=k.filter(function(Q){return Object.getOwnPropertyDescriptor(b,Q).enumerable})),w.push.apply(w,k)}return w}function Pt(b){for(var y=1;y<arguments.length;y++){var w=null!=arguments[y]?arguments[y]:{};y%2?Dt(Object(w),!0).forEach(function(k){On(b,k,w[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(w)):Dt(Object(w)).forEach(function(k){Object.defineProperty(b,k,Object.getOwnPropertyDescriptor(w,k))})}return b}function On(b,y,w){return y in b?Object.defineProperty(b,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):b[y]=w,b}var b;(b=T||(T={})).VERSION="v",b.ORIGIN="o",b.SESSION_NAME="s",b.INFORMATION="i",b.URI="u",b.EMAIL="e",b.PHONE="p",b.CONNECTION="c",b.BANDWIDTH="b",b.TIME="t",b.REPEAT="r",b.ZONE_ADJUSTMENTS="z",b.KEY="k",b.ATTRIBUTE="a",b.MEDIA="m";class pn{consumeText(y,w){let k=w;for(;k<y.length;){const Q=y[k];if("\0"===Q||"\r"===Q||Q===_)break;k+=1}if(k-w==0)throw new Error("Invalid text, at ".concat(y));return k}consumeUnicastAddress(y,w,k){return this.consumeTill(y,w,C)}consumeOneOrMore(y,w,k){let Q=w;for(;k(y[Q]);)Q++;if(Q-w==0)throw new Error("Invalid rule at ".concat(w,"."));return Q}consumeSpace(y,w){if(y[w]===C)return w+1;throw new Error("Invalid space at ".concat(w,"."))}consumeIP4Address(y,w){let k=w;for(let Q=0;Q<4;Q++)if(k=this.consumeDecimalUChar(y,k),3!==Q){if("."!==y[k])throw new Error("Invalid IP4 address.");k++}return k}consumeDecimalUChar(y,w){let k=w;for(let ie=0;ie<3&&D(y[k]);ie++,k++);if(k-w==0)throw new Error("Invalid decimal uchar.");const Q=parseInt(y.slice(w,k));if(Q>=0&&Q<=255)return k;throw new Error("Invalid decimal uchar")}consumeIP6Address(y,w){let k=this.consumeHexpart(y,w);return":"===y[k]&&(k+=1,k=this.consumeIP4Address(y,k)),k}consumeHexpart(y,w){let k=w;if(":"===y[k]&&":"===y[k+1]){k+=2;try{k=this.consumeHexseq(y,k)}catch{}return k}if(k=this.consumeHexseq(y,k),":"===y[k]&&":"===y[k+1]){k+=2;try{k=this.consumeHexseq(y,k)}catch{}return k}return k}consumeHexseq(y,w){let k=w;for(;k=this.consumeHex4(y,k),":"===y[k]&&":"!==y[k+1];)k+=1;return k}consumeHex4(y,w){let k=0;for(;k<4;k++)if(!((Q=y[w+k])>="0"&&Q<="9"||Q>="a"&&Q<="f"||Q>="A"&&Q<="F")){if(0===k)throw new Error("Invalid hex 4");break}var Q;return w+k}consumeFQDN(y,w){let k=w;for(;D(y[k])||de(y[k])||"-"===y[k]||"."===y[k];)k+=1;if(k-w<4)throw new Error("Invalid FQDN");return k}consumeExtnAddr(y,w){return this.consumeOneOrMore(y,w,K)}consumeMulticastAddress(y,w,k){switch(k){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(y,w);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(y,w);default:try{return this.consumeFQDN(y,w)}catch{return this.consumeExtnAddr(y,w)}}}consumeIP6MulticastAddress(y,w){const k=this.consumeHexpart(y,w);return"/"===y[k]?this.consumeInteger(y,k+1):k}consumeIP4MulticastAddress(y,w){let k=w+3;const Q=y.slice(w,k),ie=parseInt(Q);if(ie<224||ie>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Ie=0;Ie<3;Ie++){if("."!==y[k])throw new Error("Invalid IP4 multicast address.");k+=1,k=this.consumeDecimalUChar(y,k)}return"/"===y[k]&&(k+=1),k=this.consumeTTL(y,k),"/"===y[k]&&(k=this.consumeInteger(y,k)),k}consumeInteger(y,w){if(!Z(y[w]))throw new Error("Invalid integer.");for(w+=1;D(y[w]);)w+=1;return w}consumeTTL(y,w){if("0"===y[w])return w+1;if(!Z(y[w]))throw new Error("Invalid TTL.");w+=1;for(let k=0;k<2&&D(y[w]);k++)w+=1;return w}consumeToken(y,w){return this.consumeOneOrMore(y,w,W)}consumeTime(y,w){let k=w;if("0"===y[k])return k+1;for(Z(y[k])&&(k+=1);D(y[k]);)k++;if(k-w<10)throw new Error("Invalid time");return k}consumeAddress(y,w){return this.consumeTill(y,w,C)}consumeTypedTime(y,w){let k=w;return k=this.consumeOneOrMore(y,k,D),ge(y[k])?k+1:k}consumeRepeatInterval(y,w){if(!Z(y[w]))throw new Error("Invalid repeat interval");for(w+=1;D(y[w]);)w+=1;return ge(y[w])&&(w+=1),w}consumePort(y,w){return this.consumeOneOrMore(y,w,D)}consume(y,w,k){for(let Q=0;Q<k.length;Q++){if(w+Q>=y.length)throw new Error("consume exceeding value length");if(y[w+Q]!==k[Q])throw new Error("consume ".concat(k," failed at ").concat(Q))}return w+k.length}consumeTill(y,w,k){let Q=w;for(;Q<y.length&&("string"!=typeof k||y[Q]!==k)&&("function"!=typeof k||!k(y[Q]));)Q++;return Q}}class cn extends pn{constructor(){super(),On(this,"records",[]),On(this,"currentLine",0)}parse(y){const w=this.probeEOL(y);this.records=y.split(w).filter(ci=>!!ci.trim()).map(this.parseLine),this.currentLine=0;const k=this.parseVersion(),Q=this.parseOrigin(),ie=this.parseSessionName(),Ie=this.parseInformation(),ke=this.parseUri(),je=this.parseEmail(),at=this.parsePhone(),Vt=this.parseConnection(),Qt=this.parseBandWidth(),rn=this.parseTimeFields(),Ut=this.parseKey(),Bn=this.parseSessionAttribute(),ai=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:k,origin:Q,sessionName:ie,information:Ie,uri:ke,emails:je,phones:at,connection:Vt,bandwidths:Qt,timeFields:rn,key:Ut,attributes:Bn,mediaDescriptions:ai}}getCurrentRecord(){const y=this.records[this.currentLine];if(!y)throw new Error("Record doesn't exit.");return y}probeEOL(y){for(let w=0;w<y.length;w++)if(y[w]===_)return"\r"===y[w-1]?S:_;throw new Error("Invalid newline character.")}parseLine(y,w){if(y.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const k=y[0];if("="!==y[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:k,value:y.slice(2),line:w,cur:0}}parseSessionAttribute(){const y=new Ve;for(;this.currentLine<this.records.length;){const w=this.getCurrentRecord();if(w.type!==T.ATTRIBUTE)break;const k={attField:this.extractOneOrMore(w,Q=>W(Q)&&":"!==Q),_cur:0};":"===w.value[w.cur]&&(w.cur+=1,k.attValue=this.extractOneOrMore(w,Se)),y.parse(k),this.currentLine++}return y.digest()}parseMediaAttributes(y){const w=new nt(y);for(;this.currentLine<this.records.length;){const k=this.getCurrentRecord();if(k.type!==T.ATTRIBUTE)break;const Q={attField:this.extractOneOrMore(k,ie=>W(ie)&&":"!==ie),_cur:0};":"===k.value[k.cur]&&(k.cur+=1,Q.attValue=this.extractOneOrMore(k,Se)),w.parse(Q),this.currentLine++}return w.digest()}parseKey(){const y=this.getCurrentRecord();if(y.type===T.KEY){if("prompt"===y.value||"clear:"===y.value||"base64:"===y.value||"uri:"===y.value)return y.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const y=this.getCurrentRecord();if(y.type===T.ZONE_ADJUSTMENTS){const w=[];for(;;)try{const k=this.extract(y,this.consumeTime);this.consumeSpaceForRecord(y);let Q=!1;"-"===y.value[y.cur]&&(Q=!0,y.cur+=1);const ie=this.extract(y,this.consumeTypedTime);w.push({time:k,typedTime:ie,back:Q})}catch{break}if(0===w.length)throw new Error("Invalid zone adjustments");return this.currentLine++,w}return[]}parseRepeat(){const y=[];for(;;){const w=this.getCurrentRecord();if(w.type!==T.REPEAT)break;{const k=this.extract(w,this.consumeRepeatInterval),Q=this.parseTypedTime(w);y.push({repeatInterval:k,typedTimes:Q}),this.currentLine++}}return y}parseTypedTime(y){const w=[];for(;;)try{this.consumeSpaceForRecord(y),w.push(this.extract(y,this.consumeTypedTime))}catch{break}if(0===w.length)throw new Error("Invalid typed time.");return w}parseTime(){const y=this.getCurrentRecord(),w=this.extract(y,this.consumeTime);this.consumeSpaceForRecord(y);const k=this.extract(y,this.consumeTime);return this.currentLine++,{startTime:w,stopTime:k}}parseBandWidth(){const y=[];for(;this.currentLine<this.records.length;){const w=this.getCurrentRecord();if(w.type!==T.BANDWIDTH)break;{const k=this.extractOneOrMore(w,W);if(":"!==w.value[w.cur])throw new Error("Invalid bandwidth field.");w.cur++;const Q=this.extractOneOrMore(w,D);y.push({bwtype:k,bandwidth:Q}),this.currentLine++}}return y}parseVersion(){const y=this.getCurrentRecord();if(y.type!==T.VERSION)throw new Error("first sdp record must be version");const w=y.value.slice(0,this.consumeOneOrMore(y.value,0,D));if(w.length!==y.value.length)throw new Error('invalid proto version, "v='.concat(y.value,'"'));return this.currentLine++,w}parseOrigin(){const y=this.getCurrentRecord();if(y.type!==T.ORIGIN)throw new Error("second line of sdp must be origin");const w=this.extractOneOrMore(y,K);this.consumeSpaceForRecord(y);const k=this.extractOneOrMore(y,D);this.consumeSpaceForRecord(y);const Q=this.extractOneOrMore(y,D);this.consumeSpaceForRecord(y);const ie=this.extractOneOrMore(y,W);this.consumeSpaceForRecord(y);const Ie=this.extractOneOrMore(y,W);this.consumeSpaceForRecord(y);const ke=this.extract(y,this.consumeUnicastAddress);return this.currentLine++,{username:w,sessId:k,sessVersion:Q,nettype:ie,addrtype:Ie,unicastAddress:ke}}parseSessionName(){const y=this.getCurrentRecord();if(y.type===T.SESSION_NAME){const w=this.extract(y,this.consumeText);return this.currentLine++,w}}parseInformation(){const y=this.getCurrentRecord();if(y.type!==T.INFORMATION)return;const w=this.extract(y,this.consumeText);return this.currentLine++,w}parseUri(){const y=this.getCurrentRecord();if(y.type===T.URI)return this.currentLine++,y.value}parseEmail(){const y=[];for(;;){const w=this.getCurrentRecord();if(w.type!==T.EMAIL)break;y.push(w.value),this.currentLine++}return y}parsePhone(){const y=[];for(;;){const w=this.getCurrentRecord();if(w.type!==T.PHONE)break;y.push(w.value),this.currentLine++}return y}parseConnection(){const y=this.getCurrentRecord();if(y.type===T.CONNECTION){const w=this.extractOneOrMore(y,W);this.consumeSpaceForRecord(y);const k=this.extractOneOrMore(y,W);this.consumeSpaceForRecord(y);const Q=this.extract(y,this.consumeAddress);return this.currentLine++,{nettype:w,addrtype:k,address:Q}}}parseMedia(){const y=this.getCurrentRecord(),w=this.extract(y,this.consumeToken);this.consumeSpaceForRecord(y);let k=this.extract(y,this.consumePort);"/"===y.value[y.cur]&&(y.cur+=1,k+=this.extract(y,this.consumeInteger)),this.consumeSpaceForRecord(y);const Q=[];for(Q.push(this.extract(y,this.consumeToken));"/"===y.value[y.cur];)y.cur+=1,Q.push(this.extract(y,this.consumeToken));if(0===Q.length)throw new Error("Invalid proto");const ie=this.parseFmt(y);return this.currentLine++,{mediaType:w,port:k,protos:Q,fmts:ie}}parseTimeFields(){const y=[];for(;this.getCurrentRecord().type===T.TIME;){const w=this.parseTime(),k=this.parseRepeat(),Q=this.parseZone();y.push({time:w,repeats:k,zones:Q})}return y}parseMediaDescription(){const y=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===T.MEDIA;){const w=this.parseMedia(),k=this.parseInformation(),Q=this.parseConnections(),ie=this.parseBandWidth(),Ie=this.parseKey(),ke=this.parseMediaAttributes(w);y.push({media:w,information:k,connections:Q,bandwidths:ie,key:Ie,attributes:ke})}return y}parseConnections(){const y=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===T.CONNECTION;)y.push(this.parseConnection());return y}parseFmt(y){const w=[];for(;;)try{this.consumeSpaceForRecord(y),w.push(this.extract(y,this.consumeToken))}catch{break}if(0===w.length)throw new Error("Invalid fmts");return w}extract(y,w,...k){const Q=w.call(this,y.value,y.cur,...k),ie=y.value.slice(y.cur,Q);return y.cur=Q,ie}extractOneOrMore(y,w){const k=this.consumeOneOrMore(y.value,y.cur,w),Q=y.value.slice(y.cur,k);return y.cur=k,Q}consumeSpaceForRecord(y){if(y.value[y.cur]!==C)throw new Error("Invalid space at ".concat(y.cur,"."));y.cur+=1}}class bt extends pn{constructor(...y){super(...y),On(this,"attributes",void 0),On(this,"digested",!1)}extractOneOrMore(y,w,k){const Q=this.consumeOneOrMore(y.attValue,y._cur,w),ie=y.attValue.slice(y._cur,Q),[Ie,ke]=k||[];if("number"==typeof Ie&&ie.length<Ie)throw new Error("error in length, should be more or equal than ".concat(Ie," characters."));if("number"==typeof ke&&ie.length>ke)throw new Error("error in length, should be less or equal than ".concat(ke," characters."));return y._cur=Q,ie}consumeAttributeSpace(y){if(y.attValue[y._cur]!==C)throw new Error("Invalid space at ".concat(y._cur,"."));y._cur+=1}extract(y,w,...k){if(!y.attValue)throw new Error("Nothing to extract from attValue.");const Q=w.call(this,y.attValue,y._cur,...k),ie=y.attValue.slice(y._cur,Q);return y._cur=Q,ie}atEnd(y){if(!y.attValue)throw new Error;return y._cur>=y.attValue.length}peekChar(y){if(!y.attValue)throw new Error;return y.attValue[y._cur]}peek(y,w){if(!y.attValue)throw new Error;for(let k=0;k<w.length;k++)if(w[k]!==y.attValue[y._cur+k])return!1;return!0}parseIceUfrag(y){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(y,De,[4,256])}parseIcePwd(y){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(y,De,[22,256])}parseIceOptions(y){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const w=[];for(;!this.atEnd(y);){w.push(this.extractOneOrMore(y,De));try{this.consumeAttributeSpace(y)}catch(k){if(this.atEnd(y))break;throw k}}this.attributes.iceOptions=w}parseFingerprint(y){const w=this.extract(y,this.consumeToken);this.consumeAttributeSpace(y);const k=this.extract(y,this.consumeTill);this.attributes.fingerprints.push({hashFunction:w,fingerprint:k})}parseExtmap(y){const w=this.extractOneOrMore(y,D);let k;"/"===this.peekChar(y)&&(this.extract(y,this.consume,"/"),k=this.extract(y,this.consumeToken)),this.consumeAttributeSpace(y);const Q=this.extract(y,this.consumeTill,C),ie=Pt(Pt({entry:parseInt(w,10)},k&&{direction:k}),{},{extensionName:Q});this.peekChar(y)===C&&(this.consumeAttributeSpace(y),ie.extensionAttributes=this.extract(y,this.consumeTill)),this.attributes.extmaps.push(ie)}parseSetup(y){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const w=this.extract(y,this.consumeTill);if("active"!==w&&"passive"!==w&&"actpass"!==w&&"holdconn"!==w)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=w}}class Ve extends bt{constructor(...y){super(...y),On(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(y){if(this.digested)throw new Error("already digested");try{switch(y.attField){case"group":this.parseGroup(y);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(y);break;case"ice-pwd":this.parseIcePwd(y);break;case"ice-options":this.parseIceOptions(y);break;case"fingerprint":this.parseFingerprint(y);break;case"setup":this.parseSetup(y);break;case"tls-id":this.parseTlsId(y);break;case"identity":this.parseIdentity(y);break;case"extmap":this.parseExtmap(y);break;case"msid-semantic":this.parseMsidSemantic(y);break;default:y.ignored=!0,this.attributes.unrecognized.push(y)}}catch(w){throw console.error("parsing session attribute ".concat(y.attField,' error, "a=').concat(y.attField,":").concat(y.attValue,'"')),w}if(!y.ignored&&y.attValue&&!this.atEnd(y))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(y){const w=this.extract(y,this.consumeToken),k=[];for(;!this.atEnd(y)&&this.peekChar(y)===C;)this.consumeAttributeSpace(y),k.push(this.extract(y,this.consumeToken));this.attributes.groups.push({semantic:w,identificationTag:k})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(y){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(y,it)}parseIdentity(y){const w=this.extractOneOrMore(y,Rt),k=[];for(;!this.atEnd(y)&&this.peekChar(y)===C;){this.consumeAttributeSpace(y);const Q=this.extract(y,this.consumeToken);this.extract(y,this.consume,"=");const ie=this.extractOneOrMore(y,Ie=>Ie!==C&&Se(Ie));k.push({name:Q,value:ie})}this.attributes.identities.push({assertionValue:w,extensions:k})}parseMsidSemantic(y){this.peekChar(y)===C&&this.consumeAttributeSpace(y);const w={semantic:this.extract(y,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(y)}catch{break}if("*"===this.peekChar(y)){this.extract(y,this.consume,"*"),w.applyForAll=!0;break}{const k=this.extract(y,this.consumeTill,C);w.identifierList.push(k)}}this.attributes.msidSemantic=w}}class nt extends bt{constructor(y){super(),On(this,"attributes",void 0),-1!==y.protos.indexOf("RTP")||y.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(y){if(this.digested)throw new Error("already digested");try{switch(y.attField){case"extmap":this.parseExtmap(y);break;case"setup":this.parseSetup(y);break;case"ice-ufrag":this.parseIceUfrag(y);break;case"ice-pwd":this.parseIcePwd(y);break;case"ice-options":this.parseIceOptions(y);break;case"candidate":this.parseCandidate(y);break;case"remote-candidate":this.parseRemoteCandidate(y);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(y);break;case"rtpmap":this.parseRtpmap(y);break;case"ptime":this.parsePtime(y);break;case"maxptime":this.parseMaxPtime(y);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(y);break;case"ssrc":this.parseSSRC(y);break;case"fmtp":this.parseFmtp(y);break;case"rtcp-fb":this.parseRtcpFb(y);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(y);break;case"mid":this.parseMid(y);break;case"msid":this.parseMsid(y);break;case"imageattr":this.parseImageAttr(y);break;case"rid":this.parseRid(y);break;case"simulcast":this.parseSimulcast(y);break;case"sctp-port":this.parseSctpPort(y);break;case"max-message-size":this.parseMaxMessageSize(y);break;case"ssrc-group":this.parseSSRCGroup(y);break;default:y.ignored=!0,this.attributes.unrecognized.push(y)}}catch(w){throw console.error("parsing media attribute ".concat(y.attField,' error, "a=').concat(y.attField,":").concat(y.attValue,'"')),w}if(!y.ignored&&y.attValue&&!this.atEnd(y))throw new Error("attribute parsing error")}parseCandidate(y){const w=this.extractOneOrMore(y,De,[1,32]);this.consumeAttributeSpace(y);const k=this.extractOneOrMore(y,D,[1,5]);this.consumeAttributeSpace(y);const Q=this.extract(y,this.consumeToken);this.consumeAttributeSpace(y);const ie=this.extractOneOrMore(y,D,[1,10]);this.consumeAttributeSpace(y);const Ie=this.extract(y,this.consumeAddress);this.consumeAttributeSpace(y);const ke=this.extract(y,this.consumePort);this.consumeAttributeSpace(y),this.extract(y,this.consume,"typ"),this.consumeAttributeSpace(y);const je={foundation:w,componentId:k,transport:Q,priority:ie,connectionAddress:Ie,port:ke,type:this.extract(y,this.consumeToken),extension:{}};for(this.peek(y," raddr")&&(this.extract(y,this.consume," raddr"),this.consumeAttributeSpace(y),je.relAddr=this.extract(y,this.consumeAddress)),this.peek(y," rport")&&(this.extract(y,this.consume," rport"),this.consumeAttributeSpace(y),je.relPort=this.extract(y,this.consumePort));this.peekChar(y)===C;){this.consumeAttributeSpace(y);const at=this.extract(y,this.consumeToken);this.consumeAttributeSpace(y),je.extension[at]=this.extractOneOrMore(y,B)}this.attributes.candidates.push(je)}parseRemoteCandidate(y){const w=[];for(;;){const k=this.extractOneOrMore(y,D,[1,5]);this.consumeAttributeSpace(y);const Q=this.extract(y,this.consumeAddress);this.consumeAttributeSpace(y);const ie=this.extract(y,this.consumePort);w.push({componentId:k,connectionAddress:Q,port:ie});try{this.consumeAttributeSpace(y)}catch{break}}this.attributes.remoteCandidatesList.push(w)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(y){const w=this.extract(y,this.consumeToken);this.consumeAttributeSpace(y);const k=this.extract(y,this.consumeTill,"/");this.extract(y,this.consume,"/");const Q={encodingName:k,clockRate:this.extractOneOrMore(y,D)};this.atEnd(y)||"/"!==this.peekChar(y)||(this.extract(y,this.consume,"/"),Q.encodingParameters=parseInt(this.extract(y,this.consumeTill),10));const ie=this.attributes.payloads.find(Ie=>Ie.payloadType===parseInt(w,10));ie?ie.rtpMap=Q:this.attributes.payloads.push({payloadType:parseInt(w,10),rtpMap:Q,rtcpFeedbacks:[]})}parsePtime(y){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(y,this.consumeTill)}parseMaxPtime(y){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(y,this.consumeTill)}parseDirection(y){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=y.attField}parseSSRC(y){const w=this.extractOneOrMore(y,D);this.consumeAttributeSpace(y);const k=this.extract(y,this.consumeTill,":");let Q;":"===this.peekChar(y)&&(this.extract(y,this.consume,":"),Q=this.extract(y,this.consumeTill));const ie=this.attributes.ssrcs.find(Ie=>Ie.ssrcId===parseInt(w,10));ie?ie.attributes[k]=Q:this.attributes.ssrcs.push({ssrcId:parseInt(w,10),attributes:{[k]:Q}})}parseFmtp(y){const w=this.extract(y,this.consumeTill,C);this.consumeAttributeSpace(y);const k=this.extract(y,this.consumeTill),Q={};k.split(";").forEach(Ie=>{let[ke,je]=Ie.split("=");ke=ke.trim(),je="string"==typeof je?je.trim():je,"string"==typeof ke&&ke.length>0&&(Q[ke]=je)});const ie=this.attributes.payloads.find(Ie=>Ie.payloadType===parseInt(w,10));ie?ie.fmtp={parameters:Q}:this.attributes.payloads.push({payloadType:parseInt(w,10),rtcpFeedbacks:[],fmtp:{parameters:Q}})}parseFmtParameters(y){const w={},k=this.extract(y,this.consumeTill,"=");y._cur++;const Q=this.extract(y,this.consumeTill,";");for(w[k]=Q;";"===y.attValue[y._cur];){const ie=this.extract(y,this.consumeTill,"=");y._cur++;const Ie=this.extract(y,this.consumeTill,";");w[ie]=Ie}return w}parseRtcpFb(y){let w="";w="*"===this.peekChar(y)?this.extract(y,this.consume,"*"):this.extract(y,this.consumeTill,C),this.consumeAttributeSpace(y);const k=this.extract(y,this.consumeTill,C);let Q;if("trr-int"===k)Q={type:k,interval:this.extract(y,this.consumeTill)};else{const ie={type:k};this.peekChar(y)===C&&(this.consumeAttributeSpace(y),ie.parameter=this.extract(y,this.consumeToken),this.peekChar(y)===C&&(ie.additional=this.extract(y,this.consumeTill))),Q=ie}if("*"===w)this.attributes.rtcpFeedbackWildcards.push(Q);else{const ie=this.attributes.payloads.find(Ie=>Ie.payloadType===parseInt(w,10));ie?ie.rtcpFeedbacks.push(Q):this.attributes.payloads.push({payloadType:parseInt(w,10),rtcpFeedbacks:[Q]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(y){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const w={port:this.extract(y,this.consumePort)};this.peekChar(y)===C&&(this.consumeAttributeSpace(y),w.netType=this.extractOneOrMore(y,W),this.consumeAttributeSpace(y),w.addressType=this.extractOneOrMore(y,W),this.consumeAttributeSpace(y),w.address=this.extract(y,this.consumeAddress)),this.attributes.rtcp=w}parseMsid(y){const w={id:this.extractOneOrMore(y,W,[1,64])};this.peekChar(y)===C&&(this.consumeAttributeSpace(y),w.appdata=this.extractOneOrMore(y,W,[1,64])),this.attributes.msids.push(w)}parseImageAttr(y){this.attributes.imageattr.push(y.attValue)}parseRid(y){const w=this.extractOneOrMore(y,Q=>de(Q)||D(Q)||"_"===Q||"-"===Q);this.consumeAttributeSpace(y);const k={id:w,direction:this.extract(y,this.consumeToken),params:[]};if(this.peekChar(y)===C){if(this.consumeAttributeSpace(y),this.peek(y,"pt=")){this.extract(y,this.consume,"pt=");const Q=[];for(;;){const ie=this.extract(y,this.consumeToken);Q.push(ie);try{this.extract(y,this.consume,",")}catch{break}}k.payloads=Q,this.peekChar(y)===C&&this.extract(y,this.consume,C)}for(;;){const Q=this.extract(y,this.consumeToken);switch(Q){case"depend":{const ie={type:Q,rids:this.extract(y,this.consume,"=").split(",")};k.params.push(ie);break}default:{const ie={type:Q};"="===this.peekChar(y)&&(this.extract(y,this.consume,"="),ie.val=this.extract(y,this.consumeTill,";")),k.params.push(ie)}}try{this.extract(y,this.consume,";")}catch{break}}}this.attributes.rids.push(k)}parseSimulcast(y){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=y.attValue,this.extract(y,this.consumeTill)}parseSctpPort(y){this.attributes.sctpPort=this.extractOneOrMore(y,D,[1,5])}parseMaxMessageSize(y){this.attributes.maxMessageSize=this.extractOneOrMore(y,D,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(y){this.attributes.mid=this.extract(y,this.consumeToken)}parseSSRCGroup(y){const w=this.extract(y,this.consumeToken),k=[];for(;;)try{this.consumeAttributeSpace(y);const Q=this.extract(y,this.consumeInteger);k.push(parseInt(Q,10))}catch{break}this.attributes.ssrcGroups.push({semantic:w,ssrcIds:k})}}function At(b,y,w){return y in b?Object.defineProperty(b,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):b[y]=w,b}class n{constructor(){At(this,"eol",S)}print(y,w){let k="";return w&&(this.eol=w),k+=this.printVersion(y.version),k+=this.printOrigin(y.origin),k+=this.printSessionName(y.sessionName),k+=this.printInformation(y.information),k+=this.printUri(y.uri),k+=this.printEmail(y.emails),k+=this.printPhone(y.phones),k+=this.printConnection(y.connection),k+=this.printBandwidth(y.bandwidths),k+=this.printTimeFields(y.timeFields),k+=this.printKey(y.key),k+=this.printSessionAttributes(y.attributes),k+=this.printMediaDescription(y.mediaDescriptions),k}printVersion(y){return"v=".concat(y).concat(this.eol)}printOrigin(y){return"o=".concat(y.username," ").concat(y.sessId," ").concat(y.sessVersion," ").concat(y.nettype," ").concat(y.addrtype," ").concat(y.unicastAddress).concat(this.eol)}printSessionName(y){return y?"s=".concat(y).concat(this.eol):""}printInformation(y){return y?"i=".concat(y).concat(this.eol):""}printUri(y){return y?"u=".concat(y).concat(this.eol):""}printEmail(y){let w="";for(const k of y)w+="e=".concat(k).concat(this.eol);return w}printPhone(y){let w="";for(const k of y)w+="e=".concat(k).concat(this.eol);return w}printConnection(y){return y?"c=".concat(y.nettype," ").concat(y.addrtype," ").concat(y.address).concat(this.eol):""}printBandwidth(y){let w="";for(const k of y)w+="b=".concat(k.bwtype,":").concat(k.bandwidth).concat(this.eol);return w}printTimeFields(y){let w="";for(const k of y){w+="t=".concat(k.time.startTime," ").concat(k.time.startTime).concat(this.eol);for(const Q of k.repeats)w+="r=".concat(Q.repeatInterval," ").concat(Q.typedTimes.join(" ")).concat(this.eol);k.zoneAdjustments&&(w+="z=",w+="z=".concat(k.zoneAdjustments.map(Q=>"".concat(Q.time," ").concat(Q.back?"-":""," ").concat(Q.typedTime)).join(" ")).concat(this.eol),w+=this.eol)}return w}printKey(y){return y?"k=".concat(y).concat(this.eol):""}printAttributes(y){let w="";for(const k of y)w+="a=".concat(k.attField).concat(k.attValue?":".concat(k.attValue):"").concat(this.eol);return w}printMediaDescription(y){let w="";for(const k of y)w+=this.printMedia(k.media),w+=this.printInformation(k.information),w+=this.printConnections(k.connections),w+=this.printBandwidth(k.bandwidths),w+=this.printKey(k.key),w+=this.printMediaAttributes(k);return w}printConnections(y){let w="";for(const k of y)w+=this.printConnection(k);return w}printMedia(y){return"m=".concat(y.mediaType," ").concat(y.port," ").concat(y.protos.join("/")," ").concat(y.fmts.join(" ")).concat(this.eol)}printSessionAttributes(y){return new e(this.eol).print(y)}printMediaAttributes(y){return new o(this.eol).print(y)}}class t{constructor(y){At(this,"eol",void 0),this.eol=y}printIceUfrag(y){return void 0===y?"":"a=ice-ufrag:".concat(y).concat(this.eol)}printIcePwd(y){return void 0===y?"":"a=ice-pwd:".concat(y).concat(this.eol)}printIceOptions(y){return void 0===y?"":"a=ice-options:".concat(y.join(C)).concat(this.eol)}printFingerprints(y){return y.length>0?y.map(w=>"a=fingerprint:".concat(w.hashFunction).concat(C).concat(w.fingerprint)).join(this.eol)+this.eol:""}printExtmap(y){return y.map(w=>"a=extmap:".concat(w.entry).concat(w.direction?"/".concat(w.direction):"").concat(C).concat(w.extensionName).concat(w.extensionAttributes?"".concat(C).concat(w.extensionAttributes):"").concat(this.eol)).join("")}printSetup(y){return void 0===y?"":"a=setup:".concat(y).concat(this.eol)}printUnrecognized(y){return y.map(w=>"a=".concat(w.attField).concat(w.attValue?":".concat(w.attValue):"").concat(this.eol)).join("")}}class e extends t{print(y){let w="";return w+=this.printGroups(y.groups),w+=this.printMsidSemantic(y.msidSemantic),w+=this.printIceLite(y.iceLite),w+=this.printIceUfrag(y.iceUfrag),w+=this.printIcePwd(y.icePwd),w+=this.printIceOptions(y.iceOptions),w+=this.printFingerprints(y.fingerprints),w+=this.printSetup(y.setup),w+=this.printTlsId(y.tlsId),w+=this.printIdentity(y.identities),w+=this.printExtmap(y.extmaps),w+=this.printUnrecognized(y.unrecognized),w}printGroups(y){let w="";return y.length>0&&(w+=y.map(k=>"a=group:".concat(k.semantic).concat(k.identificationTag.map(Q=>"".concat(C).concat(Q)).join("")).concat(this.eol)).join("")),w}printIceLite(y){return void 0===y?"":"a=ice-lite"+this.eol}printTlsId(y){return y?"a=tls-id:".concat(y).concat(this.eol):""}printIdentity(y){return 0===y.length?"":y.map(w=>"a=identity:".concat(w.assertionValue).concat(w.extensions.map(k=>"".concat(C).concat(k.name).concat(k.value?"=".concat(k.value):"")))).join(this.eol)+this.eol}printMsidSemantic(y){if(!y)return"";let w="a=msid-semantic:".concat(y.semantic);return y.applyForAll?w+="".concat(C,"*"):y.identifierList.length>0&&(w+=y.identifierList.map(k=>"".concat(C).concat(k))),w+this.eol}}class o extends t{print(y){const w=y.attributes;let k="";return k+=this.printRTCP(w.rtcp),k+=this.printIceUfrag(w.iceUfrag),k+=this.printIcePwd(w.icePwd),k+=this.printIceOptions(w.iceOptions),k+=this.printCandidates(w.candidates),k+=this.printRemoteCandidatesList(w.remoteCandidatesList),k+=this.printEndOfCandidates(w.endOfCandidates),k+=this.printFingerprints(w.fingerprints),k+=this.printSetup(w.setup),k+=this.printMid(w.mid),k+=this.printExtmap(w.extmaps),k+=this.printRTPRelated(w),k+=this.printPtime(w.ptime),k+=this.printMaxPtime(w.maxPtime),k+=this.printDirection(w.direction),k+=this.printSSRCGroups(w.ssrcGroups),k+=this.printSSRC(w.ssrcs),k+=this.printRTCPMux(w.rtcpMux),k+=this.printRTCPMuxOnly(w.rtcpMuxOnly),k+=this.printRTCPRsize(w.rtcpRsize),k+=this.printMSId(w.msids),k+=this.printImageattr(w.imageattr),k+=this.printRid(w.rids),k+=this.printSimulcast(w.simulcast),k+=this.printSCRPPort(w.sctpPort),k+=this.printMaxMessageSize(w.maxMessageSize),k+=this.printUnrecognized(w.unrecognized),k}printCandidates(y){return y.map(w=>"a=candidate:".concat(w.foundation).concat(C).concat(w.componentId).concat(C).concat(w.transport).concat(C).concat(w.priority).concat(C).concat(w.connectionAddress).concat(C).concat(w.port).concat(C,"typ").concat(C).concat(w.type).concat(w.relAddr?"".concat(C,"raddr").concat(C).concat(w.relAddr):"").concat(w.relPort?"".concat(C,"rport").concat(C).concat(w.relPort):"").concat(Object.keys(w.extension).map(k=>"".concat(C).concat(k).concat(C).concat(w.extension[k])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(y){return y.map(w=>"a=remote-candidates:".concat(w.join(C)).concat(this.eol)).join("")}printEndOfCandidates(y){return void 0===y?"":"a=end-of-candidates"+this.eol}printRTPRelated(y){if(!y.payloads)return"";const w=y.payloads;let k="";k+=y.rtcpFeedbackWildcards.map(Q=>this.printRTCPFeedback("*",Q)).join("");for(const Q of w)k+=this.printRtpMap(Q.payloadType,Q.rtpMap),k+=this.printFmtp(Q.payloadType,Q.fmtp),k+=Q.rtcpFeedbacks.map(ie=>this.printRTCPFeedback(Q.payloadType,ie)).join("");return k}printFmtp(y,w){if(!w)return"";const k=Object.keys(w.parameters);return 1===k.length&&void 0===w.parameters[k[0]]?"a=fmtp:".concat(y).concat(C).concat(k[0]).concat(this.eol):"a=fmtp:".concat(y).concat(C).concat(Object.keys(w.parameters).map(Q=>"".concat(Q,"=").concat(w.parameters[Q])).join(";")).concat(this.eol)}printRtpMap(y,w){return w?"a=rtpmap:".concat(y).concat(C).concat(w.encodingName,"/").concat(w.clockRate).concat(w.encodingParameters?"/".concat(w.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(y,w){let k="a=rtcp-fb:".concat(y).concat(C),Q=w;return"trr-int"===Q.type?k+="ttr-int".concat(C).concat(Q.interval):(k+="".concat(Q.type),Q.parameter&&(k+="".concat(C).concat(Q.parameter),Q.additional&&(k+="".concat(C).concat(Q.additional)))),k+this.eol}printPtime(y){return void 0===y?"":"a=ptime:".concat(y).concat(this.eol)}printMaxPtime(y){return void 0===y?"":"a=maxptime:".concat(y).concat(this.eol)}printDirection(y){return void 0===y?"":"a=".concat(y).concat(this.eol)}printSSRC(y){return y.map(w=>Object.keys(w.attributes).map(k=>"a=ssrc:".concat(w.ssrcId.toString(10)).concat(C).concat(k).concat(w.attributes[k]?":".concat(w.attributes[k]):"").concat(this.eol)).join("")).join("")}printRTCPMux(y){return void 0===y?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(y){return void 0===y?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(y){return void 0===y?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(y){if(void 0===y)return"";let w="a=rtcp:".concat(y.port);return y.netType&&(w+="".concat(C).concat(y.netType)),y.addressType&&(w+="".concat(C).concat(y.addressType)),y.address&&(w+="".concat(C).concat(y.address)),w+this.eol}printMSId(y){return y.map(w=>"a=msid:".concat(w.id).concat(w.appdata?"".concat(C).concat(w.appdata):"").concat(this.eol)).join("")}printImageattr(y){return y.map(w=>"a=imageattr:".concat(w).concat(this.eol)).join("")}printRid(y){return y.map(w=>{let k="a=rid:".concat(w.id).concat(C).concat(w.direction);return w.payloads&&(k+="".concat(C,"pt=").concat(w.payloads.join(","))),w.params.length>0&&(k+="".concat(C).concat(w.params.map(Q=>"depend"===Q.type?"depend=".concat(Q.rids.join(",")):"".concat(Q.type,"=").concat(Q.val)).join(";"))),k+this.eol}).join("")}printSimulcast(y){return void 0===y?"":"a=simulcast:".concat(y).concat(this.eol)}printSCRPPort(y){return void 0===y?"":"a=sctp-port:".concat(y).concat(this.eol)}printMaxMessageSize(y){return void 0===y?"":"a=max-message-size:".concat(y)}printMid(y){return void 0===y?"":"a=mid:".concat(y).concat(this.eol)}printSSRCGroups(y){return y.map(w=>"a=ssrc-group:".concat(w.semantic).concat(w.ssrcIds.map(k=>"".concat(C).concat(k.toString(10))).join("")).concat(this.eol)).join("")}}function d(b){return(new cn).parse(b)}function f(b,y){return(new n).print(b,y)}}},c={};function p(g){if(c[g])return c[g].exports;var m=c[g]={exports:{}};return a[g](m,m.exports,p),m.exports}return p.d=(g,m)=>{for(var A in m)p.o(m,A)&&!p.o(g,A)&&Object.defineProperty(g,A,{enumerable:!0,get:m[A]})},p.o=(g,m)=>Object.prototype.hasOwnProperty.call(g,m),p.r=g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},p(8)})()}(wl);class I6{constructor(i){q(this,"sessionDesc",void 0),q(this,"localCapabilities",void 0),q(this,"rtpCapabilities",void 0),q(this,"candidates",void 0),q(this,"iceParameters",void 0),q(this,"dtlsParameters",void 0),q(this,"setup",void 0),q(this,"currentMidIndex",void 0),q(this,"cname",void 0),i=Wa(i);const{remoteIceParameters:a,remoteDtlsParameters:c,candidates:p,remoteRTPCapabilities:g,remoteSetup:m,localCapabilities:A,sdkCodec:_,cname:S}=i,C=wl.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=g,this.candidates=p,this.iceParameters=a,this.dtlsParameters=c,this.setup=m,this.localCapabilities=A,this.cname=S;for(let T=0;T<C.mediaDescriptions.length;T++){const D=C.mediaDescriptions[T];if(D.attributes.iceUfrag=a.iceUfrag,D.attributes.icePwd=a.icePwd,D.attributes.fingerprints=c.fingerprints,D.attributes.candidates=p,D.attributes.setup=m,"video"===D.media.mediaType){D.media.fmts=g.videoCodecs.map(K=>K.payloadType.toString(10));const B=g.videoCodecs.filter(K=>{var W;return null===(W=K.rtpMap)||void 0===W?void 0:W.encodingName.toLowerCase().includes(_)});if(0===B.length)throw new Error("Codec ".concat(_," not supported by remote SDP."));D.attributes.payloads=B,D.attributes.extmaps=g.videoExtensions}"audio"===D.media.mediaType&&(D.media.fmts=g.audioCodecs.map(B=>B.payloadType.toString(10)),D.attributes.payloads=g.audioCodecs,D.attributes.extmaps=g.audioExtensions),C.mediaDescriptions[T]=this.mungMediaDesc(D)}this.sessionDesc=C,this.currentMidIndex=C.mediaDescriptions.length-1}toString(){return wl.exports.print(this.sessionDesc)}send(i,a,c){const{ssrcs:p,ssrcGroups:g}=_d(a,this.cname),m=this.sessionDesc.mediaDescriptions.find(S=>i===Wr.VIDEO?"video"===S.media.mediaType:"audio"===S.media.mediaType),A=p[0].attributes.label,_=p[0].attributes.mslabel;return m.attributes.ssrcs=m.attributes.ssrcs.concat(p),m.attributes.ssrcGroups=m.attributes.ssrcGroups.concat(g),{id:A,mslabel:_}}batchSend(i){return i.map(a=>{let{kind:c,ssrcMsg:p}=a;return this.send(c,p,void 0)})}stopSending(i){this.sessionDesc.mediaDescriptions.forEach(a=>{const c=[],p=[],g=[];a.attributes.ssrcs.forEach(m=>{i.includes(m.attributes.label||"")?g.push(m):c.push(m)}),a.attributes.ssrcGroups.forEach(m=>{g.map(A=>A.ssrcId).includes(m.ssrcIds[0])||p.push(m)}),a.attributes.ssrcs=c,a.attributes.ssrcGroups=p})}mute(i){const a=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===i);if(!a)throw new Error("mediaDescription not found with ".concat(i," in remote SDP when calling RemoteSDP.mute."));a.attributes.direction="inactive"}unmute(i){const a=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===i);if(!a)throw new Error("mediaDescription not found with ".concat(i," in remote SDP when calling RemoteSDP.unmute."));a.attributes.direction="sendonly"}receive(i,a,c){i.forEach((p,g)=>{const m=p._mediaStreamTrack,A=this.sessionDesc.mediaDescriptions.findIndex(S=>S.attributes.mid===m.kind),_=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[A],p);this.sessionDesc.mediaDescriptions[A]=_})}stopReceiving(i){}restartICE(i,a){i=Wa(i),a=Wa(a),this.iceParameters=i,this.candidates=a,this.sessionDesc.mediaDescriptions.forEach(c=>{c.attributes.iceUfrag=i.iceUfrag,c.attributes.icePwd=i.icePwd,c.attributes.candidates=this.candidates})}predictReceivingMids(i){const a=[];for(let c=0;c<i;c++)a.push((this.currentMidIndex+c+1).toString(10));return a}mungRecvMediaDsec(i,a){const c=Wa(i);return Zw(c,a),S6(c,a),c}updateRecvMedia(i,a){const c=this.sessionDesc.mediaDescriptions.findIndex(p=>p.attributes.mid===i);if(-1!==c){const p=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[c],a);this.sessionDesc.mediaDescriptions[c]=p}}bumpMid(i){this.currentMidIndex+=i}updateTrackLabel(i,a,c){const p=this.sessionDesc.mediaDescriptions.find(m=>i===Wr.VIDEO?"video"===m.attributes.mid:"audio"===m.attributes.mid);if(p){const m=p.attributes.ssrcs.find(A=>A.attributes.label===a);var g;m&&(m.attributes.label=c,null===(g=m.attributes.msid)||void 0===g||g.replace(a,c))}}mungMediaDesc(i){const a=Wa(i);return vk(a),function(c){const p=c.attributes.extmaps.find(g=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===g.extensionName);p&&c.attributes.extmaps.splice(c.attributes.extmaps.indexOf(p),1),c.attributes.payloads.forEach(g=>{const m=g.rtcpFeedbacks.findIndex(A=>"transport-cc"===A.type);-1!==m&&g.rtcpFeedbacks.splice(m,1)})}(a),a}getSSRC(i){for(const a of this.sessionDesc.mediaDescriptions)for(const c of a.attributes.ssrcs)if(c.attributes.label===i)return[c]}}function sc(r){if(Array.isArray(r))return r.map(function(c){return c});if(!nV(r))return r;var i={};for(var a in r)i[a]=nV(r[a])||Array.isArray(r[a])?sc(r[a]):r[a];return i}function nV(r){return!("object"!=typeof r||Array.isArray(r)||!r)}var Hx=function(){function r(i){this.input=[],this.size=i}return r.prototype.add=function(i){this.input.push(i),this.input.length>this.size&&this.input.splice(0,1)},r.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},r}(),lf=function(r,i){return(lf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var p in c)c.hasOwnProperty(p)&&(a[p]=c[p])})(r,i)};function F_(r,i){function a(){this.constructor=r}lf(r,i),r.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}var df=function(){return(df=Object.assign||function(r){for(var i,a=1,c=arguments.length;a<c;a++)for(var p in i=arguments[a])Object.prototype.hasOwnProperty.call(i,p)&&(r[p]=i[p]);return r}).apply(this,arguments)};function rV(r,i,a,c){return new(a||(a=Promise))(function(p,g){function m(S){try{_(c.next(S))}catch(C){g(C)}}function A(S){try{_(c.throw(S))}catch(C){g(C)}}function _(S){S.done?p(S.value):new a(function(C){C(S.value)}).then(m,A)}_((c=c.apply(r,i||[])).next())})}function yk(r,i){var a,c,p,g,m={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return g={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function A(_){return function(S){return function(C){if(a)throw new TypeError("Generator is already executing.");for(;m;)try{if(a=1,c&&(p=2&C[0]?c.return:C[0]?c.throw||((p=c.return)&&p.call(c),0):c.next)&&!(p=p.call(c,C[1])).done)return p;switch(c=0,p&&(C=[2&C[0],p.value]),C[0]){case 0:case 1:p=C;break;case 4:return m.label++,{value:C[1],done:!1};case 5:m.label++,c=C[1],C=[0];continue;case 7:C=m.ops.pop(),m.trys.pop();continue;default:if(!((p=(p=m.trys).length>0&&p[p.length-1])||6!==C[0]&&2!==C[0])){m=0;continue}if(3===C[0]&&(!p||C[1]>p[0]&&C[1]<p[3])){m.label=C[1];break}if(6===C[0]&&m.label<p[1]){m.label=p[1],p=C;break}if(p&&m.label<p[2]){m.label=p[2],m.ops.push(C);break}p[2]&&m.ops.pop(),m.trys.pop();continue}C=i.call(r,m)}catch(T){C=[6,T],c=0}finally{a=p=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([_,S])}}}var fp,tT={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Iy={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:tT,remoteCandidate:tT}},w6={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},Gx={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},T6={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},R6={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},iV=function(){function r(i,a){var c=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=sc(Iy),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=i,this.options=a,this.intervalTimer=window.setInterval(function(){return rV(c,void 0,void 0,function(){return yk(this,function(p){return this.updateStats(),[2]})})},this.options.updateInterval)}return r.prototype.getStats=function(){return this.stats},r.prototype.setVideoIsReady=function(i){this.videoIsReady=i},r.prototype.setVideoIsReady2=function(i,a){this.videoIsReady2[i]=a},r.prototype.getVideoIsReady=function(i){return this.videoIsReady2[i]||!1},r.prototype.setIsFirstAudioDecoded=function(i){},r.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},r.prototype.calcLossRate=function(i){var a=this;this.lossRateWindowStats.push(i),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var c=this.lossRateWindowStats.length,p=0,g=0,m=0,A=0,_=function(T){i[T].forEach(function(D,B){if(a.lossRateWindowStats[c-1][T][B]&&a.lossRateWindowStats[0][T][B]){var K=a.lossRateWindowStats[c-1][T][B].packets-a.lossRateWindowStats[0][T][B].packets,W=a.lossRateWindowStats[c-1][T][B].packetsLost-a.lossRateWindowStats[0][T][B].packetsLost;"videoSend"===T||"audioSend"===T?(p+=K,m+=W):(g+=K,A+=W),D.packetLostRate=Number.isNaN(K)||Number.isNaN(K)||K<=0||W<=0?0:W/(K+W)}})},S=0,C=["videoSend","audioSend","videoRecv","audioRecv"];S<C.length;S++)_(C[S]);i.sendPacketLossRate=p<=0||m<=0?0:m/(p+m),i.recvPacketLossRate=g<=0||A<=0?0:A/(g+A)},r}(),mp=function(r){function i(){var a=null!==r&&r.apply(this,arguments)||this;return a._stats=Iy,a.lastDecodeVideoReceiverStats=new Map,a}return F_(i,r),i.prototype.updateStats=function(){return rV(this,void 0,void 0,function(){var a,c,p,g;return yk(this,function(m){switch(m.label){case 0:return[4,this._getStats()];case 1:return a=m.sent(),c=this.statsResponsesToObjects(a),this._stats=sc(Iy),p=c.filter(function(A){return"ssrc"===A.type}),this.processSSRCStats(p),(g=c.find(function(A){return"VideoBwe"===A.type}))&&this.processBandwidthStats(g),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},i.prototype.processBandwidthStats=function(a){this._stats.bitrate={actualEncoded:Number(a.googActualEncBitrate),targetEncoded:Number(a.googTargetEncBitrate),retransmit:Number(a.googRetransmitBitrate),transmit:Number(a.googTransmitBitrate)},this._stats.sendBandwidth=Number(a.googAvailableSendBandwidth)},i.prototype.processSSRCStats=function(a){var c=this;a.forEach(function(p){var g=p.id.includes("send");switch(p.mediaType+"_"+(g?"send":"recv")){case"video_send":var m=sc(Gx);m.codec=p.googCodecName,m.adaptionChangeReason="none",p.googCpuLimitedResolution&&(m.adaptionChangeReason="cpu"),p.googBandwidthLimitedResolution&&(m.adaptionChangeReason="bandwidth"),m.avgEncodeMs=Number(p.googAvgEncodeMs),m.inputFrame={width:Number(p.googFrameWidthInput)||Number(p.googFrameWidthSent),height:Number(p.googFrameHeightInput)||Number(p.googFrameHeightSent),frameRate:Number(p.googFrameRateInput)},m.sentFrame={width:Number(p.googFrameWidthSent),height:Number(p.googFrameHeightSent),frameRate:Number(p.googFrameRateInput)},m.firsCount=Number(p.googFirReceived),m.nacksCount=Number(p.googNacksReceived),m.plisCount=Number(p.googPlisReceived),m.frameCount=Number(p.framesEncoded),m.bytes=Number(p.bytesSent),m.packets=Number(p.packetsSent),m.packetsLost=Number(p.packetsLost),m.ssrc=Number(p.ssrc),m.rttMs=Number(p.googRtt||0),c._stats.videoSend.push(m),c._stats.rtt=m.rttMs;break;case"video_recv":var A=sc(w6),_=c.lastDecodeVideoReceiverStats.get(Number(p.ssrc));if(A.codec=p.googCodecName,A.targetDelayMs=Number(p.googTargetDelayMs),A.renderDelayMs=Number(p.googRenderDelayMs),A.currentDelayMs=Number(p.googCurrentDelayMs),A.minPlayoutDelayMs=Number(p.googMinPlayoutDelayMs),A.decodeMs=Number(p.googDecodeMs),A.maxDecodeMs=Number(p.googMaxDecodeMs),A.receivedFrame={width:Number(p.googFrameWidthReceived),height:Number(p.googFrameHeightReceived),frameRate:Number(p.googFrameRateReceived)},A.decodedFrame={width:Number(p.googFrameWidthReceived),height:Number(p.googFrameHeightReceived),frameRate:Number(p.googFrameRateDecoded)},A.outputFrame={width:Number(p.googFrameWidthReceived),height:Number(p.googFrameHeightReceived),frameRate:Number(p.googFrameRateOutput)},A.jitterBufferMs=Number(p.googJitterBufferMs),A.firsCount=Number(p.googFirsSent),A.nacksCount=Number(p.googNacksSent),A.plisCount=Number(p.googPlisSent),A.framesDecodeCount=Number(p.framesDecoded),A.bytes=Number(p.bytesReceived),A.packets=Number(p.packetsReceived),A.packetsLost=Number(p.packetsLost),A.ssrc=Number(p.ssrc),A.packets>0&&!c.isFirstVideoReceived[A.ssrc]&&(c.onFirstVideoReceived&&c.onFirstVideoReceived(A.ssrc),c.isFirstVideoReceived[A.ssrc]=!0),A.framesDecodeCount>0&&!c.isFirstVideoDecoded[A.ssrc]&&(c.onFirstVideoDecoded&&c.onFirstVideoDecoded(A.ssrc,A.decodedFrame.width,A.decodedFrame.height),c.isFirstVideoDecoded[A.ssrc]=!0),_){var S=_.stats,C=Date.now()-_.lts;A.framesDecodeFreezeTime=S.framesDecodeFreezeTime,A.framesDecodeInterval=S.framesDecodeInterval,A.framesDecodeCount>S.framesDecodeCount&&c.isFirstVideoDecoded?(_.lts=Date.now(),A.framesDecodeInterval=C,A.framesDecodeInterval>=c.options.freezeRateLimit&&(c.getVideoIsReady(parseInt(p.ssrc,10))?A.framesDecodeFreezeTime+=A.framesDecodeInterval:c.setVideoIsReady2(parseInt(p.ssrc,10),!0))):A.framesDecodeCount<_.stats.framesDecodeCount&&(A.framesDecodeInterval=0)}c.lastDecodeVideoReceiverStats.set(A.ssrc,{stats:df({},A),lts:Date.now()}),c._stats.videoRecv.push(A);break;case"audio_recv":var T=sc(R6);T.codec=p.googCodecName,T.outputLevel=Math.abs(Number(p.audioOutputLevel))/32767,T.decodingCNG=Number(p.googDecodingCNG),T.decodingCTN=Number(p.googDecodingCTN),T.decodingCTSG=Number(p.googDecodingCTSG),T.decodingNormal=Number(p.googDecodingNormal),T.decodingPLC=Number(p.googDecodingPLC),T.decodingPLCCNG=Number(p.googDecodingPLCCNG),T.expandRate=Number(p.googExpandRate),T.accelerateRate=Number(p.googAccelerateRate),T.preemptiveExpandRate=Number(p.googPreemptiveExpandRate),T.secondaryDecodedRate=Number(p.googSecondaryDecodedRate),T.speechExpandRate=Number(p.googSpeechExpandRate),T.preferredJitterBufferMs=Number(p.googPreferredJitterBufferMs),T.jitterBufferMs=Number(p.googJitterBufferMs),T.jitterMs=Number(p.googJitterReceived),T.bytes=Number(p.bytesReceived),T.packets=Number(p.packetsReceived),T.packetsLost=Number(p.packetsLost),T.ssrc=Number(p.ssrc),T.receivedFrames=Number(p.googDecodingCTN)||Number(p.packetsReceived),T.droppedFrames=Number(p.googDecodingPLC)+Number(p.googDecodingPLCCNG)||Number(p.packetsLost),T.receivedFrames>0&&!c.isFirstAudioReceived[T.ssrc]&&(c.onFirstAudioReceived&&c.onFirstAudioReceived(T.ssrc),c.isFirstAudioReceived[T.ssrc]=!0),T.decodingNormal>0&&!c.isFirstAudioDecoded[T.ssrc]&&(c.onFirstAudioDecoded&&c.onFirstAudioDecoded(T.ssrc),c.isFirstAudioDecoded[T.ssrc]=!0),c._stats.audioRecv.push(T);break;case"audio_send":var D=sc(T6);D.codec=p.googCodecName,D.inputLevel=Math.abs(Number(p.audioInputLevel))/32767,D.aecReturnLoss=Number(p.googEchoCancellationReturnLoss||0),D.aecReturnLossEnhancement=Number(p.googEchoCancellationReturnLossEnhancement||0),D.residualEchoLikelihood=Number(p.googResidualEchoLikelihood||0),D.residualEchoLikelihoodRecentMax=Number(p.googResidualEchoLikelihoodRecentMax||0),D.bytes=Number(p.bytesSent),D.packets=Number(p.packetsSent),D.packetsLost=Number(p.packetsLost),D.ssrc=Number(p.ssrc),D.rttMs=Number(p.googRtt||0),c._stats.rtt=D.rttMs,c._stats.audioSend.push(D)}})},i.prototype._getStats=function(){var a=this;return new Promise(function(c,p){a.pc.getStats(c,p)})},i.prototype.statsResponsesToObjects=function(a){var c=[];return a.result().forEach(function(p){var g={id:p.id,timestamp:p.timestamp.valueOf().toString(),type:p.type};p.names().forEach(function(m){g[m]=p.stat(m)}),c.push(g)}),c},i}(iV);!function(r){r.CERTIFICATE="certificate",r.CODEC="codec",r.CANDIDATE_PAIR="candidate-pair",r.LOCAL_CANDIDATE="local-candidate",r.REMOTE_CANDIDATE="remote-candidate",r.INBOUND="inbound-rtp",r.TRACK="track",r.OUTBOUND="outbound-rtp",r.PC="peer-connection",r.REMOTE_INBOUND="remote-inbound-rtp",r.REMOTE_OUTBOUND="remote-outbound-rtp",r.TRANSPORT="transport",r.CSRC="csrc",r.DATA_CHANNEL="data-channel",r.STREAM="stream",r.SENDER="sender",r.RECEIVER="receiver"}(fp||(fp={}));var gi,Ek=function(r){function i(){var a=null!==r&&r.apply(this,arguments)||this;return a._stats=Iy,a.lastDecodeVideoReceiverStats=new Map,a.lastVideoFramesRecv=new Map,a.lastVideoFramesSent=new Map,a.lastVideoFramesDecode=new Map,a.lastVideoJBDelay=new Map,a.lastAudioJBDelay=new Map,a.mediaBytesSent=new Map,a.mediaBytesRetransmit=new Map,a.mediaBytesTargetEncode=new Map,a.lastEncoderMs=new Map,a}return F_(i,r),i.prototype.updateStats=function(){return rV(this,void 0,void 0,function(){var a,c=this;return yk(this,function(p){switch(p.label){case 0:return a=this,[4,this.pc.getStats()];case 1:return a.report=p.sent(),this._stats=sc(Iy),this.report.forEach(function(g){switch(g.type){case fp.OUTBOUND:"audio"===g.mediaType?c.processAudioOutboundStats(g):"video"===g.mediaType&&c.processVideoOutboundStats(g);break;case fp.INBOUND:"audio"===g.mediaType?c.processAudioInboundStats(g):"video"===g.mediaType&&c.processVideoInboundStats(g);break;case fp.TRANSPORT:var m=c.report.get(g.selectedCandidatePairId);m&&c.processCandidatePairStats(m);break;case fp.CANDIDATE_PAIR:g.selected&&c.processCandidatePairStats(g)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},i.prototype.processCandidatePairStats=function(a){if(this._stats.sendBandwidth=a.availableOutgoingBitrate||0,a.currentRoundTripTime&&(this._stats.rtt=1e3*a.currentRoundTripTime),this._stats.videoSend.forEach(function(g){!g.rttMs&&a.currentRoundTripTime&&(g.rttMs=1e3*a.currentRoundTripTime)}),this._stats.audioSend.forEach(function(g){!g.rttMs&&a.currentRoundTripTime&&(g.rttMs=1e3*a.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=a.id,a.localCandidateId){var c=this.report.get(a.localCandidateId);c&&this.processCandidateStats(c)}if(a.remoteCandidateId){var p=this.report.get(a.remoteCandidateId);p&&this.processCandidateStats(p)}},i.prototype.processCandidateStats=function(a){var c;a.type===fp.LOCAL_CANDIDATE&&(c=this._stats.selectedCandidatePair.localCandidate),a.type===fp.REMOTE_CANDIDATE&&(c=this._stats.selectedCandidatePair.remoteCandidate),c&&(c.type=a.type,c.id=a.id,a.address&&(c.address=a.address),a.candidateType&&(c.candidateType=a.candidateType),a.port&&(c.port=a.port),a.priority&&(c.priority=a.priority),a.protocol&&(c.protocol=a.protocol),a.relayProtocol&&(c.relayProtocol=a.relayProtocol),a.type===fp.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==c.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(df({},c),df({},this.stats.selectedCandidatePair.localCandidate)),a.type===fp.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==c.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(df({},c),df({},this.stats.selectedCandidatePair.remoteCandidate)))},i.prototype.processAudioInboundStats=function(a){var c=this._stats.audioRecv.find(function(p){return p.ssrc===a.ssrc});c||(c=sc(R6),this._stats.audioRecv.push(c)),c.ssrc=a.ssrc,c.packets=a.packetsReceived,c.packetsLost=a.packetsLost,c.bytes=a.bytesReceived,c.jitterMs=1e3*a.jitter,a.trackId&&this.processAudioTrackReceiverStats(a.trackId,c),a.codecId&&(c.codec=this.getCodecFromCodecStats(a.codecId)),c.receivedFrames||(c.receivedFrames=a.packetsReceived),c.droppedFrames||(c.droppedFrames=a.packetsLost),c.receivedFrames>0&&!this.isFirstAudioReceived[c.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(c.ssrc),this.isFirstAudioReceived[c.ssrc]=!0),c.outputLevel&&c.outputLevel>0&&!this.isFirstAudioDecoded[c.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(c.ssrc),this.isFirstAudioDecoded[c.ssrc]=!0)},i.prototype.processVideoInboundStats=function(a){var c=this._stats.videoRecv.find(function(T){return T.ssrc===a.ssrc});c||(c=sc(w6),this._stats.videoRecv.push(c)),c.ssrc=a.ssrc,c.packets=a.packetsReceived,c.packetsLost=a.packetsLost,c.bytes=a.bytesReceived,c.firsCount=a.firCount,c.nacksCount=a.nackCount,c.plisCount=a.pliCount,c.framesDecodeCount=a.framesDecoded;var p=this.lastDecodeVideoReceiverStats.get(c.ssrc),g=this.lastVideoFramesDecode.get(c.ssrc),m=Date.now();if(c.framesDecodeCount>0&&!this.isFirstVideoDecoded[c.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(c.ssrc,c.decodedFrame?c.decodedFrame.width:0,c.decodedFrame?c.decodedFrame.height:0),this.isFirstVideoDecoded[c.ssrc]=!0),p){var S=p.stats,C=m-p.lts;c.framesDecodeFreezeTime=S.framesDecodeFreezeTime,c.framesDecodeInterval=S.framesDecodeInterval,c.framesDecodeCount>S.framesDecodeCount&&this.isFirstVideoDecoded?(p.lts=Date.now(),c.framesDecodeInterval=C,c.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(a.ssrc))?c.framesDecodeFreezeTime+=c.framesDecodeInterval:this.setVideoIsReady2(parseInt(a.ssrc,10),!0))):c.framesDecodeCount<S.framesDecodeCount&&(c.framesDecodeInterval=0),a.framesDecoded&&a.qpSum&&(c.qpSumPerFrame=p.stats.framesDecodeCount>a.framesDecoded?a.qpSum/a.framesDecoded:(a.qpSum-p.qpSum)/(a.framesDecoded-p.stats.framesDecodeCount))}g&&m-g.lts>=800?(c.decodeFrameRate=Math.round((c.framesDecodeCount-g.count)/((m-g.lts)/1e3)),this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:m,rate:c.decodeFrameRate})):g?c.decodeFrameRate=g.rate:this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:m,rate:0}),a.totalDecodeTime&&(c.decodeMs=1e3*a.totalDecodeTime),a.trackId&&this.processVideoTrackReceiverStats(a.trackId,c),a.codecId&&(c.codec=this.getCodecFromCodecStats(a.codecId)),a.framerateMean&&(c.framesRateFirefox=a.framerateMean),c.packets>0&&!this.isFirstVideoReceived[c.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(c.ssrc),this.isFirstVideoReceived[c.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(c.ssrc,{stats:df({},c),lts:p?p.lts:Date.now(),qpSum:a.qpSum})},i.prototype.processVideoOutboundStats=function(a){var c=this._stats.videoSend.find(function(D){return D.ssrc===a.ssrc});c||(c=sc(Gx),this._stats.videoSend.push(c));var p,g=this.mediaBytesSent.get(a.ssrc);if(g?g.add(a.bytesSent):((A=new Hx(10)).add(a.bytesSent),this.mediaBytesSent.set(a.ssrc,A)),void 0!==a.retransmittedBytesSent){var m=this.mediaBytesRetransmit.get(a.ssrc);m?m.add(a.retransmittedBytesSent):((A=new Hx(10)).add(a.retransmittedBytesSent),this.mediaBytesRetransmit.set(a.ssrc,A))}if(a.totalEncodedBytesTarget){var A,_=this.mediaBytesTargetEncode.get(a.ssrc);_?_.add(a.totalEncodedBytesTarget):((A=new Hx(10)).add(a.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(a.ssrc,A))}if(c.ssrc=a.ssrc,c.bytes=a.bytesSent,c.packets=a.packetsSent,c.firsCount=a.firCount,c.nacksCount=a.nackCount,c.plisCount=a.pliCount,c.frameCount=a.framesEncoded,c.adaptionChangeReason=a.qualityLimitationReason,a.totalEncodeTime&&a.framesEncoded&&(c.avgEncodeMs=!(p=this.lastEncoderMs.get(a.ssrc))||p.lastFrameCount>a.framesEncoded?1e3*a.totalEncodeTime/a.framesEncoded:1e3*(a.totalEncodeTime-p.lastEncoderTime)/(a.framesEncoded-p.lastFrameCount)),a.framesEncoded&&a.qpSum&&(c.qpSumPerFrame=!(p=this.lastEncoderMs.get(a.ssrc))||p.lastFrameCount>a.framesEncoded?a.qpSum/a.framesEncoded:(a.qpSum-p.lastQpSum)/(a.framesEncoded-p.lastFrameCount)),this.lastEncoderMs.set(a.ssrc,{lastFrameCount:a.framesEncoded,lastEncoderTime:a.totalEncodeTime,lastQpSum:a.qpSum,lts:Date.now()}),a.codecId&&(c.codec=this.getCodecFromCodecStats(a.codecId)),a.mediaSourceId&&this.processVideoMediaSource(a.mediaSourceId,c),a.trackId&&this.processVideoTrackSenderStats(a.trackId,c),a.remoteId)this.processRemoteInboundStats(a.remoteId,c);else{var T=this.findRemoteStatsId(a.ssrc,fp.REMOTE_INBOUND);T&&this.processRemoteInboundStats(T,c)}},i.prototype.processAudioOutboundStats=function(a){var c=this._stats.audioSend.find(function(g){return g.ssrc===a.ssrc});if(c||(c=sc(T6),this._stats.audioSend.push(c)),c.ssrc=a.ssrc,c.packets=a.packetsSent,c.bytes=a.bytesSent,a.mediaSourceId&&this.processAudioMediaSource(a.mediaSourceId,c),a.codecId&&(c.codec=this.getCodecFromCodecStats(a.codecId)),a.trackId&&this.processAudioTrackSenderStats(a.trackId,c),a.remoteId)this.processRemoteInboundStats(a.remoteId,c);else{var p=this.findRemoteStatsId(a.ssrc,fp.REMOTE_INBOUND);p&&this.processRemoteInboundStats(p,c)}},i.prototype.findRemoteStatsId=function(a,c){var p=Array.from(this.report.values()).find(function(g){return g.type===c&&g.ssrc===a});return p?p.id:null},i.prototype.processVideoMediaSource=function(a,c){var p=this.report.get(a);p&&p.width&&p.height&&p.framesPerSecond&&(c.inputFrame={width:p.width,height:p.height,frameRate:p.framesPerSecond})},i.prototype.processAudioMediaSource=function(a,c){var p=this.report.get(a);p&&(c.inputLevel=p.audioLevel)},i.prototype.processVideoTrackSenderStats=function(a,c){var p=this.report.get(a);if(p){var g=0,m=Date.now(),A=this.lastVideoFramesSent.get(c.ssrc);A&&m-A.lts>=800?(g=Math.round((p.framesSent-A.count)/((m-A.lts)/1e3)),this.lastVideoFramesSent.set(c.ssrc,{count:p.framesSent,lts:m,rate:g})):A?g=A.rate:this.lastVideoFramesSent.set(c.ssrc,{count:p.framesSent,lts:m,rate:0}),c.sentFrame={width:p.frameWidth,height:p.frameHeight,frameRate:g}}},i.prototype.processVideoTrackReceiverStats=function(a,c){var p=this.report.get(a);if(p){var g=this.lastVideoFramesRecv.get(c.ssrc),m=Date.now();c.framesReceivedCount=p.framesReceived;var A=0;if(g&&m-g.lts>=800?(A=Math.round((p.framesReceived-g.count)/((m-g.lts)/1e3)),this.lastVideoFramesRecv.set(c.ssrc,{count:p.framesReceived,lts:m,rate:A})):g?A=g.rate:this.lastVideoFramesRecv.set(c.ssrc,{count:p.framesReceived,lts:m,rate:0}),c.receivedFrame={width:p.frameWidth||0,height:p.frameHeight||0,frameRate:A||0},c.decodedFrame={width:p.frameWidth||0,height:p.frameHeight||0,frameRate:c.decodeFrameRate||0},c.outputFrame={width:p.frameWidth||0,height:p.frameHeight||0,frameRate:c.decodeFrameRate||0},p.jitterBufferDelay&&p.jitterBufferEmittedCount){var _=this.lastVideoJBDelay.get(c.ssrc);this.lastVideoJBDelay.set(c.ssrc,{jitterBufferDelay:p.jitterBufferDelay,jitterBufferEmittedCount:p.jitterBufferEmittedCount}),_||(_={jitterBufferDelay:0,jitterBufferEmittedCount:0});var S=1e3*(p.jitterBufferDelay-_.jitterBufferDelay)/(p.jitterBufferEmittedCount-_.jitterBufferEmittedCount);c.jitterBufferMs=S,c.currentDelayMs=Math.round(S)}}},i.prototype.processAudioTrackSenderStats=function(a,c){var p=this.report.get(a);p&&(c.aecReturnLoss=p.echoReturnLoss||0,c.aecReturnLossEnhancement=p.echoReturnLossEnhancement||0)},i.prototype.processAudioTrackReceiverStats=function(a,c){var p=this.report.get(a);if(p){if(p.removedSamplesForAcceleration&&p.totalSamplesReceived&&(c.accelerateRate=p.removedSamplesForAcceleration/p.totalSamplesReceived),p.jitterBufferDelay&&p.jitterBufferEmittedCount){var g=this.lastAudioJBDelay.get(c.ssrc);this.lastAudioJBDelay.set(c.ssrc,{jitterBufferDelay:p.jitterBufferDelay,jitterBufferEmittedCount:p.jitterBufferEmittedCount}),g||(g={jitterBufferDelay:0,jitterBufferEmittedCount:0}),c.jitterBufferMs=Math.round(1e3*(p.jitterBufferDelay-g.jitterBufferDelay)/(p.jitterBufferEmittedCount-g.jitterBufferEmittedCount))}c.outputLevel=p.audioLevel;var A=1920;p.totalSamplesDuration&&p.totalSamplesReceived&&(A=p.totalSamplesReceived/p.totalSamplesDuration/50,c.receivedFrames=Math.round(p.totalSamplesReceived/A)),p.concealedSamples&&(c.droppedFrames=Math.round(p.concealedSamples/A))}},i.prototype.processRemoteInboundStats=function(a,c){var p=this.report.get(a);p&&(c.packetsLost=p.packetsLost,p.roundTripTime&&(c.rttMs=1e3*p.roundTripTime))},i.prototype.getCodecFromCodecStats=function(a){var c=this.report.get(a);if(!c)return"";var p=c.mimeType.match(/\/(.*)$/);return p&&p[1]?p[1]:""},i.prototype.updateSendBitrate=function(){var a=0,c=null,p=null;this.mediaBytesSent.forEach(function(m){a+=m.diffMean()}),this.mediaBytesRetransmit.forEach(function(m){c=null===c?m.diffMean():c+m.diffMean()}),this.mediaBytesTargetEncode.forEach(function(m){p=null===p?m.diffMean():p+m.diffMean()}),this._stats.bitrate={actualEncoded:8*(null!==c?a-c:a)/(this.options.updateInterval/1e3),transmit:8*a/(this.options.updateInterval/1e3)},null!==c&&(this._stats.bitrate.retransmit=8*c/(this.options.updateInterval/1e3)),null!==p&&(this._stats.bitrate.targetEncoded=8*p/(this.options.updateInterval/1e3))},i}(iV),Wx=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return F_(i,r),i.prototype.updateStats=function(){return Promise.resolve()},i}(iV);function O6(r,i,a,c){void 0===i&&(i=250),void 0===a&&(a=8),void 0===c&&(c=500);var p,g=(p=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i))&&p[0]?Number(p[0].split("/")[1]):null;return g?g<76?new mp(r,{updateInterval:i,lossRateInterval:a,freezeRateLimit:c}):new Ek(r,{updateInterval:i,lossRateInterval:a,freezeRateLimit:c}):window.RTCStatsReport&&r.getStats()instanceof Promise?new Ek(r,{updateInterval:i,lossRateInterval:a,freezeRateLimit:c}):new Wx(r,{updateInterval:i,lossRateInterval:a,freezeRateLimit:c})}function D6(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function k6(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?D6(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):D6(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let Mz=(Kn((gi=class aQ extends x4{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(i,a){super(i,a),q(this,"store",void 0),q(this,"peerConnection",void 0),q(this,"remoteSDP",void 0),q(this,"initialOffer",void 0),q(this,"statsFilter",void 0),q(this,"useRTX",!1),q(this,"localCapabilities",void 0),q(this,"localCandidateCount",0),q(this,"allCandidatesReceived",!1),q(this,"mutex",new fu("P2PConnection-mutex")),this.store=a,this.peerConnection=new RTCPeerConnection(aQ.resolvePCConfiguration(i),{optional:[{googDscp:!0}]}),this.statsFilter=O6(this.peerConnection,void 0,void 0,Uo()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var i=this;return U(function*(){try{const a=yield i.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=_k(a.sdp),p=Xw(a.sdp,!i.useRTX,!1,["opus"]);return i.localCapabilities=p,i.initialOffer=a,k6(k6({},c),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:p},offerSDP:a.sdp})}catch(a){throw new h(u.GET_LOCAL_CONNECTION_PARAMS_FAILED,a.toString())}})()}connect(i,a,c,p,g,m){var A=this;return U(function*(){try{if(!A.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");A.remoteSDP=new I6({remoteIceParameters:i,remoteDtlsParameters:a,candidates:c,remoteRTPCapabilities:p.send,remoteSetup:g,localCapabilities:A.localCapabilities,sdkCodec:A.store.codec,cname:m});const _=A.remoteSDP.toString();yield A.peerConnection.setLocalDescription(A.initialOffer),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(_){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}})()}send(i,a){var c=this;return $w(function*(){const p=yield Ko(c.mutex.lock());try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const g=i.map(D=>c.peerConnection.addTrack(D._mediaStreamTrack)),m=yield Ko(c.peerConnection.createOffer()),A=wl.exports.parse(m.sdp),_=i.map(D=>{const B=D._mediaStreamTrack,K=A.mediaDescriptions.find(W=>W.attributes.mid===B.kind);if(!K)throw new Error("Cannot extract ssrc from mediaDescription.");return function(W,Z,de){const ge=W.attributes.ssrcs.filter(De=>De.attributes.label===Z),Se=W.attributes.ssrcGroups;if(0===ge.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(Se&&ge.length>1){const De=Se.find(it=>-1!==it.ssrcIds.indexOf(ge[0].ssrcId));return De?[{ssrcId:De.ssrcIds[0],rtx:de?De.ssrcIds[1]:void 0}]:[{ssrcId:ge[0].ssrcId}]}return[{ssrcId:ge[0].ssrcId}]}(K,B.id,c.useRTX)});let S;try{S=yield _}catch(D){throw g.forEach(B=>{uu()&&B.replaceTrack(null),c.peerConnection.removeTrack(B)}),D}const C=c.mungSendOfferSDP(m.sdp,i);c.remoteSDP.receive(i,a,S);const T=c.remoteSDP.toString();return yield Ko(c.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield Ko(c.applySendEncodings(g,i)),yield Ko(c.peerConnection.setRemoteDescription({type:"answer",sdp:T})),i.map((D,B)=>({localSSRC:_[B],id:D._mediaStreamTrack.id}))}catch(g){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(g.toString()))}finally{p()}})()}stopSending(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const c=a.peerConnection.getSenders().filter(m=>{var A;return-1!==i.indexOf((null===(A=m.track)||void 0===A?void 0:A.id)||"")});if(c.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");c.map(m=>{uu()&&m.replaceTrack(null),a.peerConnection.removeTrack(m)});const p=yield a.peerConnection.createOffer();yield a.peerConnection.setLocalDescription(p),a.remoteSDP.stopReceiving(i);const g=a.remoteSDP.toString();yield a.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(c.toString()))}})()}receive(i,a,c,p){var g=this;return U(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(i," before remoteSDP created."));const{id:m,mslabel:A}=g.remoteSDP.send(i,a,p),_=new Un((T,D)=>{const B=setTimeout(()=>{D(new Error("Cannot receive track, id: ".concat(m)))},1e4),K=W=>{const Z=Oi();if(("Safari"===Z.name&&11===Number(Z.version)||Ho())&&W.track.id!==m&&W.streams[0].id===A){var de;const ge=W.streams[0].getTracks()[0];return null===(de=g.remoteSDP)||void 0===de||de.updateTrackLabel(i,m,W.track.id),g.peerConnection.removeEventListener("track",K),clearTimeout(B),void T(ge)}if(W.track.id===m)return g.peerConnection.removeEventListener("track",K),clearTimeout(B),void T(W.track)};g.peerConnection.addEventListener("track",K)}),S=g.remoteSDP.toString();yield g.peerConnection.setRemoteDescription({type:"offer",sdp:S});const C=yield g.peerConnection.createAnswer();return yield g.peerConnection.setLocalDescription(C),{track:yield _,id:m}}catch(m){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(m.toString()))}})()}stopReceiving(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");a.remoteSDP.stopSending(i);const c=a.remoteSDP.toString();yield a.peerConnection.setRemoteDescription({type:"offer",sdp:c});const p=yield a.peerConnection.createAnswer();yield a.peerConnection.setLocalDescription(p)}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(i){return U(function*(){})()}unmuteRemote(i){return U(function*(){})()}muteLocal(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=a.peerConnection.getSenders().filter(p=>{var g;return-1!==i.indexOf((null===(g=p.track)||void 0===g?void 0:g.id)||"")});if(c.length!==i.length)throw new Error("sender' length doesn't match mids' length.");c.map(p=>{if(uu()&&p.track)p.track.enabled=!1;else{const g=p.getParameters();g.encodings.forEach(m=>m.active=!1),p.setParameters(g)}})}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=a.peerConnection.getSenders().filter(m=>{var A;return-1!==i.indexOf((null===(A=m.track)||void 0===A?void 0:A.id)||"")});if(c.length!==i.length)throw new Error("Senders' length doesn't match mids' length.");c.map(function(){var m=U(function*(A){if(uu()&&A.track)A.track.enabled=!0;else{const _=A.getParameters();_.encodings.forEach(S=>S.active=!0),yield A.setParameters(_)}});return function(A){return m.apply(this,arguments)}}());const p=yield a.peerConnection.createOffer();yield a.peerConnection.setLocalDescription(p);const g=a.remoteSDP.toString();yield a.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var i=this;return U(function*(){const a=yield i.peerConnection.createOffer({iceRestart:!0});if(!a.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:_k(a.sdp).iceParameters,restartICE:(c=U(function*(p,g){return i.restartICE(a,p,g)}),function(g,m){return c.apply(this,arguments)}),restartOfferSDP:a.sdp};var c})()}close(){var i;this.peerConnection.close(),null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(i){return this.statsFilter.getVideoIsReady(i)}updateEncoderConfig(i,a){var c=this;return U(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const p=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(p.sdp,[a]);c.remoteSDP.updateRecvMedia(a._mediaStreamTrack.kind,a);const m=c.remoteSDP.toString();yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:m})}catch(p){throw new h(u.EXCHANGE_SDP_FAILED,p.toString())}})()}updateSendParameters(i,a){var c=this;return U(function*(){const p=c.peerConnection.getSenders().filter(g=>{var m;return(null===(m=g.track)||void 0===m?void 0:m.id)===i});1===p.length&&(yield c.applySendEncodings(p,[a]))})()}setStatsRemoteVideoIsReady(i,a){this.statsFilter.setVideoIsReady2(i,a)}replaceTrack(i,a){var c=this;return U(function*(){const p=c.peerConnection.getSenders().find(g=>{var m;return(null===(m=g.track)||void 0===m?void 0:m.id)===a});p&&(yield p.replaceTrack(i._mediaStreamTrack))})()}restartICE(i,a,c){var p=this;return U(function*(){try{if(!p.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");p.remoteSDP.restartICE(a,c);const g=p.remoteSDP.toString();yield p.peerConnection.setLocalDescription(i),yield p.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var i;null===(i=this.onICEConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var i;null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=i=>{i.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,O.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,O.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},rt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(i){const a={iceServers:[],sdpSemantics:"plan-b"};return i.iceServers?a.iceServers=i.iceServers:i.turnServer&&"off"!==i.turnServer.mode&&(IF(i.turnServer.servers)?a.iceServers=i.turnServer.servers:(a.iceServers&&a.iceServers.push(...aQ.turnServerConfigToIceServers(i.turnServer.servers)),rt("USE_TURN_SERVER_OF_GATEWAY")&&a.iceServers&&i.turnServer.serversFromGateway&&a.iceServers.push(...aQ.turnServerConfigToIceServers(i.turnServer.serversFromGateway)),i.turnServer.servers.concat(i.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(a.iceTransportPolicy="relay")}))),a}static turnServerConfigToIceServers(i){const a=[];return i.forEach(c=>{c.security?c.tcpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),a}applySendEncodings(i,a){return U(function*(){try{if(!Uc().supportSetRtpSenderParameters||i.length!==a.length)return;for(let p=0;p<i.length;p++){var c;const g=i[p],m=a[p];if(!m)continue;const A={},_={};if(m instanceof Ns)switch(m._optimizationMode){case"motion":A.degradationPreference="maintain-framerate";break;case"detail":A.degradationPreference="maintain-resolution";break;default:A.degradationPreference="balanced"}if(rt("DSCP_TYPE")&&cS()){const T=rt("DSCP_TYPE");["very-low","low","medium","high"].includes(T)&&(_.networkPriority=T)}const S=g.getParameters(),C=null===(c=S.encodings)||void 0===c?void 0:c[0];C&&Object.assign(C,_),Object.assign(S,A),yield g.setParameters(S)}}catch{O.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(i,a){const c=wl.exports.parse(i);return a.forEach((p,g)=>{const m=p._mediaStreamTrack,A=c.mediaDescriptions.find(_=>_.attributes.mid===m.kind);A&&Zw(A,p)}),wl.exports.print(c)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=i=>{var a;null===(a=this.onFirstAudioReceived)||void 0===a||a.call(this,i)},this.statsFilter.onFirstVideoReceived=i=>{var a;null===(a=this.onFirstVideoReceived)||void 0===a||a.call(this,i)},this.statsFilter.onFirstAudioDecoded=i=>{var a;null===(a=this.onFirstAudioDecoded)||void 0===a||a.call(this,i)},this.statsFilter.onFirstVideoDecoded=(i,a,c)=>{var p;null===(p=this.onFirstVideoDecoded)||void 0===p||p.call(this,i,a,c)},this.statsFilter.onSelectedLocalCandidateChanged=(i,a)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,i,a)},this.statsFilter.onSelectedRemoteCandidateChanged=(i,a)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,i,a)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}batchReceive(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const c=a.remoteSDP.batchSend(i).map((m,A)=>{let{id:_,mslabel:S}=m;const{kind:C}=i[A];return new Un((T,D)=>{const B=setTimeout(()=>{D(new Error("Cannot receive track, id: ".concat(_)))},1e4),K=W=>{const Z=Oi();if("Safari"===Z.name&&11===Number(Z.version)&&W.track.id!==_&&W.streams[0].id===S){var de;const ge=W.streams[0].getTracks()[0];return null===(de=a.remoteSDP)||void 0===de||de.updateTrackLabel(C,_,W.track.id),a.peerConnection.removeEventListener("track",K),clearTimeout(B),void T({track:ge,id:_})}if(W.track.id===_)return a.peerConnection.removeEventListener("track",K),clearTimeout(B),void T({track:W.track,id:_})};a.peerConnection.addEventListener("track",K)})}),p=a.remoteSDP.toString();yield a.peerConnection.setRemoteDescription({type:"offer",sdp:p});const g=yield a.peerConnection.createAnswer();return yield a.peerConnection.setLocalDescription(g),yield Un.all(c)}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}getRemoteSSRC(i){if(this.remoteSDP)return this.remoteSDP.getSSRC(i)?.[0].ssrcId}}).prototype,"connect",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"connect"),gi.prototype),Kn(gi.prototype,"stopSending",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"stopSending"),gi.prototype),Kn(gi.prototype,"receive",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"receive"),gi.prototype),Kn(gi.prototype,"stopReceiving",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"stopReceiving"),gi.prototype),Kn(gi.prototype,"muteRemote",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"muteRemote"),gi.prototype),Kn(gi.prototype,"unmuteRemote",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"unmuteRemote"),gi.prototype),Kn(gi.prototype,"muteLocal",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"muteLocal"),gi.prototype),Kn(gi.prototype,"unmuteLocal",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"unmuteLocal"),gi.prototype),Kn(gi.prototype,"reEstablish",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"reEstablish"),gi.prototype),Kn(gi.prototype,"close",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"close"),gi.prototype),Kn(gi.prototype,"updateEncoderConfig",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"updateEncoderConfig"),gi.prototype),Kn(gi.prototype,"updateSendParameters",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"updateSendParameters"),gi.prototype),Kn(gi.prototype,"replaceTrack",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"replaceTrack"),gi.prototype),Kn(gi.prototype,"restartICE",[gp],Object.getOwnPropertyDescriptor(gi.prototype,"restartICE"),gi.prototype),gi);function gp(r,i,a){const c=r[i];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return a.value=U(function*(){const p=this.mutex,g=yield p.lock("Locking from P2PConnection.".concat(i));try{for(var m=arguments.length,A=new Array(m),_=0;_<m;_++)A[_]=arguments[_];return yield c.apply(this,A)}finally{g()}}),a}var bk;let rW=yn("RemoteSDP")(bk=class{get localCapabilities(){return Wa(this._localCapabilities)}get rtpCapabilities(){return Wa(this._rtpCapabilities)}get candidates(){return Wa(this._candidates)}get iceParameters(){return Wa(this._iceParameters)}get dtlsParameters(){return Wa(this._dtlsParameters)}constructor(r){q(this,"sessionDesc",void 0),q(this,"_localCapabilities",void 0),q(this,"_rtpCapabilities",void 0),q(this,"_candidates",void 0),q(this,"_iceParameters",void 0),q(this,"_dtlsParameters",void 0),q(this,"setup",void 0),q(this,"currentMidIndex",void 0),q(this,"cname",void 0),q(this,"firefoxSsrcMidMap",new Map),r=Wa(r);const{remoteIceParameters:i,remoteDtlsParameters:a,candidates:c,remoteRTPCapabilities:p,remoteSetup:g,localCapabilities:m,cname:A}=r,_=wl.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=p,this._candidates=c,this._iceParameters=i,this._dtlsParameters=a,this._localCapabilities=m,this.setup=g,this.cname=A;const S=this.rtpCapabilities.send;for(const C of _.mediaDescriptions){if(C.attributes.iceUfrag=i.iceUfrag,C.attributes.icePwd=i.icePwd,C.attributes.fingerprints=a.fingerprints,C.attributes.candidates=c,C.attributes.setup=g,"video"===C.media.mediaType&&(C.media.fmts=S.videoCodecs.map(T=>T.payloadType.toString(10)),C.attributes.payloads=S.videoCodecs,C.attributes.extmaps=S.videoExtensions,rt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:T,ssrcGroups:D}=_d([{ssrcId:4e4,rtx:rt("USE_RTX")?40001:void 0}],this.cname);C.attributes.ssrcs=T,C.attributes.ssrcGroups=D}if("audio"===C.media.mediaType&&(C.media.fmts=S.audioCodecs.map(T=>T.payloadType.toString(10)),C.attributes.payloads=S.audioCodecs,C.attributes.extmaps=S.audioExtensions,rt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:T,ssrcGroups:D}=_d([{ssrcId:2e4}],this.cname);C.attributes.ssrcs=T,C.attributes.ssrcGroups=D}}this.sessionDesc=_,this.currentMidIndex=_.mediaDescriptions.length-1}preloadRemoteMedia(){const r=rt("PRELOAD_MEDIA_COUNT");Ne("debug",this,"preloadRemoteMedia",r);const i=this.candidates,a=this.dtlsParameters,c=this.iceParameters,p=this.rtpCapabilities.send;for(let g=1;g<r;g++){const m=2*g+2e4,A=2*g+4e4,{ssrcs:_,ssrcGroups:S}=_d([{ssrcId:m}],this.cname),{ssrcs:C,ssrcGroups:T}=_d([{ssrcId:A,rtx:rt("USE_RTX")?A+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.videoCodecs.map(D=>D.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:i,extmaps:p.videoExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:C,ssrcGroups:T,rtcpFeedbackWildcards:[],payloads:p.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.audioCodecs.map(D=>D.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:i,extmaps:p.audioExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_,ssrcGroups:S,rtcpFeedbackWildcards:[],payloads:p.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return wl.exports.print(this.sessionDesc)}send(r,i,a,c){const{ssrcs:p,ssrcGroups:g}=_d(i,this.cname,a),m=this.findPreloadMediaDesc(p);if(m){if(Uo()&&this.firefoxSsrcMidMap.set(p[0].ssrcId,m.attributes.mid),c&&(c.tcc||c.remb)){const A=this.sessionDesc.mediaDescriptions.indexOf(m);return this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(m,c),{mid:m.attributes.mid,needExchangeSDP:!0}}return{mid:m.attributes.mid,needExchangeSDP:!1}}{const A=this.findAvailableMediaIndex(r,p);if(uu()||tD()){if(-1!==A&&1!==A){const _=Wa(this.sessionDesc.mediaDescriptions[A]);return _.attributes.direction="sendonly",_.attributes.ssrcs=p,_.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(_,c),{mid:_.attributes.mid,needExchangeSDP:!0}}{const _=this.createOrRecycleSendMedia(r,p,g,"sendonly",c);return this.updateBundleMids(),{mid:_.attributes.mid,needExchangeSDP:!0}}}if(-1!==A){const _=Wa(this.sessionDesc.mediaDescriptions[A]);return _.attributes.direction="sendonly",_.attributes.ssrcs=p,_.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(_,c),Uo()&&this.firefoxSsrcMidMap.set(p[0].ssrcId,_.attributes.mid),{mid:_.attributes.mid,needExchangeSDP:!0}}{const _=this.createOrRecycleSendMedia(r,p,g,"sendonly",c);return this.updateBundleMids(),Uo()&&this.firefoxSsrcMidMap.set(p[0].ssrcId,_.attributes.mid),{mid:_.attributes.mid,needExchangeSDP:!0}}}}batchSend(r){const i=r.map(p=>{let{kind:g,ssrcMsg:m,mslabel:A}=p;return this.send(g,m,A)}),a=[];let c=!1;return i.forEach(p=>{let{mid:g,needExchangeSDP:m}=p;m&&(c=!0),a.push(g)}),{mids:a,needExchangeSDP:c}}stopSending(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>a.attributes.mid&&-1!==r.indexOf(a.attributes.mid));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(a=>{"0"===a.attributes.mid||Uo()||uu()||tD()?a.attributes.ssrcs=[]:(a.attributes.ssrcs=[],a.attributes.direction="inactive",a.media.port="0")}),this.updateBundleMids()}mute(r){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>r.includes(a.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(a=>{a.attributes.direction="inactive"})}unmuteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>r.includes(a.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(a=>{a.attributes.direction="recvonly"})}receive(r,i,a,c){r.forEach((p,g)=>{this.createOrRecycleRecvMedia(p,[],"recvonly",i,a,c[g])}),this.updateBundleMids()}stopReceiving(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>-1!==r.indexOf(a.attributes.mid));if(i.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(a=>{a.media.port="0",a.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(r,i){r=Wa(r),i=Wa(i),this._iceParameters=r,this._candidates=i,this.sessionDesc.mediaDescriptions.forEach(a=>{a.attributes.iceUfrag=r.iceUfrag,a.attributes.icePwd=r.icePwd,a.attributes.candidates=this.candidates})}predictReceivingMids(r){const i=[];for(let a=0;a<r;a++)i.push((this.currentMidIndex+a+1).toString(10));return i}findAvailableMediaIndex(r,i){return this.sessionDesc.mediaDescriptions.findIndex(a=>{const c=a.media.mediaType===r&&"0"!==a.media.port&&("sendonly"===a.attributes.direction||"sendrecv"===a.attributes.direction)&&0===a.attributes.ssrcs.length;if(Uo()){if(c){const p=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(p||"0"!==a.attributes.mid&&"1"!==a.attributes.mid)||!(!p||p!==a.attributes.mid)}return!1}return c})}createOrRecycleRecvMedia(r,i,a,c,p,g){const m=r._mediaStreamTrack.kind,A=this.rtpCapabilities.recv,_=this.localCapabilities.send;let S=[];if(m===Wr.VIDEO){var C,T;if(rt("H264_PROFILE_LEVEL_ID")&&"h264"===c&&(S=A.videoCodecs.filter(Z=>{var de,ge;return((null===(de=Z.rtpMap)||void 0===de?void 0:de.encodingName.toLowerCase())||"").includes(c)&&(null==Z||null===(ge=Z.fmtp)||void 0===ge?void 0:ge.parameters["profile-level-id"])===rt("H264_PROFILE_LEVEL_ID")})),!S||0===(null===(C=S)||void 0===C?void 0:C.length)){const Z=_.videoCodecs.filter(de=>{var ge;return((null===(ge=de.rtpMap)||void 0===ge?void 0:ge.encodingName.toLowerCase())||"").includes(c)});0!==Z.length&&(S=A.videoCodecs.filter(de=>Z.some(ge=>ge.payloadType===de.payloadType)))}if(rt("USE_RTX")){const Z=S.map(ge=>ge.payloadType.toString()),de=A.videoCodecs.filter(ge=>{var Se,De;return"rtx"===(null===(Se=ge.rtpMap)||void 0===Se?void 0:Se.encodingName)&&Z.includes((null===(De=ge.fmtp)||void 0===De?void 0:De.parameters.apt)||"")});S=[...S,...de]}0===S.length&&(O.warning("codec ".concat(c," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(T=A.videoCodecs[0].rtpMap)||void 0===T?void 0:T.encodingName)),S=A.videoCodecs)}else S=A.audioCodecs.filter(Z=>{var de;return((null===(de=Z.rtpMap)||void 0===de?void 0:de.encodingName.toLowerCase())||"").includes(p)}),0===S.length&&(O.warning("codec ".concat(p," not included in rtpCapabilities, fallback to opus")),S=A.audioCodecs.filter(Z=>{var de;return((null===(de=Z.rtpMap)||void 0===de?void 0:de.encodingName.toLowerCase())||"").includes("opus")}));const D=m===Wr.VIDEO?A.videoExtensions:A.audioExtensions;this.currentMidIndex+=1;const B="".concat(this.currentMidIndex);let K={media:{mediaType:m,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:S.map(Z=>Z.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:D,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:S,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:a,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(B)}};K=this.mungRecvMediaDsec(K,r,g);const W=this.findFirstClosedMedia(m);if(W){const Z=this.sessionDesc.mediaDescriptions.indexOf(W);this.sessionDesc.mediaDescriptions[Z]=K}else this.sessionDesc.mediaDescriptions.push(K);return K}createOrRecycleSendMedia(r,i,a,c,p){const g=this.rtpCapabilities.send,m=r===Wr.VIDEO?g.videoCodecs:g.audioCodecs,A=r===Wr.VIDEO?g.videoExtensions:g.audioExtensions;this.currentMidIndex+=1;const _="".concat(this.currentMidIndex);let S={media:{mediaType:r,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:m.map(T=>T.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:A,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:a,rtcpFeedbackWildcards:[],payloads:m,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:c,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(_)}};S=this.mungSendMediaDesc(S,p);const C=this.findFirstClosedMedia(r);if(C){const T=this.sessionDesc.mediaDescriptions.indexOf(C);this.sessionDesc.mediaDescriptions[T]=S}else this.sessionDesc.mediaDescriptions.push(S);return S}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>"0"!==r.media.port).map(r=>r.attributes.mid)}mungRecvMediaDsec(r,i,a){const c=Wa(r);return vk(c),Zw(c,i),S6(c,i),function(p){if("video"!==p.media.mediaType)return;const g=Oi();if(g.name!==oi.SAFARI&&g.os!==Ei.IOS)return;const m=p.attributes.extmaps.findIndex(A=>/video-orientation/g.test(A.extensionName));-1!==m&&p.attributes.extmaps.splice(m,1)}(c),eT(c,a,this.localCapabilities.send),c}mungSendMediaDesc(r,i){const a=Wa(r);return eT(a,i,this.localCapabilities.recv),a}updateRecvMedia(r,i){const a=this.sessionDesc.mediaDescriptions.findIndex(c=>c.attributes.mid===r);if(-1!==a){const c=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],i);this.sessionDesc.mediaDescriptions[a]=c}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(i=>Uo()?"0"===i.media.port&&i.media.mediaType===r:"0"===i.media.port)}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(i=>{var a,c;return(null===(a=i.attributes)||void 0===a||null===(c=a.ssrcs[0])||void 0===c?void 0:c.ssrcId)===r[0].ssrcId})}getSSRC(r){var i;return null===(i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r))||void 0===i?void 0:i.attributes.ssrcs}})||bk;var Sk,si;function oV(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function sV(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?oV(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):oV(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let iW=yn("P2PConnection","store.p2pId")((Kn((si=class cQ extends x4{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(i,a){super(i,a),q(this,"store",void 0),q(this,"peerConnection",void 0),q(this,"remoteSDP",void 0),q(this,"initialOffer",void 0),q(this,"transportEventReceiver",void 0),q(this,"statsFilter",void 0),q(this,"useRTX",rt("USE_RTX")),q(this,"localCapabilities",void 0),q(this,"localCandidateCount",0),q(this,"allCandidatesReceived",!1),q(this,"mutex",new fu("P2PConnection-mutex")),this.store=a,this.peerConnection=new RTCPeerConnection(cQ.resolvePCConfiguration(i),{optional:[{googDscp:!0}]}),this.statsFilter=O6(this.peerConnection,void 0,void 0,Uo()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var i=this;return U(function*(){try{i.peerConnection.addTransceiver("video",{direction:"recvonly"}),i.peerConnection.addTransceiver("audio",{direction:"recvonly"});const a=yield i.peerConnection.createOffer();if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=_k(a.sdp),p=yield(g=U(function*(m,A,_,S){const C=new RTCPeerConnection;C.addTransceiver("video",{direction:"sendonly"}),C.addTransceiver("audio",{direction:"sendonly"}),C.addTransceiver("video",{direction:"recvonly"}),C.addTransceiver("audio",{direction:"recvonly"});const T=(yield C.createOffer()).sdp,D=Xw(T,m,A,_,S,"sendonly"),B=Xw(T,m,A,_,S,"recvonly"),K={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},W={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},Z={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Ak(D,B,"videoExtensions",K,W,Z),Ak(D,B,"videoCodecs",K,W,Z),Ak(D,B,"audioExtensions",K,W,Z),Ak(D,B,"audioCodecs",K,W,Z),rt("RAISE_H264_BASELINE_PRIORITY")){const de=Z.videoCodecs.findIndex(ge=>{var Se,De;return"h264"===(null===(Se=ge.rtpMap)||void 0===Se?void 0:Se.encodingName.toLocaleLowerCase())&&"42001f"===(null===(De=ge.fmtp)||void 0===De?void 0:De.parameters["profile-level-id"])});if(-1!==de){const ge=Z.videoCodecs.findIndex(Se=>{var De;return"h264"===(null===(De=Se.rtpMap)||void 0===De?void 0:De.encodingName.toLocaleLowerCase())});if(ge<de){O.debug("raising H264 baseline profile priority");const Se=Z.videoCodecs[de];Z.videoCodecs.splice(de,1),Z.videoCodecs.splice(ge,0,Se)}-1!==ge&&(W.videoCodecs=W.videoCodecs.filter(Se=>{var De,it;return!("h264"===(null===(De=Se.rtpMap)||void 0===De?void 0:De.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(it=Se.fmtp)||void 0===it?void 0:it.parameters["profile-level-id"]))})),-1!==ge&&rt("FILTER_SEND_H264_BASELINE")&&(K.videoCodecs=K.videoCodecs.filter(Se=>{var De,it;return!("h264"===(null===(De=Se.rtpMap)||void 0===De?void 0:De.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(it=Se.fmtp)||void 0===it?void 0:it.parameters["profile-level-id"]))}))}}try{C.close()}catch{}return{send:K,recv:W,sendrecv:Z}}),function(m,A,_,S){return g.apply(this,arguments)})(!i.useRTX,!1);return i.localCapabilities=C6(p),i.initialOffer=a,sV(sV({},c),{},{rtpCapabilities:p,offerSDP:a.sdp})}catch(a){throw new h(u.GET_LOCAL_CONNECTION_PARAMS_FAILED,a.toString())}var g})()}connect(i,a,c,p,g,m){var A=this;return U(function*(){try{if(!A.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");A.remoteSDP=new rW({remoteIceParameters:i,remoteDtlsParameters:a,candidates:c,remoteRTPCapabilities:p,remoteSetup:g,localCapabilities:A.localCapabilities,cname:m});const _=A.remoteSDP.toString(),S=A.logSDPExchange(A.initialOffer.sdp||"","offer","local","connect");yield A.peerConnection.setLocalDescription(A.initialOffer),S?.(_),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:_});const C=A.peerConnection.getTransceivers()[0];if(null!=C&&C.receiver&&A.tryBindTransportEvents(C.receiver),rt("PRELOAD_MEDIA_COUNT")>0){A.remoteSDP.preloadRemoteMedia();const T=A.remoteSDP.toString();yield A.peerConnection.setRemoteDescription({type:"offer",sdp:T});const D=yield A.peerConnection.createAnswer();yield A.peerConnection.setLocalDescription(D)}}catch(_){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}})()}send(i,a,c){var p=this;return $w(function*(){const g=yield Ko(p.mutex.lock());try{if(!p.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const m=[];i.forEach(W=>{const Z=p.peerConnection.addTransceiver(W._mediaStreamTrack,{direction:"sendonly"});m.push(Z)}),Uo()&&!0===rt("SIMULCAST")&&(_e("debug",p,"apply simulcast for firefox"),yield Ko(p.applySimulcastForFirefox(m,i)));const A=yield Ko(p.peerConnection.createOffer()),_=p.remoteSDP.predictReceivingMids(i.length),S=p.mungSendOfferSDP(A.sdp,i,_),C=wl.exports.parse(S),T=_.map(W=>{const Z=C.mediaDescriptions.find(de=>de.attributes.mid===W);if(!Z)throw new Error("Cannot extract ssrc from mediaDescription.");return function(de,ge){const Se=[],De=de.attributes.ssrcGroups.filter(Dt=>"FID"===Dt.semantic),it=de.attributes.ssrcGroups.find(Dt=>"SIM"===Dt.semantic),Rt=de.attributes.ssrcs;if(it)it.ssrcIds.forEach(Dt=>{var Pt;const On=null===(Pt=De.find(pn=>pn.ssrcIds[0]===Dt))||void 0===Pt?void 0:Pt.ssrcIds[1];Se.push({ssrcId:Dt,rtx:ge?On:void 0})});else if(De.length>0){const Pt=De[0].ssrcIds[1];Se.push({ssrcId:De[0].ssrcIds[0],rtx:ge?Pt:void 0})}else{if(0===Rt.length)throw new Error("No ssrcs found on local media description.");Se.push({ssrcId:Rt[0].ssrcId})}return Se}(Z,p.useRTX)});let D;try{D=yield T}catch(W){D=[],p.remoteSDP.receive(i,a,c,D);const Z=p.remoteSDP.toString();throw yield Ko(p.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield Ko(p.peerConnection.setRemoteDescription({type:"answer",sdp:Z})),yield Ko(p.stopSending(_,!0)),W}p.remoteSDP.receive(i,a,c,D);const B=p.remoteSDP.toString(),K=p.logSDPExchange(S,"offer","local","send");return yield Ko(p.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield Ko(p.applySimulcastEncodings(m,i)),yield Ko(p.applySendEncodings(m,i)),K?.(B),yield Ko(p.peerConnection.setRemoteDescription({type:"answer",sdp:B})),m.map((W,Z)=>({localSSRC:T[Z],id:_[Z],transceiver:W}))}catch(m){throw m instanceof h?m:new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(m.toString()))}finally{g()}})()}stopSending(i,a){var c=this;return U(function*(){const p=a?void 0:yield c.mutex.lock("From P2PConnection.stopSending");try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const g=c.peerConnection.getTransceivers().filter(S=>-1!==i.indexOf(S.mid));if(g.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");g.map(S=>{var C;S.direction="inactive",null===(C=S.stop)||void 0===C||C.call(S)});const m=yield c.peerConnection.createOffer(),A=c.logSDPExchange(m.sdp||"","offer","local","stopSending");yield c.peerConnection.setLocalDescription(m),c.remoteSDP.stopReceiving(i);const _=c.remoteSDP.toString();A?.(_),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(g){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(g.toString()))}finally{p&&p()}})()}receive(i,a,c,p){var g=this;return U(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(i," before remoteSDP created."));const{mid:m,needExchangeSDP:A}=g.remoteSDP.send(i,a,c,p);if(A){const S=g.remoteSDP.toString(),C=g.logSDPExchange(S,"offer","remote","receive");yield g.peerConnection.setRemoteDescription({type:"offer",sdp:S});const T=yield g.peerConnection.createAnswer();C?.(T.sdp||""),yield g.peerConnection.setLocalDescription(T),O.debug("[P2PConnection] receive ".concat(i," by exchanging SDP."))}else O.debug("[P2PConnection] receive ".concat(i," no need to exchange SDP."));const _=g.peerConnection.getTransceivers().find(S=>S.mid===m);if(!_)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:_.receiver.track,id:m}}catch(m){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(m.toString()))}})()}batchReceive(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:c,needExchangeSDP:p}=a.remoteSDP.batchSend(i);if(p){const g=a.remoteSDP.toString(),m=a.logSDPExchange(g,"offer","remote","receive");yield a.peerConnection.setRemoteDescription({type:"offer",sdp:g});const A=yield a.peerConnection.createAnswer();m?.(A.sdp||""),yield a.peerConnection.setLocalDescription(A),O.debug("[P2PConnection] batchReceive by exchanging SDP.")}else O.debug("[P2PConnection] batchReceive no need to exchange SDP.");return c.map(g=>{const m=a.peerConnection.getTransceivers().find(A=>A.mid===g);if(!m)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:m.receiver.track,id:g}})}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}stopReceiving(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");a.remoteSDP.stopSending(i);const c=a.remoteSDP.toString(),p=a.logSDPExchange(c,"offer","remote","stopReceiving");yield a.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield a.peerConnection.createAnswer();p?.(g.sdp||""),yield a.peerConnection.setLocalDescription(g)}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(i," before remote SDP created."));a.remoteSDP.mute(i);const c=a.remoteSDP.toString(),p=a.logSDPExchange(c,"offer","remote","muteRemote");yield a.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield a.peerConnection.createAnswer();p?.(g.sdp||""),yield a.peerConnection.setLocalDescription(g)}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(c.toString()))}})()}unmuteRemote(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(i," before remote SDP created."));a.remoteSDP.unmute(i);const c=a.remoteSDP.toString(),p=a.logSDPExchange(c,"offer","remote","unmuteRemote");yield a.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield a.peerConnection.createAnswer();p?.(g.sdp||""),yield a.peerConnection.setLocalDescription(g)}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(c.toString()))}})()}muteLocal(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=a.peerConnection.getTransceivers().filter(A=>A.mid&&-1!==i.indexOf(A.mid));if(c.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(A=>{A.direction="inactive"});const p=yield a.peerConnection.createOffer(),g=a.logSDPExchange(p.sdp||"","offer","local","muteLocal");yield a.peerConnection.setLocalDescription(p),a.remoteSDP.muteRemote(i);const m=a.remoteSDP.toString();g?.(m),yield a.peerConnection.setRemoteDescription({type:"answer",sdp:m})}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(i){var a=this;return U(function*(){try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=a.peerConnection.getTransceivers().filter(A=>A.mid&&-1!==i.indexOf(A.mid));if(c.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(function(){var A=U(function*(_,S){_.direction="sendonly"});return function(_,S){return A.apply(this,arguments)}}());const p=yield a.peerConnection.createOffer(),g=a.logSDPExchange(p.sdp||"","offer","local","unmuteLocal");yield a.peerConnection.setLocalDescription(p),a.remoteSDP.unmuteRemote(i);const m=a.remoteSDP.toString();g?.(m),yield a.peerConnection.setRemoteDescription({type:"answer",sdp:m})}catch(c){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var i=this;return U(function*(){const a=yield i.peerConnection.createOffer({iceRestart:!0});if(!a.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:_k(a.sdp).iceParameters,restartICE:(c=U(function*(p,g){return i.restartICE(a,p,g)}),function(g,m){return c.apply(this,arguments)}),restartOfferSDP:a.sdp};var c})()}close(){var i;this.peerConnection.close(),null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(i){return this.statsFilter.getVideoIsReady(i)}updateEncoderConfig(i,a){var c=this;return U(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const p=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(p.sdp,[a],[i]);c.remoteSDP.updateRecvMedia(i,a);const m=c.remoteSDP.toString(),A=c.logSDPExchange(g,"offer","local","updateEncoderConfig");yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),A?.(m),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:m})}catch(p){throw new h(u.EXCHANGE_SDP_FAILED,p.toString())}})()}updateSendParameters(i,a){var c=this;return U(function*(){const p=c.peerConnection.getTransceivers().filter(g=>g.mid===i);1===p.length&&(c.isVP8Simulcast(a)?Uo()||(yield c.applySimulcastEncodings(p,[a])):yield c.applySendEncodings(p,[a]))})()}setStatsRemoteVideoIsReady(i,a){this.statsFilter.setVideoIsReady2(i,a)}replaceTrack(i,a){var c=this;return U(function*(){const p=c.peerConnection.getTransceivers().find(g=>g.mid===a);p&&(yield p.sender.replaceTrack(i._mediaStreamTrack))})()}restartICE(i,a,c){var p=this;return U(function*(){try{if(!p.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");p.remoteSDP.restartICE(a,c);const g=p.remoteSDP.toString(),m=p.logSDPExchange(i.sdp||"","offer","local","restartICE");yield p.peerConnection.setLocalDescription(i),m?.(g),yield p.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new h(u.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var i;null===(i=this.onICEConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var i;null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=i=>{i.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,O.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,O.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},rt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(i){const a={iceServers:[]};return i.iceServers?a.iceServers=i.iceServers:i.turnServer&&"off"!==i.turnServer.mode&&(IF(i.turnServer.servers)?a.iceServers=i.turnServer.servers:(a.iceServers&&a.iceServers.push(...cQ.turnServerConfigToIceServers(i.turnServer.servers)),rt("USE_TURN_SERVER_OF_GATEWAY")&&a.iceServers&&i.turnServer.serversFromGateway&&a.iceServers.push(...cQ.turnServerConfigToIceServers(i.turnServer.serversFromGateway)),i.turnServer.servers.concat(i.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(a.iceTransportPolicy="relay")}))),a}static turnServerConfigToIceServers(i){const a=[];return i.forEach(c=>{c.security?c.tcpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(ex(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&a.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),a}tryBindTransportEvents(i){i.transport&&(this.transportEventReceiver=i,i.transport.onstatechange=()=>{var a,c;null!==(a=i.transport)&&void 0!==a&&a.state&&(null===(c=this.onDTLSTransportStateChange)||void 0===c||c.call(this,i.transport.state))},i.transport.onerror=a=>{var c;null===(c=this.onDTLSTransportError)||void 0===c||c.call(this,a.error)},i.transport.iceTransport&&(i.transport.iceTransport.onstatechange=()=>{var a,c,p;null!==(a=i.transport)&&void 0!==a&&a.iceTransport.state&&(null===(c=this.onICETransportStateChange)||void 0===c||c.call(this,null===(p=i.transport)||void 0===p?void 0:p.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}applySendEncodings(i,a){var c=this;return U(function*(){try{if(!Uc().supportSetRtpSenderParameters||i.length!==a.length)return;for(let C=0;C<i.length;C++){const T=i[C],D=a[C];if(D&&D instanceof Ns){var p,g;if(c.isVP8Simulcast(D))continue;const B={},K={};switch(D._optimizationMode){case"motion":B.degradationPreference="maintain-framerate";break;case"detail":B.degradationPreference="maintain-resolution";break;default:B.degradationPreference="balanced"}var m,A,_,S;if(null!==(p=D._encoderConfig)&&void 0!==p&&p.bitrateMax&&(K.maxBitrate=1e3*(null===(m=D._encoderConfig)||void 0===m?void 0:m.bitrateMax)),D._hints.includes(Fc.LOW_STREAM)&&(null!==(A=D._encoderConfig)&&void 0!==A&&A.frameRate&&(K.maxFramerate=Ay(D._encoderConfig.frameRate)),null!==(_=D._encoderConfig)&&void 0!==_&&_.scaleResolutionDownBy&&(null===(S=D._encoderConfig)||void 0===S?void 0:S.scaleResolutionDownBy)>1&&(K.scaleResolutionDownBy=D._encoderConfig.scaleResolutionDownBy)),rt("DSCP_TYPE")&&cS()){const de=rt("DSCP_TYPE");["very-low","low","medium","high"].includes(de)&&(K.networkPriority=de)}const W=T.sender.getParameters(),Z=null===(g=W.encodings)||void 0===g?void 0:g[0];Uo()&&!Z&&(B.encodings=[K]),Z&&Object.assign(Z,K),Object.assign(W,B),yield T.sender.setParameters(W)}}}catch{O.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(i,a,c){const p=wl.exports.parse(i);return a.forEach((g,m)=>{const A=c[m],_=p.mediaDescriptions.find(S=>S.attributes.mid===A);_&&(Zw(_,g),function(S,C,T){if(Uo()||"video"!==S.media.mediaType||!(C instanceof Ns)||"vp9"!==T&&"vp8"!==T||"vp8"===T&&!rt("SIMULCAST")||void 0===C._scalabiltyMode||C._scalabiltyMode.numSpatialLayers<=1)return;const D="vp8"===T?2:C._scalabiltyMode.numSpatialLayers,B=S.attributes.ssrcs[0],K=S.attributes.ssrcGroups.find(Z=>"FID"===Z.semantic&&Z.ssrcIds[0]===B.ssrcId),W={semantic:"SIM",ssrcIds:[B.ssrcId]};for(let Z=1;Z<D;Z++)S.attributes.ssrcs.push({ssrcId:B.ssrcId+Z,attributes:Wa(B.attributes)}),W.ssrcIds.push(B.ssrcId+Z),K&&(S.attributes.ssrcs.push({ssrcId:K.ssrcIds[1]+Z,attributes:Wa(B.attributes)}),S.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[B.ssrcId+Z,K.ssrcIds[1]+Z]}));S.attributes.ssrcGroups.unshift(W)}(_,g,this.store.codec))}),wl.exports.print(p)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=i=>{var a;null===(a=this.onFirstAudioReceived)||void 0===a||a.call(this,i)},this.statsFilter.onFirstVideoReceived=i=>{var a;null===(a=this.onFirstVideoReceived)||void 0===a||a.call(this,i)},this.statsFilter.onFirstAudioDecoded=i=>{var a;null===(a=this.onFirstAudioDecoded)||void 0===a||a.call(this,i)},this.statsFilter.onFirstVideoDecoded=(i,a,c)=>{var p;null===(p=this.onFirstVideoDecoded)||void 0===p||p.call(this,i,a,c)},this.statsFilter.onSelectedLocalCandidateChanged=(i,a)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,i,a)},this.statsFilter.onSelectedRemoteCandidateChanged=(i,a)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,i,a)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}applySimulcastForFirefox(i,a){var c=this;return U(function*(){if(i.length===a.length)for(let _=0;_<i.length;_++){var p,g,m,A;const S=i[_],C=a[_];if(C instanceof Ns&&!C._hints.includes(Fc.LOW_STREAM)&&null!==(p=C._encoderConfig)&&void 0!==p&&p.bitrateMax&&(null===(g=C._encoderConfig)||void 0===g?void 0:g.bitrateMax)>200&&null!==(m=C._scalabiltyMode)&&void 0!==m&&m.numSpatialLayers&&(null===(A=C._scalabiltyMode)||void 0===A?void 0:A.numSpatialLayers)>1&&"vp8"===c.store.codec){const T={},D={high:1e3*(C._encoderConfig.bitrateMax-50),medium:5e4};T.encodings=[{rid:"m",active:!0,maxBitrate:D.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:D.high}];const B=S.sender.getParameters();yield S.sender.setParameters(Object.assign(B,T))}}})()}applySimulcastEncodings(i,a){var c=this;return U(function*(){if(!Uo()&&i.length===a.length)for(let p=0;p<i.length;p++){const g=a[p];if(g instanceof Ns&&c.isVP8Simulcast(g)){const m=i[p],A={},_={high:1e3*(g._encoderConfig.bitrateMax-50),medium:5e4};A.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:_.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:_.medium,scaleResolutionDownBy:4}];const S=m.sender.getParameters();yield m.sender.setParameters(Object.assign(S,A))}}})()}isVP8Simulcast(i){var a,c,p,g;return!!(i instanceof Ns&&rt("SIMULCAST")&&"vp8"===this.store.codec&&!i._hints.includes(Fc.LOW_STREAM)&&null!==(a=i._encoderConfig)&&void 0!==a&&a.bitrateMax&&(null===(c=i._encoderConfig)||void 0===c?void 0:c.bitrateMax)>200&&null!==(p=i._scalabiltyMode)&&void 0!==p&&p.numSpatialLayers&&(null===(g=i._scalabiltyMode)||void 0===g?void 0:g.numSpatialLayers)>1)}logSDPExchange(i,a,c,p){if(rt("SDP_LOGGING"))return O.upload("exchanging ".concat(c," ").concat(a," SDP during P2PConnection.").concat(p,"\n"),i),"offer"===a?g=>{this.logSDPExchange(g,"answer","local"===c?"remote":"local",p)}:void 0}getRemoteSSRC(i){if(this.remoteSDP)return this.remoteSDP.getSSRC(i)?.[0].ssrcId}}).prototype,"connect",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"connect"),si.prototype),Kn(si.prototype,"receive",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"receive"),si.prototype),Kn(si.prototype,"batchReceive",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"batchReceive"),si.prototype),Kn(si.prototype,"stopReceiving",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"stopReceiving"),si.prototype),Kn(si.prototype,"muteRemote",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"muteRemote"),si.prototype),Kn(si.prototype,"unmuteRemote",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"unmuteRemote"),si.prototype),Kn(si.prototype,"muteLocal",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"muteLocal"),si.prototype),Kn(si.prototype,"unmuteLocal",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"unmuteLocal"),si.prototype),Kn(si.prototype,"reEstablish",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"reEstablish"),si.prototype),Kn(si.prototype,"close",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"close"),si.prototype),Kn(si.prototype,"updateEncoderConfig",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"updateEncoderConfig"),si.prototype),Kn(si.prototype,"updateSendParameters",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"updateSendParameters"),si.prototype),Kn(si.prototype,"replaceTrack",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"replaceTrack"),si.prototype),Kn(si.prototype,"restartICE",[Vu],Object.getOwnPropertyDescriptor(si.prototype,"restartICE"),si.prototype),Sk=si))||Sk;function Vu(r,i,a){const c=r[i];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return a.value=U(function*(){const p=this.mutex,g=yield p.lock("From P2PConnection.".concat(i));try{for(var m=arguments.length,A=new Array(m),_=0;_<m;_++)A[_]=arguments[_];return yield c.apply(this,A)}finally{g()}}),a}function aV(r,i){let a=document.createElement("video"),c=document.createElement("canvas");a.setAttribute("style","display:none"),c.setAttribute("style","display:none"),a.setAttribute("muted",""),a.muted=!0,a.setAttribute("autoplay",""),a.autoplay=!0,a.setAttribute("playsinline",""),c.width=Ay(i.width),c.height=Ay(i.height);const p=Ay(i.framerate||15);document.body.append(a),document.body.append(c);let g=r._mediaStreamTrack;a.srcObject=new MediaStream([g]),a.play();const m=c.getContext("2d");if(!m)throw new h(u.UNEXPECTED_ERROR,"can not get canvas context");const A=Uc(),_=c.captureStream(A.supportRequestFrame?0:p).getVideoTracks()[0],S=Kj(()=>(()=>{if(a.paused&&a.play(),a.videoHeight>2&&a.videoWidth>2){const B=c.width*(a.videoHeight/a.videoWidth);Math.abs(B-c.height)>=2&&(O.debug("adjust low stream resolution","".concat(c.width,"x").concat(c.height," -> ").concat(c.width,"x").concat(B)),c.height=B)}m.drawImage(a,0,0,c.width,c.height),_.requestFrame&&_.requestFrame(),g!==r._mediaStreamTrack&&(g=r._mediaStreamTrack,a.srcObject=new MediaStream([g]))})(),p),C=_.stop;return _.stop=()=>{C.call(_),S(),a&&(a.remove(),a=null),c&&(c.width=0,c.remove(),c=null),O.debug("clean low stream renderer")},_}var M6,N6;function x6(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function zx(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?x6(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):x6(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class L6 extends s9{getUserId(){return this._userId}constructor(i,a,c,p){super(i,"track-".concat(i.kind,"-").concat(a,"-").concat(p.clientId,"_").concat(ns(5,""))),q(this,"_userId",void 0),q(this,"_uintId",void 0),q(this,"_isDestroyed",!1),q(this,"store",void 0),this._userId=a,this._uintId=c,this.store=p}_updateOriginMediaStreamTrack(i){this._originMediaStreamTrack=i,this._mediaStreamTrack=i,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,O.info("[".concat(this.getTrackId(),"] is destroyed")),Ne("info",this,"_destroy"),this.stop(),super.close()}}let Yx=yn("RemoteVideoTrack","getTrackId")(M6=class extends L6{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==aa.PLAYING)}constructor(r,i,a,c){super(r,i,a,c),q(this,"_videoVisibleTimer",null),q(this,"_previousVideoVisibleStatus",void 0),q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),q(this,"trackMediaType","video"),q(this,"_videoWidth",void 0),q(this,"_videoHeight",void 0),q(this,"_player",void 0),Ne("info",this,"constructor",{userId:i}),this.updateMediaStreamTrackResolution()}getStats(){return LD(()=>{O.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead"),_e("warning",this,"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),yy(this,nr.GET_STATS)||zx({},wQ)}play(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof r?r:"HTMLElement",i]});if("string"==typeof r){const p=document.getElementById(r);p?r=p:(O.warning("[".concat(this.getTrackId(),'] can not find "#').concat(r,'" element, use document.body')),_e("warning",this,'can not find "#'.concat(r,'" element, use document.body')),r=document.body)}O.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(i)),Ne("debug",this,"play",i);const c=zx(zx({fit:"cover"},i),{},{trackId:this.getTrackId(),element:r});this._player?this._player.updateConfig(c):(this._player=new A8(c),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(C_.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const p=this.getVideoElementVisibleStatus();this.emit(C_.VIDEO_ELEMENT_VISIBLE_STATUS,p)}catch{}},rt("CHECK_VIDEO_VISIBLE_INTERVAL")),a.onSuccess()}stop(){const r=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return r.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,O.debug("[".concat(this.getTrackId(),"] stop video playback")),Ne("debug",this,"stop"),r.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){N9(this._originMediaStreamTrack).then(r=>{let[i,a]=r;this._videoHeight=a,this._videoWidth=i}).catch(B3)}_updatePlayerSource(){O.debug("[".concat(this.getTrackId(),"] update player source track")),Ne("debug",this,"_updatePlayerSource"),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var r,i;const a=null==this||null===(r=this._player)||void 0===r?void 0:r.getContainerElement(),c={track:this,element:null==this||null===(i=this._player)||void 0===i?void 0:i.getVideoElement(),slot:a?.parentElement},{element:p,slot:g}=c;if(this.isPlaying&&p instanceof HTMLVideoElement&&g instanceof HTMLElement){const m=pG.checkOneElementVisible(p),A=Object.assign({},m);if(A.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=A.visible;Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(A.visible?"Video is visible":"Invisible because of ".concat(A.reason))}return A}return}catch(a){throw new h(u.GET_VIDEO_ELEMENT_VISIBLE_ERROR,a.message)}}})||M6,xm=yn("RemoteAudioTrack","getTrackId")(N6=class extends L6{get isPlaying(){return this._useAudioElement?dd.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(r,i,a,c){super(r,i,a,c),q(this,"trackMediaType","audio"),q(this,"_source",void 0),q(this,"_useAudioElement",!0),q(this,"_volume",100),Ne("info",this,"constructor",{userId:i}),rt("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),this._source=new u9(r,!0),this._source.once(Bc.RECEIVE_TRACK_BUFFER,()=>{this.emit(C_.FIRST_FRAME_DECODED)})}setAudioFrameCallback(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!r)return this._source.removeAllListeners(Bc.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(i),this._source.removeAllListeners(Bc.ON_AUDIO_BUFFER),this._source.on(Bc.ON_AUDIO_BUFFER,a=>r(a))}setVolume(r){const i=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),r]},300);this._volume=r,this._useAudioElement?dd.setVolume(this.getTrackId(),r):this._source.setVolume(r/100),i.onSuccess()}setPlaybackDevice(r){var i=this;return U(function*(){const a=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[i.getTrackId(),r]});if(!i._useAudioElement)throw new h(u.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield dd.setSinkID(i.getTrackId(),r)}catch(c){throw a.onError(c),c}a.onSuccess()})()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return LD(()=>{O.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead"),_e("warning",this,"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),yy(this,nr.GET_STATS)||zx({},IQ)}play(){const r=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});O.debug("[".concat(this.getTrackId(),"] start audio playback")),Ne("debug",this,"play"),this._useAudioElement?(O.debug("[".concat(this.getTrackId(),"] use audio element to play")),_e("debug",this,"use audio element to play"),dd.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),r.onSuccess()}stop(){const r=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});O.debug("[".concat(this.getTrackId(),"] stop audio playback")),Ne("debug",this,"stop"),this._useAudioElement?dd.stop(this.getTrackId()):this._source.stop(),r.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){O.debug("[".concat(this.getTrackId(),"] update player source track")),Ne("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&dd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}})||N6;function qx(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function Jx(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?qx(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):qx(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}class $x extends s{constructor(){super(),q(this,"uplinkStatsUploadInterval",void 0),q(this,"uplinkStatsUploadSlowInterval",void 0),q(this,"uplinkRelatedStatsUploadInterval",void 0),q(this,"uplinkDenoiserStatsUploadInterval",void 0),q(this,"transportStatsUploadInterval",void 0),q(this,"extensionStatsUploadInterval",void 0),q(this,"downlinkStatsUploadInterval",void 0),q(this,"downlinkStatsUploadSlowInterval",void 0),q(this,"downlinkRelatedStatsUploadInterval",void 0),q(this,"lastStats",void 0),q(this,"uploadUnplinkStarted",!1),q(this,"uploadDownlinkStarted",!1),q(this,"uploadTransportStarted",!1),q(this,"requestStats",void 0),q(this,"requestLocalMedia",void 0),q(this,"requestRemoteMedia",void 0),q(this,"requestAllTracks",void 0),q(this,"requestVideoIsReady",void 0),q(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var i;const a=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);a&&this.uploadTransportStats(a)},6e3))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var i;const a=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);a&&(this.uploadUplinkStats(a,this.lastStats),this.lastStats=a)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var i;const a=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);a&&this.uploadSlowUplinkStats(a)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var i;const a=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);a&&this.uploadRelatedUplinkStats(a,this.lastStats),this.lastStats=a},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var i;const a=null===(i=this.requestAllTracks)||void 0===i?void 0:i.call(this);a&&this.uploadDenoiserStats(a)},2e3),this.extensionStatsUploadInterval&&window.clearInterval(this.extensionStatsUploadInterval),this.extensionStatsUploadInterval=window.setInterval(()=>{var i;const a=null===(i=this.requestAllTracks)||void 0===i?void 0:i.call(this);a&&this.uploadExtensionStats(a)},2e3))}uploadTransportStats(i){th(()=>{var a;null===(a=this.requestUpload)||void 0===a||a.call(this,du.TRANSPORT_STATS,function(c){const p={connectionType:100};if("relay"===c.selectedCandidatePair.localCandidate.candidateType){const g=c.selectedCandidatePair.localCandidate.relayProtocol;"udp"===g&&(p.connectionType=101),"tcp"===g&&(p.connectionType=103),"tls"===g&&(p.connectionType=104)}return p}(i))})}uploadUplinkStats(i,a){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).forEach(p=>{let[g,{track:m,ssrcs:A}]=p;switch(g){case Rn.LocalVideoLowTrack:case Rn.LocalVideoTrack:{const S=function(T,D,B){var K;const W=D.videoSend.find(de=>de.ssrc===T);if(!W)return null;const Z={id:ns(10,""),timestamp:new Date(D.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:W.ssrc.toString()};switch(Z.A_vstd=B._originMediaStreamTrack&&!B._originMediaStreamTrack.enabled||!B._mediaStreamTrack.enabled?"1":"0",W.sentFrame&&(Z.A_fhs=W.sentFrame.height.toString(),Z.A_frs=W.sentFrame.frameRate.toString(),Z.A_fws=W.sentFrame.width.toString()),W.adaptionChangeReason){case"none":Z.A_ac="0";break;case"cpu":Z.A_ac="1";break;case"bandwidth":Z.A_ac="2";break;case"other":Z.A_ac="3"}return Z.A_lvps=oN[B._player?B._player.videoElementStatus:"uninit"].toString(),Z.A_nr=null===(K=W.nacksCount)||void 0===K?void 0:K.toString(),W.avgEncodeMs&&(Z.A_aem=W.avgEncodeMs.toFixed(0).toString()),Z}(A[0].ssrcId,i,m),C=s5(A[0].ssrcId,i,a);S&&th(()=>{var T;return null===(T=this.requestUpload)||void 0===T?void 0:T.call(this,du.PUBLISH_STATS,{stream_type:g===Rn.LocalVideoLowTrack?"low":"high",stats:Jx(Jx({},S),C)})});break}case Rn.LocalAudioTrack:{const S=function(C,T,D){const B=T.audioSend.find(W=>W.ssrc===C);if(!B)return null;const K={id:ns(10,""),timestamp:new Date(T.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:B.ssrc.toString()};return K.A_astd=D._originMediaStreamTrack.enabled&&D._mediaStreamTrack.enabled?"0":"1",K.A_ail=B.inputLevel?Math.round(100*B.inputLevel).toString():Math.round(100*D._source.getAccurateVolumeLevel()).toString(),K.A_apil=Math.round(100*D._source.getAccurateVolumeLevel()).toString(),B.aecReturnLoss&&(K.A_ecrl=Math.round(B.aecReturnLoss).toString()),B.aecReturnLossEnhancement&&(K.A_ecrle=Math.round(B.aecReturnLossEnhancement).toString()),K}(A[0].ssrcId,i,m);S&&th(()=>{var C;return null===(C=this.requestUpload)||void 0===C?void 0:C.call(this,du.PUBLISH_STATS,{stream_type:"high",stats:S})});break}}const _=function(S){const C={id:"bweforvideo",timestamp:new Date(S.timestamp).toISOString(),type:"VideoBwe"};return S.bitrate.retransmit&&(C.A_rb=S.bitrate.retransmit.toString()),S.bitrate.targetEncoded&&(C.A_teb=S.bitrate.targetEncoded.toString()),C.A_aeb=S.bitrate.actualEncoded.toString(),C.A_tb=S.bitrate.transmit.toString(),void 0!==S.sendBandwidth&&(C.A_asb=S.sendBandwidth.toString()),C}(i);_&&th(()=>{var S;return null===(S=this.requestUpload)||void 0===S?void 0:S.call(this,du.PUBLISH_STATS,{stream_type:g===Rn.LocalVideoLowTrack?"low":"high",stats:_})})})}uploadSlowUplinkStats(i){var a;((null===(a=this.requestLocalMedia)||void 0===a?void 0:a.call(this))||[]).filter(c=>{let[p]=c;return p===Rn.LocalVideoLowTrack||p===Rn.LocalVideoTrack}).forEach(c=>{let[p,{ssrcs:g}]=c;const m=s5(g[0].ssrcId,i);m&&th(()=>{var A;return null===(A=this.requestUpload)||void 0===A?void 0:A.call(this,du.PUBLISH_STATS,{stream_type:p===Rn.LocalVideoLowTrack?"low":"high",stats:m})})})}uploadRelatedUplinkStats(i,a){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).filter(p=>{let[g]=p;return g===Rn.LocalVideoLowTrack||g===Rn.LocalVideoTrack}).forEach(p=>{let[g,{ssrcs:m}]=p;const A=function(_,S){const C=S.videoSend.find(T=>T.ssrc===_);return C?{mediaType:"video",isVideoMute:!1,frameRateInput:C.inputFrame&&C.inputFrame.frameRate.toString(),frameRateSent:C.sentFrame&&C.sentFrame.frameRate.toString(),googRtt:C.rttMs.toString(),qpSumPerFrame:Math.floor(C.qpSumPerFrame).toString()}:null}(m[0].ssrcId,i);A&&th(()=>{var _;null===(_=this.requestUpload)||void 0===_||_.call(this,du.PUBLISH_RELATED_STATS,{stream_type:g===Rn.LocalVideoLowTrack?"low":"high",stats:A})})})}uploadDenoiserStats(i){for(let g=0;g<i.length;g++){const m=i[g];if(m instanceof kS){var a,c,p;const A=null===(a=(c=m._external).getDenoiserStats)||void 0===a?void 0:a.call(c);return void(A&&(null===(p=this.requestUpload)||void 0===p||p.call(this,du.DENOISER_STATS,A)))}}}uploadExtensionStats(i){for(let a=0;a<i.length;a++){const c=i[a];if(c instanceof kS)return void c.getProcessorStats().forEach(p=>{var g;p.type===du.DENOISER_STATS&&(null===(g=this.requestUpload)||void 0===g||g.call(this,du.DENOISER_STATS,p.stats))})}}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var i;const a=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);a&&(this.uploadDownlinkStats(a,this.lastStats),this.lastStats=a)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var i;const a=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);a&&this.uploadSlowDownlinkStats(a)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var i;const a=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);a&&(this.uploadRelatedDownlinkStats(a,this.lastStats),this.lastStats=a)},1e3))}uploadDownlinkStats(i,a){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(p=>{let[g,m]=p;if(m.has(Wr.VIDEO)&&g.videoTrack){const A=g.videoTrack?function(_,S,C){const T=S.videoRecv.find(W=>W.ssrc===_);if(!T)return null;const D={id:ns(10,""),timestamp:new Date(S.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:T.ssrc.toString()};var B,K;return D.bytesReceived=T.bytes.toString(),D.packetsLost=T.packetsLost.toString(),D.packetsReceived=T.packets.toString(),T.framesRateFirefox&&(D.A_frr=T.framesRateFirefox.toString()),T.receivedFrame?(D.A_frr=T.receivedFrame.frameRate.toString(),D.A_fhr=T.receivedFrame.height.toString(),D.A_fwr=T.receivedFrame.width.toString()):(D.A_fhr=null===(B=C._videoHeight)||void 0===B?void 0:B.toString(),D.A_fwr=null===(K=C._videoWidth)||void 0===K?void 0:K.toString()),D.A_frd=T.decodeFrameRate.toString(),T.outputFrame&&(D.A_fro=T.outputFrame.frameRate.toString()),void 0!==T.jitterBufferMs&&(D.A_jbm=Math.floor(T.jitterBufferMs).toString()),void 0!==T.currentDelayMs&&(D.A_cdm=Math.floor(T.currentDelayMs).toString()),D.A_fs=T.firsCount.toString(),D.A_ns=T.nacksCount.toString(),D.A_ps=T.plisCount.toString(),C&&(D.A_vrtd=C._originMediaStreamTrack.enabled&&C._mediaStreamTrack.enabled?"0":"1"),C._player&&C._player.freezeTimeCounterList.length>0&&(D.A_vrft=C._player.freezeTimeCounterList.splice(0,1)[0].toString()),D.A_rvps=oN[C._player?C._player.videoElementStatus:"uninit"].toString(),D}(g._videoSSRC,i,g.videoTrack):void 0;A&&th(()=>{var _;return null===(_=this.requestUpload)||void 0===_?void 0:_.call(this,du.SUBSCRIBE_STATS,{stream_id:g.uid,stats:A})})}if(m.has(Wr.AUDIO)&&g.audioTrack){const A=g.audioTrack?function(_,S,C){const T=S.audioRecv.find(B=>B.ssrc===_);if(!T)return null;const D={id:ns(10,""),timestamp:new Date(S.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:T.ssrc.toString()};return D.bytesReceived=T.bytes.toString(),D.packetsLost=T.packetsLost.toString(),D.packetsReceived=T.packets.toString(),D.A_aol=T.outputLevel?Math.round(100*T.outputLevel).toString():Math.round(100*C._source.getAccurateVolumeLevel()).toString(),D.A_apol=Math.round(100*C._source.getAccurateVolumeLevel()).toString(),C&&(D.A_artd=C._originMediaStreamTrack.enabled&&C._mediaStreamTrack.enabled?"0":"1"),D.A_jr=T.jitterMs.toString(),D.A_jbm=Math.floor(T.jitterBufferMs).toString(),D.A_cdm=Math.floor(T.jitterBufferMs).toString(),D.A_raps=oN[dd.getPlayerState(C.getTrackId())].toString(),D}(g._audioSSRC,i,g.audioTrack):void 0;A&&th(()=>{var _;return null===(_=this.requestUpload)||void 0===_?void 0:_.call(this,du.SUBSCRIBE_STATS,{stream_id:g.uid,stats:A})})}})}uploadSlowDownlinkStats(i){}uploadRelatedDownlinkStats(i,a){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(p=>{let[g,m]=p;if(m.has(Wr.VIDEO)&&g.videoTrack){var A;const _=!0===(g._videoSSRC&&(null===(A=this.requestVideoIsReady)||void 0===A?void 0:A.call(this,g._videoSSRC))||!1),S=function(C,T,D,B,K,W){const Z=D.videoRecv.find(De=>De.ssrc===C),de=K?K.videoRecv.find(De=>De.ssrc===C):void 0;if(!Z)return null;const ge=MS.isRemoteVideoFreeze(W,Z,de)&&T,Se={mediaType:"video",isVideoMute:!1,peerId:B,frameRateReceived:Z.receivedFrame&&Z.receivedFrame.frameRate.toString(),frameRateDecoded:Z.decodedFrame&&Z.decodedFrame.frameRate.toString(),isFreeze:ge,bytesReceived:Z.bytes.toString(),packetsReceived:Z.packets.toString(),packetsLost:Z.packetsLost.toString(),qpSumPerFrame:Math.floor(Z.qpSumPerFrame).toString()};return Z.framesRateFirefox&&(Se.frameRateDecoded=Z.framesRateFirefox.toString(),Se.frameRateReceived=Z.framesRateFirefox.toString()),Se}(g._videoSSRC,_,i,g.uid,a,g.videoTrack);S&&th(()=>{var C;null===(C=this.requestUpload)||void 0===C||C.call(this,du.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:S})})}if(m.has(Wr.AUDIO)&&g.audioTrack){const _=function(S,C,T,D){const B=C.audioRecv.find(W=>W.ssrc===S);if(!B)return null;const K=MS.isRemoteAudioFreeze(D);return{mediaType:"audio",isAudioMute:!1,peerId:T,googJitterReceived:B.jitterMs.toString(),isFreeze:K,bytesReceived:B.bytes.toString(),packetsReceived:B.packets.toString(),packetsLost:B.packetsLost.toString(),frameReceived:B.receivedFrames.toString(),frameDropped:B.droppedFrames.toString()}}(g._audioSSRC,i,g.uid,g.audioTrack);_&&th(()=>{var S;null===(S=this.requestUpload)||void 0===S||S.call(this,du.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:_})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}}var B6,Ai;function F6(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function wy(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?F6(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):F6(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function U6(r){var i,a,c,p=2;for(typeof Symbol<"u"&&(a=hp,c=Symbol.iterator);p--;){if(a&&null!=(i=r[a]))return i.call(r);if(c&&null!=(i=r[c]))return new Ck(i.call(r));a="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function Ck(r){function i(a){if(Object(a)!==a)return Un.reject(new TypeError(a+" is not an object."));var c=a.done;return Un.resolve(a.value).then(function(p){return{value:p,done:c}})}return(Ck=function(a){this.s=a,this.n=a.next}).prototype={s:null,n:null,next:function(){return i(this.n.apply(this.s,arguments))},return:function(a){var c=this.s.return;return void 0===c?Un.resolve({value:a,done:!0}):i(c.apply(this.s,arguments))},throw:function(a){var c=this.s.return;return void 0===c?Un.reject(a):i(c.apply(this.s,arguments))}},new Ck(r)}let oW=yn("P2PChannel","store.p2pId")((Kn((Ai=class extends s{get state(){return this._state}set state(r){const i=this._state;this._state=r,this.emit(di.StateChange,i,this._state)}constructor(r,i){var a;super(),a=this,q(this,"store",void 0),q(this,"statsUploader",void 0),q(this,"connection",void 0),q(this,"localTrackMap",new Map),q(this,"remoteUserMap",new Map),q(this,"pendingLocalTracks",[]),q(this,"pendingRemoteTracks",[]),q(this,"statsCollector",void 0),q(this,"isPlanB",!1),q(this,"iceFailedCount",0),q(this,"dtlsFailedCount",0),q(this,"mutex",new fu("P2PChannel-mutex")),q(this,"_state",ad.Disconnected),q(this,"handleMuteLocalTrack",function(){var c=U(function*(p,g,m){const A=yield a.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!a.connection)return void m(new h(u.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));Ne("debug",a,"handleMuteLocalTrack",p.getTrackId()),yield a.waitTillConnected();const _=a.filterTobeMutedTracks(p);if(0===_.length)return void g();const S=_.find(T=>"videoLowTrack"===T[0]);S&&S[1].track._originMediaStreamTrack.stop(),yield a.connection.muteLocal(_.map(T=>{let[,{id:D}]=T;return D}));const C=a.createMuteMessage(_);yield Ro(a,di.RequestMuteLocal,C),g()}catch(_){m(_)}finally{A()}});return function(p,g,m){return c.apply(this,arguments)}}()),q(this,"handleUnmuteLocalTrack",function(){var c=U(function*(p,g,m){const A=yield a.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!a.connection)return void m(new h(u.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));Ne("debug",a,"handleUnmuteLocalTrack",p.getTrackId()),yield a.waitTillConnected();const _=a.filterTobeUnmutedTracks(p);if(0===_.length)return void g();const S=_.find(T=>"videoLowTrack"===T[0]);if(S){const T=S[1];if(T.track._originMediaStreamTrack.stop(),Uc().supportDualStreamEncoding){const D=p._mediaStreamTrack.clone();T.track._mediaStreamTrack=D,T.track._originMediaStreamTrack=D}else{const D=aV(p,Nw(a,di.RequestLowStreamParameter));T.track._mediaStreamTrack=D,T.track._originMediaStreamTrack=D}yield new Un((D,B)=>{a.handleReplaceTrack(T.track,D,B,!0)})}yield a.connection.unmuteLocal(_.map(T=>{let[,{id:D}]=T;return D}));const C=a.createUnmuteMessage(_);yield Ro(a,di.RequestUnmuteLocal,C),g()}catch(_){m(_)}finally{A()}});return function(p,g,m){return c.apply(this,arguments)}}()),q(this,"handleUpdateVideoEncoder",function(){var c=U(function*(p,g,m){const A=yield a.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const _=a.localTrackMap.get(Rn.LocalVideoTrack);if(!a.connection||!_||_.track!==p)return void g();yield a.waitTillConnected();const{id:S,track:C}=_;yield a.connection.updateSendParameters(S,C),yield a.connection.updateEncoderConfig(S,C),a.emit(di.UpdateVideoEncoder,C),g()}catch(_){m(_)}finally{A()}});return function(p,g,m){return c.apply(this,arguments)}}()),q(this,"handleSetOptimizationMode",function(){var c=U(function*(p,g,m){const A=yield a.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const _=a.localTrackMap.get(Rn.LocalVideoTrack);if(!a.connection||!_||_.track!==p)return;yield a.waitTillConnected();const{id:S,track:C}=_;yield a.connection.updateSendParameters(S,C),g()}catch(_){m(_)}finally{A()}});return function(p,g,m){return c.apply(this,arguments)}}()),q(this,"handleReplaceTrack",function(){var c=U(function*(p,g,m,A){let _;O.debug("P2PChannel handleReplaceTrack for [track-id-".concat(p.getTrackId(),"]")),"boolean"==typeof A&&A||(_=yield a.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var S;const T=Array.from(a.localTrackMap.entries()).find(D=>{let[,{track:B}]=D;return p===B});if(!a.connection||!T)return void g();if(yield a.waitTillConnected(),yield null===(S=a.connection)||void 0===S?void 0:S.replaceTrack(p,T[1].id),a.isPlanB){const D=T[1];D.id=p._mediaStreamTrack.id,a.localTrackMap.set(T[0],D)}if(T[0]===Rn.LocalVideoTrack&&Uc().supportDualStreamEncoding){const D=a.localTrackMap.get(Rn.LocalVideoLowTrack);if(D){const B=p._mediaStreamTrack.clone();D.track._originMediaStreamTrack.stop(),D.track._mediaStreamTrack=B,D.track._originMediaStreamTrack=B,yield new Un((K,W)=>{a.handleReplaceTrack(D.track,K,W,!0)})}}g()}catch(T){m(T)}finally{var C;null===(C=_)||void 0===C||C()}});return function(p,g,m,A){return c.apply(this,arguments)}}()),q(this,"handleGetLocalVideoStats",c=>{c(this.statsCollector.getLocalVideoTrackStats())}),q(this,"handleGetLocalAudioStats",c=>{c(this.statsCollector.getLocalAudioTrackStats())}),q(this,"handleGetRemoteVideoStats",c=>this.statsCollector.getRemoteVideoTrackStats(c.uid)[c.uid]),q(this,"handleGetRemoteAudioStats",c=>this.statsCollector.getRemoteAudioTrackStats(c.uid)[c.uid]),this.store=r,this.statsCollector=i,this.statsCollector.addP2PChannel(this),this.statsUploader=new $x,this.bindStatsUploaderEvents(),this.isPlanB=!Uc().supportUnifiedPlan||rt("CHROME_FORCE_PLAN_B")&&cS()}startP2PConnection(r){var i=this;return U(function*(){return i.state=ad.New,i.connection=i.isPlanB?new Mz(r,i.store):new iW(r,i.store),i.bindConnectionEvents(i.connection),i.connection.establish()})()}connect(r,i,a,c,p,g){var m=this;return U(function*(){if(!m.connection)throw new h(u.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");m.store.peerConnectionStart(),yield m.connection.connect(r,i,a,c,p,g),m.statsUploader.startUploadTransportStats(),m.state=ad.Connected})()}publish(r,i,a){var c=this;return $w(function*(){const p=yield Ko(c.mutex.lock("From P2PChannel.publish"));try{if(!c.connection){if(c.state===ad.Disconnected)throw new h(u.UNEXPECTED_ERROR,"PeerConnection already disconnected.");c.throwIfTrackTypeNotMatch(r);const m=r.filter(A=>-1===c.pendingLocalTracks.indexOf(A));return void(c.pendingLocalTracks=c.pendingLocalTracks.concat(m))}c.store.pubId=c.store.pubId+1,Cl.markPublishStart(c.store.clientId,c.store.pubId),yield Ko(c.waitTillConnected());const g=c.filterTobePublishedTracks(r,i,a);if(0===g.length)return void(yield Ko(c.tryToUnmuteAudio(r)));yield*jx(U6(c.doPublish(c.connection,g)),Ko)}finally{p()}})()}doPublish(r,i){var a=this;return $w(function*(){i.forEach(S=>{let{track:C,type:T}=S;const D=performance.now();a.store.publish(C.getTrackId(),T===Rn.LocalAudioTrack?"audio":"video",D)}),a.bindLocalTrackEvents(i);const c=yield Ko(r.send(i.map(S=>{let{track:C}=S;return C}),a.store.codec,a.store.audioCodec)),p=(yield Ko(c.next())).value,g=a.createGatewayPublishMessage(i,p);let m;try{m=yield g}catch(S){throw _e("error",a,"doPublish yield error: ".concat(S.toString())),c.throw(S),S?.code===u.WS_ABORT&&i.forEach(C=>{let{track:T}=C;-1===a.pendingLocalTracks.indexOf(T)&&a.pendingLocalTracks.push(T)}),a.unbindLocalTrackEvents(i),S}const A=a.mapPubResToRemoteConfig(g,m);Ne("debug",a,"doPublish",{remoteConfigs:A,tracks:i.map(S=>{let{track:C}=S;return C.getTrackId()}),pubMsg:g,pubAns:m});const _=(yield Ko(c.next(A))).value;i.forEach(S=>{let{type:C}=S;a.statsCollector.addLocalStats(C)}),a.assignLocalTracks(i,_),a.statsUploader.startUploadUplinkStats(),i.forEach(S=>{let{track:C,type:T}=S;const D=performance.now();a.store.publish(C.getTrackId(),T===Rn.LocalAudioTrack?"audio":"video",void 0,D)})})()}publishLowStream(r){var i=this;return $w(function*(){if(!i.connection)return;Ne("debug",i,"publishLowStream",r);const a=yield Ko(i.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const p=i.localTrackMap.get(Rn.LocalVideoTrack);if(!p)throw new h(u.UNEXPECTED_ERROR,"Could not find high stream");if(i.localTrackMap.has(Rn.LocalVideoLowTrack))throw new h(u.UNEXPECTED_ERROR,"[".concat(i.store.clientId,"] Can't publish low stream when stream already publish"));yield Ko(i.waitTillConnected());const g=[{track:i.getLowVideoTrack(p.track,r),type:Rn.LocalVideoLowTrack}];if(yield*jx(U6(i.doPublish(i.connection,g)),Ko),p.track.muted||!p.track.enabled){var c;const m=null===(c=i.localTrackMap.get(Rn.LocalVideoLowTrack))||void 0===c?void 0:c.id;void 0!==m&&(yield Ko(i.connection.muteLocal([m])))}}finally{a()}})()}republish(){var r=this;return U(function*(){r.pendingLocalTracks.length>0&&(O.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),Ne("debug",r,"republish",r.pendingLocalTracks.map(i=>i.getTrackId())),yield up(r,di.RequestRePublish,r.pendingLocalTracks),r.emit(di.MediaReconnectEnd,r.store.uid),r.pendingLocalTracks=[])})()}reSubscribe(r){var i=this;return U(function*(){Ne("debug",i,"reSubscribe",i.pendingRemoteTracks.map(a=>{let{user:c}=a;return c.uid}));for(let a=i.pendingRemoteTracks.length-1;a>=0;a--){const{user:c,kind:p}=i.pendingRemoteTracks[a];(p!==Wr.AUDIO||c._audio_added_&&c._audioSSRC)&&(p!==Wr.VIDEO||c._video_added_&&c._videoSSRC)||i.pendingRemoteTracks.splice(a,1)}if(r)yield up(i,di.RequestReSubscribe,i.pendingRemoteTracks);else for(const{user:a,kind:c}of i.pendingRemoteTracks)yield i.subscribe(a,c,c===Wr.VIDEO?a._videoSSRC:a._audioSSRC);i.pendingRemoteTracks.forEach(a=>{let{user:c}=a;i.emit(di.MediaReconnectEnd,c.uid)}),i.pendingRemoteTracks=[]})()}unpublish(r){var i=this;return U(function*(){if(!i.connection)return void r.forEach(p=>{const g=i.pendingLocalTracks.indexOf(p);-1!==g&&i.pendingLocalTracks.splice(g,1)});yield i.waitTillConnected();const a=i.filterTobeUnpublishedTracks(r);if(0===a.length)return;const c=a.find(p=>"videoLowTrack"===p[0]);return c&&c[1].track.close(),Ne("debug",i,"unpublish"),i.doUnpublish(i.connection,a)})()}unpublishLowStream(){var r=this;return U(function*(){if(!r.connection)return;Ne("debug",r,"unpublishLowStream");const i=r.localTrackMap.get(Rn.LocalVideoLowTrack);return i?(yield r.waitTillConnected(),i.track.close(),r.doUnpublish(r.connection,[[Rn.LocalVideoLowTrack,i]])):void 0})()}doUnpublish(r,i){var a=this;return U(function*(){const c=a.createGatewayUnpublishMessage(i);return yield r.stopSending(i.map(p=>{let[,{id:g}]=p;return g})),a.withdrawLocalTracks(i),a.unbindLocalTrackEvents(i.map(p=>{let[g,{track:m}]=p;return{type:g,track:m}})),i.forEach(p=>{let[g]=p;a.statsCollector.removeLocalStats(g)}),0===a.localTrackMap.size&&a.statsUploader.stopUploadUplinkStats(),c})()}subscribe(r,i,a,c,p){var g=this;return U(function*(){var m;if(!g.connection)throw new h(u.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(Ne("debug",g,"subscribe",{uid:r.uid,mediaType:i,ssrcId:a}),null!==(m=g.remoteUserMap.get(r))&&void 0!==m&&m.has(i))return;let A,_;if(yield g.waitTillConnected(),p){const T=p.find(B=>{let{stream_type:K}=B;return K===i});if(!T)throw new h(u.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(i," for user: ").concat(r.uid," because subscribe answer from gateway does not contain stream_type: ").concat(i,"."));const D=yield g.connection.receive(i,T.ssrcs,String(r._uintid),T.attributes);A=D.track,_=D.id}else{const T=yield g.connection.receive(i,[{ssrcId:a,rtx:c}],String(r._uintid),void 0);A=T.track,_=T.id}i===Wr.AUDIO?(r._audioTrack?r._audioTrack._updateOriginMediaStreamTrack(A):(r._audioTrack=new xm(A,r.uid,r._uintid,g.store),O.info("[".concat(g.store.p2pId,"] create remote audio track: ").concat(r._audioTrack.getTrackId()))),g.bindRemoteTrackEvents(r,r._audioTrack)):(r._videoTrack?r._videoTrack._updateOriginMediaStreamTrack(A):(r._videoTrack=new Yx(A,r.uid,r._uintid,g.store),O.info("[".concat(g.store.p2pId,"] create remote video track: ").concat(r._videoTrack.getTrackId()))),g.bindRemoteTrackEvents(r,r._videoTrack));const S=g.remoteUserMap.get(r);S?S.set(i,_):g.remoteUserMap.set(r,new Map([[i,_]])),g.statsCollector.addRemoteStats(r.uid),g.statsUploader.startUploadDownlinkStats();const C=g.pendingRemoteTracks.findIndex(T=>{let{user:D,kind:B}=T;return D.uid===r.uid&&i===B});-1!==C&&(g.pendingRemoteTracks.splice(C,1),g.emit(di.MediaReconnectEnd,r.uid))})()}massSubscribe(r){var i=this;return U(function*(){return i.massSubscribeNoLock(r)})()}massSubscribeNoLock(r){var i=this;return U(function*(){if(!i.connection)throw new h(u.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");Ne("debug",i,"subscribeAll",r.map(c=>{let{user:p,mediaType:g,ssrcId:m}=c;return{uid:p.uid,mediaType:g,ssrcId:m}})),r=r.filter(c=>{var p;let{user:g,mediaType:m}=c;return!(null!==(p=i.remoteUserMap.get(g))&&void 0!==p&&p.has(m))}),yield i.waitTillConnected();const a=yield i.connection.batchReceive(r.map(c=>{let{user:p,mediaType:g,ssrcId:m,rtxSsrcId:A}=c;return{kind:g,ssrcMsg:[{ssrcId:m,rtx:A}],mslabel:String(p._uintid)}}));r.forEach((c,p)=>{let{user:g,mediaType:m}=c;const{track:A,id:_}=a[p];m===Wr.AUDIO?(g._audioTrack?g._audioTrack._updateOriginMediaStreamTrack(A):(g._audioTrack=new xm(A,g.uid,g._uintid,i.store),O.info("[".concat(i.store.p2pId,"] create remote audio track: ").concat(g._audioTrack.getTrackId()))),i.bindRemoteTrackEvents(g,g._audioTrack)):(g._videoTrack?g._videoTrack._updateOriginMediaStreamTrack(A):(g._videoTrack=new Yx(A,g.uid,g._uintid,i.store),O.info("[".concat(i.store.p2pId,"] create remote video track: ").concat(g._videoTrack.getTrackId()))),i.bindRemoteTrackEvents(g,g._videoTrack));const S=i.remoteUserMap.get(g);S?S.set(m,_):i.remoteUserMap.set(g,new Map([[m,_]])),i.statsCollector.addRemoteStats(g.uid),i.statsUploader.startUploadDownlinkStats();const C=i.pendingRemoteTracks.findIndex(T=>{let{user:D,kind:B}=T;return D.uid===g.uid&&m===B});-1!==C&&(i.pendingRemoteTracks.splice(C,1),i.emit(di.MediaReconnectEnd,g.uid))})})()}unsubscribe(r,i,a){var c=this;return U(function*(){const p=c.pendingRemoteTracks.filter(A=>{let{user:_,kind:S}=A;return void 0!==i?_.uid===r.uid&&i===S:_.uid===r.uid});if(p.forEach(A=>{const _=c.pendingRemoteTracks.indexOf(A);c.pendingRemoteTracks.splice(_,1)}),!c.connection)return void p.forEach(A=>{let{kind:_}=A;var S;if(_===Wr.AUDIO)null===(S=r._audioTrack)||void 0===S||S._destroy(),r._audioTrack=void 0;else if(_===Wr.VIDEO){var C;null===(C=r._videoTrack)||void 0===C||C._destroy(),r._videoTrack=void 0}});Ne("debug",c,"unsubscribe",{uid:r.uid,mediaType:i});const g=c.filterTobeUnSubscribedTracks(r,i);if(0===g.length)return;yield c.connection.stopReceiving(g.map(A=>{let[,{id:_}]=A;return _}));const m=c.createUnsubscribeMessage(g);return c.withdrawRemoteTracks(g),0===c.remoteUserMap.size&&c.statsUploader.stopUploadDownlinkStats(),g.forEach(A=>{let[_,{kind:S}]=A;var C,T;if(S===Wr.VIDEO&&_._videoSSRC&&(null===(C=c.connection)||void 0===C||C.setStatsRemoteVideoIsReady(_._videoSSRC,!1)),S===Wr.VIDEO)c.unbindRemoteTrackEvents(_._videoTrack),a||(null===(T=_._videoTrack)||void 0===T||T._destroy(),_._videoTrack=void 0);else if(S===Wr.AUDIO){var D;c.unbindRemoteTrackEvents(_._audioTrack),!a&&(null===(D=_._audioTrack)||void 0===D||D._destroy(),_._audioTrack=void 0)}}),m})()}massUnsubscribe(r){var i=this;return U(function*(){return i.massUnsubscribeNoLock(r)})()}massUnsubscribeNoLock(r){var i=this;return U(function*(){let a=[];for(const{user:g,mediaType:m}of r){const A=i.pendingRemoteTracks.filter(_=>{let{user:S,kind:C}=_;return void 0!==m?S.uid===g.uid&&m===C:S.uid===g.uid});A.forEach(_=>{const S=i.pendingRemoteTracks.indexOf(_);i.pendingRemoteTracks.splice(S,1)}),a=a.concat(A)}if(!i.connection)return void a.forEach(g=>{let{user:m,kind:A}=g;var _;if(A===Wr.AUDIO)null===(_=m._audioTrack)||void 0===_||_._destroy(),m._audioTrack=void 0;else if(A===Wr.VIDEO){var S;null===(S=m._videoTrack)||void 0===S||S._destroy(),m._videoTrack=void 0}});Ne("debug",i,"batchUnsubscribe",r.map(g=>{let{user:m,mediaType:A}=g;return{uid:m.uid,mediaType:A}}));const c=Lh(r).call(r,(g,m)=>{let{user:A,mediaType:_}=m;const S=i.filterTobeUnSubscribedTracks(A,_);return g.concat(S)},[]);if(0===c.length)return;yield i.connection.stopReceiving(c.map(g=>{let[,{id:m}]=g;return m}));const p=i.createUnsubscribeAllMessage(c);return i.withdrawRemoteTracks(c),0===i.remoteUserMap.size&&i.statsUploader.stopUploadDownlinkStats(),c.forEach(g=>{let[m,{kind:A}]=g;var _,S;if(A===Wr.VIDEO&&m._videoSSRC&&(null===(_=i.connection)||void 0===_||_.setStatsRemoteVideoIsReady(m._videoSSRC,!1)),A===Wr.VIDEO)i.unbindRemoteTrackEvents(m._videoTrack),null===(S=m._videoTrack)||void 0===S||S._destroy(),m._videoTrack=void 0;else if(A===Wr.AUDIO){var C;i.unbindRemoteTrackEvents(m._audioTrack),null===(C=m._audioTrack)||void 0===C||C._destroy(),m._audioTrack=void 0}}),p})()}muteRemote(r,i){var a=this;return U(function*(){if(!a.connection)return;Ne("debug",a,"muteRemote",{uid:r.uid,kind:i});const c=a.remoteUserMap.get(r);if(!c)return O.warning("P2PChannel.muteRemote has no remote user ".concat(r.uid,".")),void _e("warning",a,"P2PChannel.muteRemote has no remote user ".concat(r.uid,"."));if(!c.get(i))return O.warning("P2PChannel.muteRemote has no remote user ".concat(r.uid," media type ").concat(i,".")),void _e("warning",a,"P2PChannel.muteRemote has no remote user ".concat(r.uid," media type ").concat(i,"."));const p=i===Wr.VIDEO?r._videoSSRC:r._audioSSRC;void 0!==p&&a.connection.setStatsRemoteVideoIsReady(p,!1)})()}unmuteRemote(r,i){var a=this;return U(function*(){return a.unmuteRemoteNoLock(r,i)})()}unmuteRemoteNoLock(r,i){var a=this;return U(function*(){if(!a.connection)return;Ne("debug",a,"unmuteRemote",{uid:r.uid,kind:i});const c=a.remoteUserMap.get(r);return c?c.get(i)?void 0:(O.warning("P2PChannel.unmuteRemote has no remote user ".concat(r.uid," media type ").concat(i,".")),void _e("warning",a,"unmuteRemote has no remote user ".concat(r.uid," media type ").concat(i))):(O.warning("P2PChannel.unmuteRemote has no remote user ".concat(r.uid,".")),void _e("warning",a,"unmuteRemote has no remote user ".concat(r.uid)))})()}getAllTracks(r){const i=this.localTrackMap.get(Rn.LocalAudioTrack);if(i?.track instanceof pd){const a=i.track;return Array.from(this.localTrackMap.entries()).filter(c=>{let[p]=c;return p!==Rn.LocalAudioTrack}).filter(c=>{let[p]=c;return!(r&&p===Rn.LocalVideoLowTrack)}).map(c=>{let[,{track:p}]=c;return p}).concat(a.trackList)}return Array.from(this.localTrackMap.entries()).filter(a=>{let[c]=a;return!(r&&c===Rn.LocalVideoLowTrack)}).map(a=>{let[,{track:c}]=a;return c})}reportPublishEvent(r,i,a,c,p){if(r){const m=this.localTrackMap.get(Rn.LocalAudioTrack),A=this.localTrackMap.get(c?Rn.LocalVideoLowTrack:Rn.LocalVideoTrack);Gt.publish(this.store.sessionId,{eventElapse:Cl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:r,ec:i,audioName:m?.track.getTrackLabel(),videoName:A?.track.getTrackLabel(),screenshare:-1!==A?.track._hints.indexOf(Fc.SCREEN_TRACK),audio:!!m,video:!!A,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:p})}else{var g;a||(a=[]);const m=a.find(_=>_ instanceof Ga),A=c?null===(g=this.localTrackMap.get(Rn.LocalVideoTrack))||void 0===g?void 0:g.track:a.find(_=>_ instanceof Ns);Gt.publish(this.store.sessionId,{eventElapse:Cl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:r,ec:i,audioName:m?.getTrackLabel(),videoName:A?.getTrackLabel(),screenshare:-1!==A?._hints.indexOf(Fc.SCREEN_TRACK),audio:!!m,video:!!A,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:p})}}reportSubscribeEvent(r,i,a,c){const p=c===Wr.VIDEO?a._videoSSRC:a._audioSSRC;p&&Gt.subscribe(this.store.sessionId,{succ:r,ec:i,video:c===Wr.VIDEO,audio:c===Wr.AUDIO,peerid:a.uid,subscribeRequestid:c===Wr.VIDEO?a._videoSSRC:a._audioSSRC,p2pid:this.store.p2pId,eventElapse:Cl.measureFromSubscribeStart(this.store.clientId,p)})}reset(){O.debug("P2PChannel.reset"),this.mutex=new fu("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=ad.Disconnected}getStats(){var r;return null===(r=this.connection)||void 0===r?void 0:r.getStats()}getRemoteVideoIsReady(r){var i;return(null===(i=this.connection)||void 0===i?void 0:i.getRemoteVideoIsReady(r))||!1}getLocalAudioVolume(){const r=this.localTrackMap.get(Rn.LocalAudioTrack);if(r)return r.track.getVolumeLevel()}getLocalVideoSize(){const r=this.localTrackMap.get(Rn.LocalVideoTrack);if(r)return{width:r.track._videoWidth||0,height:r.track._videoHeight||0}}getEncoderConfig(r){const i=this.localTrackMap.get(r);return i&&i.track instanceof Ns||i&&i.track instanceof Ga?i.track._encoderConfig:void 0}getLocalMedia(r){return this.localTrackMap.get(r)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(r,i){if(!r)return this.remoteUserMap.size>0;const a=this.remoteUserMap.get(r);return!!a&&(!i||a.has(i))}hasRemoteMediaWithLock(r,i){var a=this;return U(function*(){if(!r)return a.remoteUserMap.size>0;const c=a.remoteUserMap.get(r);return!!c&&(!i||c.has(i))})()}getRemoteMedia(r){var i;const a=Array.from(gy(i=this.remoteUserMap).call(i)).find(c=>c.uid===r);return a?{audioTrack:a.audioTrack,audioSSRC:a._audioSSRC,videoTrack:a.videoTrack,videoSSRC:a._videoSSRC}:{}}getAudioLevels(){let r=Array.from(this.remoteUserMap.entries()).map(a=>{let[c]=a;return{uid:c.uid,level:c.audioTrack?100*c.audioTrack._source.getAccurateVolumeLevel():0}});const i=this.localTrackMap.get(Rn.LocalAudioTrack);return i&&r.push({level:100*i.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),r=yF(r).call(r,(a,c)=>a.level-c.level),r}disconnectForReconnect(){var r=this;return U(function*(){r.connection&&(Ne("debug",r,"disconnectForReconnect"),O.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),r.state=ad.Reconnecting,r.connection.close(),r.unbindConnectionEvents(r.connection),r.connection=void 0,0!==r.localTrackMap.size&&(Array.from(r.localTrackMap.entries()).forEach(i=>{let[a,{track:c}]=i;switch(a){case Rn.LocalVideoTrack:c._hints.includes(Fc.LOW_STREAM)?c.close():r.pendingLocalTracks.push(c);break;case Rn.LocalAudioTrack:c instanceof pd?r.pendingLocalTracks=r.pendingLocalTracks.concat(c.trackList):r.pendingLocalTracks.push(c)}}),r.emit(di.MediaReconnectStart,r.store.uid)),r.unbindLocalTrackEvents(),r.localTrackMap.clear(),0!==r.remoteUserMap.size&&Array.from(r.remoteUserMap.entries()).forEach(i=>{let[a,c]=i;Array.from(gy(c).call(c)).forEach(p=>{r.setPendingRemoteMedia(a,p)}),r.emit(di.MediaReconnectStart,a.uid)}),r.unbindAllRemoteTrackEvents(),r.remoteUserMap.clear(),r.statsUploader.stopUploadUplinkStats(),r.statsUploader.stopUploadDownlinkStats(),r.statsUploader.stopUploadTransportStats(),O.debug("P2PChannel disconnected, waiting to reconnect."))})()}hasPendingRemoteMedia(r,i){for(const a of this.pendingRemoteTracks){const{user:c,kind:p}=a;if((r instanceof Mx?r.uid:r)===c.uid&&i===p)return!0}return!1}setPendingRemoteMedia(r,i){this.hasPendingRemoteMedia(r,i)||this.pendingRemoteTracks.push({user:r,kind:i})}reEstablish(){var r=this;return U(function*(){if(r.connection)return r.connection.reEstablish()})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const r=this.connection.getStats(),i=this.localTrackMap.get(Rn.LocalVideoTrack),a=this.localTrackMap.get(Rn.LocalAudioTrack),c=r.videoSend.find(B=>B.ssrc===i?.ssrcs[0].ssrcId),p=r.audioSend.find(B=>B.ssrc===a?.ssrcs[0].ssrcId);if(!c||!p)return 1;const g=yy(this,di.NeedSignalRTT),m=c?c.rttMs:void 0,A=p?p.rttMs:void 0,_=m&&A?(m+A)/2:m||A,C=100*r.sendPacketLossRate*.7/50+.3*((_&&g?(_+g)/2:_||g)||0)/1500,T=C<.17?1:C<.36?2:C<.59?3:C<.1?4:5,D=i?.track;if(D&&D._encoderConfig&&-1===D._hints.indexOf(Fc.SCREEN_TRACK)){const B=D._encoderConfig.bitrateMax,K=r.bitrate.actualEncoded;if(B&&K){const W=(1e3*B-K)/(1e3*B);return Eo[W<.15?0:W<.3?1:W<.45?2:W<.6?3:4][T]}}return T}getDownlinkNetworkQuality(){if(!this.connection)return 0;const r=this.connection.getStats();let i=0;return Array.from(this.remoteUserMap.entries()).forEach(a=>{let[c]=a;const p=c._audioSSRC,g=c._videoSSRC,m=r.audioRecv.find(K=>K.ssrc===p),A=r.videoRecv.find(K=>K.ssrc===g);if(!m&&!A)return void(i+=1);const _=yy(this,di.NeedSignalRTT),S=r.rtt,C=(S&&_?(S+_)/2:S||_)||0,T=m?m.jitterMs:void 0,D=r.recvPacketLossRate;let B=.7*D*100/50+.3*C/1500;T&&(B=.6*D*100/50+.2*C/1500+.2*T/400),i+=B<.1?1:B<.17?2:B<.36?3:B<.59?4:5}),this.remoteUserMap.size>0?Math.round(i/this.remoteUserMap.size):i}muteLocalTrack(r){var i=this;return U(function*(){return new Un((a,c)=>{i.handleMuteLocalTrack(r,a,c)})})()}filterTobePublishedTracks(r,i,a){const c=[],p=Uc(),g=this.getAllTracks();r=x9(r=r.filter(_=>-1===g.indexOf(_)));let m=!1,A=!1;for(const _ of r){if(_ instanceof Ns&&(this.localTrackMap.has(Rn.LocalVideoTrack)||m?new h(u.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(c.push({track:_,type:Rn.LocalVideoTrack}),m=!0),i)){const S=this.getLowVideoTrack(_,a);c.push({track:S,type:Rn.LocalVideoLowTrack})}if(_ instanceof Ga){const S=this.localTrackMap.get(Rn.LocalAudioTrack);if(S){if(!(S.track instanceof pd))throw new h(u.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new h(u.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");S.track.addAudioTrack(_),this.bindLocalAudioTrackEvents(_,!0)}else if(A){const C=c.find(T=>{let{type:D}=T;return D===Rn.LocalAudioTrack});if(!(C.track instanceof pd))throw new h(u.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new h(u.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");C.track.addAudioTrack(_)}else{if(!p.webAudioMediaStreamDest||_ instanceof pd||_._bypassWebAudio)c.push({track:_,type:Rn.LocalAudioTrack});else{const C=new pd;C.addAudioTrack(_),c.push({track:C,type:Rn.LocalAudioTrack})}A=!0}}}return c}filterTobeUnpublishedTracks(r){const i=[],a=this.getAllTracks();r=x9(r=r.filter(c=>-1!==a.indexOf(c)));for(const c of r){if(c instanceof Ga){const p=this.localTrackMap.get(Rn.LocalAudioTrack);if(!p)continue;p.track instanceof pd?(p.track.removeAudioTrack(c),this.unbindLocalAudioTrackEvents(c),0===p.track.trackList.length&&(i.push([Rn.LocalAudioTrack,p]),p.track.close())):i.push([Rn.LocalAudioTrack,p])}if(c instanceof Ns){const p=this.localTrackMap.get(Rn.LocalVideoTrack);if(!p)continue;i.push([Rn.LocalVideoTrack,p]);const g=this.localTrackMap.get(Rn.LocalVideoLowTrack);g&&i.push([Rn.LocalVideoLowTrack,g])}}return i}bindLocalTrackEvents(r){r.forEach(i=>{let{track:a,type:c}=i;switch(c){case Rn.LocalVideoTrack:a.addListener(nr.GET_STATS,this.handleGetLocalVideoStats),a.addListener(nr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),a.addListener(nr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),a.addListener(nr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),a.addListener(nr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),a.addListener(nr.NEED_REPLACE_TRACK,this.handleReplaceTrack),a.addListener(nr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),a.addListener(nr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Rn.LocalAudioTrack:this.bindLocalAudioTrackEvents(a)}})}bindLocalAudioTrackEvents(r,i){r instanceof pd?r.trackList.forEach(a=>{a.addListener(nr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),a.addListener(nr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),a.addListener(nr.GET_STATS,this.handleGetLocalAudioStats),a.addListener(nr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),a.addListener(nr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(r.addListener(nr.GET_STATS,this.handleGetLocalAudioStats),r.addListener(nr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(nr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(nr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(nr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),i||r.addListener(nr.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(r){r||(r=Array.from(this.localTrackMap.entries()).map(i=>{let[a,{track:c}]=i;return{track:c,type:a}})),r.forEach(i=>{let{track:a,type:c}=i;switch(c){case Rn.LocalVideoTrack:a.off(nr.GET_STATS,this.handleGetLocalVideoStats),a.off(nr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),a.off(nr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),a.off(nr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),a.off(nr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),a.off(nr.NEED_REPLACE_TRACK,this.handleReplaceTrack),a.off(nr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),a.off(nr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Rn.LocalAudioTrack:this.unbindLocalAudioTrackEvents(a)}})}unbindLocalAudioTrackEvents(r){r instanceof pd?r.trackList.forEach(i=>{i.off(nr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(nr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(nr.GET_STATS,this.handleGetLocalAudioStats),i.off(nr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(nr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(r.off(nr.GET_STATS,this.handleGetLocalAudioStats),r.off(nr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(nr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(nr.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(nr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(nr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(r,i){i instanceof Yx&&i.addListener(nr.GET_STATS,a=>{a(this.handleGetRemoteVideoStats(r))}),i instanceof xm&&i.addListener(nr.GET_STATS,a=>{a(this.handleGetRemoteAudioStats(r))})}unbindRemoteTrackEvents(r){r&&r.removeAllListeners(nr.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(r=>{let[i,a]=r;a.has(Wr.AUDIO)&&this.unbindRemoteTrackEvents(i._audioTrack),a.has(Wr.VIDEO)&&this.unbindRemoteTrackEvents(i._videoTrack)})}createGatewayPublishMessage(r,i){return r.map((a,c)=>{let p,g,{track:m,type:A}=a;switch(A){case Rn.LocalAudioTrack:p=Zo.Audio,g={dtx:m instanceof kS&&m._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Rn.LocalVideoTrack:p=m._hints.includes(Fc.SCREEN_TRACK)?Zo.Screen:Zo.High,g=wy(wy({},o5(m)),{},{codec:this.store.codec});break;case Rn.LocalVideoLowTrack:p=Zo.Low,g=wy(wy({},o5(m)),{},{codec:this.store.codec})}return{stream_type:p,attributes:g,ssrcs:i[c]}})}createGatewayUnpublishMessage(r){return r.map(i=>{let a,[c,{track:p,ssrcs:g,id:m}]=i;switch(c){case Rn.LocalVideoTrack:a=p._hints.includes(Fc.SCREEN_TRACK)?Zo.Screen:Zo.High;break;case Rn.LocalAudioTrack:a=Zo.Audio;break;case Rn.LocalVideoLowTrack:a=Zo.Low}return{stream_type:a,ssrcs:g,mid:m}})}assignLocalTracks(r,i){r.forEach((a,c)=>{let{track:p,type:g}=a;this.localTrackMap.set(g,{track:p,id:i[c].id,ssrcs:i[c].localSSRC})})}withdrawLocalTracks(r){r.forEach(i=>{let[a]=i;this.localTrackMap.delete(a)})}waitTillConnected(){var r=this;return U(function*(){return new Un((i,a)=>{switch(r.state){case ad.New:case ad.Reconnecting:{const c=(p,g)=>g===ad.Disconnected?(r.off(di.StateChange,c),void a(new h(u.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):g===ad.Connected?(r.off(di.StateChange,c),void i(void 0)):void 0;r.on(di.StateChange,c);break}case ad.Connected:i(void 0);break;case ad.Disconnected:a(new h(u.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})})()}bindConnectionEvents(r){var i=this;r.onConnectionStateChange=function(){var a=U(function*(c){O.info("[p2pId: ".concat(i.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(c,")")),He("info",i,"connectionStateChange",c),i.emit(di.PeerConnectionStateChange,c),"connected"!==c||i.store.keyMetrics.peerConnectionEnd||i.store.peerConnectionEnd(),"failed"===c&&(yield i.requestReconnect())});return function(c){return a.apply(this,arguments)}}(),r.onICEConnectionStateChange=a=>{O.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(a,")")),He("info",this,"iceConnectionStateChange",a),Gt.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:a,tag:zn.TRACER}).onSuccess(),this.emit(di.IceConnectionStateChange,a)},r.onICETransportStateChange=a=>{O.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(a,")")),He("info",this,"ICETransportStateChange",a)},r.onDTLSTransportStateChange=a=>{O.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(a,")")),He("info",this,"DTLSTransportStateChange",a)},r.onDTLSTransportError=a=>{O.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(a,")")),He("info",this,"DTLSTransportError",a)},r.onFirstAudioDecoded=a=>{var c;const p=Array.from(gy(c=this.remoteUserMap).call(c)).find(m=>m._audioSSRC===a);var g;p&&(null===(g=p.audioTrack)||void 0===g||g.emit(C_.FIRST_FRAME_DECODED),Gt.firstRemoteFrame(this.store.sessionId,Aa.FIRST_AUDIO_DECODE,wo.FIRST_AUDIO_DECODE,{peer:p._uintid,subscribeElapse:Cl.measureFromSubscribeStart(this.store.clientId,a),subscribeRequestid:a,p2pid:this.store.p2pId}))},r.onFirstAudioReceived=a=>{var c;const p=Array.from(gy(c=this.remoteUserMap).call(c)).find(g=>g._audioSSRC===a);p&&Gt.firstRemoteFrame(this.store.sessionId,Aa.FIRST_AUDIO_RECEIVED,wo.FIRST_AUDIO_RECEIVED,{peer:p._uintid,subscribeElapse:Cl.measureFromSubscribeStart(this.store.clientId,a),subscribeRequestid:a,p2pid:this.store.p2pId})},r.onFirstVideoDecoded=(a,c,p)=>{var g;const m=Array.from(gy(g=this.remoteUserMap).call(g)).find(A=>A._videoSSRC===a);m&&Gt.firstRemoteFrame(this.store.sessionId,Aa.FIRST_VIDEO_DECODE,wo.FIRST_VIDEO_DECODE,{peer:m._uintid,videowidth:c,videoheight:p,subscribeElapse:Cl.measureFromSubscribeStart(this.store.clientId,a),subscribeRequestid:a,p2pid:this.store.p2pId})},r.onFirstVideoReceived=a=>{var c;const p=Array.from(gy(c=this.remoteUserMap).call(c)).find(g=>g._videoSSRC===a);p&&Gt.firstRemoteFrame(this.store.sessionId,Aa.FIRST_VIDEO_RECEIVED,wo.FIRST_VIDEO_RECEIVED,{peer:p._uintid,subscribeElapse:Cl.measureFromSubscribeStart(this.store.clientId,a),subscribeRequestid:a,p2pid:this.store.p2pId})},r.onSelectedLocalCandidateChanged=(a,c)=>{const p="relay"===a.candidateType;"unknown"!==c.candidateType&&p===("relay"===c.candidateType)||this.emit(di.ConnectionTypeChange,p),O.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(D_(c))," -> ").concat(JSON.stringify(D_(a)),")")),He("info",this,"SelectedLocalCandidateChanged","".concat(JSON.stringify(D_(c))," -> ").concat(JSON.stringify(D_(a))))},r.onSelectedRemoteCandidateChanged=(a,c)=>{O.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(D_(c))," -> ").concat(JSON.stringify(D_(a)),")")),He("info",this,"SelectedRemoteCandidateChanged","".concat(JSON.stringify(D_(c))," -> ").concat(JSON.stringify(D_(a))))}}unbindConnectionEvents(r){r.onConnectionStateChange=void 0,r.onICEConnectionStateChange=void 0,r.onICETransportStateChange=void 0,r.onDTLSTransportStateChange=void 0,r.onDTLSTransportError=void 0,r.onFirstAudioDecoded=void 0,r.onFirstAudioReceived=void 0,r.onFirstVideoDecoded=void 0,r.onFirstVideoReceived=void 0,r.onSelectedLocalCandidateChanged=void 0,r.onSelectedRemoteCandidateChanged=void 0}filterTobeMutedTracks(r){const i=[];if(-1===this.getAllTracks().indexOf(r))return i;const a=this.localTrackMap.get(Rn.LocalAudioTrack);if(r instanceof Ga&&a?.track instanceof pd)return a.track.isActive||i.push([Rn.LocalAudioTrack,a]),i;const c=Array.from(this.localTrackMap.entries()).find(p=>{let[,{track:g}]=p;return r===g});if(c&&(i.push(c),c[0]===Rn.LocalVideoTrack)){const p=this.localTrackMap.get(Rn.LocalVideoLowTrack);p&&i.push([Rn.LocalVideoLowTrack,p])}return i}filterTobeUnmutedTracks(r){const i=[],a=this.localTrackMap.get(Rn.LocalAudioTrack);if(r instanceof Ga&&a?.track instanceof pd)return a.track.isActive&&i.push([Rn.LocalAudioTrack,a]),i;const c=Array.from(this.localTrackMap.entries()).find(p=>{let[,{track:g}]=p;return r===g});if(c)if(c[0]===Rn.LocalVideoTrack){i.push(c);const p=this.localTrackMap.get(Rn.LocalVideoLowTrack);p&&i.push([Rn.LocalVideoLowTrack,p])}else i.push(c);return i}createMuteMessage(r){return r.map(i=>{let a,[c,{track:p,ssrcs:g,id:m}]=i;switch(c){case Rn.LocalAudioTrack:a=Zo.Audio;break;case Rn.LocalVideoTrack:a=p._hints.includes(Fc.SCREEN_TRACK)?Zo.Screen:Zo.High;break;case Rn.LocalVideoLowTrack:a=Zo.Low}return{stream_type:a,ssrcs:g,mid:m}})}createUnmuteMessage(r){return r.map(i=>{let a,[c,{track:p,ssrcs:g,id:m}]=i;switch(c){case Rn.LocalAudioTrack:a=Zo.Audio;break;case Rn.LocalVideoTrack:a=p._hints.includes(Fc.SCREEN_TRACK)?Zo.Screen:Zo.High;break;case Rn.LocalVideoLowTrack:a=Zo.Low}return{stream_type:a,ssrcs:g,mid:m}})}filterTobeUnSubscribedTracks(r,i){const a=[],c=this.remoteUserMap.get(r);if(!c)return a;if(i){const p=c.get(i);if(!p)return a;a.push([r,{kind:i,id:p}])}else Array.from(c.entries()).forEach(p=>{let[g,m]=p;a.push([r,{kind:g,id:m}])});return a}createUnsubscribeMessage(r){const i=[];return r.forEach(a=>{let[c,{kind:p}]=a;switch(p){case Wr.VIDEO:return void(c._videoSSRC&&i.push({stream_type:Wr.VIDEO,ssrcId:c._videoSSRC}));case Wr.AUDIO:return void(c._audioSSRC&&i.push({stream_type:Wr.AUDIO,ssrcId:c._audioSSRC}))}}),i}createUnsubscribeAllMessage(r){const i=new Map;return r.forEach(a=>{let[c,{kind:p}]=a;if(i.has(c)){let g=i.get(c);g|=p===Wr.VIDEO?To.Video:To.Audio,i.set(c,g)}else i.set(c,p===Wr.VIDEO?To.Video:To.Audio)}),{users:Array.from(i.entries()).map(a=>{let[c,p]=a;return{stream_id:c.uid,stream_type:p}})}}withdrawRemoteTracks(r){r.forEach(i=>{let[a,{kind:c}]=i;const p=this.remoteUserMap.get(a);p&&(p.delete(c),0===Array.from(p.entries()).length&&this.remoteUserMap.delete(a))})}updateBitrateLimit(r){var i=this;return U(function*(){const a=i.localTrackMap.get(Rn.LocalVideoTrack),c=i.localTrackMap.get(Rn.LocalVideoLowTrack);a&&(yield a.track.setBitrateLimit(r.uplink)),c&&r.low_stream_uplink&&(yield c.track.setBitrateLimit({max_bitrate:r.low_stream_uplink.bitrate,min_bitrate:r.low_stream_uplink.bitrate||0}))})()}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(r,i){return r.map((a,c)=>{var p;let{stream_type:g}=a;return null===(p=i.find(m=>{let{stream_type:A}=m;return g===A}))||void 0===p?void 0:p.attributes})}tryToUnmuteAudio(r){var i=this;return U(function*(){for(let c=0;c<r.length;c++)if(r[c]instanceof Ga){var a;const p=i.filterTobeUnmutedTracks(r[c]);if(0===p.length)continue;yield null===(a=i.connection)||void 0===a?void 0:a.unmuteLocal(p.map(m=>{let[,{id:A}]=m;return A}));const g=i.createUnmuteMessage(p);return void(yield Ro(i,di.RequestUnmuteLocal,g))}})()}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=r=>{var i;return!(null===(i=this.connection)||void 0===i||!i.getRemoteVideoIsReady(r))},this.statsUploader.requestUpload=(r,i)=>this.emit(di.RequestUploadStats,r,i),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}requestReconnect(){var r=this;return U(function*(){r.dtlsFailedCount+=1,yield ic(E(r.dtlsFailedCount,v)),r.emit(di.RequestReconnect)})()}reconnectP2P(){var r=this;return U(function*(){const i=Array.from(r.localTrackMap.entries()),a=r.createGatewayUnpublishMessage(i);Array.from(r.remoteUserMap.entries()),a.length>0&&(yield up(r,di.RequestUnpublishForReconnectPC,a)),r.disconnectForReconnect(),r.emit(di.RequestReconnectPC)})()}canPublishLowStream(){return this.localTrackMap.has(Rn.LocalVideoTrack)||this.pendingLocalTracks.some(r=>r instanceof Ns)}throwIfTrackTypeNotMatch(r){if(r.filter(i=>i instanceof Ns).length>1)throw new h(u.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r.filter(i=>i instanceof Ga).length>1&&(r.some(i=>i instanceof Ga&&i._bypassWebAudio)||!Uc().webAudioMediaStreamDest))throw new h(u.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const i of r){if(i instanceof Ns&&this.pendingLocalTracks.some(a=>a instanceof Ns))throw new h(u.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(i instanceof Ga&&this.pendingLocalTracks.some(a=>a instanceof Ga)&&(!Uc().webAudioMediaStreamDest||i._bypassWebAudio||this.pendingLocalTracks.some(a=>a instanceof Ga&&a._bypassWebAudio)))throw new h(u.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(r,i){const a=Uc().supportDualStreamEncoding,c=wy(wy({},{width:160,height:120,framerate:15,bitrate:50}),i);let p;p=a?r._mediaStreamTrack.clone():aV(r,c);const g=new Ns(p,wy(wy({},a&&{scaleResolutionDownBy:P9(c,r)}),{},{frameRate:c.framerate,bitrateMax:c.bitrate,bitrateMin:c.bitrate}));return g._hints.push(Fc.LOW_STREAM),r.addListener(nr.NEED_CLOSE,()=>{g.close()}),g}globalLock(){var r=this;return U(function*(){return r.mutex.lock("From P2PChannel.globalLock")})()}remoteMediaSsrcChanged(r,i,a){if(!this.connection)return!1;const c=this.remoteUserMap.get(r);if(!c)return!1;const p=c.get(i);if(!p)return!1;const g=this.connection.getRemoteSSRC(p);return void 0!==g&&g!==a}}).prototype,"startP2PConnection",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"startP2PConnection"),Ai.prototype),Kn(Ai.prototype,"connect",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"connect"),Ai.prototype),Kn(Ai.prototype,"unpublish",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"unpublish"),Ai.prototype),Kn(Ai.prototype,"unpublishLowStream",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"unpublishLowStream"),Ai.prototype),Kn(Ai.prototype,"subscribe",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"subscribe"),Ai.prototype),Kn(Ai.prototype,"massSubscribe",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"massSubscribe"),Ai.prototype),Kn(Ai.prototype,"unsubscribe",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"unsubscribe"),Ai.prototype),Kn(Ai.prototype,"massUnsubscribe",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"massUnsubscribe"),Ai.prototype),Kn(Ai.prototype,"muteRemote",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"muteRemote"),Ai.prototype),Kn(Ai.prototype,"unmuteRemote",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"unmuteRemote"),Ai.prototype),Kn(Ai.prototype,"hasRemoteMediaWithLock",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"hasRemoteMediaWithLock"),Ai.prototype),Kn(Ai.prototype,"disconnectForReconnect",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"disconnectForReconnect"),Ai.prototype),Kn(Ai.prototype,"reEstablish",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"reEstablish"),Ai.prototype),Kn(Ai.prototype,"updateBitrateLimit",[gu],Object.getOwnPropertyDescriptor(Ai.prototype,"updateBitrateLimit"),Ai.prototype),B6=Ai))||B6;function gu(r,i,a){const c=r[i];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return a.value=U(function*(){const p=this.mutex,g=yield p.lock("From P2PChannel.".concat(i));try{for(var m=arguments.length,A=new Array(m),_=0;_<m;_++)A[_]=arguments[_];return yield c.apply(this,A)}finally{g()}}),a}function vd(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var ri,V6="function"==typeof Symbol&&Symbol.observable||"@@observable",Xx=function(){return Math.random().toString(36).substring(7).split("").join(".")},j6={INIT:"@@redux/INIT"+Xx(),REPLACE:"@@redux/REPLACE"+Xx(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Xx()}};function Nz(r){if("object"!=typeof r||null===r)return!1;for(var i=r;null!==Object.getPrototypeOf(i);)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(r)===i}function Zx(r,i,a){var c;if("function"==typeof i&&"function"==typeof a||"function"==typeof a&&"function"==typeof arguments[3])throw new Error(vd(0));if("function"==typeof i&&void 0===a&&(a=i,i=void 0),void 0!==a){if("function"!=typeof a)throw new Error(vd(1));return a(Zx)(r,i)}if("function"!=typeof r)throw new Error(vd(2));var p=r,g=i,m=[],A=m,_=!1;function S(){A===m&&(A=m.slice())}function C(){if(_)throw new Error(vd(3));return g}function T(W){if("function"!=typeof W)throw new Error(vd(4));if(_)throw new Error(vd(5));var Z=!0;return S(),A.push(W),function(){if(Z){if(_)throw new Error(vd(6));Z=!1,S();var de=A.indexOf(W);A.splice(de,1),m=null}}}function D(W){if(!Nz(W))throw new Error(vd(7));if(void 0===W.type)throw new Error(vd(8));if(_)throw new Error(vd(9));try{_=!0,g=p(g,W)}finally{_=!1}for(var Z=m=A,de=0;de<Z.length;de++)(0,Z[de])();return W}function B(W){if("function"!=typeof W)throw new Error(vd(10));p=W,D({type:j6.REPLACE})}function K(){var W,Z=T;return(W={subscribe:function(de){if("object"!=typeof de||null===de)throw new Error(vd(11));function ge(){de.next&&de.next(C())}return ge(),{unsubscribe:Z(ge)}}})[V6]=function(){return this},W}return D({type:j6.INIT}),(c={dispatch:D,subscribe:T,getState:C,replaceReducer:B})[V6]=K,c}function sW(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function Yn(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?sW(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):sW(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}!function(r){r.SET_SESSION_ID="SET_SESSION_ID",r.SET_P2P_ID="SET_P2P_id",r.SET_UID="SET_UID",r.SET_PUB_ID="SET_PUB_ID",r.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",r.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",r.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",r.AVOID_JOIN_START="AVOID_JOIN_START",r.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",r.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",r.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",r.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",r.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",r.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",r.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",r.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",r.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",r.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",r.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",r.RESET_KEY_METRICS="RESET_KEY_METRICS"}(ri||(ri={}));class aW{constructor(i,a,c,p){q(this,"store",void 0),q(this,"reducer",void 0);const g={codec:i,audioCodec:a,mode:c,clientId:p,sessionId:null,p2pId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled"};this.reducer=function(){let m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case ri.SET_SESSION_ID:return Yn(Yn({},m),{},{sessionId:A.sessionId});case ri.SET_P2P_ID:return Yn(Yn({},m),{},{p2pId:A.p2pId});case ri.SET_UID:return Yn(Yn({},m),{},{uid:A.uid});case ri.SET_PUB_ID:return Yn(Yn({},m),{},{pubId:A.pubId});case ri.KEY_METRIC_CLIENT_CREATED:return Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{clientCreated:A.metric})});case ri.KEY_METRIC_JOIN_START:return Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{joinStart:A.metric})});case ri.AVOID_JOIN_START:return Yn(Yn({},m),{},{avoidJoinStart:A.avoidJoinStart});case ri.KEY_METRIC_JOIN_END:return Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{joinEnd:A.metric})});case ri.KEY_METRIC_REQUEST_AP_START:return Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{requestAPStart:A.metric})});case ri.KEY_METRIC_REQUEST_AP_END:return Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{requestAPEnd:A.metric})});case ri.KEY_METRIC_JOIN_GATEWAY_START:return Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{joinGatewayStart:A.metric})});case ri.KEY_METRIC_JOIN_GATEWAY_END:return Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{joinGatewayEnd:A.metric})});case ri.KEY_METRIC_PEER_CONNECTION_START:return Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{peerConnectionStart:A.metric})});case ri.KEY_METRIC_PEER_CONNECTION_END:return Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{peerConnectionEnd:A.metric})});case ri.KEY_METRIC_PUBLISH:{const _=m.keyMetrics.publish,S=_.findIndex(C=>C.trackId===A.metric.trackId);return-1!==S?(_[S]=Yn(Yn({},_[S]),A.metric),Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{publish:[..._]})})):Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{publish:[...m.keyMetrics.publish,A.metric]})})}case ri.KEY_METRIC_SUBSCRIBE:{const _=m.keyMetrics.subscribe,S=_.findIndex(C=>C.userId===A.metric.userId&&C.type===A.metric.type);return-1!==S?(_[S]=Yn(Yn({},_[S]),A.metric),Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{subscribe:[..._]})})):Yn(Yn({},m),{},{keyMetrics:Yn(Yn({},m.keyMetrics),{},{subscribe:[...m.keyMetrics.subscribe,A.metric]})})}case ri.SET_CLOUD_PROXY_SERVER_MODE:return m.cloudProxyServerMode=A.mode,m;case ri.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof A.index?m.joinChannelServiceRecords=[...m.joinChannelServiceRecords,A.record]:(m.joinChannelServiceRecords[A.index]=Yn(Yn({},m.joinChannelServiceRecords[A.index]),A.record),m.joinChannelServiceRecords=[...m.joinChannelServiceRecords]),m;case ri.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return m.joinChannelServiceRecords=[],m;case ri.RESET_KEY_METRICS:return m.keyMetrics={publish:[],subscribe:[]},m;default:return m}},this.store=Zx(this.reducer)}set sessionId(i){this.store.dispatch({type:ri.SET_SESSION_ID,sessionId:i})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get audioCodec(){return this.store.getState().audioCodec}get clientId(){return this.store.getState().clientId}set p2pId(i){this.store.dispatch({type:ri.SET_P2P_ID,p2pId:i})}get p2pId(){return this.store.getState().p2pId}set uid(i){this.store.dispatch({type:ri.SET_UID,uid:i})}get uid(){return this.store.getState().uid}set pubId(i){this.store.dispatch({type:ri.SET_PUB_ID,pubId:i})}get pubId(){return this.store.getState().pubId}set cloudProxyServerMode(i){this.store.dispatch({type:ri.SET_CLOUD_PROXY_SERVER_MODE,mode:i})}get cloudProxyServerMode(){return this.store.getState().cloudProxyServerMode}clientCreated(){this.store.dispatch({type:ri.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:ri.KEY_METRIC_JOIN_START,metric:performance.now()})}get avoidJoinStart(){return this.store.getState().avoidJoinStart}set avoidJoinStart(i){this.store.dispatch({type:ri.AVOID_JOIN_START,avoidJoinStart:i})}joinEnd(){this.store.dispatch({type:ri.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:ri.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:ri.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:ri.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:ri.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:ri.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:ri.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(i,a,c,p){this.store.dispatch({type:ri.KEY_METRIC_PUBLISH,metric:Yn(Yn({trackId:i,type:a},c&&{publishStart:c}),p&&{publishEnd:p})})}subscribe(i,a,c,p,g){this.store.dispatch({type:ri.KEY_METRIC_SUBSCRIBE,metric:Yn(Yn(Yn({userId:i,type:a},c&&{subscribeStart:c}),p&&{subscribeEnd:p}),g&&{firstFrame:g})})}massSubscribe(i,a,c,p){i.forEach(g=>{this.store.dispatch({type:ri.KEY_METRIC_SUBSCRIBE,metric:Yn(Yn(Yn({userId:g.userId,type:g.type},a&&{subscribeStart:a}),c&&{subscribeEnd:c}),p&&{firstFrame:p})})})}get keyMetrics(){return this.store.getState().keyMetrics}recordJoinChannelService(i,a){"gateway"===i.service&&Array.isArray(i.urls)&&(i.urls=i.urls.map(c=>c.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return"number"!=typeof a?(this.store.dispatch({type:ri.RECORD_JOIN_CHANNEL_SERVICE,record:Yn(Yn({},i),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.store.getState().joinChannelServiceRecords.length-1):(a<0||a>=this.store.getState().joinChannelServiceRecords.length||this.store.dispatch({type:ri.RECORD_JOIN_CHANNEL_SERVICE,record:i,index:a}),a)}catch{return 0}}resetJoinChannelServiceRecords(){this.store.dispatch({type:ri.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.store.dispatch({type:ri.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.store.getState().joinChannelServiceRecords}catch{return[]}}}let Ik;const uV=()=>void 0!==window.isSecureContext;class xz{constructor(i,a){q(this,"time",void 0),q(this,"sequence",void 0),q(this,"name",void 0),q(this,"elapse",void 0),this.name=i,this.time=performance.now(),this.sequence=RF[a].indexOf(i)}setElapse(i){this.elapse=i}}const cW=new Map;class uW{constructor(i,a){q(this,"records",[]),q(this,"_id",void 0),q(this,"_group",void 0),q(this,"_localTimeStamp",void 0),q(this,"_performanceTimeStamp",void 0),this._id=i,this._group=a,this._localTimeStamp=Date.now(),this._performanceTimeStamp=performance.now()}checkPoint(i){const a=new xz(i,this._group);-1===a.sequence&&O.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(a);const c=this.records.find(p=>p.sequence===a.sequence-1);c&&a.setElapse(a.time-c.time)}getRecord(i){return this.records.find(a=>a&&a.name===i)}resetRecords(){this.records.length=0}}function pW(r){let i={};e:for(;!dV(r);){let a=Lm(r);switch(a>>>3){case 0:break e;case 1:i.requestId=tL(r,Lm(r));break;case 2:i.requestType=Lm(r)>>>0;break;case 3:i.scorePorn=wk(r);break;case 4:i.scoreSexy=wk(r);break;case 5:i.scoreNeutral=wk(r);break;case 6:i.requestScene=Lm(r)>>>0;break;case 7:i.scene=Lm(r)>>>0;break;default:H6(r,7&a)}}return i}function hW(r,i){let a=r.service;void 0!==a&&(ii(i,8),ii(i,a));let c=r.vendor;void 0!==c&&(ii(i,16),ii(i,c));let p=r.token;void 0!==p&&(ii(i,26),yd(i,p));let g=r.callbackUrl;void 0!==g&&(ii(i,34),yd(i,g))}function Q6(r){let i=Lm(r),a=r.limit;return r.limit=r.offset+i,a}function H6(r,i){switch(i){case 0:for(;128&K6(r););break;case 2:lV(r,Lm(r));break;case 5:lV(r,4);break;case 1:lV(r,8);break;default:throw new Error("Unimplemented type: "+i)}}let fW=new Float32Array(1);new Uint8Array(fW.buffer);let eL=new Float64Array(1),ju=new Uint8Array(eL.buffer);function Ty(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}let G6=[];function W6(){const r=G6.pop();return r?(r.offset=r.limit=0,r):{bytes:new Uint8Array(64),offset:0,limit:0}}function mW(r){G6.push(r)}function lV(r,i){if(r.offset+i>r.limit)throw new Error("Skip past limit");r.offset+=i}function dV(r){return r.offset>=r.limit}function nT(r,i){let a=r.bytes,c=r.offset,p=r.limit,g=c+i;if(g>a.length){let m=new Uint8Array(2*g);m.set(a),r.bytes=m}return r.offset=g,g>p&&(r.limit=g),c}function Ad(r,i){let a=r.offset;if(a+i>r.limit)throw new Error("Read past limit");return r.offset+=i,a}function tL(r,i){let a=Ad(r,i),c=String.fromCharCode,p=r.bytes,g="\ufffd",m="";for(let A=0;A<i;A++){let _,S,C,T,D=p[A+a];0==(128&D)?m+=c(D):192==(224&D)?A+1>=i?m+=g:(_=p[A+a+1],128!=(192&_)?m+=g:(T=(31&D)<<6|63&_,T<128?m+=g:(m+=c(T),A++))):224==(240&D)?A+2>=i?m+=g:(_=p[A+a+1],S=p[A+a+2],32896!=(49344&(_|S<<8))?m+=g:(T=(15&D)<<12|(63&_)<<6|63&S,T<2048||T>=55296&&T<=57343?m+=g:(m+=c(T),A+=2))):240==(248&D)?A+3>=i?m+=g:(_=p[A+a+1],S=p[A+a+2],C=p[A+a+3],8421504!=(12632256&(_|S<<8|C<<16))?m+=g:(T=(7&D)<<18|(63&_)<<12|(63&S)<<6|63&C,T<65536||T>1114111?m+=g:(T-=65536,m+=c(55296+(T>>10),56320+(1023&T)),A+=3))):m+=g}return m}function yd(r,i){let a=i.length,c=0;for(let m=0;m<a;m++){let A=i.charCodeAt(m);A>=55296&&A<=56319&&m+1<a&&(A=(A<<10)+i.charCodeAt(++m)-56613888),c+=A<128?1:A<2048?2:A<65536?3:4}ii(r,c);let p=nT(r,c),g=r.bytes;for(let m=0;m<a;m++){let A=i.charCodeAt(m);A>=55296&&A<=56319&&m+1<a&&(A=(A<<10)+i.charCodeAt(++m)-56613888),A<128?g[p++]=A:(A<2048?g[p++]=A>>6&31|192:(A<65536?g[p++]=A>>12&15|224:(g[p++]=A>>18&7|240,g[p++]=A>>12&63|128),g[p++]=A>>6&63|128),g[p++]=63&A|128)}}function pV(r,i){let a=nT(r,i.limit),c=r.bytes,p=i.bytes;for(let g=0,m=i.limit;g<m;g++)c[g+a]=p[g]}function K6(r){return r.bytes[Ad(r,1)]}function z6(r,i){let a=nT(r,1);r.bytes[a]=i}function wk(r){let i=Ad(r,8),a=r.bytes;return ju[0]=a[i++],ju[1]=a[i++],ju[2]=a[i++],ju[3]=a[i++],ju[4]=a[i++],ju[5]=a[i++],ju[6]=a[i++],ju[7]=a[i++],eL[0]}function hV(r,i){let a=nT(r,8),c=r.bytes;eL[0]=i,c[a++]=ju[0],c[a++]=ju[1],c[a++]=ju[2],c[a++]=ju[3],c[a++]=ju[4],c[a++]=ju[5],c[a++]=ju[6],c[a++]=ju[7]}function Lm(r){let i,a=0,c=0;do{i=K6(r),a<32&&(c|=(127&i)<<a),a+=7}while(128&i);return c}function ii(r,i){for(i>>>=0;i>=128;)z6(r,127&i|128),i>>>=7;z6(r,i)}function Ry(r,i){let a=i.low>>>0,c=(i.low>>>28|i.high<<4)>>>0,p=i.high>>>24,g=0===p?0===c?a<16384?a<128?1:2:a<1<<21?3:4:c<16384?c<128?5:6:c<1<<21?7:8:p<128?9:10,m=nT(r,g),A=r.bytes;switch(g){case 10:A[m+9]=p>>>7&1;case 9:A[m+8]=9!==g?128|p:127&p;case 8:A[m+7]=8!==g?c>>>21|128:c>>>21&127;case 7:A[m+6]=7!==g?c>>>14|128:c>>>14&127;case 6:A[m+5]=6!==g?c>>>7|128:c>>>7&127;case 5:A[m+4]=5!==g?128|c:127&c;case 4:A[m+3]=4!==g?a>>>21|128:a>>>21&127;case 3:A[m+2]=3!==g?a>>>14|128:a>>>14&127;case 2:A[m+1]=2!==g?a>>>7|128:a>>>7&127;case 1:A[m]=1!==g?128|a:127&a}}var fV={};Object.defineProperty(fV,"__esModule",{value:!0});var mV=function(){function r(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return r.hashStr=function(i,a){return void 0===a&&(a=!1),this.onePassHasher.start().appendStr(i).end(a)},r.hashAsciiStr=function(i,a){return void 0===a&&(a=!1),this.onePassHasher.start().appendAsciiStr(i).end(a)},r._hex=function(i){var a,c,p,g,m=r.hexChars,A=r.hexOut;for(g=0;g<4;g+=1)for(c=8*g,a=i[g],p=0;p<8;p+=2)A[c+1+p]=m.charAt(15&a),A[c+0+p]=m.charAt(15&(a>>>=4)),a>>>=4;return A.join("")},r._md5cycle=function(i,a){var c=i[0],p=i[1],g=i[2],m=i[3];p=((p+=((g=((g+=((m=((m+=((c=((c+=(p&g|~p&m)+a[0]-680876936|0)<<7|c>>>25)+p|0)&p|~c&g)+a[1]-389564586|0)<<12|m>>>20)+c|0)&c|~m&p)+a[2]+606105819|0)<<17|g>>>15)+m|0)&m|~g&c)+a[3]-1044525330|0)<<22|p>>>10)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p&g|~p&m)+a[4]-176418897|0)<<7|c>>>25)+p|0)&p|~c&g)+a[5]+1200080426|0)<<12|m>>>20)+c|0)&c|~m&p)+a[6]-1473231341|0)<<17|g>>>15)+m|0)&m|~g&c)+a[7]-45705983|0)<<22|p>>>10)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p&g|~p&m)+a[8]+1770035416|0)<<7|c>>>25)+p|0)&p|~c&g)+a[9]-1958414417|0)<<12|m>>>20)+c|0)&c|~m&p)+a[10]-42063|0)<<17|g>>>15)+m|0)&m|~g&c)+a[11]-1990404162|0)<<22|p>>>10)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p&g|~p&m)+a[12]+1804603682|0)<<7|c>>>25)+p|0)&p|~c&g)+a[13]-40341101|0)<<12|m>>>20)+c|0)&c|~m&p)+a[14]-1502002290|0)<<17|g>>>15)+m|0)&m|~g&c)+a[15]+1236535329|0)<<22|p>>>10)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p&m|g&~m)+a[1]-165796510|0)<<5|c>>>27)+p|0)&g|p&~g)+a[6]-1069501632|0)<<9|m>>>23)+c|0)&p|c&~p)+a[11]+643717713|0)<<14|g>>>18)+m|0)&c|m&~c)+a[0]-373897302|0)<<20|p>>>12)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p&m|g&~m)+a[5]-701558691|0)<<5|c>>>27)+p|0)&g|p&~g)+a[10]+38016083|0)<<9|m>>>23)+c|0)&p|c&~p)+a[15]-660478335|0)<<14|g>>>18)+m|0)&c|m&~c)+a[4]-405537848|0)<<20|p>>>12)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p&m|g&~m)+a[9]+568446438|0)<<5|c>>>27)+p|0)&g|p&~g)+a[14]-1019803690|0)<<9|m>>>23)+c|0)&p|c&~p)+a[3]-187363961|0)<<14|g>>>18)+m|0)&c|m&~c)+a[8]+1163531501|0)<<20|p>>>12)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p&m|g&~m)+a[13]-1444681467|0)<<5|c>>>27)+p|0)&g|p&~g)+a[2]-51403784|0)<<9|m>>>23)+c|0)&p|c&~p)+a[7]+1735328473|0)<<14|g>>>18)+m|0)&c|m&~c)+a[12]-1926607734|0)<<20|p>>>12)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p^g^m)+a[5]-378558|0)<<4|c>>>28)+p|0)^p^g)+a[8]-2022574463|0)<<11|m>>>21)+c|0)^c^p)+a[11]+1839030562|0)<<16|g>>>16)+m|0)^m^c)+a[14]-35309556|0)<<23|p>>>9)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p^g^m)+a[1]-1530992060|0)<<4|c>>>28)+p|0)^p^g)+a[4]+1272893353|0)<<11|m>>>21)+c|0)^c^p)+a[7]-155497632|0)<<16|g>>>16)+m|0)^m^c)+a[10]-1094730640|0)<<23|p>>>9)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p^g^m)+a[13]+681279174|0)<<4|c>>>28)+p|0)^p^g)+a[0]-358537222|0)<<11|m>>>21)+c|0)^c^p)+a[3]-722521979|0)<<16|g>>>16)+m|0)^m^c)+a[6]+76029189|0)<<23|p>>>9)+g|0,p=((p+=((g=((g+=((m=((m+=((c=((c+=(p^g^m)+a[9]-640364487|0)<<4|c>>>28)+p|0)^p^g)+a[12]-421815835|0)<<11|m>>>21)+c|0)^c^p)+a[15]+530742520|0)<<16|g>>>16)+m|0)^m^c)+a[2]-995338651|0)<<23|p>>>9)+g|0,p=((p+=((m=((m+=(p^((c=((c+=(g^(p|~m))+a[0]-198630844|0)<<6|c>>>26)+p|0)|~g))+a[7]+1126891415|0)<<10|m>>>22)+c|0)^((g=((g+=(c^(m|~p))+a[14]-1416354905|0)<<15|g>>>17)+m|0)|~c))+a[5]-57434055|0)<<21|p>>>11)+g|0,p=((p+=((m=((m+=(p^((c=((c+=(g^(p|~m))+a[12]+1700485571|0)<<6|c>>>26)+p|0)|~g))+a[3]-1894986606|0)<<10|m>>>22)+c|0)^((g=((g+=(c^(m|~p))+a[10]-1051523|0)<<15|g>>>17)+m|0)|~c))+a[1]-2054922799|0)<<21|p>>>11)+g|0,p=((p+=((m=((m+=(p^((c=((c+=(g^(p|~m))+a[8]+1873313359|0)<<6|c>>>26)+p|0)|~g))+a[15]-30611744|0)<<10|m>>>22)+c|0)^((g=((g+=(c^(m|~p))+a[6]-1560198380|0)<<15|g>>>17)+m|0)|~c))+a[13]+1309151649|0)<<21|p>>>11)+g|0,p=((p+=((m=((m+=(p^((c=((c+=(g^(p|~m))+a[4]-145523070|0)<<6|c>>>26)+p|0)|~g))+a[11]-1120210379|0)<<10|m>>>22)+c|0)^((g=((g+=(c^(m|~p))+a[2]+718787259|0)<<15|g>>>17)+m|0)|~c))+a[9]-343485551|0)<<21|p>>>11)+g|0,i[0]=c+i[0]|0,i[1]=p+i[1]|0,i[2]=g+i[2]|0,i[3]=m+i[3]|0},r.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(r.stateIdentity),this},r.prototype.appendStr=function(i){var a,c,p=this._buffer8,g=this._buffer32,m=this._bufferLength;for(c=0;c<i.length;c+=1){if((a=i.charCodeAt(c))<128)p[m++]=a;else if(a<2048)p[m++]=192+(a>>>6),p[m++]=63&a|128;else if(a<55296||a>56319)p[m++]=224+(a>>>12),p[m++]=a>>>6&63|128,p[m++]=63&a|128;else{if((a=1024*(a-55296)+(i.charCodeAt(++c)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");p[m++]=240+(a>>>18),p[m++]=a>>>12&63|128,p[m++]=a>>>6&63|128,p[m++]=63&a|128}m>=64&&(this._dataLength+=64,r._md5cycle(this._state,g),m-=64,g[0]=g[16])}return this._bufferLength=m,this},r.prototype.appendAsciiStr=function(i){for(var a,c=this._buffer8,p=this._buffer32,g=this._bufferLength,m=0;;){for(a=Math.min(i.length-m,64-g);a--;)c[g++]=i.charCodeAt(m++);if(g<64)break;this._dataLength+=64,r._md5cycle(this._state,p),g=0}return this._bufferLength=g,this},r.prototype.appendByteArray=function(i){for(var a,c=this._buffer8,p=this._buffer32,g=this._bufferLength,m=0;;){for(a=Math.min(i.length-m,64-g);a--;)c[g++]=i[m++];if(g<64)break;this._dataLength+=64,r._md5cycle(this._state,p),g=0}return this._bufferLength=g,this},r.prototype.getState=function(){var i=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[i[0],i[1],i[2],i[3]]}},r.prototype.setState=function(i){var a,c=i.buffer,p=i.state,g=this._state;for(this._dataLength=i.length,this._bufferLength=i.buflen,g[0]=p[0],g[1]=p[1],g[2]=p[2],g[3]=p[3],a=0;a<c.length;a+=1)this._buffer8[a]=c.charCodeAt(a)},r.prototype.end=function(i){void 0===i&&(i=!1);var a=this._bufferLength,c=this._buffer8,p=this._buffer32,g=1+(a>>2);this._dataLength+=a;var m=8*this._dataLength;if(c[a]=128,c[a+1]=c[a+2]=c[a+3]=0,p.set(r.buffer32Identity.subarray(g),g),a>55&&(r._md5cycle(this._state,p),p.set(r.buffer32Identity)),m<=4294967295)p[14]=m;else{var A=m.toString(16).match(/(.*?)(.{0,8})$/);if(null===A)return;var _=parseInt(A[2],16),S=parseInt(A[1],16)||0;p[14]=_,p[15]=S}return r._md5cycle(this._state,p),i?this._state:r._hex(this._state)},r.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),r.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r.hexChars="0123456789abcdef",r.hexOut=[],r.onePassHasher=new r,r}(),Y6=fV.Md5=mV;if("5d41402abc4b2a76b9719d911017c592"!==mV.hashStr("hello"))throw new Error("Md5 self test failed.");const oh=function(){var r=U(function*(i,a,c){return yield(p=U(function*(g,m,A){const S=new Uint8Array(Y6.hashStr(""+m+A,!0).buffer).slice(0,16),C=S.slice(0,12),T=yield window.crypto.subtle.importKey("raw",S,"AES-GCM",!0,["encrypt"]);return new Uint8Array(yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:C},T,g))}),function(g,m,A){return p.apply(this,arguments)})(i.buffer,a,c);var p});return function(a,c,p){return r.apply(this,arguments)}}();function QS(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}const gW=new Map([["moderation",1],["supervise",2],["all",3]]);class nL extends s{get connectionState(){return this._connectionState}set connectionState(i){if(this._connectionState===i)return;const a=this._connectionState;this._connectionState=i,this.emit(Wo.CONNECTION_STATE_CHANGE,a,i)}get quality(){return this._quality}set quality(i){this._quality=i>1?1:i<.1?.1:i,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(i){super(),q(this,"name","AgoraRTCVideoContentInspect"),q(this,"_connectionState",Fu.CONNECTING),q(this,"_innerConnectionState",void 0),q(this,"sequence",0),q(this,"inspectStartTime",void 0),q(this,"workerManagerConnection",void 0),q(this,"workerConnection",void 0),q(this,"workerMessageLengthLimit",void 0),q(this,"inspectIntervalMinimum",void 0),q(this,"qualityRatio",void 0),q(this,"_connectInfo",void 0),q(this,"_cancelTokenSource",lu.CancelToken.source()),q(this,"_retryConfig",void 0),q(this,"wmSequence",0),q(this,"inspectInterval",void 0),q(this,"inspectTimer",null),q(this,"ossFilePrefix",void 0),q(this,"extraInfo",void 0),q(this,"inspectType","all"),q(this,"_quality",1),q(this,"qualityTimer",null),q(this,"_inspectId",void 0),q(this,"_needWorkUrlOnly",!1),q(this,"inspectImage",()=>{if(this.connectionState!==Fu.CONNECTED)throw new h(u.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{if(this.connectionState!==Fu.CONNECTED)return O.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState),void _e("debug",this,"Inspect State is not connected , ".concat(this.connectionState));this.requestToInspectImage()},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=ns(5,"inspect-"),this.workerMessageLengthLimit=rt("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=rt("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=rt("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=i.interval,this.ossFilePrefix=i.ossFilePrefix,this.extraInfo=i.extraInfo,this.inspectType=i.inspectType||"all",this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new LS("worker-manager-"+this._inspectId,v),this.on(Wo.STATE_CHANGE,(a,c)=>{this._innerConnectionState=a,O.debug("[".concat(this._inspectId,"] Inspect operation :").concat(yl[a]," ").concat(c||"")),st("debug",["Inspect",this._inspectId],Wo.STATE_CHANGE,"".concat(yl[a]," ").concat(c||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new LS("worker-"+this._inspectId,v),this.handleWorkerEvents()}init(i,a){var c=this;return U(function*(){c.emit(Wo.STATE_CHANGE,yl.CONNECT_AP),c._connectInfo=i;const p=c._cancelTokenSource.token;return c._retryConfig=a,new Un((g,m)=>{c.on(Wo.CONNECTION_STATE_CHANGE,(A,_)=>{_===Fu.CONNECTED&&g()}),c.requestAP(i,p,a).then(A=>{c.connectWorkerManager(A)}).catch(A=>{m(A)})})})()}requestAP(i,a,c){var p=this;return U(function*(){const g=rt("WEBCS_DOMAIN").map(_=>"https://".concat(_,"/api/v1")),m=yield function(_,S,C,T){let{appId:D,areaCode:B,cname:K,sid:W,token:Z,uid:de}=S;AU++;const ge="image_moderation_api",Se={service_name:ge,json_body:JSON.stringify({appId:D,areaCode:B,cname:K,command:"allocateEdge",requestId:AU,seq:AU,sid:W,token:Z,ts:Date.now(),uid:de+""})};let De,it,Rt=_[0];return I(U(function*(){De=Date.now();const Dt=yield cp(Rt,{data:Se,cancelToken:C,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(it=Date.now()-De,0!==Dt.code){const cn=new h(u.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Dt.code,{retry:!0,responseTime:it});throw O.error(cn.toString()),Ne("error",["AjaxAPI"],"requestImageInspectAP",void 0,cn.toString()),cn}const Pt=JSON.parse(Dt.json_body);if(200!==Pt.code){const cn=new h(u.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Pt.code,", reason: ").concat(Pt.reason),{code:Pt.code,responseTime:it});throw O.error(cn.toString()),Ne("error",["AjaxAPI"],"requestImageInspectAP",void 0,cn.toString()),cn}if(!Pt.servers||!Array.isArray(Pt.servers)||0===Pt.servers.length){const cn=new h(u.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Pt.code,responseTime:it});throw O.error(cn.toString()),Ne("error",["AjaxAPI"],"requestImageInspectAP",void 0,cn.toString()),cn}const On=rt("VIDEO_INSPECT_WORKER_MANAGER_HOST"),pn=rt("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Pt.servers.map(cn=>{let{address:bt,wss:Ve}=cn;if(bt&&Ve)return"wss://".concat(bt.replace(/\./g,"-"),".").concat(On,":").concat(pn||Ve)}).filter(cn=>!!cn),workerToken:Pt.workerToken,vid:Pt.vid,responseTime:it}}),(Dt,Pt)=>(Gt.apworkerEvent(W,{success:!0,sc:200,serviceName:ge,responseDetail:JSON.stringify(Dt.addressList),firstSuccess:0===Pt,responseTime:it,serverIp:_[Pt%_.length]}),!1),(Dt,Pt)=>(Gt.apworkerEvent(W,{success:!1,sc:Dt.data&&Dt.data.code||200,serviceName:ge,responseTime:it,serverIp:_[Pt%_.length]}),!!(Dt.code!==u.OPERATION_ABORTED&&Dt.code!==u.UNEXPECTED_RESPONSE||Dt.data&&Dt.data.retry)&&(Rt=_[(Pt+1)%_.length],!0)),T)}(g,i,a,c);p.emit(Wo.STATE_CHANGE,yl.AP_CONNECTED);const{addressList:A}=m;return p.wmSequence++,A})()}connectWorkerManager(i){var a=arguments,c=this;return U(function*(){c._needWorkUrlOnly=a.length>1&&void 0!==a[1]&&a[1],c.emit(Wo.STATE_CHANGE,yl.CONNECT_WORKER_MANAGER),yield c.workerManagerConnection.init(i,1e4)})()}connectWorker(i){var a=this;return U(function*(){yield a.workerConnection.init([i])})()}handleWorkerManagerEvents(){var i=this;this.workerManagerConnection.on(Er.CONNECTED,U(function*(){i.emit(Wo.STATE_CHANGE,yl.WORKER_MANAGER_CONNECTED,i.workerManagerConnection.url),i.workerManagerConnection.sendMessage({appId:i._connectInfo.appId,cname:i._connectInfo.cname,uid:i._connectInfo.uid+"",sdkVersion:"4.12.1",sid:i._connectInfo.sid,seq:i.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(Er.CLOSED,()=>{this._innerConnectionState<yl.GET_WORKER_MANAGER_RESPONSE&&(O.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker")),st("debug",["Inspect",this._inspectId],"workerManagerConnectionClosed"))}),this.workerManagerConnection.on(Er.FAILED,()=>{this._innerConnectionState<yl.GET_WORKER_MANAGER_RESPONSE&&(O.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker")),st("debug",["Inspect",this._inspectId],"workerManagerConnectionFailed"))}),this.workerManagerConnection.on(Er.RECONNECTING,()=>{this._innerConnectionState<yl.GET_WORKER_MANAGER_RESPONSE&&(O.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker")),st("debug",["Inspect",this._inspectId],"workerManagerConnectionReconnecting"))}),this.workerManagerConnection.on(Er.ON_MESSAGE,function(){var a=U(function*(c){i.emit(Wo.STATE_CHANGE,yl.GET_WORKER_MANAGER_RESPONSE);const p=i.workerManagerConnection.url;i.workerManagerConnection.close();const g=JSON.parse(c.data);if(200!==g.code)throw O.error("[".concat(i._inspectId,"] Unexpected code ").concat(g.code," from worker manager")),_e("error",i,"Unexpected code ".concat(g.code," from worker manager")),new h(u.UNEXPECTED_RESPONSE,"response code of worker is unexpected",g);if(!(g.serverResponse&&g.serverResponse.portWss&&p))throw O.error("[".concat(i._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(g))),_e("error",i,"Unexpected content from worker manager : "+JSON.stringify(g)),new h(u.UNEXPECTED_RESPONSE,"response content of worker is unexpected",g);{const m=rt("VIDEO_INSPECT_WORKER_PORT")||g.serverResponse.portWss,A=p.replace(/:\d+\/?$/,":".concat(m));i.emit(Wo.STATE_CHANGE,yl.CONNECT_WORKER,A),i._needWorkUrlOnly?i.emit(Wo.REQUEST_NEW_WORKER_URL,A):yield i.connectWorker(A)}});return function(c){return a.apply(this,arguments)}}()),this.workerManagerConnection.on(Er.WILL_RECONNECT,(a,c)=>{c(a)}),this.workerManagerConnection.on(Er.REQUEST_NEW_URLS,(a,c)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(a).catch(c)})}handleWorkerEvents(){var i=this;this.workerConnection.on(Er.CONNECTED,U(function*(){i.emit(Wo.STATE_CHANGE,yl.WORKER_CONNECTED,i.workerConnection.url),i.connectionState=Fu.CONNECTED})),this.workerConnection.on(Er.ON_MESSAGE,function(){var a=U(function*(c){if(c.data instanceof ArrayBuffer){const g=function dW(r){return function(a){let c={};e:for(;!dV(a);){let p=Lm(a);switch(p>>>3){case 0:break e;case 1:c.code=Lm(a);break;case 2:c.msg=tL(a,Lm(a));break;case 3:{let g=Q6(a);c.data=pW(a),a.limit=g;break}default:H6(a,7&p)}}return c}({bytes:i=r,offset:0,limit:i.length});var i}(new Uint8Array(c.data));if(rt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&O.debug("[".concat(i._inspectId,"] Response message for worker of inspect content "),JSON.stringify(g)),200===g.code){if("supervise"===i.inspectType)return void i.emit(Wo.INSPECT_RESULT,void 0,void 0);if(g.data&&g.data.scorePorn&&g.data.scoreSexy&&g.data.scoreNeutral){var p;const m={porn:g.data.scorePorn,sexy:g.data.scoreSexy,neutral:g.data.scoreNeutral},A=Lh(p=Object.keys(m)).call(p,(S,C)=>m[S]>m[C]?S:C,"porn"),_=Object.keys(m).find(S=>S===A);i.emit(Wo.INSPECT_RESULT,_)}else i.emit(Wo.INSPECT_RESULT,void 0,new h(u.UNEXPECTED_RESPONSE,g.code+"","There is an unexpected data on message"))}else i.emit(Wo.INSPECT_RESULT,void 0,new h(u.UNEXPECTED_RESPONSE,g.code+"",g.msg))}else O.error("[".concat(i._inspectId,"] Unexpected message type from worker")),_e("error",i,"Unexpected message type from worker"),i.emit(Wo.INSPECT_RESULT,void 0,new h(u.UNEXPECTED_RESPONSE,"invalid worker message type"))});return function(c){return a.apply(this,arguments)}}()),this.workerConnection.on(Er.CLOSED,()=>{this.connectionState=Fu.CLOSED}),this.workerConnection.on(Er.FAILED,()=>{this.connectionState=Fu.CLOSED}),this.workerConnection.on(Er.RECONNECTING,()=>{this.connectionState=this.connectionState===Fu.CONNECTED?Fu.RECONNECTING:Fu.CONNECTING}),this.workerConnection.on(Er.WILL_RECONNECT,(a,c)=>{"recover"===a&&c(a),c("tryNext")}),this.workerConnection.on(Er.REQUEST_NEW_URLS,(a,c)=>{this.workerManagerConnection.close(),this.once(Wo.REQUEST_NEW_WORKER_URL,p=>{a([p])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(p=>{this.connectWorkerManager(p,!0)}).catch(p=>{c(p)})})}static intToLong(i){return{low:i|=0,high:i>>31,unsigned:i>=0}}requestToInspectImage(){var i=this;return U(function*(){i.sequence++;const a=yy(i,Wo.CLIENT_LOCAL_VIDEO_TRACK),c={appId:i._connectInfo.appId,cname:i._connectInfo.cname,cid:i._connectInfo.cid,sid:i._connectInfo.sid,uid:i._connectInfo.uid,vid:i._connectInfo.vid};if(a){if(!a.isPlaying)return void i.emit(Wo.INSPECT_RESULT,void 0,new h(u.INVALID_OPERATION,"Only the track being played can be inspected"));const p=yield i.generateRequestData(a,c);i.workerConnection.sendMessage(p,!0,!0)}else i.emit(Wo.INSPECT_RESULT,void 0,new h(u.INVALID_OPERATION,"Only the track being published can be inspected"))})()}generateRequestData(i,a){var c=this;return U(function*(){let{appId:p,cname:g,cid:m,vid:A,sid:_,uid:S}=a;const C=Date.now(),T=yield i.getCurrentFrameImage("image/jpeg",c.quality),D=yield oh(T,p,g),B=c.sequence+"-"+m+"-"+S+"-"+C+"-"+ns(12,""),K={appId:p,cid:m,cname:g,deviceId:"",elapse:nL.intToLong(Number(C-c.inspectStartTime)),fileSize:D.byteLength,jpgEncryption:2,height:T.height,width:T.width,jpg:D,networkType:6,osType:7,requestId:B,sdkVersion:"4.12.1",sequence:c.sequence,sid:_,timestamp:nL.intToLong(C),uid:S,vid:A,service:gW.get(c.inspectType)||3,callbackData:c.extraInfo,ossFilePrefix:c.ossFilePrefix};void 0===c.extraInfo&&delete K.callbackData,void 0===c.ossFilePrefix&&delete K.ossFilePrefix;const W=function lW(r){let i=W6();return function(a,c){let p=a.appId;void 0!==p&&(ii(c,10),yd(c,p));let g=a.cid;void 0!==g&&(ii(c,16),ii(c,g));let m=a.cname;void 0!==m&&(ii(c,26),yd(c,m));let A=a.deviceId;void 0!==A&&(ii(c,34),yd(c,A));let _=a.elapse;void 0!==_&&(ii(c,40),Ry(c,_));let S=a.fileSize;void 0!==S&&(ii(c,48),Ry(c,Ty(S)));let C=a.height;void 0!==C&&(ii(c,56),Ry(c,Ty(C)));let T=a.jpg;void 0!==T&&(ii(c,66),ii(c,T.length),function(n,t){let e=nT(n,t.length);n.bytes.set(t,e)}(c,T));let D=a.networkType;void 0!==D&&(ii(c,72),Ry(c,Ty(D)));let B=a.osType;void 0!==B&&(ii(c,80),Ry(c,Ty(B)));let K=a.requestId;void 0!==K&&(ii(c,90),yd(c,K));let W=a.sdkVersion;void 0!==W&&(ii(c,98),yd(c,W));let Z=a.sequence;void 0!==Z&&(ii(c,104),Ry(c,Ty(Z)));let de=a.sid;void 0!==de&&(ii(c,114),yd(c,de));let ge=a.timestamp;void 0!==ge&&(ii(c,120),Ry(c,ge));let Se=a.uid;void 0!==Se&&(ii(c,128),ii(c,Se));let De=a.vid;void 0!==De&&(ii(c,136),ii(c,De));let it=a.width;void 0!==it&&(ii(c,144),Ry(c,Ty(it)));let Rt=a.service;void 0!==Rt&&(ii(c,152),ii(c,Rt));let Dt=a.callbackData;void 0!==Dt&&(ii(c,162),yd(c,Dt));let Pt=a.jpgEncryption;void 0!==Pt&&(ii(c,168),ii(c,Pt));let On=a.requestType;void 0!==On&&(ii(c,176),ii(c,On));let pn=a.scorePorn;void 0!==pn&&(ii(c,185),hV(c,pn));let cn=a.scoreSexy;void 0!==cn&&(ii(c,193),hV(c,cn));let bt=a.scoreNeutral;void 0!==bt&&(ii(c,201),hV(c,bt));let Ve=a.scene;void 0!==Ve&&(ii(c,208),ii(c,Ve));let nt=a.ossFilePrefix;void 0!==nt&&(ii(c,218),yd(c,nt));let At=a.serviceVendor;if(void 0!==At)for(let n of At){ii(c,226);let t=W6();hW(n,t),ii(c,t.limit),pV(c,t),mW(t)}}(r,i),function(a){let c=a.bytes,p=a.limit;return c.length===p?c:c.subarray(0,p)}(i)}(K);if(W.byteLength<c.workerMessageLengthLimit){if(rt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const Z=function(de){for(var ge=1;ge<arguments.length;ge++){var Se=null!=arguments[ge]?arguments[ge]:{};ge%2?QS(Object(Se),!0).forEach(function(De){q(de,De,Se[De])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Se)):QS(Object(Se)).forEach(function(De){Object.defineProperty(de,De,Object.getOwnPropertyDescriptor(Se,De))})}return de}({},K);delete Z.jpg,O.debug("[".concat(c._inspectId,"] Request message for worker of inspect content "),JSON.stringify(Z)),_e("debug",c,"Request message for worker of inspect content ".concat(JSON.stringify(Z)))}return W}return c.quality=c.quality*c.qualityRatio,yield c.generateRequestData(i,{appId:p,cname:g,cid:m,vid:A,sid:_,uid:S})})()}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=lu.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Fu.CLOSED,this.emit(Wo.STATE_CHANGE,yl.CLOSED)}}var gV,q6,_V,Tk,J6,$6,rL,X6,vV,Z6,eQ,zo;function tQ(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function rT(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?tQ(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):tQ(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}let iL=(gV=yn("AgoraRTCClient","store.clientId"),q6=RD({report:Gt}),_V=RD(),Tk=RD({report:Gt}),J6=OD(),$6=RD({report:Gt}),rL=OD({report:Gt}),X6=OD({report:Gt}),vV=OD({report:Gt}),Z6=RD({reportResult:!0,report:Gt}),gV((Kn((zo=class extends s{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}constructor(r){var i;let a;if(super(),i=this,q(this,"store",void 0),q(this,"_uid",void 0),q(this,"_channelName",void 0),q(this,"_uintUid",void 0),q(this,"_users",[]),q(this,"_codec",void 0),q(this,"_mode",void 0),q(this,"_config",void 0),q(this,"_clientId",void 0),q(this,"_appId",void 0),q(this,"_sessionId",null),q(this,"_key",void 0),q(this,"_joinInfo",void 0),q(this,"_gateway",void 0),q(this,"_statsCollector",void 0),q(this,"_configDistribute",void 0),q(this,"_leaveMutex",new fu("client-leave")),q(this,"_publishMutex",new fu("client-publish")),q(this,"_renewTokenMutex",new fu("client-renewtoken")),q(this,"_subscribeMutex",new fu("client-subscribe")),q(this,"_encryptionMode","none"),q(this,"_encryptionSecret",null),q(this,"_encryptionSalt",null),q(this,"_proxyServer",void 0),q(this,"_performanceRecorder",void 0),q(this,"_turnServer",{servers:[],mode:"auto"}),q(this,"_cloudProxyServerMode","disabled"),q(this,"_isDualStreamEnabled",!1),q(this,"_defaultStreamFallbackType",void 0),q(this,"_lowStreamParameter",void 0),q(this,"_streamFallbackTypeCacheMap",new Map),q(this,"_remoteStreamTypeCacheMap",new Map),q(this,"_axiosCancelSource",lu.CancelToken.source()),q(this,"_audioVolumeIndicationInterval",void 0),q(this,"_networkQualityInterval",void 0),q(this,"_userOfflineTimeout",void 0),q(this,"_streamRemovedTimeout",void 0),q(this,"_injectStreamingClient",void 0),q(this,"_liveTranscodeStreamingClient",void 0),q(this,"_liveRawStreamingClient",void 0),q(this,"_channelMediaRelayClient",void 0),q(this,"_networkQualitySensitivity","normal"),q(this,"_p2pChannel",void 0),q(this,"_useLocalAccessPoint",!1),q(this,"_joinAndNotLeaveYet",!1),q(this,"_numberOfJoinCount",0),q(this,"_remoteDefaultVideoStreamType",void 0),q(this,"_inspect",void 0),q(this,"_handleLocalTrackEnable",(c,p,g)=>{this.publish(c,!1).then(p).catch(g)}),q(this,"_handleLocalTrackDisable",(c,p,g)=>{this.unpublish(c).then(p).catch(g)}),q(this,"_handleUserOnline",c=>{this.isStringUID&&"string"!=typeof c.uid&&(O.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID")),_e("error",this,"StringUID is Mixed with UintUID"));const p=this._users.find(g=>g.uid===c.uid);if(p)p._trust_in_room_=!0;else{const g=new Mx(c.uid,c.uint_id||c.uid);this._users.push(g),O.debug("[".concat(this._clientId,"] user online"),c.uid),ct("info",this,"user-joined",{uid:c.uid}),this.emit(ar.USER_JOINED,g)}}),q(this,"_handleUserOffline",c=>{const p=this._users.find(g=>g.uid===c.uid);p&&(this._handleRemoveStream(c),F3(this._users,p),this._remoteStreamTypeCacheMap.delete(p.uid),this._streamFallbackTypeCacheMap.delete(p.uid),O.debug("[".concat(this._clientId,"] user offline"),c.uid,"reason:",c.reason),ct("info",this,"user-left",{reason:c.reason,uid:c.uid}),this.emit(ar.USER_LEAVED,p,c.reason))}),q(this,"_handleAddAudioOrVideoStream",(c,p,g,m,A,_,S)=>{const C=this._users.find(D=>D.uid===p);if(!C)return O.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)")),void He("error",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),"can not find target user!");O.debug("[".concat(this._clientId,"] stream added with uid ").concat(p,", type ").concat(c)),He("debug",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),{uid:p,mediaType:c});const T="audio"===c?C.hasAudio:C.hasVideo;C._uintid||(C._uintid=A||p),"audio"===c?C._trust_audio_stream_added_state_=!0:C._trust_video_stream_added_state_=!0,"audio"===c?(C._audio_added_=!0,void 0!==g&&(C._audioSSRC=g),void 0!==m&&(C._cname=m),_&&(C._audioOrtc=_)):(C._video_added_=!0,void 0!==g&&(C._videoSSRC=g),void 0!==m&&(C._cname=m),void 0!==S&&(C._rtxSsrcId=S),_&&(C._videoOrtc=_)),("audio"===c?C.hasAudio:C.hasVideo)&&!T&&(O.info("[".concat(this._clientId,"] remote user ").concat(C.uid," published ").concat(c)),_e("info",this,"remote user ".concat(C.uid," published ").concat(c)),ct("info",this,"user-published",{uid:C.uid,mediaType:c}),this.emit(ar.USER_PUBLISHED,C,c)),"video"===c?Gt.onGatewayStream(this._sessionId,Aa.ON_ADD_VIDEO_STREAM,wo.ON_ADD_VIDEO_STREAM,{peer:A||p}):Gt.onGatewayStream(this._sessionId,Aa.ON_ADD_AUDIO_STREAM,wo.ON_ADD_AUDIO_STREAM,{peer:A||p}),this._p2pChannel.remoteMediaSsrcChanged(C,c,g)&&this._p2pChannel.unsubscribe(C,c,!0).then(()=>{O.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(C.uid," after rejoin because SSRC id changed.")),this._subscribe(C,c,!0).catch(D=>{O.error("[".concat(this._clientId,"] resubscribe error"),D.toString()),_e("error",this,"resubscribe error: ".concat(D.toString()))})}),this._p2pChannel.hasPendingRemoteMedia(C,c)&&(O.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(C.uid," after reconnect.")),this._subscribe(C,c,!0).catch(D=>{O.error("[".concat(this._clientId,"] resubscribe error"),D.toString()),_e("error",this,"resubscribe error: ".concat(D.toString()))}))}),q(this,"_handleRemoveStream",c=>{const p=this._users.find(m=>m.uid===c.uid);if(!p)return O.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)")),void He("warning",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid,info:"can not find target user!"});O.debug("[".concat(this._clientId,"] stream removed with uid ").concat(c.uid)),He("debug",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid});let g=()=>{};p.hasAudio&&p.hasVideo?g=()=>{O.info("[".concat(this._clientId,"] remote user ").concat(p.uid," unpublished audio track")),ct("info",this,"user-unpublished",{uid:p.uid,mediaType:"audio"}),this.emit(ar.USER_UNPUBLISHED,p,"audio"),O.info("[".concat(this._clientId,"] remote user ").concat(p.uid," unpublished video track")),ct("info",this,"user-unpublished",{uid:p.uid,mediaType:"video"}),this.emit(ar.USER_UNPUBLISHED,p,"video")}:p.hasVideo?g=()=>{O.info("[".concat(this._clientId,"] remote user ").concat(p.uid," unpublished video track")),ct("info",this,"user-unpublished",{uid:p.uid,mediaType:"video"}),this.emit(ar.USER_UNPUBLISHED,p,"video")}:p.hasAudio&&(g=()=>{O.info("[".concat(this._clientId,"] remote user ").concat(p.uid," unpublished audio track")),ct("info",this,"user-unpublished",{uid:p.uid,mediaType:"audio"}),this.emit(ar.USER_UNPUBLISHED,p,"audio")}),p._trust_audio_stream_added_state_=!0,p._trust_video_stream_added_state_=!0,p._audio_added_=!1,p._video_added_=!1,this._p2pChannel.unsubscribe(p).then(m=>{if(m)return this._gateway.unsubscribe(m,p.uid)}),p._audioSSRC=void 0,p._videoSSRC=void 0,p._audioOrtc=void 0,p._videoOrtc=void 0,p._rtxSsrcId=void 0,Gt.onGatewayStream(this._sessionId,Aa.ON_REMOVE_STREAM,wo.ON_REMOVE_STREAM,{peer:c.uint_id||c.uid}),g()}),q(this,"_handleSetStreamLocalEnable",(c,p,g)=>{const m=this._users.find(S=>S.uid===p);if(!m)return O.error("[".concat(this._clientId,"] can not find target user!(disable_local)")),void He("error",this,"disable_local_video","can not find target user!(disable_local)");O.debug("[".concat(this._clientId,"] local ").concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(p)),He("debug",this,"disable_local_video","local ".concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(p));const A="audio"===c?m.hasAudio:m.hasVideo;if("audio"===c){m._trust_audio_enabled_state_=!0;const S=m._audio_enabled_;if(m._audio_enabled_=g,m._audio_enabled_===S)return;{const C=m._audio_enabled_?"enable-local-audio":"disable-local-audio";O.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(p,", msg: ").concat(C)),Ft("debug",this,"user-info-updated",{uid:p,msg:C}),this.emit(ar.USER_INFO_UPDATED,p,C)}}else{m._trust_video_enabled_state_=!0;const S=m._video_enabled_;if(m._video_enabled_=g,m._video_enabled_===S)return;{const C=m._video_enabled_?"enable-local-video":"disable-local-video";O.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(p,", msg: ").concat(C)),Ft("debug",this,"user-info-updated",{uid:p,msg:C}),this.emit(ar.USER_INFO_UPDATED,p,C)}}const _="audio"===c?m.hasAudio:m.hasVideo;return A!==_?!A&&_?(O.info("[".concat(this._clientId,"] remote user ").concat(p," published ").concat(c)),ct("info",this,"user-published",{uid:p,mediaType:c}),void this.emit(ar.USER_PUBLISHED,m,c)):("video"===c&&m._videoTrack&&m._videoTrack._destroy(),this._p2pChannel.muteRemote(m,c),O.info("[".concat(this._clientId,"] remote user ").concat(p," unpublished ").concat(c)),ct("info",this,"user-unpublished",{uid:p,mediaType:c}),void this.emit(ar.USER_UNPUBLISHED,m,c)):void 0}),q(this,"_handleMuteStream",(c,p,g)=>{O.debug("[".concat(this._clientId,"] receive mute message"),c,p,g),He("debug",this,"mute_".concat(p),g);const m=this._users.find(S=>S.uid===c);if(!m)return O.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(c)),void He("warning",this,"mute_".concat(p),"can not find remote user, ignore mute event, uid: ".concat(c));const A="audio"===p?m.hasAudio:m.hasVideo;if("audio"===p){m._trust_audio_mute_state_=!0;const S=m._audio_muted_;if(m._audio_muted_=g,m._audio_muted_===S)return;{const C=m._audio_muted_?"mute-audio":"unmute-audio";O.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(C)),Ft("debug",this,"user-info-updated",{uid:c,msg:C}),this.emit(ar.USER_INFO_UPDATED,c,C)}}else{m._trust_video_mute_state_=!0;const S=m._video_muted_;if(m._video_muted_=g,m._video_muted_===S)return;{const C=m._video_muted_?"mute-video":"unmute-video";O.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(C)),Ft("debug",this,"user-info-updated",{uid:c,msg:C}),this.emit(ar.USER_INFO_UPDATED,c,C)}}const _="audio"===p?m.hasAudio:m.hasVideo;if(A!==_){if(!A&&_)return("audio"===p?m._audioSSRC:m._videoSSRC)?(O.info("[".concat(this._clientId,"] remote user ").concat(c," published ").concat(p)),ct("info",this,"user-published",{uid:m.uid,mediaType:p}),void this.emit(ar.USER_PUBLISHED,m,p)):void O.warning("[".concat(this._clientId,"] remote user ").concat(c," receive ").concat(p," unmute message  before add stream message, ").concat(p," SSRC doesn't exist yet."));"video"===p&&m._videoTrack&&m._videoTrack._destroy(),this._p2pChannel.muteRemote(m,p),O.info("[".concat(this._clientId,"] remote user ").concat(c," unpublished ").concat(p)),ct("info",this,"user-unpublished",{uid:c,mediaType:p}),this.emit(ar.USER_UNPUBLISHED,m,p)}}),q(this,"_handleP2PLost",function(){var c=U(function*(p){if(O.debug("[".concat(i._clientId,"] receive p2p lost"),p),He("debug",i,"p2p_lost",p),parseInt(p.p2pid,10)!==i.store.p2pId)return O.warning("P2PLost stream not found",p),void He("warning",i,"p2p_lost","P2PLost stream not found, ".concat(p));yield i._p2pChannel.requestReconnect()});return function(p){return c.apply(this,arguments)}}()),q(this,"_handleTokenWillExpire",()=>{O.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),He("debug",this,"token_privilege_will_expire"),this.emit(ar.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),q(this,"_handleBeforeUnload",c=>{"beforeunload"===c.type&&void 0!==c.returnValue&&""!==c.returnValue||(this.leave(),O.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")),st("info",["window",this.store.clientId],uu()?"beforeunload":"pagehide"))}),q(this,"_handleUpdateNetworkQuality",()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(ar.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const c={downlinkNetworkQuality:0,uplinkNetworkQuality:0};c.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),c.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(ar.NETWORK_QUALITY,c)}),this._codec=r.codec,this._mode=r.mode,this._clientId=ns(5,"client-"),this.store=new aW(r.codec,r.audioCodec,r.mode,this._clientId),this.store.clientCreated(),r.proxyServer&&this.setProxyServer(r.proxyServer,!0),r.turnServer&&this.setTurnServer(r.turnServer,!0),O.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(gr," build: ").concat(Tr,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),Ft("info",this,"constructor",{version:gr,build:Tr,mode:this._mode,codec:this._codec}),this._performanceRecorder=function(c,p){const g=new uW(c,"join");return cW.set(c,g),g}(this._clientId),r.clientRoleOptions)try{CQ(r.clientRoleOptions),a=Object.assign({},r.clientRoleOptions)}catch(c){O.warning("[".concat(this._clientId,"] ").concat(c.toString())),_e("warning",this,c.toString())}this._statsCollector=new MS(this.store),this._statsCollector.onStatsException=(c,p,g)=>{O.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(c,", msg: ").concat(p,", uid: ").concat(g)),ct("debug",this,ar.EXCEPTION,{code:c,message:p,uid:g}),this.emit(ar.EXCEPTION,{code:c,msg:p,uid:g})},this._statsCollector.onUploadPublishDuration=(c,p,g,m)=>{const A=this._users.find(_=>_.uid===c);A&&Gt.peerPublishStatus(this._sessionId,{subscribeElapse:m,audioPublishDuration:p,videoPublishDuration:g,peer:A._uintid})},this._gateway=new Tz(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:r.websocketRetryConfig||v,httpRetryConfig:r.httpRetryConfig||v,forceWaitGatewayResponse:void 0===r.forceWaitGatewayResponse||r.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:r.role,clientRoleOptions:a}),this._config=r,this._configDistribute=new GH,this._p2pChannel=new oW(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}join(r,i,a,c,p){var g=this;return U(function*(){const m=++g._numberOfJoinCount;g._performanceRecorder.checkPoint("startJoin"),g.store.joinStart(),c&&(g.store.uid=c);const A="HTTPS"===(Ik||Ik||(Ik=(window.location.protocol.split(":")[0]||"").toUpperCase(),Ik)),_=uV()?window.isSecureContext:"Browser Not Support";if(!uV()&&!A||!window.isSecureContext){const K="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";O.warning(K),Ne("warning",g,K)}const S=M9();"DISCONNECTED"===g.connectionState&&(g.store.avoidJoinStart=Math.round(Date.now()),O.debug("[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)),Ne("debug",g,"join",void 0,"[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)));const C=Gt.reportApiInvoke(S,{name:Xn.JOIN,options:[r,i,a,c],states:{isHttps:A,isSecureContext:_},tag:zn.TRACER});Gt.setAppId(r);try{if(!a&&null!==a)throw new h(u.INVALID_PARAMS,"Invalid token: ".concat(a,". If you don not use token, set it to null"));a&&Lc(a,"token",1,2047),Lc(r,"appid",1,2047),rN(i),c&&iN(c),p&&Lc(p,"optionalInfo",1,2047)}catch(K){throw C.onError(K),K}if(O.info("[".concat(g._clientId,"] start join channel ").concat(i,", join number: ").concat(m)),Ft("info",g,"join",{channel:i}),g._leaveMutex.isLocked&&(O.debug("[".concat(g._clientId,"] join: waiting leave operation")),_e("debug",g,"join: waiting leave operation"),(yield g._leaveMutex.lock())(),O.debug("[".concat(g._clientId,"] join: continue")),_e("debug",g,"join: continue")),g._joinAndNotLeaveYet=!0,"DISCONNECTED"!==g.connectionState){const K=new h(u.INVALID_OPERATION,"[".concat(g._clientId,"] Client already in connecting/connected state"));throw C.onError(K),K}g._sessionId||(g._sessionId=S,g.store.sessionId=g._sessionId),g._gateway.state="CONNECTING";const T=rT({clientId:g._clientId,appId:r,sid:g._sessionId,cname:i,uid:"string"!=typeof c?c:null,turnServer:g._turnServer,proxyServer:g._proxyServer,token:a||r,cloudProxyServer:g._cloudProxyServerMode,optionalInfo:p,useLocalAccessPoint:g._useLocalAccessPoint},void 0!==g._remoteDefaultVideoStreamType&&{defaultVideoStream:g._remoteDefaultVideoStreamType});if("string"==typeof c&&(T.stringUid=c,g._uintUid?(T.uid=g._uintUid,g._uintUid=void 0):T.uid=0),"none"!==g._encryptionMode&&g._encryptionSecret){if(T.aesmode=g._encryptionMode,T.aespassword=yield(K=U(function*(W){const Z=nx("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),de=yield window.crypto.subtle.importKey("spki",Z,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),ge=b3(W),Se=yield window.crypto.subtle.encrypt({name:"RSA-OAEP"},de,ge);return BD(new Uint8Array(Se))}),function(W){return K.apply(this,arguments)})(g._encryptionSecret),!g._joinAndNotLeaveYet)throw new h(u.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g._encryptionSalt&&(T.aessalt=g._encryptionSalt)}var K;g._startSession(g._sessionId,{channel:i,appId:r});const D=g._sessionId;setTimeout(()=>{"CONNECTING"===g.connectionState&&D===g._sessionId&&Gt.joinChannelTimeout(g._sessionId,5)},5e3);try{let K;const W=T.cloudProxyServer;if("443only"===W)T.proxyServer=rt("PROXY_SERVER_TYPE2");else if(["proxy3","proxy4","proxy5"].includes(W)){const ge=rt("PROXY_SERVER_TYPE3");T.proxyServer=Array.isArray(ge)?ge[0]:ge}if(Gt.setProxyServer(T.proxyServer),O.setProxyServer(T.proxyServer),Ze(T.proxyServer),g._performanceRecorder.checkPoint("startRequestAp"),g.store.requestAPStart(),T.stringUid&&!T.uid&&"normal"===W){yield p8(T,g._axiosCancelSource.token,g._config.httpRetryConfig||v,!1,g.store);const ge=yield wx(T.stringUid,T,g._axiosCancelSource.token,g._config.httpRetryConfig||v,g.store);O.debug("getUserAccount Success ".concat(T.stringUid," => ").concat(ge)),_e("debug",g,"getUserAccount Success ".concat(T.stringUid," => ").concat(ge)),T.uid=ge,K=yield rk(T,g._axiosCancelSource.token,g._config.httpRetryConfig||v,g.store)}else if(T.stringUid&&!T.uid){const ge=yield wx(T.stringUid,T,g._axiosCancelSource.token,g._config.httpRetryConfig||v,g.store);O.debug("getUserAccount Success ".concat(T.stringUid," => ").concat(ge)),_e("debug",g,"getUserAccount Success ".concat(T.stringUid," => ").concat(ge)),T.uid=ge,K=yield p8(T,g._axiosCancelSource.token,g._config.httpRetryConfig||v,!0,g.store)}else K=yield p8(T,g._axiosCancelSource.token,g._config.httpRetryConfig||v,!0,g.store);if(!g._joinAndNotLeaveYet)throw new h(u.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g.store.requestAPEnd(),g._performanceRecorder.checkPoint("startJoinGateway"),setTimeout(()=>{g._configDistribute.startGetConfigDistribute(T,g._axiosCancelSource.token),g._configDistribute.on(hy.UPDATE_BITRATE_LIMIT,ge=>{g._p2pChannel.updateBitrateLimit(ge)})},0),g._key=a||r;const Z=K.gatewayInfo;g._joinInfo=rT(rT({},T),{},{cid:Z.cid,uid:T.uid?T.uid:Z.uid,vid:Z.vid,apResponse:Z.res,uni_lbs_ip:Z.uni_lbs_ip,gatewayAddrs:Z.gatewayAddrs});const de=yield g._joinGateway();if(!g._joinAndNotLeaveYet)throw new h(u.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));return C.onSuccess(de),g._appId=r,g._channelName=T.cname,g._uid=de,g.store.uid=de,setTimeout(()=>{g._networkQualityInterval&&window.clearInterval(g._networkQualityInterval),g._networkQualityInterval=window.setInterval(g._handleUpdateNetworkQuality,2e3),window.addEventListener(uu()?"beforeunload":"pagehide",g._handleBeforeUnload)},0),O.info("[".concat(g._clientId,"] Joining channel success: ").concat(i)),Ft("info",g,"join",i,"success"),setTimeout(()=>{rt("USE_NEW_LOG")?mr():O.startUpload()},5e3),g._performanceRecorder.checkPoint("finishJoin"),g.store.joinEnd(),Fi.includes(B=g)||Fi.push(B),de}catch(K){const W=Array.isArray(K)?K[0]:K;throw O.error("[".concat(g._clientId,"] join number: ").concat(m,", Joining channel failed, rollback"),W),Ft("error",g,"join",i,W.toString()),W.code!==u.OPERATION_ABORTED&&g._numberOfJoinCount===m&&(g._gateway.state="DISCONNECTED",g._reset()),C.onError(W),W}var B})()}_joinGateway(){if(!this._joinInfo||!this._key)throw new h(u.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||!rt("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(r=>r).catch(r=>{if(r.code===u.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,Gs.FALLBACK);throw r}).then(r=>{if(r)return r;if(O.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new h(u.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const i=rt("PROXY_SERVER_TYPE3");if(Array.isArray(i))if(this._joinInfo.apUrl){const a=new Y5(this._joinInfo.apUrl).host.split("."),c=a.slice(a.length-2).join(".");i.forEach(p=>{this._joinInfo&&p.includes(c)&&(this._joinInfo.proxyServer=p)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=i[0])}else this._joinInfo.proxyServer=i[0];else this._joinInfo.proxyServer=i;return O.setProxyServer(this._joinInfo.proxyServer),Gt.setProxyServer(this._joinInfo.proxyServer),Ze(this._joinInfo.proxyServer),Gt.reportApiInvoke(this._sessionId,{name:Xn.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:zn.TRACER}).onSuccess(),this.emit(ar.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}).then(r=>r)}leave(){var r=this;return U(function*(){const i=Gt.reportApiInvoke(r._sessionId,{name:Xn.LEAVE,options:[],tag:zn.TRACER});O.info("[".concat(r._clientId,"] Leaving channel")),Ft("info",r,"leave"),window.removeEventListener(uu()?"beforeunload":"pagehide",r._handleBeforeUnload),r._reset(),function(c){const p=Fi.indexOf(c);-1!==p&&Fi.splice(p,1)}(r);const a=yield r._leaveMutex.lock();if("DISCONNECTED"===r.connectionState)return O.info("[".concat(r._clientId,"] Leaving channel repeated, success")),a(),i.onSuccess();yield r._gateway.leave("CONNECTED"!==r.connectionState),O.info("[".concat(r._clientId,"] Leaving channel success")),Ft("info",r,"leave",void 0,"success"),r._joinAndNotLeaveYet=!1,r.store.resetJoinChannelServiceRecords(),a(),i.onSuccess()})()}publish(r){var i=arguments,a=this;return U(function*(){let c=!(i.length>1&&void 0!==i[1])||i[1];Array.isArray(r)||(r=[r]);const p=Gt.reportApiInvoke(a._sessionId,{name:Xn.PUBLISH,options:r.map(m=>m?Object(m).toString():"null"),tag:zn.TRACER});if(0===r.length){const m=new h(u.INVALID_PARAMS,"track list is empty");return p.onError(m),m.throw()}if("audience"===a._gateway.role){const m=new h(u.INVALID_OPERATION,"audience can not publish stream");return p.onError(m),m.throw()}for(const m of r){if(!(m instanceof C3)){const A=new h(u.INVALID_PARAMS,"parameter is not local track");return p.onError(A),A.throw()}if(!m._enabled&&c){const A=new h(u.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(m.getTrackId()));return p.onError(A),A.throw()}}O.info("[".concat(a._clientId,"] Publishing tracks, id ").concat(r.map(m=>"".concat(m.getTrackId()," ")))),Ft("info",a,"publish",r.map(m=>"".concat(m.getTrackId()))),yield a._configDistribute.awaitConfigDistributeComplete(),c&&r.forEach(m=>{const A=a._configDistribute.getBitrateLimit();m instanceof Ns&&A&&m.setBitrateLimit(A.uplink)});const g=yield a._publishMutex.lock();try{yield a._publishHighStream(r),p.onSuccess(r.map(m=>m.trackMediaType+":"+m.getTrackLabel()).toString()),O.info("[".concat(a._clientId,"] Publish success, id ").concat(r.map(m=>"".concat(m.getTrackId()," ")))),Ft("info",a,"publish",r.map(m=>"".concat(m.getTrackId())),"success")}catch(m){throw p.onError(m),O.error("[".concat(a._clientId,"] publish error"),m.toString()),Ft("error",a,"publish",void 0,m.toString()),m}finally{g()}})()}unpublish(r){var i=this;return U(function*(){if(!i._joinInfo||void 0===i._uid)throw new h(u.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");r?Array.isArray(r)||(r=[r]):r=i._p2pChannel.getAllTracks(!0);const a=Gt.reportApiInvoke(i._sessionId,{name:Xn.UNPUBLISH,options:r.map(p=>p.getTrackId()),tag:zn.TRACER});O.info("[".concat(i._clientId,"] Unpublish tracks, tracks ").concat(r.map(p=>"".concat(p.getTrackId()," "))," ")),Ft("info",i,"unpublish",r.map(p=>"".concat(p.getTrackId())));const c=yield i._publishMutex.lock();try{const p=yield i._p2pChannel.unpublish(r);p&&(yield i._gateway.unpublish(p,i._uid)),O.info("[".concat(i._clientId,"] Unpublish success,tracks ").concat(r.map(g=>"".concat(g.getTrackId())))),Ft("info",i,"unpublish",r.map(g=>"".concat(g.getTrackId())),"success"),a.onSuccess()}catch(p){throw a.onError(p),O.error("[".concat(i._clientId,"] unpublish error"),p.toString()),Ft("error",i,"unpublish",void 0,p.toString()),p}finally{c&&c()}})()}subscribe(r,i){var a=this;return U(function*(){return a._subscribe(r,i)})()}_subscribe(r,i,a){var c=this;return U(function*(){va(i,"mediaType",["audio","video"]);const p=Gt.reportApiInvoke(c._sessionId,{name:Xn.SUBSCRIBE,options:[r.uid,i],tag:zn.TRACER});if(!c._joinInfo){const C=new h(u.INVALID_OPERATION,"Can't subscribe stream, not joined");throw p.onError(C),C}if("CONNECTED"!==c.connectionState&&"RECONNECTING"!==c.connectionState){const C=new h(u.INVALID_OPERATION,"Can't subscribe stream in ".concat(c.connectionState," state"));throw p.onError(C),C}if(!c._users.find(C=>C===r)){const C=new h(u.INVALID_REMOTE_USER,"user is not in the channel");throw O.error("[".concat(c._clientId,"] can not subscribe ").concat(r.uid,", this user is not in the channel")),Ft("error",c,"subscribe",r.uid,"this user is not in the channel"),p.onError(C),C}if(!r.hasAudio&&!r.hasVideo){const C=new h(u.INVALID_REMOTE_USER,"user is not published");throw O.error("[".concat(c._clientId,"] can not subscribe ").concat(r.uid,", user is not published")),Ft("error",c,"subscribe",r.uid,"this user is not published"),p.onError(C),C}if(!(a||("audio"!==i||r.hasAudio&&void 0!==r._audioSSRC)&&("video"!==i||r.hasVideo&&void 0!==r._videoSSRC))){const C=new h(u.REMOTE_USER_IS_NOT_PUBLISHED);throw O.error("[".concat(c._clientId,"] can not subscribe ").concat(r.uid," with mediaType ").concat(i,", remote track is not published")),Ft("error",c,"subscribe",r.uid,"mediaType ".concat(i,", remote track is not published")),p.onError(C),C}const g="audio"===i?r._audioSSRC:r._videoSSRC,m="audio"===i?r._audioOrtc:r._videoOrtc,A="video"===i?r._rtxSsrcId:void 0,_={stream_type:"audio"===i?Wr.AUDIO:Wr.VIDEO,ssrcId:g},S=yield c._subscribeMutex.lock();O.info("[".concat(c._clientId,"] subscribe user ").concat(r.uid,", mediaType: ").concat(i)),Ft("info",c,"subscribe",{uid:r.uid,mediaType:i});try{if(yield c._p2pChannel.hasRemoteMediaWithLock(r,i))yield c._p2pChannel.unmuteRemote(r,i);else try{Cl.markSubscribeStart(c.store.clientId,g),c.store.subscribe(r.uid,i,performance.now()),yield c._p2pChannel.subscribe(r,i,g,A,m);try{yield c._gateway.subscribe(r.uid,_,!0)}catch(T){throw yield c._p2pChannel.unsubscribe(r,i),T}c.store.subscribe(r.uid,i,void 0,performance.now()),c._p2pChannel.reportSubscribeEvent(!0,null,r,i)}catch(T){throw c._p2pChannel.reportSubscribeEvent(!1,T?.code,r,i),T}O.info("[".concat(c._clientId,"] subscribe success user ").concat(r.uid,", mediaType: ").concat(i)),Ft("info",c,"subscribe",{uid:r.uid,mediaType:i},"success"),c._defaultStreamFallbackType&&c.setStreamFallbackOption(r.uid,c._defaultStreamFallbackType).catch(T=>{O.warning("[".concat(c._clientId,"] auto set fallback failed"),T),_e("warning",c,"auto set fallback failed, ".concat(T.toString()))});const C="audio"===i?r._audioTrack:r._videoTrack;if(!C){const T=new h(u.UNEXPECTED_ERROR,"can not find remote track in user object");return p.onError(T),T.throw()}return p.onSuccess(C.getTrackId()),C}catch(C){throw p.onError(C),O.error("[".concat(c._clientId,"] subscribe user ").concat(r.uid," error"),C),Ft("error",c,"subscribe",{uid:r.uid,mediaType:i},C.toString()),C}finally{S()}})()}massSubscribe(r){var i=this;return U(function*(){gw(r,"subscribeList");const a=Gt.reportApiInvoke(i._sessionId,{name:Xn.MASS_SUBSCRIBE,options:r.map(S=>{let{user:C,mediaType:T}=S;return[C?.uid,T]}),tag:zn.TRACER});if(!i._joinInfo){const S=new h(u.INVALID_OPERATION,"Can't subscribe stream, not joined");throw a.onError(S),S}if("CONNECTED"!==i.connectionState&&"RECONNECTING"!==i.connectionState){const S=new h(u.INVALID_OPERATION,"Can't subscribe stream in ".concat(i.connectionState," state"));throw a.onError(S),S}const c=performance.now(),p=new Map,g=yield i._subscribeMutex.lock();O.info("[".concat(i._clientId,"]start massSubscribe user ").concat(r.map(S=>{let{user:C,mediaType:T}=S;return"user: ".concat(C?.uid,", mediaType: ").concat(T)}).join("; "))),Ft("info",i,"massSubscribe",r);const m=(r=[...r]).map(S=>{let{user:C,mediaType:T}=S;return{user:C,mediaType:T}}),A=yield i._p2pChannel.globalLock();try{var _;for(let C=r.length-1;C>=0;C--){const T=r[C],{user:D,mediaType:B}=T;if(va(B,"mediaType",["audio","video"]),!D){const Z=new h(u.INVALID_PARAMS,"user property does not exist in subscribeList item");throw O.error("[".concat(i._clientId,"] user property does not exist in subscribeList item")),a.onError(Z),Z}if(!i._users.find(Z=>Z===D)){const Z=new h(u.INVALID_REMOTE_USER,"user is not in the channel");O.error("[".concat(i._clientId,"] can not massSubscribe ").concat(D.uid,", this user is not in the channel")),Ft("error",i,"massSubscribe",D.uid,"this user is not in the channel"),m[C].error=Z,r.splice(C,1);continue}if("audio"===B&&(!D.hasAudio||void 0===D._audioSSRC)||"video"===B&&(!D.hasVideo||void 0===D._videoSSRC)){const Z=new h(u.REMOTE_USER_IS_NOT_PUBLISHED);O.error("[".concat(i._clientId,"] can not subscribe ").concat(D.uid," with mediaType ").concat(B,", remote user is not published")),Ft("error",i,"subscribe",D.uid,"mediaType ".concat(B,", remote user is not published")),m[C].error=Z,r.splice(C,1);continue}const K=To.Video|To.LwoVideo,W=p.get(D);if(W){if("video"===B?W&K:W&To.Audio){r.splice(C,1),O.warning("repeat massSubscribe user:".concat(D.uid,", mediaType:").concat(B," twice"));continue}p.set(D,W|("video"===B?K:To.Audio))}else p.set(D,"video"===B?K:To.Audio)}for(let C=r.length-1;C>=0;C--){const T=r[C],{user:D,mediaType:B}=T,K=To.Video|To.LwoVideo;if(i._p2pChannel.hasRemoteMedia(D,B)){yield i._p2pChannel.unmuteRemoteNoLock(D,B);const W=p.get(D);p.set(D,"video"===B?W^K:W^To.Audio),r.splice(C,1)}}i.store.massSubscribe(r.map(C=>({userId:C.user.uid,type:C.mediaType})),c);const S=Lh(_=Array.from(p.entries())).call(_,(C,T)=>{let[D,B]=T;if(0===B)return C;const K={stream_id:D.uid,stream_type:B};return B&To.Audio&&(K.audio_ssrc=D._audioSSRC),B&To.Video&&(K.video_ssrc=D._videoSSRC),C.push(K),C},[]);try{r.length>0&&(yield i._p2pChannel.massSubscribeNoLock(r.map(T=>{let{user:D,mediaType:B}=T;return{user:D,mediaType:B,ssrcId:B===Wr.VIDEO?D._videoSSRC:D._audioSSRC,rtxSsrcId:D._rtxSsrcId}})));const C=new Map;if(S.length>0&&((yield i._gateway.subscribeAll(S,!0))?.users||[]).forEach(D=>{let{stream_id:B,video_error_code:K,audio_error_code:W,error_code:Z}=D;(K||W||Z)&&C.set(B,{video_error_code:K,audio_error_code:W,error_code:Z})}),Array.from(C.entries()).length>0){const T=Array.from(C.entries()).map(D=>{let B,[K,W]=D;return W.error_code||W.video_error_code&&W.audio_error_code?B=void 0:W.video_error_code?B=Wr.VIDEO:W.audio_error_code&&(B=Wr.AUDIO),{user:i.remoteUsers.find(Z=>Z.uid===K),mediaType:B}});yield i._p2pChannel.massUnsubscribeNoLock(T)}for(const T of m){const D=C.get(T.user.uid);if(D){const B=D.error_code||"audio"===T.mediaType&&D.audio_error_code||"video"===T.mediaType&&D.video_error_code;if(B){const K=gU(B);O.error("user:".concat(T.user.uid," mediaType:").concat(T.mediaType," has massSubscribe error ").concat(K.desc)),T.error=new h(u.SUBSCRIBE_FAILED,"code ".concat(B,": ").concat(K.desc))}}T.error||(T.track="video"===T.mediaType?T.user.videoTrack:T.user.audioTrack)}return i.store.massSubscribe(m.filter(T=>!T.error).map(T=>({userId:T.user.uid,type:T.mediaType})),void 0,performance.now()),m.forEach(T=>{var D;Gt.subscribe(i.store.sessionId,{succ:!!T.error,ec:(null===(D=T.error)||void 0===D?void 0:D.code)||null,video:T.mediaType===Wr.VIDEO,audio:T.mediaType===Wr.AUDIO,peerid:T.user.uid,subscribeRequestid:T.mediaType===Wr.VIDEO?T.user._videoSSRC:T.user._audioSSRC,p2pid:i.store.p2pId,eventElapse:Math.floor(performance.now()-c)},!0)}),a.onSuccess(),O.info("[".concat(i._clientId,"] massSubscribe success ").concat(r.map(T=>{let{user:D,mediaType:B}=T;return"user: ".concat(D?.uid,", mediaType: ").concat(B)}).join("; "))),Ft("info",i,"massSubscribe",r,"success"),m}catch(C){throw yield i._p2pChannel.massUnsubscribeNoLock(r),a.onError(C),C}}finally{A(),g()}})()}unsubscribe(r,i){var a=this;return U(function*(){if(i&&va(i,"mediaType",["audio","video"]),!a._joinInfo)throw new h(u.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const c=Gt.reportApiInvoke(a._sessionId,{name:Xn.UNSUBSCRIBE,options:[r.uid,i],tag:zn.TRACER});if(!a._users.find(p=>p===r)){const p=new h(u.INVALID_REMOTE_USER,"user is not in the channel");throw O.error("[".concat(a._clientId,"] can not subscribe ").concat(r.uid,", user is not in the channel")),Ft("error",a,"unsubscribe",{uid:r.uid,mediaType:i},"user is not in the channel"),c.onError(p),p}O.info("[".concat(a._clientId,"] unsubscribe uid: ").concat(r.uid,", mediaType: ").concat(i)),Ft("info",a,"unsubscribe",{uid:r.uid,mediaType:i});try{const p=yield a._p2pChannel.unsubscribe(r,i);p&&(yield a._gateway.unsubscribe(p,r.uid)),O.info("[".concat(a._clientId,"] unsubscribe success uid: ").concat(r.uid,", mediaType: ").concat(i)),Ft("info",a,"unsubscribe",{uid:r.uid,mediaType:i},"success"),c.onSuccess()}catch(p){if(p.code===u.DISCONNECT_P2P)return O.warning("disconnecting p2p, abort unsubscribe request."),void c.onSuccess();throw O.error("[".concat(a._clientId,"] unsubscribe user ").concat(r.uid," error"),p.toString()),Ft("error",a,"unsubscribe",{uid:r.uid,mediaType:i},p.toString()),c.onError(p),p}})()}massUnsubscribe(r){var i=this;return U(function*(){gw(r,"unsubscribeList");const a=Gt.reportApiInvoke(i._sessionId,{name:Xn.UNSUBSCRIBE,options:r.map(p=>{let{user:g,mediaType:m}=p;return{uid:g?.uid,mediaType:m}}),tag:zn.TRACER});if(!i._joinInfo){const p=new h(u.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");throw a.onError(p),p}O.info("[".concat(i._clientId,"] start massUnsubscribe ").concat(r.map(p=>{let{user:g,mediaType:m}=p;return"user: ".concat(g?.uid,", mediaType: ").concat(m,";")}).join())),Ft("info",i,"massUnsubscribe",r),r=[...r];const c=new Map;for(let p=r.length-1;p>=0;p--){const{user:g,mediaType:m}=r[p];if(!g){const _=new h(u.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw O.error("[".concat(i._clientId,"] user property does not exist in unsubscribeList item")),a.onError(_),_}if(va(m,"mediaType",["video","audio",void 0]),!i._users.find(_=>_===g)){O.warning("[".concat(i._clientId,"] can not subscribe ").concat(g.uid,", user is not in the channel")),Ft("error",i,"unsubscribe",{uid:g.uid,mediaType:m},"user is not in the channel"),r.splice(p,1);continue}const A=To.Video|To.LwoVideo;if(c.has(g)){const _=c.get(g);let S;switch(m){case"video":S=_&A;break;case"audio":S=_&To.Audio;break;default:S=_&(To.Audio|A)}if(S){O.warning("repeat massUnsubscribe user:".concat(g.uid,",mediaType:").concat(m," twice.")),r.splice(p,1);continue}m?"audio"===m?c.set(g,_|To.Audio):"video"===m&&c.set(g,_|A):c.set(g,_|To.Audio|A)}else m?"audio"===m?c.set(g,To.Audio):"video"===m&&c.set(g,A):c.set(g,To.Audio|A)}try{const p=yield i._p2pChannel.massUnsubscribe(r);p&&(yield i._gateway.massUnsubscribe(p)),O.info("[".concat(i._clientId,"] massUnsubscribe success ").concat(r.map(g=>{let{user:m,mediaType:A}=g;return"user: ".concat(m?.uid,", mediaType: ").concat(A,";")}).join())),Ft("info",i,"massUnsubscribe",r,"success"),a.onSuccess()}catch(p){if(p.code===u.DISCONNECT_P2P)return O.warning("disconnecting p2p, abort unsubscribe request."),void a.onSuccess();throw O.error("[".concat(i._clientId,"] massUnsubscribe error"),p.toString()),Ft("error",i,"massUnsubscribe",r,p.toString()),a.onError(p),p}})()}setLowStreamParameter(r){!function(c){if(!c)throw new h(u.INVALID_PARAMS);to(c.width)||bm(c.width,"streamParameter.width"),to(c.height)||bm(c.height,"streamParameter.height"),to(c.framerate)||bm(c.framerate,"streamParameter.framerate"),to(c.bitrate)||Lr(c.bitrate,"streamParameter.bitrate")}(r);const i=Gt.reportApiInvoke(this._sessionId,{name:Xn.SET_LOW_STREAM_PARAMETER,options:[r],tag:zn.TRACER});(!r.width&&r.height||r.width&&!r.height)&&(O.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),_e("warning",this,"The width and height parameters take effect only when both are set")),O.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(r)),Ft("info",this,"setLowStreamParameter",r);const a=this._configDistribute.getLowStreamConfigDistribute();a&&a.bitrate&&r.bitrate&&a.bitrate<r.bitrate&&(r.bitrate=a.bitrate),this._lowStreamParameter=r,i.onSuccess()}enableDualStream(){var r=this;return U(function*(){const i=Gt.reportApiInvoke(r._sessionId,{name:Xn.ENABLE_DUAL_STREAM,options:[],tag:zn.TRACER});if(!Uc().supportDualStream){Gt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!0,succ:!1});const a=new h(u.NOT_SUPPORTED,"Your browser is not support dual stream");throw i.onError(a),a}if(r._isDualStreamEnabled){const a=new h(u.INVALID_OPERATION,"Dual stream is already enabled");throw i.onError(a),a}if(r._p2pChannel.canPublishLowStream())try{yield r._publishLowStream()}catch(a){throw Gt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),i.onError(a),a}r._isDualStreamEnabled=!0,Gt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),O.info("[".concat(r._clientId,"] enable dual stream")),Ft("info",r,"enableDualStream"),i.onSuccess()})()}disableDualStream(){var r=this;return U(function*(){if(!r._isDualStreamEnabled)return;if(!r._joinInfo)throw new h(u.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const i=Gt.reportApiInvoke(r._sessionId,{name:Xn.DISABLE_DUAL_STREAM,options:[],tag:zn.TRACER});if(r._p2pChannel.getLocalMedia(Rn.LocalVideoLowTrack))try{const a=yield r._p2pChannel.unpublishLowStream();a&&(yield r._gateway.unpublish(a,r._joinInfo.stringUid||r._joinInfo.uid))}catch(a){throw Gt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),i.onError(a),a}r._isDualStreamEnabled=!1,Gt.streamSwitch(r._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),O.info("[".concat(r._clientId,"] disable dual stream")),Ft("info",r,"disableDualStream"),i.onSuccess()})()}setClientRole(r,i){var a=this;return U(function*(){var p;va(p=r,"role",["audience","host"]),i&&CQ(i);const c=Gt.reportApiInvoke(a._sessionId,{name:Xn.SET_CLIENT_ROLE,options:[r,i],tag:zn.TRACER});if("rtc"===a._mode){O.warning("[".concat(a._clientId,"]rtc mode can not use setClientRole")),Ft("warning",a,"setClientRole",r,"rtc mode can not use setClientRole");const p=new h(u.INVALID_OPERATION,"rtc mode can not use setClientRole");return c.onError(p),p.throw()}if(i&&i.level&&"host"===r){const p=new h(u.INVALID_OPERATION,"host mode can not set audience latency level");return c.onError(p),p.throw()}try{if("audience"===r&&a._p2pChannel.hasLocalMedia()){const p=new h(u.INVALID_OPERATION,"can not set client role to audience when publishing stream");return c.onError(p),p.throw()}yield a._gateway.setClientRole(r,i),O.info("[".concat(a._clientId,"] set client role to ").concat(r,", level: ").concat(i&&i.level)),Ft("info",a,"setClientRole",{role:r,level:i&&i.level}),c.onSuccess()}catch(p){throw c.onError(p),p}})()}setProxyServer(r,i){if(Lc(r,"proxyServer"),!i){if("DISCONNECTED"!==this.connectionState)throw new h(u.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new h(u.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=r,Gt.setProxyServer(this._proxyServer),O.setProxyServer(this._proxyServer),Ze(this._proxyServer),O.info("[".concat(this._clientId,"] Set proxy server ").concat(i?"by initialize call":""," success.")),Ft("info",this,"setProxyServer",[...arguments],"success")}setTurnServer(r,i){if(Array.isArray(r)||(r=[r]),!i){if("DISCONNECTED"!==this.connectionState)throw new h(u.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new h(u.INVALID_OPERATION,"You have already set the proxy")}if(IF(r))return this._turnServer={servers:r,mode:"original-manual"},O.info("[".concat(this._clientId,"] Set original turnserver ").concat(i?"by initialize call":""," success: ").concat(r.map(a=>a.urls).join(","),".")),void Ft("info",this,"setOriginalTurnServer",[...arguments],"success");r.forEach(a=>SQ(a)),this._turnServer={servers:r,mode:"manual"},O.info("[".concat(this._clientId,"] Set turnserver ").concat(i?"by initialize call":""," success.")),Ft("info",this,"setTurnServer",[...arguments],"success")}startProxyServer(r){const i=Gt.reportApiInvoke(this._sessionId,{name:Xn.START_PROXY_SERVER,options:[],tag:zn.TRACER});if("DISCONNECTED"!==this.connectionState){const p=new h(u.INVALID_OPERATION,"Start proxy server before join channel");throw i.onError(p),p}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const p=new h(u.INVALID_OPERATION,"You have already set the proxy");throw i.onError(p),p}const a=[1,2,3,4,5];let c;switch(void 0===r&&(r=1),r){case 1:c="normal";break;case 2:c="443only";break;case 3:c="proxy3";break;case 4:c="proxy4";break;case 5:c="proxy5";break;default:{const p=new h(u.INVALID_PARAMS,"proxy server mode must be ".concat(a.join("|")));throw i.onError(p),p}}this._cloudProxyServerMode=c,this.store.cloudProxyServerMode=c,O.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),Ft("info",this,"startProxyServer",this._cloudProxyServerMode),i.onSuccess()}stopProxyServer(){const r=Gt.reportApiInvoke(this._sessionId,{name:Xn.STOP_PROXY_SERVER,options:[],tag:zn.TRACER});if("DISCONNECTED"!==this.connectionState)throw new h(u.INVALID_OPERATION,"Stop proxy server after leave channel");Gt.setProxyServer(),O.setProxyServer(),Ze(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",O.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),Ft("info",this,"stopProxyServer",this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},r.onSuccess()}setLocalAccessPoints(r,i){if(gw(r,"serverList"),Lc(i,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new h(u.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const a=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;r=r.map(c=>a.test(c)?"".concat(c.replace(/\./g,"-"),".").concat(i):c),this._useLocalAccessPoint=!0,Ln("WEBCS_DOMAIN",r),Ln("WEBCS_DOMAIN_BACKUP_LIST",r),Ln("GATEWAY_DOMAINS",[i]),Ln("EVENT_REPORT_DOMAIN",r[0]),Ln("EVENT_REPORT_BACKUP_DOMAIN",r[1]||r[0]),Ln("LOG_UPLOAD_SERVER","".concat(r[0],":6444")),O.info("set local access point success"),Ft("info",this,"setLocalAccessPoints")}setRemoteDefaultVideoStreamType(r){var i=this;return U(function*(){if(va(r,"streamType",[0,1]),i._remoteDefaultVideoStreamType=r,i._joinInfo)try{yield i._gateway.setDefaultRemoteVideoStreamType(r),i._joinInfo.defaultVideoStream=i._remoteDefaultVideoStreamType}catch(a){throw O.error("[".concat(i._clientId,"] set default remote video stream type error"),a.toString()),a}else O.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(r))})()}setRemoteVideoStreamType(r,i){var a=this;return U(function*(){va(i,"streamType",[0,1]);const c=Gt.reportApiInvoke(a._sessionId,{name:Xn.SET_REMOTE_VIDEO_STREAM_TYPE,options:[r,i],tag:zn.TRACER});try{yield a._gateway.setRemoteVideoStreamType(r,i),setTimeout(()=>{const p=a._users.find(g=>g.uid===r);p&&p.videoTrack&&p.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(p){throw c.onError(p),O.error("[".concat(a._clientId,"] set remote video stream type error"),p.toString()),Ft("error",a,"setRemoteVideoStreamType",void 0,p.toString()),p}O.info("[".concat(a._clientId,"] set remote ").concat(r," video stream type to ").concat(i)),Ft("info",a,"setRemoteVideoStreamType",{uid:r,streamType:i}),a._remoteStreamTypeCacheMap.set(r,i),c.onSuccess()})()}setStreamFallbackOption(r,i){var a=this;return U(function*(){va(i,"fallbackType",[0,1,2]);const c=Gt.reportApiInvoke(a._sessionId,{name:Xn.SET_STREAM_FALLBACK_OPTION,options:["too long to show",i],tag:zn.TRACER});try{yield a._gateway.setStreamFallbackOption(r,i)}catch(p){throw c.onError(p),O.error("[".concat(a._clientId,"] set stream fallback option"),p.toString()),Ft("error",a,"setStreamFallbackOption",void 0,p.toString()),p}O.info("[".concat(a._clientId,"] set remote ").concat(r," stream fallback type to ").concat(i)),Ft("info",a,"setStreamFallbackOption",{uid:r,fallbackType:i}),a._streamFallbackTypeCacheMap.set(r,i),c.onSuccess()})()}setEncryptionConfig(r,i,a){if(va(r,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"]),Lc(i,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(r)){if(!a||!(a instanceof Uint8Array&&32===a.length))throw new h(u.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(a)throw new h(u.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(i)||(O.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),_e("warning",this,"The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      ")),this._encryptionMode=r,this._encryptionSecret=i,a&&(this._encryptionSalt=BD(a))}renewToken(r){var i=this;return U(function*(){Lc(r,"token",1,2047);const a=Gt.reportApiInvoke(i._sessionId,{name:Xn.RENEW_TOKEN,options:[r],tag:zn.TRACER});if(!i._key||!i._joinInfo){const g=new h(u.INVALID_OPERATION,"renewToken should not be called before user join");return a.onError(g),g.throw()}const c=i._key;i._key=r,i._joinInfo&&(i._joinInfo.token=r);const p=yield i._renewTokenMutex.lock();try{if(rt("USE_NEW_TOKEN")){O.debug("start renew token with ticket from unilbs"),Ft("debug",i,"renewToken","unilbs");const g=yield function jH(r,i,a){return f8.apply(this,arguments)}(i._joinInfo,i._axiosCancelSource.token,i._config.httpRetryConfig||v);O.debug("[".concat(i._clientId,"] get ticket from unilbs success")),Ft("debug",i,"renewToken","unilbs","success"),yield i._gateway.renewToken({token:r,ticket:g})}else O.debug("start renew token without ticket"),Ft("debug",i,"renewToken"),yield i._gateway.renewToken({token:r});O.debug("[".concat(i._clientId,"] renewToken success")),Ft("debug",i,"renewToken",void 0,"success"),a.onSuccess()}catch(g){throw i._key=c,i._joinInfo.token=c,a.onError(g),O.error("[".concat(i._clientId,"] renewToken failed"),g.toString()),Ft("error",i,"renewToken",void 0,g.toString()),g}finally{p()}})()}enableAudioVolumeIndicator(){const r=Gt.reportApiInvoke(this._sessionId,{name:Xn.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:zn.TRACER});if(this._audioVolumeIndicationInterval)return O.warning("you have already enabled audio volume indicator!"),Ft("warning",this,"enableAudioVolumeIndicator","you have already enabled audio volume indicator!"),r.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const i=this._p2pChannel.getAudioLevels();this.emit(ar.VOLUME_INDICATOR,i)},rt("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),r.onSuccess()}getRTCStats(){const r=this._statsCollector.getRTCStats(),i=this._gateway.getInChannelInfo();return r.Duration=Math.round(i.duration/1e3),r}startLiveStreaming(r,i){const a=Gt.reportApiInvoke(this._sessionId,{name:Xn.START_LIVE_STREAMING,options:[r,i],tag:zn.TRACER});if(!i){if("h264"!==this._codec){const p=new h(u.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return a.onError(p),Un.reject(p)}if(!this._p2pChannel.hasLocalMedia()){const p=new h(u.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return a.onError(p),Un.reject(p)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(r)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(r)){const p=new h(u.LIVE_STREAMING_TASK_CONFLICT);return a.onError(p),Un.reject(p)}const c=i?Xo.TRANSCODE:Xo.RAW;return this._createLiveStreamingClient(c).startLiveStreamingTask(r,c).then(()=>a.onSuccess()).catch(p=>{throw a.onError(p),p})}setLiveTranscoding(r){const i=Gt.reportApiInvoke(this._sessionId,{name:Xn.SET_LIVE_TRANSCODING,options:[r],tag:zn.TRACER});return this._createLiveStreamingClient(Xo.TRANSCODE).setTranscodingConfig(r).then(()=>i.onSuccess()).catch(a=>{throw i.onError(a),a})}stopLiveStreaming(r){const i=Gt.reportApiInvoke(this._sessionId,{name:Xn.STOP_LIVE_STREAMING,options:[r],tag:zn.TRACER}),a=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(c=>c&&c.hasUrl(r));if(!a.length){const c=new h(u.INVALID_PARAMS,"can not find live streaming url to stop");return i.onError(c),Un.reject(c)}return Un.all(a.map(c=>c&&c.stopLiveStreamingTask(r))).then(()=>i.onSuccess()).catch(c=>{throw i.onError(c),c})}addInjectStreamUrl(r,i){var a=this;return U(function*(){const c=Gt.reportApiInvoke(a._sessionId,{name:Xn.ADD_INJECT_STREAM_URL,options:[r,i],tag:zn.TRACER});try{if(!a._joinInfo)throw new h(u.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const p=a._createLiveStreamingClient(Xo.INJECT);p.setInjectStreamConfig(i,0),yield p.startLiveStreamingTask(r,Xo.INJECT)}catch(p){throw c.onError(p),p}c.onSuccess()})()}removeInjectStreamUrl(){var r=this;return U(function*(){const i=Gt.reportApiInvoke(r._sessionId,{name:Xn.REMOVE_INJECT_STREAM_URL,options:[],tag:zn.TRACER});try{var a;const c=r._createLiveStreamingClient(Xo.INJECT),p=Array.from(O_(a=c.streamingTasks).call(a)).find(g=>g.mode===Xo.INJECT);if(!r._joinInfo||!p)throw new h(u.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");yield c.stopLiveStreamingTask(p.url)}catch(c){throw i.onError(c),c}i.onSuccess()})()}startChannelMediaRelay(r){var i=this;return U(function*(){const a=Gt.reportApiInvoke(i._sessionId,{name:Xn.START_CHANNEL_MEDIA_RELAY,options:[r],tag:zn.TRACER});try{v8(r),yield i._createChannelMediaRelayClient().startChannelMediaRelay(r)}catch(c){return a.onError(c),c.throw()}a.onSuccess()})()}updateChannelMediaRelay(r){var i=this;return U(function*(){const a=Gt.reportApiInvoke(i._sessionId,{name:Xn.UPDATE_CHANNEL_MEDIA_RELAY,options:[r],tag:zn.TRACER});try{v8(r),yield i._createChannelMediaRelayClient().updateChannelMediaRelay(r)}catch(c){return a.onError(c),c.throw()}a.onSuccess()})()}stopChannelMediaRelay(){var r=this;return U(function*(){const i=Gt.reportApiInvoke(r._sessionId,{name:Xn.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:zn.TRACER});try{yield r._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(a){return i.onError(a),a.throw()}i.onSuccess()})()}sendStreamMessage(r){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new h(u.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof r&&(r=(new TextEncoder).encode(r)),new Blob([r]).size>1024)throw new h(u.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Zr.DATA_STREAM,{payload:BD(r)},!i)}sendMetadata(r){if(!this._joinInfo)throw new h(u.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([r]).size>1024)throw new h(u.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Zr.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:BD(r)})}sendCustomReportMessage(r){var i=this;return U(function*(){Array.isArray(r)||(r=[r]),r.forEach(T4);const a=Gt.reportApiInvoke(i._sessionId,{name:Xn.SEND_CUSTOM_REPORT_MESSAGE,options:[JSON.stringify(r)],tag:zn.TRACER});if(!i._joinInfo){const c=new h(u.INVALID_OPERATION,"can not send custom report, not joined");return a.onError(c),c.throw()}yield Gt.sendCustomReportMessage(i._joinInfo.sid,r),a.onSuccess()})()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}pickSVCLayer(r,i){var a=this;return U(function*(){va(i.spatialLayer,"spatialLayer",[0,1,2,3]),va(i.temporalLayer,"temporalLayer",[0,1,2,3]);try{yield a._gateway.pickSVCLayer(r,i)}catch(c){throw O.error("[".concat(a._clientId,"] pick SVC layer failed"),c.toString()),Ne("error",a,"pickSVCLayer",i,c.toString()),c}})()}_reset(){if(O.debug("[".concat(this._clientId,"] reset client")),Ne("debug",this,"_reset"),this._axiosCancelSource.cancel(),this._axiosCancelSource=lu.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(r=>{r._audioTrack&&r._audioTrack._destroy(),r._videoTrack&&r._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new fu("client-publish"),this._subscribeMutex=new fu("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}}_startSession(r,i){const a=r||M9();O.debug(r?"[".concat(this._clientId,"] new Session ").concat(a):"[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(a)),Ne("debug",this,"_startSession",{newSid:a,sid:this._sessionId}),this._sessionId=a,this.store.sessionId=a,i?Gt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:i.channel,appid:i.appId,mode:this._mode}):this._joinInfo?Gt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Gt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=a),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=a)}_publishHighStream(r){var i=this;return U(function*(){if(!i._joinInfo||void 0===i._uid)throw new h(u.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==i.connectionState&&"RECONNECTING"!==i.connectionState)throw new h(u.INVALID_OPERATION,"can not publish stream in ".concat(i.connectionState," state"));if("auto"===i._turnServer.mode&&rt("FORCE_TURN")&&!rt("TURN_ENABLE_TCP")&&!rt("TURN_ENABLE_UDP"))throw new h(u.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");O.debug("[".concat(i._clientId,"] publish high stream")),Ne("debug",i,"_publishHighStream");try{const c=yield i._p2pChannel.publish(r,i._isDualStreamEnabled,i._lowStreamParameter),p=(yield c.next()).value;if(p){var a;let g;try{g=yield i._gateway.publish(i._uid,p,!0)}catch(m){if(m.code!==u.DISCONNECT_P2P)throw c.throw(m),m}yield c.next((null===(a=g)||void 0===a?void 0:a.ortc)||[])}i._p2pChannel.reportPublishEvent(!0,null);for(const g of r)g instanceof Ns&&g._encoderConfig&&i._gateway.setVideoProfile(g._encoderConfig),!g.muted&&g.enabled||(yield i._p2pChannel.muteLocalTrack(g))}catch(c){if(i._p2pChannel.reportPublishEvent(!1,c?.code,r),c?.code===u.WS_ABORT)return;throw c}})()}_publishLowStream(){var r=this;return U(function*(){if(!r._joinInfo||void 0===r._uid)throw new h(u.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==r.connectionState&&"RECONNECTING"!==r.connectionState)throw new h(u.INVALID_OPERATION,"can not publish stream in ".concat(r.connectionState," state"));O.debug("[".concat(r._clientId,"] publish low stream")),Ne("debug",r,"_publishLowStream");const i=r._configDistribute.getLowStreamConfigDistribute();i&&i.bitrate&&(r._lowStreamParameter||(r._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),r._lowStreamParameter&&r._lowStreamParameter.bitrate&&i.bitrate<r._lowStreamParameter.bitrate&&(r._lowStreamParameter.bitrate=i.bitrate));try{const c=yield r._p2pChannel.publishLowStream(r._lowStreamParameter),p=(yield c.next()).value;if(p){var a;let g;try{g=yield r._gateway.publish(r._uid,p,!0)}catch(m){if(m.code!==u.DISCONNECT_P2P)throw c.throw(m),m}c.next((null===(a=g)||void 0===a?void 0:a.ortc)||[]),r._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(c){if(r._p2pChannel.reportPublishEvent(!1,c?.code,void 0,!0),c?.code===u.WS_ABORT)return;throw c}})()}_createLiveStreamingClient(r){if(!this._joinInfo||!this._appId)return new h(u.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const i=()=>new KH(this._joinInfo,this._config.websocketRetryConfig||v,this._config.httpRetryConfig||v),a=c=>{c.onLiveStreamError=(p,g)=>{Gt.reportApiInvoke(this._sessionId,{name:Xn.ON_LIVE_STREAM_ERROR,options:[p,g],tag:zn.TRACER}).onSuccess(),this.emit(ar.LIVE_STREAMING_ERROR,p,g)},c.onLiveStreamWarning=(p,g)=>{Gt.reportApiInvoke(this._sessionId,{name:Xn.ON_LIVE_STREAM_WARNING,options:[p,g],tag:zn.TRACER}).onSuccess(),this.emit(ar.LIVE_STREAMING_WARNING,p,g)},c.on(Cm.REQUEST_WORKER_MANAGER_LIST,(p,g,m)=>{if(!this._joinInfo)return m(new h(u.INVALID_OPERATION,"can not find join info to get worker manager"));UH(p,this._joinInfo,this._axiosCancelSource.token,v).then(g).catch(m)})};switch(r){case Xo.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=i(),a(this._liveRawStreamingClient)),this._liveRawStreamingClient;case Xo.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=i(),a(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case Xo.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=i(),this._injectStreamingClient.on(Cm.REQUEST_WORKER_MANAGER_LIST,(c,p,g)=>{if(!this._joinInfo)return g(new h(u.INVALID_OPERATION,"can not find join info to get worker manager"));UH(c,this._joinInfo,this._axiosCancelSource.token,v).then(p).catch(g)}),this._injectStreamingClient.onInjectStatusChange=(c,p,g)=>{this.emit(ar.INJECT_STREAM_STATUS,c,p,g)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new Ox(this._joinInfo,this._clientId,this._config.websocketRetryConfig||v,this._config.httpRetryConfig||v),this._channelMediaRelayClient.on("state",r=>{r===Va.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(ar.CHANNEL_MEDIA_RELAY_STATE,r)}),this._channelMediaRelayClient.on("event",r=>{this.emit(ar.CHANNEL_MEDIA_RELAY_EVENT,r)})),this._channelMediaRelayClient):new h(u.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){var r=this;this._gateway.on(_s.DISCONNECT_P2P,U(function*(){yield r._p2pChannel.disconnectForReconnect()})),this._gateway.on(_s.CONNECTION_STATE_CHANGE,(i,a,c)=>{var p;if(c===Gs.FALLBACK)return;const g=()=>{this.emit(ar.CONNECTION_STATE_CHANGE,i,a,c)};if(Gt.reportApiInvoke(this._sessionId||(null===(p=this._gateway.joinInfo)||void 0===p?void 0:p.sid)||null,{name:Xn.CONNECTION_STATE_CHANGE,options:[i,a,c],tag:zn.TRACER}).onSuccess(JSON.stringify({cur:i,prev:a,reason:c})),O.info("[".concat(this._clientId,"] connection state change: ").concat(a," -> ").concat(i)),He("info",this,"connection-state-change","".concat(a," -> ").concat(i)),"DISCONNECTED"===i)return this._reset(),void g();if("RECONNECTING"===i)this._users.forEach(A=>{A._trust_in_room_=!1,A._trust_audio_enabled_state_=!1,A._trust_video_enabled_state_=!1,A._trust_audio_mute_state_=!1,A._trust_video_mute_state_=!1,A._trust_audio_stream_added_state_=!1,A._trust_video_stream_added_state_=!1,A._audioSSRC=void 0,A._videoSSRC=void 0,A._videoOrtc=void 0,A._audioOrtc=void 0,A._cname=void 0,A._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===i){var m;this._streamFallbackTypeCacheMap.forEach((A,_)=>{this._gateway.setStreamFallbackOption(_,A).catch(S=>{O.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),S),_e("warning",this,"auto set stream fallback option failed, ".concat(S.toString()))})}),this._remoteStreamTypeCacheMap.forEach((A,_)=>{this._gateway.setRemoteVideoStreamType(_,A).catch(S=>{O.warning("[".concat(this._clientId,"] auto set remote stream type failed"),S),_e("warning",this,"auto set remote stream type failed, ".concat(S.toString()))})}),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(m=this._joinInfo)||void 0===m?void 0:m.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{O.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(A=>{O.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(A))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter(A=>!A._trust_in_room_).forEach(A=>{O.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(A.uid)),_e("debug",this,"user offline timeout, emit user offline ".concat(A.uid)),this._handleUserOffline({uid:A.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach(A=>{A._trust_audio_mute_state_||(O.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(A.uid)),_e("debug",this,"auto dispatch audio unmute event ".concat(A.uid)),this._handleMuteStream(A.uid,"audio",!1)),A._trust_video_mute_state_||(O.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(A.uid)),_e("debug",this,"auto dispatch video unmute event ".concat(A.uid)),this._handleMuteStream(A.uid,"video",!1)),A._trust_audio_enabled_state_||(O.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(A.uid)),_e("debug",this,"auto dispatch enable local audio ".concat(A.uid)),this._handleSetStreamLocalEnable("audio",A.uid,!0)),A._trust_video_enabled_state_||(O.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(A.uid)),_e("debug",this,"auto dispatch enable local video ".concat(A.uid)),this._handleSetStreamLocalEnable("video",A.uid,!0)),A._trust_video_stream_added_state_||(O.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(A.uid)),this._handleResetAddStream(A,"video")),A._trust_audio_stream_added_state_||(O.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(A.uid)),this._handleResetAddStream(A,"audio")),A._video_added_||A._audio_added_||(O.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(A.uid)),_e("debug",this,"auto dispatch stream remove ".concat(A.uid)),this._handleRemoveStream({uid:A.uid,uint_id:A._uintid}))}))},1e3)}g()}),this._gateway.on(_s.REQUEST_NEW_GATEWAY_LIST,(i,a)=>{if(!this._joinInfo)return a(new h(u.UNEXPECTED_ERROR,"can not recover, no join info"));rk(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||v,this.store).then(c=>{this._joinInfo&&(this._joinInfo.apResponse=c.gatewayInfo.res,this._joinInfo.gatewayAddrs=c.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=c.gatewayInfo.uni_lbs_ip),i(c.gatewayInfo.gatewayAddrs.map(p=>{if(this._joinInfo&&this._joinInfo.proxyServer){const g=p.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(g[0],"&p=").concat(g[1])}return"wss://".concat(p.address)}))}).catch(a)}),this._gateway.on(_s.NETWORK_QUALITY,i=>{"normal"===this._networkQualitySensitivity&&this.emit(ar.NETWORK_QUALITY,i)}),this._gateway.on(_s.STREAM_TYPE_CHANGE,(i,a)=>{this.emit(ar.STREAM_TYPE_CHANGED,i,a),Gt.reportApiInvoke(this._sessionId,{name:Xn.STREAM_TYPE_CHANGE,options:[i,a],tag:zn.TRACER}).onSuccess(JSON.stringify({uid:i,streamType:a}))}),this._gateway.on(_s.IS_P2P_DISCONNECTED,i=>{this._p2pChannel.isP2PDisconnected()?i(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?i(!1):i(!0)}),this._gateway.on(_s.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(_s.REQUEST_P2P_CONNECTION_PARAMS,function(){var i=U(function*(a,c,p){try{c(yield r._p2pChannel.startP2PConnection(a))}catch(g){p(g)}});return function(a,c,p){return i.apply(this,arguments)}}()),this._gateway.on(_s.JOIN_RESPONSE,(i,a,c)=>{const{dtlsParameters:p,iceParameters:g,candidates:m,rtpCapabilities:A,setup:_,cname:S}=Qx(i.ortc,a,c);this._p2pChannel.connect(g,p,m,A,_,S)}),this._gateway.signal.on(Di.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Di.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Di.ON_ADD_AUDIO_STREAM,i=>this._handleAddAudioOrVideoStream("audio",i.uid,i.ssrcId,i.cname,i.uint_id,i.ortc)),this._gateway.signal.on(Di.ON_ADD_VIDEO_STREAM,i=>this._handleAddAudioOrVideoStream("video",i.uid,i.ssrcId,i.cname,i.uint_id,i.ortc,i.rtxSsrcId)),this._gateway.signal.on(Di.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Di.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Di.MUTE_AUDIO,i=>(He("debug",["AgoraRTCGateway",this._clientId],"mute_audio",{uid:i.uid}),this._handleMuteStream(i.uid,"audio",!0))),this._gateway.signal.on(Di.UNMUTE_AUDIO,i=>(He("debug",["AgoraRTCGateway",this._clientId],"unmute_audio",{uid:i.uid}),this._handleMuteStream(i.uid,"audio",!1))),this._gateway.signal.on(Di.MUTE_VIDEO,i=>(He("debug",["AgoraRTCGateway",this._clientId],"mute_video",{uid:i.uid}),this._handleMuteStream(i.uid,"video",!0))),this._gateway.signal.on(Di.UNMUTE_VIDEO,i=>(He("debug",["AgoraRTCGateway",this._clientId],"unmute_video",{uid:i.uid}),this._handleMuteStream(i.uid,"video",!1))),this._gateway.signal.on(Di.RECEIVE_METADATA,i=>{const a=nx(i.metadata);this.emit(ar.RECEIVE_METADATA,i.uid,a)}),this._gateway.signal.on(Di.ON_DATA_STREAM,i=>{i.seq&&delete i.seq,i.payload=nx(i.payload),this.emit(ar.STREAM_MESSAGE,i.uid,i.payload),this.onStreamMessage&&this.onStreamMessage(i)}),this._gateway.signal.on(Di.ON_CRYPT_ERROR,()=>{LD(()=>{O.warning("[".concat(this._clientId,"] on crypt error")),He("warning",this,"crypt_error"),this.emit(ar.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Di.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Di.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{O.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),He("warning",this,"token_privilege_did_expire"),this._gateway.leave(!0),this.emit(ar.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Di.ON_STREAM_FALLBACK_UPDATE,i=>{O.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(i.stream_id,", attr: ").concat(i.stream_type)),He("debug",this,"stream_fallback_update",{peerId:i.stream_id,attr:i.stream_type}),this.emit(ar.STREAM_FALLBACK,i.stream_id,1===i.stream_type?"fallback":"recover")}),this._gateway.signal.on(Di.ON_PUBLISH_STREAM,i=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:i.proxy})),O.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(i))),He("info",this,"publish_stream",i))}),this._gateway.signal.on(Di.ENABLE_LOCAL_VIDEO,i=>{this._handleSetStreamLocalEnable("video",i.uid,!0)}),this._gateway.signal.on(Di.DISABLE_LOCAL_VIDEO,i=>{this._handleSetStreamLocalEnable("video",i.uid,!1)}),this._gateway.signal.on(Gr.REQUEST_TIMEOUT,(i,a)=>{if(this._joinInfo)switch(i){case Zr.PUBLISH:{if(!a)return;const A=a.ortc;if(A){var c,p,g,m;const _=A.some(T=>{let{stream_type:D}=T;return D===Zo.Audio}),S=A.some(T=>{let{stream_type:D}=T;return D!==Zo.Audio}),C=A.some(T=>{let{stream_type:D}=T;return D===Zo.Screen||D===Zo.ScreenLow});"offer"===a.state&&Gt.publish(this._joinInfo.sid,{eventElapse:Cl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:u.TIMEOUT,audio:_,video:S,p2pid:a.p2p_id,publishRequestid:this.store.pubId,screenshare:C,audioName:_?null===(c=A.find(T=>{let{stream_type:D}=T;return D===Zo.Audio}))||void 0===c||null===(p=c.ssrcs[0])||void 0===p?void 0:p.ssrcId.toString():void 0,videoName:S?null===(g=A.find(T=>{let{stream_type:D}=T;return D!==Zo.Audio}))||void 0===g||null===(m=g.ssrcs[0])||void 0===m?void 0:m.ssrcId.toString():void 0})}break}case Zr.SUBSCRIBE:a&&Gt.subscribe(this._joinInfo.sid,{succ:!1,ec:u.TIMEOUT,audio:a.stream_type===Wr.AUDIO,video:a.stream_type===Wr.VIDEO,peerid:a.stream_id,subscribeRequestid:a.ssrcId,p2pid:this.store.p2pId,eventElapse:Cl.measureFromSubscribeStart(this.store.clientId,a.ssrcId)})}}),this._gateway.signal.on(Di.ON_P2P_OK,i=>{}),this._gateway.signal.on(Di.ON_PUBLISHED_USER_LIST,i=>{if(null==i||!i.users)return;const a=[],c=[];for(const p of i.users){let g=this._users.find(C=>C.uid===p.stream_id);g?g._trust_in_room_=!0:(g=new Mx(p.stream_id,p.stream_id),this._users.push(g),0===this.getListeners(ar.PUBLISHED_USER_LIST).length&&(O.debug("[".concat(this._clientId,"] user online"),p.stream_id),ct("info",this,"user-joined",{uid:p.stream_id}),this.emit(ar.USER_JOINED,g)));const m=To.Audio&p.stream_type,A=(To.Video|To.LwoVideo)&p.stream_type,_=m&&g.hasAudio,S=A&&g.hasVideo;A&&(g._trust_video_stream_added_state_=!0,g._video_added_=!0,g._videoSSRC=p.video_ssrc),m&&(g._trust_audio_stream_added_state_=!0,g._audio_added_=!0,g._audioSSRC=p.audio_ssrc),m&&!_&&0===this.getListeners(ar.PUBLISHED_USER_LIST).length&&(O.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published audio")),_e("info",this,"remote user ".concat(g.uid," published audio")),this.emit(ar.USER_PUBLISHED,g,"audio")),A&&!S&&0===this.getListeners(ar.PUBLISHED_USER_LIST).length&&(O.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published video")),_e("info",this,"remote user ".concat(g.uid," published video")),this.emit(ar.USER_PUBLISHED,g,"video")),(m&&!_||A&&!S)&&a.push(g),A&&this._p2pChannel.hasPendingRemoteMedia(g,"video")&&c.push({user:g,mediaType:"video"}),m&&this._p2pChannel.hasPendingRemoteMedia(g,"audio")&&c.push({user:g,mediaType:"audio"})}c.length>0&&(O.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(c.map(p=>"user: ".concat(p.user.uid,", mediaType: ").concat(p.mediaType)).join("; ")," ")),this.massSubscribe(c).catch(p=>{O.error("[".concat(this._clientId,"] mass resubscribe error"),p.toString())})),this.getListeners(ar.PUBLISHED_USER_LIST).length>0?(O.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(a.map(p=>p.uid).join(", "))),this.emit(ar.PUBLISHED_USER_LIST,a)):O.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(a.map(p=>p.uid).join(", ")))})}_handleP2PChannelEvents(){var r=this;this._p2pChannel.on(di.RequestMuteLocal,function(){var i=U(function*(a,c,p){if(r._joinInfo)try{yield r._gateway.muteLocal(a,r._joinInfo.stringUid||r._joinInfo.uid),c()}catch(g){g.code===u.DISCONNECT_P2P?c():p(g)}else c()});return function(a,c,p){return i.apply(this,arguments)}}()),this._p2pChannel.on(di.RequestUnmuteLocal,function(){var i=U(function*(a,c,p){if(r._joinInfo)try{yield r._gateway.unmuteLocal(a,r._joinInfo.stringUid||r._joinInfo.uid),c()}catch(g){g.code===u.DISCONNECT_P2P?c():p(g)}else c()});return function(a,c,p){return i.apply(this,arguments)}}()),this._p2pChannel.on(di.RequestRePublish,(i,a,c)=>{this.publish(i,!1).then(a).catch(c)}),this._p2pChannel.on(di.RequestReSubscribe,function(){var i=U(function*(a,c,p){try{for(const{user:g,kind:m}of a)m===Wr.VIDEO?yield r.subscribe(g,"video"):yield r.subscribe(g,"audio");c()}catch(g){p(g)}});return function(a,c,p){return i.apply(this,arguments)}}()),this._p2pChannel.on(di.RequestUploadStats,(i,a)=>{this._gateway.uploadStats(i,a)}),this._p2pChannel.on(di.MediaReconnectStart,i=>{this.emit(ar.MEDIA_RECONNECT_START,i)}),this._p2pChannel.on(di.MediaReconnectEnd,i=>{this.emit(ar.MEDIA_RECONNECT_END,i)}),this._p2pChannel.on(di.NeedSignalRTT,i=>{i(this._gateway.getSignalRTT())}),this._p2pChannel.on(di.RequestRestartICE,U(function*(){const i=yield r._p2pChannel.reEstablish();if(i){const{restartICEResponse:a,gatewayIP:c,gatewayPort:p}=yield r._gateway.restartICE({iceParameters:i.iceParameters}),{candidates:g,iceParameters:m}=function(A,_,S){const C=A.iceParameters;let T;return void 0!==_&&void 0!==S?(T=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:_,port:S.toString(),type:"host",extension:{}}],O.debug("Using remote candidate from AP ".concat(_,":").concat(S)),_e("debug",[],"Using remote candidate from AP ".concat(_,":").concat(S))):T=C.candidates.map(D=>({foundation:D.foundation,componentId:"1",transport:D.protocol,priority:D.priority.toString(),connectionAddress:D.ip,port:D.port.toString(),type:D.type,extension:{}})),{candidates:T,iceParameters:{iceUfrag:C.iceUfrag,icePwd:C.icePwd}}}(a,c,p);yield i.restartICE(m,g)}})),this._p2pChannel.on(di.RequestReconnect,U(function*(){r._gateway.reconnect()})),this._p2pChannel.on(di.RequestReconnectPC,U(function*(){var i;const{iceParameters:a,dtlsParameters:c,rtpCapabilities:p}=yield r._p2pChannel.startP2PConnection({turnServer:null===(i=r._joinInfo)||void 0===i?void 0:i.turnServer}),{gatewayEstablishParams:g,gatewayIP:m,gatewayPort:A}=yield r._gateway.reconnectPC({iceParameters:a,dtlsParameters:c,rtpCapabilities:p}),{dtlsParameters:_,iceParameters:S,candidates:C,rtpCapabilities:T,setup:D,cname:B}=Qx(g,m,A);yield r._p2pChannel.connect(S,_,C,T,D,B),yield r._p2pChannel.republish(),yield r._p2pChannel.reSubscribe()})),this._p2pChannel.on(di.RequestUnpublishForReconnectPC,function(){var i=U(function*(a,c,p){r._joinInfo&&void 0!==r._uid?(yield r._gateway.unpublish(a,r._uid),c()):p()});return function(a,c,p){return i.apply(this,arguments)}}()),this._p2pChannel.on(di.P2PLost,()=>{this.emit(ar.P2P_LOST,this.store.uid)}),this._p2pChannel.on(di.UpdateVideoEncoder,i=>{i._encoderConfig&&this._gateway.setVideoProfile(i._encoderConfig)}),this._p2pChannel.on(di.ConnectionTypeChange,i=>{this.emit(ar.IS_USING_CLOUD_PROXY,i)}),this._p2pChannel.on(di.RequestLowStreamParameter,i=>{i(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})}getKeyMetrics(){return this.store.keyMetrics}enableContentInspect(r){var i=this;return U(function*(){if("CONNECTED"!==i.connectionState||!i._joinInfo)throw new h(u.INVALID_OPERATION,"[".concat(i._clientId,"] Client did not join channel"));if(i._inspect)throw new h(u.INVALID_OPERATION,"[".concat(i._clientId,"] Inspect content service already in connecting/connected state"));if(!r)throw new h(u.INVALID_PARAMS,"[".concat(i._clientId,"] inspectConfig is necessary"));if(r&&r.extraInfo&&r.extraInfo.length>1024)throw new h(u.INVALID_PARAMS,"[".concat(i._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const a=new nL(r);i._inspect=a,i.handleVideoInspectEvents(i._inspect),yield a.init({appId:i._joinInfo.appId,areaCode:"",cname:i._joinInfo.cname,sid:i._joinInfo.sid,token:i._joinInfo.token,uid:i._joinInfo.uid,cid:i._joinInfo.cid,vid:i._joinInfo.vid?Number(i._joinInfo.vid):0},v)}catch(a){throw Array.isArray(a)?a[0]:a}})()}disableContentInspect(){var r=this;return U(function*(){if(!r._inspect)throw new h(u.INVALID_OPERATION,"[".concat(r._clientId,"] inspectVideoContent not started"));try{r._inspect.close(),r._inspect=void 0}catch(i){throw Array.isArray(i)?i[0]:i}})()}handleVideoInspectEvents(r){r.on(Wo.CONNECTION_STATE_CHANGE,(i,a)=>{if(this.emit(ar.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,i,a),a===Fu.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.emit(ar.CONTENT_INSPECT_ERROR,new h(u.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));r.inspectImage()}}),r.on(Wo.INSPECT_RESULT,(i,a)=>{var c;if(a?.code===u.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return O.debug("Stop inspect content because that has left channel"),null==this||null===(c=this._inspect)||void 0===c||c.close(),void(this._inspect=void 0);this.emit(ar.CONTENT_INSPECT_RESULT,i,a)}),r.on(Wo.CLIENT_LOCAL_VIDEO_TRACK,i=>{i(this.localTracks.filter(a=>"video"===a.trackMediaType)[0])})}getJoinChannelServiceRecords(){return O.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}_handleResetAddStream(r,i){switch(i){case"audio":r._audio_added_=!1,r._trust_audio_stream_added_state_=!0;break;case"video":r._video_added_=!1,r._trust_video_stream_added_state_=!0}}}).prototype,"setProxyServer",[q6],Object.getOwnPropertyDescriptor(zo.prototype,"setProxyServer"),zo.prototype),Kn(zo.prototype,"setTurnServer",[_V],Object.getOwnPropertyDescriptor(zo.prototype,"setTurnServer"),zo.prototype),Kn(zo.prototype,"setLocalAccessPoints",[Tk],Object.getOwnPropertyDescriptor(zo.prototype,"setLocalAccessPoints"),zo.prototype),Kn(zo.prototype,"setRemoteDefaultVideoStreamType",[J6],Object.getOwnPropertyDescriptor(zo.prototype,"setRemoteDefaultVideoStreamType"),zo.prototype),Kn(zo.prototype,"setEncryptionConfig",[$6],Object.getOwnPropertyDescriptor(zo.prototype,"setEncryptionConfig"),zo.prototype),Kn(zo.prototype,"pickSVCLayer",[rL],Object.getOwnPropertyDescriptor(zo.prototype,"pickSVCLayer"),zo.prototype),Kn(zo.prototype,"enableContentInspect",[X6],Object.getOwnPropertyDescriptor(zo.prototype,"enableContentInspect"),zo.prototype),Kn(zo.prototype,"disableContentInspect",[vV],Object.getOwnPropertyDescriptor(zo.prototype,"disableContentInspect"),zo.prototype),Kn(zo.prototype,"getJoinChannelServiceRecords",[Z6],Object.getOwnPropertyDescriptor(zo.prototype,"getJoinChannelServiceRecords"),zo.prototype),eQ=zo))||eQ);class nQ extends WN{set currentState(i){i!==this._currentState&&(this._currentState=i,this.emit(Bc.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),q(this,"audioBuffer",void 0),q(this,"sourceNode",void 0),q(this,"startPlayTime",0),q(this,"startPlayOffset",0),q(this,"pausePlayTime",0),q(this,"options",void 0),q(this,"currentLoopCount",0),q(this,"_currentState","stopped"),this.audioBuffer=i,this.options=a,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(i){"stopped"===this.currentState?(this.options=i,this.startPlayOffset=this.options.startPlayTime||0):O.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(i){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=i,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=i))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const i=this.context.createBufferSource();return i.buffer=this.audioBuffer,i.loop=!!this.options.loop,i.connect(this.outputNode),i}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const rQ=new Map;function AV(){return AV=U(function*(r,i){let a=null;if("string"==typeof r){const p=rQ.get(r);if(p)return O.debug("use cached audio resource: ",r),p;try{a=(yield I(()=>lu.get(r,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(g){throw new h(u.FETCH_AUDIO_FILE_FAILED,g.toString())}}else a=yield new Un((g,m)=>{const A=new FileReader;A.onload=_=>{_.target?g(_.target.result):m(new h(u.READ_LOCAL_AUDIO_FILE_ERROR))},A.onerror=()=>{m(new h(u.READ_LOCAL_AUDIO_FILE_ERROR))},A.readAsArrayBuffer(r)});const c=yield function(p){const g=kD();return new Un((m,A)=>{g.decodeAudioData(p,_=>{m(_)},_=>{A(new h(u.DECODE_AUDIO_FILE_FAILED,_.toString()))})})}(a);return"string"==typeof r&&i&&rQ.set(r,c),c}),AV.apply(this,arguments)}function oQ(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);i&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),a.push.apply(a,c)}return a}function oL(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?oQ(Object(a),!0).forEach(function(c){q(r,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):oQ(Object(a)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(a,c))})}return r}function yV(r,i,a,c){a.optimizationMode&&(c&&c.width&&c.height?(a.encoderConfig=oL(oL({},c),{},{bitrateMin:c.bitrateMin,bitrateMax:c.bitrateMax}),"motion"!==a.optimizationMode&&"detail"!==a.optimizationMode||(i.contentHint=a.optimizationMode,i.contentHint===a.optimizationMode?(O.debug("[".concat(r,"] set content hint to"),a.optimizationMode),Ft("debug",["AgoraRTC"],"videoTrackOptimizationModeProcess",[r,a,c])):(O.debug("[".concat(r,"] set content hint failed")),Ft("warning",["AgoraRTC"],"videoTrackOptimizationModeProcess",[r,a,c],"failed")))):(O.warning("[".concat(r,"] can not apply optimization mode bitrate config, no encoderConfig")),_e("warning",["AgoraRTC"],"[".concat(r,"] can not apply optimization mode bitrate config, no encoderConfig"))))}const _W=Oi().name;function vW(r,i,a,c){let p,g=0,m=null;return new Un((A,_)=>{setTimeout(()=>{p&&(p(),A(g))},i),p=Kj(()=>{!function(){g>c&&p&&(p(),A(g));const S=a.getContext("2d");if(!S){const D=new h(u.UNEXPECTED_ERROR,"can not get canvas 2d context.");return O.error(D.toString()),void _(D)}S.drawImage(r,0,0,160,120);const C=S.getImageData(0,0,a.width,a.height),T=Math.floor(C.data.length/3);if(m){for(let D=0;D<T;D+=3)if(C.data[D]!==m[D])return g+=1,void(m=C.data);m=C.data}else m=C.data}()},30)})}class iT{constructor(i,a){q(this,"id",0),q(this,"element",void 0),q(this,"peerPair",void 0),q(this,"context",void 0),q(this,"audioPlayerElement",void 0),q(this,"audioTrack",void 0),iT.count+=1,this.id=iT.count,this.element=i,this.context=a}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=i=>{const a=document.createElement("audio");a.srcObject=new MediaStream([i.track]),a.play(),this.audioPlayerElement=a}}switchSdp(){var i=this;return U(function*(){if(!i.peerPair)return;const a=function(){var p=U(function*(g,m){const A="offer"===m?yield g.createOffer():yield g.createAnswer();return yield g.setLocalDescription(A),"complete"===g.iceGatheringState?g.localDescription:new Un(_=>{g.onicegatheringstatechange=()=>{"complete"===g.iceGatheringState&&_(g.localDescription)}})});return function(m,A){return p.apply(this,arguments)}}(),c=function(){var p=U(function*(g,m){return yield g.setRemoteDescription(m)});return function(m,A){return p.apply(this,arguments)}}();try{const p=yield a(i.peerPair[0],"offer");yield c(i.peerPair[1],p);const g=yield a(i.peerPair[1],"answer");yield c(i.peerPair[0],g)}catch(p){throw new h(u.LOCAL_AEC_ERROR,p.toString()).print()}})()}getTracksFromMediaElement(i){var a=this;return U(function*(){if(a.audioTrack)return a.audioTrack;let c;try{i instanceof HTMLVideoElement&&(i.captureStream?i.captureStream():i.mozCaptureStream()),c=a.context.createMediaStreamDestination(),a.context.createMediaElementSource(i).connect(c)}catch(g){throw new h(u.LOCAL_AEC_ERROR,g.toString()).print()}if(!c)throw new h(u.LOCAL_AEC_ERROR,"no dest node when local aec").print();const p=c.stream.getAudioTracks()[0];return a.audioTrack=p,p})()}getElement(){return this.element}startEchoCancellation(){var i=this;return U(function*(){i.context.resume(),i.peerPair&&i.close(),i.initPeers();const a=i.element,c=yield i.getTracksFromMediaElement(a);i.peerPair&&i.peerPair[0].addTrack(c),yield i.switchSdp()})()}close(){O.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(i=>{i.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var sL,Rk;q(iT,"count",0);const AW=window.AudioContext||window.webkitAudioContext,Lz=new(sL=RD({report:Gt}),Kn((Rk=class{constructor(){q(this,"units",[]),q(this,"context",void 0)}processExternalMediaAEC(r){if(!this._doesEnvironmentNeedAEC())return O.debug("the system does not need to process local aec"),-1;this.context||(this.context=new AW);let i=this.units.find(a=>a&&a.getElement()===r);return i||(i=new iT(r,this.context),this.units.push(i)),i.startEchoCancellation(),O.debug("start processing local audio echo cancellation, id is",i.id),i.id}_doesEnvironmentNeedAEC(){return Oi().name!==oi.SAFARI}}).prototype,"processExternalMediaAEC",[sL],Object.getOwnPropertyDescriptor(Rk.prototype,"processExternalMediaAEC"),Rk.prototype),Rk);Ln("PROCESS_ID","process-".concat(ns(8,""),"-").concat(ns(4,""),"-").concat(ns(4,""),"-").concat(ns(4,""),"-").concat(ns(12,""))),function(){const r=Oi();nc.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),nc.getStreamFromExtension=r.name===oi.CHROME&&Number(r.version)>34,nc.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const i=new RTCPeerConnection;let a=!1;try{i.addTransceiver("audio"),a=!0}catch{}return i.close(),a}(),nc.supportMinBitrate=r.name===oi.CHROME||r.name===oi.EDGE,nc.supportSetRtpSenderParameters=function(){const i=Oi();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!cS()||!(!uu()&&!ry())||i.name===oi.FIREFOX&&Number(i.version)>=64)}(),r.name===oi.SAFARI&&(nc.supportDualStream=Number(r.version)>=14),nc.webAudioMediaStreamDest=function(){const i=Oi();return!(i.name===oi.SAFARI&&Number(i.version)<12)}(),nc.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,nc.supportWebGL=typeof WebGLRenderingContext<"u",nc.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,cS()||(nc.webAudioWithAEC=!0),nc.supportShareAudio=function(){const i=Oi();return(i.os===Ei.WIN_10||i.os===Ei.WIN_81||i.os===Ei.WIN_7||i.os===Ei.LINUX||i.os===Ei.MAC_OS)&&i.name===oi.CHROME&&Number(i.version)>=74}(),nc.supportDualStreamEncoding=function(){const i=Oi();return"Safari"===i.name&&Number(i.version)>=14}(),O.info("browser compatibility",JSON.stringify(nc),JSON.stringify(r)),Ne("info",[],"updateAgoraRTCCompatibility",{browserCompatibility:nc,browserInfo:r})}(),function(){let r;try{r=window.localStorage.getItem("websdk_ng_global_parameter")}catch(i){return void O.error("Error loading sdk config",i.message)}if(r)try{const i=JSON.parse(window.atob(r)),a=Date.now();O.debug("Loading global parameters from cache",i),Ne("debug",[],"loadConfigFromLocalStorage",i),Object.keys(i).forEach(c=>{if(Object.prototype.hasOwnProperty.call(hr,c)){const{value:p,expires:g}=i[c];if(g&&g<=a)return;Hr[c]=p,hr[c]=p}})}catch(i){O.error("Error loading mutableParamsCache: ".concat(r),i.message)}}();const Oy={__CLIENT_LIST__:Fi,__TRACK_LIST__:Vo,VERSION:gr,BUILD:Tr,setParameter:Ln,getParameter:rt,getSupportedCodec:function(){var r=U(function*(){let i={audio:[],video:[]};try{let a=new RTCPeerConnection;a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"});const c=(yield a.createOffer()).sdp;if(!c)return i;a.close(),a=null,i=function(p){const g={video:[],audio:[]};return p.match(/ VP8/i)&&g.video.push("VP8"),p.match(/ VP9/i)&&g.video.push("VP9"),p.match(/ AV1/i)&&g.video.push("AV1"),p.match(/ H264/i)&&g.video.push("H264"),p.match(/ opus/i)&&g.audio.push("OPUS"),p.match(/ PCMU/i)&&g.audio.push("PCMU"),p.match(/ PCMA/i)&&g.audio.push("PCMA"),p.match(/ G722/i)&&g.audio.push("G722"),g}(c)}catch(a){throw new h(u.CREATE_OFFER_FAILED,a.toString&&a.toString()).print()}return i});return function(){return r.apply(this,arguments)}}(),checkSystemRequirements:function(){const r=Gt.reportApiInvoke(null,{name:Xn.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:zn.TRACER});let i=!1;try{const g=window.RTCPeerConnection,m=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,A=window.WebSocket;i=!!(g&&m&&A)}catch(g){return O.error("check system requirement failed: ",g),!1}let a=!1;const c=Oi();c.name===oi.CHROME&&Number(c.version)>=58&&(!function uw(){return"WebKit"===nd.engine.name}()||function aS(){const r=Oi();if(ry()){if(r.os===Ei.MAC_OS)return!0;if(r.os===Ei.IOS){const i=nd.os.version&&nd.os.version.split(".");if(i&&14===Number(i[0])&&i[1]&&Number(i[1])>=3||i&&Number(i[0])>14)return!0}}return!1}())&&(a=!0),c.name===oi.FIREFOX&&Number(c.version)>=56&&(a=!0),c.name===oi.OPERA&&Number(c.version)>=45&&(a=!0),c.name===oi.SAFARI&&Number(c.version)>=11&&(a=!0),(Bi()||Oi().name===oi.QQ)&&(a=!0),O.debug("checkSystemRequirements, api:",i,"browser",a);const p=i&&a;return r.onSuccess(p),p},getDevices:function(r){return Sl.enumerateDevices(!0,!0,r)},getMicrophones:function(r){return Sl.getRecordingDevices(r)},getCameras:function(r){return Sl.getCamerasDevices(r)},getElectronScreenSources:zj,getPlaybackDevices:function(r){return Sl.getSpeakers(r)},createClient:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const i=Gt.reportApiInvoke(null,{name:Xn.CREATE_CLIENT,options:[r],tag:zn.TRACER});try{CF(r)}catch(a){throw i.onError(a),a}return void 0===r.audioCodec&&(r.audioCodec="opus"),i.onSuccess(),new iL(rT(rT({forceWaitGatewayResponse:!0},r),{},{role:"rtc"===r.mode?"host":r.role}))},createCameraVideoTrack:function(){var r=U(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{encoderConfig:"480p_1"};const a=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CREATE_CAM_VIDEO_TRACK,options:[oL({},i)]}),c=kU(i),p=ns(8,"track-cam-");let g=null;O.info("start create camera video track with config",JSON.stringify(i),"trackId",p),Ft("info",["AgoraRTC"],"createCameraVideoTrack",i);try{g=(yield Uu({video:c},p)).getVideoTracks()[0]||null}catch(A){throw a.onError(A),A}if(!g){const A=new h(u.UNEXPECTED_ERROR,"can not find track in media stream");return a.onError(A),A.throw()}i.optimizationMode&&yV(p,g,i,i.encoderConfig&&xt(i.encoderConfig));const m=new U8(g,i,c,i.scalabiltyMode?et(i.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},i.optimizationMode,p);return a.onSuccess(m.getTrackId()),O.info("create camera video success, trackId:",p),Ft("info",["AgoraRTC"],"createCameraVideoTrack",void 0,p),m});return function(){return r.apply(this,arguments)}}(),createCustomVideoTrack:function(r){const i=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CREATE_CUSTOM_VIDEO_TRACK,options:[r]}),a=new Ns(r.mediaStreamTrack,{bitrateMax:r.bitrateMax,bitrateMin:r.bitrateMin},r.scalabiltyMode?et(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode);return i.onSuccess(a.getTrackId()),O.info("create custom video track success with config",r,"trackId",a.getTrackId()),Ft("info",["AgoraRTC"],"createCustomVideoTrack",r,a.getTrackId()),a},createScreenVideoTrack:function(){var r=U(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const c=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CREATE_SCREEN_VIDEO_TRACK,options:[oL({},i),a]});i.encoderConfig?"string"==typeof i.encoderConfig||i.encoderConfig.width&&i.encoderConfig.height||(i.encoderConfig.width={max:1920},i.encoderConfig.height={max:1080}):i.encoderConfig="1080p_2";const p=oG(i),g=ns(8,"track-scr");let m=null,A=null;const _=Uc();if(!_.supportShareAudio&&"enable"===a){const T=new h(u.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return c.onError(T),T.throw()}O.info("start create screen video track with config",i,"withAudio",a,"trackId",g),Ft("info",["AgoraRTC"],"createScreenVideoTrack",[i,a]);try{const T=yield Uu({screen:p,screenAudio:"auto"===a?_.supportShareAudio:"enable"===a},g);m=T.getVideoTracks()[0]||null,A=T.getAudioTracks()[0]||null}catch(T){throw c.onError(T),T}if(!m){const T=new h(u.UNEXPECTED_ERROR,"can not find track in media stream");return c.onError(T),T.throw()}if(!A&&"enable"===a){m&&m.stop();const T=new h(u.SHARE_AUDIO_NOT_ALLOWED);return c.onError(T),T.throw()}i.optimizationMode||(i.optimizationMode="detail"),i.optimizationMode&&(yV(g,m,i,i.encoderConfig&&It(i.encoderConfig)),i.encoderConfig&&"string"!=typeof i.encoderConfig&&(i.encoderConfig.bitrateMin=i.encoderConfig.bitrateMax));const S=new Ns(m,i.encoderConfig?It(i.encoderConfig):{},i.scalabiltyMode?et(i.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},i.optimizationMode,g,[Fc.SCREEN_TRACK]);if(!A)return c.onSuccess(S.getTrackId()),O.info("create screen video track success","video:",S.getTrackId()),Ft("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:S.getTrackId()}),S;const C=new Ga(A);return c.onSuccess([S.getTrackId(),C.getTrackId()]),O.info("create screen video track success","video:",S.getTrackId(),"audio:",C.getTrackId()),Ft("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:S.getTrackId(),audioTrack:C.getTrackId()}),[S,C]});return function(){return r.apply(this,arguments)}}(),createMicrophoneAndCameraTracks:function(){var r=U(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoderConfig:"480p_1"};const c=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CREATE_MIC_AND_CAM_TRACKS,options:[i,a]}),p=kU(a),g=sG(i),m=ns(8,"track-mic-"),A=ns(8,"track-cam-");let _=null,S=null;O.info("start create camera video track(".concat(A,") and microphone audio track(").concat(m,") with config, audio: ").concat(JSON.stringify(i),", video: ").concat(JSON.stringify(a))),Ft("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",{videoConfig:a,audioConfig:i});try{const D=yield Uu({audio:g,video:p},"".concat(m,"-").concat(A));_=D.getAudioTracks()[0],S=D.getVideoTracks()[0]}catch(D){throw c.onError(D),D}if(!_||!S){const D=new h(u.UNEXPECTED_ERROR,"can not find tracks in media stream");return c.onError(D),D.throw()}a.optimizationMode&&yV(A,S,a,a.encoderConfig&&xt(a.encoderConfig));const C=new kS(_,i,g,m),T=new U8(S,a,p,a.scalabiltyMode?et(a.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},a.optimizationMode,A);return c.onSuccess([C.getTrackId(),T.getTrackId()]),O.info("create camera video track(".concat(A,") and microphone audio track(").concat(m,") success")),Ft("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",void 0,{videoTrackId:A,audioTrackId:m}),[C,T]});return function(){return r.apply(this,arguments)}}(),createMicrophoneAudioTrack:function(){var r=U(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CREATE_MIC_AUDIO_TRACK,options:[i]}),c=sG(i),p=ns(8,"track-mic-");let g=null;O.info("start create microphone audio track with config",JSON.stringify(i),"trackId",p),Ft("info",["AgoraRTC"],"createMicrophoneAudioTrack",i);try{g=(yield Uu({audio:c},p)).getAudioTracks()[0]||null}catch(A){throw a.onError(A),A}if(!g){const A=new h(u.UNEXPECTED_ERROR,"can not find track in media stream");return a.onError(A),A.throw()}const m=new kS(g,i,c,p);return a.onSuccess(m.getTrackId()),O.info("create microphone audio track success, trackId:",p),Ft("info",["AgoraRTC"],"createMicrophoneAudioTrack",i,p),m});return function(){return r.apply(this,arguments)}}(),createCustomAudioTrack:function(r){const i=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CREATE_CUSTOM_AUDIO_TRACK,options:[r]}),a=new Ga(r.mediaStreamTrack,r.encoderConfig?Cn(r.encoderConfig):{});return O.info("create custom audio track success with config",r,"trackId",a.getTrackId()),Ft("info",["AgoraRTC"],"createCustomAudioTrack",r,a.getTrackId()),i.onSuccess(a.getTrackId()),a},createBufferSourceAudioTrack:function(){var r=U(function*(i){const a=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CREATE_BUFFER_AUDIO_TRACK,options:[i]}),c=ns(8,"track-buf-");O.info("start create buffer source audio track with config",JSON.stringify(i),"trackId",c),Ft("info",[],"createBufferSourceAudioTrack",i);const p=i.source;if(!(i.source instanceof AudioBuffer))try{i.source=yield function iQ(r,i){return AV.apply(this,arguments)}(i.source,i.cacheOnlineFile)}catch(A){return a.onError(A),A.throw()}const g=new nQ(i.source),m=new r5(p,g,i.encoderConfig?Cn(i.encoderConfig):{},c);return O.info("create buffer source audio track success, trackId:",c),Ft("info",["AgoraRTC"],"createBufferSourceAudioTrack",void 0,c),a.onSuccess(m.getTrackId()),m});return function(a){return r.apply(this,arguments)}}(),setLogLevel:function(r){rt("USE_NEW_LOG")?function(i){i=Math.min(Math.max(0,i),4),Le=i}(r):O.setLogLevel(r)},enableLogUpload:function(){rt("USE_NEW_LOG")?Ln("UPLOAD_LOG",!0):O.enableLogUpload()},disableLogUpload:function(){rt("USE_NEW_LOG")?Ln("UPLOAD_LOG",!1):O.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new wU},checkAudioTrackIsActive:function(){var r=U(function*(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[a]});if(!(i instanceof Ga||i instanceof xm)){const S=new h(u.INVALID_TRACK,"the parameter is not a audio track");return c.onError(S),S.throw()}a&&a<1e3&&(a=1e3);const p=i instanceof Ga?i.getTrackLabel():"remote_track",g=i.getVolumeLevel();let m=g,A=g;const _=Date.now();return new Un(S=>{const C=setInterval(()=>{const T=i.getVolumeLevel();m=T>m?T:m,A=T<A?T:A;const D=m-A>1e-4,B=Date.now()-_;if(D||B>a){clearInterval(C);const K=D,W={duration:B,deviceLabel:p,maxVolumeLevel:m,result:K};O.info("[track-".concat(i.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(W))),c.onSuccess(W),S(K)}},200)})});return function(a){return r.apply(this,arguments)}}(),checkVideoTrackIsActive:function(){var r=U(function*(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Gt.reportApiInvoke(null,{tag:zn.TRACER,name:Xn.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[a]});if(!(i instanceof Ns||i instanceof Yx)){const B=new h(u.INVALID_TRACK,"the parameter is not a video track");return c.onError(B),B.throw()}const p=4;a&&a<1e3&&(a=1e3);const g=i instanceof Ns?i.getTrackLabel():"remote_track",m=i.getMediaStreamTrack(!0),A=document.createElement("video");A.style.width="1px",A.style.height="1px",A.setAttribute("muted",""),A.muted=!0,A.setAttribute("playsinline",""),A.controls=!1,(uu()||ry())&&(A.style.opacity="0.01",A.style.position="fixed",A.style.left="0",A.style.top="0",document.body.appendChild(A)),A.srcObject=new MediaStream([m]),A.play();const _=document.createElement("canvas");_.width=160,_.height=120;let S=0,C=0;try{const B=Date.now();S=yield vW(A,a,_,p),C=Date.now()-B}catch(B){throw c.onError(B),B}_W===oi.SAFARI&&(A.pause(),A.remove()),A.srcObject=null;const T=S>p,D={duration:C,changedPicNum:S,deviceLabel:g,result:T};return O.info("[track-".concat(i.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(D))),c.onSuccess(D),T});return function(a){return r.apply(this,arguments)}}(),setArea:function(r){const i=Gt.reportApiInvoke(null,{name:Xn.SET_AREA,options:r,tag:zn.TRACER});try{let a=[];if("string"==typeof r&&(a=[r]),Array.isArray(r)&&(r.forEach(p=>{if(!lN.includes(p))throw new h(u.INVALID_PARAMS,"invalid area code")}),a=r),"[object Object]"===Object.prototype.toString.call(r)){const{areaCode:p,excludedArea:g}=r;if(!p)throw new h(u.INVALID_PARAMS,"area code is needed");let m=p;"string"==typeof p&&(m=[p]),a=g?function(r,i){let a=[];if(r.includes(ni.GLOBAL)){const g=[ni.GLOBAL,ni.OVERSEA],m=Object.keys(fD);if(i===ni.GLOBAL)throw new h(u.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(i===ni.CHINA)a=[ni.OVERSEA];else if(yU.includes(i)){const A=Cx[ni.GLOBAL][i]||[],_=[...g,i,...A];a=m.filter(S=>!_.includes(S))}else if(function(A){let _=!1;return yU.forEach(S=>{Cx[ni.GLOBAL][S].includes(A)&&(_=!0)}),_}(i)){const A=function(S){let C;return yU.forEach(T=>{Cx[ni.GLOBAL][T].includes(S)&&(C=T)}),C}(i),_=[...g,A,i];a=m.filter(S=>!_.includes(S))}else a=r;a=function(A){const _=[];return l8.forEach(S=>{A.includes(S)&&_.push(S)}),_.concat(A.filter(S=>!l8.includes(S)))}(a)}else a=r;return a}(m,g):m}Ln("AREAS",a);const c=(p=>{const g={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return p.map(m=>{const A=fD[m],_=Object.keys(A);_&&_.map(S=>{"CODE"!==S&&(g[S]=g[S].concat(A[S]))})}),g})(a);Object.keys(c).map(p=>{Ln(p,"LOG_UPLOAD_SERVER"===p||"EVENT_REPORT_DOMAIN"===p||"EVENT_REPORT_BACKUP_DOMAIN"===p||"PROXY_SERVER_TYPE3"===p?c[p][0]:c[p])}),O.debug("set area success:",a.join(","))}catch(a){throw i.onError(a),a}i.onSuccess()},loadModule:function(){var r=U(function*(i,a){if(O.debug("loadModule: ".concat(i.name,", loadOption: ").concat(JSON.stringify(a))),!i.moduleInit)throw O.debug("Invalid Plugin"),new h(u.INVALID_PLUGIN,"invalid plugin");try{DD.installPlugin(i),yield i.moduleInit({logger:O,report:Gt,pluginCenter:DD,getParameter:rt},a)}catch(c){throw new h(u.UNEXPECTED_ERROR,"unexpected error in loadModule",c)}});return function(a,c){return r.apply(this,arguments)}}(),audioElementPlayCenter:dd,processExternalMediaAEC:function(r){Lz.processExternalMediaAEC(r)},registerExtensions:function(r){r.forEach(i=>{const a=i;a.__registered__=!0,a.logger.hookLog=O.extLog,a.reporter.hookApiInvoke=Gt.extApiInvoke,a.parameters&&Object.keys(a.parameters).forEach(c=>{a.parameters[c]=rt(c)})})},ChannelMediaRelayError:S_,ChannelMediaRelayEvent:Zh,ChannelMediaRelayState:Va,RemoteStreamFallbackType:M4,RemoteStreamType:TF,ConnectionDisconnectedReason:Gs,AudienceLatencyLevelType:aN,AREAS:ni};return Object.defineProperties(Oy,{onAudioAutoplayFailed:{get:()=>ud.onAudioAutoplayFailed,set:r=>{ud.onAudioAutoplayFailed=r}},onAutoplayFailed:{get:()=>ud.onAutoplayFailed,set:r=>{ud.onAutoplayFailed=r}}}),Sl.on(Sm.CAMERA_DEVICE_CHANGED,r=>{O.info("camera device changed",JSON.stringify(r)),Oy.onCameraChanged&&Oy.onCameraChanged(r)}),Sl.on(Sm.RECORDING_DEVICE_CHANGED,r=>{O.info("microphone device changed",JSON.stringify(r)),Oy.onMicrophoneChanged&&Oy.onMicrophoneChanged(r)}),Sl.on(Sm.PLAYOUT_DEVICE_CHANGED,r=>{O.debug("playout device changed",JSON.stringify(r)),Oy.onPlaybackDeviceChanged&&Oy.onPlaybackDeviceChanged(r)}),dd.onAutoplayFailed=()=>{O.info("detect audio element autoplay failed"),ud.onAudioAutoplayFailed&&ud.onAudioAutoplayFailed()},Fr.on("autoplay-failed",()=>{O.info("detect webaudio autoplay failed"),ud.onAudioAutoplayFailed&&ud.onAudioAutoplayFailed()}),window&&(window.__ARTC__=Oy),Oy}()},9069:we=>{"use strict";var U,Oe="object"==typeof Reflect?Reflect:null,Y=Oe&&"function"==typeof Oe.apply?Oe.apply:function(he,Ce,ye){return Function.prototype.apply.call(he,Ce,ye)};U=Oe&&"function"==typeof Oe.ownKeys?Oe.ownKeys:Object.getOwnPropertySymbols?function(he){return Object.getOwnPropertyNames(he).concat(Object.getOwnPropertySymbols(he))}:function(he){return Object.getOwnPropertyNames(he)};var oe=Number.isNaN||function(he){return he!=he};function H(){H.init.call(this)}we.exports=H,we.exports.once=function G(Te,he){return new Promise(function(Ce,ye){function me(pe){Te.removeListener(he,ce),ye(pe)}function ce(){"function"==typeof Te.removeListener&&Te.removeListener("error",me),Ce([].slice.call(arguments))}Ae(Te,he,ce,{once:!0}),"error"!==he&&function ae(Te,he,Ce){"function"==typeof Te.on&&Ae(Te,"error",he,Ce)}(Te,me,{once:!0})})},H.EventEmitter=H,H.prototype._events=void 0,H.prototype._eventsCount=0,H.prototype._maxListeners=void 0;var j=10;function M(Te){if("function"!=typeof Te)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Te)}function P(Te){return void 0===Te._maxListeners?H.defaultMaxListeners:Te._maxListeners}function x(Te,he,Ce,ye){var me,ce,pe;if(M(Ce),void 0===(ce=Te._events)?(ce=Te._events=Object.create(null),Te._eventsCount=0):(void 0!==ce.newListener&&(Te.emit("newListener",he,Ce.listener?Ce.listener:Ce),ce=Te._events),pe=ce[he]),void 0===pe)pe=ce[he]=Ce,++Te._eventsCount;else if("function"==typeof pe?pe=ce[he]=ye?[Ce,pe]:[pe,Ce]:ye?pe.unshift(Ce):pe.push(Ce),(me=P(Te))>0&&pe.length>me&&!pe.warned){pe.warned=!0;var be=new Error("Possible EventEmitter memory leak detected. "+pe.length+" "+String(he)+" listeners added. Use emitter.setMaxListeners() to increase limit");be.name="MaxListenersExceededWarning",be.emitter=Te,be.type=he,be.count=pe.length,function te(Te){console&&console.warn&&console.warn(Te)}(be)}return Te}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function J(Te,he,Ce){var ye={fired:!1,wrapFn:void 0,target:Te,type:he,listener:Ce},me=F.bind(ye);return me.listener=Ce,ye.wrapFn=me,me}function se(Te,he,Ce){var ye=Te._events;if(void 0===ye)return[];var me=ye[he];return void 0===me?[]:"function"==typeof me?Ce?[me.listener||me]:[me]:Ce?function z(Te){for(var he=new Array(Te.length),Ce=0;Ce<he.length;++Ce)he[Ce]=Te[Ce].listener||Te[Ce];return he}(me):le(me,me.length)}function ue(Te){var he=this._events;if(void 0!==he){var Ce=he[Te];if("function"==typeof Ce)return 1;if(void 0!==Ce)return Ce.length}return 0}function le(Te,he){for(var Ce=new Array(he),ye=0;ye<he;++ye)Ce[ye]=Te[ye];return Ce}function Ae(Te,he,Ce,ye){if("function"==typeof Te.on)ye.once?Te.once(he,Ce):Te.on(he,Ce);else{if("function"!=typeof Te.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Te);Te.addEventListener(he,function me(ce){ye.once&&Te.removeEventListener(he,me),Ce(ce)})}}Object.defineProperty(H,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(Te){if("number"!=typeof Te||Te<0||oe(Te))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Te+".");j=Te}}),H.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},H.prototype.setMaxListeners=function(he){if("number"!=typeof he||he<0||oe(he))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+he+".");return this._maxListeners=he,this},H.prototype.getMaxListeners=function(){return P(this)},H.prototype.emit=function(he){for(var Ce=[],ye=1;ye<arguments.length;ye++)Ce.push(arguments[ye]);var me="error"===he,ce=this._events;if(void 0!==ce)me=me&&void 0===ce.error;else if(!me)return!1;if(me){var pe;if(Ce.length>0&&(pe=Ce[0]),pe instanceof Error)throw pe;var be=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw be.context=pe,be}var Fe=ce[he];if(void 0===Fe)return!1;if("function"==typeof Fe)Y(Fe,this,Ce);else{var xe=Fe.length,Ue=le(Fe,xe);for(ye=0;ye<xe;++ye)Y(Ue[ye],this,Ce)}return!0},H.prototype.on=H.prototype.addListener=function(he,Ce){return x(this,he,Ce,!1)},H.prototype.prependListener=function(he,Ce){return x(this,he,Ce,!0)},H.prototype.once=function(he,Ce){return M(Ce),this.on(he,J(this,he,Ce)),this},H.prototype.prependOnceListener=function(he,Ce){return M(Ce),this.prependListener(he,J(this,he,Ce)),this},H.prototype.off=H.prototype.removeListener=function(he,Ce){var ye,me,ce,pe,be;if(M(Ce),void 0===(me=this._events))return this;if(void 0===(ye=me[he]))return this;if(ye===Ce||ye.listener===Ce)0==--this._eventsCount?this._events=Object.create(null):(delete me[he],me.removeListener&&this.emit("removeListener",he,ye.listener||Ce));else if("function"!=typeof ye){for(ce=-1,pe=ye.length-1;pe>=0;pe--)if(ye[pe]===Ce||ye[pe].listener===Ce){be=ye[pe].listener,ce=pe;break}if(ce<0)return this;0===ce?ye.shift():function $(Te,he){for(;he+1<Te.length;he++)Te[he]=Te[he+1];Te.pop()}(ye,ce),1===ye.length&&(me[he]=ye[0]),void 0!==me.removeListener&&this.emit("removeListener",he,be||Ce)}return this},H.prototype.removeAllListeners=function(he){var Ce,ye,me;if(void 0===(ye=this._events))return this;if(void 0===ye.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ye[he]&&(0==--this._eventsCount?this._events=Object.create(null):delete ye[he]),this;if(0===arguments.length){var pe,ce=Object.keys(ye);for(me=0;me<ce.length;++me)"removeListener"!==(pe=ce[me])&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Ce=ye[he]))this.removeListener(he,Ce);else if(void 0!==Ce)for(me=Ce.length-1;me>=0;me--)this.removeListener(he,Ce[me]);return this},H.prototype.listeners=function(he){return se(this,he,!0)},H.prototype.rawListeners=function(he){return se(this,he,!1)},H.listenerCount=function(Te,he){return"function"==typeof Te.listenerCount?Te.listenerCount(he):ue.call(Te,he)},H.prototype.listenerCount=ue,H.prototype.eventNames=function(){return this._eventsCount>0?U(this._events):[]}},302:(we,Oe,Y)=>{"use strict";var U=Y(8126);we.exports=function te(oe,H,j,M){var P,x=new Error("Canceled");return new U(function(J,se,ue){var le;oe(function(z){return ue()?U.reject(x):(le=H(z),j(le).then(function(ae){if(ue())throw x;return P=ae()}))}).then(function(z){if(ue())throw z.disconnect(),x;J(M(le,z))}).catch(function(z){se(z)})},function(){P&&P.cancel()})}},5769:(we,Oe,Y)=>{"use strict";var U=Y(1647).MediaStreamTrack,te=Y(7627),oe=te.guessBrowser,H=te.guessBrowserVersion,j=Y(302),M=Y(8130),P=Y(3383),x=Y(3744),F=Y(4920),J=Y(7379),se=J.LocalAudioTrack,ue=J.LocalDataTrack,le=J.LocalVideoTrack,$=Y(4621),z=Y(7406),G=Y(448),ae=Y(9739),Ae=ae.asLocalTrack,Te=ae.buildLogLevels,he=ae.filterObject,Ce=ae.isNonArrayObject,ye=Y(8701),me=ye.DEFAULT_ENVIRONMENT,ce=ye.DEFAULT_LOG_LEVEL,pe=ye.DEFAULT_LOGGER_NAME,be=ye.DEFAULT_REALM,Fe=ye.DEFAULT_REGION,xe=ye.WS_SERVER,Ue=ye.SDK_NAME,qe=ye.SDK_VERSION,Je=ye.typeErrors,Pe=Y(8126),Mt=Y(8606),Lt=Y(1458),yt=Y(1501).kG,We="safari"===oe()&&H(),Be=0,Ge=!1,Re=!1;if(We){var Xe=We.major;Re=Xe<12||12===Xe&&We.minor<1}var Kt=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),Tt=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function Et(Dn,un,Gi){Gi.forEach(function(Oo){var xs=Oo.didWarn,mo=Oo.name,As=Oo.newName,go=Oo.shouldDelete;mo in Dn&&typeof Dn[mo]<"u"&&(As&&go&&(Dn[As]=Dn[mo]),go&&delete Dn[mo],!xs&&!["error","off"].includes(un.level)&&(un.warn('The ConnectOptions "'+mo+'" is '+(As?'deprecated and scheduled for removal. Please use "'+As+'" instead.':"no longer applicable and will be ignored.")),Oo.didWarn=!0))})}function Nt(Dn,un,Gi,Oo,xs,mo){var As=Dn.createLocalParticipantSignaling(Gi,Oo);return un.debug("Creating a new LocalParticipant:",As),new xs.LocalParticipant(As,mo,xs)}function Xt(Dn,un,Gi){var Oo=new z(un,Gi,Dn),xs=Dn.log;return xs.debug("Creating a new Room:",Oo),Gi.on("stateChanged",function mo(As){"disconnected"===As&&(xs.info("Disconnected from Room:",Oo.toString()),Gi.removeListener("stateChanged",mo))}),Oo}function Ke(Dn,un,Gi,Oo,xs,mo){return un.log.debug("Creating a new RoomSignaling"),Gi.connect(mo._signaling,Dn,Oo,xs,un)}function Me(Dn,un){var Gi=Dn.log;return Dn.shouldStopLocalTracks=!Dn.tracks,Dn.shouldStopLocalTracks?Gi.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(Gi.info("Getting LocalTracks"),Gi.debug("Options:",Dn)),Dn.createLocalTracks(Dn).then(function(xs){var mo=un(xs);return mo.catch(function(){Dn.shouldStopLocalTracks&&(Gi.info("The automatically acquired LocalTracks will now be stopped"),xs.forEach(function(go){go.stop()}))}),mo})}function ot(Dn){var un="string"==typeof Dn?{codec:Dn}:Dn;switch(un.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},un);case"vp8":return Object.assign({simulcast:!1},un);default:return un}}we.exports=function zt(Dn,un){if(typeof un>"u"&&(un={}),!Ce(un))return Pe.reject(Je.INVALID_TYPE("options","object"));var go,Gi=un.Log||Lt,Oo=un.loggerName||pe,xs=un.logLevel||ce,mo=Te(xs),As="[connect #"+ ++Be+"]";try{go=new Gi("default",As,mo,Oo)}catch(vr){return Pe.reject(vr)}Et(un,go,Kt);var Qu="auto"===un.preferredVideoCodecs;if(Qu&&(un.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),un.maxVideoBitrate&&Qu)return go.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),Pe.reject(Je.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));var xn={};"string"==typeof(un=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:me,eventListener:null,insights:!0,LocalAudioTrack:se,LocalDataTrack:ue,LocalParticipant:P,LocalVideoTrack:le,Log:Gi,MediaStreamTrack:U,loggerName:Oo,logLevel:xs,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:be,region:Fe,signaling:G},he(un))).wsServerInsights&&(xn.gateway=un.wsServerInsights);var Ye=new(un.insights?x:F)(Dn,Ue,qe,un.environment,un.realm,xn),pt=xe(un.environment,un.region),ht=new Mt(Ye,Date.now(),go,un.eventListener);if((un=Object.assign({eventObserver:ht,wsServer:pt},un)).log=go,Re&&!Ge&&"error"!==go.logLevel&&"off"!==go.logLevel&&(Ge=!0,go.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof Dn)return Pe.reject(Je.INVALID_TYPE("token","string"));var en=Object.assign({},un);if(delete en.name,"tracks"in un){if(!Array.isArray(un.tracks))return Pe.reject(Je.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{un.tracks=un.tracks.map(function(vr){return Ae(vr,en)})}catch(vr){return Pe.reject(vr)}}var dn=yt(un.bandwidthProfile);if(dn)return Pe.reject(dn);un.clientTrackSwitchOffControl="disabled",un.contentPreferencesMode="disabled",un.bandwidthProfile&&(un.clientTrackSwitchOffControl="auto",un.contentPreferencesMode="auto",un.bandwidthProfile.video&&(Et(un.bandwidthProfile.video,go,Tt),un.clientTrackSwitchOffControl="maxTracks"in un.bandwidthProfile.video?"disabled":"manual"===un.bandwidthProfile.video.clientTrackSwitchOffControl?"manual":"auto",un.contentPreferencesMode="renderDimensions"in un.bandwidthProfile.video?"disabled":"manual"===un.bandwidthProfile.video.contentPreferencesMode?"manual":"auto"));var _o=new(0,un.signaling)(un.wsServer,un);go.info("Connecting to a Room"),go.debug("Options:",un);var rs=new M({maxAudioBitrate:un.maxAudioBitrate,maxVideoBitrate:un.maxVideoBitrate},Qu),Is={audio:un.preferredAudioCodecs.map(ot),video:un.preferredVideoCodecs.map(ot)},no=new $(Ce(un.networkQuality)?un.networkQuality:{}),$i=j(Me.bind(null,un),Nt.bind(null,_o,go,rs,no,un),Ke.bind(null,Dn,un,_o,rs,Is),Xt.bind(null,un));return $i.then(function(vr){return Ye.connect(vr.sid,vr.localParticipant.sid),go.info("Connected to Room:",vr.toString()),go.info("Room name:",vr.name),go.debug("Room:",vr),vr.once("disconnected",function(){return Ye.disconnect()}),vr},function(vr){Ye.disconnect(),$i._isCanceled?go.info("Attempt to connect to a Room was canceled"):go.info("Error while connecting to a Room:",vr)}),$i}},8765:(we,Oe,Y)=>{"use strict";var U=Y(8701),te=U.DEFAULT_LOG_LEVEL,oe=U.DEFAULT_LOGGER_NAME;function H(P,x){x=Object.assign({loggerName:oe,logLevel:te},x);var F={};F.loggerName=x.loggerName,F.logLevel=x.logLevel,delete x.loggerName,delete x.logLevel;var J=x.createLocalTracks;return delete x.createLocalTracks,F[P]=!(Object.keys(x).length>0)||x,J(F).then(function(se){return se[0]})}we.exports={audio:function j(P){return H("audio",P)},video:function M(P){return H("video",P)}}},7124:function(we,Oe,Y){"use strict";var U=this&&this.__assign||function(){return U=Object.assign||function(me){for(var ce,pe=1,be=arguments.length;pe<be;pe++)for(var Fe in ce=arguments[pe])Object.prototype.hasOwnProperty.call(ce,Fe)&&(me[Fe]=ce[Fe]);return me},U.apply(this,arguments)},te=this&&this.__awaiter||function(me,ce,pe,be){return new(pe||(pe=Promise))(function(xe,Ue){function qe(Mt){try{Pe(be.next(Mt))}catch(Lt){Ue(Lt)}}function Je(Mt){try{Pe(be.throw(Mt))}catch(Lt){Ue(Lt)}}function Pe(Mt){Mt.done?xe(Mt.value):function Fe(xe){return xe instanceof pe?xe:new pe(function(Ue){Ue(xe)})}(Mt.value).then(qe,Je)}Pe((be=be.apply(me,ce||[])).next())})},oe=this&&this.__generator||function(me,ce){var be,Fe,xe,Ue,pe={label:0,sent:function(){if(1&xe[0])throw xe[1];return xe[1]},trys:[],ops:[]};return Ue={next:qe(0),throw:qe(1),return:qe(2)},"function"==typeof Symbol&&(Ue[Symbol.iterator]=function(){return this}),Ue;function qe(Pe){return function(Mt){return function Je(Pe){if(be)throw new TypeError("Generator is already executing.");for(;pe;)try{if(be=1,Fe&&(xe=2&Pe[0]?Fe.return:Pe[0]?Fe.throw||((xe=Fe.return)&&xe.call(Fe),0):Fe.next)&&!(xe=xe.call(Fe,Pe[1])).done)return xe;switch(Fe=0,xe&&(Pe=[2&Pe[0],xe.value]),Pe[0]){case 0:case 1:xe=Pe;break;case 4:return pe.label++,{value:Pe[1],done:!1};case 5:pe.label++,Fe=Pe[1],Pe=[0];continue;case 7:Pe=pe.ops.pop(),pe.trys.pop();continue;default:if(!(xe=(xe=pe.trys).length>0&&xe[xe.length-1])&&(6===Pe[0]||2===Pe[0])){pe=0;continue}if(3===Pe[0]&&(!xe||Pe[1]>xe[0]&&Pe[1]<xe[3])){pe.label=Pe[1];break}if(6===Pe[0]&&pe.label<xe[1]){pe.label=xe[1],xe=Pe;break}if(xe&&pe.label<xe[2]){pe.label=xe[2],pe.ops.push(Pe);break}xe[2]&&pe.ops.pop(),pe.trys.pop();continue}Pe=ce.call(me,pe)}catch(Mt){Pe=[6,Mt],Fe=0}finally{be=xe=0}if(5&Pe[0])throw Pe[1];return{value:Pe[0]?Pe[1]:void 0,done:!0}}([Pe,Mt])}}},H=this&&this.__read||function(me,ce){var pe="function"==typeof Symbol&&me[Symbol.iterator];if(!pe)return me;var Fe,Ue,be=pe.call(me),xe=[];try{for(;(void 0===ce||ce-- >0)&&!(Fe=be.next()).done;)xe.push(Fe.value)}catch(qe){Ue={error:qe}}finally{try{Fe&&!Fe.done&&(pe=be.return)&&pe.call(be)}finally{if(Ue)throw Ue.error}}return xe},j=this&&this.__spreadArray||function(me,ce){for(var pe=0,be=ce.length,Fe=me.length;pe<be;pe++,Fe++)me[Fe]=ce[pe];return me};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.createLocalTracks=void 0;var M=Y(9739),P=M.asLocalTrack,x=M.buildLogLevels,F=Y(1647),J=F.getUserMedia,se=F.MediaStreamTrack,ue=Y(7379),le=ue.LocalAudioTrack,$=ue.LocalDataTrack,z=ue.LocalVideoTrack,G=Y(1458),ae=Y(8701),Ae=ae.DEFAULT_LOG_LEVEL,Te=ae.DEFAULT_LOGGER_NAME,he=Y(3830),Ce=0;Oe.createLocalTracks=function ye(me){return te(this,void 0,void 0,function(){var ce,pe,be,Fe,xe,Ue,qe,Je,Pe,Mt,Lt,yt;return oe(this,function(We){switch(We.label){case 0:if(pe=U({audio:ce=!(me&&("audio"in me||"video"in me)),getUserMedia:J,loggerName:Te,logLevel:Ae,LocalAudioTrack:le,LocalDataTrack:$,LocalVideoTrack:z,MediaStreamTrack:se,Log:G,video:ce},me),be="[createLocalTracks #"+ ++Ce+"]",Fe=x(pe.logLevel),xe=new pe.Log("default",be,Fe,pe.loggerName),delete(Ue=Object.assign({log:xe},pe)).name,!1===pe.audio&&!1===pe.video)return xe.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(pe.tracks)return xe.info("Adding user-provided LocalTracks"),xe.debug("LocalTracks:",pe.tracks),[2,pe.tracks];(qe={audio:"object"==typeof pe.audio&&pe.audio.name?{name:pe.audio.name}:{},video:"object"==typeof pe.video&&pe.video.name?{name:pe.video.name}:{}}).audio.isCreatedByCreateLocalTracks=!0,qe.video.isCreatedByCreateLocalTracks=!0,"object"==typeof pe.audio&&"boolean"==typeof pe.audio.workaroundWebKitBug1208516&&(qe.audio.workaroundWebKitBug1208516=pe.audio.workaroundWebKitBug1208516),"object"==typeof pe.video&&"boolean"==typeof pe.video.workaroundWebKitBug1208516&&(qe.video.workaroundWebKitBug1208516=pe.video.workaroundWebKitBug1208516),"object"==typeof pe.audio&&delete pe.audio.name,"object"==typeof pe.video&&delete pe.video.name,Je={audio:pe.audio,video:pe.video},Pe="object"==typeof pe.audio&&pe.audio.workaroundWebKitBug180748,We.label=1;case 1:return We.trys.push([1,3,,4]),[4,Pe?he(xe,pe.getUserMedia,Je):pe.getUserMedia(Je)];case 2:return Mt=We.sent(),Lt=j(j([],H(Mt.getAudioTracks())),H(Mt.getVideoTracks())),xe.info("Call to getUserMedia successful; got MediaStreamTracks:",Lt),[2,Lt.map(function(Be){return P(Be,U(U({},qe[Be.kind]),Ue))})];case 3:throw yt=We.sent(),xe.warn("Call to getUserMedia failed:",yt),yt;case 4:return[2]}})})}},2498:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(5295),oe=Y(9020),H=function(j){function M(P){var x=j.call(this,P.label,P.maxPacketLifeTime,P.maxRetransmits,P.ordered)||this;return Object.defineProperties(x,{_dataChannel:{value:P}}),P.binaryType="arraybuffer",P.addEventListener("message",function(F){x.emit("message",F.data)}),P.addEventListener("close",function(){x.emit("close")}),x}return U(M,j),M.prototype.stop=function(){this._dataChannel.close(),j.prototype.stop.call(this)},M.prototype.toDataTransport=function(){return new oe(this._dataChannel)},M}(te);we.exports=H},1866:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(5295),oe=Y(9739).makeUUID,H=function(j){function M(P,x,F){var J=j.call(this,oe(),P,x,F)||this;return Object.defineProperties(J,{_clones:{value:new Set},_dataChannels:{value:new Set}}),J}return U(M,j),M.prototype._addClone=function(P){this._clones.add(P)},M.prototype.removeClone=function(P){this._clones.delete(P)},M.prototype.addDataChannel=function(P){return this._dataChannels.add(P),this},M.prototype.clone=function(){var P=this,x=new M(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(x),x.once("stopped",function(){return P.removeClone(x)}),x},M.prototype.removeDataChannel=function(P){return this._dataChannels.delete(P),this},M.prototype.send=function(P){return this._dataChannels.forEach(function(x){try{x.send(P)}catch{}}),this._clones.forEach(function(x){try{x.send(P)}catch{}}),this},M.prototype.stop=function(){this._dataChannels.forEach(function(P){return P.close()}),this._clones.forEach(function(P){return P.stop()}),j.prototype.stop.call(this)},M}(te);we.exports=H},5295:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,F){var J=H.call(this,M,"data")||this;return Object.defineProperties(J,{maxPacketLifeTime:{enumerable:!0,value:P},maxRetransmits:{enumerable:!0,value:x},ordered:{enumerable:!0,value:F}}),J}return U(j,H),j}(Y(4605));we.exports=oe},9020:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){var P=H.call(this)||this;return Object.defineProperties(P,{_dataChannel:{value:M},_messageQueue:{value:[]}}),M.addEventListener("open",function(){P._messageQueue.splice(0).forEach(function(x){return P._publish(x)})}),M.addEventListener("message",function(x){var F=x.data;try{var J=JSON.parse(F);P.emit("message",J)}catch{}}),P.publish({type:"ready"}),P}return U(j,H),j.prototype._publish=function(M){var P=JSON.stringify(M);try{this._dataChannel.send(P)}catch{}},j.prototype.publish=function(M){var P=this._dataChannel;return"closing"!==P.readyState&&"closed"!==P.readyState&&("connecting"===P.readyState?(this._messageQueue.push(M),!0):(this._publish(M),!0))},j}(Y(9069).EventEmitter);we.exports=oe},8130:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this)||this;return M=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},M),Object.defineProperties(x,{maxAudioBitrate:{value:M.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:M.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:P}}),x}return U(j,H),j.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},j.prototype.update=function(M){var P=this;M=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},M),["maxAudioBitrate","maxVideoBitrate"].reduce(function(F,J){return P[J]!==M[J]&&(P[J]=M[J],F=!0),F},!1)&&this.emit("changed")},j}(Y(9069).EventEmitter);we.exports=oe},133:(we,Oe,Y)=>{"use strict";var U=Y(9069).EventEmitter,te=Y(9739).hidePrivateAndCertainPublicPropertiesInClass;we.exports=te(U,["domain"])},6021:function(we,Oe,Y){"use strict";var U=this&&this.__assign||function(){return U=Object.assign||function($){for(var z,G=1,ae=arguments.length;G<ae;G++)for(var Ae in z=arguments[G])Object.prototype.hasOwnProperty.call(z,Ae)&&($[Ae]=z[Ae]);return $},U.apply(this,arguments)};Object.defineProperty(Oe,"__esModule",{value:!0});var te=Y(7124),oe=Y(8682),H={connect:Y(5769),createLocalAudioTrack:Y(8765).audio,createLocalVideoTrack:Y(8765).video,isSupported:Y(8592)(),version:Y(1730).version,Logger:Y(7846),LocalAudioTrack:Y(7379).LocalAudioTrack,LocalDataTrack:Y(7379).LocalDataTrack,LocalVideoTrack:Y(7379).LocalVideoTrack};we.exports={connect:function j($,z){var G=U({createLocalTracks:te.createLocalTracks},z);return H.connect($,G)},createLocalAudioTrack:function M($){var z=U({createLocalTracks:te.createLocalTracks},$);return H.createLocalAudioTrack(z)},createLocalVideoTrack:function P($){var z=U({createLocalTracks:te.createLocalTracks},$);return H.createLocalVideoTrack(z)},createLocalTracks:te.createLocalTracks,runPreflight:oe.runPreflight,isSupported:H.isSupported,version:H.version,Logger:H.Logger,LocalAudioTrack:H.LocalAudioTrack,LocalVideoTrack:H.LocalVideoTrack,LocalDataTrack:H.LocalDataTrack}},3383:function(we,Oe,Y){"use strict";var Ce,U=this&&this.__extends||(Ce=function(ye,me){return(Ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,pe){ce.__proto__=pe}||function(ce,pe){for(var be in pe)Object.prototype.hasOwnProperty.call(pe,be)&&(ce[be]=pe[be])})(ye,me)},function(ye,me){if("function"!=typeof me&&null!==me)throw new TypeError("Class extends value "+String(me)+" is not a constructor or null");function ce(){this.constructor=ye}Ce(ye,me),ye.prototype=null===me?Object.create(me):(ce.prototype=me.prototype,new ce)}),te=Y(1647).MediaStreamTrack,oe=Y(9739),H=oe.asLocalTrack,j=oe.asLocalTrackPublication,M=oe.trackClass,P=Y(8701),x=P.typeErrors,F=P.trackPriority,J=Y(1501).Wv,se=Y(7379),ue=se.LocalAudioTrack,le=se.LocalDataTrack,$=se.LocalVideoTrack,z=Y(3925),G=Y(5229),ae=Y(9565),Te=function(Ce){function ye(me,ce,pe){var be=this,Fe=(pe=Object.assign({LocalAudioTrack:ue,LocalVideoTrack:$,LocalDataTrack:le,MediaStreamTrack:te,LocalAudioTrackPublication:z,LocalVideoTrackPublication:ae,LocalDataTrackPublication:G,shouldStopLocalTracks:!1,tracks:ce},pe)).shouldStopLocalTracks?new Set(ce.filter(function(xe){return"data"!==xe.kind})):new Set;return be=Ce.call(this,me,pe)||this,Object.defineProperties(be,{_eventObserver:{value:pe.eventObserver},_LocalAudioTrack:{value:pe.LocalAudioTrack},_LocalDataTrack:{value:pe.LocalDataTrack},_LocalVideoTrack:{value:pe.LocalVideoTrack},_MediaStreamTrack:{value:pe.MediaStreamTrack},_LocalAudioTrackPublication:{value:pe.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:pe.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:pe.LocalVideoTrackPublication},_tracksToStop:{value:Fe},signalingRegion:{enumerable:!0,get:function(){return me.signalingRegion}}}),be._handleTrackSignalingEvents(),be}return U(ye,Ce),ye.prototype._addTrack=function(me,ce,pe){var be=Ce.prototype._addTrack.call(this,me,ce);return be&&"disconnected"!==this.state&&this._addLocalTrack(me,pe),be},ye.prototype._addLocalTrack=function(me,ce){this._signaling.addTrack(me._trackSender,me.name,ce),this._log.info("Added a new "+M(me,!0)+":",me.id),this._log.debug(M(me,!0)+":",me)},ye.prototype._removeTrack=function(me,ce){var pe=Ce.prototype._removeTrack.call(this,me,ce);return pe&&"disconnected"!==this.state&&(this._signaling.removeTrack(me._trackSender),this._log.info("Removed a "+M(me,!0)+":",me.id),this._log.debug(M(me,!0)+":",me)),pe},ye.prototype._getTrackEvents=function(){return Ce.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},ye.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},ye.prototype._handleTrackSignalingEvents=function(){var me=this,ce=this._log;if("disconnected"!==this.state){var pe=this._signaling;this.on("trackDisabled",be),this.on("trackEnabled",Fe),this.on("trackStopped",xe),this._tracks.forEach(function(qe){me._addLocalTrack(qe,F.PRIORITY_STANDARD),me._getOrCreateLocalTrackPublication(qe).catch(function(Je){ce.warn("Failed to get or create LocalTrackPublication for "+qe+":",Je)})});var Ue=this;pe.on("stateChanged",function qe(Je){ce.debug("Transitioned to state:",Je),"disconnected"===Je?(ce.debug("Removing LocalTrack event listeners"),pe.removeListener("stateChanged",qe),Ue.removeListener("trackDisabled",be),Ue.removeListener("trackEnabled",Fe),Ue.removeListener("trackStopped",xe),Ue._tracks.forEach(function(Pe){var Mt=xe(Pe);Mt&&Pe._trackSender.removeClone(Mt._trackTransceiver)}),ce.info("LocalParticipant disconnected. Stopping "+Ue._tracksToStop.size+" automatically-acquired LocalTracks"),Ue._tracksToStop.forEach(function(Pe){Pe.stop()})):"connected"===Je&&(ce.info("reconnected"),setTimeout(function(){return Ue.emit("reconnected")},0))})}function be(qe){var Je=pe.getPublication(qe._trackSender);Je&&(Je.disable(),ce.debug("Disabled the "+M(qe,!0)+":",qe.id))}function Fe(qe){var Je=pe.getPublication(qe._trackSender);Je&&(Je.enable(),ce.debug("Enabled the "+M(qe,!0)+":",qe.id))}function xe(qe){var Je=pe.getPublication(qe._trackSender);return Je&&Je.stop(),Je}},ye.prototype._getOrCreateLocalTrackPublication=function(me){var ce=he(this.tracks,me);if(ce)return Promise.resolve(ce);var pe=this._log,be=this,Fe=this._signaling.getPublication(me._trackSender);if(!Fe)return Promise.reject(new Error("Unexpected error: The "+me+" cannot be published"));function xe(Ue){be.unpublishTrack(Ue.track)}return new Promise(function(Ue,qe){Fe.on("updated",function Je(){var Pe=Fe.error;if(Pe)return Fe.removeListener("updated",Je),pe.warn("Failed to publish the "+M(me,!0)+": "+Pe.message),be._removeTrack(me,me.id),setTimeout(function(){be.emit("trackPublicationFailed",Pe,me)}),void qe(Pe);if(!be._tracks.has(me.id))return Fe.removeListener("updated",Je),void qe(new Error("The "+me+" was unpublished"));if(Fe.sid){Fe.removeListener("updated",Je);var Lt={log:pe,LocalAudioTrackPublication:be._LocalAudioTrackPublication,LocalDataTrackPublication:be._LocalDataTrackPublication,LocalVideoTrackPublication:be._LocalVideoTrackPublication};(ce=he(be.tracks,me))||(ce=j(me,Fe,xe,Lt),be._addTrackPublication(ce));var yt=be._signaling.state;("connected"===yt||"connecting"===yt)&&(me._processorEventObserver&&me._processorEventObserver.on("event",function(We){be._eventObserver.emit("event",{name:We.name,payload:We.data,group:"video-processor",level:"info"})}),me.processedTrack&&(me._captureFrames(),me._setSenderMediaStreamTrack(!0))),"connected"===yt&&setTimeout(function(){be.emit("trackPublished",ce)}),Ue(ce)}})})},ye.prototype.publishTrack=function(me,ce){var be,pe=he(this.tracks,me);if(pe)return Promise.resolve(pe);ce=Object.assign({log:this._log,priority:F.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},ce);try{be=H(me,ce)}catch(Ue){return Promise.reject(Ue)}var Fe=Object.values(F);if(!Fe.includes(ce.priority))return Promise.reject(x.INVALID_VALUE("LocalTrackPublishOptions.priority",Fe));var xe=this._addTrack(be,be.id,ce.priority)||this._tracks.get(be.id);return this._getOrCreateLocalTrackPublication(xe)},ye.prototype.publishTracks=function(me){if(!Array.isArray(me))throw x.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(me.map(this.publishTrack,this))},ye.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},ye.prototype.setNetworkQualityConfiguration=function(me){if("object"!=typeof me||null===me)throw x.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(ce){if(ce in me&&("number"!=typeof me[ce]||isNaN(me[ce])))throw x.INVALID_TYPE("networkQualityConfiguration."+ce,"number")}),this._signaling.setNetworkQualityConfiguration(me),this},ye.prototype.setParameters=function(me){if(typeof me<"u"&&"object"!=typeof me)throw x.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(me){if(this._signaling.getParameters().adaptiveSimulcast&&me.maxVideoBitrate)throw x.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(ce){if(typeof me[ce]<"u"&&"number"!=typeof me[ce]&&null!==me[ce])throw x.INVALID_TYPE("encodingParameters."+ce,"number, null or undefined")})}else null===me&&(me={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(me),this},ye.prototype.unpublishTrack=function(me){J(me,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var ce=this._tracks.get(me.id);if(!ce)return null;if(this._signaling.getPublication(ce._trackSender).publishFailed(new Error("The "+ce+" was unpublished")),!(ce=this._removeTrack(ce,ce.id)))return null;var be=he(this.tracks,ce);return be&&this._removeTrackPublication(be),be},ye.prototype.unpublishTracks=function(me){var ce=this;if(!Array.isArray(me))throw x.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return me.reduce(function(pe,be){var Fe=ce.unpublishTrack(be);return Fe?pe.concat(Fe):pe},[])},ye}(Y(9218));function he(Ce,ye){return Array.from(Ce.values()).find(function(me){return me.track===ye||me.track.mediaStreamTrack===ye})||null}we.exports=Te},1534:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return U(j,H),j.prototype._start=function(){H.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},j.prototype.attach=function(){return H.prototype.attach.apply(this,arguments)},j.prototype.detach=function(){return H.prototype.detach.apply(this,arguments)},j}(Y(5366));we.exports=oe},7379:(we,Oe,Y)=>{"use strict";we.exports={LocalAudioTrack:Y(2954),LocalVideoTrack:Y(1),LocalDataTrack:Y(1560)}},2954:(we,Oe,Y)=>{"use strict";var U=Y(1905),te=Y(6213);function oe(H,j){var M=new te(H,j);return Object.setPrototypeOf(M,oe.prototype),M}U(oe,te),we.exports=oe},1560:(we,Oe,Y)=>{"use strict";var U=Y(1905),te=Y(212);function oe(H){var j=new te(H);return Object.setPrototypeOf(j,oe.prototype),j}U(oe,te),we.exports=oe},1:(we,Oe,Y)=>{"use strict";var U=Y(1905),te=Y(4847);function oe(H,j){var M=new te(H,j);return Object.setPrototypeOf(M,oe.prototype),M}U(oe,te),we.exports=oe},1703:function(we,Oe,Y){"use strict";var J,U=this&&this.__extends||(J=function(se,ue){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,$){le.__proto__=$}||function(le,$){for(var z in $)Object.prototype.hasOwnProperty.call($,z)&&(le[z]=$[z])})(se,ue)},function(se,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function le(){this.constructor=se}J(se,ue),se.prototype=null===ue?Object.create(ue):(le.prototype=ue.prototype,new le)}),te=Y(133),oe=Y(9739),H=oe.buildLogLevels,j=oe.valueToJSON,M=Y(8701).DEFAULT_LOG_LEVEL,P=Y(1458),x=0,F=function(J){function se(ue,le,$){var z;$=Object.assign({name:ue,log:null,logLevel:M},$),z=J.call(this)||this;var G=String($.name),ae=H($.logLevel),Ae=$.log?$.log.createLog("media",z):new P("media",z,ae,$.loggerName);return Object.defineProperties(z,{_instanceId:{value:++x},_log:{value:Ae},kind:{enumerable:!0,value:le},name:{enumerable:!0,value:G}}),z}return U(se,J),se.prototype.toJSON=function(){return j(this)},se}(te);we.exports=F},6213:function(we,Oe,Y){"use strict";var M,U=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(F[se]=J[se])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(F.prototype=x.prototype,new F)}),te=Y(1534),j=function(M){function P(x,F){return M.call(this,x,F)||this}return U(P,M),P.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},P.prototype.attach=function(x){return(x=M.prototype.attach.call(this,x)).muted=!0,x},P.prototype._end=function(){return M.prototype._end.apply(this,arguments)},P.prototype.disable=function(){return M.prototype.disable.apply(this,arguments)},P.prototype.enable=function(){return M.prototype.enable.apply(this,arguments)},P.prototype.restart=function(){return M.prototype.restart.apply(this,arguments)},P.prototype.stop=function(){return M.prototype.stop.apply(this,arguments)},P}(Y(8275)(te));we.exports=j},3925:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,F){return H.call(this,M,P,x,F)||this}return U(j,H),j.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}(Y(3335));we.exports=oe},212:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(1703),oe=Y(1866),H=function(j){function M(P){var x,J=new(0,(P=Object.assign({DataTrackSender:oe,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},P)).DataTrackSender)(P.maxPacketLifeTime,P.maxRetransmits,P.ordered);return x=j.call(this,J.id,"data",P)||this,Object.defineProperties(x,{_trackSender:{value:J},id:{enumerable:!0,value:J.id},maxPacketLifeTime:{enumerable:!0,value:P.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:P.maxRetransmits},ordered:{enumerable:!0,value:P.ordered},reliable:{enumerable:!0,value:null===P.maxPacketLifeTime&&null===P.maxRetransmits}}),x}return U(M,j),M.prototype.send=function(P){this._trackSender.send(P)},M}(te);we.exports=H},5229:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,F){return H.call(this,M,P,x,F)||this}return U(j,H),j.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}(Y(3335));we.exports=oe},8275:function(we,Oe,Y){"use strict";var Ce,U=this&&this.__extends||(Ce=function(ye,me){return(Ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,pe){ce.__proto__=pe}||function(ce,pe){for(var be in pe)Object.prototype.hasOwnProperty.call(pe,be)&&(ce[be]=pe[be])})(ye,me)},function(ye,me){if("function"!=typeof me&&null!==me)throw new TypeError("Class extends value "+String(me)+" is not a constructor or null");function ce(){this.constructor=ye}Ce(ye,me),ye.prototype=null===me?Object.create(me):(ce.prototype=me.prototype,new ce)}),te=Y(1647).getUserMedia,oe=Y(7627),H=oe.guessBrowser,j=oe.isIOSChrome,M=Y(9739),P=M.capitalize,x=M.defer,F=M.isUserMediaTrack,J=M.waitForSometime,se=M.waitForEvent,ue=Y(8701).typeErrors.ILLEGAL_INVOKE,le=Y(9059),$=Y(1741),z=Y(2181),G=Y(6396),ae=Y(3830),Ae=Y(808);function he(Ce){var ye=Ce._log,me=Ce.kind,ce={audio:le,video:$}[me],pe=Ce._dummyEl,be=Ce.mediaStreamTrack,Fe=null;function qe(){return Promise.race([se(be,"unmute"),J(50)]).then(function(){return function Ue(){var Be=Ce.mediaStreamTrack.muted,Ge=Ce.isStopped&&!!Ce._workaroundWebKitBug1208516Cleanup;return Promise.resolve().then(function(){return"visible"===document.visibilityState&&!Fe&&(Be||Ge||function xe(){return pe.play().then(function(){return ce(pe)}).then(function(yt){return yt?ye.warn("Silence detected"):ye.info("Non-silence detected"),yt}).catch(function(yt){ye.warn("Failed to detect silence:",yt)}).finally(function(){pe.pause()})}())})}()}).then(function(yt){return yt&&!Fe&&(Fe=x(),Ce._restart().finally(function(){pe=Ce._dummyEl,Mt(),be=Ce.mediaStreamTrack,Pe(),Fe.resolve(),Fe=null}).catch(function(Be){ye.error("failed to restart track: ",Be)})),(Fe&&Fe.promise||Promise.resolve()).finally(function(){return G.resolveDeferred(me)})}).catch(function(yt){ye.error("error in maybeRestart: "+yt.message)})}function Je(){var yt=Ce._log,We=Ce.kind;yt.info("Muted"),yt.debug("LocalMediaTrack:",Ce),G.startDeferred(We)}function Pe(){be.addEventListener("ended",qe),be.addEventListener("mute",Je),be.addEventListener("unmute",qe)}function Mt(){be.removeEventListener("ended",qe),be.removeEventListener("mute",Je),be.removeEventListener("unmute",qe)}var Lt=function(yt){return!!yt&&qe()};return z.onVisibilityChange(1,Lt),Pe(),function(){z.offVisibilityChange(1,Lt),Mt()}}we.exports=function Te(Ce){return function(ye){function me(ce,pe){var be=this,Fe=("safari"===H()||j())&&F(ce)&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;pe=Object.assign({getUserMedia:te,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:Fe,gUMSilentTrackWorkaround:ae},pe);var xe=new Ae(ce),Ue=xe.kind;return be=ye.call(this,xe,pe)||this,Object.defineProperties(be,{_constraints:{value:"object"==typeof pe[Ue]?pe[Ue]:{},writable:!0},_getUserMedia:{value:pe.getUserMedia},_gUMSilentTrackWorkaround:{value:pe.gUMSilentTrackWorkaround},_workaroundWebKitBug1208516:{value:pe.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:pe.isCreatedByCreateLocalTracks},_trackSender:{value:xe},id:{enumerable:!0,value:xe.id},isEnabled:{enumerable:!0,get:function(){return xe.enabled}},isStopped:{enumerable:!0,get:function(){return"ended"===xe.readyState}}}),be._workaroundWebKitBug1208516&&(be._workaroundWebKitBug1208516Cleanup=he(be)),be}return U(me,ye),me.prototype._end=function(){this._didCallEnd||(ye.prototype._end.call(this),this._didCallEnd=!0,this.emit("stopped",this))},me.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),ye.prototype._initialize.call(this)},me.prototype._reacquireTrack=function(ce){var pe,Fe=this._getUserMedia,xe=this._gUMSilentTrackWorkaround,Ue=this._log,qe=this.mediaStreamTrack.kind;Ue.info("Re-acquiring the MediaStreamTrack"),Ue.debug("Constraints:",ce);var Je=Object.assign({audio:!1,video:!1},((pe={})[qe]=ce,pe));return(this._workaroundWebKitBug1208516Cleanup?xe(Ue,Fe,Je):Fe(Je)).then(function(Mt){return Mt.getTracks()[0]})},me.prototype._restart=function(ce){var pe=this,be=this._log;return ce=ce||this._constraints,this._stop(),this._reacquireTrack(ce).catch(function(Fe){throw be.error("Failed to re-acquire the MediaStreamTrack:",{error:Fe,constraints:ce}),Fe}).then(function(Fe){return be.info("Re-acquired the MediaStreamTrack"),be.debug("MediaStreamTrack:",Fe),pe._constraints=Object.assign({},ce),pe._setMediaStreamTrack(Fe)})},me.prototype._setMediaStreamTrack=function(ce){var pe=this;return ce.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){pe._unprocessedTrack=ce}):this._trackSender.setMediaStreamTrack(ce).catch(function(be){pe._log.warn("setMediaStreamTrack failed:",{error:be,mediaStreamTrack:ce})})).then(function(){pe._initialize(),pe._getAllAttachedElements().forEach(function(be){return pe._attach(be)})})},me.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},me.prototype.enable=function(ce){return(ce="boolean"!=typeof ce||ce)!==this.mediaStreamTrack.enabled&&(this._log.info((ce?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=ce,this.emit(ce?"enabled":"disabled",this)),this},me.prototype.disable=function(){return this.enable(!1)},me.prototype.restart=function(ce){var pe=this,be=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(ue("restart","can only be called on a Local"+P(be)+"Track that is created using createLocalTracks or createLocal"+P(be)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var Fe=this._restart(ce);return this._workaroundWebKitBug1208516&&(Fe=Fe.finally(function(){pe._workaroundWebKitBug1208516Cleanup=he(pe)})),Fe},me.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},me}(Ce)}},3335:function(we,Oe,Y){"use strict";var P,U=this&&this.__extends||(P=function(x,F){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,se){J.__proto__=se}||function(J,se){for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(J[ue]=se[ue])})(x,F)},function(x,F){if("function"!=typeof F&&null!==F)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function J(){this.constructor=x}P(x,F),x.prototype=null===F?Object.create(F):(J.prototype=F.prototype,new J)}),te=Y(9222),oe=Y(8701),H=oe.typeErrors,j=oe.trackPriority,M=function(P){function x(F,J,se,ue){var le=P.call(this,J.name,F.sid,ue)||this;return Object.defineProperties(le,{_reemitTrackEvent:{value:function(){return le.emit(le.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:F},_unpublish:{value:se},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:J.kind},priority:{enumerable:!0,get:function(){return F.updatedPriority}},track:{enumerable:!0,value:J}}),J.on("disabled",le._reemitTrackEvent),J.on("enabled",le._reemitTrackEvent),le}return U(x,P),x.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},x.prototype.setPriority=function(F){var J=Object.values(j);if(!J.includes(F))throw H.INVALID_VALUE("priority",J);return this._signaling.setPriority(F),this},x.prototype.unpublish=function(){return this.track.removeListener("disabled",this._reemitTrackEvent),this.track.removeListener("enabled",this._reemitTrackEvent),this._unpublish(this),this},x}(te);we.exports=M},4847:function(we,Oe,Y){"use strict";var ue,U=this&&this.__extends||(ue=function(le,$){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,G){z.__proto__=G}||function(z,G){for(var ae in G)Object.prototype.hasOwnProperty.call(G,ae)&&(z[ae]=G[ae])})(le,$)},function(le,$){if("function"!=typeof $&&null!==$)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function z(){this.constructor=le}ue(le,$),le.prototype=null===$?Object.create($):(z.prototype=$.prototype,new z)}),te=Y(7627),oe=te.guessBrowser,H=te.isIOSChrome,j=Y(1741),M=Y(8275),P=Y(4332),x=Y(9739).isUserMediaTrack,J=function(ue){function le($,z){var G=this;return z=Object.assign({workaroundSilentLocalVideo:("safari"===oe()||H())&&x($)&&typeof document<"u"&&"function"==typeof document.createElement},z),G=ue.call(this,$,z)||this,Object.defineProperties(G,{_workaroundSilentLocalVideo:{value:z.workaroundSilentLocalVideo?se:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),G._workaroundSilentLocalVideo&&(G._workaroundSilentLocalVideoCleanup=G._workaroundSilentLocalVideo(G,document)),G}return U(le,ue),le.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},le.prototype._checkIfCanCaptureFrames=function(){return ue.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},le.prototype._end=function(){return ue.prototype._end.apply(this,arguments)},le.prototype._setSenderMediaStreamTrack=function($){var z=this,G=this.mediaStreamTrack,ae=$?this.processedTrack:G;return this._trackSender.setMediaStreamTrack(ae).catch(function(Ae){return z._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:Ae,mediaStreamTrack:ae})}).then(function(){z._unprocessedTrack=$?G:null})},le.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var $=ue.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),$):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},le.prototype.removeProcessor=function(){var $=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var z=ue.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return $._updateElementsMediaStreamTrack()}),z},le.prototype.disable=function(){var $=ue.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),$},le.prototype.enable=function($){void 0===$&&($=!0);var z=ue.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=$,$&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),z},le.prototype.restart=function(){var $=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var z=ue.prototype.restart.apply(this,arguments);return this.processor&&z.then(function(){$._restartProcessor()}),this._workaroundSilentLocalVideo&&z.finally(function(){$._workaroundSilentLocalVideoCleanup=$._workaroundSilentLocalVideo($,document)}),z},le.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),ue.prototype.stop.apply(this,arguments)},le}(M(P));function se(ue,le){var $=ue._log,z=ue._dummyEl,G=ue.mediaStreamTrack;function ae(){!ue.isEnabled||($.info("Unmuted, checking silence"),z.play().then(function(){return j(z,le)}).then(function(Ae){if(Ae)return $.warn("Silence detected, restarting"),ue._stop(),ue._restart();$.info("Non-silent frames detected, so no need to restart")}).catch(function(Ae){$.warn("Failed to detect silence and restart:",Ae)}).finally(function(){(z=ue._dummyEl).paused||z.pause(),G.removeEventListener("unmute",ae),(G=ue.mediaStreamTrack).addEventListener("unmute",ae)}))}return G.addEventListener("unmute",ae),function(){G.removeEventListener("unmute",ae)}}we.exports=J},9565:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,F){return H.call(this,M,P,x,F)||this}return U(j,H),j.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}(Y(3335));we.exports=oe},5366:function(we,Oe,Y){"use strict";var $,U=this&&this.__extends||($=function(z,G){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,Ae){ae.__proto__=Ae}||function(ae,Ae){for(var Te in Ae)Object.prototype.hasOwnProperty.call(Ae,Te)&&(ae[Te]=Ae[Te])})(z,G)},function(z,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function ae(){this.constructor=z}$(z,G),z.prototype=null===G?Object.create(G):(ae.prototype=G.prototype,new ae)}),te=Y(7627),oe=te.guessBrowser,H=te.isIOSChrome,j=Y(1647).MediaStream,M=Y(9739),P=M.waitForEvent,x=M.waitForSometime,F=Y(6396),se=function($){function z(G,ae){var Ae=this;ae=Object.assign({playPausedElementsIfNotBackgrounded:("safari"===oe()||H())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},ae),Ae=$.call(this,G.id,G.kind,ae)||this;var Te=!1;return ae=Object.assign({MediaStream:j},ae),Object.defineProperties(Ae,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return Te},set:function(he){Te=he}},_playPausedElementsIfNotBackgrounded:{value:ae.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:ae.workaroundWebKitBug212780||ae.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:ae.MediaStream},isStarted:{enumerable:!0,get:function(){return Te}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||G.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),Ae._initialize(),Ae}return U(z,$),z.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},z.prototype._initialize=function(){var G=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",function ae(){G._end(),G.mediaStreamTrack.removeEventListener("ended",ae)}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},z.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},z.prototype.attach=function(G){var ae=this;if("string"==typeof G?G=this._selectElement(G):G||(G=this._createElement()),this._log.debug("Attempting to attach to element:",G),G=this._attach(G),this._shouldShimAttachedElements&&!this._elShims.has(G)){var Ae=this._playPausedElementsIfNotBackgrounded?function(){return function ue($,z){var G=$.tagName.toLowerCase();z.warn("Unintentionally paused:",$),Promise.race([P(document,"visibilitychange"),x(1e3)]).then(function(){"visible"===document.visibilityState&&F.whenResolved("audio").then(function(){return z.info("Playing unintentionally paused <"+G+"> element"),z.debug("Element:",$),$.play()}).then(function(){z.info("Successfully played unintentionally paused <"+G+"> element"),z.debug("Element:",$)}).catch(function(ae){z.warn("Error while playing unintentionally paused <"+G+"> element:",{error:ae,el:$})})})}(G,ae._log)}:null;this._elShims.set(G,function le($,z){void 0===z&&(z=null);var G=$.pause,ae=$.play,Ae=!1;$.pause=function(){return Ae=!0,G.call($)},$.play=function(){return Ae=!1,ae.call($)};var Te=z?function(){Ae||z()}:null;return Te&&$.addEventListener("pause",Te),{pausedIntentionally:function(){return Ae},unShim:function(){$.pause=G,$.play=ae,Te&&$.removeEventListener("pause",Te)}}}(G,Ae))}return G},z.prototype._attach=function(G,ae){void 0===ae&&(ae=this.processedTrack||this.mediaStreamTrack);var Ae=G.srcObject;return Ae instanceof this._MediaStream||(Ae=new this._MediaStream),Ae["audio"===ae.kind?"getAudioTracks":"getVideoTracks"]().forEach(function(he){Ae.removeTrack(he)}),Ae.addTrack(ae),G.srcObject=Ae,G.autoplay=!0,G.playsInline=!0,this._attachments.has(G)||this._attachments.add(G),G},z.prototype._selectElement=function(G){var ae=document.querySelector(G);if(!ae)throw new Error("Selector matched no element: "+G);return ae},z.prototype._updateElementsMediaStreamTrack=function(){var G=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(ae){return G._attach(ae)})},z.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},z.prototype.detach=function(G){var ae;return ae="string"==typeof G?[this._selectElement(G)]:G?[G]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",ae),this._detachElements(ae),G?ae[0]:ae},z.prototype._detachElements=function(G){return G.map(this._detachElement.bind(this))},z.prototype._detachElement=function(G){if(!this._attachments.has(G))return G;var ae=G.srcObject;return ae instanceof this._MediaStream&&ae.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(G),this._shouldShimAttachedElements&&this._elShims.has(G)&&(this._elShims.get(G).unShim(),this._elShims.delete(G)),G},z.prototype._getAllAttachedElements=function(){var G=[];return this._attachments.forEach(function(ae){G.push(ae)}),G},z}(Y(1703));we.exports=se},3501:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return U(j,H),j}(Y(1639));we.exports=oe},8797:function(we,Oe,Y){"use strict";var M,U=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(F[se]=J[se])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(F.prototype=x.prototype,new F)}),te=Y(1534),j=function(M){function P(x,F,J,se,ue,le,$){return M.call(this,x,F,J,se,ue,le,$)||this}return U(P,M),P.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},P.prototype.setPriority=function(x){return M.prototype.setPriority.call(this,x)},P}(Y(1628)(te));we.exports=j},8661:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return U(j,H),j.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}(Y(1521));we.exports=oe},5606:function(we,Oe,Y){"use strict";var F,U=this&&this.__extends||(F=function(J,se){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,le){ue.__proto__=le}||function(ue,le){for(var $ in le)Object.prototype.hasOwnProperty.call(le,$)&&(ue[$]=le[$])})(J,se)},function(J,se){if("function"!=typeof se&&null!==se)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");function ue(){this.constructor=J}F(J,se),J.prototype=null===se?Object.create(se):(ue.prototype=se.prototype,new ue)}),te=this&&this.__read||function(F,J){var se="function"==typeof Symbol&&F[Symbol.iterator];if(!se)return F;var le,z,ue=se.call(F),$=[];try{for(;(void 0===J||J-- >0)&&!(le=ue.next()).done;)$.push(le.value)}catch(G){z={error:G}}finally{try{le&&!le.done&&(se=ue.return)&&se.call(ue)}finally{if(z)throw z.error}}return $},oe=this&&this.__spreadArray||function(F,J){for(var se=0,ue=J.length,le=F.length;se<ue;se++,le++)F[le]=J[se];return F},H=Y(1703),j=Y(8701),M=j.typeErrors,P=j.trackPriority,x=function(F){function J(se,ue,le){var $=F.call(this,ue.id,"data",le)||this;return Object.defineProperties($,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:ue.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:ue.maxRetransmits},ordered:{enumerable:!0,value:ue.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===ue.maxPacketLifeTime&&null===ue.maxRetransmits},sid:{enumerable:!0,value:se}}),ue.on("message",function(z){$.emit("message",z,$)}),$}return U(J,F),J.prototype.setPriority=function(se){var ue=oe([null],te(Object.values(P)));if(!ue.includes(se))throw M.INVALID_VALUE("priority",ue);return this._priority=se,this},J.prototype._setEnabled=function(){},J.prototype._setSwitchedOff=function(se){this._isSwitchedOff!==se&&(this._isSwitchedOff=se,this.emit(se?"switchedOff":"switchedOn",this))},J}(H);we.exports=x},8459:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return U(j,H),j.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}(Y(1521));we.exports=oe},1628:function(we,Oe,Y){"use strict";var le,U=this&&this.__extends||(le=function($,z){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,ae){G.__proto__=ae}||function(G,ae){for(var Ae in ae)Object.prototype.hasOwnProperty.call(ae,Ae)&&(G[Ae]=ae[Ae])})($,z)},function($,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function G(){this.constructor=$}le($,z),$.prototype=null===z?Object.create(z):(G.prototype=z.prototype,new G)}),te=this&&this.__read||function(le,$){var z="function"==typeof Symbol&&le[Symbol.iterator];if(!z)return le;var ae,Te,G=z.call(le),Ae=[];try{for(;(void 0===$||$-- >0)&&!(ae=G.next()).done;)Ae.push(ae.value)}catch(he){Te={error:he}}finally{try{ae&&!ae.done&&(z=G.return)&&z.call(G)}finally{if(Te)throw Te.error}}return Ae},oe=this&&this.__spreadArray||function(le,$){for(var z=0,G=$.length,ae=le.length;z<G;z++,ae++)le[ae]=$[z];return le},H=Y(8701),j=H.typeErrors,M=H.trackPriority,P=Y(7627),x=P.guessBrowser,F=P.isIOSChrome,J=Y(2181);we.exports=function se(le){return function($){function z(G,ae,Ae,Te,he,Ce,ye){var me=this;return ye=Object.assign({workaroundWebKitBug212780:("safari"===x()||F())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},ye),me=$.call(this,ae,ye)||this,Object.defineProperties(me,{_isEnabled:{value:Ae,writable:!0},_isSwitchedOff:{value:Te,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:he},_setRenderHint:{value:function(ce){me._log.debug("updating render hint:",ce),Ce(ce)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:G},_workaroundWebKitBug212780:{value:ye.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),me}return U(z,$),z.prototype.setPriority=function(G){var ae=oe([null],te(Object.values(M)));if(!ae.includes(G))throw j.INVALID_VALUE("priority",ae);return this._priority!==G&&(this._priority=G,this._setPriority(G)),this},z.prototype._setEnabled=function(G){this._isEnabled!==G&&(this._isEnabled=G,this.emit(this._isEnabled?"enabled":"disabled",this))},z.prototype._setSwitchedOff=function(G){this._isSwitchedOff!==G&&(this._isSwitchedOff=G,this.emit(G?"switchedOff":"switchedOn",this))},z.prototype.attach=function(G){var ae=$.prototype.attach.call(this,G);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function ue(le){var $=le._log,z=le.kind;function G(ae){!ae||le._attachments.forEach(function(Ae){var Te=le._elShims.get(Ae);Ae.paused&&Te&&!Te.pausedIntentionally()&&($.info("Playing inadvertently paused <"+z+"> element"),$.debug("Element:",Ae),$.debug("RemoteMediaTrack:",le),Ae.play().then(function(){$.info("Successfully played inadvertently paused <"+z+"> element"),$.debug("Element:",Ae),$.debug("RemoteMediaTrack:",le)}).catch(function(Ce){$.warn("Error while playing inadvertently paused <"+z+"> element:",{err:Ce,el:Ae,remoteMediaTrack:le})}))})}return J.onVisibilityChange(2,G),function(){J.offVisibilityChange(2,G)}}(this)),ae},z.prototype.detach=function(G){var ae=$.prototype.detach.call(this,G);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),ae},z}(le)}},1521:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M.name,M.sid,P)||this;Object.defineProperties(x,{_signaling:{value:M},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return M.isEnabled}},kind:{enumerable:!0,value:M.kind},publishPriority:{enumerable:!0,get:function(){return M.priority}},track:{enumerable:!0,get:function(){return this._track}}});var F=M.error,J=M.isEnabled,se=M.isSwitchedOff,ue=M.priority;return M.on("updated",function(){if(F!==M.error)return F=M.error,void x.emit("subscriptionFailed",M.error);J!==M.isEnabled&&(J=M.isEnabled,x.track&&x.track._setEnabled(M.isEnabled),x.emit(M.isEnabled?"trackEnabled":"trackDisabled")),se!==M.isSwitchedOff&&(x._log.debug(x.trackSid+": "+(se?"OFF":"ON")+" => "+(M.isSwitchedOff?"OFF":"ON")),se=M.isSwitchedOff,x.track?(x.track._setSwitchedOff(M.isSwitchedOff),x.emit(se?"trackSwitchedOff":"trackSwitchedOn",x.track)):se&&x._log.warn("Track was not subscribed when switched Off.")),ue!==M.priority&&x.emit("publishPriorityChanged",ue=M.priority)}),x}return U(j,H),j.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j.prototype._subscribed=function(M){!this._track&&M&&(this._track=M,this.emit("subscribed",M))},j.prototype._unsubscribe=function(){if(this._track){var M=this._track;this._track=null,this.emit("unsubscribed",M)}},j}(Y(9222));we.exports=oe},1629:function(we,Oe,Y){"use strict";var $,U=this&&this.__extends||($=function(z,G){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,Ae){ae.__proto__=Ae}||function(ae,Ae){for(var Te in Ae)Object.prototype.hasOwnProperty.call(Ae,Te)&&(ae[Te]=Ae[Te])})(z,G)},function(z,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function ae(){this.constructor=z}$(z,G),z.prototype=null===G?Object.create(G):(ae.prototype=G.prototype,new ae)}),te=this&&this.__read||function($,z){var G="function"==typeof Symbol&&$[Symbol.iterator];if(!G)return $;var Ae,he,ae=G.call($),Te=[];try{for(;(void 0===z||z-- >0)&&!(Ae=ae.next()).done;)Te.push(Ae.value)}catch(Ce){he={error:Ce}}finally{try{Ae&&!Ae.done&&(G=ae.return)&&G.call(ae)}finally{if(he)throw he.error}}return Te},oe=Y(1628),H=Y(4332),j=Y(2181),M=Y(5318).NullObserver,P=Y(6543),J=function($){function z(G,ae,Ae,Te,he,Ce,ye){var me=this;return ye=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},ye),ye=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||"auto"!==ye.clientTrackSwitchOffControl?M:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||"auto"!==ye.contentPreferencesMode?M:ResizeObserver},ye),me=$.call(this,G,ae,Ae,Te,he,Ce,ye)||this,Object.defineProperties(me,{_enableDocumentVisibilityTurnOff:{value:!0===ye.enableDocumentVisibilityTurnOff&&"auto"===ye.clientTrackSwitchOffControl},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:ye.clientTrackSwitchOffControl},_contentPreferencesMode:{value:ye.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new P(function(){me._setRenderHint({enabled:!1})},50,!1)},_resizeObserver:{value:new ye.ResizeObserver(function(ce){ce.find(function(be){return!me._invisibleElements.has(be.target)})&&le(me)})},_intersectionObserver:{value:new ye.IntersectionObserver(function(ce){var pe=!1;ce.forEach(function(be){!me._invisibleElements.has(be.target)!==be.isIntersecting&&(be.isIntersecting?(me._log.debug("intersectionObserver detected: Off => On"),me._invisibleElements.delete(be.target)):(me._log.debug("intersectionObserver detected: On => Off"),me._invisibleElements.add(be.target)),pe=!0)}),pe&&(ue(me),le(me))},{threshold:.25})}}),me}return U(z,$),z.prototype._start=function(G){var ae=$.prototype._start.call(this,G);return ue(this),ae},z.prototype.switchOn=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},z.prototype.switchOff=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},z.prototype.setContentPreferences=function(G){if("manual"!==this._contentPreferencesMode)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return G.renderDimensions&&this._setRenderHint({renderDimensions:G.renderDimensions}),this},z.prototype._unObservePip=function(G){var ae=this._elToPipCallbacks.get(G);ae&&(G.removeEventListener("enterpictureinpicture",ae.onEnterPip),G.removeEventListener("leavepictureinpicture",ae.onLeavePip),this._elToPipCallbacks.delete(G))},z.prototype._observePip=function(G){var ae=this;if(!this._elToPipCallbacks.get(G)){var Te=function(ye){return ae._onEnterPip(ye,G)},he=function(ye){return ae._onLeavePip(ye,G)};G.addEventListener("enterpictureinpicture",Te),G.addEventListener("leavepictureinpicture",he),this._elToPipCallbacks.set(G,{onEnterPip:Te,onLeavePip:he,onResizePip:function(ye){return ae._onResizePip(ye,G)}})}},z.prototype._onEnterPip=function(G,ae){this._log.debug("onEnterPip");var Ae=G.pictureInPictureWindow;this._elToPipWindows.set(ae,Ae);var Te=this._elToPipCallbacks.get(ae).onResizePip;Ae.addEventListener("resize",Te),ue(this)},z.prototype._onLeavePip=function(G,ae){this._log.debug("onLeavePip"),this._elToPipWindows.delete(ae);var Ae=this._elToPipCallbacks.get(ae).onResizePip;G.pictureInPictureWindow.removeEventListener("resize",Ae),ue(this)},z.prototype._onResizePip=function(){le(this)},z.prototype.attach=function(G){var ae=$.prototype.attach.call(this,G);return"auto"===this._clientTrackSwitchOffControl&&this._invisibleElements.add(ae),this._intersectionObserver.observe(ae),this._resizeObserver.observe(ae),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||function se($){function z(){ue($)}return j.onVisibilityChange(1,z),function(){j.offVisibilityChange(1,z)}}(this)),this._observePip(ae),ae},z.prototype.detach=function(G){var ae=this,Ae=$.prototype.detach.call(this,G);return(Array.isArray(Ae)?Ae:[Ae]).forEach(function(he){ae._intersectionObserver.unobserve(he),ae._resizeObserver.unobserve(he),ae._invisibleElements.delete(he),ae._unObservePip(he)}),0===this._attachments.size&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),ue(this),le(this),Ae},z.prototype.addProcessor=function(){return $.prototype.addProcessor.apply(this,arguments)},z.prototype.removeProcessor=function(){return $.prototype.removeProcessor.apply(this,arguments)},z.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},z.prototype.setPriority=function(G){return $.prototype.setPriority.call(this,G)},z}(oe(H));function ue($){if("auto"===$._clientTrackSwitchOffControl){var z=$._getAllAttachedElements().filter(function(Ae){return!$._invisibleElements.has(Ae)});!0==($._getAllAttachedElements().filter(function(Ae){return $._elToPipWindows.has(Ae)}).length>0||"visible"===document.visibilityState&&z.length>0)?($._turnOffTimer.clear(),$._setRenderHint({enabled:!0})):$._turnOffTimer.isSet||$._turnOffTimer.start()}}function le($){if("auto"===$._contentPreferencesMode){var z=$._getAllAttachedElements().filter(function(me){return!$._invisibleElements.has(me)}),G=$._getAllAttachedElements().map(function(me){var ce=$._elToPipWindows.get(me);return ce?{clientHeight:ce.height,clientWidth:ce.width}:{clientHeight:0,clientWidth:0}}),ae=z.concat(G);if(ae.length>0){var Te=te(ae.sort(function(me,ce){return ce.clientHeight+ce.clientWidth-me.clientHeight-me.clientWidth-1}),1)[0];$._setRenderHint({renderDimensions:{height:Te.clientHeight,width:Te.clientWidth}})}}}we.exports=J},1768:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M,P)||this}return U(j,H),j.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},j}(Y(1521));we.exports=oe},808:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=this&&this.__read||function(j,M){var P="function"==typeof Symbol&&j[Symbol.iterator];if(!P)return j;var F,se,x=P.call(j),J=[];try{for(;(void 0===M||M-- >0)&&!(F=x.next()).done;)J.push(F.value)}catch(ue){se={error:ue}}finally{try{F&&!F.done&&(P=x.return)&&P.call(x)}finally{if(se)throw se.error}}return J},H=function(j){function M(P){var x=j.call(this,P.id,P)||this;return Object.defineProperties(x,{_clones:{value:new Set},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{get:function(){return!!this._clones.size}}}),x}return U(M,j),M.prototype.clone=function(){var P=new M(this.track.clone());return this._clones.add(P),P},M.prototype.removeClone=function(P){this._clones.delete(P)},M.prototype.setMediaStreamTrack=function(P){var x=this,F=Array.from(this._clones),J=Array.from(this._senders);return Promise.all(F.map(function(se){return se.setMediaStreamTrack(P.clone())}).concat(J.map(function(se){return x._replaceTrack(se,P)}))).finally(function(){x._track=P})},M.prototype.addSender=function(P,x){return this._senders.add(P),x&&this._senderToPublisherHintCallbacks.set(P,x),this},M.prototype.removeSender=function(P){return this._senders.delete(P),this._senderToPublisherHintCallbacks.delete(P),this},M.prototype.setPublisherHint=function(P){var F=te(Array.from(this._senderToPublisherHintCallbacks.values()),1)[0];return F?F(P):Promise.resolve("COULD_NOT_APPLY_HINT")},M.prototype._replaceTrack=function(P,x){var F=this;return P.replaceTrack(x).then(function(J){return F.setPublisherHint(null).catch(function(){}),F.emit("replaced"),J})},M}(Y(1639));we.exports=H},9222:function(we,Oe,Y){"use strict";var J,U=this&&this.__extends||(J=function(se,ue){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,$){le.__proto__=$}||function(le,$){for(var z in $)Object.prototype.hasOwnProperty.call($,z)&&(le[z]=$[z])})(se,ue)},function(se,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function le(){this.constructor=se}J(se,ue),se.prototype=null===ue?Object.create(ue):(le.prototype=ue.prototype,new le)}),te=Y(133),oe=Y(9739),H=oe.buildLogLevels,j=oe.valueToJSON,M=Y(8701).DEFAULT_LOG_LEVEL,P=Y(1458),x=0,F=function(J){function se(ue,le,$){var z=J.call(this)||this;$=Object.assign({logLevel:M},$);var G=H($.logLevel);return Object.defineProperties(z,{_instanceId:{value:x++},_log:{value:$.log?$.log.createLog("default",z):new P("default",z,G,$.loggerName)},trackName:{enumerable:!0,value:ue},trackSid:{enumerable:!0,value:le}}),z}return U(se,J),se.prototype.toJSON=function(){return j(this)},se.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},se}(te);we.exports=F},1639:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,P.kind)||this;return Object.defineProperties(x,{_track:{value:P,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),x}return U(j,H),j.prototype.stop=function(){this.track.stop(),H.prototype.stop.call(this)},j}(Y(4605));we.exports=oe},9062:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(9069).EventEmitter,oe=Y(8701).DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,H=function(j){function M(P){var x=j.call(this)||this;return Object.defineProperties(x,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:P},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),x.on("add",function(F){x._lastStatsSaveTime=Date.now(),x._lastStatsPublishTime=Date.now(),x._processorInfo=F,x._stats=[],x._reemitEvent("add",x._getEventData())}),x.on("remove",function(){var F=x._getEventData();x._lastStatsSaveTime=null,x._lastStatsPublishTime=null,x._processorInfo=null,x._stats=null,x._reemitEvent("remove",F)}),x.on("start",function(){x._reemitEvent("start",x._getEventData())}),x.on("stop",function(F){x._reemitEvent("stop",Object.assign({message:F},x._getEventData()))}),x.on("stats",function(){return x._maybeEmitStats()}),x}return U(M,j),M.prototype._getEventData=function(){if(!this._processorInfo)return{};var P=this._processorInfo,x=P.processor,le={captureHeight:P.captureHeight,captureWidth:P.captureWidth,inputFrameRate:P.inputFrameRate,isRemoteVideoTrack:P.isRemoteVideoTrack};return le.name=x._name||"VideoProcessor",["assetsPath","blurFilterRadius","fitType","isSimdEnabled","maskBlurRadius","version"].forEach(function($){var z=x["_"+$];typeof z<"u"&&(le[$]=z)}),Object.keys(le).forEach(function($){var z=le[$];"boolean"==typeof z&&(le[$]=z?"true":"false")}),le},M.prototype._maybeEmitStats=function(){if(this._stats&&this._processorInfo){var P=this._processorInfo.processor._benchmark;if(P){var x=Date.now();if(!(x-this._lastStatsSaveTime<1e3)){var F={outputFrameRate:P.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(ue){F[ue]=P.getAverageDelay(ue)}),this._lastStatsSaveTime=x,this._stats.push(F),!(x-this._lastStatsPublishTime<oe)){this._lastStatsPublishTime=x;var se=this._stats.splice(0).reduce(function(ue,le,$){return Object.keys(F).forEach(function(z){ue[z]||(ue[z]=0),ue[z]=(ue[z]*$+le[z])/($+1)}),ue},{});Object.keys(se).forEach(function(ue){se[ue]=parseFloat(se[ue].toFixed(2))}),this._reemitEvent("stats",Object.assign({},se,this._getEventData()))}}}}},M.prototype._reemitEvent=function(P,x){this._log.debug("VideoProcessor:"+P,x),this.emit("event",{name:P,data:x})},M}(te);we.exports=H},4332:function(we,Oe,Y){"use strict";var P,U=this&&this.__extends||(P=function(x,F){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,se){J.__proto__=se}||function(J,se){for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(J[ue]=se[ue])})(x,F)},function(x,F){if("function"!=typeof F&&null!==F)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function J(){this.constructor=x}P(x,F),x.prototype=null===F?Object.create(F):(J.prototype=F.prototype,new J)}),te=Y(5366),oe=Y(9062),H=Y(8701).DEFAULT_FRAME_RATE,j=function(P){function x(F,J){var se=P.call(this,F,J)||this;return Object.defineProperties(se,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),se._processorEventObserver=new(J.VideoProcessorEventObserver||oe)(se._log),se}return U(x,P),x.prototype._checkIfCanCaptureFrames=function(F){void 0===F&&(F=!1);var J=!0,se="",ue=this.mediaStreamTrack;return ue.enabled||(J=!1,se="MediaStreamTrack is disabled"),"ended"===ue.readyState&&(J=!1,se="MediaStreamTrack is ended"),this.processor||(J=!1,se="VideoProcessor not detected."),!this._attachments.size&&!F&&(J=!1,se="VideoTrack is not publishing and there is no attached element."),se&&this._log.debug(se),{canCaptureFrames:J,message:se}},x.prototype._captureFrames=function(){var F=this;if(this._isCapturing)this._log.debug("Ignoring captureFrames call. Capture is already in progress");else{if(!this._checkIfCanCaptureFrames().canCaptureFrames)return this._isCapturing=!1,void this._log.debug("Cannot capture frames. Ignoring captureFrames call.");this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var se,J=Date.now();this._dummyEl.play().then(function(){var ue=function($){clearTimeout(F._captureTimeoutId);var z=F.mediaStreamTrack.getSettings().frameRate,Ae=Math.floor(1e3/(void 0===z?H:z))-se;(Ae<0||"number"!=typeof se)&&(Ae=0),F._captureTimeoutId=setTimeout($,Ae)},le=function(){var $=F._checkIfCanCaptureFrames();if(!$.canCaptureFrames)return F._isCapturing=!1,F._processorEventObserver.emit("stop",$.message),void F._log.debug("Cannot capture frames. Stopping capturing frames.");J=Date.now();var z=F.mediaStreamTrack.getSettings(),G=z.width,ae=void 0===G?0:G,Ae=z.height,Te=void 0===Ae?0:Ae;F._inputFrame.width!==ae&&(F._inputFrame.width=ae,F._inputFrame.height=Te,F._outputFrame&&(F._outputFrame.width=ae,F._outputFrame.height=Te)),F._inputFrame.getContext("2d").drawImage(F._dummyEl,0,0,ae,Te);var he=null;try{he=F.processor.processFrame(F._inputFrame,F._outputFrame)}catch(Ce){F._log.debug("Exception detected after calling processFrame.",Ce)}(he instanceof Promise?he:Promise.resolve(he)).then(function(){F._outputFrame&&(F.processedTrack.requestFrame(),F._processorEventObserver.emit("stats"))}).finally(function(){se=Date.now()-J,ue(le)})};ue(le)}).catch(function(ue){return F._log.error("Video element cannot be played",{error:ue,track:F})})}},x.prototype._initialize=function(){var F=this;P.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){M(F,F._dummyEl)&&(F.dimensions.width=F._dummyEl.videoWidth,F.dimensions.height=F._dummyEl.videoHeight)},this._dummyEl.onresize=function(){M(F,F._dummyEl)&&(F.dimensions.width=F._dummyEl.videoWidth,F.dimensions.height=F._dummyEl.videoHeight,F.isStarted&&(F._log.debug("Dimensions changed:",F.dimensions),F.emit(x.DIMENSIONS_CHANGED,F)))})},x.prototype._restartProcessor=function(){var F=this.processor;F&&(this.removeProcessor(F),this.addProcessor(F))},x.prototype._start=function(F){return this.dimensions.width=F.videoWidth,this.dimensions.height=F.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(x.DIMENSIONS_CHANGED,this),P.prototype._start.call(this,F)},x.prototype.addProcessor=function(F){var J=this;if("function"!=typeof OffscreenCanvas)return this._log.warn("Adding a VideoProcessor is not supported in this browser.");if(!F||"function"!=typeof F.processFrame)throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",F),this._unmuteHandler||(this._unmuteHandler=function(){J._log.debug("mediaStreamTrack unmuted"),J.processedTrack.muted&&(J._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),J._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler));var se=this.mediaStreamTrack.getSettings(),ue=se.width,le=void 0===ue?0:ue,$=se.height,z=void 0===$?0:$,G=se.frameRate,ae=void 0===G?H:G;return this._inputFrame=new OffscreenCanvas(le,z),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=le,this._outputFrame.height=z,this.processedTrack=this._outputFrame.captureStream(0).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=F,this._processorEventObserver.emit("add",{processor:F,captureHeight:z,captureWidth:le,inputFrameRate:ae,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack")}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},x.prototype.attach=function(){var F=P.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),F},x.prototype.detach=function(){return P.prototype.detach.apply(this,arguments)},x.prototype.removeProcessor=function(F){if(!F)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(F!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",F),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame.getContext("2d").clearRect(0,0,this._inputFrame.width,this._inputFrame.height),this._outputFrame.getContext("2d").clearRect(0,0,this._outputFrame.width,this._outputFrame.height),this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},x}(te);function M(P,x){return P.dimensions.width!==x.videoWidth||P.dimensions.height!==x.videoHeight}j.DIMENSIONS_CHANGED="dimensionsChanged",we.exports=j},4621:function(we,Oe,Y){"use strict";var J,U=this&&this.__extends||(J=function(se,ue){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,$){le.__proto__=$}||function(le,$){for(var z in $)Object.prototype.hasOwnProperty.call($,z)&&(le[z]=$[z])})(se,ue)},function(se,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function le(){this.constructor=se}J(se,ue),se.prototype=null===ue?Object.create(ue):(le.prototype=ue.prototype,new le)}),te=this&&this.__read||function(J,se){var ue="function"==typeof Symbol&&J[Symbol.iterator];if(!ue)return J;var $,G,le=ue.call(J),z=[];try{for(;(void 0===se||se-- >0)&&!($=le.next()).done;)z.push($.value)}catch(ae){G={error:ae}}finally{try{$&&!$.done&&(ue=le.return)&&ue.call(le)}finally{if(G)throw G.error}}return z},oe=Y(9069).EventEmitter,H=Y(8701),j=H.DEFAULT_NQ_LEVEL_LOCAL,M=H.DEFAULT_NQ_LEVEL_REMOTE,P=H.MAX_NQ_LEVEL,x=Y(9739).inRange,F=function(J){function se(ue){var le=J.call(this)||this;return ue=Object.assign({local:j,remote:M},ue),Object.defineProperties(le,{local:{value:x(ue.local,j,P)?ue.local:j,writable:!0},remote:{value:x(ue.remote,M,P)?ue.remote:M,writable:!0}}),le}return U(se,J),se.prototype.update=function(ue){var le=this;ue=Object.assign({local:this.local,remote:this.remote},ue),[["local",j,3],["remote",M,3]].forEach(function($){var z=te($,3),G=z[0],ae=z[1];le[G]="number"==typeof ue[G]&&x(ue[G],ae,z[2])?ue[G]:ae})},se}(oe);we.exports=F},9218:function(we,Oe,Y){"use strict";var Ae,U=this&&this.__extends||(Ae=function(Te,he){return(Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ce,ye){Ce.__proto__=ye}||function(Ce,ye){for(var me in ye)Object.prototype.hasOwnProperty.call(ye,me)&&(Ce[me]=ye[me])})(Te,he)},function(Te,he){if("function"!=typeof he&&null!==he)throw new TypeError("Class extends value "+String(he)+" is not a constructor or null");function Ce(){this.constructor=Te}Ae(Te,he),Te.prototype=null===he?Object.create(he):(Ce.prototype=he.prototype,new Ce)}),te=this&&this.__read||function(Ae,Te){var he="function"==typeof Symbol&&Ae[Symbol.iterator];if(!he)return Ae;var ye,ce,Ce=he.call(Ae),me=[];try{for(;(void 0===Te||Te-- >0)&&!(ye=Ce.next()).done;)me.push(ye.value)}catch(pe){ce={error:pe}}finally{try{ye&&!ye.done&&(he=Ce.return)&&he.call(Ce)}finally{if(ce)throw ce.error}}return me},oe=this&&this.__spreadArray||function(Ae,Te){for(var he=0,Ce=Te.length,ye=Ae.length;he<Ce;he++,ye++)Ae[ye]=Te[he];return Ae},H=Y(133),j=Y(8797),M=Y(8661),P=Y(5606),x=Y(8459),F=Y(1629),J=Y(1768),se=Y(9739),ue=0,le=function(Ae){function Te(he,Ce){var ye=Ae.call(this)||this,me=function $(Ae){var Te=Ae.map(function(me){return[me.id,me]}),he=Te.filter(function(me){return"audio"===me[1].kind}),Ce=Te.filter(function(me){return"video"===me[1].kind}),ye=Te.filter(function(me){return"data"===me[1].kind});return{audioTracks:he,dataTracks:ye,tracks:Te,videoTracks:Ce}}((Ce=Object.assign({RemoteAudioTrack:j,RemoteAudioTrackPublication:M,RemoteDataTrack:P,RemoteDataTrackPublication:x,RemoteVideoTrack:F,RemoteVideoTrackPublication:J,tracks:[]},Ce)).tracks),ce=Ce.log.createLog("default",ye),pe=new Map(me.audioTracks),be=new Map(me.dataTracks),Fe=new Map(me.tracks),xe=new Map(me.videoTracks);return Object.defineProperties(ye,{_RemoteAudioTrack:{value:Ce.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:Ce.RemoteAudioTrackPublication},_RemoteDataTrack:{value:Ce.RemoteDataTrack},_RemoteDataTrackPublication:{value:Ce.RemoteDataTrackPublication},_RemoteVideoTrack:{value:Ce.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:Ce.RemoteVideoTrackPublication},_audioTracks:{value:pe},_dataTracks:{value:be},_instanceId:{value:++ue},_clientTrackSwitchOffControl:{value:Ce.clientTrackSwitchOffControl},_contentPreferencesMode:{value:Ce.contentPreferencesMode},_log:{value:ce},_signaling:{value:he},_tracks:{value:Fe},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:xe},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return he.identity}},networkQualityLevel:{enumerable:!0,get:function(){return he.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return he.networkQualityStats}},sid:{enumerable:!0,get:function(){return he.sid}},state:{enumerable:!0,get:function(){return he.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),ye._tracks.forEach(G.bind(null,ye)),he.on("networkQualityLevelChanged",function(){return ye.emit("networkQualityLevelChanged",ye.networkQualityLevel,ye.networkQualityStats&&(ye.networkQualityStats.audio||ye.networkQualityStats.video)?ye.networkQualityStats:null)}),function z(Ae,Te){var he=Ae._log;"disconnected"!==Ae.state&&Te.on("stateChanged",function Ce(ye){he.debug("Transitioned to state:",ye),Ae.emit(ye,Ae),"disconnected"===ye&&(he.debug("Removing Track event reemitters"),Te.removeListener("stateChanged",Ce),Ae._tracks.forEach(function(me){var ce=Ae._trackEventReemitters.get(me.id);me&&ce&&ce.forEach(function(pe,be){me.removeListener(be,pe)})}),Te.tracks.forEach(function(me){var ce=Ae._tracks.get(me.id),pe=Ae._trackEventReemitters.get(me.id);ce&&pe&&pe.forEach(function(be,Fe){ce.removeListener(Fe,be)})}),Ae._trackEventReemitters.clear(),Ae.tracks.forEach(function(me){Ae._trackPublicationEventReemitters.get(me.trackSid).forEach(function(ce,pe){me.removeListener(pe,ce)})}),Ae._trackPublicationEventReemitters.clear())})}(ye,he),ce.info("Created a new Participant"+(ye.identity?": "+ye.identity:"")),ye}return U(Te,Ae),Te.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},Te.prototype._getTrackPublicationEvents=function(){return[]},Te.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},Te.prototype._addTrack=function(he,Ce){var ye=this._log;return this._tracks.has(Ce)?null:(this._tracks.set(Ce,he),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[he.kind].set(Ce,he),G(this,he,Ce),ye.info("Added a new "+se.trackClass(he)+":",Ce),ye.debug(se.trackClass(he)+":",he),he)},Te.prototype._addTrackPublication=function(he){var Ce=this._log;return this.tracks.has(he.trackSid)?null:(this.tracks.set(he.trackSid,he),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[he.kind].set(he.trackSid,he),function ae(Ae,Te){var he=new Map;"disconnected"!==Ae.state&&(Ae._getTrackPublicationEvents().forEach(function(Ce){var ye=te(Ce,2),me=ye[0],ce=ye[1];he.set(me,function(){for(var pe=[],be=0;be<arguments.length;be++)pe[be]=arguments[be];Ae.emit.apply(Ae,oe(oe([ce],te(pe)),[Te]))}),Te.on(me,he.get(me))}),Ae._trackPublicationEventReemitters.set(Te.trackSid,he))}(this,he),Ce.info("Added a new "+se.trackPublicationClass(he)+":",he.trackSid),Ce.debug(se.trackPublicationClass(he)+":",he),he)},Te.prototype._handleTrackSignalingEvents=function(){var Ce=this._log,ye=this._clientTrackSwitchOffControl,me=this._contentPreferencesMode,ce=this;if("disconnected"!==this.state){var pe=this._RemoteAudioTrack,be=this._RemoteAudioTrackPublication,Fe=this._RemoteVideoTrack,xe=this._RemoteVideoTrackPublication,Ue=this._RemoteDataTrack,qe=this._RemoteDataTrackPublication,Je=this._signaling;Je.on("trackAdded",Pe),Je.on("trackRemoved",Mt),Je.tracks.forEach(Pe),Je.on("stateChanged",function We(Be){"disconnected"===Be?(Ce.debug("Removing event listeners"),Je.removeListener("stateChanged",We),Je.removeListener("trackAdded",Pe),Je.removeListener("trackRemoved",Mt)):"connected"===Be&&(Ce.info("reconnected"),setTimeout(function(){return ce.emit("reconnected")},0))})}function Pe(We){var Ge=new(0,{audio:be,data:qe,video:xe}[We.kind])(We,{log:Ce});ce._addTrackPublication(Ge);var Re=We.isSubscribed;Re&&Lt(We),ce._trackSignalingUpdatedEventCallbacks.set(We.sid,function(){if(Re!==We.isSubscribed){if(Re=We.isSubscribed)return void Lt(We);!function yt(We){var Be=te(Array.from(ce._tracks.entries()).find(function(Ot){return te(Ot,2)[1].sid===We.sid}),2),Ge=Be[0],Re=Be[1],Xe=ce.tracks.get(We.sid);Re&&ce._removeTrack(Re,Xe,Ge)}(We)}}),We.on("updated",ce._trackSignalingUpdatedEventCallbacks.get(We.sid))}function Mt(We){We.isSubscribed&&We.setTrackTransceiver(null);var Be=ce._trackSignalingUpdatedEventCallbacks.get(We.sid);Be&&(We.removeListener("updated",Be),ce._trackSignalingUpdatedEventCallbacks.delete(We.sid));var Ge=ce.tracks.get(We.sid);Ge&&ce._removeTrackPublication(Ge)}function Lt(We){var Be=We.isEnabled,Ge=We.name,Re=We.kind,Xe=We.sid,Ot=We.trackTransceiver,Kt=We.isSwitchedOff,Tt={audio:pe,video:Fe,data:Ue}[Re],zt=ce.tracks.get(Xe);if(Tt&&Re===Ot.kind){var Qn={log:Ce,name:Ge,clientTrackSwitchOffControl:ye,contentPreferencesMode:me},Sr="data"===Re?new Tt(Xe,Ot,Qn):new Tt(Xe,Ot,Be,Kt,function(_r){return Je.updateSubscriberTrackPriority(Xe,_r)},function(_r){We.isSubscribed&&Je.updateTrackRenderHint(Xe,_r)},Qn);ce._addTrack(Sr,zt,Ot.id)}}},Te.prototype._removeTrack=function(he,Ce){if(!this._tracks.has(Ce))return null;this._tracks.delete(Ce),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[he.kind].delete(Ce),(this._trackEventReemitters.get(Ce)||new Map).forEach(function(pe,be){he.removeListener(be,pe)});var ce=this._log;return ce.info("Removed a "+se.trackClass(he)+":",Ce),ce.debug(se.trackClass(he)+":",he),he},Te.prototype._removeTrackPublication=function(he){if(!(he=this.tracks.get(he.trackSid)))return null;this.tracks.delete(he.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[he.kind].delete(he.trackSid),(this._trackPublicationEventReemitters.get(he.trackSid)||new Map).forEach(function(ce,pe){he.removeListener(pe,ce)});var me=this._log;return me.info("Removed a "+se.trackPublicationClass(he)+":",he.trackSid),me.debug(se.trackPublicationClass(he)+":",he),he},Te.prototype.toJSON=function(){return se.valueToJSON(this)},Te}(H);function G(Ae,Te,he){var Ce=new Map;"disconnected"!==Ae.state&&(Ae._getTrackEvents().forEach(function(ye){var me=ye[0],ce=ye[1];Ce.set(me,function(){var pe=[ce].concat([].slice.call(arguments));return Ae.emit.apply(Ae,oe([],te(pe)))}),Te.on(me,Ce.get(me))}),Ae._trackEventReemitters.set(he,Ce))}we.exports=le},9305:function(we,Oe){"use strict";var Y=this&&this.__awaiter||function(P,x,F,J){return new(F||(F=Promise))(function(ue,le){function $(ae){try{G(J.next(ae))}catch(Ae){le(Ae)}}function z(ae){try{G(J.throw(ae))}catch(Ae){le(Ae)}}function G(ae){ae.done?ue(ae.value):function se(ue){return ue instanceof F?ue:new F(function(le){le(ue)})}(ae.value).then($,z)}G((J=J.apply(P,x||[])).next())})},U=this&&this.__generator||function(P,x){var J,se,ue,le,F={label:0,sent:function(){if(1&ue[0])throw ue[1];return ue[1]},trys:[],ops:[]};return le={next:$(0),throw:$(1),return:$(2)},"function"==typeof Symbol&&(le[Symbol.iterator]=function(){return this}),le;function $(G){return function(ae){return function z(G){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,se&&(ue=2&G[0]?se.return:G[0]?se.throw||((ue=se.return)&&ue.call(se),0):se.next)&&!(ue=ue.call(se,G[1])).done)return ue;switch(se=0,ue&&(G=[2&G[0],ue.value]),G[0]){case 0:case 1:ue=G;break;case 4:return F.label++,{value:G[1],done:!1};case 5:F.label++,se=G[1],G=[0];continue;case 7:G=F.ops.pop(),F.trys.pop();continue;default:if(!(ue=(ue=F.trys).length>0&&ue[ue.length-1])&&(6===G[0]||2===G[0])){F=0;continue}if(3===G[0]&&(!ue||G[1]>ue[0]&&G[1]<ue[3])){F.label=G[1];break}if(6===G[0]&&F.label<ue[1]){F.label=ue[1],ue=G;break}if(ue&&F.label<ue[2]){F.label=ue[2],F.ops.push(G);break}ue[2]&&F.ops.pop(),F.trys.pop();continue}G=x.call(P,F)}catch(ae){G=[6,ae],se=0}finally{J=ue=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}([G,ae])}}},te=this&&this.__read||function(P,x){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var se,le,J=F.call(P),ue=[];try{for(;(void 0===x||x-- >0)&&!(se=J.next()).done;)ue.push(se.value)}catch($){le={error:$}}finally{try{se&&!se.done&&(F=J.return)&&F.call(J)}finally{if(le)throw le.error}}return ue};function oe(P,x,F,J){var se=[];return P.forEach(function(ue){(0===J.length||J.includes(ue.type))&&(0===F.length||F.includes(ue.kind))&&"number"==typeof ue[x]&&se.push(ue[x])}),se}function j(P){return[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}].reduce(function(F,J){var se=[J.key];J.altKeys&&(se=se.concat(J.altKeys));var ue=se.find(function(le){return le in P});return ue&&typeof P[ue]===J.type&&(F[J.key]=P[ue]),F},{})}Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.getCombinedConnectionStats=void 0,Oe.getCombinedConnectionStats=function H(P){var x=P.publisher,F=P.subscriber;return Y(this,void 0,void 0,function(){var J,se,ue,le,$,z,G,ae,Ae,Te,he,Ce,ye,me,ce;return U(this,function(pe){switch(pe.label){case 0:return[4,Promise.all([x,F].map(function(be){return be.getStats()}))];case 1:return J=te.apply(void 0,[pe.sent(),2]),se=J[0],le=oe(ue=J[1],"timestamp",["audio"],["inbound-rtp"]),$=le.length>0?le[0]:0,z=oe(ue,"jitter",["audio"],["inbound-rtp"]).reduce(function(be,Fe){return Math.max(be,Fe)},0),G=oe(ue,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(be,Fe){return be+Fe},0),ae=oe(ue,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(be,Fe){return be+Fe},0),Ae=oe(se,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(be,Fe){return Math.max(be,Fe)},0),Te=oe(ue,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(be,Fe){return Math.max(be,Fe)},0),he=1e3*(Te||Ae),Ce=oe(se,"bytesSent",[],["candidate-pair"]).reduce(function(be,Fe){return be+Fe},0),ye=oe(ue,"bytesReceived",[],["candidate-pair"]).reduce(function(be,Fe){return be+Fe},0),me=function M(P){var x=null,F=[];P.forEach(function($){"transport"===$.type&&$.selectedCandidatePairId?x=$.selectedCandidatePairId:"candidate-pair"===$.type&&F.push($)});var J=F.find(function($){return $.selected||x&&$.id===x});if(!J)return null;var se=J,ue=P.get(se.localCandidateId),le=P.get(se.remoteCandidateId);return ue&&le?{localCandidate:j(ue),remoteCandidate:j(le)}:null}(ue),ce=[],ue.forEach(function(be){("local-candidate"===be.type||"remote-candidate"===be.type)&&ce.push(j(be))}),[2,{timestamp:$,jitter:z,packets:G,packetsLost:ae,roundTripTime:he,bytesSent:Ce,bytesReceived:ye,selectedIceCandidatePairStats:me,iceCandidateStats:ce}]}})})}},2449:(we,Oe,Y)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.getTurnCredentials=void 0;var U=Y(5330),te=Y(8701).ICE_VERSION,oe=Y(8380),H=oe.createTwilioError,j=oe.SignalingConnectionError,M=Y(9069);Oe.getTurnCredentials=function P(x,F){return new Promise(function(J,se){var ue=new M.EventEmitter,$=new U(F,{networkMonitor:null,eventObserver:ue,helloBody:{edge:"roaming",preflight:!0,token:x,type:"ice",version:te}}),z=!1;$.once("close",function(){z||(z=!0,se(new j))}),$.on("message",function(G){var ae=G.code,Ae=G.message,he=G.type;("iced"===he||"error"===he)&&!z&&(z=!0,"iced"===he?J(G.ice_servers):se(H(ae,Ae)),$.close())})})}},5359:function(we,Oe){"use strict";var Y=this&&this.__read||function(oe,H){var j="function"==typeof Symbol&&oe[Symbol.iterator];if(!j)return oe;var P,F,M=j.call(oe),x=[];try{for(;(void 0===H||H-- >0)&&!(P=M.next()).done;)x.push(P.value)}catch(J){F={error:J}}finally{try{P&&!P.done&&(j=M.return)&&j.call(M)}finally{if(F)throw F.error}}return x},U=this&&this.__spreadArray||function(oe,H){for(var j=0,M=H.length,P=oe.length;j<M;j++,P++)oe[P]=H[j];return oe};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.makeStat=void 0,Oe.makeStat=function te(oe){return oe&&oe.length?{min:Math.min.apply(Math,U([],Y(oe))),max:Math.max.apply(Math,U([],Y(oe))),average:oe.reduce(function(P,x){return P+x},0)/oe.length}:null}},2436:(we,Oe)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.mosToScore=Oe.calculateMOS=void 0;var Y=94.768;Oe.calculateMOS=function U(oe,H,j){var M=oe+2*H+10,P=0;switch(!0){case M<160:P=Y-M/40;break;case M<1e3:P=Y-(M-120)/10}return 1+.035*(P=1==j<=P/2.5?Math.max(P-2.5*j,6.52):0)+7e-6*P*(P-60)*(100-P)},Oe.mosToScore=function te(oe){return oe?oe>4.2?5:oe>4?4:oe>3.6?3:oe>3?2:1:0}},8682:function(we,Oe,Y){"use strict";var Lt,U=this&&this.__extends||(Lt=function(yt,We){return(Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Be,Ge){Be.__proto__=Ge}||function(Be,Ge){for(var Re in Ge)Object.prototype.hasOwnProperty.call(Ge,Re)&&(Be[Re]=Ge[Re])})(yt,We)},function(yt,We){if("function"!=typeof We&&null!==We)throw new TypeError("Class extends value "+String(We)+" is not a constructor or null");function Be(){this.constructor=yt}Lt(yt,We),yt.prototype=null===We?Object.create(We):(Be.prototype=We.prototype,new Be)}),te=this&&this.__assign||function(){return te=Object.assign||function(Lt){for(var yt,We=1,Be=arguments.length;We<Be;We++)for(var Ge in yt=arguments[We])Object.prototype.hasOwnProperty.call(yt,Ge)&&(Lt[Ge]=yt[Ge]);return Lt},te.apply(this,arguments)},oe=this&&this.__awaiter||function(Lt,yt,We,Be){return new(We||(We=Promise))(function(Re,Xe){function Ot(zt){try{Tt(Be.next(zt))}catch(Qn){Xe(Qn)}}function Kt(zt){try{Tt(Be.throw(zt))}catch(Qn){Xe(Qn)}}function Tt(zt){zt.done?Re(zt.value):function Ge(Re){return Re instanceof We?Re:new We(function(Xe){Xe(Re)})}(zt.value).then(Ot,Kt)}Tt((Be=Be.apply(Lt,yt||[])).next())})},H=this&&this.__generator||function(Lt,yt){var Be,Ge,Re,Xe,We={label:0,sent:function(){if(1&Re[0])throw Re[1];return Re[1]},trys:[],ops:[]};return Xe={next:Ot(0),throw:Ot(1),return:Ot(2)},"function"==typeof Symbol&&(Xe[Symbol.iterator]=function(){return this}),Xe;function Ot(Tt){return function(zt){return function Kt(Tt){if(Be)throw new TypeError("Generator is already executing.");for(;We;)try{if(Be=1,Ge&&(Re=2&Tt[0]?Ge.return:Tt[0]?Ge.throw||((Re=Ge.return)&&Re.call(Ge),0):Ge.next)&&!(Re=Re.call(Ge,Tt[1])).done)return Re;switch(Ge=0,Re&&(Tt=[2&Tt[0],Re.value]),Tt[0]){case 0:case 1:Re=Tt;break;case 4:return We.label++,{value:Tt[1],done:!1};case 5:We.label++,Ge=Tt[1],Tt=[0];continue;case 7:Tt=We.ops.pop(),We.trys.pop();continue;default:if(!(Re=(Re=We.trys).length>0&&Re[Re.length-1])&&(6===Tt[0]||2===Tt[0])){We=0;continue}if(3===Tt[0]&&(!Re||Tt[1]>Re[0]&&Tt[1]<Re[3])){We.label=Tt[1];break}if(6===Tt[0]&&We.label<Re[1]){We.label=Re[1],Re=Tt;break}if(Re&&We.label<Re[2]){We.label=Re[2],We.ops.push(Tt);break}Re[2]&&We.ops.pop(),We.trys.pop();continue}Tt=yt.call(Lt,We)}catch(zt){Tt=[6,zt],Ge=0}finally{Be=Re=0}if(5&Tt[0])throw Tt[1];return{value:Tt[0]?Tt[1]:void 0,done:!0}}([Tt,zt])}}};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.runPreflight=Oe.PreflightTest=void 0;var j=Y(8701),M=Y(1567),P=Y(2436),x=Y(9305),F=Y(2449),J=Y(5359),se=Y(5237),ue=Y(3519),le=Y(9739),$=Y(8701).WS_SERVER,z=Y(1458),G=Y(133),ae=Y(8218),Ae=Y(8606),Te=Y(3744),he=Y(8066),Ce=he.createSID,ye=he.sessionSID,me=Y(8380),ce=me.SignalingConnectionTimeoutError,pe=me.MediaConnectionError;function Ue(Lt){return null!==Lt&&typeof Lt<"u"}var qe=0,Je=function(Lt){function yt(We,Be){var Ge=Lt.call(this)||this;Ge._testTiming=new M.Timer,Ge._dtlsTiming=new M.Timer,Ge._iceTiming=new M.Timer,Ge._peerConnectionTiming=new M.Timer,Ge._mediaTiming=new M.Timer,Ge._connectTiming=new M.Timer,Ge._sentBytesMovingAverage=new ae,Ge._packetLossMovingAverage=new ae,Ge._progressEvents=[],Ge._receivedBytesMovingAverage=new ae;var Xe=Be.environment,Ot=void 0===Xe?"prod":Xe,Kt=Be.region,zt=Be.duration,Qn=void 0===zt?1e4:zt,Ht=Be.wsServer||$(Ot,void 0===Kt?"gll":Kt);return Ge._log=new z("default",Ge,j.DEFAULT_LOG_LEVEL,j.DEFAULT_LOGGER_NAME),Ge._testDuration=Qn,Ge._instanceId=qe++,Ge._testTiming.start(),Ge._runPreflightTest(We,Ot,Ht),Ge}return U(yt,Lt),yt.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},yt.prototype.stop=function(){this._stopped=!0},yt.prototype._generatePreflightReport=function(We){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:J.makeStat(We?.jitter),rtt:J.makeStat(We?.rtt),packetLoss:J.makeStat(We?.packetLoss)},selectedIceCandidatePairStats:We?We.selectedIceCandidatePairStats:null,iceCandidateStats:We?We.iceCandidateStats:[],progressEvents:this._progressEvents,mos:J.makeStat(We?.mos)}},yt.prototype._executePreflightStep=function(We,Be,Ge){return oe(this,void 0,void 0,function(){var Re,Xe,Ot,Kt;return H(this,function(zt){switch(zt.label){case 0:if(this._log.debug("Executing step: ",We),Re=this._testDuration+1e4,this._stopped)throw new Error("stopped");Xe=Promise.resolve().then(Be),Ot=null,Kt=new Promise(function(Qn,Ht){Ot=setTimeout(function(){Ht(Ge||new Error(We+" timeout."))},Re)}),zt.label=1;case 1:return zt.trys.push([1,,3,4]),[4,Promise.race([Kt,Xe])];case 2:return[2,zt.sent()];case 3:return null!==Ot&&clearTimeout(Ot),[7];case 4:return[2]}})})},yt.prototype._collectNetworkTimings=function(We){var Be=this;return new Promise(function(Ge){var Re;We.addEventListener("iceconnectionstatechange",function(){"checking"===We.iceConnectionState&&Be._iceTiming.start(),"connected"===We.iceConnectionState&&(Be._iceTiming.stop(),Be._updateProgress("iceConnected"),(!Re||Re&&"connected"===Re.state)&&Ge())}),We.addEventListener("connectionstatechange",function(){"connecting"===We.connectionState&&Be._peerConnectionTiming.start(),"connected"===We.connectionState&&(Be._peerConnectionTiming.stop(),Be._updateProgress("peerConnectionConnected"))});var Ot=We.getSenders().map(function(Kt){return Kt.transport}).find(Ue);typeof Ot<"u"&&(Re=Ot).addEventListener("statechange",function(){"connecting"===Re.state&&Be._dtlsTiming.start(),"connected"===Re.state&&(Be._dtlsTiming.stop(),Be._updateProgress("dtlsConnected"),"connected"===We.iceConnectionState&&Ge())})})},yt.prototype._setupInsights=function(We){var Ge=We.environment,Xe=We.realm,Tt=new Te(We.token,j.SDK_NAME,j.SDK_VERSION,void 0===Ge?j.DEFAULT_ENVIRONMENT:Ge,void 0===Xe?j.DEFAULT_REALM:Xe,{});Tt.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var zt=new Ae(Tt,Date.now(),this._log),Qn=void 0;return{reportToInsights:function(Ht){var br,Sr,_r=Ht.report,fr=_r.stats.jitter||Qn,pr=_r.stats.rtt||Qn,ki=_r.stats.packetLoss||Qn,$n=_r.mos||Qn,Mi=new Map;_r.iceCandidateStats.forEach(function(Nt){if(Nt.candidateType&&Nt.protocol){var Xt=Mi.get(Nt.candidateType)||[];Xt.indexOf(Nt.protocol)<0&&Xt.push(Nt.protocol),Mi.set(Nt.candidateType,Xt)}});var Js=JSON.stringify(Object.fromEntries(Mi)),Et={name:"report",group:"preflight",level:_r.error?"error":"info",payload:{sessionSID:ye,preflightSID:Ce("PF"),progressEvents:JSON.stringify(_r.progressEvents),testTiming:_r.testTiming,dtlsTiming:_r.networkTiming.dtls,iceTiming:_r.networkTiming.ice,peerConnectionTiming:_r.networkTiming.peerConnection,connectTiming:_r.networkTiming.connect,mediaTiming:_r.networkTiming.media,selectedLocalCandidate:null===(br=_r.selectedIceCandidatePairStats)||void 0===br?void 0:br.localCandidate,selectedRemoteCandidate:null===(Sr=_r.selectedIceCandidatePairStats)||void 0===Sr?void 0:Sr.remoteCandidate,iceCandidateStats:Js,jitterStats:fr,rttStats:pr,packetLossStats:ki,mosStats:$n,error:_r.error}};zt.emit("event",Et),setTimeout(function(){return Tt.disconnect()},2e3)}}},yt.prototype._runPreflightTest=function(We,Be,Ge){return oe(this,void 0,void 0,function(){var Re,Xe,Ot,Kt,Tt,zt,Qn,Ht,br,Sr,_r,fr,pr=this;return H(this,function(ki){switch(ki.label){case 0:Re=[],Xe=[],Ot=this._setupInsights({token:We,environment:Be}).reportToInsights,ki.label=1;case 1:return ki.trys.push([1,8,9,10]),Kt=[],[4,this._executePreflightStep("Acquire media",function(){return[se.syntheticAudio(),ue.syntheticVideo({width:640,height:480})]})];case 2:return Re=ki.sent(),this._updateProgress("mediaAcquired"),this.emit("debug",{localTracks:Re}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return F.getTurnCredentials(We,Ge)},new ce)];case 3:return Tt=ki.sent(),this._connectTiming.stop(),this._updateProgress("connected"),zt=new RTCPeerConnection({iceServers:Tt,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),Qn=new RTCPeerConnection({iceServers:Tt,bundlePolicy:"max-bundle"}),Xe.push(zt),Xe.push(Qn),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return oe(pr,void 0,void 0,function(){var $n,Mi,Js,Et;return H(this,function(Nt){switch(Nt.label){case 0:return zt.addEventListener("icecandidate",function(Xt){return Xt.candidate&&Qn.addIceCandidate(Xt.candidate)}),Qn.addEventListener("icecandidate",function(Xt){return Xt.candidate&&zt.addIceCandidate(Xt.candidate)}),Re.forEach(function(Xt){return zt.addTrack(Xt)}),$n=new Promise(function(Xt){var Ke=[];Qn.addEventListener("track",function(Me){Ke.push(Me.track),Ke.length===Re.length&&Xt(Ke)})}),[4,zt.createOffer()];case 1:return Mi=Nt.sent(),[4,zt.setLocalDescription(Js=Mi)];case 2:return Nt.sent(),[4,Qn.setRemoteDescription(Js)];case 3:return Nt.sent(),[4,Qn.createAnswer()];case 4:return Et=Nt.sent(),[4,Qn.setLocalDescription(Et)];case 5:return Nt.sent(),[4,zt.setRemoteDescription(Et)];case 6:return Nt.sent(),[4,this._collectNetworkTimings(zt)];case 7:return Nt.sent(),[2,$n]}})})},new pe)];case 4:return Ht=ki.sent(),this.emit("debug",{remoteTracks:Ht}),Ht.forEach(function($n){$n.addEventListener("ended",function(){return pr._log.warn($n.kind+":ended")}),$n.addEventListener("mute",function(){return pr._log.warn($n.kind+":muted")}),$n.addEventListener("unmute",function(){return pr._log.warn($n.kind+":unmuted")})}),this._updateProgress("mediaSubscribed"),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function($n){var Mi=document.createElement("video");Mi.autoplay=!0,Mi.playsInline=!0,Mi.muted=!0,Mi.srcObject=new MediaStream(Ht),Kt.push(Mi),pr.emit("debugElement",Mi),Mi.oncanplay=$n})},new pe)];case 5:return ki.sent(),this._mediaTiming.stop(),this._updateProgress("mediaStarted"),[4,this._executePreflightStep("Collect stats for duration",function(){return pr._collectRTCStatsForDuration(pr._testDuration,{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]},zt,Qn)})];case 6:return br=ki.sent(),[4,this._executePreflightStep("Generate report",function(){return pr._generatePreflightReport(br)})];case 7:return Sr=ki.sent(),Ot({report:Sr}),this.emit("completed",Sr),[3,10];case 8:return _r=ki.sent(),fr=this._generatePreflightReport(),Ot({report:te(te({},fr),{error:_r?.toString()})}),this.emit("failed",_r,fr),[3,10];case 9:return Xe.forEach(function($n){return $n.close()}),Re.forEach(function($n){return $n.stop()}),[7];case 10:return[2]}})})},yt.prototype._collectRTCStats=function(We,Be,Ge){return oe(this,void 0,void 0,function(){var Re,Xe,Ot,Kt,Tt,zt,Qn,Ht,br,Sr,_r,fr,pr,ki;return H(this,function($n){switch($n.label){case 0:return[4,x.getCombinedConnectionStats({publisher:Be,subscriber:Ge})];case 1:return Re=$n.sent(),Xe=Re.timestamp,Ot=Re.bytesSent,Kt=Re.bytesReceived,Tt=Re.packets,zt=Re.packetsLost,Qn=Re.roundTripTime,br=Re.selectedIceCandidatePairStats,Sr=Re.iceCandidateStats,_r=We.jitter.length>0,We.jitter.push(Ht=Re.jitter),We.rtt.push(Qn),this._sentBytesMovingAverage.putSample(Ot,Xe),this._receivedBytesMovingAverage.putSample(Kt,Xe),this._packetLossMovingAverage.putSample(zt,Tt),_r&&(We.outgoingBitrate.push(1e3*this._sentBytesMovingAverage.get()*8),We.incomingBitrate.push(1e3*this._receivedBytesMovingAverage.get()*8),fr=this._packetLossMovingAverage.get(),pr=Math.min(100,100*fr),We.packetLoss.push(pr),ki=P.calculateMOS(Qn,Ht,fr),We.mos.push(ki)),We.selectedIceCandidatePairStats||(We.selectedIceCandidatePairStats=br),0===We.iceCandidateStats.length&&(We.iceCandidateStats=Sr),[2]}})})},yt.prototype._collectRTCStatsForDuration=function(We,Be,Ge,Re){return oe(this,void 0,void 0,function(){var Xe,Ot,Kt;return H(this,function(Tt){switch(Tt.label){case 0:return Xe=Date.now(),Ot=Math.min(1e3,We),[4,le.waitForSometime(Ot)];case 1:return Tt.sent(),[4,this._collectRTCStats(Be,Ge,Re)];case 2:return Tt.sent(),(Kt=We-(Date.now()-Xe))>0?[4,this._collectRTCStatsForDuration(Kt,Be,Ge,Re)]:[3,4];case 3:Be=Tt.sent(),Tt.label=4;case 4:return[2,Be]}})})},yt.prototype._updateProgress=function(We){var Be=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:Be,name:We}),this.emit("progress",We)},yt}(G);Oe.PreflightTest=Je,Oe.runPreflight=function Mt(Lt,yt){return void 0===yt&&(yt={}),new Je(Lt,yt)}},5237:(we,Oe,Y)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.syntheticAudio=void 0,Oe.syntheticAudio=function U(){var te=Y(7708),oe={},H=te.getOrCreate(oe),j=H.createOscillator(),M=j.connect(H.createMediaStreamDestination());j.start();var P=M.stream.getAudioTracks()[0],x=P.stop;return P.stop=function(){x.call(P),te.release(oe)},P}},3519:(we,Oe)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.syntheticVideo=void 0,Oe.syntheticVideo=function Y(U){var te=void 0===U?{}:U,oe=te.width,H=void 0===oe?640:oe,j=te.height,M=void 0===j?480:j,P=Object.assign(document.createElement("canvas"),{width:H,height:M}),x=P.getContext("2d");x.fillStyle="green",x.fillRect(0,0,P.width,P.height);var F=!1;requestAnimationFrame(function le(){if(!F){var $=Math.round(255*Math.random()),z=Math.round(255*Math.random()),G=Math.round(255*Math.random()),ae=Math.round(255*Math.random());x.fillStyle="rgba("+$+", "+z+", "+G+", "+ae+")",x.fillRect(Math.random()*H,Math.random()*M,50,50),requestAnimationFrame(le)}});var se=P.captureStream(30).getTracks()[0],ue=se.stop;return se.stop=function(){F=!0,ue.call(se)},se}},1567:(we,Oe)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.Timer=void 0;var Y=function(){function U(){this._end=void 0,this.start()}return U.prototype.start=function(){return this._start=Date.now(),this},U.prototype.stop=function(){return this._end=Date.now(),this},U.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:void 0===this._end?void 0:this._end-this._start}},U}();Oe.Timer=Y},7772:function(we,Oe,Y){"use strict";var M,U=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(F[se]=J[se])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(F.prototype=x.prototype,new F)}),te=this&&this.__read||function(M,P){var x="function"==typeof Symbol&&M[Symbol.iterator];if(!x)return M;var J,ue,F=x.call(M),se=[];try{for(;(void 0===P||P-- >0)&&!(J=F.next()).done;)se.push(J.value)}catch(le){ue={error:le}}finally{try{J&&!J.done&&(x=F.return)&&x.call(F)}finally{if(ue)throw ue.error}}return se},oe=this&&this.__spreadArray||function(M,P){for(var x=0,F=P.length,J=M.length;x<F;x++,J++)M[J]=P[x];return M},j=function(M){function P(){var x=M.call(this)||this;return Object.defineProperties(x,{_queuedEvents:{value:new Map}}),x}return U(P,M),P.prototype.dequeue=function(x){var F=this,J=!0;if(!x)return this._queuedEvents.forEach(function(ue,le){J=this.dequeue(le)&&J},this),J;var se=this._queuedEvents.get(x)||[];return this._queuedEvents.delete(x),se.reduce(function(ue,le){return F.emit.apply(F,oe([],te([x].concat(le))))&&ue},J)},P.prototype.queue=function(){var x=[].slice.call(arguments);if(this.emit.apply(this,oe([],te(x))))return!0;var F=x[0];return this._queuedEvents.has(F)||this._queuedEvents.set(F,[]),this._queuedEvents.get(F).push(x.slice(1)),!1},P}(Y(9069).EventEmitter);we.exports=j},3609:function(we,Oe,Y){"use strict";var M,U=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(F[se]=J[se])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(F.prototype=x.prototype,new F)}),te=this&&this.__read||function(M,P){var x="function"==typeof Symbol&&M[Symbol.iterator];if(!x)return M;var J,ue,F=x.call(M),se=[];try{for(;(void 0===P||P-- >0)&&!(J=F.next()).done;)se.push(J.value)}catch(le){ue={error:le}}finally{try{J&&!J.done&&(x=F.return)&&x.call(F)}finally{if(ue)throw ue.error}}return se},oe=this&&this.__spreadArray||function(M,P){for(var x=0,F=P.length,J=M.length;x<F;x++,J++)M[J]=P[x];return M},j=function(M){function P(x,F){var J=M.call(this,x,F)||this;return J._handleTrackSignalingEvents(),J.once("disconnected",J._unsubscribeTracks.bind(J)),J}return U(P,M),P.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},P.prototype._addTrack=function(x,F,J){return M.prototype._addTrack.call(this,x,J)?(F._subscribed(x),this.emit("trackSubscribed",x,F),x):null},P.prototype._addTrackPublication=function(x){var F=M.prototype._addTrackPublication.call(this,x);return F?(this.emit("trackPublished",F),F):null},P.prototype._getTrackPublicationEvents=function(){return oe(oe([],te(M.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},P.prototype._unsubscribeTracks=function(){var x=this;this.tracks.forEach(function(F){if(F.isSubscribed){var J=F.track;F._unsubscribe(),x.emit("trackUnsubscribed",J,F)}})},P.prototype._removeTrack=function(x,F,J){var se=this._tracks.get(J);return se?(M.prototype._removeTrack.call(this,se,J),F._unsubscribe(),this.emit("trackUnsubscribed",se,F),se):null},P.prototype._removeTrackPublication=function(x){this._signaling.clearTrackHint(x.trackSid);var F=M.prototype._removeTrackPublication.call(this,x);return F?(this.emit("trackUnpublished",F),F):null},P}(Y(9218));we.exports=j},7406:function(we,Oe,Y){"use strict";var $,U=this&&this.__extends||($=function(z,G){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,Ae){ae.__proto__=Ae}||function(ae,Ae){for(var Te in Ae)Object.prototype.hasOwnProperty.call(Ae,Te)&&(ae[Te]=Ae[Te])})(z,G)},function(z,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function ae(){this.constructor=z}$(z,G),z.prototype=null===G?Object.create(G):(ae.prototype=G.prototype,new ae)}),te=this&&this.__read||function($,z){var G="function"==typeof Symbol&&$[Symbol.iterator];if(!G)return $;var Ae,he,ae=G.call($),Te=[];try{for(;(void 0===z||z-- >0)&&!(Ae=ae.next()).done;)Te.push(Ae.value)}catch(Ce){he={error:Ce}}finally{try{Ae&&!Ae.done&&(G=ae.return)&&G.call(ae)}finally{if(he)throw he.error}}return Te},oe=this&&this.__spreadArray||function($,z){for(var G=0,ae=z.length,Ae=$.length;G<ae;G++,Ae++)$[Ae]=z[G];return $},H=Y(133),j=Y(3609),M=Y(7805),P=Y(9739).valueToJSON,x=0,F=function($){function z(G,ae,Ae){var Te=$.call(this)||this,he=Ae.log.createLog("default",Te),Ce=new Map;return Object.defineProperties(Te,{_log:{value:he},_clientTrackSwitchOffControl:{value:Ae.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:Ae.contentPreferencesMode||"disabled"},_instanceId:{value:++x},_options:{value:Ae},_participants:{value:Ce},_signaling:{value:ae},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(ae.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return ae.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:G},name:{enumerable:!0,value:ae.name},participants:{enumerable:!0,value:Ce},sid:{enumerable:!0,value:ae.sid},state:{enumerable:!0,get:function(){return ae.state}},mediaRegion:{enumerable:!0,value:ae.mediaRegion}}),function ue($,z){z.on("updated",function(){var ae=z.isEnabled;$._log.info("Recording "+(ae?"started":"stopped")),$.emit("recording"+(ae?"Started":"Stopped"))})}(Te,ae.recording),function le($,z){var G=$._log;G.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),z.participants.forEach(se.bind(null,$)),G.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),z.on("participantConnected",se.bind(null,$)),z.on("dominantSpeakerChanged",function(){return $.emit("dominantSpeakerChanged",$.dominantSpeaker)}),z.on("stateChanged",function ae(Ae,Te){switch(G.info("Transitioned to state:",Ae),Ae){case"disconnected":$.participants.forEach(function(he){he._unsubscribeTracks()}),$.emit(Ae,$,Te),$.localParticipant.tracks.forEach(function(he){he.unpublish()}),z.removeListener("stateChanged",ae);break;case"reconnecting":setTimeout(function(){return $.emit("reconnecting",Te)},0);break;default:setTimeout(function(){return $.emit("reconnected")},0)}})}(Te,ae),he.info("Created a new Room:",Te.name),he.debug("Initial RemoteParticipants:",Array.from(Te._participants.values())),Te}return U(z,$),z.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},z.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},z.prototype.getStats=function(){var G=this;return this._signaling.getStats().then(function(ae){return Array.from(ae).map(function(Ae){var Te=te(Ae,2),Ce=Te[1];return new M(Te[0],Object.assign({},Ce,{localAudioTrackStats:J(G,Ce.localAudioTrackStats),localVideoTrackStats:J(G,Ce.localVideoTrackStats)}))})})},z.prototype.toJSON=function(){return P(this)},z}(H);function J($,z){var G=$.localParticipant._signaling;return z.reduce(function(ae,Ae){var Te=G.tracks.get(Ae.trackId),he=G.getSender(Te);return he?[Object.assign({},Ae,{trackId:he.id})].concat(ae):ae},[])}function se($,z){var G=$._log,Te=new j(z,{log:G,clientTrackSwitchOffControl:$._clientTrackSwitchOffControl,contentPreferencesMode:$._contentPreferencesMode});G.info("A new RemoteParticipant connected:",Te),$._participants.set(Te.sid,Te),$.emit("participantConnected",Te);var he=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(Ce){var ye=te(Array.isArray(Ce)?Ce:[Ce,Ce],2),me=ye[0],ce=ye[1];function pe(){var be=[].slice.call(arguments);be.unshift(ce),be.push(Te),$.emit.apply($,oe([],te(be)))}return Te.on(me,pe),[me,pe]});Te.once("disconnected",function(){var ye=$.dominantSpeaker;G.info("RemoteParticipant disconnected:",Te),$._participants.delete(Te.sid),he.forEach(function(me){Te.removeListener(me[0],me[1])}),$.emit("participantDisconnected",Te),Te===ye&&$.emit("dominantSpeakerChanged",$.dominantSpeaker)})}we.exports=F},8043:function(we,Oe,Y){"use strict";var P,U=this&&this.__extends||(P=function(x,F){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,se){J.__proto__=se}||function(J,se){for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(J[ue]=se[ue])})(x,F)},function(x,F){if("function"!=typeof F&&null!==F)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function J(){this.constructor=x}P(x,F),x.prototype=null===F?Object.create(F):(J.prototype=F.prototype,new J)}),te=Y(9285),oe=Y(8343),H=Y(8675),j={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},M=function(P){function x(){return P.call(this,"closed",j)||this}return U(x,P),x.prototype._close=function(F){return this.transition("closing",F),this.transition("closed",F),Promise.resolve(this)},x.prototype._connect=function(F,J,se,ue,le){F.connect("PA00000000000000000000000000000000","test");var z=Promise.resolve(new oe(F,"RM00000000000000000000000000000000",le));return z.cancel=function(){},z},x.prototype._open=function(F){return this.transition("opening",F),this.transition("open",F),Promise.resolve(this)},x.prototype.close=function(){var F=this;return this.bracket("close",function(J){switch(F.state){case"closed":return F;case"open":return F._close(J);default:throw new Error('Unexpected Signaling state "'+F.state+'"')}})},x.prototype.connect=function(F,J,se,ue,le){var $=this;return this.bracket("connect",function z(G){switch($.state){case"closed":return $._open(G).then(z.bind(null,G));case"open":return $.releaseLockCompletely(G),$._connect(F,J,se,ue,le);default:throw new Error('Unexpected Signaling state "'+$.state+'"')}})},x.prototype.createLocalParticipantSignaling=function(){return new te},x.prototype.open=function(){var F=this;return this.bracket("open",function(J){switch(F.state){case"closed":return F._open(J);case"open":return F;default:throw new Error('Unexpected Signaling state "'+F.state+'"')}})},x}(H);we.exports=M},5677:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(){var M=H.call(this)||this;return Object.defineProperties(M,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),M}return U(j,H),j.prototype.addTrack=function(M,P,x){var F=this._createLocalTrackPublicationSignaling(M,P,x);return this._trackSendersToPublications.set(M,F),this._publicationsToTrackSenders.set(F,M),H.prototype.addTrack.call(this,F),this},j.prototype.getPublication=function(M){return this._trackSendersToPublications.get(M)||null},j.prototype.getSender=function(M){return this._publicationsToTrackSenders.get(M)||null},j.prototype.removeTrack=function(M){var P=this._trackSendersToPublications.get(M);return P?(this._trackSendersToPublications.delete(M),this._publicationsToTrackSenders.delete(P),H.prototype.removeTrack.call(this,P)&&P.stop(),P):null},j}(Y(9285));we.exports=oe},3157:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),oe=function(j){function M(P,x,F){var J=this;return P=P.clone(),(J=j.call(this,x,P.kind,"data"===P.kind||P.track.enabled,F)||this).setTrackTransceiver(P),Object.defineProperties(J,{_updatedPriority:{value:F,writable:!0},id:{enumerable:!0,value:P.id}}),J}return U(M,j),Object.defineProperty(M.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),M.prototype.enable=function(P){return this.trackTransceiver.track.enabled=P="boolean"!=typeof P||P,j.prototype.enable.call(this,P)},M.prototype.publishFailed=function(P){return function H(j,M){return null===j._sid&&!j._error&&(j._error=M,!0)}(this,P)&&this.emit("updated"),this},M.prototype.setPriority=function(P){return this._updatedPriority!==P&&(this._updatedPriority=P,this.emit("updated")),this},M.prototype.setSid=function(P){return this._error?this:j.prototype.setSid.call(this,P)},M.prototype.stop=function(){this.trackTransceiver.stop()},M}(Y(8194));we.exports=oe},9285:function(we,Oe,Y){"use strict";var M,U=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(F[se]=J[se])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(F.prototype=x.prototype,new F)}),te=Y(8675),oe=Y(669),H={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},j=function(M){function P(){var x=M.call(this,"connecting",H)||this;return Object.defineProperties(x,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),x}return U(P,M),Object.defineProperty(P.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),P.prototype.addTrack=function(x){return this.tracks.set(x.id||x.sid,x),this.emit("trackAdded",x),this},P.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},P.prototype.removeTrack=function(x){var F=this.tracks.get(x.id||x.sid);return this.tracks.delete(x.id||x.sid),F&&this.emit("trackRemoved",x),F||null},P.prototype.setNetworkQualityLevel=function(x,F){this._networkQualityLevel!==x&&(this._networkQualityLevel=x,this._networkQualityStats=F&&(F.audio||F.video)?new oe(F):null,this.emit("networkQualityLevelChanged"))},P.prototype.connect=function(x,F){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=x),this._identity||(this._identity=F),this.preempt("connected"),!0)},P.prototype.reconnecting=function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)},P}(te);we.exports=j},9987:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(){var M=H.call(this)||this;return Object.defineProperties(M,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),M}return U(j,H),j.prototype.disable=function(){return this.enable(!1)},j.prototype.enable=function(M){return this.isEnabled!==(M="boolean"!=typeof M||M)&&(this._isEnabled=M,this.emit("updated")),this},j}(Y(9069).EventEmitter);we.exports=oe},2184:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this)||this;return x.connect(M,P),x}return U(j,H),j}(Y(9285));we.exports=oe},8956:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,F,J,se){var ue=H.call(this,P,x,F,J)||this;return Object.defineProperties(ue,{_isSwitchedOff:{value:se,writable:!0}}),ue.setSid(M),ue}return U(j,H),Object.defineProperty(j.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),j.prototype.subscribeFailed=function(M){return this.error||(this._error=M,this.emit("updated")),this},j.prototype.setPriority=function(M){return this._priority!==M&&(this._priority=M,this.emit("updated")),this},j.prototype.setSwitchedOff=function(M){return this._isSwitchedOff!==M&&(this._isSwitchedOff=M,this.emit("updated")),this},j}(Y(8194));we.exports=oe},8343:function(we,Oe,Y){"use strict";var G,U=this&&this.__extends||(G=function(ae,Ae){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Te,he){Te.__proto__=he}||function(Te,he){for(var Ce in he)Object.prototype.hasOwnProperty.call(he,Ce)&&(Te[Ce]=he[Ce])})(ae,Ae)},function(ae,Ae){if("function"!=typeof Ae&&null!==Ae)throw new TypeError("Class extends value "+String(Ae)+" is not a constructor or null");function Te(){this.constructor=ae}G(ae,Ae),ae.prototype=null===Ae?Object.create(Ae):(Te.prototype=Ae.prototype,new Te)}),te=Y(9987),oe=Y(8675),H=Y(6543),j=Y(9739).buildLogLevels,M=Y(8701).DEFAULT_LOG_LEVEL,P=Y(1458),x=Y(8380),F=x.MediaConnectionError,J=x.MediaDTLSTransportFailedError,se=x.SignalingConnectionDisconnectedError,ue=0,le={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},$=function(G){function ae(Ae,Te,he,Ce){var ye=this;Ce=Object.assign({logLevel:M,RecordingSignaling:te,Timeout:H},Ce);var me=j(Ce.logLevel);ye=G.call(this,"connected",le)||this;var ce=Ce.RecordingSignaling,pe=new Ce.Timeout(function(){ye._disconnect(ye._reconnectingError)},Ce.sessionTimeout,!1);return Object.defineProperties(ye,{_instanceId:{value:ue++},_log:{value:Ce.log?Ce.log.createLog("default",ye):new P("default",ye,me,Ce.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:Ce},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:pe},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:Ae},name:{enumerable:!0,value:he},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new ce},sid:{enumerable:!0,value:Te}}),ye.on("connectionStateChanged",function(){"failed"===ye.connectionState&&!["disconnected","failed"].includes(ye.iceConnectionState)&&ye._disconnect(new J)}),ye.on("iceConnectionStateChanged",function(){return z(ye)}),ye.on("signalingConnectionStateChanged",function(){return z(ye)}),setTimeout(function(){return z(ye)}),ye}return U(ae,G),ae.prototype._disconnect=function(Ae){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[Ae]),!0)},ae.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},ae.prototype.connectParticipant=function(Ae){var Te=this;return"disconnected"!==Ae.state&&!this.participants.has(Ae.sid)&&(this.participants.set(Ae.sid,Ae),Ae.on("stateChanged",function he(Ce){"disconnected"===Ce&&(Ae.removeListener("stateChanged",he),Te.participants.delete(Ae.sid),Te.emit("participantDisconnected",Ae))}),this.emit("participantConnected",Ae),!0)},ae.prototype.disconnect=function(){return this._disconnect()},ae.prototype.setDominantSpeaker=function(Ae){this.dominantSpeakerSid=Ae,this.emit("dominantSpeakerChanged")},ae}(oe);function z(G){var ae;"disconnected"!==G.state&&"disconnected"!==G.signalingConnectionState?("reconnecting"===G.signalingConnectionState?ae=G.signalingConnectionState:"failed"===G.iceConnectionState?(G._mediaConnectionIsReconnecting=!0,ae="reconnecting"):"new"===G.iceConnectionState||"checking"===G.iceConnectionState?ae=G._mediaConnectionIsReconnecting?"reconnecting":"connected":(G._mediaConnectionIsReconnecting=!1,G._reconnectingError=null,G._sessionTimeout.clear(),ae="connected"),ae!==G.state&&("reconnecting"===ae?(G._reconnectingError="reconnecting"===G.signalingConnectionState?new se:new F,G._sessionTimeout.start(),G.preempt(ae,null,[G._reconnectingError])):G.preempt(ae))):G._sessionTimeout.clear()}we.exports=$},8194:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x,F){var J=H.call(this)||this,se=null;return Object.defineProperties(J,{_error:{value:null,writable:!0},_isEnabled:{value:x,writable:!0},_priority:{value:F,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return se},set:function(ue){null===se&&(se=ue)}},kind:{enumerable:!0,value:P},name:{enumerable:!0,value:M}}),J}return U(j,H),Object.defineProperty(j.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),j.prototype.disable=function(){return this.enable(!1)},j.prototype.enable=function(M){return this.isEnabled!==(M="boolean"!=typeof M||M)&&(this._isEnabled=M,this.emit("updated")),this},j.prototype.setTrackTransceiver=function(M){return this.trackTransceiver!==(M=M||null)&&(this._trackTransceiver=M,this.emit("updated")),this},j.prototype.setSid=function(M){return null===this.sid&&(this._sid=M,this.emit("updated")),this},j}(Y(9069).EventEmitter);we.exports=oe},7697:(we,Oe,Y)=>{"use strict";var U=Y(8126),te=Y(6603),oe=Y(2112),H=Y(4892),j=Y(8380),M=j.SignalingConnectionDisconnectedError,P=j.SignalingIncomingMessageInvalidError,x=Y(9739),F=x.flatMap,J=x.createRoomConnectEventPayload;we.exports=function se(ue,le,$,z,G,ae){ae=Object.assign({PeerConnectionManager:te,RoomV2:oe,Transport:H},ae);var Ae=G.video[0]&&!0===G.video[0].adaptiveSimulcast,he=ae.RoomV2,Ce=ae.Transport,ye=ae.iceServers,me=ae.log,ce=new(0,ae.PeerConnectionManager)(z,G,ae),pe=F($.tracks,function(Ue){return[Ue.trackTransceiver]});ce.setTrackSenders(pe);var Fe,be=new Error("Canceled"),xe=new U(function(Ue,qe,Je){var Lt=ae.bandwidthProfile,Be=ae.eventObserver,Xe=ae.name,Sr=Object.assign({adaptiveSimulcast:Ae,automaticSubscription:ae.automaticSubscription,dominantSpeaker:ae.dominantSpeaker,environment:ae.environment,eventObserver:Be,loggerName:ae.loggerName,logLevel:ae.logLevel,networkMonitor:ae.networkMonitor,networkQuality:ae.networkQuality,iceServers:ye,onIced:function(fr){return Je()?(qe(be),Promise.reject(be)):(me.debug("Got ICE servers:",fr),ae.iceServers=fr,ce.setConfiguration(ae),ce.createAndOffer().then(function(){if(Je())throw qe(be),be;me.debug("createAndOffer() succeeded."),ce.dequeue("description")}).catch(function(pr){throw me.error("createAndOffer() failed:",pr),qe(pr),pr}))},realm:ae.realm,renderHints:!!Lt&&("disabled"!==ae.clientTrackSwitchOffControl||"disabled"!==ae.contentPreferencesMode),sdpSemantics:ae.sdpSemantics,trackPriority:!!Lt,trackSwitchOff:!!Lt},Lt?{bandwidthProfile:Lt}:{});Fe=new Ce(Xe,ue,$,ce,le,Sr);var _r=J(ae);Be.emit("event",_r),Fe.once("connected",function(fr){me.debug("Transport connected:",fr),Je()?qe(be):fr.participant?($.setSignalingRegion(fr.options.signaling_region),Ue(new he($,fr,Fe,ce,ae))):qe(new P)}),Fe.once("stateChanged",function(fr,pr){"disconnected"===fr?(Fe=null,qe(pr||new M)):me.debug("Transport state changed:",fr)})},function(){Fe&&(Fe.disconnect(),Fe=null)});return xe.catch(function(){Fe&&(Fe.disconnect(),Fe=null),ce.close()}),xe}},2314:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,"active_speaker",P)||this;return Object.defineProperties(x,{_loudestParticipantSid:{value:null,writable:!0}}),x.on("ready",function(F){F.on("message",function(J){"active_speaker"===J.type&&x._setLoudestParticipantSid(J.participant)})}),x}return U(j,H),Object.defineProperty(j.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),j.prototype._setLoudestParticipantSid=function(M){this.loudestParticipantSid!==M&&(this._loudestParticipantSid=M,this.emit("updated"))},j}(Y(4071));we.exports=oe},380:(we,Oe,Y)=>{"use strict";var U=Y(3826),te=function(){function oe(){Object.defineProperties(this,{_filter:{value:new U({getKey:function(j){return j.ufrag},isLessThanOrEqualTo:function(j,M){return j.revision<=M.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return oe.prototype.setUfrag=function(H){this._ufrag=H;var j=this._filter.toMap().get(H);return j?j.candidates:[]},oe.prototype.update=function(H){H.candidates=H.candidates||[];var j=this._filter.toMap().get(H.ufrag),M=j?j.candidates:[];return this._filter.update(H)&&this._ufrag===H.ufrag?H.candidates.slice(M.length):[]},oe}();we.exports=te},2282:(we,Oe,Y)=>{"use strict";var U=Y(8701),te=U.ICE_ACTIVITY_CHECK_PERIOD_MS,oe=U.ICE_INACTIVITY_THRESHOLD_MS,H=function(){function j(M,P){P=Object.assign({activityCheckPeriodMs:te,inactivityThresholdMs:oe},P),Object.defineProperties(this,{_activityCheckPeriodMs:{value:P.activityCheckPeriodMs},_inactivityThresholdMs:{value:P.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:M},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return j.prototype._getActivePairStat=function(M){return Array.from(M.values()).find(function(F){return"candidate-pair"===F.type&&F.nominated})||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}},j.prototype._getIceConnectionStats=function(){var M=this;return this._peerConnection.getStats().then(function(P){return M._getActivePairStat(P)}).catch(function(){return null})},j.prototype._scheduleInactivityCallback=function(M){var P=this;M&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===P._peerConnection.iceConnectionState&&M()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!M&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},j.prototype.start=function(M){var P=this;this.stop(),this._timer=setInterval(function(){P._getIceConnectionStats().then(function(x){!x||((!P._lastActivity||P._lastActivity.bytesReceived!==x.bytesReceived)&&(P._lastActivity=x,P._scheduleInactivityCallback(null)),x.timestamp-P._lastActivity.timestamp>=P._inactivityThresholdMs&&("disconnected"===P._peerConnection.iceConnectionState?M():null===P._onIceConnectionStateChanged&&P._scheduleInactivityCallback(M)))})},this._activityCheckPeriodMs)},j.prototype.stop=function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},j}();we.exports=H},448:function(we,Oe,Y){"use strict";var M,U=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(F[se]=J[se])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(F.prototype=x.prototype,new F)}),te=Y(7697),oe=Y(523),j=function(M){function P(x,F){var J;return F=Object.assign({createCancelableRoomSignalingPromise:te},F),J=M.call(this)||this,Object.defineProperties(J,{_createCancelableRoomSignalingPromise:{value:F.createCancelableRoomSignalingPromise},_options:{value:F},_wsServer:{value:x}}),J}return U(P,M),P.prototype._connect=function(x,F,J,se,ue){return ue=Object.assign({},this._options,ue),this._createCancelableRoomSignalingPromise.bind(null,F,this._wsServer,x,J,se,ue)},P.prototype.createLocalParticipantSignaling=function(x,F){return new oe(x,F)},P}(Y(8043));we.exports=j},523:function(we,Oe,Y){"use strict";var J,U=this&&this.__extends||(J=function(se,ue){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,$){le.__proto__=$}||function(le,$){for(var z in $)Object.prototype.hasOwnProperty.call($,z)&&(le[z]=$[z])})(se,ue)},function(se,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function le(){this.constructor=se}J(se,ue),se.prototype=null===ue?Object.create(ue):(le.prototype=ue.prototype,new le)}),te=Y(5677),oe=Y(5771),H=Y(8701).DEFAULT_LOG_LEVEL,j=Y(1458),M=Y(9739),P=M.buildLogLevels,x=M.isDeepEqual,F=function(J){function se(ue,le,$){var z;$=Object.assign({logLevel:H,LocalTrackPublicationV2:oe},$),z=J.call(this)||this;var G=P($.logLevel);return Object.defineProperties(z,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:ue},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:$.LocalTrackPublicationV2},_log:{value:$.log?$.log.createLog("default",z):new j("default",z,G,$.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:le},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),z}return U(se,J),se.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},se.prototype.setSignalingRegion=function(ue){this._signalingRegion||(this._signalingRegion=ue)},se.prototype.setBandwidthProfile=function(ue){x(this._bandwidthProfile,ue)||(this._bandwidthProfile=JSON.parse(JSON.stringify(ue)),this._bandwidthProfileRevision++,this.didUpdate())},se.prototype.getParameters=function(){return this._encodingParameters},se.prototype.setParameters=function(ue){return this._encodingParameters.update(ue),this},se.prototype.update=function(ue){return this._publishedRevision>=ue.revision||(this._publishedRevision=ue.revision,ue.tracks.forEach(function(le){var $=this.tracks.get(le.id);$&&$.update(le)},this)),this},se.prototype._createLocalTrackPublicationSignaling=function(ue,le,$){return new this._LocalTrackPublicationV2(ue,le,$)},se.prototype.addTrack=function(ue,le,$){var z=this;J.prototype.addTrack.call(this,ue,le,$);var G=this.getPublication(ue),ae=G.isEnabled,Ae=G.updatedPriority,Te=function(){(ae!==G.isEnabled||Ae!==G.updatedPriority)&&(z.didUpdate(),ae=G.isEnabled,Ae=G.updatedPriority)};return G.on("updated",Te),this._removeListener(G),this._removeListeners.set(G,function(){return G.removeListener("updated",Te)}),this.didUpdate(),this},se.prototype._removeListener=function(ue){var le=this._removeListeners.get(ue);le&&le()},se.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(ue){return ue.getState()})}},se.prototype.didUpdate=function(){this._revision++,this.emit("updated")},se.prototype.removeTrack=function(ue){var le=J.prototype.removeTrack.call(this,ue);return le&&(ue.removeClone(le.trackTransceiver),this._removeListener(le),this.didUpdate()),le},se.prototype.setNetworkQualityConfiguration=function(ue){this.networkQualityConfiguration.update(ue)},se.prototype.setPublisherHint=function(ue,le){var $=Array.from(this.tracks.values()).find(function(z){return z.sid===ue});return $?$.trackTransceiver.setPublisherHint(le):(this._log.warn("track:"+ue+" not found"),Promise.resolve("UNKNOWN_TRACK"))},se}(te);we.exports=F},5771:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(3157),oe=Y(8380).createTwilioError,H=function(j){function M(P,x,F){return j.call(this,P,x,F)||this}return U(M,j),M.prototype.getState=function(){return{enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority}},M.prototype.update=function(P){switch(P.state){case"ready":this.setSid(P.sid);break;case"failed":var x=P.error;this.publishFailed(oe(x.code,x.message))}return this},M}(te);we.exports=H},4071:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(9069),oe=0,H=function(j){function M(P,x,F){var J=j.call(this)||this;return Object.defineProperties(J,{_instanceId:{value:oe++},channel:{value:x},_log:{value:F.log.createLog("default",J)},_getReceiver:{value:P},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),J}return U(M,j),Object.defineProperty(M.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),M.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},M.prototype.setup=function(P){var x=this;this._teardown(),this._log.info("setting up msp transport for id:",P);var F=this._getReceiver(P).then(function(J){if("data"!==J.kind&&x._log.error("Expected a DataTrackReceiver"),x._receiverPromise===F){try{x._transport=J.toDataTransport(),x.emit("ready",x._transport)}catch(se){x._log.error("Failed to toDataTransport: "+se.message)}J.once("close",function(){return x._teardown()})}});this._receiverPromise=F},M.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},M}(te);we.exports=H},9056:function(we,Oe,Y){"use strict";var P,U=this&&this.__extends||(P=function(x,F){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,se){J.__proto__=se}||function(J,se){for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(J[ue]=se[ue])})(x,F)},function(x,F){if("function"!=typeof F&&null!==F)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function J(){this.constructor=x}P(x,F),x.prototype=null===F?Object.create(F):(J.prototype=F.prototype,new J)}),te=this&&this.__read||function(P,x){var F="function"==typeof Symbol&&P[Symbol.iterator];if(!F)return P;var se,le,J=F.call(P),ue=[];try{for(;(void 0===x||x-- >0)&&!(se=J.next()).done;)ue.push(se.value)}catch($){le={error:$}}finally{try{se&&!se.done&&(F=J.return)&&F.call(J)}finally{if(le)throw le.error}}return ue},oe=Y(9069),H=Y(8753),j=function(P){function x(F,J){var se=P.call(this)||this;return Object.defineProperties(se,{_factories:{value:new WeakMap},_manager:{value:F},_signaling:{value:J}}),J.on("updated",function(){return se.emit("updated")}),se}return U(x,P),Object.defineProperty(x.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),x.prototype.start=function(){var F=this;this.stop();var J=setTimeout(function(){F._timeout===J&&function M(P){var se=(P._manager._peerConnections?Array.from(P._manager._peerConnections.values()):[]).map(function(ue){return ue._peerConnection}).filter(function(ue){return"closed"!==ue.signalingState}).map(function(ue){if(P._factories.has(ue))return P._factories.get(ue);var le=new H(ue);return P._factories.set(ue,le),le}).map(function(ue){return ue.next().catch(function(){return null})});return Promise.all(se).then(function(ue){return ue.filter(function(le){return le}).map(function(le){return le.summarize()})})}(F).then(function(se){if(F._timeout===J){if(se.length){var ue=te(se,1);F._signaling.put(ue[0])}F.start()}})},200);this._timeout=J},x.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},x}(oe);we.exports=j},5775:function(we,Oe,Y){"use strict";var x,U=this&&this.__extends||(x=function(F,J){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,ue){se.__proto__=ue}||function(se,ue){for(var le in ue)Object.prototype.hasOwnProperty.call(ue,le)&&(se[le]=ue[le])})(F,J)},function(F,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function se(){this.constructor=F}x(F,J),F.prototype=null===J?Object.create(J):(se.prototype=J.prototype,new se)}),te=Y(4071),oe=Y(6412),H=Y(6543),M=function(x){function F(J,se,ue){var le=x.call(this,J,"network_quality",ue)||this;return Object.defineProperties(le,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new oe},_resendTimer:{value:new H(function(){le._resendTimer.setDelay(1.5*le._resendTimer.delay),le._sendNetworkQualityInputs()},5e3,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:se.local,remoteReportLevel:se.remote}}}}),le.on("ready",function($){$.on("message",function(z){"network_quality"===(le._log.debug("Incoming: ",z),z.type)&&le._handleNetworkQualityMessage(z)})}),le._sendNetworkQualityInputs(),le}return U(F,x),Object.defineProperty(F.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),F.prototype._handleNetworkQualityMessage=function(J){var se=this,ue=!1,le=null,$=J?J.local:null;"number"==typeof $?(le=$,this._levels=null):"object"==typeof $&&$&&(this._levels=$,le="number"==typeof $.level?$.level:Math.min($.audio.send,$.audio.recv,$.video.send,$.video.recv)),null!==le&&this.level!==le&&(this._level=le,ue=!0),this._remoteLevels=J&&J.remotes?J.remotes.reduce(function(z,G){return(se._remoteLevels.get(G.sid)||{}).level!==G.level&&(ue=!0),z.set(G.sid,G)},new Map):this._remoteLevels,ue&&this.emit("updated"),this._resendTimer.setDelay(5e3),this._resendTimer.isSet&&setTimeout(function(){return se._sendNetworkQualityInputs()},1e3)},F.prototype._sendNetworkQualityInputs=function(){var J=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(se){J._transport&&J._transport.publish(function P(x,F){return Object.assign({type:"network_quality"},x,F)}(se,J._networkQualityReportLevels))}).finally(function(){J._resendTimer.start()})},F.prototype.put=function(J){this._networkQualityInputs.put(J)},F}(te);we.exports=M},1058:function(we,Oe,Y){"use strict";var xn,U=this&&this.__extends||(xn=function(an,Ye){return(xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,ht){pt.__proto__=ht}||function(pt,ht){for(var en in ht)Object.prototype.hasOwnProperty.call(ht,en)&&(pt[en]=ht[en])})(an,Ye)},function(an,Ye){if("function"!=typeof Ye&&null!==Ye)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function pt(){this.constructor=an}xn(an,Ye),an.prototype=null===Ye?Object.create(Ye):(pt.prototype=Ye.prototype,new pt)}),te=this&&this.__read||function(xn,an){var Ye="function"==typeof Symbol&&xn[Symbol.iterator];if(!Ye)return xn;var ht,dn,pt=Ye.call(xn),en=[];try{for(;(void 0===an||an-- >0)&&!(ht=pt.next()).done;)en.push(ht.value)}catch(ui){dn={error:ui}}finally{try{ht&&!ht.done&&(Ye=pt.return)&&Ye.call(pt)}finally{if(dn)throw dn.error}}return en},oe=this&&this.__spreadArray||function(xn,an){for(var Ye=0,pt=an.length,ht=xn.length;Ye<pt;Ye++,ht++)xn[ht]=an[Ye];return xn},H=Y(2606),j=Y(1647),M=j.RTCIceCandidate,P=j.RTCPeerConnection,x=j.RTCSessionDescription,F=j.getStats,J=Y(7627),se=Y(8701),ue=se.DEFAULT_ICE_GATHERING_TIMEOUT_MS,le=se.DEFAULT_LOG_LEVEL,$=se.DEFAULT_SESSION_TIMEOUT_SEC,z=se.iceRestartBackoffConfig,G=Y(3898),ae=G.addOrRewriteNewTrackIds,Ae=G.addOrRewriteTrackIds,Te=G.createCodecMapForMediaSection,he=G.disableRtx,Ce=G.enableDtxForOpus,ye=G.filterLocalCodecs,me=G.getMediaSections,ce=G.removeSSRCAttributes,pe=G.revertSimulcast,be=G.setCodecPreferences,Fe=G.setSimulcast,xe=Y(6543),Ue=Y(8380),qe=Ue.MediaClientLocalDescFailedError,Je=Ue.MediaClientRemoteDescFailedError,Pe=Y(9739),Mt=Pe.buildLogLevels,Lt=Pe.getPlatform,yt=Pe.isChromeScreenShareTrack,We=Pe.oncePerTick,Be=Pe.defer,Ge=Y(380),Re=Y(2282),Xe=Y(2498),Ot=Y(3501),Kt=Y(8675),Tt=Y(1458),zt=Y(1057),Qn=Y(3073),Ht=J.guessBrowser(),br=Lt(),Sr=/android/.test(br),_r="chrome"===Ht,fr="firefox"===Ht,pr="safari"===Ht,ki=0,$n={open:["closed","updating"],updating:["closed","open"],closed:[]},Mi=function(xn){function an(Ye,pt,ht,en){var dn=xn.call(this,"open",$n)||this,ui=Ke(en=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:yt,iceServers:[],logLevel:le,offerOptions:{},revertSimulcast:pe,sessionTimeout:1e3*$,setCodecPreferences:be,setSimulcast:Fe,Backoff:H,IceConnectionMonitor:Re,RTCIceCandidate:M,RTCPeerConnection:P,RTCSessionDescription:x,Timeout:xe},en)),_o=Mt(en.logLevel),rs=en.RTCPeerConnection;!0===en.enableDscp&&(en.chromeSpecificConstraints=en.chromeSpecificConstraints||{},en.chromeSpecificConstraints.optional=en.chromeSpecificConstraints.optional||[],en.chromeSpecificConstraints.optional.push({googDscp:!0}));var Is=en.log?en.log.createLog("webrtc",dn):new Tt("webrtc",dn,_o,en.loggerName),no=new rs(ui,en.chromeSpecificConstraints);en.dummyAudioMediaStreamTrack&&no.addTrack(en.dummyAudioMediaStreamTrack),Object.defineProperties(dn,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:en.enableDscp},_encodingParameters:{value:pt},_isChromeScreenShareTrack:{value:en.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new en.Timeout(function(){return dn._handleIceGatheringTimeout()},ue,!1)},_iceRestartBackoff:{value:new en.Backoff(z)},_instanceId:{value:++ki},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:Is},_eventObserver:{value:en.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new en.IceConnectionMonitor(no)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:en.offerOptions},_onEncodingParametersChanged:{value:We(function(){dn._needsAnswer||As(dn)})},_peerConnection:{value:no},_preferredAudioCodecs:{value:ht.audio},_preferredVideoCodecs:{value:ht.video},_shouldApplyDtx:{value:ht.audio.every(function(vr){return"opus"!==vr.codec})||ht.audio.some(function(vr){return"opus"===vr.codec&&vr.dtx})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new en.Timeout(function(){Is.debug("ICE reconnect timed out"),dn.close()},en.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new Ge},_setCodecPreferences:{value:fr&&Sr&&ht.video[0]&&"h264"!==ht.video[0].codec.toLowerCase()?function(vr){return vr}:en.setCodecPreferences},_setSimulcast:{value:en.setSimulcast},_revertSimulcast:{value:en.revertSimulcast},_RTCIceCandidate:{value:en.RTCIceCandidate},_RTCPeerConnection:{value:en.RTCPeerConnection},_RTCSessionDescription:{value:en.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:Ye}}),pt.on("changed",dn._onEncodingParametersChanged),no.addEventListener("connectionstatechange",dn._handleConnectionStateChange.bind(dn)),no.addEventListener("datachannel",dn._handleDataChannelEvent.bind(dn)),no.addEventListener("icecandidate",dn._handleIceCandidateEvent.bind(dn)),no.addEventListener("iceconnectionstatechange",dn._handleIceConnectionStateChange.bind(dn)),no.addEventListener("icegatheringstatechange",dn._handleIceGatheringStateChange.bind(dn)),no.addEventListener("signalingstatechange",dn._handleSignalingStateChange.bind(dn)),no.addEventListener("track",dn._handleTrackEvent.bind(dn));var $i=dn;return dn.on("stateChanged",function vr(En){"closed"===En&&($i.removeListener("stateChanged",vr),$i._dataChannels.forEach(function(Qc,_u){$i.removeDataTrackSender(_u)}))}),dn}return U(an,xn),an.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},an.prototype.setEffectiveAdaptiveSimulcast=function(Ye){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",Ye),this._preferredVideoCodecs.forEach(function(pt){"adaptiveSimulcast"in pt&&(pt.adaptiveSimulcast=Ye)})},Object.defineProperty(an.prototype,"_shouldApplySimulcast",{get:function(){return!(!_r&&!pr)&&this._preferredVideoCodecs.some(function(pt){return"vp8"===pt.codec.toLowerCase()&&pt.simulcast&&!1!==pt.adaptiveSimulcast})},enumerable:!1,configurable:!0}),Object.defineProperty(an.prototype,"connectionState",{get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(an.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(an.prototype,"isApplicationSectionNegotiated",{get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&me(this._peerConnection.localDescription.sdp,"application").length>0},enumerable:!1,configurable:!0}),Object.defineProperty(an.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var Ye=this._preferredVideoCodecs.find(function(pt){return"adaptiveSimulcast"in pt});return Ye&&!0===Ye.adaptiveSimulcast},enumerable:!1,configurable:!0}),an.prototype._maybeUpdateEncodings=function(Ye,pt,ht){if(void 0===ht&&(ht=!1),"video"!==Ye.kind||"ended"===Ye.readyState)return!1;var en=J.guessBrowser();return!!("safari"===en||"chrome"===en&&this._isAdaptiveSimulcastEnabled)&&(this._updateEncodings(Ye,pt,ht),!0)},an.prototype._updateEncodings=function(Ye,pt,ht){if(this._isChromeScreenShareTrack(Ye)){var en=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];pt.forEach(function(vr,En){var Qc=en[En];Qc?(vr.scaleResolutionDownBy=Qc.scaleResolutionDownBy,ht&&delete vr.active):(vr.active=!1,delete vr.scaleResolutionDownBy)})}else{var dn=Ye.getSettings(),Is=dn.width*dn.height,no=[{pixels:518400,maxActiveLayers:3},{pixels:129600,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}].find(function(vr){return Is>=vr.pixels}),$i=Math.min(pt.length,no.maxActiveLayers);pt.forEach(function(vr,En){En<$i?(vr.scaleResolutionDownBy=1<<$i-En-1,ht&&(vr.active=!0)):(vr.active=!1,delete vr.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",pt.map(function(vr,En){return"["+En+": "+vr.active+", "+(vr.scaleResolutionDownBy||0)+"]"}).join(", "))},an.prototype._addIceCandidate=function(Ye){var pt=this;return Promise.resolve().then(function(){return Ye=new pt._RTCIceCandidate(Ye),pt._peerConnection.addIceCandidate(Ye)}).catch(function(ht){pt._log.warn("Failed to add RTCIceCandidate "+(Ye?'"'+Ye.candidate+'"':"null")+": "+ht.message)})},an.prototype._addIceCandidates=function(Ye){return Promise.all(Ye.map(this._addIceCandidate,this)).then(function(){})},an.prototype._addOrUpdateTransceiver=function(Ye){var pt=this,ht=function un(xn,an){var Ye={audio:xn._preferredAudioCodecs.map(function(dn){return dn.codec.toLowerCase()}),video:xn._preferredVideoCodecs.map(function(dn){return dn.codec.toLowerCase()})}[an],pt=xn._recycledTransceivers[an],ht=Ye.find(function(dn){return xn._localCodecs.has(dn)});if(!ht)return pt.shift();var en=pt.find(function(dn){var ui=xn._remoteCodecMaps.get(dn.mid);return ui&&ui.has(ht)});return en&&pt.splice(pt.indexOf(en),1),en}(this,Ye.kind);if(ht&&ht.sender){var en=ht.sender.track?ht.sender.track.id:null;return en&&this._log.warn("Reusing transceiver: "+ht.mid+"] "+en+" => "+Ye.id),this._replaceTrackPromises.set(ht,ht.sender.replaceTrack(Ye).then(function(){ht.direction="sendrecv"},function(){}).finally(function(){pt._replaceTrackPromises.delete(ht)})),ht}return this._peerConnection.addTransceiver(Ye)},an.prototype._checkIceBox=function(Ye){var pt=Xt(Ye);if(!pt)return Promise.resolve();var ht=this._remoteCandidates.setUfrag(pt);return this._addIceCandidates(ht)},an.prototype._answer=function(Ye){var pt=this;return Promise.resolve().then(function(){return pt._negotiationRole||(pt._negotiationRole="answerer"),pt._setRemoteDescription(Ye)}).catch(function(){throw new Je}).then(function(){return pt._peerConnection.createAnswer()}).then(function(ht){ht=fr?new pt._RTCSessionDescription({sdp:he(ht.sdp),type:ht.type}):Qn(ht);var en=ce(ht.sdp,["mslabel","label"]);if(pt._shouldApplySimulcast){var dn=en;en=pt._setSimulcast(dn,pt._trackIdsToAttributes),en=pt._revertSimulcast(en,dn,Ye.sdp)}return en=en.replace(/42e015/g,"42e01f"),pt._setLocalDescription({type:ht.type,sdp:en})}).then(function(){return pt._checkIceBox(Ye)}).then(function(){return pt._queuedDescription&&pt._updateDescription(pt._queuedDescription)}).then(function(){return pt._queuedDescription=null,pt._maybeReoffer(pt._peerConnection.localDescription)}).catch(function(ht){var en=ht instanceof Je?ht:new qe;throw pt._publishMediaWarning({message:"Failed to _answer",code:en.code,error:ht}),en})},an.prototype._close=function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0)},an.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},an.prototype._handleDataChannelEvent=function(Ye){var pt=this,ht=Ye.channel,en=new Xe(ht);this._dataTrackReceivers.add(en),ht.addEventListener("close",function(){pt._dataTrackReceivers.delete(en)}),this.emit("trackAdded",en)},an.prototype._handleGlare=function(Ye){var pt=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return pt._trackIdsToAttributes=new Map(pt._appliedTrackIdsToAttributes),pt._setLocalDescription({type:"rollback"})}).then(function(){return pt._needsAnswer=!1,pt._answer(Ye)}).then(function(ht){return ht?Promise.resolve():pt._offer()})},an.prototype._publishMediaWarning=function(Ye){this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:Ye.message,code:Ye.code,context:JSON.stringify({error:Ye.error.message,sdp:Ye.sdp})}})},an.prototype._handleIceCandidateEvent=function(Ye){Ye.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(Ye.candidate));var pt={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};Ye.candidate||(pt.ice.complete=!0),this._isIceLite&&Ye.candidate||(pt.ice.revision=this._localCandidatesRevision++,this.emit("candidates",pt))},an.prototype._handleIceConnectionStateChange=function(){var Ye=this,pt=this._peerConnection.iceConnectionState,ht=["connected","completed"].includes(pt),en=this._log;en.debug('ICE connection state is "'+pt+'"'),ht&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==pt||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&ht&&en.debug("ICE reconnected"):(en.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===pt?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){Ye._iceConnectionMonitor.stop(),!Ye._shouldRestartIce&&!Ye._isRestartingIce&&(en.warn("ICE Connection Monitor detected inactivity"),Ye._isIceConnectionInactive=!0,Ye._initiateIceRestartBackoff(),Ye.emit("iceConnectionStateChanged"),Ye.emit("connectionStateChanged"))})):["disconnected","completed"].includes(pt)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=pt,this.emit("iceConnectionStateChanged")},an.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},an.prototype._handleIceGatheringStateChange=function(){var Ye=this._peerConnection.iceGatheringState,pt=this._log;pt.debug('ICE gathering state is "'+Ye+'"');var ht=this._iceGatheringTimeout;"gathering"===Ye&&!this._didGenerateLocalCandidates&&!ht.isSet&&(pt.debug("Starting ICE gathering timeout: "+ht.delay),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},an.prototype._handleSignalingStateChange=function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},an.prototype._handleTrackEvent=function(Ye){var pt=this,ht=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new zt,this._trackMatcher.update(ht);var en=Ye.track,dn=this._trackMatcher.match(Ye)||en.id,ui=new Ot(dn,en);this._mediaTrackReceivers.forEach(function(_o){_o.track.id===ui.track.id&&pt._mediaTrackReceivers.delete(_o)}),this._mediaTrackReceivers.add(ui),en.addEventListener("ended",function(){return pt._mediaTrackReceivers.delete(ui)}),this.emit("trackAdded",ui)},an.prototype._initiateIceRestart=function(){if("closed"!==this._peerConnection.signalingState){var Ye=this._log;Ye.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var pt=this._iceReconnectTimeout;pt.isSet||(Ye.debug("Starting ICE reconnect timeout: "+pt.delay),this._iceReconnectTimeout.start()),this.offer().catch(function(dn){Ye.error("offer failed in _initiateIceRestart with: "+dn.message)})}},an.prototype._initiateIceRestartBackoff=function(){var Ye=this;"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return Ye._initiateIceRestart()}))},an.prototype._maybeReoffer=function(Ye){var pt=this._shouldOffer;if(Ye&&Ye.sdp){var ht=this._peerConnection.getSenders().filter(function(rs){return rs.track});pt=["audio","video"].reduce(function(rs,Is){var no=me(Ye.sdp,Is,"(sendrecv|sendonly)"),$i=ht.filter(Me.bind(null,Is));return rs||no.length<$i.length},pt);var en=this._dataChannels.size>0,dn=me(Ye.sdp,"application").length>0;pt=pt||en&&!dn}return(pt?this._offer():Promise.resolve()).then(function(){return pt})},an.prototype._offer=function(){var Ye=this,pt=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,pt.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return Ye._peerConnection.createOffer(pt)}).catch(function(ht){var en=new qe;throw Ye._publishMediaWarning({message:"Failed to create offer",code:en.code,error:ht}),en}).then(function(ht){ht=fr?new Ye._RTCSessionDescription({sdp:he(ht.sdp),type:ht.type}):Qn(ht);var en=ce(ht.sdp,["mslabel","label"]);en=Ye._peerConnection.remoteDescription?ye(en,Ye._peerConnection.remoteDescription.sdp):en;var dn=Ye._setCodecPreferences(en,Ye._preferredAudioCodecs,Ye._preferredVideoCodecs);return Ye._shouldOffer=!1,Ye._negotiationRole||(Ye._negotiationRole="offerer"),Ye._shouldApplySimulcast&&(Ye._localDescriptionWithoutSimulcast={type:"offer",sdp:dn},dn=Ye._setSimulcast(dn,Ye._trackIdsToAttributes)),Ye._setLocalDescription({type:"offer",sdp:dn})})},an.prototype._getMediaTrackSenderId=function(Ye){var pt=Array.from(this._rtpSenders.keys()).find(function(ht){return ht.track.id===Ye});return pt?pt.id:Ye},an.prototype._addOrRewriteLocalTrackIds=function(Ye){var pt=this,en=this._peerConnection.getTransceivers().filter(function($i){var vr=$i.sender;return!$i.stopped&&vr&&vr.track}),dn=en.filter(function($i){return $i.mid}),ui=new Map(dn.map(function($i){return[$i.mid,pt._getMediaTrackSenderId($i.sender.track.id)]})),_o=Ae(Ye.sdp,ui),rs=en.filter(function($i){return!$i.mid}),Is=new Map(["audio","video"].map(function($i){return[$i,rs.filter(function(vr){return vr.sender.track.kind===$i}).map(function(vr){return pt._getMediaTrackSenderId(vr.sender.track.id)})]})),no=ae(_o,ui,Is);return new this._RTCSessionDescription({sdp:no,type:Ye.type})},an.prototype._rollbackAndApplyOffer=function(Ye){var pt=this;return this._setLocalDescription({type:"rollback"}).then(function(){return pt._setLocalDescription(Ye)})},an.prototype._setLocalDescription=function(Ye){var pt=this;return"rollback"!==Ye.type&&this._shouldApplyDtx&&(Ye=new this._RTCSessionDescription({sdp:Ce(Ye.sdp),type:Ye.type})),this._peerConnection.setLocalDescription(Ye).catch(function(ht){pt._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+Ye.type+'" failed with the error "'+ht.message+'".',ht);var en=new qe,dn={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+Ye.type+'" failed',code:en.code,error:ht};throw Ye.sdp&&(pt._log.warn("The SDP was "+Ye.sdp),dn.sdp=Ye.sdp),pt._publishMediaWarning(dn),en}).then(function(){"rollback"!==Ye.type&&(pt._localDescription=pt._addOrRewriteLocalTrackIds(Ye),pt._shouldApplyDtx&&(pt._localDescription=new pt._RTCSessionDescription({sdp:Ce(pt._localDescription.sdp,[]),type:pt._localDescription.type})),pt._localCandidates=[],"offer"===Ye.type?pt._descriptionRevision++:"answer"===Ye.type&&(pt._lastStableDescriptionRevision=pt._descriptionRevision,mo(pt)),pt._localUfrag=Xt(Ye),pt.emit("description",pt.getState()))})},an.prototype._setRemoteDescription=function(Ye){var pt=this;return Ye.sdp&&(Ye.sdp=this._setCodecPreferences(Ye.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),Ye.sdp=this._shouldApplyDtx?Ce(Ye.sdp):Ce(Ye.sdp,[]),fr&&(Ye.sdp=function ot(xn){return xn.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}(Ye.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(Ye.sdp))),Ye=new this._RTCSessionDescription(Ye),Promise.resolve().then(function(){if("answer"===Ye.type&&pt._localDescriptionWithoutSimulcast){var ht=pt._preferredVideoCodecs.find(function(ui){return"adaptiveSimulcast"in ui}),dn=pt._revertSimulcast(pt._localDescription.sdp,pt._localDescriptionWithoutSimulcast.sdp,Ye.sdp,!!ht&&!1===ht.adaptiveSimulcast);if(pt._localDescriptionWithoutSimulcast=null,dn!==pt._localDescription.sdp)return pt._rollbackAndApplyOffer({type:pt._localDescription.type,sdp:dn})}}).then(function(){return pt._peerConnection.setRemoteDescription(Ye)}).then(function(){"answer"===Ye.type&&(pt._isRestartingIce&&(pt._log.debug("An ICE restart was in-progress and is now completed"),pt._isRestartingIce=!1),mo(pt))},function(ht){throw pt._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+Ye.type+'" failed with the error "'+ht.message+'".',ht),Ye.sdp&&pt._log.warn("The SDP was "+Ye.sdp),ht})},an.prototype._updateDescription=function(Ye){var pt=this;switch(Ye.type){case"answer":case"pranswer":if(Ye.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=Ye.revision;break;case"close":return this._close();case"create-offer":return Ye.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=Ye,Promise.resolve()):(this._descriptionRevision=Ye.revision,this._offer());case"offer":return Ye.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=Ye,Promise.resolve()):(this._descriptionRevision=Ye.revision,this._handleGlare(Ye)):(this._descriptionRevision=Ye.revision,this._answer(Ye).then(function(){}))}var ht=Ye.revision;return Promise.resolve().then(function(){return pt._setRemoteDescription(Ye)}).catch(function(en){var dn=new Je;throw pt._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+Ye.type+'" failed',code:dn.code,error:en,sdp:Ye.sdp}),dn}).then(function(){return pt._lastStableDescriptionRevision=ht,pt._needsAnswer=!1,pt._checkIceBox(Ye)}).then(function(){return pt._queuedDescription&&pt._updateDescription(pt._queuedDescription)}).then(function(){return pt._queuedDescription=null,pt._maybeReoffer(pt._peerConnection.localDescription).then(function(){})})},an.prototype._updateIce=function(Ye){var pt=this._remoteCandidates.update(Ye);return this._addIceCandidates(pt)},an.prototype.addDataTrackSender=function(Ye){if(!this._dataChannels.has(Ye))try{var pt={ordered:Ye.ordered};null!==Ye.maxPacketLifeTime&&(pt.maxPacketLifeTime=Ye.maxPacketLifeTime),null!==Ye.maxRetransmits&&(pt.maxRetransmits=Ye.maxRetransmits);var ht=this._peerConnection.createDataChannel(Ye.id,pt);Ye.addDataChannel(ht),this._dataChannels.set(Ye,ht)}catch(en){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+Ye.id+'": '+en.message)}},an.prototype._handleQueuedPublisherHints=function(){var Ye=this;"stable"===this._peerConnection.signalingState&&this._mediaTrackSenderToPublisherHints.forEach(function(pt,ht){var en=pt.deferred,dn=pt.encodings;Ye._mediaTrackSenderToPublisherHints.delete(ht),Ye._setPublisherHint(ht,dn).then(function(ui){return en.resolve(ui)}).catch(function(ui){return en.reject(ui)})})},an.prototype._setPublisherHint=function(Ye,pt){var ht=this;if(fr)return Promise.resolve("COULD_NOT_APPLY_HINT");this._mediaTrackSenderToPublisherHints.has(Ye)&&(this._mediaTrackSenderToPublisherHints.get(Ye).deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(Ye));var dn=this._rtpSenders.get(Ye);if(!dn)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if("closed"===this._peerConnection.signalingState)return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if("stable"!==this._peerConnection.signalingState){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var ui=Be();return this._mediaTrackSenderToPublisherHints.set(Ye,{deferred:ui,encodings:pt}),ui.promise}var _o=dn.getParameters();return null!==pt&&pt.forEach(function(rs){var Is=rs.enabled,no=rs.layer_index;_o.encodings.length>no?(ht._log.debug("layer:"+no+", active:"+_o.encodings[no].active+" => "+Is),_o.encodings[no].active=Is):ht._log.warn("invalid layer:"+no+", active:"+Is)}),this._maybeUpdateEncodings(dn.track,_o.encodings,null===pt),dn.setParameters(_o).then(function(){return"OK"}).catch(function(rs){return ht._log.error("Failed to apply publisher hints:",rs),"COULD_NOT_APPLY_HINT"})},an.prototype.addMediaTrackSender=function(Ye){var pt=this;if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has(Ye)){var en=this._addOrUpdateTransceiver(Ye.track).sender;Ye.addSender(en,function(dn){return pt._setPublisherHint(Ye,dn)}),this._rtpNewSenders.add(en),this._rtpSenders.set(Ye,en)}},an.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},an.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},an.prototype.getState=function(){if(!this._localDescription)return null;var pt={type:this._localDescription.type,revision:"answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision};return this._localDescription.sdp&&(pt.sdp=this._localDescription.sdp),{description:pt,id:this.id}},an.prototype.offer=function(){var Ye=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(pt){return Ye.transition("updating",pt),(Ye._needsAnswer||Ye._isRestartingIce?Promise.resolve():Ye._offer()).then(function(){Ye.tryTransition("open",pt)},function(en){throw Ye.tryTransition("open",pt),en})})},an.prototype.removeDataTrackSender=function(Ye){var pt=this._dataChannels.get(Ye);pt&&(Ye.removeDataChannel(pt),this._dataChannels.delete(Ye),pt.close())},an.prototype.removeMediaTrackSender=function(Ye){var pt=this._rtpSenders.get(Ye);pt&&("closed"!==this._peerConnection.signalingState&&this._peerConnection.removeTrack(pt),Ye.removeSender(pt),this._mediaTrackSenderToPublisherHints.has(Ye)&&(this._mediaTrackSenderToPublisherHints.get(Ye).deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(Ye)),this._rtpNewSenders.delete(pt),this._rtpSenders.delete(Ye))},an.prototype.setConfiguration=function(Ye){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(Ke(Ye))},an.prototype.setIceReconnectTimeout=function(Ye){return this._iceReconnectTimeout.setDelay(Ye),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},an.prototype.update=function(Ye){var pt=this;return this.bracket("updating",function(ht){if("closed"===pt.state)return Promise.resolve();pt.transition("updating",ht);var en=[];return Ye.ice&&en.push(pt._updateIce(Ye.ice)),Ye.description&&en.push(pt._updateDescription(Ye.description)),Promise.all(en).then(function(){pt.tryTransition("open",ht)},function(dn){throw pt.tryTransition("open",ht),dn})})},an.prototype.getStats=function(){var Ye=this;return F(this._peerConnection).then(function(pt){return function Nt(xn,an){return Object.assign(an,{remoteAudioTrackStats:an.remoteAudioTrackStats.map(function(Ye){return Et(xn,Ye)}),remoteVideoTrackStats:an.remoteVideoTrackStats.map(function(Ye){return Et(xn,Ye)}),localAudioTrackStats:an.localAudioTrackStats.map(function(Ye){return Js(xn,Ye)}),localVideoTrackStats:an.localVideoTrackStats.map(function(Ye){return Js(xn,Ye)})})}(Ye,pt)})},an}(Kt);function Js(xn,an){var Ye=xn._getMediaTrackSenderId(an.trackId);return Object.assign(an,{trackId:Ye})}function Et(xn,an){var Ye=oe([],te(xn._mediaTrackReceivers)).find(function(ht){return ht.track.id===an.trackId});return Object.assign(an,{trackId:Ye?Ye.id:null})}function Xt(xn){if(xn.sdp){var an=xn.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(an)return an[1]}return null}function Ke(xn){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},xn)}function Me(xn,an){var Ye=an.track;return Ye&&Ye.kind===xn&&"ended"!==Ye.readyState}function mo(xn){(function xs(xn){xn._recycledTransceivers.audio=[],xn._recycledTransceivers.video=[],xn._peerConnection.getTransceivers().forEach(function(an){(function Dn(xn,an){return!xn.stopped&&!an._replaceTrackPromises.has(xn)&&["inactive","recvonly"].includes(xn.direction)})(an,xn)&&xn._recycledTransceivers[an.receiver.track.kind].push(an)})})(xn),function Gi(xn){var an=xn._peerConnection.localDescription;!an||!an.sdp||me(an.sdp).forEach(function(Ye){Te(Ye).forEach(function(ht,en){return xn._localCodecs.add(en)})})}(xn),function Oo(xn){var an=xn._peerConnection.remoteDescription;!an||!an.sdp||me(an.sdp).forEach(function(Ye){var pt=Ye.match(/^a=mid:(.+)$/m);if(pt&&pt[1]){var ht=pt[1],en=Te(Ye);xn._remoteCodecMaps.set(ht,en)}})}(xn),As(xn).then(function(){xn._handleQueuedPublisherHints()})}function As(xn){var an=xn._encodingParameters,ht=new Map([["audio",an.maxAudioBitrate],["video",an.maxVideoBitrate]]),en=[];return xn._peerConnection.getSenders().filter(function(dn){return dn.track}).forEach(function(dn){var ui=ht.get(dn.track.kind),_o=dn.getParameters();null===ui||0===ui?function go(xn){Array.isArray(xn.encodings)&&xn.encodings.forEach(function(an){return delete an.maxBitrate})}(_o):xn._isChromeScreenShareTrack(dn.track)?xn._log.warn("Not setting maxBitrate for "+dn.track.kind+" Track "+dn.track.id+" because it appears to be screen share track: "+dn.track.label):function Qu(xn,an){fr?xn.encodings=[{maxBitrate:an}]:xn.encodings.forEach(function(Ye){Ye.maxBitrate=an})}(_o,ui),!fr&&xn._enableDscp&&_o.encodings.length>0&&(_o.encodings[0].networkPriority="high");var rs=xn._rtpNewSenders.has(dn);xn._maybeUpdateEncodings(dn.track,_o.encodings,rs),xn._rtpNewSenders.delete(dn);var Is=dn.setParameters(_o).catch(function(no){xn._log.warn("Error while setting encodings parameters for "+dn.track.kind+" Track "+dn.track.id+": "+(no.message||no.name))});en.push(Is)}),Promise.all(en)}we.exports=Mi},6603:function(we,Oe,Y){"use strict";var me,U=this&&this.__extends||(me=function(ce,pe){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(be,Fe){be.__proto__=Fe}||function(be,Fe){for(var xe in Fe)Object.prototype.hasOwnProperty.call(Fe,xe)&&(be[xe]=Fe[xe])})(ce,pe)},function(ce,pe){if("function"!=typeof pe&&null!==pe)throw new TypeError("Class extends value "+String(pe)+" is not a constructor or null");function be(){this.constructor=ce}me(ce,pe),ce.prototype=null===pe?Object.create(pe):(be.prototype=pe.prototype,new be)}),te=this&&this.__read||function(me,ce){var pe="function"==typeof Symbol&&me[Symbol.iterator];if(!pe)return me;var Fe,Ue,be=pe.call(me),xe=[];try{for(;(void 0===ce||ce-- >0)&&!(Fe=be.next()).done;)xe.push(Fe.value)}catch(qe){Ue={error:qe}}finally{try{Fe&&!Fe.done&&(pe=be.return)&&pe.call(be)}finally{if(Ue)throw Ue.error}}return xe},oe=this&&this.__spreadArray||function(me,ce){for(var pe=0,be=ce.length,Fe=me.length;pe<be;pe++,Fe++)me[Fe]=ce[pe];return me},H=Y(7627).guessBrowser,j=Y(1058),M=Y(808),P=Y(7772),x=Y(9739),F=Y(8380).MediaConnectionError,J="firefox"===H(),se=function(me){function ce(pe,be,Fe){var xe=me.call(this)||this,Ue=(Fe=Object.assign({audioContextFactory:J?Y(7708):null,PeerConnectionV2:j},Fe)).audioContextFactory?Fe.audioContextFactory.getOrCreate(xe):null,qe=Ue?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(xe,{_audioContextFactory:{value:Fe.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:x.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:Ue?new M(ue(Ue)):null},_encodingParameters:{value:pe},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:qe},_peerConnections:{value:new Map},_preferredCodecs:{value:be},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:Fe.PeerConnectionV2}}),xe}return U(ce,me),ce.prototype.setEffectiveAdaptiveSimulcast=function(pe){this._peerConnections.forEach(function(be){return be.setEffectiveAdaptiveSimulcast(pe)}),this._preferredCodecs.video.forEach(function(be){"adaptiveSimulcast"in be&&(be.adaptiveSimulcast=pe)})},Object.defineProperty(ce.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),ce.prototype._closeAbsentPeerConnections=function(pe){var be=new Set(pe.map(function(Fe){return Fe.id}));return this._peerConnections.forEach(function(Fe){be.has(Fe.id)||Fe._close()}),this},ce.prototype._getConfiguration=function(){return this._configurationDeferred.promise},ce.prototype._getOrCreate=function(pe,be){var Fe=this,xe=this,Ue=this._peerConnections.get(pe);if(!Ue){var qe=this._PeerConnectionV2,Je=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},be);try{Ue=new qe(pe,this._encodingParameters,this._preferredCodecs,Je)}catch{throw new F}this._peerConnections.set(Ue.id,Ue),Ue.on("candidates",this.queue.bind(this,"candidates")),Ue.on("description",this.queue.bind(this,"description")),Ue.on("trackAdded",this.queue.bind(this,"trackAdded")),Ue.on("stateChanged",function Pe(Mt){"closed"===Mt&&(Ue.removeListener("stateChanged",Pe),xe._dataTrackSenders.forEach(function(Lt){return Ue.removeDataTrackSender(Lt)}),xe._mediaTrackSenders.forEach(function(Lt){return Ue.removeMediaTrackSender(Lt)}),xe._peerConnections.delete(Ue.id),xe._closedPeerConnectionIds.add(Ue.id),ye(xe),Ce(xe))}),Ue.on("connectionStateChanged",function(){return ye(Fe)}),Ue.on("iceConnectionStateChanged",function(){return Ce(Fe)}),this._dataTrackSenders.forEach(Ue.addDataTrackSender,Ue),this._mediaTrackSenders.forEach(Ue.addMediaTrackSender,Ue),Ce(this)}return Ue},ce.prototype.close=function(){return this._peerConnections.forEach(function(pe){pe.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),Ce(this),this},ce.prototype.createAndOffer=function(){var pe=this;return this._getConfiguration().then(function(be){var Fe;do{Fe=x.makeUUID()}while(pe._peerConnections.has(Fe));return pe._getOrCreate(Fe,be)}).then(function(be){return be.offer()}).then(function(){return pe})},ce.prototype.getTrackReceivers=function(){return x.flatMap(this._peerConnections,function(pe){return pe.getTrackReceivers()})},ce.prototype.getStates=function(){var pe=[];return this._peerConnections.forEach(function(be){var Fe=be.getState();Fe&&pe.push(Fe)}),pe},ce.prototype.setConfiguration=function(pe){return this._configuration&&(this._configurationDeferred=x.defer(),this._peerConnections.forEach(function(be){be.setConfiguration(pe)})),this._configuration=pe,this._configurationDeferred.resolve(pe),this},ce.prototype.setIceReconnectTimeout=function(pe){return null===this._sessionTimeout&&(this._peerConnections.forEach(function(be){be.setIceReconnectTimeout(pe)}),this._sessionTimeout=pe),this},ce.prototype.setTrackSenders=function(pe){var be=new Set(pe.filter(function(Ue){return"data"===Ue.kind})),Fe=new Set(pe.filter(function(Ue){return Ue&&("audio"===Ue.kind||"video"===Ue.kind)})),xe=function z(me,ce,pe){return{data:$(me,ce),media:G(me,pe)}}(this,be,Fe);return this._dataTrackSenders=be,this._mediaTrackSenders=Fe,function le(me,ce){(ce.data.add.size||ce.data.remove.size||ce.media.add.size||ce.media.remove.size)&&me._peerConnections.forEach(function(pe){ce.data.remove.forEach(pe.removeDataTrackSender,pe),ce.media.remove.forEach(pe.removeMediaTrackSender,pe),ce.data.add.forEach(pe.addDataTrackSender,pe),ce.media.add.forEach(pe.addMediaTrackSender,pe),(ce.media.add.size||ce.media.remove.size||ce.data.add.size&&!pe.isApplicationSectionNegotiated)&&pe.offer()})}(this,xe),this},ce.prototype.update=function(pe,be){var Fe=this;return void 0===be&&(be=!1),be&&this._closeAbsentPeerConnections(pe),this._getConfiguration().then(function(xe){return Promise.all(pe.map(function(Ue){return Fe._closedPeerConnectionIds.has(Ue.id)?null:Fe._getOrCreate(Ue.id,xe).update(Ue)}))}).then(function(){return Fe})},ce.prototype.getStats=function(){var pe=Array.from(this._peerConnections.values());return Promise.all(pe.map(function(be){return be.getStats().then(function(Fe){return[be.id,Fe]})})).then(function(be){return new Map(be)})},ce}(P);function ue(me){return me.createMediaStreamDestination().stream.getAudioTracks()[0]}function $(me,ce){return{add:x.difference(ce,me._dataTrackSenders),remove:x.difference(me._dataTrackSenders,ce)}}function G(me,ce){return{add:x.difference(ce,me._mediaTrackSenders),remove:x.difference(me._mediaTrackSenders,ce)}}var Ae,ae={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3};function he(me){return me.length?(Ae=Ae||function Te(){return Object.keys(ae).reduce(function(me,ce){var pe;return Object.assign(me,((pe={})[ae[ce]]=ce,pe))},{})}(),me.reduce(function(ce,pe){return Ae[Math.max(ae[ce],ae[pe])]})):"new"}function Ce(me){me._lastIceConnectionState=me.iceConnectionState,me._iceConnectionState=he(oe([],te(me._peerConnections.values())).map(function(ce){return ce.iceConnectionState})),me.iceConnectionState!==me._lastIceConnectionState&&me.emit("iceConnectionStateChanged")}function ye(me){me._lastConnectionState=me.connectionState,me._connectionState=he(oe([],te(me._peerConnections.values())).map(function(ce){return ce.connectionState})),me.connectionState!==me._lastConnectionState&&me.emit("connectionStateChanged")}we.exports=se},8069:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(4071),oe=1,H=function(j){function M(P,x){var F=j.call(this,P,"publisher_hints",x)||this;return F.on("ready",function(J){F._log.debug("publisher_hints transport ready:",J),J.on("message",function(se){"publisher_hints"===(F._log.debug("Incoming: ",se),se.type)?se.publisher&&se.publisher.hints&&se.publisher.id&&F._processPublisherHints(se.publisher.hints,se.publisher.id):F._log.warn("Unknown message type: ",se.type)})}),F}return U(M,j),M.prototype.sendTrackReplaced=function(P){if(this._transport){var F={type:"client_reset",track:P.trackSid,id:oe++};this._log.debug("Outgoing: ",F),this._transport.publish(F)}},M.prototype.sendHintResponse=function(P){if(this._transport){var J={type:"publisher_hints",id:P.id,hints:P.hints};this._log.debug("Outgoing: ",J),this._transport.publish(J)}},M.prototype._processPublisherHints=function(P,x){try{this.emit("updated",P,x)}catch(F){this._log.error("error processing hints:",F)}},M}(te);we.exports=H},8930:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(){var M=H.call(this)||this;return Object.defineProperties(M,{_revision:{value:1,writable:!0}}),M}return U(j,H),j.prototype.update=function(M){return M.revision<this._revision?this:(this._revision=M.revision,this.enable(M.is_recording))},j}(Y(9987));we.exports=oe},1118:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(2184),oe=Y(467),H=function(j){function M(P,x,F,J,se,ue){var le=j.call(this,P.sid,P.identity)||this;return ue=Object.assign({RemoteTrackPublicationV2:oe},ue),Object.defineProperties(le,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:ue.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:x},updateSubscriberTrackPriority:{value:function($,z){return F($,z)}},updateTrackRenderHint:{value:function($,z){return J($,z)}},clearTrackHint:{value:function($){return se($)}},revision:{enumerable:!0,get:function(){return this._revision}}}),le.update(P)}return U(M,j),M.prototype._getOrCreateTrack=function(P){var x=this._RemoteTrackPublicationV2,F=this.tracks.get(P.sid);return F||(F=new x(P,this._getInitialTrackSwitchOffState(P.sid)),this.addTrack(F)),F},M.prototype.update=function(P){var x=this;if(null!==this.revision&&P.revision<=this.revision)return this;this._revision=P.revision;var F=new Set;switch(P.tracks.forEach(function(J){var se=x._getOrCreateTrack(J);se.update(J),F.add(se)}),this.tracks.forEach(function(J){F.has(J)||x.removeTrack(J)}),P.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this},M}(te);we.exports=H},467:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){return H.call(this,M.sid,M.name,M.kind,M.enabled,M.priority,P)||this}return U(j,H),j.prototype.update=function(M){return this.enable(M.enabled),this.setPriority(M.priority),this},j}(Y(8956));we.exports=oe},7818:function(we,Oe,Y){"use strict";var x,U=this&&this.__extends||(x=function(F,J){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,ue){se.__proto__=ue}||function(se,ue){for(var le in ue)Object.prototype.hasOwnProperty.call(ue,le)&&(se[le]=ue[le])})(F,J)},function(F,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function se(){this.constructor=F}x(F,J),F.prototype=null===J?Object.create(J):(se.prototype=J.prototype,new se)}),te=Y(4071),oe=Y(6543),H=Y(9739).isDeepEqual,M=1,P=function(x){function F(J,se){var ue=x.call(this,J,"render_hints",se)||this;return Object.defineProperties(ue,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new oe(function(){ue._sendAllHints(),ue._responseTimer.setDelay(2*ue._responseTimer.delay)},2e3,!1)}}),ue.on("ready",function(le){le.on("message",function($){"render_hints"===(ue._log.debug("Incoming: ",$),$.type)?ue._processHintResults($&&$.subscriber&&$.subscriber.hints||[]):ue._log.warn("Unknown message type: ",$.type)}),ue._sendAllHints()}),ue}return U(F,x),F.prototype._sendAllHints=function(){var J=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(se){var ue=J._trackSidsToRenderHints.get(se);ue.renderDimensions&&(ue.isDimensionDirty=!0),"enabled"in ue&&(ue.isEnabledDirty=!0)}),this._sendHints()},F.prototype._processHintResults=function(J){var se=this;this._responseTimer.clear(),this._responseTimer.setDelay(2e3),J.forEach(function(ue){"OK"!==ue.result&&se._log.debug("Server error processing hint:",ue)}),this._sendHints()},F.prototype._sendHints=function(){var J=this;if(this._transport&&!this._responseTimer.isSet){var se=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(le){var $=J._trackSidsToRenderHints.get(le);if($.isEnabledDirty||$.isDimensionDirty){var z={track:le};$.isEnabledDirty&&(z.enabled=$.enabled,$.isEnabledDirty=!1),$.isDimensionDirty&&(z.render_dimensions=$.renderDimensions,$.isDimensionDirty=!1),se.push(z)}}),se.length>0){var ue={type:"render_hints",subscriber:{id:M++,hints:se}};this._log.debug("Outgoing: ",ue),this._transport.publish(ue),this._responseTimer.start()}}},F.prototype.setTrackHint=function(J,se){var ue=this._trackSidsToRenderHints.get(J)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in se&&ue.enabled!==se.enabled&&(ue.enabled=!!se.enabled,ue.isEnabledDirty=!0),se.renderDimensions&&!H(se.renderDimensions,ue.renderDimensions)&&(ue.renderDimensions=se.renderDimensions,ue.isDimensionDirty=!0),this._trackSidsToRenderHints.set(J,ue),this._sendHints()},F.prototype.clearTrackHint=function(J){this._trackSidsToRenderHints.delete(J)},F}(te);we.exports=P},2112:function(we,Oe,Y){"use strict";var Be,U=this&&this.__extends||(Be=function(Ge,Re){return(Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xe,Ot){Xe.__proto__=Ot}||function(Xe,Ot){for(var Kt in Ot)Object.prototype.hasOwnProperty.call(Ot,Kt)&&(Xe[Kt]=Ot[Kt])})(Ge,Re)},function(Ge,Re){if("function"!=typeof Re&&null!==Re)throw new TypeError("Class extends value "+String(Re)+" is not a constructor or null");function Xe(){this.constructor=Ge}Be(Ge,Re),Ge.prototype=null===Re?Object.create(Re):(Xe.prototype=Re.prototype,new Xe)}),te=this&&this.__read||function(Be,Ge){var Re="function"==typeof Symbol&&Be[Symbol.iterator];if(!Re)return Be;var Ot,Tt,Xe=Re.call(Be),Kt=[];try{for(;(void 0===Ge||Ge-- >0)&&!(Ot=Xe.next()).done;)Kt.push(Ot.value)}catch(zt){Tt={error:zt}}finally{try{Ot&&!Ot.done&&(Re=Xe.return)&&Re.call(Xe)}finally{if(Tt)throw Tt.error}}return Kt},oe=Y(2314),H=Y(9056),j=Y(5775),M=Y(8930),P=Y(8343),x=Y(1118),F=Y(7805),J=Y(8004),se=Y(5210),ue=Y(7818),le=Y(8069),$=Y(9739),z=$.constants.DEFAULT_SESSION_TIMEOUT_SEC,G=$.createBandwidthProfilePayload,ae=$.defer,Ae=$.difference,Te=$.filterObject,he=$.flatMap,Ce=$.oncePerTick,ye=Y(8218),me=Y(8380).createTwilioError,pe=function(Be){function Ge(Re,Xe,Ot,Kt,Tt){var zt=this;Xe.options=Object.assign({session_timeout:z},Xe.options),Tt=Object.assign({DominantSpeakerSignaling:oe,NetworkQualityMonitor:H,NetworkQualitySignaling:j,RecordingSignaling:M,RemoteParticipantV2:x,TrackPrioritySignaling:J,TrackSwitchOffSignaling:se,bandwidthProfile:null,sessionTimeout:1e3*Xe.options.session_timeout,statsPublishIntervalMs:1e4},Tt),Re.setBandwidthProfile(Tt.bandwidthProfile),Kt.setIceReconnectTimeout(Tt.sessionTimeout);var Qn=function(br){return zt._getTrackReceiver(br)},Ht=(zt=Be.call(this,Re,Xe.sid,Xe.name,Tt)||this)._log;return Object.defineProperties(zt,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:Tt.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:Re.bandwidthProfileRevision,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:Re.networkQualityConfiguration},_peerConnectionManager:{value:Kt},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:Tt.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new Tt.DominantSpeakerSignaling(Qn,{log:Ht})},_networkQualitySignaling:{value:new Tt.NetworkQualitySignaling(Qn,Re.networkQualityConfiguration,{log:Ht})},_renderHintsSignaling:{value:new ue(Qn,{log:Ht})},_publisherHintsSignaling:{value:new le(Qn,{log:Ht})},_trackPrioritySignaling:{value:new Tt.TrackPrioritySignaling(Qn,{log:Ht})},_trackSwitchOffSignaling:{value:new Tt.TrackSwitchOffSignaling(Qn,{log:Ht})},_pendingSwitchOffStates:{value:new Map},_transport:{value:Ot},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:Xe.options.media_region||null}}),zt._initTrackSwitchOffSignaling(),zt._initDominantSpeakerSignaling(),zt._initNetworkQualityMonitorSignaling(),zt._initPublisherHintSignaling(),function Ue(Be,Ge){var Re=Ce(function(){Be._publishNewLocalParticipantState()}),Xe=Ce(function(){var Ot=he(Ge.tracks,function(Kt){return Kt.trackTransceiver});Be._peerConnectionManager.setTrackSenders(Ot)});Ge.on("trackAdded",Xe),Ge.on("trackRemoved",Xe),Ge.on("updated",Re),Be.on("stateChanged",function Ot(Kt){"disconnected"===Kt&&(Ge.removeListener("trackAdded",Xe),Ge.removeListener("trackRemoved",Xe),Ge.removeListener("updated",Re),Be.removeListener("stateChanged",Ot),Ge.disconnect())}),Be.on("signalingConnectionStateChanged",function(){var Ot=Be.localParticipant,Tt=Ot.identity,zt=Ot.sid;switch(Be.signalingConnectionState){case"connected":Ot.connect(zt,Tt);break;case"reconnecting":Ot.reconnecting()}})}(zt,Re),function qe(Be,Ge){Ge.on("description",function(Xe){Be._publishPeerConnectionState(Xe)}),Ge.dequeue("description"),Ge.on("candidates",function(Xe){Be._publishPeerConnectionState(Xe)}),Ge.dequeue("candidates"),Ge.on("trackAdded",Be._addTrackReceiver.bind(Be)),Ge.dequeue("trackAdded"),Ge.getTrackReceivers().forEach(Be._addTrackReceiver,Be),Ge.on("connectionStateChanged",function(){Be.emit("connectionStateChanged")}),Ge.on("iceConnectionStateChanged",function(){Be.emit("iceConnectionStateChanged"),"failed"===Be.iceConnectionState&&(null!==Be.localParticipant.networkQualityLevel&&Be.localParticipant.setNetworkQualityLevel(0),Be.participants.forEach(function(Re){null!==Re.networkQualityLevel&&Re.setNetworkQualityLevel(0)}))})}(zt,Kt),function Je(Be,Ge){Ge.on("message",Be._update.bind(Be)),Ge.on("stateChanged",function Re(Xe,Ot){"disconnected"===Xe&&("disconnected"!==Be.state&&Be._disconnect(Ot),Ge.removeListener("stateChanged",Re)),Be.emit("signalingConnectionStateChanged")})}(zt,Ot),function Pe(Be,Ge,Re){var Xe=new Map,Ot=!1,Kt=setInterval(function(){Be.getStats().then(function(Tt){Ot=!Ot,Tt.forEach(function(zt,Qn){var Ht=new F(Qn,zt,!0);Ge.publishEvent("quality","stats-report","info",{audioTrackStats:Ht.remoteAudioTrackStats.map(function(fr,pr){return yt(fr,zt.remoteAudioTrackStats[pr],Xe)}),localAudioTrackStats:Ht.localAudioTrackStats.map(function(fr,pr){return Lt(fr,zt.localAudioTrackStats[pr],Xe)}),localVideoTrackStats:Ht.localVideoTrackStats.map(function(fr,pr){return Lt(fr,zt.localVideoTrackStats[pr],Xe)}),peerConnectionId:Ht.peerConnectionId,videoTrackStats:Ht.remoteVideoTrackStats.map(function(fr,pr){return yt(fr,zt.remoteVideoTrackStats[pr],Xe)})});var br=he(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(fr){return Ht[fr].map(function(pr){return pr.trackSid+"+"+pr.ssrc})});if(Ae(Array.from(Xe.keys()),br).forEach(function(fr){return Xe.delete(fr)}),Ot){var _r=function We(Be,Ge){return(Be=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:Ge,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},Te(Be||{},null))).localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},Te(Be.localCandidate||{},null)),Be.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},Te(Be.remoteCandidate||{},null)),Be}(zt.activeIceCandidatePair,Ht.peerConnectionId);Ge.publishEvent("quality","active-ice-candidate-pair","info",_r)}})},function(){})},Re);Be.on("stateChanged",function Tt(zt){"disconnected"===zt&&(clearInterval(Kt),Be.removeListener("stateChanged",Tt))})}(zt,Ot,Tt.statsPublishIntervalMs),zt._update(Xe),zt._peerConnectionManager.setEffectiveAdaptiveSimulcast(zt._publisherHintsSignaling.isSetup),zt}return U(Ge,Be),Object.defineProperty(Ge.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"signalingConnectionState",{get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),Ge.prototype._deleteTrackReceiverDeferred=function(Re){return this._trackReceiverDeferreds.delete(Re)},Ge.prototype._getOrCreateTrackReceiverDeferred=function(Re){var Xe=this._trackReceiverDeferreds.get(Re)||ae(),Kt=this._peerConnectionManager.getTrackReceivers().find(function(Tt){return Tt.id===Re&&"ended"!==Tt.readyState});return Kt?Xe.resolve(Kt):this._trackReceiverDeferreds.set(Re,Xe),Xe},Ge.prototype._addTrackReceiver=function(Re){return this._getOrCreateTrackReceiverDeferred(Re.id).resolve(Re),this},Ge.prototype._disconnect=function(Re){var Xe=Be.prototype._disconnect.call(this,Re);return Xe&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(Ot){Ot.publishFailed(Re||new Error("LocalParticipant disconnected"))}),Xe},Ge.prototype._getTrackReceiver=function(Re){var Xe=this;return this._getOrCreateTrackReceiverDeferred(Re).promise.then(function(Ot){return Xe._deleteTrackReceiverDeferred(Re),Ot})},Ge.prototype._getInitialTrackSwitchOffState=function(Re){var Xe=this._pendingSwitchOffStates.get(Re)||!1;return this._pendingSwitchOffStates.delete(Re),Xe&&this._log.warn("["+Re+"] was initially switched off! "),Xe},Ge.prototype._getTrackSidsToTrackSignalings=function(){var Re=he(this.participants,function(Xe){return Array.from(Xe.tracks)});return new Map(Re)},Ge.prototype._getOrCreateRemoteParticipant=function(Re){var Xe=this,Ot=this._RemoteParticipantV2,Kt=this.participants.get(Re.sid),Tt=this;return Kt||((Kt=new Ot(Re,function(zt){return Xe._getInitialTrackSwitchOffState(zt)},function(zt,Qn){return Xe._trackPrioritySignaling.sendTrackPriorityUpdate(zt,"subscribe",Qn)},function(zt,Qn){return Xe._renderHintsSignaling.setTrackHint(zt,Qn)},function(zt){return Xe._renderHintsSignaling.clearTrackHint(zt)})).on("stateChanged",function zt(Qn){"disconnected"===Qn&&(Kt.removeListener("stateChanged",zt),Tt.participants.delete(Kt.sid),Tt._disconnectedParticipantRevisions.set(Kt.sid,Kt.revision))}),this.connectParticipant(Kt)),Kt},Ge.prototype._getState=function(){return{participant:this.localParticipant.getState()}},Ge.prototype._maybeAddBandwidthProfile=function(Re){var Xe=this.localParticipant,Ot=Xe.bandwidthProfile,Kt=Xe.bandwidthProfileRevision;return Ot&&this._lastBandwidthProfileRevision<Kt?(this._lastBandwidthProfileRevision=Kt,Object.assign({bandwidth_profile:G(Ot)},Re)):Re},Ge.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},Ge.prototype._publishPeerConnectionState=function(Re){this._transport.publish(Object.assign({peer_connections:[Re]},this._getState()))},Ge.prototype._update=function(Re){var Xe=this;if(Re.subscribed&&Re.subscribed.revision>this._subscribedRevision){this._subscribedRevision=Re.subscribed.revision,Re.subscribed.tracks.forEach(function(Tt){Tt.id?(Xe._subscriptionFailures.delete(Tt.sid),Xe._subscribed.set(Tt.sid,Tt.id)):Tt.error&&!Xe._subscriptionFailures.has(Tt.sid)&&Xe._subscriptionFailures.set(Tt.sid,Tt.error)});var Ot=new Set(Re.subscribed.tracks.filter(function(Tt){return!!Tt.id}).map(function(Tt){return Tt.sid}));this._subscribed.forEach(function(Tt,zt){Ot.has(zt)||Xe._subscribed.delete(zt)})}var Kt=new Set;return(Re.participants||[]).forEach(function(Tt){if(Tt.sid!==Xe.localParticipant.sid){var zt=Xe._disconnectedParticipantRevisions.get(Tt.sid);if(!(zt&&Tt.revision<=zt)){zt&&Xe._disconnectedParticipantRevisions.delete(Tt.sid);var Qn=Xe._getOrCreateRemoteParticipant(Tt);Qn.update(Tt),Kt.add(Qn)}}}),"synced"===Re.type&&this.participants.forEach(function(Tt){Kt.has(Tt)||Tt.disconnect()}),function Mt(Be){var Ge=Be._getTrackSidsToTrackSignalings();Be._subscriptionFailures.forEach(function(Re,Xe){var Ot=Ge.get(Xe);Ot&&(Be._subscriptionFailures.delete(Xe),Ot.subscribeFailed(me(Re.code,Re.message)))}),Ge.forEach(function(Re){var Xe=Be._subscribed.get(Re.sid);(!Xe||Re.isSubscribed&&Re.trackTransceiver.id!==Xe)&&Re.setTrackTransceiver(null),Xe&&Be._getTrackReceiver(Xe).then(function(Ot){return Re.setTrackTransceiver(Ot)})})}(this),Re.peer_connections&&this._peerConnectionManager.update(Re.peer_connections,"synced"===Re.type),Re.recording&&this.recording.update(Re.recording),Re.published&&Re.published.revision>this._publishedRevision&&(this._publishedRevision=Re.published.revision,Re.published.tracks.forEach(function(Tt){Tt.sid&&Xe._published.set(Tt.id,Tt.sid)}),this.localParticipant.update(Re.published)),Re.participant&&this.localParticipant.connect(Re.participant.sid,Re.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(Tt){var zt=Tt.channel;!Tt.isSetup&&Re.media_signaling&&Re.media_signaling[zt]&&Re.media_signaling[zt].transport&&"data-channel"===Re.media_signaling[zt].transport.type&&Tt.setup(Re.media_signaling[zt].transport.label)}),this},Ge.prototype._initPublisherHintSignaling=function(){var Re=this;this._publisherHintsSignaling.on("updated",function(Ot,Kt){Promise.all(Ot.map(function(Tt){return Re.localParticipant.setPublisherHint(Tt.track,Tt.encodings).then(function(zt){return{track:Tt.track,result:zt}})})).then(function(Tt){Re._publisherHintsSignaling.sendHintResponse({id:Kt,hints:Tt})})});var Xe=function(Ot){"video"===Ot.kind&&Ot.trackTransceiver.on("replaced",function(){Re._publisherHintsSignaling.sendTrackReplaced({trackSid:Ot.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(Ot){return Xe(Ot)}),this.localParticipant.on("trackAdded",function(Ot){return Xe(Ot)})},Ge.prototype._initTrackSwitchOffSignaling=function(){var Re=this;this._trackSwitchOffSignaling.on("updated",function(Xe,Ot){try{Re._log.debug("received trackSwitch: ",{tracksOn:Ot,tracksOff:Xe});var Kt=new Map;Ot.forEach(function(Tt){return Kt.set(Tt,!0)}),Xe.forEach(function(Tt){Kt.get(Tt)&&Re._log.warn(Tt+" is DUPLICATED in both tracksOff and tracksOn list"),Kt.set(Tt,!1)}),Re.participants.forEach(function(Tt){Tt.tracks.forEach(function(zt){var Qn=Kt.get(zt.sid);typeof Qn<"u"&&(zt.setSwitchedOff(!Qn),Kt.delete(zt.sid))})}),Kt.forEach(function(Tt,zt){return Re._pendingSwitchOffStates.set(zt,!Tt)})}catch(Tt){Re._log.error("error processing track switch off:",Tt)}})},Ge.prototype._initDominantSpeakerSignaling=function(){var Re=this;this._dominantSpeakerSignaling.on("updated",function(){return Re.setDominantSpeaker(Re._dominantSpeakerSignaling.loudestParticipantSid)})},Ge.prototype._initNetworkQualityMonitorSignaling=function(){var Re=this;this._networkQualitySignaling.on("ready",function(){var Xe=new Re._NetworkQualityMonitor(Re._peerConnectionManager,Re._networkQualitySignaling);Re._networkQualityMonitor=Xe,Xe.on("updated",function(){"failed"!==Re.iceConnectionState&&(Re.localParticipant.setNetworkQualityLevel(Xe.level,Xe.levels),Re.participants.forEach(function(Ot){var Kt=Xe.remoteLevels.get(Ot.sid);Kt&&Ot.setNetworkQualityLevel(Kt.level,Kt)}))}),Xe.start()}),this._networkQualitySignaling.on("teardown",function(){return Re._teardownNetworkQualityMonitor()})},Ge.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},Ge.prototype.getStats=function(){var Re=this;return this._peerConnectionManager.getStats().then(function(Xe){return new Map(Array.from(Xe).map(function(Ot){var Kt=te(Ot,2),zt=Kt[1];return[Kt[0],Object.assign({},zt,{localAudioTrackStats:Fe(Re,zt.localAudioTrackStats),localVideoTrackStats:Fe(Re,zt.localVideoTrackStats),remoteAudioTrackStats:xe(Re,zt.remoteAudioTrackStats),remoteVideoTrackStats:xe(Re,zt.remoteVideoTrackStats)})]}))})},Ge}(P);function be(Be,Ge){return Ge.reduce(function(Re,Xe){var Ot=Be.get(Xe.trackId);return Ot?[Object.assign({},Xe,{trackSid:Ot})].concat(Re):Re},[])}function Fe(Be,Ge){return be(Be._published,Ge)}function xe(Be,Ge){return be(new Map(Array.from(Be._subscribed.entries()).map(function(Xe){var Ot=te(Xe,2);return[Ot[1],Ot[0]]})),Ge)}function Lt(Be,Ge,Re){var Xe=Ge.framesEncoded,Ot=Ge.packetsSent,Kt=Ge.totalEncodeTime,Tt=Ge.totalPacketSendDelay,zt=Object.assign({},Be),Qn=Be.trackSid+"+"+Be.ssrc,Ht=Re.get(Qn)||new Map;if("number"==typeof Kt&&"number"==typeof Xe){var br=Ht.get("avgEncodeDelay")||new ye;br.putSample(1e3*Kt,Xe),zt.avgEncodeDelay=Math.round(br.get()),Ht.set("avgEncodeDelay",br)}if("number"==typeof Tt&&"number"==typeof Ot){var Sr=Ht.get("avgPacketSendDelay")||new ye;Sr.putSample(1e3*Tt,Ot),zt.avgPacketSendDelay=Math.round(Sr.get()),Ht.set("avgPacketSendDelay",Sr)}return Re.set(Qn,Ht),zt}function yt(Be,Ge,Re){var Xe=Ge.estimatedPlayoutTimestamp,Ot=Ge.framesDecoded,Kt=Ge.jitterBufferDelay,Tt=Ge.jitterBufferEmittedCount,zt=Ge.totalDecodeTime,Qn=Object.assign({},Be),Ht=Be.trackSid+"+"+Be.ssrc,br=Re.get(Ht)||new Map;if("number"==typeof Xe&&(Qn.estimatedPlayoutTimestamp=Xe),"number"==typeof Ot&&"number"==typeof zt){var Sr=br.get("avgDecodeDelay")||new ye;Sr.putSample(1e3*zt,Ot),Qn.avgDecodeDelay=Math.round(Sr.get()),br.set("avgDecodeDelay",Sr)}if("number"==typeof Kt&&"number"==typeof Tt){var _r=br.get("avgJitterBufferDelay")||new ye;_r.putSample(1e3*Kt,Tt),Qn.avgJitterBufferDelay=Math.round(_r.get()),br.set("avgJitterBufferDelay",_r)}return Re.set(Ht,br),Qn}we.exports=pe},8004:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,"track_priority",P)||this;return Object.defineProperties(x,{_enqueuedPriorityUpdates:{value:new Map}}),x.on("ready",function(F){Array.from(x._enqueuedPriorityUpdates.keys()).forEach(function(J){F.publish({type:"track_priority",track:J,subscribe:x._enqueuedPriorityUpdates.get(J)})})}),x}return U(j,H),j.prototype.sendTrackPriorityUpdate=function(M,P,x){if("subscribe"!==P)throw new Error("only subscribe priorities are supported, found: "+P);this._enqueuedPriorityUpdates.set(M,x),this._transport&&this._transport.publish({type:"track_priority",track:M,subscribe:x})},j}(Y(4071));we.exports=oe},5210:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,"track_switch_off",P)||this;return x.on("ready",function(F){F.on("message",function(J){"track_switch_off"===J.type&&x._setTrackSwitchOffUpdates(J.off||[],J.on||[])})}),x}return U(j,H),j.prototype._setTrackSwitchOffUpdates=function(M,P){this.emit("updated",M,P)},j}(Y(4071));we.exports=oe},4892:function(we,Oe,Y){"use strict";var Ue,U=this&&this.__extends||(Ue=function(qe,Je){return(Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Pe,Mt){Pe.__proto__=Mt}||function(Pe,Mt){for(var Lt in Mt)Object.prototype.hasOwnProperty.call(Mt,Lt)&&(Pe[Lt]=Mt[Lt])})(qe,Je)},function(qe,Je){if("function"!=typeof Je&&null!==Je)throw new TypeError("Class extends value "+String(Je)+" is not a constructor or null");function Pe(){this.constructor=qe}Ue(qe,Je),qe.prototype=null===Je?Object.create(Je):(Pe.prototype=Je.prototype,new Pe)}),te=Y(8675),oe=Y(5330),H=Y(2606),j=Y(8701).reconnectBackoffConfig,M=Y(6543),P=Y(8701),x=P.SDK_NAME,F=P.SDK_VERSION,J=P.SDP_FORMAT,se=Y(9739),ue=se.createBandwidthProfilePayload,le=se.createMediaSignalingPayload,$=se.createSubscribePayload,z=se.getUserAgent,G=se.isNonArrayObject,ae=Y(8380),Ae=ae.createTwilioError,Te=ae.RoomCompletedError,he=ae.SignalingConnectionError,Ce=ae.SignalingServerBusyError,ce={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},pe=function(Ue){function qe(Je,Pe,Mt,Lt,yt,We){var Be;return We=Object.assign({Backoff:H,TwilioConnection:oe,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:z()},We),Be=Ue.call(this,"connecting",ce)||this,Object.defineProperties(Be,{_accessToken:{value:Pe},_automaticSubscription:{value:We.automaticSubscription},_bandwidthProfile:{value:We.bandwidthProfile},_dominantSpeaker:{value:We.dominantSpeaker},_adaptiveSimulcast:{value:We.adaptiveSimulcast},_eventObserver:{value:We.eventObserver,writable:!1},_renderHints:{value:We.renderHints},_iceServersStatus:{value:Array.isArray(We.iceServers)?"overrode":"acquire"},_localParticipant:{value:Mt},_name:{value:Je},_networkQuality:{value:G(We.networkQuality)||We.networkQuality},_options:{value:We},_peerConnectionManager:{value:Lt},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new We.Backoff(j)},_session:{value:null,writable:!0},_trackPriority:{value:We.trackPriority},_trackSwitchOff:{value:We.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:We.userAgent},_wsServer:{value:yt}}),function xe(Ue){function qe(){if("disconnected"!==Ue.state){Ue._twilioConnection&&Ue._twilioConnection.removeListener("message",Pe);var Ge=Ue._options,Ot=Ge.TwilioConnection,Kt=new Ot(Ue._wsServer,Object.assign({helloBody:"connecting"===Ue.state&&"acquire"===Ue._iceServersStatus?Ue._createIceMessage():Ue._createConnectOrSyncOrDisconnectMessage()},Ge));Kt.once("close",function(Tt){Tt===Ot.CloseReason.LOCAL?Je():Je(new Error(Tt))}),Kt.on("message",Pe),Ue._twilioConnection=Kt}}function Je(Be){if("disconnected"!==Ue.state){if(!Be)return void Ue.disconnect();var Ge=Ue._getReconnectTimer();if(!Ge){var Re=Be.message===oe.CloseReason.BUSY?new Ce:new he;return void Ue.disconnect(Re)}"connected"===Ue.state&&Ue.preempt("syncing"),Ge.then(qe)}}function Pe(Be){if("disconnected"!==Ue.state){if("error"===Be.type)return void Ue.disconnect(Ae(Be.code,Be.message));switch(Ue.state){case"connected":switch(Be.type){case"connected":case"synced":case"update":return void Ue.emit("message",Be);case"disconnected":return void Ue.disconnect("completed"===Be.status?new Te:null);default:return}case"connecting":switch(Be.type){case"iced":return void Ue._options.onIced(Be.ice_servers).then(function(){Ue._sendConnectOrSyncOrDisconnectMessage()});case"connected":return Ue._setSession(Be.session,Be.options.session_timeout),Ue.emit("connected",Be),void Ue.preempt("connected");case"synced":case"update":return void Ue._updatesReceived.push(Be);case"disconnected":return void Ue.disconnect("completed"===Be.status?new Te:null);default:return}case"syncing":switch(Be.type){case"connected":case"update":return void Ue._updatesReceived.push(Be);case"synced":return Ue._clearReconnectTimer(),Ue.emit("message",Be),void Ue.preempt("connected");case"disconnected":return void Ue.disconnect("completed"===Be.status?new Te:null);default:return}default:return}}}Ue.on("stateChanged",function Be(Ge){switch(Ge){case"connected":var Re=Ue._updatesToSend.splice(0);return Re.length&&Ue.publish(function Fe(Ue){return Ue.reduce(function(qe,Je){return(!qe.participant&&Je.participant||qe.participant&&Je.participant&&Je.participant.revision>qe.participant.revision)&&(qe.participant=Je.participant),!qe.peer_connections&&Je.peer_connections?qe.peer_connections=be(Je.peer_connections):qe.peer_connections&&Je.peer_connections&&(qe.peer_connections=be(qe.peer_connections.concat(Je.peer_connections))),qe},{})}(Re)),void Ue._updatesReceived.splice(0).forEach(function(Xe){return Ue.emit("message",Xe)});case"disconnected":return Ue._twilioConnection.removeListener("message",Pe),void Ue.removeListener("stateChanged",Be);default:return}});var Mt=Ue._options;"overrode"===Ue._iceServersStatus?(0,Mt.onIced)(Mt.iceServers).then(qe):qe()}(Be),Be}return U(qe,Ue),qe.prototype._createConnectOrSyncOrDisconnectMessage=function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var Je={connecting:"connect",syncing:"sync"}[this.state],Pe={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:Je,version:2};return"connect"===Pe.type?(Pe.ice_servers=this._iceServersStatus,Pe.publisher={name:x,sdk_version:F,user_agent:this._userAgent},this._bandwidthProfile&&(Pe.bandwidth_profile=ue(this._bandwidthProfile)),Pe.media_signaling=le(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),Pe.subscribe=$(this._automaticSubscription),Pe.format=J,Pe.token=this._accessToken):"sync"===Pe.type?(Pe.session=this._session,Pe.token=this._accessToken):"update"===Pe.type&&(Pe.session=this._session),Pe},qe.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}},qe.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var Je=this._createConnectOrSyncOrDisconnectMessage();Je&&this._twilioConnection.sendMessage(Je)},qe.prototype.disconnect=function(Je){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[Je]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0)},qe.prototype.publish=function(Je){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},Je)),!0;case"connecting":case"syncing":return this._updatesToSend.push(Je),!0;default:return!1}},qe.prototype.publishEvent=function(Je,Pe,Mt,Lt){this._eventObserver.emit("event",{group:Je,name:Pe,level:Mt,payload:Lt})},qe.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)},qe.prototype._setSession=function(Je,Pe){this._session=Je,this._sessionTimeoutMS=1e3*Pe},qe.prototype._getReconnectTimer=function(){var Je=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new M(function(){Je._sessionTimer&&(Je._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(Pe){Je._reconnectBackoff.backoff(Pe)}))},qe.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},qe}(te);function be(Ue){return Array.from(Ue.reduce(function(qe,Je){var Pe=qe.get(Je.id)||Je;return(!Pe.description&&Je.description||Pe.description&&Je.description&&Je.description.revision>Pe.description.revision)&&(Pe.description=Je.description),(!Pe.ice&&Je.ice||Pe.ice&&Je.ice&&Je.ice.revision>Pe.ice.revision)&&(Pe.ice=Je.ice),qe.set(Pe.id,Pe),qe},new Map).values())}we.exports=pe},8675:function(we,Oe,Y){"use strict";var le,U=this&&this.__extends||(le=function($,z){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,ae){G.__proto__=ae}||function(G,ae){for(var Ae in ae)Object.prototype.hasOwnProperty.call(ae,Ae)&&(G[Ae]=ae[Ae])})($,z)},function($,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function G(){this.constructor=$}le($,z),$.prototype=null===z?Object.create(z):(G.prototype=z.prototype,new G)}),te=this&&this.__read||function(le,$){var z="function"==typeof Symbol&&le[Symbol.iterator];if(!z)return le;var ae,Te,G=z.call(le),Ae=[];try{for(;(void 0===$||$-- >0)&&!(ae=G.next()).done;)Ae.push(ae.value)}catch(he){Te={error:he}}finally{try{ae&&!ae.done&&(z=G.return)&&z.call(G)}finally{if(Te)throw Te.error}}return Ae},oe=this&&this.__spreadArray||function(le,$){for(var z=0,G=$.length,ae=le.length;z<G;z++,ae++)le[ae]=$[z];return le},H=Y(9069).EventEmitter,j=Y(9739),M=function(le){function $(z,G){var ae=le.call(this)||this,Ae=null,Te=z;return G=function se(le){var $=new Map;for(var z in le)$.set(z,new Set(le[z]));return $}(G),Object.defineProperties(ae,{_lock:{get:function(){return Ae},set:function(he){Ae=he}},_reachableStates:{value:F(G)},_state:{get:function(){return Te},set:function(he){Te=he}},_states:{value:G},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==Ae}},state:{enumerable:!0,get:function(){return Te}}}),ae.on("stateChanged",function(he){ae._whenDeferreds.forEach(function(Ce){Ce.when(he,Ce.resolve,Ce.reject)})}),ae}return U($,le),$.prototype._whenPromise=function(z){var G=this;if("function"!=typeof z)return Promise.reject(new Error("when() executor must be a function"));var ae=j.defer();return ae.when=z,this._whenDeferreds.add(ae),ae.promise.then(function(Ae){return G._whenDeferreds.delete(ae),Ae},function(Ae){throw G._whenDeferreds.delete(ae),Ae})},$.prototype.bracket=function(z,G){var ae,Ae=this;function Te(he){if(Ae.hasLock(ae)&&Ae.releaseLockCompletely(ae),he)throw he}return this.takeLock(z).then(function(Ce){return G(ae=Ce)}).then(function(Ce){return Te(),Ce},Te)},$.prototype.hasLock=function(z){return this._lock===z},$.prototype.preempt=function(z,G,ae){if(!P(this._states,this.state,z))throw new Error('Cannot transition from "'+this.state+'" to "'+z+'"');var Ae;this.isLocked&&(Ae=this._lock,this._lock=null);var Te=null;G&&(Te=this.takeLockSync(G));var he=Te?null:this.takeLockSync("preemption");return this.transition(z,Te||he,ae),Ae&&Ae.resolve(),he&&this.releaseLock(he),Te},$.prototype.releaseLock=function(z){if(!this.isLocked)throw new Error("Could not release the lock for "+z.name+" because the StateMachine is not locked");if(!this.hasLock(z))throw new Error("Could not release the lock for "+z.name+" because "+this._lock.name+" has the lock");0===z.depth?(this._lock=null,z.resolve()):z.depth--},$.prototype.releaseLockCompletely=function(z){if(!this.isLocked)throw new Error("Could not release the lock for "+z.name+" because the StateMachine is not locked");if(!this.hasLock(z))throw new Error("Could not release the lock for "+z.name+" because "+this._lock.name+" has the lock");z.depth=0,this._lock=null,z.resolve()},$.prototype.takeLock=function(z){var G=this;if("object"==typeof z){var ae=z;return new Promise(function(he){he(G.takeLockSync(ae))})}var Ae=z;if(this.isLocked){var Te=this.takeLock.bind(this,Ae);return this._lock.promise.then(Te)}return Promise.resolve(this.takeLockSync(Ae))},$.prototype.takeLockSync=function(z){var G="string"==typeof z?null:z,ae=G?G.name:z;if(G&&!this.hasLock(G)||!G&&this.isLocked)throw new Error("Could not take the lock for "+ae+" because the lock for "+this._lock.name+" was not released");if(G)return G.depth++,G;var Ae=function x(le){var $=j.defer();return $.name=le,$.depth=0,$}(ae);return this._lock=Ae,Ae},$.prototype.transition=function(z,G,ae){if(ae=ae||[],this.isLocked){if(!G)throw new Error("You must provide the key in order to transition");if(!this.hasLock(G))throw new Error("Could not transition using the key for "+G.name+" because "+this._lock.name+" has the lock")}else if(G)throw new Error("Key provided for "+G.name+", but the StateMachine was not locked (possibly due to preemption)");if(!P(this._states,this.state,z))throw new Error('Cannot transition from "'+this.state+'" to "'+z+'"');this._state=z,this.emit.apply(this,oe([],te(["stateChanged",z].concat(ae))))},$.prototype.tryTransition=function(z,G,ae){try{this.transition(z,G,ae)}catch{return!1}return!0},$.prototype.when=function(z){var G=this;return this.state===z?Promise.resolve(this):P(this._reachableStates,this.state,z)?this._whenPromise(function(ae,Ae,Te){ae===z?Ae(G):P(G._reachableStates,ae,z)||Te(ue(ae,z))}):Promise.reject(ue(this.state,z))},$}(H);function P(le,$,z){return le.get($).has(z)}function F(le){return Array.from(le.keys()).reduce(function($,z){return $.set(z,J(le,z))},new Map)}function J(le,$,z){return z=z||new Set,le.get($).forEach(function(G){z.has(G)||(z.add(G),J(le,G,z).forEach(z.add,z))}),z}function ue(le,$){return new Error('"'+$+'" cannot be reached from "'+le+'"')}we.exports=M},7704:we=>{"use strict";we.exports=function Oe(Y){return(Y=Y.filter(function(U){return"number"==typeof U})).length<1?void 0:Y.reduce(function(U,te){return te+U})/Y.length}},4239:we=>{"use strict";var Oe=function(){function Y(U,te,oe,H){Object.defineProperties(this,{availableSend:{enumerable:!0,value:oe},recv:{enumerable:!0,value:te},rtt:{enumerable:!0,value:H},send:{enumerable:!0,value:U}})}return Y.of=function(U,te){var oe=(te.timestamp-U.timestamp)/1e3;return new Y(oe>0?(te.bytesSent-U.bytesSent)/oe*8:0,oe>0?(te.bytesReceived-U.bytesReceived)/oe*8:0,te.availableOutgoingBitrate,te.currentRoundTripTime)},Y}();we.exports=Oe},2483:(we,Oe,Y)=>{"use strict";var U=Y(4239),te=function(){function oe(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new U(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return oe.prototype.next=function(H){var j=this.lastStats;if(this.lastStats=H,j){var M=j.id===H.id?U.of(j,H):new U(0,0);this.lastReport=M}return this.lastReport},oe}();we.exports=te},6719:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x){var F=H.call(this,M,P,x)||this;return Object.defineProperties(F,{audioLevel:{value:"number"==typeof P.audioInputLevel?P.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof P.jitter?P.jitter:null,enumerable:!0}}),F}return U(j,H),j}(Y(3840));we.exports=oe},3840:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x){var F=H.call(this,M,P)||this;return Object.defineProperties(F,{bytesSent:{value:"number"==typeof P.bytesSent?P.bytesSent:x?0:null,enumerable:!0},packetsSent:{value:"number"==typeof P.packetsSent?P.packetsSent:x?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof P.roundTripTime?P.roundTripTime:x?0:null,enumerable:!0}}),F}return U(j,H),j}(Y(9078));we.exports=oe},1371:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P,x){var F=H.call(this,M,P,x)||this,J=null;"number"==typeof P.frameWidthInput&&"number"==typeof P.frameHeightInput&&(J={},Object.defineProperties(J,{width:{value:P.frameWidthInput,enumerable:!0},height:{value:P.frameHeightInput,enumerable:!0}}));var se=null;return"number"==typeof P.frameWidthSent&&"number"==typeof P.frameHeightSent&&(se={},Object.defineProperties(se,{width:{value:P.frameWidthSent,enumerable:!0},height:{value:P.frameHeightSent,enumerable:!0}})),Object.defineProperties(F,{captureDimensions:{value:J,enumerable:!0},dimensions:{value:se,enumerable:!0},captureFrameRate:{value:"number"==typeof P.frameRateInput?P.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof P.frameRateSent?P.frameRateSent:null,enumerable:!0}}),F}return U(j,H),j}(Y(3840));we.exports=oe},1908:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){return H.call(this,M)||this}return U(j,H),j}(Y(4976));we.exports=oe},4661:we=>{"use strict";we.exports=function Y(U){var te=U.actual,H=U.available,M=U.level;Object.defineProperties(this,{actual:{value:void 0===te?null:te,enumerable:!0},available:{value:void 0===H?null:H,enumerable:!0},level:{value:void 0===M?null:M,enumerable:!0}})}},2165:we=>{"use strict";we.exports=function Y(U){var te=U.fractionLost,H=U.level;Object.defineProperties(this,{fractionLost:{value:void 0===te?null:te,enumerable:!0},level:{value:void 0===H?null:H,enumerable:!0}})}},2590:we=>{"use strict";we.exports=function Y(U){var te=U.jitter,H=U.rtt,M=U.level;Object.defineProperties(this,{jitter:{value:void 0===te?null:te,enumerable:!0},rtt:{value:void 0===H?null:H,enumerable:!0},level:{value:void 0===M?null:M,enumerable:!0}})}},4976:(we,Oe,Y)=>{"use strict";var U=Y(220),te=Y(5206);we.exports=function H(j){var x=j.sendStats,F=void 0===x?null:x,J=j.recvStats,se=void 0===J?null:J;Object.defineProperties(this,{send:{value:j.send,enumerable:!0},recv:{value:j.recv,enumerable:!0},sendStats:{value:F?new U(F):null,enumerable:!0},recvStats:{value:se?new te(se):null,enumerable:!0}})}},5206:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){return H.call(this,M)||this}return U(j,H),j}(Y(4236));we.exports=oe},4236:(we,Oe,Y)=>{"use strict";var U=Y(4661),te=Y(2165),oe=Y(2590);we.exports=function j(M){var P=M.bandwidth,x=void 0===P?null:P,F=M.fractionLost,J=void 0===F?null:F,se=M.latency,ue=void 0===se?null:se;Object.defineProperties(this,{bandwidth:{value:x?new U(x):null,enumerable:!0},fractionLost:{value:J?new te(J):null,enumerable:!0},latency:{value:ue?new oe(ue):null,enumerable:!0}})}},220:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){return H.call(this,M)||this}return U(j,H),j}(Y(4236));we.exports=oe},669:(we,Oe,Y)=>{"use strict";var U=Y(1908),te=Y(2003);we.exports=function H(j){var P=j.audio,x=j.video;Object.defineProperties(this,{level:{value:j.level,enumerable:!0},audio:{value:P?new U(P):null,enumerable:!0},video:{value:x?new te(x):null,enumerable:!0}})}},2003:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M){return H.call(this,M)||this}return U(j,H),j}(Y(4976));we.exports=oe},5055:(we,Oe,Y)=>{"use strict";var U=Y(8020),te=Y(775),oe=function(){function H(j,M,P){Object.defineProperties(this,{ice:{enumerable:!0,value:j},audio:{enumerable:!0,value:M},video:{enumerable:!0,value:P}})}return H.prototype.summarize=function(){var j=this.audio.send.concat(this.video.send),M=te.summarize(j),P=this.audio.recv.concat(this.video.recv),x=U.summarize(P);return{ice:this.ice,send:M,recv:x,audio:{send:te.summarize(this.audio.send),recv:U.summarize(this.audio.recv)},video:{send:te.summarize(this.video.send),recv:U.summarize(this.video.recv)}}},H}();we.exports=oe},8753:function(we,Oe,Y){"use strict";var U=this&&this.__read||function(ce,pe){var be="function"==typeof Symbol&&ce[Symbol.iterator];if(!be)return ce;var xe,qe,Fe=be.call(ce),Ue=[];try{for(;(void 0===pe||pe-- >0)&&!(xe=Fe.next()).done;)Ue.push(xe.value)}catch(Je){qe={error:Je}}finally{try{xe&&!xe.done&&(be=Fe.return)&&be.call(Fe)}finally{if(qe)throw qe.error}}return Ue},te=this&&this.__spreadArray||function(ce,pe){for(var be=0,Fe=pe.length,xe=ce.length;be<Fe;be++,xe++)ce[xe]=pe[be];return ce},oe=this&&this.__values||function(ce){var pe="function"==typeof Symbol&&Symbol.iterator,be=pe&&ce[pe],Fe=0;if(be)return be.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&Fe>=ce.length&&(ce=void 0),{value:ce&&ce[Fe++],done:!ce}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")},H=Y(7627).guessBrowser,j=Y(2483),M=Y(5055),P=Y(1013),x=Y(1031),F=function(){function ce(pe){Object.defineProperties(this,{pc:{enumerable:!0,value:pe},ice:{enumerable:!0,value:new j},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return ce.prototype.next=function(){var pe=this,be="firefox"===H()?function ye(ce){var pe=ce.pc.getTransceivers().filter(function(Fe){return Fe.currentDirection&&Fe.currentDirection.match(/send/)&&Fe.sender.track}).map(function(Fe){return Fe.sender}),be=ce.pc.getTransceivers().filter(function(Fe){return Fe.currentDirection&&Fe.currentDirection.match(/recv/)}).map(function(Fe){return Fe.receiver});return Promise.all([J(pe),J(be),ce.pc.getStats()]).then(function(Fe){var xe=U(Fe,3),Ue=xe[0],qe=xe[1],Je=xe[2],Pe=ue(ce),Mt=G(ce);Ue.forEach(function(We,Be){return Ae(ce,We,Mt,Be)}),he(Pe,Mt);var Lt=le(ce),yt=ae(ce);qe.forEach(function(We,Be){return Te(ce,We,yt,Be)}),he(Lt,yt),Ce(ce.ice,Je)})}(this):function me(ce){return ce.pc.getStats().then(function(pe){var be=ue(ce),Fe=G(ce);Ae(ce,pe,Fe),he(be,Fe);var xe=le(ce),Ue=ae(ce);Te(ce,pe,Ue),he(xe,Ue),Ce(ce.ice,pe)})}(this);return be.then(function(){var Fe=te([],U(pe.audio.send.values())),xe=te([],U(pe.video.send.values())),Ue=te([],U(pe.audio.recv.values())),qe=te([],U(pe.video.recv.values())),Je=new M(pe.ice.lastReport,{send:Fe.map(function(Pe){return Pe.lastReport}).filter(function(Pe){return Pe}),recv:Ue.map(function(Pe){return Pe.lastReport}).filter(function(Pe){return Pe})},{send:xe.map(function(Pe){return Pe.lastReport}).filter(function(Pe){return Pe}),recv:qe.map(function(Pe){return Pe.lastReport}).filter(function(Pe){return Pe})});return pe.lastReport=Je,Je})},ce}();function J(ce){return Promise.all(ce.map(function(pe){var be=pe.track.id;return pe.getStats().then(function(Fe){var xe,Ue;try{for(var qe=oe(Fe.values()),Je=qe.next();!Je.done;Je=qe.next()){var Pe=Je.value;"inbound-rtp"===Pe.type&&(Pe.id=be+"-"+Pe.id)}}catch(Mt){xe={error:Mt}}finally{try{Je&&!Je.done&&(Ue=qe.return)&&Ue.call(qe)}finally{if(xe)throw xe.error}}return[be,Fe]})})).then(function(pe){return new Map(pe)})}function se(ce,pe,be,Fe,xe){var Ue=pe[Fe.mediaType];if(!xe){var qe=be.get(Fe.trackId);qe&&(xe=qe.trackIdentifier)}if(Ue&&xe){if(Ue.has(Fe.id))return Ue.get(Fe.id);var Je=new ce(xe,Fe);Ue.set(Fe.id,Je)}return null}function ue(ce){return{audio:ce.audio.send,video:ce.video.send}}function le(ce){return{audio:ce.audio.recv,video:ce.video.recv}}function $(ce,pe,be,Fe){return se(x,ue(ce),pe,be,Fe)}function z(ce,pe,be,Fe){return se(P,le(ce),pe,be,Fe)}function G(ce){return{audio:new Set(ce.audio.send.keys()),video:new Set(ce.video.send.keys())}}function ae(ce){return{audio:new Set(ce.audio.recv.keys()),video:new Set(ce.video.recv.keys())}}function Ae(ce,pe,be,Fe){var xe,Ue;try{for(var qe=oe(pe.values()),Je=qe.next();!Je.done;Je=qe.next()){var Pe=Je.value;if("outbound-rtp"===Pe.type&&!Pe.isRemote){if("firefox"!==H()&&!Pe.trackId)continue;var Mt=be[Pe.mediaType];Mt&&Mt.delete(Pe.id);var Lt=$(ce,pe,Pe,Fe);if(Lt){var yt=pe.get(Pe.remoteId);Lt.next(Fe||Lt.trackId,Pe,yt)}}}}catch(We){xe={error:We}}finally{try{Je&&!Je.done&&(Ue=qe.return)&&Ue.call(qe)}finally{if(xe)throw xe.error}}}function Te(ce,pe,be,Fe){var xe,Ue;try{for(var qe=oe(pe.values()),Je=qe.next();!Je.done;Je=qe.next()){var Pe=Je.value;if("inbound-rtp"===Pe.type&&!Pe.isRemote){var Mt=be[Pe.mediaType];Mt&&Mt.delete(Pe.id);var Lt=z(ce,pe,Pe,Fe);Lt&&Lt.next(Fe||Lt.trackId,Pe)}}}catch(yt){xe={error:yt}}finally{try{Je&&!Je.done&&(Ue=qe.return)&&Ue.call(qe)}finally{if(xe)throw xe.error}}}function he(ce,pe){var be=function(xe){var Ue=ce[xe];pe[xe].forEach(function(Je){return Ue.delete(Je)})};for(var Fe in pe)be(Fe)}function Ce(ce,pe){var be,Fe,xe,Ue,qe;try{for(var Je=oe(pe.values()),Pe=Je.next();!Pe.done;Pe=Je.next())"transport"===(Mt=Pe.value).type&&(qe=pe.get(Mt.selectedCandidatePairId))}catch(We){be={error:We}}finally{try{Pe&&!Pe.done&&(Fe=Je.return)&&Fe.call(Je)}finally{if(be)throw be.error}}if(qe)ce.next(qe);else try{for(var Lt=oe(pe.values()),yt=Lt.next();!yt.done;yt=Lt.next()){var Mt;"candidate-pair"===(Mt=yt.value).type&&Mt.nominated&&(!("selected"in Mt)||Mt.selected)&&ce.next(Mt)}}catch(We){xe={error:We}}finally{try{yt&&!yt.done&&(Ue=Lt.return)&&Ue.call(Lt)}finally{if(xe)throw xe.error}}}we.exports=F},8020:function(we,Oe,Y){"use strict";var M,U=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(F[se]=J[se])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(F.prototype=x.prototype,new F)}),te=Y(7704),oe=Y(7176),H=Y(7483),j=function(M){function P(x,F,J,se,ue,le,$){var z=M.call(this,x,F,J)||this;return Object.defineProperties(z,{deltaPacketsLost:{enumerable:!0,value:se},deltaPacketsReceived:{enumerable:!0,value:ue},fractionLost:{enumerable:!0,value:le},jitter:{enumerable:!0,value:$},phonyFractionLost:{enumerable:!0,value:ue>0?se/ue:0}}),z}return U(P,M),P.of=function(x,F,J){if(F.id!==J.id)throw new Error("RTCStats IDs must match");var se=(J.timestamp-F.timestamp)/1e3,le=se>0?(J.bytesReceived-F.bytesReceived)/se*8:0,$=Math.max(J.packetsLost-F.packetsLost,0);return new P(F.id,x,le,$,J.packetsReceived-F.packetsReceived,J.fractionLost,J.jitter)},P.summarize=function(x){var F=x.map(function(le){return le.summarize()});return{bitrate:H(F.map(function(le){return le.bitrate})),fractionLost:te(F.map(function(le){return le.fractionLost})),jitter:te(F.map(function(le){return le.jitter}))}},P.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},P}(oe);we.exports=j},1013:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(8020),H=function(j){function M(P,x){var F=j.call(this,x.id,P,x)||this;return Object.defineProperties(F,{lastReport:{enumerable:!0,value:null,writable:!0}}),F}return U(M,j),M.prototype.next=function(P,x){var F=this.lastStats;this.lastStats=x,this.trackId=P;var J=te.of(P,F,x);return this.lastReport=J,J},M}(Y(6986));we.exports=H},5180:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,P)||this;return Object.defineProperties(x,{audioLevel:{value:"number"==typeof P.audioOutputLevel?P.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof P.jitter?P.jitter:null,enumerable:!0}}),x}return U(j,H),j}(Y(2613));we.exports=oe},2613:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,P)||this;return Object.defineProperties(x,{bytesReceived:{value:"number"==typeof P.bytesReceived?P.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof P.packetsReceived?P.packetsReceived:null,enumerable:!0}}),x}return U(j,H),j}(Y(9078));we.exports=oe},993:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this,M,P)||this,F=null;return"number"==typeof P.frameWidthReceived&&"number"==typeof P.frameHeightReceived&&(F={},Object.defineProperties(F,{width:{value:P.frameWidthReceived,enumerable:!0},height:{value:P.frameHeightReceived,enumerable:!0}})),Object.defineProperties(x,{dimensions:{value:F,enumerable:!0},frameRate:{value:"number"==typeof P.frameRateReceived?P.frameRateReceived:null,enumerable:!0}}),x}return U(j,H),j}(Y(2613));we.exports=oe},7176:we=>{"use strict";we.exports=function Y(U,te,oe){Object.defineProperties(this,{id:{enumerable:!0,value:U},trackId:{enumerable:!0,value:te},bitrate:{enumerable:!0,value:oe}})}},6986:we=>{"use strict";we.exports=function Y(U,te,oe){Object.defineProperties(this,{id:{enumerable:!0,value:U,writable:!0},trackId:{enumerable:!0,value:te,writable:!0},lastStats:{enumerable:!0,value:oe,writable:!0}})}},775:function(we,Oe,Y){"use strict";var M,U=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(F[se]=J[se])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(F.prototype=x.prototype,new F)}),te=Y(7704),oe=Y(7176),H=Y(7483),j=function(M){function P(x,F,J,se){var ue=M.call(this,x,F,J)||this;return Object.defineProperties(ue,{rtt:{enumerable:!0,value:se}}),ue}return U(P,M),P.of=function(x,F,J,se){if(F.id!==J.id)throw new Error("RTCStats IDs must match");var ue=(J.timestamp-F.timestamp)/1e3;return new P(F.id,x,ue>0?(J.bytesSent-F.bytesSent)/ue*8:0,se&&"number"==typeof se.roundTripTime?se.roundTripTime/1e3:void 0)},P.summarize=function(x){return{bitrate:H(x.map(function(se){return se.bitrate})),rtt:te(x.map(function(se){return se.rtt}))}},P}(oe);we.exports=j},1031:function(we,Oe,Y){"use strict";var j,U=this&&this.__extends||(j=function(M,P){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,F){x.__proto__=F}||function(x,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(x[J]=F[J])})(M,P)},function(M,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=M}j(M,P),M.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),te=Y(6986),oe=Y(775),H=function(j){function M(P,x){var F=j.call(this,x.id,P,x)||this;return Object.defineProperties(F,{lastReport:{enumerable:!0,value:null,writable:!0}}),F}return U(M,j),M.prototype.next=function(P,x,F){var J=this.lastStats;this.lastStats=x,this.trackId=P;var se=oe.of(P,J,x,F);return this.lastReport=se,se},M}(te);we.exports=H},7805:(we,Oe,Y)=>{"use strict";var U=Y(6719),te=Y(1371),oe=Y(5180),H=Y(993);we.exports=function M(P,x,F){if("string"!=typeof P)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:P,enumerable:!0},localAudioTrackStats:{value:x.localAudioTrackStats.map(function(J){return new U(J.trackId,J,F)}),enumerable:!0},localVideoTrackStats:{value:x.localVideoTrackStats.map(function(J){return new te(J.trackId,J,F)}),enumerable:!0},remoteAudioTrackStats:{value:x.remoteAudioTrackStats.map(function(J){return new oe(J.trackId,J)}),enumerable:!0},remoteVideoTrackStats:{value:x.remoteVideoTrackStats.map(function(J){return new H(J.trackId,J)}),enumerable:!0}})}},7483:we=>{"use strict";we.exports=function Oe(Y){return Y.reduce(function(U,te){return"number"==typeof te?te+U:U},0)}},9078:we=>{"use strict";we.exports=function Y(U,te){if("string"!=typeof U)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:U,enumerable:!0},trackSid:{value:te.trackSid,enumerable:!0},timestamp:{value:te.timestamp,enumerable:!0},ssrc:{value:te.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof te.packetsLost?te.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof te.codecName?te.codecName:null,enumerable:!0}})}},4605:function(we,Oe,Y){"use strict";var H,U=this&&this.__extends||(H=function(j,M){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])})(j,M)},function(j,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=j}H(j,M),j.prototype=null===M?Object.create(M):(P.prototype=M.prototype,new P)}),oe=function(H){function j(M,P){var x=H.call(this)||this;return Object.defineProperties(x,{id:{enumerable:!0,value:M},kind:{enumerable:!0,value:P}}),x}return U(j,H),j.prototype.stop=function(){this.emit("stopped")},j}(Y(9069).EventEmitter);we.exports=oe},5330:function(we,Oe,Y){"use strict";var yt,U=this&&this.__extends||(yt=function(We,Be){return(yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ge,Re){Ge.__proto__=Re}||function(Ge,Re){for(var Xe in Re)Object.prototype.hasOwnProperty.call(Re,Xe)&&(Ge[Xe]=Re[Xe])})(We,Be)},function(We,Be){if("function"!=typeof Be&&null!==Be)throw new TypeError("Class extends value "+String(Be)+" is not a constructor or null");function Ge(){this.constructor=We}yt(We,Be),We.prototype=null===Be?Object.create(Be):(Ge.prototype=Be.prototype,new Ge)}),te=this&&this.__read||function(yt,We){var Be="function"==typeof Symbol&&yt[Symbol.iterator];if(!Be)return yt;var Re,Ot,Ge=Be.call(yt),Xe=[];try{for(;(void 0===We||We-- >0)&&!(Re=Ge.next()).done;)Xe.push(Re.value)}catch(Kt){Ot={error:Kt}}finally{try{Re&&!Re.done&&(Be=Ge.return)&&Be.call(Ge)}finally{if(Ot)throw Ot.error}}return Xe},oe=this&&this.__spreadArray||function(yt,We){for(var Be=0,Ge=We.length,Re=yt.length;Be<Ge;Be++,Re++)yt[Re]=We[Be];return yt},H=Y(8675),j=Y(9739),M=j.buildLogLevels,P=j.makeUUID,x=Y(1458),F=Y(2643),J=Y(6543),se=0,ue={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},le={closed:"close",open:"open",waiting:"waiting"},qe=globalThis,Je=qe.WebSocket?qe.WebSocket:Y(3332),Pe={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},Mt=new Map([[3e3,Pe.TIMEOUT],[3001,Pe.TIMEOUT],[3002,Pe.FAILED],[3003,Pe.FAILED],[3004,Pe.TIMEOUT],[3006,Pe.BUSY],[3007,Pe.TIMEOUT]]),Lt=function(yt){function We(Be,Ge){var Re=yt.call(this,"early",ue)||this;Ge=Object.assign({helloBody:null,maxConsecutiveFailedHellos:3,maxConsecutiveMissedHeartbeats:3,requestedHeartbeatTimeout:5e3,openTimeout:15e3,welcomeTimeout:5e3,Log:x,WebSocket:Je},Ge);var Xe=M(Ge.logLevel),Ot=new Ge.Log("default",Re,Xe,Ge.loggerName),Kt=Ge.networkMonitor?new F(function(){var zt=Kt.type,Qn="Network changed"+(zt?" to "+zt:"");Ot.debug(Qn),Re._close({code:3004,reason:Qn})}):null;Object.defineProperties(Re,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:Ge.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:Ge.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++se},_log:{value:Ot},_messageQueue:{value:[]},_networkMonitor:{value:Kt},_options:{value:Ge},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:Be},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var Tt={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return Re.on("stateChanged",function(zt){for(var Qn=[],Ht=1;Ht<arguments.length;Ht++)Qn[Ht-1]=arguments[Ht];zt in le&&Re.emit.apply(Re,oe([le[zt]],te(Qn)));var br={name:zt,group:"signaling",level:Tt[Re.state]};if("closed"===zt){var Sr=te(Qn,1),_r=Sr[0];br.payload={reason:_r},br.level=_r===Pe.LOCAL?"info":"error"}Re._eventObserver.emit("event",br)}),Re._eventObserver.emit("event",{name:Re.state,group:"signaling",level:Tt[Re.state]}),Re._connect(),Re}return U(We,yt),We.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},We.prototype._close=function(Be){var Ge=Be.code,Re=Be.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&3005!==Ge&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var Xe=this._log;1e3===Ge?(Xe.debug("Closed"),this.transition("closed",null,[Pe.LOCAL])):(Xe.warn("Closed: "+Ge+" - "+Re),3005!==Ge&&this.transition("closed",null,[Mt.get(Ge)||Pe.REMOTE]));var Ot=this._ws.readyState,Kt=this._options.WebSocket;Ot!==Kt.CLOSING&&Ot!==Kt.CLOSED&&this._ws.close(Ge,Re)}},We.prototype._connect=function(){var Be=this,Ge=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void Ge.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var Re=this._ws;Ge.debug("Created a new WebSocket:",Re),Re.addEventListener("close",function(Ot){return Be._close(Ot)});var Xe=this._options.openTimeout;this._openTimeout=new J(function(){Be._close({code:3007,reason:"Failed to open in "+Xe+" ms"})},Xe),Re.addEventListener("open",function(){Ge.debug("WebSocket opened:",Re),Be._openTimeout.clear(),Be._startHandshake(),Be._networkMonitor&&Be._networkMonitor.start()}),Re.addEventListener("message",function(Ot){Ge.debug("Incoming: "+Ot.data);try{Ot=JSON.parse(Ot.data)}catch(Kt){return void Be.emit("error",Kt)}switch(Ot.type){case"bad":Be._handleBad(Ot);break;case"busy":Be._handleBusy(Ot);break;case"bye":break;case"msg":Be._handleMessage(Ot);case"heartbeat":Be._handleHeartbeat();break;case"welcome":Be._handleWelcome(Ot);break;default:Be._log.debug("Unknown message type: "+Ot.type),Be.emit("error",new Error("Unknown message type: "+Ot.type))}})},We.prototype._handleBad=function(Be){var Ge=Be.reason,Re=this._log;if(["connecting","open"].includes(this.state))return"connecting"===this.state?(Re.warn("Closing: 3002 - "+Ge),void this._close({code:3002,reason:Ge})):(Re.debug("Error: "+Ge),void this.emit("error",new Error(Ge)));Re.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')},We.prototype._handleBusy=function(Be){var Ge=this,Re=Be.cookie,Xe=Be.keepAlive,Ot=Be.retryAfter,Kt=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var Tt=Ot<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+Ot+" ms";if(Ot<0)return Kt.warn("Closing: 3006 - "+Tt),void this._close({code:3006,reason:Tt});this._hellosLeft=this._options.maxConsecutiveFailedHellos,this._cookie=Re||null,Xe?(Kt.warn(Tt),this._busyWaitTimeout=new J(function(){return Ge._startHandshake()},Ot)):(Kt.warn("Closing: 3005 - "+Tt),this._close({code:3005,reason:Tt}),this._busyWaitTimeout=new J(function(){return Ge._connect()},Ot)),this.transition("waiting",null,[Xe,Ot])}else Kt.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')},We.prototype._handleHeartbeat=function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')},We.prototype._handleHeartbeatTimeout=function(){if("open"===this.state){var Be=this._log,Ge=this._options.maxConsecutiveMissedHeartbeats;Be.debug("Consecutive heartbeats missed: "+Ge);var Re="Missed "+Ge+' "heartbeat" messages';Be.warn("Closing: 3001 - "+Re),this._close({code:3001,reason:Re})}},We.prototype._handleMessage=function(Be){"open"===this.state?this.emit("message",Be.body):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')},We.prototype._handleWelcome=function(Be){var Ge=this,Re=Be.negotiatedTimeout,Xe=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(Xe.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var Kt=Re*this._options.maxConsecutiveMissedHeartbeats,Tt=Re-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new J(function(){return Ge._handleHeartbeatTimeout()},Kt),this._messageQueue.splice(0).forEach(function(zt){return Ge._send(zt)}),this._sendHeartbeatTimeout=new J(function(){return Ge._sendHeartbeat()},Tt),this.transition("open")}else Xe.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')},We.prototype._handleWelcomeTimeout=function(){if("connecting"===this.state){var Be=this._log;if(this._hellosLeft<=0){var Ge="All handshake attempts failed";return Be.warn("Closing: 3000 - "+Ge),void this._close({code:3e3,reason:Ge})}Be.warn("Handshake attempt "+(this._options.maxConsecutiveFailedHellos-this._hellosLeft)+" failed"),this._startHandshake()}},We.prototype._send=function(Be){if(this._ws.readyState===this._options.WebSocket.OPEN){var Xe=JSON.stringify(Be);this._log.debug("Outgoing: "+Xe);try{this._ws.send(Xe),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var Ot="Failed to send message";this._log.warn("Closing: 3003 - "+Ot),this._close({code:3003,reason:Ot})}}},We.prototype._sendHeartbeat=function(){"closed"!==this.state&&this._send({type:"heartbeat"})},We.prototype._sendHello=function(){var Be=this._options,Ge=Be.helloBody,Re=Be.requestedHeartbeatTimeout,Xe={id:P(),timeout:Re,type:"hello",version:2};this._cookie&&(Xe.cookie=this._cookie),Ge&&(Xe.body=Ge),this._send(Xe)},We.prototype._sendOrEnqueue=function(Be){var Ge=this;"closed"!==this.state&&("open"===this.state?function(Xe){return Ge._send(Xe)}:function(Xe){return Ge._messageQueue.push(Xe)})(Be)},We.prototype._startHandshake=function(){var Be=this;["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state&&(this._hellosLeft--,this._sendHello(),this._welcomeTimeout=new J(function(){return Be._handleWelcomeTimeout()},this._options.welcomeTimeout))},We.prototype.close=function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))},We.prototype.sendMessage=function(Be){this._sendOrEnqueue({body:Be,type:"msg"})},We}(H);Lt.CloseReason=Pe,we.exports=Lt},6412:(we,Oe,Y)=>{"use strict";var U=Y(9739).defer,te=function(){function oe(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return oe.prototype.put=function(H){this._hasValue=!0,this._value=H;var j=this._deferreds.shift();return j&&j.resolve(H),this},oe.prototype.take=function(){var H=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var j=U();return this._deferreds.push(j),j.promise.then(function(M){return H._hasValue=!1,M})},oe}();we.exports=te},2606:we=>{var Oe=function(){function Y(U){Object.defineProperties(this,{_min:{value:U.min||100},_max:{value:U.max||1e4},_jitter:{value:U.jitter>0&&U.jitter<=1?U.jitter:0},_factor:{value:U.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var te=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var oe=Math.random(),H=Math.floor(oe*this._jitter*te);te=0==(1&Math.floor(10*oe))?te-H:te+H}return 0|Math.min(te,this._max)}},_timeoutID:{value:null,writable:!0}})}return Y.prototype.backoff=function(U){var te=this,oe=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){te._attempts++,U()},oe)},Y.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},Y}();we.exports=Oe},3948:function(we){"use strict";var Oe=this&&this.__read||function(J,se){var ue="function"==typeof Symbol&&J[Symbol.iterator];if(!ue)return J;var $,G,le=ue.call(J),z=[];try{for(;(void 0===se||se-- >0)&&!($=le.next()).done;)z.push($.value)}catch(ae){G={error:ae}}finally{try{$&&!$.done&&(ue=le.return)&&ue.call(le)}finally{if(G)throw G.error}}return z};function te(){return navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}we.exports={isAndroid:function Y(){return/Android/.test(navigator.userAgent)},isIOS:function U(){return/iPad|iPhone|iPod/.test(navigator.userAgent)},isIpad:function oe(){return te()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))},isIphone:function H(){return te()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))},isMobile:function j(){return/Mobi/.test(navigator.userAgent)},isNonChromiumEdge:function M(J){return"chrome"===J&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")},mobileWebKitBrowser:function x(J){return"safari"!==J?null:"brave"in navigator?"brave":["edge","edg"].find(function(se){return navigator.userAgent.toLowerCase().includes(se)})||null},rebrandedChromeBrowser:function P(J){if("chrome"!==J)return null;if("brave"in navigator)return"brave";var se=function F(J){for(var se=[],ue=[],le=0;le<J.length;le++)if("("===J[le])se.push(le);else if(")"===J[le]&&se.length>0){var $=se.pop();0===se.length&&ue.push(J.substring($,le+1))}return ue}(navigator.userAgent),le=se.reduce(function(G,ae){return G.replace(ae,"")},navigator.userAgent).match(/[^\s]+/g)||[];return Oe(le.map(function(G){return G.split("/")[0].toLowerCase()})).slice(2).find(function(G){return!["chrome","mobile","safari"].includes(G)})||null}}},8126:function(we){"use strict";var Oe=this&&this.__read||function(te,oe){var H="function"==typeof Symbol&&te[Symbol.iterator];if(!H)return te;var M,x,j=H.call(te),P=[];try{for(;(void 0===oe||oe-- >0)&&!(M=j.next()).done;)P.push(M.value)}catch(F){x={error:F}}finally{try{M&&!M.done&&(H=j.return)&&H.call(j)}finally{if(x)throw x.error}}return P},Y=this&&this.__spreadArray||function(te,oe){for(var H=0,j=oe.length,M=te.length;H<j;H++,M++)te[M]=oe[H];return te},U=function(){function te(oe,H){var j=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:H}}),Object.defineProperty(this,"_promise",{value:new Promise(function(M,P){oe(function(x){j._isCancelable=!1,M(x)},function(x){j._isCancelable=!1,P(x)},function(){return j._isCanceled})})})}return te.reject=function(oe){return new te(function(j,M){M(oe)},function(){})},te.resolve=function(oe){return new te(function(j){j(oe)},function(){})},te.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},te.prototype.catch=function(){var oe=[].slice.call(arguments),H=this._promise;return new te(function(M,P){H.catch.apply(H,Y([],Oe(oe))).then(M,P)},this._onCancel)},te.prototype.then=function(){var oe=[].slice.call(arguments),H=this._promise;return new te(function(M,P){H.then.apply(H,Y([],Oe(oe))).then(M,P)},this._onCancel)},te.prototype.finally=function(){var oe=[].slice.call(arguments),H=this._promise;return new te(function(M,P){H.finally.apply(H,Y([],Oe(oe))).then(M,P)},this._onCancel)},te}();we.exports=U},8701:(we,Oe,Y)=>{"use strict";var U=Y(1730);we.exports.SDK_NAME=U.name+".js",we.exports.SDK_VERSION=U.version,we.exports.SDP_FORMAT="unified",we.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},we.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},we.exports.DEFAULT_ENVIRONMENT="prod",we.exports.DEFAULT_REALM="us1",we.exports.DEFAULT_REGION="gll",we.exports.DEFAULT_LOG_LEVEL="warn",we.exports.DEFAULT_LOGGER_NAME="twilio-video",we.exports.WS_SERVER=function(oe,H){return H="gll"===H?"global":encodeURIComponent(H),"prod"===oe?"wss://"+H+".vss.twilio.com/signaling":"wss://"+H+".vss."+oe+".twilio.com/signaling"},we.exports.PUBLISH_MAX_ATTEMPTS=5,we.exports.PUBLISH_BACKOFF_JITTER=10,we.exports.PUBLISH_BACKOFF_MS=20,we.exports.typeErrors={ILLEGAL_INVOKE:function(oe,H){return new TypeError("Illegal call to "+oe+": "+H)},INVALID_TYPE:function(oe,H){return new TypeError(oe+" must be "+function te(oe){return["a","e","i","o","u"].includes(oe.toLowerCase()[0])?"an":"a"}(H)+" "+H)},INVALID_VALUE:function(oe,H){return new RangeError(oe+" must be one of "+H.join(", "))},REQUIRED_ARGUMENT:function(oe){return new TypeError(oe+" must be specified")}},we.exports.DEFAULT_FRAME_RATE=24,we.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,we.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,we.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,we.exports.DEFAULT_NQ_LEVEL_LOCAL=1,we.exports.DEFAULT_NQ_LEVEL_REMOTE=0,we.exports.MAX_NQ_LEVEL=3,we.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,we.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,we.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:1e3*we.exports.DEFAULT_SESSION_TIMEOUT_SEC,jitter:1},we.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},we.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},we.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},we.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},we.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},we.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}},9059:(we,Oe,Y)=>{"use strict";var U=Y(4687);we.exports=function H(j){var M=Y(7708),P={},x=M.getOrCreate(P),F=3;return function J(){return F--,U(x,j.srcObject,250).then(function(se){return!!se&&(!(F>0)||J())}).catch(function(){return!0})}().finally(function(){M.release(P)})}},1741:we=>{"use strict";var Oe=null;we.exports=function j(M){return Oe=Oe||document.createElement("canvas"),new Promise(function(P){var x=3;setTimeout(function F(){return x--,function H(M){try{var P=Oe.getContext("2d");P.drawImage(M,0,0,50,50);var F=P.getImageData(0,0,50,50).data.filter(function(se,ue){return(ue+1)%4});return 0===Math.max.apply(Math,F)}catch(se){return console.log("Error checking silence: ",se),!1}}(M)?x>0?setTimeout(F,250):P(!0):P(!1)},250)})}},2181:we=>{"use strict";var Oe=function(){function Y(U){var te=this;void 0===U&&(U=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){te._emitVisible("visible"===document.visibilityState)}}});for(var oe=0;oe<U;oe++)this._listeners.push([])}return Y.prototype.clear=function(){for(var U=this._listeners.length,te=0;te<U;te++)this._listeners[te]=[]},Y.prototype._listenerCount=function(){return this._listeners.reduce(function(U,te){return U+te.length},0)},Y.prototype._emitVisible=function(U){for(var te=this,oe=Promise.resolve(),H=function(M){oe=oe.then(function(){return te._emitVisiblePhase(M,U)})},j=1;j<=this._listeners.length;j++)H(j);return oe},Y.prototype._emitVisiblePhase=function(U,te){return Promise.all(this._listeners[U-1].map(function(H){var j=H(te);return j instanceof Promise?j:Promise.resolve(j)}))},Y.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},Y.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},Y.prototype.onVisibilityChange=function(U,te){if("number"!=typeof U||U<=0||U>this._listeners.length)throw new Error("invalid phase: ",U);return this._listeners[U-1].push(te),1===this._listenerCount()&&this._start(),this},Y.prototype.offVisibilityChange=function(U,te){if("number"!=typeof U||U<=0||U>this._listeners.length)throw new Error("invalid phase: ",U);var oe=this._listeners[U-1],H=oe.indexOf(te);return-1!==H&&(oe.splice(H,1),0===this._listenerCount()&&this._stop()),this},Y}();we.exports=new Oe(2)},8606:function(we,Oe,Y){"use strict";var M,U=this&&this.__extends||(M=function(P,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(F[se]=J[se])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=P}M(P,x),P.prototype=null===x?Object.create(x):(F.prototype=x.prototype,new F)}),te=Y(9069).EventEmitter,oe=["signaling","room","media","quality","video-processor","preflight"],H=["debug","error","info","warning"],j=function(M){function P(x,F,J,se){void 0===se&&(se=null);var ue=M.call(this)||this;return ue.on("event",function(le){var $=le.name,z=le.group,G=le.level,ae=le.payload;if("string"!=typeof $)throw J.error("Unexpected name: ",$),new Error("Unexpected name: ",$);if(!oe.includes(z))throw J.error("Unexpected group: ",z),new Error("Unexpected group: ",z);if(!H.includes(G))throw J.error("Unexpected level: ",G),new Error("Unexpected level: ",G);var Ae=Date.now(),Te=Ae-F,he=Object.assign({elapsedTime:Te,level:G},ae||{});x.publish(z,$,he);var Ce=Object.assign({elapsedTime:Te,group:z,level:G,name:$,timestamp:Ae},ae?{payload:ae}:{});J[{debug:"debug",error:"error",info:"info",warning:"warn"}[G]]("event",Ce),se&&"signaling"===z&&se.emit("event",Ce)}),ue}return U(P,M),P}(te);we.exports=j},3826:we=>{"use strict";var Oe=function(){function Y(U){U=Object.assign({getKey:function(oe){return oe},getValue:function(oe){return oe},isLessThanOrEqualTo:function(oe,H){return oe<=H}},U),Object.defineProperties(this,{_getKey:{value:U.getKey},_getValue:{value:U.getValue},_isLessThanOrEqualTo:{value:U.isLessThanOrEqualTo},_map:{value:new Map}})}return Y.prototype.toMap=function(){return new Map(this._map)},Y.prototype.updateAndFilter=function(U){return U.filter(this.update,this)},Y.prototype.update=function(U){var te=this._getKey(U),oe=this._getValue(U);return!(this._map.has(te)&&this._isLessThanOrEqualTo(oe,this._map.get(te))||(this._map.set(te,oe),0))},Y}();we.exports=Oe},9739:function(we,Oe,Y){"use strict";var Et,U=this&&this.__extends||(Et=function(Nt,Xt){return(Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ke,Me){Ke.__proto__=Me}||function(Ke,Me){for(var ot in Me)Object.prototype.hasOwnProperty.call(Me,ot)&&(Ke[ot]=Me[ot])})(Nt,Xt)},function(Nt,Xt){if("function"!=typeof Xt&&null!==Xt)throw new TypeError("Class extends value "+String(Xt)+" is not a constructor or null");function Ke(){this.constructor=Nt}Et(Nt,Xt),Nt.prototype=null===Xt?Object.create(Xt):(Ke.prototype=Xt.prototype,new Ke)}),te=this&&this.__read||function(Et,Nt){var Xt="function"==typeof Symbol&&Et[Symbol.iterator];if(!Xt)return Et;var Me,Dn,Ke=Xt.call(Et),ot=[];try{for(;(void 0===Nt||Nt-- >0)&&!(Me=Ke.next()).done;)ot.push(Me.value)}catch(un){Dn={error:un}}finally{try{Me&&!Me.done&&(Xt=Ke.return)&&Xt.call(Ke)}finally{if(Dn)throw Dn.error}}return ot},oe=this&&this.__spreadArray||function(Et,Nt){for(var Xt=0,Ke=Nt.length,Me=Et.length;Xt<Ke;Xt++,Me++)Et[Me]=Nt[Xt];return Et},H=Y(8701),j=H.typeErrors,M=H.trackPriority,P=Y(7627),x=Y(8066).sessionSID;function G(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function me(Et,Nt,Xt,Ke){if(!(Ke in Nt)&&!Ke.match(/^on[a-z]+$/)){var Me;try{Me=typeof Et[Ke]}catch{}"function"===Me&&(Nt[Ke]=function(){for(var ot,Dn=[],un=0;un<arguments.length;un++)Dn[un]=arguments[un];return(ot=this[Xt])[Ke].apply(ot,oe([],te(Dn)))})}}function be(Et){return"object"==typeof Et&&!Array.isArray(Et)}function Mt(Et){Object.getOwnPropertyNames(Et).forEach(function(Nt){Nt.startsWith("_")&&yt(Et,Nt)})}function yt(Et,Nt){var Xt=Object.getOwnPropertyDescriptor(Et,Nt);Xt.enumerable=!1,Object.defineProperty(Et,Nt,Xt)}function We(Et,Nt){void 0===Nt&&(Nt=[]),Nt.forEach(function(Xt){Et.hasOwnProperty(Xt)&&yt(Et,Xt)})}function Be(Et){return Et.map(Ot)}function Ot(Et){return Array.isArray(Et)?Be(Et):Et instanceof Set?function Ge(Et){return Be(oe([],te(Et)))}(Et):Et instanceof Map?function Re(Et){return oe([],te(Et.entries())).reduce(function(Nt,Xt){var Ke,Me=te(Xt,2);return Object.assign(((Ke={})[Me[0]]=Ot(Me[1]),Ke),Nt)},{})}(Et):Et&&"object"==typeof Et?function Xe(Et){return Object.entries(Et).reduce(function(Nt,Xt){var Ke,Me=te(Xt,2);return Object.assign(((Ke={})[Me[0]]=Ot(Me[1]),Ke),Nt)},{})}(Et):Et}function zt(Et){return Sr(Et,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:br},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function Ht(Et){return Sr(Et,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function br(Et){return Sr(Et,[{prop:M.PRIORITY_HIGH,type:"object",transform:Ht},{prop:M.PRIORITY_LOW,type:"object",transform:Ht},{prop:M.PRIORITY_STANDARD,type:"object",transform:Ht}])}function Sr(Et,Nt){return Nt.reduce(function(Xt,Ke){var Me,ot=Ke.prop,un=Ke.payloadProp,Oo=Ke.transform;return typeof Et[ot]===Ke.type?Object.assign(((Me={})[void 0===un?ot:un]=(void 0===Oo?function(mo){return mo}:Oo)(Et[ot]),Me),Xt):Xt},{})}Oe.constants=H,Oe.createBandwidthProfilePayload=function Tt(Et){return Sr(Et,[{prop:"video",type:"object",transform:zt}])},Oe.createMediaSignalingPayload=function Qn(Et,Nt,Xt,Ke,Me,ot){var Dn={transports:[{type:"data-channel"}]};return Object.assign(Et?{active_speaker:Dn}:{},Nt?{network_quality:Dn}:{},ot?{render_hints:Dn}:{},Me?{publisher_hints:Dn}:{},Xt?{track_priority:Dn}:{},Ke?{track_switch_off:Dn}:{})},Oe.createRoomConnectEventPayload=function Kt(Et){function Nt(Me){return Me?"true":"false"}var Xt={sessionSID:x,iceServers:(Et.iceServers||[]).length,audioTracks:(Et.tracks||[]).filter(function(Me){return"audio"===Me.kind}).length,videoTracks:(Et.tracks||[]).filter(function(Me){return"video"===Me.kind}).length,dataTracks:(Et.tracks||[]).filter(function(Me){return"data"===Me.kind}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(Me){var ot=te(Me,2),Dn=ot[0],un=ot[1];Xt[un=un||Dn]=Nt(!!Et[Dn])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(Me){var ot=te(Me,2),Dn=ot[0],un=ot[1];un=un||Dn,"number"==typeof Et[Dn]?Xt[un]=Et[Dn]:isNaN(Number(Et[Dn]))||(Xt[un]=Number(Et[Dn]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(Me){var ot=te(Me,2),Dn=ot[0],un=ot[1];un=un||Dn,"string"==typeof Et[Dn]?Xt[un]=Et[Dn]:"number"==typeof Et[Dn]&&"name"===Dn&&(Xt[un]=Et[Dn].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(Me){Me in Et&&(Xt[Me]=JSON.stringify(Et[Me]))}),"networkQuality"in Et&&(Xt.networkQualityConfiguration={},be(Et.networkQuality)?["local","remote"].forEach(function(Me){"number"==typeof Et.networkQuality[Me]&&(Xt.networkQualityConfiguration[Me]=Et.networkQuality[Me])}):(Xt.networkQualityConfiguration.remote=0,Xt.networkQualityConfiguration.local=Et.networkQuality?1:0)),Et.bandwidthProfile&&Et.bandwidthProfile.video){var Ke=Et.bandwidthProfile.video||{};Xt.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(Me){"number"==typeof Ke[Me]||"string"==typeof Ke[Me]?Xt.bandwidthProfileOptions[Me]=Ke[Me]:"boolean"==typeof Ke[Me]?Xt.bandwidthProfileOptions[Me]=Nt(Ke[Me]):"object"==typeof Ke[Me]&&(Xt.bandwidthProfileOptions[Me]=JSON.stringify(Ke[Me]))})}return{group:"room",name:"connect",level:"info",payload:Xt}},Oe.createSubscribePayload=function _r(Et){return{rules:[{type:Et?"include":"exclude",all:!0}],revision:1}},Oe.asLocalTrack=function F(Et,Nt){if(Et instanceof Nt.LocalAudioTrack||Et instanceof Nt.LocalVideoTrack||Et instanceof Nt.LocalDataTrack)return Et;if(Et instanceof Nt.MediaStreamTrack)return"audio"===Et.kind?new Nt.LocalAudioTrack(Et,Nt):new Nt.LocalVideoTrack(Et,Nt);throw j.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},Oe.asLocalTrackPublication=function J(Et,Nt,Xt,Ke){return new(0,{audio:Ke.LocalAudioTrackPublication,video:Ke.LocalVideoTrackPublication,data:Ke.LocalDataTrackPublication}[Et.kind])(Nt,Et,Xt,Ke)},Oe.capitalize=function se(Et){return Et[0].toUpperCase()+Et.slice(1)},Oe.deprecateEvents=function ue(Et,Nt,Xt,Ke){var Me=new Set;Nt.on("newListener",function ot(Dn){Xt.has(Dn)&&!Me.has(Dn)&&(Ke.deprecated(Et+"#"+Dn+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(Xt.get(Dn)?" Use "+Et+"#"+Xt.get(Dn)+" instead.":"")),Me.add(Dn)),Me.size>=Xt.size&&Nt.removeListener("newListener",ot)})},Oe.difference=function le(Et,Nt){Et=Array.isArray(Et)?new Set(Et):new Set(Et.values()),Nt=Array.isArray(Nt)?new Set(Nt):new Set(Nt.values());var Xt=new Set;return Et.forEach(function(Ke){Nt.has(Ke)||Xt.add(Ke)}),Xt},Oe.filterObject=function $(Et,Nt){return Object.keys(Et).reduce(function(Xt,Ke){return Et[Ke]!==Nt&&(Xt[Ke]=Et[Ke]),Xt},{})},Oe.flatMap=function z(Et,Nt){var Xt=Et instanceof Map||Et instanceof Set?Array.from(Et.values()):Et;return Nt=Nt||function(Me){return Me},Xt.reduce(function(Ke,Me){var ot=Nt(Me);return Ke.concat(ot)},[])},Oe.getPlatform=function ae(){var Et=G(),Xt=te(Et.match(/\(([^)]+)\)/)||[],2)[1];return te((void 0===Xt?"unknown":Xt).split(";").map(function(Dn){return Dn.trim()}),1)[0].toLowerCase()},Oe.getUserAgent=G,Oe.hidePrivateProperties=Mt,Oe.hidePrivateAndCertainPublicPropertiesInClass=function Lt(Et,Nt){return function(Xt){function Ke(){for(var Me=[],ot=0;ot<arguments.length;ot++)Me[ot]=arguments[ot];var Dn=Xt.apply(this,oe([],te(Me)))||this;return Mt(Dn),We(Dn,Nt),Dn}return U(Ke,Xt),Ke}(Et)},Oe.isDeepEqual=function pe(Et,Nt){if(Et===Nt)return!0;if(typeof Et!=typeof Nt)return!1;if(null===Et)return null===Nt;if(null===Nt)return!1;if(Array.isArray(Et))return Array.isArray(Nt)&&Et.length===Nt.length&&Et.every(function(Me,ot){return pe(Me,Nt[ot])});if("object"==typeof Et){var Xt=Object.keys(Et).sort(),Ke=Object.keys(Nt).sort();return!Array.isArray(Nt)&&pe(Xt,Ke)&&Xt.every(function(Me){return pe(Et[Me],Nt[Me])})}return!1},Oe.isNonArrayObject=be,Oe.inRange=function pr(Et,Nt,Xt){return Nt<=Et&&Et<=Xt},Oe.makeUUID=function Ae(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Et){var Nt=16*Math.random()|0;return("x"===Et?Nt:3&Nt|8).toString(16)})},Oe.oncePerTick=function Te(Et){var Nt=null;function Xt(){Nt=null,Et()}return function(){Nt&&clearTimeout(Nt),Nt=setTimeout(Xt)}},Oe.promiseFromEvents=function he(Et,Nt,Xt,Ke){return new Promise(function(Me,ot){function Dn(){var Gi=[].slice.call(arguments);Ke&&Nt.removeListener(Ke,un),Me.apply(void 0,oe([],te(Gi)))}function un(){var Gi=[].slice.call(arguments);Nt.removeListener(Xt,Dn),ot.apply(void 0,oe([],te(Gi)))}Nt.once(Xt,Dn),Ke&&Nt.once(Ke,un),Et()})},Oe.getOrNull=function Ce(Et,Nt){return Nt.split(".").reduce(function(Xt,Ke){return Xt?Xt[Ke]:null},Et)},Oe.defer=function ye(){var Et={};return Et.promise=new Promise(function(Nt,Xt){Et.resolve=Nt,Et.reject=Xt}),Et},Oe.delegateMethods=function ce(Et,Nt,Xt){for(var Ke in Et)me(Et,Nt,Xt,Ke)},Oe.proxyProperties=function Fe(Et,Nt,Xt){Object.getOwnPropertyNames(Et).forEach(function(Ke){!function xe(Et,Nt,Xt,Ke){if(!(Ke in Nt)){if(Ke.match(/^on[a-z]+$/))return Object.defineProperty(Nt,Ke,{value:null,writable:!0}),void Xt.addEventListener(Ke.slice(2),function(){for(var Me=[],ot=0;ot<arguments.length;ot++)Me[ot]=arguments[ot];Nt.dispatchEvent.apply(Nt,oe([],te(Me)))});Object.defineProperty(Nt,Ke,{enumerable:!0,get:function(){return Xt[Ke]}})}}(0,Nt,Xt,Ke)})},Oe.legacyPromise=function Ue(Et,Nt,Xt){return Nt?Et.then(function(Ke){Nt(Ke)},function(Ke){Xt(Ke)}):Et},Oe.buildLogLevels=function qe(Et){return"string"==typeof Et?{default:Et,media:Et,signaling:Et,webrtc:Et}:Et},Oe.trackClass=function Je(Et,Nt){return(Nt=Nt?"Local":"")+(Et.kind||"").replace(/\w{1}/,function(Xt){return Xt.toUpperCase()})+"Track"},Oe.trackPublicationClass=function Pe(Et,Nt){return(Nt=Nt?"Local":"")+(Et.kind||"").replace(/\w{1}/,function(Xt){return Xt.toUpperCase()})+"TrackPublication"},Oe.valueToJSON=Ot,Oe.withJitter=function fr(Et,Nt){var Xt=Math.random();return Et-Nt+Math.floor(2*Nt*Xt+.5)},Oe.isChromeScreenShareTrack=function ki(Et){return"chrome"===P.guessBrowser()&&"video"===Et.kind&&"displaySurface"in Et.getSettings()},Oe.isUserMediaTrack=function $n(Et){return"string"==typeof Et.getSettings().deviceId},Oe.waitForSometime=function Mi(Et){return void 0===Et&&(Et=10),new Promise(function(Nt){return setTimeout(Nt,Et)})},Oe.waitForEvent=function Js(Et,Nt){return new Promise(function(Xt){Et.addEventListener(Nt,function Ke(Me){Et.removeEventListener(Nt,Ke),Xt(Me)})})}},3744:function(we,Oe,Y){"use strict";var he,U=this&&this.__extends||(he=function(Ce,ye){return(he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(me,ce){me.__proto__=ce}||function(me,ce){for(var pe in ce)Object.prototype.hasOwnProperty.call(ce,pe)&&(me[pe]=ce[pe])})(Ce,ye)},function(Ce,ye){if("function"!=typeof ye&&null!==ye)throw new TypeError("Class extends value "+String(ye)+" is not a constructor or null");function me(){this.constructor=Ce}he(Ce,ye),Ce.prototype=null===ye?Object.create(ye):(me.prototype=ye.prototype,new me)}),te=this&&this.__assign||function(){return te=Object.assign||function(he){for(var Ce,ye=1,me=arguments.length;ye<me;ye++)for(var ce in Ce=arguments[ye])Object.prototype.hasOwnProperty.call(Ce,ce)&&(he[ce]=Ce[ce]);return he},te.apply(this,arguments)},oe=Y(9069).EventEmitter,H=Y(9739).getUserAgent,x=globalThis,F=x.WebSocket?x.WebSocket:Y(3332),J=Y(8701),se=J.hardwareDevicePublisheriPad,ue=J.hardwareDevicePublisheriPhone,le=Y(9739),$=Y(3948),z=function(he){function Ce(ye,me,ce,pe,be,Fe){var xe=he.call(this)||this;return Fe=Object.assign({gateway:ae(pe,be)+"/v1/VideoEvents",maxReconnectAttempts:5,reconnectIntervalMs:50,userAgent:H(),WebSocket:F},Fe),Object.defineProperties(xe,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:le.defer()},_reconnectAttemptsLeft:{value:Fe.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:Fe.WebSocket}}),xe._readyToConnect.promise.then(function(Ue){var qe=Ue.roomSid,Je=Ue.participantSid,Pe=xe;xe.on("disconnected",function Mt(Lt){if(Pe._session=null,Lt&&Pe._reconnectAttemptsLeft>0)return Pe.emit("reconnecting"),void function Te(he,Ce,ye,me,ce,pe,be){var Fe=Date.now()-he._connectTimestamp,xe=be.reconnectIntervalMs-Fe;xe>0?setTimeout(function(){G(he,Ce,ye,me,ce,pe,be)},xe):G(he,Ce,ye,me,ce,pe,be)}(Pe,ye,me,ce,qe,Je,Fe);Pe.removeListener("disconnected",Mt)}),G(xe,ye,me,ce,qe,Je,Fe)}).catch(function(){}),xe}return U(Ce,he),Ce.prototype.connect=function(ye,me){this._readyToConnect.resolve({roomSid:ye,participantSid:me})},Ce.prototype._publish=function(ye){ye.session=this._session,this._ws.send(JSON.stringify(ye))},Ce.prototype.disconnect=function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},Ce.prototype.publish=function(ye,me,ce){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:ye,name:me,payload:ce,timestamp:Date.now(),type:"event",version:1}),!0)},Ce}(oe);function G(he,Ce,ye,me,ce,pe,be){he._connectTimestamp=Date.now(),he._reconnectAttemptsLeft--,he._ws=new be.WebSocket(be.gateway);var Fe=he._ws;Fe.addEventListener("close",function(xe){1e3!==xe.code?he.emit("disconnected",new Error("WebSocket Error "+xe.code+": "+xe.reason)):he.emit("disconnected")}),Fe.addEventListener("message",function(xe){!function Ae(he,Ce,ye){switch(Ce.type){case"connected":he._session=Ce.session,he._reconnectAttemptsLeft=ye.maxReconnectAttempts,he._eventQueue.splice(0).forEach(he._publish,he),he.emit("connected");break;case"error":he._ws.close(),he.emit("disconnected",new Error(Ce.message))}}(he,JSON.parse(xe.data),be)}),Fe.addEventListener("open",function(){var xe={type:"connect",token:Ce,version:1};xe.publisher={name:ye,sdkVersion:me,userAgent:be.userAgent,participantSid:pe,roomSid:ce},$.isIpad()?xe.publisher=te(te({},xe.publisher),se):$.isIphone()&&(xe.publisher=te(te({},xe.publisher),ue)),Fe.send(JSON.stringify(xe))})}function ae(he,Ce){return"prod"===he?"wss://sdkgw."+Ce+".twilio.com":"wss://sdkgw."+he+"-"+Ce+".twilio.com"}we.exports=z},4920:we=>{"use strict";var Oe=function(){function Y(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return Y.prototype.connect=function(){},Y.prototype.disconnect=function(){return!!this._connected&&(this._connected=!1,!0)},Y.prototype.publish=function(){return this._connected},Y}();we.exports=Oe},6396:(we,Oe,Y)=>{"use strict";var U=Y(9739).defer,te=function(){function oe(){Object.defineProperties(this,{_audio:{value:U(),writable:!0},_video:{value:U(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return oe.prototype.resolveDeferred=function(H){"audio"===H?this._audio.resolve():this._video.resolve()},oe.prototype.startDeferred=function(H){"audio"===H?this._audio=U():this._video=U()},oe.prototype.whenResolved=function(H){return"audio"===H?this._audio.promise:this._video.promise},oe}();we.exports=new te},1458:function(we,Oe,Y){"use strict";var x,U=this&&this.__read||function(G,ae){var Ae="function"==typeof Symbol&&G[Symbol.iterator];if(!Ae)return G;var he,ye,Te=Ae.call(G),Ce=[];try{for(;(void 0===ae||ae-- >0)&&!(he=Te.next()).done;)Ce.push(he.value)}catch(me){ye={error:me}}finally{try{he&&!he.done&&(Ae=Te.return)&&Ae.call(Te)}finally{if(ye)throw ye.error}}return Ce},te=this&&this.__spreadArray||function(G,ae){for(var Ae=0,Te=ae.length,he=G.length;Ae<Te;Ae++,he++)G[he]=ae[Ae];return G},oe=Y(7846).getLogger,H=Y(8701),j=H.DEFAULT_LOG_LEVEL,M=H.DEFAULT_LOGGER_NAME,P=Y(8701).typeErrors,J=function(){function G(ae,Ae,Te,he,Ce){if("string"!=typeof ae)throw P.INVALID_TYPE("moduleName","string");if(!Ae)throw P.REQUIRED_ARGUMENT("component");"object"!=typeof Te&&(Te={}),Ce=Ce||oe,z(Te),Object.defineProperties(this,{_component:{value:Ae},_logLevels:{value:Te},_warnings:{value:new Set},_loggerName:{get:function(){var me=he&&"string"==typeof he?he:M;return this._logLevelsEqual||(me=me+"-"+ae),me}},_logger:{get:function(){var me=Ce(this._loggerName),ce=this._logLevels[ae]||j;return me.setDefaultLevel(ce="off"===ce?"silent":ce),me}},_logLevelsEqual:{get:function(){return 1===new Set(Object.values(this._logLevels)).size}},logLevel:{get:function(){return G.getLevelByName(Te[ae]||j)}},name:{get:Ae.toString.bind(Ae)}})}return G.getLevelByName=function(ae){return isNaN(ae)?($(ae=ae.toUpperCase()),G[ae]):parseInt(ae,10)},G.prototype.createLog=function(ae,Ae){var Te=this._loggerName;return this._logLevelsEqual||(Te=Te.substring(0,Te.lastIndexOf("-"))),new G(ae,Ae,this._logLevels,Te)},G.prototype.setLevels=function(ae){return z(ae),Object.assign(this._logLevels,ae),this},G.prototype.log=function(ae,Ae){var Te=G._levels[ae];if(!Te)throw P.INVALID_VALUE("logLevel",ue);Te=Te.toLowerCase();var he=[(new Date).toISOString(),Te,this.name];return(this._logger[Te]||function(){}).apply(void 0,te([],U(he.concat(Ae)))),this},G.prototype.debug=function(){return this.log(G.DEBUG,[].slice.call(arguments))},G.prototype.deprecated=function(ae){var Ae=function F(G){if((x=x||new Map).has(G))return x.get(G);var ae=new Set;return x.set(G,ae),ae}(this._component.constructor);return Ae.has(ae)?this:(Ae.add(ae),this.warn(ae))},G.prototype.info=function(){return this.log(G.INFO,[].slice.call(arguments))},G.prototype.warn=function(){return this.log(G.WARN,[].slice.call(arguments))},G.prototype.warnOnce=function(ae){return this._warnings.has(ae)?this:(this._warnings.add(ae),this.warn(ae))},G.prototype.error=function(){return this.log(G.ERROR,[].slice.call(arguments))},G.prototype.throw=function(ae,Ae){throw ae.clone&&(ae=ae.clone(Ae)),this.log(G.ERROR,ae),ae},G}();Object.defineProperties(J,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var se={},ue=[],le=J._levels.map(function(G,ae){return se[G]=!0,ue.push(ae),G});function $(G){if(!(G in se))throw P.INVALID_VALUE("level",le)}function z(G){Object.keys(G).forEach(function(ae){$(G[ae].toUpperCase())})}we.exports=J},8218:we=>{"use strict";var Oe=function(){function Y(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return Y.prototype.get=function(){var U=this._samples;return(U[1].numerator-U[0].numerator)/(U[1].denominator-U[0].denominator||1/0)},Y.prototype.putSample=function(U,te){var oe=this._samples;oe.shift(),oe.push({denominator:te,numerator:U})},Y}();we.exports=Oe},2643:we=>{"use strict";var Oe=function(){function Y(U,te){var oe=this,H=(te=Object.assign({navigator,window},te)).navigator,j=H.connection||{type:null},M=j.type,P=j.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var se=M!==oe.type&&oe.isOnline;M=oe.type,se&&U()}},_target:{value:j}}:{_events:{value:["online"]},_listener:{value:U},_target:{value:te.window}};Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof H.onLine||H.onLine}},type:{enumerable:!0,get:function(){return j.type||null}},_listener:P._listener,_events:P._events,_target:P._target})}return Y.prototype.start=function(){var U=this;this._events.forEach(function(te){U._target.addEventListener(te,U._listener)})},Y.prototype.stop=function(){var U=this;this._events.forEach(function(te){U._target.removeEventListener(te,U._listener)})},Y}();we.exports=Oe},5318:function(we){"use strict";var oe,Oe=this&&this.__extends||(oe=function(H,j){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(M[x]=P[x])})(H,j)},function(H,j){if("function"!=typeof j&&null!==j)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function M(){this.constructor=H}oe(H,j),H.prototype=null===j?Object.create(j):(M.prototype=j.prototype,new M)}),Y=function(){function oe(H){Object.defineProperties(this,{_callback:{value:H}})}return oe.prototype.observe=function(){},oe.prototype.unobserve=function(){},oe.prototype.makeVisible=function(H){var j=this._makeFakeEntry(H,!0);this._callback([j])},oe.prototype.makeInvisible=function(H){var j=this._makeFakeEntry(H,!1);this._callback([j])},oe.prototype._makeFakeEntry=function(H,j){return{target:H,isIntersecting:j}},oe}(),U=function(oe){function H(){return null!==oe&&oe.apply(this,arguments)||this}return Oe(H,oe),H}(Y),te=function(oe){function H(){return null!==oe&&oe.apply(this,arguments)||this}return Oe(H,oe),H.prototype.resize=function(j){var M=this._makeFakeEntry(j,!0);this._callback([M])},H}(Y);we.exports={NullIntersectionObserver:U,NullResizeObserver:te,NullObserver:Y}},3898:function(we,Oe,Y){"use strict";var U=this&&this.__read||function(xe,Ue){var qe="function"==typeof Symbol&&xe[Symbol.iterator];if(!qe)return xe;var Pe,Lt,Je=qe.call(xe),Mt=[];try{for(;(void 0===Ue||Ue-- >0)&&!(Pe=Je.next()).done;)Mt.push(Pe.value)}catch(yt){Lt={error:yt}}finally{try{Pe&&!Pe.done&&(qe=Je.return)&&qe.call(Je)}finally{if(Lt)throw Lt.error}}return Mt},te=Y(9739),oe=te.difference,H=te.flatMap,j=Y(570),M={0:"PCMU",8:"PCMA"};function P(xe){return Array.from(F(xe)).reduce(function(Ue,qe){var Je=qe[0],Pe=qe[1],Mt=Ue.get(Pe)||[];return Ue.set(Pe,Mt.concat(Je))},new Map)}function x(xe){return ue(xe).reduce(function(Ue,qe){var Je=se(qe);return Je?Ue.set(Je,qe):Ue},new Map)}function F(xe){return le(xe).reduce(function(Ue,qe){var Je=new RegExp("a=rtpmap:"+qe+" ([^/]+)"),Pe=xe.match(Je),Mt=Pe?Pe[1].toLowerCase():M[qe]?M[qe].toLowerCase():"";return Ue.set(qe,Mt)},new Map)}function J(xe,Ue){var qe=new RegExp("^a=fmtp:"+xe+" (.+)$","m"),Je=Ue.match(qe);return Je&&Je[1].split(";").reduce(function(Pe,Mt){var Lt=U(Mt.split("="),2),We=Lt[1];return Pe[Lt[0]]=isNaN(We)?We:parseInt(We,10),Pe},{})}function se(xe){var Ue=xe.match(/^a=mid:(.+)$/m);return Ue&&Ue[1]}function ue(xe,Ue,qe){return xe.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(Je){return"m="+Je}).filter(function(Je){var Pe=new RegExp("m="+(Ue||".*"),"gm"),Mt=new RegExp("a="+(qe||".*"),"gm");return Pe.test(Je)&&Mt.test(Je)})}function le(xe){var qe=xe.split("\r\n")[0].match(/([0-9]+)/g);return qe?qe.slice(1).map(function(Je){return parseInt(Je,10)}):[]}function z(xe,Ue){var qe=Ue.split("\r\n"),Je=qe[0],Pe=qe.slice(1);return[Je=Je.replace(/([0-9]+\s?)+$/,xe.join(" "))].concat(Pe).join("\r\n")}function me(xe,Ue){var qe=ue(xe);return[xe.split("\r\nm=")[0]].concat(qe.map(function(Pe){if(!/^m=(audio|video)/.test(Pe))return Pe;var Mt=se(Pe);if(!Mt)return Pe;var Lt=Ue.get(Mt);if(!Lt)return Pe;var yt=(Pe.match(/^a=msid:(.+)$/m)||[])[1];if(!yt)return Pe;var We=U(yt.split(" "),2),Be=We[0],Ge=We[1],Re=new RegExp("msid:"+Be+(Ge?" "+Ge:"")+"$","gm");return Pe.replace(Re,"msid:"+Be+" "+Lt)})).join("\r\n")}function be(xe,Ue){return"a=fmtp:"+xe+" "+Object.entries(Ue).map(function(Je){var Pe=U(Je,2);return Pe[0]+"="+Pe[1]}).join(";")}Oe.addOrRewriteNewTrackIds=function ye(xe,Ue,qe){var Je=Array.from(qe).reduce(function(Pe,Mt){var Lt=U(Mt,2),We=Lt[1];return ue(xe,Lt[0],"send(only|recv)").map(se).filter(function(Re){return!Ue.has(Re)}).forEach(function(Re,Xe){return Pe.set(Re,We[Xe])}),Pe},new Map);return me(xe,Je)},Oe.addOrRewriteTrackIds=me,Oe.createCodecMapForMediaSection=P,Oe.createPtToCodecName=F,Oe.disableRtx=function pe(xe){var Ue=ue(xe);return[xe.split("\r\nm=")[0]].concat(Ue.map(function(Je){if(!/^m=video/.test(Je))return Je;var Mt=P(Je).get("rtx");if(!Mt)return Je;var Lt=new Set(le(Je));Mt.forEach(function(Ge){return Lt.delete(Ge)});var yt=Je.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),We=yt&&yt[1],Be=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(We?[new RegExp("^a=ssrc:"+We+" .+$")]:[]);return Je=Je.split("\r\n").filter(function(Ge){return Be.every(function(Re){return!Re.test(Ge)})}).join("\r\n"),z(Array.from(Lt),Je)})).join("\r\n")},Oe.enableDtxForOpus=function Fe(xe,Ue){var qe=ue(xe),Je=xe.split("\r\nm=")[0];return Ue=Ue||qe.filter(function(Pe){return/^m=audio/.test(Pe)}).map(se),[Je].concat(qe.map(function(Pe){if(!/^m=audio/.test(Pe))return Pe;var Lt=P(Pe).get("opus");if(!Lt)return Pe;var yt=J(Lt,Pe);if(!yt)return Pe;var We=be(Lt,yt),Be=new RegExp(We),Ge=se(Pe);Ue.includes(Ge)?yt.usedtx=1:delete yt.usedtx;var Re=be(Lt,yt);return Pe.replace(Be,Re)})).join("\r\n")},Oe.filterLocalCodecs=function he(xe,Ue){var qe=ue(xe),Je=xe.split("\r\nm=")[0],Pe=x(Ue);return[Je].concat(qe.map(function(Mt){return function Te(xe,Ue,qe){if(!/^m=(audio|video)/.test(xe))return xe;var Je=se(xe),Pe=Je&&Ue.get(Je);if(!Pe)return xe;var Mt=F(Pe),Lt=P(xe),yt=H(Array.from(Mt),function(Re){var Xe=U(Re,2),Ot=Xe[0],Kt=Xe[1];return"rtx"===Kt||qe.includes(Kt)?[]:function Ae(xe,Ue,qe,Je,Pe){var Mt=qe.get(xe)||[];if(Mt.length<=1)return Mt;var Lt=J(Ue,Pe);if(!Lt)return Mt;var yt=Mt.find(function(We){var Be=J(We,Je);return Be&&Object.keys(Lt).every(function(Ge){return Lt[Ge]===Be[Ge]})});return"number"==typeof yt?[yt]:Mt}(Kt,Ot,Lt,xe,Pe)}),We=Lt.get("rtx")||[];yt=yt.concat(We.filter(function(Re){var Xe=J(Re,xe);return Xe&&yt.includes(Xe.apt)}));var Be=xe.split("\r\n").filter(function(Re){var Xe=Re.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),Ot=Xe&&Xe[2];return!Xe||Ot&&yt.includes(parseInt(Ot,10))});return z(le(xe).filter(function(Re){return yt.includes(Re)}),Be.join("\r\n"))}(Mt,Pe,[])})).join("\r\n")},Oe.getMediaSections=ue,Oe.removeSSRCAttributes=function ce(xe,Ue){return xe.split("\r\n").filter(function(qe){return!Ue.find(function(Je){return new RegExp("a=ssrc:.*"+Je+":","g").test(qe)})}).join("\r\n")},Oe.revertSimulcast=function Ce(xe,Ue,qe,Je){void 0===Je&&(Je=!1);var Pe=x(qe),Mt=x(Ue),Lt=ue(xe);return[xe.split("\r\nm=")[0]].concat(Lt.map(function(We){if(We=We.replace(/\r\n$/,""),!/^m=video/.test(We))return We;var Be=We.match(/^a=mid:(.+)$/m),Ge=Be&&Be[1];if(!Ge)return We;var Re=Pe.get(Ge),Xe=F(Re),Ot=le(Re),Kt=Ot.length&&"vp8"===Xe.get(Ot[0]);return Je||!Kt?Mt.get(Ge).replace(/\r\n$/,""):We})).concat("").join("\r\n")},Oe.setCodecPreferences=function G(xe,Ue,qe){var Je=ue(xe);return[xe.split("\r\nm=")[0]].concat(Je.map(function(Mt){if(!/^m=(audio|video)/.test(Mt))return Mt;var Lt=Mt.match(/^m=(audio|video)/)[1],yt=P(Mt),Be=function $(xe,Ue){Ue=Ue.map(function(Mt){return Mt.codec.toLowerCase()});var qe=H(Ue,function(Mt){return xe.get(Mt)||[]}),Je=oe(Array.from(xe.keys()),Ue),Pe=H(Je,function(Mt){return xe.get(Mt)});return qe.concat(Pe)}(yt,"audio"===Lt?Ue:qe),Ge=z(Be,Mt),Re=yt.get("pcma")||[],Xe=yt.get("pcmu")||[];return("audio"===Lt?new Set(Re.concat(Xe)):new Set).has(Be[0])?Ge.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):Ge})).join("\r\n")},Oe.setSimulcast=function ae(xe,Ue){var qe=ue(xe);return[xe.split("\r\nm=")[0]].concat(qe.map(function(Pe){if(Pe=Pe.replace(/\r\n$/,""),!/^m=video/.test(Pe))return Pe;var Mt=P(Pe),Lt=le(Pe),yt=new Set(Mt.get("vp8")||[]);return Lt.some(function(Be){return yt.has(Be)})?j(Pe,Ue):Pe})).concat("").join("\r\n")}},3073:(we,Oe,Y)=>{"use strict";var U=Y(1647).RTCSessionDescription,te=Y(3898),oe=te.createPtToCodecName,H=te.getMediaSections;function P(z){var G=oe(z);z=function x(z,G){return Array.from(G.keys()).reduce(function(ae,Ae){var Te=new RegExp("^a=rtpmap:"+Ae+" rtx.+$","gm");return(ae.match(Te)||[]).slice("rtx"===G.get(Ae)?1:0).reduce(function(he,Ce){var ye=new RegExp("\r\n"+Ce),me=new RegExp("\r\na=fmtp:"+Ae+" apt=[0-9]+");return he.replace(ye,"").replace(me,"")},ae)},z)}(z,G);var ae=function F(z){var G=new Map;return z.forEach(function(ae,Ae){var Te=G.get(ae)||new Set;return G.set(ae,Te.add(Ae))}),G}(G),Ae=ae.get("rtx")||new Set,Te=new Set,he=function J(z,G,ae,Ae){return Array.from(ae).reduce(function(Te,he){var Ce=new RegExp("a=fmtp:"+he+" apt=(\\d+)"),ye=z.match(Ce);if(!ye)return Ae.add(he),Te;var me=Number.parseInt(ye[1]);return G.has(me)?"rtx"===G.get(me)?(Ae.add(he),Te):Te.set(he,me):(Ae.add(he),Te)},new Map)}(z,G,Ae,Te),Ce=function se(z,G){var ae=Array.from(z).reduce(function(Ae,Te){var he=Te[0],Ce=Te[1],ye=Ae.get(Ce)||new Set;return Ae.set(Ce,ye.add(he))},new Map);return Array.from(ae).reduce(function(Ae,Te){var he=Te[0],Ce=Array.from(Te[1]);return Ce.length>1?(Ce.forEach(function(ye){G.add(ye)}),Ae):Ae.set(he,Ce[0])},new Map)}(he,Te),ye=Array.from(Te);return["h264","vp8","vp9"].reduce(function(pe,be){var Fe=ae.get(be)||new Set;return Array.from(Fe).reduce(function(xe,Ue){return Ce.has(Ue)?xe:xe.add(Ue)},pe)},new Set).forEach(function(pe){if(ye.length){var be=ye.shift();z=function $(z,G,ae){return z.endsWith("\r\n")?z+"a=fmtp:"+G+" apt="+ae+"\r\n":z+"\r\na=fmtp:"+G+" apt="+ae}(z=ue(z,be),be,pe)}}),ye.forEach(function(pe){z=function le(z,G){var ae=new RegExp("a=rtpmap:"+G+".*\r\n","gm");return z.replace(ae,"")}(z=ue(z,pe),pe)}),z}function ue(z,G){var ae=new RegExp("a=fmtp:"+G+".*\r\n","gm");return z.replace(ae,"")}we.exports=function j(z){var G={type:z.type};return"rollback"!==z.type&&(G.sdp=function M(z){var G=H(z);return[z.split("\r\nm=")[0]].concat(G.map(P)).join("\r\n")}(z.sdp)),new U(G)}},570:function(we,Oe,Y){"use strict";var U=this&&this.__read||function($,z){var G="function"==typeof Symbol&&$[Symbol.iterator];if(!G)return $;var Ae,he,ae=G.call($),Te=[];try{for(;(void 0===z||z-- >0)&&!(Ae=ae.next()).done;)Te.push(Ae.value)}catch(Ce){he={error:Ce}}finally{try{Ae&&!Ae.done&&(G=ae.return)&&G.call(ae)}finally{if(he)throw he.error}}return Te},te=Y(9739),oe=te.difference,H=te.flatMap;function j(){return String(Math.floor(4294967295*Math.random()))}var M=function(){function $(z,G,ae){Object.defineProperties(this,{cName:{enumerable:!0,value:ae},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:G},trackId:{enumerable:!0,value:z}})}return $.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var z=[j(),j()];z.forEach(function(G){this.primarySSRCs.add(G)},this),this.rtxPairs.size&&z.forEach(function(G){this.rtxPairs.set(j(),G)},this)}},$.prototype.addSSRC=function(z,G,ae){G?this.rtxPairs.set(z,G):this.primarySSRCs.add(z),this.isSimulcastEnabled=this.isSimulcastEnabled||ae},$.prototype.toSdpLines=function(z){var G=this,ae=z?[]:Array.from(this.rtxPairs.entries()).map(function(me){return me.reverse()}),Ae=Array.from(this.primarySSRCs.values()),Te=ae.length?H(ae):Ae,he=H(Te,function(me){return["a=ssrc:"+me+" cname:"+G.cName,"a=ssrc:"+me+" msid:"+G.streamId+" "+G.trackId]}),Ce=ae.map(function(me){return"a=ssrc-group:FID "+me.join(" ")}),ye=["a=ssrc-group:SIM "+Ae.join(" ")];return Ce.concat(he).concat(ye)},$}();function P($,z){return($.match(new RegExp(z,"gm"))||[]).map(function(ae){return(ae.match(new RegExp(z))||[]).slice(1)})}we.exports=function le($,z){var G=function ue($){var z=function x($){return new Set(H(P($,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}($),G=function J($){return new Map(P($,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map(function(G){return G.reverse()}))}($),ae=function se($){var z=U(H(P($,"^a=msid:(.+) (.+)$")),2),G=z[0],ae=z[1];return H(P($,"^a=ssrc:(.+) cname:.+$")).map(function(Te){return[Te,G,ae]})}($);return ae.reduce(function(Ae,Te){var he=Te[0],Ce=Te[1],ye=Te[2],me=Ae.get(ye)||new M(ye,Ce,function F($,z,G){return $.match(new RegExp("a=ssrc:"+z+" "+G+":(.+)"))[1]}($,he,"cname")),ce=G.get(he)||null;return me.addSSRC(he,ce,z.has(he)),Ae.set(ye,me)},new Map)}($),ae=Array.from(G.keys()),Ae=Array.from(z.keys()),Te=oe(ae,Ae),he=oe(Ae,ae);H(Te,function(xe){return G.get(xe)}).forEach(function(xe){xe.addSimulcastSSRCs(),z.set(xe.trackId,xe)}),Ae=Array.from(z.keys());var ye=oe(Ae,he),me=H(ye,function(xe){return z.get(xe)}),ce=!$.match(/a=rtpmap:[0-9]+ rtx/),pe=H(me,function(xe){return xe.toSdpLines(ce)}),be=H(new Set($.split("\r\n").concat(pe))),Fe="a=x-google-flag:conference";return $.match(Fe)||be.push(Fe),be.join("\r\n")}},1057:(we,Oe,Y)=>{"use strict";var U=Y(3898).getMediaSections,te=function(){function oe(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return oe.prototype.match=function(H){return this._midsToTrackIds.get(H.transceiver.mid)||null},oe.prototype.update=function(H){var j=U(H,"(audio|video)");this._midsToTrackIds=j.reduce(function(M,P){var x=P.match(/^a=mid:(.+)$/m)||[],F=P.match(/^a=msid:.+ (.+)$/m)||[],J=x[1],se=F[1];return J&&se?M.set(J,se):M},this._midsToTrackIds)},oe}();we.exports=te},8066:(we,Oe)=>{var Y="1234567890abcdef";function te(oe){for(var H="",j=0;j<32;j++)H+=Y.charAt(Math.floor(Math.random()*Y.length));return""+oe+H}Oe.sessionSID=te("SS"),Oe.createSID=te},8592:(we,Oe,Y)=>{"use strict";var U=Y(7627),te=U.guessBrowser,oe=U.support,H=Y(3948),j=H.isAndroid,M=H.isMobile,P=H.isNonChromiumEdge,x=H.rebrandedChromeBrowser,F=H.mobileWebKitBrowser,J=["crios","edg","edge","electron","headlesschrome"],se=["chrome","firefox"],ue=["chrome","safari"],le=[];we.exports=function $(){var z=te();if(!z)return!1;var G=x(z),ae=F(z),Ae=j()?se:ue;return!!z&&oe()&&(!G||J.includes(G))&&!P(z)&&(!ae||le.includes(ae))&&(!M()||Ae.includes(z))}},6543:we=>{"use strict";var Oe=function(){function Y(U,te,oe){void 0===oe&&(oe=!0),Object.defineProperties(this,{_delay:{value:te,writable:!0},_fn:{value:U},_timeout:{value:null,writable:!0}}),oe&&this.start()}return Object.defineProperty(Y.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),Y.prototype.setDelay=function(U){this._delay=U},Y.prototype.start=function(){var U=this;this.isSet||(this._timeout=setTimeout(function(){var te=U._fn;U.clear(),te()},this._delay))},Y.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},Y.prototype.reset=function(){this.clear(),this.start()},Y}();we.exports=Oe},8380:function(we,Oe,Y){"use strict";var Ke,U=this&&this.__extends||(Ke=function(Me,ot){return(Ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Dn,un){Dn.__proto__=un}||function(Dn,un){for(var Gi in un)Object.prototype.hasOwnProperty.call(un,Gi)&&(Dn[Gi]=un[Gi])})(Me,ot)},function(Me,ot){if("function"!=typeof ot&&null!==ot)throw new TypeError("Class extends value "+String(ot)+" is not a constructor or null");function Dn(){this.constructor=Me}Ke(Me,ot),Me.prototype=null===ot?Object.create(ot):(Dn.prototype=ot.prototype,new Dn)}),te=Y(9318),oe={};Oe.createTwilioError=function(Me,ot){return ot="string"==typeof ot&&ot?ot:"Unknown error",oe[Me="number"==typeof Me?Me:0]?new oe[Me]:new te(Me,ot)};var H=function(Ke){function Me(){var ot=Ke.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.AccessTokenInvalidError=H,Object.defineProperty(oe,20101,{value:H});var j=function(Ke){function Me(){var ot=Ke.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.AccessTokenHeaderInvalidError=j,Object.defineProperty(oe,20102,{value:j});var M=function(Ke){function Me(){var ot=Ke.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.AccessTokenIssuerInvalidError=M,Object.defineProperty(oe,20103,{value:M});var P=function(Ke){function Me(){var ot=Ke.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.AccessTokenExpiredError=P,Object.defineProperty(oe,20104,{value:P});var x=function(Ke){function Me(){var ot=Ke.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.AccessTokenNotYetValidError=x,Object.defineProperty(oe,20105,{value:x});var F=function(Ke){function Me(){var ot=Ke.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.AccessTokenGrantsInvalidError=F,Object.defineProperty(oe,20106,{value:F});var J=function(Ke){function Me(){var ot=Ke.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.AccessTokenSignatureInvalidError=J,Object.defineProperty(oe,20107,{value:J});var se=function(Ke){function Me(){var ot=Ke.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.SignalingConnectionError=se,Object.defineProperty(oe,53e3,{value:se});var ue=function(Ke){function Me(){var ot=Ke.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.SignalingConnectionDisconnectedError=ue,Object.defineProperty(oe,53001,{value:ue});var le=function(Ke){function Me(){var ot=Ke.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.SignalingConnectionTimeoutError=le,Object.defineProperty(oe,53002,{value:le});var $=function(Ke){function Me(){var ot=Ke.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.SignalingIncomingMessageInvalidError=$,Object.defineProperty(oe,53003,{value:$});var z=function(Ke){function Me(){var ot=Ke.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.SignalingOutgoingMessageInvalidError=z,Object.defineProperty(oe,53004,{value:z});var G=function(Ke){function Me(){var ot=Ke.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.SignalingServerBusyError=G,Object.defineProperty(oe,53006,{value:G});var ae=function(Ke){function Me(){var ot=Ke.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomNameInvalidError=ae,Object.defineProperty(oe,53100,{value:ae});var Ae=function(Ke){function Me(){var ot=Ke.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomNameTooLongError=Ae,Object.defineProperty(oe,53101,{value:Ae});var Te=function(Ke){function Me(){var ot=Ke.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomNameCharsInvalidError=Te,Object.defineProperty(oe,53102,{value:Te});var he=function(Ke){function Me(){var ot=Ke.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomCreateFailedError=he,Object.defineProperty(oe,53103,{value:he});var Ce=function(Ke){function Me(){var ot=Ke.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomConnectFailedError=Ce,Object.defineProperty(oe,53104,{value:Ce});var ye=function(Ke){function Me(){var ot=Ke.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomMaxParticipantsExceededError=ye,Object.defineProperty(oe,53105,{value:ye});var me=function(Ke){function Me(){var ot=Ke.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomNotFoundError=me,Object.defineProperty(oe,53106,{value:me});var ce=function(Ke){function Me(){var ot=Ke.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomMaxParticipantsOutOfRangeError=ce,Object.defineProperty(oe,53107,{value:ce});var pe=function(Ke){function Me(){var ot=Ke.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomTypeInvalidError=pe,Object.defineProperty(oe,53108,{value:pe});var be=function(Ke){function Me(){var ot=Ke.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomTimeoutOutOfRangeError=be,Object.defineProperty(oe,53109,{value:be});var Fe=function(Ke){function Me(){var ot=Ke.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomStatusCallbackMethodInvalidError=Fe,Object.defineProperty(oe,53110,{value:Fe});var xe=function(Ke){function Me(){var ot=Ke.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomStatusCallbackInvalidError=xe,Object.defineProperty(oe,53111,{value:xe});var Ue=function(Ke){function Me(){var ot=Ke.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomStatusInvalidError=Ue,Object.defineProperty(oe,53112,{value:Ue});var qe=function(Ke){function Me(){var ot=Ke.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomRoomExistsError=qe,Object.defineProperty(oe,53113,{value:qe});var Je=function(Ke){function Me(){var ot=Ke.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomInvalidParametersError=Je,Object.defineProperty(oe,53114,{value:Je});var Pe=function(Ke){function Me(){var ot=Ke.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomMediaRegionInvalidError=Pe,Object.defineProperty(oe,53115,{value:Pe});var Mt=function(Ke){function Me(){var ot=Ke.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomMediaRegionUnavailableError=Mt,Object.defineProperty(oe,53116,{value:Mt});var Lt=function(Ke){function Me(){var ot=Ke.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomSubscriptionOperationNotSupportedError=Lt,Object.defineProperty(oe,53117,{value:Lt});var yt=function(Ke){function Me(){var ot=Ke.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomCompletedError=yt,Object.defineProperty(oe,53118,{value:yt});var We=function(Ke){function Me(){var ot=Ke.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomAudioOnlyFlagNotSupportedError=We,Object.defineProperty(oe,53124,{value:We});var Be=function(Ke){function Me(){var ot=Ke.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.RoomTrackKindNotSupportedError=Be,Object.defineProperty(oe,53125,{value:Be});var Ge=function(Ke){function Me(){var ot=Ke.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.ParticipantIdentityInvalidError=Ge,Object.defineProperty(oe,53200,{value:Ge});var Re=function(Ke){function Me(){var ot=Ke.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.ParticipantIdentityTooLongError=Re,Object.defineProperty(oe,53201,{value:Re});var Xe=function(Ke){function Me(){var ot=Ke.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.ParticipantIdentityCharsInvalidError=Xe,Object.defineProperty(oe,53202,{value:Xe});var Ot=function(Ke){function Me(){var ot=Ke.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.ParticipantMaxTracksExceededError=Ot,Object.defineProperty(oe,53203,{value:Ot});var Kt=function(Ke){function Me(){var ot=Ke.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.ParticipantNotFoundError=Kt,Object.defineProperty(oe,53204,{value:Kt});var Tt=function(Ke){function Me(){var ot=Ke.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.ParticipantDuplicateIdentityError=Tt,Object.defineProperty(oe,53205,{value:Tt});var zt=function(Ke){function Me(){var ot=Ke.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.TrackInvalidError=zt,Object.defineProperty(oe,53300,{value:zt});var Qn=function(Ke){function Me(){var ot=Ke.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.TrackNameInvalidError=Qn,Object.defineProperty(oe,53301,{value:Qn});var Ht=function(Ke){function Me(){var ot=Ke.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.TrackNameTooLongError=Ht,Object.defineProperty(oe,53302,{value:Ht});var br=function(Ke){function Me(){var ot=Ke.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.TrackNameCharsInvalidError=br,Object.defineProperty(oe,53303,{value:br});var Sr=function(Ke){function Me(){var ot=Ke.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.TrackNameIsDuplicatedError=Sr,Object.defineProperty(oe,53304,{value:Sr});var _r=function(Ke){function Me(){var ot=Ke.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.TrackServerTrackCapacityReachedError=_r,Object.defineProperty(oe,53305,{value:_r});var fr=function(Ke){function Me(){var ot=Ke.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.MediaClientLocalDescFailedError=fr,Object.defineProperty(oe,53400,{value:fr});var pr=function(Ke){function Me(){var ot=Ke.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.MediaServerLocalDescFailedError=pr,Object.defineProperty(oe,53401,{value:pr});var ki=function(Ke){function Me(){var ot=Ke.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.MediaClientRemoteDescFailedError=ki,Object.defineProperty(oe,53402,{value:ki});var $n=function(Ke){function Me(){var ot=Ke.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.MediaServerRemoteDescFailedError=$n,Object.defineProperty(oe,53403,{value:$n});var Mi=function(Ke){function Me(){var ot=Ke.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.MediaNoSupportedCodecError=Mi,Object.defineProperty(oe,53404,{value:Mi});var Js=function(Ke){function Me(){var ot=Ke.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.MediaConnectionError=Js,Object.defineProperty(oe,53405,{value:Js});var Et=function(Ke){function Me(){var ot=Ke.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.MediaDTLSTransportFailedError=Et,Object.defineProperty(oe,53407,{value:Et});var Nt=function(Ke){function Me(){var ot=Ke.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.ConfigurationAcquireFailedError=Nt,Object.defineProperty(oe,53500,{value:Nt});var Xt=function(Ke){function Me(){var ot=Ke.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(ot,Me.prototype),ot}return U(Me,Ke),Me}(te);Oe.ConfigurationAcquireTurnFailedError=Xt,Object.defineProperty(oe,53501,{value:Xt})},9318:function(we){"use strict";var oe,Oe=this&&this.__extends||(oe=function(H,j){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(M[x]=P[x])})(H,j)},function(H,j){if("function"!=typeof j&&null!==j)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function M(){this.constructor=H}oe(H,j),H.prototype=null===j?Object.create(j):(M.prototype=j.prototype,new M)}),Y=this&&this.__read||function(oe,H){var j="function"==typeof Symbol&&oe[Symbol.iterator];if(!j)return oe;var P,F,M=j.call(oe),x=[];try{for(;(void 0===H||H-- >0)&&!(P=M.next()).done;)x.push(P.value)}catch(J){F={error:J}}finally{try{P&&!P.done&&(j=M.return)&&j.call(M)}finally{if(F)throw F.error}}return x},U=this&&this.__spreadArray||function(oe,H){for(var j=0,M=H.length,P=oe.length;j<M;j++,P++)oe[P]=H[j];return oe},te=function(oe){function H(j){var M=this,P=[].slice.call(arguments,1);M=oe.apply(this,U([],Y(P)))||this,Object.setPrototypeOf(M,H.prototype);var x=Error.apply(M,P);return x.name="TwilioError",Object.defineProperty(M,"code",{value:j,enumerable:!0}),Object.getOwnPropertyNames(x).forEach(function(F){Object.defineProperty(this,F,{value:x[F],enumerable:!0})},M),M}return Oe(H,oe),H.prototype.toString=function(){return this.name+" "+this.code+(this.message?": "+this.message:"")},H}(Error);we.exports=te},1501:(we,Oe,Y)=>{"use strict";var te=Y(9739).isNonArrayObject,oe=Y(8701),H=oe.typeErrors,j=oe.clientTrackSwitchOffControl,M=oe.videoContentPreferencesMode,P=oe.subscriptionMode,x=oe.trackPriority,F=oe.trackSwitchOffMode;function ue($,z,G){return void 0===G&&(G=[]),typeof $>"u"?null:null!==$&&te($)?G.reduce(function(ae,Ae){var Te=Ae.prop,he=Ae.type,Ce=Ae.values;if(ae||!(Te in $))return ae;var ye=$[Te];return he&&typeof ye!==he||"number"===he&&isNaN(ye)?H.INVALID_TYPE(z+"."+Te,he):Array.isArray(Ce)&&!Ce.includes(ye)?H.INVALID_VALUE(z+"."+Te,Ce):ae},null):H.INVALID_TYPE(z,"object")}Oe.kG=function J($){var z=ue($,"options.bandwidthProfile");return!$||z||(z=ue($.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(M)},{prop:"dominantSpeakerPriority",values:Object.values(x)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(P)},{prop:"clientTrackSwitchOffControl",values:Object.values(j)},{prop:"trackSwitchOffMode",values:Object.values(F)}]))?z:$.video?"maxTracks"in $.video&&"clientTrackSwitchOffControl"in $.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in $.video&&"contentPreferencesMode"in $.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):function le($){var z="options.bandwidthProfile.video.renderDimensions",G=ue($,z);return $?G||Object.values(x).reduce(function(ae,Ae){return ae||ue($[Ae],z+"."+Ae,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):G}($.video.renderDimensions):null},Oe.Wv=function se($,z){if(!($ instanceof z.LocalAudioTrack||$ instanceof z.LocalDataTrack||$ instanceof z.LocalVideoTrack||$ instanceof z.MediaStreamTrack))throw H.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}},1905:we=>{we.exports=function(Y,U){if(Y&&U)if(Y.super_=U,"function"==typeof Object.create)Y.prototype=Object.create(U.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}});else{var te=function oe(){};te.prototype=U.prototype,Y.prototype=new te,Y.prototype.constructor=Y}}},7846:we=>{var Oe=function(){},Y="undefined",U=typeof window!==Y&&typeof window.navigator!==Y&&/Trident\/|MSIE /.test(window.navigator.userAgent),te=["trace","debug","info","warn","error"];function oe(le,$){var z=le[$];if("function"==typeof z.bind)return z.bind(le);try{return Function.prototype.bind.call(z,le)}catch{return function(){return Function.prototype.apply.apply(z,[le,arguments])}}}function H(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function j(le){return"debug"===le&&(le="log"),typeof console!==Y&&("trace"===le&&U?H:void 0!==console[le]?oe(console,le):void 0!==console.log?oe(console,"log"):Oe)}function M(le,$){for(var z=0;z<te.length;z++){var G=te[z];this[G]=z<le?Oe:this.methodFactory(G,le,$)}this.log=this.debug}function P(le,$,z){return function(){typeof console!==Y&&(M.call(this,$,z),this[le].apply(this,arguments))}}function x(le,$,z){return j(le)||P.apply(this,arguments)}function F(le,$,z){var ae,G=this,Ae="loglevel";function he(){var ye;if(typeof window!==Y&&Ae){try{ye=window.localStorage[Ae]}catch{}if(typeof ye===Y)try{var me=window.document.cookie,ce=me.indexOf(encodeURIComponent(Ae)+"=");-1!==ce&&(ye=/^([^;]+)/.exec(me.slice(ce))[1])}catch{}return void 0===G.levels[ye]&&(ye=void 0),ye}}"string"==typeof le?Ae+=":"+le:"symbol"==typeof le&&(Ae=void 0),G.name=le,G.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},G.methodFactory=z||x,G.getLevel=function(){return ae},G.setLevel=function(ye,me){if("string"==typeof ye&&void 0!==G.levels[ye.toUpperCase()]&&(ye=G.levels[ye.toUpperCase()]),!("number"==typeof ye&&ye>=0&&ye<=G.levels.SILENT))throw"log.setLevel() called with invalid level: "+ye;if(ae=ye,!1!==me&&function Te(ye){var me=(te[ye]||"silent").toUpperCase();if(typeof window!==Y&&Ae){try{return void(window.localStorage[Ae]=me)}catch{}try{window.document.cookie=encodeURIComponent(Ae)+"="+me+";"}catch{}}}(ye),M.call(G,ye,le),typeof console===Y&&ye<G.levels.SILENT)return"No console available for logging"},G.setDefaultLevel=function(ye){he()||G.setLevel(ye,!1)},G.enableAll=function(ye){G.setLevel(G.levels.TRACE,ye)},G.disableAll=function(ye){G.setLevel(G.levels.SILENT,ye)};var Ce=he();null==Ce&&(Ce=$??"WARN"),G.setLevel(Ce,!1)}var J=new F,se={};J.getLogger=function($){if("symbol"!=typeof $&&"string"!=typeof $||""===$)throw new TypeError("You must supply a name when creating a logger.");var z=se[$];return z||(z=se[$]=new F($,J.getLevel(),J.methodFactory)),z};var ue=typeof window!==Y?window.log:void 0;J.noConflict=function(){return typeof window!==Y&&window.log===J&&(window.log=ue),J},J.getLoggers=function(){return se},J.default=J,we.exports=J},7708:we=>{"use strict";var Oe=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,Y=function(){function U(te){te=Object.assign({AudioContext:Oe},te),Object.defineProperties(this,{_AudioContext:{value:te.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:U}})}return U.prototype.getOrCreate=function(te){if(!this._holders.has(te)&&(this._holders.add(te),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},U.prototype.release=function(te){this._holders.has(te)&&(this._holders.delete(te),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},U}();we.exports=new Y},4687:we=>{"use strict";we.exports=function Y(U,te,oe){oe="number"==typeof oe?oe:250;var H=U.createMediaStreamSource(te),j=U.createAnalyser();j.fftSize=2048,H.connect(j);var M=new Uint8Array(j.fftSize),P=!1;return setTimeout(function(){P=!0},oe),function x(){return P?Promise.resolve(!0):(j.getByteTimeDomainData(M),M.some(function(F){return 128!==F&&0!==F})?Promise.resolve(!1):function Oe(U){return U="number"==typeof U?U:0,new Promise(function(te){return setTimeout(te,U)})}().then(x))}().then(function(F){return H.disconnect(),F},function(F){throw H.disconnect(),F})}},3830:(we,Oe,Y)=>{"use strict";var U=Y(4687);we.exports=function te(oe,H,j,M,P){M="number"==typeof M?M:3;var x=0,F=Y(7708),J={},se=F.getOrCreate(J);return function ue(){return H(j).then(function(le){return(j.audio?U(se,le,P).catch(function(z){return oe.warn("Encountered an error while detecting silence",z),!0}):Promise.resolve(!1)).then(function(z){return z?M<=0?(oe.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),le):(oe.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++x+"."),le.getTracks().forEach(function(G){return G.stop()}),M--,ue()):(oe.info("Got a non-silent audio MediaStreamTrack; returning it."),le)})})}().then(function(le){return F.release(J),le},function(le){throw F.release(J),le})}},9611:(we,Oe,Y)=>{"use strict";var U=Y(7627).flatMap,te=Y(7627).guessBrowser,oe=Y(7627).guessBrowserVersion,H=Y(3236).getSdpFormat,j=te(),M=oe(),P="chrome"===j,x="firefox"===j,F="safari"===j,J=P?M.major:null;function z(ce){var pe=Array.from(ce.values()).find(function(Pe){return"candidate-pair"===Pe.type&&Pe.nominated});if(!pe)return null;var be=ce.get(pe.localCandidateId),Fe=ce.get(pe.remoteCandidateId),xe=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],Ue=xe.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),qe=be?Ue.reduce(function(Pe,Mt){return Pe[Mt.key]=typeof be[Mt.key]===Mt.type?be[Mt.key]:"deleted"!==Mt.key&&null,Pe},{}):null,Je=Fe?xe.reduce(function(Pe,Mt){return Pe[Mt.key]=typeof Fe[Mt.key]===Mt.type?Fe[Mt.key]:null,Pe},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(Pe){return"inprogress"===Pe?"in-progress":Pe}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(Pe,Mt){return Pe[Mt.key]=typeof pe[Mt.key]===Mt.type?Mt.fixup?Mt.fixup(pe[Mt.key]):pe[Mt.key]:null,Pe},{localCandidate:qe,remoteCandidate:Je})}function G(ce){var pe=Array.from(ce.values()).find(function(Mt){return"candidate-pair"===Mt.type&&Mt.nominated});if(!pe)return null;var be=ce.get(pe.localCandidateId),Fe=ce.get(pe.remoteCandidateId),xe=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],Ue=xe.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),qe={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},Je=be?Ue.reduce(function(Mt,Lt){var yt=Lt.ffKeys&&Lt.ffKeys.find(function(We){return We in be})||Lt.key;return Mt[Lt.key]=typeof be[yt]===Lt.type?"candidateType"===yt&&qe[be[yt]]||be[yt]:"deleted"!==yt&&null,Mt},{}):null,Pe=Fe?xe.reduce(function(Mt,Lt){var yt=Lt.ffKeys&&Lt.ffKeys.find(function(We){return We in Fe})||Lt.key;return Mt[Lt.key]=typeof Fe[yt]===Lt.type?"candidateType"===yt&&qe[Fe[yt]]||Fe[yt]:null,Mt},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(Mt,Lt){return Mt[Lt.key]=typeof pe[Lt.key]===Lt.type?pe[Lt.key]:null,Mt},{localCandidate:Je,remoteCandidate:Pe})}function ae(ce,pe,be){var Fe="local"===be?"getSenders":"getReceivers";return ce[Fe]?ce[Fe]().map(function(Ue){return Ue.track}).filter(function(Ue){return Ue&&Ue.kind===pe}):U(ce["local"===be?"getLocalStreams":"getRemoteStreams"](),function(Ue){return Ue["audio"===pe?"getAudioTracks":"getVideoTracks"]()})}function Te(ce,pe){return new Promise(function(be,Fe){J&&J<67?ce.getStats(function(xe){be([Ce(xe,pe)])},null,Fe):ce.getStats(pe).then(function(xe){be(function ye(ce){var pe=null,be=[],Fe=null,xe=null,Ue=null,qe=null,Je=null;ce.forEach(function(We){switch(We.type){case"inbound-rtp":pe=We;break;case"outbound-rtp":be.push(We);break;case"media-source":Je=We;break;case"track":Ue=We;break;case"codec":qe=We;break;case"remote-inbound-rtp":Fe=We;break;case"remote-outbound-rtp":xe=We}});var Pe=Ue&&Ue.remoteSource,Lt=[],yt=Pe?xe:Fe;return(Pe?[pe]:be).forEach(function(We){var Be={},Ge=[We,Je,Ue,qe,yt&&yt.ssrc===We.ssrc?yt:null];function Re(Dn){var un=Ge.find(function(Gi){return Gi&&typeof Gi[Dn]<"u"})||null;return un?un[Dn]:null}var Xe=Re("ssrc");"number"==typeof Xe&&(Be.ssrc=String(Xe));var Ot=Re("timestamp");Be.timestamp=Math.round(Ot);var Kt=Re("mimeType");"string"==typeof Kt&&(Kt=Kt.split("/"),Be.codecName=Kt[Kt.length-1]);var Tt=Re("roundTripTime");"number"==typeof Tt&&(Be.roundTripTime=Math.round(1e3*Tt));var zt=Re("jitter");"number"==typeof zt&&(Be.jitter=Math.round(1e3*zt));var Qn=Re("frameWidth");"number"==typeof Qn&&(Pe?Be.frameWidthReceived=Qn:(Be.frameWidthSent=Qn,Be.frameWidthInput=Ue.frameWidth));var Ht=Re("frameHeight");"number"==typeof Ht&&(Pe?Be.frameHeightReceived=Ht:(Be.frameHeightSent=Ht,Be.frameHeightInput=Ue.frameHeight));var br=Re("framesPerSecond");"number"==typeof br&&(Be[Pe?"frameRateReceived":"frameRateSent"]=br);var Sr=Re("bytesReceived");"number"==typeof Sr&&(Be.bytesReceived=Sr);var _r=Re("bytesSent");"number"==typeof _r&&(Be.bytesSent=_r);var fr=Re("packetsLost");"number"==typeof fr&&(Be.packetsLost=fr);var pr=Re("packetsReceived");"number"==typeof pr&&(Be.packetsReceived=pr);var ki=Re("packetsSent");"number"==typeof ki&&(Be.packetsSent=ki);var $n=Re("audioLevel");"number"==typeof $n&&($n=Math.round(32767*$n),Pe?Be.audioOutputLevel=$n:Be.audioInputLevel=$n);var Mi=Re("totalPacketSendDelay");"number"==typeof Mi&&(Be.totalPacketSendDelay=Mi);var Js=Re("totalEncodeTime");"number"==typeof Js&&(Be.totalEncodeTime=Js);var Et=Re("framesEncoded");"number"==typeof Et&&(Be.framesEncoded=Et);var Nt=Re("estimatedPlayoutTimestamp");"number"==typeof Nt&&(Be.estimatedPlayoutTimestamp=Nt);var Xt=Re("totalDecodeTime");"number"==typeof Xt&&(Be.totalDecodeTime=Xt);var Ke=Re("framesDecoded");"number"==typeof Ke&&(Be.framesDecoded=Ke);var Me=Re("jitterBufferDelay");"number"==typeof Me&&(Be.jitterBufferDelay=Me);var ot=Re("jitterBufferEmittedCount");"number"==typeof ot&&(Be.jitterBufferEmittedCount=ot),Lt.push(Be)}),Lt}(xe))},Fe)})}function Ce(ce,pe){var be=ce.result().find(function(xe){return"ssrc"===xe.type&&xe.stat("googTrackId")===pe.id}),Fe={};return be&&(Fe.timestamp=Math.round(Number(be.timestamp)),Fe=be.names().reduce(function(xe,Ue){switch(Ue){case"googCodecName":xe.codecName=be.stat(Ue);break;case"googRtt":xe.roundTripTime=Number(be.stat(Ue));break;case"googJitterReceived":xe.jitter=Number(be.stat(Ue));break;case"googFrameWidthInput":xe.frameWidthInput=Number(be.stat(Ue));break;case"googFrameHeightInput":xe.frameHeightInput=Number(be.stat(Ue));break;case"googFrameWidthSent":xe.frameWidthSent=Number(be.stat(Ue));break;case"googFrameHeightSent":xe.frameHeightSent=Number(be.stat(Ue));break;case"googFrameWidthReceived":xe.frameWidthReceived=Number(be.stat(Ue));break;case"googFrameHeightReceived":xe.frameHeightReceived=Number(be.stat(Ue));break;case"googFrameRateInput":xe.frameRateInput=Number(be.stat(Ue));break;case"googFrameRateSent":xe.frameRateSent=Number(be.stat(Ue));break;case"googFrameRateReceived":xe.frameRateReceived=Number(be.stat(Ue));break;case"ssrc":xe[Ue]=be.stat(Ue);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":xe[Ue]=Number(be.stat(Ue))}return xe},Fe)),Fe}function me(ce,pe){var be=null,Fe=null;(ce=ce||new Map).forEach(function(pr){if(!pr.isRemote)switch(pr.type){case"inbound-rtp":be=pr,Fe=ce.get(pr.remoteId);break;case"outbound-rtp":Fe=pr,be=ce.get(pr.remoteId)}});var xe=pe?be:Fe,Ue=pe?Fe:be;function qe(pr){return xe&&typeof xe[pr]<"u"?xe[pr]:Ue&&typeof Ue[pr]<"u"?Ue[pr]:null}var Je={},Pe=qe("timestamp");Je.timestamp=Math.round(Pe);var Mt=qe("ssrc");"number"==typeof Mt&&(Je.ssrc=String(Mt));var Lt=qe("bytesSent");"number"==typeof Lt&&(Je.bytesSent=Lt);var yt=qe("packetsLost");"number"==typeof yt&&(Je.packetsLost=yt);var We=qe("packetsSent");"number"==typeof We&&(Je.packetsSent=We);var Be=qe("roundTripTime");"number"==typeof Be&&(Je.roundTripTime=Math.round(1e3*Be));var Ge=qe("jitter");"number"==typeof Ge&&(Je.jitter=Math.round(1e3*Ge));var Re=qe("framerateMean");"number"==typeof Re&&(Je.frameRateSent=Math.round(Re));var Xe=qe("bytesReceived");"number"==typeof Xe&&(Je.bytesReceived=Xe);var Ot=qe("packetsReceived");"number"==typeof Ot&&(Je.packetsReceived=Ot);var Kt=qe("framerateMean");"number"==typeof Kt&&(Je.frameRateReceived=Math.round(Kt));var Tt=qe("totalPacketSendDelay");"number"==typeof Tt&&(Je.totalPacketSendDelay=Tt);var zt=qe("totalEncodeTime");"number"==typeof zt&&(Je.totalEncodeTime=zt);var Qn=qe("framesEncoded");"number"==typeof Qn&&(Je.framesEncoded=Qn);var Ht=qe("estimatedPlayoutTimestamp");"number"==typeof Ht&&(Je.estimatedPlayoutTimestamp=Ht);var br=qe("totalDecodeTime");"number"==typeof br&&(Je.totalDecodeTime=br);var Sr=qe("framesDecoded");"number"==typeof Sr&&(Je.framesDecoded=Sr);var _r=qe("jitterBufferDelay");"number"==typeof _r&&(Je.jitterBufferDelay=_r);var fr=qe("jitterBufferEmittedCount");return"number"==typeof fr&&(Je.jitterBufferEmittedCount=fr),Je}we.exports=function ue(ce,pe){return ce&&"function"==typeof ce.getStats?function le(ce,pe){var be=ae(ce,"audio","local"),Fe=ae(ce,"video","local"),xe=ae(ce,"audio"),Ue=ae(ce,"video"),qe={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},Je=U([[be,"localAudioTrackStats",!1],[Fe,"localVideoTrackStats",!1],[xe,"remoteAudioTrackStats",!0],[Ue,"remoteVideoTrackStats",!0]],function(Pe){var Lt=Pe[1],yt=Pe[2];return Pe[0].map(function(We){return function Ae(ce,pe,be){return typeof(be=be||{}).testForChrome<"u"||P?Te(ce,pe):typeof be.testForFirefox<"u"||x?function he(ce,pe,be){return new Promise(function(Fe,xe){ce.getStats(pe).then(function(Ue){Fe([me(Ue,be)])},xe)})}(ce,pe,be.isRemote):typeof be.testForSafari<"u"||F?typeof be.testForSafari<"u"||"unified"===H()?Te(ce,pe):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(ce,We,Object.assign({isRemote:yt},pe)).then(function(Be){Be.forEach(function(Ge){Ge.trackId=We.id,qe[Lt].push(Ge)})})})});return Promise.all(Je).then(function(){return function $(ce,pe){return typeof(pe=pe||{}).testForChrome<"u"||P||typeof pe.testForSafari<"u"||F?ce.getStats().then(z):typeof pe.testForFirefox<"u"||x?ce.getStats().then(G):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(ce,pe)}).then(function(Pe){return qe.activeIceCandidatePair=Pe,qe})}(ce,pe):Promise.reject(new Error("Given PeerConnection does not support getStats"))}},7370:we=>{"use strict";we.exports=function Oe(Y){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?(Y=Y||{audio:!0,video:!0},navigator.mediaDevices.getUserMedia(Y)):Promise.reject(new Error("getUserMedia is not supported"))}},1647:(we,Oe,Y)=>{"use strict";var U={};Object.defineProperties(U,{getStats:{enumerable:!0,value:Y(9611)},getUserMedia:{enumerable:!0,value:Y(7370)},MediaStream:{enumerable:!0,value:Y(4946)},MediaStreamTrack:{enumerable:!0,value:Y(6240)},RTCIceCandidate:{enumerable:!0,value:Y(5219)},RTCPeerConnection:{enumerable:!0,value:Y(7061)},RTCSessionDescription:{enumerable:!0,value:Y(5481)}}),we.exports=U},4946:we=>{"use strict";we.exports="function"==typeof MediaStream?MediaStream:function(){throw new Error("MediaStream is not supported")}},6240:we=>{"use strict";we.exports="function"==typeof MediaStreamTrack?MediaStreamTrack:function(){throw new Error("MediaStreamTrack is not supported")}},5219:we=>{"use strict";we.exports="function"==typeof RTCIceCandidate?RTCIceCandidate:function(){throw new Error("RTCIceCandidate is not supported")}},5431:(we,Oe,Y)=>{"use strict";var U=Y(4326),te=Y(7590),oe=Y(1905),H=Y(3688),j=Y(4946),M=Y(7121),P=Y(3236),x=Y(7627),F=Y(7627).isIOSChrome,J="unified"===P.getSdpFormat();function se(he,Ce){if(!(this instanceof se))return new se(he,Ce);te.call(this),he=he||{};var ye=Object.assign(he.iceTransportPolicy?{iceTransports:he.iceTransportPolicy}:{},he);x.interceptEvent(this,"datachannel"),x.interceptEvent(this,"signalingstatechange");var me=P.getSdpFormat(ye.sdpSemantics),ce=new RTCPeerConnection(ye,Ce);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new j},_peerConnection:{value:ce},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:me},_senders:{value:new Map},_signalingStateLatch:{value:new H},_tracksToSSRCs:{value:new Map,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:ce.localDescription}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:ce.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":ce.signalingState}}});var pe=this;ce.addEventListener("datachannel",function(Fe){Ae(Fe.channel),pe.dispatchEvent(Fe)}),ce.addEventListener("signalingstatechange",function(){"stable"===ce.signalingState&&(pe._appliedTracksToSSRCs=new Map(pe._tracksToSSRCs)),!pe._pendingLocalOffer&&!pe._pendingRemoteOffer&&pe.dispatchEvent.apply(pe,arguments)}),ce.ontrack=function(){},"function"!=typeof RTCPeerConnection.prototype.addTrack&&ce.addStream(this._localStream),x.proxyProperties(RTCPeerConnection.prototype,this,ce)}function ue(he,Ce,ye){var Ue,pe=Ce?he._pendingLocalOffer:he._pendingRemoteOffer,Fe=Ce?"have-local-offer":"have-remote-offer",xe=Ce?"setLocalDescription":"setRemoteDescription";if(!Ce&&(Ce?he._pendingRemoteOffer:he._pendingLocalOffer)&&"answer"===ye.type)Ue=function le(he,Ce){return he._peerConnection.setLocalDescription(he._pendingLocalOffer).then(function(){return he._pendingLocalOffer=null,he.setRemoteDescription(Ce)}).then(function(){he._signalingStateLatch.lower()})}(he,ye);else if("offer"===ye.type){if(he.signalingState!==Fe&&"stable"!==he.signalingState)return Promise.reject(new Error("Cannot set "+(Ce?"local":"remote")+" offer in state "+he.signalingState));!pe&&"low"===he._signalingStateLatch.state&&he._signalingStateLatch.raise();var qe=he.signalingState;(function me(Je){Ce?he._pendingLocalOffer=Je:he._pendingRemoteOffer=Je})(z(ye)),Ue=Promise.resolve(),he.signalingState!==qe&&Ue.then(function(){he.dispatchEvent(new Event("signalingstatechange"))})}else"rollback"===ye.type&&(he.signalingState!==Fe?Ue=Promise.reject(new Error("Cannot rollback "+(Ce?"local":"remote")+" description in "+he.signalingState)):(function ce(){Ce?he._pendingLocalOffer=null:he._pendingRemoteOffer=null}(),he._rolledBackTracksToSSRCs=new Map(he._tracksToSSRCs),he._tracksToSSRCs=new Map(he._appliedTracksToSSRCs),(Ue=Promise.resolve()).then(function(){he.dispatchEvent(new Event("signalingstatechange"))})));return Ue||he._peerConnection[xe](z(ye))}function $(he,Ce){return!!he.getTransceivers().find(function(ye){return ye.receiver&&ye.receiver.track&&ye.receiver.track.kind===Ce})}function z(he){return he instanceof U&&he._description?he._description:new RTCSessionDescription(he)}function G(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function Ae(he){return Object.defineProperty(he,"maxRetransmits",{value:65535===he.maxRetransmits?null:he.maxRetransmits}),G()&&Object.defineProperty(he,"maxPacketLifeTime",{value:65535===he.maxRetransmitTime?null:he.maxRetransmitTime}),he}function Te(he,Ce,ye){return"unified"===he?P.updateUnifiedPlanTrackIdsToSSRCs(Ce,ye):P.updatePlanBTrackIdsToSSRCs(Ce,ye)}oe(se,te),"function"!=typeof RTCPeerConnection.prototype.addTrack?(se.prototype.addTrack=function(){var Ce=[].slice.call(arguments),ye=Ce[0];if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+ye.id+", "+ye.kind+"]: RTCPeerConnection is closed");var me=this._senders.get(ye);if(me&&me.track)throw new Error("Cannot add MediaStreamTrack ["+ye.id+", "+ye.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(ye),this._peerConnection.addStream(this._localStream),me=new M(ye),this._senders.set(ye,me),me},se.prototype.removeTrack=function(Ce){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");var ye=Ce.track;!ye||(Ce=this._senders.get(ye))&&Ce.track&&(Ce.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(ye),this._peerConnection.addStream(this._localStream))},se.prototype.getSenders=function(){return Array.from(this._senders.values())}):se.prototype.removeTrack=function(Ce){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");try{this._peerConnection.removeTrack(Ce)}catch{}},se.prototype.addIceCandidate=function(Ce){var me,ye=[].slice.call(arguments),ce=this;return me="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return ce._peerConnection.addIceCandidate(Ce)}):this._peerConnection.addIceCandidate(Ce),ye.length>1?x.legacyPromise(me,ye[1],ye[2]):me},se.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},se.prototype.createAnswer=function(){var ye,Ce=[].slice.call(arguments),me=this;return ye=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return me._signalingStateLatch.lower(),me._peerConnection.createAnswer()}).then(function(pe){return me._pendingRemoteOffer=null,me._rolledBackTracksToSSRCs.clear(),new U({type:"answer",sdp:Te(me._sdpFormat,me._tracksToSSRCs,pe.sdp)})},function(pe){throw me._pendingRemoteOffer=null,pe}):this._peerConnection.createAnswer().then(function(ce){return me._rolledBackTracksToSSRCs.clear(),new U({type:"answer",sdp:Te(me._sdpFormat,me._tracksToSSRCs,ce.sdp)})}),Ce.length>1?x.legacyPromise(ye,Ce[0],Ce[1]):ye},se.prototype.createOffer=function(){var Ce=[].slice.call(arguments),ye=(Ce.length>1?Ce[2]:Ce[0])||{},me=this;if(F()){if(ye.offerToReceiveVideo&&!this._audioTransceiver&&(!J||!$(this,"audio"))){delete ye.offerToReceiveAudio;try{this._audioTransceiver=J?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(pe){return Promise.reject(pe)}}if(ye.offerToReceiveVideo&&!this._videoTransceiver&&(!J||!$(this,"video"))){delete ye.offerToReceiveVideo;try{this._videoTransceiver=J?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(pe){return Promise.reject(pe)}}}var ce=this._peerConnection.createOffer(ye).then(function(pe){return me._rolledBackTracksToSSRCs.clear(),new U({type:pe.type,sdp:Te(me._sdpFormat,me._tracksToSSRCs,pe.sdp)})});return Ce.length>1?x.legacyPromise(ce,Ce[0],Ce[1]):ce},se.prototype.createDataChannel=function(Ce,ye){ye=function ae(he){return he=Object.assign({},he),G()&&"maxPacketLifeTime"in he&&(he.maxRetransmitTime=he.maxPacketLifeTime),he}(ye);var me=this._peerConnection.createDataChannel(Ce,ye);return Ae(me),me},se.prototype.setLocalDescription=function(){var Ce=[].slice.call(arguments),ye=Ce[0];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var me=ue(this,!0,ye);return Ce.length>1?x.legacyPromise(me,Ce[1],Ce[2]):me},se.prototype.setRemoteDescription=function(){var Ce=[].slice.call(arguments),ye=Ce[0];this._rolledBackTracksToSSRCs.clear();var me=ue(this,!1,ye);return Ce.length>1?x.legacyPromise(me,Ce[1],Ce[2]):me},x.delegateMethods(RTCPeerConnection.prototype,se.prototype,"_peerConnection"),we.exports=se},7111:(we,Oe,Y)=>{"use strict";var U=Y(7590),te=Y(3657),oe=Y(1905),H=Y(3236).updateUnifiedPlanTrackIdsToSSRCs,j=Y(7627),M="object"==typeof navigator&&navigator.userAgent&&(navigator.userAgent.match(/Firefox\/61/)||navigator.userAgent.match(/Firefox\/62/));function P(se){if(!(this instanceof P))return new P(se);U.call(this),j.interceptEvent(this,"signalingstatechange");var ue=new RTCPeerConnection(se);Object.defineProperties(this,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:ue},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},localDescription:{enumerable:!0,get:function(){return J(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.signalingState}}});var $,le=this;ue.addEventListener("signalingstatechange",function(){if(!le._rollingBack&&le.signalingState!==$){$=le.signalingState;var G=le.dispatchEvent.apply.bind(le.dispatchEvent,le,arguments);le._isClosed?setTimeout(G):G()}}),j.proxyProperties(RTCPeerConnection.prototype,this,ue)}function x(se,ue,le){var $=ue?"setLocalDescription":"setRemoteDescription";return se._rollingBack=!0,se._peerConnection[$](new te({type:"rollback"})).then(le).then(function(G){return se._rollingBack=!1,G},function(G){throw se._rollingBack=!1,G})}function F(se,ue,le){if(!se._initiallyNegotiatedDtlsRole&&"offer"!==ue.type){var $=ue.sdp.match(/a=setup:([a-z]+)/);if($){var z=$[1];se._initiallyNegotiatedDtlsRole=le?{active:"passive",passive:"active"}[z]:z}}}function J(se,ue){return se&&"answer"===se.type&&ue?new te({type:se.type,sdp:se.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+ue)}):se}oe(P,U),Object.defineProperty(P.prototype,"peerIdentity",{enumerable:!0,value:Promise.resolve({idp:"",name:""})}),M&&(P.prototype.addTrack=function(){var ue=arguments[0],le=this._peerConnection.addTrack.apply(this._peerConnection,arguments);return le.replaceTrack(ue),le}),P.prototype.createAnswer=function(){var le,ue=[].slice.call(arguments),$=this;return le=this._peerConnection.createAnswer().then(function(G){return F($,G),J(G,$._initiallyNegotiatedDtlsRole)}),"function"==typeof ue[0]?j.legacyPromise(le,ue[0],ue[1]):le},P.prototype.createOffer=function(){var $,ue=[].slice.call(arguments),le=(ue.length>1?ue[2]:ue[0])||{},z=this;if("have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState){var G="have-local-offer"===this.signalingState;$=x(this,G,function(){return z.createOffer(le)})}else $=z._peerConnection.createOffer(le);return $=$.then(function(ae){return new te({type:ae.type,sdp:H(z._tracksToSSRCs,ae.sdp)})}),ue.length>1?j.legacyPromise($,ue[0],ue[1]):$},P.prototype.setLocalDescription=function(){var $,ue=[].slice.call(arguments),le=ue[0];return le&&"answer"===le.type&&"have-local-offer"===this.signalingState&&($=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),$?ue.length>1?j.legacyPromise($,ue[1],ue[2]):$:this._peerConnection.setLocalDescription.apply(this._peerConnection,ue)},P.prototype.setRemoteDescription=function(){var $,ue=[].slice.call(arguments),le=ue[0],z=this;return le&&"have-remote-offer"===this.signalingState&&("answer"===le.type?$=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===le.type&&($=x(this,!1,function(){return z._peerConnection.setRemoteDescription(le)}))),$||($=this._peerConnection.setRemoteDescription(le)),$=$.then(function(){F(z,le,!0)}),ue.length>1?j.legacyPromise($,ue[1],ue[2]):$},P.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},j.delegateMethods(RTCPeerConnection.prototype,P.prototype,"_peerConnection"),we.exports=P},7061:(we,Oe,Y)=>{"use strict";if("function"==typeof RTCPeerConnection)switch((0,Y(7627).guessBrowser)()){case"chrome":we.exports=Y(5431);break;case"firefox":we.exports=Y(7111);break;case"safari":we.exports=Y(7548);break;default:we.exports=RTCPeerConnection}else we.exports=function(){throw new Error("RTCPeerConnection is not supported")}},7548:(we,Oe,Y)=>{"use strict";var U=Y(7590),te=Y(1905),oe=Y(3688),H=Y(3236),j=Y(7627),M="unified"===H.getSdpFormat(),P=M?H.updateUnifiedPlanTrackIdsToSSRCs:H.updatePlanBTrackIdsToSSRCs;function x(le){if(!(this instanceof x))return new x(le);U.call(this),j.interceptEvent(this,"datachannel"),j.interceptEvent(this,"iceconnectionstatechange"),j.interceptEvent(this,"signalingstatechange"),j.interceptEvent(this,"track");var $=new RTCPeerConnection(le);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:$},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new oe},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription}},iceConnectionState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState}},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState}}});var z=this;$.addEventListener("datachannel",function(ae){ue(ae.channel),z.dispatchEvent(ae)}),$.addEventListener("iceconnectionstatechange",function(){z._isClosed||z.dispatchEvent.apply(z,arguments)}),$.addEventListener("signalingstatechange",function(){z._isClosed||("stable"===$.signalingState&&(z._appliedTracksToSSRCs=new Map(z._tracksToSSRCs)),!z._pendingLocalOffer&&!z._pendingRemoteOffer&&z.dispatchEvent.apply(z,arguments))}),$.addEventListener("track",function(ae){z._pendingRemoteOffer=null,z.dispatchEvent(ae)}),j.proxyProperties(RTCPeerConnection.prototype,this,$)}function F(le,$,z){var Ae=$?le._pendingLocalOffer:le._pendingRemoteOffer,he=$?"have-local-offer":"have-remote-offer",Ce=$?"setLocalDescription":"setRemoteDescription";if(!$&&($?le._pendingRemoteOffer:le._pendingLocalOffer)&&"answer"===z.type)return function J(le,$){return le._peerConnection.setLocalDescription(le._pendingLocalOffer).then(function(){return le._pendingLocalOffer=null,le.setRemoteDescription($)}).then(function(){le._signalingStateLatch.lower()})}(le,z);if("offer"===z.type){if(le.signalingState!==he&&"stable"!==le.signalingState)return Promise.reject(new Error("Cannot set "+($?"local":"remote")+" offer in state "+le.signalingState));!Ae&&"low"===le._signalingStateLatch.state&&le._signalingStateLatch.raise();var ye=le.signalingState;return function G(me){$?le._pendingLocalOffer=me:le._pendingRemoteOffer=me}(z),le.signalingState!==ye?Promise.resolve().then(function(){le.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}return"rollback"===z.type?le.signalingState!==he?Promise.reject(new Error("Cannot rollback "+($?"local":"remote")+" description in "+le.signalingState)):(function ae(){$?le._pendingLocalOffer=null:le._pendingRemoteOffer=null}(),le._rolledBackTracksToSSRCs=new Map(le._tracksToSSRCs),le._tracksToSSRCs=new Map(le._appliedTracksToSSRCs),Promise.resolve().then(function(){le.dispatchEvent(new Event("signalingstatechange"))})):le._peerConnection[Ce](z)}function se(le,$){return!!le.getTransceivers().find(function(z){return z.receiver&&z.receiver.track&&z.receiver.track.kind===$})}function ue(le){return Object.defineProperties(le,{maxPacketLifeTime:{value:65535===le.maxPacketLifeTime?null:le.maxPacketLifeTime},maxRetransmits:{value:65535===le.maxRetransmits?null:le.maxRetransmits}})}te(x,U),x.prototype.addIceCandidate=function($){var z=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return z._peerConnection.addIceCandidate($)}):this._peerConnection.addIceCandidate($)},x.prototype.createOffer=function($){$=Object.assign({},$);var z=this;if($.offerToReceiveVideo&&!this._audioTransceiver&&(!M||!se(this,"audio"))){delete $.offerToReceiveAudio;try{this._audioTransceiver=M?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(G){return Promise.reject(G)}}if($.offerToReceiveVideo&&!this._videoTransceiver&&(!M||!se(this,"video"))){delete $.offerToReceiveVideo;try{this._videoTransceiver=M?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(G){return Promise.reject(G)}}return this._peerConnection.createOffer($).then(function(G){return z._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:G.type,sdp:P(z._tracksToSSRCs,G.sdp)})})},x.prototype.createAnswer=function($){var z=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return z._signalingStateLatch.lower(),z._peerConnection.createAnswer()}).then(function(ae){return z._pendingRemoteOffer=null,z._rolledBackTracksToSSRCs.clear(),M?new RTCSessionDescription({type:ae.type,sdp:P(z._tracksToSSRCs,ae.sdp)}):ae},function(ae){throw z._pendingRemoteOffer=null,ae}):this._peerConnection.createAnswer($).then(function(ae){return z._rolledBackTracksToSSRCs.clear(),M?new RTCSessionDescription({type:ae.type,sdp:P(z._tracksToSSRCs,ae.sdp)}):ae})},x.prototype.createDataChannel=function($,z){var G=this._peerConnection.createDataChannel($,z);return ue(G),G},x.prototype.removeTrack=function($){$.replaceTrack(null),this._peerConnection.removeTrack($)},x.prototype.setLocalDescription=function($){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),F(this,!0,$)},x.prototype.setRemoteDescription=function($){return this._rolledBackTracksToSSRCs.clear(),F(this,!1,$)},x.prototype.close=function(){if(!this._isClosed){this._isClosed=!0,this._peerConnection.close();var $=this;setTimeout(function(){$.dispatchEvent(new Event("iceconnectionstatechange")),$.dispatchEvent(new Event("signalingstatechange"))})}},j.delegateMethods(RTCPeerConnection.prototype,x.prototype,"_peerConnection"),we.exports=x},7121:we=>{"use strict";we.exports=function Oe(Y){Object.defineProperties(this,{track:{enumerable:!0,value:Y,writable:!0}})}},4326:we=>{"use strict";we.exports=function Oe(Y){if(!(this instanceof Oe))return new Oe(Y);var U=Y&&"rollback"===Y.type?null:new RTCSessionDescription(Y);Object.defineProperties(this,{_description:{get:function(){return U}},sdp:{enumerable:!0,value:U?U.sdp:Y.sdp},type:{enumerable:!0,value:U?U.type:Y.type}})}},3657:we=>{"use strict";we.exports=RTCSessionDescription},5481:(we,Oe,Y)=>{"use strict";if("function"==typeof RTCSessionDescription)switch((0,Y(7627).guessBrowser)()){case"chrome":we.exports=Y(4326);break;case"firefox":we.exports=Y(3657);break;default:we.exports=RTCSessionDescription}else we.exports=function(){throw new Error("RTCSessionDescription is not supported")}},7590:(we,Oe,Y)=>{"use strict";var U=Y(9069).EventEmitter;function te(){Object.defineProperties(this,{_eventEmitter:{value:new U}})}te.prototype.dispatchEvent=function(H){return this._eventEmitter.emit(H.type,H)},te.prototype.addEventListener=function(){return this._eventEmitter.addListener.apply(this._eventEmitter,arguments)},te.prototype.removeEventListener=function(){return this._eventEmitter.removeListener.apply(this._eventEmitter,arguments)},we.exports=te},7627:(we,Oe)=>{"use strict";function U(z,G,ae,Ae){if(!(Ae in G)&&!Ae.match(/^on[a-z]+$/)){var Te=!1;try{var he=Object.getOwnPropertyDescriptor(z,Ae);Te=he&&!!he.get}catch{}if(!Te){var Ce;try{Ce=typeof z[Ae]}catch{}"function"===Ce&&(G[Ae]=function(){return this[ae][Ae].apply(this[ae],arguments)})}}}function j(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function M(z){return typeof z>"u"&&(z=j()),/Chrome|CriOS/.test(z)?"chrome":/Firefox|FxiOS/.test(z)?"firefox":/Safari|iPhone|iPad|iPod/.test(z)?"safari":null}Oe.defer=function Y(){var z={};return z.promise=new Promise(function(G,ae){z.resolve=G,z.reject=ae}),z},Oe.delegateMethods=function te(z,G,ae){for(var Ae in z)U(z,G,ae,Ae)},Oe.difference=function oe(z,G){z=Array.isArray(z)?new Set(z):new Set(z.values()),G=Array.isArray(G)?new Set(G):new Set(G.values());var ae=new Set;return z.forEach(function(Ae){G.has(Ae)||ae.add(Ae)}),ae},Oe.flatMap=function H(z,G){return(z instanceof Map||z instanceof Set?Array.from(z.values()):z).reduce(function(Ae,Te){var he=G(Te);return Ae.concat(he)},[])},Oe.guessBrowser=M,Oe.guessBrowserVersion=function P(z){typeof z>"u"&&(z=j());var G={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[M(z)];if(!G)return null;var ae=new RegExp("("+G+")/([^\\s]+)"),Ae=(z.match(ae)||[])[2];if(!Ae)return null;var Te=Ae.split(".").map(Number);return{major:isNaN(Te[0])?null:Te[0],minor:isNaN(Te[1])?null:Te[1]}},Oe.isIOSChrome=function x(z){return typeof z>"u"&&(z=j()),/Mobi/.test(z)&&"chrome"===M()&&/iPad|iPhone|iPod/.test(z)},Oe.interceptEvent=function F(z,G){var ae=null;Object.defineProperty(z,"on"+G,{get:function(){return ae},set:function(Ae){ae&&this.removeEventListener(G,ae),"function"==typeof Ae?this.addEventListener(G,ae=Ae):ae=null}})},Oe.legacyPromise=function J(z,G,ae){return G?z.then(function(Ae){G(Ae)},function(Ae){ae(Ae)}):z},Oe.makeUUID=function se(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var G=16*Math.random()|0;return("x"===z?G:3&G|8).toString(16)})},Oe.proxyProperties=function ue(z,G,ae){Object.getOwnPropertyNames(z).forEach(function(Ae){!function le(z,G,ae,Ae){if(!(Ae in G)){if(Ae.match(/^on[a-z]+$/))return Object.defineProperty(G,Ae,{value:null,writable:!0}),void ae.addEventListener(Ae.slice(2),function(){G.dispatchEvent.apply(G,arguments)});Object.defineProperty(G,Ae,{enumerable:!0,get:function(){return ae[Ae]}})}}(0,G,ae,Ae)})},Oe.support=function $(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}},3688:(we,Oe,Y)=>{"use strict";var U=Y(7627).defer,te={high:new Set(["low"]),low:new Set(["high"])};function oe(j){if(!(this instanceof oe))return new oe(j);var M=j||"low";Object.defineProperties(this,{_state:{set:function(P){if(M!==P){var x=this._whenDeferreds.get(M=P);x.forEach(function(F){F.resolve(this)},this),x.clear()}},get:function(){return M}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])},state:{enumerable:!0,get:function(){return this._state}}})}function H(j,M){return new Error('Cannot transition from "'+j+'" to "'+M+'"')}oe.prototype.lower=function(){return this.transition("low")},oe.prototype.raise=function(){return this.transition("high")},oe.prototype.transition=function(M){if(!te[this.state].has(M))throw H(this.state,M);return this._state=M,this},oe.prototype.when=function(M){if(this.state===M)return Promise.resolve(this);if(!te[this.state].has(M))return Promise.reject(H(this.state,M));var P=U();return this._whenDeferreds.get(M).add(P),P.promise},we.exports=oe},3236:(we,Oe,Y)=>{"use strict";var U=Y(7627).flatMap,te=Y(7627).guessBrowser,oe=null,j=null;function P(ce){return ce&&function H(){if("boolean"==typeof oe)return oe;if(typeof RTCPeerConnection>"u")return oe=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),oe=!1}catch{oe=!0}return oe}()?{"plan-b":"planb","unified-plan":"unified"}[ce]:function M(){if(!j)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype)try{(new RTCPeerConnection).addTransceiver("audio"),j="unified"}catch{j="planb"}else j="planb";return j}()}function J(ce,pe){return(pe.match(new RegExp(ce,"gm"))||[]).reduce(function(Fe,xe){var Ue=xe.match(new RegExp(ce));return Ue?Fe.add(Ue[1]):Fe},new Set)}function se(ce,pe){return J(ce,pe)}function ue(ce){return se("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",ce)}function le(ce){return se("^a=msid:.+ +(.+) *$",ce)}function $(ce,pe){return J("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+pe+" *$",ce)}function z(ce,pe,be){return pe=pe||".*",be=be||".*",ce.split("\r\nm=").slice(1).map(function(Fe){return"m="+Fe}).filter(function(Fe){var xe=new RegExp("m="+pe,"gm"),Ue=new RegExp("a="+be,"gm");return xe.test(Fe)&&Ue.test(Fe)})}function G(ce){return Array.from(J("^a=ssrc:([0-9]+) +.*$",ce))}function ae(ce,pe){var be=z(ce),Fe=new RegExp("^a=msid:[^ ]+ +"+pe+" *$","gm"),xe=be.filter(function(Ue){return Ue.match(Fe)});return new Set(U(xe,G))}function Ae(ce,pe,be){return new Map(Array.from(ce(be)).map(function(Fe){return[Fe,pe(be,Fe)]}))}function Te(ce){return Ae(ue,$,ce)}function he(ce){return Ae(le,ae,ce)}function Ce(ce,pe,be){var Fe=ce(be),xe=new Map;Fe.forEach(function(Je,Pe){if(pe.has(Pe)){var Mt=Array.from(pe.get(Pe)),Lt=Array.from(Je);Mt.forEach(function(yt,We){var Be=Lt[We];xe.set(Be,yt);var Re="a=ssrc:"+yt+" $1";be=be.replace(new RegExp("^a=ssrc:"+Be+" (.*)$","gm"),Re)})}else pe.set(Pe,Je)});var Ue="^(a=ssrc-group:[^ ]+ +)(.*)$";return(be.match(new RegExp(Ue,"gm"))||[]).forEach(function(Je){var Pe=Je.match(new RegExp(Ue));if(Pe){var Mt=Pe[1],yt=Pe[2].split(" ").map(function(We){return xe.get(We)||We}).join(" ");be=be.replace(Pe[0],Mt+yt)}}),be}Oe.getSdpFormat=function F(ce){return{chrome:P(ce),firefox:"unified",safari:typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[te()]||null},Oe.getMediaSections=z,Oe.getPlanBTrackIds=ue,Oe.getUnifiedPlanTrackIds=le,Oe.getPlanBSSRCs=$,Oe.getUnifiedPlanSSRCs=ae,Oe.updatePlanBTrackIdsToSSRCs=function ye(ce,pe){return Ce(Te,ce,pe)},Oe.updateUnifiedPlanTrackIdsToSSRCs=function me(ce,pe){return Ce(he,ce,pe)}},3332:we=>{we.exports=WebSocket},7156:we=>{function Oe(U,te,oe,H,j,M,P){try{var x=U[M](P),F=x.value}catch(J){return void oe(J)}x.done?te(F):Promise.resolve(F).then(H,j)}we.exports=function Y(U){return function(){var te=this,oe=arguments;return new Promise(function(H,j){var M=U.apply(te,oe);function P(F){Oe(M,H,j,P,x,"next",F)}function x(F){Oe(M,H,j,P,x,"throw",F)}P(void 0)})}},we.exports.__esModule=!0,we.exports.default=we.exports},1730:we=>{"use strict";we.exports=JSON.parse('{"name":"twilio-video","title":"Twilio Video","description":"Twilio Video JavaScript Library","version":"2.21.3","homepage":"https://twilio.com","author":"Mark Andrus Roberts <mroberts@twilio.com>","contributors":["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"keywords":["twilio","webrtc","library","javascript","video","rooms"],"repository":{"type":"git","url":"https://github.com/twilio/twilio-video.js.git"},"devDependencies":{"@babel/core":"^7.14.2","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^17.2.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","glob":"^7.1.7","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","jsdoc":"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7","karma":"^5.0.2","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1","mocha":"^3.2.0","mock-require":"^3.0.3","ncp":"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","nyc":"^15.1.0","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.2","typescript":"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^7.7.1"},"engines":{"node":">=0.12"},"license":"BSD-3-Clause","main":"./es5/index.js","types":"./tsdef/index.d.ts","scripts":{"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts","lint":"npm-run-all lint:js lint:ts","printVersion":"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@5.5.0","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react","test":"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc ","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build":"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","docs":"node ./scripts/docs.js ./dist/docs","watch":"tsc -w","clean":"rimraf ./coverage ./es5 ./dist"},"dependencies":{"events":"^3.3.0","util":"^0.12.4","ws":"^7.4.6","xmlhttprequest":"^1.8.0"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"}}')}},we=>{we(we.s=6436)}]);