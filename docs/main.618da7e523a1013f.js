(self.webpackChunkcompare_video_sdks=self.webpackChunkcompare_video_sdks||[]).push([[179],{9358:(Ie,Oe,Y)=>{"use strict";function L(r){return"function"==typeof r}function W(r){const e=r(s=>{Error.call(s),s.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const ne=W(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((s,l)=>`${l+1}) ${s.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Q(r,t){if(r){const e=r.indexOf(t);0<=e&&r.splice(e,1)}}class U{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const m of e)m.remove(this);else e.remove(this);const{initialTeardown:s}=this;if(L(s))try{s()}catch(m){t=m instanceof ne?m.errors:[m]}const{_teardowns:l}=this;if(l){this._teardowns=null;for(const m of l)try{N(m)}catch(E){t=t??[],E instanceof ne?t=[...t,...E.errors]:t.push(E)}}if(t)throw new ne(t)}}add(t){var e;if(t&&t!==this)if(this.closed)N(t);else{if(t instanceof U){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Q(e,t)}remove(t){const{_teardowns:e}=this;e&&Q(e,t),t instanceof U&&t._removeParent(this)}}U.EMPTY=(()=>{const r=new U;return r.closed=!0,r})();const D=U.EMPTY;function O(r){return r instanceof U||r&&"closed"in r&&L(r.remove)&&L(r.add)&&L(r.unsubscribe)}function N(r){L(r)?r():r.unsubscribe()}const x={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J={setTimeout(...r){const{delegate:t}=J;return(t?.setTimeout||setTimeout)(...r)},clearTimeout(r){const{delegate:t}=J;return(t?.clearTimeout||clearTimeout)(r)},delegate:void 0};function ie(r){J.setTimeout(()=>{const{onUnhandledError:t}=x;if(!t)throw r;t(r)})}function te(){}const le=K("C",void 0,void 0);function K(r,t,e){return{kind:r,value:t,error:e}}let se=null;function ve(r){if(x.useDeprecatedSynchronousErrorHandling){const t=!se;if(t&&(se={errorThrown:!1,error:null}),r(),t){const{errorThrown:e,error:s}=se;if(se=null,e)throw s}}else r()}class pe extends U{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,O(t)&&t.add(this)):this.destination=de}static create(t,e,s){return new Ee(t,e,s)}next(t){this.isStopped?re(function z(r){return K("N",r,void 0)}(t),this):this._next(t)}error(t){this.isStopped?re(function X(r){return K("E",void 0,r)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?re(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ee extends pe{constructor(t,e,s){let l;if(super(),L(t))l=t;else if(t){let m;({next:l,error:e,complete:s}=t),this&&x.useDeprecatedNextContext?(m=Object.create(t),m.unsubscribe=()=>this.unsubscribe()):m=t,l=l?.bind(m),e=e?.bind(m),s=s?.bind(m)}this.destination={next:l?Ae(l):te,error:Ae(e??ge),complete:s?Ae(s):te}}}function Ae(r,t){return(...e)=>{try{r(...e)}catch(s){x.useDeprecatedSynchronousErrorHandling?function De(r){x.useDeprecatedSynchronousErrorHandling&&se&&(se.errorThrown=!0,se.error=r)}(s):ie(s)}}}function ge(r){throw r}function re(r,t){const{onStoppedNotification:e}=x;e&&J.setTimeout(()=>e(r,t))}const de={closed:!0,next:te,error:ge,complete:te},we="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fe(r){return r}let ze=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){const s=new r;return s.source=this,s.operator=e,s}subscribe(e,s,l){const m=function xt(r){return r&&r instanceof pe||function je(r){return r&&L(r.next)&&L(r.error)&&L(r.complete)}(r)&&O(r)}(e)?e:new Ee(e,s,l);return ve(()=>{const{operator:E,source:I}=this;m.add(E?E.call(m,I):I?this._subscribe(m):this._trySubscribe(m))}),m}_trySubscribe(e){try{return this._subscribe(e)}catch(s){e.error(s)}}forEach(e,s){return new(s=Ze(s))((l,m)=>{let E;E=this.subscribe(I=>{try{e(I)}catch(k){m(k),E?.unsubscribe()}},m,l)})}_subscribe(e){var s;return null===(s=this.source)||void 0===s?void 0:s.subscribe(e)}[we](){return this}pipe(...e){return function Ve(r){return 0===r.length?Fe:1===r.length?r[0]:function(e){return r.reduce((s,l)=>l(s),e)}}(e)(this)}toPromise(e){return new(e=Ze(e))((s,l)=>{let m;this.subscribe(E=>m=E,E=>l(E),()=>s(m))})}}return r.create=t=>new r(t),r})();function Ze(r){var t;return null!==(t=r??x.Promise)&&void 0!==t?t:Promise}const Wt=W(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ht=(()=>{class r extends ze{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const s=new qe(this,this);return s.operator=e,s}_throwIfClosed(){if(this.closed)throw new Wt}next(e){ve(()=>{if(this._throwIfClosed(),!this.isStopped){const s=this.observers.slice();for(const l of s)l.next(e)}})}error(e){ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:s}=this;for(;s.length;)s.shift().error(e)}})}complete(){ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:s,isStopped:l,observers:m}=this;return s||l?D:(m.push(e),new U(()=>Q(m,e)))}_checkFinalizedStatuses(e){const{hasError:s,thrownError:l,isStopped:m}=this;s?e.error(l):m&&e.complete()}asObservable(){const e=new ze;return e.source=this,e}}return r.create=(t,e)=>new qe(t,e),r})();class qe extends ht{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===s||s.call(e,t)}error(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===s||s.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,s;return null!==(s=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==s?s:D}}function Ye(r){return t=>{if(function Ue(r){return L(r?.lift)}(t))return t.lift(function(e){try{return r(e,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}class Re extends pe{constructor(t,e,s,l,m){super(t),this.onFinalize=m,this._next=e?function(E){try{e(E)}catch(I){t.error(I)}}:super._next,this._error=l?function(E){try{l(E)}catch(I){t.error(I)}finally{this.unsubscribe()}}:super._error,this._complete=s?function(){try{s()}catch(E){t.error(E)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function tt(r,t){return Ye((e,s)=>{let l=0;e.subscribe(new Re(s,m=>{s.next(r.call(t,m,l++))}))})}function Ht(r){return this instanceof Ht?(this.v=r,this):new Ht(r)}function $t(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,s=e.apply(r,t||[]),m=[];return l={},E("next"),E("throw"),E("return"),l[Symbol.asyncIterator]=function(){return this},l;function E(Le){s[Le]&&(l[Le]=function(Ke){return new Promise(function(rt,Ct){m.push([Le,Ke,rt,Ct])>1||I(Le,Ke)})})}function I(Le,Ke){try{!function k(Le){Le.value instanceof Ht?Promise.resolve(Le.value.v).then(F,ee):me(m[0][2],Le)}(s[Le](Ke))}catch(rt){me(m[0][3],rt)}}function F(Le){I("next",Le)}function ee(Le){I("throw",Le)}function me(Le,Ke){Le(Ke),m.shift(),m.length&&I(m[0][0],m[0][1])}}function Me(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=r[Symbol.asyncIterator];return t?t.call(r):(r=function Si(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],s=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(m){e[m]=r[m]&&function(E){return new Promise(function(I,k){!function l(m,E,I,k){Promise.resolve(k).then(function(F){m({value:F,done:I})},E)}(I,k,(E=r[m](E)).done,E.value)})}}}const fo=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function Ss(r){return L(r?.then)}function oo(r){return L(r[we])}function Pc(r){return Symbol.asyncIterator&&L(r?.[Symbol.asyncIterator])}function jn(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ne=function vn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function dt(r){return L(r?.[Ne])}function Zt(r){return $t(this,arguments,function*(){const e=r.getReader();try{for(;;){const{value:s,done:l}=yield Ht(e.read());if(l)return yield Ht(void 0);yield yield Ht(s)}}finally{e.releaseLock()}})}function en(r){return L(r?.getReader)}function gn(r){if(r instanceof ze)return r;if(null!=r){if(oo(r))return function pi(r){return new ze(t=>{const e=r[we]();if(L(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(fo(r))return function bo(r){return new ze(t=>{for(let e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}(r);if(Ss(r))return function Cs(r){return new ze(t=>{r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ie)})}(r);if(Pc(r))return mo(r);if(dt(r))return function ts(r){return new ze(t=>{for(const e of r)if(t.next(e),t.closed)return;t.complete()})}(r);if(en(r))return function Yn(r){return mo(Zt(r))}(r)}throw jn(r)}function mo(r){return new ze(t=>{(function Rr(r,t){var e,s,l,m;return function jr(r,t,e,s){return new(e||(e=Promise))(function(m,E){function I(ee){try{F(s.next(ee))}catch(me){E(me)}}function k(ee){try{F(s.throw(ee))}catch(me){E(me)}}function F(ee){ee.done?m(ee.value):function l(m){return m instanceof e?m:new e(function(E){E(m)})}(ee.value).then(I,k)}F((s=s.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Me(r);!(s=yield e.next()).done;)if(t.next(s.value),t.closed)return}catch(E){l={error:E}}finally{try{s&&!s.done&&(m=e.return)&&(yield m.call(e))}finally{if(l)throw l.error}}t.complete()})})(r,t).catch(e=>t.error(e))})}function $i(r,t,e,s=0,l=!1){const m=t.schedule(function(){e(),l?r.add(this.schedule(null,s)):this.unsubscribe()},s);if(r.add(m),!l)return m}function nr(r,t,e=1/0){return L(t)?nr((s,l)=>tt((m,E)=>t(s,m,l,E))(gn(r(s,l))),e):("number"==typeof t&&(e=t),Ye((s,l)=>function hu(r,t,e,s,l,m,E,I){const k=[];let F=0,ee=0,me=!1;const Le=()=>{me&&!k.length&&!F&&t.complete()},Ke=Ct=>F<s?rt(Ct):k.push(Ct),rt=Ct=>{m&&t.next(Ct),F++;let Jt=!1;gn(e(Ct,ee++)).subscribe(new Re(t,tn=>{l?.(tn),m?Ke(tn):t.next(tn)},()=>{Jt=!0},void 0,()=>{if(Jt)try{for(F--;k.length&&F<s;){const tn=k.shift();E?$i(t,E,()=>rt(tn)):rt(tn)}Le()}catch(tn){t.error(tn)}}))};return r.subscribe(new Re(t,Ke,()=>{me=!0,Le()})),()=>{I?.()}}(s,l,r,e)))}function Hp(r=1/0){return nr(Fe,r)}const nE=new ze(r=>r.complete());function Bv(r){return r&&L(r.schedule)}function Fv(r){return r[r.length-1]}function Uv(r){return L(Fv(r))?r.pop():void 0}function Ds(r){return Bv(Fv(r))?r.pop():void 0}function Vv(r,t=0){return Ye((e,s)=>{e.subscribe(new Re(s,l=>$i(s,r,()=>s.next(l),t),()=>$i(s,r,()=>s.complete(),t),l=>$i(s,r,()=>s.error(l),t)))})}function zg(r,t=0){return Ye((e,s)=>{s.add(r.schedule(()=>e.subscribe(s),t))})}function Yg(r,t){if(!r)throw new Error("Iterable cannot be null");return new ze(e=>{$i(e,t,()=>{const s=r[Symbol.asyncIterator]();$i(e,t,()=>{s.next().then(l=>{l.done?e.complete():e.next(l.value)})},0,!0)})})}function hc(r,t){return t?function v0(r,t){if(null!=r){if(oo(r))return function uw(r,t){return gn(r).pipe(zg(t),Vv(t))}(r,t);if(fo(r))return function lw(r,t){return new ze(e=>{let s=0;return t.schedule(function(){s===r.length?e.complete():(e.next(r[s++]),e.closed||this.schedule())})})}(r,t);if(Ss(r))return function Zs(r,t){return gn(r).pipe(zg(t),Vv(t))}(r,t);if(Pc(r))return Yg(r,t);if(dt(r))return function Un(r,t){return new ze(e=>{let s;return $i(e,t,()=>{s=r[Ne](),$i(e,t,()=>{let l,m;try{({value:l,done:m}=s.next())}catch(E){return void e.error(E)}m?e.complete():e.next(l)},0,!0)}),()=>L(s?.return)&&s.return()})}(r,t);if(en(r))return function sm(r,t){return Yg(Zt(r),t)}(r,t)}throw jn(r)}(r,t):gn(r)}function Ro(...r){const t=Ds(r),e=function Yd(r,t){return"number"==typeof Fv(r)?r.pop():t}(r,1/0),s=r;return s.length?1===s.length?gn(s[0]):Hp(e)(hc(s,t)):nE}function yl(r){return r<=0?()=>nE:Ye((t,e)=>{let s=0;t.subscribe(new Re(e,l=>{++s<=r&&(e.next(l),r<=s&&e.complete())}))})}function pu(r={}){const{connector:t=(()=>new ht),resetOnError:e=!0,resetOnComplete:s=!0,resetOnRefCountZero:l=!0}=r;return m=>{let E=null,I=null,k=null,F=0,ee=!1,me=!1;const Le=()=>{I?.unsubscribe(),I=null},Ke=()=>{Le(),E=k=null,ee=me=!1},rt=()=>{const Ct=E;Ke(),Ct?.unsubscribe()};return Ye((Ct,Jt)=>{F++,!me&&!ee&&Le();const tn=k=k??t();Jt.add(()=>{F--,0===F&&!me&&!ee&&(I=rE(rt,l))}),tn.subscribe(Jt),E||(E=new Ee({next:Vn=>tn.next(Vn),error:Vn=>{me=!0,Le(),I=rE(Ke,e,Vn),tn.error(Vn)},complete:()=>{ee=!0,Le(),I=rE(Ke,s),tn.complete()}}),hc(Ct).subscribe(E))})(m)}}function rE(r,t,...e){return!0===t?(r(),null):!1===t?null:t(...e).pipe(yl(1)).subscribe(()=>r())}function Oo(r){for(let t in r)if(r[t]===Oo)return t;throw Error("Could not find renamed property on target object.")}function mn(r,t){for(const e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function Lo(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Lo).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Vh(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const tr=Oo({__forward_ref__:Oo});function Qo(r){return r.__forward_ref__=Qo,r.toString=function(){return Lo(this())},r}function Wr(r){return am(r)?r():r}function am(r){return"function"==typeof r&&r.hasOwnProperty(tr)&&r.__forward_ref__===Qo}function ea(r){return r&&!!r.\u0275providers}const qg="https://g.co/ng/security#xss";class _n extends Error{constructor(t,e){super(function iE(r,t){return`NG0${Math.abs(r)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function si(r){return"string"==typeof r?r:null==r?"":String(r)}function jv(r,t){throw new _n(-201,!1)}function El(r,t){null==r&&function io(r,t,e,s){throw new Error(`ASSERTION ERROR: ${r}`+(null==s?"":` [Expected=> ${e} ${s} ${t} <=Actual]`))}(t,r,null,"!=")}function Ar(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Ui(r){return{providers:r.providers||[],imports:r.imports||[]}}function sE(r){return Ho(r,Xg)||Ho(r,dr)}function Ho(r,t){return r.hasOwnProperty(t)?r[t]:null}function Jg(r){return r&&(r.hasOwnProperty(y0)||r.hasOwnProperty(Qv))?r[y0]:null}const Xg=Oo({\u0275prov:Oo}),y0=Oo({\u0275inj:Oo}),dr=Oo({ngInjectableDef:Oo}),Qv=Oo({ngInjectorDef:Oo});var qr=(()=>((qr=qr||{})[qr.Default=0]="Default",qr[qr.Host=1]="Host",qr[qr.Self=2]="Self",qr[qr.SkipSelf=4]="SkipSelf",qr[qr.Optional=8]="Optional",qr))();let $g;function xu(r){const t=$g;return $g=r,t}function Hn(r,t,e){const s=sE(r);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:e&qr.Optional?null:void 0!==t?t:void jv(Lo(r))}const Go=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Wp={},b0="__NG_DI_FLAG__",Hv="ngTempTokenPath",aE=/\n/gm,qd="__source";let Kp;function zp(r){const t=Kp;return Kp=r,t}function cm(r,t=qr.Default){if(void 0===Kp)throw new _n(-203,!1);return null===Kp?Hn(r,void 0,t):Kp.get(r,t&qr.Optional?null:void 0,t)}function Xt(r,t=qr.Default){return(function sN(){return $g}()||cm)(Wr(r),t)}function ba(r,t=qr.Default){return Xt(r,od(t))}function od(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function cE(r){const t=[];for(let e=0;e<r.length;e++){const s=Wr(r[e]);if(Array.isArray(s)){if(0===s.length)throw new _n(900,!1);let l,m=qr.Default;for(let E=0;E<s.length;E++){const I=s[E],k=cN(I);"number"==typeof k?-1===k?l=I.token:m|=k:l=I}t.push(Xt(l,m))}else t.push(Xt(s))}return t}function t_(r,t){return r[b0]=t,r.prototype[b0]=t,r}function cN(r){return r[b0]}function Jd(r){return{toString:r}.toString()}var sd=(()=>((sd=sd||{})[sd.OnPush=0]="OnPush",sd[sd.Default=1]="Default",sd))(),fu=(()=>{return(r=fu||(fu={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",fu;var r})();const Lu={},Zi=[],um=Oo({\u0275cmp:Oo}),uE=Oo({\u0275dir:Oo}),Gv=Oo({\u0275pipe:Oo}),hw=Oo({\u0275mod:Oo}),Cl=Oo({\u0275fac:Oo}),Wv=Oo({__NG_ELEMENT_ID__:Oo});let xc=0;function Sa(r){return Jd(()=>{const e=!0===r.standalone,s={},l={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===sd.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||Zi,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||fu.Emulated,id:"c"+xc++,styles:r.styles||Zi,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},m=r.dependencies,E=r.features;return l.inputs=Kv(r.inputs,s),l.outputs=Kv(r.outputs),E&&E.forEach(I=>I(l)),l.directiveDefs=m?()=>("function"==typeof m?m():m).map(lm).filter(fw):null,l.pipeDefs=m?()=>("function"==typeof m?m():m).map(Lc).filter(fw):null,l})}function lm(r){return eo(r)||Is(r)}function fw(r){return null!==r}function Gi(r){return Jd(()=>({type:r.type,bootstrap:r.bootstrap||Zi,declarations:r.declarations||Zi,imports:r.imports||Zi,exports:r.exports||Zi,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Kv(r,t){if(null==r)return Lu;const e={};for(const s in r)if(r.hasOwnProperty(s)){let l=r[s],m=l;Array.isArray(l)&&(m=l[1],l=l[0]),e[l]=s,t&&(t[l]=m)}return e}const gr=Sa;function ra(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function eo(r){return r[um]||null}function Is(r){return r[uE]||null}function Lc(r){return r[Gv]||null}function Fc(r){return Array.isArray(r)&&"object"==typeof r[1]}function Il(r){return Array.isArray(r)&&!0===r[1]}function dE(r){return 0!=(4&r.flags)}function hE(r){return r.componentOffset>-1}function eh(r){return 1==(1&r.flags)}function mu(r){return null!==r.template}function S0(r){return 0!=(256&r[2])}function ia(r,t){return r.hasOwnProperty(Cl)?r[Cl]:null}class qv{constructor(t,e,s){this.previousValue=t,this.currentValue=e,this.firstChange=s}isFirstChange(){return this.firstChange}}function Ya(){return gE}function gE(r){return r.type.prototype.ngOnChanges&&(r.setInput=fN),gm}function gm(){const r=a_(this),t=r?.current;if(t){const e=r.previous;if(e===Lu)r.previous=t;else for(let s in t)e[s]=t[s];r.current=null,this.ngOnChanges(t)}}function fN(r,t,e,s){const l=this.declaredInputs[e],m=a_(r)||function mN(r,t){return r[T0]=t}(r,{previous:Lu,current:null}),E=m.current||(m.current={}),I=m.previous,k=I[l];E[l]=new qv(k&&k.currentValue,t,I===Lu),r[s]=t}Ya.ngInherit=!0;const T0="__ngSimpleChanges__";function a_(r){return r[T0]||null}function sa(r){for(;Array.isArray(r);)r=r[0];return r}function Jv(r,t){return sa(t[r])}function qa(r,t){return sa(t[r.index])}function Sw(r,t){return r.data[t]}function _m(r,t){return r[t]}function Ia(r,t){const e=t[r];return Fc(e)?e:e[0]}function Wh(r){return 64==(64&r[2])}function Kh(r,t){return null==t?null:r[t]}function Xv(r){r[18]=0}function vE(r,t){r[5]+=t;let e=r,s=r[3];for(;null!==s&&(1===t&&1===e[5]||-1===t&&0===e[5]);)s[5]+=t,e=s,s=s[3]}const ci={lFrame:Sm(null),bindingsEnabled:!0};function vs(){return ci.bindingsEnabled}function yn(){return ci.lFrame.lView}function cr(){return ci.lFrame.tView}function Ta(r){return ci.lFrame.contextLView=r,r[8]}function wa(r){return ci.lFrame.contextLView=null,r}function Wo(){let r=Zv();for(;null!==r&&64===r.type;)r=r.parent;return r}function Zv(){return ci.lFrame.currentTNode}function ud(r,t){const e=ci.lFrame;e.currentTNode=r,e.isParent=t}function ym(){return ci.lFrame.isParent}function eA(){ci.lFrame.isParent=!1}function qp(){return ci.lFrame.bindingIndex++}function Fo(r){const t=ci.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function ds(r,t){const e=ci.lFrame;e.bindingIndex=e.bindingRootIndex=r,Jp(t)}function Jp(r){ci.lFrame.currentDirectiveIndex=r}function Xp(r){const t=ci.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}function P0(){return ci.lFrame.currentQueryIndex}function mc(r){ci.lFrame.currentQueryIndex=r}function M0(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Ts(r,t,e){if(e&qr.SkipSelf){let l=t,m=r;for(;!(l=l.parent,null!==l||e&qr.Host||(l=M0(m),null===l||(m=m[15],10&l.type))););if(null===l)return!1;t=l,r=m}const s=ci.lFrame=nA();return s.currentTNode=t,s.lView=r,!0}function gc(r){const t=nA(),e=r[1];ci.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function nA(){const r=ci.lFrame,t=null===r?null:r.child;return null===t?Sm(r):t}function Sm(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function to(){const r=ci.lFrame;return ci.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const hd=to;function Ni(){const r=to();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Uc(){return ci.lFrame.selectedIndex}function Im(r){ci.lFrame.selectedIndex=r}function Uo(){const r=ci.lFrame;return Sw(r.tView,r.selectedIndex)}function Tm(){ci.lFrame.currentNamespace="svg"}function $p(){!function x0(){ci.lFrame.currentNamespace=null}()}function ko(r,t){for(let e=t.directiveStart,s=t.directiveEnd;e<s;e++){const m=r.data[e].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:I,ngAfterViewInit:k,ngAfterViewChecked:F,ngOnDestroy:ee}=m;E&&(r.contentHooks||(r.contentHooks=[])).push(-e,E),I&&((r.contentHooks||(r.contentHooks=[])).push(e,I),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(e,I)),k&&(r.viewHooks||(r.viewHooks=[])).push(-e,k),F&&((r.viewHooks||(r.viewHooks=[])).push(e,F),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(e,F)),null!=ee&&(r.destroyHooks||(r.destroyHooks=[])).push(e,ee)}}function oA(r,t,e){wm(r,t,3,e)}function Zp(r,t,e,s){(3&r[2])===e&&wm(r,t,e,s)}function Ja(r,t){let e=r[2];(3&e)===t&&(e&=2047,e+=1,r[2]=e)}function wm(r,t,e,s){const m=s??-1,E=t.length-1;let I=0;for(let k=void 0!==s?65535&r[18]:0;k<E;k++)if("number"==typeof t[k+1]){if(I=t[k],null!=s&&I>=s)break}else t[k]<0&&(r[18]+=65536),(I<m||-1==m)&&(_o(r,e,t,k),r[18]=(4294901760&r[18])+k+2),k++}function _o(r,t,e,s){const l=e[s]<0,m=e[s+1],I=r[l?-e[s]:e[s]];if(l){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{m.call(I)}finally{}}}else try{m.call(I)}finally{}}class No{constructor(t,e,s){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=s}}function F0(r,t,e){let s=0;for(;s<e.length;){const l=e[s];if("number"==typeof l){if(0!==l)break;s++;const m=e[s++],E=e[s++],I=e[s++];r.setAttribute(t,E,I,m)}else{const m=l,E=e[++s];Xa(m)?r.setProperty(t,m,E):r.setAttribute(t,m,E),s++}}return s}function Dr(r){return 3===r||4===r||6===r}function Xa(r){return 64===r.charCodeAt(0)}function pd(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let e=-1;for(let s=0;s<t.length;s++){const l=t[s];"number"==typeof l?e=l:0===e||Tw(r,e,l,null,-1===e||2===e?t[++s]:null)}}return r}function Tw(r,t,e,s,l){let m=0,E=r.length;if(-1===t)E=-1;else for(;m<r.length;){const I=r[m++];if("number"==typeof I){if(I===t){E=-1;break}if(I>t){E=m-1;break}}}for(;m<r.length;){const I=r[m];if("number"==typeof I)break;if(I===e){if(null===s)return void(null!==l&&(r[m+1]=l));if(s===r[m+1])return void(r[m+2]=l)}m++,null!==s&&m++,null!==l&&m++}-1!==E&&(r.splice(E,0,t),m=E+1),r.splice(m++,0,e),null!==s&&r.splice(m++,0,s),null!==l&&r.splice(m++,0,l)}function EE(r){return-1!==r}function bE(r){return 32767&r}function zh(r,t){let e=function Vu(r){return r>>16}(r),s=t;for(;e>0;)s=s[15],e--;return s}let u_=!0;function Yh(r){const t=u_;return u_=r,t}let V0=0;const _u={};function ju(r,t){const e=Om(r,t);if(-1!==e)return e;const s=t[1];s.firstCreatePass&&(r.injectorIndex=t.length,Rm(s.data,r),Rm(t,null),Rm(s.blueprint,null));const l=Oa(r,t),m=r.injectorIndex;if(EE(l)){const E=bE(l),I=zh(l,t),k=I[1].data;for(let F=0;F<8;F++)t[m+F]=I[E+F]|k[E+F]}return t[m+8]=l,m}function Rm(r,t){r.push(0,0,0,0,0,0,0,0,t)}function Om(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function Oa(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let e=0,s=null,l=t;for(;null!==l;){if(s=Q0(l),null===s)return-1;if(e++,l=l[15],-1!==s.injectorIndex)return s.injectorIndex|e<<16}return-1}function aA(r,t,e){!function tf(r,t,e){let s;"string"==typeof e?s=e.charCodeAt(0)||0:e.hasOwnProperty(Wv)&&(s=e[Wv]),null==s&&(s=e[Wv]=V0++);const l=255&s;t.data[r+(l>>5)]|=1<<l}(r,t,e)}function Dm(r,t,e){if(e&qr.Optional||void 0!==r)return r;jv()}function j0(r,t,e,s){if(e&qr.Optional&&void 0===s&&(s=null),0==(e&(qr.Self|qr.Host))){const l=r[9],m=xu(void 0);try{return l?l.get(t,s,e&qr.Optional):Hn(t,s,e&qr.Optional)}finally{xu(m)}}return Dm(s,0,e)}function Hu(r,t,e,s=qr.Default,l){if(null!==r){if(1024&t[2]){const E=function cA(r,t,e,s,l){let m=r,E=t;for(;null!==m&&null!==E&&1024&E[2]&&!(256&E[2]);){const I=ww(m,E,e,s|qr.Self,_u);if(I!==_u)return I;let k=m.parent;if(!k){const F=E[21];if(F){const ee=F.get(e,_u,s);if(ee!==_u)return ee}k=Q0(E),E=E[15]}m=k}return l}(r,t,e,s,_u);if(E!==_u)return E}const m=ww(r,t,e,s,_u);if(m!==_u)return m}return j0(t,e,s,l)}function ww(r,t,e,s,l){const m=function md(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(Wv)?r[Wv]:void 0;return"number"==typeof t?t>=0?255&t:Jr:t}(e);if("function"==typeof m){if(!Ts(t,r,s))return s&qr.Host?Dm(l,0,s):j0(t,e,s,l);try{const E=m(s);if(null!=E||s&qr.Optional)return E;jv()}finally{hd()}}else if("number"==typeof m){let E=null,I=Om(r,t),k=-1,F=s&qr.Host?t[16][6]:null;for((-1===I||s&qr.SkipSelf)&&(k=-1===I?Oa(r,t):t[I+8],-1!==k&&Ow(s,!1)?(E=t[1],I=bE(k),t=zh(k,t)):I=-1);-1!==I;){const ee=t[1];if(km(m,I,ee.data)){const me=Rw(I,t,e,E,s,F);if(me!==_u)return me}k=t[I+8],-1!==k&&Ow(s,t[1].data[I+8]===F)&&km(m,I,t)?(E=ee,I=bE(k),t=zh(k,t)):I=-1}}return l}function Rw(r,t,e,s,l,m){const E=t[1],I=E.data[r+8],ee=fd(I,E,e,null==s?hE(I)&&u_:s!=E&&0!=(3&I.type),l&qr.Host&&m===I);return null!==ee?nf(t,E,ee,I):_u}function fd(r,t,e,s,l){const m=r.providerIndexes,E=t.data,I=1048575&m,k=r.directiveStart,ee=m>>20,Le=l?I+ee:r.directiveEnd;for(let Ke=s?I:I+ee;Ke<Le;Ke++){const rt=E[Ke];if(Ke<k&&e===rt||Ke>=k&&rt.type===e)return Ke}if(l){const Ke=E[k];if(Ke&&mu(Ke)&&Ke.type===e)return k}return null}function nf(r,t,e,s){let l=r[e];const m=t.data;if(function yN(r){return r instanceof No}(l)){const E=l;E.resolving&&function oE(r,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${r}`:"";throw new _n(-200,`Circular dependency in DI detected for ${r}${e}`)}(function go(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():si(r)}(m[e]));const I=Yh(E.canSeeViewProviders);E.resolving=!0;const k=E.injectImpl?xu(E.injectImpl):null;Ts(r,s,qr.Default);try{l=r[e]=E.factory(void 0,m,r,s),t.firstCreatePass&&e>=s.directiveStart&&function L0(r,t,e){const{ngOnChanges:s,ngOnInit:l,ngDoCheck:m}=t.type.prototype;if(s){const E=gE(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(r,E),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,E)}l&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-r,l),m&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r,m),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,m))}(e,m[e],t)}finally{null!==k&&xu(k),Yh(I),E.resolving=!1,hd()}}return l}function km(r,t,e){return!!(e[t+(r>>5)]&1<<r)}function Ow(r,t){return!(r&qr.Self||r&qr.Host&&t)}class ur{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,s){return Hu(this._tNode,this._lView,t,od(s),e)}}function Jr(){return new ur(Wo(),yn())}function vo(r){return Jd(()=>{const t=r.prototype.constructor,e=t[Cl]||SE(t),s=Object.prototype;let l=Object.getPrototypeOf(r.prototype).constructor;for(;l&&l!==s;){const m=l[Cl]||SE(l);if(m&&m!==e)return m;l=Object.getPrototypeOf(l)}return m=>new m})}function SE(r){return am(r)?()=>{const t=SE(Wr(r));return t&&t()}:ia(r)}function Q0(r){const t=r[1],e=t.type;return 2===e?t.declTNode:1===e?r[6]:null}function qh(r){return function Qu(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const e=r.attrs;if(e){const s=e.length;let l=0;for(;l<s;){const m=e[l];if(Dr(m))break;if(0===m)l+=2;else if("number"==typeof m)for(l++;l<s&&"string"==typeof e[l];)l++;else{if(m===t)return e[l+1];l+=2}}}return null}(Wo(),r)}const Gu="__parameters__";function wi(r,t,e){return Jd(()=>{const s=function sf(r){return function(...e){if(r){const s=r(...e);for(const l in s)this[l]=s[l]}}}(t);function l(...m){if(this instanceof l)return s.apply(this,m),this;const E=new l(...m);return I.annotation=E,I;function I(k,F,ee){const me=k.hasOwnProperty(Gu)?k[Gu]:Object.defineProperty(k,Gu,{value:[]})[Gu];for(;me.length<=ee;)me.push(null);return(me[ee]=me[ee]||[]).push(E),k}}return e&&(l.prototype=Object.create(e.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}class Fn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Ar({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vc(r,t){void 0===t&&(t=r);for(let e=0;e<r.length;e++){let s=r[e];Array.isArray(s)?(t===r&&(t=r.slice(0,e)),vc(s,t)):t!==r&&t.push(s)}return t}function Jh(r,t){r.forEach(e=>Array.isArray(e)?Jh(e,t):t(e))}function RE(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function Rl(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function Xh(r,t){const e=[];for(let s=0;s<r;s++)e.push(t);return e}function Nr(r,t,e){let s=lr(r,t);return s>=0?r[1|s]=e:(s=~s,function Nm(r,t,e,s){let l=r.length;if(l==t)r.push(e,s);else if(1===l)r.push(s,r[0]),r[0]=e;else{for(l--,r.push(r[l-1],r[l]);l>t;)r[l]=r[l-2],l--;r[t]=e,r[t+1]=s}}(r,s,t,e)),s}function Pm(r,t){const e=lr(r,t);if(e>=0)return r[1|e]}function lr(r,t){return function ui(r,t,e){let s=0,l=r.length>>e;for(;l!==s;){const m=s+(l-s>>1),E=r[m<<e];if(t===E)return m<<e;E>t?l=m:s=m+1}return~(l<<e)}(r,t,1)}const mi=t_(wi("Optional"),8),p_=t_(wi("SkipSelf"),4);var jc=(()=>((jc=jc||{})[jc.Important=1]="Important",jc[jc.DashCase=2]="DashCase",jc))();const HE=new Map;let iC=0;const fA="__ngContext__";function zs(r,t){Fc(t)?(r[fA]=t[20],function So(r){HE.set(r[20],r)}(t)):r[fA]=t}function _d(r,t){return undefined(r,t)}function rh(r){const t=r[3];return Il(t)?t[3]:t}function zE(r){return YE(r[13])}function v_(r){return YE(r[4])}function YE(r){for(;null!==r&&!Il(r);)r=r[4];return r}function np(r,t,e,s,l){if(null!=s){let m,E=!1;Il(s)?m=s:Fc(s)&&(E=!0,s=s[0]);const I=sa(s);0===r&&null!==e?null==l?mf(t,e,I):vd(t,e,I,l||null,!0):1===r&&null!==e?vd(t,e,I,l||null,!0):2===r?function Xw(r,t,e){const s=AA(r,t);s&&function Yw(r,t,e,s){r.removeChild(t,e,s)}(r,s,t,e)}(t,I,E):3===r&&t.destroyNode(I),null!=m&&function ZE(r,t,e,s,l){const m=e[7];m!==sa(e)&&np(t,r,s,m,l);for(let I=10;I<e.length;I++){const k=e[I];XE(k[1],k,r,t,s,m)}}(t,r,m,e,l)}}function kl(r,t,e){return r.createElement(t,e)}function Ww(r,t){const e=r[9],s=e.indexOf(t),l=t[3];512&t[2]&&(t[2]&=-513,vE(l,-1)),e.splice(s,1)}function Pl(r,t){if(r.length<=10)return;const e=10+t,s=r[e];if(s){const l=s[17];null!==l&&l!==r&&Ww(l,s),t>0&&(r[e-1][4]=s[4]);const m=Rl(r,10+t);!function YB(r,t){XE(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(s[1],s);const E=m[19];null!==E&&E.detachView(m[1]),s[3]=null,s[4]=null,s[2]&=-65}return s}function Bm(r,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&XE(r,t,e,3,null,null),function Hw(r){let t=r[13];if(!t)return aC(r[1],r);for(;t;){let e=null;if(Fc(t))e=t[13];else{const s=t[10];s&&(e=s)}if(!e){for(;t&&!t[4]&&t!==r;)Fc(t)&&aC(t[1],t),t=t[3];null===t&&(t=r),Fc(t)&&aC(t[1],t),e=t&&t[4]}t=e}}(t)}}function aC(r,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function zw(r,t){let e;if(null!=r&&null!=(e=r.destroyHooks))for(let s=0;s<e.length;s+=2){const l=t[e[s]];if(!(l instanceof No)){const m=e[s+1];if(Array.isArray(m))for(let E=0;E<m.length;E+=2){const I=l[m[E]],k=m[E+1];try{k.call(I)}finally{}}else try{m.call(l)}finally{}}}}(r,t),function Kw(r,t){const e=r.cleanup,s=t[7];let l=-1;if(null!==e)for(let m=0;m<e.length-1;m+=2)if("string"==typeof e[m]){const E=e[m+3];E>=0?s[l=E]():s[l=-E].unsubscribe(),m+=2}else{const E=s[l=e[m+1]];e[m].call(E)}if(null!==s){for(let m=l+1;m<s.length;m++)(0,s[m])();t[7]=null}}(r,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Il(t[3])){e!==t[3]&&Ww(e,t);const s=t[19];null!==s&&s.detachView(r)}!function hA(r){HE.delete(r[20])}(t)}}function _A(r,t,e){return function qE(r,t,e){let s=t;for(;null!==s&&40&s.type;)s=(t=s).parent;if(null===s)return e[0];{const{componentOffset:l}=s;if(l>-1){const{encapsulation:m}=r.data[s.directiveStart+l];if(m===fu.None||m===fu.Emulated)return null}return qa(s,e)}}(r,t.parent,e)}function vd(r,t,e,s,l){r.insertBefore(t,e,s,l)}function mf(r,t,e){r.appendChild(t,e)}function JE(r,t,e,s,l){null!==s?vd(r,t,e,s,l):mf(r,t,e)}function AA(r,t){return r.parentNode(t)}function TN(r,t,e){return RN(r,t,e)}let yA,zu,RN=function wN(r,t,e){return 40&r.type?qa(r,e):null};function uC(r,t,e,s){const l=_A(r,s,t),m=t[11],I=TN(s.parent||t[6],s,t);if(null!=l)if(Array.isArray(e))for(let k=0;k<e.length;k++)JE(m,l,e[k],I,!1);else JE(m,l,e,I,!1)}function E_(r,t){if(null!==t){const e=t.type;if(3&e)return qa(t,r);if(4&e)return Jw(-1,r[t.index]);if(8&e){const s=t.child;if(null!==s)return E_(r,s);{const l=r[t.index];return Il(l)?Jw(-1,l):sa(l)}}if(32&e)return _d(t,r)()||sa(r[t.index]);{const s=ON(r,t);return null!==s?Array.isArray(s)?s[0]:E_(rh(r[16]),s):E_(r,t.next)}}return null}function ON(r,t){return null!==t?r[16][6].projection[t.projection]:null}function Jw(r,t){const e=10+r+1;if(e<t.length){const s=t[e],l=s[1].firstChild;if(null!==l)return E_(s,l)}return t[7]}function ih(r,t,e,s,l,m,E){for(;null!=e;){const I=s[e.index],k=e.type;if(E&&0===t&&(I&&zs(sa(I),s),e.flags|=2),32!=(32&e.flags))if(8&k)ih(r,t,e.child,s,l,m,!1),np(t,r,l,I,m);else if(32&k){const F=_d(e,s);let ee;for(;ee=F();)np(t,r,l,ee,m);np(t,r,l,I,m)}else 16&k?$E(r,t,s,e,l,m):np(t,r,l,I,m);e=E?e.projectionNext:e.next}}function XE(r,t,e,s,l,m){ih(e,s,r.firstChild,t,l,m,!1)}function $E(r,t,e,s,l,m){const E=e[16],k=E[6].projection[s.projection];if(Array.isArray(k))for(let F=0;F<k.length;F++)np(t,r,l,k[F],m);else ih(r,t,k,E[3],l,m,!0)}function Fm(r,t,e){""===e?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e)}function tb(r,t,e){const{mergedAttrs:s,classes:l,styles:m}=e;null!==s&&F0(r,t,s),null!==l&&Fm(r,t,l),null!==m&&function lC(r,t,e){r.setAttribute(t,"style",e)}(r,t,m)}function Ad(r){return function nb(){if(void 0===yA&&(yA=null,Go.trustedTypes))try{yA=Go.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return yA}()?.createHTML(r)||r}class yd{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qg})`}}class eR extends yd{getTypeName(){return"HTML"}}class tR extends yd{getTypeName(){return"Style"}}class gC extends yd{getTypeName(){return"Script"}}class nR extends yd{getTypeName(){return"URL"}}class _C extends yd{getTypeName(){return"ResourceURL"}}function Kc(r){return r instanceof yd?r.changingThisBreaksApplicationSecurity:r}function zc(r,t){const e=function _f(r){return r instanceof yd&&r.getTypeName()||null}(r);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${qg})`)}return e===t}class iR{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Ad(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class oR{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const s=this.inertDocument.createElement("body");e.appendChild(s)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Ad(t),e;const s=this.inertDocument.createElement("body");return s.innerHTML=Ad(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(s),s}stripCustomNsAttrs(t){const e=t.attributes;for(let l=e.length-1;0<l;l--){const E=e.item(l).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&t.removeAttribute(E)}let s=t.firstChild;for(;s;)s.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(s),s=s.nextSibling}}const sR=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function EA(r){return(r=String(r)).match(sR)?r:"unsafe:"+r}function oh(r){const t={};for(const e of r.split(","))t[e]=!0;return t}function ip(...r){const t={};for(const e of r)for(const s in e)e.hasOwnProperty(s)&&(t[s]=!0);return t}const vf=oh("area,br,col,hr,img,wbr"),bA=oh("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),SA=oh("rp,rt"),CA=ip(vf,ip(bA,oh("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ip(SA,oh("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ip(SA,bA)),ob=oh("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ml=ip(ob,oh("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),oh("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),aR=oh("script,style,template");class cR{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,s=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?s=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,s&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let l=this.checkClobberedElement(e,e.nextSibling);if(l){e=l;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!CA.hasOwnProperty(e))return this.sanitizedSomething=!0,!aR.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const s=t.attributes;for(let l=0;l<s.length;l++){const m=s.item(l),E=m.name,I=E.toLowerCase();if(!Ml.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let k=m.value;ob[I]&&(k=EA(k)),this.buf.push(" ",E,'="',CC(k),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();CA.hasOwnProperty(e)&&!vf.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(CC(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const SC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,PN=/([^\#-~ |!])/g;function CC(r){return r.replace(/&/g,"&amp;").replace(SC,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(PN,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let S_;function IC(r,t){let e=null;try{S_=S_||function AC(r){const t=new oR(r);return function yC(){try{return!!(new window.DOMParser).parseFromString(Ad(""),"text/html")}catch{return!1}}()?new iR(t):t}(r);let s=t?String(t):"";e=S_.getInertBodyElement(s);let l=5,m=s;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,s=m,m=e.innerHTML,e=S_.getInertBodyElement(s)}while(s!==m);return Ad((new cR).sanitizeChildren(Um(e)||e))}finally{if(e){const s=Um(e)||e;for(;s.firstChild;)s.removeChild(s.firstChild)}}}function Um(r){return"content"in r&&function TA(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var no=(()=>((no=no||{})[no.NONE=0]="NONE",no[no.HTML=1]="HTML",no[no.STYLE=2]="STYLE",no[no.SCRIPT=3]="SCRIPT",no[no.URL=4]="URL",no[no.RESOURCE_URL=5]="RESOURCE_URL",no))();const ab=new Fn("ENVIRONMENT_INITIALIZER"),cb=new Fn("INJECTOR",-1),ca=new Fn("INJECTOR_DEF_TYPES");class Ed{get(t,e=Wp){if(e===Wp){const s=new Error(`NullInjectorError: No provider for ${Lo(t)}!`);throw s.name="NullInjectorError",s}return e}}function bd(...r){return{\u0275providers:sh(0,r),\u0275fromNgModule:!0}}function sh(r,...t){const e=[],s=new Set;let l;return Jh(t,m=>{const E=m;Qm(E,e,[],s)&&(l||(l=[]),l.push(E))}),void 0!==l&&sp(l,e),e}function sp(r,t){for(let e=0;e<r.length;e++){const{providers:l}=r[e];wA(l,m=>{t.push(m)})}}function Qm(r,t,e,s){if(!(r=Wr(r)))return!1;let l=null,m=Jg(r);const E=!m&&eo(r);if(m||E){if(E&&!E.standalone)return!1;l=r}else{const k=r.ngModule;if(m=Jg(k),!m)return!1;l=k}const I=s.has(l);if(E){if(I)return!1;if(s.add(l),E.dependencies){const k="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const F of k)Qm(F,t,e,s)}}else{if(!m)return!1;{if(null!=m.imports&&!I){let F;s.add(l);try{Jh(m.imports,ee=>{Qm(ee,t,e,s)&&(F||(F=[]),F.push(ee))})}finally{}void 0!==F&&sp(F,t)}if(!I){const F=ia(l)||(()=>new l);t.push({provide:l,useFactory:F,deps:Zi},{provide:ca,useValue:l,multi:!0},{provide:ab,useValue:()=>Xt(l),multi:!0})}const k=m.providers;null==k||I||wA(k,ee=>{t.push(ee)})}}return l!==r&&void 0!==r.providers}function wA(r,t){for(let e of r)ea(e)&&(e=e.\u0275providers),Array.isArray(e)?wA(e,t):t(e)}const dR=Oo({provide:String,useValue:Oo});function RA(r){return null!==r&&"object"==typeof r&&dR in r}function ap(r){return"function"==typeof r}const w_=new Fn("Set Injector scope."),R_={},up={};let lb;function O_(){return void 0===lb&&(lb=new Ed),lb}class ah{}class lp extends ah{constructor(t,e,s,l){super(),this.parent=e,this.source=s,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,DA(t,E=>this.processProvider(E)),this.records.set(cb,ns(void 0,this)),l.has("environment")&&this.records.set(ah,ns(void 0,this));const m=this.records.get(w_);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(ca.multi,Zi,qr.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=zp(this),s=xu(void 0);try{return t()}finally{zp(e),xu(s)}}get(t,e=Wp,s=qr.Default){this.assertNotDestroyed(),s=od(s);const l=zp(this),m=xu(void 0);try{if(!(s&qr.SkipSelf)){let I=this.records.get(t);if(void 0===I){const k=function fb(r){return"function"==typeof r||"object"==typeof r&&r instanceof Fn}(t)&&sE(t);I=k&&this.injectableDefInScope(k)?ns(db(t),R_):null,this.records.set(t,I)}if(null!=I)return this.hydrate(t,I)}return(s&qr.Self?O_():this.parent).get(t,e=s&qr.Optional&&e===Wp?null:e)}catch(E){if("NullInjectorError"===E.name){if((E[Hv]=E[Hv]||[]).unshift(Lo(t)),l)throw E;return function n_(r,t,e,s){const l=r[Hv];throw t[qd]&&l.unshift(t[qd]),r.message=function Sl(r,t,e,s=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let l=Lo(t);if(Array.isArray(t))l=t.map(Lo).join(" -> ");else if("object"==typeof t){let m=[];for(let E in t)if(t.hasOwnProperty(E)){let I=t[E];m.push(E+":"+("string"==typeof I?JSON.stringify(I):Lo(I)))}l=`{${m.join(", ")}}`}return`${e}${s?"("+s+")":""}[${l}]: ${r.replace(aE,"\n  ")}`}("\n"+r.message,l,e,s),r.ngTokenPath=l,r[Hv]=null,r}(E,t,"R3InjectorError",this.source)}throw E}finally{xu(m),zp(l)}}resolveInjectorInitializers(){const t=zp(this),e=xu(void 0);try{const s=this.get(ab.multi,Zi,qr.Self);for(const l of s)l()}finally{zp(t),xu(e)}}toString(){const t=[],e=this.records;for(const s of e.keys())t.push(Lo(s));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _n(205,!1)}processProvider(t){let e=ap(t=Wr(t))?t:Wr(t&&t.provide);const s=function hb(r){return RA(r)?ns(void 0,r.useValue):ns(OA(r),R_)}(t);if(ap(t)||!0!==t.multi)this.records.get(e);else{let l=this.records.get(e);l||(l=ns(void 0,R_,!0),l.factory=()=>cE(l.multi),this.records.set(e,l)),e=t,l.multi.push(t)}this.records.set(e,s)}hydrate(t,e){return e.value===R_&&(e.value=up,e.value=e.factory()),"object"==typeof e.value&&e.value&&function wC(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Wr(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function db(r){const t=sE(r),e=null!==t?t.factory:ia(r);if(null!==e)return e;if(r instanceof Fn)throw new _n(204,!1);if(r instanceof Function)return function D_(r){const t=r.length;if(t>0)throw Xh(t,"?"),new _n(204,!1);const e=function bl(r){const t=r&&(r[Xg]||r[dr]);if(t){const e=function id(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(r);return null!==e?()=>e.factory(r):()=>new r}(r);throw new _n(204,!1)}function OA(r,t,e){let s;if(ap(r)){const l=Wr(r);return ia(l)||db(l)}if(RA(r))s=()=>Wr(r.useValue);else if(function Af(r){return!(!r||!r.useFactory)}(r))s=()=>r.useFactory(...cE(r.deps||[]));else if(function ub(r){return!(!r||!r.useExisting)}(r))s=()=>Xt(Wr(r.useExisting));else{const l=Wr(r&&(r.useClass||r.provide));if(!function pb(r){return!!r.deps}(r))return ia(l)||db(l);s=()=>new l(...cE(r.deps))}return s}function ns(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function DA(r,t){for(const e of r)Array.isArray(e)?DA(e,t):e&&ea(e)?DA(e.\u0275providers,t):t(e)}class RC{}class mb{}class DC{resolveComponentFactory(t){throw function ch(r){const t=Error(`No component factory found for ${Lo(r)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=r,t}(t)}}let k_=(()=>{class r{}return r.NULL=new DC,r})();function xN(){return yf(Wo(),yn())}function yf(r,t){return new Pi(qa(r,t))}let Pi=(()=>{class r{constructor(e){this.nativeElement=e}}return r.__NG_ELEMENT_ID__=xN,r})();function hR(r){return r instanceof Pi?r.nativeElement:r}class ua{}let Sd=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function kC(){const r=yn(),e=Ia(Wo().index,r);return(Fc(e)?e:r)[11]}(),r})(),pR=(()=>{class r{}return r.\u0275prov=Ar({token:r,providedIn:"root",factory:()=>null}),r})();class N_{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const _b=new N_("15.0.2"),qu={};function vb(r){return r.ngOriginalError}class Cd{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&vb(t);for(;e&&vb(e);)e=vb(e);return e||null}}function ka(r){return r.ownerDocument.defaultView}function AR(r,t,e){let s=r.length;for(;;){const l=r.indexOf(t,e);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const m=t.length;if(l+m===s||r.charCodeAt(l+m)<=32)return l}e=l+1}}const yR="ng-template";function FN(r,t,e){let s=0;for(;s<r.length;){let l=r[s++];if(e&&"class"===l){if(l=r[s],-1!==AR(l.toLowerCase(),t,0))return!0}else if(1===l){for(;s<r.length&&"string"==typeof(l=r[s++]);)if(l.toLowerCase()===t)return!0;return!1}}return!1}function ER(r){return 4===r.type&&r.value!==yR}function UN(r,t,e){return t===(4!==r.type||e?r.value:yR)}function VN(r,t,e){let s=4;const l=r.attrs||[],m=function QN(r){for(let t=0;t<r.length;t++)if(Dr(r[t]))return t;return r.length}(l);let E=!1;for(let I=0;I<t.length;I++){const k=t[I];if("number"!=typeof k){if(!E)if(4&s){if(s=2|1&s,""!==k&&!UN(r,k,e)||""===k&&1===t.length){if(Au(s))return!1;E=!0}}else{const F=8&s?k:t[++I];if(8&s&&null!==r.attrs){if(!FN(r.attrs,F,e)){if(Au(s))return!1;E=!0}continue}const me=jN(8&s?"class":k,l,ER(r),e);if(-1===me){if(Au(s))return!1;E=!0;continue}if(""!==F){let Le;Le=me>m?"":l[me+1].toLowerCase();const Ke=8&s?Le:null;if(Ke&&-1!==AR(Ke,F,0)||2&s&&F!==Le){if(Au(s))return!1;E=!0}}}}else{if(!E&&!Au(s)&&!Au(k))return!1;if(E&&Au(k))continue;E=!1,s=k|1&s}}return Au(s)||E}function Au(r){return 0==(1&r)}function jN(r,t,e,s){if(null===t)return-1;let l=0;if(s||!e){let m=!1;for(;l<t.length;){const E=t[l];if(E===r)return l;if(3===E||6===E)m=!0;else{if(1===E||2===E){let I=t[++l];for(;"string"==typeof I;)I=t[++l];continue}if(4===E)break;if(0===E){l+=4;continue}}l+=m?1:2}return-1}return function NC(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){const s=r[e];if("number"==typeof s)return-1;if(s===t)return e;e++}return-1}(t,r)}function Ef(r,t,e=!1){for(let s=0;s<t.length;s++)if(VN(r,t[s],e))return!0;return!1}function SR(r,t){e:for(let e=0;e<t.length;e++){const s=t[e];if(r.length===s.length){for(let l=0;l<r.length;l++)if(r[l]!==s[l])continue e;return!0}}return!1}function PC(r,t){return r?":not("+t.trim()+")":t}function MC(r){let t=r[0],e=1,s=2,l="",m=!1;for(;e<r.length;){let E=r[e];if("string"==typeof E)if(2&s){const I=r[++e];l+="["+E+(I.length>0?'="'+I+'"':"")+"]"}else 8&s?l+="."+E:4&s&&(l+=" "+E);else""!==l&&!Au(E)&&(t+=PC(m,l),l=""),s=E,m=m||!Au(s);e++}return""!==l&&(t+=PC(m,l)),t}const ti={};function Cn(r){LC(cr(),yn(),Uc()+r,!1)}function LC(r,t,e,s){if(!s)if(3==(3&t[2])){const m=r.preOrderCheckHooks;null!==m&&oA(t,m,e)}else{const m=r.preOrderHooks;null!==m&&Zp(t,m,0,e)}Im(e)}function Eb(r,t=null,e=null,s){const l=wR(r,t,e,s);return l.resolveInjectorInitializers(),l}function wR(r,t=null,e=null,s,l=new Set){const m=[e||Zi,bd(r)];return s=s||("object"==typeof r?void 0:Lo(r)),new lp(m,t||O_(),s||null,l)}let Ec=(()=>{class r{static create(e,s){if(Array.isArray(e))return Eb({name:""},s,e,"");{const l=e.name??"";return Eb({name:l},e.parent,e.providers,l)}}}return r.THROW_IF_NOT_FOUND=Wp,r.NULL=new Ed,r.\u0275prov=Ar({token:r,providedIn:"any",factory:()=>Xt(cb)}),r.__NG_ELEMENT_ID__=-1,r})();function gt(r,t=qr.Default){const e=yn();return null===e?Xt(r,t):Hu(Wo(),e,Wr(r),t)}function YC(){throw new Error("invalid")}function zm(r,t){const e=r.contentQueries;if(null!==e)for(let s=0;s<e.length;s+=2){const l=e[s],m=e[s+1];if(-1!==m){const E=r.data[m];mc(l),E.contentQueries(2,t[m],m)}}}function Ym(r,t,e,s,l,m,E,I,k,F,ee){const me=t.blueprint.slice();return me[0]=l,me[2]=76|s,(null!==ee||r&&1024&r[2])&&(me[2]|=1024),Xv(me),me[3]=me[15]=r,me[8]=e,me[10]=E||r&&r[10],me[11]=I||r&&r[11],me[12]=k||r&&r[12]||null,me[9]=F||r&&r[9]||null,me[6]=m,me[20]=function Bw(){return iC++}(),me[21]=ee,me[16]=2==t.type?r[16]:me,me}function bf(r,t,e,s,l){let m=r.data[t];if(null===m)m=function MA(r,t,e,s,l){const m=Zv(),E=ym(),k=r.data[t]=function wb(r,t,e,s,l,m){return{type:e,index:s,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?m:m&&m.parent,e,t,s,l);return null===r.firstChild&&(r.firstChild=k),null!==m&&(E?null==m.child&&null!==k.parent&&(m.child=k):null===m.next&&(m.next=k)),k}(r,t,e,s,l),function bm(){return ci.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=e,m.value=s,m.attrs=l;const E=function Am(){const r=ci.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();m.injectorIndex=null===E?-1:E.injectorIndex}return ud(m,!0),m}function qm(r,t,e,s){if(0===e)return-1;const l=t.length;for(let m=0;m<e;m++)t.push(s),r.blueprint.push(s),r.data.push(null);return l}function B_(r,t,e){gc(t);try{const s=r.viewQuery;null!==s&&Zn(1,s,e);const l=r.template;null!==l&&$u(r,t,l,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&zm(r,t),r.staticViewQueries&&Zn(2,r.viewQuery,e);const m=r.components;null!==m&&function Ib(r,t){for(let e=0;e<t.length;e++)oI(r,t[e])}(t,m)}catch(s){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),s}finally{t[2]&=-5,Ni()}}function uh(r,t,e,s){const l=t[2];if(128!=(128&l)){gc(t);try{Xv(t),function Em(r){return ci.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==e&&$u(r,t,e,2,s);const E=3==(3&l);if(E){const F=r.preOrderCheckHooks;null!==F&&oA(t,F,null)}else{const F=r.preOrderHooks;null!==F&&Zp(t,F,0,null),Ja(t,0)}if(function XN(r){for(let t=zE(r);null!==t;t=v_(t)){if(!t[2])continue;const e=t[9];for(let s=0;s<e.length;s++){const l=e[s],m=l[3];0==(512&l[2])&&vE(m,1),l[2]|=512}}}(t),function jR(r){for(let t=zE(r);null!==t;t=v_(t))for(let e=10;e<t.length;e++){const s=t[e],l=s[1];Wh(s)&&uh(l,s,l.template,s[8])}}(t),null!==r.contentQueries&&zm(r,t),E){const F=r.contentCheckHooks;null!==F&&oA(t,F)}else{const F=r.contentHooks;null!==F&&Zp(t,F,1),Ja(t,1)}!function L_(r,t){const e=r.hostBindingOpCodes;if(null!==e)try{for(let s=0;s<e.length;s++){const l=e[s];if(l<0)Im(~l);else{const m=l,E=e[++s],I=e[++s];ds(E,m),I(2,t[m])}}}finally{Im(-1)}}(r,t);const I=r.components;null!==I&&function PA(r,t){for(let e=0;e<t.length;e++)j_(r,t[e])}(t,I);const k=r.viewQuery;if(null!==k&&Zn(2,k,s),E){const F=r.viewCheckHooks;null!==F&&oA(t,F)}else{const F=r.viewHooks;null!==F&&Zp(t,F,2),Ja(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,vE(t[3],-1))}finally{Ni()}}}function $u(r,t,e,s,l){const m=Uc(),E=2&s;try{Im(-1),E&&t.length>22&&LC(r,t,22,!1),e(s,l)}finally{Im(m)}}function Tb(r,t,e){if(dE(t)){const l=t.directiveEnd;for(let m=t.directiveStart;m<l;m++){const E=r.data[m];E.contentQueries&&E.contentQueries(1,e[m],m)}}}function qC(r,t,e){!vs()||(function xA(r,t,e,s){const l=e.directiveStart,m=e.directiveEnd;r.firstCreatePass||ju(e,t),zs(s,t);const E=e.initialInputs;for(let I=l;I<m;I++){const k=r.data[I],F=mu(k);F&&rI(t,e,k);const ee=nf(t,r,I,e);zs(ee,t),null!==E&&iI(0,I-l,ee,k,0,E),F&&(Ia(e.index,t)[8]=ee)}}(r,t,e,qa(e,t)),64==(64&e.flags)&&U_(r,t,e))}function Sf(r,t,e=qa){const s=t.localNames;if(null!==s){let l=t.index+1;for(let m=0;m<s.length;m+=2){const E=s[m+1],I=-1===E?e(t,r):r[E];r[l++]=I}}}function Jm(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=JC(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function JC(r,t,e,s,l,m,E,I,k,F){const ee=22+s,me=ee+l,Le=function XC(r,t){const e=[];for(let s=0;s<t;s++)e.push(s<r?null:ti);return e}(ee,me),Ke="function"==typeof F?F():F;return Le[1]={type:r,blueprint:Le,template:e,queries:null,viewQuery:I,declTNode:t,data:Le.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:k,consts:Ke,incompleteFirstPass:!1}}function MR(r,t,e,s){const l=Pa(t);null===e?l.push(s):(l.push(e),r.firstCreatePass&&Qr(r).push(s,l.length-1))}function Rb(r,t,e,s){for(let l in r)if(r.hasOwnProperty(l)){e=null===e?{}:e;const m=r[l];null===s?xR(e,t,l,m):s.hasOwnProperty(l)&&xR(e,t,s[l],m)}return e}function xR(r,t,e,s){r.hasOwnProperty(e)?r[e].push(t,s):r[e]=[t,s]}function Xc(r,t,e,s,l,m,E,I){const k=qa(t,e);let ee,F=t.inputs;!I&&null!=F&&(ee=F[s])?(BA(r,e,ee,s,l),hE(t)&&F_(e,t.index)):3&t.type&&(s=function ZC(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(s),l=null!=E?E(l,t.value||"",s):l,m.setProperty(k,s,l))}function F_(r,t){const e=Ia(t,r);16&e[2]||(e[2]|=32)}function hp(r,t,e,s){let l=!1;if(vs()){const m=null===s?null:{"":-1},E=function qN(r,t){const e=r.directiveRegistry;let s=null,l=null;if(e)for(let m=0;m<e.length;m++){const E=e[m];if(Ef(t,E.selectors,!1))if(s||(s=[]),mu(E))if(null!==E.findHostDirectiveDefs){const I=[];l=l||new Map,E.findHostDirectiveDefs(E,I,l),s.unshift(...I,E),Db(r,t,I.length)}else s.unshift(E),Db(r,t,0);else l=l||new Map,E.findHostDirectiveDefs?.(E,s,l),s.push(E)}return null===s?null:[s,l]}(r,e);let I,k;null===E?I=k=null:[I,k]=E,null!==I&&(l=!0,Ob(r,t,e,I,m,k)),m&&function JN(r,t,e){if(t){const s=r.localNames=[];for(let l=0;l<t.length;l+=2){const m=e[t[l+1]];if(null==m)throw new _n(-301,!1);s.push(t[l],m)}}}(e,s,m)}return e.mergedAttrs=pd(e.mergedAttrs,e.attrs),l}function Ob(r,t,e,s,l,m){for(let F=0;F<s.length;F++)aA(ju(e,t),r,s[F].type);!function tI(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}(e,r.data.length,s.length);for(let F=0;F<s.length;F++){const ee=s[F];ee.providersResolver&&ee.providersResolver(ee)}let E=!1,I=!1,k=qm(r,t,s.length,null);for(let F=0;F<s.length;F++){const ee=s[F];e.mergedAttrs=pd(e.mergedAttrs,ee.hostAttrs),nI(r,e,t,k,ee),VR(k,ee,l),null!==ee.contentQueries&&(e.flags|=4),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(e.flags|=64);const me=ee.type.prototype;!E&&(me.ngOnChanges||me.ngOnInit||me.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e.index),E=!0),!I&&(me.ngOnChanges||me.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e.index),I=!0),k++}!function LR(r,t,e){const l=t.directiveEnd,m=r.data,E=t.attrs,I=[];let k=null,F=null;for(let ee=t.directiveStart;ee<l;ee++){const me=m[ee],Le=e?e.get(me):null,rt=Le?Le.outputs:null;k=Rb(me.inputs,ee,k,Le?Le.inputs:null),F=Rb(me.outputs,ee,F,rt);const Ct=null===k||null===E||ER(t)?null:Cf(k,ee,E);I.push(Ct)}null!==k&&(k.hasOwnProperty("class")&&(t.flags|=8),k.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=I,t.inputs=k,t.outputs=F}(r,e,m)}function U_(r,t,e){const s=e.directiveStart,l=e.directiveEnd,m=e.index,E=function N0(){return ci.lFrame.currentDirectiveIndex}();try{Im(m);for(let I=s;I<l;I++){const k=r.data[I],F=t[I];Jp(I),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&UR(k,F)}}finally{Im(-1),Jp(E)}}function UR(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function Db(r,t,e){t.componentOffset=e,(r.components||(r.components=[])).push(t.index)}function VR(r,t,e){if(e){if(t.exportAs)for(let s=0;s<t.exportAs.length;s++)e[t.exportAs[s]]=r;mu(t)&&(e[""]=r)}}function nI(r,t,e,s,l){r.data[s]=l;const m=l.factory||(l.factory=ia(l.type)),E=new No(m,mu(l),gt);r.blueprint[s]=E,e[s]=E,function eI(r,t,e,s,l){const m=l.hostBindings;if(m){let E=r.hostBindingOpCodes;null===E&&(E=r.hostBindingOpCodes=[]);const I=~t.index;(function FR(r){let t=r.length;for(;t>0;){const e=r[--t];if("number"==typeof e&&e<0)return e}return 0})(E)!=I&&E.push(I),E.push(e,s,m)}}(r,t,s,qm(r,e,l.hostVars,ti),l)}function rI(r,t,e){const s=qa(t,r),l=Jm(e),m=r[10],E=Sr(r,Ym(r,l,null,e.onPush?32:16,s,t,m,m.createRenderer(s,e),null,null,null));r[t.index]=E}function Bl(r,t,e,s,l,m){const E=qa(r,t);!function V_(r,t,e,s,l,m,E){if(null==m)r.removeAttribute(t,l,e);else{const I=null==E?si(m):E(m,s||"",l);r.setAttribute(t,l,I,e)}}(t[11],E,m,r.value,e,s,l)}function iI(r,t,e,s,l,m){const E=m[t];if(null!==E){const I=s.setInput;for(let k=0;k<E.length;){const F=E[k++],ee=E[k++],me=E[k++];null!==I?s.setInput(e,me,F,ee):e[ee]=me}}}function Cf(r,t,e){let s=null,l=0;for(;l<e.length;){const m=e[l];if(0!==m)if(5!==m){if("number"==typeof m)break;if(r.hasOwnProperty(m)){null===s&&(s=[]);const E=r[m];for(let I=0;I<E.length;I+=2)if(E[I]===t){s.push(m,E[I+1],e[l+1]);break}}l+=2}else l+=2;else l+=4}return s}function kb(r,t,e,s){return[r,!0,!1,t,null,0,s,e,null,null]}function j_(r,t){const e=Ia(t,r);if(Wh(e)){const s=e[1];48&e[2]?uh(s,e,s.template,e[8]):e[5]>0&&LA(e)}}function LA(r){for(let s=zE(r);null!==s;s=v_(s))for(let l=10;l<s.length;l++){const m=s[l];if(Wh(m))if(512&m[2]){const E=m[1];uh(E,m,E.template,m[8])}else m[5]>0&&LA(m)}const e=r[1].components;if(null!==e)for(let s=0;s<e.length;s++){const l=Ia(e[s],r);Wh(l)&&l[5]>0&&LA(l)}}function oI(r,t){const e=Ia(t,r),s=e[1];(function As(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])})(s,e),B_(s,e,e[8])}function Sr(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function Na(r){for(;r;){r[2]|=32;const t=rh(r);if(S0(r)&&!t)return r;r=t}return null}function If(r,t,e,s=!0){const l=t[10];l.begin&&l.begin();try{uh(r,t,r.template,e)}catch(E){throw s&&yu(t,E),E}finally{l.end&&l.end()}}function Zn(r,t,e){mc(0),t(r,e)}function Pa(r){return r[7]||(r[7]=[])}function Qr(r){return r.cleanup||(r.cleanup=[])}function sI(r,t,e){return(null===r||mu(r))&&(e=function Ew(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(e[t.index])),e[11]}function yu(r,t){const e=r[9],s=e?e.get(Cd,null):null;s&&s.handleError(t)}function BA(r,t,e,s,l){for(let m=0;m<e.length;){const E=e[m++],I=e[m++],k=t[E],F=r.data[E];null!==F.setInput?F.setInput(k,l,s,I):k[I]=l}}function FA(r,t,e){let s=e?r.styles:null,l=e?r.classes:null,m=0;if(null!==t)for(let E=0;E<t.length;E++){const I=t[E];"number"==typeof I?m=I:1==m?l=Vh(l,I):2==m&&(s=Vh(s,I+": "+t[++E]+";"))}e?r.styles=s:r.stylesWithoutHost=s,e?r.classes=l:r.classesWithoutHost=l}function UA(r,t,e,s,l=!1){for(;null!==e;){const m=t[e.index];if(null!==m&&s.push(sa(m)),Il(m))for(let I=10;I<m.length;I++){const k=m[I],F=k[1].firstChild;null!==F&&UA(k[1],k,F,s)}const E=e.type;if(8&E)UA(r,t,e.child,s);else if(32&E){const I=_d(e,t);let k;for(;k=I();)s.push(k)}else if(16&E){const I=ON(t,e);if(Array.isArray(I))s.push(...I);else{const k=rh(t[16]);UA(k[1],k,I,s,!0)}}e=l?e.projectionNext:e.next}return s}class $m{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return UA(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Il(t)){const e=t[8],s=e?e.indexOf(this):-1;s>-1&&(Pl(t,s),Rl(e,s))}this._attachedToViewContainer=!1}Bm(this._lView[1],this._lView)}onDestroy(t){MR(this._lView[1],this._lView,null,t)}markForCheck(){Na(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){If(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _n(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ff(r,t){XE(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new _n(902,!1);this._appRef=t}}class bc extends $m{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;If(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class pp extends k_{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=eo(t);return new VA(e,this.ngModule)}}function QR(r){const t=[];for(let e in r)r.hasOwnProperty(e)&&t.push({propName:r[e],templateName:e});return t}class aI{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,s){s=od(s);const l=this.injector.get(t,qu,s);return l!==qu||e===qu?l:this.parentInjector.get(t,e,s)}}class VA extends mb{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function xC(r){return r.map(MC).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return QR(this.componentDef.inputs)}get outputs(){return QR(this.componentDef.outputs)}create(t,e,s,l){let m=(l=l||this.ngModule)instanceof ah?l:l?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const E=m?new aI(t,m):t,I=E.get(ua,null);if(null===I)throw new _n(407,!1);const k=E.get(pR,null),F=I.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",me=s?function $C(r,t,e){return r.selectRootElement(t,e===fu.ShadowDom)}(F,s,this.componentDef.encapsulation):kl(F,ee,function $N(r){const t=r.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(ee)),Le=this.componentDef.onPush?288:272,Ke=JC(0,null,null,1,0,null,null,null,null,null),rt=Ym(null,Ke,null,Le,null,null,I,F,k,E,null);let Ct,Jt;gc(rt);try{const tn=this.componentDef;let Vn,nn=null;tn.findHostDirectiveDefs?(Vn=[],nn=new Map,tn.findHostDirectiveDefs(tn,Vn,nn),Vn.push(tn)):Vn=[tn];const n=function eg(r,t){const e=r[1];return r[22]=t,bf(e,22,2,"#host",null)}(rt,me),i=function HR(r,t,e,s,l,m,E,I){const k=l[1];!function Nb(r,t,e,s){for(const l of r)t.mergedAttrs=pd(t.mergedAttrs,l.hostAttrs);null!==t.mergedAttrs&&(FA(t,t.mergedAttrs,!0),null!==e&&tb(s,e,t))}(s,r,t,E);const F=m.createRenderer(t,e),ee=Ym(l,Jm(e),null,e.onPush?32:16,l[r.index],r,m,F,I||null,null,null);return k.firstCreatePass&&Db(k,r,s.length-1),Sr(l,ee),l[r.index]=ee}(n,me,tn,Vn,rt,I,F);Jt=Sw(Ke,22),me&&function eP(r,t,e,s){if(s)F0(r,e,["ng-version",_b.full]);else{const{attrs:l,classes:m}=function Ab(r){const t=[],e=[];let s=1,l=2;for(;s<r.length;){let m=r[s];if("string"==typeof m)2===l?""!==m&&t.push(m,r[++s]):8===l&&e.push(m);else{if(!Au(l))break;l=m}s++}return{attrs:t,classes:e}}(t.selectors[0]);l&&F0(r,e,l),m&&m.length>0&&Fm(r,e,m.join(" "))}}(F,tn,me,s),void 0!==e&&function tP(r,t,e){const s=r.projection=[];for(let l=0;l<t.length;l++){const m=e[l];s.push(null!=m?Array.from(m):null)}}(Jt,this.ngContentSelectors,e),Ct=function ZN(r,t,e,s,l,m){const E=Wo(),I=l[1],k=qa(E,l);Ob(I,l,E,e,null,s);for(let ee=0;ee<e.length;ee++)zs(nf(l,I,E.directiveStart+ee,E),l);U_(I,l,E),k&&zs(k,l);const F=nf(l,I,E.directiveStart+E.componentOffset,E);if(r[8]=l[8]=F,null!==m)for(const ee of m)ee(F,t);return Tb(I,E,r),F}(i,tn,Vn,nn,rt,[GR]),B_(Ke,rt,null)}finally{Ni()}return new Zm(this.componentType,Ct,yf(Jt,rt),rt,Jt)}}class Zm extends RC{constructor(t,e,s,l,m){super(),this.location=s,this._rootLView=l,this._tNode=m,this.instance=e,this.hostView=this.changeDetectorRef=new bc(l),this.componentType=t}setInput(t,e){const s=this._tNode.inputs;let l;if(null!==s&&(l=s[t])){const m=this._rootLView;BA(m[1],m,l,t,e),F_(m,this._tNode.index)}}get injector(){return new ur(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function GR(){const r=Wo();ko(yn()[1],r)}function Br(r){let t=function cI(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),e=!0;const s=[r];for(;t;){let l;if(mu(r))l=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new _n(903,!1);l=t.\u0275dir}if(l){if(e){s.push(l);const E=r;E.inputs=Pb(r.inputs),E.declaredInputs=Pb(r.declaredInputs),E.outputs=Pb(r.outputs);const I=l.hostBindings;I&&tg(r,I);const k=l.viewQuery,F=l.contentQueries;if(k&&Td(r,k),F&&Q_(r,F),mn(r.inputs,l.inputs),mn(r.declaredInputs,l.declaredInputs),mn(r.outputs,l.outputs),mu(l)&&l.data.animation){const ee=r.data;ee.animation=(ee.animation||[]).concat(l.data.animation)}}const m=l.features;if(m)for(let E=0;E<m.length;E++){const I=m[E];I&&I.ngInherit&&I(r),I===Br&&(e=!1)}}t=Object.getPrototypeOf(t)}!function uI(r){let t=0,e=null;for(let s=r.length-1;s>=0;s--){const l=r[s];l.hostVars=t+=l.hostVars,l.hostAttrs=pd(l.hostAttrs,e=pd(e,l.hostAttrs))}}(s)}function Pb(r){return r===Lu?{}:r===Zi?[]:r}function Td(r,t){const e=r.viewQuery;r.viewQuery=e?(s,l)=>{t(s,l),e(s,l)}:t}function Q_(r,t){const e=r.contentQueries;r.contentQueries=e?(s,l,m)=>{t(s,l,m),e(s,l,m)}:t}function tg(r,t){const e=r.hostBindings;r.hostBindings=e?(s,l)=>{t(s,l),e(s,l)}:t}let xb=null;function wf(){if(!xb){const r=Go.Symbol;if(r&&r.iterator)xb=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const s=t[e];"entries"!==s&&"size"!==s&&Map.prototype[s]===Map.prototype.entries&&(xb=s)}}}return xb}function rg(r){return!!HA(r)&&(Array.isArray(r)||!(r instanceof Map)&&wf()in r)}function HA(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Za(r,t,e){return!Object.is(r[t],e)&&(r[t]=e,!0)}function ro(r,t,e,s){const l=yn();return Za(l,qp(),t)&&(cr(),Bl(Uo(),l,r,t,e,s)),ro}function ig(r,t,e,s){return Za(r,qp(),e)?t+si(e)+s:ti}function pr(r,t,e,s,l,m,E,I){const k=yn(),F=cr(),ee=r+22,me=F.firstCreatePass?function AI(r,t,e,s,l,m,E,I,k){const F=t.consts,ee=bf(t,r,4,E||null,Kh(F,I));hp(t,e,ee,Kh(F,k)),ko(t,ee);const me=ee.tViews=JC(2,ee,s,l,m,t.directiveRegistry,t.pipeRegistry,null,t.schemas,F);return null!==t.queries&&(t.queries.template(t,ee),me.queries=t.queries.embeddedTView(ee)),ee}(ee,F,k,t,e,s,l,m,E):F.data[ee];ud(me,!1);const Le=k[11].createComment("");uC(F,k,Le,me),zs(Le,k),Sr(k,k[ee]=kb(Le,k,Le,me)),eh(me)&&qC(F,k,me),null!=E&&Sf(k,me,I)}function lh(r){return _m(function ld(){return ci.lFrame.contextLView}(),22+r)}function Nn(r,t,e){const s=yn();return Za(s,qp(),t)&&Xc(cr(),Uo(),s,r,t,s[11],e,!1),Nn}function Lb(r,t,e,s,l){const E=l?"class":"style";BA(r,e,t.inputs[E],E,s)}function Tn(r,t,e,s){const l=yn(),m=cr(),E=22+r,I=l[11],k=l[E]=kl(I,t,function wl(){return ci.lFrame.currentNamespace}()),F=m.firstCreatePass?function qR(r,t,e,s,l,m,E){const I=t.consts,F=bf(t,r,2,l,Kh(I,m));return hp(t,e,F,Kh(I,E)),null!==F.attrs&&FA(F,F.attrs,!1),null!==F.mergedAttrs&&FA(F,F.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,F),F}(E,m,l,0,t,e,s):m.data[E];return ud(F,!0),tb(I,k,F),32!=(32&F.flags)&&uC(m,l,k,F),0===function aa(){return ci.lFrame.elementDepthCount}()&&zs(k,l),function $v(){ci.lFrame.elementDepthCount++}(),eh(F)&&(qC(m,l,F),Tb(m,F,l)),null!==s&&Sf(l,F),Tn}function Ln(){let r=Wo();ym()?eA():(r=r.parent,ud(r,!1));const t=r;!function D0(){ci.lFrame.elementDepthCount--}();const e=cr();return e.firstCreatePass&&(ko(e,r),dE(r)&&e.queries.elementEnd(r)),null!=t.classesWithoutHost&&function AE(r){return 0!=(8&r.flags)}(t)&&Lb(e,t,yn(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Iw(r){return 0!=(16&r.flags)}(t)&&Lb(e,t,yn(),t.stylesWithoutHost,!1),Ln}function so(r,t,e,s){return Tn(r,t,e,s),Ln(),so}function dh(r,t,e){const s=yn(),l=cr(),m=r+22,E=l.firstCreatePass?function JR(r,t,e,s,l){const m=t.consts,E=Kh(m,s),I=bf(t,r,8,"ng-container",E);return null!==E&&FA(I,E,!0),hp(t,e,I,Kh(m,l)),null!==t.queries&&t.queries.elementStart(t,I),I}(m,l,s,t,e):l.data[m];ud(E,!0);const I=s[m]=s[11].createComment("");return uC(l,s,I,E),zs(I,s),eh(E)&&(qC(l,s,E),Tb(l,E,s)),null!=e&&Sf(s,E),dh}function el(){let r=Wo();const t=cr();return ym()?eA():(r=r.parent,ud(r,!1)),t.firstCreatePass&&(ko(t,r),dE(r)&&t.queries.elementEnd(r)),el}function K_(r,t,e){return dh(r,t,e),el(),K_}function tl(){return yn()}function on(r){return!!r&&"function"==typeof r.then}const yI=function XR(r){return!!r&&"function"==typeof r.subscribe};function ao(r,t,e,s){const l=yn(),m=cr(),E=Wo();return Eu(m,l,l[11],E,r,t,s),ao}function YA(r,t){const e=Wo(),s=yn(),l=cr();return Eu(l,s,sI(Xp(l.data),e,s),e,r,t),YA}function Eu(r,t,e,s,l,m,E){const I=eh(s),F=r.firstCreatePass&&Qr(r),ee=t[8],me=Pa(t);let Le=!0;if(3&s.type||E){const Ct=qa(s,t),Jt=E?E(Ct):Ct,tn=me.length,Vn=E?n=>E(sa(n[s.index])):s.index;let nn=null;if(!E&&I&&(nn=function $R(r,t,e,s){const l=r.cleanup;if(null!=l)for(let m=0;m<l.length-1;m+=2){const E=l[m];if(E===e&&l[m+1]===s){const I=t[7],k=l[m+2];return I.length>k?I[k]:null}"string"==typeof E&&(m+=2)}return null}(r,t,l,s.index)),null!==nn)(nn.__ngLastListenerFn__||nn).__ngNextListenerFn__=m,nn.__ngLastListenerFn__=m,Le=!1;else{m=Df(s,t,ee,m,!1);const n=e.listen(Jt,l,m);me.push(m,n),F&&F.push(l,Vn,tn,tn+1)}}else m=Df(s,t,ee,m,!1);const Ke=s.outputs;let rt;if(Le&&null!==Ke&&(rt=Ke[l])){const Ct=rt.length;if(Ct)for(let Jt=0;Jt<Ct;Jt+=2){const i=t[rt[Jt]][rt[Jt+1]].subscribe(m),o=me.length;me.push(m,i),F&&F.push(l,s.index,o,-(o+1))}}}function ZR(r,t,e,s){try{return!1!==e(s)}catch(l){return yu(r,l),!1}}function Df(r,t,e,s,l){return function m(E){if(E===Function)return s;Na(r.componentOffset>-1?Ia(r.index,t):t);let k=ZR(t,0,s,E),F=m.__ngNextListenerFn__;for(;F;)k=ZR(t,0,F,E)&&k,F=F.__ngNextListenerFn__;return l&&!1===k&&(E.preventDefault(),E.returnValue=!1),k}}function li(r=1){return function Cm(r){return(ci.lFrame.contextLView=function rA(r,t){for(;r>0;)t=t[15],r--;return t}(r,ci.lFrame.contextLView))[8]}(r)}function di(r,t){let e=null;const s=function bR(r){const t=r.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(r);for(let l=0;l<t.length;l++){const m=t[l];if("*"!==m){if(null===s?Ef(r,m,!0):SR(s,m))return l}else e=l}return e}function Ys(r){const t=yn()[16][6];if(!t.projection){const s=t.projection=Xh(r?r.length:1,null),l=s.slice();let m=t.child;for(;null!==m;){const E=r?di(m,r):0;null!==E&&(l[E]?l[E].projectionNext=m:s[E]=m,l[E]=m),m=m.next}}}function Co(r,t=0,e){const s=yn(),l=cr(),m=bf(l,22+r,16,null,e||null);null===m.projection&&(m.projection=t),eA(),32!=(32&m.flags)&&function $w(r,t,e){$E(t[11],0,t,e,_A(r,e,t),TN(e.parent||t[6],e,t))}(l,s,m)}function JA(r,t){return r<<17|t<<2}function Rd(r){return r>>17&32767}function Y_(r){return 2|r}function Fl(r){return(131068&r)>>2}function ec(r,t){return-131069&r|t<<2}function kf(r){return 1|r}function Vb(r,t,e,s,l){const m=r[e+1],E=null===t;let I=s?Rd(m):Fl(m),k=!1;for(;0!==I&&(!1===k||E);){const ee=r[I+1];tO(r[I],t)&&(k=!0,r[I+1]=s?kf(ee):Y_(ee)),I=s?Rd(ee):Fl(ee)}k&&(r[e+1]=s?Y_(m):kf(m))}function tO(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&lr(r,t)>=0}const Yo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function TI(r){return r.substring(Yo.key,Yo.keyEnd)}function jb(r,t){const e=Yo.textEnd;return e===t?-1:(t=Yo.keyEnd=function Ma(r,t,e){for(;t<e&&r.charCodeAt(t)>32;)t++;return t}(r,Yo.key=t,e),J_(r,t,e))}function J_(r,t,e){for(;t<e&&r.charCodeAt(t)<=32;)t++;return t}function ys(r,t,e){return Sc(r,t,e,!1),ys}function Fr(r,t){return Sc(r,t,null,!0),Fr}function Ul(r,t){for(let e=function rO(r){return function q_(r){Yo.key=0,Yo.keyEnd=0,Yo.value=0,Yo.valueEnd=0,Yo.textEnd=r.length}(r),jb(r,J_(r,0,Yo.textEnd))}(t);e>=0;e=jb(t,e))Nr(r,TI(t),!0)}function Sc(r,t,e,s){const l=yn(),m=cr(),E=Fo(2);m.firstUpdatePass&&wI(m,r,E,s),t!==ti&&Za(l,E,t)&&cO(m,m.data[Uc()],l,l[11],r,l[E+1]=function kI(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=Lo(Kc(r)))),r}(t,e),s,E)}function sO(r,t){return t>=r.expandoStartIndex}function wI(r,t,e,s){const l=r.data;if(null===l[e+1]){const m=l[Uc()],E=sO(r,e);NI(m,s)&&null===t&&!E&&(t=!1),t=function aO(r,t,e,s){const l=Xp(r);let m=s?t.residualClasses:t.residualStyles;if(null===l)0===(s?t.classBindings:t.styleBindings)&&(e=mh(e=Hb(null,r,t,e,s),t.attrs,s),m=null);else{const E=t.directiveStylingLast;if(-1===E||r[E]!==l)if(e=Hb(l,r,t,e,s),null===m){let k=function Qb(r,t,e){const s=e?t.classBindings:t.styleBindings;if(0!==Fl(s))return r[Rd(s)]}(r,t,s);void 0!==k&&Array.isArray(k)&&(k=Hb(null,r,t,k[1],s),k=mh(k,t.attrs,s),function XA(r,t,e,s){r[Rd(e?t.classBindings:t.styleBindings)]=s}(r,t,s,k))}else m=function RI(r,t,e){let s;const l=t.directiveEnd;for(let m=1+t.directiveStylingLast;m<l;m++)s=mh(s,r[m].hostAttrs,e);return mh(s,t.attrs,e)}(r,t,s)}return void 0!==m&&(s?t.residualClasses=m:t.residualStyles=m),e}(l,m,t,s),function II(r,t,e,s,l,m){let E=m?t.classBindings:t.styleBindings,I=Rd(E),k=Fl(E);r[s]=e;let ee,F=!1;if(Array.isArray(e)){const me=e;ee=me[1],(null===ee||lr(me,ee)>0)&&(F=!0)}else ee=e;if(l)if(0!==k){const Le=Rd(r[I+1]);r[s+1]=JA(Le,I),0!==Le&&(r[Le+1]=ec(r[Le+1],s)),r[I+1]=function Ub(r,t){return 131071&r|t<<17}(r[I+1],s)}else r[s+1]=JA(I,0),0!==I&&(r[I+1]=ec(r[I+1],s)),I=s;else r[s+1]=JA(k,0),0===I?I=s:r[k+1]=ec(r[k+1],s),k=s;F&&(r[s+1]=Y_(r[s+1])),Vb(r,ee,s,!0),Vb(r,ee,s,!1),function eO(r,t,e,s,l){const m=l?r.residualClasses:r.residualStyles;null!=m&&"string"==typeof t&&lr(m,t)>=0&&(e[s+1]=kf(e[s+1]))}(t,ee,r,s,m),E=JA(I,k),m?t.classBindings=E:t.styleBindings=E}(l,m,t,e,E,s)}}function Hb(r,t,e,s,l){let m=null;const E=e.directiveEnd;let I=e.directiveStylingLast;for(-1===I?I=e.directiveStart:I++;I<E&&(m=t[I],s=mh(s,m.hostAttrs,l),m!==r);)I++;return null!==r&&(e.directiveStylingLast=I),s}function mh(r,t,e){const s=e?1:2;let l=-1;if(null!==t)for(let m=0;m<t.length;m++){const E=t[m];"number"==typeof E?l=E:l===s&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Nr(r,E,!!e||t[++m]))}return void 0===r?null:r}function cO(r,t,e,s,l,m,E,I){if(!(3&t.type))return;const k=r.data,F=k[I+1],ee=function nl(r){return 1==(1&r)}(F)?uO(k,t,e,l,Fl(F),E):void 0;Gb(ee)||(Gb(m)||function CI(r){return 2==(2&r)}(F)&&(m=uO(k,null,e,l,I,E)),function eb(r,t,e,s,l){if(t)l?r.addClass(e,s):r.removeClass(e,s);else{let m=-1===s.indexOf("-")?void 0:jc.DashCase;null==l?r.removeStyle(e,s,m):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),m|=jc.Important),r.setStyle(e,s,l,m))}}(s,E,Jv(Uc(),e),l,m))}function uO(r,t,e,s,l,m){const E=null===t;let I;for(;l>0;){const k=r[l],F=Array.isArray(k),ee=F?k[1]:k,me=null===ee;let Le=e[l+1];Le===ti&&(Le=me?Zi:void 0);let Ke=me?Pm(Le,s):ee===s?Le:void 0;if(F&&!Gb(Ke)&&(Ke=Pm(k,s)),Gb(Ke)&&(I=Ke,E))return I;const rt=r[l+1];l=E?Rd(rt):Fl(rt)}if(null!==t){let k=m?t.residualClasses:t.residualStyles;null!=k&&(I=Pm(k,s))}return I}function Gb(r){return void 0!==r}function NI(r,t){return 0!=(r.flags&(t?8:16))}function Ur(r,t=""){const e=yn(),s=cr(),l=r+22,m=s.firstCreatePass?bf(s,l,1,t,null):s.data[l],E=e[l]=function rp(r,t){return r.createText(t)}(e[11],t);uC(s,e,E,m),ud(m,!1)}function Od(r){return gh("",r,""),Od}function gh(r,t,e){const s=yn(),l=ig(s,r,t,e);return l!==ti&&function $c(r,t,e){const s=Jv(t,r);!function gA(r,t,e){r.setValue(t,e)}(r[11],s,e)}(s,Uc(),l),gh}function xI(r,t,e){!function qs(r,t,e,s){const l=cr(),m=Fo(2);l.firstUpdatePass&&wI(l,null,m,s);const E=yn();if(e!==ti&&Za(E,m,e)){const I=l.data[Uc()];if(NI(I,s)&&!sO(l,m)){let k=s?I.classesWithoutHost:I.stylesWithoutHost;null!==k&&(e=Vh(k,e||"")),Lb(l,I,E,e,s)}else!function DI(r,t,e,s,l,m,E,I){l===ti&&(l=Zi);let k=0,F=0,ee=0<l.length?l[0]:null,me=0<m.length?m[0]:null;for(;null!==ee||null!==me;){const Le=k<l.length?l[k+1]:void 0,Ke=F<m.length?m[F+1]:void 0;let Ct,rt=null;ee===me?(k+=2,F+=2,Le!==Ke&&(rt=me,Ct=Ke)):null===me||null!==ee&&ee<me?(k+=2,rt=ee):(F+=2,rt=me,Ct=Ke),null!==rt&&cO(r,t,e,s,rt,Ct,E,I),ee=k<l.length?l[k]:null,me=F<m.length?m[F]:null}}(l,I,E,E[11],E[m+1],E[m+1]=function Nf(r,t,e){if(null==e||""===e)return Zi;const s=[],l=Kc(e);if(Array.isArray(l))for(let m=0;m<l.length;m++)r(s,l[m],!0);else if("object"==typeof l)for(const m in l)l.hasOwnProperty(m)&&r(s,m,l[m]);else"string"==typeof l&&t(s,l);return s}(r,t,e),s,m)}}(Nr,Ul,ig(yn(),r,t,e),!0)}function Z_(r,t,e){const s=yn();return Za(s,qp(),t)&&Xc(cr(),Uo(),s,r,t,s[11],e,!0),Z_}function il(r,t,e){const s=yn();if(Za(s,qp(),t)){const m=cr(),E=Uo();Xc(m,E,s,r,t,sI(Xp(m.data),E,s),e,!0)}return il}const yh="en-US";let tv=yh;function Su(r,t,e,s,l){if(r=Wr(r),Array.isArray(r))for(let m=0;m<r.length;m++)Su(r[m],t,e,s,l);else{const m=cr(),E=yn();let I=ap(r)?r:Wr(r.provide),k=OA(r);const F=Wo(),ee=1048575&F.providerIndexes,me=F.directiveStart,Le=F.providerIndexes>>20;if(ap(r)||!r.multi){const Ke=new No(k,l,gt),rt=Ag(I,t,l?ee:ee+Le,me);-1===rt?(aA(ju(F,E),m,I),my(m,r,t.length),t.push(I),F.directiveStart++,F.directiveEnd++,l&&(F.providerIndexes+=1048576),e.push(Ke),E.push(Ke)):(e[rt]=Ke,E[rt]=Ke)}else{const Ke=Ag(I,t,ee+Le,me),rt=Ag(I,t,ee,ee+Le),Ct=Ke>=0&&e[Ke],Jt=rt>=0&&e[rt];if(l&&!Jt||!l&&!Ct){aA(ju(F,E),m,I);const tn=function QO(r,t,e,s,l){const m=new No(r,e,gt);return m.multi=[],m.index=t,m.componentProviders=0,vg(m,l,s&&!e),m}(l?EP:jO,e.length,l,s,k);!l&&Jt&&(e[rt].providerFactory=tn),my(m,r,t.length,0),t.push(I),F.directiveStart++,F.directiveEnd++,l&&(F.providerIndexes+=1048576),e.push(tn),E.push(tn)}else my(m,r,Ke>-1?Ke:rt,vg(e[l?rt:Ke],k,!l&&s));!l&&s&&Jt&&e[rt].componentProviders++}}}function my(r,t,e,s){const l=ap(t),m=function cp(r){return!!r.useClass}(t);if(l||m){const k=(m?Wr(t.useClass):t).prototype.ngOnDestroy;if(k){const F=r.destroyHooks||(r.destroyHooks=[]);if(!l&&t.multi){const ee=F.indexOf(e);-1===ee?F.push(e,[s,k]):F[ee+1].push(s,k)}else F.push(e,k)}}}function vg(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function Ag(r,t,e,s){for(let l=e;l<s;l++)if(t[l]===r)return l;return-1}function jO(r,t,e,s){return Zb(this.multi,[])}function EP(r,t,e,s){const l=this.multi;let m;if(this.providerFactory){const E=this.providerFactory.componentProviders,I=nf(e,e[1],this.providerFactory.index,s);m=I.slice(0,E),Zb(l,m);for(let k=E;k<I.length;k++)m.push(I[k])}else m=[],Zb(l,m);return m}function Zb(r,t){for(let e=0;e<r.length;e++)t.push((0,r[e])());return t}function Ao(r,t=[]){return e=>{e.providersResolver=(s,l)=>function fy(r,t,e){const s=cr();if(s.firstCreatePass){const l=mu(r);Su(e,s.data,s.blueprint,l,!0),Su(t,s.data,s.blueprint,l,!1)}}(s,l?l(r):r,t)}}class hv{}class eS{}class Cu extends hv{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pp(this);const s=function Bc(r,t){const e=r[hw]||null;if(!e&&!0===t)throw new Error(`Type ${Lo(r)} does not have '\u0275mod' property.`);return e}(t);this._bootstrapComponents=function Ll(r){return r instanceof Function?r():r}(s.bootstrap),this._r3Injector=wR(t,e,[{provide:hv,useValue:this},{provide:k_,useValue:this.componentFactoryResolver}],Lo(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class jo extends eS{constructor(t){super(),this.moduleType=t}create(t){return new Cu(this.moduleType,t)}}function qO(r,t,e,s,l,m){const E=t+e;return Za(r,E,l)?function wd(r,t,e){return r[t]=e}(r,E+1,m?s.call(m,l):s(l)):function pv(r,t){const e=r[t];return e===ti?void 0:e}(r,E+1)}function $O(r,t,e){const s=r+22,l=yn(),m=_m(l,s);return function Uf(r,t){return r[1].data[t].pure}(l,s)?qO(l,function Ra(){const r=ci.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}(),t,m.transform,e,m):m.transform(e)}function d(r){return t=>{setTimeout(r,void 0,t)}}const u=class a extends ht{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,s){let l=t,m=e||(()=>null),E=s;if(t&&"object"==typeof t){const k=t;l=k.next?.bind(k),m=k.error?.bind(k),E=k.complete?.bind(k)}this.__isAsync&&(m=d(m),l&&(l=d(l)),E&&(E=d(E)));const I=super.subscribe({next:l,error:m,complete:E});return t instanceof U&&t.add(I),I}};function f(){return this._results[wf()]()}class A{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=wf(),s=A.prototype;s[e]||(s[e]=f)}get changes(){return this._changes||(this._changes=new u)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const s=this;s.dirty=!1;const l=vc(t);(this._changesDetected=!function Ws(r,t,e){if(r.length!==t.length)return!1;for(let s=0;s<r.length;s++){let l=r[s],m=t[s];if(e&&(l=e(l),m=e(m)),m!==l)return!1}return!0}(s._results,l,e))&&(s._results=l,s.length=l.length,s.last=l[this.length-1],s.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let S=(()=>{class r{}return r.__NG_ELEMENT_ID__=M,r})();const T=S,R=class extends T{constructor(t,e,s){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=s}createEmbeddedView(t,e){const s=this._declarationTContainer.tViews,l=Ym(this._declarationLView,s,t,16,null,s.declTNode,null,null,null,null,e||null);l[17]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[19];return null!==E&&(l[19]=E.createEmbeddedView(s)),B_(s,l,t),new $m(l)}};function M(){return B(Wo(),yn())}function B(r,t){return 4&r.type?new R(t,r,yf(r,t)):null}let H=(()=>{class r{}return r.__NG_ELEMENT_ID__=$,r})();function $(){return Qe(Wo(),yn())}const ce=H,he=class extends ce{constructor(t,e,s){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=s}get element(){return yf(this._hostTNode,this._hostLView)}get injector(){return new ur(this._hostTNode,this._hostLView)}get parentInjector(){const t=Oa(this._hostTNode,this._hostLView);if(EE(t)){const e=zh(t,this._hostLView),s=bE(t);return new ur(e[1].data[s+8],e)}return new ur(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ue(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,s){let l,m;"number"==typeof s?l=s:null!=s&&(l=s.index,m=s.injector);const E=t.createEmbeddedView(e||{},m);return this.insert(E,l),E}createComponent(t,e,s,l,m){const E=t&&!function Wu(r){return"function"==typeof r}(t);let I;if(E)I=e;else{const me=e||{};I=me.index,s=me.injector,l=me.projectableNodes,m=me.environmentInjector||me.ngModuleRef}const k=E?t:new VA(eo(t)),F=s||this.parentInjector;if(!m&&null==k.ngModule){const Le=(E?F:this.parentInjector).get(ah,null);Le&&(m=Le)}const ee=k.create(F,l,void 0,m);return this.insert(ee.hostView,I),ee}insert(t,e){const s=t._lView,l=s[1];if(function Cw(r){return Il(r[3])}(s)){const ee=this.indexOf(t);if(-1!==ee)this.detach(ee);else{const me=s[3],Le=new he(me,me[6],me[3]);Le.detach(Le.indexOf(t))}}const m=this._adjustIndex(e),E=this._lContainer;!function Gw(r,t,e,s){const l=10+s,m=e.length;s>0&&(e[l-1][4]=t),s<m-10?(t[4]=e[l],RE(e,10+s,t)):(e.push(t),t[4]=null),t[3]=e;const E=t[17];null!==E&&e!==E&&function qB(r,t){const e=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===e?r[9]=[t]:e.push(t)}(E,t);const I=t[19];null!==I&&I.insertView(r),t[2]|=64}(l,s,E,m);const I=Jw(m,E),k=s[11],F=AA(k,E[7]);return null!==F&&function Nl(r,t,e,s,l,m){s[0]=l,s[6]=t,XE(r,s,e,1,l,m)}(l,E[6],k,s,F,I),t.attachToViewContainerRef(),RE(Se(E),m,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ue(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),s=Pl(this._lContainer,e);s&&(Rl(Se(this._lContainer),e),Bm(s[1],s))}detach(t){const e=this._adjustIndex(t,-1),s=Pl(this._lContainer,e);return s&&null!=Rl(Se(this._lContainer),e)?new $m(s):null}_adjustIndex(t,e=0){return t??this.length+e}};function ue(r){return r[8]}function Se(r){return r[8]||(r[8]=[])}function Qe(r,t){let e;const s=t[r.index];if(Il(s))e=s;else{let l;if(8&r.type)l=sa(s);else{const m=t[11];l=m.createComment("");const E=qa(r,t);vd(m,AA(m,E),l,function JB(r,t){return r.nextSibling(t)}(m,E),!1)}t[r.index]=e=kb(s,t,l,r),Sr(t,e)}return new he(e,r,t)}class Lt{constructor(t){this.queryList=t,this.matches=null}clone(){return new Lt(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gt{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const s=null!==t.contentQueries?t.contentQueries[0]:e.length,l=[];for(let m=0;m<s;m++){const E=e.getByIndex(m);l.push(this.queries[E.indexInDeclarationView].clone())}return new Gt(l)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Gn(t,e).matches&&this.queries[e].setDirty()}}class jt{constructor(t,e,s=null){this.predicate=t,this.flags=e,this.read=s}}class Tt{constructor(t=[]){this.queries=t}elementStart(t,e){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let s=0;s<this.length;s++){const l=null!==e?e.length:0,m=this.getByIndex(s).embeddedTView(t,l);m&&(m.indexInDeclarationView=s,null!==e?e.push(m):e=[m])}return null!==e?new Tt(e):null}template(t,e){for(let s=0;s<this.queries.length;s++)this.queries[s].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class sn{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new sn(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let s=t.parent;for(;null!==s&&8&s.type&&s.index!==e;)s=s.parent;return e===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const s=this.metadata.predicate;if(Array.isArray(s))for(let l=0;l<s.length;l++){const m=s[l];this.matchTNodeWithReadOption(t,e,hn(e,m)),this.matchTNodeWithReadOption(t,e,fd(e,t,m,!1,!1))}else s===S?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,fd(e,t,s,!1,!1))}matchTNodeWithReadOption(t,e,s){if(null!==s){const l=this.metadata.read;if(null!==l)if(l===Pi||l===H||l===S&&4&e.type)this.addMatch(e.index,-2);else{const m=fd(e,t,l,!1,!1);null!==m&&this.addMatch(e.index,m)}else this.addMatch(e.index,s)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function hn(r,t){const e=r.localNames;if(null!==e)for(let s=0;s<e.length;s+=2)if(e[s]===t)return e[s+1];return null}function ln(r,t,e,s){return-1===e?function An(r,t){return 11&r.type?yf(r,t):4&r.type?B(r,t):null}(t,r):-2===e?function Qt(r,t,e){return e===Pi?yf(t,r):e===S?B(t,r):e===H?Qe(t,r):void 0}(r,t,s):nf(r,r[1],e,t)}function Bn(r,t,e,s){const l=t[19].queries[s];if(null===l.matches){const m=r.data,E=e.matches,I=[];for(let k=0;k<E.length;k+=2){const F=E[k];I.push(F<0?null:ln(t,m[F],E[k+1],e.metadata.read))}l.matches=I}return l.matches}function _r(r,t,e,s){const l=r.queries.getByIndex(e),m=l.matches;if(null!==m){const E=Bn(r,t,l,e);for(let I=0;I<m.length;I+=2){const k=m[I];if(k>0)s.push(E[I/2]);else{const F=m[I+1],ee=t[-k];for(let me=10;me<ee.length;me++){const Le=ee[me];Le[17]===Le[3]&&_r(Le[1],Le,F,s)}if(null!==ee[9]){const me=ee[9];for(let Le=0;Le<me.length;Le++){const Ke=me[Le];_r(Ke[1],Ke,F,s)}}}}}return s}function vt(r){const t=yn(),e=cr(),s=P0();mc(s+1);const l=Gn(e,s);if(r.dirty&&function _N(r){return 4==(4&r[2])}(t)===(2==(2&l.metadata.flags))){if(null===l.matches)r.reset([]);else{const m=l.crossesNgTemplate?_r(e,t,s,[]):Bn(e,t,l,s);r.reset(m,hR),r.notifyOnChanges()}return!0}return!1}function ut(r,t,e){const s=cr();s.firstCreatePass&&(Ut(s,new jt(r,t,e),-1),2==(2&t)&&(s.staticViewQueries=!0)),lt(s,yn(),t)}function Be(r,t,e,s){const l=cr();if(l.firstCreatePass){const m=Wo();Ut(l,new jt(t,e,s),m.index),function an(r,t){const e=r.contentQueries||(r.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(r.queries.length-1,t)}(l,r),2==(2&e)&&(l.staticContentQueries=!0)}lt(l,yn(),e)}function $e(){return function St(r,t){return r[19].queries[t].queryList}(yn(),P0())}function lt(r,t,e){const s=new A(4==(4&e));MR(r,t,s,s.destroy),null===t[19]&&(t[19]=new Gt),t[19].queries.push(new Lt(s))}function Ut(r,t,e){null===r.queries&&(r.queries=new Tt),r.queries.track(new sn(t,e))}function Gn(r,t){return r.queries.getByIndex(t)}function vr(r,t){return B(r,t)}function tD(...r){}const dF=new Fn("Application Initializer");let aT=(()=>{class r{constructor(e){this.appInits=e,this.resolve=tD,this.reject=tD,this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,l)=>{this.resolve=s,this.reject=l})}runInitializers(){if(this.initialized)return;const e=[],s=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const m=this.appInits[l]();if(on(m))e.push(m);else if(yI(m)){const E=new Promise((I,k)=>{m.subscribe({complete:I,error:k})});e.push(E)}}Promise.all(e).then(()=>{s()}).catch(l=>{this.reject(l)}),0===e.length&&s(),this.initialized=!0}}return r.\u0275fac=function(e){return new(e||r)(Xt(dF,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const oS=new Fn("AppId",{providedIn:"root",factory:function hF(){return`${OP()}${OP()}${OP()}`}});function OP(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pF=new Fn("Platform Initializer"),nD=new Fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Pj=new Fn("appBootstrapListener"),Ip=new Fn("AnimationModuleType"),Rh=new Fn("LocaleId",{providedIn:"root",factory:()=>ba(Rh,qr.Optional|qr.SkipSelf)||function mF(){return typeof $localize<"u"&&$localize.locale||yh}()}),iD=(()=>Promise.resolve(0))();function cT(r){typeof Zone>"u"?iD.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class _i{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new u(!1),this.onMicrotaskEmpty=new u(!1),this.onStable=new u(!1),this.onError=new u(!1),typeof Zone>"u")throw new _n(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!s&&e,l.shouldCoalesceRunChangeDetection=s,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Fj(){let r=Go.requestAnimationFrame,t=Go.cancelAnimationFrame;if(typeof Zone<"u"&&r&&t){const e=r[Zone.__symbol__("OriginalDelegate")];e&&(r=e);const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Vj(r){const t=()=>{!function oD(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Go,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,NP(r),r.isCheckStableRunning=!0,kP(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),NP(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,s,l,m,E,I)=>{try{return PP(r),e.invokeTask(l,m,E,I)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||r.shouldCoalesceRunChangeDetection)&&t(),MP(r)}},onInvoke:(e,s,l,m,E,I,k)=>{try{return PP(r),e.invoke(l,m,E,I,k)}finally{r.shouldCoalesceRunChangeDetection&&t(),MP(r)}},onHasTask:(e,s,l,m)=>{e.hasTask(l,m),s===l&&("microTask"==m.change?(r._hasPendingMicrotasks=m.microTask,NP(r),kP(r)):"macroTask"==m.change&&(r.hasPendingMacrotasks=m.macroTask))},onHandleError:(e,s,l,m)=>(e.handleError(l,m),r.runOutsideAngular(()=>r.onError.emit(m)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_i.isInAngularZone())throw new _n(909,!1)}static assertNotInAngularZone(){if(_i.isInAngularZone())throw new _n(909,!1)}run(t,e,s){return this._inner.run(t,e,s)}runTask(t,e,s,l){const m=this._inner,E=m.scheduleEventTask("NgZoneEvent: "+l,t,Uj,tD,tD);try{return m.runTask(E,e,s)}finally{m.cancelTask(E)}}runGuarded(t,e,s){return this._inner.runGuarded(t,e,s)}runOutsideAngular(t){return this._outer.run(t)}}const Uj={};function kP(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function NP(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function PP(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function MP(r){r._nesting--,kP(r)}class sS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new u,this.onMicrotaskEmpty=new u,this.onStable=new u,this.onError=new u}run(t,e,s){return t.apply(e,s)}runGuarded(t,e,s){return t.apply(e,s)}runOutsideAngular(t){return t()}runTask(t,e,s,l){return t.apply(e,s)}}const AF=new Fn(""),uT=new Fn("");let aS,lT=(()=>{class r{constructor(e,s,l){this._ngZone=e,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,aS||(function jj(r){aS=r}(l),l.addToWindow(s)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_i.assertNotInAngularZone(),cT(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cT(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(e)||(clearTimeout(s.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,s,l){let m=-1;s&&s>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==m),e(this._didWork,this.getPendingTasks())},s)),this._callbacks.push({doneCb:e,timeoutId:m,updateCb:l})}whenStable(e,s,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,s,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,s,l){return[]}}return r.\u0275fac=function(e){return new(e||r)(Xt(_i),Xt(mv),Xt(uT))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})(),mv=(()=>{class r{constructor(){this._applications=new Map}registerApplication(e,s){this._applications.set(e,s)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,s=!0){return aS?.findTestabilityInTree(this,e,s)??null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Tu=null;const yF=new Fn("AllowMultipleToken"),sD=new Fn("PlatformDestroyListeners");function CF(r,t,e=[]){const s=`Platform: ${t}`,l=new Fn(s);return(m=[])=>{let E=uD();if(!E||E.injector.get(yF,!1)){const I=[...e,...m,{provide:l,useValue:!0}];r?r(I):function xP(r){if(Tu&&!Tu.get(yF,!1))throw new _n(400,!1);Tu=r;const t=r.get(BP);(function aD(r){const t=r.get(pF,null);t&&t.forEach(e=>e())})(r)}(function cS(r=[],t){return Ec.create({name:t,providers:[{provide:w_,useValue:"platform"},{provide:sD,useValue:new Set([()=>Tu=null])},...r]})}(I,s))}return function Hj(r){const t=uD();if(!t)throw new _n(401,!1);return t}()}}function uD(){return Tu?.get(BP)??null}let BP=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,s){const l=function FP(r,t){let e;return e="noop"===r?new sS:("zone.js"===r?void 0:r)||new _i(t),e}(s?.ngZone,function dT(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(s)),m=[{provide:_i,useValue:l}];return l.run(()=>{const E=Ec.create({providers:m,parent:this.injector,name:e.moduleType.name}),I=e.create(E),k=I.injector.get(Cd,null);if(!k)throw new _n(402,!1);return l.runOutsideAngular(()=>{const F=l.onError.subscribe({next:ee=>{k.handleError(ee)}});I.onDestroy(()=>{uS(this._modules,I),F.unsubscribe()})}),function IF(r,t,e){try{const s=e();return on(s)?s.catch(l=>{throw t.runOutsideAngular(()=>r.handleError(l)),l}):s}catch(s){throw t.runOutsideAngular(()=>r.handleError(s)),s}}(k,l,()=>{const F=I.injector.get(aT);return F.runInitializers(),F.donePromise.then(()=>(function mg(r){El(r,"Expected localeId to be defined"),"string"==typeof r&&(tv=r.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Rh,yh)||yh),this._moduleDoBootstrap(I),I))})})}bootstrapModule(e,s=[]){const l=lD({},s);return function Qj(r,t,e){const s=new jo(e);return Promise.resolve(s)}(0,0,e).then(m=>this.bootstrapModuleFactory(m,l))}_moduleDoBootstrap(e){const s=e.injector.get(yy);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(l=>s.bootstrap(l));else{if(!e.instance.ngDoBootstrap)throw new _n(403,!1);e.instance.ngDoBootstrap(s)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _n(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const e=this._injector.get(sD,null);e&&(e.forEach(s=>s()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(e){return new(e||r)(Xt(Ec))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function lD(r,t){return Array.isArray(t)?t.reduce(lD,r):{...r,...t}}let yy=(()=>{class r{constructor(e,s,l){this._zone=e,this._injector=s,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new ze(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new ze(I=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{_i.assertNotInAngularZone(),cT(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{_i.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{k.unsubscribe(),F.unsubscribe()}});this.isStable=Ro(m,E.pipe(pu()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,s){const l=e instanceof mb;if(!this._injector.get(aT).done)throw!l&&function ad(r){const t=eo(r)||Is(r)||Lc(r);return null!==t&&t.standalone}(e),new _n(405,false);let E;E=l?e:this._injector.get(k_).resolveComponentFactory(e),this.componentTypes.push(E.componentType);const I=function EF(r){return r.isBoundToModule}(E)?void 0:this._injector.get(hv),F=E.create(Ec.NULL,[],s||E.selector,I),ee=F.location.nativeElement,me=F.injector.get(AF,null);return me?.registerApplication(ee),F.onDestroy(()=>{this.detachView(F.hostView),uS(this.components,F),me?.unregisterApplication(ee)}),this._loadComponent(F),F}tick(){if(this._runningTick)throw new _n(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const s=e;this._views.push(s),s.attachToAppRef(this)}detachView(e){const s=e;uS(this._views,s),s.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Pj,[]).concat(this._bootstrapListeners).forEach(l=>l(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>uS(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new _n(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(e){return new(e||r)(Xt(_i),Xt(ah),Xt(Cd))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function uS(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}let Vf=(()=>{class r{}return r.__NG_ELEMENT_ID__=dD,r})();function dD(r){return function VP(r,t,e){if(hE(r)&&!e){const s=Ia(r.index,t);return new $m(s,s)}return 47&r.type?new $m(t[16],t):null}(Wo(),yn(),16==(16&r))}class NF{constructor(){}supports(t){return rg(t)}create(t){return new zj(t)}}const PF=(r,t)=>t;class zj{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||PF}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,s=this._removalsHead,l=0,m=null;for(;e||s;){const E=!s||e&&e.currentIndex<xF(s,l,m)?e:s,I=xF(E,l,m),k=E.currentIndex;if(E===s)l--,s=s._nextRemoved;else if(e=e._next,null==E.previousIndex)l++;else{m||(m=[]);const F=I-l,ee=k-l;if(F!=ee){for(let Le=0;Le<F;Le++){const Ke=Le<m.length?m[Le]:m[Le]=0,rt=Ke+Le;ee<=rt&&rt<F&&(m[Le]=Ke+1)}m[E.previousIndex]=ee-F}}I!==k&&t(E,I,k)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!rg(t))throw new _n(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let l,m,E,e=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let I=0;I<this.length;I++)m=t[I],E=this._trackByFn(I,m),null!==e&&Object.is(e.trackById,E)?(s&&(e=this._verifyReinsertion(e,m,E,I)),Object.is(e.item,m)||this._addIdentityChange(e,m)):(e=this._mismatch(e,m,E,I),s=!0),e=e._next}else l=0,function zR(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{const e=r[wf()]();let s;for(;!(s=e.next()).done;)t(s.value)}}(t,I=>{E=this._trackByFn(l,I),null!==e&&Object.is(e.trackById,E)?(s&&(e=this._verifyReinsertion(e,I,E,l)),Object.is(e.item,I)||this._addIdentityChange(e,I)):(e=this._mismatch(e,I,E,l),s=!0),e=e._next,l++}),this.length=l;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,s,l){let m;return null===t?m=this._itTail:(m=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,m,l)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(s,l))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,m,l)):t=this._addAfter(new MF(e,s),m,l),t}_verifyReinsertion(t,e,s,l){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==m?t=this._reinsertAfter(m,t._prev,l):t.currentIndex!=l&&(t.currentIndex=l,this._addToMoves(t,l)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const l=t._prevRemoved,m=t._nextRemoved;return null===l?this._removalsHead=m:l._nextRemoved=m,null===m?this._removalsTail=l:m._prevRemoved=l,this._insertAfter(t,e,s),this._addToMoves(t,s),t}_moveAfter(t,e,s){return this._unlink(t),this._insertAfter(t,e,s),this._addToMoves(t,s),t}_addAfter(t,e,s){return this._insertAfter(t,e,s),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,s){const l=null===e?this._itHead:e._next;return t._next=l,t._prev=e,null===l?this._itTail=t:l._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new fD),this._linkedRecords.put(t),t.currentIndex=s,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,s=t._next;return null===e?this._itHead=s:e._next=s,null===s?this._itTail=e:s._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fD),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class MF{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yj{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===e||e<=s.currentIndex)&&Object.is(s.trackById,t))return s;return null}remove(t){const e=t._prevDup,s=t._nextDup;return null===e?this._head=s:e._nextDup=s,null===s?this._tail=e:s._prevDup=e,null===this._head}}class fD{constructor(){this.map=new Map}put(t){const e=t.trackById;let s=this.map.get(e);s||(s=new Yj,this.map.set(e,s)),s.add(t)}get(t,e){const l=this.map.get(t);return l?l.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xF(r,t,e){const s=r.previousIndex;if(null===s)return s;let l=0;return e&&s<e.length&&(l=e[s]),s+t+l}class LF{constructor(){}supports(t){return t instanceof Map||HA(t)}create(){return new KP}}class KP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||HA(t)))throw new _n(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(s,l)=>{if(e&&e.key===l)this._maybeAddToChanges(e,s),this._appendAfter=e,e=e._next;else{const m=this._getOrCreateRecordForKey(l,s);e=this._insertBeforeOrAppend(e,m)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let s=e;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const s=t._prev;return e._next=t,e._prev=s,t._prev=e,s&&(s._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const l=this._records.get(t);this._maybeAddToChanges(l,e);const m=l._prev,E=l._next;return m&&(m._next=E),E&&(E._prev=m),l._next=null,l._prev=null,l}const s=new qj(t);return this._records.set(t,s),s.currentValue=e,this._addToAdditions(s),s}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(s=>e(t[s],s))}}class qj{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mD(){return new gD([new NF])}let gD=(()=>{class r{constructor(e){this.factories=e}static create(e,s){if(null!=s){const l=s.factories.slice();e=e.concat(l)}return new r(e)}static extend(e){return{provide:r,useFactory:s=>r.create(e,s||mD()),deps:[[r,new p_,new mi]]}}find(e){const s=this.factories.find(l=>l.supports(e));if(null!=s)return s;throw new _n(901,!1)}}return r.\u0275prov=Ar({token:r,providedIn:"root",factory:mD}),r})();function zP(){return new fT([new LF])}let fT=(()=>{class r{constructor(e){this.factories=e}static create(e,s){if(s){const l=s.factories.slice();e=e.concat(l)}return new r(e)}static extend(e){return{provide:r,useFactory:s=>r.create(e,s||zP()),deps:[[r,new p_,new mi]]}}find(e){const s=this.factories.find(l=>l.supports(e));if(s)return s;throw new _n(901,!1)}}return r.\u0275prov=Ar({token:r,providedIn:"root",factory:zP}),r})();const $j=CF(null,"core",[]);let BF=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(Xt(yy))},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({}),r})(),hS=null;function jf(){return hS}class YP{}const xi=new Fn("DocumentToken");let qP=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ar({token:r,factory:function(){return function t8(){return Xt(FF)}()},providedIn:"platform"}),r})(),FF=(()=>{class r extends qP{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jf().getBaseHref(this._doc)}onPopState(e){const s=jf().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",e,!1),()=>s.removeEventListener("popstate",e)}onHashChange(e){const s=jf().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",e,!1),()=>s.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,s,l){UF()?this._history.pushState(e,s,l):this.location.hash=l}replaceState(e,s,l){UF()?this._history.replaceState(e,s,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi))},r.\u0275prov=Ar({token:r,factory:function(){return function r8(){return new FF(Xt(xi))}()},providedIn:"platform"}),r})();function UF(){return!!window.history.pushState}function VF(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function _D(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function Oh(r){return r&&"?"!==r[0]?"?"+r:r}let vD=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ar({token:r,factory:function(){return ba(o8)},providedIn:"root"}),r})();const i8=new Fn("appBaseHref");let o8=(()=>{class r extends vD{constructor(e,s){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??ba(xi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return VF(this._baseHref,e)}path(e=!1){const s=this._platformLocation.pathname+Oh(this._platformLocation.search),l=this._platformLocation.hash;return l&&e?`${s}${l}`:s}pushState(e,s,l,m){const E=this.prepareExternalUrl(l+Oh(m));this._platformLocation.pushState(e,s,E)}replaceState(e,s,l,m){const E=this.prepareExternalUrl(l+Oh(m));this._platformLocation.replaceState(e,s,E)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(Xt(qP),Xt(i8,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),jF=(()=>{class r{constructor(e){this._subject=new u,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const s=this._locationStrategy.getBaseHref();this._baseHref=_D(JP(s)),this._locationStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,s=""){return this.path()==this.normalize(e+Oh(s))}normalize(e){return r.stripTrailingSlash(function s8(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,JP(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,s="",l=null){this._locationStrategy.pushState(l,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Oh(s)),l)}replaceState(e,s="",l=null){this._locationStrategy.replaceState(l,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Oh(s)),l)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)})),()=>{const s=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(s,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",s){this._urlChangeListeners.forEach(l=>l(e,s))}subscribe(e,s,l){return this._subject.subscribe({next:e,error:s,complete:l})}}return r.normalizeQueryParams=Oh,r.joinWithSlash=VF,r.stripTrailingSlash=_D,r.\u0275fac=function(e){return new(e||r)(Xt(vD))},r.\u0275prov=Ar({token:r,factory:function(){return function QF(){return new jF(Xt(vD))}()},providedIn:"root"}),r})();function JP(r){return r.replace(/\/index.html$/,"")}function aM(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const s=e.indexOf("="),[l,m]=-1==s?[e,""]:[e.slice(0,s),e.slice(s+1)];if(l.trim()===t)return decodeURIComponent(m)}return null}let CD=(()=>{class r{constructor(e,s,l,m){this._iterableDiffers=e,this._keyValueDiffers=s,this._ngEl=l,this._renderer=m,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(rg(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Lo(s.item)}`);this._toggleClass(s.item,!0)}),e.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!0)):Object.keys(e).forEach(s=>this._toggleClass(s,!!e[s])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!1)):Object.keys(e).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(e,s){(e=e.trim())&&e.split(/\s+/g).forEach(l=>{s?this._renderer.addClass(this._ngEl.nativeElement,l):this._renderer.removeClass(this._ngEl.nativeElement,l)})}}return r.\u0275fac=function(e){return new(e||r)(gt(gD),gt(fT),gt(Pi),gt(Sd))},r.\u0275dir=gr({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),r})();class dU{constructor(t,e,s,l){this.$implicit=t,this.ngForOf=e,this.index=s,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lM=(()=>{class r{constructor(e,s,l){this._viewContainer=e,this._template=s,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const s=this._viewContainer;e.forEachOperation((l,m,E)=>{if(null==l.previousIndex)s.createEmbeddedView(this._template,new dU(l.item,this._ngForOf,-1,-1),null===E?void 0:E);else if(null==E)s.remove(null===m?void 0:m);else if(null!==m){const I=s.get(m);s.move(I,E),hU(I,l)}});for(let l=0,m=s.length;l<m;l++){const I=s.get(l).context;I.index=l,I.count=m,I.ngForOf=this._ngForOf}e.forEachIdentityChange(l=>{hU(s.get(l.currentIndex),l)})}static ngTemplateContextGuard(e,s){return!0}}return r.\u0275fac=function(e){return new(e||r)(gt(H),gt(S),gt(gD))},r.\u0275dir=gr({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),r})();function hU(r,t){r.context.$implicit=t.item}let gS=(()=>{class r{constructor(e,s){this._viewContainer=e,this._context=new pU,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){wT("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){wT("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,s){return!0}}return r.\u0275fac=function(e){return new(e||r)(gt(H),gt(S))},r.\u0275dir=gr({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),r})();class pU{constructor(){this.$implicit=null,this.ngIf=null}}function wT(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${Lo(t)}'.`)}class dM{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let RT=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const s=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||s,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),s}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let s=0;s<this._defaultViews.length;s++)this._defaultViews[s].enforceState(e)}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=gr({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),r})(),OT=(()=>{class r{constructor(e,s,l){this.ngSwitch=l,l._addCase(),this._view=new dM(e,s)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(e){return new(e||r)(gt(H),gt(S),gt(RT,9))},r.\u0275dir=gr({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),r})(),fU=(()=>{class r{constructor(e,s,l){l._addDefault(new dM(e,s))}}return r.\u0275fac=function(e){return new(e||r)(gt(H),gt(S),gt(RT,9))},r.\u0275dir=gr({type:r,selectors:[["","ngSwitchDefault",""]],standalone:!0}),r})(),hM=(()=>{class r{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const s=this._viewContainerRef;if(this._viewRef&&s.remove(s.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:l,ngTemplateOutletContext:m,ngTemplateOutletInjector:E}=this;this._viewRef=s.createEmbeddedView(l,m,E?{injector:E}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return r.\u0275fac=function(e){return new(e||r)(gt(H))},r.\u0275dir=gr({type:r,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ya]}),r})(),Es=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({}),r})();const wu="browser";class bM{}class Hf extends YP{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ul extends Hf{static makeCurrent(){!function e8(r){hS||(hS=r)}(new ul)}onAndCancel(t,e,s){return t.addEventListener(e,s,!1),()=>{t.removeEventListener(e,s,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function is(){return MT=MT||document.querySelector("base"),MT?MT.getAttribute("href"):null}();return null==e?null:function Te(r){Sy=Sy||document.createElement("a"),Sy.setAttribute("href",r);const t=Sy.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){MT=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return aM(document.cookie,t)}}let Sy,MT=null;const Pe=new Fn("TRANSITION_ID"),BU=[{provide:dF,useFactory:function Xo(r,t,e){return()=>{e.get(aT).donePromise.then(()=>{const s=jf(),l=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let m=0;m<l.length;m++)s.remove(l[m])})}},deps:[Pe,xi,Ec],multi:!0}];let NM=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();const Ru=new Fn("EventManagerPlugins");let Cy=(()=>{class r{constructor(e,s){this._zone=s,this._eventNameToPlugin=new Map,e.forEach(l=>l.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,s,l){return this._findPluginFor(s).addEventListener(e,s,l)}addGlobalEventListener(e,s,l){return this._findPluginFor(s).addGlobalEventListener(e,s,l)}getZone(){return this._zone}_findPluginFor(e){const s=this._eventNameToPlugin.get(e);if(s)return s;const l=this._plugins;for(let m=0;m<l.length;m++){const E=l[m];if(E.supports(e))return this._eventNameToPlugin.set(e,E),E}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(Xt(Ru),Xt(_i))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();class PD{constructor(t){this._doc=t}addGlobalEventListener(t,e,s){const l=jf().getGlobalEventTarget(this._doc,t);if(!l)throw new Error(`Unsupported event target ${l} for event ${e}`);return this.addEventListener(l,e,s)}}let oe=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const s=new Set;e.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),s.add(l))}),this.onStylesAdded(s)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})(),Av=(()=>{class r extends oe{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,s,l){e.forEach(m=>{const E=this._doc.createElement("style");E.textContent=m,l.push(s.appendChild(E))})}addHost(e){const s=[];this._addStylesToHost(this._stylesSet,e,s),this._hostNodes.set(e,s)}removeHost(e){const s=this._hostNodes.get(e);s&&s.forEach(xT),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((s,l)=>{this._addStylesToHost(e,l,s)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(xT))}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();function xT(r){jf().remove(r)}const PM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ES=/%COMP%/g;function LT(r,t,e){for(let s=0;s<t.length;s++){let l=t[s];Array.isArray(l)?LT(r,l,e):(l=l.replace(ES,r),e.push(l))}return e}function BD(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let bS=(()=>{class r{constructor(e,s,l){this.eventManager=e,this.sharedStylesHost=s,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new BT(e)}createRenderer(e,s){if(!e||!s)return this.defaultRenderer;switch(s.encapsulation){case fu.Emulated:{let l=this.rendererByCompId.get(s.id);return l||(l=new Ld(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,l)),l.applyToHost(e),l}case 1:case fu.ShadowDom:return new Bd(this.eventManager,this.sharedStylesHost,e,s);default:if(!this.rendererByCompId.has(s.id)){const l=LT(s.id,s.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(Xt(Cy),Xt(Av),Xt(oS))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();class BT{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(PM[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(yo(t)?t.content:t).appendChild(e)}insertBefore(t,e,s){t&&(yo(t)?t.content:t).insertBefore(e,s)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let s="string"==typeof t?document.querySelector(t):t;if(!s)throw new Error(`The selector "${t}" did not match any elements`);return e||(s.textContent=""),s}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,s,l){if(l){e=l+":"+e;const m=PM[l];m?t.setAttributeNS(m,e,s):t.setAttribute(e,s)}else t.setAttribute(e,s)}removeAttribute(t,e,s){if(s){const l=PM[s];l?t.removeAttributeNS(l,e):t.removeAttribute(`${s}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,s,l){l&(jc.DashCase|jc.Important)?t.style.setProperty(e,s,l&jc.Important?"important":""):t.style[e]=s}removeStyle(t,e,s){s&jc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,s){t[e]=s}setValue(t,e){t.nodeValue=e}listen(t,e,s){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,BD(s)):this.eventManager.addEventListener(t,e,BD(s))}}function yo(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class Ld extends BT{constructor(t,e,s,l){super(t),this.component=s;const m=LT(l+"-"+s.id,s.styles,[]);e.addStyles(m),this.contentAttr=function xD(r){return"_ngcontent-%COMP%".replace(ES,r)}(l+"-"+s.id),this.hostAttr=function LD(r){return"_nghost-%COMP%".replace(ES,r)}(l+"-"+s.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const s=super.createElement(t,e);return super.setAttribute(s,this.contentAttr,""),s}}class Bd extends BT{constructor(t,e,s,l){super(t),this.sharedStylesHost=e,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const m=LT(l.id,l.styles,[]);for(let E=0;E<m.length;E++){const I=document.createElement("style");I.textContent=m[E],this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,s){return super.insertBefore(this.nodeOrShadowRoot(t),e,s)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Yt=(()=>{class r extends PD{constructor(e){super(e)}supports(e){return!0}addEventListener(e,s,l){return e.addEventListener(s,l,!1),()=>this.removeEventListener(e,s,l)}removeEventListener(e,s,l){return e.removeEventListener(s,l)}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();const Ty=["alt","control","meta","shift"],fr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ac={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let FD=(()=>{class r extends PD{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,s,l){const m=r.parseEventName(s),E=r.eventCallback(m.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jf().onAndCancel(e,m.domEventName,E))}static parseEventName(e){const s=e.toLowerCase().split("."),l=s.shift();if(0===s.length||"keydown"!==l&&"keyup"!==l)return null;const m=r._normalizeKey(s.pop());let E="",I=s.indexOf("code");if(I>-1&&(s.splice(I,1),E="code."),Ty.forEach(F=>{const ee=s.indexOf(F);ee>-1&&(s.splice(ee,1),E+=F+".")}),E+=m,0!=s.length||0===m.length)return null;const k={};return k.domEventName=l,k.fullKey=E,k}static matchEventFullKeyCode(e,s){let l=fr[e.key]||e.key,m="";return s.indexOf("code.")>-1&&(l=e.code,m="code."),!(null==l||!l)&&(l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),Ty.forEach(E=>{E!==l&&(0,ac[E])(e)&&(m+=E+".")}),m+=l,m===s)}static eventCallback(e,s,l){return m=>{r.matchEventFullKeyCode(m,e)&&l.runGuarded(()=>s(m))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();const BM=CF($j,"browser",[{provide:nD,useValue:wu},{provide:pF,useValue:function Z8(){ul.makeCurrent()},multi:!0},{provide:xi,useFactory:function t6(){return function hC(r){zu=r}(document),document},deps:[]}]),UT=new Fn(""),VU=[{provide:uT,useClass:class Hl{addToWindow(t){Go.getAngularTestability=(s,l=!0)=>{const m=t.findTestabilityInTree(s,l);if(null==m)throw new Error("Could not find testability for element.");return m},Go.getAllAngularTestabilities=()=>t.getAllTestabilities(),Go.getAllAngularRootElements=()=>t.getAllRootElements(),Go.frameworkStabilizers||(Go.frameworkStabilizers=[]),Go.frameworkStabilizers.push(s=>{const l=Go.getAllAngularTestabilities();let m=l.length,E=!1;const I=function(k){E=E||k,m--,0==m&&s(E)};l.forEach(function(k){k.whenStable(I)})})}findTestabilityInTree(t,e,s){return null==e?null:t.getTestability(e)??(s?jf().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:AF,useClass:lT,deps:[_i,mv,uT]},{provide:lT,useClass:lT,deps:[_i,mv,uT]}],VT=[{provide:w_,useValue:"root"},{provide:Cd,useFactory:function e6(){return new Cd},deps:[]},{provide:Ru,useClass:Yt,multi:!0,deps:[xi,_i,nD]},{provide:Ru,useClass:FD,multi:!0,deps:[xi]},{provide:bS,useClass:bS,deps:[Cy,Av,oS]},{provide:ua,useExisting:bS},{provide:oe,useExisting:Av},{provide:Av,useClass:Av,deps:[xi]},{provide:Cy,useClass:Cy,deps:[Ru,_i]},{provide:bM,useClass:NM,deps:[]},[]];let cc=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:oS,useValue:e.appId},{provide:Pe,useExisting:oS},BU]}}}return r.\u0275fac=function(e){return new(e||r)(Xt(UT,12))},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({providers:[...VT,...VU],imports:[Es,BF]}),r})();typeof window<"u"&&window;let VM=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ar({token:r,factory:function(e){let s=null;return s=e?new(e||r):Xt(WU),s},providedIn:"root"}),r})(),WU=(()=>{class r extends VM{constructor(e){super(),this._doc=e}sanitize(e,s){if(null==s)return null;switch(e){case no.NONE:return s;case no.HTML:return zc(s,"HTML")?Kc(s):IC(this._doc,String(s)).toString();case no.STYLE:return zc(s,"Style")?Kc(s):s;case no.SCRIPT:if(zc(s,"Script"))return Kc(s);throw new Error("unsafe value used in a script context");case no.URL:return zc(s,"URL")?Kc(s):EA(String(s));case no.RESOURCE_URL:if(zc(s,"ResourceURL"))return Kc(s);throw new Error(`unsafe value used in a resource URL context (see ${qg})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${qg})`)}}bypassSecurityTrustHtml(e){return function vC(r){return new eR(r)}(e)}bypassSecurityTrustStyle(e){return function rR(r){return new tR(r)}(e)}bypassSecurityTrustScript(e){return function Ns(r){return new gC(r)}(e)}bypassSecurityTrustUrl(e){return function XB(r){return new nR(r)}(e)}bypassSecurityTrustResourceUrl(e){return function DN(r){return new _C(r)}(e)}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi))},r.\u0275prov=Ar({token:r,factory:function(e){let s=null;return s=e?new e:function GU(r){return new WU(r.get(xi))}(Xt(Ec)),s},providedIn:"root"}),r})();const{isArray:l6}=Array,{getPrototypeOf:KU,prototype:jM,keys:d6}=Object;function zU(r){if(1===r.length){const t=r[0];if(l6(t))return{args:t,keys:null};if(function YU(r){return r&&"object"==typeof r&&KU(r)===jM}(t)){const e=d6(t);return{args:e.map(s=>t[s]),keys:e}}}return{args:r,keys:null}}const{isArray:h6}=Array;function VD(r){return tt(t=>function qU(r,t){return h6(t)?r(...t):r(t)}(r,t))}function Rg(r,t){return r.reduce((e,s,l)=>(e[s]=t[l],e),{})}function QM(...r){const t=Uv(r),{args:e,keys:s}=zU(r),l=new ze(m=>{const{length:E}=e;if(!E)return void m.complete();const I=new Array(E);let k=E,F=E;for(let ee=0;ee<E;ee++){let me=!1;gn(e[ee]).subscribe(new Re(m,Le=>{me||(me=!0,F--),I[ee]=Le},()=>k--,void 0,()=>{(!k||!me)&&(F||m.next(s?Rg(s,I):I),m.complete())}))}});return t?l.pipe(VD(t)):l}let JU=(()=>{class r{constructor(e,s){this._renderer=e,this._elementRef=s,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(e,s){this._renderer.setProperty(this._elementRef.nativeElement,e,s)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(gt(Sd),gt(Pi))},r.\u0275dir=gr({type:r}),r})(),Ry=(()=>{class r extends JU{}return r.\u0275fac=function(){let t;return function(s){return(t||(t=vo(r)))(s||r)}}(),r.\u0275dir=gr({type:r,features:[Br]}),r})();const Gf=new Fn("NgValueAccessor"),f6={provide:Gf,useExisting:Qo(()=>IS),multi:!0},g6=new Fn("CompositionEventMode");let IS=(()=>{class r extends JU{constructor(e,s,l){super(e,s),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function m6(){const r=jf()?jf().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(Sd),gt(Pi),gt(g6,8))},r.\u0275dir=gr({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,s){1&e&&ao("input",function(m){return s._handleInput(m.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(m){return s._compositionEnd(m.target.value)})},features:[Ao([f6]),Br]}),r})();function Rp(r){return null==r||("string"==typeof r||Array.isArray(r))&&0===r.length}function fa(r){return null!=r&&"number"==typeof r.length}const Kr=new Fn("NgValidators"),Wf=new Fn("NgAsyncValidators"),Tc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class TS{static min(t){return function jD(r){return t=>{if(Rp(t.value)||Rp(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}(t)}static max(t){return function QD(r){return t=>{if(Rp(t.value)||Rp(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}(t)}static required(t){return function lo(r){return Rp(r.value)?{required:!0}:null}(t)}static requiredTrue(t){return function WM(r){return!0===r.value?null:{required:!0}}(t)}static email(t){return function XU(r){return Rp(r.value)||Tc.test(r.value)?null:{email:!0}}(t)}static minLength(t){return function $U(r){return t=>Rp(t.value)||!fa(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function KM(r){return t=>fa(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Yi(r){if(!r)return Xs;let t,e;return"string"==typeof r?(e="","^"!==r.charAt(0)&&(e+="^"),e+=r,"$"!==r.charAt(r.length-1)&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),s=>{if(Rp(s.value))return null;const l=s.value;return t.test(l)?null:{pattern:{requiredPattern:e,actualValue:l}}}}(t)}static nullValidator(t){return null}static compose(t){return GD(t)}static composeAsync(t){return sr(t)}}function Xs(r){return null}function HD(r){return null!=r}function ZU(r){return on(r)?hc(r):r}function e3(r){let t={};return r.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function ma(r,t){return t.map(e=>e(r))}function zM(r){return r.map(t=>function Po(r){return!r.validate}(t)?t:e=>t.validate(e))}function GD(r){if(!r)return null;const t=r.filter(HD);return 0==t.length?null:function(e){return e3(ma(e,t))}}function hr(r){return null!=r?GD(zM(r)):null}function sr(r){if(!r)return null;const t=r.filter(HD);return 0==t.length?null:function(e){return QM(ma(e,t).map(ZU)).pipe(tt(e3))}}function Og(r){return null!=r?sr(zM(r)):null}function Kf(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function Oy(r){return r._rawValidators}function wS(r){return r._rawAsyncValidators}function Du(r){return r?Array.isArray(r)?r:[r]:[]}function xs(r,t){return Array.isArray(r)?r.includes(t):r===t}function Er(r,t){const e=Du(t);return Du(r).forEach(l=>{xs(e,l)||e.push(l)}),e}function WD(r,t){return Du(t).filter(e=>!xs(r,e))}class Ls{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=hr(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Og(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class br extends Ls{get formDirective(){return null}get path(){return null}}class ps extends Ls{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bs{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ou=(()=>{class r extends Bs{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(ps,2))},r.\u0275dir=gr({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,s){2&e&&Fr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Br]}),r})(),Fi=(()=>{class r extends Bs{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(br,10))},r.\u0275dir=gr({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,s){2&e&&Fr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Br]}),r})();const GT="VALID",zD="INVALID",su="PENDING",zf="DISABLED";function wo(r){return(Ua(r)?r.validators:r)||null}function Fa(r,t){return(Ua(t)?t.asyncValidators:r)||null}function Ua(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class fs{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===GT}get invalid(){return this.status===zD}get pending(){return this.status==su}get disabled(){return this.status===zf}get enabled(){return this.status!==zf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Er(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Er(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(WD(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(WD(t,this._rawAsyncValidators))}hasValidator(t){return xs(this._rawValidators,t)}hasAsyncValidator(t){return xs(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=su,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zf,this.errors=null,this._forEachChild(s=>{s.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=GT,this._forEachChild(s=>{s.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===GT||this.status===su)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zf:GT}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=su,this._hasOwnPendingAsyncValidator=!0;const e=ZU(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((s,l)=>s&&s._find(l),this)}getError(t,e){const s=e?this.get(e):this;return s&&s.errors?s.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new u,this.statusChanges=new u}_calculateStatus(){return this._allControlsDisabled()?zf:this.errors?zD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(su)?su:this._anyControlsHaveStatus(zD)?zD:GT}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ua(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function i3(r){return Array.isArray(r)?hr(r):r||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Op(r){return Array.isArray(r)?Og(r):r||null}(this._rawAsyncValidators)}}class Mo extends fs{constructor(t,e,s){super(wo(e),Fa(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,s={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function ss(r,t,e){r._forEachChild((s,l)=>{if(void 0===e[l])throw new _n(1002,"")})})(this,0,t),Object.keys(t).forEach(s=>{(function Dg(r,t,e){const s=r.controls;if(!(t?Object.keys(s):s).length)throw new _n(1e3,"");if(!s[e])throw new _n(1001,"")})(this,!0,s),this.controls[s].setValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(s=>{const l=this.controls[s];l&&l.patchValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((s,l)=>{s.reset(t[l],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,s)=>(t[s]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,s)=>!!s._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const s=this.controls[e];s&&t(s,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,s]of Object.entries(this.controls))if(this.contains(e)&&t(s))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,s,l)=>((s.enabled||this.disabled)&&(e[l]=s.value),e))}_reduceChildren(t,e){let s=t;return this._forEachChild((l,m)=>{s=e(s,l,m)}),s}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const mr=Mo,Fd=new Fn("CallSetDisabledState",{providedIn:"root",factory:()=>kg}),kg="always";function RS(r,t,e=kg){KT(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(r.disabled),function s3(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Dn(r,t)})}(r,t),function Gl(r,t){const e=(s,l)=>{t.valueAccessor.writeValue(s),l&&t.viewToModelUpdate(s)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function ei(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&Dn(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function Fs(r,t){if(t.valueAccessor.setDisabledState){const e=s=>{t.valueAccessor.setDisabledState(s)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function WT(r,t,e=!0){const s=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(s),t.valueAccessor.registerOnTouched(s)),bv(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function YD(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function KT(r,t){const e=Oy(r);null!==t.validator?r.setValidators(Kf(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const s=wS(r);null!==t.asyncValidator?r.setAsyncValidators(Kf(s,t.asyncValidator)):"function"==typeof s&&r.setAsyncValidators([s]);const l=()=>r.updateValueAndValidity();YD(t._rawValidators,l),YD(t._rawAsyncValidators,l)}function bv(r,t){let e=!1;if(null!==r){if(null!==t.validator){const l=Oy(r);if(Array.isArray(l)&&l.length>0){const m=l.filter(E=>E!==t.validator);m.length!==l.length&&(e=!0,r.setValidators(m))}}if(null!==t.asyncValidator){const l=wS(r);if(Array.isArray(l)&&l.length>0){const m=l.filter(E=>E!==t.asyncValidator);m.length!==l.length&&(e=!0,r.setAsyncValidators(m))}}}const s=()=>{};return YD(t._rawValidators,s),YD(t._rawAsyncValidators,s),e}function Dn(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function bi(r,t){KT(r,t)}function $o(r,t){r._syncPendingControls(),t.forEach(e=>{const s=e.control;"submit"===s.updateOn&&s._pendingChange&&(e.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}const S6={provide:br,useExisting:Qo(()=>YT)},zT=(()=>Promise.resolve())();let YT=(()=>{class r extends br{constructor(e,s,l){super(),this.callSetDisabledState=l,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u,this.form=new Mo({},hr(e),Og(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){zT.then(()=>{const s=this._findContainer(e.path);e.control=s.registerControl(e.name,e.control),RS(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){zT.then(()=>{const s=this._findContainer(e.path);s&&s.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){zT.then(()=>{const s=this._findContainer(e.path),l=new Mo({});bi(l,e),s.registerControl(e.name,l),l.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){zT.then(()=>{const s=this._findContainer(e.path);s&&s.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,s){zT.then(()=>{this.form.get(e.path).setValue(s)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,$o(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return r.\u0275fac=function(e){return new(e||r)(gt(Kr,10),gt(Wf,10),gt(Fd,8))},r.\u0275dir=gr({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,s){1&e&&ao("submit",function(m){return s.onSubmit(m)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ao([S6]),Br]}),r})();function ZM(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}function c3(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const ex=class extends fs{constructor(t=null,e,s){super(wo(e),Fa(s,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ua(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=c3(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ZM(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ZM(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){c3(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Ph=ex;let h3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=gr({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),qT=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({}),r})();const JD=new Fn("NgModelWithFormControlWarning"),$D={provide:br,useExisting:Qo(()=>DS)};let DS=(()=>{class r extends br{constructor(e,s,l){super(),this.callSetDisabledState=l,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u,this._setValidators(e),this._setAsyncValidators(s)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const s=this.form.get(e.path);return RS(s,e,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),s}getControl(e){return this.form.get(e.path)}removeControl(e){WT(e.control||null,e,!1),function Oc(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,s){this.form.get(e.path).setValue(s)}onSubmit(e){return this.submitted=!0,$o(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const s=e.control,l=this.form.get(e.path);s!==l&&(WT(s||null,e),(r=>r instanceof ex)(l)&&(RS(l,e,this.callSetDisabledState),e.control=l))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const s=this.form.get(e.path);bi(s,e),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const s=this.form.get(e.path);s&&function ku(r,t){return bv(r,t)}(s,e)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){KT(this.form,this),this._oldForm&&bv(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(e){return new(e||r)(gt(Kr,10),gt(Wf,10),gt(Fd,8))},r.\u0275dir=gr({type:r,selectors:[["","formGroup",""]],hostBindings:function(e,s){1&e&&ao("submit",function(m){return s.onSubmit(m)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ao([$D]),Br,Ya]}),r})();const P6={provide:ps,useExisting:Qo(()=>sx)};let sx=(()=>{class r extends ps{constructor(e,s,l,m,E){super(),this._ngModelWarningConfig=E,this._added=!1,this.update=new u,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(s),this._setAsyncValidators(l),this.valueAccessor=function uc(r,t){if(!t)return null;let e,s,l;return Array.isArray(t),t.forEach(m=>{m.constructor===IS?e=m:function hl(r){return Object.getPrototypeOf(r.constructor)===Ry}(m)?s=m:l=m}),l||s||e||null}(0,m)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function Nu(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function vi(r,t){return[...t.path,r]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(e){return new(e||r)(gt(br,13),gt(Kr,10),gt(Wf,10),gt(Gf,10),gt(JD,8))},r.\u0275dir=gr({type:r,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ao([P6]),Br,Ya]}),r})(),fx=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[qT]}),r})(),S3=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Fd,useValue:e.callSetDisabledState??kg}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[fx]}),r})(),nk=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:JD,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Fd,useValue:e.callSetDisabledState??kg}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[fx]}),r})();var Q6=Y(1648),gx=Y.n(Q6),_x=Y(3890),T3=Y.n(_x),rk=Y(6021);let vx;try{vx=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vx=!1}let kp,Dc=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function bU(r){return r===wu}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!vx)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(e){return new(e||r)(Xt(nD))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Wl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({}),r})();const XT=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Np(){if(kp)return kp;if("object"!=typeof document||!document)return kp=new Set(XT),kp;let r=document.createElement("input");return kp=new Set(XT.filter(t=>(r.setAttribute("type",t),r.type===t))),kp}let $T,Pg,yx;function lc(r){return function Ax(){if(null==$T&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>$T=!0}))}finally{$T=$T||!1}return $T}()?r:!!r.capture}function Py(){if(null==Pg){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Pg=!1,Pg;if("scrollBehavior"in document.documentElement.style)Pg=!0;else{const r=Element.prototype.scrollTo;Pg=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return Pg}function My(r){return r.composedPath?r.composedPath()[0]:r.target}function e1(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function fl(...r){return hc(r,Ds(r))}function Pp(r,t){return Ye((e,s)=>{let l=0;e.subscribe(new Re(s,m=>r.call(t,m,l++)&&s.next(m)))})}class xy{}class t1{}class Yf{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const s=e.indexOf(":");if(s>0){const l=e.slice(0,s),m=l.toLowerCase(),E=e.slice(s+1).trim();this.maybeSetNormalizedName(l,m),this.headers.has(m)?this.headers.get(m).push(E):this.headers.set(m,[E])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let s=t[e];const l=e.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(l,s),this.maybeSetNormalizedName(e,l))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Yf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Yf;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Yf?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let s=t.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(t.name,e);const l=("a"===t.op?this.headers.get(e):void 0)||[];l.push(...s),this.headers.set(e,l);break;case"d":const m=t.value;if(m){let E=this.headers.get(e);if(!E)return;E=E.filter(I=>-1===m.indexOf(I)),0===E.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,E)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class qf{encodeKey(t){return Cx(t)}encodeValue(t){return Cx(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const W6=/%(\d[a-f0-9])/gi,Sx={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Cx(r){return encodeURIComponent(r).replace(W6,(t,e)=>Sx[e]??t)}function PS(r){return`${r}`}class Jf{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new qf,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Mp(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(l=>{const m=l.indexOf("="),[E,I]=-1==m?[t.decodeKey(l),""]:[t.decodeKey(l.slice(0,m)),t.decodeValue(l.slice(m+1))],k=e.get(E)||[];k.push(I),e.set(E,k)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const s=t.fromObject[e],l=Array.isArray(s)?s.map(PS):[PS(s)];this.map.set(e,l)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(s=>{const l=t[s];Array.isArray(l)?l.forEach(m=>{e.push({param:s,value:m,op:"a"})}):e.push({param:s,value:l,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(s=>e+"="+this.encoder.encodeValue(s)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Jf({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(PS(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let s=this.map.get(t.param)||[];const l=s.indexOf(PS(t.value));-1!==l&&s.splice(l,1),s.length>0?this.map.set(t.param,s):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class R3{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function ik(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function Ix(r){return typeof Blob<"u"&&r instanceof Blob}function Cv(r){return typeof FormData<"u"&&r instanceof FormData}class Ly{constructor(t,e,s,l){let m;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Mg(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||l?(this.body=void 0!==s?s:null,m=l):m=s,m&&(this.reportProgress=!!m.reportProgress,this.withCredentials=!!m.withCredentials,m.responseType&&(this.responseType=m.responseType),m.headers&&(this.headers=m.headers),m.context&&(this.context=m.context),m.params&&(this.params=m.params)),this.headers||(this.headers=new Yf),this.context||(this.context=new R3),this.params){const E=this.params.toString();if(0===E.length)this.urlWithParams=e;else{const I=e.indexOf("?");this.urlWithParams=e+(-1===I?"?":I<e.length-1?"&":"")+E}}else this.params=new Jf,this.urlWithParams=e}serializeBody(){return null===this.body?null:ik(this.body)||Ix(this.body)||Cv(this.body)||function O3(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Jf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Cv(this.body)?null:Ix(this.body)?this.body.type||null:ik(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Jf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,s=t.url||this.url,l=t.responseType||this.responseType,m=void 0!==t.body?t.body:this.body,E=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,I=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let k=t.headers||this.headers,F=t.params||this.params;const ee=t.context??this.context;return void 0!==t.setHeaders&&(k=Object.keys(t.setHeaders).reduce((me,Le)=>me.set(Le,t.setHeaders[Le]),k)),t.setParams&&(F=Object.keys(t.setParams).reduce((me,Le)=>me.set(Le,t.setParams[Le]),F)),new Ly(e,s,m,{params:F,headers:k,context:ee,reportProgress:I,responseType:l,withCredentials:E})}}var Va=(()=>((Va=Va||{})[Va.Sent=0]="Sent",Va[Va.UploadProgress=1]="UploadProgress",Va[Va.ResponseHeader=2]="ResponseHeader",Va[Va.DownloadProgress=3]="DownloadProgress",Va[Va.Response=4]="Response",Va[Va.User=5]="User",Va))();class Tx{constructor(t,e=200,s="OK"){this.headers=t.headers||new Yf,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||s,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class wx extends Tx{constructor(t={}){super(t),this.type=Va.ResponseHeader}clone(t={}){return new wx({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Xf extends Tx{constructor(t={}){super(t),this.type=Va.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Xf({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class D3 extends Tx{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Rx(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let ok=(()=>{class r{constructor(e){this.handler=e}request(e,s,l={}){let m;if(e instanceof Ly)m=e;else{let k,F;k=l.headers instanceof Yf?l.headers:new Yf(l.headers),l.params&&(F=l.params instanceof Jf?l.params:new Jf({fromObject:l.params})),m=new Ly(e,s,void 0!==l.body?l.body:null,{headers:k,context:l.context,params:F,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials})}const E=fl(m).pipe(function H6(r,t){return L(t)?nr(r,t,1):nr(r,1)}(k=>this.handler.handle(k)));if(e instanceof Ly||"events"===l.observe)return E;const I=E.pipe(Pp(k=>k instanceof Xf));switch(l.observe||"body"){case"body":switch(m.responseType){case"arraybuffer":return I.pipe(tt(k=>{if(null!==k.body&&!(k.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return k.body}));case"blob":return I.pipe(tt(k=>{if(null!==k.body&&!(k.body instanceof Blob))throw new Error("Response is not a Blob.");return k.body}));case"text":return I.pipe(tt(k=>{if(null!==k.body&&"string"!=typeof k.body)throw new Error("Response is not a string.");return k.body}));default:return I.pipe(tt(k=>k.body))}case"response":return I;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(e,s={}){return this.request("DELETE",e,s)}get(e,s={}){return this.request("GET",e,s)}head(e,s={}){return this.request("HEAD",e,s)}jsonp(e,s){return this.request("JSONP",e,{params:(new Jf).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,s={}){return this.request("OPTIONS",e,s)}patch(e,s,l={}){return this.request("PATCH",e,Rx(l,s))}post(e,s,l={}){return this.request("POST",e,Rx(l,s))}put(e,s,l={}){return this.request("PUT",e,Rx(l,s))}}return r.\u0275fac=function(e){return new(e||r)(Xt(xy))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();function k3(r,t){return t(r)}function K6(r,t){return(e,s)=>t.intercept(e,{handle:l=>r(l,s)})}const Y6=new Fn("HTTP_INTERCEPTORS"),n1=new Fn("HTTP_INTERCEPTOR_FNS");function N3(){let r=null;return(t,e)=>(null===r&&(r=(ba(Y6,{optional:!0})??[]).reduceRight(K6,k3)),r(t,e))}let P3=(()=>{class r extends xy{constructor(e,s){super(),this.backend=e,this.injector=s,this.chain=null}handle(e){if(null===this.chain){const s=Array.from(new Set(this.injector.get(n1)));this.chain=s.reduceRight((l,m)=>function z6(r,t,e){return(s,l)=>e.runInContext(()=>t(s,m=>r(m,l)))}(l,m,this.injector),k3)}return this.chain(e,s=>this.backend.handle(s))}}return r.\u0275fac=function(e){return new(e||r)(Xt(t1),Xt(ah))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();const Z6=/^\)\]\}',?\n/;let x3=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ze(s=>{const l=this.xhrFactory.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((Ke,rt)=>l.setRequestHeader(Ke,rt.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const Ke=e.detectContentTypeHeader();null!==Ke&&l.setRequestHeader("Content-Type",Ke)}if(e.responseType){const Ke=e.responseType.toLowerCase();l.responseType="json"!==Ke?Ke:"text"}const m=e.serializeBody();let E=null;const I=()=>{if(null!==E)return E;const Ke=l.statusText||"OK",rt=new Yf(l.getAllResponseHeaders()),Ct=function e7(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(l)||e.url;return E=new wx({headers:rt,status:l.status,statusText:Ke,url:Ct}),E},k=()=>{let{headers:Ke,status:rt,statusText:Ct,url:Jt}=I(),tn=null;204!==rt&&(tn=typeof l.response>"u"?l.responseText:l.response),0===rt&&(rt=tn?200:0);let Vn=rt>=200&&rt<300;if("json"===e.responseType&&"string"==typeof tn){const nn=tn;tn=tn.replace(Z6,"");try{tn=""!==tn?JSON.parse(tn):null}catch(n){tn=nn,Vn&&(Vn=!1,tn={error:n,text:tn})}}Vn?(s.next(new Xf({body:tn,headers:Ke,status:rt,statusText:Ct,url:Jt||void 0})),s.complete()):s.error(new D3({error:tn,headers:Ke,status:rt,statusText:Ct,url:Jt||void 0}))},F=Ke=>{const{url:rt}=I(),Ct=new D3({error:Ke,status:l.status||0,statusText:l.statusText||"Unknown Error",url:rt||void 0});s.error(Ct)};let ee=!1;const me=Ke=>{ee||(s.next(I()),ee=!0);let rt={type:Va.DownloadProgress,loaded:Ke.loaded};Ke.lengthComputable&&(rt.total=Ke.total),"text"===e.responseType&&!!l.responseText&&(rt.partialText=l.responseText),s.next(rt)},Le=Ke=>{let rt={type:Va.UploadProgress,loaded:Ke.loaded};Ke.lengthComputable&&(rt.total=Ke.total),s.next(rt)};return l.addEventListener("load",k),l.addEventListener("error",F),l.addEventListener("timeout",F),l.addEventListener("abort",F),e.reportProgress&&(l.addEventListener("progress",me),null!==m&&l.upload&&l.upload.addEventListener("progress",Le)),l.send(m),s.next({type:Va.Sent}),()=>{l.removeEventListener("error",F),l.removeEventListener("abort",F),l.removeEventListener("load",k),l.removeEventListener("timeout",F),e.reportProgress&&(l.removeEventListener("progress",me),null!==m&&l.upload&&l.upload.removeEventListener("progress",Le)),l.readyState!==l.DONE&&l.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(Xt(bM))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();const sk=new Fn("XSRF_ENABLED"),L3="XSRF-TOKEN",B3=new Fn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>L3}),F3="X-XSRF-TOKEN",U3=new Fn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>F3});class V3{}let t7=(()=>{class r{constructor(e,s,l){this.doc=e,this.platform=s,this.cookieName=l,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=aM(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi),Xt(nD),Xt(B3))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();function j3(r,t){const e=r.url.toLowerCase();if(!ba(sk)||"GET"===r.method||"HEAD"===r.method||e.startsWith("http://")||e.startsWith("https://"))return t(r);const s=ba(V3).getToken(),l=ba(U3);return null!=s&&!r.headers.has(l)&&(r=r.clone({headers:r.headers.set(l,s)})),t(r)}var ga=(()=>((ga=ga||{})[ga.Interceptors=0]="Interceptors",ga[ga.LegacyInterceptors=1]="LegacyInterceptors",ga[ga.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ga[ga.NoXsrfProtection=3]="NoXsrfProtection",ga[ga.JsonpSupport=4]="JsonpSupport",ga[ga.RequestsMadeViaParent=5]="RequestsMadeViaParent",ga))();function Fy(r,t){return{\u0275kind:r,\u0275providers:t}}function Q3(...r){const t=[ok,x3,P3,{provide:xy,useExisting:P3},{provide:t1,useExisting:x3},{provide:n1,useValue:j3,multi:!0},{provide:sk,useValue:!0},{provide:V3,useClass:t7}];for(const e of r)t.push(...e.\u0275providers);return function MN(r){return{\u0275providers:r}}(t)}const H3=new Fn("LEGACY_INTERCEPTOR_FN");function Uy({cookieName:r,headerName:t}){const e=[];return void 0!==r&&e.push({provide:B3,useValue:r}),void 0!==t&&e.push({provide:U3,useValue:t}),Fy(ga.CustomXsrfConfiguration,e)}let s7=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({providers:[Q3(Fy(ga.LegacyInterceptors,[{provide:H3,useFactory:N3},{provide:n1,useExisting:H3,multi:!0}]),Uy({cookieName:L3,headerName:F3}))]}),r})();class Ox extends ht{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:s}=this;if(t)throw e;return this._throwIfClosed(),s}next(t){super.next(this._value=t)}}function xS(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function vk(r,t,e){const s=L(r)||t||e?{next:r,error:t,complete:e}:r;return s?Ye((l,m)=>{var E;null===(E=s.subscribe)||void 0===E||E.call(s);let I=!0;l.subscribe(new Re(m,k=>{var F;null===(F=s.next)||void 0===F||F.call(s,k),m.next(k)},()=>{var k;I=!1,null===(k=s.complete)||void 0===k||k.call(s),m.complete()},k=>{var F;I=!1,null===(F=s.error)||void 0===F||F.call(s,k),m.error(k)},()=>{var k,F;I&&(null===(k=s.unsubscribe)||void 0===k||k.call(s)),null===(F=s.finalize)||void 0===F||F.call(s)}))}):Fe}class j7 extends U{constructor(t,e){super()}schedule(t,e=0){return this}}const Ak={setInterval(...r){const{delegate:t}=Ak;return(t?.setInterval||setInterval)(...r)},clearInterval(r){const{delegate:t}=Ak;return(t?.clearInterval||clearInterval)(r)},delegate:void 0};class Mx extends j7{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const s=this.id,l=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(l,s,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(l,this.id,e),this}requestAsyncId(t,e,s=0){return Ak.setInterval(t.flush.bind(t,this),s)}recycleAsyncId(t,e,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return e;Ak.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(t,e);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let l,s=!1;try{this.work(t)}catch(m){s=!0,l=m||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),l}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:s}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Q(s,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const xx={now:()=>(xx.delegate||Date).now(),delegate:void 0};class s1{constructor(t,e=s1.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,s){return new this.schedulerActionCtor(this,t).schedule(s,e)}}s1.now=xx.now;class Lx extends s1{constructor(t,e=s1.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let s;this._active=!0;do{if(s=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,s){for(;t=e.shift();)t.unsubscribe();throw s}}}const Bx=new Lx(Mx),yk=Bx;function Fx(r,t=Bx){return Ye((e,s)=>{let l=null,m=null,E=null;const I=()=>{if(l){l.unsubscribe(),l=null;const F=m;m=null,s.next(F)}};function k(){const F=E+r,ee=t.now();if(ee<F)return l=this.schedule(void 0,F-ee),void s.add(l);I()}e.subscribe(new Re(s,F=>{m=F,E=t.now(),l||(l=t.schedule(k,r),s.add(l))},()=>{I(),s.complete()},void 0,()=>{m=l=null}))})}function sV(r){return Pp((t,e)=>r<=e)}function aV(r,t=Fe){return r=r??Q7,Ye((e,s)=>{let l,m=!0;e.subscribe(new Re(s,E=>{const I=t(E);(m||!r(l,I))&&(m=!1,l=I,s.next(E))}))})}function Q7(r,t){return r===t}function au(r){return Ye((t,e)=>{gn(r).subscribe(new Re(e,()=>e.complete(),te)),!e.closed&&t.subscribe(e)})}function $s(r){return null!=r&&"false"!=`${r}`}function xg(r,t=0){return function cV(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}function Ek(r){return Array.isArray(r)?r:[r]}function ja(r){return null==r?"":"string"==typeof r?r:`${r}px`}function $f(r){return r instanceof Pi?r.nativeElement:r}let uV=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),H7=(()=>{class r{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,s)=>this._cleanupObserver(s))}observe(e){const s=$f(e);return new ze(l=>{const E=this._observeElement(s).subscribe(l);return()=>{E.unsubscribe(),this._unobserveElement(s)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const s=new ht,l=this._mutationObserverFactory.create(m=>s.next(m));l&&l.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:l,stream:s,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:s,stream:l}=this._observedElements.get(e);s&&s.disconnect(),l.complete(),this._observedElements.delete(e)}}}return r.\u0275fac=function(e){return new(e||r)(Xt(uV))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),G7=(()=>{class r{constructor(e,s,l){this._contentObserver=e,this._elementRef=s,this._ngZone=l,this.event=new u,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=$s(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=xg(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Fx(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(gt(H7),gt(Pi),gt(_i))},r.\u0275dir=gr({type:r,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),r})(),lV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({providers:[uV]}),r})();function bk(r,t,e){r?$i(e,r,t):t()}function Sk(...r){return function z7(){return Hp(1)}()(hc(r,Ds(r)))}function LS(...r){const t=Ds(r);return Ye((e,s)=>{(t?Sk(r,e,t):Sk(r,e)).subscribe(s)})}const Ck=new Set;let BS,ir=(()=>{class r{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):q7}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function Y7(r){if(!Ck.has(r))try{BS||(BS=document.createElement("style"),BS.setAttribute("type","text/css"),document.head.appendChild(BS)),BS.sheet&&(BS.sheet.insertRule(`@media ${r} {body{ }}`,0),Ck.add(r))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return r.\u0275fac=function(e){return new(e||r)(Xt(Dc))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function q7(r){return{matches:"all"===r||""===r,media:r,addListener:()=>{},removeListener:()=>{}}}let Ux=(()=>{class r{constructor(e,s){this._mediaMatcher=e,this._zone=s,this._queries=new Map,this._destroySubject=new ht}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return dV(Ek(e)).some(l=>this._registerQuery(l).mql.matches)}observe(e){let m=function W7(...r){const t=Ds(r),e=Uv(r),{args:s,keys:l}=zU(r);if(0===s.length)return hc([],t);const m=new ze(function K7(r,t,e=Fe){return s=>{bk(t,()=>{const{length:l}=r,m=new Array(l);let E=l,I=l;for(let k=0;k<l;k++)bk(t,()=>{const F=hc(r[k],t);let ee=!1;F.subscribe(new Re(s,me=>{m[k]=me,ee||(ee=!0,I--),I||s.next(e(m.slice()))},()=>{--E||s.complete()}))},s)},s)}}(s,t,l?E=>Rg(l,E):Fe));return e?m.pipe(VD(e)):m}(dV(Ek(e)).map(E=>this._registerQuery(E).observable));return m=Sk(m.pipe(yl(1)),m.pipe(sV(1),Fx(0))),m.pipe(tt(E=>{const I={matches:!1,breakpoints:{}};return E.forEach(({matches:k,query:F})=>{I.matches=I.matches||k,I.breakpoints[F]=k}),I}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const s=this._mediaMatcher.matchMedia(e),m={observable:new ze(E=>{const I=k=>this._zone.run(()=>E.next(k));return s.addListener(I),()=>{s.removeListener(I)}}).pipe(LS(s),tt(({matches:E})=>({query:e,matches:E})),au(this._destroySubject)),mql:s};return this._queries.set(e,m),m}}return r.\u0275fac=function(e){return new(e||r)(Xt(ir),Xt(_i))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function dV(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function Tk(r,t){return(r.getAttribute(t)||"").match(/\S+/g)||[]}const hV="cdk-describedby-message",wk="cdk-describedby-host";let Vx=0,jx=(()=>{class r{constructor(e,s){this._platform=s,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+Vx++,this._document=e,this._id=ba(oS)+"-"+Vx++}describe(e,s,l){if(!this._canBeDescribed(e,s))return;const m=Qx(s,l);"string"!=typeof s?(Iv(s,this._id),this._messageRegistry.set(m,{messageElement:s,referenceCount:0})):this._messageRegistry.has(m)||this._createMessageElement(s,l),this._isElementDescribedByMessage(e,m)||this._addMessageReference(e,m)}removeDescription(e,s,l){if(!s||!this._isElementNode(e))return;const m=Qx(s,l);if(this._isElementDescribedByMessage(e,m)&&this._removeMessageReference(e,m),"string"==typeof s){const E=this._messageRegistry.get(m);E&&0===E.referenceCount&&this._deleteMessageElement(m)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${wk}="${this._id}"]`);for(let s=0;s<e.length;s++)this._removeCdkDescribedByReferenceIds(e[s]),e[s].removeAttribute(wk);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,s){const l=this._document.createElement("div");Iv(l,this._id),l.textContent=e,s&&l.setAttribute("role",s),this._createMessagesContainer(),this._messagesContainer.appendChild(l),this._messageRegistry.set(Qx(e,s),{messageElement:l,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",s=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let m=0;m<s.length;m++)s[m].remove();const l=this._document.createElement("div");l.style.visibility="hidden",l.classList.add(e),l.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&l.setAttribute("platform","server"),this._document.body.appendChild(l),this._messagesContainer=l}_removeCdkDescribedByReferenceIds(e){const s=Tk(e,"aria-describedby").filter(l=>0!=l.indexOf(hV));e.setAttribute("aria-describedby",s.join(" "))}_addMessageReference(e,s){const l=this._messageRegistry.get(s);(function X7(r,t,e){const s=Tk(r,t);s.some(l=>l.trim()==e.trim())||(s.push(e.trim()),r.setAttribute(t,s.join(" ")))})(e,"aria-describedby",l.messageElement.id),e.setAttribute(wk,this._id),l.referenceCount++}_removeMessageReference(e,s){const l=this._messageRegistry.get(s);l.referenceCount--,function Lg(r,t,e){const l=Tk(r,t).filter(m=>m!=e.trim());l.length?r.setAttribute(t,l.join(" ")):r.removeAttribute(t)}(e,"aria-describedby",l.messageElement.id),e.removeAttribute(wk)}_isElementDescribedByMessage(e,s){const l=Tk(e,"aria-describedby"),m=this._messageRegistry.get(s),E=m&&m.messageElement.id;return!!E&&-1!=l.indexOf(E)}_canBeDescribed(e,s){if(!this._isElementNode(e))return!1;if(s&&"object"==typeof s)return!0;const l=null==s?"":`${s}`.trim(),m=e.getAttribute("aria-label");return!(!l||m&&m.trim()===l)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi),Xt(Dc))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Qx(r,t){return"string"==typeof r?`${t||""}/${r}`:r}function Iv(r,t){r.id||(r.id=`${hV}-${t}-${Vx++}`)}class Hx{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ht,this._typeaheadSubscription=U.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new ht,this.change=new ht,t instanceof A&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const l=e.toArray().indexOf(this._activeItem);l>-1&&l!==this._activeItemIndex&&(this._activeItemIndex=l)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(vk(e=>this._pressedLetters.push(e)),Fx(t),Pp(()=>this._pressedLetters.length>0),tt(()=>this._pressedLetters.join(""))).subscribe(e=>{const s=this._getItemsArray();for(let l=1;l<s.length+1;l++){const m=(this._activeItemIndex+l)%s.length,E=s[m];if(!this._skipPredicateFn(E)&&0===E.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(m);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,l=["altKey","ctrlKey","metaKey","shiftKey"].every(m=>!t[m]||this._allowedModifierKeys.indexOf(m)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&l){this.setNextItemActive();break}return;case 38:if(this._vertical&&l){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&l){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&l){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&l){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&l){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&l){const m=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(m>0?m:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&l){const m=this._activeItemIndex+this._pageUpAndDown.delta,E=this._getItemsArray().length;this._setActiveItemByIndex(m<E?m:E-1,-1);break}return;default:return void((l||xS(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),s="number"==typeof t?t:e.indexOf(t);this._activeItem=e[s]??null,this._activeItemIndex=s}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let s=1;s<=e.length;s++){const l=(this._activeItemIndex+t*s+e.length)%e.length;if(!this._skipPredicateFn(e[l]))return void this.setActiveItem(l)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const s=this._getItemsArray();if(s[t]){for(;this._skipPredicateFn(s[t]);)if(!s[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof A?this._items.toArray():this._items}}class pV extends Hx{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class Rk extends Hx{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function cu(r){return 0===r.buttons||0===r.offsetX&&0===r.offsetY}function Tv(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const zx=new Fn("cdk-input-modality-detector-options"),Yx={ignoreKeys:[18,17,224,91,16]},jy=lc({passive:!0,capture:!0});let zl=(()=>{class r{constructor(e,s,l,m){this._platform=e,this._mostRecentTarget=null,this._modality=new Ox(null),this._lastTouchMs=0,this._onKeydown=E=>{this._options?.ignoreKeys?.some(I=>I===E.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=My(E))},this._onMousedown=E=>{Date.now()-this._lastTouchMs<650||(this._modality.next(cu(E)?"keyboard":"mouse"),this._mostRecentTarget=My(E))},this._onTouchstart=E=>{Tv(E)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=My(E))},this._options={...Yx,...m},this.modalityDetected=this._modality.pipe(sV(1)),this.modalityChanged=this.modalityDetected.pipe(aV()),e.isBrowser&&s.runOutsideAngular(()=>{l.addEventListener("keydown",this._onKeydown,jy),l.addEventListener("mousedown",this._onMousedown,jy),l.addEventListener("touchstart",this._onTouchstart,jy)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,jy),document.removeEventListener("mousedown",this._onMousedown,jy),document.removeEventListener("touchstart",this._onTouchstart,jy))}}return r.\u0275fac=function(e){return new(e||r)(Xt(Dc),Xt(_i),Xt(xi),Xt(zx,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Yr=new Fn("liveAnnouncerElement",{providedIn:"root",factory:function n9(){return null}}),l1=new Fn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let d1=0,h1=(()=>{class r{constructor(e,s,l,m){this._ngZone=s,this._defaultOptions=m,this._document=l,this._liveElement=e||this._createLiveElement()}announce(e,...s){const l=this._defaultOptions;let m,E;return 1===s.length&&"number"==typeof s[0]?E=s[0]:[m,E]=s,this.clear(),clearTimeout(this._previousTimeout),m||(m=l&&l.politeness?l.politeness:"polite"),null==E&&l&&(E=l.duration),this._liveElement.setAttribute("aria-live",m),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(I=>this._currentResolve=I)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof E&&(this._previousTimeout=setTimeout(()=>this.clear(),E)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",s=this._document.getElementsByClassName(e),l=this._document.createElement("div");for(let m=0;m<s.length;m++)s[m].remove();return l.classList.add(e),l.classList.add("cdk-visually-hidden"),l.setAttribute("aria-atomic","true"),l.setAttribute("aria-live","polite"),l.id="cdk-live-announcer-"+d1++,this._document.body.appendChild(l),l}_exposeAnnouncerToModals(e){const s=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let l=0;l<s.length;l++){const m=s[l],E=m.getAttribute("aria-owns");E?-1===E.indexOf(e)&&m.setAttribute("aria-owns",E+" "+e):m.setAttribute("aria-owns",e)}}}return r.\u0275fac=function(e){return new(e||r)(Xt(Yr,8),Xt(_i),Xt(xi),Xt(l1,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const wv=new Fn("cdk-focus-monitor-default-options"),Ok=lc({passive:!0,capture:!0});let Dk=(()=>{class r{constructor(e,s,l,m,E){this._ngZone=e,this._platform=s,this._inputModalityDetector=l,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ht,this._rootNodeFocusAndBlurListener=I=>{for(let F=My(I);F;F=F.parentElement)"focus"===I.type?this._onFocus(I,F):this._onBlur(I,F)},this._document=m,this._detectionMode=E?.detectionMode||0}monitor(e,s=!1){const l=$f(e);if(!this._platform.isBrowser||1!==l.nodeType)return fl(null);const m=function bx(r){if(function Ex(){if(null==yx){const r=typeof document<"u"?document.head:null;yx=!(!r||!r.createShadowRoot&&!r.attachShadow)}return yx}()){const t=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(l)||this._getDocument(),E=this._elementInfo.get(l);if(E)return s&&(E.checkChildren=!0),E.subject;const I={checkChildren:s,subject:new ht,rootNode:m};return this._elementInfo.set(l,I),this._registerGlobalListeners(I),I.subject}stopMonitoring(e){const s=$f(e),l=this._elementInfo.get(s);l&&(l.subject.complete(),this._setClasses(s),this._elementInfo.delete(s),this._removeGlobalListeners(l))}focusVia(e,s,l){const m=$f(e);m===this._getDocument().activeElement?this._getClosestElementsInfo(m).forEach(([I,k])=>this._originChanged(I,s,k)):(this._setOrigin(s),"function"==typeof m.focus&&m.focus(l))}ngOnDestroy(){this._elementInfo.forEach((e,s)=>this.stopMonitoring(s))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,s){e.classList.toggle("cdk-focused",!!s),e.classList.toggle("cdk-touch-focused","touch"===s),e.classList.toggle("cdk-keyboard-focused","keyboard"===s),e.classList.toggle("cdk-mouse-focused","mouse"===s),e.classList.toggle("cdk-program-focused","program"===s)}_setOrigin(e,s=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&s,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,s){const l=this._elementInfo.get(s),m=My(e);!l||!l.checkChildren&&s!==m||this._originChanged(s,this._getFocusOrigin(m),l)}_onBlur(e,s){const l=this._elementInfo.get(s);!l||l.checkChildren&&e.relatedTarget instanceof Node&&s.contains(e.relatedTarget)||(this._setClasses(s),this._emitOrigin(l,null))}_emitOrigin(e,s){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(s))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const s=e.rootNode,l=this._rootNodeFocusListenerCount.get(s)||0;l||this._ngZone.runOutsideAngular(()=>{s.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ok),s.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ok)}),this._rootNodeFocusListenerCount.set(s,l+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(au(this._stopInputModalityDetector)).subscribe(m=>{this._setOrigin(m,!0)}))}_removeGlobalListeners(e){const s=e.rootNode;if(this._rootNodeFocusListenerCount.has(s)){const l=this._rootNodeFocusListenerCount.get(s);l>1?this._rootNodeFocusListenerCount.set(s,l-1):(s.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ok),s.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ok),this._rootNodeFocusListenerCount.delete(s))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,s,l){this._setClasses(e,s),this._emitOrigin(l,s),this._lastFocusOrigin=s}_getClosestElementsInfo(e){const s=[];return this._elementInfo.forEach((l,m)=>{(m===e||l.checkChildren&&m.contains(e))&&s.push([m,l])}),s}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:s,mostRecentModality:l}=this._inputModalityDetector;if("mouse"!==l||!s||s===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const m=e.labels;if(m)for(let E=0;E<m.length;E++)if(m[E].contains(s))return!0;return!1}}return r.\u0275fac=function(e){return new(e||r)(Xt(_i),Xt(Dc),Xt(zl),Xt(xi,8),Xt(wv,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const qx="cdk-high-contrast-black-on-white",kk="cdk-high-contrast-white-on-black",Jx="cdk-high-contrast-active";let Nk=(()=>{class r{constructor(e,s){this._platform=e,this._document=s,this._breakpointSubscription=ba(Ux).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const s=this._document.defaultView||window,l=s&&s.getComputedStyle?s.getComputedStyle(e):null,m=(l&&l.backgroundColor||"").replace(/ /g,"");switch(e.remove(),m){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Jx,qx,kk),this._hasCheckedHighContrastMode=!0;const s=this.getHighContrastMode();1===s?e.add(Jx,qx):2===s&&e.add(Jx,kk)}}}return r.\u0275fac=function(e){return new(e||r)(Xt(Dc),Xt(xi))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),AV=(()=>{class r{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return r.\u0275fac=function(e){return new(e||r)(Xt(Nk))},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[lV]}),r})();const Xx=new Fn("cdk-dir-doc",{providedIn:"root",factory:function Pk(){return ba(xi)}}),yV=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Qy=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new u,e){const l=e.documentElement?e.documentElement.dir:null;this.value=function $x(r){const t=r?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?yV.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||l||"ltr")}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(e){return new(e||r)(Xt(Xx,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Pu=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({}),r})();const xk=["text"];function FS(r,t){if(1&r&&so(0,"mat-pseudo-checkbox",5),2&r){const e=li();Nn("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function ml(r,t){if(1&r&&(Tn(0,"span",6),Ur(1),Ln()),2&r){const e=li();Cn(1),gh("(",e.group.label,")")}}const bV=[[["mat-icon"]],"*"],o9=["mat-icon","*"],IV=new Fn("mat-sanity-checks",{providedIn:"root",factory:function CV(){return!0}});let ms=(()=>{class r{constructor(e,s,l){this._sanityChecks=s,this._document=l,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!e1()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return r.\u0275fac=function(e){return new(e||r)(Xt(Nk),Xt(IV,8),Xt(xi))},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[Pu,Pu]}),r})();function p1(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=$s(t)}}}function Lk(r,t){return class extends r{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const s=e||this.defaultColor;s!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),s&&this._elementRef.nativeElement.classList.add(`mat-${s}`),this._color=s)}}}function Bk(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=$s(t)}}}function TV(r,t=0){return class extends r{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?xg(e):this.defaultTabIndex}}}function Zx(r){return class extends r{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,m=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);m!==t&&(this.errorState=m,this.stateChanges.next())}}}let eL=(()=>{class r{isErrorState(e,s){return!!(e&&e.invalid&&(e.touched||s&&s.submitted))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),tL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[ms,ms]}),r})();class RV{constructor(t,e,s,l=!1){this._renderer=t,this.element=e,this.config=s,this._animationForciblyDisabledThroughCss=l,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Fk={enterDuration:225,exitDuration:150},Hy=lc({passive:!0}),OV=["mousedown","touchstart"],ql=["mouseup","mouseleave","touchend","touchcancel"];class y9{constructor(t,e,s,l){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,l.isBrowser&&(this._containerElement=$f(s))}fadeInRipple(t,e,s={}){const l=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),m={...Fk,...s.animation};s.centered&&(t=l.left+l.width/2,e=l.top+l.height/2);const E=s.radius||function E9(r,t,e){const s=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),l=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(s*s+l*l)}(t,e,l),I=t-l.left,k=e-l.top,F=m.enterDuration,ee=document.createElement("div");ee.classList.add("mat-ripple-element"),ee.style.left=I-E+"px",ee.style.top=k-E+"px",ee.style.height=2*E+"px",ee.style.width=2*E+"px",null!=s.color&&(ee.style.backgroundColor=s.color),ee.style.transitionDuration=`${F}ms`,this._containerElement.appendChild(ee);const me=window.getComputedStyle(ee),Ke=me.transitionDuration,rt="none"===me.transitionProperty||"0s"===Ke||"0s, 0s"===Ke||0===l.width&&0===l.height,Ct=new RV(this,ee,s,rt);ee.style.transform="scale3d(1, 1, 1)",Ct.state=0,s.persistent||(this._mostRecentTransientRipple=Ct);let Jt=null;return!rt&&(F||m.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const tn=()=>this._finishRippleTransition(Ct),Vn=()=>this._destroyRipple(Ct);ee.addEventListener("transitionend",tn),ee.addEventListener("transitioncancel",Vn),Jt={onTransitionEnd:tn,onTransitionCancel:Vn}}),this._activeRipples.set(Ct,Jt),(rt||!F)&&this._finishRippleTransition(Ct),Ct}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,s={...Fk,...t.config.animation};e.style.transitionDuration=`${s.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!s.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=$f(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(OV))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ql),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:s}=t.config;t.state=1,!s&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=cu(t),s=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!s&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Tv(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let s=0;s<e.length;s++)this.fadeInRipple(e[s].clientX,e[s].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,Hy)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(OV.forEach(t=>{this._triggerElement.removeEventListener(t,this,Hy)}),this._pointerUpEventsRegistered&&ql.forEach(t=>{this._triggerElement.removeEventListener(t,this,Hy)}))}}const b9=new Fn("mat-ripple-global-options");let VS=(()=>{class r{constructor(e,s,l,m,E){this._elementRef=e,this._animationMode=E,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=m||{},this._rippleRenderer=new y9(this,s,e,l)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,s=0,l){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,s,{...this.rippleConfig,...l}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(_i),gt(Dc),gt(b9,8),gt(Ip,8))},r.\u0275dir=gr({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,s){2&e&&Fr("mat-ripple-unbounded",s.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),r})(),gl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[ms,ms]}),r})(),DV=(()=>{class r{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return r.\u0275fac=function(e){return new(e||r)(gt(Ip,8))},r.\u0275cmp=Sa({type:r,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,s){2&e&&Fr("mat-pseudo-checkbox-indeterminate","indeterminate"===s.state)("mat-pseudo-checkbox-checked","checked"===s.state)("mat-pseudo-checkbox-disabled",s.disabled)("_mat-animation-noopable","NoopAnimations"===s._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,s){},styles:['.mat-pseudo-checkbox{border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}.mat-pseudo-checkbox-checked::after{top:2.7px;width:10px;height:4px}'],encapsulation:2,changeDetection:0}),r})(),Gy=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[ms]}),r})();const Wy=new Fn("MAT_OPTION_PARENT_COMPONENT"),Uk=new Fn("MatOptgroup");let Rv=0;class kV{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let NV=(()=>{class r{constructor(e,s,l,m){this._element=e,this._changeDetectorRef=s,this._parent=l,this.group=m,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Rv++,this.onSelectionChange=new u,this._stateChanges=new ht}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=$s(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,s){const l=this._getHostElement();"function"==typeof l.focus&&l.focus(s)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!xS(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new kV(this,e))}}return r.\u0275fac=function(e){YC()},r.\u0275dir=gr({type:r,viewQuery:function(e,s){if(1&e&&ut(xk,7),2&e){let l;vt(l=$e())&&(s._text=l.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),r})(),rL=(()=>{class r extends NV{constructor(e,s,l,m){super(e,s,l,m)}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(Vf),gt(Wy,8),gt(Uk,8))},r.\u0275cmp=Sa({type:r,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mat-mdc-focus-indicator","mdc-list-item"],hostVars:12,hostBindings:function(e,s){1&e&&ao("click",function(){return s._selectViaInteraction()})("keydown",function(m){return s._handleKeydown(m)}),2&e&&(Z_("id",s.id),ro("tabindex",s._getTabIndex())("aria-selected",s._getAriaSelected())("aria-disabled",s.disabled.toString()),Fr("mdc-list-item--selected",s.selected)("mat-mdc-option-multiple",s.multiple)("mat-mdc-option-active",s.active)("mdc-list-item--disabled",s.disabled))},exportAs:["matOption"],features:[Br],ngContentSelectors:o9,decls:7,vars:4,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,s){1&e&&(Ys(bV),pr(0,FS,1,2,"mat-pseudo-checkbox",0),Co(1),Tn(2,"span",1,2),Co(4,1),Ln(),pr(5,ml,2,1,"span",3),so(6,"div",4)),2&e&&(Nn("ngIf",s.multiple),Cn(5),Nn("ngIf",s.group&&s.group._inert),Cn(1),Nn("matRippleTrigger",s._getHostElement())("matRippleDisabled",s.disabled||s.disableRipple))},dependencies:[VS,gS,DV],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox{margin-right:0;margin-left:16px}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active::before{content:""}'],encapsulation:2,changeDetection:0}),r})(),Vk=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[gl,Es,ms,Gy]}),r})();const T9=["mat-button",""],Bg=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],oL=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],dc=["mat-fab",""],xo=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Ov=Lk(p1(Bk(class{constructor(r){this._elementRef=r}})));let HS=(()=>{class r extends Ov{constructor(e,s,l,m){super(e),this._platform=s,this._ngZone=l,this._animationMode=m,this._focusMonitor=ba(Dk),this._isFab=!1;const E=e.nativeElement.classList;for(const I of xo)this._hasHostAttributes(I.selector)&&I.mdcClasses.forEach(k=>{E.add(k)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",s){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,s):this._elementRef.nativeElement.focus(s)}_hasHostAttributes(...e){return e.some(s=>this._elementRef.nativeElement.hasAttribute(s))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return r.\u0275fac=function(e){YC()},r.\u0275dir=gr({type:r,viewQuery:function(e,s){if(1&e&&ut(VS,5),2&e){let l;vt(l=$e())&&(s.ripple=l.first)}},features:[Br]}),r})(),Ga=(()=>{class r extends HS{constructor(e,s,l,m){super(e,s,l,m)}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(Dc),gt(_i),gt(Ip,8))},r.\u0275cmp=Sa({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,s){2&e&&(ro("disabled",s.disabled||null),Fr("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Br],attrs:T9,ngContentSelectors:oL,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,s){1&e&&(Ys(Bg),so(0,"span",0),Co(1),Tn(2,"span",1),Co(3,1),Ln(),Co(4,2),so(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(Fr("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab),Cn(6),Nn("matRippleDisabled",s._isRippleDisabled())("matRippleTrigger",s._elementRef.nativeElement))},dependencies:[VS],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),r})();const m1=new Fn("mat-mdc-fab-default-options",{providedIn:"root",factory:jk});function jk(){return{color:"accent"}}const g1=jk();let PV=(()=>{class r extends HS{constructor(e,s,l,m,E){super(e,s,l,m),this._options=E,this._isFab=!0,this._options=this._options||g1,this.color=this.defaultColor=this._options.color||g1.color}get extended(){return this._extended}set extended(e){this._extended=$s(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(Dc),gt(_i),gt(Ip,8),gt(m1,8))},r.\u0275cmp=Sa({type:r,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(e,s){2&e&&(ro("disabled",s.disabled||null),Fr("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0)("mdc-fab--extended",s.extended)("mat-mdc-extended-fab",s.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[Br],attrs:dc,ngContentSelectors:oL,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,s){1&e&&(Ys(Bg),so(0,"span",0),Co(1),Tn(2,"span",1),Co(3,1),Ln(),Co(4,2),so(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(Fr("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab),Cn(6),Nn("matRippleDisabled",s._isRippleDisabled())("matRippleTrigger",s._elementRef.nativeElement))},dependencies:[VS],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),r})(),cL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[ms,gl,ms]}),r})();class MV{}class M9{}const Fg="*";function Dv(r,t){return{type:7,name:r,definitions:t,options:{}}}function kv(r,t=null){return{type:4,styles:t,timings:r}}function xV(r,t=null){return{type:2,steps:r,options:t}}function _l(r){return{type:6,styles:r,offset:null}}function xp(r,t,e){return{type:0,name:r,styles:t,options:e}}function Ug(r,t,e=null){return{type:1,expr:r,animation:t,options:e}}function L9(r=null){return{type:9,options:r}}function B9(r,t,e=null){return{type:11,selector:r,animation:t,options:e}}function LV(r){Promise.resolve().then(r)}class _1{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){LV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class BV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,s=0,l=0;const m=this.players.length;0==m?LV(()=>this._onFinish()):this.players.forEach(E=>{E.onDone(()=>{++e==m&&this._onFinish()}),E.onDestroy(()=>{++s==m&&this._onDestroy()}),E.onStart(()=>{++l==m&&this._onStart()})}),this.totalTime=this.players.reduce((E,I)=>Math.max(E,I.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(s=>{const l=s.totalTime?Math.min(1,e/s.totalTime):1;s.setPosition(l)})}getPosition(){const t=this.players.reduce((e,s)=>null===e||s.totalTime>e.totalTime?s:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class v1{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class lL extends v1{constructor(t,e,s,l,m){super(),this.component=t,this.viewContainerRef=e,this.injector=s,this.componentFactoryResolver=l,this.projectableNodes=m}}class A1 extends v1{constructor(t,e,s,l){super(),this.templateRef=t,this.viewContainerRef=e,this.context=s,this.injector=l}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class FV extends v1{constructor(t){super(),this.element=t instanceof Pi?t.nativeElement:t}}class Qk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof lL?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof A1?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof FV?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class KS extends Qk{constructor(t,e,s,l,m){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=s,this._defaultInjector=l,this.attachDomPortal=E=>{const I=E.element,k=this._document.createComment("dom-portal");I.parentNode.insertBefore(k,I),this.outletElement.appendChild(I),this._attachedPortal=E,super.setDisposeFn(()=>{k.parentNode&&k.parentNode.replaceChild(I,k)})},this._document=m}attachComponentPortal(t){const s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let l;return t.viewContainerRef?(l=t.viewContainerRef.createComponent(s,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>l.destroy())):(l=s.create(t.injector||this._defaultInjector||Ec.NULL),this._appRef.attachView(l.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(l.hostView),l.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(l)),this._attachedPortal=t,l}attachTemplatePortal(t){let e=t.viewContainerRef,s=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return s.rootNodes.forEach(l=>this.outletElement.appendChild(l)),s.detectChanges(),this.setDisposeFn(()=>{let l=e.indexOf(s);-1!==l&&e.remove(l)}),this._attachedPortal=t,s}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Vg=(()=>{class r extends Qk{constructor(e,s,l){super(),this._componentFactoryResolver=e,this._viewContainerRef=s,this._isInitialized=!1,this.attached=new u,this.attachDomPortal=m=>{const E=m.element,I=this._document.createComment("dom-portal");m.setAttachedHost(this),E.parentNode.insertBefore(I,E),this._getRootNode().appendChild(E),this._attachedPortal=m,super.setDisposeFn(()=>{I.parentNode&&I.parentNode.replaceChild(E,I)})},this._document=l}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const s=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,m=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),E=s.createComponent(m,s.length,e.injector||s.injector,e.projectableNodes||void 0);return s!==this._viewContainerRef&&this._getRootNode().appendChild(E.hostView.rootNodes[0]),super.setDisposeFn(()=>E.destroy()),this._attachedPortal=e,this._attachedRef=E,this.attached.emit(E),E}attachTemplatePortal(e){e.setAttachedHost(this);const s=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return r.\u0275fac=function(e){return new(e||r)(gt(k_),gt(H),gt(xi))},r.\u0275dir=gr({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Br]}),r})(),VV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({}),r})();const jV=["addListener","removeListener"],Q9=["addEventListener","removeEventListener"],H9=["on","off"];function dL(r,t,e,s){if(L(e)&&(s=e,e=void 0),s)return dL(r,t,e).pipe(VD(s));const[l,m]=function Wk(r){return L(r.addEventListener)&&L(r.removeEventListener)}(r)?Q9.map(E=>I=>r[E](t,I,e)):function Gk(r){return L(r.addListener)&&L(r.removeListener)}(r)?jV.map(Hk(r,t)):function hL(r){return L(r.on)&&L(r.off)}(r)?H9.map(Hk(r,t)):[];if(!l&&fo(r))return nr(E=>dL(E,t,e))(gn(r));if(!l)throw new TypeError("Invalid event target");return new ze(E=>{const I=(...k)=>E.next(1<k.length?k:k[0]);return l(I),()=>m(I)})}function Hk(r,t){return e=>s=>r[e](t,s)}const Jl={schedule(r){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:s}=Jl;s&&(t=s.requestAnimationFrame,e=s.cancelAnimationFrame);const l=t(m=>{e=void 0,r(m)});return new U(()=>e?.(l))},requestAnimationFrame(...r){const{delegate:t}=Jl;return(t?.requestAnimationFrame||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){const{delegate:t}=Jl;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...r)},delegate:void 0};new class HV extends Lx{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let s,l=-1;t=t||e.shift();const m=e.length;do{if(s=t.execute(t.state,t.delay))break}while(++l<m&&(t=e.shift()));if(this._active=!1,s){for(;++l<m&&(t=e.shift());)t.unsubscribe();throw s}}}(class QV extends Mx{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=Jl.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);0===t.actions.length&&(Jl.cancelAnimationFrame(e),t._scheduled=void 0)}});let y1,W9=1;const E1={};function Kk(r){return r in E1&&(delete E1[r],!0)}const K9={setImmediate(r){const t=W9++;return E1[t]=!0,y1||(y1=Promise.resolve()),y1.then(()=>Kk(t)&&r()),t},clearImmediate(r){Kk(r)}},{setImmediate:z9,clearImmediate:Y9}=K9,b1={setImmediate(...r){const{delegate:t}=b1;return(t?.setImmediate||z9)(...r)},clearImmediate(r){const{delegate:t}=b1;return(t?.clearImmediate||Y9)(r)},delegate:void 0},zk=new class q9 extends Lx{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let s,l=-1;t=t||e.shift();const m=e.length;do{if(s=t.execute(t.state,t.delay))break}while(++l<m&&(t=e.shift()));if(this._active=!1,s){for(;++l<m&&(t=e.shift());)t.unsubscribe();throw s}}}(class Qd extends Mx{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=b1.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);0===t.actions.length&&(b1.clearImmediate(e),t._scheduled=void 0)}});function WV(r=0,t,e=yk){let s=-1;return null!=t&&(Bv(t)?e=t:s=t),new ze(l=>{let m=function zS(r){return r instanceof Date&&!isNaN(r)}(r)?+r-e.now():r;m<0&&(m=0);let E=0;return e.schedule(function(){l.closed||(l.next(E++),0<=s?this.schedule(void 0,s):l.complete())},m)})}function KV(r,t=yk){return function J9(r){return Ye((t,e)=>{let s=!1,l=null,m=null,E=!1;const I=()=>{if(m?.unsubscribe(),m=null,s){s=!1;const F=l;l=null,e.next(F)}E&&e.complete()},k=()=>{m=null,E&&e.complete()};t.subscribe(new Re(e,F=>{s=!0,l=F,m||gn(r(F)).subscribe(m=new Re(e,I,k))},()=>{E=!0,(!s||!m||m.closed)&&e.complete()}))})}(()=>WV(r,t))}let S1=(()=>{class r{constructor(e,s,l){this._ngZone=e,this._platform=s,this._scrolled=new ht,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=l}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const s=this.scrollContainers.get(e);s&&(s.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ze(s=>{this._globalSubscription||this._addGlobalListener();const l=e>0?this._scrolled.pipe(KV(e)).subscribe(s):this._scrolled.subscribe(s);return this._scrolledCount++,()=>{l.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):fl()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,s)=>this.deregister(s)),this._scrolled.complete()}ancestorScrolled(e,s){const l=this.getAncestorScrollContainers(e);return this.scrolled(s).pipe(Pp(m=>!m||l.indexOf(m)>-1))}getAncestorScrollContainers(e){const s=[];return this.scrollContainers.forEach((l,m)=>{this._scrollableContainsElement(m,e)&&s.push(m)}),s}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,s){let l=$f(s),m=e.getElementRef().nativeElement;do{if(l==m)return!0}while(l=l.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>dL(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(e){return new(e||r)(Xt(_i),Xt(Dc),Xt(xi,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),fL=(()=>{class r{constructor(e,s,l){this._platform=e,this._change=new ht,this._changeListener=m=>{this._change.next(m)},this._document=l,s.runOutsideAngular(()=>{if(e.isBrowser){const m=this._getWindow();m.addEventListener("resize",this._changeListener),m.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:s,height:l}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+l,right:e.left+s,height:l,width:s}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,s=this._getWindow(),l=e.documentElement,m=l.getBoundingClientRect();return{top:-m.top||e.body.scrollTop||s.scrollY||l.scrollTop||0,left:-m.left||e.body.scrollLeft||s.scrollX||l.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(KV(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(e){return new(e||r)(Xt(Dc),Xt(_i),Xt(xi,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),C1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({}),r})(),JV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[Pu,C1,Pu,C1]}),r})();const mL=Py();class iQ{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ja(-this._previousScrollPosition.left),t.style.top=ja(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,s=t.style,l=this._document.body.style,m=s.scrollBehavior||"",E=l.scrollBehavior||"";this._isEnabled=!1,s.left=this._previousHTMLStyles.left,s.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),mL&&(s.scrollBehavior=l.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),mL&&(s.scrollBehavior=m,l.scrollBehavior=E)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,s=this._viewportRuler.getViewportSize();return e.scrollHeight>s.height||e.scrollWidth>s.width}}class XV{constructor(t,e,s,l){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=s,this._config=l,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class $V{enable(){}disable(){}attach(){}}function gL(r,t){return t.some(e=>r.bottom<e.top||r.top>e.bottom||r.right<e.left||r.left>e.right)}function ZV(r,t){return t.some(e=>r.top<e.top||r.bottom>e.bottom||r.left<e.left||r.right>e.right)}class e4{constructor(t,e,s,l){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=s,this._config=l,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:s,height:l}=this._viewportRuler.getViewportSize();gL(e,[{width:s,height:l,bottom:l,right:s,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let _L=(()=>{class r{constructor(e,s,l,m){this._scrollDispatcher=e,this._viewportRuler=s,this._ngZone=l,this.noop=()=>new $V,this.close=E=>new XV(this._scrollDispatcher,this._ngZone,this._viewportRuler,E),this.block=()=>new iQ(this._viewportRuler,this._document),this.reposition=E=>new e4(this._scrollDispatcher,this._viewportRuler,this._ngZone,E),this._document=m}}return r.\u0275fac=function(e){return new(e||r)(Xt(S1),Xt(fL),Xt(_i),Xt(xi))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class I1{constructor(t){if(this.scrollStrategy=new $V,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const s of e)void 0!==t[s]&&(this[s]=t[s])}}}class oQ{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let Jk=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const s=this._attachedOverlays.indexOf(e);s>-1&&this._attachedOverlays.splice(s,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Lh=(()=>{class r extends Jk{constructor(e,s){super(e),this._ngZone=s,this._keydownListener=l=>{const m=this._attachedOverlays;for(let E=m.length-1;E>-1;E--)if(m[E]._keydownEvents.observers.length>0){const I=m[E]._keydownEvents;this._ngZone?this._ngZone.run(()=>I.next(l)):I.next(l);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi),Xt(_i,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),aQ=(()=>{class r extends Jk{constructor(e,s,l){super(e),this._platform=s,this._ngZone=l,this._cursorStyleIsSet=!1,this._pointerDownListener=m=>{this._pointerDownEventTarget=My(m)},this._clickListener=m=>{const E=My(m),I="click"===m.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:E;this._pointerDownEventTarget=null;const k=this._attachedOverlays.slice();for(let F=k.length-1;F>-1;F--){const ee=k[F];if(ee._outsidePointerEvents.observers.length<1||!ee.hasAttached())continue;if(ee.overlayElement.contains(E)||ee.overlayElement.contains(I))break;const me=ee._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>me.next(m)):me.next(m)}}}add(e){if(super.add(e),!this._isAttached){const s=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(s)):this._addEventListeners(s),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=s.style.cursor,s.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi),Xt(Dc),Xt(_i,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),t4=(()=>{class r{constructor(e,s){this._platform=s,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||e1()){const l=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let m=0;m<l.length;m++)l[m].remove()}const s=this._document.createElement("div");s.classList.add(e),e1()?s.setAttribute("platform","test"):this._platform.isBrowser||s.setAttribute("platform","server"),this._document.body.appendChild(s),this._containerElement=s}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi),Xt(Dc))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class AL{constructor(t,e,s,l,m,E,I,k,F,ee=!1){this._portalOutlet=t,this._host=e,this._pane=s,this._config=l,this._ngZone=m,this._keyboardDispatcher=E,this._document=I,this._location=k,this._outsideClickDispatcher=F,this._animationsDisabled=ee,this._backdropElement=null,this._backdropClick=new ht,this._attachments=new ht,this._detachments=new ht,this._locationChanges=U.EMPTY,this._backdropClickHandler=me=>this._backdropClick.next(me),this._backdropTransitionendHandler=me=>{this._disposeBackdrop(me.target)},this._keydownEvents=new ht,this._outsidePointerEvents=new ht,l.scrollStrategy&&(this._scrollStrategy=l.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=l.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(yl(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=ja(this._config.width),t.height=ja(this._config.height),t.minWidth=ja(this._config.minWidth),t.minHeight=ja(this._config.minHeight),t.maxWidth=ja(this._config.maxWidth),t.maxHeight=ja(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,s){const l=Ek(e||[]).filter(m=>!!m);l.length&&(s?t.classList.add(...l):t.classList.remove(...l))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(au(Ro(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const n4="cdk-overlay-connected-position-bounding-box",yL=/([A-Za-z%]+)$/;class r4{constructor(t,e,s,l,m){this._viewportRuler=e,this._document=s,this._platform=l,this._overlayContainer=m,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ht,this._resizeSubscription=U.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(n4),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,s=this._viewportRect,l=this._containerRect,m=[];let E;for(let I of this._preferredPositions){let k=this._getOriginPoint(t,l,I),F=this._getOverlayPoint(k,e,I),ee=this._getOverlayFit(F,e,s,I);if(ee.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(I,k);this._canFitWithFlexibleDimensions(ee,F,s)?m.push({position:I,origin:k,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(k,I)}):(!E||E.overlayFit.visibleArea<ee.visibleArea)&&(E={overlayFit:ee,overlayPoint:F,originPoint:k,position:I,overlayRect:e})}if(m.length){let I=null,k=-1;for(const F of m){const ee=F.boundingBoxRect.width*F.boundingBoxRect.height*(F.position.weight||1);ee>k&&(k=ee,I=F)}return this._isPushed=!1,void this._applyPosition(I.position,I.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(E.position,E.originPoint);this._applyPosition(E.position,E.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&kc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(n4),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,s){let l,m;if("center"==s.originX)l=t.left+t.width/2;else{const E=this._isRtl()?t.right:t.left,I=this._isRtl()?t.left:t.right;l="start"==s.originX?E:I}return e.left<0&&(l-=e.left),m="center"==s.originY?t.top+t.height/2:"top"==s.originY?t.top:t.bottom,e.top<0&&(m-=e.top),{x:l,y:m}}_getOverlayPoint(t,e,s){let l,m;return l="center"==s.overlayX?-e.width/2:"start"===s.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,m="center"==s.overlayY?-e.height/2:"top"==s.overlayY?0:-e.height,{x:t.x+l,y:t.y+m}}_getOverlayFit(t,e,s,l){const m=T1(e);let{x:E,y:I}=t,k=this._getOffset(l,"x"),F=this._getOffset(l,"y");k&&(E+=k),F&&(I+=F);let Le=0-I,Ke=I+m.height-s.height,rt=this._subtractOverflows(m.width,0-E,E+m.width-s.width),Ct=this._subtractOverflows(m.height,Le,Ke),Jt=rt*Ct;return{visibleArea:Jt,isCompletelyWithinViewport:m.width*m.height===Jt,fitsInViewportVertically:Ct===m.height,fitsInViewportHorizontally:rt==m.width}}_canFitWithFlexibleDimensions(t,e,s){if(this._hasFlexibleDimensions){const l=s.bottom-e.y,m=s.right-e.x,E=i4(this._overlayRef.getConfig().minHeight),I=i4(this._overlayRef.getConfig().minWidth),F=t.fitsInViewportHorizontally||null!=I&&I<=m;return(t.fitsInViewportVertically||null!=E&&E<=l)&&F}return!1}_pushOverlayOnScreen(t,e,s){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const l=T1(e),m=this._viewportRect,E=Math.max(t.x+l.width-m.width,0),I=Math.max(t.y+l.height-m.height,0),k=Math.max(m.top-s.top-t.y,0),F=Math.max(m.left-s.left-t.x,0);let ee=0,me=0;return ee=l.width<=m.width?F||-E:t.x<this._viewportMargin?m.left-s.left-t.x:0,me=l.height<=m.height?k||-I:t.y<this._viewportMargin?m.top-s.top-t.y:0,this._previousPushAmount={x:ee,y:me},{x:t.x+ee,y:t.y+me}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const s=this._getScrollVisibility(),l=new oQ(t,s);this._positionChanges.next(l)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let s,l=t.overlayY;s="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let m=0;m<e.length;m++)e[m].style.transformOrigin=`${s} ${l}`}_calculateBoundingBoxRect(t,e){const s=this._viewportRect,l=this._isRtl();let m,E,I,ee,me,Le;if("top"===e.overlayY)E=t.y,m=s.height-E+this._viewportMargin;else if("bottom"===e.overlayY)I=s.height-t.y+2*this._viewportMargin,m=s.height-I+this._viewportMargin;else{const Ke=Math.min(s.bottom-t.y+s.top,t.y),rt=this._lastBoundingBoxSize.height;m=2*Ke,E=t.y-Ke,m>rt&&!this._isInitialRender&&!this._growAfterOpen&&(E=t.y-rt/2)}if("end"===e.overlayX&&!l||"start"===e.overlayX&&l)Le=s.width-t.x+this._viewportMargin,ee=t.x-this._viewportMargin;else if("start"===e.overlayX&&!l||"end"===e.overlayX&&l)me=t.x,ee=s.right-t.x;else{const Ke=Math.min(s.right-t.x+s.left,t.x),rt=this._lastBoundingBoxSize.width;ee=2*Ke,me=t.x-Ke,ee>rt&&!this._isInitialRender&&!this._growAfterOpen&&(me=t.x-rt/2)}return{top:E,left:me,bottom:I,right:Le,width:ee,height:m}}_setBoundingBoxStyles(t,e){const s=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(s.height=Math.min(s.height,this._lastBoundingBoxSize.height),s.width=Math.min(s.width,this._lastBoundingBoxSize.width));const l={};if(this._hasExactPosition())l.top=l.left="0",l.bottom=l.right=l.maxHeight=l.maxWidth="",l.width=l.height="100%";else{const m=this._overlayRef.getConfig().maxHeight,E=this._overlayRef.getConfig().maxWidth;l.height=ja(s.height),l.top=ja(s.top),l.bottom=ja(s.bottom),l.width=ja(s.width),l.left=ja(s.left),l.right=ja(s.right),l.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",l.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",m&&(l.maxHeight=ja(m)),E&&(l.maxWidth=ja(E))}this._lastBoundingBoxSize=s,kc(this._boundingBox.style,l)}_resetBoundingBoxStyles(){kc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){kc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const s={},l=this._hasExactPosition(),m=this._hasFlexibleDimensions,E=this._overlayRef.getConfig();if(l){const ee=this._viewportRuler.getViewportScrollPosition();kc(s,this._getExactOverlayY(e,t,ee)),kc(s,this._getExactOverlayX(e,t,ee))}else s.position="static";let I="",k=this._getOffset(e,"x"),F=this._getOffset(e,"y");k&&(I+=`translateX(${k}px) `),F&&(I+=`translateY(${F}px)`),s.transform=I.trim(),E.maxHeight&&(l?s.maxHeight=ja(E.maxHeight):m&&(s.maxHeight="")),E.maxWidth&&(l?s.maxWidth=ja(E.maxWidth):m&&(s.maxWidth="")),kc(this._pane.style,s)}_getExactOverlayY(t,e,s){let l={top:"",bottom:""},m=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(m=this._pushOverlayOnScreen(m,this._overlayRect,s)),"bottom"===t.overlayY?l.bottom=this._document.documentElement.clientHeight-(m.y+this._overlayRect.height)+"px":l.top=ja(m.y),l}_getExactOverlayX(t,e,s){let E,l={left:"",right:""},m=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(m=this._pushOverlayOnScreen(m,this._overlayRect,s)),E=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===E?l.right=this._document.documentElement.clientWidth-(m.x+this._overlayRect.width)+"px":l.left=ja(m.x),l}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),s=this._scrollables.map(l=>l.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ZV(t,s),isOriginOutsideView:gL(t,s),isOverlayClipped:ZV(e,s),isOverlayOutsideView:gL(e,s)}}_subtractOverflows(t,...e){return e.reduce((s,l)=>s-Math.max(l,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,s=this._viewportRuler.getViewportScrollPosition();return{top:s.top+this._viewportMargin,left:s.left+this._viewportMargin,right:s.left+t-this._viewportMargin,bottom:s.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Ek(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Pi)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,s=t.height||0;return{top:t.y,bottom:t.y+s,left:t.x,right:t.x+e,height:s,width:e}}}function kc(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function i4(r){if("number"!=typeof r&&null!=r){const[t,e]=r.split(yL);return e&&"px"!==e?null:parseFloat(t)}return r||null}function T1(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}const Xk="cdk-global-overlay-wrapper";class qS{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Xk),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,s=this._overlayRef.getConfig(),{width:l,height:m,maxWidth:E,maxHeight:I}=s,k=!("100%"!==l&&"100vw"!==l||E&&"100%"!==E&&"100vw"!==E),F=!("100%"!==m&&"100vh"!==m||I&&"100%"!==I&&"100vh"!==I),ee=this._xPosition,me=this._xOffset,Le="rtl"===this._overlayRef.getConfig().direction;let Ke="",rt="",Ct="";k?Ct="flex-start":"center"===ee?(Ct="center",Le?rt=me:Ke=me):Le?"left"===ee||"end"===ee?(Ct="flex-end",Ke=me):("right"===ee||"start"===ee)&&(Ct="flex-start",rt=me):"left"===ee||"start"===ee?(Ct="flex-start",Ke=me):("right"===ee||"end"===ee)&&(Ct="flex-end",rt=me),t.position=this._cssPosition,t.marginLeft=k?"0":Ke,t.marginTop=F?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=k?"0":rt,e.justifyContent=Ct,e.alignItems=F?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,s=e.style;e.classList.remove(Xk),s.justifyContent=s.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Lp=(()=>{class r{constructor(e,s,l,m){this._viewportRuler=e,this._document=s,this._platform=l,this._overlayContainer=m}global(){return new qS}flexibleConnectedTo(e){return new r4(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(e){return new(e||r)(Xt(fL),Xt(xi),Xt(Dc),Xt(t4))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),cQ=0,Nv=(()=>{class r{constructor(e,s,l,m,E,I,k,F,ee,me,Le,Ke){this.scrollStrategies=e,this._overlayContainer=s,this._componentFactoryResolver=l,this._positionBuilder=m,this._keyboardDispatcher=E,this._injector=I,this._ngZone=k,this._document=F,this._directionality=ee,this._location=me,this._outsideClickDispatcher=Le,this._animationsModuleType=Ke}create(e){const s=this._createHostElement(),l=this._createPaneElement(s),m=this._createPortalOutlet(l),E=new I1(e);return E.direction=E.direction||this._directionality.value,new AL(m,s,l,E,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const s=this._document.createElement("div");return s.id="cdk-overlay-"+cQ++,s.classList.add("cdk-overlay-pane"),e.appendChild(s),s}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(yy)),new KS(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(e){return new(e||r)(Xt(_L),Xt(t4),Xt(k_),Xt(Lp),Xt(Lh),Xt(Ec),Xt(_i),Xt(xi),Xt(Qy),Xt(jF),Xt(aQ),Xt(Ip,8))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const jg=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],s4=new Fn("cdk-connected-overlay-scroll-strategy");let $k=(()=>{class r{constructor(e){this.elementRef=e}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi))},r.\u0275dir=gr({type:r,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),r})(),EL=(()=>{class r{constructor(e,s,l,m,E){this._overlay=e,this._dir=E,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=U.EMPTY,this._attachSubscription=U.EMPTY,this._detachSubscription=U.EMPTY,this._positionSubscription=U.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new u,this.positionChange=new u,this.attach=new u,this.detach=new u,this.overlayKeydown=new u,this.overlayOutsideClick=new u,this._templatePortal=new A1(s,l),this._scrollStrategyFactory=m,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=$s(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=$s(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=$s(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=$s(e)}get push(){return this._push}set push(e){this._push=$s(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=jg);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(s=>{this.overlayKeydown.next(s),27===s.keyCode&&!this.disableClose&&!xS(s)&&(s.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(s=>{this.overlayOutsideClick.next(s)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),s=new I1({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(s.width=this.width),(this.height||0===this.height)&&(s.height=this.height),(this.minWidth||0===this.minWidth)&&(s.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(s.minHeight=this.minHeight),this.backdropClass&&(s.backdropClass=this.backdropClass),this.panelClass&&(s.panelClass=this.panelClass),s}_updatePositionStrategy(e){const s=this.positions.map(l=>({originX:l.originX,originY:l.originY,overlayX:l.overlayX,overlayY:l.overlayY,offsetX:l.offsetX||this.offsetX,offsetY:l.offsetY||this.offsetY,panelClass:l.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(s).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof $k?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function rQ(r,t=!1){return Ye((e,s)=>{let l=0;e.subscribe(new Re(s,m=>{const E=r(m,l++);(E||t)&&s.next(m),!E&&s.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(gt(Nv),gt(S),gt(H),gt(s4),gt(Qy,8))},r.\u0275dir=gr({type:r,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Ya]}),r})();const Zk={provide:s4,deps:[Nv],useFactory:function uQ(r){return()=>r.scrollStrategies.reposition()}};let bL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({providers:[Nv,Zk],imports:[Pu,VV,JV,JV]}),r})();function w1(r,t){if(1&r){const e=tl();Tn(0,"div",2)(1,"button",3),ao("click",function(){return Ta(e),wa(li().action())}),Ur(2),Ln()()}if(2&r){const e=li();Cn(2),gh(" ",e.data.action," ")}}const SL=["label"];function e2(r,t){}const lQ=Math.pow(2,31)-1;class t2{constructor(t,e){this._overlayRef=e,this._afterDismissed=new ht,this._afterOpened=new ht,this._onAction=new ht,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,lQ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const Hd=new Fn("MatSnackBarData");class Xl{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let R1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=gr({type:r,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),r})(),dQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=gr({type:r,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),r})(),hQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=gr({type:r,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),r})(),JS=(()=>{class r{constructor(e,s){this.snackBarRef=e,this.data=s}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return r.\u0275fac=function(e){return new(e||r)(gt(t2),gt(Hd))},r.\u0275cmp=Sa({type:r,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,s){1&e&&(Tn(0,"div",0),Ur(1),Ln(),pr(2,w1,3,1,"div",1)),2&e&&(Cn(1),gh(" ",s.data.message,"\n"),Cn(1),Nn("ngIf",s.hasAction))},dependencies:[gS,Ga,R1,dQ,hQ],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),r})();const a4={snackBarState:Dv("state",[xp("void, hidden",_l({transform:"scale(0.8)",opacity:0})),xp("visible",_l({transform:"scale(1)",opacity:1})),Ug("* => visible",kv("150ms cubic-bezier(0, 0, 0.2, 1)")),Ug("* => void, * => hidden",kv("75ms cubic-bezier(0.4, 0.0, 1, 1)",_l({opacity:0})))])};let pQ=(()=>{class r extends Qk{constructor(e,s,l,m,E){super(),this._ngZone=e,this._elementRef=s,this._changeDetectorRef=l,this._platform=m,this.snackBarConfig=E,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ht,this._onExit=new ht,this._onEnter=new ht,this._animationState="void",this.attachDomPortal=I=>{this._assertNotAttached();const k=this._portalOutlet.attachDomPortal(I);return this._afterPortalAttached(),k},this._live="assertive"!==E.politeness||E.announcementMessage?"off"===E.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const s=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),s}attachTemplatePortal(e){this._assertNotAttached();const s=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),s}onAnimationEnd(e){const{fromState:s,toState:l}=e;if(("void"===l&&"void"!==s||"hidden"===l)&&this._completeExit(),"visible"===l){const m=this._onEnter;this._ngZone.run(()=>{m.next(),m.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(yl(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,s=this.snackBarConfig.panelClass;s&&(Array.isArray(s)?s.forEach(l=>e.classList.add(l)):e.classList.add(s))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),s=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&s){let l=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(l=document.activeElement),e.removeAttribute("aria-hidden"),s.appendChild(e),l?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return r.\u0275fac=function(e){return new(e||r)(gt(_i),gt(Pi),gt(Vf),gt(Dc),gt(Xl))},r.\u0275dir=gr({type:r,viewQuery:function(e,s){if(1&e&&ut(Vg,7),2&e){let l;vt(l=$e())&&(s._portalOutlet=l.first)}},features:[Br]}),r})(),fQ=(()=>{class r extends pQ{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,s="mdc-snackbar__label";e.classList.toggle(s,!e.querySelector(`.${s}`))}}return r.\u0275fac=function(){let t;return function(s){return(t||(t=vo(r)))(s||r)}}(),r.\u0275cmp=Sa({type:r,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,s){if(1&e&&ut(SL,7),2&e){let l;vt(l=$e())&&(s._label=l.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,s){1&e&&YA("@state.done",function(m){return s.onAnimationEnd(m)}),2&e&&il("@state",s._animationState)},features:[Br],decls:6,vars:2,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,s){1&e&&(Tn(0,"div",0)(1,"div",1,2)(3,"div",3),pr(4,e2,0,0,"ng-template",4),Ln(),so(5,"div"),Ln()()),2&e&&(Cn(5),ro("aria-live",s._live)("role",s._role))},dependencies:[Vg],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.cdk-high-contrast-active .mat-mdc-snack-bar-container{border:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[a4.snackBarState]}}),r})(),XS=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[bL,VV,Es,cL,ms,ms]}),r})();const c4=new Fn("mat-snack-bar-default-options",{providedIn:"root",factory:function n2(){return new Xl}});let CL=(()=>{class r{constructor(e,s,l,m,E,I){this._overlay=e,this._live=s,this._injector=l,this._breakpointObserver=m,this._parentSnackBar=E,this._defaultConfig=I,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,s){return this._attach(e,s)}openFromTemplate(e,s){return this._attach(e,s)}open(e,s="",l){const m={...this._defaultConfig,...l};return m.data={message:e,action:s},m.announcementMessage===e&&(m.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,m)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,s){const m=Ec.create({parent:s&&s.viewContainerRef&&s.viewContainerRef.injector||this._injector,providers:[{provide:Xl,useValue:s}]}),E=new lL(this.snackBarContainerComponent,s.viewContainerRef,m),I=e.attach(E);return I.instance.snackBarConfig=s,I.instance}_attach(e,s){const l={...new Xl,...this._defaultConfig,...s},m=this._createOverlay(l),E=this._attachSnackBarContainer(m,l),I=new t2(E,m);if(e instanceof S){const k=new A1(e,null,{$implicit:l.data,snackBarRef:I});I.instance=E.attachTemplatePortal(k)}else{const k=this._createInjector(l,I),F=new lL(e,void 0,k),ee=E.attachComponentPortal(F);I.instance=ee.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(au(m.detachments())).subscribe(k=>{m.overlayElement.classList.toggle(this.handsetCssClass,k.matches)}),l.announcementMessage&&E._onAnnounce.subscribe(()=>{this._live.announce(l.announcementMessage,l.politeness)}),this._animateSnackBar(I,l),this._openedSnackBarRef=I,this._openedSnackBarRef}_animateSnackBar(e,s){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),s.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),s.duration&&s.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(s.duration))}_createOverlay(e){const s=new I1;s.direction=e.direction;let l=this._overlay.position().global();const m="rtl"===e.direction,E="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!m||"end"===e.horizontalPosition&&m,I=!E&&"center"!==e.horizontalPosition;return E?l.left("0"):I?l.right("0"):l.centerHorizontally(),"top"===e.verticalPosition?l.top("0"):l.bottom("0"),s.positionStrategy=l,this._overlay.create(s)}_createInjector(e,s){return Ec.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:t2,useValue:s},{provide:Hd,useValue:e.data}]})}}return r.\u0275fac=function(e){return new(e||r)(Xt(Nv),Xt(h1),Xt(Ec),Xt(Ux),Xt(r,12),Xt(c4))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})(),Ky=(()=>{class r extends CL{constructor(e,s,l,m,E,I){super(e,s,l,m,E,I),this.simpleSnackBarComponent=JS,this.snackBarContainerComponent=fQ,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return r.\u0275fac=function(e){return new(e||r)(Xt(Nv),Xt(h1),Xt(Ec),Xt(Ux),Xt(r,12),Xt(c4))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:XS}),r})();const IL=["*"];class gQ{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(s=>this._trackTile(s))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new _Q(this.rowIndex,e)}_findMatchingGap(t){let e=-1,s=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),s=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(s=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),s=this._findGapEndIndex(e)))}while(s-e<t||0==s);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let s=0;s<e.colspan;s++)this.tracker[t+s]=e.rowspan}}class _Q{constructor(t,e){this.row=t,this.col=e}}const u4=new Fn("MAT_GRID_LIST");let wL=(()=>{class r{constructor(e,s){this._element=e,this._gridList=s,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(xg(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(xg(e))}_setStyle(e,s){this._element.nativeElement.style[e]=s}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(u4,8))},r.\u0275cmp=Sa({type:r,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,s){2&e&&ro("rowspan",s.rowspan)("colspan",s.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:IL,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,s){1&e&&(Ys(),Tn(0,"div",0),Co(1),Ln())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),r})();const O1=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class $S{constructor(){this._rows=0,this._rowspan=0}init(t,e,s,l){this._gutterSize=D1(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=s,this._direction=l}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":$l(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,s){let l=100/this._cols,m=(this._cols-1)/this._cols;this.setColStyles(t,s,l,m),this.setRowStyles(t,e,l,m)}setColStyles(t,e,s,l){let m=this.getBaseTileSize(s,l);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(m,e)),t._setStyle("width",$l(this.getTileSize(m,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class l4 extends $S{constructor(t){super(),this.fixedRowHeight=t}init(t,e,s,l){super.init(t,e,s,l),this.fixedRowHeight=D1(this.fixedRowHeight),O1.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",$l(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",$l(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class d4 extends $S{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,s,l){this.baseTileHeight=this.getBaseTileSize(s/this.rowHeightRatio,l),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",$l(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",$l(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class RL extends $S{setRowStyles(t,e){let m=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(m,e)),t._setStyle("height",$l(this.getTileSize(m,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function $l(r){return`calc(${r})`}function D1(r){return r.match(/([A-Za-z%]+)$/)?r:`${r}px`}let h4=(()=>{class r{constructor(e,s){this._element=e,this._dir=s,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(xg(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const s=`${e??""}`;s!==this._rowHeight&&(this._rowHeight=s,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new RL:e&&e.indexOf(":")>-1?new d4(e):new l4(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new gQ);const e=this._tileCoordinator,s=this._tiles.filter(m=>!m._gridList||m._gridList===this),l=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,s),this._tileStyler.init(this.gutterSize,e,this.cols,l),s.forEach((m,E)=>{const I=e.positions[E];this._tileStyler.setStyle(m,I.row,I.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(Qy,8))},r.\u0275cmp=Sa({type:r,selectors:[["mat-grid-list"]],contentQueries:function(e,s,l){if(1&e&&Be(l,wL,5),2&e){let m;vt(m=$e())&&(s._tiles=m)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,s){2&e&&ro("cols",s.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[Ao([{provide:u4,useExisting:r}])],ngContentSelectors:IL,decls:2,vars:0,template:function(e,s){1&e&&(Ys(),Tn(0,"div"),Co(1),Ln())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),r})(),vQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[tL,ms,tL,ms]}),r})();const f4=["matFormFieldNotchedOutline",""],OL=["*"],m4=["textField"],g4=["iconPrefixContainer"],DL=["textPrefixContainer"];function _4(r,t){1&r&&so(0,"span",19)}function v4(r,t){if(1&r){const e=tl();Tn(0,"label",17),ao("cdkObserveContent",function(){return Ta(e),wa(li(2)._refreshOutlineNotchWidth())}),Co(1,1),pr(2,_4,1,0,"span",18),Ln()}if(2&r){const e=li(2);Nn("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),ro("for",e._control.id)("aria-owns",e._control.id),Cn(2),Nn("ngIf",!e.hideRequiredMarker&&e._control.required)}}function r2(r,t){1&r&&pr(0,v4,3,6,"label",16),2&r&&Nn("ngIf",li()._hasFloatingLabel())}function o2(r,t){1&r&&so(0,"div",20)}function kL(r,t){}function NL(r,t){1&r&&pr(0,kL,0,0,"ng-template",22),2&r&&(li(2),Nn("ngTemplateOutlet",lh(1)))}function PL(r,t){if(1&r&&(Tn(0,"div",21),pr(1,NL,1,1,"ng-template",9),Ln()),2&r){const e=li();Nn("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),Cn(1),Nn("ngIf",!e._forceDisplayInfixLabel())}}function ML(r,t){1&r&&(Tn(0,"div",23,24),Co(2,2),Ln())}function A4(r,t){1&r&&(Tn(0,"div",25,26),Co(2,3),Ln())}function xL(r,t){}function ZS(r,t){1&r&&pr(0,xL,0,0,"ng-template",22),2&r&&(li(),Nn("ngTemplateOutlet",lh(1)))}function em(r,t){1&r&&(Tn(0,"div",27),Co(1,4),Ln())}function y4(r,t){1&r&&(Tn(0,"div",28),Co(1,5),Ln())}function zy(r,t){1&r&&so(0,"div",29)}function Qg(r,t){1&r&&(Tn(0,"div",30),Co(1,6),Ln()),2&r&&Nn("@transitionMessages",li()._subscriptAnimationState)}function LL(r,t){if(1&r&&(Tn(0,"mat-hint",34),Ur(1),Ln()),2&r){const e=li(2);Nn("id",e._hintLabelId),Cn(1),Od(e.hintLabel)}}function e0(r,t){if(1&r&&(Tn(0,"div",31),pr(1,LL,2,2,"mat-hint",32),Co(2,7),so(3,"div",33),Co(4,8),Ln()),2&r){const e=li();Nn("@transitionMessages",e._subscriptAnimationState),Cn(1),Nn("ngIf",e.hintLabel)}}const s2=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Bh=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let a2=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=gr({type:r,selectors:[["mat-label"]]}),r})();const E4=new Fn("MatError");let N1=0,b4=(()=>{class r{constructor(){this.align="start",this.id="mat-mdc-hint-"+N1++}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=gr({type:r,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,s){2&e&&(Z_("id",s.id),ro("align",null),Fr("mat-mdc-form-field-hint-end","end"===s.align))},inputs:{align:"align",id:"id"}}),r})();const BL=new Fn("MatPrefix"),S4=new Fn("MatSuffix");let FL=(()=>{class r{constructor(e){this._isText=!1,this._isText=e.nativeElement.hasAttribute("matTextSuffix")}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi))},r.\u0275dir=gr({type:r,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],features:[Ao([{provide:S4,useExisting:r}])]}),r})(),tm=(()=>{class r{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function EQ(r){if(null!==r.offsetParent)return r.scrollWidth;const e=r.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const s=e.scrollWidth;return e.remove(),s}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi))},r.\u0275dir=gr({type:r,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,s){2&e&&Fr("mdc-floating-label--float-above",s.floating)},inputs:{floating:"floating"}}),r})();const c2="mdc-line-ripple--active",P1="mdc-line-ripple--deactivating";let C4=(()=>{class r{constructor(e,s){this._elementRef=e,this._handleTransitionEnd=l=>{const m=this._elementRef.nativeElement.classList,E=m.contains(P1);"opacity"===l.propertyName&&E&&m.remove(c2,P1)},s.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(P1),e.add(c2)}deactivate(){this._elementRef.nativeElement.classList.add(P1)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(_i))},r.\u0275dir=gr({type:r,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),r})(),I4=(()=>{class r{constructor(e,s){this._elementRef=e,this._ngZone=s,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(_i))},r.\u0275cmp=Sa({type:r,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,s){2&e&&Fr("mdc-notched-outline--notched",s.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:f4,ngContentSelectors:OL,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,s){1&e&&(Ys(),so(0,"div",0),Tn(1,"div",1),Co(2),Ln(),so(3,"div",2)),2&e&&(Cn(1),ys("width",s._getNotchWidth()))},encapsulation:2,changeDetection:0}),r})();const bQ={transitionMessages:Dv("transitionMessages",[xp("enter",_l({opacity:1,transform:"translateY(0%)"})),Ug("void => enter",[_l({opacity:0,transform:"translateY(-5px)"}),kv("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let UL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=gr({type:r}),r})();const u2=new Fn("MatFormField"),w4=new Fn("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Yy=0,N4=(()=>{class r{constructor(e,s,l,m,E,I,k,F){this._elementRef=e,this._changeDetectorRef=s,this._ngZone=l,this._dir=m,this._platform=E,this._defaults=I,this._animationMode=k,this._document=F,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Yy++,this._hintLabelId="mat-mdc-hint-"+Yy++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new ht,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,I&&(I.appearance&&(this.appearance=I.appearance),this._hideRequiredMarker=Boolean(I?.hideRequiredMarker),I.color&&(this.color=I.color))}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=$s(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const s=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==s&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(au(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Ro(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(au(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(au(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const s=this._control?this._control.ngControl:null;return s&&s[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const s=this._hintChildren?this._hintChildren.find(m=>"start"===m.align):null,l=this._hintChildren?this._hintChildren.find(m=>"end"===m.align):null;s?e.push(s.id):this._hintLabel&&e.push(this._hintLabelId),l&&e.push(l.id)}else this._errorChildren&&e.push(...this._errorChildren.map(s=>s.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const s=this._iconPrefixContainer?.nativeElement,l=this._textPrefixContainer?.nativeElement,m=s?.getBoundingClientRect().width??0,E=l?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${m+E}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const s=e.getRootNode();return s&&s!==e}return document.documentElement.contains(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(Vf),gt(_i),gt(Qy),gt(Dc),gt(w4,8),gt(Ip,8),gt(xi))},r.\u0275cmp=Sa({type:r,selectors:[["mat-form-field"]],contentQueries:function(e,s,l){if(1&e&&(Be(l,a2,5),Be(l,a2,7),Be(l,UL,5),Be(l,BL,5),Be(l,S4,5),Be(l,E4,5),Be(l,b4,5)),2&e){let m;vt(m=$e())&&(s._labelChildNonStatic=m.first),vt(m=$e())&&(s._labelChildStatic=m.first),vt(m=$e())&&(s._formFieldControl=m.first),vt(m=$e())&&(s._prefixChildren=m),vt(m=$e())&&(s._suffixChildren=m),vt(m=$e())&&(s._errorChildren=m),vt(m=$e())&&(s._hintChildren=m)}},viewQuery:function(e,s){if(1&e&&(ut(m4,5),ut(g4,5),ut(DL,5),ut(tm,5),ut(I4,5),ut(C4,5)),2&e){let l;vt(l=$e())&&(s._textField=l.first),vt(l=$e())&&(s._iconPrefixContainer=l.first),vt(l=$e())&&(s._textPrefixContainer=l.first),vt(l=$e())&&(s._floatingLabel=l.first),vt(l=$e())&&(s._notchedOutline=l.first),vt(l=$e())&&(s._lineRipple=l.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,s){2&e&&Fr("mat-mdc-form-field-label-always-float",s._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",s._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",s._hasIconSuffix)("mat-form-field-invalid",s._control.errorState)("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===s._animationMode)("mat-form-field-appearance-fill","fill"==s.appearance)("mat-form-field-appearance-outline","outline"==s.appearance)("mat-form-field-hide-placeholder",s._hasFloatingLabel()&&!s._shouldLabelFloat())("mat-focused",s._control.focused)("mat-primary","accent"!==s.color&&"warn"!==s.color)("mat-accent","accent"===s.color)("mat-warn","warn"===s.color)("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Ao([{provide:u2,useExisting:r}])],ngContentSelectors:Bh,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,s){1&e&&(Ys(s2),pr(0,r2,1,1,"ng-template",null,0,vr),Tn(2,"div",1,2),ao("click",function(m){return s._control.onContainerClick&&s._control.onContainerClick(m)}),pr(4,o2,1,0,"div",3),Tn(5,"div",4),pr(6,PL,2,3,"div",5),pr(7,ML,3,0,"div",6),pr(8,A4,3,0,"div",7),Tn(9,"div",8),pr(10,ZS,1,1,"ng-template",9),Co(11),Ln(),pr(12,em,2,0,"div",10),pr(13,y4,2,0,"div",11),Ln(),pr(14,zy,1,0,"div",12),Ln(),Tn(15,"div",13),pr(16,Qg,2,1,"div",14),pr(17,e0,5,2,"div",15),Ln()),2&e&&(Cn(2),Fr("mdc-text-field--filled",!s._hasOutline())("mdc-text-field--outlined",s._hasOutline())("mdc-text-field--no-label",!s._hasFloatingLabel())("mdc-text-field--disabled",s._control.disabled)("mdc-text-field--invalid",s._control.errorState),Cn(2),Nn("ngIf",!s._hasOutline()&&!s._control.disabled),Cn(2),Nn("ngIf",s._hasOutline()),Cn(1),Nn("ngIf",s._hasIconPrefix),Cn(1),Nn("ngIf",s._hasTextPrefix),Cn(2),Nn("ngIf",!s._hasOutline()||s._forceDisplayInfixLabel()),Cn(2),Nn("ngIf",s._hasTextSuffix),Cn(1),Nn("ngIf",s._hasIconSuffix),Cn(1),Nn("ngIf",!s._hasOutline()),Cn(1),Fr("mat-mdc-form-field-subscript-dynamic-size","dynamic"===s.subscriptSizing),Nn("ngSwitch",s._getDisplayedMessages()),Cn(1),Nn("ngSwitchCase","error"),Cn(1),Nn("ngSwitchCase","hint"))},dependencies:[gS,hM,RT,OT,G7,b4,tm,I4,C4],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required::after,.mdc-floating-label--required[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[bQ.transitionMessages]},changeDetection:0}),r})(),Hg=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[ms,Es,lV,ms]}),r})();class IQ{constructor(t=!1,e,s=!0,l){this._multiple=t,this._emitChanges=s,this.compareWith=l,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ht,e&&e.length&&(t?e.forEach(m=>this._markSelected(m)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(s=>this._markSelected(s));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(s=>this._unmarkSelected(s));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,s=new Set(t);t.forEach(m=>this._markSelected(m)),e.filter(m=>!s.has(m)).forEach(m=>this._unmarkSelected(m));const l=this._hasQueuedChanges();return this._emitChangeEvent(),l}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}function M1(r,t){return Ye((e,s)=>{let l=null,m=0,E=!1;const I=()=>E&&!l&&s.complete();e.subscribe(new Re(s,k=>{l?.unsubscribe();let F=0;const ee=m++;gn(r(k,ee)).subscribe(l=new Re(s,me=>s.next(t?t(k,me,ee,F++):me),()=>{l=null,I()}))},()=>{E=!0,I()}))})}const RQ=["trigger"],B4=["panel"];function OQ(r,t){if(1&r&&(Tn(0,"span",10),Ur(1),Ln()),2&r){const e=li();Cn(1),Od(e.placeholder)}}function VL(r,t){if(1&r&&(Tn(0,"span",14),Ur(1),Ln()),2&r){const e=li(2);Cn(1),Od(e.triggerValue)}}function x1(r,t){1&r&&Co(0,0,["*ngSwitchCase","true"])}function DQ(r,t){1&r&&(Tn(0,"span",11),pr(1,VL,2,1,"span",12),pr(2,x1,1,0,"ng-content",13),Ln()),2&r&&(Nn("ngSwitch",!!li().customTrigger),Cn(2),Nn("ngSwitchCase",!0))}function l2(r,t){if(1&r){const e=tl();Tm(),$p(),Tn(0,"div",15,16),ao("@transformPanel.done",function(l){return Ta(e),wa(li()._panelDoneAnimatingStream.next(l.toState))})("keydown",function(l){return Ta(e),wa(li()._handleKeydown(l))}),Co(2,1),Ln()}if(2&r){const e=li();xI("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),Nn("ngClass",e.panelClass)("@transformPanel","showing"),ro("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const jL=[[["mat-select-trigger"]],"*"],F4=["mat-select-trigger","*"],kQ={transformPanelWrap:Dv("transformPanelWrap",[Ug("* => void",B9("@transformPanel",[L9()],{optional:!0}))]),transformPanel:Dv("transformPanel",[xp("void",_l({opacity:0,transform:"scale(1, 0.8)"})),Ug("void => showing",kv("120ms cubic-bezier(0, 0, 0.2, 1)",_l({opacity:1,transform:"scale(1, 1)"}))),Ug("* => void",kv("100ms linear",_l({opacity:0})))])};let d2=0;const h2=new Fn("mat-select-scroll-strategy"),p2=new Fn("MAT_SELECT_CONFIG"),HL={provide:h2,deps:[Nv],useFactory:function QL(r){return()=>r.scrollStrategies.reposition()}},NQ=new Fn("MatSelectTrigger");class GL{constructor(t,e){this.source=t,this.value=e}}const j4=Bk(TV(p1(Zx(class{constructor(r,t,e,s,l){this._elementRef=r,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=s,this.ngControl=l,this.stateChanges=new ht}}))));let WL=(()=>{class r extends j4{constructor(e,s,l,m,E,I,k,F,ee,me,Le,Ke,rt,Ct){super(E,m,k,F,me),this._viewportRuler=e,this._changeDetectorRef=s,this._ngZone=l,this._dir=I,this._parentFormField=ee,this._liveAnnouncer=rt,this._defaultOptions=Ct,this._panelOpen=!1,this._compareWith=(Jt,tn)=>Jt===tn,this._uid="mat-select-"+d2++,this._triggerAriaLabelledBy=null,this._destroy=new ht,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+d2++,this._panelDoneAnimatingStream=new ht,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=function L4(r){return new ze(t=>{gn(r()).subscribe(t)})}(()=>{const Jt=this.options;return Jt?Jt.changes.pipe(LS(Jt),M1(()=>Ro(...Jt.map(tn=>tn.onSelectionChange)))):this._ngZone.onStable.pipe(yl(1),M1(()=>this.optionSelectionChanges))}),this.openedChange=new u,this._openedStream=this.openedChange.pipe(Pp(Jt=>Jt),tt(()=>{})),this._closedStream=this.openedChange.pipe(Pp(Jt=>!Jt),tt(()=>{})),this.selectionChange=new u,this.valueChange=new u,this.ngControl&&(this.ngControl.valueAccessor=this),null!=Ct?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=Ct.typeaheadDebounceInterval),this._scrollStrategyFactory=Ke,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Le)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(TS.required)??!1}set required(e){this._required=$s(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=$s(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=$s(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=xg(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new IQ(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(aV(),au(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(au(this._destroy)).subscribe(e=>{e.added.forEach(s=>s.select()),e.removed.forEach(s=>s.deselect())}),this.options.changes.pipe(LS(null),au(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),s=this.ngControl;if(e!==this._triggerAriaLabelledBy){const l=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?l.setAttribute("aria-labelledby",e):l.removeAttribute("aria-labelledby")}s&&(this._previousControl!==s.control&&(void 0!==this._previousControl&&null!==s.disabled&&s.disabled!==this.disabled&&(this.disabled=s.disabled),this._previousControl=s.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(s=>s.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const s=e.keyCode,l=40===s||38===s||37===s||39===s,m=13===s||32===s,E=this._keyManager;if(!E.isTyping()&&m&&!xS(e)||(this.multiple||e.altKey)&&l)e.preventDefault(),this.open();else if(!this.multiple){const I=this.selected;E.onKeydown(e);const k=this.selected;k&&I!==k&&this._liveAnnouncer.announce(k.viewValue,1e4)}}_handleOpenKeydown(e){const s=this._keyManager,l=e.keyCode,m=40===l||38===l,E=s.isTyping();if(m&&e.altKey)e.preventDefault(),this.close();else if(E||13!==l&&32!==l||!s.activeItem||xS(e))if(!E&&this._multiple&&65===l&&e.ctrlKey){e.preventDefault();const I=this.options.some(k=>!k.disabled&&!k.selected);this.options.forEach(k=>{k.disabled||(I?k.select():k.deselect())})}else{const I=s.activeItemIndex;s.onKeydown(e),this._multiple&&m&&e.shiftKey&&s.activeItem&&s.activeItemIndex!==I&&s.activeItem._selectViaInteraction()}else e.preventDefault(),s.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(yl(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(s=>s.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(s=>this._selectOptionByValue(s)),this._sortValues();else{const s=this._selectOptionByValue(e);s?this._keyManager.updateActiveItem(s):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const s=this.options.find(l=>{if(this._selectionModel.isSelected(l))return!1;try{return null!=l.value&&this._compareWith(l.value,e)}catch{return!1}});return s&&this._selectionModel.select(s),s}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new pV(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Ro(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(au(e)).subscribe(s=>{this._onSelect(s.source,s.isUserInput),s.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Ro(...this.options.map(s=>s._stateChanges)).pipe(au(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,s){const l=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(l!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),s&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),s&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),l!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((s,l)=>this.sortComparator?this.sortComparator(s,l,e):e.indexOf(s)-e.indexOf(l)),this.stateChanges.next()}}_propagateChanges(e){let s=null;s=this.multiple?this.selected.map(l=>l.value):this.selected?this.selected.value:e,this._value=s,this.valueChange.emit(s),this._onChange(s),this.selectionChange.emit(this._getChangeEvent(s)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let s=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(s+=" "+this.ariaLabelledby),s}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return r.\u0275fac=function(e){return new(e||r)(gt(fL),gt(Vf),gt(_i),gt(eL),gt(Pi),gt(Qy,8),gt(YT,8),gt(DS,8),gt(u2,8),gt(ps,10),qh("tabindex"),gt(h2),gt(h1),gt(p2,8))},r.\u0275dir=gr({type:r,viewQuery:function(e,s){if(1&e&&(ut(RQ,5),ut(B4,5),ut(EL,5)),2&e){let l;vt(l=$e())&&(s.trigger=l.first),vt(l=$e())&&(s.panel=l.first),vt(l=$e())&&(s._overlayDir=l.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Br,Ya]}),r})(),KL=(()=>{class r extends WL{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}]}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(au(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const s=this.options.toArray()[e];if(s){const l=this.panel.nativeElement,m=function iL(r,t,e){if(e.length){let s=t.toArray(),l=e.toArray(),m=0;for(let E=0;E<r+1;E++)s[E].group&&s[E].group===l[m]&&m++;return m}return 0}(e,this.options,this.optionGroups),E=s._getHostElement();l.scrollTop=0===e&&1===m?0:function I9(r,t,e,s){return r<e?r:r+t>e+s?Math.max(0,r-s+t):e}(E.offsetTop,E.offsetHeight,l.scrollTop,l.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new GL(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof $k?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}}return r.\u0275fac=function(){let t;return function(s){return(t||(t=vo(r)))(s||r)}}(),r.\u0275cmp=Sa({type:r,selectors:[["mat-select"]],contentQueries:function(e,s,l){if(1&e&&(Be(l,NQ,5),Be(l,rL,5),Be(l,Uk,5)),2&e){let m;vt(m=$e())&&(s.customTrigger=m.first),vt(m=$e())&&(s.options=m),vt(m=$e())&&(s.optionGroups=m)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,s){1&e&&ao("keydown",function(m){return s._handleKeydown(m)})("focus",function(){return s._onFocus()})("blur",function(){return s._onBlur()}),2&e&&(ro("id",s.id)("tabindex",s.tabIndex)("aria-controls",s.panelOpen?s.id+"-panel":null)("aria-expanded",s.panelOpen)("aria-label",s.ariaLabel||null)("aria-required",s.required.toString())("aria-disabled",s.disabled.toString())("aria-invalid",s.errorState)("aria-activedescendant",s._getAriaActiveDescendant()),Fr("mat-mdc-select-disabled",s.disabled)("mat-mdc-select-invalid",s.errorState)("mat-mdc-select-required",s.required)("mat-mdc-select-empty",s.empty)("mat-mdc-select-multiple",s.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Ao([{provide:UL,useExisting:r},{provide:Wy,useExisting:r}]),Br],ngContentSelectors:F4,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,s){if(1&e&&(Ys(jL),Tn(0,"div",0,1),ao("click",function(){return s.toggle()}),Tn(3,"div",2),pr(4,OQ,2,1,"span",3),pr(5,DQ,3,2,"span",4),Ln(),Tn(6,"div",5)(7,"div",6),Tm(),Tn(8,"svg",7),so(9,"path",8),Ln()()()(),pr(10,l2,3,9,"ng-template",9),ao("backdropClick",function(){return s.close()})("attach",function(){return s._onAttached()})("detach",function(){return s.close()})),2&e){const l=lh(1);ro("aria-owns",s.panelOpen?s.id+"-panel":null),Cn(3),Nn("ngSwitch",s.empty),ro("id",s._valueId),Cn(1),Nn("ngSwitchCase",!0),Cn(1),Nn("ngSwitchCase",!1),Cn(5),Nn("cdkConnectedOverlayPanelClass",s._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",s._scrollStrategy)("cdkConnectedOverlayOrigin",s._preferredOverlayOrigin||l)("cdkConnectedOverlayOpen",s.panelOpen)("cdkConnectedOverlayPositions",s._positions)("cdkConnectedOverlayWidth",s._overlayWidth)}},dependencies:[CD,RT,OT,fU,EL,$k],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[kQ.transformPanel]},changeDetection:0}),r})(),MQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({providers:[HL],imports:[Es,bL,Vk,ms,C1,Hg,Vk,ms]}),r})();const f2=lc({passive:!0});let xQ=(()=>{class r{constructor(e,s){this._platform=e,this._ngZone=s,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return nE;const s=$f(e),l=this._monitoredElements.get(s);if(l)return l.subject;const m=new ht,E="cdk-text-field-autofilled",I=k=>{"cdk-text-field-autofill-start"!==k.animationName||s.classList.contains(E)?"cdk-text-field-autofill-end"===k.animationName&&s.classList.contains(E)&&(s.classList.remove(E),this._ngZone.run(()=>m.next({target:k.target,isAutofilled:!1}))):(s.classList.add(E),this._ngZone.run(()=>m.next({target:k.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{s.addEventListener("animationstart",I,f2),s.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(s,{subject:m,unlisten:()=>{s.removeEventListener("animationstart",I,f2)}}),m}stopMonitoring(e){const s=$f(e),l=this._monitoredElements.get(s);l&&(l.unlisten(),l.subject.complete(),s.classList.remove("cdk-text-field-autofill-monitored"),s.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(s))}ngOnDestroy(){this._monitoredElements.forEach((e,s)=>this.stopMonitoring(s))}}return r.\u0275fac=function(e){return new(e||r)(Xt(Dc),Xt(_i))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),H4=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({}),r})();const FQ=new Fn("MAT_INPUT_VALUE_ACCESSOR"),G4=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let B1=0;const UQ=Zx(class{constructor(r,t,e,s){this._defaultErrorStateMatcher=r,this._parentForm=t,this._parentFormGroup=e,this.ngControl=s,this.stateChanges=new ht}});let W4=(()=>{class r extends UQ{constructor(e,s,l,m,E,I,k,F,ee,me){super(I,m,E,l),this._elementRef=e,this._platform=s,this._autofillMonitor=F,this._formField=me,this._uid="mat-input-"+B1++,this.focused=!1,this.stateChanges=new ht,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(rt=>Np().has(rt)),this._iOSKeyupListener=rt=>{const Ct=rt.target;!Ct.value&&0===Ct.selectionStart&&0===Ct.selectionEnd&&(Ct.setSelectionRange(1,1),Ct.setSelectionRange(0,0))};const Le=this._elementRef.nativeElement,Ke=Le.nodeName.toLowerCase();this._inputValueAccessor=k||Le,this._previousNativeValue=this.value,this.id=this.id,s.IOS&&ee.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Ke,this._isTextarea="textarea"===Ke,this._isInFormField=!!me,this._isNativeSelect&&(this.controlType=Le.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this._disabled}set disabled(e){this._disabled=$s(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(TS.required)??!1}set required(e){this._required=$s(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Np().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=$s(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=e,e?s.setAttribute("placeholder",e):s.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){G4.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,s=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&s&&s.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(Dc),gt(ps,10),gt(YT,8),gt(DS,8),gt(eL),gt(FQ,10),gt(xQ),gt(_i),gt(u2,8))},r.\u0275dir=gr({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,s){1&e&&ao("focus",function(){return s._focusChanged(!0)})("blur",function(){return s._focusChanged(!1)})("input",function(){return s._onInput()}),2&e&&(Z_("id",s.id)("disabled",s.disabled)("required",s.required),ro("name",s.name||null)("readonly",s.readonly&&!s._isNativeSelect||null)("aria-invalid",s.empty&&s.required?null:s.errorState)("aria-required",s.required)("id",s.id),Fr("mat-input-server",s._isServer)("mat-mdc-form-field-textarea-control",s._isInFormField&&s._isTextarea)("mat-mdc-form-field-input-control",s._isInFormField)("mdc-text-field__input",s._isInFormField)("mat-mdc-native-select-inline",s._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Ao([{provide:UL,useExisting:r}]),Br,Ya]}),r})(),uu=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[ms,Hg,Hg,H4,ms]}),r})();function zL(r){return Ye((t,e)=>{let m,s=null,l=!1;s=t.subscribe(new Re(e,void 0,void 0,E=>{m=gn(r(E,zL(r)(t))),s?(s.unsubscribe(),s=null,m.subscribe(e)):l=!0})),l&&(s.unsubscribe(),s=null,m.subscribe(e))})}const jQ=["*"];let m2;function t0(r){return function YL(){if(void 0===m2&&(m2=null,typeof window<"u")){const r=window;void 0!==r.trustedTypes&&(m2=r.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return m2}()?.createHTML(r)||r}function qL(r){return Error(`Unable to find icon with the name "${r}"`)}function JL(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function XL(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}class qy{constructor(t,e,s){this.url=t,this.svgText=e,this.options=s}}let g2=(()=>{class r{constructor(e,s,l,m){this._httpClient=e,this._sanitizer=s,this._errorHandler=m,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=l}addSvgIcon(e,s,l){return this.addSvgIconInNamespace("",e,s,l)}addSvgIconLiteral(e,s,l){return this.addSvgIconLiteralInNamespace("",e,s,l)}addSvgIconInNamespace(e,s,l,m){return this._addSvgIconConfig(e,s,new qy(l,null,m))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,s,l,m){const E=this._sanitizer.sanitize(no.HTML,l);if(!E)throw XL(l);const I=t0(E);return this._addSvgIconConfig(e,s,new qy("",I,m))}addSvgIconSet(e,s){return this.addSvgIconSetInNamespace("",e,s)}addSvgIconSetLiteral(e,s){return this.addSvgIconSetLiteralInNamespace("",e,s)}addSvgIconSetInNamespace(e,s,l){return this._addSvgIconSetConfig(e,new qy(s,null,l))}addSvgIconSetLiteralInNamespace(e,s,l){const m=this._sanitizer.sanitize(no.HTML,s);if(!m)throw XL(s);const E=t0(m);return this._addSvgIconSetConfig(e,new qy("",E,l))}registerFontClassAlias(e,s=e){return this._fontCssClassesByAlias.set(e,s),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const s=this._sanitizer.sanitize(no.RESOURCE_URL,e);if(!s)throw JL(e);const l=this._cachedIconsByUrl.get(s);return l?fl(F1(l)):this._loadSvgIconFromConfig(new qy(e,null)).pipe(vk(m=>this._cachedIconsByUrl.set(s,m)),tt(m=>F1(m)))}getNamedSvgIcon(e,s=""){const l=q4(s,e);let m=this._svgIconConfigs.get(l);if(m)return this._getSvgFromConfig(m);if(m=this._getIconConfigFromResolvers(s,e),m)return this._svgIconConfigs.set(l,m),this._getSvgFromConfig(m);const E=this._iconSetConfigs.get(s);return E?this._getSvgFromIconSetConfigs(e,E):function VQ(r,t){const e=L(r)?r:()=>r,s=l=>l.error(e());return new ze(t?l=>t.schedule(s,0,l):s)}(qL(l))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?fl(F1(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(tt(s=>F1(s)))}_getSvgFromIconSetConfigs(e,s){const l=this._extractIconWithNameFromAnySet(e,s);return l?fl(l):QM(s.filter(E=>!E.svgText).map(E=>this._loadSvgIconSetFromConfig(E).pipe(zL(I=>{const F=`Loading icon set URL: ${this._sanitizer.sanitize(no.RESOURCE_URL,E.url)} failed: ${I.message}`;return this._errorHandler.handleError(new Error(F)),fl(null)})))).pipe(tt(()=>{const E=this._extractIconWithNameFromAnySet(e,s);if(!E)throw qL(e);return E}))}_extractIconWithNameFromAnySet(e,s){for(let l=s.length-1;l>=0;l--){const m=s[l];if(m.svgText&&m.svgText.toString().indexOf(e)>-1){const E=this._svgElementFromConfig(m),I=this._extractSvgIconFromSet(E,e,m.options);if(I)return I}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(vk(s=>e.svgText=s),tt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?fl(null):this._fetchIcon(e).pipe(vk(s=>e.svgText=s))}_extractSvgIconFromSet(e,s,l){const m=e.querySelector(`[id="${s}"]`);if(!m)return null;const E=m.cloneNode(!0);if(E.removeAttribute("id"),"svg"===E.nodeName.toLowerCase())return this._setSvgAttributes(E,l);if("symbol"===E.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(E),l);const I=this._svgElementFromString(t0("<svg></svg>"));return I.appendChild(E),this._setSvgAttributes(I,l)}_svgElementFromString(e){const s=this._document.createElement("DIV");s.innerHTML=e;const l=s.querySelector("svg");if(!l)throw Error("<svg> tag not found");return l}_toSvgElement(e){const s=this._svgElementFromString(t0("<svg></svg>")),l=e.attributes;for(let m=0;m<l.length;m++){const{name:E,value:I}=l[m];"id"!==E&&s.setAttribute(E,I)}for(let m=0;m<e.childNodes.length;m++)e.childNodes[m].nodeType===this._document.ELEMENT_NODE&&s.appendChild(e.childNodes[m].cloneNode(!0));return s}_setSvgAttributes(e,s){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),s&&s.viewBox&&e.setAttribute("viewBox",s.viewBox),e}_fetchIcon(e){const{url:s,options:l}=e,m=l?.withCredentials??!1;if(!this._httpClient)throw function z4(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==s)throw Error(`Cannot fetch icon from URL "${s}".`);const E=this._sanitizer.sanitize(no.RESOURCE_URL,s);if(!E)throw JL(s);const I=this._inProgressUrlFetches.get(E);if(I)return I;const k=this._httpClient.get(E,{responseType:"text",withCredentials:m}).pipe(tt(F=>t0(F)),function K4(r){return Ye((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}(()=>this._inProgressUrlFetches.delete(E)),pu());return this._inProgressUrlFetches.set(E,k),k}_addSvgIconConfig(e,s,l){return this._svgIconConfigs.set(q4(e,s),l),this}_addSvgIconSetConfig(e,s){const l=this._iconSetConfigs.get(e);return l?l.push(s):this._iconSetConfigs.set(e,[s]),this}_svgElementFromConfig(e){if(!e.svgElement){const s=this._svgElementFromString(e.svgText);this._setSvgAttributes(s,e.options),e.svgElement=s}return e.svgElement}_getIconConfigFromResolvers(e,s){for(let l=0;l<this._resolvers.length;l++){const m=this._resolvers[l](s,e);if(m)return J4(m)?new qy(m.url,null,m.options):new qy(m,null)}}}return r.\u0275fac=function(e){return new(e||r)(Xt(ok,8),Xt(VM),Xt(xi,8),Xt(Cd))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function F1(r){return r.cloneNode(!0)}function q4(r,t){return r+":"+t}function J4(r){return!(!r.url||!r.options)}const Gg=Lk(class{constructor(r){this._elementRef=r}}),QQ=new Fn("MAT_ICON_DEFAULT_OPTIONS"),HQ=new Fn("mat-icon-location",{providedIn:"root",factory:function GQ(){const r=ba(xi),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),X4=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],WQ=X4.map(r=>`[${r}]`).join(", "),KQ=/^url\(['"]?#(.*?)['"]?\)$/;let zQ=(()=>{class r extends Gg{constructor(e,s,l,m,E,I){super(e),this._iconRegistry=s,this._location=m,this._errorHandler=E,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=U.EMPTY,I&&(I.color&&(this.color=this.defaultColor=I.color),I.fontSet&&(this.fontSet=I.fontSet)),l||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=$s(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const s=this._cleanupFontValue(e);s!==this._fontSet&&(this._fontSet=s,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const s=this._cleanupFontValue(e);s!==this._fontIcon&&(this._fontIcon=s,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const s=e.split(":");switch(s.length){case 1:return["",s[0]];case 2:return s;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const s=this._location.getPathname();s!==this._previousPath&&(this._previousPath=s,this._prependPathToReferences(s))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const s=this._location.getPathname();this._previousPath=s,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(s),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let s=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();s--;){const l=e.childNodes[s];(1!==l.nodeType||"svg"===l.nodeName.toLowerCase())&&l.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,s=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(l=>l.length>0);this._previousFontSetClass.forEach(l=>e.classList.remove(l)),s.forEach(l=>e.classList.add(l)),this._previousFontSetClass=s,this.fontIcon!==this._previousFontIconClass&&!s.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const s=this._elementsWithExternalReferences;s&&s.forEach((l,m)=>{l.forEach(E=>{m.setAttribute(E.name,`url('${e}#${E.value}')`)})})}_cacheChildrenWithExternalReferences(e){const s=e.querySelectorAll(WQ),l=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let m=0;m<s.length;m++)X4.forEach(E=>{const I=s[m],k=I.getAttribute(E),F=k?k.match(KQ):null;if(F){let ee=l.get(I);ee||(ee=[],l.set(I,ee)),ee.push({name:E,value:F[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[s,l]=this._splitIconName(e);s&&(this._svgNamespace=s),l&&(this._svgName=l),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(l,s).pipe(yl(1)).subscribe(m=>this._setSvgElement(m),m=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${s}:${l}! ${m.message}`))})}}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(g2),qh("aria-hidden"),gt(HQ),gt(Cd),gt(QQ,8))},r.\u0275cmp=Sa({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,s){2&e&&(ro("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),Fr("mat-icon-inline",s.inline)("mat-icon-no-color","primary"!==s.color&&"accent"!==s.color&&"warn"!==s.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Br],ngContentSelectors:jQ,decls:1,vars:0,template:function(e,s){1&e&&(Ys(),Co(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),r})(),YQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[ms,ms]}),r})();const $4=["determinateSpinner"];function qQ(r,t){if(1&r&&(Tm(),Tn(0,"svg",11),so(1,"circle",12),Ln()),2&r){const e=li();ro("viewBox",e._viewBox()),Cn(1),ys("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),ro("r",e._circleRadius())}}const JQ=Lk(class{constructor(r){this._elementRef=r}},"primary"),XQ=new Fn("mat-progress-spinner-default-options",{providedIn:"root",factory:function $Q(){return{diameter:Z4}}}),Z4=100;let ZQ=(()=>{class r extends JQ{constructor(e,s,l){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=Z4,this._noopAnimations="NoopAnimations"===s&&!!l&&!l._forceAnimations,l&&(l.color&&(this.color=this.defaultColor=l.color),l.diameter&&(this.diameter=l.diameter),l.strokeWidth&&(this.strokeWidth=l.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,xg(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=xg(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=xg(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(Ip,8),gt(XQ))},r.\u0275cmp=Sa({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,s){if(1&e&&ut($4,5),2&e){let l;vt(l=$e())&&(s._determinateCircle=l.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,s){2&e&&(ro("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===s.mode?s.value:null)("mode",s.mode),ys("width",s.diameter,"px")("height",s.diameter,"px"),Fr("_mat-animation-noopable",s._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===s.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Br],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,s){if(1&e&&(pr(0,qQ,2,8,"ng-template",null,0,vr),Tn(2,"div",1,2),Tm(),Tn(4,"svg",3),so(5,"circle",4),Ln()(),$p(),Tn(6,"div",5)(7,"div",6)(8,"div",7),K_(9,8),Ln(),Tn(10,"div",9),K_(11,8),Ln(),Tn(12,"div",10),K_(13,8),Ln()()()),2&e){const l=lh(1);Cn(4),ro("viewBox",s._viewBox()),Cn(1),ys("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeDashOffset(),"px")("stroke-width",s._circleStrokeWidth(),"%"),ro("r",s._circleRadius()),Cn(4),Nn("ngTemplateOutlet",l),Cn(2),Nn("ngTemplateOutlet",l),Cn(2),Nn("ngTemplateOutlet",l)}},dependencies:[hM],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),r})(),n0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[Es,ms]}),r})(),_2=0;const e5=p1(class{}),ZL="mat-badge-content";let t5=(()=>{class r extends e5{constructor(e,s,l,m,E){super(),this._ngZone=e,this._elementRef=s,this._ariaDescriber=l,this._renderer=m,this._animationMode=E,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=_2++,this._isInitialized=!1}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=$s(e)}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateHostAriaDescription(e)}get hidden(){return this._hidden}set hidden(e){this._hidden=$s(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&this._renderer.destroyNode(this._badgeElement),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_createBadgeElement(){const e=this._renderer.createElement("span"),s="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(ZL),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(s)})}):e.classList.add(s),e}_updateRenderedContent(e){const s=`${e??""}`.trim();this._isInitialized&&s&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=s),this._content=s}_updateHostAriaDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),e&&this._ariaDescriber.describe(this._elementRef.nativeElement,e),this._description=e}_setColor(e){const s=this._elementRef.nativeElement.classList;s.remove(`mat-badge-${this._color}`),e&&s.add(`mat-badge-${e}`)}_clearExistingBadges(){const e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${ZL}`);for(const s of Array.from(e))s!==this._badgeElement&&s.remove()}}return r.\u0275fac=function(e){return new(e||r)(gt(_i),gt(Pi),gt(jx),gt(Sd),gt(Ip,8))},r.\u0275dir=gr({type:r,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,s){2&e&&Fr("mat-badge-overlap",s.overlap)("mat-badge-above",s.isAbove())("mat-badge-below",!s.isAbove())("mat-badge-before",!s.isAfter())("mat-badge-after",s.isAfter())("mat-badge-small","small"===s.size)("mat-badge-medium","medium"===s.size)("mat-badge-large","large"===s.size)("mat-badge-hidden",s.hidden||!s.content)("mat-badge-disabled",s.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[Br]}),r})(),n5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({imports:[AV,ms,ms]}),r})();function eB(r,t){return t?e=>Sk(t.pipe(yl(1),function r5(){return Ye((r,t)=>{r.subscribe(new Re(t,te))})}()),e.pipe(eB(r))):nr((e,s)=>r(e,s).pipe(yl(1),function i5(r){return tt(()=>r)}(e)))}function tB(r,t=Bx){const e=WV(r,t);return eB(()=>e)}const o5=["mat-menu-item",""];function s5(r,t){1&r&&(Tm(),Tn(0,"svg",3),so(1,"polygon",4),Ln())}const a5=[[["mat-icon"]],"*"],c5=["mat-icon","*"];function u5(r,t){if(1&r){const e=tl();Tn(0,"div",0),ao("keydown",function(l){return Ta(e),wa(li()._handleKeydown(l))})("click",function(){return Ta(e),wa(li().closed.emit("click"))})("@transformMenu.start",function(l){return Ta(e),wa(li()._onAnimationStart(l))})("@transformMenu.done",function(l){return Ta(e),wa(li()._onAnimationDone(l))}),Tn(1,"div",1),Co(2),Ln()()}if(2&r){const e=li();Nn("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),ro("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const l5=["*"],v2=new Fn("MAT_MENU_PANEL"),d5=Bk(p1(class{}));let qi=(()=>{class r extends d5{constructor(e,s,l,m,E){super(),this._elementRef=e,this._document=s,this._focusMonitor=l,this._parentMenu=m,this._changeDetectorRef=E,this.role="menuitem",this._hovered=new ht,this._focused=new ht,this._highlighted=!1,this._triggersSubmenu=!1,m?.addItem?.(this)}focus(e,s){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,s):this._getHostElement().focus(s),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),s=e.querySelectorAll("mat-icon, .material-icons");for(let l=0;l<s.length;l++)s[l].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(xi),gt(Dk),gt(v2,8),gt(Vf))},r.\u0275cmp=Sa({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,s){1&e&&ao("click",function(m){return s._checkDisabled(m)})("mouseenter",function(){return s._handleMouseEnter()}),2&e&&(ro("role",s.role)("tabindex",s._getTabIndex())("aria-disabled",s.disabled)("disabled",s.disabled||null),Fr("mat-mdc-menu-item-highlighted",s._highlighted)("mat-mdc-menu-item-submenu-trigger",s._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Br],attrs:o5,ngContentSelectors:c5,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,s){1&e&&(Ys(a5),Co(0),Tn(1,"span",0),Co(2,1),Ln(),so(3,"div",1),pr(4,s5,2,0,"svg",2)),2&e&&(Cn(3),Nn("matRippleDisabled",s.disableRipple||s.disabled)("matRippleTrigger",s._getHostElement()),Cn(1),Nn("ngIf",s._triggersSubmenu))},dependencies:[gS,VS],encapsulation:2,changeDetection:0}),r})();const h5=new Fn("MatMenuContent"),Gd={transformMenu:Dv("transformMenu",[xp("void",_l({opacity:0,transform:"scale(0.8)"})),Ug("void => enter",kv("120ms cubic-bezier(0, 0, 0.2, 1)",_l({opacity:1,transform:"scale(1)"}))),Ug("* => void",kv("100ms 25ms linear",_l({opacity:0})))]),fadeInItems:Dv("fadeInItems",[xp("showing",_l({opacity:1})),Ug("void => *",[_l({opacity:0}),kv("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let r0=0;const Os=new Fn("mat-menu-default-options",{providedIn:"root",factory:function p5(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let U1=(()=>{class r{constructor(e,s,l,m){this._elementRef=e,this._ngZone=s,this._defaultOptions=l,this._changeDetectorRef=m,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new A,this._classList={},this._panelAnimationState="void",this._animationDone=new ht,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new u,this.close=this.closed,this.panelId="mat-menu-panel-"+r0++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=$s(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=$s(e)}set panelClass(e){const s=this._previousPanelClass;s&&s.length&&s.split(" ").forEach(l=>{this._classList[l]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(l=>{this._classList[l]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Rk(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(LS(this._directDescendantItems),M1(e=>Ro(...e.map(s=>s._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const s=this._keyManager;if("enter"===this._panelAnimationState&&s.activeItem?._hasFocus()){const l=e.toArray(),m=Math.max(0,Math.min(l.length-1,s.activeItemIndex||0));l[m]&&!l[m].disabled?s.setActiveItem(m):s.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(LS(this._directDescendantItems),M1(s=>Ro(...s.map(l=>l._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const s=e.keyCode,l=this._keyManager;switch(s){case 27:xS(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===s||40===s)&&l.setFocusOrigin("keyboard"),void l.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(yl(1)).subscribe(()=>{let s=null;if(this._directDescendantItems.length&&(s=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!s||!s.contains(document.activeElement)){const l=this._keyManager;l.setFocusOrigin(e).setFirstItemActive(),!l.activeItem&&s&&s.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const s=Math.min(this._baseElevation+e,24),l=`${this._elevationPrefix}${s}`,m=Object.keys(this._classList).find(E=>E.startsWith(this._elevationPrefix));(!m||m===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[l]=!0,this._previousElevation=l)}setPositionClasses(e=this.xPosition,s=this.yPosition){const l=this._classList;l["mat-menu-before"]="before"===e,l["mat-menu-after"]="after"===e,l["mat-menu-above"]="above"===s,l["mat-menu-below"]="below"===s,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(LS(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(s=>s._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(_i),gt(Os),gt(Vf))},r.\u0275dir=gr({type:r,contentQueries:function(e,s,l){if(1&e&&(Be(l,h5,5),Be(l,qi,5),Be(l,qi,4)),2&e){let m;vt(m=$e())&&(s.lazyContent=m.first),vt(m=$e())&&(s._allItems=m),vt(m=$e())&&(s.items=m)}},viewQuery:function(e,s){if(1&e&&ut(S,5),2&e){let l;vt(l=$e())&&(s.templateRef=l.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),r})(),cH=(()=>{class r extends U1{constructor(e,s,l,m){super(e,s,l,m),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return r.\u0275fac=function(e){return new(e||r)(gt(Pi),gt(_i),gt(Os),gt(Vf))},r.\u0275cmp=Sa({type:r,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,s){2&e&&ro("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Ao([{provide:v2,useExisting:r}]),Br],ngContentSelectors:l5,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,s){1&e&&(Ys(),pr(0,u5,3,6,"ng-template"))},dependencies:[CD],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Gd.transformMenu,Gd.fadeInItems]},changeDetection:0}),r})();const A2=new Fn("mat-menu-scroll-strategy"),lH={provide:A2,deps:[Nv],useFactory:function uH(r){return()=>r.scrollStrategies.reposition()}},f5=lc({passive:!0});let dH=(()=>{class r{constructor(e,s,l,m,E,I,k,F,ee){this._overlay=e,this._element=s,this._viewContainerRef=l,this._menuItemInstance=I,this._dir=k,this._focusMonitor=F,this._ngZone=ee,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=U.EMPTY,this._hoverSubscription=U.EMPTY,this._menuCloseSubscription=U.EMPTY,this._handleTouchStart=me=>{Tv(me)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new u,this.onMenuOpen=this.menuOpened,this.menuClosed=new u,this.onMenuClose=this.menuClosed,this._scrollStrategy=m,this._parentMaterialMenu=E instanceof U1?E:void 0,s.nativeElement.addEventListener("touchstart",this._handleTouchStart,f5)}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(s=>{this._destroyMenu(s),("click"===s||"tab"===s)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(s)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,f5),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const s=this._createOverlay(e),l=s.getConfig(),m=l.positionStrategy;this._setPosition(e,m),l.hasBackdrop=e.hasBackdrop??!this.triggersSubmenu(),s.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof U1&&(e._startAnimation(),e._directDescendantItems.changes.pipe(au(e.close)).subscribe(()=>{m.withLockedPosition(!1).reapplyLastPosition(),m.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,s){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,s):this._element.nativeElement.focus(s)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const s=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,s instanceof U1?(s._resetAnimation(),s.lazyContent?s._animationDone.pipe(Pp(l=>"void"===l.toState),yl(1),au(s.lazyContent._attached)).subscribe({next:()=>s.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),s?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let s=0,l=e.parentMenu;for(;l;)s++,l=l.parentMenu;e.setElevation(s)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_createOverlay(e){if(!this._overlayRef){const s=this._getOverlayConfig(e);this._subscribeToPositions(e,s.positionStrategy),this._overlayRef=this._overlay.create(s),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new I1({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,s){e.setPositionClasses&&s.positionChanges.subscribe(l=>{const m="start"===l.connectionPair.overlayX?"after":"before",E="top"===l.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(m,E)):e.setPositionClasses(m,E)})}_setPosition(e,s){let[l,m]="before"===e.xPosition?["end","start"]:["start","end"],[E,I]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[k,F]=[E,I],[ee,me]=[l,m],Le=0;if(this.triggersSubmenu()){if(me=l="before"===e.xPosition?"start":"end",m=ee="end"===l?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const Ke=this._parentMaterialMenu.items.first;this._parentInnerPadding=Ke?Ke._getHostElement().offsetTop:0}Le="bottom"===E?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(k="top"===E?"bottom":"top",F="top"===I?"bottom":"top");s.withPositions([{originX:l,originY:k,overlayX:ee,overlayY:E,offsetY:Le},{originX:m,originY:k,overlayX:me,overlayY:E,offsetY:Le},{originX:l,originY:F,overlayX:ee,overlayY:I,offsetY:-Le},{originX:m,originY:F,overlayX:me,overlayY:I,offsetY:-Le}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),s=this._overlayRef.detachments();return Ro(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:fl(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Pp(E=>E!==this._menuItemInstance),Pp(()=>this._menuOpen)):fl(),s)}_handleMousedown(e){cu(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const s=e.keyCode;(13===s||32===s)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===s&&"ltr"===this.dir||37===s&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Pp(e=>e===this._menuItemInstance&&!e.disabled),tB(0,zk)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof U1&&this.menu._isAnimating?this.menu._animationDone.pipe(yl(1),tB(0,zk),au(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new A1(e.templateRef,this._viewContainerRef)),this._portal}}return r.\u0275fac=function(e){return new(e||r)(gt(Nv),gt(Pi),gt(H),gt(A2),gt(v2,8),gt(qi,10),gt(Qy,8),gt(Dk),gt(_i))},r.\u0275dir=gr({type:r,hostVars:3,hostBindings:function(e,s){1&e&&ao("click",function(m){return s._handleClick(m)})("mousedown",function(m){return s._handleMousedown(m)})("keydown",function(m){return s._handleKeydown(m)}),2&e&&ro("aria-haspopup",s.menu?"menu":null)("aria-expanded",s.menuOpen)("aria-controls",s.menuOpen?s.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),r})(),hH=(()=>{class r extends dH{}return r.\u0275fac=function(){let t;return function(s){return(t||(t=vo(r)))(s||r)}}(),r.\u0275dir=gr({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[Br]}),r})(),pH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({providers:[lH],imports:[Es,gl,ms,bL,C1,ms]}),r})();class y2{transform(t,...e){return Array.from(t,([s,l])=>({name:s,value:l}))}static#e=this.\u0275fac=function(e){return new(e||y2)};static#t=this.\u0275pipe=ra({name:"twilio",type:y2,pure:!1})}function fH(r,t){1&r&&(Tn(0,"button",16)(1,"mat-icon"),Ur(2,"login"),Ln()())}function mH(r,t){if(1&r){const e=tl();Tn(0,"form",6),ao("ngSubmit",function(){Ta(e);const l=li();return wa(l.authorize(l.configForm.value))}),Tn(1,"mat-form-field",7)(2,"mat-label"),Ur(3,"Video SDK Provider"),Ln(),Tn(4,"mat-select",8)(5,"mat-option",9),Ur(6,"Zoom Video SDK"),Ln(),Tn(7,"mat-option",10),Ur(8,"Twilio Video SDK"),Ln()()(),Tn(9,"mat-form-field",7)(10,"mat-label"),Ur(11,"Your Name"),Ln(),so(12,"input",11),Tn(13,"mat-icon",12),Ur(14,"face"),Ln()(),Tn(15,"mat-form-field",7)(16,"mat-label"),Ur(17,"Session Name"),Ln(),so(18,"input",13),Tn(19,"mat-icon",12),Ur(20,"meeting_room"),Ln()(),Tn(21,"mat-form-field",7)(22,"mat-label"),Ur(23,"Session Passcode"),Ln(),so(24,"input",14),Tn(25,"mat-icon",12),Ur(26,"vpn_key"),Ln()(),pr(27,fH,3,0,"button",15),Ln()}if(2&r){const e=li();Nn("formGroup",e.configForm),Cn(27),Nn("ngIf",!e.session)}}function gH(r,t){if(1&r){const e=tl();Tn(0,"button",20),ao("click",function(){return Ta(e),wa(li(2).startAudio())}),Tn(1,"mat-icon"),Ur(2,"volume_off"),Ln()()}}function g5(r,t){if(1&r){const e=tl();Tn(0,"button",20),ao("click",function(){return Ta(e),wa(li(2).mute())}),Tn(1,"mat-icon"),Ur(2,"mic"),Ln()()}}function _H(r,t){if(1&r){const e=tl();Tn(0,"button",20),ao("click",function(){return Ta(e),wa(li(2).unmute())}),Tn(1,"mat-icon"),Ur(2,"mic_off"),Ln()()}}function vH(r,t){if(1&r){const e=tl();Tn(0,"button",20),ao("click",function(){return Ta(e),wa(li(2).stopCamera())}),Tn(1,"mat-icon"),Ur(2,"videocam"),Ln()()}}function AH(r,t){if(1&r){const e=tl();Tn(0,"button",20),ao("click",function(){return Ta(e),wa(li(2).startCamera())}),Tn(1,"mat-icon"),Ur(2,"videocam_off"),Ln()()}}function _5(r,t){if(1&r&&(Tn(0,"button",24),Ur(1),Ln()),2&r){const e=t.$implicit;Cn(1),Od(e.displayName)}}function v5(r,t){if(1&r&&(dh(0),Tn(1,"button",21)(2,"mat-icon"),Ur(3,"people"),Ln()(),Tn(4,"mat-menu",null,22),pr(6,_5,2,1,"button",23),Ln(),el()),2&r){const e=lh(5),s=li(2);Cn(1),Nn("matMenuTriggerFor",e)("matBadge",s.zoomClient.getAllUser().length),Cn(5),Nn("ngForOf",s.zoomClient.getAllUser())}}function A5(r,t){if(1&r&&(Tn(0,"button",24),Ur(1),Ln()),2&r){const e=t.$implicit;Cn(1),Od(e.value.identity)}}function y5(r,t){if(1&r&&(dh(0),Tn(1,"button",21)(2,"mat-icon"),Ur(3,"people"),Ln()(),Tn(4,"mat-menu",null,22)(6,"button",24),Ur(7),Ln(),pr(8,A5,2,1,"button",23),function XO(r,t){const e=cr();let s;const l=r+22;e.firstCreatePass?(s=function fv(r,t){if(t)for(let e=t.length-1;e>=0;e--){const s=t[e];if(r===s.name)return s}}(t,e.pipeRegistry),e.data[l]=s,s.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(l,s.onDestroy)):s=e.data[l];const m=s.factory||(s.factory=ia(s.type)),E=xu(gt);try{const I=Yh(!1),k=m();return Yh(I),function zA(r,t,e,s){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),t[e]=s}(e,yn(),l,k),k}finally{xu(E)}}(9,"twilio"),Ln(),el()),2&r){const e=lh(5),s=li(2);Cn(1),Nn("matMenuTriggerFor",e)("matBadge",s.twilioRoom.participants.size+1),Cn(6),Od(s.twilioRoom.localParticipant.identity),Cn(1),Nn("ngForOf",$O(9,4,s.twilioRoom.participants))}}function yH(r,t){if(1&r){const e=tl();Tn(0,"div",17),pr(1,gH,3,0,"button",18),pr(2,g5,3,0,"button",18),pr(3,_H,3,0,"button",18),pr(4,vH,3,0,"button",18),pr(5,AH,3,0,"button",18),pr(6,v5,7,3,"ng-container",5),pr(7,y5,10,6,"ng-container",5),Tn(8,"button",19),ao("click",function(){return Ta(e),wa(li().leave())}),Tn(9,"mat-icon"),Ur(10,"logout"),Ln()()()}if(2&r){const e=li();Cn(1),Nn("ngIf",!e.mic&&!e.audio),Cn(1),Nn("ngIf",e.mic&&e.audio),Cn(1),Nn("ngIf",!e.mic&&e.audio),Cn(1),Nn("ngIf",e.camera),Cn(1),Nn("ngIf",!e.camera),Cn(1),Nn("ngIf","zoom"===e.videoSDKProvider),Cn(1),Nn("ngIf","twilio"===e.videoSDKProvider&&e.twilioRoom.participants)}}function EH(r,t){1&r&&(Tn(0,"div",25),so(1,"mat-spinner"),Ln())}function bH(r,t){1&r&&so(0,"mat-spinner")}function E5(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"mic_off"),Ln())}function SH(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"mic_on"),Ln())}function CH(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"volume_off"),Ln())}function b5(r,t){if(1&r&&(Tn(0,"p"),pr(1,E5,2,0,"mat-icon",5),pr(2,SH,2,0,"mat-icon",5),pr(3,CH,2,0,"mat-icon",5),Ur(4),Ln()),2&r){const e=li(2);Cn(1),Nn("ngIf",e.audio&&!e.mic),Cn(1),Nn("ngIf",e.audio&&e.mic),Cn(1),Nn("ngIf",!e.audio),Cn(1),gh(" ",e.zoomClient.getCurrentUserInfo().displayName," (me) ")}}function IH(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"sentiment_satisfied_alt"),Ln())}function S5(r,t){if(1&r&&(dh(0),pr(1,b5,5,4,"p",5),pr(2,IH,2,0,"mat-icon",5),so(3,"video",26)(4,"canvas",27),el()),2&r){const e=li();Cn(1),Nn("ngIf",e.zoomClient&&e.zoomClient.getCurrentUserInfo()),Cn(1),Nn("ngIf",!e.camera&&!e.cameraLoading),Cn(1),Nn("hidden",!e.useVideoElementForZoom),Cn(1),Nn("hidden",!e.useCanvasElementForZoom)}}function V1(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"mic_off"),Ln())}function TH(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"mic_on"),Ln())}function C5(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"volume_off"),Ln())}function wH(r,t){if(1&r&&(Tn(0,"p"),pr(1,V1,2,0,"mat-icon",5),pr(2,TH,2,0,"mat-icon",5),pr(3,C5,2,0,"mat-icon",5),Ur(4),Ln()),2&r){const e=li(2);Cn(1),Nn("ngIf",e.audio&&!e.mic),Cn(1),Nn("ngIf",e.audio&&e.mic),Cn(1),Nn("ngIf",!e.audio),Cn(1),gh(" ",e.twilioRoom.localParticipant.identity," (me) ")}}function RH(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"sentiment_satisfied_alt"),Ln())}function OH(r,t){if(1&r&&(dh(0),pr(1,wH,5,4,"p",5),pr(2,RH,2,0,"mat-icon",5),so(3,"div",28),el()),2&r){const e=li();Cn(1),Nn("ngIf",e.twilioRoom),Cn(1),Nn("ngIf",!e.camera&&!e.cameraLoading),Cn(1),Nn("hidden",!e.camera)}}function va(r,t){1&r&&(Tn(0,"p"),Ur(1,"Waiting for others to join..."),Ln())}function o0(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"mic_off"),Ln())}function nB(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"mic_on"),Ln())}function DH(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"volume_off"),Ln())}function kH(r,t){if(1&r&&(Tn(0,"p"),pr(1,o0,2,0,"mat-icon",5),pr(2,nB,2,0,"mat-icon",5),pr(3,DH,2,0,"mat-icon",5),Ur(4),Ln()),2&r){const e=li(2);Cn(1),Nn("ngIf",e.activeSpeaker.audio&&e.activeSpeaker.muted),Cn(1),Nn("ngIf",e.activeSpeaker.audio&&!e.activeSpeaker.muted),Cn(1),Nn("ngIf",!e.activeSpeaker.audio),Cn(1),gh(" ",e.activeSpeaker.displayName," ")}}function j1(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"insert_emoticon"),Ln())}function NH(r,t){if(1&r&&so(0,"canvas",30),2&r){const e=li(2);Nn("hidden",!e.activeSpeaker||!e.activeSpeaker.bVideoOn)}}function s0(r,t){if(1&r&&(dh(0),pr(1,kH,5,4,"p",5),pr(2,j1,2,0,"mat-icon",5),pr(3,NH,1,1,"canvas",29),el()),2&r){const e=li();Cn(1),Nn("ngIf",e.activeSpeaker),Cn(1),Nn("ngIf",e.activeSpeaker&&!e.activeSpeaker.bVideoOn),Cn(1),Nn("ngIf",e.zoomClient)}}function Jy(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"mic_off"),Ln())}function rB(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"mic_on"),Ln())}function Wa(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"volume_off"),Ln())}function PH(r,t){if(1&r&&(Tn(0,"p"),pr(1,Jy,2,0,"mat-icon",5),pr(2,rB,2,0,"mat-icon",5),pr(3,Wa,2,0,"mat-icon",5),Ur(4),Ln()),2&r){const e=li(2);Cn(1),Nn("ngIf",e.activeSpeaker.value.audioTracks.size&&e.activeSpeaker.value.muted),Cn(1),Nn("ngIf",e.activeSpeaker.value.audioTracks.size&&!e.activeSpeaker.value.muted),Cn(1),Nn("ngIf",!e.activeSpeaker.value.audioTracks.size),Cn(1),gh(" ",e.activeSpeaker.value.identity," ")}}function MH(r,t){1&r&&(Tn(0,"mat-icon"),Ur(1,"insert_emoticon"),Ln())}function xH(r,t){if(1&r&&(dh(0),pr(1,PH,5,4,"p",5),pr(2,MH,2,0,"mat-icon",5),so(3,"div",31),el()),2&r){const e=li();Cn(1),Nn("ngIf",e.activeSpeaker&&e.activeSpeaker.value),Cn(1),Nn("ngIf",e.activeSpeaker&&!e.activeSpeaker.value.videoTracks.size),Cn(1),Nn("hidden",!e.activeSpeaker||!e.activeSpeaker.value.videoTracks.size)}}class E2{constructor(t,e,s,l,m){this.platform=t,this.locationStrategy=e,this.httpClient=s,this._snackBar=m,this.zoomAudioDecode=!1,this.zoomAudioEncode=!1,this.useVideoElementForZoom=!1,this.useCanvasElementForZoom=!1,this.session=!1,this.sessionLoading=!1,this.sessionError=!1,this.camera=!1,this.cameraLoading=!1,this.cameraError=!1,this.mic=!1,this.micLoading=!1,this.micError=!1,this.audio=!1,this.audioLoading=!1,this.audioError=!1,this.videoSDKProvider="zoom",console.log("Desktop Safri?",this.platform.SAFARI),this.configForm=new mr({videoSDKProvider:new Ph("zoom"),yourName:new Ph("User A"),sessionName:new Ph("testsdk"),sessionPasscode:new Ph("zoom123")}),history.pushState(null,"",window.location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,"",window.location.href)}),this.breakpoint=window.innerWidth<=700?1:2}onResize(t){this.breakpoint=t.target.innerWidth<=700?1:2}authorize(t){this.sessionLoading=!0,console.log(t),this.videoSDKProvider=t.videoSDKProvider,"zoom"===this.videoSDKProvider?this.httpClient.post("https://videosdk-sample-signature.herokuapp.com",{sessionName:t.sessionName,role:0}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"twilio"===this.videoSDKProvider?this.httpClient.post("https://twiliovideo-auth-server.herokuapp.com",{sessionName:t.sessionName,identity:t.yourName}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&this.httpClient.post("http://localhost:4400",{sessionName:t.sessionName,role:"1"}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1})}join(t,e){"zoom"===this.videoSDKProvider?(this.zoomClient=gx().createClient(),this.zoomClient.init("en-US","CDN"),this.zoomClient.join(e.sessionName,t,e.yourName,e.sessionPasscode).then(s=>{console.log(s),console.log(this.zoomClient.getSessionInfo()),this.zoomStream=this.zoomClient.getMediaStream(),this.sessionLoading=!1,this.session=!0,console.log(this.zoomClient.getAllUser()),this.zoomClient.getAllUser().length>1&&(this.activeSpeaker=this.zoomClient.getAllUser()[1],this.activeSpeaker.bVideoOn&&(console.log("loading particpant video"),this.zoomStream.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(l=>{console.log(l)})),console.log("active speaker",this.activeSpeaker)),this.zoomClient.on("media-sdk-change",l=>{"audio"===l.type&&"success"===l.result&&("encode"===l.action?this.zoomAudioEncode=!0:"decode"===l.action&&(this.zoomAudioDecode=!0))}),this.zoomClient.on("user-added",l=>{this._snackBar.open(l[0].displayName+" joined","",{verticalPosition:"top",duration:2e3}),this.activeSpeaker||(console.log("second user joined",l),console.log(this.zoomClient.getAllUser()),this.activeSpeaker=this.zoomClient.getAllUser().filter(m=>l[0].userId===m.userId)[0])}),this.zoomClient.on("user-updated",l=>{this.zoomClient.getCurrentUserInfo()&&this.zoomClient.getCurrentUserInfo().userId!==l[0].userId&&l[0].userId===this.activeSpeaker.userId&&("audio"in l[0]?this.activeSpeaker.audio=l[0].audio:"muted"in l[0]&&(this.activeSpeaker.muted=l[0].muted))}),this.zoomClient.on("user-removed",l=>{this.activeSpeaker.userId===l[0].userId&&(console.log("active speaker left"),this.activeSpeaker.bVideoOn&&this.zoomStream.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.zoomClient.getAllUser().length>1?(this.activeSpeaker=this.zoomClient.getAllUser()[1],this.activeSpeaker.bVideoOn&&this.zoomStream.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(()=>{console.log(s)})):this.activeSpeaker=null),this._snackBar.open(l[0].userId+" left","",{verticalPosition:"top",duration:2e3})}),this.zoomClient.on("active-speaker",l=>{this.activeSpeaker.userId!==l[0].userId&&this.zoomClient.getCurrentUserInfo().userId!==l[0].userId&&(console.log("new active speaker",l),this.activeSpeaker.bVideoOn&&this.zoomStream.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.activeSpeaker=this.zoomClient.getAllUser().filter(m=>l[0].userId===m.userId)[0],console.log(this.activeSpeaker),this.activeSpeaker.bVideoOn&&this.zoomStream.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(()=>{console.log(s)}))}),this.zoomClient.on("peer-video-state-change",l=>{(!this.activeSpeaker||l.userId===this.activeSpeaker.userId)&&("Start"===l.action?this.zoomStream.renderVideo(document.getElementById("participant-canvas"),l.userId,1920,1080,0,0,2).then(m=>{this.activeSpeaker=this.zoomClient.getAllUser().filter(E=>l.userId===E.userId)[0]}).catch(m=>{console.log(m)}):"Stop"===l.action&&this.zoomStream.stopRenderVideo(document.getElementById("participant-canvas"),l.userId).then(m=>{this.activeSpeaker=this.zoomClient.getAllUser().filter(E=>l.userId===E.userId)[0]}).catch(m=>{console.log(m)}))})}).catch(s=>{console.log(s),this.sessionLoading=!1})):"twilio"===this.videoSDKProvider?(0,rk.connect)(t,{name:e.sessionName,audio:!1,video:!1,dominantSpeaker:!0}).then(s=>{this.twilioRoom=s,console.log(`Successfully joined a Room: ${this.twilioRoom}`),this.sessionLoading=!1,this.session=!0,console.log(this.twilioRoom.participants),console.log(),Array.from(this.twilioRoom.participants,([m,E])=>({name:m,value:E})).length&&(console.log(this.twilioRoom.participants[1]),this.activeSpeaker=Array.from(this.twilioRoom.participants,([m,E])=>({name:m,value:E}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),this.twilioRoom.participants.forEach(m=>{console.log(m),m.tracks.forEach(E=>{console.log(E),E.track&&(console.log("render the particpant video"),document.getElementById("twilio-user-view-div").appendChild(E.track.attach()),E.track.on("disabled",()=>{console.log("did I mute?")}),E.track.on("enabled",()=>{console.log("did I unmute?")}))}),m.on("trackSubscribed",E=>{console.log(E),m.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(E.attach())),E.on("disabled",()=>{m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0),console.log("did I mute again?")}),E.on("enabled",()=>{m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1),console.log("did I unmute again?")})}),m.on("trackUnsubscribed",E=>{console.log("a video was stopped"),m.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioRoom.on("participantConnected",m=>{console.log(m),this._snackBar.open(m.identity+" joined","",{verticalPosition:"top",duration:2e3}),Array.from(this.twilioRoom.participants,([E,I])=>({name:E,value:I})).length&&(console.log(this.twilioRoom.participants[1]),this.activeSpeaker=Array.from(this.twilioRoom.participants,([E,I])=>({name:E,value:I}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),m.tracks.forEach(E=>{console.log(E),E.track&&(document.getElementById("twilio-user-view-div").appendChild(E.track.attach()),E.track.on("disabled",()=>{console.log("did I mute? 2"),console.log(m)}),E.track.on("enabled",()=>{console.log("did I unmute? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}))}),m.on("trackSubscribed",E=>{console.log(E),m.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(E.attach())),E.on("disabled",()=>{console.log("did I mute again? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}),E.on("enabled",()=>{console.log("did I unmute again? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1)})}),m.on("trackUnsubscribed",E=>{console.log("a video was stopped"),console.log("removing video?"),m.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioRoom.on("participantDisconnected",m=>{console.log("someone left",m),m.sid===this.activeSpeaker.value.sid&&(document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker=this.activeSpeaker=Array.from(this.twilioRoom.participants,([I,k])=>({name:I,value:k}))[0],console.log("new user talking change view",this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([I,k])=>({name:I,value:k}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([I,k])=>({name:I,value:k}))[0].value.track.attach()))),this._snackBar.open(m.identity+" left","",{verticalPosition:"top",duration:2e3})}),this.twilioRoom.on("dominantSpeakerChanged",m=>{console.log(m),console.log(m.identity,m.sid),console.log(m.sid===this.activeSpeaker.value.sid),m&&m.sid!==this.activeSpeaker.value.sid&&(console.log("swicth video"),document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker.value=m,this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([I,k])=>({name:I,value:k}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([I,k])=>({name:I,value:k}))[0].value.track.attach())),setTimeout(()=>{console.log(this.activeSpeaker)}))}),console.log(this.twilioRoom.localParticipant);let l=Array.from(this.twilioRoom.participants,([m,E])=>({name:m,value:E}));console.log(l)}).catch(s=>{console.log(s),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient=T3().createClient({codec:"vp8",mode:"rtc"}),this.agoraClient.join("59dcf92e250b4392839cf3c7ea2818d0",e.sessionName,t).then(s=>{console.log(s),this.sessionLoading=!1,this.session=!0}).catch(s=>{console.log(s),this.sessionLoading=!1}))}startAudio(){this.audioLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomStream.startAudio(),this.mic=!0,this.audio=!0,this.audioLoading=!1):"twilio"===this.videoSDKProvider&&(0,rk.createLocalAudioTrack)().then(t=>{this.twilioRoom.localParticipant.publishTrack(t);const e=t.attach();document.body.appendChild(e),console.log("twilio mic"),this.micLoading=!1,this.mic=!0,this.audio=!0})}unmute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomStream.unmuteAudio(),console.log("zoom mic"),this.micLoading=!1,this.mic=!0):"twilio"===this.videoSDKProvider?(this.twilioRoom.localParticipant.audioTracks.forEach(t=>{t.track.enable()}),this.micLoading=!1,this.mic=!0):"agora"===this.videoSDKProvider&&(this.agoraClient.createMicrophoneAudioTrack(),console.log("agora mic"),this.micLoading=!1,this.mic=!0)}mute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomStream.muteAudio(),this.micLoading=!1,this.mic=!1):"twilio"===this.videoSDKProvider?(this.twilioRoom.localParticipant.audioTracks.forEach(t=>{t.track.disable()}),this.micLoading=!1,this.mic=!1):"agora"===this.videoSDKProvider&&(this.agoraClient.createMicrophoneAudioTrack().setEnabled(!1),this.micLoading=!1,this.mic=!1)}startCamera(){this.cameraLoading=!0,"zoom"===this.videoSDKProvider?!this.zoomStream.isSupportMultipleVideos()&&"function"==typeof OffscreenCanvas||/android/i.test(navigator.userAgent)?this.zoomStream.startVideo({videoElement:document.getElementById("self-view-video")}).then(()=>{"function"!=typeof MediaStreamTrackProcessor?this.zoomStream.renderVideo(document.getElementById("self-view-canvas"),this.zoomClient.getCurrentUserInfo().userId,1920,1080,0,0,2).then(()=>{this.useCanvasElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)}):(this.useVideoElementForZoom=!0,this.cameraLoading=!1,this.camera=!0)}).catch(t=>{console.log(t)}):this.zoomStream.startVideo().then(()=>{this.zoomStream.renderVideo(document.getElementById("self-view-canvas"),this.zoomClient.getCurrentUserInfo().userId,1920,1080,0,0,2).then(()=>{this.useCanvasElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)}):"twilio"===this.videoSDKProvider?(console.log(this.twilioRoom.participants),console.log(this.twilioRoom.participants.values()),(0,rk.createLocalVideoTrack)({height:{ideal:720,min:480,max:1080},width:{ideal:1280,min:640,max:1920},aspectRatio:16/9}).then(t=>{this.twilioRoom.localParticipant.publishTrack(t),document.getElementById("twilio-self-view-div").appendChild(t.attach()),this.cameraLoading=!1,this.camera=!0})):"agora"===this.videoSDKProvider&&(this.agoraClient.createCameraVideoTrack(),this.cameraLoading=!1,this.camera=!0)}stopCamera(){this.cameraLoading=!0,this.camera=!1,"zoom"===this.videoSDKProvider?(this.zoomStream.stopVideo(),this.cameraLoading=!1,this.camera=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1):"twilio"===this.videoSDKProvider?this.twilioRoom.localParticipant.videoTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove(),console.log("video stopped"),this.cameraLoading=!1,this.camera=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient.createCameraVideoTrack().setEnabled(!1),this.cameraLoading=!1,this.camera=!1)}leave(){this.sessionLoading=!0,this.camera=!1,this.mic=!1,this.audio=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1,this.activeSpeaker=null,setTimeout(()=>{"zoom"===this.videoSDKProvider?(this.zoomClient.leave(),this.sessionLoading=!1,this.session=!1):"twilio"===this.videoSDKProvider?(this.twilioRoom.localParticipant.videoTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove()}),this.twilioRoom.localParticipant.audioTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.querySelector("audio")?.remove()}),this.twilioRoom.disconnect(),this.sessionLoading=!1,this.session=!1):"agora"===this.videoSDKProvider&&(this.agoraClient.leave(),this.sessionLoading=!1,this.session=!1)},500)}static#e=this.\u0275fac=function(e){return new(e||E2)(gt(Dc),gt(vD),gt(ok),gt(xi),gt(Ky))};static#t=this.\u0275cmp=Sa({type:E2,selectors:[["app-root"]],decls:13,vars:12,consts:[["class","config",3,"formGroup","ngSubmit",4,"ngIf"],["class","controls",4,"ngIf"],["class","sessionLoading",4,"ngIf"],[1,"view"],["rowHeight","16:9",3,"cols","resize"],[4,"ngIf"],[1,"config",3,"formGroup","ngSubmit"],["appearance","outline"],["formControlName","videoSDKProvider"],["value","zoom"],["value","twilio"],["matInput","","formControlName","yourName","autocomplete","off"],["matSuffix",""],["matInput","","formControlName","sessionName","autocomplete","off"],["matInput","","formControlName","sessionPasscode","autocomplete","off"],["mat-fab","","color","primary",4,"ngIf"],["mat-fab","","color","primary"],[1,"controls"],["mat-fab","","color","primary",3,"click",4,"ngIf"],["mat-fab","","color","warn",3,"click"],["mat-fab","","color","primary",3,"click"],["mat-fab","","color","primary",3,"matMenuTriggerFor","matBadge"],["menu","matMenu"],["mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item",""],[1,"sessionLoading"],["id","self-view-video","width","1920","height","1080",3,"hidden"],["id","self-view-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-self-view-div",3,"hidden"],["id","participant-canvas","width","1920","height","1080",3,"hidden",4,"ngIf"],["id","participant-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-user-view-div",3,"hidden"]],template:function(e,s){1&e&&(pr(0,mH,28,2,"form",0),pr(1,yH,11,7,"div",1),pr(2,EH,2,0,"div",2),Tn(3,"div",3)(4,"mat-grid-list",4),ao("resize",function(m){return s.onResize(m)},0,ka),Tn(5,"mat-grid-tile"),pr(6,bH,1,0,"mat-spinner",5),pr(7,S5,5,4,"ng-container",5),pr(8,OH,4,3,"ng-container",5),Ln(),Tn(9,"mat-grid-tile"),pr(10,va,2,0,"p",5),pr(11,s0,4,3,"ng-container",5),pr(12,xH,4,3,"ng-container",5),Ln()()()),2&e&&(Nn("ngIf",!s.session&&!s.sessionLoading),Cn(1),Nn("ngIf",s.session&&!s.sessionLoading),Cn(1),Nn("ngIf",s.sessionLoading),Cn(1),ys("display",s.session?"flex":"none"),Cn(1),Nn("cols",s.breakpoint),Cn(2),Nn("ngIf",s.cameraLoading),Cn(1),Nn("ngIf","zoom"===s.videoSDKProvider),Cn(1),Nn("ngIf","twilio"===s.videoSDKProvider),Cn(2),Nn("ngIf",!s.activeSpeaker),Cn(1),Nn("ngIf","zoom"===s.videoSDKProvider),Cn(1),Nn("ngIf","twilio"===s.videoSDKProvider))},dependencies:[lM,gS,h3,IS,ou,Fi,DS,sx,h4,wL,N4,a2,FL,KL,rL,W4,PV,zQ,ZQ,t5,cH,qi,hH,y2],styles:["mat-grid-list[_ngcontent-%COMP%]{position:unset}mat-grid-tile[_ngcontent-%COMP%]{background:lightblue}mat-grid-tile[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:17px;vertical-align:middle;height:17px;font-size:15px}p[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:10px;left:10px;color:#fff;z-index:1}.view[_ngcontent-%COMP%]{height:100vh;align-items:center}.sessionLoading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}#twilio-self-view-div[_ngcontent-%COMP%], #twilio-user-view-div[_ngcontent-%COMP%]{width:100%;height:100%}#self-view-video[_ngcontent-%COMP%], #self-view-canvas[_ngcontent-%COMP%]{transform:scaleX(-1);height:100%!important}video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{width:100%;height:auto;aspect-ratio:16/9;background-color:#add8e6}.config[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;height:100vh}.config[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:300px}.controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;display:flex;justify-content:center;width:100%;z-index:2}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]})}function b2(r){return new _n(3e3,!1)}function B5(){return typeof window<"u"&&typeof window.document<"u"}function nm(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Wg(r){switch(r.length){case 0:return new _1;case 1:return r[0];default:return new BV(r)}}function F5(r,t,e,s,l=new Map,m=new Map){const E=[],I=[];let k=-1,F=null;if(s.forEach(ee=>{const me=ee.get("offset"),Le=me==k,Ke=Le&&F||new Map;ee.forEach((rt,Ct)=>{let Jt=Ct,tn=rt;if("offset"!==Ct)switch(Jt=t.normalizePropertyName(Jt,E),tn){case"!":tn=l.get(Ct);break;case Fg:tn=m.get(Ct);break;default:tn=t.normalizeStyleValue(Ct,Jt,tn,E)}Ke.set(Jt,tn)}),Le||I.push(Ke),F=Ke,k=me}),E.length)throw function M5(r){return new _n(3502,!1)}();return I}function T2(r,t,e,s){switch(t){case"start":r.onStart(()=>s(e&&Fp(e,"start",r)));break;case"done":r.onDone(()=>s(e&&Fp(e,"done",r)));break;case"destroy":r.onDestroy(()=>s(e&&Fp(e,"destroy",r)))}}function Fp(r,t,e){const m=$y(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,e.totalTime??r.totalTime,!!e.disabled),E=r._data;return null!=E&&(m._data=E),m}function $y(r,t,e,s,l="",m=0,E){return{element:r,triggerName:t,fromState:e,toState:s,phaseName:l,totalTime:m,disabled:!!E}}function vl(r,t,e){let s=r.get(t);return s||r.set(t,s=e),s}function w2(r){const t=r.indexOf(":");return[r.substring(1,t),r.slice(t+1)]}let uB=(r,t)=>!1,R2=(r,t,e)=>[],O2=null;function W1(r){const t=r.parentNode||r.host;return t===O2?null:t}(nm()||typeof Element<"u")&&(B5()?(O2=(()=>document.documentElement)(),uB=(r,t)=>{for(;t;){if(t===r)return!0;t=W1(t)}return!1}):uB=(r,t)=>r.contains(t),R2=(r,t,e)=>{if(e)return Array.from(r.querySelectorAll(t));const s=r.querySelector(t);return s?[s]:[]});let Mv=null,hB=!1;const j5=uB,pB=R2;let Q5=(()=>{class r{validateStyleProperty(e){return function U5(r){Mv||(Mv=function KH(){return typeof document<"u"?document.body:null}()||{},hB=!!Mv.style&&"WebkitAppearance"in Mv.style);let t=!0;return Mv.style&&!function dB(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in Mv.style,!t&&hB&&(t="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in Mv.style)),t}(e)}matchesElement(e,s){return!1}containsElement(e,s){return j5(e,s)}getParentElement(e){return W1(e)}query(e,s,l){return pB(e,s,l)}computeStyle(e,s,l){return l||""}animate(e,s,l,m,E,I=[],k){return new _1(l,m)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})(),D2=(()=>{class r{}return r.NOOP=new Q5,r})();const fB="ng-enter",z1="ng-leave",k2="ng-trigger",N2=".ng-trigger",H5="ng-animating",mB=".ng-animating";function Fh(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:gB(parseFloat(t[1]),t[2])}function gB(r,t){return"s"===t?1e3*r:r}function P2(r,t,e){return r.hasOwnProperty("duration")?r:function YH(r,t,e){let l,m=0,E="";if("string"==typeof r){const I=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===I)return t.push(b2()),{duration:0,delay:0,easing:""};l=gB(parseFloat(I[1]),I[2]);const k=I[3];null!=k&&(m=gB(parseFloat(k),I[4]));const F=I[5];F&&(E=F)}else l=r;if(!e){let I=!1,k=t.length;l<0&&(t.push(function LH(){return new _n(3100,!1)}()),I=!0),m<0&&(t.push(function S2(){return new _n(3101,!1)}()),I=!0),I&&t.splice(k,0,b2())}return{duration:l,delay:m,easing:E}}(r,t,e)}function Y1(r,t={}){return Object.keys(r).forEach(e=>{t[e]=r[e]}),t}function G5(r){const t=new Map;return Object.keys(r).forEach(e=>{t.set(e,r[e])}),t}function ed(r,t=new Map,e){if(e)for(let[s,l]of e)t.set(s,l);for(let[s,l]of r)t.set(s,l);return t}function _B(r,t,e){return e?t+":"+e+";":""}function q1(r){let t="";for(let e=0;e<r.style.length;e++){const s=r.style.item(e);t+=_B(0,s,r.style.getPropertyValue(s))}for(const e in r.style)r.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=_B(0,M2(e),r.style[e]));r.setAttribute("style",t)}function im(r,t,e){r.style&&(t.forEach((s,l)=>{const m=$1(l);e&&!e.has(l)&&e.set(l,r.style[m]),r.style[m]=s}),nm()&&q1(r))}function Zy(r,t){r.style&&(t.forEach((e,s)=>{const l=$1(s);r.style[l]=""}),nm()&&q1(r))}function J1(r){return Array.isArray(r)?1==r.length?r[0]:xV(r):r}const vB=new RegExp("{{\\s*(.+?)\\s*}}","g");function W5(r){let t=[];if("string"==typeof r){let e;for(;e=vB.exec(r);)t.push(e[1]);vB.lastIndex=0}return t}function lu(r,t,e){const s=r.toString(),l=s.replace(vB,(m,E)=>{let I=t[E];return null==I&&(e.push(function T5(r){return new _n(3003,!1)}()),I=""),I.toString()});return l==s?r:l}function X1(r){const t=[];let e=r.next();for(;!e.done;)t.push(e.value),e=r.next();return t}const K5=/-+([a-z0-9])/g;function $1(r){return r.replace(K5,(...t)=>t[1].toUpperCase())}function M2(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Mu(r,t,e){switch(t.type){case 7:return r.visitTrigger(t,e);case 0:return r.visitState(t,e);case 1:return r.visitTransition(t,e);case 2:return r.visitSequence(t,e);case 3:return r.visitGroup(t,e);case 4:return r.visitAnimate(t,e);case 5:return r.visitKeyframes(t,e);case 6:return r.visitStyle(t,e);case 8:return r.visitReference(t,e);case 9:return r.visitAnimateChild(t,e);case 10:return r.visitAnimateRef(t,e);case 11:return r.visitQuery(t,e);case 12:return r.visitStagger(t,e);default:throw function oB(r){return new _n(3004,!1)}()}}function AB(r,t){return window.getComputedStyle(r)[t]}function q5(r,t){const e=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(s=>function yB(r,t,e){if(":"==r[0]){const k=function eE(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,s)=>parseFloat(s)>parseFloat(e);case":decrement":return(e,s)=>parseFloat(s)<parseFloat(e);default:return t.push(function P5(r){return new _n(3016,!1)}()),"* => *"}}(r,e);if("function"==typeof k)return void t.push(k);r=k}const s=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return e.push(function N5(r){return new _n(3015,!1)}()),t;const l=s[1],m=s[2],E=s[3];t.push(Wd(l,E));"<"==m[0]&&!("*"==l&&"*"==E)&&t.push(Wd(E,l))}(s,e,t)):e.push(r),e}const l0=new Set(["true","1"]),d0=new Set(["false","0"]);function Wd(r,t){const e=l0.has(r)||d0.has(r),s=l0.has(t)||d0.has(t);return(l,m)=>{let E="*"==r||r==l,I="*"==t||t==m;return!E&&e&&"boolean"==typeof l&&(E=l?l0.has(r):d0.has(r)),!I&&s&&"boolean"==typeof m&&(I=m?l0.has(t):d0.has(t)),E&&I}}const tw=new RegExp("s*:selfs*,?","g");function L2(r,t,e,s){return new J5(r).build(t,e,s)}class J5{constructor(t){this._driver=t}build(t,e,s){const l=new ZH(e);return this._resetContextStyleTimingState(l),Mu(this,J1(t),l)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let s=e.queryCount=0,l=e.depCount=0;const m=[],E=[];return"@"==t.name.charAt(0)&&e.errors.push(function w5(){return new _n(3006,!1)}()),t.definitions.forEach(I=>{if(this._resetContextStyleTimingState(e),0==I.type){const k=I,F=k.name;F.toString().split(/\s*,\s*/).forEach(ee=>{k.name=ee,m.push(this.visitState(k,e))}),k.name=F}else if(1==I.type){const k=this.visitTransition(I,e);s+=k.queryCount,l+=k.depCount,E.push(k)}else e.errors.push(function BH(){return new _n(3007,!1)}())}),{type:7,name:t.name,states:m,transitions:E,queryCount:s,depCount:l,options:null}}visitState(t,e){const s=this.visitStyle(t.styles,e),l=t.options&&t.options.params||null;if(s.containsDynamicStyles){const m=new Set,E=l||{};s.styles.forEach(I=>{I instanceof Map&&I.forEach(k=>{W5(k).forEach(F=>{E.hasOwnProperty(F)||m.add(F)})})}),m.size&&(X1(m.values()),e.errors.push(function R5(r,t){return new _n(3008,!1)}()))}return{type:0,name:t.name,style:s,options:l?{params:l}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const s=Mu(this,J1(t.animation),e);return{type:1,matchers:q5(t.expr,e.errors),animation:s,queryCount:e.queryCount,depCount:e.depCount,options:tE(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(s=>Mu(this,s,e)),options:tE(t.options)}}visitGroup(t,e){const s=e.currentTime;let l=0;const m=t.steps.map(E=>{e.currentTime=s;const I=Mu(this,E,e);return l=Math.max(l,e.currentTime),I});return e.currentTime=l,{type:3,steps:m,options:tE(t.options)}}visitAnimate(t,e){const s=function $5(r,t){if(r.hasOwnProperty("duration"))return r;if("number"==typeof r)return B2(P2(r,t).duration,0,"");const e=r;if(e.split(/\s+/).some(m=>"{"==m.charAt(0)&&"{"==m.charAt(1))){const m=B2(0,0,"");return m.dynamic=!0,m.strValue=e,m}const l=P2(e,t);return B2(l.duration,l.delay,l.easing)}(t.timings,e.errors);e.currentAnimateTimings=s;let l,m=t.styles?t.styles:_l({});if(5==m.type)l=this.visitKeyframes(m,e);else{let E=t.styles,I=!1;if(!E){I=!0;const F={};s.easing&&(F.easing=s.easing),E=_l(F)}e.currentTime+=s.duration+s.delay;const k=this.visitStyle(E,e);k.isEmptyStep=I,l=k}return e.currentAnimateTimings=null,{type:4,timings:s,style:l,options:null}}visitStyle(t,e){const s=this._makeStyleAst(t,e);return this._validateStyleAst(s,e),s}_makeStyleAst(t,e){const s=[],l=Array.isArray(t.styles)?t.styles:[t.styles];for(let I of l)"string"==typeof I?I===Fg?s.push(I):e.errors.push(new _n(3002,!1)):s.push(G5(I));let m=!1,E=null;return s.forEach(I=>{if(I instanceof Map&&(I.has("easing")&&(E=I.get("easing"),I.delete("easing")),!m))for(let k of I.values())if(k.toString().indexOf("{{")>=0){m=!0;break}}),{type:6,styles:s,easing:E,offset:t.offset,containsDynamicStyles:m,options:null}}_validateStyleAst(t,e){const s=e.currentAnimateTimings;let l=e.currentTime,m=e.currentTime;s&&m>0&&(m-=s.duration+s.delay),t.styles.forEach(E=>{"string"!=typeof E&&E.forEach((I,k)=>{const F=e.collectedStyles.get(e.currentQuerySelector),ee=F.get(k);let me=!0;ee&&(m!=l&&m>=ee.startTime&&l<=ee.endTime&&(e.errors.push(function O5(r,t,e,s,l){return new _n(3010,!1)}()),me=!1),m=ee.startTime),me&&F.set(k,{startTime:m,endTime:l}),e.options&&function JH(r,t,e){const s=t.params||{},l=W5(r);l.length&&l.forEach(m=>{s.hasOwnProperty(m)||e.push(function iB(r){return new _n(3001,!1)}())})}(I,e.options,e.errors)})})}visitKeyframes(t,e){const s={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function UH(){return new _n(3011,!1)}()),s;let m=0;const E=[];let I=!1,k=!1,F=0;const ee=t.steps.map(tn=>{const Vn=this._makeStyleAst(tn,e);let nn=null!=Vn.offset?Vn.offset:function Ri(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(e instanceof Map&&e.has("offset")){const s=e;t=parseFloat(s.get("offset")),s.delete("offset")}});else if(r instanceof Map&&r.has("offset")){const e=r;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Vn.styles),n=0;return null!=nn&&(m++,n=Vn.offset=nn),k=k||n<0||n>1,I=I||n<F,F=n,E.push(n),Vn});k&&e.errors.push(function D5(){return new _n(3012,!1)}()),I&&e.errors.push(function VH(){return new _n(3200,!1)}());const me=t.steps.length;let Le=0;m>0&&m<me?e.errors.push(function aB(){return new _n(3202,!1)}()):0==m&&(Le=1/(me-1));const Ke=me-1,rt=e.currentTime,Ct=e.currentAnimateTimings,Jt=Ct.duration;return ee.forEach((tn,Vn)=>{const nn=Le>0?Vn==Ke?1:Le*Vn:E[Vn],n=nn*Jt;e.currentTime=rt+Ct.delay+n,Ct.duration=n,this._validateStyleAst(tn,e),tn.offset=nn,s.styles.push(tn)}),s}visitReference(t,e){return{type:8,animation:Mu(this,J1(t.animation),e),options:tE(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:tE(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:tE(t.options)}}visitQuery(t,e){const s=e.currentQuerySelector,l=t.options||{};e.queryCount++,e.currentQuery=t;const[m,E]=function X5(r){const t=!!r.split(/\s*,\s*/).find(e=>":self"==e);return t&&(r=r.replace(tw,"")),r=r.replace(/@\*/g,N2).replace(/@\w+/g,e=>N2+"-"+e.slice(1)).replace(/:animating/g,mB),[r,t]}(t.selector);e.currentQuerySelector=s.length?s+" "+m:m,vl(e.collectedStyles,e.currentQuerySelector,new Map);const I=Mu(this,J1(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=s,{type:11,selector:m,limit:l.limit||0,optional:!!l.optional,includeSelf:E,animation:I,originalSelector:t.selector,options:tE(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function H1(){return new _n(3013,!1)}());const s="full"===t.timings?{duration:0,delay:0,easing:"full"}:P2(t.timings,e.errors,!0);return{type:12,animation:Mu(this,J1(t.animation),e),timings:s,options:null}}}class ZH{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function tE(r){return r?(r=Y1(r)).params&&(r.params=function SB(r){return r?Y1(r):null}(r.params)):r={},r}function B2(r,t,e){return{duration:r,delay:t,easing:e}}function F2(r,t,e,s,l,m,E=null,I=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:s,duration:l,delay:m,totalTime:l+m,easing:E,subTimeline:I}}class nw{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let s=this._map.get(t);s||this._map.set(t,s=[]),s.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Z5=new RegExp(":enter","g"),ej=new RegExp(":leave","g");function CB(r,t,e,s,l,m=new Map,E=new Map,I,k,F=[]){return(new tj).buildKeyframes(r,t,e,s,l,m,E,I,k,F)}class tj{buildKeyframes(t,e,s,l,m,E,I,k,F,ee=[]){F=F||new nw;const me=new V2(t,e,F,l,m,ee,[]);me.options=k;const Le=k.delay?Fh(k.delay):0;me.currentTimeline.delayNextStep(Le),me.currentTimeline.setStyles([E],null,me.errors,k),Mu(this,s,me);const Ke=me.timelines.filter(rt=>rt.containsAnimation());if(Ke.length&&I.size){let rt;for(let Ct=Ke.length-1;Ct>=0;Ct--){const Jt=Ke[Ct];if(Jt.element===e){rt=Jt;break}}rt&&!rt.allowOnlyTimelineStyles()&&rt.setStyles([I],null,me.errors,k)}return Ke.length?Ke.map(rt=>rt.buildKeyframes()):[F2(e,[],[],[],0,Le,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const s=e.subInstructions.get(e.element);if(s){const l=e.createSubContext(t.options),m=e.currentTimeline.currentTime,E=this._visitSubInstructions(s,l,l.options);m!=E&&e.transformIntoNewTimeline(E)}e.previousNode=t}visitAnimateRef(t,e){const s=e.createSubContext(t.options);s.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,s),this.visitReference(t.animation,s),e.transformIntoNewTimeline(s.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,s){for(const l of t){const m=l?.delay;if(m){const E="number"==typeof m?m:Fh(lu(m,l?.params??{},e.errors));s.delayNextStep(E)}}}_visitSubInstructions(t,e,s){let m=e.currentTimeline.currentTime;const E=null!=s.duration?Fh(s.duration):null,I=null!=s.delay?Fh(s.delay):null;return 0!==E&&t.forEach(k=>{const F=e.appendInstructionToTimeline(k,E,I);m=Math.max(m,F.duration+F.delay)}),m}visitReference(t,e){e.updateOptions(t.options,!0),Mu(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const s=e.subContextCount;let l=e;const m=t.options;if(m&&(m.params||m.delay)&&(l=e.createSubContext(m),l.transformIntoNewTimeline(),null!=m.delay)){6==l.previousNode.type&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=yi);const E=Fh(m.delay);l.delayNextStep(E)}t.steps.length&&(t.steps.forEach(E=>Mu(this,E,l)),l.currentTimeline.applyStylesToKeyframe(),l.subContextCount>s&&l.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const s=[];let l=e.currentTimeline.currentTime;const m=t.options&&t.options.delay?Fh(t.options.delay):0;t.steps.forEach(E=>{const I=e.createSubContext(t.options);m&&I.delayNextStep(m),Mu(this,E,I),l=Math.max(l,I.currentTimeline.currentTime),s.push(I.currentTimeline)}),s.forEach(E=>e.currentTimeline.mergeTimelineCollectedStyles(E)),e.transformIntoNewTimeline(l),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const s=t.strValue;return P2(e.params?lu(s,e.params,e.errors):s,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const s=e.currentAnimateTimings=this._visitTiming(t.timings,e),l=e.currentTimeline;s.delay&&(e.incrementTime(s.delay),l.snapshotCurrentStyles());const m=t.style;5==m.type?this.visitKeyframes(m,e):(e.incrementTime(s.duration),this.visitStyle(m,e),l.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const s=e.currentTimeline,l=e.currentAnimateTimings;!l&&s.hasCurrentStyleProperties()&&s.forwardFrame();const m=l&&l.easing||t.easing;t.isEmptyStep?s.applyEmptyStep(m):s.setStyles(t.styles,m,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const s=e.currentAnimateTimings,l=e.currentTimeline.duration,m=s.duration,I=e.createSubContext().currentTimeline;I.easing=s.easing,t.styles.forEach(k=>{I.forwardTime((k.offset||0)*m),I.setStyles(k.styles,k.easing,e.errors,e.options),I.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(I),e.transformIntoNewTimeline(l+m),e.previousNode=t}visitQuery(t,e){const s=e.currentTimeline.currentTime,l=t.options||{},m=l.delay?Fh(l.delay):0;m&&(6===e.previousNode.type||0==s&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=yi);let E=s;const I=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!l.optional,e.errors);e.currentQueryTotal=I.length;let k=null;I.forEach((F,ee)=>{e.currentQueryIndex=ee;const me=e.createSubContext(t.options,F);m&&me.delayNextStep(m),F===e.element&&(k=me.currentTimeline),Mu(this,t.animation,me),me.currentTimeline.applyStylesToKeyframe(),E=Math.max(E,me.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(E),k&&(e.currentTimeline.mergeTimelineCollectedStyles(k),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const s=e.parentContext,l=e.currentTimeline,m=t.timings,E=Math.abs(m.duration),I=E*(e.currentQueryTotal-1);let k=E*e.currentQueryIndex;switch(m.duration<0?"reverse":m.easing){case"reverse":k=I-k;break;case"full":k=s.currentStaggerTime}const ee=e.currentTimeline;k&&ee.delayNextStep(k);const me=ee.currentTime;Mu(this,t.animation,e),e.previousNode=t,s.currentStaggerTime=l.currentTime-me+(l.startTime-s.currentTimeline.startTime)}}const yi={};class V2{constructor(t,e,s,l,m,E,I,k){this._driver=t,this.element=e,this.subInstructions=s,this._enterClassName=l,this._leaveClassName=m,this.errors=E,this.timelines=I,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=yi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=k||new rw(this._driver,e,0),I.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const s=t;let l=this.options;null!=s.duration&&(l.duration=Fh(s.duration)),null!=s.delay&&(l.delay=Fh(s.delay));const m=s.params;if(m){let E=l.params;E||(E=this.options.params={}),Object.keys(m).forEach(I=>{(!e||!E.hasOwnProperty(I))&&(E[I]=lu(m[I],E,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const s=t.params={};Object.keys(e).forEach(l=>{s[l]=e[l]})}}return t}createSubContext(t=null,e,s){const l=e||this.element,m=new V2(this._driver,l,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(l,s||0));return m.previousNode=this.previousNode,m.currentAnimateTimings=this.currentAnimateTimings,m.options=this._copyOptions(),m.updateOptions(t),m.currentQueryIndex=this.currentQueryIndex,m.currentQueryTotal=this.currentQueryTotal,m.parentContext=this,this.subContextCount++,m}transformIntoNewTimeline(t){return this.previousNode=yi,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,s){const l={duration:e??t.duration,delay:this.currentTimeline.currentTime+(s??0)+t.delay,easing:""},m=new tG(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,l,t.stretchStartingKeyframe);return this.timelines.push(m),l}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,s,l,m,E){let I=[];if(l&&I.push(this.element),t.length>0){t=(t=t.replace(Z5,"."+this._enterClassName)).replace(ej,"."+this._leaveClassName);let F=this._driver.query(this.element,t,1!=s);0!==s&&(F=s<0?F.slice(F.length+s,F.length):F.slice(0,s)),I.push(...F)}return!m&&0==I.length&&E.push(function k5(r){return new _n(3014,!1)}()),I}}class rw{constructor(t,e,s,l){this._driver=t,this.element=e,this.startTime=s,this._elementTimelineStylesLookup=l,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new rw(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,s]of this._globalTimelineStyles)this._backFill.set(e,s||Fg),this._currentKeyframe.set(e,Fg);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,s,l){e&&this._previousKeyframe.set("easing",e);const m=l&&l.params||{},E=function nj(r,t){const e=new Map;let s;return r.forEach(l=>{if("*"===l){s=s||t.keys();for(let m of s)e.set(m,Fg)}else ed(l,e)}),e}(t,this._globalTimelineStyles);for(let[I,k]of E){const F=lu(k,m,s);this._pendingStyles.set(I,F),this._localTimelineStyles.has(I)||this._backFill.set(I,this._globalTimelineStyles.get(I)??Fg),this._updateStyle(I,F)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,s)=>{const l=this._styleSummary.get(s);(!l||e.time>l.time)&&this._updateStyle(s,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,s=1===this._keyframes.size&&0===this.duration;let l=[];this._keyframes.forEach((I,k)=>{const F=ed(I,new Map,this._backFill);F.forEach((ee,me)=>{"!"===ee?t.add(me):ee===Fg&&e.add(me)}),s||F.set("offset",k/this.duration),l.push(F)});const m=t.size?X1(t.values()):[],E=e.size?X1(e.values()):[];if(s){const I=l[0],k=new Map(I);I.set("offset",0),k.set("offset",1),l=[I,k]}return F2(this.element,l,m,E,this.duration,this.startTime,this.easing,!1)}}class tG extends rw{constructor(t,e,s,l,m,E,I=!1){super(t,e,E.delay),this.keyframes=s,this.preStyleProps=l,this.postStyleProps=m,this._stretchStartingKeyframe=I,this.timings={duration:E.duration,delay:E.delay,easing:E.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:s,easing:l}=this.timings;if(this._stretchStartingKeyframe&&e){const m=[],E=s+e,I=e/E,k=ed(t[0]);k.set("offset",0),m.push(k);const F=ed(t[0]);F.set("offset",Al(I)),m.push(F);const ee=t.length-1;for(let me=1;me<=ee;me++){let Le=ed(t[me]);const Ke=Le.get("offset");Le.set("offset",Al((e+Ke*s)/E)),m.push(Le)}s=E,e=0,l="",t=m}return F2(this.element,t,this.preStyleProps,this.postStyleProps,s,e,l,!0)}}function Al(r,t=3){const e=Math.pow(10,t-1);return Math.round(r*e)/e}class j2{}const Q2=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class rj extends j2{normalizePropertyName(t,e){return $1(t)}normalizeStyleValue(t,e,s,l){let m="";const E=s.toString().trim();if(Q2.has(e)&&0!==s&&"0"!==s)if("number"==typeof s)m="px";else{const I=s.match(/^[+-]?[\d\.]+([a-z]*)$/);I&&0==I[1].length&&l.push(function Q1(r,t){return new _n(3005,!1)}())}return E+m}}function iw(r,t,e,s,l,m,E,I,k,F,ee,me,Le){return{type:0,element:r,triggerName:t,isRemovalTransition:l,fromState:e,fromStyles:m,toState:s,toStyles:E,timelines:I,queriedElements:k,preStyleProps:F,postStyleProps:ee,totalTime:me,errors:Le}}const h0={};class IB{constructor(t,e,s){this._triggerName=t,this.ast=e,this._stateStyles=s}match(t,e,s,l){return function oG(r,t,e,s,l){return r.some(m=>m(t,e,s,l))}(this.ast.matchers,t,e,s,l)}buildStyles(t,e,s){let l=this._stateStyles.get("*");return void 0!==t&&(l=this._stateStyles.get(t?.toString())||l),l?l.buildStyles(e,s):new Map}build(t,e,s,l,m,E,I,k,F,ee){const me=[],Le=this.ast.options&&this.ast.options.params||h0,rt=this.buildStyles(s,I&&I.params||h0,me),Ct=k&&k.params||h0,Jt=this.buildStyles(l,Ct,me),tn=new Set,Vn=new Map,nn=new Map,n="void"===l,i={params:ij(Ct,Le),delay:this.ast.options?.delay},o=ee?[]:CB(t,e,this.ast.animation,m,E,rt,Jt,i,F,me);let c=0;if(o.forEach(g=>{c=Math.max(g.duration+g.delay,c)}),me.length)return iw(e,this._triggerName,s,l,n,rt,Jt,[],[],Vn,nn,c,me);o.forEach(g=>{const p=g.element,v=vl(Vn,p,new Set);g.preStyleProps.forEach(y=>v.add(y));const _=vl(nn,p,new Set);g.postStyleProps.forEach(y=>_.add(y)),p!==e&&tn.add(p)});const h=X1(tn.values());return iw(e,this._triggerName,s,l,n,rt,Jt,o,h,Vn,nn,c)}}function ij(r,t){const e=Y1(t);for(const s in r)r.hasOwnProperty(s)&&null!=r[s]&&(e[s]=r[s]);return e}class Oi{constructor(t,e,s){this.styles=t,this.defaultParams=e,this.normalizer=s}buildStyles(t,e){const s=new Map,l=Y1(this.defaultParams);return Object.keys(t).forEach(m=>{const E=t[m];null!==E&&(l[m]=E)}),this.styles.styles.forEach(m=>{"string"!=typeof m&&m.forEach((E,I)=>{E&&(E=lu(E,l,e));const k=this.normalizer.normalizePropertyName(I,e);E=this.normalizer.normalizeStyleValue(I,k,E,e),s.set(k,E)})}),s}}class xv{constructor(t,e,s){this.name=t,this.ast=e,this._normalizer=s,this.transitionFactories=[],this.states=new Map,e.states.forEach(l=>{this.states.set(l.name,new Oi(l.style,l.options&&l.options.params||{},s))}),H2(this.states,"true","1"),H2(this.states,"false","0"),e.transitions.forEach(l=>{this.transitionFactories.push(new IB(t,l,this.states))}),this.fallbackTransition=function sj(r,t,e){return new IB(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(E,I)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,s,l){return this.transitionFactories.find(E=>E.match(t,e,s,l))||null}matchStyles(t,e,s){return this.fallbackTransition.buildStyles(t,e,s)}}function H2(r,t,e){r.has(t)?r.has(e)||r.set(e,r.get(t)):r.has(e)&&r.set(t,r.get(e))}const sG=new nw;class nd{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const s=[],m=L2(this._driver,e,s,[]);if(s.length)throw function C2(r){return new _n(3503,!1)}();this._animations.set(t,m)}_buildPlayer(t,e,s){const l=t.element,m=F5(0,this._normalizer,0,t.keyframes,e,s);return this._driver.animate(l,m,t.duration,t.delay,t.easing,[],!0)}create(t,e,s={}){const l=[],m=this._animations.get(t);let E;const I=new Map;if(m?(E=CB(this._driver,e,m,fB,z1,new Map,new Map,s,sG,l),E.forEach(ee=>{const me=vl(I,ee.element,new Map);ee.postStyleProps.forEach(Le=>me.set(Le,null))})):(l.push(function Zl(){return new _n(3300,!1)}()),E=[]),l.length)throw function I2(r){return new _n(3504,!1)}();I.forEach((ee,me)=>{ee.forEach((Le,Ke)=>{ee.set(Ke,this._driver.computeStyle(me,Ke,Fg))})});const F=Wg(E.map(ee=>{const me=I.get(ee.element);return this._buildPlayer(ee,new Map,me)}));return this._playersById.set(t,F),F.onDestroy(()=>this.destroy(t)),this.players.push(F),F}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const s=this.players.indexOf(e);s>=0&&this.players.splice(s,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function x5(r){return new _n(3301,!1)}();return e}listen(t,e,s,l){const m=$y(e,"","","");return T2(this._getPlayer(t),s,m,l),()=>{}}command(t,e,s,l){if("register"==s)return void this.register(t,l[0]);if("create"==s)return void this.create(t,e,l[0]||{});const m=this._getPlayer(t);switch(s){case"play":m.play();break;case"pause":m.pause();break;case"reset":m.reset();break;case"restart":m.restart();break;case"finish":m.finish();break;case"init":m.init();break;case"setPosition":m.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(t)}}}const Kd="ng-animate-queued",G2="ng-animate-disabled",cj=[],wB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ar={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Uh="__ng_removed";class p0{constructor(t,e=""){this.namespaceId=e;const s=t&&t.hasOwnProperty("value");if(this.value=function dG(r){return r??null}(s?t.value:t),s){const m=Y1(t);delete m.value,this.options=m}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const s=this.options.params;Object.keys(e).forEach(l=>{null==s[l]&&(s[l]=e[l])})}}}const ow="void",W2=new p0(ow);class cG{constructor(t,e,s){this.id=t,this.hostElement=e,this._engine=s,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,rd(e,this._hostClassName)}listen(t,e,s,l){if(!this._triggers.has(e))throw function GH(r,t){return new _n(3302,!1)}();if(null==s||0==s.length)throw function L5(r){return new _n(3303,!1)}();if(!function hG(r){return"start"==r||"done"==r}(s))throw function Bp(r,t){return new _n(3400,!1)}();const m=vl(this._elementListeners,t,[]),E={name:e,phase:s,callback:l};m.push(E);const I=vl(this._engine.statesByElement,t,new Map);return I.has(e)||(rd(t,k2),rd(t,k2+"-"+e),I.set(e,W2)),()=>{this._engine.afterFlush(()=>{const k=m.indexOf(E);k>=0&&m.splice(k,1),this._triggers.has(e)||I.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Pv(r){return new _n(3401,!1)}();return e}trigger(t,e,s,l=!0){const m=this._getTrigger(e),E=new RB(this.id,e,t);let I=this._engine.statesByElement.get(t);I||(rd(t,k2),rd(t,k2+"-"+e),this._engine.statesByElement.set(t,I=new Map));let k=I.get(e);const F=new p0(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&k&&F.absorbOptions(k.options),I.set(e,F),k||(k=W2),F.value!==ow&&k.value===F.value){if(!function pG(r,t){const e=Object.keys(r),s=Object.keys(t);if(e.length!=s.length)return!1;for(let l=0;l<e.length;l++){const m=e[l];if(!t.hasOwnProperty(m)||r[m]!==t[m])return!1}return!0}(k.params,F.params)){const Ct=[],Jt=m.matchStyles(k.value,k.params,Ct),tn=m.matchStyles(F.value,F.params,Ct);Ct.length?this._engine.reportError(Ct):this._engine.afterFlush(()=>{Zy(t,Jt),im(t,tn)})}return}const Le=vl(this._engine.playersByElement,t,[]);Le.forEach(Ct=>{Ct.namespaceId==this.id&&Ct.triggerName==e&&Ct.queued&&Ct.destroy()});let Ke=m.matchTransition(k.value,F.value,t,F.params),rt=!1;if(!Ke){if(!l)return;Ke=m.fallbackTransition,rt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:Ke,fromState:k,toState:F,player:E,isFallbackTransition:rt}),rt||(rd(t,Kd),E.onStart(()=>{Aa(t,Kd)})),E.onDone(()=>{let Ct=this.players.indexOf(E);Ct>=0&&this.players.splice(Ct,1);const Jt=this._engine.playersByElement.get(t);if(Jt){let tn=Jt.indexOf(E);tn>=0&&Jt.splice(tn,1)}}),this.players.push(E),Le.push(E),E}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,s)=>{this._elementListeners.set(s,e.filter(l=>l.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(s=>s.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const s=this._engine.driver.query(t,N2,!0);s.forEach(l=>{if(l[Uh])return;const m=this._engine.fetchNamespacesByElement(l);m.size?m.forEach(E=>E.triggerLeaveAnimation(l,e,!1,!0)):this.clearElementCache(l)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(l=>this.clearElementCache(l)))}triggerLeaveAnimation(t,e,s,l){const m=this._engine.statesByElement.get(t),E=new Map;if(m){const I=[];if(m.forEach((k,F)=>{if(E.set(F,k.value),this._triggers.has(F)){const ee=this.trigger(t,F,ow,l);ee&&I.push(ee)}}),I.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,E),s&&Wg(I).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),s=this._engine.statesByElement.get(t);if(e&&s){const l=new Set;e.forEach(m=>{const E=m.name;if(l.has(E))return;l.add(E);const k=this._triggers.get(E).fallbackTransition,F=s.get(E)||W2,ee=new p0(ow),me=new RB(this.id,E,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:E,transition:k,fromState:F,toState:ee,player:me,isFallbackTransition:!0})})}}removeNode(t,e){const s=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let l=!1;if(s.totalAnimations){const m=s.players.length?s.playersByQueriedElement.get(t):[];if(m&&m.length)l=!0;else{let E=t;for(;E=E.parentNode;)if(s.statesByElement.get(E)){l=!0;break}}}if(this.prepareLeaveAnimationListeners(t),l)s.markElementAsRemoved(this.id,t,!1,e);else{const m=t[Uh];(!m||m===wB)&&(s.afterFlush(()=>this.clearElementCache(t)),s.destroyInnerAnimations(t),s._onRemovalComplete(t,e))}}insertNode(t,e){rd(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(s=>{const l=s.player;if(l.destroyed)return;const m=s.element,E=this._elementListeners.get(m);E&&E.forEach(I=>{if(I.name==s.triggerName){const k=$y(m,s.triggerName,s.fromState.value,s.toState.value);k._data=t,T2(s.player,I.phase,k,I.callback)}}),l.markedForDestroy?this._engine.afterFlush(()=>{l.destroy()}):e.push(s)}),this._queue=[],e.sort((s,l)=>{const m=s.transition.ast.depCount,E=l.transition.ast.depCount;return 0==m||0==E?m-E:this._engine.driver.containsElement(s.element,l.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(s=>s.element===t)||e,e}}class uG{constructor(t,e,s){this.bodyNode=t,this.driver=e,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(l,m)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(s=>{s.queued&&t.push(s)})}),t}createNamespace(t,e){const s=new cG(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(s,e):(this.newHostElements.set(e,s),this.collectEnterElement(e)),this._namespaceLookup[t]=s}_balanceNamespaceList(t,e){const s=this._namespaceList,l=this.namespacesByHostElement;if(s.length-1>=0){let E=!1,I=this.driver.getParentElement(e);for(;I;){const k=l.get(I);if(k){const F=s.indexOf(k);s.splice(F+1,0,t),E=!0;break}I=this.driver.getParentElement(I)}E||s.unshift(t)}else s.push(t);return l.set(e,t),t}register(t,e){let s=this._namespaceLookup[t];return s||(s=this.createNamespace(t,e)),s}registerTrigger(t,e,s){let l=this._namespaceLookup[t];l&&l.register(e,s)&&this.totalAnimations++}destroy(t,e){if(!t)return;const s=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[t];const l=this._namespaceList.indexOf(s);l>=0&&this._namespaceList.splice(l,1)}),this.afterFlushAnimationsDone(()=>s.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,s=this.statesByElement.get(t);if(s)for(let l of s.values())if(l.namespaceId){const m=this._fetchNamespace(l.namespaceId);m&&e.add(m)}return e}trigger(t,e,s,l){if(K2(e)){const m=this._fetchNamespace(t);if(m)return m.trigger(e,s,l),!0}return!1}insertNode(t,e,s,l){if(!K2(e))return;const m=e[Uh];if(m&&m.setForRemoval){m.setForRemoval=!1,m.setForMove=!0;const E=this.collectedLeaveElements.indexOf(e);E>=0&&this.collectedLeaveElements.splice(E,1)}if(t){const E=this._fetchNamespace(t);E&&E.insertNode(e,s)}l&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),rd(t,G2)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Aa(t,G2))}removeNode(t,e,s,l){if(K2(e)){const m=t?this._fetchNamespace(t):null;if(m?m.removeNode(e,l):this.markElementAsRemoved(t,e,!1,l),s){const E=this.namespacesByHostElement.get(e);E&&E.id!==t&&E.removeNode(e,l)}}else this._onRemovalComplete(e,l)}markElementAsRemoved(t,e,s,l,m){this.collectedLeaveElements.push(e),e[Uh]={namespaceId:t,setForRemoval:l,hasAnimation:s,removedBeforeQueried:!1,previousTriggersValues:m}}listen(t,e,s,l,m){return K2(e)?this._fetchNamespace(t).listen(e,s,l,m):()=>{}}_buildInstruction(t,e,s,l,m){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,s,l,t.fromState.options,t.toState.options,e,m)}destroyInnerAnimations(t){let e=this.driver.query(t,N2,!0);e.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,mB,!0),e.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Wg(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Uh];if(e&&e.setForRemoval){if(t[Uh]=wB,e.namespaceId){this.destroyInnerAnimations(t);const s=this._fetchNamespace(e.namespaceId);s&&s.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(G2)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,l)=>this._balanceNamespaceList(s,l)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)rd(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{e=this._flushAnimations(s,t)}finally{for(let l=0;l<s.length;l++)s[l]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],e.length?Wg(e).onDone(()=>{s.forEach(l=>l())}):s.forEach(l=>l())}}reportError(t){throw function Xy(r){return new _n(3402,!1)}()}_flushAnimations(t,e){const s=new nw,l=[],m=new Map,E=[],I=new Map,k=new Map,F=new Map,ee=new Set;this.disabledNodes.forEach(w=>{ee.add(w);const P=this.driver.query(w,".ng-animate-queued",!0);for(let j=0;j<P.length;j++)ee.add(P[j])});const me=this.bodyNode,Le=Array.from(this.statesByElement.keys()),Ke=lj(Le,this.collectedEnterElements),rt=new Map;let Ct=0;Ke.forEach((w,P)=>{const j=fB+Ct++;rt.set(P,j),w.forEach(G=>rd(G,j))});const Jt=[],tn=new Set,Vn=new Set;for(let w=0;w<this.collectedLeaveElements.length;w++){const P=this.collectedLeaveElements[w],j=P[Uh];j&&j.setForRemoval&&(Jt.push(P),tn.add(P),j.hasAnimation?this.driver.query(P,".ng-star-inserted",!0).forEach(G=>tn.add(G)):Vn.add(P))}const nn=new Map,n=lj(Le,Array.from(tn));n.forEach((w,P)=>{const j=z1+Ct++;nn.set(P,j),w.forEach(G=>rd(G,j))}),t.push(()=>{Ke.forEach((w,P)=>{const j=rt.get(P);w.forEach(G=>Aa(G,j))}),n.forEach((w,P)=>{const j=nn.get(P);w.forEach(G=>Aa(G,j))}),Jt.forEach(w=>{this.processLeaveNode(w)})});const i=[],o=[];for(let w=this._namespaceList.length-1;w>=0;w--)this._namespaceList[w].drainQueuedTransitions(e).forEach(j=>{const G=j.player,Z=j.element;if(i.push(G),this.collectedEnterElements.length){const bt=Z[Uh];if(bt&&bt.setForMove){if(bt.previousTriggersValues&&bt.previousTriggersValues.has(j.triggerName)){const Pt=bt.previousTriggersValues.get(j.triggerName),En=this.statesByElement.get(j.element);if(En&&En.has(j.triggerName)){const pn=En.get(j.triggerName);pn.value=Pt,En.set(j.triggerName,pn)}}return void G.destroy()}}const ae=!me||!this.driver.containsElement(me,Z),fe=nn.get(Z),be=rt.get(Z),Ce=this._buildInstruction(j,s,be,fe,ae);if(Ce.errors&&Ce.errors.length)return void o.push(Ce);if(ae)return G.onStart(()=>Zy(Z,Ce.fromStyles)),G.onDestroy(()=>im(Z,Ce.toStyles)),void l.push(G);if(j.isFallbackTransition)return G.onStart(()=>Zy(Z,Ce.fromStyles)),G.onDestroy(()=>im(Z,Ce.toStyles)),void l.push(G);const it=[];Ce.timelines.forEach(bt=>{bt.stretchStartingKeyframe=!0,this.disabledNodes.has(bt.element)||it.push(bt)}),Ce.timelines=it,s.append(Z,Ce.timelines),E.push({instruction:Ce,player:G,element:Z}),Ce.queriedElements.forEach(bt=>vl(I,bt,[]).push(G)),Ce.preStyleProps.forEach((bt,Pt)=>{if(bt.size){let En=k.get(Pt);En||k.set(Pt,En=new Set),bt.forEach((pn,un)=>En.add(un))}}),Ce.postStyleProps.forEach((bt,Pt)=>{let En=F.get(Pt);En||F.set(Pt,En=new Set),bt.forEach((pn,un)=>En.add(un))})});if(o.length){const w=[];o.forEach(P=>{w.push(function cB(r,t){return new _n(3505,!1)}())}),i.forEach(P=>P.destroy()),this.reportError(w)}const c=new Map,h=new Map;E.forEach(w=>{const P=w.element;s.has(P)&&(h.set(P,P),this._beforeAnimationBuild(w.player.namespaceId,w.instruction,c))}),l.forEach(w=>{const P=w.element;this._getPreviousPlayers(P,!1,w.namespaceId,w.triggerName,null).forEach(G=>{vl(c,P,[]).push(G),G.destroy()})});const g=Jt.filter(w=>z2(w,k,F)),p=new Map;OB(p,this.driver,Vn,F,Fg).forEach(w=>{z2(w,k,F)&&g.push(w)});const _=new Map;Ke.forEach((w,P)=>{OB(_,this.driver,new Set(w),k,"!")}),g.forEach(w=>{const P=p.get(w),j=_.get(w);p.set(w,new Map([...Array.from(P?.entries()??[]),...Array.from(j?.entries()??[])]))});const y=[],b=[],C={};E.forEach(w=>{const{element:P,player:j,instruction:G}=w;if(s.has(P)){if(ee.has(P))return j.onDestroy(()=>im(P,G.toStyles)),j.disabled=!0,j.overrideTotalTime(G.totalTime),void l.push(j);let Z=C;if(h.size>1){let fe=P;const be=[];for(;fe=fe.parentNode;){const Ce=h.get(fe);if(Ce){Z=Ce;break}be.push(fe)}be.forEach(Ce=>h.set(Ce,Z))}const ae=this._buildAnimation(j.namespaceId,G,c,m,_,p);if(j.setRealPlayer(ae),Z===C)y.push(j);else{const fe=this.playersByElement.get(Z);fe&&fe.length&&(j.parentPlayer=Wg(fe)),l.push(j)}}else Zy(P,G.fromStyles),j.onDestroy(()=>im(P,G.toStyles)),b.push(j),ee.has(P)&&l.push(j)}),b.forEach(w=>{const P=m.get(w.element);if(P&&P.length){const j=Wg(P);w.setRealPlayer(j)}}),l.forEach(w=>{w.parentPlayer?w.syncPlayerEvents(w.parentPlayer):w.destroy()});for(let w=0;w<Jt.length;w++){const P=Jt[w],j=P[Uh];if(Aa(P,z1),j&&j.hasAnimation)continue;let G=[];if(I.size){let ae=I.get(P);ae&&ae.length&&G.push(...ae);let fe=this.driver.query(P,mB,!0);for(let be=0;be<fe.length;be++){let Ce=I.get(fe[be]);Ce&&Ce.length&&G.push(...Ce)}}const Z=G.filter(ae=>!ae.destroyed);Z.length?f0(this,P,Z):this.processLeaveNode(P)}return Jt.length=0,y.forEach(w=>{this.players.push(w),w.onDone(()=>{w.destroy();const P=this.players.indexOf(w);this.players.splice(P,1)}),w.play()}),y}elementContainsData(t,e){let s=!1;const l=e[Uh];return l&&l.setForRemoval&&(s=!0),this.playersByElement.has(e)&&(s=!0),this.playersByQueriedElement.has(e)&&(s=!0),this.statesByElement.has(e)&&(s=!0),this._fetchNamespace(t).elementContainsData(e)||s}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,s,l,m){let E=[];if(e){const I=this.playersByQueriedElement.get(t);I&&(E=I)}else{const I=this.playersByElement.get(t);if(I){const k=!m||m==ow;I.forEach(F=>{F.queued||!k&&F.triggerName!=l||E.push(F)})}}return(s||l)&&(E=E.filter(I=>!(s&&s!=I.namespaceId||l&&l!=I.triggerName))),E}_beforeAnimationBuild(t,e,s){const m=e.element,E=e.isRemovalTransition?void 0:t,I=e.isRemovalTransition?void 0:e.triggerName;for(const k of e.timelines){const F=k.element,ee=F!==m,me=vl(s,F,[]);this._getPreviousPlayers(F,ee,E,I,e.toState).forEach(Ke=>{const rt=Ke.getRealPlayer();rt.beforeDestroy&&rt.beforeDestroy(),Ke.destroy(),me.push(Ke)})}Zy(m,e.fromStyles)}_buildAnimation(t,e,s,l,m,E){const I=e.triggerName,k=e.element,F=[],ee=new Set,me=new Set,Le=e.timelines.map(rt=>{const Ct=rt.element;ee.add(Ct);const Jt=Ct[Uh];if(Jt&&Jt.removedBeforeQueried)return new _1(rt.duration,rt.delay);const tn=Ct!==k,Vn=function dj(r){const t=[];return DB(r,t),t}((s.get(Ct)||cj).map(c=>c.getRealPlayer())).filter(c=>!!c.element&&c.element===Ct),nn=m.get(Ct),n=E.get(Ct),i=F5(0,this._normalizer,0,rt.keyframes,nn,n),o=this._buildPlayer(rt,i,Vn);if(rt.subTimeline&&l&&me.add(Ct),tn){const c=new RB(t,I,Ct);c.setRealPlayer(o),F.push(c)}return o});F.forEach(rt=>{vl(this.playersByQueriedElement,rt.element,[]).push(rt),rt.onDone(()=>function lG(r,t,e){let s=r.get(t);if(s){if(s.length){const l=s.indexOf(e);s.splice(l,1)}0==s.length&&r.delete(t)}return s}(this.playersByQueriedElement,rt.element,rt))}),ee.forEach(rt=>rd(rt,H5));const Ke=Wg(Le);return Ke.onDestroy(()=>{ee.forEach(rt=>Aa(rt,H5)),im(k,e.toStyles)}),me.forEach(rt=>{vl(l,rt,[]).push(Ke)}),Ke}_buildPlayer(t,e,s){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,s):new _1(t.duration,t.delay)}}class RB{constructor(t,e,s){this.namespaceId=t,this.triggerName=e,this.element=s,this._player=new _1,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,s)=>{e.forEach(l=>T2(t,s,void 0,l))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){vl(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function K2(r){return r&&1===r.nodeType}function uj(r,t){const e=r.style.display;return r.style.display=t??"none",e}function OB(r,t,e,s,l){const m=[];e.forEach(k=>m.push(uj(k)));const E=[];s.forEach((k,F)=>{const ee=new Map;k.forEach(me=>{const Le=t.computeStyle(F,me,l);ee.set(me,Le),(!Le||0==Le.length)&&(F[Uh]=ar,E.push(F))}),r.set(F,ee)});let I=0;return e.forEach(k=>uj(k,m[I++])),E}function lj(r,t){const e=new Map;if(r.forEach(I=>e.set(I,[])),0==t.length)return e;const l=new Set(t),m=new Map;function E(I){if(!I)return 1;let k=m.get(I);if(k)return k;const F=I.parentNode;return k=e.has(F)?F:l.has(F)?1:E(F),m.set(I,k),k}return t.forEach(I=>{const k=E(I);1!==k&&e.get(k).push(I)}),e}function rd(r,t){r.classList?.add(t)}function Aa(r,t){r.classList?.remove(t)}function f0(r,t,e){Wg(e).onDone(()=>r.processLeaveNode(t))}function DB(r,t){for(let e=0;e<r.length;e++){const s=r[e];s instanceof BV?DB(s.players,t):t.push(s)}}function z2(r,t,e){const s=e.get(r);if(!s)return!1;let l=t.get(r);return l?s.forEach(m=>l.add(m)):t.set(r,s),e.delete(r),!0}class sw{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(l,m)=>{},this._transitionEngine=new uG(t,e,s),this._timelineEngine=new nd(t,e,s),this._transitionEngine.onRemovalComplete=(l,m)=>this.onRemovalComplete(l,m)}registerTrigger(t,e,s,l,m){const E=t+"-"+l;let I=this._triggerCache[E];if(!I){const k=[],ee=L2(this._driver,m,k,[]);if(k.length)throw function HH(r,t){return new _n(3404,!1)}();I=function oj(r,t,e){return new xv(r,t,e)}(l,ee,this._normalizer),this._triggerCache[E]=I}this._transitionEngine.registerTrigger(e,l,I)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,s,l){this._transitionEngine.insertNode(t,e,s,l)}onRemove(t,e,s,l){this._transitionEngine.removeNode(t,e,l||!1,s)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,s,l){if("@"==s.charAt(0)){const[m,E]=w2(s);this._timelineEngine.command(m,e,E,l)}else this._transitionEngine.trigger(t,e,s,l)}listen(t,e,s,l,m){if("@"==s.charAt(0)){const[E,I]=w2(s);return this._timelineEngine.listen(E,e,I,m)}return this._transitionEngine.listen(t,e,s,l,m)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let kB=(()=>{class r{constructor(e,s,l){this._element=e,this._startStyles=s,this._endStyles=l,this._state=0;let m=r.initialStylesByElement.get(e);m||r.initialStylesByElement.set(e,m=new Map),this._initialStyles=m}start(){this._state<1&&(this._startStyles&&im(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(im(this._element,this._initialStyles),this._endStyles&&(im(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(Zy(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zy(this._element,this._endStyles),this._endStyles=null),im(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function Y2(r){let t=null;return r.forEach((e,s)=>{(function om(r){return"display"===r||"position"===r})(s)&&(t=t||new Map,t.set(s,e))}),t}class hj{constructor(t,e,s,l){this.element=t,this.keyframes=e,this.options=s,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(s=>{e.push(Object.fromEntries(s))}),e}_triggerWebAnimation(t,e,s){return t.animate(this._convertKeyframesToObject(e),s)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((s,l)=>{"offset"!==l&&t.set(l,this._finished?s:AB(this.element,l))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class pj{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return j5(t,e)}getParentElement(t){return W1(t)}query(t,e,s){return pB(t,e,s)}computeStyle(t,e,s){return window.getComputedStyle(t)[e]}animate(t,e,s,l,m,E=[]){const k={duration:s,delay:l,fill:0==l?"both":"forwards"};m&&(k.easing=m);const F=new Map,ee=E.filter(Ke=>Ke instanceof hj);(function z5(r,t){return 0===r||0===t})(s,l)&&ee.forEach(Ke=>{Ke.currentSnapshot.forEach((rt,Ct)=>F.set(Ct,rt))});let me=function qH(r){return r.length?r[0]instanceof Map?r:r.map(t=>G5(t)):[]}(e).map(Ke=>ed(Ke));me=function c0(r,t,e){if(e.size&&t.length){let s=t[0],l=[];if(e.forEach((m,E)=>{s.has(E)||l.push(E),s.set(E,m)}),l.length)for(let m=1;m<t.length;m++){let E=t[m];l.forEach(I=>E.set(I,AB(r,I)))}}return t}(t,me,F);const Le=function m0(r,t){let e=null,s=null;return Array.isArray(t)&&t.length?(e=Y2(t[0]),t.length>1&&(s=Y2(t[t.length-1]))):t instanceof Map&&(e=Y2(t)),e||s?new kB(r,e,s):null}(t,me);return new hj(t,me,k,Le)}}let fj=(()=>{class r extends MV{constructor(e,s){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(s.body,{id:"0",encapsulation:fu.None,styles:[],data:{animation:[]}})}build(e){const s=this._nextAnimationId.toString();this._nextAnimationId++;const l=Array.isArray(e)?xV(e):e;return Vp(this._renderer,null,s,"register",[l]),new NB(s,this._renderer)}}return r.\u0275fac=function(e){return new(e||r)(Xt(ua),Xt(xi))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();class NB extends M9{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new PB(this._id,t,e||{},this._renderer)}}class PB{constructor(t,e,s,l){this.id=t,this.element=e,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Vp(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Vp(r,t,e,s,l){return r.setProperty(t,`@@${e}:${s}`,l)}const Kg="@.disabled";let mj=(()=>{class r{constructor(e,s,l){this.delegate=e,this.engine=s,this._zone=l,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(m,E)=>{const I=E?.parentNode(m);I&&E.removeChild(I,m)}}createRenderer(e,s){const m=this.delegate.createRenderer(e,s);if(!(e&&s&&s.data&&s.data.animation)){let ee=this._rendererCache.get(m);return ee||(ee=new MB("",m,this.engine,()=>this._rendererCache.delete(m)),this._rendererCache.set(m,ee)),ee}const E=s.id,I=s.id+"-"+this._currentId;this._currentId++,this.engine.register(I,e);const k=ee=>{Array.isArray(ee)?ee.forEach(k):this.engine.registerTrigger(E,I,e,ee.name,ee)};return s.data.animation.forEach(k),new fG(this,I,m,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,s,l){e>=0&&e<this._microtaskId?this._zone.run(()=>s(l)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(m=>{const[E,I]=m;E(I)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,l]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(e){return new(e||r)(Xt(ua),Xt(sw),Xt(_i))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})();class MB{constructor(t,e,s,l){this.namespaceId=t,this.delegate=e,this.engine=s,this._onDestroy=l,this.destroyNode=this.delegate.destroyNode?m=>e.destroyNode(m):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,s,l=!0){this.delegate.insertBefore(t,e,s),this.engine.onInsert(this.namespaceId,e,t,l)}removeChild(t,e,s){this.engine.onRemove(this.namespaceId,e,this.delegate,s)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,s,l){this.delegate.setAttribute(t,e,s,l)}removeAttribute(t,e,s){this.delegate.removeAttribute(t,e,s)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,s,l){this.delegate.setStyle(t,e,s,l)}removeStyle(t,e,s){this.delegate.removeStyle(t,e,s)}setProperty(t,e,s){"@"==e.charAt(0)&&e==Kg?this.disableAnimations(t,!!s):this.delegate.setProperty(t,e,s)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,s){return this.delegate.listen(t,e,s)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class fG extends MB{constructor(t,e,s,l,m){super(e,s,l,m),this.factory=t,this.namespaceId=e}setProperty(t,e,s){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Kg?this.disableAnimations(t,s=void 0===s||!!s):this.engine.process(this.namespaceId,t,e.slice(1),s):this.delegate.setProperty(t,e,s)}listen(t,e,s){if("@"==e.charAt(0)){const l=function mG(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let m=e.slice(1),E="";return"@"!=m.charAt(0)&&([m,E]=function gj(r){const t=r.indexOf(".");return[r.substring(0,t),r.slice(t+1)]}(m)),this.engine.listen(this.namespaceId,l,m,E,I=>{this.factory.scheduleListenerCallback(I._data||-1,s,I)})}return this.delegate.listen(t,e,s)}}const xB=[{provide:MV,useClass:fj},{provide:j2,useFactory:function q2(){return new rj}},{provide:sw,useClass:(()=>{class r extends sw{constructor(e,s,l,m){super(e.body,s,l)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(e){return new(e||r)(Xt(xi),Xt(D2),Xt(j2),Xt(yy))},r.\u0275prov=Ar({token:r,factory:r.\u0275fac}),r})()},{provide:ua,useFactory:function _j(r,t,e){return new mj(r,t,e)},deps:[bS,sw,_i]}],J2=[{provide:D2,useFactory:()=>new pj},{provide:Ip,useValue:"BrowserAnimations"},...xB],LB=[{provide:D2,useClass:Q5},{provide:Ip,useValue:"NoopAnimations"},...xB];let vj=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?LB:J2}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Gi({type:r}),r.\u0275inj=Ui({providers:J2,imports:[cc]}),r})();class aw{static#e=this.\u0275fac=function(e){return new(e||aw)};static#t=this.\u0275mod=Gi({type:aw,bootstrap:[E2]});static#n=this.\u0275inj=Ui({imports:[cc,vj,Wl,S3,nk,s7,vQ,Hg,MQ,uu,cL,YQ,n0,n5,pH,XS]})}BM().bootstrapModule(aw).catch(r=>console.error(r))},1648:function(Ie,Oe,Y){Ie=Y.nmd(Ie);var L=Y(7156).default;!function(W){"use strict";function ne(a,d){var u=Object.keys(a);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);d&&(f=f.filter(function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable})),u.push.apply(u,f)}return u}function Q(a){for(var d=1;d<arguments.length;d++){var u=null!=arguments[d]?arguments[d]:{};d%2?ne(Object(u),!0).forEach(function(f){x(a,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):ne(Object(u)).forEach(function(f){Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(u,f))})}return a}function U(a){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(a)}function D(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function")}function O(a,d){for(var u=0;u<d.length;u++){var f=d[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function N(a,d,u){return d&&O(a.prototype,d),u&&O(a,u),a}function x(a,d,u){return d in a?Object.defineProperty(a,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[d]=u,a}function J(a,d){if(null==a)return{};var u,f,A=function(T,R){if(null==T)return{};var M,B,H={},$=Object.keys(T);for(B=0;B<$.length;B++)R.indexOf(M=$[B])>=0||(H[M]=T[M]);return H}(a,d);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(a);for(f=0;f<S.length;f++)d.indexOf(u=S[f])>=0||Object.prototype.propertyIsEnumerable.call(a,u)&&(A[u]=a[u])}return A}var ie=function(a,d){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var A in f)f.hasOwnProperty(A)&&(u[A]=f[A])})(a,d)};function te(a,d){function u(){this.constructor=a}ie(a,d),a.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}function le(a){return"function"==typeof a}var X=!1,z={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){var d=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+d.stack)}else X&&console.log("RxJS: Back to a better error behavior. Thank you. <3");X=a},get useDeprecatedSynchronousErrorHandling(){return X}};function K(a){setTimeout(function(){throw a},0)}var se={closed:!0,next:function(a){},error:function(a){if(z.useDeprecatedSynchronousErrorHandling)throw a;K(a)},complete:function(){}},ve=Array.isArray||function(a){return a&&"number"==typeof a.length};function De(a){return null!==a&&"object"==typeof a}var pe=function(){function a(d){return Error.call(this),this.message=d?d.length+" errors occurred during unsubscription:\n"+d.map(function(u,f){return f+1+") "+u.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=d,this}return a.prototype=Object.create(Error.prototype),a}(),Ee=function(){function a(d){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,d&&(this._ctorUnsubscribe=!0,this._unsubscribe=d)}return a.prototype.unsubscribe=function(){var d;if(!this.closed){var u=this._parentOrParents,f=this._ctorUnsubscribe,A=this._unsubscribe,S=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,u instanceof a)u.remove(this);else if(null!==u)for(var T=0;T<u.length;++T)u[T].remove(this);if(le(A)){f&&(this._unsubscribe=void 0);try{A.call(this)}catch(B){d=B instanceof pe?Ae(B.errors):[B]}}if(ve(S)){T=-1;for(var R=S.length;++T<R;){var M=S[T];if(De(M))try{M.unsubscribe()}catch(B){d=d||[],B instanceof pe?d=d.concat(Ae(B.errors)):d.push(B)}}}if(d)throw new pe(d)}},a.prototype.add=function(d){var u=d;if(!d)return a.EMPTY;switch(typeof d){case"function":u=new a(d);case"object":if(u===this||u.closed||"function"!=typeof u.unsubscribe)return u;if(this.closed)return u.unsubscribe(),u;if(!(u instanceof a)){var f=u;(u=new a)._subscriptions=[f]}break;default:throw new Error("unrecognized teardown "+d+" added to Subscription.")}var A=u._parentOrParents;if(null===A)u._parentOrParents=this;else if(A instanceof a){if(A===this)return u;u._parentOrParents=[A,this]}else{if(-1!==A.indexOf(this))return u;A.push(this)}var S=this._subscriptions;return null===S?this._subscriptions=[u]:S.push(u),u},a.prototype.remove=function(d){var u=this._subscriptions;if(u){var f=u.indexOf(d);-1!==f&&u.splice(f,1)}},a.EMPTY=((d=new a).closed=!0,d),a;var d}();function Ae(a){return a.reduce(function(d,u){return d.concat(u instanceof pe?u.errors:u)},[])}var ge="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),re=function(a){function d(u,f,A){var S=a.call(this)||this;switch(S.syncErrorValue=null,S.syncErrorThrown=!1,S.syncErrorThrowable=!1,S.isStopped=!1,arguments.length){case 0:S.destination=se;break;case 1:if(!u){S.destination=se;break}if("object"==typeof u){u instanceof d?(S.syncErrorThrowable=u.syncErrorThrowable,S.destination=u,u.add(S)):(S.syncErrorThrowable=!0,S.destination=new de(S,u));break}default:S.syncErrorThrowable=!0,S.destination=new de(S,u,f,A)}return S}return te(d,a),d.prototype[ge]=function(){return this},d.create=function(u,f,A){var S=new d(u,f,A);return S.syncErrorThrowable=!1,S},d.prototype.next=function(u){this.isStopped||this._next(u)},d.prototype.error=function(u){this.isStopped||(this.isStopped=!0,this._error(u))},d.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},d.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},d.prototype._next=function(u){this.destination.next(u)},d.prototype._error=function(u){this.destination.error(u),this.unsubscribe()},d.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},d.prototype._unsubscribeAndRecycle=function(){var u=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=u,this},d}(Ee),de=function(a){function d(u,f,A,S){var T,R=a.call(this)||this;R._parentSubscriber=u;var M=R;return le(f)?T=f:f&&(T=f.next,A=f.error,S=f.complete,f!==se&&(le((M=Object.create(f)).unsubscribe)&&R.add(M.unsubscribe.bind(M)),M.unsubscribe=R.unsubscribe.bind(R))),R._context=M,R._next=T,R._error=A,R._complete=S,R}return te(d,a),d.prototype.next=function(u){if(!this.isStopped&&this._next){var f=this._parentSubscriber;z.useDeprecatedSynchronousErrorHandling&&f.syncErrorThrowable?this.__tryOrSetError(f,this._next,u)&&this.unsubscribe():this.__tryOrUnsub(this._next,u)}},d.prototype.error=function(u){if(!this.isStopped){var f=this._parentSubscriber,A=z.useDeprecatedSynchronousErrorHandling;if(this._error)A&&f.syncErrorThrowable?(this.__tryOrSetError(f,this._error,u),this.unsubscribe()):(this.__tryOrUnsub(this._error,u),this.unsubscribe());else if(f.syncErrorThrowable)A?(f.syncErrorValue=u,f.syncErrorThrown=!0):K(u),this.unsubscribe();else{if(this.unsubscribe(),A)throw u;K(u)}}},d.prototype.complete=function(){var u=this;if(!this.isStopped){var f=this._parentSubscriber;if(this._complete){var A=function(){return u._complete.call(u._context)};z.useDeprecatedSynchronousErrorHandling&&f.syncErrorThrowable?(this.__tryOrSetError(f,A),this.unsubscribe()):(this.__tryOrUnsub(A),this.unsubscribe())}else this.unsubscribe()}},d.prototype.__tryOrUnsub=function(u,f){try{u.call(this._context,f)}catch(A){if(this.unsubscribe(),z.useDeprecatedSynchronousErrorHandling)throw A;K(A)}},d.prototype.__tryOrSetError=function(u,f,A){if(!z.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{f.call(this._context,A)}catch(S){return z.useDeprecatedSynchronousErrorHandling?(u.syncErrorValue=S,u.syncErrorThrown=!0,!0):(K(S),!0)}return!1},d.prototype._unsubscribe=function(){var u=this._parentSubscriber;this._context=null,this._parentSubscriber=null,u.unsubscribe()},d}(re),we="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fe(a){return a}function xe(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return Ve(a)}function Ve(a){return 0===a.length?Fe:1===a.length?a[0]:function(d){return a.reduce(function(u,f){return f(u)},d)}}var ze=function(){function a(d){this._isScalar=!1,d&&(this._subscribe=d)}return a.prototype.lift=function(d){var u=new a;return u.source=this,u.operator=d,u},a.prototype.subscribe=function(d,u,f){var A=this.operator,S=function(T,R,M){if(T){if(T instanceof re)return T;if(T[ge])return T[ge]()}return T||R||M?new re(T,R,M):new re(se)}(d,u,f);if(S.add(A?A.call(S,this.source):this.source||z.useDeprecatedSynchronousErrorHandling&&!S.syncErrorThrowable?this._subscribe(S):this._trySubscribe(S)),z.useDeprecatedSynchronousErrorHandling&&S.syncErrorThrowable&&(S.syncErrorThrowable=!1,S.syncErrorThrown))throw S.syncErrorValue;return S},a.prototype._trySubscribe=function(d){try{return this._subscribe(d)}catch(u){z.useDeprecatedSynchronousErrorHandling&&(d.syncErrorThrown=!0,d.syncErrorValue=u),function(f){for(;f;){var T=f.destination;if(f.closed||f.isStopped)return!1;f=T&&T instanceof re?T:null}return!0}(d)?d.error(u):console.warn(u)}},a.prototype.forEach=function(d,u){var f=this;return new(u=Ze(u))(function(A,S){var T;T=f.subscribe(function(R){try{d(R)}catch(M){S(M),T&&T.unsubscribe()}},S,A)})},a.prototype._subscribe=function(d){var u=this.source;return u&&u.subscribe(d)},a.prototype[we]=function(){return this},a.prototype.pipe=function(){for(var d=[],u=0;u<arguments.length;u++)d[u]=arguments[u];return 0===d.length?this:Ve(d)(this)},a.prototype.toPromise=function(d){var u=this;return new(d=Ze(d))(function(f,A){var S;u.subscribe(function(T){return S=T},function(T){return A(T)},function(){return f(S)})})},a.create=function(d){return new a(d)},a}();function Ze(a){if(a||(a=Promise),!a)throw new Error("no Promise impl found");return a}var je=function(){function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a}(),xt=function(a){function d(u,f){var A=a.call(this)||this;return A.subject=u,A.subscriber=f,A.closed=!1,A}return te(d,a),d.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var u=this.subject,f=u.observers;if(this.subject=null,f&&0!==f.length&&!u.isStopped&&!u.closed){var A=f.indexOf(this.subscriber);-1!==A&&f.splice(A,1)}}},d}(Ee),Wt=function(a){function d(u){var f=a.call(this,u)||this;return f.destination=u,f}return te(d,a),d}(re),ht=function(a){function d(){var u=a.call(this)||this;return u.observers=[],u.closed=!1,u.isStopped=!1,u.hasError=!1,u.thrownError=null,u}return te(d,a),d.prototype[ge]=function(){return new Wt(this)},d.prototype.lift=function(u){var f=new qe(this,this);return f.operator=u,f},d.prototype.next=function(u){if(this.closed)throw new je;if(!this.isStopped)for(var f=this.observers,A=f.length,S=f.slice(),T=0;T<A;T++)S[T].next(u)},d.prototype.error=function(u){if(this.closed)throw new je;this.hasError=!0,this.thrownError=u,this.isStopped=!0;for(var f=this.observers,A=f.length,S=f.slice(),T=0;T<A;T++)S[T].error(u);this.observers.length=0},d.prototype.complete=function(){if(this.closed)throw new je;this.isStopped=!0;for(var u=this.observers,f=u.length,A=u.slice(),S=0;S<f;S++)A[S].complete();this.observers.length=0},d.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},d.prototype._trySubscribe=function(u){if(this.closed)throw new je;return a.prototype._trySubscribe.call(this,u)},d.prototype._subscribe=function(u){if(this.closed)throw new je;return this.hasError?(u.error(this.thrownError),Ee.EMPTY):this.isStopped?(u.complete(),Ee.EMPTY):(this.observers.push(u),new xt(this,u))},d.prototype.asObservable=function(){var u=new ze;return u.source=this,u},d.create=function(u,f){return new qe(u,f)},d}(ze),qe=function(a){function d(u,f){var A=a.call(this)||this;return A.destination=u,A.source=f,A}return te(d,a),d.prototype.next=function(u){var f=this.destination;f&&f.next&&f.next(u)},d.prototype.error=function(u){var f=this.destination;f&&f.error&&this.destination.error(u)},d.prototype.complete=function(){var u=this.destination;u&&u.complete&&this.destination.complete()},d.prototype._subscribe=function(u){return this.source?this.source.subscribe(u):Ee.EMPTY},d}(ht),Ue=function(a){function d(u){var f=a.call(this)||this;return f._value=u,f}return te(d,a),Object.defineProperty(d.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),d.prototype._subscribe=function(u){var f=a.prototype._subscribe.call(this,u);return f&&!f.closed&&u.next(this._value),f},d.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new je;return this._value},d.prototype.next=function(u){a.prototype.next.call(this,this._value=u)},d}(ht),Ye=function(a){function d(u,f){var A=a.call(this,u,f)||this;return A.scheduler=u,A.work=f,A.pending=!1,A}return te(d,a),d.prototype.schedule=function(u,f){if(void 0===f&&(f=0),this.closed)return this;this.state=u;var A=this.id,S=this.scheduler;return null!=A&&(this.id=this.recycleAsyncId(S,A,f)),this.pending=!0,this.delay=f,this.id=this.id||this.requestAsyncId(S,this.id,f),this},d.prototype.requestAsyncId=function(u,f,A){return void 0===A&&(A=0),setInterval(u.flush.bind(u,this),A)},d.prototype.recycleAsyncId=function(u,f,A){if(void 0===A&&(A=0),null!==A&&this.delay===A&&!1===this.pending)return f;clearInterval(f)},d.prototype.execute=function(u,f){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var A=this._execute(u,f);if(A)return A;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},d.prototype._execute=function(u,f){var A=!1,S=void 0;try{this.work(u)}catch(T){A=!0,S=!!T&&T||new Error(T)}if(A)return this.unsubscribe(),S},d.prototype._unsubscribe=function(){var u=this.id,f=this.scheduler,A=f.actions,S=A.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==S&&A.splice(S,1),null!=u&&(this.id=this.recycleAsyncId(f,u,null)),this.delay=null},d}(function(a){function d(u,f){return a.call(this)||this}return te(d,a),d.prototype.schedule=function(u,f){return this},d}(Ee)),Re=function(a){function d(u,f){var A=a.call(this,u,f)||this;return A.scheduler=u,A.work=f,A}return te(d,a),d.prototype.schedule=function(u,f){return void 0===f&&(f=0),f>0?a.prototype.schedule.call(this,u,f):(this.delay=f,this.state=u,this.scheduler.flush(this),this)},d.prototype.execute=function(u,f){return f>0||this.closed?a.prototype.execute.call(this,u,f):this._execute(u,f)},d.prototype.requestAsyncId=function(u,f,A){return void 0===A&&(A=0),null!==A&&A>0||null===A&&this.delay>0?a.prototype.requestAsyncId.call(this,u,f,A):u.flush(this)},d}(Ye),tt=function(){function a(d,u){void 0===u&&(u=a.now),this.SchedulerAction=d,this.now=u}return a.prototype.schedule=function(d,u,f){return void 0===u&&(u=0),new this.SchedulerAction(this,d).schedule(f,u)},a.now=function(){return Date.now()},a}(),Dt=function(a){function d(u,f){void 0===f&&(f=tt.now);var A=a.call(this,u,function(){return d.delegate&&d.delegate!==A?d.delegate.now():f()})||this;return A.actions=[],A.active=!1,A.scheduled=void 0,A}return te(d,a),d.prototype.schedule=function(u,f,A){return void 0===f&&(f=0),d.delegate&&d.delegate!==this?d.delegate.schedule(u,f,A):a.prototype.schedule.call(this,u,f,A)},d.prototype.flush=function(u){var f=this.actions;if(this.active)f.push(u);else{var A;this.active=!0;do{if(A=u.execute(u.state,u.delay))break}while(u=f.shift());if(this.active=!1,A){for(;u=f.shift();)u.unsubscribe();throw A}}},d}(tt),zt=new(function(a){function d(){return null!==a&&a.apply(this,arguments)||this}return te(d,a),d}(Dt))(Re),kt=zt,mt=new ze(function(a){return a.complete()});function zn(a){return a?(d=a,new ze(function(u){return d.schedule(function(){return u.complete()})})):mt;var d}function qn(a){return a&&"function"==typeof a.schedule}var Lr,a,jr=function(a){return function(d){for(var u=0,f=a.length;u<f&&!d.closed;u++)d.next(a[u]);d.complete()}};function Or(a,d){return new ze(function(u){var f=new Ee,A=0;return f.add(d.schedule(function(){A!==a.length?(u.next(a[A++]),u.closed||f.add(this.schedule())):u.complete()})),f})}function wr(a,d){return d?Or(a,d):new ze(jr(a))}function Pn(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];var u=a[a.length-1];return qn(u)?(a.pop(),Or(a,u)):wr(a)}function Si(a,d){return new ze(d?function(u){return d.schedule(ki,0,{error:a,subscriber:u})}:function(u){return u.error(a)})}function ki(a){a.subscriber.error(a.error)}(a=Lr||(Lr={})).NEXT="N",a.ERROR="E",a.COMPLETE="C";var ho=function(){function a(d,u,f){this.kind=d,this.value=u,this.error=f,this.hasValue="N"===d}return a.prototype.observe=function(d){switch(this.kind){case"N":return d.next&&d.next(this.value);case"E":return d.error&&d.error(this.error);case"C":return d.complete&&d.complete()}},a.prototype.do=function(d,u,f){switch(this.kind){case"N":return d&&d(this.value);case"E":return u&&u(this.error);case"C":return f&&f()}},a.prototype.accept=function(d,u,f){return d&&"function"==typeof d.next?this.observe(d):this.do(d,u,f)},a.prototype.toObservable=function(){switch(this.kind){case"N":return Pn(this.value);case"E":return Si(this.error);case"C":return zn()}throw new Error("unexpected notification kind value")},a.createNext=function(d){return void 0!==d?new a("N",d):a.undefinedValueNotification},a.createError=function(d){return new a("E",void 0,d)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0),a}();function po(a,d){return void 0===d&&(d=0),function(u){return u.lift(new At(a,d))}}var At=function(){function a(d,u){void 0===u&&(u=0),this.scheduler=d,this.delay=u}return a.prototype.call=function(d,u){return u.subscribe(new Ht(d,this.scheduler,this.delay))},a}(),Ht=function(a){function d(u,f,A){void 0===A&&(A=0);var S=a.call(this,u)||this;return S.scheduler=f,S.delay=A,S}return te(d,a),d.dispatch=function(u){u.notification.observe(u.destination),this.unsubscribe()},d.prototype.scheduleMessage=function(u){this.destination.add(this.scheduler.schedule(d.dispatch,this.delay,new $t(u,this.destination)))},d.prototype._next=function(u){this.scheduleMessage(ho.createNext(u))},d.prototype._error=function(u){this.scheduleMessage(ho.createError(u)),this.unsubscribe()},d.prototype._complete=function(){this.scheduleMessage(ho.createComplete()),this.unsubscribe()},d}(re),$t=function(a,d){this.notification=a,this.destination=d},Xe=function(a){function d(u,f,A){void 0===u&&(u=Number.POSITIVE_INFINITY),void 0===f&&(f=Number.POSITIVE_INFINITY);var S=a.call(this)||this;return S.scheduler=A,S._events=[],S._infiniteTimeWindow=!1,S._bufferSize=u<1?1:u,S._windowTime=f<1?1:f,f===Number.POSITIVE_INFINITY?(S._infiniteTimeWindow=!0,S.next=S.nextInfiniteTimeWindow):S.next=S.nextTimeWindow,S}return te(d,a),d.prototype.nextInfiniteTimeWindow=function(u){if(!this.isStopped){var f=this._events;f.push(u),f.length>this._bufferSize&&f.shift()}a.prototype.next.call(this,u)},d.prototype.nextTimeWindow=function(u){this.isStopped||(this._events.push(new Me(this._getNow(),u)),this._trimBufferThenGetEvents()),a.prototype.next.call(this,u)},d.prototype._subscribe=function(u){var f,A=this._infiniteTimeWindow,S=A?this._events:this._trimBufferThenGetEvents(),T=this.scheduler,R=S.length;if(this.closed)throw new je;if(this.isStopped||this.hasError?f=Ee.EMPTY:(this.observers.push(u),f=new xt(this,u)),T&&u.add(u=new Ht(u,T)),A)for(var M=0;M<R&&!u.closed;M++)u.next(S[M]);else for(M=0;M<R&&!u.closed;M++)u.next(S[M].value);return this.hasError?u.error(this.thrownError):this.isStopped&&u.complete(),f},d.prototype._getNow=function(){return(this.scheduler||kt).now()},d.prototype._trimBufferThenGetEvents=function(){for(var u=this._getNow(),f=this._bufferSize,A=this._windowTime,S=this._events,T=S.length,R=0;R<T&&!(u-S[R].time<A);)R++;return T>f&&(R=Math.max(R,T-f)),R>0&&S.splice(0,R),S},d}(ht),Me=function(a,d){this.time=a,this.value=d},st=1,kn=Promise.resolve(),dn={};function Xi(a){return a in dn&&(delete dn[a],!0)}var Zo=function(a){function d(u,f){var A=a.call(this,u,f)||this;return A.scheduler=u,A.work=f,A}return te(d,a),d.prototype.requestAsyncId=function(u,f,A){return void 0===A&&(A=0),null!==A&&A>0?a.prototype.requestAsyncId.call(this,u,f,A):(u.actions.push(this),u.scheduled||(u.scheduled=(S=u.flush.bind(u,null),T=st++,dn[T]=!0,kn.then(function(){return Xi(T)&&S()}),T)));var S,T},d.prototype.recycleAsyncId=function(u,f,A){if(void 0===A&&(A=0),null!==A&&A>0||null===A&&this.delay>0)return a.prototype.recycleAsyncId.call(this,u,f,A);0===u.actions.length&&(Xi(f),u.scheduled=void 0)},d}(Ye),es=new(function(a){function d(){return null!==a&&a.apply(this,arguments)||this}return te(d,a),d.prototype.flush=function(u){this.active=!0,this.scheduled=void 0;var f,A=this.actions,S=-1,T=A.length;u=u||A.shift();do{if(f=u.execute(u.state,u.delay))break}while(++S<T&&(u=A.shift()));if(this.active=!1,f){for(;++S<T&&(u=A.shift());)u.unsubscribe();throw f}},d}(Dt))(Zo),fo=es,Ss=new Dt(Ye),oo=Ss;function Pc(){}var jn=function(){function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a}(),vn=function(){function a(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return a.prototype=Object.create(Error.prototype),a}();function Ne(a,d){return function(u){if("function"!=typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return u.lift(new dt(a,d))}}var dt=function(){function a(d,u){this.project=d,this.thisArg=u}return a.prototype.call=function(d,u){return u.subscribe(new Zt(d,this.project,this.thisArg))},a}(),Zt=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.project=f,S.count=0,S.thisArg=A||S,S}return te(d,a),d.prototype._next=function(u){var f;try{f=this.project.call(this.thisArg,u,this.count++)}catch(A){return void this.destination.error(A)}this.destination.next(f)},d}(re),en=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}return te(d,a),d.prototype.notifyNext=function(u,f,A,S,T){this.destination.next(f)},d.prototype.notifyError=function(u,f){this.destination.error(u)},d.prototype.notifyComplete=function(u){this.destination.complete()},d}(re),gn=function(a){function d(u,f,A){var S=a.call(this)||this;return S.parent=u,S.outerValue=f,S.outerIndex=A,S.index=0,S}return te(d,a),d.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this.index++,this)},d.prototype._error=function(u){this.parent.notifyError(u,this),this.unsubscribe()},d.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},d}(re),pi="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",bo=function(a){return a&&"number"==typeof a.length&&"function"!=typeof a};function Cs(a){return!!a&&"function"!=typeof a.subscribe&&"function"==typeof a.then}var ts=function(a){if(a&&"function"==typeof a[we])return f=a,function(S){var T=f[we]();if("function"!=typeof T.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return T.subscribe(S)};if(bo(a))return jr(a);if(Cs(a))return u=a,function(S){return u.then(function(T){S.closed||(S.next(T),S.complete())},function(T){return S.error(T)}).then(null,K),S};if(a&&"function"==typeof a[pi])return d=a,function(S){for(var T=d[pi]();;){var R=void 0;try{R=T.next()}catch(M){return S.error(M),S}if(R.done){S.complete();break}if(S.next(R.value),S.closed)break}return"function"==typeof T.return&&S.add(function(){T.return&&T.return()}),S};var d,u,f,A=De(a)?"an invalid object":"'"+a+"'";throw new TypeError("You provided "+A+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function mo(a,d,u,f,A){if(void 0===A&&(A=new gn(a,u,f)),!A.closed)return d instanceof ze?d.subscribe(A):ts(d)(A)}function Yn(a,d){return d?function(u,f){if(null!=u){if((A=u)&&"function"==typeof A[we])return function(A,S){return new ze(function(T){var R=new Ee;return R.add(S.schedule(function(){var M=A[we]();R.add(M.subscribe({next:function(B){R.add(S.schedule(function(){return T.next(B)}))},error:function(B){R.add(S.schedule(function(){return T.error(B)}))},complete:function(){R.add(S.schedule(function(){return T.complete()}))}}))})),R})}(u,f);if(Cs(u))return function(A,S){return new ze(function(T){var R=new Ee;return R.add(S.schedule(function(){return A.then(function(M){R.add(S.schedule(function(){T.next(M),R.add(S.schedule(function(){return T.complete()}))}))},function(M){R.add(S.schedule(function(){return T.error(M)}))})})),R})}(u,f);if(bo(u))return Or(u,f);if(function(A){return A&&"function"==typeof A[pi]}(u)||"string"==typeof u)return function(A,S){if(!A)throw new Error("Iterable cannot be null");return new ze(function(T){var R,M=new Ee;return M.add(function(){R&&"function"==typeof R.return&&R.return()}),M.add(S.schedule(function(){R=A[pi](),M.add(S.schedule(function(){if(!T.closed){var B,H;try{var $=R.next();B=$.value,H=$.done}catch(ce){return void T.error(ce)}H?T.complete():(T.next(B),this.schedule())}}))})),M})}(u,f)}var A;throw new TypeError((null!==u&&typeof u||u)+" is not observable")}(a,d):a instanceof ze?a:new ze(ts(a))}var Rr=function(a){function d(u){var f=a.call(this)||this;return f.parent=u,f}return te(d,a),d.prototype._next=function(u){this.parent.notifyNext(u)},d.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},d.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},d}(re);!function(a){function d(u,f,A){var S=a.call(this)||this;return S.parent=u,S.outerValue=f,S.outerIndex=A,S}te(d,a),d.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this)},d.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},d.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(re);var $i=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}return te(d,a),d.prototype.notifyNext=function(u){this.destination.next(u)},d.prototype.notifyError=function(u){this.destination.error(u)},d.prototype.notifyComplete=function(){this.destination.complete()},d}(re);function hu(a,d){if(!d.closed){if(a instanceof ze)return a.subscribe(d);var u;try{u=ts(a)(d)}catch(f){d.error(f)}return u}}function nr(a,d,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof d?function(f){return f.pipe(nr(function(A,S){return Yn(a(A,S)).pipe(Ne(function(T,R){return d(A,T,S,R)}))},u))}:("number"==typeof d&&(u=d),function(f){return f.lift(new Hp(a,u))})}!function(a){function d(){return null!==a&&a.apply(this,arguments)||this}te(d,a),d.prototype.notifyNext=function(u,f,A,S){this.destination.next(f)},d.prototype.notifyError=function(u){this.destination.error(u)},d.prototype.notifyComplete=function(u){this.destination.complete()}}(re);var Hp=function(){function a(d,u){void 0===u&&(u=Number.POSITIVE_INFINITY),this.project=d,this.concurrent=u}return a.prototype.call=function(d,u){return u.subscribe(new nE(d,this.project,this.concurrent))},a}(),nE=function(a){function d(u,f,A){void 0===A&&(A=Number.POSITIVE_INFINITY);var S=a.call(this,u)||this;return S.project=f,S.concurrent=A,S.hasCompleted=!1,S.buffer=[],S.active=0,S.index=0,S}return te(d,a),d.prototype._next=function(u){this.active<this.concurrent?this._tryNext(u):this.buffer.push(u)},d.prototype._tryNext=function(u){var f,A=this.index++;try{f=this.project(u,A)}catch(S){return void this.destination.error(S)}this.active++,this._innerSub(f)},d.prototype._innerSub=function(u){var f=new Rr(this),A=this.destination;A.add(f);var S=hu(u,f);S!==f&&A.add(S)},d.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},d.prototype.notifyNext=function(u){this.destination.next(u)},d.prototype.notifyComplete=function(){var u=this.buffer;this.active--,u.length>0?this._next(u.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},d}($i);function $2(a){return void 0===a&&(a=Number.POSITIVE_INFINITY),nr(Fe,a)}function Ka(){return $2(1)}function Bv(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return Ka()(Pn.apply(void 0,a))}function Fv(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];if(1===a.length){var u=a[0];if(ve(u))return Uv(u,null);if(De(u)&&Object.getPrototypeOf(u)===Object.prototype){var f=Object.keys(u);return Uv(f.map(function(S){return u[S]}),f)}}if("function"==typeof a[a.length-1]){var A=a.pop();return Uv(a=1===a.length&&ve(a[0])?a[0]:a,null).pipe(Ne(function(S){return A.apply(void 0,S)}))}return Uv(a,null)}function Uv(a,d){return new ze(function(u){var f=a.length;if(0!==f)for(var A=new Array(f),S=0,T=0,R=function(B){var H=Yn(a[B]),$=!1;u.add(H.subscribe({next:function(ce){$||($=!0,T++),A[B]=ce},error:function(ce){return u.error(ce)},complete:function(){++S!==f&&$||(T===f&&u.next(d?d.reduce(function(ce,he,ue){return ce[he]=A[ue],ce},{}):A),u.complete())}}))},M=0;M<f;M++)R(M);else u.complete()})}function Ds(a,d,u,f){return le(u)&&(f=u,u=void 0),f?Ds(a,d,u).pipe(Ne(function(A){return ve(A)?f.apply(void 0,A):f(A)})):new ze(function(A){!function S(T,R,M,B,H){var $,He;if((He=T)&&"function"==typeof He.addEventListener&&"function"==typeof He.removeEventListener){var ce=T;T.addEventListener(R,M,H),$=function(){return ce.removeEventListener(R,M,H)}}else if(function(He){return He&&"function"==typeof He.on&&"function"==typeof He.off}(T)){var he=T;T.on(R,M),$=function(){return he.off(R,M)}}else if(function(He){return He&&"function"==typeof He.addListener&&"function"==typeof He.removeListener}(T)){var ue=T;T.addListener(R,M),$=function(){return ue.removeListener(R,M)}}else{if(!T||!T.length)throw new TypeError("Invalid event target");for(var Se=0,Qe=T.length;Se<Qe;Se++)S(T[Se],R,M,B,H)}B.add($)}(a,d,function(S){A.next(arguments.length>1?Array.prototype.slice.call(arguments):S)},A,u)})}function Yd(a,d,u){return u?Yd(a,d).pipe(Ne(function(f){return ve(f)?u.apply(void 0,f):u(f)})):new ze(function(f){var A,S=function(){for(var T=[],R=0;R<arguments.length;R++)T[R]=arguments[R];return f.next(1===T.length?T[0]:T)};try{A=a(S)}catch(T){return void f.error(T)}if(le(d))return function(){return d(S,A)}})}function Vv(a){return!ve(a)&&a-parseFloat(a)+1>=0}function zg(a,d){return void 0===a&&(a=0),void 0===d&&(d=oo),(!Vv(a)||a<0)&&(a=0),d&&"function"==typeof d.schedule||(d=oo),new ze(function(u){return u.add(d.schedule(uw,a,{subscriber:u,counter:0,period:a})),u})}function uw(a){var d=a.subscriber,u=a.counter,f=a.period;d.next(u),this.schedule({subscriber:d,counter:u+1,period:f},f)}function Zs(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];var u=Number.POSITIVE_INFINITY,f=null,A=a[a.length-1];return qn(A)?(f=a.pop(),a.length>1&&"number"==typeof a[a.length-1]&&(u=a.pop())):"number"==typeof A&&(u=a.pop()),null===f&&1===a.length&&a[0]instanceof ze?a[0]:$2(u)(wr(a,f))}function lw(a,d){function u(){return!u.pred.apply(u.thisArg,arguments)}return u.pred=a,u.thisArg=d,u}function Un(a,d){return function(u){return u.lift(new Yg(a,d))}}var Yg=function(){function a(d,u){this.predicate=d,this.thisArg=u}return a.prototype.call=function(d,u){return u.subscribe(new sm(d,this.predicate,this.thisArg))},a}(),sm=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.predicate=f,S.thisArg=A,S.count=0,S}return te(d,a),d.prototype._next=function(u){var f;try{f=this.predicate.call(this.thisArg,u,this.count++)}catch(A){return void this.destination.error(A)}f&&this.destination.next(u)},d}(re);function v0(a,d,u){return[Un(d,u)(new ze(ts(a))),Un(lw(d,u))(new ze(ts(a)))]}function hc(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];if(1===a.length){if(!ve(a[0]))return a[0];a=a[0]}return wr(a,void 0).lift(new Ro)}var Ro=function(){function a(){}return a.prototype.call=function(d,u){return u.subscribe(new yl(d))},a}(),yl=function(a){function d(u){var f=a.call(this,u)||this;return f.hasFirst=!1,f.observables=[],f.subscriptions=[],f}return te(d,a),d.prototype._next=function(u){this.observables.push(u)},d.prototype._complete=function(){var u=this.observables,f=u.length;if(0===f)this.destination.complete();else{for(var A=0;A<f&&!this.hasFirst;A++){var S=mo(this,u[A],void 0,A);this.subscriptions&&this.subscriptions.push(S),this.add(S)}this.observables=null}},d.prototype.notifyNext=function(u,f,A){if(!this.hasFirst){this.hasFirst=!0;for(var S=0;S<this.subscriptions.length;S++)if(S!==A){var T=this.subscriptions[S];T.unsubscribe(),this.remove(T)}this.subscriptions=null}this.destination.next(f)},d}(en);function pu(a,d,u){void 0===a&&(a=0);var f=-1;return Vv(d)?f=Number(d)<1?1:Number(d):qn(d)&&(u=d),qn(u)||(u=oo),new ze(function(A){var S=Vv(a)?a:+a-u.now();return u.schedule(rE,S,{index:0,period:f,subscriber:A})})}function rE(a){var d=a.index,u=a.period,f=a.subscriber;if(f.next(d),!f.closed){if(-1===u)return f.complete();a.index=d+1,this.schedule(a,u)}}function Oo(a,d){var u=Object.keys(a);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);d&&(f=f.filter(function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable})),u.push.apply(u,f)}return u}function mn(a){for(var d=1;d<arguments.length;d++){var u=null!=arguments[d]?arguments[d]:{};d%2?Oo(Object(u),!0).forEach(function(f){Lo(a,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):Oo(Object(u)).forEach(function(f){Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(u,f))})}return a}function Lo(a,d,u){return d in a?Object.defineProperty(a,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[d]=u,a}function Vh(a,d){if(null==a)return{};var u,f,A=function(T,R){if(null==T)return{};var M,B,H={},$=Object.keys(T);for(B=0;B<$.length;B++)R.indexOf(M=$[B])>=0||(H[M]=T[M]);return H}(a,d);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(a);for(f=0;f<S.length;f++)d.indexOf(u=S[f])>=0||Object.prototype.propertyIsEnumerable.call(a,u)&&(A[u]=a[u])}return A}function tr(a,d,u,f,A){var S={};return Object.keys(f).forEach(function(T){S[T]=f[T]}),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=u.slice().reverse().reduce(function(T,R){return R(a,d,T)||T},S),A&&void 0!==S.initializer&&(S.value=S.initializer?S.initializer.call(A):void 0,S.initializer=void 0),void 0===S.initializer&&(Object.defineProperty(a,d,S),S=null),S}function Qo(a,d,u){return d in a?Object.defineProperty(a,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[d]=u,a}function Wr(a,d){var u=Object.keys(a);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);d&&(f=f.filter(function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable})),u.push.apply(u,f)}return u}function am(a){for(var d=1;d<arguments.length;d++){var u=null!=arguments[d]?arguments[d]:{};d%2?Wr(Object(u),!0).forEach(function(f){Qo(a,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):Wr(Object(u)).forEach(function(f){Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(u,f))})}return a}function ea(a){return"Minified Redux error #"+a+"; visit https://redux.js.org/Errors?code="+a+" for the full message or use the non-minified dev environment for full errors. "}var A0="function"==typeof Symbol&&Symbol.observable||"@@observable",qg=function(){return Math.random().toString(36).substring(7).split("").join(".")},_n={INIT:"@@redux/INIT"+qg(),REPLACE:"@@redux/REPLACE"+qg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+qg()}};function iE(a){if("object"!=typeof a||null===a)return!1;for(var d=a;null!==Object.getPrototypeOf(d);)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(a)===d}function si(a,d,u){var f;if("function"==typeof d&&"function"==typeof u||"function"==typeof u&&"function"==typeof arguments[3])throw new Error(ea(0));if("function"==typeof d&&void 0===u&&(u=d,d=void 0),void 0!==u){if("function"!=typeof u)throw new Error(ea(1));return u(si)(a,d)}if("function"!=typeof a)throw new Error(ea(2));var A=a,S=d,T=[],R=T,M=!1;function B(){R===T&&(R=T.slice())}function H(){if(M)throw new Error(ea(3));return S}function $(Se){if("function"!=typeof Se)throw new Error(ea(4));if(M)throw new Error(ea(5));var Qe=!0;return B(),R.push(Se),function(){if(Qe){if(M)throw new Error(ea(6));Qe=!1,B();var He=R.indexOf(Se);R.splice(He,1),T=null}}}function ce(Se){if(!iE(Se))throw new Error(ea(7));if(void 0===Se.type)throw new Error(ea(8));if(M)throw new Error(ea(9));try{M=!0,S=A(S,Se)}finally{M=!1}for(var Qe=T=R,He=0;He<Qe.length;He++)(0,Qe[He])();return Se}function he(Se){if("function"!=typeof Se)throw new Error(ea(10));A=Se,ce({type:_n.REPLACE})}function ue(){var Se,Qe=$;return(Se={subscribe:function(He){if("object"!=typeof He||null===He)throw new Error(ea(11));function We(){He.next&&He.next(H())}return We(),{unsubscribe:Qe(We)}}})[A0]=function(){return this},Se}return ce({type:_n.INIT}),(f={dispatch:ce,subscribe:$,getState:H,replaceReducer:he})[A0]=ue,f}function go(){for(var a=arguments.length,d=new Array(a),u=0;u<a;u++)d[u]=arguments[u];return 0===d.length?function(f){return f}:1===d.length?d[0]:d.reduce(function(f,A){return function(){return f(A.apply(void 0,arguments))}})}function oE(a){return function(d){var u=new BB(a),f=d.lift(u);return u.caught=f}}var BB=function(){function a(d){this.selector=d}return a.prototype.call=function(d,u){return u.subscribe(new Z2(d,this.selector,this.caught))},a}(),Z2=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.selector=f,S.caught=A,S}return te(d,a),d.prototype.error=function(u){if(!this.isStopped){var f=void 0;try{f=this.selector(u,this.caught)}catch(T){return void a.prototype.error.call(this,T)}this._unsubscribeAndRecycle();var A=new Rr(this);this.add(A);var S=hu(f,A);S!==A&&this.add(S)}},d}($i);function jv(a){return a instanceof Date&&!isNaN(+a)}function ta(a,d){void 0===d&&(d=oo);var u=jv(a)?+a-d.now():Math.abs(a);return function(f){return f.lift(new FB(u,d))}}var FB=function(){function a(d,u){this.delay=d,this.scheduler=u}return a.prototype.call=function(d,u){return u.subscribe(new eN(d,this.delay,this.scheduler))},a}(),eN=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.delay=f,S.scheduler=A,S.queue=[],S.active=!1,S.errored=!1,S}return te(d,a),d.dispatch=function(u){for(var f=u.source,A=f.queue,S=u.scheduler,T=u.destination;A.length>0&&A[0].time-S.now()<=0;)A.shift().notification.observe(T);if(A.length>0){var R=Math.max(0,A[0].time-S.now());this.schedule(u,R)}else this.unsubscribe(),f.active=!1},d.prototype._schedule=function(u){this.active=!0,this.destination.add(u.schedule(d.dispatch,this.delay,{source:this,destination:this.destination,scheduler:u}))},d.prototype.scheduleNotification=function(u){if(!0!==this.errored){var f=this.scheduler,A=new tN(f.now()+this.delay,u);this.queue.push(A),!1===this.active&&this._schedule(f)}},d.prototype._next=function(u){this.scheduleNotification(ho.createNext(u))},d.prototype._error=function(u){this.errored=!0,this.queue=[],this.destination.error(u),this.unsubscribe()},d.prototype._complete=function(){this.scheduleNotification(ho.createComplete()),this.unsubscribe()},d}(re),tN=function(a,d){this.time=a,this.notification=d};function ii(a){return function(d){return 0===a?zn():d.lift(new nN(a))}}var nN=function(){function a(d){if(this.total=d,this.total<0)throw new jn}return a.prototype.call=function(d,u){return u.subscribe(new rN(d,this.total))},a}(),rN=function(a){function d(u,f){var A=a.call(this,u)||this;return A.total=f,A.count=0,A}return te(d,a),d.prototype._next=function(u){var f=this.total,A=++this.count;A<=f&&(this.destination.next(u),A===f&&(this.destination.complete(),this.unsubscribe()))},d}(re),UB=function(){function a(d){if(this.total=d,this.total<0)throw new jn}return a.prototype.call=function(d,u){return u.subscribe(new VB(d,this.total))},a}(),VB=function(a){function d(u,f){var A=a.call(this,u)||this;return A.total=f,A.ring=new Array,A.count=0,A}return te(d,a),d.prototype._next=function(u){var f=this.ring,A=this.total,S=this.count++;f.length<A?f.push(u):f[S%A]=u},d.prototype._complete=function(){var u=this.destination,f=this.count;if(f>0)for(var A=this.count>=this.total?this.total:this.count,S=this.ring,T=0;T<A;T++){var R=f++%A;u.next(S[R])}u.complete()},d}(re);function pc(a){return function(d){return d.lift(new Mc(a))}}var Mc=function(){function a(d){this.value=d}return a.prototype.call=function(d,u){return u.subscribe(new iN(d,this.value))},a}(),iN=function(a){function d(u,f){var A=a.call(this,u)||this;return A.value=f,A}return te(d,a),d.prototype._next=function(u){this.destination.next(this.value)},d}(re);function jB(a,d){var u=!1;return arguments.length>=2&&(u=!0),function(f){return f.lift(new El(a,d,u))}}var El=function(){function a(d,u,f){void 0===f&&(f=!1),this.accumulator=d,this.seed=u,this.hasSeed=f}return a.prototype.call=function(d,u){return u.subscribe(new io(d,this.accumulator,this.seed,this.hasSeed))},a}(),io=function(a){function d(u,f,A,S){var T=a.call(this,u)||this;return T.accumulator=f,T._seed=A,T.hasSeed=S,T.index=0,T}return te(d,a),Object.defineProperty(d.prototype,"seed",{get:function(){return this._seed},set:function(u){this.hasSeed=!0,this._seed=u},enumerable:!0,configurable:!0}),d.prototype._next=function(u){if(this.hasSeed)return this._tryNext(u);this.seed=u,this.destination.next(u)},d.prototype._tryNext=function(u){var f,A=this.index++;try{f=this.accumulator(this.seed,u,A)}catch(S){this.destination.error(S)}this.seed=f,this.destination.next(f)},d}(re);function ai(a,d,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof d?nr(function(){return a},d,u):("number"==typeof d&&(u=d),nr(function(){return a},u))}function oN(a){return function(d){return d.lift(new dw(a))}}var dw=function(){function a(d){this.predicate=d}return a.prototype.call=function(d,u){return u.subscribe(new Ar(d,this.predicate))},a}(),Ar=function(a){function d(u,f){var A=a.call(this,u)||this;return A.predicate=f,A.skipping=!0,A.index=0,A}return te(d,a),d.prototype._next=function(u){var f=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||f.next(u)},d.prototype.tryCallPredicate=function(u){try{var f=this.predicate(u,this.index++);this.skipping=Boolean(f)}catch(A){this.destination.error(A)}},d}(re);function Gp(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];var u=a[a.length-1];return qn(u)?(a.pop(),function(f){return Bv(a,f,u)}):function(f){return Bv(a,f)}}var Ui=function(a){function d(u,f,A){void 0===f&&(f=0),void 0===A&&(A=fo);var S=a.call(this)||this;return S.source=u,S.delayTime=f,S.scheduler=A,(!Vv(f)||f<0)&&(S.delayTime=0),A&&"function"==typeof A.schedule||(S.scheduler=fo),S}return te(d,a),d.create=function(u,f,A){return void 0===f&&(f=0),void 0===A&&(A=fo),new d(u,f,A)},d.dispatch=function(u){return this.add(u.source.subscribe(u.subscriber))},d.prototype._subscribe=function(u){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:u})},d}(ze);function sE(a,d){return void 0===d&&(d=0),function(u){return u.lift(new QB(a,d))}}var QB=function(){function a(d,u){this.scheduler=d,this.delay=u}return a.prototype.call=function(d,u){return new Ui(u,this.delay,this.scheduler).subscribe(d)},a}();function Ho(a,d){return"function"==typeof d?function(u){return u.pipe(Ho(function(f,A){return Yn(a(f,A)).pipe(Ne(function(S,T){return d(f,S,A,T)}))}))}:function(u){return u.lift(new bl(a))}}var bl=function(){function a(d){this.project=d}return a.prototype.call=function(d,u){return u.subscribe(new id(d,this.project))},a}(),id=function(a){function d(u,f){var A=a.call(this,u)||this;return A.project=f,A.index=0,A}return te(d,a),d.prototype._next=function(u){var f,A=this.index++;try{f=this.project(u,A)}catch(S){return void this.destination.error(S)}this._innerSub(f)},d.prototype._innerSub=function(u){var f=this.innerSubscription;f&&f.unsubscribe();var A=new Rr(this),S=this.destination;S.add(A),this.innerSubscription=hu(u,A),this.innerSubscription!==A&&S.add(this.innerSubscription)},d.prototype._complete=function(){var u=this.innerSubscription;u&&!u.closed||a.prototype._complete.call(this),this.unsubscribe()},d.prototype._unsubscribe=function(){this.innerSubscription=void 0},d.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&a.prototype._complete.call(this)},d.prototype.notifyNext=function(u){this.destination.next(u)},d}($i);function Jg(a,d){return void 0===d&&(d=!1),function(u){return u.lift(new Xg(a,d))}}var Xg=function(){function a(d,u){this.predicate=d,this.inclusive=u}return a.prototype.call=function(d,u){return u.subscribe(new y0(d,this.predicate,this.inclusive))},a}(),y0=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.predicate=f,S.inclusive=A,S.index=0,S}return te(d,a),d.prototype._next=function(u){var f,A=this.destination;try{f=this.predicate(u,this.index++)}catch(S){return void A.error(S)}this.nextOrComplete(u,f)},d.prototype.nextOrComplete=function(u,f){var A=this.destination;Boolean(f)?A.next(u):(this.inclusive&&A.next(u),A.complete())},d}(re);function dr(a,d,u){return function(f){return f.lift(new Qv(a,d,u))}}var Qv=function(){function a(d,u,f){this.nextOrObserver=d,this.error=u,this.complete=f}return a.prototype.call=function(d,u){return u.subscribe(new qr(d,this.nextOrObserver,this.error,this.complete))},a}(),qr=function(a){function d(u,f,A,S){var T=a.call(this,u)||this;return T._tapNext=Pc,T._tapError=Pc,T._tapComplete=Pc,T._tapError=A||Pc,T._tapComplete=S||Pc,le(f)?(T._context=T,T._tapNext=f):f&&(T._context=f,T._tapNext=f.next||Pc,T._tapError=f.error||Pc,T._tapComplete=f.complete||Pc),T}return te(d,a),d.prototype._next=function(u){try{this._tapNext.call(this._context,u)}catch(f){return void this.destination.error(f)}this.destination.next(u)},d.prototype._error=function(u){try{this._tapError.call(this._context,u)}catch(f){return void this.destination.error(f)}this.destination.error(u)},d.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(u){return void this.destination.error(u)}return this.destination.complete()},d}(re),$g=function(){function a(d,u,f,A){this.waitFor=d,this.absoluteTimeout=u,this.withObservable=f,this.scheduler=A}return a.prototype.call=function(d,u){return u.subscribe(new sN(d,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},a}(),sN=function(a){function d(u,f,A,S,T){var R=a.call(this,u)||this;return R.absoluteTimeout=f,R.waitFor=A,R.withObservable=S,R.scheduler=T,R.scheduleTimeout(),R}return te(d,a),d.dispatchTimeout=function(u){var f=u.withObservable;u._unsubscribeAndRecycle(),u.add(hu(f,new Rr(u)))},d.prototype.scheduleTimeout=function(){var u=this.action;u?this.action=u.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(d.dispatchTimeout,this.waitFor,this))},d.prototype._next=function(u){this.absoluteTimeout||this.scheduleTimeout(),a.prototype._next.call(this,u)},d.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},d}($i);function xu(a,d){return void 0===d&&(d=oo),u=a,f=Si(new vn),void 0===(A=d)&&(A=oo),function(S){var T=jv(u),R=T?+u-A.now():Math.abs(u);return S.lift(new $g(R,T,f,A))};var u,f,A}function Hn(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return function(u){var f;return"function"==typeof a[a.length-1]&&(f=a.pop()),u.lift(new HB(a,f))}}var HB=function(){function a(d,u){this.observables=d,this.project=u}return a.prototype.call=function(d,u){return u.subscribe(new Go(d,this.observables,this.project))},a}(),Go=function(a){function d(u,f,A){var S=a.call(this,u)||this;S.observables=f,S.project=A,S.toRespond=[];var T=f.length;S.values=new Array(T);for(var R=0;R<T;R++)S.toRespond.push(R);for(R=0;R<T;R++)S.add(mo(S,f[R],void 0,R));return S}return te(d,a),d.prototype.notifyNext=function(u,f,A){this.values[A]=f;var S=this.toRespond;if(S.length>0){var T=S.indexOf(A);-1!==T&&S.splice(T,1)}},d.prototype.notifyComplete=function(){},d.prototype._next=function(u){if(0===this.toRespond.length){var f=[u].concat(this.values);this.project?this._tryProject(f):this.destination.next(f)}},d.prototype._tryProject=function(u){var f;try{f=this.project.apply(this,u)}catch(A){return void this.destination.error(A)}this.destination.next(f)},d}(en),aN=function(a,d){return a===d||"function"==typeof d&&a===d.toString()},Vi=function(){for(var a=arguments.length,d=Array(a),u=0;u<a;u++)d[u]=arguments[u];return function(f){return f.pipe(Un(function(A){var S=A.type,T=d.length;if(1===T)return aN(S,d[0]);for(var R=0;R<T;R++)if(aN(S,d[R]))return!0;return!1}))}},E0=function(){function a(d,u){for(var f=0;f<u.length;f++){var A=u[f];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(d,A.key,A)}}return function(d,u,f){return u&&a(d.prototype,u),f&&a(d,f),d}}(),Wp=function(a){function d(u){!function(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}(this,d);var f=function(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||"object"!=typeof S&&"function"!=typeof S?A:S}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return f.source=u,f}return function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}(d,ze),E0(d,null,[{key:"of",value:function(){return new this(Pn.apply(void 0,arguments))}},{key:"from",value:function(u,f){return new this(Yn(u,f))}}]),E0(d,[{key:"lift",value:function(u){var f=new d(this);return f.operator=u,f}},{key:"ofType",value:function(){return Vi.apply(void 0,arguments)(this)}}]),d}(),b0=function(a){function d(u,f){!function(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}(this,d);var A=function(S,T){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!T||"object"!=typeof T&&"function"!=typeof T?S:T}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,function(S){var T=A.__notifier.subscribe(S);return T&&!T.closed&&S.next(A.value),T}));return A.value=f,A.__notifier=new ht,A.__subscription=u.subscribe(function(S){S!==A.value&&(A.value=S,A.__notifier.next(S))}),A}return function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}(d,ze),d}(),Hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function Zg(a,d){a.super_=d,a.prototype=Object.create(d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}function aE(a,d){Object.defineProperty(this,"kind",{value:a,enumerable:!0}),d&&d.length&&Object.defineProperty(this,"path",{value:d,enumerable:!0})}"object"===(typeof global>"u"?"undefined":Hv(global))&&global&&global,Zg(function a(d,u,f){a.super_.call(this,"E",d),Object.defineProperty(this,"lhs",{value:u,enumerable:!0}),Object.defineProperty(this,"rhs",{value:f,enumerable:!0})},aE),Zg(function a(d,u){a.super_.call(this,"N",d),Object.defineProperty(this,"rhs",{value:u,enumerable:!0})},aE),Zg(function a(d,u){a.super_.call(this,"D",d),Object.defineProperty(this,"lhs",{value:u,enumerable:!0})},aE),Zg(function a(d,u,f){a.super_.call(this,"A",d),Object.defineProperty(this,"index",{value:u,enumerable:!0}),Object.defineProperty(this,"item",{value:f,enumerable:!0})},aE);var e_=function(a,d,u,f,A,S,T,R){if(!a){var M;if(void 0===d)M=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var B=[u,f,A,S,T,R],H=0;(M=new Error(d.replace(/%s/g,function(){return B[H++]}))).name="Invariant Violation"}throw M.framesToPop=1,M}},qd=function(a){return"function"==typeof a},Kp=function(a){return a.toString()},zp=function(a){return"string"==typeof a},cm=function(a){return a},Xt=function(a){return null===a};function Do(a,d,u){void 0===d&&(d=cm),e_(qd(d)||Xt(d),"Expected payloadCreator to be a function, undefined or null");var f=Xt(d)||d===cm?cm:function(R){for(var M=arguments.length,B=new Array(M>1?M-1:0),H=1;H<M;H++)B[H-1]=arguments[H];return R instanceof Error?R:d.apply(void 0,[R].concat(B))},A=qd(u),S=a.toString(),T=function(){var R=f.apply(void 0,arguments),M={type:a};return R instanceof Error&&(M.error=!0),void 0!==R&&(M.payload=R),A&&(M.meta=u.apply(void 0,arguments)),M};return T.toString=function(){return S},T}var ba=function(a){if("object"!=typeof a||null===a)return!1;for(var d=a;null!==Object.getPrototypeOf(d);)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(a)===d},od=function(a){return Array.isArray(a)},cE=function(a){return null==a},t_=function(a){return a[a.length-1]},cN=/\s/,n_=/(_|-|\.|:)/,Sl=/([a-z][A-Z]|[A-Z][a-z])/,Jd=/[\W_]+(.|$)/g,sd=/(.)([A-Z]+)/g,lN=function(a){return function(a){return(d=a,cN.test(d)?d.toLowerCase():n_.test(d)?(u=d,u.replace(Jd,function(f,A){return A?" "+A:""})||d).toLowerCase():Sl.test(d)?function(u){return u.replace(sd,function(f,A,S){return A+" "+S.toLowerCase().split("").join(" ")})}(d).toLowerCase():d.toLowerCase()).replace(/[\W_]+(.|$)/g,function(d,u){return u?" "+u:""}).trim();var d,u}(a).replace(/\s(\w)/g,function(d,u){return u.toUpperCase()})},fu=function(a){return-1===a.indexOf("/")?lN(a):a.split("/").map(lN).join("/")},Lu=function(a,d){return a.reduce(function(u,f){return d(u,f)},{})},Zi=function(a){return typeof Map<"u"&&a instanceof Map};function um(a){if(Zi(a))return Array.from(a.keys());if(typeof Reflect<"u"&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(a);var d=Object.getOwnPropertyNames(a);return"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(a))),d}function uE(a,d){return Zi(d)?d.get(a):d[a]}var Gv=function(a){return function d(u,f,A,S){var T=void 0===f?{}:f,R=T.namespace,M=void 0===R?"/":R,B=T.prefix;return void 0===A&&(A={}),void 0===S&&(S=""),um(u).forEach(function(H){var he,$=(he=function(he){var ue;if(!S)return he;var Se=he.toString().split("||"),Qe=S.split("||");return(ue=[]).concat.apply(ue,Qe.map(function(He){return Se.map(function(We){return""+He+M+We})})).join("||")}(H),S||!B||B&&new RegExp("^"+B+M).test(he)?he:""+B+M+he),ce=uE(H,u);a(ce)?d(ce,{namespace:M,prefix:B},A,$):A[$]=ce}),A}},hw=Gv(ba);function Cl(a){for(var d=1;d<arguments.length;d++){var u=null!=arguments[d]?arguments[d]:{},f=Object.keys(u);"function"==typeof Object.getOwnPropertySymbols&&(f=f.concat(Object.getOwnPropertySymbols(u).filter(function(A){return Object.getOwnPropertyDescriptor(u,A).enumerable}))),f.forEach(function(A){Wv(a,A,u[A])})}return a}function Wv(a,d,u){return d in a?Object.defineProperty(a,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[d]=u,a}function xc(a){for(var d=arguments.length,u=new Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];var A=ba(t_(u))?u.pop():{};return e_(u.every(zp)&&(zp(a)||ba(a)),"Expected optional object followed by string action types"),zp(a)?lm([a].concat(u),A):Cl({},Sa(a,A),lm(u,A))}function Sa(a,d){return u=pw(hw(a,d)),T=void 0===(S=(A=void 0===(f=d)?{}:f).namespace)?"/":S,R=A.prefix,M={},Object.getOwnPropertyNames(u).forEach(function(B){var H=R?B.replace(""+R+T,""):B;return function $(ce,he,ue){var Se=fu(ue.shift());0===ue.length?he[Se]=u[ce]:(he[Se]||(he[Se]={}),$(ce,he[Se],ue))}(B,M,H.split(T))}),M;var u,f,A,S,T,R,M}function pw(a,d){var u=void 0===d?{}:d,f=u.prefix,A=u.namespace,S=void 0===A?"/":A;return Lu(Object.keys(a),function(T,R){var M,B=a[R];e_(function(ce){if(qd(ce)||cE(ce))return!0;if(od(ce)){var he=ce[0],Se=ce[1];return qd(void 0===he?cm:he)&&qd(Se)}return!1}(B),"Expected function, undefined, null, or array with payload and meta functions for "+R);var H=f?""+f+S+R:R,$=od(B)?Do.apply(void 0,[H].concat(B)):Do(H,B);return Cl({},T,((M={})[R]=$,M))})}function lm(a,d){var u=pw(Lu(a,function(f,A){var S;return Cl({},f,((S={})[A]=cm,S))}),d);return Lu(Object.keys(u),function(f,A){var S;return Cl({},f,((S={})[fu(A)]=u[A],S))})}var fw=function(){for(var a=arguments.length,d=Array(a),u=0;u<a;u++)d[u]=arguments[u];var f="function"!=typeof d[d.length-1]&&d.pop(),A=d;if(void 0===f)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(S,T){for(var R=arguments.length,M=Array(R>2?R-2:0),B=2;B<R;B++)M[B-2]=arguments[B];var H=void 0===S,$=void 0===T;return H&&$&&f?f:A.reduce(function(ce,he){return he.apply(void 0,[ce,T].concat(M))},H&&!$&&f?f:S)}},Gi=Gv(function(a){return(ba(a)||Zi(a))&&(f=(u=um(a)).every(function(A){return"next"===A||"throw"===A}),!(u.length&&u.length<=2&&f));var u,f});function na(a,d,u){void 0===u&&(u={}),e_(ba(a)||Zi(a),"Expected handlers to be a plain object.");var f=Gi(a,u),A=um(f).map(function(T){return function(R,M,B){void 0===M&&(M=cm);var H=Kp(R).split("||");e_(void 0!==B,"defaultState for reducer handling "+H.join(", ")+" should be defined"),e_(qd(M)||ba(M),"Expected reducer to be a function or object with next and throw reducers");var $=qd(M)?[M,M]:[M.next,M.throw].map(function(ue){return cE(ue)?cm:ue}),ce=$[0],he=$[1];return function(ue,Se){void 0===ue&&(ue=B);var Qe=Se.type;return Qe&&-1!==H.indexOf(Kp(Qe))?(!0===Se.error?he:ce)(ue,Se):ue}}(T,uE(T,f),d)}),S=fw.apply(void 0,A.concat([d]));return function(T,R){return void 0===T&&(T=d),S(T,R)}}const Kv=Do("CONNECT_ZOOM_SOCKET"),gr=Do("CONNECT_XMPP_SOCKET"),ra=Do("CLOSE_ZOOM_SOCKET"),eo=Do("CLOSE_XMPP_SOCKET"),Is=Do("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),Lc=Do("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),ad=Do("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),Bc=Do("CONNECT_MAIN_SESSION_SOCKET"),Ca=Do("CLOSE_MAIN_SESSION_SOCKET"),or=Do("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:fi,setRwgServersList:_s,setRwgRetryCount:Bu,setXmppSocketStatus:Xd,setMainSessionSocketStatus:ks,resetSocket:dm}=xc("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","RESET_SOCKET"),ls=Do("CONNECT_TO_MEDIA_STREAM"),zv=Do("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:hm,setAudioDecodeStatus:Ei,setVideoEncodeStatus:pm,setVideoDecodeStatus:fm,setSharingEncodeStatus:lE,setSharingDecodeStatus:$d,setMediaConstraints:za,setMediaEncryptKey:r_,resetMedia:mm}=xc("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","RESET_MEDIA");function Zd(a,d){for(var u=arguments.length,f=new Array(u>2?u-2:0),A=2;A<u;A++)f[A-2]=arguments[A];return a(Wp.of(...f||[]),d,null)}function i_(){for(var a=arguments.length,d=new Array(a),u=0;u<a;u++)d[u]=arguments[u];const f=function(){for(var A=arguments.length,S=new Array(A),T=0;T<A;T++)S[T]=arguments[T];return Zs(...d.map(R=>{const M=R(...S);if(!M)throw new TypeError('combineEpics: one of the provided Epics "'.concat(R.name||"<anonymous>","\" does not return a stream. Double check you're not missing a return statement!"));return M.pipe(oE((B,H)=>(setTimeout(()=>{throw B},0),H)))}))};try{Object.defineProperty(f,"name",{value:"combineEpics(".concat(d.map(A=>A.name||"<anonymous>").join(", "),")")})}catch{}return f}function Fu(){for(var a=arguments.length,d=new Array(a),u=0;u<a;u++)d[u]=arguments[u];return i_(...d.flatMap(A=>Object.values(A)))}function Mn(a,d){return a.pipe(Vi("".concat(Is)),Un(u=>u.payload.evt===d))}function o_(a,d){return a.pipe(Vi("".concat(or)),Un(u=>u.payload.evt===d))}function jh(a,d){return a.pipe(Vi("".concat(ad)),Un(u=>u.payload.evt===d))}function cd(a,d){return a.pipe(Vi("".concat(Is),"".concat(or)),Un(u=>u.payload.evt===d))}function Ci(a,d){return a.pipe(Vi("".concat(zv)),Un(u=>Array.isArray(d)?d.indexOf(u.payload.type)>-1:u.payload.type===d))}const s_={default:{"apac.errorcodes_success":"Successfully joined the meeting.","apac.errorcodes_fail":"Fail to join the meeting.","apac.errorcodes_not_init":"Meeting not initialized.","apac.errorcodes_register":"This webinar requires registration.","apac.errorcodes_email_require":"Email is missing to attend webinar.","apac.errorcodes_not_exist":"Meeting does not exist.","apac.errorcodes_not_host":"You are not the meeting host.","apac.errorcodes_wrong_pass":"Meeting Passcode wrong.","apac.errorcodes_role_type":"Role type is required.","apac.errorcodes_not_start":"Meeting has not started","apac.errorcodes_re_connect":"Meeting is reconnecting.","apac.errorcodes_be_removed":"Be removed.","apac.errorcodes_disconnect":"Meeting has been disconnected.","apac.errorcodes_denied_register_with_panelist":"Denied register use panelist email.","apac.errorcodes_web_has_in_progress":"Already has other meetings in progress.","apac.errorcodes_web_require_email":"User email is required.","apac.errorcodes_web_not_support_webinar_pac":"Not support webinar and personal audio conference","apac.errorcodes_web_host_not_exit":"The meeting host does not exist.","apac.errorcodes_web_not_support_webclient":"Not support start or join meeting from web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"The current sdk version doesn't support webinar, please upgrade to the latest version.","apac.errorcodes_web_invalid_id":"Invalid meeting ID.","apac.errorcodes_web_not_support_registration_webinar":"Not support registration webinar","apac.errorcodes_web_not_support_tsp":"Not support start or join meeting from web, when you chose TSP as his audio in a meeting.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Not allow to start webinar from web.","apac.errorcodes_pac_api_wrong":"The accounts API Key is not valid.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"Incorrect role.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The accounts API Key is deactivated.","apac.errorcodes_pac_cant_host_other_mn":"Cannot not host another meeting concurrently.","apac.errorcodes_pac_invalid_signature":"Signature is invalid.","apac.errorcodes_pac_no_permission":"No permission.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unable join from browser, please join using the Zoom desktop client or mobile app.","apac.errorcodes_rwc_empty":"Could not get a response from the web server.","apac.errorcodes_rwc_error":"Could not connect to Web Server error.","apac.errorcodes_frequent_call":"You have reached the API limit for this call.","apac.errorcodes_frequent_join":"You be limit by zoom, need to check recaptcha.","apac.errorcodes_offline":"The service is temporarily offline.","apac.errorcodes_wasm_fail":"Download wasm files error, please check your network and firewall.","apac.errorcodes_denied_email":"Email is blocked by Administrator.","apac.errorcodes_tk_expired":"Token has expired.","apac.invalid_parameter":"Invalid Parameter","apac.errorcodes_login_required":"Require login","apac.errorcodes_upgrade":"Your sdk version needs to be {0} or higher to join the meeting"},"de-DE":{"apac.errorcodes_web_has_in_progress":"Hat bereits andere laufende Meetings.","apac.errorcodes_web_require_email":"E-Mail-Adresse von Benutzer erforderlich.","apac.errorcodes_web_not_support_webinar_pac":"Unterst\xfctzen Webinar und pers\xf6nliche Audiokonferenz nicht","apac.errorcodes_web_host_not_exit":"Der Meeting-Host ist nicht vorhanden.","apac.errorcodes_web_not_support_webclient":"Start nicht unterst\xfctzt bzw. starten Sie das Meeting aus dem Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Ihre aktuelle SDK-Version unterst\xfctzt keine Webinare. Aktualisieren Sie bitte auf die neueste Version.","apac.errorcodes_web_invalid_id":"Ung\xfcltige Meeting-ID.","apac.errorcodes_web_not_support_registration_webinar":"Registrierung f\xfcr Webinar wird nicht unterst\xfctzt","apac.errorcodes_web_not_support_tsp":"Sie unterst\xfctzen nicht den Start oder die Teilnahme an einem Meeting aus dem Web, wenn Sie den Telefonieanbieter als seinen Audiobeitrag in einem Meeting gew\xe4hlt haben.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Das Starten eines Webinars vom Internet aus ist nicht zul\xe4ssig.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unf\xe4hig beitreten aus Browser, verbinden Sie bitte den Zoom-Desktop-Client oder mobile App."},"es-ES":{"apac.errorcodes_web_has_in_progress":"Ya posee otras reuniones en curso.","apac.errorcodes_web_require_email":"Se requiere correo electr\xf3nico del usuario.","apac.errorcodes_web_not_support_webinar_pac":"No soporta seminario web o conferencia de audio personal","apac.errorcodes_web_host_not_exit":"El anfitri\xf3n de la reuni\xf3n no existe.","apac.errorcodes_web_not_support_webclient":"No se puede iniciar ni entrar a una reuni\xf3n desde la web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versi\xf3n actual de sdk no es compatible con el seminario web, actualice a la \xfaltima versi\xf3n.","apac.errorcodes_web_invalid_id":"ID de reuni\xf3n no v\xe1lida.","apac.errorcodes_web_not_support_registration_webinar":"Seminario web que no es compatible con la inscripci\xf3n","apac.errorcodes_web_not_support_tsp":"Cuando eligi\xf3 el proveedor de servicios telef\xf3nicos como audio en una reuni\xf3n, no se puede iniciar o unirse una reuni\xf3n desde el sitio web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"No se permite comenzar un seminario web desde la web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"No puede unirse desde el navegador, por favor unirse usando el cliente de escritorio Zoom o aplicaci\xf3n m\xf3vil."},"fr-FR":{"apac.errorcodes_web_has_in_progress":"Il a d\xe9j\xe0 d\u2019autres r\xe9unions en cours.","apac.errorcodes_web_require_email":"Le courriel de l\u2019utilisateur est requis.","apac.errorcodes_web_not_support_webinar_pac":"Ne prend pas en charge le webinaire ni la conf\xe9rence audio personnelle","apac.errorcodes_web_host_not_exit":"L\u2019animateur de la r\xe9union n\u2019existe pas.","apac.errorcodes_web_not_support_webclient":"Ne supporte pas d\xe9marrer ou rejoindre une r\xe9union \xe0 partir du web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La version actuelle du SDK ne prend pas en charge le webinaire, veuillez passer \xe0 la derni\xe8re version.","apac.errorcodes_web_invalid_id":"N\xba de r\xe9union non valide.","apac.errorcodes_web_not_support_registration_webinar":"Ne prend pas en charge le webinaire d\u2019inscription","apac.errorcodes_web_not_support_tsp":"Ne peut pas d\xe9marrer ou rejoindre la r\xe9union depuis Internet, lorsque vous s\xe9lectionnez le fournisseur de service en t\xe9l\xe9phonie comma sa sortie audio dans une r\xe9union.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Ne pas permettre de d\xe9marrer des webinaires \xe0 partir du Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossible de rejoindre le navigateur, s'il vous pla\xeet rejoindre en utilisant le client de bureau Zoom ou une application mobile."},"jp-JP":{"apac.errorcodes_web_has_in_progress":"\u3059\u3067\u306b\u4ed6\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u304c\u59cb\u307e\u3063\u3066\u3044\u307e\u3059\u3002","apac.errorcodes_web_require_email":"\u30e6\u30fc\u30b6\u30fc\u30e1\u30fc\u30eb\u306f\u5fc5\u8981\u3067\u3059\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3068\u30d1\u30fc\u30bd\u30ca\u30eb\u97f3\u58f0\u4f1a\u8b70\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093","apac.errorcodes_web_host_not_exit":"\u3053\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30db\u30b9\u30c8\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_support_webclient":"\u30a6\u30a7\u30d6\u304b\u3089\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u958b\u59cb/\u53c2\u52a0\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u305b\u3093\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u73fe\u5728\u306eSDK\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002","apac.errorcodes_web_invalid_id":"\u7121\u52b9\u306a\u30df\u30fc\u30c6\u30a3\u30f3\u30b0ID\u3067\u3059\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u767b\u9332\u30a6\u30a7\u30d3\u30ca\u30fc\u975e\u5bfe\u5fdc","apac.errorcodes_web_not_support_tsp":"\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30aa\u30fc\u30c7\u30a3\u30aa\u306b\u30c6\u30ec\u30d5\u30a9\u30cb\u30fc\u30b5\u30fc\u30d3\u30b9\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u9078\u629e\u3057\u305f\u5834\u5408\u3001\u30a6\u30a7\u30d6\u304b\u3089\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u958b\u59cb\u3057\u305f\u308a\u3001\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u53c2\u52a0\u3057\u305f\u308a\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30a6\u30a7\u30d6\u304b\u3089\u958b\u59cb\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u53c2\u52a0\u3057\u3001\u30ba\u30fc\u30e0\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3084\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3092\u4f7f\u7528\u3057\u3066\u53c2\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},"pt-PT":{"apac.errorcodes_web_has_in_progress":"J\xe1 h\xe1 outras reuni\xf5es em andamento.","apac.errorcodes_web_require_email":"O e-mail do usu\xe1rio \xe9 obrigat\xf3rio.","apac.errorcodes_web_not_support_webinar_pac":"N\xe3o h\xe1 suporte para webinar e audioconfer\xeancia pessoal","apac.errorcodes_web_host_not_exit":"O anfitri\xe3o da reuni\xe3o n\xe3o existe.","apac.errorcodes_web_not_support_webclient":"N\xe3o h\xe1 suporte para iniciar ou entrar na reuni\xe3o pela web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"A vers\xe3o sdk atual n\xe3o oferece suporte para webinar. Atualize para a vers\xe3o mais recente.","apac.errorcodes_web_invalid_id":"ID da reuni\xe3o inv\xe1lido.","apac.errorcodes_web_not_support_registration_webinar":"O registro do webinar n\xe3o \xe9 compat\xedvel","apac.errorcodes_web_not_support_tsp":"N\xe3o \xe9 compat\xedvel iniciar ou ingressar na reuni\xe3o pela web ao escolher o \xe1udio do provedor de servi\xe7os de telefonia em uma reuni\xe3o.","apac.errorcodes_web_not_allow_start_webinar_from_web":"N\xe3o \xe9 permitido iniciar o webinar na web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Incapaz juntar-se a partir do navegador, por favor, junte-se usando o cliente de desktop Zoom ou aplicativo m\xf3vel."},"ru-RU":{"apac.errorcodes_web_has_in_progress":"\u0423\u0436\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f\u0445.","apac.errorcodes_web_require_email":"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0447\u0442\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.","apac.errorcodes_web_not_support_webinar_pac":"\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440 \u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e","apac.errorcodes_web_host_not_exit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.","apac.errorcodes_web_not_support_webclient":"\u0417\u0430\u043f\u0443\u0441\u043a \u0438\u043b\u0438 \u0432\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0442\u044c \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 SDK \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u044b. \u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438.","apac.errorcodes_web_invalid_id":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438.","apac.errorcodes_web_not_support_registration_webinar":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f","apac.errorcodes_web_not_support_tsp":"\u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0441\u043b\u0443\u0436\u0431\u044b \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438, \u0442\u0430\u043a\u0443\u044e \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0447\u0430\u0442\u044c \u0438\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u0417\u0430\u043f\u0443\u0441\u043a \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440\u0430 \u0447\u0435\u0440\u0435\u0437 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u0438\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043d\u0430\u0441\u0442\u043e\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0438\u043b\u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435."},"zh-CN":{"apac.errorcodes_web_has_in_progress":"\u5df2\u7ecf\u6709\u53e6\u4e00\u573a\u4f1a\u8bae\u6b63\u5728\u8fdb\u884c\u3002","apac.errorcodes_web_require_email":"\u5fc5\u987b\u63d0\u4f9b\u7528\u6237\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u975e\u652f\u6301\u7684\u7f51\u7edc\u7814\u8ba8\u4f1a\u548c\u4e2a\u4eba\u97f3\u9891\u4f1a\u8bae","apac.errorcodes_web_host_not_exit":"\u4f1a\u8bae\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u6301\u4ece Web \u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u5f53\u524d sdk \u7248\u672c\u4e0d\u652f\u6301\u7f51\u7edc\u7814\u8ba8\u4f1a\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u65e0\u6548\u7684\u4f1a\u8baeID\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u6301\u6ce8\u518c\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_web_not_support_tsp":"\u5982\u679c\u9009\u62e9\u7535\u8bdd\u8bed\u97f3\u670d\u52a1\u63d0\u4f9b\u5546\u4f5c\u4e3a\u4f1a\u8bae\u97f3\u9891\uff0c\u5219\u4e0d\u652f\u6301\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8bb8\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u4ece\u6d4f\u89c8\u5668\u65e0\u6cd5\u52a0\u5165\uff0c\u8bf7\u52a0\u5165\u4f7f\u7528\u7f29\u653e\u684c\u9762\u5ba2\u6237\u7aef\u6216\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002"},"zh-TW":{"apac.errorcodes_web_has_in_progress":"\u5df2\u6709\u5176\u4ed6\u6703\u8b70\u6b63\u5728\u9032\u884c\u4e2d\u3002","apac.errorcodes_web_require_email":"\u5fc5\u9808\u63d0\u4f9b\u4f7f\u7528\u8005\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\u548c\u500b\u4eba\u97f3\u8a0a\u6703\u8b70","apac.errorcodes_web_host_not_exit":"\u6703\u8b70\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u63f4\u5f9e Web \u958b\u59cb\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u76ee\u524d\u7684 SDK \u7248\u672c\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\uff0c\u8acb\u5347\u7d1a\u81f3\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u7121\u6548\u7684\u6703\u8b70 ID \u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u63f4\u8a3b\u518a\u7db2\u8def\u7814\u8a0e\u6703","apac.errorcodes_web_not_support_tsp":"\u7576\u60a8\u9078\u64c7\u96fb\u8a71\u8a9e\u97f3\u670d\u52d9\u4f9b\u61c9\u5546\u505a\u70ba\u6703\u8b70\u8a9e\u97f3\u4f7f\u7528\u6642\uff0c\u4e0d\u652f\u63f4\u7d93\u7531\u7db2\u9801\u53ec\u958b\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8a31\u5f9e Web \u958b\u59cb\u7db2\u8def\u7814\u8a0e\u6703\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u5f9e\u700f\u89bd\u5668\u7121\u6cd5\u52a0\u5165\uff0c\u8acb\u52a0\u5165\u4f7f\u7528\u7e2e\u653e\u684c\u9762\u5ba2\u6236\u7aef\u6216\u79fb\u52d5\u61c9\u7528\u7a0b\u5e8f\u3002"},"ko-KO":{"apac.errorcodes_web_has_in_progress":"\uc774\ubbf8 \ub2e4\ub978 \ud68c\uc758\uac00 \uc9c4\ud589 \uc911\uc785\ub2c8\ub2e4.","apac.errorcodes_web_require_email":"\uc0ac\uc6a9\uc790 \uc774\uba54\uc77c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webinar_pac":"\uc6e8\ube44\ub098 \ubc0f \uac1c\uc778 \uc624\ub514\uc624 \uc804\ud654 \ud68c\uc758\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_host_not_exit":"\ud68c\uc758 \ud638\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webclient":"\uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ucc38\uc5ec\ud558\ub294 \uac83\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\ud604\uc7ac SDK \ubc84\uc804\uc740 \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uc2ed\uc2dc\uc624.","apac.errorcodes_web_invalid_id":"\ud68c\uc758 ID\uac00 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_registration_webinar":"\ub4f1\ub85d \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_not_support_tsp":"\ud68c\uc758\uc5d0\uc11c Telephony Service Provider\ub97c \uc624\ub514\uc624\ub85c \uc120\ud0dd\ud55c \uacbd\uc6b0 \uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ud68c\uc758\uc5d0 \ucc38\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\uc6f9\uc5d0\uc11c \uc6e8\ube44\ub098\ub97c \uc2dc\uc791\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\uc218 \uc5c6\uc2b5\ub2c8\ub2e4 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc870\uc778 \uc90c \ub370\uc2a4\ud06c\ud1b1 \ud074\ub77c\uc774\uc5b8\ud2b8 \ub610\ub294 \ubaa8\ubc14\uc77c \uc571\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac00\uc785\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."},"vi-VN":{"apac.errorcodes_web_has_in_progress":"\u0110\xe3 c\xf3 cu\u1ed9c h\u1ecdp kh\xe1c \u0111ang di\u1ec5n ra.","apac.errorcodes_web_require_email":"Email ng\u01b0\u1eddi d\xf9ng l\xe0 b\u1eaft bu\u1ed9c.","apac.errorcodes_web_not_support_webinar_pac":"Kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3ovideo v\xe0 h\u1ed9i ngh\u1ecb \xe2m thanh c\xe1 nh\xe2n","apac.errorcodes_web_host_not_exit":"Ng\u01b0\u1eddi ch\u1ee7 tr\xec cu\u1ed9c h\u1ecdp kh\xf4ng t\u1ed3n t\u1ea1i.","apac.errorcodes_web_not_support_webclient":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Phi\xean b\u1ea3n sdk hi\u1ec7n t\u1ea1i kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn, h\xe3y n\xe2ng c\u1ea5p l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t.","apac.errorcodes_web_invalid_id":"ID cu\u1ed9c h\u1ecdp kh\xf4ng h\u1ee3p l\u1ec7.","apac.errorcodes_web_not_support_registration_webinar":"Kh\xf4ng h\u1ed7 tr\u1ee3 \u0111\u0103ng k\xfd h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn","apac.errorcodes_web_not_support_tsp":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web, khi b\u1ea1n ch\u1ecdn Nh\xe0 cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111i\u1ec7n tho\u1ea1i l\xe0m ngu\u1ed3n \xe2m thanh trong cu\u1ed9c h\u1ecdp.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Kh\xf4ng cho ph\xe9p b\u1eaft \u0111\u1ea7u h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn t\u1eeb web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Kh\xf4ng th\u1ec3 tham gia t\u1eeb tr\xecnh duy\u1ec7t, h\xe3y tham gia b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng client desktop Ph\xf3ng to ho\u1eb7c \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng."},"it-IT":{"apac.errorcodes_web_has_in_progress":"Sta partecipando a un\u2019altra riunione in corso.","apac.errorcodes_web_require_email":"\xc8 richiesta l\u2019email dell\u2019utente.","apac.errorcodes_web_not_support_webinar_pac":"Non supporta webinar e conferenza audio personale","apac.errorcodes_web_host_not_exit":"L\u2019ospite della riunione non esiste.","apac.errorcodes_web_not_support_webclient":"Non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versione sdk corrente non supporta i webinar. Effettua l\u2019aggiornamento alla versione pi\xf9 recente.","apac.errorcodes_web_invalid_id":"ID riunione non valido.","apac.errorcodes_web_not_support_registration_webinar":"Non supporta webinar con iscrizione","apac.errorcodes_web_not_support_tsp":"In caso che hai selezionato il fornitore di servizio telefonico come l\u2019audio in riunione, non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Non \xe8 consentito avviare il webinar dal Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossibile unirsi dal browser, si prega di unirsi con il client desktop Zoom o app mobile."}},Qh=s_.default;let Bo,Uu,Fc;function Il(a,d){return d in Qh?Qh[d]:a}(function(a){a[a.CONF_SUCCESS=0]="CONF_SUCCESS",a[a.CONF_FAIL_MEETING_OVER=6]="CONF_FAIL_MEETING_OVER",a[a.CONF_FAIL_CONF_USER_FULL=9]="CONF_FAIL_CONF_USER_FULL",a[a.CONF_FAIL_CONFLOCKED=12]="CONF_FAIL_CONFLOCKED",a[a.CONF_FAIL_WEBINAR_DENIED_EMAIL=3033]="CONF_FAIL_WEBINAR_DENIED_EMAIL",a[a.CONF_FAIL_MEETING_HAS_CLOSED=103003]="CONF_FAIL_MEETING_HAS_CLOSED",a[a.CONF_FAIL_HAS_BEEN_REMOVED=103039]="CONF_FAIL_HAS_BEEN_REMOVED",a[a.CONF_RESULT_MMR_IB_REJECT=103043]="CONF_RESULT_MMR_IB_REJECT",a[a.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS=103044]="CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS"})(Bo||(Bo={})),function(a){a[a.Unknown=0]="Unknown",a[a.Normal=1]="Normal",a[a.Userrequest=2]="Userrequest",a[a.SdkConnection=3]="SdkConnection",a[a.Reconnect=5]="Reconnect",a[a.PtRequest=6]="PtRequest",a[a.KickedByHost=7]="KickedByHost",a[a.EndByHost=8]="EndByHost",a[a.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",a[a.FreeMeetingTimeout=10]="FreeMeetingTimeout",a[a.JBHTimeout=11]="JBHTimeout",a[a.EndBySingleStatus=12]="EndBySingleStatus",a[a.WebinarNeedRegister=13]="WebinarNeedRegister",a[a.ArchiveFail=14]="ArchiveFail",a[a.EndByNone=15]="EndByNone",a[a.EndByAdmin=16]="EndByAdmin"}(Uu||(Uu={})),function(a){a[a.WaitingRoomFailover=1]="WaitingRoomFailover",a[a.WebEndAndRejoin=2]="WebEndAndRejoin"}(Fc||(Fc={}));const dE={ANOTHER_MEETING_RUNNING:3e3,ERROR_NOT_EXIST:3001,ERROR_NOT_HOST:3003,WRONG_MEETING_PASSWORD:3004,ROLE_TYPE_IS_REQUIRE:3010,EMAIL_REQUIRED:3005,MEETING_NOT_START:3008,BE_REMOVED:3009,ERROR_WEBINAR_ENFORCE_LOGIN:3034,NEED_REAL_NAME:3082,REGISTER_REQUIRED:3099,SSO_LOGIN_WINDOW:6024,ZOOM_LOGIN_WINDOW:3051,ZOOM_SPECIFIC_LOGIN_WINDOW:3052,LOGIN_REQUIRED:3100,RE_CONNECTING:4e3,DISCONNECT:4001,INVALID_PARAMETER:4003,DENIED_REGISTER_WITH_PANELIST:3032,SERVICE_OFFLINE:403,RWC_EMPTY:3621,RWC_ERROR:3622,FREQUENT_CALL:3633,FREQUENT_JOIN:3634,WASM_FAIL:3635,COMMON_ERROR:200,COMMON_SUCCESS:0,UPGRADE:1e3},hE={SUCCESS:"apac.errorcodes_success",FAIL:"apac.errorcodes_fail",MEETING_NOT_INIT:"apac.errorcodes_not_init",REGISTER_REQUIRED:"apac.errorcodes_register",LOGIN_REQUIRED:"apac.errorcodes_login_required",SSO_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_SPECIFIC_LOGIN_WINDOW:"apac.errorcodes_login_required",EMAIL_REQUIRED:"apac.errorcodes_email_require",ERROR_NOT_EXIST:"apac.errorcodes_not_exist",ERROR_NOT_HOST:"apac.errorcodes_not_host",WRONG_MEETING_PASSWORD:"apac.errorcodes_wrong_pass",ROLE_TYPE_IS_REQUIRE:"apac.errorcodes_role_type",ANOTHER_MEETING_RUNNING:"apac.errorcodes_meeting_has_in_progress",MEETING_NOT_START:"apac.errorcodes_not_start",INVALID_PARAMETER:"apac.invalid_parameter",RE_CONNECTING:"apac.errorcodes_re_connect",BE_REMOVED:"apac.errorcodes_be_removed",ERROR_WEBINAR_ENFORCE_LOGIN:"apac.errorcodes_webinar_enforce_login",DISCONNECT:"apac.errorcodes_disconnect",DENIED_REGISTER_WITH_PANELIST:"apac.errorcodes_denied_register_with_panelist",RWC_EMPTY:"apac.errorcodes_rwc_empty",RWC_ERROR:"apac.errorcodes_rwc_error",FREQUENT_CALL:"apac.errorcodes_frequent_call",FREQUENT_JOIN:"apac.errorcodes_frequent_join",WASM_FAIL:"apac.errorcodes_wasm_fail",UPGRADE:"apac.errorcodes_upgrade"},eh={3e3:{"apac.errorcodes_web_has_in_progress":3e3,"apac.errorcodes_web_require_email":3005,"apac.errorcodes_web_not_support_webinar_pac":3701,"apac.errorcodes_web_host_not_exit":3702,"apac.errorcodes_web_not_support_webclient":3603,"apac.errorcodes_web_should_support_webinar_with_latest_version":3604,"apac.errorcodes_web_invalid_id":3703,"apac.errorcodes_web_not_support_registration_webinar":3606,"apac.errorcodes_web_not_support_tsp":3608,"apac.errorcodes_web_not_allow_start_webinar_from_web":3609,"apac.errorcodes_need_use_zoom_desktop_or_mobile":3611},3001:{"apac.errorcodes_not_exist":3610},200:{"apac.errorcodes_pac_api_wrong":3704,"apac.errorcodes_pac_signature_expired":3705,"apac.errorcodes_pac_mn_wrong":3706,"apac.errorcodes_pac_mn_not_fount":3707,"apac.errorcodes_pac_role_error":3708,"apac.errorcodes_pac_host_not_found":3709,"apac.errorcodes_pac_api_disabled":3710,"apac.errorcodes_pac_cant_host_other_mn":3711,"apac.errorcodes_pac_invalid_signature":3712,"apac.errorcodes_pac_no_permission":3713},3099:{"apac.errorcodes_register":3099},3100:{"apac.errorcodes_login_required":3100},3003:{"apac.errorcodes_not_host":3003},3004:{"apac.errorcodes_wrong_pass":3004},3008:{"apac.errorcodes_not_start":3008},3009:{"apac.errorcodes_be_removed":3009},3501:{"apac.errorcodes_login_required":3082},3502:{"apac.errorcodes_login_required":3082},3032:{"apac.errorcodes_denied_register_with_panelist":3100},3033:{"apac.errorcodes_denied_email":3620},3059:{"apac.errorcodes_not_support_simulive":3630},3082:{"apac.errorcodes_real_name":3082},403:{"apac.errorcodes_offline":403},404:{"apac.errorcodes_offline":403},4003:{"apac.invalid_parameter":4003},124:{"apac.errorcodes_tk_expired":3610},3136:{"apac.errorcodes_require_host":3709}},mu={3004:{"apac.errorcodes_pac_mn_wrong":3714},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_denied_email":3620},103039:{"apac.errorcodes_be_removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};function S0(a,d){return Object.keys(a).find(u=>a[u]===d)}let mw;function pE(a,d){const{key:u,value:f}=function(S,T){let R=!1;if(-1===S)return{key:"apac.errorcodes_offline",value:403};if(3e3===S){const H=["en-US","de-DE","es-ES","en-US","fr-FR","jp-JP","pt-PT","ru-RU","zh-CN","zh-TW","ko_KO","vi-VN","it-IT"];let $={};if(mw)$=mw;else{const ce=Object.keys(eh[3e3]);H.forEach(he=>{const ue=("en-US"===(Se=he)&&(Se="default"),s_[Se]||s_.default);var Se;$[he]={},ce.forEach(Se=>{$[he][Se]=ue[Se]})}),mw=$}return H.forEach(ce=>{if(R)return;const he=S0($[ce],T);he&&(R={key:he,value:eh[S][he]})}),R||(R={key:"apac.errorcodes_fail",value:200}),R}if(200===S){const H=S0({"apac.errorcodes_pac_api_wrong":"The api key is wrong.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"The role is not applicable.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The account don't enable API.","apac.errorcodes_pac_cant_host_other_mn":"Can not be host in other account's meeting.","apac.errorcodes_pac_invalid_signature":"Invalid signature.","apac.errorcodes_pac_no_permission":"No permission"},T);return R=H?{key:H,value:eh[S][H]}:{key:"apac.errorcodes_fail",value:200},R}if(void 0!==eh[S]){const H=eh[S],$=Object.keys(H)[0];R={key:$,value:H[$]}}if(R)return R;const M=S0(dE,S),B=hE[M];return B?{key:B,value:S}:{key:"apac.errorcodes_fail",value:200}}(a,d),A=Il(u,u);return u!==A?{reason:A,errorCode:f}:{reason:Qh[u],errorCode:f}}function fE(a){let d=!1;const u="number"==typeof a?a:a.body.res;if(void 0!==mu[u]){const A=mu[u],S=Object.keys(A)[0];d={key:S,value:A[S]}}if(d){const{key:A,value:S}=d,T=Il(A,A);return Object.assign({},a,A!==T?{reason:T,errorCode:S}:{reason:Qh[A],errorCode:S})}const f=pE(u);return Object.assign({},a,{reason:f.reason,errorCode:f.errorCode})}var GB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dN(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function fc(a,d,u){return a(u={path:d,exports:{},require:function(f,A){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},u.exports),u.exports}var mE=fc(function(a,d){var u;u=typeof self<"u"?self:typeof window<"u"?window:GB,a.exports=function(A){var S,T=(A=A||{}).Base64,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=function(Qt){for(var Bn={},_r=0,vt=Qt.length;_r<vt;_r++)Bn[Qt.charAt(_r)]=_r;return Bn}(R),B=String.fromCharCode,H=function(Qt){if(Qt.length<2)return(Bn=Qt.charCodeAt(0))<128?Qt:Bn<2048?B(192|Bn>>>6)+B(128|63&Bn):B(224|Bn>>>12&15)+B(128|Bn>>>6&63)+B(128|63&Bn);var Bn=65536+1024*(Qt.charCodeAt(0)-55296)+(Qt.charCodeAt(1)-56320);return B(240|Bn>>>18&7)+B(128|Bn>>>12&63)+B(128|Bn>>>6&63)+B(128|63&Bn)},$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ce=function(Qt){return Qt.replace($,H)},he=function(Qt){var Bn=[0,2,1][Qt.length%3],_r=Qt.charCodeAt(0)<<16|(Qt.length>1?Qt.charCodeAt(1):0)<<8|(Qt.length>2?Qt.charCodeAt(2):0);return[R.charAt(_r>>>18),R.charAt(_r>>>12&63),Bn>=2?"=":R.charAt(_r>>>6&63),Bn>=1?"=":R.charAt(63&_r)].join("")},ue=A.btoa&&"function"==typeof A.btoa?function(Qt){return A.btoa(Qt)}:function(Qt){if(Qt.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return Qt.replace(/[\s\S]{1,3}/g,he)},Se=function(Qt){return ue(ce(String(Qt)))},Qe=function(Qt){return Qt.replace(/[+\/]/g,function(Bn){return"+"==Bn?"-":"_"}).replace(/=/g,"")},He=function(Qt,Bn){return Bn?Qe(Se(Qt)):Se(Qt)};A.Uint8Array&&(S=function(Qt,Bn){for(var _r="",vt=0,ut=Qt.length;vt<ut;vt+=3){var $e=Qt[vt+1],St=Qt[vt+2],lt=Qt[vt]<<16|$e<<8|St;_r+=R.charAt(lt>>>18)+R.charAt(lt>>>12&63)+(void 0!==$e?R.charAt(lt>>>6&63):"=")+(void 0!==St?R.charAt(63&lt):"=")}return Bn?Qe(_r):_r});var We,et=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Lt=function(Qt){switch(Qt.length){case 4:var Bn=((7&Qt.charCodeAt(0))<<18|(63&Qt.charCodeAt(1))<<12|(63&Qt.charCodeAt(2))<<6|63&Qt.charCodeAt(3))-65536;return B(55296+(Bn>>>10))+B(56320+(1023&Bn));case 3:return B((15&Qt.charCodeAt(0))<<12|(63&Qt.charCodeAt(1))<<6|63&Qt.charCodeAt(2));default:return B((31&Qt.charCodeAt(0))<<6|63&Qt.charCodeAt(1))}},Gt=function(Qt){return Qt.replace(et,Lt)},jt=function(Qt){var Bn=Qt.length,_r=Bn%4,vt=(Bn>0?M[Qt.charAt(0)]<<18:0)|(Bn>1?M[Qt.charAt(1)]<<12:0)|(Bn>2?M[Qt.charAt(2)]<<6:0)|(Bn>3?M[Qt.charAt(3)]:0),ut=[B(vt>>>16),B(vt>>>8&255),B(255&vt)];return ut.length-=[0,0,2,1][_r],ut.join("")},Tt=A.atob&&"function"==typeof A.atob?function(Qt){return A.atob(Qt)}:function(Qt){return Qt.replace(/\S{1,4}/g,jt)},sn=function(Qt){return Tt(String(Qt).replace(/[^A-Za-z0-9\+\/]/g,""))},hn=function(Qt){return String(Qt).replace(/[-_]/g,function(Bn){return"-"==Bn?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},An=function(Qt){return Bn=hn(Qt),Gt(Tt(Bn));var Bn};if(A.Uint8Array&&(We=function(Qt){return Uint8Array.from(sn(hn(Qt)),function(Bn){return Bn.charCodeAt(0)})}),A.Base64={VERSION:"2.6.4",atob:sn,btoa:ue,fromBase64:An,toBase64:He,utob:ce,encode:He,encodeURI:function(Qt){return He(Qt,!0)},btou:Gt,decode:An,noConflict:function(){var Qt=A.Base64;return A.Base64=T,Qt},fromUint8Array:S,toUint8Array:We},"function"==typeof Object.defineProperty){var ln=function(Qt){return{value:Qt,enumerable:!1,writable:!0,configurable:!0}};A.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",ln(function(){return An(this)})),Object.defineProperty(String.prototype,"toBase64",ln(function(Qt){return He(this,Qt)})),Object.defineProperty(String.prototype,"toBase64URI",ln(function(){return He(this,!0)}))}}return A.Meteor&&(Base64=A.Base64),a.exports&&(a.exports.Base64=A.Base64),{Base64:A.Base64}}(u)});function Hs(a){return mE.Base64.encode(a,!0)}function Hh(a){return mE.Base64.decode(a)}function gw(a){return mE.Base64.encode(a,!1)}const WB={"-":"+",_:"/",".":"="};function Tl(a){const d=a.replace(/[-_.]/g,u=>WB[u]);return Uint8Array.from(atob(d),u=>u.charCodeAt(0))}const hN=a=>{const d=a.charCodeAt(0);return d<=parseInt("0x7F",16)?1:d<=parseInt("0x7FF",16)?2:d<=parseInt("0xFFFF",16)?3:d<=parseInt("0x1FFFFF",16)?4:d<=parseInt("0x3FFFFFF",16)?5:6},_w=(a,d)=>Object.keys(a).find(u=>a[u]===d)||0,pN=(a,d)=>{const u=a.split(".").map(S=>Number(S)).slice(0,3),f=d.split(".").map(S=>Number(S)).slice(0,3);let A=0;for(let S=0;S<3;S++){const T=S<u.length?u[S]:0,R=S<f.length?f[S]:0;if(T<R){A=-1;break}if(T>R){A=1;break}}return A},vw=a=>{var d;let u=(new Date).getTime(),f=1e3*(null===(d=performance)||void 0===d?void 0:d.now())||0;const A="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,S=>{let T=16*Math.random();return u>0?(T=(u+T)%16|0,u=Math.floor(u/16)):(T=(f+T)%16|0,f=Math.floor(f/16)),("x"===S?T:3&T|8).toString(16)});return"string"==typeof a||"number"==typeof a?A+":"+a:A+""},Yp=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],C0={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:a=>({meetingTopic:Hh(a)}),gatewayKey:a=>{const[,d,u]=a.split(".");return d&&u?{gatewayUser:{userId:Number(d),sn:u}}:{}},encryptKey:a=>({gcmSessinKey:Tl(a)})},KB=Do("GET_MEETING_INFO"),I0=Do("GET_INSTANT_MEETING_INFO");Do("LOGON_ZOOM_DOMAIN"),Do("VERIFY_ZOOM_RECAPTCHA"),Do("LOGON_THIRD_PARTY_DOMAIN");const Yv=Do("PING_RWC_SERVER"),ia=Do("MEETING_FAILOVER"),qv=Do("LEAVE_MEETING"),Ya=Do("END_MEETING");Do("REGISTER_WEBINAR");const gE=Do("TRIGGER_IDLE_CHECK"),{setMeetingInfo:gm,setWindownOpen:fN,setAppidSignature:T0,setZtk:a_,setZsk:mN,setTkMtkguid:w0,setPingRwcTimestamp:Aw,setInMeetingInfo:oa,setMeetingAttribute:Gh,resetMeeting:R0,setIsHost:_E,setIsCohost:yw,setMeetingIsOnHold:c_,setIsMeetingReset:sa,setAudioVideoBeforeOnHold:Ew,setCurrentUserAudioBeforeReset:gN,setIsCurrentUserMutedBeforeReset:Jv,setMeetingStatus:qa,setMeetingRegion:bw,setIsCurrentUserStartVideoBeforeReset:Sw,setJoinMeetingTimeStamp:_m,setIsEnableQos:Ia,setActiveAppInfo:_N,setMeetingIdleStartTime:Wh,setSessionIdleTimeoutMinutes:Cw,setIsAudioBridgeEnabled:Kh,addDiscardedRwcHost:Xv,setSharePronounType:vE,setIsStayAwakeDuringTheSession:ci}=xc({SET_MEETING_INFO:a=>a,SET_WINDOWN_OPEN:a=>a,SET_APPID_SIGNATURE:a=>a,SET_ZTK:a=>a,SET_ZSK:a=>a,SET_TK_MTKGUID:a=>a,SET_PING_RWC_TIMESTAMP:a=>a,SET_IN_MEETING_INFO:a=>a,SET_MEETING_ATTRIBUTE:a=>{if(Yp.some(d=>a&&void 0!==a[d])){let d=a;return Object.keys(C0).some(u=>void 0!==a[u])&&(d=Object.keys(a).reduce((u,f)=>{const A=C0[f];return"function"==typeof A?Object.assign(u,A(a[f])):"string"==typeof A&&(u[A]=a[f]),u},{})),d}return{}},SET_IS_HOST:a=>a&&a.bHost,SET_IS_COHOST:a=>a&&a.bCoHost,RESET_MEETING:a=>a,SET_MEETING_IS_ON_HOLD:a=>a,SET_IS_MEETING_RESET:a=>a,SET_AUDIO_VIDEO_BEFORE_ON_HOLD:a=>a,SET_CURRENT_USER_AUDIO_BEFORE_RESET:a=>a,SET_IS_CURRENT_USER_MUTED_BEFORE_RESET:a=>a,SET_MEETING_STATUS:a=>a,SET_MEETING_REGION:a=>a,SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET:a=>a,SET_JOIN_MEETING_TIME_STAMP:a=>a,SET_IS_ENABLE_QOS:a=>a,SET_ACTIVE_APP_INFO:a=>a,SET_MEETING_IDLE_START_TIME:a=>a,SET_SESSION_IDLE_TIMEOUT_MINUTES:a=>a,SET_IS_AUDIO_BRIDGE_ENABLED:a=>a,ADD_DISCARDED_RWC_HOST:a=>a,SET_SHARE_PRONOUN_TYPE:a=>a,SET_IS_STAY_AWAKE_DURING_THE_SESSION:a=>a});let O0,vN,aa,$v,D0,vs,vm,ji;(function(a){a[a.None=0]="None",a[a.Hand=1]="Hand",a[a.Yes=2]="Yes",a[a.No=3]="No",a[a.Fast=4]="Fast",a[a.Slow=5]="Slow",a[a.Bad=6]="Bad",a[a.Good=7]="Good",a[a.Clap=8]="Clap",a[a.Coffee=9]="Coffee",a[a.Clock=10]="Clock",a[a.Emoji=11]="Emoji"})(O0||(O0={})),function(a){a.LoginSuccess="zoomLoginSuccess",a.LoginFail="zoomLoginFail",a.CaptchaSuccess="captchaSuccess",a.CaptchaFail="captchaFail",a.SSOLoginSuccess="ssoLoginSuccess",a.SSOLoginFail="ssoLoginFail",a.JoinSuccess="joinSuccess",a.RegisterSuccess="registerSuccess"}(vN||(vN={})),function(a){a.Failover="failover",a.OnHold="on hold",a.Promote="promote",a.Depromote="depromote",a.JoinBreakoutRoom="join breakout room",a.MoveToBreakoutRoom="move to breakout room",a.BackToMainSession="back to main session"}(aa||(aa={})),W.ConnectionState=void 0,function(a){a.CDN="CDN",a.Global="Global",a.CN="CN"}($v||($v={})),function(a){a.Connected="Connected",a.Reconnecting="Reconnecting",a.Closed="Closed",a.Fail="Fail"}(W.ConnectionState||(W.ConnectionState={})),function(a){a.Loading="loading",a.Success="success",a.Fail="fail"}(D0||(D0={})),function(a){a.Initial="initial",a.Joined="joined",a.Closed="closed"}(vs||(vs={})),function(a){a.AudioBridgeEnable="1,2"}(vm||(vm={})),function(a){a.LocalStorage="LocalStorage",a.SessionStorage="SessionStorage",a.Memory="Memory"}(ji||(ji={}));const yn=Hs("{}");class cr{constructor(d){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=Hs("zoom-storage-".concat(d)),this.localStorageKey=Hs("zoom-local-storage"),this.memoryCache={},this.sessionCache=JSON.parse(Hh(sessionStorage.getItem(this.sessionStorageKey)||yn)),this.localCache=JSON.parse(Hh(localStorage.getItem(this.localStorageKey)||yn))}static init(d){this.instance=new cr(d)}static get(d){if(void 0===this.instance)throw new Error("read before initial");return this.instance.getValue(d).value}static set(d,u,f){if(void 0===this.instance)throw new Error("set before initial");return this.instance.setValue(d,u,f)}static remove(d){if(void 0===this.instance)throw new Error("remove before initial");return this.instance.removeValue(d)}static clearSession(){if(void 0===this.instance)throw new Error("clear before initial");return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey)}getValue(d){return this.sessionCache.hasOwnProperty(d)?{value:this.sessionCache[d],type:ji.SessionStorage}:this.localCache.hasOwnProperty(d)?{value:this.localCache[d],type:ji.LocalStorage}:{value:this.memoryCache[d],type:ji.Memory}}setValue(d,u,f){if(!d)throw new Error("key is null");switch(f){case ji.SessionStorage:{const A=this.sessionCache[d];let S=u;return"function"==typeof u&&(S=u(A)),A!==S&&(this.sessionCache[d]=S,this.flushValue(ji.SessionStorage)),S}case ji.LocalStorage:{const A=this.localCache[d];let S=u;return"function"==typeof u&&(S=u(A)),A!==S&&(this.localCache[d]=S,this.flushValue(ji.LocalStorage)),S}case ji.Memory:{const A=this.memoryCache[d];let S=u;return"function"==typeof u&&(S=u(A)),this.memoryCache[d]=S,S}default:return null}}removeValue(d){const{type:u}=this.getValue(d);switch(u){case ji.SessionStorage:delete this.sessionCache[d],this.flushValue(ji.SessionStorage);break;case ji.LocalStorage:delete this.localCache[d],this.flushValue(ji.LocalStorage);break;case ji.Memory:delete this.memoryCache[d]}}flushValue(d){d===ji.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,Hs(JSON.stringify(this.sessionCache))):d===ji.LocalStorage&&localStorage.setItem(this.localStorageKey,Hs(JSON.stringify(this.localCache)))}}function Ta(){const a=navigator.userAgent;let d,u=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(u[1])?(d=/\brv[ :]+(\d+)/g.exec(a)||[],"IE ".concat(d[1]||"")):"Chrome"===u[1]&&(d=a.match(/\b(OPR|Edge)\/(\d+)/),d&&d.length)?d.slice(1).join(" ").replace("OPR","Opera"):(u=u[2]?[u[1],u[2]]:[navigator.appName,navigator.appVersion,"-?"],(d=a.match(/version\/(\d+)/i))&&u.splice(1,1,d[1]),ym()&&(u[0]="ios-safari"),u.join(""))}function wa(){const a=navigator.userAgent.toLowerCase();return!/opera|opr\/[\d]+/.test(a)&&/(msie|trident)/.test(a)}function Wo(){return"object"==typeof WebAssembly&&"function"==typeof Worker}cr.instance=void 0;const Zv=()=>"function"==typeof AudioWorklet,Am=()=>wa(),ud=()=>{const{userAgent:a}=navigator;return!/opera|opr\/[\d]+/i.test(navigator.userAgent)&&!/edge\/(\d+)/i.test(navigator.userAgent)&&/chrome/i.test(a)&&/webkit/i.test(a)},ym=()=>{const{userAgent:a}=navigator;return/iPad|iPhone|iPod/i.test(a)||/MacIntel/i.test(navigator.platform)&&(null===(d=navigator)||void 0===d?void 0:d.maxTouchPoints)>2;var d},eA=()=>/arm/i.test(navigator.userAgent),AN=()=>/\bCrOS\b/.test(navigator.userAgent);function ld(){return Em()||ym()}const k0=()=>{var a;return!ld()&&"function"==typeof window.OffscreenCanvas&&(null===(a=navigator)||void 0===a?void 0:a.hardwareConcurrency)>=4&&"function"==typeof requestAnimationFrame&&"function"==typeof SharedArrayBuffer};function tA(){return"function"==typeof window.MediaStreamTrackProcessor}function Ra(){return"function"==typeof window.OffscreenCanvas}const dd=a=>{var d;return k0()?AN()&&eA()||AN()&&!eA()?navigator.hardwareConcurrency>=4?9:4:(null===(d=navigator)||void 0===d?void 0:d.hardwareConcurrency)<4?9:25:a&&tA()&&Ra()?4:1};function Em(){return/android/i.test(navigator.userAgent)}function qp(){return ld()||!navigator.mediaDevices.getSupportedConstraints().aspectRatio||/firefox/i.test(navigator.userAgent)||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}let Fo,bm;(function(a){a.VIDEO_ENCODE="0",a.VIDEO_DECODE="1",a.AUDIO_ENCODE="2",a.AUDIO_DECODE="3",a.SHARING_ENCODE="4",a.SHARING_DECODE="5"})(Fo||(Fo={})),function(a){a[a.NONE=0]="NONE",a[a.AES_256=1]="AES_256",a[a.AES_GCM=2]="AES_GCM"}(bm||(bm={}));const gu=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"}});let ds,N0;(function(a){a.WebclientOpt="WEB_CLIENT_OPT",a.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",a.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",a.WebclientZtk="WEB_CLIENT_ZTK",a.WebclientZsk="WEB_CLIENT_ZSK",a.WebclientTk="WEB_CLIENT_TK",a.WebclientIVState="WEB_CLIENT_IV_STATE",a.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",a.WebclientUserId="WEB_CLIENT_USER_ID",a.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",a.WebclientZoomId="WEB_CLIENT_ZOOM_ID",a.WebclientUserName="WEB_CLIENT_USER_NAME",a.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",a.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",a.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",a.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",a.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",a.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY"})(ds||(ds={})),function(a){a.WebclientDeviceId="WEBCLIENT_DEVICE_ID"}(N0||(N0={}));const Jp=(window.crypto||window.msCrypto).subtle,Xp=ds.WebclientIVState,P0=Object.keys(gu).map(a=>gu[a].sessionType);let mc=(()=>{class a{constructor(u,f,A){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(u,f,A),cr.set(Xp,{},ji.SessionStorage)}static init(u,f,A){this.instance?this.instance.resetParameters(u,f,A):this.instance=new a(u,f,A)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(u,f,A){this.isGCMEnabled=!(wa()||!Wo())&&A===bm.AES_GCM,this.gcmSessionKey=Tl(f),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(u)}beginCrypto(u,f,A){const S=new Uint32Array(1);S[0]=9,S[0]+=Number(A);const T=new Uint8Array(S.buffer);let R=new Uint8Array(132);const M=Tl(f);return R.set(M,0),R.set(T,M.length),R=R.subarray(0,M.length+4),Jp.importKey("raw",u,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then(B=>Jp.sign({name:"HMAC"},B,R)).then(B=>Jp.importKey("raw",B,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))}getNextIV(u){const f=cr.get(Xp);return void 0===f[u]?(f[u]=0,cr.set(Xp,f,ji.SessionStorage)):cr.set(Xp,A=>mn(mn({},A),{},{[u]:A[u]+1}),ji.SessionStorage)}resetIVState(){const u=cr.get(Xp);if(void 0!==u){const f=Object.keys(u).filter(A=>P0.indexOf(A)>-1);f.length>0&&(f.forEach(A=>{u[A]+=1e6}),cr.set(Xp,u,ji.SessionStorage))}}static resetIV(){if(void 0===this.instance)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt(u){let{text:f,type:A}=u;const S=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const R=this.instance.getNextIV(A.sessionType),M=new ArrayBuffer(16),B=new Uint8Array(M);new DataView(M).setUint32(0,R,!0);let H=null;return H="BO_BROADCAST"===A.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(H,this.instance.zoomId,A.gcmType).then($=>{const ce=(new TextEncoder).encode(f);return Jp.encrypt({name:"AES-GCM",iv:B,additionalData:S,tagLength:128},$,ce)}).then($=>{const he=new ArrayBuffer(1+B.byteLength+2+S.byteLength+4+$.byteLength);new Uint8Array(he)[0]=B.length,new Uint8Array(he,1,B.byteLength).set(B),new DataView(he).setUint16(1+B.byteLength,S.length,!0),new Uint8Array(he,3+B.byteLength).set(S),new DataView(he).setUint32(1+B.byteLength+2+S.byteLength,$.byteLength-16,!0),new Uint8Array(he,1+B.byteLength+2+S.byteLength+4).set(new Uint8Array($));const ue=new Uint8Array(he).reduce((Se,Qe)=>Se+String.fromCharCode(Qe),"");return window.btoa(ue).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")})}return Promise.resolve(Hs(f))}static beginDecrypt(u){let{decryptedText:f,type:A,zoomId:S}=u;if(this.instance&&this.instance.isGCMEnabled){const T=function(He){let We;const et=He.length,Lt=new Array(et);for(We=0;We<et;++We)Lt[We]=255&He.charCodeAt(We);return new Uint8Array(Lt)}(atob(f.replace(/_/g,"/").replace(/-/g,"+"))),R=T[0],M=T.slice(1,R+1),B=T.slice(1+R,3+R),H=new DataView(B.buffer).getUint16(0,!0),$=T.slice(1+R+2,1+R+2+H),ce=T.slice(1+R+2+H,1+R+2+H+4),he=new DataView(ce.buffer).getUint32(0,!0),ue=T.slice(1+R+2+H+4,1+R+2+H+4+he),Se=T.slice(1+R+2+H+4+he);let Qe=null;return Qe="BO_BROADCAST"===A.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(Qe,S,A.gcmType).then(He=>{const We=function(et,Lt){et=new Uint8Array(et),Lt=new Uint8Array(Lt);const Gt=new Uint8Array(et.length+Lt.length);return Gt.set(et),Gt.set(Lt,et.length),Gt}(ue,Se);return Jp.decrypt({name:"AES-GCM",iv:M,additionalData:$,tagLength:8*Se.length},He,We.buffer)}).then(He=>({message:(new TextDecoder).decode(He),iv:M,aad:$})).catch(He=>({message:"[".concat("This is an encrypted message","]"),iv:M,aad:$}))}{const T=new TextDecoder("utf-8");return Promise.resolve({message:T.decode(Tl(f))})}}}return a.instance=void 0,a})();const M0=20234,Ts=7937,gc=7938,nA=12039,Sm=16138;let to,hd,Ni,Cm,rA;(function(a){a[a.NoAttendee=0]="NoAttendee",a[a.All=1]="All",a[a.AllPanelist=2]="AllPanelist",a[a.Host=3]="Host",a[a.NoOne=4]="NoOne",a[a.EveryonePublicly=5]="EveryonePublicly"})(to||(to={})),function(a){a[a.AllPanelist=1]="AllPanelist",a[a.Everyone=2]="Everyone",a[a.Invalid=0]="Invalid"}(hd||(hd={})),function(a){a[a.All=0]="All",a[a.Panelist=1]="Panelist",a[a.IndividualCcPanelist=2]="IndividualCcPanelist",a[a.Individual=3]="Individual",a[a.SilentModeUsers=4]="SilentModeUsers"}(Ni||(Ni={})),function(a){a[a.None=0]="None",a[a.Delete=1]="Delete",a[a.Modify=2]="Modify"}(Cm||(Cm={})),function(a){a[a.Success=0]="Success",a[a.Delete=1]="Delete",a[a.Block=3]="Block"}(rA||(rA={}));const Uc=[to.All,to.Host,to.NoOne,to.EveryonePublicly],Im=[to.NoOne,to.All,to.AllPanelist],Uo={AllPanelist:11,Everyone:12},Tm={[Uo.AllPanelist]:hd.AllPanelist,[Uo.Everyone]:hd.Everyone},iA={userId:Ni.All,displayName:"Everyone",isHost:!1,isCoHost:!1},$p={userId:Ni.Panelist,displayName:"All panelists"},x0={userId:Ni.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let wl;!function(a){a.Open="open",a.Message="message",a.Error="error",a.Close="close"}(wl||(wl={}));class L0{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.heartBeatInterval=6e4,this.eventHandlers=new Map,this.websocket=null,this.seq=1}on(d,u){let f=this.eventHandlers.get(d);f||(f=[]),f.push(u),this.eventHandlers.set(d,f)}off(d,u){const f=this.eventHandlers.get(d);if(f){const A=f.filter(S=>S!==u);this.eventHandlers.set(d,A)}}emit(d,u){const f=this.eventHandlers.get(d);f&&f instanceof Array&&f.slice(0).forEach(A=>{try{A(u)}catch(S){console.error(S)}})}sendMessageToRwg(d){this.seq+=1;const u=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(d,{seq:u}))),u}connect(d){this.websocket=new WebSocket(d),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var d;null===(d=this.websocket)||void 0===d||d.close()}addHeartBeat(){const d=setInterval(()=>{this.sendMessageToRwg({evt:0})},this.heartBeatInterval);this.intervalsToBeCleardWhenSocketClose.push(d)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach(d=>clearInterval(d))}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",d=>{this.addHeartBeat(),this.emit("open",d)}),this.websocket.addEventListener("message",d=>{this.emit("message",d)}),this.websocket.addEventListener("close",d=>{this.clearIntervals(),this.emit("close",d)}),this.websocket.addEventListener("error",d=>{this.emit("error",d)}))}joinMeeting(d){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:d}})}}lockMeeting(d){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:d}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(){return{seq:this.sendMessageToRwg({evt:4103,body:{}})}}recordMeeting(d,u){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:d,bPause:u}})}}expel(d){return{seq:this.sendMessageToRwg({evt:4107,body:{id:d}})}}expelAttendee(d){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:d}})}}rename(d,u,f){return{seq:this.sendMessageToRwg({evt:4109,body:{id:d,dn2:u,olddn2:f}})}}assignHost(d,u){return{seq:this.sendMessageToRwg({evt:4111,body:{id:d,bCoHost:u}})}}reclaimHost(d){return{seq:this.sendMessageToRwg({evt:4133,body:{id:d,bCoHost:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}})}}revokeCoHost(d){return{seq:this.sendMessageToRwg({evt:4195,body:{id:d}})}}putOnHold(d,u){return{seq:this.sendMessageToRwg({evt:4113,body:{id:d,bHold:u}})}}setMuteOnEntry(d){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:d}})}}setHoldOnEntry(d){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:d}})}}inviteCRCDevice(d,u){return{seq:this.sendMessageToRwg({evt:4119,body:{ip:d,type:u,encrypt:arguments.length>2&&void 0!==arguments[2]?arguments[2]:2}})}}cancelInviteCRCDevice(d){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:d}})}}sendCloseCaption(d){return{seq:this.sendMessageToRwg({evt:4125,body:mn({},d)})}}allowViewParticipantNumber(d){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:d}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(d,u){return{seq:this.sendMessageToRwg({evt:4131,body:{id:d,bOn:u}})}}chat(d,u,f,A){const S={text:d,destNodeID:u};return f&&Object.assign(S,{sn:f}),A&&Object.assign(S,{attendeeNodeID:A}),{seq:this.sendMessageToRwg({evt:4135,body:S})}}assignCC(d,u){return{seq:this.sendMessageToRwg({evt:4137,body:{id:d,bCCEditor:u}})}}enableLT(d){return{seq:this.sendMessageToRwg({evt:4227,body:{op:d?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}enableManualCaption(d){return{seq:this.sendMessageToRwg({evt:4291,body:{op:d?1:0}})}}setTranslationLanguage(d){return d?{seq:this.sendMessageToRwg({evt:4305,body:{type:1,lang:d}})}:{seq:this.sendMessageToRwg({evt:4305,body:{type:3}})}}setSpokenLanguage(d){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:d}})}}allowAskLT(d){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:d}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(d){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:d}})}}setChatPriviledge(d){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:d}})}}setPanelistChatPrivilege(d){if(!Object.values(Uo).includes(d))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:d}})}}sendFeedback(d){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:d}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(d){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:d}})}}allowUnmuteAudio(d){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:d}})}}allowRaiseHand(d){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:d}})}}boToken(d){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:d}})}}startBO(d){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:d}})}}stopBO(d){return{seq:this.sendMessageToRwg({evt:4177,body:{status:d}})}}assignToBO(d,u){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:d,targetBID:u}})}}switchBO(d,u){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:d,targetBID:u}})}}wantJoinBO(d,u){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:d,targetBID:u}})}}joinBO(d){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:d}})}}leaveBO(){return{seq:this.sendMessageToRwg({evt:4185,body:{reason:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}broadcastBO(d){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:d}})}}askForHelpBO(d){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:d}})}}askForHelpResultBO(d,u){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:d,helpResult:u}})}}allowParticipantRename(d){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:d}})}}allowMessageFeedbackNotify(d,u){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:d,id:u}})}}setPlayChime(d,u){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:d,id:u}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(d,u,f){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:d,targetUserID:u,bBind:f}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(d,u,f,A){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:u,userID:f,clientCap:A,bPromote:d}})}}sendPromoteConsent(d,u){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:d,req_id:u}})}}batchCreateBOToken(d){const u=d.map((f,A)=>({topic:f,index:A}));return{seq:this.sendMessageToRwg({evt:4211,body:u})}}mute(d,u){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:u,id:d}})}}audioDrop(d){return{seq:this.sendMessageToRwg({evt:8195,body:{id:d}})}}audioDialout(d,u,f,A,S){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:d,dn2:Hs(u),bCallme:f,bPressOne:A,bGreeting:S}})}}audioCancelDialout(d,u){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:d,bCallme:u}})}}audioMuteAll(d){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:d}})}}allowToTalk(d,u){return{seq:this.sendMessageToRwg({evt:8204,body:{id:d,bAllowTalk:u}})}}subscribeVideo(){return{seq:this.sendMessageToRwg({evt:12289,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,size:arguments.length>1?arguments[1]:void 0,bOn:arguments.length>2?arguments[2]:void 0}})}}unsubscribeVideo(){return{seq:this.sendMessageToRwg({evt:12291,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}muteAttendeeVideo(d,u){return{seq:this.sendMessageToRwg({evt:12297,body:{id:d,bOn:u}})}}notifyRwgIsMuteVideo(d,u){return this.muteAttendeeVideo(d,u)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(d,u){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:d,bOn:u}})}}allowViewAll(d,u){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:d,bOn:u}})}}allowVote(d,u){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:d,bOn:u}})}}allowComment(d,u){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:d,bOn:u}})}}sharingRequestRemoteControl(d,u){return{seq:this.sendMessageToRwg({evt:16389,body:{id:d,bOn:u}})}}subscribeGrabRemoteControl(d,u){return{seq:this.sendMessageToRwg({evt:16393,body:{id:d,bOn:u}})}}subscribeSharing(d,u,f){const A={id:d,size:u};return f&&Object.assign(A,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16415,body:A})}}unsubscribeSharing(d,u){const f={id:d};return u&&Object.assign(f,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16417,body:f})}}sendRWGConnectionPerformance(d){return{seq:this.sendMessageToRwg({evt:4167,body:{data:d}})}}sendSdkKeyToMonitor(d,u,f){return{seq:this.sendMessageToRwg({evt:4167,body:{data:"ZoomConferenceClient,videoapp_HTML5_sdk_web_join,".concat(f,",2,").concat(u,",").concat(d)}})}}sendDatachannelOffer(d){return{seq:this.sendMessageToRwg({evt:24321,offer:d})}}joinOrLeaveVoip(d){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:d}})}}startSharing(d,u){return{seq:this.sendMessageToRwg({evt:16409,body:mn({id:d,boOn:!1},u??{})})}}stopSharing(d){return{seq:this.sendMessageToRwg({evt:16409,body:{id:d,bOn:!0}})}}lockSharing(d){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:d}})}}startShareToBreakoutRoom(d){return{seq:this.sendMessageToRwg({evt:16425,body:{id:d,bShareToBO:!0}})}}stopShareToBreakoutRoom(d){return{seq:this.sendMessageToRwg({evt:16425,body:{id:d,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(d){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:d}})}}allowMultiplePin(d,u){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:d,bOn:u}})}}spotlightVideo(d,u){return{seq:this.sendMessageToRwg({evt:4219,body:mn({id:d},u)})}}followHostLayout(d){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:d}})}}setVideoDragLayout(d){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:d}})}}chatCmdReq(d,u){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:d,cmd:u}})}}activeAppLinkReq(d){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:d}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(d){return{seq:this.sendMessageToRwg({evt:16423,body:{bOn:!0,bShareAudio:!d}})}}localMuteAudio(d,u){return{seq:this.sendMessageToRwg({evt:8209,body:{id:d,bMute:u}})}}changeSharePronoun(d,u){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:d,strPronoun:u}})}}sendReceivingSharingReady(d){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:d}})}}sendManualCaption(d){return{seq:this.sendMessageToRwg({evt:4289,body:mn({},d)})}}}let ko=(()=>{class a extends L0{static createAgent(){return this.rwgInstance||(this.rwgInstance=new a),this.rwgInstance}}return a.rwgInstance=null,a})(),oA=(()=>{class a extends L0{static getInstance(){return this.instance||(this.instance=new a),this.instance}}return a.instance=null,a})();const Zp=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"}];let Ja;!function(a){a.VideoEncode="0",a.VideoDecode="1",a.AudioEncode="2",a.AudioDecode="3",a.SharingEncode="4",a.SharingDecode="5"}(Ja||(Ja={}));const wm=ds.WebclientIVState;let _o=(()=>{class a{static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new a),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.mediaSocketAddress=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.mediaOptions=void 0,this.callbackList=[]}init(){if(!this.instance){const u={ivObj:{[Fo.AUDIO_ENCODE]:cr.get(wm)&&cr.get(wm)[Fo.AUDIO_ENCODE],[Fo.VIDEO_ENCODE]:cr.get(wm)&&cr.get(wm)[Fo.VIDEO_ENCODE],[Fo.SHARING_ENCODE]:cr.get(wm)&&cr.get(wm)[Fo.SHARING_ENCODE]}};this.instance=new JsMediaSDK_Instance(u),this.instance.setRWGAgent(ko.createAgent())}}setAssetsAndConstraint(u,f,A,S){var T,R,M;this.assetsPath=u,this.constraints=f,this.mediaWorkersPath=(R=this.assetsPath,M=!!A,Zp.reduce((B,H)=>{const{name:$,alias:ce}=H;return Object.assign(B,{["".concat(ce)]:"".concat(R,"/").concat(M?"".concat("1502","_"):"").concat($)}),B},{})),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=S,null===(T=this.instance)||void 0===T||T.JsMediaSDK_PreLoad(this.mediaWorkersPath,this.onMediaSDKCallback,S)}onMediaSDKCallback(u,f){this.callbackList.length>0&&this.callbackList.forEach(A=>A(u,f))}registerCallback(u){this.callbackList.push(u)}unregisterCallback(u){this.callbackList=this.callbackList.filter(f=>f!==u)}static isSupportVideoEncodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){return"function"==typeof window.OffscreenCanvas&&0==JsMediaSDK_Instance.util.AdapterWhiteListCheckForEncoder()}connect(u){var f,A,S,T,R,M;let{svcUrl:B,meetingNumber:H,conId:$,e2eEncrypt:ce,isViewOnly:he,currentUserId:ue,isWebinar:Se,enableAudioQos:Qe,enableVideoQos:He=!1}=u;this.svcUrl=B,this.meetingNumber=H,this.confId=$;const We=(_r=H,vt=$,{videoSocketAddress:"wss://".concat(Bn=B,"/wc/media/").concat(_r,"?type=v&cid=").concat(vt),audioSocketAddress:"wss://".concat(Bn,"/wc/media/").concat(_r,"?type=a&cid=").concat(vt),sharingSocketAddress:"wss://".concat(Bn,"/wc/media/").concat(_r,"?type=").concat(Am()?"j":"s","&cid=").concat(vt)});var Bn,_r,vt;this.mediaSocketAddress=We,this.currentUserId=ue;const et=dd(null===(f=this.mediaOptions)||void 0===f?void 0:f.enableMultiDecodeVideoWithoutSAB);var Lt,Gt,jt,Tt,sn,hn,An,ln,Qt;null===(A=this.instance)||void 0===A||A.setPropsBeforeInit({callback:this.onMediaSDKCallback,audioWorkletPath:Wo()?null===(S=this.mediaWorkersPath)||void 0===S?void 0:S.audioWorkletPath:void 0,e2eEncrypt:ce,isEnableListenInitEvent:!0}),!0===(null===(T=this.constraints)||void 0===T?void 0:T.audio)&&Wo()&&!ld()&&((Se||Zv())&&(null===(Lt=this.instance)||void 0===Lt||Lt.initAudioDecode(this.mediaWorkersPath,We.audioSocketAddress,ue,!1,$,H,et,Qe)),!Zv()||Se&&he||null===(Gt=this.instance)||void 0===Gt||Gt.initAudioEncode(this.mediaWorkersPath,We.audioSocketAddress,ue,!1,$,H,et,Qe)),!0===(null===(R=this.constraints)||void 0===R?void 0:R.video)&&Wo()&&(null===(jt=this.instance)||void 0===jt||jt.initVideoDecode(this.mediaWorkersPath,We.videoSocketAddress,ue,!1,$,H,et,null===(Tt=null===(sn=JsMediaSDK_Instance.util)||void 0===sn?void 0:sn.isGraphicShouldUseHardwareAccelerationDecode())||void 0===Tt||Tt,He),Se&&he||null===(hn=this.instance)||void 0===hn||hn.initVideoEncode(this.mediaWorkersPath,We.videoSocketAddress,ue,!1,$,H,et,!1,He,!0,!0)),!0===(null===(M=this.constraints)||void 0===M?void 0:M.screen)&&(Wo()?(null===(An=this.instance)||void 0===An||An.initSharingDecode(this.mediaWorkersPath,We.sharingSocketAddress,ue,!1,$,H,et),Se&&he||null===(ln=this.instance)||void 0===ln||ln.initSharingEncode(this.mediaWorkersPath,We.sharingSocketAddress,ue,!1,$,H,et)):null===(Qt=this.instance)||void 0===Qt||Qt.initSharingDecode(We.sharingSocketAddress))}destroy(){var u;null===(u=this.instance)||void 0===u||u.destroy(),this.instance=null,this.callbackList=[],[Ja.AudioDecode,Ja.AudioEncode,Ja.VideoDecode,Ja.VideoEncode].forEach(f=>{var A;null===(A=this.instance)||void 0===A||A.updateQosSubscription(!1,f)})}disconnect(){var u,f;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(17,{}),null===(f=this.instance)||void 0===f||f.JsMediaSDK_UnInit()}muteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(u,f,A,S,T){var R;return null===(R=this.instance)||void 0===R?void 0:R.Notify_MeidaSDK(22,mn({CaptureAudio:S,CaptureAudioInfo:{ssrc:u,AudioSelectValue:"default"===f?null:f},speakerInfo:{defaultDeviceId:A}},T?{useAudioBridge:!0,audioBridge:T}:{}))}leaveComputerAudio(){var u;return null===(u=this.instance)||void 0===u?void 0:u.Notify_MeidaSDK(21,null)}joinSharingAudio(u){var f;let{ssrc:A,microphoneDeviceId:S,speakerDeviceId:T,isCaptureAudio:R}=u;return null===(f=this.instance)||void 0===f?void 0:f.Notify_MeidaSDK(72,{CaptureAudio:R,CaptureAudioInfo:{ssrc:A,AudioSelectValue:"default"===S?null:S},speakerInfo:{defaultDeviceId:T},checkAutoplay:!1})}leaveSharingAudio(u){var f;return null===(f=this.instance)||void 0===f?void 0:f.Notify_MeidaSDK(73,{isPause:u?1:0})}changeSpeaker(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:u})}changeMicrophone(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:"default"===u?null:u})}restoreWebRTC(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:"default"===u?null:u})}renderVideo(u,f,A,S,T,R,M,B,H,$,ce){var he;null===(he=this.instance)||void 0===he||he.Notify_MeidaSDK(1,{userId:f,width:S,height:T,x:R,y:M,quality:B,isMyself:H,canvas:u,enableWaterMark:ce,waterMarkText:$,zone:A})}stopRenderVideo(u,f,A,S){var T;null===(T=this.instance)||void 0===T||T.Notify_MeidaSDK(2,{canvas:u,userId:f,RGBA:S,doNotClean:arguments.length>4&&void 0!==arguments[4]&&arguments[4],zone:A})}startCaptureVideo(u,f,A,S,T,R){var M;null===(M=this.instance)||void 0===M||M.Notify_MeidaSDK(3,{ssid:u,width:A,height:S,fps:24,video:T,usingFacingMode:R,VideoSelectValue:"default"===f?null:f,disableOriginalRatio:arguments.length>6&&void 0!==arguments[6]&&arguments[6]})}stopCaptureVideo(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(12,{VideoSelectValue:"default"===u?null:u})}switchCanvasForVideoCapture(u){var f;let A=u;Array.isArray(u)||(A=[u]),null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(25,A)}renderSharing(u,f){var A;let S=arguments.length>2&&void 0!==arguments[2]&&arguments[2],T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",R=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.receivedSharingCanvas=f,null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(23,{width:0,height:0,ssrc:u,canvas:f,enableWaterMark:S,waterMarkText:T,isFromMainSession:R})}stopRenderSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(24,{})}switchSharingSource(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(36,{ssrc:u,isFromMainSession:Number(arguments.length>1&&void 0!==arguments[1]&&arguments[1])})}ajustmentReceivedSharingCanvas(u,f){if(this.receivedSharingCanvas)try{this.receivedSharingCanvas.width=u,this.receivedSharingCanvas.height=f}catch{}}startRemoteControl(u,f,A){var S;null===(S=this.instance)||void 0===S||S.Notify_MeidaSDK(26,mn({socketURL:"wss://".concat(this.svcUrl),meetingID:this.meetingNumber,condID:this.confId,os:f,dom:u},A))}stopRemoteControl(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(41)}updateRemoteControlProperties(u){var f;const{dimension:A}=u,S=Vh(u,["dimension"]);null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(27,mn(mn({},A),S))}startDesktopSharing(u,f,A,S){var T;let R=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],M=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.sharingCanvas=document.querySelector("#".concat(f));let B={};S&&(B={share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:"default"===S.cameraId?null:S.cameraId,width:S.width,height:S.height}}),null===(T=this.instance)||void 0===T||T.Notify_MeidaSDK(30,mn(mn({mode:M,ssid:u,canvas:f,video:A},B),{},{showShareAudioOption:R}))}stopDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(32,{})}resumeDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(57,{lang:u})}changeSharingSecondCamera(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(49,{VideoSelectValue:u})}ajustmentSharingCanvas(u,f){if(this.sharingCanvas)try{this.sharingCanvas.width=u,this.sharingCanvas.height=f}catch{}}checkChromeSharingExtension(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(34,{})}enableAudioEncode(){var u,f;null===(u=this.instance)||void 0===u||u.initAudioEncode(this.mediaWorkersPath,this.mediaSocketAddress.audioSocketAddress,this.currentUserId,!1,this.confId,this.meetingNumber,dd(null===(f=this.mediaOptions)||void 0===f?void 0:f.enableMultiDecodeVideoWithoutSAB))}sendUserNodeList(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(43,{userList:u,encryptKey:f})}updateRenderedSharingDimension(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(44,{width:u,height:f})}pauseOrResumeAudio(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(45,{bPause:u})}updateRenderedVideoCanvasDimension(u,f,A){var S;null===(S=this.instance)||void 0===S||S.Notify_MeidaSDK(46,{canvas:u,width:f,height:A})}clearVideoCanvas(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(47,{id:u,RGBA:f})}adjustRenderedVideoPosition(u,f,A,S,T,R,M,B){var H;null===(H=this.instance)||void 0===H||H.Notify_MeidaSDK(48,{userId:f,x:S,y:T,width:R,height:M,canvas:u,zone:A,RGBA:B})}mirrorVideo(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(75,{isMirrorMyVideo:u})}updateUserMediaSN(u){var f,A,S;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(80,{isFromMainSession:Number(u.isFromMainSession),mediaActionType:u.iVType,body:{add:null!==(A=u.added)&&void 0!==A?A:[],remove:null!==(S=u.removed)&&void 0!==S?S:[]}})}updateMediaParams(u){var f;const{iVType:A,isFromMainSession:S,updateParams:T}=u;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(81,{mediaActionType:A,isFromMainSession:Number(S),updateParams:T})}createMainSessionChannel(u,f){var A,S;"sharing"===u?null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(84,f):null===(S=this.instance)||void 0===S||S.Notify_MeidaSDK(85,f)}addReceivedSharingChannelType(u){var f;const{isFromMainSession:A}=u,S=Vh(u,["isFromMainSession"]);null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(82,mn({isFromMainSession:Number(A)},S))}removeReceivedSharingChannelType(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(83,{isFromMainSession:Number(u.isFromMainSession),ssrc:u.ssrc})}enableHardwareAccelerationForVideoDecode(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(70,{enable:u})}enableHardwareAccelerationForVideoEncode(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(71,{enable:u})}setSharingAudioVolume(u,f,A){var S;null===(S=this.instance)||void 0===S||S.Notify_MeidaSDK(74,{userid:u>>10,shareVolume:f?0:100,isFromMainSession:A})}subscribeToQos(u,f){u.forEach(A=>{var S;null===(S=this.instance)||void 0===S||S.updateQosSubscription(!0,A,f)})}unsubscribeFromQos(u){u.forEach(f=>{var A;null===(A=this.instance)||void 0===A||A.updateQosSubscription(!1,f)})}passThroughRWGMessage(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(40,u)}startVirtualBackgroundSetting(u,f,A,S,T,R){var M;null===(M=this.instance)||void 0===M||M.Notify_MeidaSDK(91,{canvas:u,bgdom:f,width:T,height:R,ssid:A,VideoSelectValue:"default"===S?null:S,disableOriginalRatio:arguments.length>6&&void 0!==arguments[6]&&arguments[6]})}updateVirtualBackgroundImage(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(92,{bgdom:u})}stopVirtualBackgroundSetting(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(93,{isSwitch:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})}enableVideoObserver(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(99,{enable:u})}enableShareAudioToBreakoutRoom(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(86,{enable:u})}sendUserAudioStatus(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(51,u)}muteOrUnmuteOtherAudio(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(50,{userId:u,volume:f?0:100})}adjustOtherAudioVolume(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(50,{userId:u,volume:f})}notifySDKMeetingReady(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(113)}}return a.agentInstance=void 0,a})();const Ko="JOIN_MEETING_FAILED";var No;!function(a){a.ConnectionChange="connection-change",a.OnHoldChange="on-hold-change",a.UserAdd="user-added",a.UserUpdate="user-updated",a.UserRemove="user-removed",a.AttendeeUpdate="attendee-updated",a.MeetingAttributeUpdate="meeting-attribute-updated",a.PromoteAttendeeConsent="promote-attendee-consent",a.ActiveAppsUpdate="active-apps-updated",a.SharePronounTypeUpdate="share-pronoun-type-update"}(No||(No={}));const yN={JoinMeeting:{success:"ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",fail:[Ko]}},EN={[No.ConnectionChange]:[{event:"JOIN_MEETING_SUCCESS",payload:()=>({state:W.ConnectionState.Connected})},{event:Ko,payload:a=>mn({state:W.ConnectionState.Fail},a)},{event:"RECONNECTING_MEETING",payload:a=>mn({state:W.ConnectionState.Reconnecting},a)},{event:"LEAVING_MEETING",payload:a=>mn({state:W.ConnectionState.Closed},a)}],[No.OnHoldChange]:[{event:"MEETING_IN_WAITING_ROOM",payload:a=>({isOnHold:a})}],[No.UserAdd]:[{event:"ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",payload:a=>[a]},{event:"ADD_USER_PARTICIPANT_ATTRIBUTE",payload:a=>a}],[No.UserUpdate]:[{event:"UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",payload:a=>[a]},{event:"UPDATE_USER_PARTICIPANT_ATTRIBUTE",payload:a=>a}],[No.UserRemove]:[{event:"REMOVE_USER_PARTICIPANT_ATTRIBUTE",payload:a=>a}],[No.AttendeeUpdate]:[{event:"UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",payload:a=>a},{event:"REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE",payload:a=>a}],[No.MeetingAttributeUpdate]:[{event:"UPDATE_MEETING_ATTRIBUTE",payload:()=>{}}],[No.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:a=>{let{req_id:d,sender_id:u}=a;return{reqId:d,senderId:u}}}],[No.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[No.SharePronounTypeUpdate]:[{event:"SHARE_PRONOUN_TYPE_UPDATE",payload:a=>a}]};let ef;!function(a){a.ChatOnMessage="chat-on-message",a.ChatPrivilegeChange="chat-privilege-change",a.ChatDeleteMessage="chat-delete-message"}(ef||(ef={}));const B0={[ef.ChatOnMessage]:[{event:"CHAT_RECEIVE_MESSAGE_EVENTS",payload:a=>a}],[ef.ChatPrivilegeChange]:[{event:"CHAT_PRIVILEGE_CHANGE",payload:a=>a}],[ef.ChatDeleteMessage]:[{event:"CHAT_DELETE_MESSAGE_REPONSE",payload:a=>a}]};let AE;!function(a){a.CommandChannelStatus="command-channel-status",a.CommandChannelMessage="command-channel-message"}(AE||(AE={}));const Iw={[AE.CommandChannelStatus]:[{event:"COMMAND_STATUS_EVENTS",payload:a=>a}],[AE.CommandChannelMessage]:[{event:"COMMAND_RECEIVE_MESSAGE_EVENTS",payload:a=>a}]};let _c,yE;W.RecordingStatus=void 0,function(a){a.Recording="Recording",a.Paused="Paused",a.Stopped="Stopped"}(W.RecordingStatus||(W.RecordingStatus={})),function(a){a[a.None=0]="None",a[a.Init=1]="Init",a[a.Start=2]="Start",a[a.Pause=3]="Pause",a[a.Stop=4]="Stop"}(_c||(_c={})),function(a){a.RecordingChange="recording-change",a.LocalRecordingChange="local-recording-change"}(yE||(yE={}));const F0={[yE.RecordingChange]:[{event:"CLOUD_RECORDING_STATUS_CHANGE",payload:a=>{const{cmrServerStatus:d}=a;return d===_c.Start?W.RecordingStatus.Recording:d===_c.Pause?W.RecordingStatus.Paused:W.RecordingStatus.Stopped}}],[yE.LocalRecordingChange]:[{event:"LOCAL_RECORDING_CHANGE",payload:a=>a}]};let Dr,Xa,pd;W.MutedSource=void 0,W.AudioChangeAction=void 0,W.DialoutState=void 0,function(a){a[a.InitSuccess=1]="InitSuccess",a[a.InitSuccessVideo=1.1]="InitSuccessVideo",a[a.InitSuccessAudio=1.2]="InitSuccessAudio",a[a.InitSuccessSharing=1.3]="InitSuccessSharing",a[a.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",a[a.CurrentVideoResolution=3]="CurrentVideoResolution",a[a.JpegDecThreadOk=4]="JpegDecThreadOk",a[a.JpegData=5]="JpegData",a[a.SharingPara=6]="SharingPara",a[a.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",a[a.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",a[a.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",a[a.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",a[a.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",a[a.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",a[a.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",a[a.MonitorLog=14]="MonitorLog",a[a.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",a[a.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",a[a.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",a[a.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",a[a.DataChannelOffer=19]="DataChannelOffer",a[a.AesGcmIvResponse=21]="AesGcmIvResponse",a[a.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",a[a.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",a[a.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",a[a.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",a[a.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",a[a.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",a[a.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",a[a.VbModelPreloading_3S=96]="VbModelPreloading_3S",a[a.VbModelPreloading_10S=97]="VbModelPreloading_10S",a[a.VbModelPreloadingOk=98]="VbModelPreloadingOk",a[a.InitFailed=-1]="InitFailed",a[a.InitFailedVideo=-1.1]="InitFailedVideo",a[a.InitFailedAudio=-1.2]="InitFailedAudio",a[a.InitFailedSharing=-1.3]="InitFailedSharing",a[a.UserForbiddedCaptureAudio=-2]="UserForbiddedCaptureAudio",a[a.AudioWebsocketBroken=-3]="AudioWebsocketBroken",a[a.VideoWebsocketBroken=-4]="VideoWebsocketBroken",a[a.SharingDecThreadFailed=-5]="SharingDecThreadFailed",a[a.AudioZeroData=-6]="AudioZeroData",a[a.AudioCtxSamplerate=-7]="AudioCtxSamplerate",a[a.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",a[a.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",a[a.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",a[a.StartRemoteControlFailed=-11]="StartRemoteControlFailed",a[a.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",a[a.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",a[a.UserStopDesktopSharing=-15]="UserStopDesktopSharing",a[a.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",a[a.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",a[a.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",a[a.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",a[a.DesktopSharingError=-20]="DesktopSharingError",a[a.DesktopSharingSystemError=-22]="DesktopSharingSystemError",a[a.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",a.audioQosData="AUDIO_QOS_DATA",a.videoQosData="VIDEO_QOS_DATA",a[a.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",a[a.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",a[a.VbSettingParaError=-34]="VbSettingParaError",a[a.NotifyUIFailover=-35]="NotifyUIFailover"}(Dr||(Dr={})),function(a){a[a.EncodeSuccess=1]="EncodeSuccess",a[a.DecodeSuccess=2]="DecodeSuccess",a[a.EncodeFailed=-1]="EncodeFailed",a[a.DecodeFailed=-2]="DecodeFailed"}(Xa||(Xa={})),function(a){a.Spotlight="Spotlight",a.Unmute="Unmute",a.AllowToTalk="Allow to talk"}(pd||(pd={})),function(a){a.Active="active",a.PassiveByMuteOne="passive(mute one)",a.PassiveByMuteAll="passive(mute all)",a.SharingAudio="sharing audio"}(W.MutedSource||(W.MutedSource={})),function(a){a.Join="join",a.Leave="leave",a.Muted="muted",a.Unmuted="unmuted"}(W.AudioChangeAction||(W.AudioChangeAction={})),function(a){a[a.Calling=1]="Calling",a[a.Ringing=2]="Ringing",a[a.Accepted=3]="Accepted",a[a.Busy=4]="Busy",a[a.NotAvailable=5]="NotAvailable",a[a.HangUp=6]="HangUp",a[a.Fail=7]="Fail",a[a.Success=8]="Success",a[a.Timeout=9]="Timeout",a[a.Canceling=10]="Canceling",a[a.Canceled=11]="Canceled",a[a.CancelFailed=12]="CancelFailed"}(W.DialoutState||(W.DialoutState={}));const Tw=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),EE=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),bE=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let Vu,zh,u_,Yh,U0,sA,l_,V0;W.ShareStatus=void 0,W.VideoQuality=void 0,W.VideoActiveState=void 0,W.VideoCapturingState=void 0,W.PassiveStopShareReason=void 0,function(a){a[a.HostGrab=0]="HostGrab",a[a.OnlyHost=1]="OnlyHost",a[a.AnyoneGrab=2]="AnyoneGrab",a[a.MultipleShare=3]="MultipleShare"}(Vu||(Vu={})),function(a){a.Sharing="sharing",a.Paused="paused",a.End="ended"}(W.ShareStatus||(W.ShareStatus={})),function(a){a[a.Video_90P=0]="Video_90P",a[a.Video_180P=1]="Video_180P",a[a.Video_360P=2]="Video_360P",a[a.Video_720P=3]="Video_720P"}(W.VideoQuality||(W.VideoQuality={})),function(a){a.Active="Active",a.Inactive="Inactive"}(W.VideoActiveState||(W.VideoActiveState={})),function(a){a.Muted="Muted",a.Unmuted="Unmuted"}(zh||(zh={})),function(a){a.Active="Active",a.Inactive="Inactive"}(u_||(u_={})),function(a){a.Success="Success",a.Failed="Failed",a.Initial="Initial"}(Yh||(Yh={})),function(a){a.Started="Started",a.Stopped="Stopped",a.Failed="Failed"}(W.VideoCapturingState||(W.VideoCapturingState={})),function(a){a.Approved="Approved",a.Rejected="Rejected"}(U0||(U0={})),function(a){a.PrivilegeChange="PrivilegeChange",a.StopScreenCapture="StopScreenCapture",a.ShareFromMainSession="ShareFromMainSession"}(W.PassiveStopShareReason||(W.PassiveStopShareReason={})),function(a){a.Muted="Muted",a.Unmuted="Unmuted",a.NoAudio="NoAudio",a.Phone="Phone"}(sA||(sA={})),function(a){a[a.ImageNotMatch=2]="ImageNotMatch",a[a.CanvasNotMatch=3]="CanvasNotMatch",a[a.VBModelNotMatch=4]="VBModelNotMatch"}(l_||(l_={})),W.MobileVideoFacingMode=void 0,function(a){a[a.NotConnect=0]="NotConnect",a[a.Connecting=1]="Connecting",a[a.ConnectSuccess=2]="ConnectSuccess",a[a.ConnectFail=3]="ConnectFail"}(V0||(V0={})),function(a){a.User="user",a.Environment="environment",a.Left="left",a.Right="right"}(W.MobileVideoFacingMode||(W.MobileVideoFacingMode={}));const _u={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}},tf={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}};let ju;!function(a){a.DeviceChange="device-change",a.MediaSDKChange="media-sdk-change"}(ju||(ju={}));const Rm={[ju.DeviceChange]:[{event:"MEDIA_DEVICE_CHANGE",payload:()=>({})}],[ju.MediaSDKChange]:[{event:"AUDIO_ENCODE_SUCCESS",payload:()=>({type:"audio",action:"encode",result:"success"})},{event:"AUDIO_ENCODE_FAIL",payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:"AUDIO_DECODE_SUCCESS",payload:()=>({type:"audio",action:"decode",result:"success"})},{event:"AUDIO_DECODE_FAIL",payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:"VIDEO_ENCODE_SUCCESS",payload:()=>({type:"video",action:"encode",result:"success"})},{event:"VIDEO_ENCODE_FAIL",payload:()=>({type:"video",action:"encode",result:"fail"})},{event:"VIDEO_DECODE_SUCCESS",payload:()=>({type:"video",action:"decode",result:"success"})},{event:"VIDEO_DECODE_FAIL",payload:()=>({type:"video",action:"decode",result:"fail"})},{event:"SHARING_ENCODE_SUCCESS",payload:()=>({type:"share",action:"encode",result:"success"})},{event:"SHARING_ENCODE_FAIL",payload:()=>({type:"share",action:"encode",result:"fail"})},{event:"SHARING_DECODE_SUCCESS",payload:()=>({type:"share",action:"decode",result:"success"})},{event:"SHARING_DECODE_FAIL",payload:()=>({type:"share",action:"decode",result:"fail"})}]},Om={success:"VIDEO_CAPTURE_START_SUCCESS",fail:["CAN_NOT_DETECT_CAMERA","CAN_NOT_FIND_CAMERA","VIDEO_USER_FORBIDDEN_CAPTURE","VIDEO_ESTABLISH_STREAM_ERROR","VIDEO_CAMERA_IS_TAKEN","VIDEO_VITRUAL_BACKGROUND_FAILED"]};let Oa;!function(a){a.VideoActiveChange="video-active-change",a.PeerVideoStateChange="peer-video-state-change",a.VideoSpotlightChange="video-spotlight-change",a.VideoMutedChange="video-muted-change",a.VideoCapturingChange="video-capturing-change",a.AskForStartVideoConsent="ask-for-start-video-consent",a.VideoDimensionChange="video-dimension-change",a.VideoFollowHostOrder="video-follow-host-order-change",a.VideoHostLayoutChange="video-host-layout-change",a.VideoVBPreloadChange="video-virtual-background-preload-change",a.VideoStatisticDataChange="video-statistic-data-change",a.VideoDetailedDataChange="video-detailed-data-change"}(Oa||(Oa={}));const aA={[Oa.VideoActiveChange]:[{event:"RECEIVE_VIDEO_ACTIVE_INDICATION",payload:a=>({state:a.bVideoOn?W.VideoActiveState.Active:W.VideoActiveState.Inactive,userId:a.userId})}],[Oa.VideoCapturingChange]:[{event:"VIDEO_CAPTURE_START_SUCCESS",payload:()=>({state:W.VideoCapturingState.Started})},{event:"VIDEO_CAPTURE_STOP_RESULT",payload:a=>({state:null!=a&&a.failed?W.VideoCapturingState.Failed:W.VideoCapturingState.Stopped})}],[Oa.VideoMutedChange]:[{event:"RECEIVE_VIDEO_MUTE_INDICATION",payload:a=>({state:a.isVideoMuted?zh.Muted:zh.Unmuted,userId:a.id})}],[Oa.AskForStartVideoConsent]:[{event:"ASK_FOR_START_VIDEO_CONSENT",payload:a=>({state:a.isVideoMuted?zh.Muted:zh.Unmuted,userId:a.id})}],[Oa.VideoSpotlightChange]:[{event:"VIDEO_SPOTLIGHT_CHANGE",payload:a=>({spotlightList:a.spotlightList&&a.spotlightList.map(d=>({userId:d}))})}],[Oa.VideoDimensionChange]:[{event:"RECEIVE_VIDEO_DIMENSION_CHANGE",payload:a=>({type:"received",width:a.width,height:a.height})}],[Oa.VideoFollowHostOrder]:[{event:"VIDEO_FOLLOW_HOST_ORDER_CHANGE",payload:a=>({isFollowHostOrder:a.bOn})}],[Oa.VideoHostLayoutChange]:[{event:"VIDEO_HOST_DRAG_LAYOUT_CHANGE",payload:a=>Array.isArray(a.layout)?a.layout.map(d=>({userId:d})):[]}],[Oa.PeerVideoStateChange]:[{event:"VIDEO_NEW_USER_START",payload:a=>mn({action:"Start"},a)},{event:"VIDEO_OLD_USER_STOP",payload:a=>mn({action:"Stop"},a)}],[Oa.VideoVBPreloadChange]:[{event:"VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",payload:a=>({isReady:a})}],[Oa.VideoStatisticDataChange]:[{event:"VIDEO_STATISTIC_DATA",payload:a=>a}],[Oa.VideoDetailedDataChange]:[{event:"VIDEO_CELL_DETAILED_DATA",payload:a=>a}]};let Qu;!function(a){a.ActiveSpeaker="active-speaker",a.UnmuteAudioConsent="unmute-audio-consent",a.CurrentAudioChange="current-audio-change",a.DialoutStateChange="dialout-state-change",a.MergeAudio="merged-audio",a.AutoPlayFailed="auto-play-audio-failed",a.AllowTalkChange="allow-talk-change",a.ShareAudioChange="share-audio-change",a.AudioStatisticDataChange="audio-statistic-data-change"}(Qu||(Qu={}));const Dm={JoinComputerAudio:{success:"AUDIO_CURRENT_USER_JOIN_BY_VOIP",fail:["USER_FORBIDDEN_MICROPHONE","ESTABLISH_AUDIO_STREAM_ERROR"]},LeaveComputerAudio:{success:"AUDIO_CURRENT_USER_LEAVE_AUDIO"},JoinAudioByCallMe:{success:"AUDIO_DIALOUT_RESULT_SUCCESS",fail:["DIALOUT_FAIL"]},cancelDialOut:{success:"AUDIO_DIALOUT_CANCEL_SUCCESS",fail:["DIALOUT_CANCEL_FAIL"]},hangup:{success:"AUDIO_CURRENT_USER_LEAVE_AUDIO"}},j0={[Qu.ActiveSpeaker]:[{event:"AUDIO_ACTIVE_SPEAKER",payload:a=>a}],[Qu.UnmuteAudioConsent]:[{event:"AUDIO_UNMUTE_CONSENT",payload:a=>({reason:a})}],[Qu.CurrentAudioChange]:[{event:"AUDIO_CURRENT_USER_JOIN_BY_PHONE",payload:()=>({action:W.AudioChangeAction.Join,type:"phone"})},{event:"AUDIO_CURRENT_USER_JOIN_BY_VOIP",payload:()=>({action:W.AudioChangeAction.Join,type:"computer"})},{event:"AUDIO_CURRENT_USER_LEAVE_AUDIO",payload:()=>({action:W.AudioChangeAction.Leave})},{event:"AUDIO_CURRENT_USER_MUTED",payload:a=>{let{source:d}=a;return{action:W.AudioChangeAction.Muted,source:d}}},{event:"AUDIO_CURRENT_USER_UNMUTED",payload:a=>{let{source:d}=a;return{action:W.AudioChangeAction.Unmuted,source:d}}}],[Qu.DialoutStateChange]:[{event:"AUDIO_DIALOUT_RESULT_CODE",payload:a=>a}],[Qu.MergeAudio]:[{event:"AUDIO_MERGE_AUDIO_INDICATION",payload:a=>a}],[Qu.AutoPlayFailed]:[{event:"AUDIO_AUTO_PLAY_FAILED",payload:()=>{}}],[Qu.AllowTalkChange]:[{event:"AUDIO_ALLOW_TALK_CHANGE",payload:a=>({enabled:a})}],[Qu.ShareAudioChange]:[{event:"SHARE_AUDIO_STATE_CHANGE",payload:a=>a}],[Qu.AudioStatisticDataChange]:[{event:"AUDIO_STATISTIC_DATA",payload:a=>a}]};let Hu;!function(a){a.ShareActiveChange="active-share-change",a.ShareDimensionChange="share-content-dimension-change",a.SharePassiveStop="passively-stop-share",a.SharePeerStateChange="peer-share-state-change",a.ShareContentChange="share-content-change",a.SharePrivilegeChange="share-privilege-change",a.ShareReadReceipt="share-can-see-screen",a.RemoteControlApprovedChange="remote-control-approved-change",a.RemoteControlInControlChange="remote-control-in-control-change",a.RemoteControlClipboardChange="remote-control-clipboard-change"}(Hu||(Hu={}));const ww={[Hu.ShareActiveChange]:[{event:"SHARE_ACTIVE_INDICATION",payload:a=>{const{isActive:d,activeUserId:u}=a;return mn({state:d?"Active":"Inactive",userId:u},Vh(a,["isActive","activeUserId"]))}}],[Hu.ShareDimensionChange]:[{event:"SHARE_DIMENSION_CHANGE",payload:a=>({type:"sended",width:a.width,height:a.height})},{event:"SHARE_RECEIVED_DIMENSION_CHANGE",payload:a=>({type:"received",width:a.width,height:a.height})}],[Hu.SharePassiveStop]:[{event:"SHARE_VIDEO_STREAMS_END",payload:()=>({reason:W.PassiveStopShareReason.StopScreenCapture})},{event:"SHARE_PASSIVE_STOP_SHARE",payload:()=>({reason:W.PassiveStopShareReason.PrivilegeChange})},{event:"SHARE_PASSIVE_BO_STOP",payload:()=>({reason:W.PassiveStopShareReason.ShareFromMainSession})}],[Hu.SharePeerStateChange]:[{event:"SHARE_NEW_USER_ADD",payload:a=>({userId:a.id,action:"Start"})},{event:"SHARE_USER_REMOVE",payload:a=>({userId:a.id,action:"Stop"})}],[Hu.ShareContentChange]:[{event:"SHARE_AUTO_CHANGE_SOURCE",payload:a=>a}],[Hu.RemoteControlApprovedChange]:[{event:"SHARE_REMOTE_CONTROL_APPROVE",payload:a=>({state:a?U0.Approved:U0.Rejected})}],[Hu.RemoteControlInControlChange]:[{event:"SHARE_GRAB_REMOTE_CONTROL_CHANGE",payload:a=>({isControlling:a})}],[Hu.RemoteControlClipboardChange]:[{event:"SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",payload:a=>a}],[Hu.SharePrivilegeChange]:[{event:"SHARE_PRIVILEGE_CHANGE",payload:a=>({privilege:a})}],[Hu.ShareReadReceipt]:[{event:"SHARE_READ_RECEIPT",payload:()=>{}}]};let Rw,fd,nf,md,km;(function(a){a.LiveStart="liveStart",a.LiveEnd="liveEnd"})(Rw||(Rw={})),function(a){a.MakePublicView="make_question_public_view",a.Comment="comment",a.PrivateView="private",a.DeleteComment="deletecomment",a.DeleteQuestion="deletequestion",a.Reopen="reopen",a.Dismiss="dismiss",a.Upvote="upvote",a.RevokeUpvote="revokeupvote"}(fd||(fd={})),function(a){a.Question="question"}(nf||(nf={})),function(a){a.Question="question",a.UpdateQuestion="updateQuestion",a.Answer="answer",a.DeleteComment="deleteComment",a.DeleteQuestion="deleteQuestion",a.Dismiss="dismiss",a.Reopen="reopen",a.Upvote="upvote",a.AnswerLive="answerLive"}(md||(md={})),function(a){a.QaSettingChange="qa-setting-change",a.QaActionChange="qa-action-change"}(km||(km={}));const Ow={[km.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:a=>a}],[km.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:a=>({action:md.Question,data:a})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:a=>({action:md.UpdateQuestion,data:a})},{event:"QA_ANSWER_QUESTION",payload:a=>({action:md.Answer,data:a})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:a=>({action:md.DeleteComment,data:a})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:a=>({action:md.DeleteQuestion,data:a})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:a=>({action:md.Dismiss,data:a})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:a=>({action:md.Reopen,data:a})},{event:"QA_ANSWER_VOTE_QUESTION",payload:a=>({action:md.Upvote,data:a})},{event:"QA_ANSWER_QUESTION_LIVE",payload:a=>({action:md.AnswerLive,data:a})}]},ur="INVALID_OPERATION",Jr="INVALID_PARAMETERS";let vo;!function(a){a.InviteToJoin="invite-to-join",a.RoomCountdown="room-countdown",a.RoomTimeUp="room-time-up",a.ClosingRoomCountdown="closing-room-countdown",a.BroadcastMessage="broadcast-message",a.AskForHelp="ask-for-help",a.AskForHelpResponse="ask-for-help-response",a.RoomStateChange="room-state-change",a.MainSessionUserUpdate="main-session-user-updated"}(vo||(vo={}));const SE={[vo.InviteToJoin]:[{event:"BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",payload:a=>a}],[vo.RoomCountdown]:[{event:"BREAKOUT_ROOM_ROOM_COUTDOWN",payload:a=>a}],[vo.RoomTimeUp]:[{event:"BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",payload:a=>a}],[vo.ClosingRoomCountdown]:[{event:"BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",payload:a=>a}],[vo.BroadcastMessage]:[{event:"BREAKOUT_ROOM_BROADCAST_MESSAGE",payload:a=>a}],[vo.AskForHelp]:[{event:"BREAKOUT_ROOM_ASK_HELP_REQUEST",payload:a=>a}],[vo.AskForHelpResponse]:[{event:"BREAKOUT_ROOM_ASK_HELP_RESPONSE",payload:a=>a}],[vo.RoomStateChange]:[{event:"BREAKOUT_ROOM_ATTRIBUTE_INDICATION",payload:a=>({status:a.controlStatus})}],[vo.MainSessionUserUpdate]:[{event:"BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE",payload:()=>({})}]};var cA;!function(a){a.StatusUpdate="archiving-status-update",a.OptionsUpdate="archiving-options-update"}(cA||(cA={}));const Q0={[cA.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:a=>a}],[cA.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:a=>a}]},qh=mn(mn(mn(mn(mn(mn(mn(mn(mn(mn(mn(mn(mn({},EN),{"caption-message":[{event:"LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",payload:a=>a}],"caption-status":[{event:"LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",payload:a=>a}],"caption-enable":[{event:"LIVE_TRANSCRIPTION_STATUS_CHANGE",payload:a=>a}]}),B0),Iw),F0),j0),aA),Ow),ww),Rm),SE),Q0),{"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:a=>a}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:a=>a}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:a=>a}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:a=>a},{event:"CC_STATUS_CHANGE",payload:a=>a}]}),Vc=function(a){return{all:a=a||new Map,on:function(d,u){var f=a.get(d);f?f.push(u):a.set(d,[u])},off:function(d,u){var f=a.get(d);f&&(u?f.splice(f.indexOf(u)>>>0,1):a.set(d,[]))},emit:function(d,u){var f=a.get(d);f&&f.slice().map(function(A){A(u)}),(f=a.get("*"))&&f.slice().map(function(A){A(d,u)})}}}(),Gu=new Map,rf=new Array,Et=function(a){Vc.emit(a,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)},sf=a=>new Promise((d,u)=>{a.fail&&a.fail.length>0?hc(Ds(Vc,a.success).pipe(ii(1)),Zs(...a.fail.map(f=>Ds(Vc,f).pipe(ii(1),nr(A=>Si({type:f,payload:A})))))).subscribe(f=>d(f),f=>{u("object"==typeof f.payload?mn({type:f.type},f.payload):void 0===f.payload?{type:f.type}:f)}):Ds(Vc,a.success).pipe(ii(1)).subscribe(f=>d(f))}),wi=function(a,d){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return new Promise((f,A)=>{let S=mt;"string"==typeof a?S=Ds(Vc,a).pipe(ii(1)):(S=Ds(Vc,a.event),a.operations&&(S=a.operations.reduce((T,R)=>T.pipe(R),S))),hc(S,pu(u).pipe(ai(Si("timeout")))).subscribe(T=>{if(d){const R=d(T);"boolean"==typeof R?R?f(""):A({type:"INTERNAL_ERROR"}):0===R.ret?f(R.body):A({type:"INTERNAL_ERROR",reason:R.body})}else f(T)},()=>{A({type:"OPERATION_TIMEOUT"})})})},Gs=(a,d)=>void 0!==d?Ds(Vc,a).pipe(ii(d)):Ds(Vc,a),H0=()=>{rf.forEach(a=>{a.unsubscribe()}),rf.length=0,Gu.clear()},{setAttendeesList:Fn,setIsAdmitAllSilentUsers:bN,resetParticipants:Dw,addFailoverAttendees:CE,removeFailoverAttendees:kw,setClearRaiseHand:Nw,setClearAttendeeFeedback:Pw,updateAttendeeDisplayName:d_,removeXmppAttendeeUser:SN,updateXmppAttendeeList:IE}=xc({SET_ATTENDEES_LIST:a=>a,SET_ASSISTANT_LIST:a=>a,UPDATE_XMPP_ATTENDEE_LIST:a=>a,RESET_PARTICIPANTS:()=>({}),SET_IS_ADMIT_ALL_SILENT_USERS:a=>a,REMOVE_FAILOVER_ATTENDEES:a=>a,ADD_FAILOVER_ATTENDEES:a=>a,SET_CLEAR_RAISE_HAND:()=>({}),SET_CLEAR_ATTENDEE_FEEDBACK:()=>({}),UPDATE_ATTENDEE_DISPLAY_NAME:a=>a,REMOVE_XMPP_ATTENDEE_USER:a=>a});var Vo=function(a,d){return a===d};function TE(a,d){var u,f,he,A="object"==typeof d?d:{equalityCheck:d},S=A.equalityCheck,R=A.maxSize,M=void 0===R?1:R,B=A.resultEqualityCheck,H=(he=void 0===S?Vo:S,function(ue,Se){if(null===ue||null===Se||ue.length!==Se.length)return!1;for(var Qe=ue.length,He=0;He<Qe;He++)if(!he(ue[He],Se[He]))return!1;return!0}),$=1===M?(u=H,{get:function(he){return f&&u(f.key,he)?f.value:"NOT_FOUND"},put:function(he,ue){f={key:he,value:ue}},getEntries:function(){return f?[f]:[]},clear:function(){f=void 0}}):function(he,ue){var Se=[];function Qe(He){var We=Se.findIndex(function(Lt){return ue(He,Lt.key)});if(We>-1){var et=Se[We];return We>0&&(Se.splice(We,1),Se.unshift(et)),et.value}return"NOT_FOUND"}return{get:Qe,put:function(He,We){"NOT_FOUND"===Qe(He)&&(Se.unshift({key:He,value:We}),Se.length>he&&Se.pop())},getEntries:function(){return Se},clear:function(){Se=[]}}}(M,H);function ce(){var he=$.get(arguments);if("NOT_FOUND"===he){if(he=a.apply(null,arguments),B){var Se=$.getEntries().find(function(Qe){return B(Qe.value,he)});Se&&(he=Se.value)}$.put(arguments,he)}return he}return ce.clearCache=function(){return $.clear()},ce}function Wu(a){var d=Array.isArray(a[0])?a[0]:a;if(!d.every(function(f){return"function"==typeof f})){var u=d.map(function(f){return"function"==typeof f?"function "+(f.name||"unnamed")+"()":typeof f}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+u+"]")}return d}function wE(a){for(var d=arguments.length,u=new Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];var A=function(){for(var S=arguments.length,T=new Array(S),R=0;R<S;R++)T[R]=arguments[R];var M,B=0,H={memoizeOptions:void 0},$=T.pop();if("object"==typeof $&&(H=$,$=T.pop()),"function"!=typeof $)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof $+"]");var he=H.memoizeOptions,ue=void 0===he?u:he,Se=Array.isArray(ue)?ue:[ue],Qe=Wu(T),He=a.apply(void 0,[function(){return B++,$.apply(null,arguments)}].concat(Se)),We=a(function(){for(var et=[],Lt=Qe.length,Gt=0;Gt<Lt;Gt++)et.push(Qe[Gt].apply(null,arguments));return M=He.apply(null,et)});return Object.assign(We,{resultFunc:$,memoizedResultFunc:He,dependencies:Qe,lastResult:function(){return M},recomputations:function(){return B},resetRecomputations:function(){return B=0}}),We};return A}var Ws=wE(TE);const vc=a=>{let{participants:{attendeesList:d}}=a;return d},Jh=a=>{let{meeting:{userId:d}}=a;return d},RE=a=>{let{participants:{xmppAttendeeList:d}}=a;return d};let Rl,Xh,$h;(function(a){a[a.Attendee=0]="Attendee",a[a.Host=1]="Host",a[a.Owner=4]="Owner",a[a.ViewOnly=8]="ViewOnly",a[a.HostOwner=5]="HostOwner",a[a.ViewOnlyCanTalk=24]="ViewOnlyCanTalk"})(Rl||(Rl={})),function(a){a[a.Host=10]="Host",a[a.Panelist=20]="Panelist",a[a.Attendee=30]="Attendee"}(Xh||(Xh={})),function(a){a[a.Client=9]="Client",a[a.Phone=5]="Phone",a[a.H323=15]="H323"}($h||($h={}));const G0=a=>(a&Rl.Host)===Rl.Host,Nm=a=>(a&$h.Phone)===$h.Phone,W0=a=>a===Rl.ViewOnlyCanTalk,$a=a=>(a&Rl.ViewOnly)===Rl.ViewOnly;let af,Nr,Pm,lr,Mm;(function(a){a[a.Automatically=1]="Automatically",a[a.Manually=2]="Manually"})(af||(af={})),function(a){a[a.NotStarted=1]="NotStarted",a[a.InProgress=2]="InProgress",a[a.Closing=3]="Closing",a[a.Closed=4]="Closed"}(Nr||(Nr={})),function(a){a[a.NoToken=1]="NoToken",a[a.GotToken=2]="GotToken",a[a.Started=3]="Started",a[a.Closing=4]="Closing",a[a.Closed=5]="Closed"}(Pm||(Pm={})),function(a){a.Initial="initial",a.Invited="invited",a.Joining="joining",a.InRoom="in room",a.Leaving="leaving",a.TimeUp="time up",a.MainSession="main session"}(lr||(lr={})),function(a){a.Join="joinRequest",a.Switch="switchRequest",a.Leave="leaveRequest",a.Broadcast="messageText",a.HelpReq="helpRequest",a.HelpRes="helpResponse",a.CoHostWantJoinThisBo="wantJoinThisBO"}(Mm||(Mm={})),W.AskHostHelpResponse=void 0,function(a){a[a.Received=0]="Received",a[a.Busy=1]="Busy",a[a.Ignore=2]="Ignore",a[a.AlreadyInRoom=3]="AlreadyInRoom"}(W.AskHostHelpResponse||(W.AskHostHelpResponse={}));const ui=Ws([Jh,vc],(a,d)=>d.find(u=>u.userId===a)),Ku=Ws([ui],a=>a?.isHost||a?.bCoHost),K0=Ws([ui],a=>a?.isHost),uA=Ws([RE],a=>a.filter(d=>d.userRole===Xh.Attendee)),z0=Ws([vc],a=>a.filter(d=>d.bHold&&!d.bid)),Ks=Ws([vc,a=>{let{breakoutRoom:d}=a;return d&&d.controlStatus},a=>{let{breakoutRoom:d}=a;return d&&d.currentRoom.status}],(a,d,u)=>a.filter(d!==Nr.InProgress&&d!==Nr.Closing||u!==lr.InRoom?f=>!f.bHold&&!f.bid:f=>!f.bHold)),CN=Ws([a=>{let{participants:{assistantList:d}}=a;return d}],a=>a),cf=Ws([Ks],a=>a.find(d=>d.isHost)),h_=Ws([Ks],a=>a.filter(d=>d.bCoHost)),OE=Ws([ui,Ks],(a,d)=>d.filter(u=>u.userId!==a?.userId));let mi,lA;Ws([RE],a=>a.reduce((d,u)=>{const{jid:f}=u;return Object.assign(d,{[f]:u}),d},{})),Ws([RE,a=>{let{meeting:{jid:d}}=a;return d}],(a,d)=>{var u;return null===(u=a.find(f=>f.jid===d))||void 0===u?void 0:u.userId}),function(a){a.Closed="closed",a.Connecting="connecting",a.Connected="connected"}(mi||(mi={})),function(a){a[a.SupportASL=1]="SupportASL",a[a.SidecarPhase2=2]="SidecarPhase2",a[a.SupportBroadcastVoice=8]="SupportBroadcastVoice",a[a.SendMeetingTokenSeparately=16]="SendMeetingTokenSeparately",a[a.SupportVideoShare=128]="SupportVideoShare"}(lA||(lA={}));const{setAsnIds:p_,setIsCanUnmute:Mw,setDialoutSequence:Zh,setDialoutResultCode:Ac,setIsAllowToTalk:th,setIsHostMuteAll:dA,setIsActiveOperation:uf,setAudioSsrc:DE,setIsMutedUponEntry:Ol,setIsUserGrantCaptureAudio:f_,setIsMicrophoneForbidden:Y0,setWebrtcRestartCount:kE,setMicrophoneList:NE,setSpeakerList:q0,setActiveMicrophone:m_,setActiveSpeaker:J0,setCanPlayAudio:g_,resetAudio:X0,setIsComputerAudioLoading:gd,setIsSpeakerOnly:PE,setIsAllowToTalkAttendeeConnected:$0,setIsMuteBeforeSharingAudio:ep,addLocalShareAudioUser:IN,updateLocalShareAudioUser:lf,setIsJoinComputerAudioBeforeSharingAudio:nh,setIsShareAudioEnabled:__,setIsShareAudioMuted:ME,setIsSharingAudio:df,setAudioDataEncoding:Z0,setAudioDataDecoding:xm,addLocallyMutedAudio:xE,removeLocallyMutedAudio:xw,updateUserAudioVolumeLocally:LE,removeLocalUserAudioVolume:BE}=xc("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_IS_HOST_MUTE_ALL","SET_IS_ACTIVE_OPERATION","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_SPEAKER_ONLY","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME"),{setSharePrivilege:eC,setShareActiveNode:tC,setIsReceiveSharing:FE,setIsChromeExtensionInstalled:nC,setIsScreenShareForbidden:UE,setShareDimension:VE,setShareStatus:Dl,setShareSsrc:rC,setShareQuality:jc,setReceivedShareDimension:hs,setIsRemoteControlApproved:jE,setIsGrabRemoteControl:Lw,setIsVerifiedSharingRenderCanvasAfterFailover:QE,setIsVerifiedSharingCaptureCanvasAfterFailover:HE,setIsSdkGrabControl:iC,setIsReceiveSharingFromMainSession:Bw,setIsSharingToBreakoutRoom:So,setIsSharingWithSecondCamera:Qc,setShringSecondCameraId:hA,setIsRequireReadReceipt:Xr,resetShare:Hc}=xc("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_CHROME_EXTENSION_INSTALLED","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_REMOTE_CONTROL_APPROVED","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_VERIFIED_SHARING_RENDER_CANVAS_AFTER_FAILOVER","SET_IS_VERIFIED_SHARING_CAPTURE_CANVAS_AFTER_FAILOVER","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","RESET_SHARE"),{setVideoSsrc:pA,setActiveVideoId:GE,setCameraList:fA,setActiveCamera:zs,setIsCurrentUserStartedVideo:zo,setSpotlightVideo:hf,setIsCaptureForbidden:Gc,setVideoMaxQuality:Fw,setCaptureCanvasList:mA,setIsVideoMuted:Wc,setIsCaptureCameraLoading:pf,setIsCameraTaken:WE,setIsVerifiedVideoRenderCanvasAfterFailover:KE,setIsVerifiedVideoCaptureCanvasAfterFailover:Uw,resetVideo:tp,setReceivedVideoDimension:Lm,addSubscribedVideoId:_d,removeSubscribedVideoId:oC,setIsFollowHostVideoLayout:sC,setHostDragLayout:Vw,addRenderedVideoId:rh,removeRenderedVideoId:jw,setIsSupportHdVideo:Qw,setMaximumNumbeOfHdSubscriptions:zE,setIsCanUnmuteVideo:v_,setIsVbPreloadReady:YE,setIsVbConfiged:A_,setVbImageSrc:np,setVideoDataEncoding:rp,setVideoDataDecoding:gA,setHardwareAccelerationState:y_,setVideoCaptureCustomizedOption:kl}=xc("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_CAPTURE_CANVAS_LIST","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","SET_IS_VERIFIED_VIDEO_RENDER_CANVAS_AFTER_FAILOVER","SET_IS_VERIFIED_VIDEO_CAPTURE_CANVAS_AFTER_FAILOVER","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_MAXIMUM_NUMBE_OF_HD_SUBSCRIPTIONS","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION"),{resetQa:zw}=xc("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:_A,setPanelistChatPrivilege:qE,addChatMessageHistory:vd,resetChat:mf,setIsAllowAttendeeChat:JE,setLatestChatMessageId:Yw,removeChatMessage:vA}=xc("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE"),{setCcEditorInfo:AA,resetClosedCaption:$E}=xc("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:ZE,setBreakoutRoomAllocationPattern:eb,setBreakoutRoomSequenceId:lC,setMeetingElapsedTime:Fm,setStartRoomElapsedTime:tb,setBreakoutRoomOptions:yA,setBreakoutRoomControlStatus:nb,setBreakoutRooms:Ad,setCurrentBreakoutRoom:b_,setBreakoutRoomAttendeeStatus:gf,setBreakoutRoomConfId:Zw,setBreakoutRoomToken:dC,resetBreakoutRoom:zu,setBreakoutRoomClosingRoomTime:hC,setBreakoutRoomBroadcastMessage:pC,setBreakoutRoomHostReplyType:ws,setBreakoutRoomHostReplyRequestId:rb,setMainSessionAttendeeList:fC,setIsHugeBreakoutRoom:mC,setBreakoutRoomPreAssignedRoomList:ib,setBreakoutRoomUserRoleUpdated:yd,setBreakoutRoomMeetingOptions:eR}=xc("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS"),{setCloudRecordingStatus:tR,setCloudRecordingEnable:gC,setAllowStopAutoRecording:nR,setAutomaticCloudRecordingEnable:_C,resetRecording:Kc}=xc("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","RESET_RECORDING"),{updateCmdJid:zc,removeCmdJid:_f,setCmdChannelConnectionStatus:vC,resetCmdChannel:rR}=xc("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),{resetArchiving:AC}=xc({SET_ARCHIVING_STATUS:a=>a,SET_ARCHIVING_SESSION_READY:a=>a,SET_ARCHIVING_OPTIONS:a=>a,RESET_ARCHIVING:()=>{}}),{setIsLiveTranscriptionEnabled:iR,setLiveTranscriptionMeetingOptions:oR,setIsLiveTranscriptionManualCaptionerEnabled:yC,setLiveTranscriptionGatewayId:sR,setLiveTranscriptionSupportedLanguage:EA,setIsLiveTranscriptionSubscribed:oh,setCurrentTranscriptionLang:ip,setCurrentTranslationLang:vf,addLiveTranscriptionMessage:bA,updateLiveTranscriptionMessage:SA,reduceLiveTranscriptionMessages:kN,setLiveTranscriptionEngineType:EC,removeLiveTranscriptionFailoverState:NN,setLiveTranscriptionLastCaptionMessage:CA,resetLiveTranscription:ob}=xc("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"),IA=function(a){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{socket:{zoomSocketStatus:u,xmppSocketStatus:f,mainSessionSocketStatus:A},meeting:{meetingStatus:S}}=a,T=[];if(S===vs.Joined){const R=_o.getInstance(),M=ko.createAgent();if(R.disconnect(),R.destroy(),a.video&&(a.video.subscribedVideoList.length>0&&a.video.subscribedVideoList.forEach(B=>{M.unsubscribeVideo(B)}),a.video.isCurrentUserStartedVideo&&Et("VIDEO_CAPTURE_STOP_RESULT")),a.share&&a.share.isReceiveSharing){const B=a.share.activeNodeId;a.share.isRemoteControlApproved&&M.sharingRequestRemoteControl(B,!1),M.unsubscribeSharing(B)}}if(d||(cr.clearSession(),[ds.WebclientTk,ds.WebclientZsk,ds.WebclientZtk].forEach(R=>{sessionStorage.removeItem(R)}),mc.destroy()),u!==mi.Closed&&T.push(ra()),f!==mi.Closed&&T.push(eo()),A!==mi.Closed&&T.push(Ca()),d){const R=ui(a);T.push(R0({audio:R?.audio,muted:R?.muted,video:R?.bVideoOn}))}else T.push(R0({audio:!1,muted:void 0,video:!1}));return T.push(dm(),mm(),Dw(),X0(d),Hc(),tp(),zw(),mf(),Kc(),$E(),zu(),rR(),AC(),ob(d),qa(vs.Closed)),T},bC=function(a){for(var d=arguments.length,u=new Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];return wi({event:"UPDATE_USER_PARTICIPANT_ATTRIBUTE",operations:[Ne(A=>A.find(S=>S.userId===a)),Un(A=>!!A),ii(1)]},...u)};function Ml(a){return xe(Ne((d,u)=>a(d,u)),Un(d=>null!=d))}function aR(a){return xe(nr((d,u)=>a(d,u)||mt))}function cR(a){return xe(Ho((d,u)=>a(d,u)||mt))}function SC(a){return xe(nr((d,u)=>a(d,u)),nr(d=>Array.isArray(d)?Yn(d):Pn(d)))}const PN=(a,d)=>{const u=performance.now();let f=0,A=!1;return setTimeout(function S(){f+=d,a();const T=performance.now()-u-f,R=setTimeout(S,Math.max(d-T,0));A&&clearTimeout(R)},d),()=>{A=!0}},CC={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},S_={["".concat(Ts)]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(a){a.add&&this.payloads.add.push(...a.add),a.update&&this.payloads.update.push(...a.update),a.remove&&this.payloads.remove.push(...a.remove)}})};function IC(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CC;return d=>new ze(u=>{const f=new Map;let A=0,S=null;const{period:T,rules:R}=a;let M=null;S||(S=PN(()=>{A=0},T));const B=Object.keys(S_),H=d.subscribe({next($){if($&&$.evt&&null!==S){A+=1;const{evt:ce,body:he}=$,ue=String(ce);if(B.indexOf(ue)>=0)if(M){const Se=f.get(ue);if(Se)Se.onThrottle(he);else{const Qe=S_[ue]();Qe.onThrottle(he),f.set(ue,Qe)}}else{let Se=0;if(R.forEach(Qe=>{A>Qe.peak&&(Se=Qe.throttle)}),Se>0){const Qe=S_[ue]();Qe.onThrottle(he),f.set(ue,Qe),M=setTimeout(()=>{f.forEach((He,We)=>{const et={evt:Number(We),body:He.payloads};u.next(et)}),f.clear(),M=null},Se)}else u.next($)}else u.next($)}else u.next($)},error($){u.error($)},complete(){u.complete()}});return()=>{H.unsubscribe(),S&&(S(),S=null),A=0}})}Ws([Ks,a=>{let{share:{isReceiveSharing:d}}=a;return d},a=>{let{share:{activeNodeId:d}}=a;return d}],function(){let u=arguments.length>2?arguments[2]:void 0;return(arguments.length>1?arguments[1]:void 0)?(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(f=>f.userId===u&&!0===f.sharerOn):null});const Um=Ws([Ks],a=>a.filter(d=>d.sharerOn||d.sharerPause));class TA{constructor(d){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,d&&(this._cancelError=d),this._locked=!1}acquire(){const d=this.isLocked(),u=new Promise((f,A)=>{this._queue.push({resolve:f,reject:A})});return d||this._dispatch(),u}runExclusive(d){var u=this;return L(function*(){const f=yield u.acquire();try{return yield d()}finally{f()}})()}waitForUnlock(){var d=this;return L(function*(){return d.isLocked()?new Promise(u=>d._waiters.push({resolve:u})):Promise.resolve()})()}isLocked(){return this._locked}release(){if(this._currentReleaser){const d=this._currentReleaser;this._currentReleaser=void 0,d()}}cancel(){this._queue.forEach(d=>d.reject(this._cancelError)),this._queue=[]}_dispatch(){const d=this._queue.shift();if(!d)return;let u=!1;this._currentReleaser=()=>{u||(u=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,d.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach(d=>d.resolve()),this._waiters=[]}}let no="zoom.us";const TC="https://dmogdx0jrul3u.cloudfront.net/".concat("2.9.0","/lib/av"),C_="https://source.zoom.us/".concat("2.9.0","/lib/av"),sb="https://jssdk.zoomus.cn/".concat("2.9.0","/lib/av"),Yc=(a,d,u)=>Fv(...[d,u].map((f,A)=>{if("initial"!==f)return Yn(Promise.resolve("success"===f));{const S=0===A?"ENCODE":"DECODE";return hc(Gs("".concat(a.toUpperCase(),"_").concat(S,"_SUCCESS"),1).pipe(pc(!0)),Gs("".concat(a.toUpperCase(),"_").concat(S,"_FAIL"),1).pipe(pc(!1)))}})),I_=a=>{const d=ui(a.value);return d?Pn(d):Gs("ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",1).pipe(po(es),Hn(a),Ne(u=>{let[,f]=u;return ui(f)}))},uR=()=>Yn(navigator.mediaDevices.enumerateDevices()).pipe(Ne(a=>{const d=[],u=[],f=[];return a.forEach(A=>{const{kind:S,deviceId:T,label:R}=A;switch(S){case"audioinput":"communications"===T||/ZoomAudioDevice/i.test(R)||/Zoom-\S*/.test(R)||/CubebAggregateDevice\S*/.test(R)||d.push({deviceId:T,label:R});break;case"audiooutput":"communications"===T||/ZoomAudioDevice/i.test(R)||u.push({deviceId:T,label:R});break;case"videoinput":f.push({deviceId:T,label:R})}}),{microphones:d,speakers:u,cameras:f}}));function T_(a){if(a){let u=a;try{a.width=a.width}catch{var d;u=a.cloneNode(!0),null===(d=a.parentNode)||void 0===d||d.replaceChild(u,a)}return u}return a}function op(){try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(EE)}catch{return!1}}function Yu(){var a;return null===(a=WebAssembly)||void 0===a?void 0:a.validate(bE)}function Vm(){return ym()||Em()}const lR=(()=>{const a=new TA;return{withAudioAction:d=>function(){for(var u=arguments.length,f=new Array(u),A=0;A<u;A++)f[A]=arguments[A];return new Promise(function(){var S=L(function*(T,R){let M=!1;const B=setTimeout(()=>{M=!0,R(new Error("Operation Timeout!"))},3e4);try{const H=yield a.acquire();M?H():(clearTimeout(B),T(d(...f)))}catch(H){M||(clearTimeout(B),R(H))}});return function(T,R){return S.apply(this,arguments)}}())},processAudioAction:d=>a.acquire().then(()=>d()),completeAudioAction:()=>{a.release()},cancelAllAudioAction:()=>{a.cancel()}}})();function jm(a){const d=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(a,{get:(u,f)=>"string"==typeof f&&d.includes(f)?function(){return lR.withAudioAction(u[f].bind(u))(...arguments)}:Reflect.get(u,f)})}function ab(){var a,d;const u=ud()&&Number(null===(a=Ta())||void 0===a||null===(d=a.match(/\d+$/))||void 0===d?void 0:d[0])>=91,f=navigator.hardwareConcurrency>2;return!Em()&&tA()&&k0()&&u&&f}const cb=(a,d)=>{const u=document.createElement("link");return u.rel="preload",u.href=a,u.as=d,u.crossOrigin="anonymous",u},ca=(a,d,u)=>{const f=[],A=[],S=Array.isArray(a)?a:[a];return Zp.filter(T=>S.includes(T.category)&&T.tag===d).forEach(T=>{"worker"===T.type?f.push("".concat(u).concat(T.name)):"wasm"===T.type&&A.push("".concat(u).concat(T.name))}),{workers:f,wasms:A}},Ed=ko.createAgent();var MN=Object.freeze({__proto__:null,sharePrivilegeChangeEpic:(a,d)=>Mn(a,gc).pipe(Un(u=>{var f;return void 0!==(null===(f=u.payload.body)||void 0===f?void 0:f.lockShare)}),Hn(d),dr(u=>{let[f,A]=u;const{share:{sharePrivilege:S}}=A,{payload:{body:{lockShare:T}}}=f;S!==T&&Et("SHARE_PRIVILEGE_CHANGE",T)}),Ne(u=>{let[f]=u;return eC(f.payload.body.lockShare)})),shareSSrcEpic:a=>Mn(a,20227).pipe(Ne(d=>rC(d.payload.body.ssrc))),shareStatusChangeEpic:(a,d)=>Mn(a,20225).pipe(Hn(d),Un(u=>{let[f,A]=u;const{payload:{body:S}}=f,{share:{isReceiveSharingFromMainSession:T}}=A;return!T||T&&S.fromMainSession}),Ne(u=>{let[f,A]=u;const{share:{isReceiveSharing:S,activeNodeId:T,shareQuality:R,isReceiveSharingFromMainSession:M},breakoutRoom:B}=A,{payload:{body:H}}=f;if(S&&1===H.bStatus){let $=!1;B?.currentRoom.status===lr.InRoom&&B.mainSessionAttendeeList.length>0&&($=B.mainSessionAttendeeList.findIndex(ce=>ce.userId===T)>-1),Ed.unsubscribeSharing(T,$),Ed.subscribeSharing(H.activeNodeID,R,M),_o.getInstance().switchSharingSource(H.ssrc,M),Et("SHARE_AUTO_CHANGE_SOURCE",{userId:H.activeNodeID})}else if(1===H.bStatus){const $={activeUserId:H.activeNodeID,isActive:!0};M&&Object.assign($,{isFromMainSession:!0}),Et("SHARE_ACTIVE_INDICATION",$)}else if(S){const $={activeUserId:H.activeNodeID,isActive:!1};M&&Object.assign($,{isFromMainSession:!0}),Et("SHARE_ACTIVE_INDICATION",$)}return tC(H)})),handleChromeExtensionEpic:a=>Ci(a,Dr.CheckChromeSharingExtensionResponse).pipe(Ne(d=>(Et("SHARE_CHECK_CHROME_SHARING_EXTENSION",d.payload.data),nC(d.payload.data)))),handleSDKShareSuccessEpic:(a,d)=>Ci(a,[Dr.SharingDesktopStreamHaveAudio,Dr.SharingDesktopStreamHaveNoAudio]).pipe(Hn(d),Ne(u=>{let[f,A]=u;const{meeting:{userId:S},share:{isSharingToBreakoutRoom:T}}=A,{payload:{type:R}}=f;return Ed.startSharing(S,{bShareToBO:T,bShareAudio:R===Dr.SharingDesktopStreamHaveAudio}),UE(!1)})),handleSDKShareErrorEpic:a=>Ci(a,[Dr.DesktopSharingError,Dr.DesktopSharingChromeExtensionUninstalled,Dr.DesktopSharingPermissionDenied,Dr.DesktopSharingSystemError]).pipe(nr(d=>{const u=[];let f="";return[Dr.DesktopSharingPermissionDenied,Dr.DesktopSharingSystemError].includes(d.payload.type)&&(u.push(UE(!0)),d.payload.type===Dr.DesktopSharingSystemError?/mac/i.test(navigator.platform)&&(f="To use screen share on Chrome, please allow screen recording access in system setting."):f="To use screen share, please allow the permission request."),Et("SHARE_START_DESKTOP_SHARE_FAILED",{reason:f}),Yn(u)})),handleSDKShareDimensionChangeEpic:a=>Ci(a,Dr.CurrentDesktopSharingWidthHeight).pipe(Un(d=>!!d.payload.data),Ne(d=>{Et("SHARE_DIMENSION_CHANGE",d.payload.data);const{payload:{data:{width:u,height:f}}}=d;return _o.getInstance().ajustmentSharingCanvas(u,f),VE(d.payload.data)})),handleSDKReceivedShareSizeChangeEpic:(a,d)=>Ci(a,Dr.SharingDecodeMaxSize).pipe(Un(u=>!!u.payload.data),Hn(d),Ml(u=>{let[f,A]=u;const{share:{shareQuality:S,activeNodeId:T,isReceiveSharingFromMainSession:R}}=A,{payload:{data:{size:M}}}=f,B=Number(M);if(S!==B)return Ed.subscribeSharing(T,B,R),jc(B)})),handleRWGShareOriginalDimensionEpic:a=>Mn(a,20226).pipe(dr(d=>{var u,f;if(Et("SHARE_RECEIVED_DIMENSION_CHANGE",null===(u=d.payload)||void 0===u?void 0:u.body),null!==(f=d.payload)&&void 0!==f&&f.body){const{payload:{body:{width:A,height:S}}}=d;_o.getInstance().ajustmentReceivedSharingCanvas(A,S)}}),Ne(d=>hs(d.payload.body))),handleSDKShareOriginalDimensionEpic:a=>Ci(a,Dr.SharingPara).pipe(dr(d=>{var u,f;if(Et("SHARE_RECEIVED_DIMENSION_CHANGE",null===(u=d.payload.data)||void 0===u?void 0:u.body),null!==(f=d.payload.data)&&void 0!==f&&f.body){const{payload:{data:{body:{width:A,height:S}}}}=d;_o.getInstance().ajustmentReceivedSharingCanvas(A,S)}}),Ne(d=>{var u;return hs(null===(u=d.payload.data)||void 0===u?void 0:u.body)})),handleSDKStopShareEpic:(a,d)=>Ci(a,Dr.UserStopDesktopSharing).pipe(Hn(d),Ne(u=>{let[,f]=u;const{meeting:{userId:A},share:{status:S}}=f;return S!==W.ShareStatus.End&&(Ed.stopSharing(A),Et("SHARE_VIDEO_STREAMS_END")),Dl(W.ShareStatus.End)})),handleRWGCurrentUserShareChangeEpic:(a,d)=>Mn(a,Ts).pipe(Hn(d),Un(u=>{let[f,A]=u;const{meeting:{userId:S}}=A,T=f.payload.body.update;return T&&T.length>0&&T.findIndex(R=>R.id===S&&void 0!==R.bShareOn)>-1}),nr(u=>{let[f,A]=u;const{meeting:{userId:S},share:{status:T,isReceiveSharing:R,activeNodeId:M}}=A,{payload:{body:{update:B}}}=f,H=B.find(ue=>ue.id===S&&!1===ue.bShareOn),$=B.find(ue=>ue.id===S&&!0===ue.bShareOn),ce=[],he=_o.getInstance();return H&&T!==W.ShareStatus.End&&(Ed.stopSharing(S),he.stopDesktopSharing(),ce.push(Dl(W.ShareStatus.End)),Et("SHARE_PASSIVE_STOP_SHARE")),$&&T===W.ShareStatus.End&&(R&&(he.stopRenderSharing(),Ed.unsubscribeSharing(M),ce.push(FE(!1))),ce.push(Dl(W.ShareStatus.Sharing))),Yn(ce)})),handleMultipleShareChangeEpic:(a,d)=>Mn(a,Ts).pipe(Hn(d),Un(u=>{let[f,A]=u;const{meeting:{userId:S}}=A,T=f.payload.body.update;return T&&T.length>0&&T.findIndex(R=>R.id!==S&&void 0!==R.bShareOn)>-1}),nr(u=>{let[f,A]=u;const{payload:{body:{update:S}}}=f,{share:{activeNodeId:T,isReceiveSharing:R}}=A,M=Um(A),B=S.filter($=>!0===$.bShareOn&&!1===$.bSharePause),H=S.filter($=>!1===$.bShareOn);return B.length>0&&B.forEach($=>{-1===M.findIndex(ce=>ce.userId===$.id)&&Et("SHARE_NEW_USER_ADD",$)}),H.length>0&&(H.forEach($=>{Et("SHARE_USER_REMOVE",$)}),R&&H.some($=>$.id===T))?hc(Mn(a,20225).pipe(ii(1),ai(mt)),pu(50).pipe(ai(Si("timeout")))).pipe(oE(()=>{const{share:{activeNodeId:$,isReceiveSharingFromMainSession:ce,shareQuality:he},audio:ue}=d.value,Se=M.filter(Qe=>Qe.userId!==$);if(Se.length>0){const Qe=Se[0],{userId:He}=Qe;Ed.unsubscribeSharing($,ce),Ed.subscribeSharing(He,he,ce);const We=_o.getInstance();return We.switchSharingSource(He,ce),ue?.localShareAudioUserMutedList.forEach(et=>{We.setSharingAudioVolume(He,et.userId!==He||et.muted,et.isFromMainSession)}),Et("SHARE_AUTO_CHANGE_SOURCE",{userId:He}),Pn(tC({activeNodeID:He,bStatus:1,ssrc:He}))}return mt})):mt})),handleSharingEncryptIndication:(a,d)=>Mn(a,M0).pipe(Hn(d),Ho(u=>{let[f,A]=u;const{payload:{body:{encryptKey:S,additionalType:T}}}=f,{media:{sharingDecodeStatus:R,sharingEncodeStatus:M},meeting:{confId:B,userId:H,zoomId:$,meetingId:ce,meetingNumber:he,isWebinar:ue}}=A;return I_(d).pipe(Ho(Se=>{let Qe=M;return ue&&Se&&$a(Se.userRole)&&(Qe="failed"),Yc("sharing",Qe,R).pipe(dr(He=>{let[We,et]=He;const Lt=_o.getInstance(),Gt={userId:H,sn:Tl($),confId:B,encryptKey:Tl(S),encryptType:T,meetingId:ce,meetingNumber:he};if(We&&Lt?.updateMediaParams({iVType:Fo.SHARING_ENCODE,isFromMainSession:!1,updateParams:Gt}),et){Lt.updateMediaParams({iVType:Fo.SHARING_DECODE,isFromMainSession:!1,updateParams:Gt});const{participants:{attendeesList:jt}}=d.value;if(jt.length>0){const Tt=jt.map(sn=>({userid:sn.userId,sn:sn.zoomID&&Tl(sn.zoomID)}));Lt.updateUserMediaSN({added:Tt,isFromMainSession:!1,iVType:Fo.SHARING_DECODE})}}}),ai(mt))}))})),handleSharingReceivingChannelReadyEpic:(a,d)=>cd(a,20235).pipe(Hn(d),dr(u=>{let[f,A]=u;const{media:{sharingDecodeStatus:S}}=A,{type:T,payload:{body:R}}=f,M=T==="".concat(or);Yc("sharing","success",S).subscribe(B=>{let[,H]=B;H&&_o.getInstance().addReceivedSharingChannelType(mn({isFromMainSession:M},R))})}),ai(mt)),handleSharingReceivingChannelCloseEpic:(a,d)=>cd(a,20236).pipe(Hn(d),dr(u=>{let[f,A]=u;const{media:{sharingDecodeStatus:S}}=A,{type:T,payload:{body:{ssrc:R}}}=f,M=T==="".concat(or);Yc("sharing","success",S).subscribe(B=>{let[,H]=B;H&&_o.getInstance().removeReceivedSharingChannelType({isFromMainSession:M,ssrc:R})})}),ai(mt)),handleReceiveSharingConfirmEpic:a=>Ci(a,Dr.SharingFirstDecodeFrameReceivedSsrc).pipe(Un(d=>!!d.payload.data),dr(d=>{const{payload:{data:{ssrc:u}}}=d;Ed.sendReceivingSharingReady(u)}),ai(mt)),handleReceiveSharingFeedbackEpic:(a,d)=>Mn(a,20233).pipe(Un(()=>!!d.value.share.isRequireReadReceipt),dr(u=>{const{payload:{body:{bReceiveOk:f}}}=u;f&&Et("SHARE_READ_RECEIPT")}),ai(mt))});function bd(a){for(var d=arguments.length,u=Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];throw Error("[Immer] minified error nr: "+a+(u.length?" "+u.map(function(A){return"'"+A+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sh(a){return!!a&&!!a[ua]}function sp(a){return!!a&&(function(d){if(!d||"object"!=typeof d)return!1;var u=Object.getPrototypeOf(d);if(null===u)return!0;var f=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return f===Object||"function"==typeof f&&Function.toString.call(f)===Sd}(a)||Array.isArray(a)||!!a[hR]||!!a.constructor[hR]||RA(a)||ub(a))}function Qm(a,d,u){void 0===u&&(u=!1),0===Hm(a)?(u?Object.keys:kC)(a).forEach(function(f){u&&"symbol"==typeof f||d(f,a[f],a)}):a.forEach(function(f,A){return d(A,f,a)})}function Hm(a){var d=a[ua];return d?d.i>3?d.i-4:d.i:Array.isArray(a)?1:RA(a)?2:ub(a)?3:0}function wA(a,d){return 2===Hm(a)?a.has(d):Object.prototype.hasOwnProperty.call(a,d)}function dR(a,d,u){var f=Hm(a);2===f?a.set(d,u):3===f?(a.delete(d),a.add(u)):a[d]=u}function RA(a){return k_&&a instanceof Map}function ub(a){return xN&&a instanceof Set}function Af(a){return a.o||a.t}function ap(a){if(Array.isArray(a))return Array.prototype.slice.call(a);var d=pR(a);delete d[ua];for(var u=kC(d),f=0;f<u.length;f++){var A=u[f],S=d[A];!1===S.writable&&(S.writable=!0,S.configurable=!0),(S.get||S.set)&&(d[A]={configurable:!0,writable:!0,enumerable:S.enumerable,value:a[A]})}return Object.create(Object.getPrototypeOf(a),d)}function cp(a,d){return void 0===d&&(d=!1),R_(a)||sh(a)||!sp(a)||(Hm(a)>1&&(a.set=a.add=a.clear=a.delete=w_),Object.freeze(a),d&&Qm(a,function(u,f){return cp(f,!0)},!0)),a}function w_(){bd(2)}function R_(a){return null==a||"object"!=typeof a||Object.isFrozen(a)}function up(a){var d=N_[a];return d||bd(18,a),d}function lb(){return gb}function O_(a,d){d&&(up("Patches"),a.u=[],a.s=[],a.v=d)}function ah(a){lp(a),a.p.forEach(D_),a.p=null}function lp(a){a===gb&&(gb=a.l)}function db(a){return gb={p:[],l:gb,h:a,m:!0,_:0}}function D_(a){var d=a[ua];0===d.i||1===d.i?d.j():d.O=!0}function hb(a,d){d._=d.p.length;var u=d.p[0],f=void 0!==a&&a!==u;return d.h.g||up("ES5").S(d,a,f),f?(u[ua].P&&(ah(d),bd(4)),sp(a)&&(a=OA(d,a),d.l||pb(d,a)),d.u&&up("Patches").M(u[ua],a,d.u,d.s)):a=OA(d,u,[]),ah(d),d.u&&d.v(d.u,d.s),a!==Pi?a:void 0}function OA(a,d,u){if(R_(d))return d;var f=d[ua];if(!f)return Qm(d,function(S,T){return ns(a,f,d,S,T,u)},!0),d;if(f.A!==a)return d;if(!f.P)return pb(a,f.t,!0),f.t;if(!f.I){f.I=!0,f.A._--;var A=4===f.i||5===f.i?f.o=ap(f.k):f.o;Qm(3===f.i?new Set(A):A,function(S,T){return ns(a,f,A,S,T,u)}),pb(a,A,!1),u&&a.u&&up("Patches").R(f,u,a.u,a.s)}return f.o}function ns(a,d,u,f,A,S){if(sh(A)){var T=OA(a,A,S&&d&&3!==d.i&&!wA(d.D,f)?S.concat(f):void 0);if(dR(u,f,T),!sh(T))return;a.m=!1}if(sp(A)&&!R_(A)){if(!a.h.F&&a._<1)return;OA(a,A),d&&d.A.l||pb(a,A)}}function pb(a,d,u){void 0===u&&(u=!1),a.h.F&&a.m&&cp(d,u)}function wC(a,d){var u=a[ua];return(u?Af(u):a)[d]}function fb(a,d){if(d in a)for(var u=Object.getPrototypeOf(a);u;){var f=Object.getOwnPropertyDescriptor(u,d);if(f)return f;u=Object.getPrototypeOf(u)}}function DA(a){a.P||(a.P=!0,a.l&&DA(a.l))}function RC(a){a.o||(a.o=ap(a.t))}function mb(a,d,u){var f=RA(d)?up("MapSet").N(d,u):ub(d)?up("MapSet").T(d,u):a.g?function(A,S){var T=Array.isArray(A),R={i:T?1:0,A:S?S.A:lb(),P:!1,I:!1,D:{},l:S,t:A,k:null,o:null,j:null,C:!1},M=R,B=_b;T&&(M=[R],B=qu);var H=Proxy.revocable(M,B),$=H.revoke,ce=H.proxy;return R.k=ce,R.j=$,ce}(d,u):up("ES5").J(d,u);return(u?u.A:lb()).p.push(f),f}function ch(a,d){switch(d){case 2:return new Map(a);case 3:return Array.from(a)}return ap(a)}var OC,gb,DC=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),k_=typeof Map<"u",xN=typeof Set<"u",yf=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",Pi=DC?Symbol.for("immer-nothing"):((OC={})["immer-nothing"]=!0,OC),hR=DC?Symbol.for("immer-draftable"):"__$immer_draftable",ua=DC?Symbol.for("immer-state"):"__$immer_state",Sd=""+Object.prototype.constructor,kC=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,pR=Object.getOwnPropertyDescriptors||function(a){var d={};return kC(a).forEach(function(u){d[u]=Object.getOwnPropertyDescriptor(a,u)}),d},N_={},_b={get:function(a,d){if(d===ua)return a;var A,R,M,u=Af(a);if(!wA(u,d))return A=a,(M=fb(u,d))?"value"in M?M.value:null===(R=M.get)||void 0===R?void 0:R.call(A.k):void 0;var f=u[d];return a.I||!sp(f)?f:f===wC(a.t,d)?(RC(a),a.o[d]=mb(a.A.h,f,a)):f},has:function(a,d){return d in Af(a)},ownKeys:function(a){return Reflect.ownKeys(Af(a))},set:function(a,d,u){var T,R,f=fb(Af(a),d);if(f?.set)return f.set.call(a.k,u),!0;if(!a.P){var A=wC(Af(a),d),S=A?.[ua];if(S&&S.t===u)return a.o[d]=u,a.D[d]=!1,!0;if(((T=u)===(R=A)?0!==T||1/T==1/R:T!=T&&R!=R)&&(void 0!==u||wA(a.t,d)))return!0;RC(a),DA(a)}return a.o[d]===u&&"number"!=typeof u&&(void 0!==u||d in a.o)||(a.o[d]=u,a.D[d]=!0,!0)},deleteProperty:function(a,d){return void 0!==wC(a.t,d)||d in a.t?(a.D[d]=!1,RC(a),DA(a)):delete a.D[d],a.o&&delete a.o[d],!0},getOwnPropertyDescriptor:function(a,d){var u=Af(a),f=Reflect.getOwnPropertyDescriptor(u,d);return f&&{writable:!0,configurable:1!==a.i||"length"!==d,enumerable:f.enumerable,value:u[d]}},defineProperty:function(){bd(11)},getPrototypeOf:function(a){return Object.getPrototypeOf(a.t)},setPrototypeOf:function(){bd(12)}},qu={};Qm(_b,function(a,d){qu[a]=function(){return arguments[0]=arguments[0][0],d.apply(this,arguments)}}),qu.deleteProperty=function(a,d){return _b.deleteProperty.call(this,a[0],d)},qu.set=function(a,d,u){return _b.set.call(this,a[0],d,u,a[0])};var qc=new(function(){function a(u){var f=this;this.g=yf,this.F=!0,this.produce=function(A,S,T){if("function"==typeof A&&"function"!=typeof S){var R=S;S=A;var M=f;return function(he){var ue=this;void 0===he&&(he=R);for(var Se=arguments.length,Qe=Array(Se>1?Se-1:0),He=1;He<Se;He++)Qe[He-1]=arguments[He];return M.produce(he,function(We){var et;return(et=S).call.apply(et,[ue,We].concat(Qe))})}}var B;if("function"!=typeof S&&bd(6),void 0!==T&&"function"!=typeof T&&bd(7),sp(A)){var H=db(f),$=mb(f,A,void 0),ce=!0;try{B=S($),ce=!1}finally{ce?ah(H):lp(H)}return typeof Promise<"u"&&B instanceof Promise?B.then(function(he){return O_(H,T),hb(he,H)},function(he){throw ah(H),he}):(O_(H,T),hb(B,H))}if(!A||"object"!=typeof A)return(B=S(A))===Pi?void 0:(void 0===B&&(B=A),f.F&&cp(B,!0),B);bd(21,A)},this.produceWithPatches=function(A,S){return"function"==typeof A?function(M){for(var B=arguments.length,H=Array(B>1?B-1:0),$=1;$<B;$++)H[$-1]=arguments[$];return f.produceWithPatches(M,function(ce){return A.apply(void 0,[ce].concat(H))})}:[f.produce(A,S,function(M,B){T=M,R=B}),T,R];var T,R},"boolean"==typeof u?.useProxies&&this.setUseProxies(u.useProxies),"boolean"==typeof u?.autoFreeze&&this.setAutoFreeze(u.autoFreeze)}var d=a.prototype;return d.createDraft=function(u){var S;sp(u)||bd(8),sh(u)&&(sh(S=u)||bd(22,S),u=function T(R){if(!sp(R))return R;var M,B=R[ua],H=Hm(R);if(B){if(!B.P&&(B.i<4||!up("ES5").K(B)))return B.t;B.I=!0,M=ch(R,H),B.I=!1}else M=ch(R,H);return Qm(M,function($,ce){var he,ue;B&&(ue=$,(2===Hm(he=B.t)?he.get(ue):he[ue])===ce)||dR(M,$,T(ce))}),3===H?new Set(M):M}(S));var f=db(this),A=mb(this,u,void 0);return A[ua].C=!0,lp(f),A},d.finishDraft=function(u,f){var A=(u&&u[ua]).A;return O_(A,f),hb(void 0,A)},d.setAutoFreeze=function(u){this.F=u},d.setUseProxies=function(u){u&&!yf&&bd(20),this.g=u},d.applyPatches=function(u,f){var A;for(A=f.length-1;A>=0;A--){var S=f[A];if(0===S.path.length&&"replace"===S.op){u=S.value;break}}A>-1&&(f=f.slice(A+1));var T=up("Patches").$;return sh(u)?T(u,f):this.produce(u,function(R){return T(R,f)})},a}()),Mt=qc.produce;qc.produceWithPatches.bind(qc),qc.setAutoFreeze.bind(qc),qc.setUseProxies.bind(qc),qc.applyPatches.bind(qc),qc.createDraft.bind(qc),qc.finishDraft.bind(qc);const vb={ssrc:0,status:W.ShareStatus.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:Vu.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isRemoteControlApproved:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isChromeExtensionInstalled:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1},Cd=na({["".concat(eC)]:Mt((a,d)=>{let{payload:u}=d;a.sharePrivilege=u}),["".concat(tC)]:Mt((a,d)=>{let{payload:u}=d;a.isRemoteSharingActive=1===u.bStatus,a.activeNodeId=u.activeNodeID,a.activeSsrc=u.ssrc}),["".concat(FE)]:Mt((a,d)=>{let{payload:u}=d;a.isReceiveSharing=u}),["".concat(nC)]:Mt((a,d)=>{let{payload:u}=d;a.isChromeExtensionInstalled=u}),["".concat(VE)]:Mt((a,d)=>{let{payload:u}=d;a.shareDimension=mn({},u)}),["".concat(Dl)]:Mt((a,d)=>{let{payload:u}=d;a.status=u}),["".concat(rC)]:Mt((a,d)=>{let{payload:u}=d;a.ssrc=u}),["".concat(jc)]:Mt((a,d)=>{let{payload:u}=d;a.shareQuality=u}),["".concat(hs)]:Mt((a,d)=>{let{payload:u}=d;a.receivedShareDimension=mn({},u)}),["".concat(jE)]:Mt((a,d)=>{let{payload:u}=d;a.isRemoteControlApproved=u}),["".concat(Lw)]:Mt((a,d)=>{let{payload:u}=d;a.isGrabRemoteControl=u}),["".concat(QE)]:Mt((a,d)=>{let{payload:u}=d;a.isVerifiedRenderCanvasAfterFailover=u}),["".concat(HE)]:Mt((a,d)=>{let{payload:u}=d;a.isVerifiedCaptureCanvasAfterFailover=u}),["".concat(iC)]:Mt((a,d)=>{let{payload:u}=d;a.isSDKGrabControl=u}),["".concat(Bw)]:Mt((a,d)=>{let{payload:u}=d;a.isReceiveSharingFromMainSession=u}),["".concat(So)]:Mt((a,d)=>{let{payload:u}=d;a.isSharingToBreakoutRoom=u}),["".concat(Qc)]:Mt((a,d)=>{let{payload:u}=d;a.isSharingWithSecondCamera=u}),["".concat(hA)]:Mt((a,d)=>{let{payload:u}=d;a.secondCameraId=u}),["".concat(Xr)]:Mt((a,d)=>{let{payload:u}=d;a.isRequireReadReceipt=u}),["".concat(Hc)]:()=>mn(mn({},vb),{},{isVerifiedRenderCanvasAfterFailover:!1,isVerifiedCaptureCanvasAfterFailover:!1})},vb),fR=Fu(MN),Da=ko.createAgent();var LN=Object.freeze({__proto__:null,joinMeetingWelcomeEpic:a=>Mn(a,0).pipe(dr(d=>{var u;if("READY"===(null===(u=d.payload.body)||void 0===u?void 0:u.status)){const f=cr.get(ds.WebclientMeetingToken);f&&Da.joinMeeting(f)}}),ai(mt)),joinMeetingSuccessfulEpic:(a,d)=>Mn(a,4098).pipe(Hn(d),cR(u=>{let[f,A]=u;const{payload:{body:{res:S,userID:T,zoomID:R,mn:M,participantID:B,hugeBO:H,elapsed:$,disableAqos:ce,disableVqos:he,meetingtoken:ue,role:Se}}}=f,{meeting:{pingRWCTimestamp:Qe,isWebinar:He,userEmail:We,userName:et,isMeetingReset:Lt,meetingOptions:Gt,zlkJwtToken:jt,cv:Tt,apiKey:sn,zsk:hn,signatureType:An},media:{mediaConstraints:ln,assetsPath:Qt},breakoutRoom:Bn}=A;if(Bo.CONF_SUCCESS===S){const{WebclientParticipantId:_r,WebclientUserId:vt,WebclientZoomId:ut,WebclientUserEmail:Be,WebclientUserName:$e,WebclientMeetingToken:St}=ds;cr.set(vt,T,ji.SessionStorage),cr.set(ut,R,ji.SessionStorage),cr.set(_r,B,ji.SessionStorage),We&&cr.set(Be,We,ji.SessionStorage),cr.set($e,et,ji.SessionStorage),ue&&cr.set(St,ue,ji.SessionStorage),Da.sendRWGConnectionPerformance("WCL_M, JMCT(".concat(performance.now()-Qe,")")),hn&&Da.sendSdkKeyToMonitor(An,sn,T);const lt=[oa(f.payload.body),_m(performance.now())];_o.getInstance().init(),Lt&&(lt.push(sa(!1)),void 0!==ln&&void 0!==Qt&&lt.push(ls())),(jt||He)&&lt.push(gr()),Bn&&(Gt&&(lt.push(mC(H&&!0===Gt.isBO100Enabled)),lt.push(eR({isEnableBreakoutRoom:Gt.isEnableBreakoutRoom,isEnableBOBroadcast:Gt.isEnableBOBroadcast}))),Bn.currentRoom.boConfId&&lt.push(Bc()),void 0!==$&&lt.push(Fm($)));let Ut=!he;const an=!ce;return jt&&pN(Tt,"1.3.0")<0&&(Ut=!1),lt.unshift(Ia({audioQos:an,videoQos:Ut})),(Se&Rl.Owner)===Rl.Owner&&(Et(Ko,{reason:"dont support assisnt join through widget",errorCode:-1}),Da.leaveMeeting()),Et("JOIN_MEETING_SUCCESS",{meetingNumber:M}),Yn(lt)}return Bo.CONF_FAIL_CONFLOCKED===S?Et(Ko,fE(S)):Bo.CONF_FAIL_CONF_USER_FULL===S?Et(Ko,Object.assign({},fE(S),{lmUrl:f.payload.body.lmURL})):(Bo.CONF_FAIL_MEETING_OVER===S||Bo.CONF_RESULT_MMR_IB_REJECT===S||Bo.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS===S||[Bo.CONF_FAIL_HAS_BEEN_REMOVED,Bo.CONF_FAIL_WEBINAR_DENIED_EMAIL].includes(S),Et(Ko,fE(S))),Yn(IA(A,!1))})),handleMeetingAttributeChangeEpic:(a,d)=>Mn(a,gc).pipe(Hn(d),Ne(u=>{let[f,A]=u;const{payload:{body:S}}=f,{meeting:{zoomId:T,encType:R,gcmSessinKey:M}}=A;if(void 0!==S?.encryptKey&&mc.init(T,S.encryptKey,R),void 0!==S?.gatewayKey){const B=_o.getInstance(),[,H,$]=S.gatewayKey.split(".");B.sendUserNodeList([{userid:Number(H),sn:$&&Tl($)}],M)}return Et("UPDATE_MEETING_ATTRIBUTE",S),Gh(S)})),handleMeetingEndEpic:(a,d)=>Mn(a,7939).pipe(Hn(d),nr(u=>{let[f,A]=u;const{payload:{body:S}}=f;if(void 0!==S.reason){if(Uu.Reconnect===S.reason)return Et("RECONNECTING_MEETING",Fc.WaitingRoomFailover===S.subReason?{reason:aa.OnHold}:{reason:aa.Failover}),Pn(ia());Uu.KickedByHost===S.reason?Et("LEAVING_MEETING",{reason:"kicked by host"}):[Uu.EndByHost,Uu.EndByNone,Uu.EndByAdmin,Uu.EndByHostStartAnotherMeeting].includes(S.reason)?Et("LEAVING_MEETING",{reason:"ended by host"}):Uu.FreeMeetingTimeout===S.reason&&Et("LEAVING_MEETING",{reason:"free meeting ended"})}return A.meeting.isMeetingReset?mt:Yn(IA(A,!1))})),meetingFailoverEpic:(a,d)=>a.pipe(Vi("".concat(ia)),Hn(d),nr(u=>{let[,f]=u;const A=IA(f,!0);let S;if(f.meeting.zlkJwtToken){const T=function(M){if(M){const{meeting:{topic:B,passWord:H,userName:$,zlkJwtToken:ce,lang:he,cv:ue,customerKey:Se}}=M;return{topic:B,passWord:H,userName:$,zlkJwtToken:ce,lang:he,cv:ue,customerKey:Se}}return null}(f);S=Pn(I0({topic:T?.topic,password:T?.passWord,userName:T?.userName,zlk:T?.zlkJwtToken,lang:T?.lang,cv:T?.cv,customerKey:T?.customerKey})).pipe(ta(1e3))}else{const T=function(R){const{meeting:{apiKey:M,signature:B,signatureType:H,meetingNumber:$,userName:ce,lang:he,passWord:ue,userEmail:Se,sdkUrl:Qe,sdkOrigin:He,proxy:We,cv:et,ztk:Lt,zsk:Gt,tk:jt}}=R,Tt=Lt||sessionStorage.getItem(ds.WebclientZtk),sn=Gt||sessionStorage.getItem(ds.WebclientZsk);return{apiKey:M,signature:B,signatureType:H,meetingNumber:$,userName:ce,lang:he,passWord:ue,userEmail:Se,sdkUrl:Qe,sdkOrigin:He,proxy:We,cv:et,ztk:Tt,zsk:sn,tk:jt||sessionStorage.getItem(ds.WebclientTk),ulsm:sn?1:0}}(f);S=Pn(KB(T)).pipe(ta(1e3))}return Bv(Yn(A),S)})),hostChangeEpic:a=>cd(a,7940).pipe(dr(d=>{Et("MEETING_HOST_CHANGE_INDICATION",d.payload.body.bHost)}),Ne(d=>_E(d.payload.body))),cohostChangeEpic:a=>cd(a,7941).pipe(dr(d=>{Et("MEETING_COHOST_CHANGE_INDICATION",d.payload.body.bCoHost)}),Ne(d=>yw(d.payload.body))),setMeetingOptEpic:a=>cd(a,7945).pipe(dr(d=>{const{payload:{body:{opt:u}}}=d;cr.set(ds.WebclientOpt,u,ji.SessionStorage)}),ai(mt)),setMeetingOnHoldEpic:(a,d)=>Mn(a,7942).pipe(dr(u=>{const{payload:{body:{bHold:f}}}=u;cr.set(ds.WebclientIsOnHold,f?1:0,ji.SessionStorage),Et("MEETING_IN_WAITING_ROOM",f)}),Hn(d),nr(u=>{let[f,A]=u;const S=[c_(f.payload.body.bHold)];if(f.payload.body.bHold){const T=ui(A);if(T){S.push(Ew({audio:T.audio,video:T.bVideoOn,muted:T.muted}));const R=_o.getInstance();if("computer"===T.audio&&(R.leaveComputerAudio(),Da.joinOrLeaveVoip(!1)),T.bVideoOn&&R.stopCaptureVideo(),T.sharerOn&&(Da.stopSharing(T.userId),R.stopDesktopSharing(),S.push(Dl(W.ShareStatus.End))),A.video&&A.video.subscribedVideoList.length>0&&A.video.subscribedVideoList.forEach(M=>{Da.unsubscribeVideo(M)}),A.share&&A.share.isReceiveSharing){const M=A.share.activeNodeId;A.share.isRemoteControlApproved&&(Da.sharingRequestRemoteControl(M,!1),R.stopRemoteControl()),Da.unsubscribeSharing(M),R.stopRenderSharing()}}}return Yn(S)})),setMeetingDataCenterRegionEpic:a=>Mn(a,7954).pipe(Ne(d=>bw(d.payload.body))),claimHostResponseEpic:a=>Mn(a,4216).pipe(dr(d=>{Et("MEETING_CLAIM_HOST_KEY_RESPONSE",d.payload.body.bresult)}),ai(mt)),leaveMeetingEpic:(a,d)=>a.pipe(Vi("".concat(qv),"".concat(Ya)),Hn(d),nr(u=>{let[f,A]=u;return f.type==="".concat(qv)?(Da.leaveMeeting(),Et("LEAVING_MEETING",{})):f.type==="".concat(Ya)&&(Da.endMeeting(),Et("LEAVING_MEETING",{})),Yn(IA(A,!1))})),versionUpgradeEpic:a=>Mn(a,2).pipe(dr(()=>{console.warn("Upgrade to latest version to optimize meeting experience")}),ai(mt)),versionBlockEpic:a=>Mn(a,1).pipe(dr(d=>{const{payload:{body:{upgradeVersion:u}}}=d,f=fE(1e3);if(f&&f.reason){const A=f.reason.replace(/{(\d+)}/g,()=>u);f.reason=A}Et(Ko,f)}),ai(mt)),handleSharePronounChangeEpic:a=>Mn(a,4265).pipe(Ne(d=>{const{payload:{body:u}}=d,{nShareType:f}=u;return Et("SHARE_PRONOUN_TYPE_UPDATE",{userSharePronounType:f}),vE(f)})),handleMeetingTokenEpic:a=>Mn(a,4128).pipe(dr(d=>{const{payload:{body:{meetingtoken:u}}}=d,{WebclientMeetingToken:f}=ds;u&&cr.set(f,u,ji.SessionStorage)}),ai(mt))});let mR,ka,gR,xl,vu,Ll;(function(a){a[a.AttendeeToAllPanelist=1]="AttendeeToAllPanelist",a[a.PanelistToAttendee=3]="PanelistToAttendee"})(mR||(mR={})),function(a){a.Add="add",a.List="list",a.Remove="memberremove",a.rename="rename",a.update="UPDATE"}(ka||(ka={})),function(a){a.PutDownHands="putdownhands",a.LowerHand="lowerhand"}(gR||(gR={})),function(a){a.Open="open",a.Message="message",a.Error="error",a.Close="close"}(xl||(xl={}));let P_=(()=>{class a{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new a),this.xmppInstance}on(u,f){let A=this.eventHandlers.get(u);A||(A=[]),A.push(f),this.eventHandlers.set(u,A)}off(u,f){const A=this.eventHandlers.get(u);if(A){const S=A.filter(T=>T!==f);this.eventHandlers.set(u,S)}}emit(u,f){const A=this.eventHandlers.get(u);A&&A instanceof Array&&A.slice(0).forEach(S=>{try{S(f)}catch(T){console.error(T)}})}sendMessageToRwg(u){this.seq+=1;const f=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(u,{seq:f}))),f}connect(u){this.websocket=new WebSocket(u),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var u;null===(u=this.websocket)||void 0===u||u.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",u=>{this.emit(xl.Open,u)}),this.websocket.addEventListener("message",u=>{const{data:f}=u;var A;if(f instanceof ArrayBuffer)0===new Uint8Array(f)[0]&&(null===(A=this.websocket)||void 0===A||A.send(f));else try{this.emit(xl.Message,JSON.parse(f))}catch{console.warn("Unsupported format",f)}}),this.websocket.addEventListener("close",u=>{this.emit(xl.Close,u)}),this.websocket.addEventListener("error",u=>{this.emit(xl.Error,u)}))}join(u){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:u}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(u){return{seq:this.sendMessageToRwg({evt:24578,jids:u||[]})}}sendWebinarMseeage(u,f,A){return{seq:this.sendMessageToRwg({evt:24582,body:{msg:u,jid:f?[f]:[],type:A,bcm:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}})}}sendAnswer(u,f,A){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:f.jid,question_attendeename:f.displayName,question_text:f.questionText,question_id:f.questionId,question_anonymous:f.isAnonymous,question_time:f.questionTime,text:u,isPrivate:A}})}}answerOnline(u,f){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,isLiveStart:f}})}}dismissQuestion(u){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!1}})}}deleteQuestion(u){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:u,bDelete:!0}})}}deleteComment(u){return{seq:this.sendMessageToRwg({body:{comment_id:u,bDelete:!0},evt:24616})}}reopenQuestion(u){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!0},evt:24590})}}askQuestion(u,f){let A=arguments.length>2&&void 0!==arguments[2]&&arguments[2],S=arguments.length>3?arguments[3]:void 0;const T=vw();return{seq:this.sendMessageToRwg({body:{id:T,text:u,isAnonymous:A,bAllowAttendeeViewAllQuestion:S,name:f},evt:24592}),questionId:T}}upOrDownVote(u,f){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bUpVote:f},evt:24598})}}rename(u,f){return{seq:this.sendMessageToRwg({body:{jid:u,displayName:f},evt:24600})}}setSkinTome(u){return{seq:this.sendMessageToRwg({body:{skinTone:u},evt:24618})}}}return a.xmppInstance=null,a})();var BN=Object.freeze({__proto__:null,startIdleTimerEpic:(a,d)=>a.pipe(Vi("".concat(oa)),Hn(d),Un(u=>{let[,f]=u;return void 0!==f.meeting.zlkJwtToken}),Ho(()=>(vu&&vu.complete(),vu=new ht,Ll=zg(6e4).pipe(Ne(()=>performance.now())).subscribe(vu),vu.pipe(Ne(u=>gE(u)))))),terminateIdleTimerEpic:a=>a.pipe(Vi("".concat(ra))).pipe(dr(()=>{vu&&(vu.complete(),Ll.unsubscribe())}),ai(mt)),idleCheckingEpic:(a,d)=>a.pipe(Vi("".concat(gE)),Hn(d),nr(u=>{var f;let[A,S]=u;const{meeting:{idleStartTime:T,sessionIdleTimeoutMins:R,isOriginHost:M},participants:{attendeesList:B,xmppAttendeeList:H},recording:$,breakoutRoom:ce}=S,he=A.payload,ue=[];if(1===B.length&&0===H.length&&(null==ce||null===(f=ce.currentRoom)||void 0===f?void 0:f.status)!==lr.InRoom&&$?.cmrStatus!==_c.Start)if(T){const Se=M&&G0(B[0].userRole)?R:40;he-T>60*Se*1e3&&(console.warn("No active for ".concat(Se," minutes, will end the session.")),ue.push(Ya()),pu(500).subscribe(()=>{H0()}))}else ue.push(Wh(he));else ue.push(Wh(void 0));return Yn(ue)})),resetIdleStartTimeEpic:(a,d)=>a.pipe(Vi("".concat(Is)),Un(u=>[Ts,gc].includes(u.payload.evt)&&void 0!==d.value.meeting.idleStartTime),po(Ss),nr(()=>{var u;const{participants:{attendeesList:f,xmppAttendeeList:A},recording:S,breakoutRoom:T}=d.value,R=[];return(f.length>1||A.length>0||S?.cmrStatus===_c.Start||(null==T||null===(u=T.currentRoom)||void 0===u?void 0:u.status)===lr.InRoom)&&R.push(Wh(void 0)),Yn(R)})),resetIdleStartTimeAfterLeaveMeetingEpic:a=>a.pipe(Vi("".concat(qv),"".concat(Ya)),pc(Wh(void 0)))});let Jc=null;var _R=Object.freeze({__proto__:null,startStayAwakeEpic:(a,d)=>a.pipe(Vi("".concat(oa)),Hn(d),Un(u=>{let[,f]=u;return!!f.meeting.stayAwake}),dr(L(function*(){try{Jc&&Jc.release().then(()=>{Jc=null}),Jc=yield navigator.wakeLock.request("screen"),Jc.addEventListener("release",()=>{})}catch{}})),Ho(()=>Ds(document,"visibilitychange").pipe(nr(L(function*(){return"visible"===document.visibilityState?(Jc&&Jc.release().then(()=>{Jc=null}),Jc=yield navigator.wakeLock.request("screen")):Jc&&Jc.release().then(()=>{Jc=null}),mt}))))),cancelStayAwakeEpic:a=>a.pipe(Vi("".concat(ra))).pipe(dr(()=>{Jc&&Jc.release().then(()=>{Jc=null})}),ai(mt))}),vR=typeof window<"u"&&window,$B=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,AR=typeof global<"u"&&global,Ju=vR||AR||$B;function yR(a,d){return void 0===d&&(d=null),new Ef({method:"GET",url:a,headers:d})}function FN(a,d,u){return new Ef({method:"POST",url:a,body:d,headers:u})}function ER(a,d){return new Ef({method:"DELETE",url:a,headers:d})}function UN(a,d,u){return new Ef({method:"PUT",url:a,body:d,headers:u})}function VN(a,d,u){return new Ef({method:"PATCH",url:a,body:d,headers:u})}!function(){if(!Ju)throw new Error("RxJS could not find any global context (window, self, global)")}();var Au=Ne(function(a,d){return a.response});function jN(a,d){return Au(new Ef({method:"GET",url:a,responseType:"json",headers:d}))}var Ef=function(a){function d(f){var A=a.call(this)||this,S={async:!0,createXHR:function(){return this.crossDomain?function(){if(Ju.XMLHttpRequest)return new Ju.XMLHttpRequest;if(Ju.XDomainRequest)return new Ju.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(Ju.XMLHttpRequest)return new Ju.XMLHttpRequest;var R=void 0;try{for(var M=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],B=0;B<3;B++)try{if(new Ju.ActiveXObject(R=M[B]))break}catch{}return new Ju.ActiveXObject(R)}catch{throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof f)S.url=f;else for(var T in f)f.hasOwnProperty(T)&&(S[T]=f[T]);return A.request=S,A}var u;return te(d,a),d.prototype._subscribe=function(f){return new bR(f,this.request)},d.create=((u=function(f){return new d(f)}).get=yR,u.post=FN,u.delete=ER,u.put=UN,u.patch=VN,u.getJSON=jN,u),d}(ze),bR=function(a){function d(u,f){var A=a.call(this,u)||this;A.request=f,A.done=!1;var S=f.headers=f.headers||{};return f.crossDomain||A.getHeader(S,"X-Requested-With")||(S["X-Requested-With"]="XMLHttpRequest"),A.getHeader(S,"Content-Type")||Ju.FormData&&f.body instanceof Ju.FormData||void 0===f.body||(S["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),f.body=A.serializeBody(f.body,A.getHeader(f.headers,"Content-Type")),A.send(),A}return te(d,a),d.prototype.next=function(u){this.done=!0;var f,A=this.xhr,S=this.request,T=this.destination;try{f=new QN(u,A,S)}catch(R){return T.error(R)}T.next(f)},d.prototype.send=function(){var u=this.request,f=this.request,A=f.user,S=f.method,T=f.url,R=f.async,M=f.password,B=f.headers,H=f.body;try{var $=this.xhr=u.createXHR();this.setupEvents($,u),A?$.open(S,T,R,A,M):$.open(S,T,R),R&&($.timeout=u.timeout,$.responseType=u.responseType),"withCredentials"in $&&($.withCredentials=!!u.withCredentials),this.setHeaders($,B),H?$.send(H):$.send()}catch(ce){this.error(ce)}},d.prototype.serializeBody=function(u,f){if(!u||"string"==typeof u||Ju.FormData&&u instanceof Ju.FormData)return u;if(f){var A=f.indexOf(";");-1!==A&&(f=f.substring(0,A))}switch(f){case"application/x-www-form-urlencoded":return Object.keys(u).map(function(S){return encodeURIComponent(S)+"="+encodeURIComponent(u[S])}).join("&");case"application/json":return JSON.stringify(u);default:return u}},d.prototype.setHeaders=function(u,f){for(var A in f)f.hasOwnProperty(A)&&u.setRequestHeader(A,f[A])},d.prototype.getHeader=function(u,f){for(var A in u)if(A.toLowerCase()===f.toLowerCase())return u[A]},d.prototype.setupEvents=function(u,f){var A,S,T=f.progressSubscriber;function R(H){var $,he=R.subscriber,ue=R.progressSubscriber,Se=R.request;ue&&ue.error(H);try{$=new PC(this,Se)}catch(Qe){$=Qe}he.error($)}function M(H){}function B(H){var ce=B.subscriber,he=B.progressSubscriber,ue=B.request;if(4===this.readyState){var Se=1223===this.status?204:this.status;if(0===Se&&(Se=("text"===this.responseType?this.response||this.responseText:this.response)?200:0),Se<400)he&&he.complete(),ce.next(H),ce.complete();else{he&&he.error(H);var He=void 0;try{He=new NC("ajax error "+Se,this,ue)}catch(We){He=We}ce.error(He)}}}u.ontimeout=R,R.request=f,R.subscriber=this,R.progressSubscriber=T,u.upload&&"withCredentials"in u&&(T&&(A=function(H){A.progressSubscriber.next(H)},Ju.XDomainRequest?u.onprogress=A:u.upload.onprogress=A,A.progressSubscriber=T),u.onerror=S=function(H){var $,he=S.progressSubscriber,ue=S.subscriber,Se=S.request;he&&he.error(H);try{$=new NC("ajax error",this,Se)}catch(Qe){$=Qe}ue.error($)},S.request=f,S.subscriber=this,S.progressSubscriber=T),u.onreadystatechange=M,M.subscriber=this,M.progressSubscriber=T,M.request=f,u.onload=B,B.subscriber=this,B.progressSubscriber=T,B.request=f},d.prototype.unsubscribe=function(){var f=this.xhr;!this.done&&f&&4!==f.readyState&&"function"==typeof f.abort&&f.abort(),a.prototype.unsubscribe.call(this)},d}(re),QN=function(a,d,u){this.originalEvent=a,this.xhr=d,this.request=u,this.status=d.status,this.responseType=d.responseType||u.responseType,this.response=SR(this.responseType,d)},NC=function(){function a(d,u,f){return Error.call(this),this.message=d,this.name="AjaxError",this.xhr=u,this.request=f,this.status=u.status,this.responseType=u.responseType||f.responseType,this.response=SR(this.responseType,u),this}return a.prototype=Object.create(Error.prototype),a}();function SR(a,d){switch(a){case"json":return"response"in(u=d)?u.responseType?u.response:JSON.parse(u.response||u.responseText||"null"):JSON.parse(u.responseText||"null");case"xml":return d.responseXML;default:return"response"in d?d.response:d.responseText}var u}var PC=function(a,d){return NC.call(this,"ajax timeout",a,d),this.name="AjaxTimeoutError",this},MC=Ef.create;const xC=a=>{const{meeting:{encryptedRWC:d,encryptedGEORWC:u,discardedRwcList:f,meetingOptions:A}}=a;let S=[];return A?.isEnableGeoFenceRWC&&u&&u?.length>0?S=u.filter(T=>!f.includes(T.rwc)).reduce((T,R)=>{const{dl:M,rwc:B,rwcToken:H}=R,$=T.find(ce=>ce.dl===M);if($)$.items.push({rwc:B,rwcToken:H});else{const ce={dl:M,items:[]};ce.items.push({rwc:B,rwcToken:H}),T.push(ce)}return T},[]):d&&(S=[{dl:0,items:Object.keys(d).map(T=>({rwc:T,rwcToken:d[T]}))}]),S},Ab=a=>Zs(...a.map(d=>0===d.dl?Yn(d.items):pu(d.dl).pipe(nr(()=>Yn(d.items))))),ti=(a,d)=>a.pipe(Vi("".concat(Yv)),Hn(d),Un(u=>{let[,f]=u;return void 0!==f.meeting.encryptedRWC||void 0!==f.meeting.encryptedGEORWC&&f.meeting.encryptedGEORWC.length>0}),Ho(u=>{let[,f]=u;const{meeting:{ts:A,auth:S,meetingNumber:T,meetingOptions:R},breakoutRoom:M}=f,B=R?.isEnableGeoFenceRWC,H=xC(f);if(H.length>0){const $={serversLength:H.reduce((he,ue)=>he+ue.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0,retryCounts:0};let ce;return B&&(ce=new Xe,Ab(H).subscribe(he=>{var ue;return null===(ue=ce)||void 0===ue?void 0:ue.next(he)})),(B?ce:Ab(H)).pipe(Jg(()=>{const{meeting:{meetingStatus:he}}=d.value,ue=he===vs.Initial&&$.pingFailedServerList.length<$.serversLength&&$.serversLength>0;return!ue&&ce&&ce.complete(),ue}),dr(()=>{if($.pingRwcServerCounts=$.pingRwcServerCounts+1,B&&$.pingRwcServerCounts===$.serversLength){const he=1e3*Math.floor(5*Math.pow(2,$.retryCounts));$.retryCounts=$.retryCounts+1,pu(he).pipe(Ne(()=>{const ue=xC(d.value);return Object.assign($,{serversLength:ue.reduce((Se,Qe)=>Se+Qe.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0}),ue})).subscribe(ue=>{Ab(ue).subscribe(Se=>{ce.next(Se)})})}}),nr(he=>{const{rwc:ue,rwcToken:Se}=he,Qe=((He,We,et,Lt,Gt,jt)=>{const Tt={ts:Lt,auth:Gt,rwcToken:et,dmz:1};return jt&&Object.assign(Tt,{confID:jt}),"https://".concat(He,"/wc/ping/").concat(We,"?").concat(new URLSearchParams(Tt).toString())})(ue,T,Se,A,S,M?.currentRoom.boConfId);return MC(Qe).pipe(nr(He=>{let We={};return We=He.response?mn(mn({},He.response),{},{rwc:ue,fromNginx:!1}):{rwc:ue,rwg:ue,rwcToken:Se,fromNginx:!0},Yn([_s(We),Kv()])}),oE(()=>{const{pingFailedServerList:He,serversLength:We}=$;return He.push(Qe),He.length===We&&(B&&ce&&ce.complete(),Et(Ko,{reason:"connection error",errorCode:-3e3})),mt}))}),Gp(Aw(performance.now())))}return mt}));let Cn=0;const LC={meetingStatus:vs.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,enableAudioQos:!0,enableVideoQos:!0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",isAudioBridgeEnabled:!0,discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},gatewayUserList:[]},CR=na({["".concat(gm)]:Mt((a,d)=>{let{payload:u}=d;u.customerKey=a.customerKey||u.customerKey||"",Object.assign(a,u),a.meetingStatus=vs.Initial}),["".concat(fN)]:Mt((a,d)=>{let{payload:u}=d;a.isWindowOpen=u}),["".concat(T0)]:Mt((a,d)=>{let{payload:u}=d;a.signatureType=u.useSDK?"sdk":"api",a.apiKey=u.apiKey,a.signature=u.signature,a.lang=u.language}),["".concat(a_)]:Mt((a,d)=>{let{payload:u}=d;a.ztk=u}),["".concat(mN)]:Mt((a,d)=>{let{payload:u}=d;a.zsk=u}),["".concat(w0)]:Mt((a,d)=>{let{payload:u}=d;a.tk=u.tk,a.mtkGuid=u.mtkGuid}),["".concat(Aw)]:Mt((a,d)=>{let{payload:u}=d;a.pingRWCTimestamp=u}),["".concat(oa)]:Mt((a,d)=>{let{payload:u}=d;a.confId=u.confID,a.conId=u.conID,a.e2eEncrypt=u.e2eEncrypt,a.meetingNumber=parseInt(u.mn,10),a.zoomId=u.zoomID,a.meetingStatus=vs.Joined,a.jid=u.jid,a.xtoken=u.xtoken,a.groups=u.groups,a.svcUrl=u.svcUrl,a.encType=u.encType,a.userGUID=u.userGUID,a.userId=u.userID,a.role=u.role,a.participantID=u.participantID,a.reportDomain=u.reportDomain}),["".concat(Gh)]:Mt((a,d)=>{let{payload:u}=d;if(u.gatewayUser){var f;const{userId:S,sn:T}=u.gatewayUser,R=null===(f=a.gatewayUserList)||void 0===f?void 0:f.find(M=>M.userId===S);var A;R?R.sn=T:null===(A=a.gatewayUserList)||void 0===A||A.push(u.gatewayUser)}else Object.assign(a,u)}),["".concat(_E)]:Mt((a,d)=>{let{payload:u}=d;a.isHost=u}),["".concat(yw)]:Mt((a,d)=>{let{payload:u}=d;a.isCoHost=u}),["".concat(c_)]:Mt((a,d)=>{let{payload:u}=d;a.isOnHold=u}),["".concat(sa)]:Mt((a,d)=>{let{payload:u}=d;a.isMeetingReset=u}),["".concat(Ew)]:Mt((a,d)=>{let{payload:u}=d;a.audioVideoBeforeOnHold=u}),["".concat(gN)]:Mt((a,d)=>{let{payload:u}=d;a.currentUserAudioBeforeReset=u}),["".concat(Jv)]:Mt((a,d)=>{let{payload:u}=d;a.isCurrentUserMutedBeforeReset=u}),["".concat(qa)]:Mt((a,d)=>{let{payload:u}=d;a.meetingStatus=u}),["".concat(bw)]:Mt((a,d)=>{let{payload:u}=d;a.region=u.region,a.network=u.network}),["".concat(Sw)]:Mt((a,d)=>{let{payload:u}=d;a.isCurrentUserStartVideoBeforeReset=u}),["".concat(_m)]:Mt((a,d)=>{let{payload:u}=d;a.joinMeetingTimeStamp=u}),["".concat(Ia)]:Mt((a,d)=>{let{payload:u}=d;a.enableAudioQos=u.audioQos,a.enableVideoQos=u.videoQos}),["".concat(_N)]:Mt((a,d)=>{let{payload:u}=d;a.activeAppInfo=u}),["".concat(Wh)]:Mt((a,d)=>{let{payload:u}=d;a.idleStartTime=u}),["".concat(Cw)]:Mt((a,d)=>{let{payload:u}=d;a.sessionIdleTimeoutMins=u}),["".concat(Kh)]:Mt((a,d)=>{let{payload:u}=d;a.isAudioBridgeEnabled=u}),["".concat(Xv)]:Mt((a,d)=>{var u,f;let{payload:A}=d;const S=null===(u=a.encryptedGEORWC)||void 0===u||null===(f=u.find(R=>R.rwc===A))||void 0===f?void 0:f.dc;if(S){var T;const R=null===(T=a.encryptedGEORWC)||void 0===T?void 0:T.filter(M=>M.dc===S);R&&a.discardedRwcList.some(M=>R?.findIndex(B=>B.rwc===M)>=0)&&a.discardedRwcList.push(...R.map(M=>M.rwc)),a.discardedRwcList.push(A)}}),["".concat(vE)]:Mt((a,d)=>{let{payload:u}=d;a.sharePronounType=u}),["".concat(ci)]:Mt((a,d)=>{let{payload:u}=d;a.stayAwake=u}),["".concat(R0)]:Mt((a,d)=>{let{payload:u}=d;Object.assign(a,mn(mn({},LC),{},{isMeetingReset:!0,currentUserAudioBeforeReset:a.audioVideoBeforeOnHold?a.audioVideoBeforeOnHold.audio:u.audio,isCurrentUserMutedBeforeReset:a.audioVideoBeforeOnHold?a.audioVideoBeforeOnHold.muted:u.muted,isCurrentUserStartVideoBeforeReset:a.audioVideoBeforeOnHold?a.audioVideoBeforeOnHold.video:u.video,apiKey:a.apiKey,signatureType:a.signatureType,signature:a.signature,meetingNumber:a.meetingNumber,userName:a.userName,lang:a.lang,passWord:a.passWord,userEmail:a.userEmail,sdkUrl:a.sdkUrl,sdkOrigin:a.sdkOrigin,proxy:1,cv:a.cv,zsk:a.zsk,ztk:a.ztk,idleStartTime:a.idleStartTime,sessionIdleTimeoutMins:a.sessionIdleTimeoutMins,customerKey:a.customerKey,stayAwake:a.stayAwake}))})},LC),BC=Fu(LN,BN,_R,{meetingInfoEpic:(a,d)=>a.pipe(Vi("".concat(I0)),Ho(u=>{const f=Object.assign({},u.payload,{password:Hs(u.payload.password),topic:Hs(u.payload.topic)}),{videoSDKUrl:A}={meetingSDKUrl:"https://".concat(no,"/api/v1/wc/info"),videoSDKUrl:"https://".concat(no,"/wc/lsdk")};return function(S,T){let R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"zoomsdkjsonpcallback";return new ze(M=>{Cn++;const B="".concat(R).concat(Cn),H=document.createElement("script");Object.keys(T).forEach($=>null==T[$]&&delete T[$]),H.src="".concat(S,"?").concat(new URLSearchParams(Object.assign(T,{callback:B})).toString()),H.async=!0,H.onerror=$=>M.error($),document.getElementsByTagName("head")[0].appendChild(H),window[B]=$=>{H.parentNode&&H.parentNode.removeChild(H),delete window[B],M.next($),M.complete()}})}(A,f).pipe(oE(S=>Pn({status:!1,result:S.toString(),errorCode:-3e3})),nr(S=>{const[T,R]=v0(Pn(S),M=>!0===M.status&&void 0!==M.result);return R.subscribe(M=>{M.state||(3e3===M.errorCode&&"Meeting password is incorrect"===M.errorMessage?Et(Ko,pE(3004)):3e3===M.errorCode&&"The role type error"===M.errorMessage?Et(Ko,pE(3010)):-3e3===M.errorCode?Et(Ko,{reason:"connection error"}):3e3===M.errorCode?Et(Ko,{reason:M.errorMessage,errorCode:200}):300===M.errorCode?Et(Ko,{reason:"This account does not exist or does not belong to you",errorCode:200}):124===M.errorCode&&"Parse lite sdk topic and pwd fail"===M.errorMessage?Et(Ko,{reason:"Parse topic and pwd fail",errorCode:200}):124===M.errorCode&&"The java web token is expired or more than 2 days or ineffective."===M.errorMessage?Et(Ko,{reason:"The token is expired or more than 2 days or ineffective.",errorCode:200}):124===M.errorCode&&Et(Ko,{reason:"Verify JWT failed",errorCode:200}))}),T.pipe(aR(M=>{if(!0===M.status){const{result:{mid:B,websdkClientFeatureOptions:H}}=M;cr.init(B);const $=((ue,Se)=>{if(ue.result){const{result:{mn:Qe,ts:He,auth:We,track_auth:et,mid:Lt,tid:Gt,encryptedRWC:jt,encryptedGEORWC:Tt,user_identity:sn,meetingOptions:hn,can_recording:An,wcXMPPConfig:ln,call_out_country_json:Qt,isOriginalHost:Bn,support_call_out:_r,liveTranscription:vt}}=ue,{lang:ut,password:Be,topic:$e,zlk:St,cv:lt,userName:Ut}=Se;return{meetingNumber:Qe,meetingId:Lt,tid:Gt,ts:He,auth:We,passWord:Be,trackAuth:et,customerKey:sn,encryptedRWC:JSON.parse(jt||"{}"),encryptedGEORWC:JSON.parse(Tt||"{}"),meetingOptions:JSON.parse(hn||"{}"),recordingEnable:"1"===An,topic:$e,userName:cr.get(ds.WebclientUserName)||Ut,cv:lt,zlkJwtToken:St,xmppConfig:JSON.parse(ln||"{}"),callOutCountry:JSON.parse(Qt||"{}"),lang:ut,isOriginHost:Bn,isSupportCallOut:"1"===_r,liveTranscription:JSON.parse(vt||"{}")}}return ue})(M,u.payload),ce=[Pn(gm($)),Zd(ti,d,Yv())],he=(ue=>{const Se={["".concat(vm.AudioBridgeEnable)]:{mask:240,action:Kh}},Qe=[];if(ue){const He=ue.split("").reverse();Object.keys(vm).filter(We=>/\d(,\d)?/.test(vm[We])).forEach(We=>{const et=vm[We],Lt=et.split(",").map(Tt=>He[Number(Tt)-1]).reverse().join(""),Gt=parseInt(Lt,16),jt=Se[et];jt&&Qe.push(Pn(jt.action((Gt&jt.mask)>0)))})}return Qe})(H);return he.length>0&&ce.unshift(...he),Bv(...ce)}}))}))})),pingRWCEpic:ti});var FC,IR=fc(function(a,d){var u;u=function(){function f(){for(var S=0,T={};S<arguments.length;S++){var R=arguments[S];for(var M in R)T[M]=R[M]}return T}function A(S){return S.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function S(T){function R(){}function M(H,$,ce){if(typeof document<"u"){"number"==typeof(ce=f({path:"/"},R.defaults,ce)).expires&&(ce.expires=new Date(1*new Date+864e5*ce.expires)),ce.expires=ce.expires?ce.expires.toUTCString():"";try{var he=JSON.stringify($);/^[\{\[]/.test(he)&&($=he)}catch{}$=T.write?T.write($,H):encodeURIComponent(String($)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),H=encodeURIComponent(String(H)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var ue="";for(var Se in ce)ce[Se]&&(ue+="; "+Se,!0!==ce[Se]&&(ue+="="+ce[Se].split(";")[0]));return document.cookie=H+"="+$+ue}}function B(H,$){if(typeof document<"u"){for(var ce={},he=document.cookie?document.cookie.split("; "):[],ue=0;ue<he.length;ue++){var Se=he[ue].split("="),Qe=Se.slice(1).join("=");$||'"'!==Qe.charAt(0)||(Qe=Qe.slice(1,-1));try{var He=A(Se[0]);if(Qe=(T.read||T)(Qe,He)||A(Qe),$)try{Qe=JSON.parse(Qe)}catch{}if(ce[He]=Qe,H===He)break}catch{}}return H?ce[H]:ce}}return R.set=M,R.get=function(H){return B(H,!1)},R.getJSON=function(H){return B(H,!0)},R.remove=function(H,$){M(H,"",f($,{expires:-1}))},R.defaults={},R.withConverter=S,R}(function(){})},a.exports=u()}),TR=new Uint8Array(16);function Gm(){if(!FC&&!(FC=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return FC(TR)}var yb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function HN(a){return"string"==typeof a&&yb.test(a)}for(var yc=[],Eb=0;Eb<256;++Eb)yc.push((Eb+256).toString(16).substr(1));function wR(a,d,u){var f=(a=a||{}).random||(a.rng||Gm)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,d){u=u||0;for(var A=0;A<16;++A)d[u+A]=f[A];return d}return function(S){var T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,R=(yc[S[T+0]]+yc[S[T+1]]+yc[S[T+2]]+yc[S[T+3]]+"-"+yc[S[T+4]]+yc[S[T+5]]+"-"+yc[S[T+6]]+yc[S[T+7]]+"-"+yc[S[T+8]]+yc[S[T+9]]+"-"+yc[S[T+10]]+yc[S[T+11]]+yc[S[T+12]]+yc[S[T+13]]+yc[S[T+14]]+yc[S[T+15]]).toLowerCase();if(!HN(R))throw TypeError("Stringified UUID is invalid");return R}(f)}let Ec;!function(a){a[a.Unknown=0]="Unknown",a[a.Windows=1]="Windows",a[a.Mac=2]="Mac",a[a.Pad=3]="Pad",a[a.Mobile=4]="Mobile",a[a.CallIn=5]="CallIn",a[a.Linux=6]="Linux",a[a.WebClient=7]="WebClient",a[a.ChromeOs=8]="ChromeOs"}(Ec||(Ec={}));const{WebclientIsOnHold:GN,WebclientOpt:UC,WebclientParticipantId:VC,WebclientZoomId:WN,WebclientWebinarToken:jC,WebclientMeetingToken:RR}=ds,{WebclientDeviceId:KN}=N0;function OR(a){let{retryCount:d,rwgServerList:u,userName:f,auth:A,trackAuth:S,meetingId:T,customerKey:R,tid:M,lang:B,ts:H,bid:$,botk:ce,confID:he,isAudioBridgeEnabled:ue}=a;const Se=IR.get("_zm_mtk_guid");let Qe=cr.get(KN);if(Qe||(Qe=wR(),cr.set(KN,Qe,ji.LocalStorage)),u.length>d){const He=Ta(),We=u[d],et={dn2:Hs(f),auth:A,browser:He,trackAuth:S,mid:T,tid:M,lang:B,ts:H,"ZM-CID":Qe,_ZM_MTG_TRACK_ID:Se||"",customer_key:Hs(R),cfs:0};We.rwcAuth?Object.assign(et,{rwcAuth:We.rwcAuth}):We.rwcToken&&Object.assign(et,{rwcToken:We.rwcToken});const Lt=Am()?1:wa()||Wo()?2:0;return Object.assign(et,{as_type:Lt}),[{key:UC,queryKey:"opt"},{key:VC,queryKey:"participantID"},{key:WN,queryKey:"zoomid"}].forEach(Gt=>{const jt=cr.get(Gt.key);void 0!==jt&&(et[Gt.queryKey]=jt)}),$&&ce&&he&&Object.assign(et,{bid:Hs($),botk:ce,confID:he}),cr.get(RR)&&Object.assign(et,{isdj:1}),ld()&&(Object.assign(et,{from:Em()?"android":"ios"}),ue&&Object.assign(et,{useABAudio:1})),Object.assign(et,{clientCaps:lA.SendMeetingTokenSeparately}),{queryObject:mn({},et),rwgServer:We}}return null}const Wm=ko.createAgent();let kA;var QC=Object.freeze({__proto__:null,connectZoomSocketEpic:(a,d)=>a.pipe(Vi("".concat(Kv)),Hn(d),Un(u=>{let[,f]=u;return f.socket.zoomSocketStatus===mi.Closed}),Ho(u=>{let[,f]=u;const{socket:{retryCount:A,rwgServerList:S},meeting:T,breakoutRoom:R}=f;let M,B=mn(mn({},T),{},{retryCount:A,rwgServerList:S});if(R&&R.currentRoom.status===lr.Joining){const{currentRoom:{boId:$,boConfId:ce,boToken:he}}=R;B=mn(mn({},B),{},{bid:$,botk:he,confID:ce})}if(M=T.zlkJwtToken?function($){const ce=OR($);if(ce){const{queryObject:he,rwgServer:ue}=ce,{topic:Se,cv:Qe,zlkJwtToken:He,meetingNumber:We,passWord:et}=$;return Object.assign(he,{topic:Hs(Se),iccv:Qe,zlkJwtToken:He}),""!==et&&Object.assign(he,{mpwd:Hs(et)}),"wss://".concat(ue.rwg,"/instantsdk/").concat(We,"?").concat(new URLSearchParams(he).toString())}return null}(B):function($){const ce=OR($);if(ce){const{queryObject:he,rwgServer:ue}=ce,{signatureType:Se,userEmail:Qe,ztk:He,tk:We,cv:et,zsk:Lt,sign:Gt,meetingNumber:jt,isHost:Tt,isOriginHost:sn,passWord:hn}=$;return Object.assign(he,{signType:Se,email:Qe,zak:He||"",tk:We||"",jscv:et}),Tt&&sn||""===hn||Object.assign(he,{mpwd:hn}),sessionStorage.getItem(ds.WebclientZsk)||Lt?Object.assign(he,{zak:Lt}):Object.assign(he,{sign:Gt}),[{key:GN,queryKey:"cfs"},{key:jC,queryKey:"tk"}].forEach(An=>{const ln=cr.get(An.key);void 0!==ln&&(he[An.queryKey]=ln)}),"wss://".concat(ue.rwg,"/wc/api/").concat(jt,"?").concat(new URLSearchParams(he).toString())}return null}(B),M){const $=(Wm.connect(M),kA=new ht,Yd(ce=>Wm.on(wl.Message,ce),ce=>Wm.off(wl.Message,ce),ce=>ce.data).subscribe(kA),kA);return Zs($.pipe(Un(ce=>"string"==typeof ce),Ne(ce=>JSON.parse(ce)),IC(),Ml(ce=>{if(0!==ce.evt||!ce.body||"invalid parameters!"!==ce.body.test)return Is(ce);Et(Ko,pE(dE.INVALID_PARAMETER))}),Gp(fi(mi.Connecting))),$.pipe(Un(ce=>ce instanceof ArrayBuffer),Ne(ce=>Lc(ce))))}return mt})),connectedZoomSocketEpic:(a,d)=>a.pipe(Vi("".concat(Kv)),Hn(d),Un(u=>{let[,f]=u;return f.socket.zoomSocketStatus===mi.Closed}),Ho(()=>{const[u,f,A]=[wl.Open,wl.Close,wl.Error].map(S=>Yd(T=>Wm.on(S,T),T=>Wm.on(S,T)));return Zs(u.pipe(nr(()=>Zs(Pn(fi(mi.Connected)),pu(6e4).pipe(Hn(d),Un(S=>{let[,T]=S;return T.meeting.meetingStatus===vs.Initial&&!T.meeting.isMeetingReset}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia())))))),f.pipe(Hn(d),Un(S=>{let[,T]=S;return T.socket.zoomSocketStatus!==mi.Closed&&T.meeting.meetingStatus===vs.Joined&&!T.meeting.isMeetingReset}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))),A.pipe(Hn(d),nr(S=>{let[,T]=S;const{meeting:{meetingStatus:R,isMeetingReset:M},socket:{rwgServerList:B,retryCount:H}}=T,$=[];if(R===vs.Initial&&null!=B&&B.length){const ce=B[H];return pu(5e3).pipe(Un(()=>d.value.meeting.meetingStatus===vs.Initial),nr(()=>{const{socket:{rwgServerList:he,retryCount:ue}}=d.value,Se=[];return he.length>ue+1?Se.push(Bu(ue+1),ra({retry:!0})):(Et(Ko,{reason:"connection error",errorCode:-3e3}),Se.push(...IA(d.value))),Yn(Se)}),Gp(Xv(ce?.rwc)))}return M||R!==vs.Joined||(Et("RECONNECTING_MEETING",{reason:aa.Failover}),$.push(ia())),Yn($)})))})),disconnectZoomSocketEpic:(a,d)=>a.pipe(Vi("".concat(ra)),Ho(u=>u.payload&&u.payload.retry?Pn(Kv()).pipe(ta(1e3),Gp(fi(mi.Closed))):Pn(fi(mi.Closed))),ta(100),dr(()=>{var u;d.value.socket.zoomSocketStatus===mi.Closed&&(Wm.close(),null===(u=kA)||void 0===u||u.complete())}))});const Xu=P_.getInstance();let M_;var NA=Object.freeze({__proto__:null,connectXmppSocketEpic:(a,d)=>a.pipe(Vi("".concat(gr)),Hn(d),Un(u=>{let[,f]=u;return"closed"===f.socket.xmppSocketStatus}),Ho(u=>{let[,f]=u;const{meeting:{svcUrl:A,meetingNumber:S,conId:T}}=f;return(R=>(Xu.connect(R),M_=new ht,Yd(M=>Xu.on(xl.Message,M),M=>Xu.off(xl.Message,M)).subscribe(M_),M_))((R=A,M=S,B=T,"wss://".concat(R,"/wc/media/").concat(M,"?type=x&cid=").concat(B))).pipe(Un(R=>void 0!==R?.evt),Ne(R=>ad(R)),Gp(Xd(mi.Connecting)));var R,M,B})),connectedXmppSocketEpic:(a,d)=>a.pipe(Vi("".concat(gr)),Ho(()=>{const[u,f,A]=[xl.Open,xl.Close,xl.Error].map(S=>Yd(T=>Xu.on(S,T),T=>Xu.on(S,T)));return Zs(u.pipe(dr(()=>{const S=Wo()&&Zv()?11:10;Xu.join(S)}),pc(Xd(mi.Connected))),f.pipe(ta(1e3),Hn(d),Un(S=>{let[,T]=S;return"closed"!==T.socket.xmppSocketStatus&&T.meeting.meetingStatus===vs.Joined&&!T.meeting.isMeetingReset}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))),A.pipe(ta(1e3),Hn(d),Un(S=>{let[,T]=S;return"closed"!==T.socket.xmppSocketStatus&&T.meeting.meetingStatus===vs.Joined&&!T.meeting.isMeetingReset}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))))})),disconnectCmdChannelSocketEpic:a=>a.pipe(Vi("".concat(eo)),pc(Xd(mi.Closed)),ta(100),dr(()=>{var d;Xu.close(),null===(d=M_)||void 0===d||d.complete()}))});const dp=oA.getInstance();let bb;var Sb=Object.freeze({__proto__:null,connectMainSessionSocketEpic:(a,d)=>a.pipe(Vi("".concat(Bc)),Hn(d),Un(u=>{let[,f]=u;return"closed"===f.socket.mainSessionSocketStatus}),Ho(u=>{let[,f]=u;const{meeting:{svcUrl:A,meetingNumber:S,conId:T}}=f;return(R=>(dp.connect(R),bb=new ht,Yd(M=>dp.on(wl.Message,M),M=>dp.off(wl.Message,M)).pipe(Ne(M=>M.data)).subscribe(bb),bb))((R=A,M=S,B=T,"wss://".concat(R,"/wc/media/").concat(M,"?type=m&cid=").concat(B,"&mode=2"))).pipe(Ne(R=>JSON.parse(R)),Un(R=>0!==R.evt),IC(),Ne(R=>or(R)),Gp(ks(mi.Connecting)));var R,M,B})),connectedMainSessionSocketEpic:(a,d)=>a.pipe(Vi("".concat(Bc)),Ho(()=>{const[u,f,A]=[wl.Open,wl.Close,wl.Error].map(S=>Yd(T=>dp.on(S,T),T=>dp.on(S,T)));return Zs(u.pipe(pc(ks(mi.Connected))),f.pipe(Hn(d),Un(S=>{let[,T]=S;return"closed"!==T.socket.zoomSocketStatus&&T.meeting.meetingStatus===vs.Joined}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))),A.pipe(Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))))})),disconnectMainSessionSocketEpic:a=>a.pipe(Vi("".concat(Ca)),pc(ks(mi.Closed)),dr(()=>{var d;dp.close(),null===(d=bb)||void 0===d||d.complete()}))});const Cb={zoomSocketStatus:mi.Closed,xmppSocketStatus:mi.Closed,mainSessionSocketStatus:mi.Closed,retryCount:0,rwgServerList:[]},Km=na({["".concat(fi)]:Mt((a,d)=>{let{payload:u}=d;a.zoomSocketStatus=u}),["".concat(_s)]:Mt((a,d)=>{let{payload:u}=d;const{rwgServerList:f}=a;f.find(A=>A.rwg===u.rwg)||f.push(u)}),["".concat(Bu)]:Mt((a,d)=>{let{payload:u}=d;a.retryCount=u}),["".concat(Xd)]:Mt((a,d)=>{let{payload:u}=d;a.xmppSocketStatus=u}),["".concat(ks)]:Mt((a,d)=>{let{payload:u}=d;a.mainSessionSocketStatus=u}),["".concat(dm)]:()=>Cb},Cb),DR=Fu(QC,NA,Sb),kR={id:"userId",type:a=>Nm(a)?{userType:a,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:a},role:a=>({userRole:a,isHost:G0(a)}),dn2:a=>({displayName:Hh(a)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:a=>({bLocalRecord:1===a}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT"},HC=a=>{const d={};return["add","remove","update"].forEach(u=>{null!=a[u]&&(d[u]=a[u].reduce((f,A)=>{const S=Object.keys(A).reduce((R,M)=>{const B=kR[M];return"function"==typeof B?Object.assign(R,B(A[M])):"string"==typeof B?R[B]=A[M]:R[M]=A[M],R},{}),T=f.find(R=>R.userId===S.userId);return void 0!==T?Object.assign(T,S):f.push(S),f},[]))}),d},NR={name:"displayName",node:a=>({userId:Number(a)}),role:a=>({userRole:Number(a)})},GC=a=>Object.keys(a).reduce((d,u)=>{const f=NR[u];return"function"==typeof f?Object.assign(d,f(a[u])):"string"==typeof f?d[f]=a[u]:d[u]=a[u],d},{});var PR=Object.freeze({__proto__:null,updateAttendeesEpic:(a,d)=>Mn(a,Ts).pipe(Ne(u=>HC(u.payload.body)),Hn(d),nr(u=>{let[f,A]=u,S=[Fn(f)];const{meeting:{userId:T,isWebinar:R,isOnHold:M},participants:{attendeesList:B,failoverAttendeesList:H,allowTalkAttendeesList:$}}=A,ce=$.map(ue=>ue.userId);if(f.add){const ue=f.add.find(Qe=>Qe.userId===T);void 0!==ue&&(Et("ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",ue),void 0!==ue.bHold&&S.push(c_(ue.bHold)));const Se=f.add.filter(Qe=>Qe.userId!==T);if(Se.length>0){const Qe=Se.filter(We=>!W0(We.userRole)).map(We=>{const et=H.find(Lt=>Lt.zoomID===We.zoomID);return et?mn(mn({},We),{},{source:et.isOnHold?"on hold":"failover"}):We}),He=Qe.filter(We=>!!We.source).map(We=>({zoomID:We.zoomID}));if(S.push(kw(He)),Et("ADD_USER_PARTICIPANT_ATTRIBUTE",Qe),R){const We=Se.filter(et=>W0(et.userRole));We.length>0&&Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",We.map(et=>({userId:et.userId,isAllowToTalk:!0})))}}}if(f.update){const ue=f.update.find(Qe=>Qe.userId===T);void 0!==ue&&(Et("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",ue),void 0!==ue.bHold&&S.push(c_(ue.bHold)));const Se=f.update.filter(Qe=>!(Qe.userId===T||ce.includes(Qe.userId)));if(Se.length>0&&Et("UPDATE_USER_PARTICIPANT_ATTRIBUTE",Se),R){const Qe=f.update.filter(He=>He.userId!==T&&ce.includes(He.userId));Qe.length>0&&Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",Qe)}}if(f.remove){const ue=f.remove.map(Se=>{const Qe=B.find(He=>He.userId===Se.userId);return Qe?2===Se.action&&1===Se.nUserStatus?Qe.bHold?(S.push(CE({zoomID:Qe.zoomID,isOnHold:!0})),mn(mn({},Se),{},{reason:"on hold"})):(S.push(CE({zoomID:Qe.zoomID,isOnHold:!1})),mn(mn({},Se),{},{reason:"failover"})):Se:null}).filter(Se=>!!Se);if(Et("REMOVE_USER_PARTICIPANT_ATTRIBUTE",ue),R){const Se=f.remove.filter(Qe=>ce.includes(Qe.userId));Se.length>0&&Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",Se.map(Qe=>({userId:Qe.userId,isAllowToTalk:!1})))}}const he=S.filter(ue=>ue.type==="".concat(c_));if(he.length>0){const ue=he[he.length-1];S=S.filter(Se=>Se.type!=="".concat(c_)),ue.payload!==M&&(S.push(ue),Et("MEETING_IN_WAITING_ROOM",!M))}return Yn(S)})),receiveUserListFromXMPPEpic:(a,d)=>jh(a,24595).pipe(nr(u=>{const{payload:{body:{action:f,data:A}}}=u,{meeting:{jid:S},participants:{xmppAttendeeList:T}}=d.value,R=[];if(f===ka.rename){A.forEach(B=>{R.push(d_(B))});const M=A.map(B=>GC(B));Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",M)}if(f===ka.Remove){A.forEach(B=>{R.push(SN(B))});const M=A.map(B=>mn(mn({},GC(B)),{},{removed:!0}));Et("REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE",M)}if([ka.Add,ka.List,ka.update].includes(f)){const M=A.map(B=>{const H=GC(B);return Object.keys(H).reduce(($,ce)=>(""!==H[ce]&&Object.assign($,{[ce]:H[ce]}),$),{})});if(Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",M),R.push(IE(M)),f===ka.update){const B=A.find(H=>H.jid===S);B&&void 0!==B.bRaiseHand&&T.find($=>$.jid===S)?.bRaiseHand!==B.bRaiseHand&&Et("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:B.bRaiseHand})}}return Yn(R)})),handleAdmitAllSilentUsersEpic:a=>Mn(a,7951).pipe(dr(d=>{!1===d.payload.body.bStarted&&Et("ADMIT_ALL_SILENT_USERS_END",d.payload.body.bStarted)}),Ne(d=>bN(d.payload.body.bStarted))),handleKVUpdateIndicationEpic:a=>Mn(a,7946).pipe(Un(d=>{var u;return["bRaiseHand","feedback"].includes(null===(u=d.payload.body)||void 0===u?void 0:u.key)&&0===d.payload.body.value}),Ne(d=>(Et("UPDATE_USER_PARTICIPANT_ATTRIBUTE",{}),"bRaiseHand"===d.payload.body.key?Nw():Pw())))});const WC={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},KC=na({["".concat(Fn)]:Mt((a,d)=>{let{payload:u}=d;void 0!==u.add&&u.add.length>0&&u.add.forEach(f=>{const A=a.attendeesList.find(T=>T.userId===f.userId&&51!==f.userType);if(void 0!==A)Object.assign(A,f);else if(51!==f.userType){const T=a.allowTalkAttendeesList.find(R=>R.userId===f.userId);void 0!==T?Object.assign(T,f):W0(f.userRole)?a.allowTalkAttendeesList.push(f):a.attendeesList.push(f)}const S=a.assistantList.find(T=>T.userId===f.userId&&51===f.userType);void 0!==S?Object.assign(S,f):51===f.userType&&a.assistantList.push(f)}),void 0!==u.update&&u.update.length>0&&u.update.forEach(f=>{const A=a.attendeesList.find(T=>T.userId===f.userId&&51!==f.userType);if(void 0!==A)Object.assign(A,f);else if(51!==f.userType){const T=a.allowTalkAttendeesList.find(R=>R.userId===f.userId);void 0!==T&&Object.assign(T,f)}const S=a.assistantList.find(T=>T.userId===f.userId&&51!==f.userType);void 0!==S&&Object.assign(S,f)}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(f=>{const A=a.attendeesList.findIndex(T=>T.userId===f.userId&&51!==f.userType);if(-1!==A)a.attendeesList.splice(A,1);else if(51!==f.userType){const T=a.allowTalkAttendeesList.findIndex(R=>R.userId===f.userId);-1!==T&&a.allowTalkAttendeesList.splice(T,1)}const S=a.assistantList.findIndex(T=>T.userId===f.userId);-1!==S&&a.assistantList.splice(S,1)})}),["".concat(IE)]:Mt((a,d)=>{let{payload:u}=d;const{xmppAttendeeList:f}=a,A=f.map(S=>S.jid);u.forEach(S=>{const{jid:T}=S,R=A.indexOf(T);-1!==R?Object.assign(f[R],S):f.push(S)})}),["".concat(bN)]:Mt((a,d)=>{let{payload:u}=d;a.isAdmitAllSilentUsers=u}),["".concat(Nw)]:Mt(a=>{a.attendeesList.forEach(d=>{d.bRaiseHand&&(d.bRaiseHand=!1)})}),["".concat(Pw)]:Mt(a=>{a.attendeesList.forEach(d=>{d.feedback>0&&(d.feedback=0)})}),["".concat(CE)]:Mt((a,d)=>{let{payload:u}=d;a.failoverAttendeesList.push(u)}),["".concat(kw)]:Mt((a,d)=>{let{payload:u}=d;u.forEach(f=>{const A=a.failoverAttendeesList.findIndex(S=>S.zoomID===f.zoomID);-1!==A&&a.failoverAttendeesList.splice(A,1)})}),["".concat(d_)]:Mt((a,d)=>{let{payload:u}=d;const{jid:f,name:A}=u,S=a.xmppAttendeeList.find(T=>T.jid===f);S&&(S.displayName=A)}),["".concat(SN)]:Mt((a,d)=>{let{payload:u}=d;const{jid:f}=u,A=a.xmppAttendeeList.findIndex(S=>S.jid===f);-1!==f&&a.xmppAttendeeList.splice(A,1)}),["".concat(Dw)]:()=>WC},WC),zN=Fu(PR),x_={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,fileWithVersion:!1,enforceMultipleVideos:!1},YN=na({["".concat(Ei)]:Mt((a,d)=>{let{payload:u}=d;a.audioDecodeStatus=u}),["".concat(hm)]:Mt((a,d)=>{let{payload:u}=d;a.audioEncodeStatus=u}),["".concat($d)]:Mt((a,d)=>{let{payload:u}=d;a.sharingDecodeStatus=u}),["".concat(lE)]:Mt((a,d)=>{let{payload:u}=d;a.sharingEncodeStatus=u}),["".concat(fm)]:Mt((a,d)=>{let{payload:u}=d;a.videoDecodeStatus=u}),["".concat(pm)]:Mt((a,d)=>{let{payload:u}=d;a.videoEncodeStatus=u}),["".concat(za)]:Mt((a,d)=>{let{payload:u}=d;a.mediaConstraints=u.mediaConstraints,a.assetsPath=u.assetsPath,a.fileWithVersion=u.fileWithVersion,a.enforceMultipleVideos=u.enforceMultipleVideos}),["".concat(r_)]:Mt((a,d)=>{let{payload:u}=d;const{type:f,encrypeKey:A,additionalType:S}=u,T={encrypeKey:A,additionalType:S};"audio"===f?a.audioEncrypt=T:"video"===f?a.videoEncrypt=T:"sharing"===f&&(a.sharingEncrypt=T)}),["".concat(mm)]:a=>mn(mn({},x_),{},{mediaConstraints:a.mediaConstraints,assetsPath:a.assetsPath,fileWithVersion:a.fileWithVersion})},x_);var zC=function(a){return a&&a.default||a}(Object.freeze({__proto__:null,default:{}})),gt=fc(function(a,d){!function(u,f){var A=function(Ft,It){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ct,qt){ct.__proto__=qt}||function(ct,qt){for(var Sn in qt)qt.hasOwnProperty(Sn)&&(ct[Sn]=qt[Sn])})(Ft,It)};function S(Ft,It){function ct(){this.constructor=Ft}A(Ft,It),Ft.prototype=null===It?Object.create(It):(ct.prototype=It.prototype,new ct)}var T,R=function(){return(R=Object.assign||function(Ft){for(var It,ct=1,qt=arguments.length;ct<qt;ct++)for(var Sn in It=arguments[ct])Object.prototype.hasOwnProperty.call(It,Sn)&&(Ft[Sn]=It[Sn]);return Ft}).apply(this,arguments)},M=function(Ft,It){var ct=new Uint8Array(Ft.byteLength+It.byteLength);return ct.set(new Uint8Array(Ft),0),ct.set(new Uint8Array(It),Ft.byteLength),ct.buffer};(T=u.TransformDataFormat||(u.TransformDataFormat={})).STRING="string",T.BLOB="blob",T.ARRAY_BUFFER="arraybuffer";var B=function(Ft){return Blob&&Ft instanceof Blob?"blob":ArrayBuffer&&Ft instanceof ArrayBuffer?"arrayBuffer":typeof Ft},H=[],$=function(){for(var Ft=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],It="",ct=0;ct<32;ct++)It+=Ft[Math.round(61*Math.random())];return-1!==H.indexOf(It)?$():(H.push(It),It)},ce=function(Ft){return Ft.arrayBuffer?Ft.arrayBuffer():new Promise(function(It,ct){var qt=new FileReader;qt.readAsArrayBuffer(Ft),qt.onload=function(Sn){It(Sn.target&&Sn.target.result)},qt.onerror=function(Sn){ct(Sn)}})},he=function(Ft){return Ft.text?Ft.text():new Promise(function(It,ct){var qt=new FileReader;qt.readAsText(Ft),qt.onload=function(Sn){It(Sn.target&&Sn.target.result)},qt.onerror=function(Sn){ct(Sn)}})},ue=function(Ft,It){return Promise.resolve(new Blob([new Uint8Array(Ft)],{type:It}))},Se=function(Ft,It){var ct=new Blob([Ft],{type:It||"text/plain"});return he(ct)},Qe=function(Ft,It){return Promise.resolve(new Blob([Ft],{type:It||"text/plain"}))},He=function(Ft,It){return ce(new Blob([Ft],{type:It||"text/plain"}))};function We(Ft){var It=(Ft||"").split(".");return It[It.length-1]||""}function et(Ft){var It=(Ft||"").lastIndexOf("/");return It<0?"":Ft.slice(0,It)}function Lt(Ft){var It=(Ft||"").lastIndexOf("/"),ct=It<0?Ft:Ft.slice(It+1),qt=(ct||"").lastIndexOf(".");return qt<0?ct:ct.slice(0,qt)}function Gt(Ft){return["png","jpg","jpeg","svg"].includes(We(Ft))}function jt(Ft){return"json"===We(Ft)}function Tt(Ft){return"version"===We(Ft)}function hn(Ft,It){var Jo,ct=It||{},qt=ct.encoding,Sn=ct.blobType,Kn=ct.unZipOptions;if("blob"===B(Jo=Ft)&&(Jo.type.includes("compressed")||Jo.type.includes("zip"))&&!Kn?.disableUnZip)return function sn(Ft,It){return f.loadAsync(Ft).then(function(ct){return Promise.all(ct.filter(function(qt,Sn){return!Sn.dir}).map(function(qt){var Kn,Sn=jt((Kn=qt).name)?"string":Gt(Kn.name)?"base64":Tt(Kn.name)?"text":"blob";return It?.setUnZipFormat&&(Sn=It.setUnZipFormat(qt)||Sn),qt.async(Sn).then(function(Kn){var yr=Kn,gi=We(qt.name),Pr="svg"===gi?"svg+xml":gi;return"base64"===Sn&&Gt(qt.name)&&!Kn.startsWith("data")&&(yr="data:image/"+Pr+";base64,"+yr),{data:yr,file:qt}})}))}).then(function(ct){return Sn=It,ct.reduce(function(Kn,yr){var gi,Pr=yr.data,Mi=yr.file,Bi=We(Mi.name),Io=et(Mi.name),To=Lt(Mi.name),Jo=(Sn?.combineExtNames||[]).includes(Bi)&&"string"==typeof Pr,rc=Jo?""+(Io?Io+"/"+Bi:Bi):Mi.name;return Jo&&Kn.some(function(Ql){return Ql.path===rc&&(Ql.data[To]=Pr,!0)})||Kn.push({path:rc,extName:Bi,data:Jo?(gi={},gi[To]=Pr,gi):Pr,shouldCombine:Jo}),Kn},[]).map(function(Kn){var yr=Kn.data,gi=Kn.shouldCombine,Pr=function(Mi,Bi){var Io={};for(var To in Mi)Object.prototype.hasOwnProperty.call(Mi,To)&&Bi.indexOf(To)<0&&(Io[To]=Mi[To]);if(null!=Mi&&"function"==typeof Object.getOwnPropertySymbols){var Jo=0;for(To=Object.getOwnPropertySymbols(Mi);Jo<To.length;Jo++)Bi.indexOf(To[Jo])<0&&Object.prototype.propertyIsEnumerable.call(Mi,To[Jo])&&(Io[To[Jo]]=Mi[To[Jo]])}return Io}(Kn,["data","shouldCombine"]);return R(R({},Pr),{data:gi?JSON.stringify(yr):yr})});var Sn})}(Ft,Kn);if(!qt)return Promise.resolve(Ft);var yr=B(Ft),gi="string"===yr,Pr="blob"===yr,Mi="arrayBuffer"===yr;if(qt===u.TransformDataFormat.BLOB){var Bi=Ft;if(gi)return he(Bi);if(Mi)return ce(Bi)}else if(qt===u.TransformDataFormat.ARRAY_BUFFER){var Io=Ft;if(gi)return Se(Io,Sn);if(Pr)return ue(Io,Sn)}else if(qt===u.TransformDataFormat.STRING){var To=Ft;if(Pr)return Qe(To,Sn);if(Mi)return He(To,Sn)}return Promise.resolve(Ft)}function An(Ft){var It=0,ct=!1,qt=function(){It>90||ct||(Ft(It+=(100-It)/50),requestAnimationFrame(qt))};return qt(),{finish:function(){100===It||ct||(It=100,Ft(100))},abort:function(){100===It||ct||(ct=!0)},get curProgress(){return It}}}function ln(){}function Qt(){Qt.init.call(this)}function Bn(Ft){return void 0===Ft._maxListeners?Qt.defaultMaxListeners:Ft._maxListeners}function _r(Ft,It,ct){if(It)Ft.call(ct);else for(var qt=Ft.length,Sn=an(Ft,qt),Kn=0;Kn<qt;++Kn)Sn[Kn].call(ct)}function vt(Ft,It,ct,qt){if(It)Ft.call(ct,qt);else for(var Sn=Ft.length,Kn=an(Ft,Sn),yr=0;yr<Sn;++yr)Kn[yr].call(ct,qt)}function ut(Ft,It,ct,qt,Sn){if(It)Ft.call(ct,qt,Sn);else for(var Kn=Ft.length,yr=an(Ft,Kn),gi=0;gi<Kn;++gi)yr[gi].call(ct,qt,Sn)}function Be(Ft,It,ct,qt,Sn,Kn){if(It)Ft.call(ct,qt,Sn,Kn);else for(var yr=Ft.length,gi=an(Ft,yr),Pr=0;Pr<yr;++Pr)gi[Pr].call(ct,qt,Sn,Kn)}function $e(Ft,It,ct,qt){if(It)Ft.apply(ct,qt);else for(var Sn=Ft.length,Kn=an(Ft,Sn),yr=0;yr<Sn;++yr)Kn[yr].apply(ct,qt)}function St(Ft,It,ct,qt){var Sn,Kn,yr,gi;if("function"!=typeof ct)throw new TypeError('"listener" argument must be a function');if((Kn=Ft._events)?(Kn.newListener&&(Ft.emit("newListener",It,ct.listener?ct.listener:ct),Kn=Ft._events),yr=Kn[It]):(Kn=Ft._events=new ln,Ft._eventsCount=0),yr){if("function"==typeof yr?yr=Kn[It]=qt?[ct,yr]:[yr,ct]:qt?yr.unshift(ct):yr.push(ct),!yr.warned&&(Sn=Bn(Ft))&&Sn>0&&yr.length>Sn){yr.warned=!0;var Pr=new Error("Possible EventEmitter memory leak detected. "+yr.length+" "+It+" listeners added. Use emitter.setMaxListeners() to increase limit");Pr.name="MaxListenersExceededWarning",Pr.emitter=Ft,Pr.type=It,Pr.count=yr.length,gi=Pr,"function"==typeof console.warn?console.warn(gi):console.log(gi)}}else yr=Kn[It]=ct,++Ft._eventsCount;return Ft}function lt(Ft,It,ct){var qt=!1;function Sn(){Ft.removeListener(It,Sn),qt||(qt=!0,ct.apply(Ft,arguments))}return Sn.listener=ct,Sn}function Ut(Ft){var It=this._events;if(It){var ct=It[Ft];if("function"==typeof ct)return 1;if(ct)return ct.length}return 0}function an(Ft,It){for(var ct=new Array(It);It--;)ct[It]=Ft[It];return ct}ln.prototype=Object.create(null),Qt.EventEmitter=Qt,Qt.usingDomains=!1,Qt.prototype.domain=void 0,Qt.prototype._events=void 0,Qt.prototype._maxListeners=void 0,Qt.defaultMaxListeners=10,Qt.init=function(){this.domain=null,Qt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ln,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Qt.prototype.setMaxListeners=function(Ft){if("number"!=typeof Ft||Ft<0||isNaN(Ft))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=Ft,this},Qt.prototype.getMaxListeners=function(){return Bn(this)},Qt.prototype.emit=function(Ft){var It,ct,qt,Sn,Kn,yr,gi,Pr="error"===Ft;if(yr=this._events)Pr=Pr&&null==yr.error;else if(!Pr)return!1;if(gi=this.domain,Pr){if(It=arguments[1],!gi){if(It instanceof Error)throw It;var Mi=new Error('Uncaught, unspecified "error" event. ('+It+")");throw Mi.context=It,Mi}return It||(It=new Error('Uncaught, unspecified "error" event')),It.domainEmitter=this,It.domain=gi,It.domainThrown=!1,gi.emit("error",It),!1}if(!(ct=yr[Ft]))return!1;var Bi="function"==typeof ct;switch(qt=arguments.length){case 1:_r(ct,Bi,this);break;case 2:vt(ct,Bi,this,arguments[1]);break;case 3:ut(ct,Bi,this,arguments[1],arguments[2]);break;case 4:Be(ct,Bi,this,arguments[1],arguments[2],arguments[3]);break;default:for(Sn=new Array(qt-1),Kn=1;Kn<qt;Kn++)Sn[Kn-1]=arguments[Kn];$e(ct,Bi,this,Sn)}return!0},Qt.prototype.on=Qt.prototype.addListener=function(Ft,It){return St(this,Ft,It,!1)},Qt.prototype.prependListener=function(Ft,It){return St(this,Ft,It,!0)},Qt.prototype.once=function(Ft,It){if("function"!=typeof It)throw new TypeError('"listener" argument must be a function');return this.on(Ft,lt(this,Ft,It)),this},Qt.prototype.prependOnceListener=function(Ft,It){if("function"!=typeof It)throw new TypeError('"listener" argument must be a function');return this.prependListener(Ft,lt(this,Ft,It)),this},Qt.prototype.removeListener=function(Ft,It){var ct,qt,Sn,Kn,yr;if("function"!=typeof It)throw new TypeError('"listener" argument must be a function');if(!(qt=this._events))return this;if(!(ct=qt[Ft]))return this;if(ct===It||ct.listener&&ct.listener===It)0==--this._eventsCount?this._events=new ln:(delete qt[Ft],qt.removeListener&&this.emit("removeListener",Ft,ct.listener||It));else if("function"!=typeof ct){for(Sn=-1,Kn=ct.length;Kn-- >0;)if(ct[Kn]===It||ct[Kn].listener&&ct[Kn].listener===It){yr=ct[Kn].listener,Sn=Kn;break}if(Sn<0)return this;if(1===ct.length){if(ct[0]=void 0,0==--this._eventsCount)return this._events=new ln,this;delete qt[Ft]}else!function(gi,Pr){for(var Mi=Pr,Bi=Mi+1,Io=gi.length;Bi<Io;Mi+=1,Bi+=1)gi[Mi]=gi[Bi];gi.pop()}(ct,Sn);qt.removeListener&&this.emit("removeListener",Ft,yr||It)}return this},Qt.prototype.removeAllListeners=function(Ft){var It,ct;if(!(ct=this._events))return this;if(!ct.removeListener)return 0===arguments.length?(this._events=new ln,this._eventsCount=0):ct[Ft]&&(0==--this._eventsCount?this._events=new ln:delete ct[Ft]),this;if(0===arguments.length){for(var qt,Sn=Object.keys(ct),Kn=0;Kn<Sn.length;++Kn)"removeListener"!==(qt=Sn[Kn])&&this.removeAllListeners(qt);return this.removeAllListeners("removeListener"),this._events=new ln,this._eventsCount=0,this}if("function"==typeof(It=ct[Ft]))this.removeListener(Ft,It);else if(It)do{this.removeListener(Ft,It[It.length-1])}while(It[0]);return this},Qt.prototype.listeners=function(Ft){var It,ct=this._events;return ct&&(It=ct[Ft])?"function"==typeof It?[It.listener||It]:function(qt){for(var Sn=new Array(qt.length),Kn=0;Kn<Sn.length;++Kn)Sn[Kn]=qt[Kn].listener||qt[Kn];return Sn}(It):[]},Qt.listenerCount=function(Ft,It){return"function"==typeof Ft.listenerCount?Ft.listenerCount(It):Ut.call(Ft,It)},Qt.prototype.listenerCount=Ut,Qt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Gn,vr=function(Ft){function It(ct){var qt=Ft.call(this)||this;return qt.timeout=ct?.timeout||3e4,qt}return S(It,Ft),It.prototype.clearTimeoutCheck=function(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)},It.prototype.startTimeoutCheck=function(){var ct=this;!this.timeoutTimer&&!this.finished&&this.timeout>0&&(this.timeoutTimer=setTimeout(function(){ct.finished||(ct.finished=!0,ct.data=null,ct.emit("timeout")),ct.clearTimeoutCheck()},this.timeout))},It}(Qt),Hr=function(Ft){function It(ct){var qt=Ft.call(this,ct)||this;return qt.uuid=$(),qt.domParams=ct||{},qt}return S(It,Ft),It.prototype.jsonp=function(){var ct=this;if(!this.finished){var qt=this.domParams,Sn=qt.url,Kn=qt.jsonpCallbackName,yr=void 0===Kn?"callback":Kn,gi=qt.body,Pr=qt.integrity;this.script=document.createElement("script"),Pr&&(this.script.integrity=Pr,this.script.crossOrigin="anonymous");var Mi="";gi&&Object.entries(gi).forEach(function(Bi){Mi+=(Mi?"&":"")+Bi[0]+"="+Bi[1]}),Mi+=(Mi?"&":"")+yr+"="+this.uuid,this.script.src=Sn+(Sn.includes("?")?"":"?")+Mi,this.jsonpCallback(),this.progressMonitory=An(function(Bi){ct.finished||ct.emit("progressUpdated",Bi)}),document.body.appendChild(this.script)}},It.prototype.clearSideEffect=function(ct){if(void 0===ct&&(ct=!1),document.body.removeChild(this.script),ct){var qt=this.uuid;window[this.uuid]=function(){window[qt]&&delete window[qt]}}else delete window[this.uuid];this.script=null,this.uuid=null,this.finished=!0,this.data=null,this.clearTimeoutCheck()},It.prototype.jsonpCallback=function(){var ct=this;this.script.onerror=function(qt){var Sn;ct.finished||(ct.clearSideEffect(),null===(Sn=ct.progressMonitory)||void 0===Sn||Sn.abort(),ct.emit("error",new Error("string"==typeof qt?qt:"load jsonp script failed")))},window[this.uuid]=function(qt){var Sn;if(!ct.finished){var Kn=ct.domParams,yr=Kn.encoding,gi=Kn.blobType,Pr=Kn.unZipOptions,Mi=Kn.beforeTransformData,Bi=Kn.afterTransformData;null===(Sn=ct.progressMonitory)||void 0===Sn||Sn.finish(),ct.clearSideEffect(),(Mi?Mi(qt||""):Promise.resolve(qt||"")).then(function(Io){return hn(Io,{encoding:yr,blobType:gi,unZipOptions:Pr}).then(function(To){return(Bi?Bi(To):Promise.resolve(To)).then(function(Jo){return ct.emit("finished",Jo)})})}).catch(function(Io){return ct.emit("error",Io)})}}},It.prototype.abort=function(){this.clearSideEffect(!0)},It}(vr),nc=function(Ft){function It(ct){var qt=Ft.call(this,ct)||this;return qt.socketParams=ct||{},qt}return S(It,Ft),It.prototype.write=function(ct,qt){ct&&!this.finished&&(ct instanceof Error?this.handleError(ct):(this.data?this.appendData(ct):this.data=ct,this.handlePerCentUpdate(qt)))},It.prototype.handlePerCentUpdate=function(ct){void 0===ct||this.finished||this.emit("progressUpdated",ct)},It.prototype.handleError=function(ct){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.emit("error",ct)},It.prototype.appendData=function(ct){B(ct)===B(this.data)?"string"==typeof ct?this.data+=ct:Blob&&ct instanceof Blob?this.data=new Blob([this.data,ct],{type:ct.type}):ArrayBuffer&&ct instanceof ArrayBuffer&&(this.data=M(this.data,ct)):this.handleError(new Error("every piece of the data format must be the same"))},It.prototype.end=function(ct){var qt=this;if(!this.finished){this.handlePerCentUpdate(100),ct&&this.write(ct);var Sn=this.socketParams,Kn=Sn.encoding,yr=Sn.blobType,gi=Sn.unZipOptions,Pr=Sn.beforeTransformData,Mi=Sn.afterTransformData;(Pr?Pr(this.data):Promise.resolve(this.data)).then(function(Bi){return hn(Bi,{encoding:Kn,blobType:yr,unZipOptions:gi}).then(function(Io){return(Mi?Mi(Io):Promise.resolve(Io)).then(function(To){return qt.emit("finished",To)})})}).catch(function(Bi){return qt.emit("error",Bi)}),this.data=null,this.finished=!0,this.clearTimeoutCheck()}},It.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck()},It}(vr),Ih=function(Ft){function It(ct){var qt=Ft.call(this,ct)||this;return qt.xhrParams=ct||{},qt.xhrParams.headers=R({},qt.xhrParams.headers||{}),qt}return S(It,Ft),It.prototype.supportFetch=function(){return!!window.fetch&&window.AbortController&&window.Request},It.prototype.ajax=function(){var ct=this;if(!this.finished)if(this.xhrParams.url){var qt=this.xhrParams,Sn=qt.headers,Kn=void 0===Sn?{}:Sn,yr=qt.url,gi=qt.body,Pr=void 0===gi?{}:gi,Mi=qt.method,Bi=void 0===Mi?"POST":Mi,Io=qt.encoding,To=qt.integrity;this.controller=this.supportFetch()?new AbortController:new XMLHttpRequest;var Jo=this.supportFetch()?An(function(rc){ct.finished||ct.emit("progressUpdated",rc)}):null;(this.supportFetch()?fetch(new Request(yr,R({method:Bi,headers:Kn,body:"GET"===Bi?void 0:JSON.stringify(Pr),signal:this.controller.signal},To?{integrity:To,mode:"cors"}:{}))).then(function(rc){return rc.ok?Io===u.TransformDataFormat.STRING?rc.text():Io===u.TransformDataFormat.ARRAY_BUFFER?rc.arrayBuffer():rc.blob():Promise.reject(new Error("xhr download "+yr+" failed!"))}):new Promise(function(rc,Ql){var iu=new XMLHttpRequest;ct.controller=iu,iu.open(Bi,yr),iu.responseType=Io===u.TransformDataFormat.STRING?"text":Io===u.TransformDataFormat.ARRAY_BUFFER?"arraybuffer":"blob",Object.entries(Kn).forEach(function(ic){iu.setRequestHeader(ic[0],ic[1])}),iu.onload=function(){var ic=iu.status,wh=iu.statusText;ic>=200&&ic<300||304===ic?rc(iu.response):Ql(new Error(ic+": "+wh))},iu.onprogress=function(ic){var Sp=ic||{},wh=Sp.total,Cp=Sp.loaded;void 0===Cp||ct.finished||(wh?ct.emit("progressUpdated",Cp/wh*100):Cp&&!Jo&&(Jo=An(function(iS){ct.finished||ct.emit("progressUpdated",iS)})))},iu.onerror=function(){Ql(new Error("xhr download "+yr+" failed!"))},iu.send(JSON.stringify(Pr))})).then(function(rc){if(!ct.finished){var Ql=ct.xhrParams,iu=Ql.encoding,ic=Ql.blobType,Sp=Ql.unZipOptions,wh=Ql.beforeTransformData,Cp=Ql.afterTransformData;Jo?.finish(),ct.finished=!0,ct.clearTimeoutCheck(),(wh?wh(rc):Promise.resolve(rc)).then(function(iS){return hn(iS,{encoding:iu,blobType:ic,unZipOptions:Sp}).then(function(Sg){return(Cp?Cp(Sg):Promise.resolve(Sg)).then(function(Ay){return ct.emit("finished",Ay)})})}).catch(function(iS){return ct.emit("error",iS)})}}).catch(function(rc){ct.finished||(ct.finished=!0,ct.clearTimeoutCheck(),Jo?.abort(),ct.emit("error",rc))})}else this.emit("error",new Error("xhrDownloader url params invalid!"))},It.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.controller.abort()},It}(vr),ru=0,Ic=new Qt,Ps=function(){ru-=1,Ic.emit("ThreadPoolReady")};(Gn=u.DownloaderType||(u.DownloaderType={})).XHR="xhr",Gn.DOM="dom",Gn.SOCKET="socket";var xa=function(Ft){function It(ct){var qt=Ft.call(this)||this;return qt.aborted=!1,qt.downloadParmas=R({type:u.DownloaderType.XHR},ct),qt.id=$(),qt}return S(It,Ft),It.prototype.start=function(){var ct=this;ru+=1,this.progress=0,this.emit("downloadStart"),this.onDownloadStartCallback&&this.onDownloadStartCallback();var qt=this.downloadParmas,Kn=qt.xhrParams,yr=qt.domParams,gi=qt.socketParams;switch(qt.type){case u.DownloaderType.DOM:this.downloader=new Hr(yr),this.downloader.jsonp();break;case u.DownloaderType.SOCKET:this.downloader=new nc(gi);break;default:this.downloader=new Ih(Kn),this.downloader.ajax()}return this.downloader.startTimeoutCheck(),this.downloader.on("error",function(Pr){ct.emit("error",Pr),ct.onErrorCallback&&ct.onErrorCallback(Pr),Ps()}).on("finished",function(Pr){ct.emit("complete",Pr),ct.onCompleteCallback&&ct.onCompleteCallback(Pr),Ps()}).on("progressUpdated",function(Pr){ct.progress=Pr,ct.emit("progressUpdated",Pr),ct.onProgressUpdatedCallback&&ct.onProgressUpdatedCallback(Pr)}).on("timeout",function(){ct.emit("timeout"),ct.onTimeoutCallback&&ct.onTimeoutCallback(),Ps()}),this},It.prototype.abort=function(){if(this.aborted)return this;this.aborted=!0,this.downloader&&!this.downloader.finished&&this.downloader.abort();var ct=new Error("file download has been aborted");return this.emit("abort",ct),this.onAbortCallback&&this.onAbortCallback(ct),Ps(),this},It.prototype.onDownloadStart=function(ct){return this.onDownloadStartCallback=ct,this},It.prototype.onProgressUpdated=function(ct){return this.onProgressUpdatedCallback=ct,this},It.prototype.onError=function(ct){return this.onErrorCallback=ct,this},It.prototype.onComplete=function(ct){return this.onCompleteCallback=ct,this},It.prototype.onAbort=function(ct){return this.onAbortCallback=ct,this},It.prototype.onTimeout=function(ct){return this.onTimeoutCallback=ct,this},It.prototype.isInProgress=function(){return void 0!==this.progress},It.prototype.isFinished=function(){return 100===this.progress},It}(Qt),Th=function(){function Ft(It){this.taskList=[],this.options=It||{};var ct=this.options.threadLimit;if((void 0===ct?6:ct)>6)throw new Error("threadLimit must be lower than 6");Ic.on("ThreadPoolReady",this.startNextTask.bind(this))}return Ft.prototype.download=function(It){var ct=new xa(It),qt=this.removeTask.bind(this,ct);return ct.on("abort",qt),this.taskList.push(ct),this.checkTaskReady(ct),ct},Ft.prototype.startNextTask=function(){var It=this.taskList.find(function(ct){return!ct.isInProgress()});It&&this.checkTaskReady(It)},Ft.prototype.checkTaskReady=function(It){var ct=this.options.threadLimit,qt=void 0===ct?6:ct;if(!(this.taskList.findIndex(function(Kn){return!Kn.isInProgress()})>=qt||ru+1>6)){var Sn=this.removeTask.bind(this,It);It.on("complete",Sn),It.on("error",Sn),It.on("timeout",Sn),setTimeout(function(){return It.start()},0)}},Ft.prototype.removeTask=function(It){var ct=this;this.taskList.some(function(qt,Sn){return qt===It&&(setTimeout(function(){return It.removeAllListeners()},0),ct.taskList.splice(Sn,1),!0)})},Ft}();u.DownloadTask=xa,u.IDownloadManager=Th,u.appendBuffer=M,u.arrayBufferToBlob=ue,u.arrayBufferToString=Se,u.blobToArrayBuffer=ce,u.blobToText=he,u.genUuid=$,u.getDataFormat=B,u.getExtName=We,u.getFileName=Lt,u.getFullPathName=et,u.isImgFile=Gt,u.isJsonFile=jt,u.isVersionFile=Tt,u.monitorProgress=An,u.sep="/",u.stringToArrayBuffer=He,u.stringToBlob=Qe,u.transformData=hn,Object.defineProperty(u,"__esModule",{value:!0})}(d,zC)});dN(gt);var YC=dN(fc(function(a,d){!function(u,f){var A=function(vt,ut){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Be,$e){Be.__proto__=$e}||function(Be,$e){for(var St in $e)$e.hasOwnProperty(St)&&(Be[St]=$e[St])})(vt,ut)};function S(vt,ut){function Be(){this.constructor=vt}A(vt,ut),vt.prototype=null===ut?Object.create(ut):(Be.prototype=ut.prototype,new Be)}var T=function(){return(T=Object.assign||function(vt){for(var ut,Be=1,$e=arguments.length;Be<$e;Be++)for(var St in ut=arguments[Be])Object.prototype.hasOwnProperty.call(ut,St)&&(vt[St]=ut[St]);return vt}).apply(this,arguments)};function R(){}function M(){M.init.call(this)}function B(vt){return void 0===vt._maxListeners?M.defaultMaxListeners:vt._maxListeners}function H(vt,ut,Be){if(ut)vt.call(Be);else for(var $e=vt.length,St=We(vt,$e),lt=0;lt<$e;++lt)St[lt].call(Be)}function $(vt,ut,Be,$e){if(ut)vt.call(Be,$e);else for(var St=vt.length,lt=We(vt,St),Ut=0;Ut<St;++Ut)lt[Ut].call(Be,$e)}function ce(vt,ut,Be,$e,St){if(ut)vt.call(Be,$e,St);else for(var lt=vt.length,Ut=We(vt,lt),an=0;an<lt;++an)Ut[an].call(Be,$e,St)}function he(vt,ut,Be,$e,St,lt){if(ut)vt.call(Be,$e,St,lt);else for(var Ut=vt.length,an=We(vt,Ut),Gn=0;Gn<Ut;++Gn)an[Gn].call(Be,$e,St,lt)}function ue(vt,ut,Be,$e){if(ut)vt.apply(Be,$e);else for(var St=vt.length,lt=We(vt,St),Ut=0;Ut<St;++Ut)lt[Ut].apply(Be,$e)}function Se(vt,ut,Be,$e){var St,lt,Ut,an;if("function"!=typeof Be)throw new TypeError('"listener" argument must be a function');if((lt=vt._events)?(lt.newListener&&(vt.emit("newListener",ut,Be.listener?Be.listener:Be),lt=vt._events),Ut=lt[ut]):(lt=vt._events=new R,vt._eventsCount=0),Ut){if("function"==typeof Ut?Ut=lt[ut]=$e?[Be,Ut]:[Ut,Be]:$e?Ut.unshift(Be):Ut.push(Be),!Ut.warned&&(St=B(vt))&&St>0&&Ut.length>St){Ut.warned=!0;var Gn=new Error("Possible EventEmitter memory leak detected. "+Ut.length+" "+ut+" listeners added. Use emitter.setMaxListeners() to increase limit");Gn.name="MaxListenersExceededWarning",Gn.emitter=vt,Gn.type=ut,Gn.count=Ut.length,an=Gn,"function"==typeof console.warn?console.warn(an):console.log(an)}}else Ut=lt[ut]=Be,++vt._eventsCount;return vt}function Qe(vt,ut,Be){var $e=!1;function St(){vt.removeListener(ut,St),$e||($e=!0,Be.apply(vt,arguments))}return St.listener=Be,St}function He(vt){var ut=this._events;if(ut){var Be=ut[vt];if("function"==typeof Be)return 1;if(Be)return Be.length}return 0}function We(vt,ut){for(var Be=new Array(ut);ut--;)Be[ut]=vt[ut];return Be}function et(vt){var ut;return null===(ut=vt?.path)||void 0===ut?void 0:ut.startsWith("ZipInfo:")}function Lt(vt){return"string"==typeof vt&&vt.startsWith("ZipInfo:")}function Gt(vt,ut){return(Array.isArray(vt)?vt:[vt]).some(function(Be){if("number"!=typeof Be.version)throw new Error("file version must be an int number");return Be.version<ut})}function jt(vt,ut){return vt.reduce(function(Be,$e){return Be.then(function(St){return ut(St,$e)}).catch(function(){return ut(void 0,$e)})},Promise.resolve(void 0))}R.prototype=Object.create(null),M.EventEmitter=M,M.usingDomains=!1,M.prototype.domain=void 0,M.prototype._events=void 0,M.prototype._maxListeners=void 0,M.defaultMaxListeners=10,M.init=function(){this.domain=null,M.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new R,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},M.prototype.setMaxListeners=function(vt){if("number"!=typeof vt||vt<0||isNaN(vt))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=vt,this},M.prototype.getMaxListeners=function(){return B(this)},M.prototype.emit=function(vt){var ut,Be,$e,St,lt,Ut,an,Gn="error"===vt;if(Ut=this._events)Gn=Gn&&null==Ut.error;else if(!Gn)return!1;if(an=this.domain,Gn){if(ut=arguments[1],!an){if(ut instanceof Error)throw ut;var vr=new Error('Uncaught, unspecified "error" event. ('+ut+")");throw vr.context=ut,vr}return ut||(ut=new Error('Uncaught, unspecified "error" event')),ut.domainEmitter=this,ut.domain=an,ut.domainThrown=!1,an.emit("error",ut),!1}if(!(Be=Ut[vt]))return!1;var Hr="function"==typeof Be;switch($e=arguments.length){case 1:H(Be,Hr,this);break;case 2:$(Be,Hr,this,arguments[1]);break;case 3:ce(Be,Hr,this,arguments[1],arguments[2]);break;case 4:he(Be,Hr,this,arguments[1],arguments[2],arguments[3]);break;default:for(St=new Array($e-1),lt=1;lt<$e;lt++)St[lt-1]=arguments[lt];ue(Be,Hr,this,St)}return!0},M.prototype.on=M.prototype.addListener=function(vt,ut){return Se(this,vt,ut,!1)},M.prototype.prependListener=function(vt,ut){return Se(this,vt,ut,!0)},M.prototype.once=function(vt,ut){if("function"!=typeof ut)throw new TypeError('"listener" argument must be a function');return this.on(vt,Qe(this,vt,ut)),this},M.prototype.prependOnceListener=function(vt,ut){if("function"!=typeof ut)throw new TypeError('"listener" argument must be a function');return this.prependListener(vt,Qe(this,vt,ut)),this},M.prototype.removeListener=function(vt,ut){var Be,$e,St,lt,Ut;if("function"!=typeof ut)throw new TypeError('"listener" argument must be a function');if(!($e=this._events))return this;if(!(Be=$e[vt]))return this;if(Be===ut||Be.listener&&Be.listener===ut)0==--this._eventsCount?this._events=new R:(delete $e[vt],$e.removeListener&&this.emit("removeListener",vt,Be.listener||ut));else if("function"!=typeof Be){for(St=-1,lt=Be.length;lt-- >0;)if(Be[lt]===ut||Be[lt].listener&&Be[lt].listener===ut){Ut=Be[lt].listener,St=lt;break}if(St<0)return this;if(1===Be.length){if(Be[0]=void 0,0==--this._eventsCount)return this._events=new R,this;delete $e[vt]}else!function(an,Gn){for(var vr=Gn,Hr=vr+1,nc=an.length;Hr<nc;vr+=1,Hr+=1)an[vr]=an[Hr];an.pop()}(Be,St);$e.removeListener&&this.emit("removeListener",vt,Ut||ut)}return this},M.prototype.removeAllListeners=function(vt){var ut,Be;if(!(Be=this._events))return this;if(!Be.removeListener)return 0===arguments.length?(this._events=new R,this._eventsCount=0):Be[vt]&&(0==--this._eventsCount?this._events=new R:delete Be[vt]),this;if(0===arguments.length){for(var $e,St=Object.keys(Be),lt=0;lt<St.length;++lt)"removeListener"!==($e=St[lt])&&this.removeAllListeners($e);return this.removeAllListeners("removeListener"),this._events=new R,this._eventsCount=0,this}if("function"==typeof(ut=Be[vt]))this.removeListener(vt,ut);else if(ut)do{this.removeListener(vt,ut[ut.length-1])}while(ut[0]);return this},M.prototype.listeners=function(vt){var ut,Be=this._events;return Be&&(ut=Be[vt])?"function"==typeof ut?[ut.listener||ut]:function($e){for(var St=new Array($e.length),lt=0;lt<St.length;++lt)St[lt]=$e[lt].listener||$e[lt];return St}(ut):[]},M.listenerCount=function(vt,ut){return"function"==typeof vt.listenerCount?vt.listenerCount(ut):He.call(vt,ut)},M.prototype.listenerCount=He,M.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Tt,sn=function(vt){function ut(){return null!==vt&&vt.apply(this,arguments)||this}return S(ut,vt),ut}(M),hn=function(vt){function ut(Be){var Gn,$e=vt.call(this)||this;if($e.ready=!1,$e.openError=!1,$e.isEnable()){var St=Be||{},Ut=St.indexDbVersion;$e.dbName="resource-manager"+((Gn=St.nameSpaceId)?"-"+Gn:"");var an=indexedDB.open($e.dbName,Ut||1);an.addEventListener("error",function(){$e.openError=!0,$e.checkReady(),$e.emit("error",new Error("failed to open indexedDB"))}),an.addEventListener("success",function(){$e.db=an.result,$e.checkReady()}),an.addEventListener("upgradeneeded",function(){$e.db=an.result,$e.handleSuccess()}),setTimeout(function(){$e.checkReady()},5e3)}else $e.checkReady();return $e}return S(ut,vt),ut.prototype.checkReady=function(){this.ready||(this.ready=!0,this.emit("ready"))},ut.prototype.handleSuccess=function(){if(!this.db.objectStoreNames||0===this.db.objectStoreNames.length||!this.db.objectStoreNames.contains("resource")){var Be=this.db.createObjectStore("resource",{keyPath:"path",autoIncrement:!1});Be.createIndex("path","path"),Be.createIndex("sourceURL","sourceURL",{unique:!1})}},ut.prototype.createAction=function(Be){var $e=this.db.transaction(["resource"],Be||"readonly");return{trans:$e,store:$e.objectStore("resource")}},ut.prototype.handleAction=function(Be,$e){return new Promise(function(St,lt){var Ut=$e();Be.addEventListener("complete",function(){St(Ut.result)}),Be.addEventListener("error",function(){lt(Be.error||new Error("transaction error"))}),Be.addEventListener("abort",function(){lt(Be.error||new Error("transaction aborted"))})})},ut.prototype.put=function(){for(var Be=[],$e=0;$e<arguments.length;$e++)Be[$e]=arguments[$e];var St=this.createAction("readwrite"),Ut=St.store;return this.handleAction(St.trans,function(){return Ut.put.apply(Ut,Be)})},ut.prototype.getAllKeysFromIndex=function(Be){for(var $e=[],St=1;St<arguments.length;St++)$e[St-1]=arguments[St];if(IDBObjectStore.prototype.getAllKeys){var lt=this.createAction(),an=lt.store;return this.handleAction(lt.trans,function(){var Gn;return(Gn=an.index(Be)).getAllKeys.apply(Gn,$e)})}return this.openKeyCursor(Be)},ut.prototype.getAllFromIndex=function(Be){for(var $e=[],St=1;St<arguments.length;St++)$e[St-1]=arguments[St];var lt=this.createAction(),an=lt.store;return IDBObjectStore.prototype.getAll?this.handleAction(lt.trans,function(){var Gn;return(Gn=an.index(Be)).getAll.apply(Gn,$e)}):this.openCursor(Be)},ut.prototype.getFromIndex=function(Be){for(var $e=[],St=1;St<arguments.length;St++)$e[St-1]=arguments[St];var lt=this.createAction(),an=lt.store;return this.handleAction(lt.trans,function(){var Gn;return(Gn=an.index(Be)).get.apply(Gn,$e)})},ut.prototype.deleteKey=function(){for(var Be=[],$e=0;$e<arguments.length;$e++)Be[$e]=arguments[$e];var St=this.createAction("readwrite"),Ut=St.store;return this.handleAction(St.trans,function(){return Ut.delete.apply(Ut,Be)})},ut.prototype.handleCursorAction=function(Be,$e,St,lt){return new Promise(function(Ut,an){$e.addEventListener("success",function(){$e.result?(St(lt,$e.result),$e.result.continue()):Ut(lt)}),$e.addEventListener("error",function(){an(Be.error||new Error("transaction error"))})})},ut.prototype.openKeyCursor=function(Be){for(var $e,St=[],lt=1;lt<arguments.length;lt++)St[lt-1]=arguments[lt];var Ut=this.createAction("readwrite");return this.handleCursorAction(Ut.trans,($e=Ut.store.index(Be)).openKeyCursor.apply($e,St),function(vr,Hr){return vr.push(Hr.key),vr},[])},ut.prototype.openCursor=function(Be){for(var $e,St=[],lt=1;lt<arguments.length;lt++)St[lt-1]=arguments[lt];var Ut=this.createAction("readwrite");return this.handleCursorAction(Ut.trans,($e=Ut.store.index(Be)).openCursor.apply($e,St),function(vr,Hr){return vr.push(Hr.value),vr},[])},ut.prototype.isEnable=function(){return!!window.indexedDB&&!this.openError},ut.prototype.saveFile=function(Be){return this.db?this.put(Be).then(function(){return!0}):Promise.resolve(!1)},ut.prototype.removeFile=function(Be){var $e=this;return this.db?"string"==typeof Be?this.getAllKeysFromIndex("path").then(function(St){var lt=(St||[]).filter(function(Ut){return Ut===Be||Ut.startsWith(""+Be+f.sep)});return Promise.all(lt.map(function(Ut){return $e.deleteKey(Ut)}))}).then(function(){return!0}):this.deleteKey(Be.path).then(function(){return!0}):Promise.resolve(!1)},ut.prototype.clear=function(){if(!this.db)return Promise.resolve(!1);var Be=this.createAction("readwrite"),St=Be.store;return this.handleAction(Be.trans,function(){return St.clear()}).then(function(){return!0})},ut.prototype.findFileByPath=function(Be){return this.db&&Be?this.getFromIndex("path",Be):Promise.resolve(void 0)},ut.prototype.findFileBySourceURL=function(Be){return this.db&&Be?this.getAllFromIndex("sourceURL",Be):Promise.resolve([])},ut.prototype.isDirectory=function(Be){var $e=this;return this.db?new Promise(function(St){Lt(Be)?St(!1):$e.getAllKeysFromIndex("path").then(function(lt){return(lt||[]).some(function(Ut){return Ut.startsWith(""+Be+f.sep)})}).then(St).catch(function(){return St(!1)})}):Promise.resolve(!1)},ut.prototype.ls=function(Be){var $e=this;return this.db?this.getAllKeysFromIndex("path").then(function(St){var lt=[];return Promise.all((St||[]).map(function(Ut){if(Lt(Ut))return Promise.resolve(void 0);if(Be){if(Ut.startsWith(""+Be+f.sep)){var an=Ut.split(""+Be+f.sep)[1]||"";if(an.includes(f.sep)){var Gn=""+Be+f.sep+an.split(f.sep)[0];return Gn&&!lt.includes(Gn)?(lt.push(Gn),Promise.resolve(Gn)):Promise.resolve(void 0)}return $e.getFromIndex("path",Ut)}return Promise.resolve(void 0)}if(Ut.includes(f.sep)){var vr=Ut.split(f.sep)[0]||"";return vr&&!lt.includes(vr)?(lt.push(vr),Promise.resolve(vr)):Promise.resolve(void 0)}return $e.getFromIndex("path",Ut)})).then(function(Ut){return Ut.filter(function(an){return!!an})})}):Promise.resolve([])},ut}(sn),An=function(vt){function ut(){var Be=null!==vt&&vt.apply(this,arguments)||this;return Be.memoryFiles=[],Be}return S(ut,vt),ut.prototype.isEnable=function(){return!0},ut.prototype.saveFile=function(Be){var $e=this;return new Promise(function(St){$e.memoryFiles.some(function(lt,Ut){return lt.path===Be.path&&($e.memoryFiles.splice(Ut,1,Be),!0)})||$e.memoryFiles.push(Be),St(!0)})},ut.prototype.removeFile=function(Be){var $e=this;return new Promise(function(St){for(var lt=$e.memoryFiles.length-1;lt>=0;lt--){var Ut=$e.memoryFiles[lt];("string"==typeof Be&&(Ut.path===Be||Ut.path.startsWith(""+Be+f.sep))||Be.path===Ut.path)&&$e.memoryFiles.splice(lt,1)}St(!0)})},ut.prototype.clear=function(){var Be=this;return new Promise(function($e){Be.memoryFiles=[],$e(!0)})},ut.prototype.findFileByPath=function(Be){var $e=this;return new Promise(function(St){St($e.memoryFiles.filter(function(lt){return lt.path===Be})[0])})},ut.prototype.findFileBySourceURL=function(Be){var $e=this;return new Promise(function(St){St($e.memoryFiles.filter(function(lt){return lt.sourceURL===Be}))})},ut.prototype.isDirectory=function(Be){var $e=this;return new Promise(function(St){Lt(Be)?St(!1):St($e.memoryFiles.some(function(lt){return lt.path.startsWith(""+Be+f.sep)}))})},ut.prototype.ls=function(Be){var $e=this;return new Promise(function(St){var lt=[];$e.memoryFiles.forEach(function(Ut){if(!et(Ut))if(Be){if(Ut.path.startsWith(""+Be+f.sep)){var an=Ut.path.split(""+Be+f.sep)[1]||"";if(an.includes(f.sep)){var Gn=""+Be+f.sep+an.split(f.sep)[0];return void(Gn&&!lt.includes(Gn)&&lt.push(Gn))}lt.push(Ut)}}else if(Ut.path.includes(f.sep)){var vr=Ut.path.split(f.sep)[0]||"";vr&&!lt.includes(vr)&&lt.push(vr)}else lt.push(Ut)}),St(lt)})},ut}(sn),ln=function(vt){function ut(Be){var lt,$e=vt.call(this)||this;return $e.isLocalAvaliable=void 0,$e.isEnable()&&($e.storageName="resource-manager"+((lt=(Be||{}).nameSpaceId)?"-"+lt:"")),$e}return S(ut,vt),ut.prototype.isEnable=function(){if(void 0!==this.isLocalAvaliable)return this.isLocalAvaliable;try{this.isLocalAvaliable=!0,localStorage.setItem("privateTest","")}catch{this.isLocalAvaliable=!1}return this.isLocalAvaliable},ut.prototype.saveFile=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){var lt=$e.getLocalFile();lt.some(function(Ut,an){return Ut.path===Be.path&&(lt.splice(an,1,Be),!0)})||lt.push(Be),localStorage.setItem($e.storageName,JSON.stringify(lt)),St(!0)}):Promise.resolve(!1)},ut.prototype.getLocalFile=function(){var Be=localStorage.getItem(this.storageName),$e=[];if(Be)try{$e=JSON.parse(Be)||"[]"}catch(St){console.log(St)}return $e},ut.prototype.removeFile=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){for(var lt=$e.getLocalFile(),Ut=lt.length-1;Ut>=0;Ut--){var an=lt[Ut];("string"==typeof Be&&(an.path===Be||an.path.startsWith(""+Be+f.sep))||Be.path===an.path)&&lt.splice(Ut,1)}localStorage.setItem($e.storageName,JSON.stringify(lt)),St(!0)}):Promise.resolve(!1)},ut.prototype.clear=function(){var Be=this;return this.isEnable()?new Promise(function($e){localStorage.removeItem(Be.storageName),$e(!0)}):Promise.resolve(!1)},ut.prototype.findFileByPath=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){St($e.getLocalFile().filter(function(lt){return lt.path===Be})[0])}):Promise.resolve(void 0)},ut.prototype.findFileBySourceURL=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){St($e.getLocalFile().filter(function(lt){return lt.sourceURL===Be}))}):Promise.resolve([])},ut.prototype.isDirectory=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){Lt(Be)?St(!1):St($e.getLocalFile().some(function(lt){return lt.path.startsWith(""+Be+f.sep)}))}):Promise.resolve(!1)},ut.prototype.ls=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){var lt=[];$e.getLocalFile().forEach(function(Ut){if(!et(Ut))if(Be){if(Ut.path.startsWith(""+Be+f.sep)){var an=Ut.path.split(""+Be+f.sep)[1]||"";if(an.includes(f.sep)){var Gn=""+Be+f.sep+an.split(f.sep)[0];return void(Gn&&!lt.includes(Gn)&&lt.push(Gn))}lt.push(Ut)}}else if(Ut.path.includes(f.sep)){var vr=Ut.path.split(f.sep)[0]||"";vr&&!lt.includes(vr)&&lt.push(vr)}else lt.push(Ut)}),St(lt)}):Promise.resolve([])},ut}(sn);(Tt=u.FileStoreEnum||(u.FileStoreEnum={})).MEMORY="memoryStore",Tt.INDEX_DB="indexedDBStore",Tt.STORAGE="storageStore";var Qt=function(vt){function ut(Be){var $e=vt.call(this)||this;return $e.indexedDBStore=new hn(Be),$e.memoryStore=new An,$e.storageStore=new ln(Be),$e}return S(ut,vt),ut.prototype.saveFile=function(Be,$e,St){var lt=this;void 0===$e&&($e=!0);var Ut=(St||{}).forceSpecifyStore;return($e?this.findFileByPath(Be.path,St):Promise.resolve(void 0)).then(function(an){if(an?.version&&Gt(Be,an.version))throw new Error("there is an higher version file existed already");var Gn=T(T({},Be),{createTime:an&&an.createTime||Date.now(),updateTime:Date.now()});return Ut&&lt[Ut]&&lt[Ut].isEnable()&&(Ut!==u.FileStoreEnum.STORAGE||lt.isLocalStorageAvaliable(Gn))?lt[Ut].saveFile(Gn):lt[lt.saveToTargetStoreRule(Gn)].saveFile(Gn)})},ut.prototype.isLocalStorageAvaliable=function(Be){var $e=Be.data;return"string"===f.getDataFormat($e)&&$e.length<=102400&&this.storageStore.isEnable()},ut.prototype.saveToTargetStoreRule=function(Be){return this.indexedDBStore.isEnable()?u.FileStoreEnum.INDEX_DB:this.isLocalStorageAvaliable(Be)?u.FileStoreEnum.STORAGE:u.FileStoreEnum.MEMORY},ut.prototype.removeFile=function(Be,$e){var St=($e||{}).forceSpecifyStore;return St&&this[St]?this[St].removeFile(Be):Promise.all([this.indexedDBStore.removeFile(Be),this.storageStore.removeFile(Be),this.memoryStore.removeFile(Be)]).then(function(){return!0})},ut.prototype.clear=function(Be){var $e=(Be||{}).forceSpecifyStore;return $e&&this[$e]?this[$e].clear():Promise.all([this.indexedDBStore.clear(),this.storageStore.clear(),this.memoryStore.clear()]).then(function(){return!0})},ut.prototype.findFileByPath=function(Be,$e){var St=this,lt=($e||{}).forceSpecifyStore;return lt&&this[lt]?this[lt].findFileByPath(Be):jt(this.searchInTargetStoreRule(),function(Ut,an){return Ut?Promise.resolve(Ut):St[an].findFileByPath(Be)})},ut.prototype.findFileBySourceURL=function(Be,$e){var St=this,lt=($e||{}).forceSpecifyStore;return lt&&this[lt]?this[lt].findFileBySourceURL(Be):jt(this.searchInTargetStoreRule(),function(Ut,an){return St[an].findFileBySourceURL(Be).then(function(Gn){return Ut?Ut.filter(function(vr){return!Gn.some(function(Hr){return Hr.path===vr.path})}).concat(Gn||[]):Gn||[]})})},ut.prototype.searchInTargetStoreRule=function(){return[u.FileStoreEnum.INDEX_DB,u.FileStoreEnum.STORAGE,u.FileStoreEnum.MEMORY]},ut.prototype.isDirectory=function(Be){var $e=this;return Be?jt(this.searchInTargetStoreRule(),function(St,lt){return St?Promise.resolve(!0):$e[lt].isDirectory(Be)}):Promise.resolve(!0)},ut.prototype.ls=function(Be){var $e=this;return this.isDirectory(Be).then(function(St){if(!St)throw new Error("path: "+Be+" is an invalid directory path");return jt($e.searchInTargetStoreRule(),function(lt,Ut){return $e[Ut].ls(Be).then(function(an){return lt?(an||[]).concat(lt.filter(function(Gn){return!an.some(function(vr){return"string"==typeof Gn?vr===Gn:"string"!=typeof vr&&vr.path===Gn.path})})):an})})})},ut}(M),Bn=function(vt){function ut(){return null!==vt&&vt.apply(this,arguments)||this}return S(ut,vt),ut}(M),_r=function(vt){function ut(Be){var $e=vt.call(this)||this,St=Be||{},lt=St.storeOptions;return $e.downloadManager=new f.IDownloadManager(St.downloadManagerOptions),$e.store=new Qt(lt),$e.store.indexedDBStore.on("ready",function(){return $e.emit("ready")}),$e}return S(ut,vt),ut.prototype.getFile=function(Be,$e,St){var lt=this,Ut=new Bn,an=Promise.resolve(void 0),Gn=$e||{},vr=Gn.downloadOptions,nc=Gn.saveRootPath;Gn.forceDownload?an=Promise.resolve(void 0):"string"==typeof Be?an=this.store.findFileByPath(Be,St):Be?.sourceURL?an=this.store.findFileBySourceURL(Be.sourceURL):vr&&(vr.domParams||vr.socketParams||vr.xhrParams)&&(an=this.store.findFileBySourceURL(this.genSourceURL(vr)));var Ih=null,ru=new Promise(function(Ic){Ih=Ic});return Ut.getDownloadTask=function(){return ru},an=an.then(function(Ic){if(Ic&&(!Array.isArray(Ic)||Ic.length)){var Ps=Ic;if(Array.isArray(Ps)){var xa=Ps.find(function(Ft){return et(Ft)});if(!xa)return;Ps=Ps.filter(function(Ft){return!et(Ft)});var Th=xa.data;if("string"!=typeof Th||!JSON.parse(Th||"[]").every(function(Ft){return Ps.some(function(It){return It.path===Ft})}))return}if(!St?.targetVersion||!Gt(Ps,St.targetVersion))return Ut.emit("checkExpire",!1),Ps;Ut.emit("checkExpire",!0)}}).then(function(Ic){if(!Ic&&vr){var Ps=lt.downloadManager.download(vr);return Ih(Ps),new Promise(function(xa,Th){Ps.on("complete",function(Ft){setTimeout(function(){var It=Array.isArray(Ft)?Ft.map(function(qt){var Sn=qt.data,yr=qt.extName;return{path:lt.genFilePath(nc,qt.path),sourceURL:lt.genSourceURL(vr),data:Sn,fileFormat:yr||lt.getFileFormat(vr),version:St?.targetVersion||1}}):{path:lt.genFilePath(nc,void 0),sourceURL:lt.genSourceURL(vr),data:Ft,fileFormat:lt.getFileFormat(vr),version:St?.targetVersion||1};if(Array.isArray(It)&&"string"==typeof Be&&Be){var ct=It.find(function(qt){return qt.path===Be});xa(ct||It)}else xa(It);Ut.emit("beforeSet",It),lt.beforeWrite(It,St).then(function(){Ut.emit("afterSet")}).catch(function(qt){return Ut.emit("afterSet",qt)})},0)}),Ps.on("abort",Th),Ps.on("error",Th),Ps.on("timeout",function(){return Th(new Error("download timeout"))})})}return Ih(void 0),Ic}).catch(function(Ic){return Ih(void 0),Promise.reject(Ic)}),Ut.getResult=function(){return an},Ut},ut.prototype.genSourceURL=function(Be){var St=Be.type;if(St===f.DownloaderType.SOCKET)return null;var Ut=(St===f.DownloaderType.DOM?Be.domParams:Be.xhrParams)||{},an=Ut.url,Gn=void 0===an?"":an,vr=Ut.body;return vr&&Object.keys(vr).length?Gn+(Gn.includes("?")?"&":"?")+"downloadBodyParams="+JSON.stringify(vr):Gn},ut.prototype.updateFile=function(Be,$e){return this.saveStore(Be,!0,$e)},ut.prototype.beforeWrite=function(Be,$e){var St,lt,Ut=this;return Array.isArray(Be)?Promise.all(Be.concat((St=Be,lt=St[0].sourceURL||"",{path:"ZipInfo:"+lt,sourceURL:lt,data:JSON.stringify(St.map(function(an){return an.path}))})).map(function(an){return Ut.saveStore(an,!1,$e)})).then(function(an){return an.filter(function(Gn){return!et(Gn)})}):this.saveStore(Be,!0,$e)},ut.prototype.getFileFormat=function(Be){var $e=Be||{},St=$e.xhrParams,lt=$e.domParams,Ut=$e.socketParams,an=$e.type;return an===f.DownloaderType.DOM&&lt?.fileFormat?lt.fileFormat:an===f.DownloaderType.SOCKET&&Ut?.fileFormat?Ut.fileFormat:St?.fileFormat?St.fileFormat:"unknow"},ut.prototype.genFilePath=function(Be,$e){return $e?""+(Be||"")+(Be?f.sep:"")+$e:Be||""},ut.prototype.saveStore=function(Be,$e,St){return void 0===$e&&($e=!0),this.store.saveFile(Be,$e,St).then(function(lt){if(lt)return Be;throw new Error("fail to save file in local store")})},ut.prototype.remove=function(Be,$e){return this.store.removeFile(Be,$e)},ut.prototype.clear=function(Be){return this.store.clear(Be)},ut.prototype.list=function(Be){return this.store.ls(Be)},ut.prototype.updateVersion=function(Be,$e){var St=this;return this.store.findFileByPath(Be).then(function(lt){if(lt)return St.saveStore(T(T({},lt),{version:$e})).then(function(){});throw new Error("the target path: "+Be+" isn't existed")})},ut.prototype.updateSourceURL=function(Be,$e){var St=this;return this.store.findFileByPath(Be).then(function(lt){if(lt)return St.saveStore(T(T({},lt),{sourceURL:$e})).then(function(){});throw new Error("the target path: "+Be+" isn't existed")})},ut}(M);u.IResourceManager=_r,Object.defineProperty(u,"__esModule",{value:!0})}(d,gt)}));function L_(a,d,u,f){const{meeting:{userId:A},audio:{localShareAudioUserMutedList:S},share:{isReceiveSharingFromMainSession:T}}=f;return S.filter(R=>R.userId!==d).forEach(R=>{a.setSharingAudioVolume(R.userId,!0,R.isFromMainSession)}),a.setSharingAudioVolume(d,u,!!T),d===A?ME(u):lf({userId:d,muted:u})}function zm(a,d,u){const{audio:{audioSsrc:f,activeMicrophone:A,activeSpeaker:S,isAllowToTalk:T,isSpeakerOnly:R},meeting:{svcUrl:M,conId:B,reportDomain:H,isAudioBridgeEnabled:$}}=d,ce=ui(d),he=R||$a(ce.userRole)&&!T,ue=u??!he;return Vm()&&!$&&console.warn("Cannot start audio due to the service is not ready."),a.joinComputerAudio(f,A,S,ue,Vm()?{rwgHost:M,cid:B,nginxHost:H}:void 0)}function PA(a,d,u){return Ib.apply(this,arguments)}function Ib(){return Ib=L(function*(a,d,u){const f=[],{audio:{isJoinComputerAudioBeforeSharingAudio:A,mutedBeforeSharingAudio:S}}=u,T=ui(u);return!0===A&&(yield zm(a,u),f.push(nh(void 0)),!1===S&&(f.push(uf(!0)),d.mute(T.userId,!1)),f.push(ep(void 0))),f}),Ib.apply(this,arguments)}function Ym(a,d,u){return bf.apply(this,arguments)}function bf(){return bf=L(function*(a,d,u){const{audio:{isSharingAudio:f},meeting:{userId:A}}=u,S=[];if(S.push(L_(a,A,!0,u)),f){yield a.leaveSharingAudio(!1),S.push(df(!1));const T=yield PA(a,d,u);S.push(...T),setTimeout(()=>{Et("SHARE_AUDIO_STATE_CHANGE",{state:"off"})},0)}return S.push(__(!1)),S}),bf.apply(this,arguments)}function MA(a,d,u){return qm.apply(this,arguments)}function qm(){return qm=L(function*(a,d,u){const{audio:{audioSsrc:f,activeMicrophone:A,activeSpeaker:S}}=u,T=ui(u),R=yield(M=L(function*(B,H){const $=[],ce=ui(H),{audio:{isMicrophoneForbidden:he}}=H;return"computer"===ce?.audio&&($.push(nh(!0)),$.push(ep(ce.muted)),yield B.leaveComputerAudio(),$.push(kE(0)),he&&$.push(Y0(!1))),$}),function(B,H){return M.apply(this,arguments)})(a,u);var M;return yield a.leaveSharingAudio(!0),yield a.joinSharingAudio({ssrc:f,microphoneDeviceId:A,speakerDeviceId:S,isCaptureAudio:$a(T.userRole)}),R.push(__(!0)),R.push(df(!0)),R.push(L_(a,T.userId,!1,u)),R.findIndex(M=>M.type==="".concat(nh)&&!0===M.payload)>-1&&(R.push(uf(!0)),d.mute(u.meeting.userId,!0),Et("AUDIO_CURRENT_USER_MUTED",{source:W.MutedSource.SharingAudio})),setTimeout(()=>{Et("SHARE_AUDIO_STATE_CHANGE",{state:"on"})},0),R}),qm.apply(this,arguments)}const B_=()=>{var a;const d=null===(a=Ta())||void 0===a?void 0:a.toLocaleLowerCase();if(d.indexOf("safari")>-1&&-1===d.indexOf("ios-safari")){var u;const f=null===(u=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))||void 0===u?void 0:u[1];return pN(f||"","15.2")>=0}return!1},uh=ko.createAgent(),$u=jm(_o.getInstance()),Tb=a=>!a.muted;var qC=Object.freeze({__proto__:null,audioAsnsEpic:(a,d)=>Mn(a,12033).pipe(Hn(d),Ne(u=>{let[f,A]=u;const{participants:{attendeesList:S,allowTalkAttendeesList:T}}=A,R=f.payload.body,M={};return R&&([...S,...T].forEach(B=>{for(let H=1;H<=3;H++){const $="asn".concat(H),{userId:ce,displayName:he}=B;if(void 0!==R[$]&&ce===R[$]){M[$]={userId:ce,displayName:he};break}}}),Et("AUDIO_ACTIVE_SPEAKER",Object.values(M))),p_(M)})),unmuteConsentAfterSpotlighted:(a,d)=>Mn(a,16135).pipe(Hn(d),dr(u=>{let[f,A]=u;const{payload:{body:{id:S,bLeadershipOn:T}}}=f,{audio:{bCanUnmute:R}}=A,M=ui(A);if(M){const{isHost:B,bCoHost:H,userId:$,audio:ce,muted:he}=M,ue=B||H;T&&$>>10==S>>10&&(null!==ce&&""!==ce&&!0!==he||!ue&&!R||Et("AUDIO_UNMUTE_CONSENT",pd.Spotlight))}}),ai(mt)),unmuteConsentEpic:(a,d)=>Mn(a,12037).pipe(Hn(d),dr(u=>{let[,f]=u;const A=ui(f);null!==A?.audio&&""!==A?.audio&&1==A?.muted&&Et("AUDIO_UNMUTE_CONSENT",pd.Unmute)}),ai(mt)),setAudioAttributeEpic:(a,d)=>Mn(a,gc).pipe(Un(u=>u.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some(f=>void 0!==u.payload.body[f])),Ml(u=>{if(void 0!==u.payload.body.bCanUnmute)return Mw(u.payload.body.bCanUnmute);if(void 0!==u.payload.body.bMutedAll){const f=ui(d.value);if(("computer"===f?.audio||"phone"===f?.audio)&&0==f.muted)return dA(u.payload.body.bMutedAll)}return void 0!==u.payload.body.bMutedUponEntry?Ol(u.payload.body.bMutedUponEntry):void 0})),currentUserAudioChangeEpic:(a,d)=>Mn(a,Ts).pipe(Hn(d),Un(u=>{let[,f]=u;return f.socket.zoomSocketStatus===mi.Connected}),nr(u=>{let[f,A]=u;if(f.payload.body.update&&f.payload.body.update.some(S=>void 0!==S.audio||void 0!==S.muted)){const S=A.meeting.userId,T=f.payload.body.update,[R,M]=v0(Yn(T),He=>He.id===S);M.subscribe(He=>{Et("AUDIO_PARTICIPANT_AUDIO_UPDATE",He)});const{audio:{isActiveOperation:B,isMutedAll:H,isSpeakerOnly:$,isAllowToTalk:ce,isShareAudioEnabled:he,isSharingAudio:ue}}=A;let Se=ui(A);!Se&&f.payload.body.add&&f.payload.body.add.length>0&&(Se=f.payload.body.add.find(He=>He.id===S),Se&&(Se.userRole=Se.role));const Qe=$a(Se.userRole);return R.pipe(dr(function(){var He=L(function*(We){var et,Lt,Gt,jt;if(We.audio!==(null===(et=Se)||void 0===et?void 0:et.audio))if(""===We.audio)Et("AUDIO_CURRENT_USER_LEAVE_AUDIO");else if("computer"===We.audio){const sn=Qe&&!ce||$;ue&&Et("AUDIO_CURRENT_USER_JOIN_BY_VOIP"),sn&&Et("AUDIO_CURRENT_USER_JOIN_BY_VOIP")}else if("phone"===We.audio){var Tt;"computer"===(null===(Tt=Se)||void 0===Tt?void 0:Tt.audio)&&(yield $u.leaveComputerAudio(),uh.joinOrLeaveVoip(!1)),Et("AUDIO_CURRENT_USER_JOIN_BY_PHONE")}null!==(Lt=Se)&&void 0!==Lt&&Lt.audio&&""!==(null===(Gt=Se)||void 0===Gt?void 0:Gt.audio)&&We.muted!==(null===(jt=Se)||void 0===jt?void 0:jt.muted)&&(!0===We.muted?(Et("AUDIO_CURRENT_USER_MUTED",{source:B?W.MutedSource.Active:H?W.MutedSource.PassiveByMuteAll:W.MutedSource.PassiveByMuteOne}),he||$u.muteAudio()):!1===We.muted&&(Et("AUDIO_CURRENT_USER_UNMUTED",{source:B?"active":"passive"}),$u.unmuteAudio()))});return function(We){return He.apply(this,arguments)}}()),Un(He=>{var We,et;return""!==(null===(We=Se)||void 0===We?void 0:We.audio)&&He.muted!==(null===(et=Se)||void 0===et?void 0:et.muted)}),ai(Pn(uf(!1),dA(!1))))}return mt})),handleDialOutEpic:(a,d)=>Mn(a,8198).pipe(Hn(d),Un(u=>{let[f,A]=u;return f.payload.seq==A.audio.dialout.sequence}),dr(u=>{let[f]=u;const A=f.payload.body.result;Et("AUDIO_DIALOUT_RESULT_CODE",{code:A}),A===W.DialoutState.Success?Et("AUDIO_DIALOUT_RESULT_SUCCESS"):-1===[W.DialoutState.Calling,W.DialoutState.Ringing,W.DialoutState.Accepted,W.DialoutState.Success].indexOf(A)&&Et("DIALOUT_FAIL")}),Ne(u=>{let[f]=u;return Ac(f.payload.body.result)})),handleDialouCancelEpic:a=>Mn(a,8198).pipe(Un(d=>{var u;return[W.DialoutState.Canceling,W.DialoutState.Canceled,W.DialoutState.CancelFailed].includes(null===(u=d.payload.body)||void 0===u?void 0:u.result)}),dr(d=>{var u;const f=null===(u=d.payload.body)||void 0===u?void 0:u.result;Et("AUDIO_DIALOUT_RESULT_CODE",{code:f}),f===W.DialoutState.Canceled?Et("AUDIO_DIALOUT_CANCEL_SUCCESS"):f===W.DialoutState.CancelFailed&&Et("DIALOUT_CANCEL_FAIL")}),Ne(d=>Ac(d.payload.body.result))),handleAllowToTalkEpic:(a,d)=>Mn(a,12036).pipe(Hn(d),nr(u=>{let[f,A]=u;const S=ui(A),{media:{audioEncodeStatus:T}}=A,{promoterID:R,bAllowTalk:M}=f.payload.body;if(S?.userId===R){if(Et("AUDIO_ALLOW_TALK_CHANGE",M),M){let B=Pn(!0);return"success"!==T&&($u.enableAudioEncode(),B=hc(Gs("AUDIO_ENCODE_SUCCESS",1).pipe(pc(!0)),Gs("AUDIO_ENCODE_FAIL",1).pipe(pc(!1)))),B.pipe(nr(H=>(H&&Et("AUDIO_UNMUTE_CONSENT",pd.AllowToTalk),mt)),Gp(th(!0)))}if(uh.mute(R,!0),"computer"===S?.audio)return $u.leaveComputerAudio(),pu(300).pipe(dr(L(function*(){(B_()?hc(Ds(document,"click").pipe(ii(1)),Ds(document,"touchend").pipe(ii(1))).toPromise():Promise.resolve(!0)).then(()=>{zm($u,A,!1)})})),ai(mt),Gp(th(!1)))}return mt})),handleAllowToTalkResponseEpic:a=>Mn(a,8205).pipe(dr(d=>{Et("AUDIO_ALLOW_TO_TALK_RESPONSE",d.payload.body)}),ai(mt)),handleAttendeePromoteDepromote:(a,d)=>jh(a,24597).pipe(Hn(d),dr(u=>{let[f,A]=u;const S=ui(A);"phone"===S?.audio&&uh.audioDrop(S.userId)}),ai(mt)),setAudioSSRCEpic:(a,d)=>Mn(a,12035).pipe(Hn(d),nr(u=>{let[f,A]=u;const{meeting:{currentUserAudioBeforeReset:S},media:{audioDecodeStatus:T,audioEncodeStatus:R}}=A,{payload:{body:{ssrc:M}}}=f,B=I_(d).pipe(nr(H=>{if("computer"===S&&(null==H||!H.audio)){const $=$a(H.userRole);return Yc("audio",$?"success":R,T).pipe(Un(ce=>{let[he,ue]=ce;return he&&ue}),dr(()=>{(B_()?hc(Ds(document,"click").pipe(ii(1)),Ds(document,"touchend").pipe(ii(1))).toPromise():Promise.resolve(!0)).then(()=>{uh.joinOrLeaveVoip(!0),zm($u,d.value)});const{audio:{locallyMutedAudioList:ce,localUserAudioVolumeList:he}}=d.value;ce.length>0&&ce.forEach(ue=>{$u.muteOrUnmuteOtherAudio(ue,!0)}),he.length>0&&he.forEach(ue=>{$u.adjustOtherAudioVolume(ue.userId,ue.volume)})}),pc(gN(void 0)))}return mt}));return Zs(Pn(DE(M)),B)})),handleMergeAudioEpic:(a,d)=>Mn(a,7952).pipe(Ho(u=>Gs("AUDIO_CURRENT_USER_JOIN_BY_PHONE",1).pipe(Hn(d),dr(f=>{let[,A]=f;const{BindStatus:S,nOperatorUserId:T}=u.payload.body,R=A.participants.attendeesList.find(M=>M.userId===T);!0===S&&Et("AUDIO_MERGE_AUDIO_INDICATION",{operatorName:R?.displayName,operatorUserId:T,operatorRole:R?.userRole})})))),handleUserGrantAudioCaptureEpic:(a,d)=>Ci(a,Dr.UserGrantCaptureAudio).pipe(Hn(d),nr(u=>{let[,f]=u;Et("AUDIO_CURRENT_USER_JOIN_BY_VOIP");const A=ui(f),{meeting:{isCurrentUserMutedBeforeReset:S},audio:{bMutedUponEntry:T,isUserGrantCaptureAudio:R,isAllowToTalk:M}}=f,B=[f_(!0)];if(A){!0===A.muted&&!1===M&&uh.mute(A.userId,!0);const H=R||A.isHost||M;(!0===S||!H&&T)&&(uh.mute(A.userId,!0),S&&B.push(Jv(void 0)))}return Yn(B)})),handleUserForbiddenMicrophoneEpic:a=>Ci(a,Dr.UserForbiddedCaptureAudio).pipe(dr(()=>{Et("USER_FORBIDDEN_MICROPHONE")}),pc(Y0(!0))),handleAudioSocketErrorEpic:a=>Ci(a,Dr.AudioWebsocketBroken).pipe(dr(()=>{Et("ESTABLISH_AUDIO_STREAM_ERROR")}),ai(mt)),handleAudioZeroDataEpic:(a,d)=>Ci(a,Dr.AudioZeroData).pipe(Hn(d),Ml(u=>{let[,f]=u;const{audio:{webrtcRestartCount:A,activeMicrophone:S}}=f;if(A<3)return $u.restoreWebRTC(S),kE(A+1)})),handleAutoPlayEpic:(a,d)=>a.pipe(Vi("".concat(g_)),Un(u=>!1===u.payload),nr(()=>(Et("AUDIO_AUTO_PLAY_FAILED"),hc(Ds(document,"click").pipe(ii(1)),Ds(document,"touchend").pipe(ii(1))).pipe(dr(()=>{uh.joinOrLeaveVoip(!0),zm($u,d.value)}),pc(g_(!0)))))),handleAudioActionCompleteEpic:a=>Ci(a,[Dr.JoinComputerAudioComplete,Dr.JoinSharingAudioComplete,Dr.LeaveComputerAudioComplete,Dr.LeaveSharingAudioComplete]).pipe(dr(()=>{lR.completeAudioAction()}),ai(mt)),handleAudioQosDataEpic:(a,d)=>Ci(a,Dr.audioQosData).pipe(Hn(d),Ne(u=>{let[f,A]=u;const{meeting:{isWebinar:S},media:{audioEncodeStatus:T,audioDecodeStatus:R},participants:{xmppAttendeeList:M,allowTalkAttendeesList:B}}=A,H=ui(A),$=OE(A);let ce=$.length>0,he=$.some(Tb);S&&(ce=ce||Boolean(M.length),he=he||B.some(Tb));const Se=("computer"===H?.audio||"phone"===H?.audio)&&R&&ce&&he;return f.payload.data.encoding?"computer"!==H?.audio&&"phone"!==H?.audio||!T||null!=H&&H.muted||!ce?Z0(_u):(Et("AUDIO_STATISTIC_DATA",f.payload),Z0(f.payload)):Se?(Et("AUDIO_STATISTIC_DATA",f.payload),xm(f.payload)):xm(_u)})),handleResetLocalMuteStateAfterUserLeaveEpic:(a,d)=>Mn(a,Ts).pipe(Hn(d),Un(u=>{let[f,A]=u;const{payload:{body:S}}=f,{audio:{locallyMutedAudioList:T,localUserAudioVolumeList:R}}=A;return(T.length>0||R.length>0)&&S?.remove&&S.remove.length>0}),nr(u=>{let[f,A]=u;const{payload:{body:{remove:S}}}=f,{audio:{locallyMutedAudioList:T,localUserAudioVolumeList:R}}=A,M=T.concat(R.map(B=>B.userId)).filter(B=>-1!==S.indexOf(H=>H.id===B));return M.length>0?(M.forEach(B=>{$u.muteOrUnmuteOtherAudio(B,!1)}),Yn(M.map(B=>[xw(B),BE({userId:B})]).flat())):mt}))});const Sf=ko.createAgent(),Jm=jm(_o.getInstance());var JC=Object.freeze({__proto__:null,handleAddLocalShareAudioUserEpic:(a,d)=>cd(a,Ts).pipe(Un(u=>{const f=u.payload.body.update;return f&&f.length>0&&f.findIndex(A=>void 0!==A.bShareOn)>-1}),Hn(d),nr(u=>{let[f,A]=u;const{payload:{body:{update:S}}}=f,{audio:{localShareAudioUserMutedList:T}}=A,R=S.filter(B=>!0===B.bShareOn&&!0===B.bShareAudioOn),M=[];return R.length>0&&R.forEach(B=>{-1===T.findIndex(H=>H.userId===B.id)&&M.push(IN({userId:B.id,isFromMainSession:!!B.bShareToBORooms}))}),Yn(M)})),handleShareWithAudioEpic:(a,d)=>Ci(a,Dr.SharingDesktopStreamHaveAudio).pipe(Ho(()=>Mn(a,Ts).pipe(Un(u=>{var f;const{payload:{body:A}}=u,{meeting:{userId:S}}=d.value;return(null==A||null===(f=A.update)||void 0===f?void 0:f.findIndex(T=>T.id===S&&!0===T.bShareOn))>-1}),ii(1),SC(L(function*(){const u=d.value;return yield MA(Jm,Sf,u)})),Gp(__(!0))))),handleMediaSDKLeaveShareAudioEpic:(a,d)=>Ci(a,Dr.SharingDesktopStreamHaveNoAudio).pipe(Hn(d),Un(u=>{var f;let[,A]=u;return!0===(null===(f=A.audio)||void 0===f?void 0:f.isShareAudioEnabled)}),SC(function(){var u=L(function*(f){let[,A]=f;return yield Ym(Jm,Sf,A)});return function(f){return u.apply(this,arguments)}}())),handleJoinComputerAudioAfterShareAudioEpic:(a,d)=>Mn(a,Ts).pipe(Hn(d),Un(u=>{let[,f]=u;return f.socket.zoomSocketStatus===mi.Connected&&!0===f.audio.isSharingAudio}),nr(u=>{var f;let[A,S]=u;if(null!==(f=A.payload.body.update)&&void 0!==f&&f.some(T=>void 0!==T.audio||void 0!==T.muted)){const{meeting:{userId:T}}=S,R=A.payload.body.update.filter(M=>M.id===T);return I_(d).pipe(nr(M=>{const B=[];return R.findIndex(H=>"computer"===H.audio)>-1&&"computer"!==M?.audio&&(B.push(nh(!0)),B.push(ep(!0))),Yn(B)}))}return mt})),handleShareAudioWithCurrentShareStatusChangeEpic:(a,d)=>a.pipe(Vi("".concat(Dl)),po(Ss),Hn(d),Un(u=>{var f;let[,A]=u;return!0===(null===(f=A.audio)||void 0===f?void 0:f.isShareAudioEnabled)}),SC(function(){var u=L(function*(f){let[A,S]=f;const{payload:T}=A,{audio:{isShareAudioMuted:R,isSharingAudio:M}}=S,B=[];if(T===W.ShareStatus.End){const H=yield Ym(Jm,Sf,S);B.push(...H)}else if(T===W.ShareStatus.Paused){if(!1===R&&!0===M){yield Jm.leaveSharingAudio(!0),B.push(df(!1));const H=yield PA(Jm,Sf,S);B.push(...H),setTimeout(()=>{Et("SHARE_AUDIO_STATE_CHANGE",{state:"off"})},0)}}else if(T===W.ShareStatus.Sharing&&!1===R&&!1===M){const H=yield MA(Jm,Sf,S);B.push(...H)}return B});return function(f){return u.apply(this,arguments)}}()))});const XC=ko.createAgent(),$C=_o.getInstance();var MR=Object.freeze({__proto__:null,handleAudioBridgeTokenEpic:a=>Mn(a,4299).pipe(dr(d=>{const{payload:u}=d;$C.passThroughRWGMessage(u)}),ai(mt)),handleAudioBridgeReconnectEpic:a=>Ci(a,Dr.AudioBridgeReconnectStart).pipe(dr(()=>{XC.joinOrLeaveVoip(!1)}),ai(mt)),handleAudioBridgeReconnectSuccessEpic:a=>Ci(a,Dr.AudioBridgeReconnectEnd).pipe(dr(()=>{XC.joinOrLeaveVoip(!0)}),ai(mt)),handleSendNodeAudioStatusEpic:a=>Mn(a,Ts).pipe(Un(d=>{var u,f;return Vm()&&((null===(u=d.payload.body.update)||void 0===u?void 0:u.some(A=>void 0!==A.muted))||(null===(f=d.payload.body.remove)||void 0===f?void 0:f.length)>0)}),dr(d=>{const{payload:{body:{update:u,remove:f}}}=d;$C.sendUserAudioStatus({update:(u||[]).filter(A=>void 0!==A.muted).map(A=>({userId:A.id,muted:A.muted})),remove:(f||[]).map(A=>({userId:A.id}))})}),ai(mt)),handleAudioBridgeFailoverEpic:a=>Ci(a,Dr.NotifyUIFailover).pipe(Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia())))});const wb={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:{sequence:0,returnCode:-1},canPlayAudio:!1,isActiveOperation:!1,isMutedAll:!1,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isSpeakerOnly:!1,localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}}},Rb=na({["".concat(p_)]:Mt((a,d)=>{let{payload:u}=d;a.asnIds=mn({},u)}),["".concat(Mw)]:Mt((a,d)=>{let{payload:u}=d;a.bCanUnmute=u}),["".concat(Zh)]:Mt((a,d)=>{let{payload:u}=d;const{dialout:f}=a;f.sequence=u}),["".concat(Ac)]:Mt((a,d)=>{let{payload:u}=d;const{dialout:f}=a;f.returnCode=u}),["".concat(th)]:Mt((a,d)=>{let{payload:u}=d;a.isAllowToTalk=u,a.isAllowToTalkAttendeeConnected=!1}),["".concat(uf)]:Mt((a,d)=>{let{payload:u}=d;a.isActiveOperation=u}),["".concat(dA)]:Mt((a,d)=>{let{payload:u}=d;a.isMutedAll=u}),["".concat(DE)]:Mt((a,d)=>{let{payload:u}=d;a.audioSsrc=u}),["".concat(Ol)]:Mt((a,d)=>{let{payload:u}=d;a.bMutedUponEntry=u}),["".concat(f_)]:Mt((a,d)=>{let{payload:u}=d;a.isUserGrantCaptureAudio=u}),["".concat(Y0)]:Mt((a,d)=>{let{payload:u}=d;a.isMicrophoneForbidden=u}),["".concat(kE)]:Mt((a,d)=>{let{payload:u}=d;a.webrtcRestartCount=u}),["".concat(NE)]:Mt((a,d)=>{let{payload:u}=d;a.microphoneDevicesList=u}),["".concat(q0)]:Mt((a,d)=>{let{payload:u}=d;a.speakerDevicesList=u}),["".concat(m_)]:Mt((a,d)=>{let{payload:u}=d;a.activeMicrophone=u}),["".concat(J0)]:Mt((a,d)=>{let{payload:u}=d;a.activeSpeaker=u}),["".concat(g_)]:Mt((a,d)=>{let{payload:u}=d;a.canPlayAudio=u}),["".concat(X0)]:(a,d)=>{let{dialout:{returnCode:u},locallyMutedAudioList:f,localUserAudioVolumeList:A}=a,{payload:S}=d;return S?mn(mn({},wb),{},{dialout:mn(mn({},wb.dialout),{},{returnCode:u}),locallyMutedAudioList:f,localUserAudioVolumeList:A}):mn({},wb)},["".concat(gd)]:Mt((a,d)=>{let{payload:u}=d;a.isComputerAudioLoading=u}),["".concat(PE)]:Mt((a,d)=>{let{payload:u}=d;a.isSpeakerOnly=u}),["".concat($0)]:Mt((a,d)=>{let{payload:u}=d;a.isAllowToTalkAttendeeConnected=u}),["".concat(ep)]:Mt((a,d)=>{let{payload:u}=d;a.mutedBeforeSharingAudio=u}),["".concat(df)]:Mt((a,d)=>{let{payload:u}=d;a.isSharingAudio=u}),["".concat(ME)]:Mt((a,d)=>{let{payload:u}=d;a.isShareAudioMuted=u}),["".concat(IN)]:Mt((a,d)=>{let{payload:u}=d;const{userId:f,isFromMainSession:A}=u;-1===a.localShareAudioUserMutedList.findIndex(S=>S.userId===f)&&a.localShareAudioUserMutedList.push({userId:f,isFromMainSession:A,muted:!1})}),["".concat(lf)]:Mt((a,d)=>{let{payload:u}=d;const f=a.localShareAudioUserMutedList.find(A=>A.userId===u.userId);f&&(f.muted=u.muted)}),["".concat(nh)]:Mt((a,d)=>{let{payload:u}=d;a.isJoinComputerAudioBeforeSharingAudio=u}),["".concat(__)]:Mt((a,d)=>{let{payload:u}=d;a.isShareAudioEnabled=u}),["".concat(Z0)]:Mt((a,d)=>{let{payload:u}=d;a.statistic.encode=u.data}),["".concat(xm)]:Mt((a,d)=>{let{payload:u}=d;a.statistic.decode=u.data}),["".concat(xE)]:Mt((a,d)=>{let{payload:u}=d;-1===a.locallyMutedAudioList.findIndex(f=>f===u)&&a.locallyMutedAudioList.push(u)}),["".concat(xw)]:Mt((a,d)=>{let{payload:u}=d;const f=a.locallyMutedAudioList.findIndex(A=>A===u);-1!==f&&a.locallyMutedAudioList.splice(f,1)}),["".concat(LE)]:Mt((a,d)=>{let{payload:u}=d;const f=a.localUserAudioVolumeList.find(A=>A.userId===u.userId);f?f.volume=u.volume:a.localUserAudioVolumeList.push(u)}),["".concat(BE)]:Mt((a,d)=>{let{payload:u}=d;const f=a.localUserAudioVolumeList.findIndex(A=>A.userId===u.userId);-1!==f&&a.localUserAudioVolumeList.splice(f,1)})},wb),xR=Fu(qC,JC,MR),LR=a=>4294966272&a,ZC=a=>{let d={R:0,G:0,B:0,A:0};if("string"==typeof a&&a.startsWith("#")){const R=a.slice(1);try{if(3===R.length){const M=Array.from(R).map(B=>B.repeat(2)).map(B=>parseInt(B,16));d={R:M[0]/255,G:M[1]/255,B:M[2]/255,A:1}}else if(6===R.length||8===R.length){var u,f,A,S,T;const M=null===(u=R.match(/\S{2}/g))||void 0===u?void 0:u.map(B=>parseInt(B,16));d={R:(null!==(f=M?.[0])&&void 0!==f?f:0)/255,G:(null!==(A=M?.[1])&&void 0!==A?A:0)/255,B:(null!==(S=M?.[2])&&void 0!==S?S:0)/255,A:null!=M&&M[3]?(null!==(T=M?.[3])&&void 0!==T?T:0)/255:1}}}catch{console.warn("error color representation:",a)}}else"object"==typeof a&&(d={R:a.R/255,G:a.G/255,B:a.B/255,A:a.A||1});return d};function Xc(a){return void 0!==a?Yn(Promise.resolve(a)):Gs("VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",1).pipe(Ne(d=>d))}function F_(a,d,u){return Xm.apply(this,arguments)}function Xm(){return Xm=L(function*(a,d,u){if("blur"===a)return"blur";{let f=a;if(d){const A=yield(S=a,new Promise((T,R)=>{try{const M=document.createElement("canvas"),B=M.getContext("2d"),H=new Image;H.src=S;const $=16/9,ce=1280,he=Math.floor(ce/$);M.width=ce,M.height=he,H.onload=()=>{const{width:ue,height:Se}=H,Qe=Se*$;if(Qe>ce){const He=ue,We=Math.floor(ue/$);B?.drawImage(H,0,(Se-We)/2,He,We,0,0,ce,he)}else B?.drawImage(H,(ue-Qe)/2,0,Qe,Se,0,0,ce,he);M.toBlob(He=>{T(He)})}}catch(M){M instanceof DOMException&&M.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),R(M)}}));f=URL.createObjectURL(A)}if(f){const A=Math.floor(100*Math.random()),S="".concat("__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__").concat(A),T=document.createElement("img");return T.src=f,T.id=S,T.style.display="none",T.onload=()=>{d&&URL.revokeObjectURL(f)},T.onerror=R=>{d&&URL.revokeObjectURL(f),console.error("Cannot load virtual background image.",R)},(u??document.body).appendChild(T),new Promise(R=>{T.onload=()=>{d&&URL.revokeObjectURL(f),R(S)},T.onerror=M=>{d&&URL.revokeObjectURL(f),console.error("Cannot load virtual background image.",M),R(null)}})}}var S;return null}),Xm.apply(this,arguments)}function BR(a,d,u,f){return hp.apply(this,arguments)}function hp(){return hp=L(function*(a,d,u,f){var A;const S=null!==(A=f&&f.parentNode)&&void 0!==A?A:document.body,{imageUrl:T,cropped:R,captureHeight:M,captureWidth:B,cameraId:H}=a,$=document.createElement("div");let ce;$.style.display="none",ce=T?yield F_(T,R,$):null;const he=Math.floor(100*Math.random());let ue="".concat("__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__").concat(he);if(f){const Qe=T_(f);Qe.id?ue=Qe.id:Qe.id=ue}else{const Qe=document.createElement("canvas");Qe.width=380,Qe.height=214,Qe.id=ue,$.appendChild(Qe)}S?.appendChild($);const{video:{videoSsrc:Se}}=u;return d.startVirtualBackgroundSetting(ue,ce,Se,H,B,M),$}),hp.apply(this,arguments)}function Ob(a,d,u){return eI.apply(this,arguments)}function eI(){return eI=L(function*(a,d,u){if(a){const f=yield F_(a,d);f&&(u.updateVirtualBackgroundImage(f),"blur"!==f&&setTimeout(()=>{var A;const S=document.getElementById(f);null==S||null===(A=S.parentNode)||void 0===A||A.removeChild(S)},0))}else u.updateVirtualBackgroundImage(null)}),eI.apply(this,arguments)}function FR(a,d){return"default"===a||d.some(u=>u.deviceId===a)||[W.MobileVideoFacingMode.Environment,W.MobileVideoFacingMode.User,W.MobileVideoFacingMode.Left,W.MobileVideoFacingMode.Right].includes(a)}const xA=ko.createAgent(),U_=_o.getInstance();var UR=Object.freeze({__proto__:null,handleStartCaptureVideoSuccessEpic:(a,d)=>Ci(a,Dr.StartVideoCaptureSuccess).pipe(Hn(d),Ml(u=>{let[,f]=u;const{video:{cameraDevicesList:A,activeCamera:S},meeting:{userId:T}}=f;return A.length<1?(Et("CAN_NOT_DETECT_CAMERA",{reason:"Cannot detect camera devices"}),void U_.stopCaptureVideo()):FR(S,A)?void xA.muteAttendeeVideo(T,!1):(Et("CAN_NOT_FIND_CAMERA",{reason:"cannot find target camera"}),void U_.stopCaptureVideo())})),startVideoResponse:(a,d)=>Mn(a,Ts).pipe(Hn(d),Un(u=>{var f,A,S,T;let[R,M]=u;return(null==R||null===(f=R.payload)||void 0===f||null===(A=f.body)||void 0===A||null===(S=A.update)||void 0===S||null===(T=S[0])||void 0===T?void 0:T.id)===M.meeting.userId}),Un(u=>{var f,A,S,T;let[R]=u;return!0===(null==R||null===(f=R.payload)||void 0===f||null===(A=f.body)||void 0===A||null===(S=A.update)||void 0===S||null===(T=S[0])||void 0===T?void 0:T.bVideoOn)}),Ml(()=>(Et("VIDEO_CAPTURE_START_SUCCESS"),zo(!0)))),handleForbiddenCaptureVideoEpic:a=>Ci(a,Dr.UserForbiddedCaptureVideo).pipe(dr(()=>Et("VIDEO_USER_FORBIDDEN_CAPTURE")),pc(Gc(!0))),handleCameraIsTakenByOtherProgramsEpic:a=>Ci(a,Dr.UserCameraIsTakenByOtherPrograms).pipe(dr(()=>Et("VIDEO_CAMERA_IS_TAKEN",{reason:"User camera is taken by other programs."})),pc(WE(!0))),handleVideoSocketErrorEpic:a=>Ci(a,Dr.VideoWebsocketBroken).pipe(dr(()=>{Et("VIDEO_ESTABLISH_STREAM_ERROR",{reason:"Video websocket broken."})}),ai(mt)),handleStopVideoCaptureFailedEpic:a=>Ci(a,Dr.StopVideoCaptureFailed).pipe(dr(()=>{Et("VIDEO_CAPTURE_STOP_RESULT",{failed:!0,reason:"Unknown."})}),ai(mt)),handleStopVideoCaptureSuccessEpic:(a,d)=>Ci(a,Dr.StopVideoCaptureSuccess).pipe(Hn(d),Ml(u=>{let[,f]=u;const{meeting:{userId:A},video:{isCurrentUserStartedVideo:S}}=f;S||Et("VIDEO_CAPTURE_STOP_RESULT"),xA.muteAttendeeVideo(A,!0)})),stopVideoResponse:(a,d)=>Mn(a,Ts).pipe(Hn(d),Un(u=>{var f,A,S,T;let[R,M]=u;return(null==R||null===(f=R.payload)||void 0===f||null===(A=f.body)||void 0===A||null===(S=A.update)||void 0===S||null===(T=S[0])||void 0===T?void 0:T.id)===M.meeting.userId}),Un(u=>{var f,A,S,T;let[R]=u;return!1===(null==R||null===(f=R.payload)||void 0===f||null===(A=f.body)||void 0===A||null===(S=A.update)||void 0===S||null===(T=S[0])||void 0===T?void 0:T.bVideoOn)}),Ml(()=>(Et("VIDEO_CAPTURE_STOP_RESULT"),zo(!1)))),receiveVideoMuteIndication:(a,d)=>Mn(a,16133).pipe(Hn(d),Un(u=>{var f,A;let[S,T]=u;return(null==S||null===(f=S.payload)||void 0===f||null===(A=f.body)||void 0===A?void 0:A.id)===T.meeting.userId}),Ml(u=>{let[f]=u;const{id:A,bVideoMute:S}=f.payload.body;return Et("RECEIVE_VIDEO_MUTE_INDICATION",{id:A,isVideoMuted:S}),!0===S&&U_.stopCaptureVideo(),!1===S&&Et("ASK_FOR_START_VIDEO_CONSENT",{id:A,isVideoMuted:S}),Wc(S)})),receiveVideoActiveIndication:a=>Mn(a,16129).pipe(Ne(d=>{const{payload:{body:{id:u,bVideoOn:f}}}=d,A=LR(u);return Et("RECEIVE_VIDEO_ACTIVE_INDICATION",{bVideoOn:f,userId:A}),GE({bVideoOn:f,userId:A})})),receiveVideoSsrcIndication:(a,d)=>Mn(a,16131).pipe(Un(u=>void 0!==u.payload.body.ssrc),Hn(d),Ho(u=>{let[f,A]=u;const{meeting:{isCurrentUserStartVideoBeforeReset:S},media:{videoEncodeStatus:T},video:{isVerifiedVideoCaptureCanvasAfterFailover:R}}=A,{payload:{body:{ssrc:M}}}=f,B=I_(d).pipe(nr(H=>H&&!0===S&&!0!==H.bVideoOn?Yc("video",T,"success").pipe(Un($=>{let[ce,he]=$;return ce&&he}),nr(()=>{const $=[zo(void 0)],{video:{captureCanvasList:ce,activeCamera:he,customizedVideoOption:ue}}=d.value;return!1===R&&(Array.isArray(ce)?ce.forEach(Se=>{T_(document.querySelector("#".concat(Se)))}):T_(document.querySelector("#".concat(ce))),$.push(Uw(!0))),_o.getInstance().startCaptureVideo(M,he,ue?.captureWidth||0,ue?.captureHeight||0,ue?.videoDOMId,ld(),!(null!=ue&&ue.originalRatio)&&qp()),Yn($)})):mt));return Zs(Pn(pA(M)),B)})),receiveVideoDecodeMaxSizeEpic:(a,d)=>Ci(a,Dr.VideoDecodeMaxSize).pipe(Un(u=>{var f;return null==u||null===(f=u.payload)||void 0===f?void 0:f.data}),Ne(u=>{const{size:f}=u.payload.data,{video:{renderedVideoList:A,receivedVideoMaxQuality:S}}=d.value,T=A.filter(R=>R.videoQuality===W.VideoQuality.Video_720P);return S!==f&&T.length>0&&(f!==W.VideoQuality.Video_720P&&S!==W.VideoQuality.Video_720P||T.forEach(R=>{xA.subscribeVideo(R.userId,f,!1)})),Fw(f)})),spotlightVideoResponseEpic:a=>Mn(a,16135).pipe(Ne(d=>{const{payload:{body:{bLeadershipOn:u,id:f}}}=d,A=[];return u&&A.push(LR(f)),Et("VIDEO_SPOTLIGHT_CHANGE",{spotlightList:A}),hf(A)})),handleGroupLayoutIndicationEpic:(a,d)=>Mn(a,7958).pipe(Hn(d),Ne(u=>{let[f,A]=u;const{payload:{body:S}}=f;let T=[];S&&S.group_list&&S.group_list[0]&&(T=S.group_list[0].map(M=>M.id));const R=Ks(A);return T=T.filter(M=>R.findIndex(B=>B.userId===M)>=0),Et("VIDEO_SPOTLIGHT_CHANGE",{spotlightList:T}),hf(T)})),handleCurrentVideoResolution:a=>Ci(a,Dr.CurrentVideoResolution).pipe(Ml(d=>(Et("VIDEO_RENDER_START_SUCCESS"),Et("RECEIVE_VIDEO_DIMENSION_CHANGE",d.payload.data),Lm(d.payload.data)))),handleMeetingVideoAttributeEpic:a=>Mn(a,gc).pipe(Un(d=>{const{payload:{body:u}}=d;return void 0!==u?.bFollowHostVideo||void 0!==u?.VideoHd||void 0!==u?.bCanUnmuteVideo}),Ne(d=>{const{payload:{body:{bFollowHostVideo:u,VideoHd:f,bCanUnmuteVideo:A}}}=d;return void 0!==u?(Et("VIDEO_FOLLOW_HOST_ORDER_CHANGE",{bOn:u}),sC(u)):void 0!==A?v_(A):(U_.enableHardwareAccelerationForVideoEncode(!1),Qw(1===f))})),handleHostDragLayoutIndicationEpic:(a,d)=>Mn(a,7957).pipe(Hn(d),Ne(u=>{let[f,A]=u;const{video:{isFollowHostVideoLayout:S}}=A,{payload:{body:T}}=f,R=T&&T.drag_list&&T.drag_list.map(M=>M.id);return S&&Et("VIDEO_HOST_DRAG_LAYOUT_CHANGE",{layout:R}),Vw(R)})),handlePeerVideoStateChangeEpic:(a,d)=>Mn(a,Ts).pipe(Hn(d),Un(u=>{let[f,A]=u;const{meeting:{userId:S},video:{subscribedVideoList:T}}=A,R=f.payload.body.update,M=f.payload.body.remove;return R&&R.length>0&&R.findIndex(B=>B.id!==S&&(void 0!==B.bVideoOn||B.bHold))>-1||M&&M.some(B=>T.includes(B.id))}),dr(u=>{let[f,A]=u;const{payload:{body:{remove:S,update:T}}}=f,{video:{subscribedVideoList:R}}=A,M=z0(A);if(S&&S.length>0&&S.filter(B=>R.includes(B.id)).forEach(B=>{Et("VIDEO_OLD_USER_STOP",{userId:B.id})}),T&&T.length>0){const B=T.filter($=>void 0!==$.bVideoOn).filter($=>-1===M.findIndex(ce=>ce.userId===$.id)),H=T.filter($=>!0===$.bHold);H.length>0&&H.filter($=>R.includes($.id)).forEach($=>{Et("VIDEO_OLD_USER_STOP",{userId:$.id})}),B.forEach($=>{Et($.bVideoOn?"VIDEO_NEW_USER_START":"VIDEO_OLD_USER_STOP",{userId:$.id})})}}),ai(mt)),handleVideoQosDataEpic:(a,d)=>Ci(a,Dr.videoQosData).pipe(Hn(d),Ne(u=>{let[f,A]=u;const{video:{isCaptureForbidden:S,isCameraTaken:T},media:{videoEncodeStatus:R,videoDecodeStatus:M}}=A,B=ui(A),H=OE(A),$=H.length>0,ce=B?.bVideoOn&&!S&&!T,he=H.some(Qe=>Qe.bVideoOn),Se=M&&$&&he;return f.payload.data.encoding?R&&ce&&$?(Et("VIDEO_STATISTIC_DATA",f.payload),rp(f.payload)):rp(tf):Se?(Et("VIDEO_STATISTIC_DATA",f.payload),gA(f.payload)):gA(tf)})),handleVideoCellChangeEpic:a=>Ci(a,[66.5,66.6]).pipe(dr(d=>{const{payload:{type:u,data:f}}=d;if(66.5===u){const{ssrc:A,width:S,height:T,quality:R}=f;Et("VIDEO_CELL_DETAILED_DATA",{userId:A,width:S,height:T,quality:R})}else if(66.6===u){const{ssrc:A,fps:S}=f;Et("VIDEO_CELL_DETAILED_DATA",{userId:A,fps:S})}}),ai(mt)),handleMaximumNumberOfHDSubscriptionsEpic:a=>a.pipe(Vi("".concat(ls)),nr(L(function*(){return ld()?1:(yield _o.isSupportVideoDecodeHardwareAcceleration())?4:1})),Ne(d=>zE(d)))}),qN=Object.freeze({__proto__:null,handleVBPreloadEpic:a=>Ci(a,[Dr.VbModelPreloadingOk,Dr.VbModelPreloading_3S,Dr.VbModelPreloading_10S,Dr.VbSettingParaError]).pipe(nr(d=>{const{payload:{type:u,data:f}}=d,A=[];return[Dr.VbModelPreloadingOk,Dr.VbModelPreloading_3S,Dr.VbModelPreloading_10S].includes(u)?(A.push(YE(!0)),Et("VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",!0),u===Dr.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):u===Dr.VbSettingParaError&&(f===l_.VBModelNotMatch?(Et("VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",!1),A.push(YE(!1))):(Et("VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",!1),A.push(A_(!1)))),Yn(A)})),handleVBSettingSuccessEpic:a=>Ci(a,Dr.StartVideoStreamInVbSettingSuccess).pipe(Ne(()=>(Et("VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",!0),A_(!0))))});const Db={videoSsrc:0,cameraDevicesList:[],activeCamera:ld()?W.MobileVideoFacingMode.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,receivedVideoMaxQuality:W.VideoQuality.Video_360P,captureCanvasList:[],subscribedVideoList:[],renderedVideoList:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,receivedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}},hardwareAcceleration:{encode:!1,decode:!1}},JN=na({["".concat(pA)]:Mt((a,d)=>{let{payload:u}=d;a.videoSsrc=u}),["".concat(fA)]:Mt((a,d)=>{let{payload:u}=d;a.cameraDevicesList=u}),["".concat(zs)]:Mt((a,d)=>{let{payload:u}=d;a.activeCamera=u}),["".concat(GE)]:Mt((a,d)=>{let{payload:u}=d;a.activeVideoId=u.userId}),["".concat(zo)]:Mt((a,d)=>{let{payload:u}=d;a.isCurrentUserStartedVideo=u}),["".concat(hf)]:Mt((a,d)=>{let{payload:u}=d;a.spotlightUserList=u}),["".concat(Gc)]:Mt((a,d)=>{let{payload:u}=d;a.isCaptureForbidden=u}),["".concat(Fw)]:Mt((a,d)=>{let{payload:u}=d;a.receivedVideoMaxQuality=u}),["".concat(mA)]:Mt((a,d)=>{let{payload:u}=d,f=u;Array.isArray(u)||(f=[u]),a.captureCanvasList=f}),["".concat(Wc)]:Mt((a,d)=>{let{payload:u}=d;a.isVideoMuted=u}),["".concat(pf)]:Mt((a,d)=>{let{payload:u}=d;a.isCaptureCameraLoading=u}),["".concat(WE)]:Mt((a,d)=>{let{payload:u}=d;a.isCameraTaken=u}),["".concat(Uw)]:Mt((a,d)=>{let{payload:u}=d;a.isVerifiedVideoCaptureCanvasAfterFailover=u}),["".concat(KE)]:Mt((a,d)=>{let{payload:u}=d;a.isVerifiedVideoRenderCanvasAfterFailover=u}),["".concat(Lm)]:Mt((a,d)=>{let{payload:u}=d;a.receivedVideoDimension=u}),["".concat(_d)]:Mt((a,d)=>{let{payload:u}=d;a.subscribedVideoList.includes(u)||a.subscribedVideoList.push(u)}),["".concat(oC)]:Mt((a,d)=>{let{payload:u}=d;const f=a.subscribedVideoList.indexOf(u);f>=0&&a.subscribedVideoList.splice(f,1)}),["".concat(rh)]:Mt((a,d)=>{let{payload:u}=d;const f=a.renderedVideoList.find(A=>A.userId===u.userId&&A.key===u.key&&A.canvasId===u.canvasId);f?f.videoQuality=u.videoQuality:a.renderedVideoList.push(mn({},u))}),["".concat(jw)]:Mt((a,d)=>{let{payload:u}=d;const f=a.renderedVideoList.findIndex(A=>A.userId===u.userId&&A.key===u.key&&A.canvasId===u.canvasId);f>=0&&a.renderedVideoList.splice(f,1)}),["".concat(sC)]:Mt((a,d)=>{let{payload:u}=d;a.isFollowHostVideoLayout=u}),["".concat(Vw)]:Mt((a,d)=>{let{payload:u}=d;a.hostDragLayout=u}),["".concat(Qw)]:Mt((a,d)=>{let{payload:u}=d;a.isSupportHDVideo=u}),["".concat(zE)]:Mt((a,d)=>{let{payload:u}=d;a.maximumNumbeOfHDSubscriptions=u}),["".concat(v_)]:Mt((a,d)=>{let{payload:u}=d;a.bCanUnmuteVideo=u}),["".concat(YE)]:Mt((a,d)=>{let{payload:u}=d;a.virtualBackground.isVBPreloadReady=u}),["".concat(A_)]:Mt((a,d)=>{let{payload:u}=d;a.virtualBackground.isVBConfigured=u}),["".concat(np)]:Mt((a,d)=>{let{payload:u}=d;a.virtualBackground.imageSrc=u.imageSrc,a.virtualBackground.cropped=u.cropped}),["".concat(y_)]:Mt((a,d)=>{let{payload:u}=d;const{encode:f,decode:A}=u;void 0!==f&&(a.hardwareAcceleration.encode=f),void 0!==A&&(a.hardwareAcceleration.decode=A)}),["".concat(rp)]:Mt((a,d)=>{let{payload:u}=d;a.statistic.encode=u.data}),["".concat(gA)]:Mt((a,d)=>{let{payload:u}=d;a.statistic.decode=u.data}),["".concat(kl)]:Mt((a,d)=>{let{payload:u}=d;const{cameraId:f,captureWidth:A,captureHeight:S,videoDOMId:T,originalRatio:R}=u;a.activeCamera=f,a.customizedVideoOption={captureWidth:A,captureHeight:S,videoDOMId:T,originalRatio:R}}),["".concat(tp)]:a=>mn(mn({},Db),{},{captureCanvasList:a.captureCanvasList,activeCamera:a.activeCamera,isVerifiedVideoCaptureCanvasAfterFailover:!1,isVerifiedVideoRenderCanvasAfterFailover:!1,customizedVideoOption:a.customizedVideoOption})},Db),VR=Fu(UR,qN),{InitSuccessVideo:tI,InitSuccessAudio:nI,InitSuccessSharing:rI,InitFailedVideo:Bl,InitFailedAudio:V_,InitFailedSharing:iI}=Dr;let Cf;const kb=new Ue(i_(BC,DR,zN,Fu(Object.freeze({__proto__:null,connectToMediaStreamEpic:(a,d)=>a.pipe(Vi("".concat(ls)),Hn(d),Un(u=>{let[,f]=u;return void 0!==f.media.assetsPath&&void 0!==f.media.mediaConstraints}),dr(u=>{let[,f]=u;const{media:{assetsPath:A,mediaConstraints:S,fileWithVersion:T,enforceMultipleVideos:R},meeting:{enableAudioQos:M,enableVideoQos:B}}=f;if(Cf=_o.getInstance(),Cf.notifySDKMeetingReady(),A&&S){const H={};Ra()&&Object.assign(H,{enableMultiDecodeVideoWithoutSAB:!!R}),ab()&&Object.assign(H,{resourceManager:YC.IResourceManager,file:[{path:"".concat(A,"/vb-resources/vbbuffer.bin"),type:"bin"},{path:"".concat(A,"/vb-resources/tf.min.js"),type:"js"}]}),Cf.setAssetsAndConstraint(A,S,T,H)}I_(d).pipe(Hn(d)).subscribe(H=>{let[$,ce]=H;const{meeting:{svcUrl:he,meetingNumber:ue,conId:Se,e2eEncrypt:Qe,userId:He,isWebinar:We}}=ce;var et;$&&(null===(et=Cf)||void 0===et||et.connect({svcUrl:he,meetingNumber:ue,conId:Se,e2eEncrypt:Qe,isViewOnly:$a($.userRole),currentUserId:He,isWebinar:We,enableAudioQos:M,enableVideoQos:B}))})}),Ho(()=>Yd(u=>{var f;return null===(f=Cf)||void 0===f?void 0:f.registerCallback(u)},u=>{var f;return null===(f=Cf)||void 0===f?void 0:f.unregisterCallback(u)},(u,f)=>({type:u,data:f})).pipe(Ne(u=>zv(u))))),connectedMediaStreamEpic:a=>Ci(a,[tI,nI,rI,Bl,V_,iI]).pipe(aR(d=>{const{payload:{type:u,data:f}}=d;if(u===nI||u===V_){if(f===Xa.EncodeSuccess)return Et("AUDIO_ENCODE_SUCCESS"),Pn(hm("success"));if(f===Xa.DecodeSuccess)return Et("AUDIO_DECODE_SUCCESS"),Pn(Ei("success"));if(f===Xa.EncodeFailed)return Et("AUDIO_ENCODE_FAIL"),Pn(hm("failed"));if(f===Xa.DecodeFailed)return Et("AUDIO_DECODE_FAIL"),Pn(Ei("failed"))}else if(u===tI||u===Bl){if(f===Xa.EncodeSuccess)return Et("VIDEO_ENCODE_SUCCESS"),Pn(pm("success"));if(f===Xa.DecodeSuccess)return Et("VIDEO_DECODE_SUCCESS"),Pn(fm("success"));if(f===Xa.EncodeFailed)return Et("VIDEO_ENCODE_FAIL"),Pn(pm("failed"));if(f===Xa.DecodeFailed)return Et("VIDEO_DECODE_FAIL"),Pn(fm("failed"))}else if(u===rI||u===iI){if(f===Xa.EncodeSuccess)return Et("SHARING_ENCODE_SUCCESS"),Pn(lE("success"));if(f===Xa.DecodeSuccess)return Et("SHARING_DECODE_SUCCESS"),Pn($d("success"));if(f===Xa.EncodeFailed)return Et("SHARING_ENCODE_FAIL"),Pn(lE("failed"));if(f===Xa.DecodeFailed)return Et("SHARING_DECODE_FAIL"),Pn($d("failed"));if(u===rI&&void 0===f)return Et("SHARING_DECODE_SUCCESS"),Pn($d("success"))}})),mediaDeviceUpdateEpic:(a,d)=>Ci(a,[tI,nI]).pipe(cR(()=>{if("object"==typeof navigator.mediaDevices)return Zs(uR(),Zs(Ci(a,Dr.StartVideoCaptureSuccess),Ds(navigator.mediaDevices,"devicechange"),Ci(a,Dr.UserGrantCaptureAudio).pipe(Un(()=>!d.value.audio.isUserGrantCaptureAudio))).pipe(nr(()=>uR().pipe(dr(()=>{Et("MEDIA_DEVICE_CHANGE")}))))).pipe(Hn(d),nr(u=>{let[f,A]=u;const S=[NE(f.microphones),q0(f.speakers),fA(f.cameras)];if(A.audio){const{audio:{activeMicrophone:M,activeSpeaker:B,microphoneDevicesList:H,speakerDevicesList:$}}=A,{microphones:ce,speakers:he}=f,ue=H.filter(Qe=>-1===ce.findIndex(He=>He.deviceId===Qe.deviceId)),Se=$.filter(Qe=>-1===he.findIndex(He=>He.deviceId===Qe.deviceId));var T,R;ue.length>0&&ue[0].deviceId===M&&(null===(T=Cf)||void 0===T||T.changeMicrophone("default"),S.push(m_("default"))),Se.length>0&&Se[0].deviceId===B&&(null===(R=Cf)||void 0===R||R.changeSpeaker("default"),S.push(J0("default")))}return Yn(S)}))})),sendUserNodeListToMediaSDKEpic:(a,d)=>cd(a,Ts).pipe(dr(u=>{const{type:f,payload:{body:A}}=u,S=_o.getInstance(),T=f==="".concat(or);if(A.add){const R=A.add.map(M=>({userid:M.id,sn:M.zoomID&&Tl(M.zoomID)}));if(!T){const{meeting:{gcmSessinKey:M}}=d.value;S.sendUserNodeList(R,M)}S.updateUserMediaSN({added:R,isFromMainSession:T,iVType:Fo.SHARING_DECODE}),T&&S.updateUserMediaSN({added:R,isFromMainSession:T,iVType:Fo.AUDIO_DECODE})}if(A.remove){if(!T){const{meeting:{gcmSessinKey:R}}=d.value;S.sendUserNodeList(A.remove.map(M=>({userid:M.id,bremove:!0})),R)}S.updateUserMediaSN({removed:A.remove.map(R=>R.id),isFromMainSession:T,iVType:Fo.SHARING_DECODE}),T&&S.updateUserMediaSN({removed:A.remove.map(R=>R.id),isFromMainSession:T,iVType:Fo.AUDIO_DECODE})}}),ai(mt)),handleMediaSdkGcmIVResponseEpic:a=>Ci(a,Dr.AesGcmIvResponse).pipe(dr(d=>{const{payload:{data:{workerType:u,iv:f}}}=d,A=cr.get(ds.WebclientIVState);if(A){const S=mn(mn({},A),{},{[u]:f});cr.set(ds.WebclientIVState,S,ji.SessionStorage)}}),ai(mt)),handleMediaEncryptIndication:a=>a.pipe(Vi("".concat(Is)),Un(d=>[nA,Sm,M0].includes(d.payload.evt)),Ne(d=>{const{payload:{evt:u,body:{encryptKey:f,additionalType:A}}}=d;return r_({type:u===nA?"audio":u===Sm?"video":"sharing",encryptKey:f,additionalType:A})}))})))),jR=(a,d,u)=>kb.pipe(nr(f=>f(a,d,u))),XN={meeting:CR,socket:Km,participants:KC,media:YN},j_=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=new(0,zt.constructor)(zt.SchedulerAction),f=new ht,A=void 0,S=function(T){A=T;var R=(new ht).pipe(po(u)),M=(new ht).pipe(po(u)),B=new Wp(R),H=new b0(M,A.getState());return f.pipe(Ne(function($){var ce="dependencies"in a?$(B,H,a.dependencies):$(B,H);if(!ce)throw new TypeError('Your root Epic "'+($.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return ce}),nr(function($){return Yn($).pipe(sE(u),po(u))})).subscribe(A.dispatch),function($){return function(ce){var he=$(ce);return M.next(A.getState()),R.next(ce),he}}};return S.run=function(T){f.next(T)},S}(),LA=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||go;function oI(a){return function(d){for(var u=Object.keys(d),f={},A=0;A<u.length;A++){var S=u[A];"function"==typeof d[S]&&(f[S]=d[S])}var T,M,R=Object.keys(f);try{M=f,Object.keys(M).forEach(function(B){var H=M[B];if(void 0===H(void 0,{type:_n.INIT}))throw new Error(ea(12));if(void 0===H(void 0,{type:_n.PROBE_UNKNOWN_ACTION()}))throw new Error(ea(13))})}catch(M){T=M}return function(M,B){if(void 0===M&&(M={}),T)throw T;for(var H=!1,$={},ce=0;ce<R.length;ce++){var he=R[ce],Se=M[he],Qe=(0,f[he])(Se,B);if(void 0===Qe)throw new Error(ea(14));$[he]=Qe,H=H||Qe!==Se}return(H=H||R.length!==Object.keys(M).length)?$:M}}(mn(mn({},XN),a))}const As=Symbol("store"),Sr=Symbol("getState"),Na=Symbol("dispatch"),If=Symbol("additionFeatures"),$n=Symbol("mediaContext");function Zn(a,d,u){const f=u.value;u.value=function(){const A=this[As];if(A){const{meeting:{isOnHold:M,isMeetingReset:B,meetingStatus:H}}=A.getState();if(H!==vs.Joined)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"closed"});if(B)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"reconnecting"});if(M)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"on hold"})}for(var S=arguments.length,T=new Array(S),R=0;R<S;R++)T[R]=arguments[R];return f.apply(this,T)}}function Id(a,d,u){const f=u.value;u.value=function(){const A=this[As];if(A){const M=A.getState();if(!Ku(M))return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"only host or co-host can do the operation"})}for(var S=arguments.length,T=new Array(S),R=0;R<S;R++)T[R]=arguments[R];return f.apply(this,T)}}function Pa(a,d,u){const f=u.value;u.value=function(){const A=this[As];if(A){const M=A.getState();if(!K0(M))return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"only host can do the operation"})}for(var S=arguments.length,T=new Array(S),R=0;R<S;R++)T[R]=arguments[R];return f.apply(this,T)}}function Qr(a){return function(d,u,f){const A=f.value;f.value=function(){const S=this[As];if(S&&void 0===S.getState()[a])return Promise.reject({type:ur,reason:"Module:".concat(a," is not enabled")});for(var T=arguments.length,R=new Array(T),M=0;M<T;M++)R[M]=arguments[M];return A.apply(this,R)}}}function sI(a){return function(d,u,f){const A=f.value;f.value=function(){const S=this[As];if(S){const{meeting:{meetingOptions:B}}=S.getState();if(!0===B[a])return Promise.reject({type:"OPERATION_LOCKED",reason:"".concat(a," is locked")})}for(var T=arguments.length,R=new Array(T),M=0;M<T;M++)R[M]=arguments[M];return A.apply(this,R)}}}let yu;function BA(a){return function(d,u,f){const A=f.value;f.value=function(S){const T=this[As];if(T){const $=T.getState(),ce=Array.isArray(a)?a:[a];let he=Ks($).find(ue=>ue.userId===S);if(ce.findIndex(ue=>ue===yu.Attendee)>-1&&(he=uA($).find(ue=>ue.userId===S)),!he)return Promise.reject({type:Jr,reason:"no matching user"});{const{meeting:{userId:ue}}=T.getState();for(let Se=0;Se<ce.length;Se++){const Qe=ce[Se];if(Qe===yu.Other&&S===ue)return Promise.reject({type:ur,reason:"operation is not applicable to self"});if(Qe===yu.Self&&S!==ue)return Promise.reject({type:ur,reason:"operation is only applicable to self "});if(Qe===yu.Client&&Nm(he.userType)||Qe===yu.Phone&&!Nm(he.userType))return Promise.reject({types:ur,reason:"improper target client"})}}}for(var R=arguments.length,M=new Array(R>1?R-1:0),B=1;B<R;B++)M[B-1]=arguments[B];const H=[S,...M];return A.apply(this,H)}}}!function(a){a.Self="Self",a.Other="Other",a.Client="Client",a.Phone="Phone",a.Attendee="Attendee"}(yu||(yu={}));class $c{constructor(d){this[As]=void 0,this[Na]=void 0,this[Sr]=void 0,this[If]=void 0,this[As]=d,this[Na]=d.dispatch,this[Sr]=d.getState}}var FA,UA,$m,bc;const pp=ko.createAgent();let QR=(FA=BA(yu.Other),UA=BA(yu.Other),$m=BA(yu.Other),tr((bc=class extends $c{constructor(a){super(a),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(a,d,u){return this.useSDK=!0,this.init(a,d,u)}init(a,d,u){const{[Na]:f,[As]:A}=this;let S=C_,T=u?.fileWithVersion||!1,R="en-US",M="".concat(C_,"/").concat("1502_js_media.min.js");if(u){const{dependentAssets:B,additionalFeatures:H,constraints:$,language:ce,webEndpoint:he}=u;if(ce&&(R=ce),he&&(no=function(Se,Qe){let He=Se;/^https?:\/\//.test(He)||(He="https://".concat(Se));try{const We=new URL(He);if(!Qe)return We.href;if(Qe.hostname)return We.hostname;if(Qe.path)return We.pathname}catch{return""}return""}(he,{hostname:!0})),B===$v.CDN||B===TC)S=TC,M="".concat(TC,"/").concat("1502_js_media.min.js"),T=!0;else if(B===$v.Global||B===C_)S=C_,M="".concat(C_,"/").concat("1502_js_media.min.js"),T=!0;else if(B===$v.CN||B===sb)S=sb,M="".concat(sb,"/").concat("1502_js_media.min.js"),T=!0;else if(B&&/^https?:\/\//.test(B)){let ue=B;"/"===ue[ue.length-1]&&(ue=ue.slice(0,length-2)),S=ue,M=T?"".concat(ue,"/").concat("1502_js_media.min.js"):"".concat(ue,"/").concat("js_media.min.js")}H&&Array.isArray(H)&&H.forEach(ue=>{if(this[If][ue]&&void 0===A.getState()[ue]){const{epic:Se,reducer:Qe,Client:He}=this[If][ue];A.injectReducer(ue,Qe),A.injectEpic(Se);const We=new He(A);this.modules.set(ue,We)}}),null!=$&&$.audio&&void 0===A.getState().audio&&(A.injectReducer("audio",Rb),A.injectEpic(xR)),null!=$&&$.video&&void 0===A.getState().video&&(A.injectReducer("video",JN),A.injectEpic(VR)),null!=$&&$.screen&&void 0===A.getState().share&&(A.injectReducer("share",Cd),A.injectEpic(fR))}return f(T0({apiKey:a,signature:d,language:R,useSDK:this.useSDK})),f(za({mediaConstraints:u&&u.constraints||{},assetsPath:S,fileWithVersion:T,enforceMultipleVideos:u?.enforceMultipleVideos})),void 0!==u?.stayAwake&&f(ci(u.stayAwake)),new Promise((B,H)=>{null!=u&&u.skipJsMedia?B(""):function($,ce,he){const ue=document.createElement("script");ue.type="text/javascript",ue.readyState?ue.onreadystatechange=()=>{"loaded"!==ue.readyState&&"complete"!==ue.readyState||(ue.onreadystatechange=null,ce())}:(ue.onload=()=>{ce()},ue.onerror=()=>{H({type:Jr,reason:"dependent assets are not accessible"})}),ue.src=$,"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(ue):document.getElementsByTagName("head")[0].appendChild(ue)}(M,()=>{B("")})})}on(a,d){((u,f)=>{const A=qh[u];if(A){const S=Gu.get(u);if(S)S.push(f),Gu.set(u,S);else{Gu.set(u,[f]);const R=Zs(...A.map(M=>{const{event:B,payload:H}=M;return Ds(Vc,B).pipe(Ne($=>H($)),po(es))})).subscribe(M=>{const B=Gu.get(u);B&&B.forEach(H=>{H(M)})});rf.push(R)}}})(a,d)}off(a,d){((u,f)=>{if(qh[u]){const A=Gu.get(u);if(Array.isArray(A)){const S=A.filter(T=>T!==f);Gu.set(u,S)}}})(a,d)}getFeatureModule(a){return this.modules.get(a)}leave(){const{[Sr]:a,[Na]:d}=this;return"connected"===a().socket.zoomSocketStatus?(d(qv()),pu(500).pipe(pc("")).toPromise()):Promise.resolve("")}end(){const{[Sr]:a,[Na]:d}=this;return"connected"===a().socket.zoomSocketStatus?(d(Ya()),pu(500).pipe(dr(()=>{H0()}),pc("")).toPromise()):Promise.resolve("")}changeName(a,d){const u=this[As].getState(),{meeting:{bAllowAttendeeRename:f}}=u,A=ui(u),S=$a(A.userRole),T=Ku(u);if(S)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES"});if(d&&d!==A?.userId){if(T){const{participants:{attendeesList:R}}=u,M=R.find(B=>B.userId===d);if(M)return pp.rename(d,Hs(a),Hs(M.displayName)),bC(d,B=>B.displayName===a);{const B=uA(u).find(H=>H.userId===d);if(B){const H=P_.getInstance();return pp.rename(B.userId,Hs(a),Hs(B.displayName)),H.rename(B.jid,a),wi("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",$=>{const ce=$.find(he=>he.jid===B.jid);return ce&&ce.displayName===a})}return Promise.reject({type:Jr,reason:"no matching user"})}}return Promise.reject({type:"INSUFFICIENT_PRIVILEGES"})}return a===A.displayName?Promise.resolve():T||f?(pp.rename(A.userId,Hs(a),Hs(A.displayName)),wi("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",R=>R.displayName===a)):Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"host disallow rename themselves"})}makeHost(a){return pp.assignHost(a,!1),bC(a,d=>!0===d.isHost)}makeCoHost(a){const d=this[As].getState();return!0===Ks(d).find(f=>f.userId===a)?.bCoHost?Promise.reject({type:Jr,reason:"user:[".concat(a,"] is already co-host ")}):(pp.assignHost(a,!0),bC(a,f=>!0===f.bCoHost))}revokeCoHost(a){const d=this[As].getState();return!1===Ks(d).find(f=>f.userId===a)?.bCoHost?Promise.reject({type:Jr,reason:"user:[".concat(a,"] is not a co-host")}):(pp.revokeCoHost(a),bC(a,f=>!1===f.bCoHost))}isHost(){const a=this[As].getState(),d=ui(a);return!!d&&d.isHost}isCoHost(){const a=this[As].getState(),d=ui(a);return!!d&&!!d.bCoHost}isOriginHost(){const{meeting:{isOriginHost:a}}=this[Sr]();return a}getCurrentUserInfo(){const a=this[As].getState(),d=ui(a);if(d){const u={userId:d.userId,displayName:d.displayName,audio:d.audio,muted:d.muted,isHost:d.isHost,isCoHost:d.bCoHost,isGuest:d.bGuest,avatar:d.avatar,isPhoneUser:Nm(d.userType),bRaiseHand:d.bRaiseHand,bHold:d.bHold,bVideoOn:d.bVideoOn,sharerOn:d.sharerOn,sharePause:d.sharerPause,feedback:d.feedback,caps:d.caps};if(a.meeting.isWebinar&&$a(d.userRole)){const{audio:f}=a,A=f?.isAllowToTalk;Object.assign(u,{isAllowToTalk:A})}return u}return null}getParticipantsList(){const a=this[As].getState(),{meeting:{meetingStatus:d}}=a,u=ui(a);return d===vs.Joined&&u&&!u.bHold?Ks(a).map(f=>({userId:f.userId,displayName:f.displayName,audio:f.audio,muted:f.muted,isHost:f.isHost,isCoHost:f.bCoHost,isGuest:f.bGuest,avatar:f.avatar,isPhoneUser:Nm(f.userType),bRaiseHand:f.bRaiseHand,bHold:f.bHold,bVideoOn:f.bVideoOn,sharerOn:f.sharerOn,sharePause:f.sharerPause,feedback:f.feedback,bLocalRecord:f.bLocalRecord,strPronoun:f.strPronoun,sdkKey:f.sdkKey,audioConnectionStatus:f.audioConnectionStatus,caps:f.caps})):[]}getAssistantsList(){const a=this[As].getState(),{meeting:{meetingStatus:d}}=a,u=ui(a);return d===vs.Joined&&u?CN(a).map(f=>({userId:f.userId,displayName:f.displayName,isNewAst:!0})):[]}getMeetingHost(){var a;const d=this[Sr]();let u=cf(d);return u||(null===(a=d.breakoutRoom)||void 0===a?void 0:a.currentRoom.status)!==lr.InRoom||(u=d.breakoutRoom.mainSessionAttendeeList.find(f=>f.isHost)),u?{userId:u.userId,displayName:u.displayName,audio:u.audio,muted:u.muted,isHost:u.isHost,isCoHost:u.bCoHost,avatar:u.avatar,isPhoneUser:Nm(u.userType),bRaiseHand:u.bRaiseHand,bHold:u.bHold,bVideoOn:u.bVideoOn,sharerOn:u.sharerOn,feedback:u.feedback}:null}getMeetingInfo(){const{meeting:{meetingStatus:a,isOnHold:d,meetingNumber:u,passWord:f,userName:A,userEmail:S,meetingTopic:T,meetingOptions:R,encType:M,region:B,network:H,topic:$,zlkJwtToken:ce,userId:he,lang:ue,inviteEmail:Se,meetingId:Qe,participantID:He,h323Password:We,recordingDisclaimer:et,recordingDisclaimerForRecorder:Lt,wrInfo:Gt}}=this[Sr](),jt=a===vs.Joined&&!d;if(ce)return{topic:$,password:f,userName:A,isInMeeting:jt,userId:he,meetingId:Qe};{let Tt="";return 0===M?Tt="None":1===M?Tt="AES ECB":2===M&&(Tt="AES GCM"),{meetingNumber:u,password:f,userName:A,userEmail:S,inviteEmail:Se,meetingTopic:T,encryptionType:Tt,region:B,network:H,isInMeeting:jt,userId:he,lang:ue,webEndpoint:no,meetingId:Qe,participantId:He,telPwd:We,recordingInfo:{recordingDisclaimer:et,recordingDisclaimerForRecorder:Lt,isUserEnableRecordingReminder:R?.isUserEnableRecordingReminder},wrInfo:Gt}}}}).prototype,"end",[Pa,Zn],Object.getOwnPropertyDescriptor(bc.prototype,"end"),bc.prototype),tr(bc.prototype,"changeName",[Zn],Object.getOwnPropertyDescriptor(bc.prototype,"changeName"),bc.prototype),tr(bc.prototype,"makeHost",[FA,Pa,Zn],Object.getOwnPropertyDescriptor(bc.prototype,"makeHost"),bc.prototype),tr(bc.prototype,"makeCoHost",[UA,Pa,Zn],Object.getOwnPropertyDescriptor(bc.prototype,"makeCoHost"),bc.prototype),tr(bc.prototype,"revokeCoHost",[$m,Pa,Zn],Object.getOwnPropertyDescriptor(bc.prototype,"revokeCoHost"),bc.prototype),bc);var $N=Object.freeze({__proto__:null,receiveChatMessageFromXMPPEpic:(a,d)=>jh(a,24583).pipe(Hn(d),nr(u=>{let[f,A]=u;if(A.meeting.zlkJwtToken)return mt;const{payload:{body:{sn:S,senderName:T,senderJid:R,receiver:M,text:B,type:H}}}=f,$=ui(A),ce=uA(A),{meeting:{jid:he,userId:ue},participants:{xmppAttendeeList:Se}}=A;return mc.beginDecrypt({decryptedText:B,type:gu.XMPP_CHAT,zoomId:S}).then(Qe=>{var He;let{message:We}=Qe,et=null,Lt=0,Gt="";$&&$a($.userRole)&&he===M?(et=Se.find(Tt=>Tt.jid===R),Lt=ue,Gt=$.displayName):H===Ni.Panelist&&(et=ce.find(Tt=>Tt.jid===R),Lt=Ni.Panelist,Gt=$p.displayName);const jt={message:We,sender:{name:T,userId:(null===(He=et)||void 0===He?void 0:He.userId)||0,avatar:""},receiver:{name:Gt,userId:Lt},timestamp:(new Date).getTime()};return Et("CHAT_RECEIVE_MESSAGE_EVENTS",jt),vd(jt)})})),receiveChatMessageFromRWGEpic:(a,d)=>Mn(a,7944).pipe(Hn(d),nr(u=>{let[f,A]=u;const{meeting:{bIbDisableChat:S,isWebinar:T},participants:{attendeesList:R}}=A,{payload:{body:{attendeeNodeID:M,sn:B,destNodeID:H,text:$,senderName:ce,msgID:he}}}=f,ue=ui(A),Se=uA(A);if(ue){const Qe=$a(ue?.userRole)&&M===ue.userId&&!he;if(!S&&!Qe){let He,We=B;if(!B){const et=R.find(Lt=>Lt.userId===H);et&&(We=et.zoomID)}if(M===Ni.SilentModeUsers){const et=Hh($),Lt={id:he,message:et,sender:{name:"Host",userId:H},receiver:{name:"Everyone (in Waiting Room)",userId:M},timestamp:(new Date).getTime()};He=Promise.resolve(Lt)}else He=mc.beginDecrypt({decryptedText:$,zoomId:We,type:gu.RWG_CHAT}).then(et=>{let{message:Lt}=et;const Gt=R.find(sn=>sn.userId===H),jt=ce?Hh(ce):Gt?.displayName;let Tt="";if(M===Ni.All)Tt=T?"All panelists and attendees":"Everyone";else if(M===Ni.Panelist)Tt="All panelists";else if(T&&Se.findIndex(sn=>sn.userId===M)>-1)Tt=Se.find(sn=>sn.userId===M).displayName;else{const sn=R.find(hn=>hn.userId===M);sn&&(Tt=sn.displayName)}return{id:he,message:Lt,sender:{name:jt,userId:H,avatar:Gt?.avatar},receiver:{name:Tt,userId:M},timestamp:(new Date).getTime()}});return He.then(et=>(Et("CHAT_RECEIVE_MESSAGE_EVENTS",et),vd(et)))}}return mt})),changeAttendeePrivilegeResponse:(a,d)=>Mn(a,gc).pipe(Un(u=>{var f,A;return void 0!==(null===(f=u.payload.body)||void 0===f?void 0:f.chatPriviledge)||void 0!==(null===(A=u.payload.body)||void 0===A?void 0:A.bAllowAttendeeChat)}),Hn(d),Ne(u=>{let[f,A]=u;const{payload:{body:{chatPriviledge:S,bAllowAttendeeChat:T}}}=f,{chat:{chatPrivilege:R}}=A;return void 0!==T?(Et("CHAT_PRIVILEGE_CHANGE",!0===T?{chatPrivilege:R}:{chatPrivilege:to.NoAttendee}),JE(T)):(Et("CHAT_PRIVILEGE_CHANGE",{chatPrivilege:S}),_A(S))})),changePanelistPrivilegeResponse:a=>Mn(a,gc).pipe(Un(d=>{var u;return void 0!==(null===(u=d.payload.body)||void 0===u?void 0:u.panelistChatPriviledge)}),Ne(d=>{const{payload:{body:{panelistChatPriviledge:u}}}=d;return Et("CHAT_PRIVILEGE_CHANGE",{panelistChatPrivilege:u}),qE(u)})),chatResponseEpic:(a,d)=>Mn(a,4136).pipe(Hn(d),nr(u=>{let[f,A]=u;const{payload:{body:{result:S,destNodeID:T,msgID:R}}}=f,{meeting:{userId:M},chat:{chatHistory:B}}=A;if(S===rA.Success){var H,$;const ce=[];for(let ue=B.length-1;ue>=0;ue--){const Se=B[ue];if(!Se.id&&Se.sender.userId===M&&[Ni.All,Ni.Panelist,Ni.IndividualCcPanelist,T].includes(Se.receiver.userId)&&ce.unshift(Se),Se.id)break}const he=ce.length>0&&null!==(H=null===($=ce[0])||void 0===$?void 0:$.highResTimeStampForIdentification)&&void 0!==H?H:0;return Et("CHAT_MESSAGE_RESPONSE",{msgId:R,receiverId:T,identification:he}),Pn(Yw({destNodeID:T,msgID:R,userId:M}))}return S===rA.Delete||S===rA.Block?Pn(vA({msgId:R})):mt})),chatCmdResponseEpic:a=>Mn(a,4238).pipe(nr(d=>{const{payload:{body:{bSuccess:u,cmd:f,msgID:A}}}=d,S=[];return u&&f===Cm.Delete&&(S.push(vA({msgId:A})),Et("CHAT_DELETE_MESSAGE_REPONSE",{id:A})),Yn(S)})),chatCmdIndicationEpic:a=>Mn(a,7960).pipe(nr(d=>{const{payload:{body:{cmd:u,msgID:f}}}=d,A=[];return u===Cm.Delete&&(A.push(vA({msgId:f})),Et("CHAT_DELETE_MESSAGE_REPONSE",{id:f})),Yn(A)}))});const aI={chatHistory:[],chatPrivilege:to.All,panelistChatPrivilege:hd.AllPanelist,isAllowAttendeeChat:!0},VA=na({["".concat(vd)]:Mt((a,d)=>{let{payload:u}=d;a.chatHistory.push(u)}),["".concat(_A)]:Mt((a,d)=>{let{payload:u}=d;a.chatPrivilege=u}),["".concat(qE)]:Mt((a,d)=>{let{payload:u}=d;a.panelistChatPrivilege=u}),["".concat(JE)]:Mt((a,d)=>{let{payload:u}=d;a.isAllowAttendeeChat=u}),["".concat(Yw)]:Mt((a,d)=>{let{payload:u}=d;const{destNodeID:f,msgID:A,userId:S}=u,T=[];for(let R=a.chatHistory.length-1;R>=0;R--){const M=a.chatHistory[R];if(!M.id&&M.sender.userId===S&&[Ni.All,Ni.Panelist,f].includes(M.receiver.userId)&&T.unshift(M),M.id)break}T.length>0&&(T[0].id=A)}),["".concat(vA)]:Mt((a,d)=>{let{payload:u}=d;const{msgId:f}=u,A=a.chatHistory.findIndex(S=>S.id===f);A>=0&&a.chatHistory.splice(A,1)}),["".concat(mf)]:()=>mn({},aI)},aI);function Zm(a,d,u){if(null!=u&&u.host)return[cf(a),...h_(a)].filter(f=>f?.userId!==d).map(f=>({userId:f?.userId,displayName:f?.displayName,isHost:f?.isHost,isCoHost:f?.bCoHost}));{let f=[cf(a),...h_(a),...a.participants.attendeesList.filter(A=>!(A.bCoHost||A.isHost||A.bHold))];if(null!=u&&u.includeAttendee){const A=uA(a).filter(S=>!Nm(S.userType));f=[...f,...A]}return f.filter(A=>A?.userId!==d).map(A=>({userId:A?.userId,displayName:A?.displayName,isHost:A?.isHost,isCoHost:A?.bCoHost}))}}var Zc;const eg=ko.createAgent(),HR=P_.getInstance(),Nb=a=>{const{text:d,destId:u,sn:f,attendeeId:A}=a;return mc.beginEncrypt({text:d,type:gu.RWG_CHAT}).then(S=>{eg.chat(S,u,f,A)})};let ZN=(tr((Zc=class extends $c{send(a,d){if(!a)return Promise.reject({type:Jr,reason:"Text is empty"});const{[Sr]:u,[Na]:f}=this,A=u(),S=ui(A),T=function(ue,Se){if(Se===Ni.All)return iA;if(Se===Ni.Panelist)return $p;if(Se===Ni.SilentModeUsers)return x0;{const{meeting:{isWebinar:Qe},participants:{xmppAttendeeList:He,attendeesList:We}}=ue;return Qe?We.find(et=>et.userId===Se)||He.find(et=>et.userId===Se):We.find(et=>et.userId===Se)}}(A,d),R=((ue,Se,Qe)=>{const He=Se?.userId;if(null==ue||!ue.zoomID||null==Se||!Se.displayName||He===ue.userId)return{type:Jr,reason:"invalid target user"};const{chat:{chatPrivilege:We,panelistChatPrivilege:et},meeting:{isWebinar:Lt}}=Qe,Gt=Ku(Qe),jt=Se.isHost||Se.bCoHost;let Tt=!1;if(!Gt){if(Lt)if($a(ue.userRole))(We===to.NoAttendee||We===to.AllPanelist&&He!==Ni.Panelist||We===to.All&&He!==Ni.All&&He!==Ni.Panelist)&&(Tt=!0);else{const sn=$a(Se?.userRole);(et===hd.Invalid||et===hd.AllPanelist&&(sn||He===Ni.All))&&(Tt=!0)}else(We===to.NoAttendee||We===to.Host&&!jt||He===Ni.SilentModeUsers||We===to.EveryonePublicly&&He!==Ni.All&&!jt)&&(Tt=!0);if(Tt)return{type:"INSUFFICIENT_PRIVILEGES",reason:"Insufficient chat privilege"}}return null})(S,T,A);if(R)return Promise.reject(R);const{meeting:{isWebinar:M,encType:B}}=A,H=B===bm.AES_GCM;let $=Promise.resolve(),ce=!1;const he=M&&$a(T.userRole);return d===Ni.SilentModeUsers?eg.chat(Hs(a),d):M?he?8==(8&T.clientCap)?$=Nb({text:a,destId:Ni.IndividualCcPanelist,sn:S?.zoomID,attendeeId:d}):($=Nb({text:a,destId:Ni.Panelist,sn:S?.zoomID,attendeeId:d}).then(()=>(ue=>{const{text:Se,jid:Qe,isGCMEnabled:He}=ue;return mc.beginEncrypt({text:Se,type:gu.XMPP_CHAT}).then(We=>{HR.sendWebinarMseeage(We,Qe,Ni.IndividualCcPanelist,He)})})({text:a,jid:T.jid,isGCMEnabled:H})),ce=!0):T&&($=Nb({text:a,destId:T.userId,sn:S?.zoomID})):$=Nb({text:a,destId:T.userId,sn:S?.zoomID}),$.then(()=>{const ue=(new Date).getTime(),Se=performance.now(),Qe={message:a,sender:{name:S?.displayName,userId:S?.userId,avatar:S?.avatar},receiver:{name:T?.displayName,userId:he?Ni.IndividualCcPanelist:T?.userId},timestamp:ue,highResTimeStampForIdentification:Se};return f(vd(Qe)),ce?(Et("CHAT_RECEIVE_MESSAGE_EVENTS",Qe),Qe):new Promise((He,We)=>{Gs("CHAT_MESSAGE_RESPONSE").pipe(xu(5e3),oN(et=>Se!==et.identification||!([et.receiverId,Ni.All,Ni.Panelist].includes(d)||et.receiverId===Ni.IndividualCcPanelist)),ii(1)).subscribe(et=>{const{msgId:Lt}=et,Gt=mn(mn({id:Lt},Vh(Qe,["highResTimeStampForIdentification"])),he&&{receiver:{name:T?.displayName,userId:T?.userId}});Et("CHAT_RECEIVE_MESSAGE_EVENTS",Gt),He(Gt)},()=>{We({type:"OPERATION_TIMEOUT"})})})})}setPrivilege(a){const d=this[Sr](),{meeting:{isWebinar:u},chat:{chatPrivilege:f}}=d;return f===a?Promise.resolve(""):!u&&!Uc.includes(a)||u&&!Im.includes(a)?Promise.reject({type:Jr,reason:"invalid privilege value of parameter"}):(eg.setChatPriviledge(a),wi("CHAT_PRIVILEGE_CHANGE",A=>A.chatPrivilege===a))}setPanelistPrivilege(a){const d=this[Sr](),{chat:{panelistChatPrivilege:u}}=d,f=Tm[a];return u===f?Promise.resolve(""):Object.values(Uo).includes(a)?(eg.setPanelistChatPrivilege(a),wi("CHAT_PRIVILEGE_CHANGE",A=>A.panelistChatPrivilege===f)):Promise.reject({type:Jr,reason:"Panelist privilege value is invalid"})}deleteMessage(a){const d=this[Sr](),{chat:{chatHistory:u},meeting:{meetingOptions:f,userId:A}}=d;if(null!=f&&f.isEnableDeleteChatMsg){const S=Ku(d),T=u.find(R=>R.id===a);if(T){const{sender:R}=T;if(S)eg.chatCmdReq(a,Cm.Delete);else{if(R.userId!==A)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"can not delete message"});eg.chatCmdReq(a,Cm.Delete)}return wi("CHAT_DELETE_MESSAGE_REPONSE",M=>M.id===a).then(()=>({id:a}))}return Promise.reject({type:Jr,reason:"msgId is wrong"})}return Promise.reject({type:ur,reason:"can not delete messages"})}lockChat(a){const d=this[Sr](),{meeting:{meetingOptions:u}}=d;return this.setPrivilege(a?to.NoOne:null!=u&&u.isPrivateChatEnabled?to.All:to.EveryonePublicly)}getPrivilege(){const{chat:{chatPrivilege:a,isAllowAttendeeChat:d}}=this[Sr]();return d?a:to.NoAttendee}getReceivers(){const a=this[Sr](),{chat:{chatPrivilege:d,panelistChatPrivilege:u,isAllowAttendeeChat:f},meeting:{isWebinar:A}}=a;if(!A&&!f)return[];const S=ui(a),T=Ku(a);if(S)if(A)if($a(S.userRole)){if(!f)return[];if(d===to.All)return[$p,iA];if(d===to.AllPanelist)return[$p];if(d===to.NoOne)return[]}else{if(T||u===hd.Everyone){const R=Zm(a,S.userId,{includeAttendee:!0});return[$p,iA,...R]}if(u===hd.AllPanelist){const R=Zm(a,S.userId);return[$p,...R]}}else{const R=Ku(a);if(d===to.All||R){const M=Zm(a,S.userId);return[iA,...M]}if(d===to.Host)return Zm(a,S.userId,{host:!0});if(d===to.EveryonePublicly){const M=Zm(a,S.userId,{host:!0});return[iA,...M]}if(d===to.NoOne)return[]}return[]}getHistory(){return this[Sr]().chat.chatHistory.map(a=>Vh(a,["highResTimeStampForIdentification"]))}isAllowToDeleteMessages(){const a=this[Sr](),{meeting:{meetingOptions:d}}=a;return d?.isEnableDeleteChatMsg}}).prototype,"send",[Zn],Object.getOwnPropertyDescriptor(Zc.prototype,"send"),Zc.prototype),tr(Zc.prototype,"setPrivilege",[Id,Zn],Object.getOwnPropertyDescriptor(Zc.prototype,"setPrivilege"),Zc.prototype),tr(Zc.prototype,"setPanelistPrivilege",[Id,Zn,function(a,d,u){const f=u.value;u.value=function(){const A=this[As];if(A){const{meeting:{isWebinar:M}}=A.getState();if(!M)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"non-webinar"})}for(var S=arguments.length,T=new Array(S),R=0;R<S;R++)T[R]=arguments[R];return f.apply(this,T)}}],Object.getOwnPropertyDescriptor(Zc.prototype,"setPanelistPrivilege"),Zc.prototype),tr(Zc.prototype,"deleteMessage",[Zn],Object.getOwnPropertyDescriptor(Zc.prototype,"deleteMessage"),Zc.prototype),tr(Zc.prototype,"lockChat",[Id,Zn],Object.getOwnPropertyDescriptor(Zc.prototype,"lockChat"),Zc.prototype),Zc);const eP=Fu($N);var tP=Object.freeze({__proto__:null,handleRecordingEnableEpic:a=>a.pipe(Vi("".concat(gm)),Ne(d=>{const{payload:{recordingEnable:u}}=d;return gC(u)})),receiveCloudRecordIndication:a=>Mn(a,gc).pipe(Un(d=>{var u,f,A;return void 0!==(null===(u=d.payload.body)||void 0===u?void 0:u.cmrServerStatus)||void 0!==(null===(f=d.payload.body)||void 0===f?void 0:f.disAllowClientStopAutoCmr)||void 0!==(null===(A=d.payload.body)||void 0===A?void 0:A.enableAutomicRecordingCloud)}),nr(d=>{const{cmrServerStatus:u,disAllowClientStopAutoCmr:f,enableAutomicRecordingCloud:A}=d.payload.body,S=[];return void 0!==u&&(u!==_c.Init&&Et("CLOUD_RECORDING_STATUS_CHANGE",{cmrServerStatus:u}),S.push(tR(u))),void 0!==f&&S.push(nR(!f)),void 0!==A&&S.push(_C(A)),Yn(S)})),receiveLocalRecordingIndicationEpic:a=>Mn(a,Ts).pipe(Un(d=>{const{payload:{body:{update:u}}}=d;return u?.some(f=>void 0!==f.bLocalRecordStatus)}),dr(d=>{const{payload:{body:{update:u}}}=d;u.filter(f=>void 0!==f.bLocalRecordStatus).forEach(f=>{Et("LOCAL_RECORDING_CHANGE",{userId:f.id,bLocalRecord:1===f.bLocalRecordStatus})})}),ai(mt))});const GR={cmrStatus:_c.Stop,recordingEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1},cI=na({["".concat(tR)]:Mt((a,d)=>{let{payload:u}=d;a.cmrStatus=u}),["".concat(gC)]:Mt((a,d)=>{let{payload:u}=d;a.recordingEnable=u}),["".concat(nR)]:Mt((a,d)=>{let{payload:u}=d;a.allowStopAutoRecording=u}),["".concat(_C)]:Mt((a,d)=>{let{payload:u}=d;a.automaticCloudRecordingEnable=u}),["".concat(Kc)]:()=>mn({},GR)},GR);var Br,uI,Pb,Td;const Q_=ko.createAgent();let tg=(Br=Qr("recording"),uI=Qr("recording"),Pb=Qr("recording"),tr((Td=class extends $c{startRecording(){const a=this[Sr](),{meeting:{bIbDisableRecording:d,recordingEnable:u},recording:{cmrStatus:f}}=a;return d?Promise.reject({type:ur,reason:"Rejected by Information Barrier"}):u?f===_c.Start?Promise.resolve(""):(Q_.recordMeeting(!0,!1),wi("CLOUD_RECORDING_STATUS_CHANGE",A=>A.cmrServerStatus===_c.Start)):Promise.reject({type:ur,reason:"The account of the meeting disabled the cloud recording"})}pauseRecording(){const a=this[Sr](),{recording:{cmrStatus:d}}=a;return d===_c.Pause?Promise.resolve(""):d!==_c.Start?Promise.reject({type:ur,reason:"Recording is not started"}):(Q_.recordMeeting(!1,!0),wi("CLOUD_RECORDING_STATUS_CHANGE",u=>u.cmrServerStatus===_c.Pause))}stopRecording(){const a=this[Sr](),{recording:{cmrStatus:d}}=a;return d===_c.Stop?Promise.resolve(""):(Q_.recordMeeting(!1,!1),wi("CLOUD_RECORDING_STATUS_CHANGE",u=>u.cmrServerStatus===_c.Stop))}getRecordingStatus(){const a=this[Sr](),{recording:{cmrStatus:d}}=a;return d===_c.Start?W.RecordingStatus.Recording:d===_c.Pause?W.RecordingStatus.Paused:W.RecordingStatus.Stopped}isRecordingEnabled(){const a=this[Sr](),{recording:{recordingEnable:d}}=a;return d}isAllowedToStopAutoRecording(){const a=this[Sr](),{recording:{allowStopAutoRecording:d}}=a;return d}isAutomaticCloudRecordingEnabled(){const a=this[Sr](),{recording:{automaticCloudRecordingEnable:d}}=a;return d}}).prototype,"startRecording",[Id,Zn,Br],Object.getOwnPropertyDescriptor(Td.prototype,"startRecording"),Td.prototype),tr(Td.prototype,"pauseRecording",[Id,Zn,uI],Object.getOwnPropertyDescriptor(Td.prototype,"pauseRecording"),Td.prototype),tr(Td.prototype,"stopRecording",[Id,Zn,Pb],Object.getOwnPropertyDescriptor(Td.prototype,"stopRecording"),Td.prototype),Td);const lI=Fu(tP);let ng,jA;(function(a){a[a.All=1]="All",a[a.Private=2]="Private"})(ng||(ng={})),function(a){a.SUCCESS="success"}(jA||(jA={}));var QA=Object.freeze({__proto__:null,receiveCmdChannelResponseXMPPEpic:(a,d)=>jh(a,24577).pipe(Hn(d),Ml(u=>{let[f]=u;const{payload:{body:{status:A}}}=f;if(A===jA.SUCCESS)return Et("COMMAND_STATUS_EVENTS",W.ConnectionState.Connected),vC(A)})),receiveCmdChannelMessageFromXMPPEpic:(a,d)=>jh(a,24583).pipe(Hn(d),dr(u=>{let[f,A]=u;const{meeting:{userId:S,encType:T},cmd:{jids:R}}=A,{payload:{body:{senderName:M,senderJid:B,text:H,type:$,receiver:ce,msgid:he,sn:ue}}}=f,Se=_w(R,ce),Qe=T===bm.AES_GCM,He=_w(R,B),We=(new Date).getTime();let et=Promise.resolve({message:H});return Qe&&(et=mc.beginDecrypt({decryptedText:H,type:gu.XMPP_CHAT,zoomId:ue})),et.then(Lt=>{let{message:Gt}=Lt;($===ng.Private&&parseInt(Se,10)===S||$===ng.All)&&Et("COMMAND_RECEIVE_MESSAGE_EVENTS",{senderId:He,senderName:M,text:Hh(Gt),timestamp:We,msgid:he})})}),ai(mt)),receiveUserJidUpdateFromXMPPEpic:a=>jh(a,24595).pipe(nr(d=>{const{payload:{body:{action:u,data:f}}}=d,A=[];return[ka.List,ka.Add,ka.update].includes(u)&&f&&A.push(zc(f)),u===ka.Remove&&f&&A.push(_f(f)),Yn(A)}))});const Tf={connectionStatus:"initial",jids:{}},WR=na({["".concat(rR)]:()=>mn({},Tf),["".concat(zc)]:Mt((a,d)=>{let{payload:u}=d;u.map(f=>{const{jid:A,node:S}=f;a.jids[S]=A})}),["".concat(_f)]:Mt((a,d)=>{let{payload:u}=d;u.map(f=>{const{jid:A}=f,S=_w(a.jids,A);delete a.jids[S]})}),["".concat(vC)]:Mt((a,d)=>{let{payload:u}=d;a.connectionStatus=u})},Tf);var Mb;const dI=P_.getInstance(),H_=(a,d,u)=>{const f=d,A=gw(a),S=f?ng.Private:ng.All;return u?mc.beginEncrypt({text:A,type:gu.XMPP_CHAT}).then(T=>{dI.sendWebinarMseeage(T,f,S,!0)}):dI.sendWebinarMseeage(A,f,S,!1)};let xb=(tr((Mb=class extends $c{send(a,d){if(!a)return Promise.reject({type:Jr,reason:"Text is empty"});if("string"!=typeof a)return Promise.reject({type:Jr,reason:"Text is not a string"});if(a.length>512)return Promise.reject({type:Jr,reason:"Text exceeds the max length(512)."});const{[Sr]:u}=this,f=u(),{socket:{xmppSocketStatus:A},meeting:{userId:S,encType:T},cmd:{connectionStatus:R}}=f,M=T===bm.AES_GCM;return A!==mi.Connected?Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"Command channel is not ready"}):(R===jA.SUCCESS?Promise.resolve(!0):Gs("COMMAND_STATUS_EVENTS",1).toPromise().then(B=>B===W.ConnectionState.Connected||Promise.reject({type:ur,reason:"Cannot establish the command channel"}))).then(()=>{if(d){const B=u(),{cmd:{jids:H}}=B;return-1!==Ks(B).findIndex($=>$.userId===d)?(Object.prototype.hasOwnProperty.call(H,d)?Promise.resolve():Gs("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE").pipe(oN($=>-1!==$.findIndex(ce=>ce.userId===d)),ii(1),po(Ss)).toPromise()).then(()=>(H_(a,H[d],M),{timestamp:(new Date).getTime(),text:a,receiverId:d,senderId:S})):Promise.reject({type:Jr,reason:"Cannot find the user"})}return H_(a,"",M),{timestamp:(new Date).getTime(),text:a,receiverId:0,senderId:S}})}getJids(){const{[Sr]:a}=this,d=a(),{cmd:{jids:u}}=d;return u}}).prototype,"send",[Zn],Object.getOwnPropertyDescriptor(Mb.prototype,"send"),Mb.prototype),Mb);const wf=Fu(QA),KR=(a,d,u,f)=>{const{getState:A,dispatch:S}=u,T=A(),{participants:{attendeesList:R},audio:{localShareAudioUserMutedList:M},share:{isReceiveSharingFromMainSession:B},breakoutRoom:H}=T,$=(B?H?.mainSessionAttendeeList:R).find(ce=>ce.userId==a);if($){if($.bShareAudioOn){const ce=M.find(he=>he.userId===a);return ce&&ce.muted===!d&&S(L_(f,a,d,T)),Promise.resolve("")}return Promise.reject({type:ur,reason:"Cannot ".concat(d?"mute":"unmute"," share audio when the user's share audio is not enable.")})}return Promise.reject({type:Jr,reason:"Cannot find the user"})},rg=(a,d)=>{const{store:{getState:u},rwgAgent:f}=a,{share:{sharePrivilege:A}}=u();return A===d?Promise.resolve(""):Object.values(Vu).includes(d)?(f.lockSharing(d),wi("UPDATE_MEETING_ATTRIBUTE",S=>S.lockShare===d)):Promise.reject({type:Jr})},nP=Ws([Ks],a=>a.filter(d=>d.bVideoOn)),zR=()=>k0();var HA,GA,wd,G_,Za,Rf,WA,Zu,ro,fp,ig,mp,Of,og,sg,ag,cg,ug,hI,pI,W_,fI,mI,gI,KA,_I,vI,YR,AI,pr,zA,lh,Nn,Lb,qR,Tn,Ln,so,JR,dh,el,K_,tl,on;let XR=(HA=Qr("audio"),GA=Qr("audio"),wd=Qr("audio"),G_=Qr("audio"),Za=Qr("audio"),Rf=Qr("audio"),WA=Qr("audio"),Zu=Qr("audio"),ro=Qr("audio"),fp=Qr("audio"),ig=Qr("share"),mp=Qr("audio"),Of=Qr("share"),og=Qr("audio"),sg=Qr("audio"),ag=Qr("video"),cg=Qr("video"),ug=Qr("video"),hI=Qr("video"),pI=Qr("video"),W_=Qr("video"),fI=Qr("video"),mI=Qr("video"),gI=Qr("video"),KA=Qr("video"),_I=Qr("video"),vI=Qr("video"),YR=Qr("video"),AI=Qr("video"),pr=Qr("video"),zA=Qr("share"),lh=Qr("share"),Nn=Qr("share"),Lb=Qr("share"),qR=Qr("share"),Tn=Qr("share"),Ln=Qr("share"),so=Qr("share"),JR=sI("isShareOptionLocked"),dh=sI("isShareOptionLocked"),el=Qr("share"),K_=Qr("share"),tl=Qr("share"),tr((on=class extends $c{constructor(a){super(a),this[As].dispatch(ls()),this[$n]={store:a,mediaAgent:jm(_o.getInstance()),rwgAgent:ko.createAgent()}}startAudio(a){return((d,u)=>{const{store:{getState:f,dispatch:A},rwgAgent:S,mediaAgent:T}=d,R=f(),{speakerOnly:M,autoStartAudioInSafari:B}=u||{},H=ui(R);if("computer"===H?.audio)return Promise.resolve();if("phone"===H?.audio)return Promise.reject({type:ur,reason:"joined by phone"});{const{audio:{isAllowToTalk:$,isComputerAudioLoading:ce,canPlayAudio:he,isSpeakerOnly:ue},media:{audioDecodeStatus:Se,audioEncodeStatus:Qe}}=R;if(ce)return Promise.reject({type:ur,reason:"Computer audio has been loading, please wait."});if(ue!==!!M&&A(PE(!!M)),!H)return Promise.reject({type:ur,reason:"Please call `startAudio` method after the `join` has been resolved"});{const{userRole:He}=H,We=$a(He),et=We&&!$||M||Vm()?"success":Qe,Lt=Vm()?"success":Se;if(B_()&&("success"!==Lt||"success"!==et))return Promise.reject({type:ur,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method"});A(gd(!0)),Yc("audio",et,Lt).subscribe(Gt=>{let[jt,Tt]=Gt;if(jt&&Tt){let sn=he||(B_()||ym())&&!B?Promise.resolve():function(){const hn=URL.createObjectURL(Tw),An=new Audio(hn);return An.muted=!1,ym()?new Promise((ln,Qt)=>{var Bn;An.addEventListener("canplaythrough",()=>{An.play().then(()=>{ln(!0)}).catch(_r=>{Qt(_r)}).finally(()=>{URL.revokeObjectURL(hn)})}),null===(Bn=An.load)||void 0===Bn||Bn.call(An)}):Promise.race([An.play(),new Promise((ln,Qt)=>{window.setTimeout(()=>{Qt()},3e3)})]).finally(()=>{URL.revokeObjectURL(hn)})}();void 0===sn&&(sn=Promise.resolve()),sn.then(()=>{const hn=f(),{audio:{isSharingAudio:An}}=hn;S.joinOrLeaveVoip(!0),An||zm(T,hn,!(We&&!$||M)),We&&$&&A($0(!0)),A(g_(!0))}).catch(()=>{A(g_(!1)),A(gd(!1))})}else A(gd(!1))})}return"failed"===Qe||"failed"===Se?(A(gd(!1)),Promise.reject({type:"INTERNAL_ERROR",reason:"audio encode or decode error"})):new Promise((He,We)=>{hc(Gs(Dm.JoinComputerAudio.success,1),Zs(...Dm.JoinComputerAudio.fail.map(et=>Gs(et,1).pipe(nr(()=>Si({type:"INSUFFICIENT_PRIVILEGES",reason:et}))))),pu(45e3).pipe(nr(()=>Si({type:"OPERATION_TIMEOUT"})))).subscribe(()=>{A(gd(!1)),He("")},et=>{("INSUFFICIENT_PRIVILEGES"===et.type||f().audio.canPlayAudio)&&S.joinOrLeaveVoip(!1),A(gd(!1)),We(et)})})}})(this[$n],a)}stopAudio(){return function(){var a=L(function*(d){const{store:{getState:u,dispatch:f},mediaAgent:A,rwgAgent:S}=d,T=u(),{audio:{isComputerAudioLoading:R,isShareAudioEnabled:M,isSharingAudio:B}}=T,H=ui(T);if(R)return Promise.reject({type:ur,reason:"Computer audio has not finished joining, please wait."});if(M){if(B)return Promise.reject({type:ur,reason:"Cannot stop audio during sharing with audio"});f(nh(void 0)),f(ep(void 0))}return"computer"===H?.audio?(yield A.leaveComputerAudio(),S.joinOrLeaveVoip(!1),f(kE(0)),wi("AUDIO_CURRENT_USER_LEAVE_AUDIO")):Promise.resolve("")});return function(d){return a.apply(this,arguments)}}()(this[$n])}muteAudio(a){return((d,u)=>{const{store:{getState:f,dispatch:A},rwgAgent:S}=d,T=f(),R=ui(T);if(null==u||u===R?.userId)return""===R?.audio||null===R?.audio?Promise.reject({type:ur,reason:"no audio joined"}):!0===R?.muted?Promise.resolve(""):(T.audio.isShareAudioEnabled&&A(ep(!0)),A(uf(!0)),S.mute(R.userId,!0),wi("AUDIO_CURRENT_USER_MUTED").then(()=>""));if(Ku(T)){const{participants:{allowTalkAttendeesList:M,attendeesList:B}}=T,H=M.concat(B).find($=>$.userId===u);return H?""===H.audio||null===H?Promise.reject({type:ur,reason:"no audio joined"}):!1===H.muted?(S.mute(u,!0),wi("AUDIO_PARTICIPANT_AUDIO_UPDATE",$=>$.id===u&&1==$.muted)):Promise.resolve(""):Promise.reject({type:Jr,reason:"no matching user"})}return Promise.reject({type:"INSUFFICIENT_PRIVILEGES"})})(this[$n],a)}unmuteAudio(a){return(d=L(function*(u,f){const{store:{getState:A,dispatch:S},rwgAgent:T,mediaAgent:R}=u,M=A(),B=ui(M);if(void 0===f||f===B?.userId){if(""===B?.audio||null===B?.audio)return Promise.reject({type:ur,reason:"no audio joined"});if(!1===B?.muted)return Promise.resolve("");if(M.audio.isShareAudioEnabled){if(M.audio.isSharingAudio)return Promise.reject({type:ur,reason:"Cannot unmute audio during sharing with audio"});S(ep(!1))}if(S(uf(!0)),M.audio.bCanUnmute||null!=B&&B.isHost||null!=B&&B.bCoHost){if($a(B.userRole)){const{audio:{isAllowToTalk:H,isAllowToTalkAttendeeConnected:$}}=M;H?$||(yield R.leaveComputerAudio(),yield zm(R,M,!0),S($0(!0))):Promise.reject({type:ur,reason:"Webinar attendee cannot unmute self audio."})}return T.mute(B.userId,!1),wi("AUDIO_CURRENT_USER_UNMUTED").then(()=>"")}return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"host not allow unmute themselves"})}if(Ku(M)){const{participants:{allowTalkAttendeesList:H,attendeesList:$}}=M,ce=H.concat($).find(he=>he.userId===f);return ce?""===ce.audio||null===ce?Promise.reject({type:ur,reason:"no audio joined"}):(!0===ce.muted&&T.mute(f,!1),Promise.resolve("")):Promise.reject({type:Jr,reason:"no matching user"})}return Promise.reject({type:"INSUFFICIENT_PRIVILEGES"})}),function(u,f){return d.apply(this,arguments)})(this[$n],a);var d}dialOut(a,d,u,f){return((A,S,T,R,M)=>{const{store:{getState:B,dispatch:H},rwgAgent:$}=A,ce=B(),{meeting:{callOutCountry:he,isSupportCallOut:ue}}=ce;if(ue&&Array.isArray(he)&&he.findIndex(Se=>Se.code===S)>-1){const{seq:Se}=$.audioDialout(S+T,R,!(null==M||!M.callMe),!(null==M||!M.pressingOne),!(null==M||!M.greeting));return H(Zh(Se)),sf(Dm.JoinAudioByCallMe)}return Promise.reject({type:Jr,reason:"no matching country code"})})(this[$n],a,d,u,f)}cancelDialOut(a,d,u){return((f,A,S,T)=>{const{rwgAgent:R}=f;return R.audioCancelDialout(A+S,!(null==T||!T.callMe)),sf(Dm.cancelDialOut)})(this[$n],a,d,u)}hangup(){return(a=>{const{store:{getState:d},rwgAgent:u}=a,f=d(),A=ui(f);return"phone"===A?.audio&&null!==A.userId?(u.audioDrop(A.userId),sf(Dm.hangup)):Promise.reject({type:ur,reason:"not joined audio by phone"})})(this[$n])}switchMicrophone(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,{audio:{microphoneDevicesList:T,activeMicrophone:R}}=f();return"default"!==u&&-1==T.findIndex(M=>M.deviceId===u)?Promise.reject({type:"INVALID_DEVICE_ID"}):(u!==R&&(S.changeMicrophone(u),A(m_(u))),Promise.resolve(""))})(this[$n],a)}switchSpeaker(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,{audio:{speakerDevicesList:T,activeSpeaker:R}}=f();return"default"!==u&&-1==T.findIndex(M=>M.deviceId===u)?Promise.reject({type:"INVALID_DEVICE_ID"}):(u!==R&&(S.changeSpeaker(u),A(J0(u))),Promise.resolve(""))})(this[$n],a)}muteShareAudio(a){return((d,u)=>{const{mediaAgent:f,rwgAgent:A,store:{getState:S,dispatch:T}}=d,R=S(),{meeting:{userId:M}}=R;if(u&&u!==M)return KR(u,!0,d.store,f);{const{audio:{isSharingAudio:H,isShareAudioEnabled:$,isShareAudioMuted:ce}}=R;if(!$)return Promise.reject({type:ur,reason:"Cannot mute sharing audio when sharing audio is not enable"});if(ce)return Promise.resolve("");{A.muteShareAudio(!0);let he=Promise.resolve();var B;return H&&(he=null===(B=f.leaveSharingAudio(!0))||void 0===B?void 0:B.then(()=>PA(f,A,R).then(ue=>{ue.forEach(Se=>T(Se))}))),L_(f,M,!0,R),Promise.all([wi({event:"UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",operations:[Un(ue=>void 0!==ue.bShareAudioOn),ii(1)]},ue=>!1===ue.bShareAudioOn),he]).then(()=>(T(ME(!0)),H&&(T(df(!1)),Et("SHARE_AUDIO_STATE_CHANGE",{state:"off"})),""))}}})(this[$n],a)}unmuteShareAudio(a){return((d,u)=>{const{mediaAgent:f,rwgAgent:A,store:{getState:S,dispatch:T}}=d,R=S(),{meeting:{userId:M}}=R;if(u&&u!==M)return KR(u,!1,d.store,f);{const{audio:{isSharingAudio:B,isShareAudioEnabled:H,isShareAudioMuted:$},share:{status:ce}}=R;if(!H)return Promise.reject({type:ur,reason:"Cannot unmute sharing audio when sharing audio is not enable"});if(!1===$)return Promise.resolve("");{A.muteShareAudio(!1);let he=Promise.resolve();return!1===B&&ce===W.ShareStatus.Sharing&&(he=MA(f,A,R).then(ue=>{ue.forEach(Se=>T(Se))})),L_(f,M,!1,R),Promise.all([wi({event:"UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",operations:[Un(ue=>void 0!==ue.bShareAudioOn),ii(1)]},ue=>!0===ue.bShareAudioOn),he]).then(()=>(T(ME(!1)),!1===B&&ce===W.ShareStatus.Sharing&&(T(df(!0)),Et("SHARE_AUDIO_STATE_CHANGE",{state:"on"})),""))}}})(this[$n],a)}subscribeAudioStatisticData(a){return(d=L(function*(u,f){const{mediaAgent:A,store:{getState:S}}=u,T=S(),{media:{audioDecodeStatus:R,audioEncodeStatus:M},audio:{isAllowToTalk:B}}=S(),H=ui(T),$=!f||f.decode,ce=!f||f.encode;if(!H)return Promise.reject({type:ur,reason:"Call this function after the 'join' method resolved."});{const{userRole:he}=H,ue=$a(he)&&!B||Vm()?"success":M,Se=Vm()?"success":R;Yc("audio",ue,Se).subscribe(Qe=>{let[He,We]=Qe;He&&We&&($&&A.subscribeToQos([Ja.AudioDecode],1e3),ce&&A.subscribeToQos([Ja.AudioEncode],1e3))})}return""}),function(u,f){return d.apply(this,arguments)})(this[$n],a);var d}unsubscribeAudioStatisticData(a){return(d=L(function*(u,f){const{mediaAgent:A,store:{dispatch:S}}=u,R=!f||f.encode;return(!f||f.decode)&&(A.unsubscribeFromQos([Ja.AudioDecode]),S(Z0(_u))),R&&(A.unsubscribeFromQos([Ja.AudioEncode]),S(xm(_u))),null}),function(u,f){return d.apply(this,arguments)})(this[$n],a);var d}getMicList(){return(a=>{let{store:{getState:d}}=a;const u=d();return u.audio?[...u.audio.microphoneDevicesList]:[]})(this[$n])}getSpeakerList(){return(a=>{let{store:{getState:d}}=a;const u=d();return u.audio?[...u.audio.speakerDevicesList]:[]})(this[$n])}getAudioState(a){return((d,u)=>{let{store:{getState:f}}=d;const A=f(),{meeting:{isWebinar:S}}=A;let T=null;return null==u?T=ui(A):(T=A.participants.attendeesList.find(R=>R.userId===u),S&&!T&&(T=A.participants.xmppAttendeeList.find(R=>R.userId===u))),T?T.audio:null})(this[$n],a)}isAudioMuted(a){return((d,u)=>{let{store:{getState:f}}=d;const A=f(),{meeting:{isWebinar:S}}=A;let T=null;return void 0===u?T=ui(A):(T=A.participants.attendeesList.find(R=>R.userId===u),S&&!T&&(T=A.participants.xmppAttendeeList.find(R=>R.userId===u))),!!T&&!!T.muted})(this[$n],a)}getActiveMicrophone(){return(a=>{let{store:{getState:d}}=a;const u=d();return u.audio?u.audio.activeMicrophone:null})(this[$n])}getActiveSpeaker(){return(a=>{let{store:{getState:d}}=a;const u=d();return u.audio?u.audio.activeSpeaker:null})(this[$n])}isSupportCallOut(){return(a=>{let{store:{getState:d}}=a;const{meeting:{isSupportCallOut:u,callOutCountry:f}}=d();return u&&Array.isArray(f)&&f?.length>0})(this[$n])}getDialOutStatus(){return(a=>{let{store:{getState:d}}=a;const{audio:u}=d();return u?.dialout.returnCode})(this[$n])}getDialOutCountries(){return(a=>{let{store:{getState:d}}=a;const{meeting:{callOutCountry:u}}=d();return Array.isArray(u)?u:[]})(this[$n])}getShareAudioStatus(){return(a=>{let{store:{getState:d}}=a;const{audio:{isShareAudioEnabled:u,isShareAudioMuted:f,isSharingAudio:A}}=d();return{isShareAudioEnabled:u,isShareAudioMuted:f,isSharingAudio:A}})(this[$n])}isOthersShareAudioMutedLocally(a){return((d,u)=>{var f;let{store:{getState:A}}=d;const{audio:{localShareAudioUserMutedList:S}}=A();return null===(f=S.find(T=>T.userId===u))||void 0===f?void 0:f.muted})(this[$n],a)}getAudioStatisticData(){return(a=>{let{store:{getState:d}}=a;const{audio:{statistic:u}}=d();return mn({},u)})(this[$n])}startVideo(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,T=f(),{media:{videoDecodeStatus:R,videoEncodeStatus:M},video:{isCaptureCameraLoading:B,isCurrentUserStartedVideo:H,isVideoMuted:$}}=T;return H?Promise.reject({type:ur,reason:"Video is started"}):B?Promise.reject({type:ur,reason:"Camera is starting,please wait."}):$&&!Ku(T)?Promise.reject({type:ur,reason:"Video is muted by the host"}):!(!zR()&&Ra()||Em())||null!=u&&u.videoElement?!ab()&&null!=u&&u.virtualBackground?Promise.reject({type:Jr,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled."}):(A(pf(!0)),Yc("video",M,R).subscribe(ce=>{let[he]=ce;if(he){const ue=f(),{video:{activeCamera:Se,isSupportHDVideo:Qe,videoSsrc:He,virtualBackground:{isVBConfigured:We,isVBPreloadReady:et,imageSrc:Lt}}}=ue,{cameraId:Gt=Se,captureWidth:jt=0,captureHeight:Tt=0,videoElement:sn,mirrored:hn,hd:An,virtualBackground:ln,originalRatio:Qt}=u||{};let Bn;if(hn&&S.mirrorVideo(hn),sn&&(sn.id?Bn=sn.id:(Bn="__ZOOM_SDK_SELF_VIDEO_@__".replace("@","".concat(Math.floor(1e4*Math.random()))),sn.id=Bn)),An&&(console.log("HD support is currently limited, and comes with a number of restrictions and limitations. Please visit https://marketplace.zoom.us/docs/sdk/overview/720p for more details"),Qe&&_o.isCompatibleHardwareForEncode()?_o.isSupportVideoEncodeHardwareAcceleration().then(_r=>{_r?(S.enableHardwareAccelerationForVideoEncode(!0),A(y_({encode:_r}))):console.warn("Cannot capture HD video due to hardware limitation")}):console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation")),ln||void 0===ln&&Lt){const _r=ln||{imageUrl:void 0,cropped:void 0};Xc(et).subscribe(vt=>{if(vt){let ut;ut=We?_r.imageUrl!==Lt?Ob(_r.imageUrl,_r.cropped,S):Promise.resolve():BR(mn(mn({},_r),{},{captureWidth:jt,captureHeight:Tt,cameraId:Gt}),S,ue).then(Be=>Gs("VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",1).toPromise().then($e=>{var St;return S.stopVirtualBackgroundSetting(),$e?(null==Be||null===(St=Be.parentNode)||void 0===St||St.removeChild(Be),!0):Promise.reject("vb setting error")})),ut.then(()=>{S.startCaptureVideo(He,Gt,jt,Tt,Bn),A(kl({cameraId:Gt,captureWidth:jt,captureHeight:Tt,videoDOMId:Bn,originalRatio:Qt})),A(np({imageSrc:_r.imageUrl,cropped:_r.cropped}))}).catch(()=>{Et("VIDEO_VITRUAL_BACKGROUND_FAILED",{reason:"Cannot access the virtual background image."})})}else Et("VIDEO_VITRUAL_BACKGROUND_FAILED",{reason:"Cannot load virtual background model."})})}else Se!==Gt&&A(zs(Gt)),S.startCaptureVideo(He,Gt,jt,Tt,Bn,ld(),!Qt&&qp()),A(kl({cameraId:Gt,captureWidth:jt,captureHeight:Tt,videoDOMId:Bn,originalRatio:Qt}))}else A(pf(!1))}),sf(Om).then(()=>{A(WE(!1)),A(Gc(!1))}).finally(()=>{A(pf(!1))})):Promise.reject({type:Jr,reason:"You must pass a <video> element to start video capture for Chromium browser, Android browser, and Chrome without SharedArrayBuffer support."})})(this[$n],a)}stopVideo(){return(a=>{const{store:{getState:d},mediaAgent:u}=a,{video:{isCaptureCameraLoading:f,isCurrentUserStartedVideo:A}}=d();return f?Promise.reject({type:ur,reason:"Camera is starting,please wait."}):A?(u.stopCaptureVideo(),wi("VIDEO_CAPTURE_STOP_RESULT",S=>!0!==S?.failed)):Promise.reject({type:ur,reason:"camera is closed"})})(this[$n])}switchCamera(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,T=f(),{video:{cameraDevicesList:R,isCurrentUserStartedVideo:M,virtualBackground:B}}=T;return FR(u,R)?((M||null!=B&&B.isVBConfigured)&&S.changeCamera(u),A(zs(u)),Promise.resolve()):Promise.reject({type:Jr,reason:"Cannot find cameraDeviceId in camera devices list."})})(this[$n],a)}renderVideo(a,d,u,f,A,S,T,R,M){return((B,H,$,ce,he,ue,Se,Qe,He,We)=>{const{store:{getState:et,dispatch:Lt},mediaAgent:Gt,rwgAgent:jt}=B,Tt=et(),{meeting:{userId:sn},media:{enforceMultipleVideos:hn},video:{subscribedVideoList:An,renderedVideoList:ln}}=Tt;if(!H)return Promise.reject({type:Jr,reason:"Received canvas is falsy"});const Qt=dd(!!hn);if(!An.includes($)&&An.length>=Qt&&new Set(ln.map(vt=>vt.canvasId)).has(H.id))return Promise.reject({type:ur,reason:"subscribe video counts greater than maximum size (".concat(Qt,")")});if(-1===nP(Tt).findIndex(vt=>vt.userId===$))return Promise.reject({type:Jr,reason:"user is not send video"});const Bn=!!We,{media:{videoDecodeStatus:_r}}=Tt;return H.id||(H.id="__ZOOM_SDK_VIDEO_CANVAS_@__".replace("@","".concat(Math.floor(1e4*Math.random())))),Yc("video","success",_r).subscribe(vt=>{let[ut]=vt;if(ut){const{video:{isVerifiedVideoRenderCanvasAfterFailover:Be,maximumNumbeOfHDSubscriptions:$e,isSupportHDVideo:St,renderedVideoList:lt,receivedVideoMaxQuality:Ut}}=et();let an=H;!1===Be&&(an=T_(H),Lt(KE(!0)));const Gn=$===sn,vr=He||"__ZOOM_SDK_VIDEO_ZONE__";let Hr=Qe;if(Qe===W.VideoQuality.Video_720P)if(St){const ru=lt.filter(Ps=>Ps.videoQuality===W.VideoQuality.Video_720P).map(Ps=>Ps.userId);ru.length>=($e??1)&&(ru.includes($)||Gn||(console.warn("Warning: Web Video SDK currently only supports subscribing to one 720p video stream, so quality has been downgraded to 360p"),Hr=W.VideoQuality.Video_360P))}else console.warn("Can not subscribe 720P video stream,will downgrade to 360P stream"),Hr=W.VideoQuality.Video_360P;lt.some(ru=>ru.userId===$&&ru.key===vr&&ru.canvasId===an.id)||Gt.renderVideo(an.id,$,vr,ce,he,ue,Se,Hr,Gn,We||"",Bn);const nc=Math.max(Ut,W.VideoQuality.Video_360P),Ih=Math.min(Hr,nc);jt.subscribeVideo($,Ih,!1),An.includes($)||Lt(_d($)),Lt(rh({userId:$,key:vr,canvasId:an.id,videoQuality:Hr}))}}),"failed"===_r?Promise.reject({type:"INTERNAL_ERROR",reason:"Video  decode status is failed"}):Promise.resolve("")})(this[$n],a,d,u,f,A,S,T,R,M)}stopRenderVideo(a,d,u,f){return function(S,T,R,M,B){let H=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{store:{getState:$,dispatch:ce},mediaAgent:he,rwgAgent:ue}=S,Se=$(),{video:{subscribedVideoList:Qe,renderedVideoList:He}}=Se;if(!T||!T.id)return Promise.reject({type:Jr,reason:"canvas is falsy"});if(Qe.includes(R)){const We=M||"__ZOOM_SDK_VIDEO_ZONE__";He.find(et=>et.userId===R&&et.key===We)&&(he.stopRenderVideo(T.id,R,We,ZC(B),H),1==He.filter(et=>et.userId===R).length&&(ue.unsubscribeVideo(R),ce(oC(R))),ce(jw({userId:R,key:We,canvasId:T.id})))}return Promise.resolve("")}(this[$n],a,d,u,f,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}updateVideoCanvasDimension(a,d,u){return((f,A,S,T)=>{const{mediaAgent:R}=f;return A&&A.id?(R.updateRenderedVideoCanvasDimension(A.id,S,T),Promise.resolve("")):Promise.reject({type:Jr,reason:"canvas is falsy"})})(this[$n],a,d,u)}adjustRenderedVideoPosition(a,d,u,f,A,S,T){return((R,M,B,H,$,ce,he,ue)=>{const{store:{getState:Se},mediaAgent:Qe}=R;if(!M||!M.id)return Promise.reject({type:Jr,reason:"canvas is falsy"});const{video:{subscribedVideoList:He}}=Se();return He.includes(B)?(Qe.adjustRenderedVideoPosition(M.id,B,ue||"__ZOOM_SDK_VIDEO_ZONE__",ce,he,H,$,ZC("#000")),Promise.resolve("")):Promise.reject({type:Jr,reason:"userId is not correct"})})(this[$n],a,d,u,f,A,S,T)}clearVideoCanvas(a,d){return((u,f,A)=>{const{mediaAgent:S}=u;return f&&f.id?(S.clearVideoCanvas(f.id,ZC(A)),Promise.resolve("")):Promise.reject({type:Jr,reason:"canvas is falsy"})})(this[$n],a,d)}mirrorVideo(a){return((d,u)=>{const{store:{getState:f},mediaAgent:A}=d,{video:{isCurrentUserStartedVideo:S,virtualBackground:T}}=f();return(S||null!=T&&T.isVBConfigured)&&A.mirrorVideo(u),Promise.resolve("")})(this[$n],a)}enableHardwareAcceleration(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,{video:{isSupportHDVideo:T}}=f();if("boolean"==typeof u||void 0!==u.decode){const R="boolean"==typeof u?u:!!u.decode;return R?_o.isSupportVideoDecodeHardwareAcceleration().then(M=>(M&&S.enableHardwareAccelerationForVideoDecode(M),A(y_({decode:M})),M)):(S.enableHardwareAccelerationForVideoDecode(R),A(y_({decode:R})),Promise.resolve(!0))}if("boolean"==typeof u||void 0!==u.encode){const R="boolean"==typeof u?u:!!u.encode;if(T){if(!R)return S.enableHardwareAccelerationForVideoEncode(!1),A(y_({encode:!1})),Promise.resolve(!0);if(_o.isCompatibleHardwareForEncode())return _o.isSupportVideoEncodeHardwareAcceleration().then(M=>(M&&S.enableHardwareAccelerationForVideoEncode(M),A(y_({encode:M})),M));console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation")}else"boolean"!=typeof u&&null!=u&&u.encode&&console.warn("Can not use the hardware acceleration for video encoding due to the account restriction")}return Promise.resolve(!1)})(this[$n],a)}subscribeVideoStatisticData(a){return(d=L(function*(u,f){const{mediaAgent:A,store:{getState:S}}=u,{media:{videoDecodeStatus:T,videoEncodeStatus:R}}=S(),M=!f||f.decode,B=!f||f.encode;return Yc("video",R,T).subscribe(H=>{let[$,ce]=H;M&&ce&&A.subscribeToQos([Ja.VideoDecode],1e3),B&&$&&A.subscribeToQos([Ja.VideoEncode],1e3),null!=f&&f.detailed&&ce&&A.enableVideoObserver(!0)}),null}),function(u,f){return d.apply(this,arguments)})(this[$n],a);var d}unsubscribeVideoStatisticData(a){return(d=L(function*(u,f){const{mediaAgent:A,store:{dispatch:S}}=u,R=!f||f.encode;return(!f||f.decode)&&(A.unsubscribeFromQos([Ja.VideoDecode]),S(rp(tf))),R&&(A.unsubscribeFromQos([Ja.VideoEncode]),S(gA(tf))),null!=f&&f.detailed&&A.enableVideoObserver(!1),null}),function(u,f){return d.apply(this,arguments)})(this[$n],a);var d}previewVirtualBackground(a,d,u){return((f,A,S,T)=>{const{store:{getState:R,dispatch:M},mediaAgent:B}=f,H=R(),{video:{activeCamera:$,virtualBackground:{isVBPreloadReady:ce},isCurrentUserStartedVideo:he}}=H;let ue;return Xc(ce).subscribe(Se=>{Se&&BR({imageUrl:S,cropped:T,captureWidth:0,captureHeight:0,cameraId:$},B,H,A).then(Qe=>{ue=Qe})}),(he?Promise.resolve(!0).then(()=>(M(A_(!0)),!0)):Gs("VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",1).toPromise()).then(Se=>{var Qe,He;return null===(Qe=ue)||void 0===Qe||null===(He=Qe.parentNode)||void 0===He||He.removeChild(ue),Se?(M(np({imageSrc:S,cropped:T})),!0):Promise.reject({type:ur,reason:"Cannot preview virtual background"})})})(this[$n],a,d,u)}updateVirtualBackgroundImage(a,d){return((u,f,A)=>{const{store:{getState:S,dispatch:T},mediaAgent:R}=u,M=S(),{video:{virtualBackground:{isVBConfigured:B,imageSrc:H,cropped:$}}}=M;return B?f===H&&A===$?Promise.resolve(!0):Ob(f,A,R).then(()=>(T(np({imageSrc:f,cropped:A})),!0)).catch(()=>Promise.reject({type:Jr,reason:"Cannot load the image"})):Promise.reject({type:ur,reason:"Cannot update vitrual background image, please preview or start video with virtual background first."})})(this[$n],a,d)}stopPreviewVirtualBackground(){return(a=>{const{store:{getState:d},mediaAgent:u}=a,{video:{virtualBackground:{isVBConfigured:f}}}=d();return f?(u.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:ur,reason:"Cannot stop preview virtual background before start"})})(this[$n])}isCapturingVideo(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.video&&u.video.isCurrentUserStartedVideo})(this[$n])}isCameraTaken(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.video&&u.video.isCameraTaken})(this[$n])}isCaptureForbidden(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.video&&u.video.isCaptureForbidden})(this[$n])}getCameraList(){return(a=>{const{store:{getState:d}}=a,u=d();if(!u.video)return[];const{video:{cameraDevicesList:f}}=u;return f.map(A=>Object.assign({},A))})(this[$n])}getActiveCamera(){return(a=>{const{store:{getState:d}}=a,u=d();return u.video?u.video.activeCamera:""})(this[$n])}getActiveVideoId(){return(a=>{const{store:{getState:d}}=a,u=d();return u.video?u.video.activeVideoId:0})(this[$n])}getVideoMaxQuality(){return(a=>{const{store:{getState:d}}=a,u=d();return u.video?u.video.receivedVideoMaxQuality:W.VideoQuality.Video_90P})(this[$n])}getReceivedVideoDimension(){return(a=>{const{store:{getState:d}}=a,u=d();return u.video?u.video.receivedVideoDimension:null})(this[$n])}isSupportMultipleVideos(){return zR()}isSupportHDVideo(){return(a=>{var d;const{store:{getState:u}}=a;return null===(d=u().video)||void 0===d?void 0:d.isSupportHDVideo})(this[$n])}getHardwareAccelerationStatus(){return(a=>{var d;const{store:{getState:u}}=a;return null===(d=u().video)||void 0===d?void 0:d.hardwareAcceleration})(this[$n])}getVideoStatisticData(){return(a=>{let{store:{getState:d}}=a;const{video:{statistic:u}}=d();return mn({},u)})(this[$n])}isSupportVirtualBackground(){return ab()}getVirtualbackgroundStatus(){return(a=>{const{store:{getState:d}}=a;return mn({},d().video.virtualBackground)})(this[$n])}startShareView(a,d,u){return((f,A,S,T)=>{const{store:{getState:R,dispatch:M},mediaAgent:B,rwgAgent:H}=f,{share:{isReceiveSharing:$,isRemoteSharingActive:ce,activeNodeId:he,activeSsrc:ue,shareQuality:Se,status:Qe,isVerifiedRenderCanvasAfterFailover:He,isReceiveSharingFromMainSession:We},media:{sharingDecodeStatus:et}}=R();if(!A||S!==he)return Promise.reject({type:Jr,reason:""});if(!ce||$||Qe!==W.ShareStatus.End)return Promise.reject({type:ur,reason:""});const Lt=!!T;return Yc("sharing","success",et).subscribe(Gt=>{let[,jt]=Gt;if(jt){let Tt=A;!1===He&&(Tt=T_(A),M(QE(!0))),M(FE(!0)),H.subscribeSharing(S,Se,We),B.renderSharing(ue,Tt,Lt,T,We);const{audio:sn}=R();if(null!=sn&&sn.localShareAudioUserMutedList){const hn=sn.localShareAudioUserMutedList.find(An=>An.userId===S);hn&&B.setSharingAudioVolume(S,hn.muted,hn.isFromMainSession)}}}),"failed"===et?Promise.reject({type:"INTERNAL_ERROR",reason:""}):wi("SHARE_RECEIVED_DIMENSION_CHANGE",Gt=>!!Gt,6e4)})(this[$n],a,d,u)}stopShareView(){return(a=>{const{store:{dispatch:d,getState:u},rwgAgent:f,mediaAgent:A}=a,{share:{isReceiveSharing:S,activeNodeId:T},breakoutRoom:R}=u();if(!S)return Promise.resolve("");let M=!1;return R?.currentRoom.status===lr.InRoom&&R.mainSessionAttendeeList.length>0&&(M=R.mainSessionAttendeeList.findIndex(B=>B.userId===T)>-1),A.stopRenderSharing(),f.unsubscribeSharing(T,M),d(FE(!1)),Promise.resolve("")})(this[$n])}switchShareView(a){return((d,u)=>{const{store:{getState:f,dispatch:A},rwgAgent:S,mediaAgent:T}=d,R=f(),{share:{isReceiveSharing:M,activeNodeId:B,isRemoteControlApproved:H,isGrabRemoteControl:$,shareQuality:ce,isReceiveSharingFromMainSession:he},audio:ue,breakoutRoom:Se}=R;if(!M)return Promise.reject({type:ur});if(u===B)return Promise.resolve("");let Qe=[];return Qe=he?Se.mainSessionAttendeeList.filter(He=>He.bShareToBORooms&&He.sharerOn):Um(R),Qe.findIndex(He=>He.userId===B)>-1?(H&&($&&S.subscribeGrabRemoteControl(B,!1),S.sharingRequestRemoteControl(B,!1)),S.unsubscribeSharing(B,he),S.subscribeSharing(u,ce,he),T.switchSharingSource(u,he),ue?.localShareAudioUserMutedList.forEach(He=>{T.setSharingAudioVolume(u,He.userId!==u||He.muted,He.isFromMainSession)}),A(tC({bStatus:1,activeNodeID:u,ssrc:u})),Promise.resolve("")):Promise.reject({type:Jr,reason:"no matching user id"})})(this[$n],a)}updateSharingCanvasDimension(a,d){return((u,f,A)=>{const{store:{getState:S},mediaAgent:T}=u,R=S(),{share:{isReceiveSharing:M}}=R;return M&&T.updateRenderedSharingDimension(f,A),Promise.resolve("")})(this[$n],a,d)}startShareScreen(a,d){return((u,f,A)=>{var S;const{store:{getState:T,dispatch:R},mediaAgent:M}=u,B=T(),{meeting:{bIbDisableShare:H,meetingOptions:$},share:{sharePrivilege:ce,ssrc:he,isChromeExtensionInstalled:ue,isVerifiedCaptureCanvasAfterFailover:Se,isReceiveSharingFromMainSession:Qe},media:{sharingEncodeStatus:He},breakoutRoom:We}=B;if(H)return Promise.reject({type:ur,reason:"information barrier"});if("function"!=typeof(null===(S=navigator.mediaDevices)||void 0===S?void 0:S.getDisplayMedia))return Promise.reject({type:ur,reason:"Unable to share your screen due to the technical limitation"});if(Qe)return Promise.reject({type:ur,reason:"Unable to share your screen while someone is sharing from the main session"});if(tA()&&!(f instanceof HTMLVideoElement))return Promise.reject({type:Jr,reason:"Use Video element instead of Canvas element when WebCodecs enabled"});const et=Ku(B);if(null!=A&&A.broadcastToBreakoutRoom){if(!et||We?.currentRoom.status===lr.InRoom)return Promise.reject(et?{type:ur,reason:"Unable to share screen to breakout room when in the room"}:{type:"INSUFFICIENT_PRIVILEGES"});R(So(!0))}else R(So(!1));void 0!==A?.requestReadReceipt&&R(Xr(A?.requestReadReceipt));const Lt=Um(B);if(ce===Vu.OnlyHost&&!et)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"only host can start screen share"});if(ce===Vu.HostGrab&&!et&&Lt.length>0)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"only host can grab screen share"});if(!0===ui(B)?.sharerOn)return Promise.reject({type:ur,reason:"you have already started screen share."});let jt=Pn(!0);return ud()&&"function"!=typeof(null===(Tt=navigator.mediaDevices)||void 0===Tt?void 0:Tt.getDisplayMedia)&&!ue&&(M.checkChromeSharingExtension(),jt=Gs("SHARE_CHECK_CHROME_SHARING_EXTENSION",1)),f.id||(f.id="__ZOOM_SDK_SHARE_CANVAS_@__".replace("@","".concat(Math.floor(1e4*Math.random())))),Fv([Yc("sharing",He,"success"),jt]).subscribe(Tt=>{let[sn,hn]=Tt;const[An]=sn;if(An&&hn){!1===Se&&(T_(f),R(HE(!0)));let ln=document.querySelector("#".concat("__ZOOM_SDK_SHARING_VIDEO__"));ln&&"VIDEO"===ln.tagName||(ln=document.createElement("video"),ln.id="__ZOOM_SDK_SHARING_VIDEO__",ln.style.display="none",document.body.appendChild(ln));const Qt=null!=A&&A.secondaryCameraId?{cameraId:A.secondaryCameraId,width:A.captureWidth,height:A.captureHeight}:void 0;M.startDesktopSharing(he,f.id,"__ZOOM_SDK_SHARING_VIDEO__",Qt,null==$||!$.isDisableShareAudioIntoBo||!(null!=A&&A.broadcastToBreakoutRoom)),R(Qc(!!Qt))}}),new Promise((Tt,sn)=>{hc(Gs("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",1),Gs("SHARE_CHECK_CHROME_SHARING_EXTENSION").pipe(Un(hn=>!hn),ii(1),ai(Si({reason:"required extension",extensionUrl:"https://chrome.google.com/webstore/detail/zoom-scheduler/kgjfgplpablkjnlkjmjdecgdpfankdle"}))),Gs("SHARE_START_DESKTOP_SHARE_FAILED",1).pipe(nr(hn=>Si({reason:hn.reason||"user deny screen share"})))).subscribe(hn=>{if(!0===hn.sharerOn){const{share:{isSharingToBreakoutRoom:An},meeting:{meetingOptions:ln}}=T();M.enableShareAudioToBreakoutRoom(!(null!=ln&&ln.isDisableShareAudioIntoBo||!An)),Tt("")}else sn({type:"INTERNAL_ERROR"})},hn=>{sn(mn({type:ur},hn))})});var Tt})(this[$n],a,d)}stopShareScreen(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{share:{status:S},meeting:{userId:T}}=d();return S===W.ShareStatus.End?Promise.resolve(""):(u(Dl(W.ShareStatus.End)),f.stopSharing(T),A.stopDesktopSharing(),wi("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",R=>!1===R.sharerOn))})(this[$n])}pauseShareScreen(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{share:{status:S}}=d();return S===W.ShareStatus.Sharing?(f.pauseSharing(),A.pauseDesktopSharing(),wi("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",T=>!0===T.sharerPause).then(()=>(u(Dl(W.ShareStatus.Paused)),""))):Promise.reject({type:ur})})(this[$n])}resumeShareScreen(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{share:{status:S}}=d();return S===W.ShareStatus.Paused?(f.resumeSharing(),A.resumeDesktopSharing(),wi("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",T=>!0===T.sharerOn&&!1===T.sharerPause).then(()=>(u(Dl(W.ShareStatus.Sharing)),""))):Promise.reject({type:ur})})(this[$n])}setSharePrivilege(a){return rg(this[$n],a)}lockShare(a){return rg(this[$n],a?Vu.OnlyHost:Vu.HostGrab)}shareToBreakoutRoom(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{meeting:{userId:S},breakoutRoom:T,share:{isSharingToBreakoutRoom:R,status:M}}=d();return M===W.ShareStatus.End?Promise.reject({type:ur,reason:"Invalid sharing status"}):R?Promise.resolve(""):T.currentRoom.status===lr.InRoom?Promise.reject({type:ur,reason:"Unable to share screen to breakout room when in the room"}):(f.startShareToBreakoutRoom(S),u(So(!0)),A.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[$n])}stopShareToBreakoutRoom(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{meeting:{userId:S},share:{isSharingToBreakoutRoom:T}}=d();return T&&(f.stopShareToBreakoutRoom(S),u(So(!1)),A.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[$n])}muteOthersScreenShare(a){return((d,u)=>{const{store:{getState:f},rwgAgent:A}=d,S=f(),{meeting:{userId:T}}=S,R=Um(S);return u===T?Promise.reject({type:ur,reason:"Cannot mute self share, use 'stopScreenShare' instead"}):-1===R.findIndex(M=>M.userId===u)?Promise.reject({type:Jr,reason:"Target user is not sharing"}):(A.stopSharing(u),wi("UPDATE_USER_PARTICIPANT_ATTRIBUTE",M=>M.some(B=>B.userId===u&&!1===B.sharerOn)))})(this[$n],a)}getShareUserList(){return(a=>{const{store:{getState:d}}=a,u=d();if(!u.share)return[];const{share:{isReceiveSharingFromMainSession:f}}=u;if(f){const{breakoutRoom:{mainSessionAttendeeList:A}}=u;return A.filter(S=>S.bShareToBORooms&&(S.sharerOn||S.sharerPause)).map(S=>({userId:S.userId,displayName:S.displayName,audio:S.audio,muted:S.muted,isHost:S.isHost,isCoHost:S.bCoHost,avatar:S.avatar,bVideoOn:S.bVideoOn,sharerOn:S.sharerOn,sharePause:S.sharerPause,shareToBORooms:S.bShareToBORooms}))}return Um(u).map(A=>({userId:A.userId,displayName:A.displayName,audio:A.audio,muted:A.muted,isHost:A.isHost,isCoHost:A.bCoHost,avatar:A.avatar,bVideoOn:A.bVideoOn,sharerOn:A.sharerOn,sharePause:A.sharerPause}))})(this[$n])}getActiveShareUserId(){return(a=>{const{store:{getState:d}}=a,u=d();return u.share&&u.share.isRemoteSharingActive?u.share.activeNodeId:0})(this[$n])}isReceiveSharing(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.share&&u.share.isReceiveSharing})(this[$n])}getShareViewDimension(){return(a=>{const{store:{getState:d}}=a,u=d();if(u.share){if(u.share.status!==W.ShareStatus.End)return mn({},u.share.shareDimension);{const{share:{receivedShareDimension:f}}=u;return{width:f.width,height:f.height}}}return null})(this[$n])}getShareStatus(){return(a=>{const{store:{getState:d}}=a,u=d();return u.share?u.share.status:null})(this[$n])}isShareLocked(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.share&&u.share.sharePrivilege===Vu.OnlyHost})(this[$n])}isReceiveSharingFromMainSession(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.share&&u.share.isReceiveSharingFromMainSession})(this[$n])}getSharePrivilege(){return(a=>{const{store:{getState:d}}=a,u=d();return u.share?u.share.sharePrivilege:null})(this[$n])}}).prototype,"startAudio",[Zn,HA],Object.getOwnPropertyDescriptor(on.prototype,"startAudio"),on.prototype),tr(on.prototype,"stopAudio",[Zn,GA],Object.getOwnPropertyDescriptor(on.prototype,"stopAudio"),on.prototype),tr(on.prototype,"muteAudio",[Zn,wd],Object.getOwnPropertyDescriptor(on.prototype,"muteAudio"),on.prototype),tr(on.prototype,"unmuteAudio",[Zn,G_],Object.getOwnPropertyDescriptor(on.prototype,"unmuteAudio"),on.prototype),tr(on.prototype,"dialOut",[Zn,Za],Object.getOwnPropertyDescriptor(on.prototype,"dialOut"),on.prototype),tr(on.prototype,"cancelDialOut",[Zn,Rf],Object.getOwnPropertyDescriptor(on.prototype,"cancelDialOut"),on.prototype),tr(on.prototype,"hangup",[Zn,WA],Object.getOwnPropertyDescriptor(on.prototype,"hangup"),on.prototype),tr(on.prototype,"switchMicrophone",[Zn,Zu],Object.getOwnPropertyDescriptor(on.prototype,"switchMicrophone"),on.prototype),tr(on.prototype,"switchSpeaker",[Zn,ro],Object.getOwnPropertyDescriptor(on.prototype,"switchSpeaker"),on.prototype),tr(on.prototype,"muteShareAudio",[Zn,fp,ig],Object.getOwnPropertyDescriptor(on.prototype,"muteShareAudio"),on.prototype),tr(on.prototype,"unmuteShareAudio",[Zn,mp,Of],Object.getOwnPropertyDescriptor(on.prototype,"unmuteShareAudio"),on.prototype),tr(on.prototype,"subscribeAudioStatisticData",[Zn,og],Object.getOwnPropertyDescriptor(on.prototype,"subscribeAudioStatisticData"),on.prototype),tr(on.prototype,"unsubscribeAudioStatisticData",[Zn,sg],Object.getOwnPropertyDescriptor(on.prototype,"unsubscribeAudioStatisticData"),on.prototype),tr(on.prototype,"startVideo",[Zn,ag],Object.getOwnPropertyDescriptor(on.prototype,"startVideo"),on.prototype),tr(on.prototype,"stopVideo",[Zn,cg],Object.getOwnPropertyDescriptor(on.prototype,"stopVideo"),on.prototype),tr(on.prototype,"switchCamera",[Zn,ug],Object.getOwnPropertyDescriptor(on.prototype,"switchCamera"),on.prototype),tr(on.prototype,"renderVideo",[Zn,hI],Object.getOwnPropertyDescriptor(on.prototype,"renderVideo"),on.prototype),tr(on.prototype,"stopRenderVideo",[Zn,pI],Object.getOwnPropertyDescriptor(on.prototype,"stopRenderVideo"),on.prototype),tr(on.prototype,"updateVideoCanvasDimension",[Zn,W_],Object.getOwnPropertyDescriptor(on.prototype,"updateVideoCanvasDimension"),on.prototype),tr(on.prototype,"adjustRenderedVideoPosition",[Zn,fI],Object.getOwnPropertyDescriptor(on.prototype,"adjustRenderedVideoPosition"),on.prototype),tr(on.prototype,"clearVideoCanvas",[Zn,mI],Object.getOwnPropertyDescriptor(on.prototype,"clearVideoCanvas"),on.prototype),tr(on.prototype,"mirrorVideo",[Zn,gI],Object.getOwnPropertyDescriptor(on.prototype,"mirrorVideo"),on.prototype),tr(on.prototype,"enableHardwareAcceleration",[Zn,KA],Object.getOwnPropertyDescriptor(on.prototype,"enableHardwareAcceleration"),on.prototype),tr(on.prototype,"subscribeVideoStatisticData",[Zn,_I],Object.getOwnPropertyDescriptor(on.prototype,"subscribeVideoStatisticData"),on.prototype),tr(on.prototype,"unsubscribeVideoStatisticData",[Zn,vI],Object.getOwnPropertyDescriptor(on.prototype,"unsubscribeVideoStatisticData"),on.prototype),tr(on.prototype,"previewVirtualBackground",[Zn,YR],Object.getOwnPropertyDescriptor(on.prototype,"previewVirtualBackground"),on.prototype),tr(on.prototype,"updateVirtualBackgroundImage",[Zn,AI],Object.getOwnPropertyDescriptor(on.prototype,"updateVirtualBackgroundImage"),on.prototype),tr(on.prototype,"stopPreviewVirtualBackground",[Zn,pr],Object.getOwnPropertyDescriptor(on.prototype,"stopPreviewVirtualBackground"),on.prototype),tr(on.prototype,"startShareView",[Zn,zA],Object.getOwnPropertyDescriptor(on.prototype,"startShareView"),on.prototype),tr(on.prototype,"stopShareView",[Zn,lh],Object.getOwnPropertyDescriptor(on.prototype,"stopShareView"),on.prototype),tr(on.prototype,"switchShareView",[Zn,Nn],Object.getOwnPropertyDescriptor(on.prototype,"switchShareView"),on.prototype),tr(on.prototype,"updateSharingCanvasDimension",[Zn,Lb],Object.getOwnPropertyDescriptor(on.prototype,"updateSharingCanvasDimension"),on.prototype),tr(on.prototype,"startShareScreen",[Zn,qR],Object.getOwnPropertyDescriptor(on.prototype,"startShareScreen"),on.prototype),tr(on.prototype,"stopShareScreen",[Zn,Tn],Object.getOwnPropertyDescriptor(on.prototype,"stopShareScreen"),on.prototype),tr(on.prototype,"pauseShareScreen",[Zn,Ln],Object.getOwnPropertyDescriptor(on.prototype,"pauseShareScreen"),on.prototype),tr(on.prototype,"resumeShareScreen",[Zn,so],Object.getOwnPropertyDescriptor(on.prototype,"resumeShareScreen"),on.prototype),tr(on.prototype,"setSharePrivilege",[Id,JR,Zn],Object.getOwnPropertyDescriptor(on.prototype,"setSharePrivilege"),on.prototype),tr(on.prototype,"lockShare",[Id,dh,Zn],Object.getOwnPropertyDescriptor(on.prototype,"lockShare"),on.prototype),tr(on.prototype,"shareToBreakoutRoom",[Zn,Id,el],Object.getOwnPropertyDescriptor(on.prototype,"shareToBreakoutRoom"),on.prototype),tr(on.prototype,"stopShareToBreakoutRoom",[Zn,Id,K_],Object.getOwnPropertyDescriptor(on.prototype,"stopShareToBreakoutRoom"),on.prototype),tr(on.prototype,"muteOthersScreenShare",[Zn,Id,tl],Object.getOwnPropertyDescriptor(on.prototype,"muteOthersScreenShare"),on.prototype),on);var yI,ao,YA,$R,Eu;let ZR=(yI=Qr("share"),ao=Qr("audio"),YA=Qr("audio"),$R=Qr("audio"),tr((Eu=class extends XR{switchSharingSecondaryCamera(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,T=f(),{video:{cameraDevicesList:R},share:{status:M,isSharingWithSecondCamera:B}}=T;return"default"!==u&&-1===R.map(H=>H.deviceId).indexOf(u)?Promise.reject({type:Jr,reason:"Cannot find cameraDeviceId in camera devices list."}):(M===W.ShareStatus.Sharing&&B&&S.changeSharingSecondCamera(u),A(hA(u)),Promise.resolve())})(this[$n],a)}muteUserAudioLocally(a){return((d,u)=>{const{mediaAgent:f,store:{getState:A,dispatch:S}}=d,T=A(),{audio:{locallyMutedAudioList:R}}=T,M=Ks(T).filter(B=>"computer"===B.audio);return R.includes(u)||-1===M.findIndex(B=>B.userId===u)||(f.muteOrUnmuteOtherAudio(u,!0),S(xE(u))),Promise.resolve("")})(this[$n],a)}unmuteUserAudioLocally(a){return((d,u)=>{const{mediaAgent:f,store:{getState:A,dispatch:S}}=d,{audio:{locallyMutedAudioList:T}}=A();return T.includes(u)&&(f.muteOrUnmuteOtherAudio(u,!1),S(xw(u))),Promise.resolve("")})(this[$n],a)}adjustUserAudioVolumeLocally(a,d){return((u,f,A)=>{const{mediaAgent:S,store:{getState:T,dispatch:R}}=u,M=T();return-1!==Ks(M).findIndex(B=>B.userId===f)&&(S.adjustOtherAudioVolume(f,A),R(LE({userId:f,volume:A}))),Promise.resolve("")})(this[$n],a,d)}isUserAudioMutedLocally(a){return((d,u)=>{let{store:{getState:f}}=d;const{audio:{locallyMutedAudioList:A}}=f();return A.includes(u)})(this[$n],a)}getUserVolumeLocally(a){return((d,u)=>{var f,A;let{store:{getState:S}}=d;const{audio:{localUserAudioVolumeList:T,locallyMutedAudioList:R}}=S();return null!==(f=null===(A=T.find(M=>M.userId===u))||void 0===A?void 0:A.volume)&&void 0!==f?f:R.includes(u)?0:100})(this[$n],a)}}).prototype,"switchSharingSecondaryCamera",[Zn,yI],Object.getOwnPropertyDescriptor(Eu.prototype,"switchSharingSecondaryCamera"),Eu.prototype),tr(Eu.prototype,"muteUserAudioLocally",[Zn,ao],Object.getOwnPropertyDescriptor(Eu.prototype,"muteUserAudioLocally"),Eu.prototype),tr(Eu.prototype,"unmuteUserAudioLocally",[Zn,YA],Object.getOwnPropertyDescriptor(Eu.prototype,"unmuteUserAudioLocally"),Eu.prototype),tr(Eu.prototype,"adjustUserAudioVolumeLocally",[Zn,$R],Object.getOwnPropertyDescriptor(Eu.prototype,"adjustUserAudioVolumeLocally"),Eu.prototype),Eu);const Df={controlStatus:Nr.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:af.Automatically,currentRoom:{status:lr.Initial,boStatus:Pm.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1},li=na({["".concat(ZE)]:Mt((a,d)=>{let{payload:u}=d;Array.isArray(u)?a.rooms.push(...u):a.rooms.push(u)}),["".concat(eb)]:Mt((a,d)=>{let{payload:u}=d;a.allocationPattern=u}),["".concat(lC)]:Mt((a,d)=>{let{payload:u}=d;a.sequenceId=u}),["".concat(Fm)]:Mt((a,d)=>{let{payload:u}=d;a.meetingElapsedTime=u}),["".concat(tb)]:Mt((a,d)=>{let{payload:u}=d;a.startRoomElapsedTime=u}),["".concat(yA)]:Mt((a,d)=>{let{payload:u}=d;const{options:f}=a;Object.assign(f,u)}),["".concat(nb)]:Mt((a,d)=>{let{payload:u}=d;a.controlStatus=u}),["".concat(Ad)]:Mt((a,d)=>{let{payload:u}=d;a.rooms=u}),["".concat(b_)]:Mt((a,d)=>{let{payload:u}=d;const{currentRoom:f}=a;Object.assign(f,u)}),["".concat(gf)]:Mt((a,d)=>{let{payload:u}=d;const{currentRoom:f}=a;f.status=u}),["".concat(Zw)]:Mt((a,d)=>{let{payload:u}=d;const{currentRoom:f}=a;f.boConfId=u}),["".concat(dC)]:Mt((a,d)=>{let{payload:u}=d;const{currentRoom:f}=a;f.boToken=u}),["".concat(hC)]:Mt((a,d)=>{let{payload:u}=d;a.closingRoomTime=u}),["".concat(pC)]:Mt((a,d)=>{let{payload:u}=d;a.broadcastMessage=u}),["".concat(ws)]:Mt((a,d)=>{let{payload:u}=d;a.hostReplyToQuestionerType=u}),["".concat(rb)]:Mt((a,d)=>{let{payload:u}=d;a.hostReplyToRequestId=u}),["".concat(fC)]:Mt((a,d)=>{let{payload:u}=d;void 0!==u.add&&u.add.length>0&&u.add.forEach(f=>{const A=a.mainSessionAttendeeList.find(S=>S.userId===f.userId);void 0!==A?Object.assign(A,f):W0(f.userRole)||a.mainSessionAttendeeList.push(f)}),void 0!==u.update&&u.update.length>0&&u.update.forEach(f=>{const A=a.mainSessionAttendeeList.find(S=>S.userId===f.userId);void 0!==A&&Object.assign(A,f)}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(f=>{const A=a.mainSessionAttendeeList.findIndex(S=>S.userId===f.userId);-1!==A&&a.mainSessionAttendeeList.splice(A,1)})}),["".concat(mC)]:Mt((a,d)=>{let{payload:u}=d;a.isHugeBO=u}),["".concat(yd)]:Mt((a,d)=>{let{payload:u}=d;a.isUserRoleUpdated=u}),["".concat(ib)]:Mt((a,d)=>{let{payload:u}=d;a.preAssignedRooms=u}),["".concat(eR)]:Mt((a,d)=>{let{payload:u}=d;a.isEnableBreakoutRoom=u.isEnableBreakoutRoom,a.isEnableBOBroadcast=u.isEnableBOBroadcast}),["".concat(zu)]:a=>{const{currentRoom:{status:d}}=a;return mn(mn({},Df),{},d===lr.Joining?{preAssignedRooms:a.preAssignedRooms,currentRoom:a.currentRoom,closingRoomTime:a.closingRoomTime}:d===lr.Leaving?{preAssignedRooms:a.preAssignedRooms,closingRoomTime:a.closingRoomTime}:{preAssignedRooms:a.preAssignedRooms})}},Df);var di=fc(function(a,d){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function f(T,R){return Object.prototype.hasOwnProperty.call(T,R)}d.assign=function(T){for(var R=Array.prototype.slice.call(arguments,1);R.length;){var M=R.shift();if(M){if("object"!=typeof M)throw new TypeError(M+"must be non-object");for(var B in M)f(M,B)&&(T[B]=M[B])}}return T},d.shrinkBuf=function(T,R){return T.length===R?T:T.subarray?T.subarray(0,R):(T.length=R,T)};var A={arraySet:function(T,R,M,B,H){if(R.subarray&&T.subarray)T.set(R.subarray(M,M+B),H);else for(var $=0;$<B;$++)T[H+$]=R[M+$]},flattenChunks:function(T){var R,M,B,H,$,ce;for(B=0,R=0,M=T.length;R<M;R++)B+=T[R].length;for(ce=new Uint8Array(B),H=0,R=0,M=T.length;R<M;R++)ce.set($=T[R],H),H+=$.length;return ce}},S={arraySet:function(T,R,M,B,H){for(var $=0;$<B;$++)T[H+$]=R[M+$]},flattenChunks:function(T){return[].concat.apply([],T)}};d.setTyped=function(T){T?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,A)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,S))},d.setTyped(u)});function Ys(a){for(var d=a.length;--d>=0;)a[d]=0}var Co=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],qA=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],EI=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bI=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],hh=new Array(576);Ys(hh);var z_=new Array(60);Ys(z_);var gp=new Array(512);Ys(gp);var lg=new Array(256);Ys(lg);var Bb=new Array(29);Ys(Bb);var SI,Fb,JA,Rd=new Array(30);function CI(a,d,u,f,A){this.static_tree=a,this.extra_bits=d,this.extra_base=u,this.elems=f,this.max_length=A,this.has_stree=a&&a.length}function Ub(a,d){this.dyn_tree=a,this.max_code=0,this.stat_desc=d}function Y_(a){return a<256?gp[a]:gp[256+(a>>>7)]}function Fl(a,d){a.pending_buf[a.pending++]=255&d,a.pending_buf[a.pending++]=d>>>8&255}function ec(a,d,u){a.bi_valid>16-u?(a.bi_buf|=d<<a.bi_valid&65535,Fl(a,a.bi_buf),a.bi_buf=d>>16-a.bi_valid,a.bi_valid+=u-16):(a.bi_buf|=d<<a.bi_valid&65535,a.bi_valid+=u)}function nl(a,d,u){ec(a,u[2*d],u[2*d+1])}function kf(a,d){var u=0;do{u|=1&a,a>>>=1,u<<=1}while(--d>0);return u>>>1}function rP(a,d,u){var f,A,S=new Array(16),T=0;for(f=1;f<=15;f++)S[f]=T=T+u[f-1]<<1;for(A=0;A<=d;A++){var R=a[2*A+1];0!==R&&(a[2*A]=kf(S[R]++,R))}}function iP(a){var d;for(d=0;d<286;d++)a.dyn_ltree[2*d]=0;for(d=0;d<30;d++)a.dyn_dtree[2*d]=0;for(d=0;d<19;d++)a.bl_tree[2*d]=0;a.dyn_ltree[512]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function II(a){a.bi_valid>8?Fl(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function eO(a,d,u,f){var A=2*d,S=2*u;return a[A]<a[S]||a[A]===a[S]&&f[d]<=f[u]}function Vb(a,d,u){for(var f=a.heap[u],A=u<<1;A<=a.heap_len&&(A<a.heap_len&&eO(d,a.heap[A+1],a.heap[A],a.depth)&&A++,!eO(d,f,a.heap[A],a.depth));)a.heap[u]=a.heap[A],u=A,A<<=1;a.heap[u]=f}function tO(a,d,u){var f,A,S,T,R=0;if(0!==a.last_lit)do{f=a.pending_buf[a.d_buf+2*R]<<8|a.pending_buf[a.d_buf+2*R+1],A=a.pending_buf[a.l_buf+R],R++,0===f?nl(a,A,d):(nl(a,(S=lg[A])+256+1,d),0!==(T=Co[S])&&ec(a,A-=Bb[S],T),nl(a,S=Y_(--f),u),0!==(T=qA[S])&&ec(a,f-=Rd[S],T))}while(R<a.last_lit);nl(a,256,d)}function Yo(a,d){var u,f,A,S=d.dyn_tree,T=d.stat_desc.static_tree,R=d.stat_desc.has_stree,M=d.stat_desc.elems,B=-1;for(a.heap_len=0,a.heap_max=573,u=0;u<M;u++)0!==S[2*u]?(a.heap[++a.heap_len]=B=u,a.depth[u]=0):S[2*u+1]=0;for(;a.heap_len<2;)S[2*(A=a.heap[++a.heap_len]=B<2?++B:0)]=1,a.depth[A]=0,a.opt_len--,R&&(a.static_len-=T[2*A+1]);for(d.max_code=B,u=a.heap_len>>1;u>=1;u--)Vb(a,S,u);A=M;do{u=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Vb(a,S,1),f=a.heap[1],a.heap[--a.heap_max]=u,a.heap[--a.heap_max]=f,S[2*A]=S[2*u]+S[2*f],a.depth[A]=(a.depth[u]>=a.depth[f]?a.depth[u]:a.depth[f])+1,S[2*u+1]=S[2*f+1]=A,a.heap[1]=A++,Vb(a,S,1)}while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],function(H,$){var ce,he,ue,Se,Qe,He,We=$.dyn_tree,et=$.max_code,Lt=$.stat_desc.static_tree,Gt=$.stat_desc.has_stree,jt=$.stat_desc.extra_bits,Tt=$.stat_desc.extra_base,sn=$.stat_desc.max_length,hn=0;for(Se=0;Se<=15;Se++)H.bl_count[Se]=0;for(We[2*H.heap[H.heap_max]+1]=0,ce=H.heap_max+1;ce<573;ce++)(Se=We[2*We[2*(he=H.heap[ce])+1]+1]+1)>sn&&(Se=sn,hn++),We[2*he+1]=Se,he>et||(H.bl_count[Se]++,Qe=0,he>=Tt&&(Qe=jt[he-Tt]),H.opt_len+=(He=We[2*he])*(Se+Qe),Gt&&(H.static_len+=He*(Lt[2*he+1]+Qe)));if(0!==hn){do{for(Se=sn-1;0===H.bl_count[Se];)Se--;H.bl_count[Se]--,H.bl_count[Se+1]+=2,H.bl_count[sn]--,hn-=2}while(hn>0);for(Se=sn;0!==Se;Se--)for(he=H.bl_count[Se];0!==he;)(ue=H.heap[--ce])>et||(We[2*ue+1]!==Se&&(H.opt_len+=(Se-We[2*ue+1])*We[2*ue],We[2*ue+1]=Se),he--)}}(a,d),rP(S,B,a.bl_count)}function TI(a,d,u){var f,A,S=-1,T=d[1],R=0,M=7,B=4;for(0===T&&(M=138,B=3),d[2*(u+1)+1]=65535,f=0;f<=u;f++)A=T,T=d[2*(f+1)+1],++R<M&&A===T||(R<B?a.bl_tree[2*A]+=R:0!==A?(A!==S&&a.bl_tree[2*A]++,a.bl_tree[32]++):R<=10?a.bl_tree[34]++:a.bl_tree[36]++,R=0,S=A,0===T?(M=138,B=3):A===T?(M=6,B=3):(M=7,B=4))}function nO(a,d,u){var f,A,S=-1,T=d[1],R=0,M=7,B=4;for(0===T&&(M=138,B=3),f=0;f<=u;f++)if(A=T,T=d[2*(f+1)+1],!(++R<M&&A===T)){if(R<B)do{nl(a,A,a.bl_tree)}while(0!=--R);else 0!==A?(A!==S&&(nl(a,A,a.bl_tree),R--),nl(a,16,a.bl_tree),ec(a,R-3,2)):R<=10?(nl(a,17,a.bl_tree),ec(a,R-3,3)):(nl(a,18,a.bl_tree),ec(a,R-11,7));R=0,S=A,0===T?(M=138,B=3):A===T?(M=6,B=3):(M=7,B=4)}}Ys(Rd);var rO=!1;function jb(a,d,u,f){var A,S,T;ec(a,0+(f?1:0),3),S=d,T=u,II(A=a),Fl(A,T),Fl(A,~T),di.arraySet(A.pending_buf,A.window,S,T,A.pending),A.pending+=T}var dg,eu={_tr_init:function(a){rO||(function(){var d,u,f,A,S,T=new Array(16);for(f=0,A=0;A<28;A++)for(Bb[A]=f,d=0;d<1<<Co[A];d++)lg[f++]=A;for(lg[f-1]=A,S=0,A=0;A<16;A++)for(Rd[A]=S,d=0;d<1<<qA[A];d++)gp[S++]=A;for(S>>=7;A<30;A++)for(Rd[A]=S<<7,d=0;d<1<<qA[A]-7;d++)gp[256+S++]=A;for(u=0;u<=15;u++)T[u]=0;for(d=0;d<=143;)hh[2*d+1]=8,d++,T[8]++;for(;d<=255;)hh[2*d+1]=9,d++,T[9]++;for(;d<=279;)hh[2*d+1]=7,d++,T[7]++;for(;d<=287;)hh[2*d+1]=8,d++,T[8]++;for(rP(hh,287,T),d=0;d<30;d++)z_[2*d+1]=5,z_[2*d]=kf(d,5);SI=new CI(hh,Co,257,286,15),Fb=new CI(z_,qA,0,30,15),JA=new CI(new Array(0),EI,0,19,7)}(),rO=!0),a.l_desc=new Ub(a.dyn_ltree,SI),a.d_desc=new Ub(a.dyn_dtree,Fb),a.bl_desc=new Ub(a.bl_tree,JA),a.bi_buf=0,a.bi_valid=0,iP(a)},_tr_stored_block:jb,_tr_flush_block:function(a,d,u,f){var A,S,T=0;a.level>0?(2===a.strm.data_type&&(a.strm.data_type=function(R){var M,B=4093624447;for(M=0;M<=31;M++,B>>>=1)if(1&B&&0!==R.dyn_ltree[2*M])return 0;if(0!==R.dyn_ltree[18]||0!==R.dyn_ltree[20]||0!==R.dyn_ltree[26])return 1;for(M=32;M<256;M++)if(0!==R.dyn_ltree[2*M])return 1;return 0}(a)),Yo(a,a.l_desc),Yo(a,a.d_desc),T=function(R){var M;for(TI(R,R.dyn_ltree,R.l_desc.max_code),TI(R,R.dyn_dtree,R.d_desc.max_code),Yo(R,R.bl_desc),M=18;M>=3&&0===R.bl_tree[2*bI[M]+1];M--);return R.opt_len+=3*(M+1)+5+5+4,M}(a),(S=a.static_len+3+7>>>3)<=(A=a.opt_len+3+7>>>3)&&(A=S)):A=S=u+5,u+4<=A&&-1!==d?jb(a,d,u,f):4===a.strategy||S===A?(ec(a,2+(f?1:0),3),tO(a,hh,z_)):(ec(a,4+(f?1:0),3),function(R,M,B,H){var $;for(ec(R,M-257,5),ec(R,B-1,5),ec(R,H-4,4),$=0;$<H;$++)ec(R,R.bl_tree[2*bI[$]+1],3);nO(R,R.dyn_ltree,M-1),nO(R,R.dyn_dtree,B-1)}(a,a.l_desc.max_code+1,a.d_desc.max_code+1,T+1),tO(a,a.dyn_ltree,a.dyn_dtree)),iP(a),f&&II(a)},_tr_tally:function(a,d,u){return a.pending_buf[a.d_buf+2*a.last_lit]=d>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&d,a.pending_buf[a.l_buf+a.last_lit]=255&u,a.last_lit++,0===d?a.dyn_ltree[2*u]++:(a.matches++,d--,a.dyn_ltree[2*(lg[u]+256+1)]++,a.dyn_dtree[2*Y_(d)]++),a.last_lit===a.lit_bufsize-1},_tr_align:function(a){var d;ec(a,2,3),nl(a,256,hh),16===(d=a).bi_valid?(Fl(d,d.bi_buf),d.bi_buf=0,d.bi_valid=0):d.bi_valid>=8&&(d.pending_buf[d.pending++]=255&d.bi_buf,d.bi_buf>>=8,d.bi_valid-=8)}},q_=function(a,d,u,f){for(var A=65535&a|0,S=a>>>16&65535|0,T=0;0!==u;){u-=T=u>2e3?2e3:u;do{S=S+(A=A+d[f++]|0)|0}while(--T);A%=65521,S%=65521}return A|S<<16|0},J_=function(){for(var a,d=[],u=0;u<256;u++){a=u;for(var f=0;f<8;f++)a=1&a?3988292384^a>>>1:a>>>1;d[u]=a}return d}(),Ma=function(a,d,u,f){var A=J_,S=f+u;a^=-1;for(var T=f;T<S;T++)a=a>>>8^A[255&(a^d[T])];return-1^a},ph={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function _p(a,d){return a.msg=ph[d],d}function iO(a){return(a<<1)-(a>4?9:0)}function vp(a){for(var d=a.length;--d>=0;)a[d]=0}function tu(a){var d=a.state,u=d.pending;u>a.avail_out&&(u=a.avail_out),0!==u&&(di.arraySet(a.output,d.pending_buf,d.pending_out,u,a.next_out),a.next_out+=u,d.pending_out+=u,a.total_out+=u,a.avail_out-=u,d.pending-=u,0===d.pending&&(d.pending_out=0))}function ys(a,d){eu._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,d),a.block_start=a.strstart,tu(a.strm)}function Fr(a,d){a.pending_buf[a.pending++]=d}function bu(a,d){a.pending_buf[a.pending++]=d>>>8&255,a.pending_buf[a.pending++]=255&d}function oO(a,d){var u,f,A=a.max_chain_length,S=a.strstart,T=a.prev_length,R=a.nice_match,M=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,B=a.window,H=a.w_mask,$=a.prev,ce=a.strstart+258,he=B[S+T-1],ue=B[S+T];a.prev_length>=a.good_match&&(A>>=2),R>a.lookahead&&(R=a.lookahead);do{if(B[(u=d)+T]===ue&&B[u+T-1]===he&&B[u]===B[S]&&B[++u]===B[S+1]){S+=2,u++;do{}while(B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&S<ce);if(f=258-(ce-S),S=ce-258,f>T){if(a.match_start=d,T=f,f>=R)break;he=B[S+T-1],ue=B[S+T]}}}while((d=$[d&H])>M&&0!=--A);return T<=a.lookahead?T:a.lookahead}function fh(a){var d,u,f,A,S,T,R,M,B,H,$=a.w_size;do{if(A=a.window_size-a.lookahead-a.strstart,a.strstart>=$+($-262)){di.arraySet(a.window,a.window,$,$,0),a.match_start-=$,a.strstart-=$,a.block_start-=$,d=u=a.hash_size;do{f=a.head[--d],a.head[d]=f>=$?f-$:0}while(--u);d=u=$;do{f=a.prev[--d],a.prev[d]=f>=$?f-$:0}while(--u);A+=$}if(0===a.strm.avail_in)break;if(R=a.window,M=a.strstart+a.lookahead,H=void 0,(H=(T=a.strm).avail_in)>(B=A)&&(H=B),u=0===H?0:(T.avail_in-=H,di.arraySet(R,T.input,T.next_in,H,M),1===T.state.wrap?T.adler=q_(T.adler,R,H,M):2===T.state.wrap&&(T.adler=Ma(T.adler,R,H,M)),T.next_in+=H,T.total_in+=H,H),a.lookahead+=u,a.lookahead+a.insert>=3)for(a.ins_h=a.window[S=a.strstart-a.insert],a.ins_h=(a.ins_h<<a.hash_shift^a.window[S+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[S+3-1])&a.hash_mask,a.prev[S&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=S,S++,a.insert--,!(a.lookahead+a.insert<3)););}while(a.lookahead<262&&0!==a.strm.avail_in)}function Ul(a,d){for(var u,f;;){if(a.lookahead<262){if(fh(a),a.lookahead<262&&0===d)return 1;if(0===a.lookahead)break}if(u=0,a.lookahead>=3&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,u=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==u&&a.strstart-u<=a.w_size-262&&(a.match_length=oO(a,u)),a.match_length>=3)if(f=eu._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=3){a.match_length--;do{a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,u=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart}while(0!=--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else f=eu._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(f&&(ys(a,!1),0===a.strm.avail_out))return 1}return a.insert=a.strstart<2?a.strstart:2,4===d?(ys(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(ys(a,!1),0===a.strm.avail_out)?1:2}function Sc(a,d){for(var u,f,A;;){if(a.lookahead<262){if(fh(a),a.lookahead<262&&0===d)return 1;if(0===a.lookahead)break}if(u=0,a.lookahead>=3&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,u=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,0!==u&&a.prev_length<a.max_lazy_match&&a.strstart-u<=a.w_size-262&&(a.match_length=oO(a,u),a.match_length<=5&&(1===a.strategy||3===a.match_length&&a.strstart-a.match_start>4096)&&(a.match_length=2)),a.prev_length>=3&&a.match_length<=a.prev_length){A=a.strstart+a.lookahead-3,f=eu._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3),a.lookahead-=a.prev_length-1,a.prev_length-=2;do{++a.strstart<=A&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,u=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart)}while(0!=--a.prev_length);if(a.match_available=0,a.match_length=2,a.strstart++,f&&(ys(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((f=eu._tr_tally(a,0,a.window[a.strstart-1]))&&ys(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(f=eu._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<2?a.strstart:2,4===d?(ys(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(ys(a,!1),0===a.strm.avail_out)?1:2}function qs(a,d,u,f,A){this.good_length=a,this.max_lazy=d,this.nice_length=u,this.max_chain=f,this.func=A}function sO(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new di.Buf16(1146),this.dyn_dtree=new di.Buf16(122),this.bl_tree=new di.Buf16(78),vp(this.dyn_ltree),vp(this.dyn_dtree),vp(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new di.Buf16(16),this.heap=new di.Buf16(573),vp(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new di.Buf16(573),vp(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function wI(a){var d;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=2,(d=a.state).pending=0,d.pending_out=0,d.wrap<0&&(d.wrap=-d.wrap),d.status=d.wrap?42:113,a.adler=2===d.wrap?0:1,d.last_flush=0,eu._tr_init(d),0):_p(a,-2)}function aO(a){var u,d=wI(a);return 0===d&&((u=a.state).window_size=2*u.w_size,vp(u.head),u.max_lazy_match=dg[u.level].max_lazy,u.good_match=dg[u.level].good_length,u.nice_match=dg[u.level].nice_length,u.max_chain_length=dg[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=2,u.match_available=0,u.ins_h=0),d}function Qb(a,d,u,f,A,S){if(!a)return-2;var T=1;if(-1===d&&(d=6),f<0?(T=0,f=-f):f>15&&(T=2,f-=16),A<1||A>9||8!==u||f<8||f>15||d<0||d>9||S<0||S>4)return _p(a,-2);8===f&&(f=9);var R=new sO;return a.state=R,R.strm=a,R.wrap=T,R.gzhead=null,R.w_bits=f,R.w_size=1<<R.w_bits,R.w_mask=R.w_size-1,R.hash_bits=A+7,R.hash_size=1<<R.hash_bits,R.hash_mask=R.hash_size-1,R.hash_shift=~~((R.hash_bits+3-1)/3),R.window=new di.Buf8(2*R.w_size),R.head=new di.Buf16(R.hash_size),R.prev=new di.Buf16(R.w_size),R.lit_bufsize=1<<A+6,R.pending_buf_size=4*R.lit_bufsize,R.pending_buf=new di.Buf8(R.pending_buf_size),R.d_buf=1*R.lit_bufsize,R.l_buf=3*R.lit_bufsize,R.level=d,R.strategy=S,R.method=u,aO(a)}dg=[new qs(0,0,0,0,function(a,d){var u=65535;for(u>a.pending_buf_size-5&&(u=a.pending_buf_size-5);;){if(a.lookahead<=1){if(fh(a),0===a.lookahead&&0===d)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var f=a.block_start+u;if((0===a.strstart||a.strstart>=f)&&(a.lookahead=a.strstart-f,a.strstart=f,ys(a,!1),0===a.strm.avail_out)||a.strstart-a.block_start>=a.w_size-262&&(ys(a,!1),0===a.strm.avail_out))return 1}return a.insert=0,4===d?(ys(a,!0),0===a.strm.avail_out?3:4):(a.strstart>a.block_start&&ys(a,!1),1)}),new qs(4,4,8,4,Ul),new qs(4,5,16,8,Ul),new qs(4,6,32,32,Ul),new qs(4,4,16,16,Sc),new qs(8,16,32,32,Sc),new qs(8,16,128,128,Sc),new qs(8,32,128,256,Sc),new qs(32,128,258,1024,Sc),new qs(32,258,258,4096,Sc)];var XA={deflateInit:function(a,d){return Qb(a,d,8,15,8,0)},deflateInit2:Qb,deflateReset:aO,deflateResetKeep:wI,deflateSetHeader:function(a,d){return a&&a.state?2!==a.state.wrap?-2:(a.state.gzhead=d,0):-2},deflate:function(a,d){var u,f,A,S;if(!a||!a.state||d>5||d<0)return a?_p(a,-2):-2;if(f=a.state,!a.output||!a.input&&0!==a.avail_in||666===f.status&&4!==d)return _p(a,0===a.avail_out?-5:-2);if(f.strm=a,u=f.last_flush,f.last_flush=d,42===f.status)if(2===f.wrap)a.adler=0,Fr(f,31),Fr(f,139),Fr(f,8),f.gzhead?(Fr(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),Fr(f,255&f.gzhead.time),Fr(f,f.gzhead.time>>8&255),Fr(f,f.gzhead.time>>16&255),Fr(f,f.gzhead.time>>24&255),Fr(f,9===f.level?2:f.strategy>=2||f.level<2?4:0),Fr(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(Fr(f,255&f.gzhead.extra.length),Fr(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(a.adler=Ma(a.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(Fr(f,0),Fr(f,0),Fr(f,0),Fr(f,0),Fr(f,0),Fr(f,9===f.level?2:f.strategy>=2||f.level<2?4:0),Fr(f,3),f.status=113);else{var T=8+(f.w_bits-8<<4)<<8;T|=(f.strategy>=2||f.level<2?0:f.level<6?1:6===f.level?2:3)<<6,0!==f.strstart&&(T|=32),T+=31-T%31,f.status=113,bu(f,T),0!==f.strstart&&(bu(f,a.adler>>>16),bu(f,65535&a.adler)),a.adler=1}if(69===f.status)if(f.gzhead.extra){for(A=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>A&&(a.adler=Ma(a.adler,f.pending_buf,f.pending-A,A)),tu(a),A=f.pending,f.pending!==f.pending_buf_size));)Fr(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>A&&(a.adler=Ma(a.adler,f.pending_buf,f.pending-A,A)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(73===f.status)if(f.gzhead.name){A=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>A&&(a.adler=Ma(a.adler,f.pending_buf,f.pending-A,A)),tu(a),A=f.pending,f.pending===f.pending_buf_size)){S=1;break}S=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,Fr(f,S)}while(0!==S);f.gzhead.hcrc&&f.pending>A&&(a.adler=Ma(a.adler,f.pending_buf,f.pending-A,A)),0===S&&(f.gzindex=0,f.status=91)}else f.status=91;if(91===f.status)if(f.gzhead.comment){A=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>A&&(a.adler=Ma(a.adler,f.pending_buf,f.pending-A,A)),tu(a),A=f.pending,f.pending===f.pending_buf_size)){S=1;break}S=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,Fr(f,S)}while(0!==S);f.gzhead.hcrc&&f.pending>A&&(a.adler=Ma(a.adler,f.pending_buf,f.pending-A,A)),0===S&&(f.status=103)}else f.status=103;if(103===f.status&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&tu(a),f.pending+2<=f.pending_buf_size&&(Fr(f,255&a.adler),Fr(f,a.adler>>8&255),a.adler=0,f.status=113)):f.status=113),0!==f.pending){if(tu(a),0===a.avail_out)return f.last_flush=-1,0}else if(0===a.avail_in&&iO(d)<=iO(u)&&4!==d)return _p(a,-5);if(666===f.status&&0!==a.avail_in)return _p(a,-5);if(0!==a.avail_in||0!==f.lookahead||0!==d&&666!==f.status){var R=2===f.strategy?function(M,B){for(var H;;){if(0===M.lookahead&&(fh(M),0===M.lookahead)){if(0===B)return 1;break}if(M.match_length=0,H=eu._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,H&&(ys(M,!1),0===M.strm.avail_out))return 1}return M.insert=0,4===B?(ys(M,!0),0===M.strm.avail_out?3:4):M.last_lit&&(ys(M,!1),0===M.strm.avail_out)?1:2}(f,d):3===f.strategy?function(M,B){for(var H,$,ce,he,ue=M.window;;){if(M.lookahead<=258){if(fh(M),M.lookahead<=258&&0===B)return 1;if(0===M.lookahead)break}if(M.match_length=0,M.lookahead>=3&&M.strstart>0&&($=ue[ce=M.strstart-1])===ue[++ce]&&$===ue[++ce]&&$===ue[++ce]){he=M.strstart+258;do{}while($===ue[++ce]&&$===ue[++ce]&&$===ue[++ce]&&$===ue[++ce]&&$===ue[++ce]&&$===ue[++ce]&&$===ue[++ce]&&$===ue[++ce]&&ce<he);M.match_length=258-(he-ce),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=3?(H=eu._tr_tally(M,1,M.match_length-3),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(H=eu._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),H&&(ys(M,!1),0===M.strm.avail_out))return 1}return M.insert=0,4===B?(ys(M,!0),0===M.strm.avail_out?3:4):M.last_lit&&(ys(M,!1),0===M.strm.avail_out)?1:2}(f,d):dg[f.level].func(f,d);if(3!==R&&4!==R||(f.status=666),1===R||3===R)return 0===a.avail_out&&(f.last_flush=-1),0;if(2===R&&(1===d?eu._tr_align(f):5!==d&&(eu._tr_stored_block(f,0,0,!1),3===d&&(vp(f.head),0===f.lookahead&&(f.strstart=0,f.block_start=0,f.insert=0))),tu(a),0===a.avail_out))return f.last_flush=-1,0}return 4!==d?0:f.wrap<=0?1:(2===f.wrap?(Fr(f,255&a.adler),Fr(f,a.adler>>8&255),Fr(f,a.adler>>16&255),Fr(f,a.adler>>24&255),Fr(f,255&a.total_in),Fr(f,a.total_in>>8&255),Fr(f,a.total_in>>16&255),Fr(f,a.total_in>>24&255)):(bu(f,a.adler>>>16),bu(f,65535&a.adler)),tu(a),f.wrap>0&&(f.wrap=-f.wrap),0!==f.pending?0:1)},deflateEnd:function(a){var d;return a&&a.state?42!==(d=a.state.status)&&69!==d&&73!==d&&91!==d&&103!==d&&113!==d&&666!==d?_p(a,-2):(a.state=null,113===d?_p(a,-3):0):-2},deflateSetDictionary:function(a,d){var u,f,A,S,T,R,M,B,H=d.length;if(!a||!a.state||2===(S=(u=a.state).wrap)||1===S&&42!==u.status||u.lookahead)return-2;for(1===S&&(a.adler=q_(a.adler,d,H,0)),u.wrap=0,H>=u.w_size&&(0===S&&(vp(u.head),u.strstart=0,u.block_start=0,u.insert=0),B=new di.Buf8(u.w_size),di.arraySet(B,d,H-u.w_size,u.w_size,0),d=B,H=u.w_size),T=a.avail_in,R=a.next_in,M=a.input,a.avail_in=H,a.next_in=0,a.input=d,fh(u);u.lookahead>=3;){f=u.strstart,A=u.lookahead-2;do{u.ins_h=(u.ins_h<<u.hash_shift^u.window[f+3-1])&u.hash_mask,u.prev[f&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=f,f++}while(--A);u.strstart=f,u.lookahead=2,fh(u)}return u.strstart+=u.lookahead,u.block_start=u.strstart,u.insert=u.lookahead,u.lookahead=0,u.match_length=u.prev_length=2,u.match_available=0,a.next_in=R,a.input=M,a.avail_in=T,u.wrap=S,0},deflateInfo:"pako deflate (from Nodeca project)"},RI=!0,Hb=!0;try{String.fromCharCode.apply(null,[0])}catch{RI=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Hb=!1}for(var mh=new di.Buf8(256),Nf=0;Nf<256;Nf++)mh[Nf]=Nf>=252?6:Nf>=248?5:Nf>=240?4:Nf>=224?3:Nf>=192?2:1;function OI(a,d){if(d<65534&&(a.subarray&&Hb||!a.subarray&&RI))return String.fromCharCode.apply(null,di.shrinkBuf(a,d));for(var u="",f=0;f<d;f++)u+=String.fromCharCode(a[f]);return u}mh[254]=mh[254]=1;var DI=function(a){var d,u,f,A,S,T=a.length,R=0;for(A=0;A<T;A++)55296==(64512&(u=a.charCodeAt(A)))&&A+1<T&&56320==(64512&(f=a.charCodeAt(A+1)))&&(u=65536+(u-55296<<10)+(f-56320),A++),R+=u<128?1:u<2048?2:u<65536?3:4;for(d=new di.Buf8(R),S=0,A=0;S<R;A++)55296==(64512&(u=a.charCodeAt(A)))&&A+1<T&&56320==(64512&(f=a.charCodeAt(A+1)))&&(u=65536+(u-55296<<10)+(f-56320),A++),u<128?d[S++]=u:u<2048?(d[S++]=192|u>>>6,d[S++]=128|63&u):u<65536?(d[S++]=224|u>>>12,d[S++]=128|u>>>6&63,d[S++]=128|63&u):(d[S++]=240|u>>>18,d[S++]=128|u>>>12&63,d[S++]=128|u>>>6&63,d[S++]=128|63&u);return d},cO=function(a){return OI(a,a.length)},uO=function(a,d){var u,f,A,S,T=d||a.length,R=new Array(2*T);for(f=0,u=0;u<T;)if((A=a[u++])<128)R[f++]=A;else if((S=mh[A])>4)R[f++]=65533,u+=S-1;else{for(A&=2===S?31:3===S?15:7;S>1&&u<T;)A=A<<6|63&a[u++],S--;S>1?R[f++]=65533:A<65536?R[f++]=A:(R[f++]=55296|(A-=65536)>>10&1023,R[f++]=56320|1023&A)}return OI(R,f)},Gb=function(a,d){var u;for((d=d||a.length)>a.length&&(d=a.length),u=d-1;u>=0&&128==(192&a[u]);)u--;return u<0||0===u?d:u+mh[a[u]]>d?u:d},kI=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},NI=Object.prototype.toString;function Ur(a){if(!(this instanceof Ur))return new Ur(a);this.options=di.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});var d=this.options;d.raw&&d.windowBits>0?d.windowBits=-d.windowBits:d.gzip&&d.windowBits>0&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kI,this.strm.avail_out=0;var u=XA.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(0!==u)throw new Error(ph[u]);if(d.header&&XA.deflateSetHeader(this.strm,d.header),d.dictionary){var f;if(f="string"==typeof d.dictionary?DI(d.dictionary):"[object ArrayBuffer]"===NI.call(d.dictionary)?new Uint8Array(d.dictionary):d.dictionary,0!==(u=XA.deflateSetDictionary(this.strm,f)))throw new Error(ph[u]);this._dict_set=!0}}function Od(a,d){var u=new Ur(d);if(u.push(a,!0),u.err)throw u.msg||ph[u.err];return u.result}Ur.prototype.push=function(a,d){var u,f,A=this.strm,S=this.options.chunkSize;if(this.ended)return!1;f=d===~~d?d:!0===d?4:0,A.input="string"==typeof a?DI(a):"[object ArrayBuffer]"===NI.call(a)?new Uint8Array(a):a,A.next_in=0,A.avail_in=A.input.length;do{if(0===A.avail_out&&(A.output=new di.Buf8(S),A.next_out=0,A.avail_out=S),1!==(u=XA.deflate(A,f))&&0!==u)return this.onEnd(u),this.ended=!0,!1;0!==A.avail_out&&(0!==A.avail_in||4!==f&&2!==f)||this.onData("string"===this.options.to?cO(di.shrinkBuf(A.output,A.next_out)):di.shrinkBuf(A.output,A.next_out))}while((A.avail_in>0||0===A.avail_out)&&1!==u);return 4===f?(u=XA.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,0===u):2!==f||(this.onEnd(0),A.avail_out=0,!0)},Ur.prototype.onData=function(a){this.chunks.push(a)},Ur.prototype.onEnd=function(a){0===a&&(this.result="string"===this.options.to?this.chunks.join(""):di.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var gh={Deflate:Ur,deflate:Od,deflateRaw:function(a,d){return(d=d||{}).raw=!0,Od(a,d)},gzip:function(a,d){return(d=d||{}).gzip=!0,Od(a,d)}},$A=function(a,d){var u,f,A,S,T,R,M,B,H,$,ce,he,ue,Se,Qe,He,We,et,Lt,Gt,jt,Tt,sn,hn,An;hn=a.input,A=(f=a.next_in)+(a.avail_in-5),An=a.output,T=(S=a.next_out)-(d-a.avail_out),R=S+(a.avail_out-257),M=(u=a.state).dmax,B=u.wsize,H=u.whave,$=u.wnext,ce=u.window,he=u.hold,ue=u.bits,Se=u.lencode,Qe=u.distcode,He=(1<<u.lenbits)-1,We=(1<<u.distbits)-1;e:do{ue<15&&(he+=hn[f++]<<ue,he+=hn[f++]<<(ue+=8),ue+=8),et=Se[he&He];t:for(;;){if(he>>>=Lt=et>>>24,ue-=Lt,0==(Lt=et>>>16&255))An[S++]=65535&et;else{if(!(16&Lt)){if(0==(64&Lt)){et=Se[(65535&et)+(he&(1<<Lt)-1)];continue t}if(32&Lt){u.mode=12;break e}a.msg="invalid literal/length code",u.mode=30;break e}Gt=65535&et,(Lt&=15)&&(ue<Lt&&(he+=hn[f++]<<ue,ue+=8),Gt+=he&(1<<Lt)-1,he>>>=Lt,ue-=Lt),ue<15&&(he+=hn[f++]<<ue,he+=hn[f++]<<(ue+=8),ue+=8),et=Qe[he&We];n:for(;;){if(he>>>=Lt=et>>>24,ue-=Lt,!(16&(Lt=et>>>16&255))){if(0==(64&Lt)){et=Qe[(65535&et)+(he&(1<<Lt)-1)];continue n}a.msg="invalid distance code",u.mode=30;break e}if(jt=65535&et,ue<(Lt&=15)&&(he+=hn[f++]<<ue,(ue+=8)<Lt&&(he+=hn[f++]<<ue,ue+=8)),(jt+=he&(1<<Lt)-1)>M){a.msg="invalid distance too far back",u.mode=30;break e}if(he>>>=Lt,ue-=Lt,jt>(Lt=S-T)){if((Lt=jt-Lt)>H&&u.sane){a.msg="invalid distance too far back",u.mode=30;break e}if(Tt=0,sn=ce,0===$){if(Tt+=B-Lt,Lt<Gt){Gt-=Lt;do{An[S++]=ce[Tt++]}while(--Lt);Tt=S-jt,sn=An}}else if($<Lt){if(Tt+=B+$-Lt,(Lt-=$)<Gt){Gt-=Lt;do{An[S++]=ce[Tt++]}while(--Lt);if(Tt=0,$<Gt){Gt-=Lt=$;do{An[S++]=ce[Tt++]}while(--Lt);Tt=S-jt,sn=An}}}else if(Tt+=$-Lt,Lt<Gt){Gt-=Lt;do{An[S++]=ce[Tt++]}while(--Lt);Tt=S-jt,sn=An}for(;Gt>2;)An[S++]=sn[Tt++],An[S++]=sn[Tt++],An[S++]=sn[Tt++],Gt-=3;Gt&&(An[S++]=sn[Tt++],Gt>1&&(An[S++]=sn[Tt++]))}else{Tt=S-jt;do{An[S++]=An[Tt++],An[S++]=An[Tt++],An[S++]=An[Tt++],Gt-=3}while(Gt>2);Gt&&(An[S++]=An[Tt++],Gt>1&&(An[S++]=An[Tt++]))}break}}break}}while(f<A&&S<R);f-=Gt=ue>>3,he&=(1<<(ue-=Gt<<3))-1,a.next_in=f,a.next_out=S,a.avail_in=f<A?A-f+5:5-(f-A),a.avail_out=S<R?R-S+257:257-(S-R),u.hold=he,u.bits=ue},PI=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ZA=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],lO=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dO=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],rl=function(a,d,u,f,A,S,T,R){var M,B,H,$,ce,he,ue,Se,Qe,He=R.bits,We=0,et=0,Lt=0,Gt=0,jt=0,Tt=0,sn=0,hn=0,An=0,ln=0,Qt=null,Bn=0,_r=new di.Buf16(16),vt=new di.Buf16(16),ut=null,Be=0;for(We=0;We<=15;We++)_r[We]=0;for(et=0;et<f;et++)_r[d[u+et]]++;for(jt=He,Gt=15;Gt>=1&&0===_r[Gt];Gt--);if(jt>Gt&&(jt=Gt),0===Gt)return A[S++]=20971520,A[S++]=20971520,R.bits=1,0;for(Lt=1;Lt<Gt&&0===_r[Lt];Lt++);for(jt<Lt&&(jt=Lt),hn=1,We=1;We<=15;We++)if(hn<<=1,(hn-=_r[We])<0)return-1;if(hn>0&&(0===a||1!==Gt))return-1;for(vt[1]=0,We=1;We<15;We++)vt[We+1]=vt[We]+_r[We];for(et=0;et<f;et++)0!==d[u+et]&&(T[vt[d[u+et]]++]=et);if(0===a?(Qt=ut=T,he=19):1===a?(Qt=PI,Bn-=257,ut=ZA,Be-=257,he=256):(Qt=lO,ut=dO,he=-1),ln=0,et=0,We=Lt,ce=S,Tt=jt,sn=0,H=-1,$=(An=1<<jt)-1,1===a&&An>852||2===a&&An>592)return 1;for(;;){ue=We-sn,T[et]<he?(Se=0,Qe=T[et]):T[et]>he?(Se=ut[Be+T[et]],Qe=Qt[Bn+T[et]]):(Se=96,Qe=0),M=1<<We-sn,Lt=B=1<<Tt;do{A[ce+(ln>>sn)+(B-=M)]=ue<<24|Se<<16|Qe|0}while(0!==B);for(M=1<<We-1;ln&M;)M>>=1;if(0!==M?(ln&=M-1,ln+=M):ln=0,et++,0==--_r[We]){if(We===Gt)break;We=d[u+T[et]]}if(We>jt&&(ln&$)!==H){for(0===sn&&(sn=jt),ce+=Lt,hn=1<<(Tt=We-sn);Tt+sn<Gt&&!((hn-=_r[Tt+sn])<=0);)Tt++,hn<<=1;if(An+=1<<Tt,1===a&&An>852||2===a&&An>592)return 1;A[H=ln&$]=jt<<24|Tt<<16|ce-S|0}}return 0!==ln&&(A[ce+ln]=We-sn<<24|64<<16|0),R.bits=jt,0};function MI(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function hO(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new di.Buf16(320),this.work=new di.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function xI(a){var d;return a&&a.state?(a.total_in=a.total_out=(d=a.state).total=0,a.msg="",d.wrap&&(a.adler=1&d.wrap),d.mode=1,d.last=0,d.havedict=0,d.dmax=32768,d.head=null,d.hold=0,d.bits=0,d.lencode=d.lendyn=new di.Buf32(852),d.distcode=d.distdyn=new di.Buf32(592),d.sane=1,d.back=-1,0):-2}function pO(a){var d;return a&&a.state?((d=a.state).wsize=0,d.whave=0,d.wnext=0,xI(a)):-2}function fO(a,d){var u,f;return a&&a.state?(f=a.state,d<0?(u=0,d=-d):(u=1+(d>>4),d<48&&(d&=15)),d&&(d<8||d>15)?-2:(null!==f.window&&f.wbits!==d&&(f.window=null),f.wrap=u,f.wbits=d,pO(a))):-2}function mO(a,d){var u,f;return a?(f=new hO,a.state=f,f.window=null,0!==(u=fO(a,d))&&(a.state=null),u):-2}var LI,X_,gO=!0;function _O(a){if(gO){var d;for(LI=new di.Buf32(512),X_=new di.Buf32(32),d=0;d<144;)a.lens[d++]=8;for(;d<256;)a.lens[d++]=9;for(;d<280;)a.lens[d++]=7;for(;d<288;)a.lens[d++]=8;for(rl(1,a.lens,0,288,LI,0,a.work,{bits:9}),d=0;d<32;)a.lens[d++]=5;rl(2,a.lens,0,32,X_,0,a.work,{bits:5}),gO=!1}a.lencode=LI,a.lenbits=9,a.distcode=X_,a.distbits=5}function ey(a,d,u,f){var A,S=a.state;return null===S.window&&(S.wsize=1<<S.wbits,S.wnext=0,S.whave=0,S.window=new di.Buf8(S.wsize)),f>=S.wsize?(di.arraySet(S.window,d,u-S.wsize,S.wsize,0),S.wnext=0,S.whave=S.wsize):((A=S.wsize-S.wnext)>f&&(A=f),di.arraySet(S.window,d,u-f,A,S.wnext),(f-=A)?(di.arraySet(S.window,d,u-f,f,0),S.wnext=f,S.whave=S.wsize):(S.wnext+=A,S.wnext===S.wsize&&(S.wnext=0),S.whave<S.wsize&&(S.whave+=A))),0}var Pf={inflateReset:pO,inflateReset2:fO,inflateResetKeep:xI,inflateInit:function(a){return mO(a,15)},inflateInit2:mO,inflate:function(a,d){var u,f,A,S,T,R,M,B,H,$,ce,he,ue,Se,Qe,He,We,et,Lt,Gt,jt,Tt,sn,hn,An=0,ln=new di.Buf8(4),Qt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;12===(u=a.state).mode&&(u.mode=13),T=a.next_out,A=a.output,S=a.next_in,f=a.input,B=u.hold,H=u.bits,$=R=a.avail_in,ce=M=a.avail_out,Tt=0;e:for(;;)switch(u.mode){case 1:if(0===u.wrap){u.mode=13;break}for(;H<16;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if(2&u.wrap&&35615===B){u.check=0,ln[0]=255&B,ln[1]=B>>>8&255,u.check=Ma(u.check,ln,2,0),B=0,H=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&B)<<8)+(B>>8))%31){a.msg="incorrect header check",u.mode=30;break}if(8!=(15&B)){a.msg="unknown compression method",u.mode=30;break}if(H-=4,jt=8+(15&(B>>>=4)),0===u.wbits)u.wbits=jt;else if(jt>u.wbits){a.msg="invalid window size",u.mode=30;break}u.dmax=1<<jt,a.adler=u.check=1,u.mode=512&B?10:12,B=0,H=0;break;case 2:for(;H<16;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if(u.flags=B,8!=(255&u.flags)){a.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){a.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=B>>8&1),512&u.flags&&(ln[0]=255&B,ln[1]=B>>>8&255,u.check=Ma(u.check,ln,2,0)),B=0,H=0,u.mode=3;case 3:for(;H<32;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}u.head&&(u.head.time=B),512&u.flags&&(ln[0]=255&B,ln[1]=B>>>8&255,ln[2]=B>>>16&255,ln[3]=B>>>24&255,u.check=Ma(u.check,ln,4,0)),B=0,H=0,u.mode=4;case 4:for(;H<16;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}u.head&&(u.head.xflags=255&B,u.head.os=B>>8),512&u.flags&&(ln[0]=255&B,ln[1]=B>>>8&255,u.check=Ma(u.check,ln,2,0)),B=0,H=0,u.mode=5;case 5:if(1024&u.flags){for(;H<16;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}u.length=B,u.head&&(u.head.extra_len=B),512&u.flags&&(ln[0]=255&B,ln[1]=B>>>8&255,u.check=Ma(u.check,ln,2,0)),B=0,H=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&((he=u.length)>R&&(he=R),he&&(u.head&&(jt=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Array(u.head.extra_len)),di.arraySet(u.head.extra,f,S,he,jt)),512&u.flags&&(u.check=Ma(u.check,f,he,S)),R-=he,S+=he,u.length-=he),u.length))break e;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(0===R)break e;he=0;do{jt=f[S+he++],u.head&&jt&&u.length<65536&&(u.head.name+=String.fromCharCode(jt))}while(jt&&he<R);if(512&u.flags&&(u.check=Ma(u.check,f,he,S)),R-=he,S+=he,jt)break e}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(0===R)break e;he=0;do{jt=f[S+he++],u.head&&jt&&u.length<65536&&(u.head.comment+=String.fromCharCode(jt))}while(jt&&he<R);if(512&u.flags&&(u.check=Ma(u.check,f,he,S)),R-=he,S+=he,jt)break e}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;H<16;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if(B!==(65535&u.check)){a.msg="header crc mismatch",u.mode=30;break}B=0,H=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),a.adler=u.check=0,u.mode=12;break;case 10:for(;H<32;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}a.adler=u.check=MI(B),B=0,H=0,u.mode=11;case 11:if(0===u.havedict)return a.next_out=T,a.avail_out=M,a.next_in=S,a.avail_in=R,u.hold=B,u.bits=H,2;a.adler=u.check=1,u.mode=12;case 12:if(5===d||6===d)break e;case 13:if(u.last){B>>>=7&H,H-=7&H,u.mode=27;break}for(;H<3;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}switch(u.last=1&B,H-=1,3&(B>>>=1)){case 0:u.mode=14;break;case 1:if(_O(u),u.mode=20,6===d){B>>>=2,H-=2;break e}break;case 2:u.mode=17;break;case 3:a.msg="invalid block type",u.mode=30}B>>>=2,H-=2;break;case 14:for(B>>>=7&H,H-=7&H;H<32;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if((65535&B)!=(B>>>16^65535)){a.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&B,B=0,H=0,u.mode=15,6===d)break e;case 15:u.mode=16;case 16:if(he=u.length){if(he>R&&(he=R),he>M&&(he=M),0===he)break e;di.arraySet(A,f,S,he,T),R-=he,S+=he,M-=he,T+=he,u.length-=he;break}u.mode=12;break;case 17:for(;H<14;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if(u.nlen=257+(31&B),H-=5,u.ndist=1+(31&(B>>>=5)),H-=5,u.ncode=4+(15&(B>>>=5)),B>>>=4,H-=4,u.nlen>286||u.ndist>30){a.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;H<3;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}u.lens[Qt[u.have++]]=7&B,B>>>=3,H-=3}for(;u.have<19;)u.lens[Qt[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,Tt=rl(0,u.lens,0,19,u.lencode,0,u.work,sn={bits:u.lenbits}),u.lenbits=sn.bits,Tt){a.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;He=(An=u.lencode[B&(1<<u.lenbits)-1])>>>16&255,We=65535&An,!((Qe=An>>>24)<=H);){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if(We<16)B>>>=Qe,H-=Qe,u.lens[u.have++]=We;else{if(16===We){for(hn=Qe+2;H<hn;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if(B>>>=Qe,H-=Qe,0===u.have){a.msg="invalid bit length repeat",u.mode=30;break}jt=u.lens[u.have-1],he=3+(3&B),B>>>=2,H-=2}else if(17===We){for(hn=Qe+3;H<hn;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}H-=Qe,jt=0,he=3+(7&(B>>>=Qe)),B>>>=3,H-=3}else{for(hn=Qe+7;H<hn;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}H-=Qe,jt=0,he=11+(127&(B>>>=Qe)),B>>>=7,H-=7}if(u.have+he>u.nlen+u.ndist){a.msg="invalid bit length repeat",u.mode=30;break}for(;he--;)u.lens[u.have++]=jt}}if(30===u.mode)break;if(0===u.lens[256]){a.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,Tt=rl(1,u.lens,0,u.nlen,u.lencode,0,u.work,sn={bits:u.lenbits}),u.lenbits=sn.bits,Tt){a.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,Tt=rl(2,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,sn={bits:u.distbits}),u.distbits=sn.bits,Tt){a.msg="invalid distances set",u.mode=30;break}if(u.mode=20,6===d)break e;case 20:u.mode=21;case 21:if(R>=6&&M>=258){a.next_out=T,a.avail_out=M,a.next_in=S,a.avail_in=R,u.hold=B,u.bits=H,$A(a,ce),T=a.next_out,A=a.output,M=a.avail_out,S=a.next_in,f=a.input,R=a.avail_in,B=u.hold,H=u.bits,12===u.mode&&(u.back=-1);break}for(u.back=0;He=(An=u.lencode[B&(1<<u.lenbits)-1])>>>16&255,We=65535&An,!((Qe=An>>>24)<=H);){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if(He&&0==(240&He)){for(et=Qe,Lt=He,Gt=We;He=(An=u.lencode[Gt+((B&(1<<et+Lt)-1)>>et)])>>>16&255,We=65535&An,!(et+(Qe=An>>>24)<=H);){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}B>>>=et,H-=et,u.back+=et}if(B>>>=Qe,H-=Qe,u.back+=Qe,u.length=We,0===He){u.mode=26;break}if(32&He){u.back=-1,u.mode=12;break}if(64&He){a.msg="invalid literal/length code",u.mode=30;break}u.extra=15&He,u.mode=22;case 22:if(u.extra){for(hn=u.extra;H<hn;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}u.length+=B&(1<<u.extra)-1,B>>>=u.extra,H-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;He=(An=u.distcode[B&(1<<u.distbits)-1])>>>16&255,We=65535&An,!((Qe=An>>>24)<=H);){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if(0==(240&He)){for(et=Qe,Lt=He,Gt=We;He=(An=u.distcode[Gt+((B&(1<<et+Lt)-1)>>et)])>>>16&255,We=65535&An,!(et+(Qe=An>>>24)<=H);){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}B>>>=et,H-=et,u.back+=et}if(B>>>=Qe,H-=Qe,u.back+=Qe,64&He){a.msg="invalid distance code",u.mode=30;break}u.offset=We,u.extra=15&He,u.mode=24;case 24:if(u.extra){for(hn=u.extra;H<hn;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}u.offset+=B&(1<<u.extra)-1,B>>>=u.extra,H-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){a.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(0===M)break e;if(u.offset>(he=ce-M)){if((he=u.offset-he)>u.whave&&u.sane){a.msg="invalid distance too far back",u.mode=30;break}ue=he>u.wnext?u.wsize-(he-=u.wnext):u.wnext-he,he>u.length&&(he=u.length),Se=u.window}else Se=A,ue=T-u.offset,he=u.length;he>M&&(he=M),M-=he,u.length-=he;do{A[T++]=Se[ue++]}while(--he);0===u.length&&(u.mode=21);break;case 26:if(0===M)break e;A[T++]=u.length,M--,u.mode=21;break;case 27:if(u.wrap){for(;H<32;){if(0===R)break e;R--,B|=f[S++]<<H,H+=8}if(a.total_out+=ce-=M,u.total+=ce,ce&&(a.adler=u.check=u.flags?Ma(u.check,A,ce,T-ce):q_(u.check,A,ce,T-ce)),ce=M,(u.flags?B:MI(B))!==u.check){a.msg="incorrect data check",u.mode=30;break}B=0,H=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;H<32;){if(0===R)break e;R--,B+=f[S++]<<H,H+=8}if(B!==(4294967295&u.total)){a.msg="incorrect length check",u.mode=30;break}B=0,H=0}u.mode=29;case 29:Tt=1;break e;case 30:Tt=-3;break e;case 31:return-4;default:return-2}return a.next_out=T,a.avail_out=M,a.next_in=S,a.avail_in=R,u.hold=B,u.bits=H,(u.wsize||ce!==a.avail_out&&u.mode<30&&(u.mode<27||4!==d))&&ey(a,a.output,a.next_out,ce-a.avail_out),ce-=a.avail_out,a.total_in+=$-=a.avail_in,a.total_out+=ce,u.total+=ce,u.wrap&&ce&&(a.adler=u.check=u.flags?Ma(u.check,A,ce,a.next_out-ce):q_(u.check,A,ce,a.next_out-ce)),a.data_type=u.bits+(u.last?64:0)+(12===u.mode?128:0)+(20===u.mode||15===u.mode?256:0),(0===$&&0===ce||4===d)&&0===Tt&&(Tt=-5),Tt},inflateEnd:function(a){if(!a||!a.state)return-2;var d=a.state;return d.window&&(d.window=null),a.state=null,0},inflateGetHeader:function(a,d){var u;return a&&a.state?0==(2&(u=a.state).wrap)?-2:(u.head=d,d.done=!1,0):-2},inflateSetDictionary:function(a,d){var u,f=d.length;return a&&a.state?0!==(u=a.state).wrap&&11!==u.mode?-2:11===u.mode&&q_(1,d,f,0)!==u.check?-3:ey(a,d,f,f)?(u.mode=31,-4):(u.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},Rs={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},oP=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},vO=Object.prototype.toString;function hg(a){if(!(this instanceof hg))return new hg(a);this.options=di.assign({chunkSize:16384,windowBits:0,to:""},a||{});var d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,0===d.windowBits&&(d.windowBits=-15)),!(d.windowBits>=0&&d.windowBits<16)||a&&a.windowBits||(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&0==(15&d.windowBits)&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kI,this.strm.avail_out=0;var u=Pf.inflateInit2(this.strm,d.windowBits);if(u!==Rs.Z_OK)throw new Error(ph[u]);if(this.header=new oP,Pf.inflateGetHeader(this.strm,this.header),d.dictionary&&("string"==typeof d.dictionary?d.dictionary=DI(d.dictionary):"[object ArrayBuffer]"===vO.call(d.dictionary)&&(d.dictionary=new Uint8Array(d.dictionary)),d.raw&&(u=Pf.inflateSetDictionary(this.strm,d.dictionary))!==Rs.Z_OK))throw new Error(ph[u])}function BI(a,d){var u=new hg(d);if(u.push(a,!0),u.err)throw u.msg||ph[u.err];return u.result}hg.prototype.push=function(a,d){var u,f,A,S,T,R=this.strm,M=this.options.chunkSize,B=this.options.dictionary,H=!1;if(this.ended)return!1;f=d===~~d?d:!0===d?Rs.Z_FINISH:Rs.Z_NO_FLUSH,R.input="string"==typeof a?function($){for(var ce=new di.Buf8($.length),he=0,ue=ce.length;he<ue;he++)ce[he]=$.charCodeAt(he);return ce}(a):"[object ArrayBuffer]"===vO.call(a)?new Uint8Array(a):a,R.next_in=0,R.avail_in=R.input.length;do{if(0===R.avail_out&&(R.output=new di.Buf8(M),R.next_out=0,R.avail_out=M),(u=Pf.inflate(R,Rs.Z_NO_FLUSH))===Rs.Z_NEED_DICT&&B&&(u=Pf.inflateSetDictionary(this.strm,B)),u===Rs.Z_BUF_ERROR&&!0===H&&(u=Rs.Z_OK,H=!1),u!==Rs.Z_STREAM_END&&u!==Rs.Z_OK)return this.onEnd(u),this.ended=!0,!1;R.next_out&&(0!==R.avail_out&&u!==Rs.Z_STREAM_END&&(0!==R.avail_in||f!==Rs.Z_FINISH&&f!==Rs.Z_SYNC_FLUSH)||("string"===this.options.to?(A=Gb(R.output,R.next_out),S=R.next_out-A,T=uO(R.output,A),R.next_out=S,R.avail_out=M-S,S&&di.arraySet(R.output,R.output,A,S,0),this.onData(T)):this.onData(di.shrinkBuf(R.output,R.next_out)))),0===R.avail_in&&0===R.avail_out&&(H=!0)}while((R.avail_in>0||0===R.avail_out)&&u!==Rs.Z_STREAM_END);return u===Rs.Z_STREAM_END&&(f=Rs.Z_FINISH),f===Rs.Z_FINISH?(u=Pf.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Rs.Z_OK):f!==Rs.Z_SYNC_FLUSH||(this.onEnd(Rs.Z_OK),R.avail_out=0,!0)},hg.prototype.onData=function(a){this.chunks.push(a)},hg.prototype.onEnd=function(a){a===Rs.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):di.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var ty={};(0,di.assign)(ty,gh,{Inflate:hg,inflate:BI,inflateRaw:function(a,d){return(d=d||{}).raw=!0,BI(a,d)},ungzip:BI},Rs);var AO=ty;const{WebclientBreakoutRoomAttendeeStatus:Mf,WebclientBreakoutRoomCommand:Wb}=ds;function _h(a,d){let u=0;for(;u<a.length;u++){const f=a[u],{attendeeGuidList:A}=f;if(null!=A&&A.includes(d))break}return u<a.length?a[u]:void 0}function Ap(){cr.remove(Mf),cr.remove(Wb)}function Kb(){return ko.createAgent().leaveBO(1),Et("RECONNECTING_MEETING",{reason:aa.BackToMainSession}),Ap(),[gf(lr.Leaving),ia()]}function pg(a,d){return Et("RECONNECTING_MEETING",{reason:aa.JoinBreakoutRoom,roomName:a}),d===lr.InRoom&&ko.createAgent().leaveBO(1),[gf(lr.Joining),ia()]}function fg(a){return Et("RECONNECTING_MEETING",{reason:aa.MoveToBreakoutRoom,roomName:a}),ko.createAgent().leaveBO(1),[gf(lr.Joining),ia()]}function xf(a){const u=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?lr.InRoom:lr.Invited;return cr.set(Mf,JSON.stringify({status:u,boId:a.boId}),ji.SessionStorage),b_({status:u,boId:a.boId,name:a.name,boStatus:a.boStatus})}function $_(a){const{breakoutRoom:{isUserRoleUpdated:d,currentRoom:{boConfId:u}}}=a.value,f=ui(a.value);return f&&(!u||u&&d)?Pn(f.isHost):(u?Gs("BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",1):Gs("ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",2).pipe(function(A){return A.lift(new UB(1))})).pipe(po(es),Hn(a),Ne(A=>{let[,S]=A;return ui(S).isHost}))}function Z_(a){return Fv({boIdList:Gs("BREAKOUT_ROOM_ADD_TOKEN").pipe(jB((d,u)=>[...d,u],[]),ii(a))}).pipe(xu(1e4))}const il=ko.createAgent(),yp=["userRole","bCoHost","bCCEditor","bHold"];var aP=Object.freeze({__proto__:null,addRoomEpic:a=>Mn(a,4174).pipe(dr(d=>{Et("BREAKOUT_ROOM_ADD_TOKEN",d.payload.body.bid)}),ai(mt)),handleBoAttributeIndicationEpic:(a,d)=>cd(a,7950).pipe(Hn(d),Ho(u=>{let[f,A]=u;const{payload:{body:{proto:S}}}=f,{breakoutRoom:{isHugeBO:T,currentRoom:{status:R,boId:M}},meeting:{userGUID:B}}=A;let H=S;T&&(H=AO.ungzip(Tl(S),{to:"string"}));const ce=JSON.parse(Hh(H)),he=[];let ue;const{ControlStatus:Se,NameIndex:Qe,IsAutoJoinEnabled:He,IsBackToMainSessionEnabled:We,IsTimerEnabled:et,TimerDuration:Lt,IsTimerAutoEndEnabled:Gt,WaitSeconds:jt,StartTimeOnMMR:Tt,ItemList:sn}=ce,hn={isAutoJoinRoom:He,isBackToMainSessionEnabled:We,isTimerEnabled:et,timerDuration:Lt,isTimerAutoEnabled:Gt,waitSeconds:jt};he.push(yA(hn)),he.push(tb(Tt)),he.push(lC(Qe)),he.push(nb(Se));const An=sn&&sn.map(ln=>({boId:ln.BID,name:ln.MeetingTitle,boStatus:ln.Status,hostId:ln.HostID,attendeeGuidList:ln.ParticipantList||[]}))||[];switch(he.push(Ad(An)),Et("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",{controlStatus:Se,roomList:An}),Se){case Nr.InProgress:if(R!==lr.InRoom&&R!==lr.Joining){const ln=function(Qt,Bn){const{meeting:{isHost:_r,userGUID:vt}}=Bn.value,ut=cr.get(Mf),Be=[];if(ut){const{status:$e,boId:St}=JSON.parse(ut);if($e===lr.Invited)if(_r)Ap();else{const lt=_h(Qt,vt);lt&&(Be.push(xf(lt)),Et("BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",{roomId:lt.boId,name:lt.name}))}else if($e===lr.InRoom){let lt;if(lt=_r?Qt.find(Ut=>Ut.boId===St):_h(Qt,vt),lt){Be.push(xf(lt));const Ut=lt.boId;I_(Bn).subscribe(()=>{ko.createAgent().joinBO(Ut)})}Ap()}}return Be}(An,d);if(0===ln.length){const Qt=_h(An,B);Qt&&he.push(xf(Qt))}else he.push(...ln)}else if(R===lr.InRoom&&f.type==="".concat(or)){const ln=_h(An,B);ln&&$_(d).subscribe(Qt=>{M===ln.boId||Qt||il.joinBO(ln.boId)})}hn.isTimerEnabled&&hn.timerDuration>0&&(Qt=hn.timerDuration,Bn=Tt,ue=$_(ln=d).pipe(Hn(ln),Ho(_r=>{let[vt,ut]=_r;const{breakoutRoom:{currentRoom:{status:Be},meetingElapsedTime:$e},meeting:{joinMeetingTimeStamp:St}}=ut,lt=St-1e3*$e+1e3*Bn+1e3*Qt;if(performance.now()<lt){if(vt)return zg(1e3).pipe(Ne(()=>Math.floor((lt-performance.now())/1e3)),Hn(ln),Jg(Ut=>{let[an,Gn]=Ut;const{breakoutRoom:{controlStatus:vr,currentRoom:{status:Hr}},socket:{zoomSocketStatus:nc},meeting:{isHost:Ih}}=Gn;return an>=0&&Ih&&vr===Nr.InProgress&&(Hr===lr.InRoom||Hr===lr.MainSession||Hr===lr.Initial)&&nc===mi.Connected}),dr(Ut=>{let[an]=Ut;Et("BREAKOUT_ROOM_ROOM_COUTDOWN",{countdown:an})}),Un(Ut=>{let[an]=Ut;return 0===an}),dr(Ut=>{let[,an]=Ut;const{breakoutRoom:{options:Gn}}=an;Gn.isTimerAutoEnabled?ko.createAgent().stopBO(Nr.Closing):Et("BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP")}),ai(mt));if(Be===lr.InRoom)return zg(1e3).pipe(Ne(()=>Math.floor((lt-performance.now())/1e3)),Hn(ln),Jg(Ut=>{let[an,Gn]=Ut;const{breakoutRoom:{currentRoom:{status:vr}},meeting:{isHost:Hr},socket:{zoomSocketStatus:nc}}=Gn;return an>=0&&vr===lr.InRoom&&!Hr&&nc===mi.Connected}),dr(Ut=>{let[an]=Ut;Et("BREAKOUT_ROOM_ROOM_COUTDOWN",{countdown:an})}),ai(mt))}return mt})));break;case Nr.Closing:ue=$_(d).pipe(Un(ln=>ln),nr(()=>{const ln=[],{breakoutRoom:{closingRoomTime:Qt,currentRoom:{status:Bn}},participants:{attendeesList:_r}}=A;let vt=hn.waitSeconds;if(0!==Qt&&hn.waitSeconds>0){const ut=Math.floor((performance.now()-Qt)/1e3);vt=Math.max(hn.waitSeconds-ut,0)}if(0===vt)return il.stopBO(Nr.Closed),mt;{if(Bn!==lr.InRoom&&_r.length>1&&_r.every(Be=>!Be.bid))return il.stopBO(Nr.Closed),mt;Qt||ln.push(hC(performance.now()));const ut=performance.now()+1e3*vt;return Zs(Yn(ln),zg(1e3).pipe(Ne(()=>Math.floor((ut-performance.now())/1e3)),Hn(d),Jg(Be=>{let[$e,St]=Be;const{breakoutRoom:{controlStatus:lt},meeting:{isHost:Ut},socket:{zoomSocketStatus:an}}=St;return $e>=0&&lt===Nr.Closing&&an===mi.Connected&&Ut}),dr(Be=>{let[$e]=Be;$e>=0&&Et("BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",{countdown:$e})}),Un(Be=>{let[$e]=Be;return 0===$e}),dr(()=>{il.stopBO(Nr.Closed)}),ai(mt)))}}));break;case Nr.Closed:he.push(hC(0)),R===lr.Leaving?he.push(gf(lr.MainSession)):R===lr.Invited?he.push(gf(lr.Initial)):R!==lr.InRoom&&R!==lr.Joining||he.push(...Kb()),Ap()}var ln,Qt,Bn;return ue?Zs(Yn(he),ue):Yn(he)})),handleBoJoinResponseEpic:(a,d)=>cd(a,4194).pipe(Hn(d),Ho(u=>{let[f,A]=u;const{payload:{body:{bid:S,botoken:T,confID:R}}}=f,{meeting:{isHost:M},breakoutRoom:{rooms:B,currentRoom:{status:H}}}=A,$=[],ce=B.find(he=>he.boId===S);return ce&&($.push(xf(ce,M)),$.push(Zw(R)),$.push(dC(T)),M||H!==lr.InRoom?$.push(...pg(ce.name,H)):$.push(...fg(ce.name))),Et("BREAKOUT_ROOM_JOIN_BO_RESPONSE",{boId:S}),Yn($)})),handleBoCommandIndicationEpic:(a,d)=>a.pipe(Vi("".concat(Is),"".concat(or)),Un(u=>7949===u.payload.evt),Hn(d),nr(u=>{let[f,A]=u;const{payload:{body:S}}=f,{meeting:{userGUID:T},breakoutRoom:{rooms:R,options:{isAutoJoinRoom:M},currentRoom:{status:B}}}=A,{commandType:H}=S,$=[];let ce;switch(H){case Mm.Join:{const{targetBID:ue,botoken:Se,confID:Qe}=S,He=_h(R,T);He&&He.boId===ue&&($.push(Zw(Qe)),$.push(dC(Se)),M?$.push(...pg(He.name)):(cr.set(ds.WebclientBreakoutRoomCommand,H,ji.SessionStorage),Et("BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",{roomId:ue,name:He.name})));break}case Mm.Switch:{const{targetBID:ue,botoken:Se,confID:Qe}=S,He=_h(R,T);He&&He.boId===ue&&($.push(b_({boId:He.boId,boToken:Se,boConfId:Qe,name:He.name})),B===lr.Invited?(cr.set(ds.WebclientBreakoutRoomCommand,H,ji.SessionStorage),M?$.push(...pg(He.name)):Et("BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",{roomId:ue,name:He.name})):$.push(...fg(He.name)));break}case Mm.Leave:{const{waitTime:ue}=S;if((he=B)!==lr.InRoom&&he!==lr.Joining&&he!==lr.Leaving)$.push(b_({boId:"",boToken:"",boConfId:"",status:lr.Initial}));else{const Se=Number(ue);if(Se>0){const Qe=performance.now()+1e3*Se;ce=zg(1e3).pipe(Ne(()=>Math.floor((Qe-performance.now())/1e3)),Hn(d),Jg(He=>{let[We,et]=He;const{breakoutRoom:{controlStatus:Lt,currentRoom:{status:Gt}},meeting:{isHost:jt},socket:{zoomSocketStatus:Tt}}=et;return We>=0&&Tt===mi.Connected&&Lt===Nr.Closing&&Gt===lr.InRoom&&!jt}),dr(He=>{let[We]=He;We>=0&&Et("BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",{countdown:We})}),ai(mt))}else $.push(...Kb());Ap()}break}case Mm.Broadcast:{const{textContent:ue}=S;if(ue){const{meeting:{encType:Se},participants:{attendeesList:Qe},breakoutRoom:{mainSessionAttendeeList:He}}=A;let We="";if(Se===bm.AES_GCM){const et=Qe.concat(He).find(Lt=>G0(Lt.userRole));et&&(We=et.zoomID)}ce=Yn(mc.beginDecrypt({decryptedText:ue,type:gu.BO_BROADCAST,zoomId:We}).then(et=>{let{message:Lt}=et;return Et("BREAKOUT_ROOM_BROADCAST_MESSAGE",{message:Lt}),pC(Lt)}))}break}case Mm.HelpReq:{const{requestID:ue}=S,{breakoutRoom:{mainSessionAttendeeList:Se,rooms:Qe,currentRoom:{boId:He},hostReplyToQuestionerType:We,hostReplyToRequestId:et},participants:{attendeesList:Lt}}=A;if(ue){if(B===lr.InRoom){const Gt=Se.find(jt=>jt.userId===ue);if(Gt&&Gt.bid===He){il.askForHelpResultBO(ue,W.AskHostHelpResponse.AlreadyInRoom);break}}if(We===W.AskHostHelpResponse.Received&&et!==ue)il.askForHelpResultBO(ue,W.AskHostHelpResponse.Busy);else{il.askForHelpResultBO(ue,W.AskHostHelpResponse.Received),$.push(ws(W.AskHostHelpResponse.Received),rb(ue));const Gt=(B===lr.InRoom?Se:Lt).find(jt=>jt.userId===ue);if(Gt){const jt=Gt.bid,Tt=Qe.find(sn=>sn.boId===jt);Tt&&Et("BREAKOUT_ROOM_ASK_HELP_REQUEST",{userId:ue,displayName:Gt.displayName,roomName:Tt.name,roomId:Tt.boId})}}}break}case Mm.HelpRes:{const{helpResult:ue}=S;Et("BREAKOUT_ROOM_ASK_HELP_RESPONSE",{result:Number(ue)});break}}var he;return ce?Zs(Yn($),ce):Yn($)})),handleMainSessionJoinResponseEpic:(a,d)=>o_(a,4098).pipe(Hn(d),Ho(u=>{let[f,A]=u;const{payload:{body:{res:S,elapsed:T}}}=f,R=[];return S===Bo.CONF_FAIL_MEETING_HAS_CLOSED||S===Bo.CONF_FAIL_HAS_BEEN_REMOVED?(Ap(),R.push(...IA(A,!1))):S===Bo.CONF_SUCCESS&&(R.push(Fm(T)),R.push(gf(lr.InRoom)),cr.set(ds.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:lr.InRoom,boId:A.breakoutRoom.currentRoom.boId}),ji.SessionStorage)),Yn(R)})),handleMainSessionRosterUpdateResponse:(a,d)=>o_(a,Ts).pipe(Ne(u=>HC(u.payload.body)),Hn(d),nr(u=>{let[f,A]=u;const S=[fC(f)],{participants:{attendeesList:T},breakoutRoom:{mainSessionAttendeeList:R,isUserRoleUpdated:M},meeting:{userId:B}}=A;let H=[];return["add","update"].forEach($=>f[$]&&H.push(...f[$])),H=H.filter($=>yp.some(ce=>void 0!==$[ce])).map($=>{const ce=R.find(he=>he.userId===$.userId);if(ce){const he=T.find(ue=>ue.zoomID===ce.zoomID);if(he)return void 0===$.userRole||M||he.userId!==B||(S.push(yd(!0)),Et("BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",$)),void 0!==$.bCCEditor&&S.push(AA({editorId:he.userId,isEditor:!!$.bCCEditor,editorZoomId:he.zoomID})),delete $.bRaiseHand,delete $.bCapsPinMultiVideo,mn(mn({},$),{},{userId:he.userId})}return null}).filter($=>!!$),H.length>0&&(Et("UPDATE_USER_PARTICIPANT_ATTRIBUTE",H),S.push(Fn({update:H}))),Et("BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE"),Yn(S)})),handleMainSessionMeetingAttributeEpic:a=>o_(a,gc).pipe(Un(d=>{const{payload:{body:u}}=d;return void 0!==u?.bAllowAttendeeRename||void 0!==u?.chatPriviledge||void 0!==u?.lockShare}),Ne(d=>{const{payload:{body:u}}=d;return void 0!==u.bAllowAttendeeRename?Gh(d.payload.body):void 0!==u.chatPriviledge?_A(u.chatPriviledge):void 0!==u.lockShare?eC(u.lockShare):void 0})),handleClosingRoomAttendeeUpdateEpic:(a,d)=>Mn(a,Ts).pipe(Hn(d),Un(u=>{let[,f]=u;const{meeting:{isHost:A},breakoutRoom:{controlStatus:S,currentRoom:{status:T}}}=f;return A&&S===Nr.Closing&&T!==lr.InRoom}),po(es),dr(()=>{const{participants:{attendeesList:u}}=d.value;u.every(f=>!f.bid)&&u.length>1&&il.stopBO(Nr.Closed)}),ai(mt)),handlePreAssignedRoomRespEpic:(a,d)=>Mn(a,4214).pipe(Hn(d),Ho(u=>{let[f,A]=u;const{payload:{body:{proto:S}}}=f,{breakoutRoom:{rooms:T,isHugeBO:R}}=A;try{const M=JSON.parse(Hh(S)),B=[];if(M&&M.PreAssignBoList&&Array.isArray(M.PreAssignBoList)){const H=M.PreAssignBoList.map(ce=>({name:ce.BoName,emails:ce.email}));if(B.push(ib(H)),T.length+H.length<(R?100:50)){const ce=H.map(he=>he.name);return il.batchCreateBOToken(ce),Zs(Yn(B),Z_(ce.length).pipe(Hn(d),nr(he=>{let[{boIdList:ue},Se]=he;const Qe=Ks(Se),He=H.map((et,Lt)=>{const{emails:Gt,name:jt}=et;let Tt=[];return Gt&&Array.isArray(Gt)&&(Tt=Gt.map(sn=>Qe.filter(hn=>hn.userEmail===sn).map(hn=>hn.userGUID)).reduce((sn,hn)=>[...sn,...hn],[])),{boId:ue[Lt],name:jt,attendeeGuidList:Tt}}),We=He.map((et,Lt)=>({roomId:et.boId,name:et.name,emails:H[Lt].emails}));return Et("BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",{rooms:We}),Yn([Ad(He),ib(We)])})))}return Yn(B)}}catch{console.error("pre assign proto is not valid")}return mt})),handlePreAssignedUserJoinMeetingEpic:(a,d)=>cd(a,Ts).pipe(Hn(d),Un(u=>{let[f,A]=u;const{meeting:{isHost:S,meetingStatus:T,meetingOptions:R},breakoutRoom:{controlStatus:M}}=A,{payload:{body:B}}=f;return T===vs.Joined&&R?.isAllowBreakoutRoomPreAssign&&S&&(M===Nr.NotStarted||M===Nr.InProgress)&&Array.isArray(B.add)}),nr(u=>{let[f,A]=u;const{breakoutRoom:{controlStatus:S,rooms:T,preAssignedRooms:R,currentRoom:{status:M}},participants:{failoverAttendeesList:B}}=A,H=R?.filter(he=>T.findIndex(ue=>ue.boId===he.roomId)>-1),{payload:{body:{add:$}}}=f,ce=[];return H.length>0&&$.filter(he=>he.userEmail&&he.userGUID).filter(he=>-1===B.findIndex(ue=>ue.zoomID===he.zoomID)).forEach(he=>{if(!_h(T,he.userGUID))for(let ue=0;ue<H?.length;ue++){const Se=H[ue];if(Se.emails.includes(he.userEmail)){if(S===Nr.NotStarted){const Qe=Mt(T,He=>{He.find(et=>et.boId===Se.roomId)?.attendeeGuidList.push(he.userGUID)});ce.push(Ad(Qe))}else S===Nr.InProgress&&(M===lr.InRoom&&f.type==="".concat(or)?il.assignToBO(he.id,String(Se.roomId)):M!==lr.Initial&&M!==lr.MainSession||il.assignToBO(he.id,String(Se.roomId)));break}}}),Yn(ce)})),handleInconsistentPropertiesInBOUserEpic:(a,d)=>Mn(a,Ts).pipe(Un(u=>{const{breakoutRoom:{mainSessionAttendeeList:f}}=d.value,{payload:{body:A}}=u;return f.length>0&&(void 0!==A.add||void 0!==A.update)}),po(Ss),Ne(u=>HC(u.payload.body)),nr(u=>{const{breakoutRoom:{mainSessionAttendeeList:f,isUserRoleUpdated:A},participants:{attendeesList:S}}=d.value;let T=[];const R=[];["add","update"].forEach(H=>u[H]&&T.push(...u[H]));const M=[...yp,"isHost"];T=T.filter(H=>M.some($=>void 0!==H[$]));const B=T.filter(H=>void 0!==H.zoomID);return T=T.map(H=>{var $,ce,he,ue;const Se=null!==($=null!==(ce=H.zoomID)&&void 0!==ce?ce:null===(he=B.find(Qe=>Qe.userId===H.userId))||void 0===he?void 0:he.zoomID)&&void 0!==$?$:null===(ue=S.find(Qe=>Qe.userId===H.userId))||void 0===ue?void 0:ue.zoomID;if(Se){const Qe=f.find(He=>He.zoomID===Se);if(Qe)return A||(R.push(yd(!0)),Et("BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",Qe)),Object.keys(H).filter(He=>Object.prototype.hasOwnProperty.call(H,He)).filter(He=>M.includes(He)).reduce((He,We)=>(void 0===Qe[We]&&"bCoHost"!==We||Object.assign(He,{[We]:"boolean"==typeof H[We]?!!Qe[We]:Qe[We]}),He),{userId:H.userId})}}).filter(Boolean),T.length>0&&(Et("UPDATE_USER_PARTICIPANT_ATTRIBUTE",T),R.push(Fn({update:T}))),Yn(R)}))});const yO=ko.createAgent();var Lf=Object.freeze({__proto__:null,handleMainSessionReceivingSharingEpic:(a,d)=>o_(a,Ts).pipe(Un(u=>{var f;const{payload:{body:A}}=u;return null==A||null===(f=A.update)||void 0===f?void 0:f.some(S=>void 0!==S.bShareToBORooms||void 0!==S.bShareOn)}),Hn(d),Ne(u=>{let[f,A]=u;const{payload:{body:{update:S}}}=f,{breakoutRoom:{mainSessionAttendeeList:T}}=A,R=S.filter(H=>H.bShareOn&&H.bShareToBORooms),M=S.filter(H=>!H.bShareOn||!H.bShareToBORooms),B=T.filter(H=>H.sharerOn&&H.bShareToBORooms);return R.length>0&&R.forEach(H=>{-1===B.findIndex($=>$.userId===H.id)&&Et("SHARE_NEW_USER_ADD",mn(mn({},H),{},{isFromMainSession:!0}))}),M.length>0&&M.forEach(H=>{Et("SHARE_USER_REMOVE",mn(mn({},H),{},{isFromMainSession:!0}))}),S.map(H=>{if(H.bShareOn&&H.bShareToBORooms){if(0===T.filter($=>$.sharerOn&&$.bShareToBORooms&&$.userId!==H.id).length)return{activeNodeID:H.id,bStatus:1,ssrc:H.shareSsrc};{const $=T.find(ce=>ce.userId===H.id);if(null!=$&&$.isHost)return{activeNodeID:H.id,bStatus:1,ssrc:H.shareSsrc}}}else if(!H.bShareOn||!H.bShareToBORooms){const $=T.filter(ce=>ce.bShareToBORooms&&ce.sharerOn);if(1===$.length&&$[0].userId===H.id)return{activeNodeID:H.id,bStatus:0,ssrc:0};{const ce=$.filter(ue=>ue.userId!==H.id),he=ce.find(ue=>ue.isHost);if(he)return{activeNodeID:he.userId,bStatus:1,ssrc:he.shareSsrc};{const ue=ce[0];if(ue)return{activeNodeID:ue.userId,bStatus:1,ssrc:ue.shareSsrc}}}}}).filter(Boolean)}),nr(u=>{const{share:{status:f},meeting:{userId:A}}=d.value,S=_o.getInstance(),T=[];return u.map(R=>{const{activeNodeID:M,bStatus:B,ssrc:H}=R,$=1===B;T.push(Bw($)),$&&f!==W.ShareStatus.End&&(yO.stopSharing(A),S.stopDesktopSharing(),T.push(Dl(W.ShareStatus.End)),Et("SHARE_PASSIVE_BO_STOP"));let ce={activeNodeID:M,bStatus:B,ssrc:H,fromMainSession:!0};if(!$){const{participants:{attendeesList:he}}=d.value,ue=he.filter(Se=>Se.sharerOn);if(ue.length>0){const Se=ue[0];ce={activeNodeID:Se.userId,bStatus:1,ssrc:Se.shareSsrc||0}}}T.push(Is({evt:20225,body:ce}))}),Yn(T)})),handleMainSessionCreateExtraChannelEpic:(a,d)=>o_(a,4098).pipe(Ho(u=>{const{payload:{body:{userID:f,confID:A}}}=u;return Zs(...["sharing","audio"].map(S=>{return M=d,B=f,H=A,o_(a,"audio"===(T=S)?nA:M0).pipe(ii(1),dr($=>{const{payload:{body:{encryptKey:ce,additionalType:he}}}=$,{media:{sharingDecodeStatus:ue,audioDecodeStatus:Se},meeting:{svcUrl:Qe,meetingNumber:He,conId:We,zoomId:et,meetingId:Lt}}=M.value;Yc(T,"success","audio"===T?Se:ue).subscribe(Gt=>{let[,jt]=Gt;const Tt=_o.getInstance();if(jt){const sn="wss://".concat(Qe,"/wc/media/").concat(He,"?type=").concat("audio"===T?"ma":"ms","&cid=").concat(We,"&mode=1");Tt.createMainSessionChannel(T,sn),Tt.updateMediaParams({iVType:"audio"===T?Fo.AUDIO_DECODE:Fo.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:B,sn:Tl(et),confId:H,encryptType:he,encryptKey:Tl(ce),meetingId:Lt,meetingNumber:He}});const{breakoutRoom:{mainSessionAttendeeList:hn}}=M.value;if(hn?.length>0){const An=hn.map(ln=>({userid:ln.userId,sn:ln.zoomID&&Tl(ln.zoomID)}));Tt.updateUserMediaSN({added:An,isFromMainSession:!0,iVType:"audio"===T?Fo.AUDIO_DECODE:Fo.SHARING_DECODE})}}})}),ai(mt));var T,M,B,H}))}))});const cP=Ws([a=>{let{breakoutRoom:{controlStatus:d}}=a;return d},a=>{let{breakoutRoom:{currentRoom:{status:d}}}=a;return d},a=>{let{breakoutRoom:{currentRoom:{boId:d}}}=a;return d}],(a,d,u)=>!(a!==Nr.InProgress&&a!==Nr.Closing||d!==lr.InRoom&&d!==lr.TimeUp||!u)),tc=Ws([a=>{let{breakoutRoom:{rooms:d}}=a;return d},vc,a=>{let{meeting:{zoomId:d}}=a;return d},a=>{let{breakoutRoom:{mainSessionAttendeeList:d}}=a;return d},cP,a=>{let{breakoutRoom:{isHugeBO:d}}=a;return d}],(a,d,u,f,A,S)=>{const T=a.reduce((R,M)=>{const{attendeeGuidList:B}=M;return R.concat(B)},[]);return(A?f:d).filter(R=>{return!(R.bHold||R.isHost||R.zoomID===u||R.bid||T.includes(R.userGUID)||S&&(M=R.caps,4!=(4&M)));var M})});var Wi;const nu=ko.createAgent();let EO=(tr((Wi=class extends $c{createRooms(a,d){const u=this[Sr](),f=this[Na],{breakoutRoom:{isHugeBO:A,sequenceId:S,rooms:T,controlStatus:R,isEnableBreakoutRoom:M}}=u;if(!M)return Promise.reject({type:ur,reason:"Breakout room feature is not enabled."});if(R===Nr.InProgress||R===Nr.Closing)return Promise.resolve({type:ur,reason:"breakout room has started!"});let B;return B="string"==typeof a?[a]:"number"==typeof a?Array.from({length:a}).map(($,ce)=>"".concat("Subsession"," ").concat(ce+S)):a,B.length<1||T.length+B.length>(A?100:50)?Promise.reject({type:Jr,reason:"exceed maximum size"}):(nu.batchCreateBOToken(B),new Promise(($,ce)=>{Z_(B.length).subscribe(he=>{let{boIdList:ue}=he,Se=ue.map((He,We)=>({boId:He,name:B[We]}));if(d===af.Automatically){const He=tc(u),We=Se.length,et=He.length;Se=Se.map((Lt,Gt)=>{const jt=[];let Tt=Gt;for(;Tt<et;)jt.push(He[Tt]),Tt+=We;return mn(mn({},Lt),{},{attendeeList:jt})})}const Qe=Se.map(He=>{let{boId:We,name:et,attendeeList:Lt}=He;return{boId:We,name:et,attendeeGuidList:Lt&&Lt.map(Gt=>Gt.userGUID)}});if(f(ZE(Qe)),f(eb(d)),f(lC(S+Se.length)),d===af.Automatically){const He=Se.map(We=>({roomId:We.boId,name:We.name,attendeeList:We.attendeeList.map(et=>({userId:et.userId,avatar:et.avatar,displayName:et.displayName}))}));$(He)}else $(Se.map(He=>({roomId:He.boId,name:He.name,attendeeList:[]})))},()=>{ce({type:"INTERNAL_ERROR"})})}))}openRooms(a,d){const u=this[Sr](),f={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},{breakoutRoom:{controlStatus:A,rooms:S,sequenceId:T,isHugeBO:R}}=u;if(A===Nr.InProgress||A===Nr.Closing)return Promise.resolve({type:ur,reason:"breakout room has started!"});if(a.some(ue=>-1===S.findIndex(Se=>Se.boId===ue.roomId)))return Promise.reject({type:Jr,reason:"roomId is wrong"});const M=Ks(u);if(a.reduce((ue,Se)=>ue.concat(Se.attendeeList),[]).some(ue=>-1===M.findIndex(Se=>Se.userId===ue.userId)))return Promise.reject({type:Jr,reason:"bad user"});const B=a.map(ue=>{const{attendeeList:Se}=ue,Qe=Se.map(He=>M.find(et=>et.userId===He.userId)?.userGUID);return{BID:ue.roomId,MeetingTitle:ue.name,MeetingToken:void 0,Status:Pm.Started,HostID:"",ParticipantList:Qe}}),H=d?mn(mn({},f),d):f;let ce=gw(JSON.stringify({ControlStatus:Nr.InProgress,NameIndex:T,IsAutoJoinEnabled:+H.isAutoJoinRoom,IsBackToMainSessionEnabled:+H.isBackToMainSessionEnabled,IsTimerEnabled:+H.isTimerEnabled,TimerDuration:H.timerDuration,IsTimerAutoEndEnabled:+H.isTimerAutoEnabled,WaitSeconds:H.waitSeconds<0?0:H.waitSeconds,StartTimeOnMMR:void 0,ItemList:B}));return R&&(ce=mE.Base64.fromUint8Array(AO.gzip(ce))),nu.startBO(ce),wi("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",ue=>ue.controlStatus===Nr.InProgress)}joinRoom(a){const d=this[Sr](),u=ui(d),{breakoutRoom:{controlStatus:f,rooms:A,mainSessionAttendeeList:S,currentRoom:{status:T,boId:R}},meeting:{userGUID:M}}=d;if(f!==Nr.InProgress)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"breakout room is not started"});if(null!=u&&u.isHost){const B=A.find(H=>H.boId===a);if(!B)return Promise.reject({type:Jr,reason:"room id is not correct"});nu.joinBO(B.boId)}else if(null!=u&&u.bCoHost&&T===lr.InRoom){if(!A.find(B=>B.boId===a))return Promise.reject({type:Jr,reason:"room id is not correct"});{const B=S.find(H=>H.isHost);B&&nu.wantJoinBO(B?.userId,a)}}else{if(T===lr.InRoom&&R===a)return Promise.reject({type:ur,reason:"You are in room"});{const B=_h(A,M);if(!B||B.boId!==a)return Promise.reject({type:Jr,reason:"room id is not correct"});nu.joinBO(B.boId)}}return wi("BREAKOUT_ROOM_JOIN_BO_RESPONSE",B=>B.boId===a)}leaveRoom(){const a=this[Sr](),d=this[Na],{breakoutRoom:{controlStatus:u,options:f,currentRoom:{status:A}}}=a;if(u!==Nr.InProgress&&u!==Nr.Closing||A!==lr.InRoom)return Promise.reject({type:ur});{const S=Ku(a);if(!f.isBackToMainSessionEnabled&&!S)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"can not return main session during the breakout room"});Kb().forEach(T=>d(T))}return Promise.resolve("")}askForHelp(){const a=this[Sr](),{breakoutRoom:{controlStatus:d,mainSessionAttendeeList:u,currentRoom:{status:f}},participants:{attendeesList:A}}=a,S=Ku(a);if(d!==Nr.InProgress||f!==lr.InRoom)return Promise.reject({type:ur,reason:"you are not in breakout room"});if(S)return Promise.reject({type:ur,reason:"host or co-host can not ask for help"});{const T=u.find(R=>R.isHost);if(T){if(A.findIndex(R=>R.zoomID===T.zoomID)>-1)return Promise.reject({type:ur,reason:"host is in room"});nu.askForHelpBO(T.userId)}}return wi("BREAKOUT_ROOM_ASK_HELP_RESPONSE",T=>T.result===W.AskHostHelpResponse.Received)}postponeHelping(a){const d=this[Sr](),u=this[Na],{breakoutRoom:{mainSessionAttendeeList:f,currentRoom:{status:A}},participants:{attendeesList:S}}=d;let T=S;return A===lr.InRoom&&(T=f),T.findIndex(R=>R.userId===a)>-1?(nu.askForHelpResultBO(a,W.AskHostHelpResponse.Ignore),u(ws(W.AskHostHelpResponse.Ignore)),Promise.resolve("")):Promise.reject({type:Jr,reason:"user id is not correct"})}broadcast(a){const{breakoutRoom:{isEnableBOBroadcast:d}}=this[Sr]();return d?a?mc.beginEncrypt({text:a,type:gu.BO_BROADCAST}).then(u=>(nu.broadcastBO(u),Promise.resolve(""))):Promise.reject({type:Jr,reason:"content empty"}):Promise.reject({type:ur,reason:"Cannot broadcast message due to the feature is not enable"})}assignUserToRoom(a,d){const u=this[Sr](),{breakoutRoom:{rooms:f}}=u,A=tc(u).find(S=>S.userId===a);return A&&f.findIndex(S=>S.boId===d)>-1?(nu.assignToBO(a,d),wi("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",S=>{const{controlStatus:T,roomList:R}=S,M=R.find(B=>B.boId===d);return T===Nr.InProgress&&M&&M.attendeeGuidList.includes(A.userGUID)})):Promise.reject({type:Jr,reason:""})}moveUserToRoom(a,d){const u=this[Sr](),{breakoutRoom:{rooms:f,mainSessionAttendeeList:A},participants:{attendeesList:S}}=u,T=(cP(u)?A:S).find(R=>R.userId===a);if(!T)return Promise.reject({type:Jr,reason:"user id not correct"});{const R=_h(f,T.userGUID);if(!R)return Promise.reject({type:ur,reason:"user not in a room"});if(R.boId===d)return Promise.reject({type:ur,reason:"user already in the target room"});{const M=f.find(B=>B.boId===d);if(!M)return Promise.reject({type:Jr,reason:"invalid room id"});nu.switchBO(a,M.boId)}}return wi("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",R=>{const{controlStatus:M,roomList:B}=R,H=B.find($=>$.boId===d);return M===Nr.InProgress&&H&&H.attendeeGuidList.includes(T.userGUID)})}closeRoom(){const a=this[Sr](),{breakoutRoom:{controlStatus:d}}=a;return d!==Nr.InProgress?Promise.reject({type:ur,reason:"room is not started"}):(nu.stopBO(Nr.Closing),wi("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",u=>u.controlStatus===Nr.Closing))}loadPreAssignedRooms(){const a=this[Sr](),{meeting:{meetingOptions:d},breakoutRoom:{controlStatus:u}}=a;return!d.isAllowBreakoutRoomPreAssign||u!==Nr.NotStarted&&u!==Nr.Closed?Promise.reject({type:ur}):(nu.preAssignBreakoutRoom(),wi("BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS"))}getUnassignedAttendeeList(){const a=this[Sr](),{meeting:{isHost:d}}=a;return d?tc(a):[]}getRoomList(){const a=this[Sr](),{breakoutRoom:{rooms:d,currentRoom:{status:u,boId:f},mainSessionAttendeeList:A},participants:{attendeesList:S}}=a,T=ui(a);if(T&&(T.isHost||u===lr.InRoom&&T.bCoHost)){const R=u===lr.InRoom,M=R?A:S;return d.map(B=>{const{attendeeGuidList:H,boId:$,name:ce}=B,he=(H||[]).map(ue=>M.find(Se=>Se.userGUID===ue)).filter(ue=>!!ue&&ue.userGUID!==T.userGUID);return R&&T.isHost&&$===f&&he.unshift(T),{roomId:$,name:ce,attendeeList:he.filter(ue=>!!ue).map(ue=>({userId:ue.userId,displayName:ue.displayName,avatar:ue.avatar,isInRoom:ue.bid===$}))}})}return a.breakoutRoom.rooms.map(R=>{const{boId:M,name:B}=R;return{roomId:M,name:B,attendeeList:[]}})}getAttendeeStatus(){return this[Sr]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[Sr]().breakoutRoom.controlStatus}getCurrentRoom(){const a=this[Sr](),{breakoutRoom:{currentRoom:{status:d,name:u,boId:f}}}=a;return{attendeeStatus:d,name:u,roomId:f}}getRoomOptions(){const a=this[Sr](),{breakoutRoom:{options:d}}=a;return mn({},d)}}).prototype,"createRooms",[Zn,Pa],Object.getOwnPropertyDescriptor(Wi.prototype,"createRooms"),Wi.prototype),tr(Wi.prototype,"openRooms",[Zn,Pa],Object.getOwnPropertyDescriptor(Wi.prototype,"openRooms"),Wi.prototype),tr(Wi.prototype,"joinRoom",[Zn],Object.getOwnPropertyDescriptor(Wi.prototype,"joinRoom"),Wi.prototype),tr(Wi.prototype,"leaveRoom",[Zn],Object.getOwnPropertyDescriptor(Wi.prototype,"leaveRoom"),Wi.prototype),tr(Wi.prototype,"askForHelp",[Zn],Object.getOwnPropertyDescriptor(Wi.prototype,"askForHelp"),Wi.prototype),tr(Wi.prototype,"postponeHelping",[Pa,Zn],Object.getOwnPropertyDescriptor(Wi.prototype,"postponeHelping"),Wi.prototype),tr(Wi.prototype,"broadcast",[Pa,Zn],Object.getOwnPropertyDescriptor(Wi.prototype,"broadcast"),Wi.prototype),tr(Wi.prototype,"assignUserToRoom",[Pa,Zn],Object.getOwnPropertyDescriptor(Wi.prototype,"assignUserToRoom"),Wi.prototype),tr(Wi.prototype,"moveUserToRoom",[Pa,Zn],Object.getOwnPropertyDescriptor(Wi.prototype,"moveUserToRoom"),Wi.prototype),tr(Wi.prototype,"closeRoom",[Pa,Zn],Object.getOwnPropertyDescriptor(Wi.prototype,"closeRoom"),Wi.prototype),tr(Wi.prototype,"loadPreAssignedRooms",[Pa,Zn],Object.getOwnPropertyDescriptor(Wi.prototype,"loadPreAssignedRooms"),Wi.prototype),Wi);const ZB=Fu(aP,Lf);let rr,Cc,vh,Ah;W.LiveTranscriptionMessageSource=void 0,function(a){a[a.Ready=0]="Ready",a[a.UserSub=1]="UserSub",a[a.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",a[a.ManualCaptionerDisabled=3]="ManualCaptionerDisabled"}(rr||(rr={})),function(a){a[a.Unspecified=-1]="Unspecified",a[a.English=0]="English",a[a["Chinese (Simplified)"]=1]="Chinese (Simplified)",a[a.Japanese=2]="Japanese",a[a.German=3]="German",a[a.French=4]="French",a[a.Russian=5]="Russian",a[a.Portuguese=6]="Portuguese",a[a.Spanish=7]="Spanish",a[a.Korean=8]="Korean",a[a.Italian=9]="Italian",a[a.Reserved=10]="Reserved",a[a.Vietnamese=11]="Vietnamese",a[a.Dutch=12]="Dutch",a[a.Ukrainian=13]="Ukrainian",a[a.Arabic=14]="Arabic",a[a.Bengali=15]="Bengali",a[a["Chinese (Traditional)"]=16]="Chinese (Traditional)",a[a.Czech=17]="Czech",a[a.Estonian=18]="Estonian",a[a.Finnish=19]="Finnish",a[a.Greek=20]="Greek",a[a.Hebrew=21]="Hebrew",a[a.Hindi=22]="Hindi",a[a.Hungarian=23]="Hungarian",a[a.Indonesian=24]="Indonesian",a[a.Malay=25]="Malay",a[a.Persian=26]="Persian",a[a.Polish=27]="Polish",a[a.Romanian=28]="Romanian",a[a.Swedish=29]="Swedish",a[a.Tamil=30]="Tamil",a[a.Telugu=31]="Telugu",a[a.Tagalog=32]="Tagalog",a[a.Turkish=33]="Turkish",a[a.NoTranslation=400]="NoTranslation",a[a.DefaultManualInput=401]="DefaultManualInput",a[a.Customized=500]="Customized"}(Cc||(Cc={})),function(a){a[a.Unknown=0]="Unknown",a[a.Close=1]="Close",a[a.New=2]="New",a[a.Insert=3]="Insert",a[a.Delete=4]="Delete",a[a.Reset=5]="Reset",a[a.Audiodesc=6]="Audiodesc",a[a.Speaker=7]="Speaker",a[a.Error=8]="Error"}(vh||(vh={})),function(a){a[a.TranslateNotSupport=1]="TranslateNotSupport"}(Ah||(Ah={})),function(a){a[a.Unspecified=0]="Unspecified",a[a.InMeetingManual=1]="InMeetingManual",a[a.ExternalCaptioner=2]="ExternalCaptioner",a[a.ASR=4]="ASR"}(W.LiveTranscriptionMessageSource||(W.LiveTranscriptionMessageSource={}));const yh={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,bn:15,"zh-hant":16,cs:17,et:18,fi:19,el:20,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33},ev=Object.keys(Cc).filter(a=>/\d+/.test(Cc[a])).reduce((a,d)=>mn(mn({},a),{},{["".concat(Cc[d])]:d}),{}),ny=Object.keys(yh).reduce((a,d)=>(Object.assign(a,{["".concat(yh["".concat(d)])]:d}),a),{});let Eh;function co(a){const d=a===Cc.Unspecified?Cc.Reserved:a;_o.getInstance().selectLanguageChannelForNewLTT(d)}function bO(a,d){return a===d||a!=a&&d!=d}function tv(a,d){for(var u=a.length;u--;)if(bO(a[u][0],d))return u;return-1}W.LiveTranscriptionLanguageCode=void 0,W.LiveTranscriptionLanguage=void 0,function(a){a[a.Unknown=0]="Unknown",a[a.ZoomKits=1]="ZoomKits",a[a.AISense=2]="AISense"}(Eh||(Eh={})),function(a){a[a.English=0]="English",a[a.Chinese=1]="Chinese",a[a.Japanese=2]="Japanese",a[a.German=3]="German",a[a.French=4]="French",a[a.Russian=5]="Russian",a[a.Portuguese=6]="Portuguese",a[a.Spanish=7]="Spanish",a[a.Korean=8]="Korean",a[a.Italian=9]="Italian",a[a.Reserved=10]="Reserved",a[a.Vietnamese=11]="Vietnamese",a[a.Dutch=12]="Dutch",a[a.Ukrainian=13]="Ukrainian",a[a.Arabic=14]="Arabic",a[a.Bengali=15]="Bengali",a[a["Chinese (Traditional)"]=16]="Chinese (Traditional)",a[a.Czech=17]="Czech",a[a.Estonian=18]="Estonian",a[a.Finnish=19]="Finnish",a[a.Greek=20]="Greek",a[a.Hebrew=21]="Hebrew",a[a.Hindi=22]="Hindi",a[a.Hungarian=23]="Hungarian",a[a.Indonesian=24]="Indonesian",a[a.Malay=25]="Malay",a[a.Persian=26]="Persian",a[a.Polish=27]="Polish",a[a.Romanian=28]="Romanian",a[a.Swedish=29]="Swedish",a[a.Tamil=30]="Tamil",a[a.Telugu=31]="Telugu",a[a.Tagalog=32]="Tagalog",a[a.Turkish=33]="Turkish",a[a.NoTranslation=400]="NoTranslation",a[a.DefaultManualInput=401]="DefaultManualInput"}(W.LiveTranscriptionLanguageCode||(W.LiveTranscriptionLanguageCode={})),function(a){a.English="en",a["Chinese (Simplified)"]="zh",a.Japanese="ja",a.German="de",a.French="fr",a.Russian="ru",a.Portuguese="pt",a.Spanish="es",a.Korean="ko",a.Italian="it",a.Reserved="en1",a.Vietnamese="vi",a.Dutch="nl",a.Ukrainian="uk",a.Arabic="ar",a.Bengali="bn",a["Chinese (Traditional)"]="zh-hant",a.Czech="cs",a.Estonian="et",a.Finnish="fi",a.Greek="el",a.Hebrew="he",a.Hindi="hi",a.Hungarian="hu",a.Indonesian="id",a.Malay="ms",a.Persian="fa",a.Polish="pl",a.Romanian="ro",a.Swedish="sv",a.Tamil="ta",a.Telugu="te",a.Tagalog="tl",a.Turkish="tr"}(W.LiveTranscriptionLanguage||(W.LiveTranscriptionLanguage={}));var mg=Array.prototype.splice;function Dd(a){var d=-1,u=null==a?0:a.length;for(this.clear();++d<u;){var f=a[d];this.set(f[0],f[1])}}Dd.prototype.clear=function(){this.__data__=[],this.size=0},Dd.prototype.delete=function(a){var d=this.__data__,u=tv(d,a);return!(u<0||(u==d.length-1?d.pop():mg.call(d,u,1),--this.size,0))},Dd.prototype.get=function(a){var d=this.__data__,u=tv(d,a);return u<0?void 0:d[u][1]},Dd.prototype.has=function(a){return tv(this.__data__,a)>-1},Dd.prototype.set=function(a,d){var u=this.__data__,f=tv(u,a);return f<0?(++this.size,u.push([a,d])):u[f][1]=d,this};var FI="object"==typeof global&&global&&global.Object===Object&&global,UI="object"==typeof self&&self&&self.Object===Object&&self,bh=FI||UI||Function("return this")(),Ep=bh.Symbol,VI=Object.prototype,uP=VI.hasOwnProperty,nv=VI.toString,bp=Ep?Ep.toStringTag:void 0,lP=Object.prototype.toString,SO=Ep?Ep.toStringTag:void 0;function rv(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":SO&&SO in Object(a)?function(d){var u=uP.call(d,bp),f=d[bp];try{d[bp]=void 0;var A=!0}catch{}var S=nv.call(d);return A&&(u?d[bp]=f:delete d[bp]),S}(a):lP.call(a)}function ry(a){var d=typeof a;return null!=a&&("object"==d||"function"==d)}function iy(a){if(!ry(a))return!1;var d=rv(a);return"[object Function]"==d||"[object GeneratorFunction]"==d||"[object AsyncFunction]"==d||"[object Proxy]"==d}var zb,Yb=bh["__core-js_shared__"],jI=(zb=/[^.]+$/.exec(Yb&&Yb.keys&&Yb.keys.IE_PROTO||""))?"Symbol(src)_1."+zb:"",oy=Function.prototype.toString;function kd(a){if(null!=a){try{return oy.call(a)}catch{}try{return a+""}catch{}}return""}var dP=/^\[object .+?Constructor\]$/,QI=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vl(a,d){var f,A,u=a?.[d];return ry(f=u)&&(A=f,!jI||!(jI in A))&&(iy(f)?QI:dP).test(kd(f))?u:void 0}var iv=Vl(bh,"Map"),sy=Vl(Object,"create"),fP=Object.prototype.hasOwnProperty,eF=Object.prototype.hasOwnProperty;function ov(a){var d=-1,u=null==a?0:a.length;for(this.clear();++d<u;){var f=a[d];this.set(f[0],f[1])}}function HI(a,d){var u,f,A=a.__data__;return("string"==(f=typeof(u=d))||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u)?A["string"==typeof d?"string":"hash"]:A.map}function gg(a){var d=-1,u=null==a?0:a.length;for(this.clear();++d<u;){var f=a[d];this.set(f[0],f[1])}}function _g(a){var d=this.__data__=new Dd(a);this.size=d.size}function GI(a){var d=-1,u=null==a?0:a.length;for(this.__data__=new gg;++d<u;)this.add(a[d])}function TO(a,d){for(var u=-1,f=null==a?0:a.length;++u<f;)if(d(a[u],u,a))return!0;return!1}function ay(a,d,u,f,A,S){var T=1&u,R=a.length,M=d.length;if(R!=M&&!(T&&M>R))return!1;var B=S.get(a),H=S.get(d);if(B&&H)return B==d&&H==a;var $=-1,ce=!0,he=2&u?new GI:void 0;for(S.set(a,d),S.set(d,a);++$<R;){var ue=a[$],Se=d[$];if(f)var Qe=T?f(Se,ue,$,d,a,S):f(ue,Se,$,a,d,S);if(void 0!==Qe){if(Qe)continue;ce=!1;break}if(he){if(!TO(d,function(He,We){if(!he.has(We)&&(ue===He||A(ue,He,u,f,S)))return he.push(We)})){ce=!1;break}}else if(ue!==Se&&!A(ue,Se,u,f,S)){ce=!1;break}}return S.delete(a),S.delete(d),ce}ov.prototype.clear=function(){this.__data__=sy?sy(null):{},this.size=0},ov.prototype.delete=function(a){var d=this.has(a)&&delete this.__data__[a];return this.size-=d?1:0,d},ov.prototype.get=function(a){var d=this.__data__;if(sy){var u=d[a];return"__lodash_hash_undefined__"===u?void 0:u}return fP.call(d,a)?d[a]:void 0},ov.prototype.has=function(a){var d=this.__data__;return sy?void 0!==d[a]:eF.call(d,a)},ov.prototype.set=function(a,d){var u=this.__data__;return this.size+=this.has(a)?0:1,u[a]=sy&&void 0===d?"__lodash_hash_undefined__":d,this},gg.prototype.clear=function(){this.size=0,this.__data__={hash:new ov,map:new(iv||Dd),string:new ov}},gg.prototype.delete=function(a){var d=HI(this,a).delete(a);return this.size-=d?1:0,d},gg.prototype.get=function(a){return HI(this,a).get(a)},gg.prototype.has=function(a){return HI(this,a).has(a)},gg.prototype.set=function(a,d){var u=HI(this,a),f=u.size;return u.set(a,d),this.size+=u.size==f?0:1,this},_g.prototype.clear=function(){this.__data__=new Dd,this.size=0},_g.prototype.delete=function(a){var d=this.__data__,u=d.delete(a);return this.size=d.size,u},_g.prototype.get=function(a){return this.__data__.get(a)},_g.prototype.has=function(a){return this.__data__.has(a)},_g.prototype.set=function(a,d){var u=this.__data__;if(u instanceof Dd){var f=u.__data__;if(!iv||f.length<199)return f.push([a,d]),this.size=++u.size,this;u=this.__data__=new gg(f)}return u.set(a,d),this.size=u.size,this},GI.prototype.add=GI.prototype.push=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},GI.prototype.has=function(a){return this.__data__.has(a)};var wO=bh.Uint8Array;function RO(a){var d=-1,u=Array(a.size);return a.forEach(function(f,A){u[++d]=[A,f]}),u}function WI(a){var d=-1,u=Array(a.size);return a.forEach(function(f){u[++d]=f}),u}var sv=Ep?Ep.prototype:void 0,av=sv?sv.valueOf:void 0,cv=Array.isArray,OO=Object.prototype.propertyIsEnumerable,cy=Object.getOwnPropertySymbols,DO=cy?function(a){return null==a?[]:(a=Object(a),function(d,u){for(var f=-1,A=null==d?0:d.length,S=0,T=[];++f<A;){var R=d[f];u(R)&&(T[S++]=R)}return T}(cy(a),function(d){return OO.call(a,d)}))}:function(){return[]};function uv(a){return null!=a&&"object"==typeof a}function KI(a){return uv(a)&&"[object Arguments]"==rv(a)}var kO=Object.prototype,lv=kO.hasOwnProperty,NO=kO.propertyIsEnumerable,PO=KI(function(){return arguments}())?KI:function(a){return uv(a)&&lv.call(a,"callee")&&!NO.call(a,"callee")},zI="object"==typeof W&&W&&!W.nodeType&&W,YI=zI&&Ie&&!Ie.nodeType&&Ie,MO=YI&&YI.exports===zI?bh.Buffer:void 0,uy=(MO?MO.isBuffer:void 0)||function(){return!1},mP=/^(?:0|[1-9]\d*)$/;function qb(a,d){var u=typeof a;return!!(d=d??9007199254740991)&&("number"==u||"symbol"!=u&&mP.test(a))&&a>-1&&a%1==0&&a<d}function xO(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=9007199254740991}var qo={};qo["[object Float32Array]"]=qo["[object Float64Array]"]=qo["[object Int8Array]"]=qo["[object Int16Array]"]=qo["[object Int32Array]"]=qo["[object Uint8Array]"]=qo["[object Uint8ClampedArray]"]=qo["[object Uint16Array]"]=qo["[object Uint32Array]"]=!0,qo["[object Arguments]"]=qo["[object Array]"]=qo["[object ArrayBuffer]"]=qo["[object Boolean]"]=qo["[object DataView]"]=qo["[object Date]"]=qo["[object Error]"]=qo["[object Function]"]=qo["[object Map]"]=qo["[object Number]"]=qo["[object Object]"]=qo["[object RegExp]"]=qo["[object Set]"]=qo["[object String]"]=qo["[object WeakMap]"]=!1;var qI,JI="object"==typeof W&&W&&!W.nodeType&&W,ly=JI&&Ie&&!Ie.nodeType&&Ie,XI=ly&&ly.exports===JI&&FI.process,dv=function(){try{return ly&&ly.require&&ly.require("util").types||XI&&XI.binding&&XI.binding("util")}catch{}}(),$I=dv&&dv.isTypedArray,Jb=$I?(qI=$I,function(a){return qI(a)}):function(a){return uv(a)&&xO(a.length)&&!!qo[rv(a)]},gP=Object.prototype.hasOwnProperty,LO=Object.prototype,_P=function(a,d){return function(u){return a(d(u))}}(Object.keys,Object),vP=Object.prototype.hasOwnProperty;function FO(a){return f=DO,A=function BO(a){return null!=(d=a)&&xO(d.length)&&!iy(d)?function(u,f){var A=cv(u),S=!A&&PO(u),T=!A&&!S&&uy(u),R=!A&&!S&&!T&&Jb(u),M=A||S||T||R,B=M?function(ce,he){for(var ue=-1,Se=Array(ce);++ue<ce;)Se[ue]=he(ue);return Se}(u.length,String):[],H=B.length;for(var $ in u)!gP.call(u,$)||M&&("length"==$||T&&("offset"==$||"parent"==$)||R&&("buffer"==$||"byteLength"==$||"byteOffset"==$)||qb($,H))||B.push($);return B}(a):function(u){if(A=(f=u)&&f.constructor,f!==("function"==typeof A&&A.prototype||LO))return _P(u);var f,A,S=[];for(var T in Object(u))vP.call(u,T)&&"constructor"!=T&&S.push(T);return S}(a);var d}(d=a),cv(d)?A:function(S,T){for(var R=-1,M=T.length,B=S.length;++R<M;)S[B+R]=T[R];return S}(A,f(d));var d,f,A}var AP=Object.prototype.hasOwnProperty,Xb=Vl(bh,"DataView"),$b=Vl(bh,"Promise"),dy=Vl(bh,"Set"),hy=Vl(bh,"WeakMap"),yP=kd(Xb),UO=kd(iv),py=kd($b),VO=kd(dy),fy=kd(hy),Su=rv;(Xb&&"[object DataView]"!=Su(new Xb(new ArrayBuffer(1)))||iv&&"[object Map]"!=Su(new iv)||$b&&"[object Promise]"!=Su($b.resolve())||dy&&"[object Set]"!=Su(new dy)||hy&&"[object WeakMap]"!=Su(new hy))&&(Su=function(a){var d=rv(a),u="[object Object]"==d?a.constructor:void 0,f=u?kd(u):"";if(f)switch(f){case yP:return"[object DataView]";case UO:return"[object Map]";case py:return"[object Promise]";case VO:return"[object Set]";case fy:return"[object WeakMap]"}return d});var my=Su,vg="[object Object]",Ag=Object.prototype.hasOwnProperty;function jO(a,d,u,f,A){return a===d||(null==a||null==d||!uv(a)&&!uv(d)?a!=a&&d!=d:function(S,T,R,M,B,H){var $=cv(S),ce=cv(T),he=$?"[object Array]":my(S),ue=ce?"[object Array]":my(T),Se=(he="[object Arguments]"==he?vg:he)==vg,Qe=(ue="[object Arguments]"==ue?vg:ue)==vg,He=he==ue;if(He&&uy(S)){if(!uy(T))return!1;$=!0,Se=!1}if(He&&!Se)return H||(H=new _g),$||Jb(S)?ay(S,T,R,M,B,H):function(jt,Tt,sn,hn,An,ln,Qt){switch(sn){case"[object DataView]":if(jt.byteLength!=Tt.byteLength||jt.byteOffset!=Tt.byteOffset)return!1;jt=jt.buffer,Tt=Tt.buffer;case"[object ArrayBuffer]":return!(jt.byteLength!=Tt.byteLength||!ln(new wO(jt),new wO(Tt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return bO(+jt,+Tt);case"[object Error]":return jt.name==Tt.name&&jt.message==Tt.message;case"[object RegExp]":case"[object String]":return jt==Tt+"";case"[object Map]":var Bn=RO;case"[object Set]":if(Bn||(Bn=WI),jt.size!=Tt.size&&!(1&hn))return!1;var vt=Qt.get(jt);if(vt)return vt==Tt;hn|=2,Qt.set(jt,Tt);var ut=ay(Bn(jt),Bn(Tt),hn,An,ln,Qt);return Qt.delete(jt),ut;case"[object Symbol]":if(av)return av.call(jt)==av.call(Tt)}return!1}(S,T,he,R,M,B,H);if(!(1&R)){var We=Se&&Ag.call(S,"__wrapped__"),et=Qe&&Ag.call(T,"__wrapped__");if(We||et){var Lt=We?S.value():S,Gt=et?T.value():T;return H||(H=new _g),B(Lt,Gt,R,M,H)}}return!!He&&(H||(H=new _g),function(jt,Tt,sn,hn,An,ln){var Qt=1&sn,Bn=FO(jt),_r=Bn.length;if(_r!=FO(Tt).length&&!Qt)return!1;for(var vt=_r;vt--;){var ut=Bn[vt];if(!(Qt?ut in Tt:AP.call(Tt,ut)))return!1}var Be=ln.get(jt),$e=ln.get(Tt);if(Be&&$e)return Be==Tt&&$e==jt;var St=!0;ln.set(jt,Tt),ln.set(Tt,jt);for(var lt=Qt;++vt<_r;){var Ut=jt[ut=Bn[vt]],an=Tt[ut];if(hn)var Gn=Qt?hn(an,Ut,ut,Tt,jt,ln):hn(Ut,an,ut,jt,Tt,ln);if(!(void 0===Gn?Ut===an||An(Ut,an,sn,hn,ln):Gn)){St=!1;break}lt||(lt="constructor"==ut)}if(St&&!lt){var vr=jt.constructor,Hr=Tt.constructor;vr==Hr||!("constructor"in jt)||!("constructor"in Tt)||"function"==typeof vr&&vr instanceof vr&&"function"==typeof Hr&&Hr instanceof Hr||(St=!1)}return ln.delete(jt),ln.delete(Tt),St}(S,T,R,M,B,H))}(a,d,u,f,jO,A))}const EP=wE(TE,function(a,d){return jO(a,d)})([Ks,a=>{let{meeting:{gatewayUserList:d}}=a;return d}],(a,d)=>{const u={};return a.forEach(f=>{Object.assign(u,{["".concat(f.userId)]:f.zoomID})}),d?.forEach(f=>{Object.assign(u,{["".concat(f.userId)]:f.sn})}),u}),Zb=Ws([Ks],a=>a.find(d=>!0===d.bCCEditor)),QO=Ws([Ks,Jh],(a,d)=>a.some(u=>!0===u.bCCEditor&&u.userId===d)),Ao=ko.createAgent();var hv=Object.freeze({__proto__:null,handleLiveTranscriptionMeetingOptionEpic:a=>a.pipe(Vi("".concat(gm)),Ne(d=>{const{payload:{liveTranscription:u}}=d;return oR(u)})),handleLiveTranscriptionEnableEpic:(a,d)=>Mn(a,gc).pipe(Un(u=>{var f,A;return void 0!==(null===(f=u.payload.body)||void 0===f?void 0:f.NewLttAvaliable)||void 0!==(null===(A=u.payload.body)||void 0===A?void 0:A.LiveTransEngineType)}),Ne(u=>{const{payload:{body:{NewLttAvaliable:f,LiveTransEngineType:A}}}=u,{liveTranscription:{isEnableAutomatedCaptions:S}}=d.value;return void 0!==f?(Et("LIVE_TRANSCRIPTION_STATUS_CHANGE",!!f),iR(S&&!!f)):EC(A)})),handleLiveTranscriptionStatusEpic:(a,d)=>Mn(a,7982).pipe(nr(u=>{const{payload:{body:{status:f,gwId:A}}}=u,S=[];switch(f){case rr.Ready:S.push(sR(A));break;case rr.ManualCaptionerEnabled:Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:!1}),S.push(yC(!0));break;case rr.ManualCaptionerDisabled:Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:!0}),S.push(yC(!1));break;case rr.UserSub:{Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:d.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:R}}=d.value;if(null!=R&&R.isLiveTranscriptionSubscribed){var T;Ao.enableNewLLT();const M=null!==(T=R.currentTranscriptionLang)&&void 0!==T?T:Cc.Unspecified;co(M),S.push(ip(M)),void 0!==R.currentTranslationLang&&Ao.setTranslationLanguage(R.currentTranslationLang),S.push(NN())}break}}return Yn(S)})),handleLiveTranscriptionSupportedLanguageEpic:a=>Mn(a,7984).pipe(Ne(d=>{const{payload:{body:{langs:u}}}=d;return EA(u)})),handleLiveTranscriptionSubStatusEpic:a=>Mn(a,7985).pipe(Un(d=>{var u;return!0===(null===(u=d.payload.body)||void 0===u?void 0:u.success)}),nr(d=>{const{payload:{body:{src:u,lang:f,success:A}}}=d,S=[];return A&&S.push(oh(!0)),u===W.LiveTranscriptionMessageSource.ASR?(S.push(vf(f===Cc.NoTranslation?void 0:f)),Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:!0,lang:f})):[W.LiveTranscriptionMessageSource.InMeetingManual,W.LiveTranscriptionMessageSource.ExternalCaptioner].includes(u)&&Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:!1}),Yn(S)})),handleLiveTranscriptionSpeakingLanguageChangeEpic:(a,d)=>Mn(a,7986).pipe(Hn(d),nr(u=>{let[f,A]=u;const S=ui(A),{liveTranscription:{currentTranscriptionLang:T}}=A,{payload:{body:R}}=f,M=[];if(void 0!==R?.lang){const{lang:B}=R;"computer"===S?.audio&&T!==B&&co(B),M.push(ip(B))}return Yn(M)})),handleComputerAudioCompleteChangeLTLanguageEpic:(a,d)=>Ci(a,Dr.JoinComputerAudioComplete).pipe(Un(()=>d.value.liveTranscription.isLiveTranscriptionSubscribed),dr(()=>{const{liveTranscription:{currentTranscriptionLang:u}}=d.value;u&&co(u)}),ai(mt)),handleLiveTranscriptionTextEpic:(a,d)=>Mn(a,7983).pipe(Un(u=>void 0!==u.payload.body),nr(u=>{const{payload:{body:{msgType:f,errorCode:A,language:S,source:T,content:R,keyNodeId:M,msgId:B,nodeId:H,pos:$,size:ce,audioLanguage:he}}}=u;if(f===vh.Error){if(A===Ah.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:ue}}=d.value;ue&&Et("LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",{error:Ah.TranslateNotSupport,errorMessage:"".concat(ev[he]," to ").concat(ev[ue]," translation is not supported!")})}}else{const ue=d.value,Se=Ks(ue),{liveTranscription:{isManualCaptionerEnabled:Qe}}=ue;if(Qe&&T===W.LiveTranscriptionMessageSource.ASR)return Promise.resolve();if(function(He,We){const{liveTranscription:{isEnableTranslatedCaptions:et,isLiveTranscriptionEnabled:Lt},meeting:{meetingOptions:Gt}}=We,{isEnableManualCaptions:jt,isEnableAllowHostAssignTypeCC:Tt,isEnableClosedCaption:sn,isEnableAllowThirdPartyCCToken:hn}=Gt;return He===W.LiveTranscriptionMessageSource.ASR?et||Lt:He===W.LiveTranscriptionMessageSource.InMeetingManual?jt&&Tt||void 0===jt&&sn:He===W.LiveTranscriptionMessageSource.ExternalCaptioner?hn:void 0}(T,ue)&&R&&M){const He=EP(ue)[M];if(He)return mc.beginDecrypt({decryptedText:R,type:gu.CC_MESSAGE,zoomId:He}).then(We=>{let{message:et}=We;const{liveTranscription:{messageRecords:Lt}}=d.value,Gt=[],jt=Lt.find(Tt=>Tt.msgId===B);if(jt){const{text:Tt}=jt,sn=((An,ln)=>{if(!An||0===ln)return"";let Qt=0;for(let Bn=0;Bn<An.length;Bn++)if(Qt+=hN(An[Bn]),Qt===ln)return An.slice(0,Bn+1);return An})(Tt,$);let hn;f===vh.Insert&&0===ce||f===vh.Delete&&0===ce?hn=mn(mn({},jt),{},{text:sn+et,msgType:f}):f===vh.Close&&(hn=mn(mn({},jt),{},{text:et,msgType:f,done:!0})),hn&&(Gt.push(SA(hn)),Et("LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",hn))}else if([vh.New,vh.Close].includes(f)||Qe&&f===vh.Insert){const Tt=Se.find(hn=>hn.userId===H),sn={msgId:B,userId:H,displayName:Tt?.displayName,avatar:Tt?.avatar,text:et,source:T,language:S,timestamp:(new Date).getTime(),done:f===vh.Close};Gt.push(bA(mn(mn({},sn),{},{msgType:f}))),Et("LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",sn)}return Gt})}}return Promise.resolve()}),nr(u=>Array.isArray(u)?Yn(u):mt)),handlePersistLargeRecordsEpic:(a,d)=>a.pipe(Vi("".concat(bA)),po(es),nr(()=>{const{liveTranscription:{messageRecords:u}}=d.value;return u.length>=1e5?function(f){const{meeting:{meetingId:A},liveTranscription:{messageRecords:S,reducedRecordsCount:T}}=f;return void 0!==window.indexedDB?new Promise(R=>{const M=window.indexedDB.open("zoom-sdk-live-trasncription",1);M.addEventListener("upgradeneeded",()=>{const B=M.result;if(!B.objectStoreNames.contains("live-trasncription")){const H=B.createObjectStore("live-trasncription",{keyPath:["startIndex","mid"],autoIncrement:!1});H.createIndex("mid","mid",{unique:!1}),H.transaction.oncomplete=()=>{console.log("Create objectStore [".concat("live-trasncription","] complete"))}}}),M.addEventListener("success",()=>{const B=M.result,H=S.length,$=.9*H,ce=H-$,he=S.slice(0,$),ue=T+he.length,Se=B.transaction(["live-trasncription"],"readwrite");Se.objectStore("live-trasncription").put({startIndex:T,mid:A,records:he}),Se.oncomplete=()=>{R(kN({remains:ce,reducedRecordsCount:ue})),B.close()},Se.onerror=()=>{R(""),B.close()}})}):Promise.resolve("")}(d.value):Promise.resolve("")}),Un(u=>"object"==typeof u)),handleClearRecordsInDBEpic:(a,d)=>a.pipe(Vi("".concat(qv),"".concat(Ya)),Un(()=>d.value.liveTranscription.isRecordsReduced),dr(()=>{!function(){if(void 0!==window.indexedDB){const u=window.indexedDB.open("zoom-sdk-live-trasncription",1);u.addEventListener("success",()=>{const f=u.result;f.objectStoreNames.contains("live-trasncription")&&(window.indexedDB.deleteDatabase("zoom-sdk-live-trasncription"),f.close())})}}()}),ai(mt))});const eS={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0},ZI=na({["".concat(iR)]:Mt((a,d)=>{let{payload:u}=d;a.isLiveTranscriptionEnabled=u}),["".concat(oR)]:Mt((a,d)=>{let{payload:u}=d;const{transcriptionLang:f,translatedSetting:A}=u,S=Vh(u,["transcriptionLang","translatedSetting"]);f&&(a.transcriptionLang=f.split(";").map(T=>{const R=T&&yh[T];return void 0!==R?{lang:T,code:R}:null}).filter(Boolean)),A&&(a.translatedSetting=Object.keys(A).map(T=>{const R=A[T];if(R){const M=R.split(";").map(B=>{const H=B&&yh[B];return void 0!==H?{lang:B,code:H}:null}).filter(Boolean);return{lang:T,code:yh[T],translatedToLanguage:M}}return null}).filter(Boolean)),Object.assign(a,S)}),["".concat(yC)]:Mt((a,d)=>{let{payload:u}=d;a.isManualCaptionerEnabled=u}),["".concat(sR)]:Mt((a,d)=>{let{payload:u}=d;a.gatewayId=u}),["".concat(EA)]:Mt((a,d)=>{let{payload:u}=d;a.supportedTranscriptionLanguage=u}),["".concat(ip)]:Mt((a,d)=>{let{payload:u}=d;a.currentTranscriptionLang=u}),["".concat(vf)]:Mt((a,d)=>{let{payload:u}=d;a.currentTranslationLang=u}),["".concat(bA)]:Mt((a,d)=>{let{payload:u}=d;a.messageRecords.push(u)}),["".concat(SA)]:Mt((a,d)=>{let{payload:u}=d;const f=a.messageRecords.find(A=>A.msgId===u.msgId);f&&Object.assign(f,u)}),["".concat(kN)]:Mt((a,d)=>{let{payload:u}=d;const{remains:f,reducedRecordsCount:A}=u,S=a.messageRecords.length-f;a.isRecordsReduced=!0,a.reducedRecordsCount=A,a.messageRecords.splice(0,S)}),["".concat(oh)]:Mt((a,d)=>{let{payload:u}=d;a.isLiveTranscriptionSubscribed=u}),["".concat(EC)]:Mt((a,d)=>{let{payload:u}=d;a.liveTransEngineType=u}),["".concat(NN)]:Mt(a=>{a.stateBeforeFailover=void 0}),["".concat(CA)]:Mt((a,d)=>{let{payload:u}=d;a.lastManualCaption=u}),["".concat(ob)]:Mt((a,d)=>{let{payload:u}=d;return u?mn(mn({},eS),{},{stateBeforeFailover:{currentTranscriptionLang:a.currentTranscriptionLang,currentTranslationLang:a.currentTranslationLang,isLiveTranscriptionSubscribed:a.isLiveTranscriptionSubscribed},messageRecords:a.messageRecords,isRecordsReduced:a.isRecordsReduced,reducedRecordsCount:a.reducedRecordsCount}):mn({},eS)})},eS),bP={userId:0,displayName:"everyone",zoomID:"",isHost:!1,bCoHost:!1},Cu={userId:1,displayName:"All panelists",zoomID:"",isHost:!1,bCoHost:!1};var jo;const Sh=ko.createAgent();let eT=(tr((jo=class extends $c{startLiveTranscription(){const{[Sr]:a,[Na]:d}=this,{liveTranscription:{isLiveTranscriptionEnabled:u,isEnableTranslatedCaptions:f,isLiveTranscriptionSubscribed:A,isHostLockSpeakingLanguage:S}}=a();return A?Promise.resolve(""):u?(Sh.enableNewLLT(),wi("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE").then(()=>{S?Sh.setSpokenLanguage(Cc.English):co(Cc.Unspecified),d(ip(Cc.English)),f&&Sh.setTranslationLanguage()})):Promise.reject({type:ur,reason:"Live transcription is not enabled."})}setSpeakingLanguage(a){const{[Sr]:d,[Na]:u}=this,{liveTranscription:{isLiveTranscriptionSubscribed:f,isHostLockSpeakingLanguage:A,transcriptionLang:S}}=d(),T=S.find(R=>R.lang===a);if(T){const{code:R}=T;return f?(A?Sh.setSpokenLanguage(R):co(R),u(ip(R)),Promise.resolve("")):Promise.reject({type:ur,reason:"Cannot set speaking language before starting live transcription"})}return Promise.reject({type:Jr,reason:"Unsupported transcription language"})}setTranslationLanguage(a){const{[Sr]:d,[Na]:u}=this,f=d(),{liveTranscription:{isEnableTranslatedCaptions:A,isLiveTranscriptionSubscribed:S,translatedSetting:T,currentTranscriptionLang:R}}=f;if(!A)return Promise.reject({type:ur,reason:"Live translation is not enabled."});if(!S)return Promise.reject({type:ur,reason:"Cannot set translation language before starting live transcription"});if(a){const M=T?.find(B=>B.code===R);if(M){const{translatedToLanguage:B}=M,H=B.find($=>$.lang===a);if(H)return Sh.setTranslationLanguage(H.code),wi({event:"LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",operations:[Un($=>!0===$.autoCaption&&$.lang===H.code),ii(1)]},$=>{let{lang:ce}=$;return ce===H.code})}return Promise.reject({type:ur,reason:"Cannot support translating ".concat(ev[R||0]," to ").concat(a)})}return Sh.setTranslationLanguage(),u(vf(void 0)),Promise.resolve("")}enableManualCaptioner(){const{[Sr]:a}=this,{meeting:{meetingOptions:d},liveTranscription:{isManualCaptionerEnabled:u}}=a(),{isEnableManualCaptions:f,isEnableClosedCaption:A}=d;return f??A?u?Promise.resolve():(Sh.enableManualCaption(!0),wi("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",S=>{let{autoCaption:T}=S;return!1===T})):Promise.reject({type:ur,reason:"Manual caption is not enabled."})}disableManualCaptioner(){const{[Sr]:a}=this,{liveTranscription:{isManualCaptionerEnabled:d}}=a();return d?(Sh.enableManualCaption(!1),wi("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",u=>{let{autoCaption:f}=u;return!0===f})):Promise.resolve()}assignManualCaption(a){var d;const{[Sr]:u}=this,f=u(),{liveTranscription:{isManualCaptionerEnabled:A},participants:{attendeesList:S},meeting:{userId:T}}=f;return A?(null===(d=Zb(f))||void 0===d?void 0:d.userId)===a?Promise.resolve(""):S.find(R=>R.userId===a)?(Sh.assignCC(a,!0),wi({event:T===a?"UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE":"UPDATE_USER_PARTICIPANT_ATTRIBUTE",operations:[Un(R=>R.userId===a),ii(1)]},R=>!0===R.bCCEditor)):Promise.reject({type:Jr,reason:"Cannot find the user"}):Promise.reject({type:ur,reason:"Cannot assign caption editor due to the manual captioner is not enabled."})}sendCaptionTextManually(a,d){var u;const{[Sr]:f,[Na]:A}=this,S=f(),{liveTranscription:{lastManualCaption:T},meeting:{userId:R}}=S,M=ui(S);let B=Promise.resolve();const H=null===(u=Zb(S))||void 0===u?void 0:u.userId;return null!=M&&M.isHost&&H!==R&&(B=this.assignManualCaption(R)),B.then(()=>QO(f())?function($,ce,he){const ue=$.length,Se=[];var Qe;if(he)Se.push({op:"close",text:$,msgId:null!==(Qe=ce?.msgId)&&void 0!==Qe?Qe:vw()});else if(ce){const He=ce.text.length;let We=0,et=0;for(;$[We]===ce.text[We]&&We<ue;)et+=hN($[We]),We+=1;We===He&&We===ue?Se.push({op:"same"}):We===He&&We<ue?Se.push({op:"insert",text:$.slice(We),size:0,pos:et,msgId:ce.msgId}):We<He&&We===ue?Se.push({op:"delete",size:0,pos:et,msgId:ce.msgId}):(Se.push({op:"delete",size:0,pos:et,msgId:ce.msgId}),Se.push({op:"insert",text:$.slice(We),pos:et,msgId:ce.msgId}))}else ue>0&&Se.push({op:"start",text:$,pos:0,size:0,msgId:vw()});return Se.filter(He=>"same"!==He.op)}(a,T,d):Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"Cannot type caption "})).then($=>Array.isArray($)?($.forEach(ce=>{const{text:he}=ce,ue=Vh(ce,["text"]);mc.beginEncrypt({text:he??"",type:gu.CC_MESSAGE}).then(Se=>{Sh.sendManualCaption(mn({text:Se},ue)),A(CA(d?void 0:{text:he,msgId:ce.msgId}))})}),wi("LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",ce=>ce.source===W.LiveTranscriptionMessageSource.InMeetingManual)):"")}getLiveTranscriptionStatus(){const{[Sr]:a}=this,{liveTranscription:{isLiveTranscriptionEnabled:d,isEnableTranslatedCaptions:u,isManualCaptionerEnabled:f,transcriptionLang:A,translatedSetting:S}}=a();return{isLiveTranscriptionEnabled:d,isLiveTranslationEnabled:u,isManualCaptionerEnabled:f,transcriptionLanguage:A.map(T=>T.lang).join(";"),translationLanguage:S?.map(T=>({speakingLanguage:T.lang,translatedToLanguage:T.translatedToLanguage.map(R=>R.lang).join(";")}))}}getLiveTranscriptionSetting(){const{[Sr]:a}=this,{meeting:{meetingOptions:d}}=a(),{isEnableManualCaptions:u,isEnableLiveTranscription:f,isEnableClosedCaption:A,isEnableAllowThirdPartyCCToken:S,isEnableViewFullTranscript:T}=d||{};return{isEnableManualCaptions:u,isEnableLiveTranscription:f,isEnableClosedCaption:A,isEnableAllowThirdPartyCCToken:S,isEnableViewFullTranscript:T}}getCurrentTranscriptionLanguage(){const{[Sr]:a}=this,{liveTranscription:{currentTranscriptionLang:d}}=a();return void 0!==d?{code:ny[d],name:ev[d]}:null}getCurrentTranslationLanguage(){const{[Sr]:a}=this,{liveTranscription:{currentTranslationLang:d}}=a();return void 0!==d?{code:ny[d],name:ev[d]}:null}getLatestTranscription(){const{[Sr]:a}=this,{liveTranscription:{messageRecords:d,isManualCaptionerEnabled:u}}=a(),f=u?Cc.DefaultManualInput:Cc.NoTranslation,A=d.filter(S=>S.language===f);return A.length?A[A.length-1].text:""}getLatestTranslation(){const{[Sr]:a}=this,{liveTranscription:{messageRecords:d,currentTranslationLang:u,isEnableTranslatedCaptions:f}}=a();if(f||void 0!==u){const A=d.filter(S=>S.language===u);return A.length?A[A.length-1].text:""}return""}getFullTranscriptionHistory(){const{[Sr]:a}=this,d=a(),{liveTranscription:{messageRecords:u,isRecordsReduced:f}}=d;return f?(A=d,void 0!==window.indexedDB?new Promise(S=>{const T=window.indexedDB.open("zoom-sdk-live-trasncription",1);T.addEventListener("success",()=>{const R=T.result;if(R.objectStoreNames.contains("live-trasncription")){const M=R.transaction(["live-trasncription"],"readonly").objectStore("live-trasncription"),B=[],H=A.meeting.meetingId,$=M.openCursor();$.onsuccess=()=>{const ce=$.result;ce?(ce.value.mid===H&&B.push(...ce.value.records),ce.continue()):(S(B),R.close())}}else S("")})}):Promise.resolve("")).then(A=>Array.isArray(A)?A.concat(u):[...u]):[...u];var A}getManualCaptionEditor(){const{[Sr]:a}=this,d=a(),{closedCaption:{editorId:u}}=d;let f;if(!u)return{};if(f=((H,$)=>{let ce;if("string"==typeof $)ce=H.participants.xmppAttendeeList.find(he=>he.jid===$);else{if($===Ni.All)return bP;if($===Ni.Panelist)return Cu;ce=H.participants.attendeesList.find(he=>he.userId===$)||H.participants.xmppAttendeeList.find(he=>he.userId===$)}return ce||{}})(d,u),!f)return{};const{userId:A,isHost:S,displayName:T,avatar:R,bCoHost:M,zoomID:B}=f;return{userId:A,isHost:S,displayName:T,avatar:R,bCoHost:M,zoomID:B}}getManualCaptionUrl(){const{[Sr]:a}=this,{meeting:{meetingOptions:d,ccUrl:u}}=a(),{isEnableManualCaptions:f}=d||{};return f?u:(console.warn("you not enable manual caption"),"")}}).prototype,"startLiveTranscription",[Zn],Object.getOwnPropertyDescriptor(jo.prototype,"startLiveTranscription"),jo.prototype),tr(jo.prototype,"setSpeakingLanguage",[Zn],Object.getOwnPropertyDescriptor(jo.prototype,"setSpeakingLanguage"),jo.prototype),tr(jo.prototype,"setTranslationLanguage",[Zn],Object.getOwnPropertyDescriptor(jo.prototype,"setTranslationLanguage"),jo.prototype),tr(jo.prototype,"enableManualCaptioner",[Pa,Zn],Object.getOwnPropertyDescriptor(jo.prototype,"enableManualCaptioner"),jo.prototype),tr(jo.prototype,"disableManualCaptioner",[Pa,Zn],Object.getOwnPropertyDescriptor(jo.prototype,"disableManualCaptioner"),jo.prototype),tr(jo.prototype,"assignManualCaption",[Zn,Pa],Object.getOwnPropertyDescriptor(jo.prototype,"assignManualCaption"),jo.prototype),tr(jo.prototype,"sendCaptionTextManually",[Zn],Object.getOwnPropertyDescriptor(jo.prototype,"sendCaptionTextManually"),jo.prototype),tr(jo.prototype,"getManualCaptionUrl",[Zn,Pa],Object.getOwnPropertyDescriptor(jo.prototype,"getManualCaptionUrl"),jo.prototype),jo);var tS;const SP={chat:{epic:eP,reducer:VA,Client:ZN},recording:{epic:lI,reducer:cI,Client:tg},cmd:{epic:wf,reducer:WR,Client:xb},breakoutRoom:{epic:ZB,reducer:li,Client:EO},liveTranscription:{epic:Fu(hv),reducer:ZI,Client:eT}},nS=ko.createAgent();let HO=(tr((tS=class extends QR{constructor(a){super(a),this.mediaStream=void 0,this[If]=SP}getMediaStream(){return void 0===this.mediaStream&&(this.mediaStream=new ZR(this[As])),this.mediaStream}joinInstant(a,d,u,f,A,S){const{[Sr]:T,[Na]:R}=this,{meeting:{lang:M,meetingStatus:B},socket:{zoomSocketStatus:H}}=T();return d?B!==vs.Joined&&H===mi.Closed?(R(I0({topic:a,password:A||"",userName:u,zlk:d,lang:M,cv:f})),S&&R(Cw(S)),sf(yN.JoinMeeting)):Promise.reject({type:ur,reason:"duplicated operation"}):Promise.reject({type:ur,reason:"invalid  signature"})}removeUser(a){const d=this[As].getState(),{participants:{attendeesList:u}}=d;return u.find(f=>f.userId===a)?(nS.expel(a),wi("REMOVE_USER_PARTICIPANT_ATTRIBUTE",f=>f.some(A=>A.userId===a))):Promise.reject({type:Jr,reason:"no matched user"})}}).prototype,"removeUser",[Id,Zn],Object.getOwnPropertyDescriptor(tS.prototype,"removeUser"),tS.prototype),tS);class tT{constructor(d){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=d,this.mic=null,this.script=d.createScriptProcessor(2048,1,1),this.script.onaudioprocess=u=>{const f=u.inputBuffer.getChannelData(0);let A,S=0;for(A=0;A<f.length;++A)S+=f[A]*f[A];this.instant=Math.sqrt(S/f.length)}}connectToSource(d){console.log("InputMicDetector is listening");try{var u;this.mic=this.context.createMediaStreamSource(d),this.mic.connect(this.script),null===(u=this.script)||void 0===u||u.connect(this.context.destination)}catch(f){console.error(f)}}stop(){var d,u;console.log("Audio Previewer stopped"),null===(d=this.mic)||void 0===d||d.disconnect(),this.mic=null,null===(u=this.script)||void 0===u||u.disconnect(),this.script=null}getMicVolume(){return this.instant}}const GO="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class WO{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(d){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:f,sampleAudioUrl:A=GO,onAnalyseFrequency:S}=d||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),((null===(u=this.sampleAudio)||void 0===u?void 0:u.url)===A&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(A).then(R=>R.arrayBuffer()).then(R=>this.audioCtx.decodeAudioData(R)).then(R=>(this.sampleAudio={url:A,data:R},R))).then(R=>{var M,B,H;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=R,this.sourceNode.loop=!0,f&&null!==(M=this.audioPlayer)&&void 0!==M&&M.setSinkId&&this.audioPlayer.setSinkId(f),S?"function"==typeof AudioContext.prototype.createAnalyser?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=S,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),"running"!==(null===(B=this.audioCtx)||void 0===B?void 0:B.state)&&(null===(H=this.audioCtx)||void 0===H||H.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())});const T=()=>{var R;this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0),null!==(R=this.destinationNode)&&void 0!==R&&R.stream&&(this.destinationNode.stream.getAudioTracks().forEach(M=>{M.stop()}),this.destinationNode=void 0)};return{stop:T,destroy:()=>{var R;T(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(R=this.audioCtx)||void 0===R||R.close(),this.audioCtx=void 0}}}testMicrophone(d){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||"function"!=typeof AudioContext.prototype.createMediaStreamSource||"function"!=typeof(null===(u=navigator.mediaDevices)||void 0===u?void 0:u.getUserMedia))return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:f,speakerId:A,recordAndPlay:S,maxRecordDuration:T,onAnalyseFrequency:R,onStartRecording:M,onStopRecording:B,onStartPlayRecording:H,onStopPlayRecording:$}=d||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const ce=()=>{S&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!f||{deviceId:f}}).then(ue=>{var Se,Qe,He,We;this.mAudioStream=ue,this.mSourceNode=null===(Se=this.audioCtx)||void 0===Se?void 0:Se.createMediaStreamSource(ue),this.audioPlayer.muted=!0,R?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=R,this.initAnalyserNode(),this.analyserNode&&(null===(He=this.mSourceNode)||void 0===He||He.connect(this.analyserNode))):this.analyserCallback=void 0,S&&("function"==typeof MediaRecorder?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=et=>{et.data&&this.recorderChunks.push(et.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),B?.(),this.recorderChunks.length>0){var et;const Lt=new Blob(this.recorderChunks,{type:(null===(et=this.recorderChunks[0])||void 0===et?void 0:et.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(Lt),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,A,H,$),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,M?.(),this.maximumRecordingTimer=window.setTimeout(()=>{ce()},T||1e4)):console.warn("Cannot record the sound due to the browser capability")),"running"!==(null===(Qe=this.audioCtx)||void 0===Qe?void 0:Qe.state)&&(null===(We=this.audioCtx)||void 0===We||We.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())});const he=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(R&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach(ue=>{ue.stop()}),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:he,stopRecording:ce,destroy:()=>{var ue;he(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(ue=this.audioCtx)||void 0===ue||ue.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024),this.analyserNodeBufferDataArray=new Uint8Array(this.analyserNode.frequencyBinCount),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let d=0;for(const f of this.analyserNodeBufferDataArray)d+=f;this.analyserCallback(d/this.analyserNodeBufferDataArray.length)}}playRecording(d,u,f,A){this.recorderPlayer=new Audio,this.recorderPlayer.src=d,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&u&&this.recorderPlayer.setSinkId(u);const S=()=>{A?.(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};this.recorderPlayer.onpause=()=>{S()},this.recorderPlayer.onended=()=>{S()},f?.(),this.recorderPlayer.play().finally(()=>{window.URL.revokeObjectURL(d)})}}class nT{constructor(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=d,this.tester=new WO}start(){var d=this;return L(function*(){if(d.audioStream||d.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const u=yield navigator.mediaDevices.getUserMedia(d.getAudioConstraints());d.audioStream=u,d.isAudioStarted=!0}catch(u){throw u}})()}unmute(){var d=this;return L(function*(){if(!d.audioStream||!d.isAudioStarted)throw new Error("AudioNotStartedError");if(d.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return d.toggleMicIsMuted(!0)})()}mute(){var d=this;return L(function*(){if(!d.audioStream||!d.isAudioStarted)throw new Error("AudioNotStartedError");if(!d.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return d.toggleMicIsMuted(!1)})()}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}stop(){var d=this;return L(function*(){if(!d.audioStream||!d.isAudioStarted)throw new Error("AudioNotStartedError");d.audioStream.getAudioTracks().forEach(u=>u.stop()),d.audioStream=null,d.isAudioStarted=!1})()}toggleMicIsMuted(d){var u=this;return L(function*(){if(d){if(!u.audioContext){const f=window.AudioContext||window.webkitAudioContext;u.audioContext=new f}u.inputMicDetector=new tT(u.audioContext),u.inputMicDetector.connectToSource(u.audioStream)}else u.inputMicDetector&&u.inputMicDetector.stop(),u.inputMicDetector=null;u.isMicUnmuted=d})()}getAudioConstraints(){return{audio:""===this.deviceId||{deviceId:this.deviceId},video:!1}}testSpeaker(d){return this.tester.testSpeaker(d)}testMicrophone(d){return this.tester.testMicrophone(d)}}const rT={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class CP{constructor(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.isVideoStarted=!1,this.videoStream=null,this.deviceId=d}start(d){var u=this;return L(function*(){if(!d)throw new Error("Video DOM element is falsy");if(u.isVideoStarted||u.videoStream)throw new Error("VideoAlreadyStartedError");const f=function(){var A=L(function*(S){if(!S||"OverconstrainedError"!==S.name&&"ConstraintNotSatisfiedError"!==S.name)throw S;console.log("Warning: detected ".concat(S.name," -- trying to fall back to lower aspect ratio"));try{const T=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints(!0));return u.tryPlayVideo(d,T)}catch(T){throw T}});return function(T){return A.apply(this,arguments)}}();try{const A=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints());return u.tryPlayVideo(d,A)}catch(A){return f(A)}})()}stop(){var d=this;return L(function*(){if(!d.videoStream||!d.isVideoStarted)throw new Error("VideoNotStartedError");d.videoStream.getVideoTracks().forEach(u=>u.stop()),d.videoStream=null,d.isVideoStarted=!1})()}getVideoConstraints(){let d=rT;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?d=""===this.deviceId||{deviceId:this.deviceId}:""!==this.deviceId&&(d.deviceId=this.deviceId),{audio:!1,video:d}}tryPlayVideo(d,u){var f=this;return L(function*(){if(!d)throw new Error("Video DOM element is falsy");try{f.videoStream=u,d.srcObject=f.videoStream,yield d.play(),f.isVideoStarted=!0}catch(A){throw A}})()}}class Nd{static createClient(){if(!this.meetingClient){const d=function(){const u=[j_],f=si(oI(),LA(function(){for(var A=arguments.length,S=new Array(A),T=0;T<A;T++)S[T]=arguments[T];return function(R){return function(){var M=R.apply(void 0,arguments),B=function(){throw new Error(ea(15))},H={getState:M.getState,dispatch:function(){return B.apply(void 0,arguments)}},$=S.map(function(ce){return ce(H)});return B=go.apply(void 0,$)(M.dispatch),am(am({},M),{},{dispatch:B})}}}(...u)));return f.asyncReducers={},f.injectReducer=(A,S)=>{void 0===f.asyncReducers[A]&&(f.asyncReducers[A]=S,f.replaceReducer(oI(f.asyncReducers)))},f.injectEpic=A=>{kb.next(A)},j_.run(jR),f}();this.meetingClient=new HO(d)}return this.meetingClient}static destroyClient(){this.meetingClient&&(this.meetingClient.leave().then(()=>{pu(500).subscribe(()=>{H0()})}),this.meetingClient=null)}static checkSystemRequirements(){var d;return{audio:Wo()&&Zv(),video:Wo()&&void 0!==navigator.mediaDevices,screen:Wo()&&"function"==typeof(null===(d=navigator.mediaDevices)||void 0===d?void 0:d.getDisplayMedia)}}static getDevices(d){return d?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(u=>(u.getTracks().forEach(f=>f.stop()),navigator.mediaDevices.enumerateDevices()))}static createLocalAudioTrack(){return new nT(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static createLocalVideoTrack(){return new CP(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static preloadDependentAssets(d){var u;(u=L(function*(f){var A;const S=f||C_,T="".concat(S,"/").concat("js_media.min.js"),R=[],M=[],B="".concat(S,"/");if(Yu()){const{workers:ce,wasms:he}=ca("audio","simd",B);R.push(...ce),M.push(...he)}else{const{workers:ce,wasms:he}=ca("audio","",B);R.push(...ce),M.push(...he)}if(Yu()&&op()){const{workers:ce,wasms:he}=ca(["video","sharing"],"simd,thread",B);R.push(...ce),M.push(...he)}else if(op()){const{workers:ce,wasms:he}=ca(["video","sharing"],"thread",B);R.push(...ce),M.push(...he)}else if(Yu()){const{workers:ce,wasms:he}=ca(["video","sharing"],"simd",B);R.push(...ce),M.push(...he)}else{const{workers:ce,wasms:he}=ca(["video","sharing"],"",B);R.push(...ce),M.push(...he)}const H=[cb(T,"script")];R.forEach(ce=>{H.push(cb(ce,"fetch"))});let $=!1;if(null!==(A=window.indexedDB)&&void 0!==A&&A.databases)try{const ce=yield window.indexedDB.databases(),he='"audio:1613;video:1574"'.split(";").map(ue=>{const[Se,Qe]=ue.split(":");return{["".concat(Se)]:Number(Qe)}}).reduce((ue,Se)=>mn(mn({},ue),Se),{});he&&($=["AUDIO_FILE","VIDEO_FILE"].every(ue=>{const Se="AUDIO_FILE"===ue?he.audio:he.video;return-1!==ce.findIndex(Qe=>Qe.name===ue&&Qe.version===Se)}))}catch{}$||M.forEach(ce=>{H.push(cb(ce,"fetch"))});try{document.head.append(...H)}catch{}}),function(f){return u.apply(this,arguments)})(d)}}Nd.meetingClient=void 0,Nd.VERSION="2.9.0";var yg,KO,gy,Iu,jl,Eg,Bf,iT="https://dmogdx0jrul3u.cloudfront.net/videosdk/".concat("1.5.5","/lib"),zO="https://source.zoom.us/videosdk/".concat("1.5.5","/lib"),YO="https://jssdk.zoomus.cn/videosdk/".concat("1.5.5","/lib"),er=Symbol("stream"),bg=function(){function a(d){D(this,a),this[er]=void 0,this[er]=d}return N(a,[{key:"startAudio",value:function(d){return this[er].startAudio(d)}},{key:"stopAudio",value:function(){return this[er].stopAudio()}},{key:"muteAudio",value:function(d){return this[er].muteAudio(d)}},{key:"unmuteAudio",value:function(d){return this[er].unmuteAudio(d)}},{key:"inviteByPhone",value:function(d,u,f,A){return this[er].dialOut(d,u,f,A)}},{key:"cancelInviteByPhone",value:function(d,u,f){return this[er].cancelDialOut(d,u,f)}},{key:"hangup",value:function(){return this[er].hangup()}},{key:"muteShareAudio",value:function(d){return this[er].muteShareAudio(d)}},{key:"unmuteShareAudio",value:function(d){return this[er].unmuteShareAudio(d)}},{key:"subscribeAudioStatisticData",value:function(d){return this[er].subscribeAudioStatisticData(d)}},{key:"unsubscribeAudioStatisticData",value:function(d){return this[er].unsubscribeAudioStatisticData(d)}},{key:"muteUserAudioLocally",value:function(d){return this[er].muteUserAudioLocally(d)}},{key:"unmuteUserAudioLocally",value:function(d){return this[er].unmuteUserAudioLocally(d)}},{key:"adjustUserAudioVolumeLocally",value:function(d,u){return this[er].adjustUserAudioVolumeLocally(d,u)}},{key:"isAudioMuted",value:function(d){return this[er].isAudioMuted(d)}},{key:"getMicList",value:function(){return this[er].getMicList()}},{key:"getSpeakerList",value:function(){return this[er].getSpeakerList()}},{key:"getActiveMicrophone",value:function(){return this[er].getActiveMicrophone()}},{key:"getActiveSpeaker",value:function(){return this[er].getActiveSpeaker()}},{key:"switchMicrophone",value:function(d){return this[er].switchMicrophone(d)}},{key:"switchSpeaker",value:function(d){return this[er].switchSpeaker(d)}},{key:"isSupportPhoneFeature",value:function(){return this[er].isSupportCallOut()}},{key:"getSupportCountryInfo",value:function(){return this[er].getDialOutCountries()}},{key:"getInviteByPhoneStatus",value:function(){return this[er].getDialOutStatus()}},{key:"getShareAudioStatus",value:function(){return this[er].getShareAudioStatus()}},{key:"isOthersShareAudioMutedLocally",value:function(d){return this[er].isOthersShareAudioMutedLocally(d)}},{key:"getAudioStatisticData",value:function(){return this[er].getAudioStatisticData()}},{key:"isUserAudioMutedLocally",value:function(d){return this[er].isUserAudioMutedLocally(d)}},{key:"getUserVolumeLocally",value:function(d){return this[er].getUserVolumeLocally(d)}},{key:"startVideo",value:function(d){return this[er].startVideo(d)}},{key:"stopVideo",value:function(){return this[er].stopVideo()}},{key:"renderVideo",value:function(d,u,f,A,S,T,R,M){return this[er].renderVideo(d,u,f,A,S,T,R,M)}},{key:"stopRenderVideo",value:function(d,u,f,A){return this[er].stopRenderVideo(d,u,f,A,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"updateVideoCanvasDimension",value:function(d,u,f){return this[er].updateVideoCanvasDimension(d,u,f)}},{key:"adjustRenderedVideoPosition",value:function(d,u,f,A,S,T,R){return this[er].adjustRenderedVideoPosition(d,u,f,A,S,T,R)}},{key:"clearVideoCanvas",value:function(d,u){return this[er].clearVideoCanvas(d,u)}},{key:"mirrorVideo",value:function(d){return this[er].mirrorVideo(d)}},{key:"enableHardwareAcceleration",value:function(d){return this[er].enableHardwareAcceleration(d)}},{key:"previewVirtualBackground",value:function(d,u,f){return this[er].previewVirtualBackground(d,u,f)}},{key:"updateVirtualBackgroundImage",value:function(d,u){return this[er].updateVirtualBackgroundImage(d,u)}},{key:"stopPreviewVirtualBackground",value:function(){return this[er].stopPreviewVirtualBackground()}},{key:"switchCamera",value:function(d){return this[er].switchCamera(d)}},{key:"subscribeVideoStatisticData",value:function(d){return this[er].subscribeVideoStatisticData(d)}},{key:"unsubscribeVideoStatisticData",value:function(d){return this[er].unsubscribeVideoStatisticData(d)}},{key:"isCapturingVideo",value:function(){return this[er].isCapturingVideo()}},{key:"isCameraTaken",value:function(){return this[er].isCameraTaken()}},{key:"getActiveVideoId",value:function(){return this[er].getActiveVideoId()}},{key:"getActiveCamera",value:function(){return this[er].getActiveCamera()}},{key:"getCameraList",value:function(){return this[er].getCameraList()}},{key:"isCaptureForbidden",value:function(){return this[er].isCaptureForbidden()}},{key:"getVideoMaxQuality",value:function(){return this[er].getVideoMaxQuality()}},{key:"getReceivedVideoDimension",value:function(){return this[er].getReceivedVideoDimension()}},{key:"isSupportMultipleVideos",value:function(){return this[er].isSupportMultipleVideos()}},{key:"isSupportHDVideo",value:function(){return this[er].isSupportHDVideo()}},{key:"isSupportVirtualBackground",value:function(){return this[er].isSupportVirtualBackground()}},{key:"getVirtualbackgroundStatus",value:function(){return this[er].getVirtualbackgroundStatus()}},{key:"getVideoStatisticData",value:function(){return this[er].getVideoStatisticData()}},{key:"startShareView",value:function(d,u){return this[er].startShareView(d,u)}},{key:"stopShareView",value:function(){return this[er].stopShareView()}},{key:"switchShareView",value:function(d){return this[er].switchShareView(d)}},{key:"startShareScreen",value:function(d,u){return void 0!==u?.broadcastToSubsession&&Object.assign(u||{},{broadcastToBreakoutRoom:u?.broadcastToSubsession}),this[er].startShareScreen(d,u)}},{key:"pauseShareScreen",value:function(){return this[er].pauseShareScreen()}},{key:"resumeShareScreen",value:function(){return this[er].resumeShareScreen()}},{key:"stopShareScreen",value:function(){return this[er].stopShareScreen()}},{key:"lockShare",value:function(d){return this[er].lockShare(d)}},{key:"updateSharingCanvasDimension",value:function(d,u){return this[er].updateSharingCanvasDimension(d,u)}},{key:"switchSharingSecondaryCamera",value:function(d){return this[er].switchSharingSecondaryCamera(d)}},{key:"setSharePrivilege",value:function(d){return this[er].setSharePrivilege(d)}},{key:"shareToSubsession",value:function(){return this[er].shareToBreakoutRoom()}},{key:"stopShareToSubsession",value:function(){return this[er].stopShareToBreakoutRoom()}},{key:"isShareLocked",value:function(){return this[er].isShareLocked()}},{key:"getSharePrivilege",value:function(){return this[er].getSharePrivilege()}},{key:"getActiveShareUserId",value:function(){return this[er].getActiveShareUserId()}},{key:"getShareStatus",value:function(){return this[er].getShareStatus()}},{key:"getShareUserList",value:function(){return this[er].getShareUserList()}}]),a}(),_y=["isCoHost"],ol=Symbol("chat"),oT=function(){function a(d){D(this,a),this[ol]=void 0,this[ol]=d}return N(a,[{key:"send",value:function(d,u){return this[ol].send(d,u)}},{key:"sendToAll",value:function(d){return this[ol].send(d,Ni.All)}},{key:"setPrivilege",value:function(d){return this[ol].setPrivilege(d)}},{key:"getPrivilege",value:function(){return this[ol].getPrivilege()}},{key:"getReceivers",value:function(){return this[ol].getReceivers().map(function(d){return Q({isManager:d.isCoHost},J(d,_y))})}},{key:"getHistory",value:function(){return this[ol].getHistory()}}]),a}(),Ch=Symbol("recording"),sT=function(){function a(d){D(this,a),this[Ch]=void 0,this[Ch]=d}return N(a,[{key:"canStartRecording",value:function(){return this[Ch].isRecordingEnabled()}},{key:"startCloudRecording",value:function(){return this[Ch].startRecording()}},{key:"pauseCloudRecording",value:function(){return this[Ch].pauseRecording()}},{key:"resumeCloudRecording",value:function(){return this[Ch].startRecording()}},{key:"stopCloudRecording",value:function(){return this[Ch].stopRecording()}},{key:"getCloudRecordingStatus",value:function(){return this[Ch].getRecordingStatus()}}]),a}(),rS=Symbol("command"),pv=function(){function a(d){D(this,a),this[rS]=void 0,this[rS]=d}return N(a,[{key:"send",value:function(d,u){return this[rS].send(d,u)}}]),a}(),qO=["isInRoom"],JO=["isAutoJoinRoom"],la=Symbol("breakout-room"),Ff=function(){function a(d){D(this,a),this[la]=void 0,this[la]=d}return N(a,[{key:"createSubsessions",value:function(d,u){return this[la].createRooms(d,u).then(function(f){return f.map(function(A){return{subsessionId:A.roomId,subsessionName:A.name,userList:A.attendeeList}})})}},{key:"openSubsessions",value:function(d,u){var f=u?Q(Q({},u),{},{isAutoJoinRoom:u.isAutoJoinSubsession}):void 0,A=d.map(function(S){return{roomId:S.subsessionId,name:S.subsessionName,attendeeList:S.userList}});return this[la].openRooms(A,f)}},{key:"joinSubsession",value:function(d){return this[la].joinRoom(d)}},{key:"leaveSubsession",value:function(){return this[la].leaveRoom()}},{key:"askForHelp",value:function(){return this[la].askForHelp()}},{key:"postponeHelping",value:function(d){return this[la].postponeHelping(d)}},{key:"broadcast",value:function(d){return this[la].broadcast(d)}},{key:"assignUserToSubsession",value:function(d,u){return this[la].assignUserToRoom(d,u)}},{key:"moveUserToSubsession",value:function(d,u){return this[la].moveUserToRoom(d,u)}},{key:"closeAllSubsessions",value:function(){return this[la].closeRoom()}},{key:"getUnassignedUserList",value:function(){return this[la].getUnassignedAttendeeList()}},{key:"getSubsessionList",value:function(){return this[la].getRoomList().map(function(d){return{subsessionId:d.roomId,subsessionName:d.name,userList:d.attendeeList.map(function(u){return Q({isInSubsession:u.isInRoom},J(u,qO))})}})}},{key:"getUserStatus",value:function(){return this[la].getAttendeeStatus()}},{key:"getSubsessionStatus",value:function(){return this[la].getRoomStatus()}},{key:"getCurrentSubsession",value:function(){var d=this[la].getCurrentRoom();return{userStatus:d.attendeeStatus,subsessionName:d.name,subsessionId:d.roomId}}},{key:"getSubsessionOptions",value:function(){var d=this[la].getRoomOptions();return Q({isAutoJoinSubsession:d.isAutoJoinRoom},J(d,JO))}}]),a}(),sl=Symbol("liveTranscription"),XO=function(){function a(d){D(this,a),this[sl]=void 0,this[sl]=d}return N(a,[{key:"startLiveTranscription",value:function(){return this[sl].startLiveTranscription()}},{key:"setSpeakingLanguage",value:function(d){return this[sl].setSpeakingLanguage(d)}},{key:"setTranslationLanguage",value:function(d){return this[sl].setTranslationLanguage(d)}},{key:"getLiveTranscriptionStatus",value:function(){return this[sl].getLiveTranscriptionStatus()}},{key:"getCurrentTranscriptionLanguage",value:function(){return this[sl].getCurrentTranscriptionLanguage()}},{key:"getCurrentTranslationLanguage",value:function(){return this[sl].getCurrentTranslationLanguage()}},{key:"getLatestTranscription",value:function(){return this[sl].getLatestTranscription()}},{key:"getLatestTranslation",value:function(){return this[sl].getLatestTranslation()}},{key:"getFullTranscriptionHistory",value:function(){return this[sl].getFullTranscriptionHistory()}}]),a}(),fv=function(a){return"string"==typeof a&&a.length>0},IP=function(a){var d="";switch(a){case"Global":d=zO;break;case"CN":d=YO;break;case"CDN":d=iT;break;default:d=a}return d},$O=["roomName"],ZO=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:function(a){var d=a.roomName,u=J(a,$O);return d?Q(Q({},u),{},{subsessionName:d}):a}},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:function(a){return{subsessionId:a.roomId,subsessionName:a.name}}},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:function(a){return{userId:a.userId,displayName:a.displayName,subsessionId:a.roomId,subsessionName:a.roomName}}},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"}],uo=Symbol("Client"),vy=new WeakMap,eD=function(){function a(){D(this,a),this[uo]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this[uo]=Nd.createClient(),vy.set(this,new Map)}return N(a,[{key:"init",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",f=arguments.length>2?arguments[2]:void 0,A=IP(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global");return!1===window.isSecureContext&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),this[uo].init("","",{language:d,dependentAssets:A,constraints:Q(Q({},Nd.checkSystemRequirements()),{},{screen:"object"===(typeof WebAssembly>"u"?"undefined":U(WebAssembly))&&"function"==typeof Worker}),additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription"],webEndpoint:f?.webEndpoint||"zoom.us",skipJsMedia:f?.skipJsMedia,enforceMultipleVideos:f?.enforceMultipleVideos})}},{key:"join",value:function(d,u,f,A,S){return fv(d)&&fv(u)&&fv(f)?d.length>200?Promise.reject({type:"INVALID_PARAMETERS",reason:"the max length of topic is 200"}):f.length>200?Promise.reject({type:"INVALID_PARAMETERS",reason:"the max length of username is 200"}):!A||fv(A)&&!void/^([!@#$%^&*?=]|\w|\d){1,10}$/gi.test(A)?this[uo].joinInstant(d,u,f,"1.5.5",A,S):Promise.reject({type:"INVALID_PARAMETERS",reason:"Password can contain English characters, numbers and special characters like !@#$%^&*?=, and the max length of password is 10"}):Promise.reject({type:"INVALID_PARAMETERS",reason:"topic, token and userName must be string and required"})}},{key:"leave",value:function(){var d;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(null===(d=vy.get(this))||void 0===d||d.clear(),this[uo].end()):this[uo].leave()}},{key:"getSessionInfo",value:function(){var d=this[uo].getMeetingInfo();return{isInMeeting:d.isInMeeting||!1,password:d.password||"",topic:d.topic,userName:d.userName,userId:d.userId,sessionId:d.meetingId}}},{key:"on",value:function(d,u){var f=ZO.find(function(B){return B.event===d});if(f){var A=f.originalEvent,S=f.payloadTransform;if(S){var T=function(B){var H=S(B);u(H)};this[uo].on(A,T);var R=vy.get(this);R&&(R.has(d)||R.set(d,[]),R.get(d)?.push({originalCb:u,newCb:T}))}else this[uo].on(A,u)}else this[uo].on(d,u)}},{key:"off",value:function(d,u){var f=ZO.find(function(B){return B.event===d});if(f){var A=f.originalEvent;if(f.payloadTransform){var S=vy.get(this);if(S){var T=S.get(d),R=T?.find(function(B){return B.originalCb===u});if(R&&T){this[uo].off(A,R.newCb);var M=T?.filter(function(B){return B.originalCb!==u});S.set(d,M)}}}else this[uo].off(A,u)}else this[uo].off(d,u)}},{key:"getMediaStream",value:function(){return this.stream||(this.stream=new bg(this[uo].getMediaStream())),this.stream}},{key:"getChatClient",value:function(){return this.chat||(this.chat=new oT(this[uo].getFeatureModule("chat"))),this.chat}},{key:"getRecordingClient",value:function(){return this.recording||(this.recording=new sT(this[uo].getFeatureModule("recording"))),this.recording}},{key:"getCommandClient",value:function(){return this.command||(this.command=new pv(this[uo].getFeatureModule("cmd"))),this.command}},{key:"getSubsessionClient",value:function(){return this.subsession||(this.subsession=new Ff(this[uo].getFeatureModule("breakoutRoom"))),this.subsession}},{key:"getLiveTranscriptionClient",value:function(){return this.liveTranscription||(this.liveTranscription=new XO(this[uo].getFeatureModule("liveTranscription"))),this.liveTranscription}},{key:"coverntUser",value:function(d){return{userId:d.userId,avatar:d.avatar||"",displayName:d.displayName,isHost:d.isHost,isManager:d.isCoHost||!1,audio:d.audio,muted:d.muted,bVideoOn:d.bVideoOn,sharerOn:d.sharerOn,sharerPause:d.sharerPause}}},{key:"getCurrentUserInfo",value:function(){var d=this[uo].getCurrentUserInfo();if(d)return this.coverntUser(d)}},{key:"getUser",value:function(d){var u=this[uo].getParticipantsList().find(function(f){return f.userId===d});if(u)return this.coverntUser(u)}},{key:"getAllUser",value:function(){var d=this;return this[uo].getParticipantsList().map(function(u){return d.coverntUser(u)})}},{key:"changeName",value:function(d,u){return this[uo].changeName(d,u)}},{key:"makeHost",value:function(d){return this[uo].makeHost(d)}},{key:"removeUser",value:function(d){return this[uo].removeUser(d)}},{key:"isHost",value:function(){return this[uo].isHost()}},{key:"getSessionHost",value:function(){var d=this[uo].getMeetingHost();return d?this.coverntUser(d):void 0}},{key:"makeManager",value:function(d){return this[uo].makeCoHost(d)}},{key:"revokeManager",value:function(d){return this[uo].revokeCoHost(d)}},{key:"isManager",value:function(){return this[uo].isCoHost()}}]),a}(),Uf=function(){function a(){D(this,a)}return N(a,null,[{key:"createClient",value:function(){return this.videoClient||(this.videoClient=new eD),this.videoClient}},{key:"destroyClient",value:function(){this.videoClient&&(this.videoClient.leave(),this.videoClient=null)}},{key:"checkSystemRequirements",value:function(){return Nd.checkSystemRequirements()}},{key:"getDevices",value:function(d){return Nd.getDevices(d)}},{key:"createLocalAudioTrack",value:function(){return Nd.createLocalAudioTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"createLocalVideoTrack",value:function(){return Nd.createLocalVideoTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"preloadDependentAssets",value:function(){Nd.preloadDependentAssets(IP(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global"))}}]),a}();Uf.videoClient=void 0,Uf.VERSION="1.5.5",W.ChatPrivilege=void 0,(yg=W.ChatPrivilege||(W.ChatPrivilege={}))[yg.All=1]="All",yg[yg.NoOne=4]="NoOne",yg[yg.EveryonePublicly=5]="EveryonePublicly",W.ChatMsgType=void 0,(KO=W.ChatMsgType||(W.ChatMsgType={}))[KO.All=0]="All",W.SubsessionAllocationPattern=void 0,(gy=W.SubsessionAllocationPattern||(W.SubsessionAllocationPattern={}))[gy.Automatically=af.Automatically]="Automatically",gy[gy.Manually=af.Manually]="Manually",W.SubsessionUserStatus=void 0,(Iu=W.SubsessionUserStatus||(W.SubsessionUserStatus={}))[Iu.Initial=lr.Initial]="Initial",Iu[Iu.Invited=lr.Invited]="Invited",Iu[Iu.Joining=lr.Joining]="Joining",Iu[Iu.InSubsession=lr.InRoom]="InSubsession",Iu[Iu.Leaving=lr.Leaving]="Leaving",Iu[Iu.MainSession=lr.MainSession]="MainSession",W.SubsessionStatus=void 0,(jl=W.SubsessionStatus||(W.SubsessionStatus={}))[jl.NotStarted=Nr.NotStarted]="NotStarted",jl[jl.InProgress=Nr.InProgress]="InProgress",jl[jl.Closing=Nr.Closing]="Closing",jl[jl.Closed=Nr.Closed]="Closed",W.ReconnectReason=void 0,(Eg=W.ReconnectReason||(W.ReconnectReason={}))[Eg.Failover=aa.Failover]="Failover",Eg[Eg.JoinSubsession=aa.JoinBreakoutRoom]="JoinSubsession",Eg[Eg.MoveToSubsession=aa.MoveToBreakoutRoom]="MoveToSubsession",Eg[Eg.BackToMainSession=aa.BackToMainSession]="BackToMainSession",W.SharePrivilege=void 0,(Bf=W.SharePrivilege||(W.SharePrivilege={}))[Bf.Unlocked=Vu.HostGrab]="Unlocked",Bf[Bf.Locked=Vu.OnlyHost]="Locked",Bf[Bf.MultipleShare=Vu.MultipleShare]="MultipleShare",W.default=Uf,Object.defineProperty(W,"__esModule",{value:!0})}(Oe)},3890:function(Ie,Oe,Y){var L=Y(7156).default;Ie.exports=function(){"use strict";var W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ne=function(n){return n&&n.Math==Math&&n},Q=ne("object"==typeof globalThis&&globalThis)||ne("object"==typeof window&&window)||ne("object"==typeof self&&self)||ne("object"==typeof W&&W)||function(){return this}()||Function("return this")(),U={},D=function(n){try{return!!n()}catch{return!0}},O=!D(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),N=!D(function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}),J=Function.prototype.call,ie=N?J.bind(J):function(){return J.apply(J,arguments)},te={},le={}.propertyIsEnumerable,X=Object.getOwnPropertyDescriptor,z=X&&!le.call({1:2},1);te.f=z?function(n){var i=X(this,n);return!!i&&i.enumerable}:le;var K,se,ve=function(n,i){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:i}},De=N,pe=Function.prototype,Ae=pe.call,ge=De&&pe.bind.bind(Ae,Ae),re=De?function(n){return n&&ge(n)}:function(n){return n&&function(){return Ae.apply(n,arguments)}},de=re,we=de({}.toString),Fe=de("".slice),xe=function(n){return Fe(we(n),8,-1)},ze=D,Ze=xe,je=Q.Object,xt=re("".split),Wt=ze(function(){return!je("z").propertyIsEnumerable(0)})?function(n){return"String"==Ze(n)?xt(n,""):je(n)}:je,ht=Q.TypeError,qe=function(n){if(null==n)throw ht("Can't call method on "+n);return n},Ue=Wt,Ye=qe,Re=function(n){return Ue(Ye(n))},tt=function(n){return"function"==typeof n},Dt=tt,zt=function(n){return"object"==typeof n?null!==n:Dt(n)},kt=Q,mt=tt,zn=function(n){return mt(n)?n:void 0},qn=function(n,i){return arguments.length<2?zn(kt[n]):kt[n]&&kt[n][i]},Lr=re({}.isPrototypeOf),jr=qn("navigator","userAgent")||"",wr=jr,Pn=Q.process,Si=Q.Deno,ki=Pn&&Pn.versions||Si&&Si.version,ho=ki&&ki.v8;ho&&(se=(K=ho.split("."))[0]>0&&K[0]<4?1:+(K[0]+K[1])),!se&&wr&&(!(K=wr.match(/Edge\/(\d+)/))||K[1]>=74)&&(K=wr.match(/Chrome\/(\d+)/))&&(se=+K[1]);var po=se,At=po,$t=!!Object.getOwnPropertySymbols&&!D(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&At&&At<41}),Xe=$t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Me=qn,st=tt,kn=Lr,Xi=Q.Object,Zo=Xe?function(n){return"symbol"==typeof n}:function(n){var i=Me("Symbol");return st(i)&&kn(i.prototype,Xi(n))},es=Q.String,fo=function(n){try{return es(n)}catch{return"Object"}},Ss=tt,oo=fo,Pc=Q.TypeError,jn=function(n){if(Ss(n))return n;throw Pc(oo(n)+" is not a function")},vn=jn,Ne=function(n,i){var o=n[i];return null==o?void 0:vn(o)},dt=ie,Zt=tt,en=zt,gn=Q.TypeError,pi={exports:{}},bo=Q,Cs=Object.defineProperty,ts=function(n,i){try{Cs(bo,n,{value:i,configurable:!0,writable:!0})}catch{bo[n]=i}return i},Yn="__core-js_shared__",Rr=Q[Yn]||ts(Yn,{}),$i=Rr;(pi.exports=function(n,i){return $i[n]||($i[n]=void 0!==i?i:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var hu=qe,nr=Q.Object,Hp=function(n){return nr(hu(n))},nE=Hp,$2=re({}.hasOwnProperty),Ka=Object.hasOwn||function(n,i){return $2(nE(n),i)},Bv=re,Fv=0,Uv=Math.random(),Ds=Bv(1..toString),Yd=function(n){return"Symbol("+(void 0===n?"":n)+")_"+Ds(++Fv+Uv,36)},Vv=Q,uw=Ka,Zs=Yd,lw=$t,Un=Xe,Yg=(0,pi.exports)("wks"),sm=Vv.Symbol,v0=sm&&sm.for,hc=Un?sm:sm&&sm.withoutSetter||Zs,Ro=function(n){if(!uw(Yg,n)||!lw&&"string"!=typeof Yg[n]){var i="Symbol."+n;Yg[n]=lw&&uw(sm,n)?sm[n]:Un&&v0?v0(i):hc(i)}return Yg[n]},yl=ie,pu=zt,rE=Zo,Oo=Ne,Vh=Q.TypeError,tr=Ro("toPrimitive"),Qo=function(n,i){if(!pu(n)||rE(n))return n;var o,c=Oo(n,tr);if(c){if(void 0===i&&(i="default"),o=yl(c,n,i),!pu(o)||rE(o))return o;throw Vh("Can't convert object to primitive value")}return void 0===i&&(i="number"),function(n,i){var o,c;if("string"===i&&Zt(o=n.toString)&&!en(c=dt(o,n))||Zt(o=n.valueOf)&&!en(c=dt(o,n))||"string"!==i&&Zt(o=n.toString)&&!en(c=dt(o,n)))return c;throw gn("Can't convert object to primitive value")}(n,i)},Wr=Zo,am=function(n){var i=Qo(n,"string");return Wr(i)?i:i+""},ea=zt,A0=Q.document,qg=ea(A0)&&ea(A0.createElement),_n=function(n){return qg?A0.createElement(n):{}},iE=_n,si=!O&&!D(function(){return 7!=Object.defineProperty(iE("div"),"a",{get:function(){return 7}}).a}),oE=ie,BB=te,Z2=ve,jv=Re,ta=am,FB=Ka,eN=si,tN=Object.getOwnPropertyDescriptor;U.f=O?tN:function(n,i){if(n=jv(n),i=ta(i),eN)try{return tN(n,i)}catch{}if(FB(n,i))return Z2(!oE(BB.f,n,i),n[i])};var ii={},nN=O&&D(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),UB=zt,VB=Q.String,pc=Q.TypeError,Mc=function(n){if(UB(n))return n;throw pc(VB(n)+" is not an object")},jB=si,io=Mc,ai=am,oN=Q.TypeError,dw=Object.defineProperty,Ar=Object.getOwnPropertyDescriptor;ii.f=O?nN?function(n,i,o){if(io(n),i=ai(i),io(o),"function"==typeof n&&"prototype"===i&&"value"in o&&"writable"in o&&!o.writable){var c=Ar(n,i);c&&c.writable&&(n[i]=o.value,o={configurable:"configurable"in o?o.configurable:c.configurable,enumerable:"enumerable"in o?o.enumerable:c.enumerable,writable:!1})}return dw(n,i,o)}:dw:function(n,i,o){if(io(n),i=ai(i),io(o),jB)try{return dw(n,i,o)}catch{}if("get"in o||"set"in o)throw oN("Accessors not supported");return"value"in o&&(n[i]=o.value),n};var QB=ii,Ho=ve,bl=O?function(n,i,o){return QB.f(n,i,Ho(1,o))}:function(n,i,o){return n[i]=o,n},id={exports:{}},Jg=tt,Xg=Rr,y0=re(Function.toString);Jg(Xg.inspectSource)||(Xg.inspectSource=function(n){return y0(n)});var dr,Qv,qr,$g=Xg.inspectSource,xu=$g,Hn=Q.WeakMap,HB=tt(Hn)&&/native code/.test(xu(Hn)),aN=Yd,Vi=(0,pi.exports)("keys"),E0=function(n){return Vi[n]||(Vi[n]=aN(n))},Wp={},Zg=re,aE=zt,e_=bl,qd=Ka,zp=E0,cm=Wp,Xt="Object already initialized",Do=Q.TypeError;if(HB||Rr.state){var od=Rr.state||(Rr.state=new(0,Q.WeakMap)),cE=Zg(od.get),t_=Zg(od.has),cN=Zg(od.set);dr=function(n,i){if(t_(od,n))throw new Do(Xt);return i.facade=n,cN(od,n,i),i},Qv=function(n){return cE(od,n)||{}},qr=function(n){return t_(od,n)}}else{var n_=zp("state");cm[n_]=!0,dr=function(n,i){if(qd(n,n_))throw new Do(Xt);return i.facade=n,e_(n,n_,i),i},Qv=function(n){return qd(n,n_)?n[n_]:{}},qr=function(n){return qd(n,n_)}}var Sl={set:dr,get:Qv,has:qr,enforce:function(n){return qr(n)?Qv(n):dr(n,{})},getterFor:function(n){return function(i){var o;if(!aE(i)||(o=Qv(i)).type!==n)throw Do("Incompatible receiver, "+n+" required");return o}}},Jd=O,uN=Function.prototype,lN=Jd&&Object.getOwnPropertyDescriptor,fu=Ka(uN,"name"),Lu={EXISTS:fu,PROPER:fu&&"something"===function(){}.name,CONFIGURABLE:fu&&(!Jd||Jd&&lN(uN,"name").configurable)},Zi=Q,um=tt,uE=Ka,Gv=bl,hw=ts,Cl=$g,Wv=Lu.CONFIGURABLE,xc=Sl.get,Sa=Sl.enforce,pw=String(String).split("String");(id.exports=function(n,i,o,c){var h,g=!!c&&!!c.unsafe,p=!!c&&!!c.enumerable,v=!!c&&!!c.noTargetGet,_=c&&void 0!==c.name?c.name:i;um(o)&&("Symbol("===String(_).slice(0,7)&&(_="["+String(_).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!uE(o,"name")||Wv&&o.name!==_)&&Gv(o,"name",_),(h=Sa(o)).source||(h.source=pw.join("string"==typeof _?_:""))),n!==Zi?(g?!v&&n[i]&&(p=!0):delete n[i],p?n[i]=o:Gv(n,i,o)):p?n[i]=o:hw(i,o)})(Function.prototype,"toString",function(){return um(this)&&xc(this).source||Cl(this)});var lm={},fw=Math.ceil,Gi=Math.floor,na=function(n){var i=+n;return i!=i||0===i?0:(i>0?Gi:fw)(i)},Kv=na,gr=Math.max,ra=Math.min,eo=function(n,i){var o=Kv(n);return o<0?gr(o+i,0):ra(o,i)},Is=na,Lc=Math.min,ad=function(n){return n>0?Lc(Is(n),9007199254740991):0},Bc=ad,Ca=function(n){return Bc(n.length)},or=Re,fi=eo,_s=Ca,Bu=function(n){return function(i,o,c){var h,g=or(i),p=_s(g),v=fi(c,p);if(n&&o!=o){for(;p>v;)if((h=g[v++])!=h)return!0}else for(;p>v;v++)if((n||v in g)&&g[v]===o)return n||v||0;return!n&&-1}},Xd={includes:Bu(!0),indexOf:Bu(!1)},ks=Ka,dm=Re,ls=Xd.indexOf,zv=Wp,hm=re([].push),Ei=function(n,i){var o,c=dm(n),h=0,g=[];for(o in c)!ks(zv,o)&&ks(c,o)&&hm(g,o);for(;i.length>h;)ks(c,o=i[h++])&&(~ls(g,o)||hm(g,o));return g},pm=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],fm=Ei,lE=pm.concat("length","prototype");lm.f=Object.getOwnPropertyNames||function(n){return fm(n,lE)};var $d={};$d.f=Object.getOwnPropertySymbols;var za=qn,r_=lm,mm=$d,Zd=Mc,i_=re([].concat),Fu=za("Reflect","ownKeys")||function(n){var i=r_.f(Zd(n)),o=mm.f;return o?i_(i,o(n)):i},Mn=Ka,o_=Fu,jh=U,cd=ii,Ci=function(n,i,o){for(var c=o_(i),h=cd.f,g=jh.f,p=0;p<c.length;p++){var v=c[p];Mn(n,v)||o&&Mn(o,v)||h(n,v,g(i,v))}},s_=D,Qh=tt,Bo=/#|\.prototype\./,Uu=function(n,i){var o=Il[Fc(n)];return o==hE||o!=dE&&(Qh(i)?s_(i):!!i)},Fc=Uu.normalize=function(n){return String(n).replace(Bo,".").toLowerCase()},Il=Uu.data={},dE=Uu.NATIVE="N",hE=Uu.POLYFILL="P",eh=Uu,mu=Q,S0=U.f,mw=bl,pE=id.exports,fE=ts,GB=Ci,dN=eh,fc=function(n,i){var o,c,h,g,p,v=n.target,_=n.global,y=n.stat;if(o=_?mu:y?mu[v]||fE(v,{}):(mu[v]||{}).prototype)for(c in i){if(g=i[c],h=n.noTargetGet?(p=S0(o,c))&&p.value:o[c],!dN(_?c:v+(y?".":"#")+c,n.forced)&&void 0!==h){if(typeof g==typeof h)continue;GB(g,h)}(n.sham||h&&h.sham)&&mw(g,"sham",!0),pE(o,c,g,n)}},mE=Q.Promise,Hs=id.exports,Hh=function(n,i,o){for(var c in i)Hs(n,c,i[c],o);return n},WB=tt,Tl=Q.String,hN=Q.TypeError,_w=re,pN=Mc,Yp=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,o={};try{(n=_w(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),i=o instanceof Array}catch{}return function(c,h){return pN(c),function(n){if("object"==typeof n||WB(n))return n;throw hN("Can't set "+Tl(n)+" as a prototype")}(h),i?n(c,h):c.__proto__=h,c}}():void 0),C0=ii.f,KB=Ka,I0=Ro("toStringTag"),Yv=function(n,i,o){n&&!o&&(n=n.prototype),n&&!KB(n,I0)&&C0(n,I0,{configurable:!0,value:i})},ia=qn,qv=ii,Ya=O,gE=Ro("species"),gm=function(n){var i=ia(n);Ya&&i&&!i[gE]&&(0,qv.f)(i,gE,{configurable:!0,get:function(){return this}})},fN=Lr,T0=Q.TypeError,a_=function(n,i){if(fN(i,n))return n;throw T0("Incorrect invocation")},mN=jn,w0=N,Aw=re(re.bind),oa=function(n,i){return mN(n),void 0===i?n:w0?Aw(n,i):function(){return n.apply(i,arguments)}},Gh={},R0=Gh,_E=Ro("iterator"),yw=Array.prototype,c_=function(n){return void 0!==n&&(R0.Array===n||yw[_E]===n)},sa={};sa[Ro("toStringTag")]="z";var Ew=Q,gN="[object z]"===String(sa),Jv=tt,qa=xe,bw=Ro("toStringTag"),Sw=Ew.Object,_m="Arguments"==qa(function(){return arguments}()),Ia=gN?qa:function(n){var i,o,c;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(o=function(h,g){try{return h[g]}catch{}}(i=Sw(n),bw))?o:_m?qa(i):"Object"==(c=qa(i))&&Jv(i.callee)?"Arguments":c},_N=Ia,Wh=Ne,Cw=Gh,Kh=Ro("iterator"),Xv=function(n){if(null!=n)return Wh(n,Kh)||Wh(n,"@@iterator")||Cw[_N(n)]},vE=ie,ci=jn,O0=Mc,vN=fo,aa=Xv,$v=Q.TypeError,D0=function(n,i){var o=arguments.length<2?aa(n):i;if(ci(o))return O0(vE(o,n));throw $v(vN(n)+" is not iterable")},vs=ie,vm=Mc,ji=Ne,yn=oa,cr=ie,Ta=Mc,wa=fo,Wo=c_,Zv=Ca,Am=Lr,ud=D0,ym=Xv,eA=function(n,i,o){var c,h;vm(n);try{if(!(c=ji(n,"return"))){if("throw"===i)throw o;return o}c=vs(c,n)}catch(g){h=!0,c=g}if("throw"===i)throw o;if(h)throw c;return vm(c),o},AN=Q.TypeError,ld=function(n,i){this.stopped=n,this.result=i},k0=ld.prototype,tA=Ro("iterator"),Ra=!1;try{var dd=0,Em={next:function(){return{done:!!dd++}},return:function(){Ra=!0}};Em[tA]=function(){return this},Array.from(Em,function(){throw 2})}catch{}var qp=function(n,i){if(!i&&!Ra)return!1;var o=!1;try{var c={};c[tA]=function(){return{next:function(){return{done:o=!0}}}},n(c)}catch{}return o},Fo=re,bm=D,gu=tt,ds=Ia,N0=$g,Jp=function(){},Xp=[],P0=qn("Reflect","construct"),mc=/^\s*(?:class|function)\b/,M0=Fo(mc.exec),Ts=!mc.exec(Jp),gc=function(n){if(!gu(n))return!1;try{return P0(Jp,Xp,n),!0}catch{return!1}},nA=function(n){if(!gu(n))return!1;switch(ds(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ts||!!M0(mc,N0(n))}catch{return!0}};nA.sham=!0;var Sm,to,hd,Ni,Cm=!P0||bm(function(){var n;return gc(gc.call)||!gc(Object)||!gc(function(){n=!0})||n})?nA:gc,rA=Cm,Uc=fo,Im=Q.TypeError,Uo=function(n){if(rA(n))return n;throw Im(Uc(n)+" is not a constructor")},Tm=Mc,iA=Uo,$p=Ro("species"),x0=function(n,i){var o,c=Tm(n).constructor;return void 0===c||null==(o=Tm(c)[$p])?i:iA(o)},L0=Function.prototype,ko=L0.apply,oA=L0.call,Zp="object"==typeof Reflect&&Reflect.apply||(N?oA.bind(ko):function(){return oA.apply(ko,arguments)}),Ja=qn("document","documentElement"),wm=re([].slice),_o=/(?:ipad|iphone|ipod).*applewebkit/i.test(jr),Ko="process"==xe(Q.process),No=Q,yN=Zp,EN=oa,ef=tt,B0=Ka,AE=D,Iw=Ja,_c=wm,yE=_n,F0=_o,Dr=Ko,Xa=No.setImmediate,pd=No.clearImmediate,Tw=No.process,EE=No.Dispatch,bE=No.Function,Vu=No.MessageChannel,zh=No.String,u_=0,Yh={};try{Sm=No.location}catch{}var sA=function(n){if(B0(Yh,n)){var i=Yh[n];delete Yh[n],i()}},l_=function(n){return function(){sA(n)}},V0=function(n){sA(n.data)},_u=function(n){No.postMessage(zh(n),Sm.protocol+"//"+Sm.host)};Xa&&pd||(Xa=function(n){var i=_c(arguments,1);return Yh[++u_]=function(){yN(ef(n)?n:bE(n),void 0,i)},to(u_),u_},pd=function(n){delete Yh[n]},Dr?to=function(n){Tw.nextTick(l_(n))}:EE&&EE.now?to=function(n){EE.now(l_(n))}:Vu&&!F0?(Ni=(hd=new Vu).port2,hd.port1.onmessage=V0,to=EN(Ni.postMessage,Ni)):No.addEventListener&&ef(No.postMessage)&&!No.importScripts&&Sm&&"file:"!==Sm.protocol&&!AE(_u)?(to=_u,No.addEventListener("message",V0,!1)):to="onreadystatechange"in yE("script")?function(n){Iw.appendChild(yE("script")).onreadystatechange=function(){Iw.removeChild(this),sA(n)}}:function(n){setTimeout(l_(n),0)});var tf,ju,Rm,Om,Oa,aA,Qu,Dm,j0={set:Xa,clear:pd},Hu=Q,ww=/ipad|iphone|ipod/i.test(jr)&&void 0!==Hu.Pebble,Rw=/web0s(?!.*chrome)/i.test(jr),fd=Q,nf=oa,km=j0.set,Ow=_o,ur=ww,Jr=Rw,vo=Ko,SE=fd.MutationObserver||fd.WebKitMutationObserver,cA=fd.document,Q0=fd.process,qh=fd.Promise,Vc=(0,U.f)(fd,"queueMicrotask"),Gu=Vc&&Vc.value;Gu||(tf=function(){var n,i;for(vo&&(n=Q0.domain)&&n.exit();ju;){i=ju.fn,ju=ju.next;try{i()}catch(o){throw ju?Om():Rm=void 0,o}}Rm=void 0,n&&n.enter()},Ow||vo||Jr||!SE||!cA?!ur&&qh&&qh.resolve?((Qu=qh.resolve(void 0)).constructor=qh,Dm=nf(Qu.then,Qu),Om=function(){Dm(tf)}):vo?Om=function(){Q0.nextTick(tf)}:(km=nf(km,fd),Om=function(){km(tf)}):(Oa=!0,aA=cA.createTextNode(""),new SE(tf).observe(aA,{characterData:!0}),Om=function(){aA.data=Oa=!Oa}));var rf=Gu||function(n){var i={fn:n,next:void 0};Rm&&(Rm.next=i),ju||(ju=i,Om()),Rm=i},Et={},sf=jn,wi=function(n){var i,o;this.promise=new n(function(c,h){if(void 0!==i||void 0!==o)throw TypeError("Bad Promise constructor");i=c,o=h}),this.resolve=sf(i),this.reject=sf(o)};Et.f=function(n){return new wi(n)};var Gs=Mc,H0=zt,Fn=Et,zB=function(n,i){if(Gs(n),H0(i)&&i.constructor===n)return i;var o=Fn.f(n);return(0,o.resolve)(i),o.promise},bN=Q,Dw=function(){this.head=null,this.tail=null};Dw.prototype={add:function(n){var i={item:n,next:null};this.head?this.tail.next=i:this.head=i,this.tail=i},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var CE,kw,Nw,Pw,SN="object"==typeof window,IE=fc,Vo=Q,TE=qn,Wu=ie,wE=mE,Ws=id.exports,vc=Hh,Jh=Yp,RE=Yv,Rl=gm,Xh=jn,$h=tt,G0=zt,Nm=a_,W0=$g,$a=function(n,i,o){var c,h,g,p,v,_,y,C=!(!o||!o.AS_ENTRIES),w=!(!o||!o.IS_ITERATOR),P=!(!o||!o.INTERRUPTED),j=yn(i,o&&o.that),G=function(ae){return c&&eA(c,"normal",ae),new ld(!0,ae)},Z=function(ae){return C?(Ta(ae),P?j(ae[0],ae[1],G):j(ae[0],ae[1])):P?j(ae,G):j(ae)};if(w)c=n;else{if(!(h=ym(n)))throw AN(wa(n)+" is not iterable");if(Wo(h)){for(g=0,p=Zv(n);p>g;g++)if((v=Z(n[g]))&&Am(k0,v))return v;return new ld(!1)}c=ud(n,h)}for(_=c.next;!(y=cr(_,c)).done;){try{v=Z(y.value)}catch(ae){eA(c,"throw",ae)}if("object"==typeof v&&v&&Am(k0,v))return v}return new ld(!1)},af=qp,Nr=x0,Pm=j0.set,lr=rf,Mm=zB,Ku=Et,K0=function(n){try{return{error:!1,value:n()}}catch(i){return{error:!0,value:i}}},uA=Dw,z0=Sl,Ks=eh,CN=SN,cf=Ko,h_=po,OE=Ro("species"),mi="Promise",lA=z0.getterFor(mi),p_=z0.set,Mw=z0.getterFor(mi),Zh=wE&&wE.prototype,Ac=wE,th=Zh,dA=Vo.TypeError,uf=Vo.document,DE=Vo.process,Ol=Ku.f,f_=Ol,Y0=!!(uf&&uf.createEvent&&Vo.dispatchEvent),kE=$h(Vo.PromiseRejectionEvent),NE="unhandledrejection",q0=!1,m_=Ks(mi,function(){var n=W0(Ac),i=n!==String(Ac);if(!i&&66===h_)return!0;if(h_>=51&&/native code/.test(n))return!1;var o=new Ac(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(o.constructor={})[OE]=c,!(q0=o.then(function(){})instanceof c)||!i&&CN&&!kE}),J0=m_||!af(function(n){Ac.all(n).catch(function(){})}),g_=function(n){var i;return!(!G0(n)||!$h(i=n.then))&&i},X0=function(n,i){var o,c,h,g=i.value,p=1==i.state,v=p?n.ok:n.fail,_=n.resolve,y=n.reject,b=n.domain;try{v?(p||(2===i.rejection&&IN(i),i.rejection=1),!0===v?o=g:(b&&b.enter(),o=v(g),b&&(b.exit(),h=!0)),o===n.promise?y(dA("Promise-chain cycle")):(c=g_(o))?Wu(c,o,_,y):_(o)):y(g)}catch(C){b&&!h&&b.exit(),y(C)}},gd=function(n,i){n.notified||(n.notified=!0,lr(function(){for(var o,c=n.reactions;o=c.get();)X0(o,n);n.notified=!1,i&&!n.rejection&&$0(n)}))},PE=function(n,i,o){var c,h;Y0?((c=uf.createEvent("Event")).promise=i,c.reason=o,c.initEvent(n,!1,!0),Vo.dispatchEvent(c)):c={promise:i,reason:o},!kE&&(h=Vo["on"+n])?h(c):n===NE&&function(n,i){var o=bN.console;o&&o.error&&(1==arguments.length?o.error(n):o.error(n,i))}("Unhandled promise rejection",o)},$0=function(n){Wu(Pm,Vo,function(){var i,o=n.facade,c=n.value;if(ep(n)&&(i=K0(function(){cf?DE.emit("unhandledRejection",c,o):PE(NE,o,c)}),n.rejection=cf||ep(n)?2:1,i.error))throw i.value})},ep=function(n){return 1!==n.rejection&&!n.parent},IN=function(n){Wu(Pm,Vo,function(){var i=n.facade;cf?DE.emit("rejectionHandled",i):PE("rejectionhandled",i,n.value)})},lf=function(n,i,o){return function(c){n(i,c,o)}},nh=function(n,i,o){n.done||(n.done=!0,o&&(n=o),n.value=i,n.state=2,gd(n,!0))},__=function(n,i,o){if(!n.done){n.done=!0,o&&(n=o);try{if(n.facade===i)throw dA("Promise can't be resolved itself");var c=g_(i);c?lr(function(){var h={done:!1};try{Wu(c,i,lf(__,h,n),lf(nh,h,n))}catch(g){nh(h,g,n)}}):(n.value=i,n.state=1,gd(n,!1))}catch(h){nh({done:!1},h,n)}}};if(m_&&(th=(Ac=function(n){Nm(this,th),Xh(n),Wu(CE,this);var i=lA(this);try{n(lf(__,i),lf(nh,i))}catch(o){nh(i,o)}}).prototype,(CE=function(n){p_(this,{type:mi,done:!1,notified:!1,parent:!1,reactions:new uA,rejection:!1,state:0,value:void 0})}).prototype=vc(th,{then:function(n,i){var o=Mw(this),c=Ol(Nr(this,Ac));return o.parent=!0,c.ok=!$h(n)||n,c.fail=$h(i)&&i,c.domain=cf?DE.domain:void 0,0==o.state?o.reactions.add(c):lr(function(){X0(c,o)}),c.promise},catch:function(n){return this.then(void 0,n)}}),kw=function(){var n=new CE,i=lA(n);this.promise=n,this.resolve=lf(__,i),this.reject=lf(nh,i)},Ku.f=Ol=function(n){return n===Ac||n===Nw?new kw(n):f_(n)},$h(wE)&&Zh!==Object.prototype)){Pw=Zh.then,q0||(Ws(Zh,"then",function(n,i){var o=this;return new Ac(function(c,h){Wu(Pw,o,c,h)}).then(n,i)},{unsafe:!0}),Ws(Zh,"catch",th.catch,{unsafe:!0}));try{delete Zh.constructor}catch{}Jh&&Jh(Zh,th)}IE({global:!0,wrap:!0,forced:m_},{Promise:Ac}),RE(Ac,mi,!1),Rl(mi),Nw=TE(mi),IE({target:mi,stat:!0,forced:m_},{reject:function(n){var i=Ol(this);return Wu(i.reject,void 0,n),i.promise}}),IE({target:mi,stat:!0,forced:m_},{resolve:function(n){return Mm(this,n)}}),IE({target:mi,stat:!0,forced:J0},{all:function(n){var i=this,o=Ol(i),c=o.resolve,h=o.reject,g=K0(function(){var p=Xh(i.resolve),v=[],_=0,y=1;$a(n,function(b){var C=_++,w=!1;y++,Wu(p,i,b).then(function(P){w||(w=!0,v[C]=P,--y||c(v))},h)}),--y||c(v)});return g.error&&h(g.value),o.promise},race:function(n){var i=this,o=Ol(i),c=o.reject,h=K0(function(){var g=Xh(i.resolve);$a(n,function(p){Wu(g,i,p).then(o.resolve,c)})});return h.error&&c(h.value),o.promise}});var ME=fc,Z0=Zp,xm=re,xE=D,xw=Q.Array,LE=qn("JSON","stringify"),BE=xm(/./.exec),eC=xm("".charAt),tC=xm("".charCodeAt),FE=xm("".replace),nC=xm(1..toString),UE=/[\uD800-\uDFFF]/g,VE=/^[\uD800-\uDBFF]$/,Dl=/^[\uDC00-\uDFFF]$/,rC=function(n,i,o){var c=eC(o,i-1),h=eC(o,i+1);return BE(VE,n)&&!BE(Dl,h)||BE(Dl,n)&&!BE(VE,c)?"\\u"+nC(tC(n,0),16):n},jc=xE(function(){return'"\\udf06\\ud834"'!==LE("\udf06\ud834")||'"\\udead"'!==LE("\udead")});LE&&ME({target:"JSON",stat:!0,forced:jc},{stringify:function(n,i,o){for(var c=0,h=arguments.length,g=xw(h);c<h;c++)g[c]=arguments[c];var p=Z0(LE,null,g);return"string"==typeof p?FE(p,UE,rC):p}});var hs=function(n){try{return!!n()}catch{return!0}},jE=!hs(function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}),Lw=jE,QE=Function.prototype,iC=QE.call,Bw=Lw&&QE.bind.bind(iC,iC),So=Lw?function(n){return n&&Bw(n)}:function(n){return n&&function(){return iC.apply(n,arguments)}},Qc=So({}.isPrototypeOf),hA=function(n){return n&&n.Math==Math&&n},Xr=hA("object"==typeof globalThis&&globalThis)||hA("object"==typeof window&&window)||hA("object"==typeof self&&self)||hA("object"==typeof W&&W)||function(){return this}()||Function("return this")(),pA=Function.prototype,GE=pA.apply,fA=pA.call,zs="object"==typeof Reflect&&Reflect.apply||(jE?fA.bind(GE):function(){return fA.apply(GE,arguments)}),zo=function(n){return"function"==typeof n},hf={},Gc=!hs(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),mA=Function.prototype.call,Wc=jE?mA.bind(mA):function(){return mA.apply(mA,arguments)},pf={},WE={}.propertyIsEnumerable,KE=Object.getOwnPropertyDescriptor,Uw=KE&&!WE.call({1:2},1);pf.f=Uw?function(n){var i=KE(this,n);return!!i&&i.enumerable}:WE;var tp,Lm,_d=function(n,i){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:i}},oC=So,sC=oC({}.toString),Vw=oC("".slice),rh=function(n){return Vw(sC(n),8,-1)},Qw=hs,zE=rh,v_=Xr.Object,YE=So("".split),A_=Qw(function(){return!v_("z").propertyIsEnumerable(0)})?function(n){return"String"==zE(n)?YE(n,""):v_(n)}:v_,np=Xr.TypeError,rp=function(n){if(null==n)throw np("Can't call method on "+n);return n},gA=A_,y_=rp,kl=function(n){return gA(y_(n))},YB=zo,Nl=function(n){return"object"==typeof n?null!==n:YB(n)},ff={},Hw=ff,Gw=Xr,qB=zo,Ww=function(n){return qB(n)?n:void 0},Pl=function(n,i){return arguments.length<2?Ww(Hw[n])||Ww(Gw[n]):Hw[n]&&Hw[n][i]||Gw[n]&&Gw[n][i]},Bm=Pl("navigator","userAgent")||"",Kw=Bm,zw=Xr.process,_A=Xr.Deno,qE=zw&&zw.versions||_A&&_A.version,vd=qE&&qE.v8;vd&&(Lm=(tp=vd.split("."))[0]>0&&tp[0]<4?1:+(tp[0]+tp[1])),!Lm&&Kw&&(!(tp=Kw.match(/Edge\/(\d+)/))||tp[1]>=74)&&(tp=Kw.match(/Chrome\/(\d+)/))&&(Lm=+tp[1]);var mf=Lm,JE=mf,vA=!!Object.getOwnPropertySymbols&&!hs(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&JE&&JE<41}),AA=vA&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,JB=Pl,TN=zo,wN=Qc,qw=Xr.Object,cC=AA?function(n){return"symbol"==typeof n}:function(n){var i=JB("Symbol");return TN(i)&&wN(i.prototype,qw(n))},uC=Xr.String,E_=function(n){try{return uC(n)}catch{return"Object"}},ON=zo,Jw=E_,Xw=Xr.TypeError,ih=function(n){if(ON(n))return n;throw Xw(Jw(n)+" is not a function")},XE=ih,$w=function(n,i){var o=n[i];return null==o?void 0:XE(o)},$E=Wc,ZE=zo,eb=Nl,lC=Xr.TypeError,Fm={exports:{}},tb=Xr,yA=Object.defineProperty,Ad="__core-js_shared__",b_=Xr[Ad]||function(n,i){try{yA(tb,n,{value:i,configurable:!0,writable:!0})}catch{tb[n]=i}return i}(Ad,{}),gf=b_;(Fm.exports=function(n,i){return gf[n]||(gf[n]=void 0!==i?i:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var Zw=rp,dC=Xr.Object,zu=function(n){return dC(Zw(n))},hC=zu,pC=So({}.hasOwnProperty),ws=Object.hasOwn||function(n,i){return pC(hC(n),i)},rb=So,fC=0,mC=Math.random(),ib=rb(1..toString),yd=function(n){return"Symbol("+(void 0===n?"":n)+")_"+ib(++fC+mC,36)},eR=Xr,gC=ws,nR=yd,_C=vA,Kc=AA,zc=(0,Fm.exports)("wks"),_f=eR.Symbol,vC=_f&&_f.for,rR=Kc?_f:_f&&_f.withoutSetter||nR,Ns=function(n){if(!gC(zc,n)||!_C&&"string"!=typeof zc[n]){var i="Symbol."+n;zc[n]=_C&&gC(_f,n)?_f[n]:Kc&&vC?vC(i):rR(i)}return zc[n]},XB=Wc,DN=Nl,AC=cC,iR=$w,sR=Xr.TypeError,EA=Ns("toPrimitive"),oh=function(n,i){if(!DN(n)||AC(n))return n;var o,c=iR(n,EA);if(c){if(void 0===i&&(i="default"),o=XB(c,n,i),!DN(o)||AC(o))return o;throw sR("Can't convert object to primitive value")}return void 0===i&&(i="number"),function(n,i){var o,c;if("string"===i&&ZE(o=n.toString)&&!eb(c=$E(o,n))||ZE(o=n.valueOf)&&!eb(c=$E(o,n))||"string"!==i&&ZE(o=n.toString)&&!eb(c=$E(o,n)))return c;throw lC("Can't convert object to primitive value")}(n,i)},ip=cC,vf=function(n){var i=oh(n,"string");return ip(i)?i:i+""},bA=Nl,SA=Xr.document,kN=bA(SA)&&bA(SA.createElement),EC=function(n){return kN?SA.createElement(n):{}},NN=EC,CA=!Gc&&!hs(function(){return 7!=Object.defineProperty(NN("div"),"a",{get:function(){return 7}}).a}),IA=Wc,bC=pf,Ml=_d,aR=kl,cR=vf,SC=ws,PN=CA,CC=Object.getOwnPropertyDescriptor;hf.f=Gc?CC:function(n,i){if(n=aR(n),i=cR(i),PN)try{return CC(n,i)}catch{}if(SC(n,i))return Ml(!IA(bC.f,n,i),n[i])};var S_=hs,IC=zo,Um=/#|\.prototype\./,TA=function(n,i){var o=TC[no(n)];return o==sb||o!=C_&&(IC(i)?S_(i):!!i)},no=TA.normalize=function(n){return String(n).replace(Um,".").toLowerCase()},TC=TA.data={},C_=TA.NATIVE="N",sb=TA.POLYFILL="P",Yc=TA,I_=ih,uR=jE,T_=So(So.bind),op=function(n,i){return I_(n),void 0===i?n:uR?T_(n,i):function(){return n.apply(i,arguments)}},Yu={},Vm=Gc&&hs(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),jm=Nl,ab=Xr.String,cb=Xr.TypeError,ca=function(n){if(jm(n))return n;throw cb(ab(n)+" is not an object")},MN=CA,sh=ca,sp=vf,Qm=Xr.TypeError,Hm=Object.defineProperty,wA=Object.getOwnPropertyDescriptor;Yu.f=Gc?Vm?function(n,i,o){if(sh(n),i=sp(i),sh(o),"function"==typeof n&&"prototype"===i&&"value"in o&&"writable"in o&&!o.writable){var c=wA(n,i);c&&c.writable&&(n[i]=o.value,o={configurable:"configurable"in o?o.configurable:c.configurable,enumerable:"enumerable"in o?o.enumerable:c.enumerable,writable:!1})}return Hm(n,i,o)}:Hm:function(n,i,o){if(sh(n),i=sp(i),sh(o),MN)try{return Hm(n,i,o)}catch{}if("get"in o||"set"in o)throw Qm("Accessors not supported");return"value"in o&&(n[i]=o.value),n};var Af=Yu,ap=_d,cp=Gc?function(n,i,o){return Af.f(n,i,ap(1,o))}:function(n,i,o){return n[i]=o,n},w_=Xr,R_=zs,up=So,lb=zo,O_=hf.f,ah=Yc,lp=ff,db=op,D_=cp,hb=ws,OA=function(n){var i=function(o,c,h){if(this instanceof i){switch(arguments.length){case 0:return new n;case 1:return new n(o);case 2:return new n(o,c)}return new n(o,c,h)}return R_(n,this,arguments)};return i.prototype=n.prototype,i},ns=function(n,i){var o,c,h,g,p,v,_,y,b=n.target,C=n.global,w=n.stat,P=n.proto,j=C?w_:w?w_[b]:(w_[b]||{}).prototype,G=C?lp:lp[b]||D_(lp,b,{})[b],Z=G.prototype;for(h in i)o=!ah(C?h:b+(w?".":"#")+h,n.forced)&&j&&hb(j,h),p=G[h],o&&(v=n.noTargetGet?(y=O_(j,h))&&y.value:j[h]),g=o&&v?v:i[h],o&&typeof p==typeof g||(_=n.bind&&o?db(g,w_):n.wrap&&o?OA(g):P&&lb(g)?up(g):g,(n.sham||g&&g.sham||p&&p.sham)&&D_(_,"sham",!0),D_(G,h,_),P&&(hb(lp,c=b+"Prototype")||D_(lp,c,{}),D_(lp[c],h,g),n.real&&Z&&!Z[h]&&D_(Z,h,g)))},pb=Math.ceil,wC=Math.floor,fb=function(n){var i=+n;return i!=i||0===i?0:(i>0?wC:pb)(i)},DA=fb,RC=Math.min,ch=function(n){return function(n){return n>0?RC(DA(n),9007199254740991):0}(n.length)},OC=ih,gb=zu,DC=A_,k_=ch,xN=Xr.TypeError,yf=function(n){return function(i,o,c,h){OC(o);var g=gb(i),p=DC(g),v=k_(g),_=n?v-1:0,y=n?-1:1;if(c<2)for(;;){if(_ in p){h=p[_],_+=y;break}if(_+=y,n?_<0:v<=_)throw xN("Reduce of empty array with no initial value")}for(;n?_>=0:v>_;_+=y)_ in p&&(h=o(h,p[_],_,g));return h}},Pi={left:yf(!1),right:yf(!0)},hR=hs,ua=function(n,i){var o=[][n];return!!o&&hR(function(){o.call(null,i||function(){throw 1},1)})},Sd="process"==rh(Xr.process),kC=Pi.left,pR=mf,N_=Sd;ns({target:"Array",proto:!0,forced:!ua("reduce")||!N_&&pR>79&&pR<83},{reduce:function(n){var i=arguments.length;return kC(this,n,i,i>1?arguments[1]:void 0)}});var _b=ff,qu=function(n){return _b[n+"Prototype"]},qc=qu("Array").reduce,Mt=Qc,vb=qc,Cd=Array.prototype,fR=function(n){var i=n.reduce;return n===Cd||Mt(Cd,n)&&i===Cd.reduce?vb:i},Da=fR,LN=Ia,mR=Q.String,ka=function(n){if("Symbol"===LN(n))throw TypeError("Cannot convert a Symbol value to a string");return mR(n)},gR=Mc,xl=function(){var n=gR(this),i="";return n.global&&(i+="g"),n.ignoreCase&&(i+="i"),n.multiline&&(i+="m"),n.dotAll&&(i+="s"),n.unicode&&(i+="u"),n.sticky&&(i+="y"),i},vu=D,Ll=Q.RegExp,P_=vu(function(){var n=Ll("a","y");return n.lastIndex=2,null!=n.exec("abcd")}),BN=P_||vu(function(){return!Ll("a","y").sticky}),Jc={BROKEN_CARET:P_||vu(function(){var n=Ll("^r","gy");return n.lastIndex=2,null!=n.exec("str")}),MISSED_STICKY:BN,UNSUPPORTED_Y:P_},_R={},vR=Ei,$B=pm,FN=ii,ER=Mc,UN=Re,VN=Object.keys||function(n){return vR(n,$B)};_R.f=O&&!nN?Object.defineProperties:function(n,i){ER(n);for(var o,c=UN(i),h=VN(i),g=h.length,p=0;g>p;)FN.f(n,o=h[p++],c[o]);return n};var Au,jN=Mc,Ef=_R,bR=pm,QN=Wp,NC=Ja,SR=_n,PC=E0("IE_PROTO"),MC=function(){},xC=function(n){return"<script>"+n+"<\/script>"},Ab=function(n){n.write(xC("")),n.close();var i=n.parentWindow.Object;return n=null,i},ti=function(){try{Au=new ActiveXObject("htmlfile")}catch{}var n,i;ti=typeof document<"u"?document.domain&&Au?Ab(Au):((i=SR("iframe")).style.display="none",NC.appendChild(i),i.src=String("javascript:"),(n=i.contentWindow.document).open(),n.write(xC("document.F=Object")),n.close(),n.F):Ab(Au);for(var o=bR.length;o--;)delete ti.prototype[bR[o]];return ti()};QN[PC]=!0;var n,i,Cn=Object.create||function(n,i){var o;return null!==n?(MC.prototype=jN(n),o=new MC,MC.prototype=null,o[PC]=n):o=ti(),void 0===i?o:Ef.f(o,i)},CR=Q.RegExp,BC=D(function(){var n=CR(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}),IR=Q.RegExp,TR=D(function(){var n=IR("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}),Gm=ie,yb=re,HN=ka,yc=xl,Eb=Jc,Ec=Cn,GN=Sl.get,UC=BC,VC=TR,WN=(0,pi.exports)("native-string-replace",String.prototype.replace),jC=RegExp.prototype.exec,RR=jC,KN=yb("".charAt),OR=yb("".indexOf),Wm=yb("".replace),kA=yb("".slice),QC=(i=/b*/g,Gm(jC,n=/a/,"a"),Gm(jC,i,"a"),0!==n.lastIndex||0!==i.lastIndex),Xu=Eb.BROKEN_CARET,M_=void 0!==/()??/.exec("")[1];(QC||M_||Xu||UC||VC)&&(RR=function(n){var i,o,c,h,g,p,v,_=this,y=GN(_),b=HN(n),C=y.raw;if(C)return C.lastIndex=_.lastIndex,i=Gm(RR,C,b),_.lastIndex=C.lastIndex,i;var w=y.groups,P=Xu&&_.sticky,j=Gm(yc,_),G=_.source,Z=0,ae=b;if(P&&(j=Wm(j,"y",""),-1===OR(j,"g")&&(j+="g"),ae=kA(b,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==KN(b,_.lastIndex-1))&&(G="(?: "+G+")",ae=" "+ae,Z++),o=new RegExp("^(?:"+G+")",j)),M_&&(o=new RegExp("^"+G+"$(?!\\s)",j)),QC&&(c=_.lastIndex),h=Gm(jC,P?o:_,ae),P?h?(h.input=kA(h.input,Z),h[0]=kA(h[0],Z),h.index=_.lastIndex,_.lastIndex+=h[0].length):_.lastIndex=0:QC&&h&&(_.lastIndex=_.global?h.index+h[0].length:c),M_&&h&&h.length>1&&Gm(WN,h[0],o,function(){for(g=1;g<arguments.length-2;g++)void 0===arguments[g]&&(h[g]=void 0)}),h&&w)for(h.groups=p=Ec(null),g=0;g<w.length;g++)p[(v=w[g])[0]]=h[v[1]];return h});var NA=RR;fc({target:"RegExp",proto:!0,forced:/./.exec!==NA},{exec:NA});var dp=Cn,bb=ii,Sb=Ro("unscopables"),Cb=Array.prototype;null==Cb[Sb]&&bb.f(Cb,Sb,{configurable:!0,value:dp(null)});var Km,DR,kR,HC=!D(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),NR=Q,GC=Ka,PR=tt,WC=Hp,KC=HC,zN=E0("IE_PROTO"),x_=NR.Object,YN=x_.prototype,zC=KC?x_.getPrototypeOf:function(n){var i=WC(n);if(GC(i,zN))return i[zN];var o=i.constructor;return PR(o)&&i instanceof o?o.prototype:i instanceof x_?YN:null},gt=D,YC=tt,L_=zC,zm=id.exports,PA=Ro("iterator"),Ib=!1;[].keys&&("next"in(kR=[].keys())?(DR=L_(L_(kR)))!==Object.prototype&&(Km=DR):Ib=!0),(null==Km||gt(function(){var n={};return Km[PA].call(n)!==n}))&&(Km={}),YC(Km[PA])||zm(Km,PA,function(){return this});var Ym={IteratorPrototype:Km,BUGGY_SAFARI_ITERATORS:Ib},bf=Ym.IteratorPrototype,MA=Cn,qm=ve,B_=Yv,uh=Gh,$u=function(){return this},Tb=fc,qC=ie,Jm=tt,XC=zC,$C=Yp,MR=Yv,wb=bl,Rb=id.exports,xR=Gh,LR=Lu.PROPER,ZC=Lu.CONFIGURABLE,Xc=Ym.IteratorPrototype,F_=Ym.BUGGY_SAFARI_ITERATORS,Xm=Ro("iterator"),hp="values",Ob="entries",eI=function(){return this},FR=Re,xA=function(n){Cb[Sb][n]=!0},U_=Gh,qN=ii.f,JN=O,VR="Array Iterator",tI=Sl.set,nI=Sl.getterFor(VR),rI=function(n,i,o,c,h,g,p){!function(n,i,o,c){var h=i+" Iterator";n.prototype=MA(bf,{next:qm(+!c,o)}),B_(n,h,!1),uh[h]=$u}(o,i,c);var v,_,y,b=function(ae){if(ae===h&&G)return G;if(!F_&&ae in P)return P[ae];switch(ae){case"keys":case hp:case Ob:return function(){return new o(this,ae)}}return function(){return new o(this)}},C=i+" Iterator",w=!1,P=n.prototype,j=P[Xm]||P["@@iterator"]||h&&P[h],G=!F_&&j||b(h),Z="Array"==i&&P.entries||j;if(Z&&(v=XC(Z.call(new n)))!==Object.prototype&&v.next&&(XC(v)!==Xc&&($C?$C(v,Xc):Jm(v[Xm])||Rb(v,Xm,eI)),MR(v,C,!0)),LR&&h==hp&&j&&j.name!==hp&&(ZC?wb(P,"name",hp):(w=!0,G=function(){return qC(j,this)})),h)if(_={values:b(hp),keys:g?G:b("keys"),entries:b(Ob)},p)for(y in _)(F_||w||!(y in P))&&Rb(P,y,_[y]);else Tb({target:i,proto:!0,forced:F_||w},_);return P[Xm]!==G&&Rb(P,Xm,G,{name:h}),xR[i]=G,_}(Array,"Array",function(n,i){tI(this,{type:VR,target:FR(n),index:0,kind:i})},function(){var n=nI(this),i=n.target,o=n.kind,c=n.index++;return!i||c>=i.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==o?{value:c,done:!1}:"values"==o?{value:i[c],done:!1}:{value:[c,i[c]],done:!1}},"values"),Bl=U_.Arguments=U_.Array;if(xA("keys"),xA("values"),xA("entries"),JN&&"values"!==Bl.name)try{qN(Bl,"name",{value:"values"})}catch{}var V_=_n("span").classList,iI=V_&&V_.constructor&&V_.constructor.prototype,kb=Q,jR={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},XN=iI===Object.prototype?void 0:iI,j_=rI,LA=bl,oI=Ro,As=oI("iterator"),Sr=oI("toStringTag"),Na=j_.values,If=function(n,i){if(n){if(n[As]!==Na)try{LA(n,As,Na)}catch{n[As]=Na}if(n[Sr]||LA(n,Sr,i),jR[i])for(var o in j_)if(n[o]!==j_[o])try{LA(n,o,j_[o])}catch{n[o]=j_[o]}}};for(var $n in jR)If(kb[$n]&&kb[$n].prototype,$n);If(XN,"DOMTokenList");var Zn=tt,Id=zt,Pa=Yp,Qr=function(n,i,o){var c,h;return Pa&&Zn(c=i.constructor)&&c!==o&&Id(h=c.prototype)&&h!==o.prototype&&Pa(n,h),n},sI=ka,yu=function(n,i){return void 0===n?arguments.length<2?"":i:sI(n)},BA=zt,$c=bl,FA=re("".replace),UA=String(Error("zxcasd").stack),$m=/\n\s*at [^:]*:[^\n]*/,bc=$m.test(UA),pp=function(n,i){if(bc&&"string"==typeof n)for(;i--;)n=FA(n,$m,"");return n},QR=ve,$N=!D(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",QR(1,7)),7!==n.stack)}),aI=qn,VA=Ka,Zm=bl,Zc=Lr,eg=Yp,HR=Ci,Nb=Qr,ZN=yu,eP=function(n,i){BA(i)&&"cause"in i&&$c(n,"cause",i.cause)},tP=pp,GR=$N,cI=fc,Br=Zp,uI=function(n,i,o,c){var h=c?2:1,g=n.split("."),p=g[g.length-1],v=aI.apply(null,g);if(v){var _=v.prototype;if(VA(_,"cause")&&delete _.cause,!o)return v;var y=aI("Error"),b=i(function(C,w){var P=ZN(c?w:C,void 0),j=c?new v(C):new v;return void 0!==P&&Zm(j,"message",P),GR&&Zm(j,"stack",tP(j.stack,2)),this&&Zc(_,this)&&Nb(j,this,b),arguments.length>h&&eP(j,arguments[h]),j});b.prototype=_,"Error"!==p&&(eg?eg(b,y):HR(b,y,{name:!0})),HR(b,v);try{_.name!==p&&Zm(_,"name",p),_.constructor=b}catch{}return b}},Td=Q.WebAssembly,Q_=7!==Error("e",{cause:7}).cause,tg=function(n,i){var o={};o[n]=uI(n,i,Q_),cI({global:!0,forced:Q_},o)},lI=function(n,i){if(Td&&Td[n]){var o={};o[n]=uI("WebAssembly."+n,i,Q_),cI({target:"WebAssembly",stat:!0,forced:Q_},o)}};tg("Error",function(n){return function(i){return Br(n,this,arguments)}}),tg("EvalError",function(n){return function(i){return Br(n,this,arguments)}}),tg("RangeError",function(n){return function(i){return Br(n,this,arguments)}}),tg("ReferenceError",function(n){return function(i){return Br(n,this,arguments)}}),tg("SyntaxError",function(n){return function(i){return Br(n,this,arguments)}}),tg("TypeError",function(n){return function(i){return Br(n,this,arguments)}}),tg("URIError",function(n){return function(i){return Br(n,this,arguments)}}),lI("CompileError",function(n){return function(i){return Br(n,this,arguments)}}),lI("LinkError",function(n){return function(i){return Br(n,this,arguments)}}),lI("RuntimeError",function(n){return function(i){return Br(n,this,arguments)}});let ng=!0,jA=!0;function QA(n,i,o){const c=n.match(i);return c&&c.length>=o&&parseInt(c[o],10)}function Tf(n,i,o){if(!n.RTCPeerConnection)return;const c=n.RTCPeerConnection.prototype,h=c.addEventListener;c.addEventListener=function(p,v){if(p!==i)return h.apply(this,arguments);const _=y=>{const b=o(y);b&&(v.handleEvent?v.handleEvent(b):v(b))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(v,_),h.apply(this,[p,_])};const g=c.removeEventListener;c.removeEventListener=function(p,v){if(p!==i||!this._eventMap||!this._eventMap[i])return g.apply(this,arguments);if(!this._eventMap[i].has(v))return g.apply(this,arguments);const _=this._eventMap[i].get(v);return this._eventMap[i].delete(v),0===this._eventMap[i].size&&delete this._eventMap[i],0===Object.keys(this._eventMap).length&&delete this._eventMap,g.apply(this,[p,_])},Object.defineProperty(c,"on"+i,{get(){return this["_on"+i]},set(p){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),p&&this.addEventListener(i,this["_on"+i]=p)},enumerable:!0,configurable:!0})}function WR(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(ng=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function Mb(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(jA=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function dI(){if("object"==typeof window){if(ng)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function H_(n,i){jA&&console.warn(n+" is deprecated, please use "+i+" instead.")}function xb(n){const i={browser:null,version:null};if(void 0===n||!n.navigator)return i.browser="Not a browser.",i;const{navigator:o}=n;if(o.mozGetUserMedia)i.browser="firefox",i.version=QA(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||!1===n.isSecureContext&&n.webkitRTCPeerConnection&&!n.RTCIceGatherer)i.browser="chrome",i.version=QA(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(o.mediaDevices&&o.userAgent.match(/Edge\/(\d+).(\d+)$/))i.browser="edge",i.version=QA(o.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!n.RTCPeerConnection||!o.userAgent.match(/AppleWebKit\/(\d+)\./))return i.browser="Not a supported browser.",i;i.browser="safari",i.version=QA(o.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return i}function wf(n){return"[object Object]"===Object.prototype.toString.call(n)}function KR(n){var i;return wf(n)?Da(i=Object.keys(n)).call(i,function(o,c){const h=wf(n[c]),g=h?KR(n[c]):n[c],p=h&&!Object.keys(g).length;return void 0===g||p?o:Object.assign(o,{[c]:g})},{}):n}function rg(n,i,o){const c=o?"outbound-rtp":"inbound-rtp",h=new Map;if(null===i)return h;const g=[];return n.forEach(p=>{"track"===p.type&&p.trackIdentifier===i.id&&g.push(p)}),g.forEach(p=>{n.forEach(v=>{v.type===c&&v.trackId===p.id&&function _(y,b,C){b&&!C.has(b.id)&&(C.set(b.id,b),Object.keys(b).forEach(w=>{w.endsWith("Id")?_(y,y.get(b[w]),C):w.endsWith("Ids")&&b[w].forEach(P=>{_(y,y.get(P),C)})}))}(n,v,h)})}),h}var zR=yd,HA=(0,Fm.exports)("keys"),GA=function(n){return HA[n]||(HA[n]=zR(n))},wd=!hs(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),G_=Xr,Za=ws,Rf=zo,WA=zu,Zu=wd,ro=GA("IE_PROTO"),fp=G_.Object,ig=fp.prototype,mp=Zu?fp.getPrototypeOf:function(n){var i=WA(n);if(Za(i,ro))return i[ro];var o=i.constructor;return Rf(o)&&i instanceof o?o.prototype:i instanceof fp?ig:null},og=zo,sg=Xr.String,ag=Xr.TypeError,cg=So,ug=ca,pI=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,o={};try{(n=cg(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),i=o instanceof Array}catch{}return function(c,h){return ug(c),function(n){if("object"==typeof n||og(n))return n;throw ag("Can't set "+sg(n)+" as a prototype")}(h),i?n(c,h):c.__proto__=h,c}}():void 0),W_={},fI=fb,mI=Math.max,gI=Math.min,KA=function(n,i){var o=fI(n);return o<0?mI(o+i,0):gI(o,i)},_I=kl,vI=KA,YR=ch,AI=function(n){return function(i,o,c){var h,g=_I(i),p=YR(g),v=vI(c,p);if(n&&o!=o){for(;p>v;)if((h=g[v++])!=h)return!0}else for(;p>v;v++)if((n||v in g)&&g[v]===o)return n||v||0;return!n&&-1}},pr={includes:AI(!0),indexOf:AI(!1)},zA={},lh=ws,Nn=kl,Lb=pr.indexOf,qR=zA,Tn=So([].push),Ln=function(n,i){var o,c=Nn(n),h=0,g=[];for(o in c)!lh(qR,o)&&lh(c,o)&&Tn(g,o);for(;i.length>h;)lh(c,o=i[h++])&&(~Lb(g,o)||Tn(g,o));return g},so=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],JR=Ln,dh=so.concat("length","prototype");W_.f=Object.getOwnPropertyNames||function(n){return JR(n,dh)};var el={};el.f=Object.getOwnPropertySymbols;var K_=Pl,tl=W_,on=el,XR=ca,yI=So([].concat),ao=K_("Reflect","ownKeys")||function(n){var i=tl.f(XR(n)),o=on.f;return o?yI(i,o(n)):i},YA=ws,$R=ao,Eu=hf,ZR=Yu,Df={},li=Ln,di=so,Ys=Object.keys||function(n){return li(n,di)},EI=Yu,bI=ca,hh=kl,z_=Ys;Df.f=Gc&&!Vm?Object.defineProperties:function(n,i){bI(n);for(var o,c=hh(i),h=z_(i),g=h.length,p=0;g>p;)EI.f(n,o=h[p++],c[o]);return n};var gp,lg=Pl("document","documentElement"),Bb=ca,SI=Df,Fb=so,JA=zA,Rd=lg,CI=EC,Ub=GA("IE_PROTO"),Y_=function(){},Fl=function(n){return"<script>"+n+"<\/script>"},ec=function(n){n.write(Fl("")),n.close();var i=n.parentWindow.Object;return n=null,i},nl=function(){try{gp=new ActiveXObject("htmlfile")}catch{}var n,i;nl=typeof document<"u"?document.domain&&gp?ec(gp):((i=CI("iframe")).style.display="none",Rd.appendChild(i),i.src=String("javascript:"),(n=i.contentWindow.document).open(),n.write(Fl("document.F=Object")),n.close(),n.F):ec(gp);for(var o=Fb.length;o--;)delete nl.prototype[Fb[o]];return nl()};JA[Ub]=!0;var kf=Object.create||function(n,i){var o;return null!==n?(Y_.prototype=Bb(n),o=new Y_,Y_.prototype=null,o[Ub]=n):o=nl(),void 0===i?o:SI.f(o,i)},rP=So("".replace),iP=String(Error("zxcasd").stack),II=/\n\s*at [^:]*:[^\n]*/,eO=II.test(iP),Vb=Nl,tO=cp,Yo={},TI=Yo,nO=Ns("iterator"),rO=Array.prototype,jb=function(n){return void 0!==n&&(TI.Array===n||rO[nO]===n)},dg={};dg[Ns("toStringTag")]="z";var eu="[object z]"===String(dg),q_=Xr,J_=eu,Ma=zo,ph=rh,_p=Ns("toStringTag"),iO=q_.Object,vp="Arguments"==ph(function(){return arguments}()),tu=J_?ph:function(n){var i,o,c;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(o=function(h,g){try{return h[g]}catch{}}(i=iO(n),_p))?o:vp?ph(i):"Object"==(c=ph(i))&&Ma(i.callee)?"Arguments":c},ys=tu,Fr=$w,bu=Yo,oO=Ns("iterator"),fh=function(n){if(null!=n)return Fr(n,oO)||Fr(n,"@@iterator")||bu[ys(n)]},Ul=Wc,Sc=ih,qs=ca,sO=E_,wI=fh,aO=Xr.TypeError,Qb=function(n,i){var o=arguments.length<2?wI(n):i;if(Sc(o))return qs(Ul(o,n));throw aO(sO(n)+" is not iterable")},XA=Wc,RI=ca,Hb=$w,mh=function(n,i,o){var c,h;RI(n);try{if(!(c=Hb(n,"return"))){if("throw"===i)throw o;return o}c=XA(c,n)}catch(g){h=!0,c=g}if("throw"===i)throw o;if(h)throw c;return RI(c),o},Nf=op,OI=Wc,DI=ca,cO=E_,uO=jb,Gb=ch,kI=Qc,NI=Qb,Ur=fh,Od=mh,gh=Xr.TypeError,$A=function(n,i){this.stopped=n,this.result=i},PI=$A.prototype,ZA=function(n,i,o){var c,h,g,p,v,_,y,C=!(!o||!o.AS_ENTRIES),w=!(!o||!o.IS_ITERATOR),P=!(!o||!o.INTERRUPTED),j=Nf(i,o&&o.that),G=function(ae){return c&&Od(c,"normal",ae),new $A(!0,ae)},Z=function(ae){return C?(DI(ae),P?j(ae[0],ae[1],G):j(ae[0],ae[1])):P?j(ae,G):j(ae)};if(w)c=n;else{if(!(h=Ur(n)))throw gh(cO(n)+" is not iterable");if(uO(h)){for(g=0,p=Gb(n);p>g;g++)if((v=Z(n[g]))&&kI(PI,v))return v;return new $A(!1)}c=NI(n,h)}for(_=c.next;!(y=OI(_,c)).done;){try{v=Z(y.value)}catch(ae){Od(c,"throw",ae)}if("object"==typeof v&&v&&kI(PI,v))return v}return new $A(!1)},lO=tu,dO=Xr.String,rl=function(n){if("Symbol"===lO(n))throw TypeError("Cannot convert a Symbol value to a string");return dO(n)},MI=rl,hO=_d,xI=!hs(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",hO(1,7)),7!==n.stack)}),pO=ns,fO=Xr,mO=Qc,LI=mp,X_=pI,_O=kf,ey=cp,Pf=_d,Rs=function(n,i){if(eO&&"string"==typeof n)for(;i--;)n=rP(n,II,"");return n},oP=function(n,i){Vb(i)&&"cause"in i&&tO(n,"cause",i.cause)},vO=ZA,hg=function(n,i){return void 0===n?arguments.length<2?"":i:MI(n)},BI=xI,sP=Ns("toStringTag"),ty=fO.Error,AO=[].push,Mf=function(n,i){var o,c=arguments.length>2?arguments[2]:void 0,h=mO(Wb,this);X_?o=X_(new ty,h?LI(this):Wb):(o=h?this:_O(Wb),ey(o,sP,"Error")),void 0!==i&&ey(o,"message",hg(i)),BI&&ey(o,"stack",Rs(o.stack,1)),oP(o,c);var g=[];return vO(n,AO,{that:g}),ey(o,"errors",g),o};X_?X_(Mf,ty):function(n,i,o){for(var c=$R(i),h=ZR.f,g=Eu.f,p=0;p<c.length;p++){var v=c[p];YA(n,v)||o&&YA(o,v)||h(n,v,g(i,v))}}(Mf,ty,{name:!0});var Wb=Mf.prototype=_O(ty.prototype,{constructor:Pf(1,Mf),message:Pf(1,""),name:Pf(1,"AggregateError")});pO({global:!0},{AggregateError:Mf});var _h=zo,Ap=b_,Kb=So(Function.toString);_h(Ap.inspectSource)||(Ap.inspectSource=function(n){return Kb(n)});var pg,fg,xf,$_=Ap.inspectSource,il=$_,yp=Xr.WeakMap,aP=zo(yp)&&/native code/.test(il(yp)),Lf=So,cP=Nl,tc=cp,Wi=ws,EO=GA,ZB=zA,rr="Object already initialized",Cc=Xr.TypeError;if(aP||b_.state){var Ah=b_.state||(b_.state=new(0,Xr.WeakMap)),yh=Lf(Ah.get),ev=Lf(Ah.has),ny=Lf(Ah.set);pg=function(n,i){if(ev(Ah,n))throw new Cc(rr);return i.facade=n,ny(Ah,n,i),i},fg=function(n){return yh(Ah,n)||{}},xf=function(n){return ev(Ah,n)}}else{var Eh=EO("state");ZB[Eh]=!0,pg=function(n,i){if(Wi(n,Eh))throw new Cc(rr);return i.facade=n,tc(n,Eh,i),i},fg=function(n){return Wi(n,Eh)?n[Eh]:{}},xf=function(n){return Wi(n,Eh)}}var co,bO,tv,mg={set:pg,get:fg,has:xf,enforce:function(n){return xf(n)?fg(n):pg(n,{})},getterFor:function(n){return function(i){var o;if(!cP(i)||(o=fg(i)).type!==n)throw Cc("Incompatible receiver, "+n+" required");return o}}},Dd=Gc,UI=Function.prototype,bh=Dd&&Object.getOwnPropertyDescriptor,Ep=ws(UI,"name"),VI={EXISTS:Ep,PROPER:Ep&&"something"===function(){}.name,CONFIGURABLE:Ep&&(!Dd||Dd&&bh(UI,"name").configurable)},uP=cp,nv=function(n,i,o,c){c&&c.enumerable?n[i]=o:uP(n,i,o)},bp=hs,lP=zo,SO=kf,rv=mp,ry=nv,iy=Ns("iterator"),zb=!1;[].keys&&("next"in(tv=[].keys())?(bO=rv(rv(tv)))!==Object.prototype&&(co=bO):zb=!0);var Yb=null==co||bp(function(){var n={};return co[iy].call(n)!==n});lP((co=Yb?{}:SO(co))[iy])||ry(co,iy,function(){return this});var jI={IteratorPrototype:co,BUGGY_SAFARI_ITERATORS:zb},oy=tu,dP=eu,hP=Yu.f,pP=cp,CO=ws,IO=eu?{}.toString:function(){return"[object "+oy(this)+"]"},QI=Ns("toStringTag"),Vl=function(n,i,o,c){if(n){var h=o?n:n.prototype;CO(h,QI)||hP(h,QI,{configurable:!0,value:i}),c&&!dP&&pP(h,"toString",IO)}},iv=jI.IteratorPrototype,sy=kf,fP=_d,eF=Vl,ov=Yo,HI=function(){return this},gg=function(n,i,o,c){var h=i+" Iterator";return n.prototype=sy(iv,{next:fP(+!c,o)}),eF(n,h,!1,!0),ov[h]=HI,n},_g=ns,GI=Wc,TO=gg,ay=mp,wO=Vl,RO=nv,WI=Yo,sv=VI.PROPER,av=jI.BUGGY_SAFARI_ITERATORS,cv=Ns("iterator"),cy="values",DO="entries",uv=function(){return this},KI=function(n,i,o,c,h,g,p){TO(o,i,c);var v,_,y,b=function(ae){if(ae===h&&G)return G;if(!av&&ae in P)return P[ae];switch(ae){case"keys":case cy:case DO:return function(){return new o(this,ae)}}return function(){return new o(this)}},C=i+" Iterator",w=!1,P=n.prototype,j=P[cv]||P["@@iterator"]||h&&P[h],G=!av&&j||b(h),Z="Array"==i&&P.entries||j;if(Z&&(v=ay(Z.call(new n)))!==Object.prototype&&v.next&&(wO(v,C,!0,!0),WI[C]=uv),sv&&h==cy&&j&&j.name!==cy&&(w=!0,G=function(){return GI(j,this)}),h)if(_={values:b(cy),keys:g?G:b("keys"),entries:b(DO)},p)for(y in _)(av||w||!(y in P))&&RO(P,y,_[y]);else _g({target:i,proto:!0,forced:av||w},_);return p&&P[cv]!==G&&RO(P,cv,G,{name:h}),WI[i]=G,_},kO=kl,lv=Yo,PO=KI,zI="Array Iterator",YI=mg.set,MO=mg.getterFor(zI);PO(Array,"Array",function(n,i){YI(this,{type:zI,target:kO(n),index:0,kind:i})},function(){var n=MO(this),i=n.target,o=n.kind,c=n.index++;return!i||c>=i.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==o?{value:c,done:!1}:"values"==o?{value:i[c],done:!1}:{value:[c,i[c]],done:!1}},"values"),lv.Arguments=lv.Array;var uy=Xr.Promise,mP=nv,qb=function(n,i,o){for(var c in i)o&&o.unsafe&&n[c]?n[c]=i[c]:mP(n,c,i[c],o);return n},xO=Pl,qo=Yu,qI=Gc,JI=Ns("species"),ly=Qc,XI=Xr.TypeError,dv=function(n,i){if(ly(i,n))return n;throw XI("Incorrect invocation")},$I=Ns("iterator"),Jb=!1;try{var gP=0,LO={next:function(){return{done:!!gP++}},return:function(){Jb=!0}};LO[$I]=function(){return this},Array.from(LO,function(){throw 2})}catch{}var _P=So,vP=hs,BO=zo,FO=tu,AP=$_,Xb=function(){},$b=[],dy=Pl("Reflect","construct"),hy=/^\s*(?:class|function)\b/,yP=_P(hy.exec),UO=!hy.exec(Xb),py=function(n){if(!BO(n))return!1;try{return dy(Xb,$b,n),!0}catch{return!1}},VO=function(n){if(!BO(n))return!1;switch(FO(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return UO||!!yP(hy,AP(n))}catch{return!0}};VO.sham=!0;var fy,Su,my,vg,Ag=!dy||vP(function(){var n;return py(py.call)||!py(Object)||!py(function(){n=!0})||n})?VO:py,jO=Ag,EP=E_,Zb=Xr.TypeError,QO=ca,hv=Ns("species"),eS=function(n,i){var o,c=QO(n).constructor;return void 0===c||null==(o=QO(c)[hv])?i:function(n){if(jO(n))return n;throw Zb(EP(n)+" is not a constructor")}(o)},ZI=So([].slice),bP=/(?:ipad|iphone|ipod).*applewebkit/i.test(Bm),Cu=Xr,jo=zs,Sh=op,eT=zo,tS=ws,SP=hs,nS=lg,HO=ZI,tT=EC,GO=bP,WO=Sd,nT=Cu.setImmediate,rT=Cu.clearImmediate,CP=Cu.process,Nd=Cu.Dispatch,yg=Cu.Function,KO=Cu.MessageChannel,gy=Cu.String,Iu=0,jl={};try{fy=Cu.location}catch{}var Bf=function(n){if(tS(jl,n)){var i=jl[n];delete jl[n],i()}},iT=function(n){return function(){Bf(n)}},zO=function(n){Bf(n.data)},YO=function(n){Cu.postMessage(gy(n),fy.protocol+"//"+fy.host)};nT&&rT||(nT=function(n){var i=HO(arguments,1);return jl[++Iu]=function(){jo(eT(n)?n:yg(n),void 0,i)},Su(Iu),Iu},rT=function(n){delete jl[n]},WO?Su=function(n){CP.nextTick(iT(n))}:Nd&&Nd.now?Su=function(n){Nd.now(iT(n))}:KO&&!GO?(vg=(my=new KO).port2,my.port1.onmessage=zO,Su=Sh(vg.postMessage,vg)):Cu.addEventListener&&eT(Cu.postMessage)&&!Cu.importScripts&&fy&&"file:"!==fy.protocol&&!SP(YO)?(Su=YO,Cu.addEventListener("message",zO,!1)):Su="onreadystatechange"in tT("script")?function(n){nS.appendChild(tT("script")).onreadystatechange=function(){nS.removeChild(this),Bf(n)}}:function(n){setTimeout(iT(n),0)});var er,bg,_y,ol,oT,Ch,sT,rS,pv={set:nT,clear:rT},qO=Xr,JO=/ipad|iphone|ipod/i.test(Bm)&&void 0!==qO.Pebble,la=/web0s(?!.*chrome)/i.test(Bm),Ff=Xr,sl=op,fv=pv.set,IP=bP,$O=JO,ZO=la,uo=Sd,vy=Ff.MutationObserver||Ff.WebKitMutationObserver,eD=Ff.document,Uf=Ff.process,a=Ff.Promise,d=(0,hf.f)(Ff,"queueMicrotask"),u=d&&d.value;u||(er=function(){var n,i;for(uo&&(n=Uf.domain)&&n.exit();bg;){i=bg.fn,bg=bg.next;try{i()}catch(o){throw bg?ol():_y=void 0,o}}_y=void 0,n&&n.enter()},IP||uo||ZO||!vy||!eD?!$O&&a&&a.resolve?((sT=a.resolve(void 0)).constructor=a,rS=sl(sT.then,sT),ol=function(){rS(er)}):uo?ol=function(){Uf.nextTick(er)}:(fv=sl(fv,Ff),ol=function(){fv(er)}):(oT=!0,Ch=eD.createTextNode(""),new vy(er).observe(Ch,{characterData:!0}),ol=function(){Ch.data=oT=!oT}));var f=u||function(n){var i={fn:n,next:void 0};_y&&(_y.next=i),bg||(bg=i,ol()),_y=i},A={},S=ih,T=function(n){var i,o;this.promise=new n(function(c,h){if(void 0!==i||void 0!==o)throw TypeError("Bad Promise constructor");i=c,o=h}),this.resolve=S(i),this.reject=S(o)};A.f=function(n){return new T(n)};var R=ca,M=Nl,B=A,H=function(n,i){if(R(n),M(i)&&i.constructor===n)return i;var o=B.f(n);return(0,o.resolve)(i),o.promise},$=Xr,ce=function(n){try{return{error:!1,value:n()}}catch(i){return{error:!0,value:i}}},he=function(){this.head=null,this.tail=null};he.prototype={add:function(n){var i={item:n,next:null};this.head?this.tail.next=i:this.head=i,this.tail=i},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var ue,Se,Qe,He="object"==typeof window,We=ns,et=Xr,Lt=Pl,Gt=Wc,jt=uy,Tt=qb,sn=Vl,An=ih,ln=zo,Qt=Nl,Bn=dv,_r=$_,vt=ZA,Be=eS,$e=pv.set,St=f,lt=H,an=A,Gn=ce,vr=he,Hr=mg,nc=Yc,Ih=He,ru=Sd,Ic=mf,Ps=Ns("species"),xa="Promise",Th=Hr.getterFor(xa),Ft=Hr.set,It=Hr.getterFor(xa),qt=jt,Sn=jt&&jt.prototype,Kn=et.TypeError,yr=et.document,gi=et.process,Pr=an.f,Mi=Pr,Bi=!!(yr&&yr.createEvent&&et.dispatchEvent),Io=ln(et.PromiseRejectionEvent),To="unhandledrejection",Jo=nc(xa,function(){var n=_r(qt),i=n!==String(qt);if(!i&&66===Ic||!Sn.finally)return!0;if(Ic>=51&&/native code/.test(n))return!1;var o=new qt(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(o.constructor={})[Ps]=c,!(o.then(function(){})instanceof c)||!i&&Ih&&!Io}),rc=Jo||!function(n,i){if(!i&&!Jb)return!1;var o=!1;try{var c={};c[$I]=function(){return{next:function(){return{done:o=!0}}}},n(c)}catch{}return o}(function(n){qt.all(n).catch(function(){})}),Ql=function(n){var i;return!(!Qt(n)||!ln(i=n.then))&&i},iu=function(n,i){var o,c,h,g=i.value,p=1==i.state,v=p?n.ok:n.fail,_=n.resolve,y=n.reject,b=n.domain;try{v?(p||(2===i.rejection&&iS(i),i.rejection=1),!0===v?o=g:(b&&b.enter(),o=v(g),b&&(b.exit(),h=!0)),o===n.promise?y(Kn("Promise-chain cycle")):(c=Ql(o))?Gt(c,o,_,y):_(o)):y(g)}catch(C){b&&!h&&b.exit(),y(C)}},ic=function(n,i){n.notified||(n.notified=!0,St(function(){for(var o,c=n.reactions;o=c.get();)iu(o,n);n.notified=!1,i&&!n.rejection&&wh(n)}))},Sp=function(n,i,o){var c,h;Bi?((c=yr.createEvent("Event")).promise=i,c.reason=o,c.initEvent(n,!1,!0),et.dispatchEvent(c)):c={promise:i,reason:o},!Io&&(h=et["on"+n])?h(c):n===To&&function(n,i){var o=$.console;o&&o.error&&(1==arguments.length?o.error(n):o.error(n,i))}("Unhandled promise rejection",o)},wh=function(n){Gt($e,et,function(){var i,o=n.facade,c=n.value;if(Cp(n)&&(i=Gn(function(){ru?gi.emit("unhandledRejection",c,o):Sp(To,o,c)}),n.rejection=ru||Cp(n)?2:1,i.error))throw i.value})},Cp=function(n){return 1!==n.rejection&&!n.parent},iS=function(n){Gt($e,et,function(){var i=n.facade;ru?gi.emit("rejectionHandled",i):Sp("rejectionhandled",i,n.value)})},Sg=function(n,i,o){return function(c){n(i,c,o)}},Ay=function(n,i,o){n.done||(n.done=!0,o&&(n=o),n.value=i,n.state=2,ic(n,!0))},TP=function(n,i,o){if(!n.done){n.done=!0,o&&(n=o);try{if(n.facade===i)throw Kn("Promise can't be resolved itself");var c=Ql(i);c?St(function(){var h={done:!1};try{Gt(c,i,Sg(TP,h,n),Sg(Ay,h,n))}catch(g){Ay(h,g,n)}}):(n.value=i,n.state=1,ic(n,!1))}catch(h){Ay({done:!1},h,n)}}};Jo&&(Sn=(qt=function(n){Bn(this,Sn),An(n),Gt(ue,this);var i=Th(this);try{n(Sg(TP,i),Sg(Ay,i))}catch(o){Ay(i,o)}}).prototype,(ue=function(n){Ft(this,{type:xa,done:!1,notified:!1,parent:!1,reactions:new vr,rejection:!1,state:0,value:void 0})}).prototype=Tt(Sn,{then:function(n,i){var o=It(this),c=Pr(Be(this,qt));return o.parent=!0,c.ok=!ln(n)||n,c.fail=ln(i)&&i,c.domain=ru?gi.domain:void 0,0==o.state?o.reactions.add(c):St(function(){iu(c,o)}),c.promise},catch:function(n){return this.then(void 0,n)}}),Se=function(){var n=new ue,i=Th(n);this.promise=n,this.resolve=Sg(TP,i),this.reject=Sg(Ay,i)},an.f=Pr=function(n){return n===qt||n===Qe?new Se(n):Mi(n)}),We({global:!0,wrap:!0,forced:Jo},{Promise:qt}),sn(qt,xa,!1,!0),function(n){var i=xO(n);qI&&i&&!i[JI]&&(0,qo.f)(i,JI,{configurable:!0,get:function(){return this}})}(xa),Qe=Lt(xa),We({target:xa,stat:!0,forced:Jo},{reject:function(n){var i=Pr(this);return Gt(i.reject,void 0,n),i.promise}}),We({target:xa,stat:!0,forced:!0},{resolve:function(n){return lt(this===Qe?qt:this,n)}}),We({target:xa,stat:!0,forced:rc},{all:function(n){var i=this,o=Pr(i),c=o.resolve,h=o.reject,g=Gn(function(){var p=An(i.resolve),v=[],_=0,y=1;vt(n,function(b){var C=_++,w=!1;y++,Gt(p,i,b).then(function(P){w||(w=!0,v[C]=P,--y||c(v))},h)}),--y||c(v)});return g.error&&h(g.value),o.promise},race:function(n){var i=this,o=Pr(i),c=o.reject,h=Gn(function(){var g=An(i.resolve);vt(n,function(p){Gt(g,i,p).then(o.resolve,c)})});return h.error&&c(h.value),o.promise}});var bj=Wc,Sj=ih,tF=A,nF=ce,Cj=ZA;ns({target:"Promise",stat:!0},{allSettled:function(n){var i=this,o=tF.f(i),c=o.resolve,h=o.reject,g=nF(function(){var p=Sj(i.resolve),v=[],_=0,y=1;Cj(n,function(b){var C=_++,w=!1;y++,bj(p,i,b).then(function(P){w||(w=!0,v[C]={status:"fulfilled",value:P},--y||c(v))},function(P){w||(w=!0,v[C]={status:"rejected",reason:P},--y||c(v))})}),--y||c(v)});return g.error&&h(g.value),o.promise}});var rF=ih,iF=Pl,Ij=Wc,Tj=A,oF=ce,wj=ZA,wP="No one promise resolved";ns({target:"Promise",stat:!0},{any:function(n){var i=this,o=iF("AggregateError"),c=Tj.f(i),h=c.resolve,g=c.reject,p=oF(function(){var v=rF(i.resolve),_=[],y=0,b=1,C=!1;wj(n,function(w){var P=y++,j=!1;b++,Ij(v,i,w).then(function(G){j||C||(C=!0,h(G))},function(G){j||C||(j=!0,_[P]=G,--b||g(new o(_,wP)))})}),--b||g(new o(_,wP))});return p.error&&g(p.value),c.promise}});var RP=uy,sF=Pl,aF=zo,Rj=eS,cF=H;ns({target:"Promise",proto:!0,real:!0,forced:!!RP&&hs(function(){RP.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var i=Rj(this,sF("Promise")),o=aF(n);return this.then(o?function(c){return cF(i,n()).then(function(){return c})}:n,o?function(c){return cF(i,n()).then(function(){throw c})}:n)}});var uF=So,lF=fb,SG=rl,CG=rp,IG=uF("".charAt),Oj=uF("".charCodeAt),TG=uF("".slice),Dj=function(n){return function(i,o){var c,h,g=SG(CG(i)),p=lF(o),v=g.length;return p<0||p>=v?n?"":void 0:(c=Oj(g,p))<55296||c>56319||p+1===v||(h=Oj(g,p+1))<56320||h>57343?n?IG(g,p):c:n?TG(g,p,p+2):h-56320+(c-55296<<10)+65536}},kj={codeAt:Dj(!1),charAt:Dj(!0)},wG=kj.charAt,tD=rl,dF=KI,aT="String Iterator",oS=mg.set,hF=mg.getterFor(aT);dF(String,"String",function(n){oS(this,{type:aT,string:tD(n),index:0})},function(){var n,i=hF(this),o=i.string,c=i.index;return c>=o.length?{value:void 0,done:!0}:(n=wG(o,c),i.index+=n.length,{value:n,done:!1})});var RG=ff.Promise,pF=Xr,nD=tu,Pj=cp,Mj=Yo,Ip=Ns("toStringTag");for(var fF in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var mF=pF[fF],Rh=mF&&mF.prototype;Rh&&nD(Rh)!==Ip&&Pj(Rh,Ip,fF),Mj[fF]=Mj.Array}var gF=RG,Qn=gF,OG=Ko,DG=O,kG=Mc,Lj=Cn,Bj=yu,rD=Error.prototype.toString,_F=D(function(){if(DG){var n=Lj(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==rD.call(n))return!0}return"2: 1"!==rD.call({message:1,name:2})||"Error"!==rD.call({})})?function(){var n=kG(this),i=Bj(n.name,"Error"),o=Bj(n.message);return i?o?i+": "+o:i:o}:rD,DP={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},NG=fc,iD=qn,cT=D,Fj=Cn,vF=ve,_i=ii.f,Uj=_R.f,kP=id.exports,oD=Ka,Vj=a_,NP=Mc,PP=_F,MP=yu,sS=DP,AF=pp,uT=Sl,lT=O,mv="DOMException",aS=iD("Error"),Tu=iD(mv)||function(){try{(new(iD("MessageChannel")||function(n){try{if(OG)return Function('return require("'+n+'")')()}catch{}}("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(n){if("DATA_CLONE_ERR"==n.name&&25==n.code)return n.constructor}}(),sD=aS.prototype,Cg=uT.set,Qj=uT.getterFor(mv),PG="stack"in aS(mv),EF=function(n){return oD(sS,n)&&sS[n].m?sS[n].c:0},bF=function(){Vj(this,xP);var n=arguments.length,i=MP(n<1?void 0:arguments[0]),o=MP(n<2?void 0:arguments[1],"Error"),c=EF(o);if(Cg(this,{type:mv,name:o,message:i,code:c}),lT||(this.name=o,this.message=i,this.code=c),PG){var h=aS(i);h.name=mv,_i(this,"stack",vF(1,AF(h.stack,1)))}},xP=bF.prototype=Fj(sD),SF=function(n){return{enumerable:!0,configurable:!0,get:n}},aD=function(n){return SF(function(){return Qj(this)[n]})};lT&&Uj(xP,{name:aD("name"),message:aD("message"),code:aD("code")}),_i(xP,"constructor",vF(1,bF));var cD=cT(function(){return!(new Tu instanceof aS)}),CF=cD||cT(function(){return sD.toString!==PP||"2: 1"!==String(new Tu(1,2))}),Hj=cD||cT(function(){return 25!==new Tu(1,"DataCloneError").code});NG({global:!0,forced:cD},{DOMException:cD?bF:Tu});var cS=iD(mv),LP=cS.prototype;for(var uD in CF&&Tu===cS&&kP(LP,"toString",PP),Hj&&lT&&Tu===cS&&_i(LP,"code",SF(function(){return EF(NP(this).name)})),sS)if(oD(sS,uD)){var BP=sS[uD],dT=BP.s,FP=vF(6,BP.c);oD(cS,dT)||_i(cS,dT,FP),oD(LP,dT)||_i(LP,dT,FP)}var IF=fc,lD=qn,yy=ve,uS=ii.f,UP=Ka,Gj=a_,MG=Qr,Wj=yu,TF=DP,xG=pp,hT="DOMException",Vf=lD("Error"),dD=lD(hT),VP=function(){Gj(this,LG);var n=arguments.length,i=Wj(n<1?void 0:arguments[0]),o=Wj(n<2?void 0:arguments[1],"Error"),c=new dD(i,o),h=Vf(i);return h.name=hT,uS(c,"stack",yy(1,xG(h.stack,1))),MG(c,this,VP),c},LG=VP.prototype=dD.prototype,BG="stack"in Vf(hT),FG="stack"in new dD(1,2),Kj=BG&&!FG;IF({global:!0,forced:Kj},{DOMException:Kj?VP:dD});var hD=lD(hT),wF=hD.prototype;if(wF.constructor!==hD)for(var pT in uS(wF,"constructor",yy(1,hD)),TF)if(UP(TF,pT)){var RF=TF[pT],OF=RF.s;UP(hD,OF)||uS(hD,OF,yy(6,RF.c))}var jP="DOMException";Yv(qn(jP),jP);var gv=re,QP=id.exports,HP=NA,pD=D,DF=Ro,GP=bl,WP=DF("species"),lS=RegExp.prototype,kF=re,UG=na,VG=ka,jG=qe,NF=kF("".charAt),PF=kF("".charCodeAt),zj=kF("".slice),MF=function(n){return function(i,o){var c,h,g=VG(jG(i)),p=UG(o),v=g.length;return p<0||p>=v?n?"":void 0:(c=PF(g,p))<55296||c>56319||p+1===v||(h=PF(g,p+1))<56320||h>57343?n?NF(g,p):c:n?zj(g,p,p+2):h-56320+(c-55296<<10)+65536}},Yj=(MF(!1),MF(!0)),fD=re,xF=Hp,LF=Math.floor,KP=fD("".charAt),qj=fD("".replace),mD=fD("".slice),gD=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,QG=/\$([$&'`]|\d{1,2})/g,zP=ie,fT=Mc,Jj=tt,Xj=xe,HG=NA,GG=Q.TypeError,$j=Zp,BF=ie,dS=re,KG=D,zG=Mc,YG=tt,qG=na,Zj=ad,mT=ka,JG=qe,XG=function(n,i,o){return i+(o?Yj(n,i).length:1)},$G=Ne,ZG=function(n,i,o,c,h,g){var p=o+n.length,v=c.length,_=QG;return void 0!==h&&(h=xF(h),_=gD),qj(g,_,function(y,b){var C;switch(KP(b,0)){case"$":return"$";case"&":return n;case"`":return mD(i,0,o);case"'":return mD(i,p);case"<":C=h[mD(b,1,-1)];break;default:var w=+b;if(0===w)return y;if(w>v){var P=LF(w/10);return 0===P?y:P<=v?void 0===c[P-1]?KP(b,1):c[P-1]+KP(b,1):y}C=c[w-1]}return void 0===C?"":C})},eW=function(n,i){var o=n.exec;if(Jj(o)){var c=zP(o,n,i);return null!==c&&fT(c),c}if("RegExp"===Xj(n))return zP(HG,n,i);throw GG("RegExp#exec called on incompatible receiver")},hS=Ro("replace"),jf=Math.max,tW=Math.min,e8=dS([].concat),YP=dS([].push),xi=dS("".indexOf),qP=dS("".slice),t8="$0"==="a".replace(/./,"$0"),n8=!!/./[hS]&&""===/./[hS]("a","$0");!function(n,i,o,c){var h=DF(n),g=!pD(function(){var y={};return y[h]=function(){return 7},7!=""[n](y)}),p=g&&!pD(function(){var y=!1,b=/a/;return"split"===n&&((b={}).constructor={},b.constructor[WP]=function(){return b},b.flags="",b[h]=/./[h]),b.exec=function(){return y=!0,null},b[h](""),!y});if(!g||!p||o){var v=gv(/./[h]),_=i(h,""[n],function(y,b,C,w,P){var j=gv(y),G=b.exec;return G===HP||G===lS.exec?g&&!P?{done:!0,value:v(b,C,w)}:{done:!0,value:j(C,b,w)}:{done:!1}});QP(String.prototype,n,_[0]),QP(lS,h,_[1])}c&&GP(lS[h],"sham",!0)}("replace",function(n,i,o){var c=n8?"$":"$0";return[function(h,g){var p=JG(this),v=null==h?void 0:$G(h,hS);return v?BF(v,h,p,g):BF(i,mT(p),h,g)},function(h,g){var p=zG(this),v=mT(h);if("string"==typeof g&&-1===xi(g,c)&&-1===xi(g,"$<")){var _=o(i,p,v,g);if(_.done)return _.value}var y=YG(g);y||(g=mT(g));var b=p.global;if(b){var C=p.unicode;p.lastIndex=0}for(var w=[];;){var P=eW(p,v);if(null===P||(YP(w,P),!b))break;""===mT(P[0])&&(p.lastIndex=XG(v,Zj(p.lastIndex),C))}for(var j,G="",Z=0,ae=0;ae<w.length;ae++){for(var fe=mT((P=w[ae])[0]),be=jf(tW(qG(P.index),v.length),0),Ce=[],it=1;it<P.length;it++)YP(Ce,void 0===(j=P[it])?j:String(j));var wt=P.groups;if(y){var bt=e8([fe],Ce,be,v);void 0!==wt&&YP(bt,wt);var Pt=mT($j(g,void 0,bt))}else Pt=ZG(fe,v,be,Ce,wt,g);be>=Z&&(G+=qP(v,Z,be)+Pt,Z=be+fe.length)}return G+qP(v,Z)}]},!!KG(function(){var n=/./;return n.exec=function(){var i=[];return i.groups={a:"7"},i},"7"!=="".replace(n,"$<a>")})||!t8||n8);var FF=zt,UF=xe,r8=Ro("match"),VF=O,_D=Q,Oh=re,vD=eh,i8=Qr,o8=bl,nW=ii.f,jF=lm.f,QF=Lr,JP=ka,HF=xl,al=Jc,La=id.exports,da=D,Ki=Ka,Ms=Sl.enforce,$r=gm,a8=BC,GF=TR,c8=Ro("match"),Ig=_D.RegExp,pS=Ig.prototype,u8=_D.SyntaxError,rW=Oh(HF),iW=Oh(pS.exec),Ey=Oh("".charAt),gT=Oh("".replace),_T=Oh("".indexOf),Dh=Oh("".slice),XP=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,fS=/a/g,WF=/a/g,oW=new Ig(fS)!==fS,KF=al.MISSED_STICKY,l8=al.UNSUPPORTED_Y;if(vD("RegExp",VF&&(!oW||KF||a8||GF||da(function(){return WF[c8]=!1,Ig(fS)!=fS||Ig(WF)==WF||"/a/i"!=Ig(fS,"i")})))){for(var _v=function(n,i){var o,c,h,g,p,v,_=QF(pS,this),y=function(n){var i;return FF(n)&&(void 0!==(i=n[r8])?!!i:"RegExp"==UF(n))}(n),b=void 0===i,C=[],w=n;if(!_&&y&&b&&n.constructor===_v)return n;if((y||QF(pS,n))&&(n=n.source,b&&(i="flags"in w?w.flags:rW(w))),n=void 0===n?"":JP(n),i=void 0===i?"":JP(i),w=n,a8&&"dotAll"in fS&&(c=!!i&&_T(i,"s")>-1)&&(i=gT(i,/s/g,"")),o=i,KF&&"sticky"in fS&&(h=!!i&&_T(i,"y")>-1)&&l8&&(i=gT(i,/y/g,"")),GF&&(n=(g=function(P){for(var j,G=P.length,Z=0,ae="",fe=[],be={},Ce=!1,it=!1,wt=0,bt="";Z<=G;Z++){if("\\"===(j=Ey(P,Z)))j+=Ey(P,++Z);else if("]"===j)Ce=!1;else if(!Ce)switch(!0){case"["===j:Ce=!0;break;case"("===j:iW(XP,Dh(P,Z+1))&&(Z+=2,it=!0),ae+=j,wt++;continue;case">"===j&&it:if(""===bt||Ki(be,bt))throw new u8("Invalid capture group name");be[bt]=!0,fe[fe.length]=[bt,wt],it=!1,bt="";continue}it?bt+=j:ae+=j}return[ae,fe]}(n))[0],C=g[1]),p=i8(Ig(n,i),_?this:pS,_v),(c||h||C.length)&&(v=Ms(p),c&&(v.dotAll=!0,v.raw=_v(function(P){for(var j,G=P.length,Z=0,ae="",fe=!1;Z<=G;Z++)"\\"!==(j=Ey(P,Z))?fe||"."!==j?("["===j?fe=!0:"]"===j&&(fe=!1),ae+=j):ae+="[\\s\\S]":ae+=j+Ey(P,++Z);return ae}(n),o)),h&&(v.sticky=!0),C.length&&(v.groups=C)),n!==w)try{o8(p,"source",""===w?"(?:)":w)}catch{}return p},d8=function(n){n in _v||nW(_v,n,{configurable:!0,get:function(){return Ig[n]},set:function(i){Ig[n]=i}})},h8=jF(Ig),Pd=0;h8.length>Pd;)d8(h8[Pd++]);pS.constructor=_v,_v.prototype=pS,La(_D,"RegExp",_v)}$r("RegExp");var m8=xe,vT=Sl.get,YF=RegExp.prototype,oc=Q.TypeError;O&&BC&&(0,ii.f)(YF,"dotAll",{configurable:!0,get:function(){if(this!==YF){if("RegExp"===m8(this))return!!vT(this).dotAll;throw oc("Incompatible receiver, RegExp required")}}});const ni=dI;function Di(n,i){const o=n&&n.navigator;if(!o.mediaDevices)return;const c=function(p){if("object"!=typeof p||p.mandatory||p.optional)return p;const v={};return Object.keys(p).forEach(_=>{if("require"===_||"advanced"===_||"mediaSource"===_)return;const y="object"==typeof p[_]?p[_]:{ideal:p[_]};void 0!==y.exact&&"number"==typeof y.exact&&(y.min=y.max=y.exact);const b=function(C,w){return C?C+w.charAt(0).toUpperCase()+w.slice(1):"deviceId"===w?"sourceId":w};if(void 0!==y.ideal){v.optional=v.optional||[];let C={};"number"==typeof y.ideal?(C[b("min",_)]=y.ideal,v.optional.push(C),C={},C[b("max",_)]=y.ideal,v.optional.push(C)):(C[b("",_)]=y.ideal,v.optional.push(C))}void 0!==y.exact&&"number"!=typeof y.exact?(v.mandatory=v.mandatory||{},v.mandatory[b("",_)]=y.exact):["min","max"].forEach(C=>{void 0!==y[C]&&(v.mandatory=v.mandatory||{},v.mandatory[b(C,_)]=y[C])})}),p.advanced&&(v.optional=(v.optional||[]).concat(p.advanced)),v},h=function(p,v){if(i.version>=61)return v(p);if((p=JSON.parse(JSON.stringify(p)))&&"object"==typeof p.audio){const _=function(y,b,C){b in y&&!(C in y)&&(y[C]=y[b],delete y[b])};_((p=JSON.parse(JSON.stringify(p))).audio,"autoGainControl","googAutoGainControl"),_(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=c(p.audio)}if(p&&"object"==typeof p.video){let _=p.video.facingMode;_=_&&("object"==typeof _?_:{ideal:_});const y=i.version<66;if(_&&("user"===_.exact||"environment"===_.exact||"user"===_.ideal||"environment"===_.ideal)&&(!o.mediaDevices.getSupportedConstraints||!o.mediaDevices.getSupportedConstraints().facingMode||y)){let b;if(delete p.video.facingMode,"environment"===_.exact||"environment"===_.ideal?b=["back","rear"]:"user"!==_.exact&&"user"!==_.ideal||(b=["front"]),b)return o.mediaDevices.enumerateDevices().then(C=>{let w=(C=C.filter(P=>"videoinput"===P.kind)).find(P=>b.some(j=>P.label.toLowerCase().includes(j)));return!w&&C.length&&b.includes("back")&&(w=C[C.length-1]),w&&(p.video.deviceId=_.exact?{exact:w.deviceId}:{ideal:w.deviceId}),p.video=c(p.video),ni("chrome: "+JSON.stringify(p)),v(p)})}p.video=c(p.video)}return ni("chrome: "+JSON.stringify(p)),v(p)},g=function(p){return i.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(o.getUserMedia=function(p,v,_){h(p,y=>{o.webkitGetUserMedia(y,v,b=>{_&&_(g(b))})})}.bind(o),o.mediaDevices.getUserMedia){const p=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(v){return h(v,_=>p(_).then(y=>{if(_.audio&&!y.getAudioTracks().length||_.video&&!y.getVideoTracks().length)throw y.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return y},y=>Qn.reject(g(y))))}}}function qF(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function AT(n){if("object"==typeof n&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(o){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=o)},enumerable:!0,configurable:!0});const i=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=o=>{o.stream.addEventListener("addtrack",c=>{let h;h=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===c.track.id):{track:c.track};const g=new Event("track");g.track=c.track,g.receiver=h,g.transceiver={receiver:h},g.streams=[o.stream],this.dispatchEvent(g)}),o.stream.getTracks().forEach(c=>{let h;h=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===c.id):{track:c};const g=new Event("track");g.track=c,g.receiver=h,g.transceiver={receiver:h},g.streams=[o.stream],this.dispatchEvent(g)})},this.addEventListener("addstream",this._ontrackpoly)),i.apply(this,arguments)}}else Tf(n,"track",i=>(i.transceiver||Object.defineProperty(i,"transceiver",{value:{receiver:i.receiver}}),i))}function Qf(n){if("object"==typeof n&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const i=function(h,g){return{track:g,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===g.kind?h.createDTMFSender(g):null),this._dtmf},_pc:h}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const h=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(p,v){let _=h.apply(this,arguments);return _||(_=i(this,p),this._senders.push(_)),_};const g=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(p){g.apply(this,arguments);const v=this._senders.indexOf(p);-1!==v&&this._senders.splice(v,1)}}const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(h){this._senders=this._senders||[],o.apply(this,[h]),h.getTracks().forEach(g=>{this._senders.push(i(this,g))})};const c=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(h){this._senders=this._senders||[],c.apply(this,[h]),h.getTracks().forEach(g=>{const p=this._senders.find(v=>v.track===g);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if("object"==typeof n&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const i=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const o=i.apply(this,[]);return o.forEach(c=>c._pc=this),o},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function yT(n){if(!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[o,c,h]=arguments;if(arguments.length>0&&"function"==typeof o)return i.apply(this,arguments);if(0===i.length&&(0===arguments.length||"function"!=typeof o))return i.apply(this,[]);const g=function(v){const _={};return v.result().forEach(y=>{const b={id:y.id,timestamp:y.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[y.type]||y.type};y.names().forEach(C=>{b[C]=y.stat(C)}),_[b.id]=b}),_},p=function(v){return new Map(Object.keys(v).map(_=>[_,v[_]]))};return arguments.length>=2?i.apply(this,[function(_){c(p(g(_)))},o]):new Qn((v,_)=>{i.apply(this,[function(y){v(p(g(y)))},_])}).then(c,h)}}function kh(n){if(!("object"==typeof n&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const o=n.RTCPeerConnection.prototype.getSenders;o&&(n.RTCPeerConnection.prototype.getSenders=function(){const h=o.apply(this,[]);return h.forEach(g=>g._pc=this),h});const c=n.RTCPeerConnection.prototype.addTrack;c&&(n.RTCPeerConnection.prototype.addTrack=function(){const h=c.apply(this,arguments);return h._pc=this,h}),n.RTCRtpSender.prototype.getStats=function(){const h=this;return this._pc.getStats().then(g=>rg(g,h.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const o=n.RTCPeerConnection.prototype.getReceivers;o&&(n.RTCPeerConnection.prototype.getReceivers=function(){const c=o.apply(this,[]);return c.forEach(h=>h._pc=this),c}),Tf(n,"track",c=>(c.receiver._pc=c.srcElement,c)),n.RTCRtpReceiver.prototype.getStats=function(){const c=this;return this._pc.getStats().then(h=>rg(h,c.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const i=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const o=arguments[0];let c,h,g;return this.getSenders().forEach(p=>{p.track===o&&(c?g=!0:c=p)}),this.getReceivers().forEach(p=>(p.track===o&&(h?g=!0:h=p),p.track===o)),g||c&&h?Qn.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):c?c.getStats():h?h.getStats():Qn.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}function JF(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(g=>this._shimmedLocalStreams[g][0])};const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(g,p){if(!p)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const v=i.apply(this,arguments);return this._shimmedLocalStreams[p.id]?-1===this._shimmedLocalStreams[p.id].indexOf(v)&&this._shimmedLocalStreams[p.id].push(v):this._shimmedLocalStreams[p.id]=[p,v],v};const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(g){this._shimmedLocalStreams=this._shimmedLocalStreams||{},g.getTracks().forEach(_=>{if(this.getSenders().find(y=>y.track===_))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();o.apply(this,arguments);const v=this.getSenders().filter(_=>-1===p.indexOf(_));this._shimmedLocalStreams[g.id]=[g].concat(v)};const c=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[g.id],c.apply(this,arguments)};const h=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},g&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const v=this._shimmedLocalStreams[p].indexOf(g);-1!==v&&this._shimmedLocalStreams[p].splice(v,1),1===this._shimmedLocalStreams[p].length&&delete this._shimmedLocalStreams[p]}),h.apply(this,arguments)}}function ha(n,i){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&i.version>=65)return JF(n);const o=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const y=o.apply(this);return this._reverseStreams=this._reverseStreams||{},y.map(b=>this._reverseStreams[b.id])};const c=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(y){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},y.getTracks().forEach(b=>{if(this.getSenders().find(C=>C.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[y.id]){const b=new n.MediaStream(y.getTracks());this._streams[y.id]=b,this._reverseStreams[b.id]=y,y=b}c.apply(this,[y])};const h=n.RTCPeerConnection.prototype.removeStream;function g(y,b){let C=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(w=>{const P=y._reverseStreams[w];C=C.replace(new RegExp(y._streams[P.id].id,"g"),P.id)}),new RTCSessionDescription({type:b.type,sdp:C})}function p(y,b){let C=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(w=>{const P=y._reverseStreams[w],j=y._streams[P.id];C=C.replace(new RegExp(P.id,"g"),j.id)}),new RTCSessionDescription({type:b.type,sdp:C})}n.RTCPeerConnection.prototype.removeStream=function(y){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.apply(this,[this._streams[y.id]||y]),delete this._reverseStreams[this._streams[y.id]?this._streams[y.id].id:y.id],delete this._streams[y.id]},n.RTCPeerConnection.prototype.addTrack=function(y,b){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const C=[].slice.call(arguments,1);if(1!==C.length||!C[0].getTracks().find(j=>j===y))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(j=>j.track===y))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const P=this._streams[b.id];if(P)P.addTrack(y),Qn.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const j=new n.MediaStream([y]);this._streams[b.id]=j,this._reverseStreams[j.id]=b,this.addStream(j)}return this.getSenders().find(j=>j.track===y)},["createOffer","createAnswer"].forEach(function(y){const b=n.RTCPeerConnection.prototype[y],C={[y](){const w=arguments;return arguments.length&&"function"==typeof arguments[0]?b.apply(this,[P=>{const j=g(this,P);w[0].apply(null,[j])},P=>{w[1]&&w[1].apply(null,P)},arguments[2]]):b.apply(this,arguments).then(P=>g(this,P))}};n.RTCPeerConnection.prototype[y]=C[y]});const v=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=p(this,arguments[0]),v.apply(this,arguments)):v.apply(this,arguments)};const _=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const y=_.get.apply(this);return""===y.type?y:g(this,y)}}),n.RTCPeerConnection.prototype.removeTrack=function(y){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!y._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(y._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let b;this._streams=this._streams||{},Object.keys(this._streams).forEach(C=>{this._streams[C].getTracks().find(w=>y.track===w)&&(b=this._streams[C])}),b&&(1===b.getTracks().length?this.removeStream(this._reverseStreams[b.id]):b.removeTrack(y.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ZP(n,i){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const c=n.RTCPeerConnection.prototype[o],h={[o](){return arguments[0]=new("addIceCandidate"===o?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};n.RTCPeerConnection.prototype[o]=h[o]})}function rs(n,i){Tf(n,"negotiationneeded",o=>{const c=o.target;if(!(i.version<72||c.getConfiguration&&"plan-b"===c.getConfiguration().sdpSemantics)||"stable"===c.signalingState)return o})}var XF=Object.freeze({__proto__:null,shimMediaStream:qF,shimOnTrack:AT,shimGetSendersWithDtmf:Qf,shimGetStats:yT,shimSenderReceiverGetStats:kh,shimAddTrackRemoveTrackWithNative:JF,shimAddTrackRemoveTrack:ha,shimPeerConnection:ZP,fixNegotiationNeeded:rs,shimGetUserMedia:Di,shimGetDisplayMedia:function(n,i){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&("function"==typeof i?n.navigator.mediaDevices.getDisplayMedia=function(o){return i(o).then(c=>{const h=o.video&&o.video.width,g=o.video&&o.video.height;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c,maxFrameRate:o.video&&o.video.frameRate||3}},h&&(o.video.mandatory.maxWidth=h),g&&(o.video.mandatory.maxHeight=g),n.navigator.mediaDevices.getUserMedia(o)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),ET={exports:{}};!function(n){var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(o){return o.trim().split("\n").map(function(c){return c.trim()})},i.splitSections=function(o){return o.split("\nm=").map(function(c,h){return(h>0?"m="+c:c).trim()+"\r\n"})},i.getDescription=function(o){var c=i.splitSections(o);return c&&c[0]},i.getMediaSections=function(o){var c=i.splitSections(o);return c.shift(),c},i.matchPrefix=function(o,c){return i.splitLines(o).filter(function(h){return 0===h.indexOf(c)})},i.parseCandidate=function(o){for(var c,h={foundation:(c=0===o.indexOf("a=candidate:")?o.substring(12).split(" "):o.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},i.writeCandidate=function(o){var c=[];c.push(o.foundation),c.push(o.component),c.push(o.protocol.toUpperCase()),c.push(o.priority),c.push(o.address||o.ip),c.push(o.port);var h=o.type;return c.push("typ"),c.push(h),"host"!==h&&o.relatedAddress&&o.relatedPort&&(c.push("raddr"),c.push(o.relatedAddress),c.push("rport"),c.push(o.relatedPort)),o.tcpType&&"tcp"===o.protocol.toLowerCase()&&(c.push("tcptype"),c.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(c.push("ufrag"),c.push(o.usernameFragment||o.ufrag)),"candidate:"+c.join(" ")},i.parseIceOptions=function(o){return o.substr(14).split(" ")},i.parseRtpMap=function(o){var c=o.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},i.writeRtpMap=function(o){var c=o.payloadType;void 0!==o.preferredPayloadType&&(c=o.preferredPayloadType);var h=o.channels||o.numChannels||1;return"a=rtpmap:"+c+" "+o.name+"/"+o.clockRate+(1!==h?"/"+h:"")+"\r\n"},i.parseExtmap=function(o){var c=o.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},i.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&"sendrecv"!==o.direction?"/"+o.direction:"")+" "+o.uri+"\r\n"},i.parseFmtp=function(o){for(var c,h={},g=o.substr(o.indexOf(" ")+1).split(";"),p=0;p<g.length;p++)h[(c=g[p].trim().split("="))[0].trim()]=c[1];return h},i.writeFmtp=function(o){var c="",h=o.payloadType;if(void 0!==o.preferredPayloadType&&(h=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){var g=[];Object.keys(o.parameters).forEach(function(p){g.push(o.parameters[p]?p+"="+o.parameters[p]:p)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},i.parseRtcpFb=function(o){var c=o.substr(o.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},i.writeRtcpFb=function(o){var c="",h=o.payloadType;return void 0!==o.preferredPayloadType&&(h=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},i.parseSsrcMedia=function(o){var c=o.indexOf(" "),h={ssrc:parseInt(o.substr(7,c-7),10)},g=o.indexOf(":",c);return g>-1?(h.attribute=o.substr(c+1,g-c-1),h.value=o.substr(g+1)):h.attribute=o.substr(c+1),h},i.parseSsrcGroup=function(o){var c=o.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},i.getMid=function(o){var c=i.matchPrefix(o,"a=mid:")[0];if(c)return c.substr(6)},i.parseFingerprint=function(o){var c=o.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},i.getDtlsParameters=function(o,c){return{role:"auto",fingerprints:i.matchPrefix(o+c,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(o,c){var h="a=setup:"+c+"\r\n";return o.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},i.getIceParameters=function(o,c){var h=i.splitLines(o);return{usernameFragment:(h=h.concat(i.splitLines(c))).filter(function(g){return 0===g.indexOf("a=ice-ufrag:")})[0].substr(12),password:h.filter(function(g){return 0===g.indexOf("a=ice-pwd:")})[0].substr(10)}},i.writeIceParameters=function(o){return"a=ice-ufrag:"+o.usernameFragment+"\r\na=ice-pwd:"+o.password+"\r\n"},i.parseRtpParameters=function(o){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=i.splitLines(o)[0].split(" "),g=3;g<h.length;g++){var p=h[g],v=i.matchPrefix(o,"a=rtpmap:"+p+" ")[0];if(v){var _=i.parseRtpMap(v),y=i.matchPrefix(o,"a=fmtp:"+p+" ");switch(_.parameters=y.length?i.parseFmtp(y[0]):{},_.rtcpFeedback=i.matchPrefix(o,"a=rtcp-fb:"+p+" ").map(i.parseRtcpFb),c.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(_.name.toUpperCase())}}}return i.matchPrefix(o,"a=extmap:").forEach(function(b){c.headerExtensions.push(i.parseExtmap(b))}),c},i.writeRtpDescription=function(o,c){var h="";h+="m="+o+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(p){return void 0!==p.preferredPayloadType?p.preferredPayloadType:p.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(p){h+=i.writeRtpMap(p),h+=i.writeFmtp(p),h+=i.writeRtcpFb(p)});var g=0;return c.codecs.forEach(function(p){p.maxptime>g&&(g=p.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(p){h+=i.writeExtmap(p)}),h},i.parseRtpEncodingParameters=function(o){var c,h=[],g=i.parseRtpParameters(o),p=-1!==g.fecMechanisms.indexOf("RED"),v=-1!==g.fecMechanisms.indexOf("ULPFEC"),_=i.matchPrefix(o,"a=ssrc:").map(function(w){return i.parseSsrcMedia(w)}).filter(function(w){return"cname"===w.attribute}),y=_.length>0&&_[0].ssrc,b=i.matchPrefix(o,"a=ssrc-group:FID").map(function(w){return w.substr(17).split(" ").map(function(P){return parseInt(P,10)})});b.length>0&&b[0].length>1&&b[0][0]===y&&(c=b[0][1]),g.codecs.forEach(function(w){if("RTX"===w.name.toUpperCase()&&w.parameters.apt){var P={ssrc:y,codecPayloadType:parseInt(w.parameters.apt,10)};y&&c&&(P.rtx={ssrc:c}),h.push(P),p&&((P=JSON.parse(JSON.stringify(P))).fec={ssrc:y,mechanism:v?"red+ulpfec":"red"},h.push(P))}}),0===h.length&&y&&h.push({ssrc:y});var C=i.matchPrefix(o,"b=");return C.length&&(C=0===C[0].indexOf("b=TIAS:")?parseInt(C[0].substr(7),10):0===C[0].indexOf("b=AS:")?1e3*parseInt(C[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(w){w.maxBitrate=C})),h},i.parseRtcpParameters=function(o){var c={},h=i.matchPrefix(o,"a=ssrc:").map(function(v){return i.parseSsrcMedia(v)}).filter(function(v){return"cname"===v.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=i.matchPrefix(o,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var p=i.matchPrefix(o,"a=rtcp-mux");return c.mux=p.length>0,c},i.parseMsid=function(o){var c,h=i.matchPrefix(o,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=i.matchPrefix(o,"a=ssrc:").map(function(p){return i.parseSsrcMedia(p)}).filter(function(p){return"msid"===p.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(o,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(o||i.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(o,c,h,g){var p=i.writeRtpDescription(o.kind,c);if(p+=i.writeIceParameters(o.iceGatherer.getLocalParameters()),p+=i.writeDtlsParameters(o.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),p+="a=mid:"+o.mid+"\r\n",p+=o.direction?"a="+o.direction+"\r\n":o.rtpSender&&o.rtpReceiver?"a=sendrecv\r\n":o.rtpSender?"a=sendonly\r\n":o.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",o.rtpSender){var v="msid:"+g.id+" "+o.rtpSender.track.id+"\r\n";p+="a="+v,p+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" "+v,o.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" "+v,p+="a=ssrc-group:FID "+o.sendEncodingParameters[0].ssrc+" "+o.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return p+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",o.rtpSender&&o.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),p},i.getDirection=function(o,c){for(var h=i.splitLines(o),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?i.getDirection(c):"sendrecv"},i.getKind=function(o){return i.splitLines(o)[0].split(" ")[0].substr(2)},i.isRejected=function(o){return"0"===o.split(" ",2)[1]},i.parseMLine=function(o){var c=i.splitLines(o)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},i.parseOLine=function(o){var c=i.matchPrefix(o,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},i.isValidSDP=function(o){if("string"!=typeof o||0===o.length)return!1;for(var c=i.splitLines(o),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},n.exports=i}(ET);var oi=ET.exports;function bT(n,i,o,c,h){var g=oi.writeRtpDescription(n.kind,i);if(g+=oi.writeIceParameters(n.iceGatherer.getLocalParameters()),g+=oi.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),"offer"===o?"actpass":h||"active"),g+="a=mid:"+n.mid+"\r\n",g+=n.rtpSender&&n.rtpReceiver?"a=sendrecv\r\n":n.rtpSender?"a=sendonly\r\n":n.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",n.rtpSender){var p=n.rtpSender._initialTrackId||n.rtpSender.track.id;n.rtpSender._initialTrackId=p;var v="msid:"+(c?c.id:"-")+" "+p+"\r\n";g+="a="+v,g+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+v,n.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+v,g+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return g+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+oi.localCName+"\r\n",n.rtpSender&&n.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+oi.localCName+"\r\n"),g}function AD(n,i){var o={codecs:[],headerExtensions:[],fecMechanisms:[]},c=function(g,p){g=parseInt(g,10);for(var v=0;v<p.length;v++)if(p[v].payloadType===g||p[v].preferredPayloadType===g)return p[v]},h=function(g,p,v,_){var y=c(g.parameters.apt,v),b=c(p.parameters.apt,_);return y&&b&&y.name.toLowerCase()===b.name.toLowerCase()};return n.codecs.forEach(function(g){for(var p=0;p<i.codecs.length;p++){var v=i.codecs[p];if(g.name.toLowerCase()===v.name.toLowerCase()&&g.clockRate===v.clockRate){if("rtx"===g.name.toLowerCase()&&g.parameters&&v.parameters.apt&&!h(g,v,n.codecs,i.codecs))continue;(v=JSON.parse(JSON.stringify(v))).numChannels=Math.min(g.numChannels,v.numChannels),o.codecs.push(v),v.rtcpFeedback=v.rtcpFeedback.filter(function(_){for(var y=0;y<g.rtcpFeedback.length;y++)if(g.rtcpFeedback[y].type===_.type&&g.rtcpFeedback[y].parameter===_.parameter)return!0;return!1});break}}}),n.headerExtensions.forEach(function(g){for(var p=0;p<i.headerExtensions.length;p++){var v=i.headerExtensions[p];if(g.uri===v.uri){o.headerExtensions.push(v);break}}}),o}function eM(n,i,o){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[i][n].indexOf(o)}function ST(n,i){var o=n.getRemoteCandidates().find(function(c){return i.foundation===c.foundation&&i.ip===c.ip&&i.port===c.port&&i.priority===c.priority&&i.protocol===c.protocol&&i.type===c.type});return o||n.addRemoteCandidate(i),!o}function sc(n,i){var o=new Error(i);return o.name=n,o.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[n],o}function $F(n){const i=n&&n.navigator,o=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(c){return o(c).catch(h=>{return Qn.reject({name:{PermissionDeniedError:"NotAllowedError"}[(g=h).name]||g.name,message:g.message,constraint:g.constraint,toString(){return this.name}});var g})}}function nM(n){"getDisplayMedia"in n.navigator&&n.navigator.mediaDevices&&(n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=n.navigator.getDisplayMedia.bind(n.navigator)))}function rM(n,i){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(c){return c}),n.RTCSessionDescription||(n.RTCSessionDescription=function(c){return c}),i.version<15025)){const c=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set(h){c.set.call(this,h);const g=new Event("enabled");g.enabled=h,this.dispatchEvent(g)}})}n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)&&Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);const o=function(n,i){function o(p,v){v.addTrack(p),v.dispatchEvent(new n.MediaStreamTrackEvent("addtrack",{track:p}))}function c(p,v,_,y){var b=new Event("track");b.track=v,b.receiver=_,b.transceiver={receiver:_},b.streams=y,n.setTimeout(function(){p._dispatchEvent("track",b)})}var h=function(p){var b,C,w,v=this,_=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(b){v[b]=_[b].bind(_)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",p=JSON.parse(JSON.stringify(p||{})),this.usingBundle="max-bundle"===p.bundlePolicy,"negotiate"===p.rtcpMuxPolicy)throw sc("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(p.rtcpMuxPolicy||(p.rtcpMuxPolicy="require"),p.iceTransportPolicy){case"all":case"relay":break;default:p.iceTransportPolicy="all"}switch(p.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:p.bundlePolicy="balanced"}if(p.iceServers=(b=p.iceServers||[],C=i,w=!1,(b=JSON.parse(JSON.stringify(b))).filter(function(P){if(P&&(P.urls||P.url)){var j=P.urls||P.url;P.url&&!P.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var G="string"==typeof j;return G&&(j=[j]),j=j.filter(function(Z){return 0!==Z.indexOf("turn:")||-1===Z.indexOf("transport=udp")||-1!==Z.indexOf("turn:[")||w?0===Z.indexOf("stun:")&&C>=14393&&-1===Z.indexOf("?transport=udp"):(w=!0,!0)}),delete P.url,P.urls=G?j[0]:j,!!j.length}})),this._iceGatherers=[],p.iceCandidatePoolSize)for(var y=p.iceCandidatePoolSize;y>0;y--)this._iceGatherers.push(new n.RTCIceGatherer({iceServers:p.iceServers,gatherPolicy:p.iceTransportPolicy}));else p.iceCandidatePoolSize=0;this._config=p,this.transceivers=[],this._sdpSessionId=oi.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(h.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(h.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),h.prototype.onicecandidate=null,h.prototype.onaddstream=null,h.prototype.ontrack=null,h.prototype.onremovestream=null,h.prototype.onsignalingstatechange=null,h.prototype.oniceconnectionstatechange=null,h.prototype.onconnectionstatechange=null,h.prototype.onicegatheringstatechange=null,h.prototype.onnegotiationneeded=null,h.prototype.ondatachannel=null,h.prototype._dispatchEvent=function(p,v){this._isClosed||(this.dispatchEvent(v),"function"==typeof this["on"+p]&&this["on"+p](v))},h.prototype._emitGatheringStateChange=function(){var p=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",p)},h.prototype.getConfiguration=function(){return this._config},h.prototype.getLocalStreams=function(){return this.localStreams},h.prototype.getRemoteStreams=function(){return this.remoteStreams},h.prototype._createTransceiver=function(p,v){var y={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:p,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)y.iceTransport=this.transceivers[0].iceTransport,y.dtlsTransport=this.transceivers[0].dtlsTransport;else{var b=this._createIceAndDtlsTransports();y.iceTransport=b.iceTransport,y.dtlsTransport=b.dtlsTransport}return v||this.transceivers.push(y),y},h.prototype.addTrack=function(p,v){if(this._isClosed)throw sc("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var _;if(this.transceivers.find(function(b){return b.track===p}))throw sc("InvalidAccessError","Track already exists.");for(var y=0;y<this.transceivers.length;y++)this.transceivers[y].track||this.transceivers[y].kind!==p.kind||(_=this.transceivers[y]);return _||(_=this._createTransceiver(p.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(v)&&this.localStreams.push(v),_.track=p,_.stream=v,_.rtpSender=new n.RTCRtpSender(p,_.dtlsTransport),_.rtpSender},h.prototype.addStream=function(p){var v=this;if(i>=15025)p.getTracks().forEach(function(y){v.addTrack(y,p)});else{var _=p.clone();p.getTracks().forEach(function(y,b){var C=_.getTracks()[b];y.addEventListener("enabled",function(w){C.enabled=w.enabled})}),_.getTracks().forEach(function(y){v.addTrack(y,_)})}},h.prototype.removeTrack=function(p){if(this._isClosed)throw sc("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(p instanceof n.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var v=this.transceivers.find(function(y){return y.rtpSender===p});if(!v)throw sc("InvalidAccessError","Sender was not created by this connection.");var _=v.stream;v.rtpSender.stop(),v.rtpSender=null,v.track=null,v.stream=null,-1===this.transceivers.map(function(y){return y.stream}).indexOf(_)&&this.localStreams.indexOf(_)>-1&&this.localStreams.splice(this.localStreams.indexOf(_),1),this._maybeFireNegotiationNeeded()},h.prototype.removeStream=function(p){var v=this;p.getTracks().forEach(function(_){var y=v.getSenders().find(function(b){return b.track===_});y&&v.removeTrack(y)})},h.prototype.getSenders=function(){return this.transceivers.filter(function(p){return!!p.rtpSender}).map(function(p){return p.rtpSender})},h.prototype.getReceivers=function(){return this.transceivers.filter(function(p){return!!p.rtpReceiver}).map(function(p){return p.rtpReceiver})},h.prototype._createIceGatherer=function(p,v){var _=this;if(v&&p>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var y=new n.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(y,"state",{value:"new",writable:!0}),this.transceivers[p].bufferedCandidateEvents=[],this.transceivers[p].bufferCandidates=function(b){var C=!b.candidate||0===Object.keys(b.candidate).length;y.state=C?"completed":"gathering",null!==_.transceivers[p].bufferedCandidateEvents&&_.transceivers[p].bufferedCandidateEvents.push(b)},y.addEventListener("localcandidate",this.transceivers[p].bufferCandidates),y},h.prototype._gather=function(p,v){var _=this,y=this.transceivers[v].iceGatherer;if(!y.onlocalcandidate){var b=this.transceivers[v].bufferedCandidateEvents;this.transceivers[v].bufferedCandidateEvents=null,y.removeEventListener("localcandidate",this.transceivers[v].bufferCandidates),y.onlocalcandidate=function(C){if(!(_.usingBundle&&v>0)){var w=new Event("icecandidate");w.candidate={sdpMid:p,sdpMLineIndex:v};var P=C.candidate,j=!P||0===Object.keys(P).length;if(j)"new"!==y.state&&"gathering"!==y.state||(y.state="completed");else{"new"===y.state&&(y.state="gathering"),P.component=1,P.ufrag=y.getLocalParameters().usernameFragment;var G=oi.writeCandidate(P);w.candidate=Object.assign(w.candidate,oi.parseCandidate(G)),w.candidate.candidate=G,w.candidate.toJSON=function(){return{candidate:w.candidate.candidate,sdpMid:w.candidate.sdpMid,sdpMLineIndex:w.candidate.sdpMLineIndex,usernameFragment:w.candidate.usernameFragment}}}var Z=oi.getMediaSections(_._localDescription.sdp);Z[w.candidate.sdpMLineIndex]+=j?"a=end-of-candidates\r\n":"a="+w.candidate.candidate+"\r\n",_._localDescription.sdp=oi.getDescription(_._localDescription.sdp)+Z.join("");var ae=_.transceivers.every(function(fe){return fe.iceGatherer&&"completed"===fe.iceGatherer.state});"gathering"!==_.iceGatheringState&&(_.iceGatheringState="gathering",_._emitGatheringStateChange()),j||_._dispatchEvent("icecandidate",w),ae&&(_._dispatchEvent("icecandidate",new Event("icecandidate")),_.iceGatheringState="complete",_._emitGatheringStateChange())}},n.setTimeout(function(){b.forEach(function(C){y.onlocalcandidate(C)})},0)}},h.prototype._createIceAndDtlsTransports=function(){var p=this,v=new n.RTCIceTransport(null);v.onicestatechange=function(){p._updateIceConnectionState(),p._updateConnectionState()};var _=new n.RTCDtlsTransport(v);return _.ondtlsstatechange=function(){p._updateConnectionState()},_.onerror=function(){Object.defineProperty(_,"state",{value:"failed",writable:!0}),p._updateConnectionState()},{iceTransport:v,dtlsTransport:_}},h.prototype._disposeIceAndDtlsTransports=function(p){var v=this.transceivers[p].iceGatherer;v&&(delete v.onlocalcandidate,delete this.transceivers[p].iceGatherer);var _=this.transceivers[p].iceTransport;_&&(delete _.onicestatechange,delete this.transceivers[p].iceTransport);var y=this.transceivers[p].dtlsTransport;y&&(delete y.ondtlsstatechange,delete y.onerror,delete this.transceivers[p].dtlsTransport)},h.prototype._transceive=function(p,v,_){var y=AD(p.localCapabilities,p.remoteCapabilities);v&&p.rtpSender&&(y.encodings=p.sendEncodingParameters,y.rtcp={cname:oi.localCName,compound:p.rtcpParameters.compound},p.recvEncodingParameters.length&&(y.rtcp.ssrc=p.recvEncodingParameters[0].ssrc),p.rtpSender.send(y)),_&&p.rtpReceiver&&y.codecs.length>0&&("video"===p.kind&&p.recvEncodingParameters&&i<15019&&p.recvEncodingParameters.forEach(function(b){delete b.rtx}),y.encodings=p.recvEncodingParameters.length?p.recvEncodingParameters:[{}],y.rtcp={compound:p.rtcpParameters.compound},p.rtcpParameters.cname&&(y.rtcp.cname=p.rtcpParameters.cname),p.sendEncodingParameters.length&&(y.rtcp.ssrc=p.sendEncodingParameters[0].ssrc),p.rtpReceiver.receive(y))},h.prototype.setLocalDescription=function(p){var v,_,y=this;if(-1===["offer","answer"].indexOf(p.type))return Promise.reject(sc("TypeError",'Unsupported type "'+p.type+'"'));if(!eM("setLocalDescription",p.type,y.signalingState)||y._isClosed)return Promise.reject(sc("InvalidStateError","Can not set local "+p.type+" in state "+y.signalingState));if("offer"===p.type)v=oi.splitSections(p.sdp),_=v.shift(),v.forEach(function(C,w){var P=oi.parseRtpParameters(C);y.transceivers[w].localCapabilities=P}),y.transceivers.forEach(function(C,w){y._gather(C.mid,w)});else if("answer"===p.type){v=oi.splitSections(y._remoteDescription.sdp),_=v.shift();var b=oi.matchPrefix(_,"a=ice-lite").length>0;v.forEach(function(C,w){var P=y.transceivers[w],j=P.iceGatherer,G=P.iceTransport,Z=P.dtlsTransport,ae=P.localCapabilities,fe=P.remoteCapabilities;if(!(oi.isRejected(C)&&0===oi.matchPrefix(C,"a=bundle-only").length||P.rejected)){var be=oi.getIceParameters(C,_),Ce=oi.getDtlsParameters(C,_);b&&(Ce.role="server"),y.usingBundle&&0!==w||(y._gather(P.mid,w),"new"===G.state&&G.start(j,be,b?"controlling":"controlled"),"new"===Z.state&&Z.start(Ce));var it=AD(ae,fe);y._transceive(P,it.codecs.length>0,!1)}})}return y._localDescription={type:p.type,sdp:p.sdp},y._updateSignalingState("offer"===p.type?"have-local-offer":"stable"),Promise.resolve()},h.prototype.setRemoteDescription=function(p){var v=this;if(-1===["offer","answer"].indexOf(p.type))return Promise.reject(sc("TypeError",'Unsupported type "'+p.type+'"'));if(!eM("setRemoteDescription",p.type,v.signalingState)||v._isClosed)return Promise.reject(sc("InvalidStateError","Can not set remote "+p.type+" in state "+v.signalingState));var _={};v.remoteStreams.forEach(function(G){_[G.id]=G});var y=[],b=oi.splitSections(p.sdp),C=b.shift(),w=oi.matchPrefix(C,"a=ice-lite").length>0,P=oi.matchPrefix(C,"a=group:BUNDLE ").length>0;v.usingBundle=P;var j=oi.matchPrefix(C,"a=ice-options:")[0];return v.canTrickleIceCandidates=!!j&&j.substr(14).split(" ").indexOf("trickle")>=0,b.forEach(function(G,Z){var ae=oi.splitLines(G),fe=oi.getKind(G),be=oi.isRejected(G)&&0===oi.matchPrefix(G,"a=bundle-only").length,Ce=ae[0].substr(2).split(" ")[2],it=oi.getDirection(G,C),wt=oi.parseMsid(G),bt=oi.getMid(G)||oi.generateIdentifier();if(be||"application"===fe&&("DTLS/SCTP"===Ce||"UDP/DTLS/SCTP"===Ce))v.transceivers[Z]={mid:bt,kind:fe,protocol:Ce,rejected:!0};else{var Pt,En,pn,un,yt,Ge,ot,_t,bn;!be&&v.transceivers[Z]&&v.transceivers[Z].rejected&&(v.transceivers[Z]=v._createTransceiver(fe,!0));var Je,at,Rt=oi.parseRtpParameters(G);be||(Je=oi.getIceParameters(G,C),(at=oi.getDtlsParameters(G,C)).role="client"),ot=oi.parseRtpEncodingParameters(G);var cn=oi.parseRtcpParameters(G),Rn=oi.matchPrefix(G,"a=end-of-candidates",C).length>0,Vt=oi.matchPrefix(G,"a=candidate:").map(function(ke){return oi.parseCandidate(ke)}).filter(function(ke){return 1===ke.component});if(("offer"===p.type||"answer"===p.type)&&!be&&P&&Z>0&&v.transceivers[Z]&&(v._disposeIceAndDtlsTransports(Z),v.transceivers[Z].iceGatherer=v.transceivers[0].iceGatherer,v.transceivers[Z].iceTransport=v.transceivers[0].iceTransport,v.transceivers[Z].dtlsTransport=v.transceivers[0].dtlsTransport,v.transceivers[Z].rtpSender&&v.transceivers[Z].rtpSender.setTransport(v.transceivers[0].dtlsTransport),v.transceivers[Z].rtpReceiver&&v.transceivers[Z].rtpReceiver.setTransport(v.transceivers[0].dtlsTransport)),"offer"!==p.type||be)"answer"===p.type&&!be&&(En=(Pt=v.transceivers[Z]).iceGatherer,pn=Pt.iceTransport,un=Pt.dtlsTransport,yt=Pt.rtpReceiver,Ge=Pt.sendEncodingParameters,_t=Pt.localCapabilities,v.transceivers[Z].recvEncodingParameters=ot,v.transceivers[Z].remoteCapabilities=Rt,v.transceivers[Z].rtcpParameters=cn,Vt.length&&"new"===pn.state&&(!w&&!Rn||P&&0!==Z?Vt.forEach(function(ke){ST(Pt.iceTransport,ke)}):pn.setRemoteCandidates(Vt)),P&&0!==Z||("new"===pn.state&&pn.start(En,Je,"controlling"),"new"===un.state&&un.start(at)),!AD(Pt.localCapabilities,Pt.remoteCapabilities).codecs.filter(function(ke){return"rtx"===ke.name.toLowerCase()}).length&&Pt.sendEncodingParameters[0].rtx&&delete Pt.sendEncodingParameters[0].rtx,v._transceive(Pt,"sendrecv"===it||"recvonly"===it,"sendrecv"===it||"sendonly"===it),!yt||"sendrecv"!==it&&"sendonly"!==it?delete Pt.rtpReceiver:(bn=yt.track,wt?(_[wt.stream]||(_[wt.stream]=new n.MediaStream),o(bn,_[wt.stream]),y.push([bn,yt,_[wt.stream]])):(_.default||(_.default=new n.MediaStream),o(bn,_.default),y.push([bn,yt,_.default]))));else{(Pt=v.transceivers[Z]||v._createTransceiver(fe)).mid=bt,Pt.iceGatherer||(Pt.iceGatherer=v._createIceGatherer(Z,P)),Vt.length&&"new"===Pt.iceTransport.state&&(!Rn||P&&0!==Z?Vt.forEach(function(ke){ST(Pt.iceTransport,ke)}):Pt.iceTransport.setRemoteCandidates(Vt)),_t=n.RTCRtpReceiver.getCapabilities(fe),i<15019&&(_t.codecs=_t.codecs.filter(function(ke){return"rtx"!==ke.name})),Ge=Pt.sendEncodingParameters||[{ssrc:1001*(2*Z+2)}];var V,_e=!1;"sendrecv"===it||"sendonly"===it?(_e=!Pt.rtpReceiver,yt=Pt.rtpReceiver||new n.RTCRtpReceiver(Pt.dtlsTransport,fe),_e&&(bn=yt.track,wt&&"-"===wt.stream||(wt?(_[wt.stream]||(_[wt.stream]=new n.MediaStream,Object.defineProperty(_[wt.stream],"id",{get:function(){return wt.stream}})),Object.defineProperty(bn,"id",{get:function(){return wt.track}}),V=_[wt.stream]):(_.default||(_.default=new n.MediaStream),V=_.default)),V&&(o(bn,V),Pt.associatedRemoteMediaStreams.push(V)),y.push([bn,yt,V]))):Pt.rtpReceiver&&Pt.rtpReceiver.track&&(Pt.associatedRemoteMediaStreams.forEach(function(ke){var In,Tr,Nt=ke.getTracks().find(function(In){return In.id===Pt.rtpReceiver.track.id});Nt&&((Tr=ke).removeTrack(In=Nt),Tr.dispatchEvent(new n.MediaStreamTrackEvent("removetrack",{track:In})))}),Pt.associatedRemoteMediaStreams=[]),Pt.localCapabilities=_t,Pt.remoteCapabilities=Rt,Pt.rtpReceiver=yt,Pt.rtcpParameters=cn,Pt.sendEncodingParameters=Ge,Pt.recvEncodingParameters=ot,v._transceive(v.transceivers[Z],!1,_e)}}}),void 0===v._dtlsRole&&(v._dtlsRole="offer"===p.type?"active":"passive"),v._remoteDescription={type:p.type,sdp:p.sdp},v._updateSignalingState("offer"===p.type?"have-remote-offer":"stable"),Object.keys(_).forEach(function(G){var Z=_[G];if(Z.getTracks().length){if(-1===v.remoteStreams.indexOf(Z)){v.remoteStreams.push(Z);var ae=new Event("addstream");ae.stream=Z,n.setTimeout(function(){v._dispatchEvent("addstream",ae)})}y.forEach(function(fe){Z.id===fe[2].id&&c(v,fe[0],fe[1],[Z])})}}),y.forEach(function(G){G[2]||c(v,G[0],G[1],[])}),n.setTimeout(function(){v&&v.transceivers&&v.transceivers.forEach(function(G){G.iceTransport&&"new"===G.iceTransport.state&&G.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),G.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},h.prototype.close=function(){this.transceivers.forEach(function(p){p.iceTransport&&p.iceTransport.stop(),p.dtlsTransport&&p.dtlsTransport.stop(),p.rtpSender&&p.rtpSender.stop(),p.rtpReceiver&&p.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},h.prototype._updateSignalingState=function(p){this.signalingState=p;var v=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",v)},h.prototype._maybeFireNegotiationNeeded=function(){var p=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,n.setTimeout(function(){if(p.needNegotiation){p.needNegotiation=!1;var v=new Event("negotiationneeded");p._dispatchEvent("negotiationneeded",v)}},0))},h.prototype._updateIceConnectionState=function(){var p,v={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(y){y.iceTransport&&!y.rejected&&v[y.iceTransport.state]++}),p="new",v.failed>0?p="failed":v.checking>0?p="checking":v.disconnected>0?p="disconnected":v.new>0?p="new":v.connected>0?p="connected":v.completed>0&&(p="completed"),p!==this.iceConnectionState){this.iceConnectionState=p;var _=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",_)}},h.prototype._updateConnectionState=function(){var p,v={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(y){y.iceTransport&&y.dtlsTransport&&!y.rejected&&(v[y.iceTransport.state]++,v[y.dtlsTransport.state]++)}),v.connected+=v.completed,p="new",v.failed>0?p="failed":v.connecting>0?p="connecting":v.disconnected>0?p="disconnected":v.new>0?p="new":v.connected>0&&(p="connected"),p!==this.connectionState){this.connectionState=p;var _=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",_)}},h.prototype.createOffer=function(){var p=this;if(p._isClosed)return Promise.reject(sc("InvalidStateError","Can not call createOffer after close"));var v=p.transceivers.filter(function(w){return"audio"===w.kind}).length,_=p.transceivers.filter(function(w){return"video"===w.kind}).length,y=arguments[0];if(y){if(y.mandatory||y.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==y.offerToReceiveAudio&&(v=!0===y.offerToReceiveAudio?1:!1===y.offerToReceiveAudio?0:y.offerToReceiveAudio),void 0!==y.offerToReceiveVideo&&(_=!0===y.offerToReceiveVideo?1:!1===y.offerToReceiveVideo?0:y.offerToReceiveVideo)}for(p.transceivers.forEach(function(w){"audio"===w.kind?--v<0&&(w.wantReceive=!1):"video"===w.kind&&--_<0&&(w.wantReceive=!1)});v>0||_>0;)v>0&&(p._createTransceiver("audio"),v--),_>0&&(p._createTransceiver("video"),_--);var b=oi.writeSessionBoilerplate(p._sdpSessionId,p._sdpSessionVersion++);p.transceivers.forEach(function(w,P){var j=w.track,G=w.kind,Z=w.mid||oi.generateIdentifier();w.mid=Z,w.iceGatherer||(w.iceGatherer=p._createIceGatherer(P,p.usingBundle));var ae=n.RTCRtpSender.getCapabilities(G);i<15019&&(ae.codecs=ae.codecs.filter(function(be){return"rtx"!==be.name})),ae.codecs.forEach(function(be){"H264"===be.name&&void 0===be.parameters["level-asymmetry-allowed"]&&(be.parameters["level-asymmetry-allowed"]="1"),w.remoteCapabilities&&w.remoteCapabilities.codecs&&w.remoteCapabilities.codecs.forEach(function(Ce){be.name.toLowerCase()===Ce.name.toLowerCase()&&be.clockRate===Ce.clockRate&&(be.preferredPayloadType=Ce.payloadType)})}),ae.headerExtensions.forEach(function(be){(w.remoteCapabilities&&w.remoteCapabilities.headerExtensions||[]).forEach(function(Ce){be.uri===Ce.uri&&(be.id=Ce.id)})});var fe=w.sendEncodingParameters||[{ssrc:1001*(2*P+1)}];j&&i>=15019&&"video"===G&&!fe[0].rtx&&(fe[0].rtx={ssrc:fe[0].ssrc+1}),w.wantReceive&&(w.rtpReceiver=new n.RTCRtpReceiver(w.dtlsTransport,G)),w.localCapabilities=ae,w.sendEncodingParameters=fe}),"max-compat"!==p._config.bundlePolicy&&(b+="a=group:BUNDLE "+p.transceivers.map(function(w){return w.mid}).join(" ")+"\r\n"),b+="a=ice-options:trickle\r\n",p.transceivers.forEach(function(w,P){b+=bT(w,w.localCapabilities,"offer",w.stream,p._dtlsRole),b+="a=rtcp-rsize\r\n",!w.iceGatherer||"new"===p.iceGatheringState||0!==P&&p.usingBundle||(w.iceGatherer.getLocalCandidates().forEach(function(j){j.component=1,b+="a="+oi.writeCandidate(j)+"\r\n"}),"completed"===w.iceGatherer.state&&(b+="a=end-of-candidates\r\n"))});var C=new n.RTCSessionDescription({type:"offer",sdp:b});return Promise.resolve(C)},h.prototype.createAnswer=function(){var p=this;if(p._isClosed)return Promise.reject(sc("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==p.signalingState&&"have-local-pranswer"!==p.signalingState)return Promise.reject(sc("InvalidStateError","Can not call createAnswer in signalingState "+p.signalingState));var v=oi.writeSessionBoilerplate(p._sdpSessionId,p._sdpSessionVersion++);p.usingBundle&&(v+="a=group:BUNDLE "+p.transceivers.map(function(b){return b.mid}).join(" ")+"\r\n"),v+="a=ice-options:trickle\r\n";var _=oi.getMediaSections(p._remoteDescription.sdp).length;p.transceivers.forEach(function(b,C){if(!(C+1>_)){if(b.rejected)return"application"===b.kind?v+="DTLS/SCTP"===b.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+b.protocol+" webrtc-datachannel\r\n":"audio"===b.kind?v+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===b.kind&&(v+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(v+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+b.mid+"\r\n");var w;b.stream&&("audio"===b.kind?w=b.stream.getAudioTracks()[0]:"video"===b.kind&&(w=b.stream.getVideoTracks()[0]),w&&i>=15019&&"video"===b.kind&&!b.sendEncodingParameters[0].rtx&&(b.sendEncodingParameters[0].rtx={ssrc:b.sendEncodingParameters[0].ssrc+1}));var P=AD(b.localCapabilities,b.remoteCapabilities);!P.codecs.filter(function(j){return"rtx"===j.name.toLowerCase()}).length&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,v+=bT(b,P,"answer",b.stream,p._dtlsRole),b.rtcpParameters&&b.rtcpParameters.reducedSize&&(v+="a=rtcp-rsize\r\n")}});var y=new n.RTCSessionDescription({type:"answer",sdp:v});return Promise.resolve(y)},h.prototype.addIceCandidate=function(p){var v,_=this;return p&&void 0===p.sdpMLineIndex&&!p.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(y,b){if(!_._remoteDescription)return b(sc("InvalidStateError","Can not add ICE candidate without a remote description"));if(p&&""!==p.candidate){var C=p.sdpMLineIndex;if(p.sdpMid)for(var w=0;w<_.transceivers.length;w++)if(_.transceivers[w].mid===p.sdpMid){C=w;break}var P=_.transceivers[C];if(!P)return b(sc("OperationError","Can not add ICE candidate"));if(P.rejected)return y();var j=Object.keys(p.candidate).length>0?oi.parseCandidate(p.candidate):{};if("tcp"===j.protocol&&(0===j.port||9===j.port)||j.component&&1!==j.component)return y();if((0===C||C>0&&P.iceTransport!==_.transceivers[0].iceTransport)&&!ST(P.iceTransport,j))return b(sc("OperationError","Can not add ICE candidate"));var G=p.candidate.trim();0===G.indexOf("a=")&&(G=G.substr(2)),(v=oi.getMediaSections(_._remoteDescription.sdp))[C]+="a="+(j.type?G:"end-of-candidates")+"\r\n",_._remoteDescription.sdp=oi.getDescription(_._remoteDescription.sdp)+v.join("")}else for(var Z=0;Z<_.transceivers.length&&(_.transceivers[Z].rejected||(_.transceivers[Z].iceTransport.addRemoteCandidate({}),(v=oi.getMediaSections(_._remoteDescription.sdp))[Z]+="a=end-of-candidates\r\n",_._remoteDescription.sdp=oi.getDescription(_._remoteDescription.sdp)+v.join(""),!_.usingBundle));Z++);y()})},h.prototype.getStats=function(p){if(p&&p instanceof n.MediaStreamTrack){var v=null;if(this.transceivers.forEach(function(y){y.rtpSender&&y.rtpSender.track===p?v=y.rtpSender:y.rtpReceiver&&y.rtpReceiver.track===p&&(v=y.rtpReceiver)}),!v)throw sc("InvalidAccessError","Invalid selector.");return v.getStats()}var _=[];return this.transceivers.forEach(function(y){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(b){y[b]&&_.push(y[b].getStats())})}),Promise.all(_).then(function(y){var b=new Map;return y.forEach(function(C){C.forEach(function(w){b.set(w.id,w)})}),b})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(p){var v=n[p];if(v&&v.prototype&&v.prototype.getStats){var _=v.prototype.getStats;v.prototype.getStats=function(){return _.apply(this).then(function(y){var b=new Map;return Object.keys(y).forEach(function(C){var w;y[C].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(w=y[C]).type]||w.type,b.set(C,y[C])}),b})}}});var g=["createOffer","createAnswer"];return g.forEach(function(p){var v=h.prototype[p];h.prototype[p]=function(){var _=arguments;return"function"==typeof _[0]||"function"==typeof _[1]?v.apply(this,[arguments[2]]).then(function(y){"function"==typeof _[0]&&_[0].apply(null,[y])},function(y){"function"==typeof _[1]&&_[1].apply(null,[y])}):v.apply(this,arguments)}}),(g=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(p){var v=h.prototype[p];h.prototype[p]=function(){var _=arguments;return"function"==typeof _[1]||"function"==typeof _[2]?v.apply(this,arguments).then(function(){"function"==typeof _[1]&&_[1].apply(null)},function(y){"function"==typeof _[2]&&_[2].apply(null,[y])}):v.apply(this,arguments)}}),["getStats"].forEach(function(p){var v=h.prototype[p];h.prototype[p]=function(){var _=arguments;return"function"==typeof _[1]?v.apply(this,arguments).then(function(){"function"==typeof _[1]&&_[1].apply(null)}):v.apply(this,arguments)}}),h}(n,i.version);n.RTCPeerConnection=function(c){return c&&c.iceServers&&(c.iceServers=function(h,g){let p=!1;return(h=JSON.parse(JSON.stringify(h))).filter(v=>{if(v&&(v.urls||v.url)){let _=v.urls||v.url;v.url&&!v.urls&&H_("RTCIceServer.url","RTCIceServer.urls");const y="string"==typeof _;return y&&(_=[_]),_=_.filter(b=>{if(0===b.indexOf("stun:"))return!1;const C=b.startsWith("turn")&&!b.startsWith("turn:[")&&b.includes("transport=udp");return C&&!p?(p=!0,!0):C&&!p}),delete v.url,v.urls=y?_[0]:_,!!_.length}})}(c.iceServers),dI("ICE servers after filtering:",c.iceServers)),new o(c)},n.RTCPeerConnection.prototype=o.prototype}function ZF(n){n.RTCRtpSender&&!("replaceTrack"in n.RTCRtpSender.prototype)&&(n.RTCRtpSender.prototype.replaceTrack=n.RTCRtpSender.prototype.setTrack)}var eU=Object.freeze({__proto__:null,shimPeerConnection:rM,shimReplaceTrack:ZF,shimGetUserMedia:$F,shimGetDisplayMedia:nM}),mS=mE,iM=qn,CT=tt,IT=x0,tU=zB,A8=id.exports;if(fc({target:"Promise",proto:!0,real:!0,forced:!!mS&&D(function(){mS.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var i=IT(this,iM("Promise")),o=CT(n);return this.then(o?function(c){return tU(i,n()).then(function(){return c})}:n,o?function(c){return tU(i,n()).then(function(){throw c})}:n)}}),CT(mS)){var yD=iM("Promise").prototype.finally;mS.prototype.finally!==yD&&A8(mS.prototype,"finally",yD,{unsafe:!0})}function oM(n,i){const o=n&&n.navigator,c=n&&n.MediaStreamTrack;if(o.getUserMedia=function(h,g,p){H_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(h).then(g,p)},!(i.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){const h=function(p,v,_){v in p&&!(_ in p)&&(p[_]=p[v],delete p[v])},g=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(p){return"object"==typeof p&&"object"==typeof p.audio&&(p=JSON.parse(JSON.stringify(p)),h(p.audio,"autoGainControl","mozAutoGainControl"),h(p.audio,"noiseSuppression","mozNoiseSuppression")),g(p)},c&&c.prototype.getSettings){const p=c.prototype.getSettings;c.prototype.getSettings=function(){const v=p.apply(this,arguments);return h(v,"mozAutoGainControl","autoGainControl"),h(v,"mozNoiseSuppression","noiseSuppression"),v}}if(c&&c.prototype.applyConstraints){const p=c.prototype.applyConstraints;c.prototype.applyConstraints=function(v){return"audio"===this.kind&&"object"==typeof v&&(v=JSON.parse(JSON.stringify(v)),h(v,"autoGainControl","mozAutoGainControl"),h(v,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[v])}}}}function nU(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function TT(n,i){if("object"!=typeof n||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(h){const g=n.RTCPeerConnection.prototype[h],p={[h](){return arguments[0]=new("addIceCandidate"===h?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),g.apply(this,arguments)}};n.RTCPeerConnection.prototype[h]=p[h]});const o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[h,g,p]=arguments;return c.apply(this,[h||null]).then(v=>{if(i.version<53&&!g)try{v.forEach(_=>{_.type=o[_.type]||_.type})}catch(_){if("TypeError"!==_.name)throw _;v.forEach((y,b)=>{v.set(b,Object.assign({},y,{type:o[y.type]||y.type}))})}return v}).then(g,p)}}function rU(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const i=n.RTCPeerConnection.prototype.getSenders;i&&(n.RTCPeerConnection.prototype.getSenders=function(){const c=i.apply(this,[]);return c.forEach(h=>h._pc=this),c});const o=n.RTCPeerConnection.prototype.addTrack;o&&(n.RTCPeerConnection.prototype.addTrack=function(){const c=o.apply(this,arguments);return c._pc=this,c}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Qn.resolve(new Map)}}function iU(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const i=n.RTCPeerConnection.prototype.getReceivers;i&&(n.RTCPeerConnection.prototype.getReceivers=function(){const o=i.apply(this,[]);return o.forEach(c=>c._pc=this),o}),Tf(n,"track",o=>(o.receiver._pc=o.srcElement,o)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function oU(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(i){H_("removeStream","removeTrack"),this.getSenders().forEach(o=>{o.track&&i.getTracks().includes(o.track)&&this.removeTrack(o)})})}function ED(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function sU(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype.addTransceiver;i&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const o=arguments[1],c=o&&"sendEncodings"in o;c&&o.sendEncodings.forEach(g=>{if("rid"in g&&!/^[a-z0-9]{0,16}$/i.test(g.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in g&&!(parseFloat(g.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in g&&!(parseFloat(g.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const h=i.apply(this,arguments);if(c){const{sender:g}=h,p=g.getParameters();(!("encodings"in p)||1===p.encodings.length&&0===Object.keys(p.encodings[0]).length)&&(p.encodings=o.sendEncodings,g.sendEncodings=o.sendEncodings,this.setParametersPromises.push(g.setParameters(p).then(()=>{delete g.sendEncodings}).catch(()=>{delete g.sendEncodings})))}return h})}function aU(n){if("object"!=typeof n||!n.RTCRtpSender)return;const i=n.RTCRtpSender.prototype.getParameters;i&&(n.RTCRtpSender.prototype.getParameters=function(){const o=i.apply(this,arguments);return"encodings"in o||(o.encodings=[].concat(this.sendEncodings||[{}])),o})}function cU(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Qn.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}function bD(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Qn.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}var SD=Object.freeze({__proto__:null,shimOnTrack:nU,shimPeerConnection:TT,shimSenderGetStats:rU,shimReceiverGetStats:iU,shimRemoveStream:oU,shimRTCDataChannel:ED,shimAddTransceiver:sU,shimGetParameters:aU,shimCreateOffer:cU,shimCreateAnswer:bD,shimGetUserMedia:oM,shimGetDisplayMedia:function(n,i){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(o){if(!o||!o.video){const c=new DOMException("getDisplayMedia without video constraints is undefined");return c.name="NotFoundError",c.code=8,Qn.reject(c)}return!0===o.video?o.video={mediaSource:i}:o.video.mediaSource=i,n.navigator.mediaDevices.getUserMedia(o)})}});function sM(n){if("object"==typeof n&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(o){this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(c=>i.call(this,c,o)),o.getVideoTracks().forEach(c=>i.call(this,c,o))},n.RTCPeerConnection.prototype.addTrack=function(o){for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];return h&&h.forEach(p=>{this._localStreams?this._localStreams.includes(p)||this._localStreams.push(p):this._localStreams=[p]}),i.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const o=this._localStreams.indexOf(i);if(-1===o)return;this._localStreams.splice(o,1);const c=i.getTracks();this.getSenders().forEach(h=>{c.includes(h.track)&&this.removeTrack(h)})})}}function uU(n){if("object"==typeof n&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(o){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(h=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(h))return;this._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,this.dispatchEvent(g)})})}});const i=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(h=>{if(o._remoteStreams||(o._remoteStreams=[]),o._remoteStreams.indexOf(h)>=0)return;o._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,o.dispatchEvent(g)})}),i.apply(o,arguments)}}}function y8(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype,o=i.createOffer,c=i.createAnswer,h=i.setLocalDescription,g=i.setRemoteDescription,p=i.addIceCandidate;i.createOffer=function(_,y){const C=o.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return y?(C.then(_,y),Qn.resolve()):C},i.createAnswer=function(_,y){const C=c.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return y?(C.then(_,y),Qn.resolve()):C};let v=function(_,y,b){const C=h.apply(this,[_]);return b?(C.then(y,b),Qn.resolve()):C};i.setLocalDescription=v,v=function(_,y,b){const C=g.apply(this,[_]);return b?(C.then(y,b),Qn.resolve()):C},i.setRemoteDescription=v,v=function(_,y,b){const C=p.apply(this,[_]);return b?(C.then(y,b),Qn.resolve()):C},i.addIceCandidate=v}function aM(n){const i=n&&n.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){const o=i.mediaDevices,c=o.getUserMedia.bind(o);i.mediaDevices.getUserMedia=h=>c(CD(h))}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(o,c,h){i.mediaDevices.getUserMedia(o).then(c,h)}.bind(i))}function CD(n){return n&&void 0!==n.video?Object.assign({},n,{video:KR(n.video)}):n}function lU(n){if(!n.RTCPeerConnection)return;const i=n.RTCPeerConnection;n.RTCPeerConnection=function(o,c){if(o&&o.iceServers){const h=[];for(let g=0;g<o.iceServers.length;g++){let p=o.iceServers[g];!p.hasOwnProperty("urls")&&p.hasOwnProperty("url")?(H_("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,h.push(p)):h.push(o.iceServers[g])}o.iceServers=h}return new i(o,c)},n.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>i.generateCertificate})}function cM(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function uM(n){const i=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(o){if(o){void 0!==o.offerToReceiveAudio&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);const c=this.getTransceivers().find(g=>"audio"===g.receiver.track.kind);!1===o.offerToReceiveAudio&&c?"sendrecv"===c.direction?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":"recvonly"===c.direction&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):!0!==o.offerToReceiveAudio||c||this.addTransceiver("audio"),void 0!==o.offerToReceiveVideo&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);const h=this.getTransceivers().find(g=>"video"===g.receiver.track.kind);!1===o.offerToReceiveVideo&&h?"sendrecv"===h.direction?h.setDirection?h.setDirection("sendonly"):h.direction="sendonly":"recvonly"===h.direction&&(h.setDirection?h.setDirection("inactive"):h.direction="inactive"):!0!==o.offerToReceiveVideo||h||this.addTransceiver("video")}return i.apply(this,arguments)}}function dU(n){"object"!=typeof n||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var lM=Object.freeze({__proto__:null,shimLocalStreamsAPI:sM,shimRemoteStreamsAPI:uU,shimCallbacksAPI:y8,shimGetUserMedia:aM,shimConstraints:CD,shimRTCIceServerUrls:lU,shimTrackEventTransceiver:cM,shimCreateOfferLegacy:uM,shimAudioContext:dU}),E8=rp,gS=rl,pU=So("".replace),wT="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",dM=RegExp("^"+wT+wT+"*"),RT=RegExp(wT+wT+"*$"),OT=function(n){return function(i){var o=gS(E8(i));return 1&n&&(o=pU(o,dM,"")),2&n&&(o=pU(o,RT,"")),o}},fU={start:OT(1),end:OT(2),trim:OT(3)},sW=VI.PROPER,mU=hs,gU="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",b8=fU.trim;ns({target:"String",proto:!0,forced:function(n){return mU(function(){return!!gU[n]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[n]()||sW&&gU[n].name!==n})}("trim")},{trim:function(){return b8(this)}});var hM=qu("String").trim,aW=Qc,wp=hM,pM=String.prototype,by=function(n){var i=n.trim;return"string"==typeof n||n===pM||aW(pM,n)&&i===pM.trim?wp:i},S8=ie;fc({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return S8(URL.prototype.toString,this)}});var _U={exports:{}};!function(n){var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(o){return by(o).call(o).split("\n").map(function(c){return by(c).call(c)})},i.splitSections=function(o){return o.split("\nm=").map(function(c,h){var g;return by(g=h>0?"m="+c:c).call(g)+"\r\n"})},i.getDescription=function(o){var c=i.splitSections(o);return c&&c[0]},i.getMediaSections=function(o){var c=i.splitSections(o);return c.shift(),c},i.matchPrefix=function(o,c){return i.splitLines(o).filter(function(h){return 0===h.indexOf(c)})},i.parseCandidate=function(o){for(var c,h={foundation:(c=0===o.indexOf("a=candidate:")?o.substring(12).split(" "):o.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},i.writeCandidate=function(o){var c=[];c.push(o.foundation),c.push(o.component),c.push(o.protocol.toUpperCase()),c.push(o.priority),c.push(o.address||o.ip),c.push(o.port);var h=o.type;return c.push("typ"),c.push(h),"host"!==h&&o.relatedAddress&&o.relatedPort&&(c.push("raddr"),c.push(o.relatedAddress),c.push("rport"),c.push(o.relatedPort)),o.tcpType&&"tcp"===o.protocol.toLowerCase()&&(c.push("tcptype"),c.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(c.push("ufrag"),c.push(o.usernameFragment||o.ufrag)),"candidate:"+c.join(" ")},i.parseIceOptions=function(o){return o.substr(14).split(" ")},i.parseRtpMap=function(o){var c=o.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},i.writeRtpMap=function(o){var c=o.payloadType;void 0!==o.preferredPayloadType&&(c=o.preferredPayloadType);var h=o.channels||o.numChannels||1;return"a=rtpmap:"+c+" "+o.name+"/"+o.clockRate+(1!==h?"/"+h:"")+"\r\n"},i.parseExtmap=function(o){var c=o.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},i.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&"sendrecv"!==o.direction?"/"+o.direction:"")+" "+o.uri+"\r\n"},i.parseFmtp=function(o){for(var c,h={},g=o.substr(o.indexOf(" ")+1).split(";"),p=0;p<g.length;p++){var v,_;c=by(v=g[p]).call(v).split("="),h[by(_=c[0]).call(_)]=c[1]}return h},i.writeFmtp=function(o){var c="",h=o.payloadType;if(void 0!==o.preferredPayloadType&&(h=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){var g=[];Object.keys(o.parameters).forEach(function(p){g.push(o.parameters[p]?p+"="+o.parameters[p]:p)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},i.parseRtcpFb=function(o){var c=o.substr(o.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},i.writeRtcpFb=function(o){var c="",h=o.payloadType;return void 0!==o.preferredPayloadType&&(h=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},i.parseSsrcMedia=function(o){var c=o.indexOf(" "),h={ssrc:parseInt(o.substr(7,c-7),10)},g=o.indexOf(":",c);return g>-1?(h.attribute=o.substr(c+1,g-c-1),h.value=o.substr(g+1)):h.attribute=o.substr(c+1),h},i.parseSsrcGroup=function(o){var c=o.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},i.getMid=function(o){var c=i.matchPrefix(o,"a=mid:")[0];if(c)return c.substr(6)},i.parseFingerprint=function(o){var c=o.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},i.getDtlsParameters=function(o,c){return{role:"auto",fingerprints:i.matchPrefix(o+c,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(o,c){var h="a=setup:"+c+"\r\n";return o.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},i.parseCryptoLine=function(o){var c=o.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},i.writeCryptoLine=function(o){return"a=crypto:"+o.tag+" "+o.cryptoSuite+" "+("object"==typeof o.keyParams?i.writeCryptoKeyParams(o.keyParams):o.keyParams)+(o.sessionParams?" "+o.sessionParams.join(" "):"")+"\r\n"},i.parseCryptoKeyParams=function(o){if(0!==o.indexOf("inline:"))return null;var c=o.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(o){return o.keyMethod+":"+o.keySalt+(o.lifeTime?"|"+o.lifeTime:"")+(o.mkiValue&&o.mkiLength?"|"+o.mkiValue+":"+o.mkiLength:"")},i.getCryptoParameters=function(o,c){return i.matchPrefix(o+c,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(o,c){var h=i.matchPrefix(o+c,"a=ice-ufrag:")[0],g=i.matchPrefix(o+c,"a=ice-pwd:")[0];return h&&g?{usernameFragment:h.substr(12),password:g.substr(10)}:null},i.writeIceParameters=function(o){return"a=ice-ufrag:"+o.usernameFragment+"\r\na=ice-pwd:"+o.password+"\r\n"},i.parseRtpParameters=function(o){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=i.splitLines(o)[0].split(" "),g=3;g<h.length;g++){var p=h[g],v=i.matchPrefix(o,"a=rtpmap:"+p+" ")[0];if(v){var _=i.parseRtpMap(v),y=i.matchPrefix(o,"a=fmtp:"+p+" ");switch(_.parameters=y.length?i.parseFmtp(y[0]):{},_.rtcpFeedback=i.matchPrefix(o,"a=rtcp-fb:"+p+" ").map(i.parseRtcpFb),c.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(_.name.toUpperCase())}}}return i.matchPrefix(o,"a=extmap:").forEach(function(b){c.headerExtensions.push(i.parseExtmap(b))}),c},i.writeRtpDescription=function(o,c){var h="";h+="m="+o+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(p){return void 0!==p.preferredPayloadType?p.preferredPayloadType:p.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(p){h+=i.writeRtpMap(p),h+=i.writeFmtp(p),h+=i.writeRtcpFb(p)});var g=0;return c.codecs.forEach(function(p){p.maxptime>g&&(g=p.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(p){h+=i.writeExtmap(p)}),h},i.parseRtpEncodingParameters=function(o){var c,h=[],g=i.parseRtpParameters(o),p=-1!==g.fecMechanisms.indexOf("RED"),v=-1!==g.fecMechanisms.indexOf("ULPFEC"),_=i.matchPrefix(o,"a=ssrc:").map(function(w){return i.parseSsrcMedia(w)}).filter(function(w){return"cname"===w.attribute}),y=_.length>0&&_[0].ssrc,b=i.matchPrefix(o,"a=ssrc-group:FID").map(function(w){return w.substr(17).split(" ").map(function(P){return parseInt(P,10)})});b.length>0&&b[0].length>1&&b[0][0]===y&&(c=b[0][1]),g.codecs.forEach(function(w){if("RTX"===w.name.toUpperCase()&&w.parameters.apt){var P={ssrc:y,codecPayloadType:parseInt(w.parameters.apt,10)};y&&c&&(P.rtx={ssrc:c}),h.push(P),p&&((P=JSON.parse(JSON.stringify(P))).fec={ssrc:y,mechanism:v?"red+ulpfec":"red"},h.push(P))}}),0===h.length&&y&&h.push({ssrc:y});var C=i.matchPrefix(o,"b=");return C.length&&(C=0===C[0].indexOf("b=TIAS:")?parseInt(C[0].substr(7),10):0===C[0].indexOf("b=AS:")?1e3*parseInt(C[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(w){w.maxBitrate=C})),h},i.parseRtcpParameters=function(o){var c={},h=i.matchPrefix(o,"a=ssrc:").map(function(v){return i.parseSsrcMedia(v)}).filter(function(v){return"cname"===v.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=i.matchPrefix(o,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var p=i.matchPrefix(o,"a=rtcp-mux");return c.mux=p.length>0,c},i.parseMsid=function(o){var c,h=i.matchPrefix(o,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=i.matchPrefix(o,"a=ssrc:").map(function(p){return i.parseSsrcMedia(p)}).filter(function(p){return"msid"===p.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},i.parseSctpDescription=function(o){var c,h=i.parseMLine(o),g=i.matchPrefix(o,"a=max-message-size:");g.length>0&&(c=parseInt(g[0].substr(19),10)),isNaN(c)&&(c=65536);var p=i.matchPrefix(o,"a=sctp-port:");if(p.length>0)return{port:parseInt(p[0].substr(12),10),protocol:h.fmt,maxMessageSize:c};if(i.matchPrefix(o,"a=sctpmap:").length>0){var v=i.matchPrefix(o,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(v[0],10),protocol:v[1],maxMessageSize:c}}},i.writeSctpDescription=function(o,c){var h=[];return h="DTLS/SCTP"!==o.protocol?["m="+o.kind+" 9 "+o.protocol+" "+c.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+c.port+"\r\n"]:["m="+o.kind+" 9 "+o.protocol+" "+c.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+c.port+" "+c.protocol+" 65535\r\n"],void 0!==c.maxMessageSize&&h.push("a=max-message-size:"+c.maxMessageSize+"\r\n"),h.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(o,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(o||i.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(o,c,h,g){var p=i.writeRtpDescription(o.kind,c);if(p+=i.writeIceParameters(o.iceGatherer.getLocalParameters()),p+=i.writeDtlsParameters(o.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),p+="a=mid:"+o.mid+"\r\n",p+=o.direction?"a="+o.direction+"\r\n":o.rtpSender&&o.rtpReceiver?"a=sendrecv\r\n":o.rtpSender?"a=sendonly\r\n":o.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",o.rtpSender){var v="msid:"+g.id+" "+o.rtpSender.track.id+"\r\n";p+="a="+v,p+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" "+v,o.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" "+v,p+="a=ssrc-group:FID "+o.sendEncodingParameters[0].ssrc+" "+o.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return p+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",o.rtpSender&&o.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),p},i.getDirection=function(o,c){for(var h=i.splitLines(o),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?i.getDirection(c):"sendrecv"},i.getKind=function(o){return i.splitLines(o)[0].split(" ")[0].substr(2)},i.isRejected=function(o){return"0"===o.split(" ",2)[1]},i.parseMLine=function(o){var c=i.splitLines(o)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},i.parseOLine=function(o){var c=i.matchPrefix(o,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},i.isValidSDP=function(o){if("string"!=typeof o||0===o.length)return!1;for(var c=i.splitLines(o),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},n.exports=i}(_U);var ID=_U.exports;function TD(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const i=n.RTCIceCandidate;n.RTCIceCandidate=function(o){if("object"==typeof o&&o.candidate&&0===o.candidate.indexOf("a=")&&((o=JSON.parse(JSON.stringify(o))).candidate=o.candidate.substr(2)),o.candidate&&o.candidate.length){const c=new i(o),h=ID.parseCandidate(o.candidate),g=Object.assign(c,h);return g.toJSON=function(){return{candidate:g.candidate,sdpMid:g.sdpMid,sdpMLineIndex:g.sdpMLineIndex,usernameFragment:g.usernameFragment}},g}return new i(o)},n.RTCIceCandidate.prototype=i.prototype,Tf(n,"icecandidate",o=>(o.candidate&&Object.defineProperty(o,"candidate",{value:new n.RTCIceCandidate(o.candidate),writable:"false"}),o))}function DT(n,i){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const o=function(v){if(!v||!v.sdp)return!1;const _=ID.splitSections(v.sdp);return _.shift(),_.some(y=>{const b=ID.parseMLine(y);return b&&"application"===b.kind&&-1!==b.protocol.indexOf("SCTP")})},c=function(v){const _=v.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===_||_.length<2)return-1;const y=parseInt(_[1],10);return y!=y?-1:y},h=function(v){let _=65536;return"firefox"===i.browser&&(_=i.version<57?-1===v?16384:2147483637:i.version<60?57===i.version?65535:65536:2147483637),_},g=function(v,_){let y=65536;"firefox"===i.browser&&57===i.version&&(y=65535);const b=ID.matchPrefix(v.sdp,"a=max-message-size:");return b.length>0?y=parseInt(b[0].substr(19),10):"firefox"===i.browser&&-1!==_&&(y=2147483637),y},p=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===i.browser&&i.version>=76){const{sdpSemantics:v}=this.getConfiguration();"plan-b"===v&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(o(arguments[0])){const v=c(arguments[0]),_=h(v),y=g(arguments[0],v);let b;b=0===_&&0===y?Number.POSITIVE_INFINITY:0===_||0===y?Math.max(_,y):Math.min(_,y);const C={};Object.defineProperty(C,"maxMessageSize",{get:()=>b}),this._sctp=C}return p.apply(this,arguments)}}function kT(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function i(c,h){const g=c.send;c.send=function(){const p=arguments[0];if("open"===c.readyState&&h.sctp&&(p.length||p.size||p.byteLength)>h.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+h.sctp.maxMessageSize+" bytes)");return g.apply(c,arguments)}}const o=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const c=o.apply(this,arguments);return i(c,this),c},Tf(n,"datachannel",c=>(i(c.channel,c.target),c))}function fM(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const i=n.RTCPeerConnection.prototype;Object.defineProperty(i,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(i,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(o=>{const c=i[o];i[o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=h=>{const g=h.target;if(g._lastConnectionState!==g.connectionState){g._lastConnectionState=g.connectionState;const p=new Event("connectionstatechange",h);g.dispatchEvent(p)}return h},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function mM(n,i){if(!n.RTCPeerConnection||"chrome"===i.browser&&i.version>=71||"safari"===i.browser&&i.version>=605)return;const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(c){if(c&&c.sdp&&-1!==c.sdp.indexOf("\na=extmap-allow-mixed")){const h=c.sdp.split("\n").filter(g=>"a=extmap-allow-mixed"!==by(g).call(g)).join("\n");n.RTCSessionDescription&&c instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:c.type,sdp:h}):c.sdp=h}return o.apply(this,arguments)}}function wD(n,i){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype.addIceCandidate;o&&0!==o.length&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===i.browser&&i.version<78||"firefox"===i.browser&&i.version<68||"safari"===i.browser)&&arguments[0]&&""===arguments[0].candidate?Qn.resolve():o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Qn.resolve())})}var C8=Object.freeze({__proto__:null,shimRTCIceCandidate:TD,shimMaxMessageSize:DT,shimSendThrowTypeError:kT,shimConnectionState:fM,removeExtmapAllowMixed:mM,shimAddIceCandidateNullOrEmpty:wD});let pa,Li;(function(){let{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const o=dI,c=xb(n),h={browserDetails:c,commonShim:C8,extractVersion:QA,disableLog:WR,disableWarnings:Mb};switch(c.browser){case"chrome":if(!XF||!ZP||!i.shimChrome)return o("Chrome shim is not included in this adapter release."),h;if(null===c.version)return o("Chrome shim can not determine version, not shimming."),h;o("adapter.js shimming chrome."),h.browserShim=XF,wD(n,c),Di(n,c),qF(n),ZP(n,c),AT(n),ha(n,c),Qf(n),yT(n),kh(n),rs(n,c),TD(n),fM(n),DT(n,c),kT(n),mM(n,c);break;case"firefox":if(!SD||!TT||!i.shimFirefox)return o("Firefox shim is not included in this adapter release."),h;o("adapter.js shimming firefox."),h.browserShim=SD,wD(n,c),oM(n,c),TT(n,c),nU(n),oU(n),rU(n),iU(n),ED(n),sU(n),aU(n),cU(n),bD(n),TD(n),fM(n),DT(n,c),kT(n);break;case"edge":if(!eU||!rM||!i.shimEdge)return o("MS edge shim is not included in this adapter release."),h;o("adapter.js shimming edge."),h.browserShim=eU,$F(n),nM(n),rM(n,c),ZF(n),DT(n,c),kT(n);break;case"safari":if(!lM||!i.shimSafari)return o("Safari shim is not included in this adapter release."),h;o("adapter.js shimming safari."),h.browserShim=lM,wD(n,c),lU(n),uM(n),y8(n),sM(n),uU(n),cM(n),aM(n),dU(n),TD(n),DT(n,c),kT(n),mM(n,c);break;default:o("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(pa||(pa={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(Li||(Li={}));var gM={exports:{}};!function(n,i){!function(o,c){var h="function",g="object",p="string",v="model",_="name",y="type",b="vendor",C="version",w="architecture",P="console",j="mobile",G="tablet",Z="smarttv",ae="wearable",fe="embedded",be={extend:function(pn,un){var yt={};for(var Ge in pn)yt[Ge]=un[Ge]&&un[Ge].length%2==0?un[Ge].concat(pn[Ge]):pn[Ge];return yt},has:function(pn,un){return typeof pn===p&&-1!==un.toLowerCase().indexOf(pn.toLowerCase())},lowerize:function(pn){return pn.toLowerCase()},major:function(pn){return typeof pn===p?pn.replace(/[^\d\.]/g,"").split(".")[0]:c},trim:function(pn,un){return pn=pn.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===un?pn:pn.substring(0,255)}},Ce={rgx:function(pn,un){for(var yt,Ge,ot,_t,bn,Je,at=0;at<un.length&&!bn;){var Rt=un[at],cn=un[at+1];for(yt=Ge=0;yt<Rt.length&&!bn;)if(bn=Rt[yt++].exec(pn))for(ot=0;ot<cn.length;ot++)Je=bn[++Ge],typeof(_t=cn[ot])===g&&_t.length>0?2==_t.length?this[_t[0]]=typeof _t[1]==h?_t[1].call(this,Je):_t[1]:3==_t.length?this[_t[0]]=typeof _t[1]!==h||_t[1].exec&&_t[1].test?Je?Je.replace(_t[1],_t[2]):c:Je?_t[1].call(this,Je,_t[2]):c:4==_t.length&&(this[_t[0]]=Je?_t[3].call(this,Je.replace(_t[1],_t[2])):c):this[_t]=Je||c;at+=2}},str:function(pn,un){for(var yt in un)if(typeof un[yt]===g&&un[yt].length>0){for(var Ge=0;Ge<un[yt].length;Ge++)if(be.has(un[yt][Ge],pn))return"?"===yt?c:yt}else if(be.has(un[yt],pn))return"?"===yt?c:yt;return pn}},it={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},wt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[C,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[C,[_,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[_,C],[/opios[\/\s]+([\w\.]+)/i],[C,[_,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[C,[_,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[_,C],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[C,[_,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[C,[_,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[C,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[C,[_,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[C,[_,"IE"]],[/yabrowser\/([\w\.]+)/i],[C,[_,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure Browser"],C],[/focus\/([\w\.]+)/i],[C,[_,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[C,[_,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[C,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[C,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[C,[_,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[C,[_,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[C,[_,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[_,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 Browser"],C],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],C],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[_,C],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[_],[/;fbav\/([\w\.]+);/i],[C,[_,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[_,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[_,C],[/\bgsa\/([\w\.]+)\s.*safari\//i],[C,[_,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[C,[_,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[_,"Chrome WebView"],C],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[C,[_,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[_,C],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[C,[_,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[C,_],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[_,[C,Ce.str,it.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[_,C],[/(navigator|netscape)\/([\w\.-]+)/i],[[_,"Netscape"],C],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[C,[_,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[_,C]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,be.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[w,/ower/,"",be.lowerize]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,be.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[v,[b,"Samsung"],[y,G]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[v,[b,"Samsung"],[y,j]],[/\((ip(?:hone|od)[\s\w]*);/i],[v,[b,"Apple"],[y,j]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[b,"Apple"],[y,G]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[v,[b,"Huawei"],[y,G]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[v,[b,"Huawei"],[y,j]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[v,/_/g," "],[b,"Xiaomi"],[y,j]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[v,/_/g," "],[b,"Xiaomi"],[y,G]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[v,[b,"OPPO"],[y,j]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[v,[b,"Vivo"],[y,j]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[v,[b,"Realme"],[y,j]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[v,[b,"Motorola"],[y,j]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[v,[b,"Motorola"],[y,G]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[v,[b,"LG"],[y,G]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[v,[b,"LG"],[y,j]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[v,[b,"Lenovo"],[y,G]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[v,/_/g," "],[b,"Nokia"],[y,j]],[/droid.+;\s(pixel\sc)[\s)]/i],[v,[b,"Google"],[y,G]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[v,[b,"Google"],[y,j]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[b,"Sony"],[y,j]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[v,"Xperia Tablet"],[b,"Sony"],[y,G]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[v,[b,"OnePlus"],[y,j]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[v,[b,"Amazon"],[y,G]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[v,"Fire Phone"],[b,"Amazon"],[y,j]],[/\((playbook);[\w\s\),;-]+(rim)/i],[v,b,[y,G]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[v,[b,"BlackBerry"],[y,j]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[v,[b,"ASUS"],[y,G]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[v,[b,"ASUS"],[y,j]],[/(nexus\s9)/i],[v,[b,"HTC"],[y,G]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[b,[v,/_/g," "],[y,j]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[v,[b,"Acer"],[y,G]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[v,[b,"Meizu"],[y,j]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[b,v,[y,j]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[b,v,[y,G]],[/\s(surface\sduo)\s/i],[v,[b,"Microsoft"],[y,G]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[v,[b,"Fairphone"],[y,j]],[/\s(u304aa)\sbuild/i],[v,[b,"AT&T"],[y,j]],[/sie-(\w*)/i],[v,[b,"Siemens"],[y,j]],[/[;\/]\s?(rct\w+)\sbuild/i],[v,[b,"RCA"],[y,G]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[v,[b,"Dell"],[y,G]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[v,[b,"Verizon"],[y,G]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[v,[b,"Barnes & Noble"],[y,G]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[v,[b,"NuVision"],[y,G]],[/;\s(k88)\sbuild/i],[v,[b,"ZTE"],[y,G]],[/;\s(nx\d{3}j)\sbuild/i],[v,[b,"ZTE"],[y,j]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[v,[b,"Swiss"],[y,j]],[/[;\/]\s?(zur\d{3})\sbuild/i],[v,[b,"Swiss"],[y,G]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[v,[b,"Zeki"],[y,G]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[b,"Dragon Touch"],v,[y,G]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[v,[b,"Insignia"],[y,G]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[v,[b,"NextBook"],[y,G]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[b,"Voice"],v,[y,j]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[b,"LvTel"],v,[y,j]],[/;\s(ph-1)\s/i],[v,[b,"Essential"],[y,j]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[v,[b,"Envizen"],[y,G]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[v,[b,"MachSpeed"],[y,G]],[/[;\/]\s?tu_(1491)\sbuild/i],[v,[b,"Rotor"],[y,G]],[/(shield[\w\s]+)\sbuild/i],[v,[b,"Nvidia"],[y,G]],[/(sprint)\s(\w+)/i],[b,v,[y,j]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[b,"Microsoft"],[y,j]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[b,"Zebra"],[y,G]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[b,"Zebra"],[y,j]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[b,v,[y,P]],[/droid.+;\s(shield)\sbuild/i],[v,[b,"Nvidia"],[y,P]],[/(playstation\s[345portablevi]+)/i],[v,[b,"Sony"],[y,P]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[v,[b,"Microsoft"],[y,P]],[/smart-tv.+(samsung)/i],[b,[y,Z]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[b,"Samsung"],[y,Z]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[b,"LG"],[y,Z]],[/(apple)\s?tv/i],[b,[v,"Apple TV"],[y,Z]],[/crkey/i],[[v,"Chromecast"],[b,"Google"],[y,Z]],[/droid.+aft([\w])(\sbuild\/|\))/i],[v,[b,"Amazon"],[y,Z]],[/\(dtv[\);].+(aquos)/i],[v,[b,"Sharp"],[y,Z]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[b,be.trim],[v,be.trim],[y,Z]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[y,Z]],[/((pebble))app\/[\d\.]+\s/i],[b,v,[y,ae]],[/droid.+;\s(glass)\s\d/i],[v,[b,"Google"],[y,ae]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[v,[b,"Zebra"],[y,ae]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[b,[y,fe]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[v,[y,j]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[v,[y,G]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[y,be.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[v,[b,"Generic"]],[/(phone)/i],[[y,j]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[C,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[C,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[_,C],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[C,_]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[_,C],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[_,[C,Ce.str,it.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[_,"Windows"],[C,Ce.str,it.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[C,/_/g,"."],[_,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[_,"Mac OS"],[C,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[_,C],[/\(bb(10);/i],[C,[_,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[C,[_,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[_,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[C,[_,"webOS"]],[/crkey\/([\d\.]+)/i],[C,[_,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[_,"Chromium OS"],C],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[_,C],[/(sunos)\s?([\w\.\d]*)/i],[[_,"Solaris"],C],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[_,C]]},bt=function(pn,un){if("object"==typeof pn&&(un=pn,pn=c),!(this instanceof bt))return new bt(pn,un).getResult();var yt=pn||(void 0!==o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),Ge=un?be.extend(wt,un):wt;return this.getBrowser=function(){var ot={name:c,version:c};return Ce.rgx.call(ot,yt,Ge.browser),ot.major=be.major(ot.version),ot},this.getCPU=function(){var ot={architecture:c};return Ce.rgx.call(ot,yt,Ge.cpu),ot},this.getDevice=function(){var ot={vendor:c,model:c,type:c};return Ce.rgx.call(ot,yt,Ge.device),ot},this.getEngine=function(){var ot={name:c,version:c};return Ce.rgx.call(ot,yt,Ge.engine),ot},this.getOS=function(){var ot={name:c,version:c};return Ce.rgx.call(ot,yt,Ge.os),ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return yt},this.setUA=function(ot){return yt=typeof ot===p&&ot.length>255?be.trim(ot,255):ot,this},this.setUA(yt),this};bt.VERSION="0.7.28",bt.BROWSER={NAME:_,MAJOR:"major",VERSION:C},bt.CPU={ARCHITECTURE:w},bt.DEVICE={MODEL:v,VENDOR:b,TYPE:y,CONSOLE:P,MOBILE:j,SMARTTV:Z,TABLET:G,WEARABLE:ae,EMBEDDED:fe},bt.ENGINE={NAME:_,VERSION:C},bt.OS={NAME:_,VERSION:C},n.exports&&(i=n.exports=bt),i.UAParser=bt;var Pt=void 0!==o&&(o.jQuery||o.Zepto);if(Pt&&!Pt.ua){var En=new bt;Pt.ua=En.getResult(),Pt.ua.get=function(){return En.getUA()},Pt.ua.set=function(pn){En.setUA(pn);var un=En.getResult();for(var yt in un)Pt.ua[yt]=un[yt]}}}("object"==typeof window?window:W)}(gM,gM.exports);const _M=new gM.exports;let Tg=_M.getResult();function zi(n){return n&&_M.setUA(n),Tg=_M.getResult(),{name:I8(Tg),version:vU(Tg),os:T8(Tg),osVersion:Tg.os.version}}function I8(n){if("Blink"===n.engine.name&&"WeChat"!==n.browser.name)return Li.CHROME;switch(n.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Li.CHROME;case"Safari":case"Mobile Safari":return Li.SAFARI;case"Edge":return Li.EDGE;case"Firefox":return Li.FIREFOX;case"QQBrowser":return Li.QQ;case"Opera":return Li.OPERA;case"WeChat":return Li.WECHAT;default:return n.browser.name||""}}function vU(n){let i;return i="Blink"===n.engine.name?n.engine.version||"":n.browser.version||"",i.split(".")[0]}function T8(n){return"Windows"===n.os.name?n.os.version?n.os.name+" "+n.os.version:n.os.name:n.os.name||""}function AU(){return zi().os}function RD(){const n=zi();return!!("WebKit"===Tg.engine.name&&n.os===pa.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==Li.SAFARI||wu()&&n.name!==Li.SAFARI)}function yM(){return zi().name===Li.CHROME}function Md(){return zi().name===Li.SAFARI}function Es(){return zi().name===Li.FIREFOX}function wu(){return zi().os===pa.IOS}function yU(){const n=zi();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 13===Number(i[0])}function _S(){const n=zi();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 15===Number(i[0])}function EU(){const n=zi();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 15===Number(i[0])&&0===Number(i[1])}function bU(){const n=zi();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 15===Number(i[0])&&Number(i[1])>=1}function SU(){const n=zi();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 15===Number(i[0])&&Number(i[1])>=2}function vv(){return Md()&&navigator.maxTouchPoints>0}function w8(){return zi().name===Li.WECHAT}function R8(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function NT(){const n=zi();return n.name!==Li.EDGE&&n.name!==Li.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function O8(){return zi().os===pa.ANDROID}var EM={exports:{}},bM=Yu.f;ns({target:"Object",stat:!0,forced:Object.defineProperty!==bM,sham:!Gc},{defineProperty:bM});var k8=ff.Object,SM=EM.exports=function(n,i,o){return k8.defineProperty(n,i,o)};k8.defineProperty.sham&&(SM.sham=!0);var N8=EM.exports;function q(n,i,o){return i in n?N8(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}var CM={exports:{}},CU=function(n,i){return function(){for(var o=new Array(arguments.length),c=0;c<o.length;c++)o[c]=arguments[c];return n.apply(i,o)}},IU=CU,wg=Object.prototype.toString;function TU(n){return"[object Array]"===wg.call(n)}function wU(n){return null!==n&&"object"==typeof n}function M8(n){return"[object Function]"===wg.call(n)}function OD(n,i){if(null!=n)if("object"!=typeof n&&(n=[n]),TU(n))for(var o=0,c=n.length;o<c;o++)i.call(null,n[o],o,n);else for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&i.call(null,n[h],h,n)}var xd={isArray:TU,isArrayBuffer:function(n){return"[object ArrayBuffer]"===wg.call(n)},isBuffer:function(n){return null!=n&&null!=n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)},isFormData:function(n){return typeof FormData<"u"&&n instanceof FormData},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&n.buffer instanceof ArrayBuffer},isString:function(n){return"string"==typeof n},isNumber:function(n){return"number"==typeof n},isObject:wU,isUndefined:function(n){return void 0===n},isDate:function(n){return"[object Date]"===wg.call(n)},isFile:function(n){return"[object File]"===wg.call(n)},isBlob:function(n){return"[object Blob]"===wg.call(n)},isFunction:M8,isStream:function(n){return wU(n)&&M8(n.pipe)},isURLSearchParams:function(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator>"u"||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:OD,merge:function n(){var i={};function o(g,p){i[p]="object"==typeof i[p]&&"object"==typeof g?n(i[p],g):g}for(var c=0,h=arguments.length;c<h;c++)OD(arguments[c],o);return i},deepMerge:function n(){var i={};function o(g,p){i[p]="object"==typeof i[p]&&"object"==typeof g?n(i[p],g):"object"==typeof g?n({},g):g}for(var c=0,h=arguments.length;c<h;c++)OD(arguments[c],o);return i},extend:function(n,i,o){return OD(i,function(c,h){n[h]=o&&"function"==typeof c?IU(c,o):c}),n},trim:function(n){return n.replace(/^\s*/,"").replace(/\s*$/,"")}},vS=xd;function RU(n){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var x8=function(n,i,o){if(!i)return n;var c;if(o)c=o(i);else if(vS.isURLSearchParams(i))c=i.toString();else{var h=[];vS.forEach(i,function(p,v){null!=p&&(vS.isArray(p)?v+="[]":p=[p],vS.forEach(p,function(_){vS.isDate(_)?_=_.toISOString():vS.isObject(_)&&(_=JSON.stringify(_)),h.push(RU(v)+"="+RU(_))}))}),c=h.join("&")}if(c){var g=n.indexOf("#");-1!==g&&(n=n.slice(0,g)),n+=(-1===n.indexOf("?")?"?":"&")+c}return n},L8=xd;function DD(){this.handlers=[]}DD.prototype.use=function(n,i){return this.handlers.push({fulfilled:n,rejected:i}),this.handlers.length-1},DD.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},DD.prototype.forEach=function(n){L8.forEach(this.handlers,function(i){null!==i&&n(i)})};var B8=DD,F8=xd,U8=function(n){return!(!n||!n.__CANCEL__)},V8=xd,OU=function(n,i,o,c,h){return function(n,i,o,c,h){return n.config=i,o&&(n.code=o),n.request=c,n.response=h,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},n}(new Error(n),i,o,c,h)},Q8=OU,DU=xd,H8=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ba=xd,uW=Ba.isStandardBrowserEnv()?function(){var n,i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function c(h){var g=h;return i&&(o.setAttribute("href",g),g=o.href),o.setAttribute("href",g),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return n=c(window.location.href),function(h){var g=Ba.isString(h)?c(h):h;return g.protocol===n.protocol&&g.host===n.host}}():function(){return!0},IM=xd,lW=IM.isStandardBrowserEnv()?{write:function(n,i,o,c,h,g){var p=[];p.push(n+"="+encodeURIComponent(i)),IM.isNumber(o)&&p.push("expires="+new Date(o).toGMTString()),IM.isString(c)&&p.push("path="+c),IM.isString(h)&&p.push("domain="+h),!0===g&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},kU=xd,hW=x8,pW=uW,NU=OU,cl=xd,PU=function(n,i){V8.forEach(n,function(o,c){c!==i&&c.toUpperCase()===i.toUpperCase()&&(n[i]=o,delete n[c])})},W8={"Content-Type":"application/x-www-form-urlencoded"};function kD(n,i){!cl.isUndefined(n)&&cl.isUndefined(n["Content-Type"])&&(n["Content-Type"]=i)}var AS,TM={adapter:((typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process)||typeof XMLHttpRequest<"u")&&(AS=function(n){return new Promise(function(i,o){var c=n.data,h=n.headers;kU.isFormData(c)&&delete h["Content-Type"];var g=new XMLHttpRequest;if(n.auth&&(h.Authorization="Basic "+btoa((n.auth.username||"")+":"+(n.auth.password||""))),g.open(n.method.toUpperCase(),hW(n.url,n.params,n.paramsSerializer),!0),g.timeout=n.timeout,g.onreadystatechange=function(){if(g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var b="getAllResponseHeaders"in g?function(n){var i,o,c,h={};return n&&DU.forEach(n.split("\n"),function(g){if(c=g.indexOf(":"),i=DU.trim(g.substr(0,c)).toLowerCase(),o=DU.trim(g.substr(c+1)),i){if(h[i]&&H8.indexOf(i)>=0)return;h[i]="set-cookie"===i?(h[i]?h[i]:[]).concat([o]):h[i]?h[i]+", "+o:o}}),h}(g.getAllResponseHeaders()):null;(function(n,i,o){var c=o.config.validateStatus;!c||c(o.status)?n(o):i(Q8("Request failed with status code "+o.status,o.config,null,o.request,o))})(i,o,{data:n.responseType&&"text"!==n.responseType?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:b,config:n,request:g}),g=null}},g.onabort=function(){g&&(o(NU("Request aborted",n,"ECONNABORTED",g)),g=null)},g.onerror=function(){o(NU("Network Error",n,null,g)),g=null},g.ontimeout=function(){o(NU("timeout of "+n.timeout+"ms exceeded",n,"ECONNABORTED",g)),g=null},kU.isStandardBrowserEnv()){var _=lW,y=(n.withCredentials||pW(n.url))&&n.xsrfCookieName?_.read(n.xsrfCookieName):void 0;y&&(h[n.xsrfHeaderName]=y)}if("setRequestHeader"in g&&kU.forEach(h,function(b,C){void 0===c&&"content-type"===C.toLowerCase()?delete h[C]:g.setRequestHeader(C,b)}),n.withCredentials&&(g.withCredentials=!0),n.responseType)try{g.responseType=n.responseType}catch(b){if("json"!==n.responseType)throw b}"function"==typeof n.onDownloadProgress&&g.addEventListener("progress",n.onDownloadProgress),"function"==typeof n.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",n.onUploadProgress),n.cancelToken&&n.cancelToken.promise.then(function(b){g&&(g.abort(),o(b),g=null)}),void 0===c&&(c=null),g.send(c)})}),AS),transformRequest:[function(n,i){return PU(i,"Accept"),PU(i,"Content-Type"),cl.isFormData(n)||cl.isArrayBuffer(n)||cl.isBuffer(n)||cl.isStream(n)||cl.isFile(n)||cl.isBlob(n)?n:cl.isArrayBufferView(n)?n.buffer:cl.isURLSearchParams(n)?(kD(i,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):cl.isObject(n)?(kD(i,"application/json;charset=utf-8"),JSON.stringify(n)):n}],transformResponse:[function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch{}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};cl.forEach(["delete","get","head"],function(n){TM.headers[n]={}}),cl.forEach(["post","put","patch"],function(n){TM.headers[n]=cl.merge(W8)});var K8=TM,wM=xd,ND=function(n,i,o){return F8.forEach(o,function(c){n=c(n,i)}),n},z8=U8,MU=K8;function xU(n){n.cancelToken&&n.cancelToken.throwIfRequested()}var yS=xd,Y8=function(n,i){i=i||{};var o={};return yS.forEach(["url","method","params","data"],function(c){void 0!==i[c]&&(o[c]=i[c])}),yS.forEach(["headers","auth","proxy"],function(c){yS.isObject(i[c])?o[c]=yS.deepMerge(n[c],i[c]):void 0!==i[c]?o[c]=i[c]:yS.isObject(n[c])?o[c]=yS.deepMerge(n[c]):void 0!==n[c]&&(o[c]=n[c])}),yS.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(c){void 0!==i[c]?o[c]=i[c]:void 0!==n[c]&&(o[c]=n[c])}),o},RM=xd,_W=x8,q8=B8,vW=function(n){return xU(n),n.baseURL&&!function(n){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n)}(n.url)&&(n.url=function(n,i){return i?n.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):n}(n.baseURL,n.url)),n.headers=n.headers||{},n.data=ND(n.data,n.headers,n.transformRequest),n.headers=wM.merge(n.headers.common||{},n.headers[n.method]||{},n.headers||{}),wM.forEach(["delete","get","head","post","put","patch","common"],function(i){delete n.headers[i]}),(n.adapter||MU.adapter)(n).then(function(i){return xU(n),i.data=ND(i.data,i.headers,n.transformResponse),i},function(i){return z8(i)||(xU(n),i&&i.response&&(i.response.data=ND(i.response.data,i.response.headers,n.transformResponse))),Promise.reject(i)})},J8=Y8;function PT(n){this.defaults=n,this.interceptors={request:new q8,response:new q8}}PT.prototype.request=function(n){"string"==typeof n?(n=arguments[1]||{}).url=arguments[0]:n=n||{},(n=J8(this.defaults,n)).method=n.method?n.method.toLowerCase():"get";var i=[vW,void 0],o=Promise.resolve(n);for(this.interceptors.request.forEach(function(c){i.unshift(c.fulfilled,c.rejected)}),this.interceptors.response.forEach(function(c){i.push(c.fulfilled,c.rejected)});i.length;)o=o.then(i.shift(),i.shift());return o},PT.prototype.getUri=function(n){return n=J8(this.defaults,n),_W(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")},RM.forEach(["delete","get","head","options"],function(n){PT.prototype[n]=function(i,o){return this.request(RM.merge(o||{},{method:n,url:i}))}}),RM.forEach(["post","put","patch"],function(n){PT.prototype[n]=function(i,o,c){return this.request(RM.merge(c||{},{method:n,url:i,data:o}))}});var AW=PT;function OM(n){this.message=n}OM.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},OM.prototype.__CANCEL__=!0;var LU=OM,yW=LU;function DM(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(c){i=c});var o=this;n(function(c){o.reason||(o.reason=new yW(c),i(o.reason))})}DM.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},DM.source=function(){var n;return{token:new DM(function(i){n=i}),cancel:n}};var EW=DM,X8=xd,bW=CU,kM=AW,SW=Y8;function $8(n){var i=new kM(n),o=bW(kM.prototype.request,i);return X8.extend(o,kM.prototype,i),X8.extend(o,i),o}var Hf=$8(K8);Hf.Axios=kM,Hf.create=function(n){return $8(SW(Hf.defaults,n))},Hf.Cancel=LU,Hf.CancelToken=EW,Hf.isCancel=U8,Hf.all=function(n){return Promise.all(n)},Hf.spread=function(n){return function(i){return n.apply(null,i)}},CM.exports=Hf,CM.exports.default=Hf;var ul=CM.exports;class MT{constructor(i){q(this,"logger",void 0),q(this,"prefixLists",[]),this.logger=i}debug(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];this.logger.debug(...this.prefixLists,...o)}info(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];this.logger.info(...this.prefixLists,...o)}warning(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];this.logger.warning(...this.prefixLists,...o)}error(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];this.logger.error(...this.prefixLists,...o)}prefix(i){return this.prefixLists.push(i),this}popPrefix(){return this.prefixLists.pop(),this}}class is{constructor(){q(this,"_events",{}),q(this,"addListener",this.on)}getListeners(i){return this._events[i]?this._events[i].map(o=>o.listener):[]}on(i,o){this._events[i]||(this._events[i]=[]);const c=this._events[i];-1===this._indexOfListener(c,o)&&c.push({listener:o,once:!1})}once(i,o){this._events[i]||(this._events[i]=[]);const c=this._events[i];-1===this._indexOfListener(c,o)&&c.push({listener:o,once:!0})}off(i,o){if(!this._events[i])return;const c=this._events[i],h=this._indexOfListener(c,o);-1!==h&&c.splice(h,1),0===this._events[i].length&&delete this._events[i]}removeAllListeners(i){i?delete this._events[i]:this._events={}}emit(i){this._events[i]||(this._events[i]=[]);const o=this._events[i].map(p=>p);for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];for(let p=0;p<o.length;p+=1){const v=o[p];v.once&&this.off(i,v.listener),v.listener.apply(this,h||[])}}_indexOfListener(i,o){let c=i.length;for(;c--;)if(i[c].listener===o)return c;return-1}}const Sy=new class extends is{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let Te;!function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED"}(Te||(Te={}));class Pe extends Error{constructor(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;super(o),q(this,"code",void 0),q(this,"message",void 0),q(this,"data",void 0),q(this,"name","AgoraRTCException"),this.code=i,this.message="AgoraRTCError ".concat(this.code,": ").concat(o),this.data=c}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===i&&oe.error(this.toString()),"warning"===i&&oe.warning(this.toString()),this}throw(){throw this.print(),this}}const Xo={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function BU(n,i){const o=Math.floor(i.timeout*Math.pow(i.timeoutFactor,n));return Math.min(i.maxRetryTimeout,o)}function Hl(n,i,o,c){const h=Object.assign({},Xo,c);let g=h.timeout;const p=function(){var y=L(function*(){var b;yield(b=g,new Qn(C=>{window.setTimeout(C,b)})),g*=h.timeoutFactor,g=Math.min(h.maxRetryTimeout,g)});return function(){return y.apply(this,arguments)}}();let v=!1;const _=new Qn(function(){var y=L(function*(b,C){i=i||(()=>!1),o=o||(()=>!0);for(let w=0;w<h.maxRetryCount;w+=1){if(v)return C(new Pe(Te.OPERATION_ABORTED));try{const P=yield n();if(!i(P,w)||w+1===h.maxRetryCount)return b(P);yield p()}catch(P){if(!o(P,w)||w+1===h.maxRetryCount)return C(P);yield p()}}});return function(b,C){return y.apply(this,arguments)}}());return _.cancel=()=>v=!0,_}function NM(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const Ru={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Cy=Date.now(),PD=n=>{for(const i in Ru)if(Object.prototype.hasOwnProperty.call(Ru,i)&&Ru[i]===n)return i;return"DEFAULT"},oe=new class{constructor(){q(this,"proxyServerURL",void 0),q(this,"logLevel",Ru.DEBUG),q(this,"uploadState","collecting"),q(this,"uploadLogWaitingList",[]),q(this,"uploadLogUploadingList",[]),q(this,"uploadErrorCount",0),q(this,"currentLogID",0),q(this,"url",void 0),q(this,"extLog",(n,i)=>{this.appendLogToWaitingList(n,i)})}debug(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Ru.DEBUG].concat(i);this.log.apply(this,c)}info(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Ru.INFO].concat(i);this.log.apply(this,c)}warning(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Ru.WARNING].concat(i);this.log.apply(this,c)}error(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Ru.ERROR].concat(i);this.log.apply(this,c)}upload(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Ru.DEBUG].concat(i);this.uploadLog.apply(this,c)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){cc("UPLOAD_LOG",!0)}disableLogUpload(){cc("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new MT(this).prefix(n)}log(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if(Date.now()-Cy<100)return void setTimeout(()=>{this.log(...i)},Date.now()-Cy);const c=Math.max(0,Math.min(4,i[0]));if(i[0]=NM()+" Agora-SDK [".concat(PD(c),"]:"),this.appendLogToWaitingList(c,i),c<this.logLevel)return;const h=NM()+" %cAgora-SDK [".concat(PD(c),"]:");let g=[];if(!Bt("USE_NEW_LOG"))switch(c){case Ru.DEBUG:g=[h,"color: #64B5F6;"].concat(i.slice(1)),console.log.apply(console,g);break;case Ru.INFO:g=[h,"color: #1E88E5; font-weight: bold;"].concat(i.slice(1)),console.log.apply(console,g);break;case Ru.WARNING:g=[h,"color: #FB8C00; font-weight: bold;"].concat(i.slice(1)),console.warn.apply(console,g);break;case Ru.ERROR:g=[h,"color: #B00020; font-weight: bold;"].concat(i.slice(1)),console.error.apply(console,g)}}uploadLog(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if(Date.now()-Cy<100)return void setTimeout(()=>{this.uploadLog(...i)},Date.now()-Cy);const c=Math.max(0,Math.min(4,i[0]));i[0]=NM()+" Agora-SDK [".concat(PD(c),"]:"),this.appendLogToWaitingList(c,i)}appendLogToWaitingList(n){if(!Bt("UPLOAD_LOG"))return;let i="";for(var o=arguments.length,c=new Array(o>1?o-1:0),h=1;h<o;h++)c[h-1]=arguments[h];c.forEach(g=>{"object"==typeof g&&(g=JSON.stringify(g)),i+="".concat(g," ")}),this.uploadLogWaitingList.push({payload_str:i,log_level:n,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}uploadLogs(){var n=this;return L(function*(){const i=n.uploadLogUploadingList,o={sdk_version:ll,process_id:Bt("PROCESS_ID"),payload:JSON.stringify(i)};return Hl(L(function*(){const c=yield ul.post(n.url||(n.proxyServerURL?"https://".concat(n.proxyServerURL,"/ls/?h=").concat(Bt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Bt("LOG_UPLOAD_SERVER"),"/upload/v1")),o,{responseType:"text"});if("OK"!==c.data){const h=new Error("unexpected upload log response");throw h.response=c,h}}),()=>(n.uploadLogUploadingList=[],!1),c=>(Sy.reportLogUploadError(c.response?{status:c.response.status,data:c.response.data,headers:c.response.headers,message:c.message}:c.request?{status:c.request.status,message:c.message}:{status:-1,message:c.message}),!0),{timeout:Bt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Bt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})})()}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,Bt("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),Bt("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),Bt("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),Bt("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},Av={debug:console.log,info:console.log,warning:console.warn,error:console.error},xT={debug:"color: #64B5F6;",info:"color: #1E88E5; font-weight: bold;",warning:"color: #FB8C00; font-weight: bold;",error:"color: #B00020; font-weight: bold;"},PM={debug:0,info:1,warning:2,error:3},ES=[];let MD,MM=0,FU=0,UU=!1;function xD(){const n=new Date;return[n.getTime(),n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()]}function LD(n){if(!Bt("UPLOAD_LOG"))return;let i;switch(n.type){case Yi.MISC:i=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.msg]];break;case Yi.INTERNAL_EVENT:case Yi.PUBLIC_EVENT:case Yi.WEB_EVENT:i=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.event,n.msg]];break;case Yi.INTERNAL_API:case Yi.PUBLIC_API:case Yi.WEB_API:i=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.api,n.args,n.result]]}ES.push(i)}function LT(n,i){const[o,c]=xD(),h="warning",g="".concat(c," %cAgora-SDK [").concat(h,"] [INTERNAL API]:"),p={[Yi.WEB_API]:"logWebAPI",[Yi.PUBLIC_API]:"logPublicAPI",[Yi.INTERNAL_API]:"logInternalAPI",[Yi.WEB_EVENT]:"logWebEvent",[Yi.PUBLIC_EVENT]:"logPublicEvent",[Yi.INTERNAL_EVENT]:"logInternalEvent",[Yi.MISC]:"logMisc"}[n],v=[g,xT.warning,"Log.".concat(p),i];Bt("USE_NEW_LOG")&&(xM(h)&&Av.warning.apply(console,v),LD({timestamp:o,level:h,module:"Log",instanceId:void 0,type:Yi.INTERNAL_API,api:p,args:void 0,result:i.toString()}))}function BD(n){if(Array.isArray(n)){let[c,h]=n;return c||(c="Global"),{module:c,instanceId:h}}let i,o;if("string"!=typeof n.__moduleName)throw new Error("Cannot get __moduleName from log instance.");i=n.__moduleName;try{o=n.__instanceId}catch{throw new Error("Cannot get __instanceId from log instance.")}return{module:i,instanceId:o}}function xM(n){return PM[n]>=FU}function bS(n,i,o,c,h,g){if(n===Yi.PUBLIC_API||n===Yi.WEB_API||n===Yi.INTERNAL_API)try{const{module:p,instanceId:v}=BD(o);h=h&&JSON.stringify(h),g=g instanceof Error?g.toString():g&&JSON.stringify(g);const[_,y]=xD(),b=["".concat(y," %cAgora-SDK [").concat(i,"] [").concat({[Yi.PUBLIC_API]:"PUBLIC API",[Yi.WEB_API]:"WEB API",[Yi.INTERNAL_API]:"INTERNAL API"}[n],"]:"),xT[i],"".concat(p).concat(v?"<".concat(v,">"):"",".").concat(c),h,g];Bt("USE_NEW_LOG")&&(xM(i)&&Av[i].apply(console,b),LD({timestamp:_,level:i,module:p,instanceId:v,type:n,api:c,args:h,result:g}))}catch(p){LT(n,p)}}function BT(n,i,o,c,h){if(n===Yi.WEB_EVENT||n===Yi.INTERNAL_EVENT||n===Yi.PUBLIC_EVENT)try{const{module:g,instanceId:p}=BD(o);"string"!=typeof h&&(h=h instanceof Error?h.toString():JSON.stringify(h));const[v,_]=xD(),y=["".concat(_," %cAgora-SDK [").concat(i,"] [").concat({[Yi.WEB_EVENT]:"WEB EVENT",[Yi.PUBLIC_EVENT]:"PUBLIC EVENT",[Yi.INTERNAL_EVENT]:"INTERNAL EVENT"}[n],"]:"),xT[i],"".concat(g).concat(p?"<".concat(p,">"):"",".on(").concat(c,")"),h||""];Bt("USE_NEW_LOG")&&(xM(i)&&Av[i].apply(console,y),LD({timestamp:v,level:i,module:g,instanceId:p,type:n,event:c,msg:h}))}catch(g){LT(n,g)}}function Iy(n){MD=n}function xn(n,i,o){try{const{module:c,instanceId:h}=BD(i),[g,p]=xD(),v=["".concat(p," %cAgora-SDK [").concat(n,"] [MISC]:"),xT[n],"".concat(c).concat(h?"<".concat(h,">"):""),'"'.concat(o,'"')];Bt("USE_NEW_LOG")&&(xM(n)&&Av[n].apply(console,v),LD({timestamp:g,level:n,module:c,instanceId:h,type:Yi.MISC,msg:o}))}catch(c){Yt("warning",["log"],"logMisc",void 0,c)}}function yo(n,i,o,c){BT(Yi.INTERNAL_EVENT,n,i,o,c)}function Ld(n,i,o,c){BT(Yi.PUBLIC_EVENT,n,i,o,c)}function Bd(n,i,o,c){BT(Yi.WEB_EVENT,n,i,o,c)}function Yt(n,i,o,c,h){bS(Yi.INTERNAL_API,n,i,o,c,h)}function Ty(n,i,o,c,h){bS(Yi.WEB_API,n,i,o,c,h)}function fr(n,i,o,c,h){bS(Yi.PUBLIC_API,n,i,o,c,h)}function ac(n,i){return function(o){return class extends o{get __moduleName(){return n}get __instanceId(){if(i){if("function"==typeof this[i])return this[i]();{const c=i.split(".");return c.length>0?Da(c).call(c,(h,g)=>{try{return h&&h[g]}catch{return}},this):this[i]}}}}}}function FD(n){return FT.apply(this,arguments)}function FT(){return FT=L(function*(n){if(!n&&UU)return;if(UU=!0,!Bt("UPLOAD_LOG"))return void setTimeout(()=>FD(!0),Bt("UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF"));if(0===ES.length)return void setTimeout(()=>FD(!0),Bt("UPLOAD_LOG_INTERVAL"));const i=ES.slice(0,Bt("UPLOAD_LOG_LENGTH_EACH_TIME")),o={sdk_version:ll,log_version:Bt("LOG_VERSION"),process_id:Bt("PROCESS_ID"),index:MM,logs:JSON.stringify(i)};yield Hl(L(function*(){const c=yield ul.post(MD?"https://".concat(MD,"/ls/?h=").concat(Bt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Bt("LOG_UPLOAD_SERVER"),"/upload/v1"),o,{responseType:"text"});if("OK"!==c.data)throw new Error("Log service response error ".concat(c.data));return c}),void 0,void 0,{timeout:Bt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Bt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}),ES.splice(0,Bt("UPLOAD_LOG_LENGTH_EACH_TIME")),MM+=i.length,setTimeout(()=>FD(!0),Bt("UPLOAD_LOG_INTERVAL"))}),FT.apply(this,arguments)}const LM="v4.12.1-0-gd73db17d-dirty(6/27/2022, 3:58:00 PM)",ll=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const i=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(i&&i[1]&&i[2]){const h=i[2];return"".concat(i[1],".").concat(h)}const o=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(o&&o[1]&&o[2]){const h=o[2];return"".concat(o[1],".").concat(100*(Number(h)+1))}return"4.0.0.999"}("4.12.1"),UD=function(){try{return!0===JSON.parse("true")}catch{return!0}}(),Js={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},Z8={"90p":ri(160,90),"90p_1":ri(160,90),"120p":ri(160,120,15,30,65),"120p_1":ri(160,120,15,30,65),"120p_3":ri(120,120,15,30,50),"120p_4":ri(212,120),"180p":ri(320,180,15,30,140),"180p_1":ri(320,180,15,30,140),"180p_3":ri(180,180,15,30,100),"180p_4":ri(240,180,15,30,120),"240p":ri(320,240,15,40,200),"240p_1":ri(320,240,15,40,200),"240p_3":ri(240,240,15,40,140),"240p_4":ri(424,240,15,40,220),"360p":ri(640,360,15,80,400),"360p_1":ri(640,360,15,80,400),"360p_3":ri(360,360,15,80,260),"360p_4":ri(640,360,30,80,600),"360p_6":ri(360,360,30,80,400),"360p_7":ri(480,360,15,80,320),"360p_8":ri(480,360,30,80,490),"360p_9":ri(640,360,15,80,800),"360p_10":ri(640,360,24,80,800),"360p_11":ri(640,360,24,80,1e3),"480p":ri(640,480,15,100,500),"480p_1":ri(640,480,15,100,500),"480p_2":ri(640,480,30,100,1e3),"480p_3":ri(480,480,15,100,400),"480p_4":ri(640,480,30,100,750),"480p_6":ri(480,480,30,100,600),"480p_8":ri(848,480,15,100,610),"480p_9":ri(848,480,30,100,930),"480p_10":ri(640,480,10,100,400),"720p":ri(1280,720,15,120,1130),"720p_1":ri(1280,720,15,120,1130),"720p_2":ri(1280,720,30,120,2e3),"720p_3":ri(1280,720,30,120,1710),"720p_5":ri(960,720,15,120,910),"720p_6":ri(960,720,30,120,1380),"1080p":ri(1920,1080,15,120,2080),"1080p_1":ri(1920,1080,15,120,2080),"1080p_2":ri(1920,1080,30,120,3e3),"1080p_3":ri(1920,1080,30,120,3150),"1080p_5":ri(1920,1080,60,120,4780),"1440p":ri(2560,1440,30,120,4850),"1440p_1":ri(2560,1440,30,120,4850),"1440p_2":ri(2560,1440,60,120,7350),"4k":ri(3840,2160,30,120,8910),"4k_1":ri(3840,2160,30,120,8910),"4k_3":ri(3840,2160,60,120,13500)},e6={"480p":Nh(640,480,5),"480p_1":Nh(640,480,5),"480p_2":Nh(640,480,30),"480p_3":Nh(640,480,15),"720p":Nh(1280,720,5),"720p_1":Nh(1280,720,5),"720p_2":Nh(1280,720,30),"720p_3":Nh(1280,720,15),"1080p":Nh(1920,1080,5),"1080p_1":Nh(1920,1080,5),"1080p_2":Nh(1920,1080,30),"1080p_3":Nh(1920,1080,15)},t6={"1SL1TL":FM(1,1),"3SL3TL":FM(3,3),"2SL3TL":FM(2,3)};function wy(n){return"string"==typeof n?Object.assign({},Z8[n]):n}function BM(n){return"string"==typeof n?Object.assign({},e6[n]):n}function UT(n){return"string"==typeof n?Object.assign({},t6[n]):n}const VU={speech_low_quality:jT(16e3,!1),speech_standard:jT(32e3,!1,18),music_standard:jT(48e3,!1),standard_stereo:jT(48e3,!0,56),high_quality:jT(48e3,!1,128),high_quality_stereo:jT(48e3,!0,192)};function VT(n){return"string"==typeof n?Object.assign({},VU[n]):n}function cc(n,i,o){Object.keys(Ou).includes(n)&&(!o&&Object.keys(jU).includes(n)||(Ou[n]=i))}function Bt(n){return Ou[n]}const Ou={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10},jU={};function jT(n,i,o){return{sampleRate:n,stereo:i,bitrate:o}}function ri(n,i,o,c,h){return{width:n,height:i,frameRate:o,bitrateMin:c,bitrateMax:h}}function Nh(n,i,o,c,h){return{width:{max:n},height:{max:i},frameRate:o,bitrateMin:c,bitrateMax:h}}function FM(n,i){return{numSpatialLayers:n,numTemporalLayers:i}}UD||(Ou.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Ou.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Ou.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Ou.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Ou.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Ou.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Ou.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Ou.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Ou.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Ou.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Ou.AREAS=["NORTH_AMERICA","OVERSEA"]);const CW=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],QT=[],SS=[];var yv=vf,n6=Yu,r6=_d,CS=function(n,i,o){var c=yv(i);c in n?n6.f(n,c,r6(0,o)):n[c]=o},UM=KA,IW=ch,TW=CS,wW=Xr.Array,i6=Math.max,QU=function(n,i,o){for(var c=IW(n),h=UM(i,c),g=UM(void 0===o?c:o,c),p=wW(i6(g-h,0)),v=0;h<g;h++,v++)TW(p,v,n[h]);return p.length=v,p},o6=QU,RW=Math.floor,HU=function(n,i){var o=n.length,c=RW(o/2);return o<8?OW(n,i):s6(n,HU(o6(n,0,c),i),HU(o6(n,c),i),i)},OW=function(n,i){for(var o,c,h=n.length,g=1;g<h;){for(c=g,o=n[g];c&&i(n[c-1],o)>0;)n[c]=n[--c];c!==g++&&(n[c]=o)}return n},s6=function(n,i,o,c){for(var h=i.length,g=o.length,p=0,v=0;p<h||v<g;)n[p+v]=p<h&&v<g?c(i[p],o[v])<=0?i[p++]:o[v++]:p<h?i[p++]:o[v++];return n},a6=HU,c6=Bm.match(/firefox\/(\d+)/i),DW=!!c6&&+c6[1],kW=/MSIE|Trident/.test(Bm),u6=Bm.match(/AppleWebKit\/(\d+)\./),VM=ns,GU=So,WU=ih,PW=zu,l6=ch,KU=rl,jM=hs,d6=a6,zU=ua,YU=DW,h6=kW,qU=mf,VD=!!u6&&+u6[1],Rg=[],QM=GU(Rg.sort),JU=GU(Rg.push),Ry=jM(function(){Rg.sort(void 0)}),Gf=jM(function(){Rg.sort(null)}),p6=zU("sort"),HM=!jM(function(){if(qU)return qU<70;if(!(YU&&YU>3)){if(h6)return!0;if(VD)return VD<603;var n,i,o,c,h="";for(n=65;n<76;n++){switch(i=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(c=0;c<47;c++)Rg.push({k:i+c,v:o})}for(Rg.sort(function(g,p){return p.v-g.v}),c=0;c<Rg.length;c++)i=Rg[c].k.charAt(0),h.charAt(h.length-1)!==i&&(h+=i);return"DGBEFHACIJK"!==h}});VM({target:"Array",proto:!0,forced:Ry||!Gf||!p6||!HM},{sort:function(n){void 0!==n&&WU(n);var i=PW(this);if(HM)return void 0===n?QM(i):QM(i,n);var o,c,h=[],g=l6(i);for(c=0;c<g;c++)c in i&&JU(h,i[c]);for(d6(h,function(p){return function(v,_){return void 0===_?-1:void 0===v?1:void 0!==p?+p(v,_)||0:KU(v)>KU(_)?1:-1}}(n)),o=h.length,c=0;c<o;)i[c]=h[c++];for(;c<g;)delete i[c++];return i}});var f6=qu("Array").sort,m6=Qc,g6=f6,IS=Array.prototype,GM=function(n){var i=n.sort;return n===IS||m6(IS,n)&&i===IS.sort?g6:i};function Rp(n,i){if("boolean"!=typeof n)throw new Pe(Te.INVALID_PARAMS,"Invalid ".concat(i,": The value is of the boolean type."))}function fa(n,i,o){if(!o.includes(n))throw new Pe(Te.INVALID_PARAMS,"".concat(i," can only be set as ").concat(JSON.stringify(o)))}function Kr(n,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(n<o||n>c||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!XU(n))throw new Pe(Te.INVALID_PARAMS,"invalid ".concat(i,": the value range is [").concat(o,", ").concat(c,"]. integer only"))}function Wf(n,i){if("number"!=typeof n){if(!(n.min||n.max||n.ideal||n.exact))throw new Pe(Te.INVALID_PARAMS,"".concat(i," is not a valid ConstrainLong"));void 0!==n.min&&Kr(n.min,"".concat(i,".min"),0,1/0),void 0!==n.max&&Kr(n.max,"".concat(i,".max"),1,1/0),void 0!==n.exact&&Kr(n.exact,"".concat(i,".exact"),1,1/0),void 0!==n.ideal&&Kr(n.ideal,"".concat(i,".ideal"),1,1/0)}else Kr(n,i,1,1/0)}function Tc(n,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==n)throw new Pe(Te.INVALID_PARAMS,"".concat(i||"param"," cannot be empty"));if(!WM(n,o,c,h))throw new Pe(Te.INVALID_PARAMS,"Invalid ".concat(i||"string param",": Length of the string: [").concat(o,",").concat(c,"].").concat(h?" ASCII characters only.":""))}function TS(n,i){if(!Array.isArray(n))throw new Pe(Te.INVALID_PARAMS,"".concat(i," should be an array"))}function jD(n){if("string"!=typeof n||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw oe.error("Invalid Channel Name ".concat(n)),new Pe(Te.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function QD(n){if(!("number"==typeof(i=n)&&Math.floor(i)===i&&0<=i&&i<=4294967295||WM(n,1,255)))throw oe.error("Invalid UID ".concat(n," ").concat(typeof n)),new Pe(Te.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var i;"string"==typeof n&&oe.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function lo(n){return null==n}function WM(n){return"string"==typeof n&&n.length<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:255)&&n.length>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)&&(!(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])||$U(n))}function XU(n){return"number"==typeof n&&n%1==0}function $U(n){if("string"!=typeof n)return!1;for(let i=0;i<n.length;i+=1){const o=n.charCodeAt(i);if(o<0||o>255)return!1}return!0}let KM,Yi,Xs;(function(n){n.FREE="free",n.UPLOADING="uploading"})(KM||(KM={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(Yi||(Yi={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(Xs||(Xs={}));const HD={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function ZU(n){return Tc(n.reportId,"params.reportId",0,100,!1),Tc(n.category,"params.category",0,100,!1),Tc(n.event,"params.event",0,100,!1),Tc(n.label,"params.label",0,100,!1),Kr(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const e3={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let ma,Po,zM,GD,hr,sr,Og,Kf,Oy,wS,Du,xs,Er,WD,Ls,br,ps,Bs,Zr,hi,ou,Fi,KD,wc;function t3(n){return Kr(n.timeout,"config.timeout",0,1e5),Kr(n.timeoutFactor,"config.timeoutFactor",0,100,!1),Kr(n.maxRetryCount,"config.maxRetryConfig",0,1/0),Kr(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function YM(n){return fa(n.codec,"config.codec",["vp8","vp9","av1","h264"]),fa(n.mode,"config.mode",["rtc","live"]),void 0!==n.audioCodec&&fa(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==n.proxyServer&&Tc(n.proxyServer,"config.proxyServer",1,1e4),void 0!==n.turnServer&&_6(n.turnServer),void 0!==n.httpRetryConfig&&t3(n.httpRetryConfig),void 0!==n.websocketRetryConfig&&t3(n.websocketRetryConfig),!0}function qM(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(i=>{if(!i.urls)throw Error()})}catch{return!1}return!0}function _6(n){return Tc(n.turnServerURL,"turnServerURL"),Tc(n.username,"username"),Tc(n.password,"password"),n.udpport&&Kr(n.udpport,"udpport",1,99999,!0),n.forceturn&&Rp(n.forceturn,"forceturn"),n.security&&Rp(n.security,"security"),n.tcpport&&Kr(n.tcpport,"tcpport",1,99999,!0),!0}function v6(n){return void 0!==n.level&&fa(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics"})(ma||(ma={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(Po||(Po={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(zM||(zM={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(GD||(GD={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(hr||(hr={})),function(n){n.TRACER="tracer"}(sr||(sr={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(Og||(Og={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Kf||(Kf={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Oy||(Oy={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(wS||(wS={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Du||(Du={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(xs||(xs={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Er||(Er={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(WD||(WD={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK"}(Ls||(Ls={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result"}(br||(br={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(ps||(ps={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(Bs||(Bs={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response"}(Zr||(Zr={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile"}(hi||(hi={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats"}(ou||(ou={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Fi||(Fi={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(KD||(KD={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}(wc||(wc={}));const n3={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},r3={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},A6={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},MW={uplinkNetworkQuality:0,downlinkNetworkQuality:0},y6={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Mr,os,Ev;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection"})(Mr||(Mr={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(os||(os={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Ev||(Ev={}));const E6={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},JM={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function HT(n,i){Tc(n.url,"".concat(i,".url"),1,1e3,!1),lo(n.x)||Kr(n.x,"".concat(i,".x"),0,1e4),lo(n.y)||Kr(n.y,"".concat(i,".y"),0,1e4),lo(n.width)||Kr(n.width,"".concat(i,".width"),0,1e4),lo(n.height)||Kr(n.height,"".concat(i,".height"),0,1e4),lo(n.zOrder)||Kr(n.zOrder,"".concat(i,".zOrder"),0,255),lo(n.alpha)||Kr(n.alpha,"".concat(i,".alpha"),0,1,!1)}const GT={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},zD={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let su,zf,wo,i3,Fa,Op,Ua,Dg,ss,fs,Mo,mr,Rc,XM,o3,Fd,kg,vi;function RS(n){if(!n.channelName)throw new Pe(Te.INVALID_PARAMS,"invalid channelName in info");if(!n.uid||"number"!=typeof n.uid)throw new Pe(Te.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&Tc(n.token,"info.token",1,2047),QD(n.uid),jD(n.channelName),!0}function WT(n){return fa(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(su||(su={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(zf||(zf={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(wo||(wo={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(i3||(i3={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(Fa||(Fa={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Op||(Op={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(Ua||(Ua={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Dg||(Dg={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(ss||(ss={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response"}(fs||(fs={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(Mo||(Mo={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(mr||(mr={})),function(n){n.SCREEN_TRACK="screen_track",n.LOW_STREAM="low_stream"}(Rc||(Rc={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(XM||(XM={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(o3||(o3={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(Fd||(Fd={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(kg||(kg={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL"}(vi||(vi={}));const YD=[vi.AFRICA,vi.ASIA,vi.CHINA,vi.EUROPE,vi.GLOBAL,vi.INDIA,vi.JAPAN,vi.NORTH_AMERICA,vi.OCEANIA,vi.OVERSEA,vi.SOUTH_AMERICA];let Fs;!function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL"}(Fs||(Fs={}));const KT={CHINA:{},ASIA:{CODE:Fs.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Fs.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Fs.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Fs.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Fs.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Fs.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Fs.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Fs.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Fs.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Fs.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Fs.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Fs.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Fs.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};let bv,s3,ei,Dn,Gl,bi,ku,OS;UD&&(KT.CHINA={CODE:Fs.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(bv||(bv={}));class a3 extends is{constructor(i,o){super(),q(this,"onICEConnectionStateChange",void 0),q(this,"onConnectionStateChange",void 0),q(this,"onDTLSTransportStateChange",void 0),q(this,"onDTLSTransportError",void 0),q(this,"onICETransportStateChange",void 0),q(this,"onFirstAudioReceived",void 0),q(this,"onFirstVideoReceived",void 0),q(this,"onFirstAudioDecoded",void 0),q(this,"onFirstVideoDecoded",void 0),q(this,"onSelectedLocalCandidateChanged",void 0),q(this,"onSelectedRemoteCandidateChanged",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(s3||(s3={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(ei||(ei={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(Dn||(Dn={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(Gl||(Gl={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter"}(bi||(bi={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(ku||(ku={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(OS||(OS={}));const $M={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]};let Ud,dl,Nu,hl,$o;(function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"})(Ud||(Ud={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(dl||(dl={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(Nu||(Nu={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(hl||(hl={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}($o||($o={}));const uc={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function Oc(){return uc}var b6=typeof ArrayBuffer<"u"&&typeof DataView<"u",S6=na,zT=ad,YT=Q.RangeError,ZM=function(n){if(void 0===n)return 0;var i=S6(n),o=zT(i);if(i!==o)throw YT("Wrong length or index");return o},c3=Q.Array,ex=Math.abs,Ph=Math.pow,C6=Math.floor,u3=Math.log,xW=Math.LN2,BW=Hp,I6=eo,T6=Ca,l3=am,w6=ii,d3=ve,tx=eo,h3=Ca,R6=function(n,i,o){var c=l3(i);c in n?w6.f(n,c,d3(0,o)):n[c]=o},p3=Q.Array,O6=Math.max,D6=function(n,i,o){for(var c=h3(n),h=tx(i,c),g=tx(void 0===o?c:o,c),p=p3(O6(g-h,0)),v=0;h<g;h++,v++)R6(p,v,n[h]);return p.length=v,p},nx=re,qD=O,k6=b6,JD=bl,f3=Hh,XD=D,$D=a_,DS=na,N6=ad,kS=ZM,m3_pack=function(n,i,o){var c,h,g,p=c3(o),v=8*o-i-1,_=(1<<v)-1,y=_>>1,b=23===i?Ph(2,-24)-Ph(2,-77):0,C=n<0||0===n&&1/n<0?1:0,w=0;for((n=ex(n))!=n||n===1/0?(h=n!=n?1:0,c=_):(c=C6(u3(n)/xW),n*(g=Ph(2,-c))<1&&(c--,g*=2),(n+=c+y>=1?b/g:b*Ph(2,1-y))*g>=2&&(c++,g/=2),c+y>=_?(h=0,c=_):c+y>=1?(h=(n*g-1)*Ph(2,i),c+=y):(h=n*Ph(2,y-1)*Ph(2,i),c=0));i>=8;)p[w++]=255&h,h/=256,i-=8;for(c=c<<i|h,v+=i;v>0;)p[w++]=255&c,c/=256,v-=8;return p[--w]|=128*C,p},m3_unpack=function(n,i){var o,c=n.length,h=8*c-i-1,g=(1<<h)-1,p=g>>1,v=h-7,_=c-1,y=n[_--],b=127&y;for(y>>=7;v>0;)b=256*b+n[_--],v-=8;for(o=b&(1<<-v)-1,b>>=-v,v+=i;v>0;)o=256*o+n[_--],v-=8;if(0===b)b=1-p;else{if(b===g)return o?NaN:y?-1/0:1/0;o+=Ph(2,i),b-=p}return(y?-1:1)*o*Ph(2,b-i)},ix=zC,ox=Yp,P6=lm.f,sx=ii.f,g3=D6,_3=Yv,ax=Lu.PROPER,v3=Lu.CONFIGURABLE,NS=Sl.get,cx=Sl.set,ux="ArrayBuffer",ZD="Wrong index",Dp=Q.ArrayBuffer,Mh=Dp,Dy=Mh&&Mh.prototype,pl=Q.DataView,ky=pl&&pl.prototype,lx=Object.prototype,x6=Q.Array,JT=Q.RangeError,L6=nx(function(n){for(var i=BW(this),o=T6(i),c=arguments.length,h=I6(c>1?arguments[1]:void 0,o),g=c>2?arguments[2]:void 0,p=void 0===g?o:I6(g,o);p>h;)i[h++]=n;return i}),B6=nx([].reverse),ek=m3_pack,dx=m3_unpack,A3=function(n){return[255&n]},hx=function(n){return[255&n,n>>8&255]},y3=function(n){return[255&n,n>>8&255,n>>16&255,n>>24&255]},px=function(n){return n[3]<<24|n[2]<<16|n[1]<<8|n[0]},F6=function(n){return ek(n,23,4)},E3=function(n){return ek(n,52,8)},tk=function(n,i){sx(n.prototype,i,{get:function(){return NS(this)[i]}})},Ng=function(n,i,o,c){var h=kS(o),g=NS(n);if(h+i>g.byteLength)throw JT(ZD);var p=NS(g.buffer).bytes,v=h+g.byteOffset,_=g3(p,v,v+i);return c?_:B6(_)},Ny=function(n,i,o,c,h,g){var p=kS(o),v=NS(n);if(p+i>v.byteLength)throw JT(ZD);for(var _=NS(v.buffer).bytes,y=p+v.byteOffset,b=c(+h),C=0;C<i;C++)_[y+C]=b[g?C:i-C-1]};if(k6){var U6=ax&&Dp.name!==ux;if(XD(function(){Dp(1)})&&XD(function(){new Dp(-1)})&&!XD(function(){return new Dp,new Dp(1.5),new Dp(NaN),U6&&!v3}))U6&&v3&&JD(Dp,"name",ux);else{(Mh=function(n){return $D(this,Dy),new Dp(kS(n))}).prototype=Dy;for(var b3,fx=P6(Dp),S3=0;fx.length>S3;)(b3=fx[S3++])in Mh||JD(Mh,b3,Dp[b3]);Dy.constructor=Mh}ox&&ix(ky)!==lx&&ox(ky,lx);var nk=new pl(new Mh(2)),C3=nx(ky.setInt8);nk.setInt8(0,2147483648),nk.setInt8(1,2147483649),!nk.getInt8(0)&&nk.getInt8(1)||f3(ky,{setInt8:function(n,i){C3(this,n,i<<24>>24)},setUint8:function(n,i){C3(this,n,i<<24>>24)}},{unsafe:!0})}else Dy=(Mh=function(n){$D(this,Dy);var i=kS(n);cx(this,{bytes:L6(x6(i),0),byteLength:i}),qD||(this.byteLength=i)}).prototype,ky=(pl=function(n,i,o){$D(this,ky),$D(n,Dy);var c=NS(n).byteLength,h=DS(i);if(h<0||h>c)throw JT("Wrong offset");if(h+(o=void 0===o?c-h:N6(o))>c)throw JT("Wrong length");cx(this,{buffer:n,byteLength:o,byteOffset:h}),qD||(this.buffer=n,this.byteLength=o,this.byteOffset=h)}).prototype,qD&&(tk(Mh,"byteLength"),tk(pl,"buffer"),tk(pl,"byteLength"),tk(pl,"byteOffset")),f3(ky,{getInt8:function(n){return Ng(this,1,n)[0]<<24>>24},getUint8:function(n){return Ng(this,1,n)[0]},getInt16:function(n){var i=Ng(this,2,n,arguments.length>1?arguments[1]:void 0);return(i[1]<<8|i[0])<<16>>16},getUint16:function(n){var i=Ng(this,2,n,arguments.length>1?arguments[1]:void 0);return i[1]<<8|i[0]},getInt32:function(n){return px(Ng(this,4,n,arguments.length>1?arguments[1]:void 0))},getUint32:function(n){return px(Ng(this,4,n,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(n){return dx(Ng(this,4,n,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(n){return dx(Ng(this,8,n,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(n,i){Ny(this,1,n,A3,i)},setUint8:function(n,i){Ny(this,1,n,A3,i)},setInt16:function(n,i){Ny(this,2,n,hx,i,arguments.length>2?arguments[2]:void 0)},setUint16:function(n,i){Ny(this,2,n,hx,i,arguments.length>2?arguments[2]:void 0)},setInt32:function(n,i){Ny(this,4,n,y3,i,arguments.length>2?arguments[2]:void 0)},setUint32:function(n,i){Ny(this,4,n,y3,i,arguments.length>2?arguments[2]:void 0)},setFloat32:function(n,i){Ny(this,4,n,F6,i,arguments.length>2?arguments[2]:void 0)},setFloat64:function(n,i){Ny(this,8,n,E3,i,arguments.length>2?arguments[2]:void 0)}});_3(Mh,ux),_3(pl,"DataView");var mx={ArrayBuffer:Mh,DataView:pl},UW=fc,I3=re,VW=D,V6=Mc,j6=eo,jW=ad,Q6=x0,gx=mx.ArrayBuffer,_x=mx.DataView,T3=_x.prototype,rk=I3(gx.prototype.slice),vx=I3(T3.getUint8),Dc=I3(T3.setUint8);UW({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:VW(function(){return!new gx(2).slice(1,void 0).byteLength})},{slice:function(n,i){if(rk&&void 0===i)return rk(V6(this),n);for(var o=V6(this).byteLength,c=j6(n,o),h=j6(void 0===i?o:i,o),g=new(Q6(this,gx))(jW(h-c)),p=new _x(this),v=new _x(g),_=0;c<h;)Dc(v,_++,vx(p,c++));return g}});var Wl,kp,XT,Np={exports:{}},$T=b6,Ax=O,lc=Q,ZT=tt,Pg=zt,Py=Ka,w3=Ia,yx=fo,Ex=bl,bx=id.exports,QW=ii.f,My=Lr,e1=zC,fl=Yp,H6=Ro,Pp=Yd,xy=lc.Int8Array,t1=xy&&xy.prototype,Yf=lc.Uint8ClampedArray,G6=Yf&&Yf.prototype,qf=xy&&e1(xy),Mp=t1&&e1(t1),W6=Object.prototype,Sx=lc.TypeError,Cx=H6("toStringTag"),PS=Pp("TYPED_ARRAY_TAG"),Jf=Pp("TYPED_ARRAY_CONSTRUCTOR"),Sv=$T&&!!fl&&"Opera"!==w3(lc.opera),R3=!1,Mg={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},ik={BigInt64Array:8,BigUint64Array:8},Ix=function(n){if(!Pg(n))return!1;var i=w3(n);return Py(Mg,i)||Py(ik,i)};for(Wl in Mg)(XT=(kp=lc[Wl])&&kp.prototype)?Ex(XT,Jf,kp):Sv=!1;for(Wl in ik)(XT=(kp=lc[Wl])&&kp.prototype)&&Ex(XT,Jf,kp);if((!Sv||!ZT(qf)||qf===Function.prototype)&&(qf=function(){throw Sx("Incorrect invocation")},Sv))for(Wl in Mg)lc[Wl]&&fl(lc[Wl],qf);if((!Sv||!Mp||Mp===W6)&&(Mp=qf.prototype,Sv))for(Wl in Mg)lc[Wl]&&fl(lc[Wl].prototype,Mp);if(Sv&&e1(G6)!==Mp&&fl(G6,Mp),Ax&&!Py(Mp,Cx))for(Wl in R3=!0,QW(Mp,Cx,{get:function(){return Pg(this)?this[PS]:void 0}}),Mg)lc[Wl]&&Ex(lc[Wl],PS,Wl);var Cv={NATIVE_ARRAY_BUFFER_VIEWS:Sv,TYPED_ARRAY_CONSTRUCTOR:Jf,TYPED_ARRAY_TAG:R3&&PS,aTypedArray:function(n){if(Ix(n))return n;throw Sx("Target is not a typed array")},aTypedArrayConstructor:function(n){if(ZT(n)&&(!fl||My(qf,n)))return n;throw Sx(yx(n)+" is not a typed array constructor")},exportTypedArrayMethod:function(n,i,o,c){if(Ax){if(o)for(var h in Mg){var g=lc[h];if(g&&Py(g.prototype,n))try{delete g.prototype[n]}catch{try{g.prototype[n]=i}catch{}}}Mp[n]&&!o||bx(Mp,n,o?i:Sv&&t1[n]||i,c)}},exportTypedArrayStaticMethod:function(n,i,o){var c,h;if(Ax){if(fl){if(o)for(c in Mg)if((h=lc[c])&&Py(h,n))try{delete h[n]}catch{}if(qf[n]&&!o)return;try{return bx(qf,n,o?i:Sv&&qf[n]||i)}catch{}}for(c in Mg)!(h=lc[c])||h[n]&&!o||bx(h,n,i)}},isView:function(n){if(!Pg(n))return!1;var i=w3(n);return"DataView"===i||Py(Mg,i)||Py(ik,i)},isTypedArray:Ix,TypedArray:qf,TypedArrayPrototype:Mp},Ly=D,Va=qp,wx=Q.ArrayBuffer,Xf=Q.Int8Array,D3=!Cv.NATIVE_ARRAY_BUFFER_VIEWS||!Ly(function(){Xf(1)})||!Ly(function(){new Xf(-1)})||!Va(function(n){new Xf,new Xf(null),new Xf(1.5),new Xf(n)},!0)||Ly(function(){return 1!==new Xf(new wx(2),1,void 0).length}),Rx=zt,ok=Math.floor,k3=Number.isInteger||function(n){return!Rx(n)&&isFinite(n)&&ok(n)===n},K6=na,z6=Q.RangeError,n1=Q.RangeError,N3=function(n,i){var o=function(n){var i=K6(n);if(i<0)throw z6("The argument can't be less than 0");return i}(n);if(o%i)throw n1("Wrong offset");return o},P3=oa,HW=ie,GW=Uo,WW=Hp,KW=Ca,zW=D0,YW=Xv,q6=c_,J6=Cv.aTypedArrayConstructor,M3=xe,X6=Q,$6=Array.isArray||function(n){return"Array"==M3(n)},Z6=Cm,e7=zt,x3=Ro("species"),sk=X6.Array,B3=oa,F3=Wt,U3=Hp,V3=Ca,t7=function(n,i){return new(function(n){var i;return $6(n)&&(Z6(i=n.constructor)&&(i===sk||$6(i.prototype))||e7(i)&&null===(i=i[x3]))&&(i=void 0),void 0===i?sk:i}(n))(0===i?0:i)},j3=re([].push),By=function(n){var i=1==n,o=2==n,c=3==n,h=4==n,g=6==n,p=7==n,v=5==n||g;return function(_,y,b,C){for(var w,P,j=U3(_),G=F3(j),Z=B3(y,b),ae=V3(G),fe=0,be=C||t7,Ce=i?be(_,ae):o||p?be(_,0):void 0;ae>fe;fe++)if((v||fe in G)&&(P=Z(w=G[fe],fe,j),n))if(i)Ce[fe]=P;else if(P)switch(n){case 3:return!0;case 5:return w;case 6:return fe;case 2:j3(Ce,w)}else switch(n){case 4:return!1;case 7:j3(Ce,w)}return g?-1:c||h?h:Ce}},ga={forEach:By(0),map:By(1),filter:By(2),some:By(3),every:By(4),find:By(5),findIndex:By(6),filterReject:By(7)},Fy=fc,Q3=Q,n7=ie,r7=D3,o7=a_,qW=ve,r1=bl,s7=k3,JW=ad,a7=ZM,Ox=N3,c7=am,ak=Ka,u7=Ia,G3=zt,ck=Zo,l7=Cn,d7=Lr,uk=Yp,XW=lm.f,h7=function(n){var i,o,c,h,g,p,v=GW(this),_=WW(n),y=arguments.length,b=y>1?arguments[1]:void 0,C=void 0!==b,w=YW(_);if(w&&!q6(w))for(p=(g=zW(_,w)).next,_=[];!(h=HW(p,g)).done;)_.push(h.value);for(C&&y>2&&(b=P3(b,arguments[2])),o=KW(_),c=new(J6(v))(o),i=0;o>i;i++)c[i]=C?b(_[i],i):_[i];return c},W3=ga.forEach,lk=gm,K3=ii,p7=Qr,Dx=Sl.get,dk=Sl.set,MS=K3.f,hk=U.f,pk=Math.round,Y3=Q3.RangeError,f7=mx.ArrayBuffer,$W=f7.prototype,ZW=mx.DataView,fk=Cv.NATIVE_ARRAY_BUFFER_VIEWS,eK=Cv.TYPED_ARRAY_CONSTRUCTOR,m7=Cv.TYPED_ARRAY_TAG,g7=Cv.TypedArray,mk=Cv.TypedArrayPrototype,tK=Cv.aTypedArrayConstructor,q3=Cv.isTypedArray,kx="BYTES_PER_ELEMENT",J3="Wrong length",X3=function(n,i){tK(n);for(var o=0,c=i.length,h=new n(c);c>o;)h[o]=i[o++];return h},Nx=function(n,i){MS(n,i,{get:function(){return Dx(this)[i]}})},_7=function(n){var i;return d7($W,n)||"ArrayBuffer"==(i=u7(n))||"SharedArrayBuffer"==i},v7=function(n,i){return q3(n)&&!ck(i)&&i in n&&s7(+i)&&i>=0},A7=function(n,i){return i=c7(i),v7(n,i)?qW(2,n[i]):hk(n,i)},Px=function(n,i,o){return i=c7(i),!(v7(n,i)&&G3(o)&&ak(o,"value"))||ak(o,"get")||ak(o,"set")||o.configurable||ak(o,"writable")&&!o.writable||ak(o,"enumerable")&&!o.enumerable?MS(n,i,o):(n[i]=o.value,n)};O?(fk||(U.f=A7,K3.f=Px,Nx(mk,"buffer"),Nx(mk,"byteOffset"),Nx(mk,"byteLength"),Nx(mk,"length")),Fy({target:"Object",stat:!0,forced:!fk},{getOwnPropertyDescriptor:A7,defineProperty:Px}),Np.exports=function(n,i,o){var c=n.match(/\d+$/)[0]/8,h=n+(o?"Clamped":"")+"Array",g="get"+n,p="set"+n,v=Q3[h],_=v,y=_&&_.prototype,b={},C=function(w,P){MS(w,P,{get:function(){return G=P,(Z=Dx(this)).view[g](G*c+Z.byteOffset,!0);var G,Z},set:function(j){return Z=P,ae=j,fe=Dx(this),o&&(ae=(ae=pk(ae))<0?0:ae>255?255:255&ae),void fe.view[p](Z*c+fe.byteOffset,ae,!0);var Z,ae,fe},enumerable:!0})};fk?r7&&(_=i(function(w,P,j,G){return o7(w,y),p7(G3(P)?_7(P)?void 0!==G?new v(P,Ox(j,c),G):void 0!==j?new v(P,Ox(j,c)):new v(P):q3(P)?X3(_,P):n7(h7,_,P):new v(a7(P)),w,_)}),uk&&uk(_,g7),W3(XW(v),function(w){w in _||r1(_,w,v[w])}),_.prototype=y):(_=i(function(w,P,j,G){o7(w,y);var Z,ae,fe,be=0,Ce=0;if(G3(P)){if(!_7(P))return q3(P)?X3(_,P):n7(h7,_,P);Z=P,Ce=Ox(j,c);var it=P.byteLength;if(void 0===G){if(it%c||(ae=it-Ce)<0)throw Y3(J3)}else if((ae=JW(G)*c)+Ce>it)throw Y3(J3);fe=ae/c}else fe=a7(P),Z=new f7(ae=fe*c);for(dk(w,{buffer:Z,byteOffset:Ce,byteLength:ae,length:fe,view:new ZW(Z)});be<fe;)C(w,be++)}),uk&&uk(_,g7),y=_.prototype=l7(mk)),y.constructor!==_&&r1(y,"constructor",_),r1(y,eK,_),m7&&r1(y,m7,h),b[h]=_,Fy({global:!0,forced:_!=v,sham:!fk},b),kx in _||r1(_,kx,c),kx in y||r1(y,kx,c),lk(h)}):Np.exports=function(){},(0,Np.exports)("Uint8",function(n){return function(i,o,c){return n(this,i,o,c)}});var nK=Ca,rK=na,iK=Cv.aTypedArray;(0,Cv.exportTypedArrayMethod)("at",function(n){var i=iK(this),o=nK(i),c=rK(n),h=c>=0?c:o+c;return h<0||h>=o?void 0:i[h]});var E7=ie,$3=Cv,oK=Ca,sK=N3,aK=Hp,b7=D,cK=Q.RangeError,Z3=Q.Int8Array,S7=Z3&&Z3.prototype,C7=S7&&S7.set,uK=$3.aTypedArray,lK=$3.exportTypedArrayMethod,eV=!b7(function(){var n=new Uint8ClampedArray(2);return E7(C7,n,{length:1,0:3},1),3!==n[1]}),dK=eV&&$3.NATIVE_ARRAY_BUFFER_VIEWS&&b7(function(){var n=new Z3(2);return n.set(1),n.set("2",1),0!==n[0]||2!==n[1]});lK("set",function(n){uK(this);var i=sK(arguments.length>1?arguments[1]:void 0,1),o=aK(n);if(eV)return E7(C7,this,o,i);var c=this.length,h=oK(o),g=0;if(h+i>c)throw cK("Wrong length");for(;g<h;)this[i+g]=o[g++]},!eV||dK);var I7=D6,hK=Math.floor,tV=function(n,i){var o=n.length,c=hK(o/2);return o<8?pK(n,i):fK(n,tV(I7(n,0,c),i),tV(I7(n,c),i),i)},pK=function(n,i){for(var o,c,h=n.length,g=1;g<h;){for(c=g,o=n[g];c&&i(n[c-1],o)>0;)n[c]=n[--c];c!==g++&&(n[c]=o)}return n},fK=function(n,i,o,c){for(var h=i.length,g=o.length,p=0,v=0;p<h||v<g;)n[p+v]=p<h&&v<g?c(i[p],o[v])<=0?i[p++]:o[v++]:p<h?i[p++]:o[v++];return n},mK=tV,nV=jr.match(/firefox\/(\d+)/i),T7=!!nV&&+nV[1],gK=/MSIE|Trident/.test(jr),w7=jr.match(/AppleWebKit\/(\d+)\./),rV=D,AK=jn,yK=mK,D7=T7,EK=gK,k7=po,N7=!!w7&&+w7[1],bK=Q.Array,SK=Cv.aTypedArray,CK=Cv.exportTypedArrayMethod,gk=Q.Uint16Array,o1=gk&&re(gk.prototype.sort),IK=!(!o1||rV(function(){o1(new gk(2),null)})&&rV(function(){o1(new gk(2),{})})),P7=!!o1&&!rV(function(){if(k7)return k7<74;if(D7)return D7<67;if(EK)return!0;if(N7)return N7<602;var n,i,o=new gk(516),c=bK(516);for(n=0;n<516;n++)i=n%4,o[n]=515-n,c[n]=n-2*i+3;for(o1(o,function(h,g){return(h/4|0)-(g/4|0)}),n=0;n<516;n++)if(o[n]!==c[n])return!0});CK("sort",function(n){return void 0!==n&&AK(n),P7?o1(this,n):yK(SK(this),function(i){return function(o,c){return void 0!==i?+i(o,c)||0:c!=c?-1:o!=o?1:0===o&&0===c?1/o>0&&1/c<0?1:-1:o>c}}(n))},!P7||IK);var TK=gm,M7=mx.ArrayBuffer;let Us;fc({global:!0,forced:Q.ArrayBuffer!==M7},{ArrayBuffer:M7}),TK("ArrayBuffer"),function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(Us||(Us={}));var RK=rh,_k=Array.isArray||function(n){return"Array"==RK(n)},OK=Xr,x7=_k,DK=Ag,kK=Nl,NK=Ns("species"),L7=OK.Array,B7=function(n,i){return new(function(n){var i;return x7(n)&&(DK(i=n.constructor)&&(i===L7||x7(i.prototype))||kK(i)&&null===(i=i[NK]))&&(i=void 0),void 0===i?L7:i}(n))(0===i?0:i)},MK=op,xK=A_,LK=zu,BK=ch,FK=B7,F7=So([].push),Vy=function(n){var i=1==n,o=2==n,c=3==n,h=4==n,g=6==n,p=7==n,v=5==n||g;return function(_,y,b,C){for(var w,P,j=LK(_),G=xK(j),Z=MK(y,b),ae=BK(G),fe=0,be=C||FK,Ce=i?be(_,ae):o||p?be(_,0):void 0;ae>fe;fe++)if((v||fe in G)&&(P=Z(w=G[fe],fe,j),n))if(i)Ce[fe]=P;else if(P)switch(n){case 3:return!0;case 5:return w;case 6:return fe;case 2:F7(Ce,w)}else switch(n){case 4:return!1;case 7:F7(Ce,w)}return g?-1:c||h?h:Ce}},U7={forEach:Vy(0),map:Vy(1),filter:Vy(2),some:Vy(3),every:Vy(4),find:Vy(5),findIndex:Vy(6),filterReject:Vy(7)},UK=U7.forEach,V7=ua("forEach")?[].forEach:function(n){return UK(this,n,arguments.length>1?arguments[1]:void 0)};ns({target:"Array",proto:!0,forced:[].forEach!=V7},{forEach:V7});var VK=qu("Array").forEach,jK=tu,QK=ws,HK=Qc,GK=VK,iV=Array.prototype,WK={DOMTokenList:!0,NodeList:!0},zK=zu,oV=Ys;ns({target:"Object",stat:!0,forced:hs(function(){oV(1)})},{keys:function(n){return oV(zK(n))}});var xS=ff.Object.keys,vk=fR,j7=ns,Ak=_k,Mx=So([].reverse),xx=[1,2];j7({target:"Array",proto:!0,forced:String(xx)===String(xx.reverse())},{reverse:function(){return Ak(this)&&(this.length=this.length),Mx(this)}});var s1=qu("Array").reverse,Lx=Qc,Bx=s1,yk=Array.prototype,sV=hs,aV=mf,Q7=Ns("species"),au=function(n){return aV>=51||!sV(function(){var i=[];return(i.constructor={})[Q7]=function(){return{foo:1}},1!==i[n](Boolean).foo})},$s=ns,xg=Xr,cV=_k,Ek=Ag,ja=Nl,$f=KA,YK=ch,uV=kl,H7=CS,G7=Ns,lV=ZI,W7=au("slice"),K7=G7("species"),bk=xg.Array,z7=Math.max;$s({target:"Array",proto:!0,forced:!W7},{slice:function(n,i){var o,c,h,g=uV(this),p=YK(g),v=$f(n,p),_=$f(void 0===i?p:i,p);if(cV(g)&&((Ek(o=g.constructor)&&(o===bk||cV(o.prototype))||ja(o)&&null===(o=o[K7]))&&(o=void 0),o===bk||void 0===o))return lV(g,v,_);for(c=new(void 0===o?bk:o)(z7(_-v,0)),h=0;v<_;v++,h++)v in g&&H7(c,h,g[v]);return c.length=h,c}});var Sk=qu("Array").slice,LS=Qc,qK=Sk,Ck=Array.prototype;function ir(n,i,o,c,h){var g,p,v,_={};return function(n){var i=n.forEach;return n===iV||HK(iV,n)&&i===iV.forEach||QK(WK,jK(n))?GK:i}(g=xS(c)).call(g,function(y){_[y]=c[y]}),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=vk(p=function(n){var i=n.reverse;return n===yk||Lx(yk,n)&&i===yk.reverse?Bx:i}(v=function(n){var i=n.slice;return n===Ck||LS(Ck,n)&&i===Ck.slice?qK:i}(o).call(o)).call(v)).call(p,function(y,b){return b(n,i,y)||y},_),h&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(h):void 0,_.initializer=void 0),void 0===_.initializer&&(N8(n,i,_),_=null),_}var Y7=qu("Array").values,q7=tu,Ux=ws,dV=Qc,J7=Y7,Ik=Array.prototype,X7={DOMTokenList:!0,NodeList:!0},Lg=function(n){var i=n.values;return n===Ik||dV(Ik,n)&&i===Ik.values||Ux(X7,q7(n))?J7:i},Tk=qu("Array").keys,JK=tu,hV=ws,wk=Qc,Vx=Tk,jx=Array.prototype,Qx={DOMTokenList:!0,NodeList:!0},Iv=function(n){var i=n.keys;return n===jx||wk(jx,n)&&i===jx.keys||hV(Qx,JK(n))?Vx:i};function Hx(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function pV(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?Hx(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Hx(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let Rk=0,fV=0;function Vd(n,i,o){return new Qn((c,h)=>{i.timeout=i.timeout||Bt("HTTP_CONNECT_TIMEOUT"),i.responseType=i.responseType||"json",i.data&&!o?(i.data=JSON.stringify(i.data),Rk+=f1(i.data)):o&&(i.data.size?Rk+=i.data.size:i.data instanceof FormData?Rk+=function(g){let p=0;return/DingTalk/i.test(navigator.userAgent)&&g.realFormData&&(g=g.realFormData),g.forEach(v=>{p+="string"==typeof v?f1(v):v.size}),p+138}(i.data):Rk+=f1(JSON.stringify(i.data))),i.headers=i.headers||{},i.headers["Content-Type"]=i.headers["Content-Type"]||"application/json",i.method="POST",i.url=n,ul.request(i).then(g=>{"string"==typeof g.data?fV+=f1(g.data):g.data instanceof ArrayBuffer||g.data instanceof Uint8Array?fV+=g.data.byteLength:fV+=f1(JSON.stringify(g.data)),c(g.data)}).catch(g=>{ul.isCancel(g)?h(new Pe(Te.OPERATION_ABORTED,"cancel token canceled")):h("ECONNABORTED"===g.code?new Pe(Te.NETWORK_TIMEOUT,g.message):g.response?new Pe(Te.NETWORK_RESPONSE_ERROR,g.response.status):new Pe(Te.NETWORK_ERROR,g.message))})})}function XK(n,i){return mV.apply(this,arguments)}function mV(){return mV=L(function*(n,i){const o=new Blob([i.data],{type:"buffer"});return yield Vd(n,pV(pV({},i),{},{data:o,headers:{"Content-Type":"application/octet-stream"}}),!0)}),mV.apply(this,arguments)}const Vs=new class extends is{set networkState(n){oe.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(OS.NETWORK_STATE_CHANGE,n,this._networkState),n===ku.ONLINE?this.emit(OS.ONLINE):n===ku.OFFLINE&&(this.onlineWaiter=new Qn(i=>{this.once(OS.ONLINE,()=>{this.onlineWaiter=void 0,i(ku.ONLINE)})}),this.emit(OS.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),q(this,"_moduleName","network-indicator"),q(this,"_networkState",ku.ONLINE),q(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=ku.ONLINE}),window.addEventListener("offline",()=>{this.networkState=ku.OFFLINE})}};let Gx=!1;const Kl=new class extends is{constructor(){super(...arguments),q(this,"onAutoplayFailed",void 0),q(this,"onAudioAutoplayFailed",void 0)}};function gV(){const n=zi();if(!Gx){const i=o=>{o.preventDefault(),Gx=!1,"Android"!==n.os||"Chrome"!==n.name&&n.name!==Li.WECHAT?(document.body.removeEventListener("touchstart",i,!0),document.body.removeEventListener("mousedown",i,!0)):document.body.removeEventListener("click",i,!0)};Gx=!0,"Android"!==n.os||"Chrome"!==n.name&&n.name!==Li.WECHAT?(document.body.addEventListener("touchstart",i,!0),document.body.addEventListener("mousedown",i,!0)):document.body.addEventListener("click",i,!0),oe.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Kl.onAutoplayFailed?Kl.onAutoplayFailed():oe.warning(Kl.onAudioAutoplayFailed?"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .":"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),Kl.emit("autoplay-failed")}}function Wx(n){return(new TextEncoder).encode(n)}const Kx=function(n,i){const o=new Uint8Array(n.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o},$K=function(){var n=L(function*(i){return function(o,c){let h="";return new Uint8Array(o).forEach(g=>{h+=g.toString(16).padStart(2,"0")}),h}(yield crypto.subtle.digest("SHA-256",Wx(i)))});return function(o){return n.apply(this,arguments)}}();var $7;function Z7(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function zr(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?Z7(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Z7(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function a1(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Kt};return function(i,o,c){const h=i[o];if("function"==typeof h){const g="AgoraRTCClient"===i.constructor.name?"Client":i.constructor.name;c.value=function(){for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];const y=n.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(o),options:v,tag:sr.TRACER,reportResult:n.reportResult});try{const b=h.apply(this,v);return y.onSuccess(n.reportResult&&b),b}catch(b){throw y.onError(b),b}}}return c}}function c1(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Kt};return function(i,o,c){const h=i[o];if("function"==typeof h){const g="AgoraRTCClient"===i.constructor.name?"Client":i.constructor.name;c.value=L(function*(){for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];const y=n.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(o),options:v,tag:sr.TRACER});try{const b=yield h.apply(this,v);return y.onSuccess(),b}catch(b){throw y.onError(b),b}})}return c}}const Kt=new(ac("AgoraRTCEventReport")($7=class{constructor(){var n=this;q(this,"baseInfoMap",new Map),q(this,"proxyServer",void 0),q(this,"clientList",QT),q(this,"eventUploadTimer",void 0),q(this,"setSessionIdTimer",void 0),q(this,"url",void 0),q(this,"backupUrl",void 0),q(this,"_appId",void 0),q(this,"keyEventUploadPendingItems",[]),q(this,"normalEventUploadPendingItems",[]),q(this,"apiInvokeUploadPendingItems",[]),q(this,"apiInvokeCount",0),q(this,"ltsList",[]),q(this,"lastSendNormalEventTime",Date.now()),q(this,"customReportCounterTimer",void 0),q(this,"customReportCount",0),q(this,"extApiInvoke",function(){var i=L(function*(o){for(const c of o){const h=zr(zr({},c),{},{sid:null,invokeId:++n.apiInvokeCount,tag:sr.TRACER});n.sendApiInvoke(h)}});return function(o){return i.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),Bt("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),Bt("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return oe.error("adjust session ".concat(n," start time, sid is not exist or info is undefined")),void Yt("error",this,"adjustSessionStartTime","adjust session ".concat(n," start time, sid is not exist or info is undefined"));const i=this.baseInfoMap.get(n),o=Date.now(),c=i.startTime;i.startTime=o,oe.debug("rewrite session ".concat(n," startTime: ").concat(o," , ").concat(o-c,"ms")),Yt("debug",this,"adjustSessionStartTime",void 0,"rewrite session ".concat(n," startTime: ").concat(o," , ").concat(o-c,"ms")),this.baseInfoMap.set(n,i)}setAppId(n){this._appId=n}reportApiInvoke(n,i,o){i.timeout=i.timeout||6e4,i.reportResult=void 0===i.reportResult||i.reportResult;const c=Date.now();this.apiInvokeCount+=1;const h=this.apiInvokeCount,g=()=>({tag:i.tag,invokeId:h,sid:n,name:i.name,apiInvokeTime:c,options:i.options,states:i.states||null}),p=!!Bt("SHOW_REPORT_INVOKER_LOG");p&&oe.info("".concat(i.name," start"),i.options);let v=!1;dc(i.timeout).then(()=>{v||(this.sendApiInvoke(zr(zr({},g()),{},{error:Te.API_INVOKE_TIMEOUT,success:!1})),oe.debug("".concat(i.name," timeout")))});const _=new Pe(Te.UNEXPECTED_ERROR,"".concat(i.name,": this api invoke is end"));return{onSuccess:y=>{const b=()=>{if(v)throw _;return v=!0,this.sendApiInvoke(zr(zr({},g()),{},{success:!0},i.reportResult&&{result:y})),p&&oe.info("".concat(i.name," onSuccess")),y};return o?PV(b,i.name+"Success",o,()=>v=!0):b()},onError:y=>{const b=()=>{if(v)throw y;v=!0,this.sendApiInvoke(zr(zr({},g()),{},{success:!1,error:y})),p&&oe.info("".concat(i.name," onFailure"),y.toString())};return o?PV(b,i.name+"Error",o,()=>v=!0):b()}}}sessionInit(n,i){if(this.baseInfoMap.has(n))return;const o=Date.now(),c=this.createBaseInfo(n,o);c.cname=i.cname;const h=Object.assign({},{willUploadConsoleLog:Bt("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:UD?"global":"oversea",areas:Bt("AREAS")&&Bt("AREAS").join(",")},i.extend),g=Date.now(),p=zr(zr({},c),{},{eventType:ma.SESSION_INIT,appid:i.appid,browser:navigator.userAgent,build:LM,lts:g,elapse:g-o,extend:JSON.stringify(h),mode:i.mode,process:Bt("PROCESS_ID"),success:!0,version:ll});this.send({type:Po.SESSION,data:p},!0)}joinChooseServer(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr({},c),{},{eventType:ma.JOIN_CHOOSE_SERVER,lts:h,eventElapse:h-i.lts,chooseServerAddr:i.csAddr,errorCode:i.ec,elapse:h-o.startTime,success:i.succ,chooseServerAddrList:JSON.stringify(i.serverList),uid:i.uid?parseInt(i.uid):null,cid:i.cid?parseInt(i.cid):null,chooseServerIp:i.csIp||"",opid:i.opid,unilbsServerIds:i.unilbsServerIds,extend:i.extend||void 0});this.send({type:Po.JOIN_CHOOSE_SERVER,data:g},!0)}reqUserAccount(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr({},c),{},{eventType:ma.REQ_USER_ACCOUNT,lts:h,success:i.success,serverAddress:i.serverAddr,stringUid:i.stringUid,uid:i.uid,errorCode:i.errorCode,elapse:h-o.startTime,eventElapse:h-i.lts,extend:JSON.stringify(i.extend)});this.send({type:Po.REQ_USER_ACCOUNT,data:g},!0)}joinGateway(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info;i.vid&&(c.vid=i.vid),c.uid=i.uid,c.cid=i.cid;const h=Date.now(),{firstSuccess:g,avoidJoinStartTime:p,isProxy:v,addr:_}=i,y=h-(g&&p?p:o.startTime),b=zr(zr({},c),{},{eventType:ma.JOIN_GATEWAY,lts:h,gatewayAddr:i.addr,success:i.succ,errorCode:i.ec,elapse:y,eventElapse:h-i.lts,firstSuccess:g}),C=b.success?1:0;if(i.succ&&(o.lastJoinSuccessTime=h),g)this.send({type:Po.JOIN_GATEWAY,data:b},!0);else{let w;if(_)if(v){const j=_.match(/h=(\d{1,3}-){3}\d{1,3}/g),G=_.match(/p=[0-9]{1,6}/g);w={isSuccess:C,gatewayIp:j&&j.length?j[0].split("=")[1].replace(/-/g,"."):"",port:G&&G.length?G[0].split("=")[1]:"",isProxy:v?1:0}}else{const j=_.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),G=_.match(/:[0-9]{1,6}/g);w={isSuccess:C,gatewayIp:j&&j.length?j[0].split("//")[1].replace(/-/g,"."):"",port:G&&G.length?G[0].split(":")[1]:"",isProxy:v?1:0}}else w={isSuccess:C,gatewayIp:"",port:"",isProxy:v?1:0};delete b.success,delete b.eventType,delete b.firstSuccess,b.vid=Number(b.vid);const P=Object.assign({},b,w,{eventType:ma.REJOIN_GATEWAY});this.send({type:Po.RE_JOIN_GATEWAY,data:P},!0)}}joinChannelTimeout(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=Date.now(),h=zr(zr({},o.info),{},{lts:c,timeout:i,elapse:c-o.startTime});this.send({type:Po.JOIN_CHANNEL_TIMEOUT,data:h},!0)}publish(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr({},c),{},{eventType:ma.PUBLISH,lts:h,eventElapse:i.eventElapse,elapse:h-o.startTime,success:i.succ,errorCode:i.ec,videoName:i.videoName,audioName:i.audioName,screenName:i.screenName,screenshare:i.screenshare,audio:i.audio,video:i.video,p2pid:i.p2pid,publishRequestid:i.publishRequestid});this.send({type:Po.PUBLISH,data:g},!0)}subscribe(n,i,o){const c=this.baseInfoMap.get(n);if(!c)return;const h=c.info,g=Date.now(),p=zr(zr({},h),{},{eventType:ma.SUBSCRIBE,lts:g,eventElapse:i.eventElapse,elapse:g-c.startTime,success:i.succ,errorCode:i.ec,video:i.video,audio:i.audio,subscribeRequestid:i.subscribeRequestid,p2pid:i.p2pid},o&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof i.peerid?p.peerSuid=i.peerid:p.peer=i.peerid,this.send({type:Po.SUBSCRIBE,data:p},!0)}wsCompressorInit(n){var i;const o=[...Iv(i=this.baseInfoMap).call(i)],h=this.baseInfoMap.get(o.length?o[0]:"UnableToGetSid");if(!h)return;const g=h.info,p=Date.now(),v=zr(zr({},g),{},{eventType:ma.WS_COMPRESSOR_INIT,lts:p,eventElapse:n.eventElapse,elapse:p-h.startTime,status:n.status?1:2});this.send({type:Po.WS_COMPRESSOR_INIT,data:v},!0)}firstRemoteFrame(n,i,o,c){const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,p=Date.now(),v=zr(zr(zr({},g),c),{},{elapse:p-h.startTime,eventType:i,lts:p});this.send({type:o,data:v},!0)}onGatewayStream(n,i,o,c){const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,p=Date.now(),v=zr(zr(zr({},g),c),{},{eventType:i,lts:p});this.send({type:o,data:v},!0)}streamSwitch(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr({},c),{},{eventType:ma.STREAM_SWITCH,lts:h,isDual:i.isdual,elapse:h-o.startTime,success:i.succ});this.send({type:Po.STREAM_SWITCH,data:g},!0)}requestProxyAppCenter(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr({},c),{},{eventType:ma.REQUEST_PROXY_APPCENTER,lts:h,eventElapse:h-i.lts,elapse:h-o.startTime,APAddr:i.APAddr,workerManagerList:i.workerManagerList,response:i.response,errorCode:i.ec,success:i.succ});this.send({type:Po.REQUEST_PROXY_APPCENTER,data:g},!0)}requestProxyWorkerManager(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr({},c),{},{eventType:ma.REQUEST_PROXY_WORKER_MANAGER,lts:h,eventElapse:h-i.lts,elapse:h-o.startTime,workerManagerAddr:i.workerManagerAddr,response:i.response,errorCode:i.ec,success:i.succ});this.send({type:Po.REQUEST_PROXY_WORKER_MANAGER,data:g},!0)}setProxyServer(n){this.proxyServer=n,oe.debug(n?"reportProxyServerurl: ".concat(n):"disable reportProxyServerurl: ".concat(n)),Yt("debug",this,"setProxyServer",n)}peerPublishStatus(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr({},c),{},{subscribeElapse:i.subscribeElapse,peer:i.peer,peerPublishDuration:Math.max(i.audioPublishDuration,i.videoPublishDuration),audiotag:i.audioPublishDuration>0?1:-1,videotag:i.videoPublishDuration>0?1:-1,lts:h,elapse:h-o.startTime,joinChannelSuccessElapse:h-(o.lastJoinSuccessTime||h)});this.send({type:Po.PEER_PUBLISH_STATUS,data:g},!0)}workerEvent(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now();(function(g,p,v){const _=g[p];if(!_||"string"!=typeof _)return[g];g[p]="";const y=f1(JSON.stringify(g));let b=0;const C=[];let w=0;for(let P=0;P<_.length;P++)w+=_.charCodeAt(P)<=127?1:3,w<=1300-y||(C[C.length]=jS(jS({},g),{},{[p]:_.substring(b,P)}),b=P,w=_.charCodeAt(P)<=127?1:3);return b!==_.length-1&&(C[C.length]=jS(jS({},g),{},{[p]:_.substring(b)})),C})(zr(zr(zr({},c),i),{},{elapse:h-o.startTime,lts:h,productType:"WebRTC"}),"payload").forEach(g=>this.send({type:Po.WORKER_EVENT,data:g},!0))}apworkerEvent(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr(zr({},c),i),{},{elapse:h-o.startTime,lts:h});this.send({type:Po.AP_WORKER_EVENT,data:g},!0)}joinWebProxyAP(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr(zr({},c),i),{},{elapse:h-o.startTime,lts:h,extend:i.extend||void 0});this.send({type:Po.JOIN_WEB_PROXY_AP,data:g},!0)}WebSocketQuit(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=zr(zr(zr({},c),i),{},{elapse:h-o.startTime,lts:h});this.send({type:Po.WEBSOCKET_QUIT,data:g},!0)}sendCustomReportMessage(n,i){var o=this;return L(function*(){if(o.customReportCount+=i.length,o.customReportCount>Bt("CUSTOM_REPORT_LIMIT"))throw new Pe(Te.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);o.customReportCounterTimer||(o.customReportCounterTimer=window.setInterval(()=>{o.customReportCount=0},5e3));const c=i.map(h=>({type:Po.USER_ANALYTICS,data:zr({sid:n},h)}));try{Bt("NEW_REPORT_SERVER")?yield o.postDataToStatsCollector2(c):yield o.postDataToStatsCollector(c)}catch(h){throw oe.error("send custom report message failed",h.toString()),new Pe(Te.CUSTOM_REPORT_SEND_FAILED,h.message)}})()}autoplayFailed(n,i,o,c){if(!n)return;const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,p=Date.now(),v=zr(zr({},g),{},{vid:void 0===g.vid?0:Number(g.vid),lts:p,elapse:p-h.startTime,cbRegistered:Kl.onAutoplayFailed||Kl.onAudioAutoplayFailed?1:-1,errorMsg:o,mediaType:i,trackId:c,extend:void 0});this.send({type:Po.AUTOPLAY_FAILED,data:v},!0)}sendApiInvoke(n){const i=Bt("NOT_REPORT_EVENT");if(n.tag&&i.includes&&i.includes(n.tag))return!1;if(null===n.sid)return this.apiInvokeUploadPendingItems.push(n),!1;const o=this.baseInfoMap.get(n.sid);if(!o)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:c,uid:h,cid:g}=o.info;let p;if(n.lts=n.lts||Date.now(),n.error)if(n.error instanceof Pe){const{code:_,message:y}=n.error;p=_||y||n.error.toString()}else p=n.error.toString();const v={invokeId:n.invokeId,sid:n.sid,cname:c,cid:g,uid:h,lts:n.lts,success:n.success,elapse:n.lts-o.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?p:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:Po.API_INVOKE,data:v},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const i=this.apiInvokeUploadPendingItems.length;for(let o=0;o<i;o++){const c=this.apiInvokeUploadPendingItems.shift();c&&(c.sid=n._sessionId,this.sendApiInvoke(Object.assign({},c)))}}})}send(n,i){if(i)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>Bt("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,i){const o=[],c=[];for(;n.length;){const g=n.shift();o.length<20?o.push(g):c.push(g)}n.push(...c);for(const g of[...o]){var h;-1!==this.ltsList.indexOf(g.data.lts)?(g.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(g.data.lts)):(this.ltsList.push(g.data.lts),GM(h=this.ltsList).call(h,(p,v)=>p-v))}return i||(this.lastSendNormalEventTime=Date.now()),o.length&&(Bt("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(o):this.postDataToStatsCollector(o)).catch((g=>p=>{Bt("EVENT_REPORT_RETRY")&&(i?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(g):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(g),this.normalEventUploadPendingItems.length>Bt("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-Bt("NORMAL_EVENT_QUEUE_CAPACITY")),oe.warning("report: drop normal events"))))})(o)),n}postDataToStatsCollector2(n){var i=this;return L(function*(){Vs.networkState===ku.OFFLINE&&(yield Qn.race([Vs.onlineWaiter,dc(2*Xo.maxRetryTimeout)]));const o=g=>{let p=new Uint8Array;return g.forEach(v=>{const _=Wx(JSON.stringify(v.data)),y=new ArrayBuffer(5),b=(w=>{let P=0;return Object.entries(Po).forEach(j=>{let[G,Z]=j;Z===w.type&&(P=GD[G])}),P})(v),C=new DataView(y);C.setUint16(0,_.byteLength,!0),C.setUint8(2,255&b),C.setUint8(3,b>>>8&255),C.setUint8(4,b>>>16&255),p=Kx(p,new Uint8Array(y)),p=Kx(p,_)}),p},c="event";let h=i.proxyServer?"https://".concat(i.proxyServer,"/rs/?h=").concat(Bt("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(c):"https://".concat(Bt("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(c);for(let g=0;g<2;g+=1){1===g&&(h=i.proxyServer?"https://".concat(i.proxyServer,"/rs/?h=").concat(Bt("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(c):"https://".concat(Bt("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(c));try{yield Vd(h,{timeout:1e4,data:o(n),headers:{token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false",appid:i._appId,"Content-Type":"application/octet-stream"}},!0)}catch(p){if(1===g)throw p;continue}return}})()}postDataToStatsCollector(n){var i=arguments,o=this;return L(function*(){let c=i.length>1&&void 0!==i[1]&&i[1];const h={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(v=>JSON.stringify(v)),vid:(v=>{const _=v&&v.data.sid&&o.baseInfoMap.get(v.data.sid);return _&&_.info.vid&&+_.info.vid||0})(n[0])};Vs.networkState===ku.OFFLINE&&(yield Qn.race([Vs.onlineWaiter,dc(2*Xo.maxRetryTimeout)]));const g=c?"/events/proto-raws":"/events/messages";let p=o.url||(o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(Bt("EVENT_REPORT_DOMAIN"),"&p=").concat(Bt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(Bt("EVENT_REPORT_DOMAIN"),":").concat(Bt("STATS_COLLECTOR_PORT")).concat(g));for(let v=0;v<2;v+=1){1===v&&(p=o.backupUrl||(o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(Bt("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(Bt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(Bt("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(Bt("STATS_COLLECTOR_PORT")).concat(g)));try{c?yield XK(p,{timeout:1e4,data:h}):yield Vd(p,{timeout:1e4,data:h})}catch(_){if(1===v)throw _;continue}return}})()}createBaseInfo(n,i){const o=Object.assign({},e3);return o.sid=n,this.baseInfoMap.set(n,{info:o,startTime:i}),o}reportResourceTiming(n,i){const o=performance.getEntriesByName(n),c=o[o.length-1];c&&this.reportApiInvoke(i,{name:"Client.resourceTiming",options:c,tag:sr.TRACER}).onSuccess()}})||$7);Sy.on("REPORT_LOG_UPLOAD",n=>{n.networkState=Vs.networkState,Kt.reportApiInvoke(null,{name:"logUploadError",options:n,tag:sr.TRACER})});class e9 extends is{constructor(i,o){super(),q(this,"trackMediaType",void 0),q(this,"_ID",void 0),q(this,"_hints",[]),q(this,"_isClosed",!1),q(this,"_originMediaStreamTrack",void 0),q(this,"_mediaStreamTrack",void 0),q(this,"_external",{}),this._ID=o||cs(8,"track-"),this._originMediaStreamTrack=i,this._mediaStreamTrack=i,SS.includes(this)||SS.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(i){if(!i){Kt.reportApiInvoke(null,{name:hr.GET_MEDIA_STREAM_TRACK,options:[],tag:sr.TRACER}).onSuccess(this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?this._mediaStreamTrack.label:"")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(i){const o=SS.indexOf(i);-1!==o&&SS.splice(o,1)}(this),this.emit(Fd.CLOSED)}}let js,_V,t9,ZK=1;class cu{constructor(i){q(this,"lockingPromise",Qn.resolve()),q(this,"locks",0),q(this,"name",""),q(this,"lockId",void 0),this.lockId=ZK++,i&&(this.name=i),oe.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(i){let o;this.locks+=1,oe.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof i?i:""));const c=new Qn(g=>{o=()=>{this.locks-=1,oe.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof i?i:"")),g()}}),h=this.lockingPromise.then(()=>o);return this.lockingPromise=this.lockingPromise.then(()=>c),h}}function Tv(n,i){return function(o,c,h){const g=o[c];if("function"!=typeof g)throw new Error("Cannot use mutex on object property.");return h.value=L(function*(){const p=this[i];if(!p)throw new Error("mutex property key ".concat(i," doesn't exist on ").concat(n));const v=yield p.lock("From ".concat(n,".").concat(c));try{for(var _=arguments.length,y=new Array(_),b=0;b<_;b++)y[b]=arguments[b];return yield g.apply(this,y)}finally{v()}}),h}}class zx extends e9{get muted(){return this._muted}get enabled(){return this._enabled}constructor(i,o){super(i,o),q(this,"_enabled",!0),q(this,"_muted",!1),q(this,"_isClosed",!1),q(this,"_trackProcessors",[]),q(this,"_enabledMutex",void 0),q(this,"processor",void 0),q(this,"processorContext",void 0),q(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new cu("".concat(o)),i.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){return this._originMediaStreamTrack.label}close(){this._isClosed||(this.stop(),this._trackProcessors.forEach(i=>i.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,oe.debug("[".concat(this.getTrackId(),"] close")),Yt("debug",this,"close"),this.emit(mr.NEED_CLOSE),super.close())}_registerTrackProcessor(i){var o=this;return L(function*(){if(-1!==o._trackProcessors.indexOf(i))return;const c=o._trackProcessors[o._trackProcessors.length-1];o._trackProcessors.push(i),i.onOutputChange=L(function*(){o._mediaStreamTrack=i.output||o._originMediaStreamTrack,o._updatePlayerSource(),yield xo(o,mr.NEED_REPLACE_TRACK,o)}),c?(c.onOutputChange=L(function*(){c.output&&(yield i.setInput(c.output))}),yield i.setInput(c.output||c.input||o._originMediaStreamTrack)):yield i.setInput(o._originMediaStreamTrack)})()}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const i=this._trackProcessors[this._trackProcessors.length-1];return i.output||i.input||this._originMediaStreamTrack}_updateOriginMediaStreamTrack(i,o){var c=this;return L(function*(){if(i!==c._originMediaStreamTrack){if(c._originMediaStreamTrack.removeEventListener("ended",c._handleTrackEnded),o&&c._originMediaStreamTrack.stop(),i.addEventListener("ended",c._handleTrackEnded),c._originMediaStreamTrack=i,c._trackProcessors.length>0){yield c._trackProcessors[0].setInput(i);const h=c._getOutputFromProcessors();c._mediaStreamTrack=h}else c._mediaStreamTrack=c._originMediaStreamTrack;c._updatePlayerSource(),yield xo(c,mr.NEED_REPLACE_TRACK,c),c.processor&&c.processor.updateInput({track:c._originMediaStreamTrack,context:c.processorContext})}})()}_getDefaultPlayerConfig(){return{}}onTrackEnded(){oe.debug("[".concat(this.getTrackId(),"] track ended")),Bd("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Fd.TRACK_ENDED)}stateCheck(i,o){if(oe.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(i,": ").concat(o,"]")),Yt("debug",this,"stateCheck",{stateName:i,state:o,muted:this._muted,enabled:this._enabled}),Rp(o,i),this._enabled&&this._muted&&"enabled"===i&&!1===o)throw new Pe(Te.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===i&&!0===o)throw new Pe(Te.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}}(function(n){n.IOS_15_INTERRUPTION_START="ios15-interruption-start",n.IOS_15_INTERRUPTION_END="ios15-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})(js||(js={})),function(n){n.AUDIO_CONTEXT_CREATED="audio_context_created"}(_V||(_V={})),function(n){n.AIDenoiser="AIDenoiser"}(t9||(t9={}));const Yx={audioContextInitOptions:{}},u1=new class extends is{constructor(){super(),q(this,"registeredPlugins",[])}setOptions(n,i){Yx[n]&&(Yx[n]=i)}getOptions(n){return Yx[n]}installPlugin(n){n instanceof Object&&n.name&&this.registeredPlugins.push(n.name)}},jy=window.AudioContext||window.webkitAudioContext;let zl=null;const Yr=new class extends is{constructor(){var n;super(...arguments),n=this,q(this,"prevState",void 0),q(this,"curState",void 0),q(this,"currentTime",void 0),q(this,"currentTimeStuckAt",void 0),q(this,"interruptDetectorTrack",void 0),q(this,"onLocalAudioTrackMute",()=>{oe.info("ios15-interruption-start"),yo("info",["WebAudio"],"ios15-interruption-start"),this.emit(js.IOS_15_INTERRUPTION_START)}),q(this,"onLocalAudioTrackUnmute",L(function*(){oe.info("ios15-interruption-end"),yo("info",["WebAudio"],"ios15-interruption-end"),"running"!==n.curState||n.duringInterruption?oe.info("ios15-interruption-end-canceled"):(zl&&(yield zl.suspend()),n.emit(js.IOS_15_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(n){oe.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),Yt("debug",["WebAudio"],"bindInterruptDetectorTrack",n.getTrackId()),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){oe.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),Yt("debug",["WebAudio"],"unbindInterruptDetectorTrack",n.getTrackId()),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function l1(){if(!zl){if(function n9(){if(!jy)return oe.error("your browser is not support web audio"),void xn("error",["WebAudio"],"your browser is not support web audio");oe.info("create audio context"),Ty("info",["WebAudio"],"WebAudioContext");const n=u1.getOptions("audioContextInitOptions");oe.debug("audio content init option:",JSON.stringify(n)),zl=new jy(n),u1.emit(_V.AUDIO_CONTEXT_CREATED,zl),Yr.curState=zl.state,zl.onstatechange=()=>{Yr.prevState=Yr.curState,Yr.curState=zl?zl.state:void 0,(wu()||vv())&&"running"===Yr.prevState&&"interrupted"===Yr.curState&&(oe.info("ios-interruption-start"),yo("info",["AudioState"],"ios-interruption-start"),Yr.emit(js.IOS_INTERRUPTION_START)),(wu()||vv())&&"interrupted"===Yr.prevState&&"running"===Yr.curState&&(oe.info("ios-interruption-end"),yo("info",["AudioState"],"ios-interruption-end"),Yr.emit(js.IOS_INTERRUPTION_END)),Yr.prevState!==Yr.curState&&(oe.debug("AudioContext State Change","".concat(Yr.prevState,"=>").concat(Yr.curState)),Bd("debug",["AudioContext",void 0],"statechange","".concat(Yr.prevState,"=>").concat(Yr.curState)),Yr.emit(js.STATE_CHANGE))},setInterval(()=>{var i;const o=null===(i=zl)||void 0===i?void 0:i.currentTime;Yr.currentTime!==o?(Yr.currentTimeStuckAt&&(oe.debug("AudioContext current time resume at ".concat(o)),Yr.currentTimeStuckAt=void 0),Yr.currentTime=o):(o!==Yr.currentTimeStuckAt&&oe.warning("AudioContext current time stuck at ".concat(o)),Yr.currentTimeStuckAt=o)},5e3),function(){var i=L(function*(o){const c=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let h,g=!1,p=!1,v=!1;function _(ae){"running"===o.state?y(!1):wu()||vv()?"suspended"===o.state&&(y(!0),ae&&o.resume().then(C,C)):"closed"!==o.state&&(y(!0),ae&&o.resume().then(C,C))}function y(ae){if(g!==ae){g=ae;for(let fe=0,be=c;fe<be.length;fe+=1){const Ce=be[fe];ae?window.addEventListener(Ce,w,{capture:!0,passive:!0}):window.removeEventListener(Ce,w,{capture:!0,passive:!0})}}}function C(){_(!1)}function w(){_(!0)}function P(ae){if(!v)if(h.paused)if(ae){let fe;j(!1),v=!0;try{fe=h.play(),fe?fe.then(G,G):(h.addEventListener("playing",G),h.addEventListener("abort",G),h.addEventListener("error",G))}catch{G()}}else j(!0);else j(!1)}function j(ae){if(p!==ae){p=ae;for(let fe=0,be=c;fe<be.length;fe++){const Ce=be[fe];ae?window.addEventListener(Ce,Z,{capture:!0,passive:!0}):window.removeEventListener(Ce,Z,{capture:!0,passive:!0})}}}function G(){h.removeEventListener("playing",G),h.removeEventListener("abort",G),h.removeEventListener("error",G),v=!1,P(!1)}function Z(){P(!0)}if(wu()){const ae=o.createMediaStreamDestination(),fe=document.createElement("div");fe.innerHTML="<audio x-webkit-airplay='deny'></audio>",h=fe.children.item(0),h.controls=!1,h.disableRemotePlayback=!0,h.preload="auto",h.srcObject=ae.stream,P(!0)}Yr.on(js.STATE_CHANGE,function b(){_(!0)}),_(!1)});return function(o){return i.apply(this,arguments)}}()(zl)}(),!zl)throw new Pe(Te.NOT_SUPPORTED,"can not create audio context");return zl}return zl}function d1(n){if(function(){if(null!==h1)return h1;const c=l1(),h=c.createBufferSource(),g=c.createGain(),p=c.createGain();h.connect(g),h.connect(p),h.disconnect(g);let v=!1;try{h.disconnect(g)}catch{v=!0}return h.disconnect(),h1=v,v}())return;Yt("debug",["WebAudio"],"polyfillAudioNode");const i=n.connect,o=n.disconnect;n.connect=(c,h,g)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(c)||(c instanceof AudioNode?(n._inputNodes.push(c),i.call(n,c,h,g)):i.call(n,c,h)),n),n.disconnect=(c,h,g)=>{o.call(n),c?aL(n._inputNodes,c):n._inputNodes=[];for(const p of n._inputNodes)i.call(n,p)}}let h1=null;function vV(n,i){const o=1/i,c=l1();let h=c.createGain();h.gain.value=0,h.connect(c.destination);let g=!1;const p=()=>{if(g)return void(h=null);const v=c.createOscillator();v.onended=p,v.connect(h),v.start(0),v.stop(c.currentTime+o),n(c.currentTime)};return p(),()=>{g=!0}}const wv=oe.prefix("[inject-node]");class Ok{constructor(){q(this,"nodeLists",[]),q(this,"prevNode",void 0),q(this,"nextNode",void 0)}get firstNode(){return this.nodeLists[0]}get lastNode(){return this.nodeLists[this.nodeLists.length-1]}get isActive(){return!!this.nodeLists.length}get isConnected(){return!(!this.prevNode||!this.nextNode)}connect(i,o){wv.debug("connect audio node, current list:"+this.nodeLists.length),this.nodeLists.length?(this.prevNode&&this.prevNode.disconnect(),i.connect(this.firstNode),this.nextNode&&this.lastNode&&this.lastNode.disconnect(),this.lastNode.connect(o),this.nodeLists.forEach((c,h)=>{const g=this.nodeLists[h+1];g&&c.connect(g)})):i.connect(o),this.nextNode=o,this.prevNode=i}disconnect(){var i;wv.debug("disconnect audio node, current list:"+this.nodeLists.length),this.nodeLists.forEach(o=>{o.disconnect()}),null===(i=this.prevNode)||void 0===i||i.disconnect(),this.prevNode=void 0,this.nextNode=void 0}addNode(i){wv.debug("add node in inject node, current list:",this.nodeLists.length),this.prevNode&&this.nextNode?(this.firstNode||(wv.debug("new node is the first node"),this.prevNode.disconnect(),this.prevNode.connect(i),i.connect(this.nextNode)),this.nextNode&&this.lastNode&&(this.lastNode.disconnect(this.nextNode),this.lastNode.connect(i),i.connect(this.nextNode)),this.nodeLists.push(i)):wv.debug("add node is called before inject node connected")}removeNode(i){wv.debug("remove node in inject node, current list:",this.nodeLists.length);const o=this.nodeLists.indexOf(i);if(-1===o)return void wv.debug("$[inject-node] cannot find the node to be removed");const c=this.nodeLists[o+1],h=this.nodeLists[o-1];0===o&&this.prevNode&&this.nextNode&&(this.prevNode.disconnect(i),this.prevNode.connect(c||this.nextNode)),o===this.nodeLists.length-1&&this.nextNode&&h&&(h.disconnect(i),h.connect(this.nextNode)),0!==o&&o!==this.nodeLists.length-1&&(h.disconnect(i),h.connect(c)),wv.debug("remove node in inject node success, current list:",this.nodeLists.length)}}class Dk extends is{get processSourceNode(){return this.sourceNode}set processedNode(i){var o;if(!this.isDestroyed&&this._processedNode!==i){try{var c;null===(c=this.sourceNode)||void 0===c||c.disconnect(this.outputNode)}catch{}null===(o=this._processedNode)||void 0===o||o.disconnect(),this._processedNode=i,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),q(this,"outputNode",void 0),q(this,"outputTrack",void 0),q(this,"isPlayed",!1),q(this,"sourceNode",void 0),q(this,"analyserNode",void 0),q(this,"context",void 0),q(this,"audioBufferNode",void 0),q(this,"destNode",void 0),q(this,"injectNode",void 0),q(this,"audioOutputLevel",0),q(this,"_processedNode",void 0),q(this,"playNode",void 0),q(this,"isDestroyed",!1),q(this,"onNoAudioInput",void 0),q(this,"isNoAudioInput",!1),q(this,"_noAudioInputCount",0),this.context=l1(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),d1(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048,this.injectNode=new Ok}startGetAudioBuffer(i){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(i),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=o=>{this.emit(wc.ON_AUDIO_BUFFER,function(c){for(let h=0;h<c.outputBuffer.numberOfChannels;h+=1){const g=c.outputBuffer.getChannelData(h);for(let p=0;p<g.length;p+=1)g[p]=0}return c.inputBuffer}(o))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Oc().webAudioMediaStreamDest)throw new Pe(Te.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(i){"running"!==this.context.state&&xh(()=>{Yr.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=i||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||wu()||vv()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const i=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(i);let o=0;for(let c=0;c<i.length;c++)o+=c<64?Math.abs(10*i[c]):Math.abs(6*i[c]/15);return o/i.length/255}checkHasAudioInput(){var i=arguments,o=this;return L(function*(){let c=i.length>0&&void 0!==i[0]?i[0]:0;if(c>5)return o.isNoAudioInput=!0,o.onNoAudioInput&&o.onNoAudioInput(),!1;if(wu()||vv()?"suspended"===o.context.state&&o.context.resume():"running"!==o.context.state&&o.context.resume(),!o.analyserNode)return!1;const h=new Uint8Array(o.analyserNode.frequencyBinCount);o.analyserNode.getByteFrequencyData(h);let g=!1;for(let p=0;p<h.length;p++)0!==h[p]&&(g=!0);return g?(o.isNoAudioInput=!1,!0):(yield dc(200),(yield o.checkHasAudioInput(c?c+1:1))&&g)})()}getAudioVolume(){return this.outputNode.gain.value}setVolume(i){this.outputNode.gain.setValueAtTime(i,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}injectAudioNode(i){this.injectNode.addNode(i)}removeAudioNode(i){this.injectNode.removeNode(i)}disconnect(){var i,o;null===(i=this.processedNode)||void 0===i||i.disconnect(),null===(o=this.sourceNode)||void 0===o||o.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var i;this.processedNode?null===(i=this.processedNode)||void 0===i||i.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class r9 extends Dk{get isFreeze(){return!1}constructor(i,o){var c,h;if(super(),c=this,q(this,"sourceNode",void 0),q(this,"track",void 0),q(this,"audioElement",void 0),q(this,"isCurrentTrackCloned",!1),q(this,"isRemoteTrack",!1),q(this,"rebuildWebAudio",L(function*(){if(oe.debug("ready to rebuild web audio, state:",c.context.state),c.isNoAudioInput&&(yield c.checkHasAudioInput()),!c.isNoAudioInput||c.isDestroyed)return document.body.removeEventListener("click",c.rebuildWebAudio,!0),void oe.debug("rebuild web audio success, current volume status",c.getAccurateVolumeLevel());c.context.resume().then(()=>oe.info("resume success")),oe.debug("rebuild web audio because of ios 12 bugs"),c.disconnect();const v=c.track;c.track=c.track.clone(),c.isCurrentTrackCloned?v.stop():c.isCurrentTrackCloned=!0;const _=new MediaStream([c.track]);c.sourceNode=c.context.createMediaStreamSource(_),d1(c.sourceNode),c.analyserNode=c.context.createAnalyser();const y=c.outputNode.gain.value;c.outputNode=c.context.createGain(),c.outputNode.gain.setValueAtTime(y,c.context.currentTime),d1(c.outputNode),c.emit(wc.UPDATE_SOURCE),c.connect(),c.audioElement.srcObject=_,c.isPlayed&&c.play(c.playNode),c.checkHasAudioInput()})),"audio"!==i.kind)throw new Pe(Te.UNEXPECTED_ERROR);this.track=i;const g=new MediaStream([this.track]);this.isRemoteTrack=!!o,this.sourceNode=this.context.createMediaStreamSource(g),d1(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=g;const p=zi();o&&p.os===pa.IOS&&Number(null===(h=p.osVersion)||void 0===h?void 0:h.split(".")[0])<15&&(Yr.on(js.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(v=>{v||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(i){this.sourceNode.disconnect(),this.track=i,this.isCurrentTrackCloned=!1;const o=new MediaStream([i]);this.sourceNode=this.context.createMediaStreamSource(o),d1(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(wc.UPDATE_SOURCE),this.audioElement.srcObject=o}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),Yr.off("state-change",this.rebuildWebAudio),super.destroy()}}function qx(n,i){return kk.apply(this,arguments)}function kk(){return kk=L(function*(n,i){const o=(h,g)=>h?"number"!=typeof h?h.max||h.exact||h.ideal||h.min||g:h:g,c={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:o(i.height,1080),maxWidth:o(i.width,1920)}}};return i.frameRate&&"number"!=typeof i.frameRate?(c.video.mandatory.maxFrameRate=i.frameRate.max,c.video.mandatory.minFrameRate=i.frameRate.min):"number"==typeof i.frameRate&&(c.video.mandatory.maxFrameRate=i.frameRate),yield navigator.mediaDevices.getUserMedia(c)}),kk.apply(this,arguments)}function Jx(n){return Nk.apply(this,arguments)}function Nk(){return Nk=L(function*(n){const i=yield AV(n.mediaSource),o=yield(c=i,new Qn((h,g)=>{const p=document.createElement("div");p.innerText="share screen",p.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const v=document.createElement("div");v.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const _=document.createElement("div");_.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",_.setAttribute("style","height: 12%;");const y=document.createElement("div");y.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const b=document.createElement("div");b.setAttribute("style","text-align: right; padding: 16px 0;");const C=document.createElement("button");C.innerHTML="cancel",C.setAttribute("style","width: 85px;"),C.onclick=()=>{document.body.removeChild(w);const P=new Error("NotAllowedError");P.name="NotAllowedError",g(P)},b.appendChild(C),v.appendChild(_),v.appendChild(y),v.appendChild(b);const w=document.createElement("div");w.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),w.appendChild(p),w.appendChild(v),document.body.appendChild(w),c.map(P=>{if(P.id){const j=document.createElement("div");j.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let G=P.thumbnail;const{width:Z}=G.getSize();Z>1920&&(G=G.resize({width:1920})),j.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+G.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+P.name.replace(/[\u00A0-\u9999<>\&]/g,function(ae){return"&#"+ae.charCodeAt(0)+";"})+"</span>",j.onclick=()=>{document.body.removeChild(w),h(P.id)},y.appendChild(j)}})}));var c;return yield qx(o,n)}),Nk.apply(this,arguments)}function AV(n){return Xx.apply(this,arguments)}function Xx(){return Xx=L(function*(n){let i=["window","screen"];"application"!==n&&"window"!==n||(i=["window"]),"screen"===n&&(i=["screen"]);const o=yV();if(!o)throw new Pe(Te.ELECTRON_IS_NULL);let c=null;try{c=o.desktopCapturer.getSources({types:i})}catch{c=null}c&&c.then||(c=new Qn((h,g)=>{o.desktopCapturer.getSources({types:i},(p,v)=>{p?g(p):h(v)})}));try{return yield c}catch(h){throw new Pe(Te.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,h.toString())}}),Xx.apply(this,arguments)}let Pk=null;function yV(){if(Pk)return Pk;try{return Pk=window.require("electron"),Pk}catch{return null}}const $x=new cu("safari");let Qy=!1,i9=!1;function Pu(n,i){return Mk.apply(this,arguments)}function Mk(){return Mk=L(function*(n,i){let o=0,c=null;for(;o<2;)try{c=yield ez(n,i,o>0);break}catch(h){if(h instanceof Pe)throw oe.error("[".concat(i,"] ").concat(h.toString())),Yt("error",[],"getLocalStream",{config:n,id:i},h.toString()),h;const g=xk(h.name||h.code||h,h.message);if(g.code===Te.MEDIA_OPTION_INVALID){oe.debug("[".concat(i,"] detect media option invalid, retry")),xn("debug",[],"[".concat(i,"] detect media option invalid, retry")),o+=1,yield dc(500);continue}throw oe.error("[".concat(i,"] ").concat(g.toString())),Yt("error",[],"getLocalStream",{config:n,id:i},g.toString()),g}if(!c)throw new Pe(Te.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return c}),Mk.apply(this,arguments)}function ez(n,i,o){return EV.apply(this,arguments)}function EV(){return EV=L(function*(n,i,o){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Pe(Te.NOT_SUPPORTED,"can not find getUserMedia");o&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const c=Oc(),h=new MediaStream;if(n.audioSource&&h.addTrack(n.audioSource),n.videoSource&&h.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return oe.debug("Using Video Source/ Audio Source"),xn("debug",[],"Using Video Source/ Audio Source"),h;if(n.screen)if(yV())FS(h,n.screen.sourceId?yield qx(n.screen.sourceId,n.screen):yield Jx(n.screen));else if(yM()&&n.screen.extensionId&&n.screen.mandatory){if(!c.getStreamFromExtension)throw new Pe(Te.NOT_SUPPORTED,"This browser does not support screen sharing");oe.debug("[".concat(i,'] Screen access on chrome stable, looking for extension"')),xn("debug",[],"[".concat(i,'] Screen access on chrome stable, looking for extension"'));const C=yield(g=n.screen.extensionId,p=i,new Qn((w,P)=>{try{chrome.runtime.sendMessage(g,{getStream:!0},j=>{if(!j||!j.streamId)return oe.error("[".concat(p,"] No response from Chrome Plugin. Plugin not installed properly"),j),Yt("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:p},"No response from Chrome Plugin. Plugin not installed properly, ".concat(j)),void P(new Pe(Te.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));w(j.streamId)})}catch(j){oe.error("[".concat(p,"] AgoraRTC screensharing plugin is not accessible(").concat(g,")"),j.toString()),Yt("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:p},"AgoraRTC screensharing plugin is not accessible(".concat(g,"), ").concat(j.toString())),P(new Pe(Te.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=C,FS(h,yield navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(c.getDisplayMedia){n.screen.mediaSource&&WT(n.screen.mediaSource);const C={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:"screen"===n.screen.mediaSource?"monitor":n.screen.mediaSource};oe.debug("[".concat(i,"] getDisplayMedia:"),JSON.stringify({video:C,audio:!!n.screenAudio})),Ty("debug",["mediaDevices",i],"getDisplayMedia",{video:C,audio:!!n.screenAudio,trackId:i}),FS(h,yield navigator.mediaDevices.getDisplayMedia({video:C,audio:!!n.screenAudio}))}else{if(!Es())throw oe.error("[".concat(i,"] This browser does not support screenSharing")),new Pe(Te.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&WT(n.screen.mediaSource);const C={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};oe.debug("[".concat(i,"] getUserMedia: ").concat(JSON.stringify(C))),Ty("debug",["mediaDevices",i],"getUserMedia",C),FS(h,yield navigator.mediaDevices.getUserMedia(C))}}var g,p;if(!n.video&&!n.audio)return h;let v={video:n.video,audio:n.audio},_=Bt("MEDIA_DEVICE_CONSTRAINTS");if(_)try{"string"==typeof _&&(_=JSON.parse(_)),v=function C(w,P){if(!N9(w)||!N9(P)||Array.isArray(w)&&!Array.isArray(P)||!Array.isArray(w)&&Array.isArray(P))return P;if(Array.isArray(P)&&Array.isArray(w)){const j=[...w];for(let G=0;G<P.length;G++)j[G]=C(w[G],P[G]);return j}{const j=jS({},w);for(const G in P)Object.prototype.hasOwnProperty.call(P,G)&&(j[G]=Object.prototype.hasOwnProperty.call(w,G)?C(w[G],P[G]):P[G]);return j}}(v,_),xn("debug",["mediaDevices",i],"merge configConstraints ".concat(JSON.stringify(_)))}catch{}oe.debug("[".concat(i,"] GetUserMedia"),JSON.stringify(v)),Ty("debug",["mediaDevices",i],"getUserMedia",v),zi();let y,b=null;(Md()||wu()||RD())&&(b=yield $x.lock());try{y=yield navigator.mediaDevices.getUserMedia(v)}catch(C){throw b&&b(),C}return v.audio&&(Qy=!0),v.video&&(i9=!0),FS(h,y),b&&b(),h}),EV.apply(this,arguments)}function xk(n,i){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Pe(Te.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(i));case"NotFoundError":case"DevicesNotFoundError":return new Pe(Te.DEVICE_NOT_FOUND,"".concat(n,": ").concat(i));case"NotSupportedError":return new Pe(Te.NOT_SUPPORTED,"".concat(n,": ").concat(i));case"NotReadableError":return new Pe(Te.NOT_READABLE,"".concat(n,": ").concat(i));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Pe(Te.PERMISSION_DENIED,"".concat(n,": ").concat(i));case"ConstraintNotSatisfiedError":return new Pe(Te.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(i));default:return oe.error("getUserMedia unexpected error",n),Yt("error",[],"handleGetUserMediaError",void 0,n),new Pe(Te.UNEXPECTED_ERROR,"".concat(n,": ").concat(i))}}function FS(n,i){const o=n.getVideoTracks()[0],c=n.getAudioTracks()[0],h=i.getVideoTracks()[0],g=i.getAudioTracks()[0];g&&(c&&n.removeTrack(c),n.addTrack(g)),h&&(o&&n.removeTrack(o),n.addTrack(h))}const ml=new class extends is{get state(){return this._state}set state(n){n!==this._state&&(this.emit(Kf.STATE_CHANGE,n),this._state=n)}constructor(){super(),q(this,"_state",Og.IDLE),q(this,"isAccessMicrophonePermission",!1),q(this,"isAccessCameraPermission",!1),q(this,"lastAccessMicrophonePermission",!1),q(this,"lastAccessCameraPermission",!1),q(this,"checkdeviceMatched",!1),q(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(Bt("ENUMERATE_DEVICES_INTERVAL")||O8()&&NT())&&this.updateDevicesInfo()},Bt("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>oe.error(n.toString()))}enumerateDevices(n,i){var o=arguments,c=this;return L(function*(){let h=o.length>2&&void 0!==o[2]&&o[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Pe(Te.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const g=yield navigator.mediaDevices.enumerateDevices(),p=c.checkMediaDeviceInfoIsOk(g);let v=!c.isAccessMicrophonePermission&&n,_=!c.isAccessCameraPermission&&i;p.audio&&(v=!1),p.video&&(_=!1);let y=null,b=null,C=null;if(!h&&(v||_)){if($x.isLocked&&(oe.debug("[device manager] wait GUM lock"),(yield $x.lock())(),oe.debug("[device manager] GUM unlock")),Qy&&(v=!1,c.isAccessMicrophonePermission=!0),i9&&(_=!1,c.isAccessCameraPermission=!0),oe.debug("[device manager] check media device permissions",n,i,v,_),v&&_){try{C=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(w){const P=xk(w.name||w.code||w,w.message);if(P.code===Te.PERMISSION_DENIED)throw P;oe.warning("getUserMedia failed in getDevices",P)}c.isAccessCameraPermission=!0,c.isAccessMicrophonePermission=!0}else if(v){try{y=yield navigator.mediaDevices.getUserMedia({audio:n})}catch(w){const P=xk(w.name||w.code||w,w.message);if(P.code===Te.PERMISSION_DENIED)throw P;oe.warning("getUserMedia failed in getDevices",P)}c.isAccessMicrophonePermission=!0}else if(_){try{b=yield navigator.mediaDevices.getUserMedia({video:i})}catch(w){const P=xk(w.name||w.code||w,w.message);if(P.code===Te.PERMISSION_DENIED)throw P;oe.warning("getUserMedia failed in getDevices",P)}c.isAccessCameraPermission=!0}oe.debug("[device manager] mic permission",n,"cam permission",i)}try{const w=yield navigator.mediaDevices.enumerateDevices();return y&&y.getTracks().forEach(P=>P.stop()),b&&b.getTracks().forEach(P=>P.stop()),C&&C.getTracks().forEach(P=>P.stop()),y=null,b=null,C=null,w}catch(w){return y&&y.getTracks().forEach(P=>P.stop()),b&&b.getTracks().forEach(P=>P.stop()),C&&C.getTracks().forEach(P=>P.stop()),y=null,b=null,C=null,new Pe(Te.ENUMERATE_DEVICES_FAILED,w.toString()).throw()}})()}getRecordingDevices(){var n=arguments,i=this;return L(function*(){let o=n.length>0&&void 0!==n[0]&&n[0];return(yield i.enumerateDevices(!0,!1,o)).filter(c=>"audioinput"===c.kind)})()}getCamerasDevices(){var n=arguments,i=this;return L(function*(){let o=n.length>0&&void 0!==n[0]&&n[0];return(yield i.enumerateDevices(!1,!0,o)).filter(c=>"videoinput"===c.kind)})()}getSpeakers(){var n=arguments,i=this;return L(function*(){let o=n.length>0&&void 0!==n[0]&&n[0];return(yield i.enumerateDevices(!0,!1,o)).filter(c=>"audiooutput"===c.kind)})()}searchDeviceIdByName(n){let i=null;return this.deviceInfoMap.forEach(o=>{o.device.label===n&&(i=o.device.deviceId)}),i}getDeviceById(n){var i=this;return L(function*(){const o=(yield i.enumerateDevices(!0,!0,!0)).find(c=>c.deviceId===n);if(!o)throw new Pe(Te.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return o})()}init(){var n=this;return L(function*(){n.state=Og.INITING;try{yield n.updateDevicesInfo(),n.state=Og.INITEND}catch(i){throw oe.warning("Device Detection functionality cannot start properly.",i.toString()),n.state=Og.IDLE,!("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)&&new Pe(Te.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),i}})()}updateDevicesInfo(){var n=this;return L(function*(){const i=yield n.enumerateDevices(!0,!0,!0),o=Date.now(),c=[];if(i[0]&&i[0].label&&!1===n.checkdeviceMatched){n.checkdeviceMatched=!0;const g=i.find(v=>"audioinput"===v.kind&&"default"===v.deviceId),p=i.find(v=>"audiooutput"===v.kind&&"default"===v.deviceId);g&&p?p.groupId===g.groupId?oe.debug("[device-check] default input ".concat(g.label," and output ").concat(p.label," is the same group")):oe.warning("[device-check] default input ".concat(g.label," and output ").concat(p.label," is not the same group")):oe.debug("[device-check] default input or output not found")}const h=n.checkMediaDeviceInfoIsOk(i);if(i.forEach(g=>{if(!g.deviceId)return;const p=n.deviceInfoMap.get("".concat(g.kind,"_").concat(g.deviceId));if("ACTIVE"!==(p?p.state:"INACTIVE")){const v={initAt:o,updateAt:o,device:g,state:"ACTIVE"};n.deviceInfoMap.set("".concat(g.kind,"_").concat(g.deviceId),v),c.push(v)}p&&(p.updateAt=o)}),n.deviceInfoMap.forEach((g,p)=>{"ACTIVE"===g.state&&g.updateAt!==o&&(g.state="INACTIVE",c.push(g))}),n.state!==Og.INITEND)return h.audio&&(n.lastAccessMicrophonePermission=!0,n.isAccessMicrophonePermission=!0),void(h.video&&(n.lastAccessCameraPermission=!0,n.isAccessCameraPermission=!0));c.forEach(g=>{switch(g.device.kind){case"audioinput":n.lastAccessMicrophonePermission&&n.isAccessMicrophonePermission&&n.emit(Kf.RECORDING_DEVICE_CHANGED,g);break;case"videoinput":n.lastAccessCameraPermission&&n.isAccessCameraPermission&&n.emit(Kf.CAMERA_DEVICE_CHANGED,g);break;case"audiooutput":n.lastAccessMicrophonePermission&&n.isAccessMicrophonePermission&&n.emit(Kf.PLAYOUT_DEVICE_CHANGED,g)}}),h.audio&&(n.lastAccessMicrophonePermission=!0,n.isAccessMicrophonePermission=!0),h.video&&(n.lastAccessCameraPermission=!0,n.isAccessCameraPermission=!0)})()}checkMediaDeviceInfoIsOk(n){const i=n.filter(h=>"audioinput"===h.kind),o=n.filter(h=>"videoinput"===h.kind),c={audio:!1,video:!1};for(const h of i)if(h.label&&h.deviceId){c.audio=!0;break}for(const h of o)if(h.label&&h.deviceId){c.video=!0;break}return c}};var bV;let o9=ac("AudioElementPlayCenter")(bV=class{constructor(){q(this,"onAutoplayFailed",void 0),q(this,"elementMap",new Map),q(this,"elementStateMap",new Map),q(this,"elementsNeedToResume",[]),q(this,"sinkIdMap",new Map),q(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[i,o]=n;const c=this.elementStateMap.get(i),h=o.srcObject.getAudioTracks()[0];_S()?h&&"live"===h.readyState&&"running"===Yr.curState&&(oe.debug("auto resume after interruption for iOS 15"),xn("debug",["AudioElementPlayCenter",i],"auto resume after interruption for iOS15"),o.pause(),o.play()):c&&"paused"===c&&h&&"live"===h.readyState&&"running"===Yr.curState&&(oe.debug("auto resume after interruption for iOS"),xn("debug",["AudioElementPlayCenter",i],"auto resume after interruption for iOS"),o.play())})}),q(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[i,o]=n;const c=o.srcObject.getAudioTracks()[0];c&&"live"===c.readyState&&(oe.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),Yt("debug",["AudioElementPlayCenter",i],"autoResumeAfterInterruptionOnIOS15"),o.pause(),o.play())})}),this.autoResumeAudioElement(),Yr.on(js.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Yr.on(js.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),Yr.on(js.STATE_CHANGE,()=>{wu()&&"suspended"===Yr.prevState&&"running"===Yr.curState&&this.autoResumeAfterInterruption()})}setSinkID(n,i){var o=this;return L(function*(){const c=o.elementMap.get(n);if(o.sinkIdMap.set(n,i),c)try{yield c.setSinkId(i)}catch(h){throw new Pe(Te.PERMISSION_DENIED,"can not set sink id: "+h.toString())}})()}play(n,i,o,c){if(this.elementMap.has(i))return;const h=document.createElement("audio");h.autoplay=!0,h.srcObject=new MediaStream([n]),this.bindAudioElementEvents(i,h),this.elementMap.set(i,h),this.elementStateMap.set(i,Xs.INIT),this.setVolume(i,o);const g=this.sinkIdMap.get(i);if(g)try{h.setSinkId(g).catch(v=>{oe.warning("[".concat(i,"] set sink id failed"),v.toString()),Ty("warning",["HTMLAudioElement",i],"setSinkId",v.toString())})}catch(v){oe.warning("[".concat(i,"] set sink id failed"),v.toString())}const p=h.play();p&&p.then&&p.catch(v=>{c&&Kt.autoplayFailed(c,"audio",v.message,i),oe.warning("audio element play warning",v.toString()),Ty("warning",["HTMLAudioElement",i],"play",v.toString()),this.elementMap.has(i)&&"NotAllowedError"===v.name&&(oe.warning("detected audio element autoplay failed"),Yt("warning",["AudioElementPlayCenter",i],"play",v.toString()),this.elementsNeedToResume.push(h),xh(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),gV()}))})}updateTrack(n,i){const o=this.elementMap.get(n);o&&(o.srcObject=new MediaStream([i]))}isPlaying(n){return this.elementMap.has(n)}setVolume(n,i){const o=this.elementMap.get(n);o&&(i=Math.max(0,Math.min(100,i)),o.volume=i/100)}stop(n){const i=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!i)return;const o=this.elementsNeedToResume.indexOf(i);this.elementsNeedToResume.splice(o,1),i.srcObject=null,i.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,i){SV.forEach(o=>{i.addEventListener(o,c=>{const h=this.elementStateMap.get(n),g="pause"===c.type?"paused":c.type;oe.debug("[".concat(n,"] audio-element-status change ").concat(h," => ").concat(g)),Bd("debug",["HTMLAudioElement",n],"statusChange","".concat(h," => ").concat(g)),this.elementStateMap.set(n,g)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(i=>{i.play().then(o=>{oe.debug("Auto resume audio element success"),Yt("debug",["AudioElementPlayCenter"],"autoResumeAudioElement")}).catch(o=>{oe.warning("Auto resume audio element failed!",o),Yt("warning",["AudioElementPlayCenter"],"autoResumeAudioElement",o.toString())})}),this.elementsNeedToResume=[]};new Qn(i=>{document.body?i():window.addEventListener("load",()=>i())}).then(()=>{const i=zi();"Android"!==i.os||"Chrome"!==i.name&&i.name!==Li.WECHAT?(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)):document.body.addEventListener("click",n,!0)})}})||bV;const SV=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],Yl=new o9;function as(){return function(n,i,o){const c=n[i];"function"==typeof c&&(o.value=function(){this._isClosed&&new Pe(Te.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var h=arguments.length,g=new Array(h),p=0;p<h;p++)g[p]=arguments[p];const v=c.apply(this,g);return v instanceof Qn?new Qn((_,y)=>{v.then(_).catch(y)}):v})}}var CV,IV,ms,s9,a9,c9,p1,Lk,Bk,TV,Zx,u9,_a,wV,l9,d9,h9,p9,US,f9,m9,g9,_9,eL,v9,A9,Qa,tL;function RV(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Fk(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?RV(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):RV(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let Ha=(CV=ac("LocalAudioTrack","getTrackId"),IV=as(),ms=Tv("LocalAudioTrack","_enabledMutex"),s9=as(),a9=Tv("LocalAudioTrack","_enabledMutex"),c9=as(),p1=c1({report:Kt}),Lk=as(),Bk=as(),TV=as(),Zx=as(),CV((ir((_a=class extends zx{get isPlaying(){return this._useAudioElement?Yl.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(n,i,o){super(n,o),q(this,"trackMediaType","audio"),q(this,"_encoderConfig",void 0),q(this,"_source",void 0),q(this,"_enabled",!0),q(this,"_volume",100),q(this,"_useAudioElement",!1),q(this,"_bypassWebAudio",!1),q(this,"processor",void 0),q(this,"processorContext",void 0),q(this,"processorDestination",void 0),this._encoderConfig=i,this._source=new r9(n),Bt("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),this.processorContext=new E9(this._source.context,this.getTrackId()),this.processorDestination=new y9(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(wc.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(n){Kr(n,"volume",0,1e3);const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),n]},300);this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&Yl.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return oe.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void i.onSuccess();const o=this._source.createOutputTrack();this._mediaStreamTrack!==o&&(this._mediaStreamTrack=o,xo(this,mr.NEED_REPLACE_TRACK,this).then(()=>{oe.debug("[".concat(this.getTrackId(),"] replace web audio track success")),xn("debug",this,"replace web audio track success")}).catch(c=>{oe.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),c),xn("warning",this,"replace web audio track failed ".concat(c.toString()))}))}catch{}i.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}setPlaybackDevice(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[i.getTrackId(),n]});if(!i._useAudioElement)throw new Pe(Te.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield Yl.setSinkID(i.getTrackId(),n)}catch(c){throw o.onError(c),c}o.onSuccess()})()}setEnabled(n,i,o){var c=this;return L(function*(){if(!o){if(n===c._enabled)return;c.stateCheck("enabled",n)}if(oe.info("[".concat(c.getTrackId(),"] start setEnabled"),n),Yt("info",c,"setEnabled",n),n){c._originMediaStreamTrack.enabled=!0;try{o||(c._enabled=!0),yield xo(c,mr.NEED_ENABLE_TRACK,c),oe.info("[".concat(c.getTrackId(),"] setEnabled to ").concat(n," success")),Yt("info",c,"setEnabled",n,"success")}catch(h){throw o||(c._enabled=!1),oe.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),Yt("error",c,"setEnabled",n,h.toString()),h}}else{c._originMediaStreamTrack.enabled=!1,o||(c._enabled=!1);try{yield xo(c,mr.NEED_DISABLE_TRACK,c)}catch(h){throw o||(c._enabled=!0),oe.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),Yt("info",c,"setEnabled",n,h.toString()),h}}})()}setMuted(n){var i=this;return L(function*(){n!==i._muted&&(i.stateCheck("muted",n),i._muted=n,i._originMediaStreamTrack.enabled=!n,oe.debug("[".concat(i.getTrackId(),"] start set muted: ").concat(n)),Yt("debug",i,"setMuted",n),n?yield xo(i,mr.NEED_MUTE_TRACK,i):yield xo(i,mr.NEED_UNMUTE_TRACK,i))})()}getStats(){return m1(()=>{oe.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead"),xn("warning",this,"LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Ov(this,mr.GET_STATS)||Fk({},n3)}setAudioFrameCallback(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!n)return this._source.removeAllListeners(wc.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(i),this._source.removeAllListeners(wc.ON_AUDIO_BUFFER),this._source.on(wc.ON_AUDIO_BUFFER,o=>n(o))}play(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});oe.debug("[".concat(this.getTrackId(),"] start audio playback")),Yt("debug",this,"play"),this._useAudioElement?(oe.debug("[".concat(this.getTrackId(),"] start audio playback in element")),xn("debug",this,"start audio playback in element"),Yl.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),n.onSuccess()}stop(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});oe.debug("[".concat(this.getTrackId(),"] stop audio playback")),Yt("debug",this,"stop"),this._useAudioElement?Yl.stop(this.getTrackId()):this._source.stop(),n.onSuccess()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){oe.debug("[".concat(this.getTrackId(),"] update player source track")),Yt("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Yl.updateTrack(this.getTrackId(),this._mediaStreamTrack)}_updateOriginMediaStreamTrack(n,i){var o=this;return L(function*(){o._originMediaStreamTrack!==n&&(o._originMediaStreamTrack.removeEventListener("ended",o._handleTrackEnded),n.addEventListener("ended",o._handleTrackEnded),i&&o._originMediaStreamTrack.stop(),o._originMediaStreamTrack=n,o.processor&&o.processor.updateInput({track:n,context:o.processorContext}),o._mediaStreamTrack!==o._source.outputTrack?(o._mediaStreamTrack=o._originMediaStreamTrack,o._updatePlayerSource(),yield xo(o,mr.NEED_REPLACE_TRACK,o)):o._source.updateTrack(o._originMediaStreamTrack))})()}renewMediaStreamTrack(n){return Qn.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new Pe(Te.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new Pe(Te.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const i=this.processor;null===(n=this._source.processSourceNode)||void 0===n||n.disconnect(),this.processor._source=!1,this.processor=void 0,i.reset()}bindProcessorDestinationEvents(){var n=this;this.processorDestination.on(Ud.ON_TRACK,function(){var i=L(function*(o){o?o!==n._mediaStreamTrack&&(n._mediaStreamTrack=o,n._updatePlayerSource(),yield xo(n,mr.NEED_REPLACE_TRACK,n)):n._mediaStreamTrack!==n._originMediaStreamTrack&&(n._mediaStreamTrack=n._originMediaStreamTrack,n._updatePlayerSource(),yield xo(n,mr.NEED_REPLACE_TRACK,n))});return function(o){return i.apply(this,arguments)}}()),this.processorDestination.on(Ud.ON_NODE,i=>{this._source.processedNode=i})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Ud.ON_TRACK),this.processorDestination.removeAllListeners(Ud.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(dl.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(dl.REQUEST_CONSTRAINTS)}}).prototype,"setPlaybackDevice",[IV],Object.getOwnPropertyDescriptor(_a.prototype,"setPlaybackDevice"),_a.prototype),ir(_a.prototype,"setEnabled",[ms,s9],Object.getOwnPropertyDescriptor(_a.prototype,"setEnabled"),_a.prototype),ir(_a.prototype,"setMuted",[a9,c9,p1],Object.getOwnPropertyDescriptor(_a.prototype,"setMuted"),_a.prototype),ir(_a.prototype,"getStats",[Lk],Object.getOwnPropertyDescriptor(_a.prototype,"getStats"),_a.prototype),ir(_a.prototype,"setAudioFrameCallback",[Bk],Object.getOwnPropertyDescriptor(_a.prototype,"setAudioFrameCallback"),_a.prototype),ir(_a.prototype,"play",[TV],Object.getOwnPropertyDescriptor(_a.prototype,"play"),_a.prototype),ir(_a.prototype,"stop",[Zx],Object.getOwnPropertyDescriptor(_a.prototype,"stop"),_a.prototype),u9=_a))||u9),Hy=(wV=ac("MicrophoneAudioTrack","getTrackId"),l9=as(),d9=Tv("MicrophoneAudioTrack","_enabledMutex"),h9=as(),wV((ir((US=class extends Ha{constructor(n,i,o,c){super(n,i.encoderConfig?VT(i.encoderConfig):{},c),q(this,"_config",void 0),q(this,"_deviceName","default"),q(this,"_constraints",void 0),q(this,"_originalConstraints",void 0),q(this,"_enabled",!0),fr("info",this,"constructor",{trackId:c,deviceId:n.label,constraints:o}),this._config=i,this._constraints=o,this._originalConstraints=o,this._deviceName=n.label,"boolean"==typeof i.bypassWebAudio&&(this._bypassWebAudio=i.bypassWebAudio),_S()&&Yr.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}setDevice(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.MIC_AUDIO_TRACK_SET_DEVICE,options:[i.getTrackId(),n]});if(oe.info("[".concat(i.getTrackId(),"] start set device to ").concat(n)),Yt("info",i,"setDevice",n),i._enabled)try{const c=yield ml.getDeviceById(n),h={};h.audio=Fk({},i._constraints),h.audio.deviceId={exact:n},i._originMediaStreamTrack.stop();let g=null;try{g=yield Pu(h,i.getTrackId())}catch(p){throw oe.error("[".concat(i.getTrackId(),"] setDevice failed"),p.toString()),Yt("error",i,"setDevice",n,p.toString()),g=yield Pu({video:i._constraints},i.getTrackId()),yield i._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),p}yield i._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),i._deviceName=c.label,i._config.microphoneId=n,i._constraints.deviceId={exact:n}}catch(c){throw o.onError(c),oe.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Yt("error",i,"setDevice",n,c.toString()),c}else try{const c=yield ml.getDeviceById(n);i._deviceName=c.label,i._config.microphoneId=n,i._constraints.deviceId={exact:n}}catch(c){throw o.onError(c),oe.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Yt("error",i,"setDevice",n,c.toString()),c}o.onSuccess(),oe.info("[".concat(i.getTrackId(),"] set device to ").concat(n," success")),Yt("info",i,"setDevice",n,"success")})()}setEnabled(n,i,o){var c=()=>super.setEnabled,h=this;return L(function*(){if(i)return oe.debug("[".concat(h.getTrackId,"] setEnabled false (do not close microphone)")),xn("debug",h,"setEnabled false (do not close microphone)"),yield c().call(h,n);if(!o){if(n===h._enabled)return;h.stateCheck("enabled",n)}if(oe.info("[".concat(h.getTrackId(),"] start setEnabled"),n),Yt("info",h,"setEnabled",n),!n){h._originMediaStreamTrack.onended=null,h._originMediaStreamTrack.stop(),o||(h._enabled=!1);try{yield xo(h,mr.NEED_DISABLE_TRACK,h)}catch(v){throw oe.error("[".concat(h.getTrackId(),"] setEnabled false failed"),v.toString()),Yt("error",h,"setEnabled",n,v.toString()),v}return}const g=Fk({},h._constraints),p=ml.searchDeviceIdByName(h._deviceName);p&&!g.deviceId&&(g.deviceId=p);try{o||(h._enabled=!0);const v=yield Pu({audio:h._constraints},h.getTrackId());yield h._updateOriginMediaStreamTrack(v.getAudioTracks()[0],!1),yield xo(h,mr.NEED_ENABLE_TRACK,h)}catch(v){throw o||(h._enabled=!1),oe.error("[".concat(h.getTrackId(),"] setEnabled true failed"),v.toString()),Yt("error",h,"setEnabled",n,v.toString()),v}oe.info("[".concat(h.getTrackId(),"] setEnabled success")),Yt("info",h,"setEnabled",n,"success")})()}close(){super.close(),_S()&&Yr.unbindInterruptDetectorTrack(this)}onTrackEnded(){var n=this;if((wu()||vv())&&this._enabled&&!this._isClosed&&Yr.duringInterruption){const i=function(){var o=L(function*(){Yr.off(js.IOS_INTERRUPTION_END,i),n._enabled&&!n._isClosed&&(oe.debug("[".concat(n.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),xn("debug",n,"try capture microphone media device for interrupted iOS device"),yield n.setEnabled(!1),yield n.setEnabled(!0))});return function(){return o.apply(this,arguments)}}();Yr.on(js.IOS_INTERRUPTION_END,i)}else oe.debug("[".concat(this.getTrackId(),"] track ended")),Bd("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Fd.TRACK_ENDED)}renewMediaStreamTrack(n){var i=this;return L(function*(){const o=n||i._constraints,c=ml.searchDeviceIdByName(i._deviceName);c&&!o.deviceId&&(o.deviceId=c),i._constraints=o,i._originMediaStreamTrack.stop();const h=yield Pu({audio:i._constraints},i.getTrackId());yield i._updateOriginMediaStreamTrack(h.getAudioTracks()[0],!0)})()}bindProcessorContextEvents(){var n=this;this.processorContext.on(dl.REQUEST_UPDATE_CONSTRAINTS,function(){var i=L(function*(o,c,h){try{const g=Object.assign({},n._originalConstraints,...o);yield n.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(o,c,h){return i.apply(this,arguments)}}()),this.processorContext.on(dl.REQUEST_CONSTRAINTS,function(){var i=L(function*(o){o(n._originMediaStreamTrack.getSettings())});return function(o){return i.apply(this,arguments)}}())}}).prototype,"setDevice",[l9],Object.getOwnPropertyDescriptor(US.prototype,"setDevice"),US.prototype),ir(US.prototype,"setEnabled",[d9,h9],Object.getOwnPropertyDescriptor(US.prototype,"setEnabled"),US.prototype),p9=US))||p9),OV=(f9=ac("BufferSourceAudioTrack","getTrackId"),m9=as(),g9=as(),_9=as(),eL=as(),v9=as(),f9((ir((Qa=class extends Ha{constructor(n,i,o,c){super(i.createOutputTrack(),o,c),q(this,"source",void 0),q(this,"_bufferSource",void 0),fr("info",this,"constructor",{trackId:c}),this.source=n,this._bufferSource=i,this._bufferSource.on(wc.AUDIO_SOURCE_STATE_CHANGE,h=>{this.emit(Fd.SOURCE_STATE_CHANGE,h)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),n,this.duration]});n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer(),i.onSuccess()}pauseProcessAudioBuffer(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),n.onSuccess()}seekAudioBuffer(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(n),i.onSuccess()}resumeProcessAudioBuffer(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),n.onSuccess()}stopProcessAudioBuffer(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),n.onSuccess()}}).prototype,"startProcessAudioBuffer",[m9],Object.getOwnPropertyDescriptor(Qa.prototype,"startProcessAudioBuffer"),Qa.prototype),ir(Qa.prototype,"pauseProcessAudioBuffer",[g9],Object.getOwnPropertyDescriptor(Qa.prototype,"pauseProcessAudioBuffer"),Qa.prototype),ir(Qa.prototype,"seekAudioBuffer",[_9],Object.getOwnPropertyDescriptor(Qa.prototype,"seekAudioBuffer"),Qa.prototype),ir(Qa.prototype,"resumeProcessAudioBuffer",[eL],Object.getOwnPropertyDescriptor(Qa.prototype,"resumeProcessAudioBuffer"),Qa.prototype),ir(Qa.prototype,"stopProcessAudioBuffer",[v9],Object.getOwnPropertyDescriptor(Qa.prototype,"stopProcessAudioBuffer"),Qa.prototype),A9=Qa))||A9),ql=ac("MixingAudioTrack","getTrackId")(tL=class extends Ha{get isActive(){for(const n of this.trackList)if(n._enabled&&!n._isClosed&&!n.muted)return!0;return!1}constructor(){const n=l1().createMediaStreamDestination();super(n.stream.getAudioTracks()[0],void 0,cs(8,"track-mix-")),q(this,"trackList",void 0),q(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=n,this.trackList=[]}hasAudioTrack(n){return-1!==this.trackList.indexOf(n)}addAudioTrack(n){if(-1!==this.trackList.indexOf(n))return oe.debug("track ".concat(n.getTrackId()," is already added")),void xn("debug",this,"track already added");oe.debug("add ".concat(n.getTrackId()," to mixing track")),Yt("debug",this,"addAudioTrack",n.getTrackId()),n._source.outputNode.connect(this.destNode),this.trackList.push(n),this.updateEncoderConfig()}removeAudioTrack(n){if(-1!==this.trackList.indexOf(n)){oe.debug("remove ".concat(n.getTrackId()," from mixing track")),Yt("debug",this,"removeAudioTrack",n.getTrackId());try{n._source.outputNode.disconnect(this.destNode)}catch{}aL(this.trackList,n),this.updateEncoderConfig()}}updateEncoderConfig(){const n={};this.trackList.forEach(i=>{i._encoderConfig&&((i._encoderConfig.bitrate||0)>(n.bitrate||0)&&(n.bitrate=i._encoderConfig.bitrate),(i._encoderConfig.sampleRate||0)>(n.sampleRate||0)&&(n.sampleRate=i._encoderConfig.sampleRate),(i._encoderConfig.sampleSize||0)>(n.sampleSize||0)&&(n.sampleSize=i._encoderConfig.sampleSize),i._encoderConfig.stereo&&(n.stereo=!0))}),this._encoderConfig=n}})||tL;class y9 extends is{constructor(i){super(),q(this,"name","AudioProcessorDestination"),q(this,"ID","0"),q(this,"inputTrack",void 0),q(this,"inputNode",void 0),q(this,"audioProcessorContext",void 0),q(this,"_source",void 0),this.audioProcessorContext=i}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Pe(Te.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Pe(Te.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.emit(Ud.ON_TRACK,void 0),this.emit(Ud.ON_NODE,void 0)}updateInput(i){if(i.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");i.track&&this.inputTrack!==i.track&&(this.inputTrack=i.track,this.emit(Ud.ON_TRACK,this.inputTrack)),i.node&&this.inputNode!==i.node&&(this.inputNode=i.node,this.emit(Ud.ON_NODE,this.inputNode))}}class E9 extends is{constructor(i,o){super(),q(this,"constraintsMap",new Map),q(this,"statsRegistry",[]),q(this,"audioContext",void 0),q(this,"trackId",void 0),this.audioContext=i,this.trackId=o}getConstraints(){var i=this;return L(function*(){return jd(i,dl.REQUEST_CONSTRAINTS)})()}getAudioContext(){return this.audioContext}requestApplyConstraints(i,o){var c=this;return L(function*(){var h;return oe.info("processor ".concat(o.name," requestApplyConstraints for ").concat(c.trackId)),i&&c.constraintsMap.set(o,i),xo(c,dl.REQUEST_UPDATE_CONSTRAINTS,Array.from(Lg(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(i){var o=this;return L(function*(){var c;if(o.constraintsMap.has(i))return o.constraintsMap.delete(i),xo(o,dl.REQUEST_UPDATE_CONSTRAINTS,Array.from(Lg(c=o.constraintsMap).call(c)))})()}registerStats(i,o,c){this.statsRegistry.find(h=>h.processorID===i.ID&&h.processorName===i.name&&h.type===o)||this.statsRegistry.push({processorName:i.name,processorID:i.ID,type:o,cb:c})}unregisterStats(i,o){}gatherStats(){return this.statsRegistry.map(i=>{let{processorID:o,processorName:c,type:h,cb:g}=i;return{processorID:o,processorName:c,type:h,stats:g()}})}}class b9 extends is{constructor(){super(...arguments),q(this,"resultStorage",new Map)}setLocalAudioStats(i,o,c){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",i,this.checkAudioInputLevel(c,o)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",i,this.checkSendAudioBitrate(c,o))}setLocalVideoStats(i,o,c){this.record("SEND_VIDEO_BITRATE_TOO_LOW",i,this.checkSendVideoBitrate(c,o)),this.record("FRAMERATE_INPUT_TOO_LOW",i,this.checkFramerateInput(c,o)),this.record("FRAMERATE_SENT_TOO_LOW",i,this.checkFramerateSent(c))}setRemoteAudioStats(i,o){const c=i.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",c,this.checkAudioOutputLevel(o))}setRemoteVideoStats(i,o){const c=i.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",c,this.checkVideoDecode(o))}record(i,o,c){this.resultStorage.has(i)||this.resultStorage.set(i,{result:[],isPrevNormal:!0});const h=this.resultStorage.get(i);if(h&&(h.result.push(c),h.result.length>=5)){const g=h.result.includes(!0);h.isPrevNormal&&!g&&this.emit("exception",VS[i],i,o),!h.isPrevNormal&&g&&this.emit("exception",VS[i]+2e3,i+"_RECOVER",o),h.isPrevNormal=g,h.result=[]}}checkAudioOutputLevel(i){return!(i.receiveBitrate>0&&0===i.receiveLevel)}checkAudioInputLevel(i,o){return o instanceof ql&&!o.isActive||!!o.muted||0!==i.sendVolumeLevel}checkFramerateInput(i,o){let c=null;o._encoderConfig&&o._encoderConfig.frameRate&&(c=Rv(o._encoderConfig.frameRate));const h=i.captureFrameRate;return!c||!h||!(c>10&&h<5||c<10&&c>=5&&h<=1)}checkFramerateSent(i){return!(i.captureFrameRate&&i.sendFrameRate&&i.captureFrameRate>5&&i.sendFrameRate<=1)}checkSendVideoBitrate(i,o){return!!o.muted||0!==i.sendBitrate}checkSendAudioBitrate(i,o){return o instanceof ql&&!o.isActive||!!o.muted||0!==i.sendBitrate}checkVideoDecode(i){return 0===i.receiveBitrate||0!==i.decodeFrameRate}}const VS={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},gl=new class{markSubscribeStart(n,i){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(i))}markPublishStart(n,i){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(i))}measureFromSubscribeStart(n,i){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(i));if(o.length>0){const c=o[o.length-1];return Math.round(performance.now()-c.startTime)}return 0}measureFromPublishStart(n,i){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(i));if(o.length>0){const c=o[o.length-1];return Math.round(performance.now()-c.startTime)}return 0}};function DV(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Gy(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?DV(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):DV(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class Wy{constructor(i){q(this,"store",void 0),q(this,"onStatsException",void 0),q(this,"onUploadPublishDuration",void 0),q(this,"localStats",new Map),q(this,"remoteStats",new Map),q(this,"updateStatsInterval",void 0),q(this,"trafficStats",void 0),q(this,"trafficStatsPeerList",[]),q(this,"uplinkStats",void 0),q(this,"exceptionMonitor",void 0),q(this,"p2pChannel",void 0),q(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=i,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new b9,this.exceptionMonitor.on("exception",(o,c,h)=>{this.onStatsException&&this.onStatsException(o,c,h)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Dn.LocalAudioTrack)||Gy({},n3)}getLocalVideoTrackStats(){return this.localStats.get(Dn.LocalVideoTrack)||Gy({},r3)}getRemoteAudioTrackStats(i){const o=(g,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(_=>_.peer_uid===g);return v&&(p.publishDuration=v.B_ppad+(Date.now()-this.trafficStats.timestamp)),p},c={};if(i){var h;const g=null===(h=this.remoteStats.get(i))||void 0===h?void 0:h.audioStats;g&&(c[i]=o(i,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[p,{audioStats:v}]=g;v&&(c[p]=o(p,v))});return c}getRemoteNetworkQualityStats(i){const o={};if(i){var c;const h=null===(c=this.remoteStats.get(i))||void 0===c?void 0:c.networkStats;h&&(o[i]=h)}else Array.from(this.remoteStats.entries()).forEach(h=>{let[g,{networkStats:p}]=h;p&&(o[g]=p)});return o}getRemoteVideoTrackStats(i){const o=(g,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(_=>_.peer_uid===g);return v&&(p.publishDuration=v.B_ppvd+(Date.now()-this.trafficStats.timestamp)),p},c={};if(i){var h;const g=null===(h=this.remoteStats.get(i))||void 0===h?void 0:h.videoStats;g&&(c[i]=o(i,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[p,{videoStats:v}]=g;v&&(c[p]=o(p,v))});return c}getRTCStats(){let i=0,o=0,c=0,h=0;const g=this.localStats.get(Dn.LocalAudioTrack);g&&(i+=g.sendBytes,o+=g.sendBitrate);const p=this.localStats.get(Dn.LocalVideoTrack);p&&(i+=p.sendBytes,o+=p.sendBitrate);const v=this.localStats.get(Dn.LocalVideoLowTrack);v&&(i+=v.sendBytes,o+=v.sendBitrate),this.remoteStats.forEach(y=>{let{audioStats:b,videoStats:C}=y;b&&(c+=b.receiveBytes,h+=b.receiveBitrate),C&&(c+=C.receiveBytes,h+=C.receiveBitrate)});let _=1;return this.trafficStats&&(_+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:_,SendBitrate:o,SendBytes:i,RecvBytes:c,RecvBitrate:h,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(i){this.localStats.set(i,void 0)}removeLocalStats(i){i?this.localStats.delete(i):this.localStats.clear()}addRemoteStats(i){this.remoteStats.set(i,{})}removeRemoteStats(i){i?this.remoteStats.delete(i):this.remoteStats.clear()}addP2PChannel(i){this.p2pChannel=i}updateTrafficStats(i){i.peer_delay=i.peer_delay.filter(o=>void 0!==o.B_ppad||void 0!==o.B_ppvd),i.peer_delay.filter(o=>-1===this.trafficStatsPeerList.indexOf(o.peer_uid)).forEach(o=>{var c;const h=null===(c=this.p2pChannel)||void 0===c?void 0:c.getRemoteMedia(o.peer_uid),g=null!=h&&h.videoSSRC?gl.measureFromSubscribeStart(this.store.clientId,h.videoSSRC):0,p=null!=h&&h.audioSSRC?gl.measureFromSubscribeStart(this.store.clientId,h.audioSSRC):0;void 0!==o.B_ppad&&void 0!==o.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(o.peer_uid,o.B_ppad,o.B_ppvd,g>p?g:p),this.trafficStatsPeerList.push(o.peer_uid))}),this.trafficStats=i}updateUplinkStats(i){this.uplinkStats&&this.uplinkStats.B_fir!==i.B_fir&&oe.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(i.B_fir)),this.uplinkStats=i}static isRemoteVideoFreeze(i,o,c){return!!i&&(!!c&&o.framesDecodeFreezeTime>c.framesDecodeFreezeTime||!(!c||o.framesDecodeCount>c.framesDecodeCount))}static isRemoteAudioFreeze(i){return!!i&&i._isFreeze()}isLocalVideoFreeze(i){return!(!i.inputFrame||!i.sentFrame)&&i.inputFrame.frameRate>5&&i.sentFrame.frameRate<3}updateLocalStats(i){Array.from(this.localStats.entries()).forEach(o=>{let[c,h]=o;switch(c){case Dn.LocalVideoTrack:case Dn.LocalVideoLowTrack:{const g=h,p=Gy({},r3),v=i.getStats(),_=i.getLocalMedia(c);if(v){const y=v.videoSend.find(b=>b.ssrc===_?.ssrcs[0].ssrcId);if(y){const b=i.getLocalVideoSize(),C=i.getEncoderConfig(Dn.LocalVideoTrack);"H264"!==y.codec&&"VP8"!==y.codec&&"VP9"!==y.codec&&"AV1X"!==y.codec&&"AV1"!==y.codec||(p.codecType=y.codec),p.sendBytes=y.bytes,p.sendBitrate=g?8*Math.max(0,p.sendBytes-g.sendBytes):0,y.inputFrame?(p.captureFrameRate=y.inputFrame.frameRate,p.captureResolutionHeight=y.inputFrame.height,p.captureResolutionWidth=y.inputFrame.width):b&&(p.captureResolutionWidth=b.width,p.captureResolutionHeight=b.height),y.sentFrame?(p.sendFrameRate=y.sentFrame.frameRate,p.sendResolutionHeight=y.sentFrame.height,p.sendResolutionWidth=y.sentFrame.width):b&&(p.sendResolutionWidth=b.width,p.sendResolutionHeight=b.height),y.avgEncodeMs&&(p.encodeDelay=y.avgEncodeMs),C&&C.bitrateMax&&(p.targetSendBitrate=1e3*C.bitrateMax),p.sendPackets=y.packets,p.sendPacketsLost=y.packetsLost,p.totalDuration=g?g.totalDuration+1:1,p.totalFreezeTime=g?g.totalFreezeTime:0,this.isLocalVideoFreeze(y)&&(p.totalFreezeTime+=1)}this.trafficStats&&(p.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(c,p),p&&_&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,_.track,p);break}case Dn.LocalAudioTrack:{const g=h,p=Gy({},n3),v=i.getStats(),_=i.getLocalMedia(c);if(v){const y=v.audioSend.find(b=>b.ssrc===_?.ssrcs[0].ssrcId);if(y){if("opus"!==y.codec&&"aac"!==y.codec&&"PCMU"!==y.codec&&"PCMA"!==y.codec&&"G722"!==y.codec||(p.codecType=y.codec),y.inputLevel)p.sendVolumeLevel=Math.round(32767*y.inputLevel);else{const b=i.getLocalAudioVolume();b&&(p.sendVolumeLevel=Math.round(32767*b))}p.sendBytes=y.bytes,p.sendPackets=y.packets,p.sendPacketsLost=y.packetsLost,p.sendBitrate=g?8*Math.max(0,p.sendBytes-g.sendBytes):0}}this.trafficStats&&(p.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Dn.LocalAudioTrack,p),p&&_&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,_.track,p);break}}})}updateRemoteStats(i){Array.from(this.remoteStats.entries()).forEach(o=>{let[c,{videoStats:h,audioStats:g,videoPcStats:p}]=o;const v=g,_=h,y=p,b=Gy({},A6),C=Gy({},y6),w=Gy({},MW),{audioTrack:P,videoTrack:j,audioSSRC:G,videoSSRC:Z}=i.getRemoteMedia(c),ae=i.getStats(),fe=ae?.audioRecv.find(it=>it.ssrc===G),be=ae?.videoRecv.find(it=>it.ssrc===Z),Ce=this.trafficStats&&this.trafficStats.peer_delay.find(it=>it.peer_uid===c);if(fe&&("opus"!==fe.codec&&"aac"!==fe.codec&&"PCMU"!==fe.codec&&"PCMA"!==fe.codec&&"G722"!==fe.codec||(b.codecType=fe.codec),fe.outputLevel?b.receiveLevel=Math.round(32767*fe.outputLevel):P&&(b.receiveLevel=Math.round(32767*P.getVolumeLevel())),b.receiveBytes=fe.bytes,b.receivePackets=fe.packets,b.receivePacketsLost=fe.packetsLost,b.packetLossRate=b.receivePacketsLost/(b.receivePackets+b.receivePacketsLost),b.receiveBitrate=v?8*Math.max(0,b.receiveBytes-v.receiveBytes):0,b.totalDuration=v?v.totalDuration+1:1,b.totalFreezeTime=v?v.totalFreezeTime:0,b.freezeRate=b.totalFreezeTime/b.totalDuration,b.receiveDelay=fe.jitterBufferMs,b.totalDuration>10&&Wy.isRemoteAudioFreeze(P)&&(b.totalFreezeTime+=1)),be){"H264"!==be.codec&&"VP8"!==be.codec&&"VP9"!==be.codec&&"AV1X"!==be.codec&&"AV1"!==be.codec||(C.codecType=be.codec),C.receiveBytes=be.bytes,C.receiveBitrate=_?8*Math.max(0,C.receiveBytes-_.receiveBytes):0,C.decodeFrameRate=be.decodeFrameRate<0?0:be.decodeFrameRate,C.renderFrameRate=be.decodeFrameRate<0?0:be.decodeFrameRate,be.outputFrame&&(C.renderFrameRate=be.outputFrame.frameRate),be.receivedFrame?(C.receiveFrameRate=be.receivedFrame.frameRate,C.receiveResolutionHeight=be.receivedFrame.height,C.receiveResolutionWidth=be.receivedFrame.width):j&&(C.receiveResolutionHeight=j._videoHeight||0,C.receiveResolutionWidth=j._videoWidth||0),void 0!==be.framesRateFirefox&&(C.receiveFrameRate=Math.round(be.framesRateFirefox)),C.receivePackets=be.packets,C.receivePacketsLost=be.packetsLost,C.packetLossRate=C.receivePacketsLost/(C.receivePackets+C.receivePacketsLost),C.totalDuration=_?_.totalDuration+1:1,C.totalFreezeTime=_?_.totalFreezeTime:0,C.receiveDelay=be.jitterBufferMs||0;const it=!!Z&&i.getRemoteVideoIsReady(Z);j&&it&&Wy.isRemoteVideoFreeze(j,be,y)&&(C.totalFreezeTime+=1),C.freezeRate=C.totalFreezeTime/C.totalDuration}Ce&&(b.end2EndDelay=Ce.B_ad,C.end2EndDelay=Ce.B_vd,b.transportDelay=Ce.B_ed,C.transportDelay=Ce.B_ed,b.currentPacketLossRate=Ce.B_ealr4/100,C.currentPacketLossRate=Ce.B_evlr4/100,w.uplinkNetworkQuality=Ce.B_punq?Ce.B_punq:0,w.downlinkNetworkQuality=Ce.B_pdnq?Ce.B_pdnq:0),this.remoteStats.set(c,{audioStats:b,videoStats:C,videoPcStats:be,networkStats:w}),P&&this.exceptionMonitor.setRemoteAudioStats(P,b),j&&this.exceptionMonitor.setRemoteVideoStats(j,C)})}}function S9(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function nL(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?S9(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):S9(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function tz(n){if(!n.address||!n.tcp)throw new Pe(Te.UNEXPECTED_RESPONSE,"Invalid address format ".concat(n));return n.address.match(/^[\.\:\d]+$/)?"".concat(n.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(oe.info("Cannot recognized as IP address ".concat(n.address,". Used As Host instead")),"".concat(n.address,":").concat(n.tcp))}function Uk(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(Bt("TURN_DOMAIN")):(oe.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function C9(n,i){const o=Bt("GATEWAY_DOMAINS");let c=o[1]&&-1!==i.indexOf(o[1])?1:0;return n.addresses=n.addresses||[],{gatewayAddrs:n.addresses.map(h=>h.domain_prefix?{address:"".concat(h.domain_prefix,".").concat(o[c++%o.length],":").concat(h.port)}:h.ip.match(/^[\.\:\d]+$/)?{ip:h.ip,port:h.port,address:"".concat(h.ip.replace(/[^\d]/g,"-"),".").concat(o[c++%o.length],":").concat(h.port)}:(oe.info("Cannot recognized as IP address ".concat(h.ip,". Used As Host instead")),{ip:h.ip,port:h.port,address:"".concat(h.ip,":").concat(h.port)})),uid:n.uid,cid:n.cid,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function Rv(n){return"number"==typeof n?n:n.exact||n.ideal||n.max||n.min||0}function kV(n){const i=n._encoderConfig;if(!i)return{};const o={resolution:i.width&&i.height?"".concat(Rv(i.width),"x").concat(Rv(i.height)):void 0,maxVideoBW:i.bitrateMax,minVideoBW:i.bitrateMin};return"number"==typeof i.frameRate?(o.maxFrameRate=i.frameRate,o.minFrameRate=i.frameRate):i.frameRate&&(o.maxFrameRate=i.frameRate.max||i.frameRate.ideal||i.frameRate.exact||i.frameRate.min,o.minFrameRate=i.frameRate.min||i.frameRate.ideal||i.frameRate.exact||i.frameRate.max),o}function NV(n,i,o){var c;const h=i.videoSend.find(v=>v.ssrc===n);if(!h)return null;const g=null==o||null===(c=o.videoSend.find(v=>v.ssrc===n))||void 0===c?void 0:c.inputFrame,p={id:cs(10,""),timestamp:new Date(i.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:h.ssrc.toString()};return h.inputFrame&&(g&&h.inputFrame.height===g.height||(p.A_fhi=h.inputFrame.height?h.inputFrame.height.toString():"0"),g&&h.inputFrame.width===g.width||(p.A_fwi=h.inputFrame.width?h.inputFrame.width.toString():"0"),g&&h.inputFrame.frameRate===g.frameRate||(p.A_fri=h.inputFrame.frameRate?h.inputFrame.frameRate.toString():"0")),p}function rL(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function iL(n,i){let o,c,h;switch(i){case Us.CHOOSE_SERVER:o=4096,c="choose server";break;case Us.CLOUD_PROXY:o=1048576,c="proxy";break;case Us.CLOUD_PROXY_5:o=4194304,c="proxy5";break;case Us.CLOUD_PROXY_FALLBACK:o=4194310,c="proxy fallback";break;default:throw new Pe(Te.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(g=>{g.buffer&&g.buffer.flag===o&&(h={code:g.buffer.code,addresses:(g.buffer.edges_services||[]).map(p=>nL(nL({},p),{},{ticket:g.buffer.cert})),server_ts:n.enter_ts,uid:g.buffer.uid,cid:g.buffer.cid,cname:g.buffer.cname,detail:nL(nL({},g.buffer.detail),n.detail),flag:g.buffer.flag,opid:n.opid})}),!h)throw new Pe(Te.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(c," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return h}function I9(n,i){return Vk.apply(this,arguments)}function Vk(){return Vk=L(function*(n,i){return yield Qn.all(n.addresses.map(function(){var o=L(function*(c){return{address:Uk(c.ip),tcpport:c.port,udpport:c.port,username:i&&Bt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?i.toString():Js.username,password:i&&Bt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?yield $K(i.toString()):Js.password}});return function(c){return o.apply(this,arguments)}}()))}),Vk.apply(this,arguments)}function T9(n,i){const o=i._videoHeight||i.getMediaStreamTrack(!0).getSettings().height;return o?o/Rv(n.height):4}function Bg(n){let{candidateType:i,relayProtocol:o,type:c,address:h,port:g,protocol:p}=n;return"local-candidate"===c?{candidateType:i,relayProtocol:o,protocol:p}:{candidateType:i,relayProtocol:o,address:h,port:g,protocol:p}}function oL(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function jS(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?oL(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):oL(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function f1(n){return window.TextEncoder?(new TextEncoder).encode(n).length:n.length}function dc(n){return new Qn(i=>{window.setTimeout(i,n)})}function nz(n){const i=new Pe(Te.TIMEOUT,"timeout");return new Qn((o,c)=>{window.setTimeout(()=>c(i),n)})}function cs(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,i=arguments.length>1?arguments[1]:void 0;const o=Math.random().toString(16).substr(2,n).toLowerCase();return o.length===n?"".concat(i).concat(o):"".concat(i).concat(o)+cs(n-o.length,"")}function w9(){return cs(32,"").toUpperCase()}const sL=()=>{};function R9(n){return new Qn((i,o)=>{let c=!1;const h=document.createElement("video");h.setAttribute("autoplay",""),h.setAttribute("muted",""),h.muted=!0,h.autoplay=!0,h.setAttribute("playsinline",""),h.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(h);const g=wu()?"canplay":"playing";h.addEventListener(g,()=>{const p=h.videoWidth,v=h.videoHeight;!p&&Es()||(c=!0,h.srcObject=null,h.remove(),i([p,v]))}),h.srcObject=new MediaStream([n]),h.play().catch(sL),setTimeout(()=>{c||(h.srcObject=null,h.remove(),i([h.videoWidth,h.videoHeight]))},4e3)})}function QS(n){return Qn.all(n.map(i=>i.then(o=>{throw o},o=>o))).then(i=>{throw i},i=>i)}function jd(n,i){for(var o=arguments.length,c=new Array(o>2?o-2:0),h=2;h<o;h++)c[h-2]=arguments[h];return 0===n.getListeners(i).length?Qn.reject(new Pe(Te.UNEXPECTED_ERROR,"can not emit promise")):new Qn((g,p)=>{n.emit(i,...c,g,p)})}function xo(n,i){if(0===n.getListeners(i).length)return Qn.resolve();for(var o=arguments.length,c=new Array(o>2?o-2:0),h=2;h<o;h++)c[h-2]=arguments[h];return jd(n,i,...c)}function Ov(n,i){if(0===n.getListeners(i).length)return null;for(var o=arguments.length,c=new Array(o>2?o-2:0),h=2;h<o;h++)c[h-2]=arguments[h];return HS(n,i,...c)}function HS(n,i){let o=null,c=null;for(var h=arguments.length,g=new Array(h>2?h-2:0),p=2;p<h;p++)g[p-2]=arguments[p];if(n.emit(i,...g,v=>{o=v},v=>{c=v}),null!==c)throw c;if(null===o)throw new Pe(Te.UNEXPECTED_ERROR,"handler is not sync");return o}function aL(n,i){const o=n.indexOf(i);-1!==o&&n.splice(o,1)}function O9(n){const i=[];return n.forEach(o=>{-1===i.indexOf(o)&&i.push(o)}),i}function xh(n){Qn.resolve().then(n)}function Ga(n){return JSON.parse(JSON.stringify(n))}const D9={};function m1(n,i){D9[i]||(D9[i]=!0,n())}function jk(n){const i=window.atob(n),o=new Uint8Array(new ArrayBuffer(i.length));for(let c=0;c<i.length;c+=1)o[c]=i.charCodeAt(c);return o}function g1(n){let i="";for(let o=0;o<n.length;o+=1)i+=String.fromCharCode(n[o]);return window.btoa(i)}const k9=new class{constructor(){q(this,"fnMap",new Map)}throttleByKey(n,i,o,c){for(var h=arguments.length,g=new Array(h>4?h-4:0),p=4;p<h;p++)g[p-4]=arguments[p];if(this.fnMap.has(i)){const v=this.fnMap.get(i);if(v.threshold!==o){v.fn(...v.args),clearTimeout(v.timer);const _=window.setTimeout(()=>{const y=this.fnMap.get(i);y&&y.fn(...y.args),this.fnMap.delete(i)},o);this.fnMap.set(i,{fn:n,threshold:o,timer:_,args:g,skipFn:c})}else v.skipFn&&v.skipFn(...v.args),this.fnMap.set(i,jS(jS({},v),{},{fn:n,args:g,skipFn:c}))}else{const v=window.setTimeout(()=>{const _=this.fnMap.get(i);_&&_.fn(..._.args),this.fnMap.delete(i)},o);this.fnMap.set(i,{fn:n,threshold:o,timer:v,args:g,skipFn:c})}}},PV=k9.throttleByKey.bind(k9),GS=function(){var n=L(function*(i){let{fragementLength:o,referenceList:c,asyncMapHandler:h,allFailedhandler:g,promisesCollector:p}=i,v=0;const _=o;let y,b=0;const C=function(){var w=L(function*(){const P=(()=>{const j=v*_;return c.slice(j,j+_).map(h)})();p&&p.push(...P);try{y=yield QS(P)}catch(j){if(b+=_,v++,!(b>=c.length))return void(yield C());g(j)}P.forEach(j=>j.cancel())});return function(){return w.apply(this,arguments)}}();return yield C(),y});return function(o){return n.apply(this,arguments)}}();function N9(n){return"object"==typeof n&&null!==n&&!(n instanceof RegExp)}var rz=hs,iz=Ns("iterator"),P9=!rz(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),i=n.searchParams,o="";return n.pathname="c%20d",i.forEach(function(c,h){i.delete("b"),o+=h+c}),!n.toJSON||!i.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==i.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!i[iz]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==o||"x"!==new URL("http://x",void 0).host}),cL=Gc,M9=Wc,Fg=hs,Dv=Ys,kv=el,oz=pf,xV=zu,_l=A_,xp=Object.assign,x9=Object.defineProperty,Ug=So([].concat),sz=!xp||Fg(function(){if(cL&&1!==xp({b:1},xp(x9({},"a",{enumerable:!0,get:function(){x9(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},i={},o=Symbol(),c="abcdefghijklmnopqrst";return n[o]=7,c.split("").forEach(function(h){i[h]=h}),7!=xp({},n)[o]||Dv(xp({},i)).join("")!=c})?function(n,i){for(var o=xV(n),c=arguments.length,h=1,g=kv.f,p=oz.f;c>h;)for(var v,_=_l(arguments[h++]),y=g?Ug(Dv(_),g(_)):Dv(_),b=y.length,C=0;b>C;)v=y[C++],cL&&!M9(p,_,v)||(o[v]=_[v]);return o}:xp,L9=ca,az=mh,B9=op,cz=Wc,LV=zu,_1=function(n,i,o,c){try{return c?i(L9(o)[0],o[1]):i(o)}catch(h){az(n,"throw",h)}},BV=jb,uL=Ag,uz=ch,F9=CS,lz=Qb,dz=fh,U9=Xr.Array,WS=So,v1=2147483647,lL=/[^\0-\u007E]/,A1=/[.\u3002\uFF0E\uFF61]/g,FV="Overflow: input needs wider integers to process",Qk=Xr.RangeError,hz=WS(A1.exec),KS=Math.floor,UV=String.fromCharCode,V9=WS("".charCodeAt),j9=WS([].join),Vg=WS([].push),pz=WS("".replace),VV=WS("".split),fz=WS("".toLowerCase),jV=function(n){return n+22+75*(n<26)},Q9=function(n,i,o){var c=0;for(n=o?KS(n/700):n>>1,n+=KS(n/i);n>455;)n=KS(n/35),c+=36;return KS(c+36*n/(n+38))},H9=function(n){var i,o,c=[],h=(n=function(ae){for(var fe=[],be=0,Ce=ae.length;be<Ce;){var it=V9(ae,be++);if(it>=55296&&it<=56319&&be<Ce){var wt=V9(ae,be++);56320==(64512&wt)?Vg(fe,((1023&it)<<10)+(1023&wt)+65536):(Vg(fe,it),be--)}else Vg(fe,it)}return fe}(n)).length,g=128,p=0,v=72;for(i=0;i<n.length;i++)(o=n[i])<128&&Vg(c,UV(o));var _=c.length,y=_;for(_&&Vg(c,"-");y<h;){var b=v1;for(i=0;i<n.length;i++)(o=n[i])>=g&&o<b&&(b=o);var C=y+1;if(b-g>KS((v1-p)/C))throw Qk(FV);for(p+=(b-g)*C,g=b,i=0;i<n.length;i++){if((o=n[i])<g&&++p>v1)throw Qk(FV);if(o==g){for(var w=p,P=36;;){var j=P<=v?1:P>=v+26?26:P-v;if(w<j)break;var G=w-j,Z=36-j;Vg(c,UV(jV(j+G%Z))),w=KS(G/Z),P+=36}Vg(c,UV(jV(w))),v=Q9(p,C,y==_),p=0,y++}}p++,g++}return j9(c,"")},dL=Xr.TypeError,Hk=ns,Gk=Xr,hL=Pl,Wk=Wc,Jl=So,QV=P9,HV=nv,G9=qb,mz=Vl,W9=gg,y1=mg,E1=dv,Kk=zo,K9=ws,gz=op,z9=tu,Y9=ca,b1=Nl,Qd=rl,q9=kf,zk=_d,GV=Qb,J9=fh,zS=function(n,i){if(n<i)throw dL("Not enough arguments");return n},WV=a6,KV=Ns("iterator"),pL="URLSearchParams",X9="URLSearchParamsIterator",$9=y1.set,Zf=y1.getterFor(pL),_z=y1.getterFor(X9),Z9=hL("fetch"),Yk=hL("Request"),S1=hL("Headers"),zV=Yk&&Yk.prototype,YV=S1&&S1.prototype,fL=Gk.RegExp,vz=Gk.TypeError,eQ=Gk.decodeURIComponent,Az=Gk.encodeURIComponent,yz=Jl("".charAt),tQ=Jl([].join),YS=Jl([].push),qV=Jl("".replace),Ez=Jl([].shift),nQ=Jl([].splice),C1=Jl("".split),JV=Jl("".slice),rQ=/\+/g,mL=Array(4),iQ=function(n){return mL[n-1]||(mL[n-1]=fL("((?:%[\\da-f]{2}){"+n+"})","gi"))},bz=function(n){try{return eQ(n)}catch{return n}},XV=function(n){var i=qV(n,rQ," "),o=4;try{return eQ(i)}catch{for(;o;)i=qV(i,iQ(o--),bz);return i}},$V=/[!'()~]|%20/g,gL={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ZV=function(n){return gL[n]},e4=function(n){return qV(Az(n),$V,ZV)},_L=W9(function(n,i){$9(this,{type:X9,iterator:GV(Zf(n).entries),kind:i})},"Iterator",function(){var n=_z(this),i=n.kind,o=n.iterator.next(),c=o.value;return o.done||(o.value="keys"===i?c.key:"values"===i?c.value:[c.key,c.value]),o},!0),I1=function(n){this.entries=[],this.url=null,void 0!==n&&(b1(n)?this.parseObject(n):this.parseQuery("string"==typeof n?"?"===yz(n,0)?JV(n,1):n:Qd(n)))};I1.prototype={type:pL,bindURL:function(n){this.url=n,this.update()},parseObject:function(n){var i,o,c,h,g,p,v,_=J9(n);if(_)for(o=(i=GV(n,_)).next;!(c=Wk(o,i)).done;){if(g=(h=GV(Y9(c.value))).next,(p=Wk(g,h)).done||(v=Wk(g,h)).done||!Wk(g,h).done)throw vz("Expected sequence with length 2");YS(this.entries,{key:Qd(p.value),value:Qd(v.value)})}else for(var y in n)K9(n,y)&&YS(this.entries,{key:y,value:Qd(n[y])})},parseQuery:function(n){if(n)for(var i,o,c=C1(n,"&"),h=0;h<c.length;)(i=c[h++]).length&&(o=C1(i,"="),YS(this.entries,{key:XV(Ez(o)),value:XV(tQ(o,"="))}))},serialize:function(){for(var n,i=this.entries,o=[],c=0;c<i.length;)n=i[c++],YS(o,e4(n.key)+"="+e4(n.value));return tQ(o,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var vL=function(){E1(this,qk),$9(this,new I1(arguments.length>0?arguments[0]:void 0))},qk=vL.prototype;if(G9(qk,{append:function(n,i){zS(arguments.length,2);var o=Zf(this);YS(o.entries,{key:Qd(n),value:Qd(i)}),o.updateURL()},delete:function(n){zS(arguments.length,1);for(var i=Zf(this),o=i.entries,c=Qd(n),h=0;h<o.length;)o[h].key===c?nQ(o,h,1):h++;i.updateURL()},get:function(n){zS(arguments.length,1);for(var i=Zf(this).entries,o=Qd(n),c=0;c<i.length;c++)if(i[c].key===o)return i[c].value;return null},getAll:function(n){zS(arguments.length,1);for(var i=Zf(this).entries,o=Qd(n),c=[],h=0;h<i.length;h++)i[h].key===o&&YS(c,i[h].value);return c},has:function(n){zS(arguments.length,1);for(var i=Zf(this).entries,o=Qd(n),c=0;c<i.length;)if(i[c++].key===o)return!0;return!1},set:function(n,i){zS(arguments.length,1);for(var o,c=Zf(this),h=c.entries,g=!1,p=Qd(n),v=Qd(i),_=0;_<h.length;_++)(o=h[_]).key===p&&(g?nQ(h,_--,1):(g=!0,o.value=v));g||YS(h,{key:p,value:v}),c.updateURL()},sort:function(){var n=Zf(this);WV(n.entries,function(i,o){return i.key>o.key?1:-1}),n.updateURL()},forEach:function(n){for(var i,o=Zf(this).entries,c=gz(n,arguments.length>1?arguments[1]:void 0),h=0;h<o.length;)c((i=o[h++]).value,i.key,this)},keys:function(){return new _L(this,"keys")},values:function(){return new _L(this,"values")},entries:function(){return new _L(this,"entries")}},{enumerable:!0}),HV(qk,KV,qk.entries,{name:"entries"}),HV(qk,"toString",function(){return Zf(this).serialize()},{enumerable:!0}),mz(vL,pL),Hk({global:!0,forced:!QV},{URLSearchParams:vL}),!QV&&Kk(S1)){var oQ=Jl(YV.has),Sz=Jl(YV.set),sQ=function(n){if(b1(n)){var i,o=n.body;if(z9(o)===pL)return i=n.headers?new S1(n.headers):new S1,oQ(i,"content-type")||Sz(i,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),q9(n,{body:zk(0,Qd(o)),headers:zk(0,i)})}return n};if(Kk(Z9)&&Hk({global:!0,enumerable:!0,forced:!0},{fetch:function(n){return Z9(n,arguments.length>1?sQ(arguments[1]):{})}}),Kk(Yk)){var Jk=function(n){return E1(this,zV),new Yk(n,arguments.length>1?sQ(arguments[1]):{})};zV.constructor=Jk,Jk.prototype=zV,Hk({global:!0,forced:!0},{Request:Jk})}}var Lh,t4=ns,AL=Gc,n4=P9,yL=Xr,r4=op,kc=So,i4=Df.f,T1=nv,Cz=dv,o4=ws,Xk=sz,qS=function(n){var i=LV(n),o=uL(this),c=arguments.length,h=c>1?arguments[1]:void 0,g=void 0!==h;g&&(h=B9(h,c>2?arguments[2]:void 0));var p,v,_,y,b,C,w=dz(i),P=0;if(!w||this==U9&&BV(w))for(p=uz(i),v=o?new this(p):U9(p);p>P;P++)C=g?h(i[P],P):i[P],F9(v,P,C);else for(b=(y=lz(i,w)).next,v=o?new this:[];!(_=cz(b,y)).done;P++)C=g?_1(y,h,[_.value,P],!0):_.value,F9(v,P,C);return v.length=P,v},Lp=QU,cQ=kj.codeAt,jg=rl,s4=Vl,$k={URLSearchParams:vL,getState:Zf},uQ=mg.set,Zk=mg.getterFor("URL"),bL=$k.URLSearchParams,Iz=$k.getState,w1=yL.URL,SL=yL.TypeError,e2=yL.parseInt,lQ=Math.floor,t2=Math.pow,Hd=kc("".charAt),Xl=kc(/./.exec),R1=kc([].join),dQ=kc(1..toString),hQ=kc([].pop),JS=kc([].push),a4=kc("".replace),pQ=kc([].shift),fQ=kc("".split),XS=kc("".slice),n2=kc("".toLowerCase),c4=kc([].unshift),CL="Invalid scheme",Ky="Invalid host",IL="Invalid port",mQ=/[a-z]/i,Tz=/[\d+-.a-z]/i,TL=/\d/,gQ=/^0x/i,_Q=/^[0-7]+$/,u4=/^\d+$/,wL=/^[\da-f]+$/i,wz=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Rz=/[\0\t\n\r #/:<>?@[\\\]^|]/,Oz=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Dz=/[\t\n\r]/g,O1=function(n){var i,o,c,h;if("number"==typeof n){for(i=[],o=0;o<4;o++)c4(i,n%256),n=lQ(n/256);return R1(i,".")}if("object"==typeof n){for(i="",c=function(g){for(var p=null,v=1,_=null,y=0,b=0;b<8;b++)0!==g[b]?(y>v&&(p=_,v=y),_=null,y=0):(null===_&&(_=b),++y);return y>v&&(p=_,v=y),p}(n),o=0;o<8;o++)h&&0===n[o]||(h&&(h=!1),c===o?(i+=o?":":"::",h=!0):(i+=dQ(n[o],16),o<7&&(i+=":")));return"["+i+"]"}return n},$S={},l4=Xk({},$S,{" ":1,'"':1,"<":1,">":1,"`":1}),d4=Xk({},l4,{"#":1,"?":1,"{":1,"}":1}),RL=Xk({},d4,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$l=function(n,i){var o=cQ(n,0);return o>32&&o<127&&!o4(i,n)?n:encodeURIComponent(n)},D1={ftp:21,file:null,http:80,https:443,ws:80,wss:443},k1=function(n,i){var o;return 2==n.length&&Xl(mQ,Hd(n,0))&&(":"==(o=Hd(n,1))||!i&&"|"==o)},h4=function(n){var i;return n.length>1&&k1(XS(n,0,2))&&(2==n.length||"/"===(i=Hd(n,2))||"\\"===i||"?"===i||"#"===i)},vQ=function(n){return"."===n||"%2e"===n2(n)},p4={},f4={},OL={},m4={},g4={},DL={},_4={},v4={},r2={},o2={},kL={},NL={},PL={},ML={},A4={},xL={},ZS={},em={},y4={},zy={},Qg={},LL=function(n,i,o){var c,h,g,p=jg(n);if(i){if(h=this.parse(p))throw SL(h);this.searchParams=null}else{if(void 0!==o&&(c=new LL(o,!0)),h=this.parse(p,null,c))throw SL(h);(g=Iz(new bL)).bindURL(this),this.searchParams=g}};LL.prototype={type:"URL",parse:function(n,i,o){var c,h,g,p,v,_=this,y=i||p4,b=0,C="",w=!1,P=!1,j=!1;for(n=jg(n),i||(_.scheme="",_.username="",_.password="",_.host=null,_.port=null,_.path=[],_.query=null,_.fragment=null,_.cannotBeABaseURL=!1,n=a4(n,Oz,"")),n=a4(n,Dz,""),c=qS(n);b<=c.length;){switch(h=c[b],y){case p4:if(!h||!Xl(mQ,h)){if(i)return CL;y=OL;continue}C+=n2(h),y=f4;break;case f4:if(h&&(Xl(Tz,h)||"+"==h||"-"==h||"."==h))C+=n2(h);else{if(":"!=h){if(i)return CL;C="",y=OL,b=0;continue}if(i&&(_.isSpecial()!=o4(D1,C)||"file"==C&&(_.includesCredentials()||null!==_.port)||"file"==_.scheme&&!_.host))return;if(_.scheme=C,i)return void(_.isSpecial()&&D1[_.scheme]==_.port&&(_.port=null));C="","file"==_.scheme?y=ML:_.isSpecial()&&o&&o.scheme==_.scheme?y=m4:_.isSpecial()?y=v4:"/"==c[b+1]?(y=g4,b++):(_.cannotBeABaseURL=!0,JS(_.path,""),y=y4)}break;case OL:if(!o||o.cannotBeABaseURL&&"#"!=h)return CL;if(o.cannotBeABaseURL&&"#"==h){_.scheme=o.scheme,_.path=Lp(o.path),_.query=o.query,_.fragment="",_.cannotBeABaseURL=!0,y=Qg;break}y="file"==o.scheme?ML:DL;continue;case m4:if("/"!=h||"/"!=c[b+1]){y=DL;continue}y=r2,b++;break;case g4:if("/"==h){y=o2;break}y=em;continue;case DL:if(_.scheme=o.scheme,h==Lh)_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Lp(o.path),_.query=o.query;else if("/"==h||"\\"==h&&_.isSpecial())y=_4;else if("?"==h)_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Lp(o.path),_.query="",y=zy;else{if("#"!=h){_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Lp(o.path),_.path.length--,y=em;continue}_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Lp(o.path),_.query=o.query,_.fragment="",y=Qg}break;case _4:if(!_.isSpecial()||"/"!=h&&"\\"!=h){if("/"!=h){_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,y=em;continue}y=o2}else y=r2;break;case v4:if(y=r2,"/"!=h||"/"!=Hd(C,b+1))continue;b++;break;case r2:if("/"!=h&&"\\"!=h){y=o2;continue}break;case o2:if("@"==h){w&&(C="%40"+C),w=!0,g=qS(C);for(var G=0;G<g.length;G++){var Z=g[G];if(":"!=Z||j){var ae=$l(Z,RL);j?_.password+=ae:_.username+=ae}else j=!0}C=""}else if(h==Lh||"/"==h||"?"==h||"#"==h||"\\"==h&&_.isSpecial()){if(w&&""==C)return"Invalid authority";b-=qS(C).length+1,C="",y=kL}else C+=h;break;case kL:case NL:if(i&&"file"==_.scheme){y=xL;continue}if(":"!=h||P){if(h==Lh||"/"==h||"?"==h||"#"==h||"\\"==h&&_.isSpecial()){if(_.isSpecial()&&""==C)return Ky;if(i&&""==C&&(_.includesCredentials()||null!==_.port))return;if(p=_.parseHost(C))return p;if(C="",y=ZS,i)return;continue}"["==h?P=!0:"]"==h&&(P=!1),C+=h}else{if(""==C)return Ky;if(p=_.parseHost(C))return p;if(C="",y=PL,i==NL)return}break;case PL:if(!Xl(TL,h)){if(h==Lh||"/"==h||"?"==h||"#"==h||"\\"==h&&_.isSpecial()||i){if(""!=C){var fe=e2(C,10);if(fe>65535)return IL;_.port=_.isSpecial()&&fe===D1[_.scheme]?null:fe,C=""}if(i)return;y=ZS;continue}return IL}C+=h;break;case ML:if(_.scheme="file","/"==h||"\\"==h)y=A4;else{if(!o||"file"!=o.scheme){y=em;continue}if(h==Lh)_.host=o.host,_.path=Lp(o.path),_.query=o.query;else if("?"==h)_.host=o.host,_.path=Lp(o.path),_.query="",y=zy;else{if("#"!=h){h4(R1(Lp(c,b),""))||(_.host=o.host,_.path=Lp(o.path),_.shortenPath()),y=em;continue}_.host=o.host,_.path=Lp(o.path),_.query=o.query,_.fragment="",y=Qg}}break;case A4:if("/"==h||"\\"==h){y=xL;break}o&&"file"==o.scheme&&!h4(R1(Lp(c,b),""))&&(k1(o.path[0],!0)?JS(_.path,o.path[0]):_.host=o.host),y=em;continue;case xL:if(h==Lh||"/"==h||"\\"==h||"?"==h||"#"==h){if(!i&&k1(C))y=em;else if(""==C){if(_.host="",i)return;y=ZS}else{if(p=_.parseHost(C))return p;if("localhost"==_.host&&(_.host=""),i)return;C="",y=ZS}continue}C+=h;break;case ZS:if(_.isSpecial()){if(y=em,"/"!=h&&"\\"!=h)continue}else if(i||"?"!=h)if(i||"#"!=h){if(h!=Lh&&(y=em,"/"!=h))continue}else _.fragment="",y=Qg;else _.query="",y=zy;break;case em:if(h==Lh||"/"==h||"\\"==h&&_.isSpecial()||!i&&("?"==h||"#"==h)){if(".."===(v=n2(v=C))||"%2e."===v||".%2e"===v||"%2e%2e"===v?(_.shortenPath(),"/"==h||"\\"==h&&_.isSpecial()||JS(_.path,"")):vQ(C)?"/"==h||"\\"==h&&_.isSpecial()||JS(_.path,""):("file"==_.scheme&&!_.path.length&&k1(C)&&(_.host&&(_.host=""),C=Hd(C,0)+":"),JS(_.path,C)),C="","file"==_.scheme&&(h==Lh||"?"==h||"#"==h))for(;_.path.length>1&&""===_.path[0];)pQ(_.path);"?"==h?(_.query="",y=zy):"#"==h&&(_.fragment="",y=Qg)}else C+=$l(h,d4);break;case y4:"?"==h?(_.query="",y=zy):"#"==h?(_.fragment="",y=Qg):h!=Lh&&(_.path[0]+=$l(h,$S));break;case zy:i||"#"!=h?h!=Lh&&("'"==h&&_.isSpecial()?_.query+="%27":_.query+="#"==h?"%23":$l(h,$S)):(_.fragment="",y=Qg);break;case Qg:h!=Lh&&(_.fragment+=$l(h,l4))}b++}},parseHost:function(n){var i,o,c;if("["==Hd(n,0)){if("]"!=Hd(n,n.length-1)||!(i=function(h){var g,p,v,_,y,b,C,w=[0,0,0,0,0,0,0,0],P=0,j=null,G=0,Z=function(){return Hd(h,G)};if(":"==Z()){if(":"!=Hd(h,1))return;G+=2,j=++P}for(;Z();){if(8==P)return;if(":"!=Z()){for(g=p=0;p<4&&Xl(wL,Z());)g=16*g+e2(Z(),16),G++,p++;if("."==Z()){if(0==p||(G-=p,P>6))return;for(v=0;Z();){if(_=null,v>0){if(!("."==Z()&&v<4))return;G++}if(!Xl(TL,Z()))return;for(;Xl(TL,Z());){if(y=e2(Z(),10),null===_)_=y;else{if(0==_)return;_=10*_+y}if(_>255)return;G++}w[P]=256*w[P]+_,2!=++v&&4!=v||P++}if(4!=v)return;break}if(":"==Z()){if(G++,!Z())return}else if(Z())return;w[P++]=g}else{if(null!==j)return;G++,j=++P}}if(null!==j)for(b=P-j,P=7;0!=P&&b>0;)C=w[P],w[P--]=w[j+b-1],w[j+--b]=C;else if(8!=P)return;return w}(XS(n,1,-1))))return Ky;this.host=i}else if(this.isSpecial()){if(n=function(n){var i,o,c=[],h=VV(pz(fz(n),A1,"."),".");for(i=0;i<h.length;i++)Vg(c,hz(lL,o=h[i])?"xn--"+H9(o):o);return j9(c,".")}(n),Xl(wz,n)||null===(i=function(h){var g,p,v,_,y,b,C,w=fQ(h,".");if(w.length&&""==w[w.length-1]&&w.length--,(g=w.length)>4)return h;for(p=[],v=0;v<g;v++){if(""==(_=w[v]))return h;if(y=10,_.length>1&&"0"==Hd(_,0)&&(y=Xl(gQ,_)?16:8,_=XS(_,8==y?1:2)),""===_)b=0;else{if(!Xl(10==y?u4:8==y?_Q:wL,_))return h;b=e2(_,y)}JS(p,b)}for(v=0;v<g;v++)if(b=p[v],v==g-1){if(b>=t2(256,5-g))return null}else if(b>255)return null;for(C=hQ(p),v=0;v<p.length;v++)C+=p[v]*t2(256,3-v);return C}(n)))return Ky;this.host=i}else{if(Xl(Rz,n))return Ky;for(i="",o=qS(n),c=0;c<o.length;c++)i+=$l(o[c],$S);this.host=i}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return o4(D1,this.scheme)},shortenPath:function(){var n=this.path,i=n.length;!i||"file"==this.scheme&&1==i&&k1(n[0],!0)||n.length--},serialize:function(){var n=this,i=n.scheme,o=n.username,c=n.password,h=n.host,g=n.port,p=n.path,v=n.query,_=n.fragment,y=i+":";return null!==h?(y+="//",n.includesCredentials()&&(y+=o+(c?":"+c:"")+"@"),y+=O1(h),null!==g&&(y+=":"+g)):"file"==i&&(y+="//"),y+=n.cannotBeABaseURL?p[0]:p.length?"/"+R1(p,"/"):"",null!==v&&(y+="?"+v),null!==_&&(y+="#"+_),y},setHref:function(n){var i=this.parse(n);if(i)throw SL(i);this.searchParams.update()},getOrigin:function(){var n=this.scheme,i=this.port;if("blob"==n)try{return new e0(n.path[0]).origin}catch{return"null"}return"file"!=n&&this.isSpecial()?n+"://"+O1(this.host)+(null!==i?":"+i:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(n){this.parse(jg(n)+":",p4)},getUsername:function(){return this.username},setUsername:function(n){var i=qS(jg(n));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var o=0;o<i.length;o++)this.username+=$l(i[o],RL)}},getPassword:function(){return this.password},setPassword:function(n){var i=qS(jg(n));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var o=0;o<i.length;o++)this.password+=$l(i[o],RL)}},getHost:function(){var n=this.host,i=this.port;return null===n?"":null===i?O1(n):O1(n)+":"+i},setHost:function(n){this.cannotBeABaseURL||this.parse(n,kL)},getHostname:function(){var n=this.host;return null===n?"":O1(n)},setHostname:function(n){this.cannotBeABaseURL||this.parse(n,NL)},getPort:function(){var n=this.port;return null===n?"":jg(n)},setPort:function(n){this.cannotHaveUsernamePasswordPort()||(""==(n=jg(n))?this.port=null:this.parse(n,PL))},getPathname:function(){var n=this.path;return this.cannotBeABaseURL?n[0]:n.length?"/"+R1(n,"/"):""},setPathname:function(n){this.cannotBeABaseURL||(this.path=[],this.parse(n,ZS))},getSearch:function(){var n=this.query;return n?"?"+n:""},setSearch:function(n){""==(n=jg(n))?this.query=null:("?"==Hd(n,0)&&(n=XS(n,1)),this.query="",this.parse(n,zy)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var n=this.fragment;return n?"#"+n:""},setHash:function(n){""!=(n=jg(n))?("#"==Hd(n,0)&&(n=XS(n,1)),this.fragment="",this.parse(n,Qg)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var e0=function(n){var i=Cz(this,s2),c=uQ(i,new LL(n,!1,arguments.length>1?arguments[1]:void 0));AL||(i.href=c.serialize(),i.origin=c.getOrigin(),i.protocol=c.getProtocol(),i.username=c.getUsername(),i.password=c.getPassword(),i.host=c.getHost(),i.hostname=c.getHostname(),i.port=c.getPort(),i.pathname=c.getPathname(),i.search=c.getSearch(),i.searchParams=c.getSearchParams(),i.hash=c.getHash())},s2=e0.prototype,Bh=function(n,i){return{get:function(){return Zk(this)[n]()},set:i&&function(o){return Zk(this)[i](o)},configurable:!0,enumerable:!0}};if(AL&&i4(s2,{href:Bh("serialize","setHref"),origin:Bh("getOrigin"),protocol:Bh("getProtocol","setProtocol"),username:Bh("getUsername","setUsername"),password:Bh("getPassword","setPassword"),host:Bh("getHost","setHost"),hostname:Bh("getHostname","setHostname"),port:Bh("getPort","setPort"),pathname:Bh("getPathname","setPathname"),search:Bh("getSearch","setSearch"),searchParams:Bh("getSearchParams"),hash:Bh("getHash","setHash")}),T1(s2,"toJSON",function(){return Zk(this).serialize()},{enumerable:!0}),T1(s2,"toString",function(){return Zk(this).serialize()},{enumerable:!0}),w1){var a2=w1.createObjectURL,AQ=w1.revokeObjectURL;a2&&T1(e0,"createObjectURL",r4(a2,w1)),AQ&&T1(e0,"revokeObjectURL",r4(AQ,w1))}s4(e0,"URL"),t4({global:!0,forced:!n4,sham:!AL},{URL:e0});var E4=ff.URL;const kz={[Oy.ACCESS_POINT]:{[xs.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[xs.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[xs.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[xs.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[xs.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[xs.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[Oy.UNILBS]:{[Du.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Du.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Du.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Du.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Du.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Du.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Du.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Du.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Du.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Du.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Du.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Du.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[Oy.STRING_UID_ALLOCATOR]:{[wS.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[wS.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[wS.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function N1(n){const i=kz[Math.floor(n/1e4)];if(!i)return{desc:"unkonw error",retry:!1};const o=i[n%1e4];if(!o){if(Math.floor(n/1e4)===Oy.ACCESS_POINT){const c=n%1e4;if("1"===c.toString()[0])return{desc:n.toString(),retry:!1};if("2"===c.toString()[0])return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return o}const b4={[Er.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Er.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Er.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Er.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Er.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Er.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Er.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Er.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Er.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Er.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Er.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Er.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Er.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Er.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Er.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Er.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Er.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Er.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Er.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Er.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Er.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Er.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Er.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Er.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Er.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Er.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Er.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Er.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Er.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Er.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Er.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Er.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Er.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Er.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Er.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Er.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Er.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Er.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Er.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Er.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Er.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Er.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Er.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Er.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Er.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Er.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Er.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Er.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Er.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Er.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Er.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Er.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Er.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Er.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Er.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Er.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Er.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Er.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}};function BL(n){return b4[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}var yQ={exports:{}};(function(n,i){n.exports=function(){var o={d:function(pt,ye){for(var nt in ye)o.o(ye,nt)&&!o.o(pt,nt)&&Object.defineProperty(pt,nt,{enumerable:!0,get:ye[nt]})},o:function(pt,ye){return Object.prototype.hasOwnProperty.call(pt,ye)},r:function(pt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(pt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(pt,"__esModule",{value:!0})}},c={};o.r(c),o.d(c,{DataViewIndexOutOfBoundsError:function(){return Nt},DecodeError:function(){return Ce},Decoder:function(){return Cr},EXT_TIMESTAMP:function(){return it},Encoder:function(){return _t},ExtData:function(){return fe},ExtensionCodec:function(){return yt},decode:function(){return Qi},decodeArrayStream:function(){return Qp},decodeAsync:function(){return zd},decodeMulti:function(){return Nc},decodeMultiStream:function(){return bs},decodeStream:function(){return EG},decodeTimestampExtension:function(){return pn},decodeTimestampToTimeSpec:function(){return En},encode:function(){return Je},encodeDateToTimeSpec:function(){return bt},encodeTimeSpecToTimestamp:function(){return wt},encodeTimestampExtension:function(){return Pt}});var h=4294967295;function g(pt,ye,nt){var Ot=Math.floor(nt/4294967296),ft=nt;pt.setUint32(ye,Ot),pt.setUint32(ye+4,ft)}function p(pt,ye){return 4294967296*pt.getInt32(ye)+pt.getUint32(ye+4)}var v=function(pt,ye){var nt="function"==typeof Symbol&&pt[Symbol.iterator];if(!nt)return pt;var Ot,ft,fn=nt.call(pt),rn=[];try{for(;(void 0===ye||ye-- >0)&&!(Ot=fn.next()).done;)rn.push(Ot.value)}catch(Wn){ft={error:Wn}}finally{try{Ot&&!Ot.done&&(nt=fn.return)&&nt.call(fn)}finally{if(ft)throw ft.error}}return rn},_=function(pt,ye){for(var nt=0,Ot=ye.length,ft=pt.length;nt<Ot;nt++,ft++)pt[ft]=ye[nt];return pt},y=typeof TextEncoder<"u"&&typeof TextDecoder<"u";function b(pt){for(var ye=pt.length,nt=0,Ot=0;Ot<ye;){var ft=pt.charCodeAt(Ot++);if(0!=(4294967168&ft))if(0==(4294965248&ft))nt+=2;else{if(ft>=55296&&ft<=56319&&Ot<ye){var fn=pt.charCodeAt(Ot);56320==(64512&fn)&&(++Ot,ft=((1023&ft)<<10)+(1023&fn)+65536)}nt+=0==(4294901760&ft)?3:4}else nt++}return nt}var C=y?new TextEncoder:void 0,w=y?typeof process<"u"?200:0:h,P=C?.encodeInto?function(pt,ye,nt){C.encodeInto(pt,ye.subarray(nt))}:function(pt,ye,nt){ye.set(C.encode(pt),nt)};function j(pt,ye,nt){for(var Ot=ye,ft=Ot+nt,fn=[],rn="";Ot<ft;){var Wn=pt[Ot++];if(0==(128&Wn))fn.push(Wn);else if(192==(224&Wn)){var kr=63&pt[Ot++];fn.push((31&Wn)<<6|kr)}else if(224==(240&Wn)){kr=63&pt[Ot++];var Gr=63&pt[Ot++];fn.push((31&Wn)<<12|kr<<6|Gr)}else if(240==(248&Wn)){var wn=(7&Wn)<<18|(kr=63&pt[Ot++])<<12|(Gr=63&pt[Ot++])<<6|63&pt[Ot++];wn>65535&&(fn.push((wn-=65536)>>>10&1023|55296),wn=56320|1023&wn),fn.push(wn)}else fn.push(Wn);fn.length>=4096&&(rn+=String.fromCharCode.apply(String,_([],v(fn))),fn.length=0)}return fn.length>0&&(rn+=String.fromCharCode.apply(String,_([],v(fn)))),rn}var G,Z=y?new TextDecoder:null,ae=y?typeof process<"u"?200:0:h,fe=function(pt,ye){this.type=pt,this.data=ye},be=(G=function(pt,ye){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,Ot){nt.__proto__=Ot}||function(nt,Ot){for(var ft in Ot)Object.prototype.hasOwnProperty.call(Ot,ft)&&(nt[ft]=Ot[ft])})(pt,ye)},function(pt,ye){if("function"!=typeof ye&&null!==ye)throw new TypeError("Class extends value "+String(ye)+" is not a constructor or null");function nt(){this.constructor=pt}G(pt,ye),pt.prototype=null===ye?Object.create(ye):(nt.prototype=ye.prototype,new nt)}),Ce=function(pt){function ye(nt){var Ot=pt.call(this,nt)||this,ft=Object.create(ye.prototype);return Object.setPrototypeOf(Ot,ft),Object.defineProperty(Ot,"name",{configurable:!0,enumerable:!1,value:ye.name}),Ot}return be(ye,pt),ye}(Error),it=-1;function wt(pt){var ye,nt=pt.sec,Ot=pt.nsec;if(nt>=0&&Ot>=0&&nt<=17179869183){if(0===Ot&&nt<=4294967295){var ft=new Uint8Array(4);return(ye=new DataView(ft.buffer)).setUint32(0,nt),ft}var fn=nt/4294967296,rn=4294967295&nt;return ft=new Uint8Array(8),(ye=new DataView(ft.buffer)).setUint32(0,Ot<<2|3&fn),ye.setUint32(4,rn),ft}return ft=new Uint8Array(12),(ye=new DataView(ft.buffer)).setUint32(0,Ot),g(ye,4,nt),ft}function bt(pt){var ye=pt.getTime(),nt=Math.floor(ye/1e3),Ot=1e6*(ye-1e3*nt),ft=Math.floor(Ot/1e9);return{sec:nt+ft,nsec:Ot-1e9*ft}}function Pt(pt){return pt instanceof Date?wt(bt(pt)):null}function En(pt){var ye=new DataView(pt.buffer,pt.byteOffset,pt.byteLength);switch(pt.byteLength){case 4:return{sec:ye.getUint32(0),nsec:0};case 8:var nt=ye.getUint32(0);return{sec:4294967296*(3&nt)+ye.getUint32(4),nsec:nt>>>2};case 12:return{sec:p(ye,4),nsec:ye.getUint32(0)};default:throw new Ce("Unrecognized data size for timestamp (expected 4, 8, or 12): "+pt.length)}}function pn(pt){var ye=En(pt);return new Date(1e3*ye.sec+ye.nsec/1e6)}var un={type:it,encode:Pt,decode:pn},yt=function(){function pt(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(un)}return pt.prototype.register=function(ye){var nt=ye.type,Ot=ye.encode,ft=ye.decode;if(nt>=0)this.encoders[nt]=Ot,this.decoders[nt]=ft;else{var fn=1+nt;this.builtInEncoders[fn]=Ot,this.builtInDecoders[fn]=ft}},pt.prototype.tryToEncode=function(ye,nt){for(var Ot=0;Ot<this.builtInEncoders.length;Ot++)if(null!=(ft=this.builtInEncoders[Ot])&&null!=(fn=ft(ye,nt)))return new fe(-1-Ot,fn);for(Ot=0;Ot<this.encoders.length;Ot++){var ft,fn;if(null!=(ft=this.encoders[Ot])&&null!=(fn=ft(ye,nt)))return new fe(Ot,fn)}return ye instanceof fe?ye:null},pt.prototype.decode=function(ye,nt,Ot){var ft=nt<0?this.builtInDecoders[-1-nt]:this.decoders[nt];return ft?ft(ye,nt,Ot):new fe(nt,ye)},pt.defaultCodec=new pt,pt}();function Ge(pt){return pt instanceof Uint8Array?pt:ArrayBuffer.isView(pt)?new Uint8Array(pt.buffer,pt.byteOffset,pt.byteLength):pt instanceof ArrayBuffer?new Uint8Array(pt):Uint8Array.from(pt)}var ot=function(pt){var ye="function"==typeof Symbol&&Symbol.iterator,nt=ye&&pt[ye],Ot=0;if(nt)return nt.call(pt);if(pt&&"number"==typeof pt.length)return{next:function(){return pt&&Ot>=pt.length&&(pt=void 0),{value:pt&&pt[Ot++],done:!pt}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")},_t=function(){function pt(ye,nt,Ot,ft,fn,rn,Wn,kr){void 0===ye&&(ye=yt.defaultCodec),void 0===nt&&(nt=void 0),void 0===Ot&&(Ot=100),void 0===ft&&(ft=2048),void 0===fn&&(fn=!1),void 0===rn&&(rn=!1),void 0===Wn&&(Wn=!1),void 0===kr&&(kr=!1),this.extensionCodec=ye,this.context=nt,this.maxDepth=Ot,this.initialBufferSize=ft,this.sortKeys=fn,this.forceFloat32=rn,this.ignoreUndefined=Wn,this.forceIntegerToFloat=kr,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return pt.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},pt.prototype.reinitializeState=function(){this.pos=0},pt.prototype.encode=function(ye){return this.reinitializeState(),this.doEncode(ye,1),this.getUint8Array()},pt.prototype.doEncode=function(ye,nt){if(nt>this.maxDepth)throw new Error("Too deep objects in depth "+nt);null==ye?this.encodeNil():"boolean"==typeof ye?this.encodeBoolean(ye):"number"==typeof ye?this.encodeNumber(ye):"string"==typeof ye?this.encodeString(ye):this.encodeObject(ye,nt)},pt.prototype.ensureBufferSizeToWrite=function(ye){var nt=this.pos+ye;this.view.byteLength<nt&&this.resizeBuffer(2*nt)},pt.prototype.resizeBuffer=function(ye){var nt=new ArrayBuffer(ye),Ot=new Uint8Array(nt),ft=new DataView(nt);Ot.set(this.bytes),this.view=ft,this.bytes=Ot},pt.prototype.encodeNil=function(){this.writeU8(192)},pt.prototype.encodeBoolean=function(ye){this.writeU8(!1===ye?194:195)},pt.prototype.encodeNumber=function(ye){Number.isSafeInteger(ye)&&!this.forceIntegerToFloat?ye>=0?ye<128?this.writeU8(ye):ye<256?(this.writeU8(204),this.writeU8(ye)):ye<65536?(this.writeU8(205),this.writeU16(ye)):ye<4294967296?(this.writeU8(206),this.writeU32(ye)):(this.writeU8(207),this.writeU64(ye)):ye>=-32?this.writeU8(224|ye+32):ye>=-128?(this.writeU8(208),this.writeI8(ye)):ye>=-32768?(this.writeU8(209),this.writeI16(ye)):ye>=-2147483648?(this.writeU8(210),this.writeI32(ye)):(this.writeU8(211),this.writeI64(ye)):this.forceFloat32?(this.writeU8(202),this.writeF32(ye)):(this.writeU8(203),this.writeF64(ye))},pt.prototype.writeStringHeader=function(ye){if(ye<32)this.writeU8(160+ye);else if(ye<256)this.writeU8(217),this.writeU8(ye);else if(ye<65536)this.writeU8(218),this.writeU16(ye);else{if(!(ye<4294967296))throw new Error("Too long string: "+ye+" bytes in UTF-8");this.writeU8(219),this.writeU32(ye)}},pt.prototype.encodeString=function(ye){if(ye.length>w){var nt=b(ye);this.ensureBufferSizeToWrite(5+nt),this.writeStringHeader(nt),P(ye,this.bytes,this.pos),this.pos+=nt}else nt=b(ye),this.ensureBufferSizeToWrite(5+nt),this.writeStringHeader(nt),function(Ot,ft,fn){for(var rn=Ot.length,Wn=fn,kr=0;kr<rn;){var Gr=Ot.charCodeAt(kr++);if(0!=(4294967168&Gr)){if(0==(4294965248&Gr))ft[Wn++]=Gr>>6&31|192;else{if(Gr>=55296&&Gr<=56319&&kr<rn){var wn=Ot.charCodeAt(kr);56320==(64512&wn)&&(++kr,Gr=((1023&Gr)<<10)+(1023&wn)+65536)}0==(4294901760&Gr)?(ft[Wn++]=Gr>>12&15|224,ft[Wn++]=Gr>>6&63|128):(ft[Wn++]=Gr>>18&7|240,ft[Wn++]=Gr>>12&63|128,ft[Wn++]=Gr>>6&63|128)}ft[Wn++]=63&Gr|128}else ft[Wn++]=Gr}}(ye,this.bytes,this.pos),this.pos+=nt},pt.prototype.encodeObject=function(ye,nt){var Ot=this.extensionCodec.tryToEncode(ye,this.context);if(null!=Ot)this.encodeExtension(Ot);else if(Array.isArray(ye))this.encodeArray(ye,nt);else if(ArrayBuffer.isView(ye))this.encodeBinary(ye);else{if("object"!=typeof ye)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(ye));this.encodeMap(ye,nt)}},pt.prototype.encodeBinary=function(ye){var nt=ye.byteLength;if(nt<256)this.writeU8(196),this.writeU8(nt);else if(nt<65536)this.writeU8(197),this.writeU16(nt);else{if(!(nt<4294967296))throw new Error("Too large binary: "+nt);this.writeU8(198),this.writeU32(nt)}var Ot=Ge(ye);this.writeU8a(Ot)},pt.prototype.encodeArray=function(ye,nt){var Ot,ft,fn=ye.length;if(fn<16)this.writeU8(144+fn);else if(fn<65536)this.writeU8(220),this.writeU16(fn);else{if(!(fn<4294967296))throw new Error("Too large array: "+fn);this.writeU8(221),this.writeU32(fn)}try{for(var rn=ot(ye),Wn=rn.next();!Wn.done;Wn=rn.next())this.doEncode(Wn.value,nt+1)}catch(Gr){Ot={error:Gr}}finally{try{Wn&&!Wn.done&&(ft=rn.return)&&ft.call(rn)}finally{if(Ot)throw Ot.error}}},pt.prototype.countWithoutUndefined=function(ye,nt){var Ot,ft,fn=0;try{for(var rn=ot(nt),Wn=rn.next();!Wn.done;Wn=rn.next())void 0!==ye[Wn.value]&&fn++}catch(kr){Ot={error:kr}}finally{try{Wn&&!Wn.done&&(ft=rn.return)&&ft.call(rn)}finally{if(Ot)throw Ot.error}}return fn},pt.prototype.encodeMap=function(ye,nt){var Ot,ft,fn=Object.keys(ye);this.sortKeys&&fn.sort();var rn=this.ignoreUndefined?this.countWithoutUndefined(ye,fn):fn.length;if(rn<16)this.writeU8(128+rn);else if(rn<65536)this.writeU8(222),this.writeU16(rn);else{if(!(rn<4294967296))throw new Error("Too large map object: "+rn);this.writeU8(223),this.writeU32(rn)}try{for(var Wn=ot(fn),kr=Wn.next();!kr.done;kr=Wn.next()){var Gr=kr.value,wn=ye[Gr];this.ignoreUndefined&&void 0===wn||(this.encodeString(Gr),this.doEncode(wn,nt+1))}}catch(Xn){Ot={error:Xn}}finally{try{kr&&!kr.done&&(ft=Wn.return)&&ft.call(Wn)}finally{if(Ot)throw Ot.error}}},pt.prototype.encodeExtension=function(ye){var nt=ye.data.length;if(1===nt)this.writeU8(212);else if(2===nt)this.writeU8(213);else if(4===nt)this.writeU8(214);else if(8===nt)this.writeU8(215);else if(16===nt)this.writeU8(216);else if(nt<256)this.writeU8(199),this.writeU8(nt);else if(nt<65536)this.writeU8(200),this.writeU16(nt);else{if(!(nt<4294967296))throw new Error("Too large extension object: "+nt);this.writeU8(201),this.writeU32(nt)}this.writeI8(ye.type),this.writeU8a(ye.data)},pt.prototype.writeU8=function(ye){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,ye),this.pos++},pt.prototype.writeU8a=function(ye){var nt=ye.length;this.ensureBufferSizeToWrite(nt),this.bytes.set(ye,this.pos),this.pos+=nt},pt.prototype.writeI8=function(ye){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,ye),this.pos++},pt.prototype.writeU16=function(ye){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,ye),this.pos+=2},pt.prototype.writeI16=function(ye){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,ye),this.pos+=2},pt.prototype.writeU32=function(ye){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,ye),this.pos+=4},pt.prototype.writeI32=function(ye){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,ye),this.pos+=4},pt.prototype.writeF32=function(ye){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,ye),this.pos+=4},pt.prototype.writeF64=function(ye){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,ye),this.pos+=8},pt.prototype.writeU64=function(ye){var nt,Ot,ft,rn;this.ensureBufferSizeToWrite(8),rn=ft=ye,(nt=this.view).setUint32(Ot=this.pos,ft/4294967296),nt.setUint32(Ot+4,rn),this.pos+=8},pt.prototype.writeI64=function(ye){this.ensureBufferSizeToWrite(8),g(this.view,this.pos,ye),this.pos+=8},pt}(),bn={};function Je(pt,ye){return void 0===ye&&(ye=bn),new _t(ye.extensionCodec,ye.context,ye.maxDepth,ye.initialBufferSize,ye.sortKeys,ye.forceFloat32,ye.ignoreUndefined,ye.forceIntegerToFloat).encode(pt)}function at(pt){return(pt<0?"-":"")+"0x"+Math.abs(pt).toString(16).padStart(2,"0")}var Rt=function(){function pt(ye,nt){void 0===ye&&(ye=16),void 0===nt&&(nt=16),this.maxKeyLength=ye,this.maxLengthPerKey=nt,this.hit=0,this.miss=0,this.caches=[];for(var Ot=0;Ot<this.maxKeyLength;Ot++)this.caches.push([])}return pt.prototype.canBeCached=function(ye){return ye>0&&ye<=this.maxKeyLength},pt.prototype.find=function(ye,nt,Ot){var ft,fn,rn=this.caches[Ot-1];try{e:for(var Wn=function(Ir){var Ti="function"==typeof Symbol&&Symbol.iterator,us=Ti&&Ir[Ti],du=0;if(us)return us.call(Ir);if(Ir&&"number"==typeof Ir.length)return{next:function(){return Ir&&du>=Ir.length&&(Ir=void 0),{value:Ir&&Ir[du++],done:!Ir}}};throw new TypeError(Ti?"Object is not iterable.":"Symbol.iterator is not defined.")}(rn),kr=Wn.next();!kr.done;kr=Wn.next()){for(var Gr=kr.value,wn=Gr.bytes,Xn=0;Xn<Ot;Xn++)if(wn[Xn]!==ye[nt+Xn])continue e;return Gr.str}}catch(Ir){ft={error:Ir}}finally{try{kr&&!kr.done&&(fn=Wn.return)&&fn.call(Wn)}finally{if(ft)throw ft.error}}return null},pt.prototype.store=function(ye,nt){var Ot=this.caches[ye.length-1],ft={bytes:ye,str:nt};Ot.length>=this.maxLengthPerKey?Ot[Math.random()*Ot.length|0]=ft:Ot.push(ft)},pt.prototype.decode=function(ye,nt,Ot){var ft=this.find(ye,nt,Ot);if(null!=ft)return this.hit++,ft;this.miss++;var fn=j(ye,nt,Ot),rn=Uint8Array.prototype.slice.call(ye,nt,nt+Ot);return this.store(rn,fn),fn},pt}(),cn=function(pt,ye){var nt,Ot,ft,fn,rn={label:0,sent:function(){if(1&ft[0])throw ft[1];return ft[1]},trys:[],ops:[]};return fn={next:Wn(0),throw:Wn(1),return:Wn(2)},"function"==typeof Symbol&&(fn[Symbol.iterator]=function(){return this}),fn;function Wn(kr){return function(Gr){return function(wn){if(nt)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nt=1,Ot&&(ft=2&wn[0]?Ot.return:wn[0]?Ot.throw||((ft=Ot.return)&&ft.call(Ot),0):Ot.next)&&!(ft=ft.call(Ot,wn[1])).done)return ft;switch(Ot=0,ft&&(wn=[2&wn[0],ft.value]),wn[0]){case 0:case 1:ft=wn;break;case 4:return rn.label++,{value:wn[1],done:!1};case 5:rn.label++,Ot=wn[1],wn=[0];continue;case 7:wn=rn.ops.pop(),rn.trys.pop();continue;default:if(!((ft=(ft=rn.trys).length>0&&ft[ft.length-1])||6!==wn[0]&&2!==wn[0])){rn=0;continue}if(3===wn[0]&&(!ft||wn[1]>ft[0]&&wn[1]<ft[3])){rn.label=wn[1];break}if(6===wn[0]&&rn.label<ft[1]){rn.label=ft[1],ft=wn;break}if(ft&&rn.label<ft[2]){rn.label=ft[2],rn.ops.push(wn);break}ft[2]&&rn.ops.pop(),rn.trys.pop();continue}wn=ye.call(pt,rn)}catch(Xn){wn=[6,Xn],Ot=0}finally{nt=ft=0}if(5&wn[0])throw wn[1];return{value:wn[0]?wn[1]:void 0,done:!0}}([kr,Gr])}}},Rn=function(pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,nt=pt[Symbol.asyncIterator];return nt?nt.call(pt):(pt="function"==typeof __values?__values(pt):pt[Symbol.iterator](),ye={},Ot("next"),Ot("throw"),Ot("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function Ot(ft){ye[ft]=pt[ft]&&function(fn){return new Promise(function(rn,Wn){var kr,Gr,wn;kr=rn,Gr=Wn,wn=(fn=pt[ft](fn)).done,Promise.resolve(fn.value).then(function(Ir){kr({value:Ir,done:wn})},Gr)})}}},Vt=function(pt){return this instanceof Vt?(this.v=pt,this):new Vt(pt)},V=function(pt,ye,nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ot,ft=nt.apply(pt,ye||[]),fn=[];return Ot={},rn("next"),rn("throw"),rn("return"),Ot[Symbol.asyncIterator]=function(){return this},Ot;function rn(Xn){ft[Xn]&&(Ot[Xn]=function(Ir){return new Promise(function(Ti,us){fn.push([Xn,Ir,Ti,us])>1||Wn(Xn,Ir)})})}function Wn(Xn,Ir){try{(Ti=ft[Xn](Ir)).value instanceof Vt?Promise.resolve(Ti.value.v).then(kr,Gr):wn(fn[0][2],Ti)}catch(us){wn(fn[0][3],us)}var Ti}function kr(Xn){Wn("next",Xn)}function Gr(Xn){Wn("throw",Xn)}function wn(Xn,Ir){Xn(Ir),fn.shift(),fn.length&&Wn(fn[0][0],fn[0][1])}},_e=new DataView(new ArrayBuffer(0)),ke=new Uint8Array(_e.buffer),Nt=function(){try{_e.getInt8(0)}catch(pt){return pt.constructor}throw new Error("never reached")}(),In=new Nt("Insufficient data"),Tr=new Rt,Cr=function(){function pt(ye,nt,Ot,ft,fn,rn,Wn,kr){void 0===ye&&(ye=yt.defaultCodec),void 0===nt&&(nt=void 0),void 0===Ot&&(Ot=h),void 0===ft&&(ft=h),void 0===fn&&(fn=h),void 0===rn&&(rn=h),void 0===Wn&&(Wn=h),void 0===kr&&(kr=Tr),this.extensionCodec=ye,this.context=nt,this.maxStrLength=Ot,this.maxBinLength=ft,this.maxArrayLength=fn,this.maxMapLength=rn,this.maxExtLength=Wn,this.keyDecoder=kr,this.totalPos=0,this.pos=0,this.view=_e,this.bytes=ke,this.headByte=-1,this.stack=[]}return pt.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},pt.prototype.setBuffer=function(ye){this.bytes=Ge(ye),this.view=function(nt){if(nt instanceof ArrayBuffer)return new DataView(nt);var Ot=Ge(nt);return new DataView(Ot.buffer,Ot.byteOffset,Ot.byteLength)}(this.bytes),this.pos=0},pt.prototype.appendBuffer=function(ye){if(-1!==this.headByte||this.hasRemaining(1)){var nt=this.bytes.subarray(this.pos),Ot=Ge(ye),ft=new Uint8Array(nt.length+Ot.length);ft.set(nt),ft.set(Ot,nt.length),this.setBuffer(ft)}else this.setBuffer(ye)},pt.prototype.hasRemaining=function(ye){return this.view.byteLength-this.pos>=ye},pt.prototype.createExtraByteError=function(ye){var nt=this.view;return new RangeError("Extra "+(nt.byteLength-this.pos)+" of "+nt.byteLength+" byte(s) found at buffer["+ye+"]")},pt.prototype.decode=function(ye){this.reinitializeState(),this.setBuffer(ye);var nt=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return nt},pt.prototype.decodeMulti=function(ye){return cn(this,function(nt){switch(nt.label){case 0:this.reinitializeState(),this.setBuffer(ye),nt.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return nt.sent(),[3,1];case 3:return[2]}})},pt.prototype.decodeAsync=function(ye){var nt,Ot,ft,fn,rn,kr,Gr;return rn=this,void 0,Gr=function(){var wn,Xn,Ir,Ti,us,du,On,Jn;return cn(this,function(Vr){switch(Vr.label){case 0:wn=!1,Vr.label=1;case 1:Vr.trys.push([1,6,7,12]),nt=Rn(ye),Vr.label=2;case 2:return[4,nt.next()];case 3:if((Ot=Vr.sent()).done)return[3,5];if(Ir=Ot.value,wn)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Ir);try{Xn=this.doDecodeSync(),wn=!0}catch(Hi){if(!(Hi instanceof Nt))throw Hi}this.totalPos+=this.pos,Vr.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return Ti=Vr.sent(),ft={error:Ti},[3,12];case 7:return Vr.trys.push([7,,10,11]),Ot&&!Ot.done&&(fn=nt.return)?[4,fn.call(nt)]:[3,9];case 8:Vr.sent(),Vr.label=9;case 9:return[3,11];case 10:if(ft)throw ft.error;return[7];case 11:return[7];case 12:if(wn){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,Xn]}throw du=(us=this).headByte,On=us.pos,Jn=us.totalPos,new RangeError("Insufficient data in parsing "+at(du)+" at "+Jn+" ("+On+" in the current buffer)")}})},new((kr=void 0)||(kr=Promise))(function(wn,Xn){function Ir(du){try{us(Gr.next(du))}catch(On){Xn(On)}}function Ti(du){try{us(Gr.throw(du))}catch(On){Xn(On)}}function us(du){var On;du.done?wn(du.value):(On=du.value,On instanceof kr?On:new kr(function(Jn){Jn(On)})).then(Ir,Ti)}us((Gr=Gr.apply(rn,[])).next())})},pt.prototype.decodeArrayStream=function(ye){return this.decodeMultiAsync(ye,!0)},pt.prototype.decodeStream=function(ye){return this.decodeMultiAsync(ye,!1)},pt.prototype.decodeMultiAsync=function(ye,nt){return V(this,arguments,function(){var Ot,ft,fn,rn,Wn,kr,Gr,wn,Xn;return cn(this,function(Ir){switch(Ir.label){case 0:Ot=nt,ft=-1,Ir.label=1;case 1:Ir.trys.push([1,13,14,19]),fn=Rn(ye),Ir.label=2;case 2:return[4,Vt(fn.next())];case 3:if((rn=Ir.sent()).done)return[3,12];if(Wn=rn.value,nt&&0===ft)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Wn),Ot&&(ft=this.readArraySize(),Ot=!1,this.complete()),Ir.label=4;case 4:Ir.trys.push([4,9,,10]),Ir.label=5;case 5:return[4,Vt(this.doDecodeSync())];case 6:return[4,Ir.sent()];case 7:return Ir.sent(),0==--ft?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((kr=Ir.sent())instanceof Nt))throw kr;return[3,10];case 10:this.totalPos+=this.pos,Ir.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return Gr=Ir.sent(),wn={error:Gr},[3,19];case 14:return Ir.trys.push([14,,17,18]),rn&&!rn.done&&(Xn=fn.return)?[4,Vt(Xn.call(fn))]:[3,16];case 15:Ir.sent(),Ir.label=16;case 16:return[3,18];case 17:if(wn)throw wn.error;return[7];case 18:return[7];case 19:return[2]}})})},pt.prototype.doDecodeSync=function(){e:for(;;){var ye=this.readHeadByte(),nt=void 0;if(ye>=224)nt=ye-256;else if(ye<192)if(ye<128)nt=ye;else if(ye<144){if(0!=(ft=ye-128)){this.pushMapState(ft),this.complete();continue e}nt={}}else if(ye<160){if(0!=(ft=ye-144)){this.pushArrayState(ft),this.complete();continue e}nt=[]}else{var Ot=ye-160;nt=this.decodeUtf8String(Ot,0)}else if(192===ye)nt=null;else if(194===ye)nt=!1;else if(195===ye)nt=!0;else if(202===ye)nt=this.readF32();else if(203===ye)nt=this.readF64();else if(204===ye)nt=this.readU8();else if(205===ye)nt=this.readU16();else if(206===ye)nt=this.readU32();else if(207===ye)nt=this.readU64();else if(208===ye)nt=this.readI8();else if(209===ye)nt=this.readI16();else if(210===ye)nt=this.readI32();else if(211===ye)nt=this.readI64();else if(217===ye)Ot=this.lookU8(),nt=this.decodeUtf8String(Ot,1);else if(218===ye)Ot=this.lookU16(),nt=this.decodeUtf8String(Ot,2);else if(219===ye)Ot=this.lookU32(),nt=this.decodeUtf8String(Ot,4);else if(220===ye){if(0!==(ft=this.readU16())){this.pushArrayState(ft),this.complete();continue e}nt=[]}else if(221===ye){if(0!==(ft=this.readU32())){this.pushArrayState(ft),this.complete();continue e}nt=[]}else if(222===ye){if(0!==(ft=this.readU16())){this.pushMapState(ft),this.complete();continue e}nt={}}else if(223===ye){if(0!==(ft=this.readU32())){this.pushMapState(ft),this.complete();continue e}nt={}}else if(196===ye){var ft=this.lookU8();nt=this.decodeBinary(ft,1)}else if(197===ye)ft=this.lookU16(),nt=this.decodeBinary(ft,2);else if(198===ye)ft=this.lookU32(),nt=this.decodeBinary(ft,4);else if(212===ye)nt=this.decodeExtension(1,0);else if(213===ye)nt=this.decodeExtension(2,0);else if(214===ye)nt=this.decodeExtension(4,0);else if(215===ye)nt=this.decodeExtension(8,0);else if(216===ye)nt=this.decodeExtension(16,0);else if(199===ye)ft=this.lookU8(),nt=this.decodeExtension(ft,1);else if(200===ye)ft=this.lookU16(),nt=this.decodeExtension(ft,2);else{if(201!==ye)throw new Ce("Unrecognized type byte: "+at(ye));ft=this.lookU32(),nt=this.decodeExtension(ft,4)}this.complete();for(var fn=this.stack;fn.length>0;){var rn=fn[fn.length-1];if(0===rn.type){if(rn.array[rn.position]=nt,rn.position++,rn.position!==rn.size)continue e;fn.pop(),nt=rn.array}else{if(1===rn.type){if("string"!=(Wn=typeof nt)&&"number"!==Wn)throw new Ce("The type of key must be string or number but "+typeof nt);if("__proto__"===nt)throw new Ce("The key __proto__ is not allowed");rn.key=nt,rn.type=2;continue e}if(rn.map[rn.key]=nt,rn.readCount++,rn.readCount!==rn.size){rn.key=null,rn.type=1;continue e}fn.pop(),nt=rn.map}}return nt}var Wn},pt.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},pt.prototype.complete=function(){this.headByte=-1},pt.prototype.readArraySize=function(){var ye=this.readHeadByte();switch(ye){case 220:return this.readU16();case 221:return this.readU32();default:if(ye<160)return ye-144;throw new Ce("Unrecognized array type byte: "+at(ye))}},pt.prototype.pushMapState=function(ye){if(ye>this.maxMapLength)throw new Ce("Max length exceeded: map length ("+ye+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:ye,key:null,readCount:0,map:{}})},pt.prototype.pushArrayState=function(ye){if(ye>this.maxArrayLength)throw new Ce("Max length exceeded: array length ("+ye+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:ye,array:new Array(ye),position:0})},pt.prototype.decodeUtf8String=function(ye,nt){var Ot;if(ye>this.maxStrLength)throw new Ce("Max length exceeded: UTF-8 byte length ("+ye+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+nt+ye)throw In;var ft,Wn,Gr,fn=this.pos+nt;return ft=this.stateIsMapKey()&&(null===(Ot=this.keyDecoder)||void 0===Ot?void 0:Ot.canBeCached(ye))?this.keyDecoder.decode(this.bytes,fn,ye):ye>ae?(Gr=this.bytes.subarray(Wn=fn,Wn+ye),Z.decode(Gr)):j(this.bytes,fn,ye),this.pos+=nt+ye,ft},pt.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},pt.prototype.decodeBinary=function(ye,nt){if(ye>this.maxBinLength)throw new Ce("Max length exceeded: bin length ("+ye+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(ye+nt))throw In;var Ot=this.pos+nt,ft=this.bytes.subarray(Ot,Ot+ye);return this.pos+=nt+ye,ft},pt.prototype.decodeExtension=function(ye,nt){if(ye>this.maxExtLength)throw new Ce("Max length exceeded: ext length ("+ye+") > maxExtLength ("+this.maxExtLength+")");var Ot=this.view.getInt8(this.pos+nt),ft=this.decodeBinary(ye,nt+1);return this.extensionCodec.decode(ft,Ot,this.context)},pt.prototype.lookU8=function(){return this.view.getUint8(this.pos)},pt.prototype.lookU16=function(){return this.view.getUint16(this.pos)},pt.prototype.lookU32=function(){return this.view.getUint32(this.pos)},pt.prototype.readU8=function(){var ye=this.view.getUint8(this.pos);return this.pos++,ye},pt.prototype.readI8=function(){var ye=this.view.getInt8(this.pos);return this.pos++,ye},pt.prototype.readU16=function(){var ye=this.view.getUint16(this.pos);return this.pos+=2,ye},pt.prototype.readI16=function(){var ye=this.view.getInt16(this.pos);return this.pos+=2,ye},pt.prototype.readU32=function(){var ye=this.view.getUint32(this.pos);return this.pos+=4,ye},pt.prototype.readI32=function(){var ye=this.view.getInt32(this.pos);return this.pos+=4,ye},pt.prototype.readU64=function(){var ye,nt,Ot=4294967296*(ye=this.view).getUint32(nt=this.pos)+ye.getUint32(nt+4);return this.pos+=8,Ot},pt.prototype.readI64=function(){var ye=p(this.view,this.pos);return this.pos+=8,ye},pt.prototype.readF32=function(){var ye=this.view.getFloat32(this.pos);return this.pos+=4,ye},pt.prototype.readF64=function(){var ye=this.view.getFloat64(this.pos);return this.pos+=8,ye},pt}(),xr={};function Qi(pt,ye){return void 0===ye&&(ye=xr),new Cr(ye.extensionCodec,ye.context,ye.maxStrLength,ye.maxBinLength,ye.maxArrayLength,ye.maxMapLength,ye.maxExtLength).decode(pt)}function Nc(pt,ye){return void 0===ye&&(ye=xr),new Cr(ye.extensionCodec,ye.context,ye.maxStrLength,ye.maxBinLength,ye.maxArrayLength,ye.maxMapLength,ye.maxExtLength).decodeMulti(pt)}var ya=function(pt,ye){var nt,Ot,ft,fn,rn={label:0,sent:function(){if(1&ft[0])throw ft[1];return ft[1]},trys:[],ops:[]};return fn={next:Wn(0),throw:Wn(1),return:Wn(2)},"function"==typeof Symbol&&(fn[Symbol.iterator]=function(){return this}),fn;function Wn(kr){return function(Gr){return function(wn){if(nt)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nt=1,Ot&&(ft=2&wn[0]?Ot.return:wn[0]?Ot.throw||((ft=Ot.return)&&ft.call(Ot),0):Ot.next)&&!(ft=ft.call(Ot,wn[1])).done)return ft;switch(Ot=0,ft&&(wn=[2&wn[0],ft.value]),wn[0]){case 0:case 1:ft=wn;break;case 4:return rn.label++,{value:wn[1],done:!1};case 5:rn.label++,Ot=wn[1],wn=[0];continue;case 7:wn=rn.ops.pop(),rn.trys.pop();continue;default:if(!((ft=(ft=rn.trys).length>0&&ft[ft.length-1])||6!==wn[0]&&2!==wn[0])){rn=0;continue}if(3===wn[0]&&(!ft||wn[1]>ft[0]&&wn[1]<ft[3])){rn.label=wn[1];break}if(6===wn[0]&&rn.label<ft[1]){rn.label=ft[1],ft=wn;break}if(ft&&rn.label<ft[2]){rn.label=ft[2],rn.ops.push(wn);break}ft[2]&&rn.ops.pop(),rn.trys.pop();continue}wn=ye.call(pt,rn)}catch(Xn){wn=[6,Xn],Ot=0}finally{nt=ft=0}if(5&wn[0])throw wn[1];return{value:wn[0]?wn[1]:void 0,done:!0}}([kr,Gr])}}},Eo=function(pt){return this instanceof Eo?(this.v=pt,this):new Eo(pt)},Ji=function(pt,ye,nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ot,ft=nt.apply(pt,ye||[]),fn=[];return Ot={},rn("next"),rn("throw"),rn("return"),Ot[Symbol.asyncIterator]=function(){return this},Ot;function rn(Xn){ft[Xn]&&(Ot[Xn]=function(Ir){return new Promise(function(Ti,us){fn.push([Xn,Ir,Ti,us])>1||Wn(Xn,Ir)})})}function Wn(Xn,Ir){try{(Ti=ft[Xn](Ir)).value instanceof Eo?Promise.resolve(Ti.value.v).then(kr,Gr):wn(fn[0][2],Ti)}catch(us){wn(fn[0][3],us)}var Ti}function kr(Xn){Wn("next",Xn)}function Gr(Xn){Wn("throw",Xn)}function wn(Xn,Ir){Xn(Ir),fn.shift(),fn.length&&Wn(fn[0][0],fn[0][1])}};function Qs(pt){if(null==pt)throw new Error("Assertion Failure: value must not be null nor undefined")}function jp(pt){return null!=pt[Symbol.asyncIterator]?pt:function(ye){return Ji(this,arguments,function(){var nt,Ot,fn;return ya(this,function(rn){switch(rn.label){case 0:nt=ye.getReader(),rn.label=1;case 1:rn.trys.push([1,,9,10]),rn.label=2;case 2:return[4,Eo(nt.read())];case 3:return Ot=rn.sent(),fn=Ot.value,Ot.done?[4,Eo(void 0)]:[3,5];case 4:return[2,rn.sent()];case 5:return Qs(fn),[4,Eo(fn)];case 6:return[4,rn.sent()];case 7:return rn.sent(),[3,2];case 8:return[3,10];case 9:return nt.releaseLock(),[7];case 10:return[2]}})})}(pt)}function zd(pt,ye){return void 0===ye&&(ye=xr),nt=this,void 0,fn=function(){var rn;return function(Wn,kr){var Gr,wn,Xn,Ir,Ti={label:0,sent:function(){if(1&Xn[0])throw Xn[1];return Xn[1]},trys:[],ops:[]};return Ir={next:us(0),throw:us(1),return:us(2)},"function"==typeof Symbol&&(Ir[Symbol.iterator]=function(){return this}),Ir;function us(du){return function(On){return function(Jn){if(Gr)throw new TypeError("Generator is already executing.");for(;Ti;)try{if(Gr=1,wn&&(Xn=2&Jn[0]?wn.return:Jn[0]?wn.throw||((Xn=wn.return)&&Xn.call(wn),0):wn.next)&&!(Xn=Xn.call(wn,Jn[1])).done)return Xn;switch(wn=0,Xn&&(Jn=[2&Jn[0],Xn.value]),Jn[0]){case 0:case 1:Xn=Jn;break;case 4:return Ti.label++,{value:Jn[1],done:!1};case 5:Ti.label++,wn=Jn[1],Jn=[0];continue;case 7:Jn=Ti.ops.pop(),Ti.trys.pop();continue;default:if(!((Xn=(Xn=Ti.trys).length>0&&Xn[Xn.length-1])||6!==Jn[0]&&2!==Jn[0])){Ti=0;continue}if(3===Jn[0]&&(!Xn||Jn[1]>Xn[0]&&Jn[1]<Xn[3])){Ti.label=Jn[1];break}if(6===Jn[0]&&Ti.label<Xn[1]){Ti.label=Xn[1],Xn=Jn;break}if(Xn&&Ti.label<Xn[2]){Ti.label=Xn[2],Ti.ops.push(Jn);break}Xn[2]&&Ti.ops.pop(),Ti.trys.pop();continue}Jn=kr.call(Wn,Ti)}catch(Vr){Jn=[6,Vr],wn=0}finally{Gr=Xn=0}if(5&Jn[0])throw Jn[1];return{value:Jn[0]?Jn[1]:void 0,done:!0}}([du,On])}}}(this,function(Wn){return rn=jp(pt),[2,new Cr(ye.extensionCodec,ye.context,ye.maxStrLength,ye.maxBinLength,ye.maxArrayLength,ye.maxMapLength,ye.maxExtLength).decodeAsync(rn)]})},new((ft=void 0)||(ft=Promise))(function(rn,Wn){function kr(Xn){try{wn(fn.next(Xn))}catch(Ir){Wn(Ir)}}function Gr(Xn){try{wn(fn.throw(Xn))}catch(Ir){Wn(Ir)}}function wn(Xn){var Ir;Xn.done?rn(Xn.value):(Ir=Xn.value,Ir instanceof ft?Ir:new ft(function(Ti){Ti(Ir)})).then(kr,Gr)}wn((fn=fn.apply(nt,[])).next())});var nt,ft,fn}function Qp(pt,ye){void 0===ye&&(ye=xr);var nt=jp(pt);return new Cr(ye.extensionCodec,ye.context,ye.maxStrLength,ye.maxBinLength,ye.maxArrayLength,ye.maxMapLength,ye.maxExtLength).decodeArrayStream(nt)}function bs(pt,ye){void 0===ye&&(ye=xr);var nt=jp(pt);return new Cr(ye.extensionCodec,ye.context,ye.maxStrLength,ye.maxBinLength,ye.maxArrayLength,ye.maxMapLength,ye.maxExtLength).decodeStream(nt)}function EG(pt,ye){return void 0===ye&&(ye=xr),bs(pt,ye)}return c}()})(yQ),(0,Np.exports)("Int8",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Np.exports)("Int16",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Np.exports)("Int32",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Np.exports)("Uint16",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Np.exports)("Uint32",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Np.exports)("Float32",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Np.exports)("Float64",function(n){return function(i,o,c){return n(this,i,o,c)}});const S4=()=>function(n){const i=window.atob("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==").split("").map(o=>o.charCodeAt(0));return new Uint8Array(i,0,i.length/Uint8Array.BYTES_PER_ELEMENT)}();let FL,tm;function c2(){return c2=L(function*(){if(FL)return FL;const n={};let i,o={};for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i]);let c=!1,h=!1;c="object"==typeof window,h="function"==typeof importScripts,"object"==typeof process&&"object"==typeof process.versions&&process;let g="";(c||h)&&(h?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):""),n.print||console.log.bind(console);const p=n.printErr||console.warn.bind(console);for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i]);let v;o=null,"object"!=typeof WebAssembly&&it("no native wasm support detected");let _=!1;function y(Je){const at=n["_"+Je];return at||it("Assertion failed: Cannot call unknown function "+Je+", make sure it is exported"),at}function b(Je,at,Rt,cn,Rn){const Vt={string:function(In){let Tr=0;if(null!=In&&0!==In){const Cr=1+(In.length<<2);Tr=_t(Cr),function(ya,Eo,Ji,Qs){if(!(Qs>0))return 0;const zd=Ji+Qs-1;for(let Qp=0;Qp<ya.length;++Qp){let bs=ya.charCodeAt(Qp);if(bs>=55296&&bs<=57343&&(bs=65536+((1023&bs)<<10)|1023&ya.charCodeAt(++Qp)),bs<=127){if(Ji>=zd)break;Eo[Ji++]=bs}else if(bs<=2047){if(Ji+1>=zd)break;Eo[Ji++]=192|bs>>6,Eo[Ji++]=128|63&bs}else if(bs<=65535){if(Ji+2>=zd)break;Eo[Ji++]=224|bs>>12,Eo[Ji++]=128|bs>>6&63,Eo[Ji++]=128|63&bs}else{if(Ji+3>=zd)break;Eo[Ji++]=240|bs>>18,Eo[Ji++]=128|bs>>12&63,Eo[Ji++]=128|bs>>6&63,Eo[Ji++]=128|63&bs}}Eo[Ji]=0}(In,P,Tr,Cr)}return Tr},array:function(In){const Tr=_t(In.length);return w.set(In,Tr),Tr}},V=y(Je),_e=[];let ke=0;if(cn)for(let In=0;In<cn.length;In++){const Tr=Vt[Rt[In]];Tr?(0===ke&&(ke=Ge()),_e[In]=Tr(cn[In])):_e[In]=cn[In]}let Nt=V.apply(null,_e);return In=Nt,Nt="string"===at?(Tr=In)?function(xr,Qi,Nc){const ya=Qi+undefined;let Eo=Qi,Ji="";for(;xr[Eo]&&!(Eo>=ya);)++Eo;if(Eo-Qi>16&&xr.subarray&&C)return C.decode(xr.subarray(Qi,Eo));for(;Qi<Eo;){let Qs=xr[Qi++];if(!(128&Qs)){Ji+=String.fromCharCode(Qs);continue}const jp=63&xr[Qi++];if(192==(224&Qs)){Ji+=String.fromCharCode((31&Qs)<<6|jp);continue}const zd=63&xr[Qi++];if(Qs=224==(240&Qs)?(15&Qs)<<12|jp<<6|zd:(7&Qs)<<18|jp<<12|zd<<6|63&xr[Qi++],Qs<65536)Ji+=String.fromCharCode(Qs);else{const Qp=Qs-65536;Ji+=String.fromCharCode(55296|Qp>>10,56320|1023&Qp)}}return Ji}(P,Tr):"":"boolean"===at?Boolean(In):In,0!==ke&&ot(ke),Nt;var In,Tr}const C=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;let w,P,j;typeof TextDecoder<"u"&&new TextDecoder("utf-16le");const G=[],Z=[],ae=[],fe=[];Z.push({func:function(){pn()}});let be=0,Ce=null;function it(Je){throw n.onAbort&&n.onAbort(Je),p(Je+=""),_=!0,Je="abort("+Je+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(Je)}n.preloadedImages={},n.preloadedAudios={};let wt="deflate.wasm";var Je;function Pt(Je){for(;Je.length>0;){const at=Je.shift();if("function"==typeof at){at(n);continue}const Rt=at.func;"number"==typeof Rt?void 0===at.arg?j.get(Rt)():j.get(Rt)(at.arg):Rt(void 0===at.arg?null:at.arg)}}wt.startsWith("data:application/octet-stream;base64,")||(Je=wt,wt=n.locateFile?n.locateFile(Je,g):g+Je);const En={emscripten_memcpy_big:function(Je,at,Rt){P.copyWithin(Je,at,at+Rt)},emscripten_resize_heap:function(Je){it("OOM")}};yield L(function*(){const Je={env:En,wasi_snapshot_preview1:En};function at(Rn,Vt){var _e;n.asm=Rn.exports,v=n.asm.memory,_e=v.buffer,n.HEAP8=w=new Int8Array(_e),n.HEAP16=new Int16Array(_e),n.HEAP32=new Int32Array(_e),n.HEAPU8=P=new Uint8Array(_e),n.HEAPU16=new Uint16Array(_e),n.HEAPU32=new Uint32Array(_e),n.HEAPF32=new Float32Array(_e),n.HEAPF64=new Float64Array(_e),j=n.asm.__indirect_function_table,function(ke){if(be--,n.monitorRunDependencies&&n.monitorRunDependencies(be),0==be&&Ce){const Nt=Ce;Ce=null,Nt()}}()}if(be++,n.monitorRunDependencies&&n.monitorRunDependencies(be),n.instantiateWasm)try{return n.instantiateWasm(Je,at)}catch(Rn){return p("Module.instantiateWasm callback failed with error: "+Rn),!1}return yield function cn(Rn){return new Qn((Vt,V)=>{Vt(S4().buffer)}).then(function(Vt){return WebAssembly.instantiate(Vt,Je)}).then(Rn,function(Vt){p("failed to asynchronously prepare wasm: "+Vt),it(Vt)})}(function Rt(Rn){at(Rn.instance)}),{}})();let pn=n.___wasm_call_ctors=function(){return(pn=n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)},un=n._malloc=function(){return(un=n._malloc=n.asm.malloc).apply(null,arguments)};n._free=function(){return(n._free=n.asm.free).apply(null,arguments)},n.___errno_location=function(){return(n.___errno_location=n.asm.__errno_location).apply(null,arguments)},n._zlibCompress=function(){return(n._zlibCompress=n.asm.zlibCompress).apply(null,arguments)};let yt,Ge=n.stackSave=function(){return(Ge=n.stackSave=n.asm.stackSave).apply(null,arguments)},ot=n.stackRestore=function(){return(ot=n.stackRestore=n.asm.stackRestore).apply(null,arguments)},_t=n.stackAlloc=function(){return(_t=n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)};function bn(Je){function at(){yt||(yt=!0,n.calledRun=!0,_||(Pt(Z),Pt(ae),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)Rt=n.postRun.shift(),fe.unshift(Rt);var Rt;Pt(fe)}()))}be>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)Rt=n.preRun.shift(),G.unshift(Rt);var Rt;Pt(G)}(),be>0||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),at()},1)):at()))}if(n.ccall=b,n.cwrap=function(Je,at,Rt,cn){const Rn=(Rt=Rt||[]).every(function(Vt){return"number"===Vt});return"string"!==at&&Rn&&!cn?y(Je):function(){return b(Je,at,Rt,arguments)}},n.allocate=function(Je,at){let Rt;return Rt=1==at?_t(Je.length):un(Je.length),P.set(Je.subarray||Je.slice?Je:new Uint8Array(Je),Rt),Rt},Ce=function Je(){yt||bn(),yt||(Ce=Je)},n.run=bn,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return bn(),FL=n,n}),c2.apply(this,arguments)}const P1=Uint8Array.BYTES_PER_ELEMENT,C4={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},I4={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},bQ={_message:"m",_type:"t",_id:"id"},UL={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let T4;class Nz{constructor(){q(this,"zlibCompress",void 0)}init(){var i=this;return L(function*(){T4||(T4=(yield L(function*(){return tm||(tm=yield function EQ(){return c2.apply(this,arguments)}()),{zlibCompress:c=>{const h=new Uint8Array(c),g=P1*h.byteLength,p=tm._malloc(g),v=tm._malloc(3*g);for(let b=0;b<g;b++)tm.HEAP8[p/P1+b]=h[b];const _=tm._zlibCompress(p,g,v),y=new Uint8Array(tm.HEAP8.slice(v,v+_));return tm._free(p),tm._free(v),y}}})()).zlibCompress),i.zlibCompress=T4})()}msgPackCompress(i){return yQ.exports.encode(i)}compress(i){const o=Date.now(),c=this.compressKeyAndValue(JSON.parse(JSON.stringify(i))),h=this.msgPackCompress(c),g=this.zlibCompress(h),p=new Uint8Array([49,49,49,50,...Array.from(g)]);return{origin:Object.assign({},i),originLength:JSON.stringify(i).length,shortKeyAndValue:c,msgpackSer:h,compressed:p,compressedLength:p.length,time:Date.now()-o}}compressKeyAndValue(i){return this._ObjectKeyCompress(this._typeCompress(i))}_typeCompress(i){const o=i._type;return o?(i._type=UL[o]||o,i):i}_ObjectKeyCompress(i){const o=i._message;if(o){const c=o.stats;c&&(o.stats=this._statsCompress(c)),i._message=this._messageCompress(o)}return this._reportCompress(i)}_statsCompress(i){return this._keyCompress(i,C4)}_messageCompress(i){return this._keyCompress(i,I4)}_reportCompress(i){return this._keyCompress(i,bQ)}_keyCompress(i,o){const c={},h=Object.keys(i);return Da(h).call(h,(g,p)=>{const v=i[p];return o[p]?c[o[p]]=v:c[p]=v,c},c),c}}class Pz extends is{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(i){super(),q(this,"lowPriorityQueue",[]),q(this,"highPriorityQueue",[]),q(this,"AgoraWebSocketManager",void 0),this.AgoraWebSocketManager=i}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(i){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.highPriorityQueue.push(i):this.lowPriorityQueue.push(i),this.sendMessage()}sendMessage(){const i=this.queue.length;let o=0;o=i<5?15*i:60+3*(i-4),setTimeout(()=>{this._sendMessage()},o)}_sendMessage(){if(!this.queue.length)return;const i=this.AgoraWebSocketManager.getConnection();if(!i||1!==i.readyState)return;const o=this.queue.shift();return this.lowPriorityQueue.includes(o)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),i.send(o.compressed),o}}var u2;function w4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}let Yy=ac("AgoraWebSocketManager","connectionID")(u2=class extends is{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){["tryNext","recover"].includes(n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,"reconnecting"===this._state?this.emit(Mr.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Mr.CONNECTED):"closed"===this._state?this.emit(Mr.CLOSED):"failed"===this._state&&this.emit(Mr.FAILED))}resetReconnectCount(n){oe.debug("websocket reset reconnect count, reason: "+n),Yt("debug",this,"resetReconnectCount",n,"websocket reset reconnect count, reason: "+n),this.reconnectCount=0}constructor(n,i){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h=arguments.length>4?arguments[4]:void 0;super(),q(this,"connectionID",0),q(this,"currentURLIndex",0),q(this,"urls",void 0),q(this,"_reconnectMode","tryNext"),q(this,"reconnectReason",void 0),q(this,"_initMutex",new cu("websocket")),q(this,"name",void 0),q(this,"_state","closed"),q(this,"reconnectInterrupter",void 0),q(this,"websocket",void 0),q(this,"retryConfig",void 0),q(this,"reconnectCount",0),q(this,"forceCloseTimeout",5e3),q(this,"onlineReconnectListener",void 0),q(this,"compressor",new Nz),q(this,"compressorInitStatus","initializing"),q(this,"compress",void 0),q(this,"messageSender",void 0),q(this,"useCompress",void 0),q(this,"tryDoubleDomain",!1),q(this,"wsInflateLength",0),q(this,"wsDeflateLength",0),q(this,"closeEstablishingWs",()=>{}),q(this,"store",void 0),q(this,"joinChannelServiceRecordIndex",void 0),this.store=h,this.name=n,this.retryConfig=function(b){for(var C=1;C<arguments.length;C++){var w=null!=arguments[C]?arguments[C]:{};C%2?w4(Object(w),!0).forEach(function(P){q(b,P,w[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(w)):w4(Object(w)).forEach(function(P){Object.defineProperty(b,P,Object.getOwnPropertyDescriptor(w,P))})}return b}({},i),this.useCompress=o,this.tryDoubleDomain=c;const{timeout:g,timeoutFactor:p}=i,v=Math.max(300,Math.floor(3*g/5)),_=Math.max(1.2,Math.floor(8*p)/10);ku.ONLINE&&(this.retryConfig.timeout=v,this.retryConfig.timeoutFactor=_),Vs.on(OS.NETWORK_STATE_CHANGE,(b,C)=>{b!==C&&(this.resetReconnectCount("network state change: ".concat(C," -> ").concat(b)),b===ku.ONLINE?(this.retryConfig.timeout=v,this.retryConfig.timeoutFactor=_):(this.retryConfig.timeout=g,this.retryConfig.timeoutFactor=p))});const y=Date.now();this.compressor.init().then(()=>{this.compressorInitStatus="initialized";const b=Date.now()-y;oe.debug("websocket compressor initialized successfully in ".concat(b,"ms")),Yt("debug",this.compressor,"init",void 0,"websocket compressor initialized successfully in ".concat(b,"ms")),Kt.wsCompressorInit({status:!0,ec:null,eventElapse:b}),this.compress=this.compressor.compress.bind(this.compressor)}).catch(b=>{this.compressorInitStatus="failed";const C=b?b.message||b.toString():"Empty Error";oe.debug("websocket compressor failed to initialize because of ".concat(C)),Yt("debug",this.compressor,"init",void 0,"websocket compressor failed to initialize because of ".concat(C)),Kt.wsCompressorInit({status:!1,ec:C,eventElapse:1})})}getConnection(){return this.websocket||void 0}init(n){this.forceCloseTimeout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const o=(c,h)=>{this.urls=n;const g=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new Pz(this),this.createWebSocketConnection(g).then(c).catch(h),this.once(Mr.CLOSED,()=>h(new Pe(Te.WS_DISCONNECT))),this.once(Mr.CONNECTED,()=>c())};return this._initMutex.lock().then(c=>new Qn((h,g)=>{o(h,g)}).then(()=>{c()}).catch(()=>{c()}))}close(n,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const o=this.websocket;i?setTimeout(()=>o.close(),500):o.close(),this.websocket=void 0}this.state=n?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(n,i){if(!this.websocket)return oe.warning("[".concat(this.name,"] can not reconnect, no websocket")),void Yt("warning",this,"reconnect","can not reconnect, no websocket");var o;void 0!==n&&(this.reconnectMode=n),oe.debug("[".concat(this.name,"] reconnect is triggered initiative")),Yt("debug",this,"reconnect"),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(o=this.store)||void 0===o||o.recordJoinChannelService({status:"error",errors:[new Error(i)]},this.joinChannelServiceRecordIndex));const c=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),c&&c.bind(this.websocket)({code:9999,reason:i})}sendMessageWithJSON(n){const i=JSON.stringify(n);return{compressed:i,compressedLength:i.length,origin:n}}sendMessageWithUint8Array(n){return{compressed:n,compressedLength:n.byteLength,origin:n}}sendMessage(n){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Pe(Te.WS_ABORT,"websocket is not ready");try{let c=null;if(o)c=this.sendMessageWithUint8Array(n);else if("initialized"===this.compressorInitStatus&&this.useCompress&&Bt("WEBSOCKET_COMPRESS"))try{c=this.compress(n),this.setWsInflateData(c)}catch{c=this.sendMessageWithJSON(n)}else c=this.sendMessageWithJSON(n);i?this.websocket.send(c.compressed):this.messageSender.pushMessage(c)}catch(c){throw new Pe(Te.WS_ERR,"send websocket message error"+c.toString())}}setWsInflateData(n){this.wsDeflateLength=this.wsDeflateLength+n.originLength,this.wsInflateLength=this.wsInflateLength+n.compressedLength}getWsInflateData(){const n=this.wsInflateLength,i=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:n,wsDeflateLength:i}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}createWebSocketConnection(n,i){var o=this;return L(function*(){return o.connectionID+=1,o.joinChannelServiceRecordIndex=void 0,new Qn((c,h)=>{var g;const p=()=>{oe.debug("[".concat(o.name,"] websocket opened:"),n),Bd("debug",["WebSocket",o.connectionID],"open",n),o.reconnectMode="retry",o.state="connected",o.resetReconnectCount("opened"),c()},v=function(){var b=L(function*(C){if(oe.debug("[".concat(o.name,"] websocket close ").concat(o.websocket&&o.websocket.url,", code: ").concat(C.code,", reason: ").concat(C.reason,", current mode: ").concat(o.reconnectMode)),Bd("debug",["WebSocket",o.connectionID],"close",{code:C.code,reason:C.reason,url:o.websocket&&o.websocket.url,reconnectMode:o.reconnectMode}),o.reconnectCount<o.retryConfig.maxRetryCount){"connected"===o.state&&(o.reconnectReason=C.reason,o.state="reconnecting");const w=Ov(o,Mr.WILL_RECONNECT,o.reconnectMode)||o.reconnectMode,P=yield o.reconnectWithAction(w);if("closed"===o.state)return oe.debug("[".concat(o.connectionID,"] ws is closed, no need to reconnect")),void xn("debug",o,"ws is closed, no need to reconnect");if(!P)return h(new Pe(Te.WS_DISCONNECT,"websocket reconnect failed: ".concat(C.code))),void o.close(!0);c()}else h(new Pe(Te.WS_DISCONNECT,"websocket close: ".concat(C.code))),o.close()});return function(w){return b.apply(this,arguments)}}(),_=b=>{o.emit(Mr.ON_MESSAGE,b)};o.websocket&&(o.websocket.onclose=null,o.websocket.close()),Bt("GATEWAY_WSS_ADDRESS")&&o.name.startsWith("gateway")&&(n=Bt("GATEWAY_WSS_ADDRESS")),oe.debug("[".concat(o.name,"] start connect, url: ").concat(n)),xn("debug",o,"start connect, url: ".concat(n));const y=null===(g=o.store)||void 0===g?void 0:g.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});o.chooseBestWebsocketConnection(n,!!i,y).then(b=>{var C;o.websocket=b,p&&p(),b.onclose=v,b.onmessage=_,null===(C=o.store)||void 0===C||C.recordJoinChannelService({endTs:Date.now(),status:"success"},y),o.joinChannelServiceRecordIndex=y}).catch(b=>{var C;if(null===(C=o.store)||void 0===C||C.recordJoinChannelService({endTs:Date.now(),status:b instanceof Pe&&b.code===Te.WS_ABORT?"aborted":"error",errors:[b]},y),"closed"!==o.state){if(b instanceof Pe&&b.code===Te.WS_ERR){const w=new Pe(Te.WS_ERR,"init websocket failed! Error: ".concat(b.toString()));return oe.error("[".concat(o.name,"]").concat(w)),Yt("error",o,"chooseBestWebsocketConnection",void 0,b.toString()),void h(w)}v&&v(b)}else h(new Pe(Te.WS_DISCONNECT,"websocket is closed: ".concat(b.toString())))})})})()}reconnectWithAction(n){var i=arguments,o=this;return L(function*(){let c=!(i.length>1&&void 0!==i[1])||i[1];if(o.reconnectCount>=o.retryConfig.maxRetryCount||!o.urls||"closed"===o.state)return!1;o.onlineReconnectListener||Vs.networkState!==ku.OFFLINE||(o.onlineReconnectListener=Vs.onlineWaiter&&Vs.onlineWaiter.then(()=>{o.onlineReconnectListener=void 0}));let h=!0;if(o.reconnectInterrupter=()=>{h=!1},c){const p=BU(o.reconnectCount,o.retryConfig);oe.debug("[".concat(o.name,"] wait ").concat(p,"ms to reconnect websocket, mode: ").concat(n)),Yt("debug",o,"reconnectWithAction",{timeout:p,action:n}),yield Qn.race([dc(p),o.onlineReconnectListener||new Qn(()=>{})])}if("closed"===o.state||!h)return!1;o.reconnectCount+=1;const g=function(){var p=L(function*(v,_){o.emit(Mr.RECONNECT_CREATE_CONNECTION,_),yield o.createWebSocketConnection(v)});return function(_,y){return p.apply(this,arguments)}}();try{if("retry"===n){const p=o.urls[o.currentURLIndex];o.emit(Mr.RECONNECT_WAITTING_FINISH,n),yield g(p,n)}else if("tryNext"===n){if(o.currentURLIndex+=1,o.currentURLIndex>=o.urls.length)return yield o.reconnectWithAction("recover",!1);oe.debug("[".concat(o.name,"] websocket url length: ").concat(o.urls.length," current index: ").concat(o.currentURLIndex)),xn("debug",o,"websocket url length: ".concat(o.urls.length," current index: ").concat(o.currentURLIndex));const p=o.urls[o.currentURLIndex];o.emit(Mr.RECONNECT_WAITTING_FINISH,n),yield g(p,n)}else if("recover"===n){oe.debug("[".concat(o.name,"] request new urls")),xn("debug",o,"request new urls"),o.resetReconnectCount("recover mode"),o.emit(Mr.RECONNECT_WAITTING_FINISH,n),o.urls=yield jd(o,Mr.REQUEST_NEW_URLS),o.currentURLIndex=0;const p=o.urls[o.currentURLIndex];yield g(p,n)}return!0}catch(p){return oe.error("[".concat(o.name,"] reconnect failed"),p.toString()),Yt("error",o,"reconnectWithAction",void 0,p.toString()),yield o.reconnectWithAction(n,c)}})()}chooseBestWebsocketConnection(n,i,o){var c=this;return L(function*(){return new Qn((h,g)=>{let p=!1;const v=[];c.closeEstablishingWs=()=>{oe.debug("[choose-best-ws] close establishing websockets"),v.forEach(G=>{G.onclose=null,G.onopen=null,G.onmessage=null,G.close()}),g(new Pe(Te.WS_ABORT,"choose best websocket aborted"))};const _=Bt("GATEWAY_DOMAINS");let y;const b=n.indexOf("?h="),C=_.find(G=>-1!==b?n.includes(G,b):n.includes(G));oe.debug("[choose-best-ws] currentDomain: ",C,", domains: ",_),Yt("debug",c,"chooseBestWebsocketConnection",{currentDomain:C,domains:_});let w=!c.tryDoubleDomain||i||!C;if(!w&&C){var P;const G=Date.now();try{_.forEach(Z=>{const ae=-1===b?n.replace(C,Z):n.substr(0,b)+n.substr(b).replace(C,Z),fe=new WebSocket(ae);fe.binaryType="arraybuffer",v.push(fe),oe.debug("[choose-best-ws] ws is connecting:",fe.url),xn("debug",c,"ws is connecting: ".concat(fe.url))})}catch{for(oe.debug("[choose-best-ws] ws create failed, fallback to single url"),xn("debug",c,"ws create failed, fallback to single url"),v.forEach(ae=>ae.close());v.length;)v.pop();w=!0}null===(P=c.store)||void 0===P||P.recordJoinChannelService({urls:v.map(Z=>Z.url),service:"gateway"},o),v.forEach(Z=>{Z.onopen=()=>{if(p)return;const ae=Date.now()-G;oe.debug("[choose-best-ws] ws open cost ".concat(ae,"ms")),v.filter(fe=>fe!==Z).forEach(fe=>{oe.debug("[choose-best-ws]close backup websocket: ".concat(fe.url)),xn("debug",c,"close backup websocket: ".concat(fe.url)),fe.close()}),p=!0,h(Z)},Z.onclose=ae=>{y=ae,!p&&(v.find(fe=>!(fe.readyState===WebSocket.CLOSED||fe.readyState===WebSocket.CLOSING))||(oe.debug("[choose-best-ws] all websocket is closed"),xn("debug",c,"all websocket is closed"),p=!0,g(y)))},Z.onmessage=ae=>{oe.debug("[choose-best-ws]".concat(Z.url," onmessage: ").concat(ae.data)),xn("debug",c,"".concat(Z.url," onmessage: ").concat(ae.data))}}),dc(c.forceCloseTimeout).then(()=>{v.forEach(Z=>{Z.readyState!==WebSocket.OPEN&&Z.close()})})}if(w){var j;let G;oe.debug("[choose-best-ws] use single url: ",n),xn("debug",c,"use single url: ".concat(n)),null===(j=c.store)||void 0===j||j.recordJoinChannelService({urls:[n],service:"gateway"},o);try{G=new WebSocket(n),v.push(G),G.binaryType="arraybuffer"}catch(Z){const ae=new Pe(Te.WS_ERR,"init websocket failed! Error: ".concat(Z.toString()));return oe.error("[".concat(c.name,"]").concat(ae)),Yt("error",c,"chooseBestWebsocketConnection",void 0,Z.toString()),void g(ae)}G.onopen=()=>{h(G)},G.onclose=Z=>{g(Z)},G.onmessage=Z=>{oe.debug("[choose-best-ws]".concat(G.url," onmessage: ").concat(Z.data)),xn("debug",c,"".concat(G.url," onmessage: ").concat(Z.data))},dc(c.forceCloseTimeout).then(()=>{G&&G.readyState!==WebSocket.OPEN&&G.close()})}}).then(h=>(c.closeEstablishingWs=void 0,h)).catch(h=>{throw c.closeEstablishingWs=void 0,h})})()}})||u2;class R4{constructor(i){q(this,"input",[]),q(this,"size",void 0),this.size=i}add(i){this.input.push(i),this.input.length>this.size&&this.input.splice(0,1)}mean(){var i;return 0===this.input.length?0:Da(i=this.input).call(i,(o,c)=>o+c)/this.input.length}}var O4;let D4=ac("AgoraRTCSignal","websocket.connectionID")(O4=class extends is{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===Bs.CONNECTED?this.emit(Zr.WS_CONNECTED):n===Bs.RECONNECTING?this.emit(Zr.WS_RECONNECTING,this._websocketReconnectReason):n===Bs.CLOSED&&this.emit(Zr.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(n,i){super(),q(this,"_disconnectedReason",void 0),q(this,"_websocketReconnectReason",void 0),q(this,"_connectionState",Bs.CLOSED),q(this,"reconnectToken",void 0),q(this,"websocket",void 0),q(this,"openConnectionTime",void 0),q(this,"clientId",void 0),q(this,"lastMsgTime",Date.now()),q(this,"uploadCache",[]),q(this,"uploadCacheInterval",void 0),q(this,"rttRolling",new R4(5)),q(this,"pingpongTimer",void 0),q(this,"wsInflateDataTimer",void 0),q(this,"pingpongTimeoutCount",0),q(this,"joinResponse",void 0),q(this,"multiIpOption",void 0),q(this,"initError",void 0),q(this,"spec",void 0),q(this,"store",void 0),q(this,"onWebsocketMessage",o=>{if(o.data instanceof ArrayBuffer)return void this.emit(Zr.ON_BINARY_DATA,o.data);const c=JSON.parse(o.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(c,"_id")){const h="res-@".concat(c._id);this.emit(h,c._result,c._message)}else if(Object.prototype.hasOwnProperty.call(c,"_type")&&(this.emit(c._type,c._message),c._type===Fi.ON_NOTIFICATION&&this.handleNotification(c._message),c._type===Fi.ON_USER_BANNED))switch(c._message.error_code){case 14:this.close(Ls.UID_BANNED);break;case 15:this.close(Ls.IP_BANNED);break;case 16:this.close(Ls.CHANNEL_BANNED)}}),this.clientId=n.clientId,this.spec=n,this.store=i,this.websocket=new Yy("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Bs.CONNECTED&&this.reconnect("retry",ps.OFFLINE)})}request(n,i,o,c){var h=this;return L(function*(){const g=cs(6,""),p={_id:g,_type:n,_message:i},v=h.websocket.connectionID,_=()=>new Qn((j,G)=>{if(h.connectionState===Bs.CONNECTED)return j();const Z=()=>{h.off(Zr.WS_CLOSED,ae),j()},ae=()=>{h.off(Zr.WS_CONNECTED,Z),G(new Pe(Te.WS_ABORT))};h.once(Zr.WS_CONNECTED,Z),h.once(Zr.WS_CLOSED,ae),n!==hi.PUBLISH&&n!==hi.SUBSCRIBE&&n!==hi.UNSUBSCRIBE&&n!==hi.UNPUBLISH&&n!==hi.CONTROL||h.once(Zr.DISCONNECT_P2P,()=>{G(new Pe(Te.DISCONNECT_P2P))}),n===hi.PUBLISH&&h.once(Zr.ABORT_P2P_EXECUTION,()=>{G(new Pe(Te.DISCONNECT_P2P))})});if(h.connectionState!==Bs.CONNECTING&&h.connectionState!==Bs.RECONNECTING||n===hi.JOIN||n===hi.REJOIN||(yield _()),h.websocket.sendMessage(p,!0),c)return;const y=new Qn((j,G)=>{let Z=!1;const ae=(be,Ce)=>{Z=!0,j({isSuccess:"success"===be,message:Ce||{}}),h.off(Zr.WS_CLOSED,fe),h.off(Zr.WS_RECONNECTING,fe),h.emit(Zr.REQUEST_SUCCESS,n,i)};h.once("res-@".concat(g),ae);const fe=()=>{G(new Pe(Te.WS_ABORT,"type: ".concat(n))),h.off(Zr.WS_CLOSED,fe),h.off(Zr.WS_RECONNECTING,fe),h.off("res-@".concat(g),ae)};h.once(Zr.WS_CLOSED,fe),h.once(Zr.WS_RECONNECTING,fe),dc(Bt("SIGNAL_REQUEST_TIMEOUT")).then(()=>{h.websocket.connectionID!==v||Z||(oe.warning("ws request timeout, type: ".concat(n)),xn("warning",h,"ws request timeout, type: ".concat(n)),h.emit(Zr.REQUEST_TIMEOUT,n,i))})});let b=null;try{b=yield y}catch(j){if(h.connectionState===Bs.CLOSED||n===hi.LEAVE)throw new Pe(Te.WS_ABORT);return!h.spec.forceWaitGatewayResponse||o?j.throw():n===hi.JOIN||n===hi.REJOIN?null:(yield _(),yield h.request(n,i))}if(b.isSuccess)return b.message;const C=Number(b.message.error_code||b.message.code),w=BL(C),P=new Pe(Te.UNEXPECTED_RESPONSE,"".concat(w.desc,": ").concat(b.message.error_str),{code:C,data:b.message});return"success"===w.action?b.message:(oe.warning("[".concat(h.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(C,", message: ").concat(w.desc,", action: ").concat(w.action)),xn("warning",h,"unexpected response from type ".concat(n,", error_code: ").concat(C,", message: ").concat(w.desc,", action: ").concat(w.action)),C===Er.ERR_TOO_MANY_BROADCASTERS?((n===hi.JOIN||n===hi.REJOIN)&&(h.initError=P,h.close()),P.throw()):"failed"===w.action?P.throw():"quit"===w.action?(h.initError=P,h.close(),P.throw()):(C===Er.ERR_JOIN_BY_MULTI_IP?(h.multiIpOption=b.message.option,oe.warning("[".concat(h.clientId,"] detect multi ip, recover")),xn("warning",h,"detect multi ip, recover"),h.reconnect("recover",ps.MULTI_IP)):h.reconnect(w.action,ps.SERVER_ERROR),n===hi.JOIN||n===hi.REJOIN?null:yield h.request(n,i)))})()}waitMessage(n,i){return new Qn(o=>{const c=h=>{(!i||i(h))&&(this.off(n,c),o(h))};this.on(n,c)})}upload(n,i){const o={_type:n,_message:i};try{this.websocket.sendMessage(o)}catch{const h=Bt("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(o),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Bs.CONNECTED)return;const g=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(g._type,g._message)},Bt("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,i){this.websocket.sendMessage({_type:n,_message:i})}init(n,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Qn((o,c)=>{this.once(Zr.WS_CONNECTED,()=>o(this.joinResponse)),this.once(Zr.WS_CLOSED,()=>c(this.initError||new Pe(Te.WS_ABORT))),this.connectionState=Bs.CONNECTING,this.websocket.init(n).catch(c),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{i&&void 0===this.openConnectionTime&&(oe.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),c(new Pe(Te.INIT_WEBSOCKET_TIMEOUT)))},Bt("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=n||Ls.LEAVE,this.connectionState=Bs.CLOSED,oe.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),n===Ls.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new Yy("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}join(){var n=this;return L(function*(){if(!n.joinResponse){n.emit(Zr.ABORT_P2P_EXECUTION);const i=yield jd(n,Zr.REQUEST_JOIN_INFO),o=yield n.request(hi.JOIN,i);if(!o)return n.emit(Zr.REPORT_JOIN_GATEWAY,Te.TIMEOUT,n.url||""),!1;n.joinResponse=o,n.emit(Zr.JOIN_RESPONSE,n.joinResponse),n.reconnectToken=n.joinResponse.rejoin_token}return n.connectionState=Bs.CONNECTED,n.pingpongTimer&&window.clearInterval(n.pingpongTimer),n.pingpongTimer=window.setInterval(n.handlePingPong.bind(n),3e3),!0})()}rejoin(){var n=this;return L(function*(){if(!n.reconnectToken)throw new Pe(Te.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const i=HS(n,Zr.REQUEST_REJOIN_INFO);i.token=n.reconnectToken;const o=yield n.request(hi.REJOIN,i);return!!o&&(n.connectionState=Bs.CONNECTED,n.pingpongTimer&&window.clearInterval(n.pingpongTimer),n.pingpongTimer=window.setInterval(n.handlePingPong.bind(n),3e3),o.peers&&o.peers.forEach(c=>{n.emit(Fi.ON_USER_ONLINE,{uid:c.uid}),c.audio&&n.emit(Fi.ON_ADD_AUDIO_STREAM,{uid:c.uid,uint_id:c.uint_id,audio:!0,ssrcId:c.audio_ssrc}),c.video&&n.emit(Fi.ON_ADD_VIDEO_STREAM,{uid:c.uid,uint_id:c.uint_id,video:!0,ssrcId:c.video_ssrc}),n.emit(c.audio_mute?Fi.MUTE_AUDIO:Fi.UNMUTE_AUDIO,{uid:c.uid}),n.emit(c.video_mute?Fi.MUTE_VIDEO:Fi.UNMUTE_VIDEO,{uid:c.uid}),n.emit(c.audio_enable_local?Fi.ENABLE_LOCAL_AUDIO:Fi.DISABLE_LOCAL_AUDIO,{uid:c.uid}),n.emit(c.video_enable_local?Fi.ENABLE_LOCAL_VIDEO:Fi.DISABLE_LOCAL_VIDEO,{uid:c.uid}),c.audio||c.video||n.emit(Fi.ON_REMOVE_STREAM,{uid:c.uid,uint_id:c.uint_id})}),!0)})()}reconnect(n,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,i)}handleNotification(n){oe.debug("[".concat(this.clientId,"] receive notification: "),n),Yt("debug",this,"handleNotification",n);const i=BL(n.code);if("success"!==i.action)return"failed"===i.action?(oe.error("[".concat(this.clientId,"] ignore error: "),i.desc),void xn("error",this,"ignore error: ".concat(i.desc))):"quit"===i.action?("ERR_REPEAT_JOIN_CHANNEL"===i.desc&&this.close(Ls.UID_BANNED),void this.close()):void this.reconnect(i.action,ps.SERVER_ERROR)}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=Bt("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=n&&(oe.warning("PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),xn("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>Bt("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",ps.TIMEOUT):this.request(hi.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const o=Date.now()-i;this.rttRolling.add(o),Bt("REPORT_STATS")&&this.send(hi.PING_BACK,{pingpongElapse:o})}).catch(o=>{})}handleWsInflateData(){const{wsInflateLength:n,wsDeflateLength:i}=this.websocket.getWsInflateData();0!==n&&0!==i&&this.upload(ou.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:n})}handleWebsocketEvents(){this.websocket.on(Mr.RECONNECT_WAITTING_FINISH,n=>{this.emit(Zr.WS_RECONNECT_WAITTING_FINISH,n)}),this.websocket.on(Mr.RECONNECT_CREATE_CONNECTION,n=>{this.emit(Zr.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(Mr.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Mr.CLOSED,()=>{this.connectionState=Bs.CLOSED}),this.websocket.on(Mr.FAILED,()=>{this._disconnectedReason=Ls.NETWORK_ERROR,this.connectionState=Bs.CLOSED}),this.websocket.on(Mr.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState=this.connectionState===Bs.CONNECTED?Bs.RECONNECTING:Bs.CONNECTING}),this.websocket.on(Mr.WILL_RECONNECT,(n,i)=>{if(HS(this,Zr.IS_P2P_DISCONNECTED)&&"retry"===n)return oe.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),xn("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Zr.NEED_RENEW_SESSION),this.emit(Zr.DISCONNECT_P2P),i("tryNext");"retry"!==n&&(oe.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),xn("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0,this.emit(Zr.NEED_RENEW_SESSION),this.emit(Zr.DISCONNECT_P2P)),i(n)}),this.websocket.on(Mr.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{oe.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),Yt("warning",this,"rejoin",void 0,n.toString()),this.reconnect("tryNext",ps.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit(Zr.REPORT_JOIN_GATEWAY,n.message||n.code,this.url||""),n instanceof Pe&&n.code===Te.UNEXPECTED_RESPONSE&&n.data.code===Er.ERR_NO_AUTHORIZED)return oe.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),xn("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",ps.SERVER_ERROR);oe.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),Yt("error",this,"join",void 0,n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",ps.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(Mr.REQUEST_NEW_URLS,(n,i)=>{jd(this,Zr.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)})}})||O4;var k4;function N4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Hg(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?N4(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):N4(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}const P4=new Map;let Mz=ac("AgoraRTCGateway","store.clientId")(k4=class extends is{get state(){return this._state}set state(n){if(n===this._state)return;const i=this._state;this._state=n,"DISCONNECTED"===n&&this._disconnectedReason?this.emit(fs.CONNECTION_STATE_CHANGE,n,i,this._disconnectedReason):this.emit(fs.CONNECTION_STATE_CHANGE,n,i)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(n){oe.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),Yt("debug",this,"joinGatewayStartTime",n,"[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),this._joinGatewayStartTime=n}constructor(n,i){super(),q(this,"store",void 0),q(this,"joinInfo",void 0),q(this,"key",void 0),q(this,"signal",void 0),q(this,"role",void 0),q(this,"inChannelInfo",{joinAt:null,duration:0}),q(this,"spec",void 0),q(this,"_state","DISCONNECTED"),q(this,"_statsCollector",void 0),q(this,"_disconnectedReason",void 0),q(this,"isSignalRecover",!1),q(this,"hasChangeBGPAddress",!1),q(this,"trafficStatsInterval",void 0),q(this,"networkQualityInterval",void 0),q(this,"_joinGatewayStartTime",0),q(this,"_signalTimeout",!1),q(this,"_clientRoleOptions",void 0),q(this,"_isProactiveJoin",!1),this.store=n,this.spec=i,this.signal=new D4(Hg(Hg({},i),{},{retryConfig:i.websocketRetryConfig}),n),this._statsCollector=i.statsCollector,this.role=i.role||"audience",this._clientRoleOptions=i.clientRoleOptions,this.handleSignalEvents()}join(n,i,o){var c=this;return L(function*(){c.store.joinGatewayStart(),"disabled"!==n.cloudProxyServer&&(c.hasChangeBGPAddress=!0);const h=Date.now();let g=P4.get(n.cname);if(g||(g=new Map,P4.set(n.cname,g)),c._isProactiveJoin=!0,g.has(n.uid)){const y=new Pe(Te.UID_CONFLICT);throw Kt.joinGateway(n.sid,{lts:h,succ:!1,ec:y.message,addr:null,uid:n.uid,cid:n.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!n.proxyServer}),c._isProactiveJoin=!1,y}g.set(n.uid,!0),c.joinInfo=n,c.key=i;const p=n.proxyServer,v=n.gatewayAddrs.map(p?y=>{const b=y.address.split(":");return"wss://".concat(p,"/ws/?h=").concat(b[0],"&p=").concat(b[1])}:y=>"wss://".concat(y.address));let _=0;c.joinGatewayStartTime=h;try{_=(yield c.signal.init(v,o)).uid}catch(y){throw y&&y.code===Te.INIT_WEBSOCKET_TIMEOUT?(oe.warning("[".concat(c.store.clientId,"] User join failed"),y.toString()),y):(oe.error("[".concat(c.store.clientId,"] User join failed"),y.toString()),Yt("error",c,"join",void 0,y.toString()),Kt.joinGateway(n.sid,{lts:h,succ:!1,ec:y.message,addr:c.signal.url,uid:n.uid,cid:n.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!p}),c._isProactiveJoin=!1,g.delete(n.uid),c.signal.close(),y)}return c.state="CONNECTED",c.inChannelInfo.joinAt=Date.now(),oe.debug("[".concat(c.store.clientId,"] Connected to gateway server")),Yt("debug",c,"join",void 0,"success"),c.trafficStatsInterval=window.setInterval(()=>{c.updateTrafficStats().catch(y=>{oe.warning("[".concat(c.store.clientId,"] get traffic stats error"),y.toString()),Yt("warning",c,"trafficStatsInterval",void 0,y.toString())})},3e3),c.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?c.emit(fs.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):c.emit(fs.NETWORK_QUALITY,c._signalTimeout?{downlinkNetworkQuality:5,uplinkNetworkQuality:5}:"CONNECTED"===c.state&&c._statsCollector.trafficStats?{uplinkNetworkQuality:rL(c._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:rL(c._statsCollector.trafficStats.B_dnq)}:{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),c.store.joinGatewayEnd(),_})()}leave(){var n=arguments,i=this;return L(function*(){let o=n.length>0&&void 0!==n[0]&&n[0],c=n.length>1?n[1]:void 0;if("DISCONNECTED"!==i.state){c!==Ls.FALLBACK&&(i.state="DISCONNECTING");try{o||i.signal.connectionState!==Bs.CONNECTED||(yield(h=i.signal.request(hi.LEAVE,void 0,!0),3e3,Qn.race([h,nz(3e3)])))}catch(h){oe.warning("[".concat(i.store.clientId,"] leave request failed, ignore"),h),xn("warning",i,"leave request failed, ignore, ".concat(h.toString()))}i.signal.close(c),c!==Ls.FALLBACK&&(i.state="DISCONNECTED"),i.reset()}var h})()}publish(n,i,o){var c=this;return L(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new Pe(Te.INVALID_OPERATION,"can not publish when connection state is ".concat(c.state));const h={state:"offer",p2p_id:c.store.p2pId,ortc:i,mode:c.spec.mode,extend:Bt("PUB_EXTEND")};try{return(yield c.signal.request(hi.PUBLISH,h,!0))._message}catch(g){if(o&&g.data&&g.data.code===Er.ERR_PUBLISH_REQUEST_INVALID)return oe.warning("[".concat(c.store.clientId,"] receive publish error code, retry"),g.toString()),xn("warning",c,"receive publish error code, retry, ".concat(g.toString())),yield c.tryUnpubBeforeRepub(n,i),c.publish(n,i,!1);throw g}})()}unpublish(n,i){var o=this;return L(function*(){try{if("CONNECTED"!==o.state&&"RECONNECTING"!==o.state)throw new Pe(Te.INVALID_OPERATION,"can not publish when connection state is ".concat(o.state));yield o.signal.request(hi.UNPUBLISH,{stream_id:i,ortc:n},!0)}catch(c){oe.warning("unpublish warning: ",c),Yt("warning",o,"unpublish",void 0,c.toString())}})()}subscribe(n,i,o){var c=this;return L(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new Pe(Te.INVALID_OPERATION,"can not subscribe when connection state is ".concat(c.state));const h={stream_id:n,stream_type:i.stream_type,mode:c.spec.mode,codec:c.spec.codec,p2p_id:c.store.p2pId,tcc:!!Bt("SUBSCRIBE_TCC"),extend:Bt("SUB_EXTEND"),ssrcId:i.ssrcId};try{return(yield c.signal.request(hi.SUBSCRIBE,h,!0))._message}catch(g){if(o&&g.data&&g.data.code===Er.ERR_SUBSCRIBE_REQUEST_INVALID)return oe.warning("[".concat(c.store.clientId,"] receiver subscribe error code, retry"),g.toString()),xn("warning",c,"receiver subscribe error code, retry"),yield c.tryUnsubBeforeResub(n,i),yield c.subscribe(n,i,!1);throw g}})()}subscribeAll(n,i){var o=this;return L(function*(){if("CONNECTED"!==o.state&&"RECONNECTING"!==o.state)throw new Pe(Te.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(o.state));const c={p2p_id:o.store.p2pId,users:n,dtx:!1};try{return yield o.signal.request(hi.SUBSCRIBE_STREAMS,c,!0)}catch(h){if(i&&h.data&&h.data.code===Er.ERR_SUBSCRIBE_REQUEST_INVALID)return oe.warning("[".concat(o.store.clientId,"] receiver massSubscribe error code, retry"),h.toString()),xn("warning",o,"receiver massSubscribe error code, retry"),yield o.tryMassUnsubBeforeResub(n),yield o.subscribeAll(n,!1);throw h}})()}setVideoProfile(n){var i=this;return L(function*(){const o=function(c){if(!(c.bitrateMax&&c.bitrateMin&&c.frameRate&&c.height&&c.width))return;let h=c.frameRate,g=c.width,p=c.height,v=!0;return"number"!=typeof h&&(h=h.exact||h.ideal||h.max||h.min||0,h||(v=!1)),"number"!=typeof g&&(g=g.exact||g.ideal||g.max||g.min||0,g||(v=!1)),"number"!=typeof p&&(p=p.exact||p.ideal||p.max||p.min||0,h||(v=!1)),v?{stream_type:0,width:g,height:p,fps:h,start_bps:1e3*c.bitrateMax,min_bps:1e3*c.bitrateMin,target_bps:1e3*c.bitrateMax}:void 0}(n);return o?i.signal.request(hi.SET_VIDEO_PROFILE,o):(oe.debug("[".concat(i.store.clientId,"] encoder config is not complete, do not report to gateway")),void xn("debug",i,"encoder config is not complete, do not report to gateway"))})()}unsubscribe(n,i){var o=this;return L(function*(){try{yield o.signal.request(hi.UNSUBSCRIBE,{p2p_id:o.store.p2pId,ortc:n,stream_id:i},!0)}catch(c){oe.warning("unsubscribe warning: ",c),Yt("warning",o,"unsubscribe",void 0,c.toString())}})()}massUnsubscribe(n){var i=this;return L(function*(){try{yield i.signal.request(hi.UNSUBSCRIBE_STREAMS,n,!0)}catch(o){oe.warning("unsubscribeAll warning: ",o),Yt("warning",i,"unsubscribeAll",void 0,o.toString())}})()}reconnectPC(n){var i=this;return L(function*(){const{iceParameters:o,dtlsParameters:c,rtpCapabilities:h}=n,g=yield i.signal.request(hi.CONNECT_PC,{p2p_id:i.store.p2pId,stream_id:i.store.uid,ortc:{iceParameters:o,dtlsParameters:c,rtpCapabilities:h}},!0),p=i.getGatewayIpPort();return{gatewayEstablishParams:g,gatewayIP:p?.ip,gatewayPort:p?.port}})()}getGatewayInfo(){return this.signal.request(hi.GATEWAY_INFO)}renewToken(n){return this.signal.request(hi.RENEW_TOKEN,n)}setClientRole(n,i){var o=this;return L(function*(){if(i&&(o._clientRoleOptions=Object.assign({},i)),"CONNECTED"!==o.state)return void(o.role=n);let c;c="audience"===n?o._clientRoleOptions&&o._clientRoleOptions.level?o._clientRoleOptions.level:2:0,yield o.signal.request(hi.SET_CLIENT_ROLE,{role:n,level:c,client_ts:Date.now()}),o.role=n})()}setRemoteVideoStreamType(n,i){var o=this;return L(function*(){yield o.signal.request(hi.SWITCH_VIDEO_STREAM,{stream_id:n,stream_type:i})})()}setDefaultRemoteVideoStreamType(n){var i=this;return L(function*(){yield i.signal.request(hi.DEFAULT_VIDEO_STREAM,{stream_type:n})})()}setStreamFallbackOption(n,i){var o=this;return L(function*(){yield o.signal.request(hi.SET_FALLBACK_OPTION,{stream_id:n,fallback_type:i})})()}pickSVCLayer(n,i){var o=this;return L(function*(){yield o.signal.request(hi.PICK_SVC_LAYER,{stream_id:n,spatial_layer:i.spatialLayer,temporal_layer:i.temporalLayer})})()}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Hg({},this.inChannelInfo)}getGatewayVersion(){var n=this;return L(function*(){return(yield n.signal.request(hi.GATEWAY_INFO)).version})()}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const n=P4.get(this.joinInfo.cname);n&&n.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const n=function(i){const o=i.match(/(wss\:\/\/)?([^:]+):(\d+)/);return o?{username:Js.username,password:Js.password,turnServerURL:o[2],tcpport:parseInt(o[3])+30,udpport:parseInt(o[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],n&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(Hg(Hg({},Js),{},{turnServerURL:n.turnServerURL,tcpport:n.tcpport,udpport:n.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}updateTrafficStats(){var n=this;return L(function*(){if("CONNECTED"!==n.state)return;const i=yield n.signal.request(hi.TRAFFIC_STATS,void 0,!0);i.timestamp=Date.now(),i.peer_delay.forEach(o=>{const c=n._statsCollector.trafficStats&&n._statsCollector.trafficStats.peer_delay.find(h=>h.peer_uid===o.peer_uid);c&&c.B_st!==o.B_st&&xh(()=>{n.emit(fs.STREAM_TYPE_CHANGE,o.peer_uid,o.B_st)})}),n._statsCollector.updateTrafficStats(i)})()}getJoinMessage(n){if(!this.joinInfo||!this.key)throw new Pe(Te.UNEXPECTED_ERROR,"can not generate join message, no join info");const i=Object.assign({},this.joinInfo.apResponse);let o=Bt("REPORT_APP_SCENARIO");if("string"!=typeof o)try{o=JSON.stringify(o)}catch{o=void 0}o&&o.length>128&&(o=void 0);const c=Hg({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:ll,browser:navigator.userAgent,process_id:Bt("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:i,extend:Bt("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:o,attributes:{userAttributes:{enablePublishedUserList:Bt("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:Bt("MAX_SUBSCRIPTION")}},join_ts:this.joinGatewayStartTime},n);return this.joinInfo.stringUid&&(c.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(c.aes_mode=this.joinInfo.aesmode,Bt("ENCRYPT_AES")?(c.aes_secret=this.joinInfo.aespassword,c.aes_encrypt=!0):c.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(c.aes_salt=this.joinInfo.aessalt)),i.addresses[this.signal.websocket.currentURLIndex]&&(c.ap_response.ticket=i.addresses[this.signal.websocket.currentURLIndex].ticket,delete i.addresses),void 0!==this.joinInfo.defaultVideoStream&&(c.default_video_stream=this.joinInfo.defaultVideoStream),c}getRejoinMessage(){if(!this.joinInfo)throw new Pe(Te.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){var n=this;this.signal.on(Zr.WS_RECONNECT_WAITTING_FINISH,i=>{["tryNext","recover"].includes(i)&&this.joinInfo&&Kt.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(Zr.WS_RECONNECT_CREATE_CONNECTION,i=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Zr.WS_RECONNECTING,i=>{this.joinInfo&&Kt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i||ps.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Kt.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Zr.WS_CLOSED,i=>{let o;switch(i){case Ls.LEAVE:o=ps.LEAVE;break;case Ls.UID_BANNED:case Ls.IP_BANNED:case Ls.CHANNEL_BANNED:case Ls.SERVER_ERROR:o=ps.SERVER_ERROR;break;case Ls.FALLBACK:o=ps.FALLBACK;break;default:o=ps.NETWORK_ERROR}oe.debug("[signal] websocket closed, reason: ".concat(o||"undefined -> "+ps.NETWORK_ERROR)),yo("debug",this,"ws_closed","reason: ".concat(i)),this.joinInfo&&Kt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:i===Ls.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:o}),this._disconnectedReason=i,i!==Ls.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Zr.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(oe.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),xn("debug",this,"patch to send set client role, role: ".concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Kt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint)){const i=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!i)return oe.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(i)),void xn("error",this,"set local access point after joined failed: ".concat(i));cc("EVENT_REPORT_DOMAIN",i[1]),cc("EVENT_REPORT_BACKUP_DOMAIN",i[1]),cc("LOG_UPLOAD_SERVER","".concat(i[1],":6444"))}}),this.signal.on(Fi.ON_UPLINK_STATS,i=>{this._statsCollector.updateUplinkStats(i)}),this.signal.on(Zr.REQUEST_RECOVER,(i,o,c)=>{if(!this.joinInfo)return c(new Pe(Te.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));i&&(this.joinInfo.multiIP=i,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,jd(this,fs.REQUEST_NEW_GATEWAY_LIST).then(o).catch(c)}),this.signal.on(Zr.REQUEST_JOIN_INFO,function(){var i=L(function*(o){var c;n.updateTurnConfigFromSignal();const{iceParameters:h,dtlsParameters:g,rtpCapabilities:p}=yield jd(n,fs.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(c=n.joinInfo)||void 0===c?void 0:c.turnServer});o(n.getJoinMessage({ortc:{iceParameters:h,dtlsParameters:g,rtpCapabilities:p,version:"2"}}))});return function(o){return i.apply(this,arguments)}}()),this.signal.on(Zr.REQUEST_REJOIN_INFO,i=>{i(this.getRejoinMessage())}),this.signal.on(Zr.REPORT_JOIN_GATEWAY,(i,o)=>{this.joinInfo&&(Kt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:i,addr:o,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1)}),this.signal.on(Zr.IS_P2P_DISCONNECTED,i=>{i(HS(this,fs.IS_P2P_DISCONNECTED))}),this.signal.on(Zr.DISCONNECT_P2P,()=>{this.emit(fs.DISCONNECT_P2P)}),this.signal.on(Zr.NEED_RENEW_SESSION,()=>{this.emit(fs.NEED_RENEW_SESSION)}),this.signal.on(Zr.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Zr.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Zr.JOIN_RESPONSE,i=>{const o=this.getGatewayIpPort();o?this.emit(fs.JOIN_RESPONSE,i,o.ip,o.port):this.emit(fs.JOIN_RESPONSE,i)})}tryUnsubBeforeResub(n,i){var o=this;return L(function*(){try{yield o.signal.request(hi.UNSUBSCRIBE,{p2p_id:o.store.p2pId,stream_id:n,ortc:[i]},!0)}catch(c){throw oe.warning("unsubscribe warning",c),Yt("warning",o,"tryUnsubBeforeResub",n,c.toString()),c}})()}tryUnpubBeforeRepub(n,i){var o=this;return L(function*(){try{yield o.signal.request(hi.UNPUBLISH,{stream_id:n,ortc:i},!0)}catch(c){throw oe.warning("unpublish warning: ",c),Yt("warning",o,"tryUnpubBeforeRepub",n,c.toString()),c}})()}tryMassUnsubBeforeResub(n){var i=this;return L(function*(){const o={users:n.map(c=>({stream_id:c.stream_id,stream_type:c.stream_type}))};try{yield i.signal.request(hi.UNSUBSCRIBE_STREAMS,o,!0)}catch(c){throw oe.warning("massUnsubscribe warning",c),Yt("warning",i,"tryUnsubAllBeforeResub",n.map(h=>h.stream_id),c.toString()),c}})()}muteLocal(n,i){var o=this;return L(function*(){const c={action:n.find(h=>h.stream_type===ss.Audio)?"mute_local_audio":"mute_local_video",p2p_id:o.store.p2pId,ortc:n,stream_id:i};try{yield o.signal.request(hi.CONTROL,c,!0,!0)}catch(h){throw oe.warning("gateway unmuteLocal warning: ",h),Yt("warning",o,"muteLocal",i,h.toString()),h}})()}unmuteLocal(n,i){var o=this;return L(function*(){const c={action:n.find(h=>h.stream_type===ss.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:o.store.p2pId,ortc:n,stream_id:i};try{yield o.signal.request(hi.CONTROL,c,!0,!0)}catch(h){throw oe.warning("gateway muteLocal warning: ",h),Yt("warning",o,"unmuteLocal",i,h.toString()),h}})()}uploadStats(n,i){this.signal.upload(n,i)}getSignalRTT(){return this.signal.rtt}restartICE(n){var i=this;return L(function*(){const o={p2p_id:i.store.p2pId,stream_id:i.store.uid,ortc:n};try{const c=yield i.signal.request(hi.RESTART_ICE,o,!0),h=i.getGatewayIpPort();return{restartICEResponse:c,gatewayIP:h?.ip,gatewayPort:h?.port}}catch(c){throw oe.warning("P2PChannel.restartICE warning: ",c),Yt("warning",i,"restartICE",void 0,c.toString()),c}})()}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,ps.P2P_FAILED)}getGatewayIpPort(){var n;if(!Bt("GATEWAY_WSS_ADDRESS")&&null!==(n=this.joinInfo)&&void 0!==n&&n.gatewayAddrs){const i=this.joinInfo.gatewayAddrs[this.signal.currentURLIndex];return(i.ip||i.ip6)&&i.port?i.ip6?{ip:i.ip6,port:i.port}:{ip:i.ip,port:i.port}:void 0}}})||k4;function SQ(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function CQ(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?SQ(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):SQ(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}!function(){var n;function i(Je){var at=0;return function(){return at<Je.length?{done:!1,value:Je[at++]}:{done:!0}}}var c,o="function"==typeof Object.defineProperties?Object.defineProperty:function(Je,at,Rt){return Je==Array.prototype||Je==Object.prototype||(Je[at]=Rt.value),Je},h=function(Je){Je=["object"==typeof globalThis&&globalThis,Je,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof W&&W];for(var at=0;at<Je.length;++at){var Rt=Je[at];if(Rt&&Rt.Math==Math)return Rt}throw Error("Cannot find global object")}(this);function g(Je,at){if(at)e:{var Rt=h;Je=Je.split(".");for(var cn=0;cn<Je.length-1;cn++){var Rn=Je[cn];if(!(Rn in Rt))break e;Rt=Rt[Rn]}(at=at(cn=Rt[Je=Je[Je.length-1]]))!=cn&&null!=at&&o(Rt,Je,{configurable:!0,writable:!0,value:at})}}function p(Je){return(Je={next:Je})[Symbol.iterator]=function(){return this},Je}function v(Je){var at=typeof Symbol<"u"&&Symbol.iterator&&Je[Symbol.iterator];return at?at.call(Je):{next:i(Je)}}if(g("Symbol",function(Je){function at(Rn,Vt){this.A=Rn,o(this,"description",{configurable:!0,writable:!0,value:Vt})}if(Je)return Je;at.prototype.toString=function(){return this.A};var Rt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",cn=0;return function Rn(Vt){if(this instanceof Rn)throw new TypeError("Symbol is not a constructor");return new at(Rt+(Vt||"")+"_"+cn++,Vt)}}),g("Symbol.iterator",function(Je){if(Je)return Je;Je=Symbol("Symbol.iterator");for(var at="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Rt=0;Rt<at.length;Rt++){var cn=h[at[Rt]];"function"==typeof cn&&"function"!=typeof cn.prototype[Je]&&o(cn.prototype,Je,{configurable:!0,writable:!0,value:function(){return p(i(this))}})}return Je}),"function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var _;e:{var y={};try{y.__proto__={a:!0},_=y.a;break e}catch{}_=!1}c=_?function(Je,at){if(Je.__proto__=at,Je.__proto__!==at)throw new TypeError(Je+" is not extensible");return Je}:null}var b=c;function C(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function w(Je){if(Je.m)throw new TypeError("Generator is already running");Je.m=!0}function P(Je,at){return Je.h=3,{value:at}}function j(Je){this.g=new C,this.G=Je}function G(Je,at,Rt,cn){try{var Rn=at.call(Je.g.j,Rt);if(!(Rn instanceof Object))throw new TypeError("Iterator result "+Rn+" is not an object");if(!Rn.done)return Je.g.m=!1,Rn;var Vt=Rn.value}catch(V){return Je.g.j=null,Je.g.s(V),Z(Je)}return Je.g.j=null,cn.call(Je.g,Vt),Z(Je)}function Z(Je){for(;Je.g.h;)try{var at=Je.G(Je.g);if(at)return Je.g.m=!1,{value:at.value,done:!1}}catch(Rt){Je.g.v=void 0,Je.g.s(Rt)}if(Je.g.m=!1,Je.g.l){if(at=Je.g.l,Je.g.l=null,at.F)throw at.D;return{value:at.return,done:!0}}return{value:void 0,done:!0}}function ae(Je){this.next=function(at){return Je.o(at)},this.throw=function(at){return Je.s(at)},this.return=function(at){return function(Rt,cn){w(Rt.g);var Rn=Rt.g.j;return Rn?G(Rt,"return"in Rn?Rn.return:function(Vt){return{value:Vt,done:!0}},cn,Rt.g.return):(Rt.g.return(cn),Z(Rt))}(Je,at)},this[Symbol.iterator]=function(){return this}}function fe(Je,at){return at=new ae(new j(at)),b&&Je.prototype&&b(at,Je.prototype),at}if(C.prototype.o=function(Je){this.v=Je},C.prototype.s=function(Je){this.l={D:Je,F:!0},this.h=this.C||this.u},C.prototype.return=function(Je){this.l={return:Je},this.h=this.u},j.prototype.o=function(Je){return w(this.g),this.g.j?G(this,this.g.j.next,Je,this.g.o):(this.g.o(Je),Z(this))},j.prototype.s=function(Je){return w(this.g),this.g.j?G(this,this.g.j.throw,Je,this.g.o):(this.g.s(Je),Z(this))},g("Array.prototype.entries",function(Je){return Je||function(){return function(at,Rt){at instanceof String&&(at+="");var cn=0,Rn=!1,Vt={next:function(){if(!Rn&&cn<at.length){var V=cn++;return{value:Rt(V,at[V]),done:!1}}return Rn=!0,{done:!0,value:void 0}}};return Vt[Symbol.iterator]=function(){return Vt},Vt}(this,function(at,Rt){return[at,Rt]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var be=function(Je,at){for(var Rt=0;Rt<Je.length;Rt++)at(Je[Rt])},Ce=function(Je){return Je.replace(/\r?\n|\r/g,"\r\n")},it=function(Je,at,Rt){return at instanceof Blob?(Rt=void 0!==Rt?String(Rt+""):"string"==typeof at.name?at.name:"blob",at.name===Rt&&"[object Blob]"!==Object.prototype.toString.call(at)||(at=new File([at],Rt)),[String(Je),at]):[String(Je),String(at)]},wt=function(Je,at){if(Je.length<at)throw new TypeError(at+" argument required, but only "+Je.length+" present.")},bt="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,Pt=bt.FormData,En=bt.XMLHttpRequest&&bt.XMLHttpRequest.prototype.send,pn=bt.Request&&bt.fetch,un=bt.navigator&&bt.navigator.sendBeacon,yt=bt.Element&&bt.Element.prototype,Ge=bt.Symbol&&Symbol.toStringTag;Ge&&(Blob.prototype[Ge]||(Blob.prototype[Ge]="Blob"),"File"in bt&&!File.prototype[Ge]&&(File.prototype[Ge]="File"));try{new File([],"")}catch{bt.File=function(at,Rt,cn){return at=new Blob(at,cn||{}),Object.defineProperties(at,{name:{value:Rt},lastModified:{value:+(cn&&void 0!==cn.lastModified?new Date(cn.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Ge&&Object.defineProperty(at,Ge,{value:"File"}),at}}var ot=function(Je){return Je.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},_t=function(Je){this.i=[];var at=this;Je&&be(Je.elements,function(Rt){if(Rt.name&&!Rt.disabled&&"submit"!==Rt.type&&"button"!==Rt.type&&!Rt.matches("form fieldset[disabled] *"))if("file"===Rt.type){var cn=Rt.files&&Rt.files.length?Rt.files:[new File([],"",{type:"application/octet-stream"})];be(cn,function(Rn){at.append(Rt.name,Rn)})}else"select-multiple"===Rt.type||"select-one"===Rt.type?be(Rt.options,function(Rn){!Rn.disabled&&Rn.selected&&at.append(Rt.name,Rn.value)}):"checkbox"===Rt.type||"radio"===Rt.type?Rt.checked&&at.append(Rt.name,Rt.value):(cn="textarea"===Rt.type?Ce(Rt.value):Rt.value,at.append(Rt.name,cn))})};if((n=_t.prototype).append=function(Je,at,Rt){wt(arguments,2),this.i.push(it(Je,at,Rt))},n.delete=function(Je){wt(arguments,1);var at=[];Je=String(Je),be(this.i,function(Rt){Rt[0]!==Je&&at.push(Rt)}),this.i=at},n.entries=function Je(){var at,Rt=this;return fe(Je,function(cn){if(1==cn.h&&(at=0),3!=cn.h)return at<Rt.i.length?cn=P(cn,Rt.i[at]):(cn.h=0,cn=void 0),cn;at++,cn.h=2})},n.forEach=function(Je,at){wt(arguments,1);for(var Rt=v(this),cn=Rt.next();!cn.done;cn=Rt.next()){var Rn=v(cn.value);cn=Rn.next().value,Rn=Rn.next().value,Je.call(at,Rn,cn,this)}},n.get=function(Je){wt(arguments,1);var at=this.i;Je=String(Je);for(var Rt=0;Rt<at.length;Rt++)if(at[Rt][0]===Je)return at[Rt][1];return null},n.getAll=function(Je){wt(arguments,1);var at=[];return Je=String(Je),be(this.i,function(Rt){Rt[0]===Je&&at.push(Rt[1])}),at},n.has=function(Je){wt(arguments,1),Je=String(Je);for(var at=0;at<this.i.length;at++)if(this.i[at][0]===Je)return!0;return!1},n.keys=function Je(){var at,Rt,Vt=this;return fe(Je,function(V){if(1==V.h&&(at=v(Vt),Rt=at.next()),3!=V.h)return Rt.done?void(V.h=0):P(V,v(Rt.value).next().value);Rt=at.next(),V.h=2})},n.set=function(Je,at,Rt){wt(arguments,2),Je=String(Je);var cn=[],Rn=it(Je,at,Rt),Vt=!0;be(this.i,function(V){V[0]===Je?Vt&&(Vt=!cn.push(Rn)):cn.push(V)}),Vt&&cn.push(Rn),this.i=cn},n.values=function Je(){var at,Rt,Rn,Vt=this;return fe(Je,function(V){if(1==V.h&&(at=v(Vt),Rt=at.next()),3!=V.h)return Rt.done?void(V.h=0):((Rn=v(Rt.value)).next(),P(V,Rn.next().value));Rt=at.next(),V.h=2})},_t.prototype._asNative=function(){for(var Je=new Pt,at=v(this),Rt=at.next();!Rt.done;Rt=at.next()){var cn=v(Rt.value);Rt=cn.next().value,cn=cn.next().value,Je.append(Rt,cn)}return Je},_t.prototype._blob=function(){var Je="----formdata-polyfill-"+Math.random(),at=[],Rt="--"+Je+'\r\nContent-Disposition: form-data; name="';return this.forEach(function(cn,Rn){return"string"==typeof cn?at.push(Rt+ot(Ce(Rn))+'"\r\n\r\n'+Ce(cn)+"\r\n"):at.push(Rt+ot(Ce(Rn))+'"; filename="'+ot(cn.name)+'"\r\nContent-Type: '+(cn.type||"application/octet-stream")+"\r\n\r\n",cn,"\r\n")}),at.push("--"+Je+"--"),new Blob(at,{type:"multipart/form-data; boundary="+Je})},_t.prototype[Symbol.iterator]=function(){return this.entries()},_t.prototype.toString=function(){return"[object FormData]"},yt&&!yt.matches&&(yt.matches=yt.matchesSelector||yt.mozMatchesSelector||yt.msMatchesSelector||yt.oMatchesSelector||yt.webkitMatchesSelector||function(Je){for(var at=(Je=(this.document||this.ownerDocument).querySelectorAll(Je)).length;0<=--at&&Je.item(at)!==this;);return-1<at}),Ge&&(_t.prototype[Ge]="FormData"),En){var bn=bt.XMLHttpRequest.prototype.setRequestHeader;bt.XMLHttpRequest.prototype.setRequestHeader=function(Je,at){bn.call(this,Je,at),"content-type"===Je.toLowerCase()&&(this.B=!0)},bt.XMLHttpRequest.prototype.send=function(Je){Je instanceof _t?(Je=Je._blob(),this.B||this.setRequestHeader("Content-Type",Je.type),En.call(this,Je)):En.call(this,Je)}}pn&&(bt.fetch=function(Je,at){return at&&at.body&&at.body instanceof _t&&(at.body=at.body._blob()),pn.call(this,Je,at)}),un&&(bt.navigator.sendBeacon=function(Je,at){return at instanceof _t&&(at=at._asNative()),un.call(this,Je,at)}),bt.FormData=_t}}();let M4=1;function IQ(n,i,o,c,h){M4+=1;const g={sid:o.sid,command:"convergeAllocateEdge",uid:"666",appId:o.appId,ts:Math.floor(Date.now()/1e3),seq:M4,requestId:M4,version:ll,cname:o.cname},p={service_name:i,json_body:JSON.stringify(g)};let v,_,y=n[0];return Hl(L(function*(){v=Date.now();const b=yield Vd(y,{data:p,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(_=Date.now()-v,0!==b.code){const P=new Pe(Te.UNEXPECTED_RESPONSE,"live streaming ap error, code"+b.code,{retry:!0,responseTime:_});throw oe.error(P.toString()),Yt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,P.toString()),P}const C=JSON.parse(b.json_body);if(200!==C.code){const P=new Pe(Te.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(C.code,", reason: ").concat(C.reason),{code:C.code,responseTime:_});throw oe.error(P.toString()),Yt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,P.toString()),P}if(!C.servers||0===C.servers.length){const P=new Pe(Te.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:C.code,responseTime:_});throw oe.error(P.toString()),Yt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,P.toString()),P}const w=(j=i,{addressList:(P=C).servers.map(G=>"wss://".concat(G.address.replace(/\./g,"-"),".").concat(Bt("WORKER_DOMAIN"),":").concat(G.wss,"?serviceName=").concat(encodeURIComponent(j))),workerToken:P.workerToken,vid:P.vid});var P,j;return Bt("LIVE_STREAMING_ADDRESS")&&(w.addressList=Bt("LIVE_STREAMING_ADDRESS")instanceof Array?Bt("LIVE_STREAMING_ADDRESS"):[Bt("LIVE_STREAMING_ADDRESS")]),CQ(CQ({},w),{},{responseTime:_})}),(b,C)=>(Kt.apworkerEvent(o.sid,{success:!0,sc:200,serviceName:i,responseDetail:JSON.stringify(b.addressList),firstSuccess:0===C,responseTime:_,serverIp:n[C%n.length]}),!1),(b,C)=>(Kt.apworkerEvent(o.sid,{success:!1,sc:b.data&&b.data.code||200,serviceName:i,responseTime:_,serverIp:n[C%n.length]}),!!(b.code!==Te.OPERATION_ABORTED&&b.code!==Te.UNEXPECTED_RESPONSE||b.data&&b.data.retry)&&(y=n[(C+1)%n.length],!0)),h)}let x4=1;function TQ(n,i,o,c){let{url:h,areaCode:g}=n;Yt("debug",["AjaxAPI",i.clientId],"requestChooseServer",{url:h,areaCode:g});const p=Date.now(),[v,_]=B4(i,g,[Us.CHOOSE_SERVER]);let y=Vs.networkState;return Hl(L(function*(){y&&Vs.networkState===ku.OFFLINE&&Vs.onlineWaiter&&(yield Qn.race([Vs.onlineWaiter,dc(c&&c.maxRetryTimeout||Xo.maxRetryTimeout)])),y=Vs.networkState;const b=yield Vd(h,{data:v,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0);Kt.reportResourceTiming(h,i.sid),L4(b,h,i,p,[Us.CHOOSE_SERVER]);const C=iL(b,Us.CHOOSE_SERVER);return M1(C),C9(C,h)}),b=>(b&&Kt.joinChooseServer(i.sid,{lts:p,succ:!0,csAddr:h,opid:_,serverList:b.gatewayAddrs.map(C=>C.address),ec:null,cid:b.cid.toString(),uid:b.uid.toString(),csIp:b.csIp,unilbsServerIds:[Us.CHOOSE_SERVER].toString()}),!1),b=>b.code!==Te.OPERATION_ABORTED&&(b.code===Te.CAN_NOT_GET_GATEWAY_SERVER?b.data.retry:(Kt.joinChooseServer(i.sid,{lts:p,succ:!1,csAddr:h,serverList:null,opid:_,ec:b.code,csIp:b.data&&b.data.csIp,unilbsServerIds:[Us.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:y})}),oe.warning("[".concat(i.clientId,"] Choose server network error, retry"),b),xn("warning",["AjaxAPI",i.clientId],"Choose server network error, retry, ".concat(b)),!0)),c)}function wQ(n,i,o,c){let{url:h,areaCode:g,serviceIds:p}=n;Yt("debug",["AjaxAPI",i.clientId],"requestMultiUnilbs",{url:h,areaCode:g,serviceIds:p});const v=Date.now(),[_,y]=B4(i,g,p);let b;return Hl(L(function*(){b&&Vs.networkState===ku.OFFLINE&&Vs.onlineWaiter&&(yield Qn.race([Vs.onlineWaiter,dc(c&&c.maxRetryTimeout||Xo.maxRetryTimeout)])),b=Vs.networkState;const C=yield Vd(h,{data:_,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0);Kt.reportResourceTiming(h,i.sid),L4(C,h,i,v,p);const w=iL(C,Us.CHOOSE_SERVER),P=iL(C,"proxy5"===i.cloudProxyServer?Us.CLOUD_PROXY_5:"proxy3"===i.cloudProxyServer||"proxy4"===i.cloudProxyServer?Us.CLOUD_PROXY:Us.CLOUD_PROXY_FALLBACK);return M1(w),{gatewayInfo:C9(w,h),proxyInfo:P,url:h}}),C=>(C.gatewayInfo&&Kt.joinChooseServer(i.sid,{lts:v,succ:!0,csAddr:h,serverList:C.gatewayInfo.gatewayAddrs.map(w=>w.address),ec:null,opid:y,cid:C.gatewayInfo.cid.toString(),uid:C.gatewayInfo.uid.toString(),csIp:C.gatewayInfo.csIp,unilbsServerIds:p.toString()}),C.proxyInfo&&Kt.joinWebProxyAP(i.sid,{lts:v,sucess:1,apServerAddr:h,turnServerAddrList:C.proxyInfo.addresses.map(w=>w.ip).join(","),errorCode:null,eventType:i.cloudProxyServer,unilbsServerIds:p.toString()}),!1),C=>C.code!==Te.OPERATION_ABORTED&&(C.code===Te.CAN_NOT_GET_GATEWAY_SERVER?C.data.retry:(Kt.joinWebProxyAP(i.sid,{lts:v,sucess:0,apServerAddr:h,turnServerAddrList:null,errorCode:C.code,eventType:i.cloudProxyServer,unilbsServerIds:p.toString(),extend:JSON.stringify({networkState:b})}),oe.warning("[".concat(i.clientId,"] multi unilbs network error, retry"),C),xn("warning",["AjaxAPI",i.clientId],"multi unilbs network error, retry, ".concat(C)),!0)),c)}const L4=(n,i,o,c,h)=>{const g=[],p=v=>{4096===v.flag?Kt.joinChooseServer(o.sid,{lts:c,succ:!1,csAddr:i,opid:n.opid,serverList:null,ec:v.error.message,csIp:v.error.data&&v.error.data.csIp,unilbsServerIds:h.toString()}):1048576!==v.flag&&4194304!==v.flag&&4194310!==v.flag||Kt.joinWebProxyAP(o.sid,{lts:c,sucess:0,apServerAddr:i,turnServerAddrList:null,errorCode:v.error.code,eventType:o.cloudProxyServer,unilbsServerIds:h.toString()})};if(n.response_body.forEach(v=>{const _=v.buffer.code;if(23===v.uri&&0===_&&!v.buffer.edges_services)if(4194310===v.buffer.flag)oe.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),v.buffer.edges_services=[];else{const y={error:new Pe(Te.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:v.buffer.flag};g.push(y),p(y)}if(0!==_){const y=N1(_),b={error:new Pe(Te.CAN_NOT_GET_GATEWAY_SERVER,y.desc,{retry:y.retry,csIp:n.detail[502]}),flag:v.buffer.flag};4194310===v.buffer.flag?oe.warning(b.error.toString()):g.push(b),p(b)}}),g.length)throw oe.warning("[".concat(o.clientId,"] multi unilbs ").concat(i," failed, ").concat(g.map(v=>"flag: ".concat(v.flag,", message: ").concat(v.error.message,", retry: ").concat(v.error.data.retry)).join(" | "))),Yt("warning",["AjaxAPI",o.clientId],"checkMultiUnilbsResponseValid",{url:i},g.map(v=>({flag:v.flag,message:v.error.message,retry:v.error.data.retry}))),new Pe(Te.CAN_NOT_GET_GATEWAY_SERVER,g.map(v=>"flag: ".concat(v.flag,", message: ").concat(v.error.message)).join(" | "),{retry:!!g.find(v=>v.error.data.retry),csIp:n.detail[502]})},M1=n=>{if(n.addresses&&0===n.addresses.length&&0===n.code)throw new Pe(Te.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(Bt("GATEWAY_ADDRESS")&&Bt("GATEWAY_ADDRESS").length>0){oe.debug("assign gateway address to",Bt("GATEWAY_ADDRESS")),xn("debug",["AjaxAPI"],"assign gateway address to ".concat(JSON.stringify(Bt("GATEWAY_ADDRESS"))));const i=Bt("GATEWAY_ADDRESS").map(o=>({ip:o.ip,port:o.port,ticket:n.addresses[0]&&n.addresses[0].ticket}));n.addresses=i}},RQ=(n,i)=>{if(n.response_body&&n.response_body.length){const o=n.response_body[0];if(0!==o.buffer.code){const c=N1(o.buffer.code);throw new Pe(Te.UPDATE_TICKET_FAILED,"[".concat(o.buffer.code,"]: ").concat(c.desc),{retry:c.retry})}return o.buffer.ticket}throw oe.debug("update ticket request received ap response without response body:",i),xn("debug",["AjaxAPI"],"update ticket request received ap response without response body: ".concat(i)),new Pe(Te.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},B4=(n,i,o)=>{const c=Math.floor(1e12*Math.random()),h={appid:n.appId,client_ts:Date.now(),opid:c,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:i,12:Bt("USE_NEW_TOKEN")?"1":void 0},key:n.token,service_ids:o,uid:n.uid||0}}]};h.request_bodies.forEach(p=>{n.multiIP&&n.multiIP.gateway_ip&&(p.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const g=new FormData;return g.append("request",JSON.stringify(h)),[g,c]},OQ=(n,i)=>{const o=Math.floor(1e12*Math.random()),c={appid:n.appId,client_ts:Date.now(),opid:o,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:i,uid:n.uid||0,edges_services:n.apResponse.addresses.map(g=>({ip:g.ip,port:g.port}))}}]},h=new FormData;return h.append("request",JSON.stringify(c)),[h,o]};let VL=0;const x1=()=>{const n=Bt("AREAS");return 0===n.length&&n.push(vi.GLOBAL),Da(n).call(n,(i,o,c)=>{const h=DQ(o);return h?0===c?h:"".concat(i,",").concat(h):i},"")},DQ=n=>n===vi.OVERSEA?"".concat(Fs.ASIA,",").concat(Fs.EUROPE,",").concat(Fs.AFRICA,",").concat(Fs.NORTH_AMERICA,",").concat(Fs.SOUTH_AMERICA,",").concat(Fs.OCEANIA):Fs[n],l2={GLOBAL:{ASIA:[vi.CHINA,vi.JAPAN,vi.INDIA,vi.KOREA,vi.HKMC],EUROPE:[],NORTH_AMERICA:[vi.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},jL=Object.keys(l2[vi.GLOBAL]),F4=[vi.CHINA,vi.NORTH_AMERICA,vi.EUROPE,vi.ASIA,vi.JAPAN,vi.INDIA,vi.OCEANIA,vi.SOUTH_AMERICA,vi.AFRICA,vi.KOREA,vi.HKMC,vi.US];function L1(n,i,o,c){return U4.apply(this,arguments)}function U4(){return U4=L(function*(n,i,o,c){return{gatewayInfo:yield(g=L(function*(p,v,_,y){let b=null;const C=[],w=function(){var j=L(function*(){const G=Bt("WEBCS_DOMAIN").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(fe=>({url:p.proxyServer?"https://".concat(p.proxyServer,"/ap/?url=").concat(fe+"/api/v2/transpond/webrtc?v=2"):"https://".concat(fe,"/api/v2/transpond/webrtc?v=2"),areaCode:x1()})),Z=y.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:G.map(fe=>fe.url)}),ae=yield GS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:G,asyncMapHandler:fe=>(oe.debug("[".concat(p.clientId,"] Connect to choose_server:"),fe.url),TQ(fe,p,v,_)),allFailedhandler:fe=>{throw y.recordJoinChannelService({endTs:Date.now(),status:"error",errors:fe},Z),fe[0]},promisesCollector:C});return y.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),ae});return function(){return j.apply(this,arguments)}}(),P=function(){var j=L(function*(){if(yield dc(1e3),null!==b)return b;const G=Bt("WEBCS_DOMAIN_BACKUP_LIST").map(fe=>({url:p.proxyServer?"https://".concat(p.proxyServer,"/ap/?url=").concat(fe+"/api/v2/transpond/webrtc?v=2"):"https://".concat(fe,"/api/v2/transpond/webrtc?v=2"),areaCode:x1()})),Z=y.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:G.map(fe=>fe.url)}),ae=yield GS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:G,asyncMapHandler:fe=>(oe.debug("[".concat(p.clientId,"] Connect to backup choose_server:"),fe.url),TQ(fe,p,v,_)),allFailedhandler:fe=>{throw y.recordJoinChannelService({endTs:Date.now(),status:"error",errors:fe},Z),fe[0]},promisesCollector:C});return y.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),ae});return function(){return j.apply(this,arguments)}}();try{return b=yield QS([w(),P()]),C.length&&C.forEach(j=>j.cancel&&"function"==typeof j.cancel&&j.cancel()),b}catch(j){throw j[0]}}),function(p,v,_,y){return g.apply(this,arguments)})(n,i,o,c)};var g}),U4.apply(this,arguments)}function V4(n,i,o,c,h){return d2.apply(this,arguments)}function d2(){return d2=L(function*(n,i,o,c,h){const g=n.cloudProxyServer;if("disabled"===g){if(!c)return;if(n.useLocalAccessPoint)return yield L1(n,i,o,h);if(Bt("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:v,proxyInfo:_}=yield j4(n,i,o,h);return n.turnServer&&"auto"!==n.turnServer.mode?(xn("debug",["Server",n.clientId],"do not set fallback turn because of already having turnserver"),{gatewayInfo:v}):(n.turnServer={mode:"manual",servers:_.map(y=>({turnServerURL:y.address,tcpport:y.tcpport||Js.tcpport,udpport:y.udpport||Js.udpport,username:y.username||Js.username,password:y.password||Js.password,forceturn:Bt("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))},{gatewayInfo:v})}return yield L1(n,i,o,h)}let p;if(["443only","normal"].includes(g)){let v;c?"normal"!==g?[v,p]=yield Qn.all([p2(n,i,o),L1(n,i,o,h)]):(v=yield p2(n,i,o),n.proxyServer=v.addresses[0],Kt.setProxyServer(n.proxyServer),oe.setProxyServer(n.proxyServer),Iy(n.proxyServer),p=yield L1(n,i,o,h)):(p=void 0,"normal"!==g?v=yield p2(n,i,o):(v=yield p2(n,i,o),n.proxyServer=v.addresses[0],Kt.setProxyServer(n.proxyServer),oe.setProxyServer(n.proxyServer),Iy(n.proxyServer))),n.turnServer={mode:"manual",servers:v.addresses.map(_=>({turnServerURL:_,tcpport:v.serverResponse.tcpport?v.serverResponse.tcpport:Js.tcpport,udpport:v.serverResponse.udpport?v.serverResponse.udpport:Js.udpport,username:v.serverResponse.username||Js.username,password:v.serverResponse.password||Js.password,forceturn:!0,security:!1}))}}else{const{proxyInfo:v,gatewayInfo:_}=yield j4(n,i,o,h);p={gatewayInfo:_},n.turnServer={mode:"manual",servers:v.map(y=>({turnServerURL:y.address,tcpport:"proxy3"===g?void 0:y.tcpport?y.tcpport:Js.tcpport,udpport:"proxy4"===g?void 0:y.udpport?y.udpport:Js.udpport,username:y.username||Js.username,password:y.password||Js.password,forceturn:"proxy4"!==g,security:"proxy5"===g}))}}return oe.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(g)),Yt("debug",["Server",n.clientId],"setCloudProxyServerAndGetServerInfo",{proxyServer:n.proxyServer,mode:n.cloudProxyServer}),p}),d2.apply(this,arguments)}function h2(n,i,o,c,h){return QL.apply(this,arguments)}function QL(){return QL=L(function*(n,i,o,c,h){let p=[];p=Bt("ACCOUNT_REGISTER").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(i.proxyServer?_=>"https://".concat(i.proxyServer,"/ap/?url=").concat(_+"/api/v1"):_=>"https://".concat(_,"/api/v1"));const v=h?.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:p});try{const _=yield(y=L(function*(b,C,w,P,j){const G=Date.now(),Z={sid:w.sid,opid:10,appid:w.appId,string_uid:C};let ae=b[0];const fe=yield Hl(()=>Vd(ae+"".concat(-1===ae.indexOf("?")?"?":"&","action=stringuid"),{data:Z,cancelToken:P,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(be,Ce)=>{if(0===be.code){if(be.uid<=0||be.uid>=Math.pow(2,32))throw oe.error("Invalid Uint Uid ".concat(C," => ").concat(be.uid),be),Yt("error",["AjaxAPI"],"requestUserAccount","Invalid Uint Uid ".concat(C," => ").concat(be.uid,", ").concat(be)),Kt.reqUserAccount(Z.sid,{lts:G,success:!1,serverAddr:ae,stringUid:Z.string_uid,uid:be.uid,errorCode:Te.INVALID_UINT_UID_FROM_STRING_UID,extend:Z}),new Pe(Te.INVALID_UINT_UID_FROM_STRING_UID);return Kt.reqUserAccount(Z.sid,{lts:G,success:!0,serverAddr:ae,stringUid:Z.string_uid,uid:be.uid,errorCode:null,extend:Z}),!1}const it=N1(be.code);return it.retry&&(ae=b[(Ce+1)%b.length]),Kt.reqUserAccount(Z.sid,{lts:G,success:!1,serverAddr:ae,stringUid:Z.string_uid,uid:be.uid,errorCode:it.desc,extend:Z}),it.retry},(be,Ce)=>be.code!==Te.OPERATION_ABORTED&&(Kt.reqUserAccount(Z.sid,{lts:G,success:!1,serverAddr:ae,stringUid:Z.string_uid,uid:null,errorCode:be.code,extend:Z}),ae=b[(Ce+1)%b.length],!0),j);if(0!==fe.code){const be=N1(fe.code);throw new Pe(Te.UNEXPECTED_RESPONSE,be.desc)}return fe}),function(b,C,w,P,j){return y.apply(this,arguments)})(p,n,i,o,c);return h?.recordJoinChannelService({status:"success",endTs:Date.now()},v),_.uid}catch(_){throw h?.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[_]},v),_}var y}),QL.apply(this,arguments)}function p2(n,i,o){return HL.apply(this,arguments)}function HL(){return HL=L(function*(n,i,o){let c=Date.now();const h=n.cloudProxyServer,g=Bt("normal"===h?"PROXY_CS":"WEBCS_DOMAIN").map(b=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(b+"/api/v1"):"https://".concat(b,"/api/v1"));if(["proxy3","proxy4","proxy5"].includes(h)){const b=g.map(P=>({url:P,areaCode:x1()}));let C=null;C=yield GS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:b,asyncMapHandler:P=>function(j,G,Z,ae){let{url:fe,areaCode:be}=j;const Ce=Date.now(),it={opid:133,flag:"proxy5"===G.cloudProxyServer?4194304:1048576,ts:+new Date,key:G.token,cname:G.cname,sid:G.sid,detail:{6:G.stringUid,11:be},uid:G.uid||0};return Hl(L(function*(){return yield Vd(fe,{data:it,cancelToken:Z,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}})}),wt=>{if(0===wt.code)return Kt.joinWebProxyAP(G.sid,{lts:Ce,sucess:1,apServerAddr:fe,turnServerAddrList:wt.addresses.map(Pt=>Pt.ip).join(","),errorCode:null,eventType:G.cloudProxyServer}),!1;const bt=N1(wt.code);throw new Pe(Te.CAN_NOT_GET_GATEWAY_SERVER,bt.desc,{retry:bt.retry})},wt=>wt.code!==Te.OPERATION_ABORTED&&(wt.code===Te.CAN_NOT_GET_GATEWAY_SERVER?(Kt.joinWebProxyAP(it.sid,{lts:Ce,sucess:0,apServerAddr:fe,turnServerAddrList:null,errorCode:wt.code,eventType:G.cloudProxyServer}),oe.warning("[".concat(G.clientId,"] proxy ap server ").concat(fe," failed, message: ").concat(wt.message,", retry: ").concat(wt.data.retry)),xn("warning",["AjaxAPI",G.clientId],"proxy ap server ".concat(fe," failed, message: ").concat(wt.message,", retry: ").concat(wt.data.retry)),wt.data.retry):(Kt.joinWebProxyAP(it.sid,{lts:Ce,sucess:0,apServerAddr:fe,turnServerAddrList:null,errorCode:wt.code,eventType:G.cloudProxyServer}),!0)),ae)}(P,n,i,o),allFailedhandler:()=>{throw oe.error("[".concat(n.clientId,"] can not get proxy server after trying several times")),new Pe(Te.CAN_NOT_GET_PROXY_SERVER)}});const w=C.addresses;if(!w||0===w.length)throw oe.error("[".concat(n.clientId,"] can not get proxy server, empty proxy server list")),new Pe(Te.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:w.map(P=>P.ip).map(Uk),serverResponse:{tcpport:w[0].port||443,udpport:w[0].port||Js.udpport,username:Js.username,password:Js.password}}}let p=null;p=yield GS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:g,asyncMapHandler:b=>function(C,w,P,j){const G=Date.now(),Z={command:"convergeAllocateEdge",sid:w.sid,appId:w.appId,token:w.token,uid:w.uid,cname:w.cname,ts:Math.floor(Date.now()/1e3),version:ll,seq:0,requestId:1};return Hl(L(function*(){return{res:yield Vd(C,{data:{service_name:"webrtc_proxy",json_body:JSON.stringify(Z)},cancelToken:P,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:C}}),ae=>{if(!ae.res.json_body)throw oe.debug("[".concat(w.clientId,"] Get proxy server failed: no json_body")),Yt("error",["AjaxAPI",w.clientId],"requestProxyServerList","Get proxy server failed: no json_body"),new Pe(Te.UNEXPECTED_RESPONSE,JSON.stringify(ae.res));const fe=JSON.parse(ae.res.json_body);if(200!==fe.code)throw oe.debug("[".concat(w.clientId,"] Get proxy server failed: response code [").concat(fe.code,"], reason [").concat(fe.reason,"]")),Yt("error",["AjaxAPI",w.clientId],"requestProxyServerList","Get proxy server failed: response code [".concat(fe.code,"], reason [").concat(fe.reason,"]")),new Pe(Te.UNEXPECTED_RESPONSE,JSON.stringify(ae.res));return oe.debug("[".concat(w.clientId,"] App return server length"),fe.servers.length),Yt("debug",["AjaxAPI",w.clientId],"requestProxyServerList","",{length:fe.servers.length}),!1},ae=>ae.code!==Te.OPERATION_ABORTED&&(Kt.requestProxyAppCenter(Z.sid,{lts:G,succ:!1,APAddr:C,workerManagerList:null,ec:ae.code,response:ae.message}),!0),j)}(b,n,i,o),allFailedhandler:()=>{throw oe.error("[".concat(n.clientId,"] can not get proxy server after trying several times")),new Pe(Te.CAN_NOT_GET_PROXY_SERVER)}});const v=JSON.parse(p.res.json_body).servers.map(tz);if("443only"===n.cloudProxyServer)return{addresses:v,serverResponse:{tcpport:443,udpport:Js.udpport,username:Js.username,password:Js.password}};Kt.requestProxyAppCenter(n.sid,{lts:c,succ:!0,APAddr:p.url,workerManagerList:JSON.stringify(v),ec:null,response:JSON.stringify(p.res)}),c=Date.now();const _=v.map(b=>function(C,w,P,j){const G=Date.now();let Z=C;C.startsWith("http")||(Z="https://".concat(C,":4000/v2/machine"));const ae={command:"request",gatewayType:"http",appId:w.appId,cname:w.cname,uid:(w.uid||"").toString(),sdkVersion:"2.3.1",sid:w.sid,seq:1,ts:Date.now(),requestId:3,clientRequest:{appId:w.appId,cname:w.cname,uid:(w.uid||"").toString(),sid:w.sid}};return Hl(L(function*(){return{res:yield Vd(Z,{data:ae,cancelToken:P}),url:C}}),fe=>{if(!fe.res.serverResponse)throw new Pe(Te.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},fe=>fe.code!==Te.OPERATION_ABORTED&&(Kt.requestProxyWorkerManager(ae.sid,{lts:G,succ:!1,workerManagerAddr:C,ec:fe.code,response:fe.message}),!0),j)}(b,n,i,o));let y=null;try{y=yield QS(_)}catch{throw oe.error("[".concat(n.clientId,"] can not get worker manager after trying several times")),new Pe(Te.CAN_NOT_GET_PROXY_SERVER)}return _.forEach(b=>b.cancel()),Kt.requestProxyWorkerManager(n.sid,{lts:c,succ:!0,workerManagerAddr:y.url,ec:null,response:JSON.stringify(y.res)}),{addresses:[y.url],serverResponse:y.res.serverResponse}}),HL.apply(this,arguments)}function GL(){return GL=L(function*(n,i,o){const c=Bt("CDS_AP").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(v=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(v+"/api/v1"):"https://".concat(v,"/api/v1?action=config")).map(v=>function(_,y,b,C){const w=zi(),P={flag:64,cipher_method:0,features:{device:w.name,system:w.os,system_general:navigator.userAgent,vendor:y.appId,version:ll,cname:y.cname,sid:y.sid,session_id:y.sid,detail:"",proxyServer:y.proxyServer}};return Hl(()=>Vd(_,{data:P,timeout:1e3,cancelToken:b,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,j=>j.code!==Te.OPERATION_ABORTED,C)}(v,n,i,o));let h=null,g=null,p={};try{h=yield QS(c)}catch(v){if(v.code===Te.OPERATION_ABORTED)throw v;g=v}if(c.forEach(v=>v.cancel()),Kt.reportApiInvoke(n.sid,{name:hr.REQUEST_CONFIG_DISTRIBUTE,options:{error:g,res:h}}).onSuccess(),h&&h.test_tags)try{p=function(v){if(!v.test_tags)return{};const _=v.test_tags,y=Object.keys(_),b={};return y.forEach(C=>{var w;const P=by(w=C.slice(4)).call(w),j=JSON.parse(_[C])[1];b[P]=j}),b}(h)}catch{}return p}),GL.apply(this,arguments)}function j4(n,i,o,c){return WL.apply(this,arguments)}function WL(){return WL=L(function*(n,i,o,c){const h=Bt("PROXY_SERVER_TYPE3"),g=(P,j)=>{let G=h;return Array.isArray(G)&&(G=j%2==0?h[1]:h[0]),"https://".concat(G,"/ap/?url=").concat(P)};let p=null;const v=[],_=function(){var P=L(function*(){const j=Bt("WEBCS_DOMAIN").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map((ae,fe)=>({url:"disabled"===n.cloudProxyServer||"fallback"===n.cloudProxyServer?"https://".concat(ae,"/api/v2/transpond/webrtc?v=2"):g("".concat(ae,"/api/v2/transpond/webrtc?v=2"),fe),areaCode:x1(),serviceIds:[Us.CHOOSE_SERVER,"proxy5"===n.cloudProxyServer?Us.CLOUD_PROXY_5:"proxy3"===n.cloudProxyServer||"proxy4"===n.cloudProxyServer?Us.CLOUD_PROXY:Us.CLOUD_PROXY_FALLBACK]})),G=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:j.map(ae=>ae.url)}),Z=yield GS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:j,asyncMapHandler:ae=>(oe.debug("[".concat(n.clientId,"] Connect to choose_server:"),ae.url),wQ(ae,n,i,o)),allFailedhandler:ae=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ae},G),ae[0]},promisesCollector:v});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},G),Z});return function(){return P.apply(this,arguments)}}(),y=function(){var P=L(function*(){if(yield dc(1e3),null!==p)return p;const j=Bt("WEBCS_DOMAIN_BACKUP_LIST").map((ae,fe)=>({url:"disabled"===n.cloudProxyServer||"fallback"===n.cloudProxyServer?"https://".concat(ae,"/api/v2/transpond/webrtc?v=2"):g("".concat(ae,"/api/v2/transpond/webrtc?v=2"),fe),areaCode:x1(),serviceIds:[Us.CHOOSE_SERVER,"proxy5"===n.cloudProxyServer?Us.CLOUD_PROXY_5:"proxy3"===n.cloudProxyServer||"proxy4"===n.cloudProxyServer?Us.CLOUD_PROXY:Us.CLOUD_PROXY_FALLBACK]})),G=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:j.map(ae=>ae.url)}),Z=yield GS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:j,asyncMapHandler:ae=>(oe.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),ae.url),wQ(ae,n,i,o)),allFailedhandler:ae=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ae},G),ae[0]},promisesCollector:v});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},G),Z});return function(){return P.apply(this,arguments)}}();let b,C,w;try{({gatewayInfo:b,proxyInfo:C,url:w}=yield QS([_(),y()]))}catch(P){throw P[0]}if(v.length&&v.forEach(P=>P.cancel&&"function"==typeof P.cancel&&P.cancel()),!b||!C)throw new Pe(Te.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=w,"disabled"!==n.cloudProxyServer&&Array.isArray(h)&&w){const P=new E4(w).host;h.includes(P)&&(n.proxyServer=P,oe.setProxyServer(P),Kt.setProxyServer(P),Iy(P))}return p={gatewayInfo:b,proxyInfo:yield I9(C,b.uid)},p}),WL.apply(this,arguments)}function PQ(n,i,o,c){return KL.apply(this,arguments)}function KL(){return KL=L(function*(n,i,o,c){const h=Bt("UAP_AP").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(g=>i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v1?action=uap"):"https://".concat(g,"/api/v1?action=uap"));return yield IQ(h,n,i,o,c)}),KL.apply(this,arguments)}function f2(){return f2=L(function*(n,i,o){const c=Bt("UAP_AP").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(h=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(h+"/api/v1?action=uap"):"https://".concat(h,"/api/v1?action=uap")).map(h=>function(g,p,v,_){const y={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,ts:Date.now(),version:ll,cname:p.cname,uid:p.uid.toString(),requestId:x4,seq:x4};x4+=1;const b={service_name:"tele_channel",json_body:JSON.stringify(y)};return Hl(L(function*(){const C=yield Vd(g,{data:b,cancelToken:v,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==C.code){const P=new Pe(Te.UNEXPECTED_RESPONSE,"cross channel ap error, code"+C.code,{retry:!0});throw oe.error(P.toString()),Yt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,P.toString()),P}const w=JSON.parse(C.json_body);if(200!==w.code){const P=new Pe(Te.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(w.code,", reason: ").concat(w.reason));throw oe.error(P.toString()),Yt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,P.toString()),P}if(!w.servers||0===w.servers.length){const P=new Pe(Te.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw oe.error(P.toString()),Yt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,P.toString()),P}return{vid:w.vid,workerToken:w.workerToken,addressList:w.servers.map(P=>"wss://".concat(P.address.replace(/\./g,"-"),".").concat(Bt("WORKER_DOMAIN"),":").concat(P.wss))}}),void 0,C=>!!(C.code!==Te.OPERATION_ABORTED&&C.code!==Te.UNEXPECTED_RESPONSE||C.data&&C.data.retry),_)}(h,n,i,o));try{const h=yield QS(c);return c.forEach(g=>g.cancel()),h}catch(h){throw h[0]}}),f2.apply(this,arguments)}function Q4(){return Q4=L(function*(n,i,o){let c=null;const h=[],g=function(){var p=L(function*(v){const _=Bt(v?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(y=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(y+"/api/v2/transpond/webrtc?v=2"):"https://".concat(y,"/api/v2/transpond/webrtc?v=2"));return v&&(yield dc(1e3),null!==c)?c:yield GS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:_,asyncMapHandler:y=>(oe.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(v?"backup":""," choose_server:"),y),function(b,C,w,P){const[j]=OQ(C,[Us.CHOOSE_SERVER]);let G=Vs.networkState;return Hl(L(function*(){G&&Vs.networkState===ku.OFFLINE&&Vs.onlineWaiter&&(yield Qn.race([Vs.onlineWaiter,dc(P&&P.maxRetryTimeout||Xo.maxRetryTimeout)])),G=Vs.networkState;const Z=yield Vd(b,{data:j,cancelToken:w,headers:{"Content-Type":"multipart/form-data;"}},!0);return RQ(Z,b)}),()=>!1,Z=>Z.code!==Te.OPERATION_ABORTED&&(Z.code===Te.UPDATE_TICKET_FAILED?Z.data.retry:(oe.warning("[".concat(C.clientId,"] update ticket network error, retry"),Z),xn("warning",["AjaxAPI",C.clientId],"update ticket network error, retry, ".concat(Z)),!0)),P)}(y,n,i,o)),allFailedhandler:y=>{throw y[0]},promisesCollector:h})});return function(_){return p.apply(this,arguments)}}();try{return c=yield QS([g(!1),g(!0)]),h.length&&h.forEach(p=>p.cancel&&"function"==typeof p.cancel&&p.cancel()),c}catch(p){throw p[0]}}),Q4.apply(this,arguments)}var LQ;function H4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function BQ(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?H4(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):H4(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let FQ=ac("ConfigDistributeManager")(LQ=class extends is{constructor(){super(),q(this,"configs",void 0),q(this,"joinInfo",void 0),q(this,"cancelToken",void 0),q(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),q(this,"interval",void 0),q(this,"mutex",new cu("config-distribute")),q(this,"mutableParamsRead",!1)}startGetConfigDistribute(n,i){this.joinInfo=n,this.cancelToken=i,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},Bt("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}awaitConfigDistributeComplete(){var n=this;return L(function*(){!n.mutex.isLocked||(yield n.mutex.lock())()})()}updateConfigDistribute(){var n=this;return L(function*(){if(n.mutableParamsRead||(n.mutableParamsRead=!0,Kt.reportApiInvoke(null,{options:void 0,name:hr.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:sr.TRACER}).onSuccess(JSON.stringify(jU))),!n.joinInfo||!n.cancelToken||!n.retryConfig)return oe.debug("[config-distribute] get config distribute interrupted have no joininfo"),void Yt("debug",n,"updateConfigDistribute",void 0,"get config distribute interrupted have no joininfo");let i;const o=yield n.mutex.lock();try{i=yield function NQ(n,i,o){return GL.apply(this,arguments)}(n.joinInfo,n.cancelToken,n.retryConfig),oe.debug("[config-distribute] get config distribute",JSON.stringify(i)),Yt("debug",n,"updateConfigDistribute",i),i.limit_bitrate&&n.handleBitrateLimit(i.limit_bitrate),n.cacheGlobalParameterConfig(i),n.configs=i}catch(c){const h=new Pe(Te.NETWORK_RESPONSE_ERROR,c);oe.warning("[config-distribute] ".concat(h.toString())),Yt("warning",n,"updateConfigDistribute",void 0,c.toString())}finally{o()}})()}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(n){var i;(i=n)&&i.uplink&&i.id&&void 0!==i.uplink.max_bitrate&&void 0!==i.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==n.id&&this.emit(bv.UPDATE_BITRATE_LIMIT,n):this.emit(bv.UPDATE_BITRATE_LIMIT,n))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&BQ({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(n){var i;const o=GM(i=Object.keys(n).filter(h=>/^webrtc_ng_global_parameter/.test(h))).call(i);for(let h=0;h<o.length;h++)for(let g=o.length-1;g>h;g--){const p=o[g];if("number"==typeof n[p].__priority){const v=n[p].__priority,_=o[g-1];if("number"==typeof n[_].__priority){if(!(v>n[_].__priority))continue;{const y=p;o[g]=o[g-1],o[g-1]=y}}else{const y=p;o[g]=o[g-1],o[g-1]=y}}}const c={};o.forEach(h=>{const g=n[h],p=g.__expires;Object.keys(g).forEach(v=>{"__priority"===v||"__expires"===v||Object.prototype.hasOwnProperty.call(c,v)||(c[v]=BQ({value:g[v]},p&&{expires:p}))})});try{const h=JSON.stringify(c),g=window.btoa(h);window.localStorage.setItem("websdk_ng_global_parameter",g),oe.debug("Caching global parameters ".concat(h)),Yt("debug",this,"cacheGlobalParameterConfig",h)}catch(h){oe.error("Error caching global parameters:",h.message),Yt("error",this,"cacheGlobalParameterConfig",void 0,h.message)}}})||LQ;function G4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function B1(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?G4(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):G4(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class UQ extends is{constructor(i,o,c,h){super(),q(this,"spec",void 0),q(this,"token",void 0),q(this,"websocket",void 0),q(this,"pingpongTimer",void 0),q(this,"reconnectMode","retry"),q(this,"serviceMode",void 0),q(this,"reqId",0),q(this,"commandReqId",0),q(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),q(this,"handleWebSocketMessage",g=>{if(!g.data)return;const p=JSON.parse(g.data);p.requestId?this.emit("@".concat(p.requestId,"-").concat(p.sid),p):this.serviceMode===os.INJECT?this.emit(su.INJECT_STREAM_STATUS,p):(Kt.workerEvent(this.spec.sid,{actionType:"status",serverCode:p.code,workerType:this.serviceMode===os.TRANSCODE?1:2}),this.emit(su.PUBLISH_STREAM_STATUS,p))}),this.spec=o,this.token=i,this.serviceMode=h,this.websocket=new Yy("live-streaming",c),this.websocket.on(Mr.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Mr.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Mr.REQUEST_NEW_URLS,(g,p)=>{jd(this,su.REQUEST_NEW_ADDRESS).then(g).catch(p)}),this.websocket.on(Mr.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(i){return this.websocket.init(i)}request(i,o,c,h){var g=this;return L(function*(){g.reqId+=1,"request"===i&&(g.commandReqId+=1);const p=g.commandReqId,v=g.reqId;if(!v||!g.websocket)throw new Pe(Te.UNEXPECTED_ERROR);const _=B1({command:i,sdkVersion:"4.12.1"===ll?"0.0.1":ll,seq:v,requestId:v,allocate:c,cname:g.spec.cname,appId:g.spec.appId,sid:g.spec.sid,uid:g.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},o);if("closed"===g.websocket.state)throw new Pe(Te.WS_DISCONNECT);const y=()=>new Qn((P,j)=>{g.websocket.once(Mr.CLOSED,()=>j(new Pe(Te.WS_ABORT))),g.websocket.once(Mr.CONNECTED,P)});"connected"!==g.websocket.state&&(yield y()),_.clientRequest&&(_.clientRequest.workerToken=g.token);const b=new Qn((P,j)=>{const G=()=>{j(new Pe(Te.WS_ABORT))};g.websocket.once(Mr.RECONNECTING,G),g.websocket.once(Mr.CLOSED,G),g.once("@".concat(v,"-").concat(g.spec.sid),Z=>{P(Z)})});h&&Kt.workerEvent(g.spec.sid,B1(B1({},h),{},{requestId:p,actionType:"request",payload:JSON.stringify(o.clientRequest),serverCode:0,code:0}));const C=Date.now();g.websocket.sendMessage(_);let w=null;try{w=yield b}catch(P){if("closed"===g.websocket.state)throw P;return yield y(),yield g.request(i,o,c)}return h&&Kt.workerEvent(g.spec.sid,B1(B1({},h),{},{requestId:p,actionType:"response",payload:JSON.stringify(w.serverResponse),serverCode:w.code,success:200===w.code,responseTime:Date.now()-C})),200!==w.code&&g.handleResponseError(w),w})()}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const i="4.12.1"===ll?"0.0.1":ll;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:i,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(i){switch(i.code){case wo.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void oe.warning("live stream response already exists stream");case wo.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case wo.LIVE_STREAM_RESPONSE_BAD_STREAM:case wo.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Pe(Te.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:i.code}).throw();case wo.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===i.serverResponse.command||"UninjectStream"===i.serverResponse.command)return;throw new Pe(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case wo.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Pe(Te.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:i.code}).throw();case wo.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const o=new Pe(Te.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(su.WARNING,o,i.serverResponse.url)}case wo.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const o=new Pe(Te.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(su.WARNING,o,i.serverResponse.url)}case wo.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Pe(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case wo.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Pe(Te.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:i.code}).throw();case wo.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const o=new Pe(Te.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(su.WARNING,o,i.serverResponse.url)}case wo.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Pe(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:i.code}).throw();case wo.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Pe(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case wo.LIVE_STREAM_RESPONSE_WORKER_LOST:case wo.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===i.serverResponse.command||"UninjectStream"===i.serverResponse.command)return;throw new Pe(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case wo.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===i.serverResponse.command||"UninjectStream"===i.serverResponse.command)return;if("UpdateTranscoding"===i.serverResponse.command||"ControlStream"===i.serverResponse.command)return new Pe(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:i.code}).throw();throw new Pe(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case wo.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case wo.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case wo.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case wo.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Pe(Te.LIVE_STREAMING_CDN_ERROR,"",{code:i.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(sL)},6e3)}}function W4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function uu(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?W4(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):W4(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class VQ extends is{constructor(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xo,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xo;super(),q(this,"onLiveStreamWarning",void 0),q(this,"onLiveStreamError",void 0),q(this,"onInjectStatusChange",void 0),q(this,"spec",void 0),q(this,"retryTimeout",1e4),q(this,"connection",void 0),q(this,"httpRetryConfig",void 0),q(this,"wsRetryConfig",void 0),q(this,"streamingTasks",new Map),q(this,"isStartingStreamingTask",!1),q(this,"taskMutex",new cu("live-streaming")),q(this,"cancelToken",ul.CancelToken.source()),q(this,"transcodingConfig",void 0),q(this,"injectConfig",uu({},zD)),q(this,"injectLoopTimes",0),q(this,"uapResponse",void 0),q(this,"lastTaskId",1),q(this,"statusError",new Map),this.spec=i,this.httpRetryConfig=c,this.wsRetryConfig=o}setTranscodingConfig(i){var o=this;return L(function*(){const c=uu(uu({},GT),i);var v;66!==c.videoCodecProfile&&77!==c.videoCodecProfile&&100!==c.videoCodecProfile&&(oe.debug("[".concat(o.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(c.videoCodecProfile," -> 100")),c.videoCodecProfile=100),c.transcodingUsers||(c.transcodingUsers=c.userConfigs),c.transcodingUsers&&(c.transcodingUsers=c.transcodingUsers.map(v=>uu(uu(uu({},E6),v),{},{zOrder:v.zOrder?v.zOrder+1:1}))),lo((v=c).width)||Kr(v.width,"config.width",0,1e4),lo(v.height)||Kr(v.height,"config.height",0,1e4),lo(v.videoBitrate)||Kr(v.videoBitrate,"config.videoBitrate",1,1e6),lo(v.videoFrameRate)||Kr(v.videoFrameRate,"config.videoFrameRate"),lo(v.lowLatency)||Rp(v.lowLatency,"config.lowLatency"),lo(v.audioSampleRate)||fa(v.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),lo(v.audioBitrate)||Kr(v.audioBitrate,"config.audioBitrate",1,128),lo(v.audioChannels)||fa(v.audioChannels,"config.audioChannels",[1,2,3,4,5]),lo(v.videoGop)||Kr(v.videoGop,"config.videoGop"),lo(v.videoCodecProfile)||fa(v.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),lo(v.userCount)||Kr(v.userCount,"config.userCount",0,17),lo(v.backgroundColor)||Kr(v.backgroundColor,"config.backgroundColor",0,16777215),lo(v.userConfigExtraInfo)||Tc(v.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),v.transcodingUsers&&!lo(v.transcodingUsers)&&(TS(v.transcodingUsers,"config.transcodingUsers"),v.transcodingUsers.forEach((_,y)=>{QD(_.uid),lo(_.x)||Kr(_.x,"transcodingUser[".concat(y,"].x"),0,1e4),lo(_.y)||Kr(_.y,"transcodingUser[".concat(y,"].y"),0,1e4),lo(_.width)||Kr(_.width,"transcodingUser[".concat(y,"].width"),0,1e4),lo(_.height)||Kr(_.height,"transcodingUser[".concat(y,"].height"),0,1e4),lo(_.zOrder)||Kr(_.zOrder-1,"transcodingUser[".concat(y,"].zOrder"),0,100),lo(_.alpha)||Kr(_.alpha,"transcodingUser[".concat(y,"].alpha"),0,1,!1)})),lo(v.watermark)||HT(v.watermark,"watermark"),lo(v.backgroundImage)||HT(v.backgroundImage,"backgroundImage"),v.images&&!lo(v.images)&&(TS(v.images,"config.images"),v.images.forEach((_,y)=>{HT(_,"images[".concat(y,"]"))}));const h=[];c.images&&h.push(...c.images.map(v=>uu(uu(uu({},JM),v),{},{zOrder:255}))),c.backgroundImage&&(h.push(uu(uu(uu({},JM),c.backgroundImage),{},{zOrder:0})),delete c.backgroundImage),c.watermark&&(h.push(uu(uu(uu({},JM),c.watermark),{},{zOrder:255})),delete c.watermark),c.images=h,c.transcodingUsers&&(c.userConfigs=c.transcodingUsers.map(v=>uu({},v)),c.userCount=c.transcodingUsers.length,delete c.transcodingUsers);const g=(c.userConfigs||[]).map(v=>"number"==typeof v.uid?Qn.resolve(v.uid):h2(v.uid,o.spec,o.cancelToken.token,o.httpRetryConfig));if((yield Qn.all(g)).forEach((v,_)=>{c.userConfigs&&c.userConfigs[_]&&(c.userConfigs[_].uid=v)}),o.transcodingConfig=c,o.connection)try{var p;const v=yield o.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:o.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Lg(p=o.streamingTasks).call(p)).map(_=>_.taskId).join("#")});oe.debug("[".concat(o.spec.clientId,"] update live transcoding config success, code: ").concat(v.code,", config:"),JSON.stringify(o.transcodingConfig))}catch(v){if(!v.data||!v.data.retry)throw v;v.data.changeAddress&&o.connection.tryNextAddress(),o.streamingTasks.forEach(_=>{oe.warning("[".concat(o.spec.clientId,"] live streaming receive error"),v.toString(),"try to republish",_.url),o.startLiveStreamingTask(_.url,_.mode,v).then(()=>{oe.debug("[".concat(o.spec.clientId,"] live streaming republish ").concat(_.url," success"))}).catch(y=>{oe.error("[".concat(o.spec.clientId,"] live streaming republish failed"),_.url,y.toString()),o.onLiveStreamError&&o.onLiveStreamError(_.url,y)})})}})()}setInjectStreamConfig(i,o){this.injectConfig=Object.assign({},this.injectConfig,i),this.injectLoopTimes=o}startLiveStreamingTask(i,o,c){var h=this;return L(function*(){var g;if(Array.from(Lg(g=h.streamingTasks).call(g)).find(y=>y.mode===os.INJECT)&&o===os.INJECT)return new Pe(Te.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!h.transcodingConfig&&o===os.TRANSCODE)throw new Pe(Te.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let p={command:"PublishStream",ts:Date.now(),url:i,uid:h.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};oe.debug("[".concat(h.spec.clientId,"] start live streaming ").concat(i,", mode: ").concat(o));const v=yield h.taskMutex.lock();if(!h.connection&&c)return void v();if(h.streamingTasks.get(i)&&!c)return v(),new Pe(Te.LIVE_STREAMING_TASK_CONFLICT).throw();try{h.connection||(h.connection=yield h.connect(o))}catch(y){throw v(),y}switch(o){case os.TRANSCODE:p.transcodingConfig=uu({},h.transcodingConfig);break;case os.RAW:break;case os.INJECT:p={cname:h.spec.cname,command:"InjectStream",sid:h.spec.sid,transcodingConfig:h.injectConfig,ts:Date.now(),url:i,loopTimes:h.injectLoopTimes}}h.uapResponse&&h.uapResponse.vid&&(p.vid=h.uapResponse.vid),h.isStartingStreamingTask=!0;const _=h.lastTaskId++;try{const y=new Qn((C,w)=>{dc(h.retryTimeout).then(()=>{if(c)return w(c);const P=h.statusError.get(i);return P?(h.statusError.delete(i),w(P)):void 0})}),b=yield Qn.race([h.connection.request("request",{clientRequest:p},!0,{url:i,command:"PublishStream",workerType:o===os.TRANSCODE?1:2,requestByUser:!c,tid:_.toString()}),y]);h.isStartingStreamingTask=!1,oe.debug("[".concat(h.spec.clientId,"] live streaming started, code: ").concat(b.code)),h.streamingTasks.set(i,{clientRequest:p,mode:o,url:i,taskId:_}),v()}catch(y){if(v(),h.isStartingStreamingTask=!1,!y.data||!y.data.retry||c)throw y;return y.data.changeAddress?(h.connection.tryNextAddress(),yield h.startLiveStreamingTask(i,o,y)):yield h.startLiveStreamingTask(i,o,y)}})()}stopLiveStreamingTask(i){return new Qn((o,c)=>{const h=this.streamingTasks.get(i);if(!h||!this.connection)return new Pe(Te.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const g=h.mode;h.abortTask=()=>{oe.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(i),o()},this.connection.request("request",{clientRequest:{command:g===os.INJECT?"UninjectStream":"UnpublishStream",url:h.url}},!1,{url:i,command:"UnPublishStream",workerType:g===os.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(p=>{oe.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(p.code)),this.streamingTasks.delete(i),0===this.streamingTasks.size&&g!==os.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),o(),g===os.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Ev.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,i)}).catch(c)})}controlInjectStream(i,o,c,h){var g=this;return L(function*(){const p=g.streamingTasks.get(i);if(!p||!g.connection||p.mode!==os.INJECT)throw new Pe(Te.INVALID_OPERATION,"can not find inject stream task to control");return(yield g.connection.request("request",{clientRequest:{command:"ControlStream",url:i,control:o,audioVolume:c,position:h}})).serverResponse})()}resetAllTask(){var i;const o=Array.from(Lg(i=this.streamingTasks).call(i));this.terminate();for(const c of o)this.startLiveStreamingTask(c.url,c.mode).catch(h=>{this.onLiveStreamError&&this.onLiveStreamError(c.url,h)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=ul.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}connect(i){var o=this;return L(function*(){if(o.connection)throw new Pe(Te.UNEXPECTED_ERROR,"live streaming connection has already connected");const c=yield jd(o,zf.REQUEST_WORKER_MANAGER_LIST,i);return o.uapResponse=c,o.connection=new UQ(c.workerToken,o.spec,o.wsRetryConfig,i),o.connection.on(su.WARNING,(h,g)=>o.onLiveStreamWarning&&o.onLiveStreamWarning(g,h)),o.connection.on(su.PUBLISH_STREAM_STATUS,h=>o.handlePublishStreamServer(h)),o.connection.on(su.INJECT_STREAM_STATUS,h=>o.handleInjectStreamServerStatus(h)),o.connection.on(su.REQUEST_NEW_ADDRESS,(h,g)=>{if(!o.connection)return g(new Pe(Te.UNEXPECTED_ERROR,"can not get new live streaming address list"));jd(o,zf.REQUEST_WORKER_MANAGER_LIST,i).then(p=>{o.uapResponse=p,h(p.addressList)}).catch(g)}),yield o.connection.init(c.addressList),o.connection})()}handlePublishStreamServer(i){const o=i.serverStatus&&i.serverStatus.url||"empty_url",c=this.streamingTasks.get(o),h=i.reason;switch(i.code){case wo.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case wo.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case wo.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case wo.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const p=new Pe(Te.LIVE_STREAMING_CDN_ERROR,"",{code:i.code});if(c)return oe.error(p.toString()),this.onLiveStreamError&&this.onLiveStreamError(o,p);if(!this.isStartingStreamingTask)return;this.statusError.set(o,p)}case wo.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const p=new Pe(Te.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,h);return this.onLiveStreamWarning&&this.onLiveStreamWarning(o,p)}case wo.LIVE_STREAM_RESPONSE_WORKER_LOST:case wo.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var g;if(!this.connection)return;this.connection.tryNextAddress();const p=Array.from(Lg(g=this.streamingTasks).call(g));for(const v of p)v.abortTask?v.abortTask():(oe.warning("[".concat(this.spec.clientId,"] publish stream status code"),i.code,"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,new Pe(Te.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:i.code})).then(()=>{oe.debug("[".concat(this.spec.clientId,"] republish live stream success"),v.url)}).catch(_=>{oe.error(_.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,_)}));return}}}handleInjectStreamServerStatus(i){const o=Number(i.uid),c=i.serverStatus&&i.serverStatus.url;switch(i.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Ev.INJECT_STREAM_STATUS_START_SUCCESS,o,c));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Ev.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,o,c),void this.streamingTasks.delete(c);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Ev.INJECT_STREAM_STATUS_START_UNAUTHORIZED,o,c),void this.streamingTasks.delete(c);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Ev.INJECT_STREAM_STATUS_BROKEN,o,c),void this.streamingTasks.delete(c);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Ev.INJECT_STREAM_STATUS_START_TIMEOUT,o,c),void this.streamingTasks.delete(c);default:return void oe.debug("inject stream server status",i)}}hasUrl(i){return this.streamingTasks.has(i)}}class zL{constructor(){q(this,"destChannelMediaInfos",new Map),q(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(i){RS(i),this.srcChannelMediaInfo=i}addDestChannelInfo(i){RS(i),this.destChannelMediaInfos.set(i.channelName,i)}removeDestChannelInfo(i){jD(i),this.destChannelMediaInfos.delete(i)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function K4(n){if(!(n instanceof zL))return new Pe(Te.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const i=n.getSrcChannelMediaInfo(),o=n.getDestChannelMediaInfo();return i?0===o.size?new Pe(Te.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new Pe(Te.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class jQ extends is{constructor(i,o,c){super(),q(this,"ws",void 0),q(this,"requestId",1),q(this,"heartBeatTimer",void 0),q(this,"joinInfo",void 0),q(this,"clientId",void 0),q(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),q(this,"onClose",h=>{this.emit("close"),this.dispose()}),q(this,"onMessage",h=>{const g=JSON.parse(h.data);if(!g||"serverResponse"!==g.command||!g.requestId)return g&&"serverStatus"===g.command&&g.serverStatus&&g.serverStatus.command?(this.emit("status",g.serverStatus),void this.emit(g.serverStatus.command,g.serverStatus)):void 0;this.emit("req_".concat(g.requestId),g)}),this.joinInfo=i,this.clientId=o,this.ws=new Yy("cross-channel-".concat(this.clientId),c),this.ws.on(Mr.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Mr.CONNECTED,this.onOpen),this.ws.on(Mr.ON_MESSAGE,this.onMessage),this.ws.on(Mr.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(i){const o=this.requestId++;return i.requestId=o,i.seq=o,this.ws.sendMessage(i),o}waitStatus(i){return new Qn((o,c)=>{const h=window.setTimeout(()=>{c(new Pe(Te.TIMEOUT,"wait status timeout, status: ".concat(i)))},5e3);this.once(i,g=>{window.clearTimeout(h),g.state&&0!==g.state?c(new Pe(Te.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(i))):o(void 0)}),this.once("dispose",()=>{window.clearTimeout(h),c(new Pe(Te.WS_ABORT))})})}request(i){var o=this;return L(function*(){if("closed"===o.ws.state)throw new Pe(Te.WS_DISCONNECT);"connected"!==o.ws.state&&(yield new Qn((v,_)=>{o.ws.once(Mr.CLOSED,()=>_(new Pe(Te.WS_ABORT))),o.ws.once(Mr.CONNECTED,v)}));const h=o.sendMessage(i),g=new Qn((v,_)=>{const y=()=>{_(new Pe(Te.WS_ABORT))};o.ws.once(Mr.RECONNECTING,y),o.ws.once(Mr.CLOSED,y),o.once("req_".concat(h),v),dc(3e3).then(()=>{o.removeAllListeners("req_".concat(h)),o.ws.off(Mr.RECONNECTING,y),o.ws.off(Mr.CLOSED,y),_(new Pe(Te.TIMEOUT,"cross channel ws request timeout"))})}),p=yield g;if(!p||200!==p.code)throw new Pe(Te.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(p)));return p})()}connect(i){var o=this;return L(function*(){o.ws.removeAllListeners(Mr.REQUEST_NEW_URLS),o.ws.on(Mr.REQUEST_NEW_URLS,c=>{c(i)}),yield o.ws.init(i)})()}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(i){const o=this.requestId++;return i.requestId=o,this.ws.sendMessage(i),o}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class m2 extends is{set state(i){i!==this._state&&(i!==Ua.RELAY_STATE_FAILURE&&(this.errorCode=Dg.RELAY_OK),this.emit("state",i,this.errorCode),this._state=i)}get state(){return this._state}constructor(i,o,c,h){var g;super(),g=this,q(this,"joinInfo",void 0),q(this,"clientId",void 0),q(this,"cancelToken",ul.CancelToken.source()),q(this,"workerToken",void 0),q(this,"requestId",0),q(this,"signal",void 0),q(this,"prevChannelMediaConfig",void 0),q(this,"httpRetryConfig",void 0),q(this,"_state",Ua.RELAY_STATE_IDLE),q(this,"errorCode",Dg.RELAY_OK),q(this,"onStatus",p=>{oe.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(p))),p&&p.command&&("onAudioPacketReceived"===p.command&&this.emit("event",Op.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===p.command&&this.emit("event",Op.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===p.command&&(this.errorCode=Dg.SRC_TOKEN_EXPIRED,this.state=Ua.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===p.command&&(this.errorCode=Dg.DEST_TOKEN_EXPIRED,this.state=Ua.RELAY_STATE_FAILURE))}),q(this,"onReconnect",L(function*(){oe.debug("[".concat(g.clientId,"] ChannelMediaSocket disconnect, reconnecting")),g.emit("event",Op.NETWORK_DISCONNECTED),g.state=Ua.RELAY_STATE_IDLE,g.prevChannelMediaConfig&&g.sendStartRelayMessage(g.prevChannelMediaConfig).catch(p=>{g.state!==Ua.RELAY_STATE_IDLE&&(oe.error("auto restart channel media relay failed",p.toString()),g.errorCode=Dg.SERVER_CONNECTION_LOST,g.state=Ua.RELAY_STATE_FAILURE)})})),this.joinInfo=i,this.clientId=o,this.signal=new jQ(this.joinInfo,this.clientId,c),this.httpRetryConfig=h}startChannelMediaRelay(i){var o=this;return L(function*(){if(o.state!==Ua.RELAY_STATE_IDLE)throw new Pe(Te.INVALID_OPERATION);o.state=Ua.RELAY_STATE_CONNECTING,yield o.connect(),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: connect success"));try{yield o.sendStartRelayMessage(i)}catch(c){throw c.data&&c.data.serverResponse&&"SetSourceChannel"===c.data.serverResponse.command?new Pe(Te.CROSS_CHANNEL_FAILED_JOIN_SRC):c.data&&c.data.serverResponse&&"SetDestChannelStatus"===c.serverResponse.command?new Pe(Te.CROSS_CHANNEL_FAILED_JOIN_DEST):c.data&&c.data.serverResponse&&"StartPacketTransfer"===c.serverResponse.command?new Pe(Te.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):c}o.prevChannelMediaConfig=i})()}updateChannelMediaRelay(i){var o=this;return L(function*(){if(o.state!==Ua.RELAY_STATE_RUNNING)throw new Pe(Te.INVALID_OPERATION);yield o.sendUpdateMessage(i),o.prevChannelMediaConfig=i})()}stopChannelMediaRelay(){var i=this;return L(function*(){yield i.sendStopRelayMessage(),oe.debug("[".concat(i.clientId,"] stopChannelMediaRelay: send stop message success")),i.state=Ua.RELAY_STATE_IDLE,i.dispose()})()}dispose(){oe.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=ul.CancelToken.source(),this.state=Ua.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}connect(){var i=this;return L(function*(){const o=yield function MQ(n,i,o){return f2.apply(this,arguments)}(i.joinInfo,i.cancelToken.token,i.httpRetryConfig);i.workerToken=o.workerToken,yield i.signal.connect(o.addressList),i.emit("event",Op.NETWORK_CONNECTED),i.signal.on("status",i.onStatus),i.signal.on("reconnecting",i.onReconnect)})()}sendStartRelayMessage(i){var o=this;return L(function*(){const c=o.genMessage(Fa.StopPacketTransfer);yield o.signal.request(c),yield o.signal.waitStatus("Normal Quit"),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const h=o.genMessage(Fa.SetSdkProfile,i);yield o.signal.request(h),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const g=o.genMessage(Fa.SetSourceChannel,i);yield o.signal.request(g),yield o.signal.waitStatus("SetSourceChannelStatus"),o.emit("event",Op.PACKET_JOINED_SRC_CHANNEL),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const p=o.genMessage(Fa.SetSourceUserId,i);yield o.signal.request(p),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const v=o.genMessage(Fa.SetDestChannel,i);yield o.signal.request(v),yield o.signal.waitStatus("SetDestChannelStatus"),o.emit("event",Op.PACKET_JOINED_DEST_CHANNEL),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: SetDestChannel success"));const _=o.genMessage(Fa.StartPacketTransfer,i);yield o.signal.request(_),o.emit("event",Op.PACKET_SENT_TO_DEST_CHANNEL),o.state=Ua.RELAY_STATE_RUNNING,oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))})()}sendUpdateMessage(i){var o=this;return L(function*(){const c=o.genMessage(Fa.UpdateDestChannel,i);yield o.signal.request(c),o.emit("event",Op.PACKET_UPDATE_DEST_CHANNEL),oe.debug("[".concat(o.clientId,"] sendUpdateMessage: UpdateDestChannel success"))})()}sendStopRelayMessage(){var i=this;return L(function*(){const o=i.genMessage(Fa.StopPacketTransfer);yield i.signal.request(o),oe.debug("[".concat(i.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))})()}genMessage(i,o){const c=[],h=[],g=[];this.requestId+=1;const p={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:ll,sid:this.joinInfo.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.12.1"===p.sdkVersion&&(p.sdkVersion="0.0.1");let v=null,_=null;switch(i){case Fa.SetSdkProfile:return p.clientRequest={command:"SetSdkProfile",type:"multi_channel"},p;case Fa.SetSourceChannel:if(_=o&&o.getSrcChannelMediaInfo(),!_)throw new Pe(Te.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceChannel",uid:"0",channelName:_.channelName,token:_.token||this.joinInfo.appId},p;case Fa.SetSourceUserId:if(_=o&&o.getSrcChannelMediaInfo(),!_)throw new Pe(Te.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceUserId",uid:_.uid+""},p;case Fa.SetDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Pe(Te.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(y=>{c.push(y.channelName),h.push(y.uid+""),g.push(y.token||this.joinInfo.appId)}),p.clientRequest={command:"SetDestChannel",channelName:c,uid:h,token:g},p;case Fa.StartPacketTransfer:return p.clientRequest={command:"StartPacketTransfer"},p;case Fa.Reconnect:return p.clientRequest={command:"Reconnect"},p;case Fa.StopPacketTransfer:return p.clientRequest={command:"StopPacketTransfer"},p;case Fa.UpdateDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Pe(Te.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(y=>{c.push(y.channelName),h.push(y.uid+""),g.push(y.token||this.joinInfo.appId)}),p.clientRequest={command:"UpdateDestChannel",channelName:c,uid:h,token:g},p}return p}}const YL=n=>{const i=document.createElement("canvas");return i.width=2,i.height=2,new Qn((o,c)=>{i.toBlob(function(){var h=L(function*(g){if(i.remove(),g){const p=yield t0(g);o({buffer:p,width:i.width,height:i.height})}else c(new Pe(Te.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(g){return h.apply(this,arguments)}}(),n,1)})},t0=function(){var n=L(function*(i){const o=yield i.arrayBuffer();return new Uint8Array(o)});return function(o){return n.apply(this,arguments)}}();var qL;let z4=ac("AgoraRTCPlayer","trackId")(qL=class{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(n){n!==this._videoElementStatus&&(oe.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(n)),Bd("debug",["HTMLVideoElement",this.trackId],"statusChange","".concat(this._videoElementStatus," => ").concat(n)),this._videoElementStatus=n)}constructor(n){q(this,"trackId",void 0),q(this,"config",void 0),q(this,"onFirstVideoFrameDecoded",void 0),q(this,"freezeTimeCounterList",[]),q(this,"timeUpdatedCount",0),q(this,"freezeTime",0),q(this,"playbackTime",0),q(this,"lastTimeUpdatedTime",0),q(this,"videoTrack",void 0),q(this,"container",void 0),q(this,"videoElement",void 0),q(this,"videoElementCheckInterval",void 0),q(this,"_videoElementStatus",Xs.NONE),q(this,"slot",void 0),q(this,"isGettingVideoDimensions",!1),q(this,"handleVideoEvents",i=>{switch(i.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Xs.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=Xs.CANPLAY;break;case"stalled":this.videoElementStatus=Xs.STALLED;break;case"suspend":this.videoElementStatus=Xs.SUSPEND;break;case"pause":this.videoElementStatus=Xs.PAUSED,!wu()&&!vv()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),xn("debug",this,"video element paused, auto resume"),this.videoElement.play());break;case"waiting":this.videoElementStatus=Xs.WAITING;break;case"abort":this.videoElementStatus=Xs.ABORT;break;case"ended":this.videoElementStatus=Xs.ENDED;break;case"emptied":this.videoElementStatus=Xs.EMPTIED;break;case"timeupdate":{const o=Date.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=o);const c=o-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=o,c>500&&(this.freezeTime+=c),this.playbackTime+=c;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}}),q(this,"startGetVideoDimensions",()=>{const i=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return oe.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),Yt("debug",this,"startGetVideoDimensions",{videoWidth:this.videoElement.videoWidth,videoHeight:this.videoElement.videoHeight}),void(this.isGettingVideoDimensions=!1);setTimeout(i,500)};!this.isGettingVideoDimensions&&i()}),q(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===Yr.curState&&(SU()?(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):bU()?(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):EU()&&(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),q(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(SU()?(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):bU()?(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):EU()&&(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=n.element,this.trackId=n.trackId,this.updateConfig(n),Yr.on(js.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Yr.on(js.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(n){this.config=n,this.trackId=n.trackId;const i=n.element;i!==this.slot&&(this.destroy(),this.slot=i),this.createElements()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.createElements())}play(n){if(this.videoElement){const i=this.videoElement.play();i&&i.catch&&i.catch(c=>{n&&Kt.autoplayFailed(n,"video",c.message,this.trackId),Yt("warning",this,"play",c.toString(),"error"),"NotAllowedError"===c.name?(oe.warning("detected video element autoplay failed",c),this.handleAutoPlayFailed()):oe.warning("[".concat(this.trackId,"] play warning: "),c)});const o=zi();if(("Safari"===o.name&&15===Number(o.version)||_S())&&i&&i.then&&i.catch){const c=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};i.then(c).catch(c)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const i=n.getContext("2d");if(!i)return oe.error("create canvas context failed!"),Yt("error",this,"getCurrentFrame","create canvas context failed!","error"),new ImageData(2,2);i.drawImage(this.videoElement,0,0,n.width,n.height);const o=i.getImageData(0,0,n.width,n.height);return n.remove(),o}getCurrentFrameToUint8Array(n){var i=arguments,o=this;return L(function*(){let c=i.length>1&&void 0!==i[1]?i[1]:1;if(!o.videoElement)return yield YL(n);const h=document.createElement("canvas");h.width=o.videoElement.videoWidth,h.height=o.videoElement.videoHeight;const g=h.getContext("2d");return g?(g.drawImage(o.videoElement,0,0,h.width,h.height),new Qn((p,v)=>{h.toBlob(function(){var _=L(function*(y){if(h.remove(),y){const b=yield t0(y);p({buffer:b,width:h.width,height:h.height})}else v(new Pe(Te.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(y){return _.apply(this,arguments)}}(),n,c<0?.1:c>1?1:c)})):yield YL(n)})()}destroy(){if(Yr.off(js.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Yr.off(js.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=Xs.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=Xs.ERROR,this.container&&this.container.appendChild(this.videoElement),JL.forEach(o=>{this.videoElement&&this.videoElement.addEventListener(o,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=Xs.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const n=zi();"Safari"===n.name&&15===Number(n.version)||_S()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.videoElement.style.objectFit=this.config.fit?this.config.fit:"cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Es()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Es()&&this.videoElement.load());const i=this.videoElement.play();void 0!==i&&i.catch(o=>{oe.debug("[".concat(this.trackId,"] playback interrupted"),o.toString()),xn("debug",this,"play back interrupted: ".concat(o.toString()))})}removeVideoElement(){if(this.videoElement){JL.forEach(n=>{this.videoElement&&this.videoElement.removeEventListener(n,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=void 0,this.videoElementStatus=Xs.NONE}}handleAutoPlayFailed(){const n=zi();if(this.videoElement){const i=o=>{o.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{oe.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed.")),xn("debug",this,"video element autoplay resumed")}).catch(c=>{oe.error(c)}),"Android"!==n.os||"Chrome"!==n.name&&n.name!==Li.WECHAT?(document.body.removeEventListener("touchstart",i,!0),document.body.removeEventListener("mousedown",i,!0)):document.body.removeEventListener("click",i,!0))};"Android"!==n.os||"Chrome"!==n.name&&n.name!==Li.WECHAT?(document.body.addEventListener("touchstart",i,!0),document.body.addEventListener("mousedown",i,!0)):document.body.addEventListener("click",i,!0),gV()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}})||qL;const JL=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];var Y4,XL={exports:{}};function qy(n,i,o){const c=n.createShader(o);if(!c)return new Pe(Te.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(n.shaderSource(c,i),n.compileShader(c),!n.getShaderParameter(c,n.COMPILE_STATUS)){const h=n.getShaderInfoLog(c);return n.deleteShader(c),new Pe(Te.WEBGL_INTERNAL_ERROR,"error compiling shader:"+h).throw()}return c}(function(n,i){n.exports=(()=>{var o={3476:(p,v,_)=>{p.exports=_(7460)},4341:(p,v,_)=>{p.exports=_(3685)},3536:(p,v,_)=>{var y=_(1910);p.exports=y},8171:(p,v,_)=>{_(6450);var y=_(4058).Object,b=p.exports=function(C,w,P){return y.defineProperty(C,w,P)};y.defineProperty.sham&&(b.sham=!0)},2956:(p,v,_)=>{_(7627),_(6274),_(5967),_(8881),_(4560),_(7206),_(4349),_(7971);var y=_(4058);p.exports=y.Promise},3685:(p,v,_)=>{var y=_(3536);p.exports=y},4883:(p,v,_)=>{var y=_(1899),b=_(7475),C=_(9826),w=y.TypeError;p.exports=function(P){if(b(P))return P;throw w(C(P)+" is not a function")}},174:(p,v,_)=>{var y=_(1899),b=_(4284),C=_(9826),w=y.TypeError;p.exports=function(P){if(b(P))return P;throw w(C(P)+" is not a constructor")}},1851:(p,v,_)=>{var y=_(1899),b=_(7475),C=y.String,w=y.TypeError;p.exports=function(P){if("object"==typeof P||b(P))return P;throw w("Can't set "+C(P)+" as a prototype")}},8479:p=>{p.exports=function(){}},5743:(p,v,_)=>{var y=_(1899),b=_(7046),C=y.TypeError;p.exports=function(w,P){if(b(P,w))return w;throw C("Incorrect invocation")}},6059:(p,v,_)=>{var y=_(1899),b=_(941),C=y.String,w=y.TypeError;p.exports=function(P){if(b(P))return P;throw w(C(P)+" is not an object")}},1692:(p,v,_)=>{var y=_(4529),b=_(9413),C=_(623),w=function(P){return function(j,G,Z){var ae,fe=y(j),be=C(fe),Ce=b(Z,be);if(P&&G!=G){for(;be>Ce;)if((ae=fe[Ce++])!=ae)return!0}else for(;be>Ce;Ce++)if((P||Ce in fe)&&fe[Ce]===G)return P||Ce||0;return!P&&-1}};p.exports={includes:w(!0),indexOf:w(!1)}},3765:(p,v,_)=>{var y=_(5329);p.exports=y([].slice)},1385:(p,v,_)=>{var y=_(9813)("iterator"),b=!1;try{var C=0,w={next:function(){return{done:!!C++}},return:function(){b=!0}};w[y]=function(){return this},Array.from(w,function(){throw 2})}catch{}p.exports=function(P,j){if(!j&&!b)return!1;var G=!1;try{var Z={};Z[y]=function(){return{next:function(){return{done:G=!0}}}},P(Z)}catch{}return G}},2532:(p,v,_)=>{var y=_(5329),b=y({}.toString),C=y("".slice);p.exports=function(w){return C(b(w),8,-1)}},9697:(p,v,_)=>{var y=_(1899),b=_(2885),C=_(7475),w=_(2532),P=_(9813)("toStringTag"),j=y.Object,G="Arguments"==w(function(){return arguments}());p.exports=b?w:function(Z){var ae,fe,be;return void 0===Z?"Undefined":null===Z?"Null":"string"==typeof(fe=function(Ce,it){try{return Ce[it]}catch{}}(ae=j(Z),P))?fe:G?w(ae):"Object"==(be=w(ae))&&C(ae.callee)?"Arguments":be}},8694:(p,v,_)=>{var y=_(5329)("".replace),b=String(Error("zxcasd").stack),C=/\n\s*at [^:]*:[^\n]*/,w=C.test(b);p.exports=function(P,j){if(w&&"string"==typeof P)for(;j--;)P=y(P,C,"");return P}},3489:(p,v,_)=>{var y=_(953),b=_(1136),C=_(9677),w=_(5988);p.exports=function(P,j,G){for(var Z=b(j),ae=w.f,fe=C.f,be=0;be<Z.length;be++){var Ce=Z[be];y(P,Ce)||G&&y(G,Ce)||ae(P,Ce,fe(j,Ce))}}},4160:(p,v,_)=>{var y=_(5981);p.exports=!y(function(){function b(){}return b.prototype.constructor=null,Object.getPrototypeOf(new b)!==b.prototype})},1046:(p,v,_)=>{var y=_(5143).IteratorPrototype,b=_(9290),C=_(1887),w=_(904),P=_(2077),j=function(){return this};p.exports=function(G,Z,ae,fe){var be=Z+" Iterator";return G.prototype=b(y,{next:C(+!fe,ae)}),w(G,be,!1,!0),P[be]=j,G}},2029:(p,v,_)=>{var y=_(5746),b=_(5988),C=_(1887);p.exports=y?function(w,P,j){return b.f(w,P,C(1,j))}:function(w,P,j){return w[P]=j,w}},1887:p=>{p.exports=function(v,_){return{enumerable:!(1&v),configurable:!(2&v),writable:!(4&v),value:_}}},7771:(p,v,_)=>{var y=_(6887),b=_(8834),C=_(2529),w=_(9417),P=_(7475),j=_(1046),G=_(249),Z=_(8929),ae=_(904),fe=_(2029),be=_(9754),Ce=_(9813),it=_(2077),wt=_(5143),bt=w.PROPER,Pt=w.CONFIGURABLE,En=wt.IteratorPrototype,pn=wt.BUGGY_SAFARI_ITERATORS,un=Ce("iterator"),Ge="values",ot="entries",_t=function(){return this};p.exports=function(bn,Je,at,Rt,cn,Rn,Vt){j(at,Je,Rt);var V,_e,ke,Nt=function(ya){if(ya===cn&&Qi)return Qi;if(!pn&&ya in Cr)return Cr[ya];switch(ya){case"keys":case Ge:case ot:return function(){return new at(this,ya)}}return function(){return new at(this)}},In=Je+" Iterator",Tr=!1,Cr=bn.prototype,xr=Cr[un]||Cr["@@iterator"]||cn&&Cr[cn],Qi=!pn&&xr||Nt(cn),Nc="Array"==Je&&Cr.entries||xr;if(Nc&&(V=G(Nc.call(new bn)))!==Object.prototype&&V.next&&(C||G(V)===En||(Z?Z(V,En):P(V[un])||be(V,un,_t)),ae(V,In,!0,!0),C&&(it[In]=_t)),bt&&cn==Ge&&xr&&xr.name!==Ge&&(!C&&Pt?fe(Cr,"name",Ge):(Tr=!0,Qi=function(){return b(xr,this)})),cn)if(_e={values:Nt(Ge),keys:Rn?Qi:Nt("keys"),entries:Nt(ot)},Vt)for(ke in _e)(pn||Tr||!(ke in Cr))&&be(Cr,ke,_e[ke]);else y({target:Je,proto:!0,forced:pn||Tr},_e);return C&&!Vt||Cr[un]===Qi||be(Cr,un,Qi,{name:cn}),it[Je]=Qi,_e}},5746:(p,v,_)=>{var y=_(5981);p.exports=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},1333:(p,v,_)=>{var y=_(1899),b=_(941),C=y.document,w=b(C)&&b(C.createElement);p.exports=function(P){return w?C.createElement(P):{}}},3281:p=>{p.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:p=>{p.exports="object"==typeof window},4470:(p,v,_)=>{var y=_(2861),b=_(1899);p.exports=/ipad|iphone|ipod/i.test(y)&&void 0!==b.Pebble},2749:(p,v,_)=>{var y=_(2861);p.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(y)},6049:(p,v,_)=>{var y=_(2532),b=_(1899);p.exports="process"==y(b.process)},8045:(p,v,_)=>{var y=_(2861);p.exports=/web0s(?!.*chrome)/i.test(y)},2861:(p,v,_)=>{var y=_(626);p.exports=y("navigator","userAgent")||""},3385:(p,v,_)=>{var y,b,C=_(1899),w=_(2861),P=C.process,j=C.Deno,G=P&&P.versions||j&&j.version,Z=G&&G.v8;Z&&(b=(y=Z.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!b&&w&&(!(y=w.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=w.match(/Chrome\/(\d+)/))&&(b=+y[1]),p.exports=b},6759:p=>{p.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:(p,v,_)=>{var y=_(5981),b=_(1887);p.exports=!y(function(){var C=Error("a");return!("stack"in C)||(Object.defineProperty(C,"stack",b(1,7)),7!==C.stack)})},6887:(p,v,_)=>{var y=_(1899),b=_(9730),C=_(5329),w=_(7475),P=_(9677).f,j=_(7252),G=_(4058),Z=_(6843),ae=_(2029),fe=_(953),be=function(Ce){var it=function(wt,bt,Pt){if(this instanceof it){switch(arguments.length){case 0:return new Ce;case 1:return new Ce(wt);case 2:return new Ce(wt,bt)}return new Ce(wt,bt,Pt)}return b(Ce,this,arguments)};return it.prototype=Ce.prototype,it};p.exports=function(Ce,it){var wt,bt,Pt,En,pn,un,yt,Ge,ot=Ce.target,_t=Ce.global,bn=Ce.stat,Je=Ce.proto,at=_t?y:bn?y[ot]:(y[ot]||{}).prototype,Rt=_t?G:G[ot]||ae(G,ot,{})[ot],cn=Rt.prototype;for(Pt in it)wt=!j(_t?Pt:ot+(bn?".":"#")+Pt,Ce.forced)&&at&&fe(at,Pt),pn=Rt[Pt],wt&&(un=Ce.noTargetGet?(Ge=P(at,Pt))&&Ge.value:at[Pt]),En=wt&&un?un:it[Pt],wt&&typeof pn==typeof En||(yt=Ce.bind&&wt?Z(En,y):Ce.wrap&&wt?be(En):Je&&w(En)?C(En):En,(Ce.sham||En&&En.sham||pn&&pn.sham)&&ae(yt,"sham",!0),ae(Rt,Pt,yt),Je&&(fe(G,bt=ot+"Prototype")||ae(G,bt,{}),ae(G[bt],Pt,En),Ce.real&&cn&&!cn[Pt]&&ae(cn,Pt,En)))}},5981:p=>{p.exports=function(v){try{return!!v()}catch{return!0}}},9730:(p,v,_)=>{var y=_(8285),b=Function.prototype,C=b.apply,w=b.call;p.exports="object"==typeof Reflect&&Reflect.apply||(y?w.bind(C):function(){return w.apply(C,arguments)})},6843:(p,v,_)=>{var y=_(5329),b=_(4883),C=_(8285),w=y(y.bind);p.exports=function(P,j){return b(P),void 0===j?P:C?w(P,j):function(){return P.apply(j,arguments)}}},8285:(p,v,_)=>{var y=_(5981);p.exports=!y(function(){var b=function(){}.bind();return"function"!=typeof b||b.hasOwnProperty("prototype")})},8834:(p,v,_)=>{var y=_(8285),b=Function.prototype.call;p.exports=y?b.bind(b):function(){return b.apply(b,arguments)}},9417:(p,v,_)=>{var y=_(5746),b=_(953),C=Function.prototype,w=y&&Object.getOwnPropertyDescriptor,P=b(C,"name"),j=P&&"something"===function(){}.name,G=P&&(!y||y&&w(C,"name").configurable);p.exports={EXISTS:P,PROPER:j,CONFIGURABLE:G}},5329:(p,v,_)=>{var y=_(8285),b=Function.prototype,w=b.call,P=y&&b.bind.bind(w,w);p.exports=y?function(j){return j&&P(j)}:function(j){return j&&function(){return w.apply(j,arguments)}}},626:(p,v,_)=>{var y=_(4058),b=_(1899),C=_(7475),w=function(P){return C(P)?P:void 0};p.exports=function(P,j){return arguments.length<2?w(y[P])||w(b[P]):y[P]&&y[P][j]||b[P]&&b[P][j]}},2902:(p,v,_)=>{var y=_(9697),b=_(4229),C=_(2077),w=_(9813)("iterator");p.exports=function(P){if(null!=P)return b(P,w)||b(P,"@@iterator")||C[y(P)]}},429:(p,v,_)=>{var y=_(1899),b=_(8834),C=_(4883),w=_(6059),P=_(9826),j=_(2902),G=y.TypeError;p.exports=function(Z,ae){var fe=arguments.length<2?j(Z):ae;if(C(fe))return w(b(fe,Z));throw G(P(Z)+" is not iterable")}},4229:(p,v,_)=>{var y=_(4883);p.exports=function(b,C){var w=b[C];return null==w?void 0:y(w)}},1899:(p,v,_)=>{var y=function(b){return b&&b.Math==Math&&b};p.exports=y("object"==typeof globalThis&&globalThis)||y("object"==typeof window&&window)||y("object"==typeof self&&self)||y("object"==typeof _.g&&_.g)||function(){return this}()||Function("return this")()},953:(p,v,_)=>{var y=_(5329),b=_(9678),C=y({}.hasOwnProperty);p.exports=Object.hasOwn||function(w,P){return C(b(w),P)}},7748:p=>{p.exports={}},4845:(p,v,_)=>{var y=_(1899);p.exports=function(b,C){var w=y.console;w&&w.error&&(1==arguments.length?w.error(b):w.error(b,C))}},5463:(p,v,_)=>{var y=_(626);p.exports=y("document","documentElement")},2840:(p,v,_)=>{var y=_(5746),b=_(5981),C=_(1333);p.exports=!y&&!b(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})},7026:(p,v,_)=>{var y=_(1899),b=_(5329),C=_(5981),w=_(2532),P=y.Object,j=b("".split);p.exports=C(function(){return!P("z").propertyIsEnumerable(0)})?function(G){return"String"==w(G)?j(G,""):P(G)}:P},1302:(p,v,_)=>{var y=_(5329),b=_(7475),C=_(3030),w=y(Function.toString);b(C.inspectSource)||(C.inspectSource=function(P){return w(P)}),p.exports=C.inspectSource},3794:(p,v,_)=>{var y=_(941),b=_(2029);p.exports=function(C,w){y(w)&&"cause"in w&&b(C,"cause",w.cause)}},5402:(p,v,_)=>{var y,b,C,w=_(8019),P=_(1899),j=_(5329),G=_(941),Z=_(2029),ae=_(953),fe=_(3030),be=_(4262),Ce=_(7748),it="Object already initialized",wt=P.TypeError;if(w||fe.state){var Pt=fe.state||(fe.state=new(0,P.WeakMap)),En=j(Pt.get),pn=j(Pt.has),un=j(Pt.set);y=function(Ge,ot){if(pn(Pt,Ge))throw new wt(it);return ot.facade=Ge,un(Pt,Ge,ot),ot},b=function(Ge){return En(Pt,Ge)||{}},C=function(Ge){return pn(Pt,Ge)}}else{var yt=be("state");Ce[yt]=!0,y=function(Ge,ot){if(ae(Ge,yt))throw new wt(it);return ot.facade=Ge,Z(Ge,yt,ot),ot},b=function(Ge){return ae(Ge,yt)?Ge[yt]:{}},C=function(Ge){return ae(Ge,yt)}}p.exports={set:y,get:b,has:C,enforce:function(Ge){return C(Ge)?b(Ge):y(Ge,{})},getterFor:function(Ge){return function(ot){var _t;if(!G(ot)||(_t=b(ot)).type!==Ge)throw wt("Incompatible receiver, "+Ge+" required");return _t}}}},6782:(p,v,_)=>{var y=_(9813),b=_(2077),C=y("iterator"),w=Array.prototype;p.exports=function(P){return void 0!==P&&(b.Array===P||w[C]===P)}},7475:p=>{p.exports=function(v){return"function"==typeof v}},4284:(p,v,_)=>{var y=_(5329),b=_(5981),C=_(7475),w=_(9697),P=_(626),j=_(1302),G=function(){},Z=[],ae=P("Reflect","construct"),fe=/^\s*(?:class|function)\b/,be=y(fe.exec),Ce=!fe.exec(G),it=function(bt){if(!C(bt))return!1;try{return ae(G,Z,bt),!0}catch{return!1}},wt=function(bt){if(!C(bt))return!1;switch(w(bt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ce||!!be(fe,j(bt))}catch{return!0}};wt.sham=!0,p.exports=!ae||b(function(){var bt;return it(it.call)||!it(Object)||!it(function(){bt=!0})||bt})?wt:it},7252:(p,v,_)=>{var y=_(5981),b=_(7475),C=/#|\.prototype\./,w=function(ae,fe){var be=j[P(ae)];return be==Z||be!=G&&(b(fe)?y(fe):!!fe)},P=w.normalize=function(ae){return String(ae).replace(C,".").toLowerCase()},j=w.data={},G=w.NATIVE="N",Z=w.POLYFILL="P";p.exports=w},941:(p,v,_)=>{var y=_(7475);p.exports=function(b){return"object"==typeof b?null!==b:y(b)}},2529:p=>{p.exports=!0},6664:(p,v,_)=>{var y=_(1899),b=_(626),C=_(7475),w=_(7046),P=_(2302),j=y.Object;p.exports=P?function(G){return"symbol"==typeof G}:function(G){var Z=b("Symbol");return C(Z)&&w(Z.prototype,j(G))}},3091:(p,v,_)=>{var y=_(1899),b=_(6843),C=_(8834),w=_(6059),P=_(9826),j=_(6782),G=_(623),Z=_(7046),ae=_(429),fe=_(2902),be=_(7609),Ce=y.TypeError,it=function(bt,Pt){this.stopped=bt,this.result=Pt},wt=it.prototype;p.exports=function(bt,Pt,En){var pn,un,yt,Ge,ot,_t,bn,at=!(!En||!En.AS_ENTRIES),Rt=!(!En||!En.IS_ITERATOR),cn=!(!En||!En.INTERRUPTED),Rn=b(Pt,En&&En.that),Vt=function(_e){return pn&&be(pn,"normal",_e),new it(!0,_e)},V=function(_e){return at?(w(_e),cn?Rn(_e[0],_e[1],Vt):Rn(_e[0],_e[1])):cn?Rn(_e,Vt):Rn(_e)};if(Rt)pn=bt;else{if(!(un=fe(bt)))throw Ce(P(bt)+" is not iterable");if(j(un)){for(yt=0,Ge=G(bt);Ge>yt;yt++)if((ot=V(bt[yt]))&&Z(wt,ot))return ot;return new it(!1)}pn=ae(bt,un)}for(_t=pn.next;!(bn=C(_t,pn)).done;){try{ot=V(bn.value)}catch(_e){be(pn,"throw",_e)}if("object"==typeof ot&&ot&&Z(wt,ot))return ot}return new it(!1)}},7609:(p,v,_)=>{var y=_(8834),b=_(6059),C=_(4229);p.exports=function(w,P,j){var G,Z;b(w);try{if(!(G=C(w,"return"))){if("throw"===P)throw j;return j}G=y(G,w)}catch(ae){Z=!0,G=ae}if("throw"===P)throw j;if(Z)throw G;return b(G),j}},5143:(p,v,_)=>{var y,b,C,w=_(5981),P=_(7475),j=_(9290),G=_(249),Z=_(9754),ae=_(9813),fe=_(2529),be=ae("iterator"),Ce=!1;[].keys&&("next"in(C=[].keys())?(b=G(G(C)))!==Object.prototype&&(y=b):Ce=!0),null==y||w(function(){var it={};return y[be].call(it)!==it})?y={}:fe&&(y=j(y)),P(y[be])||Z(y,be,function(){return this}),p.exports={IteratorPrototype:y,BUGGY_SAFARI_ITERATORS:Ce}},2077:p=>{p.exports={}},623:(p,v,_)=>{var y=_(3057);p.exports=function(b){return y(b.length)}},6132:(p,v,_)=>{var y,b,C,w,P,j,G,Z,ae=_(1899),fe=_(6843),be=_(9677).f,Ce=_(2941).set,it=_(2749),wt=_(4470),bt=_(8045),Pt=_(6049),En=ae.MutationObserver||ae.WebKitMutationObserver,pn=ae.document,un=ae.process,yt=ae.Promise,Ge=be(ae,"queueMicrotask"),ot=Ge&&Ge.value;ot||(y=function(){var _t,bn;for(Pt&&(_t=un.domain)&&_t.exit();b;){bn=b.fn,b=b.next;try{bn()}catch(Je){throw b?w():C=void 0,Je}}C=void 0,_t&&_t.enter()},it||Pt||bt||!En||!pn?!wt&&yt&&yt.resolve?((G=yt.resolve(void 0)).constructor=yt,Z=fe(G.then,G),w=function(){Z(y)}):Pt?w=function(){un.nextTick(y)}:(Ce=fe(Ce,ae),w=function(){Ce(y)}):(P=!0,j=pn.createTextNode(""),new En(y).observe(j,{characterData:!0}),w=function(){j.data=P=!P})),p.exports=ot||function(_t){var bn={fn:_t,next:void 0};C&&(C.next=bn),b||(b=bn,w()),C=bn}},9297:(p,v,_)=>{var y=_(1899);p.exports=y.Promise},2497:(p,v,_)=>{var y=_(3385),b=_(5981);p.exports=!!Object.getOwnPropertySymbols&&!b(function(){var C=Symbol();return!String(C)||!(Object(C)instanceof Symbol)||!Symbol.sham&&y&&y<41})},8019:(p,v,_)=>{var y=_(1899),b=_(7475),C=_(1302),w=y.WeakMap;p.exports=b(w)&&/native code/.test(C(w))},9520:(p,v,_)=>{var y=_(4883),b=function(C){var w,P;this.promise=new C(function(j,G){if(void 0!==w||void 0!==P)throw TypeError("Bad Promise constructor");w=j,P=G}),this.resolve=y(w),this.reject=y(P)};p.exports.f=function(C){return new b(C)}},4649:(p,v,_)=>{var y=_(5803);p.exports=function(b,C){return void 0===b?arguments.length<2?"":C:y(b)}},9290:(p,v,_)=>{var y,b=_(6059),C=_(9938),w=_(6759),P=_(7748),j=_(5463),G=_(1333),Z=_(4262)("IE_PROTO"),ae=function(){},fe=function(it){return"<script>"+it+"<\/script>"},be=function(it){it.write(fe("")),it.close();var wt=it.parentWindow.Object;return it=null,wt},Ce=function(){try{y=new ActiveXObject("htmlfile")}catch{}var it,wt;Ce=typeof document<"u"?document.domain&&y?be(y):((wt=G("iframe")).style.display="none",j.appendChild(wt),wt.src=String("javascript:"),(it=wt.contentWindow.document).open(),it.write(fe("document.F=Object")),it.close(),it.F):be(y);for(var bt=w.length;bt--;)delete Ce.prototype[w[bt]];return Ce()};P[Z]=!0,p.exports=Object.create||function(it,wt){var bt;return null!==it?(ae.prototype=b(it),bt=new ae,ae.prototype=null,bt[Z]=it):bt=Ce(),void 0===wt?bt:C.f(bt,wt)}},9938:(p,v,_)=>{var y=_(5746),b=_(3937),C=_(5988),w=_(6059),P=_(4529),j=_(4771);v.f=y&&!b?Object.defineProperties:function(G,Z){w(G);for(var ae,fe=P(Z),be=j(Z),Ce=be.length,it=0;Ce>it;)C.f(G,ae=be[it++],fe[ae]);return G}},5988:(p,v,_)=>{var y=_(1899),b=_(5746),C=_(2840),w=_(3937),P=_(6059),j=_(3894),G=y.TypeError,Z=Object.defineProperty,ae=Object.getOwnPropertyDescriptor;v.f=b?w?function(fe,be,Ce){if(P(fe),be=j(be),P(Ce),"function"==typeof fe&&"prototype"===be&&"value"in Ce&&"writable"in Ce&&!Ce.writable){var it=ae(fe,be);it&&it.writable&&(fe[be]=Ce.value,Ce={configurable:"configurable"in Ce?Ce.configurable:it.configurable,enumerable:"enumerable"in Ce?Ce.enumerable:it.enumerable,writable:!1})}return Z(fe,be,Ce)}:Z:function(fe,be,Ce){if(P(fe),be=j(be),P(Ce),C)try{return Z(fe,be,Ce)}catch{}if("get"in Ce||"set"in Ce)throw G("Accessors not supported");return"value"in Ce&&(fe[be]=Ce.value),fe}},9677:(p,v,_)=>{var y=_(5746),b=_(8834),C=_(6760),w=_(1887),P=_(4529),j=_(3894),G=_(953),Z=_(2840),ae=Object.getOwnPropertyDescriptor;v.f=y?ae:function(fe,be){if(fe=P(fe),be=j(be),Z)try{return ae(fe,be)}catch{}if(G(fe,be))return w(!b(C.f,fe,be),fe[be])}},946:(p,v,_)=>{var y=_(5629),b=_(6759).concat("length","prototype");v.f=Object.getOwnPropertyNames||function(C){return y(C,b)}},7857:(p,v)=>{v.f=Object.getOwnPropertySymbols},249:(p,v,_)=>{var y=_(1899),b=_(953),C=_(7475),w=_(9678),P=_(4262),j=_(4160),G=P("IE_PROTO"),Z=y.Object,ae=Z.prototype;p.exports=j?Z.getPrototypeOf:function(fe){var be=w(fe);if(b(be,G))return be[G];var Ce=be.constructor;return C(Ce)&&be instanceof Ce?Ce.prototype:be instanceof Z?ae:null}},7046:(p,v,_)=>{var y=_(5329);p.exports=y({}.isPrototypeOf)},5629:(p,v,_)=>{var y=_(5329),b=_(953),C=_(4529),w=_(1692).indexOf,P=_(7748),j=y([].push);p.exports=function(G,Z){var ae,fe=C(G),be=0,Ce=[];for(ae in fe)!b(P,ae)&&b(fe,ae)&&j(Ce,ae);for(;Z.length>be;)b(fe,ae=Z[be++])&&(~w(Ce,ae)||j(Ce,ae));return Ce}},4771:(p,v,_)=>{var y=_(5629),b=_(6759);p.exports=Object.keys||function(C){return y(C,b)}},6760:(p,v)=>{var _={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,b=y&&!_.call({1:2},1);v.f=b?function(C){var w=y(this,C);return!!w&&w.enumerable}:_},8929:(p,v,_)=>{var y=_(5329),b=_(6059),C=_(1851);p.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var w,P=!1,j={};try{(w=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(j,[]),P=j instanceof Array}catch{}return function(G,Z){return b(G),C(Z),P?w(G,Z):G.__proto__=Z,G}}():void 0)},5623:(p,v,_)=>{var y=_(2885),b=_(9697);p.exports=y?{}.toString:function(){return"[object "+b(this)+"]"}},9811:(p,v,_)=>{var y=_(1899),b=_(8834),C=_(7475),w=_(941),P=y.TypeError;p.exports=function(j,G){var Z,ae;if("string"===G&&C(Z=j.toString)&&!w(ae=b(Z,j))||C(Z=j.valueOf)&&!w(ae=b(Z,j))||"string"!==G&&C(Z=j.toString)&&!w(ae=b(Z,j)))return ae;throw P("Can't convert object to primitive value")}},1136:(p,v,_)=>{var y=_(626),b=_(5329),C=_(946),w=_(7857),P=_(6059),j=b([].concat);p.exports=y("Reflect","ownKeys")||function(G){var Z=C.f(P(G)),ae=w.f;return ae?j(Z,ae(G)):Z}},4058:p=>{p.exports={}},2:p=>{p.exports=function(v){try{return{error:!1,value:v()}}catch(_){return{error:!0,value:_}}}},6584:(p,v,_)=>{var y=_(6059),b=_(941),C=_(9520);p.exports=function(w,P){if(y(w),b(P)&&P.constructor===w)return P;var j=C.f(w);return(0,j.resolve)(P),j.promise}},8397:p=>{var v=function(){this.head=null,this.tail=null};v.prototype={add:function(_){var y={item:_,next:null};this.head?this.tail.next=y:this.head=y,this.tail=y},get:function(){var _=this.head;if(_)return this.head=_.next,this.tail===_&&(this.tail=null),_.item}},p.exports=v},7524:(p,v,_)=>{var y=_(9754);p.exports=function(b,C,w){for(var P in C)w&&w.unsafe&&b[P]?b[P]=C[P]:y(b,P,C[P],w);return b}},9754:(p,v,_)=>{var y=_(2029);p.exports=function(b,C,w,P){P&&P.enumerable?b[C]=w:y(b,C,w)}},8219:(p,v,_)=>{var y=_(1899).TypeError;p.exports=function(b){if(null==b)throw y("Can't call method on "+b);return b}},4911:(p,v,_)=>{var y=_(1899),b=Object.defineProperty;p.exports=function(C,w){try{b(y,C,{value:w,configurable:!0,writable:!0})}catch{y[C]=w}return w}},4431:(p,v,_)=>{var y=_(626),b=_(5988),C=_(9813),w=_(5746),P=C("species");p.exports=function(j){var G=y(j);w&&G&&!G[P]&&(0,b.f)(G,P,{configurable:!0,get:function(){return this}})}},904:(p,v,_)=>{var y=_(2885),b=_(5988).f,C=_(2029),w=_(953),P=_(5623),j=_(9813)("toStringTag");p.exports=function(G,Z,ae,fe){if(G){var be=ae?G:G.prototype;w(be,j)||b(be,j,{configurable:!0,value:Z}),fe&&!y&&C(be,"toString",P)}}},4262:(p,v,_)=>{var y=_(8726),b=_(9418),C=y("keys");p.exports=function(w){return C[w]||(C[w]=b(w))}},3030:(p,v,_)=>{var y=_(1899),b=_(4911),C="__core-js_shared__",w=y[C]||b(C,{});p.exports=w},8726:(p,v,_)=>{var y=_(2529),b=_(3030);(p.exports=function(C,w){return b[C]||(b[C]=void 0!==w?w:{})})("versions",[]).push({version:"3.20.3",mode:y?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},487:(p,v,_)=>{var y=_(6059),b=_(174),C=_(9813)("species");p.exports=function(w,P){var j,G=y(w).constructor;return void 0===G||null==(j=y(G)[C])?P:b(j)}},4620:(p,v,_)=>{var y=_(5329),b=_(2435),C=_(5803),w=_(8219),P=y("".charAt),j=y("".charCodeAt),G=y("".slice),Z=function(ae){return function(fe,be){var Ce,it,wt=C(w(fe)),bt=b(be),Pt=wt.length;return bt<0||bt>=Pt?ae?"":void 0:(Ce=j(wt,bt))<55296||Ce>56319||bt+1===Pt||(it=j(wt,bt+1))<56320||it>57343?ae?P(wt,bt):Ce:ae?G(wt,bt,bt+2):it-56320+(Ce-55296<<10)+65536}};p.exports={codeAt:Z(!1),charAt:Z(!0)}},2941:(p,v,_)=>{var y,b,C,w,P=_(1899),j=_(9730),G=_(6843),Z=_(7475),ae=_(953),fe=_(5981),be=_(5463),Ce=_(3765),it=_(1333),wt=_(2749),bt=_(6049),Pt=P.setImmediate,En=P.clearImmediate,pn=P.process,un=P.Dispatch,yt=P.Function,Ge=P.MessageChannel,ot=P.String,_t=0,bn={};try{y=P.location}catch{}var Je=function(Rn){if(ae(bn,Rn)){var Vt=bn[Rn];delete bn[Rn],Vt()}},at=function(Rn){return function(){Je(Rn)}},Rt=function(Rn){Je(Rn.data)},cn=function(Rn){P.postMessage(ot(Rn),y.protocol+"//"+y.host)};Pt&&En||(Pt=function(Rn){var Vt=Ce(arguments,1);return bn[++_t]=function(){j(Z(Rn)?Rn:yt(Rn),void 0,Vt)},b(_t),_t},En=function(Rn){delete bn[Rn]},bt?b=function(Rn){pn.nextTick(at(Rn))}:un&&un.now?b=function(Rn){un.now(at(Rn))}:Ge&&!wt?(w=(C=new Ge).port2,C.port1.onmessage=Rt,b=G(w.postMessage,w)):P.addEventListener&&Z(P.postMessage)&&!P.importScripts&&y&&"file:"!==y.protocol&&!fe(cn)?(b=cn,P.addEventListener("message",Rt,!1)):b="onreadystatechange"in it("script")?function(Rn){be.appendChild(it("script")).onreadystatechange=function(){be.removeChild(this),Je(Rn)}}:function(Rn){setTimeout(at(Rn),0)}),p.exports={set:Pt,clear:En}},9413:(p,v,_)=>{var y=_(2435),b=Math.max,C=Math.min;p.exports=function(w,P){var j=y(w);return j<0?b(j+P,0):C(j,P)}},4529:(p,v,_)=>{var y=_(7026),b=_(8219);p.exports=function(C){return y(b(C))}},2435:p=>{var v=Math.ceil,_=Math.floor;p.exports=function(y){var b=+y;return b!=b||0===b?0:(b>0?_:v)(b)}},3057:(p,v,_)=>{var y=_(2435),b=Math.min;p.exports=function(C){return C>0?b(y(C),9007199254740991):0}},9678:(p,v,_)=>{var y=_(1899),b=_(8219),C=y.Object;p.exports=function(w){return C(b(w))}},6935:(p,v,_)=>{var y=_(1899),b=_(8834),C=_(941),w=_(6664),P=_(4229),j=_(9811),G=_(9813),Z=y.TypeError,ae=G("toPrimitive");p.exports=function(fe,be){if(!C(fe)||w(fe))return fe;var Ce,it=P(fe,ae);if(it){if(void 0===be&&(be="default"),Ce=b(it,fe,be),!C(Ce)||w(Ce))return Ce;throw Z("Can't convert object to primitive value")}return void 0===be&&(be="number"),j(fe,be)}},3894:(p,v,_)=>{var y=_(6935),b=_(6664);p.exports=function(C){var w=y(C,"string");return b(w)?w:w+""}},2885:(p,v,_)=>{var y={};y[_(9813)("toStringTag")]="z",p.exports="[object z]"===String(y)},5803:(p,v,_)=>{var y=_(1899),b=_(9697),C=y.String;p.exports=function(w){if("Symbol"===b(w))throw TypeError("Cannot convert a Symbol value to a string");return C(w)}},9826:(p,v,_)=>{var y=_(1899).String;p.exports=function(b){try{return y(b)}catch{return"Object"}}},9418:(p,v,_)=>{var y=_(5329),b=0,C=Math.random(),w=y(1..toString);p.exports=function(P){return"Symbol("+(void 0===P?"":P)+")_"+w(++b+C,36)}},2302:(p,v,_)=>{var y=_(2497);p.exports=y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:(p,v,_)=>{var y=_(5746),b=_(5981);p.exports=y&&b(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},9813:(p,v,_)=>{var y=_(1899),b=_(8726),C=_(953),w=_(9418),P=_(2497),j=_(2302),G=b("wks"),Z=y.Symbol,ae=Z&&Z.for,fe=j?Z:Z&&Z.withoutSetter||w;p.exports=function(be){if(!C(G,be)||!P&&"string"!=typeof G[be]){var Ce="Symbol."+be;G[be]=P&&C(Z,be)?Z[be]:j&&ae?ae(Ce):fe(Ce)}return G[be]}},7627:(p,v,_)=>{var y=_(6887),b=_(1899),C=_(7046),w=_(249),P=_(8929),j=_(3489),G=_(9290),Z=_(2029),ae=_(1887),fe=_(8694),be=_(3794),Ce=_(3091),it=_(4649),wt=_(9813),bt=_(8780),Pt=wt("toStringTag"),En=b.Error,pn=[].push,un=function(Ge,ot){var _t,bn=arguments.length>2?arguments[2]:void 0,Je=C(yt,this);P?_t=P(new En,Je?w(this):yt):(_t=Je?this:G(yt),Z(_t,Pt,"Error")),void 0!==ot&&Z(_t,"message",it(ot)),bt&&Z(_t,"stack",fe(_t.stack,1)),be(_t,bn);var at=[];return Ce(Ge,pn,{that:at}),Z(_t,"errors",at),_t};P?P(un,En):j(un,En,{name:!0});var yt=un.prototype=G(En.prototype,{constructor:ae(1,un),message:ae(1,""),name:ae(1,"AggregateError")});y({global:!0},{AggregateError:un})},6274:(p,v,_)=>{var y=_(4529),b=_(8479),C=_(2077),w=_(5402),P=_(5988).f,j=_(7771),G=_(2529),Z=_(5746),ae="Array Iterator",fe=w.set,be=w.getterFor(ae);p.exports=j(Array,"Array",function(it,wt){fe(this,{type:ae,target:y(it),index:0,kind:wt})},function(){var it=be(this),wt=it.target,bt=it.kind,Pt=it.index++;return!wt||Pt>=wt.length?(it.target=void 0,{value:void 0,done:!0}):"keys"==bt?{value:Pt,done:!1}:"values"==bt?{value:wt[Pt],done:!1}:{value:[Pt,wt[Pt]],done:!1}},"values");var Ce=C.Arguments=C.Array;if(b("keys"),b("values"),b("entries"),!G&&Z&&"values"!==Ce.name)try{P(Ce,"name",{value:"values"})}catch{}},6450:(p,v,_)=>{var y=_(6887),b=_(5746),C=_(5988).f;y({target:"Object",stat:!0,forced:Object.defineProperty!==C,sham:!b},{defineProperty:C})},5967:()=>{},4560:(p,v,_)=>{var y=_(6887),b=_(8834),C=_(4883),w=_(9520),P=_(2),j=_(3091);y({target:"Promise",stat:!0},{allSettled:function(G){var Z=this,ae=w.f(Z),fe=ae.resolve,be=ae.reject,Ce=P(function(){var it=C(Z.resolve),wt=[],bt=0,Pt=1;j(G,function(En){var pn=bt++,un=!1;Pt++,b(it,Z,En).then(function(yt){un||(un=!0,wt[pn]={status:"fulfilled",value:yt},--Pt||fe(wt))},function(yt){un||(un=!0,wt[pn]={status:"rejected",reason:yt},--Pt||fe(wt))})}),--Pt||fe(wt)});return Ce.error&&be(Ce.value),ae.promise}})},7206:(p,v,_)=>{var y=_(6887),b=_(4883),C=_(626),w=_(8834),P=_(9520),j=_(2),G=_(3091),Z="No one promise resolved";y({target:"Promise",stat:!0},{any:function(ae){var fe=this,be=C("AggregateError"),Ce=P.f(fe),it=Ce.resolve,wt=Ce.reject,bt=j(function(){var Pt=b(fe.resolve),En=[],pn=0,un=1,yt=!1;G(ae,function(Ge){var ot=pn++,_t=!1;un++,w(Pt,fe,Ge).then(function(bn){_t||yt||(yt=!0,it(bn))},function(bn){_t||yt||(_t=!0,En[ot]=bn,--un||wt(new be(En,Z)))})}),--un||wt(new be(En,Z))});return bt.error&&wt(bt.value),Ce.promise}})},4349:(p,v,_)=>{var y=_(6887),b=_(2529),C=_(9297),w=_(5981),P=_(626),j=_(7475),G=_(487),Z=_(6584),ae=_(9754);if(y({target:"Promise",proto:!0,real:!0,forced:!!C&&w(function(){C.prototype.finally.call({then:function(){}},function(){})})},{finally:function(be){var Ce=G(this,P("Promise")),it=j(be);return this.then(it?function(wt){return Z(Ce,be()).then(function(){return wt})}:be,it?function(wt){return Z(Ce,be()).then(function(){throw wt})}:be)}}),!b&&j(C)){var fe=P("Promise").prototype.finally;C.prototype.finally!==fe&&ae(C.prototype,"finally",fe,{unsafe:!0})}},8881:(p,v,_)=>{var y,b,C,w,P=_(6887),j=_(2529),G=_(1899),Z=_(626),ae=_(8834),fe=_(9297),be=_(9754),Ce=_(7524),it=_(8929),wt=_(904),bt=_(4431),Pt=_(4883),En=_(7475),pn=_(941),un=_(5743),yt=_(1302),Ge=_(3091),ot=_(1385),_t=_(487),bn=_(2941).set,Je=_(6132),at=_(6584),Rt=_(4845),cn=_(9520),Rn=_(2),Vt=_(8397),V=_(5402),_e=_(7252),ke=_(9813),Nt=_(3321),In=_(6049),Tr=_(3385),Cr=ke("species"),xr="Promise",Qi=V.getterFor(xr),Nc=V.set,ya=V.getterFor(xr),Eo=fe&&fe.prototype,Ji=fe,Qs=Eo,jp=G.TypeError,zd=G.document,Qp=G.process,bs=cn.f,EG=bs,pt=!!(zd&&zd.createEvent&&G.dispatchEvent),ye=En(G.PromiseRejectionEvent),nt="unhandledrejection",Ot=!1,ft=_e(xr,function(){var On=yt(Ji),Jn=On!==String(Ji);if(!Jn&&66===Tr||j&&!Qs.finally)return!0;if(Tr>=51&&/native code/.test(On))return!1;var Vr=new Ji(function(Ea){Ea(1)}),Hi=function(Ea){Ea(function(){},function(){})};return(Vr.constructor={})[Cr]=Hi,!(Ot=Vr.then(function(){})instanceof Hi)||!Jn&&Nt&&!ye}),fn=ft||!ot(function(On){Ji.all(On).catch(function(){})}),rn=function(On){var Jn;return!(!pn(On)||!En(Jn=On.then))&&Jn},Wn=function(On,Jn){var Vr,Hi,Ea,Lv=Jn.value,X2=1==Jn.state,cw=X2?On.ok:On.fail,Aj=On.resolve,g0=On.reject,_0=On.domain;try{cw?(X2||(2===Jn.rejection&&Ir(Jn),Jn.rejection=1),!0===cw?Vr=Lv:(_0&&_0.enter(),Vr=cw(Lv),_0&&(_0.exit(),Ea=!0)),Vr===On.promise?g0(jp("Promise-chain cycle")):(Hi=rn(Vr))?ae(Hi,Vr,Aj,g0):Aj(Vr)):g0(Lv)}catch(bG){_0&&!Ea&&_0.exit(),g0(bG)}},kr=function(On,Jn){On.notified||(On.notified=!0,Je(function(){for(var Vr,Hi=On.reactions;Vr=Hi.get();)Wn(Vr,On);On.notified=!1,Jn&&!On.rejection&&wn(On)}))},Gr=function(On,Jn,Vr){var Hi,Ea;pt?((Hi=zd.createEvent("Event")).promise=Jn,Hi.reason=Vr,Hi.initEvent(On,!1,!0),G.dispatchEvent(Hi)):Hi={promise:Jn,reason:Vr},!ye&&(Ea=G["on"+On])?Ea(Hi):On===nt&&Rt("Unhandled promise rejection",Vr)},wn=function(On){ae(bn,G,function(){var Jn,Vr=On.facade,Hi=On.value;if(Xn(On)&&(Jn=Rn(function(){In?Qp.emit("unhandledRejection",Hi,Vr):Gr(nt,Vr,Hi)}),On.rejection=In||Xn(On)?2:1,Jn.error))throw Jn.value})},Xn=function(On){return 1!==On.rejection&&!On.parent},Ir=function(On){ae(bn,G,function(){var Jn=On.facade;In?Qp.emit("rejectionHandled",Jn):Gr("rejectionhandled",Jn,On.value)})},Ti=function(On,Jn,Vr){return function(Hi){On(Jn,Hi,Vr)}},us=function(On,Jn,Vr){On.done||(On.done=!0,Vr&&(On=Vr),On.value=Jn,On.state=2,kr(On,!0))},du=function(On,Jn,Vr){if(!On.done){On.done=!0,Vr&&(On=Vr);try{if(On.facade===Jn)throw jp("Promise can't be resolved itself");var Hi=rn(Jn);Hi?Je(function(){var Ea={done:!1};try{ae(Hi,Jn,Ti(du,Ea,On),Ti(us,Ea,On))}catch(Lv){us(Ea,Lv,On)}}):(On.value=Jn,On.state=1,kr(On,!1))}catch(Ea){us({done:!1},Ea,On)}}};if(ft&&(Qs=(Ji=function(On){un(this,Qs),Pt(On),ae(y,this);var Jn=Qi(this);try{On(Ti(du,Jn),Ti(us,Jn))}catch(Vr){us(Jn,Vr)}}).prototype,(y=function(On){Nc(this,{type:xr,done:!1,notified:!1,parent:!1,reactions:new Vt,rejection:!1,state:0,value:void 0})}).prototype=Ce(Qs,{then:function(On,Jn){var Vr=ya(this),Hi=bs(_t(this,Ji));return Vr.parent=!0,Hi.ok=!En(On)||On,Hi.fail=En(Jn)&&Jn,Hi.domain=In?Qp.domain:void 0,0==Vr.state?Vr.reactions.add(Hi):Je(function(){Wn(Hi,Vr)}),Hi.promise},catch:function(On){return this.then(void 0,On)}}),b=function(){var On=new y,Jn=Qi(On);this.promise=On,this.resolve=Ti(du,Jn),this.reject=Ti(us,Jn)},cn.f=bs=function(On){return On===Ji||On===C?new b(On):EG(On)},!j&&En(fe)&&Eo!==Object.prototype)){w=Eo.then,Ot||(be(Eo,"then",function(On,Jn){var Vr=this;return new Ji(function(Hi,Ea){ae(w,Vr,Hi,Ea)}).then(On,Jn)},{unsafe:!0}),be(Eo,"catch",Qs.catch,{unsafe:!0}));try{delete Eo.constructor}catch{}it&&it(Eo,Qs)}P({global:!0,wrap:!0,forced:ft},{Promise:Ji}),wt(Ji,xr,!1,!0),bt(xr),C=Z(xr),P({target:xr,stat:!0,forced:ft},{reject:function(On){var Jn=bs(this);return ae(Jn.reject,void 0,On),Jn.promise}}),P({target:xr,stat:!0,forced:j||ft},{resolve:function(On){return at(j&&this===C?Ji:this,On)}}),P({target:xr,stat:!0,forced:fn},{all:function(On){var Jn=this,Vr=bs(Jn),Hi=Vr.resolve,Ea=Vr.reject,Lv=Rn(function(){var X2=Pt(Jn.resolve),cw=[],Aj=0,g0=1;Ge(On,function(_0){var bG=Aj++,Lz=!1;g0++,ae(X2,Jn,_0).then(function(Fz){Lz||(Lz=!0,cw[bG]=Fz,--g0||Hi(cw))},Ea)}),--g0||Hi(cw)});return Lv.error&&Ea(Lv.value),Vr.promise},race:function(On){var Jn=this,Vr=bs(Jn),Hi=Vr.reject,Ea=Rn(function(){var Lv=Pt(Jn.resolve);Ge(On,function(X2){ae(Lv,Jn,X2).then(Vr.resolve,Hi)})});return Ea.error&&Hi(Ea.value),Vr.promise}})},7971:(p,v,_)=>{var y=_(4620).charAt,b=_(5803),C=_(5402),w=_(7771),P="String Iterator",j=C.set,G=C.getterFor(P);w(String,"String",function(Z){j(this,{type:P,string:b(Z),index:0})},function(){var Z,ae=G(this),fe=ae.string,be=ae.index;return be>=fe.length?{value:void 0,done:!0}:(Z=y(fe,be),ae.index+=Z.length,{value:Z,done:!1})})},7634:(p,v,_)=>{_(6274);var y=_(3281),b=_(1899),C=_(9697),w=_(2029),P=_(2077),j=_(9813)("toStringTag");for(var G in y){var Z=b[G],ae=Z&&Z.prototype;ae&&C(ae)!==j&&w(ae,j,G),P[G]=P.Array}},1910:(p,v,_)=>{var y=_(8171);p.exports=y},7460:(p,v,_)=>{var y=_(2956);_(7634),p.exports=y},9662:(p,v,_)=>{var y=_(7854),b=_(614),C=_(6330),w=y.TypeError;p.exports=function(P){if(b(P))return P;throw w(C(P)+" is not a function")}},6077:(p,v,_)=>{var y=_(7854),b=_(614),C=y.String,w=y.TypeError;p.exports=function(P){if("object"==typeof P||b(P))return P;throw w("Can't set "+C(P)+" as a prototype")}},1223:(p,v,_)=>{var y=_(5112),b=_(30),C=_(3070),w=y("unscopables"),P=Array.prototype;null==P[w]&&C.f(P,w,{configurable:!0,value:b(null)}),p.exports=function(j){P[w][j]=!0}},9670:(p,v,_)=>{var y=_(7854),b=_(111),C=y.String,w=y.TypeError;p.exports=function(P){if(b(P))return P;throw w(C(P)+" is not an object")}},1318:(p,v,_)=>{var y=_(5656),b=_(1400),C=_(6244),w=function(P){return function(j,G,Z){var ae,fe=y(j),be=C(fe),Ce=b(Z,be);if(P&&G!=G){for(;be>Ce;)if((ae=fe[Ce++])!=ae)return!0}else for(;be>Ce;Ce++)if((P||Ce in fe)&&fe[Ce]===G)return P||Ce||0;return!P&&-1}};p.exports={includes:w(!0),indexOf:w(!1)}},4326:(p,v,_)=>{var y=_(1702),b=y({}.toString),C=y("".slice);p.exports=function(w){return C(b(w),8,-1)}},648:(p,v,_)=>{var y=_(7854),b=_(1694),C=_(614),w=_(4326),P=_(5112)("toStringTag"),j=y.Object,G="Arguments"==w(function(){return arguments}());p.exports=b?w:function(Z){var ae,fe,be;return void 0===Z?"Undefined":null===Z?"Null":"string"==typeof(fe=function(Ce,it){try{return Ce[it]}catch{}}(ae=j(Z),P))?fe:G?w(ae):"Object"==(be=w(ae))&&C(ae.callee)?"Arguments":be}},7741:(p,v,_)=>{var y=_(1702)("".replace),b=String(Error("zxcasd").stack),C=/\n\s*at [^:]*:[^\n]*/,w=C.test(b);p.exports=function(P,j){if(w&&"string"==typeof P)for(;j--;)P=y(P,C,"");return P}},9920:(p,v,_)=>{var y=_(2597),b=_(3887),C=_(1236),w=_(3070);p.exports=function(P,j,G){for(var Z=b(j),ae=w.f,fe=C.f,be=0;be<Z.length;be++){var Ce=Z[be];y(P,Ce)||G&&y(G,Ce)||ae(P,Ce,fe(j,Ce))}}},8544:(p,v,_)=>{var y=_(7293);p.exports=!y(function(){function b(){}return b.prototype.constructor=null,Object.getPrototypeOf(new b)!==b.prototype})},4994:(p,v,_)=>{var y=_(3383).IteratorPrototype,b=_(30),C=_(9114),w=_(8003),P=_(7497),j=function(){return this};p.exports=function(G,Z,ae,fe){var be=Z+" Iterator";return G.prototype=b(y,{next:C(+!fe,ae)}),w(G,be,!1,!0),P[be]=j,G}},8880:(p,v,_)=>{var y=_(9781),b=_(3070),C=_(9114);p.exports=y?function(w,P,j){return b.f(w,P,C(1,j))}:function(w,P,j){return w[P]=j,w}},9114:p=>{p.exports=function(v,_){return{enumerable:!(1&v),configurable:!(2&v),writable:!(4&v),value:_}}},654:(p,v,_)=>{var y=_(2109),b=_(6916),C=_(1913),w=_(6530),P=_(614),j=_(4994),G=_(9518),Z=_(7674),ae=_(8003),fe=_(8880),be=_(1320),Ce=_(5112),it=_(7497),wt=_(3383),bt=w.PROPER,Pt=w.CONFIGURABLE,En=wt.IteratorPrototype,pn=wt.BUGGY_SAFARI_ITERATORS,un=Ce("iterator"),Ge="values",ot="entries",_t=function(){return this};p.exports=function(bn,Je,at,Rt,cn,Rn,Vt){j(at,Je,Rt);var V,_e,ke,Nt=function(ya){if(ya===cn&&Qi)return Qi;if(!pn&&ya in Cr)return Cr[ya];switch(ya){case"keys":case Ge:case ot:return function(){return new at(this,ya)}}return function(){return new at(this)}},In=Je+" Iterator",Tr=!1,Cr=bn.prototype,xr=Cr[un]||Cr["@@iterator"]||cn&&Cr[cn],Qi=!pn&&xr||Nt(cn),Nc="Array"==Je&&Cr.entries||xr;if(Nc&&(V=G(Nc.call(new bn)))!==Object.prototype&&V.next&&(C||G(V)===En||(Z?Z(V,En):P(V[un])||be(V,un,_t)),ae(V,In,!0,!0),C&&(it[In]=_t)),bt&&cn==Ge&&xr&&xr.name!==Ge&&(!C&&Pt?fe(Cr,"name",Ge):(Tr=!0,Qi=function(){return b(xr,this)})),cn)if(_e={values:Nt(Ge),keys:Rn?Qi:Nt("keys"),entries:Nt(ot)},Vt)for(ke in _e)(pn||Tr||!(ke in Cr))&&be(Cr,ke,_e[ke]);else y({target:Je,proto:!0,forced:pn||Tr},_e);return C&&!Vt||Cr[un]===Qi||be(Cr,un,Qi,{name:cn}),it[Je]=Qi,_e}},9781:(p,v,_)=>{var y=_(7293);p.exports=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:(p,v,_)=>{var y=_(7854),b=_(111),C=y.document,w=b(C)&&b(C.createElement);p.exports=function(P){return w?C.createElement(P):{}}},8324:p=>{p.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(p,v,_)=>{var y=_(317)("span").classList,b=y&&y.constructor&&y.constructor.prototype;p.exports=b===Object.prototype?void 0:b},8113:(p,v,_)=>{var y=_(5005);p.exports=y("navigator","userAgent")||""},7392:(p,v,_)=>{var y,b,C=_(7854),w=_(8113),P=C.process,j=C.Deno,G=P&&P.versions||j&&j.version,Z=G&&G.v8;Z&&(b=(y=Z.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!b&&w&&(!(y=w.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=w.match(/Chrome\/(\d+)/))&&(b=+y[1]),p.exports=b},748:p=>{p.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:(p,v,_)=>{var y=_(7293),b=_(9114);p.exports=!y(function(){var C=Error("a");return!("stack"in C)||(Object.defineProperty(C,"stack",b(1,7)),7!==C.stack)})},2109:(p,v,_)=>{var y=_(7854),b=_(1236).f,C=_(8880),w=_(1320),P=_(3505),j=_(9920),G=_(4705);p.exports=function(Z,ae){var fe,be,Ce,it,wt,bt=Z.target,Pt=Z.global,En=Z.stat;if(fe=Pt?y:En?y[bt]||P(bt,{}):(y[bt]||{}).prototype)for(be in ae){if(it=ae[be],Ce=Z.noTargetGet?(wt=b(fe,be))&&wt.value:fe[be],!G(Pt?be:bt+(En?".":"#")+be,Z.forced)&&void 0!==Ce){if(typeof it==typeof Ce)continue;j(it,Ce)}(Z.sham||Ce&&Ce.sham)&&C(it,"sham",!0),w(fe,be,it,Z)}}},7293:p=>{p.exports=function(v){try{return!!v()}catch{return!0}}},2104:(p,v,_)=>{var y=_(4374),b=Function.prototype,C=b.apply,w=b.call;p.exports="object"==typeof Reflect&&Reflect.apply||(y?w.bind(C):function(){return w.apply(C,arguments)})},4374:(p,v,_)=>{var y=_(7293);p.exports=!y(function(){var b=function(){}.bind();return"function"!=typeof b||b.hasOwnProperty("prototype")})},6916:(p,v,_)=>{var y=_(4374),b=Function.prototype.call;p.exports=y?b.bind(b):function(){return b.apply(b,arguments)}},6530:(p,v,_)=>{var y=_(9781),b=_(2597),C=Function.prototype,w=y&&Object.getOwnPropertyDescriptor,P=b(C,"name"),j=P&&"something"===function(){}.name,G=P&&(!y||y&&w(C,"name").configurable);p.exports={EXISTS:P,PROPER:j,CONFIGURABLE:G}},1702:(p,v,_)=>{var y=_(4374),b=Function.prototype,w=b.call,P=y&&b.bind.bind(w,w);p.exports=y?function(j){return j&&P(j)}:function(j){return j&&function(){return w.apply(j,arguments)}}},5005:(p,v,_)=>{var y=_(7854),b=_(614),C=function(w){return b(w)?w:void 0};p.exports=function(w,P){return arguments.length<2?C(y[w]):y[w]&&y[w][P]}},8173:(p,v,_)=>{var y=_(9662);p.exports=function(b,C){var w=b[C];return null==w?void 0:y(w)}},7854:(p,v,_)=>{var y=function(b){return b&&b.Math==Math&&b};p.exports=y("object"==typeof globalThis&&globalThis)||y("object"==typeof window&&window)||y("object"==typeof self&&self)||y("object"==typeof _.g&&_.g)||function(){return this}()||Function("return this")()},2597:(p,v,_)=>{var y=_(1702),b=_(7908),C=y({}.hasOwnProperty);p.exports=Object.hasOwn||function(w,P){return C(b(w),P)}},3501:p=>{p.exports={}},490:(p,v,_)=>{var y=_(5005);p.exports=y("document","documentElement")},4664:(p,v,_)=>{var y=_(9781),b=_(7293),C=_(317);p.exports=!y&&!b(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})},8361:(p,v,_)=>{var y=_(7854),b=_(1702),C=_(7293),w=_(4326),P=y.Object,j=b("".split);p.exports=C(function(){return!P("z").propertyIsEnumerable(0)})?function(G){return"String"==w(G)?j(G,""):P(G)}:P},9587:(p,v,_)=>{var y=_(614),b=_(111),C=_(7674);p.exports=function(w,P,j){var G,Z;return C&&y(G=P.constructor)&&G!==j&&b(Z=G.prototype)&&Z!==j.prototype&&C(w,Z),w}},2788:(p,v,_)=>{var y=_(1702),b=_(614),C=_(5465),w=y(Function.toString);b(C.inspectSource)||(C.inspectSource=function(P){return w(P)}),p.exports=C.inspectSource},8340:(p,v,_)=>{var y=_(111),b=_(8880);p.exports=function(C,w){y(w)&&"cause"in w&&b(C,"cause",w.cause)}},9909:(p,v,_)=>{var y,b,C,w=_(8536),P=_(7854),j=_(1702),G=_(111),Z=_(8880),ae=_(2597),fe=_(5465),be=_(6200),Ce=_(3501),it="Object already initialized",wt=P.TypeError;if(w||fe.state){var Pt=fe.state||(fe.state=new(0,P.WeakMap)),En=j(Pt.get),pn=j(Pt.has),un=j(Pt.set);y=function(Ge,ot){if(pn(Pt,Ge))throw new wt(it);return ot.facade=Ge,un(Pt,Ge,ot),ot},b=function(Ge){return En(Pt,Ge)||{}},C=function(Ge){return pn(Pt,Ge)}}else{var yt=be("state");Ce[yt]=!0,y=function(Ge,ot){if(ae(Ge,yt))throw new wt(it);return ot.facade=Ge,Z(Ge,yt,ot),ot},b=function(Ge){return ae(Ge,yt)?Ge[yt]:{}},C=function(Ge){return ae(Ge,yt)}}p.exports={set:y,get:b,has:C,enforce:function(Ge){return C(Ge)?b(Ge):y(Ge,{})},getterFor:function(Ge){return function(ot){var _t;if(!G(ot)||(_t=b(ot)).type!==Ge)throw wt("Incompatible receiver, "+Ge+" required");return _t}}}},614:p=>{p.exports=function(v){return"function"==typeof v}},4705:(p,v,_)=>{var y=_(7293),b=_(614),C=/#|\.prototype\./,w=function(ae,fe){var be=j[P(ae)];return be==Z||be!=G&&(b(fe)?y(fe):!!fe)},P=w.normalize=function(ae){return String(ae).replace(C,".").toLowerCase()},j=w.data={},G=w.NATIVE="N",Z=w.POLYFILL="P";p.exports=w},111:(p,v,_)=>{var y=_(614);p.exports=function(b){return"object"==typeof b?null!==b:y(b)}},1913:p=>{p.exports=!1},2190:(p,v,_)=>{var y=_(7854),b=_(5005),C=_(614),w=_(7976),P=_(3307),j=y.Object;p.exports=P?function(G){return"symbol"==typeof G}:function(G){var Z=b("Symbol");return C(Z)&&w(Z.prototype,j(G))}},3383:(p,v,_)=>{var y,b,C,w=_(7293),P=_(614),j=_(30),G=_(9518),Z=_(1320),ae=_(5112),fe=_(1913),be=ae("iterator"),Ce=!1;[].keys&&("next"in(C=[].keys())?(b=G(G(C)))!==Object.prototype&&(y=b):Ce=!0),null==y||w(function(){var it={};return y[be].call(it)!==it})?y={}:fe&&(y=j(y)),P(y[be])||Z(y,be,function(){return this}),p.exports={IteratorPrototype:y,BUGGY_SAFARI_ITERATORS:Ce}},7497:p=>{p.exports={}},6244:(p,v,_)=>{var y=_(7466);p.exports=function(b){return y(b.length)}},133:(p,v,_)=>{var y=_(7392),b=_(7293);p.exports=!!Object.getOwnPropertySymbols&&!b(function(){var C=Symbol();return!String(C)||!(Object(C)instanceof Symbol)||!Symbol.sham&&y&&y<41})},8536:(p,v,_)=>{var y=_(7854),b=_(614),C=_(2788),w=y.WeakMap;p.exports=b(w)&&/native code/.test(C(w))},6277:(p,v,_)=>{var y=_(1340);p.exports=function(b,C){return void 0===b?arguments.length<2?"":C:y(b)}},30:(p,v,_)=>{var y,b=_(9670),C=_(6048),w=_(748),P=_(3501),j=_(490),G=_(317),Z=_(6200)("IE_PROTO"),ae=function(){},fe=function(it){return"<script>"+it+"<\/script>"},be=function(it){it.write(fe("")),it.close();var wt=it.parentWindow.Object;return it=null,wt},Ce=function(){try{y=new ActiveXObject("htmlfile")}catch{}var it,wt;Ce=typeof document<"u"?document.domain&&y?be(y):((wt=G("iframe")).style.display="none",j.appendChild(wt),wt.src=String("javascript:"),(it=wt.contentWindow.document).open(),it.write(fe("document.F=Object")),it.close(),it.F):be(y);for(var bt=w.length;bt--;)delete Ce.prototype[w[bt]];return Ce()};P[Z]=!0,p.exports=Object.create||function(it,wt){var bt;return null!==it?(ae.prototype=b(it),bt=new ae,ae.prototype=null,bt[Z]=it):bt=Ce(),void 0===wt?bt:C.f(bt,wt)}},6048:(p,v,_)=>{var y=_(9781),b=_(3353),C=_(3070),w=_(9670),P=_(5656),j=_(1956);v.f=y&&!b?Object.defineProperties:function(G,Z){w(G);for(var ae,fe=P(Z),be=j(Z),Ce=be.length,it=0;Ce>it;)C.f(G,ae=be[it++],fe[ae]);return G}},3070:(p,v,_)=>{var y=_(7854),b=_(9781),C=_(4664),w=_(3353),P=_(9670),j=_(4948),G=y.TypeError,Z=Object.defineProperty,ae=Object.getOwnPropertyDescriptor;v.f=b?w?function(fe,be,Ce){if(P(fe),be=j(be),P(Ce),"function"==typeof fe&&"prototype"===be&&"value"in Ce&&"writable"in Ce&&!Ce.writable){var it=ae(fe,be);it&&it.writable&&(fe[be]=Ce.value,Ce={configurable:"configurable"in Ce?Ce.configurable:it.configurable,enumerable:"enumerable"in Ce?Ce.enumerable:it.enumerable,writable:!1})}return Z(fe,be,Ce)}:Z:function(fe,be,Ce){if(P(fe),be=j(be),P(Ce),C)try{return Z(fe,be,Ce)}catch{}if("get"in Ce||"set"in Ce)throw G("Accessors not supported");return"value"in Ce&&(fe[be]=Ce.value),fe}},1236:(p,v,_)=>{var y=_(9781),b=_(6916),C=_(5296),w=_(9114),P=_(5656),j=_(4948),G=_(2597),Z=_(4664),ae=Object.getOwnPropertyDescriptor;v.f=y?ae:function(fe,be){if(fe=P(fe),be=j(be),Z)try{return ae(fe,be)}catch{}if(G(fe,be))return w(!b(C.f,fe,be),fe[be])}},8006:(p,v,_)=>{var y=_(6324),b=_(748).concat("length","prototype");v.f=Object.getOwnPropertyNames||function(C){return y(C,b)}},5181:(p,v)=>{v.f=Object.getOwnPropertySymbols},9518:(p,v,_)=>{var y=_(7854),b=_(2597),C=_(614),w=_(7908),P=_(6200),j=_(8544),G=P("IE_PROTO"),Z=y.Object,ae=Z.prototype;p.exports=j?Z.getPrototypeOf:function(fe){var be=w(fe);if(b(be,G))return be[G];var Ce=be.constructor;return C(Ce)&&be instanceof Ce?Ce.prototype:be instanceof Z?ae:null}},7976:(p,v,_)=>{var y=_(1702);p.exports=y({}.isPrototypeOf)},6324:(p,v,_)=>{var y=_(1702),b=_(2597),C=_(5656),w=_(1318).indexOf,P=_(3501),j=y([].push);p.exports=function(G,Z){var ae,fe=C(G),be=0,Ce=[];for(ae in fe)!b(P,ae)&&b(fe,ae)&&j(Ce,ae);for(;Z.length>be;)b(fe,ae=Z[be++])&&(~w(Ce,ae)||j(Ce,ae));return Ce}},1956:(p,v,_)=>{var y=_(6324),b=_(748);p.exports=Object.keys||function(C){return y(C,b)}},5296:(p,v)=>{var _={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,b=y&&!_.call({1:2},1);v.f=b?function(C){var w=y(this,C);return!!w&&w.enumerable}:_},7674:(p,v,_)=>{var y=_(1702),b=_(9670),C=_(6077);p.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var w,P=!1,j={};try{(w=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(j,[]),P=j instanceof Array}catch{}return function(G,Z){return b(G),C(Z),P?w(G,Z):G.__proto__=Z,G}}():void 0)},2140:(p,v,_)=>{var y=_(7854),b=_(6916),C=_(614),w=_(111),P=y.TypeError;p.exports=function(j,G){var Z,ae;if("string"===G&&C(Z=j.toString)&&!w(ae=b(Z,j))||C(Z=j.valueOf)&&!w(ae=b(Z,j))||"string"!==G&&C(Z=j.toString)&&!w(ae=b(Z,j)))return ae;throw P("Can't convert object to primitive value")}},3887:(p,v,_)=>{var y=_(5005),b=_(1702),C=_(8006),w=_(5181),P=_(9670),j=b([].concat);p.exports=y("Reflect","ownKeys")||function(G){var Z=C.f(P(G)),ae=w.f;return ae?j(Z,ae(G)):Z}},1320:(p,v,_)=>{var y=_(7854),b=_(614),C=_(2597),w=_(8880),P=_(3505),j=_(2788),G=_(9909),Z=_(6530).CONFIGURABLE,ae=G.get,fe=G.enforce,be=String(String).split("String");(p.exports=function(Ce,it,wt,bt){var Pt,En=!!bt&&!!bt.unsafe,pn=!!bt&&!!bt.enumerable,un=!!bt&&!!bt.noTargetGet,yt=bt&&void 0!==bt.name?bt.name:it;b(wt)&&("Symbol("===String(yt).slice(0,7)&&(yt="["+String(yt).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!C(wt,"name")||Z&&wt.name!==yt)&&w(wt,"name",yt),(Pt=fe(wt)).source||(Pt.source=be.join("string"==typeof yt?yt:""))),Ce!==y?(En?!un&&Ce[it]&&(pn=!0):delete Ce[it],pn?Ce[it]=wt:w(Ce,it,wt)):pn?Ce[it]=wt:P(it,wt)})(Function.prototype,"toString",function(){return b(this)&&ae(this).source||j(this)})},2261:(p,v,_)=>{var y,b,C=_(6916),w=_(1702),P=_(1340),j=_(7066),G=_(2999),Z=_(2309),ae=_(30),fe=_(9909).get,be=_(9441),Ce=_(7168),it=Z("native-string-replace",String.prototype.replace),wt=RegExp.prototype.exec,bt=wt,Pt=w("".charAt),En=w("".indexOf),pn=w("".replace),un=w("".slice),yt=(b=/b*/g,C(wt,y=/a/,"a"),C(wt,b,"a"),0!==y.lastIndex||0!==b.lastIndex),Ge=G.BROKEN_CARET,ot=void 0!==/()??/.exec("")[1];(yt||ot||Ge||be||Ce)&&(bt=function(_t){var bn,Je,at,Rt,cn,Rn,Vt,V=this,_e=fe(V),ke=P(_t),Nt=_e.raw;if(Nt)return Nt.lastIndex=V.lastIndex,bn=C(bt,Nt,ke),V.lastIndex=Nt.lastIndex,bn;var In=_e.groups,Tr=Ge&&V.sticky,Cr=C(j,V),xr=V.source,Qi=0,Nc=ke;if(Tr&&(Cr=pn(Cr,"y",""),-1===En(Cr,"g")&&(Cr+="g"),Nc=un(ke,V.lastIndex),V.lastIndex>0&&(!V.multiline||V.multiline&&"\n"!==Pt(ke,V.lastIndex-1))&&(xr="(?: "+xr+")",Nc=" "+Nc,Qi++),Je=new RegExp("^(?:"+xr+")",Cr)),ot&&(Je=new RegExp("^"+xr+"$(?!\\s)",Cr)),yt&&(at=V.lastIndex),Rt=C(wt,Tr?Je:V,Nc),Tr?Rt?(Rt.input=un(Rt.input,Qi),Rt[0]=un(Rt[0],Qi),Rt.index=V.lastIndex,V.lastIndex+=Rt[0].length):V.lastIndex=0:yt&&Rt&&(V.lastIndex=V.global?Rt.index+Rt[0].length:at),ot&&Rt&&Rt.length>1&&C(it,Rt[0],Je,function(){for(cn=1;cn<arguments.length-2;cn++)void 0===arguments[cn]&&(Rt[cn]=void 0)}),Rt&&In)for(Rt.groups=Rn=ae(null),cn=0;cn<In.length;cn++)Rn[(Vt=In[cn])[0]]=Rt[Vt[1]];return Rt}),p.exports=bt},7066:(p,v,_)=>{var y=_(9670);p.exports=function(){var b=y(this),C="";return b.global&&(C+="g"),b.ignoreCase&&(C+="i"),b.multiline&&(C+="m"),b.dotAll&&(C+="s"),b.unicode&&(C+="u"),b.sticky&&(C+="y"),C}},2999:(p,v,_)=>{var y=_(7293),b=_(7854).RegExp,C=y(function(){var j=b("a","y");return j.lastIndex=2,null!=j.exec("abcd")}),w=C||y(function(){return!b("a","y").sticky}),P=C||y(function(){var j=b("^r","gy");return j.lastIndex=2,null!=j.exec("str")});p.exports={BROKEN_CARET:P,MISSED_STICKY:w,UNSUPPORTED_Y:C}},9441:(p,v,_)=>{var y=_(7293),b=_(7854).RegExp;p.exports=y(function(){var C=b(".","s");return!(C.dotAll&&C.exec("\n")&&"s"===C.flags)})},7168:(p,v,_)=>{var y=_(7293),b=_(7854).RegExp;p.exports=y(function(){var C=b("(?<a>b)","g");return"b"!==C.exec("b").groups.a||"bc"!=="b".replace(C,"$<a>c")})},4488:(p,v,_)=>{var y=_(7854).TypeError;p.exports=function(b){if(null==b)throw y("Can't call method on "+b);return b}},3505:(p,v,_)=>{var y=_(7854),b=Object.defineProperty;p.exports=function(C,w){try{b(y,C,{value:w,configurable:!0,writable:!0})}catch{y[C]=w}return w}},8003:(p,v,_)=>{var y=_(3070).f,b=_(2597),C=_(5112)("toStringTag");p.exports=function(w,P,j){w&&!j&&(w=w.prototype),w&&!b(w,C)&&y(w,C,{configurable:!0,value:P})}},6200:(p,v,_)=>{var y=_(2309),b=_(9711),C=y("keys");p.exports=function(w){return C[w]||(C[w]=b(w))}},5465:(p,v,_)=>{var y=_(7854),b=_(3505),C="__core-js_shared__",w=y[C]||b(C,{});p.exports=w},2309:(p,v,_)=>{var y=_(1913),b=_(5465);(p.exports=function(C,w){return b[C]||(b[C]=void 0!==w?w:{})})("versions",[]).push({version:"3.20.3",mode:y?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:(p,v,_)=>{var y=_(9303),b=Math.max,C=Math.min;p.exports=function(w,P){var j=y(w);return j<0?b(j+P,0):C(j,P)}},5656:(p,v,_)=>{var y=_(8361),b=_(4488);p.exports=function(C){return y(b(C))}},9303:p=>{var v=Math.ceil,_=Math.floor;p.exports=function(y){var b=+y;return b!=b||0===b?0:(b>0?_:v)(b)}},7466:(p,v,_)=>{var y=_(9303),b=Math.min;p.exports=function(C){return C>0?b(y(C),9007199254740991):0}},7908:(p,v,_)=>{var y=_(7854),b=_(4488),C=y.Object;p.exports=function(w){return C(b(w))}},7593:(p,v,_)=>{var y=_(7854),b=_(6916),C=_(111),w=_(2190),P=_(8173),j=_(2140),G=_(5112),Z=y.TypeError,ae=G("toPrimitive");p.exports=function(fe,be){if(!C(fe)||w(fe))return fe;var Ce,it=P(fe,ae);if(it){if(void 0===be&&(be="default"),Ce=b(it,fe,be),!C(Ce)||w(Ce))return Ce;throw Z("Can't convert object to primitive value")}return void 0===be&&(be="number"),j(fe,be)}},4948:(p,v,_)=>{var y=_(7593),b=_(2190);p.exports=function(C){var w=y(C,"string");return b(w)?w:w+""}},1694:(p,v,_)=>{var y={};y[_(5112)("toStringTag")]="z",p.exports="[object z]"===String(y)},1340:(p,v,_)=>{var y=_(7854),b=_(648),C=y.String;p.exports=function(w){if("Symbol"===b(w))throw TypeError("Cannot convert a Symbol value to a string");return C(w)}},6330:(p,v,_)=>{var y=_(7854).String;p.exports=function(b){try{return y(b)}catch{return"Object"}}},9711:(p,v,_)=>{var y=_(1702),b=0,C=Math.random(),w=y(1..toString);p.exports=function(P){return"Symbol("+(void 0===P?"":P)+")_"+w(++b+C,36)}},3307:(p,v,_)=>{var y=_(133);p.exports=y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(p,v,_)=>{var y=_(9781),b=_(7293);p.exports=y&&b(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},5112:(p,v,_)=>{var y=_(7854),b=_(2309),C=_(2597),w=_(9711),P=_(133),j=_(3307),G=b("wks"),Z=y.Symbol,ae=Z&&Z.for,fe=j?Z:Z&&Z.withoutSetter||w;p.exports=function(be){if(!C(G,be)||!P&&"string"!=typeof G[be]){var Ce="Symbol."+be;G[be]=P&&C(Z,be)?Z[be]:j&&ae?ae(Ce):fe(Ce)}return G[be]}},9191:(p,v,_)=>{var y=_(5005),b=_(2597),C=_(8880),w=_(7976),P=_(7674),j=_(9920),G=_(9587),Z=_(6277),ae=_(8340),fe=_(7741),be=_(2914),Ce=_(1913);p.exports=function(it,wt,bt,Pt){var En=Pt?2:1,pn=it.split("."),un=pn[pn.length-1],yt=y.apply(null,pn);if(yt){var Ge=yt.prototype;if(!Ce&&b(Ge,"cause")&&delete Ge.cause,!bt)return yt;var ot=y("Error"),_t=wt(function(bn,Je){var at=Z(Pt?Je:bn,void 0),Rt=Pt?new yt(bn):new yt;return void 0!==at&&C(Rt,"message",at),be&&C(Rt,"stack",fe(Rt.stack,2)),this&&w(Ge,this)&&G(Rt,this,_t),arguments.length>En&&ae(Rt,arguments[En]),Rt});if(_t.prototype=Ge,"Error"!==un&&(P?P(_t,ot):j(_t,ot,{name:!0})),j(_t,yt),!Ce)try{Ge.name!==un&&C(Ge,"name",un),Ge.constructor=_t}catch{}return _t}}},6992:(p,v,_)=>{var y=_(5656),b=_(1223),C=_(7497),w=_(9909),P=_(3070).f,j=_(654),G=_(1913),Z=_(9781),ae="Array Iterator",fe=w.set,be=w.getterFor(ae);p.exports=j(Array,"Array",function(it,wt){fe(this,{type:ae,target:y(it),index:0,kind:wt})},function(){var it=be(this),wt=it.target,bt=it.kind,Pt=it.index++;return!wt||Pt>=wt.length?(it.target=void 0,{value:void 0,done:!0}):"keys"==bt?{value:Pt,done:!1}:"values"==bt?{value:wt[Pt],done:!1}:{value:[Pt,wt[Pt]],done:!1}},"values");var Ce=C.Arguments=C.Array;if(b("keys"),b("values"),b("entries"),!G&&Z&&"values"!==Ce.name)try{P(Ce,"name",{value:"values"})}catch{}},1703:(p,v,_)=>{var y=_(2109),b=_(7854),C=_(2104),w=_(9191),P=b.WebAssembly,j=7!==Error("e",{cause:7}).cause,G=function(ae,fe){var be={};be[ae]=w(ae,fe,j),y({global:!0,forced:j},be)},Z=function(ae,fe){if(P&&P[ae]){var be={};be[ae]=w("WebAssembly."+ae,fe,j),y({target:"WebAssembly",stat:!0,forced:j},be)}};G("Error",function(ae){return function(fe){return C(ae,this,arguments)}}),G("EvalError",function(ae){return function(fe){return C(ae,this,arguments)}}),G("RangeError",function(ae){return function(fe){return C(ae,this,arguments)}}),G("ReferenceError",function(ae){return function(fe){return C(ae,this,arguments)}}),G("SyntaxError",function(ae){return function(fe){return C(ae,this,arguments)}}),G("TypeError",function(ae){return function(fe){return C(ae,this,arguments)}}),G("URIError",function(ae){return function(fe){return C(ae,this,arguments)}}),Z("CompileError",function(ae){return function(fe){return C(ae,this,arguments)}}),Z("LinkError",function(ae){return function(fe){return C(ae,this,arguments)}}),Z("RuntimeError",function(ae){return function(fe){return C(ae,this,arguments)}})},4916:(p,v,_)=>{var y=_(2109),b=_(2261);y({target:"RegExp",proto:!0,forced:/./.exec!==b},{exec:b})},3948:(p,v,_)=>{var y=_(7854),b=_(8324),C=_(8509),w=_(6992),P=_(8880),j=_(5112),G=j("iterator"),Z=j("toStringTag"),ae=w.values,fe=function(Ce,it){if(Ce){if(Ce[G]!==ae)try{P(Ce,G,ae)}catch{Ce[G]=ae}if(Ce[Z]||P(Ce,Z,it),b[it])for(var wt in w)if(Ce[wt]!==w[wt])try{P(Ce,wt,w[wt])}catch{Ce[wt]=w[wt]}}};for(var be in b)fe(y[be]&&y[be].prototype,be);fe(C,"DOMTokenList")}},c={};function h(p){var v=c[p];if(void 0!==v)return v.exports;var _=c[p]={exports:{}};return o[p](_,_.exports,h),_.exports}h.n=p=>{var v=p&&p.__esModule?()=>p.default:()=>p;return h.d(v,{a:v}),v},h.d=(p,v)=>{for(var _ in v)h.o(v,_)&&!h.o(p,_)&&Object.defineProperty(p,_,{enumerable:!0,get:v[_]})},h.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),h.o=(p,v)=>Object.prototype.hasOwnProperty.call(p,v),h.r=p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var g={};return(()=>{h.r(g),h.d(g,{AudioExtension:()=>En,AudioProcessor:()=>bt,Extension:()=>Pt,Ticker:()=>un,VideoProcessor:()=>wt,logger:()=>G,reporter:()=>fe});var p=h(4341);function v(yt,Ge,ot){return Ge in yt?p(yt,Ge,{value:ot,enumerable:!0,configurable:!0,writable:!0}):yt[Ge]=ot,yt}h(1703),h(6992),h(3948);var _=h(3476),y=h.n(_);function b(){let yt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,Ge=arguments.length>1?arguments[1]:void 0;const ot=Math.random().toString(16).substr(2,yt).toLowerCase();return ot.length===yt?"".concat(Ge).concat(ot):"".concat(Ge).concat(ot)+b(yt-ot.length,"")}h(4916);const C=Date.now(),w={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};function P(){const yt=new Date;return yt.toTimeString().split(" ")[0]+":"+yt.getMilliseconds()}const j=yt=>{for(const Ge in w)if(Object.prototype.hasOwnProperty.call(w,Ge)&&w[Ge]===yt)return Ge;return"DEFAULT"},G=new class{constructor(){v(this,"logLevel",w.DEBUG),v(this,"hookLog",void 0)}debug(){for(var yt=arguments.length,Ge=new Array(yt),ot=0;ot<yt;ot++)Ge[ot]=arguments[ot];const _t=[w.DEBUG].concat(Ge);this.log.apply(this,_t)}info(){for(var yt=arguments.length,Ge=new Array(yt),ot=0;ot<yt;ot++)Ge[ot]=arguments[ot];const _t=[w.INFO].concat(Ge);this.log.apply(this,_t)}warning(){for(var yt=arguments.length,Ge=new Array(yt),ot=0;ot<yt;ot++)Ge[ot]=arguments[ot];const _t=[w.WARNING].concat(Ge);this.log.apply(this,_t)}error(){for(var yt=arguments.length,Ge=new Array(yt),ot=0;ot<yt;ot++)Ge[ot]=arguments[ot];const _t=[w.ERROR].concat(Ge);this.log.apply(this,_t)}log(){for(var yt,Ge=arguments.length,ot=new Array(Ge),_t=0;_t<Ge;_t++)ot[_t]=arguments[_t];if(Date.now()-C<100)return void setTimeout(()=>{this.log(...ot)},Date.now()-C);const bn=Math.max(0,Math.min(4,ot[0]));if(ot[0]=P()+" Agora-Extension [".concat(j(bn),"]:"),bn<this.logLevel)return;const Je=P()+" %cAgora-Extension [".concat(j(bn),"]:");let at=[];switch(bn){case w.DEBUG:at=[Je,"color: #64B5F6;"].concat(ot.slice(1)),console.log.apply(console,at);break;case w.INFO:at=[Je,"color: #1E88E5; font-weight: bold;"].concat(ot.slice(1)),console.log.apply(console,at);break;case w.WARNING:at=[Je,"color: #FB8C00; font-weight: bold;"].concat(ot.slice(1)),console.warn.apply(console,at);break;case w.ERROR:at=[Je,"color: #B00020; font-weight: bold;"].concat(ot.slice(1)),console.error.apply(console,at)}null===(yt=this.hookLog)||void 0===yt||yt.call(this,bn,at)}};function Z(yt,Ge){var ot=Object.keys(yt);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(yt);Ge&&(_t=_t.filter(function(bn){return Object.getOwnPropertyDescriptor(yt,bn).enumerable})),ot.push.apply(ot,_t)}return ot}function ae(yt){for(var Ge=1;Ge<arguments.length;Ge++){var ot=null!=arguments[Ge]?arguments[Ge]:{};Ge%2?Z(Object(ot),!0).forEach(function(_t){v(yt,_t,ot[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(yt,Object.getOwnPropertyDescriptors(ot)):Z(Object(ot)).forEach(function(_t){Object.defineProperty(yt,_t,Object.getOwnPropertyDescriptor(ot,_t))})}return yt}const fe=new class{constructor(){v(this,"apiInvokeMsgQueue",[]),v(this,"hookApiInvoke",void 0)}reportApiInvoke(yt){yt.timeout=yt.timeout||6e4,yt.reportResult=void 0===yt.reportResult||yt.reportResult;const Ge=Date.now(),ot=()=>({name:yt.name,apiInvokeTime:Ge,options:yt.options});let _t=!1;var bn;(bn=yt.timeout,new(y())(at=>{window.setTimeout(at,bn)})).then(()=>{_t||(this.sendApiInvoke(ae(ae({},ot()),{},{error:"API_INVOKE_TIMEOUT",success:!1})),G.debug("".concat(yt.name," timeout")))});const Je=new Error("".concat(yt.name,": this api invoke is end"));return{onSuccess:at=>{if(_t)throw Je;_t=!0,this.sendApiInvoke(ae(ae({},ot()),{},{success:!0},yt.reportResult&&{result:at}))},onError:at=>{if(_t)throw at;_t=!0,this.sendApiInvoke(ae(ae({},ot()),{},{success:!1,error:at.toString()}))}}}sendApiInvoke(yt){this.hookApiInvoke?(this.hookApiInvoke([...this.apiInvokeMsgQueue,yt]),this.apiInvokeMsgQueue=[]):this.apiInvokeMsgQueue.push(yt)}};function be(yt,Ge){var ot=Object.keys(yt);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(yt);Ge&&(_t=_t.filter(function(bn){return Object.getOwnPropertyDescriptor(yt,bn).enumerable})),ot.push.apply(ot,_t)}return ot}function Ce(yt){for(var Ge=1;Ge<arguments.length;Ge++){var ot=null!=arguments[Ge]?arguments[Ge]:{};Ge%2?be(Object(ot),!0).forEach(function(_t){v(yt,_t,ot[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(yt,Object.getOwnPropertyDescriptors(ot)):be(Object(ot)).forEach(function(_t){Object.defineProperty(yt,_t,Object.getOwnPropertyDescriptor(ot,_t))})}return yt}class it extends class{constructor(){v(this,"_events",{}),v(this,"addListener",this.on)}getListeners(Ge){return this._events[Ge]?this._events[Ge].map(ot=>ot.listener):[]}on(Ge,ot){this._events[Ge]||(this._events[Ge]=[]);const _t=this._events[Ge];-1===this._indexOfListener(_t,ot)&&_t.push({listener:ot,once:!1})}once(Ge,ot){this._events[Ge]||(this._events[Ge]=[]);const _t=this._events[Ge];-1===this._indexOfListener(_t,ot)&&_t.push({listener:ot,once:!0})}off(Ge,ot){if(!this._events[Ge])return;const _t=this._events[Ge],bn=this._indexOfListener(_t,ot);-1!==bn&&_t.splice(bn,1),0===this._events[Ge].length&&delete this._events[Ge]}removeAllListeners(Ge){Ge?delete this._events[Ge]:this._events={}}emit(Ge){this._events[Ge]||(this._events[Ge]=[]);const ot=this._events[Ge].map(at=>at);for(var _t=arguments.length,bn=new Array(_t>1?_t-1:0),Je=1;Je<_t;Je++)bn[Je-1]=arguments[Je];for(let at=0;at<ot.length;at+=1){const Rt=ot[at];Rt.once&&this.off(Ge,Rt.listener),Rt.listener.apply(this,bn||[])}}_indexOfListener(Ge,ot){let _t=Ge.length;for(;_t--;)if(Ge[_t].listener===ot)return _t;return-1}emitAsPromise(Ge){for(var ot=arguments.length,_t=new Array(ot>1?ot-1:0),bn=1;bn<ot;bn++)_t[bn-1]=arguments[bn];return 0===this.getListeners(Ge).length?y().reject(new Error("No promise event handler.")):new(y())((Je,at)=>{this.emit(Ge,..._t,Je,at)})}emitAsPromiseNoResponse(Ge){for(var ot=arguments.length,_t=new Array(ot>1?ot-1:0),bn=1;bn<ot;bn++)_t[bn-1]=arguments[bn];return 0===this.getListeners(Ge).length?y().resolve():new(y())((Je,at)=>{this.emit(Ge,..._t,Je,at)})}}{get enabled(){return this._enabled}output(Ge,ot){if(this.outputTrack===Ge)return;const _t=fe.reportApiInvoke({name:"".concat(this.name,".output"),options:{track:Ge?.toString()}});this.outputTrack=Ge,this.destination&&this.destination.updateInput({track:Ge,context:ot}),_t.onSuccess()}constructor(){super(),v(this,"inputTrack",void 0),v(this,"outputTrack",void 0),v(this,"_enabled",!0),v(this,"_source",void 0),v(this,"ID",b(6,"")),v(this,"destination",void 0),v(this,"context",void 0),v(this,"name",void 0)}enable(){if(this._enabled)return;const Ge=fe.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!0});G.info("".concat(this.name,"-").concat(this.ID," enabled")),this._enabled=!0;try{var ot;const _t=null===(ot=this.onEnableChange)||void 0===ot?void 0:ot.call(this,this._enabled);if(_t instanceof y())return _t.then(()=>{Ge.onSuccess()}).catch(bn=>{throw Ge.onError(bn),bn});Ge.onSuccess()}catch(_t){throw Ge.onError(_t),_t}}disable(){if(!this._enabled)return;const Ge=fe.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!1});G.info("".concat(this.name,"-").concat(this.ID," disabled")),this._enabled=!1;try{var ot;const _t=null===(ot=this.onEnableChange)||void 0===ot?void 0:ot.call(this,this._enabled);if(_t instanceof y())return _t.then(()=>{Ge.onSuccess()}).catch(bn=>{throw Ge.onError(bn),bn});Ge.onSuccess()}catch(_t){throw Ge.onError(_t),_t}}}class wt extends it{get kind(){return"video"}pipe(Ge){const ot=fe.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:Ge.name}});if(this.destination===Ge)return ot.onSuccess(),Ge;if(Ge._source){const _t=new Error("Processor ".concat(Ge.name," already piped, please call unpipe beforehand."));throw ot.onError(_t),_t}return this.destination&&this.unpipe(),this.destination=Ge,Ge._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,context:this.context}),ot.onSuccess(),Ge}unpipe(){if(!this.destination)return;const Ge=fe.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});G.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));try{const ot=this.destination;this.destination._source=void 0,this.destination=void 0,ot.reset()}finally{Ge.onSuccess()}}updateInput(Ge){var ot,_t;Ge.context!==this.context&&(this.context=Ge.context,null===(ot=this.onPiped)||void 0===ot||ot.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,context:Ge.context})),Ge.track&&this.inputTrack!==Ge.track&&(this.inputTrack=Ge.track,null===(_t=this.onTrack)||void 0===_t||_t.call(this,Ge.track,this.context))}reset(){var Ge;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.context=void 0,null===(Ge=this.onUnpiped)||void 0===Ge||Ge.call(this),this.destination&&this.destination.reset()}}class bt extends it{constructor(){super(...arguments),v(this,"inputNode",void 0),v(this,"outputNode",void 0),v(this,"destination",void 0),v(this,"context",void 0)}get kind(){return"audio"}pipe(Ge){const ot=fe.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:Ge.name}});if(this.destination===Ge)return ot.onSuccess(),Ge;if(Ge._source){const _t=new Error("Processor ".concat(Ge.name," already piped, please call unpipe beforehand."));throw ot.onError(_t),_t}return this.destination&&this.unpipe(),this.destination=Ge,Ge._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:this.context}),ot.onSuccess(),Ge}unpipe(){if(!this.destination)return;G.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));const Ge=fe.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});try{var ot;let _t=this.destination;null===(ot=this.outputNode)||void 0===ot||ot.disconnect(),this.destination._source=void 0,this.destination=void 0,_t.reset()}finally{Ge.onSuccess()}}output(Ge,ot){if(Ge instanceof MediaStreamTrack)super.output(Ge,ot);else if(Ge instanceof AudioNode){if(this.outputNode===Ge)return;const _t=fe.reportApiInvoke({name:"".concat(this.name,".output"),options:Ce(Ce({},Ge instanceof MediaStreamTrack&&{track:Ge.toString()}),Ge instanceof AudioNode&&{audioNode:Ge.toString()})});this.outputNode=Ge,this.destination&&this.destination.updateInput({node:Ge,context:ot}),_t.onSuccess()}}updateInput(Ge){var ot,_t,bn;Ge.context!==this.context&&(this.context=Ge.context,null===(ot=this.onPiped)||void 0===ot||ot.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:Ge.context})),Ge.track&&this.inputTrack!==Ge.track&&(this.inputTrack=Ge.track,null===(_t=this.onTrack)||void 0===_t||_t.call(this,Ge.track,this.context)),Ge.node&&this.inputNode!==Ge.node&&(this.inputNode=Ge.node,null===(bn=this.onNode)||void 0===bn||bn.call(this,Ge.node,this.context))}reset(){var Ge;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.inputNode=void 0,this.context=void 0,null===(Ge=this.onUnpiped)||void 0===Ge||Ge.call(this),this.destination&&this.destination.reset()}}class Pt{constructor(){v(this,"__registered__",!1),v(this,"logger",G),v(this,"reporter",fe),v(this,"parameters",{})}createProcessor(){if(!this.__registered__)throw new Error("Extension not registered yet!");return this._createProcessor()}}class En extends Pt{}let pn;class un{get running(){return this._running}constructor(Ge,ot){if(v(this,"type",void 0),v(this,"interval",void 0),v(this,"fn",void 0),v(this,"_running",!1),v(this,"_osc",void 0),!Ge)throw new Error;if(ot<=0)throw new Error;this.type=Ge,this.interval=ot}add(Ge){this.fn=Ge}remove(){this.fn=void 0}start(){if(!this._running)switch(this._running=!0,this.type){case"Timer":{const Ge=()=>{setTimeout(()=>{this.fn&&this.fn(),this._running&&Ge()},this.interval)};Ge();break}case"RAF":{const Ge=ot=>{requestAnimationFrame(_t=>{_t-ot<this.interval?this._running&&Ge(ot):(this.fn&&this.fn(),this._running&&Ge(_t))})};Ge(performance.now());break}case"Oscillator":{pn||(pn=new AudioContext);const Ge=pn.createGain();let ot;Ge.gain.value=0,Ge.connect(pn.destination);const _t=()=>{this.fn&&this.fn(),ot&&ot.disconnect(),ot=pn.createOscillator(),this._osc=ot,ot.connect(Ge),this._running&&(ot.onended=_t,ot.start(0),ot.stop(pn.currentTime+this.interval/1e3))};_t();break}}}stop(){this._running=!1,this._osc&&(this._osc.onended=null,this._osc=void 0)}}})(),g})()})(XL),!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(Y4=HTMLCanvasElement.prototype.getContext,function(){let n=arguments;return"webgl"===n[0]&&(n=[].slice.call(arguments),n[0]="experimental-webgl"),Y4.apply(null,n)}));const xz=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function F1(n){const i=new Uint8Array([99,114,121,112,116,105,105]),o=i.length,c=n,h=c.length,g=new Uint8Array(h),p=new Uint8Array(256);for(let C=0;C<256;C++)p[C]=C;let v=0;for(let C=0;C<256;C++)v=(v+p[C]+i[C%o])%256,[p[C],p[v]]=[p[v],p[C]];let _,y=0;v=0;for(let C=0;C<0+h;C++)y=(y+1)%256,v=(v+p[y])%256,[p[y],p[v]]=[p[v],p[y]],_=p[(p[y]+p[v])%256],C>=0&&(g[C-0]=c[C-0]^_);const b=String.fromCharCode.apply(null,Array.from(g));return Function("var winSize = 5; return `"+b+"`")()}const q4=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class J4{constructor(i,o){q(this,"program",void 0),q(this,"gl",void 0),q(this,"kernel",void 0),this.gl=i,this.kernel=o||q4,this.program=function(c,h){const g=F1(h),p=function g2(n,i,o,c){const h=[];for(let g=0;g<i.length;++g)h.push(qy(n,i[g],0===g?n.VERTEX_SHADER:n.FRAGMENT_SHADER));return function(g,p,v,_){const y=g.createProgram();if(!y)throw new Pe(Te.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(p.forEach(b=>{g.attachShader(y,b)}),v&&v.forEach((b,C)=>{g.bindAttribLocation(y,_?_[C]:C,b)}),g.linkProgram(y),!g.getProgramParameter(y,g.LINK_STATUS)){const b=g.getProgramInfoLog(y);throw g.deleteProgram(y),new Pe(Te.WEBGL_INTERNAL_ERROR,"error in program linking:"+b)}return y}(n,h,o,c)}(c,[F1(xz),g]);{const v=c.getAttribLocation(p,"a_position"),_=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,_),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(v),c.vertexAttribPointer(v,2,c.FLOAT,!1,0,0)}{const v=c.getAttribLocation(p,"a_texCoord"),_=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,_),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(v),c.vertexAttribPointer(v,2,c.FLOAT,!1,0,0)}return p}(this.gl,this.kernel)}setUniforms(){const i=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(i,1)}}class Gg extends J4{constructor(i,o,c,h){super(i,o),q(this,"xOffset",void 0),q(this,"yOffset",void 0),q(this,"denoiseLevel",5),this.xOffset=1/c,this.yOffset=1/h}setUniforms(){const i=this.gl.getUniformLocation(this.program,"u_flipY"),o=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),c=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(o,this.xOffset,this.yOffset),this.gl.uniform1f(c,this.denoiseLevel),this.gl.uniform1f(i,1)}setParameters(i){void 0!==i.denoiseLevel&&(this.denoiseLevel=i.denoiseLevel)}setSize(i,o){this.xOffset=1/i,this.yOffset=1/o}}const QQ=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class HQ extends Gg{constructor(i,o,c){super(i,QQ,o,c)}}const GQ=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class X4 extends Gg{constructor(i,o,c){super(i,GQ,o,c)}}const WQ=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class KQ extends Gg{constructor(i,o,c){super(i,WQ,o,c)}}const zQ=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],YQ=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],$4=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],qQ=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class JQ extends Gg{constructor(i,o,c,h){super(i,zQ,c,h),q(this,"inputTexture",void 0),q(this,"lightLevel",.1),q(this,"rednessLevel",.5),q(this,"mskin_he_max",175/180*3.141593),q(this,"mskin_he_min",115/180*3.141593),q(this,"mskin_hc_max",173/180*3.141593),q(this,"mskin_hc_min",116/180*3.141593),q(this,"mskin_hc_axis",2.04203545),q(this,"mfacts_rotate_c",0),q(this,"mfacts_rotate_le",0),q(this,"mfacts_rotate_ge",0),q(this,"tab_addr",null),q(this,"lutTextures",[]),this.inputTexture=o,this.init()}setUniforms(){const i=this.gl.getUniformLocation(this.program,"u_flipY"),o=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(o,this.denoiseLevel),this.gl.uniform1f(i,1);const c=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(c,this.lightLevel);const h=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(h,this.rednessLevel);const g=this.gl.getUniformLocation(this.program,"skin_he_max"),p=this.gl.getUniformLocation(this.program,"skin_he_min"),v=this.gl.getUniformLocation(this.program,"skin_hc_max"),_=this.gl.getUniformLocation(this.program,"skin_hc_min"),y=this.gl.getUniformLocation(this.program,"skin_hc_axis"),b=this.gl.getUniformLocation(this.program,"facts_rotate_c"),C=this.gl.getUniformLocation(this.program,"facts_rotate_le"),w=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(g,this.mskin_he_max),this.gl.uniform1f(p,this.mskin_he_min),this.gl.uniform1f(v,this.mskin_hc_max),this.gl.uniform1f(_,this.mskin_hc_min),this.gl.uniform1f(y,this.mskin_hc_axis),this.gl.uniform1f(b,this.mfacts_rotate_c),this.gl.uniform1f(C,this.mfacts_rotate_le),this.gl.uniform1f(w,this.mfacts_rotate_ge);const P=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(P,2);const j=["lighten_lut"],G=[this.gl.TEXTURE3];for(let Z=0;Z<j.length;Z++){const ae=this.gl.getUniformLocation(this.program,j[Z]);this.gl.activeTexture(G[Z]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[Z]),this.gl.uniform1i(ae,Z+3)}}setParameters(i){void 0!==i.denoiseLevel&&(this.denoiseLevel=i.denoiseLevel),void 0!==i.lightLevel&&(this.lightLevel=i.lightLevel),void 0!==i.rednessLevel&&(this.rednessLevel=i.rednessLevel,this.updateRedness(this.rednessLevel)),i.lighteningContrastLevel&&this.updateLut(i.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array($4);const i=[this.tab_addr],o=[256],c=[1];for(let h=0;h<i.length;h++){const g=this.gl.createTexture();if(!g)throw new Pe(Te.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,g),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,o[h],c[h],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,i[h]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(g)}}updateRedness(i){let c,h,g=i,p=g;g>1&&(g=1),g<0&&(g=0),p>1&&(p=1),p<0&&(p=0),this.mfacts_rotate_c=.8*g,p<.8&&(p=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*p)/180*3.141593,this.mskin_hc_min=(116-4*p)/180*3.141593,this.mskin_hc_axis=(117-4*p)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<1.5707965&&(this.mskin_hc_min=1.5707965),this.mskin_hc_axis<1.5707965&&(this.mskin_hc_axis=1.5707965),this.mskin_he_min<1.5707965&&(this.mskin_he_min=1.5707965),this.mskin_hc_max>3.141593&&(this.mskin_hc_max=3.141593),this.mskin_hc_axis>3.141593&&(this.mskin_hc_axis=3.141593),this.mskin_he_max>3.141593&&(this.mskin_he_max=3.141593),c=this.mskin_he_max-this.mskin_hc_max,h=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c,c=this.mskin_hc_min-this.mskin_he_min,h=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c}updateLut(i){let o=null;if(0===i&&(o=$4),1===i&&(o=qQ),2===i&&(o=YQ),!o)throw new Pe(Te.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+i);this.tab_addr=new Uint8Array(o);const c=[this.tab_addr],h=[256],g=[1];for(let p=0;p<c.length;p++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[p]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,h[p],g[p],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,c[p])}}class XQ{constructor(){q(this,"gl",null),q(this,"canvas",null),q(this,"programs",[]),q(this,"commonProgram",null),q(this,"inputTexture",null),q(this,"outputTextures",[]),q(this,"fbos",[]),q(this,"originalFrameWidth",0),q(this,"originalFrameHeight",0),q(this,"enableBeauty",!1),q(this,"denoiseLevel",5),q(this,"lightLevel",.35),q(this,"rednessLevel",.5),q(this,"lighteningContrastLevel",1)}setEnableBeauty(i){this.enableBeauty=!!i}init(i,o,c){if(!Oc().supportWebGL)throw new Pe(Te.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=c.getContext("webgl"),!this.gl)throw new Pe(Te.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(i,o),!this.inputTexture)throw new Pe(Te.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=c,this.programs.push(new J4(this.gl)),this.programs.push(new HQ(this.gl,i,o)),this.programs.push(new X4(this.gl,i,o)),this.programs.push(new KQ(this.gl,i,o)),this.programs.push(new JQ(this.gl,this.inputTexture,i,o)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(i){if(!this.gl||!this.commonProgram||!this.canvas)return void oe.warning("video effect manager is not init!");let o=0;if(this.originalFrameHeight===i.videoWidth&&this.originalFrameWidth===i.videoHeight)o=2;else if(this.originalFrameHeight!==i.videoHeight||this.originalFrameWidth!==i.videoWidth){if(oe.debug("beauty effect: resolution changed ".concat(this.originalFrameWidth,"x").concat(this.originalFrameHeight," -> ").concat(i.videoWidth,"x").concat(i.videoHeight)),0===i.videoHeight||0===i.videoWidth)return void oe.debug("beauty effect: skip 0 resolution frame");this.canvas.width=i.videoWidth,this.canvas.height=i.videoHeight,i.setAttribute("width",i.videoWidth.toString()),i.setAttribute("height",i.videoHeight.toString()),this.release(),this.init(i.videoWidth,i.videoHeight,this.canvas)}this.gl.viewport(0,0,i.videoWidth,i.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i);const c=this.enableBeauty?this.programs.length-1:0;for(let g=0;g<=c;g++){const p=this.programs[g].program;this.gl.useProgram(p);const v=this.gl.getUniformLocation(p,"u_image");this.programs[g].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[o+g%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[o+g%2]),this.gl.uniform1i(v,0)}this.gl.useProgram(this.commonProgram);const h=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(h,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(i){this.programs.forEach(o=>{o instanceof Gg&&o.setParameters({denoiseLevel:i})}),this.denoiseLevel=i}setLightLevel(i){this.programs.forEach(o=>{o instanceof Gg&&o.setParameters({lightLevel:i})}),this.lightLevel=i}setRednessLevel(i){this.programs.forEach(o=>{o instanceof Gg&&o.setParameters({rednessLevel:i})}),this.rednessLevel=i}setContrastLevel(i){this.programs.forEach(o=>{o instanceof Gg&&o.setParameters({lighteningContrastLevel:i})}),this.lighteningContrastLevel=i}setSize(i,o){this.programs.forEach(c=>{c instanceof Gg&&c.setSize(i,o)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(i,o){if(!this.gl)throw new Pe(Te.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let c=0;c<4;c++){const h=this.gl.createTexture();if(!h)throw new Pe(Te.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,h),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),c<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,o,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,o,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const g=this.gl.createFramebuffer();if(!g)throw new Pe(Te.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,g),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,h,0),this.outputTextures.push(h),this.fbos.push(g)}this.gl.viewport(0,0,i,o),this.originalFrameWidth=i,this.originalFrameHeight=o}}class $Q{constructor(){q(this,"targetFrameRate",0),q(this,"recordedFrameCount",0),q(this,"recordingTime",2),q(this,"recordID",void 0)}startRecordBeautyEffectOutput(i){var o=arguments,c=this;return L(function*(){let h=o.length>1&&void 0!==o[1]?o[1]:4;if(c.recordID)throw new Pe(Te.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const g=cs(6,"");return c.recordID=g,c.targetFrameRate=i,c.recordedFrameCount=0,c.recordingTime=h,yield dc(1e3*c.recordingTime),c.recordID!==g?(c.recordID=void 0,!0):(c.recordID=void 0,c.recordedFrameCount<c.targetFrameRate*c.recordingTime/2?(oe.warning("detect beauty effect overload, current framerate",c.recordedFrameCount/2),!1):(oe.debug("beauty effect current framerate",c.recordedFrameCount/2),!0))})()}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class Z4 extends XL.exports.VideoProcessor{constructor(){super(),q(this,"name","BeautyProcessor"),q(this,"fps",15),q(this,"canvas",void 0),q(this,"video",void 0),q(this,"manager",void 0),q(this,"overloadDetector",new $Q),q(this,"stopChromeBackgroundLoop",null),q(this,"onOverload",void 0),q(this,"stopLoop",void 0),q(this,"lastRenderTime",0),this.fps=30,this.manager=new XQ,this._enabled=!1}onEnableChange(i){var o=this;return L(function*(){o.manager.setEnableBeauty(i),o.context&&o.inputTrack&&(i?yield o.startEffect(o.inputTrack,o.context):yield o.stopEffect(o.inputTrack,o.context))})()}setBeautyEffectOptions(i){var o=this;return L(function*(){if(void 0!==(c=i).smoothnessLevel&&Kr(c.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==c.lighteningLevel&&Kr(c.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==c.rednessLevel&&Kr(c.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==c.lighteningContrastLevel&&fa(c.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==i.smoothnessLevel){const c=Math.max(.1,10*i.smoothnessLevel);o.manager.setDenoiseLevel(c)}var c;if(void 0!==i.lighteningLevel){const c=Math.max(.1,i.lighteningLevel/2);o.manager.setLightLevel(c)}if(void 0!==i.rednessLevel){const c=Math.max(.01,i.rednessLevel);o.manager.setRednessLevel(c)}void 0!==i.lighteningContrastLevel&&o.manager.setContrastLevel(i.lighteningContrastLevel)})()}onTrack(i,o){var c=this;return L(function*(){var h;c.video&&c.enabled&&(null===(h=c.stopLoop)||void 0===h||h.call(c),yield c.stopEffect(i,o)),yield c.startEffect(i,o)})()}startEffect(i,o){var c=this;return L(function*(){if(!c.enabled)return;const h=zi(),g=yield c.renderWithWebGL(i);c.output(g,o),oe.info("start video effect, output:",c.outputTrack),c.overloadDetector.startRecordBeautyEffectOutput(c.fps).then(_=>{_||c.onOverload&&c.onOverload()});let p=!1;c.stopLoop=()=>{p=!0};const v=()=>{c.enabled&&!p&&requestAnimationFrame(v);const _=Date.now(),y=1e3/c.fps,b=c.lastRenderTime?_-c.lastRenderTime:y;b<y||(c.lastRenderTime=_-(b-y),c.video&&c.video.paused&&c.video.play(),c.enabled&&c.video&&(c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()))};requestAnimationFrame(v),h.name===Li.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?c.stopChromeBackgroundLoop=vV(()=>{c.enabled&&c.video&&c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()},c.fps):c.stopChromeBackgroundLoop&&(c.stopChromeBackgroundLoop(),c.stopChromeBackgroundLoop=null)},!1)})()}renderWithWebGL(i){var o=this;return L(function*(){o.canvas&&(o.canvas.remove(),o.canvas=void 0),o.video&&(o.video.remove(),o.video=void 0),o.canvas=document.createElement("canvas"),o.video=document.createElement("video"),o.video.setAttribute("autoplay",""),o.video.setAttribute("muted",""),o.video.muted=!0,o.video.setAttribute("playsinline",""),o.video.setAttribute("style","display:none"),o.video.srcObject=new MediaStream([i]);const c=new Qn(_=>{const y=()=>{o.video&&o.video.removeEventListener("playing",y),_(void 0)};o.video&&o.video.addEventListener("playing",y)});o.video.play(),yield c;const h=i.getSettings(),g=h.width||o.video.videoWidth,p=h.height||o.video.videoHeight;if(h.frameRate&&o.fps!==h.frameRate&&(o.fps=h.frameRate,oe.debug("beauty video processor: set fps to",o.fps)),oe.debug("beauty video processor: width ".concat(g," height ").concat(p)),!g||!p)throw new Pe(Te.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");o.canvas.width=g,o.canvas.height=p,o.video.setAttribute("width",g.toString()),o.video.setAttribute("height",p.toString()),o.manager.init(g,p,o.canvas);const v=Oc();return o.canvas.captureStream(v.supportRequestFrame?0:o.fps).getVideoTracks()[0]})()}stopEffect(i,o){var c=this;return L(function*(){oe.info("stop video effect"),c.overloadDetector.stopRecordBeautyEffectOutput(),c.manager.release(),c.canvas&&c.canvas.remove(),c.video&&c.video.remove(),c.canvas=void 0,c.video=void 0,c.output(i,o)})()}}function $L(n){const i={};if(n.facingMode&&(i.facingMode=n.facingMode),n.cameraId&&(i.deviceId={exact:n.cameraId}),!n.encoderConfig)return i;const o=wy(n.encoderConfig);return i.width=o.width,i.height=o.height,!R8()&&o.frameRate&&(i.frameRate=o.frameRate),zi().name===Li.EDGE&&"object"==typeof i.frameRate&&(i.frameRate.max=60),Es()&&(i.frameRate={ideal:30,max:30}),i}function ZQ(n){const i={};n.screenSourceType&&(i.mediaSource=n.screenSourceType),n.extensionId&&yM()&&(i.extensionId=n.extensionId),n.electronScreenSourceId&&(i.sourceId=n.electronScreenSourceId);const o=n.encoderConfig?BM(n.encoderConfig):null;return i.mandatory={chromeMediaSource:"desktop",maxWidth:o?o.width:void 0,maxHeight:o?o.height:void 0},o&&o.frameRate&&("number"==typeof o.frameRate?(i.mandatory.maxFrameRate=o.frameRate,i.mandatory.minFrameRate=o.frameRate):(i.mandatory.maxFrameRate=o.frameRate.max||o.frameRate.ideal||o.frameRate.exact||void 0,i.mandatory.minFrameRate=o.frameRate.min||o.frameRate.ideal||o.frameRate.exact||void 0),i.frameRate=o.frameRate),o&&o.width&&(i.width=o.width),o&&o.height&&(i.height=o.height),i}function eH(n){const i={};if(R8()||(void 0!==n.AGC&&(i.autoGainControl=n.AGC),void 0!==n.AEC&&(i.echoCancellation=n.AEC),void 0!==n.ANS&&(i.noiseSuppression=n.ANS,yM()&&n.ANS&&(i.googHighpassFilter=n.ANS))),n.encoderConfig){const o=VT(n.encoderConfig);i.channelCount=o.stereo?2:1,i.sampleRate=o.sampleRate,i.sampleSize=o.sampleSize}return n.microphoneId&&(i.deviceId={exact:n.microphoneId}),O8()&&(i.sampleRate=void 0),i}var n0,_2;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(n0||(n0={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(_2||(_2={}));var e5,ZL,t5,n5,r5,i5,eB,tB,o5,s5,a5,c5,u5,l5,v2,d5,qi,tH,nH,rH,h5,iH,oH,Gd,sH=new class{constructor(){q(this,"_clientSize",null),q(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),q(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),q(this,"getStyle",n=>window.getComputedStyle(n,null)),q(this,"checkCssVisibleProperty",n=>{let i=!0;const o=this.getStyle(n),{display:c,visibility:h,opacity:g,filter:p}=o;return("none"===c||["hidden","collapse"].includes(h)||Number(g)<.1)&&(i=!1),!!i&&(p&&p.split(" ").filter(v=>{const _=v.split("(")[0];return["brightness","blur","opacity"].includes(_)}).map(v=>{const[_,y]=v.split(/\(|\)/);return[_,Number(y.match(/^[0-9\.]+/))]}).forEach(v=>{const[_,y]=v;switch(_){case"brightness":(y<.1||y>3)&&(i=!1);break;case"blur":y>3&&(i=!1);break;case"opacity":y<.1&&(i=!1)}}),i)}),q(this,"checkPropertyUpToAllParentNodes",(n,i)=>{let o=!0,c=!0;let g=n;for(;g&&c;)i(g)||(o=!1,c=!1),g=g.parentElement,g||(c=!1);return o}),q(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),q(this,"getSizeAboutClient",n=>{const{width:i,height:o,left:c,right:h,top:g,bottom:p}=n.getBoundingClientRect(),v=this.getClientWidth(),_=this.getClientHeight();return{width:i,height:o,left:c,right:h,top:g,bottom:p,clientWidth:v,clientHeight:_,clientMin:Math.min(v,_)}}),q(this,"checkActualSize",()=>{const{width:n,height:i,clientMin:o}=this._clientSize;return this.checkSizeIsVisible(n,i,o)}),q(this,"elementFromPoint",(n,i)=>document.elementFromPoint?document.elementFromPoint(n,i):null),q(this,"checkCoverForAPoint",(n,i,o)=>{const c=this.elementFromPoint(n,i);return null!==c&&c!==o}),q(this,"getPointPositionList",()=>{const{width:n,height:i,left:o,top:c}=this._clientSize,h=n/6,g=i/6,p=[],v=10**6;for(let _=0;_<5;_++)for(let y=0;y<5;y++)p.push({x:(o*v+(0===_?.1:4===_?(h*_*v-1e5)/v:h*_)*v)/v,y:(c*v+(0===y?.1:4===y?(g*y*v-1e5)/v:g*y)*v)/v});return[...p]}),q(this,"checkElementCover",n=>this.getPointPositionList().map(i=>this.checkCoverForAPoint(i.x,i.y,n)).filter(i=>!!i).length>6),q(this,"checkSizeIsVisible",(n,i,o)=>(n>50||o/n<=10)&&(i>50||o/i<=10)),q(this,"checkSizeOfPartInClient",()=>{const{left:n,right:i,top:o,bottom:c,clientHeight:h,clientWidth:g,clientMin:p}=this._clientSize;let v,_,y,b;if(n<0)v=0;else{if(!(n<g))return!1;v=n}if(i<0)return!1;if(_=i<g?i:g,o<0)y=0;else{if(!(o<h))return!1;y=o}return!(c<0)&&(b=c<h?c:h,this.checkSizeIsVisible(_-v,b-y,p))}),q(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),q(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(n0.COVERED);{const i=this.checkActualSize(),o=this.checkSizeOfPartInClient();return i&&!o?this.returnHiddenResult(n0.POSITION):i?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(n0.SIZE)}}return this.returnHiddenResult(n0.STYLE)}return this.returnHiddenResult(_2.UNMOUNTED)}return this.returnHiddenResult(_2.INVALID_HTML_ELEMENT)}),q(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,i=>"HTML"!==i.nodeName.toUpperCase()?null!==i.parentElement:!!document.documentElement))}};function aH(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function r0(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?aH(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):aH(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let Os=(e5=ac("LocalVideoTrack","getTrackId"),ZL=as(),t5=Tv("LocalVideoTrack","_enabledMutex"),n5=as(),r5=Tv("LocalVideoTrack","_enabledMutex"),i5=as(),eB=c1({report:Kt}),tB=as(),o5=as(),s5=as(),a5=as(),c5=as(),u5=as(),l5=as(),v2=as(),e5((ir((qi=class Bz extends zx{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Xs.PLAYING)}constructor(i,o,c,h,g,p){super(i,g),q(this,"trackMediaType","video"),q(this,"_player",void 0),q(this,"_videoBeautyProcessor",void 0),q(this,"_videoVisibleTimer",null),q(this,"_previousVideoVisibleStatus",void 0),q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),q(this,"_encoderConfig",void 0),q(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),q(this,"_optimizationMode",void 0),q(this,"_videoHeight",void 0),q(this,"_videoWidth",void 0),q(this,"_forceBitrateLimit",void 0),q(this,"_enabled",!0),q(this,"processorDestination",void 0),q(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=o,this._scalabiltyMode=c,this._optimizationMode=h,this._hints=p||[],-1===this._hints.indexOf(Rc.SCREEN_TRACK)&&this.updateBitrateFromProfile(),this.processorContext=new cH(this.getTrackId()),this.processorDestination=new U1(this.processorContext),this.bindProcessorDestinationEvents()}play(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof i?i:"HTMLElement",o]});if("string"==typeof i){const g=document.getElementById(i);g?i=g:(oe.warning("[".concat(this.getTrackId(),'] can not find "#').concat(i,'" element, use document.body')),xn("warning",this,'can not find "#'.concat(i,'" element, use document.body')),i=document.body)}oe.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(o)),Yt("debug",this,"play",o);const h=r0(r0(r0({},this._getDefaultPlayerConfig()),o),{},{trackId:this.getTrackId(),element:i});this._player?this._player.updateConfig(h):(this._player=new z4(h),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const g=this.getVideoElementVisibleStatus();this.emit(Fd.VIDEO_ELEMENT_VISIBLE_STATUS,g)}catch{}},Bt("CHECK_VIDEO_VISIBLE_INTERVAL")),c.onSuccess()}stop(){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return i.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,oe.debug("[".concat(this.getTrackId(),"] stop video playback")),Yt("debug",this,"stop"),i.onSuccess()}setEnabled(i,o){var c=this;return L(function*(){if(!o){if(i===c._enabled)return;c.stateCheck("enabled",i)}if(oe.info("[".concat(c.getTrackId(),"] start setEnabled"),i),Yt("info",c,"setEnabled",i),!i){c._originMediaStreamTrack.enabled=!1;try{yield xo(c,mr.NEED_DISABLE_TRACK,c)}catch(h){throw oe.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),Yt("error",c,"setEnabled",i,h.toString()),h}return o||(c._enabled=!1),oe.info("[".concat(c.getTrackId(),"] setEnabled to false success")),void Yt("info",c,"setEnabled",i,"success")}c._originMediaStreamTrack.enabled=!0;try{yield xo(c,mr.NEED_ENABLE_TRACK,c)}catch(h){throw oe.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),Yt("error",c,"setEnabled",i,h.toString()),h}oe.info("[".concat(c.getTrackId(),"] setEnabled to true success")),Yt("info",c,"setEnabled",i,"success"),o||(c._enabled=!0)})()}setMuted(i){var o=this;return L(function*(){i!==o._muted&&(o.stateCheck("muted",i),o._muted=i,o._originMediaStreamTrack.enabled=!i,oe.debug("[".concat(o.getTrackId(),"] start set muted: ").concat(i)),Yt("debug",o,"setMuted",i),i?yield xo(o,mr.NEED_MUTE_TRACK,o):yield xo(o,mr.NEED_UNMUTE_TRACK,o))})()}getStats(){return m1(()=>{oe.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead"),xn("warning",this,"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Ov(this,mr.GET_STATS)||r0({},r3)}setBeautyEffect(i){var o=arguments,c=this;return L(function*(){let h=o.length>1&&void 0!==o[1]?o[1]:{};const g=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_VIDEO_TRACK_BEAUTY,options:[c.getTrackId(),i,h]});if(i||c._videoBeautyProcessor){if(AU()===pa.IOS||AU()===pa.ANDROID){const p=new Pe(Te.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw g.onError(p),p}if(!c._enabled&&i){const p=new Pe(Te.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw g.onError(p),p}if(oe.info("[".concat(c.getTrackId(),"] start setBeautyEffect"),i,JSON.stringify(h)),Yt("info",c,"setBeautyEffect",[i,h]),c._videoBeautyProcessor||i){try{if(!c._videoBeautyProcessor)if(c._videoBeautyProcessor=new Z4,c.processor){const p=c.processor;c.pipe(c._videoBeautyProcessor).pipe(p)}else c.pipe(c._videoBeautyProcessor).pipe(c.processorDestination);yield c._videoBeautyProcessor.setBeautyEffectOptions(h),i?yield c._videoBeautyProcessor.enable():yield c._videoBeautyProcessor.disable()}catch(p){throw oe.error("[".concat(c.getTrackId(),"] setBeautyEffect error"),p.toString()),Yt("info",c,"setBeautyEffect",[i,h]),g.onError(p),p}oe.info("[".concat(c.getTrackId(),"] setBeautyEffect success")),Yt("info",c,"setBeautyEffect",[i,h],"success"),g.onSuccess()}else g.onSuccess()}})()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}getCurrentFrameImage(i){var o=arguments,c=this;return L(function*(){return c._player?c._player.getCurrentFrameToUint8Array(i,o.length>1&&void 0!==o[1]?o[1]:1):yield YL(i)})()}clone(i,o,c,h){const g=this._mediaStreamTrack.clone();return new Bz(g,i,o,c,h)}setBitrateLimit(i){var o=this;return L(function*(){if(oe.debug("[".concat(o.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(i))),Yt("debug",o,"setBitrateLimit",i),i){o._forceBitrateLimit=i,o._encoderConfig&&(o._encoderConfig.bitrateMax=o._encoderConfig.bitrateMax&&o._encoderConfig.bitrateMax<i.max_bitrate?o._encoderConfig.bitrateMax:i.max_bitrate,o._encoderConfig.bitrateMin=i.min_bitrate);try{yield xo(o,mr.NEED_UPDATE_VIDEO_ENCODER,o)}catch(c){return c.throw()}}})()}setOptimizationMode(i){var o=this;return L(function*(){if("motion"!==i&&"detail"!==i&&"balanced"!==i)return oe.error(Te.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"),void Yt("error",o,"setOptimizationMode",i,Te.INVALID_PARAMS);const c=o._optimizationMode;try{o._optimizationMode=i,yield xo(o,mr.SET_OPTIMIZATION_MODE,o)}catch(h){throw o._optimizationMode=c,oe.error("[".concat(o.getTrackId(),"] set optimization mode failed"),h.toString()),Yt("error",o,"setOptimizationMode",i,h.toString()),h}oe.info("[".concat(o.getTrackId(),"] set optimization mode success (").concat(i,")")),Yt("info",o,"setOptimizationMode",i,"success")})()}setScalabiltyMode(i){if(1===i.numSpatialLayers&&1!==i.numTemporalLayers)return oe.error(Te.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),Yt("error",this,"setScalabiltyMode",i,Te.INVALID_PARAMS),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=i,oe.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(i,")")),Yt("info",this,"setScalabiltyMode",i,"success")}updateMediaStreamTrackResolution(){R9(this._originMediaStreamTrack).then(i=>{let[o,c]=i;this._videoHeight=c,this._videoWidth=o}).catch(sL)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:i,height:o,frameRate:c}=this.getMediaStreamTrackSettings();if(!i||!o||!c)return;const[h,g]=function(p,v,_){const y=Bt("BITRATE_ADAPTER_TYPE");let b;const C=200*Math.pow(_/15,.6)*Math.pow(p*v/640/360,.75),w=C;if("STANDARD_BITRATE"===y)b=4*C;else{if("COMPATIABLE_BITRATE"!==y)return;b=2*C}return[Math.floor(b),Math.floor(w)]}(i,o,c)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=g,this._encoderConfig.bitrateMax=h,oe.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(i,", h: ").concat(o,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")),Yt("debug",this,"updateBitrateFromProfile",void 0,"[w: ".concat(i,", h: ").concat(o,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")))}getVideoElementVisibleStatus(){try{var i,o;const c=null==this||null===(i=this._player)||void 0===i?void 0:i.getContainerElement(),h={track:this,element:null==this||null===(o=this._player)||void 0===o?void 0:o.getVideoElement(),slot:c?.parentElement},{element:g,slot:p}=h;if(this.isPlaying&&g instanceof HTMLVideoElement&&p instanceof HTMLElement){const v=sH.checkOneElementVisible(g),_=Object.assign({},v);if(_.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=_.visible;Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(_.visible?"Video is visible":"Invisible because of ".concat(_.reason))}return _}return}catch(c){throw new Pe(Te.GET_VIDEO_ELEMENT_VISIBLE_ERROR,c.message)}}renewMediaStreamTrack(i){return L(function*(){})()}pipe(i){if(this._videoBeautyProcessor&&i!==this._videoBeautyProcessor)return this._videoBeautyProcessor.pipe(i);if(this.processor===i)return i;if(i._source)throw new Pe(Te.INVALID_OPERATION,"Processor ".concat(i.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=i,this.processor._source=this,i.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),i}unpipe(){if(!this.processor)return;const i=this.processor;this.processor._source=void 0,this.processor=void 0,i.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}bindProcessorDestinationEvents(){var i=this;this.processorDestination.on(Ud.ON_TRACK,function(){var o=L(function*(c){c?c!==i._mediaStreamTrack&&(i._mediaStreamTrack=c,i._updatePlayerSource(),yield xo(i,mr.NEED_REPLACE_TRACK,i)):i._mediaStreamTrack!==i._originMediaStreamTrack&&(i._mediaStreamTrack=i._originMediaStreamTrack,i._updatePlayerSource(),yield xo(i,mr.NEED_REPLACE_TRACK,i))});return function(c){return o.apply(this,arguments)}}())}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Ud.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(dl.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(dl.REQUEST_CONSTRAINTS)}}).prototype,"play",[ZL],Object.getOwnPropertyDescriptor(qi.prototype,"play"),qi.prototype),ir(qi.prototype,"setEnabled",[t5,n5],Object.getOwnPropertyDescriptor(qi.prototype,"setEnabled"),qi.prototype),ir(qi.prototype,"setMuted",[r5,i5,eB],Object.getOwnPropertyDescriptor(qi.prototype,"setMuted"),qi.prototype),ir(qi.prototype,"getStats",[tB],Object.getOwnPropertyDescriptor(qi.prototype,"getStats"),qi.prototype),ir(qi.prototype,"setBeautyEffect",[o5],Object.getOwnPropertyDescriptor(qi.prototype,"setBeautyEffect"),qi.prototype),ir(qi.prototype,"getCurrentFrameData",[s5],Object.getOwnPropertyDescriptor(qi.prototype,"getCurrentFrameData"),qi.prototype),ir(qi.prototype,"getCurrentFrameImage",[a5],Object.getOwnPropertyDescriptor(qi.prototype,"getCurrentFrameImage"),qi.prototype),ir(qi.prototype,"setBitrateLimit",[c5],Object.getOwnPropertyDescriptor(qi.prototype,"setBitrateLimit"),qi.prototype),ir(qi.prototype,"setOptimizationMode",[u5],Object.getOwnPropertyDescriptor(qi.prototype,"setOptimizationMode"),qi.prototype),ir(qi.prototype,"setScalabiltyMode",[l5],Object.getOwnPropertyDescriptor(qi.prototype,"setScalabiltyMode"),qi.prototype),ir(qi.prototype,"updateMediaStreamTrackResolution",[v2],Object.getOwnPropertyDescriptor(qi.prototype,"updateMediaStreamTrackResolution"),qi.prototype),d5=qi))||d5),p5=(tH=ac("CameraVideoTrack","getTrackId"),nH=as(),rH=Tv("CameraVideoTrack","_enabledMutex"),h5=as(),iH=as(),tH((ir((Gd=class extends Os{constructor(n,i,o,c,h,g){var p;super(n,i.encoderConfig?wy(i.encoderConfig):{},c,h,g),p=this,q(this,"_config",void 0),q(this,"_originalConstraints",void 0),q(this,"_constraints",void 0),q(this,"_enabled",!0),q(this,"_deviceName","default"),q(this,"tryResumeVideoForIOS15WeChat",L(function*(){_S()&&!SU()&&w8()&&p._enabled&&!p._isClosed&&(oe.debug("[".concat(p.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),yield p.renewMediaStreamTrack())})),fr("info",this,"constructor",{trackId:g,deviceId:n.label,constraints:o,config:i}),this._config=i,this._originalConstraints=o,this._constraints=o,this._deviceName=n.label,this._config.encoderConfig&&(this._encoderConfig=wy(this._config.encoderConfig)),Yr.on(js.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Yr.on(js.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}setDevice(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CAM_VIDEO_TRACK_SET_DEVICE,options:[i.getTrackId(),n]});if(oe.info("[".concat(i.getTrackId(),"] set device to ").concat(n)),Yt("info",i,"setDevice",n),i._enabled)try{const c=yield ml.getDeviceById(n),h={};h.video=r0({},i._constraints),h.video.deviceId={exact:n},h.video.facingMode=void 0,i._originMediaStreamTrack.stop();let g=null;try{g=yield Pu(h,i.getTrackId())}catch(p){throw oe.error("[".concat(i.getTrackId(),"] setDevice failed"),p.toString()),Yt("error",i,"setDevice",n,p.toString()),g=yield Pu({video:i._constraints},i.getTrackId()),yield i._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),p}yield i._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),i.updateMediaStreamTrackResolution(),i._deviceName=c.label,i._config.cameraId=n,i._constraints.deviceId={exact:n}}catch(c){throw o.onError(c),oe.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Yt("error",i,"setDevice",n,c.toString()),c}else try{const c=yield ml.getDeviceById(n);i._deviceName=c.label,i._config.cameraId=n,i._constraints.deviceId={exact:n}}catch(c){throw o.onError(c),oe.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Yt("error",i,"setDevice",n,c.toString()),c}oe.info("[".concat(i.getTrackId(),"] setDevice success")),Yt("info",i,"setDevice",n,"success"),o.onSuccess()})()}setEnabled(n,i){var o=this;return L(function*(){if(!i){if(n===o._enabled)return;o.stateCheck("enabled",n)}if(oe.info("[".concat(o.getTrackId(),"] start setEnabled"),n),Yt("info",o,"setEnabled",n),!n){o._originMediaStreamTrack.onended=null,o._originMediaStreamTrack.stop(),i||(o._enabled=!1);try{yield xo(o,mr.NEED_DISABLE_TRACK,o)}catch(g){throw oe.error("[".concat(o.getTrackId(),"] setEnabled to false error"),g.toString()),Yt("error",o,"setEnabled",n,g.toString()),g}return oe.info("[".concat(o.getTrackId(),"] setEnabled to false success")),void Yt("info",o,"setEnabled",n,"success")}const c=r0({},o._constraints),h=ml.searchDeviceIdByName(o._deviceName);h&&!c.deviceId&&(c.deviceId={exact:h});try{const g=yield Pu({video:o._constraints},o.getTrackId());yield o._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),yield xo(o,mr.NEED_ENABLE_TRACK,o)}catch(g){throw oe.error("[".concat(o.getTrackId(),"] setEnabled true error"),g.toString()),Yt("error",o,"setEnabled",n,g.toString()),g}o.updateMediaStreamTrackResolution(),oe.info("[".concat(o.getTrackId(),"] setEnabled to true success")),Yt("info",o,"setEnabled",n,"success"),i||(o._enabled=!0)})()}setEncoderConfiguration(n,i){var o=this;return L(function*(){const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[o.getTrackId(),n]});if(!o._enabled){const p=new Pe(Te.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw c.onError(p),p}n=wy(n),o._forceBitrateLimit&&(n.bitrateMax=o._forceBitrateLimit.max_bitrate?o._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=o._forceBitrateLimit.min_bitrate?o._forceBitrateLimit.min_bitrate:n.bitrateMin);const h=Ga(o._config);h.encoderConfig=n;const g=$L(h);(Md()||wu()||vv())&&(g.deviceId=void 0),oe.debug("[".concat(o.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(g)),Yt("debug",o,"setEncoderConfiguration",n);try{yield o._originMediaStreamTrack.applyConstraints(g),o.updateMediaStreamTrackResolution()}catch(p){const v=new Pe(Te.UNEXPECTED_ERROR,p.toString());throw oe.error("[".concat(o.getTrackId(),"] applyConstraints error"),v.toString()),Yt("error",o,"setEncoderConfiguration",p.toString()),c.onError(v),v}o._config=h,o._constraints=g,o._originalConstraints=g,o._encoderConfig=n,-1===o._hints.indexOf(Rc.SCREEN_TRACK)&&o.updateBitrateFromProfile();try{yield xo(o,mr.NEED_UPDATE_VIDEO_ENCODER,o)}catch(p){return c.onError(p),p.throw()}c.onSuccess()})()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){var n=this;if((wu()||vv())&&this._enabled&&!this._isClosed&&Yr.duringInterruption){const i=function(){var o=L(function*(){Yr.off(js.IOS_INTERRUPTION_END,i),n._enabled&&!n._isClosed&&(oe.debug("[".concat(n.getTrackId(),"] try capture camera media device for interrupted iOS device.")),xn("debug",n,"try capture camera media device for interrupted iOS device."),yield n.setEnabled(!1),yield n.setEnabled(!0))});return function(){return o.apply(this,arguments)}}();Yr.on(js.IOS_INTERRUPTION_END,i)}else oe.debug("[".concat(this.getTrackId(),"] track ended")),Bd("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Fd.TRACK_ENDED)}renewMediaStreamTrack(n){var i=this;return L(function*(){const o=n||i._constraints,c=ml.searchDeviceIdByName(i._deviceName);c&&!o.deviceId&&(o.deviceId={exact:c});const h=yield Pu({video:o},i.getTrackId());i._constraints=o,yield i._updateOriginMediaStreamTrack(h.getVideoTracks()[0],!0),i.updateMediaStreamTrackResolution()})()}close(){super.close(),Yr.off(js.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Yr.off(js.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){var n=this;this.processorContext.on(dl.REQUEST_UPDATE_CONSTRAINTS,function(){var i=L(function*(o,c,h){try{const g=Object.assign({},n._originalConstraints,...o);yield n.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(o,c,h){return i.apply(this,arguments)}}()),this.processorContext.on(dl.REQUEST_CONSTRAINTS,function(){var i=L(function*(o){o(n._originMediaStreamTrack.getSettings())});return function(o){return i.apply(this,arguments)}}())}}).prototype,"setDevice",[nH],Object.getOwnPropertyDescriptor(Gd.prototype,"setDevice"),Gd.prototype),ir(Gd.prototype,"setEnabled",[rH,h5],Object.getOwnPropertyDescriptor(Gd.prototype,"setEnabled"),Gd.prototype),ir(Gd.prototype,"setEncoderConfiguration",[iH],Object.getOwnPropertyDescriptor(Gd.prototype,"setEncoderConfiguration"),Gd.prototype),oH=Gd))||oH);class U1 extends is{constructor(i){super(),q(this,"name","VideoProcessorDestination"),q(this,"ID","0"),q(this,"_source",void 0),q(this,"videoContext",void 0),q(this,"inputTrack",void 0),this.videoContext=i}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Pe(Te.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Pe(Te.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(i){if(i.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");i.track&&i.track!==this.inputTrack&&(this.inputTrack=i.track,this.emit(Ud.ON_TRACK,i.track))}reset(){this.inputTrack=void 0,this.emit(Ud.ON_TRACK,void 0)}}class cH extends is{constructor(i){super(),q(this,"constraintsMap",new Map),q(this,"statsRegistry",[]),q(this,"trackId",void 0),this.trackId=i}getConstraints(){var i=this;return L(function*(){return yield jd(i,dl.REQUEST_CONSTRAINTS)})()}requestApplyConstraints(i,o){var c=this;return L(function*(){var h;return oe.info("processor ".concat(o.name," requestApplyConstraints for ").concat(c.trackId)),i&&c.constraintsMap.set(o,i),xo(c,dl.REQUEST_UPDATE_CONSTRAINTS,Array.from(Lg(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(i){var o=this;return L(function*(){var c;if(o.constraintsMap.has(i))return oe.info("processor ".concat(i.name," requestRevertConstraints for ").concat(o.trackId)),o.constraintsMap.delete(i),xo(o,dl.REQUEST_UPDATE_CONSTRAINTS,Array.from(Lg(c=o.constraintsMap).call(c)))})()}registerStats(i,o,c){this.statsRegistry.find(h=>h.processorID===i.ID&&h.processorName===i.name&&h.type===o)||this.statsRegistry.push({processorName:i.name,processorID:i.ID,type:o,cb:c})}unregisterStats(i,o){}gatherStats(){return this.statsRegistry.map(i=>{let{processorID:o,processorName:c,type:h,cb:g}=i;return{processorID:o,processorName:c,type:h,stats:g()}})}}class A2{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(i,o){q(this,"uid",void 0),q(this,"_uintid",void 0),q(this,"_trust_in_room_",!0),q(this,"_trust_audio_enabled_state_",!0),q(this,"_trust_video_enabled_state_",!0),q(this,"_trust_audio_mute_state_",!0),q(this,"_trust_video_mute_state_",!0),q(this,"_audio_muted_",!1),q(this,"_video_muted_",!1),q(this,"_audio_enabled_",!0),q(this,"_video_enabled_",!0),q(this,"_audio_added_",!1),q(this,"_video_added_",!1),q(this,"_trust_video_stream_added_state_",!0),q(this,"_trust_audio_stream_added_state_",!0),q(this,"_audioTrack",void 0),q(this,"_videoTrack",void 0),q(this,"_audioSSRC",void 0),q(this,"_videoSSRC",void 0),q(this,"_audioOrtc",void 0),q(this,"_videoOrtc",void 0),q(this,"_cname",void 0),q(this,"_rtxSsrcId",void 0),this.uid=i,this._uintid=o}}var uH=gF,lH=A,f5=ce;ns({target:"Promise",stat:!0},{try:function(n){var i=lH.f(this),o=f5(n);return(o.error?i.reject:i.resolve)(o.value),i.promise}});var m5=uH,dH=ns,hH=Xr,pH=hs,y2=_k,fH=Nl,mH=zu,gH=ch,g5=CS,_H=B7,vH=au,AH=mf,_5=Ns("isConcatSpreadable"),v5=9007199254740991,A5="Maximum allowed index exceeded",y5=hH.TypeError,yH=AH>=51||!pH(function(){var n=[];return n[_5]=!1,n.concat()[0]!==n}),EH=vH("concat"),bH=function(n){if(!fH(n))return!1;var i=n[_5];return void 0!==i?!!i:y2(n)};dH({target:"Array",proto:!0,forced:!yH||!EH},{concat:function(n){var i,o,c,h,g,p=mH(this),v=_H(p,0),_=0;for(i=-1,c=arguments.length;i<c;i++)if(bH(g=-1===i?p:arguments[i])){if(_+(h=gH(g))>v5)throw y5(A5);for(o=0;o<h;o++,_++)o in g&&g5(v,_,g[o])}else{if(_>=v5)throw y5(A5);g5(v,_++,g)}return v.length=_,v}});var E5={},SH=rh,CH=kl,b5=W_.f,IH=QU,S5="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];E5.f=function(n){return S5&&"Window"==SH(n)?function(i){try{return b5(i)}catch{return IH(S5)}}(n):b5(CH(n))};var V1={};V1.f=Ns;var C5=ff,wH=ws,RH=V1,OH=Yu.f,va=function(n){var i=C5.Symbol||(C5.Symbol={});wH(i,n)||OH(i,n,{value:RH.f(n)})},o0=ns,nB=Xr,DH=Pl,kH=zs,j1=Wc,NH=So,s0=Gc,Jy=vA,rB=hs,Wa=ws,PH=_k,MH=zo,xH=Nl,E2=Qc,I5=cC,b2=ca,LH=zu,S2=kl,iB=vf,T5=rl,oB=_d,Q1=kf,w5=Ys,BH=W_,R5=E5,sB=el,FH=hf,O5=Yu,UH=Df,D5=pf,VH=ZI,aB=nv,H1=Fm.exports,k5=zA,N5=yd,P5=Ns,jH=V1,QH=va,HH=Vl,M5=mg,C2=U7.forEach,Zl=GA("hidden"),I2="Symbol",x5=P5("toPrimitive"),GH=M5.set,L5=M5.getterFor(I2),Bp=Object.prototype,Pv=nB.Symbol,Xy=Pv&&Pv.prototype,WH=nB.TypeError,cB=nB.QObject,G1=DH("JSON","stringify"),B5=FH.f,nm=O5.f,Wg=R5.f,F5=D5.f,T2=NH([].push),Fp=H1("symbols"),$y=H1("op-symbols"),vl=H1("string-to-symbol-registry"),w2=H1("symbol-to-string-registry"),uB=H1("wks"),R2=!cB||!cB.prototype||!cB.prototype.findChild,O2=s0&&rB(function(){return 7!=Q1(nm({},"a",{get:function(){return nm(this,"a",{value:7}).a}})).a})?function(n,i,o){var c=B5(Bp,i);c&&delete Bp[i],nm(n,i,o),c&&n!==Bp&&nm(Bp,i,c)}:nm,W1=function(n,i){var o=Fp[n]=Q1(Xy);return GH(o,{type:I2,tag:n,description:i}),s0||(o.description=i),o},lB=function(n,i,o){n===Bp&&lB($y,i,o),b2(n);var c=iB(i);return b2(o),Wa(Fp,c)?(o.enumerable?(Wa(n,Zl)&&n[Zl][c]&&(n[Zl][c]=!1),o=Q1(o,{enumerable:oB(0,!1)})):(Wa(n,Zl)||nm(n,Zl,oB(1,{})),n[Zl][c]=!0),O2(n,c,o)):nm(n,c,o)},dB=function(n,i){b2(n);var o=S2(i),c=w5(o).concat(V5(o));return C2(c,function(h){s0&&!j1(Mv,o,h)||lB(n,h,o[h])}),n},Mv=function(n){var i=iB(n),o=j1(F5,this,i);return!(this===Bp&&Wa(Fp,i)&&!Wa($y,i))&&(!(o||!Wa(this,i)||!Wa(Fp,i)||Wa(this,Zl)&&this[Zl][i])||o)},hB=function(n,i){var o=S2(n),c=iB(i);if(o!==Bp||!Wa(Fp,c)||Wa($y,c)){var h=B5(o,c);return!h||!Wa(Fp,c)||Wa(o,Zl)&&o[Zl][c]||(h.enumerable=!0),h}},U5=function(n){var i=Wg(S2(n)),o=[];return C2(i,function(c){Wa(Fp,c)||Wa(k5,c)||T2(o,c)}),o},V5=function(n){var i=n===Bp,o=Wg(i?$y:S2(n)),c=[];return C2(o,function(h){!Wa(Fp,h)||i&&!Wa(Bp,h)||T2(c,Fp[h])}),c};if(Jy||(aB(Xy=(Pv=function(){if(E2(Xy,this))throw WH("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?T5(arguments[0]):void 0,i=N5(n),o=function(c){this===Bp&&j1(o,$y,c),Wa(this,Zl)&&Wa(this[Zl],i)&&(this[Zl][i]=!1),O2(this,i,oB(1,c))};return s0&&R2&&O2(Bp,i,{configurable:!0,set:o}),W1(i,n)}).prototype,"toString",function(){return L5(this).tag}),aB(Pv,"withoutSetter",function(n){return W1(N5(n),n)}),D5.f=Mv,O5.f=lB,UH.f=dB,FH.f=hB,BH.f=R5.f=U5,sB.f=V5,jH.f=function(n){return W1(P5(n),n)},s0&&nm(Xy,"description",{configurable:!0,get:function(){return L5(this).description}})),o0({global:!0,wrap:!0,forced:!Jy,sham:!Jy},{Symbol:Pv}),C2(w5(uB),function(n){QH(n)}),o0({target:I2,stat:!0,forced:!Jy},{for:function(n){var i=T5(n);if(Wa(vl,i))return vl[i];var o=Pv(i);return vl[i]=o,w2[o]=i,o},keyFor:function(n){if(!I5(n))throw WH(n+" is not a symbol");if(Wa(w2,n))return w2[n]},useSetter:function(){R2=!0},useSimple:function(){R2=!1}}),o0({target:"Object",stat:!0,forced:!Jy,sham:!s0},{create:function(n,i){return void 0===i?Q1(n):dB(Q1(n),i)},defineProperty:lB,defineProperties:dB,getOwnPropertyDescriptor:hB}),o0({target:"Object",stat:!0,forced:!Jy},{getOwnPropertyNames:U5,getOwnPropertySymbols:V5}),o0({target:"Object",stat:!0,forced:rB(function(){sB.f(1)})},{getOwnPropertySymbols:function(n){return sB.f(LH(n))}}),G1&&o0({target:"JSON",stat:!0,forced:!Jy||rB(function(){var n=Pv();return"[null]"!=G1([n])||"{}"!=G1({a:n})||"{}"!=G1(Object(n))})},{stringify:function(n,i,o){var c=VH(arguments),h=i;if((xH(i)||void 0!==n)&&!I5(n))return PH(i)||(i=function(g,p){if(MH(h)&&(p=j1(h,this,g,p)),!I5(p))return p}),c[1]=i,kH(G1,null,c)}}),!Xy[x5]){var KH=Xy.valueOf;aB(Xy,x5,function(n){return j1(KH,this)})}HH(Pv,I2),k5[Zl]=!0,va("asyncIterator"),va("hasInstance"),va("isConcatSpreadable"),va("iterator"),va("match"),va("matchAll"),va("replace"),va("search"),va("species"),va("split"),va("toPrimitive"),va("toStringTag"),va("unscopables"),Vl(Xr.JSON,"JSON",!0);var j5=ff.Symbol;va("asyncDispose"),va("dispose"),va("matcher"),va("metadata"),va("observable"),va("patternMatch"),va("replaceAll");var pB=j5,zH=V1.f("asyncIterator");function D2(n){this.wrapped=n}function K1(n){var i,o;function c(g,p){try{var v=n[g](p),_=v.value,y=_ instanceof D2;m5.resolve(y?_.wrapped:_).then(function(b){y?c("return"===g?"return":"next",b):h(v.done?"return":"normal",b)},function(b){c("throw",b)})}catch(b){h("throw",b)}}function h(g,p){switch(g){case"return":i.resolve({value:p,done:!0});break;case"throw":i.reject(p);break;default:i.resolve({value:p,done:!1})}(i=i.next)?c(i.key,i.arg):o=null}this._invoke=function(g,p){return new m5(function(v,_){var y={key:g,arg:p,resolve:v,reject:_,next:null};o?o=o.next=y:(i=o=y,c(g,p))})},"function"!=typeof n.return&&(this.return=void 0)}function a0(n){return function(){return new K1(n.apply(this,arguments))}}function gs(n){return new D2(n)}K1.prototype["function"==typeof pB&&zH||"@@asyncIterator"]=function(){return this},K1.prototype.next=function(n){return this._invoke("next",n)},K1.prototype.throw=function(n){return this._invoke("throw",n)},K1.prototype.return=function(n){return this._invoke("return",n)};var fB=V1.f("iterator");function z1(n,i){var o={},c=!1;function h(g,p){return c=!0,p=new m5(function(v){v(n[g](p))}),{done:!1,value:i(p)}}return o[void 0!==pB&&fB||"@@iterator"]=function(){return this},o.next=function(g){return c?(c=!1,g):h("next",g)},"function"==typeof n.throw&&(o.throw=function(g){if(c)throw c=!1,g;return h("throw",g)}),"function"==typeof n.return&&(o.return=function(g){return c?(c=!1,g):h("return",g)}),o}var k2=zH,N2=fc,Fh=re,gB=Ka,YH=Lr,Y1=ka,G5=ii.f,qH=Ci,rm=Q.Symbol,ed=rm&&rm.prototype;if(O&&tt(rm)&&(!("description"in ed)||void 0!==rm().description)){var _B={},q1=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:Y1(arguments[0]),i=YH(ed,this)?new rm(n):void 0===n?rm():rm(n);return""===n&&(_B[i]=!0),i};qH(q1,rm),q1.prototype=ed,ed.constructor=q1;var im="Symbol(test)"==String(rm("test")),Zy=Fh(ed.toString),J1=Fh(ed.valueOf),JH=/^Symbol\((.*)\)[^)]+$/,vB=Fh("".replace),W5=Fh("".slice);G5(ed,"description",{configurable:!0,get:function(){var n=J1(this),i=Zy(n);if(gB(_B,n))return"";var o=im?W5(i,7,-1):vB(i,JH,"$1");return""===o?void 0:o}}),N2({global:!0,forced:!0},{Symbol:q1})}var lu={exports:{}};function X1(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function K5(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?X1(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):X1(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function $1(n,i,o,c,h,g){let p=[],v=[],_=[],y=[],b=!1,C=!1;if(lu.exports.parse(n).mediaDescriptions.forEach(w=>{g&&g!==w.attributes.direction||("video"!==w.media.mediaType||b||(v=w.attributes.payloads,y=w.attributes.extmaps,b=!0),"audio"!==w.media.mediaType||C||(p=w.attributes.payloads,_=w.attributes.extmaps,C=!0))}),!y||0===v.length)throw new Error("Cannot get video capabilities from SDP.");if(!_||0===p.length)throw new Error("Cannot get audio capabilities from SDP.");return v.forEach(w=>{var P;null!==(P=w.rtpMap)&&void 0!==P&&P.clockRate&&(w.rtpMap.clockRate=parseInt(w.rtpMap.clockRate))}),p.forEach(w=>{var P;null!==(P=w.rtpMap)&&void 0!==P&&P.clockRate&&(w.rtpMap.clockRate=parseInt(w.rtpMap.clockRate))}),i&&(p=p.filter(w=>{var P;return"rtx"!==(null===(P=w.rtpMap)||void 0===P?void 0:P.encodingName.toLowerCase())}),v=v.filter(w=>{var P;return"rtx"!==(null===(P=w.rtpMap)||void 0===P?void 0:P.encodingName.toLowerCase())})),o&&(v=v.filter(w=>{var P;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(P=w.rtpMap)||void 0===P?void 0:P.encodingName)||"")})),c&&c?.length>0&&(p=p.filter(w=>{var P;return c.includes((null===(P=w.rtpMap)||void 0===P?void 0:P.encodingName.toLowerCase())||"")})),h&&h?.length>0&&(v=v.filter(w=>{var P;return h.includes((null===(P=w.rtpMap)||void 0===P?void 0:P.encodingName.toLowerCase())||"")})),{audioCodecs:p,videoCodecs:v,audioExtensions:_,videoExtensions:y}}function M2(n){const i=lu.exports.parse(n);let o,c;for(const h of i.mediaDescriptions){if(!o){const g=h.attributes.iceUfrag,p=h.attributes.icePwd;if(!g||!p)throw new Error("Cannot get iceUfrag or icePwd from SDP.");o={iceUfrag:g,icePwd:p}}if(!c){const g=h.attributes.fingerprints;g.length>0&&(c={fingerprints:g})}}if(!c&&i.attributes.fingerprints.length>0&&(c={fingerprints:i.attributes.fingerprints}),!c||!o)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:o,dtlsParameters:c}}function z5(n,i,o){const{cname:c}=n;let h;void 0!==i&&void 0!==o?(h=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:i,port:o.toString(),type:"host",extension:{}}],oe.debug("Using remote candidate from AP ".concat(i,":").concat(o)),xn("debug",[],"Using remote candidate from AP ".concat(i,":").concat(o))):h=n.iceParameters.candidates.map(_=>({foundation:_.foundation,componentId:"1",transport:_.protocol,priority:_.priority.toString(),connectionAddress:_.ip,port:_.port.toString(),type:_.type,extension:{}}));const g={fingerprints:n.dtlsParameters.fingerprints.map(_=>({hashFunction:_.algorithm,fingerprint:_.fingerprint}))},p={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let v;switch(n.dtlsParameters.role){case"server":v="passive";break;case"client":v="active";break;case"auto":v="actpass"}return{dtlsParameters:g,iceParameters:p,candidates:h,rtpCapabilities:Y5(n.rtpCapabilities),setup:v,cname:c}}function c0(n,i,o){const c=[],h=[];return n.forEach(g=>{let{ssrcId:p,rtx:v}=g;const _=cs(8,"track-"),y={ssrcId:p,attributes:K5({label:_,mslabel:o=o||cs(10,""),msid:"".concat(o," ").concat(_)},i&&{cname:i})};if(c.push(y),void 0!==v){const b={ssrcId:v,attributes:K5({label:_,mslabel:o,msid:"".concat(o," ").concat(_)},i&&{cname:i})};c.push(b),h.push({semantic:"FID",ssrcIds:[p,v]})}}),n.length>1&&h.push({semantic:"SIM",ssrcIds:n.map(g=>{let{ssrcId:p}=g;return p})}),{ssrcs:c,ssrcGroups:h}}function Mu(n,i){i instanceof Ha&&n.attributes.payloads.forEach(o=>{var c;const h=null===(c=o.rtpMap)||void 0===c?void 0:c.encodingName.toLowerCase();if(!h||-1===["opus","pcmu","pcma","g722"].indexOf(h))return;o.fmtp||(o.fmtp={parameters:{}}),o.fmtp.parameters.minptime="10",o.fmtp.parameters.useinbandfec="1";const g=i._encoderConfig;g&&("pcmu"!==h&&"pcma"!==h&&"g722"!==h&&(g.bitrate&&!Es()&&(o.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*g.bitrate))),g.sampleRate&&(o.fmtp.parameters.maxplaybackrate="".concat(g.sampleRate),o.fmtp.parameters["sprop-maxcapturerate"]="".concat(g.sampleRate))),g.stereo&&(o.fmtp.parameters.stereo="1",o.fmtp.parameters["sprop-stereo"]="1"))})}function AB(n){const i=n.attributes.unrecognized.findIndex(o=>"x-google-flag"===o.attField&&"conference"===o.attValue);-1!==i&&n.attributes.unrecognized.splice(i,1)}function Z1(n,i){if(!(i instanceof Os&&i._encoderConfig&&-1===i._hints.indexOf(Rc.SCREEN_TRACK)))return;const o=i._encoderConfig;Oc().supportMinBitrate&&o.bitrateMin&&n.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-min-bitrate"]="".concat(o.bitrateMin))}),Oc().supportMinBitrate&&!i._hints.includes(Rc.LOW_STREAM)&&o.bitrateMax&&n.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-start-bitrate"]="".concat(Bt("X_GOOGLE_START_BITRATE")||Math.floor(o.bitrateMax)))})}function ew(n,i,o){if(!i)return;let c,h;if("video"===n.media.mediaType?(c=o.videoExtensions,h=o.videoCodecs):(c=o.audioExtensions,h=o.audioCodecs),!0===i.tcc){const g=c.find(p=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===p.extensionName);g&&(n.attributes.extmaps.find(p=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===p.extensionName)||n.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),(p=h,v=n.attributes.payloads,v.filter(_=>!!p.find(y=>y.payloadType===_.payloadType&&!!y.rtcpFeedbacks.find(b=>"transport-cc"===b.type)))).forEach(p=>{p.rtcpFeedbacks.find(v=>"transport-cc"===v.type)||p.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(!1===i.tcc){const g=n.attributes.extmaps.findIndex(p=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===p.extensionName);-1!==g&&n.attributes.extmaps.splice(g,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(_=>"transport-cc"===_.type);-1!==v&&p.rtcpFeedbacks.splice(v,1)})}var p,v;if(!0===i.remb){const g=c.find(p=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===p.extensionName);g&&(n.attributes.extmaps.find(p=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===p.extensionName)||n.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(p,v){return v.filter(_=>!!p.find(y=>y.payloadType===_.payloadType&&!!y.rtcpFeedbacks.find(b=>"goog-remb"===b.type)))}(h,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(v=>"goog-remb"===v.type)||p.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(!1===i.remb){const g=n.attributes.extmaps.findIndex(p=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===p.extensionName);-1!==g&&n.attributes.extmaps.splice(g,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(_=>"goog-remb"===_.type);-1!==v&&p.rtcpFeedbacks.splice(v,1)})}}function x2(n,i,o,c,h,g){if("videoExtensions"===o||"audioExtensions"===o){const p=[];return n[o].forEach(v=>{i[o].some((_,y)=>{if(v.entry===_.entry&&v.extensionName===_.extensionName)return p.push(y),!0})?g[o].push(v):c[o].push(v)}),void i[o].forEach((v,_)=>{-1===p.indexOf(_)&&h[o].push(v)})}if("videoCodecs"===o||"audioCodecs"===o){const p=[];return n[o].forEach(v=>{i[o].some((_,y)=>{if(v.payloadType===_.payloadType&&JSON.stringify(v)===JSON.stringify(_))return p.push(y),!0})?g[o].push(v):c[o].push(v)}),void i[o].forEach((v,_)=>{-1===p.indexOf(_)&&h[o].push(v)})}}function Y5(n){const{send:i,recv:o,sendrecv:c}=n;if(!c){if(!i||!o)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:i,recv:o}}let h,g;return i?(h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},h.audioCodecs=[...i.audioCodecs,...c.audioCodecs],h.videoCodecs=[...i.videoCodecs,...c.videoCodecs],h.audioExtensions=[...i.audioExtensions,...c.audioExtensions],h.videoExtensions=[...i.videoExtensions,...c.videoExtensions]):h=c,o?(g={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},g.audioCodecs=[...o.audioCodecs,...c.audioCodecs],g.videoCodecs=[...o.videoCodecs,...c.videoCodecs],g.audioExtensions=[...o.audioExtensions,...c.audioExtensions],g.videoExtensions=[...o.videoExtensions,...c.videoExtensions]):g=c,{send:h,recv:g}}!function(n,i){n.exports=(()=>{var o={8:(g,p,v)=>{v.r(p),v.d(p,{Parser:()=>un,Printer:()=>bn,parse:()=>cn,print:()=>Rn});const _="\n",y="".concat("\r").concat(_),b=" ";let C;function w(Vt){return Vt>="0"&&Vt<="9"}function P(Vt){return Vt>="!"&&Vt<="~"}function j(Vt){return P(Vt)||Vt>="\x80"&&Vt<="\xff"}function G(Vt){return"!"===Vt||Vt>="#"&&Vt<="'"||Vt>="*"&&Vt<="+"||Vt>="-"&&Vt<="."||Vt>="0"&&Vt<="9"||Vt>="A"&&Vt<="Z"||Vt>="^"&&Vt<="~"}function Z(Vt){return Vt>="1"&&Vt<="9"}function ae(Vt){return Vt>="A"&&Vt<="Z"||Vt>="a"&&Vt<="z"}function fe(Vt){return"d"===Vt||"h"===Vt||"m"===Vt||"s"===Vt}function be(Vt){return Vt>"\x01"&&Vt<"\t"||Vt>"\v"&&Vt<"\f"||Vt>"\x0e"&&Vt<"\xff"}function Ce(Vt){return ae(Vt)||w(Vt)||"+"===Vt||"/"===Vt}function it(Vt){return w(Vt)||ae(Vt)||"+"===Vt||"/"===Vt||"-"===Vt||"_"===Vt}function wt(Vt){return ae(Vt)||w(Vt)||"+"===Vt||"/"===Vt}function bt(Vt,V){var _e=Object.keys(Vt);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(Vt);V&&(ke=ke.filter(function(Nt){return Object.getOwnPropertyDescriptor(Vt,Nt).enumerable})),_e.push.apply(_e,ke)}return _e}function Pt(Vt){for(var V=1;V<arguments.length;V++){var _e=null!=arguments[V]?arguments[V]:{};V%2?bt(Object(_e),!0).forEach(function(ke){En(Vt,ke,_e[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Vt,Object.getOwnPropertyDescriptors(_e)):bt(Object(_e)).forEach(function(ke){Object.defineProperty(Vt,ke,Object.getOwnPropertyDescriptor(_e,ke))})}return Vt}function En(Vt,V,_e){return V in Vt?Object.defineProperty(Vt,V,{value:_e,enumerable:!0,configurable:!0,writable:!0}):Vt[V]=_e,Vt}var Vt;(Vt=C||(C={})).VERSION="v",Vt.ORIGIN="o",Vt.SESSION_NAME="s",Vt.INFORMATION="i",Vt.URI="u",Vt.EMAIL="e",Vt.PHONE="p",Vt.CONNECTION="c",Vt.BANDWIDTH="b",Vt.TIME="t",Vt.REPEAT="r",Vt.ZONE_ADJUSTMENTS="z",Vt.KEY="k",Vt.ATTRIBUTE="a",Vt.MEDIA="m";class pn{consumeText(V,_e){let ke=_e;for(;ke<V.length;){const Nt=V[ke];if("\0"===Nt||"\r"===Nt||Nt===_)break;ke+=1}if(ke-_e==0)throw new Error("Invalid text, at ".concat(V));return ke}consumeUnicastAddress(V,_e,ke){return this.consumeTill(V,_e,b)}consumeOneOrMore(V,_e,ke){let Nt=_e;for(;ke(V[Nt]);)Nt++;if(Nt-_e==0)throw new Error("Invalid rule at ".concat(_e,"."));return Nt}consumeSpace(V,_e){if(V[_e]===b)return _e+1;throw new Error("Invalid space at ".concat(_e,"."))}consumeIP4Address(V,_e){let ke=_e;for(let Nt=0;Nt<4;Nt++)if(ke=this.consumeDecimalUChar(V,ke),3!==Nt){if("."!==V[ke])throw new Error("Invalid IP4 address.");ke++}return ke}consumeDecimalUChar(V,_e){let ke=_e;for(let In=0;In<3&&w(V[ke]);In++,ke++);if(ke-_e==0)throw new Error("Invalid decimal uchar.");const Nt=parseInt(V.slice(_e,ke));if(Nt>=0&&Nt<=255)return ke;throw new Error("Invalid decimal uchar")}consumeIP6Address(V,_e){let ke=this.consumeHexpart(V,_e);return":"===V[ke]&&(ke+=1,ke=this.consumeIP4Address(V,ke)),ke}consumeHexpart(V,_e){let ke=_e;if(":"===V[ke]&&":"===V[ke+1]){ke+=2;try{ke=this.consumeHexseq(V,ke)}catch{}return ke}if(ke=this.consumeHexseq(V,ke),":"===V[ke]&&":"===V[ke+1]){ke+=2;try{ke=this.consumeHexseq(V,ke)}catch{}return ke}return ke}consumeHexseq(V,_e){let ke=_e;for(;ke=this.consumeHex4(V,ke),":"===V[ke]&&":"!==V[ke+1];)ke+=1;return ke}consumeHex4(V,_e){let ke=0;for(;ke<4;ke++)if(!((Nt=V[_e+ke])>="0"&&Nt<="9"||Nt>="a"&&Nt<="f"||Nt>="A"&&Nt<="F")){if(0===ke)throw new Error("Invalid hex 4");break}var Nt;return _e+ke}consumeFQDN(V,_e){let ke=_e;for(;w(V[ke])||ae(V[ke])||"-"===V[ke]||"."===V[ke];)ke+=1;if(ke-_e<4)throw new Error("Invalid FQDN");return ke}consumeExtnAddr(V,_e){return this.consumeOneOrMore(V,_e,j)}consumeMulticastAddress(V,_e,ke){switch(ke){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(V,_e);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(V,_e);default:try{return this.consumeFQDN(V,_e)}catch{return this.consumeExtnAddr(V,_e)}}}consumeIP6MulticastAddress(V,_e){const ke=this.consumeHexpart(V,_e);return"/"===V[ke]?this.consumeInteger(V,ke+1):ke}consumeIP4MulticastAddress(V,_e){let ke=_e+3;const Nt=V.slice(_e,ke),In=parseInt(Nt);if(In<224||In>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Tr=0;Tr<3;Tr++){if("."!==V[ke])throw new Error("Invalid IP4 multicast address.");ke+=1,ke=this.consumeDecimalUChar(V,ke)}return"/"===V[ke]&&(ke+=1),ke=this.consumeTTL(V,ke),"/"===V[ke]&&(ke=this.consumeInteger(V,ke)),ke}consumeInteger(V,_e){if(!Z(V[_e]))throw new Error("Invalid integer.");for(_e+=1;w(V[_e]);)_e+=1;return _e}consumeTTL(V,_e){if("0"===V[_e])return _e+1;if(!Z(V[_e]))throw new Error("Invalid TTL.");_e+=1;for(let ke=0;ke<2&&w(V[_e]);ke++)_e+=1;return _e}consumeToken(V,_e){return this.consumeOneOrMore(V,_e,G)}consumeTime(V,_e){let ke=_e;if("0"===V[ke])return ke+1;for(Z(V[ke])&&(ke+=1);w(V[ke]);)ke++;if(ke-_e<10)throw new Error("Invalid time");return ke}consumeAddress(V,_e){return this.consumeTill(V,_e,b)}consumeTypedTime(V,_e){let ke=_e;return ke=this.consumeOneOrMore(V,ke,w),fe(V[ke])?ke+1:ke}consumeRepeatInterval(V,_e){if(!Z(V[_e]))throw new Error("Invalid repeat interval");for(_e+=1;w(V[_e]);)_e+=1;return fe(V[_e])&&(_e+=1),_e}consumePort(V,_e){return this.consumeOneOrMore(V,_e,w)}consume(V,_e,ke){for(let Nt=0;Nt<ke.length;Nt++){if(_e+Nt>=V.length)throw new Error("consume exceeding value length");if(V[_e+Nt]!==ke[Nt])throw new Error("consume ".concat(ke," failed at ").concat(Nt))}return _e+ke.length}consumeTill(V,_e,ke){let Nt=_e;for(;Nt<V.length&&("string"!=typeof ke||V[Nt]!==ke)&&("function"!=typeof ke||!ke(V[Nt]));)Nt++;return Nt}}class un extends pn{constructor(){super(),En(this,"records",[]),En(this,"currentLine",0)}parse(V){const _e=this.probeEOL(V);this.records=V.split(_e).filter(zd=>!!zd.trim()).map(this.parseLine),this.currentLine=0;const ke=this.parseVersion(),Nt=this.parseOrigin(),In=this.parseSessionName(),Tr=this.parseInformation(),Cr=this.parseUri(),xr=this.parseEmail(),Qi=this.parsePhone(),Nc=this.parseConnection(),ya=this.parseBandWidth(),Eo=this.parseTimeFields(),Ji=this.parseKey(),Qs=this.parseSessionAttribute(),jp=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:ke,origin:Nt,sessionName:In,information:Tr,uri:Cr,emails:xr,phones:Qi,connection:Nc,bandwidths:ya,timeFields:Eo,key:Ji,attributes:Qs,mediaDescriptions:jp}}getCurrentRecord(){const V=this.records[this.currentLine];if(!V)throw new Error("Record doesn't exit.");return V}probeEOL(V){for(let _e=0;_e<V.length;_e++)if(V[_e]===_)return"\r"===V[_e-1]?y:_;throw new Error("Invalid newline character.")}parseLine(V,_e){if(V.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const ke=V[0];if("="!==V[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:ke,value:V.slice(2),line:_e,cur:0}}parseSessionAttribute(){const V=new Ge;for(;this.currentLine<this.records.length;){const _e=this.getCurrentRecord();if(_e.type!==C.ATTRIBUTE)break;const ke={attField:this.extractOneOrMore(_e,Nt=>G(Nt)&&":"!==Nt),_cur:0};":"===_e.value[_e.cur]&&(_e.cur+=1,ke.attValue=this.extractOneOrMore(_e,be)),V.parse(ke),this.currentLine++}return V.digest()}parseMediaAttributes(V){const _e=new ot(V);for(;this.currentLine<this.records.length;){const ke=this.getCurrentRecord();if(ke.type!==C.ATTRIBUTE)break;const Nt={attField:this.extractOneOrMore(ke,In=>G(In)&&":"!==In),_cur:0};":"===ke.value[ke.cur]&&(ke.cur+=1,Nt.attValue=this.extractOneOrMore(ke,be)),_e.parse(Nt),this.currentLine++}return _e.digest()}parseKey(){const V=this.getCurrentRecord();if(V.type===C.KEY){if("prompt"===V.value||"clear:"===V.value||"base64:"===V.value||"uri:"===V.value)return V.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const V=this.getCurrentRecord();if(V.type===C.ZONE_ADJUSTMENTS){const _e=[];for(;;)try{const ke=this.extract(V,this.consumeTime);this.consumeSpaceForRecord(V);let Nt=!1;"-"===V.value[V.cur]&&(Nt=!0,V.cur+=1);const In=this.extract(V,this.consumeTypedTime);_e.push({time:ke,typedTime:In,back:Nt})}catch{break}if(0===_e.length)throw new Error("Invalid zone adjustments");return this.currentLine++,_e}return[]}parseRepeat(){const V=[];for(;;){const _e=this.getCurrentRecord();if(_e.type!==C.REPEAT)break;{const ke=this.extract(_e,this.consumeRepeatInterval),Nt=this.parseTypedTime(_e);V.push({repeatInterval:ke,typedTimes:Nt}),this.currentLine++}}return V}parseTypedTime(V){const _e=[];for(;;)try{this.consumeSpaceForRecord(V),_e.push(this.extract(V,this.consumeTypedTime))}catch{break}if(0===_e.length)throw new Error("Invalid typed time.");return _e}parseTime(){const V=this.getCurrentRecord(),_e=this.extract(V,this.consumeTime);this.consumeSpaceForRecord(V);const ke=this.extract(V,this.consumeTime);return this.currentLine++,{startTime:_e,stopTime:ke}}parseBandWidth(){const V=[];for(;this.currentLine<this.records.length;){const _e=this.getCurrentRecord();if(_e.type!==C.BANDWIDTH)break;{const ke=this.extractOneOrMore(_e,G);if(":"!==_e.value[_e.cur])throw new Error("Invalid bandwidth field.");_e.cur++;const Nt=this.extractOneOrMore(_e,w);V.push({bwtype:ke,bandwidth:Nt}),this.currentLine++}}return V}parseVersion(){const V=this.getCurrentRecord();if(V.type!==C.VERSION)throw new Error("first sdp record must be version");const _e=V.value.slice(0,this.consumeOneOrMore(V.value,0,w));if(_e.length!==V.value.length)throw new Error('invalid proto version, "v='.concat(V.value,'"'));return this.currentLine++,_e}parseOrigin(){const V=this.getCurrentRecord();if(V.type!==C.ORIGIN)throw new Error("second line of sdp must be origin");const _e=this.extractOneOrMore(V,j);this.consumeSpaceForRecord(V);const ke=this.extractOneOrMore(V,w);this.consumeSpaceForRecord(V);const Nt=this.extractOneOrMore(V,w);this.consumeSpaceForRecord(V);const In=this.extractOneOrMore(V,G);this.consumeSpaceForRecord(V);const Tr=this.extractOneOrMore(V,G);this.consumeSpaceForRecord(V);const Cr=this.extract(V,this.consumeUnicastAddress);return this.currentLine++,{username:_e,sessId:ke,sessVersion:Nt,nettype:In,addrtype:Tr,unicastAddress:Cr}}parseSessionName(){const V=this.getCurrentRecord();if(V.type===C.SESSION_NAME){const _e=this.extract(V,this.consumeText);return this.currentLine++,_e}}parseInformation(){const V=this.getCurrentRecord();if(V.type!==C.INFORMATION)return;const _e=this.extract(V,this.consumeText);return this.currentLine++,_e}parseUri(){const V=this.getCurrentRecord();if(V.type===C.URI)return this.currentLine++,V.value}parseEmail(){const V=[];for(;;){const _e=this.getCurrentRecord();if(_e.type!==C.EMAIL)break;V.push(_e.value),this.currentLine++}return V}parsePhone(){const V=[];for(;;){const _e=this.getCurrentRecord();if(_e.type!==C.PHONE)break;V.push(_e.value),this.currentLine++}return V}parseConnection(){const V=this.getCurrentRecord();if(V.type===C.CONNECTION){const _e=this.extractOneOrMore(V,G);this.consumeSpaceForRecord(V);const ke=this.extractOneOrMore(V,G);this.consumeSpaceForRecord(V);const Nt=this.extract(V,this.consumeAddress);return this.currentLine++,{nettype:_e,addrtype:ke,address:Nt}}}parseMedia(){const V=this.getCurrentRecord(),_e=this.extract(V,this.consumeToken);this.consumeSpaceForRecord(V);let ke=this.extract(V,this.consumePort);"/"===V.value[V.cur]&&(V.cur+=1,ke+=this.extract(V,this.consumeInteger)),this.consumeSpaceForRecord(V);const Nt=[];for(Nt.push(this.extract(V,this.consumeToken));"/"===V.value[V.cur];)V.cur+=1,Nt.push(this.extract(V,this.consumeToken));if(0===Nt.length)throw new Error("Invalid proto");const In=this.parseFmt(V);return this.currentLine++,{mediaType:_e,port:ke,protos:Nt,fmts:In}}parseTimeFields(){const V=[];for(;this.getCurrentRecord().type===C.TIME;){const _e=this.parseTime(),ke=this.parseRepeat(),Nt=this.parseZone();V.push({time:_e,repeats:ke,zones:Nt})}return V}parseMediaDescription(){const V=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===C.MEDIA;){const _e=this.parseMedia(),ke=this.parseInformation(),Nt=this.parseConnections(),In=this.parseBandWidth(),Tr=this.parseKey(),Cr=this.parseMediaAttributes(_e);V.push({media:_e,information:ke,connections:Nt,bandwidths:In,key:Tr,attributes:Cr})}return V}parseConnections(){const V=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===C.CONNECTION;)V.push(this.parseConnection());return V}parseFmt(V){const _e=[];for(;;)try{this.consumeSpaceForRecord(V),_e.push(this.extract(V,this.consumeToken))}catch{break}if(0===_e.length)throw new Error("Invalid fmts");return _e}extract(V,_e,...ke){const Nt=_e.call(this,V.value,V.cur,...ke),In=V.value.slice(V.cur,Nt);return V.cur=Nt,In}extractOneOrMore(V,_e){const ke=this.consumeOneOrMore(V.value,V.cur,_e),Nt=V.value.slice(V.cur,ke);return V.cur=ke,Nt}consumeSpaceForRecord(V){if(V.value[V.cur]!==b)throw new Error("Invalid space at ".concat(V.cur,"."));V.cur+=1}}class yt extends pn{constructor(...V){super(...V),En(this,"attributes",void 0),En(this,"digested",!1)}extractOneOrMore(V,_e,ke){const Nt=this.consumeOneOrMore(V.attValue,V._cur,_e),In=V.attValue.slice(V._cur,Nt),[Tr,Cr]=ke||[];if("number"==typeof Tr&&In.length<Tr)throw new Error("error in length, should be more or equal than ".concat(Tr," characters."));if("number"==typeof Cr&&In.length>Cr)throw new Error("error in length, should be less or equal than ".concat(Cr," characters."));return V._cur=Nt,In}consumeAttributeSpace(V){if(V.attValue[V._cur]!==b)throw new Error("Invalid space at ".concat(V._cur,"."));V._cur+=1}extract(V,_e,...ke){if(!V.attValue)throw new Error("Nothing to extract from attValue.");const Nt=_e.call(this,V.attValue,V._cur,...ke),In=V.attValue.slice(V._cur,Nt);return V._cur=Nt,In}atEnd(V){if(!V.attValue)throw new Error;return V._cur>=V.attValue.length}peekChar(V){if(!V.attValue)throw new Error;return V.attValue[V._cur]}peek(V,_e){if(!V.attValue)throw new Error;for(let ke=0;ke<_e.length;ke++)if(_e[ke]!==V.attValue[V._cur+ke])return!1;return!0}parseIceUfrag(V){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(V,Ce,[4,256])}parseIcePwd(V){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(V,Ce,[22,256])}parseIceOptions(V){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const _e=[];for(;!this.atEnd(V);){_e.push(this.extractOneOrMore(V,Ce));try{this.consumeAttributeSpace(V)}catch(ke){if(this.atEnd(V))break;throw ke}}this.attributes.iceOptions=_e}parseFingerprint(V){const _e=this.extract(V,this.consumeToken);this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill);this.attributes.fingerprints.push({hashFunction:_e,fingerprint:ke})}parseExtmap(V){const _e=this.extractOneOrMore(V,w);let ke;"/"===this.peekChar(V)&&(this.extract(V,this.consume,"/"),ke=this.extract(V,this.consumeToken)),this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeTill,b),In=Pt(Pt({entry:parseInt(_e,10)},ke&&{direction:ke}),{},{extensionName:Nt});this.peekChar(V)===b&&(this.consumeAttributeSpace(V),In.extensionAttributes=this.extract(V,this.consumeTill)),this.attributes.extmaps.push(In)}parseSetup(V){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const _e=this.extract(V,this.consumeTill);if("active"!==_e&&"passive"!==_e&&"actpass"!==_e&&"holdconn"!==_e)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=_e}}class Ge extends yt{constructor(...V){super(...V),En(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(V){if(this.digested)throw new Error("already digested");try{switch(V.attField){case"group":this.parseGroup(V);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(V);break;case"ice-pwd":this.parseIcePwd(V);break;case"ice-options":this.parseIceOptions(V);break;case"fingerprint":this.parseFingerprint(V);break;case"setup":this.parseSetup(V);break;case"tls-id":this.parseTlsId(V);break;case"identity":this.parseIdentity(V);break;case"extmap":this.parseExtmap(V);break;case"msid-semantic":this.parseMsidSemantic(V);break;default:V.ignored=!0,this.attributes.unrecognized.push(V)}}catch(_e){throw console.error("parsing session attribute ".concat(V.attField,' error, "a=').concat(V.attField,":").concat(V.attValue,'"')),_e}if(!V.ignored&&V.attValue&&!this.atEnd(V))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(V){const _e=this.extract(V,this.consumeToken),ke=[];for(;!this.atEnd(V)&&this.peekChar(V)===b;)this.consumeAttributeSpace(V),ke.push(this.extract(V,this.consumeToken));this.attributes.groups.push({semantic:_e,identificationTag:ke})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(V){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(V,it)}parseIdentity(V){const _e=this.extractOneOrMore(V,wt),ke=[];for(;!this.atEnd(V)&&this.peekChar(V)===b;){this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeToken);this.extract(V,this.consume,"=");const In=this.extractOneOrMore(V,Tr=>Tr!==b&&be(Tr));ke.push({name:Nt,value:In})}this.attributes.identities.push({assertionValue:_e,extensions:ke})}parseMsidSemantic(V){this.peekChar(V)===b&&this.consumeAttributeSpace(V);const _e={semantic:this.extract(V,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(V)}catch{break}if("*"===this.peekChar(V)){this.extract(V,this.consume,"*"),_e.applyForAll=!0;break}{const ke=this.extract(V,this.consumeTill,b);_e.identifierList.push(ke)}}this.attributes.msidSemantic=_e}}class ot extends yt{constructor(V){super(),En(this,"attributes",void 0),-1!==V.protos.indexOf("RTP")||V.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(V){if(this.digested)throw new Error("already digested");try{switch(V.attField){case"extmap":this.parseExtmap(V);break;case"setup":this.parseSetup(V);break;case"ice-ufrag":this.parseIceUfrag(V);break;case"ice-pwd":this.parseIcePwd(V);break;case"ice-options":this.parseIceOptions(V);break;case"candidate":this.parseCandidate(V);break;case"remote-candidate":this.parseRemoteCandidate(V);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(V);break;case"rtpmap":this.parseRtpmap(V);break;case"ptime":this.parsePtime(V);break;case"maxptime":this.parseMaxPtime(V);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(V);break;case"ssrc":this.parseSSRC(V);break;case"fmtp":this.parseFmtp(V);break;case"rtcp-fb":this.parseRtcpFb(V);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(V);break;case"mid":this.parseMid(V);break;case"msid":this.parseMsid(V);break;case"imageattr":this.parseImageAttr(V);break;case"rid":this.parseRid(V);break;case"simulcast":this.parseSimulcast(V);break;case"sctp-port":this.parseSctpPort(V);break;case"max-message-size":this.parseMaxMessageSize(V);break;case"ssrc-group":this.parseSSRCGroup(V);break;default:V.ignored=!0,this.attributes.unrecognized.push(V)}}catch(_e){throw console.error("parsing media attribute ".concat(V.attField,' error, "a=').concat(V.attField,":").concat(V.attValue,'"')),_e}if(!V.ignored&&V.attValue&&!this.atEnd(V))throw new Error("attribute parsing error")}parseCandidate(V){const _e=this.extractOneOrMore(V,Ce,[1,32]);this.consumeAttributeSpace(V);const ke=this.extractOneOrMore(V,w,[1,5]);this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeToken);this.consumeAttributeSpace(V);const In=this.extractOneOrMore(V,w,[1,10]);this.consumeAttributeSpace(V);const Tr=this.extract(V,this.consumeAddress);this.consumeAttributeSpace(V);const Cr=this.extract(V,this.consumePort);this.consumeAttributeSpace(V),this.extract(V,this.consume,"typ"),this.consumeAttributeSpace(V);const xr={foundation:_e,componentId:ke,transport:Nt,priority:In,connectionAddress:Tr,port:Cr,type:this.extract(V,this.consumeToken),extension:{}};for(this.peek(V," raddr")&&(this.extract(V,this.consume," raddr"),this.consumeAttributeSpace(V),xr.relAddr=this.extract(V,this.consumeAddress)),this.peek(V," rport")&&(this.extract(V,this.consume," rport"),this.consumeAttributeSpace(V),xr.relPort=this.extract(V,this.consumePort));this.peekChar(V)===b;){this.consumeAttributeSpace(V);const Qi=this.extract(V,this.consumeToken);this.consumeAttributeSpace(V),xr.extension[Qi]=this.extractOneOrMore(V,P)}this.attributes.candidates.push(xr)}parseRemoteCandidate(V){const _e=[];for(;;){const ke=this.extractOneOrMore(V,w,[1,5]);this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeAddress);this.consumeAttributeSpace(V);const In=this.extract(V,this.consumePort);_e.push({componentId:ke,connectionAddress:Nt,port:In});try{this.consumeAttributeSpace(V)}catch{break}}this.attributes.remoteCandidatesList.push(_e)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(V){const _e=this.extract(V,this.consumeToken);this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill,"/");this.extract(V,this.consume,"/");const Nt={encodingName:ke,clockRate:this.extractOneOrMore(V,w)};this.atEnd(V)||"/"!==this.peekChar(V)||(this.extract(V,this.consume,"/"),Nt.encodingParameters=parseInt(this.extract(V,this.consumeTill),10));const In=this.attributes.payloads.find(Tr=>Tr.payloadType===parseInt(_e,10));In?In.rtpMap=Nt:this.attributes.payloads.push({payloadType:parseInt(_e,10),rtpMap:Nt,rtcpFeedbacks:[]})}parsePtime(V){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(V,this.consumeTill)}parseMaxPtime(V){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(V,this.consumeTill)}parseDirection(V){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=V.attField}parseSSRC(V){const _e=this.extractOneOrMore(V,w);this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill,":");let Nt;":"===this.peekChar(V)&&(this.extract(V,this.consume,":"),Nt=this.extract(V,this.consumeTill));const In=this.attributes.ssrcs.find(Tr=>Tr.ssrcId===parseInt(_e,10));In?In.attributes[ke]=Nt:this.attributes.ssrcs.push({ssrcId:parseInt(_e,10),attributes:{[ke]:Nt}})}parseFmtp(V){const _e=this.extract(V,this.consumeTill,b);this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill),Nt={};ke.split(";").forEach(Tr=>{let[Cr,xr]=Tr.split("=");Cr=Cr.trim(),xr="string"==typeof xr?xr.trim():xr,"string"==typeof Cr&&Cr.length>0&&(Nt[Cr]=xr)});const In=this.attributes.payloads.find(Tr=>Tr.payloadType===parseInt(_e,10));In?In.fmtp={parameters:Nt}:this.attributes.payloads.push({payloadType:parseInt(_e,10),rtcpFeedbacks:[],fmtp:{parameters:Nt}})}parseFmtParameters(V){const _e={},ke=this.extract(V,this.consumeTill,"=");V._cur++;const Nt=this.extract(V,this.consumeTill,";");for(_e[ke]=Nt;";"===V.attValue[V._cur];){const In=this.extract(V,this.consumeTill,"=");V._cur++;const Tr=this.extract(V,this.consumeTill,";");_e[In]=Tr}return _e}parseRtcpFb(V){let _e="";_e="*"===this.peekChar(V)?this.extract(V,this.consume,"*"):this.extract(V,this.consumeTill,b),this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill,b);let Nt;if("trr-int"===ke)Nt={type:ke,interval:this.extract(V,this.consumeTill)};else{const In={type:ke};this.peekChar(V)===b&&(this.consumeAttributeSpace(V),In.parameter=this.extract(V,this.consumeToken),this.peekChar(V)===b&&(In.additional=this.extract(V,this.consumeTill))),Nt=In}if("*"===_e)this.attributes.rtcpFeedbackWildcards.push(Nt);else{const In=this.attributes.payloads.find(Tr=>Tr.payloadType===parseInt(_e,10));In?In.rtcpFeedbacks.push(Nt):this.attributes.payloads.push({payloadType:parseInt(_e,10),rtcpFeedbacks:[Nt]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(V){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const _e={port:this.extract(V,this.consumePort)};this.peekChar(V)===b&&(this.consumeAttributeSpace(V),_e.netType=this.extractOneOrMore(V,G),this.consumeAttributeSpace(V),_e.addressType=this.extractOneOrMore(V,G),this.consumeAttributeSpace(V),_e.address=this.extract(V,this.consumeAddress)),this.attributes.rtcp=_e}parseMsid(V){const _e={id:this.extractOneOrMore(V,G,[1,64])};this.peekChar(V)===b&&(this.consumeAttributeSpace(V),_e.appdata=this.extractOneOrMore(V,G,[1,64])),this.attributes.msids.push(_e)}parseImageAttr(V){this.attributes.imageattr.push(V.attValue)}parseRid(V){const _e=this.extractOneOrMore(V,Nt=>ae(Nt)||w(Nt)||"_"===Nt||"-"===Nt);this.consumeAttributeSpace(V);const ke={id:_e,direction:this.extract(V,this.consumeToken),params:[]};if(this.peekChar(V)===b){if(this.consumeAttributeSpace(V),this.peek(V,"pt=")){this.extract(V,this.consume,"pt=");const Nt=[];for(;;){const In=this.extract(V,this.consumeToken);Nt.push(In);try{this.extract(V,this.consume,",")}catch{break}}ke.payloads=Nt,this.peekChar(V)===b&&this.extract(V,this.consume,b)}for(;;){const Nt=this.extract(V,this.consumeToken);switch(Nt){case"depend":{const In={type:Nt,rids:this.extract(V,this.consume,"=").split(",")};ke.params.push(In);break}default:{const In={type:Nt};"="===this.peekChar(V)&&(this.extract(V,this.consume,"="),In.val=this.extract(V,this.consumeTill,";")),ke.params.push(In)}}try{this.extract(V,this.consume,";")}catch{break}}}this.attributes.rids.push(ke)}parseSimulcast(V){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=V.attValue,this.extract(V,this.consumeTill)}parseSctpPort(V){this.attributes.sctpPort=this.extractOneOrMore(V,w,[1,5])}parseMaxMessageSize(V){this.attributes.maxMessageSize=this.extractOneOrMore(V,w,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(V){this.attributes.mid=this.extract(V,this.consumeToken)}parseSSRCGroup(V){const _e=this.extract(V,this.consumeToken),ke=[];for(;;)try{this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeInteger);ke.push(parseInt(Nt,10))}catch{break}this.attributes.ssrcGroups.push({semantic:_e,ssrcIds:ke})}}function _t(Vt,V,_e){return V in Vt?Object.defineProperty(Vt,V,{value:_e,enumerable:!0,configurable:!0,writable:!0}):Vt[V]=_e,Vt}class bn{constructor(){_t(this,"eol",y)}print(V,_e){let ke="";return _e&&(this.eol=_e),ke+=this.printVersion(V.version),ke+=this.printOrigin(V.origin),ke+=this.printSessionName(V.sessionName),ke+=this.printInformation(V.information),ke+=this.printUri(V.uri),ke+=this.printEmail(V.emails),ke+=this.printPhone(V.phones),ke+=this.printConnection(V.connection),ke+=this.printBandwidth(V.bandwidths),ke+=this.printTimeFields(V.timeFields),ke+=this.printKey(V.key),ke+=this.printSessionAttributes(V.attributes),ke+=this.printMediaDescription(V.mediaDescriptions),ke}printVersion(V){return"v=".concat(V).concat(this.eol)}printOrigin(V){return"o=".concat(V.username," ").concat(V.sessId," ").concat(V.sessVersion," ").concat(V.nettype," ").concat(V.addrtype," ").concat(V.unicastAddress).concat(this.eol)}printSessionName(V){return V?"s=".concat(V).concat(this.eol):""}printInformation(V){return V?"i=".concat(V).concat(this.eol):""}printUri(V){return V?"u=".concat(V).concat(this.eol):""}printEmail(V){let _e="";for(const ke of V)_e+="e=".concat(ke).concat(this.eol);return _e}printPhone(V){let _e="";for(const ke of V)_e+="e=".concat(ke).concat(this.eol);return _e}printConnection(V){return V?"c=".concat(V.nettype," ").concat(V.addrtype," ").concat(V.address).concat(this.eol):""}printBandwidth(V){let _e="";for(const ke of V)_e+="b=".concat(ke.bwtype,":").concat(ke.bandwidth).concat(this.eol);return _e}printTimeFields(V){let _e="";for(const ke of V){_e+="t=".concat(ke.time.startTime," ").concat(ke.time.startTime).concat(this.eol);for(const Nt of ke.repeats)_e+="r=".concat(Nt.repeatInterval," ").concat(Nt.typedTimes.join(" ")).concat(this.eol);ke.zoneAdjustments&&(_e+="z=",_e+="z=".concat(ke.zoneAdjustments.map(Nt=>"".concat(Nt.time," ").concat(Nt.back?"-":""," ").concat(Nt.typedTime)).join(" ")).concat(this.eol),_e+=this.eol)}return _e}printKey(V){return V?"k=".concat(V).concat(this.eol):""}printAttributes(V){let _e="";for(const ke of V)_e+="a=".concat(ke.attField).concat(ke.attValue?":".concat(ke.attValue):"").concat(this.eol);return _e}printMediaDescription(V){let _e="";for(const ke of V)_e+=this.printMedia(ke.media),_e+=this.printInformation(ke.information),_e+=this.printConnections(ke.connections),_e+=this.printBandwidth(ke.bandwidths),_e+=this.printKey(ke.key),_e+=this.printMediaAttributes(ke);return _e}printConnections(V){let _e="";for(const ke of V)_e+=this.printConnection(ke);return _e}printMedia(V){return"m=".concat(V.mediaType," ").concat(V.port," ").concat(V.protos.join("/")," ").concat(V.fmts.join(" ")).concat(this.eol)}printSessionAttributes(V){return new at(this.eol).print(V)}printMediaAttributes(V){return new Rt(this.eol).print(V)}}class Je{constructor(V){_t(this,"eol",void 0),this.eol=V}printIceUfrag(V){return void 0===V?"":"a=ice-ufrag:".concat(V).concat(this.eol)}printIcePwd(V){return void 0===V?"":"a=ice-pwd:".concat(V).concat(this.eol)}printIceOptions(V){return void 0===V?"":"a=ice-options:".concat(V.join(b)).concat(this.eol)}printFingerprints(V){return V.length>0?V.map(_e=>"a=fingerprint:".concat(_e.hashFunction).concat(b).concat(_e.fingerprint)).join(this.eol)+this.eol:""}printExtmap(V){return V.map(_e=>"a=extmap:".concat(_e.entry).concat(_e.direction?"/".concat(_e.direction):"").concat(b).concat(_e.extensionName).concat(_e.extensionAttributes?"".concat(b).concat(_e.extensionAttributes):"").concat(this.eol)).join("")}printSetup(V){return void 0===V?"":"a=setup:".concat(V).concat(this.eol)}printUnrecognized(V){return V.map(_e=>"a=".concat(_e.attField).concat(_e.attValue?":".concat(_e.attValue):"").concat(this.eol)).join("")}}class at extends Je{print(V){let _e="";return _e+=this.printGroups(V.groups),_e+=this.printMsidSemantic(V.msidSemantic),_e+=this.printIceLite(V.iceLite),_e+=this.printIceUfrag(V.iceUfrag),_e+=this.printIcePwd(V.icePwd),_e+=this.printIceOptions(V.iceOptions),_e+=this.printFingerprints(V.fingerprints),_e+=this.printSetup(V.setup),_e+=this.printTlsId(V.tlsId),_e+=this.printIdentity(V.identities),_e+=this.printExtmap(V.extmaps),_e+=this.printUnrecognized(V.unrecognized),_e}printGroups(V){let _e="";return V.length>0&&(_e+=V.map(ke=>"a=group:".concat(ke.semantic).concat(ke.identificationTag.map(Nt=>"".concat(b).concat(Nt)).join("")).concat(this.eol)).join("")),_e}printIceLite(V){return void 0===V?"":"a=ice-lite"+this.eol}printTlsId(V){return V?"a=tls-id:".concat(V).concat(this.eol):""}printIdentity(V){return 0===V.length?"":V.map(_e=>"a=identity:".concat(_e.assertionValue).concat(_e.extensions.map(ke=>"".concat(b).concat(ke.name).concat(ke.value?"=".concat(ke.value):"")))).join(this.eol)+this.eol}printMsidSemantic(V){if(!V)return"";let _e="a=msid-semantic:".concat(V.semantic);return V.applyForAll?_e+="".concat(b,"*"):V.identifierList.length>0&&(_e+=V.identifierList.map(ke=>"".concat(b).concat(ke))),_e+this.eol}}class Rt extends Je{print(V){const _e=V.attributes;let ke="";return ke+=this.printRTCP(_e.rtcp),ke+=this.printIceUfrag(_e.iceUfrag),ke+=this.printIcePwd(_e.icePwd),ke+=this.printIceOptions(_e.iceOptions),ke+=this.printCandidates(_e.candidates),ke+=this.printRemoteCandidatesList(_e.remoteCandidatesList),ke+=this.printEndOfCandidates(_e.endOfCandidates),ke+=this.printFingerprints(_e.fingerprints),ke+=this.printSetup(_e.setup),ke+=this.printMid(_e.mid),ke+=this.printExtmap(_e.extmaps),ke+=this.printRTPRelated(_e),ke+=this.printPtime(_e.ptime),ke+=this.printMaxPtime(_e.maxPtime),ke+=this.printDirection(_e.direction),ke+=this.printSSRCGroups(_e.ssrcGroups),ke+=this.printSSRC(_e.ssrcs),ke+=this.printRTCPMux(_e.rtcpMux),ke+=this.printRTCPMuxOnly(_e.rtcpMuxOnly),ke+=this.printRTCPRsize(_e.rtcpRsize),ke+=this.printMSId(_e.msids),ke+=this.printImageattr(_e.imageattr),ke+=this.printRid(_e.rids),ke+=this.printSimulcast(_e.simulcast),ke+=this.printSCRPPort(_e.sctpPort),ke+=this.printMaxMessageSize(_e.maxMessageSize),ke+=this.printUnrecognized(_e.unrecognized),ke}printCandidates(V){return V.map(_e=>"a=candidate:".concat(_e.foundation).concat(b).concat(_e.componentId).concat(b).concat(_e.transport).concat(b).concat(_e.priority).concat(b).concat(_e.connectionAddress).concat(b).concat(_e.port).concat(b,"typ").concat(b).concat(_e.type).concat(_e.relAddr?"".concat(b,"raddr").concat(b).concat(_e.relAddr):"").concat(_e.relPort?"".concat(b,"rport").concat(b).concat(_e.relPort):"").concat(Object.keys(_e.extension).map(ke=>"".concat(b).concat(ke).concat(b).concat(_e.extension[ke])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(V){return V.map(_e=>"a=remote-candidates:".concat(_e.join(b)).concat(this.eol)).join("")}printEndOfCandidates(V){return void 0===V?"":"a=end-of-candidates"+this.eol}printRTPRelated(V){if(!V.payloads)return"";const _e=V.payloads;let ke="";ke+=V.rtcpFeedbackWildcards.map(Nt=>this.printRTCPFeedback("*",Nt)).join("");for(const Nt of _e)ke+=this.printRtpMap(Nt.payloadType,Nt.rtpMap),ke+=this.printFmtp(Nt.payloadType,Nt.fmtp),ke+=Nt.rtcpFeedbacks.map(In=>this.printRTCPFeedback(Nt.payloadType,In)).join("");return ke}printFmtp(V,_e){if(!_e)return"";const ke=Object.keys(_e.parameters);return 1===ke.length&&void 0===_e.parameters[ke[0]]?"a=fmtp:".concat(V).concat(b).concat(ke[0]).concat(this.eol):"a=fmtp:".concat(V).concat(b).concat(Object.keys(_e.parameters).map(Nt=>"".concat(Nt,"=").concat(_e.parameters[Nt])).join(";")).concat(this.eol)}printRtpMap(V,_e){return _e?"a=rtpmap:".concat(V).concat(b).concat(_e.encodingName,"/").concat(_e.clockRate).concat(_e.encodingParameters?"/".concat(_e.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(V,_e){let ke="a=rtcp-fb:".concat(V).concat(b),Nt=_e;return"trr-int"===Nt.type?ke+="ttr-int".concat(b).concat(Nt.interval):(ke+="".concat(Nt.type),Nt.parameter&&(ke+="".concat(b).concat(Nt.parameter),Nt.additional&&(ke+="".concat(b).concat(Nt.additional)))),ke+this.eol}printPtime(V){return void 0===V?"":"a=ptime:".concat(V).concat(this.eol)}printMaxPtime(V){return void 0===V?"":"a=maxptime:".concat(V).concat(this.eol)}printDirection(V){return void 0===V?"":"a=".concat(V).concat(this.eol)}printSSRC(V){return V.map(_e=>Object.keys(_e.attributes).map(ke=>"a=ssrc:".concat(_e.ssrcId.toString(10)).concat(b).concat(ke).concat(_e.attributes[ke]?":".concat(_e.attributes[ke]):"").concat(this.eol)).join("")).join("")}printRTCPMux(V){return void 0===V?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(V){return void 0===V?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(V){return void 0===V?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(V){if(void 0===V)return"";let _e="a=rtcp:".concat(V.port);return V.netType&&(_e+="".concat(b).concat(V.netType)),V.addressType&&(_e+="".concat(b).concat(V.addressType)),V.address&&(_e+="".concat(b).concat(V.address)),_e+this.eol}printMSId(V){return V.map(_e=>"a=msid:".concat(_e.id).concat(_e.appdata?"".concat(b).concat(_e.appdata):"").concat(this.eol)).join("")}printImageattr(V){return V.map(_e=>"a=imageattr:".concat(_e).concat(this.eol)).join("")}printRid(V){return V.map(_e=>{let ke="a=rid:".concat(_e.id).concat(b).concat(_e.direction);return _e.payloads&&(ke+="".concat(b,"pt=").concat(_e.payloads.join(","))),_e.params.length>0&&(ke+="".concat(b).concat(_e.params.map(Nt=>"depend"===Nt.type?"depend=".concat(Nt.rids.join(",")):"".concat(Nt.type,"=").concat(Nt.val)).join(";"))),ke+this.eol}).join("")}printSimulcast(V){return void 0===V?"":"a=simulcast:".concat(V).concat(this.eol)}printSCRPPort(V){return void 0===V?"":"a=sctp-port:".concat(V).concat(this.eol)}printMaxMessageSize(V){return void 0===V?"":"a=max-message-size:".concat(V)}printMid(V){return void 0===V?"":"a=mid:".concat(V).concat(this.eol)}printSSRCGroups(V){return V.map(_e=>"a=ssrc-group:".concat(_e.semantic).concat(_e.ssrcIds.map(ke=>"".concat(b).concat(ke.toString(10))).join("")).concat(this.eol)).join("")}}function cn(Vt){return(new un).parse(Vt)}function Rn(Vt,V){return(new bn).print(Vt,V)}}},c={};function h(g){if(c[g])return c[g].exports;var p=c[g]={exports:{}};return o[g](p,p.exports,h),p.exports}return h.d=(g,p)=>{for(var v in p)h.o(p,v)&&!h.o(g,v)&&Object.defineProperty(g,v,{enumerable:!0,get:p[v]})},h.o=(g,p)=>Object.prototype.hasOwnProperty.call(g,p),h.r=g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},h(8)})()}(lu);class XH{constructor(i){q(this,"sessionDesc",void 0),q(this,"localCapabilities",void 0),q(this,"rtpCapabilities",void 0),q(this,"candidates",void 0),q(this,"iceParameters",void 0),q(this,"dtlsParameters",void 0),q(this,"setup",void 0),q(this,"currentMidIndex",void 0),q(this,"cname",void 0),i=Ga(i);const{remoteIceParameters:o,remoteDtlsParameters:c,candidates:h,remoteRTPCapabilities:g,remoteSetup:p,localCapabilities:v,sdkCodec:_,cname:y}=i,b=lu.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=g,this.candidates=h,this.iceParameters=o,this.dtlsParameters=c,this.setup=p,this.localCapabilities=v,this.cname=y;for(let C=0;C<b.mediaDescriptions.length;C++){const w=b.mediaDescriptions[C];if(w.attributes.iceUfrag=o.iceUfrag,w.attributes.icePwd=o.icePwd,w.attributes.fingerprints=c.fingerprints,w.attributes.candidates=h,w.attributes.setup=p,"video"===w.media.mediaType){w.media.fmts=g.videoCodecs.map(j=>j.payloadType.toString(10));const P=g.videoCodecs.filter(j=>{var G;return null===(G=j.rtpMap)||void 0===G?void 0:G.encodingName.toLowerCase().includes(_)});if(0===P.length)throw new Error("Codec ".concat(_," not supported by remote SDP."));w.attributes.payloads=P,w.attributes.extmaps=g.videoExtensions}"audio"===w.media.mediaType&&(w.media.fmts=g.audioCodecs.map(P=>P.payloadType.toString(10)),w.attributes.payloads=g.audioCodecs,w.attributes.extmaps=g.audioExtensions),b.mediaDescriptions[C]=this.mungMediaDesc(w)}this.sessionDesc=b,this.currentMidIndex=b.mediaDescriptions.length-1}toString(){return lu.exports.print(this.sessionDesc)}send(i,o,c){const{ssrcs:h,ssrcGroups:g}=c0(o,this.cname),p=this.sessionDesc.mediaDescriptions.find(y=>i===ei.VIDEO?"video"===y.media.mediaType:"audio"===y.media.mediaType),v=h[0].attributes.label,_=h[0].attributes.mslabel;return p.attributes.ssrcs=p.attributes.ssrcs.concat(h),p.attributes.ssrcGroups=p.attributes.ssrcGroups.concat(g),{id:v,mslabel:_}}batchSend(i){return i.map(o=>{let{kind:c,ssrcMsg:h}=o;return this.send(c,h,void 0)})}stopSending(i){this.sessionDesc.mediaDescriptions.forEach(o=>{const c=[],h=[],g=[];o.attributes.ssrcs.forEach(p=>{i.includes(p.attributes.label||"")?g.push(p):c.push(p)}),o.attributes.ssrcGroups.forEach(p=>{g.map(v=>v.ssrcId).includes(p.ssrcIds[0])||h.push(p)}),o.attributes.ssrcs=c,o.attributes.ssrcGroups=h})}mute(i){const o=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===i);if(!o)throw new Error("mediaDescription not found with ".concat(i," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(i){const o=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===i);if(!o)throw new Error("mediaDescription not found with ".concat(i," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}receive(i,o,c){i.forEach((h,g)=>{const p=h._mediaStreamTrack,v=this.sessionDesc.mediaDescriptions.findIndex(y=>y.attributes.mid===p.kind),_=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[v],h);this.sessionDesc.mediaDescriptions[v]=_})}stopReceiving(i){}restartICE(i,o){i=Ga(i),o=Ga(o),this.iceParameters=i,this.candidates=o,this.sessionDesc.mediaDescriptions.forEach(c=>{c.attributes.iceUfrag=i.iceUfrag,c.attributes.icePwd=i.icePwd,c.attributes.candidates=this.candidates})}predictReceivingMids(i){const o=[];for(let c=0;c<i;c++)o.push((this.currentMidIndex+c+1).toString(10));return o}mungRecvMediaDsec(i,o){const c=Ga(i);return Mu(c,o),Z1(c,o),c}updateRecvMedia(i,o){const c=this.sessionDesc.mediaDescriptions.findIndex(h=>h.attributes.mid===i);if(-1!==c){const h=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[c],o);this.sessionDesc.mediaDescriptions[c]=h}}bumpMid(i){this.currentMidIndex+=i}updateTrackLabel(i,o,c){const h=this.sessionDesc.mediaDescriptions.find(p=>i===ei.VIDEO?"video"===p.attributes.mid:"audio"===p.attributes.mid);if(h){const p=h.attributes.ssrcs.find(v=>v.attributes.label===o);var g;p&&(p.attributes.label=c,null===(g=p.attributes.msid)||void 0===g||g.replace(o,c))}}mungMediaDesc(i){const o=Ga(i);return AB(o),function(c){const h=c.attributes.extmaps.find(g=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===g.extensionName);h&&c.attributes.extmaps.splice(c.attributes.extmaps.indexOf(h),1),c.attributes.payloads.forEach(g=>{const p=g.rtcpFeedbacks.findIndex(v=>"transport-cc"===v.type);-1!==p&&g.rtcpFeedbacks.splice(p,1)})}(o),o}getSSRC(i){for(const o of this.sessionDesc.mediaDescriptions)for(const c of o.attributes.ssrcs)if(c.attributes.label===i)return[c]}}function Up(n){if(Array.isArray(n))return n.map(function(c){return c});if(!$H(n))return n;var i={};for(var o in n)i[o]=$H(n[o])||Array.isArray(n[o])?Up(n[o]):n[o];return i}function $H(n){return!("object"!=typeof n||Array.isArray(n)||!n)}var u0=function(){function n(i){this.input=[],this.size=i}return n.prototype.add=function(i){this.input.push(i),this.input.length>this.size&&this.input.splice(0,1)},n.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},n}(),q5=function(n,i){return(q5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var h in c)c.hasOwnProperty(h)&&(o[h]=c[h])})(n,i)};function yB(n,i){function o(){this.constructor=n}q5(n,i),n.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}var eE=function(){return(eE=Object.assign||function(n){for(var i,o=1,c=arguments.length;o<c;o++)for(var h in i=arguments[o])Object.prototype.hasOwnProperty.call(i,h)&&(n[h]=i[h]);return n}).apply(this,arguments)};function l0(n,i,o,c){return new(o||(o=Promise))(function(h,g){function p(y){try{_(c.next(y))}catch(b){g(b)}}function v(y){try{_(c.throw(y))}catch(b){g(b)}}function _(y){y.done?h(y.value):new o(function(b){b(y.value)}).then(p,v)}_((c=c.apply(n,i||[])).next())})}function d0(n,i){var o,c,h,g,p={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return g={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function v(_){return function(y){return function(b){if(o)throw new TypeError("Generator is already executing.");for(;p;)try{if(o=1,c&&(h=2&b[0]?c.return:b[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,b[1])).done)return h;switch(c=0,h&&(b=[2&b[0],h.value]),b[0]){case 0:case 1:h=b;break;case 4:return p.label++,{value:b[1],done:!1};case 5:p.label++,c=b[1],b=[0];continue;case 7:b=p.ops.pop(),p.trys.pop();continue;default:if(!((h=(h=p.trys).length>0&&h[h.length-1])||6!==b[0]&&2!==b[0])){p=0;continue}if(3===b[0]&&(!h||b[1]>h[0]&&b[1]<h[3])){p.label=b[1];break}if(6===b[0]&&p.label<h[1]){p.label=h[1],h=b;break}if(h&&p.label<h[2]){p.label=h[2],p.ops.push(b);break}h[2]&&p.ops.pop(),p.trys.pop();continue}b=i.call(n,p)}catch(C){b=[6,C],c=0}finally{o=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([_,y])}}}var Wd,EB={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},tw={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:EB,remoteCandidate:EB}},L2={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},bB={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},J5={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},X5={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},SB=function(){function n(i,o){var c=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=Up(tw),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=i,this.options=o,this.intervalTimer=window.setInterval(function(){return l0(c,void 0,void 0,function(){return d0(this,function(h){return this.updateStats(),[2]})})},this.options.updateInterval)}return n.prototype.getStats=function(){return this.stats},n.prototype.setVideoIsReady=function(i){this.videoIsReady=i},n.prototype.setVideoIsReady2=function(i,o){this.videoIsReady2[i]=o},n.prototype.getVideoIsReady=function(i){return this.videoIsReady2[i]||!1},n.prototype.setIsFirstAudioDecoded=function(i){},n.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},n.prototype.calcLossRate=function(i){var o=this;this.lossRateWindowStats.push(i),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var c=this.lossRateWindowStats.length,h=0,g=0,p=0,v=0,_=function(C){i[C].forEach(function(w,P){if(o.lossRateWindowStats[c-1][C][P]&&o.lossRateWindowStats[0][C][P]){var j=o.lossRateWindowStats[c-1][C][P].packets-o.lossRateWindowStats[0][C][P].packets,G=o.lossRateWindowStats[c-1][C][P].packetsLost-o.lossRateWindowStats[0][C][P].packetsLost;"videoSend"===C||"audioSend"===C?(h+=j,p+=G):(g+=j,v+=G),w.packetLostRate=Number.isNaN(j)||Number.isNaN(j)||j<=0||G<=0?0:G/(j+G)}})},y=0,b=["videoSend","audioSend","videoRecv","audioRecv"];y<b.length;y++)_(b[y]);i.sendPacketLossRate=h<=0||p<=0?0:p/(h+p),i.recvPacketLossRate=g<=0||v<=0?0:v/(g+v)},n}(),ZH=function(n){function i(){var o=null!==n&&n.apply(this,arguments)||this;return o._stats=tw,o.lastDecodeVideoReceiverStats=new Map,o}return yB(i,n),i.prototype.updateStats=function(){return l0(this,void 0,void 0,function(){var o,c,h,g;return d0(this,function(p){switch(p.label){case 0:return[4,this._getStats()];case 1:return o=p.sent(),c=this.statsResponsesToObjects(o),this._stats=Up(tw),h=c.filter(function(v){return"ssrc"===v.type}),this.processSSRCStats(h),(g=c.find(function(v){return"VideoBwe"===v.type}))&&this.processBandwidthStats(g),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},i.prototype.processBandwidthStats=function(o){this._stats.bitrate={actualEncoded:Number(o.googActualEncBitrate),targetEncoded:Number(o.googTargetEncBitrate),retransmit:Number(o.googRetransmitBitrate),transmit:Number(o.googTransmitBitrate)},this._stats.sendBandwidth=Number(o.googAvailableSendBandwidth)},i.prototype.processSSRCStats=function(o){var c=this;o.forEach(function(h){var g=h.id.includes("send");switch(h.mediaType+"_"+(g?"send":"recv")){case"video_send":var p=Up(bB);p.codec=h.googCodecName,p.adaptionChangeReason="none",h.googCpuLimitedResolution&&(p.adaptionChangeReason="cpu"),h.googBandwidthLimitedResolution&&(p.adaptionChangeReason="bandwidth"),p.avgEncodeMs=Number(h.googAvgEncodeMs),p.inputFrame={width:Number(h.googFrameWidthInput)||Number(h.googFrameWidthSent),height:Number(h.googFrameHeightInput)||Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},p.sentFrame={width:Number(h.googFrameWidthSent),height:Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},p.firsCount=Number(h.googFirReceived),p.nacksCount=Number(h.googNacksReceived),p.plisCount=Number(h.googPlisReceived),p.frameCount=Number(h.framesEncoded),p.bytes=Number(h.bytesSent),p.packets=Number(h.packetsSent),p.packetsLost=Number(h.packetsLost),p.ssrc=Number(h.ssrc),p.rttMs=Number(h.googRtt||0),c._stats.videoSend.push(p),c._stats.rtt=p.rttMs;break;case"video_recv":var v=Up(L2),_=c.lastDecodeVideoReceiverStats.get(Number(h.ssrc));if(v.codec=h.googCodecName,v.targetDelayMs=Number(h.googTargetDelayMs),v.renderDelayMs=Number(h.googRenderDelayMs),v.currentDelayMs=Number(h.googCurrentDelayMs),v.minPlayoutDelayMs=Number(h.googMinPlayoutDelayMs),v.decodeMs=Number(h.googDecodeMs),v.maxDecodeMs=Number(h.googMaxDecodeMs),v.receivedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateReceived)},v.decodedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateDecoded)},v.outputFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateOutput)},v.jitterBufferMs=Number(h.googJitterBufferMs),v.firsCount=Number(h.googFirsSent),v.nacksCount=Number(h.googNacksSent),v.plisCount=Number(h.googPlisSent),v.framesDecodeCount=Number(h.framesDecoded),v.bytes=Number(h.bytesReceived),v.packets=Number(h.packetsReceived),v.packetsLost=Number(h.packetsLost),v.ssrc=Number(h.ssrc),v.packets>0&&!c.isFirstVideoReceived[v.ssrc]&&(c.onFirstVideoReceived&&c.onFirstVideoReceived(v.ssrc),c.isFirstVideoReceived[v.ssrc]=!0),v.framesDecodeCount>0&&!c.isFirstVideoDecoded[v.ssrc]&&(c.onFirstVideoDecoded&&c.onFirstVideoDecoded(v.ssrc,v.decodedFrame.width,v.decodedFrame.height),c.isFirstVideoDecoded[v.ssrc]=!0),_){var y=_.stats,b=Date.now()-_.lts;v.framesDecodeFreezeTime=y.framesDecodeFreezeTime,v.framesDecodeInterval=y.framesDecodeInterval,v.framesDecodeCount>y.framesDecodeCount&&c.isFirstVideoDecoded?(_.lts=Date.now(),v.framesDecodeInterval=b,v.framesDecodeInterval>=c.options.freezeRateLimit&&(c.getVideoIsReady(parseInt(h.ssrc,10))?v.framesDecodeFreezeTime+=v.framesDecodeInterval:c.setVideoIsReady2(parseInt(h.ssrc,10),!0))):v.framesDecodeCount<_.stats.framesDecodeCount&&(v.framesDecodeInterval=0)}c.lastDecodeVideoReceiverStats.set(v.ssrc,{stats:eE({},v),lts:Date.now()}),c._stats.videoRecv.push(v);break;case"audio_recv":var C=Up(X5);C.codec=h.googCodecName,C.outputLevel=Math.abs(Number(h.audioOutputLevel))/32767,C.decodingCNG=Number(h.googDecodingCNG),C.decodingCTN=Number(h.googDecodingCTN),C.decodingCTSG=Number(h.googDecodingCTSG),C.decodingNormal=Number(h.googDecodingNormal),C.decodingPLC=Number(h.googDecodingPLC),C.decodingPLCCNG=Number(h.googDecodingPLCCNG),C.expandRate=Number(h.googExpandRate),C.accelerateRate=Number(h.googAccelerateRate),C.preemptiveExpandRate=Number(h.googPreemptiveExpandRate),C.secondaryDecodedRate=Number(h.googSecondaryDecodedRate),C.speechExpandRate=Number(h.googSpeechExpandRate),C.preferredJitterBufferMs=Number(h.googPreferredJitterBufferMs),C.jitterBufferMs=Number(h.googJitterBufferMs),C.jitterMs=Number(h.googJitterReceived),C.bytes=Number(h.bytesReceived),C.packets=Number(h.packetsReceived),C.packetsLost=Number(h.packetsLost),C.ssrc=Number(h.ssrc),C.receivedFrames=Number(h.googDecodingCTN)||Number(h.packetsReceived),C.droppedFrames=Number(h.googDecodingPLC)+Number(h.googDecodingPLCCNG)||Number(h.packetsLost),C.receivedFrames>0&&!c.isFirstAudioReceived[C.ssrc]&&(c.onFirstAudioReceived&&c.onFirstAudioReceived(C.ssrc),c.isFirstAudioReceived[C.ssrc]=!0),C.decodingNormal>0&&!c.isFirstAudioDecoded[C.ssrc]&&(c.onFirstAudioDecoded&&c.onFirstAudioDecoded(C.ssrc),c.isFirstAudioDecoded[C.ssrc]=!0),c._stats.audioRecv.push(C);break;case"audio_send":var w=Up(J5);w.codec=h.googCodecName,w.inputLevel=Math.abs(Number(h.audioInputLevel))/32767,w.aecReturnLoss=Number(h.googEchoCancellationReturnLoss||0),w.aecReturnLossEnhancement=Number(h.googEchoCancellationReturnLossEnhancement||0),w.residualEchoLikelihood=Number(h.googResidualEchoLikelihood||0),w.residualEchoLikelihoodRecentMax=Number(h.googResidualEchoLikelihoodRecentMax||0),w.bytes=Number(h.bytesSent),w.packets=Number(h.packetsSent),w.packetsLost=Number(h.packetsLost),w.ssrc=Number(h.ssrc),w.rttMs=Number(h.googRtt||0),c._stats.rtt=w.rttMs,c._stats.audioSend.push(w)}})},i.prototype._getStats=function(){var o=this;return new Promise(function(c,h){o.pc.getStats(c,h)})},i.prototype.statsResponsesToObjects=function(o){var c=[];return o.result().forEach(function(h){var g={id:h.id,timestamp:h.timestamp.valueOf().toString(),type:h.type};h.names().forEach(function(p){g[p]=h.stat(p)}),c.push(g)}),c},i}(SB);!function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(Wd||(Wd={}));var Ri,$5=function(n){function i(){var o=null!==n&&n.apply(this,arguments)||this;return o._stats=tw,o.lastDecodeVideoReceiverStats=new Map,o.lastVideoFramesRecv=new Map,o.lastVideoFramesSent=new Map,o.lastVideoFramesDecode=new Map,o.lastVideoJBDelay=new Map,o.lastAudioJBDelay=new Map,o.mediaBytesSent=new Map,o.mediaBytesRetransmit=new Map,o.mediaBytesTargetEncode=new Map,o.lastEncoderMs=new Map,o}return yB(i,n),i.prototype.updateStats=function(){return l0(this,void 0,void 0,function(){var o,c=this;return d0(this,function(h){switch(h.label){case 0:return o=this,[4,this.pc.getStats()];case 1:return o.report=h.sent(),this._stats=Up(tw),this.report.forEach(function(g){switch(g.type){case Wd.OUTBOUND:"audio"===g.mediaType?c.processAudioOutboundStats(g):"video"===g.mediaType&&c.processVideoOutboundStats(g);break;case Wd.INBOUND:"audio"===g.mediaType?c.processAudioInboundStats(g):"video"===g.mediaType&&c.processVideoInboundStats(g);break;case Wd.TRANSPORT:var p=c.report.get(g.selectedCandidatePairId);p&&c.processCandidatePairStats(p);break;case Wd.CANDIDATE_PAIR:g.selected&&c.processCandidatePairStats(g)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},i.prototype.processCandidatePairStats=function(o){if(this._stats.sendBandwidth=o.availableOutgoingBitrate||0,o.currentRoundTripTime&&(this._stats.rtt=1e3*o.currentRoundTripTime),this._stats.videoSend.forEach(function(g){!g.rttMs&&o.currentRoundTripTime&&(g.rttMs=1e3*o.currentRoundTripTime)}),this._stats.audioSend.forEach(function(g){!g.rttMs&&o.currentRoundTripTime&&(g.rttMs=1e3*o.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=o.id,o.localCandidateId){var c=this.report.get(o.localCandidateId);c&&this.processCandidateStats(c)}if(o.remoteCandidateId){var h=this.report.get(o.remoteCandidateId);h&&this.processCandidateStats(h)}},i.prototype.processCandidateStats=function(o){var c;o.type===Wd.LOCAL_CANDIDATE&&(c=this._stats.selectedCandidatePair.localCandidate),o.type===Wd.REMOTE_CANDIDATE&&(c=this._stats.selectedCandidatePair.remoteCandidate),c&&(c.type=o.type,c.id=o.id,o.address&&(c.address=o.address),o.candidateType&&(c.candidateType=o.candidateType),o.port&&(c.port=o.port),o.priority&&(c.priority=o.priority),o.protocol&&(c.protocol=o.protocol),o.relayProtocol&&(c.relayProtocol=o.relayProtocol),o.type===Wd.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==c.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(eE({},c),eE({},this.stats.selectedCandidatePair.localCandidate)),o.type===Wd.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==c.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(eE({},c),eE({},this.stats.selectedCandidatePair.remoteCandidate)))},i.prototype.processAudioInboundStats=function(o){var c=this._stats.audioRecv.find(function(h){return h.ssrc===o.ssrc});c||(c=Up(X5),this._stats.audioRecv.push(c)),c.ssrc=o.ssrc,c.packets=o.packetsReceived,c.packetsLost=o.packetsLost,c.bytes=o.bytesReceived,c.jitterMs=1e3*o.jitter,o.trackId&&this.processAudioTrackReceiverStats(o.trackId,c),o.codecId&&(c.codec=this.getCodecFromCodecStats(o.codecId)),c.receivedFrames||(c.receivedFrames=o.packetsReceived),c.droppedFrames||(c.droppedFrames=o.packetsLost),c.receivedFrames>0&&!this.isFirstAudioReceived[c.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(c.ssrc),this.isFirstAudioReceived[c.ssrc]=!0),c.outputLevel&&c.outputLevel>0&&!this.isFirstAudioDecoded[c.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(c.ssrc),this.isFirstAudioDecoded[c.ssrc]=!0)},i.prototype.processVideoInboundStats=function(o){var c=this._stats.videoRecv.find(function(C){return C.ssrc===o.ssrc});c||(c=Up(L2),this._stats.videoRecv.push(c)),c.ssrc=o.ssrc,c.packets=o.packetsReceived,c.packetsLost=o.packetsLost,c.bytes=o.bytesReceived,c.firsCount=o.firCount,c.nacksCount=o.nackCount,c.plisCount=o.pliCount,c.framesDecodeCount=o.framesDecoded;var h=this.lastDecodeVideoReceiverStats.get(c.ssrc),g=this.lastVideoFramesDecode.get(c.ssrc),p=Date.now();if(c.framesDecodeCount>0&&!this.isFirstVideoDecoded[c.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(c.ssrc,c.decodedFrame?c.decodedFrame.width:0,c.decodedFrame?c.decodedFrame.height:0),this.isFirstVideoDecoded[c.ssrc]=!0),h){var y=h.stats,b=p-h.lts;c.framesDecodeFreezeTime=y.framesDecodeFreezeTime,c.framesDecodeInterval=y.framesDecodeInterval,c.framesDecodeCount>y.framesDecodeCount&&this.isFirstVideoDecoded?(h.lts=Date.now(),c.framesDecodeInterval=b,c.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(o.ssrc))?c.framesDecodeFreezeTime+=c.framesDecodeInterval:this.setVideoIsReady2(parseInt(o.ssrc,10),!0))):c.framesDecodeCount<y.framesDecodeCount&&(c.framesDecodeInterval=0),o.framesDecoded&&o.qpSum&&(c.qpSumPerFrame=h.stats.framesDecodeCount>o.framesDecoded?o.qpSum/o.framesDecoded:(o.qpSum-h.qpSum)/(o.framesDecoded-h.stats.framesDecodeCount))}g&&p-g.lts>=800?(c.decodeFrameRate=Math.round((c.framesDecodeCount-g.count)/((p-g.lts)/1e3)),this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:p,rate:c.decodeFrameRate})):g?c.decodeFrameRate=g.rate:this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:p,rate:0}),o.totalDecodeTime&&(c.decodeMs=1e3*o.totalDecodeTime),o.trackId&&this.processVideoTrackReceiverStats(o.trackId,c),o.codecId&&(c.codec=this.getCodecFromCodecStats(o.codecId)),o.framerateMean&&(c.framesRateFirefox=o.framerateMean),c.packets>0&&!this.isFirstVideoReceived[c.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(c.ssrc),this.isFirstVideoReceived[c.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(c.ssrc,{stats:eE({},c),lts:h?h.lts:Date.now(),qpSum:o.qpSum})},i.prototype.processVideoOutboundStats=function(o){var c=this._stats.videoSend.find(function(w){return w.ssrc===o.ssrc});c||(c=Up(bB),this._stats.videoSend.push(c));var h,g=this.mediaBytesSent.get(o.ssrc);if(g?g.add(o.bytesSent):((v=new u0(10)).add(o.bytesSent),this.mediaBytesSent.set(o.ssrc,v)),void 0!==o.retransmittedBytesSent){var p=this.mediaBytesRetransmit.get(o.ssrc);p?p.add(o.retransmittedBytesSent):((v=new u0(10)).add(o.retransmittedBytesSent),this.mediaBytesRetransmit.set(o.ssrc,v))}if(o.totalEncodedBytesTarget){var v,_=this.mediaBytesTargetEncode.get(o.ssrc);_?_.add(o.totalEncodedBytesTarget):((v=new u0(10)).add(o.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(o.ssrc,v))}if(c.ssrc=o.ssrc,c.bytes=o.bytesSent,c.packets=o.packetsSent,c.firsCount=o.firCount,c.nacksCount=o.nackCount,c.plisCount=o.pliCount,c.frameCount=o.framesEncoded,c.adaptionChangeReason=o.qualityLimitationReason,o.totalEncodeTime&&o.framesEncoded&&(c.avgEncodeMs=!(h=this.lastEncoderMs.get(o.ssrc))||h.lastFrameCount>o.framesEncoded?1e3*o.totalEncodeTime/o.framesEncoded:1e3*(o.totalEncodeTime-h.lastEncoderTime)/(o.framesEncoded-h.lastFrameCount)),o.framesEncoded&&o.qpSum&&(c.qpSumPerFrame=!(h=this.lastEncoderMs.get(o.ssrc))||h.lastFrameCount>o.framesEncoded?o.qpSum/o.framesEncoded:(o.qpSum-h.lastQpSum)/(o.framesEncoded-h.lastFrameCount)),this.lastEncoderMs.set(o.ssrc,{lastFrameCount:o.framesEncoded,lastEncoderTime:o.totalEncodeTime,lastQpSum:o.qpSum,lts:Date.now()}),o.codecId&&(c.codec=this.getCodecFromCodecStats(o.codecId)),o.mediaSourceId&&this.processVideoMediaSource(o.mediaSourceId,c),o.trackId&&this.processVideoTrackSenderStats(o.trackId,c),o.remoteId)this.processRemoteInboundStats(o.remoteId,c);else{var C=this.findRemoteStatsId(o.ssrc,Wd.REMOTE_INBOUND);C&&this.processRemoteInboundStats(C,c)}},i.prototype.processAudioOutboundStats=function(o){var c=this._stats.audioSend.find(function(g){return g.ssrc===o.ssrc});if(c||(c=Up(J5),this._stats.audioSend.push(c)),c.ssrc=o.ssrc,c.packets=o.packetsSent,c.bytes=o.bytesSent,o.mediaSourceId&&this.processAudioMediaSource(o.mediaSourceId,c),o.codecId&&(c.codec=this.getCodecFromCodecStats(o.codecId)),o.trackId&&this.processAudioTrackSenderStats(o.trackId,c),o.remoteId)this.processRemoteInboundStats(o.remoteId,c);else{var h=this.findRemoteStatsId(o.ssrc,Wd.REMOTE_INBOUND);h&&this.processRemoteInboundStats(h,c)}},i.prototype.findRemoteStatsId=function(o,c){var h=Array.from(this.report.values()).find(function(g){return g.type===c&&g.ssrc===o});return h?h.id:null},i.prototype.processVideoMediaSource=function(o,c){var h=this.report.get(o);h&&h.width&&h.height&&h.framesPerSecond&&(c.inputFrame={width:h.width,height:h.height,frameRate:h.framesPerSecond})},i.prototype.processAudioMediaSource=function(o,c){var h=this.report.get(o);h&&(c.inputLevel=h.audioLevel)},i.prototype.processVideoTrackSenderStats=function(o,c){var h=this.report.get(o);if(h){var g=0,p=Date.now(),v=this.lastVideoFramesSent.get(c.ssrc);v&&p-v.lts>=800?(g=Math.round((h.framesSent-v.count)/((p-v.lts)/1e3)),this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:p,rate:g})):v?g=v.rate:this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:p,rate:0}),c.sentFrame={width:h.frameWidth,height:h.frameHeight,frameRate:g}}},i.prototype.processVideoTrackReceiverStats=function(o,c){var h=this.report.get(o);if(h){var g=this.lastVideoFramesRecv.get(c.ssrc),p=Date.now();c.framesReceivedCount=h.framesReceived;var v=0;if(g&&p-g.lts>=800?(v=Math.round((h.framesReceived-g.count)/((p-g.lts)/1e3)),this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:p,rate:v})):g?v=g.rate:this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:p,rate:0}),c.receivedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:v||0},c.decodedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},c.outputFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},h.jitterBufferDelay&&h.jitterBufferEmittedCount){var _=this.lastVideoJBDelay.get(c.ssrc);this.lastVideoJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),_||(_={jitterBufferDelay:0,jitterBufferEmittedCount:0});var y=1e3*(h.jitterBufferDelay-_.jitterBufferDelay)/(h.jitterBufferEmittedCount-_.jitterBufferEmittedCount);c.jitterBufferMs=y,c.currentDelayMs=Math.round(y)}}},i.prototype.processAudioTrackSenderStats=function(o,c){var h=this.report.get(o);h&&(c.aecReturnLoss=h.echoReturnLoss||0,c.aecReturnLossEnhancement=h.echoReturnLossEnhancement||0)},i.prototype.processAudioTrackReceiverStats=function(o,c){var h=this.report.get(o);if(h){if(h.removedSamplesForAcceleration&&h.totalSamplesReceived&&(c.accelerateRate=h.removedSamplesForAcceleration/h.totalSamplesReceived),h.jitterBufferDelay&&h.jitterBufferEmittedCount){var g=this.lastAudioJBDelay.get(c.ssrc);this.lastAudioJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),g||(g={jitterBufferDelay:0,jitterBufferEmittedCount:0}),c.jitterBufferMs=Math.round(1e3*(h.jitterBufferDelay-g.jitterBufferDelay)/(h.jitterBufferEmittedCount-g.jitterBufferEmittedCount))}c.outputLevel=h.audioLevel;var v=1920;h.totalSamplesDuration&&h.totalSamplesReceived&&(v=h.totalSamplesReceived/h.totalSamplesDuration/50,c.receivedFrames=Math.round(h.totalSamplesReceived/v)),h.concealedSamples&&(c.droppedFrames=Math.round(h.concealedSamples/v))}},i.prototype.processRemoteInboundStats=function(o,c){var h=this.report.get(o);h&&(c.packetsLost=h.packetsLost,h.roundTripTime&&(c.rttMs=1e3*h.roundTripTime))},i.prototype.getCodecFromCodecStats=function(o){var c=this.report.get(o);if(!c)return"";var h=c.mimeType.match(/\/(.*)$/);return h&&h[1]?h[1]:""},i.prototype.updateSendBitrate=function(){var o=0,c=null,h=null;this.mediaBytesSent.forEach(function(p){o+=p.diffMean()}),this.mediaBytesRetransmit.forEach(function(p){c=null===c?p.diffMean():c+p.diffMean()}),this.mediaBytesTargetEncode.forEach(function(p){h=null===h?p.diffMean():h+p.diffMean()}),this._stats.bitrate={actualEncoded:8*(null!==c?o-c:o)/(this.options.updateInterval/1e3),transmit:8*o/(this.options.updateInterval/1e3)},null!==c&&(this._stats.bitrate.retransmit=8*c/(this.options.updateInterval/1e3)),null!==h&&(this._stats.bitrate.targetEncoded=8*h/(this.options.updateInterval/1e3))},i}(SB),tE=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return yB(i,n),i.prototype.updateStats=function(){return Promise.resolve()},i}(SB);function B2(n,i,o,c){void 0===i&&(i=250),void 0===o&&(o=8),void 0===c&&(c=500);var h,g=(h=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i))&&h[0]?Number(h[0].split("/")[1]):null;return g?g<76?new ZH(n,{updateInterval:i,lossRateInterval:o,freezeRateLimit:c}):new $5(n,{updateInterval:i,lossRateInterval:o,freezeRateLimit:c}):window.RTCStatsReport&&n.getStats()instanceof Promise?new $5(n,{updateInterval:i,lossRateInterval:o,freezeRateLimit:c}):new tE(n,{updateInterval:i,lossRateInterval:o,freezeRateLimit:c})}function F2(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function nw(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?F2(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):F2(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let eG=(ir((Ri=class yj extends a3{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(i,o){super(i,o),q(this,"store",void 0),q(this,"peerConnection",void 0),q(this,"remoteSDP",void 0),q(this,"initialOffer",void 0),q(this,"statsFilter",void 0),q(this,"useRTX",!1),q(this,"localCapabilities",void 0),q(this,"localCandidateCount",0),q(this,"allCandidatesReceived",!1),q(this,"mutex",new cu("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(yj.resolvePCConfiguration(i),{optional:[{googDscp:!0}]}),this.statsFilter=B2(this.peerConnection,void 0,void 0,Es()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var i=this;return L(function*(){try{const o=yield i.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=M2(o.sdp),h=$1(o.sdp,!i.useRTX,!1,["opus"]);return i.localCapabilities=h,i.initialOffer=o,nw(nw({},c),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:h},offerSDP:o.sdp})}catch(o){throw new Pe(Te.GET_LOCAL_CONNECTION_PARAMS_FAILED,o.toString())}})()}connect(i,o,c,h,g,p){var v=this;return L(function*(){try{if(!v.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");v.remoteSDP=new XH({remoteIceParameters:i,remoteDtlsParameters:o,candidates:c,remoteRTPCapabilities:h.send,remoteSetup:g,localCapabilities:v.localCapabilities,sdkCodec:v.store.codec,cname:p});const _=v.remoteSDP.toString();yield v.peerConnection.setLocalDescription(v.initialOffer),yield v.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(_){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}})()}send(i,o){var c=this;return a0(function*(){const h=yield gs(c.mutex.lock());try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const g=i.map(w=>c.peerConnection.addTrack(w._mediaStreamTrack)),p=yield gs(c.peerConnection.createOffer()),v=lu.exports.parse(p.sdp),_=i.map(w=>{const P=w._mediaStreamTrack,j=v.mediaDescriptions.find(G=>G.attributes.mid===P.kind);if(!j)throw new Error("Cannot extract ssrc from mediaDescription.");return function(G,Z,ae){const fe=G.attributes.ssrcs.filter(Ce=>Ce.attributes.label===Z),be=G.attributes.ssrcGroups;if(0===fe.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(be&&fe.length>1){const Ce=be.find(it=>-1!==it.ssrcIds.indexOf(fe[0].ssrcId));return Ce?[{ssrcId:Ce.ssrcIds[0],rtx:ae?Ce.ssrcIds[1]:void 0}]:[{ssrcId:fe[0].ssrcId}]}return[{ssrcId:fe[0].ssrcId}]}(j,P.id,c.useRTX)});let y;try{y=yield _}catch(w){throw g.forEach(P=>{Md()&&P.replaceTrack(null),c.peerConnection.removeTrack(P)}),w}const b=c.mungSendOfferSDP(p.sdp,i);c.remoteSDP.receive(i,o,y);const C=c.remoteSDP.toString();return yield gs(c.peerConnection.setLocalDescription({type:"offer",sdp:b})),yield gs(c.applySendEncodings(g,i)),yield gs(c.peerConnection.setRemoteDescription({type:"answer",sdp:C})),i.map((w,P)=>({localSSRC:_[P],id:w._mediaStreamTrack.id}))}catch(g){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(g.toString()))}finally{h()}})()}stopSending(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const c=o.peerConnection.getSenders().filter(p=>{var v;return-1!==i.indexOf((null===(v=p.track)||void 0===v?void 0:v.id)||"")});if(c.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");c.map(p=>{Md()&&p.replaceTrack(null),o.peerConnection.removeTrack(p)});const h=yield o.peerConnection.createOffer();yield o.peerConnection.setLocalDescription(h),o.remoteSDP.stopReceiving(i);const g=o.remoteSDP.toString();yield o.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(c.toString()))}})()}receive(i,o,c,h){var g=this;return L(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(i," before remoteSDP created."));const{id:p,mslabel:v}=g.remoteSDP.send(i,o,h),_=new Qn((C,w)=>{const P=setTimeout(()=>{w(new Error("Cannot receive track, id: ".concat(p)))},1e4),j=G=>{const Z=zi();if(("Safari"===Z.name&&11===Number(Z.version)||wu())&&G.track.id!==p&&G.streams[0].id===v){var ae;const fe=G.streams[0].getTracks()[0];return null===(ae=g.remoteSDP)||void 0===ae||ae.updateTrackLabel(i,p,G.track.id),g.peerConnection.removeEventListener("track",j),clearTimeout(P),void C(fe)}if(G.track.id===p)return g.peerConnection.removeEventListener("track",j),clearTimeout(P),void C(G.track)};g.peerConnection.addEventListener("track",j)}),y=g.remoteSDP.toString();yield g.peerConnection.setRemoteDescription({type:"offer",sdp:y});const b=yield g.peerConnection.createAnswer();return yield g.peerConnection.setLocalDescription(b),{track:yield _,id:p}}catch(p){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(p.toString()))}})()}stopReceiving(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");o.remoteSDP.stopSending(i);const c=o.remoteSDP.toString();yield o.peerConnection.setRemoteDescription({type:"offer",sdp:c});const h=yield o.peerConnection.createAnswer();yield o.peerConnection.setLocalDescription(h)}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(i){return L(function*(){})()}unmuteRemote(i){return L(function*(){})()}muteLocal(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=o.peerConnection.getSenders().filter(h=>{var g;return-1!==i.indexOf((null===(g=h.track)||void 0===g?void 0:g.id)||"")});if(c.length!==i.length)throw new Error("sender' length doesn't match mids' length.");c.map(h=>{if(Md()&&h.track)h.track.enabled=!1;else{const g=h.getParameters();g.encodings.forEach(p=>p.active=!1),h.setParameters(g)}})}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=o.peerConnection.getSenders().filter(p=>{var v;return-1!==i.indexOf((null===(v=p.track)||void 0===v?void 0:v.id)||"")});if(c.length!==i.length)throw new Error("Senders' length doesn't match mids' length.");c.map(function(){var p=L(function*(v){if(Md()&&v.track)v.track.enabled=!0;else{const _=v.getParameters();_.encodings.forEach(y=>y.active=!0),yield v.setParameters(_)}});return function(v){return p.apply(this,arguments)}}());const h=yield o.peerConnection.createOffer();yield o.peerConnection.setLocalDescription(h);const g=o.remoteSDP.toString();yield o.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var i=this;return L(function*(){const o=yield i.peerConnection.createOffer({iceRestart:!0});if(!o.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:M2(o.sdp).iceParameters,restartICE:(c=L(function*(h,g){return i.restartICE(o,h,g)}),function(g,p){return c.apply(this,arguments)}),restartOfferSDP:o.sdp};var c})()}close(){var i;this.peerConnection.close(),null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(i){return this.statsFilter.getVideoIsReady(i)}updateEncoderConfig(i,o){var c=this;return L(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[o]);c.remoteSDP.updateRecvMedia(o._mediaStreamTrack.kind,o);const p=c.remoteSDP.toString();yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(h){throw new Pe(Te.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(i,o){var c=this;return L(function*(){const h=c.peerConnection.getSenders().filter(g=>{var p;return(null===(p=g.track)||void 0===p?void 0:p.id)===i});1===h.length&&(yield c.applySendEncodings(h,[o]))})()}setStatsRemoteVideoIsReady(i,o){this.statsFilter.setVideoIsReady2(i,o)}replaceTrack(i,o){var c=this;return L(function*(){const h=c.peerConnection.getSenders().find(g=>{var p;return(null===(p=g.track)||void 0===p?void 0:p.id)===o});h&&(yield h.replaceTrack(i._mediaStreamTrack))})()}restartICE(i,o,c){var h=this;return L(function*(){try{if(!h.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");h.remoteSDP.restartICE(o,c);const g=h.remoteSDP.toString();yield h.peerConnection.setLocalDescription(i),yield h.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var i;null===(i=this.onICEConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var i;null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=i=>{i.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,oe.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,oe.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Bt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(i){const o={iceServers:[],sdpSemantics:"plan-b"};return i.iceServers?o.iceServers=i.iceServers:i.turnServer&&"off"!==i.turnServer.mode&&(qM(i.turnServer.servers)?o.iceServers=i.turnServer.servers:(o.iceServers&&o.iceServers.push(...yj.turnServerConfigToIceServers(i.turnServer.servers)),Bt("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&i.turnServer.serversFromGateway&&o.iceServers.push(...yj.turnServerConfigToIceServers(i.turnServer.serversFromGateway)),i.turnServer.servers.concat(i.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(i){const o=[];return i.forEach(c=>{c.security?c.tcpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),o}applySendEncodings(i,o){return L(function*(){try{if(!Oc().supportSetRtpSenderParameters||i.length!==o.length)return;for(let h=0;h<i.length;h++){var c;const g=i[h],p=o[h];if(!p)continue;const v={},_={};if(p instanceof Os)switch(p._optimizationMode){case"motion":v.degradationPreference="maintain-framerate";break;case"detail":v.degradationPreference="maintain-resolution";break;default:v.degradationPreference="balanced"}if(Bt("DSCP_TYPE")&&NT()){const C=Bt("DSCP_TYPE");["very-low","low","medium","high"].includes(C)&&(_.networkPriority=C)}const y=g.getParameters(),b=null===(c=y.encodings)||void 0===c?void 0:c[0];b&&Object.assign(b,_),Object.assign(y,v),yield g.setParameters(y)}}catch{oe.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(i,o){const c=lu.exports.parse(i);return o.forEach((h,g)=>{const p=h._mediaStreamTrack,v=c.mediaDescriptions.find(_=>_.attributes.mid===p.kind);v&&Mu(v,h)}),lu.exports.print(c)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=i=>{var o;null===(o=this.onFirstAudioReceived)||void 0===o||o.call(this,i)},this.statsFilter.onFirstVideoReceived=i=>{var o;null===(o=this.onFirstVideoReceived)||void 0===o||o.call(this,i)},this.statsFilter.onFirstAudioDecoded=i=>{var o;null===(o=this.onFirstAudioDecoded)||void 0===o||o.call(this,i)},this.statsFilter.onFirstVideoDecoded=(i,o,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,i,o,c)},this.statsFilter.onSelectedLocalCandidateChanged=(i,o)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,i,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(i,o)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,i,o)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}batchReceive(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const c=o.remoteSDP.batchSend(i).map((p,v)=>{let{id:_,mslabel:y}=p;const{kind:b}=i[v];return new Qn((C,w)=>{const P=setTimeout(()=>{w(new Error("Cannot receive track, id: ".concat(_)))},1e4),j=G=>{const Z=zi();if("Safari"===Z.name&&11===Number(Z.version)&&G.track.id!==_&&G.streams[0].id===y){var ae;const fe=G.streams[0].getTracks()[0];return null===(ae=o.remoteSDP)||void 0===ae||ae.updateTrackLabel(b,_,G.track.id),o.peerConnection.removeEventListener("track",j),clearTimeout(P),void C({track:fe,id:_})}if(G.track.id===_)return o.peerConnection.removeEventListener("track",j),clearTimeout(P),void C({track:G.track,id:_})};o.peerConnection.addEventListener("track",j)})}),h=o.remoteSDP.toString();yield o.peerConnection.setRemoteDescription({type:"offer",sdp:h});const g=yield o.peerConnection.createAnswer();return yield o.peerConnection.setLocalDescription(g),yield Qn.all(c)}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}getRemoteSSRC(i){if(this.remoteSDP)return this.remoteSDP.getSSRC(i)?.[0].ssrcId}}).prototype,"connect",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"connect"),Ri.prototype),ir(Ri.prototype,"stopSending",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"stopSending"),Ri.prototype),ir(Ri.prototype,"receive",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"receive"),Ri.prototype),ir(Ri.prototype,"stopReceiving",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"stopReceiving"),Ri.prototype),ir(Ri.prototype,"muteRemote",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"muteRemote"),Ri.prototype),ir(Ri.prototype,"unmuteRemote",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"unmuteRemote"),Ri.prototype),ir(Ri.prototype,"muteLocal",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"muteLocal"),Ri.prototype),ir(Ri.prototype,"unmuteLocal",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"unmuteLocal"),Ri.prototype),ir(Ri.prototype,"reEstablish",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"reEstablish"),Ri.prototype),ir(Ri.prototype,"close",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"close"),Ri.prototype),ir(Ri.prototype,"updateEncoderConfig",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"updateEncoderConfig"),Ri.prototype),ir(Ri.prototype,"updateSendParameters",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"updateSendParameters"),Ri.prototype),ir(Ri.prototype,"replaceTrack",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"replaceTrack"),Ri.prototype),ir(Ri.prototype,"restartICE",[td],Object.getOwnPropertyDescriptor(Ri.prototype,"restartICE"),Ri.prototype),Ri);function td(n,i,o){const c=n[i];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return o.value=L(function*(){const h=this.mutex,g=yield h.lock("Locking from P2PConnection.".concat(i));try{for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return yield c.apply(this,v)}finally{g()}}),o}var Z5;let CB=ac("RemoteSDP")(Z5=class{get localCapabilities(){return Ga(this._localCapabilities)}get rtpCapabilities(){return Ga(this._rtpCapabilities)}get candidates(){return Ga(this._candidates)}get iceParameters(){return Ga(this._iceParameters)}get dtlsParameters(){return Ga(this._dtlsParameters)}constructor(n){q(this,"sessionDesc",void 0),q(this,"_localCapabilities",void 0),q(this,"_rtpCapabilities",void 0),q(this,"_candidates",void 0),q(this,"_iceParameters",void 0),q(this,"_dtlsParameters",void 0),q(this,"setup",void 0),q(this,"currentMidIndex",void 0),q(this,"cname",void 0),q(this,"firefoxSsrcMidMap",new Map),n=Ga(n);const{remoteIceParameters:i,remoteDtlsParameters:o,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:p,cname:v}=n,_=lu.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=h,this._candidates=c,this._iceParameters=i,this._dtlsParameters=o,this._localCapabilities=p,this.setup=g,this.cname=v;const y=this.rtpCapabilities.send;for(const b of _.mediaDescriptions){if(b.attributes.iceUfrag=i.iceUfrag,b.attributes.icePwd=i.icePwd,b.attributes.fingerprints=o.fingerprints,b.attributes.candidates=c,b.attributes.setup=g,"video"===b.media.mediaType&&(b.media.fmts=y.videoCodecs.map(C=>C.payloadType.toString(10)),b.attributes.payloads=y.videoCodecs,b.attributes.extmaps=y.videoExtensions,Bt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:C,ssrcGroups:w}=c0([{ssrcId:4e4,rtx:Bt("USE_RTX")?40001:void 0}],this.cname);b.attributes.ssrcs=C,b.attributes.ssrcGroups=w}if("audio"===b.media.mediaType&&(b.media.fmts=y.audioCodecs.map(C=>C.payloadType.toString(10)),b.attributes.payloads=y.audioCodecs,b.attributes.extmaps=y.audioExtensions,Bt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:C,ssrcGroups:w}=c0([{ssrcId:2e4}],this.cname);b.attributes.ssrcs=C,b.attributes.ssrcGroups=w}}this.sessionDesc=_,this.currentMidIndex=_.mediaDescriptions.length-1}preloadRemoteMedia(){const n=Bt("PRELOAD_MEDIA_COUNT");Yt("debug",this,"preloadRemoteMedia",n);const i=this.candidates,o=this.dtlsParameters,c=this.iceParameters,h=this.rtpCapabilities.send;for(let g=1;g<n;g++){const p=2*g+2e4,v=2*g+4e4,{ssrcs:_,ssrcGroups:y}=c0([{ssrcId:p}],this.cname),{ssrcs:b,ssrcGroups:C}=c0([{ssrcId:v,rtx:Bt("USE_RTX")?v+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(w=>w.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:i,extmaps:h.videoExtensions,fingerprints:o.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:b,ssrcGroups:C,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(w=>w.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:i,extmaps:h.audioExtensions,fingerprints:o.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_,ssrcGroups:y,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return lu.exports.print(this.sessionDesc)}send(n,i,o,c){const{ssrcs:h,ssrcGroups:g}=c0(i,this.cname,o),p=this.findPreloadMediaDesc(h);if(p){if(Es()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,p.attributes.mid),c&&(c.tcc||c.remb)){const v=this.sessionDesc.mediaDescriptions.indexOf(p);return this.sessionDesc.mediaDescriptions[v]=this.mungSendMediaDesc(p,c),{mid:p.attributes.mid,needExchangeSDP:!0}}return{mid:p.attributes.mid,needExchangeSDP:!1}}{const v=this.findAvailableMediaIndex(n,h);if(Md()||yU()){if(-1!==v&&1!==v){const _=Ga(this.sessionDesc.mediaDescriptions[v]);return _.attributes.direction="sendonly",_.attributes.ssrcs=h,_.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[v]=this.mungSendMediaDesc(_,c),{mid:_.attributes.mid,needExchangeSDP:!0}}{const _=this.createOrRecycleSendMedia(n,h,g,"sendonly",c);return this.updateBundleMids(),{mid:_.attributes.mid,needExchangeSDP:!0}}}if(-1!==v){const _=Ga(this.sessionDesc.mediaDescriptions[v]);return _.attributes.direction="sendonly",_.attributes.ssrcs=h,_.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[v]=this.mungSendMediaDesc(_,c),Es()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,_.attributes.mid),{mid:_.attributes.mid,needExchangeSDP:!0}}{const _=this.createOrRecycleSendMedia(n,h,g,"sendonly",c);return this.updateBundleMids(),Es()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,_.attributes.mid),{mid:_.attributes.mid,needExchangeSDP:!0}}}}batchSend(n){const i=n.map(h=>{let{kind:g,ssrcMsg:p,mslabel:v}=h;return this.send(g,p,v)}),o=[];let c=!1;return i.forEach(h=>{let{mid:g,needExchangeSDP:p}=h;p&&(c=!0),o.push(g)}),{mids:o,needExchangeSDP:c}}stopSending(n){const i=this.sessionDesc.mediaDescriptions.filter(o=>o.attributes.mid&&-1!==n.indexOf(o.attributes.mid));if(i.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(o=>{"0"===o.attributes.mid||Es()||Md()||yU()?o.attributes.ssrcs=[]:(o.attributes.ssrcs=[],o.attributes.direction="inactive",o.media.port="0")}),this.updateBundleMids()}mute(n){const i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){const i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(n){const i=this.sessionDesc.mediaDescriptions.filter(o=>n.includes(o.attributes.mid||""));if(i.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(o=>{o.attributes.direction="inactive"})}unmuteRemote(n){const i=this.sessionDesc.mediaDescriptions.filter(o=>n.includes(o.attributes.mid||""));if(i.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(o=>{o.attributes.direction="recvonly"})}receive(n,i,o,c){n.forEach((h,g)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",i,o,c[g])}),this.updateBundleMids()}stopReceiving(n){const i=this.sessionDesc.mediaDescriptions.filter(o=>-1!==n.indexOf(o.attributes.mid));if(i.length!==n.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(o=>{o.media.port="0",o.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(n,i){n=Ga(n),i=Ga(i),this._iceParameters=n,this._candidates=i,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=n.iceUfrag,o.attributes.icePwd=n.icePwd,o.attributes.candidates=this.candidates})}predictReceivingMids(n){const i=[];for(let o=0;o<n;o++)i.push((this.currentMidIndex+o+1).toString(10));return i}findAvailableMediaIndex(n,i){return this.sessionDesc.mediaDescriptions.findIndex(o=>{const c=o.media.mediaType===n&&"0"!==o.media.port&&("sendonly"===o.attributes.direction||"sendrecv"===o.attributes.direction)&&0===o.attributes.ssrcs.length;if(Es()){if(c){const h=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(h||"0"!==o.attributes.mid&&"1"!==o.attributes.mid)||!(!h||h!==o.attributes.mid)}return!1}return c})}createOrRecycleRecvMedia(n,i,o,c,h,g){const p=n._mediaStreamTrack.kind,v=this.rtpCapabilities.recv,_=this.localCapabilities.send;let y=[];if(p===ei.VIDEO){var b,C;if(Bt("H264_PROFILE_LEVEL_ID")&&"h264"===c&&(y=v.videoCodecs.filter(Z=>{var ae,fe;return((null===(ae=Z.rtpMap)||void 0===ae?void 0:ae.encodingName.toLowerCase())||"").includes(c)&&(null==Z||null===(fe=Z.fmtp)||void 0===fe?void 0:fe.parameters["profile-level-id"])===Bt("H264_PROFILE_LEVEL_ID")})),!y||0===(null===(b=y)||void 0===b?void 0:b.length)){const Z=_.videoCodecs.filter(ae=>{var fe;return((null===(fe=ae.rtpMap)||void 0===fe?void 0:fe.encodingName.toLowerCase())||"").includes(c)});0!==Z.length&&(y=v.videoCodecs.filter(ae=>Z.some(fe=>fe.payloadType===ae.payloadType)))}if(Bt("USE_RTX")){const Z=y.map(fe=>fe.payloadType.toString()),ae=v.videoCodecs.filter(fe=>{var be,Ce;return"rtx"===(null===(be=fe.rtpMap)||void 0===be?void 0:be.encodingName)&&Z.includes((null===(Ce=fe.fmtp)||void 0===Ce?void 0:Ce.parameters.apt)||"")});y=[...y,...ae]}0===y.length&&(oe.warning("codec ".concat(c," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(C=v.videoCodecs[0].rtpMap)||void 0===C?void 0:C.encodingName)),y=v.videoCodecs)}else y=v.audioCodecs.filter(Z=>{var ae;return((null===(ae=Z.rtpMap)||void 0===ae?void 0:ae.encodingName.toLowerCase())||"").includes(h)}),0===y.length&&(oe.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),y=v.audioCodecs.filter(Z=>{var ae;return((null===(ae=Z.rtpMap)||void 0===ae?void 0:ae.encodingName.toLowerCase())||"").includes("opus")}));const w=p===ei.VIDEO?v.videoExtensions:v.audioExtensions;this.currentMidIndex+=1;const P="".concat(this.currentMidIndex);let j={media:{mediaType:p,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:y.map(Z=>Z.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:w,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:y,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:o,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(P)}};j=this.mungRecvMediaDsec(j,n,g);const G=this.findFirstClosedMedia(p);if(G){const Z=this.sessionDesc.mediaDescriptions.indexOf(G);this.sessionDesc.mediaDescriptions[Z]=j}else this.sessionDesc.mediaDescriptions.push(j);return j}createOrRecycleSendMedia(n,i,o,c,h){const g=this.rtpCapabilities.send,p=n===ei.VIDEO?g.videoCodecs:g.audioCodecs,v=n===ei.VIDEO?g.videoExtensions:g.audioExtensions;this.currentMidIndex+=1;const _="".concat(this.currentMidIndex);let y={media:{mediaType:n,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.map(C=>C.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:v,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:o,rtcpFeedbackWildcards:[],payloads:p,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:c,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(_)}};y=this.mungSendMediaDesc(y,h);const b=this.findFirstClosedMedia(n);if(b){const C=this.sessionDesc.mediaDescriptions.indexOf(b);this.sessionDesc.mediaDescriptions[C]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(n=>"0"!==n.media.port).map(n=>n.attributes.mid)}mungRecvMediaDsec(n,i,o){const c=Ga(n);return AB(c),Mu(c,i),Z1(c,i),function(h){if("video"!==h.media.mediaType)return;const g=zi();if(g.name!==Li.SAFARI&&g.os!==pa.IOS)return;const p=h.attributes.extmaps.findIndex(v=>/video-orientation/g.test(v.extensionName));-1!==p&&h.attributes.extmaps.splice(p,1)}(c),ew(c,o,this.localCapabilities.send),c}mungSendMediaDesc(n,i){const o=Ga(n);return ew(o,i,this.localCapabilities.recv),o}updateRecvMedia(n,i){const o=this.sessionDesc.mediaDescriptions.findIndex(c=>c.attributes.mid===n);if(-1!==o){const c=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[o],i);this.sessionDesc.mediaDescriptions[o]=c}}bumpMid(n){this.currentMidIndex+=n}findFirstClosedMedia(n){return this.sessionDesc.mediaDescriptions.find(i=>Es()?"0"===i.media.port&&i.media.mediaType===n:"0"===i.media.port)}findPreloadMediaDesc(n){return this.sessionDesc.mediaDescriptions.find(i=>{var o,c;return(null===(o=i.attributes)||void 0===o||null===(c=o.ssrcs[0])||void 0===c?void 0:c.ssrcId)===n[0].ssrcId})}getSSRC(n){var i;return null===(i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n))||void 0===i?void 0:i.attributes.ssrcs}})||Z5;var tj,yi;function V2(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function rw(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?V2(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):V2(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let tG=ac("P2PConnection","store.p2pId")((ir((yi=class Ej extends a3{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(i,o){super(i,o),q(this,"store",void 0),q(this,"peerConnection",void 0),q(this,"remoteSDP",void 0),q(this,"initialOffer",void 0),q(this,"transportEventReceiver",void 0),q(this,"statsFilter",void 0),q(this,"useRTX",Bt("USE_RTX")),q(this,"localCapabilities",void 0),q(this,"localCandidateCount",0),q(this,"allCandidatesReceived",!1),q(this,"mutex",new cu("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(Ej.resolvePCConfiguration(i),{optional:[{googDscp:!0}]}),this.statsFilter=B2(this.peerConnection,void 0,void 0,Es()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var i=this;return L(function*(){try{i.peerConnection.addTransceiver("video",{direction:"recvonly"}),i.peerConnection.addTransceiver("audio",{direction:"recvonly"});const o=yield i.peerConnection.createOffer();if(!o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=M2(o.sdp),h=yield(g=L(function*(p,v,_,y){const b=new RTCPeerConnection;b.addTransceiver("video",{direction:"sendonly"}),b.addTransceiver("audio",{direction:"sendonly"}),b.addTransceiver("video",{direction:"recvonly"}),b.addTransceiver("audio",{direction:"recvonly"});const C=(yield b.createOffer()).sdp,w=$1(C,p,v,_,y,"sendonly"),P=$1(C,p,v,_,y,"recvonly"),j={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},G={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},Z={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(x2(w,P,"videoExtensions",j,G,Z),x2(w,P,"videoCodecs",j,G,Z),x2(w,P,"audioExtensions",j,G,Z),x2(w,P,"audioCodecs",j,G,Z),Bt("RAISE_H264_BASELINE_PRIORITY")){const ae=Z.videoCodecs.findIndex(fe=>{var be,Ce;return"h264"===(null===(be=fe.rtpMap)||void 0===be?void 0:be.encodingName.toLocaleLowerCase())&&"42001f"===(null===(Ce=fe.fmtp)||void 0===Ce?void 0:Ce.parameters["profile-level-id"])});if(-1!==ae){const fe=Z.videoCodecs.findIndex(be=>{var Ce;return"h264"===(null===(Ce=be.rtpMap)||void 0===Ce?void 0:Ce.encodingName.toLocaleLowerCase())});if(fe<ae){oe.debug("raising H264 baseline profile priority");const be=Z.videoCodecs[ae];Z.videoCodecs.splice(ae,1),Z.videoCodecs.splice(fe,0,be)}-1!==fe&&(G.videoCodecs=G.videoCodecs.filter(be=>{var Ce,it;return!("h264"===(null===(Ce=be.rtpMap)||void 0===Ce?void 0:Ce.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(it=be.fmtp)||void 0===it?void 0:it.parameters["profile-level-id"]))})),-1!==fe&&Bt("FILTER_SEND_H264_BASELINE")&&(j.videoCodecs=j.videoCodecs.filter(be=>{var Ce,it;return!("h264"===(null===(Ce=be.rtpMap)||void 0===Ce?void 0:Ce.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(it=be.fmtp)||void 0===it?void 0:it.parameters["profile-level-id"]))}))}}try{b.close()}catch{}return{send:j,recv:G,sendrecv:Z}}),function(p,v,_,y){return g.apply(this,arguments)})(!i.useRTX,!1);return i.localCapabilities=Y5(h),i.initialOffer=o,rw(rw({},c),{},{rtpCapabilities:h,offerSDP:o.sdp})}catch(o){throw new Pe(Te.GET_LOCAL_CONNECTION_PARAMS_FAILED,o.toString())}var g})()}connect(i,o,c,h,g,p){var v=this;return L(function*(){try{if(!v.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");v.remoteSDP=new CB({remoteIceParameters:i,remoteDtlsParameters:o,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:v.localCapabilities,cname:p});const _=v.remoteSDP.toString(),y=v.logSDPExchange(v.initialOffer.sdp||"","offer","local","connect");yield v.peerConnection.setLocalDescription(v.initialOffer),y?.(_),yield v.peerConnection.setRemoteDescription({type:"answer",sdp:_});const b=v.peerConnection.getTransceivers()[0];if(null!=b&&b.receiver&&v.tryBindTransportEvents(b.receiver),Bt("PRELOAD_MEDIA_COUNT")>0){v.remoteSDP.preloadRemoteMedia();const C=v.remoteSDP.toString();yield v.peerConnection.setRemoteDescription({type:"offer",sdp:C});const w=yield v.peerConnection.createAnswer();yield v.peerConnection.setLocalDescription(w)}}catch(_){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}})()}send(i,o,c){var h=this;return a0(function*(){const g=yield gs(h.mutex.lock());try{if(!h.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const p=[];i.forEach(G=>{const Z=h.peerConnection.addTransceiver(G._mediaStreamTrack,{direction:"sendonly"});p.push(Z)}),Es()&&!0===Bt("SIMULCAST")&&(xn("debug",h,"apply simulcast for firefox"),yield gs(h.applySimulcastForFirefox(p,i)));const v=yield gs(h.peerConnection.createOffer()),_=h.remoteSDP.predictReceivingMids(i.length),y=h.mungSendOfferSDP(v.sdp,i,_),b=lu.exports.parse(y),C=_.map(G=>{const Z=b.mediaDescriptions.find(ae=>ae.attributes.mid===G);if(!Z)throw new Error("Cannot extract ssrc from mediaDescription.");return function(ae,fe){const be=[],Ce=ae.attributes.ssrcGroups.filter(bt=>"FID"===bt.semantic),it=ae.attributes.ssrcGroups.find(bt=>"SIM"===bt.semantic),wt=ae.attributes.ssrcs;if(it)it.ssrcIds.forEach(bt=>{var Pt;const En=null===(Pt=Ce.find(pn=>pn.ssrcIds[0]===bt))||void 0===Pt?void 0:Pt.ssrcIds[1];be.push({ssrcId:bt,rtx:fe?En:void 0})});else if(Ce.length>0){const Pt=Ce[0].ssrcIds[1];be.push({ssrcId:Ce[0].ssrcIds[0],rtx:fe?Pt:void 0})}else{if(0===wt.length)throw new Error("No ssrcs found on local media description.");be.push({ssrcId:wt[0].ssrcId})}return be}(Z,h.useRTX)});let w;try{w=yield C}catch(G){w=[],h.remoteSDP.receive(i,o,c,w);const Z=h.remoteSDP.toString();throw yield gs(h.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield gs(h.peerConnection.setRemoteDescription({type:"answer",sdp:Z})),yield gs(h.stopSending(_,!0)),G}h.remoteSDP.receive(i,o,c,w);const P=h.remoteSDP.toString(),j=h.logSDPExchange(y,"offer","local","send");return yield gs(h.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield gs(h.applySimulcastEncodings(p,i)),yield gs(h.applySendEncodings(p,i)),j?.(P),yield gs(h.peerConnection.setRemoteDescription({type:"answer",sdp:P})),p.map((G,Z)=>({localSSRC:C[Z],id:_[Z],transceiver:G}))}catch(p){throw p instanceof Pe?p:new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(p.toString()))}finally{g()}})()}stopSending(i,o){var c=this;return L(function*(){const h=o?void 0:yield c.mutex.lock("From P2PConnection.stopSending");try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const g=c.peerConnection.getTransceivers().filter(y=>-1!==i.indexOf(y.mid));if(g.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");g.map(y=>{var b;y.direction="inactive",null===(b=y.stop)||void 0===b||b.call(y)});const p=yield c.peerConnection.createOffer(),v=c.logSDPExchange(p.sdp||"","offer","local","stopSending");yield c.peerConnection.setLocalDescription(p),c.remoteSDP.stopReceiving(i);const _=c.remoteSDP.toString();v?.(_),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(g){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(g.toString()))}finally{h&&h()}})()}receive(i,o,c,h){var g=this;return L(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(i," before remoteSDP created."));const{mid:p,needExchangeSDP:v}=g.remoteSDP.send(i,o,c,h);if(v){const y=g.remoteSDP.toString(),b=g.logSDPExchange(y,"offer","remote","receive");yield g.peerConnection.setRemoteDescription({type:"offer",sdp:y});const C=yield g.peerConnection.createAnswer();b?.(C.sdp||""),yield g.peerConnection.setLocalDescription(C),oe.debug("[P2PConnection] receive ".concat(i," by exchanging SDP."))}else oe.debug("[P2PConnection] receive ".concat(i," no need to exchange SDP."));const _=g.peerConnection.getTransceivers().find(y=>y.mid===p);if(!_)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:_.receiver.track,id:p}}catch(p){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(p.toString()))}})()}batchReceive(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:c,needExchangeSDP:h}=o.remoteSDP.batchSend(i);if(h){const g=o.remoteSDP.toString(),p=o.logSDPExchange(g,"offer","remote","receive");yield o.peerConnection.setRemoteDescription({type:"offer",sdp:g});const v=yield o.peerConnection.createAnswer();p?.(v.sdp||""),yield o.peerConnection.setLocalDescription(v),oe.debug("[P2PConnection] batchReceive by exchanging SDP.")}else oe.debug("[P2PConnection] batchReceive no need to exchange SDP.");return c.map(g=>{const p=o.peerConnection.getTransceivers().find(v=>v.mid===g);if(!p)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:p.receiver.track,id:g}})}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}stopReceiving(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");o.remoteSDP.stopSending(i);const c=o.remoteSDP.toString(),h=o.logSDPExchange(c,"offer","remote","stopReceiving");yield o.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield o.peerConnection.createAnswer();h?.(g.sdp||""),yield o.peerConnection.setLocalDescription(g)}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(i," before remote SDP created."));o.remoteSDP.mute(i);const c=o.remoteSDP.toString(),h=o.logSDPExchange(c,"offer","remote","muteRemote");yield o.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield o.peerConnection.createAnswer();h?.(g.sdp||""),yield o.peerConnection.setLocalDescription(g)}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(c.toString()))}})()}unmuteRemote(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(i," before remote SDP created."));o.remoteSDP.unmute(i);const c=o.remoteSDP.toString(),h=o.logSDPExchange(c,"offer","remote","unmuteRemote");yield o.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield o.peerConnection.createAnswer();h?.(g.sdp||""),yield o.peerConnection.setLocalDescription(g)}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(c.toString()))}})()}muteLocal(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=o.peerConnection.getTransceivers().filter(v=>v.mid&&-1!==i.indexOf(v.mid));if(c.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(v=>{v.direction="inactive"});const h=yield o.peerConnection.createOffer(),g=o.logSDPExchange(h.sdp||"","offer","local","muteLocal");yield o.peerConnection.setLocalDescription(h),o.remoteSDP.muteRemote(i);const p=o.remoteSDP.toString();g?.(p),yield o.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=o.peerConnection.getTransceivers().filter(v=>v.mid&&-1!==i.indexOf(v.mid));if(c.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(function(){var v=L(function*(_,y){_.direction="sendonly"});return function(_,y){return v.apply(this,arguments)}}());const h=yield o.peerConnection.createOffer(),g=o.logSDPExchange(h.sdp||"","offer","local","unmuteLocal");yield o.peerConnection.setLocalDescription(h),o.remoteSDP.unmuteRemote(i);const p=o.remoteSDP.toString();g?.(p),yield o.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(c){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var i=this;return L(function*(){const o=yield i.peerConnection.createOffer({iceRestart:!0});if(!o.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:M2(o.sdp).iceParameters,restartICE:(c=L(function*(h,g){return i.restartICE(o,h,g)}),function(g,p){return c.apply(this,arguments)}),restartOfferSDP:o.sdp};var c})()}close(){var i;this.peerConnection.close(),null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(i){return this.statsFilter.getVideoIsReady(i)}updateEncoderConfig(i,o){var c=this;return L(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[o],[i]);c.remoteSDP.updateRecvMedia(i,o);const p=c.remoteSDP.toString(),v=c.logSDPExchange(g,"offer","local","updateEncoderConfig");yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),v?.(p),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(h){throw new Pe(Te.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(i,o){var c=this;return L(function*(){const h=c.peerConnection.getTransceivers().filter(g=>g.mid===i);1===h.length&&(c.isVP8Simulcast(o)?Es()||(yield c.applySimulcastEncodings(h,[o])):yield c.applySendEncodings(h,[o]))})()}setStatsRemoteVideoIsReady(i,o){this.statsFilter.setVideoIsReady2(i,o)}replaceTrack(i,o){var c=this;return L(function*(){const h=c.peerConnection.getTransceivers().find(g=>g.mid===o);h&&(yield h.sender.replaceTrack(i._mediaStreamTrack))})()}restartICE(i,o,c){var h=this;return L(function*(){try{if(!h.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");h.remoteSDP.restartICE(o,c);const g=h.remoteSDP.toString(),p=h.logSDPExchange(i.sdp||"","offer","local","restartICE");yield h.peerConnection.setLocalDescription(i),p?.(g),yield h.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new Pe(Te.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var i;null===(i=this.onICEConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var i;null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=i=>{i.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,oe.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,oe.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Bt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(i){const o={iceServers:[]};return i.iceServers?o.iceServers=i.iceServers:i.turnServer&&"off"!==i.turnServer.mode&&(qM(i.turnServer.servers)?o.iceServers=i.turnServer.servers:(o.iceServers&&o.iceServers.push(...Ej.turnServerConfigToIceServers(i.turnServer.servers)),Bt("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&i.turnServer.serversFromGateway&&o.iceServers.push(...Ej.turnServerConfigToIceServers(i.turnServer.serversFromGateway)),i.turnServer.servers.concat(i.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(i){const o=[];return i.forEach(c=>{c.security?c.tcpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(Uk(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),o}tryBindTransportEvents(i){i.transport&&(this.transportEventReceiver=i,i.transport.onstatechange=()=>{var o,c;null!==(o=i.transport)&&void 0!==o&&o.state&&(null===(c=this.onDTLSTransportStateChange)||void 0===c||c.call(this,i.transport.state))},i.transport.onerror=o=>{var c;null===(c=this.onDTLSTransportError)||void 0===c||c.call(this,o.error)},i.transport.iceTransport&&(i.transport.iceTransport.onstatechange=()=>{var o,c,h;null!==(o=i.transport)&&void 0!==o&&o.iceTransport.state&&(null===(c=this.onICETransportStateChange)||void 0===c||c.call(this,null===(h=i.transport)||void 0===h?void 0:h.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}applySendEncodings(i,o){var c=this;return L(function*(){try{if(!Oc().supportSetRtpSenderParameters||i.length!==o.length)return;for(let b=0;b<i.length;b++){const C=i[b],w=o[b];if(w&&w instanceof Os){var h,g;if(c.isVP8Simulcast(w))continue;const P={},j={};switch(w._optimizationMode){case"motion":P.degradationPreference="maintain-framerate";break;case"detail":P.degradationPreference="maintain-resolution";break;default:P.degradationPreference="balanced"}var p,v,_,y;if(null!==(h=w._encoderConfig)&&void 0!==h&&h.bitrateMax&&(j.maxBitrate=1e3*(null===(p=w._encoderConfig)||void 0===p?void 0:p.bitrateMax)),w._hints.includes(Rc.LOW_STREAM)&&(null!==(v=w._encoderConfig)&&void 0!==v&&v.frameRate&&(j.maxFramerate=Rv(w._encoderConfig.frameRate)),null!==(_=w._encoderConfig)&&void 0!==_&&_.scaleResolutionDownBy&&(null===(y=w._encoderConfig)||void 0===y?void 0:y.scaleResolutionDownBy)>1&&(j.scaleResolutionDownBy=w._encoderConfig.scaleResolutionDownBy)),Bt("DSCP_TYPE")&&NT()){const ae=Bt("DSCP_TYPE");["very-low","low","medium","high"].includes(ae)&&(j.networkPriority=ae)}const G=C.sender.getParameters(),Z=null===(g=G.encodings)||void 0===g?void 0:g[0];Es()&&!Z&&(P.encodings=[j]),Z&&Object.assign(Z,j),Object.assign(G,P),yield C.sender.setParameters(G)}}}catch{oe.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(i,o,c){const h=lu.exports.parse(i);return o.forEach((g,p)=>{const v=c[p],_=h.mediaDescriptions.find(y=>y.attributes.mid===v);_&&(Mu(_,g),function(y,b,C){if(Es()||"video"!==y.media.mediaType||!(b instanceof Os)||"vp9"!==C&&"vp8"!==C||"vp8"===C&&!Bt("SIMULCAST")||void 0===b._scalabiltyMode||b._scalabiltyMode.numSpatialLayers<=1)return;const w="vp8"===C?2:b._scalabiltyMode.numSpatialLayers,P=y.attributes.ssrcs[0],j=y.attributes.ssrcGroups.find(Z=>"FID"===Z.semantic&&Z.ssrcIds[0]===P.ssrcId),G={semantic:"SIM",ssrcIds:[P.ssrcId]};for(let Z=1;Z<w;Z++)y.attributes.ssrcs.push({ssrcId:P.ssrcId+Z,attributes:Ga(P.attributes)}),G.ssrcIds.push(P.ssrcId+Z),j&&(y.attributes.ssrcs.push({ssrcId:j.ssrcIds[1]+Z,attributes:Ga(P.attributes)}),y.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[P.ssrcId+Z,j.ssrcIds[1]+Z]}));y.attributes.ssrcGroups.unshift(G)}(_,g,this.store.codec))}),lu.exports.print(h)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=i=>{var o;null===(o=this.onFirstAudioReceived)||void 0===o||o.call(this,i)},this.statsFilter.onFirstVideoReceived=i=>{var o;null===(o=this.onFirstVideoReceived)||void 0===o||o.call(this,i)},this.statsFilter.onFirstAudioDecoded=i=>{var o;null===(o=this.onFirstAudioDecoded)||void 0===o||o.call(this,i)},this.statsFilter.onFirstVideoDecoded=(i,o,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,i,o,c)},this.statsFilter.onSelectedLocalCandidateChanged=(i,o)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,i,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(i,o)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,i,o)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}applySimulcastForFirefox(i,o){var c=this;return L(function*(){if(i.length===o.length)for(let _=0;_<i.length;_++){var h,g,p,v;const y=i[_],b=o[_];if(b instanceof Os&&!b._hints.includes(Rc.LOW_STREAM)&&null!==(h=b._encoderConfig)&&void 0!==h&&h.bitrateMax&&(null===(g=b._encoderConfig)||void 0===g?void 0:g.bitrateMax)>200&&null!==(p=b._scalabiltyMode)&&void 0!==p&&p.numSpatialLayers&&(null===(v=b._scalabiltyMode)||void 0===v?void 0:v.numSpatialLayers)>1&&"vp8"===c.store.codec){const C={},w={high:1e3*(b._encoderConfig.bitrateMax-50),medium:5e4};C.encodings=[{rid:"m",active:!0,maxBitrate:w.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:w.high}];const P=y.sender.getParameters();yield y.sender.setParameters(Object.assign(P,C))}}})()}applySimulcastEncodings(i,o){var c=this;return L(function*(){if(!Es()&&i.length===o.length)for(let h=0;h<i.length;h++){const g=o[h];if(g instanceof Os&&c.isVP8Simulcast(g)){const p=i[h],v={},_={high:1e3*(g._encoderConfig.bitrateMax-50),medium:5e4};v.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:_.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:_.medium,scaleResolutionDownBy:4}];const y=p.sender.getParameters();yield p.sender.setParameters(Object.assign(y,v))}}})()}isVP8Simulcast(i){var o,c,h,g;return!!(i instanceof Os&&Bt("SIMULCAST")&&"vp8"===this.store.codec&&!i._hints.includes(Rc.LOW_STREAM)&&null!==(o=i._encoderConfig)&&void 0!==o&&o.bitrateMax&&(null===(c=i._encoderConfig)||void 0===c?void 0:c.bitrateMax)>200&&null!==(h=i._scalabiltyMode)&&void 0!==h&&h.numSpatialLayers&&(null===(g=i._scalabiltyMode)||void 0===g?void 0:g.numSpatialLayers)>1)}logSDPExchange(i,o,c,h){if(Bt("SDP_LOGGING"))return oe.upload("exchanging ".concat(c," ").concat(o," SDP during P2PConnection.").concat(h,"\n"),i),"offer"===o?g=>{this.logSDPExchange(g,"answer","local"===c?"remote":"local",h)}:void 0}getRemoteSSRC(i){if(this.remoteSDP)return this.remoteSDP.getSSRC(i)?.[0].ssrcId}}).prototype,"connect",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"connect"),yi.prototype),ir(yi.prototype,"receive",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"receive"),yi.prototype),ir(yi.prototype,"batchReceive",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"batchReceive"),yi.prototype),ir(yi.prototype,"stopReceiving",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"stopReceiving"),yi.prototype),ir(yi.prototype,"muteRemote",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"muteRemote"),yi.prototype),ir(yi.prototype,"unmuteRemote",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"unmuteRemote"),yi.prototype),ir(yi.prototype,"muteLocal",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"muteLocal"),yi.prototype),ir(yi.prototype,"unmuteLocal",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"unmuteLocal"),yi.prototype),ir(yi.prototype,"reEstablish",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"reEstablish"),yi.prototype),ir(yi.prototype,"close",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"close"),yi.prototype),ir(yi.prototype,"updateEncoderConfig",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"updateEncoderConfig"),yi.prototype),ir(yi.prototype,"updateSendParameters",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"updateSendParameters"),yi.prototype),ir(yi.prototype,"replaceTrack",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"replaceTrack"),yi.prototype),ir(yi.prototype,"restartICE",[Al],Object.getOwnPropertyDescriptor(yi.prototype,"restartICE"),yi.prototype),tj=yi))||tj;function Al(n,i,o){const c=n[i];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return o.value=L(function*(){const h=this.mutex,g=yield h.lock("From P2PConnection.".concat(i));try{for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return yield c.apply(this,v)}finally{g()}}),o}function nj(n,i){let o=document.createElement("video"),c=document.createElement("canvas");o.setAttribute("style","display:none"),c.setAttribute("style","display:none"),o.setAttribute("muted",""),o.muted=!0,o.setAttribute("autoplay",""),o.autoplay=!0,o.setAttribute("playsinline",""),c.width=Rv(i.width),c.height=Rv(i.height);const h=Rv(i.framerate||15);document.body.append(o),document.body.append(c);let g=n._mediaStreamTrack;o.srcObject=new MediaStream([g]),o.play();const p=c.getContext("2d");if(!p)throw new Pe(Te.UNEXPECTED_ERROR,"can not get canvas context");const v=Oc(),_=c.captureStream(v.supportRequestFrame?0:h).getVideoTracks()[0],y=vV(()=>(()=>{if(o.paused&&o.play(),o.videoHeight>2&&o.videoWidth>2){const P=c.width*(o.videoHeight/o.videoWidth);Math.abs(P-c.height)>=2&&(oe.debug("adjust low stream resolution","".concat(c.width,"x").concat(c.height," -> ").concat(c.width,"x").concat(P)),c.height=P)}p.drawImage(o,0,0,c.width,c.height),_.requestFrame&&_.requestFrame(),g!==n._mediaStreamTrack&&(g=n._mediaStreamTrack,o.srcObject=new MediaStream([g]))})(),h),b=_.stop;return _.stop=()=>{b.call(_),y(),o&&(o.remove(),o=null),c&&(c.width=0,c.remove(),c=null),oe.debug("clean low stream renderer")},_}var nG,j2;function rG(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Q2(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?rG(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):rG(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class rj extends e9{getUserId(){return this._userId}constructor(i,o,c,h){super(i,"track-".concat(i.kind,"-").concat(o,"-").concat(h.clientId,"_").concat(cs(5,""))),q(this,"_userId",void 0),q(this,"_uintId",void 0),q(this,"_isDestroyed",!1),q(this,"store",void 0),this._userId=o,this._uintId=c,this.store=h}_updateOriginMediaStreamTrack(i){this._originMediaStreamTrack=i,this._mediaStreamTrack=i,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,oe.info("[".concat(this.getTrackId(),"] is destroyed")),Yt("info",this,"_destroy"),this.stop(),super.close()}}let iw=ac("RemoteVideoTrack","getTrackId")(nG=class extends rj{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Xs.PLAYING)}constructor(n,i,o,c){super(n,i,o,c),q(this,"_videoVisibleTimer",null),q(this,"_previousVideoVisibleStatus",void 0),q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),q(this,"trackMediaType","video"),q(this,"_videoWidth",void 0),q(this,"_videoHeight",void 0),q(this,"_player",void 0),Yt("info",this,"constructor",{userId:i}),this.updateMediaStreamTrackResolution()}getStats(){return m1(()=>{oe.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead"),xn("warning",this,"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Ov(this,mr.GET_STATS)||Q2({},y6)}play(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof n?n:"HTMLElement",i]});if("string"==typeof n){const h=document.getElementById(n);h?n=h:(oe.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),xn("warning",this,'can not find "#'.concat(n,'" element, use document.body')),n=document.body)}oe.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(i)),Yt("debug",this,"play",i);const c=Q2(Q2({fit:"cover"},i),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(c):(this._player=new z4(c),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(kg.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const h=this.getVideoElementVisibleStatus();this.emit(kg.VIDEO_ELEMENT_VISIBLE_STATUS,h)}catch{}},Bt("CHECK_VIDEO_VISIBLE_INTERVAL")),o.onSuccess()}stop(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return n.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,oe.debug("[".concat(this.getTrackId(),"] stop video playback")),Yt("debug",this,"stop"),n.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){R9(this._originMediaStreamTrack).then(n=>{let[i,o]=n;this._videoHeight=o,this._videoWidth=i}).catch(sL)}_updatePlayerSource(){oe.debug("[".concat(this.getTrackId(),"] update player source track")),Yt("debug",this,"_updatePlayerSource"),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,i;const o=null==this||null===(n=this._player)||void 0===n?void 0:n.getContainerElement(),c={track:this,element:null==this||null===(i=this._player)||void 0===i?void 0:i.getVideoElement(),slot:o?.parentElement},{element:h,slot:g}=c;if(this.isPlaying&&h instanceof HTMLVideoElement&&g instanceof HTMLElement){const p=sH.checkOneElementVisible(h),v=Object.assign({},p);if(v.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=v.visible;Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(v.visible?"Video is visible":"Invisible because of ".concat(v.reason))}return v}return}catch(o){throw new Pe(Te.GET_VIDEO_ELEMENT_VISIBLE_ERROR,o.message)}}})||nG,h0=ac("RemoteAudioTrack","getTrackId")(j2=class extends rj{get isPlaying(){return this._useAudioElement?Yl.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(n,i,o,c){super(n,i,o,c),q(this,"trackMediaType","audio"),q(this,"_source",void 0),q(this,"_useAudioElement",!0),q(this,"_volume",100),Yt("info",this,"constructor",{userId:i}),Bt("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),this._source=new r9(n,!0),this._source.once(wc.RECEIVE_TRACK_BUFFER,()=>{this.emit(kg.FIRST_FRAME_DECODED)})}setAudioFrameCallback(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!n)return this._source.removeAllListeners(wc.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(i),this._source.removeAllListeners(wc.ON_AUDIO_BUFFER),this._source.on(wc.ON_AUDIO_BUFFER,o=>n(o))}setVolume(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),n]},300);this._volume=n,this._useAudioElement?Yl.setVolume(this.getTrackId(),n):this._source.setVolume(n/100),i.onSuccess()}setPlaybackDevice(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[i.getTrackId(),n]});if(!i._useAudioElement)throw new Pe(Te.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield Yl.setSinkID(i.getTrackId(),n)}catch(c){throw o.onError(c),c}o.onSuccess()})()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return m1(()=>{oe.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead"),xn("warning",this,"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Ov(this,mr.GET_STATS)||Q2({},A6)}play(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});oe.debug("[".concat(this.getTrackId(),"] start audio playback")),Yt("debug",this,"play"),this._useAudioElement?(oe.debug("[".concat(this.getTrackId(),"] use audio element to play")),xn("debug",this,"use audio element to play"),Yl.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),n.onSuccess()}stop(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});oe.debug("[".concat(this.getTrackId(),"] stop audio playback")),Yt("debug",this,"stop"),this._useAudioElement?Yl.stop(this.getTrackId()):this._source.stop(),n.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){oe.debug("[".concat(this.getTrackId(),"] update player source track")),Yt("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Yl.updateTrack(this.getTrackId(),this._mediaStreamTrack)}})||j2;function IB(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function iG(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?IB(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):IB(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class oG extends is{constructor(){super(),q(this,"uplinkStatsUploadInterval",void 0),q(this,"uplinkStatsUploadSlowInterval",void 0),q(this,"uplinkRelatedStatsUploadInterval",void 0),q(this,"uplinkDenoiserStatsUploadInterval",void 0),q(this,"transportStatsUploadInterval",void 0),q(this,"extensionStatsUploadInterval",void 0),q(this,"downlinkStatsUploadInterval",void 0),q(this,"downlinkStatsUploadSlowInterval",void 0),q(this,"downlinkRelatedStatsUploadInterval",void 0),q(this,"lastStats",void 0),q(this,"uploadUnplinkStarted",!1),q(this,"uploadDownlinkStarted",!1),q(this,"uploadTransportStarted",!1),q(this,"requestStats",void 0),q(this,"requestLocalMedia",void 0),q(this,"requestRemoteMedia",void 0),q(this,"requestAllTracks",void 0),q(this,"requestVideoIsReady",void 0),q(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&this.uploadTransportStats(o)},6e3))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&(this.uploadUplinkStats(o,this.lastStats),this.lastStats=o)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&this.uploadSlowUplinkStats(o)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&this.uploadRelatedUplinkStats(o,this.lastStats),this.lastStats=o},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestAllTracks)||void 0===i?void 0:i.call(this);o&&this.uploadDenoiserStats(o)},2e3),this.extensionStatsUploadInterval&&window.clearInterval(this.extensionStatsUploadInterval),this.extensionStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestAllTracks)||void 0===i?void 0:i.call(this);o&&this.uploadExtensionStats(o)},2e3))}uploadTransportStats(i){xh(()=>{var o;null===(o=this.requestUpload)||void 0===o||o.call(this,ou.TRANSPORT_STATS,function(c){const h={connectionType:100};if("relay"===c.selectedCandidatePair.localCandidate.candidateType){const g=c.selectedCandidatePair.localCandidate.relayProtocol;"udp"===g&&(h.connectionType=101),"tcp"===g&&(h.connectionType=103),"tls"===g&&(h.connectionType=104)}return h}(i))})}uploadUplinkStats(i,o){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,{track:p,ssrcs:v}]=h;switch(g){case Dn.LocalVideoLowTrack:case Dn.LocalVideoTrack:{const y=function(C,w,P){var j;const G=w.videoSend.find(ae=>ae.ssrc===C);if(!G)return null;const Z={id:cs(10,""),timestamp:new Date(w.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:G.ssrc.toString()};switch(Z.A_vstd=P._originMediaStreamTrack&&!P._originMediaStreamTrack.enabled||!P._mediaStreamTrack.enabled?"1":"0",G.sentFrame&&(Z.A_fhs=G.sentFrame.height.toString(),Z.A_frs=G.sentFrame.frameRate.toString(),Z.A_fws=G.sentFrame.width.toString()),G.adaptionChangeReason){case"none":Z.A_ac="0";break;case"cpu":Z.A_ac="1";break;case"bandwidth":Z.A_ac="2";break;case"other":Z.A_ac="3"}return Z.A_lvps=HD[P._player?P._player.videoElementStatus:"uninit"].toString(),Z.A_nr=null===(j=G.nacksCount)||void 0===j?void 0:j.toString(),G.avgEncodeMs&&(Z.A_aem=G.avgEncodeMs.toFixed(0).toString()),Z}(v[0].ssrcId,i,p),b=NV(v[0].ssrcId,i,o);y&&xh(()=>{var C;return null===(C=this.requestUpload)||void 0===C?void 0:C.call(this,ou.PUBLISH_STATS,{stream_type:g===Dn.LocalVideoLowTrack?"low":"high",stats:iG(iG({},y),b)})});break}case Dn.LocalAudioTrack:{const y=function(b,C,w){const P=C.audioSend.find(G=>G.ssrc===b);if(!P)return null;const j={id:cs(10,""),timestamp:new Date(C.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:P.ssrc.toString()};return j.A_astd=w._originMediaStreamTrack.enabled&&w._mediaStreamTrack.enabled?"0":"1",j.A_ail=P.inputLevel?Math.round(100*P.inputLevel).toString():Math.round(100*w._source.getAccurateVolumeLevel()).toString(),j.A_apil=Math.round(100*w._source.getAccurateVolumeLevel()).toString(),P.aecReturnLoss&&(j.A_ecrl=Math.round(P.aecReturnLoss).toString()),P.aecReturnLossEnhancement&&(j.A_ecrle=Math.round(P.aecReturnLossEnhancement).toString()),j}(v[0].ssrcId,i,p);y&&xh(()=>{var b;return null===(b=this.requestUpload)||void 0===b?void 0:b.call(this,ou.PUBLISH_STATS,{stream_type:"high",stats:y})});break}}const _=function(y){const b={id:"bweforvideo",timestamp:new Date(y.timestamp).toISOString(),type:"VideoBwe"};return y.bitrate.retransmit&&(b.A_rb=y.bitrate.retransmit.toString()),y.bitrate.targetEncoded&&(b.A_teb=y.bitrate.targetEncoded.toString()),b.A_aeb=y.bitrate.actualEncoded.toString(),b.A_tb=y.bitrate.transmit.toString(),void 0!==y.sendBandwidth&&(b.A_asb=y.sendBandwidth.toString()),b}(i);_&&xh(()=>{var y;return null===(y=this.requestUpload)||void 0===y?void 0:y.call(this,ou.PUBLISH_STATS,{stream_type:g===Dn.LocalVideoLowTrack?"low":"high",stats:_})})})}uploadSlowUplinkStats(i){var o;((null===(o=this.requestLocalMedia)||void 0===o?void 0:o.call(this))||[]).filter(c=>{let[h]=c;return h===Dn.LocalVideoLowTrack||h===Dn.LocalVideoTrack}).forEach(c=>{let[h,{ssrcs:g}]=c;const p=NV(g[0].ssrcId,i);p&&xh(()=>{var v;return null===(v=this.requestUpload)||void 0===v?void 0:v.call(this,ou.PUBLISH_STATS,{stream_type:h===Dn.LocalVideoLowTrack?"low":"high",stats:p})})})}uploadRelatedUplinkStats(i,o){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).filter(h=>{let[g]=h;return g===Dn.LocalVideoLowTrack||g===Dn.LocalVideoTrack}).forEach(h=>{let[g,{ssrcs:p}]=h;const v=function(_,y){const b=y.videoSend.find(C=>C.ssrc===_);return b?{mediaType:"video",isVideoMute:!1,frameRateInput:b.inputFrame&&b.inputFrame.frameRate.toString(),frameRateSent:b.sentFrame&&b.sentFrame.frameRate.toString(),googRtt:b.rttMs.toString(),qpSumPerFrame:Math.floor(b.qpSumPerFrame).toString()}:null}(p[0].ssrcId,i);v&&xh(()=>{var _;null===(_=this.requestUpload)||void 0===_||_.call(this,ou.PUBLISH_RELATED_STATS,{stream_type:g===Dn.LocalVideoLowTrack?"low":"high",stats:v})})})}uploadDenoiserStats(i){for(let g=0;g<i.length;g++){const p=i[g];if(p instanceof Hy){var o,c,h;const v=null===(o=(c=p._external).getDenoiserStats)||void 0===o?void 0:o.call(c);return void(v&&(null===(h=this.requestUpload)||void 0===h||h.call(this,ou.DENOISER_STATS,v)))}}}uploadExtensionStats(i){for(let o=0;o<i.length;o++){const c=i[o];if(c instanceof Hy)return void c.getProcessorStats().forEach(h=>{var g;h.type===ou.DENOISER_STATS&&(null===(g=this.requestUpload)||void 0===g||g.call(this,ou.DENOISER_STATS,h.stats))})}}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&(this.uploadDownlinkStats(o,this.lastStats),this.lastStats=o)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&this.uploadSlowDownlinkStats(o)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&(this.uploadRelatedDownlinkStats(o,this.lastStats),this.lastStats=o)},1e3))}uploadDownlinkStats(i,o){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,p]=h;if(p.has(ei.VIDEO)&&g.videoTrack){const v=g.videoTrack?function(_,y,b){const C=y.videoRecv.find(G=>G.ssrc===_);if(!C)return null;const w={id:cs(10,""),timestamp:new Date(y.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:C.ssrc.toString()};var P,j;return w.bytesReceived=C.bytes.toString(),w.packetsLost=C.packetsLost.toString(),w.packetsReceived=C.packets.toString(),C.framesRateFirefox&&(w.A_frr=C.framesRateFirefox.toString()),C.receivedFrame?(w.A_frr=C.receivedFrame.frameRate.toString(),w.A_fhr=C.receivedFrame.height.toString(),w.A_fwr=C.receivedFrame.width.toString()):(w.A_fhr=null===(P=b._videoHeight)||void 0===P?void 0:P.toString(),w.A_fwr=null===(j=b._videoWidth)||void 0===j?void 0:j.toString()),w.A_frd=C.decodeFrameRate.toString(),C.outputFrame&&(w.A_fro=C.outputFrame.frameRate.toString()),void 0!==C.jitterBufferMs&&(w.A_jbm=Math.floor(C.jitterBufferMs).toString()),void 0!==C.currentDelayMs&&(w.A_cdm=Math.floor(C.currentDelayMs).toString()),w.A_fs=C.firsCount.toString(),w.A_ns=C.nacksCount.toString(),w.A_ps=C.plisCount.toString(),b&&(w.A_vrtd=b._originMediaStreamTrack.enabled&&b._mediaStreamTrack.enabled?"0":"1"),b._player&&b._player.freezeTimeCounterList.length>0&&(w.A_vrft=b._player.freezeTimeCounterList.splice(0,1)[0].toString()),w.A_rvps=HD[b._player?b._player.videoElementStatus:"uninit"].toString(),w}(g._videoSSRC,i,g.videoTrack):void 0;v&&xh(()=>{var _;return null===(_=this.requestUpload)||void 0===_?void 0:_.call(this,ou.SUBSCRIBE_STATS,{stream_id:g.uid,stats:v})})}if(p.has(ei.AUDIO)&&g.audioTrack){const v=g.audioTrack?function(_,y,b){const C=y.audioRecv.find(P=>P.ssrc===_);if(!C)return null;const w={id:cs(10,""),timestamp:new Date(y.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:C.ssrc.toString()};return w.bytesReceived=C.bytes.toString(),w.packetsLost=C.packetsLost.toString(),w.packetsReceived=C.packets.toString(),w.A_aol=C.outputLevel?Math.round(100*C.outputLevel).toString():Math.round(100*b._source.getAccurateVolumeLevel()).toString(),w.A_apol=Math.round(100*b._source.getAccurateVolumeLevel()).toString(),b&&(w.A_artd=b._originMediaStreamTrack.enabled&&b._mediaStreamTrack.enabled?"0":"1"),w.A_jr=C.jitterMs.toString(),w.A_jbm=Math.floor(C.jitterBufferMs).toString(),w.A_cdm=Math.floor(C.jitterBufferMs).toString(),w.A_raps=HD[Yl.getPlayerState(b.getTrackId())].toString(),w}(g._audioSSRC,i,g.audioTrack):void 0;v&&xh(()=>{var _;return null===(_=this.requestUpload)||void 0===_?void 0:_.call(this,ou.SUBSCRIBE_STATS,{stream_id:g.uid,stats:v})})}})}uploadSlowDownlinkStats(i){}uploadRelatedDownlinkStats(i,o){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,p]=h;if(p.has(ei.VIDEO)&&g.videoTrack){var v;const _=!0===(g._videoSSRC&&(null===(v=this.requestVideoIsReady)||void 0===v?void 0:v.call(this,g._videoSSRC))||!1),y=function(b,C,w,P,j,G){const Z=w.videoRecv.find(Ce=>Ce.ssrc===b),ae=j?j.videoRecv.find(Ce=>Ce.ssrc===b):void 0;if(!Z)return null;const fe=Wy.isRemoteVideoFreeze(G,Z,ae)&&C,be={mediaType:"video",isVideoMute:!1,peerId:P,frameRateReceived:Z.receivedFrame&&Z.receivedFrame.frameRate.toString(),frameRateDecoded:Z.decodedFrame&&Z.decodedFrame.frameRate.toString(),isFreeze:fe,bytesReceived:Z.bytes.toString(),packetsReceived:Z.packets.toString(),packetsLost:Z.packetsLost.toString(),qpSumPerFrame:Math.floor(Z.qpSumPerFrame).toString()};return Z.framesRateFirefox&&(be.frameRateDecoded=Z.framesRateFirefox.toString(),be.frameRateReceived=Z.framesRateFirefox.toString()),be}(g._videoSSRC,_,i,g.uid,o,g.videoTrack);y&&xh(()=>{var b;null===(b=this.requestUpload)||void 0===b||b.call(this,ou.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:y})})}if(p.has(ei.AUDIO)&&g.audioTrack){const _=function(y,b,C,w){const P=b.audioRecv.find(G=>G.ssrc===y);if(!P)return null;const j=Wy.isRemoteAudioFreeze(w);return{mediaType:"audio",isAudioMute:!1,peerId:C,googJitterReceived:P.jitterMs.toString(),isFreeze:j,bytesReceived:P.bytes.toString(),packetsReceived:P.packets.toString(),packetsLost:P.packetsLost.toString(),frameReceived:P.receivedFrames.toString(),frameDropped:P.droppedFrames.toString()}}(g._audioSSRC,i,g.uid,g.audioTrack);_&&xh(()=>{var y;null===(y=this.requestUpload)||void 0===y||y.call(this,ou.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:_})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}}var ij,Oi;function oj(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function xv(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?oj(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):oj(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function sj(n){var i,o,c,h=2;for(typeof Symbol<"u"&&(o=k2,c=Symbol.iterator);h--;){if(o&&null!=(i=n[o]))return i.call(n);if(c&&null!=(i=n[c]))return new H2(i.call(n));o="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function H2(n){function i(o){if(Object(o)!==o)return Qn.reject(new TypeError(o+" is not an object."));var c=o.done;return Qn.resolve(o.value).then(function(h){return{value:h,done:c}})}return(H2=function(o){this.s=o,this.n=o.next}).prototype={s:null,n:null,next:function(){return i(this.n.apply(this.s,arguments))},return:function(o){var c=this.s.return;return void 0===c?Qn.resolve({value:o,done:!0}):i(c.apply(this.s,arguments))},throw:function(o){var c=this.s.return;return void 0===c?Qn.reject(o):i(c.apply(this.s,arguments))}},new H2(n)}let sG=ac("P2PChannel","store.p2pId")((ir((Oi=class extends is{get state(){return this._state}set state(n){const i=this._state;this._state=n,this.emit(bi.StateChange,i,this._state)}constructor(n,i){var o;super(),o=this,q(this,"store",void 0),q(this,"statsUploader",void 0),q(this,"connection",void 0),q(this,"localTrackMap",new Map),q(this,"remoteUserMap",new Map),q(this,"pendingLocalTracks",[]),q(this,"pendingRemoteTracks",[]),q(this,"statsCollector",void 0),q(this,"isPlanB",!1),q(this,"iceFailedCount",0),q(this,"dtlsFailedCount",0),q(this,"mutex",new cu("P2PChannel-mutex")),q(this,"_state",Gl.Disconnected),q(this,"handleMuteLocalTrack",function(){var c=L(function*(h,g,p){const v=yield o.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!o.connection)return void p(new Pe(Te.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));Yt("debug",o,"handleMuteLocalTrack",h.getTrackId()),yield o.waitTillConnected();const _=o.filterTobeMutedTracks(h);if(0===_.length)return void g();const y=_.find(C=>"videoLowTrack"===C[0]);y&&y[1].track._originMediaStreamTrack.stop(),yield o.connection.muteLocal(_.map(C=>{let[,{id:w}]=C;return w}));const b=o.createMuteMessage(_);yield xo(o,bi.RequestMuteLocal,b),g()}catch(_){p(_)}finally{v()}});return function(h,g,p){return c.apply(this,arguments)}}()),q(this,"handleUnmuteLocalTrack",function(){var c=L(function*(h,g,p){const v=yield o.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!o.connection)return void p(new Pe(Te.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));Yt("debug",o,"handleUnmuteLocalTrack",h.getTrackId()),yield o.waitTillConnected();const _=o.filterTobeUnmutedTracks(h);if(0===_.length)return void g();const y=_.find(C=>"videoLowTrack"===C[0]);if(y){const C=y[1];if(C.track._originMediaStreamTrack.stop(),Oc().supportDualStreamEncoding){const w=h._mediaStreamTrack.clone();C.track._mediaStreamTrack=w,C.track._originMediaStreamTrack=w}else{const w=nj(h,HS(o,bi.RequestLowStreamParameter));C.track._mediaStreamTrack=w,C.track._originMediaStreamTrack=w}yield new Qn((w,P)=>{o.handleReplaceTrack(C.track,w,P,!0)})}yield o.connection.unmuteLocal(_.map(C=>{let[,{id:w}]=C;return w}));const b=o.createUnmuteMessage(_);yield xo(o,bi.RequestUnmuteLocal,b),g()}catch(_){p(_)}finally{v()}});return function(h,g,p){return c.apply(this,arguments)}}()),q(this,"handleUpdateVideoEncoder",function(){var c=L(function*(h,g,p){const v=yield o.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const _=o.localTrackMap.get(Dn.LocalVideoTrack);if(!o.connection||!_||_.track!==h)return void g();yield o.waitTillConnected();const{id:y,track:b}=_;yield o.connection.updateSendParameters(y,b),yield o.connection.updateEncoderConfig(y,b),o.emit(bi.UpdateVideoEncoder,b),g()}catch(_){p(_)}finally{v()}});return function(h,g,p){return c.apply(this,arguments)}}()),q(this,"handleSetOptimizationMode",function(){var c=L(function*(h,g,p){const v=yield o.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const _=o.localTrackMap.get(Dn.LocalVideoTrack);if(!o.connection||!_||_.track!==h)return;yield o.waitTillConnected();const{id:y,track:b}=_;yield o.connection.updateSendParameters(y,b),g()}catch(_){p(_)}finally{v()}});return function(h,g,p){return c.apply(this,arguments)}}()),q(this,"handleReplaceTrack",function(){var c=L(function*(h,g,p,v){let _;oe.debug("P2PChannel handleReplaceTrack for [track-id-".concat(h.getTrackId(),"]")),"boolean"==typeof v&&v||(_=yield o.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var y;const C=Array.from(o.localTrackMap.entries()).find(w=>{let[,{track:P}]=w;return h===P});if(!o.connection||!C)return void g();if(yield o.waitTillConnected(),yield null===(y=o.connection)||void 0===y?void 0:y.replaceTrack(h,C[1].id),o.isPlanB){const w=C[1];w.id=h._mediaStreamTrack.id,o.localTrackMap.set(C[0],w)}if(C[0]===Dn.LocalVideoTrack&&Oc().supportDualStreamEncoding){const w=o.localTrackMap.get(Dn.LocalVideoLowTrack);if(w){const P=h._mediaStreamTrack.clone();w.track._originMediaStreamTrack.stop(),w.track._mediaStreamTrack=P,w.track._originMediaStreamTrack=P,yield new Qn((j,G)=>{o.handleReplaceTrack(w.track,j,G,!0)})}}g()}catch(C){p(C)}finally{var b;null===(b=_)||void 0===b||b()}});return function(h,g,p,v){return c.apply(this,arguments)}}()),q(this,"handleGetLocalVideoStats",c=>{c(this.statsCollector.getLocalVideoTrackStats())}),q(this,"handleGetLocalAudioStats",c=>{c(this.statsCollector.getLocalAudioTrackStats())}),q(this,"handleGetRemoteVideoStats",c=>this.statsCollector.getRemoteVideoTrackStats(c.uid)[c.uid]),q(this,"handleGetRemoteAudioStats",c=>this.statsCollector.getRemoteAudioTrackStats(c.uid)[c.uid]),this.store=n,this.statsCollector=i,this.statsCollector.addP2PChannel(this),this.statsUploader=new oG,this.bindStatsUploaderEvents(),this.isPlanB=!Oc().supportUnifiedPlan||Bt("CHROME_FORCE_PLAN_B")&&NT()}startP2PConnection(n){var i=this;return L(function*(){return i.state=Gl.New,i.connection=i.isPlanB?new eG(n,i.store):new tG(n,i.store),i.bindConnectionEvents(i.connection),i.connection.establish()})()}connect(n,i,o,c,h,g){var p=this;return L(function*(){if(!p.connection)throw new Pe(Te.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");p.store.peerConnectionStart(),yield p.connection.connect(n,i,o,c,h,g),p.statsUploader.startUploadTransportStats(),p.state=Gl.Connected})()}publish(n,i,o){var c=this;return a0(function*(){const h=yield gs(c.mutex.lock("From P2PChannel.publish"));try{if(!c.connection){if(c.state===Gl.Disconnected)throw new Pe(Te.UNEXPECTED_ERROR,"PeerConnection already disconnected.");c.throwIfTrackTypeNotMatch(n);const p=n.filter(v=>-1===c.pendingLocalTracks.indexOf(v));return void(c.pendingLocalTracks=c.pendingLocalTracks.concat(p))}c.store.pubId=c.store.pubId+1,gl.markPublishStart(c.store.clientId,c.store.pubId),yield gs(c.waitTillConnected());const g=c.filterTobePublishedTracks(n,i,o);if(0===g.length)return void(yield gs(c.tryToUnmuteAudio(n)));yield*z1(sj(c.doPublish(c.connection,g)),gs)}finally{h()}})()}doPublish(n,i){var o=this;return a0(function*(){i.forEach(y=>{let{track:b,type:C}=y;const w=performance.now();o.store.publish(b.getTrackId(),C===Dn.LocalAudioTrack?"audio":"video",w)}),o.bindLocalTrackEvents(i);const c=yield gs(n.send(i.map(y=>{let{track:b}=y;return b}),o.store.codec,o.store.audioCodec)),h=(yield gs(c.next())).value,g=o.createGatewayPublishMessage(i,h);let p;try{p=yield g}catch(y){throw xn("error",o,"doPublish yield error: ".concat(y.toString())),c.throw(y),y?.code===Te.WS_ABORT&&i.forEach(b=>{let{track:C}=b;-1===o.pendingLocalTracks.indexOf(C)&&o.pendingLocalTracks.push(C)}),o.unbindLocalTrackEvents(i),y}const v=o.mapPubResToRemoteConfig(g,p);Yt("debug",o,"doPublish",{remoteConfigs:v,tracks:i.map(y=>{let{track:b}=y;return b.getTrackId()}),pubMsg:g,pubAns:p});const _=(yield gs(c.next(v))).value;i.forEach(y=>{let{type:b}=y;o.statsCollector.addLocalStats(b)}),o.assignLocalTracks(i,_),o.statsUploader.startUploadUplinkStats(),i.forEach(y=>{let{track:b,type:C}=y;const w=performance.now();o.store.publish(b.getTrackId(),C===Dn.LocalAudioTrack?"audio":"video",void 0,w)})})()}publishLowStream(n){var i=this;return a0(function*(){if(!i.connection)return;Yt("debug",i,"publishLowStream",n);const o=yield gs(i.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const h=i.localTrackMap.get(Dn.LocalVideoTrack);if(!h)throw new Pe(Te.UNEXPECTED_ERROR,"Could not find high stream");if(i.localTrackMap.has(Dn.LocalVideoLowTrack))throw new Pe(Te.UNEXPECTED_ERROR,"[".concat(i.store.clientId,"] Can't publish low stream when stream already publish"));yield gs(i.waitTillConnected());const g=[{track:i.getLowVideoTrack(h.track,n),type:Dn.LocalVideoLowTrack}];if(yield*z1(sj(i.doPublish(i.connection,g)),gs),h.track.muted||!h.track.enabled){var c;const p=null===(c=i.localTrackMap.get(Dn.LocalVideoLowTrack))||void 0===c?void 0:c.id;void 0!==p&&(yield gs(i.connection.muteLocal([p])))}}finally{o()}})()}republish(){var n=this;return L(function*(){n.pendingLocalTracks.length>0&&(oe.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),Yt("debug",n,"republish",n.pendingLocalTracks.map(i=>i.getTrackId())),yield jd(n,bi.RequestRePublish,n.pendingLocalTracks),n.emit(bi.MediaReconnectEnd,n.store.uid),n.pendingLocalTracks=[])})()}reSubscribe(n){var i=this;return L(function*(){Yt("debug",i,"reSubscribe",i.pendingRemoteTracks.map(o=>{let{user:c}=o;return c.uid}));for(let o=i.pendingRemoteTracks.length-1;o>=0;o--){const{user:c,kind:h}=i.pendingRemoteTracks[o];(h!==ei.AUDIO||c._audio_added_&&c._audioSSRC)&&(h!==ei.VIDEO||c._video_added_&&c._videoSSRC)||i.pendingRemoteTracks.splice(o,1)}if(n)yield jd(i,bi.RequestReSubscribe,i.pendingRemoteTracks);else for(const{user:o,kind:c}of i.pendingRemoteTracks)yield i.subscribe(o,c,c===ei.VIDEO?o._videoSSRC:o._audioSSRC);i.pendingRemoteTracks.forEach(o=>{let{user:c}=o;i.emit(bi.MediaReconnectEnd,c.uid)}),i.pendingRemoteTracks=[]})()}unpublish(n){var i=this;return L(function*(){if(!i.connection)return void n.forEach(h=>{const g=i.pendingLocalTracks.indexOf(h);-1!==g&&i.pendingLocalTracks.splice(g,1)});yield i.waitTillConnected();const o=i.filterTobeUnpublishedTracks(n);if(0===o.length)return;const c=o.find(h=>"videoLowTrack"===h[0]);return c&&c[1].track.close(),Yt("debug",i,"unpublish"),i.doUnpublish(i.connection,o)})()}unpublishLowStream(){var n=this;return L(function*(){if(!n.connection)return;Yt("debug",n,"unpublishLowStream");const i=n.localTrackMap.get(Dn.LocalVideoLowTrack);return i?(yield n.waitTillConnected(),i.track.close(),n.doUnpublish(n.connection,[[Dn.LocalVideoLowTrack,i]])):void 0})()}doUnpublish(n,i){var o=this;return L(function*(){const c=o.createGatewayUnpublishMessage(i);return yield n.stopSending(i.map(h=>{let[,{id:g}]=h;return g})),o.withdrawLocalTracks(i),o.unbindLocalTrackEvents(i.map(h=>{let[g,{track:p}]=h;return{type:g,track:p}})),i.forEach(h=>{let[g]=h;o.statsCollector.removeLocalStats(g)}),0===o.localTrackMap.size&&o.statsUploader.stopUploadUplinkStats(),c})()}subscribe(n,i,o,c,h){var g=this;return L(function*(){var p;if(!g.connection)throw new Pe(Te.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(Yt("debug",g,"subscribe",{uid:n.uid,mediaType:i,ssrcId:o}),null!==(p=g.remoteUserMap.get(n))&&void 0!==p&&p.has(i))return;let v,_;if(yield g.waitTillConnected(),h){const C=h.find(P=>{let{stream_type:j}=P;return j===i});if(!C)throw new Pe(Te.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(i," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(i,"."));const w=yield g.connection.receive(i,C.ssrcs,String(n._uintid),C.attributes);v=w.track,_=w.id}else{const C=yield g.connection.receive(i,[{ssrcId:o,rtx:c}],String(n._uintid),void 0);v=C.track,_=C.id}i===ei.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(v):(n._audioTrack=new h0(v,n.uid,n._uintid,g.store),oe.info("[".concat(g.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),g.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(v):(n._videoTrack=new iw(v,n.uid,n._uintid,g.store),oe.info("[".concat(g.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),g.bindRemoteTrackEvents(n,n._videoTrack));const y=g.remoteUserMap.get(n);y?y.set(i,_):g.remoteUserMap.set(n,new Map([[i,_]])),g.statsCollector.addRemoteStats(n.uid),g.statsUploader.startUploadDownlinkStats();const b=g.pendingRemoteTracks.findIndex(C=>{let{user:w,kind:P}=C;return w.uid===n.uid&&i===P});-1!==b&&(g.pendingRemoteTracks.splice(b,1),g.emit(bi.MediaReconnectEnd,n.uid))})()}massSubscribe(n){var i=this;return L(function*(){return i.massSubscribeNoLock(n)})()}massSubscribeNoLock(n){var i=this;return L(function*(){if(!i.connection)throw new Pe(Te.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");Yt("debug",i,"subscribeAll",n.map(c=>{let{user:h,mediaType:g,ssrcId:p}=c;return{uid:h.uid,mediaType:g,ssrcId:p}})),n=n.filter(c=>{var h;let{user:g,mediaType:p}=c;return!(null!==(h=i.remoteUserMap.get(g))&&void 0!==h&&h.has(p))}),yield i.waitTillConnected();const o=yield i.connection.batchReceive(n.map(c=>{let{user:h,mediaType:g,ssrcId:p,rtxSsrcId:v}=c;return{kind:g,ssrcMsg:[{ssrcId:p,rtx:v}],mslabel:String(h._uintid)}}));n.forEach((c,h)=>{let{user:g,mediaType:p}=c;const{track:v,id:_}=o[h];p===ei.AUDIO?(g._audioTrack?g._audioTrack._updateOriginMediaStreamTrack(v):(g._audioTrack=new h0(v,g.uid,g._uintid,i.store),oe.info("[".concat(i.store.p2pId,"] create remote audio track: ").concat(g._audioTrack.getTrackId()))),i.bindRemoteTrackEvents(g,g._audioTrack)):(g._videoTrack?g._videoTrack._updateOriginMediaStreamTrack(v):(g._videoTrack=new iw(v,g.uid,g._uintid,i.store),oe.info("[".concat(i.store.p2pId,"] create remote video track: ").concat(g._videoTrack.getTrackId()))),i.bindRemoteTrackEvents(g,g._videoTrack));const y=i.remoteUserMap.get(g);y?y.set(p,_):i.remoteUserMap.set(g,new Map([[p,_]])),i.statsCollector.addRemoteStats(g.uid),i.statsUploader.startUploadDownlinkStats();const b=i.pendingRemoteTracks.findIndex(C=>{let{user:w,kind:P}=C;return w.uid===g.uid&&p===P});-1!==b&&(i.pendingRemoteTracks.splice(b,1),i.emit(bi.MediaReconnectEnd,g.uid))})})()}unsubscribe(n,i,o){var c=this;return L(function*(){const h=c.pendingRemoteTracks.filter(v=>{let{user:_,kind:y}=v;return void 0!==i?_.uid===n.uid&&i===y:_.uid===n.uid});if(h.forEach(v=>{const _=c.pendingRemoteTracks.indexOf(v);c.pendingRemoteTracks.splice(_,1)}),!c.connection)return void h.forEach(v=>{let{kind:_}=v;var y;if(_===ei.AUDIO)null===(y=n._audioTrack)||void 0===y||y._destroy(),n._audioTrack=void 0;else if(_===ei.VIDEO){var b;null===(b=n._videoTrack)||void 0===b||b._destroy(),n._videoTrack=void 0}});Yt("debug",c,"unsubscribe",{uid:n.uid,mediaType:i});const g=c.filterTobeUnSubscribedTracks(n,i);if(0===g.length)return;yield c.connection.stopReceiving(g.map(v=>{let[,{id:_}]=v;return _}));const p=c.createUnsubscribeMessage(g);return c.withdrawRemoteTracks(g),0===c.remoteUserMap.size&&c.statsUploader.stopUploadDownlinkStats(),g.forEach(v=>{let[_,{kind:y}]=v;var b,C;if(y===ei.VIDEO&&_._videoSSRC&&(null===(b=c.connection)||void 0===b||b.setStatsRemoteVideoIsReady(_._videoSSRC,!1)),y===ei.VIDEO)c.unbindRemoteTrackEvents(_._videoTrack),o||(null===(C=_._videoTrack)||void 0===C||C._destroy(),_._videoTrack=void 0);else if(y===ei.AUDIO){var w;c.unbindRemoteTrackEvents(_._audioTrack),!o&&(null===(w=_._audioTrack)||void 0===w||w._destroy(),_._audioTrack=void 0)}}),p})()}massUnsubscribe(n){var i=this;return L(function*(){return i.massUnsubscribeNoLock(n)})()}massUnsubscribeNoLock(n){var i=this;return L(function*(){let o=[];for(const{user:g,mediaType:p}of n){const v=i.pendingRemoteTracks.filter(_=>{let{user:y,kind:b}=_;return void 0!==p?y.uid===g.uid&&p===b:y.uid===g.uid});v.forEach(_=>{const y=i.pendingRemoteTracks.indexOf(_);i.pendingRemoteTracks.splice(y,1)}),o=o.concat(v)}if(!i.connection)return void o.forEach(g=>{let{user:p,kind:v}=g;var _;if(v===ei.AUDIO)null===(_=p._audioTrack)||void 0===_||_._destroy(),p._audioTrack=void 0;else if(v===ei.VIDEO){var y;null===(y=p._videoTrack)||void 0===y||y._destroy(),p._videoTrack=void 0}});Yt("debug",i,"batchUnsubscribe",n.map(g=>{let{user:p,mediaType:v}=g;return{uid:p.uid,mediaType:v}}));const c=Da(n).call(n,(g,p)=>{let{user:v,mediaType:_}=p;const y=i.filterTobeUnSubscribedTracks(v,_);return g.concat(y)},[]);if(0===c.length)return;yield i.connection.stopReceiving(c.map(g=>{let[,{id:p}]=g;return p}));const h=i.createUnsubscribeAllMessage(c);return i.withdrawRemoteTracks(c),0===i.remoteUserMap.size&&i.statsUploader.stopUploadDownlinkStats(),c.forEach(g=>{let[p,{kind:v}]=g;var _,y;if(v===ei.VIDEO&&p._videoSSRC&&(null===(_=i.connection)||void 0===_||_.setStatsRemoteVideoIsReady(p._videoSSRC,!1)),v===ei.VIDEO)i.unbindRemoteTrackEvents(p._videoTrack),null===(y=p._videoTrack)||void 0===y||y._destroy(),p._videoTrack=void 0;else if(v===ei.AUDIO){var b;i.unbindRemoteTrackEvents(p._audioTrack),null===(b=p._audioTrack)||void 0===b||b._destroy(),p._audioTrack=void 0}}),h})()}muteRemote(n,i){var o=this;return L(function*(){if(!o.connection)return;Yt("debug",o,"muteRemote",{uid:n.uid,kind:i});const c=o.remoteUserMap.get(n);if(!c)return oe.warning("P2PChannel.muteRemote has no remote user ".concat(n.uid,".")),void xn("warning",o,"P2PChannel.muteRemote has no remote user ".concat(n.uid,"."));if(!c.get(i))return oe.warning("P2PChannel.muteRemote has no remote user ".concat(n.uid," media type ").concat(i,".")),void xn("warning",o,"P2PChannel.muteRemote has no remote user ".concat(n.uid," media type ").concat(i,"."));const h=i===ei.VIDEO?n._videoSSRC:n._audioSSRC;void 0!==h&&o.connection.setStatsRemoteVideoIsReady(h,!1)})()}unmuteRemote(n,i){var o=this;return L(function*(){return o.unmuteRemoteNoLock(n,i)})()}unmuteRemoteNoLock(n,i){var o=this;return L(function*(){if(!o.connection)return;Yt("debug",o,"unmuteRemote",{uid:n.uid,kind:i});const c=o.remoteUserMap.get(n);return c?c.get(i)?void 0:(oe.warning("P2PChannel.unmuteRemote has no remote user ".concat(n.uid," media type ").concat(i,".")),void xn("warning",o,"unmuteRemote has no remote user ".concat(n.uid," media type ").concat(i))):(oe.warning("P2PChannel.unmuteRemote has no remote user ".concat(n.uid,".")),void xn("warning",o,"unmuteRemote has no remote user ".concat(n.uid)))})()}getAllTracks(n){const i=this.localTrackMap.get(Dn.LocalAudioTrack);if(i?.track instanceof ql){const o=i.track;return Array.from(this.localTrackMap.entries()).filter(c=>{let[h]=c;return h!==Dn.LocalAudioTrack}).filter(c=>{let[h]=c;return!(n&&h===Dn.LocalVideoLowTrack)}).map(c=>{let[,{track:h}]=c;return h}).concat(o.trackList)}return Array.from(this.localTrackMap.entries()).filter(o=>{let[c]=o;return!(n&&c===Dn.LocalVideoLowTrack)}).map(o=>{let[,{track:c}]=o;return c})}reportPublishEvent(n,i,o,c,h){if(n){const p=this.localTrackMap.get(Dn.LocalAudioTrack),v=this.localTrackMap.get(c?Dn.LocalVideoLowTrack:Dn.LocalVideoTrack);Kt.publish(this.store.sessionId,{eventElapse:gl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:i,audioName:p?.track.getTrackLabel(),videoName:v?.track.getTrackLabel(),screenshare:-1!==v?.track._hints.indexOf(Rc.SCREEN_TRACK),audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}else{var g;o||(o=[]);const p=o.find(_=>_ instanceof Ha),v=c?null===(g=this.localTrackMap.get(Dn.LocalVideoTrack))||void 0===g?void 0:g.track:o.find(_=>_ instanceof Os);Kt.publish(this.store.sessionId,{eventElapse:gl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:i,audioName:p?.getTrackLabel(),videoName:v?.getTrackLabel(),screenshare:-1!==v?._hints.indexOf(Rc.SCREEN_TRACK),audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}}reportSubscribeEvent(n,i,o,c){const h=c===ei.VIDEO?o._videoSSRC:o._audioSSRC;h&&Kt.subscribe(this.store.sessionId,{succ:n,ec:i,video:c===ei.VIDEO,audio:c===ei.AUDIO,peerid:o.uid,subscribeRequestid:c===ei.VIDEO?o._videoSSRC:o._audioSSRC,p2pid:this.store.p2pId,eventElapse:gl.measureFromSubscribeStart(this.store.clientId,h)})}reset(){oe.debug("P2PChannel.reset"),this.mutex=new cu("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=Gl.Disconnected}getStats(){var n;return null===(n=this.connection)||void 0===n?void 0:n.getStats()}getRemoteVideoIsReady(n){var i;return(null===(i=this.connection)||void 0===i?void 0:i.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(Dn.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(Dn.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const i=this.localTrackMap.get(n);return i&&i.track instanceof Os||i&&i.track instanceof Ha?i.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,i){if(!n)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(n);return!!o&&(!i||o.has(i))}hasRemoteMediaWithLock(n,i){var o=this;return L(function*(){if(!n)return o.remoteUserMap.size>0;const c=o.remoteUserMap.get(n);return!!c&&(!i||c.has(i))})()}getRemoteMedia(n){var i;const o=Array.from(Iv(i=this.remoteUserMap).call(i)).find(c=>c.uid===n);return o?{audioTrack:o.audioTrack,audioSSRC:o._audioSSRC,videoTrack:o.videoTrack,videoSSRC:o._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(o=>{let[c]=o;return{uid:c.uid,level:c.audioTrack?100*c.audioTrack._source.getAccurateVolumeLevel():0}});const i=this.localTrackMap.get(Dn.LocalAudioTrack);return i&&n.push({level:100*i.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=GM(n).call(n,(o,c)=>o.level-c.level),n}disconnectForReconnect(){var n=this;return L(function*(){n.connection&&(Yt("debug",n,"disconnectForReconnect"),oe.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),n.state=Gl.Reconnecting,n.connection.close(),n.unbindConnectionEvents(n.connection),n.connection=void 0,0!==n.localTrackMap.size&&(Array.from(n.localTrackMap.entries()).forEach(i=>{let[o,{track:c}]=i;switch(o){case Dn.LocalVideoTrack:c._hints.includes(Rc.LOW_STREAM)?c.close():n.pendingLocalTracks.push(c);break;case Dn.LocalAudioTrack:c instanceof ql?n.pendingLocalTracks=n.pendingLocalTracks.concat(c.trackList):n.pendingLocalTracks.push(c)}}),n.emit(bi.MediaReconnectStart,n.store.uid)),n.unbindLocalTrackEvents(),n.localTrackMap.clear(),0!==n.remoteUserMap.size&&Array.from(n.remoteUserMap.entries()).forEach(i=>{let[o,c]=i;Array.from(Iv(c).call(c)).forEach(h=>{n.setPendingRemoteMedia(o,h)}),n.emit(bi.MediaReconnectStart,o.uid)}),n.unbindAllRemoteTrackEvents(),n.remoteUserMap.clear(),n.statsUploader.stopUploadUplinkStats(),n.statsUploader.stopUploadDownlinkStats(),n.statsUploader.stopUploadTransportStats(),oe.debug("P2PChannel disconnected, waiting to reconnect."))})()}hasPendingRemoteMedia(n,i){for(const o of this.pendingRemoteTracks){const{user:c,kind:h}=o;if((n instanceof A2?n.uid:n)===c.uid&&i===h)return!0}return!1}setPendingRemoteMedia(n,i){this.hasPendingRemoteMedia(n,i)||this.pendingRemoteTracks.push({user:n,kind:i})}reEstablish(){var n=this;return L(function*(){if(n.connection)return n.connection.reEstablish()})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),i=this.localTrackMap.get(Dn.LocalVideoTrack),o=this.localTrackMap.get(Dn.LocalAudioTrack),c=n.videoSend.find(P=>P.ssrc===i?.ssrcs[0].ssrcId),h=n.audioSend.find(P=>P.ssrc===o?.ssrcs[0].ssrcId);if(!c||!h)return 1;const g=Ov(this,bi.NeedSignalRTT),p=c?c.rttMs:void 0,v=h?h.rttMs:void 0,_=p&&v?(p+v)/2:p||v,b=100*n.sendPacketLossRate*.7/50+.3*((_&&g?(_+g)/2:_||g)||0)/1500,C=b<.17?1:b<.36?2:b<.59?3:b<.1?4:5,w=i?.track;if(w&&w._encoderConfig&&-1===w._hints.indexOf(Rc.SCREEN_TRACK)){const P=w._encoderConfig.bitrateMax,j=n.bitrate.actualEncoded;if(P&&j){const G=(1e3*P-j)/(1e3*P);return CW[G<.15?0:G<.3?1:G<.45?2:G<.6?3:4][C]}}return C}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let i=0;return Array.from(this.remoteUserMap.entries()).forEach(o=>{let[c]=o;const h=c._audioSSRC,g=c._videoSSRC,p=n.audioRecv.find(j=>j.ssrc===h),v=n.videoRecv.find(j=>j.ssrc===g);if(!p&&!v)return void(i+=1);const _=Ov(this,bi.NeedSignalRTT),y=n.rtt,b=(y&&_?(y+_)/2:y||_)||0,C=p?p.jitterMs:void 0,w=n.recvPacketLossRate;let P=.7*w*100/50+.3*b/1500;C&&(P=.6*w*100/50+.2*b/1500+.2*C/400),i+=P<.1?1:P<.17?2:P<.36?3:P<.59?4:5}),this.remoteUserMap.size>0?Math.round(i/this.remoteUserMap.size):i}muteLocalTrack(n){var i=this;return L(function*(){return new Qn((o,c)=>{i.handleMuteLocalTrack(n,o,c)})})()}filterTobePublishedTracks(n,i,o){const c=[],h=Oc(),g=this.getAllTracks();n=O9(n=n.filter(_=>-1===g.indexOf(_)));let p=!1,v=!1;for(const _ of n){if(_ instanceof Os&&(this.localTrackMap.has(Dn.LocalVideoTrack)||p?new Pe(Te.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(c.push({track:_,type:Dn.LocalVideoTrack}),p=!0),i)){const y=this.getLowVideoTrack(_,o);c.push({track:y,type:Dn.LocalVideoLowTrack})}if(_ instanceof Ha){const y=this.localTrackMap.get(Dn.LocalAudioTrack);if(y){if(!(y.track instanceof ql))throw new Pe(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new Pe(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");y.track.addAudioTrack(_),this.bindLocalAudioTrackEvents(_,!0)}else if(v){const b=c.find(C=>{let{type:w}=C;return w===Dn.LocalAudioTrack});if(!(b.track instanceof ql))throw new Pe(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new Pe(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");b.track.addAudioTrack(_)}else{if(!h.webAudioMediaStreamDest||_ instanceof ql||_._bypassWebAudio)c.push({track:_,type:Dn.LocalAudioTrack});else{const b=new ql;b.addAudioTrack(_),c.push({track:b,type:Dn.LocalAudioTrack})}v=!0}}}return c}filterTobeUnpublishedTracks(n){const i=[],o=this.getAllTracks();n=O9(n=n.filter(c=>-1!==o.indexOf(c)));for(const c of n){if(c instanceof Ha){const h=this.localTrackMap.get(Dn.LocalAudioTrack);if(!h)continue;h.track instanceof ql?(h.track.removeAudioTrack(c),this.unbindLocalAudioTrackEvents(c),0===h.track.trackList.length&&(i.push([Dn.LocalAudioTrack,h]),h.track.close())):i.push([Dn.LocalAudioTrack,h])}if(c instanceof Os){const h=this.localTrackMap.get(Dn.LocalVideoTrack);if(!h)continue;i.push([Dn.LocalVideoTrack,h]);const g=this.localTrackMap.get(Dn.LocalVideoLowTrack);g&&i.push([Dn.LocalVideoLowTrack,g])}}return i}bindLocalTrackEvents(n){n.forEach(i=>{let{track:o,type:c}=i;switch(c){case Dn.LocalVideoTrack:o.addListener(mr.GET_STATS,this.handleGetLocalVideoStats),o.addListener(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(mr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.addListener(mr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.addListener(mr.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.addListener(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Dn.LocalAudioTrack:this.bindLocalAudioTrackEvents(o)}})}bindLocalAudioTrackEvents(n,i){n instanceof ql?n.trackList.forEach(o=>{o.addListener(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(mr.GET_STATS,this.handleGetLocalAudioStats),o.addListener(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(mr.GET_STATS,this.handleGetLocalAudioStats),n.addListener(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),i||n.addListener(mr.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(i=>{let[o,{track:c}]=i;return{track:c,type:o}})),n.forEach(i=>{let{track:o,type:c}=i;switch(c){case Dn.LocalVideoTrack:o.off(mr.GET_STATS,this.handleGetLocalVideoStats),o.off(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(mr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.off(mr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.off(mr.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.off(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Dn.LocalAudioTrack:this.unbindLocalAudioTrackEvents(o)}})}unbindLocalAudioTrackEvents(n){n instanceof ql?n.trackList.forEach(i=>{i.off(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(mr.GET_STATS,this.handleGetLocalAudioStats),i.off(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(mr.GET_STATS,this.handleGetLocalAudioStats),n.off(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(mr.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,i){i instanceof iw&&i.addListener(mr.GET_STATS,o=>{o(this.handleGetRemoteVideoStats(n))}),i instanceof h0&&i.addListener(mr.GET_STATS,o=>{o(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(mr.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[i,o]=n;o.has(ei.AUDIO)&&this.unbindRemoteTrackEvents(i._audioTrack),o.has(ei.VIDEO)&&this.unbindRemoteTrackEvents(i._videoTrack)})}createGatewayPublishMessage(n,i){return n.map((o,c)=>{let h,g,{track:p,type:v}=o;switch(v){case Dn.LocalAudioTrack:h=ss.Audio,g={dtx:p instanceof Hy&&p._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Dn.LocalVideoTrack:h=p._hints.includes(Rc.SCREEN_TRACK)?ss.Screen:ss.High,g=xv(xv({},kV(p)),{},{codec:this.store.codec});break;case Dn.LocalVideoLowTrack:h=ss.Low,g=xv(xv({},kV(p)),{},{codec:this.store.codec})}return{stream_type:h,attributes:g,ssrcs:i[c]}})}createGatewayUnpublishMessage(n){return n.map(i=>{let o,[c,{track:h,ssrcs:g,id:p}]=i;switch(c){case Dn.LocalVideoTrack:o=h._hints.includes(Rc.SCREEN_TRACK)?ss.Screen:ss.High;break;case Dn.LocalAudioTrack:o=ss.Audio;break;case Dn.LocalVideoLowTrack:o=ss.Low}return{stream_type:o,ssrcs:g,mid:p}})}assignLocalTracks(n,i){n.forEach((o,c)=>{let{track:h,type:g}=o;this.localTrackMap.set(g,{track:h,id:i[c].id,ssrcs:i[c].localSSRC})})}withdrawLocalTracks(n){n.forEach(i=>{let[o]=i;this.localTrackMap.delete(o)})}waitTillConnected(){var n=this;return L(function*(){return new Qn((i,o)=>{switch(n.state){case Gl.New:case Gl.Reconnecting:{const c=(h,g)=>g===Gl.Disconnected?(n.off(bi.StateChange,c),void o(new Pe(Te.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):g===Gl.Connected?(n.off(bi.StateChange,c),void i(void 0)):void 0;n.on(bi.StateChange,c);break}case Gl.Connected:i(void 0);break;case Gl.Disconnected:o(new Pe(Te.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})})()}bindConnectionEvents(n){var i=this;n.onConnectionStateChange=function(){var o=L(function*(c){oe.info("[p2pId: ".concat(i.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(c,")")),yo("info",i,"connectionStateChange",c),i.emit(bi.PeerConnectionStateChange,c),"connected"!==c||i.store.keyMetrics.peerConnectionEnd||i.store.peerConnectionEnd(),"failed"===c&&(yield i.requestReconnect())});return function(c){return o.apply(this,arguments)}}(),n.onICEConnectionStateChange=o=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(o,")")),yo("info",this,"iceConnectionStateChange",o),Kt.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:o,tag:sr.TRACER}).onSuccess(),this.emit(bi.IceConnectionStateChange,o)},n.onICETransportStateChange=o=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(o,")")),yo("info",this,"ICETransportStateChange",o)},n.onDTLSTransportStateChange=o=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(o,")")),yo("info",this,"DTLSTransportStateChange",o)},n.onDTLSTransportError=o=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(o,")")),yo("info",this,"DTLSTransportError",o)},n.onFirstAudioDecoded=o=>{var c;const h=Array.from(Iv(c=this.remoteUserMap).call(c)).find(p=>p._audioSSRC===o);var g;h&&(null===(g=h.audioTrack)||void 0===g||g.emit(kg.FIRST_FRAME_DECODED),Kt.firstRemoteFrame(this.store.sessionId,ma.FIRST_AUDIO_DECODE,Po.FIRST_AUDIO_DECODE,{peer:h._uintid,subscribeElapse:gl.measureFromSubscribeStart(this.store.clientId,o),subscribeRequestid:o,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=o=>{var c;const h=Array.from(Iv(c=this.remoteUserMap).call(c)).find(g=>g._audioSSRC===o);h&&Kt.firstRemoteFrame(this.store.sessionId,ma.FIRST_AUDIO_RECEIVED,Po.FIRST_AUDIO_RECEIVED,{peer:h._uintid,subscribeElapse:gl.measureFromSubscribeStart(this.store.clientId,o),subscribeRequestid:o,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(o,c,h)=>{var g;const p=Array.from(Iv(g=this.remoteUserMap).call(g)).find(v=>v._videoSSRC===o);p&&Kt.firstRemoteFrame(this.store.sessionId,ma.FIRST_VIDEO_DECODE,Po.FIRST_VIDEO_DECODE,{peer:p._uintid,videowidth:c,videoheight:h,subscribeElapse:gl.measureFromSubscribeStart(this.store.clientId,o),subscribeRequestid:o,p2pid:this.store.p2pId})},n.onFirstVideoReceived=o=>{var c;const h=Array.from(Iv(c=this.remoteUserMap).call(c)).find(g=>g._videoSSRC===o);h&&Kt.firstRemoteFrame(this.store.sessionId,ma.FIRST_VIDEO_RECEIVED,Po.FIRST_VIDEO_RECEIVED,{peer:h._uintid,subscribeElapse:gl.measureFromSubscribeStart(this.store.clientId,o),subscribeRequestid:o,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(o,c)=>{const h="relay"===o.candidateType;"unknown"!==c.candidateType&&h===("relay"===c.candidateType)||this.emit(bi.ConnectionTypeChange,h),oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Bg(c))," -> ").concat(JSON.stringify(Bg(o)),")")),yo("info",this,"SelectedLocalCandidateChanged","".concat(JSON.stringify(Bg(c))," -> ").concat(JSON.stringify(Bg(o))))},n.onSelectedRemoteCandidateChanged=(o,c)=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Bg(c))," -> ").concat(JSON.stringify(Bg(o)),")")),yo("info",this,"SelectedRemoteCandidateChanged","".concat(JSON.stringify(Bg(c))," -> ").concat(JSON.stringify(Bg(o))))}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0}filterTobeMutedTracks(n){const i=[];if(-1===this.getAllTracks().indexOf(n))return i;const o=this.localTrackMap.get(Dn.LocalAudioTrack);if(n instanceof Ha&&o?.track instanceof ql)return o.track.isActive||i.push([Dn.LocalAudioTrack,o]),i;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return n===g});if(c&&(i.push(c),c[0]===Dn.LocalVideoTrack)){const h=this.localTrackMap.get(Dn.LocalVideoLowTrack);h&&i.push([Dn.LocalVideoLowTrack,h])}return i}filterTobeUnmutedTracks(n){const i=[],o=this.localTrackMap.get(Dn.LocalAudioTrack);if(n instanceof Ha&&o?.track instanceof ql)return o.track.isActive&&i.push([Dn.LocalAudioTrack,o]),i;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return n===g});if(c)if(c[0]===Dn.LocalVideoTrack){i.push(c);const h=this.localTrackMap.get(Dn.LocalVideoLowTrack);h&&i.push([Dn.LocalVideoLowTrack,h])}else i.push(c);return i}createMuteMessage(n){return n.map(i=>{let o,[c,{track:h,ssrcs:g,id:p}]=i;switch(c){case Dn.LocalAudioTrack:o=ss.Audio;break;case Dn.LocalVideoTrack:o=h._hints.includes(Rc.SCREEN_TRACK)?ss.Screen:ss.High;break;case Dn.LocalVideoLowTrack:o=ss.Low}return{stream_type:o,ssrcs:g,mid:p}})}createUnmuteMessage(n){return n.map(i=>{let o,[c,{track:h,ssrcs:g,id:p}]=i;switch(c){case Dn.LocalAudioTrack:o=ss.Audio;break;case Dn.LocalVideoTrack:o=h._hints.includes(Rc.SCREEN_TRACK)?ss.Screen:ss.High;break;case Dn.LocalVideoLowTrack:o=ss.Low}return{stream_type:o,ssrcs:g,mid:p}})}filterTobeUnSubscribedTracks(n,i){const o=[],c=this.remoteUserMap.get(n);if(!c)return o;if(i){const h=c.get(i);if(!h)return o;o.push([n,{kind:i,id:h}])}else Array.from(c.entries()).forEach(h=>{let[g,p]=h;o.push([n,{kind:g,id:p}])});return o}createUnsubscribeMessage(n){const i=[];return n.forEach(o=>{let[c,{kind:h}]=o;switch(h){case ei.VIDEO:return void(c._videoSSRC&&i.push({stream_type:ei.VIDEO,ssrcId:c._videoSSRC}));case ei.AUDIO:return void(c._audioSSRC&&i.push({stream_type:ei.AUDIO,ssrcId:c._audioSSRC}))}}),i}createUnsubscribeAllMessage(n){const i=new Map;return n.forEach(o=>{let[c,{kind:h}]=o;if(i.has(c)){let g=i.get(c);g|=h===ei.VIDEO?Mo.Video:Mo.Audio,i.set(c,g)}else i.set(c,h===ei.VIDEO?Mo.Video:Mo.Audio)}),{users:Array.from(i.entries()).map(o=>{let[c,h]=o;return{stream_id:c.uid,stream_type:h}})}}withdrawRemoteTracks(n){n.forEach(i=>{let[o,{kind:c}]=i;const h=this.remoteUserMap.get(o);h&&(h.delete(c),0===Array.from(h.entries()).length&&this.remoteUserMap.delete(o))})}updateBitrateLimit(n){var i=this;return L(function*(){const o=i.localTrackMap.get(Dn.LocalVideoTrack),c=i.localTrackMap.get(Dn.LocalVideoLowTrack);o&&(yield o.track.setBitrateLimit(n.uplink)),c&&n.low_stream_uplink&&(yield c.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0}))})()}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(n,i){return n.map((o,c)=>{var h;let{stream_type:g}=o;return null===(h=i.find(p=>{let{stream_type:v}=p;return g===v}))||void 0===h?void 0:h.attributes})}tryToUnmuteAudio(n){var i=this;return L(function*(){for(let c=0;c<n.length;c++)if(n[c]instanceof Ha){var o;const h=i.filterTobeUnmutedTracks(n[c]);if(0===h.length)continue;yield null===(o=i.connection)||void 0===o?void 0:o.unmuteLocal(h.map(p=>{let[,{id:v}]=p;return v}));const g=i.createUnmuteMessage(h);return void(yield xo(i,bi.RequestUnmuteLocal,g))}})()}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var i;return!(null===(i=this.connection)||void 0===i||!i.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,i)=>this.emit(bi.RequestUploadStats,n,i),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}requestReconnect(){var n=this;return L(function*(){n.dtlsFailedCount+=1,yield dc(BU(n.dtlsFailedCount,Xo)),n.emit(bi.RequestReconnect)})()}reconnectP2P(){var n=this;return L(function*(){const i=Array.from(n.localTrackMap.entries()),o=n.createGatewayUnpublishMessage(i);Array.from(n.remoteUserMap.entries()),o.length>0&&(yield jd(n,bi.RequestUnpublishForReconnectPC,o)),n.disconnectForReconnect(),n.emit(bi.RequestReconnectPC)})()}canPublishLowStream(){return this.localTrackMap.has(Dn.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof Os)}throwIfTrackTypeNotMatch(n){if(n.filter(i=>i instanceof Os).length>1)throw new Pe(Te.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(i=>i instanceof Ha).length>1&&(n.some(i=>i instanceof Ha&&i._bypassWebAudio)||!Oc().webAudioMediaStreamDest))throw new Pe(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const i of n){if(i instanceof Os&&this.pendingLocalTracks.some(o=>o instanceof Os))throw new Pe(Te.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(i instanceof Ha&&this.pendingLocalTracks.some(o=>o instanceof Ha)&&(!Oc().webAudioMediaStreamDest||i._bypassWebAudio||this.pendingLocalTracks.some(o=>o instanceof Ha&&o._bypassWebAudio)))throw new Pe(Te.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,i){const o=Oc().supportDualStreamEncoding,c=xv(xv({},{width:160,height:120,framerate:15,bitrate:50}),i);let h;h=o?n._mediaStreamTrack.clone():nj(n,c);const g=new Os(h,xv(xv({},o&&{scaleResolutionDownBy:T9(c,n)}),{},{frameRate:c.framerate,bitrateMax:c.bitrate,bitrateMin:c.bitrate}));return g._hints.push(Rc.LOW_STREAM),n.addListener(mr.NEED_CLOSE,()=>{g.close()}),g}globalLock(){var n=this;return L(function*(){return n.mutex.lock("From P2PChannel.globalLock")})()}remoteMediaSsrcChanged(n,i,o){if(!this.connection)return!1;const c=this.remoteUserMap.get(n);if(!c)return!1;const h=c.get(i);if(!h)return!1;const g=this.connection.getRemoteSSRC(h);return void 0!==g&&g!==o}}).prototype,"startP2PConnection",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"startP2PConnection"),Oi.prototype),ir(Oi.prototype,"connect",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"connect"),Oi.prototype),ir(Oi.prototype,"unpublish",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"unpublish"),Oi.prototype),ir(Oi.prototype,"unpublishLowStream",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"unpublishLowStream"),Oi.prototype),ir(Oi.prototype,"subscribe",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"subscribe"),Oi.prototype),ir(Oi.prototype,"massSubscribe",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"massSubscribe"),Oi.prototype),ir(Oi.prototype,"unsubscribe",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"unsubscribe"),Oi.prototype),ir(Oi.prototype,"massUnsubscribe",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"massUnsubscribe"),Oi.prototype),ir(Oi.prototype,"muteRemote",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"muteRemote"),Oi.prototype),ir(Oi.prototype,"unmuteRemote",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"unmuteRemote"),Oi.prototype),ir(Oi.prototype,"hasRemoteMediaWithLock",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"hasRemoteMediaWithLock"),Oi.prototype),ir(Oi.prototype,"disconnectForReconnect",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"disconnectForReconnect"),Oi.prototype),ir(Oi.prototype,"reEstablish",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"reEstablish"),Oi.prototype),ir(Oi.prototype,"updateBitrateLimit",[nd],Object.getOwnPropertyDescriptor(Oi.prototype,"updateBitrateLimit"),Oi.prototype),ij=Oi))||ij;function nd(n,i,o){const c=n[i];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return o.value=L(function*(){const h=this.mutex,g=yield h.lock("From P2PChannel.".concat(i));try{for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return yield c.apply(this,v)}finally{g()}}),o}function Kd(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Ii,G2="function"==typeof Symbol&&Symbol.observable||"@@observable",TB=function(){return Math.random().toString(36).substring(7).split("").join(".")},aj={INIT:"@@redux/INIT"+TB(),REPLACE:"@@redux/REPLACE"+TB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+TB()}};function aG(n){if("object"!=typeof n||null===n)return!1;for(var i=n;null!==Object.getPrototypeOf(i);)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}function cj(n,i,o){var c;if("function"==typeof i&&"function"==typeof o||"function"==typeof o&&"function"==typeof arguments[3])throw new Error(Kd(0));if("function"==typeof i&&void 0===o&&(o=i,i=void 0),void 0!==o){if("function"!=typeof o)throw new Error(Kd(1));return o(cj)(n,i)}if("function"!=typeof n)throw new Error(Kd(2));var h=n,g=i,p=[],v=p,_=!1;function y(){v===p&&(v=p.slice())}function b(){if(_)throw new Error(Kd(3));return g}function C(G){if("function"!=typeof G)throw new Error(Kd(4));if(_)throw new Error(Kd(5));var Z=!0;return y(),v.push(G),function(){if(Z){if(_)throw new Error(Kd(6));Z=!1,y();var ae=v.indexOf(G);v.splice(ae,1),p=null}}}function w(G){if(!aG(G))throw new Error(Kd(7));if(void 0===G.type)throw new Error(Kd(8));if(_)throw new Error(Kd(9));try{_=!0,g=h(g,G)}finally{_=!1}for(var Z=p=v,ae=0;ae<Z.length;ae++)(0,Z[ae])();return G}function P(G){if("function"!=typeof G)throw new Error(Kd(10));h=G,w({type:aj.REPLACE})}function j(){var G,Z=C;return(G={subscribe:function(ae){if("object"!=typeof ae||null===ae)throw new Error(Kd(11));function fe(){ae.next&&ae.next(b())}return fe(),{unsubscribe:Z(fe)}}})[G2]=function(){return this},G}return w({type:aj.INIT}),(c={dispatch:w,subscribe:C,getState:b,replaceReducer:P})[G2]=j,c}function wB(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function ar(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?wB(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):wB(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}!function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS"}(Ii||(Ii={}));class Uh{constructor(i,o,c,h){q(this,"store",void 0),q(this,"reducer",void 0);const g={codec:i,audioCodec:o,mode:c,clientId:h,sessionId:null,p2pId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled"};this.reducer=function(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,v=arguments.length>1?arguments[1]:void 0;switch(v.type){case Ii.SET_SESSION_ID:return ar(ar({},p),{},{sessionId:v.sessionId});case Ii.SET_P2P_ID:return ar(ar({},p),{},{p2pId:v.p2pId});case Ii.SET_UID:return ar(ar({},p),{},{uid:v.uid});case Ii.SET_PUB_ID:return ar(ar({},p),{},{pubId:v.pubId});case Ii.KEY_METRIC_CLIENT_CREATED:return ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{clientCreated:v.metric})});case Ii.KEY_METRIC_JOIN_START:return ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{joinStart:v.metric})});case Ii.AVOID_JOIN_START:return ar(ar({},p),{},{avoidJoinStart:v.avoidJoinStart});case Ii.KEY_METRIC_JOIN_END:return ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{joinEnd:v.metric})});case Ii.KEY_METRIC_REQUEST_AP_START:return ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{requestAPStart:v.metric})});case Ii.KEY_METRIC_REQUEST_AP_END:return ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{requestAPEnd:v.metric})});case Ii.KEY_METRIC_JOIN_GATEWAY_START:return ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{joinGatewayStart:v.metric})});case Ii.KEY_METRIC_JOIN_GATEWAY_END:return ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{joinGatewayEnd:v.metric})});case Ii.KEY_METRIC_PEER_CONNECTION_START:return ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{peerConnectionStart:v.metric})});case Ii.KEY_METRIC_PEER_CONNECTION_END:return ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{peerConnectionEnd:v.metric})});case Ii.KEY_METRIC_PUBLISH:{const _=p.keyMetrics.publish,y=_.findIndex(b=>b.trackId===v.metric.trackId);return-1!==y?(_[y]=ar(ar({},_[y]),v.metric),ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{publish:[..._]})})):ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{publish:[...p.keyMetrics.publish,v.metric]})})}case Ii.KEY_METRIC_SUBSCRIBE:{const _=p.keyMetrics.subscribe,y=_.findIndex(b=>b.userId===v.metric.userId&&b.type===v.metric.type);return-1!==y?(_[y]=ar(ar({},_[y]),v.metric),ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{subscribe:[..._]})})):ar(ar({},p),{},{keyMetrics:ar(ar({},p.keyMetrics),{},{subscribe:[...p.keyMetrics.subscribe,v.metric]})})}case Ii.SET_CLOUD_PROXY_SERVER_MODE:return p.cloudProxyServerMode=v.mode,p;case Ii.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof v.index?p.joinChannelServiceRecords=[...p.joinChannelServiceRecords,v.record]:(p.joinChannelServiceRecords[v.index]=ar(ar({},p.joinChannelServiceRecords[v.index]),v.record),p.joinChannelServiceRecords=[...p.joinChannelServiceRecords]),p;case Ii.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return p.joinChannelServiceRecords=[],p;case Ii.RESET_KEY_METRICS:return p.keyMetrics={publish:[],subscribe:[]},p;default:return p}},this.store=cj(this.reducer)}set sessionId(i){this.store.dispatch({type:Ii.SET_SESSION_ID,sessionId:i})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get audioCodec(){return this.store.getState().audioCodec}get clientId(){return this.store.getState().clientId}set p2pId(i){this.store.dispatch({type:Ii.SET_P2P_ID,p2pId:i})}get p2pId(){return this.store.getState().p2pId}set uid(i){this.store.dispatch({type:Ii.SET_UID,uid:i})}get uid(){return this.store.getState().uid}set pubId(i){this.store.dispatch({type:Ii.SET_PUB_ID,pubId:i})}get pubId(){return this.store.getState().pubId}set cloudProxyServerMode(i){this.store.dispatch({type:Ii.SET_CLOUD_PROXY_SERVER_MODE,mode:i})}get cloudProxyServerMode(){return this.store.getState().cloudProxyServerMode}clientCreated(){this.store.dispatch({type:Ii.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:Ii.KEY_METRIC_JOIN_START,metric:performance.now()})}get avoidJoinStart(){return this.store.getState().avoidJoinStart}set avoidJoinStart(i){this.store.dispatch({type:Ii.AVOID_JOIN_START,avoidJoinStart:i})}joinEnd(){this.store.dispatch({type:Ii.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:Ii.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:Ii.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:Ii.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:Ii.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:Ii.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:Ii.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(i,o,c,h){this.store.dispatch({type:Ii.KEY_METRIC_PUBLISH,metric:ar(ar({trackId:i,type:o},c&&{publishStart:c}),h&&{publishEnd:h})})}subscribe(i,o,c,h,g){this.store.dispatch({type:Ii.KEY_METRIC_SUBSCRIBE,metric:ar(ar(ar({userId:i,type:o},c&&{subscribeStart:c}),h&&{subscribeEnd:h}),g&&{firstFrame:g})})}massSubscribe(i,o,c,h){i.forEach(g=>{this.store.dispatch({type:Ii.KEY_METRIC_SUBSCRIBE,metric:ar(ar(ar({userId:g.userId,type:g.type},o&&{subscribeStart:o}),c&&{subscribeEnd:c}),h&&{firstFrame:h})})})}get keyMetrics(){return this.store.getState().keyMetrics}recordJoinChannelService(i,o){"gateway"===i.service&&Array.isArray(i.urls)&&(i.urls=i.urls.map(c=>c.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return"number"!=typeof o?(this.store.dispatch({type:Ii.RECORD_JOIN_CHANNEL_SERVICE,record:ar(ar({},i),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.store.getState().joinChannelServiceRecords.length-1):(o<0||o>=this.store.getState().joinChannelServiceRecords.length||this.store.dispatch({type:Ii.RECORD_JOIN_CHANNEL_SERVICE,record:i,index:o}),o)}catch{return 0}}resetJoinChannelServiceRecords(){this.store.dispatch({type:Ii.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.store.dispatch({type:Ii.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.store.getState().joinChannelServiceRecords}catch{return[]}}}let p0;const W2=()=>void 0!==window.isSecureContext;class cG{constructor(i,o){q(this,"time",void 0),q(this,"sequence",void 0),q(this,"name",void 0),q(this,"elapse",void 0),this.name=i,this.time=performance.now(),this.sequence=$M[o].indexOf(i)}setElapse(i){this.elapse=i}}const uG=new Map;class RB{constructor(i,o){q(this,"records",[]),q(this,"_id",void 0),q(this,"_group",void 0),q(this,"_localTimeStamp",void 0),q(this,"_performanceTimeStamp",void 0),this._id=i,this._group=o,this._localTimeStamp=Date.now(),this._performanceTimeStamp=performance.now()}checkPoint(i){const o=new cG(i,this._group);-1===o.sequence&&oe.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(o);const c=this.records.find(h=>h.sequence===o.sequence-1);c&&o.setElapse(o.time-c.time)}getRecord(i){return this.records.find(o=>o&&o.name===i)}resetRecords(){this.records.length=0}}function K2(n){let i={};e:for(;!sw(n);){let o=Vp(n);switch(o>>>3){case 0:break e;case 1:i.requestId=Y2(n,Vp(n));break;case 2:i.requestType=Vp(n)>>>0;break;case 3:i.scorePorn=NB(n);break;case 4:i.scoreSexy=NB(n);break;case 5:i.scoreNeutral=NB(n);break;case 6:i.requestScene=Vp(n)>>>0;break;case 7:i.scene=Vp(n)>>>0;break;default:OB(n,7&o)}}return i}function hG(n,i){let o=n.service;void 0!==o&&(Ai(i,8),Ai(i,o));let c=n.vendor;void 0!==c&&(Ai(i,16),Ai(i,c));let h=n.token;void 0!==h&&(Ai(i,26),om(i,h));let g=n.callbackUrl;void 0!==g&&(Ai(i,34),om(i,g))}function uj(n){let i=Vp(n),o=n.limit;return n.limit=n.offset+i,o}function OB(n,i){switch(i){case 0:for(;128&pj(n););break;case 2:z2(n,Vp(n));break;case 5:z2(n,4);break;case 1:z2(n,8);break;default:throw new Error("Unimplemented type: "+i)}}let lj=new Float32Array(1);new Uint8Array(lj.buffer);let rd=new Float64Array(1),Aa=new Uint8Array(rd.buffer);function f0(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let dj=[];function DB(){const n=dj.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function pG(n){dj.push(n)}function z2(n,i){if(n.offset+i>n.limit)throw new Error("Skip past limit");n.offset+=i}function sw(n){return n.offset>=n.limit}function m0(n,i){let o=n.bytes,c=n.offset,h=n.limit,g=c+i;if(g>o.length){let p=new Uint8Array(2*g);p.set(o),n.bytes=p}return n.offset=g,g>h&&(n.limit=g),c}function kB(n,i){let o=n.offset;if(o+i>n.limit)throw new Error("Read past limit");return n.offset+=i,o}function Y2(n,i){let o=kB(n,i),c=String.fromCharCode,h=n.bytes,g="\ufffd",p="";for(let v=0;v<i;v++){let _,y,b,C,w=h[v+o];0==(128&w)?p+=c(w):192==(224&w)?v+1>=i?p+=g:(_=h[v+o+1],128!=(192&_)?p+=g:(C=(31&w)<<6|63&_,C<128?p+=g:(p+=c(C),v++))):224==(240&w)?v+2>=i?p+=g:(_=h[v+o+1],y=h[v+o+2],32896!=(49344&(_|y<<8))?p+=g:(C=(15&w)<<12|(63&_)<<6|63&y,C<2048||C>=55296&&C<=57343?p+=g:(p+=c(C),v+=2))):240==(248&w)?v+3>=i?p+=g:(_=h[v+o+1],y=h[v+o+2],b=h[v+o+3],8421504!=(12632256&(_|y<<8|b<<16))?p+=g:(C=(7&w)<<18|(63&_)<<12|(63&y)<<6|63&b,C<65536||C>1114111?p+=g:(C-=65536,p+=c(55296+(C>>10),56320+(1023&C)),v+=3))):p+=g}return p}function om(n,i){let o=i.length,c=0;for(let p=0;p<o;p++){let v=i.charCodeAt(p);v>=55296&&v<=56319&&p+1<o&&(v=(v<<10)+i.charCodeAt(++p)-56613888),c+=v<128?1:v<2048?2:v<65536?3:4}Ai(n,c);let h=m0(n,c),g=n.bytes;for(let p=0;p<o;p++){let v=i.charCodeAt(p);v>=55296&&v<=56319&&p+1<o&&(v=(v<<10)+i.charCodeAt(++p)-56613888),v<128?g[h++]=v:(v<2048?g[h++]=v>>6&31|192:(v<65536?g[h++]=v>>12&15|224:(g[h++]=v>>18&7|240,g[h++]=v>>12&63|128),g[h++]=v>>6&63|128),g[h++]=63&v|128)}}function hj(n,i){let o=m0(n,i.limit),c=n.bytes,h=i.bytes;for(let g=0,p=i.limit;g<p;g++)c[g+o]=h[g]}function pj(n){return n.bytes[kB(n,1)]}function fj(n,i){let o=m0(n,1);n.bytes[o]=i}function NB(n){let i=kB(n,8),o=n.bytes;return Aa[0]=o[i++],Aa[1]=o[i++],Aa[2]=o[i++],Aa[3]=o[i++],Aa[4]=o[i++],Aa[5]=o[i++],Aa[6]=o[i++],Aa[7]=o[i++],rd[0]}function PB(n,i){let o=m0(n,8),c=n.bytes;rd[0]=i,c[o++]=Aa[0],c[o++]=Aa[1],c[o++]=Aa[2],c[o++]=Aa[3],c[o++]=Aa[4],c[o++]=Aa[5],c[o++]=Aa[6],c[o++]=Aa[7]}function Vp(n){let i,o=0,c=0;do{i=pj(n),o<32&&(c|=(127&i)<<o),o+=7}while(128&i);return c}function Ai(n,i){for(i>>>=0;i>=128;)fj(n,127&i|128),i>>>=7;fj(n,i)}function Kg(n,i){let o=i.low>>>0,c=(i.low>>>28|i.high<<4)>>>0,h=i.high>>>24,g=0===h?0===c?o<16384?o<128?1:2:o<1<<21?3:4:c<16384?c<128?5:6:c<1<<21?7:8:h<128?9:10,p=m0(n,g),v=n.bytes;switch(g){case 10:v[p+9]=h>>>7&1;case 9:v[p+8]=9!==g?128|h:127&h;case 8:v[p+7]=8!==g?c>>>21|128:c>>>21&127;case 7:v[p+6]=7!==g?c>>>14|128:c>>>14&127;case 6:v[p+5]=6!==g?c>>>7|128:c>>>7&127;case 5:v[p+4]=5!==g?128|c:127&c;case 4:v[p+3]=4!==g?o>>>21|128:o>>>21&127;case 3:v[p+2]=3!==g?o>>>14|128:o>>>14&127;case 2:v[p+1]=2!==g?o>>>7|128:o>>>7&127;case 1:v[p]=1!==g?128|o:127&o}}var mj={};Object.defineProperty(mj,"__esModule",{value:!0});var MB=function(){function n(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return n.hashStr=function(i,o){return void 0===o&&(o=!1),this.onePassHasher.start().appendStr(i).end(o)},n.hashAsciiStr=function(i,o){return void 0===o&&(o=!1),this.onePassHasher.start().appendAsciiStr(i).end(o)},n._hex=function(i){var o,c,h,g,p=n.hexChars,v=n.hexOut;for(g=0;g<4;g+=1)for(c=8*g,o=i[g],h=0;h<8;h+=2)v[c+1+h]=p.charAt(15&o),v[c+0+h]=p.charAt(15&(o>>>=4)),o>>>=4;return v.join("")},n._md5cycle=function(i,o){var c=i[0],h=i[1],g=i[2],p=i[3];h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&g|~h&p)+o[0]-680876936|0)<<7|c>>>25)+h|0)&h|~c&g)+o[1]-389564586|0)<<12|p>>>20)+c|0)&c|~p&h)+o[2]+606105819|0)<<17|g>>>15)+p|0)&p|~g&c)+o[3]-1044525330|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&g|~h&p)+o[4]-176418897|0)<<7|c>>>25)+h|0)&h|~c&g)+o[5]+1200080426|0)<<12|p>>>20)+c|0)&c|~p&h)+o[6]-1473231341|0)<<17|g>>>15)+p|0)&p|~g&c)+o[7]-45705983|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&g|~h&p)+o[8]+1770035416|0)<<7|c>>>25)+h|0)&h|~c&g)+o[9]-1958414417|0)<<12|p>>>20)+c|0)&c|~p&h)+o[10]-42063|0)<<17|g>>>15)+p|0)&p|~g&c)+o[11]-1990404162|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&g|~h&p)+o[12]+1804603682|0)<<7|c>>>25)+h|0)&h|~c&g)+o[13]-40341101|0)<<12|p>>>20)+c|0)&c|~p&h)+o[14]-1502002290|0)<<17|g>>>15)+p|0)&p|~g&c)+o[15]+1236535329|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&p|g&~p)+o[1]-165796510|0)<<5|c>>>27)+h|0)&g|h&~g)+o[6]-1069501632|0)<<9|p>>>23)+c|0)&h|c&~h)+o[11]+643717713|0)<<14|g>>>18)+p|0)&c|p&~c)+o[0]-373897302|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&p|g&~p)+o[5]-701558691|0)<<5|c>>>27)+h|0)&g|h&~g)+o[10]+38016083|0)<<9|p>>>23)+c|0)&h|c&~h)+o[15]-660478335|0)<<14|g>>>18)+p|0)&c|p&~c)+o[4]-405537848|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&p|g&~p)+o[9]+568446438|0)<<5|c>>>27)+h|0)&g|h&~g)+o[14]-1019803690|0)<<9|p>>>23)+c|0)&h|c&~h)+o[3]-187363961|0)<<14|g>>>18)+p|0)&c|p&~c)+o[8]+1163531501|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&p|g&~p)+o[13]-1444681467|0)<<5|c>>>27)+h|0)&g|h&~g)+o[2]-51403784|0)<<9|p>>>23)+c|0)&h|c&~h)+o[7]+1735328473|0)<<14|g>>>18)+p|0)&c|p&~c)+o[12]-1926607734|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h^g^p)+o[5]-378558|0)<<4|c>>>28)+h|0)^h^g)+o[8]-2022574463|0)<<11|p>>>21)+c|0)^c^h)+o[11]+1839030562|0)<<16|g>>>16)+p|0)^p^c)+o[14]-35309556|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h^g^p)+o[1]-1530992060|0)<<4|c>>>28)+h|0)^h^g)+o[4]+1272893353|0)<<11|p>>>21)+c|0)^c^h)+o[7]-155497632|0)<<16|g>>>16)+p|0)^p^c)+o[10]-1094730640|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h^g^p)+o[13]+681279174|0)<<4|c>>>28)+h|0)^h^g)+o[0]-358537222|0)<<11|p>>>21)+c|0)^c^h)+o[3]-722521979|0)<<16|g>>>16)+p|0)^p^c)+o[6]+76029189|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h^g^p)+o[9]-640364487|0)<<4|c>>>28)+h|0)^h^g)+o[12]-421815835|0)<<11|p>>>21)+c|0)^c^h)+o[15]+530742520|0)<<16|g>>>16)+p|0)^p^c)+o[2]-995338651|0)<<23|h>>>9)+g|0,h=((h+=((p=((p+=(h^((c=((c+=(g^(h|~p))+o[0]-198630844|0)<<6|c>>>26)+h|0)|~g))+o[7]+1126891415|0)<<10|p>>>22)+c|0)^((g=((g+=(c^(p|~h))+o[14]-1416354905|0)<<15|g>>>17)+p|0)|~c))+o[5]-57434055|0)<<21|h>>>11)+g|0,h=((h+=((p=((p+=(h^((c=((c+=(g^(h|~p))+o[12]+1700485571|0)<<6|c>>>26)+h|0)|~g))+o[3]-1894986606|0)<<10|p>>>22)+c|0)^((g=((g+=(c^(p|~h))+o[10]-1051523|0)<<15|g>>>17)+p|0)|~c))+o[1]-2054922799|0)<<21|h>>>11)+g|0,h=((h+=((p=((p+=(h^((c=((c+=(g^(h|~p))+o[8]+1873313359|0)<<6|c>>>26)+h|0)|~g))+o[15]-30611744|0)<<10|p>>>22)+c|0)^((g=((g+=(c^(p|~h))+o[6]-1560198380|0)<<15|g>>>17)+p|0)|~c))+o[13]+1309151649|0)<<21|h>>>11)+g|0,h=((h+=((p=((p+=(h^((c=((c+=(g^(h|~p))+o[4]-145523070|0)<<6|c>>>26)+h|0)|~g))+o[11]-1120210379|0)<<10|p>>>22)+c|0)^((g=((g+=(c^(p|~h))+o[2]+718787259|0)<<15|g>>>17)+p|0)|~c))+o[9]-343485551|0)<<21|h>>>11)+g|0,i[0]=c+i[0]|0,i[1]=h+i[1]|0,i[2]=g+i[2]|0,i[3]=p+i[3]|0},n.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(n.stateIdentity),this},n.prototype.appendStr=function(i){var o,c,h=this._buffer8,g=this._buffer32,p=this._bufferLength;for(c=0;c<i.length;c+=1){if((o=i.charCodeAt(c))<128)h[p++]=o;else if(o<2048)h[p++]=192+(o>>>6),h[p++]=63&o|128;else if(o<55296||o>56319)h[p++]=224+(o>>>12),h[p++]=o>>>6&63|128,h[p++]=63&o|128;else{if((o=1024*(o-55296)+(i.charCodeAt(++c)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");h[p++]=240+(o>>>18),h[p++]=o>>>12&63|128,h[p++]=o>>>6&63|128,h[p++]=63&o|128}p>=64&&(this._dataLength+=64,n._md5cycle(this._state,g),p-=64,g[0]=g[16])}return this._bufferLength=p,this},n.prototype.appendAsciiStr=function(i){for(var o,c=this._buffer8,h=this._buffer32,g=this._bufferLength,p=0;;){for(o=Math.min(i.length-p,64-g);o--;)c[g++]=i.charCodeAt(p++);if(g<64)break;this._dataLength+=64,n._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},n.prototype.appendByteArray=function(i){for(var o,c=this._buffer8,h=this._buffer32,g=this._bufferLength,p=0;;){for(o=Math.min(i.length-p,64-g);o--;)c[g++]=i[p++];if(g<64)break;this._dataLength+=64,n._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},n.prototype.getState=function(){var i=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[i[0],i[1],i[2],i[3]]}},n.prototype.setState=function(i){var o,c=i.buffer,h=i.state,g=this._state;for(this._dataLength=i.length,this._bufferLength=i.buflen,g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3],o=0;o<c.length;o+=1)this._buffer8[o]=c.charCodeAt(o)},n.prototype.end=function(i){void 0===i&&(i=!1);var o=this._bufferLength,c=this._buffer8,h=this._buffer32,g=1+(o>>2);this._dataLength+=o;var p=8*this._dataLength;if(c[o]=128,c[o+1]=c[o+2]=c[o+3]=0,h.set(n.buffer32Identity.subarray(g),g),o>55&&(n._md5cycle(this._state,h),h.set(n.buffer32Identity)),p<=4294967295)h[14]=p;else{var v=p.toString(16).match(/(.*?)(.{0,8})$/);if(null===v)return;var _=parseInt(v[2],16),y=parseInt(v[1],16)||0;h[14]=_,h[15]=y}return n._md5cycle(this._state,h),i?this._state:n._hex(this._state)},n.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),n.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n.hexChars="0123456789abcdef",n.hexOut=[],n.onePassHasher=new n,n}(),fG=mj.Md5=MB;if("5d41402abc4b2a76b9719d911017c592"!==MB.hashStr("hello"))throw new Error("Md5 self test failed.");const mG=function(){var n=L(function*(i,o,c){return yield(h=L(function*(g,p,v){const y=new Uint8Array(fG.hashStr(""+p+v,!0).buffer).slice(0,16),b=y.slice(0,12),C=yield window.crypto.subtle.importKey("raw",y,"AES-GCM",!0,["encrypt"]);return new Uint8Array(yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:b},C,g))}),function(g,p,v){return h.apply(this,arguments)})(i.buffer,o,c);var h});return function(o,c,h){return n.apply(this,arguments)}}();function gj(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}const gG=new Map([["moderation",1],["supervise",2],["all",3]]);class q2 extends is{get connectionState(){return this._connectionState}set connectionState(i){if(this._connectionState===i)return;const o=this._connectionState;this._connectionState=i,this.emit($o.CONNECTION_STATE_CHANGE,o,i)}get quality(){return this._quality}set quality(i){this._quality=i>1?1:i<.1?.1:i,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(i){super(),q(this,"name","AgoraRTCVideoContentInspect"),q(this,"_connectionState",Nu.CONNECTING),q(this,"_innerConnectionState",void 0),q(this,"sequence",0),q(this,"inspectStartTime",void 0),q(this,"workerManagerConnection",void 0),q(this,"workerConnection",void 0),q(this,"workerMessageLengthLimit",void 0),q(this,"inspectIntervalMinimum",void 0),q(this,"qualityRatio",void 0),q(this,"_connectInfo",void 0),q(this,"_cancelTokenSource",ul.CancelToken.source()),q(this,"_retryConfig",void 0),q(this,"wmSequence",0),q(this,"inspectInterval",void 0),q(this,"inspectTimer",null),q(this,"ossFilePrefix",void 0),q(this,"extraInfo",void 0),q(this,"inspectType","all"),q(this,"_quality",1),q(this,"qualityTimer",null),q(this,"_inspectId",void 0),q(this,"_needWorkUrlOnly",!1),q(this,"inspectImage",()=>{if(this.connectionState!==Nu.CONNECTED)throw new Pe(Te.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{if(this.connectionState!==Nu.CONNECTED)return oe.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState),void xn("debug",this,"Inspect State is not connected , ".concat(this.connectionState));this.requestToInspectImage()},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=cs(5,"inspect-"),this.workerMessageLengthLimit=Bt("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=Bt("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=Bt("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=i.interval,this.ossFilePrefix=i.ossFilePrefix,this.extraInfo=i.extraInfo,this.inspectType=i.inspectType||"all",this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new Yy("worker-manager-"+this._inspectId,Xo),this.on($o.STATE_CHANGE,(o,c)=>{this._innerConnectionState=o,oe.debug("[".concat(this._inspectId,"] Inspect operation :").concat(hl[o]," ").concat(c||"")),Bd("debug",["Inspect",this._inspectId],$o.STATE_CHANGE,"".concat(hl[o]," ").concat(c||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new Yy("worker-"+this._inspectId,Xo),this.handleWorkerEvents()}init(i,o){var c=this;return L(function*(){c.emit($o.STATE_CHANGE,hl.CONNECT_AP),c._connectInfo=i;const h=c._cancelTokenSource.token;return c._retryConfig=o,new Qn((g,p)=>{c.on($o.CONNECTION_STATE_CHANGE,(v,_)=>{_===Nu.CONNECTED&&g()}),c.requestAP(i,h,o).then(v=>{c.connectWorkerManager(v)}).catch(v=>{p(v)})})})()}requestAP(i,o,c){var h=this;return L(function*(){const g=Bt("WEBCS_DOMAIN").map(_=>"https://".concat(_,"/api/v1")),p=yield function(_,y,b,C){let{appId:w,areaCode:P,cname:j,sid:G,token:Z,uid:ae}=y;VL++;const fe="image_moderation_api",be={service_name:fe,json_body:JSON.stringify({appId:w,areaCode:P,cname:j,command:"allocateEdge",requestId:VL,seq:VL,sid:G,token:Z,ts:Date.now(),uid:ae+""})};let Ce,it,wt=_[0];return Hl(L(function*(){Ce=Date.now();const bt=yield Vd(wt,{data:be,cancelToken:b,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(it=Date.now()-Ce,0!==bt.code){const un=new Pe(Te.UNEXPECTED_RESPONSE,"image inspect ap error, code"+bt.code,{retry:!0,responseTime:it});throw oe.error(un.toString()),Yt("error",["AjaxAPI"],"requestImageInspectAP",void 0,un.toString()),un}const Pt=JSON.parse(bt.json_body);if(200!==Pt.code){const un=new Pe(Te.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Pt.code,", reason: ").concat(Pt.reason),{code:Pt.code,responseTime:it});throw oe.error(un.toString()),Yt("error",["AjaxAPI"],"requestImageInspectAP",void 0,un.toString()),un}if(!Pt.servers||!Array.isArray(Pt.servers)||0===Pt.servers.length){const un=new Pe(Te.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Pt.code,responseTime:it});throw oe.error(un.toString()),Yt("error",["AjaxAPI"],"requestImageInspectAP",void 0,un.toString()),un}const En=Bt("VIDEO_INSPECT_WORKER_MANAGER_HOST"),pn=Bt("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Pt.servers.map(un=>{let{address:yt,wss:Ge}=un;if(yt&&Ge)return"wss://".concat(yt.replace(/\./g,"-"),".").concat(En,":").concat(pn||Ge)}).filter(un=>!!un),workerToken:Pt.workerToken,vid:Pt.vid,responseTime:it}}),(bt,Pt)=>(Kt.apworkerEvent(G,{success:!0,sc:200,serviceName:fe,responseDetail:JSON.stringify(bt.addressList),firstSuccess:0===Pt,responseTime:it,serverIp:_[Pt%_.length]}),!1),(bt,Pt)=>(Kt.apworkerEvent(G,{success:!1,sc:bt.data&&bt.data.code||200,serviceName:fe,responseTime:it,serverIp:_[Pt%_.length]}),!!(bt.code!==Te.OPERATION_ABORTED&&bt.code!==Te.UNEXPECTED_RESPONSE||bt.data&&bt.data.retry)&&(wt=_[(Pt+1)%_.length],!0)),C)}(g,i,o,c);h.emit($o.STATE_CHANGE,hl.AP_CONNECTED);const{addressList:v}=p;return h.wmSequence++,v})()}connectWorkerManager(i){var o=arguments,c=this;return L(function*(){c._needWorkUrlOnly=o.length>1&&void 0!==o[1]&&o[1],c.emit($o.STATE_CHANGE,hl.CONNECT_WORKER_MANAGER),yield c.workerManagerConnection.init(i,1e4)})()}connectWorker(i){var o=this;return L(function*(){yield o.workerConnection.init([i])})()}handleWorkerManagerEvents(){var i=this;this.workerManagerConnection.on(Mr.CONNECTED,L(function*(){i.emit($o.STATE_CHANGE,hl.WORKER_MANAGER_CONNECTED,i.workerManagerConnection.url),i.workerManagerConnection.sendMessage({appId:i._connectInfo.appId,cname:i._connectInfo.cname,uid:i._connectInfo.uid+"",sdkVersion:"4.12.1",sid:i._connectInfo.sid,seq:i.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(Mr.CLOSED,()=>{this._innerConnectionState<hl.GET_WORKER_MANAGER_RESPONSE&&(oe.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker")),Bd("debug",["Inspect",this._inspectId],"workerManagerConnectionClosed"))}),this.workerManagerConnection.on(Mr.FAILED,()=>{this._innerConnectionState<hl.GET_WORKER_MANAGER_RESPONSE&&(oe.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker")),Bd("debug",["Inspect",this._inspectId],"workerManagerConnectionFailed"))}),this.workerManagerConnection.on(Mr.RECONNECTING,()=>{this._innerConnectionState<hl.GET_WORKER_MANAGER_RESPONSE&&(oe.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker")),Bd("debug",["Inspect",this._inspectId],"workerManagerConnectionReconnecting"))}),this.workerManagerConnection.on(Mr.ON_MESSAGE,function(){var o=L(function*(c){i.emit($o.STATE_CHANGE,hl.GET_WORKER_MANAGER_RESPONSE);const h=i.workerManagerConnection.url;i.workerManagerConnection.close();const g=JSON.parse(c.data);if(200!==g.code)throw oe.error("[".concat(i._inspectId,"] Unexpected code ").concat(g.code," from worker manager")),xn("error",i,"Unexpected code ".concat(g.code," from worker manager")),new Pe(Te.UNEXPECTED_RESPONSE,"response code of worker is unexpected",g);if(!(g.serverResponse&&g.serverResponse.portWss&&h))throw oe.error("[".concat(i._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(g))),xn("error",i,"Unexpected content from worker manager : "+JSON.stringify(g)),new Pe(Te.UNEXPECTED_RESPONSE,"response content of worker is unexpected",g);{const p=Bt("VIDEO_INSPECT_WORKER_PORT")||g.serverResponse.portWss,v=h.replace(/:\d+\/?$/,":".concat(p));i.emit($o.STATE_CHANGE,hl.CONNECT_WORKER,v),i._needWorkUrlOnly?i.emit($o.REQUEST_NEW_WORKER_URL,v):yield i.connectWorker(v)}});return function(c){return o.apply(this,arguments)}}()),this.workerManagerConnection.on(Mr.WILL_RECONNECT,(o,c)=>{c(o)}),this.workerManagerConnection.on(Mr.REQUEST_NEW_URLS,(o,c)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(o).catch(c)})}handleWorkerEvents(){var i=this;this.workerConnection.on(Mr.CONNECTED,L(function*(){i.emit($o.STATE_CHANGE,hl.WORKER_CONNECTED,i.workerConnection.url),i.connectionState=Nu.CONNECTED})),this.workerConnection.on(Mr.ON_MESSAGE,function(){var o=L(function*(c){if(c.data instanceof ArrayBuffer){const g=function dG(n){return function(o){let c={};e:for(;!sw(o);){let h=Vp(o);switch(h>>>3){case 0:break e;case 1:c.code=Vp(o);break;case 2:c.msg=Y2(o,Vp(o));break;case 3:{let g=uj(o);c.data=K2(o),o.limit=g;break}default:OB(o,7&h)}}return c}({bytes:i=n,offset:0,limit:i.length});var i}(new Uint8Array(c.data));if(Bt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&oe.debug("[".concat(i._inspectId,"] Response message for worker of inspect content "),JSON.stringify(g)),200===g.code){if("supervise"===i.inspectType)return void i.emit($o.INSPECT_RESULT,void 0,void 0);if(g.data&&g.data.scorePorn&&g.data.scoreSexy&&g.data.scoreNeutral){var h;const p={porn:g.data.scorePorn,sexy:g.data.scoreSexy,neutral:g.data.scoreNeutral},v=Da(h=Object.keys(p)).call(h,(y,b)=>p[y]>p[b]?y:b,"porn"),_=Object.keys(p).find(y=>y===v);i.emit($o.INSPECT_RESULT,_)}else i.emit($o.INSPECT_RESULT,void 0,new Pe(Te.UNEXPECTED_RESPONSE,g.code+"","There is an unexpected data on message"))}else i.emit($o.INSPECT_RESULT,void 0,new Pe(Te.UNEXPECTED_RESPONSE,g.code+"",g.msg))}else oe.error("[".concat(i._inspectId,"] Unexpected message type from worker")),xn("error",i,"Unexpected message type from worker"),i.emit($o.INSPECT_RESULT,void 0,new Pe(Te.UNEXPECTED_RESPONSE,"invalid worker message type"))});return function(c){return o.apply(this,arguments)}}()),this.workerConnection.on(Mr.CLOSED,()=>{this.connectionState=Nu.CLOSED}),this.workerConnection.on(Mr.FAILED,()=>{this.connectionState=Nu.CLOSED}),this.workerConnection.on(Mr.RECONNECTING,()=>{this.connectionState=this.connectionState===Nu.CONNECTED?Nu.RECONNECTING:Nu.CONNECTING}),this.workerConnection.on(Mr.WILL_RECONNECT,(o,c)=>{"recover"===o&&c(o),c("tryNext")}),this.workerConnection.on(Mr.REQUEST_NEW_URLS,(o,c)=>{this.workerManagerConnection.close(),this.once($o.REQUEST_NEW_WORKER_URL,h=>{o([h])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(h=>{this.connectWorkerManager(h,!0)}).catch(h=>{c(h)})})}static intToLong(i){return{low:i|=0,high:i>>31,unsigned:i>=0}}requestToInspectImage(){var i=this;return L(function*(){i.sequence++;const o=Ov(i,$o.CLIENT_LOCAL_VIDEO_TRACK),c={appId:i._connectInfo.appId,cname:i._connectInfo.cname,cid:i._connectInfo.cid,sid:i._connectInfo.sid,uid:i._connectInfo.uid,vid:i._connectInfo.vid};if(o){if(!o.isPlaying)return void i.emit($o.INSPECT_RESULT,void 0,new Pe(Te.INVALID_OPERATION,"Only the track being played can be inspected"));const h=yield i.generateRequestData(o,c);i.workerConnection.sendMessage(h,!0,!0)}else i.emit($o.INSPECT_RESULT,void 0,new Pe(Te.INVALID_OPERATION,"Only the track being published can be inspected"))})()}generateRequestData(i,o){var c=this;return L(function*(){let{appId:h,cname:g,cid:p,vid:v,sid:_,uid:y}=o;const b=Date.now(),C=yield i.getCurrentFrameImage("image/jpeg",c.quality),w=yield mG(C,h,g),P=c.sequence+"-"+p+"-"+y+"-"+b+"-"+cs(12,""),j={appId:h,cid:p,cname:g,deviceId:"",elapse:q2.intToLong(Number(b-c.inspectStartTime)),fileSize:w.byteLength,jpgEncryption:2,height:C.height,width:C.width,jpg:w,networkType:6,osType:7,requestId:P,sdkVersion:"4.12.1",sequence:c.sequence,sid:_,timestamp:q2.intToLong(b),uid:y,vid:v,service:gG.get(c.inspectType)||3,callbackData:c.extraInfo,ossFilePrefix:c.ossFilePrefix};void 0===c.extraInfo&&delete j.callbackData,void 0===c.ossFilePrefix&&delete j.ossFilePrefix;const G=function lG(n){let i=DB();return function(o,c){let h=o.appId;void 0!==h&&(Ai(c,10),om(c,h));let g=o.cid;void 0!==g&&(Ai(c,16),Ai(c,g));let p=o.cname;void 0!==p&&(Ai(c,26),om(c,p));let v=o.deviceId;void 0!==v&&(Ai(c,34),om(c,v));let _=o.elapse;void 0!==_&&(Ai(c,40),Kg(c,_));let y=o.fileSize;void 0!==y&&(Ai(c,48),Kg(c,f0(y)));let b=o.height;void 0!==b&&(Ai(c,56),Kg(c,f0(b)));let C=o.jpg;void 0!==C&&(Ai(c,66),Ai(c,C.length),function(bn,Je){let at=m0(bn,Je.length);bn.bytes.set(Je,at)}(c,C));let w=o.networkType;void 0!==w&&(Ai(c,72),Kg(c,f0(w)));let P=o.osType;void 0!==P&&(Ai(c,80),Kg(c,f0(P)));let j=o.requestId;void 0!==j&&(Ai(c,90),om(c,j));let G=o.sdkVersion;void 0!==G&&(Ai(c,98),om(c,G));let Z=o.sequence;void 0!==Z&&(Ai(c,104),Kg(c,f0(Z)));let ae=o.sid;void 0!==ae&&(Ai(c,114),om(c,ae));let fe=o.timestamp;void 0!==fe&&(Ai(c,120),Kg(c,fe));let be=o.uid;void 0!==be&&(Ai(c,128),Ai(c,be));let Ce=o.vid;void 0!==Ce&&(Ai(c,136),Ai(c,Ce));let it=o.width;void 0!==it&&(Ai(c,144),Kg(c,f0(it)));let wt=o.service;void 0!==wt&&(Ai(c,152),Ai(c,wt));let bt=o.callbackData;void 0!==bt&&(Ai(c,162),om(c,bt));let Pt=o.jpgEncryption;void 0!==Pt&&(Ai(c,168),Ai(c,Pt));let En=o.requestType;void 0!==En&&(Ai(c,176),Ai(c,En));let pn=o.scorePorn;void 0!==pn&&(Ai(c,185),PB(c,pn));let un=o.scoreSexy;void 0!==un&&(Ai(c,193),PB(c,un));let yt=o.scoreNeutral;void 0!==yt&&(Ai(c,201),PB(c,yt));let Ge=o.scene;void 0!==Ge&&(Ai(c,208),Ai(c,Ge));let ot=o.ossFilePrefix;void 0!==ot&&(Ai(c,218),om(c,ot));let _t=o.serviceVendor;if(void 0!==_t)for(let bn of _t){Ai(c,226);let Je=DB();hG(bn,Je),Ai(c,Je.limit),hj(c,Je),pG(Je)}}(n,i),function(o){let c=o.bytes,h=o.limit;return c.length===h?c:c.subarray(0,h)}(i)}(j);if(G.byteLength<c.workerMessageLengthLimit){if(Bt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const Z=function(ae){for(var fe=1;fe<arguments.length;fe++){var be=null!=arguments[fe]?arguments[fe]:{};fe%2?gj(Object(be),!0).forEach(function(Ce){q(ae,Ce,be[Ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(be)):gj(Object(be)).forEach(function(Ce){Object.defineProperty(ae,Ce,Object.getOwnPropertyDescriptor(be,Ce))})}return ae}({},j);delete Z.jpg,oe.debug("[".concat(c._inspectId,"] Request message for worker of inspect content "),JSON.stringify(Z)),xn("debug",c,"Request message for worker of inspect content ".concat(JSON.stringify(Z)))}return G}return c.quality=c.quality*c.qualityRatio,yield c.generateRequestData(i,{appId:h,cname:g,cid:p,vid:v,sid:_,uid:y})})()}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=ul.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Nu.CLOSED,this.emit($o.STATE_CHANGE,hl.CLOSED)}}var _j,xB,J2,LB,vj,_G,vG,AG,aw,yG,r,t;function e(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function s(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?e(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let l=(_j=ac("AgoraRTCClient","store.clientId"),xB=a1({report:Kt}),J2=a1(),LB=a1({report:Kt}),vj=c1(),_G=a1({report:Kt}),vG=c1({report:Kt}),AG=c1({report:Kt}),aw=c1({report:Kt}),yG=a1({reportResult:!0,report:Kt}),_j((ir((t=class extends is{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}constructor(n){var i;let o;if(super(),i=this,q(this,"store",void 0),q(this,"_uid",void 0),q(this,"_channelName",void 0),q(this,"_uintUid",void 0),q(this,"_users",[]),q(this,"_codec",void 0),q(this,"_mode",void 0),q(this,"_config",void 0),q(this,"_clientId",void 0),q(this,"_appId",void 0),q(this,"_sessionId",null),q(this,"_key",void 0),q(this,"_joinInfo",void 0),q(this,"_gateway",void 0),q(this,"_statsCollector",void 0),q(this,"_configDistribute",void 0),q(this,"_leaveMutex",new cu("client-leave")),q(this,"_publishMutex",new cu("client-publish")),q(this,"_renewTokenMutex",new cu("client-renewtoken")),q(this,"_subscribeMutex",new cu("client-subscribe")),q(this,"_encryptionMode","none"),q(this,"_encryptionSecret",null),q(this,"_encryptionSalt",null),q(this,"_proxyServer",void 0),q(this,"_performanceRecorder",void 0),q(this,"_turnServer",{servers:[],mode:"auto"}),q(this,"_cloudProxyServerMode","disabled"),q(this,"_isDualStreamEnabled",!1),q(this,"_defaultStreamFallbackType",void 0),q(this,"_lowStreamParameter",void 0),q(this,"_streamFallbackTypeCacheMap",new Map),q(this,"_remoteStreamTypeCacheMap",new Map),q(this,"_axiosCancelSource",ul.CancelToken.source()),q(this,"_audioVolumeIndicationInterval",void 0),q(this,"_networkQualityInterval",void 0),q(this,"_userOfflineTimeout",void 0),q(this,"_streamRemovedTimeout",void 0),q(this,"_injectStreamingClient",void 0),q(this,"_liveTranscodeStreamingClient",void 0),q(this,"_liveRawStreamingClient",void 0),q(this,"_channelMediaRelayClient",void 0),q(this,"_networkQualitySensitivity","normal"),q(this,"_p2pChannel",void 0),q(this,"_useLocalAccessPoint",!1),q(this,"_joinAndNotLeaveYet",!1),q(this,"_numberOfJoinCount",0),q(this,"_remoteDefaultVideoStreamType",void 0),q(this,"_inspect",void 0),q(this,"_handleLocalTrackEnable",(c,h,g)=>{this.publish(c,!1).then(h).catch(g)}),q(this,"_handleLocalTrackDisable",(c,h,g)=>{this.unpublish(c).then(h).catch(g)}),q(this,"_handleUserOnline",c=>{this.isStringUID&&"string"!=typeof c.uid&&(oe.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID")),xn("error",this,"StringUID is Mixed with UintUID"));const h=this._users.find(g=>g.uid===c.uid);if(h)h._trust_in_room_=!0;else{const g=new A2(c.uid,c.uint_id||c.uid);this._users.push(g),oe.debug("[".concat(this._clientId,"] user online"),c.uid),Ld("info",this,"user-joined",{uid:c.uid}),this.emit(br.USER_JOINED,g)}}),q(this,"_handleUserOffline",c=>{const h=this._users.find(g=>g.uid===c.uid);h&&(this._handleRemoveStream(c),aL(this._users,h),this._remoteStreamTypeCacheMap.delete(h.uid),this._streamFallbackTypeCacheMap.delete(h.uid),oe.debug("[".concat(this._clientId,"] user offline"),c.uid,"reason:",c.reason),Ld("info",this,"user-left",{reason:c.reason,uid:c.uid}),this.emit(br.USER_LEAVED,h,c.reason))}),q(this,"_handleAddAudioOrVideoStream",(c,h,g,p,v,_,y)=>{const b=this._users.find(w=>w.uid===h);if(!b)return oe.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)")),void yo("error",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),"can not find target user!");oe.debug("[".concat(this._clientId,"] stream added with uid ").concat(h,", type ").concat(c)),yo("debug",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),{uid:h,mediaType:c});const C="audio"===c?b.hasAudio:b.hasVideo;b._uintid||(b._uintid=v||h),"audio"===c?b._trust_audio_stream_added_state_=!0:b._trust_video_stream_added_state_=!0,"audio"===c?(b._audio_added_=!0,void 0!==g&&(b._audioSSRC=g),void 0!==p&&(b._cname=p),_&&(b._audioOrtc=_)):(b._video_added_=!0,void 0!==g&&(b._videoSSRC=g),void 0!==p&&(b._cname=p),void 0!==y&&(b._rtxSsrcId=y),_&&(b._videoOrtc=_)),("audio"===c?b.hasAudio:b.hasVideo)&&!C&&(oe.info("[".concat(this._clientId,"] remote user ").concat(b.uid," published ").concat(c)),xn("info",this,"remote user ".concat(b.uid," published ").concat(c)),Ld("info",this,"user-published",{uid:b.uid,mediaType:c}),this.emit(br.USER_PUBLISHED,b,c)),"video"===c?Kt.onGatewayStream(this._sessionId,ma.ON_ADD_VIDEO_STREAM,Po.ON_ADD_VIDEO_STREAM,{peer:v||h}):Kt.onGatewayStream(this._sessionId,ma.ON_ADD_AUDIO_STREAM,Po.ON_ADD_AUDIO_STREAM,{peer:v||h}),this._p2pChannel.remoteMediaSsrcChanged(b,c,g)&&this._p2pChannel.unsubscribe(b,c,!0).then(()=>{oe.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(b.uid," after rejoin because SSRC id changed.")),this._subscribe(b,c,!0).catch(w=>{oe.error("[".concat(this._clientId,"] resubscribe error"),w.toString()),xn("error",this,"resubscribe error: ".concat(w.toString()))})}),this._p2pChannel.hasPendingRemoteMedia(b,c)&&(oe.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(b.uid," after reconnect.")),this._subscribe(b,c,!0).catch(w=>{oe.error("[".concat(this._clientId,"] resubscribe error"),w.toString()),xn("error",this,"resubscribe error: ".concat(w.toString()))}))}),q(this,"_handleRemoveStream",c=>{const h=this._users.find(p=>p.uid===c.uid);if(!h)return oe.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)")),void yo("warning",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid,info:"can not find target user!"});oe.debug("[".concat(this._clientId,"] stream removed with uid ").concat(c.uid)),yo("debug",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid});let g=()=>{};h.hasAudio&&h.hasVideo?g=()=>{oe.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),Ld("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(br.USER_UNPUBLISHED,h,"audio"),oe.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),Ld("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(br.USER_UNPUBLISHED,h,"video")}:h.hasVideo?g=()=>{oe.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),Ld("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(br.USER_UNPUBLISHED,h,"video")}:h.hasAudio&&(g=()=>{oe.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),Ld("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(br.USER_UNPUBLISHED,h,"audio")}),h._trust_audio_stream_added_state_=!0,h._trust_video_stream_added_state_=!0,h._audio_added_=!1,h._video_added_=!1,this._p2pChannel.unsubscribe(h).then(p=>{if(p)return this._gateway.unsubscribe(p,h.uid)}),h._audioSSRC=void 0,h._videoSSRC=void 0,h._audioOrtc=void 0,h._videoOrtc=void 0,h._rtxSsrcId=void 0,Kt.onGatewayStream(this._sessionId,ma.ON_REMOVE_STREAM,Po.ON_REMOVE_STREAM,{peer:c.uint_id||c.uid}),g()}),q(this,"_handleSetStreamLocalEnable",(c,h,g)=>{const p=this._users.find(y=>y.uid===h);if(!p)return oe.error("[".concat(this._clientId,"] can not find target user!(disable_local)")),void yo("error",this,"disable_local_video","can not find target user!(disable_local)");oe.debug("[".concat(this._clientId,"] local ").concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h)),yo("debug",this,"disable_local_video","local ".concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h));const v="audio"===c?p.hasAudio:p.hasVideo;if("audio"===c){p._trust_audio_enabled_state_=!0;const y=p._audio_enabled_;if(p._audio_enabled_=g,p._audio_enabled_===y)return;{const b=p._audio_enabled_?"enable-local-audio":"disable-local-audio";oe.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(h,", msg: ").concat(b)),fr("debug",this,"user-info-updated",{uid:h,msg:b}),this.emit(br.USER_INFO_UPDATED,h,b)}}else{p._trust_video_enabled_state_=!0;const y=p._video_enabled_;if(p._video_enabled_=g,p._video_enabled_===y)return;{const b=p._video_enabled_?"enable-local-video":"disable-local-video";oe.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(h,", msg: ").concat(b)),fr("debug",this,"user-info-updated",{uid:h,msg:b}),this.emit(br.USER_INFO_UPDATED,h,b)}}const _="audio"===c?p.hasAudio:p.hasVideo;return v!==_?!v&&_?(oe.info("[".concat(this._clientId,"] remote user ").concat(h," published ").concat(c)),Ld("info",this,"user-published",{uid:h,mediaType:c}),void this.emit(br.USER_PUBLISHED,p,c)):("video"===c&&p._videoTrack&&p._videoTrack._destroy(),this._p2pChannel.muteRemote(p,c),oe.info("[".concat(this._clientId,"] remote user ").concat(h," unpublished ").concat(c)),Ld("info",this,"user-unpublished",{uid:h,mediaType:c}),void this.emit(br.USER_UNPUBLISHED,p,c)):void 0}),q(this,"_handleMuteStream",(c,h,g)=>{oe.debug("[".concat(this._clientId,"] receive mute message"),c,h,g),yo("debug",this,"mute_".concat(h),g);const p=this._users.find(y=>y.uid===c);if(!p)return oe.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(c)),void yo("warning",this,"mute_".concat(h),"can not find remote user, ignore mute event, uid: ".concat(c));const v="audio"===h?p.hasAudio:p.hasVideo;if("audio"===h){p._trust_audio_mute_state_=!0;const y=p._audio_muted_;if(p._audio_muted_=g,p._audio_muted_===y)return;{const b=p._audio_muted_?"mute-audio":"unmute-audio";oe.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(b)),fr("debug",this,"user-info-updated",{uid:c,msg:b}),this.emit(br.USER_INFO_UPDATED,c,b)}}else{p._trust_video_mute_state_=!0;const y=p._video_muted_;if(p._video_muted_=g,p._video_muted_===y)return;{const b=p._video_muted_?"mute-video":"unmute-video";oe.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(b)),fr("debug",this,"user-info-updated",{uid:c,msg:b}),this.emit(br.USER_INFO_UPDATED,c,b)}}const _="audio"===h?p.hasAudio:p.hasVideo;if(v!==_){if(!v&&_)return("audio"===h?p._audioSSRC:p._videoSSRC)?(oe.info("[".concat(this._clientId,"] remote user ").concat(c," published ").concat(h)),Ld("info",this,"user-published",{uid:p.uid,mediaType:h}),void this.emit(br.USER_PUBLISHED,p,h)):void oe.warning("[".concat(this._clientId,"] remote user ").concat(c," receive ").concat(h," unmute message  before add stream message, ").concat(h," SSRC doesn't exist yet."));"video"===h&&p._videoTrack&&p._videoTrack._destroy(),this._p2pChannel.muteRemote(p,h),oe.info("[".concat(this._clientId,"] remote user ").concat(c," unpublished ").concat(h)),Ld("info",this,"user-unpublished",{uid:c,mediaType:h}),this.emit(br.USER_UNPUBLISHED,p,h)}}),q(this,"_handleP2PLost",function(){var c=L(function*(h){if(oe.debug("[".concat(i._clientId,"] receive p2p lost"),h),yo("debug",i,"p2p_lost",h),parseInt(h.p2pid,10)!==i.store.p2pId)return oe.warning("P2PLost stream not found",h),void yo("warning",i,"p2p_lost","P2PLost stream not found, ".concat(h));yield i._p2pChannel.requestReconnect()});return function(h){return c.apply(this,arguments)}}()),q(this,"_handleTokenWillExpire",()=>{oe.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),yo("debug",this,"token_privilege_will_expire"),this.emit(br.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),q(this,"_handleBeforeUnload",c=>{"beforeunload"===c.type&&void 0!==c.returnValue&&""!==c.returnValue||(this.leave(),oe.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")),Bd("info",["window",this.store.clientId],Md()?"beforeunload":"pagehide"))}),q(this,"_handleUpdateNetworkQuality",()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(br.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const c={downlinkNetworkQuality:0,uplinkNetworkQuality:0};c.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),c.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(br.NETWORK_QUALITY,c)}),this._codec=n.codec,this._mode=n.mode,this._clientId=cs(5,"client-"),this.store=new Uh(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),oe.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(ll," build: ").concat(LM,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),fr("info",this,"constructor",{version:ll,build:LM,mode:this._mode,codec:this._codec}),this._performanceRecorder=function(c,h){const g=new RB(c,"join");return uG.set(c,g),g}(this._clientId),n.clientRoleOptions)try{v6(n.clientRoleOptions),o=Object.assign({},n.clientRoleOptions)}catch(c){oe.warning("[".concat(this._clientId,"] ").concat(c.toString())),xn("warning",this,c.toString())}this._statsCollector=new Wy(this.store),this._statsCollector.onStatsException=(c,h,g)=>{oe.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(c,", msg: ").concat(h,", uid: ").concat(g)),Ld("debug",this,br.EXCEPTION,{code:c,message:h,uid:g}),this.emit(br.EXCEPTION,{code:c,msg:h,uid:g})},this._statsCollector.onUploadPublishDuration=(c,h,g,p)=>{const v=this._users.find(_=>_.uid===c);v&&Kt.peerPublishStatus(this._sessionId,{subscribeElapse:p,audioPublishDuration:h,videoPublishDuration:g,peer:v._uintid})},this._gateway=new Mz(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:n.websocketRetryConfig||Xo,httpRetryConfig:n.httpRetryConfig||Xo,forceWaitGatewayResponse:void 0===n.forceWaitGatewayResponse||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:o}),this._config=n,this._configDistribute=new FQ,this._p2pChannel=new sG(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}join(n,i,o,c,h){var g=this;return L(function*(){const p=++g._numberOfJoinCount;g._performanceRecorder.checkPoint("startJoin"),g.store.joinStart(),c&&(g.store.uid=c);const v="HTTPS"===(p0||p0||(p0=(window.location.protocol.split(":")[0]||"").toUpperCase(),p0)),_=W2()?window.isSecureContext:"Browser Not Support";if(!W2()&&!v||!window.isSecureContext){const j="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";oe.warning(j),Yt("warning",g,j)}const y=w9();"DISCONNECTED"===g.connectionState&&(g.store.avoidJoinStart=Math.round(Date.now()),oe.debug("[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)),Yt("debug",g,"join",void 0,"[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)));const b=Kt.reportApiInvoke(y,{name:hr.JOIN,options:[n,i,o,c],states:{isHttps:v,isSecureContext:_},tag:sr.TRACER});Kt.setAppId(n);try{if(!o&&null!==o)throw new Pe(Te.INVALID_PARAMS,"Invalid token: ".concat(o,". If you don not use token, set it to null"));o&&Tc(o,"token",1,2047),Tc(n,"appid",1,2047),jD(i),c&&QD(c),h&&Tc(h,"optionalInfo",1,2047)}catch(j){throw b.onError(j),j}if(oe.info("[".concat(g._clientId,"] start join channel ").concat(i,", join number: ").concat(p)),fr("info",g,"join",{channel:i}),g._leaveMutex.isLocked&&(oe.debug("[".concat(g._clientId,"] join: waiting leave operation")),xn("debug",g,"join: waiting leave operation"),(yield g._leaveMutex.lock())(),oe.debug("[".concat(g._clientId,"] join: continue")),xn("debug",g,"join: continue")),g._joinAndNotLeaveYet=!0,"DISCONNECTED"!==g.connectionState){const j=new Pe(Te.INVALID_OPERATION,"[".concat(g._clientId,"] Client already in connecting/connected state"));throw b.onError(j),j}g._sessionId||(g._sessionId=y,g.store.sessionId=g._sessionId),g._gateway.state="CONNECTING";const C=s({clientId:g._clientId,appId:n,sid:g._sessionId,cname:i,uid:"string"!=typeof c?c:null,turnServer:g._turnServer,proxyServer:g._proxyServer,token:o||n,cloudProxyServer:g._cloudProxyServerMode,optionalInfo:h,useLocalAccessPoint:g._useLocalAccessPoint},void 0!==g._remoteDefaultVideoStreamType&&{defaultVideoStream:g._remoteDefaultVideoStreamType});if("string"==typeof c&&(C.stringUid=c,g._uintUid?(C.uid=g._uintUid,g._uintUid=void 0):C.uid=0),"none"!==g._encryptionMode&&g._encryptionSecret){if(C.aesmode=g._encryptionMode,C.aespassword=yield(j=L(function*(G){const Z=jk("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),ae=yield window.crypto.subtle.importKey("spki",Z,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),fe=Wx(G),be=yield window.crypto.subtle.encrypt({name:"RSA-OAEP"},ae,fe);return g1(new Uint8Array(be))}),function(G){return j.apply(this,arguments)})(g._encryptionSecret),!g._joinAndNotLeaveYet)throw new Pe(Te.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g._encryptionSalt&&(C.aessalt=g._encryptionSalt)}var j;g._startSession(g._sessionId,{channel:i,appId:n});const w=g._sessionId;setTimeout(()=>{"CONNECTING"===g.connectionState&&w===g._sessionId&&Kt.joinChannelTimeout(g._sessionId,5)},5e3);try{let j;const G=C.cloudProxyServer;if("443only"===G)C.proxyServer=Bt("PROXY_SERVER_TYPE2");else if(["proxy3","proxy4","proxy5"].includes(G)){const fe=Bt("PROXY_SERVER_TYPE3");C.proxyServer=Array.isArray(fe)?fe[0]:fe}if(Kt.setProxyServer(C.proxyServer),oe.setProxyServer(C.proxyServer),Iy(C.proxyServer),g._performanceRecorder.checkPoint("startRequestAp"),g.store.requestAPStart(),C.stringUid&&!C.uid&&"normal"===G){yield V4(C,g._axiosCancelSource.token,g._config.httpRetryConfig||Xo,!1,g.store);const fe=yield h2(C.stringUid,C,g._axiosCancelSource.token,g._config.httpRetryConfig||Xo,g.store);oe.debug("getUserAccount Success ".concat(C.stringUid," => ").concat(fe)),xn("debug",g,"getUserAccount Success ".concat(C.stringUid," => ").concat(fe)),C.uid=fe,j=yield L1(C,g._axiosCancelSource.token,g._config.httpRetryConfig||Xo,g.store)}else if(C.stringUid&&!C.uid){const fe=yield h2(C.stringUid,C,g._axiosCancelSource.token,g._config.httpRetryConfig||Xo,g.store);oe.debug("getUserAccount Success ".concat(C.stringUid," => ").concat(fe)),xn("debug",g,"getUserAccount Success ".concat(C.stringUid," => ").concat(fe)),C.uid=fe,j=yield V4(C,g._axiosCancelSource.token,g._config.httpRetryConfig||Xo,!0,g.store)}else j=yield V4(C,g._axiosCancelSource.token,g._config.httpRetryConfig||Xo,!0,g.store);if(!g._joinAndNotLeaveYet)throw new Pe(Te.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g.store.requestAPEnd(),g._performanceRecorder.checkPoint("startJoinGateway"),setTimeout(()=>{g._configDistribute.startGetConfigDistribute(C,g._axiosCancelSource.token),g._configDistribute.on(bv.UPDATE_BITRATE_LIMIT,fe=>{g._p2pChannel.updateBitrateLimit(fe)})},0),g._key=o||n;const Z=j.gatewayInfo;g._joinInfo=s(s({},C),{},{cid:Z.cid,uid:C.uid?C.uid:Z.uid,vid:Z.vid,apResponse:Z.res,uni_lbs_ip:Z.uni_lbs_ip,gatewayAddrs:Z.gatewayAddrs});const ae=yield g._joinGateway();if(!g._joinAndNotLeaveYet)throw new Pe(Te.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));return b.onSuccess(ae),g._appId=n,g._channelName=C.cname,g._uid=ae,g.store.uid=ae,setTimeout(()=>{g._networkQualityInterval&&window.clearInterval(g._networkQualityInterval),g._networkQualityInterval=window.setInterval(g._handleUpdateNetworkQuality,2e3),window.addEventListener(Md()?"beforeunload":"pagehide",g._handleBeforeUnload)},0),oe.info("[".concat(g._clientId,"] Joining channel success: ").concat(i)),fr("info",g,"join",i,"success"),setTimeout(()=>{Bt("USE_NEW_LOG")?FD():oe.startUpload()},5e3),g._performanceRecorder.checkPoint("finishJoin"),g.store.joinEnd(),QT.includes(P=g)||QT.push(P),ae}catch(j){const G=Array.isArray(j)?j[0]:j;throw oe.error("[".concat(g._clientId,"] join number: ").concat(p,", Joining channel failed, rollback"),G),fr("error",g,"join",i,G.toString()),G.code!==Te.OPERATION_ABORTED&&g._numberOfJoinCount===p&&(g._gateway.state="DISCONNECTED",g._reset()),b.onError(G),G}var P})()}_joinGateway(){if(!this._joinInfo||!this._key)throw new Pe(Te.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||!Bt("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===Te.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,Ls.FALLBACK);throw n}).then(n=>{if(n)return n;if(oe.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new Pe(Te.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const i=Bt("PROXY_SERVER_TYPE3");if(Array.isArray(i))if(this._joinInfo.apUrl){const o=new E4(this._joinInfo.apUrl).host.split("."),c=o.slice(o.length-2).join(".");i.forEach(h=>{this._joinInfo&&h.includes(c)&&(this._joinInfo.proxyServer=h)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=i[0])}else this._joinInfo.proxyServer=i[0];else this._joinInfo.proxyServer=i;return oe.setProxyServer(this._joinInfo.proxyServer),Kt.setProxyServer(this._joinInfo.proxyServer),Iy(this._joinInfo.proxyServer),Kt.reportApiInvoke(this._sessionId,{name:hr.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:sr.TRACER}).onSuccess(),this.emit(br.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}).then(n=>n)}leave(){var n=this;return L(function*(){const i=Kt.reportApiInvoke(n._sessionId,{name:hr.LEAVE,options:[],tag:sr.TRACER});oe.info("[".concat(n._clientId,"] Leaving channel")),fr("info",n,"leave"),window.removeEventListener(Md()?"beforeunload":"pagehide",n._handleBeforeUnload),n._reset(),function(c){const h=QT.indexOf(c);-1!==h&&QT.splice(h,1)}(n);const o=yield n._leaveMutex.lock();if("DISCONNECTED"===n.connectionState)return oe.info("[".concat(n._clientId,"] Leaving channel repeated, success")),o(),i.onSuccess();yield n._gateway.leave("CONNECTED"!==n.connectionState),oe.info("[".concat(n._clientId,"] Leaving channel success")),fr("info",n,"leave",void 0,"success"),n._joinAndNotLeaveYet=!1,n.store.resetJoinChannelServiceRecords(),o(),i.onSuccess()})()}publish(n){var i=arguments,o=this;return L(function*(){let c=!(i.length>1&&void 0!==i[1])||i[1];Array.isArray(n)||(n=[n]);const h=Kt.reportApiInvoke(o._sessionId,{name:hr.PUBLISH,options:n.map(p=>p?Object(p).toString():"null"),tag:sr.TRACER});if(0===n.length){const p=new Pe(Te.INVALID_PARAMS,"track list is empty");return h.onError(p),p.throw()}if("audience"===o._gateway.role){const p=new Pe(Te.INVALID_OPERATION,"audience can not publish stream");return h.onError(p),p.throw()}for(const p of n){if(!(p instanceof zx)){const v=new Pe(Te.INVALID_PARAMS,"parameter is not local track");return h.onError(v),v.throw()}if(!p._enabled&&c){const v=new Pe(Te.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(p.getTrackId()));return h.onError(v),v.throw()}}oe.info("[".concat(o._clientId,"] Publishing tracks, id ").concat(n.map(p=>"".concat(p.getTrackId()," ")))),fr("info",o,"publish",n.map(p=>"".concat(p.getTrackId()))),yield o._configDistribute.awaitConfigDistributeComplete(),c&&n.forEach(p=>{const v=o._configDistribute.getBitrateLimit();p instanceof Os&&v&&p.setBitrateLimit(v.uplink)});const g=yield o._publishMutex.lock();try{yield o._publishHighStream(n),h.onSuccess(n.map(p=>p.trackMediaType+":"+p.getTrackLabel()).toString()),oe.info("[".concat(o._clientId,"] Publish success, id ").concat(n.map(p=>"".concat(p.getTrackId()," ")))),fr("info",o,"publish",n.map(p=>"".concat(p.getTrackId())),"success")}catch(p){throw h.onError(p),oe.error("[".concat(o._clientId,"] publish error"),p.toString()),fr("error",o,"publish",void 0,p.toString()),p}finally{g()}})()}unpublish(n){var i=this;return L(function*(){if(!i._joinInfo||void 0===i._uid)throw new Pe(Te.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=i._p2pChannel.getAllTracks(!0);const o=Kt.reportApiInvoke(i._sessionId,{name:hr.UNPUBLISH,options:n.map(h=>h.getTrackId()),tag:sr.TRACER});oe.info("[".concat(i._clientId,"] Unpublish tracks, tracks ").concat(n.map(h=>"".concat(h.getTrackId()," "))," ")),fr("info",i,"unpublish",n.map(h=>"".concat(h.getTrackId())));const c=yield i._publishMutex.lock();try{const h=yield i._p2pChannel.unpublish(n);h&&(yield i._gateway.unpublish(h,i._uid)),oe.info("[".concat(i._clientId,"] Unpublish success,tracks ").concat(n.map(g=>"".concat(g.getTrackId())))),fr("info",i,"unpublish",n.map(g=>"".concat(g.getTrackId())),"success"),o.onSuccess()}catch(h){throw o.onError(h),oe.error("[".concat(i._clientId,"] unpublish error"),h.toString()),fr("error",i,"unpublish",void 0,h.toString()),h}finally{c&&c()}})()}subscribe(n,i){var o=this;return L(function*(){return o._subscribe(n,i)})()}_subscribe(n,i,o){var c=this;return L(function*(){fa(i,"mediaType",["audio","video"]);const h=Kt.reportApiInvoke(c._sessionId,{name:hr.SUBSCRIBE,options:[n.uid,i],tag:sr.TRACER});if(!c._joinInfo){const b=new Pe(Te.INVALID_OPERATION,"Can't subscribe stream, not joined");throw h.onError(b),b}if("CONNECTED"!==c.connectionState&&"RECONNECTING"!==c.connectionState){const b=new Pe(Te.INVALID_OPERATION,"Can't subscribe stream in ".concat(c.connectionState," state"));throw h.onError(b),b}if(!c._users.find(b=>b===n)){const b=new Pe(Te.INVALID_REMOTE_USER,"user is not in the channel");throw oe.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),fr("error",c,"subscribe",n.uid,"this user is not in the channel"),h.onError(b),b}if(!n.hasAudio&&!n.hasVideo){const b=new Pe(Te.INVALID_REMOTE_USER,"user is not published");throw oe.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),fr("error",c,"subscribe",n.uid,"this user is not published"),h.onError(b),b}if(!(o||("audio"!==i||n.hasAudio&&void 0!==n._audioSSRC)&&("video"!==i||n.hasVideo&&void 0!==n._videoSSRC))){const b=new Pe(Te.REMOTE_USER_IS_NOT_PUBLISHED);throw oe.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(i,", remote track is not published")),fr("error",c,"subscribe",n.uid,"mediaType ".concat(i,", remote track is not published")),h.onError(b),b}const g="audio"===i?n._audioSSRC:n._videoSSRC,p="audio"===i?n._audioOrtc:n._videoOrtc,v="video"===i?n._rtxSsrcId:void 0,_={stream_type:"audio"===i?ei.AUDIO:ei.VIDEO,ssrcId:g},y=yield c._subscribeMutex.lock();oe.info("[".concat(c._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(i)),fr("info",c,"subscribe",{uid:n.uid,mediaType:i});try{if(yield c._p2pChannel.hasRemoteMediaWithLock(n,i))yield c._p2pChannel.unmuteRemote(n,i);else try{gl.markSubscribeStart(c.store.clientId,g),c.store.subscribe(n.uid,i,performance.now()),yield c._p2pChannel.subscribe(n,i,g,v,p);try{yield c._gateway.subscribe(n.uid,_,!0)}catch(C){throw yield c._p2pChannel.unsubscribe(n,i),C}c.store.subscribe(n.uid,i,void 0,performance.now()),c._p2pChannel.reportSubscribeEvent(!0,null,n,i)}catch(C){throw c._p2pChannel.reportSubscribeEvent(!1,C?.code,n,i),C}oe.info("[".concat(c._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(i)),fr("info",c,"subscribe",{uid:n.uid,mediaType:i},"success"),c._defaultStreamFallbackType&&c.setStreamFallbackOption(n.uid,c._defaultStreamFallbackType).catch(C=>{oe.warning("[".concat(c._clientId,"] auto set fallback failed"),C),xn("warning",c,"auto set fallback failed, ".concat(C.toString()))});const b="audio"===i?n._audioTrack:n._videoTrack;if(!b){const C=new Pe(Te.UNEXPECTED_ERROR,"can not find remote track in user object");return h.onError(C),C.throw()}return h.onSuccess(b.getTrackId()),b}catch(b){throw h.onError(b),oe.error("[".concat(c._clientId,"] subscribe user ").concat(n.uid," error"),b),fr("error",c,"subscribe",{uid:n.uid,mediaType:i},b.toString()),b}finally{y()}})()}massSubscribe(n){var i=this;return L(function*(){TS(n,"subscribeList");const o=Kt.reportApiInvoke(i._sessionId,{name:hr.MASS_SUBSCRIBE,options:n.map(y=>{let{user:b,mediaType:C}=y;return[b?.uid,C]}),tag:sr.TRACER});if(!i._joinInfo){const y=new Pe(Te.INVALID_OPERATION,"Can't subscribe stream, not joined");throw o.onError(y),y}if("CONNECTED"!==i.connectionState&&"RECONNECTING"!==i.connectionState){const y=new Pe(Te.INVALID_OPERATION,"Can't subscribe stream in ".concat(i.connectionState," state"));throw o.onError(y),y}const c=performance.now(),h=new Map,g=yield i._subscribeMutex.lock();oe.info("[".concat(i._clientId,"]start massSubscribe user ").concat(n.map(y=>{let{user:b,mediaType:C}=y;return"user: ".concat(b?.uid,", mediaType: ").concat(C)}).join("; "))),fr("info",i,"massSubscribe",n);const p=(n=[...n]).map(y=>{let{user:b,mediaType:C}=y;return{user:b,mediaType:C}}),v=yield i._p2pChannel.globalLock();try{var _;for(let b=n.length-1;b>=0;b--){const C=n[b],{user:w,mediaType:P}=C;if(fa(P,"mediaType",["audio","video"]),!w){const Z=new Pe(Te.INVALID_PARAMS,"user property does not exist in subscribeList item");throw oe.error("[".concat(i._clientId,"] user property does not exist in subscribeList item")),o.onError(Z),Z}if(!i._users.find(Z=>Z===w)){const Z=new Pe(Te.INVALID_REMOTE_USER,"user is not in the channel");oe.error("[".concat(i._clientId,"] can not massSubscribe ").concat(w.uid,", this user is not in the channel")),fr("error",i,"massSubscribe",w.uid,"this user is not in the channel"),p[b].error=Z,n.splice(b,1);continue}if("audio"===P&&(!w.hasAudio||void 0===w._audioSSRC)||"video"===P&&(!w.hasVideo||void 0===w._videoSSRC)){const Z=new Pe(Te.REMOTE_USER_IS_NOT_PUBLISHED);oe.error("[".concat(i._clientId,"] can not subscribe ").concat(w.uid," with mediaType ").concat(P,", remote user is not published")),fr("error",i,"subscribe",w.uid,"mediaType ".concat(P,", remote user is not published")),p[b].error=Z,n.splice(b,1);continue}const j=Mo.Video|Mo.LwoVideo,G=h.get(w);if(G){if("video"===P?G&j:G&Mo.Audio){n.splice(b,1),oe.warning("repeat massSubscribe user:".concat(w.uid,", mediaType:").concat(P," twice"));continue}h.set(w,G|("video"===P?j:Mo.Audio))}else h.set(w,"video"===P?j:Mo.Audio)}for(let b=n.length-1;b>=0;b--){const C=n[b],{user:w,mediaType:P}=C,j=Mo.Video|Mo.LwoVideo;if(i._p2pChannel.hasRemoteMedia(w,P)){yield i._p2pChannel.unmuteRemoteNoLock(w,P);const G=h.get(w);h.set(w,"video"===P?G^j:G^Mo.Audio),n.splice(b,1)}}i.store.massSubscribe(n.map(b=>({userId:b.user.uid,type:b.mediaType})),c);const y=Da(_=Array.from(h.entries())).call(_,(b,C)=>{let[w,P]=C;if(0===P)return b;const j={stream_id:w.uid,stream_type:P};return P&Mo.Audio&&(j.audio_ssrc=w._audioSSRC),P&Mo.Video&&(j.video_ssrc=w._videoSSRC),b.push(j),b},[]);try{n.length>0&&(yield i._p2pChannel.massSubscribeNoLock(n.map(C=>{let{user:w,mediaType:P}=C;return{user:w,mediaType:P,ssrcId:P===ei.VIDEO?w._videoSSRC:w._audioSSRC,rtxSsrcId:w._rtxSsrcId}})));const b=new Map;if(y.length>0&&((yield i._gateway.subscribeAll(y,!0))?.users||[]).forEach(w=>{let{stream_id:P,video_error_code:j,audio_error_code:G,error_code:Z}=w;(j||G||Z)&&b.set(P,{video_error_code:j,audio_error_code:G,error_code:Z})}),Array.from(b.entries()).length>0){const C=Array.from(b.entries()).map(w=>{let P,[j,G]=w;return G.error_code||G.video_error_code&&G.audio_error_code?P=void 0:G.video_error_code?P=ei.VIDEO:G.audio_error_code&&(P=ei.AUDIO),{user:i.remoteUsers.find(Z=>Z.uid===j),mediaType:P}});yield i._p2pChannel.massUnsubscribeNoLock(C)}for(const C of p){const w=b.get(C.user.uid);if(w){const P=w.error_code||"audio"===C.mediaType&&w.audio_error_code||"video"===C.mediaType&&w.video_error_code;if(P){const j=BL(P);oe.error("user:".concat(C.user.uid," mediaType:").concat(C.mediaType," has massSubscribe error ").concat(j.desc)),C.error=new Pe(Te.SUBSCRIBE_FAILED,"code ".concat(P,": ").concat(j.desc))}}C.error||(C.track="video"===C.mediaType?C.user.videoTrack:C.user.audioTrack)}return i.store.massSubscribe(p.filter(C=>!C.error).map(C=>({userId:C.user.uid,type:C.mediaType})),void 0,performance.now()),p.forEach(C=>{var w;Kt.subscribe(i.store.sessionId,{succ:!!C.error,ec:(null===(w=C.error)||void 0===w?void 0:w.code)||null,video:C.mediaType===ei.VIDEO,audio:C.mediaType===ei.AUDIO,peerid:C.user.uid,subscribeRequestid:C.mediaType===ei.VIDEO?C.user._videoSSRC:C.user._audioSSRC,p2pid:i.store.p2pId,eventElapse:Math.floor(performance.now()-c)},!0)}),o.onSuccess(),oe.info("[".concat(i._clientId,"] massSubscribe success ").concat(n.map(C=>{let{user:w,mediaType:P}=C;return"user: ".concat(w?.uid,", mediaType: ").concat(P)}).join("; "))),fr("info",i,"massSubscribe",n,"success"),p}catch(b){throw yield i._p2pChannel.massUnsubscribeNoLock(n),o.onError(b),b}}finally{v(),g()}})()}unsubscribe(n,i){var o=this;return L(function*(){if(i&&fa(i,"mediaType",["audio","video"]),!o._joinInfo)throw new Pe(Te.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const c=Kt.reportApiInvoke(o._sessionId,{name:hr.UNSUBSCRIBE,options:[n.uid,i],tag:sr.TRACER});if(!o._users.find(h=>h===n)){const h=new Pe(Te.INVALID_REMOTE_USER,"user is not in the channel");throw oe.error("[".concat(o._clientId,"] can not subscribe ").concat(n.uid,", user is not in the channel")),fr("error",o,"unsubscribe",{uid:n.uid,mediaType:i},"user is not in the channel"),c.onError(h),h}oe.info("[".concat(o._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(i)),fr("info",o,"unsubscribe",{uid:n.uid,mediaType:i});try{const h=yield o._p2pChannel.unsubscribe(n,i);h&&(yield o._gateway.unsubscribe(h,n.uid)),oe.info("[".concat(o._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(i)),fr("info",o,"unsubscribe",{uid:n.uid,mediaType:i},"success"),c.onSuccess()}catch(h){if(h.code===Te.DISCONNECT_P2P)return oe.warning("disconnecting p2p, abort unsubscribe request."),void c.onSuccess();throw oe.error("[".concat(o._clientId,"] unsubscribe user ").concat(n.uid," error"),h.toString()),fr("error",o,"unsubscribe",{uid:n.uid,mediaType:i},h.toString()),c.onError(h),h}})()}massUnsubscribe(n){var i=this;return L(function*(){TS(n,"unsubscribeList");const o=Kt.reportApiInvoke(i._sessionId,{name:hr.UNSUBSCRIBE,options:n.map(h=>{let{user:g,mediaType:p}=h;return{uid:g?.uid,mediaType:p}}),tag:sr.TRACER});if(!i._joinInfo){const h=new Pe(Te.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");throw o.onError(h),h}oe.info("[".concat(i._clientId,"] start massUnsubscribe ").concat(n.map(h=>{let{user:g,mediaType:p}=h;return"user: ".concat(g?.uid,", mediaType: ").concat(p,";")}).join())),fr("info",i,"massUnsubscribe",n),n=[...n];const c=new Map;for(let h=n.length-1;h>=0;h--){const{user:g,mediaType:p}=n[h];if(!g){const _=new Pe(Te.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw oe.error("[".concat(i._clientId,"] user property does not exist in unsubscribeList item")),o.onError(_),_}if(fa(p,"mediaType",["video","audio",void 0]),!i._users.find(_=>_===g)){oe.warning("[".concat(i._clientId,"] can not subscribe ").concat(g.uid,", user is not in the channel")),fr("error",i,"unsubscribe",{uid:g.uid,mediaType:p},"user is not in the channel"),n.splice(h,1);continue}const v=Mo.Video|Mo.LwoVideo;if(c.has(g)){const _=c.get(g);let y;switch(p){case"video":y=_&v;break;case"audio":y=_&Mo.Audio;break;default:y=_&(Mo.Audio|v)}if(y){oe.warning("repeat massUnsubscribe user:".concat(g.uid,",mediaType:").concat(p," twice.")),n.splice(h,1);continue}p?"audio"===p?c.set(g,_|Mo.Audio):"video"===p&&c.set(g,_|v):c.set(g,_|Mo.Audio|v)}else p?"audio"===p?c.set(g,Mo.Audio):"video"===p&&c.set(g,v):c.set(g,Mo.Audio|v)}try{const h=yield i._p2pChannel.massUnsubscribe(n);h&&(yield i._gateway.massUnsubscribe(h)),oe.info("[".concat(i._clientId,"] massUnsubscribe success ").concat(n.map(g=>{let{user:p,mediaType:v}=g;return"user: ".concat(p?.uid,", mediaType: ").concat(v,";")}).join())),fr("info",i,"massUnsubscribe",n,"success"),o.onSuccess()}catch(h){if(h.code===Te.DISCONNECT_P2P)return oe.warning("disconnecting p2p, abort unsubscribe request."),void o.onSuccess();throw oe.error("[".concat(i._clientId,"] massUnsubscribe error"),h.toString()),fr("error",i,"massUnsubscribe",n,h.toString()),o.onError(h),h}})()}setLowStreamParameter(n){!function(c){if(!c)throw new Pe(Te.INVALID_PARAMS);lo(c.width)||Wf(c.width,"streamParameter.width"),lo(c.height)||Wf(c.height,"streamParameter.height"),lo(c.framerate)||Wf(c.framerate,"streamParameter.framerate"),lo(c.bitrate)||Kr(c.bitrate,"streamParameter.bitrate")}(n);const i=Kt.reportApiInvoke(this._sessionId,{name:hr.SET_LOW_STREAM_PARAMETER,options:[n],tag:sr.TRACER});(!n.width&&n.height||n.width&&!n.height)&&(oe.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),xn("warning",this,"The width and height parameters take effect only when both are set")),oe.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n)),fr("info",this,"setLowStreamParameter",n);const o=this._configDistribute.getLowStreamConfigDistribute();o&&o.bitrate&&n.bitrate&&o.bitrate<n.bitrate&&(n.bitrate=o.bitrate),this._lowStreamParameter=n,i.onSuccess()}enableDualStream(){var n=this;return L(function*(){const i=Kt.reportApiInvoke(n._sessionId,{name:hr.ENABLE_DUAL_STREAM,options:[],tag:sr.TRACER});if(!Oc().supportDualStream){Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!1});const o=new Pe(Te.NOT_SUPPORTED,"Your browser is not support dual stream");throw i.onError(o),o}if(n._isDualStreamEnabled){const o=new Pe(Te.INVALID_OPERATION,"Dual stream is already enabled");throw i.onError(o),o}if(n._p2pChannel.canPublishLowStream())try{yield n._publishLowStream()}catch(o){throw Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),i.onError(o),o}n._isDualStreamEnabled=!0,Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),oe.info("[".concat(n._clientId,"] enable dual stream")),fr("info",n,"enableDualStream"),i.onSuccess()})()}disableDualStream(){var n=this;return L(function*(){if(!n._isDualStreamEnabled)return;if(!n._joinInfo)throw new Pe(Te.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const i=Kt.reportApiInvoke(n._sessionId,{name:hr.DISABLE_DUAL_STREAM,options:[],tag:sr.TRACER});if(n._p2pChannel.getLocalMedia(Dn.LocalVideoLowTrack))try{const o=yield n._p2pChannel.unpublishLowStream();o&&(yield n._gateway.unpublish(o,n._joinInfo.stringUid||n._joinInfo.uid))}catch(o){throw Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),i.onError(o),o}n._isDualStreamEnabled=!1,Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),oe.info("[".concat(n._clientId,"] disable dual stream")),fr("info",n,"disableDualStream"),i.onSuccess()})()}setClientRole(n,i){var o=this;return L(function*(){var h;fa(h=n,"role",["audience","host"]),i&&v6(i);const c=Kt.reportApiInvoke(o._sessionId,{name:hr.SET_CLIENT_ROLE,options:[n,i],tag:sr.TRACER});if("rtc"===o._mode){oe.warning("[".concat(o._clientId,"]rtc mode can not use setClientRole")),fr("warning",o,"setClientRole",n,"rtc mode can not use setClientRole");const h=new Pe(Te.INVALID_OPERATION,"rtc mode can not use setClientRole");return c.onError(h),h.throw()}if(i&&i.level&&"host"===n){const h=new Pe(Te.INVALID_OPERATION,"host mode can not set audience latency level");return c.onError(h),h.throw()}try{if("audience"===n&&o._p2pChannel.hasLocalMedia()){const h=new Pe(Te.INVALID_OPERATION,"can not set client role to audience when publishing stream");return c.onError(h),h.throw()}yield o._gateway.setClientRole(n,i),oe.info("[".concat(o._clientId,"] set client role to ").concat(n,", level: ").concat(i&&i.level)),fr("info",o,"setClientRole",{role:n,level:i&&i.level}),c.onSuccess()}catch(h){throw c.onError(h),h}})()}setProxyServer(n,i){if(Tc(n,"proxyServer"),!i){if("DISCONNECTED"!==this.connectionState)throw new Pe(Te.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Pe(Te.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,Kt.setProxyServer(this._proxyServer),oe.setProxyServer(this._proxyServer),Iy(this._proxyServer),oe.info("[".concat(this._clientId,"] Set proxy server ").concat(i?"by initialize call":""," success.")),fr("info",this,"setProxyServer",[...arguments],"success")}setTurnServer(n,i){if(Array.isArray(n)||(n=[n]),!i){if("DISCONNECTED"!==this.connectionState)throw new Pe(Te.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Pe(Te.INVALID_OPERATION,"You have already set the proxy")}if(qM(n))return this._turnServer={servers:n,mode:"original-manual"},oe.info("[".concat(this._clientId,"] Set original turnserver ").concat(i?"by initialize call":""," success: ").concat(n.map(o=>o.urls).join(","),".")),void fr("info",this,"setOriginalTurnServer",[...arguments],"success");n.forEach(o=>_6(o)),this._turnServer={servers:n,mode:"manual"},oe.info("[".concat(this._clientId,"] Set turnserver ").concat(i?"by initialize call":""," success.")),fr("info",this,"setTurnServer",[...arguments],"success")}startProxyServer(n){const i=Kt.reportApiInvoke(this._sessionId,{name:hr.START_PROXY_SERVER,options:[],tag:sr.TRACER});if("DISCONNECTED"!==this.connectionState){const h=new Pe(Te.INVALID_OPERATION,"Start proxy server before join channel");throw i.onError(h),h}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const h=new Pe(Te.INVALID_OPERATION,"You have already set the proxy");throw i.onError(h),h}const o=[1,2,3,4,5];let c;switch(void 0===n&&(n=1),n){case 1:c="normal";break;case 2:c="443only";break;case 3:c="proxy3";break;case 4:c="proxy4";break;case 5:c="proxy5";break;default:{const h=new Pe(Te.INVALID_PARAMS,"proxy server mode must be ".concat(o.join("|")));throw i.onError(h),h}}this._cloudProxyServerMode=c,this.store.cloudProxyServerMode=c,oe.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),fr("info",this,"startProxyServer",this._cloudProxyServerMode),i.onSuccess()}stopProxyServer(){const n=Kt.reportApiInvoke(this._sessionId,{name:hr.STOP_PROXY_SERVER,options:[],tag:sr.TRACER});if("DISCONNECTED"!==this.connectionState)throw new Pe(Te.INVALID_OPERATION,"Stop proxy server after leave channel");Kt.setProxyServer(),oe.setProxyServer(),Iy(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",oe.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),fr("info",this,"stopProxyServer",this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},n.onSuccess()}setLocalAccessPoints(n,i){if(TS(n,"serverList"),Tc(i,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Pe(Te.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const o=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(c=>o.test(c)?"".concat(c.replace(/\./g,"-"),".").concat(i):c),this._useLocalAccessPoint=!0,cc("WEBCS_DOMAIN",n),cc("WEBCS_DOMAIN_BACKUP_LIST",n),cc("GATEWAY_DOMAINS",[i]),cc("EVENT_REPORT_DOMAIN",n[0]),cc("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),cc("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),oe.info("set local access point success"),fr("info",this,"setLocalAccessPoints")}setRemoteDefaultVideoStreamType(n){var i=this;return L(function*(){if(fa(n,"streamType",[0,1]),i._remoteDefaultVideoStreamType=n,i._joinInfo)try{yield i._gateway.setDefaultRemoteVideoStreamType(n),i._joinInfo.defaultVideoStream=i._remoteDefaultVideoStreamType}catch(o){throw oe.error("[".concat(i._clientId,"] set default remote video stream type error"),o.toString()),o}else oe.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(n))})()}setRemoteVideoStreamType(n,i){var o=this;return L(function*(){fa(i,"streamType",[0,1]);const c=Kt.reportApiInvoke(o._sessionId,{name:hr.SET_REMOTE_VIDEO_STREAM_TYPE,options:[n,i],tag:sr.TRACER});try{yield o._gateway.setRemoteVideoStreamType(n,i),setTimeout(()=>{const h=o._users.find(g=>g.uid===n);h&&h.videoTrack&&h.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(h){throw c.onError(h),oe.error("[".concat(o._clientId,"] set remote video stream type error"),h.toString()),fr("error",o,"setRemoteVideoStreamType",void 0,h.toString()),h}oe.info("[".concat(o._clientId,"] set remote ").concat(n," video stream type to ").concat(i)),fr("info",o,"setRemoteVideoStreamType",{uid:n,streamType:i}),o._remoteStreamTypeCacheMap.set(n,i),c.onSuccess()})()}setStreamFallbackOption(n,i){var o=this;return L(function*(){fa(i,"fallbackType",[0,1,2]);const c=Kt.reportApiInvoke(o._sessionId,{name:hr.SET_STREAM_FALLBACK_OPTION,options:["too long to show",i],tag:sr.TRACER});try{yield o._gateway.setStreamFallbackOption(n,i)}catch(h){throw c.onError(h),oe.error("[".concat(o._clientId,"] set stream fallback option"),h.toString()),fr("error",o,"setStreamFallbackOption",void 0,h.toString()),h}oe.info("[".concat(o._clientId,"] set remote ").concat(n," stream fallback type to ").concat(i)),fr("info",o,"setStreamFallbackOption",{uid:n,fallbackType:i}),o._streamFallbackTypeCacheMap.set(n,i),c.onSuccess()})()}setEncryptionConfig(n,i,o){if(fa(n,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"]),Tc(i,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!o||!(o instanceof Uint8Array&&32===o.length))throw new Pe(Te.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(o)throw new Pe(Te.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(i)||(oe.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),xn("warning",this,"The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      ")),this._encryptionMode=n,this._encryptionSecret=i,o&&(this._encryptionSalt=g1(o))}renewToken(n){var i=this;return L(function*(){Tc(n,"token",1,2047);const o=Kt.reportApiInvoke(i._sessionId,{name:hr.RENEW_TOKEN,options:[n],tag:sr.TRACER});if(!i._key||!i._joinInfo){const g=new Pe(Te.INVALID_OPERATION,"renewToken should not be called before user join");return o.onError(g),g.throw()}const c=i._key;i._key=n,i._joinInfo&&(i._joinInfo.token=n);const h=yield i._renewTokenMutex.lock();try{if(Bt("USE_NEW_TOKEN")){oe.debug("start renew token with ticket from unilbs"),fr("debug",i,"renewToken","unilbs");const g=yield function xQ(n,i,o){return Q4.apply(this,arguments)}(i._joinInfo,i._axiosCancelSource.token,i._config.httpRetryConfig||Xo);oe.debug("[".concat(i._clientId,"] get ticket from unilbs success")),fr("debug",i,"renewToken","unilbs","success"),yield i._gateway.renewToken({token:n,ticket:g})}else oe.debug("start renew token without ticket"),fr("debug",i,"renewToken"),yield i._gateway.renewToken({token:n});oe.debug("[".concat(i._clientId,"] renewToken success")),fr("debug",i,"renewToken",void 0,"success"),o.onSuccess()}catch(g){throw i._key=c,i._joinInfo.token=c,o.onError(g),oe.error("[".concat(i._clientId,"] renewToken failed"),g.toString()),fr("error",i,"renewToken",void 0,g.toString()),g}finally{h()}})()}enableAudioVolumeIndicator(){const n=Kt.reportApiInvoke(this._sessionId,{name:hr.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:sr.TRACER});if(this._audioVolumeIndicationInterval)return oe.warning("you have already enabled audio volume indicator!"),fr("warning",this,"enableAudioVolumeIndicator","you have already enabled audio volume indicator!"),n.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const i=this._p2pChannel.getAudioLevels();this.emit(br.VOLUME_INDICATOR,i)},Bt("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),n.onSuccess()}getRTCStats(){const n=this._statsCollector.getRTCStats(),i=this._gateway.getInChannelInfo();return n.Duration=Math.round(i.duration/1e3),n}startLiveStreaming(n,i){const o=Kt.reportApiInvoke(this._sessionId,{name:hr.START_LIVE_STREAMING,options:[n,i],tag:sr.TRACER});if(!i){if("h264"!==this._codec){const h=new Pe(Te.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return o.onError(h),Qn.reject(h)}if(!this._p2pChannel.hasLocalMedia()){const h=new Pe(Te.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return o.onError(h),Qn.reject(h)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n)){const h=new Pe(Te.LIVE_STREAMING_TASK_CONFLICT);return o.onError(h),Qn.reject(h)}const c=i?os.TRANSCODE:os.RAW;return this._createLiveStreamingClient(c).startLiveStreamingTask(n,c).then(()=>o.onSuccess()).catch(h=>{throw o.onError(h),h})}setLiveTranscoding(n){const i=Kt.reportApiInvoke(this._sessionId,{name:hr.SET_LIVE_TRANSCODING,options:[n],tag:sr.TRACER});return this._createLiveStreamingClient(os.TRANSCODE).setTranscodingConfig(n).then(()=>i.onSuccess()).catch(o=>{throw i.onError(o),o})}stopLiveStreaming(n){const i=Kt.reportApiInvoke(this._sessionId,{name:hr.STOP_LIVE_STREAMING,options:[n],tag:sr.TRACER}),o=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(c=>c&&c.hasUrl(n));if(!o.length){const c=new Pe(Te.INVALID_PARAMS,"can not find live streaming url to stop");return i.onError(c),Qn.reject(c)}return Qn.all(o.map(c=>c&&c.stopLiveStreamingTask(n))).then(()=>i.onSuccess()).catch(c=>{throw i.onError(c),c})}addInjectStreamUrl(n,i){var o=this;return L(function*(){const c=Kt.reportApiInvoke(o._sessionId,{name:hr.ADD_INJECT_STREAM_URL,options:[n,i],tag:sr.TRACER});try{if(!o._joinInfo)throw new Pe(Te.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const h=o._createLiveStreamingClient(os.INJECT);h.setInjectStreamConfig(i,0),yield h.startLiveStreamingTask(n,os.INJECT)}catch(h){throw c.onError(h),h}c.onSuccess()})()}removeInjectStreamUrl(){var n=this;return L(function*(){const i=Kt.reportApiInvoke(n._sessionId,{name:hr.REMOVE_INJECT_STREAM_URL,options:[],tag:sr.TRACER});try{var o;const c=n._createLiveStreamingClient(os.INJECT),h=Array.from(Lg(o=c.streamingTasks).call(o)).find(g=>g.mode===os.INJECT);if(!n._joinInfo||!h)throw new Pe(Te.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");yield c.stopLiveStreamingTask(h.url)}catch(c){throw i.onError(c),c}i.onSuccess()})()}startChannelMediaRelay(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(i._sessionId,{name:hr.START_CHANNEL_MEDIA_RELAY,options:[n],tag:sr.TRACER});try{K4(n),yield i._createChannelMediaRelayClient().startChannelMediaRelay(n)}catch(c){return o.onError(c),c.throw()}o.onSuccess()})()}updateChannelMediaRelay(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(i._sessionId,{name:hr.UPDATE_CHANNEL_MEDIA_RELAY,options:[n],tag:sr.TRACER});try{K4(n),yield i._createChannelMediaRelayClient().updateChannelMediaRelay(n)}catch(c){return o.onError(c),c.throw()}o.onSuccess()})()}stopChannelMediaRelay(){var n=this;return L(function*(){const i=Kt.reportApiInvoke(n._sessionId,{name:hr.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:sr.TRACER});try{yield n._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(o){return i.onError(o),o.throw()}i.onSuccess()})()}sendStreamMessage(n){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new Pe(Te.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof n&&(n=(new TextEncoder).encode(n)),new Blob([n]).size>1024)throw new Pe(Te.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(hi.DATA_STREAM,{payload:g1(n)},!i)}sendMetadata(n){if(!this._joinInfo)throw new Pe(Te.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new Pe(Te.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(hi.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:g1(n)})}sendCustomReportMessage(n){var i=this;return L(function*(){Array.isArray(n)||(n=[n]),n.forEach(ZU);const o=Kt.reportApiInvoke(i._sessionId,{name:hr.SEND_CUSTOM_REPORT_MESSAGE,options:[JSON.stringify(n)],tag:sr.TRACER});if(!i._joinInfo){const c=new Pe(Te.INVALID_OPERATION,"can not send custom report, not joined");return o.onError(c),c.throw()}yield Kt.sendCustomReportMessage(i._joinInfo.sid,n),o.onSuccess()})()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}pickSVCLayer(n,i){var o=this;return L(function*(){fa(i.spatialLayer,"spatialLayer",[0,1,2,3]),fa(i.temporalLayer,"temporalLayer",[0,1,2,3]);try{yield o._gateway.pickSVCLayer(n,i)}catch(c){throw oe.error("[".concat(o._clientId,"] pick SVC layer failed"),c.toString()),Yt("error",o,"pickSVCLayer",i,c.toString()),c}})()}_reset(){if(oe.debug("[".concat(this._clientId,"] reset client")),Yt("debug",this,"_reset"),this._axiosCancelSource.cancel(),this._axiosCancelSource=ul.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new cu("client-publish"),this._subscribeMutex=new cu("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}}_startSession(n,i){const o=n||w9();oe.debug(n?"[".concat(this._clientId,"] new Session ").concat(o):"[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(o)),Yt("debug",this,"_startSession",{newSid:o,sid:this._sessionId}),this._sessionId=o,this.store.sessionId=o,i?Kt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:i.channel,appid:i.appId,mode:this._mode}):this._joinInfo?Kt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Kt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}_publishHighStream(n){var i=this;return L(function*(){if(!i._joinInfo||void 0===i._uid)throw new Pe(Te.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==i.connectionState&&"RECONNECTING"!==i.connectionState)throw new Pe(Te.INVALID_OPERATION,"can not publish stream in ".concat(i.connectionState," state"));if("auto"===i._turnServer.mode&&Bt("FORCE_TURN")&&!Bt("TURN_ENABLE_TCP")&&!Bt("TURN_ENABLE_UDP"))throw new Pe(Te.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");oe.debug("[".concat(i._clientId,"] publish high stream")),Yt("debug",i,"_publishHighStream");try{const c=yield i._p2pChannel.publish(n,i._isDualStreamEnabled,i._lowStreamParameter),h=(yield c.next()).value;if(h){var o;let g;try{g=yield i._gateway.publish(i._uid,h,!0)}catch(p){if(p.code!==Te.DISCONNECT_P2P)throw c.throw(p),p}yield c.next((null===(o=g)||void 0===o?void 0:o.ortc)||[])}i._p2pChannel.reportPublishEvent(!0,null);for(const g of n)g instanceof Os&&g._encoderConfig&&i._gateway.setVideoProfile(g._encoderConfig),!g.muted&&g.enabled||(yield i._p2pChannel.muteLocalTrack(g))}catch(c){if(i._p2pChannel.reportPublishEvent(!1,c?.code,n),c?.code===Te.WS_ABORT)return;throw c}})()}_publishLowStream(){var n=this;return L(function*(){if(!n._joinInfo||void 0===n._uid)throw new Pe(Te.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==n.connectionState&&"RECONNECTING"!==n.connectionState)throw new Pe(Te.INVALID_OPERATION,"can not publish stream in ".concat(n.connectionState," state"));oe.debug("[".concat(n._clientId,"] publish low stream")),Yt("debug",n,"_publishLowStream");const i=n._configDistribute.getLowStreamConfigDistribute();i&&i.bitrate&&(n._lowStreamParameter||(n._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),n._lowStreamParameter&&n._lowStreamParameter.bitrate&&i.bitrate<n._lowStreamParameter.bitrate&&(n._lowStreamParameter.bitrate=i.bitrate));try{const c=yield n._p2pChannel.publishLowStream(n._lowStreamParameter),h=(yield c.next()).value;if(h){var o;let g;try{g=yield n._gateway.publish(n._uid,h,!0)}catch(p){if(p.code!==Te.DISCONNECT_P2P)throw c.throw(p),p}c.next((null===(o=g)||void 0===o?void 0:o.ortc)||[]),n._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(c){if(n._p2pChannel.reportPublishEvent(!1,c?.code,void 0,!0),c?.code===Te.WS_ABORT)return;throw c}})()}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new Pe(Te.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const i=()=>new VQ(this._joinInfo,this._config.websocketRetryConfig||Xo,this._config.httpRetryConfig||Xo),o=c=>{c.onLiveStreamError=(h,g)=>{Kt.reportApiInvoke(this._sessionId,{name:hr.ON_LIVE_STREAM_ERROR,options:[h,g],tag:sr.TRACER}).onSuccess(),this.emit(br.LIVE_STREAMING_ERROR,h,g)},c.onLiveStreamWarning=(h,g)=>{Kt.reportApiInvoke(this._sessionId,{name:hr.ON_LIVE_STREAM_WARNING,options:[h,g],tag:sr.TRACER}).onSuccess(),this.emit(br.LIVE_STREAMING_WARNING,h,g)},c.on(zf.REQUEST_WORKER_MANAGER_LIST,(h,g,p)=>{if(!this._joinInfo)return p(new Pe(Te.INVALID_OPERATION,"can not find join info to get worker manager"));PQ(h,this._joinInfo,this._axiosCancelSource.token,Xo).then(g).catch(p)})};switch(n){case os.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=i(),o(this._liveRawStreamingClient)),this._liveRawStreamingClient;case os.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=i(),o(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case os.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=i(),this._injectStreamingClient.on(zf.REQUEST_WORKER_MANAGER_LIST,(c,h,g)=>{if(!this._joinInfo)return g(new Pe(Te.INVALID_OPERATION,"can not find join info to get worker manager"));PQ(c,this._joinInfo,this._axiosCancelSource.token,Xo).then(h).catch(g)}),this._injectStreamingClient.onInjectStatusChange=(c,h,g)=>{this.emit(br.INJECT_STREAM_STATUS,c,h,g)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new m2(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Xo,this._config.httpRetryConfig||Xo),this._channelMediaRelayClient.on("state",n=>{n===Ua.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(br.CHANNEL_MEDIA_RELAY_STATE,n)}),this._channelMediaRelayClient.on("event",n=>{this.emit(br.CHANNEL_MEDIA_RELAY_EVENT,n)})),this._channelMediaRelayClient):new Pe(Te.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){var n=this;this._gateway.on(fs.DISCONNECT_P2P,L(function*(){yield n._p2pChannel.disconnectForReconnect()})),this._gateway.on(fs.CONNECTION_STATE_CHANGE,(i,o,c)=>{var h;if(c===Ls.FALLBACK)return;const g=()=>{this.emit(br.CONNECTION_STATE_CHANGE,i,o,c)};if(Kt.reportApiInvoke(this._sessionId||(null===(h=this._gateway.joinInfo)||void 0===h?void 0:h.sid)||null,{name:hr.CONNECTION_STATE_CHANGE,options:[i,o,c],tag:sr.TRACER}).onSuccess(JSON.stringify({cur:i,prev:o,reason:c})),oe.info("[".concat(this._clientId,"] connection state change: ").concat(o," -> ").concat(i)),yo("info",this,"connection-state-change","".concat(o," -> ").concat(i)),"DISCONNECTED"===i)return this._reset(),void g();if("RECONNECTING"===i)this._users.forEach(v=>{v._trust_in_room_=!1,v._trust_audio_enabled_state_=!1,v._trust_video_enabled_state_=!1,v._trust_audio_mute_state_=!1,v._trust_video_mute_state_=!1,v._trust_audio_stream_added_state_=!1,v._trust_video_stream_added_state_=!1,v._audioSSRC=void 0,v._videoSSRC=void 0,v._videoOrtc=void 0,v._audioOrtc=void 0,v._cname=void 0,v._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===i){var p;this._streamFallbackTypeCacheMap.forEach((v,_)=>{this._gateway.setStreamFallbackOption(_,v).catch(y=>{oe.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),y),xn("warning",this,"auto set stream fallback option failed, ".concat(y.toString()))})}),this._remoteStreamTypeCacheMap.forEach((v,_)=>{this._gateway.setRemoteVideoStreamType(_,v).catch(y=>{oe.warning("[".concat(this._clientId,"] auto set remote stream type failed"),y),xn("warning",this,"auto set remote stream type failed, ".concat(y.toString()))})}),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(p=this._joinInfo)||void 0===p?void 0:p.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{oe.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(v=>{oe.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(v))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter(v=>!v._trust_in_room_).forEach(v=>{oe.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(v.uid)),xn("debug",this,"user offline timeout, emit user offline ".concat(v.uid)),this._handleUserOffline({uid:v.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach(v=>{v._trust_audio_mute_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(v.uid)),xn("debug",this,"auto dispatch audio unmute event ".concat(v.uid)),this._handleMuteStream(v.uid,"audio",!1)),v._trust_video_mute_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(v.uid)),xn("debug",this,"auto dispatch video unmute event ".concat(v.uid)),this._handleMuteStream(v.uid,"video",!1)),v._trust_audio_enabled_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(v.uid)),xn("debug",this,"auto dispatch enable local audio ".concat(v.uid)),this._handleSetStreamLocalEnable("audio",v.uid,!0)),v._trust_video_enabled_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(v.uid)),xn("debug",this,"auto dispatch enable local video ".concat(v.uid)),this._handleSetStreamLocalEnable("video",v.uid,!0)),v._trust_video_stream_added_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(v.uid)),this._handleResetAddStream(v,"video")),v._trust_audio_stream_added_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(v.uid)),this._handleResetAddStream(v,"audio")),v._video_added_||v._audio_added_||(oe.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(v.uid)),xn("debug",this,"auto dispatch stream remove ".concat(v.uid)),this._handleRemoveStream({uid:v.uid,uint_id:v._uintid}))}))},1e3)}g()}),this._gateway.on(fs.REQUEST_NEW_GATEWAY_LIST,(i,o)=>{if(!this._joinInfo)return o(new Pe(Te.UNEXPECTED_ERROR,"can not recover, no join info"));L1(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Xo,this.store).then(c=>{this._joinInfo&&(this._joinInfo.apResponse=c.gatewayInfo.res,this._joinInfo.gatewayAddrs=c.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=c.gatewayInfo.uni_lbs_ip),i(c.gatewayInfo.gatewayAddrs.map(h=>{if(this._joinInfo&&this._joinInfo.proxyServer){const g=h.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(g[0],"&p=").concat(g[1])}return"wss://".concat(h.address)}))}).catch(o)}),this._gateway.on(fs.NETWORK_QUALITY,i=>{"normal"===this._networkQualitySensitivity&&this.emit(br.NETWORK_QUALITY,i)}),this._gateway.on(fs.STREAM_TYPE_CHANGE,(i,o)=>{this.emit(br.STREAM_TYPE_CHANGED,i,o),Kt.reportApiInvoke(this._sessionId,{name:hr.STREAM_TYPE_CHANGE,options:[i,o],tag:sr.TRACER}).onSuccess(JSON.stringify({uid:i,streamType:o}))}),this._gateway.on(fs.IS_P2P_DISCONNECTED,i=>{this._p2pChannel.isP2PDisconnected()?i(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?i(!1):i(!0)}),this._gateway.on(fs.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(fs.REQUEST_P2P_CONNECTION_PARAMS,function(){var i=L(function*(o,c,h){try{c(yield n._p2pChannel.startP2PConnection(o))}catch(g){h(g)}});return function(o,c,h){return i.apply(this,arguments)}}()),this._gateway.on(fs.JOIN_RESPONSE,(i,o,c)=>{const{dtlsParameters:h,iceParameters:g,candidates:p,rtpCapabilities:v,setup:_,cname:y}=z5(i.ortc,o,c);this._p2pChannel.connect(g,h,p,v,_,y)}),this._gateway.signal.on(Fi.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Fi.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Fi.ON_ADD_AUDIO_STREAM,i=>this._handleAddAudioOrVideoStream("audio",i.uid,i.ssrcId,i.cname,i.uint_id,i.ortc)),this._gateway.signal.on(Fi.ON_ADD_VIDEO_STREAM,i=>this._handleAddAudioOrVideoStream("video",i.uid,i.ssrcId,i.cname,i.uint_id,i.ortc,i.rtxSsrcId)),this._gateway.signal.on(Fi.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Fi.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Fi.MUTE_AUDIO,i=>(yo("debug",["AgoraRTCGateway",this._clientId],"mute_audio",{uid:i.uid}),this._handleMuteStream(i.uid,"audio",!0))),this._gateway.signal.on(Fi.UNMUTE_AUDIO,i=>(yo("debug",["AgoraRTCGateway",this._clientId],"unmute_audio",{uid:i.uid}),this._handleMuteStream(i.uid,"audio",!1))),this._gateway.signal.on(Fi.MUTE_VIDEO,i=>(yo("debug",["AgoraRTCGateway",this._clientId],"mute_video",{uid:i.uid}),this._handleMuteStream(i.uid,"video",!0))),this._gateway.signal.on(Fi.UNMUTE_VIDEO,i=>(yo("debug",["AgoraRTCGateway",this._clientId],"unmute_video",{uid:i.uid}),this._handleMuteStream(i.uid,"video",!1))),this._gateway.signal.on(Fi.RECEIVE_METADATA,i=>{const o=jk(i.metadata);this.emit(br.RECEIVE_METADATA,i.uid,o)}),this._gateway.signal.on(Fi.ON_DATA_STREAM,i=>{i.seq&&delete i.seq,i.payload=jk(i.payload),this.emit(br.STREAM_MESSAGE,i.uid,i.payload),this.onStreamMessage&&this.onStreamMessage(i)}),this._gateway.signal.on(Fi.ON_CRYPT_ERROR,()=>{m1(()=>{oe.warning("[".concat(this._clientId,"] on crypt error")),yo("warning",this,"crypt_error"),this.emit(br.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Fi.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Fi.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{oe.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),yo("warning",this,"token_privilege_did_expire"),this._gateway.leave(!0),this.emit(br.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Fi.ON_STREAM_FALLBACK_UPDATE,i=>{oe.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(i.stream_id,", attr: ").concat(i.stream_type)),yo("debug",this,"stream_fallback_update",{peerId:i.stream_id,attr:i.stream_type}),this.emit(br.STREAM_FALLBACK,i.stream_id,1===i.stream_type?"fallback":"recover")}),this._gateway.signal.on(Fi.ON_PUBLISH_STREAM,i=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:i.proxy})),oe.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(i))),yo("info",this,"publish_stream",i))}),this._gateway.signal.on(Fi.ENABLE_LOCAL_VIDEO,i=>{this._handleSetStreamLocalEnable("video",i.uid,!0)}),this._gateway.signal.on(Fi.DISABLE_LOCAL_VIDEO,i=>{this._handleSetStreamLocalEnable("video",i.uid,!1)}),this._gateway.signal.on(Zr.REQUEST_TIMEOUT,(i,o)=>{if(this._joinInfo)switch(i){case hi.PUBLISH:{if(!o)return;const v=o.ortc;if(v){var c,h,g,p;const _=v.some(C=>{let{stream_type:w}=C;return w===ss.Audio}),y=v.some(C=>{let{stream_type:w}=C;return w!==ss.Audio}),b=v.some(C=>{let{stream_type:w}=C;return w===ss.Screen||w===ss.ScreenLow});"offer"===o.state&&Kt.publish(this._joinInfo.sid,{eventElapse:gl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:Te.TIMEOUT,audio:_,video:y,p2pid:o.p2p_id,publishRequestid:this.store.pubId,screenshare:b,audioName:_?null===(c=v.find(C=>{let{stream_type:w}=C;return w===ss.Audio}))||void 0===c||null===(h=c.ssrcs[0])||void 0===h?void 0:h.ssrcId.toString():void 0,videoName:y?null===(g=v.find(C=>{let{stream_type:w}=C;return w!==ss.Audio}))||void 0===g||null===(p=g.ssrcs[0])||void 0===p?void 0:p.ssrcId.toString():void 0})}break}case hi.SUBSCRIBE:o&&Kt.subscribe(this._joinInfo.sid,{succ:!1,ec:Te.TIMEOUT,audio:o.stream_type===ei.AUDIO,video:o.stream_type===ei.VIDEO,peerid:o.stream_id,subscribeRequestid:o.ssrcId,p2pid:this.store.p2pId,eventElapse:gl.measureFromSubscribeStart(this.store.clientId,o.ssrcId)})}}),this._gateway.signal.on(Fi.ON_P2P_OK,i=>{}),this._gateway.signal.on(Fi.ON_PUBLISHED_USER_LIST,i=>{if(null==i||!i.users)return;const o=[],c=[];for(const h of i.users){let g=this._users.find(b=>b.uid===h.stream_id);g?g._trust_in_room_=!0:(g=new A2(h.stream_id,h.stream_id),this._users.push(g),0===this.getListeners(br.PUBLISHED_USER_LIST).length&&(oe.debug("[".concat(this._clientId,"] user online"),h.stream_id),Ld("info",this,"user-joined",{uid:h.stream_id}),this.emit(br.USER_JOINED,g)));const p=Mo.Audio&h.stream_type,v=(Mo.Video|Mo.LwoVideo)&h.stream_type,_=p&&g.hasAudio,y=v&&g.hasVideo;v&&(g._trust_video_stream_added_state_=!0,g._video_added_=!0,g._videoSSRC=h.video_ssrc),p&&(g._trust_audio_stream_added_state_=!0,g._audio_added_=!0,g._audioSSRC=h.audio_ssrc),p&&!_&&0===this.getListeners(br.PUBLISHED_USER_LIST).length&&(oe.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published audio")),xn("info",this,"remote user ".concat(g.uid," published audio")),this.emit(br.USER_PUBLISHED,g,"audio")),v&&!y&&0===this.getListeners(br.PUBLISHED_USER_LIST).length&&(oe.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published video")),xn("info",this,"remote user ".concat(g.uid," published video")),this.emit(br.USER_PUBLISHED,g,"video")),(p&&!_||v&&!y)&&o.push(g),v&&this._p2pChannel.hasPendingRemoteMedia(g,"video")&&c.push({user:g,mediaType:"video"}),p&&this._p2pChannel.hasPendingRemoteMedia(g,"audio")&&c.push({user:g,mediaType:"audio"})}c.length>0&&(oe.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(c.map(h=>"user: ".concat(h.user.uid,", mediaType: ").concat(h.mediaType)).join("; ")," ")),this.massSubscribe(c).catch(h=>{oe.error("[".concat(this._clientId,"] mass resubscribe error"),h.toString())})),this.getListeners(br.PUBLISHED_USER_LIST).length>0?(oe.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(o.map(h=>h.uid).join(", "))),this.emit(br.PUBLISHED_USER_LIST,o)):oe.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(o.map(h=>h.uid).join(", ")))})}_handleP2PChannelEvents(){var n=this;this._p2pChannel.on(bi.RequestMuteLocal,function(){var i=L(function*(o,c,h){if(n._joinInfo)try{yield n._gateway.muteLocal(o,n._joinInfo.stringUid||n._joinInfo.uid),c()}catch(g){g.code===Te.DISCONNECT_P2P?c():h(g)}else c()});return function(o,c,h){return i.apply(this,arguments)}}()),this._p2pChannel.on(bi.RequestUnmuteLocal,function(){var i=L(function*(o,c,h){if(n._joinInfo)try{yield n._gateway.unmuteLocal(o,n._joinInfo.stringUid||n._joinInfo.uid),c()}catch(g){g.code===Te.DISCONNECT_P2P?c():h(g)}else c()});return function(o,c,h){return i.apply(this,arguments)}}()),this._p2pChannel.on(bi.RequestRePublish,(i,o,c)=>{this.publish(i,!1).then(o).catch(c)}),this._p2pChannel.on(bi.RequestReSubscribe,function(){var i=L(function*(o,c,h){try{for(const{user:g,kind:p}of o)p===ei.VIDEO?yield n.subscribe(g,"video"):yield n.subscribe(g,"audio");c()}catch(g){h(g)}});return function(o,c,h){return i.apply(this,arguments)}}()),this._p2pChannel.on(bi.RequestUploadStats,(i,o)=>{this._gateway.uploadStats(i,o)}),this._p2pChannel.on(bi.MediaReconnectStart,i=>{this.emit(br.MEDIA_RECONNECT_START,i)}),this._p2pChannel.on(bi.MediaReconnectEnd,i=>{this.emit(br.MEDIA_RECONNECT_END,i)}),this._p2pChannel.on(bi.NeedSignalRTT,i=>{i(this._gateway.getSignalRTT())}),this._p2pChannel.on(bi.RequestRestartICE,L(function*(){const i=yield n._p2pChannel.reEstablish();if(i){const{restartICEResponse:o,gatewayIP:c,gatewayPort:h}=yield n._gateway.restartICE({iceParameters:i.iceParameters}),{candidates:g,iceParameters:p}=function(v,_,y){const b=v.iceParameters;let C;return void 0!==_&&void 0!==y?(C=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:_,port:y.toString(),type:"host",extension:{}}],oe.debug("Using remote candidate from AP ".concat(_,":").concat(y)),xn("debug",[],"Using remote candidate from AP ".concat(_,":").concat(y))):C=b.candidates.map(w=>({foundation:w.foundation,componentId:"1",transport:w.protocol,priority:w.priority.toString(),connectionAddress:w.ip,port:w.port.toString(),type:w.type,extension:{}})),{candidates:C,iceParameters:{iceUfrag:b.iceUfrag,icePwd:b.icePwd}}}(o,c,h);yield i.restartICE(p,g)}})),this._p2pChannel.on(bi.RequestReconnect,L(function*(){n._gateway.reconnect()})),this._p2pChannel.on(bi.RequestReconnectPC,L(function*(){var i;const{iceParameters:o,dtlsParameters:c,rtpCapabilities:h}=yield n._p2pChannel.startP2PConnection({turnServer:null===(i=n._joinInfo)||void 0===i?void 0:i.turnServer}),{gatewayEstablishParams:g,gatewayIP:p,gatewayPort:v}=yield n._gateway.reconnectPC({iceParameters:o,dtlsParameters:c,rtpCapabilities:h}),{dtlsParameters:_,iceParameters:y,candidates:b,rtpCapabilities:C,setup:w,cname:P}=z5(g,p,v);yield n._p2pChannel.connect(y,_,b,C,w,P),yield n._p2pChannel.republish(),yield n._p2pChannel.reSubscribe()})),this._p2pChannel.on(bi.RequestUnpublishForReconnectPC,function(){var i=L(function*(o,c,h){n._joinInfo&&void 0!==n._uid?(yield n._gateway.unpublish(o,n._uid),c()):h()});return function(o,c,h){return i.apply(this,arguments)}}()),this._p2pChannel.on(bi.P2PLost,()=>{this.emit(br.P2P_LOST,this.store.uid)}),this._p2pChannel.on(bi.UpdateVideoEncoder,i=>{i._encoderConfig&&this._gateway.setVideoProfile(i._encoderConfig)}),this._p2pChannel.on(bi.ConnectionTypeChange,i=>{this.emit(br.IS_USING_CLOUD_PROXY,i)}),this._p2pChannel.on(bi.RequestLowStreamParameter,i=>{i(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})}getKeyMetrics(){return this.store.keyMetrics}enableContentInspect(n){var i=this;return L(function*(){if("CONNECTED"!==i.connectionState||!i._joinInfo)throw new Pe(Te.INVALID_OPERATION,"[".concat(i._clientId,"] Client did not join channel"));if(i._inspect)throw new Pe(Te.INVALID_OPERATION,"[".concat(i._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new Pe(Te.INVALID_PARAMS,"[".concat(i._clientId,"] inspectConfig is necessary"));if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new Pe(Te.INVALID_PARAMS,"[".concat(i._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const o=new q2(n);i._inspect=o,i.handleVideoInspectEvents(i._inspect),yield o.init({appId:i._joinInfo.appId,areaCode:"",cname:i._joinInfo.cname,sid:i._joinInfo.sid,token:i._joinInfo.token,uid:i._joinInfo.uid,cid:i._joinInfo.cid,vid:i._joinInfo.vid?Number(i._joinInfo.vid):0},Xo)}catch(o){throw Array.isArray(o)?o[0]:o}})()}disableContentInspect(){var n=this;return L(function*(){if(!n._inspect)throw new Pe(Te.INVALID_OPERATION,"[".concat(n._clientId,"] inspectVideoContent not started"));try{n._inspect.close(),n._inspect=void 0}catch(i){throw Array.isArray(i)?i[0]:i}})()}handleVideoInspectEvents(n){n.on($o.CONNECTION_STATE_CHANGE,(i,o)=>{if(this.emit(br.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,i,o),o===Nu.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.emit(br.CONTENT_INSPECT_ERROR,new Pe(Te.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on($o.INSPECT_RESULT,(i,o)=>{var c;if(o?.code===Te.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return oe.debug("Stop inspect content because that has left channel"),null==this||null===(c=this._inspect)||void 0===c||c.close(),void(this._inspect=void 0);this.emit(br.CONTENT_INSPECT_RESULT,i,o)}),n.on($o.CLIENT_LOCAL_VIDEO_TRACK,i=>{i(this.localTracks.filter(o=>"video"===o.trackMediaType)[0])})}getJoinChannelServiceRecords(){return oe.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}_handleResetAddStream(n,i){switch(i){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"setProxyServer",[xB],Object.getOwnPropertyDescriptor(t.prototype,"setProxyServer"),t.prototype),ir(t.prototype,"setTurnServer",[J2],Object.getOwnPropertyDescriptor(t.prototype,"setTurnServer"),t.prototype),ir(t.prototype,"setLocalAccessPoints",[LB],Object.getOwnPropertyDescriptor(t.prototype,"setLocalAccessPoints"),t.prototype),ir(t.prototype,"setRemoteDefaultVideoStreamType",[vj],Object.getOwnPropertyDescriptor(t.prototype,"setRemoteDefaultVideoStreamType"),t.prototype),ir(t.prototype,"setEncryptionConfig",[_G],Object.getOwnPropertyDescriptor(t.prototype,"setEncryptionConfig"),t.prototype),ir(t.prototype,"pickSVCLayer",[vG],Object.getOwnPropertyDescriptor(t.prototype,"pickSVCLayer"),t.prototype),ir(t.prototype,"enableContentInspect",[AG],Object.getOwnPropertyDescriptor(t.prototype,"enableContentInspect"),t.prototype),ir(t.prototype,"disableContentInspect",[aw],Object.getOwnPropertyDescriptor(t.prototype,"disableContentInspect"),t.prototype),ir(t.prototype,"getJoinChannelServiceRecords",[yG],Object.getOwnPropertyDescriptor(t.prototype,"getJoinChannelServiceRecords"),t.prototype),r=t))||r);class m extends Dk{set currentState(i){i!==this._currentState&&(this._currentState=i,this.emit(wc.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),q(this,"audioBuffer",void 0),q(this,"sourceNode",void 0),q(this,"startPlayTime",0),q(this,"startPlayOffset",0),q(this,"pausePlayTime",0),q(this,"options",void 0),q(this,"currentLoopCount",0),q(this,"_currentState","stopped"),this.audioBuffer=i,this.options=o,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(i){"stopped"===this.currentState?(this.options=i,this.startPlayOffset=this.options.startPlayTime||0):oe.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(i){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=i,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=i))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const i=this.context.createBufferSource();return i.buffer=this.audioBuffer,i.loop=!!this.options.loop,i.connect(this.outputNode),i}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const E=new Map;function k(){return k=L(function*(n,i){let o=null;if("string"==typeof n){const h=E.get(n);if(h)return oe.debug("use cached audio resource: ",n),h;try{o=(yield Hl(()=>ul.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(g){throw new Pe(Te.FETCH_AUDIO_FILE_FAILED,g.toString())}}else o=yield new Qn((g,p)=>{const v=new FileReader;v.onload=_=>{_.target?g(_.target.result):p(new Pe(Te.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{p(new Pe(Te.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(n)});const c=yield function(h){const g=l1();return new Qn((p,v)=>{g.decodeAudioData(h,_=>{p(_)},_=>{v(new Pe(Te.DECODE_AUDIO_FILE_FAILED,_.toString()))})})}(o);return"string"==typeof n&&i&&E.set(n,c),c}),k.apply(this,arguments)}function F(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function ee(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?F(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):F(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function me(n,i,o,c){o.optimizationMode&&(c&&c.width&&c.height?(o.encoderConfig=ee(ee({},c),{},{bitrateMin:c.bitrateMin,bitrateMax:c.bitrateMax}),"motion"!==o.optimizationMode&&"detail"!==o.optimizationMode||(i.contentHint=o.optimizationMode,i.contentHint===o.optimizationMode?(oe.debug("[".concat(n,"] set content hint to"),o.optimizationMode),fr("debug",["AgoraRTC"],"videoTrackOptimizationModeProcess",[n,o,c])):(oe.debug("[".concat(n,"] set content hint failed")),fr("warning",["AgoraRTC"],"videoTrackOptimizationModeProcess",[n,o,c],"failed")))):(oe.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")),xn("warning",["AgoraRTC"],"[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig"))))}const Le=zi().name;function Ke(n,i,o,c){let h,g=0,p=null;return new Qn((v,_)=>{setTimeout(()=>{h&&(h(),v(g))},i),h=vV(()=>{!function(){g>c&&h&&(h(),v(g));const y=o.getContext("2d");if(!y){const w=new Pe(Te.UNEXPECTED_ERROR,"can not get canvas 2d context.");return oe.error(w.toString()),void _(w)}y.drawImage(n,0,0,160,120);const b=y.getImageData(0,0,o.width,o.height),C=Math.floor(b.data.length/3);if(p){for(let w=0;w<C;w+=3)if(b.data[w]!==p[w])return g+=1,void(p=b.data);p=b.data}else p=b.data}()},30)})}class rt{constructor(i,o){q(this,"id",0),q(this,"element",void 0),q(this,"peerPair",void 0),q(this,"context",void 0),q(this,"audioPlayerElement",void 0),q(this,"audioTrack",void 0),rt.count+=1,this.id=rt.count,this.element=i,this.context=o}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=i=>{const o=document.createElement("audio");o.srcObject=new MediaStream([i.track]),o.play(),this.audioPlayerElement=o}}switchSdp(){var i=this;return L(function*(){if(!i.peerPair)return;const o=function(){var h=L(function*(g,p){const v="offer"===p?yield g.createOffer():yield g.createAnswer();return yield g.setLocalDescription(v),"complete"===g.iceGatheringState?g.localDescription:new Qn(_=>{g.onicegatheringstatechange=()=>{"complete"===g.iceGatheringState&&_(g.localDescription)}})});return function(p,v){return h.apply(this,arguments)}}(),c=function(){var h=L(function*(g,p){return yield g.setRemoteDescription(p)});return function(p,v){return h.apply(this,arguments)}}();try{const h=yield o(i.peerPair[0],"offer");yield c(i.peerPair[1],h);const g=yield o(i.peerPair[1],"answer");yield c(i.peerPair[0],g)}catch(h){throw new Pe(Te.LOCAL_AEC_ERROR,h.toString()).print()}})()}getTracksFromMediaElement(i){var o=this;return L(function*(){if(o.audioTrack)return o.audioTrack;let c;try{i instanceof HTMLVideoElement&&(i.captureStream?i.captureStream():i.mozCaptureStream()),c=o.context.createMediaStreamDestination(),o.context.createMediaElementSource(i).connect(c)}catch(g){throw new Pe(Te.LOCAL_AEC_ERROR,g.toString()).print()}if(!c)throw new Pe(Te.LOCAL_AEC_ERROR,"no dest node when local aec").print();const h=c.stream.getAudioTracks()[0];return o.audioTrack=h,h})()}getElement(){return this.element}startEchoCancellation(){var i=this;return L(function*(){i.context.resume(),i.peerPair&&i.close(),i.initPeers();const o=i.element,c=yield i.getTracksFromMediaElement(o);i.peerPair&&i.peerPair[0].addTrack(c),yield i.switchSdp()})()}close(){oe.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(i=>{i.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var Ct,Jt;q(rt,"count",0);const tn=window.AudioContext||window.webkitAudioContext,Vn=new(Ct=a1({report:Kt}),ir((Jt=class{constructor(){q(this,"units",[]),q(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return oe.debug("the system does not need to process local aec"),-1;this.context||(this.context=new tn);let i=this.units.find(o=>o&&o.getElement()===n);return i||(i=new rt(n,this.context),this.units.push(i)),i.startEchoCancellation(),oe.debug("start processing local audio echo cancellation, id is",i.id),i.id}_doesEnvironmentNeedAEC(){return zi().name!==Li.SAFARI}}).prototype,"processExternalMediaAEC",[Ct],Object.getOwnPropertyDescriptor(Jt.prototype,"processExternalMediaAEC"),Jt.prototype),Jt);cc("PROCESS_ID","process-".concat(cs(8,""),"-").concat(cs(4,""),"-").concat(cs(4,""),"-").concat(cs(4,""),"-").concat(cs(12,""))),function(){const n=zi();uc.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),uc.getStreamFromExtension=n.name===Li.CHROME&&Number(n.version)>34,uc.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const i=new RTCPeerConnection;let o=!1;try{i.addTransceiver("audio"),o=!0}catch{}return i.close(),o}(),uc.supportMinBitrate=n.name===Li.CHROME||n.name===Li.EDGE,uc.supportSetRtpSenderParameters=function(){const i=zi();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!NT()||!(!Md()&&!RD())||i.name===Li.FIREFOX&&Number(i.version)>=64)}(),n.name===Li.SAFARI&&(uc.supportDualStream=Number(n.version)>=14),uc.webAudioMediaStreamDest=function(){const i=zi();return!(i.name===Li.SAFARI&&Number(i.version)<12)}(),uc.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,uc.supportWebGL=typeof WebGLRenderingContext<"u",uc.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,NT()||(uc.webAudioWithAEC=!0),uc.supportShareAudio=function(){const i=zi();return(i.os===pa.WIN_10||i.os===pa.WIN_81||i.os===pa.WIN_7||i.os===pa.LINUX||i.os===pa.MAC_OS)&&i.name===Li.CHROME&&Number(i.version)>=74}(),uc.supportDualStreamEncoding=function(){const i=zi();return"Safari"===i.name&&Number(i.version)>=14}(),oe.info("browser compatibility",JSON.stringify(uc),JSON.stringify(n)),Yt("info",[],"updateAgoraRTCCompatibility",{browserCompatibility:uc,browserInfo:n})}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(i){return void oe.error("Error loading sdk config",i.message)}if(n)try{const i=JSON.parse(window.atob(n)),o=Date.now();oe.debug("Loading global parameters from cache",i),Yt("debug",[],"loadConfigFromLocalStorage",i),Object.keys(i).forEach(c=>{if(Object.prototype.hasOwnProperty.call(Ou,c)){const{value:h,expires:g}=i[c];if(g&&g<=o)return;jU[c]=h,Ou[c]=h}})}catch(i){oe.error("Error loading mutableParamsCache: ".concat(n),i.message)}}();const nn={__CLIENT_LIST__:QT,__TRACK_LIST__:SS,VERSION:ll,BUILD:LM,setParameter:cc,getParameter:Bt,getSupportedCodec:function(){var n=L(function*(){let i={audio:[],video:[]};try{let o=new RTCPeerConnection;o.addTransceiver("video",{direction:"recvonly"}),o.addTransceiver("audio",{direction:"recvonly"});const c=(yield o.createOffer()).sdp;if(!c)return i;o.close(),o=null,i=function(h){const g={video:[],audio:[]};return h.match(/ VP8/i)&&g.video.push("VP8"),h.match(/ VP9/i)&&g.video.push("VP9"),h.match(/ AV1/i)&&g.video.push("AV1"),h.match(/ H264/i)&&g.video.push("H264"),h.match(/ opus/i)&&g.audio.push("OPUS"),h.match(/ PCMU/i)&&g.audio.push("PCMU"),h.match(/ PCMA/i)&&g.audio.push("PCMA"),h.match(/ G722/i)&&g.audio.push("G722"),g}(c)}catch(o){throw new Pe(Te.CREATE_OFFER_FAILED,o.toString&&o.toString()).print()}return i});return function(){return n.apply(this,arguments)}}(),checkSystemRequirements:function(){const n=Kt.reportApiInvoke(null,{name:hr.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:sr.TRACER});let i=!1;try{const g=window.RTCPeerConnection,p=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,v=window.WebSocket;i=!!(g&&p&&v)}catch(g){return oe.error("check system requirement failed: ",g),!1}let o=!1;const c=zi();c.name===Li.CHROME&&Number(c.version)>=58&&(!function AM(){return"WebKit"===Tg.engine.name}()||function vM(){const n=zi();if(RD()){if(n.os===pa.MAC_OS)return!0;if(n.os===pa.IOS){const i=Tg.os.version&&Tg.os.version.split(".");if(i&&14===Number(i[0])&&i[1]&&Number(i[1])>=3||i&&Number(i[0])>14)return!0}}return!1}())&&(o=!0),c.name===Li.FIREFOX&&Number(c.version)>=56&&(o=!0),c.name===Li.OPERA&&Number(c.version)>=45&&(o=!0),c.name===Li.SAFARI&&Number(c.version)>=11&&(o=!0),(w8()||zi().name===Li.QQ)&&(o=!0),oe.debug("checkSystemRequirements, api:",i,"browser",o);const h=i&&o;return n.onSuccess(h),h},getDevices:function(n){return ml.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return ml.getRecordingDevices(n)},getCameras:function(n){return ml.getCamerasDevices(n)},getElectronScreenSources:AV,getPlaybackDevices:function(n){return ml.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const i=Kt.reportApiInvoke(null,{name:hr.CREATE_CLIENT,options:[n],tag:sr.TRACER});try{YM(n)}catch(o){throw i.onError(o),o}return void 0===n.audioCodec&&(n.audioCodec="opus"),i.onSuccess(),new l(s(s({forceWaitGatewayResponse:!0},n),{},{role:"rtc"===n.mode?"host":n.role}))},createCameraVideoTrack:function(){var n=L(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{encoderConfig:"480p_1"};const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_CAM_VIDEO_TRACK,options:[ee({},i)]}),c=$L(i),h=cs(8,"track-cam-");let g=null;oe.info("start create camera video track with config",JSON.stringify(i),"trackId",h),fr("info",["AgoraRTC"],"createCameraVideoTrack",i);try{g=(yield Pu({video:c},h)).getVideoTracks()[0]||null}catch(v){throw o.onError(v),v}if(!g){const v=new Pe(Te.UNEXPECTED_ERROR,"can not find track in media stream");return o.onError(v),v.throw()}i.optimizationMode&&me(h,g,i,i.encoderConfig&&wy(i.encoderConfig));const p=new p5(g,i,c,i.scalabiltyMode?UT(i.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},i.optimizationMode,h);return o.onSuccess(p.getTrackId()),oe.info("create camera video success, trackId:",h),fr("info",["AgoraRTC"],"createCameraVideoTrack",void 0,h),p});return function(){return n.apply(this,arguments)}}(),createCustomVideoTrack:function(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),o=new Os(n.mediaStreamTrack,{bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?UT(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode);return i.onSuccess(o.getTrackId()),oe.info("create custom video track success with config",n,"trackId",o.getTrackId()),fr("info",["AgoraRTC"],"createCustomVideoTrack",n,o.getTrackId()),o},createScreenVideoTrack:function(){var n=L(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_SCREEN_VIDEO_TRACK,options:[ee({},i),o]});i.encoderConfig?"string"==typeof i.encoderConfig||i.encoderConfig.width&&i.encoderConfig.height||(i.encoderConfig.width={max:1920},i.encoderConfig.height={max:1080}):i.encoderConfig="1080p_2";const h=ZQ(i),g=cs(8,"track-scr");let p=null,v=null;const _=Oc();if(!_.supportShareAudio&&"enable"===o){const C=new Pe(Te.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return c.onError(C),C.throw()}oe.info("start create screen video track with config",i,"withAudio",o,"trackId",g),fr("info",["AgoraRTC"],"createScreenVideoTrack",[i,o]);try{const C=yield Pu({screen:h,screenAudio:"auto"===o?_.supportShareAudio:"enable"===o},g);p=C.getVideoTracks()[0]||null,v=C.getAudioTracks()[0]||null}catch(C){throw c.onError(C),C}if(!p){const C=new Pe(Te.UNEXPECTED_ERROR,"can not find track in media stream");return c.onError(C),C.throw()}if(!v&&"enable"===o){p&&p.stop();const C=new Pe(Te.SHARE_AUDIO_NOT_ALLOWED);return c.onError(C),C.throw()}i.optimizationMode||(i.optimizationMode="detail"),i.optimizationMode&&(me(g,p,i,i.encoderConfig&&BM(i.encoderConfig)),i.encoderConfig&&"string"!=typeof i.encoderConfig&&(i.encoderConfig.bitrateMin=i.encoderConfig.bitrateMax));const y=new Os(p,i.encoderConfig?BM(i.encoderConfig):{},i.scalabiltyMode?UT(i.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},i.optimizationMode,g,[Rc.SCREEN_TRACK]);if(!v)return c.onSuccess(y.getTrackId()),oe.info("create screen video track success","video:",y.getTrackId()),fr("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:y.getTrackId()}),y;const b=new Ha(v);return c.onSuccess([y.getTrackId(),b.getTrackId()]),oe.info("create screen video track success","video:",y.getTrackId(),"audio:",b.getTrackId()),fr("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:y.getTrackId(),audioTrack:b.getTrackId()}),[y,b]});return function(){return n.apply(this,arguments)}}(),createMicrophoneAndCameraTracks:function(){var n=L(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoderConfig:"480p_1"};const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_MIC_AND_CAM_TRACKS,options:[i,o]}),h=$L(o),g=eH(i),p=cs(8,"track-mic-"),v=cs(8,"track-cam-");let _=null,y=null;oe.info("start create camera video track(".concat(v,") and microphone audio track(").concat(p,") with config, audio: ").concat(JSON.stringify(i),", video: ").concat(JSON.stringify(o))),fr("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",{videoConfig:o,audioConfig:i});try{const w=yield Pu({audio:g,video:h},"".concat(p,"-").concat(v));_=w.getAudioTracks()[0],y=w.getVideoTracks()[0]}catch(w){throw c.onError(w),w}if(!_||!y){const w=new Pe(Te.UNEXPECTED_ERROR,"can not find tracks in media stream");return c.onError(w),w.throw()}o.optimizationMode&&me(v,y,o,o.encoderConfig&&wy(o.encoderConfig));const b=new Hy(_,i,g,p),C=new p5(y,o,h,o.scalabiltyMode?UT(o.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},o.optimizationMode,v);return c.onSuccess([b.getTrackId(),C.getTrackId()]),oe.info("create camera video track(".concat(v,") and microphone audio track(").concat(p,") success")),fr("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",void 0,{videoTrackId:v,audioTrackId:p}),[b,C]});return function(){return n.apply(this,arguments)}}(),createMicrophoneAudioTrack:function(){var n=L(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_MIC_AUDIO_TRACK,options:[i]}),c=eH(i),h=cs(8,"track-mic-");let g=null;oe.info("start create microphone audio track with config",JSON.stringify(i),"trackId",h),fr("info",["AgoraRTC"],"createMicrophoneAudioTrack",i);try{g=(yield Pu({audio:c},h)).getAudioTracks()[0]||null}catch(v){throw o.onError(v),v}if(!g){const v=new Pe(Te.UNEXPECTED_ERROR,"can not find track in media stream");return o.onError(v),v.throw()}const p=new Hy(g,i,c,h);return o.onSuccess(p.getTrackId()),oe.info("create microphone audio track success, trackId:",h),fr("info",["AgoraRTC"],"createMicrophoneAudioTrack",i,h),p});return function(){return n.apply(this,arguments)}}(),createCustomAudioTrack:function(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),o=new Ha(n.mediaStreamTrack,n.encoderConfig?VT(n.encoderConfig):{});return oe.info("create custom audio track success with config",n,"trackId",o.getTrackId()),fr("info",["AgoraRTC"],"createCustomAudioTrack",n,o.getTrackId()),i.onSuccess(o.getTrackId()),o},createBufferSourceAudioTrack:function(){var n=L(function*(i){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_BUFFER_AUDIO_TRACK,options:[i]}),c=cs(8,"track-buf-");oe.info("start create buffer source audio track with config",JSON.stringify(i),"trackId",c),fr("info",[],"createBufferSourceAudioTrack",i);const h=i.source;if(!(i.source instanceof AudioBuffer))try{i.source=yield function I(n,i){return k.apply(this,arguments)}(i.source,i.cacheOnlineFile)}catch(v){return o.onError(v),v.throw()}const g=new m(i.source),p=new OV(h,g,i.encoderConfig?VT(i.encoderConfig):{},c);return oe.info("create buffer source audio track success, trackId:",c),fr("info",["AgoraRTC"],"createBufferSourceAudioTrack",void 0,c),o.onSuccess(p.getTrackId()),p});return function(o){return n.apply(this,arguments)}}(),setLogLevel:function(n){Bt("USE_NEW_LOG")?function(i){i=Math.min(Math.max(0,i),4),FU=i}(n):oe.setLogLevel(n)},enableLogUpload:function(){Bt("USE_NEW_LOG")?cc("UPLOAD_LOG",!0):oe.enableLogUpload()},disableLogUpload:function(){Bt("USE_NEW_LOG")?cc("UPLOAD_LOG",!1):oe.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new zL},checkAudioTrackIsActive:function(){var n=L(function*(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[o]});if(!(i instanceof Ha||i instanceof h0)){const y=new Pe(Te.INVALID_TRACK,"the parameter is not a audio track");return c.onError(y),y.throw()}o&&o<1e3&&(o=1e3);const h=i instanceof Ha?i.getTrackLabel():"remote_track",g=i.getVolumeLevel();let p=g,v=g;const _=Date.now();return new Qn(y=>{const b=setInterval(()=>{const C=i.getVolumeLevel();p=C>p?C:p,v=C<v?C:v;const w=p-v>1e-4,P=Date.now()-_;if(w||P>o){clearInterval(b);const j=w,G={duration:P,deviceLabel:h,maxVolumeLevel:p,result:j};oe.info("[track-".concat(i.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(G))),c.onSuccess(G),y(j)}},200)})});return function(o){return n.apply(this,arguments)}}(),checkVideoTrackIsActive:function(){var n=L(function*(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[o]});if(!(i instanceof Os||i instanceof iw)){const P=new Pe(Te.INVALID_TRACK,"the parameter is not a video track");return c.onError(P),P.throw()}const h=4;o&&o<1e3&&(o=1e3);const g=i instanceof Os?i.getTrackLabel():"remote_track",p=i.getMediaStreamTrack(!0),v=document.createElement("video");v.style.width="1px",v.style.height="1px",v.setAttribute("muted",""),v.muted=!0,v.setAttribute("playsinline",""),v.controls=!1,(Md()||RD())&&(v.style.opacity="0.01",v.style.position="fixed",v.style.left="0",v.style.top="0",document.body.appendChild(v)),v.srcObject=new MediaStream([p]),v.play();const _=document.createElement("canvas");_.width=160,_.height=120;let y=0,b=0;try{const P=Date.now();y=yield Ke(v,o,_,h),b=Date.now()-P}catch(P){throw c.onError(P),P}Le===Li.SAFARI&&(v.pause(),v.remove()),v.srcObject=null;const C=y>h,w={duration:b,changedPicNum:y,deviceLabel:g,result:C};return oe.info("[track-".concat(i.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(w))),c.onSuccess(w),C});return function(o){return n.apply(this,arguments)}}(),setArea:function(n){const i=Kt.reportApiInvoke(null,{name:hr.SET_AREA,options:n,tag:sr.TRACER});try{let o=[];if("string"==typeof n&&(o=[n]),Array.isArray(n)&&(n.forEach(h=>{if(!YD.includes(h))throw new Pe(Te.INVALID_PARAMS,"invalid area code")}),o=n),"[object Object]"===Object.prototype.toString.call(n)){const{areaCode:h,excludedArea:g}=n;if(!h)throw new Pe(Te.INVALID_PARAMS,"area code is needed");let p=h;"string"==typeof h&&(p=[h]),o=g?function(n,i){let o=[];if(n.includes(vi.GLOBAL)){const g=[vi.GLOBAL,vi.OVERSEA],p=Object.keys(KT);if(i===vi.GLOBAL)throw new Pe(Te.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(i===vi.CHINA)o=[vi.OVERSEA];else if(jL.includes(i)){const v=l2[vi.GLOBAL][i]||[],_=[...g,i,...v];o=p.filter(y=>!_.includes(y))}else if(function(v){let _=!1;return jL.forEach(y=>{l2[vi.GLOBAL][y].includes(v)&&(_=!0)}),_}(i)){const v=function(y){let b;return jL.forEach(C=>{l2[vi.GLOBAL][C].includes(y)&&(b=C)}),b}(i),_=[...g,v,i];o=p.filter(y=>!_.includes(y))}else o=n;o=function(v){const _=[];return F4.forEach(y=>{v.includes(y)&&_.push(y)}),_.concat(v.filter(y=>!F4.includes(y)))}(o)}else o=n;return o}(p,g):p}cc("AREAS",o);const c=(h=>{const g={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return h.map(p=>{const v=KT[p],_=Object.keys(v);_&&_.map(y=>{"CODE"!==y&&(g[y]=g[y].concat(v[y]))})}),g})(o);Object.keys(c).map(h=>{cc(h,"LOG_UPLOAD_SERVER"===h||"EVENT_REPORT_DOMAIN"===h||"EVENT_REPORT_BACKUP_DOMAIN"===h||"PROXY_SERVER_TYPE3"===h?c[h][0]:c[h])}),oe.debug("set area success:",o.join(","))}catch(o){throw i.onError(o),o}i.onSuccess()},loadModule:function(){var n=L(function*(i,o){if(oe.debug("loadModule: ".concat(i.name,", loadOption: ").concat(JSON.stringify(o))),!i.moduleInit)throw oe.debug("Invalid Plugin"),new Pe(Te.INVALID_PLUGIN,"invalid plugin");try{u1.installPlugin(i),yield i.moduleInit({logger:oe,report:Kt,pluginCenter:u1,getParameter:Bt},o)}catch(c){throw new Pe(Te.UNEXPECTED_ERROR,"unexpected error in loadModule",c)}});return function(o,c){return n.apply(this,arguments)}}(),audioElementPlayCenter:Yl,processExternalMediaAEC:function(n){Vn.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(i=>{const o=i;o.__registered__=!0,o.logger.hookLog=oe.extLog,o.reporter.hookApiInvoke=Kt.extApiInvoke,o.parameters&&Object.keys(o.parameters).forEach(c=>{o.parameters[c]=Bt(c)})})},ChannelMediaRelayError:Dg,ChannelMediaRelayEvent:Op,ChannelMediaRelayState:Ua,RemoteStreamFallbackType:o3,RemoteStreamType:XM,ConnectionDisconnectedReason:Ls,AudienceLatencyLevelType:WD,AREAS:vi};return Object.defineProperties(nn,{onAudioAutoplayFailed:{get:()=>Kl.onAudioAutoplayFailed,set:n=>{Kl.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>Kl.onAutoplayFailed,set:n=>{Kl.onAutoplayFailed=n}}}),ml.on(Kf.CAMERA_DEVICE_CHANGED,n=>{oe.info("camera device changed",JSON.stringify(n)),nn.onCameraChanged&&nn.onCameraChanged(n)}),ml.on(Kf.RECORDING_DEVICE_CHANGED,n=>{oe.info("microphone device changed",JSON.stringify(n)),nn.onMicrophoneChanged&&nn.onMicrophoneChanged(n)}),ml.on(Kf.PLAYOUT_DEVICE_CHANGED,n=>{oe.debug("playout device changed",JSON.stringify(n)),nn.onPlaybackDeviceChanged&&nn.onPlaybackDeviceChanged(n)}),Yl.onAutoplayFailed=()=>{oe.info("detect audio element autoplay failed"),Kl.onAudioAutoplayFailed&&Kl.onAudioAutoplayFailed()},Yr.on("autoplay-failed",()=>{oe.info("detect webaudio autoplay failed"),Kl.onAudioAutoplayFailed&&Kl.onAudioAutoplayFailed()}),window&&(window.__ARTC__=nn),nn}()},9069:Ie=>{"use strict";var L,Oe="object"==typeof Reflect?Reflect:null,Y=Oe&&"function"==typeof Oe.apply?Oe.apply:function(pe,Ee,Ae){return Function.prototype.apply.call(pe,Ee,Ae)};L=Oe&&"function"==typeof Oe.ownKeys?Oe.ownKeys:Object.getOwnPropertySymbols?function(pe){return Object.getOwnPropertyNames(pe).concat(Object.getOwnPropertySymbols(pe))}:function(pe){return Object.getOwnPropertyNames(pe)};var ne=Number.isNaN||function(pe){return pe!=pe};function Q(){Q.init.call(this)}Ie.exports=Q,Ie.exports.once=function K(De,pe){return new Promise(function(Ee,Ae){function ge(de){De.removeListener(pe,re),Ae(de)}function re(){"function"==typeof De.removeListener&&De.removeListener("error",ge),Ee([].slice.call(arguments))}ve(De,pe,re,{once:!0}),"error"!==pe&&function se(De,pe,Ee){"function"==typeof De.on&&ve(De,"error",pe,Ee)}(De,ge,{once:!0})})},Q.EventEmitter=Q,Q.prototype._events=void 0,Q.prototype._eventsCount=0,Q.prototype._maxListeners=void 0;var U=10;function D(De){if("function"!=typeof De)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof De)}function O(De){return void 0===De._maxListeners?Q.defaultMaxListeners:De._maxListeners}function N(De,pe,Ee,Ae){var ge,re,de;if(D(Ee),void 0===(re=De._events)?(re=De._events=Object.create(null),De._eventsCount=0):(void 0!==re.newListener&&(De.emit("newListener",pe,Ee.listener?Ee.listener:Ee),re=De._events),de=re[pe]),void 0===de)de=re[pe]=Ee,++De._eventsCount;else if("function"==typeof de?de=re[pe]=Ae?[Ee,de]:[de,Ee]:Ae?de.unshift(Ee):de.push(Ee),(ge=O(De))>0&&de.length>ge&&!de.warned){de.warned=!0;var we=new Error("Possible EventEmitter memory leak detected. "+de.length+" "+String(pe)+" listeners added. Use emitter.setMaxListeners() to increase limit");we.name="MaxListenersExceededWarning",we.emitter=De,we.type=pe,we.count=de.length,function W(De){console&&console.warn&&console.warn(De)}(we)}return De}function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function J(De,pe,Ee){var Ae={fired:!1,wrapFn:void 0,target:De,type:pe,listener:Ee},ge=x.bind(Ae);return ge.listener=Ee,Ae.wrapFn=ge,ge}function ie(De,pe,Ee){var Ae=De._events;if(void 0===Ae)return[];var ge=Ae[pe];return void 0===ge?[]:"function"==typeof ge?Ee?[ge.listener||ge]:[ge]:Ee?function z(De){for(var pe=new Array(De.length),Ee=0;Ee<pe.length;++Ee)pe[Ee]=De[Ee].listener||De[Ee];return pe}(ge):le(ge,ge.length)}function te(De){var pe=this._events;if(void 0!==pe){var Ee=pe[De];if("function"==typeof Ee)return 1;if(void 0!==Ee)return Ee.length}return 0}function le(De,pe){for(var Ee=new Array(pe),Ae=0;Ae<pe;++Ae)Ee[Ae]=De[Ae];return Ee}function ve(De,pe,Ee,Ae){if("function"==typeof De.on)Ae.once?De.once(pe,Ee):De.on(pe,Ee);else{if("function"!=typeof De.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof De);De.addEventListener(pe,function ge(re){Ae.once&&De.removeEventListener(pe,ge),Ee(re)})}}Object.defineProperty(Q,"defaultMaxListeners",{enumerable:!0,get:function(){return U},set:function(De){if("number"!=typeof De||De<0||ne(De))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+De+".");U=De}}),Q.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Q.prototype.setMaxListeners=function(pe){if("number"!=typeof pe||pe<0||ne(pe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+pe+".");return this._maxListeners=pe,this},Q.prototype.getMaxListeners=function(){return O(this)},Q.prototype.emit=function(pe){for(var Ee=[],Ae=1;Ae<arguments.length;Ae++)Ee.push(arguments[Ae]);var ge="error"===pe,re=this._events;if(void 0!==re)ge=ge&&void 0===re.error;else if(!ge)return!1;if(ge){var de;if(Ee.length>0&&(de=Ee[0]),de instanceof Error)throw de;var we=new Error("Unhandled error."+(de?" ("+de.message+")":""));throw we.context=de,we}var Fe=re[pe];if(void 0===Fe)return!1;if("function"==typeof Fe)Y(Fe,this,Ee);else{var xe=Fe.length,Ve=le(Fe,xe);for(Ae=0;Ae<xe;++Ae)Y(Ve[Ae],this,Ee)}return!0},Q.prototype.on=Q.prototype.addListener=function(pe,Ee){return N(this,pe,Ee,!1)},Q.prototype.prependListener=function(pe,Ee){return N(this,pe,Ee,!0)},Q.prototype.once=function(pe,Ee){return D(Ee),this.on(pe,J(this,pe,Ee)),this},Q.prototype.prependOnceListener=function(pe,Ee){return D(Ee),this.prependListener(pe,J(this,pe,Ee)),this},Q.prototype.off=Q.prototype.removeListener=function(pe,Ee){var Ae,ge,re,de,we;if(D(Ee),void 0===(ge=this._events))return this;if(void 0===(Ae=ge[pe]))return this;if(Ae===Ee||Ae.listener===Ee)0==--this._eventsCount?this._events=Object.create(null):(delete ge[pe],ge.removeListener&&this.emit("removeListener",pe,Ae.listener||Ee));else if("function"!=typeof Ae){for(re=-1,de=Ae.length-1;de>=0;de--)if(Ae[de]===Ee||Ae[de].listener===Ee){we=Ae[de].listener,re=de;break}if(re<0)return this;0===re?Ae.shift():function X(De,pe){for(;pe+1<De.length;pe++)De[pe]=De[pe+1];De.pop()}(Ae,re),1===Ae.length&&(ge[pe]=Ae[0]),void 0!==ge.removeListener&&this.emit("removeListener",pe,we||Ee)}return this},Q.prototype.removeAllListeners=function(pe){var Ee,Ae,ge;if(void 0===(Ae=this._events))return this;if(void 0===Ae.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Ae[pe]&&(0==--this._eventsCount?this._events=Object.create(null):delete Ae[pe]),this;if(0===arguments.length){var de,re=Object.keys(Ae);for(ge=0;ge<re.length;++ge)"removeListener"!==(de=re[ge])&&this.removeAllListeners(de);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Ee=Ae[pe]))this.removeListener(pe,Ee);else if(void 0!==Ee)for(ge=Ee.length-1;ge>=0;ge--)this.removeListener(pe,Ee[ge]);return this},Q.prototype.listeners=function(pe){return ie(this,pe,!0)},Q.prototype.rawListeners=function(pe){return ie(this,pe,!1)},Q.listenerCount=function(De,pe){return"function"==typeof De.listenerCount?De.listenerCount(pe):te.call(De,pe)},Q.prototype.listenerCount=te,Q.prototype.eventNames=function(){return this._eventsCount>0?L(this._events):[]}},302:(Ie,Oe,Y)=>{"use strict";var L=Y(8126);Ie.exports=function W(ne,Q,U,D){var O,N=new Error("Canceled");return new L(function(J,ie,te){var le;ne(function(z){return te()?L.reject(N):(le=Q(z),U(le).then(function(se){if(te())throw N;return O=se()}))}).then(function(z){if(te())throw z.disconnect(),N;J(D(le,z))}).catch(function(z){ie(z)})},function(){O&&O.cancel()})}},5769:(Ie,Oe,Y)=>{"use strict";var L=Y(1647).MediaStreamTrack,W=Y(7627),ne=W.guessBrowser,Q=W.guessBrowserVersion,U=Y(302),D=Y(8130),O=Y(3383),N=Y(3744),x=Y(4920),J=Y(7379),ie=J.LocalAudioTrack,te=J.LocalDataTrack,le=J.LocalVideoTrack,X=Y(4621),z=Y(7406),K=Y(448),se=Y(9739),ve=se.asLocalTrack,De=se.buildLogLevels,pe=se.filterObject,Ee=se.isNonArrayObject,Ae=Y(8701),ge=Ae.DEFAULT_ENVIRONMENT,re=Ae.DEFAULT_LOG_LEVEL,de=Ae.DEFAULT_LOGGER_NAME,we=Ae.DEFAULT_REALM,Fe=Ae.DEFAULT_REGION,xe=Ae.WS_SERVER,Ve=Ae.SDK_NAME,ze=Ae.SDK_VERSION,Ze=Ae.typeErrors,je=Y(8126),xt=Y(8606),Wt=Y(1458),ht=Y(1501).kG,qe="safari"===ne()&&Q(),Ue=0,Ye=!1,Re=!1;if(qe){var tt=qe.major;Re=tt<12||12===tt&&qe.minor<1}var zt=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),kt=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function At(kn,dn,Xi){Xi.forEach(function(Zo){var es=Zo.didWarn,fo=Zo.name,Ss=Zo.newName,oo=Zo.shouldDelete;fo in kn&&typeof kn[fo]<"u"&&(Ss&&oo&&(kn[Ss]=kn[fo]),oo&&delete kn[fo],!es&&!["error","off"].includes(dn.level)&&(dn.warn('The ConnectOptions "'+fo+'" is '+(Ss?'deprecated and scheduled for removal. Please use "'+Ss+'" instead.':"no longer applicable and will be ignored.")),Zo.didWarn=!0))})}function Ht(kn,dn,Xi,Zo,es,fo){var Ss=kn.createLocalParticipantSignaling(Xi,Zo);return dn.debug("Creating a new LocalParticipant:",Ss),new es.LocalParticipant(Ss,fo,es)}function $t(kn,dn,Xi){var Zo=new z(dn,Xi,kn),es=kn.log;return es.debug("Creating a new Room:",Zo),Xi.on("stateChanged",function fo(Ss){"disconnected"===Ss&&(es.info("Disconnected from Room:",Zo.toString()),Xi.removeListener("stateChanged",fo))}),Zo}function Xe(kn,dn,Xi,Zo,es,fo){return dn.log.debug("Creating a new RoomSignaling"),Xi.connect(fo._signaling,kn,Zo,es,dn)}function Me(kn,dn){var Xi=kn.log;return kn.shouldStopLocalTracks=!kn.tracks,kn.shouldStopLocalTracks?Xi.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(Xi.info("Getting LocalTracks"),Xi.debug("Options:",kn)),kn.createLocalTracks(kn).then(function(es){var fo=dn(es);return fo.catch(function(){kn.shouldStopLocalTracks&&(Xi.info("The automatically acquired LocalTracks will now be stopped"),es.forEach(function(oo){oo.stop()}))}),fo})}function st(kn){var dn="string"==typeof kn?{codec:kn}:kn;switch(dn.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},dn);case"vp8":return Object.assign({simulcast:!1},dn);default:return dn}}Ie.exports=function mt(kn,dn){if(typeof dn>"u"&&(dn={}),!Ee(dn))return je.reject(Ze.INVALID_TYPE("options","object"));var oo,Xi=dn.Log||Wt,Zo=dn.loggerName||de,es=dn.logLevel||re,fo=De(es),Ss="[connect #"+ ++Ue+"]";try{oo=new Xi("default",Ss,fo,Zo)}catch(Rr){return je.reject(Rr)}At(dn,oo,zt);var Pc="auto"===dn.preferredVideoCodecs;if(Pc&&(dn.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),dn.maxVideoBitrate&&Pc)return oo.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),je.reject(Ze.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));var jn={};"string"==typeof(dn=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:ge,eventListener:null,insights:!0,LocalAudioTrack:ie,LocalDataTrack:te,LocalParticipant:O,LocalVideoTrack:le,Log:Xi,MediaStreamTrack:L,loggerName:Zo,logLevel:es,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:we,region:Fe,signaling:K},pe(dn))).wsServerInsights&&(jn.gateway=dn.wsServerInsights);var Ne=new(dn.insights?N:x)(kn,Ve,ze,dn.environment,dn.realm,jn),dt=xe(dn.environment,dn.region),Zt=new xt(Ne,Date.now(),oo,dn.eventListener);if((dn=Object.assign({eventObserver:Zt,wsServer:dt},dn)).log=oo,Re&&!Ye&&"error"!==oo.logLevel&&"off"!==oo.logLevel&&(Ye=!0,oo.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof kn)return je.reject(Ze.INVALID_TYPE("token","string"));var en=Object.assign({},dn);if(delete en.name,"tracks"in dn){if(!Array.isArray(dn.tracks))return je.reject(Ze.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{dn.tracks=dn.tracks.map(function(Rr){return ve(Rr,en)})}catch(Rr){return je.reject(Rr)}}var gn=ht(dn.bandwidthProfile);if(gn)return je.reject(gn);dn.clientTrackSwitchOffControl="disabled",dn.contentPreferencesMode="disabled",dn.bandwidthProfile&&(dn.clientTrackSwitchOffControl="auto",dn.contentPreferencesMode="auto",dn.bandwidthProfile.video&&(At(dn.bandwidthProfile.video,oo,kt),dn.clientTrackSwitchOffControl="maxTracks"in dn.bandwidthProfile.video?"disabled":"manual"===dn.bandwidthProfile.video.clientTrackSwitchOffControl?"manual":"auto",dn.contentPreferencesMode="renderDimensions"in dn.bandwidthProfile.video?"disabled":"manual"===dn.bandwidthProfile.video.contentPreferencesMode?"manual":"auto"));var bo=new(0,dn.signaling)(dn.wsServer,dn);oo.info("Connecting to a Room"),oo.debug("Options:",dn);var Cs=new D({maxAudioBitrate:dn.maxAudioBitrate,maxVideoBitrate:dn.maxVideoBitrate},Pc),ts={audio:dn.preferredAudioCodecs.map(st),video:dn.preferredVideoCodecs.map(st)},mo=new X(Ee(dn.networkQuality)?dn.networkQuality:{}),Yn=U(Me.bind(null,dn),Ht.bind(null,bo,oo,Cs,mo,dn),Xe.bind(null,kn,dn,bo,Cs,ts),$t.bind(null,dn));return Yn.then(function(Rr){return Ne.connect(Rr.sid,Rr.localParticipant.sid),oo.info("Connected to Room:",Rr.toString()),oo.info("Room name:",Rr.name),oo.debug("Room:",Rr),Rr.once("disconnected",function(){return Ne.disconnect()}),Rr},function(Rr){Ne.disconnect(),Yn._isCanceled?oo.info("Attempt to connect to a Room was canceled"):oo.info("Error while connecting to a Room:",Rr)}),Yn}},8765:(Ie,Oe,Y)=>{"use strict";var L=Y(8701),W=L.DEFAULT_LOG_LEVEL,ne=L.DEFAULT_LOGGER_NAME;function Q(O,N){N=Object.assign({loggerName:ne,logLevel:W},N);var x={};x.loggerName=N.loggerName,x.logLevel=N.logLevel,delete N.loggerName,delete N.logLevel;var J=N.createLocalTracks;return delete N.createLocalTracks,x[O]=!(Object.keys(N).length>0)||N,J(x).then(function(ie){return ie[0]})}Ie.exports={audio:function U(O){return Q("audio",O)},video:function D(O){return Q("video",O)}}},7124:function(Ie,Oe,Y){"use strict";var L=this&&this.__assign||function(){return L=Object.assign||function(ge){for(var re,de=1,we=arguments.length;de<we;de++)for(var Fe in re=arguments[de])Object.prototype.hasOwnProperty.call(re,Fe)&&(ge[Fe]=re[Fe]);return ge},L.apply(this,arguments)},W=this&&this.__awaiter||function(ge,re,de,we){return new(de||(de=Promise))(function(xe,Ve){function ze(xt){try{je(we.next(xt))}catch(Wt){Ve(Wt)}}function Ze(xt){try{je(we.throw(xt))}catch(Wt){Ve(Wt)}}function je(xt){xt.done?xe(xt.value):function Fe(xe){return xe instanceof de?xe:new de(function(Ve){Ve(xe)})}(xt.value).then(ze,Ze)}je((we=we.apply(ge,re||[])).next())})},ne=this&&this.__generator||function(ge,re){var we,Fe,xe,Ve,de={label:0,sent:function(){if(1&xe[0])throw xe[1];return xe[1]},trys:[],ops:[]};return Ve={next:ze(0),throw:ze(1),return:ze(2)},"function"==typeof Symbol&&(Ve[Symbol.iterator]=function(){return this}),Ve;function ze(je){return function(xt){return function Ze(je){if(we)throw new TypeError("Generator is already executing.");for(;de;)try{if(we=1,Fe&&(xe=2&je[0]?Fe.return:je[0]?Fe.throw||((xe=Fe.return)&&xe.call(Fe),0):Fe.next)&&!(xe=xe.call(Fe,je[1])).done)return xe;switch(Fe=0,xe&&(je=[2&je[0],xe.value]),je[0]){case 0:case 1:xe=je;break;case 4:return de.label++,{value:je[1],done:!1};case 5:de.label++,Fe=je[1],je=[0];continue;case 7:je=de.ops.pop(),de.trys.pop();continue;default:if(!(xe=(xe=de.trys).length>0&&xe[xe.length-1])&&(6===je[0]||2===je[0])){de=0;continue}if(3===je[0]&&(!xe||je[1]>xe[0]&&je[1]<xe[3])){de.label=je[1];break}if(6===je[0]&&de.label<xe[1]){de.label=xe[1],xe=je;break}if(xe&&de.label<xe[2]){de.label=xe[2],de.ops.push(je);break}xe[2]&&de.ops.pop(),de.trys.pop();continue}je=re.call(ge,de)}catch(xt){je=[6,xt],Fe=0}finally{we=xe=0}if(5&je[0])throw je[1];return{value:je[0]?je[1]:void 0,done:!0}}([je,xt])}}},Q=this&&this.__read||function(ge,re){var de="function"==typeof Symbol&&ge[Symbol.iterator];if(!de)return ge;var Fe,Ve,we=de.call(ge),xe=[];try{for(;(void 0===re||re-- >0)&&!(Fe=we.next()).done;)xe.push(Fe.value)}catch(ze){Ve={error:ze}}finally{try{Fe&&!Fe.done&&(de=we.return)&&de.call(we)}finally{if(Ve)throw Ve.error}}return xe},U=this&&this.__spreadArray||function(ge,re){for(var de=0,we=re.length,Fe=ge.length;de<we;de++,Fe++)ge[Fe]=re[de];return ge};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.createLocalTracks=void 0;var D=Y(9739),O=D.asLocalTrack,N=D.buildLogLevels,x=Y(1647),J=x.getUserMedia,ie=x.MediaStreamTrack,te=Y(7379),le=te.LocalAudioTrack,X=te.LocalDataTrack,z=te.LocalVideoTrack,K=Y(1458),se=Y(8701),ve=se.DEFAULT_LOG_LEVEL,De=se.DEFAULT_LOGGER_NAME,pe=Y(3830),Ee=0;Oe.createLocalTracks=function Ae(ge){return W(this,void 0,void 0,function(){var re,de,we,Fe,xe,Ve,ze,Ze,je,xt,Wt,ht;return ne(this,function(qe){switch(qe.label){case 0:if(de=L({audio:re=!(ge&&("audio"in ge||"video"in ge)),getUserMedia:J,loggerName:De,logLevel:ve,LocalAudioTrack:le,LocalDataTrack:X,LocalVideoTrack:z,MediaStreamTrack:ie,Log:K,video:re},ge),we="[createLocalTracks #"+ ++Ee+"]",Fe=N(de.logLevel),xe=new de.Log("default",we,Fe,de.loggerName),delete(Ve=Object.assign({log:xe},de)).name,!1===de.audio&&!1===de.video)return xe.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(de.tracks)return xe.info("Adding user-provided LocalTracks"),xe.debug("LocalTracks:",de.tracks),[2,de.tracks];(ze={audio:"object"==typeof de.audio&&de.audio.name?{name:de.audio.name}:{},video:"object"==typeof de.video&&de.video.name?{name:de.video.name}:{}}).audio.isCreatedByCreateLocalTracks=!0,ze.video.isCreatedByCreateLocalTracks=!0,"object"==typeof de.audio&&"boolean"==typeof de.audio.workaroundWebKitBug1208516&&(ze.audio.workaroundWebKitBug1208516=de.audio.workaroundWebKitBug1208516),"object"==typeof de.video&&"boolean"==typeof de.video.workaroundWebKitBug1208516&&(ze.video.workaroundWebKitBug1208516=de.video.workaroundWebKitBug1208516),"object"==typeof de.audio&&delete de.audio.name,"object"==typeof de.video&&delete de.video.name,Ze={audio:de.audio,video:de.video},je="object"==typeof de.audio&&de.audio.workaroundWebKitBug180748,qe.label=1;case 1:return qe.trys.push([1,3,,4]),[4,je?pe(xe,de.getUserMedia,Ze):de.getUserMedia(Ze)];case 2:return xt=qe.sent(),Wt=U(U([],Q(xt.getAudioTracks())),Q(xt.getVideoTracks())),xe.info("Call to getUserMedia successful; got MediaStreamTracks:",Wt),[2,Wt.map(function(Ue){return O(Ue,L(L({},ze[Ue.kind]),Ve))})];case 3:throw ht=qe.sent(),xe.warn("Call to getUserMedia failed:",ht),ht;case 4:return[2]}})})}},2498:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(5295),ne=Y(9020),Q=function(U){function D(O){var N=U.call(this,O.label,O.maxPacketLifeTime,O.maxRetransmits,O.ordered)||this;return Object.defineProperties(N,{_dataChannel:{value:O}}),O.binaryType="arraybuffer",O.addEventListener("message",function(x){N.emit("message",x.data)}),O.addEventListener("close",function(){N.emit("close")}),N}return L(D,U),D.prototype.stop=function(){this._dataChannel.close(),U.prototype.stop.call(this)},D.prototype.toDataTransport=function(){return new ne(this._dataChannel)},D}(W);Ie.exports=Q},1866:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(5295),ne=Y(9739).makeUUID,Q=function(U){function D(O,N,x){var J=U.call(this,ne(),O,N,x)||this;return Object.defineProperties(J,{_clones:{value:new Set},_dataChannels:{value:new Set}}),J}return L(D,U),D.prototype._addClone=function(O){this._clones.add(O)},D.prototype.removeClone=function(O){this._clones.delete(O)},D.prototype.addDataChannel=function(O){return this._dataChannels.add(O),this},D.prototype.clone=function(){var O=this,N=new D(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(N),N.once("stopped",function(){return O.removeClone(N)}),N},D.prototype.removeDataChannel=function(O){return this._dataChannels.delete(O),this},D.prototype.send=function(O){return this._dataChannels.forEach(function(N){try{N.send(O)}catch{}}),this._clones.forEach(function(N){try{N.send(O)}catch{}}),this},D.prototype.stop=function(){this._dataChannels.forEach(function(O){return O.close()}),this._clones.forEach(function(O){return O.stop()}),U.prototype.stop.call(this)},D}(W);Ie.exports=Q},5295:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O,N,x){var J=Q.call(this,D,"data")||this;return Object.defineProperties(J,{maxPacketLifeTime:{enumerable:!0,value:O},maxRetransmits:{enumerable:!0,value:N},ordered:{enumerable:!0,value:x}}),J}return L(U,Q),U}(Y(4605));Ie.exports=ne},9020:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D){var O=Q.call(this)||this;return Object.defineProperties(O,{_dataChannel:{value:D},_messageQueue:{value:[]}}),D.addEventListener("open",function(){O._messageQueue.splice(0).forEach(function(N){return O._publish(N)})}),D.addEventListener("message",function(N){var x=N.data;try{var J=JSON.parse(x);O.emit("message",J)}catch{}}),O.publish({type:"ready"}),O}return L(U,Q),U.prototype._publish=function(D){var O=JSON.stringify(D);try{this._dataChannel.send(O)}catch{}},U.prototype.publish=function(D){var O=this._dataChannel;return"closing"!==O.readyState&&"closed"!==O.readyState&&("connecting"===O.readyState?(this._messageQueue.push(D),!0):(this._publish(D),!0))},U}(Y(9069).EventEmitter);Ie.exports=ne},8130:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this)||this;return D=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},D),Object.defineProperties(N,{maxAudioBitrate:{value:D.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:D.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:O}}),N}return L(U,Q),U.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},U.prototype.update=function(D){var O=this;D=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},D),["maxAudioBitrate","maxVideoBitrate"].reduce(function(x,J){return O[J]!==D[J]&&(O[J]=D[J],x=!0),x},!1)&&this.emit("changed")},U}(Y(9069).EventEmitter);Ie.exports=ne},133:(Ie,Oe,Y)=>{"use strict";var L=Y(9069).EventEmitter,W=Y(9739).hidePrivateAndCertainPublicPropertiesInClass;Ie.exports=W(L,["domain"])},6021:function(Ie,Oe,Y){"use strict";var L=this&&this.__assign||function(){return L=Object.assign||function(X){for(var z,K=1,se=arguments.length;K<se;K++)for(var ve in z=arguments[K])Object.prototype.hasOwnProperty.call(z,ve)&&(X[ve]=z[ve]);return X},L.apply(this,arguments)};Object.defineProperty(Oe,"__esModule",{value:!0});var W=Y(7124),ne=Y(8682),Q={connect:Y(5769),createLocalAudioTrack:Y(8765).audio,createLocalVideoTrack:Y(8765).video,isSupported:Y(8592)(),version:Y(1730).version,Logger:Y(7846),LocalAudioTrack:Y(7379).LocalAudioTrack,LocalDataTrack:Y(7379).LocalDataTrack,LocalVideoTrack:Y(7379).LocalVideoTrack};Ie.exports={connect:function U(X,z){var K=L({createLocalTracks:W.createLocalTracks},z);return Q.connect(X,K)},createLocalAudioTrack:function D(X){var z=L({createLocalTracks:W.createLocalTracks},X);return Q.createLocalAudioTrack(z)},createLocalVideoTrack:function O(X){var z=L({createLocalTracks:W.createLocalTracks},X);return Q.createLocalVideoTrack(z)},createLocalTracks:W.createLocalTracks,runPreflight:ne.runPreflight,isSupported:Q.isSupported,version:Q.version,Logger:Q.Logger,LocalAudioTrack:Q.LocalAudioTrack,LocalVideoTrack:Q.LocalVideoTrack,LocalDataTrack:Q.LocalDataTrack}},3383:function(Ie,Oe,Y){"use strict";var Ee,L=this&&this.__extends||(Ee=function(Ae,ge){return(Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,de){re.__proto__=de}||function(re,de){for(var we in de)Object.prototype.hasOwnProperty.call(de,we)&&(re[we]=de[we])})(Ae,ge)},function(Ae,ge){if("function"!=typeof ge&&null!==ge)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function re(){this.constructor=Ae}Ee(Ae,ge),Ae.prototype=null===ge?Object.create(ge):(re.prototype=ge.prototype,new re)}),W=Y(1647).MediaStreamTrack,ne=Y(9739),Q=ne.asLocalTrack,U=ne.asLocalTrackPublication,D=ne.trackClass,O=Y(8701),N=O.typeErrors,x=O.trackPriority,J=Y(1501).Wv,ie=Y(7379),te=ie.LocalAudioTrack,le=ie.LocalDataTrack,X=ie.LocalVideoTrack,z=Y(3925),K=Y(5229),se=Y(9565),De=function(Ee){function Ae(ge,re,de){var we=this,Fe=(de=Object.assign({LocalAudioTrack:te,LocalVideoTrack:X,LocalDataTrack:le,MediaStreamTrack:W,LocalAudioTrackPublication:z,LocalVideoTrackPublication:se,LocalDataTrackPublication:K,shouldStopLocalTracks:!1,tracks:re},de)).shouldStopLocalTracks?new Set(re.filter(function(xe){return"data"!==xe.kind})):new Set;return we=Ee.call(this,ge,de)||this,Object.defineProperties(we,{_eventObserver:{value:de.eventObserver},_LocalAudioTrack:{value:de.LocalAudioTrack},_LocalDataTrack:{value:de.LocalDataTrack},_LocalVideoTrack:{value:de.LocalVideoTrack},_MediaStreamTrack:{value:de.MediaStreamTrack},_LocalAudioTrackPublication:{value:de.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:de.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:de.LocalVideoTrackPublication},_tracksToStop:{value:Fe},signalingRegion:{enumerable:!0,get:function(){return ge.signalingRegion}}}),we._handleTrackSignalingEvents(),we}return L(Ae,Ee),Ae.prototype._addTrack=function(ge,re,de){var we=Ee.prototype._addTrack.call(this,ge,re);return we&&"disconnected"!==this.state&&this._addLocalTrack(ge,de),we},Ae.prototype._addLocalTrack=function(ge,re){this._signaling.addTrack(ge._trackSender,ge.name,re),this._log.info("Added a new "+D(ge,!0)+":",ge.id),this._log.debug(D(ge,!0)+":",ge)},Ae.prototype._removeTrack=function(ge,re){var de=Ee.prototype._removeTrack.call(this,ge,re);return de&&"disconnected"!==this.state&&(this._signaling.removeTrack(ge._trackSender),this._log.info("Removed a "+D(ge,!0)+":",ge.id),this._log.debug(D(ge,!0)+":",ge)),de},Ae.prototype._getTrackEvents=function(){return Ee.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},Ae.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},Ae.prototype._handleTrackSignalingEvents=function(){var ge=this,re=this._log;if("disconnected"!==this.state){var de=this._signaling;this.on("trackDisabled",we),this.on("trackEnabled",Fe),this.on("trackStopped",xe),this._tracks.forEach(function(ze){ge._addLocalTrack(ze,x.PRIORITY_STANDARD),ge._getOrCreateLocalTrackPublication(ze).catch(function(Ze){re.warn("Failed to get or create LocalTrackPublication for "+ze+":",Ze)})});var Ve=this;de.on("stateChanged",function ze(Ze){re.debug("Transitioned to state:",Ze),"disconnected"===Ze?(re.debug("Removing LocalTrack event listeners"),de.removeListener("stateChanged",ze),Ve.removeListener("trackDisabled",we),Ve.removeListener("trackEnabled",Fe),Ve.removeListener("trackStopped",xe),Ve._tracks.forEach(function(je){var xt=xe(je);xt&&je._trackSender.removeClone(xt._trackTransceiver)}),re.info("LocalParticipant disconnected. Stopping "+Ve._tracksToStop.size+" automatically-acquired LocalTracks"),Ve._tracksToStop.forEach(function(je){je.stop()})):"connected"===Ze&&(re.info("reconnected"),setTimeout(function(){return Ve.emit("reconnected")},0))})}function we(ze){var Ze=de.getPublication(ze._trackSender);Ze&&(Ze.disable(),re.debug("Disabled the "+D(ze,!0)+":",ze.id))}function Fe(ze){var Ze=de.getPublication(ze._trackSender);Ze&&(Ze.enable(),re.debug("Enabled the "+D(ze,!0)+":",ze.id))}function xe(ze){var Ze=de.getPublication(ze._trackSender);return Ze&&Ze.stop(),Ze}},Ae.prototype._getOrCreateLocalTrackPublication=function(ge){var re=pe(this.tracks,ge);if(re)return Promise.resolve(re);var de=this._log,we=this,Fe=this._signaling.getPublication(ge._trackSender);if(!Fe)return Promise.reject(new Error("Unexpected error: The "+ge+" cannot be published"));function xe(Ve){we.unpublishTrack(Ve.track)}return new Promise(function(Ve,ze){Fe.on("updated",function Ze(){var je=Fe.error;if(je)return Fe.removeListener("updated",Ze),de.warn("Failed to publish the "+D(ge,!0)+": "+je.message),we._removeTrack(ge,ge.id),setTimeout(function(){we.emit("trackPublicationFailed",je,ge)}),void ze(je);if(!we._tracks.has(ge.id))return Fe.removeListener("updated",Ze),void ze(new Error("The "+ge+" was unpublished"));if(Fe.sid){Fe.removeListener("updated",Ze);var Wt={log:de,LocalAudioTrackPublication:we._LocalAudioTrackPublication,LocalDataTrackPublication:we._LocalDataTrackPublication,LocalVideoTrackPublication:we._LocalVideoTrackPublication};(re=pe(we.tracks,ge))||(re=U(ge,Fe,xe,Wt),we._addTrackPublication(re));var ht=we._signaling.state;("connected"===ht||"connecting"===ht)&&(ge._processorEventObserver&&ge._processorEventObserver.on("event",function(qe){we._eventObserver.emit("event",{name:qe.name,payload:qe.data,group:"video-processor",level:"info"})}),ge.processedTrack&&(ge._captureFrames(),ge._setSenderMediaStreamTrack(!0))),"connected"===ht&&setTimeout(function(){we.emit("trackPublished",re)}),Ve(re)}})})},Ae.prototype.publishTrack=function(ge,re){var we,de=pe(this.tracks,ge);if(de)return Promise.resolve(de);re=Object.assign({log:this._log,priority:x.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},re);try{we=Q(ge,re)}catch(Ve){return Promise.reject(Ve)}var Fe=Object.values(x);if(!Fe.includes(re.priority))return Promise.reject(N.INVALID_VALUE("LocalTrackPublishOptions.priority",Fe));var xe=this._addTrack(we,we.id,re.priority)||this._tracks.get(we.id);return this._getOrCreateLocalTrackPublication(xe)},Ae.prototype.publishTracks=function(ge){if(!Array.isArray(ge))throw N.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(ge.map(this.publishTrack,this))},Ae.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},Ae.prototype.setNetworkQualityConfiguration=function(ge){if("object"!=typeof ge||null===ge)throw N.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(re){if(re in ge&&("number"!=typeof ge[re]||isNaN(ge[re])))throw N.INVALID_TYPE("networkQualityConfiguration."+re,"number")}),this._signaling.setNetworkQualityConfiguration(ge),this},Ae.prototype.setParameters=function(ge){if(typeof ge<"u"&&"object"!=typeof ge)throw N.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(ge){if(this._signaling.getParameters().adaptiveSimulcast&&ge.maxVideoBitrate)throw N.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(re){if(typeof ge[re]<"u"&&"number"!=typeof ge[re]&&null!==ge[re])throw N.INVALID_TYPE("encodingParameters."+re,"number, null or undefined")})}else null===ge&&(ge={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(ge),this},Ae.prototype.unpublishTrack=function(ge){J(ge,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var re=this._tracks.get(ge.id);if(!re)return null;if(this._signaling.getPublication(re._trackSender).publishFailed(new Error("The "+re+" was unpublished")),!(re=this._removeTrack(re,re.id)))return null;var we=pe(this.tracks,re);return we&&this._removeTrackPublication(we),we},Ae.prototype.unpublishTracks=function(ge){var re=this;if(!Array.isArray(ge))throw N.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return ge.reduce(function(de,we){var Fe=re.unpublishTrack(we);return Fe?de.concat(Fe):de},[])},Ae}(Y(9218));function pe(Ee,Ae){return Array.from(Ee.values()).find(function(ge){return ge.track===Ae||ge.track.mediaStreamTrack===Ae})||null}Ie.exports=De},1534:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){return Q.call(this,D,O)||this}return L(U,Q),U.prototype._start=function(){Q.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},U.prototype.attach=function(){return Q.prototype.attach.apply(this,arguments)},U.prototype.detach=function(){return Q.prototype.detach.apply(this,arguments)},U}(Y(5366));Ie.exports=ne},7379:(Ie,Oe,Y)=>{"use strict";Ie.exports={LocalAudioTrack:Y(2954),LocalVideoTrack:Y(1),LocalDataTrack:Y(1560)}},2954:(Ie,Oe,Y)=>{"use strict";var L=Y(1905),W=Y(6213);function ne(Q,U){var D=new W(Q,U);return Object.setPrototypeOf(D,ne.prototype),D}L(ne,W),Ie.exports=ne},1560:(Ie,Oe,Y)=>{"use strict";var L=Y(1905),W=Y(212);function ne(Q){var U=new W(Q);return Object.setPrototypeOf(U,ne.prototype),U}L(ne,W),Ie.exports=ne},1:(Ie,Oe,Y)=>{"use strict";var L=Y(1905),W=Y(4847);function ne(Q,U){var D=new W(Q,U);return Object.setPrototypeOf(D,ne.prototype),D}L(ne,W),Ie.exports=ne},1703:function(Ie,Oe,Y){"use strict";var J,L=this&&this.__extends||(J=function(ie,te){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,X){le.__proto__=X}||function(le,X){for(var z in X)Object.prototype.hasOwnProperty.call(X,z)&&(le[z]=X[z])})(ie,te)},function(ie,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function le(){this.constructor=ie}J(ie,te),ie.prototype=null===te?Object.create(te):(le.prototype=te.prototype,new le)}),W=Y(133),ne=Y(9739),Q=ne.buildLogLevels,U=ne.valueToJSON,D=Y(8701).DEFAULT_LOG_LEVEL,O=Y(1458),N=0,x=function(J){function ie(te,le,X){var z;X=Object.assign({name:te,log:null,logLevel:D},X),z=J.call(this)||this;var K=String(X.name),se=Q(X.logLevel),ve=X.log?X.log.createLog("media",z):new O("media",z,se,X.loggerName);return Object.defineProperties(z,{_instanceId:{value:++N},_log:{value:ve},kind:{enumerable:!0,value:le},name:{enumerable:!0,value:K}}),z}return L(ie,J),ie.prototype.toJSON=function(){return U(this)},ie}(W);Ie.exports=x},6213:function(Ie,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,N){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,N)},function(O,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function x(){this.constructor=O}D(O,N),O.prototype=null===N?Object.create(N):(x.prototype=N.prototype,new x)}),W=Y(1534),U=function(D){function O(N,x){return D.call(this,N,x)||this}return L(O,D),O.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},O.prototype.attach=function(N){return(N=D.prototype.attach.call(this,N)).muted=!0,N},O.prototype._end=function(){return D.prototype._end.apply(this,arguments)},O.prototype.disable=function(){return D.prototype.disable.apply(this,arguments)},O.prototype.enable=function(){return D.prototype.enable.apply(this,arguments)},O.prototype.restart=function(){return D.prototype.restart.apply(this,arguments)},O.prototype.stop=function(){return D.prototype.stop.apply(this,arguments)},O}(Y(8275)(W));Ie.exports=U},3925:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O,N,x){return Q.call(this,D,O,N,x)||this}return L(U,Q),U.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(3335));Ie.exports=ne},212:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(1703),ne=Y(1866),Q=function(U){function D(O){var N,J=new(0,(O=Object.assign({DataTrackSender:ne,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},O)).DataTrackSender)(O.maxPacketLifeTime,O.maxRetransmits,O.ordered);return N=U.call(this,J.id,"data",O)||this,Object.defineProperties(N,{_trackSender:{value:J},id:{enumerable:!0,value:J.id},maxPacketLifeTime:{enumerable:!0,value:O.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:O.maxRetransmits},ordered:{enumerable:!0,value:O.ordered},reliable:{enumerable:!0,value:null===O.maxPacketLifeTime&&null===O.maxRetransmits}}),N}return L(D,U),D.prototype.send=function(O){this._trackSender.send(O)},D}(W);Ie.exports=Q},5229:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O,N,x){return Q.call(this,D,O,N,x)||this}return L(U,Q),U.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(3335));Ie.exports=ne},8275:function(Ie,Oe,Y){"use strict";var Ee,L=this&&this.__extends||(Ee=function(Ae,ge){return(Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,de){re.__proto__=de}||function(re,de){for(var we in de)Object.prototype.hasOwnProperty.call(de,we)&&(re[we]=de[we])})(Ae,ge)},function(Ae,ge){if("function"!=typeof ge&&null!==ge)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function re(){this.constructor=Ae}Ee(Ae,ge),Ae.prototype=null===ge?Object.create(ge):(re.prototype=ge.prototype,new re)}),W=Y(1647).getUserMedia,ne=Y(7627),Q=ne.guessBrowser,U=ne.isIOSChrome,D=Y(9739),O=D.capitalize,N=D.defer,x=D.isUserMediaTrack,J=D.waitForSometime,ie=D.waitForEvent,te=Y(8701).typeErrors.ILLEGAL_INVOKE,le=Y(9059),X=Y(1741),z=Y(2181),K=Y(6396),se=Y(3830),ve=Y(808);function pe(Ee){var Ae=Ee._log,ge=Ee.kind,re={audio:le,video:X}[ge],de=Ee._dummyEl,we=Ee.mediaStreamTrack,Fe=null;function ze(){return Promise.race([ie(we,"unmute"),J(50)]).then(function(){return function Ve(){var Ue=Ee.mediaStreamTrack.muted,Ye=Ee.isStopped&&!!Ee._workaroundWebKitBug1208516Cleanup;return Promise.resolve().then(function(){return"visible"===document.visibilityState&&!Fe&&(Ue||Ye||function xe(){return de.play().then(function(){return re(de)}).then(function(ht){return ht?Ae.warn("Silence detected"):Ae.info("Non-silence detected"),ht}).catch(function(ht){Ae.warn("Failed to detect silence:",ht)}).finally(function(){de.pause()})}())})}()}).then(function(ht){return ht&&!Fe&&(Fe=N(),Ee._restart().finally(function(){de=Ee._dummyEl,xt(),we=Ee.mediaStreamTrack,je(),Fe.resolve(),Fe=null}).catch(function(Ue){Ae.error("failed to restart track: ",Ue)})),(Fe&&Fe.promise||Promise.resolve()).finally(function(){return K.resolveDeferred(ge)})}).catch(function(ht){Ae.error("error in maybeRestart: "+ht.message)})}function Ze(){var ht=Ee._log,qe=Ee.kind;ht.info("Muted"),ht.debug("LocalMediaTrack:",Ee),K.startDeferred(qe)}function je(){we.addEventListener("ended",ze),we.addEventListener("mute",Ze),we.addEventListener("unmute",ze)}function xt(){we.removeEventListener("ended",ze),we.removeEventListener("mute",Ze),we.removeEventListener("unmute",ze)}var Wt=function(ht){return!!ht&&ze()};return z.onVisibilityChange(1,Wt),je(),function(){z.offVisibilityChange(1,Wt),xt()}}Ie.exports=function De(Ee){return function(Ae){function ge(re,de){var we=this,Fe=("safari"===Q()||U())&&x(re)&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;de=Object.assign({getUserMedia:W,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:Fe,gUMSilentTrackWorkaround:se},de);var xe=new ve(re),Ve=xe.kind;return we=Ae.call(this,xe,de)||this,Object.defineProperties(we,{_constraints:{value:"object"==typeof de[Ve]?de[Ve]:{},writable:!0},_getUserMedia:{value:de.getUserMedia},_gUMSilentTrackWorkaround:{value:de.gUMSilentTrackWorkaround},_workaroundWebKitBug1208516:{value:de.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:de.isCreatedByCreateLocalTracks},_trackSender:{value:xe},id:{enumerable:!0,value:xe.id},isEnabled:{enumerable:!0,get:function(){return xe.enabled}},isStopped:{enumerable:!0,get:function(){return"ended"===xe.readyState}}}),we._workaroundWebKitBug1208516&&(we._workaroundWebKitBug1208516Cleanup=pe(we)),we}return L(ge,Ae),ge.prototype._end=function(){this._didCallEnd||(Ae.prototype._end.call(this),this._didCallEnd=!0,this.emit("stopped",this))},ge.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),Ae.prototype._initialize.call(this)},ge.prototype._reacquireTrack=function(re){var de,Fe=this._getUserMedia,xe=this._gUMSilentTrackWorkaround,Ve=this._log,ze=this.mediaStreamTrack.kind;Ve.info("Re-acquiring the MediaStreamTrack"),Ve.debug("Constraints:",re);var Ze=Object.assign({audio:!1,video:!1},((de={})[ze]=re,de));return(this._workaroundWebKitBug1208516Cleanup?xe(Ve,Fe,Ze):Fe(Ze)).then(function(xt){return xt.getTracks()[0]})},ge.prototype._restart=function(re){var de=this,we=this._log;return re=re||this._constraints,this._stop(),this._reacquireTrack(re).catch(function(Fe){throw we.error("Failed to re-acquire the MediaStreamTrack:",{error:Fe,constraints:re}),Fe}).then(function(Fe){return we.info("Re-acquired the MediaStreamTrack"),we.debug("MediaStreamTrack:",Fe),de._constraints=Object.assign({},re),de._setMediaStreamTrack(Fe)})},ge.prototype._setMediaStreamTrack=function(re){var de=this;return re.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){de._unprocessedTrack=re}):this._trackSender.setMediaStreamTrack(re).catch(function(we){de._log.warn("setMediaStreamTrack failed:",{error:we,mediaStreamTrack:re})})).then(function(){de._initialize(),de._getAllAttachedElements().forEach(function(we){return de._attach(we)})})},ge.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},ge.prototype.enable=function(re){return(re="boolean"!=typeof re||re)!==this.mediaStreamTrack.enabled&&(this._log.info((re?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=re,this.emit(re?"enabled":"disabled",this)),this},ge.prototype.disable=function(){return this.enable(!1)},ge.prototype.restart=function(re){var de=this,we=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(te("restart","can only be called on a Local"+O(we)+"Track that is created using createLocalTracks or createLocal"+O(we)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var Fe=this._restart(re);return this._workaroundWebKitBug1208516&&(Fe=Fe.finally(function(){de._workaroundWebKitBug1208516Cleanup=pe(de)})),Fe},ge.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},ge}(Ee)}},3335:function(Ie,Oe,Y){"use strict";var O,L=this&&this.__extends||(O=function(N,x){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,ie){J.__proto__=ie}||function(J,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(J[te]=ie[te])})(N,x)},function(N,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function J(){this.constructor=N}O(N,x),N.prototype=null===x?Object.create(x):(J.prototype=x.prototype,new J)}),W=Y(9222),ne=Y(8701),Q=ne.typeErrors,U=ne.trackPriority,D=function(O){function N(x,J,ie,te){var le=O.call(this,J.name,x.sid,te)||this;return Object.defineProperties(le,{_reemitTrackEvent:{value:function(){return le.emit(le.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:x},_unpublish:{value:ie},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:J.kind},priority:{enumerable:!0,get:function(){return x.updatedPriority}},track:{enumerable:!0,value:J}}),J.on("disabled",le._reemitTrackEvent),J.on("enabled",le._reemitTrackEvent),le}return L(N,O),N.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},N.prototype.setPriority=function(x){var J=Object.values(U);if(!J.includes(x))throw Q.INVALID_VALUE("priority",J);return this._signaling.setPriority(x),this},N.prototype.unpublish=function(){return this.track.removeListener("disabled",this._reemitTrackEvent),this.track.removeListener("enabled",this._reemitTrackEvent),this._unpublish(this),this},N}(W);Ie.exports=D},4847:function(Ie,Oe,Y){"use strict";var te,L=this&&this.__extends||(te=function(le,X){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,K){z.__proto__=K}||function(z,K){for(var se in K)Object.prototype.hasOwnProperty.call(K,se)&&(z[se]=K[se])})(le,X)},function(le,X){if("function"!=typeof X&&null!==X)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");function z(){this.constructor=le}te(le,X),le.prototype=null===X?Object.create(X):(z.prototype=X.prototype,new z)}),W=Y(7627),ne=W.guessBrowser,Q=W.isIOSChrome,U=Y(1741),D=Y(8275),O=Y(4332),N=Y(9739).isUserMediaTrack,J=function(te){function le(X,z){var K=this;return z=Object.assign({workaroundSilentLocalVideo:("safari"===ne()||Q())&&N(X)&&typeof document<"u"&&"function"==typeof document.createElement},z),K=te.call(this,X,z)||this,Object.defineProperties(K,{_workaroundSilentLocalVideo:{value:z.workaroundSilentLocalVideo?ie:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),K._workaroundSilentLocalVideo&&(K._workaroundSilentLocalVideoCleanup=K._workaroundSilentLocalVideo(K,document)),K}return L(le,te),le.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},le.prototype._checkIfCanCaptureFrames=function(){return te.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},le.prototype._end=function(){return te.prototype._end.apply(this,arguments)},le.prototype._setSenderMediaStreamTrack=function(X){var z=this,K=this.mediaStreamTrack,se=X?this.processedTrack:K;return this._trackSender.setMediaStreamTrack(se).catch(function(ve){return z._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:ve,mediaStreamTrack:se})}).then(function(){z._unprocessedTrack=X?K:null})},le.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var X=te.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),X):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},le.prototype.removeProcessor=function(){var X=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var z=te.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return X._updateElementsMediaStreamTrack()}),z},le.prototype.disable=function(){var X=te.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),X},le.prototype.enable=function(X){void 0===X&&(X=!0);var z=te.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=X,X&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),z},le.prototype.restart=function(){var X=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var z=te.prototype.restart.apply(this,arguments);return this.processor&&z.then(function(){X._restartProcessor()}),this._workaroundSilentLocalVideo&&z.finally(function(){X._workaroundSilentLocalVideoCleanup=X._workaroundSilentLocalVideo(X,document)}),z},le.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),te.prototype.stop.apply(this,arguments)},le}(D(O));function ie(te,le){var X=te._log,z=te._dummyEl,K=te.mediaStreamTrack;function se(){!te.isEnabled||(X.info("Unmuted, checking silence"),z.play().then(function(){return U(z,le)}).then(function(ve){if(ve)return X.warn("Silence detected, restarting"),te._stop(),te._restart();X.info("Non-silent frames detected, so no need to restart")}).catch(function(ve){X.warn("Failed to detect silence and restart:",ve)}).finally(function(){(z=te._dummyEl).paused||z.pause(),K.removeEventListener("unmute",se),(K=te.mediaStreamTrack).addEventListener("unmute",se)}))}return K.addEventListener("unmute",se),function(){K.removeEventListener("unmute",se)}}Ie.exports=J},9565:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O,N,x){return Q.call(this,D,O,N,x)||this}return L(U,Q),U.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(3335));Ie.exports=ne},5366:function(Ie,Oe,Y){"use strict";var X,L=this&&this.__extends||(X=function(z,K){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,ve){se.__proto__=ve}||function(se,ve){for(var De in ve)Object.prototype.hasOwnProperty.call(ve,De)&&(se[De]=ve[De])})(z,K)},function(z,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function se(){this.constructor=z}X(z,K),z.prototype=null===K?Object.create(K):(se.prototype=K.prototype,new se)}),W=Y(7627),ne=W.guessBrowser,Q=W.isIOSChrome,U=Y(1647).MediaStream,D=Y(9739),O=D.waitForEvent,N=D.waitForSometime,x=Y(6396),ie=function(X){function z(K,se){var ve=this;se=Object.assign({playPausedElementsIfNotBackgrounded:("safari"===ne()||Q())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},se),ve=X.call(this,K.id,K.kind,se)||this;var De=!1;return se=Object.assign({MediaStream:U},se),Object.defineProperties(ve,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return De},set:function(pe){De=pe}},_playPausedElementsIfNotBackgrounded:{value:se.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:se.workaroundWebKitBug212780||se.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:se.MediaStream},isStarted:{enumerable:!0,get:function(){return De}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||K.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),ve._initialize(),ve}return L(z,X),z.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},z.prototype._initialize=function(){var K=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",function se(){K._end(),K.mediaStreamTrack.removeEventListener("ended",se)}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},z.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},z.prototype.attach=function(K){var se=this;if("string"==typeof K?K=this._selectElement(K):K||(K=this._createElement()),this._log.debug("Attempting to attach to element:",K),K=this._attach(K),this._shouldShimAttachedElements&&!this._elShims.has(K)){var ve=this._playPausedElementsIfNotBackgrounded?function(){return function te(X,z){var K=X.tagName.toLowerCase();z.warn("Unintentionally paused:",X),Promise.race([O(document,"visibilitychange"),N(1e3)]).then(function(){"visible"===document.visibilityState&&x.whenResolved("audio").then(function(){return z.info("Playing unintentionally paused <"+K+"> element"),z.debug("Element:",X),X.play()}).then(function(){z.info("Successfully played unintentionally paused <"+K+"> element"),z.debug("Element:",X)}).catch(function(se){z.warn("Error while playing unintentionally paused <"+K+"> element:",{error:se,el:X})})})}(K,se._log)}:null;this._elShims.set(K,function le(X,z){void 0===z&&(z=null);var K=X.pause,se=X.play,ve=!1;X.pause=function(){return ve=!0,K.call(X)},X.play=function(){return ve=!1,se.call(X)};var De=z?function(){ve||z()}:null;return De&&X.addEventListener("pause",De),{pausedIntentionally:function(){return ve},unShim:function(){X.pause=K,X.play=se,De&&X.removeEventListener("pause",De)}}}(K,ve))}return K},z.prototype._attach=function(K,se){void 0===se&&(se=this.processedTrack||this.mediaStreamTrack);var ve=K.srcObject;return ve instanceof this._MediaStream||(ve=new this._MediaStream),ve["audio"===se.kind?"getAudioTracks":"getVideoTracks"]().forEach(function(pe){ve.removeTrack(pe)}),ve.addTrack(se),K.srcObject=ve,K.autoplay=!0,K.playsInline=!0,this._attachments.has(K)||this._attachments.add(K),K},z.prototype._selectElement=function(K){var se=document.querySelector(K);if(!se)throw new Error("Selector matched no element: "+K);return se},z.prototype._updateElementsMediaStreamTrack=function(){var K=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(se){return K._attach(se)})},z.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},z.prototype.detach=function(K){var se;return se="string"==typeof K?[this._selectElement(K)]:K?[K]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",se),this._detachElements(se),K?se[0]:se},z.prototype._detachElements=function(K){return K.map(this._detachElement.bind(this))},z.prototype._detachElement=function(K){if(!this._attachments.has(K))return K;var se=K.srcObject;return se instanceof this._MediaStream&&se.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(K),this._shouldShimAttachedElements&&this._elShims.has(K)&&(this._elShims.get(K).unShim(),this._elShims.delete(K)),K},z.prototype._getAllAttachedElements=function(){var K=[];return this._attachments.forEach(function(se){K.push(se)}),K},z}(Y(1703));Ie.exports=ie},3501:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){return Q.call(this,D,O)||this}return L(U,Q),U}(Y(1639));Ie.exports=ne},8797:function(Ie,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,N){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,N)},function(O,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function x(){this.constructor=O}D(O,N),O.prototype=null===N?Object.create(N):(x.prototype=N.prototype,new x)}),W=Y(1534),U=function(D){function O(N,x,J,ie,te,le,X){return D.call(this,N,x,J,ie,te,le,X)||this}return L(O,D),O.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},O.prototype.setPriority=function(N){return D.prototype.setPriority.call(this,N)},O}(Y(1628)(W));Ie.exports=U},8661:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){return Q.call(this,D,O)||this}return L(U,Q),U.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(1521));Ie.exports=ne},5606:function(Ie,Oe,Y){"use strict";var x,L=this&&this.__extends||(x=function(J,ie){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(te,le){te.__proto__=le}||function(te,le){for(var X in le)Object.prototype.hasOwnProperty.call(le,X)&&(te[X]=le[X])})(J,ie)},function(J,ie){if("function"!=typeof ie&&null!==ie)throw new TypeError("Class extends value "+String(ie)+" is not a constructor or null");function te(){this.constructor=J}x(J,ie),J.prototype=null===ie?Object.create(ie):(te.prototype=ie.prototype,new te)}),W=this&&this.__read||function(x,J){var ie="function"==typeof Symbol&&x[Symbol.iterator];if(!ie)return x;var le,z,te=ie.call(x),X=[];try{for(;(void 0===J||J-- >0)&&!(le=te.next()).done;)X.push(le.value)}catch(K){z={error:K}}finally{try{le&&!le.done&&(ie=te.return)&&ie.call(te)}finally{if(z)throw z.error}}return X},ne=this&&this.__spreadArray||function(x,J){for(var ie=0,te=J.length,le=x.length;ie<te;ie++,le++)x[le]=J[ie];return x},Q=Y(1703),U=Y(8701),D=U.typeErrors,O=U.trackPriority,N=function(x){function J(ie,te,le){var X=x.call(this,te.id,"data",le)||this;return Object.defineProperties(X,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:te.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:te.maxRetransmits},ordered:{enumerable:!0,value:te.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===te.maxPacketLifeTime&&null===te.maxRetransmits},sid:{enumerable:!0,value:ie}}),te.on("message",function(z){X.emit("message",z,X)}),X}return L(J,x),J.prototype.setPriority=function(ie){var te=ne([null],W(Object.values(O)));if(!te.includes(ie))throw D.INVALID_VALUE("priority",te);return this._priority=ie,this},J.prototype._setEnabled=function(){},J.prototype._setSwitchedOff=function(ie){this._isSwitchedOff!==ie&&(this._isSwitchedOff=ie,this.emit(ie?"switchedOff":"switchedOn",this))},J}(Q);Ie.exports=N},8459:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){return Q.call(this,D,O)||this}return L(U,Q),U.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(1521));Ie.exports=ne},1628:function(Ie,Oe,Y){"use strict";var le,L=this&&this.__extends||(le=function(X,z){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,se){K.__proto__=se}||function(K,se){for(var ve in se)Object.prototype.hasOwnProperty.call(se,ve)&&(K[ve]=se[ve])})(X,z)},function(X,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function K(){this.constructor=X}le(X,z),X.prototype=null===z?Object.create(z):(K.prototype=z.prototype,new K)}),W=this&&this.__read||function(le,X){var z="function"==typeof Symbol&&le[Symbol.iterator];if(!z)return le;var se,De,K=z.call(le),ve=[];try{for(;(void 0===X||X-- >0)&&!(se=K.next()).done;)ve.push(se.value)}catch(pe){De={error:pe}}finally{try{se&&!se.done&&(z=K.return)&&z.call(K)}finally{if(De)throw De.error}}return ve},ne=this&&this.__spreadArray||function(le,X){for(var z=0,K=X.length,se=le.length;z<K;z++,se++)le[se]=X[z];return le},Q=Y(8701),U=Q.typeErrors,D=Q.trackPriority,O=Y(7627),N=O.guessBrowser,x=O.isIOSChrome,J=Y(2181);Ie.exports=function ie(le){return function(X){function z(K,se,ve,De,pe,Ee,Ae){var ge=this;return Ae=Object.assign({workaroundWebKitBug212780:("safari"===N()||x())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},Ae),ge=X.call(this,se,Ae)||this,Object.defineProperties(ge,{_isEnabled:{value:ve,writable:!0},_isSwitchedOff:{value:De,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:pe},_setRenderHint:{value:function(re){ge._log.debug("updating render hint:",re),Ee(re)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:K},_workaroundWebKitBug212780:{value:Ae.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),ge}return L(z,X),z.prototype.setPriority=function(K){var se=ne([null],W(Object.values(D)));if(!se.includes(K))throw U.INVALID_VALUE("priority",se);return this._priority!==K&&(this._priority=K,this._setPriority(K)),this},z.prototype._setEnabled=function(K){this._isEnabled!==K&&(this._isEnabled=K,this.emit(this._isEnabled?"enabled":"disabled",this))},z.prototype._setSwitchedOff=function(K){this._isSwitchedOff!==K&&(this._isSwitchedOff=K,this.emit(K?"switchedOff":"switchedOn",this))},z.prototype.attach=function(K){var se=X.prototype.attach.call(this,K);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function te(le){var X=le._log,z=le.kind;function K(se){!se||le._attachments.forEach(function(ve){var De=le._elShims.get(ve);ve.paused&&De&&!De.pausedIntentionally()&&(X.info("Playing inadvertently paused <"+z+"> element"),X.debug("Element:",ve),X.debug("RemoteMediaTrack:",le),ve.play().then(function(){X.info("Successfully played inadvertently paused <"+z+"> element"),X.debug("Element:",ve),X.debug("RemoteMediaTrack:",le)}).catch(function(Ee){X.warn("Error while playing inadvertently paused <"+z+"> element:",{err:Ee,el:ve,remoteMediaTrack:le})}))})}return J.onVisibilityChange(2,K),function(){J.offVisibilityChange(2,K)}}(this)),se},z.prototype.detach=function(K){var se=X.prototype.detach.call(this,K);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),se},z}(le)}},1521:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this,D.name,D.sid,O)||this;Object.defineProperties(N,{_signaling:{value:D},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return D.isEnabled}},kind:{enumerable:!0,value:D.kind},publishPriority:{enumerable:!0,get:function(){return D.priority}},track:{enumerable:!0,get:function(){return this._track}}});var x=D.error,J=D.isEnabled,ie=D.isSwitchedOff,te=D.priority;return D.on("updated",function(){if(x!==D.error)return x=D.error,void N.emit("subscriptionFailed",D.error);J!==D.isEnabled&&(J=D.isEnabled,N.track&&N.track._setEnabled(D.isEnabled),N.emit(D.isEnabled?"trackEnabled":"trackDisabled")),ie!==D.isSwitchedOff&&(N._log.debug(N.trackSid+": "+(ie?"OFF":"ON")+" => "+(D.isSwitchedOff?"OFF":"ON")),ie=D.isSwitchedOff,N.track?(N.track._setSwitchedOff(D.isSwitchedOff),N.emit(ie?"trackSwitchedOff":"trackSwitchedOn",N.track)):ie&&N._log.warn("Track was not subscribed when switched Off.")),te!==D.priority&&N.emit("publishPriorityChanged",te=D.priority)}),N}return L(U,Q),U.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U.prototype._subscribed=function(D){!this._track&&D&&(this._track=D,this.emit("subscribed",D))},U.prototype._unsubscribe=function(){if(this._track){var D=this._track;this._track=null,this.emit("unsubscribed",D)}},U}(Y(9222));Ie.exports=ne},1629:function(Ie,Oe,Y){"use strict";var X,L=this&&this.__extends||(X=function(z,K){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,ve){se.__proto__=ve}||function(se,ve){for(var De in ve)Object.prototype.hasOwnProperty.call(ve,De)&&(se[De]=ve[De])})(z,K)},function(z,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function se(){this.constructor=z}X(z,K),z.prototype=null===K?Object.create(K):(se.prototype=K.prototype,new se)}),W=this&&this.__read||function(X,z){var K="function"==typeof Symbol&&X[Symbol.iterator];if(!K)return X;var ve,pe,se=K.call(X),De=[];try{for(;(void 0===z||z-- >0)&&!(ve=se.next()).done;)De.push(ve.value)}catch(Ee){pe={error:Ee}}finally{try{ve&&!ve.done&&(K=se.return)&&K.call(se)}finally{if(pe)throw pe.error}}return De},ne=Y(1628),Q=Y(4332),U=Y(2181),D=Y(5318).NullObserver,O=Y(6543),J=function(X){function z(K,se,ve,De,pe,Ee,Ae){var ge=this;return Ae=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},Ae),Ae=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||"auto"!==Ae.clientTrackSwitchOffControl?D:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||"auto"!==Ae.contentPreferencesMode?D:ResizeObserver},Ae),ge=X.call(this,K,se,ve,De,pe,Ee,Ae)||this,Object.defineProperties(ge,{_enableDocumentVisibilityTurnOff:{value:!0===Ae.enableDocumentVisibilityTurnOff&&"auto"===Ae.clientTrackSwitchOffControl},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:Ae.clientTrackSwitchOffControl},_contentPreferencesMode:{value:Ae.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new O(function(){ge._setRenderHint({enabled:!1})},50,!1)},_resizeObserver:{value:new Ae.ResizeObserver(function(re){re.find(function(we){return!ge._invisibleElements.has(we.target)})&&le(ge)})},_intersectionObserver:{value:new Ae.IntersectionObserver(function(re){var de=!1;re.forEach(function(we){!ge._invisibleElements.has(we.target)!==we.isIntersecting&&(we.isIntersecting?(ge._log.debug("intersectionObserver detected: Off => On"),ge._invisibleElements.delete(we.target)):(ge._log.debug("intersectionObserver detected: On => Off"),ge._invisibleElements.add(we.target)),de=!0)}),de&&(te(ge),le(ge))},{threshold:.25})}}),ge}return L(z,X),z.prototype._start=function(K){var se=X.prototype._start.call(this,K);return te(this),se},z.prototype.switchOn=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},z.prototype.switchOff=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},z.prototype.setContentPreferences=function(K){if("manual"!==this._contentPreferencesMode)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return K.renderDimensions&&this._setRenderHint({renderDimensions:K.renderDimensions}),this},z.prototype._unObservePip=function(K){var se=this._elToPipCallbacks.get(K);se&&(K.removeEventListener("enterpictureinpicture",se.onEnterPip),K.removeEventListener("leavepictureinpicture",se.onLeavePip),this._elToPipCallbacks.delete(K))},z.prototype._observePip=function(K){var se=this;if(!this._elToPipCallbacks.get(K)){var De=function(Ae){return se._onEnterPip(Ae,K)},pe=function(Ae){return se._onLeavePip(Ae,K)};K.addEventListener("enterpictureinpicture",De),K.addEventListener("leavepictureinpicture",pe),this._elToPipCallbacks.set(K,{onEnterPip:De,onLeavePip:pe,onResizePip:function(Ae){return se._onResizePip(Ae,K)}})}},z.prototype._onEnterPip=function(K,se){this._log.debug("onEnterPip");var ve=K.pictureInPictureWindow;this._elToPipWindows.set(se,ve);var De=this._elToPipCallbacks.get(se).onResizePip;ve.addEventListener("resize",De),te(this)},z.prototype._onLeavePip=function(K,se){this._log.debug("onLeavePip"),this._elToPipWindows.delete(se);var ve=this._elToPipCallbacks.get(se).onResizePip;K.pictureInPictureWindow.removeEventListener("resize",ve),te(this)},z.prototype._onResizePip=function(){le(this)},z.prototype.attach=function(K){var se=X.prototype.attach.call(this,K);return"auto"===this._clientTrackSwitchOffControl&&this._invisibleElements.add(se),this._intersectionObserver.observe(se),this._resizeObserver.observe(se),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||function ie(X){function z(){te(X)}return U.onVisibilityChange(1,z),function(){U.offVisibilityChange(1,z)}}(this)),this._observePip(se),se},z.prototype.detach=function(K){var se=this,ve=X.prototype.detach.call(this,K);return(Array.isArray(ve)?ve:[ve]).forEach(function(pe){se._intersectionObserver.unobserve(pe),se._resizeObserver.unobserve(pe),se._invisibleElements.delete(pe),se._unObservePip(pe)}),0===this._attachments.size&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),te(this),le(this),ve},z.prototype.addProcessor=function(){return X.prototype.addProcessor.apply(this,arguments)},z.prototype.removeProcessor=function(){return X.prototype.removeProcessor.apply(this,arguments)},z.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},z.prototype.setPriority=function(K){return X.prototype.setPriority.call(this,K)},z}(ne(Q));function te(X){if("auto"===X._clientTrackSwitchOffControl){var z=X._getAllAttachedElements().filter(function(ve){return!X._invisibleElements.has(ve)});!0==(X._getAllAttachedElements().filter(function(ve){return X._elToPipWindows.has(ve)}).length>0||"visible"===document.visibilityState&&z.length>0)?(X._turnOffTimer.clear(),X._setRenderHint({enabled:!0})):X._turnOffTimer.isSet||X._turnOffTimer.start()}}function le(X){if("auto"===X._contentPreferencesMode){var z=X._getAllAttachedElements().filter(function(ge){return!X._invisibleElements.has(ge)}),K=X._getAllAttachedElements().map(function(ge){var re=X._elToPipWindows.get(ge);return re?{clientHeight:re.height,clientWidth:re.width}:{clientHeight:0,clientWidth:0}}),se=z.concat(K);if(se.length>0){var De=W(se.sort(function(ge,re){return re.clientHeight+re.clientWidth-ge.clientHeight-ge.clientWidth-1}),1)[0];X._setRenderHint({renderDimensions:{height:De.clientHeight,width:De.clientWidth}})}}}Ie.exports=J},1768:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){return Q.call(this,D,O)||this}return L(U,Q),U.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(1521));Ie.exports=ne},808:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=this&&this.__read||function(U,D){var O="function"==typeof Symbol&&U[Symbol.iterator];if(!O)return U;var x,ie,N=O.call(U),J=[];try{for(;(void 0===D||D-- >0)&&!(x=N.next()).done;)J.push(x.value)}catch(te){ie={error:te}}finally{try{x&&!x.done&&(O=N.return)&&O.call(N)}finally{if(ie)throw ie.error}}return J},Q=function(U){function D(O){var N=U.call(this,O.id,O)||this;return Object.defineProperties(N,{_clones:{value:new Set},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{get:function(){return!!this._clones.size}}}),N}return L(D,U),D.prototype.clone=function(){var O=new D(this.track.clone());return this._clones.add(O),O},D.prototype.removeClone=function(O){this._clones.delete(O)},D.prototype.setMediaStreamTrack=function(O){var N=this,x=Array.from(this._clones),J=Array.from(this._senders);return Promise.all(x.map(function(ie){return ie.setMediaStreamTrack(O.clone())}).concat(J.map(function(ie){return N._replaceTrack(ie,O)}))).finally(function(){N._track=O})},D.prototype.addSender=function(O,N){return this._senders.add(O),N&&this._senderToPublisherHintCallbacks.set(O,N),this},D.prototype.removeSender=function(O){return this._senders.delete(O),this._senderToPublisherHintCallbacks.delete(O),this},D.prototype.setPublisherHint=function(O){var x=W(Array.from(this._senderToPublisherHintCallbacks.values()),1)[0];return x?x(O):Promise.resolve("COULD_NOT_APPLY_HINT")},D.prototype._replaceTrack=function(O,N){var x=this;return O.replaceTrack(N).then(function(J){return x.setPublisherHint(null).catch(function(){}),x.emit("replaced"),J})},D}(Y(1639));Ie.exports=Q},9222:function(Ie,Oe,Y){"use strict";var J,L=this&&this.__extends||(J=function(ie,te){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,X){le.__proto__=X}||function(le,X){for(var z in X)Object.prototype.hasOwnProperty.call(X,z)&&(le[z]=X[z])})(ie,te)},function(ie,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function le(){this.constructor=ie}J(ie,te),ie.prototype=null===te?Object.create(te):(le.prototype=te.prototype,new le)}),W=Y(133),ne=Y(9739),Q=ne.buildLogLevels,U=ne.valueToJSON,D=Y(8701).DEFAULT_LOG_LEVEL,O=Y(1458),N=0,x=function(J){function ie(te,le,X){var z=J.call(this)||this;X=Object.assign({logLevel:D},X);var K=Q(X.logLevel);return Object.defineProperties(z,{_instanceId:{value:N++},_log:{value:X.log?X.log.createLog("default",z):new O("default",z,K,X.loggerName)},trackName:{enumerable:!0,value:te},trackSid:{enumerable:!0,value:le}}),z}return L(ie,J),ie.prototype.toJSON=function(){return U(this)},ie.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},ie}(W);Ie.exports=x},1639:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this,D,O.kind)||this;return Object.defineProperties(N,{_track:{value:O,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),N}return L(U,Q),U.prototype.stop=function(){this.track.stop(),Q.prototype.stop.call(this)},U}(Y(4605));Ie.exports=ne},9062:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(9069).EventEmitter,ne=Y(8701).DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,Q=function(U){function D(O){var N=U.call(this)||this;return Object.defineProperties(N,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:O},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),N.on("add",function(x){N._lastStatsSaveTime=Date.now(),N._lastStatsPublishTime=Date.now(),N._processorInfo=x,N._stats=[],N._reemitEvent("add",N._getEventData())}),N.on("remove",function(){var x=N._getEventData();N._lastStatsSaveTime=null,N._lastStatsPublishTime=null,N._processorInfo=null,N._stats=null,N._reemitEvent("remove",x)}),N.on("start",function(){N._reemitEvent("start",N._getEventData())}),N.on("stop",function(x){N._reemitEvent("stop",Object.assign({message:x},N._getEventData()))}),N.on("stats",function(){return N._maybeEmitStats()}),N}return L(D,U),D.prototype._getEventData=function(){if(!this._processorInfo)return{};var O=this._processorInfo,N=O.processor,le={captureHeight:O.captureHeight,captureWidth:O.captureWidth,inputFrameRate:O.inputFrameRate,isRemoteVideoTrack:O.isRemoteVideoTrack};return le.name=N._name||"VideoProcessor",["assetsPath","blurFilterRadius","fitType","isSimdEnabled","maskBlurRadius","version"].forEach(function(X){var z=N["_"+X];typeof z<"u"&&(le[X]=z)}),Object.keys(le).forEach(function(X){var z=le[X];"boolean"==typeof z&&(le[X]=z?"true":"false")}),le},D.prototype._maybeEmitStats=function(){if(this._stats&&this._processorInfo){var O=this._processorInfo.processor._benchmark;if(O){var N=Date.now();if(!(N-this._lastStatsSaveTime<1e3)){var x={outputFrameRate:O.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(te){x[te]=O.getAverageDelay(te)}),this._lastStatsSaveTime=N,this._stats.push(x),!(N-this._lastStatsPublishTime<ne)){this._lastStatsPublishTime=N;var ie=this._stats.splice(0).reduce(function(te,le,X){return Object.keys(x).forEach(function(z){te[z]||(te[z]=0),te[z]=(te[z]*X+le[z])/(X+1)}),te},{});Object.keys(ie).forEach(function(te){ie[te]=parseFloat(ie[te].toFixed(2))}),this._reemitEvent("stats",Object.assign({},ie,this._getEventData()))}}}}},D.prototype._reemitEvent=function(O,N){this._log.debug("VideoProcessor:"+O,N),this.emit("event",{name:O,data:N})},D}(W);Ie.exports=Q},4332:function(Ie,Oe,Y){"use strict";var O,L=this&&this.__extends||(O=function(N,x){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,ie){J.__proto__=ie}||function(J,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(J[te]=ie[te])})(N,x)},function(N,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function J(){this.constructor=N}O(N,x),N.prototype=null===x?Object.create(x):(J.prototype=x.prototype,new J)}),W=Y(5366),ne=Y(9062),Q=Y(8701).DEFAULT_FRAME_RATE,U=function(O){function N(x,J){var ie=O.call(this,x,J)||this;return Object.defineProperties(ie,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),ie._processorEventObserver=new(J.VideoProcessorEventObserver||ne)(ie._log),ie}return L(N,O),N.prototype._checkIfCanCaptureFrames=function(x){void 0===x&&(x=!1);var J=!0,ie="",te=this.mediaStreamTrack;return te.enabled||(J=!1,ie="MediaStreamTrack is disabled"),"ended"===te.readyState&&(J=!1,ie="MediaStreamTrack is ended"),this.processor||(J=!1,ie="VideoProcessor not detected."),!this._attachments.size&&!x&&(J=!1,ie="VideoTrack is not publishing and there is no attached element."),ie&&this._log.debug(ie),{canCaptureFrames:J,message:ie}},N.prototype._captureFrames=function(){var x=this;if(this._isCapturing)this._log.debug("Ignoring captureFrames call. Capture is already in progress");else{if(!this._checkIfCanCaptureFrames().canCaptureFrames)return this._isCapturing=!1,void this._log.debug("Cannot capture frames. Ignoring captureFrames call.");this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var ie,J=Date.now();this._dummyEl.play().then(function(){var te=function(X){clearTimeout(x._captureTimeoutId);var z=x.mediaStreamTrack.getSettings().frameRate,ve=Math.floor(1e3/(void 0===z?Q:z))-ie;(ve<0||"number"!=typeof ie)&&(ve=0),x._captureTimeoutId=setTimeout(X,ve)},le=function(){var X=x._checkIfCanCaptureFrames();if(!X.canCaptureFrames)return x._isCapturing=!1,x._processorEventObserver.emit("stop",X.message),void x._log.debug("Cannot capture frames. Stopping capturing frames.");J=Date.now();var z=x.mediaStreamTrack.getSettings(),K=z.width,se=void 0===K?0:K,ve=z.height,De=void 0===ve?0:ve;x._inputFrame.width!==se&&(x._inputFrame.width=se,x._inputFrame.height=De,x._outputFrame&&(x._outputFrame.width=se,x._outputFrame.height=De)),x._inputFrame.getContext("2d").drawImage(x._dummyEl,0,0,se,De);var pe=null;try{pe=x.processor.processFrame(x._inputFrame,x._outputFrame)}catch(Ee){x._log.debug("Exception detected after calling processFrame.",Ee)}(pe instanceof Promise?pe:Promise.resolve(pe)).then(function(){x._outputFrame&&(x.processedTrack.requestFrame(),x._processorEventObserver.emit("stats"))}).finally(function(){ie=Date.now()-J,te(le)})};te(le)}).catch(function(te){return x._log.error("Video element cannot be played",{error:te,track:x})})}},N.prototype._initialize=function(){var x=this;O.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){D(x,x._dummyEl)&&(x.dimensions.width=x._dummyEl.videoWidth,x.dimensions.height=x._dummyEl.videoHeight)},this._dummyEl.onresize=function(){D(x,x._dummyEl)&&(x.dimensions.width=x._dummyEl.videoWidth,x.dimensions.height=x._dummyEl.videoHeight,x.isStarted&&(x._log.debug("Dimensions changed:",x.dimensions),x.emit(N.DIMENSIONS_CHANGED,x)))})},N.prototype._restartProcessor=function(){var x=this.processor;x&&(this.removeProcessor(x),this.addProcessor(x))},N.prototype._start=function(x){return this.dimensions.width=x.videoWidth,this.dimensions.height=x.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(N.DIMENSIONS_CHANGED,this),O.prototype._start.call(this,x)},N.prototype.addProcessor=function(x){var J=this;if("function"!=typeof OffscreenCanvas)return this._log.warn("Adding a VideoProcessor is not supported in this browser.");if(!x||"function"!=typeof x.processFrame)throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",x),this._unmuteHandler||(this._unmuteHandler=function(){J._log.debug("mediaStreamTrack unmuted"),J.processedTrack.muted&&(J._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),J._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler));var ie=this.mediaStreamTrack.getSettings(),te=ie.width,le=void 0===te?0:te,X=ie.height,z=void 0===X?0:X,K=ie.frameRate,se=void 0===K?Q:K;return this._inputFrame=new OffscreenCanvas(le,z),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=le,this._outputFrame.height=z,this.processedTrack=this._outputFrame.captureStream(0).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=x,this._processorEventObserver.emit("add",{processor:x,captureHeight:z,captureWidth:le,inputFrameRate:se,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack")}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},N.prototype.attach=function(){var x=O.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),x},N.prototype.detach=function(){return O.prototype.detach.apply(this,arguments)},N.prototype.removeProcessor=function(x){if(!x)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(x!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",x),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame.getContext("2d").clearRect(0,0,this._inputFrame.width,this._inputFrame.height),this._outputFrame.getContext("2d").clearRect(0,0,this._outputFrame.width,this._outputFrame.height),this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},N}(W);function D(O,N){return O.dimensions.width!==N.videoWidth||O.dimensions.height!==N.videoHeight}U.DIMENSIONS_CHANGED="dimensionsChanged",Ie.exports=U},4621:function(Ie,Oe,Y){"use strict";var J,L=this&&this.__extends||(J=function(ie,te){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,X){le.__proto__=X}||function(le,X){for(var z in X)Object.prototype.hasOwnProperty.call(X,z)&&(le[z]=X[z])})(ie,te)},function(ie,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function le(){this.constructor=ie}J(ie,te),ie.prototype=null===te?Object.create(te):(le.prototype=te.prototype,new le)}),W=this&&this.__read||function(J,ie){var te="function"==typeof Symbol&&J[Symbol.iterator];if(!te)return J;var X,K,le=te.call(J),z=[];try{for(;(void 0===ie||ie-- >0)&&!(X=le.next()).done;)z.push(X.value)}catch(se){K={error:se}}finally{try{X&&!X.done&&(te=le.return)&&te.call(le)}finally{if(K)throw K.error}}return z},ne=Y(9069).EventEmitter,Q=Y(8701),U=Q.DEFAULT_NQ_LEVEL_LOCAL,D=Q.DEFAULT_NQ_LEVEL_REMOTE,O=Q.MAX_NQ_LEVEL,N=Y(9739).inRange,x=function(J){function ie(te){var le=J.call(this)||this;return te=Object.assign({local:U,remote:D},te),Object.defineProperties(le,{local:{value:N(te.local,U,O)?te.local:U,writable:!0},remote:{value:N(te.remote,D,O)?te.remote:D,writable:!0}}),le}return L(ie,J),ie.prototype.update=function(te){var le=this;te=Object.assign({local:this.local,remote:this.remote},te),[["local",U,3],["remote",D,3]].forEach(function(X){var z=W(X,3),K=z[0],se=z[1];le[K]="number"==typeof te[K]&&N(te[K],se,z[2])?te[K]:se})},ie}(ne);Ie.exports=x},9218:function(Ie,Oe,Y){"use strict";var ve,L=this&&this.__extends||(ve=function(De,pe){return(ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ee,Ae){Ee.__proto__=Ae}||function(Ee,Ae){for(var ge in Ae)Object.prototype.hasOwnProperty.call(Ae,ge)&&(Ee[ge]=Ae[ge])})(De,pe)},function(De,pe){if("function"!=typeof pe&&null!==pe)throw new TypeError("Class extends value "+String(pe)+" is not a constructor or null");function Ee(){this.constructor=De}ve(De,pe),De.prototype=null===pe?Object.create(pe):(Ee.prototype=pe.prototype,new Ee)}),W=this&&this.__read||function(ve,De){var pe="function"==typeof Symbol&&ve[Symbol.iterator];if(!pe)return ve;var Ae,re,Ee=pe.call(ve),ge=[];try{for(;(void 0===De||De-- >0)&&!(Ae=Ee.next()).done;)ge.push(Ae.value)}catch(de){re={error:de}}finally{try{Ae&&!Ae.done&&(pe=Ee.return)&&pe.call(Ee)}finally{if(re)throw re.error}}return ge},ne=this&&this.__spreadArray||function(ve,De){for(var pe=0,Ee=De.length,Ae=ve.length;pe<Ee;pe++,Ae++)ve[Ae]=De[pe];return ve},Q=Y(133),U=Y(8797),D=Y(8661),O=Y(5606),N=Y(8459),x=Y(1629),J=Y(1768),ie=Y(9739),te=0,le=function(ve){function De(pe,Ee){var Ae=ve.call(this)||this,ge=function X(ve){var De=ve.map(function(ge){return[ge.id,ge]}),pe=De.filter(function(ge){return"audio"===ge[1].kind}),Ee=De.filter(function(ge){return"video"===ge[1].kind}),Ae=De.filter(function(ge){return"data"===ge[1].kind});return{audioTracks:pe,dataTracks:Ae,tracks:De,videoTracks:Ee}}((Ee=Object.assign({RemoteAudioTrack:U,RemoteAudioTrackPublication:D,RemoteDataTrack:O,RemoteDataTrackPublication:N,RemoteVideoTrack:x,RemoteVideoTrackPublication:J,tracks:[]},Ee)).tracks),re=Ee.log.createLog("default",Ae),de=new Map(ge.audioTracks),we=new Map(ge.dataTracks),Fe=new Map(ge.tracks),xe=new Map(ge.videoTracks);return Object.defineProperties(Ae,{_RemoteAudioTrack:{value:Ee.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:Ee.RemoteAudioTrackPublication},_RemoteDataTrack:{value:Ee.RemoteDataTrack},_RemoteDataTrackPublication:{value:Ee.RemoteDataTrackPublication},_RemoteVideoTrack:{value:Ee.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:Ee.RemoteVideoTrackPublication},_audioTracks:{value:de},_dataTracks:{value:we},_instanceId:{value:++te},_clientTrackSwitchOffControl:{value:Ee.clientTrackSwitchOffControl},_contentPreferencesMode:{value:Ee.contentPreferencesMode},_log:{value:re},_signaling:{value:pe},_tracks:{value:Fe},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:xe},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return pe.identity}},networkQualityLevel:{enumerable:!0,get:function(){return pe.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return pe.networkQualityStats}},sid:{enumerable:!0,get:function(){return pe.sid}},state:{enumerable:!0,get:function(){return pe.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),Ae._tracks.forEach(K.bind(null,Ae)),pe.on("networkQualityLevelChanged",function(){return Ae.emit("networkQualityLevelChanged",Ae.networkQualityLevel,Ae.networkQualityStats&&(Ae.networkQualityStats.audio||Ae.networkQualityStats.video)?Ae.networkQualityStats:null)}),function z(ve,De){var pe=ve._log;"disconnected"!==ve.state&&De.on("stateChanged",function Ee(Ae){pe.debug("Transitioned to state:",Ae),ve.emit(Ae,ve),"disconnected"===Ae&&(pe.debug("Removing Track event reemitters"),De.removeListener("stateChanged",Ee),ve._tracks.forEach(function(ge){var re=ve._trackEventReemitters.get(ge.id);ge&&re&&re.forEach(function(de,we){ge.removeListener(we,de)})}),De.tracks.forEach(function(ge){var re=ve._tracks.get(ge.id),de=ve._trackEventReemitters.get(ge.id);re&&de&&de.forEach(function(we,Fe){re.removeListener(Fe,we)})}),ve._trackEventReemitters.clear(),ve.tracks.forEach(function(ge){ve._trackPublicationEventReemitters.get(ge.trackSid).forEach(function(re,de){ge.removeListener(de,re)})}),ve._trackPublicationEventReemitters.clear())})}(Ae,pe),re.info("Created a new Participant"+(Ae.identity?": "+Ae.identity:"")),Ae}return L(De,ve),De.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},De.prototype._getTrackPublicationEvents=function(){return[]},De.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},De.prototype._addTrack=function(pe,Ee){var Ae=this._log;return this._tracks.has(Ee)?null:(this._tracks.set(Ee,pe),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[pe.kind].set(Ee,pe),K(this,pe,Ee),Ae.info("Added a new "+ie.trackClass(pe)+":",Ee),Ae.debug(ie.trackClass(pe)+":",pe),pe)},De.prototype._addTrackPublication=function(pe){var Ee=this._log;return this.tracks.has(pe.trackSid)?null:(this.tracks.set(pe.trackSid,pe),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[pe.kind].set(pe.trackSid,pe),function se(ve,De){var pe=new Map;"disconnected"!==ve.state&&(ve._getTrackPublicationEvents().forEach(function(Ee){var Ae=W(Ee,2),ge=Ae[0],re=Ae[1];pe.set(ge,function(){for(var de=[],we=0;we<arguments.length;we++)de[we]=arguments[we];ve.emit.apply(ve,ne(ne([re],W(de)),[De]))}),De.on(ge,pe.get(ge))}),ve._trackPublicationEventReemitters.set(De.trackSid,pe))}(this,pe),Ee.info("Added a new "+ie.trackPublicationClass(pe)+":",pe.trackSid),Ee.debug(ie.trackPublicationClass(pe)+":",pe),pe)},De.prototype._handleTrackSignalingEvents=function(){var Ee=this._log,Ae=this._clientTrackSwitchOffControl,ge=this._contentPreferencesMode,re=this;if("disconnected"!==this.state){var de=this._RemoteAudioTrack,we=this._RemoteAudioTrackPublication,Fe=this._RemoteVideoTrack,xe=this._RemoteVideoTrackPublication,Ve=this._RemoteDataTrack,ze=this._RemoteDataTrackPublication,Ze=this._signaling;Ze.on("trackAdded",je),Ze.on("trackRemoved",xt),Ze.tracks.forEach(je),Ze.on("stateChanged",function qe(Ue){"disconnected"===Ue?(Ee.debug("Removing event listeners"),Ze.removeListener("stateChanged",qe),Ze.removeListener("trackAdded",je),Ze.removeListener("trackRemoved",xt)):"connected"===Ue&&(Ee.info("reconnected"),setTimeout(function(){return re.emit("reconnected")},0))})}function je(qe){var Ye=new(0,{audio:we,data:ze,video:xe}[qe.kind])(qe,{log:Ee});re._addTrackPublication(Ye);var Re=qe.isSubscribed;Re&&Wt(qe),re._trackSignalingUpdatedEventCallbacks.set(qe.sid,function(){if(Re!==qe.isSubscribed){if(Re=qe.isSubscribed)return void Wt(qe);!function ht(qe){var Ue=W(Array.from(re._tracks.entries()).find(function(Dt){return W(Dt,2)[1].sid===qe.sid}),2),Ye=Ue[0],Re=Ue[1],tt=re.tracks.get(qe.sid);Re&&re._removeTrack(Re,tt,Ye)}(qe)}}),qe.on("updated",re._trackSignalingUpdatedEventCallbacks.get(qe.sid))}function xt(qe){qe.isSubscribed&&qe.setTrackTransceiver(null);var Ue=re._trackSignalingUpdatedEventCallbacks.get(qe.sid);Ue&&(qe.removeListener("updated",Ue),re._trackSignalingUpdatedEventCallbacks.delete(qe.sid));var Ye=re.tracks.get(qe.sid);Ye&&re._removeTrackPublication(Ye)}function Wt(qe){var Ue=qe.isEnabled,Ye=qe.name,Re=qe.kind,tt=qe.sid,Dt=qe.trackTransceiver,zt=qe.isSwitchedOff,kt={audio:de,video:Fe,data:Ve}[Re],mt=re.tracks.get(tt);if(kt&&Re===Dt.kind){var zn={log:Ee,name:Ye,clientTrackSwitchOffControl:Ae,contentPreferencesMode:ge},jr="data"===Re?new kt(tt,Dt,zn):new kt(tt,Dt,Ue,zt,function(Or){return Ze.updateSubscriberTrackPriority(tt,Or)},function(Or){qe.isSubscribed&&Ze.updateTrackRenderHint(tt,Or)},zn);re._addTrack(jr,mt,Dt.id)}}},De.prototype._removeTrack=function(pe,Ee){if(!this._tracks.has(Ee))return null;this._tracks.delete(Ee),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[pe.kind].delete(Ee),(this._trackEventReemitters.get(Ee)||new Map).forEach(function(de,we){pe.removeListener(we,de)});var re=this._log;return re.info("Removed a "+ie.trackClass(pe)+":",Ee),re.debug(ie.trackClass(pe)+":",pe),pe},De.prototype._removeTrackPublication=function(pe){if(!(pe=this.tracks.get(pe.trackSid)))return null;this.tracks.delete(pe.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[pe.kind].delete(pe.trackSid),(this._trackPublicationEventReemitters.get(pe.trackSid)||new Map).forEach(function(re,de){pe.removeListener(de,re)});var ge=this._log;return ge.info("Removed a "+ie.trackPublicationClass(pe)+":",pe.trackSid),ge.debug(ie.trackPublicationClass(pe)+":",pe),pe},De.prototype.toJSON=function(){return ie.valueToJSON(this)},De}(Q);function K(ve,De,pe){var Ee=new Map;"disconnected"!==ve.state&&(ve._getTrackEvents().forEach(function(Ae){var ge=Ae[0],re=Ae[1];Ee.set(ge,function(){var de=[re].concat([].slice.call(arguments));return ve.emit.apply(ve,ne([],W(de)))}),De.on(ge,Ee.get(ge))}),ve._trackEventReemitters.set(pe,Ee))}Ie.exports=le},9305:function(Ie,Oe){"use strict";var Y=this&&this.__awaiter||function(O,N,x,J){return new(x||(x=Promise))(function(te,le){function X(se){try{K(J.next(se))}catch(ve){le(ve)}}function z(se){try{K(J.throw(se))}catch(ve){le(ve)}}function K(se){se.done?te(se.value):function ie(te){return te instanceof x?te:new x(function(le){le(te)})}(se.value).then(X,z)}K((J=J.apply(O,N||[])).next())})},L=this&&this.__generator||function(O,N){var J,ie,te,le,x={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]};return le={next:X(0),throw:X(1),return:X(2)},"function"==typeof Symbol&&(le[Symbol.iterator]=function(){return this}),le;function X(K){return function(se){return function z(K){if(J)throw new TypeError("Generator is already executing.");for(;x;)try{if(J=1,ie&&(te=2&K[0]?ie.return:K[0]?ie.throw||((te=ie.return)&&te.call(ie),0):ie.next)&&!(te=te.call(ie,K[1])).done)return te;switch(ie=0,te&&(K=[2&K[0],te.value]),K[0]){case 0:case 1:te=K;break;case 4:return x.label++,{value:K[1],done:!1};case 5:x.label++,ie=K[1],K=[0];continue;case 7:K=x.ops.pop(),x.trys.pop();continue;default:if(!(te=(te=x.trys).length>0&&te[te.length-1])&&(6===K[0]||2===K[0])){x=0;continue}if(3===K[0]&&(!te||K[1]>te[0]&&K[1]<te[3])){x.label=K[1];break}if(6===K[0]&&x.label<te[1]){x.label=te[1],te=K;break}if(te&&x.label<te[2]){x.label=te[2],x.ops.push(K);break}te[2]&&x.ops.pop(),x.trys.pop();continue}K=N.call(O,x)}catch(se){K=[6,se],ie=0}finally{J=te=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([K,se])}}},W=this&&this.__read||function(O,N){var x="function"==typeof Symbol&&O[Symbol.iterator];if(!x)return O;var ie,le,J=x.call(O),te=[];try{for(;(void 0===N||N-- >0)&&!(ie=J.next()).done;)te.push(ie.value)}catch(X){le={error:X}}finally{try{ie&&!ie.done&&(x=J.return)&&x.call(J)}finally{if(le)throw le.error}}return te};function ne(O,N,x,J){var ie=[];return O.forEach(function(te){(0===J.length||J.includes(te.type))&&(0===x.length||x.includes(te.kind))&&"number"==typeof te[N]&&ie.push(te[N])}),ie}function U(O){return[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}].reduce(function(x,J){var ie=[J.key];J.altKeys&&(ie=ie.concat(J.altKeys));var te=ie.find(function(le){return le in O});return te&&typeof O[te]===J.type&&(x[J.key]=O[te]),x},{})}Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.getCombinedConnectionStats=void 0,Oe.getCombinedConnectionStats=function Q(O){var N=O.publisher,x=O.subscriber;return Y(this,void 0,void 0,function(){var J,ie,te,le,X,z,K,se,ve,De,pe,Ee,Ae,ge,re;return L(this,function(de){switch(de.label){case 0:return[4,Promise.all([N,x].map(function(we){return we.getStats()}))];case 1:return J=W.apply(void 0,[de.sent(),2]),ie=J[0],le=ne(te=J[1],"timestamp",["audio"],["inbound-rtp"]),X=le.length>0?le[0]:0,z=ne(te,"jitter",["audio"],["inbound-rtp"]).reduce(function(we,Fe){return Math.max(we,Fe)},0),K=ne(te,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(we,Fe){return we+Fe},0),se=ne(te,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(we,Fe){return we+Fe},0),ve=ne(ie,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(we,Fe){return Math.max(we,Fe)},0),De=ne(te,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(we,Fe){return Math.max(we,Fe)},0),pe=1e3*(De||ve),Ee=ne(ie,"bytesSent",[],["candidate-pair"]).reduce(function(we,Fe){return we+Fe},0),Ae=ne(te,"bytesReceived",[],["candidate-pair"]).reduce(function(we,Fe){return we+Fe},0),ge=function D(O){var N=null,x=[];O.forEach(function(X){"transport"===X.type&&X.selectedCandidatePairId?N=X.selectedCandidatePairId:"candidate-pair"===X.type&&x.push(X)});var J=x.find(function(X){return X.selected||N&&X.id===N});if(!J)return null;var ie=J,te=O.get(ie.localCandidateId),le=O.get(ie.remoteCandidateId);return te&&le?{localCandidate:U(te),remoteCandidate:U(le)}:null}(te),re=[],te.forEach(function(we){("local-candidate"===we.type||"remote-candidate"===we.type)&&re.push(U(we))}),[2,{timestamp:X,jitter:z,packets:K,packetsLost:se,roundTripTime:pe,bytesSent:Ee,bytesReceived:Ae,selectedIceCandidatePairStats:ge,iceCandidateStats:re}]}})})}},2449:(Ie,Oe,Y)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.getTurnCredentials=void 0;var L=Y(5330),W=Y(8701).ICE_VERSION,ne=Y(8380),Q=ne.createTwilioError,U=ne.SignalingConnectionError,D=Y(9069);Oe.getTurnCredentials=function O(N,x){return new Promise(function(J,ie){var te=new D.EventEmitter,X=new L(x,{networkMonitor:null,eventObserver:te,helloBody:{edge:"roaming",preflight:!0,token:N,type:"ice",version:W}}),z=!1;X.once("close",function(){z||(z=!0,ie(new U))}),X.on("message",function(K){var se=K.code,ve=K.message,pe=K.type;("iced"===pe||"error"===pe)&&!z&&(z=!0,"iced"===pe?J(K.ice_servers):ie(Q(se,ve)),X.close())})})}},5359:function(Ie,Oe){"use strict";var Y=this&&this.__read||function(ne,Q){var U="function"==typeof Symbol&&ne[Symbol.iterator];if(!U)return ne;var O,x,D=U.call(ne),N=[];try{for(;(void 0===Q||Q-- >0)&&!(O=D.next()).done;)N.push(O.value)}catch(J){x={error:J}}finally{try{O&&!O.done&&(U=D.return)&&U.call(D)}finally{if(x)throw x.error}}return N},L=this&&this.__spreadArray||function(ne,Q){for(var U=0,D=Q.length,O=ne.length;U<D;U++,O++)ne[O]=Q[U];return ne};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.makeStat=void 0,Oe.makeStat=function W(ne){return ne&&ne.length?{min:Math.min.apply(Math,L([],Y(ne))),max:Math.max.apply(Math,L([],Y(ne))),average:ne.reduce(function(O,N){return O+N},0)/ne.length}:null}},2436:(Ie,Oe)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.mosToScore=Oe.calculateMOS=void 0;var Y=94.768;Oe.calculateMOS=function L(ne,Q,U){var D=ne+2*Q+10,O=0;switch(!0){case D<160:O=Y-D/40;break;case D<1e3:O=Y-(D-120)/10}return 1+.035*(O=1==U<=O/2.5?Math.max(O-2.5*U,6.52):0)+7e-6*O*(O-60)*(100-O)},Oe.mosToScore=function W(ne){return ne?ne>4.2?5:ne>4?4:ne>3.6?3:ne>3?2:1:0}},8682:function(Ie,Oe,Y){"use strict";var Wt,L=this&&this.__extends||(Wt=function(ht,qe){return(Wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ue,Ye){Ue.__proto__=Ye}||function(Ue,Ye){for(var Re in Ye)Object.prototype.hasOwnProperty.call(Ye,Re)&&(Ue[Re]=Ye[Re])})(ht,qe)},function(ht,qe){if("function"!=typeof qe&&null!==qe)throw new TypeError("Class extends value "+String(qe)+" is not a constructor or null");function Ue(){this.constructor=ht}Wt(ht,qe),ht.prototype=null===qe?Object.create(qe):(Ue.prototype=qe.prototype,new Ue)}),W=this&&this.__assign||function(){return W=Object.assign||function(Wt){for(var ht,qe=1,Ue=arguments.length;qe<Ue;qe++)for(var Ye in ht=arguments[qe])Object.prototype.hasOwnProperty.call(ht,Ye)&&(Wt[Ye]=ht[Ye]);return Wt},W.apply(this,arguments)},ne=this&&this.__awaiter||function(Wt,ht,qe,Ue){return new(qe||(qe=Promise))(function(Re,tt){function Dt(mt){try{kt(Ue.next(mt))}catch(zn){tt(zn)}}function zt(mt){try{kt(Ue.throw(mt))}catch(zn){tt(zn)}}function kt(mt){mt.done?Re(mt.value):function Ye(Re){return Re instanceof qe?Re:new qe(function(tt){tt(Re)})}(mt.value).then(Dt,zt)}kt((Ue=Ue.apply(Wt,ht||[])).next())})},Q=this&&this.__generator||function(Wt,ht){var Ue,Ye,Re,tt,qe={label:0,sent:function(){if(1&Re[0])throw Re[1];return Re[1]},trys:[],ops:[]};return tt={next:Dt(0),throw:Dt(1),return:Dt(2)},"function"==typeof Symbol&&(tt[Symbol.iterator]=function(){return this}),tt;function Dt(kt){return function(mt){return function zt(kt){if(Ue)throw new TypeError("Generator is already executing.");for(;qe;)try{if(Ue=1,Ye&&(Re=2&kt[0]?Ye.return:kt[0]?Ye.throw||((Re=Ye.return)&&Re.call(Ye),0):Ye.next)&&!(Re=Re.call(Ye,kt[1])).done)return Re;switch(Ye=0,Re&&(kt=[2&kt[0],Re.value]),kt[0]){case 0:case 1:Re=kt;break;case 4:return qe.label++,{value:kt[1],done:!1};case 5:qe.label++,Ye=kt[1],kt=[0];continue;case 7:kt=qe.ops.pop(),qe.trys.pop();continue;default:if(!(Re=(Re=qe.trys).length>0&&Re[Re.length-1])&&(6===kt[0]||2===kt[0])){qe=0;continue}if(3===kt[0]&&(!Re||kt[1]>Re[0]&&kt[1]<Re[3])){qe.label=kt[1];break}if(6===kt[0]&&qe.label<Re[1]){qe.label=Re[1],Re=kt;break}if(Re&&qe.label<Re[2]){qe.label=Re[2],qe.ops.push(kt);break}Re[2]&&qe.ops.pop(),qe.trys.pop();continue}kt=ht.call(Wt,qe)}catch(mt){kt=[6,mt],Ye=0}finally{Ue=Re=0}if(5&kt[0])throw kt[1];return{value:kt[0]?kt[1]:void 0,done:!0}}([kt,mt])}}};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.runPreflight=Oe.PreflightTest=void 0;var U=Y(8701),D=Y(1567),O=Y(2436),N=Y(9305),x=Y(2449),J=Y(5359),ie=Y(5237),te=Y(3519),le=Y(9739),X=Y(8701).WS_SERVER,z=Y(1458),K=Y(133),se=Y(8218),ve=Y(8606),De=Y(3744),pe=Y(8066),Ee=pe.createSID,Ae=pe.sessionSID,ge=Y(8380),re=ge.SignalingConnectionTimeoutError,de=ge.MediaConnectionError;function Ve(Wt){return null!==Wt&&typeof Wt<"u"}var ze=0,Ze=function(Wt){function ht(qe,Ue){var Ye=Wt.call(this)||this;Ye._testTiming=new D.Timer,Ye._dtlsTiming=new D.Timer,Ye._iceTiming=new D.Timer,Ye._peerConnectionTiming=new D.Timer,Ye._mediaTiming=new D.Timer,Ye._connectTiming=new D.Timer,Ye._sentBytesMovingAverage=new se,Ye._packetLossMovingAverage=new se,Ye._progressEvents=[],Ye._receivedBytesMovingAverage=new se;var tt=Ue.environment,Dt=void 0===tt?"prod":tt,zt=Ue.region,mt=Ue.duration,zn=void 0===mt?1e4:mt,qn=Ue.wsServer||X(Dt,void 0===zt?"gll":zt);return Ye._log=new z("default",Ye,U.DEFAULT_LOG_LEVEL,U.DEFAULT_LOGGER_NAME),Ye._testDuration=zn,Ye._instanceId=ze++,Ye._testTiming.start(),Ye._runPreflightTest(qe,Dt,qn),Ye}return L(ht,Wt),ht.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},ht.prototype.stop=function(){this._stopped=!0},ht.prototype._generatePreflightReport=function(qe){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:J.makeStat(qe?.jitter),rtt:J.makeStat(qe?.rtt),packetLoss:J.makeStat(qe?.packetLoss)},selectedIceCandidatePairStats:qe?qe.selectedIceCandidatePairStats:null,iceCandidateStats:qe?qe.iceCandidateStats:[],progressEvents:this._progressEvents,mos:J.makeStat(qe?.mos)}},ht.prototype._executePreflightStep=function(qe,Ue,Ye){return ne(this,void 0,void 0,function(){var Re,tt,Dt,zt;return Q(this,function(mt){switch(mt.label){case 0:if(this._log.debug("Executing step: ",qe),Re=this._testDuration+1e4,this._stopped)throw new Error("stopped");tt=Promise.resolve().then(Ue),Dt=null,zt=new Promise(function(zn,qn){Dt=setTimeout(function(){qn(Ye||new Error(qe+" timeout."))},Re)}),mt.label=1;case 1:return mt.trys.push([1,,3,4]),[4,Promise.race([zt,tt])];case 2:return[2,mt.sent()];case 3:return null!==Dt&&clearTimeout(Dt),[7];case 4:return[2]}})})},ht.prototype._collectNetworkTimings=function(qe){var Ue=this;return new Promise(function(Ye){var Re;qe.addEventListener("iceconnectionstatechange",function(){"checking"===qe.iceConnectionState&&Ue._iceTiming.start(),"connected"===qe.iceConnectionState&&(Ue._iceTiming.stop(),Ue._updateProgress("iceConnected"),(!Re||Re&&"connected"===Re.state)&&Ye())}),qe.addEventListener("connectionstatechange",function(){"connecting"===qe.connectionState&&Ue._peerConnectionTiming.start(),"connected"===qe.connectionState&&(Ue._peerConnectionTiming.stop(),Ue._updateProgress("peerConnectionConnected"))});var Dt=qe.getSenders().map(function(zt){return zt.transport}).find(Ve);typeof Dt<"u"&&(Re=Dt).addEventListener("statechange",function(){"connecting"===Re.state&&Ue._dtlsTiming.start(),"connected"===Re.state&&(Ue._dtlsTiming.stop(),Ue._updateProgress("dtlsConnected"),"connected"===qe.iceConnectionState&&Ye())})})},ht.prototype._setupInsights=function(qe){var Ye=qe.environment,tt=qe.realm,kt=new De(qe.token,U.SDK_NAME,U.SDK_VERSION,void 0===Ye?U.DEFAULT_ENVIRONMENT:Ye,void 0===tt?U.DEFAULT_REALM:tt,{});kt.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var mt=new ve(kt,Date.now(),this._log),zn=void 0;return{reportToInsights:function(qn){var Lr,jr,Or=qn.report,wr=Or.stats.jitter||zn,Pn=Or.stats.rtt||zn,Si=Or.stats.packetLoss||zn,ki=Or.mos||zn,ho=new Map;Or.iceCandidateStats.forEach(function(Ht){if(Ht.candidateType&&Ht.protocol){var $t=ho.get(Ht.candidateType)||[];$t.indexOf(Ht.protocol)<0&&$t.push(Ht.protocol),ho.set(Ht.candidateType,$t)}});var po=JSON.stringify(Object.fromEntries(ho)),At={name:"report",group:"preflight",level:Or.error?"error":"info",payload:{sessionSID:Ae,preflightSID:Ee("PF"),progressEvents:JSON.stringify(Or.progressEvents),testTiming:Or.testTiming,dtlsTiming:Or.networkTiming.dtls,iceTiming:Or.networkTiming.ice,peerConnectionTiming:Or.networkTiming.peerConnection,connectTiming:Or.networkTiming.connect,mediaTiming:Or.networkTiming.media,selectedLocalCandidate:null===(Lr=Or.selectedIceCandidatePairStats)||void 0===Lr?void 0:Lr.localCandidate,selectedRemoteCandidate:null===(jr=Or.selectedIceCandidatePairStats)||void 0===jr?void 0:jr.remoteCandidate,iceCandidateStats:po,jitterStats:wr,rttStats:Pn,packetLossStats:Si,mosStats:ki,error:Or.error}};mt.emit("event",At),setTimeout(function(){return kt.disconnect()},2e3)}}},ht.prototype._runPreflightTest=function(qe,Ue,Ye){return ne(this,void 0,void 0,function(){var Re,tt,Dt,zt,kt,mt,zn,qn,Lr,jr,Or,wr,Pn=this;return Q(this,function(Si){switch(Si.label){case 0:Re=[],tt=[],Dt=this._setupInsights({token:qe,environment:Ue}).reportToInsights,Si.label=1;case 1:return Si.trys.push([1,8,9,10]),zt=[],[4,this._executePreflightStep("Acquire media",function(){return[ie.syntheticAudio(),te.syntheticVideo({width:640,height:480})]})];case 2:return Re=Si.sent(),this._updateProgress("mediaAcquired"),this.emit("debug",{localTracks:Re}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return x.getTurnCredentials(qe,Ye)},new re)];case 3:return kt=Si.sent(),this._connectTiming.stop(),this._updateProgress("connected"),mt=new RTCPeerConnection({iceServers:kt,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),zn=new RTCPeerConnection({iceServers:kt,bundlePolicy:"max-bundle"}),tt.push(mt),tt.push(zn),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return ne(Pn,void 0,void 0,function(){var ki,ho,po,At;return Q(this,function(Ht){switch(Ht.label){case 0:return mt.addEventListener("icecandidate",function($t){return $t.candidate&&zn.addIceCandidate($t.candidate)}),zn.addEventListener("icecandidate",function($t){return $t.candidate&&mt.addIceCandidate($t.candidate)}),Re.forEach(function($t){return mt.addTrack($t)}),ki=new Promise(function($t){var Xe=[];zn.addEventListener("track",function(Me){Xe.push(Me.track),Xe.length===Re.length&&$t(Xe)})}),[4,mt.createOffer()];case 1:return ho=Ht.sent(),[4,mt.setLocalDescription(po=ho)];case 2:return Ht.sent(),[4,zn.setRemoteDescription(po)];case 3:return Ht.sent(),[4,zn.createAnswer()];case 4:return At=Ht.sent(),[4,zn.setLocalDescription(At)];case 5:return Ht.sent(),[4,mt.setRemoteDescription(At)];case 6:return Ht.sent(),[4,this._collectNetworkTimings(mt)];case 7:return Ht.sent(),[2,ki]}})})},new de)];case 4:return qn=Si.sent(),this.emit("debug",{remoteTracks:qn}),qn.forEach(function(ki){ki.addEventListener("ended",function(){return Pn._log.warn(ki.kind+":ended")}),ki.addEventListener("mute",function(){return Pn._log.warn(ki.kind+":muted")}),ki.addEventListener("unmute",function(){return Pn._log.warn(ki.kind+":unmuted")})}),this._updateProgress("mediaSubscribed"),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(ki){var ho=document.createElement("video");ho.autoplay=!0,ho.playsInline=!0,ho.muted=!0,ho.srcObject=new MediaStream(qn),zt.push(ho),Pn.emit("debugElement",ho),ho.oncanplay=ki})},new de)];case 5:return Si.sent(),this._mediaTiming.stop(),this._updateProgress("mediaStarted"),[4,this._executePreflightStep("Collect stats for duration",function(){return Pn._collectRTCStatsForDuration(Pn._testDuration,{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]},mt,zn)})];case 6:return Lr=Si.sent(),[4,this._executePreflightStep("Generate report",function(){return Pn._generatePreflightReport(Lr)})];case 7:return jr=Si.sent(),Dt({report:jr}),this.emit("completed",jr),[3,10];case 8:return Or=Si.sent(),wr=this._generatePreflightReport(),Dt({report:W(W({},wr),{error:Or?.toString()})}),this.emit("failed",Or,wr),[3,10];case 9:return tt.forEach(function(ki){return ki.close()}),Re.forEach(function(ki){return ki.stop()}),[7];case 10:return[2]}})})},ht.prototype._collectRTCStats=function(qe,Ue,Ye){return ne(this,void 0,void 0,function(){var Re,tt,Dt,zt,kt,mt,zn,qn,Lr,jr,Or,wr,Pn,Si;return Q(this,function(ki){switch(ki.label){case 0:return[4,N.getCombinedConnectionStats({publisher:Ue,subscriber:Ye})];case 1:return Re=ki.sent(),tt=Re.timestamp,Dt=Re.bytesSent,zt=Re.bytesReceived,kt=Re.packets,mt=Re.packetsLost,zn=Re.roundTripTime,Lr=Re.selectedIceCandidatePairStats,jr=Re.iceCandidateStats,Or=qe.jitter.length>0,qe.jitter.push(qn=Re.jitter),qe.rtt.push(zn),this._sentBytesMovingAverage.putSample(Dt,tt),this._receivedBytesMovingAverage.putSample(zt,tt),this._packetLossMovingAverage.putSample(mt,kt),Or&&(qe.outgoingBitrate.push(1e3*this._sentBytesMovingAverage.get()*8),qe.incomingBitrate.push(1e3*this._receivedBytesMovingAverage.get()*8),wr=this._packetLossMovingAverage.get(),Pn=Math.min(100,100*wr),qe.packetLoss.push(Pn),Si=O.calculateMOS(zn,qn,wr),qe.mos.push(Si)),qe.selectedIceCandidatePairStats||(qe.selectedIceCandidatePairStats=Lr),0===qe.iceCandidateStats.length&&(qe.iceCandidateStats=jr),[2]}})})},ht.prototype._collectRTCStatsForDuration=function(qe,Ue,Ye,Re){return ne(this,void 0,void 0,function(){var tt,Dt,zt;return Q(this,function(kt){switch(kt.label){case 0:return tt=Date.now(),Dt=Math.min(1e3,qe),[4,le.waitForSometime(Dt)];case 1:return kt.sent(),[4,this._collectRTCStats(Ue,Ye,Re)];case 2:return kt.sent(),(zt=qe-(Date.now()-tt))>0?[4,this._collectRTCStatsForDuration(zt,Ue,Ye,Re)]:[3,4];case 3:Ue=kt.sent(),kt.label=4;case 4:return[2,Ue]}})})},ht.prototype._updateProgress=function(qe){var Ue=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:Ue,name:qe}),this.emit("progress",qe)},ht}(K);Oe.PreflightTest=Ze,Oe.runPreflight=function xt(Wt,ht){return void 0===ht&&(ht={}),new Ze(Wt,ht)}},5237:(Ie,Oe,Y)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.syntheticAudio=void 0,Oe.syntheticAudio=function L(){var W=Y(7708),ne={},Q=W.getOrCreate(ne),U=Q.createOscillator(),D=U.connect(Q.createMediaStreamDestination());U.start();var O=D.stream.getAudioTracks()[0],N=O.stop;return O.stop=function(){N.call(O),W.release(ne)},O}},3519:(Ie,Oe)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.syntheticVideo=void 0,Oe.syntheticVideo=function Y(L){var W=void 0===L?{}:L,ne=W.width,Q=void 0===ne?640:ne,U=W.height,D=void 0===U?480:U,O=Object.assign(document.createElement("canvas"),{width:Q,height:D}),N=O.getContext("2d");N.fillStyle="green",N.fillRect(0,0,O.width,O.height);var x=!1;requestAnimationFrame(function le(){if(!x){var X=Math.round(255*Math.random()),z=Math.round(255*Math.random()),K=Math.round(255*Math.random()),se=Math.round(255*Math.random());N.fillStyle="rgba("+X+", "+z+", "+K+", "+se+")",N.fillRect(Math.random()*Q,Math.random()*D,50,50),requestAnimationFrame(le)}});var ie=O.captureStream(30).getTracks()[0],te=ie.stop;return ie.stop=function(){x=!0,te.call(ie)},ie}},1567:(Ie,Oe)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.Timer=void 0;var Y=function(){function L(){this._end=void 0,this.start()}return L.prototype.start=function(){return this._start=Date.now(),this},L.prototype.stop=function(){return this._end=Date.now(),this},L.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:void 0===this._end?void 0:this._end-this._start}},L}();Oe.Timer=Y},7772:function(Ie,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,N){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,N)},function(O,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function x(){this.constructor=O}D(O,N),O.prototype=null===N?Object.create(N):(x.prototype=N.prototype,new x)}),W=this&&this.__read||function(D,O){var N="function"==typeof Symbol&&D[Symbol.iterator];if(!N)return D;var J,te,x=N.call(D),ie=[];try{for(;(void 0===O||O-- >0)&&!(J=x.next()).done;)ie.push(J.value)}catch(le){te={error:le}}finally{try{J&&!J.done&&(N=x.return)&&N.call(x)}finally{if(te)throw te.error}}return ie},ne=this&&this.__spreadArray||function(D,O){for(var N=0,x=O.length,J=D.length;N<x;N++,J++)D[J]=O[N];return D},U=function(D){function O(){var N=D.call(this)||this;return Object.defineProperties(N,{_queuedEvents:{value:new Map}}),N}return L(O,D),O.prototype.dequeue=function(N){var x=this,J=!0;if(!N)return this._queuedEvents.forEach(function(te,le){J=this.dequeue(le)&&J},this),J;var ie=this._queuedEvents.get(N)||[];return this._queuedEvents.delete(N),ie.reduce(function(te,le){return x.emit.apply(x,ne([],W([N].concat(le))))&&te},J)},O.prototype.queue=function(){var N=[].slice.call(arguments);if(this.emit.apply(this,ne([],W(N))))return!0;var x=N[0];return this._queuedEvents.has(x)||this._queuedEvents.set(x,[]),this._queuedEvents.get(x).push(N.slice(1)),!1},O}(Y(9069).EventEmitter);Ie.exports=U},3609:function(Ie,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,N){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,N)},function(O,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function x(){this.constructor=O}D(O,N),O.prototype=null===N?Object.create(N):(x.prototype=N.prototype,new x)}),W=this&&this.__read||function(D,O){var N="function"==typeof Symbol&&D[Symbol.iterator];if(!N)return D;var J,te,x=N.call(D),ie=[];try{for(;(void 0===O||O-- >0)&&!(J=x.next()).done;)ie.push(J.value)}catch(le){te={error:le}}finally{try{J&&!J.done&&(N=x.return)&&N.call(x)}finally{if(te)throw te.error}}return ie},ne=this&&this.__spreadArray||function(D,O){for(var N=0,x=O.length,J=D.length;N<x;N++,J++)D[J]=O[N];return D},U=function(D){function O(N,x){var J=D.call(this,N,x)||this;return J._handleTrackSignalingEvents(),J.once("disconnected",J._unsubscribeTracks.bind(J)),J}return L(O,D),O.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},O.prototype._addTrack=function(N,x,J){return D.prototype._addTrack.call(this,N,J)?(x._subscribed(N),this.emit("trackSubscribed",N,x),N):null},O.prototype._addTrackPublication=function(N){var x=D.prototype._addTrackPublication.call(this,N);return x?(this.emit("trackPublished",x),x):null},O.prototype._getTrackPublicationEvents=function(){return ne(ne([],W(D.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},O.prototype._unsubscribeTracks=function(){var N=this;this.tracks.forEach(function(x){if(x.isSubscribed){var J=x.track;x._unsubscribe(),N.emit("trackUnsubscribed",J,x)}})},O.prototype._removeTrack=function(N,x,J){var ie=this._tracks.get(J);return ie?(D.prototype._removeTrack.call(this,ie,J),x._unsubscribe(),this.emit("trackUnsubscribed",ie,x),ie):null},O.prototype._removeTrackPublication=function(N){this._signaling.clearTrackHint(N.trackSid);var x=D.prototype._removeTrackPublication.call(this,N);return x?(this.emit("trackUnpublished",x),x):null},O}(Y(9218));Ie.exports=U},7406:function(Ie,Oe,Y){"use strict";var X,L=this&&this.__extends||(X=function(z,K){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,ve){se.__proto__=ve}||function(se,ve){for(var De in ve)Object.prototype.hasOwnProperty.call(ve,De)&&(se[De]=ve[De])})(z,K)},function(z,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function se(){this.constructor=z}X(z,K),z.prototype=null===K?Object.create(K):(se.prototype=K.prototype,new se)}),W=this&&this.__read||function(X,z){var K="function"==typeof Symbol&&X[Symbol.iterator];if(!K)return X;var ve,pe,se=K.call(X),De=[];try{for(;(void 0===z||z-- >0)&&!(ve=se.next()).done;)De.push(ve.value)}catch(Ee){pe={error:Ee}}finally{try{ve&&!ve.done&&(K=se.return)&&K.call(se)}finally{if(pe)throw pe.error}}return De},ne=this&&this.__spreadArray||function(X,z){for(var K=0,se=z.length,ve=X.length;K<se;K++,ve++)X[ve]=z[K];return X},Q=Y(133),U=Y(3609),D=Y(7805),O=Y(9739).valueToJSON,N=0,x=function(X){function z(K,se,ve){var De=X.call(this)||this,pe=ve.log.createLog("default",De),Ee=new Map;return Object.defineProperties(De,{_log:{value:pe},_clientTrackSwitchOffControl:{value:ve.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:ve.contentPreferencesMode||"disabled"},_instanceId:{value:++N},_options:{value:ve},_participants:{value:Ee},_signaling:{value:se},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(se.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return se.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:K},name:{enumerable:!0,value:se.name},participants:{enumerable:!0,value:Ee},sid:{enumerable:!0,value:se.sid},state:{enumerable:!0,get:function(){return se.state}},mediaRegion:{enumerable:!0,value:se.mediaRegion}}),function te(X,z){z.on("updated",function(){var se=z.isEnabled;X._log.info("Recording "+(se?"started":"stopped")),X.emit("recording"+(se?"Started":"Stopped"))})}(De,se.recording),function le(X,z){var K=X._log;K.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),z.participants.forEach(ie.bind(null,X)),K.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),z.on("participantConnected",ie.bind(null,X)),z.on("dominantSpeakerChanged",function(){return X.emit("dominantSpeakerChanged",X.dominantSpeaker)}),z.on("stateChanged",function se(ve,De){switch(K.info("Transitioned to state:",ve),ve){case"disconnected":X.participants.forEach(function(pe){pe._unsubscribeTracks()}),X.emit(ve,X,De),X.localParticipant.tracks.forEach(function(pe){pe.unpublish()}),z.removeListener("stateChanged",se);break;case"reconnecting":setTimeout(function(){return X.emit("reconnecting",De)},0);break;default:setTimeout(function(){return X.emit("reconnected")},0)}})}(De,se),pe.info("Created a new Room:",De.name),pe.debug("Initial RemoteParticipants:",Array.from(De._participants.values())),De}return L(z,X),z.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},z.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},z.prototype.getStats=function(){var K=this;return this._signaling.getStats().then(function(se){return Array.from(se).map(function(ve){var De=W(ve,2),Ee=De[1];return new D(De[0],Object.assign({},Ee,{localAudioTrackStats:J(K,Ee.localAudioTrackStats),localVideoTrackStats:J(K,Ee.localVideoTrackStats)}))})})},z.prototype.toJSON=function(){return O(this)},z}(Q);function J(X,z){var K=X.localParticipant._signaling;return z.reduce(function(se,ve){var De=K.tracks.get(ve.trackId),pe=K.getSender(De);return pe?[Object.assign({},ve,{trackId:pe.id})].concat(se):se},[])}function ie(X,z){var K=X._log,De=new U(z,{log:K,clientTrackSwitchOffControl:X._clientTrackSwitchOffControl,contentPreferencesMode:X._contentPreferencesMode});K.info("A new RemoteParticipant connected:",De),X._participants.set(De.sid,De),X.emit("participantConnected",De);var pe=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(Ee){var Ae=W(Array.isArray(Ee)?Ee:[Ee,Ee],2),ge=Ae[0],re=Ae[1];function de(){var we=[].slice.call(arguments);we.unshift(re),we.push(De),X.emit.apply(X,ne([],W(we)))}return De.on(ge,de),[ge,de]});De.once("disconnected",function(){var Ae=X.dominantSpeaker;K.info("RemoteParticipant disconnected:",De),X._participants.delete(De.sid),pe.forEach(function(ge){De.removeListener(ge[0],ge[1])}),X.emit("participantDisconnected",De),De===Ae&&X.emit("dominantSpeakerChanged",X.dominantSpeaker)})}Ie.exports=x},8043:function(Ie,Oe,Y){"use strict";var O,L=this&&this.__extends||(O=function(N,x){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,ie){J.__proto__=ie}||function(J,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(J[te]=ie[te])})(N,x)},function(N,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function J(){this.constructor=N}O(N,x),N.prototype=null===x?Object.create(x):(J.prototype=x.prototype,new J)}),W=Y(9285),ne=Y(8343),Q=Y(8675),U={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},D=function(O){function N(){return O.call(this,"closed",U)||this}return L(N,O),N.prototype._close=function(x){return this.transition("closing",x),this.transition("closed",x),Promise.resolve(this)},N.prototype._connect=function(x,J,ie,te,le){x.connect("PA00000000000000000000000000000000","test");var z=Promise.resolve(new ne(x,"RM00000000000000000000000000000000",le));return z.cancel=function(){},z},N.prototype._open=function(x){return this.transition("opening",x),this.transition("open",x),Promise.resolve(this)},N.prototype.close=function(){var x=this;return this.bracket("close",function(J){switch(x.state){case"closed":return x;case"open":return x._close(J);default:throw new Error('Unexpected Signaling state "'+x.state+'"')}})},N.prototype.connect=function(x,J,ie,te,le){var X=this;return this.bracket("connect",function z(K){switch(X.state){case"closed":return X._open(K).then(z.bind(null,K));case"open":return X.releaseLockCompletely(K),X._connect(x,J,ie,te,le);default:throw new Error('Unexpected Signaling state "'+X.state+'"')}})},N.prototype.createLocalParticipantSignaling=function(){return new W},N.prototype.open=function(){var x=this;return this.bracket("open",function(J){switch(x.state){case"closed":return x._open(J);case"open":return x;default:throw new Error('Unexpected Signaling state "'+x.state+'"')}})},N}(Q);Ie.exports=D},5677:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(){var D=Q.call(this)||this;return Object.defineProperties(D,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),D}return L(U,Q),U.prototype.addTrack=function(D,O,N){var x=this._createLocalTrackPublicationSignaling(D,O,N);return this._trackSendersToPublications.set(D,x),this._publicationsToTrackSenders.set(x,D),Q.prototype.addTrack.call(this,x),this},U.prototype.getPublication=function(D){return this._trackSendersToPublications.get(D)||null},U.prototype.getSender=function(D){return this._publicationsToTrackSenders.get(D)||null},U.prototype.removeTrack=function(D){var O=this._trackSendersToPublications.get(D);return O?(this._trackSendersToPublications.delete(D),this._publicationsToTrackSenders.delete(O),Q.prototype.removeTrack.call(this,O)&&O.stop(),O):null},U}(Y(9285));Ie.exports=ne},3157:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),ne=function(U){function D(O,N,x){var J=this;return O=O.clone(),(J=U.call(this,N,O.kind,"data"===O.kind||O.track.enabled,x)||this).setTrackTransceiver(O),Object.defineProperties(J,{_updatedPriority:{value:x,writable:!0},id:{enumerable:!0,value:O.id}}),J}return L(D,U),Object.defineProperty(D.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),D.prototype.enable=function(O){return this.trackTransceiver.track.enabled=O="boolean"!=typeof O||O,U.prototype.enable.call(this,O)},D.prototype.publishFailed=function(O){return function Q(U,D){return null===U._sid&&!U._error&&(U._error=D,!0)}(this,O)&&this.emit("updated"),this},D.prototype.setPriority=function(O){return this._updatedPriority!==O&&(this._updatedPriority=O,this.emit("updated")),this},D.prototype.setSid=function(O){return this._error?this:U.prototype.setSid.call(this,O)},D.prototype.stop=function(){this.trackTransceiver.stop()},D}(Y(8194));Ie.exports=ne},9285:function(Ie,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,N){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,N)},function(O,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function x(){this.constructor=O}D(O,N),O.prototype=null===N?Object.create(N):(x.prototype=N.prototype,new x)}),W=Y(8675),ne=Y(669),Q={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},U=function(D){function O(){var N=D.call(this,"connecting",Q)||this;return Object.defineProperties(N,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),N}return L(O,D),Object.defineProperty(O.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),O.prototype.addTrack=function(N){return this.tracks.set(N.id||N.sid,N),this.emit("trackAdded",N),this},O.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},O.prototype.removeTrack=function(N){var x=this.tracks.get(N.id||N.sid);return this.tracks.delete(N.id||N.sid),x&&this.emit("trackRemoved",N),x||null},O.prototype.setNetworkQualityLevel=function(N,x){this._networkQualityLevel!==N&&(this._networkQualityLevel=N,this._networkQualityStats=x&&(x.audio||x.video)?new ne(x):null,this.emit("networkQualityLevelChanged"))},O.prototype.connect=function(N,x){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=N),this._identity||(this._identity=x),this.preempt("connected"),!0)},O.prototype.reconnecting=function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)},O}(W);Ie.exports=U},9987:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(){var D=Q.call(this)||this;return Object.defineProperties(D,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),D}return L(U,Q),U.prototype.disable=function(){return this.enable(!1)},U.prototype.enable=function(D){return this.isEnabled!==(D="boolean"!=typeof D||D)&&(this._isEnabled=D,this.emit("updated")),this},U}(Y(9069).EventEmitter);Ie.exports=ne},2184:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this)||this;return N.connect(D,O),N}return L(U,Q),U}(Y(9285));Ie.exports=ne},8956:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O,N,x,J,ie){var te=Q.call(this,O,N,x,J)||this;return Object.defineProperties(te,{_isSwitchedOff:{value:ie,writable:!0}}),te.setSid(D),te}return L(U,Q),Object.defineProperty(U.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),U.prototype.subscribeFailed=function(D){return this.error||(this._error=D,this.emit("updated")),this},U.prototype.setPriority=function(D){return this._priority!==D&&(this._priority=D,this.emit("updated")),this},U.prototype.setSwitchedOff=function(D){return this._isSwitchedOff!==D&&(this._isSwitchedOff=D,this.emit("updated")),this},U}(Y(8194));Ie.exports=ne},8343:function(Ie,Oe,Y){"use strict";var K,L=this&&this.__extends||(K=function(se,ve){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(De,pe){De.__proto__=pe}||function(De,pe){for(var Ee in pe)Object.prototype.hasOwnProperty.call(pe,Ee)&&(De[Ee]=pe[Ee])})(se,ve)},function(se,ve){if("function"!=typeof ve&&null!==ve)throw new TypeError("Class extends value "+String(ve)+" is not a constructor or null");function De(){this.constructor=se}K(se,ve),se.prototype=null===ve?Object.create(ve):(De.prototype=ve.prototype,new De)}),W=Y(9987),ne=Y(8675),Q=Y(6543),U=Y(9739).buildLogLevels,D=Y(8701).DEFAULT_LOG_LEVEL,O=Y(1458),N=Y(8380),x=N.MediaConnectionError,J=N.MediaDTLSTransportFailedError,ie=N.SignalingConnectionDisconnectedError,te=0,le={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},X=function(K){function se(ve,De,pe,Ee){var Ae=this;Ee=Object.assign({logLevel:D,RecordingSignaling:W,Timeout:Q},Ee);var ge=U(Ee.logLevel);Ae=K.call(this,"connected",le)||this;var re=Ee.RecordingSignaling,de=new Ee.Timeout(function(){Ae._disconnect(Ae._reconnectingError)},Ee.sessionTimeout,!1);return Object.defineProperties(Ae,{_instanceId:{value:te++},_log:{value:Ee.log?Ee.log.createLog("default",Ae):new O("default",Ae,ge,Ee.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:Ee},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:de},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:ve},name:{enumerable:!0,value:pe},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new re},sid:{enumerable:!0,value:De}}),Ae.on("connectionStateChanged",function(){"failed"===Ae.connectionState&&!["disconnected","failed"].includes(Ae.iceConnectionState)&&Ae._disconnect(new J)}),Ae.on("iceConnectionStateChanged",function(){return z(Ae)}),Ae.on("signalingConnectionStateChanged",function(){return z(Ae)}),setTimeout(function(){return z(Ae)}),Ae}return L(se,K),se.prototype._disconnect=function(ve){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[ve]),!0)},se.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},se.prototype.connectParticipant=function(ve){var De=this;return"disconnected"!==ve.state&&!this.participants.has(ve.sid)&&(this.participants.set(ve.sid,ve),ve.on("stateChanged",function pe(Ee){"disconnected"===Ee&&(ve.removeListener("stateChanged",pe),De.participants.delete(ve.sid),De.emit("participantDisconnected",ve))}),this.emit("participantConnected",ve),!0)},se.prototype.disconnect=function(){return this._disconnect()},se.prototype.setDominantSpeaker=function(ve){this.dominantSpeakerSid=ve,this.emit("dominantSpeakerChanged")},se}(ne);function z(K){var se;"disconnected"!==K.state&&"disconnected"!==K.signalingConnectionState?("reconnecting"===K.signalingConnectionState?se=K.signalingConnectionState:"failed"===K.iceConnectionState?(K._mediaConnectionIsReconnecting=!0,se="reconnecting"):"new"===K.iceConnectionState||"checking"===K.iceConnectionState?se=K._mediaConnectionIsReconnecting?"reconnecting":"connected":(K._mediaConnectionIsReconnecting=!1,K._reconnectingError=null,K._sessionTimeout.clear(),se="connected"),se!==K.state&&("reconnecting"===se?(K._reconnectingError="reconnecting"===K.signalingConnectionState?new ie:new x,K._sessionTimeout.start(),K.preempt(se,null,[K._reconnectingError])):K.preempt(se))):K._sessionTimeout.clear()}Ie.exports=X},8194:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O,N,x){var J=Q.call(this)||this,ie=null;return Object.defineProperties(J,{_error:{value:null,writable:!0},_isEnabled:{value:N,writable:!0},_priority:{value:x,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return ie},set:function(te){null===ie&&(ie=te)}},kind:{enumerable:!0,value:O},name:{enumerable:!0,value:D}}),J}return L(U,Q),Object.defineProperty(U.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),U.prototype.disable=function(){return this.enable(!1)},U.prototype.enable=function(D){return this.isEnabled!==(D="boolean"!=typeof D||D)&&(this._isEnabled=D,this.emit("updated")),this},U.prototype.setTrackTransceiver=function(D){return this.trackTransceiver!==(D=D||null)&&(this._trackTransceiver=D,this.emit("updated")),this},U.prototype.setSid=function(D){return null===this.sid&&(this._sid=D,this.emit("updated")),this},U}(Y(9069).EventEmitter);Ie.exports=ne},7697:(Ie,Oe,Y)=>{"use strict";var L=Y(8126),W=Y(6603),ne=Y(2112),Q=Y(4892),U=Y(8380),D=U.SignalingConnectionDisconnectedError,O=U.SignalingIncomingMessageInvalidError,N=Y(9739),x=N.flatMap,J=N.createRoomConnectEventPayload;Ie.exports=function ie(te,le,X,z,K,se){se=Object.assign({PeerConnectionManager:W,RoomV2:ne,Transport:Q},se);var ve=K.video[0]&&!0===K.video[0].adaptiveSimulcast,pe=se.RoomV2,Ee=se.Transport,Ae=se.iceServers,ge=se.log,re=new(0,se.PeerConnectionManager)(z,K,se),de=x(X.tracks,function(Ve){return[Ve.trackTransceiver]});re.setTrackSenders(de);var Fe,we=new Error("Canceled"),xe=new L(function(Ve,ze,Ze){var Wt=se.bandwidthProfile,Ue=se.eventObserver,tt=se.name,jr=Object.assign({adaptiveSimulcast:ve,automaticSubscription:se.automaticSubscription,dominantSpeaker:se.dominantSpeaker,environment:se.environment,eventObserver:Ue,loggerName:se.loggerName,logLevel:se.logLevel,networkMonitor:se.networkMonitor,networkQuality:se.networkQuality,iceServers:Ae,onIced:function(wr){return Ze()?(ze(we),Promise.reject(we)):(ge.debug("Got ICE servers:",wr),se.iceServers=wr,re.setConfiguration(se),re.createAndOffer().then(function(){if(Ze())throw ze(we),we;ge.debug("createAndOffer() succeeded."),re.dequeue("description")}).catch(function(Pn){throw ge.error("createAndOffer() failed:",Pn),ze(Pn),Pn}))},realm:se.realm,renderHints:!!Wt&&("disabled"!==se.clientTrackSwitchOffControl||"disabled"!==se.contentPreferencesMode),sdpSemantics:se.sdpSemantics,trackPriority:!!Wt,trackSwitchOff:!!Wt},Wt?{bandwidthProfile:Wt}:{});Fe=new Ee(tt,te,X,re,le,jr);var Or=J(se);Ue.emit("event",Or),Fe.once("connected",function(wr){ge.debug("Transport connected:",wr),Ze()?ze(we):wr.participant?(X.setSignalingRegion(wr.options.signaling_region),Ve(new pe(X,wr,Fe,re,se))):ze(new O)}),Fe.once("stateChanged",function(wr,Pn){"disconnected"===wr?(Fe=null,ze(Pn||new D)):ge.debug("Transport state changed:",wr)})},function(){Fe&&(Fe.disconnect(),Fe=null)});return xe.catch(function(){Fe&&(Fe.disconnect(),Fe=null),re.close()}),xe}},2314:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this,D,"active_speaker",O)||this;return Object.defineProperties(N,{_loudestParticipantSid:{value:null,writable:!0}}),N.on("ready",function(x){x.on("message",function(J){"active_speaker"===J.type&&N._setLoudestParticipantSid(J.participant)})}),N}return L(U,Q),Object.defineProperty(U.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),U.prototype._setLoudestParticipantSid=function(D){this.loudestParticipantSid!==D&&(this._loudestParticipantSid=D,this.emit("updated"))},U}(Y(4071));Ie.exports=ne},380:(Ie,Oe,Y)=>{"use strict";var L=Y(3826),W=function(){function ne(){Object.defineProperties(this,{_filter:{value:new L({getKey:function(U){return U.ufrag},isLessThanOrEqualTo:function(U,D){return U.revision<=D.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return ne.prototype.setUfrag=function(Q){this._ufrag=Q;var U=this._filter.toMap().get(Q);return U?U.candidates:[]},ne.prototype.update=function(Q){Q.candidates=Q.candidates||[];var U=this._filter.toMap().get(Q.ufrag),D=U?U.candidates:[];return this._filter.update(Q)&&this._ufrag===Q.ufrag?Q.candidates.slice(D.length):[]},ne}();Ie.exports=W},2282:(Ie,Oe,Y)=>{"use strict";var L=Y(8701),W=L.ICE_ACTIVITY_CHECK_PERIOD_MS,ne=L.ICE_INACTIVITY_THRESHOLD_MS,Q=function(){function U(D,O){O=Object.assign({activityCheckPeriodMs:W,inactivityThresholdMs:ne},O),Object.defineProperties(this,{_activityCheckPeriodMs:{value:O.activityCheckPeriodMs},_inactivityThresholdMs:{value:O.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:D},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return U.prototype._getActivePairStat=function(D){return Array.from(D.values()).find(function(x){return"candidate-pair"===x.type&&x.nominated})||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}},U.prototype._getIceConnectionStats=function(){var D=this;return this._peerConnection.getStats().then(function(O){return D._getActivePairStat(O)}).catch(function(){return null})},U.prototype._scheduleInactivityCallback=function(D){var O=this;D&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===O._peerConnection.iceConnectionState&&D()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!D&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},U.prototype.start=function(D){var O=this;this.stop(),this._timer=setInterval(function(){O._getIceConnectionStats().then(function(N){!N||((!O._lastActivity||O._lastActivity.bytesReceived!==N.bytesReceived)&&(O._lastActivity=N,O._scheduleInactivityCallback(null)),N.timestamp-O._lastActivity.timestamp>=O._inactivityThresholdMs&&("disconnected"===O._peerConnection.iceConnectionState?D():null===O._onIceConnectionStateChanged&&O._scheduleInactivityCallback(D)))})},this._activityCheckPeriodMs)},U.prototype.stop=function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},U}();Ie.exports=Q},448:function(Ie,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,N){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,N)},function(O,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function x(){this.constructor=O}D(O,N),O.prototype=null===N?Object.create(N):(x.prototype=N.prototype,new x)}),W=Y(7697),ne=Y(523),U=function(D){function O(N,x){var J;return x=Object.assign({createCancelableRoomSignalingPromise:W},x),J=D.call(this)||this,Object.defineProperties(J,{_createCancelableRoomSignalingPromise:{value:x.createCancelableRoomSignalingPromise},_options:{value:x},_wsServer:{value:N}}),J}return L(O,D),O.prototype._connect=function(N,x,J,ie,te){return te=Object.assign({},this._options,te),this._createCancelableRoomSignalingPromise.bind(null,x,this._wsServer,N,J,ie,te)},O.prototype.createLocalParticipantSignaling=function(N,x){return new ne(N,x)},O}(Y(8043));Ie.exports=U},523:function(Ie,Oe,Y){"use strict";var J,L=this&&this.__extends||(J=function(ie,te){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,X){le.__proto__=X}||function(le,X){for(var z in X)Object.prototype.hasOwnProperty.call(X,z)&&(le[z]=X[z])})(ie,te)},function(ie,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function le(){this.constructor=ie}J(ie,te),ie.prototype=null===te?Object.create(te):(le.prototype=te.prototype,new le)}),W=Y(5677),ne=Y(5771),Q=Y(8701).DEFAULT_LOG_LEVEL,U=Y(1458),D=Y(9739),O=D.buildLogLevels,N=D.isDeepEqual,x=function(J){function ie(te,le,X){var z;X=Object.assign({logLevel:Q,LocalTrackPublicationV2:ne},X),z=J.call(this)||this;var K=O(X.logLevel);return Object.defineProperties(z,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:te},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:X.LocalTrackPublicationV2},_log:{value:X.log?X.log.createLog("default",z):new U("default",z,K,X.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:le},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),z}return L(ie,J),ie.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},ie.prototype.setSignalingRegion=function(te){this._signalingRegion||(this._signalingRegion=te)},ie.prototype.setBandwidthProfile=function(te){N(this._bandwidthProfile,te)||(this._bandwidthProfile=JSON.parse(JSON.stringify(te)),this._bandwidthProfileRevision++,this.didUpdate())},ie.prototype.getParameters=function(){return this._encodingParameters},ie.prototype.setParameters=function(te){return this._encodingParameters.update(te),this},ie.prototype.update=function(te){return this._publishedRevision>=te.revision||(this._publishedRevision=te.revision,te.tracks.forEach(function(le){var X=this.tracks.get(le.id);X&&X.update(le)},this)),this},ie.prototype._createLocalTrackPublicationSignaling=function(te,le,X){return new this._LocalTrackPublicationV2(te,le,X)},ie.prototype.addTrack=function(te,le,X){var z=this;J.prototype.addTrack.call(this,te,le,X);var K=this.getPublication(te),se=K.isEnabled,ve=K.updatedPriority,De=function(){(se!==K.isEnabled||ve!==K.updatedPriority)&&(z.didUpdate(),se=K.isEnabled,ve=K.updatedPriority)};return K.on("updated",De),this._removeListener(K),this._removeListeners.set(K,function(){return K.removeListener("updated",De)}),this.didUpdate(),this},ie.prototype._removeListener=function(te){var le=this._removeListeners.get(te);le&&le()},ie.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(te){return te.getState()})}},ie.prototype.didUpdate=function(){this._revision++,this.emit("updated")},ie.prototype.removeTrack=function(te){var le=J.prototype.removeTrack.call(this,te);return le&&(te.removeClone(le.trackTransceiver),this._removeListener(le),this.didUpdate()),le},ie.prototype.setNetworkQualityConfiguration=function(te){this.networkQualityConfiguration.update(te)},ie.prototype.setPublisherHint=function(te,le){var X=Array.from(this.tracks.values()).find(function(z){return z.sid===te});return X?X.trackTransceiver.setPublisherHint(le):(this._log.warn("track:"+te+" not found"),Promise.resolve("UNKNOWN_TRACK"))},ie}(W);Ie.exports=x},5771:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(3157),ne=Y(8380).createTwilioError,Q=function(U){function D(O,N,x){return U.call(this,O,N,x)||this}return L(D,U),D.prototype.getState=function(){return{enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority}},D.prototype.update=function(O){switch(O.state){case"ready":this.setSid(O.sid);break;case"failed":var N=O.error;this.publishFailed(ne(N.code,N.message))}return this},D}(W);Ie.exports=Q},4071:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(9069),ne=0,Q=function(U){function D(O,N,x){var J=U.call(this)||this;return Object.defineProperties(J,{_instanceId:{value:ne++},channel:{value:N},_log:{value:x.log.createLog("default",J)},_getReceiver:{value:O},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),J}return L(D,U),Object.defineProperty(D.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),D.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},D.prototype.setup=function(O){var N=this;this._teardown(),this._log.info("setting up msp transport for id:",O);var x=this._getReceiver(O).then(function(J){if("data"!==J.kind&&N._log.error("Expected a DataTrackReceiver"),N._receiverPromise===x){try{N._transport=J.toDataTransport(),N.emit("ready",N._transport)}catch(ie){N._log.error("Failed to toDataTransport: "+ie.message)}J.once("close",function(){return N._teardown()})}});this._receiverPromise=x},D.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},D}(W);Ie.exports=Q},9056:function(Ie,Oe,Y){"use strict";var O,L=this&&this.__extends||(O=function(N,x){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,ie){J.__proto__=ie}||function(J,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(J[te]=ie[te])})(N,x)},function(N,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function J(){this.constructor=N}O(N,x),N.prototype=null===x?Object.create(x):(J.prototype=x.prototype,new J)}),W=this&&this.__read||function(O,N){var x="function"==typeof Symbol&&O[Symbol.iterator];if(!x)return O;var ie,le,J=x.call(O),te=[];try{for(;(void 0===N||N-- >0)&&!(ie=J.next()).done;)te.push(ie.value)}catch(X){le={error:X}}finally{try{ie&&!ie.done&&(x=J.return)&&x.call(J)}finally{if(le)throw le.error}}return te},ne=Y(9069),Q=Y(8753),U=function(O){function N(x,J){var ie=O.call(this)||this;return Object.defineProperties(ie,{_factories:{value:new WeakMap},_manager:{value:x},_signaling:{value:J}}),J.on("updated",function(){return ie.emit("updated")}),ie}return L(N,O),Object.defineProperty(N.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),N.prototype.start=function(){var x=this;this.stop();var J=setTimeout(function(){x._timeout===J&&function D(O){var ie=(O._manager._peerConnections?Array.from(O._manager._peerConnections.values()):[]).map(function(te){return te._peerConnection}).filter(function(te){return"closed"!==te.signalingState}).map(function(te){if(O._factories.has(te))return O._factories.get(te);var le=new Q(te);return O._factories.set(te,le),le}).map(function(te){return te.next().catch(function(){return null})});return Promise.all(ie).then(function(te){return te.filter(function(le){return le}).map(function(le){return le.summarize()})})}(x).then(function(ie){if(x._timeout===J){if(ie.length){var te=W(ie,1);x._signaling.put(te[0])}x.start()}})},200);this._timeout=J},N.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},N}(ne);Ie.exports=U},5775:function(Ie,Oe,Y){"use strict";var N,L=this&&this.__extends||(N=function(x,J){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,te){ie.__proto__=te}||function(ie,te){for(var le in te)Object.prototype.hasOwnProperty.call(te,le)&&(ie[le]=te[le])})(x,J)},function(x,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function ie(){this.constructor=x}N(x,J),x.prototype=null===J?Object.create(J):(ie.prototype=J.prototype,new ie)}),W=Y(4071),ne=Y(6412),Q=Y(6543),D=function(N){function x(J,ie,te){var le=N.call(this,J,"network_quality",te)||this;return Object.defineProperties(le,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new ne},_resendTimer:{value:new Q(function(){le._resendTimer.setDelay(1.5*le._resendTimer.delay),le._sendNetworkQualityInputs()},5e3,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:ie.local,remoteReportLevel:ie.remote}}}}),le.on("ready",function(X){X.on("message",function(z){"network_quality"===(le._log.debug("Incoming: ",z),z.type)&&le._handleNetworkQualityMessage(z)})}),le._sendNetworkQualityInputs(),le}return L(x,N),Object.defineProperty(x.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),x.prototype._handleNetworkQualityMessage=function(J){var ie=this,te=!1,le=null,X=J?J.local:null;"number"==typeof X?(le=X,this._levels=null):"object"==typeof X&&X&&(this._levels=X,le="number"==typeof X.level?X.level:Math.min(X.audio.send,X.audio.recv,X.video.send,X.video.recv)),null!==le&&this.level!==le&&(this._level=le,te=!0),this._remoteLevels=J&&J.remotes?J.remotes.reduce(function(z,K){return(ie._remoteLevels.get(K.sid)||{}).level!==K.level&&(te=!0),z.set(K.sid,K)},new Map):this._remoteLevels,te&&this.emit("updated"),this._resendTimer.setDelay(5e3),this._resendTimer.isSet&&setTimeout(function(){return ie._sendNetworkQualityInputs()},1e3)},x.prototype._sendNetworkQualityInputs=function(){var J=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(ie){J._transport&&J._transport.publish(function O(N,x){return Object.assign({type:"network_quality"},N,x)}(ie,J._networkQualityReportLevels))}).finally(function(){J._resendTimer.start()})},x.prototype.put=function(J){this._networkQualityInputs.put(J)},x}(W);Ie.exports=D},1058:function(Ie,Oe,Y){"use strict";var jn,L=this&&this.__extends||(jn=function(vn,Ne){return(jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Zt){dt.__proto__=Zt}||function(dt,Zt){for(var en in Zt)Object.prototype.hasOwnProperty.call(Zt,en)&&(dt[en]=Zt[en])})(vn,Ne)},function(vn,Ne){if("function"!=typeof Ne&&null!==Ne)throw new TypeError("Class extends value "+String(Ne)+" is not a constructor or null");function dt(){this.constructor=vn}jn(vn,Ne),vn.prototype=null===Ne?Object.create(Ne):(dt.prototype=Ne.prototype,new dt)}),W=this&&this.__read||function(jn,vn){var Ne="function"==typeof Symbol&&jn[Symbol.iterator];if(!Ne)return jn;var Zt,gn,dt=Ne.call(jn),en=[];try{for(;(void 0===vn||vn-- >0)&&!(Zt=dt.next()).done;)en.push(Zt.value)}catch(pi){gn={error:pi}}finally{try{Zt&&!Zt.done&&(Ne=dt.return)&&Ne.call(dt)}finally{if(gn)throw gn.error}}return en},ne=this&&this.__spreadArray||function(jn,vn){for(var Ne=0,dt=vn.length,Zt=jn.length;Ne<dt;Ne++,Zt++)jn[Zt]=vn[Ne];return jn},Q=Y(2606),U=Y(1647),D=U.RTCIceCandidate,O=U.RTCPeerConnection,N=U.RTCSessionDescription,x=U.getStats,J=Y(7627),ie=Y(8701),te=ie.DEFAULT_ICE_GATHERING_TIMEOUT_MS,le=ie.DEFAULT_LOG_LEVEL,X=ie.DEFAULT_SESSION_TIMEOUT_SEC,z=ie.iceRestartBackoffConfig,K=Y(3898),se=K.addOrRewriteNewTrackIds,ve=K.addOrRewriteTrackIds,De=K.createCodecMapForMediaSection,pe=K.disableRtx,Ee=K.enableDtxForOpus,Ae=K.filterLocalCodecs,ge=K.getMediaSections,re=K.removeSSRCAttributes,de=K.revertSimulcast,we=K.setCodecPreferences,Fe=K.setSimulcast,xe=Y(6543),Ve=Y(8380),ze=Ve.MediaClientLocalDescFailedError,Ze=Ve.MediaClientRemoteDescFailedError,je=Y(9739),xt=je.buildLogLevels,Wt=je.getPlatform,ht=je.isChromeScreenShareTrack,qe=je.oncePerTick,Ue=je.defer,Ye=Y(380),Re=Y(2282),tt=Y(2498),Dt=Y(3501),zt=Y(8675),kt=Y(1458),mt=Y(1057),zn=Y(3073),qn=J.guessBrowser(),Lr=Wt(),jr=/android/.test(Lr),Or="chrome"===qn,wr="firefox"===qn,Pn="safari"===qn,Si=0,ki={open:["closed","updating"],updating:["closed","open"],closed:[]},ho=function(jn){function vn(Ne,dt,Zt,en){var gn=jn.call(this,"open",ki)||this,pi=Xe(en=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:ht,iceServers:[],logLevel:le,offerOptions:{},revertSimulcast:de,sessionTimeout:1e3*X,setCodecPreferences:we,setSimulcast:Fe,Backoff:Q,IceConnectionMonitor:Re,RTCIceCandidate:D,RTCPeerConnection:O,RTCSessionDescription:N,Timeout:xe},en)),bo=xt(en.logLevel),Cs=en.RTCPeerConnection;!0===en.enableDscp&&(en.chromeSpecificConstraints=en.chromeSpecificConstraints||{},en.chromeSpecificConstraints.optional=en.chromeSpecificConstraints.optional||[],en.chromeSpecificConstraints.optional.push({googDscp:!0}));var ts=en.log?en.log.createLog("webrtc",gn):new kt("webrtc",gn,bo,en.loggerName),mo=new Cs(pi,en.chromeSpecificConstraints);en.dummyAudioMediaStreamTrack&&mo.addTrack(en.dummyAudioMediaStreamTrack),Object.defineProperties(gn,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:en.enableDscp},_encodingParameters:{value:dt},_isChromeScreenShareTrack:{value:en.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new en.Timeout(function(){return gn._handleIceGatheringTimeout()},te,!1)},_iceRestartBackoff:{value:new en.Backoff(z)},_instanceId:{value:++Si},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:ts},_eventObserver:{value:en.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new en.IceConnectionMonitor(mo)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:en.offerOptions},_onEncodingParametersChanged:{value:qe(function(){gn._needsAnswer||Ss(gn)})},_peerConnection:{value:mo},_preferredAudioCodecs:{value:Zt.audio},_preferredVideoCodecs:{value:Zt.video},_shouldApplyDtx:{value:Zt.audio.every(function(Rr){return"opus"!==Rr.codec})||Zt.audio.some(function(Rr){return"opus"===Rr.codec&&Rr.dtx})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new en.Timeout(function(){ts.debug("ICE reconnect timed out"),gn.close()},en.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new Ye},_setCodecPreferences:{value:wr&&jr&&Zt.video[0]&&"h264"!==Zt.video[0].codec.toLowerCase()?function(Rr){return Rr}:en.setCodecPreferences},_setSimulcast:{value:en.setSimulcast},_revertSimulcast:{value:en.revertSimulcast},_RTCIceCandidate:{value:en.RTCIceCandidate},_RTCPeerConnection:{value:en.RTCPeerConnection},_RTCSessionDescription:{value:en.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:Ne}}),dt.on("changed",gn._onEncodingParametersChanged),mo.addEventListener("connectionstatechange",gn._handleConnectionStateChange.bind(gn)),mo.addEventListener("datachannel",gn._handleDataChannelEvent.bind(gn)),mo.addEventListener("icecandidate",gn._handleIceCandidateEvent.bind(gn)),mo.addEventListener("iceconnectionstatechange",gn._handleIceConnectionStateChange.bind(gn)),mo.addEventListener("icegatheringstatechange",gn._handleIceGatheringStateChange.bind(gn)),mo.addEventListener("signalingstatechange",gn._handleSignalingStateChange.bind(gn)),mo.addEventListener("track",gn._handleTrackEvent.bind(gn));var Yn=gn;return gn.on("stateChanged",function Rr($i){"closed"===$i&&(Yn.removeListener("stateChanged",Rr),Yn._dataChannels.forEach(function(hu,nr){Yn.removeDataTrackSender(nr)}))}),gn}return L(vn,jn),vn.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},vn.prototype.setEffectiveAdaptiveSimulcast=function(Ne){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",Ne),this._preferredVideoCodecs.forEach(function(dt){"adaptiveSimulcast"in dt&&(dt.adaptiveSimulcast=Ne)})},Object.defineProperty(vn.prototype,"_shouldApplySimulcast",{get:function(){return!(!Or&&!Pn)&&this._preferredVideoCodecs.some(function(dt){return"vp8"===dt.codec.toLowerCase()&&dt.simulcast&&!1!==dt.adaptiveSimulcast})},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"connectionState",{get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"isApplicationSectionNegotiated",{get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&ge(this._peerConnection.localDescription.sdp,"application").length>0},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var Ne=this._preferredVideoCodecs.find(function(dt){return"adaptiveSimulcast"in dt});return Ne&&!0===Ne.adaptiveSimulcast},enumerable:!1,configurable:!0}),vn.prototype._maybeUpdateEncodings=function(Ne,dt,Zt){if(void 0===Zt&&(Zt=!1),"video"!==Ne.kind||"ended"===Ne.readyState)return!1;var en=J.guessBrowser();return!!("safari"===en||"chrome"===en&&this._isAdaptiveSimulcastEnabled)&&(this._updateEncodings(Ne,dt,Zt),!0)},vn.prototype._updateEncodings=function(Ne,dt,Zt){if(this._isChromeScreenShareTrack(Ne)){var en=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];dt.forEach(function(Rr,$i){var hu=en[$i];hu?(Rr.scaleResolutionDownBy=hu.scaleResolutionDownBy,Zt&&delete Rr.active):(Rr.active=!1,delete Rr.scaleResolutionDownBy)})}else{var gn=Ne.getSettings(),ts=gn.width*gn.height,mo=[{pixels:518400,maxActiveLayers:3},{pixels:129600,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}].find(function(Rr){return ts>=Rr.pixels}),Yn=Math.min(dt.length,mo.maxActiveLayers);dt.forEach(function(Rr,$i){$i<Yn?(Rr.scaleResolutionDownBy=1<<Yn-$i-1,Zt&&(Rr.active=!0)):(Rr.active=!1,delete Rr.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",dt.map(function(Rr,$i){return"["+$i+": "+Rr.active+", "+(Rr.scaleResolutionDownBy||0)+"]"}).join(", "))},vn.prototype._addIceCandidate=function(Ne){var dt=this;return Promise.resolve().then(function(){return Ne=new dt._RTCIceCandidate(Ne),dt._peerConnection.addIceCandidate(Ne)}).catch(function(Zt){dt._log.warn("Failed to add RTCIceCandidate "+(Ne?'"'+Ne.candidate+'"':"null")+": "+Zt.message)})},vn.prototype._addIceCandidates=function(Ne){return Promise.all(Ne.map(this._addIceCandidate,this)).then(function(){})},vn.prototype._addOrUpdateTransceiver=function(Ne){var dt=this,Zt=function dn(jn,vn){var Ne={audio:jn._preferredAudioCodecs.map(function(gn){return gn.codec.toLowerCase()}),video:jn._preferredVideoCodecs.map(function(gn){return gn.codec.toLowerCase()})}[vn],dt=jn._recycledTransceivers[vn],Zt=Ne.find(function(gn){return jn._localCodecs.has(gn)});if(!Zt)return dt.shift();var en=dt.find(function(gn){var pi=jn._remoteCodecMaps.get(gn.mid);return pi&&pi.has(Zt)});return en&&dt.splice(dt.indexOf(en),1),en}(this,Ne.kind);if(Zt&&Zt.sender){var en=Zt.sender.track?Zt.sender.track.id:null;return en&&this._log.warn("Reusing transceiver: "+Zt.mid+"] "+en+" => "+Ne.id),this._replaceTrackPromises.set(Zt,Zt.sender.replaceTrack(Ne).then(function(){Zt.direction="sendrecv"},function(){}).finally(function(){dt._replaceTrackPromises.delete(Zt)})),Zt}return this._peerConnection.addTransceiver(Ne)},vn.prototype._checkIceBox=function(Ne){var dt=$t(Ne);if(!dt)return Promise.resolve();var Zt=this._remoteCandidates.setUfrag(dt);return this._addIceCandidates(Zt)},vn.prototype._answer=function(Ne){var dt=this;return Promise.resolve().then(function(){return dt._negotiationRole||(dt._negotiationRole="answerer"),dt._setRemoteDescription(Ne)}).catch(function(){throw new Ze}).then(function(){return dt._peerConnection.createAnswer()}).then(function(Zt){Zt=wr?new dt._RTCSessionDescription({sdp:pe(Zt.sdp),type:Zt.type}):zn(Zt);var en=re(Zt.sdp,["mslabel","label"]);if(dt._shouldApplySimulcast){var gn=en;en=dt._setSimulcast(gn,dt._trackIdsToAttributes),en=dt._revertSimulcast(en,gn,Ne.sdp)}return en=en.replace(/42e015/g,"42e01f"),dt._setLocalDescription({type:Zt.type,sdp:en})}).then(function(){return dt._checkIceBox(Ne)}).then(function(){return dt._queuedDescription&&dt._updateDescription(dt._queuedDescription)}).then(function(){return dt._queuedDescription=null,dt._maybeReoffer(dt._peerConnection.localDescription)}).catch(function(Zt){var en=Zt instanceof Ze?Zt:new ze;throw dt._publishMediaWarning({message:"Failed to _answer",code:en.code,error:Zt}),en})},vn.prototype._close=function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0)},vn.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},vn.prototype._handleDataChannelEvent=function(Ne){var dt=this,Zt=Ne.channel,en=new tt(Zt);this._dataTrackReceivers.add(en),Zt.addEventListener("close",function(){dt._dataTrackReceivers.delete(en)}),this.emit("trackAdded",en)},vn.prototype._handleGlare=function(Ne){var dt=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return dt._trackIdsToAttributes=new Map(dt._appliedTrackIdsToAttributes),dt._setLocalDescription({type:"rollback"})}).then(function(){return dt._needsAnswer=!1,dt._answer(Ne)}).then(function(Zt){return Zt?Promise.resolve():dt._offer()})},vn.prototype._publishMediaWarning=function(Ne){this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:Ne.message,code:Ne.code,context:JSON.stringify({error:Ne.error.message,sdp:Ne.sdp})}})},vn.prototype._handleIceCandidateEvent=function(Ne){Ne.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(Ne.candidate));var dt={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};Ne.candidate||(dt.ice.complete=!0),this._isIceLite&&Ne.candidate||(dt.ice.revision=this._localCandidatesRevision++,this.emit("candidates",dt))},vn.prototype._handleIceConnectionStateChange=function(){var Ne=this,dt=this._peerConnection.iceConnectionState,Zt=["connected","completed"].includes(dt),en=this._log;en.debug('ICE connection state is "'+dt+'"'),Zt&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==dt||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&Zt&&en.debug("ICE reconnected"):(en.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===dt?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){Ne._iceConnectionMonitor.stop(),!Ne._shouldRestartIce&&!Ne._isRestartingIce&&(en.warn("ICE Connection Monitor detected inactivity"),Ne._isIceConnectionInactive=!0,Ne._initiateIceRestartBackoff(),Ne.emit("iceConnectionStateChanged"),Ne.emit("connectionStateChanged"))})):["disconnected","completed"].includes(dt)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=dt,this.emit("iceConnectionStateChanged")},vn.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},vn.prototype._handleIceGatheringStateChange=function(){var Ne=this._peerConnection.iceGatheringState,dt=this._log;dt.debug('ICE gathering state is "'+Ne+'"');var Zt=this._iceGatheringTimeout;"gathering"===Ne&&!this._didGenerateLocalCandidates&&!Zt.isSet&&(dt.debug("Starting ICE gathering timeout: "+Zt.delay),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},vn.prototype._handleSignalingStateChange=function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},vn.prototype._handleTrackEvent=function(Ne){var dt=this,Zt=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new mt,this._trackMatcher.update(Zt);var en=Ne.track,gn=this._trackMatcher.match(Ne)||en.id,pi=new Dt(gn,en);this._mediaTrackReceivers.forEach(function(bo){bo.track.id===pi.track.id&&dt._mediaTrackReceivers.delete(bo)}),this._mediaTrackReceivers.add(pi),en.addEventListener("ended",function(){return dt._mediaTrackReceivers.delete(pi)}),this.emit("trackAdded",pi)},vn.prototype._initiateIceRestart=function(){if("closed"!==this._peerConnection.signalingState){var Ne=this._log;Ne.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var dt=this._iceReconnectTimeout;dt.isSet||(Ne.debug("Starting ICE reconnect timeout: "+dt.delay),this._iceReconnectTimeout.start()),this.offer().catch(function(gn){Ne.error("offer failed in _initiateIceRestart with: "+gn.message)})}},vn.prototype._initiateIceRestartBackoff=function(){var Ne=this;"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return Ne._initiateIceRestart()}))},vn.prototype._maybeReoffer=function(Ne){var dt=this._shouldOffer;if(Ne&&Ne.sdp){var Zt=this._peerConnection.getSenders().filter(function(Cs){return Cs.track});dt=["audio","video"].reduce(function(Cs,ts){var mo=ge(Ne.sdp,ts,"(sendrecv|sendonly)"),Yn=Zt.filter(Me.bind(null,ts));return Cs||mo.length<Yn.length},dt);var en=this._dataChannels.size>0,gn=ge(Ne.sdp,"application").length>0;dt=dt||en&&!gn}return(dt?this._offer():Promise.resolve()).then(function(){return dt})},vn.prototype._offer=function(){var Ne=this,dt=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,dt.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return Ne._peerConnection.createOffer(dt)}).catch(function(Zt){var en=new ze;throw Ne._publishMediaWarning({message:"Failed to create offer",code:en.code,error:Zt}),en}).then(function(Zt){Zt=wr?new Ne._RTCSessionDescription({sdp:pe(Zt.sdp),type:Zt.type}):zn(Zt);var en=re(Zt.sdp,["mslabel","label"]);en=Ne._peerConnection.remoteDescription?Ae(en,Ne._peerConnection.remoteDescription.sdp):en;var gn=Ne._setCodecPreferences(en,Ne._preferredAudioCodecs,Ne._preferredVideoCodecs);return Ne._shouldOffer=!1,Ne._negotiationRole||(Ne._negotiationRole="offerer"),Ne._shouldApplySimulcast&&(Ne._localDescriptionWithoutSimulcast={type:"offer",sdp:gn},gn=Ne._setSimulcast(gn,Ne._trackIdsToAttributes)),Ne._setLocalDescription({type:"offer",sdp:gn})})},vn.prototype._getMediaTrackSenderId=function(Ne){var dt=Array.from(this._rtpSenders.keys()).find(function(Zt){return Zt.track.id===Ne});return dt?dt.id:Ne},vn.prototype._addOrRewriteLocalTrackIds=function(Ne){var dt=this,en=this._peerConnection.getTransceivers().filter(function(Yn){var Rr=Yn.sender;return!Yn.stopped&&Rr&&Rr.track}),gn=en.filter(function(Yn){return Yn.mid}),pi=new Map(gn.map(function(Yn){return[Yn.mid,dt._getMediaTrackSenderId(Yn.sender.track.id)]})),bo=ve(Ne.sdp,pi),Cs=en.filter(function(Yn){return!Yn.mid}),ts=new Map(["audio","video"].map(function(Yn){return[Yn,Cs.filter(function(Rr){return Rr.sender.track.kind===Yn}).map(function(Rr){return dt._getMediaTrackSenderId(Rr.sender.track.id)})]})),mo=se(bo,pi,ts);return new this._RTCSessionDescription({sdp:mo,type:Ne.type})},vn.prototype._rollbackAndApplyOffer=function(Ne){var dt=this;return this._setLocalDescription({type:"rollback"}).then(function(){return dt._setLocalDescription(Ne)})},vn.prototype._setLocalDescription=function(Ne){var dt=this;return"rollback"!==Ne.type&&this._shouldApplyDtx&&(Ne=new this._RTCSessionDescription({sdp:Ee(Ne.sdp),type:Ne.type})),this._peerConnection.setLocalDescription(Ne).catch(function(Zt){dt._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+Ne.type+'" failed with the error "'+Zt.message+'".',Zt);var en=new ze,gn={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+Ne.type+'" failed',code:en.code,error:Zt};throw Ne.sdp&&(dt._log.warn("The SDP was "+Ne.sdp),gn.sdp=Ne.sdp),dt._publishMediaWarning(gn),en}).then(function(){"rollback"!==Ne.type&&(dt._localDescription=dt._addOrRewriteLocalTrackIds(Ne),dt._shouldApplyDtx&&(dt._localDescription=new dt._RTCSessionDescription({sdp:Ee(dt._localDescription.sdp,[]),type:dt._localDescription.type})),dt._localCandidates=[],"offer"===Ne.type?dt._descriptionRevision++:"answer"===Ne.type&&(dt._lastStableDescriptionRevision=dt._descriptionRevision,fo(dt)),dt._localUfrag=$t(Ne),dt.emit("description",dt.getState()))})},vn.prototype._setRemoteDescription=function(Ne){var dt=this;return Ne.sdp&&(Ne.sdp=this._setCodecPreferences(Ne.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),Ne.sdp=this._shouldApplyDtx?Ee(Ne.sdp):Ee(Ne.sdp,[]),wr&&(Ne.sdp=function st(jn){return jn.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}(Ne.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(Ne.sdp))),Ne=new this._RTCSessionDescription(Ne),Promise.resolve().then(function(){if("answer"===Ne.type&&dt._localDescriptionWithoutSimulcast){var Zt=dt._preferredVideoCodecs.find(function(pi){return"adaptiveSimulcast"in pi}),gn=dt._revertSimulcast(dt._localDescription.sdp,dt._localDescriptionWithoutSimulcast.sdp,Ne.sdp,!!Zt&&!1===Zt.adaptiveSimulcast);if(dt._localDescriptionWithoutSimulcast=null,gn!==dt._localDescription.sdp)return dt._rollbackAndApplyOffer({type:dt._localDescription.type,sdp:gn})}}).then(function(){return dt._peerConnection.setRemoteDescription(Ne)}).then(function(){"answer"===Ne.type&&(dt._isRestartingIce&&(dt._log.debug("An ICE restart was in-progress and is now completed"),dt._isRestartingIce=!1),fo(dt))},function(Zt){throw dt._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+Ne.type+'" failed with the error "'+Zt.message+'".',Zt),Ne.sdp&&dt._log.warn("The SDP was "+Ne.sdp),Zt})},vn.prototype._updateDescription=function(Ne){var dt=this;switch(Ne.type){case"answer":case"pranswer":if(Ne.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=Ne.revision;break;case"close":return this._close();case"create-offer":return Ne.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=Ne,Promise.resolve()):(this._descriptionRevision=Ne.revision,this._offer());case"offer":return Ne.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=Ne,Promise.resolve()):(this._descriptionRevision=Ne.revision,this._handleGlare(Ne)):(this._descriptionRevision=Ne.revision,this._answer(Ne).then(function(){}))}var Zt=Ne.revision;return Promise.resolve().then(function(){return dt._setRemoteDescription(Ne)}).catch(function(en){var gn=new Ze;throw dt._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+Ne.type+'" failed',code:gn.code,error:en,sdp:Ne.sdp}),gn}).then(function(){return dt._lastStableDescriptionRevision=Zt,dt._needsAnswer=!1,dt._checkIceBox(Ne)}).then(function(){return dt._queuedDescription&&dt._updateDescription(dt._queuedDescription)}).then(function(){return dt._queuedDescription=null,dt._maybeReoffer(dt._peerConnection.localDescription).then(function(){})})},vn.prototype._updateIce=function(Ne){var dt=this._remoteCandidates.update(Ne);return this._addIceCandidates(dt)},vn.prototype.addDataTrackSender=function(Ne){if(!this._dataChannels.has(Ne))try{var dt={ordered:Ne.ordered};null!==Ne.maxPacketLifeTime&&(dt.maxPacketLifeTime=Ne.maxPacketLifeTime),null!==Ne.maxRetransmits&&(dt.maxRetransmits=Ne.maxRetransmits);var Zt=this._peerConnection.createDataChannel(Ne.id,dt);Ne.addDataChannel(Zt),this._dataChannels.set(Ne,Zt)}catch(en){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+Ne.id+'": '+en.message)}},vn.prototype._handleQueuedPublisherHints=function(){var Ne=this;"stable"===this._peerConnection.signalingState&&this._mediaTrackSenderToPublisherHints.forEach(function(dt,Zt){var en=dt.deferred,gn=dt.encodings;Ne._mediaTrackSenderToPublisherHints.delete(Zt),Ne._setPublisherHint(Zt,gn).then(function(pi){return en.resolve(pi)}).catch(function(pi){return en.reject(pi)})})},vn.prototype._setPublisherHint=function(Ne,dt){var Zt=this;if(wr)return Promise.resolve("COULD_NOT_APPLY_HINT");this._mediaTrackSenderToPublisherHints.has(Ne)&&(this._mediaTrackSenderToPublisherHints.get(Ne).deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(Ne));var gn=this._rtpSenders.get(Ne);if(!gn)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if("closed"===this._peerConnection.signalingState)return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if("stable"!==this._peerConnection.signalingState){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var pi=Ue();return this._mediaTrackSenderToPublisherHints.set(Ne,{deferred:pi,encodings:dt}),pi.promise}var bo=gn.getParameters();return null!==dt&&dt.forEach(function(Cs){var ts=Cs.enabled,mo=Cs.layer_index;bo.encodings.length>mo?(Zt._log.debug("layer:"+mo+", active:"+bo.encodings[mo].active+" => "+ts),bo.encodings[mo].active=ts):Zt._log.warn("invalid layer:"+mo+", active:"+ts)}),this._maybeUpdateEncodings(gn.track,bo.encodings,null===dt),gn.setParameters(bo).then(function(){return"OK"}).catch(function(Cs){return Zt._log.error("Failed to apply publisher hints:",Cs),"COULD_NOT_APPLY_HINT"})},vn.prototype.addMediaTrackSender=function(Ne){var dt=this;if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has(Ne)){var en=this._addOrUpdateTransceiver(Ne.track).sender;Ne.addSender(en,function(gn){return dt._setPublisherHint(Ne,gn)}),this._rtpNewSenders.add(en),this._rtpSenders.set(Ne,en)}},vn.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},vn.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},vn.prototype.getState=function(){if(!this._localDescription)return null;var dt={type:this._localDescription.type,revision:"answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision};return this._localDescription.sdp&&(dt.sdp=this._localDescription.sdp),{description:dt,id:this.id}},vn.prototype.offer=function(){var Ne=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(dt){return Ne.transition("updating",dt),(Ne._needsAnswer||Ne._isRestartingIce?Promise.resolve():Ne._offer()).then(function(){Ne.tryTransition("open",dt)},function(en){throw Ne.tryTransition("open",dt),en})})},vn.prototype.removeDataTrackSender=function(Ne){var dt=this._dataChannels.get(Ne);dt&&(Ne.removeDataChannel(dt),this._dataChannels.delete(Ne),dt.close())},vn.prototype.removeMediaTrackSender=function(Ne){var dt=this._rtpSenders.get(Ne);dt&&("closed"!==this._peerConnection.signalingState&&this._peerConnection.removeTrack(dt),Ne.removeSender(dt),this._mediaTrackSenderToPublisherHints.has(Ne)&&(this._mediaTrackSenderToPublisherHints.get(Ne).deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(Ne)),this._rtpNewSenders.delete(dt),this._rtpSenders.delete(Ne))},vn.prototype.setConfiguration=function(Ne){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(Xe(Ne))},vn.prototype.setIceReconnectTimeout=function(Ne){return this._iceReconnectTimeout.setDelay(Ne),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},vn.prototype.update=function(Ne){var dt=this;return this.bracket("updating",function(Zt){if("closed"===dt.state)return Promise.resolve();dt.transition("updating",Zt);var en=[];return Ne.ice&&en.push(dt._updateIce(Ne.ice)),Ne.description&&en.push(dt._updateDescription(Ne.description)),Promise.all(en).then(function(){dt.tryTransition("open",Zt)},function(gn){throw dt.tryTransition("open",Zt),gn})})},vn.prototype.getStats=function(){var Ne=this;return x(this._peerConnection).then(function(dt){return function Ht(jn,vn){return Object.assign(vn,{remoteAudioTrackStats:vn.remoteAudioTrackStats.map(function(Ne){return At(jn,Ne)}),remoteVideoTrackStats:vn.remoteVideoTrackStats.map(function(Ne){return At(jn,Ne)}),localAudioTrackStats:vn.localAudioTrackStats.map(function(Ne){return po(jn,Ne)}),localVideoTrackStats:vn.localVideoTrackStats.map(function(Ne){return po(jn,Ne)})})}(Ne,dt)})},vn}(zt);function po(jn,vn){var Ne=jn._getMediaTrackSenderId(vn.trackId);return Object.assign(vn,{trackId:Ne})}function At(jn,vn){var Ne=ne([],W(jn._mediaTrackReceivers)).find(function(Zt){return Zt.track.id===vn.trackId});return Object.assign(vn,{trackId:Ne?Ne.id:null})}function $t(jn){if(jn.sdp){var vn=jn.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(vn)return vn[1]}return null}function Xe(jn){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},jn)}function Me(jn,vn){var Ne=vn.track;return Ne&&Ne.kind===jn&&"ended"!==Ne.readyState}function fo(jn){(function es(jn){jn._recycledTransceivers.audio=[],jn._recycledTransceivers.video=[],jn._peerConnection.getTransceivers().forEach(function(vn){(function kn(jn,vn){return!jn.stopped&&!vn._replaceTrackPromises.has(jn)&&["inactive","recvonly"].includes(jn.direction)})(vn,jn)&&jn._recycledTransceivers[vn.receiver.track.kind].push(vn)})})(jn),function Xi(jn){var vn=jn._peerConnection.localDescription;!vn||!vn.sdp||ge(vn.sdp).forEach(function(Ne){De(Ne).forEach(function(Zt,en){return jn._localCodecs.add(en)})})}(jn),function Zo(jn){var vn=jn._peerConnection.remoteDescription;!vn||!vn.sdp||ge(vn.sdp).forEach(function(Ne){var dt=Ne.match(/^a=mid:(.+)$/m);if(dt&&dt[1]){var Zt=dt[1],en=De(Ne);jn._remoteCodecMaps.set(Zt,en)}})}(jn),Ss(jn).then(function(){jn._handleQueuedPublisherHints()})}function Ss(jn){var vn=jn._encodingParameters,Zt=new Map([["audio",vn.maxAudioBitrate],["video",vn.maxVideoBitrate]]),en=[];return jn._peerConnection.getSenders().filter(function(gn){return gn.track}).forEach(function(gn){var pi=Zt.get(gn.track.kind),bo=gn.getParameters();null===pi||0===pi?function oo(jn){Array.isArray(jn.encodings)&&jn.encodings.forEach(function(vn){return delete vn.maxBitrate})}(bo):jn._isChromeScreenShareTrack(gn.track)?jn._log.warn("Not setting maxBitrate for "+gn.track.kind+" Track "+gn.track.id+" because it appears to be screen share track: "+gn.track.label):function Pc(jn,vn){wr?jn.encodings=[{maxBitrate:vn}]:jn.encodings.forEach(function(Ne){Ne.maxBitrate=vn})}(bo,pi),!wr&&jn._enableDscp&&bo.encodings.length>0&&(bo.encodings[0].networkPriority="high");var Cs=jn._rtpNewSenders.has(gn);jn._maybeUpdateEncodings(gn.track,bo.encodings,Cs),jn._rtpNewSenders.delete(gn);var ts=gn.setParameters(bo).catch(function(mo){jn._log.warn("Error while setting encodings parameters for "+gn.track.kind+" Track "+gn.track.id+": "+(mo.message||mo.name))});en.push(ts)}),Promise.all(en)}Ie.exports=ho},6603:function(Ie,Oe,Y){"use strict";var ge,L=this&&this.__extends||(ge=function(re,de){return(ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(we,Fe){we.__proto__=Fe}||function(we,Fe){for(var xe in Fe)Object.prototype.hasOwnProperty.call(Fe,xe)&&(we[xe]=Fe[xe])})(re,de)},function(re,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function we(){this.constructor=re}ge(re,de),re.prototype=null===de?Object.create(de):(we.prototype=de.prototype,new we)}),W=this&&this.__read||function(ge,re){var de="function"==typeof Symbol&&ge[Symbol.iterator];if(!de)return ge;var Fe,Ve,we=de.call(ge),xe=[];try{for(;(void 0===re||re-- >0)&&!(Fe=we.next()).done;)xe.push(Fe.value)}catch(ze){Ve={error:ze}}finally{try{Fe&&!Fe.done&&(de=we.return)&&de.call(we)}finally{if(Ve)throw Ve.error}}return xe},ne=this&&this.__spreadArray||function(ge,re){for(var de=0,we=re.length,Fe=ge.length;de<we;de++,Fe++)ge[Fe]=re[de];return ge},Q=Y(7627).guessBrowser,U=Y(1058),D=Y(808),O=Y(7772),N=Y(9739),x=Y(8380).MediaConnectionError,J="firefox"===Q(),ie=function(ge){function re(de,we,Fe){var xe=ge.call(this)||this,Ve=(Fe=Object.assign({audioContextFactory:J?Y(7708):null,PeerConnectionV2:U},Fe)).audioContextFactory?Fe.audioContextFactory.getOrCreate(xe):null,ze=Ve?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(xe,{_audioContextFactory:{value:Fe.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:N.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:Ve?new D(te(Ve)):null},_encodingParameters:{value:de},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:ze},_peerConnections:{value:new Map},_preferredCodecs:{value:we},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:Fe.PeerConnectionV2}}),xe}return L(re,ge),re.prototype.setEffectiveAdaptiveSimulcast=function(de){this._peerConnections.forEach(function(we){return we.setEffectiveAdaptiveSimulcast(de)}),this._preferredCodecs.video.forEach(function(we){"adaptiveSimulcast"in we&&(we.adaptiveSimulcast=de)})},Object.defineProperty(re.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),re.prototype._closeAbsentPeerConnections=function(de){var we=new Set(de.map(function(Fe){return Fe.id}));return this._peerConnections.forEach(function(Fe){we.has(Fe.id)||Fe._close()}),this},re.prototype._getConfiguration=function(){return this._configurationDeferred.promise},re.prototype._getOrCreate=function(de,we){var Fe=this,xe=this,Ve=this._peerConnections.get(de);if(!Ve){var ze=this._PeerConnectionV2,Ze=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},we);try{Ve=new ze(de,this._encodingParameters,this._preferredCodecs,Ze)}catch{throw new x}this._peerConnections.set(Ve.id,Ve),Ve.on("candidates",this.queue.bind(this,"candidates")),Ve.on("description",this.queue.bind(this,"description")),Ve.on("trackAdded",this.queue.bind(this,"trackAdded")),Ve.on("stateChanged",function je(xt){"closed"===xt&&(Ve.removeListener("stateChanged",je),xe._dataTrackSenders.forEach(function(Wt){return Ve.removeDataTrackSender(Wt)}),xe._mediaTrackSenders.forEach(function(Wt){return Ve.removeMediaTrackSender(Wt)}),xe._peerConnections.delete(Ve.id),xe._closedPeerConnectionIds.add(Ve.id),Ae(xe),Ee(xe))}),Ve.on("connectionStateChanged",function(){return Ae(Fe)}),Ve.on("iceConnectionStateChanged",function(){return Ee(Fe)}),this._dataTrackSenders.forEach(Ve.addDataTrackSender,Ve),this._mediaTrackSenders.forEach(Ve.addMediaTrackSender,Ve),Ee(this)}return Ve},re.prototype.close=function(){return this._peerConnections.forEach(function(de){de.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),Ee(this),this},re.prototype.createAndOffer=function(){var de=this;return this._getConfiguration().then(function(we){var Fe;do{Fe=N.makeUUID()}while(de._peerConnections.has(Fe));return de._getOrCreate(Fe,we)}).then(function(we){return we.offer()}).then(function(){return de})},re.prototype.getTrackReceivers=function(){return N.flatMap(this._peerConnections,function(de){return de.getTrackReceivers()})},re.prototype.getStates=function(){var de=[];return this._peerConnections.forEach(function(we){var Fe=we.getState();Fe&&de.push(Fe)}),de},re.prototype.setConfiguration=function(de){return this._configuration&&(this._configurationDeferred=N.defer(),this._peerConnections.forEach(function(we){we.setConfiguration(de)})),this._configuration=de,this._configurationDeferred.resolve(de),this},re.prototype.setIceReconnectTimeout=function(de){return null===this._sessionTimeout&&(this._peerConnections.forEach(function(we){we.setIceReconnectTimeout(de)}),this._sessionTimeout=de),this},re.prototype.setTrackSenders=function(de){var we=new Set(de.filter(function(Ve){return"data"===Ve.kind})),Fe=new Set(de.filter(function(Ve){return Ve&&("audio"===Ve.kind||"video"===Ve.kind)})),xe=function z(ge,re,de){return{data:X(ge,re),media:K(ge,de)}}(this,we,Fe);return this._dataTrackSenders=we,this._mediaTrackSenders=Fe,function le(ge,re){(re.data.add.size||re.data.remove.size||re.media.add.size||re.media.remove.size)&&ge._peerConnections.forEach(function(de){re.data.remove.forEach(de.removeDataTrackSender,de),re.media.remove.forEach(de.removeMediaTrackSender,de),re.data.add.forEach(de.addDataTrackSender,de),re.media.add.forEach(de.addMediaTrackSender,de),(re.media.add.size||re.media.remove.size||re.data.add.size&&!de.isApplicationSectionNegotiated)&&de.offer()})}(this,xe),this},re.prototype.update=function(de,we){var Fe=this;return void 0===we&&(we=!1),we&&this._closeAbsentPeerConnections(de),this._getConfiguration().then(function(xe){return Promise.all(de.map(function(Ve){return Fe._closedPeerConnectionIds.has(Ve.id)?null:Fe._getOrCreate(Ve.id,xe).update(Ve)}))}).then(function(){return Fe})},re.prototype.getStats=function(){var de=Array.from(this._peerConnections.values());return Promise.all(de.map(function(we){return we.getStats().then(function(Fe){return[we.id,Fe]})})).then(function(we){return new Map(we)})},re}(O);function te(ge){return ge.createMediaStreamDestination().stream.getAudioTracks()[0]}function X(ge,re){return{add:N.difference(re,ge._dataTrackSenders),remove:N.difference(ge._dataTrackSenders,re)}}function K(ge,re){return{add:N.difference(re,ge._mediaTrackSenders),remove:N.difference(ge._mediaTrackSenders,re)}}var ve,se={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3};function pe(ge){return ge.length?(ve=ve||function De(){return Object.keys(se).reduce(function(ge,re){var de;return Object.assign(ge,((de={})[se[re]]=re,de))},{})}(),ge.reduce(function(re,de){return ve[Math.max(se[re],se[de])]})):"new"}function Ee(ge){ge._lastIceConnectionState=ge.iceConnectionState,ge._iceConnectionState=pe(ne([],W(ge._peerConnections.values())).map(function(re){return re.iceConnectionState})),ge.iceConnectionState!==ge._lastIceConnectionState&&ge.emit("iceConnectionStateChanged")}function Ae(ge){ge._lastConnectionState=ge.connectionState,ge._connectionState=pe(ne([],W(ge._peerConnections.values())).map(function(re){return re.connectionState})),ge.connectionState!==ge._lastConnectionState&&ge.emit("connectionStateChanged")}Ie.exports=ie},8069:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(4071),ne=1,Q=function(U){function D(O,N){var x=U.call(this,O,"publisher_hints",N)||this;return x.on("ready",function(J){x._log.debug("publisher_hints transport ready:",J),J.on("message",function(ie){"publisher_hints"===(x._log.debug("Incoming: ",ie),ie.type)?ie.publisher&&ie.publisher.hints&&ie.publisher.id&&x._processPublisherHints(ie.publisher.hints,ie.publisher.id):x._log.warn("Unknown message type: ",ie.type)})}),x}return L(D,U),D.prototype.sendTrackReplaced=function(O){if(this._transport){var x={type:"client_reset",track:O.trackSid,id:ne++};this._log.debug("Outgoing: ",x),this._transport.publish(x)}},D.prototype.sendHintResponse=function(O){if(this._transport){var J={type:"publisher_hints",id:O.id,hints:O.hints};this._log.debug("Outgoing: ",J),this._transport.publish(J)}},D.prototype._processPublisherHints=function(O,N){try{this.emit("updated",O,N)}catch(x){this._log.error("error processing hints:",x)}},D}(W);Ie.exports=Q},8930:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(){var D=Q.call(this)||this;return Object.defineProperties(D,{_revision:{value:1,writable:!0}}),D}return L(U,Q),U.prototype.update=function(D){return D.revision<this._revision?this:(this._revision=D.revision,this.enable(D.is_recording))},U}(Y(9987));Ie.exports=ne},1118:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(2184),ne=Y(467),Q=function(U){function D(O,N,x,J,ie,te){var le=U.call(this,O.sid,O.identity)||this;return te=Object.assign({RemoteTrackPublicationV2:ne},te),Object.defineProperties(le,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:te.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:N},updateSubscriberTrackPriority:{value:function(X,z){return x(X,z)}},updateTrackRenderHint:{value:function(X,z){return J(X,z)}},clearTrackHint:{value:function(X){return ie(X)}},revision:{enumerable:!0,get:function(){return this._revision}}}),le.update(O)}return L(D,U),D.prototype._getOrCreateTrack=function(O){var N=this._RemoteTrackPublicationV2,x=this.tracks.get(O.sid);return x||(x=new N(O,this._getInitialTrackSwitchOffState(O.sid)),this.addTrack(x)),x},D.prototype.update=function(O){var N=this;if(null!==this.revision&&O.revision<=this.revision)return this;this._revision=O.revision;var x=new Set;switch(O.tracks.forEach(function(J){var ie=N._getOrCreateTrack(J);ie.update(J),x.add(ie)}),this.tracks.forEach(function(J){x.has(J)||N.removeTrack(J)}),O.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this},D}(W);Ie.exports=Q},467:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){return Q.call(this,D.sid,D.name,D.kind,D.enabled,D.priority,O)||this}return L(U,Q),U.prototype.update=function(D){return this.enable(D.enabled),this.setPriority(D.priority),this},U}(Y(8956));Ie.exports=ne},7818:function(Ie,Oe,Y){"use strict";var N,L=this&&this.__extends||(N=function(x,J){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,te){ie.__proto__=te}||function(ie,te){for(var le in te)Object.prototype.hasOwnProperty.call(te,le)&&(ie[le]=te[le])})(x,J)},function(x,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function ie(){this.constructor=x}N(x,J),x.prototype=null===J?Object.create(J):(ie.prototype=J.prototype,new ie)}),W=Y(4071),ne=Y(6543),Q=Y(9739).isDeepEqual,D=1,O=function(N){function x(J,ie){var te=N.call(this,J,"render_hints",ie)||this;return Object.defineProperties(te,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new ne(function(){te._sendAllHints(),te._responseTimer.setDelay(2*te._responseTimer.delay)},2e3,!1)}}),te.on("ready",function(le){le.on("message",function(X){"render_hints"===(te._log.debug("Incoming: ",X),X.type)?te._processHintResults(X&&X.subscriber&&X.subscriber.hints||[]):te._log.warn("Unknown message type: ",X.type)}),te._sendAllHints()}),te}return L(x,N),x.prototype._sendAllHints=function(){var J=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(ie){var te=J._trackSidsToRenderHints.get(ie);te.renderDimensions&&(te.isDimensionDirty=!0),"enabled"in te&&(te.isEnabledDirty=!0)}),this._sendHints()},x.prototype._processHintResults=function(J){var ie=this;this._responseTimer.clear(),this._responseTimer.setDelay(2e3),J.forEach(function(te){"OK"!==te.result&&ie._log.debug("Server error processing hint:",te)}),this._sendHints()},x.prototype._sendHints=function(){var J=this;if(this._transport&&!this._responseTimer.isSet){var ie=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(le){var X=J._trackSidsToRenderHints.get(le);if(X.isEnabledDirty||X.isDimensionDirty){var z={track:le};X.isEnabledDirty&&(z.enabled=X.enabled,X.isEnabledDirty=!1),X.isDimensionDirty&&(z.render_dimensions=X.renderDimensions,X.isDimensionDirty=!1),ie.push(z)}}),ie.length>0){var te={type:"render_hints",subscriber:{id:D++,hints:ie}};this._log.debug("Outgoing: ",te),this._transport.publish(te),this._responseTimer.start()}}},x.prototype.setTrackHint=function(J,ie){var te=this._trackSidsToRenderHints.get(J)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in ie&&te.enabled!==ie.enabled&&(te.enabled=!!ie.enabled,te.isEnabledDirty=!0),ie.renderDimensions&&!Q(ie.renderDimensions,te.renderDimensions)&&(te.renderDimensions=ie.renderDimensions,te.isDimensionDirty=!0),this._trackSidsToRenderHints.set(J,te),this._sendHints()},x.prototype.clearTrackHint=function(J){this._trackSidsToRenderHints.delete(J)},x}(W);Ie.exports=O},2112:function(Ie,Oe,Y){"use strict";var Ue,L=this&&this.__extends||(Ue=function(Ye,Re){return(Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,Dt){tt.__proto__=Dt}||function(tt,Dt){for(var zt in Dt)Object.prototype.hasOwnProperty.call(Dt,zt)&&(tt[zt]=Dt[zt])})(Ye,Re)},function(Ye,Re){if("function"!=typeof Re&&null!==Re)throw new TypeError("Class extends value "+String(Re)+" is not a constructor or null");function tt(){this.constructor=Ye}Ue(Ye,Re),Ye.prototype=null===Re?Object.create(Re):(tt.prototype=Re.prototype,new tt)}),W=this&&this.__read||function(Ue,Ye){var Re="function"==typeof Symbol&&Ue[Symbol.iterator];if(!Re)return Ue;var Dt,kt,tt=Re.call(Ue),zt=[];try{for(;(void 0===Ye||Ye-- >0)&&!(Dt=tt.next()).done;)zt.push(Dt.value)}catch(mt){kt={error:mt}}finally{try{Dt&&!Dt.done&&(Re=tt.return)&&Re.call(tt)}finally{if(kt)throw kt.error}}return zt},ne=Y(2314),Q=Y(9056),U=Y(5775),D=Y(8930),O=Y(8343),N=Y(1118),x=Y(7805),J=Y(8004),ie=Y(5210),te=Y(7818),le=Y(8069),X=Y(9739),z=X.constants.DEFAULT_SESSION_TIMEOUT_SEC,K=X.createBandwidthProfilePayload,se=X.defer,ve=X.difference,De=X.filterObject,pe=X.flatMap,Ee=X.oncePerTick,Ae=Y(8218),ge=Y(8380).createTwilioError,de=function(Ue){function Ye(Re,tt,Dt,zt,kt){var mt=this;tt.options=Object.assign({session_timeout:z},tt.options),kt=Object.assign({DominantSpeakerSignaling:ne,NetworkQualityMonitor:Q,NetworkQualitySignaling:U,RecordingSignaling:D,RemoteParticipantV2:N,TrackPrioritySignaling:J,TrackSwitchOffSignaling:ie,bandwidthProfile:null,sessionTimeout:1e3*tt.options.session_timeout,statsPublishIntervalMs:1e4},kt),Re.setBandwidthProfile(kt.bandwidthProfile),zt.setIceReconnectTimeout(kt.sessionTimeout);var zn=function(Lr){return mt._getTrackReceiver(Lr)},qn=(mt=Ue.call(this,Re,tt.sid,tt.name,kt)||this)._log;return Object.defineProperties(mt,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:kt.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:Re.bandwidthProfileRevision,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:Re.networkQualityConfiguration},_peerConnectionManager:{value:zt},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:kt.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new kt.DominantSpeakerSignaling(zn,{log:qn})},_networkQualitySignaling:{value:new kt.NetworkQualitySignaling(zn,Re.networkQualityConfiguration,{log:qn})},_renderHintsSignaling:{value:new te(zn,{log:qn})},_publisherHintsSignaling:{value:new le(zn,{log:qn})},_trackPrioritySignaling:{value:new kt.TrackPrioritySignaling(zn,{log:qn})},_trackSwitchOffSignaling:{value:new kt.TrackSwitchOffSignaling(zn,{log:qn})},_pendingSwitchOffStates:{value:new Map},_transport:{value:Dt},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:tt.options.media_region||null}}),mt._initTrackSwitchOffSignaling(),mt._initDominantSpeakerSignaling(),mt._initNetworkQualityMonitorSignaling(),mt._initPublisherHintSignaling(),function Ve(Ue,Ye){var Re=Ee(function(){Ue._publishNewLocalParticipantState()}),tt=Ee(function(){var Dt=pe(Ye.tracks,function(zt){return zt.trackTransceiver});Ue._peerConnectionManager.setTrackSenders(Dt)});Ye.on("trackAdded",tt),Ye.on("trackRemoved",tt),Ye.on("updated",Re),Ue.on("stateChanged",function Dt(zt){"disconnected"===zt&&(Ye.removeListener("trackAdded",tt),Ye.removeListener("trackRemoved",tt),Ye.removeListener("updated",Re),Ue.removeListener("stateChanged",Dt),Ye.disconnect())}),Ue.on("signalingConnectionStateChanged",function(){var Dt=Ue.localParticipant,kt=Dt.identity,mt=Dt.sid;switch(Ue.signalingConnectionState){case"connected":Dt.connect(mt,kt);break;case"reconnecting":Dt.reconnecting()}})}(mt,Re),function ze(Ue,Ye){Ye.on("description",function(tt){Ue._publishPeerConnectionState(tt)}),Ye.dequeue("description"),Ye.on("candidates",function(tt){Ue._publishPeerConnectionState(tt)}),Ye.dequeue("candidates"),Ye.on("trackAdded",Ue._addTrackReceiver.bind(Ue)),Ye.dequeue("trackAdded"),Ye.getTrackReceivers().forEach(Ue._addTrackReceiver,Ue),Ye.on("connectionStateChanged",function(){Ue.emit("connectionStateChanged")}),Ye.on("iceConnectionStateChanged",function(){Ue.emit("iceConnectionStateChanged"),"failed"===Ue.iceConnectionState&&(null!==Ue.localParticipant.networkQualityLevel&&Ue.localParticipant.setNetworkQualityLevel(0),Ue.participants.forEach(function(Re){null!==Re.networkQualityLevel&&Re.setNetworkQualityLevel(0)}))})}(mt,zt),function Ze(Ue,Ye){Ye.on("message",Ue._update.bind(Ue)),Ye.on("stateChanged",function Re(tt,Dt){"disconnected"===tt&&("disconnected"!==Ue.state&&Ue._disconnect(Dt),Ye.removeListener("stateChanged",Re)),Ue.emit("signalingConnectionStateChanged")})}(mt,Dt),function je(Ue,Ye,Re){var tt=new Map,Dt=!1,zt=setInterval(function(){Ue.getStats().then(function(kt){Dt=!Dt,kt.forEach(function(mt,zn){var qn=new x(zn,mt,!0);Ye.publishEvent("quality","stats-report","info",{audioTrackStats:qn.remoteAudioTrackStats.map(function(wr,Pn){return ht(wr,mt.remoteAudioTrackStats[Pn],tt)}),localAudioTrackStats:qn.localAudioTrackStats.map(function(wr,Pn){return Wt(wr,mt.localAudioTrackStats[Pn],tt)}),localVideoTrackStats:qn.localVideoTrackStats.map(function(wr,Pn){return Wt(wr,mt.localVideoTrackStats[Pn],tt)}),peerConnectionId:qn.peerConnectionId,videoTrackStats:qn.remoteVideoTrackStats.map(function(wr,Pn){return ht(wr,mt.remoteVideoTrackStats[Pn],tt)})});var Lr=pe(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(wr){return qn[wr].map(function(Pn){return Pn.trackSid+"+"+Pn.ssrc})});if(ve(Array.from(tt.keys()),Lr).forEach(function(wr){return tt.delete(wr)}),Dt){var Or=function qe(Ue,Ye){return(Ue=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:Ye,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},De(Ue||{},null))).localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},De(Ue.localCandidate||{},null)),Ue.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},De(Ue.remoteCandidate||{},null)),Ue}(mt.activeIceCandidatePair,qn.peerConnectionId);Ye.publishEvent("quality","active-ice-candidate-pair","info",Or)}})},function(){})},Re);Ue.on("stateChanged",function kt(mt){"disconnected"===mt&&(clearInterval(zt),Ue.removeListener("stateChanged",kt))})}(mt,Dt,kt.statsPublishIntervalMs),mt._update(tt),mt._peerConnectionManager.setEffectiveAdaptiveSimulcast(mt._publisherHintsSignaling.isSetup),mt}return L(Ye,Ue),Object.defineProperty(Ye.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(Ye.prototype,"signalingConnectionState",{get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(Ye.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),Ye.prototype._deleteTrackReceiverDeferred=function(Re){return this._trackReceiverDeferreds.delete(Re)},Ye.prototype._getOrCreateTrackReceiverDeferred=function(Re){var tt=this._trackReceiverDeferreds.get(Re)||se(),zt=this._peerConnectionManager.getTrackReceivers().find(function(kt){return kt.id===Re&&"ended"!==kt.readyState});return zt?tt.resolve(zt):this._trackReceiverDeferreds.set(Re,tt),tt},Ye.prototype._addTrackReceiver=function(Re){return this._getOrCreateTrackReceiverDeferred(Re.id).resolve(Re),this},Ye.prototype._disconnect=function(Re){var tt=Ue.prototype._disconnect.call(this,Re);return tt&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(Dt){Dt.publishFailed(Re||new Error("LocalParticipant disconnected"))}),tt},Ye.prototype._getTrackReceiver=function(Re){var tt=this;return this._getOrCreateTrackReceiverDeferred(Re).promise.then(function(Dt){return tt._deleteTrackReceiverDeferred(Re),Dt})},Ye.prototype._getInitialTrackSwitchOffState=function(Re){var tt=this._pendingSwitchOffStates.get(Re)||!1;return this._pendingSwitchOffStates.delete(Re),tt&&this._log.warn("["+Re+"] was initially switched off! "),tt},Ye.prototype._getTrackSidsToTrackSignalings=function(){var Re=pe(this.participants,function(tt){return Array.from(tt.tracks)});return new Map(Re)},Ye.prototype._getOrCreateRemoteParticipant=function(Re){var tt=this,Dt=this._RemoteParticipantV2,zt=this.participants.get(Re.sid),kt=this;return zt||((zt=new Dt(Re,function(mt){return tt._getInitialTrackSwitchOffState(mt)},function(mt,zn){return tt._trackPrioritySignaling.sendTrackPriorityUpdate(mt,"subscribe",zn)},function(mt,zn){return tt._renderHintsSignaling.setTrackHint(mt,zn)},function(mt){return tt._renderHintsSignaling.clearTrackHint(mt)})).on("stateChanged",function mt(zn){"disconnected"===zn&&(zt.removeListener("stateChanged",mt),kt.participants.delete(zt.sid),kt._disconnectedParticipantRevisions.set(zt.sid,zt.revision))}),this.connectParticipant(zt)),zt},Ye.prototype._getState=function(){return{participant:this.localParticipant.getState()}},Ye.prototype._maybeAddBandwidthProfile=function(Re){var tt=this.localParticipant,Dt=tt.bandwidthProfile,zt=tt.bandwidthProfileRevision;return Dt&&this._lastBandwidthProfileRevision<zt?(this._lastBandwidthProfileRevision=zt,Object.assign({bandwidth_profile:K(Dt)},Re)):Re},Ye.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},Ye.prototype._publishPeerConnectionState=function(Re){this._transport.publish(Object.assign({peer_connections:[Re]},this._getState()))},Ye.prototype._update=function(Re){var tt=this;if(Re.subscribed&&Re.subscribed.revision>this._subscribedRevision){this._subscribedRevision=Re.subscribed.revision,Re.subscribed.tracks.forEach(function(kt){kt.id?(tt._subscriptionFailures.delete(kt.sid),tt._subscribed.set(kt.sid,kt.id)):kt.error&&!tt._subscriptionFailures.has(kt.sid)&&tt._subscriptionFailures.set(kt.sid,kt.error)});var Dt=new Set(Re.subscribed.tracks.filter(function(kt){return!!kt.id}).map(function(kt){return kt.sid}));this._subscribed.forEach(function(kt,mt){Dt.has(mt)||tt._subscribed.delete(mt)})}var zt=new Set;return(Re.participants||[]).forEach(function(kt){if(kt.sid!==tt.localParticipant.sid){var mt=tt._disconnectedParticipantRevisions.get(kt.sid);if(!(mt&&kt.revision<=mt)){mt&&tt._disconnectedParticipantRevisions.delete(kt.sid);var zn=tt._getOrCreateRemoteParticipant(kt);zn.update(kt),zt.add(zn)}}}),"synced"===Re.type&&this.participants.forEach(function(kt){zt.has(kt)||kt.disconnect()}),function xt(Ue){var Ye=Ue._getTrackSidsToTrackSignalings();Ue._subscriptionFailures.forEach(function(Re,tt){var Dt=Ye.get(tt);Dt&&(Ue._subscriptionFailures.delete(tt),Dt.subscribeFailed(ge(Re.code,Re.message)))}),Ye.forEach(function(Re){var tt=Ue._subscribed.get(Re.sid);(!tt||Re.isSubscribed&&Re.trackTransceiver.id!==tt)&&Re.setTrackTransceiver(null),tt&&Ue._getTrackReceiver(tt).then(function(Dt){return Re.setTrackTransceiver(Dt)})})}(this),Re.peer_connections&&this._peerConnectionManager.update(Re.peer_connections,"synced"===Re.type),Re.recording&&this.recording.update(Re.recording),Re.published&&Re.published.revision>this._publishedRevision&&(this._publishedRevision=Re.published.revision,Re.published.tracks.forEach(function(kt){kt.sid&&tt._published.set(kt.id,kt.sid)}),this.localParticipant.update(Re.published)),Re.participant&&this.localParticipant.connect(Re.participant.sid,Re.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(kt){var mt=kt.channel;!kt.isSetup&&Re.media_signaling&&Re.media_signaling[mt]&&Re.media_signaling[mt].transport&&"data-channel"===Re.media_signaling[mt].transport.type&&kt.setup(Re.media_signaling[mt].transport.label)}),this},Ye.prototype._initPublisherHintSignaling=function(){var Re=this;this._publisherHintsSignaling.on("updated",function(Dt,zt){Promise.all(Dt.map(function(kt){return Re.localParticipant.setPublisherHint(kt.track,kt.encodings).then(function(mt){return{track:kt.track,result:mt}})})).then(function(kt){Re._publisherHintsSignaling.sendHintResponse({id:zt,hints:kt})})});var tt=function(Dt){"video"===Dt.kind&&Dt.trackTransceiver.on("replaced",function(){Re._publisherHintsSignaling.sendTrackReplaced({trackSid:Dt.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(Dt){return tt(Dt)}),this.localParticipant.on("trackAdded",function(Dt){return tt(Dt)})},Ye.prototype._initTrackSwitchOffSignaling=function(){var Re=this;this._trackSwitchOffSignaling.on("updated",function(tt,Dt){try{Re._log.debug("received trackSwitch: ",{tracksOn:Dt,tracksOff:tt});var zt=new Map;Dt.forEach(function(kt){return zt.set(kt,!0)}),tt.forEach(function(kt){zt.get(kt)&&Re._log.warn(kt+" is DUPLICATED in both tracksOff and tracksOn list"),zt.set(kt,!1)}),Re.participants.forEach(function(kt){kt.tracks.forEach(function(mt){var zn=zt.get(mt.sid);typeof zn<"u"&&(mt.setSwitchedOff(!zn),zt.delete(mt.sid))})}),zt.forEach(function(kt,mt){return Re._pendingSwitchOffStates.set(mt,!kt)})}catch(kt){Re._log.error("error processing track switch off:",kt)}})},Ye.prototype._initDominantSpeakerSignaling=function(){var Re=this;this._dominantSpeakerSignaling.on("updated",function(){return Re.setDominantSpeaker(Re._dominantSpeakerSignaling.loudestParticipantSid)})},Ye.prototype._initNetworkQualityMonitorSignaling=function(){var Re=this;this._networkQualitySignaling.on("ready",function(){var tt=new Re._NetworkQualityMonitor(Re._peerConnectionManager,Re._networkQualitySignaling);Re._networkQualityMonitor=tt,tt.on("updated",function(){"failed"!==Re.iceConnectionState&&(Re.localParticipant.setNetworkQualityLevel(tt.level,tt.levels),Re.participants.forEach(function(Dt){var zt=tt.remoteLevels.get(Dt.sid);zt&&Dt.setNetworkQualityLevel(zt.level,zt)}))}),tt.start()}),this._networkQualitySignaling.on("teardown",function(){return Re._teardownNetworkQualityMonitor()})},Ye.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},Ye.prototype.getStats=function(){var Re=this;return this._peerConnectionManager.getStats().then(function(tt){return new Map(Array.from(tt).map(function(Dt){var zt=W(Dt,2),mt=zt[1];return[zt[0],Object.assign({},mt,{localAudioTrackStats:Fe(Re,mt.localAudioTrackStats),localVideoTrackStats:Fe(Re,mt.localVideoTrackStats),remoteAudioTrackStats:xe(Re,mt.remoteAudioTrackStats),remoteVideoTrackStats:xe(Re,mt.remoteVideoTrackStats)})]}))})},Ye}(O);function we(Ue,Ye){return Ye.reduce(function(Re,tt){var Dt=Ue.get(tt.trackId);return Dt?[Object.assign({},tt,{trackSid:Dt})].concat(Re):Re},[])}function Fe(Ue,Ye){return we(Ue._published,Ye)}function xe(Ue,Ye){return we(new Map(Array.from(Ue._subscribed.entries()).map(function(tt){var Dt=W(tt,2);return[Dt[1],Dt[0]]})),Ye)}function Wt(Ue,Ye,Re){var tt=Ye.framesEncoded,Dt=Ye.packetsSent,zt=Ye.totalEncodeTime,kt=Ye.totalPacketSendDelay,mt=Object.assign({},Ue),zn=Ue.trackSid+"+"+Ue.ssrc,qn=Re.get(zn)||new Map;if("number"==typeof zt&&"number"==typeof tt){var Lr=qn.get("avgEncodeDelay")||new Ae;Lr.putSample(1e3*zt,tt),mt.avgEncodeDelay=Math.round(Lr.get()),qn.set("avgEncodeDelay",Lr)}if("number"==typeof kt&&"number"==typeof Dt){var jr=qn.get("avgPacketSendDelay")||new Ae;jr.putSample(1e3*kt,Dt),mt.avgPacketSendDelay=Math.round(jr.get()),qn.set("avgPacketSendDelay",jr)}return Re.set(zn,qn),mt}function ht(Ue,Ye,Re){var tt=Ye.estimatedPlayoutTimestamp,Dt=Ye.framesDecoded,zt=Ye.jitterBufferDelay,kt=Ye.jitterBufferEmittedCount,mt=Ye.totalDecodeTime,zn=Object.assign({},Ue),qn=Ue.trackSid+"+"+Ue.ssrc,Lr=Re.get(qn)||new Map;if("number"==typeof tt&&(zn.estimatedPlayoutTimestamp=tt),"number"==typeof Dt&&"number"==typeof mt){var jr=Lr.get("avgDecodeDelay")||new Ae;jr.putSample(1e3*mt,Dt),zn.avgDecodeDelay=Math.round(jr.get()),Lr.set("avgDecodeDelay",jr)}if("number"==typeof zt&&"number"==typeof kt){var Or=Lr.get("avgJitterBufferDelay")||new Ae;Or.putSample(1e3*zt,kt),zn.avgJitterBufferDelay=Math.round(Or.get()),Lr.set("avgJitterBufferDelay",Or)}return Re.set(qn,Lr),zn}Ie.exports=de},8004:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this,D,"track_priority",O)||this;return Object.defineProperties(N,{_enqueuedPriorityUpdates:{value:new Map}}),N.on("ready",function(x){Array.from(N._enqueuedPriorityUpdates.keys()).forEach(function(J){x.publish({type:"track_priority",track:J,subscribe:N._enqueuedPriorityUpdates.get(J)})})}),N}return L(U,Q),U.prototype.sendTrackPriorityUpdate=function(D,O,N){if("subscribe"!==O)throw new Error("only subscribe priorities are supported, found: "+O);this._enqueuedPriorityUpdates.set(D,N),this._transport&&this._transport.publish({type:"track_priority",track:D,subscribe:N})},U}(Y(4071));Ie.exports=ne},5210:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this,D,"track_switch_off",O)||this;return N.on("ready",function(x){x.on("message",function(J){"track_switch_off"===J.type&&N._setTrackSwitchOffUpdates(J.off||[],J.on||[])})}),N}return L(U,Q),U.prototype._setTrackSwitchOffUpdates=function(D,O){this.emit("updated",D,O)},U}(Y(4071));Ie.exports=ne},4892:function(Ie,Oe,Y){"use strict";var Ve,L=this&&this.__extends||(Ve=function(ze,Ze){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(je,xt){je.__proto__=xt}||function(je,xt){for(var Wt in xt)Object.prototype.hasOwnProperty.call(xt,Wt)&&(je[Wt]=xt[Wt])})(ze,Ze)},function(ze,Ze){if("function"!=typeof Ze&&null!==Ze)throw new TypeError("Class extends value "+String(Ze)+" is not a constructor or null");function je(){this.constructor=ze}Ve(ze,Ze),ze.prototype=null===Ze?Object.create(Ze):(je.prototype=Ze.prototype,new je)}),W=Y(8675),ne=Y(5330),Q=Y(2606),U=Y(8701).reconnectBackoffConfig,D=Y(6543),O=Y(8701),N=O.SDK_NAME,x=O.SDK_VERSION,J=O.SDP_FORMAT,ie=Y(9739),te=ie.createBandwidthProfilePayload,le=ie.createMediaSignalingPayload,X=ie.createSubscribePayload,z=ie.getUserAgent,K=ie.isNonArrayObject,se=Y(8380),ve=se.createTwilioError,De=se.RoomCompletedError,pe=se.SignalingConnectionError,Ee=se.SignalingServerBusyError,re={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},de=function(Ve){function ze(Ze,je,xt,Wt,ht,qe){var Ue;return qe=Object.assign({Backoff:Q,TwilioConnection:ne,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:z()},qe),Ue=Ve.call(this,"connecting",re)||this,Object.defineProperties(Ue,{_accessToken:{value:je},_automaticSubscription:{value:qe.automaticSubscription},_bandwidthProfile:{value:qe.bandwidthProfile},_dominantSpeaker:{value:qe.dominantSpeaker},_adaptiveSimulcast:{value:qe.adaptiveSimulcast},_eventObserver:{value:qe.eventObserver,writable:!1},_renderHints:{value:qe.renderHints},_iceServersStatus:{value:Array.isArray(qe.iceServers)?"overrode":"acquire"},_localParticipant:{value:xt},_name:{value:Ze},_networkQuality:{value:K(qe.networkQuality)||qe.networkQuality},_options:{value:qe},_peerConnectionManager:{value:Wt},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new qe.Backoff(U)},_session:{value:null,writable:!0},_trackPriority:{value:qe.trackPriority},_trackSwitchOff:{value:qe.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:qe.userAgent},_wsServer:{value:ht}}),function xe(Ve){function ze(){if("disconnected"!==Ve.state){Ve._twilioConnection&&Ve._twilioConnection.removeListener("message",je);var Ye=Ve._options,Dt=Ye.TwilioConnection,zt=new Dt(Ve._wsServer,Object.assign({helloBody:"connecting"===Ve.state&&"acquire"===Ve._iceServersStatus?Ve._createIceMessage():Ve._createConnectOrSyncOrDisconnectMessage()},Ye));zt.once("close",function(kt){kt===Dt.CloseReason.LOCAL?Ze():Ze(new Error(kt))}),zt.on("message",je),Ve._twilioConnection=zt}}function Ze(Ue){if("disconnected"!==Ve.state){if(!Ue)return void Ve.disconnect();var Ye=Ve._getReconnectTimer();if(!Ye){var Re=Ue.message===ne.CloseReason.BUSY?new Ee:new pe;return void Ve.disconnect(Re)}"connected"===Ve.state&&Ve.preempt("syncing"),Ye.then(ze)}}function je(Ue){if("disconnected"!==Ve.state){if("error"===Ue.type)return void Ve.disconnect(ve(Ue.code,Ue.message));switch(Ve.state){case"connected":switch(Ue.type){case"connected":case"synced":case"update":return void Ve.emit("message",Ue);case"disconnected":return void Ve.disconnect("completed"===Ue.status?new De:null);default:return}case"connecting":switch(Ue.type){case"iced":return void Ve._options.onIced(Ue.ice_servers).then(function(){Ve._sendConnectOrSyncOrDisconnectMessage()});case"connected":return Ve._setSession(Ue.session,Ue.options.session_timeout),Ve.emit("connected",Ue),void Ve.preempt("connected");case"synced":case"update":return void Ve._updatesReceived.push(Ue);case"disconnected":return void Ve.disconnect("completed"===Ue.status?new De:null);default:return}case"syncing":switch(Ue.type){case"connected":case"update":return void Ve._updatesReceived.push(Ue);case"synced":return Ve._clearReconnectTimer(),Ve.emit("message",Ue),void Ve.preempt("connected");case"disconnected":return void Ve.disconnect("completed"===Ue.status?new De:null);default:return}default:return}}}Ve.on("stateChanged",function Ue(Ye){switch(Ye){case"connected":var Re=Ve._updatesToSend.splice(0);return Re.length&&Ve.publish(function Fe(Ve){return Ve.reduce(function(ze,Ze){return(!ze.participant&&Ze.participant||ze.participant&&Ze.participant&&Ze.participant.revision>ze.participant.revision)&&(ze.participant=Ze.participant),!ze.peer_connections&&Ze.peer_connections?ze.peer_connections=we(Ze.peer_connections):ze.peer_connections&&Ze.peer_connections&&(ze.peer_connections=we(ze.peer_connections.concat(Ze.peer_connections))),ze},{})}(Re)),void Ve._updatesReceived.splice(0).forEach(function(tt){return Ve.emit("message",tt)});case"disconnected":return Ve._twilioConnection.removeListener("message",je),void Ve.removeListener("stateChanged",Ue);default:return}});var xt=Ve._options;"overrode"===Ve._iceServersStatus?(0,xt.onIced)(xt.iceServers).then(ze):ze()}(Ue),Ue}return L(ze,Ve),ze.prototype._createConnectOrSyncOrDisconnectMessage=function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var Ze={connecting:"connect",syncing:"sync"}[this.state],je={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:Ze,version:2};return"connect"===je.type?(je.ice_servers=this._iceServersStatus,je.publisher={name:N,sdk_version:x,user_agent:this._userAgent},this._bandwidthProfile&&(je.bandwidth_profile=te(this._bandwidthProfile)),je.media_signaling=le(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),je.subscribe=X(this._automaticSubscription),je.format=J,je.token=this._accessToken):"sync"===je.type?(je.session=this._session,je.token=this._accessToken):"update"===je.type&&(je.session=this._session),je},ze.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}},ze.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var Ze=this._createConnectOrSyncOrDisconnectMessage();Ze&&this._twilioConnection.sendMessage(Ze)},ze.prototype.disconnect=function(Ze){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[Ze]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0)},ze.prototype.publish=function(Ze){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},Ze)),!0;case"connecting":case"syncing":return this._updatesToSend.push(Ze),!0;default:return!1}},ze.prototype.publishEvent=function(Ze,je,xt,Wt){this._eventObserver.emit("event",{group:Ze,name:je,level:xt,payload:Wt})},ze.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)},ze.prototype._setSession=function(Ze,je){this._session=Ze,this._sessionTimeoutMS=1e3*je},ze.prototype._getReconnectTimer=function(){var Ze=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new D(function(){Ze._sessionTimer&&(Ze._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(je){Ze._reconnectBackoff.backoff(je)}))},ze.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},ze}(W);function we(Ve){return Array.from(Ve.reduce(function(ze,Ze){var je=ze.get(Ze.id)||Ze;return(!je.description&&Ze.description||je.description&&Ze.description&&Ze.description.revision>je.description.revision)&&(je.description=Ze.description),(!je.ice&&Ze.ice||je.ice&&Ze.ice&&Ze.ice.revision>je.ice.revision)&&(je.ice=Ze.ice),ze.set(je.id,je),ze},new Map).values())}Ie.exports=de},8675:function(Ie,Oe,Y){"use strict";var le,L=this&&this.__extends||(le=function(X,z){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,se){K.__proto__=se}||function(K,se){for(var ve in se)Object.prototype.hasOwnProperty.call(se,ve)&&(K[ve]=se[ve])})(X,z)},function(X,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function K(){this.constructor=X}le(X,z),X.prototype=null===z?Object.create(z):(K.prototype=z.prototype,new K)}),W=this&&this.__read||function(le,X){var z="function"==typeof Symbol&&le[Symbol.iterator];if(!z)return le;var se,De,K=z.call(le),ve=[];try{for(;(void 0===X||X-- >0)&&!(se=K.next()).done;)ve.push(se.value)}catch(pe){De={error:pe}}finally{try{se&&!se.done&&(z=K.return)&&z.call(K)}finally{if(De)throw De.error}}return ve},ne=this&&this.__spreadArray||function(le,X){for(var z=0,K=X.length,se=le.length;z<K;z++,se++)le[se]=X[z];return le},Q=Y(9069).EventEmitter,U=Y(9739),D=function(le){function X(z,K){var se=le.call(this)||this,ve=null,De=z;return K=function ie(le){var X=new Map;for(var z in le)X.set(z,new Set(le[z]));return X}(K),Object.defineProperties(se,{_lock:{get:function(){return ve},set:function(pe){ve=pe}},_reachableStates:{value:x(K)},_state:{get:function(){return De},set:function(pe){De=pe}},_states:{value:K},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==ve}},state:{enumerable:!0,get:function(){return De}}}),se.on("stateChanged",function(pe){se._whenDeferreds.forEach(function(Ee){Ee.when(pe,Ee.resolve,Ee.reject)})}),se}return L(X,le),X.prototype._whenPromise=function(z){var K=this;if("function"!=typeof z)return Promise.reject(new Error("when() executor must be a function"));var se=U.defer();return se.when=z,this._whenDeferreds.add(se),se.promise.then(function(ve){return K._whenDeferreds.delete(se),ve},function(ve){throw K._whenDeferreds.delete(se),ve})},X.prototype.bracket=function(z,K){var se,ve=this;function De(pe){if(ve.hasLock(se)&&ve.releaseLockCompletely(se),pe)throw pe}return this.takeLock(z).then(function(Ee){return K(se=Ee)}).then(function(Ee){return De(),Ee},De)},X.prototype.hasLock=function(z){return this._lock===z},X.prototype.preempt=function(z,K,se){if(!O(this._states,this.state,z))throw new Error('Cannot transition from "'+this.state+'" to "'+z+'"');var ve;this.isLocked&&(ve=this._lock,this._lock=null);var De=null;K&&(De=this.takeLockSync(K));var pe=De?null:this.takeLockSync("preemption");return this.transition(z,De||pe,se),ve&&ve.resolve(),pe&&this.releaseLock(pe),De},X.prototype.releaseLock=function(z){if(!this.isLocked)throw new Error("Could not release the lock for "+z.name+" because the StateMachine is not locked");if(!this.hasLock(z))throw new Error("Could not release the lock for "+z.name+" because "+this._lock.name+" has the lock");0===z.depth?(this._lock=null,z.resolve()):z.depth--},X.prototype.releaseLockCompletely=function(z){if(!this.isLocked)throw new Error("Could not release the lock for "+z.name+" because the StateMachine is not locked");if(!this.hasLock(z))throw new Error("Could not release the lock for "+z.name+" because "+this._lock.name+" has the lock");z.depth=0,this._lock=null,z.resolve()},X.prototype.takeLock=function(z){var K=this;if("object"==typeof z){var se=z;return new Promise(function(pe){pe(K.takeLockSync(se))})}var ve=z;if(this.isLocked){var De=this.takeLock.bind(this,ve);return this._lock.promise.then(De)}return Promise.resolve(this.takeLockSync(ve))},X.prototype.takeLockSync=function(z){var K="string"==typeof z?null:z,se=K?K.name:z;if(K&&!this.hasLock(K)||!K&&this.isLocked)throw new Error("Could not take the lock for "+se+" because the lock for "+this._lock.name+" was not released");if(K)return K.depth++,K;var ve=function N(le){var X=U.defer();return X.name=le,X.depth=0,X}(se);return this._lock=ve,ve},X.prototype.transition=function(z,K,se){if(se=se||[],this.isLocked){if(!K)throw new Error("You must provide the key in order to transition");if(!this.hasLock(K))throw new Error("Could not transition using the key for "+K.name+" because "+this._lock.name+" has the lock")}else if(K)throw new Error("Key provided for "+K.name+", but the StateMachine was not locked (possibly due to preemption)");if(!O(this._states,this.state,z))throw new Error('Cannot transition from "'+this.state+'" to "'+z+'"');this._state=z,this.emit.apply(this,ne([],W(["stateChanged",z].concat(se))))},X.prototype.tryTransition=function(z,K,se){try{this.transition(z,K,se)}catch{return!1}return!0},X.prototype.when=function(z){var K=this;return this.state===z?Promise.resolve(this):O(this._reachableStates,this.state,z)?this._whenPromise(function(se,ve,De){se===z?ve(K):O(K._reachableStates,se,z)||De(te(se,z))}):Promise.reject(te(this.state,z))},X}(Q);function O(le,X,z){return le.get(X).has(z)}function x(le){return Array.from(le.keys()).reduce(function(X,z){return X.set(z,J(le,z))},new Map)}function J(le,X,z){return z=z||new Set,le.get(X).forEach(function(K){z.has(K)||(z.add(K),J(le,K,z).forEach(z.add,z))}),z}function te(le,X){return new Error('"'+X+'" cannot be reached from "'+le+'"')}Ie.exports=D},7704:Ie=>{"use strict";Ie.exports=function Oe(Y){return(Y=Y.filter(function(L){return"number"==typeof L})).length<1?void 0:Y.reduce(function(L,W){return W+L})/Y.length}},4239:Ie=>{"use strict";var Oe=function(){function Y(L,W,ne,Q){Object.defineProperties(this,{availableSend:{enumerable:!0,value:ne},recv:{enumerable:!0,value:W},rtt:{enumerable:!0,value:Q},send:{enumerable:!0,value:L}})}return Y.of=function(L,W){var ne=(W.timestamp-L.timestamp)/1e3;return new Y(ne>0?(W.bytesSent-L.bytesSent)/ne*8:0,ne>0?(W.bytesReceived-L.bytesReceived)/ne*8:0,W.availableOutgoingBitrate,W.currentRoundTripTime)},Y}();Ie.exports=Oe},2483:(Ie,Oe,Y)=>{"use strict";var L=Y(4239),W=function(){function ne(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new L(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return ne.prototype.next=function(Q){var U=this.lastStats;if(this.lastStats=Q,U){var D=U.id===Q.id?L.of(U,Q):new L(0,0);this.lastReport=D}return this.lastReport},ne}();Ie.exports=W},6719:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O,N){var x=Q.call(this,D,O,N)||this;return Object.defineProperties(x,{audioLevel:{value:"number"==typeof O.audioInputLevel?O.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof O.jitter?O.jitter:null,enumerable:!0}}),x}return L(U,Q),U}(Y(3840));Ie.exports=ne},3840:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O,N){var x=Q.call(this,D,O)||this;return Object.defineProperties(x,{bytesSent:{value:"number"==typeof O.bytesSent?O.bytesSent:N?0:null,enumerable:!0},packetsSent:{value:"number"==typeof O.packetsSent?O.packetsSent:N?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof O.roundTripTime?O.roundTripTime:N?0:null,enumerable:!0}}),x}return L(U,Q),U}(Y(9078));Ie.exports=ne},1371:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O,N){var x=Q.call(this,D,O,N)||this,J=null;"number"==typeof O.frameWidthInput&&"number"==typeof O.frameHeightInput&&(J={},Object.defineProperties(J,{width:{value:O.frameWidthInput,enumerable:!0},height:{value:O.frameHeightInput,enumerable:!0}}));var ie=null;return"number"==typeof O.frameWidthSent&&"number"==typeof O.frameHeightSent&&(ie={},Object.defineProperties(ie,{width:{value:O.frameWidthSent,enumerable:!0},height:{value:O.frameHeightSent,enumerable:!0}})),Object.defineProperties(x,{captureDimensions:{value:J,enumerable:!0},dimensions:{value:ie,enumerable:!0},captureFrameRate:{value:"number"==typeof O.frameRateInput?O.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof O.frameRateSent?O.frameRateSent:null,enumerable:!0}}),x}return L(U,Q),U}(Y(3840));Ie.exports=ne},1908:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D){return Q.call(this,D)||this}return L(U,Q),U}(Y(4976));Ie.exports=ne},4661:Ie=>{"use strict";Ie.exports=function Y(L){var W=L.actual,Q=L.available,D=L.level;Object.defineProperties(this,{actual:{value:void 0===W?null:W,enumerable:!0},available:{value:void 0===Q?null:Q,enumerable:!0},level:{value:void 0===D?null:D,enumerable:!0}})}},2165:Ie=>{"use strict";Ie.exports=function Y(L){var W=L.fractionLost,Q=L.level;Object.defineProperties(this,{fractionLost:{value:void 0===W?null:W,enumerable:!0},level:{value:void 0===Q?null:Q,enumerable:!0}})}},2590:Ie=>{"use strict";Ie.exports=function Y(L){var W=L.jitter,Q=L.rtt,D=L.level;Object.defineProperties(this,{jitter:{value:void 0===W?null:W,enumerable:!0},rtt:{value:void 0===Q?null:Q,enumerable:!0},level:{value:void 0===D?null:D,enumerable:!0}})}},4976:(Ie,Oe,Y)=>{"use strict";var L=Y(220),W=Y(5206);Ie.exports=function Q(U){var N=U.sendStats,x=void 0===N?null:N,J=U.recvStats,ie=void 0===J?null:J;Object.defineProperties(this,{send:{value:U.send,enumerable:!0},recv:{value:U.recv,enumerable:!0},sendStats:{value:x?new L(x):null,enumerable:!0},recvStats:{value:ie?new W(ie):null,enumerable:!0}})}},5206:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D){return Q.call(this,D)||this}return L(U,Q),U}(Y(4236));Ie.exports=ne},4236:(Ie,Oe,Y)=>{"use strict";var L=Y(4661),W=Y(2165),ne=Y(2590);Ie.exports=function U(D){var O=D.bandwidth,N=void 0===O?null:O,x=D.fractionLost,J=void 0===x?null:x,ie=D.latency,te=void 0===ie?null:ie;Object.defineProperties(this,{bandwidth:{value:N?new L(N):null,enumerable:!0},fractionLost:{value:J?new W(J):null,enumerable:!0},latency:{value:te?new ne(te):null,enumerable:!0}})}},220:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D){return Q.call(this,D)||this}return L(U,Q),U}(Y(4236));Ie.exports=ne},669:(Ie,Oe,Y)=>{"use strict";var L=Y(1908),W=Y(2003);Ie.exports=function Q(U){var O=U.audio,N=U.video;Object.defineProperties(this,{level:{value:U.level,enumerable:!0},audio:{value:O?new L(O):null,enumerable:!0},video:{value:N?new W(N):null,enumerable:!0}})}},2003:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D){return Q.call(this,D)||this}return L(U,Q),U}(Y(4976));Ie.exports=ne},5055:(Ie,Oe,Y)=>{"use strict";var L=Y(8020),W=Y(775),ne=function(){function Q(U,D,O){Object.defineProperties(this,{ice:{enumerable:!0,value:U},audio:{enumerable:!0,value:D},video:{enumerable:!0,value:O}})}return Q.prototype.summarize=function(){var U=this.audio.send.concat(this.video.send),D=W.summarize(U),O=this.audio.recv.concat(this.video.recv),N=L.summarize(O);return{ice:this.ice,send:D,recv:N,audio:{send:W.summarize(this.audio.send),recv:L.summarize(this.audio.recv)},video:{send:W.summarize(this.video.send),recv:L.summarize(this.video.recv)}}},Q}();Ie.exports=ne},8753:function(Ie,Oe,Y){"use strict";var L=this&&this.__read||function(re,de){var we="function"==typeof Symbol&&re[Symbol.iterator];if(!we)return re;var xe,ze,Fe=we.call(re),Ve=[];try{for(;(void 0===de||de-- >0)&&!(xe=Fe.next()).done;)Ve.push(xe.value)}catch(Ze){ze={error:Ze}}finally{try{xe&&!xe.done&&(we=Fe.return)&&we.call(Fe)}finally{if(ze)throw ze.error}}return Ve},W=this&&this.__spreadArray||function(re,de){for(var we=0,Fe=de.length,xe=re.length;we<Fe;we++,xe++)re[xe]=de[we];return re},ne=this&&this.__values||function(re){var de="function"==typeof Symbol&&Symbol.iterator,we=de&&re[de],Fe=0;if(we)return we.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Fe>=re.length&&(re=void 0),{value:re&&re[Fe++],done:!re}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")},Q=Y(7627).guessBrowser,U=Y(2483),D=Y(5055),O=Y(1013),N=Y(1031),x=function(){function re(de){Object.defineProperties(this,{pc:{enumerable:!0,value:de},ice:{enumerable:!0,value:new U},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return re.prototype.next=function(){var de=this,we="firefox"===Q()?function Ae(re){var de=re.pc.getTransceivers().filter(function(Fe){return Fe.currentDirection&&Fe.currentDirection.match(/send/)&&Fe.sender.track}).map(function(Fe){return Fe.sender}),we=re.pc.getTransceivers().filter(function(Fe){return Fe.currentDirection&&Fe.currentDirection.match(/recv/)}).map(function(Fe){return Fe.receiver});return Promise.all([J(de),J(we),re.pc.getStats()]).then(function(Fe){var xe=L(Fe,3),Ve=xe[0],ze=xe[1],Ze=xe[2],je=te(re),xt=K(re);Ve.forEach(function(qe,Ue){return ve(re,qe,xt,Ue)}),pe(je,xt);var Wt=le(re),ht=se(re);ze.forEach(function(qe,Ue){return De(re,qe,ht,Ue)}),pe(Wt,ht),Ee(re.ice,Ze)})}(this):function ge(re){return re.pc.getStats().then(function(de){var we=te(re),Fe=K(re);ve(re,de,Fe),pe(we,Fe);var xe=le(re),Ve=se(re);De(re,de,Ve),pe(xe,Ve),Ee(re.ice,de)})}(this);return we.then(function(){var Fe=W([],L(de.audio.send.values())),xe=W([],L(de.video.send.values())),Ve=W([],L(de.audio.recv.values())),ze=W([],L(de.video.recv.values())),Ze=new D(de.ice.lastReport,{send:Fe.map(function(je){return je.lastReport}).filter(function(je){return je}),recv:Ve.map(function(je){return je.lastReport}).filter(function(je){return je})},{send:xe.map(function(je){return je.lastReport}).filter(function(je){return je}),recv:ze.map(function(je){return je.lastReport}).filter(function(je){return je})});return de.lastReport=Ze,Ze})},re}();function J(re){return Promise.all(re.map(function(de){var we=de.track.id;return de.getStats().then(function(Fe){var xe,Ve;try{for(var ze=ne(Fe.values()),Ze=ze.next();!Ze.done;Ze=ze.next()){var je=Ze.value;"inbound-rtp"===je.type&&(je.id=we+"-"+je.id)}}catch(xt){xe={error:xt}}finally{try{Ze&&!Ze.done&&(Ve=ze.return)&&Ve.call(ze)}finally{if(xe)throw xe.error}}return[we,Fe]})})).then(function(de){return new Map(de)})}function ie(re,de,we,Fe,xe){var Ve=de[Fe.mediaType];if(!xe){var ze=we.get(Fe.trackId);ze&&(xe=ze.trackIdentifier)}if(Ve&&xe){if(Ve.has(Fe.id))return Ve.get(Fe.id);var Ze=new re(xe,Fe);Ve.set(Fe.id,Ze)}return null}function te(re){return{audio:re.audio.send,video:re.video.send}}function le(re){return{audio:re.audio.recv,video:re.video.recv}}function X(re,de,we,Fe){return ie(N,te(re),de,we,Fe)}function z(re,de,we,Fe){return ie(O,le(re),de,we,Fe)}function K(re){return{audio:new Set(re.audio.send.keys()),video:new Set(re.video.send.keys())}}function se(re){return{audio:new Set(re.audio.recv.keys()),video:new Set(re.video.recv.keys())}}function ve(re,de,we,Fe){var xe,Ve;try{for(var ze=ne(de.values()),Ze=ze.next();!Ze.done;Ze=ze.next()){var je=Ze.value;if("outbound-rtp"===je.type&&!je.isRemote){if("firefox"!==Q()&&!je.trackId)continue;var xt=we[je.mediaType];xt&&xt.delete(je.id);var Wt=X(re,de,je,Fe);if(Wt){var ht=de.get(je.remoteId);Wt.next(Fe||Wt.trackId,je,ht)}}}}catch(qe){xe={error:qe}}finally{try{Ze&&!Ze.done&&(Ve=ze.return)&&Ve.call(ze)}finally{if(xe)throw xe.error}}}function De(re,de,we,Fe){var xe,Ve;try{for(var ze=ne(de.values()),Ze=ze.next();!Ze.done;Ze=ze.next()){var je=Ze.value;if("inbound-rtp"===je.type&&!je.isRemote){var xt=we[je.mediaType];xt&&xt.delete(je.id);var Wt=z(re,de,je,Fe);Wt&&Wt.next(Fe||Wt.trackId,je)}}}catch(ht){xe={error:ht}}finally{try{Ze&&!Ze.done&&(Ve=ze.return)&&Ve.call(ze)}finally{if(xe)throw xe.error}}}function pe(re,de){var we=function(xe){var Ve=re[xe];de[xe].forEach(function(Ze){return Ve.delete(Ze)})};for(var Fe in de)we(Fe)}function Ee(re,de){var we,Fe,xe,Ve,ze;try{for(var Ze=ne(de.values()),je=Ze.next();!je.done;je=Ze.next())"transport"===(xt=je.value).type&&(ze=de.get(xt.selectedCandidatePairId))}catch(qe){we={error:qe}}finally{try{je&&!je.done&&(Fe=Ze.return)&&Fe.call(Ze)}finally{if(we)throw we.error}}if(ze)re.next(ze);else try{for(var Wt=ne(de.values()),ht=Wt.next();!ht.done;ht=Wt.next()){var xt;"candidate-pair"===(xt=ht.value).type&&xt.nominated&&(!("selected"in xt)||xt.selected)&&re.next(xt)}}catch(qe){xe={error:qe}}finally{try{ht&&!ht.done&&(Ve=Wt.return)&&Ve.call(Wt)}finally{if(xe)throw xe.error}}}Ie.exports=x},8020:function(Ie,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,N){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,N)},function(O,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function x(){this.constructor=O}D(O,N),O.prototype=null===N?Object.create(N):(x.prototype=N.prototype,new x)}),W=Y(7704),ne=Y(7176),Q=Y(7483),U=function(D){function O(N,x,J,ie,te,le,X){var z=D.call(this,N,x,J)||this;return Object.defineProperties(z,{deltaPacketsLost:{enumerable:!0,value:ie},deltaPacketsReceived:{enumerable:!0,value:te},fractionLost:{enumerable:!0,value:le},jitter:{enumerable:!0,value:X},phonyFractionLost:{enumerable:!0,value:te>0?ie/te:0}}),z}return L(O,D),O.of=function(N,x,J){if(x.id!==J.id)throw new Error("RTCStats IDs must match");var ie=(J.timestamp-x.timestamp)/1e3,le=ie>0?(J.bytesReceived-x.bytesReceived)/ie*8:0,X=Math.max(J.packetsLost-x.packetsLost,0);return new O(x.id,N,le,X,J.packetsReceived-x.packetsReceived,J.fractionLost,J.jitter)},O.summarize=function(N){var x=N.map(function(le){return le.summarize()});return{bitrate:Q(x.map(function(le){return le.bitrate})),fractionLost:W(x.map(function(le){return le.fractionLost})),jitter:W(x.map(function(le){return le.jitter}))}},O.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},O}(ne);Ie.exports=U},1013:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(8020),Q=function(U){function D(O,N){var x=U.call(this,N.id,O,N)||this;return Object.defineProperties(x,{lastReport:{enumerable:!0,value:null,writable:!0}}),x}return L(D,U),D.prototype.next=function(O,N){var x=this.lastStats;this.lastStats=N,this.trackId=O;var J=W.of(O,x,N);return this.lastReport=J,J},D}(Y(6986));Ie.exports=Q},5180:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this,D,O)||this;return Object.defineProperties(N,{audioLevel:{value:"number"==typeof O.audioOutputLevel?O.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof O.jitter?O.jitter:null,enumerable:!0}}),N}return L(U,Q),U}(Y(2613));Ie.exports=ne},2613:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this,D,O)||this;return Object.defineProperties(N,{bytesReceived:{value:"number"==typeof O.bytesReceived?O.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof O.packetsReceived?O.packetsReceived:null,enumerable:!0}}),N}return L(U,Q),U}(Y(9078));Ie.exports=ne},993:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this,D,O)||this,x=null;return"number"==typeof O.frameWidthReceived&&"number"==typeof O.frameHeightReceived&&(x={},Object.defineProperties(x,{width:{value:O.frameWidthReceived,enumerable:!0},height:{value:O.frameHeightReceived,enumerable:!0}})),Object.defineProperties(N,{dimensions:{value:x,enumerable:!0},frameRate:{value:"number"==typeof O.frameRateReceived?O.frameRateReceived:null,enumerable:!0}}),N}return L(U,Q),U}(Y(2613));Ie.exports=ne},7176:Ie=>{"use strict";Ie.exports=function Y(L,W,ne){Object.defineProperties(this,{id:{enumerable:!0,value:L},trackId:{enumerable:!0,value:W},bitrate:{enumerable:!0,value:ne}})}},6986:Ie=>{"use strict";Ie.exports=function Y(L,W,ne){Object.defineProperties(this,{id:{enumerable:!0,value:L,writable:!0},trackId:{enumerable:!0,value:W,writable:!0},lastStats:{enumerable:!0,value:ne,writable:!0}})}},775:function(Ie,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,N){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,N)},function(O,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function x(){this.constructor=O}D(O,N),O.prototype=null===N?Object.create(N):(x.prototype=N.prototype,new x)}),W=Y(7704),ne=Y(7176),Q=Y(7483),U=function(D){function O(N,x,J,ie){var te=D.call(this,N,x,J)||this;return Object.defineProperties(te,{rtt:{enumerable:!0,value:ie}}),te}return L(O,D),O.of=function(N,x,J,ie){if(x.id!==J.id)throw new Error("RTCStats IDs must match");var te=(J.timestamp-x.timestamp)/1e3;return new O(x.id,N,te>0?(J.bytesSent-x.bytesSent)/te*8:0,ie&&"number"==typeof ie.roundTripTime?ie.roundTripTime/1e3:void 0)},O.summarize=function(N){return{bitrate:Q(N.map(function(ie){return ie.bitrate})),rtt:W(N.map(function(ie){return ie.rtt}))}},O}(ne);Ie.exports=U},1031:function(Ie,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,x){N.__proto__=x}||function(N,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(N[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)}),W=Y(6986),ne=Y(775),Q=function(U){function D(O,N){var x=U.call(this,N.id,O,N)||this;return Object.defineProperties(x,{lastReport:{enumerable:!0,value:null,writable:!0}}),x}return L(D,U),D.prototype.next=function(O,N,x){var J=this.lastStats;this.lastStats=N,this.trackId=O;var ie=ne.of(O,J,N,x);return this.lastReport=ie,ie},D}(W);Ie.exports=Q},7805:(Ie,Oe,Y)=>{"use strict";var L=Y(6719),W=Y(1371),ne=Y(5180),Q=Y(993);Ie.exports=function D(O,N,x){if("string"!=typeof O)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:O,enumerable:!0},localAudioTrackStats:{value:N.localAudioTrackStats.map(function(J){return new L(J.trackId,J,x)}),enumerable:!0},localVideoTrackStats:{value:N.localVideoTrackStats.map(function(J){return new W(J.trackId,J,x)}),enumerable:!0},remoteAudioTrackStats:{value:N.remoteAudioTrackStats.map(function(J){return new ne(J.trackId,J)}),enumerable:!0},remoteVideoTrackStats:{value:N.remoteVideoTrackStats.map(function(J){return new Q(J.trackId,J)}),enumerable:!0}})}},7483:Ie=>{"use strict";Ie.exports=function Oe(Y){return Y.reduce(function(L,W){return"number"==typeof W?W+L:L},0)}},9078:Ie=>{"use strict";Ie.exports=function Y(L,W){if("string"!=typeof L)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:L,enumerable:!0},trackSid:{value:W.trackSid,enumerable:!0},timestamp:{value:W.timestamp,enumerable:!0},ssrc:{value:W.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof W.packetsLost?W.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof W.codecName?W.codecName:null,enumerable:!0}})}},4605:function(Ie,Oe,Y){"use strict";var Q,L=this&&this.__extends||(Q=function(U,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var x in N)Object.prototype.hasOwnProperty.call(N,x)&&(O[x]=N[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}Q(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(Q){function U(D,O){var N=Q.call(this)||this;return Object.defineProperties(N,{id:{enumerable:!0,value:D},kind:{enumerable:!0,value:O}}),N}return L(U,Q),U.prototype.stop=function(){this.emit("stopped")},U}(Y(9069).EventEmitter);Ie.exports=ne},5330:function(Ie,Oe,Y){"use strict";var ht,L=this&&this.__extends||(ht=function(qe,Ue){return(ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ye,Re){Ye.__proto__=Re}||function(Ye,Re){for(var tt in Re)Object.prototype.hasOwnProperty.call(Re,tt)&&(Ye[tt]=Re[tt])})(qe,Ue)},function(qe,Ue){if("function"!=typeof Ue&&null!==Ue)throw new TypeError("Class extends value "+String(Ue)+" is not a constructor or null");function Ye(){this.constructor=qe}ht(qe,Ue),qe.prototype=null===Ue?Object.create(Ue):(Ye.prototype=Ue.prototype,new Ye)}),W=this&&this.__read||function(ht,qe){var Ue="function"==typeof Symbol&&ht[Symbol.iterator];if(!Ue)return ht;var Re,Dt,Ye=Ue.call(ht),tt=[];try{for(;(void 0===qe||qe-- >0)&&!(Re=Ye.next()).done;)tt.push(Re.value)}catch(zt){Dt={error:zt}}finally{try{Re&&!Re.done&&(Ue=Ye.return)&&Ue.call(Ye)}finally{if(Dt)throw Dt.error}}return tt},ne=this&&this.__spreadArray||function(ht,qe){for(var Ue=0,Ye=qe.length,Re=ht.length;Ue<Ye;Ue++,Re++)ht[Re]=qe[Ue];return ht},Q=Y(8675),U=Y(9739),D=U.buildLogLevels,O=U.makeUUID,N=Y(1458),x=Y(2643),J=Y(6543),ie=0,te={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},le={closed:"close",open:"open",waiting:"waiting"},ze=globalThis,Ze=ze.WebSocket?ze.WebSocket:Y(3332),je={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},xt=new Map([[3e3,je.TIMEOUT],[3001,je.TIMEOUT],[3002,je.FAILED],[3003,je.FAILED],[3004,je.TIMEOUT],[3006,je.BUSY],[3007,je.TIMEOUT]]),Wt=function(ht){function qe(Ue,Ye){var Re=ht.call(this,"early",te)||this;Ye=Object.assign({helloBody:null,maxConsecutiveFailedHellos:3,maxConsecutiveMissedHeartbeats:3,requestedHeartbeatTimeout:5e3,openTimeout:15e3,welcomeTimeout:5e3,Log:N,WebSocket:Ze},Ye);var tt=D(Ye.logLevel),Dt=new Ye.Log("default",Re,tt,Ye.loggerName),zt=Ye.networkMonitor?new x(function(){var mt=zt.type,zn="Network changed"+(mt?" to "+mt:"");Dt.debug(zn),Re._close({code:3004,reason:zn})}):null;Object.defineProperties(Re,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:Ye.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:Ye.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++ie},_log:{value:Dt},_messageQueue:{value:[]},_networkMonitor:{value:zt},_options:{value:Ye},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:Ue},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var kt={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return Re.on("stateChanged",function(mt){for(var zn=[],qn=1;qn<arguments.length;qn++)zn[qn-1]=arguments[qn];mt in le&&Re.emit.apply(Re,ne([le[mt]],W(zn)));var Lr={name:mt,group:"signaling",level:kt[Re.state]};if("closed"===mt){var jr=W(zn,1),Or=jr[0];Lr.payload={reason:Or},Lr.level=Or===je.LOCAL?"info":"error"}Re._eventObserver.emit("event",Lr)}),Re._eventObserver.emit("event",{name:Re.state,group:"signaling",level:kt[Re.state]}),Re._connect(),Re}return L(qe,ht),qe.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},qe.prototype._close=function(Ue){var Ye=Ue.code,Re=Ue.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&3005!==Ye&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var tt=this._log;1e3===Ye?(tt.debug("Closed"),this.transition("closed",null,[je.LOCAL])):(tt.warn("Closed: "+Ye+" - "+Re),3005!==Ye&&this.transition("closed",null,[xt.get(Ye)||je.REMOTE]));var Dt=this._ws.readyState,zt=this._options.WebSocket;Dt!==zt.CLOSING&&Dt!==zt.CLOSED&&this._ws.close(Ye,Re)}},qe.prototype._connect=function(){var Ue=this,Ye=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void Ye.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var Re=this._ws;Ye.debug("Created a new WebSocket:",Re),Re.addEventListener("close",function(Dt){return Ue._close(Dt)});var tt=this._options.openTimeout;this._openTimeout=new J(function(){Ue._close({code:3007,reason:"Failed to open in "+tt+" ms"})},tt),Re.addEventListener("open",function(){Ye.debug("WebSocket opened:",Re),Ue._openTimeout.clear(),Ue._startHandshake(),Ue._networkMonitor&&Ue._networkMonitor.start()}),Re.addEventListener("message",function(Dt){Ye.debug("Incoming: "+Dt.data);try{Dt=JSON.parse(Dt.data)}catch(zt){return void Ue.emit("error",zt)}switch(Dt.type){case"bad":Ue._handleBad(Dt);break;case"busy":Ue._handleBusy(Dt);break;case"bye":break;case"msg":Ue._handleMessage(Dt);case"heartbeat":Ue._handleHeartbeat();break;case"welcome":Ue._handleWelcome(Dt);break;default:Ue._log.debug("Unknown message type: "+Dt.type),Ue.emit("error",new Error("Unknown message type: "+Dt.type))}})},qe.prototype._handleBad=function(Ue){var Ye=Ue.reason,Re=this._log;if(["connecting","open"].includes(this.state))return"connecting"===this.state?(Re.warn("Closing: 3002 - "+Ye),void this._close({code:3002,reason:Ye})):(Re.debug("Error: "+Ye),void this.emit("error",new Error(Ye)));Re.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')},qe.prototype._handleBusy=function(Ue){var Ye=this,Re=Ue.cookie,tt=Ue.keepAlive,Dt=Ue.retryAfter,zt=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var kt=Dt<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+Dt+" ms";if(Dt<0)return zt.warn("Closing: 3006 - "+kt),void this._close({code:3006,reason:kt});this._hellosLeft=this._options.maxConsecutiveFailedHellos,this._cookie=Re||null,tt?(zt.warn(kt),this._busyWaitTimeout=new J(function(){return Ye._startHandshake()},Dt)):(zt.warn("Closing: 3005 - "+kt),this._close({code:3005,reason:kt}),this._busyWaitTimeout=new J(function(){return Ye._connect()},Dt)),this.transition("waiting",null,[tt,Dt])}else zt.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')},qe.prototype._handleHeartbeat=function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')},qe.prototype._handleHeartbeatTimeout=function(){if("open"===this.state){var Ue=this._log,Ye=this._options.maxConsecutiveMissedHeartbeats;Ue.debug("Consecutive heartbeats missed: "+Ye);var Re="Missed "+Ye+' "heartbeat" messages';Ue.warn("Closing: 3001 - "+Re),this._close({code:3001,reason:Re})}},qe.prototype._handleMessage=function(Ue){"open"===this.state?this.emit("message",Ue.body):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')},qe.prototype._handleWelcome=function(Ue){var Ye=this,Re=Ue.negotiatedTimeout,tt=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(tt.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var zt=Re*this._options.maxConsecutiveMissedHeartbeats,kt=Re-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new J(function(){return Ye._handleHeartbeatTimeout()},zt),this._messageQueue.splice(0).forEach(function(mt){return Ye._send(mt)}),this._sendHeartbeatTimeout=new J(function(){return Ye._sendHeartbeat()},kt),this.transition("open")}else tt.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')},qe.prototype._handleWelcomeTimeout=function(){if("connecting"===this.state){var Ue=this._log;if(this._hellosLeft<=0){var Ye="All handshake attempts failed";return Ue.warn("Closing: 3000 - "+Ye),void this._close({code:3e3,reason:Ye})}Ue.warn("Handshake attempt "+(this._options.maxConsecutiveFailedHellos-this._hellosLeft)+" failed"),this._startHandshake()}},qe.prototype._send=function(Ue){if(this._ws.readyState===this._options.WebSocket.OPEN){var tt=JSON.stringify(Ue);this._log.debug("Outgoing: "+tt);try{this._ws.send(tt),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var Dt="Failed to send message";this._log.warn("Closing: 3003 - "+Dt),this._close({code:3003,reason:Dt})}}},qe.prototype._sendHeartbeat=function(){"closed"!==this.state&&this._send({type:"heartbeat"})},qe.prototype._sendHello=function(){var Ue=this._options,Ye=Ue.helloBody,Re=Ue.requestedHeartbeatTimeout,tt={id:O(),timeout:Re,type:"hello",version:2};this._cookie&&(tt.cookie=this._cookie),Ye&&(tt.body=Ye),this._send(tt)},qe.prototype._sendOrEnqueue=function(Ue){var Ye=this;"closed"!==this.state&&("open"===this.state?function(tt){return Ye._send(tt)}:function(tt){return Ye._messageQueue.push(tt)})(Ue)},qe.prototype._startHandshake=function(){var Ue=this;["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state&&(this._hellosLeft--,this._sendHello(),this._welcomeTimeout=new J(function(){return Ue._handleWelcomeTimeout()},this._options.welcomeTimeout))},qe.prototype.close=function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))},qe.prototype.sendMessage=function(Ue){this._sendOrEnqueue({body:Ue,type:"msg"})},qe}(Q);Wt.CloseReason=je,Ie.exports=Wt},6412:(Ie,Oe,Y)=>{"use strict";var L=Y(9739).defer,W=function(){function ne(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return ne.prototype.put=function(Q){this._hasValue=!0,this._value=Q;var U=this._deferreds.shift();return U&&U.resolve(Q),this},ne.prototype.take=function(){var Q=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var U=L();return this._deferreds.push(U),U.promise.then(function(D){return Q._hasValue=!1,D})},ne}();Ie.exports=W},2606:Ie=>{var Oe=function(){function Y(L){Object.defineProperties(this,{_min:{value:L.min||100},_max:{value:L.max||1e4},_jitter:{value:L.jitter>0&&L.jitter<=1?L.jitter:0},_factor:{value:L.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var W=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var ne=Math.random(),Q=Math.floor(ne*this._jitter*W);W=0==(1&Math.floor(10*ne))?W-Q:W+Q}return 0|Math.min(W,this._max)}},_timeoutID:{value:null,writable:!0}})}return Y.prototype.backoff=function(L){var W=this,ne=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){W._attempts++,L()},ne)},Y.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},Y}();Ie.exports=Oe},3948:function(Ie){"use strict";var Oe=this&&this.__read||function(J,ie){var te="function"==typeof Symbol&&J[Symbol.iterator];if(!te)return J;var X,K,le=te.call(J),z=[];try{for(;(void 0===ie||ie-- >0)&&!(X=le.next()).done;)z.push(X.value)}catch(se){K={error:se}}finally{try{X&&!X.done&&(te=le.return)&&te.call(le)}finally{if(K)throw K.error}}return z};function W(){return navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}Ie.exports={isAndroid:function Y(){return/Android/.test(navigator.userAgent)},isIOS:function L(){return/iPad|iPhone|iPod/.test(navigator.userAgent)},isIpad:function ne(){return W()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))},isIphone:function Q(){return W()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))},isMobile:function U(){return/Mobi/.test(navigator.userAgent)},isNonChromiumEdge:function D(J){return"chrome"===J&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")},mobileWebKitBrowser:function N(J){return"safari"!==J?null:"brave"in navigator?"brave":["edge","edg"].find(function(ie){return navigator.userAgent.toLowerCase().includes(ie)})||null},rebrandedChromeBrowser:function O(J){if("chrome"!==J)return null;if("brave"in navigator)return"brave";var ie=function x(J){for(var ie=[],te=[],le=0;le<J.length;le++)if("("===J[le])ie.push(le);else if(")"===J[le]&&ie.length>0){var X=ie.pop();0===ie.length&&te.push(J.substring(X,le+1))}return te}(navigator.userAgent),le=ie.reduce(function(K,se){return K.replace(se,"")},navigator.userAgent).match(/[^\s]+/g)||[];return Oe(le.map(function(K){return K.split("/")[0].toLowerCase()})).slice(2).find(function(K){return!["chrome","mobile","safari"].includes(K)})||null}}},8126:function(Ie){"use strict";var Oe=this&&this.__read||function(W,ne){var Q="function"==typeof Symbol&&W[Symbol.iterator];if(!Q)return W;var D,N,U=Q.call(W),O=[];try{for(;(void 0===ne||ne-- >0)&&!(D=U.next()).done;)O.push(D.value)}catch(x){N={error:x}}finally{try{D&&!D.done&&(Q=U.return)&&Q.call(U)}finally{if(N)throw N.error}}return O},Y=this&&this.__spreadArray||function(W,ne){for(var Q=0,U=ne.length,D=W.length;Q<U;Q++,D++)W[D]=ne[Q];return W},L=function(){function W(ne,Q){var U=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:Q}}),Object.defineProperty(this,"_promise",{value:new Promise(function(D,O){ne(function(N){U._isCancelable=!1,D(N)},function(N){U._isCancelable=!1,O(N)},function(){return U._isCanceled})})})}return W.reject=function(ne){return new W(function(U,D){D(ne)},function(){})},W.resolve=function(ne){return new W(function(U){U(ne)},function(){})},W.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},W.prototype.catch=function(){var ne=[].slice.call(arguments),Q=this._promise;return new W(function(D,O){Q.catch.apply(Q,Y([],Oe(ne))).then(D,O)},this._onCancel)},W.prototype.then=function(){var ne=[].slice.call(arguments),Q=this._promise;return new W(function(D,O){Q.then.apply(Q,Y([],Oe(ne))).then(D,O)},this._onCancel)},W.prototype.finally=function(){var ne=[].slice.call(arguments),Q=this._promise;return new W(function(D,O){Q.finally.apply(Q,Y([],Oe(ne))).then(D,O)},this._onCancel)},W}();Ie.exports=L},8701:(Ie,Oe,Y)=>{"use strict";var L=Y(1730);Ie.exports.SDK_NAME=L.name+".js",Ie.exports.SDK_VERSION=L.version,Ie.exports.SDP_FORMAT="unified",Ie.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},Ie.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},Ie.exports.DEFAULT_ENVIRONMENT="prod",Ie.exports.DEFAULT_REALM="us1",Ie.exports.DEFAULT_REGION="gll",Ie.exports.DEFAULT_LOG_LEVEL="warn",Ie.exports.DEFAULT_LOGGER_NAME="twilio-video",Ie.exports.WS_SERVER=function(ne,Q){return Q="gll"===Q?"global":encodeURIComponent(Q),"prod"===ne?"wss://"+Q+".vss.twilio.com/signaling":"wss://"+Q+".vss."+ne+".twilio.com/signaling"},Ie.exports.PUBLISH_MAX_ATTEMPTS=5,Ie.exports.PUBLISH_BACKOFF_JITTER=10,Ie.exports.PUBLISH_BACKOFF_MS=20,Ie.exports.typeErrors={ILLEGAL_INVOKE:function(ne,Q){return new TypeError("Illegal call to "+ne+": "+Q)},INVALID_TYPE:function(ne,Q){return new TypeError(ne+" must be "+function W(ne){return["a","e","i","o","u"].includes(ne.toLowerCase()[0])?"an":"a"}(Q)+" "+Q)},INVALID_VALUE:function(ne,Q){return new RangeError(ne+" must be one of "+Q.join(", "))},REQUIRED_ARGUMENT:function(ne){return new TypeError(ne+" must be specified")}},Ie.exports.DEFAULT_FRAME_RATE=24,Ie.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,Ie.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,Ie.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,Ie.exports.DEFAULT_NQ_LEVEL_LOCAL=1,Ie.exports.DEFAULT_NQ_LEVEL_REMOTE=0,Ie.exports.MAX_NQ_LEVEL=3,Ie.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,Ie.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,Ie.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:1e3*Ie.exports.DEFAULT_SESSION_TIMEOUT_SEC,jitter:1},Ie.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},Ie.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},Ie.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},Ie.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},Ie.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},Ie.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}},9059:(Ie,Oe,Y)=>{"use strict";var L=Y(4687);Ie.exports=function Q(U){var D=Y(7708),O={},N=D.getOrCreate(O),x=3;return function J(){return x--,L(N,U.srcObject,250).then(function(ie){return!!ie&&(!(x>0)||J())}).catch(function(){return!0})}().finally(function(){D.release(O)})}},1741:Ie=>{"use strict";var Oe=null;Ie.exports=function U(D){return Oe=Oe||document.createElement("canvas"),new Promise(function(O){var N=3;setTimeout(function x(){return N--,function Q(D){try{var O=Oe.getContext("2d");O.drawImage(D,0,0,50,50);var x=O.getImageData(0,0,50,50).data.filter(function(ie,te){return(te+1)%4});return 0===Math.max.apply(Math,x)}catch(ie){return console.log("Error checking silence: ",ie),!1}}(D)?N>0?setTimeout(x,250):O(!0):O(!1)},250)})}},2181:Ie=>{"use strict";var Oe=function(){function Y(L){var W=this;void 0===L&&(L=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){W._emitVisible("visible"===document.visibilityState)}}});for(var ne=0;ne<L;ne++)this._listeners.push([])}return Y.prototype.clear=function(){for(var L=this._listeners.length,W=0;W<L;W++)this._listeners[W]=[]},Y.prototype._listenerCount=function(){return this._listeners.reduce(function(L,W){return L+W.length},0)},Y.prototype._emitVisible=function(L){for(var W=this,ne=Promise.resolve(),Q=function(D){ne=ne.then(function(){return W._emitVisiblePhase(D,L)})},U=1;U<=this._listeners.length;U++)Q(U);return ne},Y.prototype._emitVisiblePhase=function(L,W){return Promise.all(this._listeners[L-1].map(function(Q){var U=Q(W);return U instanceof Promise?U:Promise.resolve(U)}))},Y.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},Y.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},Y.prototype.onVisibilityChange=function(L,W){if("number"!=typeof L||L<=0||L>this._listeners.length)throw new Error("invalid phase: ",L);return this._listeners[L-1].push(W),1===this._listenerCount()&&this._start(),this},Y.prototype.offVisibilityChange=function(L,W){if("number"!=typeof L||L<=0||L>this._listeners.length)throw new Error("invalid phase: ",L);var ne=this._listeners[L-1],Q=ne.indexOf(W);return-1!==Q&&(ne.splice(Q,1),0===this._listenerCount()&&this._stop()),this},Y}();Ie.exports=new Oe(2)},8606:function(Ie,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,N){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,N)},function(O,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function x(){this.constructor=O}D(O,N),O.prototype=null===N?Object.create(N):(x.prototype=N.prototype,new x)}),W=Y(9069).EventEmitter,ne=["signaling","room","media","quality","video-processor","preflight"],Q=["debug","error","info","warning"],U=function(D){function O(N,x,J,ie){void 0===ie&&(ie=null);var te=D.call(this)||this;return te.on("event",function(le){var X=le.name,z=le.group,K=le.level,se=le.payload;if("string"!=typeof X)throw J.error("Unexpected name: ",X),new Error("Unexpected name: ",X);if(!ne.includes(z))throw J.error("Unexpected group: ",z),new Error("Unexpected group: ",z);if(!Q.includes(K))throw J.error("Unexpected level: ",K),new Error("Unexpected level: ",K);var ve=Date.now(),De=ve-x,pe=Object.assign({elapsedTime:De,level:K},se||{});N.publish(z,X,pe);var Ee=Object.assign({elapsedTime:De,group:z,level:K,name:X,timestamp:ve},se?{payload:se}:{});J[{debug:"debug",error:"error",info:"info",warning:"warn"}[K]]("event",Ee),ie&&"signaling"===z&&ie.emit("event",Ee)}),te}return L(O,D),O}(W);Ie.exports=U},3826:Ie=>{"use strict";var Oe=function(){function Y(L){L=Object.assign({getKey:function(ne){return ne},getValue:function(ne){return ne},isLessThanOrEqualTo:function(ne,Q){return ne<=Q}},L),Object.defineProperties(this,{_getKey:{value:L.getKey},_getValue:{value:L.getValue},_isLessThanOrEqualTo:{value:L.isLessThanOrEqualTo},_map:{value:new Map}})}return Y.prototype.toMap=function(){return new Map(this._map)},Y.prototype.updateAndFilter=function(L){return L.filter(this.update,this)},Y.prototype.update=function(L){var W=this._getKey(L),ne=this._getValue(L);return!(this._map.has(W)&&this._isLessThanOrEqualTo(ne,this._map.get(W))||(this._map.set(W,ne),0))},Y}();Ie.exports=Oe},9739:function(Ie,Oe,Y){"use strict";var At,L=this&&this.__extends||(At=function(Ht,$t){return(At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xe,Me){Xe.__proto__=Me}||function(Xe,Me){for(var st in Me)Object.prototype.hasOwnProperty.call(Me,st)&&(Xe[st]=Me[st])})(Ht,$t)},function(Ht,$t){if("function"!=typeof $t&&null!==$t)throw new TypeError("Class extends value "+String($t)+" is not a constructor or null");function Xe(){this.constructor=Ht}At(Ht,$t),Ht.prototype=null===$t?Object.create($t):(Xe.prototype=$t.prototype,new Xe)}),W=this&&this.__read||function(At,Ht){var $t="function"==typeof Symbol&&At[Symbol.iterator];if(!$t)return At;var Me,kn,Xe=$t.call(At),st=[];try{for(;(void 0===Ht||Ht-- >0)&&!(Me=Xe.next()).done;)st.push(Me.value)}catch(dn){kn={error:dn}}finally{try{Me&&!Me.done&&($t=Xe.return)&&$t.call(Xe)}finally{if(kn)throw kn.error}}return st},ne=this&&this.__spreadArray||function(At,Ht){for(var $t=0,Xe=Ht.length,Me=At.length;$t<Xe;$t++,Me++)At[Me]=Ht[$t];return At},Q=Y(8701),U=Q.typeErrors,D=Q.trackPriority,O=Y(7627),N=Y(8066).sessionSID;function K(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function ge(At,Ht,$t,Xe){if(!(Xe in Ht)&&!Xe.match(/^on[a-z]+$/)){var Me;try{Me=typeof At[Xe]}catch{}"function"===Me&&(Ht[Xe]=function(){for(var st,kn=[],dn=0;dn<arguments.length;dn++)kn[dn]=arguments[dn];return(st=this[$t])[Xe].apply(st,ne([],W(kn)))})}}function we(At){return"object"==typeof At&&!Array.isArray(At)}function xt(At){Object.getOwnPropertyNames(At).forEach(function(Ht){Ht.startsWith("_")&&ht(At,Ht)})}function ht(At,Ht){var $t=Object.getOwnPropertyDescriptor(At,Ht);$t.enumerable=!1,Object.defineProperty(At,Ht,$t)}function qe(At,Ht){void 0===Ht&&(Ht=[]),Ht.forEach(function($t){At.hasOwnProperty($t)&&ht(At,$t)})}function Ue(At){return At.map(Dt)}function Dt(At){return Array.isArray(At)?Ue(At):At instanceof Set?function Ye(At){return Ue(ne([],W(At)))}(At):At instanceof Map?function Re(At){return ne([],W(At.entries())).reduce(function(Ht,$t){var Xe,Me=W($t,2);return Object.assign(((Xe={})[Me[0]]=Dt(Me[1]),Xe),Ht)},{})}(At):At&&"object"==typeof At?function tt(At){return Object.entries(At).reduce(function(Ht,$t){var Xe,Me=W($t,2);return Object.assign(((Xe={})[Me[0]]=Dt(Me[1]),Xe),Ht)},{})}(At):At}function mt(At){return jr(At,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:Lr},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function qn(At){return jr(At,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function Lr(At){return jr(At,[{prop:D.PRIORITY_HIGH,type:"object",transform:qn},{prop:D.PRIORITY_LOW,type:"object",transform:qn},{prop:D.PRIORITY_STANDARD,type:"object",transform:qn}])}function jr(At,Ht){return Ht.reduce(function($t,Xe){var Me,st=Xe.prop,dn=Xe.payloadProp,Zo=Xe.transform;return typeof At[st]===Xe.type?Object.assign(((Me={})[void 0===dn?st:dn]=(void 0===Zo?function(fo){return fo}:Zo)(At[st]),Me),$t):$t},{})}Oe.constants=Q,Oe.createBandwidthProfilePayload=function kt(At){return jr(At,[{prop:"video",type:"object",transform:mt}])},Oe.createMediaSignalingPayload=function zn(At,Ht,$t,Xe,Me,st){var kn={transports:[{type:"data-channel"}]};return Object.assign(At?{active_speaker:kn}:{},Ht?{network_quality:kn}:{},st?{render_hints:kn}:{},Me?{publisher_hints:kn}:{},$t?{track_priority:kn}:{},Xe?{track_switch_off:kn}:{})},Oe.createRoomConnectEventPayload=function zt(At){function Ht(Me){return Me?"true":"false"}var $t={sessionSID:N,iceServers:(At.iceServers||[]).length,audioTracks:(At.tracks||[]).filter(function(Me){return"audio"===Me.kind}).length,videoTracks:(At.tracks||[]).filter(function(Me){return"video"===Me.kind}).length,dataTracks:(At.tracks||[]).filter(function(Me){return"data"===Me.kind}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(Me){var st=W(Me,2),kn=st[0],dn=st[1];$t[dn=dn||kn]=Ht(!!At[kn])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(Me){var st=W(Me,2),kn=st[0],dn=st[1];dn=dn||kn,"number"==typeof At[kn]?$t[dn]=At[kn]:isNaN(Number(At[kn]))||($t[dn]=Number(At[kn]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(Me){var st=W(Me,2),kn=st[0],dn=st[1];dn=dn||kn,"string"==typeof At[kn]?$t[dn]=At[kn]:"number"==typeof At[kn]&&"name"===kn&&($t[dn]=At[kn].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(Me){Me in At&&($t[Me]=JSON.stringify(At[Me]))}),"networkQuality"in At&&($t.networkQualityConfiguration={},we(At.networkQuality)?["local","remote"].forEach(function(Me){"number"==typeof At.networkQuality[Me]&&($t.networkQualityConfiguration[Me]=At.networkQuality[Me])}):($t.networkQualityConfiguration.remote=0,$t.networkQualityConfiguration.local=At.networkQuality?1:0)),At.bandwidthProfile&&At.bandwidthProfile.video){var Xe=At.bandwidthProfile.video||{};$t.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(Me){"number"==typeof Xe[Me]||"string"==typeof Xe[Me]?$t.bandwidthProfileOptions[Me]=Xe[Me]:"boolean"==typeof Xe[Me]?$t.bandwidthProfileOptions[Me]=Ht(Xe[Me]):"object"==typeof Xe[Me]&&($t.bandwidthProfileOptions[Me]=JSON.stringify(Xe[Me]))})}return{group:"room",name:"connect",level:"info",payload:$t}},Oe.createSubscribePayload=function Or(At){return{rules:[{type:At?"include":"exclude",all:!0}],revision:1}},Oe.asLocalTrack=function x(At,Ht){if(At instanceof Ht.LocalAudioTrack||At instanceof Ht.LocalVideoTrack||At instanceof Ht.LocalDataTrack)return At;if(At instanceof Ht.MediaStreamTrack)return"audio"===At.kind?new Ht.LocalAudioTrack(At,Ht):new Ht.LocalVideoTrack(At,Ht);throw U.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},Oe.asLocalTrackPublication=function J(At,Ht,$t,Xe){return new(0,{audio:Xe.LocalAudioTrackPublication,video:Xe.LocalVideoTrackPublication,data:Xe.LocalDataTrackPublication}[At.kind])(Ht,At,$t,Xe)},Oe.capitalize=function ie(At){return At[0].toUpperCase()+At.slice(1)},Oe.deprecateEvents=function te(At,Ht,$t,Xe){var Me=new Set;Ht.on("newListener",function st(kn){$t.has(kn)&&!Me.has(kn)&&(Xe.deprecated(At+"#"+kn+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+($t.get(kn)?" Use "+At+"#"+$t.get(kn)+" instead.":"")),Me.add(kn)),Me.size>=$t.size&&Ht.removeListener("newListener",st)})},Oe.difference=function le(At,Ht){At=Array.isArray(At)?new Set(At):new Set(At.values()),Ht=Array.isArray(Ht)?new Set(Ht):new Set(Ht.values());var $t=new Set;return At.forEach(function(Xe){Ht.has(Xe)||$t.add(Xe)}),$t},Oe.filterObject=function X(At,Ht){return Object.keys(At).reduce(function($t,Xe){return At[Xe]!==Ht&&($t[Xe]=At[Xe]),$t},{})},Oe.flatMap=function z(At,Ht){var $t=At instanceof Map||At instanceof Set?Array.from(At.values()):At;return Ht=Ht||function(Me){return Me},$t.reduce(function(Xe,Me){var st=Ht(Me);return Xe.concat(st)},[])},Oe.getPlatform=function se(){var At=K(),$t=W(At.match(/\(([^)]+)\)/)||[],2)[1];return W((void 0===$t?"unknown":$t).split(";").map(function(kn){return kn.trim()}),1)[0].toLowerCase()},Oe.getUserAgent=K,Oe.hidePrivateProperties=xt,Oe.hidePrivateAndCertainPublicPropertiesInClass=function Wt(At,Ht){return function($t){function Xe(){for(var Me=[],st=0;st<arguments.length;st++)Me[st]=arguments[st];var kn=$t.apply(this,ne([],W(Me)))||this;return xt(kn),qe(kn,Ht),kn}return L(Xe,$t),Xe}(At)},Oe.isDeepEqual=function de(At,Ht){if(At===Ht)return!0;if(typeof At!=typeof Ht)return!1;if(null===At)return null===Ht;if(null===Ht)return!1;if(Array.isArray(At))return Array.isArray(Ht)&&At.length===Ht.length&&At.every(function(Me,st){return de(Me,Ht[st])});if("object"==typeof At){var $t=Object.keys(At).sort(),Xe=Object.keys(Ht).sort();return!Array.isArray(Ht)&&de($t,Xe)&&$t.every(function(Me){return de(At[Me],Ht[Me])})}return!1},Oe.isNonArrayObject=we,Oe.inRange=function Pn(At,Ht,$t){return Ht<=At&&At<=$t},Oe.makeUUID=function ve(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(At){var Ht=16*Math.random()|0;return("x"===At?Ht:3&Ht|8).toString(16)})},Oe.oncePerTick=function De(At){var Ht=null;function $t(){Ht=null,At()}return function(){Ht&&clearTimeout(Ht),Ht=setTimeout($t)}},Oe.promiseFromEvents=function pe(At,Ht,$t,Xe){return new Promise(function(Me,st){function kn(){var Xi=[].slice.call(arguments);Xe&&Ht.removeListener(Xe,dn),Me.apply(void 0,ne([],W(Xi)))}function dn(){var Xi=[].slice.call(arguments);Ht.removeListener($t,kn),st.apply(void 0,ne([],W(Xi)))}Ht.once($t,kn),Xe&&Ht.once(Xe,dn),At()})},Oe.getOrNull=function Ee(At,Ht){return Ht.split(".").reduce(function($t,Xe){return $t?$t[Xe]:null},At)},Oe.defer=function Ae(){var At={};return At.promise=new Promise(function(Ht,$t){At.resolve=Ht,At.reject=$t}),At},Oe.delegateMethods=function re(At,Ht,$t){for(var Xe in At)ge(At,Ht,$t,Xe)},Oe.proxyProperties=function Fe(At,Ht,$t){Object.getOwnPropertyNames(At).forEach(function(Xe){!function xe(At,Ht,$t,Xe){if(!(Xe in Ht)){if(Xe.match(/^on[a-z]+$/))return Object.defineProperty(Ht,Xe,{value:null,writable:!0}),void $t.addEventListener(Xe.slice(2),function(){for(var Me=[],st=0;st<arguments.length;st++)Me[st]=arguments[st];Ht.dispatchEvent.apply(Ht,ne([],W(Me)))});Object.defineProperty(Ht,Xe,{enumerable:!0,get:function(){return $t[Xe]}})}}(0,Ht,$t,Xe)})},Oe.legacyPromise=function Ve(At,Ht,$t){return Ht?At.then(function(Xe){Ht(Xe)},function(Xe){$t(Xe)}):At},Oe.buildLogLevels=function ze(At){return"string"==typeof At?{default:At,media:At,signaling:At,webrtc:At}:At},Oe.trackClass=function Ze(At,Ht){return(Ht=Ht?"Local":"")+(At.kind||"").replace(/\w{1}/,function($t){return $t.toUpperCase()})+"Track"},Oe.trackPublicationClass=function je(At,Ht){return(Ht=Ht?"Local":"")+(At.kind||"").replace(/\w{1}/,function($t){return $t.toUpperCase()})+"TrackPublication"},Oe.valueToJSON=Dt,Oe.withJitter=function wr(At,Ht){var $t=Math.random();return At-Ht+Math.floor(2*Ht*$t+.5)},Oe.isChromeScreenShareTrack=function Si(At){return"chrome"===O.guessBrowser()&&"video"===At.kind&&"displaySurface"in At.getSettings()},Oe.isUserMediaTrack=function ki(At){return"string"==typeof At.getSettings().deviceId},Oe.waitForSometime=function ho(At){return void 0===At&&(At=10),new Promise(function(Ht){return setTimeout(Ht,At)})},Oe.waitForEvent=function po(At,Ht){return new Promise(function($t){At.addEventListener(Ht,function Xe(Me){At.removeEventListener(Ht,Xe),$t(Me)})})}},3744:function(Ie,Oe,Y){"use strict";var pe,L=this&&this.__extends||(pe=function(Ee,Ae){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,re){ge.__proto__=re}||function(ge,re){for(var de in re)Object.prototype.hasOwnProperty.call(re,de)&&(ge[de]=re[de])})(Ee,Ae)},function(Ee,Ae){if("function"!=typeof Ae&&null!==Ae)throw new TypeError("Class extends value "+String(Ae)+" is not a constructor or null");function ge(){this.constructor=Ee}pe(Ee,Ae),Ee.prototype=null===Ae?Object.create(Ae):(ge.prototype=Ae.prototype,new ge)}),W=this&&this.__assign||function(){return W=Object.assign||function(pe){for(var Ee,Ae=1,ge=arguments.length;Ae<ge;Ae++)for(var re in Ee=arguments[Ae])Object.prototype.hasOwnProperty.call(Ee,re)&&(pe[re]=Ee[re]);return pe},W.apply(this,arguments)},ne=Y(9069).EventEmitter,Q=Y(9739).getUserAgent,N=globalThis,x=N.WebSocket?N.WebSocket:Y(3332),J=Y(8701),ie=J.hardwareDevicePublisheriPad,te=J.hardwareDevicePublisheriPhone,le=Y(9739),X=Y(3948),z=function(pe){function Ee(Ae,ge,re,de,we,Fe){var xe=pe.call(this)||this;return Fe=Object.assign({gateway:se(de,we)+"/v1/VideoEvents",maxReconnectAttempts:5,reconnectIntervalMs:50,userAgent:Q(),WebSocket:x},Fe),Object.defineProperties(xe,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:le.defer()},_reconnectAttemptsLeft:{value:Fe.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:Fe.WebSocket}}),xe._readyToConnect.promise.then(function(Ve){var ze=Ve.roomSid,Ze=Ve.participantSid,je=xe;xe.on("disconnected",function xt(Wt){if(je._session=null,Wt&&je._reconnectAttemptsLeft>0)return je.emit("reconnecting"),void function De(pe,Ee,Ae,ge,re,de,we){var Fe=Date.now()-pe._connectTimestamp,xe=we.reconnectIntervalMs-Fe;xe>0?setTimeout(function(){K(pe,Ee,Ae,ge,re,de,we)},xe):K(pe,Ee,Ae,ge,re,de,we)}(je,Ae,ge,re,ze,Ze,Fe);je.removeListener("disconnected",xt)}),K(xe,Ae,ge,re,ze,Ze,Fe)}).catch(function(){}),xe}return L(Ee,pe),Ee.prototype.connect=function(Ae,ge){this._readyToConnect.resolve({roomSid:Ae,participantSid:ge})},Ee.prototype._publish=function(Ae){Ae.session=this._session,this._ws.send(JSON.stringify(Ae))},Ee.prototype.disconnect=function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},Ee.prototype.publish=function(Ae,ge,re){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:Ae,name:ge,payload:re,timestamp:Date.now(),type:"event",version:1}),!0)},Ee}(ne);function K(pe,Ee,Ae,ge,re,de,we){pe._connectTimestamp=Date.now(),pe._reconnectAttemptsLeft--,pe._ws=new we.WebSocket(we.gateway);var Fe=pe._ws;Fe.addEventListener("close",function(xe){1e3!==xe.code?pe.emit("disconnected",new Error("WebSocket Error "+xe.code+": "+xe.reason)):pe.emit("disconnected")}),Fe.addEventListener("message",function(xe){!function ve(pe,Ee,Ae){switch(Ee.type){case"connected":pe._session=Ee.session,pe._reconnectAttemptsLeft=Ae.maxReconnectAttempts,pe._eventQueue.splice(0).forEach(pe._publish,pe),pe.emit("connected");break;case"error":pe._ws.close(),pe.emit("disconnected",new Error(Ee.message))}}(pe,JSON.parse(xe.data),we)}),Fe.addEventListener("open",function(){var xe={type:"connect",token:Ee,version:1};xe.publisher={name:Ae,sdkVersion:ge,userAgent:we.userAgent,participantSid:de,roomSid:re},X.isIpad()?xe.publisher=W(W({},xe.publisher),ie):X.isIphone()&&(xe.publisher=W(W({},xe.publisher),te)),Fe.send(JSON.stringify(xe))})}function se(pe,Ee){return"prod"===pe?"wss://sdkgw."+Ee+".twilio.com":"wss://sdkgw."+pe+"-"+Ee+".twilio.com"}Ie.exports=z},4920:Ie=>{"use strict";var Oe=function(){function Y(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return Y.prototype.connect=function(){},Y.prototype.disconnect=function(){return!!this._connected&&(this._connected=!1,!0)},Y.prototype.publish=function(){return this._connected},Y}();Ie.exports=Oe},6396:(Ie,Oe,Y)=>{"use strict";var L=Y(9739).defer,W=function(){function ne(){Object.defineProperties(this,{_audio:{value:L(),writable:!0},_video:{value:L(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return ne.prototype.resolveDeferred=function(Q){"audio"===Q?this._audio.resolve():this._video.resolve()},ne.prototype.startDeferred=function(Q){"audio"===Q?this._audio=L():this._video=L()},ne.prototype.whenResolved=function(Q){return"audio"===Q?this._audio.promise:this._video.promise},ne}();Ie.exports=new W},1458:function(Ie,Oe,Y){"use strict";var N,L=this&&this.__read||function(K,se){var ve="function"==typeof Symbol&&K[Symbol.iterator];if(!ve)return K;var pe,Ae,De=ve.call(K),Ee=[];try{for(;(void 0===se||se-- >0)&&!(pe=De.next()).done;)Ee.push(pe.value)}catch(ge){Ae={error:ge}}finally{try{pe&&!pe.done&&(ve=De.return)&&ve.call(De)}finally{if(Ae)throw Ae.error}}return Ee},W=this&&this.__spreadArray||function(K,se){for(var ve=0,De=se.length,pe=K.length;ve<De;ve++,pe++)K[pe]=se[ve];return K},ne=Y(7846).getLogger,Q=Y(8701),U=Q.DEFAULT_LOG_LEVEL,D=Q.DEFAULT_LOGGER_NAME,O=Y(8701).typeErrors,J=function(){function K(se,ve,De,pe,Ee){if("string"!=typeof se)throw O.INVALID_TYPE("moduleName","string");if(!ve)throw O.REQUIRED_ARGUMENT("component");"object"!=typeof De&&(De={}),Ee=Ee||ne,z(De),Object.defineProperties(this,{_component:{value:ve},_logLevels:{value:De},_warnings:{value:new Set},_loggerName:{get:function(){var ge=pe&&"string"==typeof pe?pe:D;return this._logLevelsEqual||(ge=ge+"-"+se),ge}},_logger:{get:function(){var ge=Ee(this._loggerName),re=this._logLevels[se]||U;return ge.setDefaultLevel(re="off"===re?"silent":re),ge}},_logLevelsEqual:{get:function(){return 1===new Set(Object.values(this._logLevels)).size}},logLevel:{get:function(){return K.getLevelByName(De[se]||U)}},name:{get:ve.toString.bind(ve)}})}return K.getLevelByName=function(se){return isNaN(se)?(X(se=se.toUpperCase()),K[se]):parseInt(se,10)},K.prototype.createLog=function(se,ve){var De=this._loggerName;return this._logLevelsEqual||(De=De.substring(0,De.lastIndexOf("-"))),new K(se,ve,this._logLevels,De)},K.prototype.setLevels=function(se){return z(se),Object.assign(this._logLevels,se),this},K.prototype.log=function(se,ve){var De=K._levels[se];if(!De)throw O.INVALID_VALUE("logLevel",te);De=De.toLowerCase();var pe=[(new Date).toISOString(),De,this.name];return(this._logger[De]||function(){}).apply(void 0,W([],L(pe.concat(ve)))),this},K.prototype.debug=function(){return this.log(K.DEBUG,[].slice.call(arguments))},K.prototype.deprecated=function(se){var ve=function x(K){if((N=N||new Map).has(K))return N.get(K);var se=new Set;return N.set(K,se),se}(this._component.constructor);return ve.has(se)?this:(ve.add(se),this.warn(se))},K.prototype.info=function(){return this.log(K.INFO,[].slice.call(arguments))},K.prototype.warn=function(){return this.log(K.WARN,[].slice.call(arguments))},K.prototype.warnOnce=function(se){return this._warnings.has(se)?this:(this._warnings.add(se),this.warn(se))},K.prototype.error=function(){return this.log(K.ERROR,[].slice.call(arguments))},K.prototype.throw=function(se,ve){throw se.clone&&(se=se.clone(ve)),this.log(K.ERROR,se),se},K}();Object.defineProperties(J,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var ie={},te=[],le=J._levels.map(function(K,se){return ie[K]=!0,te.push(se),K});function X(K){if(!(K in ie))throw O.INVALID_VALUE("level",le)}function z(K){Object.keys(K).forEach(function(se){X(K[se].toUpperCase())})}Ie.exports=J},8218:Ie=>{"use strict";var Oe=function(){function Y(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return Y.prototype.get=function(){var L=this._samples;return(L[1].numerator-L[0].numerator)/(L[1].denominator-L[0].denominator||1/0)},Y.prototype.putSample=function(L,W){var ne=this._samples;ne.shift(),ne.push({denominator:W,numerator:L})},Y}();Ie.exports=Oe},2643:Ie=>{"use strict";var Oe=function(){function Y(L,W){var ne=this,Q=(W=Object.assign({navigator,window},W)).navigator,U=Q.connection||{type:null},D=U.type,O=U.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var ie=D!==ne.type&&ne.isOnline;D=ne.type,ie&&L()}},_target:{value:U}}:{_events:{value:["online"]},_listener:{value:L},_target:{value:W.window}};Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof Q.onLine||Q.onLine}},type:{enumerable:!0,get:function(){return U.type||null}},_listener:O._listener,_events:O._events,_target:O._target})}return Y.prototype.start=function(){var L=this;this._events.forEach(function(W){L._target.addEventListener(W,L._listener)})},Y.prototype.stop=function(){var L=this;this._events.forEach(function(W){L._target.removeEventListener(W,L._listener)})},Y}();Ie.exports=Oe},5318:function(Ie){"use strict";var ne,Oe=this&&this.__extends||(ne=function(Q,U){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var N in O)Object.prototype.hasOwnProperty.call(O,N)&&(D[N]=O[N])})(Q,U)},function(Q,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function D(){this.constructor=Q}ne(Q,U),Q.prototype=null===U?Object.create(U):(D.prototype=U.prototype,new D)}),Y=function(){function ne(Q){Object.defineProperties(this,{_callback:{value:Q}})}return ne.prototype.observe=function(){},ne.prototype.unobserve=function(){},ne.prototype.makeVisible=function(Q){var U=this._makeFakeEntry(Q,!0);this._callback([U])},ne.prototype.makeInvisible=function(Q){var U=this._makeFakeEntry(Q,!1);this._callback([U])},ne.prototype._makeFakeEntry=function(Q,U){return{target:Q,isIntersecting:U}},ne}(),L=function(ne){function Q(){return null!==ne&&ne.apply(this,arguments)||this}return Oe(Q,ne),Q}(Y),W=function(ne){function Q(){return null!==ne&&ne.apply(this,arguments)||this}return Oe(Q,ne),Q.prototype.resize=function(U){var D=this._makeFakeEntry(U,!0);this._callback([D])},Q}(Y);Ie.exports={NullIntersectionObserver:L,NullResizeObserver:W,NullObserver:Y}},3898:function(Ie,Oe,Y){"use strict";var L=this&&this.__read||function(xe,Ve){var ze="function"==typeof Symbol&&xe[Symbol.iterator];if(!ze)return xe;var je,Wt,Ze=ze.call(xe),xt=[];try{for(;(void 0===Ve||Ve-- >0)&&!(je=Ze.next()).done;)xt.push(je.value)}catch(ht){Wt={error:ht}}finally{try{je&&!je.done&&(ze=Ze.return)&&ze.call(Ze)}finally{if(Wt)throw Wt.error}}return xt},W=Y(9739),ne=W.difference,Q=W.flatMap,U=Y(570),D={0:"PCMU",8:"PCMA"};function O(xe){return Array.from(x(xe)).reduce(function(Ve,ze){var Ze=ze[0],je=ze[1],xt=Ve.get(je)||[];return Ve.set(je,xt.concat(Ze))},new Map)}function N(xe){return te(xe).reduce(function(Ve,ze){var Ze=ie(ze);return Ze?Ve.set(Ze,ze):Ve},new Map)}function x(xe){return le(xe).reduce(function(Ve,ze){var Ze=new RegExp("a=rtpmap:"+ze+" ([^/]+)"),je=xe.match(Ze),xt=je?je[1].toLowerCase():D[ze]?D[ze].toLowerCase():"";return Ve.set(ze,xt)},new Map)}function J(xe,Ve){var ze=new RegExp("^a=fmtp:"+xe+" (.+)$","m"),Ze=Ve.match(ze);return Ze&&Ze[1].split(";").reduce(function(je,xt){var Wt=L(xt.split("="),2),qe=Wt[1];return je[Wt[0]]=isNaN(qe)?qe:parseInt(qe,10),je},{})}function ie(xe){var Ve=xe.match(/^a=mid:(.+)$/m);return Ve&&Ve[1]}function te(xe,Ve,ze){return xe.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(Ze){return"m="+Ze}).filter(function(Ze){var je=new RegExp("m="+(Ve||".*"),"gm"),xt=new RegExp("a="+(ze||".*"),"gm");return je.test(Ze)&&xt.test(Ze)})}function le(xe){var ze=xe.split("\r\n")[0].match(/([0-9]+)/g);return ze?ze.slice(1).map(function(Ze){return parseInt(Ze,10)}):[]}function z(xe,Ve){var ze=Ve.split("\r\n"),Ze=ze[0],je=ze.slice(1);return[Ze=Ze.replace(/([0-9]+\s?)+$/,xe.join(" "))].concat(je).join("\r\n")}function ge(xe,Ve){var ze=te(xe);return[xe.split("\r\nm=")[0]].concat(ze.map(function(je){if(!/^m=(audio|video)/.test(je))return je;var xt=ie(je);if(!xt)return je;var Wt=Ve.get(xt);if(!Wt)return je;var ht=(je.match(/^a=msid:(.+)$/m)||[])[1];if(!ht)return je;var qe=L(ht.split(" "),2),Ue=qe[0],Ye=qe[1],Re=new RegExp("msid:"+Ue+(Ye?" "+Ye:"")+"$","gm");return je.replace(Re,"msid:"+Ue+" "+Wt)})).join("\r\n")}function we(xe,Ve){return"a=fmtp:"+xe+" "+Object.entries(Ve).map(function(Ze){var je=L(Ze,2);return je[0]+"="+je[1]}).join(";")}Oe.addOrRewriteNewTrackIds=function Ae(xe,Ve,ze){var Ze=Array.from(ze).reduce(function(je,xt){var Wt=L(xt,2),qe=Wt[1];return te(xe,Wt[0],"send(only|recv)").map(ie).filter(function(Re){return!Ve.has(Re)}).forEach(function(Re,tt){return je.set(Re,qe[tt])}),je},new Map);return ge(xe,Ze)},Oe.addOrRewriteTrackIds=ge,Oe.createCodecMapForMediaSection=O,Oe.createPtToCodecName=x,Oe.disableRtx=function de(xe){var Ve=te(xe);return[xe.split("\r\nm=")[0]].concat(Ve.map(function(Ze){if(!/^m=video/.test(Ze))return Ze;var xt=O(Ze).get("rtx");if(!xt)return Ze;var Wt=new Set(le(Ze));xt.forEach(function(Ye){return Wt.delete(Ye)});var ht=Ze.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),qe=ht&&ht[1],Ue=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(qe?[new RegExp("^a=ssrc:"+qe+" .+$")]:[]);return Ze=Ze.split("\r\n").filter(function(Ye){return Ue.every(function(Re){return!Re.test(Ye)})}).join("\r\n"),z(Array.from(Wt),Ze)})).join("\r\n")},Oe.enableDtxForOpus=function Fe(xe,Ve){var ze=te(xe),Ze=xe.split("\r\nm=")[0];return Ve=Ve||ze.filter(function(je){return/^m=audio/.test(je)}).map(ie),[Ze].concat(ze.map(function(je){if(!/^m=audio/.test(je))return je;var Wt=O(je).get("opus");if(!Wt)return je;var ht=J(Wt,je);if(!ht)return je;var qe=we(Wt,ht),Ue=new RegExp(qe),Ye=ie(je);Ve.includes(Ye)?ht.usedtx=1:delete ht.usedtx;var Re=we(Wt,ht);return je.replace(Ue,Re)})).join("\r\n")},Oe.filterLocalCodecs=function pe(xe,Ve){var ze=te(xe),Ze=xe.split("\r\nm=")[0],je=N(Ve);return[Ze].concat(ze.map(function(xt){return function De(xe,Ve,ze){if(!/^m=(audio|video)/.test(xe))return xe;var Ze=ie(xe),je=Ze&&Ve.get(Ze);if(!je)return xe;var xt=x(je),Wt=O(xe),ht=Q(Array.from(xt),function(Re){var tt=L(Re,2),Dt=tt[0],zt=tt[1];return"rtx"===zt||ze.includes(zt)?[]:function ve(xe,Ve,ze,Ze,je){var xt=ze.get(xe)||[];if(xt.length<=1)return xt;var Wt=J(Ve,je);if(!Wt)return xt;var ht=xt.find(function(qe){var Ue=J(qe,Ze);return Ue&&Object.keys(Wt).every(function(Ye){return Wt[Ye]===Ue[Ye]})});return"number"==typeof ht?[ht]:xt}(zt,Dt,Wt,xe,je)}),qe=Wt.get("rtx")||[];ht=ht.concat(qe.filter(function(Re){var tt=J(Re,xe);return tt&&ht.includes(tt.apt)}));var Ue=xe.split("\r\n").filter(function(Re){var tt=Re.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),Dt=tt&&tt[2];return!tt||Dt&&ht.includes(parseInt(Dt,10))});return z(le(xe).filter(function(Re){return ht.includes(Re)}),Ue.join("\r\n"))}(xt,je,[])})).join("\r\n")},Oe.getMediaSections=te,Oe.removeSSRCAttributes=function re(xe,Ve){return xe.split("\r\n").filter(function(ze){return!Ve.find(function(Ze){return new RegExp("a=ssrc:.*"+Ze+":","g").test(ze)})}).join("\r\n")},Oe.revertSimulcast=function Ee(xe,Ve,ze,Ze){void 0===Ze&&(Ze=!1);var je=N(ze),xt=N(Ve),Wt=te(xe);return[xe.split("\r\nm=")[0]].concat(Wt.map(function(qe){if(qe=qe.replace(/\r\n$/,""),!/^m=video/.test(qe))return qe;var Ue=qe.match(/^a=mid:(.+)$/m),Ye=Ue&&Ue[1];if(!Ye)return qe;var Re=je.get(Ye),tt=x(Re),Dt=le(Re),zt=Dt.length&&"vp8"===tt.get(Dt[0]);return Ze||!zt?xt.get(Ye).replace(/\r\n$/,""):qe})).concat("").join("\r\n")},Oe.setCodecPreferences=function K(xe,Ve,ze){var Ze=te(xe);return[xe.split("\r\nm=")[0]].concat(Ze.map(function(xt){if(!/^m=(audio|video)/.test(xt))return xt;var Wt=xt.match(/^m=(audio|video)/)[1],ht=O(xt),Ue=function X(xe,Ve){Ve=Ve.map(function(xt){return xt.codec.toLowerCase()});var ze=Q(Ve,function(xt){return xe.get(xt)||[]}),Ze=ne(Array.from(xe.keys()),Ve),je=Q(Ze,function(xt){return xe.get(xt)});return ze.concat(je)}(ht,"audio"===Wt?Ve:ze),Ye=z(Ue,xt),Re=ht.get("pcma")||[],tt=ht.get("pcmu")||[];return("audio"===Wt?new Set(Re.concat(tt)):new Set).has(Ue[0])?Ye.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):Ye})).join("\r\n")},Oe.setSimulcast=function se(xe,Ve){var ze=te(xe);return[xe.split("\r\nm=")[0]].concat(ze.map(function(je){if(je=je.replace(/\r\n$/,""),!/^m=video/.test(je))return je;var xt=O(je),Wt=le(je),ht=new Set(xt.get("vp8")||[]);return Wt.some(function(Ue){return ht.has(Ue)})?U(je,Ve):je})).concat("").join("\r\n")}},3073:(Ie,Oe,Y)=>{"use strict";var L=Y(1647).RTCSessionDescription,W=Y(3898),ne=W.createPtToCodecName,Q=W.getMediaSections;function O(z){var K=ne(z);z=function N(z,K){return Array.from(K.keys()).reduce(function(se,ve){var De=new RegExp("^a=rtpmap:"+ve+" rtx.+$","gm");return(se.match(De)||[]).slice("rtx"===K.get(ve)?1:0).reduce(function(pe,Ee){var Ae=new RegExp("\r\n"+Ee),ge=new RegExp("\r\na=fmtp:"+ve+" apt=[0-9]+");return pe.replace(Ae,"").replace(ge,"")},se)},z)}(z,K);var se=function x(z){var K=new Map;return z.forEach(function(se,ve){var De=K.get(se)||new Set;return K.set(se,De.add(ve))}),K}(K),ve=se.get("rtx")||new Set,De=new Set,pe=function J(z,K,se,ve){return Array.from(se).reduce(function(De,pe){var Ee=new RegExp("a=fmtp:"+pe+" apt=(\\d+)"),Ae=z.match(Ee);if(!Ae)return ve.add(pe),De;var ge=Number.parseInt(Ae[1]);return K.has(ge)?"rtx"===K.get(ge)?(ve.add(pe),De):De.set(pe,ge):(ve.add(pe),De)},new Map)}(z,K,ve,De),Ee=function ie(z,K){var se=Array.from(z).reduce(function(ve,De){var pe=De[0],Ee=De[1],Ae=ve.get(Ee)||new Set;return ve.set(Ee,Ae.add(pe))},new Map);return Array.from(se).reduce(function(ve,De){var pe=De[0],Ee=Array.from(De[1]);return Ee.length>1?(Ee.forEach(function(Ae){K.add(Ae)}),ve):ve.set(pe,Ee[0])},new Map)}(pe,De),Ae=Array.from(De);return["h264","vp8","vp9"].reduce(function(de,we){var Fe=se.get(we)||new Set;return Array.from(Fe).reduce(function(xe,Ve){return Ee.has(Ve)?xe:xe.add(Ve)},de)},new Set).forEach(function(de){if(Ae.length){var we=Ae.shift();z=function X(z,K,se){return z.endsWith("\r\n")?z+"a=fmtp:"+K+" apt="+se+"\r\n":z+"\r\na=fmtp:"+K+" apt="+se}(z=te(z,we),we,de)}}),Ae.forEach(function(de){z=function le(z,K){var se=new RegExp("a=rtpmap:"+K+".*\r\n","gm");return z.replace(se,"")}(z=te(z,de),de)}),z}function te(z,K){var se=new RegExp("a=fmtp:"+K+".*\r\n","gm");return z.replace(se,"")}Ie.exports=function U(z){var K={type:z.type};return"rollback"!==z.type&&(K.sdp=function D(z){var K=Q(z);return[z.split("\r\nm=")[0]].concat(K.map(O)).join("\r\n")}(z.sdp)),new L(K)}},570:function(Ie,Oe,Y){"use strict";var L=this&&this.__read||function(X,z){var K="function"==typeof Symbol&&X[Symbol.iterator];if(!K)return X;var ve,pe,se=K.call(X),De=[];try{for(;(void 0===z||z-- >0)&&!(ve=se.next()).done;)De.push(ve.value)}catch(Ee){pe={error:Ee}}finally{try{ve&&!ve.done&&(K=se.return)&&K.call(se)}finally{if(pe)throw pe.error}}return De},W=Y(9739),ne=W.difference,Q=W.flatMap;function U(){return String(Math.floor(4294967295*Math.random()))}var D=function(){function X(z,K,se){Object.defineProperties(this,{cName:{enumerable:!0,value:se},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:K},trackId:{enumerable:!0,value:z}})}return X.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var z=[U(),U()];z.forEach(function(K){this.primarySSRCs.add(K)},this),this.rtxPairs.size&&z.forEach(function(K){this.rtxPairs.set(U(),K)},this)}},X.prototype.addSSRC=function(z,K,se){K?this.rtxPairs.set(z,K):this.primarySSRCs.add(z),this.isSimulcastEnabled=this.isSimulcastEnabled||se},X.prototype.toSdpLines=function(z){var K=this,se=z?[]:Array.from(this.rtxPairs.entries()).map(function(ge){return ge.reverse()}),ve=Array.from(this.primarySSRCs.values()),De=se.length?Q(se):ve,pe=Q(De,function(ge){return["a=ssrc:"+ge+" cname:"+K.cName,"a=ssrc:"+ge+" msid:"+K.streamId+" "+K.trackId]}),Ee=se.map(function(ge){return"a=ssrc-group:FID "+ge.join(" ")}),Ae=["a=ssrc-group:SIM "+ve.join(" ")];return Ee.concat(pe).concat(Ae)},X}();function O(X,z){return(X.match(new RegExp(z,"gm"))||[]).map(function(se){return(se.match(new RegExp(z))||[]).slice(1)})}Ie.exports=function le(X,z){var K=function te(X){var z=function N(X){return new Set(Q(O(X,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}(X),K=function J(X){return new Map(O(X,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map(function(K){return K.reverse()}))}(X),se=function ie(X){var z=L(Q(O(X,"^a=msid:(.+) (.+)$")),2),K=z[0],se=z[1];return Q(O(X,"^a=ssrc:(.+) cname:.+$")).map(function(De){return[De,K,se]})}(X);return se.reduce(function(ve,De){var pe=De[0],Ee=De[1],Ae=De[2],ge=ve.get(Ae)||new D(Ae,Ee,function x(X,z,K){return X.match(new RegExp("a=ssrc:"+z+" "+K+":(.+)"))[1]}(X,pe,"cname")),re=K.get(pe)||null;return ge.addSSRC(pe,re,z.has(pe)),ve.set(Ae,ge)},new Map)}(X),se=Array.from(K.keys()),ve=Array.from(z.keys()),De=ne(se,ve),pe=ne(ve,se);Q(De,function(xe){return K.get(xe)}).forEach(function(xe){xe.addSimulcastSSRCs(),z.set(xe.trackId,xe)}),ve=Array.from(z.keys());var Ae=ne(ve,pe),ge=Q(Ae,function(xe){return z.get(xe)}),re=!X.match(/a=rtpmap:[0-9]+ rtx/),de=Q(ge,function(xe){return xe.toSdpLines(re)}),we=Q(new Set(X.split("\r\n").concat(de))),Fe="a=x-google-flag:conference";return X.match(Fe)||we.push(Fe),we.join("\r\n")}},1057:(Ie,Oe,Y)=>{"use strict";var L=Y(3898).getMediaSections,W=function(){function ne(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return ne.prototype.match=function(Q){return this._midsToTrackIds.get(Q.transceiver.mid)||null},ne.prototype.update=function(Q){var U=L(Q,"(audio|video)");this._midsToTrackIds=U.reduce(function(D,O){var N=O.match(/^a=mid:(.+)$/m)||[],x=O.match(/^a=msid:.+ (.+)$/m)||[],J=N[1],ie=x[1];return J&&ie?D.set(J,ie):D},this._midsToTrackIds)},ne}();Ie.exports=W},8066:(Ie,Oe)=>{var Y="1234567890abcdef";function W(ne){for(var Q="",U=0;U<32;U++)Q+=Y.charAt(Math.floor(Math.random()*Y.length));return""+ne+Q}Oe.sessionSID=W("SS"),Oe.createSID=W},8592:(Ie,Oe,Y)=>{"use strict";var L=Y(7627),W=L.guessBrowser,ne=L.support,Q=Y(3948),U=Q.isAndroid,D=Q.isMobile,O=Q.isNonChromiumEdge,N=Q.rebrandedChromeBrowser,x=Q.mobileWebKitBrowser,J=["crios","edg","edge","electron","headlesschrome"],ie=["chrome","firefox"],te=["chrome","safari"],le=[];Ie.exports=function X(){var z=W();if(!z)return!1;var K=N(z),se=x(z),ve=U()?ie:te;return!!z&&ne()&&(!K||J.includes(K))&&!O(z)&&(!se||le.includes(se))&&(!D()||ve.includes(z))}},6543:Ie=>{"use strict";var Oe=function(){function Y(L,W,ne){void 0===ne&&(ne=!0),Object.defineProperties(this,{_delay:{value:W,writable:!0},_fn:{value:L},_timeout:{value:null,writable:!0}}),ne&&this.start()}return Object.defineProperty(Y.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),Y.prototype.setDelay=function(L){this._delay=L},Y.prototype.start=function(){var L=this;this.isSet||(this._timeout=setTimeout(function(){var W=L._fn;L.clear(),W()},this._delay))},Y.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},Y.prototype.reset=function(){this.clear(),this.start()},Y}();Ie.exports=Oe},8380:function(Ie,Oe,Y){"use strict";var Xe,L=this&&this.__extends||(Xe=function(Me,st){return(Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kn,dn){kn.__proto__=dn}||function(kn,dn){for(var Xi in dn)Object.prototype.hasOwnProperty.call(dn,Xi)&&(kn[Xi]=dn[Xi])})(Me,st)},function(Me,st){if("function"!=typeof st&&null!==st)throw new TypeError("Class extends value "+String(st)+" is not a constructor or null");function kn(){this.constructor=Me}Xe(Me,st),Me.prototype=null===st?Object.create(st):(kn.prototype=st.prototype,new kn)}),W=Y(9318),ne={};Oe.createTwilioError=function(Me,st){return st="string"==typeof st&&st?st:"Unknown error",ne[Me="number"==typeof Me?Me:0]?new ne[Me]:new W(Me,st)};var Q=function(Xe){function Me(){var st=Xe.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenInvalidError=Q,Object.defineProperty(ne,20101,{value:Q});var U=function(Xe){function Me(){var st=Xe.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenHeaderInvalidError=U,Object.defineProperty(ne,20102,{value:U});var D=function(Xe){function Me(){var st=Xe.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenIssuerInvalidError=D,Object.defineProperty(ne,20103,{value:D});var O=function(Xe){function Me(){var st=Xe.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenExpiredError=O,Object.defineProperty(ne,20104,{value:O});var N=function(Xe){function Me(){var st=Xe.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenNotYetValidError=N,Object.defineProperty(ne,20105,{value:N});var x=function(Xe){function Me(){var st=Xe.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenGrantsInvalidError=x,Object.defineProperty(ne,20106,{value:x});var J=function(Xe){function Me(){var st=Xe.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenSignatureInvalidError=J,Object.defineProperty(ne,20107,{value:J});var ie=function(Xe){function Me(){var st=Xe.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingConnectionError=ie,Object.defineProperty(ne,53e3,{value:ie});var te=function(Xe){function Me(){var st=Xe.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingConnectionDisconnectedError=te,Object.defineProperty(ne,53001,{value:te});var le=function(Xe){function Me(){var st=Xe.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingConnectionTimeoutError=le,Object.defineProperty(ne,53002,{value:le});var X=function(Xe){function Me(){var st=Xe.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingIncomingMessageInvalidError=X,Object.defineProperty(ne,53003,{value:X});var z=function(Xe){function Me(){var st=Xe.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingOutgoingMessageInvalidError=z,Object.defineProperty(ne,53004,{value:z});var K=function(Xe){function Me(){var st=Xe.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingServerBusyError=K,Object.defineProperty(ne,53006,{value:K});var se=function(Xe){function Me(){var st=Xe.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomNameInvalidError=se,Object.defineProperty(ne,53100,{value:se});var ve=function(Xe){function Me(){var st=Xe.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomNameTooLongError=ve,Object.defineProperty(ne,53101,{value:ve});var De=function(Xe){function Me(){var st=Xe.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomNameCharsInvalidError=De,Object.defineProperty(ne,53102,{value:De});var pe=function(Xe){function Me(){var st=Xe.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomCreateFailedError=pe,Object.defineProperty(ne,53103,{value:pe});var Ee=function(Xe){function Me(){var st=Xe.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomConnectFailedError=Ee,Object.defineProperty(ne,53104,{value:Ee});var Ae=function(Xe){function Me(){var st=Xe.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomMaxParticipantsExceededError=Ae,Object.defineProperty(ne,53105,{value:Ae});var ge=function(Xe){function Me(){var st=Xe.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomNotFoundError=ge,Object.defineProperty(ne,53106,{value:ge});var re=function(Xe){function Me(){var st=Xe.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomMaxParticipantsOutOfRangeError=re,Object.defineProperty(ne,53107,{value:re});var de=function(Xe){function Me(){var st=Xe.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomTypeInvalidError=de,Object.defineProperty(ne,53108,{value:de});var we=function(Xe){function Me(){var st=Xe.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomTimeoutOutOfRangeError=we,Object.defineProperty(ne,53109,{value:we});var Fe=function(Xe){function Me(){var st=Xe.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomStatusCallbackMethodInvalidError=Fe,Object.defineProperty(ne,53110,{value:Fe});var xe=function(Xe){function Me(){var st=Xe.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomStatusCallbackInvalidError=xe,Object.defineProperty(ne,53111,{value:xe});var Ve=function(Xe){function Me(){var st=Xe.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomStatusInvalidError=Ve,Object.defineProperty(ne,53112,{value:Ve});var ze=function(Xe){function Me(){var st=Xe.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomRoomExistsError=ze,Object.defineProperty(ne,53113,{value:ze});var Ze=function(Xe){function Me(){var st=Xe.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomInvalidParametersError=Ze,Object.defineProperty(ne,53114,{value:Ze});var je=function(Xe){function Me(){var st=Xe.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomMediaRegionInvalidError=je,Object.defineProperty(ne,53115,{value:je});var xt=function(Xe){function Me(){var st=Xe.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomMediaRegionUnavailableError=xt,Object.defineProperty(ne,53116,{value:xt});var Wt=function(Xe){function Me(){var st=Xe.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomSubscriptionOperationNotSupportedError=Wt,Object.defineProperty(ne,53117,{value:Wt});var ht=function(Xe){function Me(){var st=Xe.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomCompletedError=ht,Object.defineProperty(ne,53118,{value:ht});var qe=function(Xe){function Me(){var st=Xe.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomAudioOnlyFlagNotSupportedError=qe,Object.defineProperty(ne,53124,{value:qe});var Ue=function(Xe){function Me(){var st=Xe.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomTrackKindNotSupportedError=Ue,Object.defineProperty(ne,53125,{value:Ue});var Ye=function(Xe){function Me(){var st=Xe.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantIdentityInvalidError=Ye,Object.defineProperty(ne,53200,{value:Ye});var Re=function(Xe){function Me(){var st=Xe.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantIdentityTooLongError=Re,Object.defineProperty(ne,53201,{value:Re});var tt=function(Xe){function Me(){var st=Xe.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantIdentityCharsInvalidError=tt,Object.defineProperty(ne,53202,{value:tt});var Dt=function(Xe){function Me(){var st=Xe.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantMaxTracksExceededError=Dt,Object.defineProperty(ne,53203,{value:Dt});var zt=function(Xe){function Me(){var st=Xe.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantNotFoundError=zt,Object.defineProperty(ne,53204,{value:zt});var kt=function(Xe){function Me(){var st=Xe.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantDuplicateIdentityError=kt,Object.defineProperty(ne,53205,{value:kt});var mt=function(Xe){function Me(){var st=Xe.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackInvalidError=mt,Object.defineProperty(ne,53300,{value:mt});var zn=function(Xe){function Me(){var st=Xe.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackNameInvalidError=zn,Object.defineProperty(ne,53301,{value:zn});var qn=function(Xe){function Me(){var st=Xe.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackNameTooLongError=qn,Object.defineProperty(ne,53302,{value:qn});var Lr=function(Xe){function Me(){var st=Xe.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackNameCharsInvalidError=Lr,Object.defineProperty(ne,53303,{value:Lr});var jr=function(Xe){function Me(){var st=Xe.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackNameIsDuplicatedError=jr,Object.defineProperty(ne,53304,{value:jr});var Or=function(Xe){function Me(){var st=Xe.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackServerTrackCapacityReachedError=Or,Object.defineProperty(ne,53305,{value:Or});var wr=function(Xe){function Me(){var st=Xe.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaClientLocalDescFailedError=wr,Object.defineProperty(ne,53400,{value:wr});var Pn=function(Xe){function Me(){var st=Xe.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaServerLocalDescFailedError=Pn,Object.defineProperty(ne,53401,{value:Pn});var Si=function(Xe){function Me(){var st=Xe.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaClientRemoteDescFailedError=Si,Object.defineProperty(ne,53402,{value:Si});var ki=function(Xe){function Me(){var st=Xe.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaServerRemoteDescFailedError=ki,Object.defineProperty(ne,53403,{value:ki});var ho=function(Xe){function Me(){var st=Xe.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaNoSupportedCodecError=ho,Object.defineProperty(ne,53404,{value:ho});var po=function(Xe){function Me(){var st=Xe.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaConnectionError=po,Object.defineProperty(ne,53405,{value:po});var At=function(Xe){function Me(){var st=Xe.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaDTLSTransportFailedError=At,Object.defineProperty(ne,53407,{value:At});var Ht=function(Xe){function Me(){var st=Xe.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ConfigurationAcquireFailedError=Ht,Object.defineProperty(ne,53500,{value:Ht});var $t=function(Xe){function Me(){var st=Xe.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ConfigurationAcquireTurnFailedError=$t,Object.defineProperty(ne,53501,{value:$t})},9318:function(Ie){"use strict";var ne,Oe=this&&this.__extends||(ne=function(Q,U){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var N in O)Object.prototype.hasOwnProperty.call(O,N)&&(D[N]=O[N])})(Q,U)},function(Q,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function D(){this.constructor=Q}ne(Q,U),Q.prototype=null===U?Object.create(U):(D.prototype=U.prototype,new D)}),Y=this&&this.__read||function(ne,Q){var U="function"==typeof Symbol&&ne[Symbol.iterator];if(!U)return ne;var O,x,D=U.call(ne),N=[];try{for(;(void 0===Q||Q-- >0)&&!(O=D.next()).done;)N.push(O.value)}catch(J){x={error:J}}finally{try{O&&!O.done&&(U=D.return)&&U.call(D)}finally{if(x)throw x.error}}return N},L=this&&this.__spreadArray||function(ne,Q){for(var U=0,D=Q.length,O=ne.length;U<D;U++,O++)ne[O]=Q[U];return ne},W=function(ne){function Q(U){var D=this,O=[].slice.call(arguments,1);D=ne.apply(this,L([],Y(O)))||this,Object.setPrototypeOf(D,Q.prototype);var N=Error.apply(D,O);return N.name="TwilioError",Object.defineProperty(D,"code",{value:U,enumerable:!0}),Object.getOwnPropertyNames(N).forEach(function(x){Object.defineProperty(this,x,{value:N[x],enumerable:!0})},D),D}return Oe(Q,ne),Q.prototype.toString=function(){return this.name+" "+this.code+(this.message?": "+this.message:"")},Q}(Error);Ie.exports=W},1501:(Ie,Oe,Y)=>{"use strict";var W=Y(9739).isNonArrayObject,ne=Y(8701),Q=ne.typeErrors,U=ne.clientTrackSwitchOffControl,D=ne.videoContentPreferencesMode,O=ne.subscriptionMode,N=ne.trackPriority,x=ne.trackSwitchOffMode;function te(X,z,K){return void 0===K&&(K=[]),typeof X>"u"?null:null!==X&&W(X)?K.reduce(function(se,ve){var De=ve.prop,pe=ve.type,Ee=ve.values;if(se||!(De in X))return se;var Ae=X[De];return pe&&typeof Ae!==pe||"number"===pe&&isNaN(Ae)?Q.INVALID_TYPE(z+"."+De,pe):Array.isArray(Ee)&&!Ee.includes(Ae)?Q.INVALID_VALUE(z+"."+De,Ee):se},null):Q.INVALID_TYPE(z,"object")}Oe.kG=function J(X){var z=te(X,"options.bandwidthProfile");return!X||z||(z=te(X.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(D)},{prop:"dominantSpeakerPriority",values:Object.values(N)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(O)},{prop:"clientTrackSwitchOffControl",values:Object.values(U)},{prop:"trackSwitchOffMode",values:Object.values(x)}]))?z:X.video?"maxTracks"in X.video&&"clientTrackSwitchOffControl"in X.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in X.video&&"contentPreferencesMode"in X.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):function le(X){var z="options.bandwidthProfile.video.renderDimensions",K=te(X,z);return X?K||Object.values(N).reduce(function(se,ve){return se||te(X[ve],z+"."+ve,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):K}(X.video.renderDimensions):null},Oe.Wv=function ie(X,z){if(!(X instanceof z.LocalAudioTrack||X instanceof z.LocalDataTrack||X instanceof z.LocalVideoTrack||X instanceof z.MediaStreamTrack))throw Q.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}},1905:Ie=>{Ie.exports=function(Y,L){if(Y&&L)if(Y.super_=L,"function"==typeof Object.create)Y.prototype=Object.create(L.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}});else{var W=function ne(){};W.prototype=L.prototype,Y.prototype=new W,Y.prototype.constructor=Y}}},7846:Ie=>{var Oe=function(){},Y="undefined",L=typeof window!==Y&&typeof window.navigator!==Y&&/Trident\/|MSIE /.test(window.navigator.userAgent),W=["trace","debug","info","warn","error"];function ne(le,X){var z=le[X];if("function"==typeof z.bind)return z.bind(le);try{return Function.prototype.bind.call(z,le)}catch{return function(){return Function.prototype.apply.apply(z,[le,arguments])}}}function Q(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function U(le){return"debug"===le&&(le="log"),typeof console!==Y&&("trace"===le&&L?Q:void 0!==console[le]?ne(console,le):void 0!==console.log?ne(console,"log"):Oe)}function D(le,X){for(var z=0;z<W.length;z++){var K=W[z];this[K]=z<le?Oe:this.methodFactory(K,le,X)}this.log=this.debug}function O(le,X,z){return function(){typeof console!==Y&&(D.call(this,X,z),this[le].apply(this,arguments))}}function N(le,X,z){return U(le)||O.apply(this,arguments)}function x(le,X,z){var se,K=this,ve="loglevel";function pe(){var Ae;if(typeof window!==Y&&ve){try{Ae=window.localStorage[ve]}catch{}if(typeof Ae===Y)try{var ge=window.document.cookie,re=ge.indexOf(encodeURIComponent(ve)+"=");-1!==re&&(Ae=/^([^;]+)/.exec(ge.slice(re))[1])}catch{}return void 0===K.levels[Ae]&&(Ae=void 0),Ae}}"string"==typeof le?ve+=":"+le:"symbol"==typeof le&&(ve=void 0),K.name=le,K.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},K.methodFactory=z||N,K.getLevel=function(){return se},K.setLevel=function(Ae,ge){if("string"==typeof Ae&&void 0!==K.levels[Ae.toUpperCase()]&&(Ae=K.levels[Ae.toUpperCase()]),!("number"==typeof Ae&&Ae>=0&&Ae<=K.levels.SILENT))throw"log.setLevel() called with invalid level: "+Ae;if(se=Ae,!1!==ge&&function De(Ae){var ge=(W[Ae]||"silent").toUpperCase();if(typeof window!==Y&&ve){try{return void(window.localStorage[ve]=ge)}catch{}try{window.document.cookie=encodeURIComponent(ve)+"="+ge+";"}catch{}}}(Ae),D.call(K,Ae,le),typeof console===Y&&Ae<K.levels.SILENT)return"No console available for logging"},K.setDefaultLevel=function(Ae){pe()||K.setLevel(Ae,!1)},K.enableAll=function(Ae){K.setLevel(K.levels.TRACE,Ae)},K.disableAll=function(Ae){K.setLevel(K.levels.SILENT,Ae)};var Ee=pe();null==Ee&&(Ee=X??"WARN"),K.setLevel(Ee,!1)}var J=new x,ie={};J.getLogger=function(X){if("symbol"!=typeof X&&"string"!=typeof X||""===X)throw new TypeError("You must supply a name when creating a logger.");var z=ie[X];return z||(z=ie[X]=new x(X,J.getLevel(),J.methodFactory)),z};var te=typeof window!==Y?window.log:void 0;J.noConflict=function(){return typeof window!==Y&&window.log===J&&(window.log=te),J},J.getLoggers=function(){return ie},J.default=J,Ie.exports=J},7708:Ie=>{"use strict";var Oe=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,Y=function(){function L(W){W=Object.assign({AudioContext:Oe},W),Object.defineProperties(this,{_AudioContext:{value:W.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:L}})}return L.prototype.getOrCreate=function(W){if(!this._holders.has(W)&&(this._holders.add(W),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},L.prototype.release=function(W){this._holders.has(W)&&(this._holders.delete(W),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},L}();Ie.exports=new Y},4687:Ie=>{"use strict";Ie.exports=function Y(L,W,ne){ne="number"==typeof ne?ne:250;var Q=L.createMediaStreamSource(W),U=L.createAnalyser();U.fftSize=2048,Q.connect(U);var D=new Uint8Array(U.fftSize),O=!1;return setTimeout(function(){O=!0},ne),function N(){return O?Promise.resolve(!0):(U.getByteTimeDomainData(D),D.some(function(x){return 128!==x&&0!==x})?Promise.resolve(!1):function Oe(L){return L="number"==typeof L?L:0,new Promise(function(W){return setTimeout(W,L)})}().then(N))}().then(function(x){return Q.disconnect(),x},function(x){throw Q.disconnect(),x})}},3830:(Ie,Oe,Y)=>{"use strict";var L=Y(4687);Ie.exports=function W(ne,Q,U,D,O){D="number"==typeof D?D:3;var N=0,x=Y(7708),J={},ie=x.getOrCreate(J);return function te(){return Q(U).then(function(le){return(U.audio?L(ie,le,O).catch(function(z){return ne.warn("Encountered an error while detecting silence",z),!0}):Promise.resolve(!1)).then(function(z){return z?D<=0?(ne.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),le):(ne.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++N+"."),le.getTracks().forEach(function(K){return K.stop()}),D--,te()):(ne.info("Got a non-silent audio MediaStreamTrack; returning it."),le)})})}().then(function(le){return x.release(J),le},function(le){throw x.release(J),le})}},9611:(Ie,Oe,Y)=>{"use strict";var L=Y(7627).flatMap,W=Y(7627).guessBrowser,ne=Y(7627).guessBrowserVersion,Q=Y(3236).getSdpFormat,U=W(),D=ne(),O="chrome"===U,N="firefox"===U,x="safari"===U,J=O?D.major:null;function z(re){var de=Array.from(re.values()).find(function(je){return"candidate-pair"===je.type&&je.nominated});if(!de)return null;var we=re.get(de.localCandidateId),Fe=re.get(de.remoteCandidateId),xe=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],Ve=xe.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),ze=we?Ve.reduce(function(je,xt){return je[xt.key]=typeof we[xt.key]===xt.type?we[xt.key]:"deleted"!==xt.key&&null,je},{}):null,Ze=Fe?xe.reduce(function(je,xt){return je[xt.key]=typeof Fe[xt.key]===xt.type?Fe[xt.key]:null,je},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(je){return"inprogress"===je?"in-progress":je}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(je,xt){return je[xt.key]=typeof de[xt.key]===xt.type?xt.fixup?xt.fixup(de[xt.key]):de[xt.key]:null,je},{localCandidate:ze,remoteCandidate:Ze})}function K(re){var de=Array.from(re.values()).find(function(xt){return"candidate-pair"===xt.type&&xt.nominated});if(!de)return null;var we=re.get(de.localCandidateId),Fe=re.get(de.remoteCandidateId),xe=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],Ve=xe.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),ze={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},Ze=we?Ve.reduce(function(xt,Wt){var ht=Wt.ffKeys&&Wt.ffKeys.find(function(qe){return qe in we})||Wt.key;return xt[Wt.key]=typeof we[ht]===Wt.type?"candidateType"===ht&&ze[we[ht]]||we[ht]:"deleted"!==ht&&null,xt},{}):null,je=Fe?xe.reduce(function(xt,Wt){var ht=Wt.ffKeys&&Wt.ffKeys.find(function(qe){return qe in Fe})||Wt.key;return xt[Wt.key]=typeof Fe[ht]===Wt.type?"candidateType"===ht&&ze[Fe[ht]]||Fe[ht]:null,xt},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(xt,Wt){return xt[Wt.key]=typeof de[Wt.key]===Wt.type?de[Wt.key]:null,xt},{localCandidate:Ze,remoteCandidate:je})}function se(re,de,we){var Fe="local"===we?"getSenders":"getReceivers";return re[Fe]?re[Fe]().map(function(Ve){return Ve.track}).filter(function(Ve){return Ve&&Ve.kind===de}):L(re["local"===we?"getLocalStreams":"getRemoteStreams"](),function(Ve){return Ve["audio"===de?"getAudioTracks":"getVideoTracks"]()})}function De(re,de){return new Promise(function(we,Fe){J&&J<67?re.getStats(function(xe){we([Ee(xe,de)])},null,Fe):re.getStats(de).then(function(xe){we(function Ae(re){var de=null,we=[],Fe=null,xe=null,Ve=null,ze=null,Ze=null;re.forEach(function(qe){switch(qe.type){case"inbound-rtp":de=qe;break;case"outbound-rtp":we.push(qe);break;case"media-source":Ze=qe;break;case"track":Ve=qe;break;case"codec":ze=qe;break;case"remote-inbound-rtp":Fe=qe;break;case"remote-outbound-rtp":xe=qe}});var je=Ve&&Ve.remoteSource,Wt=[],ht=je?xe:Fe;return(je?[de]:we).forEach(function(qe){var Ue={},Ye=[qe,Ze,Ve,ze,ht&&ht.ssrc===qe.ssrc?ht:null];function Re(kn){var dn=Ye.find(function(Xi){return Xi&&typeof Xi[kn]<"u"})||null;return dn?dn[kn]:null}var tt=Re("ssrc");"number"==typeof tt&&(Ue.ssrc=String(tt));var Dt=Re("timestamp");Ue.timestamp=Math.round(Dt);var zt=Re("mimeType");"string"==typeof zt&&(zt=zt.split("/"),Ue.codecName=zt[zt.length-1]);var kt=Re("roundTripTime");"number"==typeof kt&&(Ue.roundTripTime=Math.round(1e3*kt));var mt=Re("jitter");"number"==typeof mt&&(Ue.jitter=Math.round(1e3*mt));var zn=Re("frameWidth");"number"==typeof zn&&(je?Ue.frameWidthReceived=zn:(Ue.frameWidthSent=zn,Ue.frameWidthInput=Ve.frameWidth));var qn=Re("frameHeight");"number"==typeof qn&&(je?Ue.frameHeightReceived=qn:(Ue.frameHeightSent=qn,Ue.frameHeightInput=Ve.frameHeight));var Lr=Re("framesPerSecond");"number"==typeof Lr&&(Ue[je?"frameRateReceived":"frameRateSent"]=Lr);var jr=Re("bytesReceived");"number"==typeof jr&&(Ue.bytesReceived=jr);var Or=Re("bytesSent");"number"==typeof Or&&(Ue.bytesSent=Or);var wr=Re("packetsLost");"number"==typeof wr&&(Ue.packetsLost=wr);var Pn=Re("packetsReceived");"number"==typeof Pn&&(Ue.packetsReceived=Pn);var Si=Re("packetsSent");"number"==typeof Si&&(Ue.packetsSent=Si);var ki=Re("audioLevel");"number"==typeof ki&&(ki=Math.round(32767*ki),je?Ue.audioOutputLevel=ki:Ue.audioInputLevel=ki);var ho=Re("totalPacketSendDelay");"number"==typeof ho&&(Ue.totalPacketSendDelay=ho);var po=Re("totalEncodeTime");"number"==typeof po&&(Ue.totalEncodeTime=po);var At=Re("framesEncoded");"number"==typeof At&&(Ue.framesEncoded=At);var Ht=Re("estimatedPlayoutTimestamp");"number"==typeof Ht&&(Ue.estimatedPlayoutTimestamp=Ht);var $t=Re("totalDecodeTime");"number"==typeof $t&&(Ue.totalDecodeTime=$t);var Xe=Re("framesDecoded");"number"==typeof Xe&&(Ue.framesDecoded=Xe);var Me=Re("jitterBufferDelay");"number"==typeof Me&&(Ue.jitterBufferDelay=Me);var st=Re("jitterBufferEmittedCount");"number"==typeof st&&(Ue.jitterBufferEmittedCount=st),Wt.push(Ue)}),Wt}(xe))},Fe)})}function Ee(re,de){var we=re.result().find(function(xe){return"ssrc"===xe.type&&xe.stat("googTrackId")===de.id}),Fe={};return we&&(Fe.timestamp=Math.round(Number(we.timestamp)),Fe=we.names().reduce(function(xe,Ve){switch(Ve){case"googCodecName":xe.codecName=we.stat(Ve);break;case"googRtt":xe.roundTripTime=Number(we.stat(Ve));break;case"googJitterReceived":xe.jitter=Number(we.stat(Ve));break;case"googFrameWidthInput":xe.frameWidthInput=Number(we.stat(Ve));break;case"googFrameHeightInput":xe.frameHeightInput=Number(we.stat(Ve));break;case"googFrameWidthSent":xe.frameWidthSent=Number(we.stat(Ve));break;case"googFrameHeightSent":xe.frameHeightSent=Number(we.stat(Ve));break;case"googFrameWidthReceived":xe.frameWidthReceived=Number(we.stat(Ve));break;case"googFrameHeightReceived":xe.frameHeightReceived=Number(we.stat(Ve));break;case"googFrameRateInput":xe.frameRateInput=Number(we.stat(Ve));break;case"googFrameRateSent":xe.frameRateSent=Number(we.stat(Ve));break;case"googFrameRateReceived":xe.frameRateReceived=Number(we.stat(Ve));break;case"ssrc":xe[Ve]=we.stat(Ve);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":xe[Ve]=Number(we.stat(Ve))}return xe},Fe)),Fe}function ge(re,de){var we=null,Fe=null;(re=re||new Map).forEach(function(Pn){if(!Pn.isRemote)switch(Pn.type){case"inbound-rtp":we=Pn,Fe=re.get(Pn.remoteId);break;case"outbound-rtp":Fe=Pn,we=re.get(Pn.remoteId)}});var xe=de?we:Fe,Ve=de?Fe:we;function ze(Pn){return xe&&typeof xe[Pn]<"u"?xe[Pn]:Ve&&typeof Ve[Pn]<"u"?Ve[Pn]:null}var Ze={},je=ze("timestamp");Ze.timestamp=Math.round(je);var xt=ze("ssrc");"number"==typeof xt&&(Ze.ssrc=String(xt));var Wt=ze("bytesSent");"number"==typeof Wt&&(Ze.bytesSent=Wt);var ht=ze("packetsLost");"number"==typeof ht&&(Ze.packetsLost=ht);var qe=ze("packetsSent");"number"==typeof qe&&(Ze.packetsSent=qe);var Ue=ze("roundTripTime");"number"==typeof Ue&&(Ze.roundTripTime=Math.round(1e3*Ue));var Ye=ze("jitter");"number"==typeof Ye&&(Ze.jitter=Math.round(1e3*Ye));var Re=ze("framerateMean");"number"==typeof Re&&(Ze.frameRateSent=Math.round(Re));var tt=ze("bytesReceived");"number"==typeof tt&&(Ze.bytesReceived=tt);var Dt=ze("packetsReceived");"number"==typeof Dt&&(Ze.packetsReceived=Dt);var zt=ze("framerateMean");"number"==typeof zt&&(Ze.frameRateReceived=Math.round(zt));var kt=ze("totalPacketSendDelay");"number"==typeof kt&&(Ze.totalPacketSendDelay=kt);var mt=ze("totalEncodeTime");"number"==typeof mt&&(Ze.totalEncodeTime=mt);var zn=ze("framesEncoded");"number"==typeof zn&&(Ze.framesEncoded=zn);var qn=ze("estimatedPlayoutTimestamp");"number"==typeof qn&&(Ze.estimatedPlayoutTimestamp=qn);var Lr=ze("totalDecodeTime");"number"==typeof Lr&&(Ze.totalDecodeTime=Lr);var jr=ze("framesDecoded");"number"==typeof jr&&(Ze.framesDecoded=jr);var Or=ze("jitterBufferDelay");"number"==typeof Or&&(Ze.jitterBufferDelay=Or);var wr=ze("jitterBufferEmittedCount");return"number"==typeof wr&&(Ze.jitterBufferEmittedCount=wr),Ze}Ie.exports=function te(re,de){return re&&"function"==typeof re.getStats?function le(re,de){var we=se(re,"audio","local"),Fe=se(re,"video","local"),xe=se(re,"audio"),Ve=se(re,"video"),ze={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},Ze=L([[we,"localAudioTrackStats",!1],[Fe,"localVideoTrackStats",!1],[xe,"remoteAudioTrackStats",!0],[Ve,"remoteVideoTrackStats",!0]],function(je){var Wt=je[1],ht=je[2];return je[0].map(function(qe){return function ve(re,de,we){return typeof(we=we||{}).testForChrome<"u"||O?De(re,de):typeof we.testForFirefox<"u"||N?function pe(re,de,we){return new Promise(function(Fe,xe){re.getStats(de).then(function(Ve){Fe([ge(Ve,we)])},xe)})}(re,de,we.isRemote):typeof we.testForSafari<"u"||x?typeof we.testForSafari<"u"||"unified"===Q()?De(re,de):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(re,qe,Object.assign({isRemote:ht},de)).then(function(Ue){Ue.forEach(function(Ye){Ye.trackId=qe.id,ze[Wt].push(Ye)})})})});return Promise.all(Ze).then(function(){return function X(re,de){return typeof(de=de||{}).testForChrome<"u"||O||typeof de.testForSafari<"u"||x?re.getStats().then(z):typeof de.testForFirefox<"u"||N?re.getStats().then(K):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(re,de)}).then(function(je){return ze.activeIceCandidatePair=je,ze})}(re,de):Promise.reject(new Error("Given PeerConnection does not support getStats"))}},7370:Ie=>{"use strict";Ie.exports=function Oe(Y){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?(Y=Y||{audio:!0,video:!0},navigator.mediaDevices.getUserMedia(Y)):Promise.reject(new Error("getUserMedia is not supported"))}},1647:(Ie,Oe,Y)=>{"use strict";var L={};Object.defineProperties(L,{getStats:{enumerable:!0,value:Y(9611)},getUserMedia:{enumerable:!0,value:Y(7370)},MediaStream:{enumerable:!0,value:Y(4946)},MediaStreamTrack:{enumerable:!0,value:Y(6240)},RTCIceCandidate:{enumerable:!0,value:Y(5219)},RTCPeerConnection:{enumerable:!0,value:Y(7061)},RTCSessionDescription:{enumerable:!0,value:Y(5481)}}),Ie.exports=L},4946:Ie=>{"use strict";Ie.exports="function"==typeof MediaStream?MediaStream:function(){throw new Error("MediaStream is not supported")}},6240:Ie=>{"use strict";Ie.exports="function"==typeof MediaStreamTrack?MediaStreamTrack:function(){throw new Error("MediaStreamTrack is not supported")}},5219:Ie=>{"use strict";Ie.exports="function"==typeof RTCIceCandidate?RTCIceCandidate:function(){throw new Error("RTCIceCandidate is not supported")}},5431:(Ie,Oe,Y)=>{"use strict";var L=Y(4326),W=Y(7590),ne=Y(1905),Q=Y(3688),U=Y(4946),D=Y(7121),O=Y(3236),N=Y(7627),x=Y(7627).isIOSChrome,J="unified"===O.getSdpFormat();function ie(pe,Ee){if(!(this instanceof ie))return new ie(pe,Ee);W.call(this),pe=pe||{};var Ae=Object.assign(pe.iceTransportPolicy?{iceTransports:pe.iceTransportPolicy}:{},pe);N.interceptEvent(this,"datachannel"),N.interceptEvent(this,"signalingstatechange");var ge=O.getSdpFormat(Ae.sdpSemantics),re=new RTCPeerConnection(Ae,Ee);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new U},_peerConnection:{value:re},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:ge},_senders:{value:new Map},_signalingStateLatch:{value:new Q},_tracksToSSRCs:{value:new Map,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:re.localDescription}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:re.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":re.signalingState}}});var de=this;re.addEventListener("datachannel",function(Fe){ve(Fe.channel),de.dispatchEvent(Fe)}),re.addEventListener("signalingstatechange",function(){"stable"===re.signalingState&&(de._appliedTracksToSSRCs=new Map(de._tracksToSSRCs)),!de._pendingLocalOffer&&!de._pendingRemoteOffer&&de.dispatchEvent.apply(de,arguments)}),re.ontrack=function(){},"function"!=typeof RTCPeerConnection.prototype.addTrack&&re.addStream(this._localStream),N.proxyProperties(RTCPeerConnection.prototype,this,re)}function te(pe,Ee,Ae){var Ve,de=Ee?pe._pendingLocalOffer:pe._pendingRemoteOffer,Fe=Ee?"have-local-offer":"have-remote-offer",xe=Ee?"setLocalDescription":"setRemoteDescription";if(!Ee&&(Ee?pe._pendingRemoteOffer:pe._pendingLocalOffer)&&"answer"===Ae.type)Ve=function le(pe,Ee){return pe._peerConnection.setLocalDescription(pe._pendingLocalOffer).then(function(){return pe._pendingLocalOffer=null,pe.setRemoteDescription(Ee)}).then(function(){pe._signalingStateLatch.lower()})}(pe,Ae);else if("offer"===Ae.type){if(pe.signalingState!==Fe&&"stable"!==pe.signalingState)return Promise.reject(new Error("Cannot set "+(Ee?"local":"remote")+" offer in state "+pe.signalingState));!de&&"low"===pe._signalingStateLatch.state&&pe._signalingStateLatch.raise();var ze=pe.signalingState;(function ge(Ze){Ee?pe._pendingLocalOffer=Ze:pe._pendingRemoteOffer=Ze})(z(Ae)),Ve=Promise.resolve(),pe.signalingState!==ze&&Ve.then(function(){pe.dispatchEvent(new Event("signalingstatechange"))})}else"rollback"===Ae.type&&(pe.signalingState!==Fe?Ve=Promise.reject(new Error("Cannot rollback "+(Ee?"local":"remote")+" description in "+pe.signalingState)):(function re(){Ee?pe._pendingLocalOffer=null:pe._pendingRemoteOffer=null}(),pe._rolledBackTracksToSSRCs=new Map(pe._tracksToSSRCs),pe._tracksToSSRCs=new Map(pe._appliedTracksToSSRCs),(Ve=Promise.resolve()).then(function(){pe.dispatchEvent(new Event("signalingstatechange"))})));return Ve||pe._peerConnection[xe](z(Ae))}function X(pe,Ee){return!!pe.getTransceivers().find(function(Ae){return Ae.receiver&&Ae.receiver.track&&Ae.receiver.track.kind===Ee})}function z(pe){return pe instanceof L&&pe._description?pe._description:new RTCSessionDescription(pe)}function K(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function ve(pe){return Object.defineProperty(pe,"maxRetransmits",{value:65535===pe.maxRetransmits?null:pe.maxRetransmits}),K()&&Object.defineProperty(pe,"maxPacketLifeTime",{value:65535===pe.maxRetransmitTime?null:pe.maxRetransmitTime}),pe}function De(pe,Ee,Ae){return"unified"===pe?O.updateUnifiedPlanTrackIdsToSSRCs(Ee,Ae):O.updatePlanBTrackIdsToSSRCs(Ee,Ae)}ne(ie,W),"function"!=typeof RTCPeerConnection.prototype.addTrack?(ie.prototype.addTrack=function(){var Ee=[].slice.call(arguments),Ae=Ee[0];if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+Ae.id+", "+Ae.kind+"]: RTCPeerConnection is closed");var ge=this._senders.get(Ae);if(ge&&ge.track)throw new Error("Cannot add MediaStreamTrack ["+Ae.id+", "+Ae.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(Ae),this._peerConnection.addStream(this._localStream),ge=new D(Ae),this._senders.set(Ae,ge),ge},ie.prototype.removeTrack=function(Ee){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");var Ae=Ee.track;!Ae||(Ee=this._senders.get(Ae))&&Ee.track&&(Ee.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(Ae),this._peerConnection.addStream(this._localStream))},ie.prototype.getSenders=function(){return Array.from(this._senders.values())}):ie.prototype.removeTrack=function(Ee){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");try{this._peerConnection.removeTrack(Ee)}catch{}},ie.prototype.addIceCandidate=function(Ee){var ge,Ae=[].slice.call(arguments),re=this;return ge="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return re._peerConnection.addIceCandidate(Ee)}):this._peerConnection.addIceCandidate(Ee),Ae.length>1?N.legacyPromise(ge,Ae[1],Ae[2]):ge},ie.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},ie.prototype.createAnswer=function(){var Ae,Ee=[].slice.call(arguments),ge=this;return Ae=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return ge._signalingStateLatch.lower(),ge._peerConnection.createAnswer()}).then(function(de){return ge._pendingRemoteOffer=null,ge._rolledBackTracksToSSRCs.clear(),new L({type:"answer",sdp:De(ge._sdpFormat,ge._tracksToSSRCs,de.sdp)})},function(de){throw ge._pendingRemoteOffer=null,de}):this._peerConnection.createAnswer().then(function(re){return ge._rolledBackTracksToSSRCs.clear(),new L({type:"answer",sdp:De(ge._sdpFormat,ge._tracksToSSRCs,re.sdp)})}),Ee.length>1?N.legacyPromise(Ae,Ee[0],Ee[1]):Ae},ie.prototype.createOffer=function(){var Ee=[].slice.call(arguments),Ae=(Ee.length>1?Ee[2]:Ee[0])||{},ge=this;if(x()){if(Ae.offerToReceiveVideo&&!this._audioTransceiver&&(!J||!X(this,"audio"))){delete Ae.offerToReceiveAudio;try{this._audioTransceiver=J?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(de){return Promise.reject(de)}}if(Ae.offerToReceiveVideo&&!this._videoTransceiver&&(!J||!X(this,"video"))){delete Ae.offerToReceiveVideo;try{this._videoTransceiver=J?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(de){return Promise.reject(de)}}}var re=this._peerConnection.createOffer(Ae).then(function(de){return ge._rolledBackTracksToSSRCs.clear(),new L({type:de.type,sdp:De(ge._sdpFormat,ge._tracksToSSRCs,de.sdp)})});return Ee.length>1?N.legacyPromise(re,Ee[0],Ee[1]):re},ie.prototype.createDataChannel=function(Ee,Ae){Ae=function se(pe){return pe=Object.assign({},pe),K()&&"maxPacketLifeTime"in pe&&(pe.maxRetransmitTime=pe.maxPacketLifeTime),pe}(Ae);var ge=this._peerConnection.createDataChannel(Ee,Ae);return ve(ge),ge},ie.prototype.setLocalDescription=function(){var Ee=[].slice.call(arguments),Ae=Ee[0];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var ge=te(this,!0,Ae);return Ee.length>1?N.legacyPromise(ge,Ee[1],Ee[2]):ge},ie.prototype.setRemoteDescription=function(){var Ee=[].slice.call(arguments),Ae=Ee[0];this._rolledBackTracksToSSRCs.clear();var ge=te(this,!1,Ae);return Ee.length>1?N.legacyPromise(ge,Ee[1],Ee[2]):ge},N.delegateMethods(RTCPeerConnection.prototype,ie.prototype,"_peerConnection"),Ie.exports=ie},7111:(Ie,Oe,Y)=>{"use strict";var L=Y(7590),W=Y(3657),ne=Y(1905),Q=Y(3236).updateUnifiedPlanTrackIdsToSSRCs,U=Y(7627),D="object"==typeof navigator&&navigator.userAgent&&(navigator.userAgent.match(/Firefox\/61/)||navigator.userAgent.match(/Firefox\/62/));function O(ie){if(!(this instanceof O))return new O(ie);L.call(this),U.interceptEvent(this,"signalingstatechange");var te=new RTCPeerConnection(ie);Object.defineProperties(this,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:te},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},localDescription:{enumerable:!0,get:function(){return J(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.signalingState}}});var X,le=this;te.addEventListener("signalingstatechange",function(){if(!le._rollingBack&&le.signalingState!==X){X=le.signalingState;var K=le.dispatchEvent.apply.bind(le.dispatchEvent,le,arguments);le._isClosed?setTimeout(K):K()}}),U.proxyProperties(RTCPeerConnection.prototype,this,te)}function N(ie,te,le){var X=te?"setLocalDescription":"setRemoteDescription";return ie._rollingBack=!0,ie._peerConnection[X](new W({type:"rollback"})).then(le).then(function(K){return ie._rollingBack=!1,K},function(K){throw ie._rollingBack=!1,K})}function x(ie,te,le){if(!ie._initiallyNegotiatedDtlsRole&&"offer"!==te.type){var X=te.sdp.match(/a=setup:([a-z]+)/);if(X){var z=X[1];ie._initiallyNegotiatedDtlsRole=le?{active:"passive",passive:"active"}[z]:z}}}function J(ie,te){return ie&&"answer"===ie.type&&te?new W({type:ie.type,sdp:ie.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+te)}):ie}ne(O,L),Object.defineProperty(O.prototype,"peerIdentity",{enumerable:!0,value:Promise.resolve({idp:"",name:""})}),D&&(O.prototype.addTrack=function(){var te=arguments[0],le=this._peerConnection.addTrack.apply(this._peerConnection,arguments);return le.replaceTrack(te),le}),O.prototype.createAnswer=function(){var le,te=[].slice.call(arguments),X=this;return le=this._peerConnection.createAnswer().then(function(K){return x(X,K),J(K,X._initiallyNegotiatedDtlsRole)}),"function"==typeof te[0]?U.legacyPromise(le,te[0],te[1]):le},O.prototype.createOffer=function(){var X,te=[].slice.call(arguments),le=(te.length>1?te[2]:te[0])||{},z=this;if("have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState){var K="have-local-offer"===this.signalingState;X=N(this,K,function(){return z.createOffer(le)})}else X=z._peerConnection.createOffer(le);return X=X.then(function(se){return new W({type:se.type,sdp:Q(z._tracksToSSRCs,se.sdp)})}),te.length>1?U.legacyPromise(X,te[0],te[1]):X},O.prototype.setLocalDescription=function(){var X,te=[].slice.call(arguments),le=te[0];return le&&"answer"===le.type&&"have-local-offer"===this.signalingState&&(X=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),X?te.length>1?U.legacyPromise(X,te[1],te[2]):X:this._peerConnection.setLocalDescription.apply(this._peerConnection,te)},O.prototype.setRemoteDescription=function(){var X,te=[].slice.call(arguments),le=te[0],z=this;return le&&"have-remote-offer"===this.signalingState&&("answer"===le.type?X=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===le.type&&(X=N(this,!1,function(){return z._peerConnection.setRemoteDescription(le)}))),X||(X=this._peerConnection.setRemoteDescription(le)),X=X.then(function(){x(z,le,!0)}),te.length>1?U.legacyPromise(X,te[1],te[2]):X},O.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},U.delegateMethods(RTCPeerConnection.prototype,O.prototype,"_peerConnection"),Ie.exports=O},7061:(Ie,Oe,Y)=>{"use strict";if("function"==typeof RTCPeerConnection)switch((0,Y(7627).guessBrowser)()){case"chrome":Ie.exports=Y(5431);break;case"firefox":Ie.exports=Y(7111);break;case"safari":Ie.exports=Y(7548);break;default:Ie.exports=RTCPeerConnection}else Ie.exports=function(){throw new Error("RTCPeerConnection is not supported")}},7548:(Ie,Oe,Y)=>{"use strict";var L=Y(7590),W=Y(1905),ne=Y(3688),Q=Y(3236),U=Y(7627),D="unified"===Q.getSdpFormat(),O=D?Q.updateUnifiedPlanTrackIdsToSSRCs:Q.updatePlanBTrackIdsToSSRCs;function N(le){if(!(this instanceof N))return new N(le);L.call(this),U.interceptEvent(this,"datachannel"),U.interceptEvent(this,"iceconnectionstatechange"),U.interceptEvent(this,"signalingstatechange"),U.interceptEvent(this,"track");var X=new RTCPeerConnection(le);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:X},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new ne},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription}},iceConnectionState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState}},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState}}});var z=this;X.addEventListener("datachannel",function(se){te(se.channel),z.dispatchEvent(se)}),X.addEventListener("iceconnectionstatechange",function(){z._isClosed||z.dispatchEvent.apply(z,arguments)}),X.addEventListener("signalingstatechange",function(){z._isClosed||("stable"===X.signalingState&&(z._appliedTracksToSSRCs=new Map(z._tracksToSSRCs)),!z._pendingLocalOffer&&!z._pendingRemoteOffer&&z.dispatchEvent.apply(z,arguments))}),X.addEventListener("track",function(se){z._pendingRemoteOffer=null,z.dispatchEvent(se)}),U.proxyProperties(RTCPeerConnection.prototype,this,X)}function x(le,X,z){var ve=X?le._pendingLocalOffer:le._pendingRemoteOffer,pe=X?"have-local-offer":"have-remote-offer",Ee=X?"setLocalDescription":"setRemoteDescription";if(!X&&(X?le._pendingRemoteOffer:le._pendingLocalOffer)&&"answer"===z.type)return function J(le,X){return le._peerConnection.setLocalDescription(le._pendingLocalOffer).then(function(){return le._pendingLocalOffer=null,le.setRemoteDescription(X)}).then(function(){le._signalingStateLatch.lower()})}(le,z);if("offer"===z.type){if(le.signalingState!==pe&&"stable"!==le.signalingState)return Promise.reject(new Error("Cannot set "+(X?"local":"remote")+" offer in state "+le.signalingState));!ve&&"low"===le._signalingStateLatch.state&&le._signalingStateLatch.raise();var Ae=le.signalingState;return function K(ge){X?le._pendingLocalOffer=ge:le._pendingRemoteOffer=ge}(z),le.signalingState!==Ae?Promise.resolve().then(function(){le.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}return"rollback"===z.type?le.signalingState!==pe?Promise.reject(new Error("Cannot rollback "+(X?"local":"remote")+" description in "+le.signalingState)):(function se(){X?le._pendingLocalOffer=null:le._pendingRemoteOffer=null}(),le._rolledBackTracksToSSRCs=new Map(le._tracksToSSRCs),le._tracksToSSRCs=new Map(le._appliedTracksToSSRCs),Promise.resolve().then(function(){le.dispatchEvent(new Event("signalingstatechange"))})):le._peerConnection[Ee](z)}function ie(le,X){return!!le.getTransceivers().find(function(z){return z.receiver&&z.receiver.track&&z.receiver.track.kind===X})}function te(le){return Object.defineProperties(le,{maxPacketLifeTime:{value:65535===le.maxPacketLifeTime?null:le.maxPacketLifeTime},maxRetransmits:{value:65535===le.maxRetransmits?null:le.maxRetransmits}})}W(N,L),N.prototype.addIceCandidate=function(X){var z=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return z._peerConnection.addIceCandidate(X)}):this._peerConnection.addIceCandidate(X)},N.prototype.createOffer=function(X){X=Object.assign({},X);var z=this;if(X.offerToReceiveVideo&&!this._audioTransceiver&&(!D||!ie(this,"audio"))){delete X.offerToReceiveAudio;try{this._audioTransceiver=D?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(K){return Promise.reject(K)}}if(X.offerToReceiveVideo&&!this._videoTransceiver&&(!D||!ie(this,"video"))){delete X.offerToReceiveVideo;try{this._videoTransceiver=D?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(K){return Promise.reject(K)}}return this._peerConnection.createOffer(X).then(function(K){return z._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:K.type,sdp:O(z._tracksToSSRCs,K.sdp)})})},N.prototype.createAnswer=function(X){var z=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return z._signalingStateLatch.lower(),z._peerConnection.createAnswer()}).then(function(se){return z._pendingRemoteOffer=null,z._rolledBackTracksToSSRCs.clear(),D?new RTCSessionDescription({type:se.type,sdp:O(z._tracksToSSRCs,se.sdp)}):se},function(se){throw z._pendingRemoteOffer=null,se}):this._peerConnection.createAnswer(X).then(function(se){return z._rolledBackTracksToSSRCs.clear(),D?new RTCSessionDescription({type:se.type,sdp:O(z._tracksToSSRCs,se.sdp)}):se})},N.prototype.createDataChannel=function(X,z){var K=this._peerConnection.createDataChannel(X,z);return te(K),K},N.prototype.removeTrack=function(X){X.replaceTrack(null),this._peerConnection.removeTrack(X)},N.prototype.setLocalDescription=function(X){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),x(this,!0,X)},N.prototype.setRemoteDescription=function(X){return this._rolledBackTracksToSSRCs.clear(),x(this,!1,X)},N.prototype.close=function(){if(!this._isClosed){this._isClosed=!0,this._peerConnection.close();var X=this;setTimeout(function(){X.dispatchEvent(new Event("iceconnectionstatechange")),X.dispatchEvent(new Event("signalingstatechange"))})}},U.delegateMethods(RTCPeerConnection.prototype,N.prototype,"_peerConnection"),Ie.exports=N},7121:Ie=>{"use strict";Ie.exports=function Oe(Y){Object.defineProperties(this,{track:{enumerable:!0,value:Y,writable:!0}})}},4326:Ie=>{"use strict";Ie.exports=function Oe(Y){if(!(this instanceof Oe))return new Oe(Y);var L=Y&&"rollback"===Y.type?null:new RTCSessionDescription(Y);Object.defineProperties(this,{_description:{get:function(){return L}},sdp:{enumerable:!0,value:L?L.sdp:Y.sdp},type:{enumerable:!0,value:L?L.type:Y.type}})}},3657:Ie=>{"use strict";Ie.exports=RTCSessionDescription},5481:(Ie,Oe,Y)=>{"use strict";if("function"==typeof RTCSessionDescription)switch((0,Y(7627).guessBrowser)()){case"chrome":Ie.exports=Y(4326);break;case"firefox":Ie.exports=Y(3657);break;default:Ie.exports=RTCSessionDescription}else Ie.exports=function(){throw new Error("RTCSessionDescription is not supported")}},7590:(Ie,Oe,Y)=>{"use strict";var L=Y(9069).EventEmitter;function W(){Object.defineProperties(this,{_eventEmitter:{value:new L}})}W.prototype.dispatchEvent=function(Q){return this._eventEmitter.emit(Q.type,Q)},W.prototype.addEventListener=function(){return this._eventEmitter.addListener.apply(this._eventEmitter,arguments)},W.prototype.removeEventListener=function(){return this._eventEmitter.removeListener.apply(this._eventEmitter,arguments)},Ie.exports=W},7627:(Ie,Oe)=>{"use strict";function L(z,K,se,ve){if(!(ve in K)&&!ve.match(/^on[a-z]+$/)){var De=!1;try{var pe=Object.getOwnPropertyDescriptor(z,ve);De=pe&&!!pe.get}catch{}if(!De){var Ee;try{Ee=typeof z[ve]}catch{}"function"===Ee&&(K[ve]=function(){return this[se][ve].apply(this[se],arguments)})}}}function U(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function D(z){return typeof z>"u"&&(z=U()),/Chrome|CriOS/.test(z)?"chrome":/Firefox|FxiOS/.test(z)?"firefox":/Safari|iPhone|iPad|iPod/.test(z)?"safari":null}Oe.defer=function Y(){var z={};return z.promise=new Promise(function(K,se){z.resolve=K,z.reject=se}),z},Oe.delegateMethods=function W(z,K,se){for(var ve in z)L(z,K,se,ve)},Oe.difference=function ne(z,K){z=Array.isArray(z)?new Set(z):new Set(z.values()),K=Array.isArray(K)?new Set(K):new Set(K.values());var se=new Set;return z.forEach(function(ve){K.has(ve)||se.add(ve)}),se},Oe.flatMap=function Q(z,K){return(z instanceof Map||z instanceof Set?Array.from(z.values()):z).reduce(function(ve,De){var pe=K(De);return ve.concat(pe)},[])},Oe.guessBrowser=D,Oe.guessBrowserVersion=function O(z){typeof z>"u"&&(z=U());var K={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[D(z)];if(!K)return null;var se=new RegExp("("+K+")/([^\\s]+)"),ve=(z.match(se)||[])[2];if(!ve)return null;var De=ve.split(".").map(Number);return{major:isNaN(De[0])?null:De[0],minor:isNaN(De[1])?null:De[1]}},Oe.isIOSChrome=function N(z){return typeof z>"u"&&(z=U()),/Mobi/.test(z)&&"chrome"===D()&&/iPad|iPhone|iPod/.test(z)},Oe.interceptEvent=function x(z,K){var se=null;Object.defineProperty(z,"on"+K,{get:function(){return se},set:function(ve){se&&this.removeEventListener(K,se),"function"==typeof ve?this.addEventListener(K,se=ve):se=null}})},Oe.legacyPromise=function J(z,K,se){return K?z.then(function(ve){K(ve)},function(ve){se(ve)}):z},Oe.makeUUID=function ie(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var K=16*Math.random()|0;return("x"===z?K:3&K|8).toString(16)})},Oe.proxyProperties=function te(z,K,se){Object.getOwnPropertyNames(z).forEach(function(ve){!function le(z,K,se,ve){if(!(ve in K)){if(ve.match(/^on[a-z]+$/))return Object.defineProperty(K,ve,{value:null,writable:!0}),void se.addEventListener(ve.slice(2),function(){K.dispatchEvent.apply(K,arguments)});Object.defineProperty(K,ve,{enumerable:!0,get:function(){return se[ve]}})}}(0,K,se,ve)})},Oe.support=function X(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}},3688:(Ie,Oe,Y)=>{"use strict";var L=Y(7627).defer,W={high:new Set(["low"]),low:new Set(["high"])};function ne(U){if(!(this instanceof ne))return new ne(U);var D=U||"low";Object.defineProperties(this,{_state:{set:function(O){if(D!==O){var N=this._whenDeferreds.get(D=O);N.forEach(function(x){x.resolve(this)},this),N.clear()}},get:function(){return D}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])},state:{enumerable:!0,get:function(){return this._state}}})}function Q(U,D){return new Error('Cannot transition from "'+U+'" to "'+D+'"')}ne.prototype.lower=function(){return this.transition("low")},ne.prototype.raise=function(){return this.transition("high")},ne.prototype.transition=function(D){if(!W[this.state].has(D))throw Q(this.state,D);return this._state=D,this},ne.prototype.when=function(D){if(this.state===D)return Promise.resolve(this);if(!W[this.state].has(D))return Promise.reject(Q(this.state,D));var O=L();return this._whenDeferreds.get(D).add(O),O.promise},Ie.exports=ne},3236:(Ie,Oe,Y)=>{"use strict";var L=Y(7627).flatMap,W=Y(7627).guessBrowser,ne=null,U=null;function O(re){return re&&function Q(){if("boolean"==typeof ne)return ne;if(typeof RTCPeerConnection>"u")return ne=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),ne=!1}catch{ne=!0}return ne}()?{"plan-b":"planb","unified-plan":"unified"}[re]:function D(){if(!U)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype)try{(new RTCPeerConnection).addTransceiver("audio"),U="unified"}catch{U="planb"}else U="planb";return U}()}function J(re,de){return(de.match(new RegExp(re,"gm"))||[]).reduce(function(Fe,xe){var Ve=xe.match(new RegExp(re));return Ve?Fe.add(Ve[1]):Fe},new Set)}function ie(re,de){return J(re,de)}function te(re){return ie("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",re)}function le(re){return ie("^a=msid:.+ +(.+) *$",re)}function X(re,de){return J("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+de+" *$",re)}function z(re,de,we){return de=de||".*",we=we||".*",re.split("\r\nm=").slice(1).map(function(Fe){return"m="+Fe}).filter(function(Fe){var xe=new RegExp("m="+de,"gm"),Ve=new RegExp("a="+we,"gm");return xe.test(Fe)&&Ve.test(Fe)})}function K(re){return Array.from(J("^a=ssrc:([0-9]+) +.*$",re))}function se(re,de){var we=z(re),Fe=new RegExp("^a=msid:[^ ]+ +"+de+" *$","gm"),xe=we.filter(function(Ve){return Ve.match(Fe)});return new Set(L(xe,K))}function ve(re,de,we){return new Map(Array.from(re(we)).map(function(Fe){return[Fe,de(we,Fe)]}))}function De(re){return ve(te,X,re)}function pe(re){return ve(le,se,re)}function Ee(re,de,we){var Fe=re(we),xe=new Map;Fe.forEach(function(Ze,je){if(de.has(je)){var xt=Array.from(de.get(je)),Wt=Array.from(Ze);xt.forEach(function(ht,qe){var Ue=Wt[qe];xe.set(Ue,ht);var Re="a=ssrc:"+ht+" $1";we=we.replace(new RegExp("^a=ssrc:"+Ue+" (.*)$","gm"),Re)})}else de.set(je,Ze)});var Ve="^(a=ssrc-group:[^ ]+ +)(.*)$";return(we.match(new RegExp(Ve,"gm"))||[]).forEach(function(Ze){var je=Ze.match(new RegExp(Ve));if(je){var xt=je[1],ht=je[2].split(" ").map(function(qe){return xe.get(qe)||qe}).join(" ");we=we.replace(je[0],xt+ht)}}),we}Oe.getSdpFormat=function x(re){return{chrome:O(re),firefox:"unified",safari:typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[W()]||null},Oe.getMediaSections=z,Oe.getPlanBTrackIds=te,Oe.getUnifiedPlanTrackIds=le,Oe.getPlanBSSRCs=X,Oe.getUnifiedPlanSSRCs=se,Oe.updatePlanBTrackIdsToSSRCs=function Ae(re,de){return Ee(De,re,de)},Oe.updateUnifiedPlanTrackIdsToSSRCs=function ge(re,de){return Ee(pe,re,de)}},3332:Ie=>{Ie.exports=WebSocket},7156:Ie=>{function Oe(L,W,ne,Q,U,D,O){try{var N=L[D](O),x=N.value}catch(J){return void ne(J)}N.done?W(x):Promise.resolve(x).then(Q,U)}Ie.exports=function Y(L){return function(){var W=this,ne=arguments;return new Promise(function(Q,U){var D=L.apply(W,ne);function O(x){Oe(D,Q,U,O,N,"next",x)}function N(x){Oe(D,Q,U,O,N,"throw",x)}O(void 0)})}},Ie.exports.__esModule=!0,Ie.exports.default=Ie.exports},1730:Ie=>{"use strict";Ie.exports=JSON.parse('{"name":"twilio-video","title":"Twilio Video","description":"Twilio Video JavaScript Library","version":"2.21.3","homepage":"https://twilio.com","author":"Mark Andrus Roberts <mroberts@twilio.com>","contributors":["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"keywords":["twilio","webrtc","library","javascript","video","rooms"],"repository":{"type":"git","url":"https://github.com/twilio/twilio-video.js.git"},"devDependencies":{"@babel/core":"^7.14.2","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^17.2.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","glob":"^7.1.7","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","jsdoc":"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7","karma":"^5.0.2","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1","mocha":"^3.2.0","mock-require":"^3.0.3","ncp":"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","nyc":"^15.1.0","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.2","typescript":"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^7.7.1"},"engines":{"node":">=0.12"},"license":"BSD-3-Clause","main":"./es5/index.js","types":"./tsdef/index.d.ts","scripts":{"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts","lint":"npm-run-all lint:js lint:ts","printVersion":"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@5.5.0","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react","test":"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc ","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build":"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","docs":"node ./scripts/docs.js ./dist/docs","watch":"tsc -w","clean":"rimraf ./coverage ./es5 ./dist"},"dependencies":{"events":"^3.3.0","util":"^0.12.4","ws":"^7.4.6","xmlhttprequest":"^1.8.0"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"}}')}},Ie=>{Ie(Ie.s=9358)}]);